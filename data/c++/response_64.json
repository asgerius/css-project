[{"tags": ["c++", "r", "rcpp", "glog"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 2476581, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/70578255e03cbe35b3628f974c7b6d32?s=128&d=identicon&r=PG", "display_name": "user2476581", "link": "https://stackoverflow.com/users/2476581/user2476581"}, "edited": false, "score": 0, "creation_date": 1459470920, "post_id": 36321986, "comment_id": 60313653, "body": "Thanks.  I was searching for &quot;setup&quot; in &quot;Writing R Extensions&quot;, which didn&#39;t turn up anything."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "reply_to_user": {"reputation": 125, "user_id": 2476581, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/70578255e03cbe35b3628f974c7b6d32?s=128&d=identicon&r=PG", "display_name": "user2476581", "link": "https://stackoverflow.com/users/2476581/user2476581"}, "edited": false, "score": 0, "creation_date": 1459471569, "post_id": 36321986, "comment_id": 60313835, "body": "I hear you. These things are too scattered around -- but that was part of the reason we created the r-package-devel mailing list.  Topics like this do get discussed there, and it has a good signal/noise ratio.   SO works too at times :)"}], "tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": true, "score": 5, "last_activity_date": 1459382945, "creation_date": 1459382945, "answer_id": 36321986, "question_id": 36321864, "link": "https://stackoverflow.com/questions/36321864/proper-practice-for-setup-upon-load-in-r-package-development/36321986#36321986", "title": "Proper practice for setup upon load in R package development", "body": "<p>Just read 'Writing R Extensions' and follow the leads -- it is either <code>.onAttach()</code> or <code>.onLoad()</code>.  I have lots of packages that do little things there -- and it doesn't matter this calls to C++ (via Rcpp or not) as you are simply asking about where to initialise things.</p>\n\n<p><strong>Example:</strong> <a href=\"https://github.com/Rblp/Rblpapi/blob/master/R/init.R#L21-L35\" rel=\"noreferrer\">Rblpapi creates a connection and stores it</a></p>\n\n<pre><code>.pkgenv &lt;- new.env(parent=emptyenv())\n\n.onAttach &lt;- function(libname, pkgname) {\n    if (getOption(\"blpAutoConnect\", FALSE)) {\n        con &lt;- blpConnect()\n        if (getOption(\"blpVerbose\", FALSE)) {\n            packageStartupMessage(paste0(\"Created and stored default connection object \",\n                                         \"for Rblpapi version \",\n                                         packageDescription(\"Rblpapi\")$Version, \".\"))\n        }\n    } else {\n        con &lt;- NULL\n    }\n    assign(\"con\", con, envir=.pkgenv)\n}\n</code></pre>\n\n<p>I had some (not public) code that set up a handle (using C++ code) to a proprietary database the same way.  The key is that these hooks <em>guarantee you</em> execution on package load / attach which is what you want here.</p>\n"}], "owner": {"reputation": 125, "user_id": 2476581, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/70578255e03cbe35b3628f974c7b6d32?s=128&d=identicon&r=PG", "display_name": "user2476581", "link": "https://stackoverflow.com/users/2476581/user2476581"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 36321986, "answer_count": 1, "score": 1, "last_activity_date": 1459382945, "creation_date": 1459382244, "question_id": 36321864, "link": "https://stackoverflow.com/questions/36321864/proper-practice-for-setup-upon-load-in-r-package-development", "title": "Proper practice for setup upon load in R package development", "body": "<p>What is the correct way to go about automatically running some setup code (either in R or C++) once per package loading?  Ideally, said code would execute once the user did <code>library(mypackage)</code>.  Right now, it's contained in a <code>setup()</code> function that needs to be run once before anything else.  </p>\n\n<p>Just for more context, in my specific case, I'm using an external library that uses <a href=\"https://github.com/google/glog\" rel=\"nofollow\">glog</a> and I need to execute <code>google::InitGoogleLogging()</code> once and only once.  It's slightly awkward because I'm trying to use it <a href=\"https://code.google.com/archive/p/google-glog/issues/113\" rel=\"nofollow\">within a library</a> because I have to, even though it's supposed to be called from a <code>main</code>.</p>\n"}, {"tags": ["c++", "rtti"], "answers": [{"comments": [{"owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "edited": false, "score": 0, "creation_date": 1459386841, "post_id": 36321902, "comment_id": 60268090, "body": "Why <code>type_index</code> but no comparison? Usually <code>type_info</code> is kept as the value type and <code>type_index</code> just adds <code>operator&lt;</code> to it."}, {"owner": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "edited": false, "score": 0, "creation_date": 1459418744, "post_id": 36321902, "comment_id": 60282627, "body": "@milleniumbug Thanks a lot, it was the kind of information I was looking for. ( by the way where should I had to read about it officially ? )."}, {"owner": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "edited": false, "score": 0, "creation_date": 1459422274, "post_id": 36321902, "comment_id": 60285095, "body": "@milleniumbug I tried to use as I would like but there are some problems. Please see the code bellow to substitute partly the one you shown:                                                                 struct Base { int a=0x1 \tvoid p(){ std::cout&lt;&lt;a&lt;&lt;std::endl;} };  struct Derived : Base {  \tint b=0x2;  \tvoid p(){ \t\tstd::cout&lt;&lt;a&lt;&lt;&quot; &quot;&lt;&lt;b&lt;&lt;std::endl; \t} }; \t\t int main() {\t\tBase a;a.a=6; \t\tDerived b;b.a = 7;b.b = 8;      \t\tRTTIPointer&lt;Base&gt; ra(&amp;a); \t\tRTTIPointer&lt;Derived&gt; rb(&amp;b);  \t\tra-&gt;p(); \t\trb-&gt;p();  \t\trb.type_=ra.type_; \t\t \t\trb-&gt;p(); // I need to get it behave differently now ! }"}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "reply_to_user": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "edited": false, "score": 0, "creation_date": 1459427326, "post_id": 36321902, "comment_id": 60288906, "body": "@GeorgeKourtis The smart pointer class I written provides only access to RTTI info, which isn&#39;t much. It seems you are looking for something different - you need to use type erasure. Either you&#39;ll need to write a class for this manually (I&#39;ll elaborate about it later) or use something like Boost.TypeErasure."}], "tags": [], "owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "is_accepted": true, "score": 2, "last_activity_date": 1459382466, "creation_date": 1459382466, "answer_id": 36321902, "question_id": 36321778, "link": "https://stackoverflow.com/questions/36321778/using-rtti-with-plain-old-structures-gcc/36321902#36321902", "title": "Using RTTI with plain old structures (gcc)", "body": "<p>Create a smart pointer class for that:</p>\n\n<pre><code>#include &lt;typeindex&gt;\n#include &lt;type_traits&gt;\n\n// minimal implementation\ntemplate&lt;typename T&gt;\nclass RTTIPointer\n{\n    T* ptr_;\n    std::type_index type_;\npublic:\n    template&lt;typename U, typename std::enable_if&lt;std::is_convertible&lt;U*, T*&gt;::value&gt;::type* = nullptr&gt;\n    RTTIPointer(U* p) :\n        ptr_(p),\n        type_(typeid(*p))\n    {\n\n    }\n\n    // typename std::add_lvalue_reference&lt;T&gt;::type instead of T&amp;\n    // to support void pointers\n    typename std::add_lvalue_reference&lt;T&gt;::type operator*() const\n    {\n        return *ptr_;\n    }\n\n    T* operator-&gt;() const\n    {\n        return ptr_;\n    }\n\n    T* get() const\n    {\n        return ptr_;\n    }\n\n    std::type_index type() const\n    {\n        return type_;\n    }\n};\n\nstruct Base { int a; };\nstruct Derived : Base { int b; };\n\n#include &lt;iostream&gt;\n\nint main()\n{\n    Derived b;\n    b.a = 2;\n    b.b = 3;\n    RTTIPointer&lt;Base&gt; r(&amp;b);\n    std::cout &lt;&lt; r-&gt;a &lt;&lt; \"\\n\" &lt;&lt; r.type().name() &lt;&lt; \"\\n\";\n    RTTIPointer&lt;void&gt; q(&amp;b);\n    std::cout &lt;&lt; r.type().name() &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>2\n7Derived\n7Derived\n</code></pre>\n"}], "owner": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 36321902, "answer_count": 1, "score": 0, "last_activity_date": 1459382466, "creation_date": 1459381742, "question_id": 36321778, "link": "https://stackoverflow.com/questions/36321778/using-rtti-with-plain-old-structures-gcc", "title": "Using RTTI with plain old structures (gcc)", "body": "<p>I need to \"attach\" to an external ( non modifiable ) struct some sort of RTTI information.</p>\n\n<p>As I have seen from the gcc implementation, struct's with virtual methods have additionally at their beginning a pointer to a struct related to the type_info.</p>\n\n<p>So my need would be to operate on those external structures by using a double pointer that has both parts: the data pointer and the \"type\" pointer. That double pointer has all the information of a \"normal\" RTTI structure. Do you know of any \"legal\" or hacky way to do it </p>\n"}, {"tags": ["c++", "class", "destructor"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1459381100, "post_id": 36321582, "comment_id": 60266474, "body": "If you suspect that your IntroGameState class&#39;s constructor is not being called when you &quot;delete currentState&quot;, then the first thing you should do is put a printf() (or similar function call with a reliably observable side effect) into your ~IntroGameState() method to determine whether it actually does get called or not.  Once you know that, you will be able to decide what to do next."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1459381328, "post_id": 36321582, "comment_id": 60266550, "body": "Do you intend for GameState::currentState to ever point to something other than the instance of GameState in which it is contained? (In IntroGameState&#39;s ctor you assign <code>currentState = this</code>). If not, why isn&#39;t <code>this</code> good enough?"}, {"owner": {"reputation": 2194, "user_id": 2052072, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/94d519597b6118ff1866d5dce2071609?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/2052072/vince"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1459382160, "post_id": 36321582, "comment_id": 60266824, "body": "@JeremyFriesner that&#39;s why I put the Mix_HaltMusic() in the destructor. If i leave out the Mix_HaltMusic in the other place, the music continues to play when the game state has changed, instead of stopping like I want it to. I also don&#39;t have music in the other states yet, but it still plays, unless I halt the music right before I change the gamestate."}, {"owner": {"reputation": 2194, "user_id": 2052072, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/94d519597b6118ff1866d5dce2071609?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/2052072/vince"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1459382441, "post_id": 36321582, "comment_id": 60266897, "body": "@kfsone That&#39;s the only reason I have GameState::currentState. That way I can get the currentState from my Game class, and change the state there. When I tried [code]delete this[/code], i got a debug assertion failed. I placed that line of code before and after I changed the gameState."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1459382784, "post_id": 36321582, "comment_id": 60267008, "body": "Why don&#39;t you replace <code>GameState::currentState</code> - where you store what the state will be <i>next frame</i> - with a function <code>getNextState()</code> which you call at the top of the <code>ComposeFrame</code> function. It&#39;s job is either to return <code>this</code> or <code>new NewState()</code>. If it changes, then you delete the old currentState and set currentState to the return value you just got from NewState. I&#39;d also encourage you to read up on <code>std::unique_ptr</code> and consider using it so you don&#39;t have to worry about these kinds of details. <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/unique_ptr</a>"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 1, "creation_date": 1459382915, "post_id": 36321582, "comment_id": 60267038, "body": "&#39;delete this&#39; is almost always a bad idea, since you are deleting the object the the method is currently executing as part of, which means as soon as you do it, any access to member variables of the object the method is being called on becomes undefined behavior.  Don&#39;t do a &#39;delete this&#39; unless you really know what you are doing (and try not to do it even then).  Note that you can avoid all of this pain by using smart pointers (e.g. unique_ptr or shared_ptr) instead of raw C++ pointers, then you never have to worry about calling delete at all."}], "owner": {"reputation": 2194, "user_id": 2052072, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/94d519597b6118ff1866d5dce2071609?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/2052072/vince"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459381101, "creation_date": 1459380656, "question_id": 36321582, "link": "https://stackoverflow.com/questions/36321582/c-state-change-not-deleting-old-state", "title": "C++ State change not deleting old state?", "body": "<p>I'm working with Visual Studio and SDL to create a simple RPG game, however I noticed (when adding the music) that the music kept playing when I changed the gamestate, even though I stoped it in the destructor. If I stop the music right before changing the state though, the music stops (which made me realize that everytime i change the game state, the old state still remains, which I assume is using up a lot of memory (if i make the game big and change the state a lot).</p>\n\n<p>My state classes are set up like this:</p>\n\n<pre><code>// Gamestate.h\n#pragma once\n// includes here\n\nclass GameState\n{\npublic:\n  virtual ~GameState() {}\n  virtual void Update() {}\n  virtual void HandleEvents() {}\n  virtual void Logic() {}\n  virtual void Draw(Graphics&amp; gfx) {} // Graphics is my own class\n\n  GameState* getCurrentState()\n  {\n    return currentState;\n  }\n\nprotected:\n  SDL_Renderer* renderer;\n  GameState* currentState;\n  Timer timer; // my own timer class\n};\n\n// GameStates.h; different than GameState.h\n#pragma once\n// includes here\n\nclass IntroGameState : public GameState\n{\npublic:\n  IntroGameState(SDL_Renderer* renderer, KeyboardClient&amp; kbd);\n  ~IntroGameState();\n  void HandleEvents();\n  void Logic();\n  void Draw(Graphics&amp; gfx);\n\nprivate:\n  Mix_Music* theme;\n  // other variables defined here\n};\n\n// GameStates.cpp\nIntroGameState::IntoroGameState(SDL_Renderer* renderer, KeyboardClient&amp; kbd)\n{\n  GameState::renderer = renderer;\n  currentState = this;\n  timer.Start();\n\n  theme = Mix_LoadMUS(\"theme.wav\");\n  Mis_PlayMusic(theme, 0);\n}\nIntroGameState::~IntroGameState()\n{\n  // This line does nothing (destructor not being called?)\n  Mix_HaltMusic();\n\n  delete theme;\n  theme = NULL;\n};\nvoid IntroGameState::Logic()\n{\n  if (timer.ElapsedTime() &gt;= 5) // if 5 seconds pass\n  {\n    // This line works\n    Mix_HaltMusic();\n    // I tried:\n    // delete this;\n    // delete currentState;\n    // currentState = NULL; realized this was pointless when I just initialize it next\n\n    currentState = new MovieSceneState(renderer, kbd);\n}\n\n// Game.cpp (where i actually change the state\nGame::Game()\n{\n  // currentState here is defined within game.h\n  currentState = new IntroGameState(renderer, kbd);\n}\nvoid Game::ComposeFrame()\n{\n  currentState-&gt;HandleEvents();\n  ChangeState();\n  currentState-&gt;Logic();\n  currentState-&gt;Draw(gfx);\n}\nvoid ChangeState()\n{\n  GameState* s = currentState-&gt;GetCurrentState();\n  currentState = s;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "recursion", "template-meta-programming"], "comments": [{"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1459380572, "post_id": 36321295, "comment_id": 60266300, "body": "does it help? <a href=\"http://stackoverflow.com/a/29331753/225186\">stackoverflow.com/a/29331753/225186</a>"}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1459380740, "post_id": 36321295, "comment_id": 60266349, "body": "Ultimately, the initial condition 4 is what gives the number of iterations given an sqrt operation. Perhaps you can use a better initial purely integer guess based on this: <a href=\"http://www.informit.com/articles/article.aspx?p=30667&amp;seqNum=3\" rel=\"nofollow noreferrer\">informit.com/articles/article.aspx?p=30667&amp;seqNum=3</a>"}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "reply_to_user": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1459381159, "post_id": 36321295, "comment_id": 60266498, "body": "@alfC yeah that looked like a good way to guess initially, but the roots I&#39;m calculating can be any rational number (represented by <code>std::ratio</code>), so I&#39;m not sure what I&#39;d use as the input to <code>Sqrt</code>"}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1459381488, "post_id": 36321295, "comment_id": 60266601, "body": "Maybe you 1) can manually code two steps per recursion 2) increase <code>-ftemplate-depth=</code> or <code>RecursionDepth</code> 3) relax the convergence criteria."}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 1, "creation_date": 1459381642, "post_id": 36321295, "comment_id": 60266657, "body": "Also there is no magic initial condition that will make the convergence happen quickly for all values of R. Perhaps you can look at the original problem (ellipsoid parameters) and come up with an auxiliary problem in which you only need to compute square roots of the order 1. (i.e. of the ratios of axes), that is the typical way of reducing &quot;overflow&quot; in geometrical problems."}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1459381796, "post_id": 36321295, "comment_id": 60266711, "body": "You can add a stopping criterion also, which is not there now. Max recursion is typically around ~256, you can compute almost any square root if you have 256 at your disposal. The problem is that you want to stop earlier if it is not necessary to continue."}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "reply_to_user": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1459382053, "post_id": 36321295, "comment_id": 60266795, "body": "@alfC I don&#39;t get anywhere close to the max recursion limit, because the roots are irrational, and so the numerator and denominator get huge too quickly (ex. sqrt(30) == 8272361845441/1510319728864). 5 was a practical limit for roots &lt; 100, but I can&#39;t even go that deep for roots on the order of 1000."}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1459382093, "post_id": 36321295, "comment_id": 60266809, "body": "You can increase <code>RecursionDepth</code> and specialize <code>ratio_sqrt_impl</code> to return <code>K</code> if <code>K*K&#47;N &lt; Accuracy</code>. Where Accuracy is a fixed <code>std::ratio</code> value. That is the way it is done."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1459388901, "post_id": 36321295, "comment_id": 60268558, "body": "Continued fractions is an area of study where they can describe &quot;how big should num/den be to be a good approximation&quot;.  In practice, a real value is a map from &quot;degree of approximation&quot; to &quot;rational value&quot; that lets you find a rational value within any epsilon of your real: and you could pass around such a beast if you wanted &quot;real reals&quot;.  Barring that, you could consider bignum."}, {"owner": {"reputation": 7736, "user_id": 875044, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/19f2cbd347ab25e98b5aa05ee5673453?s=128&d=identicon&r=PG", "display_name": "Kan Li", "link": "https://stackoverflow.com/users/875044/kan-li"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1459403723, "post_id": 36321295, "comment_id": 60273004, "body": "@Yakk, yes I actually implemented continued fraction in meta progamming in my answer."}], "answers": [{"comments": [{"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1459396061, "post_id": 36323544, "comment_id": 60270395, "body": "This, plus your comments, have given me some valuable ideas. I think trying to reduce the order of the problem plus expanding the working range of the existing solution could get me where I need to be. I&#39;ll try to implement it tomorrow."}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "reply_to_user": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 1, "creation_date": 1459397288, "post_id": 36323544, "comment_id": 60270750, "body": "yes, and please let us know what is your solution at the end. One of the things I am thinking is that the Babylonian method might not be the best way to get roots within the rational numbers. (For example exact integer roots don&#39;t come out naturally and numerators and denominators grow very quickly)."}], "tags": [], "owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "is_accepted": false, "score": 0, "last_activity_date": 1459394737, "last_edit_date": 1459394737, "creation_date": 1459394432, "answer_id": 36323544, "question_id": 36321295, "link": "https://stackoverflow.com/questions/36321295/rational-approximation-of-square-root-of-stdratio-at-compile-time/36323544#36323544", "title": "rational approximation of square root of std::ratio at compile-time", "body": "<p>I think I understand the problem, what you are saying is that due to (multiplication) overflow in the integers, you can not do more than 4 or 5 iterations before the overflow... and that can still be a bad approximation.</p>\n\n<p>I think the only thing you can do about it is to have better initial estimates. And probably have that hard coded. In the example I show the range is large enough, but you can hard code more initial guesses to enlarge the range even more.</p>\n\n<pre><code>#include&lt;ratio&gt;\n#include&lt;iostream&gt;\n\nnamespace detail\n{\n\n    template&lt;class R&gt;\n    struct estimatimate{\n        typedef \n        typename std::conditional&lt;\n            std::ratio_less_equal&lt;R, std::ratio&lt;1,100&gt;&gt;::value, \n            std::ratio&lt;1,10&gt;,\n            typename std::conditional&lt;\n                std::ratio_less_equal&lt;R, std::ratio&lt;25,100&gt;&gt;::value, \n                std::ratio&lt;5,10&gt;,\n                typename std::conditional&lt;\n                    std::ratio_less_equal&lt;R, std::ratio&lt;1&gt;&gt;::value, \n                    std::ratio&lt;1&gt;,\n                    typename std::conditional&lt;\n                        std::ratio_less_equal&lt;R, std::ratio&lt;25&gt;&gt;::value, \n                        std::ratio&lt;5&gt;,\n                        typename std::conditional&lt;\n                            std::ratio_less_equal&lt;R, std::ratio&lt;100&gt;&gt;::value,\n                            std::ratio&lt;10&gt;,\n                            typename std::conditional&lt;\n                                std::ratio_less_equal&lt;R, std::ratio&lt;2500&gt;&gt;::value,\n                                std::ratio&lt;50&gt;,\n                                typename std::conditional&lt;\n                                    std::ratio_less_equal&lt;R, std::ratio&lt;10000&gt;&gt;::value,\n                                    std::ratio&lt;100&gt;,\n                                    std::ratio&lt;500&gt;\n                                &gt;::type\n                            &gt;::type\n                        &gt;::type\n                    &gt;::type\n                &gt;::type\n            &gt;::type\n        &gt;::type type;\n    };\n\n    template&lt;class N , class K = typename estimatimate&lt;N&gt;::type, std::intmax_t RecursionDepth = 4&gt;\n    struct ratio_sqrt_impl\n    {\n    //    static_assert(/* N is std::ratio */);\n\n        // Recursive Newton-Raphson\n        // EQUATION: K_{n+1} = (K_{n} - N / K_{n}) / 2\n        // WHERE:\n        // K_{n+1} : square root approximation\n        // K_{n}   : previous square root approximation\n        // N       : ratio whose square root we are finding\n        using type = typename ratio_sqrt_impl&lt;N, std::ratio_subtract&lt;K,\n          std::ratio_divide&lt;std::ratio_subtract&lt;std::ratio_multiply&lt;K, K&gt;, N&gt;, \n          std::ratio_multiply&lt;std::ratio&lt;2&gt;, K&gt;&gt;&gt;, RecursionDepth - 1&gt;::type;\n    };\n    template&lt;class N, class K&gt;\n    struct ratio_sqrt_impl&lt;N, K, 1&gt;\n    {\n        using type = K;\n    };\n}\n\ntemplate&lt;class Ratio&gt;\nusing ratio_sqrt = typename detail::ratio_sqrt_impl&lt;Ratio&gt;::type;\n\ntemplate&lt;class Ratio&gt;\ndouble value(){\n    return ((double)Ratio::num)/Ratio::den;\n}\n\n#include&lt;cmath&gt;\nusing namespace std;\nint main(){\n//  std::cout &lt;&lt; value&lt;std::ratio&lt;1,10&gt;&gt;() &lt;&lt; std::endl;\n//  std::cout &lt;&lt; value&lt;ratio_sqrt&lt;std::ratio&lt;4,1&gt;&gt;&gt;() &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; value&lt;ratio_sqrt&lt;std::ratio&lt;1,128&gt;&gt;&gt;() &lt;&lt; \" \" &lt;&lt; sqrt(value&lt;std::ratio&lt;1,128&gt;&gt;()) &lt;&lt; std::endl;\n    std::cout &lt;&lt; value&lt;ratio_sqrt&lt;std::ratio&lt;5000,1&gt;&gt;&gt;() &lt;&lt; \" \" &lt;&lt; sqrt(value&lt;std::ratio&lt;5000,1&gt;&gt;()) &lt;&lt; std::endl;\n\n}\n//output:\n// 0.0883883 0.0883883\n// 70.7107 70.7107\n</code></pre>\n\n<p>Unfortunately given the overflow, if you want to have less iterations you have to make the initial guess even better.</p>\n"}, {"comments": [{"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1459408667, "post_id": 36325025, "comment_id": 60275706, "body": "Very nice, can you write the algorithm to obtain the continued fraction in a mathematical notation, or point to a reference?"}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1459426218, "post_id": 36325025, "comment_id": 60288039, "body": "This. Is. <i>Awesome</i>. I agree wholeheartedly with your conclusion about the relative merits of the algorithms. This has a much wider range of performance, with less (and bounded) error, and the end result is a ratio you can actually use in further calculations. Worthy of <i>many</i> more upvotes than I have to give!"}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1459427683, "post_id": 36325025, "comment_id": 60289185, "body": "For those implementing at home, I&#39;d recommend replacing <code>int</code> with<code>std::intmax_t</code>"}, {"owner": {"reputation": 7736, "user_id": 875044, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/19f2cbd347ab25e98b5aa05ee5673453?s=128&d=identicon&r=PG", "display_name": "Kan Li", "link": "https://stackoverflow.com/users/875044/kan-li"}, "reply_to_user": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1459462265, "post_id": 36325025, "comment_id": 60311193, "body": "@NicolasHolthaus I changed to using intmax_t and improved the error bound estimate so it can now go with much smaller eps (1e-16 or even smaller, some are too small to have any difference under double precision)."}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1459465738, "post_id": 36325025, "comment_id": 60312271, "body": "@icando OK I got it to work, there are a lot of place where <code>Den_</code> or <code>Reciprocal&lt;Rem&gt;::I</code> could cause a divide-by-0, which isn&#39;t allowed in 2013. I can just edit them into the answer if you like."}, {"owner": {"reputation": 7736, "user_id": 875044, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/19f2cbd347ab25e98b5aa05ee5673453?s=128&d=identicon&r=PG", "display_name": "Kan Li", "link": "https://stackoverflow.com/users/875044/kan-li"}, "reply_to_user": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1459528562, "post_id": 36325025, "comment_id": 60342342, "body": "@NicolasHolthaus The assumption in my code is mathematically provable: remainders should always be in (0, 1) so reciprocal should have integer part <code>I</code> &gt;=1, and <code>U</code>, <code>V</code> and <code>W</code> are also &gt;=0, so <code>Den_=W+I</code> should never be 0. It is not MSVC 2013 doesn&#39;t allow divide-by-0 but other compilers allow it, it is MSVC 2013 has a broken implementation of standard libraries.  It works on gcc and MSVC2015. I prefer you not editing my code directly as it is standard compliant. You could simply add a separate section in my answer showing your fix and mention it is for MSVC2013 only."}, {"owner": {"reputation": 7736, "user_id": 875044, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/19f2cbd347ab25e98b5aa05ee5673453?s=128&d=identicon&r=PG", "display_name": "Kan Li", "link": "https://stackoverflow.com/users/875044/kan-li"}, "reply_to_user": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1459528964, "post_id": 36325025, "comment_id": 60342542, "body": "@NicolasHolthaus, other compilers doesn&#39;t allow divide-by-0 either: <a href=\"http://ideone.com/9tY52e\" rel=\"nofollow noreferrer\">ideone.com/9tY52e</a>, which means it never happened on other compilers that <code>Den_</code> or <code>Reciprocal&lt;Rem&gt;::I</code> caused divide-by-0. As I said the correctness of my code is mathematically provable, so it is due to MSVC2013 not standard compliant, rather than the logic error in my code."}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1459535182, "post_id": 36325025, "comment_id": 60346063, "body": "@icando yeah I never meant to imply that your code wasn&#39;t correct, just that it&#39;s easier (for me) to tweak the code than the compiler."}, {"owner": {"reputation": 7736, "user_id": 875044, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/19f2cbd347ab25e98b5aa05ee5673453?s=128&d=identicon&r=PG", "display_name": "Kan Li", "link": "https://stackoverflow.com/users/875044/kan-li"}, "reply_to_user": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1459536090, "post_id": 36325025, "comment_id": 60346560, "body": "@NicolasHolthaus sure you can just post your fix under my code and mention it is for MSVC2013 so that people using MSVC2013 can also work with it. I just don&#39;t want it mix with the original code, because gcc or MSVC2015 users don&#39;t have to have the hacky logic. BTW: because my code is written with the assumption in my mind, if the assumption is no longer true under MSVC2013, does it still yield correct result? I seriously doubt if the result is still correct. So I would suggest you to figure out the root cause why they are zero, and fix the root cause, rather than the hacky workaround."}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 1, "creation_date": 1459549967, "post_id": 36325025, "comment_id": 60353137, "body": "@icando so in the end the root cause seemed to be a bug in the VS template deduction. It was preferring the overloads with <code>typename enabled = void</code> over the specializations. A slight refactoring of the template parameters was a sufficient work-around."}, {"owner": {"reputation": 7736, "user_id": 875044, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/19f2cbd347ab25e98b5aa05ee5673453?s=128&d=identicon&r=PG", "display_name": "Kan Li", "link": "https://stackoverflow.com/users/875044/kan-li"}, "reply_to_user": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1459551772, "post_id": 36325025, "comment_id": 60353643, "body": "@NicolasHolthaus, awesome, I usually lose my mind when reading the cryptic error message of template, especially when the it is the bug of the compiler itself. I am glad you found the root cause instead of using potentially incorrect result that may affect your downstream computing."}], "tags": [], "owner": {"reputation": 7736, "user_id": 875044, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/19f2cbd347ab25e98b5aa05ee5673453?s=128&d=identicon&r=PG", "display_name": "Kan Li", "link": "https://stackoverflow.com/users/875044/kan-li"}, "is_accepted": true, "score": 8, "last_activity_date": 1459552823, "last_edit_date": 1459552823, "creation_date": 1459402830, "answer_id": 36325025, "question_id": 36321295, "link": "https://stackoverflow.com/questions/36321295/rational-approximation-of-square-root-of-stdratio-at-compile-time/36325025#36325025", "title": "rational approximation of square root of std::ratio at compile-time", "body": "<p>The problem is you use Newton's method to compute square root, which is correct if you want to get a numerical approximation, however, if you want to find best rational approximation, you gotta use <a href=\"https://en.wikipedia.org/wiki/Continued_fraction\" rel=\"nofollow\">continued fraction</a>.  Here is the result of my program:</p>\n\n<pre><code>hidden $ g++ -std=c++11 sqrt.cpp &amp;&amp; ./a.out\nsqrt(2/1) ~ 239/169, error=1.23789e-05, eps=0.0001\nsqrt(2/1) ~ 114243/80782, error=5.41782e-11, eps=1e-10\nsqrt(2/1) ~ 3880899/2744210, error=4.68514e-14, eps=1e-13\nsqrt(2/1) ~ 131836323/93222358, error=0, eps=1e-16\nsqrt(2/10001) ~ 1/71, error=5.69215e-05, eps=0.0001\nsqrt(2/10001) ~ 1977/139802, error=2.18873e-11, eps=1e-10\nsqrt(2/10001) ~ 13860/980099, error=7.36043e-15, eps=1e-13\nsqrt(2/10001) ~ 1950299/137913860, error=3.64292e-17, eps=1e-16\nsqrt(10001/2) ~ 495/7, error=7.21501e-05, eps=0.0001\nsqrt(10001/2) ~ 980099/13860, error=3.68061e-11, eps=1e-10\nsqrt(10001/2) ~ 415701778/5878617, error=1.42109e-14, eps=1e-13\nsqrt(10001/2) ~ 970297515/13721393, error=0, eps=1e-16\nsqrt(1060/83) ~ 461/129, error=2.19816e-05, eps=0.0001\nsqrt(1060/83) ~ 2139943/598809, error=9.07718e-13, eps=1e-10\nsqrt(1060/83) ~ 6448815/1804538, error=1.77636e-14, eps=1e-13\nsqrt(1060/83) ~ 545951360/152770699, error=4.44089e-16, eps=1e-16\nsqrt(1/12494234) ~ 1/3534, error=5.75083e-08, eps=0.0001\nsqrt(1/12494234) ~ 32/113111, error=2.9907e-11, eps=1e-10\nsqrt(1/12494234) ~ 419/1481047, error=6.02961e-14, eps=1e-13\nsqrt(1/12494234) ~ 129879/459085688, error=4.49944e-18, eps=1e-16\nsqrt(82378/1) ~ 18369/64, error=5.40142e-05, eps=0.0001\nsqrt(82378/1) ~ 37361979/130174, error=1.16529e-11, eps=1e-10\nsqrt(82378/1) ~ 1710431766/5959367, error=5.68434e-14, eps=1e-13\nsqrt(82378/1) ~ 15563177213/54224136, error=0, eps=1e-16\nsqrt(68389/3346222) ~ 197/1378, error=4.13769e-07, eps=0.0001\nsqrt(68389/3346222) ~ 17801/124517, error=2.17069e-11, eps=1e-10\nsqrt(68389/3346222) ~ 581697/4068938, error=4.30211e-15, eps=1e-13\nsqrt(68389/3346222) ~ 16237871/113583000, error=2.77556e-17, eps=1e-16\nsqrt(2/72) ~ 1/6, error=0, eps=0.0001\nsqrt(10000/1) ~ 100/1, error=0, eps=0.0001\nsqrt(0/20) ~ 0/1, error=0, eps=0.0001\n</code></pre>\n\n<p>My program finds the approximation with (almost) smallest numerator and denominator that satisfies the error bound. If you change the <code>int</code> to longer integer type in my code, it can go with much smaller <code>eps</code>.</p>\n\n<p>My code (it compiles under g++-4.8.4, IMHO, the code would have been much simpler if constexpr is allowed):</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;cmath&gt;\n#include &lt;iostream&gt;\n#include &lt;ratio&gt;\n#include &lt;type_traits&gt;\n#include &lt;utility&gt;\n\nusing namespace std;\n\nusing Zero = ratio&lt;0&gt;;\nusing One = ratio&lt;1&gt;;\ntemplate &lt;typename R&gt; using Square = ratio_multiply&lt;R, R&gt;;\n\n// Find the largest integer N such that Predicate&lt;N&gt;::value is true.\ntemplate &lt;template &lt;intmax_t N&gt; class Predicate, typename Enabled = void&gt;\nstruct BinarySearch {\n  template &lt;intmax_t N&gt;\n  struct SafeDouble_ {\n    const intmax_t static value = 2 * N;\n    static_assert(value &gt; 0, \"Overflows when computing 2 * N\");\n  };\n\n  template &lt;intmax_t Lower, intmax_t Upper, typename Enabled1 = void&gt;\n  struct DoubleSidedSearch_ : DoubleSidedSearch_&lt;Lower, Lower+(Upper-Lower)/2&gt; {};\n\n  template &lt;intmax_t Lower, intmax_t Upper&gt;\n  struct DoubleSidedSearch_&lt;Lower, Upper, typename enable_if&lt;Upper-Lower==1&gt;::type&gt; : integral_constant&lt;intmax_t, Lower&gt; {};\n\n  template &lt;intmax_t Lower, intmax_t Upper&gt;\n  struct DoubleSidedSearch_&lt;Lower, Upper, typename enable_if&lt;(Upper-Lower&gt;1 &amp;&amp; Predicate&lt;Lower+(Upper-Lower)/2&gt;::value)&gt;::type&gt;\n      : DoubleSidedSearch_&lt;Lower+(Upper-Lower)/2, Upper&gt; {};\n\n  template &lt;intmax_t Lower, typename Enabled1 = void&gt;\n  struct SingleSidedSearch_ : DoubleSidedSearch_&lt;Lower, SafeDouble_&lt;Lower&gt;::value&gt; {};\n\n  template &lt;intmax_t Lower&gt;\n  struct SingleSidedSearch_&lt;Lower, typename enable_if&lt;Predicate&lt;SafeDouble_&lt;Lower&gt;::value&gt;::value&gt;::type&gt;\n      : SingleSidedSearch_&lt;SafeDouble_&lt;Lower&gt;::value&gt; {};\n\n  const static intmax_t value = SingleSidedSearch_&lt;1&gt;::value;\n};\n\ntemplate &lt;template &lt;intmax_t N&gt; class Predicate&gt;\nstruct BinarySearch&lt;Predicate, typename enable_if&lt;!Predicate&lt;1&gt;::value&gt;::type&gt; : integral_constant&lt;intmax_t, 0&gt; {};\n\n// Find largest integer N such that N&lt;=sqrt(R)\ntemplate &lt;typename R&gt;\nstruct Integer {\n  template &lt;intmax_t N&gt; using Predicate_ = ratio_less_equal&lt;ratio&lt;N&gt;, ratio_divide&lt;R, ratio&lt;N&gt;&gt;&gt;;\n  const static intmax_t value = BinarySearch&lt;Predicate_&gt;::value;\n};\n\ntemplate &lt;typename R&gt;\nstruct IsPerfectSquare {\n  const static intmax_t DenSqrt_ = Integer&lt;ratio&lt;R::den&gt;&gt;::value;\n  const static intmax_t NumSqrt_ = Integer&lt;ratio&lt;R::num&gt;&gt;::value;\n  const static bool value = DenSqrt_ * DenSqrt_ == R::den &amp;&amp; NumSqrt_ * NumSqrt_ == R::num;\n  using Sqrt = ratio&lt;NumSqrt_, DenSqrt_&gt;;\n};\n\n// Represents sqrt(P)-Q.\ntemplate &lt;typename Tp, typename Tq&gt;\nstruct Remainder {\n  using P = Tp;\n  using Q = Tq;\n};\n\n// Represents 1/R = I + Rem where R is a Remainder.\ntemplate &lt;typename R&gt;\nstruct Reciprocal {\n  using P_ = typename R::P;\n  using Q_ = typename R::Q;\n  using Den_ = ratio_subtract&lt;P_, Square&lt;Q_&gt;&gt;;\n  using A_ = ratio_divide&lt;Q_, Den_&gt;;\n  using B_ = ratio_divide&lt;P_, Square&lt;Den_&gt;&gt;;\n  const static intmax_t I_ = (A_::num + Integer&lt;ratio_multiply&lt;B_, Square&lt;ratio&lt;A_::den&gt;&gt;&gt;&gt;::value) / A_::den;\n  using I = ratio&lt;I_&gt;;\n  using Rem = Remainder&lt;B_, ratio_subtract&lt;I, A_&gt;&gt;;\n};\n\n// Expands sqrt(R) to continued fraction:\n// f(x)=C1+1/(C2+1/(C3+1/(...+1/(Cn+x)))) = (U*x+V)/(W*x+1) and sqrt(R)=f(Rem).\n// The error |f(Rem)-V| = |(U-W*V)x/(W*x+1)| &lt;= |U-W*V|*Rem &lt;= |U-W*V|/I' where\n// I' is the integer part of reciprocal of Rem.\ntemplate &lt;typename R, intmax_t N&gt;\nstruct ContinuedFraction {\n  template &lt;typename T&gt;\n  using Abs_ = typename conditional&lt;ratio_less&lt;T, Zero&gt;::value, ratio_subtract&lt;Zero, T&gt;, T&gt;::type;\n\n  using Last_ = ContinuedFraction&lt;R, N-1&gt;;\n  using Reciprocal_ = Reciprocal&lt;typename Last_::Rem&gt;;\n  using Rem = typename Reciprocal_::Rem;\n  using I_ = typename Reciprocal_::I;\n  using Den_ = ratio_add&lt;typename Last_::W, I_&gt;;\n  using U = ratio_divide&lt;typename Last_::V, Den_&gt;;\n  using V = ratio_divide&lt;ratio_add&lt;typename Last_::U, ratio_multiply&lt;typename Last_::V, I_&gt;&gt;, Den_&gt;;\n  using W = ratio_divide&lt;One, Den_&gt;;\n  using Error = Abs_&lt;ratio_divide&lt;ratio_subtract&lt;U, ratio_multiply&lt;V, W&gt;&gt;, typename Reciprocal&lt;Rem&gt;::I&gt;&gt;;\n};\n\ntemplate &lt;typename R&gt;\nstruct ContinuedFraction&lt;R, 1&gt; {\n  using U = One;\n  using V = ratio&lt;Integer&lt;R&gt;::value&gt;;\n  using W = Zero;\n  using Rem = Remainder&lt;R, V&gt;;\n  using Error = ratio_divide&lt;One, typename Reciprocal&lt;Rem&gt;::I&gt;;\n};\n\ntemplate &lt;typename R, typename Eps, intmax_t N=1, typename Enabled = void&gt;\nstruct Sqrt_ : Sqrt_&lt;R, Eps, N+1&gt; {};\n\ntemplate &lt;typename R, typename Eps, intmax_t N&gt;\nstruct Sqrt_&lt;R, Eps, N, typename enable_if&lt;ratio_less_equal&lt;typename ContinuedFraction&lt;R, N&gt;::Error, Eps&gt;::value&gt;::type&gt; {\n  using type = typename ContinuedFraction&lt;R, N&gt;::V;\n};\n\ntemplate &lt;typename R, typename Eps, typename Enabled = void&gt;\nstruct Sqrt {\n  static_assert(ratio_greater_equal&lt;R, Zero&gt;::value, \"R can't be negative\");\n};\n\ntemplate &lt;typename R, typename Eps&gt;\nstruct Sqrt&lt;R, Eps, typename enable_if&lt;ratio_greater_equal&lt;R, Zero&gt;::value &amp;&amp; IsPerfectSquare&lt;R&gt;::value&gt;::type&gt; {\n  using type = typename IsPerfectSquare&lt;R&gt;::Sqrt;\n};\n\ntemplate &lt;typename R, typename Eps&gt;\nstruct Sqrt&lt;R, Eps, typename enable_if&lt;(ratio_greater_equal&lt;R, Zero&gt;::value &amp;&amp; !IsPerfectSquare&lt;R&gt;::value)&gt;::type&gt; : Sqrt_&lt;R, Eps&gt; {};\n\n// Test finding sqrt(N/D) with error 1/Eps\ntemplate &lt;intmax_t N, intmax_t D, intmax_t Eps&gt;\nvoid test() {\n  using T = typename Sqrt&lt;ratio&lt;N, D&gt;, ratio&lt;1, Eps&gt;&gt;::type;\n  cout &lt;&lt; \"sqrt(\" &lt;&lt; N &lt;&lt; \"/\" &lt;&lt; D &lt;&lt; \") ~ \" &lt;&lt; T::num &lt;&lt; \"/\" &lt;&lt; T::den &lt;&lt; \", \"\n       &lt;&lt; \"error=\" &lt;&lt; abs(sqrt(N/(double)D) - T::num/(double)T::den) &lt;&lt; \", \"\n       &lt;&lt; \"eps=\" &lt;&lt; 1/(double)Eps &lt;&lt; endl;\n}\n\ntemplate &lt;intmax_t N, intmax_t D&gt;\nvoid testAll() {\n  test&lt;N, D, 10000&gt;();\n  test&lt;N, D, 10000000000&gt;();\n  test&lt;N, D, 10000000000000&gt;();\n  test&lt;N, D, 10000000000000000&gt;();\n}\n\nint main() {\n  testAll&lt;2, 1&gt;();\n  testAll&lt;2, 10001&gt;();\n  testAll&lt;10001, 2&gt;();\n\n  testAll&lt;1060, 83&gt;();\n  testAll&lt;1, 12494234&gt;();\n  testAll&lt;82378, 1&gt;();\n  testAll&lt;68389, 3346222&gt;();\n\n  test&lt;2, 72, 10000&gt;();\n  test&lt;10000, 1, 10000&gt;();\n  test&lt;0, 20, 10000&gt;();\n  // static assertion failure.\n  // test&lt;-10001, 2, 100000&gt;();\n}\n</code></pre>\n\n<hr>\n\n<h2>Modified <code>BinarySearch</code> for MSVC 2013</h2>\n\n<p>Due to bugs in the template deduction implementation of the Visual Studio 2013 compiler, the <code>BinarySearch</code> has to be modified when building on that platform:</p>\n\n<pre><code>template &lt;template &lt;std::intmax_t N&gt; class Predicate, typename enabled = void&gt;\nstruct BinarySearch {\n    template &lt;std::intmax_t N&gt;\n    struct SafeDouble_ {\n        static const std::intmax_t value = 2 * N;\n        static_assert(value &gt; 0, \"Overflows when computing 2 * N\");\n    };\n\n    template &lt;intmax_t Lower, intmax_t Upper, typename Condition1 = void, typename Condition2 = void&gt;\n    struct DoubleSidedSearch_ : DoubleSidedSearch_&lt;Lower, Upper,\n        typename std::conditional&lt;(Upper - Lower == 1), std::true_type, std::false_type&gt;::type,\n        typename std::conditional&lt;((Upper - Lower&gt;1 &amp;&amp; Predicate&lt;Lower + (Upper - Lower) / 2&gt;::value)), std::true_type, std::false_type&gt;::type&gt; {};\n\n    template &lt;intmax_t Lower, intmax_t Upper&gt;\n    struct DoubleSidedSearch_&lt;Lower, Upper, std::false_type, std::false_type&gt; : DoubleSidedSearch_&lt;Lower, Lower + (Upper - Lower) / 2&gt; {};\n\n    template &lt;intmax_t Lower, intmax_t Upper, typename Condition2&gt;\n    struct DoubleSidedSearch_&lt;Lower, Upper, std::true_type, Condition2&gt; : std::integral_constant&lt;intmax_t, Lower&gt;{};\n\n    template &lt;intmax_t Lower, intmax_t Upper, typename Condition1&gt;\n    struct DoubleSidedSearch_&lt;Lower, Upper, Condition1, std::true_type&gt; : DoubleSidedSearch_&lt;Lower + (Upper - Lower) / 2, Upper&gt;{};\n\n    template &lt;std::intmax_t Lower, class enabled1 = void&gt;\n    struct SingleSidedSearch_ : SingleSidedSearch_&lt;Lower, typename std::conditional&lt;Predicate&lt;SafeDouble_&lt;Lower&gt;::value&gt;::value, std::true_type, std::false_type&gt;::type&gt;{};\n\n    template &lt;std::intmax_t Lower&gt;\n    struct SingleSidedSearch_&lt;Lower, std::false_type&gt; : DoubleSidedSearch_&lt;Lower, SafeDouble_&lt;Lower&gt;::value&gt; {};\n\n    template &lt;std::intmax_t Lower&gt;\n    struct SingleSidedSearch_&lt;Lower, std::true_type&gt; : SingleSidedSearch_&lt;SafeDouble_&lt;Lower&gt;::value&gt;{};\n\n    const static std::intmax_t value = SingleSidedSearch_&lt;1&gt;::value;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1459429360, "post_id": 36334167, "comment_id": 60290468, "body": "I really like that this algorithm uses overflow criterion to end the recursion, which is what I wanted from the start. However, the really nice feature of the continued fraction is the ability to specify the error using epsilon (even though for many cases the error is larger than either your or my method), so that you know the impact on downstream calculations."}, {"owner": {"reputation": 7736, "user_id": 875044, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/19f2cbd347ab25e98b5aa05ee5673453?s=128&d=identicon&r=PG", "display_name": "Kan Li", "link": "https://stackoverflow.com/users/875044/kan-li"}, "reply_to_user": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 1, "creation_date": 1459462655, "post_id": 36334167, "comment_id": 60311351, "body": "@NicolasHolthaus I changed using the intmax_t and improved the error bound estimate. Now the eps can go under 1e-16, some are too small to show any difference under double precision."}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "reply_to_user": {"reputation": 7736, "user_id": 875044, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/19f2cbd347ab25e98b5aa05ee5673453?s=128&d=identicon&r=PG", "display_name": "Kan Li", "link": "https://stackoverflow.com/users/875044/kan-li"}, "edited": false, "score": 0, "creation_date": 1459463882, "post_id": 36334167, "comment_id": 60311755, "body": "@icando If you&#39;re in the mood to improve things, I could not get this to build on msvc2013, I think due to some bad interactions between how they define <code>std::ratio_greater_than</code> and how the reciprocals are defined in your meta-program (it gets 0&#39;s in the denominator)."}, {"owner": {"reputation": 7736, "user_id": 875044, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/19f2cbd347ab25e98b5aa05ee5673453?s=128&d=identicon&r=PG", "display_name": "Kan Li", "link": "https://stackoverflow.com/users/875044/kan-li"}, "reply_to_user": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1459464211, "post_id": 36334167, "comment_id": 60311844, "body": "@NicolasHolthaus, unfortunately I don&#39;t have msvc at my hand. Could it be their intmax_t actually int32_t so it overflows?"}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "reply_to_user": {"reputation": 7736, "user_id": 875044, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/19f2cbd347ab25e98b5aa05ee5673453?s=128&d=identicon&r=PG", "display_name": "Kan Li", "link": "https://stackoverflow.com/users/875044/kan-li"}, "edited": false, "score": 0, "creation_date": 1459464627, "post_id": 36334167, "comment_id": 60311974, "body": "@icando no it&#39;s a <code>long long</code>."}, {"owner": {"reputation": 7736, "user_id": 875044, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/19f2cbd347ab25e98b5aa05ee5673453?s=128&d=identicon&r=PG", "display_name": "Kan Li", "link": "https://stackoverflow.com/users/875044/kan-li"}, "reply_to_user": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1459465679, "post_id": 36334167, "comment_id": 60312260, "body": "@NicolasHolthaus, I don&#39;t have a Windows machine with developer tools installed. But I think I understand what happened based on your information. I feel it is not the problem of <code>std::ratio_greater_equal</code> but <code>ratio&lt;2, 72&gt;</code> is not reduced to <code>ratio&lt;1, 36&gt;</code>, thus <code>IsPerfectSquare</code> is not working. In fact it should work: <a href=\"http://en.cppreference.com/w/cpp/numeric/ratio/ratio\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/numeric/ratio/ratio</a>.  Can you try reverting IsPerfectSquare to my previous version and see if it works?"}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "reply_to_user": {"reputation": 7736, "user_id": 875044, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/19f2cbd347ab25e98b5aa05ee5673453?s=128&d=identicon&r=PG", "display_name": "Kan Li", "link": "https://stackoverflow.com/users/875044/kan-li"}, "edited": false, "score": 0, "creation_date": 1459465849, "post_id": 36334167, "comment_id": 60312310, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/107906/discussion-between-nicolas-holthaus-and-icando\">continue this discussion in chat</a>."}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1459835184, "post_id": 36334167, "comment_id": 60450952, "body": "Can the person downvoting explain at least why?"}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "reply_to_user": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1459894960, "post_id": 36334167, "comment_id": 60491033, "body": "@alfC I strongly suspect some people are confused by the long conversation about icando&#39;s answer which appears here, in the comments under my answer.  For instance, my answer says it&#39;s MSVC compatible, then in the comments Nicolas looks like he can&#39;t get &quot;this&quot; to build on MSVC (where &quot;this&quot; is actually another answer).  And the problems continue, eventually overflowing into chat.  And by the way, the Sqrt::log_limit setting allows one to control the result&#39;s precision, if one wishes to make sure it&#39;s usable without overflow problems."}], "tags": [], "owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "is_accepted": false, "score": 0, "last_activity_date": 1459896826, "last_edit_date": 1459896826, "creation_date": 1459429002, "answer_id": 36334167, "question_id": 36321295, "link": "https://stackoverflow.com/questions/36321295/rational-approximation-of-square-root-of-stdratio-at-compile-time/36334167#36334167", "title": "rational approximation of square root of std::ratio at compile-time", "body": "<p><strong>Update</strong></p>\n\n<p><strong>Fixed overflow with super-large inputs in <code>iSqrt</code></strong></p>\n\n<p><strong><code>test_dump</code>'s input pack no longer needs a terminating <code>bool</code>.</strong></p>\n\n<p>This code calculates the rational square root of a <code>std::ratio</code>\nIt works with Visual Studio 2013 and g++ at IdeOne.</p>\n\n<p>This uses a mediant search to converge on the target value.  The search passes through the same convergents as a continued fraction, but with a few more iterations.  This is similar to walking the Stern-Brocot tree, where each node is a closer rational approximation to some real target value.</p>\n\n<p>This keeps converging until either the numerator or denominator of the last mediant passes a limit, close to the point of triggering an integer overflow.</p>\n\n<p>At the bottom, a few test cases are calculated.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;ratio&gt;\n#include &lt;cmath&gt;  // for sqrt(double) -- only used for testing\n\n// old versions of std::numeric_limits can't be used at compile-time\n// integer_limits is a replacement, for two's complement integer types\ntemplate &lt;typename T&gt;\nstruct integer_limits {\n    static const bool is_integer = T(1)/T(3) == T(0);\n    static_assert(is_integer, \"integer_limits got non-integer type\");\n    static const bool is_signed = T(1)-T(3) &lt; T(1);\n    static const int  bit_count = sizeof(T) * 8; // 8-bit char safely assumed\n    static const T    min_value = is_signed ? T(1) &lt;&lt; (bit_count-1) : T(0);\n    static const T    max_value = ~min_value;\n};\n\n// iLog2: static intmax_t log2, used by iSqrt to calculate an initial guess\ntemplate &lt;intmax_t n&gt;\nstruct iLog2 {\n    template &lt;intmax_t b, intmax_t c=0&gt;\n    struct L2 {\n        static const intmax_t value = L2&lt;b/2, c+1&gt;::value;\n    };\n    template &lt;intmax_t c&gt;\n    struct L2&lt;1,c&gt; {\n        static const intmax_t value = c;\n    };\n    static_assert(n &gt; 0, \"Log2 got n &lt;= 0\");\n    static const intmax_t value = L2&lt;n&gt;::value;\n};\n\n// iSqrt: static intmax_t square root\n// starts off using iLog2 to get an approximate result range\n// uses standard binary search to narrow the range and converge\n// on the square root's floor value\ntemplate &lt;intmax_t n&gt;\nstruct iSqrt {\n    static_assert(n &gt;= 0, \"iSqrt got a negative n\");\n\n    // main recursive binary search loop\n    template &lt;intmax_t low, intmax_t high, bool end=(low &gt;= high)&gt;\n    struct srch {\n        static const intmax_t mid       = low + (high - low)/2;\n        static const intmax_t ndivm     = n / mid;\n        static const int      mid_cmp   = int(mid &gt; ndivm) - int(mid &lt; ndivm);\n        static const intmax_t next_high = mid_cmp &lt; 0 ? high - (mid == low)  : mid;\n        static const intmax_t next_low  = mid_cmp &gt; 0 ? low                  : mid;\n        static const intmax_t value     = srch&lt;next_low, next_high&gt;::value;\n    };\n    // terminating specialization for the binary search (end is true)\n    template &lt;intmax_t low, intmax_t high&gt;\n    struct srch&lt;low, high, true&gt; {\n        static_assert(low*low &lt;= n &amp;&amp; (low+1)*(low+1) &gt; n, \"bad result\");\n        static const intmax_t value = low;\n    };\n    // initial range and kickoff\n    static const intmax_t low_approx = intmax_t(1) &lt;&lt; iLog2&lt;n&gt;::value / 2;\n    static const intmax_t high_approx = low_approx &lt;&lt; 1;\n    static const intmax_t value = srch&lt;low_approx, high_approx&gt;::value;\n};\n// Specializations handling sqrt(0) and sqrt(1)\ntemplate &lt;&gt; struct iSqrt&lt;0&gt; { static const intmax_t value = 0; };\ntemplate &lt;&gt; struct iSqrt&lt;1&gt; { static const intmax_t value = 1; };\n\n// std::ratio mediant calculation, used in the mediant search\ntemplate &lt;typename a, typename b&gt;\nstruct mediant {\n    typedef std::ratio&lt;a::num + b::num, a::den + b::den&gt; type;\n};\n\n// conditional type selection utility\ntemplate &lt;typename A, typename B, bool sel_a&gt; struct select_t { typedef A type; };\ntemplate &lt;typename A, typename B&gt; struct select_t&lt;A, B, false&gt;{ typedef B type; };\n\n// Sqrt calculates the square root of a std::ratio\ntemplate &lt;typename r&gt;\nstruct Sqrt {\n    // log_limit limits how big (in bits) the intmax_t can get before ending the mediant search\n    // the fraction here comes from trial and error.  Some implementations of\n    // std::ratio might be more likely to overflow than others, so you can experiement with\n    // this to try to get more precision.\n    // This search tests convergents against the input by squaring them, so there is\n    // a hard limit at 50% (half the bits).  My std::ratio implementation also\n    // seems to need a lot of cushioning when it does comparisons.\n    static const int log_limit = (integer_limits&lt;intmax_t&gt;::bit_count-1) * 31/100;\n    static const intmax_t root_limit = intmax_t(1) &lt;&lt; log_limit;\n\n    // The main mediant search loop.  This is similar to walking the Stern-Brocot tree\n    // toward a real target.  Each iteration brings the ratio closer to the target by\n    // increasing both the numerator and denominator.  The convergents of a mediant\n    // search intersect the convergents of a continued fraction search, but with more\n    // iterations and intermediate convergents.  However, it is probably simpler to implement\n    // for compile-time than the Euclidean algorithm used for continued fractions.\n    // This is not a binary search, although it looks similar.  A binary search would\n    // not work well for this.\n    template &lt;typename low, typename high, bool done=false&gt;\n    struct srch {\n        static_assert(std::ratio_greater_equal&lt;high, low&gt;::value, \"Sqrt::srch got low &gt; high\");\n        typedef typename mediant&lt;low, high&gt;::type med;\n        typedef typename std::ratio_multiply&lt;med, med&gt; med_sq;\n        static const bool med_over = std::ratio_greater&lt;med_sq, r&gt;::value;\n        typedef typename select_t&lt;low, med,  med_over&gt;::type next_low;\n        typedef typename select_t&lt;med, high, med_over&gt;::type next_high;\n        static const bool stop = med::num &gt; root_limit || med::den &gt; root_limit;\n        typedef typename srch&lt;next_low, next_high, stop&gt;::type type;\n    };\n    // The terminating specialization for the mediant search, triggered by the\n    // last mediant's numerator or denominator exceeding root_limit\n    // The low and high convergents are squared and compared with the input\n    // in order to select the best result.\n    template &lt;typename low, typename high&gt;\n    struct srch&lt;low, high, true&gt; {\n        typedef typename std::ratio_multiply&lt;low,  low&gt;  low_sq;\n        typedef typename std::ratio_multiply&lt;high, high&gt; high_sq;\n        typedef std::ratio_subtract&lt;r, low_sq&gt;  err_sq_low;\n        typedef std::ratio_subtract&lt;high_sq, r&gt; err_sq_high;\n        static const bool low_closer = std::ratio_less&lt;err_sq_low, err_sq_high&gt;::value;\n        typedef typename select_t&lt;low, high, low_closer&gt;::type type;\n    };\n    // init checks the first approximation if it the root of a perfect square or if the numerator is zero\n    // (in case on a non-canonical zero-valued ratio (unlikely, though))\n    // when the input (r) is not a perfect square, this sets up the high and low ratios for the mediant\n    // search.  These are set up in a way which ensures coprime numerators and denominators.\n    // Then init kicks off the search loop.\n    template &lt;intmax_t num, intmax_t den, bool done = (num*num==r::num &amp;&amp; den*den==r::den) || num==0&gt;\n    struct init {\n        typedef std::ratio&lt;num,     den + 1&gt; low;\n        typedef std::ratio&lt;num + 1, den&gt;     high;\n        typedef typename srch&lt;low, high&gt;::type type;\n    };\n    // the init perfect square shortcut specialization\n    template &lt;intmax_t num, intmax_t den&gt; struct init&lt;num, den, true&gt; {typedef std::ratio&lt;num, den&gt; type; };\n\n    // An approximate numerator and denominator of the result is calculated \n    // by taking the integer square roots of the input ratio's num and den.\n    // Then these values are passed to init for processing.\n    static const intmax_t approx_num = iSqrt&lt;r::num&gt;::value;\n    static const intmax_t approx_den = iSqrt&lt;r::den&gt;::value;\n    typedef typename init&lt;approx_num, approx_den&gt;::type type;\n};\n\n// Diagnostic junk follows....\ntemplate &lt;typename r&gt;\nvoid dump_ratio() {\n    std::cout &lt;&lt; r::num &lt;&lt; '/' &lt;&lt; r::den;\n}\n\ntemplate &lt;intmax_t N, intmax_t D&gt;\nstd::ostream&amp; operator &lt;&lt; (std::ostream &amp;os, typename std::ratio&lt;N,D&gt; r) {\n    os &lt;&lt; r.num &lt;&lt; '/' &lt;&lt; r.den;\n    return os;\n}\n\ntemplate &lt;typename r&gt;\ndouble get_double() {\n    return double(r::num) / r::den;\n}\n\ntemplate &lt;typename ...Rs&gt; struct test_dump;\n\ntemplate &lt;typename R, typename ...Rs&gt;\nstruct test_dump&lt;R, Rs...&gt; {\n    static void go() {\n        std::cout &lt;&lt; std::setprecision(14);\n        double flt_in = get_double&lt;R&gt;();\n        std::cout &lt;&lt; \" in:   \" &lt;&lt; R{} &lt;&lt; \" : \" &lt;&lt; flt_in &lt;&lt; \" (rat =&gt; double)\\n\";\n        using rat_sqrt = typename Sqrt&lt;R&gt;::type;\n        std::cout &lt;&lt; \" sqrt: \" &lt;&lt; rat_sqrt{} &lt;&lt; '\\n';\n        double flt_rat_sqrt = get_double&lt;rat_sqrt&gt;();\n        std::cout &lt;&lt; flt_rat_sqrt &lt;&lt; \" (rat =&gt; double)\\n\";\n        double sqrt_flt_in = sqrt(flt_in);\n        double err = flt_rat_sqrt - sqrt_flt_in;\n        std::cout &lt;&lt; sqrt_flt_in &lt;&lt; \" : (sqrt in) \";\n        std::cout &lt;&lt; std::setprecision(4);\n        std::cout &lt;&lt; \"err: \" &lt;&lt; err &lt;&lt; \"\\n\\n\";\n        test_dump&lt;Rs...&gt;::go();\n    }\n};\n\ntemplate &lt;&gt;\nstruct test_dump&lt;&gt; { static void go() {} };\n\n\nint main() {\n    test_dump&lt;\n        std::ratio&lt;1060,   83&gt;,\n        std::ratio&lt;1,      12494234&gt;,\n        std::ratio&lt;82378,  1&gt;,\n        std::ratio&lt;478723, 23423554&gt;,\n        std::ratio&lt;2,      1&gt;,\n        std::ratio&lt;2,      72&gt;,\n        std::ratio&lt;2,      10001&gt;,\n        std::ratio&lt;1000,   1&gt;,\n        std::ratio&lt;10001,  2&gt;\n    &gt;::go();\n}\n</code></pre>\n\n<p>This is what the testing code at the bottom outputs:</p>\n\n<pre><code> in:   1060/83 : 12.771084337349 (rat =&gt; double)\n sqrt: 28986/8111\n3.5736653926766 (rat =&gt; double)\n3.5736653924716 : (sqrt in) err: 2.05e-010\n\n in:   1/12494234 : 8.0036919430195e-008 (rat =&gt; double)\n sqrt: 174/615041\n0.00028290796873704 (rat =&gt; double)\n0.00028290796989515 : (sqrt in) err: -1.158e-012\n\n in:   82378/1 : 82378 (rat =&gt; double)\n sqrt: 585799/2041\n287.01567858893 (rat =&gt; double)\n287.01567901423 : (sqrt in) err: -4.253e-007\n\n in:   68389/3346222 : 0.020437675683203 (rat =&gt; double)\n sqrt: 88016/615667\n0.14296039904689 (rat =&gt; double)\n0.14296039900337 : (sqrt in) err: 4.352e-011\n\n in:   2/1 : 2 (rat =&gt; double)\n sqrt: 665857/470832\n1.4142135623747 (rat =&gt; double)\n1.4142135623731 : (sqrt in) err: 1.595e-012\n\n in:   1/36 : 0.027777777777778 (rat =&gt; double)\n sqrt: 1/6\n0.16666666666667 (rat =&gt; double)\n0.16666666666667 : (sqrt in) err: 0\n\n in:   2/10001 : 0.0001999800019998 (rat =&gt; double)\n sqrt: 9899/700000\n0.014141428571429 (rat =&gt; double)\n0.014141428569978 : (sqrt in) err: 1.45e-012\n\n in:   1000/1 : 1000 (rat =&gt; double)\n sqrt: 702247/22207\n31.622776601972 (rat =&gt; double)\n31.622776601684 : (sqrt in) err: 2.886e-010\n\n in:   10001/2 : 5000.5 (rat =&gt; double)\n sqrt: 700000/9899\n70.714213556925 (rat =&gt; double)\n70.714213564177 : (sqrt in) err: -7.252e-009\n</code></pre>\n"}], "owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 1, "accepted_answer_id": 36325025, "answer_count": 3, "score": 3, "last_activity_date": 1459896826, "creation_date": 1459379089, "last_edit_date": 1592644375, "question_id": 36321295, "link": "https://stackoverflow.com/questions/36321295/rational-approximation-of-square-root-of-stdratio-at-compile-time", "title": "rational approximation of square root of std::ratio at compile-time", "body": "<p>I'm trying to find a rational approximation of the square root of a <code>std::ratio</code> at compile time. It would be extremely useful to derive <a href=\"https://en.wikipedia.org/wiki/Reference_ellipsoid\" rel=\"nofollow noreferrer\">ellipsoid parameters</a> from defined parameters for coordinate conversions, which are themselves defined as <code>std::ratio</code>.</p>\n<p>There is a <a href=\"https://stackoverflow.com/questions/19823216/stdratio-power-of-a-stdratio-at-compile-time\">question about finding powers/roots of std::ratio</a>, but as a condition of that question, it was OK to fail if the ratio had no integral root, which is the opposite of what I want. I would instead like to find the closest reasonable approximation I can.</p>\n<p>I've come up with the following meta-program that calculates the roots based on the <a href=\"https://en.wikipedia.org/wiki/Newton%27s_method#Square_root_of_a_number\" rel=\"nofollow noreferrer\">Newton-Raphson Method</a>, which is known to produce (relatively) accurate results with only a few iterations:</p>\n<pre><code>namespace detail\n{\n    // implementation of ratio_sqrt\n    // N is an std::ratio, not an int\n    template&lt;class N , class K = std::ratio&lt;4&gt;, std::intmax_t RecursionDepth = 5&gt;\n    struct ratio_sqrt_impl\n    {\n        static_assert(/* N is std::ratio */);\n\n        // Recursive Newton-Raphson\n        // EQUATION: K_{n+1} = (K_{n} - N / K_{n}) / 2\n        // WHERE:\n        // K_{n+1} : square root approximation\n        // K_{n}   : previous square root approximation\n        // N       : ratio whose square root we are finding\n        using type = typename ratio_sqrt_impl&lt;N, std::ratio_subtract&lt;K,\n          std::ratio_divide&lt;std::ratio_subtract&lt;std::ratio_multiply&lt;K, K&gt;, N&gt;, \n          std::ratio_multiply&lt;std::ratio&lt;2&gt;, K&gt;&gt;&gt;, RecursionDepth - 1&gt;::type;\n    };\n    template&lt;class N, class K&gt;\n    struct ratio_sqrt_impl&lt;N, K, 1&gt;\n    {\n        using type = K;\n    };\n}\n\ntemplate&lt;class Ratio&gt;\nusing ratio_sqrt = typename detail::ratio_sqrt_impl&lt;Ratio&gt;::type;\n</code></pre>\n<p>With the example usage:</p>\n<pre><code>// Error calculations\nusing rt2 = ratio_sqrt&lt;std::ratio&lt;2&gt;&gt;;\nstd::cout &lt;&lt; (sqrt(2) - ((double)rt2::num / rt2::den))/sqrt(2) &lt;&lt; std::endl;\n\nscalar_t result = pow&lt;2&gt;(scalar_t((double)rt2::num / rt2::den));\nstd::cout &lt;&lt; (2 - result.toDouble()) / 2 &lt;&lt; std::endl;\n\nusing rt4 = ratio_sqrt&lt;std::ratio&lt;4&gt;&gt;;\nstd::cout &lt;&lt; (sqrt(4) - ((double)rt4::num / rt4::den)) / sqrt(4) &lt;&lt; std::endl;\n\nusing rt10 = ratio_sqrt&lt;std::ratio&lt;10&gt;&gt;;\nstd::cout &lt;&lt; (sqrt(10) - ((double)rt10::num / rt10::den)) / sqrt(10) &lt;&lt; std::endl;\n</code></pre>\n<p>Producing the results:</p>\n<blockquote>\n<p>1.46538e-05 // sqrt(2)</p>\n<p>4.64611e-08 // sqrt(4)</p>\n<p>2.38737e-15 // sqrt(10)</p>\n</blockquote>\n<p>which could certainly be decent for some applications.</p>\n<h1>The Problems</h1>\n<ol>\n<li>The biggest problem here is the fixed Recursion depth. These ratios get BIG, very quickly, and so for roots &gt; 100, this overflows like crazy. However, too small of a recursion depth, and you lose all the accuracy.</li>\n</ol>\n<p>Is there a good way that the recursion could be adapted to the overflow depth limit, and then have the type set to be an iteration or two before that? (I say a few iterations because it might be nice to keep headroom in the integer sizes to do further calculations later)</p>\n<ol start=\"2\">\n<li>The initial condition of 4 seemed to be pretty magical in terms of producing the lowest error for roots &lt; 100, but is there a more methodical way to set that?</li>\n</ol>\n<h2>EDIT:</h2>\n<p>I'm not looking for any solutions with <code>constexpr</code>, as the compilers I have to support don't uniformly have it.</p>\n<p>The problem with increasing the recursion depth is that the num/denom of the <code>std::ratio</code> overflow after only a couple of recursions. The accuracy of the represented square root is actually OK, but I need to find a generic solution that limits the recursion depth to the point where the ratios don't overflow (and thus, don't compile). E.g. <code>ratio_sqrt&lt;std::ratio&lt;2&gt;&gt;</code> can go to depth 5 before overflowing, but <code>ratio_sqrt&lt;std::ratio&lt;1000&gt;&gt;</code> is limited to 4.</p>\n"}, {"tags": ["c++", "polymorphism", "smart-pointers", "stdvector"], "comments": [{"owner": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "edited": false, "score": 0, "creation_date": 1459378987, "post_id": 36321153, "comment_id": 60265777, "body": "OT: why no range-based loop <code>printShapeAreas()</code> ]:-)"}, {"owner": {"reputation": 118, "user_id": 5275833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-mrOhMfrcS_U/AAAAAAAAAAI/AAAAAAAAADU/Oaa3zjmeqPE/photo.jpg?sz=128", "display_name": "Emmanuel Lozoya", "link": "https://stackoverflow.com/users/5275833/emmanuel-lozoya"}, "reply_to_user": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "edited": false, "score": 0, "creation_date": 1459379685, "post_id": 36321153, "comment_id": 60265997, "body": "I don&#39;t know, I was going to use an iterator, but I wanted to keep it simple for this example"}, {"owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "edited": false, "score": 0, "creation_date": 1459380156, "post_id": 36321153, "comment_id": 60266152, "body": "Your edit works, but you don&#39;t need to take the <code>std::make_shared&lt;T&gt;(...)</code> part in a <code>std::shared_ptr</code> constructor again, it is at best ineffective, at worst inefficient since it requires at least 2 pointers to be copied."}, {"owner": {"reputation": 118, "user_id": 5275833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-mrOhMfrcS_U/AAAAAAAAAAI/AAAAAAAAADU/Oaa3zjmeqPE/photo.jpg?sz=128", "display_name": "Emmanuel Lozoya", "link": "https://stackoverflow.com/users/5275833/emmanuel-lozoya"}, "edited": false, "score": 0, "creation_date": 1459380307, "post_id": 36321153, "comment_id": 60266204, "body": "so, what is your solution for this? :)"}, {"owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "edited": false, "score": 0, "creation_date": 1459380381, "post_id": 36321153, "comment_id": 60266236, "body": "@EmmanuelLozoya, <code>shapes.push_back(std::make_shared&lt;Rectangle&gt;(10, 2));</code>"}, {"owner": {"reputation": 118, "user_id": 5275833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-mrOhMfrcS_U/AAAAAAAAAAI/AAAAAAAAADU/Oaa3zjmeqPE/photo.jpg?sz=128", "display_name": "Emmanuel Lozoya", "link": "https://stackoverflow.com/users/5275833/emmanuel-lozoya"}, "edited": false, "score": 0, "creation_date": 1459380482, "post_id": 36321153, "comment_id": 60266270, "body": "oooh you are right, I didn&#39;t see it, sorry, let me change it"}, {"owner": {"reputation": 118, "user_id": 5275833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-mrOhMfrcS_U/AAAAAAAAAAI/AAAAAAAAADU/Oaa3zjmeqPE/photo.jpg?sz=128", "display_name": "Emmanuel Lozoya", "link": "https://stackoverflow.com/users/5275833/emmanuel-lozoya"}, "reply_to_user": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "edited": false, "score": 0, "creation_date": 1459380731, "post_id": 36321153, "comment_id": 60266344, "body": "@FatihBAKIR, I edited it"}], "answers": [{"tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": false, "score": 1, "last_activity_date": 1459378795, "creation_date": 1459378795, "answer_id": 36321234, "question_id": 36321153, "link": "https://stackoverflow.com/questions/36321153/c-smart-pointers-in-a-vector-container/36321234#36321234", "title": "C++ Smart Pointers in a Vector container", "body": "<ol>\n<li>No.</li>\n<li>No.</li>\n<li>Maybe.  Depends on your needs.  What you've done is reasonable for the program you pasted.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 17641, "user_id": 16800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1de76c4c343fc844135e18da8a80f1?s=128&d=identicon&r=PG", "display_name": "Guvante", "link": "https://stackoverflow.com/users/16800/guvante"}, "edited": false, "score": 2, "creation_date": 1459378944, "post_id": 36321243, "comment_id": 60265760, "body": "Additionally if your constructor throws then it will be deleted by <code>make_shared</code> but not by the constructor of <code>shared_ptr</code> as in the latter case the constructor is never called."}, {"owner": {"reputation": 118, "user_id": 5275833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-mrOhMfrcS_U/AAAAAAAAAAI/AAAAAAAAADU/Oaa3zjmeqPE/photo.jpg?sz=128", "display_name": "Emmanuel Lozoya", "link": "https://stackoverflow.com/users/5275833/emmanuel-lozoya"}, "edited": false, "score": 0, "creation_date": 1459379509, "post_id": 36321243, "comment_id": 60265945, "body": "Thank you, now I&#39;m calling std::make_shared instead of the constructor"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 17641, "user_id": 16800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1de76c4c343fc844135e18da8a80f1?s=128&d=identicon&r=PG", "display_name": "Guvante", "link": "https://stackoverflow.com/users/16800/guvante"}, "edited": false, "score": 0, "creation_date": 1459379632, "post_id": 36321243, "comment_id": 60265981, "body": "@Guvante: If what constructor throws? What won&#39;t get deleted? If the constructor for the Shape object throws, the memory will be deallocated as part of the <code>new</code> expression, before the exception gets rethrown."}, {"owner": {"reputation": 17641, "user_id": 16800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1de76c4c343fc844135e18da8a80f1?s=128&d=identicon&r=PG", "display_name": "Guvante", "link": "https://stackoverflow.com/users/16800/guvante"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1459385165, "post_id": 36321243, "comment_id": 60267689, "body": "@BenjaminLindley: You are right, the <code>shared_ptr</code> is the one that has to fail to cause that chain of events."}, {"owner": {"reputation": 14815, "user_id": 216111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f6b5ef485ac16233e1536193245fc55?s=128&d=identicon&r=PG", "display_name": "josefx", "link": "https://stackoverflow.com/users/216111/josefx"}, "reply_to_user": {"reputation": 17641, "user_id": 16800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1de76c4c343fc844135e18da8a80f1?s=128&d=identicon&r=PG", "display_name": "Guvante", "link": "https://stackoverflow.com/users/16800/guvante"}, "edited": false, "score": 1, "creation_date": 1459506211, "post_id": 36321243, "comment_id": 60327556, "body": "@Guvante either shared_ptr or any other unsequenced operation. For example <code>foo( std::shared_ptr&lt;Bar&gt;(new Bar), std::shared_ptr&lt;Bar&gt;(new Bar) )</code> may leak <code>foo( std::make_shared&lt;Bar&gt;(), std::make_shared&lt;Bar&gt;())</code> wont."}], "tags": [], "owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "is_accepted": true, "score": 9, "last_activity_date": 1459378823, "creation_date": 1459378823, "answer_id": 36321243, "question_id": 36321153, "link": "https://stackoverflow.com/questions/36321153/c-smart-pointers-in-a-vector-container/36321243#36321243", "title": "C++ Smart Pointers in a Vector container", "body": "<p>Your code doesn't contain a memory leak. So your first point is fine.</p>\n\n<p>No, if you don't call <code>shapes.clear()</code>, there will not be a memory leak since <code>std::vector</code>'s destructor cleans up the container.</p>\n\n<p>I don't know a specific rule about using shared pointers in a container so I'll skip on your third question.</p>\n\n<p>However, I can offer an improvement for creating <code>std::shared_ptr</code>s:</p>\n\n<p>When you create a shared pointer using its constructor, ie <code>shared_ptr&lt;T&gt;(new T());</code>, the <em>control block</em> or the structure that holds bookkeeping information about that resource, is created separately from the object it points to. This might cause cache misses a lot. However, if you create a <code>shared_ptr</code> by using <code>std::make_shared</code>, the control block is allocated with the object you want, therefore, by keeping them together, you can at least mitigate the cost of cache misses: <code>std::make_shared&lt;T&gt;();</code>. For example: <code>std::make_shared&lt;Circle&gt;(3)</code> is equivalent to writing <code>std::shared_ptr&lt;Shape&gt;(new Circle(3))</code>, but usually better.</p>\n"}, {"tags": [], "owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "is_accepted": false, "score": 3, "last_activity_date": 1459378854, "creation_date": 1459378854, "answer_id": 36321252, "question_id": 36321153, "link": "https://stackoverflow.com/questions/36321153/c-smart-pointers-in-a-vector-container/36321252#36321252", "title": "C++ Smart Pointers in a Vector container", "body": "<p>No, there won't be a memory leak, which is (part of) the entire point of smart pointers. When the <code>vector</code> falls out of scope, it calls the destructor on all of its elements. In this case, calling the destructor on the <code>shared_ptr&lt;Shape&gt;</code> will cause it's internal shared reference count to hit <code>0</code> and will thus destroy the <code>Shape</code> object.</p>\n"}, {"tags": [], "owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "is_accepted": false, "score": 3, "last_activity_date": 1459379259, "last_edit_date": 1459379259, "creation_date": 1459378885, "answer_id": 36321256, "question_id": 36321153, "link": "https://stackoverflow.com/questions/36321153/c-smart-pointers-in-a-vector-container/36321256#36321256", "title": "C++ Smart Pointers in a Vector container", "body": "<ol>\n<li>There isn't, not in the code you posted - even without virtual destructor, <code>std::shared_ptr</code> destroys the elements properly. (you should add it anyway though - sooner or later someone will hit this issue, as <code>std::unique_ptr</code> won't handle this case)</li>\n<li>There won't be any memory leak, even if you don't call <code>.clear()</code> - the destructor of <code>std::vector</code> destroys all the elements, and the shared pointers destroys the element owned if they're the only owner.</li>\n<li>If you don't need shared ownership, you can use <code>std::unique_ptr</code> instead, but only if you have a virtual destructor in <code>Shape</code>. You should also use <code>std::make_shared</code> and <code>std::make_unique</code> (C++14) wherever you can to avoid a tricky issue with sequence points and throwing constructors: in essence <code>f(std::unique_ptr&lt;ConstructorAlwaysThrows&gt;(new ConstructorAlwaysThrows()), std::unique_ptr&lt;Foo&gt;(new Foo()));</code> will leak memory, or not, depending on how the compiler does sequencing.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1459380479, "post_id": 36321264, "comment_id": 60266268, "body": "<i>your shape destructor is not virtual</i> Good catch."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 5, "last_activity_date": 1459378956, "creation_date": 1459378956, "answer_id": 36321264, "question_id": 36321153, "link": "https://stackoverflow.com/questions/36321153/c-smart-pointers-in-a-vector-container/36321264#36321264", "title": "C++ Smart Pointers in a Vector container", "body": "<p>1) I don't see a memory leak here.  However there is a potential to getting one sooner or later:  <strong>your shape destructor is not virtual</strong>.  This means that shapes are always destroyed using the base destructor, instead of the right destructor.  I.e. if one of your derived shapes would one day allocate memory,  it's destructor that would have to release it wouldn't be called.  </p>\n\n<p>2) Nothing will happen:  if you don't do  a <code>clear()</code>, shapes will get destroyed anyway when <code>main()</code> is left,  causing its contend to get destroyed.   </p>\n\n<p>3) Maybe, but this one is already very good.  </p>\n"}, {"tags": [], "owner": {"reputation": 17641, "user_id": 16800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1de76c4c343fc844135e18da8a80f1?s=128&d=identicon&r=PG", "display_name": "Guvante", "link": "https://stackoverflow.com/users/16800/guvante"}, "is_accepted": false, "score": 1, "last_activity_date": 1459378980, "creation_date": 1459378980, "answer_id": 36321268, "question_id": 36321153, "link": "https://stackoverflow.com/questions/36321153/c-smart-pointers-in-a-vector-container/36321268#36321268", "title": "C++ Smart Pointers in a Vector container", "body": "<blockquote>\n  <p>Is there any memory leak?</p>\n</blockquote>\n\n<p>No, you are calling the destructor of <code>shared_ptr</code> here.</p>\n\n<blockquote>\n  <p>If I don't call shapes.clear(), is there going to be a memory leak?</p>\n</blockquote>\n\n<p>It depends, if your <code>vector</code> lives then all of its contents will live, if the <code>vector</code> dies then it will kill its contents automatically.</p>\n\n<blockquote>\n  <p>Is there a better way to use smart pointers and containers?</p>\n</blockquote>\n\n<p><code>make_shared</code> can be used to avoid problems if the <code>new</code> throws an exception by ensuring that the <code>shared_ptr</code> calls its destructor to delete the memory. However that would require a conversion from <code>shared_ptr&lt;Rectangle&gt;</code> to <code>shared_ptr&lt;Shape&gt;</code> which is automatic if annoying (it involves copying the <code>shared_ptr</code> and deleting the original).</p>\n"}], "owner": {"reputation": 118, "user_id": 5275833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-mrOhMfrcS_U/AAAAAAAAAAI/AAAAAAAAADU/Oaa3zjmeqPE/photo.jpg?sz=128", "display_name": "Emmanuel Lozoya", "link": "https://stackoverflow.com/users/5275833/emmanuel-lozoya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6651, "favorite_count": 2, "accepted_answer_id": 36321243, "answer_count": 6, "score": 5, "last_activity_date": 1459381728, "creation_date": 1459378403, "last_edit_date": 1459381728, "question_id": 36321153, "link": "https://stackoverflow.com/questions/36321153/c-smart-pointers-in-a-vector-container", "title": "C++ Smart Pointers in a Vector container", "body": "<p>I wrote the classic Shape Polymorphism code, but a little bit different because I'm using a Vector container and smart pointers.</p>\n\n<p>I am not a C++ expert, and I would like to know the following:</p>\n\n<ol>\n<li>Is there any memory leak?</li>\n<li>If I don't call <code>shapes.clear()</code>, is there going to be a memory leak?</li>\n<li>Is there a better way to use smart pointers and containers?</li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nclass Shape {\n  public:\n    virtual float getArea() = 0;\n    virtual ~Shape() {}\n};\n\nclass Rectangle : public Shape {\n  public:\n    Rectangle(float w, float h) : width(w), height(h) {}\n\n    float getArea() {\n      return width * height;\n    }\n  private:\n    float width;\n    float height;\n};\n\nclass Circle : public Shape {\n  public:\n    Circle(float r) : radius(r) {}\n\n    float getArea() {\n      return 3.141592653589793238462643383279502884 * radius * radius;\n    }\n  private:\n    float radius;\n};\n\nvoid printShapeAreas(vector&lt;shared_ptr&lt;Shape&gt;&gt; &amp;shapes) {\n  for(int i = 0; i &lt; shapes.size(); i++) {\n    cout &lt;&lt; shapes[i]-&gt;getArea() &lt;&lt; endl;\n  }\n}\n\nint main(int argc, char** argv) {\n  vector&lt;shared_ptr&lt;Shape&gt;&gt; shapes;\n  //this works, but you told me that is better to use make_shared\n  //=============================================================\n  //shapes.push_back(shared_ptr&lt;Shape&gt;(new Rectangle(10, 2)));\n  //shapes.push_back(shared_ptr&lt;Shape&gt;(new Rectangle(10, 3)));\n  //shapes.push_back(shared_ptr&lt;Shape&gt;(new Circle(2)));\n  //shapes.push_back(shared_ptr&lt;Shape&gt;(new Circle(3)));\n  //better\n  //======\n  shapes.push_back(std::make_shared&lt;Rectangle&gt;(10, 2));\n  shapes.push_back(std::make_shared&lt;Rectangle&gt;(10, 3));\n  shapes.push_back(std::make_shared&lt;Circle&gt;(2));\n  shapes.push_back(std::make_shared&lt;Circle&gt;(3));\n  printShapeAreas(shapes);\n  shapes.clear();//If I don't call shapes.clear(), is there going to be a memory leak?\n  return 0;\n}\n</code></pre>\n\n<p>Thank you :)</p>\n"}, {"tags": ["c++", "arrays", "memory", "dynamic"], "answers": [{"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 0, "last_activity_date": 1459379422, "creation_date": 1459379422, "answer_id": 36321361, "question_id": 36321090, "link": "https://stackoverflow.com/questions/36321090/heap-corruption-detected-dynamic-array-re-sizing/36321361#36321361", "title": "Heap corruption detected (Dynamic array re-sizing)", "body": "<p>This is because, for some unclear reason, this code allocates an array of ten integers <strong>on every iteration of the loop</strong>. And then saves the next value into one of the elements of the array, discarding the previously allocated array, and all previously-entered values, completely.</p>\n\n<p>Then, after <code>count</code> reaches 10, the code goes through the motion of doubling the size of the array.</p>\n\n<p>Immediately after this, on the very next iteration, the code allocates another ten-element array, and then tries to save the next number into the 11th position of the ten element array.</p>\n"}], "owner": {"reputation": 1, "user_id": 5515054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b15402913c08a89e0d301f1c1410b0?s=128&d=identicon&r=PG&f=1", "display_name": "so918", "link": "https://stackoverflow.com/users/5515054/so918"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459566295, "creation_date": 1459378057, "last_edit_date": 1459566295, "question_id": 36321090, "link": "https://stackoverflow.com/questions/36321090/heap-corruption-detected-dynamic-array-re-sizing", "title": "Heap corruption detected (Dynamic array re-sizing)", "body": "<p>I'm getting this error, \"Heap corruption detected after normal block\". This is after the  array doubles and 'count' reaches 10. What am I doing wrong with this? \nThanks, </p>\n\n<pre><code>int* temp = NULL; // temp defined likewise\n\nint size = 10;\nint count = 0;    // track array length\nbool end = false; // flag to terminate while loop; AVOID using break stmt in loop\n\nint* Arr = new int [size];  // Arr is pointer to an array of ints in heap\n\ncout &lt;&lt; endl;   // provide blank line so user sees first prompt easily\nwhile (!cin.eof() &amp;&amp; cin.good() &amp;&amp; end == false)\n{\n    temp = new(int[10]);  // ask for one new int in heap\n    if (temp != NULL)\n    {  // if heap available\n        cout &lt;&lt; \"Please enter an int number or EOF to terminate\" &lt;&lt; endl;\n        cin &gt;&gt; *(temp + count);  // get user's next input\n        if (!cin.eof() &amp;&amp; cin.good())\n        {  // if valid input\n            for (int i = 0; i &lt; count; i++) // enter Arr array into temp array\n                *(temp + i) = *(Arr + i);\n\n            delete[] Arr; // delete current reference in Arr\n            Arr = temp;   // assign reference in temp to Arr\n        }\n        else\n        {  // if user entered an invalid value including EOF in input\n            if (!cin.eof())\n            {\n                cout &lt;&lt; \"Invalid Input\" &lt;&lt; endl;\n            }\n            end = true; // set flag to terminate while loop\n        }\n        count++;  // increment count of inputs for anticipated next input\n\n        if (count == 10)\n        {\n            cout &lt;&lt; \"etsdgsdggd\";\n            int  newSize = size * 2;\n            int* newArr = new int[newSize];\n\n            for (int i = 0; i &lt; count; i++)\n                *(newArr + i) = *(Arr + i);\n\n            size = newSize;\n            delete[] Arr;\n            Arr = newArr;\n\n        }\n    }\n    else \n    {\n        cout &lt;&lt; \"Heap exhausted.\" &lt;&lt; endl;\n        end = true;  // set flag to terminate while loop here also\n    }\n}\ncount--;  // decrement count, which was incremented in anticipation of\n          //  another valid input\nif (count &gt; 0)\n{  // if positive count, display entries of input array\n    cout &lt;&lt; \"Input Array is: \" &lt;&lt; endl;\n    for (int j = 0; j &lt; count; j++) // display array\n        cout &lt;&lt; *(Arr + j) &lt;&lt; \" \";\n    cout &lt;&lt; endl;  // return cursor to lefthand position\n}\n//  system(\"PAUSE\"); // in case your system expects PAUSE before ending program\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "audio", "google-nativeclient"], "comments": [{"owner": {"reputation": 1048, "user_id": 5508855, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3fd680642c899ae40d022514a525a71a?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasito665", "link": "https://stackoverflow.com/users/5508855/tomasito665"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1459379557, "post_id": 36320912, "comment_id": 60265954, "body": "@kfsone - I understand the confusion, but the number I am dealing with is 4410, not 44100. The number 44100 is used as one of the major standard samplerates; how many samples are read per second. My case is not about samplerate though, it&#39;s about buffersize."}, {"owner": {"reputation": 29791, "user_id": 120261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2f78d64b265cf0c1c5781c1ea7a39?s=128&d=identicon&r=PG", "display_name": "mtrw", "link": "https://stackoverflow.com/users/120261/mtrw"}, "edited": false, "score": 0, "creation_date": 1459461418, "post_id": 36320912, "comment_id": 60310838, "body": "Most likely, the environment is sending you samples at a fixed <i>time</i> interval. For instance, with a sample rate of 44100 samples/sec, a buffer size of 4410 means you get a buffer every 100 ms. If, for other reasons, you need to consume samples in buffers of some other size, you will need to move the samples into another set of buffers and manage the leftovers yourself."}], "owner": {"reputation": 1048, "user_id": 5508855, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3fd680642c899ae40d022514a525a71a?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasito665", "link": "https://stackoverflow.com/users/5508855/tomasito665"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459460696, "creation_date": 1459377103, "last_edit_date": 1459460696, "question_id": 36320912, "link": "https://stackoverflow.com/questions/36320912/shouldnt-the-audio-sample-frame-count-be-a-power-of-2", "title": "Shouldn&#39;t the audio sample frame count be a power of 2?", "body": "<p>I am working on an Audio project with the <em>Webaudio API</em> and with Google's <em>Native Client</em>. The aim is to set the buffersize of a Webaudio <code>scriptprocessornode</code> (Javascript) to the same buffersize of the the Audio object in the PNACL module (C++).</p>\n\n<p>I retrieve the recommended frame count by calling <a href=\"https://developer.chrome.com/native-client/pepper_dev/cpp/classpp_1_1_audio_config.html#a53611e94bca5d4a5f7acdd3e5285adb9\" rel=\"nofollow\">AudioConfig::RecommendSampleFrameCount</a>. The problem though is that this funtion doesn't return a power of 2, as I would expect.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>sampleFrameCount = \n  pp::AudioConfig::RecommendSampleFrameCount(\n    this,\n    PP_AUDIOSAMPLERATE_44100,\n    4096 // I request sample frame count 4096, which should be legal\n  );\n\n// Prints 4410 instead of 4096\nprintf(\"Sample frame count: %d \\n\", sampleFrameCount );\n</code></pre>\n\n<p><strong>I request a sample frame count of 4096. But it recommends me 4410. Why?</strong> Shouldn't a sample frame count / buffersize be a power of two, like the requested 4096?</p>\n\n<p>I followed the <a href=\"https://developer.chrome.com/native-client/devguide/coding/audio\" rel=\"nofollow\">Pepper Audio Sine-Wave tutorial</a>, and it works like a charm, even with a sample frame count of 4410. Though the problem kicks in when making a <code>scriptprocessornode</code> with the buffersize returned by <code>RecommendSampleFrameCount</code> in the PNACL Module.\nSo, this:</p>\n\n<pre><code>audioContext.createScriptProcessor(4410, 1, 1);\n</code></pre>\n\n<p>... gives this error (as expected):</p>\n\n<blockquote>\n  <p>Uncaught IndexSizeError: Failed to execute 'createScriptProcessor' on\n  'AudioContext': buffer size (4410) must be a power of two between 256\n  and 16384.</p>\n</blockquote>\n\n<p>I think I make a serious conceptual mistake, but I don't know where. Some help would be greatly appreciated, thanks in advance.</p>\n"}, {"tags": ["c++", ".net", "dll"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1459378147, "post_id": 36320877, "comment_id": 60265466, "body": "You are probably just changing the wrong setting, changing the solution platform instead of the platform target.  Right-click your EXE project &gt; Properties &gt; Build tab &gt; Platform target setting."}, {"owner": {"reputation": 1596, "user_id": 4851777, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/8SL00.jpg?s=128&g=1", "display_name": "ThePartyTurtle", "link": "https://stackoverflow.com/users/4851777/thepartyturtle"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1459435794, "post_id": 36320877, "comment_id": 60295443, "body": "I actually have been changing that field, and I can&#39;t resolve the issue. I also have two build warnings (which I had before posting this question, and resolved, but now they&#39;re back) which tell me there is a mismatch between processor for which project is being built and of project reference. The thing is, the warning says the the project is being built  for &quot;x86&quot; and the architecture of the reference is &quot;AMD64&quot;, which I&#39;m sure is some 64 bit architecture but have no way to specify in VS, because x64 doesn&#39;t resolve the warnings or the run time exceptions."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1459436159, "post_id": 36320877, "comment_id": 60295756, "body": "Clearly you are doing something very wrong but there&#39;s no hint at all in the question.  Ask a team member or friend to look over your shoulder, show him at least the Build &gt; Configuration Manager dialog."}, {"owner": {"reputation": 1596, "user_id": 4851777, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/8SL00.jpg?s=128&g=1", "display_name": "ThePartyTurtle", "link": "https://stackoverflow.com/users/4851777/thepartyturtle"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1459439146, "post_id": 36320877, "comment_id": 60297921, "body": "I&#39;m having trouble finding teammates right now but I definitely will. They&#39;re likely to know something. I mean, right now, if I make my project&#39;s platform target x86, I get two warnings about mismatched architecture that say project is x86 but references are AMD64. If I change the project&#39;s target architecture to x64, I get 4 warnings that say project is AMD64 but references are x86. Of course these are not the same references. I did not design this project, I just inherited it to work on, is it possible to have conflicting target processors for references?"}], "answers": [{"tags": [], "owner": {"reputation": 448, "user_id": 4423831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXCXS.jpg?s=128&g=1", "display_name": "Maksym Voronytskyi", "link": "https://stackoverflow.com/users/4423831/maksym-voronytskyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1459429031, "creation_date": 1459429031, "answer_id": 36334185, "question_id": 36320877, "link": "https://stackoverflow.com/questions/36320877/mscorlib-dll-typeinitializationexception-badimageformatexception/36334185#36334185", "title": "mscorlib.dll TypeInitializationException &amp; BadImageFormatException", "body": "<p>In application you are runnint - try to mark assembly: \"ServiceFrameworkAPI\" with option: Copy Local = True</p>\n\n<p><a href=\"https://i.stack.imgur.com/eIbFJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eIbFJ.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 1596, "user_id": 4851777, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/8SL00.jpg?s=128&g=1", "display_name": "ThePartyTurtle", "link": "https://stackoverflow.com/users/4851777/thepartyturtle"}, "is_accepted": true, "score": 0, "last_activity_date": 1459450395, "creation_date": 1459450395, "answer_id": 36341400, "question_id": 36320877, "link": "https://stackoverflow.com/questions/36320877/mscorlib-dll-typeinitializationexception-badimageformatexception/36341400#36341400", "title": "mscorlib.dll TypeInitializationException &amp; BadImageFormatException", "body": "<p>For clarity's sake if anyone ever comes across this question, I'll answer how I fixed.</p>\n\n<p>It turns out I was just using references that weren't the ones I needed (although had identical names). I ended up including some projects in my solution that corresponded to the references and just referenced the projects instead of assemblies and everything worked great.</p>\n"}], "owner": {"reputation": 1596, "user_id": 4851777, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/8SL00.jpg?s=128&g=1", "display_name": "ThePartyTurtle", "link": "https://stackoverflow.com/users/4851777/thepartyturtle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "accepted_answer_id": 36341400, "answer_count": 2, "score": 0, "last_activity_date": 1459450439, "creation_date": 1459376922, "last_edit_date": 1459450439, "question_id": 36320877, "link": "https://stackoverflow.com/questions/36320877/mscorlib-dll-typeinitializationexception-badimageformatexception", "title": "mscorlib.dll TypeInitializationException &amp; BadImageFormatException", "body": "<p>I am running a program, which as of now builds fine with no errors or warnings, and I am coming across two run time exceptions in mscorlib.dll.</p>\n\n<p>I get a <strong>TypeInitializationException</strong> &amp; <strong>BadImageFormatException</strong>, and the details of the messages are:</p>\n\n<blockquote>\n  <p>System.TypeInitializationException occurred Message: A first chance\n  exception of type 'System.TypeInitializationException' occurred in\n  mscorlib.dll Additional information: The type initializer for\n  'Service.Program' threw an exception.</p>\n</blockquote>\n\n<p>And</p>\n\n<blockquote>\n  <p>System.BadImageFormatException occurred Message: A first chance\n  exception of type 'System.BadImageFormatException' occurred in\n  mscorlib.dll Additional information: Could not load file or assembly\n  'ServiceFrameworkAPI, Version=1.0.0.668, Culture=neutral,\n  PublicKeyToken=null' or one of its dependencies. An attempt was made\n  to load a program with an incorrect format.</p>\n</blockquote>\n\n<p>I've fiddled with the target processors to no success, my target for my project is x86 currently which I had thought to be the way to go after reading some other answers on stack overflow. I checked to break when the exception is hit, but when I see a notification about the run time exception, I am shown a tab with a screen that says \"Source Not Available\". The exception is thrown immediately before the program enters main.</p>\n\n<p>It also may be worth noting that my solution includes a Managed C++ project, which I think may have something to do with that based on other SO questions. I have read around SO already but I won't be offended if you point me to any other answers, .NET is brand new to me so I may have missed something important. Thanks for any help!</p>\n"}, {"tags": ["c++", "camera", "gps", "latitude-longitude", "exif"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1459376781, "post_id": 36320775, "comment_id": 60264962, "body": "<i>I tried many libraries like: - easyexif - Exiv2 and Phil Harvey</i> -- And what was the problem with these libraries?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1459376940, "post_id": 36320775, "comment_id": 60265032, "body": "What format are the images you want to manipulate?"}, {"owner": {"reputation": 33, "user_id": 6137080, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Mcv81LHovMU/AAAAAAAAAAI/AAAAAAAAABA/bqgVMUJvrok/photo.jpg?sz=128", "display_name": "Reza Sedagheh", "link": "https://stackoverflow.com/users/6137080/reza-sedagheh"}, "edited": false, "score": 0, "creation_date": 1459377107, "post_id": 36320775, "comment_id": 60265094, "body": "Hi Dear Paul, the images have .jpg format."}, {"owner": {"reputation": 1256, "user_id": 5704226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0650ddb4bbd17cbb8ed9178c50b283ea?s=128&d=identicon&r=PG&f=1", "display_name": "bryan c", "link": "https://stackoverflow.com/users/5704226/bryan-c"}, "edited": false, "score": 0, "creation_date": 1459377589, "post_id": 36320775, "comment_id": 60265281, "body": "this link has a complete example about adding data to image using exiv2 :<a href=\"http://www.exiv2.org/examples.html\" rel=\"nofollow noreferrer\">exiv2 example</a>"}, {"owner": {"reputation": 33, "user_id": 6137080, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Mcv81LHovMU/AAAAAAAAAAI/AAAAAAAAABA/bqgVMUJvrok/photo.jpg?sz=128", "display_name": "Reza Sedagheh", "link": "https://stackoverflow.com/users/6137080/reza-sedagheh"}, "edited": false, "score": 1, "creation_date": 1459380099, "post_id": 36320775, "comment_id": 60266127, "body": "Thank you so much, But I do not know in Example 2: addmoddel.cpp where my image(s) calls for modifying?"}, {"owner": {"reputation": 33, "user_id": 6137080, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Mcv81LHovMU/AAAAAAAAAAI/AAAAAAAAABA/bqgVMUJvrok/photo.jpg?sz=128", "display_name": "Reza Sedagheh", "link": "https://stackoverflow.com/users/6137080/reza-sedagheh"}, "edited": false, "score": 0, "creation_date": 1459416692, "post_id": 36320775, "comment_id": 60281094, "body": "Hi again, at this link <a href=\"http://pay24.ir/upload/upload_files/exif_modify.zip\" rel=\"nofollow noreferrer\">pay24.ir/upload/upload_files/exif_modify.zip</a> I upload my project. could you please tell me how should I call image?"}, {"owner": {"reputation": 4745, "user_id": 767664, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/eQYea.jpg?s=128&g=1", "display_name": "Pedro77", "link": "https://stackoverflow.com/users/767664/pedro77"}, "edited": false, "score": 0, "creation_date": 1583153055, "post_id": 36320775, "comment_id": 107008597, "body": "Can you update this thread? Did you get a solution?"}], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 6246573, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ia6ygeGTOz4/AAAAAAAAAAI/AAAAAAAAAEs/1oriEJxNC4s/photo.jpg?sz=128", "display_name": "Mamo Ghandi", "link": "https://stackoverflow.com/users/6246573/mamo-ghandi"}, "is_accepted": false, "score": 0, "last_activity_date": 1556117198, "last_edit_date": 1556117198, "creation_date": 1556116886, "answer_id": 55832771, "question_id": 36320775, "link": "https://stackoverflow.com/questions/36320775/modify-exif-data-using-c/55832771#55832771", "title": "Modify EXIF Data using C++", "body": "<p>you can use this code. I used <a href=\"https://docs.microsoft.com/en-us/windows/desktop/gdiplus/-gdiplus-constant-property-item-descriptions\" rel=\"nofollow noreferrer\">Image::GetPropertyIdList method</a> and <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/Gdiplusheaders/nf-gdiplusheaders-image-getpropertyidlist\" rel=\"nofollow noreferrer\">Reading and Writing Metadata</a> as a material for this code. unfortunately i didnt find any function in opencv that can manipulate Exif.</p>\n\n<pre><code> #include &lt;windows.h&gt;\n #include &lt;gdiplus.h&gt;\n #include &lt;stdio.h&gt;\n #include &lt;Math.h&gt;\n #pragma comment(lib,\"gdiplus.lib\")\n using namespace Gdiplus;\n\n\n int GetEncoderClsid(const WCHAR* format, CLSID* pClsid) //i copy this function from Doc.microsoft.com\n {\nUINT  num = 0;          // number of image encoders\nUINT  size = 0;         // size of the image encoder array in bytes\n\nImageCodecInfo* pImageCodecInfo = NULL;\n\nGetImageEncodersSize(&amp;num, &amp;size);\nif (size == 0)\n    return -1;  // Failure\n\npImageCodecInfo = (ImageCodecInfo*)(malloc(size));\nif (pImageCodecInfo == NULL)\n    return -1;  // Failure\n\nGetImageEncoders(num, size, pImageCodecInfo);\n\nfor (UINT j = 0; j &lt; num; ++j)\n{\n    if (wcscmp(pImageCodecInfo[j].MimeType, format) == 0)\n    {\n        *pClsid = pImageCodecInfo[j].Clsid;\n        free(pImageCodecInfo);\n        return j;  // Success\n    }\n}\n\nfree(pImageCodecInfo);\nreturn -1; }\n\n\nint main(){\nGdiplusStartupInput gdiplusStartupInput;\nULONG_PTR gdiplusToken;\nGdiplusStartup(&amp;gdiplusToken, &amp;gdiplusStartupInput, NULL);\nStatus stat;\nCLSID  clsid;\n\nBitmap* bitmap = new Bitmap(L\"Source.bmp\"); // you can use any Image Format as Source \nPropertyItem* propertyItem = new PropertyItem;\n// Get the CLSID of the JPEG encoder.\nGetEncoderClsid(L\"image/jpeg\", &amp;clsid);\n\ndouble dlan = 35.715298; // we supposed that your GPS data is Double if its not skip this step\n// convert double to unsigned long array\ndouble coord = dlan;\nint sec = (int)round(coord * 3600);\nint deg = sec / 3600;\nsec = abs(sec % 3600);\nint min = sec / 60;\nsec %= 60;\nunsigned long ulExifCoordFormatLan[6] = { deg, 1, min, 1, sec, 1 };\npropertyItem-&gt;id = PropertyTagGpsLatitude;\npropertyItem-&gt;length = sizeof(long) * 2 * 3;\npropertyItem-&gt;type = PropertyTagTypeRational;\npropertyItem-&gt;value = ulExifCoordFormatLan;\nStatus s = bitmap-&gt;SetPropertyItem(propertyItem);// saving image to the destination\n\nstat = bitmap-&gt;Save(L\"Dest.jpg\", &amp;clsid, NULL);\nif (s == Ok &amp;&amp; stat==Ok)\n    printf(\"Dest.jpg saved successfully .\\n\");\n\ndelete propertyItem;\ndelete bitmap;\nGdiplusShutdown(gdiplusToken);\nreturn 0;}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6137080, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Mcv81LHovMU/AAAAAAAAAAI/AAAAAAAAABA/bqgVMUJvrok/photo.jpg?sz=128", "display_name": "Reza Sedagheh", "link": "https://stackoverflow.com/users/6137080/reza-sedagheh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2748, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556117198, "creation_date": 1459376451, "last_edit_date": 1459379307, "question_id": 36320775, "link": "https://stackoverflow.com/questions/36320775/modify-exif-data-using-c", "title": "Modify EXIF Data using C++", "body": "<p>We are building a quad copter robot for a competition, and one of the requirements is that we have to capture photos using the camera that is installed on the quad copter.</p>\n\n<p>I wrote a simple OpenCV program that is able to capture them in .jpg format, but my camera or my program are unable to save \"latitude\" and \"longitude\" as EXIF on my images.</p>\n\n<p>I've added to my robot a GPS module that can retrieve GPS data while capturing photos and save them to a text file.</p>\n\n<p>So my main problem is adding these data from the text file to the pictures separately while they are captured.</p>\n\n<p>I tried many libraries like: </p>\n\n<ul>\n<li>easyexif</li>\n<li>Exiv2</li>\n<li>Phil Harvey</li>\n</ul>\n\n<p>Also I tried them in:</p>\n\n<ul>\n<li>Visual C++ .net 2015</li>\n<li>Dev C++ (GCC)</li>\n<li>Code Blocks (GCC)</li>\n</ul>\n\n<p>and also I worked on PHP but I just can read and extract EIXFs but I can't write new data on my pictures.</p>\n\n<p>How can I solve this problem?</p>\n"}, {"tags": ["c++", "list", "splice"], "comments": [{"owner": {"reputation": 4154, "user_id": 3844480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ho59A.jpg?s=128&g=1", "display_name": "ilim", "link": "https://stackoverflow.com/users/3844480/ilim"}, "edited": false, "score": 0, "creation_date": 1459376514, "post_id": 36320706, "comment_id": 60264860, "body": "Can you share a sample from the input format?"}, {"owner": {"reputation": 4154, "user_id": 3844480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ho59A.jpg?s=128&g=1", "display_name": "ilim", "link": "https://stackoverflow.com/users/3844480/ilim"}, "edited": false, "score": 1, "creation_date": 1459377543, "post_id": 36320706, "comment_id": 60265260, "body": "Are you certain you&#39;re not overlooking the fact that you do not print a &#39;\\n&#39; character? I tried it with a small list.txt with a couple of characters and 4-5 lines and it does seem to work. I initially thought it wasn&#39;t printing anything as well, but it turned out that I just didn&#39;t notice the printed characters on the leftmost part of the bottom line of the terminal."}, {"owner": {"reputation": 11, "user_id": 6050413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca9c2280cef284849cbced026ac75a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Emad Rawashdeh", "link": "https://stackoverflow.com/users/6050413/emad-rawashdeh"}, "reply_to_user": {"reputation": 4154, "user_id": 3844480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ho59A.jpg?s=128&g=1", "display_name": "ilim", "link": "https://stackoverflow.com/users/3844480/ilim"}, "edited": false, "score": 0, "creation_date": 1459383733, "post_id": 36320706, "comment_id": 60267310, "body": "@ilim it is not printing problem, i try to debug but the list still empty after splice. also would you please try the updated code ?"}, {"owner": {"reputation": 4154, "user_id": 3844480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ho59A.jpg?s=128&g=1", "display_name": "ilim", "link": "https://stackoverflow.com/users/3844480/ilim"}, "edited": false, "score": 0, "creation_date": 1459384044, "post_id": 36320706, "comment_id": 60267396, "body": "See <a href=\"http://ideone.com/eSI6NJ\" rel=\"nofollow noreferrer\">here</a> for a working example. All I changed was feeding the input through standard input as this website does not accept input from other files. On my own device, though, it successfully reads from list.txt and prints the exact same thing you can see as the output at the link I provided."}, {"owner": {"reputation": 11, "user_id": 6050413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca9c2280cef284849cbced026ac75a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Emad Rawashdeh", "link": "https://stackoverflow.com/users/6050413/emad-rawashdeh"}, "reply_to_user": {"reputation": 4154, "user_id": 3844480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ho59A.jpg?s=128&g=1", "display_name": "ilim", "link": "https://stackoverflow.com/users/3844480/ilim"}, "edited": false, "score": 0, "creation_date": 1459384856, "post_id": 36320706, "comment_id": 60267602, "body": "@ilim . thank you very much everything is good now it works like magic. thanks again"}], "owner": {"reputation": 11, "user_id": 6050413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca9c2280cef284849cbced026ac75a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Emad Rawashdeh", "link": "https://stackoverflow.com/users/6050413/emad-rawashdeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459383320, "creation_date": 1459376125, "last_edit_date": 1459383320, "question_id": 36320706, "link": "https://stackoverflow.com/questions/36320706/splice-is-not-working", "title": "Splice is not working", "body": "<p>I have the following code, the <code>splice</code> function in it is not working and not returning any result, and I don't know why. Help please.</p>\n\n<p>The main idea is I need to take a range from a list and add it to another empty list.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;list&gt;\n#include &lt;list&gt;\n#include &lt;vector&gt;\n#include &lt;stack&gt;\n#include &lt;fstream&gt;\n#include &lt;algorithm&gt;\n#include &lt;sstream&gt;\n#include &lt;ctime&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;iterator&gt;\n\nusing namespace std;\n\nint main() {\n    ifstream       \n    reader(\"list.txt\");\n\n    list &lt; string &gt; wholeSequenceVctr;\n    list &lt; string &gt; sequenceVctr;\n    list &lt; string &gt; subsequenceVctr (10);\n\n    string line;\n    if (reader.is_open()) {\n        while (getline(reader, line)) {\n            wholeSequenceVctr.push_back(line);\n        }\n    }// if\n\n    sequenceVctr.insert(sequenceVctr.begin(), \n                        wholeSequenceVctr.begin(),\n                        wholeSequenceVctr.end());\n\n    list &lt; string &gt;::iterator from=sequenceVctr.begin();\n    list &lt; string &gt;::iterator to=sequenceVctr.begin();\n    advance(from,2);\n    advance(to,4);\n\n    subsequenceVctr.splice(subsequenceVctr.begin(),\n                           sequenceVctr,\n                           from,\n                           to);\n\n    //  printing section\n\n    cout &lt;&lt; \"wholeSequenceVctr\" &lt;&lt; endl;\n    list &lt; string &gt;::iterator i;\n    for (i = wholeSequenceVctr.begin(); i != wholeSequenceVctr.end(); ++i)\n        cout &lt;&lt; *i;\n\n    cout &lt;&lt; endl &lt;&lt; \"sequenceVctr\" &lt;&lt; endl;\n    list &lt; string &gt;::iterator j;\n    for (j = sequenceVctr.begin(); j != sequenceVctr.end(); ++j)\n        cout &lt;&lt; *j;\n\n    cout &lt;&lt; endl &lt;&lt; \"SubsequenceVctr\" &lt;&lt; endl;\n    list &lt; string &gt;::iterator k;\n    for (k = subsequenceVctr.begin(); k != subsequenceVctr.end(); ++k)\n        cout &lt;&lt; *k;\n}\n</code></pre>\n\n<hr>\n\n<p>Here is sample of <code>list.txt</code> file:</p>\n\n<blockquote>\n  <p>CP52<br>\n  CP74<br>\n  CP24<br>\n  CP404<br>\n  CP3812<br>\n  CP5069</p>\n</blockquote>\n"}, {"tags": ["c++", "boost", "boost-propertytree"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 1122998, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4793919b48ac980c23d79d0ed386acf5?s=128&d=identicon&r=PG", "display_name": "An Ky", "link": "https://stackoverflow.com/users/1122998/an-ky"}, "edited": false, "score": 0, "creation_date": 1459416802, "post_id": 36327757, "comment_id": 60281175, "body": "Maybe I was imprecise. I understand that property_tree can handle 1/0 true/false when reading. The problem is the old (pre-property_tree) reader which is not able to parse true/false but that&#39;s what I <i>always</i> get when ptree serializes the bool values. So once the file is saved with the new version the user is unable to open it with an old version of our software which I want to prohibit. The hint with the strongly typed bool is nice, I just wonder wether there is an other way the library provides."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 93, "user_id": 1122998, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4793919b48ac980c23d79d0ed386acf5?s=128&d=identicon&r=PG", "display_name": "An Ky", "link": "https://stackoverflow.com/users/1122998/an-ky"}, "edited": false, "score": 0, "creation_date": 1459418824, "post_id": 36327757, "comment_id": 60282690, "body": "There is not another way. Or rather, all the &quot;other ways&quot; imply using another datatype than <code>bool</code> /or/ spelling out the special conversion"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 0, "last_activity_date": 1459412142, "creation_date": 1459412142, "answer_id": 36327757, "question_id": 36320663, "link": "https://stackoverflow.com/questions/36320663/boost-property-tree-value-de-serialization/36327757#36327757", "title": "boost property tree value (de-)serialization", "body": "<p>This means you can't use this mechanism, because the library already used the customization point.</p>\n\n<ul>\n<li><p>You may not need this</p>\n\n<p>It looks like the reading side already  supports the old format. So, you should be fine reading the old format. </p></li>\n<li><p>You can use a strong typedef (or a custom enum like <code>Bool { my_false_rep, my_true_rep }</code>) for which you <em>can</em> use the customization point without conflict.</p></li>\n</ul>\n"}], "owner": {"reputation": 93, "user_id": 1122998, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4793919b48ac980c23d79d0ed386acf5?s=128&d=identicon&r=PG", "display_name": "An Ky", "link": "https://stackoverflow.com/users/1122998/an-ky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 36327757, "answer_count": 1, "score": 0, "last_activity_date": 1459412142, "creation_date": 1459375936, "last_edit_date": 1495540239, "question_id": 36320663, "link": "https://stackoverflow.com/questions/36320663/boost-property-tree-value-de-serialization", "title": "boost property tree value (de-)serialization", "body": "<p>tl;dr \nIs there a way to overwrite the way boost.property_tree serializes bool (other built in) values?</p>\n\n<p>I'm about to replace a self-written key-value storage by boost.property_tree. Therefore in the first run I changed the implementation to use boost.property_tree but now I'm hitting the wall because the old implementation used integers 0/1 to represent bool values and property_tree uses true/false. </p>\n\n<p>So when serializing ptrees, I get true/false strings in my files. That make the generated files not backward-compatible with older releases of our software which is a path I'm currently not willing to walk.</p>\n\n<p>I found an old post <a href=\"https://stackoverflow.com/questions/13652921/boost-property-tree-put-get-dbl-max\">boost property tree put/get DBL_MAX</a> which changes the methods to write/read double values but when I try the same for bool, I get a compiler error, that the struct is already defined (which is correct as it is in ptree_translator.hpp).</p>\n"}, {"tags": ["c++", "templates", "c++11", "variadic-templates"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 5, "creation_date": 1459376172, "post_id": 36320636, "comment_id": 60264728, "body": "Simplest way is to use an <code>initializer_list&lt;Point&gt;</code> constructor instead."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1459389788, "post_id": 36320636, "comment_id": 60268796, "body": "@T.C. That doesn&#39;t work here, unless there&#39;s some other trick I&#39;m missing?"}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1459392883, "post_id": 36322873, "comment_id": 60269574, "body": "Ah, I missed that <code>Point</code> isn&#39;t default constructible (which is a little silly, but whatever). You can still use pack expansion with <code>index_sequence</code> to initialize from an <code>initializer_list</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1459426813, "post_id": 36322873, "comment_id": 60288475, "body": "@T.C. But you don&#39;t know how long it is at compile time."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1459429003, "post_id": 36322873, "comment_id": 60290191, "body": "You have to populate the whole array, still. So something along the lines of <code>{ (Is &lt; list.size()? list.begin()[Is] : Point(0, 0))... }</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1459429189, "post_id": 36322873, "comment_id": 60290340, "body": "@T.C. Oh that seems so obvious in retrospect."}, {"owner": {"reputation": 1598, "user_id": 1899587, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad0a2dd3306606ccbd235ecca26f9c64?s=128&d=identicon&r=PG", "display_name": "Ant6n", "link": "https://stackoverflow.com/users/1899587/ant6n"}, "edited": false, "score": 0, "creation_date": 1459444648, "post_id": 36322873, "comment_id": 60301451, "body": "Well, this got me what I wanted. But it looks like even more magic, deeper down the rabbit hole ;-). Why does Array have two template parameters? And somehow there&#39;s a default filled in. Also, I have never seen the templated &quot;using&quot; -- where does that size_t even get used?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1598, "user_id": 1899587, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad0a2dd3306606ccbd235ecca26f9c64?s=128&d=identicon&r=PG", "display_name": "Ant6n", "link": "https://stackoverflow.com/users/1899587/ant6n"}, "edited": false, "score": 0, "creation_date": 1459445480, "post_id": 36322873, "comment_id": 60301940, "body": "@Ant6n We don&#39;t use the <code>size_t</code> - we just use that template alias to unpack the indices (0, 1, 2, ..., N-1) into Points (Point, Point, Point, ..., Point)."}, {"owner": {"reputation": 1598, "user_id": 1899587, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad0a2dd3306606ccbd235ecca26f9c64?s=128&d=identicon&r=PG", "display_name": "Ant6n", "link": "https://stackoverflow.com/users/1899587/ant6n"}, "edited": false, "score": 0, "creation_date": 1459453266, "post_id": 36322873, "comment_id": 60306454, "body": "I tried to use this, this doesn&#39;t compile in XCode (already at the <code>class = std::make_index_sequence&lt;N&gt;</code>). I think this may be C++14."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1598, "user_id": 1899587, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad0a2dd3306606ccbd235ecca26f9c64?s=128&d=identicon&r=PG", "display_name": "Ant6n", "link": "https://stackoverflow.com/users/1899587/ant6n"}, "edited": false, "score": 0, "creation_date": 1459453722, "post_id": 36322873, "comment_id": 60306734, "body": "@Ant6n It is C++14, yes. You can implement it in C++11 though (just search around here for solutions)."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 12, "last_activity_date": 1459429951, "last_edit_date": 1459429951, "creation_date": 1459389770, "answer_id": 36322873, "question_id": 36320636, "link": "https://stackoverflow.com/questions/36320636/c11-making-variadic-constructor-understand-an-initialization-list-of-initializ/36322873#36322873", "title": "C++11 making variadic constructor understand an initialization list of initialization lists", "body": "<h3>Why doesn't your code work</h3>\n\n<p>You're bracing in a <em>braced-init-list</em>, <code>{{1, 1}, {2, 2}}</code>. That thing doesn't have a type. It's just a collection of stuff. Template deduction can't really work because that could be <em>anything</em> - there is an infinite amount of types that could be constructed from that list. Even though you clearly want <code>Points...</code> to be <code>Point</code>s, that just can't work.</p>\n\n<h3>What do to instead</h3>\n\n<p>The only way to take a <em>braced-init-list</em> to mean an arbitrary amount of <code>T</code>s (for some type <code>T</code>) is to use <code>std::initializer_list</code>:</p>\n\n<pre><code>Array(std::initializer_list&lt;Point&gt; points) { ... }\n</code></pre>\n\n<p>But to initialize the array from the <code>initializer_list</code>, you'd need something like <code>std::copy</code>, but since <code>Point</code> isn't default-constructible, this is a non-starter unfortunately<sup>&dagger;</sup>. </p>\n\n<p>We could instead just take an array directly:</p>\n\n<pre><code>Array(std::array&lt;Point, N&gt; const&amp; a)\n    : _points(a)\n{ }\n</code></pre>\n\n<p>That lets you do what you want. Or at least, with a few extra braces:</p>\n\n<pre><code>Array&lt;2&gt; c{{{{1, 1}, {2,2}}}};\n</code></pre>\n\n<p>That is an annoyingly excessive amount of braces!</p>\n\n<p>So one trick I like instead is to actually create a constructor that takes <code>N</code> <code>Point</code>s, which is what you wanted to begin with. We can do that by making <code>Array</code> a partial specialization with the index sequence trick:</p>\n\n<pre><code>template &lt;size_t N, class = std::make_index_sequence&lt;N&gt;&gt;\nclass Array;\n\ntemplate &lt;size_t N, size_t... Is&gt;\nclass Array&lt;N, std::index_sequence&lt;Is...&gt;&gt; {\nprivate:\n    std::array&lt;Point, N&gt; _points;\n\n    template &lt;size_t&gt;\n    using Point_ = Point;\n\npublic:\n    Array(Point_&lt;Is&gt;... points)\n        : _points{{points...}}\n    { }\n};\n</code></pre>\n\n<p>Here, <code>Point_&lt;I&gt;</code> is just an alias template for <code>Point</code>, we use it just to unpack the index sequence into a bunch of <code>Point</code>s. That constructor is thus a <em>non</em>-template that takes precisely <code>N</code> <code>Point</code>s and we can then use it with a sane amount of braces:</p>\n\n<pre><code>Array&lt;2&gt; c{{1, 1}, {2,2}}; // ok!\n</code></pre>\n\n<hr />\n\n<p><sup>&dagger;</sup>Well, not really a non-starter. There's several things you can do to still get this to work. You could make <code>Point</code> default-constructible, at which point you could write:</p>\n\n<pre><code>Array(std::initializer_list&lt;Point&gt; il)\n{\n    std::copy(il.begin(), il.begin() + std::min(il.size(), N),  _points.begin());\n}\n</code></pre>\n\n<p>Or even without making <code>Point</code> default-constructible, you could use the index sequence trick to initialize with the help of a delegating constructor:</p>\n\n<pre><code>public:\n    Array(std::initializer_list&lt;Point&gt; il)\n        : Array(il, std::make_index_sequence&lt;N&gt;{})\n    { }\n\nprivate:\n    template &lt;size_t... Is&gt;\n    Array(std::initializer_list&lt;Point&gt; il, std::index_sequence&lt;Is...&gt; )\n        : _points{{(Is &lt; il.size() ? il.begin()[Is] : Point(0,0))...}}\n    { }\n</code></pre>\n"}], "owner": {"reputation": 1598, "user_id": 1899587, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad0a2dd3306606ccbd235ecca26f9c64?s=128&d=identicon&r=PG", "display_name": "Ant6n", "link": "https://stackoverflow.com/users/1899587/ant6n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1274, "favorite_count": 3, "accepted_answer_id": 36322873, "answer_count": 1, "score": 9, "last_activity_date": 1459429951, "creation_date": 1459375814, "last_edit_date": 1459389798, "question_id": 36320636, "link": "https://stackoverflow.com/questions/36320636/c11-making-variadic-constructor-understand-an-initialization-list-of-initializ", "title": "C++11 making variadic constructor understand an initialization list of initialization lists", "body": "<p>Let's say I have a class of Point and and an array of Points, where the number of points is given by a template parameter. How do I get initialization to work using braces? \nIf I use:</p>\n\n<pre><code>class Point {\npublic:\n    float x, y;\n    Point(float x, float y) : x(x), y(y) {}\n};\n\ntemplate &lt;size_t N&gt;\nclass Array {\nprivate:\n    std::array&lt;Point, N&gt; _points;\n\npublic:\n    template &lt;typename... Points&gt;\n    Array(const Points&amp; ... points) : _points({ points... }) {\n    }\n};\n</code></pre>\n\n<p>Then this works:</p>\n\n<pre><code>Array&lt;2&gt; a{Point{1,1}, Point{2, 2}};\n</code></pre>\n\n<p>But If I don't provide explicit <code>Point</code> objects, I get an error in Xcode:</p>\n\n<pre><code>Array&lt;2&gt; c{{1,1}, {2, 2}};\n</code></pre>\n\n<p>The error is: \"No matching Constructor for initialization of Array&lt;2>\". For the particular constructor it says \"Candidate constructor not viable: requires 0 arguments, but 2 were provided\".</p>\n\n<p>How do I get this to work?</p>\n"}, {"tags": ["c++", "opengl", "freetype"], "answers": [{"tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": false, "score": 2, "last_activity_date": 1459375985, "creation_date": 1459375985, "answer_id": 36320675, "question_id": 36320542, "link": "https://stackoverflow.com/questions/36320542/why-isnt-freetype-loading-a-font-in-my-exe/36320675#36320675", "title": "Why isn&#39;t Freetype loading a font in my .exe", "body": "<p><code>FT_New_Face</code> expects a path in the file system. PE resources are not located in the filesystem, hence trying to locate the file fails and you get this error. </p>\n\n<p>You have to use <code>FT_New_Memory_Face</code> instead; the memory location of the resource can be retrieved using the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms648008%28v=vs.85%29.aspx\" rel=\"nofollow\">Resource API (link to MSDN)</a>. Instead of using <code>LoadLibrary</code> use <code>GetModuleHandle(NULL)</code> to retrieve a handle to the PE image of the process.</p>\n"}], "owner": {"reputation": 15, "user_id": 1383215, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1e5d6472471bb51f80f01f5d2d77c5b5?s=128&d=identicon&r=PG", "display_name": "LegItJoe", "link": "https://stackoverflow.com/users/1383215/legitjoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1366, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459375985, "creation_date": 1459375321, "last_edit_date": 1459375961, "question_id": 36320542, "link": "https://stackoverflow.com/questions/36320542/why-isnt-freetype-loading-a-font-in-my-exe", "title": "Why isn&#39;t Freetype loading a font in my .exe", "body": "<p>I have written an application that uses FreeType to render text onto a window. I have built the debug and release version which both run fine from visual studio 2015. I have set my runtime library for linking to /MDd. I also included the font OCRAEXT.TTF in resource files.</p>\n\n<p>Here is the code the uses FreeType:</p>\n\n<pre><code>TextRenderer::TextRenderer(GLuint width, GLuint height)\n{\n    //Load and configure shader\n    this-&gt;TextShader = ResourceManager::LoadShader(\"VertexText.vert\", \"FragmentText.frag\", nullptr, \"text\");\n    this-&gt;TextShader.SetMatrix4(\"projection\", glm::ortho(0.0f, static_cast&lt;GLfloat&gt;(width), static_cast&lt;GLfloat&gt;(height), 0.0f), GL_TRUE);\n    this-&gt;TextShader.SetInteger(\"text\", 0);\n\n    //configure VAO/VBO for texture quads\n    glGenVertexArrays(1, &amp;this-&gt;VAO);\n    glGenBuffers(1, &amp;this-&gt;VBO);\n    glBindVertexArray(this-&gt;VAO);\n    glBindBuffer(GL_ARRAY_BUFFER, this-&gt;VBO);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(GLfloat) * 6 * 4, NULL, GL_DYNAMIC_DRAW);\n    glEnableVertexAttribArray(0);\n    glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 4 * sizeof(GLfloat), 0);\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n    glBindVertexArray(0);\n}\n\n\nvoid TextRenderer::Load(std::string font, GLuint fontSize)\n{\n    //first clear the previously loaded characters\n    this-&gt;Characters.clear();\n\n    //then initialise and load the Freetype library\n    FT_Library ft;\n    if (FT_Init_FreeType(&amp;ft))  //All functions return a value different than 0 whenever an error occurred\n        std::cout &lt;&lt; \"ERROR::FREETYPE: Could not init freetype library\" &lt;&lt; std::endl;\n\n    //Load font as face\n    FT_Face face;\n    if (FT_New_Face(ft, font.c_str(), 0, &amp;face))\n        std::cout &lt;&lt; \"ERROR::FREETYPE: Failed to load font\" &lt;&lt; std::endl;\n\n    //set size to load glyphs as\n    FT_Set_Pixel_Sizes(face, 0, fontSize);\n\n    //disable byte-alignment restriction\n    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);\n\n    //then for the first 128 ASCII characters, pre-load/compile their characters and store them\n    for (GLubyte c = 0; c &lt; 128; c++)\n    {\n        //Load character glyph\n        if (FT_Load_Char(face, c, FT_LOAD_RENDER))\n        {\n            std::cout &lt;&lt; \"ERROR::FREETYPE: Failed to load glyph\" &lt;&lt; std::endl;\n            continue;\n        }\n\n        //generate texture\n        GLuint texture;\n        glGenTextures(1, &amp;texture);\n        glBindTexture(GL_TEXTURE_2D, texture);\n        glTexImage2D(\n            GL_TEXTURE_2D,\n            0,\n            GL_RED,\n            face-&gt;glyph-&gt;bitmap.width,\n            face-&gt;glyph-&gt;bitmap.rows,\n            0,\n            GL_RED,\n            GL_UNSIGNED_BYTE,\n            face-&gt;glyph-&gt;bitmap.buffer\n            );\n\n        //set texture options\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n\n        //Now store character for later use\n        Character character =\n        {\n            texture,\n            glm::ivec2(face-&gt;glyph-&gt;bitmap.width, face-&gt;glyph-&gt;bitmap.rows),\n            glm::ivec2(face-&gt;glyph-&gt;bitmap_left, face-&gt;glyph-&gt;bitmap_top),\n            face-&gt;glyph-&gt;advance.x,\n        };\n        Characters.insert(std::pair&lt;GLchar, Character&gt;(c, character));\n\n    }\n    glBindTexture(GL_TEXTURE_2D, 0);\n\n    //destroy FreeType once we're finished\n    FT_Done_Face(face);\n    FT_Done_FreeType(ft);\n}\n</code></pre>\n\n<p>In my Game class I have an initialise function that contains these lines of code:</p>\n\n<pre><code>Text = new TextRenderer(this-&gt;Width, this-&gt;Height);\n    Text-&gt;Load(\"fonts/OCRAEXT.TTF\", 24);\n</code></pre>\n\n<p>The problem is that when I try to run the standalone .exe, I get the message \"ERROR::FREETYPE: Failed to load font\" and the .exe. stops running. I've tried to debug this and I get a message that says \"unhandled exception at 0x00730072 in Game.exe. 0xC0000005: Access violation executing location 0x00730072.\"</p>\n\n<p>The breakpoint points to this line of code:</p>\n\n<pre><code>FT_Set_Pixel_Sizes(face, 0, fontSize);\n</code></pre>\n\n<p>I've tried stepping through the code to figure out the problem, but little made sense. Could someone please explain what could be the problem?</p>\n"}, {"tags": ["c#", "c++", "windows", "unity3d", "il2cpp"], "comments": [{"owner": {"reputation": 29735, "user_id": 294884, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f8675693dfeb3908195657eb3a3fdda4?s=128&d=identicon&r=PG", "display_name": "Fattie", "link": "https://stackoverflow.com/users/294884/fattie"}, "edited": false, "score": 0, "creation_date": 1459425129, "post_id": 36320440, "comment_id": 60287239, "body": "Forget it and rewrite your algorithms in ordinary c#."}], "answers": [{"tags": [], "owner": {"reputation": 2149, "user_id": 381697, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b688235379811c6092edbcea5f418ce?s=128&d=identicon&r=PG", "display_name": "Josh Peterson", "link": "https://stackoverflow.com/users/381697/josh-peterson"}, "is_accepted": false, "score": 0, "last_activity_date": 1459424520, "creation_date": 1459424520, "answer_id": 36332422, "question_id": 36320440, "link": "https://stackoverflow.com/questions/36320440/how-to-use-pure-c-code-with-il2cpp-for-unity-compilation-into-windows-applicat/36332422#36332422", "title": "How to use pure C++ code with IL2CPP for Unity compilation into windows application?", "body": "<p>This is not possible now, as Unity does not support IL2CPP as a scripting backend for the Windows standalone target.</p>\n"}, {"comments": [{"owner": {"reputation": 452, "user_id": 1584915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e61f1cd37b78d28e0ab299352be623?s=128&d=identicon&r=PG", "display_name": "DurandA", "link": "https://stackoverflow.com/users/1584915/duranda"}, "edited": false, "score": 0, "creation_date": 1488676457, "post_id": 42603317, "comment_id": 72336977, "body": "More on IL2CPP internals on <a href=\"https://blogs.unity3d.com/2015/05/06/an-introduction-to-ilcpp-internals/\" rel=\"nofollow noreferrer\">this Unity blog post</a>."}], "tags": [], "owner": {"reputation": 452, "user_id": 1584915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e61f1cd37b78d28e0ab299352be623?s=128&d=identicon&r=PG", "display_name": "DurandA", "link": "https://stackoverflow.com/users/1584915/duranda"}, "is_accepted": false, "score": 1, "last_activity_date": 1488676444, "creation_date": 1488676444, "answer_id": 42603317, "question_id": 36320440, "link": "https://stackoverflow.com/questions/36320440/how-to-use-pure-c-code-with-il2cpp-for-unity-compilation-into-windows-applicat/42603317#42603317", "title": "How to use pure C++ code with IL2CPP for Unity compilation into windows application?", "body": "<p>You can talk with C or C++ (and others depending on your target platforms) libraries using <a href=\"https://docs.unity3d.com/Manual/NativePlugins.html\" rel=\"nofollow noreferrer\">Native Plugins</a>. It is even possible to use to <a href=\"https://docs.unity3d.com/Manual/webgl-interactingwithbrowserscripting.html\" rel=\"nofollow noreferrer\">call C++ function from a plugin</a> using WebGL thanks to emscripten compilation.</p>\n\n<p>Note that it has nothing to do with IL2CPP. IL stands for Intermediate Language (IL), the low-level output from .NET compilers. Your C++ code will be compiled directly to machine code/ASM code and will be called from within your script code. Your script will either be running on the Mono virtual machine or using IL2CPP (depending on the platform).</p>\n"}], "owner": {"reputation": 102, "user_id": 1973207, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/557d7fa74d7ec23c6726f1c16986b032?s=128&d=identicon&r=PG", "display_name": "DuckQueen", "link": "https://stackoverflow.com/users/1973207/duckqueen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1944, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1488676444, "creation_date": 1459374887, "question_id": 36320440, "link": "https://stackoverflow.com/questions/36320440/how-to-use-pure-c-code-with-il2cpp-for-unity-compilation-into-windows-applicat", "title": "How to use pure C++ code with IL2CPP for Unity compilation into windows application?", "body": "<p>I want to have a crossplatform application (including browser integration). I have C++ library\\algorithms I want to use in form of sources (to make Unity compile it on each platform). I know it could work if I use Mac or WebGL as primary build targets. Yet I have windows as my primary user base. So I want to use IL2CPP on windows to compile my C# and C++ code. </p>\n\n<p>How to structure project and set IL2CPP to compile C++ files in unity on windows in order to create windows executable?</p>\n"}, {"tags": ["c++", "opencv", "ip-camera"], "comments": [{"owner": {"reputation": 2168, "user_id": 161640, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/39b216bf27c4f7472f486046b7200cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/161640/isaac"}, "edited": false, "score": 0, "creation_date": 1459376866, "post_id": 36320375, "comment_id": 60265001, "body": "Do camera1 and camera2 have identical settings? Are they the same model?"}, {"owner": {"reputation": 1, "user_id": 3877565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4045c4ae6c2292f1c5228e0ed1d7ea45?s=128&d=identicon&r=PG&f=1", "display_name": "Nort", "link": "https://stackoverflow.com/users/3877565/nort"}, "reply_to_user": {"reputation": 2168, "user_id": 161640, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/39b216bf27c4f7472f486046b7200cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/161640/isaac"}, "edited": false, "score": 0, "creation_date": 1459401804, "post_id": 36320375, "comment_id": 60272212, "body": "Yes, camera_1 and camera_2 have identical settings and they the same model. They bought at the same time."}], "owner": {"reputation": 1, "user_id": 3877565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4045c4ae6c2292f1c5228e0ed1d7ea45?s=128&d=identicon&r=PG&f=1", "display_name": "Nort", "link": "https://stackoverflow.com/users/3877565/nort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 513, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459374594, "creation_date": 1459374594, "question_id": 36320375, "link": "https://stackoverflow.com/questions/36320375/opencv-cannot-open-stream-using-ip-camera", "title": "OpenCV cannot open stream using IP camera", "body": "<p>I have 2 identical IP cameras and I'm trying to access stream of them. To do this I'm using </p>\n\n<blockquote>\n  <p><a href=\"http://username:password@ip/axis-cgi/mjpg/video.cgi?m.mjpg\" rel=\"nofollow\">http://username:password@ip/axis-cgi/mjpg/video.cgi?m.mjpg</a></p>\n</blockquote>\n\n<p>I give this to OpenCV VideoCapture. And now let's consider that there is camera_1 and camera_2. Cameras have different IPs, so there is no conflicts. The problem is that I can't open stream in OpenCV of camera_1, but in the browser it works. And with camera_2 is problem that sometimes I can open the stream in OpenCV and sometimes I can't do this (I don't change any settings, just run application ones and it works, after that I close application and run it again and it doesn't work).</p>\n\n<p>So what can be the reason? Where to looking for a solution?</p>\n"}, {"tags": ["c++", "boost", "visualization", "point-cloud-library", "point-clouds"], "answers": [{"tags": [], "owner": {"reputation": 618, "user_id": 3712254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a88228c246d0e8e2bbb92c9c0af3a45?s=128&d=identicon&r=PG&f=1", "display_name": "bantmen", "link": "https://stackoverflow.com/users/3712254/bantmen"}, "is_accepted": true, "score": 0, "last_activity_date": 1459375173, "creation_date": 1459375173, "answer_id": 36320500, "question_id": 36320365, "link": "https://stackoverflow.com/questions/36320365/larger-normal-vectors-for-pcl-visualization/36320500#36320500", "title": "Larger normal vectors for PCL visualization", "body": "<p>I realized that increasing the <code>scale</code> argument of <code>addPointCloudNormals</code> is doing sort of what I was looking for even though it does not exactly increase the volume of arrows similar to those shown in the tutorial.</p>\n"}], "owner": {"reputation": 618, "user_id": 3712254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a88228c246d0e8e2bbb92c9c0af3a45?s=128&d=identicon&r=PG&f=1", "display_name": "bantmen", "link": "https://stackoverflow.com/users/3712254/bantmen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 36320500, "answer_count": 1, "score": 0, "last_activity_date": 1459375173, "creation_date": 1459374568, "question_id": 36320365, "link": "https://stackoverflow.com/questions/36320365/larger-normal-vectors-for-pcl-visualization", "title": "Larger normal vectors for PCL visualization", "body": "<p>I am using <code>NormalEstimation&lt;PointXYZ, Normal&gt;</code> to compute the normals for <code>PointCloud&lt;PointXYZ&gt;</code> and get <code>PointCloud&lt;PointNormal&gt;</code>. Afterwards, I use <code>addPointCloudNormals&lt;PointXYZ, Normal&gt;()</code> for my visualization to put the points and their normal vectors together. </p>\n\n<p>My visualization works, and I can see normal vectors corresponding the points in space. However they are too small and I was wondering if there is a way of making them more visible. An example to more visible normal vectors could be found at the official tutorials <a href=\"http://pointclouds.org/documentation/tutorials/normal_estimation.php\" rel=\"nofollow\">http://pointclouds.org/documentation/tutorials/normal_estimation.php</a>  </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1459374805, "post_id": 36320361, "comment_id": 60264142, "body": "What&#39;s your input?"}, {"owner": {"reputation": 700, "user_id": 279610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd710af7534fdcab7c8d2b9d3812182c?s=128&d=identicon&r=PG&f=1", "display_name": "robsn", "link": "https://stackoverflow.com/users/279610/robsn"}, "edited": false, "score": 1, "creation_date": 1459374915, "post_id": 36320361, "comment_id": 60264193, "body": "Welcome to SO. Please re-format your code properly and read <a href=\"http://stackoverflow.com/help/how-to-ask\">this guide</a> on how to ask questions."}, {"owner": {"reputation": 2583, "user_id": 2846062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/32362fca75c20824e7db578de0d7519c?s=128&d=identicon&r=PG&f=1", "display_name": "Milo Lu", "link": "https://stackoverflow.com/users/2846062/milo-lu"}, "edited": false, "score": 0, "creation_date": 1459375484, "post_id": 36320361, "comment_id": 60264457, "body": "<code>main</code> can not be <code>void</code>"}, {"owner": {"reputation": 700, "user_id": 279610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd710af7534fdcab7c8d2b9d3812182c?s=128&d=identicon&r=PG&f=1", "display_name": "robsn", "link": "https://stackoverflow.com/users/279610/robsn"}, "reply_to_user": {"reputation": 2583, "user_id": 2846062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/32362fca75c20824e7db578de0d7519c?s=128&d=identicon&r=PG&f=1", "display_name": "Milo Lu", "link": "https://stackoverflow.com/users/2846062/milo-lu"}, "edited": false, "score": 0, "creation_date": 1459376045, "post_id": 36320361, "comment_id": 60264688, "body": "@MiloLu some compilers accept it but it&#39;s a very bad habit. It&#39;s not standard."}], "answers": [{"tags": [], "owner": {"reputation": 2583, "user_id": 2846062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/32362fca75c20824e7db578de0d7519c?s=128&d=identicon&r=PG&f=1", "display_name": "Milo Lu", "link": "https://stackoverflow.com/users/2846062/milo-lu"}, "is_accepted": false, "score": 0, "last_activity_date": 1459375999, "creation_date": 1459375999, "answer_id": 36320681, "question_id": 36320361, "link": "https://stackoverflow.com/questions/36320361/run-time-check-error-2/36320681#36320681", "title": "Run Time Check Error # 2", "body": "<p><code>char Array[20]</code> while the <code>Num</code> you input is larger than 20, it will corrupt.</p>\n\n<p>Better use <code>vector</code> and <code>push_back</code></p>\n"}, {"tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 0, "last_activity_date": 1459376023, "creation_date": 1459376023, "answer_id": 36320684, "question_id": 36320361, "link": "https://stackoverflow.com/questions/36320361/run-time-check-error-2/36320684#36320684", "title": "Run Time Check Error # 2", "body": "<p>One mistake is that you're calling <code>strlen</code> on a char array that is not guaranteed to be NULL terminated:</p>\n\n<p><code>NumElements = strlen(Str);</code></p>\n\n<p>Thus <code>NumElements</code> has an undetermined value.</p>\n\n<p>You need to either:</p>\n\n<p>1) pass the actual number of characters that are to be sorted as a parameter, along with the array and getting rid of the call to <code>strlen</code>:</p>\n\n<pre><code>BubbleSort(Array, Num);\n//...\nvoid BubbleSort(char Str[], int NumElements)\n</code></pre>\n\n<p>or</p>\n\n<p>2) Make sure the char array you're passing is null terminated</p>\n"}], "owner": {"reputation": 1, "user_id": 6137048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a92e61573072a331d019468230a5c68c?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Casey", "link": "https://stackoverflow.com/users/6137048/stephen-casey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1459376564, "creation_date": 1459374555, "last_edit_date": 1459376564, "question_id": 36320361, "link": "https://stackoverflow.com/questions/36320361/run-time-check-error-2", "title": "Run Time Check Error # 2", "body": "<pre><code>#include &lt;string.h&gt;\n\n#include \"BubbleSort.h\"\n\nvoid BubbleSort(char Str[])\n{\n    int     i;\n    int     NumElements;\n    bool    Sorted;\n    char    Temp;\n\n    NumElements = strlen(Str);\n    do {\n        Sorted = true;\n        NumElements--;\n        for (i = 0; i &lt; NumElements; i++)\n            if (Str[i] &gt; Str[i + 1])\n            {\n                Temp = Str[i];\n                Str[i] = Str[i + 1];\n                Str[i + 1] = Temp;\n                Sorted = false;\n            }\n    } while (!Sorted);\n}\n/////////////////////////////////////////////\n\n#include &lt;iostream&gt;\n#include \"Bubblesort.h\"\n\nusing namespace std;\n\n\n\nvoid main() {\n    int  Num; \n    char  Array[20]; \n\n\n\n    cout &lt;&lt; \"How many numbers would you like to enter?\" &lt;&lt; endl;\n    cin &gt;&gt; Num;\n\n    cout &lt;&lt; \"Enter your numbers:\" &lt;&lt; endl;\n    for (int i = 0; i &lt; Num; i++) \n    {\n        cin &gt;&gt; Array[i];\n    }\n\n\n    cout &lt;&lt; \"Here are the numbers you entered:\" &lt;&lt; endl;\n    for (int i = 0; i &lt; Num; i++) \n    {\n        cout &lt;&lt; Array[i] &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl &lt;&lt; endl;\n\n    BubbleSort (Array); \n\n\n        cout &lt;&lt; \"Here are your sorted numbers:\" &lt;&lt; endl;\n        for (int i = 0; i &lt; Num; i++)\n        {\n        cout &lt;&lt; Array[i] &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n}\n\n////////////////////////////////////////////////////////\n\n#ifndef BUBBLE_SORT_H\n#define BUBBLE_SORT_H\n\nvoid BubbleSort(char[]);\n\n#endif\n</code></pre>\n\n<p>I get a Run Time Error stating that Num was corrupted. Can anyone help pinpoint the problem in my code?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1459374356, "post_id": 36320272, "comment_id": 60263957, "body": "Which errors in particular? Put the error messages verbatim in your question please."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1459374401, "post_id": 36320272, "comment_id": 60263976, "body": "Not sure what you intended <code>return feet, inches;</code> to do, but I&#39;d guess it&#39;s not doing what you wanted (it&#39;s equivalent to <code>return inches;</code>)."}, {"owner": {"reputation": 9, "user_id": 5995001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c923570df639b17715734334ef74a588?s=128&d=identicon&r=PG", "display_name": "J_Ray93", "link": "https://stackoverflow.com/users/5995001/j-ray93"}, "edited": false, "score": 0, "creation_date": 1459374798, "post_id": 36320272, "comment_id": 60264140, "body": "I&#39;m very new to using functions, can i not return 2 values that way? This is an assignment for my programming class. and everything has to be in a function for this assignment. With that said how would i return 2 values from 1 function?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1459374871, "post_id": 36320272, "comment_id": 60264170, "body": "No, a function can only return one value. If you want to return multiple values, either return a structure, or use reference arguments so the function can modify the caller&#39;s variable."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1459374903, "post_id": 36320272, "comment_id": 60264187, "body": "Why does the function that returns meters also take a <code>meter</code> argument that it never uses?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1459374929, "post_id": 36320272, "comment_id": 60264201, "body": "And instead of a <code>while</code> loop that subtracts 12, use <code>fmod()</code> to calculate the modulus."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1459377000, "post_id": 36320272, "comment_id": 60265058, "body": "The error message you&#39;re getting is what would happen if you didn&#39;t have <code>#include &lt;iostream&gt;</code> and <code>using namespace std;</code>. Since you show those in the question, I can only assume that the real program is different from what you posted."}, {"owner": {"reputation": 9, "user_id": 5995001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c923570df639b17715734334ef74a588?s=128&d=identicon&r=PG", "display_name": "J_Ray93", "link": "https://stackoverflow.com/users/5995001/j-ray93"}, "edited": false, "score": 0, "creation_date": 1459377402, "post_id": 36320272, "comment_id": 60265215, "body": "Thats the exact program as is. Thats why im confused. There should be no errors pertaining to the couts/ins/endl statements. As for my other errors im working on fixing myself. I just wanted some other people to look and see if they could tell where that error was coming from."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5995001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c923570df639b17715734334ef74a588?s=128&d=identicon&r=PG", "display_name": "J_Ray93", "link": "https://stackoverflow.com/users/5995001/j-ray93"}, "edited": false, "score": 0, "creation_date": 1459378638, "post_id": 36321139, "comment_id": 60265647, "body": "Okay thats good to know, dont know why im having issues in my VS...maybe its just a weird bug. thank you for the help."}], "tags": [], "owner": {"reputation": 13, "user_id": 6131746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42bdc9bb4ec8cf273d14c91dadca1d14?s=128&d=identicon&r=PG&f=1", "display_name": "Shevy", "link": "https://stackoverflow.com/users/6131746/shevy"}, "is_accepted": false, "score": -1, "last_activity_date": 1459378324, "creation_date": 1459378324, "answer_id": 36321139, "question_id": 36320272, "link": "https://stackoverflow.com/questions/36320272/issue-with-cins-and-couts-in-functions/36321139#36321139", "title": "Issue with cin&#39;s and cout&#39;s in functions", "body": "<p>I copied your code into my visual studio, and it's working perfectly! :)</p>\n\n<p>It does have another problem which I fixed by me in order to make it work:\nThe variables \"double inches, meters, centimeters; int feet;\" are used in the switch before you gave them any value. You can just make them all a 0, because you are anyways getting new values from the user in the function.</p>\n\n<p>Hope I was helpful!\nGood luck!</p>\n"}], "owner": {"reputation": 9, "user_id": 5995001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c923570df639b17715734334ef74a588?s=128&d=identicon&r=PG", "display_name": "J_Ray93", "link": "https://stackoverflow.com/users/5995001/j-ray93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1459378324, "creation_date": 1459374168, "last_edit_date": 1459374594, "question_id": 36320272, "link": "https://stackoverflow.com/questions/36320272/issue-with-cins-and-couts-in-functions", "title": "Issue with cin&#39;s and cout&#39;s in functions", "body": "<p>I'm having and issue with my menu driven program that is calling functions.The compiler tells me that all of my cin's,cout's, and my endl statements inside my functions are errors when i try to execute the program. Any advice on how to fix this?</p>\n\n<p>edit</p>\n\n<p>The error its giving me states that the cout's, cin's, and endl's are all undeclared identifiers. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\n\n    double ic(double inches, double centimeters)\n    {\n        cout &lt;&lt; \"Enter inches\" &lt;&lt; endl;\n        cin &gt;&gt; inches;\n        centimeters = 2.54*inches;\n        return centimeters;\n    }\n\n    double ci(double centimeters, double inches)\n    {\n        cout &lt;&lt; \"Enter centimeters\" &lt;&lt; endl;\n        cin &gt;&gt; centimeters;\n        inches = centimeters * .3937007874;\n        return inches;\n    }\n\n    double fim(int feet, double inches, double meters)\n    {\n        cout &lt;&lt; \"Enter feet \" &lt;&lt; endl;\n        cin &gt;&gt; feet;\n        cout &lt;&lt; \"Enter inches \" &lt;&lt; endl;\n        cin &gt;&gt; inches;\n        inches = feet * 12 + inches;\n        meters = inches / 39.370;\n        return meters;\n    }\n\n    double mfi(double meters, int feet, double inches)\n    {\n        feet = 0;\n        inches = 0;\n        meters = 0;\n        cout &lt;&lt; \"Enter meters. \" &lt;&lt; endl;\n        cin &gt;&gt; meters;\n        inches = meters * 39.37;\n        while (inches &gt; 12)\n        {\n            if (inches &gt; 12)\n                inches = inches - 12;\n            feet++;\n        }\n        return feet, inches;\n    }\n\n\n\nint main()\n{\n    double inches, meters, centimeters;\n    int exit = 1, feet;\n    char choice;\n\n    while (exit == 1)\n    {\n        cout &lt;&lt; \"Basic Conversion Calculator\" &lt;&lt; endl\n            &lt;&lt; \"a. Inches to centimeters\" &lt;&lt; endl\n            &lt;&lt; \"b. Centimeters to inches\" &lt;&lt; endl\n            &lt;&lt; \"c. Feet and inches to meters\" &lt;&lt; endl\n            &lt;&lt; \"d. Meters to feet and inches\" &lt;&lt; endl\n            &lt;&lt; \"e. Quit\" &lt;&lt; endl;\n\n\n        cout &lt;&lt; \"Insert Option:\";\n        cin &gt;&gt; choice;\n\n\n\n        switch (choice)\n        {\n        case 'a':  case 'A':\n            centimeters = ic(inches, centimeters);\n            cout &lt;&lt; centimeters &lt;&lt; \"cm\" &lt;&lt; endl;\n            break;\n\n        case 'b': case 'B':\n            inches = ci(centimeters, inches);\n            cout &lt;&lt; inches &lt;&lt; \"in\" &lt;&lt; endl;\n            break;\n\n        case 'c': case 'C':\n            meters = fim(feet, inches, meters);\n            cout &lt;&lt; meters &lt;&lt; \"m\" &lt;&lt; endl &lt;&lt; endl;\n            break;\n\n        case 'd': case 'D':\n            feet = mfi(meters, feet, inches);\n            inches = mfi(meters, feet, inches);\n            cout &lt;&lt; feet &lt;&lt; \" ft and \" &lt;&lt; inches &lt;&lt; \"in\" &lt;&lt; endl;\n            break;\n\n        case 'e': case 'E':\n\n            exit = 0;\n            break;\n\n        default:\n            cout &lt;&lt; \"Input Error!\" &lt;&lt; endl;\n\n        }\n\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "compiler-errors", "function-pointers", "member-function-pointers"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1459378216, "post_id": 36320156, "comment_id": 60265497, "body": "Because functions, that are (non-static)members of the class, have an additional, hidden, argument passed in to the function - <code>this</code> pointer."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6136992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba4407b488f03614e3d780883e562b3b?s=128&d=identicon&r=PG&f=1", "display_name": "Peng", "link": "https://stackoverflow.com/users/6136992/peng"}, "edited": false, "score": 0, "creation_date": 1459448153, "post_id": 36320222, "comment_id": 60303459, "body": "So by specifying the namespace it kinda enforce access security check?"}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "reply_to_user": {"reputation": 23, "user_id": 6136992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba4407b488f03614e3d780883e562b3b?s=128&d=identicon&r=PG&f=1", "display_name": "Peng", "link": "https://stackoverflow.com/users/6136992/peng"}, "edited": false, "score": 0, "creation_date": 1459469511, "post_id": 36320222, "comment_id": 60313325, "body": "@Peng - I don&#39;t understand your question.  You&#39;re not specifying any namespace in your original."}], "tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": false, "score": 0, "last_activity_date": 1459373971, "creation_date": 1459373971, "answer_id": 36320222, "question_id": 36320156, "link": "https://stackoverflow.com/questions/36320156/why-defining-a-member-function-pointer-variable-need-class-name/36320222#36320222", "title": "Why defining a member function pointer variable need class name?", "body": "<p>Because member function pointers are different from function pointers and member function pointers to functions in one class are different from any other class.  Different types need different declarations.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 6136992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba4407b488f03614e3d780883e562b3b?s=128&d=identicon&r=PG&f=1", "display_name": "Peng", "link": "https://stackoverflow.com/users/6136992/peng"}, "edited": false, "score": 0, "creation_date": 1459448060, "post_id": 36320224, "comment_id": 60303404, "body": "Can you give an example in which using member function pointers will break the type system? I am a little bit confuse about that"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1459457312, "post_id": 36320224, "comment_id": 60308717, "body": "I guess you mean some sort of alternative vtable that contains all member functions, not just the virtual ones"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1459457432, "post_id": 36320224, "comment_id": 60308785, "body": "@M.M: Yes. It&#39;s just a conceptual picture."}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 1, "last_activity_date": 1459457534, "last_edit_date": 1459457534, "creation_date": 1459373982, "answer_id": 36320224, "question_id": 36320156, "link": "https://stackoverflow.com/questions/36320156/why-defining-a-member-function-pointer-variable-need-class-name/36320224#36320224", "title": "Why defining a member function pointer variable need class name?", "body": "<p>It's a member function pointer. Which is not directly a pointer to a function, but sufficient info about it that combined with a reference or pointer to object, the function can be called. Virtually if it's virtual.</p>\n\n<p>You can think of it as a kind of offset in a class' vtable (since most every extant C++ implementation uses vtables).</p>\n\n<p>It's generally a good idea to avoid using member function pointers because they make it easy to inadvertently break the type system, and the rules that come into play then are so subtle that even experts have to think twice and look it up.</p>\n\n<hr>\n\n<p>Here's an example of how member function pointers allow a very unsafe hack, that might look safe because <em>there is no explicit type cast</em>, but that still ends up crashing in a failed assertion. I added <code>const</code> as usual in this code (it's a pretty construed example), but all the <code>const</code> stuff can just be ignored, removed. The problem here stems from a risky use of a member pointer that allows access to a base class' protected parts via a reference to an object of base class type:</p>\n\n<pre><code>#include &lt;string&gt;\nusing namespace std;\n\nclass Collection\n{\nprivate:\n    int n_items_{ 0 };\n\nprotected:\n    auto n_items_value() const -&gt; int { return n_items_; }\n    auto n_items_var() -&gt; int&amp; { return n_items_; }\n\npublic:\n    virtual auto n_items() const\n        -&gt; int\n    { return n_items_; }\n\n    virtual ~Collection() = 0;\n};\n\nCollection::~Collection() {}\n\nclass List\n    : public Collection\n{\nprivate:\n    mutable bool is_spliced_{ false };\n\n    void count_the_items() { n_items_var() = 42; }\n\npublic:\n    auto n_items() const\n        -&gt; int override\n    {\n        if( is_spliced_ )\n        {\n            const_cast&lt;List*&gt;( this )-&gt;count_the_items();\n            is_spliced_ = false;\n        }\n        return n_items_value();\n    }\n\n    void splice() { is_spliced_ = true; }\n};\n\nnamespace impl {\n    struct Ungood_hack\n        : Collection\n    {\n        // Look ma! No virtual call overhead! Yay!\n        static auto fast_n_items( Collection const&amp; o )\n            -&gt; int\n        {\n            return (o.*&amp;Ungood_hack::n_items_value)();\n        }\n    };\n}  // namespace impl\n\nauto fast_n_items( Collection const&amp; o )\n    -&gt; int\n{ return impl::Ungood_hack::fast_n_items( o ); }\n\n#include &lt;assert.h&gt;\nauto main() -&gt; int\n{\n    List o;\n    o.splice();\n    #ifdef TEST_IT\n        (void) o.n_items();     // Updates the count.\n    #endif\n    assert( fast_n_items( o ) == 42 );      // !Oops.\n}\n</code></pre>\n\n<hr>\n\n<p>Here's an example of how the same kind of trick, but now for a data member, can be used to advantage, accessing the <code>protected</code> collection member of a <code>std::stack</code> in order to find the current stack size:</p>\n\n<pre><code>#include &lt;stack&gt;\nusing namespace std;\n\ntemplate&lt; class Type &gt;\nauto n_items( stack&lt;Type&gt; const&amp; st )\n    -&gt; int\n{\n    struct Hack: stack&lt;Type&gt;\n    {\n        static auto n_items( stack&lt;Type&gt; const&amp; st )\n            -&gt; int\n        { return (st.*&amp;Hack::c).size(); }\n    };\n\n    return Hack::n_items( st );\n}\n\n#include &lt;assert.h&gt;\nauto main() -&gt; int\n{\n    stack&lt;int&gt; st;\n    st.push( 1 ); st.push( 2 ); st.push( 3 );\n    assert( n_items( st ) == 3 );       // OK.\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6136992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba4407b488f03614e3d780883e562b3b?s=128&d=identicon&r=PG&f=1", "display_name": "Peng", "link": "https://stackoverflow.com/users/6136992/peng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 36320224, "answer_count": 2, "score": 2, "last_activity_date": 1459457534, "creation_date": 1459373668, "question_id": 36320156, "link": "https://stackoverflow.com/questions/36320156/why-defining-a-member-function-pointer-variable-need-class-name", "title": "Why defining a member function pointer variable need class name?", "body": "<p>I recently found a function declaration which confuses me:</p>\n\n<pre><code>void CopyAndBindStaleTables( DescriptorHandle DestHandleStart,\n                             ID3D12GraphicsCommandList* CmdList, \n                             void (STDMETHODCALLTYPE  ID3D12GraphicsCommandList::*SetFunc)(UINT, D3D12_GPU_DESCRIPTOR_HANDLE));\n</code></pre>\n\n<p>So in this declaration the third parameter is a function pointer. But I have a hard time understand why we need to put the class name  ID3D12GraphicsCommandList:: there.</p>\n\n<p>Any idea? Thanks</p>\n"}, {"tags": ["c++", "debugging", "gdb", "kde"], "comments": [{"owner": {"reputation": 8196, "user_id": 395851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f7417d04460fbc27bc0ac99204cfce9c?s=128&d=identicon&r=PG", "display_name": "dbrank0", "link": "https://stackoverflow.com/users/395851/dbrank0"}, "edited": false, "score": 0, "creation_date": 1459412823, "post_id": 36320147, "comment_id": 60278344, "body": "Run program under gdb and when it crashes, enter &quot;bt&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 2, "last_activity_date": 1459494442, "creation_date": 1459494442, "answer_id": 36350069, "question_id": 36320147, "link": "https://stackoverflow.com/questions/36320147/how-should-i-go-about-debugging-a-sigfpe-in-a-large-unfamiliar-software-project/36350069#36350069", "title": "How should I go about debugging a SIGFPE in a large, unfamiliar software project?", "body": "<blockquote>\n  <p>but I'm not sure where to set the breakpoints in order to isolate the bug</p>\n</blockquote>\n\n<p>You shouldn't need to set any breakpoints at all: when a process running under GDB encounters a fatal signal (such as <code>SIGFPE</code>), the OS notices that the process is being traced by the debugger, and notifies the debugger (instead of terminating the process). That in turn causes GDB to stop, and prompt you for additional commands. It is <em>at that time</em> that you can look around and understand what caused the crash.</p>\n\n<p>Example:</p>\n\n<pre><code>cat -n t.c\n     1  #include &lt;fenv.h&gt;\n     2\n     3  int foo(double d) {\n     4    return 1/d;\n     5  }\n     6\n     7  int main()\n     8  {\n     9    feenableexcept(FE_DIVBYZERO);\n    10    return foo(0);\n    11  }\n\ngcc -g t.c -lm\n./a.out\nFloating point exception\n\ngdb -q ./a.out\n(gdb) run\nStarting program: /tmp/a.out\n\nProgram received signal SIGFPE, Arithmetic exception.\n0x000000000040060e in foo (d=0) at t.c:4\n4     return 1/d;\n(gdb) bt\n#0  0x000000000040060e in foo (d=0) at t.c:4\n#1  0x0000000000400635 in main () at t.c:10\n(gdb) q\n</code></pre>\n\n<p>Here, as you can see, GDB stops when <code>SIGFPE</code> is delivered, and allows you to look around and understand the crash.</p>\n\n<p>In your case, you would want to first install debuginfo symbols for KDE, and then run</p>\n\n<pre><code>gdb --args /usr/lib/kscreenlocker_greet --testing\n(gdb) run\n</code></pre>\n"}], "owner": {"reputation": 599, "user_id": 2289030, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6dce60b9c9d6ff1f7852d2e553b70648?s=128&d=identicon&r=PG", "display_name": "ijustlovemath", "link": "https://stackoverflow.com/users/2289030/ijustlovemath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459494442, "creation_date": 1459373616, "question_id": 36320147, "link": "https://stackoverflow.com/questions/36320147/how-should-i-go-about-debugging-a-sigfpe-in-a-large-unfamiliar-software-project", "title": "How should I go about debugging a SIGFPE in a large, unfamiliar software project?", "body": "<p>I'm trying to get to the bottom of a bug in KDE 5.6. The locker screen breaks no matter how I lock it. Here's the relevant code: <a href=\"https://github.com/KDE/kscreenlocker/blob/master/abstractlocker.cpp#L51\" rel=\"nofollow\">https://github.com/KDE/kscreenlocker/blob/master/abstractlocker.cpp#L51</a></p>\n\n<p>When I run <code>/usr/lib/kscreenlocker_greet --testing</code>, I get an output of:</p>\n\n<pre><code>KCrash: Application 'kscreenlocker_greet' crashing...\nFloating point exception (core dumped)\n</code></pre>\n\n<p>I'm trying to run it with <code>gdb</code> to try and pin the exact location of the bug, but I'm not sure where to set the breakpoints in order to isolate the bug. Should I be looking for calls to <code>KCrash</code>? Or perhaps a <code>raise()</code> call? Can I get <code>gdb</code> to print off the relevant line of code that causes SIGFPE?</p>\n\n<p>Thanks for any advice you can offer.</p>\n"}, {"tags": ["c++", "templates", "c++11", "sfinae"], "comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1459373843, "post_id": 36320057, "comment_id": 60263727, "body": "Of the four options listed, only <code>hasfoo</code> will detect a change from <code>int foo(double,bool) { return 0; }</code> to <code>int foo(double,double) { return 0; }</code> for example."}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1459373919, "post_id": 36320057, "comment_id": 60263763, "body": "Hmm... I guess I&#39;m not caring too much about implicit conversions.  But <code>decltype(static_cast&lt;int(T::*)(double, bool)&gt;(&amp;T::foo))*</code> could be used for all of them then.  It&#39;s what surrounds that expression that I&#39;m curious about."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1459375395, "post_id": 36320057, "comment_id": 60264420, "body": "<code>template&lt;class T&gt; concept bool foo_double_bool = requires (T t) { t.foo(0.0, true); };</code>. How many different ways of saying the same thing do you need?"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1459376223, "post_id": 36320057, "comment_id": 60264750, "body": "@T.C. concepts have not been invited to the party yet :-)"}], "answers": [{"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 1, "last_activity_date": 1473368500, "last_edit_date": 1473368500, "creation_date": 1473340788, "answer_id": 39392090, "question_id": 36320057, "link": "https://stackoverflow.com/questions/36320057/other-ways-of-checking-if-a-class-has-a-certain-member-function/39392090#39392090", "title": "Other ways of checking if a class has a certain member function", "body": "<blockquote>\n  <p>Can someone think of a way that is vastly different (or at least fairly creative) than the 5 ways I mention here?</p>\n</blockquote>\n\n<p>A fairly creative way to do that could be the one below.<br>\nIt is based on the <code>sizeof</code> operator and a trivial <em>using declaration</em> (here named <code>Type</code>).<br>\nSFINAE and partial template specialization do the rest.</p>\n\n<p>It follows a minimal, working example:</p>\n\n<pre><code>#include&lt;type_traits&gt;\n#include&lt;cstddef&gt;\n\ntemplate&lt;typename T, std::size_t&gt;\nusing Type = T;\n\ntemplate&lt;typename T, typename = T&gt;\nstruct U: std::false_type {};\n\ntemplate&lt;typename T&gt;\nstruct U&lt;T, Type&lt;T, sizeof(static_cast&lt;void(T::*)(int)&gt;(&amp;T::f))&gt;&gt;: std::true_type {};\n\nstruct S { void f(int) {} };\nstruct R { int f(double) { return 42; } };\nstruct T {};\n\nint main() {\n    static_assert(U&lt;S&gt;::value, \"!\");\n    static_assert(not U&lt;R&gt;::value, \"!\");\n    static_assert(not U&lt;T&gt;::value, \"!\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 1, "last_activity_date": 1473368479, "last_edit_date": 1473368479, "creation_date": 1473344185, "answer_id": 39393330, "question_id": 36320057, "link": "https://stackoverflow.com/questions/36320057/other-ways-of-checking-if-a-class-has-a-certain-member-function/39393330#39393330", "title": "Other ways of checking if a class has a certain member function", "body": "<blockquote>\n  <p>Can someone think of a way that is vastly different (or at least fairly creative) than the 5 ways I mention here?</p>\n</blockquote>\n\n<p>A fairly creative way to do that could be the one below.<br>\nIt is based on the <code>noexcept</code> operator and a trivial <em>using declaration</em> (here named <code>Type</code>).<br>\nSFINAE and partial template specialization do the rest.</p>\n\n<p>It follows a minimal, working example:</p>\n\n<pre><code>#include&lt;type_traits&gt;\n#include&lt;utility&gt;\n\ntemplate&lt;typename T, bool&gt;\nusing Type = T;\n\ntemplate&lt;typename T, typename = T&gt;\nstruct U: std::false_type {};\n\ntemplate&lt;typename T&gt;\nstruct U&lt;T, Type&lt;T, noexcept(std::declval&lt;T&gt;().f(42))&gt;&gt;: std::true_type {};\n\nstruct S { void f(int) {} };\nstruct T {};\n\nint main() {\n    static_assert(U&lt;S&gt;::value, \"!\");\n    static_assert(not U&lt;T&gt;::value, \"!\");\n}\n</code></pre>\n\n<p>This solution has a <em>problem</em> if compared to the others.<br>\nAs an example, the struct below would pass the test as well:</p>\n\n<pre><code>struct R { int f(double) {} };\n</code></pre>\n\n<p>In other terms, as long as the function to be tested accepts one argument to the type of which 42 can be cast and no matter what's the return type, it is accepted.</p>\n"}, {"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 1, "last_activity_date": 1473512663, "creation_date": 1473512663, "answer_id": 39426342, "question_id": 36320057, "link": "https://stackoverflow.com/questions/36320057/other-ways-of-checking-if-a-class-has-a-certain-member-function/39426342#39426342", "title": "Other ways of checking if a class has a certain member function", "body": "<blockquote>\n  <p>Can someone think of a way that is vastly different (or at least fairly creative) than the 5 ways I mention here?</p>\n</blockquote>\n\n<p>A fairly creative way to do that could be the one below.<br>\nIt doesn't exploit any unevaluated context. Instead, it relies on a trivial <em>using declaration</em> (here named <code>Type</code>) and that's all.<br>\nSFINAE and partial template specialization do the rest.</p>\n\n<p>It follows a minimal, working example:</p>\n\n<pre><code>#include&lt;type_traits&gt;\n\ntemplate&lt;typename T, void(T::*)(int)&gt;\nusing Type = T;\n\ntemplate&lt;typename T, typename = T&gt;\nstruct U: std::false_type {};\n\ntemplate&lt;typename T&gt;\nstruct U&lt;T, Type&lt;T, &amp;T::f&gt;&gt;: std::true_type {};\n\nstruct S { void f(int) {} };\nstruct R { int f(double) { return 42; } };\nstruct T {};\n\nint main() {\n    static_assert(U&lt;S&gt;::value, \"!\");\n    static_assert(not U&lt;R&gt;::value, \"!\");\n    static_assert(not U&lt;T&gt;::value, \"!\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 1, "last_activity_date": 1473514252, "creation_date": 1473514252, "answer_id": 39426569, "question_id": 36320057, "link": "https://stackoverflow.com/questions/36320057/other-ways-of-checking-if-a-class-has-a-certain-member-function/39426569#39426569", "title": "Other ways of checking if a class has a certain member function", "body": "<blockquote>\n  <p>Can someone think of a way that is vastly different (or at least fairly creative) than the 5 ways I mention here?</p>\n</blockquote>\n\n<p>A fairly creative way to do that could be the one below.<br>\nIt is based on function template and overloading. If you know how tag dispatching works, it should be pretty straightforward to understand.</p>\n\n<p>It follows a minimal, working example:</p>\n\n<pre><code>#include&lt;type_traits&gt;\n#include&lt;cstddef&gt;\n\ntemplate&lt;typename T, void(T::*)(int) = &amp;T::f&gt;\nconstexpr std::true_type f(int) { return {}; }\n\ntemplate&lt;typename T&gt;\nconstexpr std::false_type f(char) { return {}; }\n\ntemplate&lt;typename T&gt;\nconstexpr auto detect() { return f&lt;T&gt;(0); }\n\nstruct S { void f(int) {} };\nstruct R { int f(double) { return 42; } };\nstruct T {};\n\nint main() {\n    static_assert(detect&lt;S&gt;(), \"!\");\n    static_assert(not detect&lt;R&gt;(), \"!\");\n    static_assert(not detect&lt;T&gt;(), \"!\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 0, "last_activity_date": 1475397275, "last_edit_date": 1475397275, "creation_date": 1475360769, "answer_id": 39812028, "question_id": 36320057, "link": "https://stackoverflow.com/questions/36320057/other-ways-of-checking-if-a-class-has-a-certain-member-function/39812028#39812028", "title": "Other ways of checking if a class has a certain member function", "body": "<blockquote>\n  <p>Can someone think of a way that is vastly different (or at least fairly creative) than the 5 ways I mention here?</p>\n</blockquote>\n\n<p>If you can use C++14, another way of check if a class has a member variable is by means if template variables.<br>\nAs an example:</p>\n\n<pre><code>template&lt;typename T, typename = void&gt;\nconstexpr bool has_foo = false;\n\ntemplate&lt;typename T&gt;\nconstexpr bool has_foo&lt;T, decltype(std::declval&lt;T&gt;().foo(), void())&gt; = true;\n</code></pre>\n\n<p>I guess it's probably one of the more compact solution at least.</p>\n\n<p>It follows a minimal, working example:</p>\n\n<pre><code>#include&lt;utility&gt;\n\ntemplate&lt;typename T, typename = void&gt;\nconstexpr bool has_f = false;\n\ntemplate&lt;typename T&gt;\nconstexpr bool has_f&lt;T, decltype(std::declval&lt;T&gt;().f(0), void())&gt; = true;\n\nstruct S { void f(int) {} };\nstruct T {};\n\nint main() {\n    static_assert(has_f&lt;S&gt;, \"!\");\n    static_assert(not has_f&lt;T&gt;, \"!\");\n}\n</code></pre>\n"}], "owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 2, "answer_count": 5, "score": 7, "last_activity_date": 1475397275, "creation_date": 1459373242, "last_edit_date": 1459375067, "question_id": 36320057, "link": "https://stackoverflow.com/questions/36320057/other-ways-of-checking-if-a-class-has-a-certain-member-function", "title": "Other ways of checking if a class has a certain member function", "body": "<p>Let's check if</p>\n\n<pre><code>struct Thing {\n    int foo(double, bool) {return 0;}\n};\n</code></pre>\n\n<p>has the <code>int foo(double, bool)</code> member function during compile time.  There are many ways of doing this, and most are just variations of others.  Can someone think of a way that is vastly different (or at least fairly creative) than the 5 ways I mention here?  I'm just trying to learn some new techniques with templates and SFINAE.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\n// Using void_t (this includes using std::is_detected).\ntemplate &lt;typename T&gt;\nusing void_t = void;\n\ntemplate &lt;typename T, typename = void&gt;\nstruct has_foo : std::false_type {};\n\ntemplate &lt;typename T&gt;\nstruct has_foo&lt;T,\n        void_t&lt;decltype(static_cast&lt;int&gt;(std::declval&lt;T&gt;().foo(double{}, bool{})))&gt;\n    &gt; : std::true_type {};\n\n// Using the ... default argument.\ntemplate &lt;typename T&gt;\nstruct hasfoo {\n    template &lt;typename U&gt;\n    static std::true_type test (decltype(static_cast&lt;int(T::*)(double, bool)&gt;(&amp;T::foo))*);  // or 'decltype(static_cast&lt;int&gt;(std::declval&lt;U&gt;().foo(double{}, bool{})))*' works fine too.\n\n    template &lt;typename&gt;\n    static std::false_type test (...);\n\n    static constexpr bool value = decltype(test&lt;T&gt;(nullptr))::value;\n};\n\n// Overloads and trailing return types.\ntemplate &lt;typename&gt;\nstruct Helper : std::true_type {};\n\ntemplate &lt;typename T&gt;\nauto helper(int) -&gt; Helper&lt;decltype(static_cast&lt;int&gt;(std::declval&lt;T&gt;().foo(double{}, bool{})))&gt;;\n\ntemplate &lt;typename&gt;\nstd::false_type helper(long);\n\ntemplate &lt;typename T&gt;\nconstexpr bool hasFoo() {return decltype(helper&lt;T&gt;(0))::value;}\n\n// Comma operator (basically the same as the above).\ntemplate &lt;typename T&gt;\nauto check(int) -&gt; decltype(static_cast&lt;int&gt;(std::declval&lt;T&gt;().foo(double{}, bool{})), std::true_type{});\n\ntemplate &lt;typename T&gt;\nstd::false_type check(...);\n\ntemplate &lt;typename T&gt;\nusing HasFoo = decltype(check&lt;T&gt;(0));\n\n// Member function pointer template parameter.\ntemplate &lt;typename T&gt;\nstruct Hasfoo {\n    template &lt;typename U, int(U::*)(double, bool)&gt;\n    struct Tag;\n\n    template &lt;typename U&gt;\n    static constexpr bool test (Tag&lt;U, &amp;U::foo&gt;*) {return true;}\n\n    template &lt;typename&gt;\n    static constexpr bool test (...) {return false;}\n\n    static constexpr bool value = test&lt;T&gt;(nullptr);\n};\n\n// Tests\nstruct Thing {\n    int foo(double, bool) {return 0;}\n};\n\nint main() {\n    static_assert (has_foo&lt;Thing&gt;::value, \"\");\n    static_assert (hasfoo&lt;Thing&gt;::value, \"\");\n    static_assert (hasFoo&lt;Thing&gt;(), \"\");\n    static_assert (HasFoo&lt;Thing&gt;::value, \"\");\n}\n</code></pre>\n\n<p>Edit:  I just remembered an elegant and more general solution that Yakk gave to a different question quite a while ago (here is his actual typing, modified only to match the foo function):</p>\n\n<pre><code>namespace meta {\n  namespace details {\n    template&lt;template&lt;class...&gt;class Z, class=void, class...Ts&gt;\n    struct can_apply : std::false_type {};\n    template&lt;template&lt;class...&gt;class Z, class...Ts&gt;\n    struct can_apply&lt;Z, decltype((void)(std::declval&lt;Z&lt;Ts...&gt;&gt;())), Ts...&gt;:\n      std::true_type\n    {};\n  }\n  template&lt;template&lt;class...&gt;class Z, class...Ts&gt;\n  using can_apply = details::can_apply&lt;Z,void,Ts...&gt;;\n}\n\ntemplate&lt;class T&gt;\nusing member_foo = decltype(static_cast&lt;int(T::*)(double, bool)&gt;(&amp;T::foo));\n\ntemplate&lt;class T&gt;\nusing has_member_foo = meta::can_apply&lt;member_foo, T&gt;;\n</code></pre>\n"}, {"tags": ["c++", "template-classes"], "comments": [{"owner": {"reputation": 16376, "user_id": 2009616, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oiCJA.jpg?s=128&g=1", "display_name": "isedev", "link": "https://stackoverflow.com/users/2009616/isedev"}, "edited": false, "score": 4, "creation_date": 1459373168, "post_id": 36320033, "comment_id": 60263380, "body": "template specialisation?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 16376, "user_id": 2009616, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oiCJA.jpg?s=128&g=1", "display_name": "isedev", "link": "https://stackoverflow.com/users/2009616/isedev"}, "edited": false, "score": 1, "creation_date": 1459373334, "post_id": 36320033, "comment_id": 60263464, "body": "@isedev, I would prefer overloading."}, {"owner": {"reputation": 33, "user_id": 6055592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de567a75765017397c09a09583b59823?s=128&d=identicon&r=PG&f=1", "display_name": "Iriketurtles", "link": "https://stackoverflow.com/users/6055592/iriketurtles"}, "reply_to_user": {"reputation": 16376, "user_id": 2009616, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oiCJA.jpg?s=128&g=1", "display_name": "isedev", "link": "https://stackoverflow.com/users/2009616/isedev"}, "edited": false, "score": 0, "creation_date": 1459373395, "post_id": 36320033, "comment_id": 60263490, "body": "@isedev could you give an example of template specialization ive never used it before."}, {"owner": {"reputation": 16376, "user_id": 2009616, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oiCJA.jpg?s=128&g=1", "display_name": "isedev", "link": "https://stackoverflow.com/users/2009616/isedev"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459373571, "post_id": 36320033, "comment_id": 60263589, "body": "@SergeyA: wouldn&#39;t overloading introduce unnecessary code when <code>K</code> is not a <code>string</code> (inlining and optimisations apart)?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1459373630, "post_id": 36320033, "comment_id": 60263625, "body": "@Iriketurtles this may help explain what isedev writes of: <a href=\"http://en.cppreference.com/w/cpp/language/template_specialization\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/template_specialization</a>"}, {"owner": {"reputation": 16376, "user_id": 2009616, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oiCJA.jpg?s=128&g=1", "display_name": "isedev", "link": "https://stackoverflow.com/users/2009616/isedev"}, "edited": false, "score": 0, "creation_date": 1459374055, "post_id": 36320033, "comment_id": 60263818, "body": "@lriketurtles: added a (hopefully correct) example as an answer."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6055592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de567a75765017397c09a09583b59823?s=128&d=identicon&r=PG&f=1", "display_name": "Iriketurtles", "link": "https://stackoverflow.com/users/6055592/iriketurtles"}, "edited": false, "score": 0, "creation_date": 1459377039, "post_id": 36320232, "comment_id": 60265074, "body": "Im getting some errors saying unable to match function definition to an existing deceleration"}], "tags": [], "owner": {"reputation": 16376, "user_id": 2009616, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oiCJA.jpg?s=128&g=1", "display_name": "isedev", "link": "https://stackoverflow.com/users/2009616/isedev"}, "is_accepted": false, "score": 0, "last_activity_date": 1459374027, "creation_date": 1459374027, "answer_id": 36320232, "question_id": 36320033, "link": "https://stackoverflow.com/questions/36320033/is-there-a-way-to-check-what-datatype-a-template-is/36320232#36320232", "title": "Is there a way to check what datatype a template is?", "body": "<p>You could use (partial) template specialisation:</p>\n\n<pre><code>// general case\ntemplate &lt;typename K, typename V&gt;\n    int Hash&lt;K, V&gt;::hf(const K&amp; key)\n    {\n        return key*2654435761;\n    }\n\n// string case\ntemplate &lt;typename V&gt;\n    int Hash&lt;std::string, V&gt;::hf(const std::string&amp; key)\n    {\n        return MurmurHash2(key.c_str(), key.size());\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1459429597, "post_id": 36320856, "comment_id": 60290651, "body": "This is different from actual question, when hf is member of the class. There is also no guarantee that comparing <code>typeid()</code> of the same type will yield true."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459442064, "post_id": 36320856, "comment_id": 60299896, "body": "Thanks! <code>hash_code()</code> is guaranteed to be the same for the same types."}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": false, "score": 0, "last_activity_date": 1459442016, "last_edit_date": 1459442016, "creation_date": 1459376829, "answer_id": 36320856, "question_id": 36320033, "link": "https://stackoverflow.com/questions/36320033/is-there-a-way-to-check-what-datatype-a-template-is/36320856#36320856", "title": "Is there a way to check what datatype a template is?", "body": "<p>Here are 2 ways of doing it:</p>\n\n<p>1) Template specialization (making a special case for a template argument (here: <code>std::string</code>))</p>\n\n<pre><code>template&lt;typename K, typename V&gt;\nint Hash(const K&amp; key)\n{\n    return key * 2654435761;\n}\n\ntemplate&lt;typename V&gt;\nint Hash(const std::string&amp; key)\n{\n    return MurmurHash2(key.c_str(), key.size());\n}\n</code></pre>\n\n<p>2) Using <code>typeid</code> to compare the types</p>\n\n<pre><code>template&lt;typename K, typename V&gt;\nint Hash(const K&amp; key)\n{\n    if (typeid(K).hash_code() == typeid(std::string).hash_code())\n        return MurmurHash2(key.c_str(), key.size());\n    return key * 2654435761;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6055592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de567a75765017397c09a09583b59823?s=128&d=identicon&r=PG&f=1", "display_name": "Iriketurtles", "link": "https://stackoverflow.com/users/6055592/iriketurtles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1459442016, "creation_date": 1459373118, "question_id": 36320033, "link": "https://stackoverflow.com/questions/36320033/is-there-a-way-to-check-what-datatype-a-template-is", "title": "Is there a way to check what datatype a template is?", "body": "<p>Say I have the following code:</p>\n\n<pre><code>template&lt;typename K, typename V&gt;\n    int Hash&lt;K, V&gt;::hf(const K&amp; key)\n    {\n        if(K == typeid(string))\n        {\n            return MurmurHash2(key.c_str(), key.size());\n        }\n        else\n        {\n            return key*2654435761;\n        }\n\n}\n</code></pre>\n\n<p>Is it possible to do this in some way? If not could you recommend a method to accomplish the same thing?</p>\n"}, {"tags": ["c++", "c++11", "initialization", "c++14", "atomic"], "answers": [{"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 12, "last_activity_date": 1459373202, "creation_date": 1459373202, "answer_id": 36320050, "question_id": 36320008, "link": "https://stackoverflow.com/questions/36320008/whats-the-default-value-for-a-stdatomic/36320050#36320050", "title": "What&#39;s the default value for a std::atomic?", "body": "<p>[atomics.types.generic]/5 says this about integral specializations:</p>\n\n<blockquote>\n  <p>The atomic integral specializations and the specialization atomic shall have standard layout. They shall each have a <strong>trivial default constructor</strong> and a trivial destructor. They shall each support aggregate\n  initialization syntax.</p>\n</blockquote>\n\n<p>Moreover, the primary template synopsis at the beginning of the same section normatively specifies the default constructor as:</p>\n\n<blockquote>\n<pre><code>atomic() noexcept = default;\n</code></pre>\n</blockquote>\n\n<p>The effects are defined in [atomic.types.operations]/4 as:</p>\n\n<blockquote>\n  <p><em>Effects</em>: leaves the atomic object in an uninitialized state.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 4, "creation_date": 1459386402, "post_id": 36320067, "comment_id": 60267979, "body": "Being uninitialized is actually quite important here. Consider what happens if you mmap a block of shared memory from a database file where you are using atomics for locking each BTree node as you descend the tree structure. You certainly don&#39;t want your code setting the values to zero when you open the file."}], "tags": [], "owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "is_accepted": false, "score": 7, "last_activity_date": 1459373285, "creation_date": 1459373285, "answer_id": 36320067, "question_id": 36320008, "link": "https://stackoverflow.com/questions/36320008/whats-the-default-value-for-a-stdatomic/36320067#36320067", "title": "What&#39;s the default value for a std::atomic?", "body": "<p>\u00a7 29.6.5 [atomics.types.operations.req] \u00b6 4 of N 4140 (the final draft for C++14) says:</p>\n\n<blockquote>\n  <p><code>A ::A () noexcept = default;</code></p>\n  \n  <p><em>Effects:</em> leaves the atomic object in an uninitialized state. [ <em>Note:</em> These semantics ensure compatibility with C. \u2014 <em>end note</em> ]</p>\n</blockquote>\n\n<p>Note that this doesn't mean that the object wraps an unspecified value that you can read but not depend on its value. Rather, it means that reading the value out of the object before assigning to it results in undefined behavior.</p>\n"}], "owner": {"reputation": 9741, "user_id": 358475, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9bb570ac8b5da1eb35541e252f0eca99?s=128&d=identicon&r=PG", "display_name": "OldPeculier", "link": "https://stackoverflow.com/users/358475/oldpeculier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9368, "favorite_count": 3, "accepted_answer_id": 36320050, "answer_count": 2, "score": 15, "last_activity_date": 1459374978, "creation_date": 1459372946, "last_edit_date": 1459374978, "question_id": 36320008, "link": "https://stackoverflow.com/questions/36320008/whats-the-default-value-for-a-stdatomic", "title": "What&#39;s the default value for a std::atomic?", "body": "<p>I find that in practice, with a variety of C++11/C++14 compilers, a <code>std::atomic</code> has an undefined initial value just as it would if it were a \"raw\" type. That is, we expect that for the expression</p>\n\n<pre><code>int a;\n</code></pre>\n\n<p><code>a</code> may have any value. It also turns out to be true that for the expression</p>\n\n<pre><code>std::atomic&lt; int &gt; b;\n</code></pre>\n\n<p><code>b</code> may also have any value. To say it another way,</p>\n\n<pre><code>std::atomic&lt; int &gt; b;         // b is undefined\n</code></pre>\n\n<p>is not equivalent to</p>\n\n<pre><code>std::atomic&lt; int &gt; b{ 0 };    // b == 0\n</code></pre>\n\n<p>or to</p>\n\n<pre><code>std::atomic&lt; int &gt; b{};       // b == 0\n</code></pre>\n\n<p>because in the latter two cases <code>b</code> is initialized to a known value.</p>\n\n<p>My question is simple: where in the C++11 or C++14 spec is this behavior documented?</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1459375471, "creation_date": 1459375471, "answer_id": 36320571, "question_id": 36319797, "link": "https://stackoverflow.com/questions/36319797/how-can-i-identify-a-widget-frame-with-some-sort-of-id/36320571#36320571", "title": "How can I identify a widget (frame) with some sort of ID?", "body": "<p>Since <code>QWidget</code> is a <code>QObject</code>, you can give them unique names (<code>QObject::setName</code>), or assign arbitrary QVariant-valued properties to them, a-la JavaScript (<code>QObject::setProperty</code>). This should allow you to easily keep track of what database fields are mapped to what widget. It's easy enough to add your custom type support to <code>QVariant</code>, see the documentation.</p>\n\n<p>Alternately to dynamic properties, you can have a map between <code>QWidget*</code> and whatever data structure you need to describe the connection.</p>\n\n<p>If you're using a data source through a <code>QAbstractItemModel</code>, then you can also use a <a href=\"http://doc.qt.io/qt-5/qdatawidgetmapper.html\" rel=\"nofollow\"><code>QDataWidgetMapper</code></a> to bind model's data to widgets.</p>\n\n<p>You can also easily bind data from a model to items in QML.</p>\n"}], "owner": {"reputation": 239, "user_id": 6126070, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b8fe52ce19fb64194422ba9b89b14537?s=128&d=identicon&r=PG&f=1", "display_name": "Megatron300", "link": "https://stackoverflow.com/users/6126070/megatron300"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 276, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459375471, "creation_date": 1459372189, "last_edit_date": 1459373171, "question_id": 36319797, "link": "https://stackoverflow.com/questions/36319797/how-can-i-identify-a-widget-frame-with-some-sort-of-id", "title": "How can I identify a widget (frame) with some sort of ID?", "body": "<p>I'm trying to set an ID for each frame on a set of frame, in order to fill them with database information and keep track of which frame is linked with which database information. Here's an idea of what the set of frame will look like : </p>\n\n<p><a href=\"https://i.stack.imgur.com/KncCK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KncCK.png\" alt=\"frame\"></a></p>\n\n<p>What I need, for each of these frames, is to be able to recognize them. For example, we can consider that each frame represent a friend in a friendlist, if I click on one frame and press the delete button, I want to first delete the frame but of course delete the information related on the database, so delete this friend from my list, this is why I need to have an ID on the frame. (In the future, the delete button will be place ON the frame itself, so by clicking on it I will be able to get the parent widget). </p>\n\n<p>In addition, each frame will contain multiple <code>QLabel</code>s (\"One\", \"Two\", \"Three\", \"Four\" in the picture above) and I need to be able to identify them as well, since they will represent database information which can be deleted like the frame. But one problem at a time. </p>\n\n<p>I first thought about hiding a label which would contain the friend ID, but it seems like a bad idea. </p>\n\n<p>I then thought about using a list and associate the frame with an ID, but when clicking on the frame, how will I be able to get back his position on the list ? The frame will have the same position among them on the list than on the window, but then I would need to get their position in the window, which I don't know how to do it. </p>\n\n<p>I hope I'm clear enough. Thanks.</p>\n"}, {"tags": ["c++", "polymorphism"], "comments": [{"owner": {"reputation": 4852, "user_id": 5296568, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/25003db0bef370470e0f669a542960f8?s=128&d=identicon&r=PG&f=1", "display_name": "Maximilian Gerhardt", "link": "https://stackoverflow.com/users/5296568/maximilian-gerhardt"}, "edited": false, "score": 1, "creation_date": 1459372556, "post_id": 36319717, "comment_id": 60263069, "body": "What does it do when you write <code>i = -i;</code> instead if <code>-i;</code>?"}, {"owner": {"reputation": 3, "user_id": 6136919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fgUy.jpg?s=128&g=1", "display_name": "panipuri", "link": "https://stackoverflow.com/users/6136919/panipuri"}, "reply_to_user": {"reputation": 4852, "user_id": 5296568, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/25003db0bef370470e0f669a542960f8?s=128&d=identicon&r=PG&f=1", "display_name": "Maximilian Gerhardt", "link": "https://stackoverflow.com/users/5296568/maximilian-gerhardt"}, "edited": false, "score": 0, "creation_date": 1459434837, "post_id": 36319717, "comment_id": 60294652, "body": "It works that way. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6136919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fgUy.jpg?s=128&g=1", "display_name": "panipuri", "link": "https://stackoverflow.com/users/6136919/panipuri"}, "edited": false, "score": 0, "creation_date": 1459434801, "post_id": 36320006, "comment_id": 60294623, "body": "Also, could I do it calling it by reference?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 3, "user_id": 6136919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fgUy.jpg?s=128&g=1", "display_name": "panipuri", "link": "https://stackoverflow.com/users/6136919/panipuri"}, "edited": false, "score": 0, "creation_date": 1459438039, "post_id": 36320006, "comment_id": 60297107, "body": "You could but it won&#39;t be idiomatic. When you use <code>j = -i;</code>, the value of <code>i</code> is not changed."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1459372934, "creation_date": 1459372934, "answer_id": 36320006, "question_id": 36319717, "link": "https://stackoverflow.com/questions/36319717/unary-operator-overloading-using-friend-function/36320006#36320006", "title": "Unary - operator overloading using friend function", "body": "<p>There are couple of issues that I see in your posted code.</p>\n\n<ol>\n<li><p>The <code>operator-</code> function needs to return an <code>invert_position</code> object. Otherwise, </p>\n\n<pre><code>invert_position i(2,3);\ninvert_position j = -i;\n</code></pre>\n\n<p>is a problem. Think of it similarly to using a fundamental type.</p>\n\n<pre><code>int i = 10;\nint j = -i;  // We expect j to be -10 after this.\n</code></pre>\n\n<p>Hence, what yo need is</p>\n\n<pre><code>invert_position  operator -(invert_position i)\n{\n    i.x=-i.x;\n    i.y=-i.y;\n    return i;\n}\n</code></pre></li>\n<li><p>The line</p>\n\n<pre><code>-i;\n</code></pre>\n\n<p>does not change the value of <code>i</code> in <code>main</code> since <code>operator-</code> gets its argument by value. You need to use:</p>\n\n<pre><code>i = -i;\n</code></pre>\n\n<p>to see the effect of calling the function.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8100749, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/9297daf59c69fe64aa187344715d1299?s=128&d=identicon&r=PG", "display_name": "Dkboss", "link": "https://stackoverflow.com/users/8100749/dkboss"}, "is_accepted": false, "score": 0, "last_activity_date": 1496371194, "last_edit_date": 1496371194, "creation_date": 1496370000, "answer_id": 44319833, "question_id": 36319717, "link": "https://stackoverflow.com/questions/36319717/unary-operator-overloading-using-friend-function/44319833#44319833", "title": "Unary - operator overloading using friend function", "body": "<pre><code>friend invert_position -(invert_position i)\n{        \n     i.x=-i.x;\n     i.y=-i.y;\n     i.z=-i.z;\n     return i;\n}\n</code></pre>\n\n<p>And in main function \ni=-i;\nshould be there because friend function is a non member function so it need to return the values... Thanks</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 9584441, "user_type": "registered", "profile_image": "https://graph.facebook.com/2086248274964805/picture?type=large", "display_name": "Vivek Biswas", "link": "https://stackoverflow.com/users/9584441/vivek-biswas"}, "is_accepted": false, "score": 1, "last_activity_date": 1536903441, "creation_date": 1536903441, "answer_id": 52325553, "question_id": 36319717, "link": "https://stackoverflow.com/questions/36319717/unary-operator-overloading-using-friend-function/52325553#52325553", "title": "Unary - operator overloading using friend function", "body": "<p>This will work too:(Use reference)</p>\n\n<pre><code>#include&lt;iostream&gt;\n//fifty6s\nusing namespace std;\nclass invert_position\n{\n    int x,y;\n    public:\n        invert_position(int a,int b)\n        {\n            x=a;\n            y=b;\n        }\n    void show()\n        {\n            cout&lt;&lt;\"\\nx=\"&lt;&lt;x;\n            cout&lt;&lt;\"\\ny=\"&lt;&lt;y;\n        }\n    friend void operator -(invert_position &amp;);\n};\nvoid operator -(invert_position &amp;i)\n{\n    i.x=-i.x;\n    i.y=-i.y;\n}\nint main()\n{\n    invert_position i(2,3);\n    -i;\n    i.show();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6136919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fgUy.jpg?s=128&g=1", "display_name": "panipuri", "link": "https://stackoverflow.com/users/6136919/panipuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10223, "favorite_count": 1, "accepted_answer_id": 36320006, "answer_count": 3, "score": 0, "last_activity_date": 1536903441, "creation_date": 1459371891, "question_id": 36319717, "link": "https://stackoverflow.com/questions/36319717/unary-operator-overloading-using-friend-function", "title": "Unary - operator overloading using friend function", "body": "<p>I have written this code in an attempt to perform overloading on the unary operator - using a friend function. Somehow, there is no effect on the inital values I've passed.</p>\n\n<pre><code>#include&lt;iostream&gt;\n//fifty6s\nusing namespace std;\nclass invert_position\n{\n    int x,y;\n    public:\n        invert_position(int a,int b)\n        {\n        x=a;\n        y=b;\n        }\n    void show()\n        {\n            cout&lt;&lt;\"\\nx=\"&lt;&lt;x;\n            cout&lt;&lt;\"\\ny=\"&lt;&lt;y;\n        }\n    friend void operator -(invert_position);\n};\nvoid operator -(invert_position i)\n{\n    i.x=-i.x;\n    i.y=-i.y;\n}\nint main()\n{\n    invert_position i(2,3);\n    -i;\n    i.show();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "regex", "string"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1459371924, "post_id": 36319706, "comment_id": 60262731, "body": "Use <code>std::regex_search</code>. I am linking to the post showing the code returning multiple matches found in the input string. If you have any trouble implementing that, feel free to drop a comment."}, {"owner": {"reputation": 537, "user_id": 3817017, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ad512c49cfe3d37149cd207c75f2fb2a?s=128&d=identicon&r=PG&f=1", "display_name": "Floris", "link": "https://stackoverflow.com/users/3817017/floris"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1459372701, "post_id": 36319706, "comment_id": 60263152, "body": "Sorry I&#39;ve never used C++ before so I&#39;m having a really hard time here. I see that this function takes an object with a type of std::regex? But the pattern object is supplied as type string like this &#39;std::string pattern&#39; in the function definition. Can I also loop through it using the p1 != std::string::npos?  P.s. I also don&#39;t see how my question is a duplicate because the other question isn&#39;t about string::find?"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1459373020, "post_id": 36319706, "comment_id": 60263304, "body": "What is your goal? What exactly do you need? Right now, you ask for a piece of code that will find and count all substrings in a string that match a specific regex pattern. The post I linked to shows how to do it (<code>std::sregex_iterator</code> solution looks best IMHO). What else? <b><code>string::find</code> does not support regex</b>, so the post I linked to is a valid dupe source."}, {"owner": {"reputation": 537, "user_id": 3817017, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ad512c49cfe3d37149cd207c75f2fb2a?s=128&d=identicon&r=PG&f=1", "display_name": "Floris", "link": "https://stackoverflow.com/users/3817017/floris"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1459373485, "post_id": 36319706, "comment_id": 60263542, "body": "Yes, that&#39;s exactly what I&#39;m asking. I see how your post might answer my question but I have no clue how to implement your code there into my problem as I&#39;ve never looked at C++ code until today. For example how do I go from std::string to std::regex?"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1459373617, "post_id": 36319706, "comment_id": 60263620, "body": "Please provide an <a href=\"http://stackoverflow.com/help/mcve\">MVCE (minimal complete verifiable example)</a>. At least some input and expected output."}, {"owner": {"reputation": 537, "user_id": 3817017, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ad512c49cfe3d37149cd207c75f2fb2a?s=128&d=identicon&r=PG&f=1", "display_name": "Floris", "link": "https://stackoverflow.com/users/3817017/floris"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1459376256, "post_id": 36319706, "comment_id": 60264764, "body": "I&#39;m struggling with this because I cannot get any code to work on the site I saw you linked in your other post (<a href=\"https://ideone.com/GVPhl9\" rel=\"nofollow noreferrer\">ideone.com/GVPhl9</a>). Everything I try results in compilation error without message.. Input would be a string eg &quot;ABCDEABCABD&quot; and pattern string (has to be a string because thats the argument from the program, it could be converted to whatever if needed..) eg &quot;A|D&quot; and the output should be the count, in this case 5."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1459376507, "post_id": 36319706, "comment_id": 60264855, "body": "See <a href=\"http://ideone.com/YzXgQN\" rel=\"nofollow noreferrer\">this demo</a>."}, {"owner": {"reputation": 537, "user_id": 3817017, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ad512c49cfe3d37149cd207c75f2fb2a?s=128&d=identicon&r=PG&f=1", "display_name": "Floris", "link": "https://stackoverflow.com/users/3817017/floris"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1459376860, "post_id": 36319706, "comment_id": 60265000, "body": "Thanks a lot, that&#39;s almost it. The only thing is that in the function I&#39;m trying to change, &quot;expression&quot; is supplied as a std::string. How can I convert this to a std::regex? See here: <a href=\"http://ideone.com/JILmxf\" rel=\"nofollow noreferrer\">ideone.com/JILmxf</a>. If you want to make this an official answer I can accept it for you. Thanks."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1459377340, "post_id": 36319706, "comment_id": 60265189, "body": "I added an answer. Sorry, I ran out of votes for today, and I need to go to bed. I will upvote the question tomorrow."}, {"owner": {"reputation": 7515, "user_id": 5249858, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/900942861bfbfdd27433e3ccbf7d6d0f?s=128&d=identicon&r=PG&f=1", "display_name": "3442", "link": "https://stackoverflow.com/users/5249858/3442"}, "edited": false, "score": 0, "creation_date": 1459377400, "post_id": 36319706, "comment_id": 60265211, "body": "Although yours is a valid question, take into account that <a href=\"http://programmers.stackexchange.com/a/223640/197286\">regular expressions are not a good solution most of the time</a>. You should only use them if they&#39;re the right tool, and they aren&#39;t here."}, {"owner": {"reputation": 537, "user_id": 3817017, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ad512c49cfe3d37149cd207c75f2fb2a?s=128&d=identicon&r=PG&f=1", "display_name": "Floris", "link": "https://stackoverflow.com/users/3817017/floris"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1459377756, "post_id": 36319706, "comment_id": 60265343, "body": "@WiktorStribi\u017cew Thanks. I also updated the question to make it more clear (and managed to get working code on IDEONE)"}, {"owner": {"reputation": 537, "user_id": 3817017, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ad512c49cfe3d37149cd207c75f2fb2a?s=128&d=identicon&r=PG&f=1", "display_name": "Floris", "link": "https://stackoverflow.com/users/3817017/floris"}, "reply_to_user": {"reputation": 7515, "user_id": 5249858, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/900942861bfbfdd27433e3ccbf7d6d0f?s=128&d=identicon&r=PG&f=1", "display_name": "3442", "link": "https://stackoverflow.com/users/5249858/3442"}, "edited": false, "score": 0, "creation_date": 1459377763, "post_id": 36319706, "comment_id": 60265347, "body": "@KemyLand what would be better?"}, {"owner": {"reputation": 537, "user_id": 3817017, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ad512c49cfe3d37149cd207c75f2fb2a?s=128&d=identicon&r=PG&f=1", "display_name": "Floris", "link": "https://stackoverflow.com/users/3817017/floris"}, "reply_to_user": {"reputation": 7515, "user_id": 5249858, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/900942861bfbfdd27433e3ccbf7d6d0f?s=128&d=identicon&r=PG&f=1", "display_name": "3442", "link": "https://stackoverflow.com/users/5249858/3442"}, "edited": false, "score": 0, "creation_date": 1459467918, "post_id": 36319706, "comment_id": 60312895, "body": "@KemyLand if you have solution in mind that does not use regex I can ask another question for you to answer. Since I&#39;m doing this several million (billion) times I&#39;m noticing a clear performance decrease using regex vs while loop + string::find."}, {"owner": {"reputation": 537, "user_id": 3817017, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ad512c49cfe3d37149cd207c75f2fb2a?s=128&d=identicon&r=PG&f=1", "display_name": "Floris", "link": "https://stackoverflow.com/users/3817017/floris"}, "edited": false, "score": 0, "creation_date": 1459524179, "post_id": 36319706, "comment_id": 60339637, "body": "Multiple threads of this code have been running for 12+ hours and are still working, so I&#39;m now looking for a faster solution. New question here: <a href=\"http://stackoverflow.com/questions/36360005/c-multiple-string-matching-without-using-regex\" title=\"c multiple string matching without using regex\">stackoverflow.com/questions/36360005/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 368, "user_id": 3994640, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002605086107/picture?type=large", "display_name": "psykid", "link": "https://stackoverflow.com/users/3994640/psykid"}, "edited": false, "score": 0, "creation_date": 1607632209, "post_id": 36320911, "comment_id": 115341142, "body": "what if I want the matched string as well?"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 368, "user_id": 3994640, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002605086107/picture?type=large", "display_name": "psykid", "link": "https://stackoverflow.com/users/3994640/psykid"}, "edited": false, "score": 0, "creation_date": 1607632383, "post_id": 36320911, "comment_id": 115341219, "body": "@psykid Then you should have a look at the right thread, like <a href=\"https://stackoverflow.com/questions/21667295/how-to-match-multiple-results-using-stdregex\">How to match multiple results using std::regex</a>"}], "tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 5, "last_activity_date": 1459377102, "creation_date": 1459377102, "answer_id": 36320911, "question_id": 36319706, "link": "https://stackoverflow.com/questions/36319706/c-regex-equivalent-for-stringfind/36320911#36320911", "title": "C++ regex equivalent for string::find", "body": "<p>You may leverage the following C++ code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;regex&gt;\nusing namespace std;\n\nint main() {\n    std::string pattern(\"A|D\");         // Regex expression\n    std::regex rx(pattern);             // Getting the regex object \n\n    std::string s(\"ABCDEABCABD\");       // Defining the string input\n    std::ptrdiff_t number_of_matches = std::distance(  // Count the number of matches inside the iterator\n        std::sregex_iterator(s.begin(), s.end(), rx),\n        std::sregex_iterator());\n\n    std::cout &lt;&lt; number_of_matches &lt;&lt; std::endl;  // Displaying results\n    return 0;\n}\n</code></pre>\n\n<p>See <a href=\"http://ideone.com/YzXgQN\" rel=\"noreferrer\">IDEONE demo</a></p>\n\n<p>Note that:</p>\n\n<ul>\n<li>If pattern can contain literal strings with special characters they might need escaping.</li>\n<li><a href=\"http://en.cppreference.com/w/cpp/iterator/distance\" rel=\"noreferrer\"><code>std::distance</code></a> is a function that <em>returns the number of elements between <code>first</code> and <code>last</code></em>, the number of elements the iterator yields.</li>\n</ul>\n"}], "owner": {"reputation": 537, "user_id": 3817017, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ad512c49cfe3d37149cd207c75f2fb2a?s=128&d=identicon&r=PG&f=1", "display_name": "Floris", "link": "https://stackoverflow.com/users/3817017/floris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8378, "favorite_count": 2, "accepted_answer_id": 36320911, "answer_count": 1, "score": 4, "last_activity_date": 1459377551, "creation_date": 1459371864, "last_edit_date": 1459377551, "question_id": 36319706, "link": "https://stackoverflow.com/questions/36319706/c-regex-equivalent-for-stringfind", "title": "C++ regex equivalent for string::find", "body": "<p>I'm trying to edit an open source C++ program to make a simple adjustment so that one of the input's accepts a regexp string instead of a string. I'm a complete C++ noob (never written anything) so I'm hoping someone can point me to a function that will work. Take the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main() {\n    std::string str1(\"ABCDEABCABD\");\n    std::string pattern(\"A\");\n\n    int count1 = 0;\n\n    size_t p1 = str1.find(pattern, 0);\n    while(p1 != std::string::npos)\n    {\n        p1 = str1.find(pattern,p1+pattern.size());\n        count1 += 1;\n    }\n\n    std::cout &lt;&lt; count1 &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I would like 'pattern' to accept a regular expression of several patterns seperated by the pipe sign, eg 'A|D' (which would output 5 in this case).</p>\n\n<p>From what I gather from <a href=\"http://www.cplusplus.com/reference/string/string/find/\" rel=\"nofollow\">this C++ reference page</a>, you cannot supply a regular expression like this to the string::find function. What function can I put here instead?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "lambda", "functional-programming", "c++14"], "answers": [{"comments": [{"owner": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "edited": false, "score": 1, "creation_date": 1459372577, "post_id": 36319664, "comment_id": 60263078, "body": "Don&#39;t forget about uniform initialization: <code>TypeName variableName{};</code> and <code>TypeName variableName{arg1, arg2, ...};</code>"}, {"owner": {"reputation": 104340, "user_id": 23649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=128&d=identicon&r=PG", "display_name": "jtbandes", "link": "https://stackoverflow.com/users/23649/jtbandes"}, "reply_to_user": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "edited": false, "score": 0, "creation_date": 1459372595, "post_id": 36319664, "comment_id": 60263092, "body": "Thanks, I&#39;ll add that."}], "tags": [], "owner": {"reputation": 104340, "user_id": 23649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=128&d=identicon&r=PG", "display_name": "jtbandes", "link": "https://stackoverflow.com/users/23649/jtbandes"}, "is_accepted": false, "score": 4, "last_activity_date": 1459372744, "last_edit_date": 1459372744, "creation_date": 1459371703, "answer_id": 36319664, "question_id": 36319644, "link": "https://stackoverflow.com/questions/36319644/passing-lambda-as-a-constructor-argument/36319664#36319664", "title": "passing lambda as a constructor argument", "body": "<p>The syntax for passing constructor arguments in a variable declaration is:</p>\n\n<pre><code>A a(q);\n</code></pre>\n\n<p>More generally, the different ways of declaring variables are:</p>\n\n<pre><code>TypeName <b>variableName</b>;    // no arguments\nTypeName <b>variableName</b>();  // WRONG: this is a <i>function</i> declaration\nTypeName <b>variableName</b>(<i>arg1</i>, <i>arg2</i>, ...);</code></pre>\n\n<p>And with C++11 <a href=\"http://www.stroustrup.com/C++11FAQ.html#uniform-init\" rel=\"nofollow\">uniform initialization</a>:</p>\n\n<pre><code>TypeName <b>variableName</b>{};  // no arguments\nTypeName <b>variableName</b>{<i>arg1</i>, <i>arg2</i>, ...};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": false, "score": 2, "last_activity_date": 1459371726, "creation_date": 1459371726, "answer_id": 36319671, "question_id": 36319644, "link": "https://stackoverflow.com/questions/36319644/passing-lambda-as-a-constructor-argument/36319671#36319671", "title": "passing lambda as a constructor argument", "body": "<p>The correct syntax for initializing an object <code>a</code> with parameter <code>q</code> is</p>\n\n<pre><code>A a(q);\n</code></pre>\n\n<p>not</p>\n\n<pre><code>A(q) a;\n</code></pre>\n"}], "owner": {"reputation": 447, "user_id": 2598608, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/0dFLL.png?s=128&g=1", "display_name": "Scott Tiger", "link": "https://stackoverflow.com/users/2598608/scott-tiger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1487, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1459372744, "creation_date": 1459371616, "question_id": 36319644, "link": "https://stackoverflow.com/questions/36319644/passing-lambda-as-a-constructor-argument", "title": "passing lambda as a constructor argument", "body": "<p>I am trying to store a callback function in a class, so I can create different instances with different callback. Unfortunately stackoverflow forces me to write more useless stuff, saying my post is mostly code. However I don't see any troubles instantly understand my question by looking at the code below.</p>\n\n<p>Can't understand why this doesn't work:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nclass A {\n    public:\n        A(std::function&lt;void()&gt; lambda) : lambda_{lambda} {};\n        void Run() { lambda_(); };\n    private:\n        std::function&lt;void()&gt; lambda_;\n};\n\nauto main() -&gt; int {\n    auto q = []{};    \n    A(q) a;                                                                                                                                                                                                        \n    a.Run();\n}\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>1.cpp:15:10: error: expected \u2018;\u2019 before \u2018a\u2019\n     A(q) a;\n          ^\n</code></pre>\n\n<p>While this does:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nvoid A(std::function&lt;void()&gt; lambda) {\n    lambda(); \n};\n\nauto main() -&gt; int {\n    auto q = []{};\n\n    A(q);\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "variadic-templates"], "owner": {"reputation": 41, "user_id": 2553655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59e15fa28b8b563e93b48928856e2858?s=128&d=identicon&r=PG", "display_name": "js7222", "link": "https://stackoverflow.com/users/2553655/js7222"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1459372408, "answer_count": 0, "score": 1, "last_activity_date": 1459371591, "creation_date": 1459371591, "question_id": 36319635, "link": "https://stackoverflow.com/questions/36319635/using-braces-with-parameter-packs-in-c11", "closed_reason": "Duplicate", "title": "Using braces with parameter packs in c++11", "body": "<p>I'm trying to determine the rules for passing a template argument as a parameter or single argument. Depending on how the brackets are specified seems to determine whether the ... is required when passing the templated type to std::forward.</p>\n\n<pre><code>void test(int)\n{\n\n}\n\ntemplate&lt;class... Args&gt;\nvoid foobar(Args&amp;&amp;... args)\n{\n  test(std::forward&lt;Args...&gt;(args)...);\n  test(std::forward&lt;Args&gt;(args)...);\n  test(std::forward&lt;Args...&gt;((args)...));\n  test(std::forward&lt;Args&gt;((args)...)); // doesn't compile\n}\n\nint main()\n{\n  int x = 5;\n  foobar(x);\n}  \n</code></pre>\n\n<p>clang gives the following when trying to compile\nerror: parameter packs not expanded with \u2018...\u2019:\n   test(std::forward((args)...));</p>\n"}, {"tags": ["c++", "class", "virtual"], "comments": [{"owner": {"reputation": 313, "user_id": 6029600, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/21a1bef92988f747a86c72818b947ece?s=128&d=identicon&r=PG&f=1", "display_name": "Q_A", "link": "https://stackoverflow.com/users/6029600/q-a"}, "edited": false, "score": 0, "creation_date": 1459371617, "post_id": 36319479, "comment_id": 60262567, "body": "I didn&#39;t know I could do that. So would I be correct in saying that with public inheritance all of Derived1,2,3 will have access the func() implemented in Base unless they declare it in their own classes, in which case, the new declaration is used."}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1459372133, "post_id": 36319479, "comment_id": 60262843, "body": "That&#39;s correct, except that they&#39;d still have access even with private inheritance (though the method wouldn&#39;t be visible outside the derived classes), and even when overridden in a derived class, the base method can still be explicitly called if desired."}, {"owner": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "edited": false, "score": 0, "creation_date": 1459372606, "post_id": 36319479, "comment_id": 60263102, "body": "Could it be something like the code that follows where you define virtual the function only in Derived1 ?"}, {"owner": {"reputation": 313, "user_id": 6029600, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/21a1bef92988f747a86c72818b947ece?s=128&d=identicon&r=PG&f=1", "display_name": "Q_A", "link": "https://stackoverflow.com/users/6029600/q-a"}, "reply_to_user": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1459373019, "post_id": 36319479, "comment_id": 60263300, "body": "@Cameron. Thanks. What syntax would I use to call the Base method even when its been overridden?"}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1459380898, "post_id": 36319479, "comment_id": 60266407, "body": "@Q_A: See user1708860 and mman&#39;s answers. You prefix the base class name to to specify that you wish to call that specific method, resulting in a non-virtual call to that (otherwise virtual) method."}], "answers": [{"comments": [{"owner": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459371528, "post_id": 36319533, "comment_id": 60262519, "body": "@SergeyA, He may need to do more things in the function, even though he did not specify that in the question."}], "tags": [], "owner": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "is_accepted": false, "score": 1, "last_activity_date": 1459371469, "last_edit_date": 1459371469, "creation_date": 1459371313, "answer_id": 36319533, "question_id": 36319479, "link": "https://stackoverflow.com/questions/36319479/c-conditional-virtual-functions/36319533#36319533", "title": "C++ - Conditional virtual functions", "body": "<p><strong>Edit</strong></p>\n\n<p>This will work, but unless you need more work done in the function, @Cameron's answer is the correct one.</p>\n\n<p>You can call the base function from the derived function like so:</p>\n\n<pre><code>class Base\n{\npublic:\n   virtual void foo() { /* Do something */ };\n};\n\nclass Derived1 : public Base\n{\npublic:\n   virtual void foo() { /* Do something else */ };\n};\n\nclass Derived2 : public Base\n{\npublic:\n   virtual void foo() { Base::foo(); /* Do something */ };\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459371415, "post_id": 36319559, "comment_id": 60262452, "body": "They do not need to do <b>anything</b> about it (not sure what you mean by &#39;redeclare&#39;)."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459371500, "post_id": 36319559, "comment_id": 60262501, "body": "@SergeyA: What&#39;s unclear? Seems like a perfectly sensible description."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1459371603, "post_id": 36319559, "comment_id": 60262558, "body": "@KerrekSB, we usually use the word &#39;override&#39;. &#39;Redeclaration&#39; is not something which is specified in standard. And if you literally construct it from standard-defined &#39;declaration&#39; and &#39;re&#39;, you will end up with the wrong thing altogether, because nothing can be declared again in the same translation unit."}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1459371614, "post_id": 36319559, "comment_id": 60262566, "body": "I mean redeclare in the sense they each (re)declare <code>func</code> in order to define a different virtual implementation of it for their class."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459371701, "post_id": 36319559, "comment_id": 60262615, "body": "@SergeyA: Well, a <i>declaration</i> is something well-defined, and we&#39;re talking about the declaration of a member in a derived class that&#39;s already declared in a base class, so &quot;redeclaration&quot; seems like an appropriate choice of words here. In fact, it&#39;s a choice of words that describes just how one would go about not overriding something."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459371704, "post_id": 36319559, "comment_id": 60262617, "body": "@Cameron, I suggest avoiding this term."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1459371748, "post_id": 36319559, "comment_id": 60262643, "body": "@KerrekSB, exactly - see updates to my comment. But you really can&#39;t redeclare anything. It is never possible."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459371778, "post_id": 36319559, "comment_id": 60262656, "body": "Oh, and latest edit is wrong. pure virtual function can easily have definition. Cameron, I think you need a refresher on declaration and definition."}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1459371832, "post_id": 36319559, "comment_id": 60262684, "body": "I&#39;m going to take a radical stand and not get pulled into a discussion on which term is better :-) I use both in my answer in an attempt to be clear, even to those learning OOP."}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459371855, "post_id": 36319559, "comment_id": 60262698, "body": "@SergeyA: Ah yes, of course you&#39;re right about the pure virtual definition. A favourite for destructors. I do know the difference between a declaration and a definition, by the way -- I often work with C++ parsers all day!"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1459372842, "post_id": 36319559, "comment_id": 60263219, "body": "@Cameron: Even a pure virtual function needn&#39;t be overridden. It only needs to be overridden in a <i>non-abstract</i> derived class."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1459373188, "post_id": 36319559, "comment_id": 60263386, "body": "@KerrekSB, I do not see any redeclaration, I see a repetition of the same declaration. Now it&#39;s a liguistic thing - if repetition of the same thing (in plain English grammar) is a redeclaration or not. I hate linguistic arguments, and this is exactly why I wanted OP to stop using this word with undefined meaning."}], "tags": [], "owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "is_accepted": false, "score": 6, "last_activity_date": 1459380653, "last_edit_date": 1459380653, "creation_date": 1459371380, "answer_id": 36319559, "question_id": 36319479, "link": "https://stackoverflow.com/questions/36319479/c-conditional-virtual-functions/36319559#36319559", "title": "C++ - Conditional virtual functions", "body": "<p>A virtual function does not <em>have</em> to be overridden. <code>Derived1</code> and <code>Derived2</code> can just not redeclare <code>func()</code>.</p>\n\n<p>Only a <em>pure virtual</em> function (declared with <code>= 0</code>) must be overridden by (non-abstract) derived classes.</p>\n"}, {"tags": [], "owner": {"reputation": 352, "user_id": 6083839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ddd7143a0a7ee28e38c9ce3a52b1135?s=128&d=identicon&r=PG&f=1", "display_name": "mantlabs", "link": "https://stackoverflow.com/users/6083839/mantlabs"}, "is_accepted": false, "score": 0, "last_activity_date": 1459371528, "creation_date": 1459371528, "answer_id": 36319614, "question_id": 36319479, "link": "https://stackoverflow.com/questions/36319479/c-conditional-virtual-functions/36319614#36319614", "title": "C++ - Conditional virtual functions", "body": "<p>Just call inside the func() of Derived1 and Derived2 the Base func() like this</p>\n\n<pre><code>Base::func();\n</code></pre>\n\n<p>Derived3 func() can have a different implementation.</p>\n"}, {"tags": [], "owner": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "is_accepted": false, "score": 1, "last_activity_date": 1459372715, "creation_date": 1459372715, "answer_id": 36319942, "question_id": 36319479, "link": "https://stackoverflow.com/questions/36319479/c-conditional-virtual-functions/36319942#36319942", "title": "C++ - Conditional virtual functions", "body": "<p>Have you thought to define as virtual func only in derived1 ?</p>\n\n<p>The code that follows works like that ( is that what you intended ? )</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define X\n\n\nclass Base {\n\n public:\n  void func();\n};\n\n\nvoid Base::func() {\n    printf(\"Base\\n\");\n}\n\nclass Derived1 : public Base {\n public:\n  virtual void func();\n};\n\nvoid Derived1::func() { \n    printf(\"derived1\\n\"); \n};\n\nclass Derived2 : public Base {\n public:\n};\n\nclass Derived3 : public Base {\n public:\n};\n\nint main(int argc, char **argv)\n{\n    Base b;\n    Derived1 d1;\n    Derived2 d2;\n    Derived3 d3;\n\n    b.func();\n    d1.func();\n    d2.func();\n    d3.func();\n\n    printf(\"hello world\\n\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 6029600, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/21a1bef92988f747a86c72818b947ece?s=128&d=identicon&r=PG&f=1", "display_name": "Q_A", "link": "https://stackoverflow.com/users/6029600/q-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1459380653, "creation_date": 1459371159, "question_id": 36319479, "link": "https://stackoverflow.com/questions/36319479/c-conditional-virtual-functions", "title": "C++ - Conditional virtual functions", "body": "<p>My question is, if I have something like</p>\n\n<pre><code>class Base {\n ...\n public:\n  virtual void func();\n}\n\nvoid Base::func() {\n //Implementation # 1\n}\n\nclass Derived1 : public Base {\n ...\n public:\n  void func();\n}\n\nvoid Derived1::func() {\n //Implementation # 1\n}\n\nclass Derived2 : public Base {\n ...\n public:\n  void func();\n}\n\nvoid Derived2::func()\n //Implementation # 1\n}\n\nclass Derived3 : public Base {\n ...\n public:\n  void func();\n}\n\nvoid Derived3::func() {\n //Implementation # 2\n}\n</code></pre>\n\n<p>What I'm trying to do is I want Derived1 and Derived2 to use the implementation of func() that was used in Base, but I want Derived3 to use func() a little differently. The problem is, if I make func() virtual in Base, then both Derived1 and Derived2 will need to implement it differently which I don't want. However, if I don't make it virtual, then all derived classes will have the same implantation for func(). How can I get past this problem?</p>\n"}, {"tags": ["c++", "macos", "opencv"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1459372547, "post_id": 36319366, "comment_id": 60263061, "body": "try different codecs like mjpg and make sure that the opencv_ffmpeg dll is available to the application"}, {"owner": {"reputation": 65, "user_id": 1994829, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f90845a7fa6fb87e4bcaf4810e3732db?s=128&d=identicon&r=PG", "display_name": "ATv", "link": "https://stackoverflow.com/users/1994829/atv"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1459456808, "post_id": 36319366, "comment_id": 60308422, "body": "I tried pretty much every codec. Why do I need the dll (i&#39;m on mac btw). I&#39;d rather avoid using ffmpeg if I can. Anyone?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1459457004, "post_id": 36319366, "comment_id": 60308546, "body": "on windows, opencv uses ffmpeg internally and provides a special dll. If the dll is not present, videowriter just creates a (nearly) empty file without any error. Not sure how it is handled on osx."}, {"owner": {"reputation": 65, "user_id": 1994829, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f90845a7fa6fb87e4bcaf4810e3732db?s=128&d=identicon&r=PG", "display_name": "ATv", "link": "https://stackoverflow.com/users/1994829/atv"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1459505268, "post_id": 36319366, "comment_id": 60326995, "body": "Thanks Micka. Is there any way of writing a video without using ffmpeg?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1459505447, "post_id": 36319366, "comment_id": 60327119, "body": "With opencv functions? I dont think so, but no guarantee."}], "owner": {"reputation": 65, "user_id": 1994829, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f90845a7fa6fb87e4bcaf4810e3732db?s=128&d=identicon&r=PG", "display_name": "ATv", "link": "https://stackoverflow.com/users/1994829/atv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459370768, "creation_date": 1459370768, "question_id": 36319366, "link": "https://stackoverflow.com/questions/36319366/opencv-video-writer-only-writes-128byte-files-os-x-el-capitan", "title": "Opencv video writer only writes 128byte files (os x el capitan)", "body": "<p>So i tried several pieces of code now, all more or less similar, and they all only produce a 128 byte file. I want to record the webcam stream to file.</p>\n\n<p>I don't believe this is a codec issue, i tried all of them and i still get only 128 bytes. Anyone know what the problem here is ? So far i only tried it on MacOS X.</p>\n\n<p>For example below code:</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n\nint main( int argc, char** argv ) {\nCvCapture* capture;\n\ncapture = cvCreateCameraCapture(0);\n\nassert( capture != NULL );\n\nIplImage* bgr_frame = cvQueryFrame( capture );\n\nCvSize size = cvSize(\n                     (int)cvGetCaptureProperty( capture,\n                                               CV_CAP_PROP_FRAME_WIDTH),\n                     (int)cvGetCaptureProperty( capture,\n                                               CV_CAP_PROP_FRAME_HEIGHT)\n                     );\n\ncvNamedWindow( \"Webcam\", CV_WINDOW_AUTOSIZE );\n\nCvVideoWriter *writer = cvCreateVideoWriter(    \"vidtry.AVI\",\n                                            CV_FOURCC('A','V','C','1'),\n                                            30,\n                                        size\n                                            );\n\nwhile( (bgr_frame = cvQueryFrame( capture )) != NULL ) \n{\n     cvWriteFrame(writer, bgr_frame );\n     cvShowImage( \"Webcam\", bgr_frame );\n     char c = cvWaitKey( 33 );\n     if( c == 27 ) break;\n}\ncvReleaseVideoWriter( &amp;writer );\ncvReleaseCapture( &amp;capture );\ncvDestroyWindow( \"Webcam\" );\nreturn( 0 );\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "vector", "structure", "realloc"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 5, "creation_date": 1459370869, "post_id": 36319352, "comment_id": 60262128, "body": "You cannot, rather go with indices for such case. These won&#39;t change, even if the vector reallocates it&#39;s internal array."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1459370913, "post_id": 36319352, "comment_id": 60262149, "body": "You can make the sorted-vectors be vectors of integers that index into <code>students</code>. Of course then you have to make sure not to remove from the middle of <code>students</code> without recalculating your sort."}, {"owner": {"reputation": 1595, "user_id": 5878054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cb66b3b2529859a30f8ba5c502b393c?s=128&d=identicon&r=PG&f=1", "display_name": "mainactual", "link": "https://stackoverflow.com/users/5878054/mainactual"}, "edited": false, "score": 0, "creation_date": 1459371688, "post_id": 36319352, "comment_id": 60262607, "body": "You are only allowed to use <code>vector</code>, huh? Does not seem like a real world problem does it? :rolleyes:"}, {"owner": {"reputation": 2113, "user_id": 4433546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fp46R.jpg?s=128&g=1", "display_name": "TriskalJM", "link": "https://stackoverflow.com/users/4433546/triskaljm"}, "edited": false, "score": 0, "creation_date": 1459371862, "post_id": 36319352, "comment_id": 60262700, "body": "Please include enough of the code to constitute an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>"}, {"owner": {"reputation": 3111, "user_id": 479941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebad9df474aa1949c09ef5136e55fd33?s=128&d=identicon&r=PG", "display_name": "Mark Nunberg", "link": "https://stackoverflow.com/users/479941/mark-nunberg"}, "edited": false, "score": 0, "creation_date": 1459378764, "post_id": 36319352, "comment_id": 60265692, "body": "This also depends on how often the <code>vector</code> array is actually manipulated. If it&#39;s only populated once and you know the size of the vector or array beforehand then the memory addresses won&#39;t change location"}, {"owner": {"reputation": 67, "user_id": 5615574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d3ae963655d742e59693ab47cba20f?s=128&d=identicon&r=PG&f=1", "display_name": "Filip N.", "link": "https://stackoverflow.com/users/5615574/filip-n"}, "reply_to_user": {"reputation": 1595, "user_id": 5878054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cb66b3b2529859a30f8ba5c502b393c?s=128&d=identicon&r=PG&f=1", "display_name": "mainactual", "link": "https://stackoverflow.com/users/5878054/mainactual"}, "edited": false, "score": 0, "creation_date": 1459422475, "post_id": 36319352, "comment_id": 60285250, "body": "@mainactual No, it&#39;s a part of school project, which I modified so it is easier to understand."}, {"owner": {"reputation": 1595, "user_id": 5878054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cb66b3b2529859a30f8ba5c502b393c?s=128&d=identicon&r=PG&f=1", "display_name": "mainactual", "link": "https://stackoverflow.com/users/5878054/mainactual"}, "edited": false, "score": 0, "creation_date": 1459424207, "post_id": 36319352, "comment_id": 60286512, "body": "I could guess :). Like Christophe&#39;s 3), I&#39;d use  <code>std::map&lt; int, std::shared_ptr&lt;Student&gt; &gt;</code> and <code>std::multimap&lt; std::string, std::shared_ptr&lt;Student&gt; &gt;</code>. That answer the question of keeping the pointers valid. <code>vector</code>ization is up to you."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 5615574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d3ae963655d742e59693ab47cba20f?s=128&d=identicon&r=PG&f=1", "display_name": "Filip N.", "link": "https://stackoverflow.com/users/5615574/filip-n"}, "edited": false, "score": 0, "creation_date": 1459422357, "post_id": 36320038, "comment_id": 60285158, "body": "1) I don&#39;t know final number of elements in the structure, but there are thousands of them. 2) I might try to do it this way, however it is not guaranteed that some of the students will not be deleted (I would say that it is guaranteed that they will be....). So I need to find a way how to check and sort the structure again. The idea behind this was to keep it sorted so binary search would be possible to implement. I need to work with the values in structure relatively fast (max O(log n))."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 67, "user_id": 5615574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d3ae963655d742e59693ab47cba20f?s=128&d=identicon&r=PG&f=1", "display_name": "Filip N.", "link": "https://stackoverflow.com/users/5615574/filip-n"}, "edited": false, "score": 0, "creation_date": 1459426479, "post_id": 36320038, "comment_id": 60288244, "body": "If you encapsulate your data structure in a class, you could well control deletion and envisage to insert students in a different order than sequential. Using indexes would make this very handy to implement as in the sorted vectors you could easily find the indexes to remove and the indexes to adjust."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 2, "last_activity_date": 1459373144, "creation_date": 1459373144, "answer_id": 36320038, "question_id": 36319352, "link": "https://stackoverflow.com/questions/36319352/how-to-keep-pointers-to-structures-stored-in-vector-valid/36320038#36320038", "title": "How to keep pointers to structures stored in vector valid?", "body": "<p>There are three options to solve this issue using only vectors and no other containers:  </p>\n\n<p>1) Avoid the reallocation.  This can only be achieved if you know the maximum M of expected number of elements to be inserted in your vector. In this case you can <a href=\"http://www.cplusplus.com/reference/vector/vector/reserve/\" rel=\"nofollow\"><code>students.reserve(M);</code></a>.  </p>\n\n<p>2) Forget the the pointers for <code>sortedByID</code> and <code>sortedByName</code>.  Use integers (or better said <code>size_t</code>) store the index of a student in <code>students</code> instead of a pointer. This supposes of course that the order of items in students is never changed.  </p>\n\n<p>3) Do not store the students themselves in a vector, but make <code>students</code> a vector of pointers to students (unsorted) that are allocated from free store.  If this alternative meets all your criteria, i'd suggest to go fore <a href=\"http://www.cplusplus.com/reference/memory/shared_ptr/\" rel=\"nofollow\"><code>shared_ptr&lt;Student&gt;</code></a> instead of raw pointers.   </p>\n"}], "owner": {"reputation": 67, "user_id": 5615574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d3ae963655d742e59693ab47cba20f?s=128&d=identicon&r=PG&f=1", "display_name": "Filip N.", "link": "https://stackoverflow.com/users/5615574/filip-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1459373144, "creation_date": 1459370713, "question_id": 36319352, "link": "https://stackoverflow.com/questions/36319352/how-to-keep-pointers-to-structures-stored-in-vector-valid", "title": "How to keep pointers to structures stored in vector valid?", "body": "<p>I am learning C++ and I have trouble with pointers to structures stored in vector. The problem is that I need to keep the structure Student sorted twice. Once by student's id and another time by student's name, so it is easy to search the values in it. Because of this I created two vectors of pointers:</p>\n\n<pre><code>vector&lt;Student *&gt; sortedByID;    \nvector&lt;Student *&gt; sortedByName;\n</code></pre>\n\n<p>The structure looks like this and I keep it in vector as well (even though it is probably not a good idea):</p>\n\n<pre><code>struct Student {\n    int id;\n    string name;\n};\n\nvector &lt;Student&gt; students;\n</code></pre>\n\n<p>I am creating the new struct with push_back and filling it with parameters from a function (yes, I have a constructor). To keep the vector of pointers sorted I am using lower_bound as shown below:</p>\n\n<pre><code>students.push_back(Student(id, name));\nit = lower_bound(sortedByID.begin(), sortedByID.end(), id, cmp());\nsortedByID.insert(it, &amp;(students.back()));\n//the same for name\n</code></pre>\n\n<p>The problem is that everytime I add the structure with push_back it reallocs new vector and destroys the address of previous objects, so pointers in vector sortedByID point to invalid value. I think it would be the same with an array of structs, because once the array is full, there is no other way (as far as I know) to resize it, than to create a new array and copy all the data from previous one (so the address will change again).</p>\n\n<p>Is there any clever way to solve this problem? Please note that I am only allowed to use vector and not any other containers from STL.</p>\n"}, {"tags": ["c++", "interface"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1459371093, "post_id": 36319324, "comment_id": 60262248, "body": "<i>Is it possible to replace the implementation of the interface without changing existing code?</i> I don&#39;t see how you can do that. You have to change existing code somewhere."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1459371222, "post_id": 36319406, "comment_id": 60262318, "body": "well, I was almost expecting that it is going in this direction. However, this just shifts the need to change code from anywhere else to the factory function. I still would need to change myinterface.cpp. In my particular case, where the creation of the instance is already confined to a single line, I wouldnt gain much, right?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1459371506, "post_id": 36319406, "comment_id": 60262506, "body": "If you want the struct type fixed at compile-time, you are going to have to make a code change <i>somewhere</i> in order to specify which struct type to instantiate.  Otherwise, you will have to make it dynamic instead, where you register multiple class types in a private list, and then have the factory function decide which entry to return based on some input value that is provided at run-time."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1459372060, "post_id": 36319406, "comment_id": 60262805, "body": "I want to use only a single type, but that type might change in the future. I think in my example the changes that have to be done to switch to a different implemenation are already minimal, I just wasnt sure if there exists some magic that I am not aware of. I will accept your answer, but I would be happy, if you could add a line saying something like: &quot;No you cant do it without changing any code. The best way to go is to use a factory approach [because in genral the creation of the instances is not confined to a single line in your code, and thats what you gain by using a factory]&quot;"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1459372172, "post_id": 36319406, "comment_id": 60262863, "body": "Rather than changing the one line that instantiates the actual object, why not just change the actual implementation of <code>MyDefaultImplementation</code> itself when needed?  Are you planning on compiling multiple implementation types? If so, you might need to <code>#ifdef</code> your code to make different decisions at compile-time."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1459372874, "post_id": 36319406, "comment_id": 60263235, "body": "the implementation of the interface is supposed to be provided by users (or myself) depending on the use case and I dont want to manage different versions of some default implementation and also I love the way interfaces can guide you to get stuff implemented quickly (guess what, yes I have some java background ;)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1459373275, "post_id": 36319406, "comment_id": 60263434, "body": "If you let the user provide the implementation, then either the user has to change your implementation code statically at compile-time, or the user has to register their own implementation dynamically at runtime. There really isn&#39;t an in-between on this.  C++ is not as flexible as Java on this."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1459374021, "post_id": 36319406, "comment_id": 60263807, "body": "Thanks for the help. In this particular case i will just leave it like it is, but now I understand much better what a factory could be used for."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1459370932, "creation_date": 1459370932, "answer_id": 36319406, "question_id": 36319324, "link": "https://stackoverflow.com/questions/36319324/how-to-replace-implementation-of-interface-without-changing-code/36319406#36319406", "title": "How to replace implementation of interface without changing code?", "body": "<p>Use a factory approach, eg:</p>\n\n<p>myinterface.h</p>\n\n<pre><code>struct MyInterface\n{\n    virtual ~MyInterface() {}\n    virtual void foo() = 0;\n};\n\nMyInterface* createMyInterface();\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"myinterface.h\"\n\nint main()\n{\n    MyInterface* x = createMyInterface();\n    x-&gt;foo();\n    delete x;\n}\n</code></pre>\n\n<p>Then you can make <code>createMyInterface()</code> create whatever struct type you need, eg:</p>\n\n<p>mydefault.h</p>\n\n<pre><code>#include \"myinterface.h\"\n\nstruct MyDefaultImplementation : MyInterface\n{\n    void foo(){}\n};\n</code></pre>\n\n<p>myinterface.cpp</p>\n\n<pre><code>#include \"mydefault.h\"\n\nMyInterface* createMyInterface()\n{\n    return new MyDefaultImplementation;\n}\n</code></pre>\n"}], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 36319406, "answer_count": 1, "score": 1, "last_activity_date": 1459370932, "creation_date": 1459370608, "last_edit_date": 1495541272, "question_id": 36319324, "link": "https://stackoverflow.com/questions/36319324/how-to-replace-implementation-of-interface-without-changing-code", "title": "How to replace implementation of interface without changing code?", "body": "<p>Suppose I wrote some code like this:</p>\n\n<pre><code>// myinterface.h\nstruct MyInterface { void foo()=0; };\n\n// mydefault.h\n#include \"myinterface.h\"\nstruct MyDefaultImplementation : MyInterface { void foo(){} };\n\n// main.cpp\n#include \"myinterface.h\"\n#include \"mydefault.h\"    // (X)\nint main(){\n    MyInterface* x = new MyDefaultImplementation();  // (X)\n    x-&gt;foo();\n}\n</code></pre>\n\n<p>I can provide a different implementation of the interface easily, but I need to change the lines where I create the instance and of course the include (X). </p>\n\n<p><strong>Is it possible to replace the implementation of the interface without changing existing code?</strong></p>\n\n<p>Just to clarify: of course with the above code it is not possible, but can I change it somehow, such that later when I want to switch to another implementation of the interface I dont have to change it? </p>\n\n<p>The closest I could find is <a href=\"https://stackoverflow.com/questions/19307121/replace-implementation-of-instantiated-class-without-to-touch-code-java\">this</a>, but thats java :(</p>\n\n<p>Btw the example is very much simplified, but also in my actual code, there is only a single line in the code, where I create the instance.</p>\n"}, {"tags": ["c++", "thread-safety", "amqp", "qpid"], "answers": [{"tags": [], "owner": {"reputation": 1463, "user_id": 4784579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KRlU0.jpg?s=128&g=1", "display_name": "ipavlu", "link": "https://stackoverflow.com/users/4784579/ipavlu"}, "is_accepted": true, "score": 0, "last_activity_date": 1490446466, "creation_date": 1490446466, "answer_id": 43016588, "question_id": 36319231, "link": "https://stackoverflow.com/questions/36319231/amqp-qpid-thread-safety/43016588#43016588", "title": "AMQP Qpid: thread safety", "body": "<p>I found the answer in the end. Yes, they are actually thread-safe.\nIn the C++, AMQP Qpid has its own mechanism for processing, it creates a small number of threads(I believe comparable to the number of cores), incorporating thread pool like behavior and thread safety is ensured by processing at any given time on one thread at the time and some locking is ensured for asynchronous operations done by code using given DLL.</p>\n\n<p>With C++/CLI port it is rather worse, there are locks used in the .Net part and I believe, that some parts of the C++/CLI port are very performant as they could be...</p>\n"}], "owner": {"reputation": 1463, "user_id": 4784579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KRlU0.jpg?s=128&g=1", "display_name": "ipavlu", "link": "https://stackoverflow.com/users/4784579/ipavlu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 43016588, "answer_count": 1, "score": 0, "last_activity_date": 1490446466, "creation_date": 1459370271, "last_edit_date": 1459413876, "question_id": 36319231, "link": "https://stackoverflow.com/questions/36319231/amqp-qpid-thread-safety", "title": "AMQP Qpid: thread safety", "body": "<p>I am looking through docs and somehow I am blind or missing important information, whether C++ classes are thread safe or not. the Session class specifically? Any experiences or anybody who found the info actually? Because it seems to me, that I have to get through sources otherwise...</p>\n\n<p>Thanks!</p>\n\n<p>/ip/</p>\n"}, {"tags": ["c++", "c++11", "vector"], "comments": [{"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 2, "creation_date": 1459370396, "post_id": 36319164, "comment_id": 60261834, "body": "std::includes <a href=\"http://en.cppreference.com/w/cpp/algorithm/includes\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/includes</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1459370934, "post_id": 36319164, "comment_id": 60262158, "body": "are you asking for an efficient way to get it done, or for an efficient way to implement it from scratch? If its the first, use the std algorithm if it is the second, take a look at the std algorithm ;)"}], "answers": [{"tags": [], "owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "is_accepted": false, "score": 5, "last_activity_date": 1459370369, "creation_date": 1459370369, "answer_id": 36319256, "question_id": 36319164, "link": "https://stackoverflow.com/questions/36319164/efficient-way-of-determining-whether-one-vector-is-a-subset-of-another-or-not/36319256#36319256", "title": "Efficient way of determining whether one vector is a subset of another or not?", "body": "<p>You can use <code>std::includes</code>:</p>\n\n<pre><code>std::vector&lt;int&gt; a{1,2,3,4,5};\nstd::vector&lt;int&gt; b{1,2,6};\nstd::cout &lt;&lt; std::includes(a.begin(), a.end(), b.begin(), b.end()) &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 782, "user_id": 5145654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRw4q.jpg?s=128&g=1", "display_name": "AaronI", "link": "https://stackoverflow.com/users/5145654/aaroni"}, "is_accepted": false, "score": 0, "last_activity_date": 1459370660, "creation_date": 1459370660, "answer_id": 36319338, "question_id": 36319164, "link": "https://stackoverflow.com/questions/36319164/efficient-way-of-determining-whether-one-vector-is-a-subset-of-another-or-not/36319338#36319338", "title": "Efficient way of determining whether one vector is a subset of another or not?", "body": "<p>Yes, there are more efficient ways. The answer to your question depends on whether you assume that most of the time, the vector will be a subset, or not.</p>\n\n<p>This is all assuming that there are no duplicate elements.</p>\n\n<p>Let's look at it this way. If vec2 happens to be a subset of vec1, then verifying that will take O(vec1.size()), because you have to look at every element.</p>\n\n<p>In that case, your implementation is already pretty close to optimal. You could improve by using binary search to find the first matching element in vec1, instead of linear search as you do now.</p>\n\n<p>Once you found the element, there is really not much else that you can do rather than iterate through all elements and compare.</p>\n\n<p>If, on the other hand, you assume that most of the time set2 is <em>not</em> a susbet of set1, you should follow a different approach.</p>\n\n<p>The beginning is the same: use binary search to find the first element of set2 in set1.</p>\n\n<p>Then, use binary search to find the last element of set2 in set1.</p>\n\n<p>Then, check whether the size of the span matches the size of set2. If not, you can bail out right now.</p>\n\n<p>Finally, if the size matches, do the element-by-element comparison.</p>\n\n<p>Things get trickier if you have duplicate elements, and figuring out how exactly to do that is left as an exercise to the reader.</p>\n"}], "owner": {"reputation": 1831, "user_id": 4178510, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b5a159088e6454c73cc2b805ba92afa7?s=128&d=identicon&r=PG&f=1", "display_name": "letsBeePolite", "link": "https://stackoverflow.com/users/4178510/letsbeepolite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1459370660, "creation_date": 1459370021, "question_id": 36319164, "link": "https://stackoverflow.com/questions/36319164/efficient-way-of-determining-whether-one-vector-is-a-subset-of-another-or-not", "title": "Efficient way of determining whether one vector is a subset of another or not?", "body": "<p>Given two sorted vectors consisting of unique values between 0 and some known 'n'. And size of one vector (set1) will always be greater than that of candidate vector set2. </p>\n\n<p>Query: Is to determine whether given set2 is a subset of set1 or not?</p>\n\n<p>Is their any better and efficient way of doing this apart from the following implementation in C++11? </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n\nbool subSetCheck(std::vector&lt;int&gt; set1, std::vector&lt;int&gt; set2) {\n\n    //Set1 &amp; 2 are always sorted and contain only unique integers from 0 to some known 'n'\n    //Set1 is always larger than Set2 in size\n\n    std::vector&lt;int&gt;::iterator it1 = set1.begin();\n    std::vector&lt;int&gt;::iterator it2 = set2.begin();\n    bool subSet = true;\n    for (; (it1 != set1.end()) &amp;&amp; (it2 !=set2.end()) ;) {\n\n        if ( *it1 == *it2) {++it1; ++it2;}\n        else if( *it1 &gt; *it2) ++it2;\n        else ++it1;\n    }\n\n    if (it1 ==set1.end()) subSet = false;\n\n    return subSet;\n}\n\nint main () {\n\n    std::vector&lt;int&gt; set1{0,1,2,3,4};\n    std::vector&lt;int&gt; set2{0,1,5};\n\n    if (subSetCheck(set1,set2)) std::cout &lt;&lt; \"Yes, set2 is subset of set1.\" &lt;&lt; std::endl;\n    else std::cout &lt;&lt; \"No! set2 is not a subset of set1.\" &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 1875, "user_id": 1091536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d2f11fe9ce90bd4462a24c1bf2975c?s=128&d=identicon&r=PG", "display_name": "gomons", "link": "https://stackoverflow.com/users/1091536/gomons"}, "edited": false, "score": 1, "creation_date": 1459369744, "post_id": 36319049, "comment_id": 60261480, "body": "What is local address for you?"}, {"owner": {"reputation": 107, "user_id": 5864246, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-G8jdIaOb39E/AAAAAAAAAAI/AAAAAAAAALA/wosc9d58MOY/photo.jpg?sz=128", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u0420\u043e\u0447\u0435\u0432", "link": "https://stackoverflow.com/users/5864246/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%a0%d0%be%d1%87%d0%b5%d0%b2"}, "reply_to_user": {"reputation": 1875, "user_id": 1091536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d2f11fe9ce90bd4462a24c1bf2975c?s=128&d=identicon&r=PG", "display_name": "gomons", "link": "https://stackoverflow.com/users/1091536/gomons"}, "edited": false, "score": 0, "creation_date": 1459370945, "post_id": 36319049, "comment_id": 60262164, "body": "I want to know if the address is loopback address, alias to it (like localhost) or global IP address that points to local machine."}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1459375031, "last_edit_date": 1459375031, "creation_date": 1459372627, "answer_id": 36319920, "question_id": 36319049, "link": "https://stackoverflow.com/questions/36319049/how-to-check-if-network-address-is-local-in-qt/36319920#36319920", "title": "How to check if network address is local in Qt", "body": "<blockquote>\n  <p>I can use <code>QHostInfo</code> to lookup IP address, but in this case I would have to wait for DNS server's response.</p>\n</blockquote>\n\n<p><code>QHostInfo</code> uses the platform-specific name resolution mechanism. It might not use DNS at all. If the hostname of a local interface is in the hosts file, and the name resolution is configured to use it, then <code>QHostInfo</code> will resolve the local interface's address that way. Otherwise, it'll do a name server query, iff the platform is configured to resolve names that way.</p>\n\n<p>The most you can do is to check <code>QHostAddress::isLoopback()</code>, then check if it's one of <code>QNetworkInterface::allAddresses()</code>.</p>\n\n<p>If your address is not an IP address, and it's not equal to <code>QHostInfo::localHostName()</code>, then you have to obtain one first using <code>QHostInfo::lookupHost</code>. If it's a local interface's name, listed in the hosts file or a similar local resolution mechanism, it will be returned quickly. You can set a short timeout (say 100ms), and if there's no lookup result available by then, you can assume that it's not a local interface.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>// https://github.com/KubaO/stackoverflown/tree/master/questions/host-lookup-36319049\n#include &lt;QtWidgets&gt;\n#include &lt;QtNetwork&gt;\n\nclass IfLookup : public QObject {\n   Q_OBJECT\n   int m_id;\n   QTimer m_timer;\n   void abort() {\n      if (m_timer.isActive())\n         QHostInfo::abortHostLookup(m_id);\n      m_timer.stop();\n   }\n   Q_SLOT void lookupResult(const QHostInfo &amp; host) {\n      m_timer.stop();\n      if (host.error() != QHostInfo::NoError)\n         return hasResult(Error);\n      for (auto ifAddr : QNetworkInterface::allAddresses())\n         if (host.addresses().contains(ifAddr))\n            return hasResult(Local);\n      return hasResult(NonLocal);\n   }\npublic:\n   enum Result { Local, NonLocal, TimedOut, Error };\n   IfLookup(QObject * parent = 0) : QObject(parent) {\n      connect(&amp;m_timer, &amp;QTimer::timeout, this, [this]{\n         abort();\n         emit hasResult(TimedOut);\n      });\n   }\n   Q_SIGNAL void hasResult(Result);\n   Q_SLOT void lookup(QString name) {\n      abort();\n      name = name.trimmed().toUpper();\n      QHostAddress addr(name);\n      if (!addr.isNull()) {\n         if (addr.isLoopback() || QNetworkInterface::allAddresses().contains(addr))\n            return hasResult(Local);\n         return hasResult(NonLocal);\n      }\n      if (QHostInfo::localHostName() == name)\n         return hasResult(Local);\n      m_id = QHostInfo::lookupHost(name, this, SLOT(lookupResult(QHostInfo)));\n      m_timer.start(500);\n   }\n};\n\nint main(int argc, char ** argv) {\n   QApplication app{argc, argv};\n   QWidget w;\n   QFormLayout layout{&amp;w};\n   QLineEdit address;\n   layout.addRow(\"Address to look up\", &amp;address);\n   QLabel result;\n   layout.addRow(\"Result\", &amp;result);\n   QPushButton lookup{\"Lookup\"};\n   layout.addRow(&amp;lookup);\n   lookup.setDefault(true);\n   w.show();\n\n   IfLookup ifLookup;\n   QObject::connect(&amp;lookup, &amp;QPushButton::clicked, [&amp;]{\n      result.clear();\n      ifLookup.lookup(address.text());\n   });\n   QObject::connect(&amp;ifLookup, &amp;IfLookup::hasResult, [&amp;](IfLookup::Result r){\n      static const QMap&lt;IfLookup::Result, QString&gt; msgs = {\n         { IfLookup::Local, \"Local\" }, { IfLookup::NonLocal, \"Non-Local\" },\n         { IfLookup::TimedOut, \"Timed Out\" }, { IfLookup::Error, \"Lookup Error\" }\n      };\n      result.setText(msgs.value(r));\n   });\n\n   return app.exec();\n}\n\n#include \"main.moc\"\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 5864246, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-G8jdIaOb39E/AAAAAAAAAAI/AAAAAAAAALA/wosc9d58MOY/photo.jpg?sz=128", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u0420\u043e\u0447\u0435\u0432", "link": "https://stackoverflow.com/users/5864246/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%a0%d0%be%d1%87%d0%b5%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1233, "favorite_count": 0, "accepted_answer_id": 36319920, "answer_count": 1, "score": 1, "last_activity_date": 1459375031, "creation_date": 1459369623, "last_edit_date": 1459371849, "question_id": 36319049, "link": "https://stackoverflow.com/questions/36319049/how-to-check-if-network-address-is-local-in-qt", "title": "How to check if network address is local in Qt", "body": "<p>I want to know if network address (name or IP) points to remote server or local machine. I can use <code>QHostInfo</code> to lookup IP address, but in this case I would have to wait for DNS server's response. I don't want to know server's IP address, I only need to check if it is local or not. Is there any faster way to check this?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 63, "user_id": 1531728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82a845b8e44850700d6a25f71b05f961?s=128&d=identicon&r=PG", "display_name": "Giovanni", "link": "https://stackoverflow.com/users/1531728/giovanni"}, "edited": false, "score": 0, "creation_date": 1459370115, "post_id": 36319028, "comment_id": 60261680, "body": "Dear Mr. G&#252;nther,   Can you please kindly tell me why is there a discrepancy? What did I do wrong?    The question that you linked me to is helpful, but does not show a discrepancy.    Thank you very much."}, {"owner": {"reputation": 1100, "user_id": 3693388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o5lGj.jpg?s=128&g=1", "display_name": "Stewart Smith", "link": "https://stackoverflow.com/users/3693388/stewart-smith"}, "edited": false, "score": 1, "creation_date": 1459371024, "post_id": 36319028, "comment_id": 60262206, "body": "I would recommend putting your include guards above your includes. That way the includes don&#39;t get parsed twice for the same file."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 1, "creation_date": 1459371036, "post_id": 36319028, "comment_id": 60262214, "body": "<a href=\"http://stackoverflow.com/q/495021/179910\">stackoverflow.com/q/495021/179910</a>. Some compilers can deal with templates in source files under some circumstances, but without knowing the <i>exact</i> compiler you&#39;re using, putting the entire template in the header is the safest way to make things work."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 1531728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82a845b8e44850700d6a25f71b05f961?s=128&d=identicon&r=PG", "display_name": "Giovanni", "link": "https://stackoverflow.com/users/1531728/giovanni"}, "edited": false, "score": 0, "creation_date": 1459371352, "post_id": 36319466, "comment_id": 60262408, "body": "Dear Black Moses,   Are the following an example of &quot;include guards&quot;? #ifndef __TRIVIAL_TEMPLATE_H #define __TRIVIAL_TEMPLATE_H ... #endif     In addition, what is a &quot;transition unit&quot;?    Thank you very much."}, {"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "reply_to_user": {"reputation": 63, "user_id": 1531728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82a845b8e44850700d6a25f71b05f961?s=128&d=identicon&r=PG", "display_name": "Giovanni", "link": "https://stackoverflow.com/users/1531728/giovanni"}, "edited": false, "score": 0, "creation_date": 1459371577, "post_id": 36319466, "comment_id": 60262547, "body": "@Giovanni: Yes, those are include guards. I edited my answer so you can see the design."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 63, "user_id": 1531728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82a845b8e44850700d6a25f71b05f961?s=128&d=identicon&r=PG", "display_name": "Giovanni", "link": "https://stackoverflow.com/users/1531728/giovanni"}, "edited": false, "score": 0, "creation_date": 1459371727, "post_id": 36319466, "comment_id": 60262633, "body": "@Giovanni It was a typo, BM meant a translation unit: a fancy way for calling the file you pass to the compiler to be compiled (as opposed to include files that are not explicitly passed to the compiler)."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1459376743, "post_id": 36319466, "comment_id": 60264949, "body": "@KubaOber No, the translation unit is the thing you get after the preprocessor has done its work."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1459426774, "post_id": 36319466, "comment_id": 60288446, "body": "@T.C. True. I&#39;m trying to approximately simplify :)"}], "tags": [], "owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "is_accepted": true, "score": 2, "last_activity_date": 1459371675, "last_edit_date": 1459371675, "creation_date": 1459371118, "answer_id": 36319466, "question_id": 36319028, "link": "https://stackoverflow.com/questions/36319028/why-is-the-discrepancy-in-these-two-cases-of-using-c-templates/36319466#36319466", "title": "Why is the discrepancy in these two cases of using C++ templates?", "body": "<p>You have to put your method implementation in the header file, and include that file instead. Long story short, templates must be visible in each translation unit, just like any declarations. Also, to prevent multiple inclusion, you should use include guards in each header file.</p>\n\n<pre><code>    /*template_declarations.hpp*/\n    #ifndef TEMPLATE_DECLARATIONS_HPP\n    #define TEMPLATE_DECLARATIONS_HPP\n\n    // put your declarations here\n\n    #endif //TEMPLATE_DECLARATIONS_HPP\n\n\n\n    /*template_implementation.hpp*/\n    #ifndef TEMPLATE_IMPLEMENTATION_HPP\n    #define TEMPLATE_IMPLEMENTATION_HPP\n\n    #include \"template_declarations.hpp\"\n\n    // put your implementation here\n\n    #endif //TEMPLATE_IMPLEMENTATION_HPP\n</code></pre>\n\n<p>Now, you can include just the second header, or make helper header:</p>\n\n<pre><code>    /*template.hpp*/\n    #ifndef TEMPLATE_HPP\n    #define TEMPLATE_HPP\n\n    #include \"template_declarations.hpp\"\n\n    #endif //TEMPLATE_HPP\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 1531728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82a845b8e44850700d6a25f71b05f961?s=128&d=identicon&r=PG", "display_name": "Giovanni", "link": "https://stackoverflow.com/users/1531728/giovanni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 36319466, "answer_count": 1, "score": 1, "last_activity_date": 1459371675, "creation_date": 1459369555, "last_edit_date": 1459370941, "question_id": 36319028, "link": "https://stackoverflow.com/questions/36319028/why-is-the-discrepancy-in-these-two-cases-of-using-c-templates", "title": "Why is the discrepancy in these two cases of using C++ templates?", "body": "<p>Header file for a simple template, trivial_template.hpp.</p>\n\n<pre><code>// Import packages from the C++ STL\n#include &lt;string&gt;\n#include &lt;cstring&gt;\n#include &lt;stdio.h&gt;\n#include &lt;utility&gt;\n#include &lt;limits.h&gt;         // For std::LONG_MIN\n\n#ifndef __TRIVIAL_TEMPLATE_H\n#define __TRIVIAL_TEMPLATE_H\nusing namespace std;\n\ntemplate &lt;typename T&gt;\nclass trivial_template {\n    public:\n        trivial_template();\n        ~trivial_template();\n        static bool is_non_negative(T a_num);\n        T square_given_number(T a_num);\n};\n#endif\n</code></pre>\n\n<p>Implementation file for a simple template, trivial_template.cpp.</p>\n\n<pre><code>#include \"./trivial_template.hpp\"\n\ntemplate &lt;typename T&gt;\ntrivial_template&lt;T&gt;::trivial_template() {\n}\n\ntemplate &lt;typename T&gt;\ntrivial_template&lt;T&gt;::~trivial_template() {\n}\n\ntemplate&lt;typename T&gt;\nbool trivial_template&lt;T&gt;::is_non_negative(T a_num) {\n    return (0 &lt;= a_num);\n}\n\ntemplate&lt;typename T&gt;\nT trivial_template&lt;T&gt;::square_given_number(T a_num) {\n    return (a_num*a_num);\n}\n</code></pre>\n\n<p>The C++ main file that uses it.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n#include &lt;cstring&gt;\n#include &lt;math.h&gt;\n#include &lt;climits&gt;\n#include &lt;cfloat&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include \"../../elements/trivial_template.hpp\"\n\nusing namespace std;\n\nint main(int argc, char *argv[]) {\n    cout &lt;&lt; \"   ###\" &lt;&lt; trivial_template&lt;int&gt;::is_non_negative(493) &lt;&lt; \"===\" &lt;&lt; endl;\n    trivial_template&lt;int&gt; *a_ptr;\n    cout &lt;&lt; \"   ###\" &lt;&lt; a_ptr-&gt;square_given_number(5) &lt;&lt; \"===\" &lt;&lt; endl;\n    // 0.25^2 = 0.0625\n    trivial_template&lt;long double&gt; *b_ptr;\n    cout &lt;&lt; \"   ###\" &lt;&lt; b_ptr-&gt;square_given_number(-0.25) &lt;&lt; \"===\" &lt;&lt; endl;\n    // 16.25^2 = 164.0625\n    cout &lt;&lt; \"   ###\" &lt;&lt; b_ptr-&gt;square_given_number(-16.25) &lt;&lt; \"===\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>My commands to compile, link, and run it are:</p>\n\n<pre><code>g++ -std=c++0x  -c  ../src/elements/trivial_template.cpp\ng++ -std=c++0x  -c  ../src/test/temp/test_templates.cpp\ng++ -std=c++0x  -o  ./test-boilerplate-code *.o\n</code></pre>\n\n<p>During linking, the following error message is produced:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"trivial_template&lt;long double&gt;::square_given_number(long double)\", referenced from:\n      _main in test_templates.o\n  \"trivial_template&lt;int&gt;::is_non_negative(int)\", referenced from:\n      _main in test_templates.o\n  \"trivial_template&lt;int&gt;::square_given_number(int)\", referenced from:\n      _main in test_templates.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [template] Error 1\n</code></pre>\n\n<p>When I tried this simple example using different paths for the location of the C++ source file, it works. Its output is:</p>\n\n<pre><code>    ###1===\n    ###25===\n    ###0.0625===\n    ###264.062===\nreal         0.22\nuser         0.00\nsys          0.00\n</code></pre>\n\n<p>Why is there this discrepancy? What is going on? </p>\n\n<p>In addition, can you please kindly help me fix the linking error?</p>\n\n<p>Thank you very much, and have a good day!</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1459369245, "post_id": 36318928, "comment_id": 60261186, "body": "C and C++ are different languages!"}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 9, "creation_date": 1459369524, "post_id": 36318928, "comment_id": 60261350, "body": "@Olaf While I generally appreciate your efforts in making this distinction clear, I believe that in this case, speaking of C and C++ together is legit as the <code>errno</code> concept is used by both of them alike. Choosing either tag over the other one would be arbitrary."}, {"owner": {"reputation": 3111, "user_id": 479941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebad9df474aa1949c09ef5136e55fd33?s=128&d=identicon&r=PG", "display_name": "Mark Nunberg", "link": "https://stackoverflow.com/users/479941/mark-nunberg"}, "edited": false, "score": 0, "creation_date": 1459369685, "post_id": 36318928, "comment_id": 60261445, "body": "Wouldn&#39;t it also depend on the locale being used?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1459369806, "post_id": 36318928, "comment_id": 60261509, "body": "@5gon12eder: I&#39;m afraid I have to disagree. The <code>errno</code> &amp; related are part of the C compatibility interface and the libc, thus not native C++/libc++. Said that, please notice the question explicitly references the C standard."}, {"owner": {"reputation": 231, "user_id": 6041036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f2ed6898d079dd8667b7e0ae1555715?s=128&d=identicon&r=PG&f=1", "display_name": "xrgb", "link": "https://stackoverflow.com/users/6041036/xrgb"}, "edited": false, "score": 1, "creation_date": 1459369833, "post_id": 36318928, "comment_id": 60261531, "body": "Can you choose your own max, and clip the error messages at runtime?"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 2, "creation_date": 1459370145, "post_id": 36318928, "comment_id": 60261698, "body": "I might be missing something, but an error message larger than ssize_t seems completely crazy on any platform where ssize_t is larger than int8_t."}, {"owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459370423, "post_id": 36318928, "comment_id": 60261851, "body": "@Olaf I worded it that way because of an assumption that C++ just followed whatever the C standard says, or that failing that, it would at most be <i>less</i> permissive rather than <i>more</i> permissive vs. the C standard. Still, I&#39;ve re-worded that phrase to now include both. Would you say that this question has no meaningful relevance to the C++ world, or that C++ would have a substantially different answer than the answer for C?"}, {"owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "reply_to_user": {"reputation": 3111, "user_id": 479941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebad9df474aa1949c09ef5136e55fd33?s=128&d=identicon&r=PG", "display_name": "Mark Nunberg", "link": "https://stackoverflow.com/users/479941/mark-nunberg"}, "edited": false, "score": 0, "creation_date": 1459370498, "post_id": 36318928, "comment_id": 60261906, "body": "@MarkNunberg Yes. I tried to word the question to account for that - feel free to suggest/edit clarifications to the wording if that&#39;s not clear."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459370632, "post_id": 36318928, "comment_id": 60261980, "body": "@mtraceur: I really think you should have left it with the C standard. Adding C++ makes the question possibly even broader as now C++ features come into play. If you want a C++ solution, though, just remove the C tag. Either way, a solution can very well depend on the language you use. Notice that identical syntax does not imply identical semantics!"}, {"owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "reply_to_user": {"reputation": 231, "user_id": 6041036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f2ed6898d079dd8667b7e0ae1555715?s=128&d=identicon&r=PG&f=1", "display_name": "xrgb", "link": "https://stackoverflow.com/users/6041036/xrgb"}, "edited": false, "score": 0, "creation_date": 1459371089, "post_id": 36318928, "comment_id": 60262245, "body": "@xrgb Yes - I can work around the entire problem at runtime, whether that way or without even clipping them by wrapping writev. But knowing at compile-time would allow preprocessor macros to exclude the unnecessary code, which I think is valuable for several reasons."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1459371673, "post_id": 36318928, "comment_id": 60262593, "body": "The C (and I suspect the C++) standard will not help concerning <code>SSIZE_MAX</code> as it does not define <code>SSIZE_MAX</code>.  If <code>SSIZE_MAX</code> is important to your code, suggest tagging the environment of interest that defines it."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 1, "creation_date": 1459371975, "post_id": 36318928, "comment_id": 60262756, "body": "Note, runtime generation <i>does</i> happen for out-of-range values (&gt; 134 on Linux), but this generates smaller strings than many in-range values. But including additional metadata is forbidden because there&#39;s no saying when or whether the error actually occured."}, {"owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "reply_to_user": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1459372094, "post_id": 36318928, "comment_id": 60262819, "body": "@zneak: Actually, if I remember the standards right, <code>ssize_t</code> must always be larger than <code>int8_t</code>: <code>ssize_t</code> is the signed equivalent of <code>size_t</code>, and <code>size_t</code> is bound to at a minimum support values up to <code>65 535</code>, and the latest POSIX/SUS require <code>ssize_t</code> to at least support values up to <code>32 767</code>. However, consider that there are multiple maxima going into a typical error message&#39;s maximum size: e.g. <code>ARG_MAX + MAGICAL_ERR_STR_MAX + sizeof(my_biggest_additional_error_text) - 1</code> together must be smaller than <code>SSIZE_MAX</code> for it to be safe to ignore the possibility of overflowing <code>SSIZE_MAX</code>."}, {"owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459372317, "post_id": 36318928, "comment_id": 60262946, "body": "@chux: While the <code>SSIZE_MAX</code> and <code>writev</code> details were an example of my current usecase, the question itself is more broadly relevant: if I were to port my code to Windows&#39; <code>WriteFileGather</code> or whatever, the constants to check against change, but knowing the maximum length of an error string remains relevant &quot;would be nice to have&quot; information."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459372618, "post_id": 36318928, "comment_id": 60263115, "body": "@mtraceur Certainly <code>strlen(any_string) &lt;= SIZE_MAX</code> is true.  <code>strlen(strerror(errno))</code> is not defined by C to be more constrained.  So that the portable limit."}, {"owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459374686, "post_id": 36318928, "comment_id": 60264097, "body": "@chux: Sure, that&#39;s a the maximum possible limit that logically follows from the standards&#39; definitions of those functions, yes: But surely the existence of unknown-unknowns justifies asking, in case there was some other, smaller limit. Also note: you can write portable code which takes advantage of smaller non-portable limits if those limits have a portable way to check for their presence (e.g. imagine a <code>fooUNIX</code> which defines a macro <code>ERR_STR_LEN_MAX</code> and a macro <code>__FOO_UNIX</code> that can be checked for with an <code>#ifdef</code>.)"}, {"owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459379725, "post_id": 36318928, "comment_id": 60266013, "body": "@Olaf: After some serious consideration, I have to disagree in this special case, because the question also has an &quot;at compile time&quot; limitation: I know C++ can do some serious magic with template metaprogramming and the like, but it doesn&#39;t seem like (especially given the answers that come in), that there&#39;s a difference between the two languages in this regard: the answer more or less seems to come down to &quot;no&quot; or &quot;no (except maybe on some systems there&#39;s a preprocessor macro defined that gives an upper bound)&quot;, which is equally applicable to either language."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1459380215, "post_id": 36318928, "comment_id": 60266167, "body": "@mtraceur I agree this is a good post (hence my UV), it is just that, IMO, there is no possible answer that is highly satisfactory.  It is certainty reasonable to survey a number of diverse systems, check their max error message lengths, and use that limit, with x4 for margin.  In this special case of error handling, the whole system is in question and a excessively long error message should be viewed with suspicion.  IMO, it makes sense to limit to few 100 bytes and print a truncated valid message rather than print a 2G byte message from a de-graded system."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1459383024, "post_id": 36318928, "comment_id": 60267081, "body": "@mtraceur: There might be a meta-programming solution: Write a program which \u2013 at build-time \u2013 gets all strings, calculates the length and passes a macro with the max. length to the module or generates a config-file. With a proper build-system, this can be written directly in the build-script. SCons comes into mind, as that is written in Python and the build-scripts are actually Python programs with full access to the features. Doner properly, this is only run once per clean build, so no real impact on incremental builds."}, {"owner": {"reputation": 22432, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 1, "creation_date": 1459401367, "post_id": 36318928, "comment_id": 60272043, "body": "Based on answers going in different directions, could you clarify something: is your concern that some system might have some errno string whose length is close to <code>SSIZE_MAX</code> (incredibly unlikely)?  Or are you planning to write a number of bytes that is already close to <code>SSIZE_MAX</code>, and you are concerned that a moderately long errno string might push you over?"}, {"owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1459403522, "post_id": 36318928, "comment_id": 60272908, "body": "@chux: I see. I suspected that I wouldn&#39;t find a satisfactory answer, but a definitive &quot;no&quot; answer is still valuable, I think. As to the error printing, I agree: a system with huge error messages shouldn&#39;t really be &quot;trusted&quot;. The more I think about it the more I&#39;m starting to fathom just how ridiculous my concern was: honoring an error message which for some reason turns out to be huge may well be the wrong behavior, and I&#39;ve been unquestioningly thinking it&#39;s the &quot;correct&quot; thing for me to account for huge error messages. Truncation may well be the most &quot;right&quot; thing to do in such cases."}, {"owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459403926, "post_id": 36318928, "comment_id": 60273087, "body": "@Olaf: Agreed re: metaprogramming, but to clarify my last comment specifically mentioned C++&#39;s <i>template</i> metaprogramming, in the sense that the only way I could see this developing different answers for the two languages (C vs. C++) was if C++&#39;s templates or other features could be abused to do that search at compile-time, from within the source of the being-compiled program. I think(?) any external program, while an interesting solution, would be outside the scope of the question, since my question explicitly asks if there&#39;s a better way than extrernal bruteforce search to generate a header."}, {"owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "reply_to_user": {"reputation": 22432, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 0, "creation_date": 1459404063, "post_id": 36318928, "comment_id": 60273157, "body": "@NateEldredge: The latter was the line of reasoning that initially caused me to ask the question, though I thought the question was more valuable as stated. Still, I&#39;ll add it to the &quot;Motivation&quot; section in my question, as it&#39;s likely useful contextual information."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1459518056, "post_id": 36318928, "comment_id": 60335423, "body": "@mtraceur: I did not reply to your comment. It was just an idea which came into mind, unrelated to the preceeding comment. (btw., typo: &quot;Doner&quot; should be &quot;Done&quot;; not related to the tasty turkish food - maybe I was a bit hungry:-)"}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1459370625, "post_id": 36319109, "comment_id": 60261976, "body": "I&#39;m inclined to agree that the standard makes no guarantee in this area, but I don&#39;t think cppreference.com is an authoritative reference for that."}], "tags": [], "owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "is_accepted": false, "score": 3, "last_activity_date": 1459390600, "last_edit_date": 1459390600, "creation_date": 1459369806, "answer_id": 36319109, "question_id": 36318928, "link": "https://stackoverflow.com/questions/36318928/c-c-maximum-size-of-errno-associated-strings-at-compile-time/36319109#36319109", "title": "C/C++: maximum size of errno-associated strings (at compile-time)", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/string/byte/strerror\" rel=\"nofollow\">The standards make no guarantees</a> about the size limits of the null-terminated string returned by <code>strerror</code>.</p>\n\n<p>In practice, this is never going to be an issue. However, if you're that paranoid about it, I would suggest that you just copy the string returned from <code>strerr</code> and clamp its length to <code>SSIZE_MAX</code> before passing it to <code>writev</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "edited": false, "score": 0, "creation_date": 1459374032, "post_id": 36319243, "comment_id": 60263810, "body": "+1, though note that having an upper bound would be great for choosing a size for the buffer passed to <code>strerror_r</code> as well, reducing the need for runtime logic. Also, I had considered and was aware of the maxima-could-change-out-from-under-your-program situation - but I was hoping that there was some standard limitation, or at least platform-specific macros we could check on at least some systems, that could&#39;ve possibly made that a non-issue for at least some systems, hence the question."}, {"owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "edited": false, "score": 1, "creation_date": 1459405336, "post_id": 36319243, "comment_id": 60273835, "body": "In particular, it&#39;s noteworthy that POSIX (per your link) allows <code>strerror_r</code> to fail with an <code>ERANGE</code> if the buffer given to it isn&#39;t big enough: my reading suggests that an implementation which checks for the length first, and errors out without writing anything, would be standard-compliant. I want to believe no implementation does this, or I&#39;m misreading, but if so, then it seems without knowing an upper bound it seems we must either err on the side of a moderately generous buffer to hold it, or a loop to reallocate until it returns success?"}, {"owner": {"reputation": 583, "user_id": 1069745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IVqrE.png?s=128&g=1", "display_name": "Carlos O&#39;Donell", "link": "https://stackoverflow.com/users/1069745/carlos-odonell"}, "reply_to_user": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "edited": false, "score": 1, "creation_date": 1459525560, "post_id": 36319243, "comment_id": 60340505, "body": "There is no guarantee that the <code>strerrorbuf</code> was modified by a call to <code>strerror_r</code> which returned <code>ERANGE</code>. So you must be prepared to handle the various combinations of returns as specified in the normative text of the standard."}, {"owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "edited": false, "score": 0, "creation_date": 1459532101, "post_id": 36319243, "comment_id": 60344419, "body": "After a few days of contemplation, I am (tentatively) accepting this answer, because it is both 1) general and 2) provides the most thorough explanations as to why such information could not (and perhaps should not) be available at compile time for many implementations."}], "tags": [], "owner": {"reputation": 583, "user_id": 1069745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IVqrE.png?s=128&g=1", "display_name": "Carlos O&#39;Donell", "link": "https://stackoverflow.com/users/1069745/carlos-odonell"}, "is_accepted": true, "score": 16, "last_activity_date": 1459370319, "creation_date": 1459370319, "answer_id": 36319243, "question_id": 36318928, "link": "https://stackoverflow.com/questions/36318928/c-c-maximum-size-of-errno-associated-strings-at-compile-time/36319243#36319243", "title": "C/C++: maximum size of errno-associated strings (at compile-time)", "body": "<p>The C library that you build against may not be the same (ABI compatible C library maybe used) or even exact version of the C library (On GNU/Linux consider glibc 2.2.5 vs. glibc 2.23) that you run against, therefore computing the maximum size of the locale-dependent string returned from <code>strerror</code> can only be done at runtime during process execution. On top of this the locale translations may be updated on the target system at any time, and this again invalidates any pre-computation of this upper bound.</p>\n\n<p>Unfortunately there is no guarantee that the values returned by <code>strerror</code> are constant for the lifetime of the process, and so they may also change at a later time, thus invalidating any early computation of the bound.</p>\n\n<p>I suggest using <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/strerror.html\">strerror_r</a> to save the error string and avoid any issues with non-multi-thread aware libraries that might call sterror and possibly change the result of the string as you are copying it. Then instead of translating the string on-the-fly you would use the saved result, and potentially truncate to <code>SSIZE_MAX</code> (never going to happen in reality).</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1459370888, "post_id": 36319264, "comment_id": 60262135, "body": "Detail: &quot;This is because usable system memory (usable directly by your C program) can be no larger than SIZE_MAX&quot; --&gt; disagree,  <code>SIZE_MAX</code> is the max value of an array index for a <i>single</i> array, not the maximum amount of memory.  Concerning <code>SSIZE_MAX</code>: that is not defined in C, so best to cite your reference."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1459371221, "post_id": 36319264, "comment_id": 60262316, "body": "<code>SIZE_MAX</code> is also the maximum size of the portion of a C2011 <code>struct</code> up to but not including the last member, because it is the type of the result of the standard <code>offsetof()</code> macro."}, {"owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459453275, "post_id": 36319264, "comment_id": 60306463, "body": "@chux: standard C has a flat (von Neumann) memory model, and all of that memory may be treated as a single array (<code>((char *)0)[x]</code>). C compilers for Harvard (like most AVR and 8051 MCUs) , segmented (like 80286), or other systems often use non-standard language extensions to achieve access to the different areas of memory or introduce restrictions to language features to avoid some memory model issues. the answer of <a href=\"http://stackoverflow.com/questions/8649018/what-is-the-difference-between-ssize-t-and-ptrdiff-t\" title=\"what is the difference between ssize t and ptrdiff t\">stackoverflow.com/questions/8649018/&hellip;</a> disagrees, but writev on with those imitations would be severely limited."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1459453618, "post_id": 36319264, "comment_id": 60306675, "body": "Post C stand references that support that.  By my reading there are none, so disagree with the unsupported &quot;standard C has a flat (von Neumann) memory model, and all of that memory may be treated as a single array (((char *)0)[x])&quot; and <i>only</i> that model."}], "tags": [], "owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "is_accepted": false, "score": 2, "last_activity_date": 1459370402, "creation_date": 1459370402, "answer_id": 36319264, "question_id": 36318928, "link": "https://stackoverflow.com/questions/36318928/c-c-maximum-size-of-errno-associated-strings-at-compile-time/36319264#36319264", "title": "C/C++: maximum size of errno-associated strings (at compile-time)", "body": "<p>It is safe to assume that <code>SSIZE_MAX</code> will be greater than the longest string (character array) that strerror returns in a normal C or C++ system.  This is because usable system memory (usable directly by your C program) can be no larger than <code>SIZE_MAX</code> (an unsigned integer value) and <code>SSIZE_MAX</code> will have at least the same number of bits so using 2's compliment math to account for the signed nature of SSIZE_MAX (and ssize_t) SSIZE_MAX will be at least 1/2 the size of system memory.</p>\n"}, {"comments": [{"owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "edited": false, "score": 1, "creation_date": 1459400780, "post_id": 36319444, "comment_id": 60271858, "body": "I was able to get <code>NL_TEXTMAX</code> defined by defining <code>_GNU_SOURCE</code>. I therefore suspect that a sufficiently &quot;high&quot; value defined for <code>_POSIX_C_SOURCE</code> would get it included. Anyway, the value was <code>0x7fffffff</code>, or 2147483647. Not too inspiring on its own - though <code>SSIZE_MAX</code> was twice as wide (8 more trailing <code>f</code> digits)."}, {"owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "edited": false, "score": 0, "creation_date": 1459532466, "post_id": 36319444, "comment_id": 60344613, "body": "For the record, I +1&#39;ed this as well, and I appreciated the information given with regard to my specific use-case. Even though I currently accepted another answer, I think this is the next-best answer, because it covers information not given in the main answer, and does suggest (albeit inconclusively) that some implementations, or other standards built on top of the language specifications, might in fact define some sort of upper limits."}], "tags": [], "owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "is_accepted": false, "score": 5, "last_activity_date": 1459371050, "creation_date": 1459371050, "answer_id": 36319444, "question_id": 36318928, "link": "https://stackoverflow.com/questions/36318928/c-c-maximum-size-of-errno-associated-strings-at-compile-time/36319444#36319444", "title": "C/C++: maximum size of errno-associated strings (at compile-time)", "body": "<p>I'm not aware that the C or C++ standards make any assertions regarding the length of these messages. The platforms you're interested in might provide some stronger implementation-defined guarantees, though.</p>\n\n<p>For example, for POSIX systems, I found the following in <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/basedefs/limits.h.html\" rel=\"noreferrer\"><code>limits.h</code></a>.</p>\n\n<blockquote>\n  <p>The following constants shall be defined on all implementations in <code>&lt;limits.h&gt;</code>:</p>\n  \n  <ul>\n  <li>[\u2026]</li>\n  <li><code>{NL_TEXTMAX}</code><br />\n  Maximum number of bytes in a message string.<br />\n  Minimum Acceptable Value: <code>{_POSIX2_LINE_MAX}</code></li>\n  </ul>\n</blockquote>\n\n<p>I believe that error messages produced by <code>strerror</code> would fall into this category.</p>\n\n<p>That said, I'm unable to get this macro on my system. However, I do have <code>_POSIX2_LINE_MAX</code> (from <code>&lt;unistd.h&gt;</code>). It is <code>#define</code>d to 2048. Since the standard only says that this is a lower bound, that might not be too helpful, though.</p>\n"}], "owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1513, "favorite_count": 1, "accepted_answer_id": 36319243, "answer_count": 4, "score": 16, "last_activity_date": 1542325314, "creation_date": 1459369163, "last_edit_date": 1542325314, "question_id": 36318928, "link": "https://stackoverflow.com/questions/36318928/c-c-maximum-size-of-errno-associated-strings-at-compile-time", "title": "C/C++: maximum size of errno-associated strings (at compile-time)", "body": "<h2>Question</h2>\n\n<p>Is there any way to get the maximum size of any string correlated with <code>errno</code> at compile time (at preprocessor time would be even better)? E.g. an upper bound on <code>strlen(strerror(errno))</code>?</p>\n\n<h2>My Thoughts</h2>\n\n<p>The best I can think of is running a program to do a brute-force search over the range of an int, over each locale, to get the string associated with each {errno, locale} pair, get its size, and generate a header on that system, then hooking that into e.g. a makefile or autoconf or whatever. I can't think of a better way to do it, but it seems ridiculous that it would be so: the standard library for a system has that information built-in, if only implicitly. Is there really no good way to get that information?</p>\n\n<p>Okay, I'll admit the C and/or C++ standards might permit for error strings generated at runtime, with e.g. specific-to-circumstance messages (e.g. <code>strerror(EINVAL)</code> giving a string derived from other runtime metadata set when <code>errno</code> was last set, or something) - not sure if that <em>is</em> allowed, and I'd actually welcome such an implementation, but I've never heard of one existing which did so, or had more than one string for a given {<code>errno</code>, locale} pair.</p>\n\n<h2>Motivation</h2>\n\n<p>For context, what I specifically wanted (but I think this question is valuable in a more general way, as was discussed amongst the comments) that led to this question was to be able to use the error string associated with <code>errno</code> in the syscall/function <code>writev</code>. In my specific usecase, I was using strings out of <code>argv</code> <em>and</em> <code>errno</code>-linked strings. This set my \"worst-case\" length to <code>ARG_MAX</code> + <code>some max errno string length</code> + <code>size of a few other small strings</code>).</p>\n\n<p>Every *nix document I've consulted seems to indicate <code>writev</code> will (or \"may\", for what little good that difference makes in this case) error out with <code>errno</code> set to <code>EINVAL</code> if the sum of the <code>iov_len</code> values overflows <code>SSIZE_MAX</code>. Intuitively, I know every <code>errno</code> string I've seen is very short, and in practice this is a non-issue. But I don't want my code mysteriously failing to print an error at all on some system if it's possible for this assumption to be false. So I wrote code to handle such a case - but at the same time, I don't want that additional code being compiled in for the platforms which generally clearly don't need it.</p>\n\n<p>The combined input of the answers and comments so far is making me lean towards thinking that in my particular use-case, the \"right\" solution is to just truncate obscenely long messages - but this is why I asked the question how I did initially: such information would also help select a size for a buffer to <code>strerror_r</code>/<code>strerror_s</code> (*nix/Windows respectively), and even a negative answer (e.g. \"you can't really do it\") is in my view useful for others' education.</p>\n\n<h2>Related</h2>\n\n<p><a href=\"https://stackoverflow.com/questions/22856387/maximum-size-of-message-for-strerror-r-on-vxworks\">This question</a> contains answers for the strings given by <code>strerror_r</code> on VxWorks, but I don't feel comfortable generalizing that to all systems.</p>\n"}, {"tags": ["c++", "gtkmm"], "comments": [{"owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "edited": false, "score": 1, "creation_date": 1459369140, "post_id": 36318815, "comment_id": 60261123, "body": "Try adding <code>-std=c++11</code>"}, {"owner": {"reputation": 13, "user_id": 1763081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7fb17072cdccbe517b0bd546331a476?s=128&d=identicon&r=PG", "display_name": "Pajke", "link": "https://stackoverflow.com/users/1763081/pajke"}, "reply_to_user": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "edited": false, "score": 0, "creation_date": 1459369457, "post_id": 36318815, "comment_id": 60261315, "body": "@marco-a Thank you a lot, that have solved my problem."}, {"owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "edited": false, "score": 0, "creation_date": 1459370891, "post_id": 36318815, "comment_id": 60262136, "body": "You&#39;re welcome. I&#39;ll make that an answer."}, {"owner": {"reputation": 261, "user_id": 1529540, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qhq8p.png?s=128&g=1", "display_name": "HereToRelax", "link": "https://stackoverflow.com/users/1529540/heretorelax"}, "edited": false, "score": 0, "creation_date": 1549936000, "post_id": 36318815, "comment_id": 96075077, "body": "it seems to work without &quot;org.gtkmm.examples.base&quot;, why would i wanna type that extra stuff?"}], "answers": [{"tags": [], "owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "is_accepted": true, "score": 1, "last_activity_date": 1459370876, "creation_date": 1459370876, "answer_id": 36319390, "question_id": 36318815, "link": "https://stackoverflow.com/questions/36318815/gtkmm-simple-example-compiling-error/36319390#36319390", "title": "GTKmm Simple example compiling error", "body": "<p>You need to enable C++11 (or higher) in order to use <code>auto</code> and type deduction.</p>\n\n<p>Add</p>\n\n<pre><code>-std=c++11\n</code></pre>\n\n<p>to your compilation command line.</p>\n"}, {"tags": [], "owner": {"reputation": 308, "user_id": 1191059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5a797e2a8ad5c984735cd789a9ee8bd?s=128&d=identicon&r=PG", "display_name": "Blake", "link": "https://stackoverflow.com/users/1191059/blake"}, "is_accepted": false, "score": 1, "last_activity_date": 1459518678, "creation_date": 1459518678, "answer_id": 36358118, "question_id": 36318815, "link": "https://stackoverflow.com/questions/36318815/gtkmm-simple-example-compiling-error/36358118#36358118", "title": "GTKmm Simple example compiling error", "body": "<p>If you don't want to use C++11 you can fully specify the type for app as well.</p>\n\n<pre><code>Glib::RefPtr&lt;Gtk::Application&gt; app =\n    Gtk::Application::create(argc, argv, \"org.gtkmm.examples.base\");\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 1763081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7fb17072cdccbe517b0bd546331a476?s=128&d=identicon&r=PG", "display_name": "Pajke", "link": "https://stackoverflow.com/users/1763081/pajke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 733, "favorite_count": 0, "accepted_answer_id": 36319390, "answer_count": 2, "score": 1, "last_activity_date": 1459518678, "creation_date": 1459368805, "question_id": 36318815, "link": "https://stackoverflow.com/questions/36318815/gtkmm-simple-example-compiling-error", "title": "GTKmm Simple example compiling error", "body": "<p>I am trying to compile simple example from Gtkmm book. The code that I am using is in simple.cc file  </p>\n\n<pre><code>#include &lt;gtkmm.h&gt;\nint main(int argc, char *argv[])\n{\nauto app =\nGtk::Application::create(argc, argv,\n  \"org.gtkmm.examples.base\");\n\nGtk::Window window;\nwindow.set_default_size(200, 200);\n\nreturn app-&gt;run(window);\n}\n</code></pre>\n\n<p>and I try to compile it from command line in following way </p>\n\n<pre><code>g++ -o simple.o simple.cc `pkg-config gtkmm-3.0 --cflags --libs`\n</code></pre>\n\n<p>from which I get following errors:</p>\n\n<pre><code>simple.cc: In function \u2018int main(int, char**)\u2019:\nsimple.cc:5:8: error: \u2018app\u2019 does not name a type\nauto app =\n     ^\nsimple.cc:12:10: error: \u2018app\u2019 was not declared in this scope\nreturn app-&gt;run(window);\n       ^\n</code></pre>\n\n<p>I am using Linux Mint 17.3 and have gtkmm 3.10.1 installed.</p>\n"}, {"tags": ["c++", "algorithm", "dynamic", "c++14", "subset-sum"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1459368463, "post_id": 36318615, "comment_id": 60260749, "body": "At first glance this sounds like a <a href=\"https://en.wikipedia.org/wiki/Bin_packing_problem\" rel=\"nofollow noreferrer\">bin packing problem</a>. (with one bin)."}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 6126838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d84301ace75c854d6be27c6c33e54cb?s=128&d=identicon&r=PG&f=1", "display_name": "Grundlebear", "link": "https://stackoverflow.com/users/6126838/grundlebear"}, "is_accepted": true, "score": 1, "last_activity_date": 1459649552, "creation_date": 1459649552, "answer_id": 36380903, "question_id": 36318615, "link": "https://stackoverflow.com/questions/36318615/having-trouble-implementing-pseudocode-for-subset-sum/36380903#36380903", "title": "Having trouble implementing pseudocode for Subset Sum", "body": "<p>I figured it out! Here is my solution:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nusing std::vector;\n\nint optimal_weight(int W, const vector&lt;int&gt; &amp;wt) {\n  //write your code here\n\n  int n = wt.size();\n  vector&lt;vector&lt;int&gt; &gt; matrix;\n  matrix.resize(W+1);\nfor(int i = 0; i &lt; W+1; i++){\n    matrix[i].resize(n);\n}\n  for(int j = 0; j &lt; n; j++){\n      matrix[0][j] = 0;\n  }\n    for(int w = 0; w &lt; W + 1; w++){\n      matrix[w][0] = 0;\n  }\n  for(int i = 1; i &lt; n; i++){\n      for(int w = 1; w &lt; W+1; w++){\n          matrix[w][i] = matrix[w][i-1];\n          if(wt[i] &lt;= w){\n              //cout &lt;&lt; wt[i] &lt;&lt; endl;\n              int val = matrix[w-wt[i]][i-1] + wt[i];\n              if(matrix[w][i] &lt; val){\n                  matrix[w][i] = val;\n              }\n          }\n      }\n  }\n\n  return matrix[W][n-1];\n\n\n}\n\nint main() {\n  int n, W;\n  std::cin &gt;&gt; W &gt;&gt; n;\n  vector&lt;int&gt; wt(n+1);\n  for (int i = 1; i &lt; n+1; i++) {\n      wt[0]=0;\n    std::cin &gt;&gt; wt[i];\n  }\n  std::cout &lt;&lt; optimal_weight(W, wt) &lt;&lt; '\\n';\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6126838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d84301ace75c854d6be27c6c33e54cb?s=128&d=identicon&r=PG&f=1", "display_name": "Grundlebear", "link": "https://stackoverflow.com/users/6126838/grundlebear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "accepted_answer_id": 36380903, "answer_count": 1, "score": -1, "last_activity_date": 1459649552, "creation_date": 1459368093, "last_edit_date": 1459371456, "question_id": 36318615, "link": "https://stackoverflow.com/questions/36318615/having-trouble-implementing-pseudocode-for-subset-sum", "title": "Having trouble implementing pseudocode for Subset Sum", "body": "<p>so I am trying to implement the following pseudocode but it will not work as it is supposed to.  Here is the problem description in the slide, \"Given an integer bound, \"W\", and a collection of \"n\" items, each with a positive integer weight \"wi\", find a subset S of items that: maximizes Sigma sub i where i is an element of S \"wi\" while keeping this sum less than or equal or to W.  I will attach the following slides for where I am getting the problem description and pseudocode from.  The problem with my implementation is that it will only find the total max value and not the value that is less than or equal to the weight.  So for example, if I had Weight 10 (W = 10) and items 3 (n = 3) with item weights 1, 4, &amp; 8 then the following answer should be 9; however, my solution gives 12.  Here are the slides (*Please not, where it says w[j] it is meant to be w[i] - the slide had a typo):</p>\n\n<p><a href=\"https://i.stack.imgur.com/HEMey.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HEMey.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/4sSww.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4sSww.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is my code that implements the pseudocode:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\nint max(int a, int b, int c) {\n             if (a &gt;= b)\n                return a;\n             else\n                return b;       \n          }\n\nint optimal_weight(int W, const vector&lt;int&gt; &amp;wt, int n){\n    vector&lt;vector&lt;int&gt; &gt; M;\n    M.resize(n+1);\n    for(int i = 0; i &lt; n+1; ++i){\n        M[i].resize(W+1);\n    }\n    for(int w = 0; w &lt; W+1; w++){\n        M[0][w] = 0;\n    }\n    for(int i = 1; i &lt; n+1; i++){\n        M[i][0] = 0;\n    }\n\nfor(int i = 1; i &lt; n+1; i++){\n    for(int w = 0; w &lt; W+1; w++){\n        if(wt[i] &gt; w){\n            M[i][w] = M[i-1][w];\n        }\n\n        M[i][w] = max(M[i-1][w], wt[i] + M[i-1][W-wt[i]], W);\n    }\n}\n\n\n\n   for (int i = 0; i &lt;= n; i++)\n     {\n       for (int j = 0; j &lt;= W; j++)\n          printf (\"%4d\", M[i][j]);\n       printf(\"\\n\");\n     } \n\n    return M[n][W];\n} \n\nint main()\n{\n    //int val[] = {1, 1, 1};\n    int W;\n    int n;\n    cin &gt;&gt; W &gt;&gt; n;\n    vector&lt;int&gt; wt(n);\n    for(int i = 0; i &lt; n; i++){\n        cin &gt;&gt; wt[i];\n    }\n    cout &lt;&lt; optimal_weight(W, wt, n) &lt;&lt; endl;\n\n}\n</code></pre>\n\n<p>Thank you for any help!</p>\n"}, {"tags": ["c++", "inheritance", "polymorphism", "c++14"], "answers": [{"comments": [{"owner": {"reputation": 579, "user_id": 5380257, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9be6f57ec6dd186a17be2468f2e658b3?s=128&d=identicon&r=PG&f=1", "display_name": "LBaelish", "link": "https://stackoverflow.com/users/5380257/lbaelish"}, "edited": false, "score": 0, "creation_date": 1459526626, "post_id": 36335507, "comment_id": 60341174, "body": "Hows this sound- I ended up making Tree a separate class altogether and I made the equivalent of a binaryNode abstract class. Tree is constructed with a pointer to a binary node derived  class"}], "tags": [], "owner": {"reputation": 138646, "user_id": 1081897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46b160c4e606ce0be84dae336ab25f0?s=128&d=identicon&r=PG&f=1", "display_name": "D Stanley", "link": "https://stackoverflow.com/users/1081897/d-stanley"}, "is_accepted": true, "score": 0, "last_activity_date": 1459432514, "creation_date": 1459432514, "answer_id": 36335507, "question_id": 36318589, "link": "https://stackoverflow.com/questions/36318589/derived-class-constructor-calling-base-class-constructor/36335507#36335507", "title": "Derived class constructor calling base class constructor", "body": "<p>It sounds like you have merged the classes of <code>Tree</code> and <code>Node</code>.  You are initializing <code>Tree</code> in the constructor with a single \"root\" tree, when it should have a \"root <code>Node</code> that itself has two children.  In that case, <code>Node</code> wouldn't inherit from <code>Tree</code> - you would have two separate classes.  </p>\n\n<p>Or perhaps you have an abstract <code>Node</code> class and a <code>BinaryNode</code> that inherits it to represnet a node with two children, opening up the door for different node types (nodes with more than two children, or unbalanced children).</p>\n\n<p>So to answer your question, yes it seems odd that you are initializing the \"base\" with a default value, but I think it's because your class hierarchy is wrong.  Meaning <code>derivedClassA</code> <em>is not</em> a <code>Tree</code>.</p>\n"}], "owner": {"reputation": 579, "user_id": 5380257, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9be6f57ec6dd186a17be2468f2e658b3?s=128&d=identicon&r=PG&f=1", "display_name": "LBaelish", "link": "https://stackoverflow.com/users/5380257/lbaelish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 36335507, "answer_count": 1, "score": 0, "last_activity_date": 1460414949, "creation_date": 1459368027, "last_edit_date": 1460414949, "question_id": 36318589, "link": "https://stackoverflow.com/questions/36318589/derived-class-constructor-calling-base-class-constructor", "title": "Derived class constructor calling base class constructor", "body": "<p>My question is whether or not it's ok call the base class constructor as being initialized to <code>nullptr</code> the way I have below in <code>derivedClassA</code>. The code works as expected but it still feels wrong.</p>\n\n<p>For the sake of length I have omitted other classes that are derived from class <code>Tree</code> , but the idea here is that you can create a Tree object that has any number of derived classes, and call <code>getStringExpression()</code> and it will return whatever getStringExpression evaluates to. For example, if an object of type <code>Tree</code> contains a pointer to an object of <code>DerivedClassA</code>, which has right and left children equal to \"Car\" and \"Ride\" then <code>Tree.getStringExpression();</code> would return \"(Car + Ride)\". Assume the values Car and Ride are returned by concrete classes derived from Tree that return the string \"Car\" and \"Ride\" respectively when their <code>getStringExpression()</code> method is called (and they have no children).</p>\n\n<p>It feels wrong to initialize the base class constructor to nullptr the way I have in derivedClassA because if I create a single object of derivedClassA, then this object is the root node with its two children created during its construction. What happens to the constructed <code>Tree</code> in this scenario? Since it's pointer is nullptr it's not really being used or it's sort of disconnected or univolved with the object of <code>derivedClassA</code>...</p>\n\n<p>I apologize in advance because I know this isn't the most straightforward question.</p>\n\n<p>Tree.h-</p>\n\n<pre><code>class Tree\n{\npublic:\n    explicit Tree(Tree *rootNode);\n    virtual ~Tree() {};\n    virtual std::string getStringExpression() const;\nprivate:\n    Tree *rootNodePtr = nullptr;\n};\n</code></pre>\n\n<p>Tree.cpp-</p>\n\n<pre><code>#include \"Tree.h\"\n\nTree::Tree(Tree *rootNode)\n{\n    rootNodePtr = rootNode;\n}\n\nstd::string Tree::getStringExpression() const\n{\n    if(rootNodePtr != nullptr)\n    {\n        return rootNodePtr-&gt;getStringExpression();\n    }\n        return \"Tree has no children\";\n}\n</code></pre>\n\n<p>derivedClassA.h-</p>\n\n<pre><code>#include \"Tree.h\"\nclass derivedClassA :\n    public Tree\n{\npublic:\n    derivedClassA(Tree *leftChild, Tree *rightChild);\n    virtual ~derivedClassA();\n    virtual std::string getStringExpression() const override;\nprivate:\n    Tree *leftChildPtr = nullptr;\n    Tree *rightChildPtr = nullptr;\n\n};\n</code></pre>\n\n<p>derivedClassA.cpp-</p>\n\n<pre><code>#include \"derivedClassA.h\"\n\nderivedClassA::derivedClassA(Tree *leftChild, Tree *rightChild): Tree(nullptr)\n{\n    leftChildPtr = leftChild;\n    rightChildPtr = rightChild;\n\n}\n\n\nderivedClassA::~derivedClassA()\n{\n}\n\nstd::string derivedClassA::getStringExpression() const\n{\n    auto expressionValue = \"(\" + leftChildPtr-&gt;getStringExpression() + \"+\" + rightChildPtr-&gt;getStringExpression() + \")\";\n    return expressionValue;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt5"], "comments": [{"owner": {"reputation": 459, "user_id": 4821153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e0d9d9969534941d0bd55b8833e08b66?s=128&d=identicon&r=PG&f=1", "display_name": "Varius", "link": "https://stackoverflow.com/users/4821153/varius"}, "edited": false, "score": 0, "creation_date": 1459368218, "post_id": 36318572, "comment_id": 60260596, "body": "Create a pointer <code>QPushButton *button</code> but no instance of it. Try to call a method of <code>button</code> and it will crash (if I understood your question correctly)"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1459375617, "post_id": 36318572, "comment_id": 60264512, "body": "The dereference of a null pointer will crash on pretty much any platform Qt runs on, with exception of some big iron (mainframes), unless the compiler optimizes it out (according to the standard, it can!)."}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1459376000, "post_id": 36318572, "comment_id": 60264665, "body": "On Windows you can write a DLL that crashes, then inject it into your process with MS Detours."}], "answers": [{"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 0, "last_activity_date": 1459368689, "creation_date": 1459368689, "answer_id": 36318771, "question_id": 36318572, "link": "https://stackoverflow.com/questions/36318572/how-to-simulate-a-crash-in-qt/36318771#36318771", "title": "How to simulate a crash in Qt?", "body": "<p>You can trigger a segfault using the signal Linux library:</p>\n\n<pre><code>#include &lt;signal.h&gt;\n\nvoid raiseSegfault()\n{\n    int error = raise(SIGSEGV);\n    if (error != 0) {\n        std::cout &lt;&lt; \"cannot raise segfault\" &lt;&lt; std::endl;\n        exit(0);\n    }\n}\n</code></pre>\n\n<p>This will reliably raise a segmentation fault or exit and will not rely on undefined behaviour.</p>\n"}, {"tags": [], "owner": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "is_accepted": false, "score": 2, "last_activity_date": 1459369105, "last_edit_date": 1459369105, "creation_date": 1459368737, "answer_id": 36318791, "question_id": 36318572, "link": "https://stackoverflow.com/questions/36318572/how-to-simulate-a-crash-in-qt/36318791#36318791", "title": "How to simulate a crash in Qt?", "body": "<p>You could throw an exception and never catch it, this may or may not be what you are looking for.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>this is the cross-platform most robust solution i could find: <a href=\"http://en.cppreference.com/w/cpp/utility/program/raise\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/utility/program/raise</a></p>\n\n<p><strike>\nIf you are using *nix systems, you can use the <a href=\"http://man7.org/linux/man-pages/man3/raise.3.html\" rel=\"nofollow\">raise</a> call. </p>\n\n<p>I assume you are already platform specific as you are making a crash report, which i know of no way to make cross platform at the moment. I don't know about a similar solution that would work in a windows environment, one probably exists.</strike></p>\n"}, {"comments": [{"owner": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "edited": false, "score": 1, "creation_date": 1459369203, "post_id": 36318920, "comment_id": 60261155, "body": "LOL, even if it work&#39;ed 100% of the time, he probably can&#39;t use it for the purpose of a crash report. You have my up-vote for the creativity though :)"}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "reply_to_user": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "edited": false, "score": 0, "creation_date": 1459369353, "post_id": 36318920, "comment_id": 60261252, "body": "@user1708860 didn&#39;t try, but I&#39;d say it would give a proper crash report."}, {"owner": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "edited": false, "score": 0, "creation_date": 1459369932, "post_id": 36318920, "comment_id": 60261581, "body": "signal 6 is thrown when an internal error occurs such as stackoverflow. <a href=\"http://stackoverflow.com/questions/3413166/when-does-a-process-get-sigabrt-signal-6\" title=\"when does a process get sigabrt signal 6\">stackoverflow.com/questions/3413166/&hellip;</a> . Which means that any allocation from this point on, including stack allocations, may not work. That makes it alot harder to make a crash report... (I can&#39;t find any other resources on this matter, so i could be horribly wrong here, it&#39;s based mostly on what wer&#39;e doing with our signal handlers)"}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "reply_to_user": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "edited": false, "score": 1, "creation_date": 1459370338, "post_id": 36318920, "comment_id": 60261803, "body": "@user1708860 I&#39;ve tested on my machine, I get SIGSEGV (segfault). Strange ...?"}, {"owner": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "edited": false, "score": 0, "creation_date": 1459370450, "post_id": 36318920, "comment_id": 60261871, "body": "I this that this is undefined behavior, we could both be right, and we could both be wrong."}, {"owner": {"reputation": 3434, "user_id": 2513177, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/zH4az.jpg?s=128&g=1", "display_name": "Vincent Duprez", "link": "https://stackoverflow.com/users/2513177/vincent-duprez"}, "edited": false, "score": 0, "creation_date": 1459370698, "post_id": 36318920, "comment_id": 60262023, "body": "On my machine, the app crashes without crash report (Mac OSX)"}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "edited": false, "score": 0, "creation_date": 1459370705, "post_id": 36318920, "comment_id": 60262033, "body": "I&#39;d say not UB but implementation dependant. We&#39;re just asking for infinite resources, aren&#39;t we ?"}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "reply_to_user": {"reputation": 3434, "user_id": 2513177, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/zH4az.jpg?s=128&g=1", "display_name": "Vincent Duprez", "link": "https://stackoverflow.com/users/2513177/vincent-duprez"}, "edited": false, "score": 0, "creation_date": 1459370759, "post_id": 36318920, "comment_id": 60262060, "body": "@VincentDuprez interesting. NB Windows here."}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "reply_to_user": {"reputation": 3434, "user_id": 2513177, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/zH4az.jpg?s=128&g=1", "display_name": "Vincent Duprez", "link": "https://stackoverflow.com/users/2513177/vincent-duprez"}, "edited": false, "score": 0, "creation_date": 1459371698, "post_id": 36318920, "comment_id": 60262613, "body": "@VincentDuprez I also had to mention qFatal just in case, since you&#39;re asking specifically for Qt."}], "tags": [], "owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "is_accepted": true, "score": 7, "last_activity_date": 1459371631, "last_edit_date": 1459371631, "creation_date": 1459369135, "answer_id": 36318920, "question_id": 36318572, "link": "https://stackoverflow.com/questions/36318572/how-to-simulate-a-crash-in-qt/36318920#36318920", "title": "How to simulate a crash in Qt?", "body": "<p>Remember, we're on <strong>StackOverflow</strong> :-)</p>\n\n<p>How about:</p>\n\n<pre><code>int foo(int p) {\n    return foo(p)+foo(p);\n}\n\nfoo(0);\n</code></pre>\n\n<p>PS for something tamer and more Qt-specific, you can experiment with qFatal:</p>\n\n<pre><code>qFatal(\"boom\");\n</code></pre>\n"}], "owner": {"reputation": 3434, "user_id": 2513177, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/zH4az.jpg?s=128&g=1", "display_name": "Vincent Duprez", "link": "https://stackoverflow.com/users/2513177/vincent-duprez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 0, "accepted_answer_id": 36318920, "answer_count": 3, "score": 3, "last_activity_date": 1459411020, "creation_date": 1459367976, "last_edit_date": 1459411020, "question_id": 36318572, "link": "https://stackoverflow.com/questions/36318572/how-to-simulate-a-crash-in-qt", "title": "How to simulate a crash in Qt?", "body": "<p>Very simple question but I can't find any solution on the net.</p>\n\n<p><strong>Is it possible to force a Qt app to crash?</strong></p>\n\n<p>This is only for development purposes as I'd like to experiment with the crash report.</p>\n"}, {"tags": ["c++", "arrays", "if-statement"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1459368141, "post_id": 36318565, "comment_id": 60260560, "body": "It is probably not the issue but any name starting with an underscore and a capital letter like <code>_Type</code> is reserved for the implementation and should not be used."}, {"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "edited": false, "score": 6, "creation_date": 1459368149, "post_id": 36318565, "comment_id": 60260569, "body": "<code>acos()</code> will generally return values in the range [-pi, pi]. I don&#39;t think you&#39;ll ever see it exceed 45 as your code suggests."}, {"owner": {"reputation": 29, "user_id": 6130376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb770dcee80a1d9b4d95bb72c1470b1?s=128&d=identicon&r=PG&f=1", "display_name": "Daria D", "link": "https://stackoverflow.com/users/6130376/daria-d"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1459368245, "post_id": 36318565, "comment_id": 60260606, "body": "@NathanOliver I&#39;ve been taught to declare class attributes like that. Granted function shouldnt be but I cba to change it until it works..."}, {"owner": {"reputation": 734, "user_id": 2387521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98bf0d528ab74149a60fb059d8cdf380?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/2387521/steven"}, "edited": false, "score": 5, "creation_date": 1459368265, "post_id": 36318565, "comment_id": 60260624, "body": "You&#39;re not clear which of the if-statements you&#39;re talking about.  However, I notice you have &quot;angle &gt; 45&quot;, but std::acos() returns a result in radians, not degrees, so that is a suspicious comparison."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 5, "creation_date": 1459368366, "post_id": 36318565, "comment_id": 60260690, "body": "&#39;<i>can&#39;t get the debugger to work</i>&#39; That&#39;s where you should focus your efforts. It&#39;s an essential tool."}, {"owner": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "edited": false, "score": 1, "creation_date": 1459368540, "post_id": 36318565, "comment_id": 60260804, "body": "you can shorten the last couple lines with <code>return S;</code>"}, {"owner": {"reputation": 29, "user_id": 6130376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb770dcee80a1d9b4d95bb72c1470b1?s=128&d=identicon&r=PG&f=1", "display_name": "Daria D", "link": "https://stackoverflow.com/users/6130376/daria-d"}, "reply_to_user": {"reputation": 734, "user_id": 2387521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98bf0d528ab74149a60fb059d8cdf380?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/2387521/steven"}, "edited": false, "score": 0, "creation_date": 1459368571, "post_id": 36318565, "comment_id": 60260827, "body": "@Steven just did a radian conversion, still always returns 1."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1459368660, "post_id": 36318565, "comment_id": 60260861, "body": "@DariaD still unrelated, but you can tell whoever taught you that <a href=\"https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier\"><b>they&#39;re wrong</b></a>."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1459369022, "post_id": 36318565, "comment_id": 60261058, "body": "It&#39;s probably unrelated, but your fist loop should end at 19, due to the i+1 dereference. The code also, change the value of S at every iteration, shouldn&#39;t it break from the loop?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1459369311, "post_id": 36318565, "comment_id": 60261226, "body": "Don&#39;t use <code>pow(x,2)</code>.  Multiply the two values.  There is an overhead when calling the <code>pow</code> function as well as using the internal algorithm.  A single multiplication is far more efficient."}, {"owner": {"reputation": 898, "user_id": 1786967, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/bdb37f71889f136513c7b42f9805666f?s=128&d=identicon&r=PG", "display_name": "timmur", "link": "https://stackoverflow.com/users/1786967/timmur"}, "edited": false, "score": 0, "creation_date": 1459369421, "post_id": 36318565, "comment_id": 60261288, "body": "Your for statement loops outside of your if statement for S. As a result, the S variable that you check for after the end of for loop stores the result of S at the end of the array. Hope that helps."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1459369499, "post_id": 36318565, "comment_id": 60261336, "body": "Printing key variable to <code>stdout</code> is always a debugging option. Add a line <code>std::cout &lt;&lt; &quot;angle: &quot; &lt;&lt; angle &lt;&lt; std::endl;</code> just after computing <code>angle</code>."}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 3, "creation_date": 1459369546, "post_id": 36318565, "comment_id": 60261361, "body": "And if S can only be 0 or 1, what is the use of the final two if-statements? Why not just write <code>return S;</code> instead?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1459369547, "post_id": 36318565, "comment_id": 60261365, "body": "OT:  An array of <code>struct Point {int x, y, z;};</code> would be more efficient than 3 arrays.  The data cache of a processor likes to have its data very close.  For example the value <code>y[0]</code> may be far enough away from <code>x[0]</code> to require another data fetch.  Whereas <code>Point[0].x</code> and <code>Point[0].y</code> are guaranteed to be close to each other to not require another data cache fetch."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1459369670, "post_id": 36318565, "comment_id": 60261437, "body": "You should be using <code>true</code> or <code>false</code> with a <code>bool</code> type, not 0 or 1, which are integers."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 3, "creation_date": 1459369804, "post_id": 36319081, "comment_id": 60261507, "body": "Maybe a better idea is to use the radian constant for 45 degrees instead of calling a function for conversion.  The constant could be declared as <code>45.0*180&#47;M_PI</code>."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1459369821, "post_id": 36319081, "comment_id": 60261523, "body": "and it should <code>return 0;</code> from the loops (not set <code>S = 0;</code>) if <code>angle &gt; 45</code> or <code>distance &gt; 5</code>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1459370095, "post_id": 36319081, "comment_id": 60261667, "body": "@Bob__, that didn&#39;t make sense. Care to elaborate?"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1459370345, "post_id": 36319081, "comment_id": 60261809, "body": "OP uses two loops to check the angle and the distance, inside those loops a flag (S) is set to 0 or 1, but it&#39;s done for every index in the array, so it&#39;s overwritten. The return value of the entire function (in the provided code) depends only by the last two elements in the array."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1459370550, "post_id": 36319081, "comment_id": 60261931, "body": "@Bob__, thanks for the clarification. It makes sense now."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 29, "user_id": 6130376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb770dcee80a1d9b4d95bb72c1470b1?s=128&d=identicon&r=PG&f=1", "display_name": "Daria D", "link": "https://stackoverflow.com/users/6130376/daria-d"}, "edited": false, "score": 0, "creation_date": 1459377400, "post_id": 36319081, "comment_id": 60265213, "body": "@DariaD, The SO way of expressing that an answer has helped you is to <b>accept</b> it. This tells future readers exactly what was the problem at a glance. And it comes with a nice rep boost to both you and the person that helped you."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1459370730, "last_edit_date": 1459370730, "creation_date": 1459369706, "answer_id": 36319081, "question_id": 36318565, "link": "https://stackoverflow.com/questions/36318565/c-if-statements-always-return-true/36319081#36319081", "title": "c++ if statements always return true", "body": "<p>The most likely error is that you are comparing <code>angle</code> to an angle in degree while the return value of <code>acos</code> is in radians.</p>\n\n<pre><code>        if (angle &gt; 45){\n</code></pre>\n\n<p>Convert the angle to degrees before comparing to 45 and you should be OK.</p>\n\n<pre><code>        if (radians_to_degrees(angle) &gt; 45){\n</code></pre>\n\n<p>where </p>\n\n<pre><code>double radians_to_degrees(double in)\n{\n    return (in*180/M_PI);\n}\n</code></pre>\n\n<p>Another option is to compute the equivalent of 45 degrees in radians and compare it with <code>angle</code>.</p>\n\n<pre><code>double const radian_45 = M_PI*45.0/180;\n</code></pre>\n\n<p>and use</p>\n\n<pre><code>        if (angle &gt; radian_45){\n</code></pre>\n\n<p>The other error is spelled out clearly in a comment by @Bob__:</p>\n\n<blockquote>\n  <p>OP uses two loops to check the angle and the distance, inside those loops a flag (<code>S</code>) is set to <code>0</code> or <code>1</code>, but it's done for every index in the array, so it's overwritten. The return value of the entire function (in the provided code) depends only by the last two elements in the array.</p>\n</blockquote>\n"}], "owner": {"reputation": 29, "user_id": 6130376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb770dcee80a1d9b4d95bb72c1470b1?s=128&d=identicon&r=PG&f=1", "display_name": "Daria D", "link": "https://stackoverflow.com/users/6130376/daria-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1459370730, "creation_date": 1459367954, "last_edit_date": 1459369235, "question_id": 36318565, "link": "https://stackoverflow.com/questions/36318565/c-if-statements-always-return-true", "title": "c++ if statements always return true", "body": "<p>I have a bunch of maths manipulations that have thresholds, yet no matter what I change, the if statements always return true. No compile errors, can't get the debugger to work. This is a function, the X Y and Z arrays are all correct (I printed them to check earlier), the maths is right at least for the blade distance check, yet that always returns true. I ran the same code (rewritten obviously) through matlab and that returns true or false depending on my data, so clearly its something with the way I've written this that's wrong. Also is there any way to slimline this?</p>\n\n<pre><code>bool Device::_SafeD(char _Type, float _Data[20][3]) {\n    bool S;\n    double x[20], y[20], z[20];\n    for (int i=0; i&lt;20; i++) {\n        x[i] = _Data[i][0];\n        y[i] = _Data[i][1];\n        z[i] = _Data[i][2];\n    }\n\n    // Check angles for needle\n    if (_Type == 'n') {\n        for (int i=0; i&lt;20; i++) {\n            float dot, moda, modb, c, angle;\n            dot = ((x[i]*x[i+1]) + (y[i]*y[i+1]) + (z[i]*z[i+1]));\n            moda = sqrt(pow(x[i],2)+pow(y[i],2)+pow(z[i],2));\n            modb = sqrt(pow(x[i+1],2)+(y[i+1],2)+(z[i+1],2));\n            c = dot/(moda*modb);\n            angle = acos(c);\n\n            if (angle &gt; 45){\n                S = 0;\n            } else {\n                S = 1;\n            }\n        }\n    }\n\n    // Check distance for blade\n    if (_Type == 'b'){\n        for (int i=0; i&lt;19; i++) {\n            float distance = (x[i+1]-x[i]) + (y[i+1]-y[i]) + (z[i+1]-z[i]);\n            cout &lt;&lt; \"distance \" &lt;&lt; distance &lt;&lt; endl;\n\n            if (distance &gt; 5.0) {\n                S  = 0;\n            } else {\n                S =  1;\n            }\n        }\n    }\n    if (S == 0) {\n        return 0;\n    }\n    if(S == 1) {\n        return 1;\n    }\n}\n</code></pre>\n\n<p>Cheers</p>\n"}, {"tags": ["c++", "constructor"], "comments": [{"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 5, "creation_date": 1459367981, "post_id": 36318498, "comment_id": 60260471, "body": "I don&#39;t understand your requirement, are you specifically requiring to have the data array allocated in a contiguous block following the memory allocated for the object? Otherwise there&#39;s no reason to avoid using <code>std::unique_ptr&lt;double[]&gt;</code> or <code>std::vector&lt;double&gt;</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1459368006, "post_id": 36318498, "comment_id": 60260484, "body": "Instead of using variable sized arrays or dynamic allocation you can use a <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> in you class.  The size of the vector will never change so the size of your class will never change."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1459368219, "post_id": 36318498, "comment_id": 60260597, "body": "Why are you focusing on placement new? Ordinary new will solve the problem, or what?"}, {"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1459368460, "post_id": 36318498, "comment_id": 60260746, "body": "@Jean-BaptisteYun&#232;s The number of elements for each array is not known at compile time. I have no idea how to tell an ordinary <code>new</code> how much space I want to allocate for my arrays."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1459368535, "post_id": 36318498, "comment_id": 60260797, "body": "But why are you so keen on allocating arrays using new? Why can&#39;t you simple have an <code>std::vector&lt;&gt;</code> as a member of your struct? I realize you are dealing with &#39;array-after-struct&#39; pattern, but this is C-style programming. Why do you want to inherit in in C++? Are you trying to limit the number of memory allocations?"}, {"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1459368540, "post_id": 36318498, "comment_id": 60260803, "body": "@NathanOliver I have edited my question to make it more clear that the allocated objects do not vary in size after they are created, but different objects of the same class will have different array sizes from each other."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 3, "creation_date": 1459368594, "post_id": 36318498, "comment_id": 60260837, "body": "<code>new double[length]</code> will do it. But I would suggest you to use <code>vector</code> in place, so you will not have to manage memory explicitly."}, {"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "reply_to_user": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 0, "creation_date": 1459368688, "post_id": 36318498, "comment_id": 60260874, "body": "@Jack There is a nontrivial about of existing C code that I would like to avoid modifying, which does assume that the array elements following the allocated memory."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1459368705, "post_id": 36318498, "comment_id": 60260883, "body": "I&#39;m voting to close this question as off-topic because It is plain weird."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1459368765, "post_id": 36318498, "comment_id": 60260910, "body": "Finally we are getting somewhere! You need struct and array to be contiguos. fair enough. Why didn&#39;t you say it in the very beginning?"}, {"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459368938, "post_id": 36318498, "comment_id": 60261008, "body": "@SergeyA I did try to make that clear in the 6th paragraph: <i>I would like to re-use as much of the existing C code as possible</i>. Perhaps I could have been more explicit."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1459368993, "post_id": 36318498, "comment_id": 60261042, "body": "@Logicrat, I never could afford a working crystal ball. How was I supposed to know that <i>existing code</i> has this requirement? What other important requirements of <i>existing code</i> are you hiding from us?"}, {"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "edited": false, "score": 0, "creation_date": 1459369182, "post_id": 36318498, "comment_id": 60261142, "body": "@DieterL&#252;cking Is it really all that strange to want to allocate memory for an object whose size isn&#39;t known at compile time, while preserving the benefits of the usual C++ ctor and dtor?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1459370085, "post_id": 36318498, "comment_id": 60261662, "body": "@Logicrat: It is when you are trying to allocate hidden field members that are not specified in the type&#39;s declaration. Unless you have a compelling reason to preserve the old C semantics, you should change the C++ code to declare the actual array as its own struct member, preferable as a <code>std::vector</code>. When you allocate a <code>mystruct</code> instance, you don&#39;t need to do weird size calculations, you can simply allocate the array by itself based on the number of values it will hold."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1459369964, "post_id": 36318952, "comment_id": 60261599, "body": "<code>myobject* = new ...</code> is not valid code.  You need to use something more like this instead: <code>myobject *obj = new ...; ... return obj;</code>  Also, your answer does not address the issue of how to free the allocated memory when done using it, especially in regard to <code>placement-new</code>."}, {"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "edited": false, "score": 0, "creation_date": 1459370105, "post_id": 36318952, "comment_id": 60261675, "body": "@SergeyA That looks like a factory approach. My main concern here is, will <code>~myobject()</code> be called properly if I subsequently use <code>delete</code> on a pointer to the object&#39;s parent class?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "edited": false, "score": 0, "creation_date": 1459370410, "post_id": 36318952, "comment_id": 60261841, "body": "@Logicrat, I see no parents here. In parent scenario, you will have to make destructor virtual."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1459370701, "post_id": 36318952, "comment_id": 60262027, "body": "@RemyLebeau, yes, 3rd edit and I agree again :). I think, I finally made it right."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": -1, "last_activity_date": 1459371275, "last_edit_date": 1459371275, "creation_date": 1459369268, "answer_id": 36318952, "question_id": 36318498, "link": "https://stackoverflow.com/questions/36318498/use-constructor-to-allocate-memory/36318952#36318952", "title": "Use constructor to allocate memory", "body": "<p>When the comments finally scheded some light on the actual requirements, the solution would be following:</p>\n\n<ul>\n<li>allocate a buffer large enough to hold your object and the array</li>\n<li>use placement new in the beginning of the buffer</li>\n</ul>\n\n<p>Here is how:</p>\n\n<pre><code>class myobject {\n   myobject(int controls, int coords) : controls(controls), coords(coords) {}\n   ~myobject() {};\npublic:\n   const int controls;\n   const int coords;\n   static myobject* create(int controls, int coords) {\n       std::unique_ptr&lt;char&gt; buffer = new char[sizeof(myobject) + (controls + coords*2) * sizeof(double)];\n       myobject obj* = new (buffer.get()) myobject(controls, coords);\n       buffer.release();\n\n       return obj;\n   }\n   void dispose() {\n       ~myobject();\n       char* p = (char*)this;\n       delete[] p;\n   }\n};\n</code></pre>\n\n<p></p>\n\n<pre><code>myobject *p = myobject::create(...);\n...\np-&gt;dispose();\n</code></pre>\n\n<p>(or suitably wrapped inside deleter for smart pointer)</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459369375, "post_id": 36318959, "comment_id": 60261267, "body": "violation of strict aliasing rule should be punished by a month of reading D. Knuth."}, {"owner": {"reputation": 3528, "user_id": 509614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f541aec9a9f53fed5b470a31a1112418?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/509614/dennis"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459369584, "post_id": 36318959, "comment_id": 60261389, "body": "@SergeyA Thanks for the comment. How am I running into memory aliasing issues here? I thought that the vector mandated a contiguous backing array? Would that not be exactly the same as allocating it via <code>new []</code>?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459369655, "post_id": 36318959, "comment_id": 60261428, "body": "Here: <code>T * const p = reinterpret_cast&lt;T*&gt;(ptr);</code> Well, not exactly here, but later, when <code>p</code> is going to be used."}, {"owner": {"reputation": 3528, "user_id": 509614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f541aec9a9f53fed5b470a31a1112418?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/509614/dennis"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459369823, "post_id": 36318959, "comment_id": 60261524, "body": "Yes, it always looked a little naughty to me. You should have seen the code before I started to do that though! I&#39;m guessing that your use of placement new is what avoids the potential problem in your case?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459370847, "post_id": 36318959, "comment_id": 60262112, "body": "Yes, placement new avoids this problem."}], "tags": [], "owner": {"reputation": 3528, "user_id": 509614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f541aec9a9f53fed5b470a31a1112418?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/509614/dennis"}, "is_accepted": false, "score": -1, "last_activity_date": 1459370103, "last_edit_date": 1459370103, "creation_date": 1459369298, "answer_id": 36318959, "question_id": 36318498, "link": "https://stackoverflow.com/questions/36318498/use-constructor-to-allocate-memory/36318959#36318959", "title": "Use constructor to allocate memory", "body": "<p>New Answer (given comment from OP):</p>\n\n<p>Allocate a <code>std::vector&lt;byte&gt;</code> of the correct size. The array allocated to back the vector will be contiguous memory. This vector size can be calculated and the vector will manage your memory correctly. You will still need to be very careful about how you manage your access to that byte array obviously, but you can use iterators and the like at least (if you want).</p>\n\n<p>By the way here is a little template thing I use to move along byte blobs with a little more grace (<strong>note</strong> this has aliasing issues as pointed out by Sergey in the comments below, I'm leaving it here because it seems to be a good example of what not to do... :-) ) :</p>\n\n<pre><code>template&lt;typename T&gt;\nT readFromBuf(byte*&amp; ptr) {\n    T * const p = reinterpret_cast&lt;T*&gt;(ptr);\n    ptr += sizeof(T);\n    return *p;\n}\n</code></pre>\n\n<p><em>Old Answer:</em></p>\n\n<p>As the comments suggest, you can easily use a <code>std::vector</code> to do what you want. Also I would like to make another suggestion.</p>\n\n<pre><code>size_t size = sizeof(myobject) + (controls + coords*2) * sizeof(double);\n</code></pre>\n\n<p>The above line of code suggests to me that you have some \"hidden structure\" in your code. Your <code>myobject</code> struct has two <code>int</code> values from which you are calculating the size of what you actually need. What you actually need is this:</p>\n\n<pre><code>struct ControlCoord {\n  double control;\n  std::pair&lt;double, double&gt; coordinate;\n};\nstd::vector&lt;ControlCoord&gt;&gt; controlCoords;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1459369821, "post_id": 36318961, "comment_id": 60261522, "body": "If you go that route, I would suggest also exposing methods to access the <code>double</code> array data, eg: <code>double* array() { return (double*)(_data+1); }</code>"}], "tags": [], "owner": {"reputation": 6098, "user_id": 898142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d20bd94e90a02a2e4bc29c361a6c3752?s=128&d=identicon&r=PG", "display_name": "alexm", "link": "https://stackoverflow.com/users/898142/alexm"}, "is_accepted": false, "score": 2, "last_activity_date": 1459370151, "last_edit_date": 1459370151, "creation_date": 1459369307, "answer_id": 36318961, "question_id": 36318498, "link": "https://stackoverflow.com/questions/36318498/use-constructor-to-allocate-memory/36318961#36318961", "title": "Use constructor to allocate memory", "body": "<p>How about a pragmatic approach: keep the structure as is (if compatibility with C is important) and wrap it into a c++ class?</p>\n\n<pre><code>typedef struct\n{\n  int controls;\n  int coords;\n} myobject;\n\nmyobject* create_obj(int controls, int coords);\nvoid dispose_obj(myobject* obj);\n\n\nclass MyObject\n{\npublic: \n   MyObject(int controls, int coords) {_data = create_obj(controls, coords);}\n  ~MyObject() {dispose_obj(_data);}\n\n   const myobject* data() const\n   {\n       return _data;\n   }\n\n   myobject* data() \n   {\n       return _data;\n   }\n\n   int controls() const {return _data-&gt;controls;}\n   int coords() const {return _data-&gt;coords;} \n   double* array() { return (double*)(_data+1); }\n\n private:\n     myobject* _data;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3528, "user_id": 509614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f541aec9a9f53fed5b470a31a1112418?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/509614/dennis"}, "edited": false, "score": 0, "creation_date": 1459370426, "post_id": 36319085, "comment_id": 60261857, "body": "Does this approach (when using the raw cast) not also suffer from the potential aliasing issue that Sergey mentions regarding my use of <code>reinterpret_cast</code>?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459370738, "post_id": 36319085, "comment_id": 60262046, "body": "I believe, it is a violation of strict aliasing rule.  <code>myobject* p = (myobject *) mem;</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459371355, "post_id": 36319085, "comment_id": 60262409, "body": "@SergeyA: hence the <code>placement-new</code> alternative."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459371531, "post_id": 36319085, "comment_id": 60262520, "body": "But why are you even suggesting this?"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1459371657, "last_edit_date": 1459371657, "creation_date": 1459369725, "answer_id": 36319085, "question_id": 36318498, "link": "https://stackoverflow.com/questions/36318498/use-constructor-to-allocate-memory/36319085#36319085", "title": "Use constructor to allocate memory", "body": "<p>To maintain the semantics of the original code, where the struct and array are in a single contigious block of memory, you can simply replace <code>malloc(size)</code> with <code>new char[size]</code> instead:</p>\n\n<pre><code>myobject* create_obj(int controls, int coords)\n{\n  size_t size = sizeof(myobject) + (controls + coords*2) * sizeof(double);\n  char* mem = new char[size];\n  myobject* p = new(mem) myobject;\n  p-&gt;controls = controls;\n  p-&gt;coords = coords;\n  return p;\n}\n</code></pre>\n\n<p>You will have to use a type-cast when freeing the memory with <code>delete[]</code>, though:</p>\n\n<pre><code>myobject *p = create_obj(...);\n...\np-&gt;~myobject();\ndelete[] (char*) p;\n</code></pre>\n\n<p>In this case, I would suggest wrapping that logic in another function:</p>\n\n<pre><code>void free_obj(myobject *p)\n{\n    p-&gt;~myobject();\n    delete[] (char*) p;\n}\n\nmyobject *p = create_obj(...);\n...\nfree_obj(p);\n</code></pre>\n\n<p>That being said, if you are allowed to, it would be better to re-write the code to follow C++ semantics instead, eg:</p>\n\n<pre><code>struct myobject\n{\n    int controls;\n    int coords;\n    std::vector&lt;double&gt; values;\n\n    myobject(int acontrols, int acoords) :\n        controls(acontrols),\n        coords(acoords),\n        values(acontrols + acoords*2)\n    {\n    }\n};\n</code></pre>\n\n<p>And then you can do this:</p>\n\n<pre><code>std::unique_ptr&lt;myobject&gt; p = std::make_unique&lt;myobject&gt;(...); // C++14\n...\n</code></pre>\n\n<p></p>\n\n<pre><code>std::unique_ptr&lt;myobject&gt; p(new myobject(...)); // C++11\n...\n</code></pre>\n\n<p></p>\n\n<pre><code>std::auto_ptr&lt;myobject&gt; p(new myobject(...)); // pre C++11\n...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1459370470, "post_id": 36319197, "comment_id": 60261889, "body": "And now suddently the requirement to keep old C code in place is not important anymore? Suit yourself."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459374374, "post_id": 36319197, "comment_id": 60263966, "body": "@SergeyA I certainly didn&#39;t expect to get the &#39;accept&#39;. I just wanted to give an answer to the broader context and not just to the immediate technical question."}], "tags": [], "owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1459370122, "creation_date": 1459370122, "answer_id": 36319197, "question_id": 36318498, "link": "https://stackoverflow.com/questions/36318498/use-constructor-to-allocate-memory/36319197#36319197", "title": "Use constructor to allocate memory", "body": "<p>While I understand the desire to limit the changes to the existing C code, it would be better to do it correctly now rather than fight with bugs in the future. I suggest the following structure and changes to your code to deal with it (which I suspect would mostly be pulling out code that calculates offsets).</p>\n\n<pre><code>    struct spots\n    {\n        double x;\n        double y;\n    };\n\n    struct myobject \n    {\n        std::vector&lt;double&gt; m_controls;\n        std::vector&lt;spots&gt;  m_coordinates;\n\n        myobject( int controls, int coordinates ) :\n           m_controls( controls ), \n           m_coordinates( coordinates ) \n        { }\n    };\n</code></pre>\n"}], "owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "accepted_answer_id": 36319197, "answer_count": 5, "score": 0, "last_activity_date": 1459371657, "creation_date": 1459367740, "last_edit_date": 1459368337, "question_id": 36318498, "link": "https://stackoverflow.com/questions/36318498/use-constructor-to-allocate-memory", "title": "Use constructor to allocate memory", "body": "<p>I have a class that contains several arrays whose sizes can be determined by parameters to its constructor. My problem is that instances of this class have sizes that can't be determined at compile time, and I don't know how to tell a <strong>new</strong> method at run time how big I need my object to be. Each object will be of a fixed size, but different instances may be different sizes.</p>\n\n<p>There are several ways around the problem:<br>- use a factory<br>- use a placement constructor<br>- allocate arrays in the constructor and store pointers to them in my object.</p>\n\n<p>I am adapting some legacy code from an old application written in <strong>C</strong>. In the original code, the program figures out how much memory will be needed for the entire object, calls <code>malloc()</code> for that amount, and proceeds to initialize the various fields.</p>\n\n<p>For the C++ version, I'd like to be able to make a (fairly) normal constructor for my object. It will be a descendant of a parent class, and some of the code will be depending on polymorphism to call the right method. Other classes descended from the same parent have sizes known at compile time, and thus present no problem.</p>\n\n<p>I'd like to avoid some of the special considerations necessary when using <strong>placement new</strong>, and I'd like to be able to delete the objects in a normal way.</p>\n\n<p>I'd like to avoid carrying pointers within the body of my object, partially to avoid ownership problems associated with copying the object, and partially because I would like to re-use as much of the existing C code as possible. If ownership were the only issue, I could probably just use shared pointers and not worry.</p>\n\n<p>Here's a very trimmed-down version of the C code that creates the objects:</p>\n\n<pre><code>typedef struct\n{\n  int controls;\n  int coords;\n} myobject;\nmyobject* create_obj(int controls, int coords)\n{\n  size_t size = sizeof(myobject) + (controls + coords*2) * sizeof(double);\n  char* mem = malloc(size);\n  myobject* p = (myobject *) mem;\n  p-&gt;controls = controls;\n  p-&gt;coords = coords;\n  return p;\n}\n</code></pre>\n\n<p>The arrays within the object maintain a fixed size of the life of the object. In the code above, memory following the structure of <code>myobject</code> will be used to hold the array elements.</p>\n\n<p>I feel like I may be missing something obvious. Is there some way that I don't know about to write a (fairly) normal constructor in C++ but be able to tell it how much memory the object will require at run time, without resorting to a \"placement new\" scenario?</p>\n"}, {"tags": ["c++", "ios", "objective-c"], "comments": [{"owner": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "edited": false, "score": 0, "creation_date": 1459366957, "post_id": 36318218, "comment_id": 60259894, "body": "<a href=\"https://en.wikipedia.org/wiki/Objective-C#Objective-C.2B.2B\" rel=\"nofollow noreferrer\">Objective-C++</a>"}, {"owner": {"reputation": 5907, "user_id": 159527, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7daffacbe703f4a150b681ee9f7d4760?s=128&d=identicon&r=PG", "display_name": "pdiddy", "link": "https://stackoverflow.com/users/159527/pdiddy"}, "reply_to_user": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "edited": false, "score": 0, "creation_date": 1459367096, "post_id": 36318218, "comment_id": 60259976, "body": "I understand Objective-C++. But my viewcontroller.h cannot inherit from the IObserver defined in c++ header or can it?"}, {"owner": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "edited": false, "score": 0, "creation_date": 1459368394, "post_id": 36318218, "comment_id": 60260706, "body": "No, it cannot. You have to create a proxy object (in Objective-C) or a proxy class (in C++), and call the appropriate functions manually."}, {"owner": {"reputation": 5907, "user_id": 159527, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7daffacbe703f4a150b681ee9f7d4760?s=128&d=identicon&r=PG", "display_name": "pdiddy", "link": "https://stackoverflow.com/users/159527/pdiddy"}, "reply_to_user": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "edited": false, "score": 0, "creation_date": 1459368493, "post_id": 36318218, "comment_id": 60260772, "body": "thanks for the pointers, if you can provide an example I&#39;d gladly mark it answered. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "is_accepted": true, "score": 1, "last_activity_date": 1459370032, "creation_date": 1459370032, "answer_id": 36319167, "question_id": 36318218, "link": "https://stackoverflow.com/questions/36318218/how-can-i-have-my-viewcontroller-be-an-observer-of-a-c-written-subject/36319167#36319167", "title": "How can I have my viewcontroller be an observer of a C++ written subject", "body": "<p>Neither Objective-C++, nor C++ can inherit from each other, you have to create proxy classes to interact with each other.</p>\n\n<p>Tiny example, if you want to call a C++ method from Objective-C++.</p>\n\n<pre><code>class Foo : public IObserver {\n    virtual void bar(int i) { printf(\"i is %d\\n\", i); } override;\n};\n\n@interface Baz : NSObject {\n@public\n     void* foo;\n}\n@end\n\n@implementation Baz\n- (id)init {\n    self = [super init];\n    if (self) {\n        foo = new Foo();\n    }\n    return self;\n}\n\n- (void)dealloc {\n    delete foo;\n    [super dealloc];\n}\n\n- (void)barHappened:(int)i {\n    foo-&gt;bar(i);\n}\n@end\n</code></pre>\n"}], "owner": {"reputation": 5907, "user_id": 159527, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7daffacbe703f4a150b681ee9f7d4760?s=128&d=identicon&r=PG", "display_name": "pdiddy", "link": "https://stackoverflow.com/users/159527/pdiddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 36319167, "answer_count": 1, "score": 0, "last_activity_date": 1459370032, "creation_date": 1459366858, "question_id": 36318218, "link": "https://stackoverflow.com/questions/36318218/how-can-i-have-my-viewcontroller-be-an-observer-of-a-c-written-subject", "title": "How can I have my viewcontroller be an observer of a C++ written subject", "body": "<p>Let's say I have an observer pattern code in c++. Something very similar to the code here : <a href=\"https://en.wikipedia.org/w/index.php?title=Observer_pattern&amp;oldid=342672104#C.2B.2B\" rel=\"nofollow\">Observer pattern</a></p>\n\n<p>How can I have a ViewController or an objective-C class be an observer of a subject written in c++? </p>\n\n<p>Any code example is appreciated, </p>\n\n<p>Cheers</p>\n"}, {"tags": ["c++", "opengl", "textures", "rendering", "opencl"], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1459433590, "last_edit_date": 1459433590, "creation_date": 1459368702, "answer_id": 36318776, "question_id": 36318084, "link": "https://stackoverflow.com/questions/36318084/opencl-draw-to-opengl-texture-crashes/36318776#36318776", "title": "OpenCL - Draw To OpenGL Texture crashes", "body": "<p>You enqueue the release of GL buffers, but do not wait for it to complete.</p>\n\n<pre><code>queue.enqueueReleaseGLObjects(&amp;this-&gt;buffersGL);\n</code></pre>\n\n<p>either get the finish event out of this (watch out for leaks!), or wait on the command queue to finish all tasks before proceeding to releasing the GL objects.  When one thing in a queue depends on another, you are supposed to arrange their ordering yourself.</p>\n\n<p>You also queue a bunch of tasks that depend on the GL objects.  Either wait for them to complete (finish the queue), or take their events and feed them to the enqueue release GL objects as perquisites.</p>\n\n<p>As an aside:</p>\n\n<p>Using fewer kernels might be a good idea, instead of one per pixel.</p>\n"}, {"tags": [], "owner": {"reputation": 681, "user_id": 3645859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c63b3e50cbe65d9a7c5735da468c0a04?s=128&d=identicon&r=PG&f=1", "display_name": "Addi", "link": "https://stackoverflow.com/users/3645859/addi"}, "is_accepted": false, "score": 0, "last_activity_date": 1459456800, "creation_date": 1459456800, "answer_id": 36343330, "question_id": 36318084, "link": "https://stackoverflow.com/questions/36318084/opencl-draw-to-opengl-texture-crashes/36343330#36343330", "title": "OpenCL - Draw To OpenGL Texture crashes", "body": "<blockquote>\n  <p>Using fewer kernels might be a good idea, instead of one per pixel.</p>\n</blockquote>\n\n<p>Thanks alot Yakk! I tried that by first simply using a smaller screen size and it suddenly worked again! As it turns out though the texture I was drawing to was the problem. It was not 600x600 pixels big and that's what caused the crash. Apparently OpenCL can draw to pixels that \"don't actually exist\" a couple of times before crashing. It still is weird behaviour...</p>\n"}], "owner": {"reputation": 681, "user_id": 3645859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c63b3e50cbe65d9a7c5735da468c0a04?s=128&d=identicon&r=PG&f=1", "display_name": "Addi", "link": "https://stackoverflow.com/users/3645859/addi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 36318776, "answer_count": 2, "score": 1, "last_activity_date": 1459456800, "creation_date": 1459366471, "question_id": 36318084, "link": "https://stackoverflow.com/questions/36318084/opencl-draw-to-opengl-texture-crashes", "title": "OpenCL - Draw To OpenGL Texture crashes", "body": "<p>I am trying to create an OpenCL raycaster. Therefore I am drawing to an OpenGL texture many times a second. However <code>queue.enqueueNDRangeKernel</code> eventually returns -9999. If I remove <code>write_imagef</code> from my kernel code, it works, so i figured this causes the problem.</p>\n\n<p>OpenCL kernel (broken down)</p>\n\n<pre><code>__kernel void main(__write_only image2d_t screen)\n{\n    unsigned int x = get_global_id(0);\n    unsigned int y = get_global_id(1);\n\n    int2 coords = (int2) (x, y);\n    write_imagef(screen, coords, (float4)(1,0,1,1));\n}\n</code></pre>\n\n<p>This is the code that runs once in c++:</p>\n\n<pre><code>cl::Program::Sources sources;\nstring code = ResourceLoader::loadFile(filename);\nsources.push_back({ code.c_str(),code.length() });\n\nprogram = cl::Program(OpenCL::context, sources);\n\nif (program.build({ OpenCL::default_device }) != CL_SUCCESS)\n{\n    cout &lt;&lt; \"Could not build program \\\"\" &lt;&lt; filename &lt;&lt; \"\\\"! Error:\" &lt;&lt; endl;\n    cout &lt;&lt; \"OpenCL: Error building: \" &lt;&lt; program.getBuildInfo&lt;CL_PROGRAM_BUILD_LOG&gt;(OpenCL::default_device) &lt;&lt; \"\\n\";\n    system(\"PAUSE\");\n    exit(1);\n}\nqueue = CommandQueue(OpenCL::context, OpenCL::default_device);\nkernel = Kernel(program, \"main\");\n//OpenGL texture\nImageGL b(OpenCL::context, CL_MEM_READ_WRITE, GL_TEXTURE_2D, 0, argument, &amp;error);\n\nif (error != 0)\n{\n    cout &lt;&lt; \"CL Error: \" &lt;&lt; OpenCL::get_cl_error_string(error) &lt;&lt; endl;\n    system(\"PAUSE\");\n    exit(error);\n}\nkernel.setArg(0, b);\n</code></pre>\n\n<p>This Code runs every frame:</p>\n\n<pre><code>glFinish();\nqueue.enqueueAcquireGLObjects(&amp;this-&gt;buffersGL);\nNDRange range;\nif (lengthZ &lt;= 0 &amp;&amp; lengthY &lt;= 0)\n    range = NDRange(lengthX);\nelse if (lengthZ &lt;= 0)\n    range = NDRange(lengthX, lengthY);\nelse\n    range = NDRange(lengthX, lengthY, lengthZ);\n\ncl::Event wait;\n\ncl_int run_err = queue.enqueueNDRangeKernel(kernel, NDRange(), range, NullRange, NULL, &amp;wait);\n\n\nif (run_err != 0)\n{\n    cout &lt;&lt; OpenCL::get_cl_error_string(run_err) &lt;&lt; \" (\" &lt;&lt; run_err &lt;&lt; \")\" &lt;&lt; endl;\n    system(\"PAUSE\");\n}\nqueue.enqueueReleaseGLObjects(&amp;this-&gt;buffersGL);\n</code></pre>\n\n<p>What could be causing the -9999 error and how can I fix it? Also, there are often big chunks of \"dead pixels\" that have not been drawn to in the texture...</p>\n"}, {"tags": ["c++", "visual-studio", "dll", "graphics", "visual-studio-2015"], "comments": [{"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1459366449, "post_id": 36317965, "comment_id": 60259590, "body": "The PDB files are required by the debugger. Did you switch between Release and Debug modes ? Also try a rebuild, just to see."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1459366631, "post_id": 36317965, "comment_id": 60259719, "body": "The pdb files should only be needed if you want to step inside and debug microsoft dlls. If you don&#39;t ignore the warnings. This has nothing to do with any problem you have executing your application. Also all of the DLLs were actually successfully loaded."}, {"owner": {"reputation": 725, "user_id": 6063262, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh6.googleusercontent.com/-LLpSbDyH9Lg/AAAAAAAAAAI/AAAAAAAAAJQ/rV39zQ1-V2U/photo.jpg?sz=128", "display_name": "MoustacheSpy", "link": "https://stackoverflow.com/users/6063262/moustachespy"}, "edited": false, "score": 0, "creation_date": 1459367104, "post_id": 36317965, "comment_id": 60259982, "body": "jeah but then why did the performance drop from simply adding one variable?"}], "answers": [{"tags": [], "owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "is_accepted": false, "score": 1, "last_activity_date": 1459372041, "creation_date": 1459372041, "answer_id": 36319766, "question_id": 36317965, "link": "https://stackoverflow.com/questions/36317965/visual-studio-cant-load-a-buch-of-dlls/36319766#36319766", "title": "Visual studio cant load a buch of dlls", "body": "<p>Look at your <code>decodelevelAndDraw()</code> function.</p>\n\n<p>The \"old\" one only drew \"question.jpg\" image if there was a <code>1</code> in the <code>levelcode</code> map for that cell.</p>\n\n<p>The \"new\" one draws \"grass.bmp\" in <strong>every</strong> other cell. That has to take some time...</p>\n\n<p>P.S. I don't know what your <code>readimagefile()</code> function does; I hope that it doesn't actually load the same JPEG image every time you need to draw it. Can it be pre-loaded just once?</p>\n"}], "owner": {"reputation": 725, "user_id": 6063262, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh6.googleusercontent.com/-LLpSbDyH9Lg/AAAAAAAAAAI/AAAAAAAAAJQ/rV39zQ1-V2U/photo.jpg?sz=128", "display_name": "MoustacheSpy", "link": "https://stackoverflow.com/users/6063262/moustachespy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459372041, "creation_date": 1459366142, "question_id": 36317965, "link": "https://stackoverflow.com/questions/36317965/visual-studio-cant-load-a-buch-of-dlls", "title": "Visual studio cant load a buch of dlls", "body": "<p>visual Studios is really messing my day uo today. I was just getting done with the base of my mario level editor ( made using winbgim graphics.h . Yes im using it with visual studio and it works a treat ) when i decidet to add a new basic block ( i only had questionmark blocks at a time ). The process was fairly easy just changed a few things and imported the new bitmap. I compiled the program and immediately i noticed that the program was running like there was a 2 secound delay somewhere. It took about 1,5 secounds to load the backround colour.\nWhen i came out of visual studious these errors were in the debug window:</p>\n\n<pre><code>'bgi.exe' (Win32): Loaded 'C:\\Users\\Moustachespy\\Source\\Repos\\CreateRemake\\bgi\\Release\\bgi.exe'. Symbols loaded.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\ntdll.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\kernel32.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\KernelBase.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\user32.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\gdi32.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\comdlg32.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\msvcrt.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\combase.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\rpcrt4.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\sspicli.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\cryptbase.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\bcryptprimitives.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\sechost.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\SHCore.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\shlwapi.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\shell32.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\WinSxS\\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.10586.0_none_811bc0006c44242b\\comctl32.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\cfgmgr32.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\advapi32.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\windows.storage.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\kernel.appcore.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\powrprof.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\profapi.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\FirewallAPI.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\netapi32.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\ole32.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\oleaut32.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\davhlpr.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\imm32.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\fwbase.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\uxtheme.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\msctf.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\dwmapi.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\coml2.dll'. Cannot find or open the PDB file.\n'bgi.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\asycfilt.dll'. Cannot find or open the PDB file.\nThe thread 0x4360 has exited with code 0 (0x0).\nThe thread 0x2858 has exited with code 0 (0x0).\nThe thread 0x40f4 has exited with code 0 (0x0).\nThe thread 0x1e08 has exited with code 0 (0x0).\nThe program '[152] bgi.exe' has exited with code 0 (0x0).\n</code></pre>\n\n<p>I really dont know what happend there:\nHeres the new code:</p>\n\n<pre><code>#include \"graphics.h\"\n//#include &lt;Windows.h&gt;\n#include &lt;math.h&gt;\n#include &lt;fstream&gt;\n\nvoid drawGridOnX(int xtotal, int ytotal);\nint levelcode[400][45][1];\nvoid decodelevelAndDraw(int minx,int maxx);\nvoid saveCurrentLevel();\n\nvoid main() {\n    initwindow(1600, 900,\"Testscreen\",0,0,true,true);\n    int x=0,y=0,xmin=0,xmax=23,cellx,celly,cellSize=70, xtotal = 0, ytotal = 0,counter=0,blockchosen=1;\n    // gridposx = 0, gridposy = 0, diffx = 0, diffy = 0, distanceFromMouse = 40, titlenumberx = 0, titlenumbery = 0,\n\n    while (1) {\n        setbkcolor(9);\n        cleardevice();\n        ytotal = 0;\n        /*diffx = mousex() - gridposx;\n        while (gridposx &lt; mousex()&amp;&amp;diffx&gt;=70) {\n            gridposx += 70;\n\n        }\n        while (gridposx &gt; mousex()&amp;&amp;diffx&lt;=-70 + distanceFromMouse) {\n            gridposx =gridposx-70;\n\n        }\n        diffy = mousey() - gridposy;\n        while (gridposy &lt; mousey() &amp;&amp; diffy &gt;= 70) {\n            gridposy += 70;\n\n        }\n        while (gridposy &gt; mousey() &amp;&amp; diffy &lt;= -70+distanceFromMouse) {\n            gridposy = gridposy - 70;\n\n        }\n        */\n        cellx = std::floor(mousex() / cellSize);\n        celly = std::floor(mousey() / cellSize);\n        blockchosen = 0;\n        while (ytotal &lt; 900) {\n            drawGridOnX(xtotal, ytotal);\n            ytotal += 70;\n        }\n\n        if(GetAsyncKeyState(VK_RETURN)){\n            //saveCurrentLevel();\n\n        }\n        else if (GetAsyncKeyState(VK_SHIFT)) {\n            blockchosen = 2;\n\n\n        }else if (ismouseclick(WM_LBUTTONDOWN)) {\n                if (ismouseclick(WM_LBUTTONUP)) {\n\n                    getmouseclick(WM_LBUTTONUP, x, y);\n                    getmouseclick(WM_LBUTTONDOWN, x, y);\n                }\n                //cellx = gridposx / 70;\n                //celly = gridposy / 70;\n                cellx += xmin;\n\n                levelcode[cellx][celly][0]=blockchosen;\n                //printf(\"CLICK\");\n            }else if (ismouseclick(WM_RBUTTONDOWN)) {\n                    if (ismouseclick(WM_RBUTTONUP)) {\n\n                        getmouseclick(WM_RBUTTONUP, x, y);\n                        getmouseclick(WM_RBUTTONDOWN, x, y);\n                    }\n                    //cellx = gridposx / 70;\n                    //celly = gridposy / 70;\n                    cellx += xmin;\n                    levelcode[cellx][celly][0] = 0;\n                    //printf(\"CLICK\");\n                }else if (GetAsyncKeyState(0x27)) {\n                        //printf(\"RIGHT\\n\\n\\n\\n\");\n                        Sleep(100);\n                        xmin++;\n                        xmax++;\n                    }else if (GetAsyncKeyState(0x25)&amp;&amp;xmin!=0) {\n                        //printf(\"RIGHT\\n\\n\\n\\n\");\n                        Sleep(100);\n                        xmin--;\n                        xmax--;\n                }\n        decodelevelAndDraw(xmin,xmax);\n        readimagefile(\"question_blueprint.jpg\", cellx*70,celly*70, 70+cellx*70, 70+celly*70);\n        //settextstyle(SANS_SERIF_FONT,1);\n        settextstyle(SANS_SERIF_FONT, HORIZ_DIR, 1);\n        outtextxy(0, 0, \"Press Enter to save\");\n        //printf(\"gridposx:%d\\tgridposy:%d\\ttitlenumberx:%d\\ttitlenumbery%d\",gridposx,gridposy,gridposx/70,gridposy/70);\n        swapbuffers();\n\n    }\n}\n\n\nvoid drawGridOnX(int xtotal, int ytotal) {\n    while (xtotal &lt; 1600) {\n        rectangle(xtotal, ytotal, 70 + xtotal, 70+ytotal);\n        xtotal += 70;\n\n    }\n\n\n}\n\n\nvoid decodelevelAndDraw(int minx,int maxx) {\n    int x = 0, y = 0;\n    while (y != 13) {\n        while (x != maxx) {\n            if (levelcode[x][y][0] == 1) {\n                //x -= minx;\n                readimagefile(\"question.jpg\", x*70-minx*70, y*70, 70 + x*70-minx*70, 70 + y*70);\n                //printf(\"Block added at %d;%d\", x * 70, y * 70);\n            }else readimagefile(\"grass.bmp\", x * 70 - minx * 70, y * 70, 70 + x * 70 - minx * 70, 70 + y * 70);\n            x++;\n        }\n        x = 0;\n        y++;\n    }\n}\n\n/*\nvoid saveCurrentLevel() {\n    int x = 0, y = 0, z = 0;\n    ofstream map;\n    map.open(\"map.txt\");\n    while (y &lt; 13) {\n\n\n        while (x &lt; 400) {\n            map &lt;&lt; levelcode[x][y][z];\n        }\n        x = 0;\n        y++;\n        map &lt;&lt; \"\\n\";\n    }\n    map.close();\n\n\n\n}\n*/\n</code></pre>\n\n<p>The old (and working ) code:\n    #include \"graphics.h\"\n    //#include \n    #include \n    #include </p>\n\n<pre><code>void drawGridOnX(int xtotal, int ytotal);\nint levelcode[400][45][1];\nvoid decodelevelAndDraw(int minx,int maxx);\nvoid saveCurrentLevel();\n\nvoid main() {\n    initwindow(1600, 900,\"Testscreen\",0,0,true,true);\n    int x=0,y=0,xmin=0,xmax=23,cellx,celly,cellSize=70, xtotal = 0, ytotal = 0,counter=0;\n    // gridposx = 0, gridposy = 0, diffx = 0, diffy = 0, distanceFromMouse = 40, titlenumberx = 0, titlenumbery = 0,\n\n    while (1) {\n        setbkcolor(9);\n        cleardevice();\n        ytotal = 0;\n        /*diffx = mousex() - gridposx;\n        while (gridposx &lt; mousex()&amp;&amp;diffx&gt;=70) {\n            gridposx += 70;\n\n        }\n        while (gridposx &gt; mousex()&amp;&amp;diffx&lt;=-70 + distanceFromMouse) {\n            gridposx =gridposx-70;\n\n        }\n        diffy = mousey() - gridposy;\n        while (gridposy &lt; mousey() &amp;&amp; diffy &gt;= 70) {\n            gridposy += 70;\n\n        }\n        while (gridposy &gt; mousey() &amp;&amp; diffy &lt;= -70+distanceFromMouse) {\n            gridposy = gridposy - 70;\n\n        }\n        */\n        cellx = std::floor(mousex() / cellSize);\n        celly = std::floor(mousey() / cellSize);\n        while (ytotal &lt; 900) {\n            drawGridOnX(xtotal, ytotal);\n            ytotal += 70;\n        }\n\n        if(GetAsyncKeyState(VK_RETURN)){\n            //saveCurrentLevel();\n\n        }else if (ismouseclick(WM_LBUTTONDOWN)) {\n                if (ismouseclick(WM_LBUTTONUP)) {\n\n                    getmouseclick(WM_LBUTTONUP, x, y);\n                    getmouseclick(WM_LBUTTONDOWN, x, y);\n                }\n                //cellx = gridposx / 70;\n                //celly = gridposy / 70;\n                cellx += xmin;\n                levelcode[cellx][celly][0]=1;\n                //printf(\"CLICK\");\n            }else if (ismouseclick(WM_RBUTTONDOWN)) {\n                    if (ismouseclick(WM_RBUTTONUP)) {\n\n                        getmouseclick(WM_RBUTTONUP, x, y);\n                        getmouseclick(WM_RBUTTONDOWN, x, y);\n                    }\n                    //cellx = gridposx / 70;\n                    //celly = gridposy / 70;\n                    cellx += xmin;\n                    levelcode[cellx][celly][0] = 0;\n                    //printf(\"CLICK\");\n                }else if (GetAsyncKeyState(0x27)) {\n                        //printf(\"RIGHT\\n\\n\\n\\n\");\n                        Sleep(100);\n                        xmin++;\n                        xmax++;\n                    }else if (GetAsyncKeyState(0x25)&amp;&amp;xmin!=0) {\n                        //printf(\"RIGHT\\n\\n\\n\\n\");\n                        Sleep(100);\n                        xmin--;\n                        xmax--;\n                }\n        decodelevelAndDraw(xmin,xmax);\n        readimagefile(\"question_blueprint.jpg\", cellx*70,celly*70, 70+cellx*70, 70+celly*70);\n        //settextstyle(SANS_SERIF_FONT,1);\n        settextstyle(SANS_SERIF_FONT, HORIZ_DIR, 1);\n        outtextxy(0, 0, \"Press Enter to save\");\n        //printf(\"gridposx:%d\\tgridposy:%d\\ttitlenumberx:%d\\ttitlenumbery%d\",gridposx,gridposy,gridposx/70,gridposy/70);\n        swapbuffers();\n\n    }\n}\n\n\nvoid drawGridOnX(int xtotal, int ytotal) {\n    while (xtotal &lt; 1600) {\n        rectangle(xtotal, ytotal, 70 + xtotal, 70+ytotal);\n        xtotal += 70;\n\n    }\n\n\n}\n\n\nvoid decodelevelAndDraw(int minx,int maxx) {\n    int x = 0, y = 0;\n    while (y != 13) {\n        while (x != maxx) {\n            if (levelcode[x][y][0] == 1) {\n                //x -= minx;\n                readimagefile(\"question.jpg\", x*70-minx*70, y*70, 70 + x*70-minx*70, 70 + y*70);\n                //printf(\"Block added at %d;%d\", x * 70, y * 70);\n            }\n            x++;\n        }\n        x = 0;\n        y++;\n    }\n}\n\n/*\nvoid saveCurrentLevel() {\n    int x = 0, y = 0, z = 0;\n    ofstream map;\n    map.open(\"map.txt\");\n    while (y &lt; 13) {\n\n\n        while (x &lt; 400) {\n            map &lt;&lt; levelcode[x][y][z];\n        }\n        x = 0;\n        y++;\n        map &lt;&lt; \"\\n\";\n    }\n    map.close();\n\n\n\n}\n*/\n</code></pre>\n\n<p>Im using the graphics.h files from this site: <a href=\"http://winbgim.codecutter.org/\" rel=\"nofollow\">http://winbgim.codecutter.org/</a>\nYes i absolutely HAVE to use graphics.h . Ask my teacher.\nAnd yes i have to have that array as a global variable. Alot of people dont like that and im one of them but its just alot easier to work with. Its not like 1 array in global is gonna hurt anyone right?</p>\n\n<p>Heres a zip of my ENTIRE project folder in case you need anything: <a href=\"https://www.dropbox.com/s/kym5r1sggmym78f/bgi.rar?dl=0\" rel=\"nofollow\">https://www.dropbox.com/s/kym5r1sggmym78f/bgi.rar?dl=0</a></p>\n\n<p>i know there are alot of comments in my program . They dont have anything to do with it. Those are just older methods i used that are now replaced by new ones. I left them there as a backup plan.</p>\n\n<p>Im using : Win 10\nVS2015 Community</p>\n\n<p>Please help me resolve this issue.</p>\n"}, {"tags": ["c++", "constructor", "not-exists"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1459365747, "post_id": 36317812, "comment_id": 60259102, "body": "<i>&quot;How would I fix this?&quot;</i> Provide default constructors, that take no parameters, or have them all set to a default value."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 2, "creation_date": 1459365915, "post_id": 36317812, "comment_id": 60259211, "body": "Are ParkedCar and ParkingMeter really <i>members</i> of a PoliceOfficer? Does a PoliceOfficer really consist of a name, badge, car and meter?"}, {"owner": {"reputation": 45, "user_id": 4508342, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86cfc50d2cdfdec115c26f9e4eec4745?s=128&d=identicon&r=PG&f=1", "display_name": "Ghost_Programmer", "link": "https://stackoverflow.com/users/4508342/ghost-programmer"}, "edited": false, "score": 0, "creation_date": 1459367078, "post_id": 36317812, "comment_id": 60259966, "body": "Yes, <code>ParkedCar</code> and <code>ParkingMeter</code> really <i>are</i> members of a PoliceOfficer. The name and badge are the PoliceOfficer-specific attrbutes, while I am using in-class copies of the <code>car</code> and <code>meter</code> objects, received from the constructor, to get their values and functions [that i will make later] for the PoliceOfficer to be able to report that information otherwise not available."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4508342, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86cfc50d2cdfdec115c26f9e4eec4745?s=128&d=identicon&r=PG&f=1", "display_name": "Ghost_Programmer", "link": "https://stackoverflow.com/users/4508342/ghost-programmer"}, "edited": false, "score": 0, "creation_date": 1459366322, "post_id": 36317895, "comment_id": 60259500, "body": "Yes, in the case that I am using, the officer will only have one parking meter, along with one parked car, and one parking ticket. I can modify the program later to have an array of <code>ParkingMeter</code> objects too.  Also, thank you for the help! It now only has 6 errors! :)"}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 4, "last_activity_date": 1459365878, "creation_date": 1459365878, "answer_id": 36317895, "question_id": 36317812, "link": "https://stackoverflow.com/questions/36317812/no-default-constructor/36317895#36317895", "title": "No default constructor?", "body": "<p>Since your constructor</p>\n\n<pre><code>PoliceOfficer(const ParkedCar &amp;car, const ParkingMeter &amp;meter, string name = \"...\", int badge_number = 000000)\n{\n\n    this-&gt;car = car;\n    this-&gt;meter = meter;\n}\n</code></pre>\n\n<p>does not have a member initializer for <code>car</code> or <code>meter</code> (the assignments in the body don't count as initializers), it's as though you wrote <code>: car(), meter()</code> initializers, which attempt to call default constructors that don't exist.  You should explicitly write member initializers:</p>\n\n<pre><code>PoliceOfficer(const ParkedCar &amp;car, const ParkingMeter &amp;meter, string name = \"...\", int badge_number = 000000)\n    : car(car), meter(meter)\n{\n}\n</code></pre>\n\n<p>(Also, your object model is a little funny: a police officer has a single parking meter?)</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 4508342, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86cfc50d2cdfdec115c26f9e4eec4745?s=128&d=identicon&r=PG&f=1", "display_name": "Ghost_Programmer", "link": "https://stackoverflow.com/users/4508342/ghost-programmer"}, "edited": false, "score": 0, "creation_date": 1459367772, "post_id": 36317937, "comment_id": 60260363, "body": "I&#39;m sorry, but the way you did it, using <code>car(car_)</code> and <code>meter(meter_)</code> is the same thing as @aschepler mentioned a bit earlier, with the <code>car(car)</code> and <code>meter(meter)</code> spots, respectively. The parameter names can be the same as the class attributes, yes even if they are class objects, because the parameter name does nothing, but thank you for your response! :)"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 45, "user_id": 4508342, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86cfc50d2cdfdec115c26f9e4eec4745?s=128&d=identicon&r=PG&f=1", "display_name": "Ghost_Programmer", "link": "https://stackoverflow.com/users/4508342/ghost-programmer"}, "edited": false, "score": 0, "creation_date": 1459368066, "post_id": 36317937, "comment_id": 60260512, "body": "He submitted his answer as I was typing mine.  I didn&#39;t see his reply before I submitted (but it not surprising we both suggested the same thing - it <i>is</i> the &quot;right&quot; answer).   I prefer to avoid using the same name for different things - it may be legal, but I find it confusing."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1459366025, "creation_date": 1459366025, "answer_id": 36317937, "question_id": 36317812, "link": "https://stackoverflow.com/questions/36317812/no-default-constructor/36317937#36317937", "title": "No default constructor?", "body": "<p>Firstly, <code>ParkedCar</code> (as you have shown it) <em>does</em> have a default constructor (all the arguments have defaults, so it can be called with no arguments.  </p>\n\n<p>The real solution is to change the constructor use to use the initializer list:</p>\n\n<pre><code>   PoliceOfficer(const ParkedCar &amp;car_, const ParkingMeter &amp;meter_, string name = \"...\", int badge_number = 000000)\n   : car(car_), meter(meter_)\n   {\n   }\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4508342, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86cfc50d2cdfdec115c26f9e4eec4745?s=128&d=identicon&r=PG&f=1", "display_name": "Ghost_Programmer", "link": "https://stackoverflow.com/users/4508342/ghost-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 36317895, "answer_count": 2, "score": -2, "last_activity_date": 1459366025, "creation_date": 1459365569, "question_id": 36317812, "link": "https://stackoverflow.com/questions/36317812/no-default-constructor", "title": "No default constructor?", "body": "<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n//To know the car's make, model, color, license number, and the number of minutes the car has been parked\nclass ParkedCar\n{\n    string make, model, color, license_number;\n    int minutes;\npublic:\n    ParkedCar(string make = \"...\", string model = \"...\", string color = \"...\",\n        string license_number = \"...\", int minutes = 0) : make{ make }, model{model},\n        color{color}, license_number{license_number}, minutes{minutes} { this-&gt;make = make; }\n};\n\n//To know the number of minutes of parking time that has been purchased\nclass ParkingMeter\n{\n    int purchased_minutes;\npublic:\n    ParkingMeter(int purchased_minutes) { this-&gt;purchased_minutes = purchased_minutes; }\n};\n\n//To report the make, model, color, and license number of the illegally parked car\n//To report the amount of the fine, which is $25 for the first hour, or part of an\n    //hour that the car is illegally parked, plus $10 for every additional hour or\n    //part of an hour that the car is illegally parked\n//To report the name and badge number of the police officer issuing the ticket\nclass ParkingTicket\n{\n    ParkedCar car;\n    ParkingMeter meter;\n    PoliceOfficer officer;\npublic:\n    ParkingTicket(const ParkedCar &amp;car, const ParkingMeter &amp;meter, const PoliceOfficer &amp;officer)\n    {\n        this-&gt;car = car;\n        this-&gt;meter = meter;\n        this-&gt;officer = officer;\n    }\n};\n\n//To know the officer's name and badge number\n//To examine a ParkedCar object and a ParkingMeter object, and determine whether the car's time has expired\n//To issue a prking ticket (generate a ParkingTicket object) if the car's time has expired\nclass PoliceOfficer\n{\n    string name;\n    int badge_number;\n    ParkedCar car;\n    ParkingMeter meter;\npublic:\n    PoliceOfficer(const ParkedCar &amp;car, const ParkingMeter &amp;meter, string name = \"...\", int badge_number = 000000)\n    {\n\n        this-&gt;car = car;\n        this-&gt;meter = meter;\n    }\n\n};\n</code></pre>\n\n<p>So I am making this file for school, and everything is going fine up until I get to the ParkingTicket and PoliceOfficer classes. I am trying to define these constructors and they both tell me that there is no default constructor of the other class. How would I fix this? Thank you! :)</p>\n"}, {"tags": ["c++", "function", "class"], "comments": [{"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 1, "creation_date": 1459365538, "post_id": 36317738, "comment_id": 60258977, "body": "If you&#39;re making all of the member variables public, why do you need get/set functions?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1459365619, "post_id": 36317738, "comment_id": 60259022, "body": "Have you tried <i>compiling</i> it? The compiler is very good at finding and reporting syntax errors."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1459365715, "post_id": 36317738, "comment_id": 60259083, "body": "Also, a class can be used very much like any other type, so if you know how to declare local variables of a class-type then you already know how to declare member variables."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1459366883, "post_id": 36317738, "comment_id": 60259850, "body": "The tail of your question &quot;I would like advice on creating a class that has instances of custom classes like the one abo[v]e within them&quot; is extremely vague. I would suggest you either remove it and ask that question separately, or expound on it with an example and show what your specific concerns are."}, {"owner": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "edited": false, "score": 0, "creation_date": 1459366994, "post_id": 36317738, "comment_id": 60259918, "body": "<code>double Vertex:: getX()</code> should be <code>double Vertex::getX()</code> and your includes are weird."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1459367043, "post_id": 36317738, "comment_id": 60259945, "body": "Well your get functions are not needed since all of your data members are public."}, {"owner": {"reputation": 837, "user_id": 5883767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PMXHe.jpg?s=128&g=1", "display_name": "MIbrah", "link": "https://stackoverflow.com/users/5883767/mibrah"}, "edited": false, "score": 0, "creation_date": 1459368425, "post_id": 36317738, "comment_id": 60260728, "body": "I suggest reading some c++ resources to learn the syntax. You might want to use member initialization list."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1459409834, "post_id": 36317738, "comment_id": 60276432, "body": "@Maria-Andersado What does <code>boolean</code> evaluate to in Java? I asked this because a true : false type in c++ is a <code>bool</code> and a <code>boolean</code> in c++ is a <code>typedef</code> to an <code>unsigned char</code>."}], "answers": [{"comments": [{"owner": {"reputation": 45276, "user_id": 176922, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/621b61c5445afea7639b4cf6bb7c455a?s=128&d=identicon&r=PG", "display_name": "Benjamin Bannier", "link": "https://stackoverflow.com/users/176922/benjamin-bannier"}, "edited": false, "score": 1, "creation_date": 1459371386, "post_id": 36318389, "comment_id": 60262433, "body": "Should be bool instead of boolean. Also, default values for members appeared with C++11."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 1, "creation_date": 1459409559, "post_id": 36318389, "comment_id": 60276269, "body": "That will not compile; in VS you will get a compiler error C2628: (did you forget a &#39;;&#39;?)"}, {"owner": {"reputation": 3528, "user_id": 509614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f541aec9a9f53fed5b470a31a1112418?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/509614/dennis"}, "reply_to_user": {"reputation": 45276, "user_id": 176922, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/621b61c5445afea7639b4cf6bb7c455a?s=128&d=identicon&r=PG", "display_name": "Benjamin Bannier", "link": "https://stackoverflow.com/users/176922/benjamin-bannier"}, "edited": false, "score": 0, "creation_date": 1459414901, "post_id": 36318389, "comment_id": 60279775, "body": "@BenjaminBannier Thanks. I noticed that last night but for some reason the app doesn&#39;t work well with my google account, so had to wait til I was back at a PC."}, {"owner": {"reputation": 3528, "user_id": 509614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f541aec9a9f53fed5b470a31a1112418?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/509614/dennis"}, "reply_to_user": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1459414933, "post_id": 36318389, "comment_id": 60279795, "body": "@FrancisCugler I&#39;ve appended that now. Thanks for the error check."}], "tags": [], "owner": {"reputation": 3528, "user_id": 509614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f541aec9a9f53fed5b470a31a1112418?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/509614/dennis"}, "is_accepted": false, "score": 2, "last_activity_date": 1459414806, "last_edit_date": 1459414806, "creation_date": 1459367404, "answer_id": 36318389, "question_id": 36317738, "link": "https://stackoverflow.com/questions/36317738/making-a-custom-class-in-c-with-constructor-values/36318389#36318389", "title": "Making a custom class in c++ with constructor values", "body": "<pre><code>public class vertex \n{\n  public double x, y, z;\n  public boolean eliminated = true; \n  public vertex(double x, double y, double z)\n  {\n     //vertex constructor\n  }\n}\n</code></pre>\n\n<p>To mimic this Java class as simply and as exactly as possible in C++ you would do this:</p>\n\n<pre><code>struct vertex{\n   double x, y, z;\n   bool eliminated = true;\n   vertex(double x, double y, double z){\n      //vertex constructor\n   }\n};\n</code></pre>\n\n<p>Remarkably similar right? Note that the <code>eliminated</code> member is default initiated, which is new to C++11, so make sure you have an up to date compiler.\n<code>struct</code> is used instead of class because all of your members are public anyway. You could also use <code>class</code> and the <code>public:</code> access specifier.\nYou do not need access methods (getters) because everything is public already, as in your Java class.</p>\n\n<p>You don't need any includes in for your vertex class definitions and you definitely should NOT put a <code>using</code> declaration any header files.</p>\n\n<p>To mimic Java method parameter passing you pass copies for primitives and non-const pointers (not references) for object instance parameters.</p>\n\n<p>edit - fixed the silly issues that I missed and that the human compilers below spotted :)</p>\n"}, {"comments": [{"owner": {"reputation": 3528, "user_id": 509614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f541aec9a9f53fed5b470a31a1112418?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/509614/dennis"}, "edited": false, "score": 0, "creation_date": 1459415120, "post_id": 36318968, "comment_id": 60279930, "body": "I didn&#39;t down-vote you so I&#39;m just guessing, but I would imagine that the reason is that the answer is very complex. That&#39;s not usually a problem, but given the obviously inexperienced OP I think that it might be in this case. Anyway, as I said that&#39;s just a guess."}, {"owner": {"reputation": 3528, "user_id": 509614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f541aec9a9f53fed5b470a31a1112418?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/509614/dennis"}, "edited": false, "score": 0, "creation_date": 1459416661, "post_id": 36318968, "comment_id": 60281073, "body": "Also I would probably discourage the use of a raw pointer. The OP is coming from Java where a syntax like <code>inline Vector3( float[] pfv );</code> would be more common. I would still encourage the use of <code>inline Vector3( const array&lt;float, 3&gt;&amp; vectComponents);</code> instead. The OP should not need to worry about array-to-pointer decay, and the meaning of the <code>[]</code> operator."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 3528, "user_id": 509614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f541aec9a9f53fed5b470a31a1112418?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/509614/dennis"}, "edited": false, "score": 0, "creation_date": 1459442044, "post_id": 36318968, "comment_id": 60299885, "body": "@Dennis true; but even with the use of a raw pointer; the inline vector class does not use the heap so there is no need to worry about memory management in this context or introducing the possibility of memory leaks. The constructor takes a pointer to a type which allows the user or caller to pass an array. The constructor will only allow the first 3 indexed values to be used. I showed this be typically this a basic design of a Vector2, Vector3, Vector4 class that is used in many basic c++ math libraries. In graphics; a point or a vertex has the same implementation as a Vector."}, {"owner": {"reputation": 3528, "user_id": 509614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f541aec9a9f53fed5b470a31a1112418?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/509614/dennis"}, "edited": false, "score": 0, "creation_date": 1459442807, "post_id": 36318968, "comment_id": 60300344, "body": "Sure, but the caller could pass <code>nullptr</code> or a pointer to free memory... Anyway I&#39;m just speculating. Whoever downvoted might have had a different problem altogether."}], "tags": [], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "is_accepted": false, "score": -1, "last_activity_date": 1459376866, "last_edit_date": 1459376866, "creation_date": 1459369330, "answer_id": 36318968, "question_id": 36317738, "link": "https://stackoverflow.com/questions/36317738/making-a-custom-class-in-c-with-constructor-values/36318968#36318968", "title": "Making a custom class in c++ with constructor values", "body": "<p>This might help you out:</p>\n\n<p><strong>Vector3.h</strong></p>\n\n<pre><code>#ifndef VECTOR3_H\n#define VECTOR3_H\n\nnamespace myNamespace {  // Add This Because Many Libraries may define a Vector3 Object\n\nclass Vector3 {\n    union {\n        float m_f3[3];\n        struct {\n            float m_fx;\n            float m_fy;\n            float m_fz;\n        };\n    };\n\n    inline Vector3();\n    inline Vector3( float x, float y, float z );\n    inline Vector3( float *pfv );\n    ~Vector3();\n\n    // Add Your inline overloaded operators &amp; inline function declarations here.\n};\n\n#include \"Vector3.inl\"\n\n} // namespace myNameSpace\n\n#endif // VECTOR3_H\n</code></pre>\n\n<p><strong>Vector3.inl</strong></p>\n\n<pre><code>// ------------------------------------------------------\n// Vector3() - Default Constructor Sets All Values To 0\ninline Vector3::Vector3() :\nm_fx( 0 ),\nm_fy( 0 ),\nm_fz( 0 ) {\n} // Vector3\n\n// ------------------------------------------------------\n// Vector3() - Takes (x,y,z) Parameters\ninline Vector3::Vector3( float x, float y, float z ) :\nm_fx( x ),\nm_fy( y ),\nm_fz( z ) {\n} // Vector3\n\n// ------------------------------------------------------\n// Vector3() - Takes A Pointer To Type\ninline Vector3::Vector3( float *pfv ) :\nm_fx( pfv[0] ),\nm_fy( pfv[1] ),\nm_fz( pfv[2] ) {\n} // Vector3\n</code></pre>\n\n<p><strong>Vector3.cpp</strong></p>\n\n<pre><code>#include \"Vector3.h\"\n\nnamespace myNamespace { \n\n// ----------------------------------------------\n// ~Vector3() - Default Destructor - Does Nothing\n// Only Defined Here So That There Is Some Type Of Translation \n// Unit In The Object File Generated When Compiling\nVector3::~Vector3() {\n} // ~Vector3\n\n} // namespace myNamespace\n</code></pre>\n\n<p>To use this:</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Vector3.h\"\n\nint main() {\n    using namespace myNamespace; // Forgot to add this line here.\n\n    Vector3 v1;\n\n    std::cout &lt;&lt; \"Default Constructor Used: \" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"v1 = ( \" &lt;&lt; v1.m_fx &lt;&lt; \", \"\n                           &lt;&lt; v1.m_fy &lt;&lt; \", \"\n                           &lt;&lt; v1.m_fz &lt;&lt; \" )\" &lt;&lt; std::endl;\n    // Or This Way Works Too\n    std::cout &lt;&lt; \"v1 = ( \" &lt;&lt; v1.m_f3[0] &lt;&lt; \", \"\n                           &lt;&lt; v1.m_f3[1] &lt;&lt; \", \"\n                           &lt;&lt; v1.m_f3[2] &lt;&lt; \" )\" &lt;&lt; std::endl;\n\n    Vector3 v2( 2.2f, 3.3f. 4.4f );\n    std::cout &lt;&lt; \"2nd Constructor Used: \" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"v2 = ( \" &lt;&lt; v2.m_f3[0] &lt;&lt; \", \"\n                           &lt;&lt; v2.m_f3[1] &lt;&lt; \", \"\n                           &lt;&lt; v2.m_f3[2] &lt;&lt; \" )\" &lt;&lt; std::endl;\n\n\n    float f3[3] = { 4.5f, 6.7f, 8.9f };\n    Vector3 v3( f3 );\n    std::cout &lt;&lt; \"3rd Constructor Used: \" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"v3 = ( \" &lt;&lt; v3.m_fx &lt;&lt; \", \"\n                           &lt;&lt; v3.m_f3[1] &lt;&lt; \", \"\n                           &lt;&lt; v3.m_fz &lt;&lt; \" )\" &lt;&lt; std::endl;\n\n} // main\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>If you want a have a class that includes instances of another user define class then it is as simple as this:</p>\n\n<p><strong>SomeClass.h</strong></p>\n\n<pre><code>#ifndef SOME_CLASS_H\n#define SOME_CLASS_H\n\nnamespace myNamespace {\n\nclass Vector3;\n\nclass SomeClass {\nprivate:\n    Vector3 m_currentPosition;\n    Vector3 m_velocity;\n    Vector3 m_finalPosition;\n\npublic:\n     SomeClass( Vector3 initialPosition, Vector3 currentVelocity );\n\n     Vector3 getFinalPosition() const;\n\nprivate:\n     void calculateFinalPosition();\n};\n\n} // namespace myNamespace\n</code></pre>\n\n<p><strong>SomeClass.cpp</strong></p>\n\n<pre><code>#include \"SomeClass.h\"\n#include \"Vector3.h\"\n\nnamespace myNamespace {\n\nSomeClass::SomeClass( Vector3 initialPosition, Vector3 currentVelocity ) :\nm_currentPosition( initialPosition ),\nm_velocity( currentVelocity ) {\n    calculateFinalPosition();\n}\n\nVector3 SomeClass::getFinalPosition() const {\n    return m_finalPosition;\n} // getFinalPosition\n\nvoid SomeClass::calculateFinalPosition() {\n   // Perform The Appropriate Calculation Here To Find The Final Position\n} // calculateFinalPosition\n\n} // namespace myNamespace\n</code></pre>\n\n<p>However for this to work; this would require the Vector3 to have the overloaded operators, functions such as cross, dot etc., to be defined.</p>\n"}], "owner": {"reputation": 677, "user_id": 5299149, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh6.googleusercontent.com/-610uudJP_8U/AAAAAAAAAAI/AAAAAAAAD4E/l5gyXwDnsrM/photo.jpg?sz=128", "display_name": "Maria-Andersado", "link": "https://stackoverflow.com/users/5299149/maria-andersado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3483, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1459414806, "creation_date": 1459365336, "last_edit_date": 1459367808, "question_id": 36317738, "link": "https://stackoverflow.com/questions/36317738/making-a-custom-class-in-c-with-constructor-values", "title": "Making a custom class in c++ with constructor values", "body": "<p>I'm still learning c++ and have a lot more experience with Java. In Java, creating a class can be as simple as this:</p>\n\n<pre><code>public class vertex \n{\n\npublic double x, y, z;\n\n public boolean eliminated = true; \n\n\n public vertex(double x, double y, double z)\n {\n     //vertex constructor\n }\n\n}\n</code></pre>\n\n<p>I'm trying to do something pretty much identical in C++, save for built in \"get\" functions for returning the values that should be set when creating an instance of the class, and want to know if my syntax is correct. Here is the class:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n\nusing namespace std;\n\nclass Vertex // Standard way of defining the class\n{\n\npublic:\n  // This means that all of the functions below this(and any variables) are accessible to the rest of the program.\n\n    Vertex(double x, double y, double z);\n    //constructor\n\n    double getX();\n    double getY();\n    double getZ();\n\n    double x;\n    double y;\n    double z;\n\n\n};\n\ndouble Vertex:: getX()\n{\n    return x;\n}\n</code></pre>\n\n<p>I would also like advice on creating a class that has instances of custom classes like the one aboce within them. </p>\n"}, {"tags": ["c++", "templates", "lambda", "typedef"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459365431, "post_id": 36317723, "comment_id": 60258915, "body": "I do not see any lambda in provided code."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1459365636, "post_id": 36317723, "comment_id": 60259039, "body": "Do you get errors when trying the typedef way?"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1459370983, "post_id": 36317723, "comment_id": 60262181, "body": "The C++11 <code>using</code> syntax will read more clearly than the old <code>typedef</code> mechanism, consider using that instead."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1459371043, "post_id": 36317723, "comment_id": 60262219, "body": "Also, you need a semicolon after your typedef..."}], "answers": [{"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": true, "score": 1, "last_activity_date": 1459379235, "creation_date": 1459379235, "answer_id": 36321323, "question_id": 36317723, "link": "https://stackoverflow.com/questions/36317723/how-to-typedef-a-function-signature-for-a-method-in-a-template-class-where-the-p/36321323#36321323", "title": "How to typedef a function signature for a method in a template class where the parameter is a generic type", "body": "<p>You need to qualify NotificationFn:</p>\n\n<pre><code>  virtual std::weak_ptr&lt;ACancelableToken&gt; RegisterNotification( U msgType, typename ANotifier&lt;T,U&gt;::NotificationFn fn );\n</code></pre>\n\n<p>Or if you are going to be using it multiple times, add a using statement:</p>\n\n<pre><code>using NotificationFn = typename ANotifier&lt;T,U&gt;::NotificationFn;\n</code></pre>\n\n<p>inside each derived class.</p>\n\n<p>here's a complete example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;memory&gt;\n\nstruct ACancelable {};\nstruct ACancelableToken {};\n\ntemplate&lt;typename T, typename U&gt;\nclass ANotifier : public ACancelable\n{\npublic:\n  using NotificationFn = std::function&lt;void(T&amp;)&gt;;\n  virtual std::weak_ptr&lt;ACancelableToken&gt; RegisterNotification( U msgType, NotificationFn fn ) = 0;\n  virtual void Notify( U msgType, T&amp; value ) = 0;\n};\n\ntemplate&lt;typename T, typename U&gt;\nclass ASingleNotifier : public ANotifier&lt;T, U&gt;\n{\n  virtual std::weak_ptr&lt;ACancelableToken&gt; RegisterNotification( U msgType, typename ANotifier&lt;T,U&gt;::NotificationFn fn );\n};\n\nint main() {\n    // your code goes here\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/sXVkvw\" rel=\"nofollow\">http://ideone.com/sXVkvw</a></p>\n"}], "owner": {"reputation": 592, "user_id": 1526491, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c6aae7a1c0ee19179246ef3db73ede00?s=128&d=identicon&r=PG", "display_name": "Kartik Aiyer", "link": "https://stackoverflow.com/users/1526491/kartik-aiyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 36321323, "answer_count": 1, "score": 0, "last_activity_date": 1459379253, "creation_date": 1459365285, "last_edit_date": 1459379253, "question_id": 36317723, "link": "https://stackoverflow.com/questions/36317723/how-to-typedef-a-function-signature-for-a-method-in-a-template-class-where-the-p", "title": "How to typedef a function signature for a method in a template class where the parameter is a generic type", "body": "<p>I've written a template class </p>\n\n<pre><code>template&lt;typename T, typename U&gt;\nclass ANotifier : public ACancelable\n{\npublic:\n  virtual std::weak_ptr&lt;ACancelableToken&gt; RegisterNotification( U msgType, std::function&lt;void(T&amp;)&gt; fn ) = 0;\n  virtual void Notify( U msgType, T&amp; value ) = 0;\n};\n\ntemplate&lt;typename T, typename U&gt;\nclass ASingleNotifier : public ANotifier&lt;T, U&gt;\n{\n...\n}\n\ntemplate&lt;typename T, typename U&gt;\nclass AMultiNotifier : public ANotifier&lt;T, U&gt;\n{\n...\n}\n</code></pre>\n\n<p>The base class provides a function signature in the lambda. I'm having to repeatedly define the function signature everytime I implement the function or want to make a stack variable of the specific function signature. </p>\n\n<p>I was wondering if there is a way to create a typedef</p>\n\n<p>So something like this </p>\n\n<pre><code>template&lt;typename T, typename U&gt;\nclass ANotifier : public ACancelable\n{\npublic:\n  typedef std::function&lt;void(T&amp;)&gt;  NotificationFn\n  virtual std::weak_ptr&lt;ACancelableToken&gt; RegisterNotification( U msgType, NotificationFn fn ) = 0;\n  virtual void Notify( U msgType, T&amp; value ) = 0;\n};\n\ntemplate&lt;typename T, typename U&gt;\nclass ASingleNotifier : public ANotifier&lt;T, U&gt;\n{\n...\n  virtual std::weak_ptr&lt;ACancelableToke&gt; RegisterNotification( U msgType, NotificationFn fn );\n}\n\ntemplate&lt;typename T, typename U&gt;\nclass AMultiNotifier : public ANotifier&lt;T, U&gt;\n{\n...\n  virtual std::weak_ptr&lt;ACancelableToke&gt; RegisterNotification( U msgType, NotificationFn fn );\n}\n</code></pre>\n\n<p>Do I need to declare a typedef in each template subclass. Also when actually creating a stack variable to a function of a specific type how would I declare the fn. eg. <code>NotificationFn&lt;uint32_t&gt; fn;</code></p>\n\n<p>I used what I have above and I get this error:</p>\n\n<blockquote>\n  <p>/Users/kartik/Projects/pancam/hardware/neolib/inc/ANotifier.h:36:76:\n  error: unknown type name 'NotificationFnOld'   virtual\n  std::weak_ptr RegisterNotification( U msgType,\n  NotificationFnOld fn )</p>\n</blockquote>\n\n<p>where <code>NotificationFnOld</code> is the same as <code>NotificationFn</code></p>\n\n<p>What I want to do is be able to change the function signature in one place (ie add/rem params) and have it bound to the typedef. I don't mind declaring new typedefs in each subclass as long as I can just have one place to change the signature (ofcourse I will have to change the function implementations but I would like to avoid having to modify intermediate variables and stuff).            </p>\n\n<p>EDIT</p>\n\n<p>I modified the typedef to a <code>using</code> and still got a similar error. This is what I used...\nInstead of <code>typedef std::function&lt;void(T&amp;)&gt;  NotificationFn;</code> \nI used <code>using NotificationFnOld = std::function&lt;void( T&amp; )&gt;;</code></p>\n\n<p>And this is the error I got.</p>\n\n<blockquote>\n  <p>/Users/kartik/Projects/pancam/hardware/neolib/inc/ANotifier.h:36:76:\n  error: unknown type name 'NotificationFnOld'   virtual\n  std::weak_ptr RegisterNotification( U msgType,\n  NotificationFnOld fn )</p>\n</blockquote>\n\n<p>The error is reported on the Subclass <code>ASingleNotifier</code> in the prototype of overriden function <code>RegisterNotification</code>. It doesn't complain when the alias is used in the prototype declared in <code>ANotifier</code>. How do I cleanly use the alias in my subclasses ?</p>\n\n<p>NOTE: <code>NotificationFnOld</code> and <code>NotificationFn</code> are used interchangeably in this question, I actually use only <code>NotificationFnOld</code> in my code. </p>\n\n<p>EDIT</p>\n\n<p>Incase details are needed, here is the code of what I'm trying.\nThere should be no relation with <code>ACancelable</code> but if more info is needed I will provide.</p>\n\n<pre><code>template&lt;typename T, typename U&gt;\nclass ANotifier : public ACancelable\n{\npublic:\n  using NotificationFn = std::function&lt;void( T&amp;, std::weak_ptr&lt;ACancelableToken&gt; )&gt;;\n  using NotificationFnOld = std::function&lt;void( T&amp; )&gt;;\n  virtual std::weak_ptr&lt;ACancelableToken&gt; RegisterNotification( U msgType, std::function&lt;void( T&amp;, std::shared_ptr&lt;ACancelableToken&gt; )&gt; fn ) = 0;\n  virtual void Notify( U msgType, T&amp; value ) = 0;\n};\n\ntemplate&lt;typename T, typename U&gt;\nclass ASingleNotifier : public ANotifier&lt;T, U&gt;\n{\npublic:\n  virtual ~ASingleNotifier()\n  { }\n\n  virtual std::weak_ptr&lt;ACancelableToken&gt; RegisterNotification( U msgType, std::function&lt;void( T&amp;, std::shared_ptr&lt;ACancelableToken&gt; )&gt; fn )\n  {\n    std::weak_ptr&lt;ACancelableToken&gt; retval;\n    std::unique_lock &lt;std::mutex&gt; lk( m_mtx );\n    std::shared_ptr &lt;ATypedCancelableToken&lt;U&gt;&gt; tmp( std::make_shared&lt;ATypedCancelableToken&lt;U&gt;&gt;( *this, msgType ));\n    if( m_notifierMap.find( msgType ) == m_notifierMap.end() ) {\n      m_notifierMap[ msgType ] = std::make_pair( fn, tmp );\n      retval = tmp;\n    }\n    return retval;\n  }\n\n  virtual void CancelWith( std::shared_ptr&lt;ACancelableToken&gt; spBaseToken ) const\n  {\n    try {\n      auto spToken = std::dynamic_pointer_cast&lt;ATypedCancelableToken&lt;U&gt;&gt;( spBaseToken );\n      std::unique_lock&lt;std::mutex&gt; lk( this-&gt;m_mtx );\n      m_notifierMap.erase( spToken-&gt;m_msgType );\n    }\n    catch ( std::bad_cast exp ) { }\n  }\n\n  virtual void Notify( U msgType, T&amp; value )\n  {\n    m_mtx.lock();\n    auto it = m_notifierMap.find( msgType );\n    if ( it != m_notifierMap.end() &amp;&amp; it-&gt;second.first ) {\n      auto fn = it-&gt;second.first;\n      m_mtx.unlock();\n      fn( value );\n    }else {\n      m_mtx.unlock();\n    }\n  }\n\nprotected:\n  mutable std::map &lt;U, std::pair&lt;std::function&lt;void( T&amp;, std::shared_ptr&lt;ACancelableToken&gt; )&gt;, std::shared_ptr&lt;ATypedCancelableToken&lt;U&gt;&gt;&gt;&gt; m_notifierMap;\n  mutable std::mutex m_mtx;\n};\n\ntemplate&lt;typename T, typename U&gt;\nclass AMultiNotifier : public ANotifier&lt;T,U&gt;\n{\nprotected:\n  class AmnCancellableToken : public ATypedCancelableToken&lt;U&gt;\n  {\n  public:\n    AmnCancellableToken( const ACancelable&amp; cancellable,\n                         U msgType,\n                         typename std::list&lt;std::pair&lt;std::function&lt;void( T&amp;, std::shared_ptr&lt;ACancelableToken&gt; )&gt;,std::shared_ptr&lt;AmnCancellableToken&gt;&gt;&gt;::iterator it ) :\n        ATypedCancelableToken&lt;U&gt;{ cancellable, msgType }, m_it{ it } { }\n    ~AmnCancellableToken() {}\n    const typename std::list&lt;std::pair&lt;std::function&lt;void( T&amp;, std::shared_ptr&lt;ACancelableToken&gt; )&gt;,std::shared_ptr&lt;AmnCancellableToken&gt;&gt;&gt;::iterator m_it;\n  };\n\npublic:\n  ~AMultiNotifier() { }\n  virtual std::weak_ptr&lt;ACancelableToken&gt; RegisterNotification( U msgType, std::function&lt;void( T&amp;, std::shared_ptr&lt;ACancelableToken&gt; )&gt; fn )\n  {\n    std::weak_ptr&lt;ACancelableToken&gt; retval;\n    std::unique_lock &lt;std::mutex&gt; lk( m_mtx );\n    std::shared_ptr&lt;AmnCancellableToken&gt; token;\n\n    m_notifierMap[ msgType ].push_back( std::make_pair( fn, token) );\n    auto it = m_notifierMap[msgType].end();\n    token = std::make_shared&lt;AmnCancellableToken&gt;( *this, msgType, --it  );\n\n    m_notifierMap[ msgType ].back().second = token;\n    retval = token;\n    return retval;\n  }\n\n  virtual void CancelWith( std::shared_ptr&lt;ACancelableToken&gt; spBaseToken ) const\n  {\n    try {\n      auto spToken = std::dynamic_pointer_cast&lt;AmnCancellableToken&gt;( spBaseToken );\n      std::unique_lock&lt;std::mutex&gt; lk( this-&gt;m_mtx );\n      if ( !m_notifierMap[ spToken-&gt;m_msgType ].empty()) { //If the list of handler is not empty\n        m_notifierMap[ spToken-&gt;m_msgType ].erase( spToken-&gt;m_it ); //Delete the handler in list\n        if ( m_notifierMap[ spToken-&gt;m_msgType ].empty()) //If the list is now empty\n          m_notifierMap.erase( spToken-&gt;m_msgType ); // Delete the msgType Key element\n      }\n    } catch ( std::bad_cast exp ) { }\n  }\n\n  virtual void Notify( U msgType, T&amp; value )\n  {\n    m_mtx.lock();\n    auto anotherCopy = m_notifierMap;\n    m_mtx.unlock();\n    typename std::map&lt;U, std::list&lt;std::pair&lt;std::function&lt;void( T&amp;, std::shared_ptr&lt;ACancelableToken&gt; )&gt;, std::shared_ptr&lt;AmnCancellableToken&gt;&gt;&gt;&gt;::iterator ait =\n        anotherCopy.find( msgType );\n\n    if( ait != anotherCopy.end() &amp;&amp;\n        !ait-&gt;second.empty() ) {\n      for( auto ait2 = ait-&gt;second.begin(); ait2 != ait-&gt;second.end(); ait2++ )\n        if( ait2-&gt;first )\n          ait2-&gt;first( value );\n    }\n  }\n\nprotected:\n  mutable std::map &lt;U, std::list&lt;std::pair&lt;std::function&lt;void( T&amp;, std::shared_ptr&lt;ACancelableToken&gt; )&gt;,std::shared_ptr&lt;AmnCancellableToken&gt;&gt;&gt;&gt; m_notifierMap;\n  mutable std::mutex m_mtx;\n};\n</code></pre>\n\n<p>Thanks for the help / suggestions</p>\n\n<p>Kartik</p>\n"}, {"tags": ["c++", "linux", "opencl"], "answers": [{"comments": [{"owner": {"reputation": 212, "user_id": 5001337, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153369288784800/picture?type=large", "display_name": "Robert Ioffe", "link": "https://stackoverflow.com/users/5001337/robert-ioffe"}, "edited": false, "score": 0, "creation_date": 1459441255, "post_id": 36338720, "comment_id": 60299361, "body": "Also, please make sure that you installed OpenCL driver first :)"}], "tags": [], "owner": {"reputation": 212, "user_id": 5001337, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153369288784800/picture?type=large", "display_name": "Robert Ioffe", "link": "https://stackoverflow.com/users/5001337/robert-ioffe"}, "is_accepted": false, "score": 0, "last_activity_date": 1459441209, "creation_date": 1459441209, "answer_id": 36338720, "question_id": 36317686, "link": "https://stackoverflow.com/questions/36317686/clgetplatformids-returns-1001-on-intel-installation-on-linux/36338720#36338720", "title": "clGetPlatformIDs returns -1001 on intel installation on linux", "body": "<p>Please direct your questions about Intel OpenCL SDK to Intel OpenCL Forum: <a href=\"https://software.intel.com/en-us/forums/opencl\" rel=\"nofollow\">https://software.intel.com/en-us/forums/opencl</a> </p>\n\n<p>To ensure fast service:</p>\n\n<ol>\n<li>Please let us know what Processor, Operating System, Graphics Driver Version, and Tool Version you are using</li>\n<li><p>Please state steps to reproduce the issue as precisely as you possibly could</p></li>\n<li><p>Before posting, search the forum to see if someone already answered a similar question</p></li>\n</ol>\n"}], "owner": {"reputation": 2618, "user_id": 2228070, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/329ef92f05f1986990497ab0bbc63749?s=128&d=identicon&r=PG", "display_name": "NmdMystery", "link": "https://stackoverflow.com/users/2228070/nmdmystery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459441209, "creation_date": 1459365172, "question_id": 36317686, "link": "https://stackoverflow.com/questions/36317686/clgetplatformids-returns-1001-on-intel-installation-on-linux", "title": "clGetPlatformIDs returns -1001 on intel installation on linux", "body": "<p>I've installed the Intel OpenCL SDK.  I'm able to find the header and link the library, but none of the functions work.  The very first function called in an OpenCL program, <code>clGetPlatformIDs()</code>, returns -1001 - an undefined error code from what I can find.</p>\n\n<p>Other people have gotten the same issue with the Nvidia SDK for OpenCL and fixed it, but I'm finding it hard to get an answer about how to solve the issue with an Intel installation, which has a slightly different setup.</p>\n"}, {"tags": ["c++", "api", "winapi", "compiler-errors"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 5, "creation_date": 1459365381, "post_id": 36317672, "comment_id": 60258885, "body": "One normally does not <code>#include</code> *.cpp files."}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 1, "creation_date": 1459365429, "post_id": 36317672, "comment_id": 60258913, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/949017/how-can-i-resolve-this-link-error-in-visual-studio-lnk2005\">How can I resolve this link error in Visual Studio (LNK2005)?</a>"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 3, "creation_date": 1459365458, "post_id": 36317672, "comment_id": 60258928, "body": "#including a .cpp file is <i>very</i> weird.  If you insist on doing that, can you show us it&#39;s contents please?"}, {"owner": {"reputation": 303, "user_id": 5615548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/3USdg.png?s=128&g=1", "display_name": "Onelio", "link": "https://stackoverflow.com/users/5615548/onelio"}, "edited": false, "score": 0, "creation_date": 1459366399, "post_id": 36317672, "comment_id": 60259561, "body": "I&#39;ve include a part of it"}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 5615548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/3USdg.png?s=128&g=1", "display_name": "Onelio", "link": "https://stackoverflow.com/users/5615548/onelio"}, "edited": false, "score": 0, "creation_date": 1459366355, "post_id": 36317834, "comment_id": 60259527, "body": "But I&#39;ve not defined a variable in one cpp and in another, I just have the ones defined in the cpp that I want to include and the code that I&#39;ve showed here"}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "reply_to_user": {"reputation": 303, "user_id": 5615548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/3USdg.png?s=128&g=1", "display_name": "Onelio", "link": "https://stackoverflow.com/users/5615548/onelio"}, "edited": false, "score": 1, "creation_date": 1459366523, "post_id": 36317834, "comment_id": 60259652, "body": "If you&#39;ve defined &quot;foo&quot; in a .&quot;xcpp&quot; ... and if you&#39;ve #include&#39;ed x.cpp in multiple places ... then you&#39;ve defined &quot;foo&quot; multiple times.  Please tell me you&#39;re not #including cpp files!  That would be Bad!"}, {"owner": {"reputation": 303, "user_id": 5615548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/3USdg.png?s=128&g=1", "display_name": "Onelio", "link": "https://stackoverflow.com/users/5615548/onelio"}, "edited": false, "score": 0, "creation_date": 1459366908, "post_id": 36317834, "comment_id": 60259865, "body": "I just noticed that I&#39;ve the first cpp with a include to the second one, then as you said I should have defined all the elements of the second cpp to the first one(form) by just including it(even if I&#39;ve not defined them in the first one) and that is why it happens, right? One thing more, all of my variables are inside functions.. I&#39;m just saying"}, {"owner": {"reputation": 303, "user_id": 5615548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/3USdg.png?s=128&g=1", "display_name": "Onelio", "link": "https://stackoverflow.com/users/5615548/onelio"}, "edited": false, "score": 0, "creation_date": 1459372321, "post_id": 36317834, "comment_id": 60262949, "body": "I&#39;ve added part of my code to the initial cpp and still happens"}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "reply_to_user": {"reputation": 303, "user_id": 5615548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/3USdg.png?s=128&g=1", "display_name": "Onelio", "link": "https://stackoverflow.com/users/5615548/onelio"}, "edited": false, "score": 1, "creation_date": 1459373003, "post_id": 36317834, "comment_id": 60263295, "body": "Dude, the LNK2005 is because you&#39;re (somehow) declaring the same symbol multiple times.  Based on what you&#39;ve said, it sounds like this is because you&#39;re #including a .cpp.  If that&#39;s the case: <i>DON&#39;T DO THAT</i>!  Put your definitions (including function prototypes) in a <i>.h header</i>, and only ever include .h files, never .cpp files. When you create your header, don&#39;t forget to add a header guard. If you&#39;re still having problems after that, please update you post."}, {"owner": {"reputation": 303, "user_id": 5615548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/3USdg.png?s=128&g=1", "display_name": "Onelio", "link": "https://stackoverflow.com/users/5615548/onelio"}, "edited": false, "score": 0, "creation_date": 1459373123, "post_id": 36317834, "comment_id": 60263358, "body": "Updated and still happening"}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "reply_to_user": {"reputation": 303, "user_id": 5615548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/3USdg.png?s=128&g=1", "display_name": "Onelio", "link": "https://stackoverflow.com/users/5615548/onelio"}, "edited": false, "score": 1, "creation_date": 1459397025, "post_id": 36317834, "comment_id": 60270672, "body": "Q: can you tell us more about main.cpp and main1.cpp (where the duplication is occurring)?  Or better, can you reproduce the problem with a simple two .cpp example: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 303, "user_id": 5615548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/3USdg.png?s=128&g=1", "display_name": "Onelio", "link": "https://stackoverflow.com/users/5615548/onelio"}, "edited": false, "score": 0, "creation_date": 1459448214, "post_id": 36317834, "comment_id": 60303500, "body": "I just tried to build the code without the &quot;include&quot; and worked fine. Then, I added to the main cpp the code of the second cpp and still gave me error (I&#39;ve edited my post)"}, {"owner": {"reputation": 303, "user_id": 5615548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/3USdg.png?s=128&g=1", "display_name": "Onelio", "link": "https://stackoverflow.com/users/5615548/onelio"}, "edited": false, "score": 0, "creation_date": 1459450515, "post_id": 36317834, "comment_id": 60304851, "body": "Fixed (I thnkk) I&#39;ve readed your post and I noticed that I added the old main too to the other project. But I still like to put it in other file, is there any way to make it &quot;work&quot; in other file as .h or .cpp or anyone...?"}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "reply_to_user": {"reputation": 303, "user_id": 5615548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/3USdg.png?s=128&g=1", "display_name": "Onelio", "link": "https://stackoverflow.com/users/5615548/onelio"}, "edited": false, "score": 0, "creation_date": 1459456863, "post_id": 36317834, "comment_id": 60308458, "body": "Sure.  Just put the &quot;interface&quot; (function prototypes, struct definitions. etc) in a .h header, and <i>only</i> put &quot;implementation code&quot; (function bodies) in a .cpp.  #include .h, compile/link .cpp ... and you should be good!"}], "tags": [], "owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "is_accepted": true, "score": 2, "last_activity_date": 1459449924, "last_edit_date": 1495535308, "creation_date": 1459365637, "answer_id": 36317834, "question_id": 36317672, "link": "https://stackoverflow.com/questions/36317672/error-including-a-h-file-to-the-win32-api-in-c/36317834#36317834", "title": "Error including a .h file to the Win32 api in c++", "body": "<p>The problem is that you're inadvertently defining the same thing in multiple places.</p>\n\n<p>You should #include header files, not .cpp files.</p>\n\n<p>You should break your interface (struct definitions, function prototypes, typedefs, etc.) out into your header, and only leave function definitions in .cpp.</p>\n\n<p>Your headers should always have an <a href=\"https://en.wikipedia.org/wiki/Include_guard\" rel=\"nofollow noreferrer\">include guard</a></p>\n\n<pre><code>#ifndef MYHEADER_H\n#define MYHEADER_H\n\nstruct mystruct {\n    int i;\n};\n\n#endif \n/* MYHEADER_H */\n</code></pre>\n\n<p>See also:</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/10046485/error-lnk2005-already-defined\">error LNK2005, already defined?</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/30501919/error-lnk2005-already-defined-in-obj\">Error lnk2005 already defined in .obj</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/949017/how-can-i-resolve-this-link-error-in-visual-studio-lnk2005\">How can I resolve this link error in Visual Studio (LNK2005)?</a></p></li>\n</ul>\n\n<p>==================================================</p>\n\n<p>ADDENDUM:</p>\n\n<p>If you do this:</p>\n\n<pre><code>// main1.cpp\n#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n\nfloat CharToInt(char* value) {\n    stringstream str;\n    str &lt;&lt; value;\n    float x;\n    str &gt;&gt; x;\n    return x;\n}\n</code></pre>\n\n<p>And then to do this:</p>\n\n<pre><code>// main.cpp\n#include &lt;windows.h&gt;\n#include \"main1.cpp\"  // BAD PRACTICE!!!!\n\nint main (int argc, char *argv[]) {\n  ...\n</code></pre>\n\n<p><em>THEN YOU'RE ASKING FOR TROUBLE!</em>  Don't do it!!!</p>\n\n<p>Instead, you should do this:</p>\n\n<pre><code>// myheader.h\n#ifndef MYHEADER_H\n#define MYHEADER_H\n\n#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n\nfloat CharToInt(char* value);\n... // other function prototypes, struct definitions, typedefs, externs as needed\n\n#endif\n// MYHEADER_H\n</code></pre>\n\n<p>Unfortunately, even the \"bad\" code I described above won't necessarily cause a duplicate symbol error ... UNLESS you happened implement CharToInt() in both main1.cpp and main.cpp.</p>\n\n<p>But it's just bad practice.</p>\n\n<p>And I think the actual problem is something very similar to the \"bad code\" above.</p>\n\n<p>I honestly believe if you:</p>\n\n<p>a) Factored all your function prototypes and struct definitions into headers</p>\n\n<p>b) Used an include guard in your headers</p>\n\n<p>c) Implemented your functions in <em>exactly one</em> .cpp - making sure the function signature in the .cpp matches the function prototype in the .h header</p>\n\n<p>... then the problem would \"disappear\".</p>\n\n<p>I sincerely hope that helps...</p>\n"}], "owner": {"reputation": 303, "user_id": 5615548, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/3USdg.png?s=128&g=1", "display_name": "Onelio", "link": "https://stackoverflow.com/users/5615548/onelio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 0, "accepted_answer_id": 36317834, "answer_count": 1, "score": -2, "last_activity_date": 1459449924, "creation_date": 1459365132, "last_edit_date": 1459448249, "question_id": 36317672, "link": "https://stackoverflow.com/questions/36317672/error-including-a-h-file-to-the-win32-api-in-c", "title": "Error including a .h file to the Win32 api in c++", "body": "<p>I'm starting to learn how to use the Win32 Api to build a program un c++ and I've done a form that have a CheckBox that when you press it, the program(should) execute another code written in other .h\nThe problem is that this code written in another cpp have strings, floats, unsigned int and char and when I include them in the main cpp where the form is written and try to build the program, it show me more than 17 errors(one by variable) I have been looking for answers and I've seen in this forum a guy how told that adding this</p>\n\n<pre><code>#define WIN32_LEAN_AND_MEAN\n</code></pre>\n\n<p>should work... I've tried it but keep happening.</p>\n\n<p>Here you have the code:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n//Here I add the include, #include \"newcpp.h\"\nLRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);\n\nstatic char *title = TEXT(\"Check Box\");\n\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,\n    LPSTR lpCmdLine, int nCmdShow)\n{\n    MSG  msg;\n    WNDCLASS wc = { 0 };\n    wc.lpszClassName = TEXT(\"Check Box\");\n    wc.hInstance = hInstance;\n    wc.hbrBackground = GetSysColorBrush(COLOR_3DFACE);\n    wc.lpfnWndProc = WndProc;\n    wc.hCursor = LoadCursor(0, IDC_ARROW);\n\n\n    RegisterClass(&amp;wc);\n    CreateWindow(wc.lpszClassName, title,\n        WS_OVERLAPPEDWINDOW | WS_VISIBLE,\n        150, 150, 230, 150, 0, 0, hInstance, 0);\n\n    while (GetMessage(&amp;msg, NULL, 0, 0)) {\n        TranslateMessage(&amp;msg);\n        DispatchMessage(&amp;msg);\n    }\n    return (int)msg.wParam;\n}\n\nLRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)\n{\n\n    switch (msg)\n    {\n    case WM_CREATE:\n    {\n        CreateWindow(TEXT(\"button\"), TEXT(\"Show Title\"),\n            WS_VISIBLE | WS_CHILD | BS_CHECKBOX,\n            20, 20, 185, 35,\n            hwnd, (HMENU)1, ((LPCREATESTRUCT)lParam)-&gt;hInstance, NULL);\n        CheckDlgButton(hwnd, 1, BST_CHECKED);\n        break;\n    }\n\n    case WM_COMMAND:\n    {\n        BOOL checked = IsDlgButtonChecked(hwnd, 1);\n        if (checked) {\n            CheckDlgButton(hwnd, 1, BST_UNCHECKED);\n            SetWindowText(hwnd, TEXT(\"\"));\n            //Code Should be here like action();\n        }\n        else {\n            CheckDlgButton(hwnd, 1, BST_CHECKED);\n            SetWindowText(hwnd, title);\n            //and here like anotheraction();\n        }\n        break;\n    }\n\n    case WM_DESTROY:\n    {\n        PostQuitMessage(0);\n        break;\n    }\n    }\n    return DefWindowProc(hwnd, msg, wParam, lParam);\n}\n</code></pre>\n\n<p>And here you have a photo of my errors:</p>\n\n<p>(Sorry about the language, I've been trying to translate VS to english but I dont know how ._. But I can translate all the errors if needed.)</p>\n\n<p><a href=\"https://i.stack.imgur.com/4l5RX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4l5RX.png\" alt=\"enter image description here\"></a></p>\n\n<p>Most of the errors say \"already defined....\" except the first one, that says \"found one or more symbols defined simultaneously\"</p>\n\n<p>__Edited</p>\n\n<p>The .cpp mostly have things like:</p>\n\n<pre><code>float CharToInt(char* value) {\n    stringstream str;\n    str &lt;&lt; value;\n    float x;\n    str &gt;&gt; x;\n    return x;\n}\n</code></pre>\n\n<p>Here I've a test of my code. I put my function inside the main cpp and still give me this error.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;psapi.h&gt; //yes, so much libs, but I'll need them\n#include &lt;sstream&gt;\n#pragma comment(lib, \"psapi\")\nusing namespace std;\nfloat CharToInt(char* value) {\n    stringstream str;\n    str &lt;&lt; value;\n    float x;\n    str &gt;&gt; x;\n    return x;\n}\n\nLRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);\n\nstatic char *title = TEXT(\"Check Box\");\n\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,\n    LPSTR lpCmdLine, int nCmdShow)\n{\n    MSG  msg;\n    WNDCLASS wc = { 0 };\n    wc.lpszClassName = TEXT(\"Check Box\");\n    wc.hInstance = hInstance;\n    wc.hbrBackground = GetSysColorBrush(COLOR_3DFACE);\n    wc.lpfnWndProc = WndProc;\n    wc.hCursor = LoadCursor(0, IDC_ARROW);\n\n\n    RegisterClass(&amp;wc);\n    CreateWindow(wc.lpszClassName, title,\n        WS_OVERLAPPEDWINDOW | WS_VISIBLE,\n        150, 150, 230, 150, 0, 0, hInstance, 0);\n\n    while (GetMessage(&amp;msg, NULL, 0, 0)) {\n        TranslateMessage(&amp;msg);\n        DispatchMessage(&amp;msg);\n    }\n    return (int)msg.wParam;\n}\n\nLRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)\n{\n\n    switch (msg)\n    {\n    case WM_CREATE:\n    {\n        CreateWindow(TEXT(\"button\"), TEXT(\"Show Title\"),\n            WS_VISIBLE | WS_CHILD | BS_CHECKBOX,\n            20, 20, 185, 35,\n            hwnd, (HMENU)1, ((LPCREATESTRUCT)lParam)-&gt;hInstance, NULL);\n        CheckDlgButton(hwnd, 1, BST_CHECKED);\n        break;\n    }\n\n    case WM_COMMAND:\n    {\n        BOOL checked = IsDlgButtonChecked(hwnd, 1);\n        if (checked) {\n            CheckDlgButton(hwnd, 1, BST_UNCHECKED);\n            SetWindowText(hwnd, TEXT(\"\"));\n            //Code Should be here like action();\n        }\n        else {\n            CheckDlgButton(hwnd, 1, BST_CHECKED);\n            SetWindowText(hwnd, title);\n            //and here like anotheraction();\n        }\n        break;\n    }\n\n    case WM_DESTROY:\n    {\n        PostQuitMessage(0);\n        break;\n    }\n    }\n    return DefWindowProc(hwnd, msg, wParam, lParam);\n}\n</code></pre>\n\n<p>Error:\n<a href=\"https://i.stack.imgur.com/04PFF.png\" rel=\"nofollow noreferrer\">IMG</a></p>\n\n<p>1-\"found one or more symbols defined simultaneously\"\n2-\"already defined....\"</p>\n"}, {"tags": ["c++", "pointers", "vector", "struct", "iterator"], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 0, "last_activity_date": 1459365491, "creation_date": 1459365491, "answer_id": 36317788, "question_id": 36317647, "link": "https://stackoverflow.com/questions/36317647/accessing-elements-pointed-to-by-interator-in-vector-of-pointers-to-structures/36317788#36317788", "title": "Accessing elements pointed to by interator in vector of pointers to structures + pointer type is required", "body": "<blockquote>\n  <p>What is the correct form of a command, that would do what I want - dereference the iterator beginning correctly?</p>\n</blockquote>\n\n<p>type of <code>beginning</code> is <code>vector&lt;myStruct*&gt;::iterator</code><br>\ntype of <code>beginning + offset</code> is also <code>vector&lt;myStruct*&gt;::iterator</code><br>\ntype of <code>*(beginning + offset)</code> is <code>myStruct*</code>  </p>\n\n<p>To access the name member of the <code>myStruct</code> element, you need to use <code>(*(beginning + offset))-&gt;name</code></p>\n\n<p>You can make it easier to understand the code by using a temporary.</p>\n\n<pre><code>myStruct* elementPtr = *(beginning + offset);\nelementPtr-&gt;name;\n</code></pre>\n"}], "owner": {"reputation": 305, "user_id": 6136143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b63d5cd332b2cfb3ad224c082ffca0?s=128&d=identicon&r=PG&f=1", "display_name": "Topper Harley", "link": "https://stackoverflow.com/users/6136143/topper-harley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 36317788, "answer_count": 1, "score": 0, "last_activity_date": 1459365508, "creation_date": 1459365036, "question_id": 36317647, "link": "https://stackoverflow.com/questions/36317647/accessing-elements-pointed-to-by-interator-in-vector-of-pointers-to-structures", "title": "Accessing elements pointed to by interator in vector of pointers to structures + pointer type is required", "body": "<p>I'm new to C++ and have a little problem accesing elements of my vector. It is a vector of pointers to myStruct in Class A: </p>\n\n<pre><code>struct myStruct{\n int val; \n string name;\n}myStruct;\n\nClass A{\n ...\n vector&lt;myStruct*&gt; vec;\n B create()const;\n} \n\nClass B{\n ...\n string Name(); //return name of current struct\n vector&lt;myStruct*&gt;::iterator beginning;\n int offset; //offset from the beginning\n} \n</code></pre>\n\n<p>Class A has a method <code>create()const</code>, where object of Class B is created. It is supposed to work like some kind of iterator, to go though a part of <code>vec</code> with certain properties. The method <code>Name()</code> is supposed to return <code>name</code> from <code>myStruct</code> on possition <code>vec[offset]</code></p>\n\n<p>In <code>A.create()</code> I create new object of <code>Class B</code>, select the beginning of the iterated part of <code>vec</code> by <code>lower_bound()</code> and put it in <code>new_object.beginning</code>.  </p>\n\n<p>When I want to implement <code>B.Name()</code>, I can only access the elements of the structs in <code>vec</code> by moving the iterator <code>beginning</code> and dereferencing it. What is the correct form of a command, that would do what I want - dereference the iterator <code>beginning</code> correctly? </p>\n\n<p>The completion in my IDE has lead me to something like <code>*( *(beginning + offset))-&gt;name</code>, but then it shows an error <code>Pointer type is required</code></p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2015", "project", "solution"], "comments": [{"owner": {"reputation": 724, "user_id": 3504957, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f3ea51326b0d38733fd9caba9b2df86c?s=128&d=identicon&r=PG&f=1", "display_name": "senschen", "link": "https://stackoverflow.com/users/3504957/senschen"}, "edited": false, "score": 2, "creation_date": 1459364772, "post_id": 36317516, "comment_id": 60258511, "body": "Might it not be better to pull the shared files out into a third project, referenced by the other two?  That way you don&#39;t have to worry about keeping multiple copies around and keeping them in sync (even if VS is helping with that part)."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 724, "user_id": 3504957, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f3ea51326b0d38733fd9caba9b2df86c?s=128&d=identicon&r=PG&f=1", "display_name": "senschen", "link": "https://stackoverflow.com/users/3504957/senschen"}, "edited": false, "score": 0, "creation_date": 1459364903, "post_id": 36317516, "comment_id": 60258596, "body": "What @senschen says. I usually make it a static library."}, {"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1459364974, "post_id": 36317516, "comment_id": 60258641, "body": "Maybe this is already the way this is &quot;done&quot; (third project referenced by the other two). But how can I know which is the &quot;third&quot; project where to put the new class?"}], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1459374781, "post_id": 36319224, "comment_id": 60264127, "body": "At the moment it seems already configured in this way, since once I edit a file, the others will be edited as well. But where do I see the &quot;origin&quot; source? Or maybe the files are just added using Add-&gt;Existing File within each project?"}, {"owner": {"reputation": 2113, "user_id": 4433546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fp46R.jpg?s=128&g=1", "display_name": "TriskalJM", "link": "https://stackoverflow.com/users/4433546/triskaljm"}, "reply_to_user": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1459375980, "post_id": 36319224, "comment_id": 60264658, "body": "@markzzz If they were in a library, the .cpp files wouldn&#39;t be in both projects"}], "tags": [], "owner": {"reputation": 2113, "user_id": 4433546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fp46R.jpg?s=128&g=1", "display_name": "TriskalJM", "link": "https://stackoverflow.com/users/4433546/triskaljm"}, "is_accepted": true, "score": 1, "last_activity_date": 1459370241, "creation_date": 1459370241, "answer_id": 36319224, "question_id": 36317516, "link": "https://stackoverflow.com/questions/36317516/how-to-sync-two-project-inside-the-same-solution/36319224#36319224", "title": "How to &quot;sync&quot; two project inside the same solution?", "body": "<p>If you have classes that are used by more than one project, the best approach is to create a new third project that both <code>DefaultProject-app</code> and <code>DefaultProject-vst2</code> can both reference. This is one of the foundations of programming: a library with common classes and functions.</p>\n"}], "owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 36319224, "answer_count": 1, "score": 0, "last_activity_date": 1459370241, "creation_date": 1459364606, "question_id": 36317516, "link": "https://stackoverflow.com/questions/36317516/how-to-sync-two-project-inside-the-same-solution", "title": "How to &quot;sync&quot; two project inside the same solution?", "body": "<p>I've these project inside Visual Studio 2015:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9qBS2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9qBS2.png\" alt=\"enter image description here\"></a></p>\n\n<p>as you can see, they \"share\" the same classes (.cpp/.h). If I edit it inside <code>DefaultProject-app</code>, automatically it change within <code>DefaultProject-vst2</code>.</p>\n\n<p>Now, I want to make a new class, and I want the same for it. So right click to <code>DefaultProject-app</code>->Add->Class. But once I create it, it place only in <code>DefaultProject-app</code>. It should be in both project, and compile when I compile one of the other.</p>\n\n<p>How can I do it? Somethings like \"Build Phases\" in Xcode?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1459364486, "post_id": 36317378, "comment_id": 60258316, "body": "Please read a book regarding C++"}, {"owner": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "edited": false, "score": 0, "creation_date": 1459364530, "post_id": 36317378, "comment_id": 60258346, "body": "Why don&#39;t you want to use the STL?"}, {"owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "edited": false, "score": 0, "creation_date": 1459364562, "post_id": 36317378, "comment_id": 60258367, "body": "I&#39;m not allowed to use the STL for the class I&#39;m in."}, {"owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "edited": false, "score": 0, "creation_date": 1459364931, "post_id": 36317378, "comment_id": 60258609, "body": "Can anyone tell me why I&#39;m getting negative votes for this question? I&#39;ve spent about 2 hours searching for an answer to this problem before asking."}, {"owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "edited": false, "score": 0, "creation_date": 1459365082, "post_id": 36317378, "comment_id": 60258706, "body": "Man I thought we had a good community here, first time I&#39;ve been disappointed."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1459365170, "post_id": 36317378, "comment_id": 60258760, "body": "We have no idea what data types you are using, You gave a semi explanation of your requirements, and the way the question is worded it looks like your code works and you want suggestions to make it better which is better suited to Code Review and not Stack Overflow"}, {"owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1459365187, "post_id": 36317378, "comment_id": 60258773, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I don&#39;t understand your question. That looks like perfectly good code to me."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1459365247, "post_id": 36317378, "comment_id": 60258798, "body": "Questions that can be interpreted as &quot;help me with my homework&quot; frequently get downvoted depending on how much effort appears to have been put into the work. (I&#39;m not saying that&#39;s fair, just answering your question about why)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1459365253, "post_id": 36317378, "comment_id": 60258802, "body": "@ClaytonBrant Stackoverflow is no replacement for studies you should do yourself."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1459365261, "post_id": 36317378, "comment_id": 60258804, "body": "The C++ code you&#39;ve provided doesn&#39;t seem to even attempt to do anything vaguely similar to the Java code you provided. What do you really want to accomplish?"}, {"owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1459365286, "post_id": 36317378, "comment_id": 60258821, "body": "@NathanOliver Thank you, I&#39;m not exactly sure how people expect me to know that without telling me. At least explain that you need more information before downvoting a student. Jeeze. Thanks for the clarification Nathan."}, {"owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1459365369, "post_id": 36317378, "comment_id": 60258876, "body": "@JerryCoffin I&#39;m trying to assign parameters to an algorithm for the Traveling Sales man program. I need to take an unknown amount of user input and assign that input to either create a new city, or assign routes and costs for each city."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1459365388, "post_id": 36317378, "comment_id": 60258886, "body": "@ClaytonBrant <i>&quot;That looks like perfectly good code to me.&quot;</i> Believe me it isn&#39;t. It compiles, but certainly doesn&#39;t do what you want, or believe it does."}, {"owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "edited": false, "score": 0, "creation_date": 1459365466, "post_id": 36317378, "comment_id": 60258934, "body": "@DieterL&#252;cking, I already spent 2 hours attempting to answer the question myself. Stack overflow is for studying and learning, in fact that&#39;s its exact purpose..."}, {"owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1459365537, "post_id": 36317378, "comment_id": 60258976, "body": "@kfsone, I suppose that&#39;s what one should expect from the internet. Thanks for the info."}], "answers": [{"comments": [{"owner": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "reply_to_user": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "edited": false, "score": 1, "creation_date": 1459365774, "post_id": 36317803, "comment_id": 60259116, "body": "If you want to extract only integer types this might not be the approach you are expected to do. As with all homework stuff, look what you learned in class and use these methods."}, {"owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "edited": false, "score": 0, "creation_date": 1459365900, "post_id": 36317803, "comment_id": 60259195, "body": "Unfortunately my class doesn&#39;t teach any C++ at all. I&#39;m a transfer student and this is a mid tier class that focuses on algorithms. I&#39;m expected to be an advanced C++ programmer already because thats the language the school uses, but my old school only used Java through my junior year."}, {"owner": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "reply_to_user": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "edited": false, "score": 0, "creation_date": 1459366058, "post_id": 36317803, "comment_id": 60259321, "body": "You are in a tough spot then. Read up on a good Book, and take care, because there is a lot of garbage out there."}], "tags": [], "owner": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "is_accepted": true, "score": 1, "last_activity_date": 1459365524, "creation_date": 1459365524, "answer_id": 36317803, "question_id": 36317378, "link": "https://stackoverflow.com/questions/36317378/how-do-i-add-elements-to-two-different-arrays-inside-of-a-loop-based-on-paramete/36317803#36317803", "title": "How do I add elements to two different arrays inside of a loop based on parameters without using the STL?", "body": "<p>It is really not much different than in Java. Here is an example of input handling with a <code>switch</code> statement. You can try it as an <code>if</code> clause as exercise.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n   std::string line;\n   bool stop = false;\n   while (!stop &amp;&amp; getline(std::cin, line)) {\n      switch (line[0]) {\n         case 'C':\n            // add to first array\n            std::cout &lt;&lt; \"Case 'C': '\" &lt;&lt; line &lt;&lt; \"'\\n\";\n            break;\n\n         case 'A':\n            // add to second array\n            std::cout &lt;&lt; \"Case 'A': '\" &lt;&lt; line &lt;&lt; \"'\\n\";\n            break;\n\n         default:\n            stop = true;\n            break;\n      }\n   }\n}\n</code></pre>\n\n<p>I skipped the part with inserting in an array and you should think about what you are allowed or supposed to use. Since you are not allowed to use the STL you should look into your class notes and problem statement what you have learned about arrays (dynamic and static ones). </p>\n\n<p>Keep in mind, that you would not not use the STL in todays C++ applications.</p>\n"}, {"comments": [{"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 1, "creation_date": 1459365777, "post_id": 36317831, "comment_id": 60259120, "body": "push_back is a member function of std::vector, but the title of the question ends &quot;without using the STL&quot;."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1459365910, "post_id": 36317831, "comment_id": 60259207, "body": "@kfsone: it&#39;s using the <code>vector</code> from the C++ standard library, not from the STL (which is an entirely separate library, though it did form some of the basis for part of the design of some of the standard library)."}, {"owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "edited": false, "score": 0, "creation_date": 1459366172, "post_id": 36317831, "comment_id": 60259396, "body": "@JerryCoffin He is a widely hated professor at my school. Everyone in my class thinks hes a bafoon, and there was an uproar at the beginning of the semester when he said we couldn&#39;t use the STL. Honestly I don&#39;t even know how or how to not use the STL. Anything that isn&#39;t Java confuses the heck out of me."}, {"owner": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "edited": false, "score": 0, "creation_date": 1459366320, "post_id": 36317831, "comment_id": 60259499, "body": "According to <a href=\"https://en.wikipedia.org/wiki/Standard_Template_Library\" rel=\"nofollow noreferrer\">Wikipedia</a> the <code>std::vector</code> class <i>is</i> part of the STL. <code>iostream</code> is not."}, {"owner": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "reply_to_user": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "edited": false, "score": 0, "creation_date": 1459366378, "post_id": 36317831, "comment_id": 60259545, "body": "@ClaytonBrant if your class is about algorithms, it is only natural to ban the STL. Since all common algorithms are already implemented (well no graphs)."}, {"owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "edited": false, "score": 0, "creation_date": 1459366541, "post_id": 36317831, "comment_id": 60259663, "body": "He did say we could use string and vector."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "edited": false, "score": 0, "creation_date": 1459367531, "post_id": 36317831, "comment_id": 60260225, "body": "@Maikel: If you want to argue using the Appeal to Authority fallacy, it&#39;s best to at least start with a source that somebody <i>might</i> accept as authoritative."}, {"owner": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "edited": false, "score": 0, "creation_date": 1459367747, "post_id": 36317831, "comment_id": 60260344, "body": "@JerryCoffin Take it easy, I was just curious because I did not know for myself. Clayton clarified anyway and he is allowed to use <code>std::vector</code>. Since he is in an algorithm class I imagined he had to implement a dynamic array himself."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1459365840, "last_edit_date": 1459365840, "creation_date": 1459365636, "answer_id": 36317831, "question_id": 36317378, "link": "https://stackoverflow.com/questions/36317378/how-do-i-add-elements-to-two-different-arrays-inside-of-a-loop-based-on-paramete/36317831#36317831", "title": "How do I add elements to two different arrays inside of a loop based on parameters without using the STL?", "body": "<p>For the moment I'm going to assume that the C++ code you have in the question doesn't matter much, and you're primarily looking for a reasonable analog of the Java code you included. In that case, C++ code intended to look similar to your Java code might look something like this:</p>\n\n<pre><code>std::string input;\nstd::vector&lt;std::string&gt; cityArray;\nstd::vector&lt;std::string&gt; routeArray; \n\n// ...\n\nif (input.find('c') != std::string::npos) {\n    cityArray.push_back(input);\n}\nelse if (input.find('a') != std::string::npos) {\n     routeArray.push_back(input);\n}\n</code></pre>\n\n<p>If I were personally writing it in C++, I'd probably do something more like this though:</p>\n\n<pre><code>std::map&lt;char, std::vector&lt;std::string&gt;&gt; arrays;\n// ...\n\narrays[input[0]].push_back(input);\n</code></pre>\n\n<p>Another possibility (that eliminates using <code>vector</code>) would be to use an <code>std::multimap</code> instead:</p>\n\n<pre><code>std::multimap&lt;char, std::string&gt; arrays;\n\narrays.insert(std::make_pair(input[0], input));\n</code></pre>\n\n<p>As to not being allowed to use the standard library: knock your teacher over the head with a clue stick. Without using the standard library you can't read any input or produce any output (just for a couple of examples) so for any practical purpose, your code can't do anything at all. You might as well just write every program as <code>int main() {}</code> and be done with it, because that's equivalent to essentially anything you can do without the standard library.</p>\n"}], "owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 36317803, "answer_count": 2, "score": -5, "last_activity_date": 1459365840, "creation_date": 1459364130, "question_id": 36317378, "link": "https://stackoverflow.com/questions/36317378/how-do-i-add-elements-to-two-different-arrays-inside-of-a-loop-based-on-paramete", "title": "How do I add elements to two different arrays inside of a loop based on parameters without using the STL?", "body": "<p>I'm very new to C++, so please let me know if there is an easier way to accomplish what I'm trying to do.</p>\n\n<p>Basically I am checking for two different types of input commands on the command line. If the user enters a C followed by an integer(1 in this case) (I don't need error checking) its supposed to add \"C 1\" to my first array. If they type A 1 2 400 then it supposed to add that to a second array. </p>\n\n<p>In java I would simply type </p>\n\n<pre><code>if (input.contains(\"c\")){\ncityArray.add(input)\n\nelse if (input.contains (\"a\"){\nrouteArray.add(input)\n    } \n</code></pre>\n\n<p>or something along those lines.</p>\n\n<p>Here is what I have in C++</p>\n\n<pre><code>while(loopCheck == false )\n  {\n  cout &lt;&lt; \"Please Enter A Command:&gt; \"  &lt;&lt; endl;\n\n  cin &gt;&gt; Input;\n\n  if((cin &gt;&gt; c) ){\n\n  cout &lt;&lt; \"Citys: \" &lt;&lt; city[] &lt;&lt; endl;\n  }\n  if (cin == \" \"){\n      loopCheck = true;\n  }\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "eclipse", "opencv", "ide"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 3184014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a326c53525bab2f3849aefc533a6ef99?s=128&d=identicon&r=PG&f=1", "display_name": "fpoole", "link": "https://stackoverflow.com/users/3184014/fpoole"}, "is_accepted": false, "score": 0, "last_activity_date": 1459469150, "creation_date": 1459469150, "answer_id": 36345892, "question_id": 36317134, "link": "https://stackoverflow.com/questions/36317134/opencv2-opencv-hpp-no-such-file-or-directory-using-eclipse-ide/36345892#36345892", "title": "opencv2/opencv.hpp: No such file or directory using Eclipse IDE", "body": "<p>I'm not sure what operating system you are using or how you installed OpenCV but I faced the same problem when installing OpenCV 3.1.0 on Ubuntu 15.10. I was following <a href=\"http://embedonix.com/articles/image-processing/installing-opencv-3-1-0-on-ubuntu/\" rel=\"nofollow\">these</a> instructions.</p>\n\n<p>It turns out that after I ran <code>make</code> I forgot to run <code>make install</code> to actually install the compiled libraries.</p>\n\n<p>I'm not sure if this problem has anything to do with Eclipse.</p>\n"}], "owner": {"reputation": 1, "user_id": 6136357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98d31d0cc00758154a9f641be741e6b?s=128&d=identicon&r=PG&f=1", "display_name": "Csirke", "link": "https://stackoverflow.com/users/6136357/csirke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1252, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459469150, "creation_date": 1459363284, "last_edit_date": 1459369621, "question_id": 36317134, "link": "https://stackoverflow.com/questions/36317134/opencv2-opencv-hpp-no-such-file-or-directory-using-eclipse-ide", "title": "opencv2/opencv.hpp: No such file or directory using Eclipse IDE", "body": "<p>I'm trying to test <code>OpenCV (3.0.0)</code> with <code>Eclipse IDE</code> (Version: Mars Release (4.5.0)) but for some reason I fail to successfully include all the library path. </p>\n\n<p>Can you tell me how is it possible that the include directory is in the project explorer with the file <code>*opencv.hpp*</code> in it but still fails to find it during the build process? And how can I fix it? </p>\n\n<p><a href=\"https://i.stack.imgur.com/Vd7di.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vd7di.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "qt", "networking", "tcp"], "comments": [{"owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1459363828, "post_id": 36317026, "comment_id": 60257912, "body": "@KubaOber alright! I will work on that. I was stumped as I added return(s) when the program got errors, and after the connect function was exited, it still detected that there was a new connection."}, {"owner": {"reputation": 1493, "user_id": 5404527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36f63666d0ec2bcfdcbd0cb0d2a79b6c?s=128&d=identicon&r=PG&f=1", "display_name": "o9000", "link": "https://stackoverflow.com/users/5404527/o9000"}, "edited": false, "score": 1, "creation_date": 1459364618, "post_id": 36317026, "comment_id": 60258405, "body": "You need to use events instead of blocking calls (waitFor...). See <a href=\"https://www.ics.com/files/qtdocs/network-http.html\" rel=\"nofollow noreferrer\">ics.com/files/qtdocs/network-http.html</a> for an example."}, {"owner": {"reputation": 1493, "user_id": 5404527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36f63666d0ec2bcfdcbd0cb0d2a79b6c?s=128&d=identicon&r=PG&f=1", "display_name": "o9000", "link": "https://stackoverflow.com/users/5404527/o9000"}, "edited": false, "score": 1, "creation_date": 1459365151, "post_id": 36317026, "comment_id": 60258748, "body": "Indeed signals is what I meant :)"}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1459370850, "last_edit_date": 1495542693, "creation_date": 1459370850, "answer_id": 36319381, "question_id": 36317026, "link": "https://stackoverflow.com/questions/36317026/qt-qtcpserver-not-connecting-in-time/36319381#36319381", "title": "QT QTcpServer not connecting in time", "body": "<p>The source of your problem is, most likely, the pseudo-synchronous mess caused by <code>waitFor</code> methods. Get rid of them. Furthermore, you're not guaranteed anything about how many bytes you receive upon <code>readyRead</code>: it's perfectly normal to receive one byte at a time, in some circumstances, or really any number of bytes, including more bytes than you might expect. Your code must cope with that. </p>\n\n<p><a href=\"https://stackoverflow.com/a/22726559/1329652\">This</a> is one example of such approach - it does what you want, asynchronously.\n<a href=\"https://stackoverflow.com/a/32595398/1329652\">That</a> is another example that shows how to leverage state machines to write asynchronous communications code using an easy to read, declarative syntax. </p>\n"}], "owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 36319381, "answer_count": 1, "score": 1, "last_activity_date": 1459370850, "creation_date": 1459362989, "last_edit_date": 1459363423, "question_id": 36317026, "link": "https://stackoverflow.com/questions/36317026/qt-qtcpserver-not-connecting-in-time", "title": "QT QTcpServer not connecting in time", "body": "<p>I am making a simple program that will 'connect' to itself and then send data. It starts a QTcpServer then waits for any incoming connections. I have a separate function that will in turn attempt to connect to this server at the localhost and port I decided on. This works when I open Telnet in the command prompt, but now in my actual program. Here is the code that I used (Some are snippets from other sources)</p>\n\n<p>MainWindow.cpp:</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n    server = new QTcpServer(this);\n    //Initialize and start the server\n    connect(server, SIGNAL(newConnection()), this, SLOT(newConnection()));\n    if (!server-&gt;listen(QHostAddress::Any, 3665))\n    {\n        qDebug() &lt;&lt; \"Server failed to start!\";\n    }\n    else\n    {\n        qDebug() &lt;&lt; \"Server started\";\n    }\n    //Try to connect to the server\n    connectToServer(\"127.0.0.1\", qint16(3665));\n}\n\nMainWindow::~MainWindow()\n{\n    delete server;\n    delete ui;\n}\n\nvoid MainWindow::connectToServer(QString host, qint16 port)\n{\n    qDebug() &lt;&lt; \"Connecting to \" + host + \" at port \" + QString::number(port);\n    QTcpSocket socket;\n    socket.connectToHost(host, port);\n    if (!socket.waitForConnected(5000))\n    {\n        qDebug() &lt;&lt; socket.errorString();\n    }\n    while (socket.bytesAvailable() &lt; (int)sizeof(quint16))\n    {\n        if (!socket.waitForReadyRead(5000))\n        {\n            qDebug() &lt;&lt; socket.errorString();\n        }\n    }\n    quint16 blockSize;\n    QDataStream in(&amp;socket);\n    in.setVersion(QDataStream::Qt_5_5);\n    in &gt;&gt; blockSize;\n    while (socket.bytesAvailable() &lt; blockSize)\n    {\n        if (!socket.waitForReadyRead(5000))\n        {\n            qDebug() &lt;&lt; socket.errorString();\n        }\n    }\n    QString fortune;\n    in &gt;&gt; fortune;\n    qDebug() &lt;&lt; fortune;\n}\n\nvoid MainWindow::newConnection()\n{\n    qDebug() &lt;&lt; \"A connection has been found.\";\n    QTcpSocket *socket = server-&gt;nextPendingConnection();\n\n    socket-&gt;write(\"hello client\\r\\n\");\n    socket-&gt;flush();\n    socket-&gt;waitForBytesWritten(5000);\n    socket-&gt;close();\n}\n</code></pre>\n"}, {"tags": ["c++", "reference", "static", "destructor"], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459363447, "post_id": 36317116, "comment_id": 60257686, "body": "No, it is not. This is not a problem with static objects initialization ordering."}, {"owner": {"reputation": 168, "user_id": 4530832, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b154aa0721a0e9aa4ce9422c63baa810?s=128&d=identicon&r=PG&f=1", "display_name": "Otto von Bisquick", "link": "https://stackoverflow.com/users/4530832/otto-von-bisquick"}, "edited": false, "score": 0, "creation_date": 1459363583, "post_id": 36317116, "comment_id": 60257764, "body": "Hey nwp, I had figured it was something like that and I appreciate your answer. But besides filename, there is a reason I am using a reference to MathHelp::Log - it&#39;s very big data. This is only a class project, though, so I <i>could</i> change it to what you suggested, but I am interested if there is an alternative."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 168, "user_id": 4530832, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b154aa0721a0e9aa4ce9422c63baa810?s=128&d=identicon&r=PG&f=1", "display_name": "Otto von Bisquick", "link": "https://stackoverflow.com/users/4530832/otto-von-bisquick"}, "edited": false, "score": 0, "creation_date": 1459363677, "post_id": 36317116, "comment_id": 60257810, "body": "@OttovonBisquick Maybe you could make it a <code>shared_ptr</code>? Same safety effect without having to copy all the data."}, {"owner": {"reputation": 168, "user_id": 4530832, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b154aa0721a0e9aa4ce9422c63baa810?s=128&d=identicon&r=PG&f=1", "display_name": "Otto von Bisquick", "link": "https://stackoverflow.com/users/4530832/otto-von-bisquick"}, "edited": false, "score": 0, "creation_date": 1459364380, "post_id": 36317116, "comment_id": 60258253, "body": "I have just tried this, however the result is the same."}], "tags": [], "owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "is_accepted": false, "score": -1, "last_activity_date": 1459363233, "creation_date": 1459363233, "answer_id": 36317116, "question_id": 36317010, "link": "https://stackoverflow.com/questions/36317010/referencing-non-static-variables-from-a-static-variable-makes-non-static-variabl/36317116#36317116", "title": "Referencing non-static variables from a static variable makes non-static variables destruct before static variable", "body": "<p>This is called the <a href=\"https://isocpp.org/wiki/faq/ctors#static-init-order\" rel=\"nofollow\">static initialization order fiasco</a> (which applies equally to destructors). It was always a problem, you just happened to get lucky earlier.</p>\n\n<p>An easy way to fix that in your case is to change <code>const char* filename;</code> into <code>std::string &amp;filename;</code> and <code>MathHelper::Log&amp; message;</code> to <code>MathHelper::Log message;</code>. That way the memory will still be around by the time the destructor gets called.</p>\n"}, {"comments": [{"owner": {"reputation": 168, "user_id": 4530832, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b154aa0721a0e9aa4ce9422c63baa810?s=128&d=identicon&r=PG&f=1", "display_name": "Otto von Bisquick", "link": "https://stackoverflow.com/users/4530832/otto-von-bisquick"}, "edited": false, "score": 0, "creation_date": 1459363749, "post_id": 36317208, "comment_id": 60257857, "body": "Hey Sergey, I can understand how that would be a problem, but I have a few questions. 1 - I had it working before which led me to believe it wasn&#39;t that problem. 2 - How would I fix the problem without making the reference to a static variable?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 168, "user_id": 4530832, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b154aa0721a0e9aa4ce9422c63baa810?s=128&d=identicon&r=PG&f=1", "display_name": "Otto von Bisquick", "link": "https://stackoverflow.com/users/4530832/otto-von-bisquick"}, "edited": false, "score": 0, "creation_date": 1459364152, "post_id": 36317208, "comment_id": 60258103, "body": "@OttovonBisquick, this is often the case when you are in undefinied behavior land. It <i>works</i> due to memory layout, optimized code and other factors, and than suddenly breaks because of seemingly unrelated change. I am not sure what are you trying to do, so I am not sure about the best fix - but like I said, I can&#39;t see why your <code>write</code> needs to be static."}, {"owner": {"reputation": 168, "user_id": 4530832, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b154aa0721a0e9aa4ce9422c63baa810?s=128&d=identicon&r=PG&f=1", "display_name": "Otto von Bisquick", "link": "https://stackoverflow.com/users/4530832/otto-von-bisquick"}, "edited": false, "score": 0, "creation_date": 1459364588, "post_id": 36317208, "comment_id": 60258384, "body": "Sergey - yes, you are correct. I had gotten the idea from stackoverflow to make the variable static, but it makes more sense not to. Thank you!"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 3, "last_activity_date": 1459364511, "last_edit_date": 1459364511, "creation_date": 1459363543, "answer_id": 36317208, "question_id": 36317010, "link": "https://stackoverflow.com/questions/36317010/referencing-non-static-variables-from-a-static-variable-makes-non-static-variabl/36317208#36317208", "title": "Referencing non-static variables from a static variable makes non-static variables destruct before static variable", "body": "<p>The reason why you have a problem is following:</p>\n\n<p><code>MathHelper::Log log</code> is going to be destructed <strong>before</strong> your main returns, but destructor of <code>WriteOnShutdown</code> will be called <strong>after</strong> main returns.</p>\n\n<p>Since <code>WriteOnShutdown</code> uses the reference to <code>log</code> in the destructor, you are accessing a 'dangling' reference, invoking undefined behavior and thus is seeing the problem. </p>\n\n<p>And you have exactly the same problem with <code>filename</code> as well. </p>\n\n<p>Obvious fix is to change <code>write</code> (which, by the way, is a terrible name for an object for several reasons) from being static to automatic variable.</p>\n"}], "owner": {"reputation": 168, "user_id": 4530832, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b154aa0721a0e9aa4ce9422c63baa810?s=128&d=identicon&r=PG&f=1", "display_name": "Otto von Bisquick", "link": "https://stackoverflow.com/users/4530832/otto-von-bisquick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 36317208, "answer_count": 2, "score": 0, "last_activity_date": 1459364511, "creation_date": 1459362944, "last_edit_date": 1459363387, "question_id": 36317010, "link": "https://stackoverflow.com/questions/36317010/referencing-non-static-variables-from-a-static-variable-makes-non-static-variabl", "title": "Referencing non-static variables from a static variable makes non-static variables destruct before static variable", "body": "<p>Simply put: I want to write to a file whenever my program exits, so I have an object that accepts a filename (char*) and a reference to a Google Protobuf Message (for these purposes, you can just pretend that it's a string&amp;) in the constructor and then writes the message to the filename in the destructor. Then, in main(), I initialise one of these objects and declare it as static (so it will destruct when the program exits for any reason).</p>\n\n<p>My code had been working perfectly for several revisions before I changed something (seemingly) unrelated, and now it doesn't work. Now, when the object destructs, the char* and reference both point to unintialised versions of char and Message. I have the related code below:</p>\n\n<pre><code>using namespace std;\n\nclass WriteOnShutdown {\n    private:\n        const char* filename;\n    public:\n        MathHelper::Log&amp; message;\n\n        WriteOnShutdown(char* a, MathHelper::Log&amp; b) : filename(a), message(b) {}\n        ~WriteOnShutdown() {\n            cout &lt;&lt; \"debug\\n\";\n            //*filename is -52 (unitialised char)\n            //READ ACCESS VIOLATION - message is still valid, but message.DebugString tries to call a pointer which hasn't been initialised yet\n            cout &lt;&lt; message.DebugString() &lt;&lt; endl; \n        }\n};\n\nint main() {\n    char filename[100];\n    MathHelper::Log log;\n\n    //Initialise filename and log\n\n    static WriteOnShutdown write(filename, log);\n\n    //Do program stuff here\n\n    //Then, at the end of main(), printing write.message.DebugString() works like a charm\n    cout &lt;&lt; endl &lt;&lt; write.message.DebugString();\n    _getch();\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1459363079, "post_id": 36316989, "comment_id": 60257464, "body": "Add your actual input too please."}, {"owner": {"reputation": 3, "user_id": 6136220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b171488eddc97d299c4e3cac484bdc?s=128&d=identicon&r=PG&f=1", "display_name": "18-1-6-1-20", "link": "https://stackoverflow.com/users/6136220/18-1-6-1-20"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1459363221, "post_id": 36316989, "comment_id": 60257544, "body": "For example: for 2010 as birth year it gives me 6.2519e+10 as a result."}, {"owner": {"reputation": 56338, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 4, "creation_date": 1459363269, "post_id": 36316989, "comment_id": 60257577, "body": "<code>31104000</code> seconds is <code>360</code> days, <code>259200</code> is <code>3</code> days, <code>8640</code> is <code>144</code> minutes. I&#39;m wondering what calendar do you use..."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 2, "creation_date": 1459363282, "post_id": 36316989, "comment_id": 60257584, "body": "Is the question how do you read big numbers in scientific notation?"}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 1, "creation_date": 1459363305, "post_id": 36316989, "comment_id": 60257599, "body": "And what do you expect 2010 * 31104000 to yield ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1459363356, "post_id": 36316989, "comment_id": 60257630, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 56338, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 1, "creation_date": 1459363634, "post_id": 36316989, "comment_id": 60257787, "body": "Learning how to use a debugger is a useful advice, indeed. However, in this particular case, the problem is in the constants used in the code. Use <code>365*24*60*60</code> as the number of seconds in a year, <code>30*24*60*60</code> as the number of seconds in a month, <code>24*60*60</code> as the number of seconds in a day. Don&#39;t compute the values, let the compiler do it. It will perform the multiplications and put the correct values instead. Hopefully this is just an exercise and these approximations are good enough. But if you need to do exact calculations with dates and times, the standard library provides better ways."}, {"owner": {"reputation": 3, "user_id": 6136220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b171488eddc97d299c4e3cac484bdc?s=128&d=identicon&r=PG&f=1", "display_name": "18-1-6-1-20", "link": "https://stackoverflow.com/users/6136220/18-1-6-1-20"}, "edited": false, "score": 0, "creation_date": 1459363646, "post_id": 36316989, "comment_id": 60257796, "body": "Thank you for answers, it looks like i need to check everything again from beginning."}, {"owner": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 0, "creation_date": 1459363976, "post_id": 36316989, "comment_id": 60257989, "body": "You might also want to think about how to combine all your input functions into one single function since they all do the exact same thing (read an int) except for the prompt.  So if you pass the prompt to a generic function with the prototype <code>int prompt_for_int(const string &amp;prompt_string)</code>, you could use one function to read all the inputs."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1459364007, "post_id": 36316989, "comment_id": 60258014, "body": "What happened to those leap years?"}], "answers": [{"tags": [], "owner": {"reputation": 710, "user_id": 347889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc0d4247b2318bdcd51417e2383952a?s=128&d=identicon&r=PG", "display_name": "Lauro Moura", "link": "https://stackoverflow.com/users/347889/lauro-moura"}, "is_accepted": true, "score": 0, "last_activity_date": 1459364266, "last_edit_date": 1495541272, "creation_date": 1459364266, "answer_id": 36317416, "question_id": 36316989, "link": "https://stackoverflow.com/questions/36316989/calculate-age-in-seconds-strange-result/36317416#36317416", "title": "Calculate age in seconds - strange result", "body": "<p>Like Kenny Ostrom commented, the shown values may look strange due to the scientific notation used by cout. To show all digits, you can change cout's precision using <code>cout.precision(your_precision_here)</code>. See question below.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/554063/how-do-i-print-a-double-value-with-full-precision-using-cout\">How do I print a double value with full precision using cout?</a> </p>\n"}, {"tags": [], "owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "is_accepted": false, "score": 0, "last_activity_date": 1459366784, "creation_date": 1459366784, "answer_id": 36318195, "question_id": 36316989, "link": "https://stackoverflow.com/questions/36316989/calculate-age-in-seconds-strange-result/36318195#36318195", "title": "Calculate age in seconds - strange result", "body": "<p>First, the numeric format you are confused by is \"scientific notation\". That will be enough info to open up a world of google searches, or you can just force it not to print in scientific notation.</p>\n\n<p>Second, you <em>really</em> want to use a time library for any calendar stuff.  It will handle all kinds of calendar weirdness for you, including leap years. Fortunately we have time.h</p>\n\n<p>Third, I recommend using an integer type for seconds, partly to avoid rounding errors and ugly decimals, but mainly because that's what time.h uses. Just make sure it is big enough. My compiler uses a 64 bit integer for time_t, so I used that:</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;memory&gt;\n\ntime_t get_age_in_seconds(int year, int month, int day)\n{\n    struct tm birthday;\n    memset(&amp;birthday, 0, sizeof(birthday));\n    birthday.tm_year = year - 1900;      // years since 1900\n    birthday.tm_mon = month - 1;         // months since January (0,11)\n    birthday.tm_mday = day;              // day of the month (1,31)\n\n    time_t birthday_in_seconds = mktime(&amp;birthday);\n    time_t now = time(NULL);\n    return now - birthday_in_seconds;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1459368497, "creation_date": 1459368497, "answer_id": 36318717, "question_id": 36316989, "link": "https://stackoverflow.com/questions/36316989/calculate-age-in-seconds-strange-result/36318717#36318717", "title": "Calculate age in seconds - strange result", "body": "<p>Don't use doubles to do the calculation. You're not going to have any fractional values since you're not doing any division.</p>\n\n<p>More importantly, look into <a href=\"http://www.cplusplus.com/reference/ctime/mktime/\" rel=\"nofollow\"><code>mktime()</code></a>, <a href=\"http://www.cplusplus.com/reference/ctime/time/\" rel=\"nofollow\"><code>time()</code></a>, and <a href=\"http://www.cplusplus.com/reference/ctime/difftime/\" rel=\"nofollow\"><code>difftime()</code></a>. You should be using these to do your calculation.</p>\n"}], "owner": {"reputation": 3, "user_id": 6136220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b171488eddc97d299c4e3cac484bdc?s=128&d=identicon&r=PG&f=1", "display_name": "18-1-6-1-20", "link": "https://stackoverflow.com/users/6136220/18-1-6-1-20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 36317416, "answer_count": 3, "score": 0, "last_activity_date": 1459368497, "creation_date": 1459362906, "last_edit_date": 1459363792, "question_id": 36316989, "link": "https://stackoverflow.com/questions/36316989/calculate-age-in-seconds-strange-result", "title": "Calculate age in seconds - strange result", "body": "<p>I'm new in programming and new in here.\nSorry for stupid question but i have problem with result in my \"calculate your age in seconds\" code. It gives me weird result like 6.17725e+10 or -6.17414e+10.\nProgram isn't finished yet but everything except results looks fine (i don't get any error.\nSorry again and I hope for your understanding:)</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n\n\nvoid title()\n{\n    cout &lt;&lt; \"Age Calculator\" &lt;&lt; endl &lt;&lt; endl;\n\n}\n\nint byear()\n{\n    cout &lt;&lt; \"Enter your birth year: \";\n    int by;\n    cin &gt;&gt; by;\n    return by;\n}\n\nint bmonth()\n{\n    cout &lt;&lt; \"Enter your birth month: \";\n    int bm;\n    cin &gt;&gt; bm;\n    return bm;\n}\n\nint bday()\n{\n    cout &lt;&lt; \"Enter your birth day: \";\n    int bd;\n    cin &gt;&gt; bd;\n    return bd;\n}\n\nint cyear()\n{\n    int cy;\n    cout &lt;&lt; \"Enter current year \";\n    cin &gt;&gt; cy;\n    return cy;\n}\n\nint cmonth()\n{\n    cout &lt;&lt; \"Enter current month: \";\n    int cm;\n    cin &gt;&gt; cm;\n    return cm;\n\n}\n\nint cday()\n{\n    cout &lt;&lt; \"Enter current day: \";\n    int cd;\n    cin &gt;&gt; cd;\n    return cd;\n}\n\nvoid calculate(int by, int bm, int bd, int cy)\n{\n    double y = 31104000;\n    long double cby = y * by;\n    long double cbm = 259200 * bm;\n    long double cbd = 8640 * bd;\n    long double ccy = 31104000 * cy;\n\n    cout &lt;&lt; endl &lt;&lt; cby &lt;&lt; endl;\n    cout &lt;&lt; endl &lt;&lt; ccy &lt;&lt; endl;\n    cout &lt;&lt; endl &lt;&lt; ccy - cby &lt;&lt; endl;\n}\n\nint main()\n{\n    title();\n\n    int by = byear();\n    int bm = bmonth();\n    int bd = bday();\n    int cy = cyear();\n    int cm = cmonth();\n    int cd = cday();\n    calculate(by, bm, bd, cy);\n    cin.get();\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "memory-management", "heap", "stdmap"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 5873037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cb45d24592cd6a2411ac6773dfa93fba?s=128&d=identicon&r=PG&f=1", "display_name": "Johnnie W", "link": "https://stackoverflow.com/users/5873037/johnnie-w"}, "edited": false, "score": 0, "creation_date": 1459367547, "post_id": 36316922, "comment_id": 60260233, "body": "Nobody mentioned that here <a href=\"http://stackoverflow.com/questions/19970531/properly-destroying-pointers-in-an-stdmap\" title=\"properly destroying pointers in an stdmap\">stackoverflow.com/questions/19970531/&hellip;</a>  Anyway, perfect, thanks! I have just one more question. Following your first method I ran onto one memory leak, what actually didnt happen following the method with (order_.clear()). Do you happen to have any idea why?  This is the error msg <a href=\"http://pastebin.com/8YAM2TuK\" rel=\"nofollow noreferrer\">pastebin.com/8YAM2TuK</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "reply_to_user": {"reputation": 107, "user_id": 5873037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cb45d24592cd6a2411ac6773dfa93fba?s=128&d=identicon&r=PG&f=1", "display_name": "Johnnie W", "link": "https://stackoverflow.com/users/5873037/johnnie-w"}, "edited": false, "score": 0, "creation_date": 1459368482, "post_id": 36316922, "comment_id": 60260763, "body": "@JohnnieW No, it&#39;s up to you to debug."}, {"owner": {"reputation": 107, "user_id": 5873037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cb45d24592cd6a2411ac6773dfa93fba?s=128&d=identicon&r=PG&f=1", "display_name": "Johnnie W", "link": "https://stackoverflow.com/users/5873037/johnnie-w"}, "edited": false, "score": 0, "creation_date": 1459369617, "post_id": 36316922, "comment_id": 60261404, "body": "You just showed me 2 ways to accomplish the same thing, why would it make difference then O.o Doesn&#39;t make sense at all"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": true, "score": 1, "last_activity_date": 1459363123, "last_edit_date": 1459363123, "creation_date": 1459362743, "answer_id": 36316922, "question_id": 36316874, "link": "https://stackoverflow.com/questions/36316874/valgrind-errorinvalid-read-operator-deletevoid-when-freeing-objects-from-ma/36316922#36316922", "title": "Valgrind error(invalid read) operator delete(void*) when freeing objects from map", "body": "<p>Whenever you iterate over a map and erase the element the iterator is pointing to, you have to continue the loop with the iterator returned by erase:</p>\n\n<pre><code>std::map&lt;std::string, Order*&gt;::iterator order_itr = order_.begin();\nwhile(ord_itr != order_.end())\n{\n  delete ord_itr-&gt;second;\n  ord_itr = order_.erase(ord_itr);\n}\n</code></pre>\n\n<p>But this might be more transparent:</p>\n\n<pre><code>std::map&lt;std::string, Order*&gt;::iterator order_itr;\nfor(ord_itr = order_.begin(); ord_itr != order_.end(); ord_itr++)\n  delete ord_itr-&gt;second;\norder_.clear();\n</code></pre>\n\n<p>Or with a range based for (C++11):</p>\n\n<pre><code>for(const auto&amp; key_value : order_)\n  delete key_value.second;\norder_.clear();\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 5873037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cb45d24592cd6a2411ac6773dfa93fba?s=128&d=identicon&r=PG&f=1", "display_name": "Johnnie W", "link": "https://stackoverflow.com/users/5873037/johnnie-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 733, "favorite_count": 0, "accepted_answer_id": 36316922, "answer_count": 1, "score": 0, "last_activity_date": 1459363123, "creation_date": 1459362594, "question_id": 36316874, "link": "https://stackoverflow.com/questions/36316874/valgrind-errorinvalid-read-operator-deletevoid-when-freeing-objects-from-ma", "title": "Valgrind error(invalid read) operator delete(void*) when freeing objects from map", "body": "<p>Unfortunately I'm facing this problem inside one of my classes</p>\n\n<pre><code>==4442== Invalid read of size 4\n==4442==    at 0x806EC34: std::_Rb_tree_increment(std::_Rb_tree_node_base*) (in /home/blabla/projects/test proj)\n==4442==    by 0x804C634: std::_Rb_tree_iterator&lt;std::pair&lt;std::string const, Order*&gt; &gt;::operator++(int) (stl_tree.h:197)\n==4442==    by 0x804B98C: Play::~Play() (Play.cpp:46)\n==4442==    by 0x80501AF: main (main.cpp:121)\n==4442==  Address 0x421c5c4 is 12 bytes inside a block of size 24 free'd\n==4442==    at 0x402B3D8: free (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)\n==4442==    by 0x8050D4E: operator delete(void*) (in /home/blabla/projects/test proj)\n==4442==    by 0x804E1E6: __gnu_cxx::new_allocator&lt;std::_Rb_tree_node&lt;std::pair&lt;std::string const, Order*&gt; &gt; &gt;::deallocate(std::_Rb_tree_node&lt;std::pair&lt;std::string const, Order*&gt; &gt;*, unsigned int) (new_allocator.h:110)\n==4442==    by 0x804DC59: std::_Rb_tree&lt;std::string, std::pair&lt;std::string const, Order*&gt;, std::_Select1st&lt;std::pair&lt;std::string const, Order*&gt; &gt;, std::less&lt;std::string&gt;, std::allocator&lt;std::pair&lt;std::string const, Order*&gt; &gt; &gt;::_M_put_node(std::_Rb_tree_node&lt;std::pair&lt;std::string const, Order*&gt; &gt;*) (stl_tree.h:374)\n==4442==    by 0x804D2D7: std::_Rb_tree&lt;std::string, std::pair&lt;std::string const, Order*&gt;, std::_Select1st&lt;std::pair&lt;std::string const, Order*&gt; &gt;, std::less&lt;std::string&gt;, std::allocator&lt;std::pair&lt;std::string const, Order*&gt; &gt; &gt;::_M_destroy_node(std::_Rb_tree_node&lt;std::pair&lt;std::string const, Order*&gt; &gt;*) (stl_tree.h:422)\n==4442==    by 0x804D3BB: std::_Rb_tree&lt;std::string, std::pair&lt;std::string const, Order*&gt;, std::_Select1st&lt;std::pair&lt;std::string const, Order*&gt; &gt;, std::less&lt;std::string&gt;, std::allocator&lt;std::pair&lt;std::string const, Order*&gt; &gt; &gt;::_M_erase_aux(std::_Rb_tree_const_iterator&lt;std::pair&lt;std::string const, Order*&gt; &gt;) (stl_tree.h:1746)\n==4442==    by 0x804CB9A: std::_Rb_tree&lt;std::string, std::pair&lt;std::string const, Order*&gt;, std::_Select1st&lt;std::pair&lt;std::string const, Order*&gt; &gt;, std::less&lt;std::string&gt;, std::allocator&lt;std::pair&lt;std::string const, Order*&gt; &gt; &gt;::erase[abi:cxx11](std::_Rb_tree_iterator&lt;std::pair&lt;std::string const, Order*&gt; &gt;) (stl_tree.h:820)\n==4442==    by 0x804C678: std::map&lt;std::string, Order*, std::less&lt;std::string&gt;, std::allocator&lt;std::pair&lt;std::string const, Order*&gt; &gt; &gt;::erase[abi:cxx11](std::_Rb_tree_iterator&lt;std::pair&lt;std::string const, Order*&gt; &gt;) (stl_map.h:697)\n==4442==    by 0x804B96F: Play::~Play() (Play.cpp:50)\n==4442==    by 0x80501AF: main (main.cpp:121)\n==4442== \n==4442== Invalid read of size 4\n==4442==    at 0x806EC4B: std::_Rb_tree_increment(std::_Rb_tree_node_base*) (in /home/blabla/projects/test proj)\n==4442==    by 0x804C634: std::_Rb_tree_iterator&lt;std::pair&lt;std::string const, Order*&gt; &gt;::operator++(int) (stl_tree.h:197)\n==4442==    by 0x804B98C: Play::~Play() (Play.cpp:46)\n==4442==    by 0x80501AF: main (main.cpp:121)\n==4442==  Address 0x421c5bc is 4 bytes inside a block of size 24 free'd\n==4442==    at 0x402B3D8: free (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)\n==4442==    by 0x8050D4E: operator delete(void*) (in /home/blabla/projects/test proj)\n==4442==    by 0x804E1E6: __gnu_cxx::new_allocator&lt;std::_Rb_tree_node&lt;std::pair&lt;std::string const, Order*&gt; &gt; &gt;::deallocate(std::_Rb_tree_node&lt;std::pair&lt;std::string const, Order*&gt; &gt;*, unsigned int) (new_allocator.h:110)\n==4442==    by 0x804DC59: std::_Rb_tree&lt;std::string, std::pair&lt;std::string const, Order*&gt;, std::_Select1st&lt;std::pair&lt;std::string const, Order*&gt; &gt;, std::less&lt;std::string&gt;, std::allocator&lt;std::pair&lt;std::string const, Order*&gt; &gt; &gt;::_M_put_node(std::_Rb_tree_node&lt;std::pair&lt;std::string const, Order*&gt; &gt;*) (stl_tree.h:374)\n==4442==    by 0x804D2D7: std::_Rb_tree&lt;std::string, std::pair&lt;std::string const, Order*&gt;, std::_Select1st&lt;std::pair&lt;std::string const, Order*&gt; &gt;, std::less&lt;std::string&gt;, std::allocator&lt;std::pair&lt;std::string const, Order*&gt; &gt; &gt;::_M_destroy_node(std::_Rb_tree_node&lt;std::pair&lt;std::string const, Order*&gt; &gt;*) (stl_tree.h:422)\n==4442==    by 0x804D3BB: std::_Rb_tree&lt;std::string, std::pair&lt;std::string const, Order*&gt;, std::_Select1st&lt;std::pair&lt;std::string const, Order*&gt; &gt;, std::less&lt;std::string&gt;, std::allocator&lt;std::pair&lt;std::string const, Order*&gt; &gt; &gt;::_M_erase_aux(std::_Rb_tree_const_iterator&lt;std::pair&lt;std::string const, Order*&gt; &gt;) (stl_tree.h:1746)\n==4442==    by 0x804CB9A: std::_Rb_tree&lt;std::string, std::pair&lt;std::string const, Order*&gt;, std::_Select1st&lt;std::pair&lt;std::string const, Order*&gt; &gt;, std::less&lt;std::string&gt;, std::allocator&lt;std::pair&lt;std::string const, Order*&gt; &gt; &gt;::erase[abi:cxx11](std::_Rb_tree_iterator&lt;std::pair&lt;std::string const, Order*&gt; &gt;) (stl_tree.h:820)\n==4442==    by 0x804C678: std::map&lt;std::string, Order*, std::less&lt;std::string&gt;, std::allocator&lt;std::pair&lt;std::string const, Order*&gt; &gt; &gt;::erase[abi:cxx11](std::_Rb_tree_iterator&lt;std::pair&lt;std::string const, Order*&gt; &gt;) (stl_map.h:697)\n==4442==    by 0x804B96F: Play::~Play() (Play.cpp:50)\n==4442==    by 0x80501AF: main (main.cpp:121)\n==4442== \n==4442== \n==4442== HEAP SUMMARY:\n==4442==     in use at exit: 0 bytes in 0 blocks\n==4442==   total heap usage: 34 allocs, 34 frees, 580 bytes allocated\n==4442== \n==4442== All heap blocks were freed -- no leaks are possible\n==4442== \n==4442== For counts of detected and suppressed errors, rerun with: -v\n==4442== ERROR SUMMARY: 11 errors from 2 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>And the place where I'm facing this problem is when freeing the allocated memory in Destructor </p>\n\n<pre><code>std::map&lt;std::string, Order*&gt;::iterator order_itr;\nfor(ord_itr = order_.begin(); ord_itr != order_.end(); ord_itr++)\n{\n  //if(ord_itr-&gt;second != nullptr)\n    delete ord_itr-&gt;second;\n  order_.erase(ord_itr);\n}\n</code></pre>\n\n<p>From the above iterator you can see with what kind of std::map I'm dealing with. As you can see I even tried to check if it's a null pointer not to free it(what makes no sense, because all of them should get allocated)</p>\n\n<p>And for the end, this is my Constructor where I allocate the memory</p>\n\n<pre><code>order_[\"test1\"] = new Test1Order();\norder_[\"test2\"] = new Test2Order();\norder_[\"test3\"] = new Test3Order();\norder_[\"test4\"] = new Test4Order();\norder_[\"test5\"] = new Test5Order();\norder_[\"test6\"] = new Test6Order();\norder_[\"test7\"] = new Test7Order();\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["javascript", "c++", "json", "duktape"], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 2318547, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/59f6120065710f6867bd09ea38e679d9?s=128&d=identicon&r=PG", "display_name": "Vlad Sviatetskyi", "link": "https://stackoverflow.com/users/2318547/vlad-sviatetskyi"}, "is_accepted": false, "score": 1, "last_activity_date": 1459416735, "creation_date": 1459416735, "answer_id": 36329482, "question_id": 36316560, "link": "https://stackoverflow.com/questions/36316560/gettings-json-properties-duktape/36329482#36329482", "title": "Gettings json properties duktape", "body": "<p>Resolved this by integrating one-header library JSON parser. Seems pretty cool.</p>\n\n<p><a href=\"https://github.com/nlohmann/json\" rel=\"nofollow\">https://github.com/nlohmann/json</a></p>\n"}], "owner": {"reputation": 103, "user_id": 2318547, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/59f6120065710f6867bd09ea38e679d9?s=128&d=identicon&r=PG", "display_name": "Vlad Sviatetskyi", "link": "https://stackoverflow.com/users/2318547/vlad-sviatetskyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459416735, "creation_date": 1459361621, "question_id": 36316560, "link": "https://stackoverflow.com/questions/36316560/gettings-json-properties-duktape", "title": "Gettings json properties duktape", "body": "<p>everybody interested in a duktape framework. How could one integrate json properties with cpp code?</p>\n\n<p>Assume we got following json:</p>\n\n<pre><code>{\n    \"name\" : \"duktape\",\n    \"surname\" : \"duktapovich\",\n    \"values\" : [1,10]\n}\n</code></pre>\n\n<p>If one would like to get corresponding value to \"name\" key, how could he achieve that?</p>\n"}, {"tags": ["c++", "sockets", "client-server", "recv"], "comments": [{"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1459361732, "post_id": 36316551, "comment_id": 60256500, "body": "The only way to be certain your client is still there is to implement a request-response protocol between server and client that includes an &quot;are you there&quot; request which must be responded to. Other methods are less accurate in their results."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1459361792, "post_id": 36316551, "comment_id": 60256533, "body": "@mah That is certainly a way but it&#39;s not the only way."}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1459361844, "post_id": 36316551, "comment_id": 60256565, "body": "@EJP are there other ways which are not subject to misreporting?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1459362592, "post_id": 36316551, "comment_id": 60257105, "body": "@mah One could use an underlying <i>heartbeat protocol</i> (was it <code>KEEPALIVE</code>?)."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1459363556, "post_id": 36316551, "comment_id": 60257747, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: TCP keepalives, via <code>setsockopt(SOL_SOCKET, SO_KEEPALIVE)</code>, or <code>WSAIoCtrl(SIO_KEEPALIVE_VALS)</code> on Windows 2000+."}, {"owner": {"reputation": 3, "user_id": 5947584, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/26cac29428a61772f96ab27e7884e264?s=128&d=identicon&r=PG&f=1", "display_name": "P.Dowsen", "link": "https://stackoverflow.com/users/5947584/p-dowsen"}, "edited": false, "score": 0, "creation_date": 1459363996, "post_id": 36316551, "comment_id": 60258004, "body": "I thought about that solution but what if the client&#39;s internet falls, the client can not send me a message of disconnecting"}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1459364985, "post_id": 36316551, "comment_id": 60258650, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 that should tell the protocol stack to not drop the connection due to a timeout but does it give you a way to know the client is still there, or just that the client was there within the heartbeat period? I&#39;m not being rhetorical, I don&#39;t know the answer. (Intuitively it would seem the answer is the latter, but if that period is or can be set to be small enough they might be effectively equal.)"}, {"owner": {"reputation": 3111, "user_id": 479941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebad9df474aa1949c09ef5136e55fd33?s=128&d=identicon&r=PG", "display_name": "Mark Nunberg", "link": "https://stackoverflow.com/users/479941/mark-nunberg"}, "edited": false, "score": 0, "creation_date": 1459379795, "post_id": 36316551, "comment_id": 60266030, "body": "You should also check the error message. Not every type of <code>recv</code> failure indicates the client is disconnected"}], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1459362617, "creation_date": 1459362617, "answer_id": 36316886, "question_id": 36316551, "link": "https://stackoverflow.com/questions/36316551/how-to-check-if-a-client-is-still-connected-c/36316886#36316886", "title": "How to Check if a Client is Still Connected c++", "body": "<p>It's important to remember where TCP/IP came from.</p>\n\n<p>It's a communications protocol stack that's designed to withstand an all-out nuclear war.</p>\n\n<p>That means, telegraph poles being vapourised, radio links intermittent or no longer there, telephone exchanges no longer being there... and it still had to work.</p>\n\n<p>In this context, define \"connected\".</p>\n\n<p>A TCP \"connection\" is merely two distinct hosts believing that they're connected, and somehow packets are routed to the hosts eventually by the remaining routers on the network.</p>\n\n<p>This is why there is a whole host of protocols we never even think about, for example RIP (Routing Information Protocol) who's job is to discover the remaining links after the bombardment.</p>\n\n<p>There is really no such thing as \"connected\". There is simply the time elapsed since you received a packet from the remote host. That's it.</p>\n"}], "owner": {"reputation": 3, "user_id": 5947584, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/26cac29428a61772f96ab27e7884e264?s=128&d=identicon&r=PG&f=1", "display_name": "P.Dowsen", "link": "https://stackoverflow.com/users/5947584/p-dowsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1561, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459362617, "creation_date": 1459361597, "question_id": 36316551, "link": "https://stackoverflow.com/questions/36316551/how-to-check-if-a-client-is-still-connected-c", "title": "How to Check if a Client is Still Connected c++", "body": "<p>I want to check using sockets whether a client is still connected to the server. I saw that the revc function gives me the status of the client but it is not working as I expect (sometines client did not disconnect and the revc function thought he was). \nI got this code:</p>\n\n<pre><code>if (recv(client-&gt;getSocket(), rcmsg, 1024, 0) &lt;= 0)\n    {\n        bool found = false;\n        for (i = 0; i &lt; this-&gt;clients.size(); i++)\n        {\n            if (*(this-&gt;clients[i]) == *client)\n            {\n                found = true;\n                break;\n            }\n        }\n        if (found)\n            this-&gt;clients.erase(this-&gt;clients.begin() + i);\n        closesocket(client-&gt;getSocket());\n        std::cout &lt;&lt; \"disconected: socket = \" &lt;&lt; client-&gt;getSocket() &lt;&lt; \", ip = \" &lt;&lt; inet_ntoa(addr.sin_addr) &lt;&lt; endl;\n</code></pre>\n\n<p>There is another solution?\nThanks in advance.</p>\n"}, {"tags": ["c++", "linker", "loader", "mex", "elf"], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 744029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HuY9q.jpg?s=128&g=1", "display_name": "David KWH", "link": "https://stackoverflow.com/users/744029/david-kwh"}, "edited": false, "score": 0, "creation_date": 1459446869, "post_id": 36322558, "comment_id": 60302705, "body": "Thanks @EmployedRussian, I dug a bit more on the dynamic symbol table, it seems that the global symbols are only exported to the dynamic symbol table when -rdynamic is specified.  It appears normally they are not exported so the dynamic module cannot access those from the executable.   Is this correct?"}, {"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "reply_to_user": {"reputation": 137, "user_id": 744029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HuY9q.jpg?s=128&g=1", "display_name": "David KWH", "link": "https://stackoverflow.com/users/744029/david-kwh"}, "edited": false, "score": 0, "creation_date": 1459448404, "post_id": 36322558, "comment_id": 60303627, "body": "@DKWH There are 3 ways (that I know of) for a symbol to be exported from a.out: (1) you link with <code>-rdynamic</code> (or <code>-E</code>, or <code>--export-dynamic</code>) or (2) you directly link with <code>foo.so</code>   that uses the symbol or (3) you export the symbol in a linker version script."}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 2, "last_activity_date": 1459387088, "creation_date": 1459387088, "answer_id": 36322558, "question_id": 36316510, "link": "https://stackoverflow.com/questions/36316510/how-does-a-loader-allocate-deallocate-static-data-from-a-dynamic-module/36322558#36322558", "title": "How does a loader allocate/deallocate static data from a dynamic module", "body": "<blockquote>\n  <p>Can you explain to me how static data is allocated (deallocated) in a process' virtual memory space when a dynamic module is being loaded (unloaded)?</p>\n</blockquote>\n\n<p>That part is easy: every <code>ELF</code> file has <code>PT_LOAD</code> segments, which you can see in the output from <code>readelf -Wl foo.so</code>. When loading the shared object, each of these segments is <code>mmap</code>ed into address space, and that serves as \"allocation\" for any static data in that shared object.</p>\n\n<p>When <code>foo.so</code> is unloaded, the data (and code) is disposed of via <code>munmap</code> system call.</p>\n\n<blockquote>\n  <p>I assume this takes place in the _init() and _fini() functions</p>\n</blockquote>\n\n<p>That assumption is not correct. The <code>_init</code> and <code>_fini</code> are about <em>dynamic</em> initialization (e.g. global variables of class type in <code>C++</code> with a non-trivial constructor/destructor). By the time <code>_init</code> is called, the memory for all globals has already been \"reserved\" via <code>mmap</code>.</p>\n\n<blockquote>\n  <p>However does the BSS segment</p>\n</blockquote>\n\n<p>The <code>.bss</code> section is included in the same <code>PT_LOAD</code> segment in which other initialized (writable) data is. This is why there is a separate <code>p_filesz</code> and <code>p_memsz</code> in the <code>ElfXX_Phdr</code>: the <code>p_filesz</code> \"covers\" initialized data, and (larger) <code>p_memsz</code> causes the <code>mmap</code> to \"allocate\" space for both initialized and <code>.bss</code> data.</p>\n\n<blockquote>\n  <p>What about global data in a dynamic module?</p>\n</blockquote>\n\n<p>What about it? I covered initialized data above.</p>\n\n<blockquote>\n  <p>Would there be possibility of symbol name clashes with the primary executable?</p>\n</blockquote>\n\n<p>Certainly. You can define <code>int foo = 42;</code> in <code>a.out</code>, and <code>int foo = 24;</code> in <code>foo.so</code>. The usual rule is that <em>if</em> <code>foo</code> is visible in the dynamic symbol table of <code>a.out</code>, then that <code>foo</code> will be used regardless of where it is referenced from.</p>\n\n<p>Complications arise when <code>a.out</code> does not export <code>foo</code> (if it is not linked with <code>-rdymamic</code> <em>and</em> does not link against <code>foo.so</code>), or when <code>foo.so</code> is linked with <code>-Bsymbolic</code>.</p>\n"}], "owner": {"reputation": 137, "user_id": 744029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HuY9q.jpg?s=128&g=1", "display_name": "David KWH", "link": "https://stackoverflow.com/users/744029/david-kwh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 36322558, "answer_count": 1, "score": 1, "last_activity_date": 1459387088, "creation_date": 1459361469, "last_edit_date": 1459369850, "question_id": 36316510, "link": "https://stackoverflow.com/questions/36316510/how-does-a-loader-allocate-deallocate-static-data-from-a-dynamic-module", "title": "How does a loader allocate/deallocate static data from a dynamic module", "body": "<p>Question for the linker gurus out there.  I have been working with mex files in Matlab and have been getting awful lot of unexplained crashes so I want to dig a bit deeper.</p>\n\n<p>Can you explain to me how static data is allocated (deallocated) in a process' virtual memory space when a dynamic module is being loaded (unloaded)?  </p>\n\n<p>I assume this takes place in the <code>_init()</code> and <code>_fini()</code> functions.  However does the BSS segment get assigned a chunk of memory in the heap space, along with other dynamic memory allocations?  </p>\n\n<p>What about global data in a dynamic module?  Would there be possibility of symbol name clashes with the primary executable?  </p>\n\n<p>Thanks for shedding light on these issues.   If I have to choose a platform I would like to hear from the ELF experts since I do most of my development on Linux.</p>\n"}, {"tags": ["c++", "string", "insert"], "comments": [{"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 4, "creation_date": 1459361575, "post_id": 36316480, "comment_id": 60256387, "body": "It finds a, inserts &#39;ob&#39; before it, find that a again, inserts... you got an infinite loop."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "reply_to_user": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 1, "creation_date": 1459361839, "post_id": 36316480, "comment_id": 60256562, "body": "@Revolver_Ocelot That is an awnser"}], "answers": [{"tags": [], "owner": {"reputation": 1096, "user_id": 1008655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ce4e32a7580660fe4caad63a7c77f8a?s=128&d=identicon&r=PG", "display_name": "Lee Hiles", "link": "https://stackoverflow.com/users/1008655/lee-hiles"}, "is_accepted": true, "score": 1, "last_activity_date": 1459363678, "last_edit_date": 1459363678, "creation_date": 1459362884, "answer_id": 36316980, "question_id": 36316480, "link": "https://stackoverflow.com/questions/36316480/why-does-my-program-freezes-at-stringinsert/36316980#36316980", "title": "Why does my program freezes at string::insert()?", "body": "<p>If your intention is to replace all instances of \"a\" with \"ob\" then consider using <a href=\"http://www.cplusplus.com/reference/string/string/replace/\" rel=\"nofollow\">string::replace</a>. </p>\n\n<p>If you want to insert \"ob\" before all instances of \"a\" you will need to modify the loop variable by incrementing it by the length of the inserted text (in this case 2).</p>\n\n<pre><code>for (int i = 0; i &lt; word.length(); i++) \n{\n    if (word[i] == 'a')\n    {\n        word.insert(i, \"ob\");\n        i += 2;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 68, "user_id": 5404160, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1126798840683221/picture?type=large", "display_name": "\u0645\u062d\u0645\u062f \u0627\u062d\u0633\u0627\u0646 \u0627\u0644\u062d\u0642", "link": "https://stackoverflow.com/users/5404160/%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d8%ad%d8%b3%d8%a7%d9%86-%d8%a7%d9%84%d8%ad%d9%82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 36316980, "answer_count": 1, "score": -4, "last_activity_date": 1459363678, "creation_date": 1459361364, "question_id": 36316480, "link": "https://stackoverflow.com/questions/36316480/why-does-my-program-freezes-at-stringinsert", "title": "Why does my program freezes at string::insert()?", "body": "<pre><code>void Obenglobish::work()\n{\n    for (int i = 0; i&lt;word.length(); i++)\n    {\n        if (word[i] == 'a')\n        {\n            word.insert(i, \"ob\");\n        }\n\n    }\n}\n</code></pre>\n\n<p>My program runs fine till it reaches this statement, I am not sure what I am doing wrong here.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1459361419, "post_id": 36316419, "comment_id": 60256267, "body": "From <code>ab32d3</code> how is 35 arrived at. Also better that using 48 would be <code>&#39;0&#39;</code>"}, {"owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1459361604, "post_id": 36316419, "comment_id": 60256416, "body": "I mean not to add digits but if there are 2 digits right one after another to think of it as a 2 digit number instead of 3 + 2 + 3 I need it to do 32+3 and thanks for the &#39;0&#39;"}, {"owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1459361674, "post_id": 36316419, "comment_id": 60256471, "body": "and can you explain why is using &#39;0&#39; better and what does it do?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1459361767, "post_id": 36316419, "comment_id": 60256519, "body": "Because it makes it more obvious that you are taking away the ASCII value for <code>&#39;0&#39;</code> rather than having to scratch ones head and remember that it has a value of 48"}, {"owner": {"reputation": 766, "user_id": 4241435, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/EZF4i.jpg?s=128&g=1", "display_name": "Skipper", "link": "https://stackoverflow.com/users/4241435/skipper"}, "edited": false, "score": 0, "creation_date": 1459361875, "post_id": 36316419, "comment_id": 60256593, "body": "@Tibor  You can try catching substrings with RegEx like <code>&#47;\\d+&#47;g</code>, then converting them to int with <code>std::stoi</code>.  <i>remember to make sure if they are indeed the numbers</i> <a href=\"http://regexr.com/3d49l\" rel=\"nofollow noreferrer\">example</a>"}, {"owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459361960, "post_id": 36316419, "comment_id": 60256653, "body": "std::stoi doesn&#39;t work with my compiler I&#39;ve tried that on asigment that I did before."}, {"owner": {"reputation": 766, "user_id": 4241435, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/EZF4i.jpg?s=128&g=1", "display_name": "Skipper", "link": "https://stackoverflow.com/users/4241435/skipper"}, "edited": false, "score": 0, "creation_date": 1459362037, "post_id": 36316419, "comment_id": 60256703, "body": "How about <code>atoi(str.c_str())</code> ? <i>str</i> is Your string of course"}, {"owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459362205, "post_id": 36316419, "comment_id": 60256802, "body": "That doesn&#39;t work either tried that."}, {"owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459362361, "post_id": 36316419, "comment_id": 60256918, "body": "How do you implement a regular expression to a code?"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1459362680, "post_id": 36316419, "comment_id": 60257174, "body": "which compiler are you using?"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1459362838, "post_id": 36316419, "comment_id": 60257292, "body": "did you include &lt;cstdlib&gt; for atoi ?"}, {"owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459363077, "post_id": 36316419, "comment_id": 60257462, "body": "But I can&#39;t figure out how do I implement RegEx into my code"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1459364731, "post_id": 36316419, "comment_id": 60258486, "body": "I&#39;m voting to close this question because the poster is trying to keep modifying the question. (and this is for a competition)"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1459365904, "post_id": 36316419, "comment_id": 60259197, "body": "You have not explained what problem you are facing, what result you are getting that is unexpected, and what steps you have taken already to discover the source of the problem."}, {"owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1459435117, "post_id": 36316419, "comment_id": 60294883, "body": "@EdHeal I was practising for the competiton and there was no task like this on it."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459362585, "post_id": 36316786, "comment_id": 60257098, "body": "It says that stoi is not declared"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "reply_to_user": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459362649, "post_id": 36316786, "comment_id": 60257150, "body": "Did you include string header? <code>#include &lt;string&gt;</code>"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "reply_to_user": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459362823, "post_id": 36316786, "comment_id": 60257279, "body": "Okay, then you compiler doesn&#39;t support <code>c++11</code>. Change <code>stoi(temp)</code> to <code>atoi(temp.c_str())</code>"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "reply_to_user": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459362993, "post_id": 36316786, "comment_id": 60257393, "body": "@Tibor Include <code>&lt;cstdlib&gt;</code> and try again"}, {"owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459363344, "post_id": 36316786, "comment_id": 60257619, "body": "Now it says that range based &#39;for&#39; loops are not allowed in C++ 98 mode"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "reply_to_user": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459363367, "post_id": 36316786, "comment_id": 60257638, "body": "@Tibor Okay, let me change it"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "reply_to_user": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459363469, "post_id": 36316786, "comment_id": 60257698, "body": "@Tibor Now it should be okay"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1459363810, "post_id": 36316786, "comment_id": 60257903, "body": "Why are you using <code>stoi</code> when it is simple to keep the running total and avoid that overhead?"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1459363990, "post_id": 36316786, "comment_id": 60258000, "body": "@EdHeal It&#39;s just a solution, not the best one. I just gave OP something to start with."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1459364638, "post_id": 36316786, "comment_id": 60258423, "body": "@DimChtz - It is not a perfect answer but you get a +1 for patience with Tibor"}], "tags": [], "owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "is_accepted": false, "score": 1, "last_activity_date": 1459363453, "last_edit_date": 1459363453, "creation_date": 1459362336, "answer_id": 36316786, "question_id": 36316419, "link": "https://stackoverflow.com/questions/36316419/adding-all-numbers-from-string/36316786#36316786", "title": "Adding all numbers from string", "body": "<p>Try this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cctype&gt;\n\nusing namespace std;\n\nint main() {\n   string str = \"ab32d3\", temp;\n   int sum = 0;\n\n   for ( int i = 0; i &lt; str.size(); i++ ) {\n       if ( isdigit(str[i]) ) temp.push_back(str[i]);\n       else {\n           if ( temp.size() &gt; 0 ) {\n               sum += stoi(temp);\n               temp = string();\n           }   \n       }\n   }\n\n   // Last number (if exists)\n   if ( temp.size() &gt; 0 ) sum += stoi(temp);\n\n   cout &lt;&lt; sum &lt;&lt; endl;\n\n   return 0;\n}\n</code></pre>\n\n<p>It will print <code>35</code></p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459363848, "post_id": 36317035, "comment_id": 60257918, "body": "This works, but now that I try to read from a text file that has text written in two lines it gives me a lot bigger value"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459363936, "post_id": 36317035, "comment_id": 60257968, "body": "@Tibor - You have moved the goal post. Read the file line by line. Use this as a function template."}, {"owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459364062, "post_id": 36317035, "comment_id": 60258044, "body": "Minimum and maximum value work for multiple lines but this doesn&#39;t"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459364137, "post_id": 36317035, "comment_id": 60258092, "body": "@tibor - In your code you have not even declared <code>max</code> and <code>min</code>"}, {"owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459364203, "post_id": 36317035, "comment_id": 60258136, "body": "Actually it doesn&#39;t work only when first character of 2nd line is a number"}, {"owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459364231, "post_id": 36317035, "comment_id": 60258149, "body": "I do, but it didn&#39;t copy"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459364312, "post_id": 36317035, "comment_id": 60258209, "body": "My code works perfectly for a string. Read each line in turn as a string <code>getline</code> perhaps. So why not post this additional code?"}, {"owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459364480, "post_id": 36317035, "comment_id": 60258310, "body": "I do get my string with getline. I will try to edit my code again so could you check for an error."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459364584, "post_id": 36317035, "comment_id": 60258378, "body": "<i>You can lead a horse to water but you cannot make it drink</i> - You have two valid answers - please use the material and work things out for yourself"}, {"owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459364777, "post_id": 36317035, "comment_id": 60258515, "body": "I have a competition tomorrow, morning and its really late at night currently and I can&#39;t figure this out"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459364932, "post_id": 36317035, "comment_id": 60258612, "body": "So you want me to write the code for you to win this competition - do I get a prize? I guess I do not."}, {"owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459365004, "post_id": 36317035, "comment_id": 60258659, "body": "No, we get our tasks tomorrow, I just need help if there is this type of task to do, but thanks anyways for help"}, {"owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "edited": false, "score": 0, "creation_date": 1459365040, "post_id": 36317035, "comment_id": 60258672, "body": "And I wouldn&#39;t cheat I&#39;m not a person like that."}], "tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": false, "score": 0, "last_activity_date": 1459363010, "creation_date": 1459363010, "answer_id": 36317035, "question_id": 36316419, "link": "https://stackoverflow.com/questions/36316419/adding-all-numbers-from-string/36317035#36317035", "title": "Adding all numbers from string", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;cctype&gt;\n\nint main() {\n\n    std::string s = \"ab32d3\";\n    int value_so_far = 0;\n    int total = 0;\n\n    for (int i = 0; i &lt; s.length(); ++i)\n    {\n        if (isdigit(s[i])) { // This keeps a running total until the number ends\n            value_so_far = 10 * value_so_far + s[i] - '0';\n        } else { // Here the number has ended - Add to the total and reset\n            total += value_so_far;\n            value_so_far = 0;\n        }\n    }\n\n    // Got to the end - Add what is left!\n    total += value_so_far;\n\n    std::cout &lt;&lt; \"Ans:\" &lt;&lt; total &lt;&lt; std::endl;\n    // your code goes here\n    return 0;\n}\n</code></pre>\n\n<p>Here is the link: <a href=\"https://ideone.com/qlcuNV\" rel=\"nofollow\">ideone code</a>.</p>\n\n<p>Please check the comments in the code as to the explanation.</p>\n"}], "owner": {"reputation": 7, "user_id": 6118709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cbd698fa9d6785ab87df4e03be4805?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor", "link": "https://stackoverflow.com/users/6118709/tibor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1459364586, "creation_date": 1459361170, "last_edit_date": 1459364586, "question_id": 36316419, "link": "https://stackoverflow.com/questions/36316419/adding-all-numbers-from-string", "title": "Adding all numbers from string", "body": "<p>I'm trying to add all numbers from string, but I can't figure out how do I add a 2 digit number.\nex: ab32d3\nI want the answer to be 35.\nThis is my code:</p>\n\n<pre><code>int main()\n{\nint max=0,min=100000,sum=0,totalsum=0;\nstring s;\nifstream in (\"Unos.txt\");\n\nwhile(getline(in,s))\n{\n    cout&lt;&lt;s&lt;&lt;endl;\n    for(int i=0;i&lt;s.length();++i)\n    {\n        if(s[i]&gt;max)\n        {\n            max=s[i]-'0';\n        }\n        if(s[i]&lt;min)\n        {\n            min=s[i]-'0';\n        }\n        if(isdigit(s[i]))\n        {\n            sum=10*sum+s[i]-'0';\n        }\n        else\n        {\n            totalsum+=sum;\n            sum=0;\n        }\n    }\n}\ntotalsum+=sum;\ncout&lt;&lt;\"Najveci broj je: \"&lt;&lt;max&lt;&lt;endl;\ncout&lt;&lt;\"Najmanji broj je: \"&lt;&lt;min&lt;&lt;endl;\ncout&lt;&lt;\"Zbir svih brojeva je: \"&lt;&lt;totalsum&lt;&lt;endl;\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "lower-bound"], "comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1459362299, "post_id": 36316348, "comment_id": 60256873, "body": "<a href=\"http://stackoverflow.com/a/36269410/12711\">stackoverflow.com/a/36269410/12711</a> may help."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 3, "last_activity_date": 1459361428, "creation_date": 1459361428, "answer_id": 36316499, "question_id": 36316348, "link": "https://stackoverflow.com/questions/36316348/finding-the-return-value-of-the-lower-bound/36316499#36316499", "title": "finding the return value of the lower_bound", "body": "<p>If you just want to check <strong>if</strong> the object exists, use <a href=\"http://en.cppreference.com/w/cpp/algorithm/binary_search\" rel=\"nofollow\"><code>std::binary_search</code></a>:</p>\n\n<pre><code>bool exists = std::binary_search(myVector.begin(), myVector.end(), value, comparer());\n</code></pre>\n\n<p>That said, if you want the iterator, you'll need to not only check if the value matches but you'll also have to <em>first</em> check if you got something other than the end iterator:</p>\n\n<pre><code>auto it = std::lower_bound(myVector.begin(), myVector.end(), value, comparer());\nif (it != myVector.end() &amp;&amp; (*it)-&gt;ID == value) {\n   return false;\n}\n</code></pre>\n\n<p>If you do get <code>end()</code>, then that dereference is undefined behavior, which could manifest as a segmentation fault. </p>\n"}], "owner": {"reputation": 229, "user_id": 3706129, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2e17cff6efe2f0faf62cab3d57977d58?s=128&d=identicon&r=PG&f=1", "display_name": "user3706129", "link": "https://stackoverflow.com/users/3706129/user3706129"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1331, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1459361428, "creation_date": 1459360953, "question_id": 36316348, "link": "https://stackoverflow.com/questions/36316348/finding-the-return-value-of-the-lower-bound", "title": "finding the return value of the lower_bound", "body": "<p>I am trying to use a lower_bound  to find out if value is inside a vector of pointers to struct. I am using</p>\n\n<pre><code>auto it = lower_bound( myVector.begin() , myVector.end() , value , comparer() );\n</code></pre>\n\n<p>comparer function looks like </p>\n\n<pre><code>struct comparer\n{\n    bool operator ()(Property * ms, int const i) const\n    {\n        return ms -&gt; ID  &lt; i;\n    };\n};\n</code></pre>\n\n<p>and i want to check if the element with said ID was found. How can i check it?\nI tried using</p>\n\n<pre><code>if( (*it) -&gt; ID == value ) {\n   return false;\n}\n</code></pre>\n\n<p>but this is throwing segmentation fault, Is there any way how to check if element is already there?</p>\n"}, {"tags": ["c++", "sorting"], "comments": [{"owner": {"reputation": 2198, "user_id": 1795776, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/91d88fd74cc0d486942808643f173e19?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel John", "link": "https://stackoverflow.com/users/1795776/emmanuel-john"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1459361080, "post_id": 36316281, "comment_id": 60256046, "body": "Yes same level. However, on my mac using htop to visualize memory, I realized my mac used 4 cores for the sorting"}, {"owner": {"reputation": 2198, "user_id": 1795776, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/91d88fd74cc0d486942808643f173e19?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel John", "link": "https://stackoverflow.com/users/1795776/emmanuel-john"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1459361141, "post_id": 36316281, "comment_id": 60256081, "body": "@juanchopanza How is the graph copied if I&#39;m passing by reference?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1459361158, "post_id": 36316281, "comment_id": 60256092, "body": "You have a flaw: The iterator of nodes is no iterator to a node, but some <code>Index</code>. Make an iterator able to dereference the desired node."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1459361176, "post_id": 36316281, "comment_id": 60256104, "body": "@unekwu It gets copied into <code>g</code>, <code>Graph g;</code>."}, {"owner": {"reputation": 2198, "user_id": 1795776, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/91d88fd74cc0d486942808643f173e19?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel John", "link": "https://stackoverflow.com/users/1795776/emmanuel-john"}, "edited": false, "score": 0, "creation_date": 1459361304, "post_id": 36316281, "comment_id": 60256191, "body": "@DieterL&#252;cking I actually meant vector&lt;Index&gt;"}, {"owner": {"reputation": 2198, "user_id": 1795776, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/91d88fd74cc0d486942808643f173e19?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel John", "link": "https://stackoverflow.com/users/1795776/emmanuel-john"}, "edited": false, "score": 0, "creation_date": 1459361552, "post_id": 36316281, "comment_id": 60256373, "body": "It works with the const reference. Now I understand why. I&#39;ll accept both answers as soon as I&#39;m able too. Thanks for the help."}, {"owner": {"reputation": 3343, "user_id": 2718864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3qOW3.png?s=128&g=1", "display_name": "nasser-sh", "link": "https://stackoverflow.com/users/2718864/nasser-sh"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1459361794, "post_id": 36316281, "comment_id": 60256535, "body": "Are you sure that this is the only difference? I agree with @juanchopanza, there shouldn&#39;t be a change in performance between your two implementations"}, {"owner": {"reputation": 2198, "user_id": 1795776, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/91d88fd74cc0d486942808643f173e19?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel John", "link": "https://stackoverflow.com/users/1795776/emmanuel-john"}, "reply_to_user": {"reputation": 3343, "user_id": 2718864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3qOW3.png?s=128&g=1", "display_name": "nasser-sh", "link": "https://stackoverflow.com/users/2718864/nasser-sh"}, "edited": false, "score": 0, "creation_date": 1459362100, "post_id": 36316281, "comment_id": 60256742, "body": "@Nasser Yes I ran the exact same slow code with the same exact flags on both machines. Although my mac uses g++-5 and ubuntu machine uses gcc 4.8.2"}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1459360977, "post_id": 36316325, "comment_id": 60255983, "body": "But the graph object is still copied into the functor <code>s</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1459361025, "post_id": 36316325, "comment_id": 60256012, "body": "@juanchopanza, likely this is not a big performance problem - judging by other evidence. I assume, <code>std::sort</code> implementation OP has does a copy of sorter on every iteration."}, {"owner": {"reputation": 2198, "user_id": 1795776, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/91d88fd74cc0d486942808643f173e19?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel John", "link": "https://stackoverflow.com/users/1795776/emmanuel-john"}, "edited": false, "score": 0, "creation_date": 1459361261, "post_id": 36316325, "comment_id": 60256161, "body": "Makes sense. How is this done before c++11? I&#39;m pretty new to the language."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459361394, "post_id": 36316325, "comment_id": 60256249, "body": "Like i said - by having your <code>Graph g</code> as a (const) reference to the actual object inside the class."}, {"owner": {"reputation": 2198, "user_id": 1795776, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/91d88fd74cc0d486942808643f173e19?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel John", "link": "https://stackoverflow.com/users/1795776/emmanuel-john"}, "edited": false, "score": 0, "creation_date": 1459361440, "post_id": 36316325, "comment_id": 60256284, "body": "That fixes it. Thanks."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 3, "last_activity_date": 1459360979, "last_edit_date": 1459360979, "creation_date": 1459360910, "answer_id": 36316325, "question_id": 36316281, "link": "https://stackoverflow.com/questions/36316281/passing-object-to-compare-function-makes-sorting-slow/36316325#36316325", "title": "Passing object to compare function makes sorting slow?", "body": "<p><code>std::ref</code> is a pointer in disguise. What the code does is that instead of copying a heavy-weight <code>SortByFutureVolume</code> object, it copies around the pointer to the same object - which is obviously much faster.</p>\n\n<p>The option would be to make the <code>Graph g</code> a (const) reference inside the sorter object.</p>\n"}, {"comments": [{"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1459361535, "post_id": 36316395, "comment_id": 60256360, "body": "I would recommend a pointer. Doesn&#39;t make much sense for the object to be copy constructible, but not copy assignable."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1459361614, "post_id": 36316395, "comment_id": 60256422, "body": "@BenjaminLindley, why? I know a lot of objects which are exactly that. Also having a pointer would prevent the sorter from using temporary object."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1459361856, "post_id": 36316395, "comment_id": 60256571, "body": "@SergeyA: Why would you want that? And no, it doesn&#39;t prevent temporaries. You would still take the object in to the constructor by reference, but then take its address in the initialization."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1459362224, "post_id": 36316395, "comment_id": 60256819, "body": "@BenjaminLindley, not in this case, but I know of business logic objects where copy construction is straightforward, but assingment is convoluted (and not neccessary). In this case it is simply not neccessary. As for pointer - yes, you are correct."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1459362368, "post_id": 36316395, "comment_id": 60256922, "body": "@BenjaminLindley I added an example of using a pointer.  It hadn&#39;t even crossed my mind that you would want the comparator to be copy assignable"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1459362557, "post_id": 36316395, "comment_id": 60257081, "body": "@SergeyA: Well I simply don&#39;t like putting arbitrary restrictions on how my classes can be used, especially when lifting those restrictions is such a trivial thing to do. There is no reason to expect that a class like this can&#39;t be assigned to, so it should be able to be assigned to."}, {"owner": {"reputation": 2198, "user_id": 1795776, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/91d88fd74cc0d486942808643f173e19?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel John", "link": "https://stackoverflow.com/users/1795776/emmanuel-john"}, "edited": false, "score": 0, "creation_date": 1459364358, "post_id": 36316395, "comment_id": 60258240, "body": "@NathanOliver Is there still any need to use std::ref after using any of the above fixes?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 2198, "user_id": 1795776, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/91d88fd74cc0d486942808643f173e19?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel John", "link": "https://stackoverflow.com/users/1795776/emmanuel-john"}, "edited": false, "score": 0, "creation_date": 1459364596, "post_id": 36316395, "comment_id": 60258393, "body": "@unekwu It should not be needed as it makes the class act like a reference."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 4, "last_activity_date": 1459362570, "last_edit_date": 1495539907, "creation_date": 1459361097, "answer_id": 36316395, "question_id": 36316281, "link": "https://stackoverflow.com/questions/36316281/passing-object-to-compare-function-makes-sorting-slow/36316395#36316395", "title": "Passing object to compare function makes sorting slow?", "body": "<p>Instead of having a <code>Graph</code> data member in <code>SortByFutureVolume</code> you should have a <code>Graph &amp;</code> or <code>const Graph &amp;</code> if <code>g</code> can be read only.  This way, anytime the <code>SortByFutureVolume</code> is copied the <code>Graph</code> is not copied.</p>\n\n<pre><code>class SortByFutureVolume\n{\npublic:\n        SortByFutureVolume(const Graph&amp; _g): g(_g){}\n\n        bool operator() (const Index&amp; lhs, const Index&amp; rhs){\n            return g.getNode(lhs).futureVolume() &gt; g.getNode(rhs).futureVolume();\n        }\n    private:\n        Graph&amp; g;\n        // or\n        const Graph&amp; g;\n};\n</code></pre>\n\n<p>As pointed out by <a href=\"https://stackoverflow.com/users/440119/benjamin-lindley\">Benjamin Lindley</a> in the comments if You change <code>SortByFutureVolume</code> to store a pointer to the <code>Graph</code> instead of a refernece then <code>SortByFutureVolume</code> becomes copy assignable as pointers can be assigned but references cannot.  That would give you</p>\n\n<pre><code>class SortByFutureVolume\n{\npublic:\n        SortByFutureVolume(const Graph&amp; _g): g(&amp;_g){}\n\n        bool operator() (const Index&amp; lhs, const Index&amp; rhs){\n            return g-&gt;getNode(lhs).futureVolume() &gt; g-&gt;getNode(rhs).futureVolume();\n        }\n    private:\n        const Graph * g;\n};\n</code></pre>\n\n<p>As a side not it is okay to have <code>_g</code> as a variable name in a function parameter as it does not start with a capital letter but it is a good habit to not use leading underscores.  This is doubly true in the global space where <code>_g</code> would be an invalid identifier as it is reserved for the implementation.</p>\n"}, {"tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": false, "score": 2, "last_activity_date": 1459361740, "creation_date": 1459361740, "answer_id": 36316603, "question_id": 36316281, "link": "https://stackoverflow.com/questions/36316281/passing-object-to-compare-function-makes-sorting-slow/36316603#36316603", "title": "Passing object to compare function makes sorting slow?", "body": "<p>Your <code>SortByFutureVolume</code> was making a copy of whole graph each time it was being copied, and std::sort does a lot of copies by value of comparison function object.</p>\n\n<p>see here:</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/49b9cdad8eb3bc06\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/49b9cdad8eb3bc06</a></p>\n\n<p>for simple <code>std::vector&lt;int&gt;</code> sort it made internally 20 instantiations of <code>SortByFutureVolume</code> class. This same number of times your graph was probably copied. </p>\n\n<p><code>std::ref</code> copies only reference to your comparison function object - this removes all the deep copies and so also speeds up whole thing.</p>\n"}, {"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": false, "score": 2, "last_activity_date": 1459374000, "last_edit_date": 1459374000, "creation_date": 1459362369, "answer_id": 36316797, "question_id": 36316281, "link": "https://stackoverflow.com/questions/36316281/passing-object-to-compare-function-makes-sorting-slow/36316797#36316797", "title": "Passing object to compare function makes sorting slow?", "body": "<p>The prototype for the std::sort variant you are calling is</p>\n\n<pre><code>template&lt; class RandomIt, class Compare &gt;\nvoid sort( RandomIt first, RandomIt last, Compare comp );\n</code></pre>\n\n<p>(see <a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/algorithm/sort</a>)</p>\n\n<p>The compiler thus deduces that when you pass an unqualified <code>SortByFutureVolume(g)</code> you are passing by value. Constructing the temporary with your definition of <code>SortByFutureVolume</code> requires a deep copy of the graph. Potentially there is then a second copy made as the temporary is passed by value. If this parameter is passed by value within sort, further copies will be made.</p>\n\n<p>When you use <code>std::ref()</code> the compiler can deduce that the third argument is a reference and so the pass becomes by reference, eliminating secondary copies of the graph.</p>\n\n<p>As others have pointed out, the solution is to make member <code>g</code> a reference and make the constructor accept by reference.</p>\n\n<pre><code>class SortByFutureVolume {\n    const Graph&amp; g;\n\npublic:\n    SortByFutureVolume(const Graph&amp; g_) : g(g_) {}\n\n    bool operator() (const Index&amp; lhs, const Index&amp; rhs){\n        return g.getNode(lhs).futureVolume() &gt; g.getNode(rhs).futureVolume();\n    }\n};\n</code></pre>\n\n<p>of course, if you have a C++11 compatible compiler, you could just use a lambda:</p>\n\n<pre><code>std::sort(nodes.begin(), nodes.end(), [&amp;g](const Index&amp; lhs, const Index&amp; rhs) {\n    return g.getNode(lhs).futureVolume() &gt; g.getNode(rhs).futureVolume();\n});\n</code></pre>\n"}], "owner": {"reputation": 2198, "user_id": 1795776, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/91d88fd74cc0d486942808643f173e19?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel John", "link": "https://stackoverflow.com/users/1795776/emmanuel-john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 2, "accepted_answer_id": 36316395, "answer_count": 4, "score": 3, "last_activity_date": 1459374000, "creation_date": 1459360791, "last_edit_date": 1495540787, "question_id": 36316281, "link": "https://stackoverflow.com/questions/36316281/passing-object-to-compare-function-makes-sorting-slow", "title": "Passing object to compare function makes sorting slow?", "body": "<p>I had the following code in my program. </p>\n\n<pre><code>//Compare class\nclass SortByFutureVolume\n{\npublic:\n        SortByFutureVolume(const Graph&amp; _g): g(_g){}\n\n        bool operator() (const Index&amp; lhs, const Index&amp; rhs){\n            return g.getNode(lhs).futureVolume() &gt; g.getNode(rhs).futureVolume();\n        }\n    private:\n        Graph g;\n};\n</code></pre>\n\n<p>And then I use it for sorting like this:</p>\n\n<pre><code>    std::sort(nodes.begin(), nodes.end(),SortByFutureVolume(g));\n</code></pre>\n\n<p>When I run the above code on my mac computer for a vector of size 23K it completes in a fraction of seconds. However, when I run on my ubuntu 14 machine. It takes several minutes and it hasn't even completed yet.</p>\n\n<p>I search for this problem and found the following solution here <a href=\"https://stackoverflow.com/questions/29695755/can-i-prevent-stdsort-from-copying-the-passed-comparison-object\">Can I prevent std::sort from copying the passed comparison object</a></p>\n\n<p>Basically modifying my code as so fixes the problem:</p>\n\n<pre><code>SortByFutureVolume s(g);\nstd::sort(_nodes.begin(), _nodes.begin()+ end, std::ref(s));\n</code></pre>\n\n<p>After this the runtime on both my mac an ubuntu are comparable. Very much faster.</p>\n\n<p>I know that this works but I'm trying to understand why? I know that slow code above was due to copying of graph and SortByFutureVolume. Why do you need std::ref()? Is this solution even correct and is there a better way to do this? </p>\n"}, {"tags": ["java", "c++", "swig"], "comments": [{"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1459361195, "post_id": 36316213, "comment_id": 60256115, "body": "Try wrapping one of the types in your switch first. Does this work?"}, {"owner": {"reputation": 5758, "user_id": 487903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dd77541b61d10aa5f3304463a5f63427?s=128&d=identicon&r=PG", "display_name": "jbaiter", "link": "https://stackoverflow.com/users/487903/jbaiter"}, "reply_to_user": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1459361876, "post_id": 36316213, "comment_id": 60256595, "body": "I&#39;m not sure what you mean :/ Which switch?"}, {"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1459362243, "post_id": 36316213, "comment_id": 60256837, "body": "The source code of the LoadVirtual function. It has a switch. Can you create one of the objects?"}], "answers": [{"comments": [{"owner": {"reputation": 5758, "user_id": 487903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dd77541b61d10aa5f3304463a5f63427?s=128&d=identicon&r=PG", "display_name": "jbaiter", "link": "https://stackoverflow.com/users/487903/jbaiter"}, "edited": false, "score": 0, "creation_date": 1459421445, "post_id": 36328638, "comment_id": 60284527, "body": "Thank you, that did not fix the error but is still very good to know :-)"}], "tags": [], "owner": {"reputation": 1560, "user_id": 4758618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f04c304d3c41dcc6f9b721cbe22d4f0?s=128&d=identicon&r=PG&f=1", "display_name": "V-master", "link": "https://stackoverflow.com/users/4758618/v-master"}, "is_accepted": false, "score": 1, "last_activity_date": 1459414589, "creation_date": 1459414589, "answer_id": 36328638, "question_id": 36316213, "link": "https://stackoverflow.com/questions/36316213/swig-java-object-gets-gced-too-early/36328638#36328638", "title": "SWIG/Java: Object gets GCed too early", "body": "<p>You are probably creating new object just to be used with Java side (there are no references to that object held on native side).\nIf its true, than you need to specify that this method creates new object that will follow java lifetime/gc</p>\n\n<pre><code>%newobject lm::base::Model* LoadVirtual(const char *file_name,\n                             const lm::ngram::Config &amp;config = lm::ngram::Config());\n</code></pre>\n\n<p>more about it you can found in swig documentation: <a href=\"http://www.swig.org/Doc1.3/Customization.html#ownership\" rel=\"nofollow\">http://www.swig.org/Doc1.3/Customization.html#ownership</a></p>\n"}, {"tags": [], "owner": {"reputation": 5758, "user_id": 487903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dd77541b61d10aa5f3304463a5f63427?s=128&d=identicon&r=PG", "display_name": "jbaiter", "link": "https://stackoverflow.com/users/487903/jbaiter"}, "is_accepted": true, "score": 0, "last_activity_date": 1459525623, "last_edit_date": 1459525623, "creation_date": 1459421425, "answer_id": 36331270, "question_id": 36316213, "link": "https://stackoverflow.com/questions/36316213/swig-java-object-gets-gced-too-early/36331270#36331270", "title": "SWIG/Java: Object gets GCed too early", "body": "<p>The underlying cause was actually a mistake in my Java code and had nothing to do with SWIG per se.\nI had two constructors for the <code>Model</code> class, one of which called the other with <code>new Model(args)</code> instead of <code>this(args)</code>. This, of course, immediately discarded the properly initialized instance and left me with the un-initialized object (where everything is <code>null</code>).</p>\n"}], "owner": {"reputation": 5758, "user_id": 487903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dd77541b61d10aa5f3304463a5f63427?s=128&d=identicon&r=PG", "display_name": "jbaiter", "link": "https://stackoverflow.com/users/487903/jbaiter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "closed_date": 1459513528, "accepted_answer_id": 36331270, "answer_count": 2, "score": -1, "last_activity_date": 1459525623, "creation_date": 1459360569, "question_id": 36316213, "link": "https://stackoverflow.com/questions/36316213/swig-java-object-gets-gced-too-early", "closed_reason": "Not suitable for this site", "title": "SWIG/Java: Object gets GCed too early", "body": "<p>I'm in the process of writing a Java wrapper around some C++ code with the use of SWIG. The bindings are working now, but unfortunately my objects that get created on the native side are free'd too quickly.</p>\n\n<p>The code from bottom to top:</p>\n\n<p><strong>C++:</strong> <a href=\"https://github.com/jbaiter/kenlm-java/blob/master/src/main/c%2B%2B/lm/model.hh\" rel=\"nofollow\">GitHub</a></p>\n\n<pre><code>// ...\nbase::Model *LoadVirtual(const char *file_name, const Config &amp;config = Config(),\n                         ModelType if_arpa = PROBING);\n// ...\n</code></pre>\n\n<p><strong>SWIG:</strong> <a href=\"https://github.com/jbaiter/kenlm-java/blob/master/src/main/swig/KenLM.swg\" rel=\"nofollow\">GitHub</a></p>\n\n<pre><code>namespace lm::ngram {\n    // ...\n    lm::base::Model* LoadVirtual(const char *file_name,\n                                 const lm::ngram::Config &amp;config = lm::ngram::Config());\n}\n</code></pre>\n\n<p><strong>Java:</strong> <a href=\"https://github.com/jbaiter/kenlm-java/blob/master/src/main/java/com/github/jbaiter/kenlm/Model.java\" rel=\"nofollow\">GitHub</a></p>\n\n<pre><code>public class Model {\n    private com.github.jbaiter.kenlm.jni.Model cModel;\n    private String path;\n    //...\n    public Model(String path, Config config) throws ModelException {\n        this.path = path;\n        this.cModel = KenLM.LoadVirtual(path, config.getCConfig());\n    }\n\n    public long getOrder() {\n        return this.cModel.Order();\n    }\n    //...\n}\n</code></pre>\n\n<p><strong>Test Case with the Problem</strong>: <a href=\"https://github.com/jbaiter/kenlm-java/blob/master/src/test/java/com/github/jbaiter/kenlm/ModelTest.java\" rel=\"nofollow\">GitHub</a></p>\n\n<pre><code>@Test\npublic void getOrder() throws Exception {\n    Model model = new Model(toy0Url.getPath());\n    assertEquals(model.getOrder(), 3);\n}\n</code></pre>\n\n<p>The test fails with a <code>NullPointerException</code> that is thrown because <code>model.cModel</code> is <code>null</code>. However, when I set a breakpoint in the <code>Model</code> constructor, the field is set correctly and <code>getOrder</code> returns the expected  result. As soon as the constructor's scope is left, though, <strong>all fields</strong> on my <code>Model</code> class are suddenly <code>null</code>. That <code>cModel</code> is <code>null</code> is probably due to my lack of understanding in regard to memory management with SWIG, but the fact that the <code>path</code>  field is <code>null</code> as well is really puzzling to me.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1459360195, "post_id": 36316078, "comment_id": 60255475, "body": "So, what is <code>z</code>? Maybe post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1459360254, "post_id": 36316078, "comment_id": 60255504, "body": "You did shuffle the vector. Only problem is <code>a</code> and <code>z</code>, both undeclared"}, {"owner": {"reputation": 9, "user_id": 6128559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e14446ef1b56060574c6bb7a45e0a11?s=128&d=identicon&r=PG&f=1", "display_name": "Breindy", "link": "https://stackoverflow.com/users/6128559/breindy"}, "edited": false, "score": 0, "creation_date": 1459360563, "post_id": 36316078, "comment_id": 60255699, "body": "oh, a and z is meant to be 1 and 10, sorry let me edit that now."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1459360692, "post_id": 36316078, "comment_id": 60255791, "body": "It looks like it is shuffeling here:<a href=\"http://coliru.stacked-crooked.com/a/fae07fc96e61215c\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/fae07fc96e61215c</a>"}, {"owner": {"reputation": 252, "user_id": 3573460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d232ac3fdc6012d3627976c253235a8?s=128&d=identicon&r=PG&f=1", "display_name": "Lasoloz", "link": "https://stackoverflow.com/users/3573460/lasoloz"}, "edited": false, "score": 0, "creation_date": 1459360697, "post_id": 36316078, "comment_id": 60255799, "body": "How we are supposed to know what happened? We can&#39;t get telepathically your error messages, or your crashes."}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1459360752, "post_id": 36316078, "comment_id": 60255836, "body": "So, your problem isn&#39;t how to shuffle a vector, but how to fill a vector with all values of a deck&#39;s cards."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 1, "creation_date": 1459360891, "post_id": 36316078, "comment_id": 60255934, "body": "How are you <i>storing</i> a deck of cards? I think you should figure that out before you try and shuffle the deck."}, {"owner": {"reputation": 9, "user_id": 6128559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e14446ef1b56060574c6bb7a45e0a11?s=128&d=identicon&r=PG&f=1", "display_name": "Breindy", "link": "https://stackoverflow.com/users/6128559/breindy"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1459361070, "post_id": 36316078, "comment_id": 60256041, "body": "oh yes, @kfsone thats right.."}], "answers": [{"comments": [{"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1459361077, "post_id": 36316350, "comment_id": 60256045, "body": "Genuine curiosity: why did you prefer shuffle over random_shuffle?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 1, "creation_date": 1459361436, "post_id": 36316350, "comment_id": 60256282, "body": "@kfsone <code>random_suffle</code> is deprecated in the current standard and will be removed in C++17."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 1, "creation_date": 1459362395, "post_id": 36316350, "comment_id": 60256945, "body": "@kfsone: The version of random_shuffle that he&#39;s using has a terrible specification. For example, it was originally prohibited from using <code>rand()</code> to generate its random numbers, so there&#39;s no dependable way to seed its generator (<code>srand</code> may or may not work--it shouldn&#39;t with a proper implementation of C++98/03, but is allowed to in C++14)."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1459362681, "post_id": 36316350, "comment_id": 60257175, "body": "C++ 14 added another overload of <code>random_shuffle</code> that lets you specify what generator it should use, but that&#39;s also deprecated, and has its own unique definition of the random number generator that gets used. Bottom line: <code>random_shuffle</code> is kind of a mess; <code>shuffle</code> is much cleaner."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 2, "last_activity_date": 1459360956, "creation_date": 1459360956, "answer_id": 36316350, "question_id": 36316078, "link": "https://stackoverflow.com/questions/36316078/storing-and-shuffling-a-deck-of-cards-using-a-vector-c/36316350#36316350", "title": "Storing and shuffling a deck of cards using a vector c++", "body": "<p>In new code you want to use <code>std::shuffle</code>, <em>not</em> <code>std::random_shuffle</code>.</p>\n\n<p>Using it, shuffling a deck of cards can look something like this:</p>\n\n<pre><code>#include &lt;random&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n#include &lt;iostream&gt;\n#include &lt;numeric&gt;\n\nint main() {\n    std::vector&lt;int&gt; cards(52);\n\n    std::iota(cards.begin(), cards.end(), 1);\n\n    std::random_device rnd;\n    std::mt19937_64 gen(rnd());\n\n    std::shuffle(cards.begin(), cards.end(), gen);\n\n    std::copy(cards.begin(), cards.end(), std::ostream_iterator&lt;int&gt;(std::cout, \" \"));\n    std::cout &lt;&lt; '\\n';\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6128559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e14446ef1b56060574c6bb7a45e0a11?s=128&d=identicon&r=PG&f=1", "display_name": "Breindy", "link": "https://stackoverflow.com/users/6128559/breindy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 938, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1459361126, "creation_date": 1459360086, "last_edit_date": 1459361126, "question_id": 36316078, "link": "https://stackoverflow.com/questions/36316078/storing-and-shuffling-a-deck-of-cards-using-a-vector-c", "title": "Storing and shuffling a deck of cards using a vector c++", "body": "<p>Hello all I've been stuck on this problem for the longest time and have been working on it for the past few days for hours at a time. I want to shuffle a deck of 52 cards in a vector similar to the code below but don't know to go about doing it. All help would be appreciated. Hopefully it'll be in the most basic form of code possible as I am taking an introductory level course. (This isn't the full task of my assignment).</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    vector&lt;int&gt; vi;\n\n\n    for(int i=1; i &lt;= 10; i++)\n      vi.push_back(i);\n\n//before shuffling\n    cout &lt;&lt;\"Before shuffling: \" &lt;&lt; endl;;\n    for(int i=0; i &lt; 10; i++)//printing index: value\n      cout &lt;&lt; i &lt;&lt; \": \" &lt;&lt; vi[i] &lt;&lt; endl;\n\nrandom_shuffle(vi.begin(), vi.end());\n\ncout &lt;&lt; \"\\n ------------ \\n\";\n\n//after \ncout &lt;&lt;\"After shuffling: \" &lt;&lt; endl;\nfor(int i=0; i &lt; 10; i++)\n  cout &lt;&lt; i &lt;&lt; \": \" &lt;&lt; vi[i] &lt;&lt; endl;\n}\n</code></pre>\n\n<p>so the code randomizes numbers however I want to randomize deck of cards...</p>\n\n<p>and after figuring out how to do that, I need player 1 to store this as his deck of 7 random cards as a vector, pushing that back to its own vector.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 4, "creation_date": 1459359981, "post_id": 36315997, "comment_id": 60255344, "body": "You&#39;re outputting incorrectly: it should be <code>cout &lt;&lt; &quot;something&quot; &lt;&lt; luch_bas[N] &lt;&lt; &#39;\\n&#39;;</code>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1459360226, "post_id": 36315997, "comment_id": 60255490, "body": "You need to start over from the beginning if you don&#39;t know how to output variables to streams, almost all books and tutorials have that as one of their earliest examples. <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">See e.g. here for a good list of beginners books</a>."}], "answers": [{"tags": [], "owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "is_accepted": false, "score": 0, "last_activity_date": 1459359994, "creation_date": 1459359994, "answer_id": 36316039, "question_id": 36315997, "link": "https://stackoverflow.com/questions/36315997/how-do-i-print-an-individual-value-from-an-array-within-text/36316039#36316039", "title": "How do I print an individual value from an array within text?", "body": "<p>It should be:</p>\n\n<pre><code>cout &lt;&lt; \"Tiene los atributos siguientes: \\n\";\ncout &lt;&lt; \"Puntos de Vida (PV)... \" &lt;&lt; luch_bas[0] &lt;&lt; endl;\ncout &lt;&lt; \"Puntos de Magia (PM)...\" &lt;&lt; luch_bas[1] &lt;&lt; endl;\ncout &lt;&lt; \"Fuerza (FUE) ...\"        &lt;&lt; luch_bas[2] &lt;&lt; endl;\ncout &lt;&lt; \"Rapidez (RAP) ...\"       &lt;&lt; luch_bas[3] &lt;&lt; endl;\ncout &lt;&lt; \"Precisi\u00f3n (PRE) ...\"     &lt;&lt; luch_bas[4] &lt;&lt; endl;\ncout &lt;&lt; \"Sabidur\u00eda (SAB) ...\"     &lt;&lt; luch_bas[5] &lt;&lt; endl;\ncout &lt;&lt; \"Esp\u00edritu (ESP) ...\"      &lt;&lt; luch_bas[6] &lt;&lt; endl;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "reply_to_user": {"reputation": 11, "user_id": 6136084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xC4Re.jpg?s=128&g=1", "display_name": "Noah Hoppe-McQueen", "link": "https://stackoverflow.com/users/6136084/noah-hoppe-mcqueen"}, "edited": false, "score": 0, "creation_date": 1459361395, "post_id": 36316049, "comment_id": 60256252, "body": "@NoahHoppe-McQueen, No Problem. We all have been there once."}], "tags": [], "owner": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "is_accepted": true, "score": 3, "last_activity_date": 1459360033, "creation_date": 1459360033, "answer_id": 36316049, "question_id": 36315997, "link": "https://stackoverflow.com/questions/36315997/how-do-i-print-an-individual-value-from-an-array-within-text/36316049#36316049", "title": "How do I print an individual value from an array within text?", "body": "<p>try this</p>\n\n<pre><code>  int main ()\n    { cout &lt;&lt; \"Tiene los atributos siguientes: \\n\";\n      cout &lt;&lt; \"Puntos de Vida (PV)... \\t\" &lt;&lt; luch_bas[0]&lt;&lt; \"\\n\";\n     ...\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "is_accepted": false, "score": 0, "last_activity_date": 1459360070, "creation_date": 1459360070, "answer_id": 36316071, "question_id": 36315997, "link": "https://stackoverflow.com/questions/36315997/how-do-i-print-an-individual-value-from-an-array-within-text/36316071#36316071", "title": "How do I print an individual value from an array within text?", "body": "<p>use more \"streaming\" operators</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ostream&gt;\nusing namespace std;\n// PV, PM, FUE, RAP, PRE, SAB, ESP\nint luch_bas [7] = {6,3,5,3,2,1,2};\n\nint main ()\n{ cout &lt;&lt; \"Tiene los atributos siguientes: \\n\";\n  cout &lt;&lt; \"Puntos de Vida (PV)... \" &lt;&lt; luch_bas[0] &lt;&lt; \"\\n\";\n  cout &lt;&lt; \"Puntos de Magia (PM)...\" &lt;&lt; luch_bas[1] &lt;&lt; \"\\n\";\n  cout &lt;&lt; \"Fuerza (FUE) ...\" &lt;&lt; luch_bas[2] &lt;&lt; \"\\n\";\n  cout &lt;&lt; \"Rapidez (RAP) ...\" &lt;&lt; luch_bas[3] &lt;&lt; \"\\n\";\n  cout &lt;&lt; \"Precisi\u00f3n (PRE) ...\" &lt;&lt; luch_bas[4] &lt;&lt; \"\\n\";\n  cout &lt;&lt; \"Sabidur\u00eda (SAB) ...\" &lt;&lt; luch_bas[5] &lt;&lt; \"\\n\";\n  cout &lt;&lt; \"Esp\u00edritu (ESP) ...\" &lt;&lt; luch_bas[6] &lt;&lt; \"\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 2, "last_activity_date": 1459360841, "creation_date": 1459360841, "answer_id": 36316297, "question_id": 36315997, "link": "https://stackoverflow.com/questions/36315997/how-do-i-print-an-individual-value-from-an-array-within-text/36316297#36316297", "title": "How do I print an individual value from an array within text?", "body": "<blockquote>\n  <p>The error log I keep getting is \"expected ';' before 'luch_bas'\", but I'm not exactly sure where the missing ; is supposed to go?</p>\n</blockquote>\n\n<p>You don't wan't to put a <code>;</code> as the error message suggests. You want to chain the output operator calls respectively.</p>\n\n<p>The <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator_ltltgtgt\" rel=\"nofollow\"><code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, Type t)</code></a> returns a <code>std::ostream&amp;</code> reference as you can see.</p>\n\n<p>The correct way is to chain the <code>operator&lt;&lt;()</code> calls:</p>\n\n<pre><code> cout &lt;&lt; \"Puntos de Vida (PV)... \" &lt;&lt; luch_bas[0] &lt;&lt; \"\\n\";\n                                // ^^             ^^\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6136084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xC4Re.jpg?s=128&g=1", "display_name": "Noah Hoppe-McQueen", "link": "https://stackoverflow.com/users/6136084/noah-hoppe-mcqueen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 36316049, "answer_count": 4, "score": -5, "last_activity_date": 1459360841, "creation_date": 1459359832, "last_edit_date": 1459360071, "question_id": 36315997, "link": "https://stackoverflow.com/questions/36315997/how-do-i-print-an-individual-value-from-an-array-within-text", "title": "How do I print an individual value from an array within text?", "body": "<p>I'm trying to pull individual values from an array and put them into text, but keep running into errors with syntax.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ostream&gt;\nusing namespace std;\n// PV, PM, FUE, RAP, PRE, SAB, ESP\nint luch_bas [7] = {6,3,5,3,2,1,2};\n\nint main ()\n{ cout &lt;&lt; \"Tiene los atributos siguientes: \\n\";\n  cout &lt;&lt; \"Puntos de Vida (PV)... \" luch_bas[0] \"\\n\";\n  cout &lt;&lt; \"Puntos de Magia (PM)...\" luch_bas[1] \"\\n\";\n  cout &lt;&lt; \"Fuerza (FUE) ...\" luch_bas[2] \"\\n\";\n  cout &lt;&lt; \"Rapidez (RAP) ...\" luch_bas[3] \"\\n\";\n  cout &lt;&lt; \"Precisi\u00f3n (PRE) ...\" luch_bas[4] \"\\n\";\n  cout &lt;&lt; \"Sabidur\u00eda (SAB) ...\" luch_bas[5] \"\\n\";\n  cout &lt;&lt; \"Esp\u00edritu (ESP) ...\" luch_bas[6] \"\\n\";\n}\n</code></pre>\n\n<p>The error log I keep getting is \"expected ';' before 'luch_bas'\", but I'm not exactly sure where the missing ; is supposed to go? I'm sure there's a much better way to code this; I am still learning.</p>\n"}, {"tags": ["java", "c++", "oop", "inheritance", "liskov-substitution-principle"], "answers": [{"comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1459364803, "post_id": 36316810, "comment_id": 60258536, "body": "I don&#39;t like the enum solution primarily because it is so often used to abuse OO programming, essentially putting child class information in a base class. I&#39;ve seen code where <code>Base</code> has an enum for <code>Type</code> with values <code>CHILD1, CHILD2, CHILD3</code> etc. Which then encourages a bunch of code to accept a <code>Base*</code>, and then proceed to check the underlying type. Such code is reflective of someone thinking they can get all the benefits of polymorphism with none of the drawbacks. <code>dynamic_cast</code>ing away is not much better, either."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1459364984, "post_id": 36316810, "comment_id": 60258648, "body": "@AndyG I didn&#39;t say it was a <i>great</i> solution; but as written above, each Animal kind cares about what Food kind it gets.  Basically, the abstraction behind the Food class <i>leaks</i>, because Food is a pretty useless abstraction; abstracting handling raw meat the same way you handle hay is a very questionable thing to do."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1459365592, "post_id": 36316810, "comment_id": 60259004, "body": "Agreed. I think OP has architected themselves into a corner. My comment was not intended to disagree with you, but reinforce why the &quot;solutions&quot; to OPs problem are not desirable."}, {"owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 0, "creation_date": 1459366265, "post_id": 36316810, "comment_id": 60259465, "body": "We haven&#39;t started any kind of implementation, which is why I want a good design to work on. The issue here is that while I write the base-classes, the derived classes are written by teams all over the world, and we don&#39;t even know how many we might have. But there is a definite coupling between derived classes of <code>Animal</code> and derived classes of <code>Food</code>. My immediate concern right now is how I could write <code>ZooManager</code>."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 0, "creation_date": 1459366712, "post_id": 36316810, "comment_id": 60259774, "body": "@user2308211 Suppose you where writing a system which lets clients plug-in a scripting system.  They provide scripts and variable value holders, and you set up a way for the app to hook up scripts and save them and run them and load the library (maybe from the &#39;net) and the resources etc.  All of these <i>details</i> might provide a solution that an abstract question about LSP and food/animal types won&#39;t, even though they both have LSP problems."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1459362409, "creation_date": 1459362409, "answer_id": 36316810, "question_id": 36315970, "link": "https://stackoverflow.com/questions/36315970/liskov-substitution-principle-and-multiple-hierarchies/36316810#36316810", "title": "Liskov substitution principle and multiple hierarchies", "body": "<p>First, your <code>setFoodPreference</code> has to have the option to <em>fail</em>.  That lets <code>setFoodPreference</code> take a <code>Food*</code> and have the postcondition of either setting the food preference, or failing.</p>\n\n<p>The dynamic cast can also be a failure of LSP, but if you arrange your type invariants to be vague enough it isn't technically a failure.</p>\n\n<p>Generally, <code>dynamic_cast</code> means that the type of the argument passed and its properties isn't sufficient to tell if the argument has certain properties.</p>\n\n<p>In principle, <code>setFoodPreference(Food*)</code> should be specified in terms of what <code>Food*</code> properties the passed in argument has to have in order for the setting to be successful; the dynamic type of the <code>Food*</code> is not a <code>Food*</code> property.</p>\n\n<p>So: LSP states that any subclass of <code>Food</code> has to obey all <code>Food</code> invariants.  Similarly for <code>Animal</code>.  You can avoid a LSP violation by making the invariants vague and the behavior of methods unpredictable; basically by saying \"it can fail for unspecified reasons\".  This is ... not very satisfying.</p>\n\n<p>Now, you can take a step back and decide that the dynamic type of your <code>Food*</code> is <em>part</em> of the <code>Food*</code>'s interface; that makes the interface ridiculously broad, and makes a mockery of LSP.</p>\n\n<p>The point of LSP is that you can reason about a <code>Food*</code> without having to think about its subclass types; they are \"how it works as a <code>Food</code>\".  Your code binds tightly to the subclass types, and thus bypasses the point of LSP.</p>\n\n<p>There are ways around this.  If <code>Food</code> had an enum stating what kind of food it was, and you never dynamically cast down to <code>Meat</code> but rather asked the <code>Food</code> if it was meat, you avoid it.  Now you can specify <code>setFoodPreference</code>'s behavior in terms of <code>Food</code>'s interface.</p>\n"}, {"tags": [], "owner": {"reputation": 664, "user_id": 754085, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/37402004/picture?type=large", "display_name": "Mark Murfin", "link": "https://stackoverflow.com/users/754085/mark-murfin"}, "is_accepted": false, "score": 1, "last_activity_date": 1459373291, "last_edit_date": 1459373291, "creation_date": 1459364282, "answer_id": 36317422, "question_id": 36315970, "link": "https://stackoverflow.com/questions/36315970/liskov-substitution-principle-and-multiple-hierarchies/36317422#36317422", "title": "Liskov substitution principle and multiple hierarchies", "body": "<p>Your approach to designing your hierarchies is wrong. OO classes represent groups of tightly coupled rules, where a rule is a function and tightly coupled means shared data. OO classes do NOT represent real world objects. People are wrong when they say that.</p>\n\n<p>If you are depending on the concrete type of Food, you are violating the Liskov substitution principle. Period.</p>\n\n<p>To design your classes correctly so that you are not forced into violating the LSP as you are here, you need to place rules in the Food class that can be used by the Animal class to accomplish its own rules. Or decide whether Food should even be a class. What your example shows is basically really bad String comparison.</p>\n"}], "owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 2, "accepted_answer_id": 36316810, "answer_count": 2, "score": 2, "last_activity_date": 1459373291, "creation_date": 1459359742, "last_edit_date": 1495542692, "question_id": 36315970, "link": "https://stackoverflow.com/questions/36315970/liskov-substitution-principle-and-multiple-hierarchies", "title": "Liskov substitution principle and multiple hierarchies", "body": "<p>This question is a follow up to <a href=\"https://stackoverflow.com/questions/33268558/liskov-substitution-principle-with-multiple-inheritance-heirachies/\">this</a>. I am trying to define class heirarchies involving multiple base-derived pairs. As an illustrative example, suppose that I have a class <code>Animal</code> and a class <code>Food</code>. <code>Animal</code> has a pure virtual function to mark its food preference, taking a food as parameter.</p>\n\n<pre><code>class Food\n{\n    public:\n    virtual void printName() {\n    //......\n    }\n};\n\nclass Animal\n{\n    public:\n    Food *_preferredFood;\n    virtual void setFoodPreference(Food *food)=0;\n\n};\n</code></pre>\n\n<p>I need to write code that deals only with these base classes, and calls the pure virtual function. For example, I have a <code>ZooManager</code> class, which sets food preferences for each animal.</p>\n\n<pre><code>class ZooManager\n{\n    vector&lt;Aninal*&gt; animals;\n    public:\n    void setAllPreferences(vector&lt;Food *&gt; foods) {\n        assert(animals.size() == foods.size());\n        for(int i =0;i&lt;animals.size();i++) {\n            animals[i]-&gt;setFoodPreference(foods[i]);\n        }\n    }\n};\n</code></pre>\n\n<p>So far so good. Now the problem is, that there are many different derived classes for <code>Food</code> and <code>Animal</code>. <code>Food</code> has derived classes <code>Fruit</code> and <code>Meat</code>, and <code>Animal</code> has derived classes <code>Carnivore</code> and <code>Herbivore</code>. <code>Herbivore</code> can accept only <code>Fruit</code> as food preference, and <code>Carnivore</code> can accept only <code>Meat</code>. </p>\n\n<pre><code>class Fruit : public Food\n{\n};\nclass Meat : public Food\n{\n};\nclass Carnivore: public Animal\n{\n    public:\n    void setFoodPreference(Food *food) {\n    this-&gt;_preferredFood = dynamic_cast&lt;Meat *&gt;(food);\n    }\n};\nclass Herbivore: public Animal\n{\n    public:\n    void setFoodPreference(Food *food) {\n    this-&gt;_preferredFood = dynamic_cast&lt;Fruit *&gt;(food);\n    }\n};\n</code></pre>\n\n<p>Can I create a class heirarchy for this without violating Liskov Substitution Principle? Although I use C++ in this question, I'd welcome Java-specific answers too.</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 1, "creation_date": 1459360094, "post_id": 36315967, "comment_id": 60255419, "body": "No.  The documentation clearly stats that <code>condition_variable::wait</code> releases the lock.  It says that clearly in your linked documentation.  See:  <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable/wait\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/thread/condition_variable/wait</a>"}], "answers": [{"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": false, "score": 2, "last_activity_date": 1459360324, "creation_date": 1459360324, "answer_id": 36316149, "question_id": 36315967, "link": "https://stackoverflow.com/questions/36315967/c-thread-can-lock-guard-own-a-mutex-that-owned-by-a-unique-lock/36316149#36316149", "title": "C++ thread: can lock_guard own a mutex that owned by a unique_lock?", "body": "<p>No, it means that during the <code>wait</code> the mutex is unlocked to allow provider threads to lock it and have authority over the cv. You omitted the most significant line in the example code you're referring to, the <code>notify_one</code>:</p>\n\n<pre><code>{\n    std::lock_guard&lt;std::mutex&gt; lk(m);\n    ready = true;\n    std::cout &lt;&lt; \"main() signals data ready for processing\\n\";\n}\ncv.notify_one(); // wake up the waiting thread\n</code></pre>\n\n<p>That's why you need to supply the lock to <code>wait</code>, so it can unlock it before the sleep and attempt to relock it after it has woken up.</p>\n\n<p>From the first section of the page you linked, especially note 2 and 3:</p>\n\n<blockquote>\n  <p>Any thread that intends to wait on std::condition_variable has to</p>\n  \n  <ol>\n  <li>acquire a std::unique_lock, on the same mutex as used to protect the shared variable</li>\n  <li>execute wait, wait_for, or wait_until. The wait operations atomically release the mutex and suspend the execution of the thread.</li>\n  <li>When the condition variable is notified, a timeout expires, or a spurious wakeup occurs, the thread is awakened, and the mutex is atomically reacquired. The thread should then check the condition and resume waiting if the wake up was spurious.</li>\n  </ol>\n</blockquote>\n"}], "owner": {"reputation": 4406, "user_id": 3741571, "user_type": "registered", "accept_rate": 2, "profile_image": "https://i.stack.imgur.com/0WXuV.jpg?s=128&g=1", "display_name": "chenzhongpu", "link": "https://stackoverflow.com/users/3741571/chenzhongpu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459360324, "creation_date": 1459359732, "question_id": 36315967, "link": "https://stackoverflow.com/questions/36315967/c-thread-can-lock-guard-own-a-mutex-that-owned-by-a-unique-lock", "title": "C++ thread: can lock_guard own a mutex that owned by a unique_lock?", "body": "<p>In the example code <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow\">condition variable</a>, it shows that:</p>\n\n<p>After <code>worker</code> thread owns the mutex (unique lock), and then wait.</p>\n\n<pre><code>std::unique_lock&lt;std::mutex&gt; lk(m);\ncv.wait(lk, []{return ready;});\n</code></pre>\n\n<p>The <code>main</code> thread can still get the mutex (lock guard).</p>\n\n<pre><code>{\n    std::lock_guard&lt;std::mutex&gt; lk(m);\n    ready = true;\n}\n</code></pre>\n\n<p>Does this mean that lock_guard can own a mutex that owned by a unique_lock ?</p>\n"}, {"tags": ["c#", "c++", "dll", "zigbee"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1459358671, "post_id": 36315626, "comment_id": 60254635, "body": "Do not steal proprietary code."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1459359504, "post_id": 36315626, "comment_id": 60255061, "body": "It is a .NET assembly, not directly usable from an <i>unmanaged</i> C++ program."}, {"owner": {"reputation": 1, "user_id": 6136006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ffcb5c5ea7b3062ab5e88ef67b40e48?s=128&d=identicon&r=PG&f=1", "display_name": "Jnpijak", "link": "https://stackoverflow.com/users/6136006/jnpijak"}, "edited": false, "score": 0, "creation_date": 1459359506, "post_id": 36315626, "comment_id": 60255062, "body": "How is it stealing if it&#39;s open source? And all the tools are free to use?"}, {"owner": {"reputation": 1, "user_id": 6136006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ffcb5c5ea7b3062ab5e88ef67b40e48?s=128&d=identicon&r=PG&f=1", "display_name": "Jnpijak", "link": "https://stackoverflow.com/users/6136006/jnpijak"}, "edited": false, "score": 0, "creation_date": 1459359545, "post_id": 36315626, "comment_id": 60255090, "body": "Sorry what does unmanaged C++ program mean?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6136006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ffcb5c5ea7b3062ab5e88ef67b40e48?s=128&d=identicon&r=PG&f=1", "display_name": "Jnpijak", "link": "https://stackoverflow.com/users/6136006/jnpijak"}, "edited": false, "score": 0, "creation_date": 1459359846, "post_id": 36315963, "comment_id": 60255255, "body": "I have tried that and it returns this   C:\\Program Files (x86)\\Microsoft Visual Studio 14.0&gt;dumpbin /exports C:\\ti\\simpl elink\\zstack_home_1_02_02a_44539\\Tools\\Z-Tool\\TI.ZPI.dll Microsoft (R) COFF/PE Dumper Version 14.00.23506.0 Copyright (C) Microsoft Corporation.  All rights reserved.   Dump of file C:\\ti\\simplelink\\zstack_home_1_02_02a_44539\\Tools\\Z-Tool\\TI.&zwnj;&#8203;ZPI.dll   File Type: DLL    Summary          2000 .reloc        62000 .text      And it basically doesn&#39;t extract anything."}, {"owner": {"reputation": 54, "user_id": 5775927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bKixY.jpg?s=128&g=1", "display_name": "kgorham", "link": "https://stackoverflow.com/users/5775927/kgorham"}, "reply_to_user": {"reputation": 1, "user_id": 6136006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ffcb5c5ea7b3062ab5e88ef67b40e48?s=128&d=identicon&r=PG&f=1", "display_name": "Jnpijak", "link": "https://stackoverflow.com/users/6136006/jnpijak"}, "edited": false, "score": 0, "creation_date": 1459452153, "post_id": 36315963, "comment_id": 60305792, "body": "That just means it doesn&#39;t have a C functions available.  From you original question, it would appear that this is .NET assembly DLL then.  What happens when you register it, or is it already in the GAC? - from when you installed it.  Is it available as a assembly in Visual Studio?"}, {"owner": {"reputation": 1, "user_id": 6136006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ffcb5c5ea7b3062ab5e88ef67b40e48?s=128&d=identicon&r=PG&f=1", "display_name": "Jnpijak", "link": "https://stackoverflow.com/users/6136006/jnpijak"}, "edited": false, "score": 0, "creation_date": 1459519770, "post_id": 36315963, "comment_id": 60336606, "body": "Ah ok makes sense. How do I go about registering it? It is not available as an assembly in Visual Studio. It is given when you download a program called Ztool from Texas Instruments. Also depends.exe does not show the functions contained within the DLL despite it showing no missing packages."}], "tags": [], "owner": {"reputation": 54, "user_id": 5775927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bKixY.jpg?s=128&g=1", "display_name": "kgorham", "link": "https://stackoverflow.com/users/5775927/kgorham"}, "is_accepted": false, "score": -1, "last_activity_date": 1459359721, "creation_date": 1459359721, "answer_id": 36315963, "question_id": 36315626, "link": "https://stackoverflow.com/questions/36315626/how-do-i-import-classes-from-a-prebuilt-dll-in-either-c-or-c/36315963#36315963", "title": "How do I import classes from a prebuilt DLL in either C++ or C#?", "body": "<p>This blog describes how to create a lib from a DLL.</p>\n\n<p><a href=\"https://adrianhenke.wordpress.com/2008/12/05/create-lib-file-from-dll/\" rel=\"nofollow\">https://adrianhenke.wordpress.com/2008/12/05/create-lib-file-from-dll/</a></p>\n\n<p>I also use depends.exe to see what functions are available in the DLL.  Depends.exe was distributed in older Windows SDKs.</p>\n"}], "owner": {"reputation": 1, "user_id": 6136006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ffcb5c5ea7b3062ab5e88ef67b40e48?s=128&d=identicon&r=PG&f=1", "display_name": "Jnpijak", "link": "https://stackoverflow.com/users/6136006/jnpijak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1459359721, "creation_date": 1459358516, "last_edit_date": 1459359613, "question_id": 36315626, "link": "https://stackoverflow.com/questions/36315626/how-do-i-import-classes-from-a-prebuilt-dll-in-either-c-or-c", "title": "How do I import classes from a prebuilt DLL in either C++ or C#?", "body": "<p>I am wondering what the procedure is for importing classes from a DLL into a C++ program is? It is a prebuilt DLL made by TI so I don't have access to either the .h or .lib files. I looked around on SO and all of the solutions seem to require that you have developer access to the DLL. Which I am not as I don't work for TI. The loadlibrary function doesn't seem to want to open the DLL. The program fails to open it every time. I am at a loss now and any help is appreciated.</p>\n\n<p>To give context its the TI.ZPI.dll which is used by their program called Ztool to run and manage Zigbee networks. I am trying to access the functions so I can write my own version of Ztool that has more functionality. The literature for the ZPI says it can be implemented in Visual Basic, C#, C++, J# and JScript</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1459358079, "post_id": 36315450, "comment_id": 60254303, "body": "What is the actual error message?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1459358086, "post_id": 36315450, "comment_id": 60254308, "body": "Please edit your question to include the <i>complete</i> error message, in full, unedited, and with any possible informational notes."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1459358106, "post_id": 36315450, "comment_id": 60254320, "body": "You should use <code>override</code> if you  override."}, {"owner": {"reputation": 43, "user_id": 383245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895fb81893e65787b9f715591deb6a1b?s=128&d=identicon&r=PG", "display_name": "fatehmtd", "link": "https://stackoverflow.com/users/383245/fatehmtd"}, "edited": false, "score": 0, "creation_date": 1459358671, "post_id": 36315450, "comment_id": 60254636, "body": "i just wrote down this example just to be able to clearly expose the problem, the actual implementation is a very large code and uses just classes"}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1459358239, "post_id": 36315507, "comment_id": 60254409, "body": "Beaten me by 8 seconds! :) I will remove my answer."}, {"owner": {"reputation": 43, "user_id": 383245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895fb81893e65787b9f715591deb6a1b?s=128&d=identicon&r=PG", "display_name": "fatehmtd", "link": "https://stackoverflow.com/users/383245/fatehmtd"}, "edited": false, "score": 0, "creation_date": 1459358509, "post_id": 36315507, "comment_id": 60254540, "body": "could you please describe to me how to declare it inside the class declaration and outside of it, thank you"}, {"owner": {"reputation": 43, "user_id": 383245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895fb81893e65787b9f715591deb6a1b?s=128&d=identicon&r=PG", "display_name": "fatehmtd", "link": "https://stackoverflow.com/users/383245/fatehmtd"}, "edited": false, "score": 0, "creation_date": 1459359206, "post_id": 36315507, "comment_id": 60254902, "body": "perfect, thank you. do you have a link when i can find some more info on this issue?"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 7, "last_activity_date": 1459358915, "last_edit_date": 1459358915, "creation_date": 1459358148, "answer_id": 36315507, "question_id": 36315450, "link": "https://stackoverflow.com/questions/36315450/problems-when-overriding-a-method-from-a-templated-base-class/36315507#36315507", "title": "Problems when overriding a method from a templated base class", "body": "<p><code>virtual Point PointFactory::createType()</code> hides the base overloads.</p>\n\n<p>You may add <code>using BaseClass&lt;Point&gt;::createType;</code> to fix that:</p>\n\n<pre><code>class PointFactory : public BaseClass&lt;Point&gt;\n{\npublic:\n    using BaseClass&lt;Point&gt;::createType; // unhide overloads\n\n    Point createType() override { return BaseClass::createType(); }\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 383245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895fb81893e65787b9f715591deb6a1b?s=128&d=identicon&r=PG", "display_name": "fatehmtd", "link": "https://stackoverflow.com/users/383245/fatehmtd"}, "edited": false, "score": 0, "creation_date": 1459358875, "post_id": 36315702, "comment_id": 60254728, "body": "i just wrote down this example just to be able to clearly expose the problem, the actual implementation is a very large code and uses just classes"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 43, "user_id": 383245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895fb81893e65787b9f715591deb6a1b?s=128&d=identicon&r=PG", "display_name": "fatehmtd", "link": "https://stackoverflow.com/users/383245/fatehmtd"}, "edited": false, "score": 1, "creation_date": 1459359106, "post_id": 36315702, "comment_id": 60254848, "body": "@fatehmtd Unrelated errors distract from the actual problem, especially since both problems I describe could give you error messages similar to the overriding error. That&#39;s why it&#39;s so important to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>, and in the case of build errors create one containing only the error you&#39;re asking about."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1459358804, "creation_date": 1459358804, "answer_id": 36315702, "question_id": 36315450, "link": "https://stackoverflow.com/questions/36315450/problems-when-overriding-a-method-from-a-templated-base-class/36315702#36315702", "title": "Problems when overriding a method from a templated base class", "body": "<p>Besides the overriding, you have two other problems:</p>\n\n<ol>\n<li><p>You call the child-class function with an argument, but the child-class has no member function with that name that takes an integer argument.</p></li>\n<li><p><code>return T;</code>? If <code>T</code> was e.g. <code>int</code> then that would be <code>return int;</code>, how would you expect that to work? That will cause the functions in the base class not exist, and could give you a similar error to what you ask about once you <code>override</code> the function.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1459359592, "creation_date": 1459359592, "answer_id": 36315930, "question_id": 36315450, "link": "https://stackoverflow.com/questions/36315450/problems-when-overriding-a-method-from-a-templated-base-class/36315930#36315930", "title": "Problems when overriding a method from a templated base class", "body": "<p>It may be clearer to examine the error reported by g++:\n</p>\n\n<blockquote>\n<pre><code>g++ -std=c++11 -g -Wall -Wextra -Wwrite-strings    -c -o 36315450.o 36315450.cpp\n36315450.cpp: In function \u2018int main()\u2019:\n36315450.cpp:24:29: error: no matching function for call to \u2018PointFactory::createType(int)\u2019\n     auto p = pf.createType(5); // error here\n                             ^\n36315450.cpp:24:29: note: candidate is:\n36315450.cpp:18:19: note: virtual Point PointFactory::createType()\n     virtual Point createType() { return BaseClass::createType(); }\n                   ^\n36315450.cpp:18:19: note:   candidate expects 0 arguments, 1 provided\nmake: *** [36315450.o] Error 1\n</code></pre>\n</blockquote>\n\n<p>Because you override <code>createType()</code>, then <code>createType(int)</code> is shadowed.  It will not be accessible unless you re-implement it in your derived class, perhaps using <code>using</code>:</p>\n\n<pre><code>class PointFactory : public BaseClass&lt;Point&gt;\n{\npublic:\n    virtual Point createType() { return Point(0,0); }\n    using BaseClass&lt;Point&gt;::createType;\n};\n</code></pre>\n\n<p>I've made the overriding <code>createType()</code> do something other than pass through to the base class, as otherwise it would be redundant here!</p>\n"}], "owner": {"reputation": 43, "user_id": 383245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895fb81893e65787b9f715591deb6a1b?s=128&d=identicon&r=PG", "display_name": "fatehmtd", "link": "https://stackoverflow.com/users/383245/fatehmtd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 1, "accepted_answer_id": 36315507, "answer_count": 3, "score": 1, "last_activity_date": 1459359592, "creation_date": 1459357984, "last_edit_date": 1459359132, "question_id": 36315450, "link": "https://stackoverflow.com/questions/36315450/problems-when-overriding-a-method-from-a-templated-base-class", "title": "Problems when overriding a method from a templated base class", "body": "<p>In a class derived from a base templated class, I override a method <code>createType()</code>. When I try to access <code>createType(int)</code> of the derived class, the compiler says that it does not exist.  Why?</p>\n\n<pre><code>template &lt;class T&gt;\nclass BaseClass\n{\npublic:\n    virtual T createType(){ return T(); }\n    virtual T createType(int){ return T(); }\n};\n\nclass Point\n{\npublic:\n    float x, y;\n};\n\nclass PointFactory : public BaseClass&lt;Point&gt;\n{\npublic:\n    virtual Point createType() { return BaseClass::createType(); }\n};\n\nint main()\n{\n    PointFactory pf;\n    auto p = pf.createType(5); // error here\n    return 0;\n}\n</code></pre>\n\n<p>The error I get is</p>\n\n<blockquote>\n  <p>error C2660: 'PointFactory::createType' : function does not take 1 arguments</p>\n</blockquote>\n"}, {"tags": ["c++", "sfml"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1459358232, "post_id": 36315448, "comment_id": 60254405, "body": "Why is there a <code>:</code> in the path?"}, {"owner": {"reputation": 109, "user_id": 6057394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/85eb398fb20d59e61a6e579b4c14ddeb?s=128&d=identicon&r=PG&f=1", "display_name": "Luna", "link": "https://stackoverflow.com/users/6057394/luna"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1459358303, "post_id": 36315448, "comment_id": 60254435, "body": "Yes, I removed it just after submitting the question after I realized but the problem persists"}, {"owner": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 1, "creation_date": 1459358402, "post_id": 36315448, "comment_id": 60254495, "body": "\\  is a escape character, use  \\\\ . Common practice is to check if opening/reading a file succeeded before continuing. <code>loadFromFile</code> returns a bool to indicate success or failure."}, {"owner": {"reputation": 109, "user_id": 6057394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/85eb398fb20d59e61a6e579b4c14ddeb?s=128&d=identicon&r=PG&f=1", "display_name": "Luna", "link": "https://stackoverflow.com/users/6057394/luna"}, "edited": false, "score": 0, "creation_date": 1459358792, "post_id": 36315448, "comment_id": 60254697, "body": "Images\\aline.png gives me an error in the console &quot;Failed to load image Imagesline.png&quot; and some strange characters, Images\\\\aline.png displays the same blank black window with nothing to show :/"}, {"owner": {"reputation": 273, "user_id": 3366592, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/de1afda0395cf4dd43f227a2520f2f31?s=128&d=identicon&r=PG&f=1", "display_name": "user3366592", "link": "https://stackoverflow.com/users/3366592/user3366592"}, "edited": false, "score": 0, "creation_date": 1459359167, "post_id": 36315448, "comment_id": 60254879, "body": "I experienced similar rendering problems in SFML. I realized that it was caused by my very old integrated GPU or its drivers that could have some sort of bug. Check if you can draw a simple primitive."}, {"owner": {"reputation": 273, "user_id": 3366592, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/de1afda0395cf4dd43f227a2520f2f31?s=128&d=identicon&r=PG&f=1", "display_name": "user3366592", "link": "https://stackoverflow.com/users/3366592/user3366592"}, "edited": false, "score": 0, "creation_date": 1459360223, "post_id": 36315448, "comment_id": 60255485, "body": "Is it showing the error after correcting the file path to &#39;&quot;Images\\\\aline.png&quot;&#39;? Is the <code>loadFromFile()</code> function returning true or false? Are you running the program directly through the explorer or using an IDE &quot;Run&quot; button?"}, {"owner": {"reputation": 252, "user_id": 3573460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d232ac3fdc6012d3627976c253235a8?s=128&d=identicon&r=PG&f=1", "display_name": "Lasoloz", "link": "https://stackoverflow.com/users/3573460/lasoloz"}, "edited": false, "score": 0, "creation_date": 1459360346, "post_id": 36315448, "comment_id": 60255563, "body": "@Luna Does the second give some error? If it gives the same, then try putting image in the same directory, or try using &quot;/&quot;."}, {"owner": {"reputation": 109, "user_id": 6057394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/85eb398fb20d59e61a6e579b4c14ddeb?s=128&d=identicon&r=PG&f=1", "display_name": "Luna", "link": "https://stackoverflow.com/users/6057394/luna"}, "edited": false, "score": 0, "creation_date": 1459360711, "post_id": 36315448, "comment_id": 60255805, "body": "It (Images\\\\aline.png) doesn&#39;t give an error, but doesn&#39;t display anything but a black window, I also tried using &#39;/&#39;, and it also displays the same black window only, I&#39;m running it directly through the explorer"}, {"owner": {"reputation": 273, "user_id": 3366592, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/de1afda0395cf4dd43f227a2520f2f31?s=128&d=identicon&r=PG&f=1", "display_name": "user3366592", "link": "https://stackoverflow.com/users/3366592/user3366592"}, "edited": false, "score": 0, "creation_date": 1459367269, "post_id": 36315448, "comment_id": 60260073, "body": "What&#39;s your GPU? Have you tried to draw a primitive?"}, {"owner": {"reputation": 273, "user_id": 3366592, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/de1afda0395cf4dd43f227a2520f2f31?s=128&d=identicon&r=PG&f=1", "display_name": "user3366592", "link": "https://stackoverflow.com/users/3366592/user3366592"}, "edited": false, "score": 0, "creation_date": 1459400352, "post_id": 36315448, "comment_id": 60271709, "body": "I&#39;ll compile your code and check the program, but not now. Looks like you won&#39;t be able to use SFML on your current machine due to old graphics card/drivers. Could you tell me what&#39;s the model of your graphics card? You can determine it by using programs like GPU-Z."}, {"owner": {"reputation": 273, "user_id": 3366592, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/de1afda0395cf4dd43f227a2520f2f31?s=128&d=identicon&r=PG&f=1", "display_name": "user3366592", "link": "https://stackoverflow.com/users/3366592/user3366592"}, "edited": false, "score": 0, "creation_date": 1459443869, "post_id": 36315448, "comment_id": 60300986, "body": "Just confirmed my theory: I&#39;ve checked your program on my newer PC and it works as it should. However on my old notebook it does not. As I mentioned, the problem is caused by your graphics card or its drivers. You can try to update these drivers. If it doesn&#39;t help, you will have to change your development workstation or consider upgrading your computer (which probably won&#39;t be possible)."}, {"owner": {"reputation": 252, "user_id": 3573460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d232ac3fdc6012d3627976c253235a8?s=128&d=identicon&r=PG&f=1", "display_name": "Lasoloz", "link": "https://stackoverflow.com/users/3573460/lasoloz"}, "edited": false, "score": 0, "creation_date": 1459444670, "post_id": 36315448, "comment_id": 60301462, "body": "@Luna Could you tell me what version of sfml do you have?"}, {"owner": {"reputation": 109, "user_id": 6057394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/85eb398fb20d59e61a6e579b4c14ddeb?s=128&d=identicon&r=PG&f=1", "display_name": "Luna", "link": "https://stackoverflow.com/users/6057394/luna"}, "edited": false, "score": 0, "creation_date": 1459464455, "post_id": 36315448, "comment_id": 60311919, "body": "The graphics card is Intel(R) HD Graphics 4600. The problem isn&#39;t with my graphics card though, the laptop is only a year old, and the images are loaded successfully when I try loading them using allegro, I&#39;m considering just switching to it, but I don&#39;t know. Lasoloz my SFML version is 2.3.2."}, {"owner": {"reputation": 273, "user_id": 3366592, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/de1afda0395cf4dd43f227a2520f2f31?s=128&d=identicon&r=PG&f=1", "display_name": "user3366592", "link": "https://stackoverflow.com/users/3366592/user3366592"}, "edited": false, "score": 0, "creation_date": 1459489676, "post_id": 36315448, "comment_id": 60318705, "body": "I have an Intel graphics card too, but it&#39;s about eight years old. I think SFML should work on your card. Try to update the GPU drivers. <a href=\"http://www.intel.com/content/www/us/en/support/detect.html?iid=dc_iduu\" rel=\"nofollow noreferrer\">Click here</a> - this software should help you to find suitable drivers"}, {"owner": {"reputation": 109, "user_id": 6057394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/85eb398fb20d59e61a6e579b4c14ddeb?s=128&d=identicon&r=PG&f=1", "display_name": "Luna", "link": "https://stackoverflow.com/users/6057394/luna"}, "edited": false, "score": 0, "creation_date": 1459493387, "post_id": 36315448, "comment_id": 60320262, "body": "I checked the GPU drivers and they&#39;re up-to-date, still not working, can getting an older SFML version help?"}, {"owner": {"reputation": 273, "user_id": 3366592, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/de1afda0395cf4dd43f227a2520f2f31?s=128&d=identicon&r=PG&f=1", "display_name": "user3366592", "link": "https://stackoverflow.com/users/3366592/user3366592"}, "edited": false, "score": 0, "creation_date": 1459494919, "post_id": 36315448, "comment_id": 60321031, "body": "You can give it a try."}, {"owner": {"reputation": 109, "user_id": 6057394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/85eb398fb20d59e61a6e579b4c14ddeb?s=128&d=identicon&r=PG&f=1", "display_name": "Luna", "link": "https://stackoverflow.com/users/6057394/luna"}, "edited": false, "score": 0, "creation_date": 1459496257, "post_id": 36315448, "comment_id": 60321745, "body": "Tried SFML 2.0, still not working, I guess I&#39;ll just switch to allegro then, thanks for trying to help though &lt;3 :)."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 1, "last_activity_date": 1459363073, "creation_date": 1459363073, "answer_id": 36317056, "question_id": 36315448, "link": "https://stackoverflow.com/questions/36315448/sfml-loadfromfile-not-showing-image/36317056#36317056", "title": "SFML loadFromFile not showing image", "body": "<p>Two obvious things to change would be:</p>\n\n<ol>\n<li>Check the return value from <code>loadFromFile()</code> - it actually tells you if it thinks it succeeded.</li>\n<li>Your code <code>texture.loadFromFile(\"Images\\aline.png\");</code> should be <code>texture.loadFromFile(\"Images/aline.png\");</code>.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 109, "user_id": 6057394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/85eb398fb20d59e61a6e579b4c14ddeb?s=128&d=identicon&r=PG&f=1", "display_name": "Luna", "link": "https://stackoverflow.com/users/6057394/luna"}, "edited": false, "score": 0, "creation_date": 1461538306, "post_id": 36829140, "comment_id": 61230709, "body": "Oh, Wow! Thank you so so much! I didn&#39;t even think of that, I thought I could link all the libs and it would just use the correct libs lol ;D"}, {"owner": {"reputation": 383, "user_id": 4015798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8QKdl.jpg?s=128&g=1", "display_name": "MORTAL", "link": "https://stackoverflow.com/users/4015798/mortal"}, "reply_to_user": {"reputation": 109, "user_id": 6057394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/85eb398fb20d59e61a6e579b4c14ddeb?s=128&d=identicon&r=PG&f=1", "display_name": "Luna", "link": "https://stackoverflow.com/users/6057394/luna"}, "edited": false, "score": 0, "creation_date": 1461538671, "post_id": 36829140, "comment_id": 61230803, "body": "lol, we all wish the compiler will do it for us, but unfortunately we have to link them individually"}], "tags": [], "owner": {"reputation": 383, "user_id": 4015798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8QKdl.jpg?s=128&g=1", "display_name": "MORTAL", "link": "https://stackoverflow.com/users/4015798/mortal"}, "is_accepted": true, "score": 2, "last_activity_date": 1461535984, "last_edit_date": 1461535984, "creation_date": 1461533642, "answer_id": 36829140, "question_id": 36315448, "link": "https://stackoverflow.com/questions/36315448/sfml-loadfromfile-not-showing-image/36829140#36829140", "title": "SFML loadFromFile not showing image", "body": "<p>your code is ok. but make sure you don't mix Debug/Release libs. if you mixed them your pic won't be shown on screen. from comments the weird characters in console output means you indeed linked release libs with debug mode or vise-versa.</p>\n"}, {"tags": [], "owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "is_accepted": false, "score": 0, "last_activity_date": 1461537960, "last_edit_date": 1461537960, "creation_date": 1461537626, "answer_id": 36829722, "question_id": 36315448, "link": "https://stackoverflow.com/questions/36315448/sfml-loadfromfile-not-showing-image/36829722#36829722", "title": "SFML loadFromFile not showing image", "body": "<p>Change </p>\n\n<pre><code>texture.loadFromFile(\"Images\\aline.png\");\n</code></pre>\n\n<p>to</p>\n\n<pre><code>texture.loadFromFile(\"Images/aline.png\");\n                    //      ^\n</code></pre>\n\n<p>Or if on Windows, <code>\\\\</code> should work as well.</p>\n\n<pre><code>texture.loadFromFile(\"Images\\\\aline.png\");\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 6057394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/85eb398fb20d59e61a6e579b4c14ddeb?s=128&d=identicon&r=PG&f=1", "display_name": "Luna", "link": "https://stackoverflow.com/users/6057394/luna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1279, "favorite_count": 0, "accepted_answer_id": 36829140, "answer_count": 3, "score": 0, "last_activity_date": 1465431481, "creation_date": 1459357967, "last_edit_date": 1459358838, "question_id": 36315448, "link": "https://stackoverflow.com/questions/36315448/sfml-loadfromfile-not-showing-image", "title": "SFML loadFromFile not showing image", "body": "<p>I've been trying to output an image using SFML in C++ VS 2013, but when I use loadFromFile, it doesn't display anything, I've checked the working directories, it's the project directory, and the image is in a file in it. Here is the code:-</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;SFML/Graphics.hpp&gt;\nint main(){\nsf::VideoMode videomode(800, 800);\nsf::RenderWindow window(videomode, \"HEllO\");\nsf::Sprite sprite;\nsf::Texture texture;\ntexture.loadFromFile(\"Images\\aline.png\");\nsprite.setTexture(texture);\nsprite.setPosition(200, 200);\nwhile (window.isOpen()){\n    window.clear();\n    window.draw(sprite);\n    window.display();\n    sf::Event event;\n    while (window.pollEvent(event)){\n        if ((event.type == sf::Event::Closed))\n            window.close();\n        }\n\n    }\n}\n</code></pre>\n\n<p>The place where my image is:\nDocuments\\Visual Studio 2013\\Projects\\ConsoleApplication1\\ConsoleApplication1\\Images</p>\n\n<p>Working directory:-\n$(ProjectDir)</p>\n\n<p>If you have any idea why this is happening, please help me. I'm sorry if the question is a stupid/obvious one.</p>\n"}, {"tags": ["c++", "arrays", "string", "pointers", "sizeof"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1459357423, "post_id": 36315253, "comment_id": 60253855, "body": "<code>sizeof(other);</code> is invariant: The size of any pointer."}, {"owner": {"reputation": 1401, "user_id": 2737046, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5gIpP.jpg?s=128&g=1", "display_name": "perencia", "link": "https://stackoverflow.com/users/2737046/perencia"}, "edited": false, "score": 0, "creation_date": 1459358300, "post_id": 36315253, "comment_id": 60254432, "body": "What is capacity? Isn&#39;t the same as size? What are you exactly looking for?"}, {"owner": {"reputation": 551, "user_id": 3513260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJwnZ.png?s=128&g=1", "display_name": "Fearnbuster", "link": "https://stackoverflow.com/users/3513260/fearnbuster"}, "edited": false, "score": 0, "creation_date": 1459360570, "post_id": 36315253, "comment_id": 60255705, "body": "Are you able to alter the constructor&#39;s signature?"}, {"owner": {"reputation": 39, "user_id": 5911641, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3db22618ecb76204bfe3551adada4113?s=128&d=identicon&r=PG&f=1", "display_name": "TriMyc", "link": "https://stackoverflow.com/users/5911641/trimyc"}, "edited": false, "score": 0, "creation_date": 1459361655, "post_id": 36315253, "comment_id": 60256453, "body": "capacity is the max number of elements that can fit into the array whereas size is the actual number of elements in the array"}, {"owner": {"reputation": 39, "user_id": 5911641, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3db22618ecb76204bfe3551adada4113?s=128&d=identicon&r=PG&f=1", "display_name": "TriMyc", "link": "https://stackoverflow.com/users/5911641/trimyc"}, "edited": false, "score": 0, "creation_date": 1459361773, "post_id": 36315253, "comment_id": 60256521, "body": "Im fairly new to c++ so Im not even sure what altering the constructors signature means and therefore probably not something im allowed to do"}, {"owner": {"reputation": 551, "user_id": 3513260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJwnZ.png?s=128&g=1", "display_name": "Fearnbuster", "link": "https://stackoverflow.com/users/3513260/fearnbuster"}, "edited": false, "score": 0, "creation_date": 1459362126, "post_id": 36315253, "comment_id": 60256759, "body": "The signature is this: <code>NIUString::NIUString( const char* other)</code>  Are you able to alter that?  Did you read my answer? I believe that when your home-work instructions say: <b>Set the string capacity for the new object to the string size</b> it means to set the capacity of the string to the size (or, length) of the string, because it says just previous to that: <b>Set the string size for the new object to the length of the C string other.</b>"}, {"owner": {"reputation": 39, "user_id": 5911641, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3db22618ecb76204bfe3551adada4113?s=128&d=identicon&r=PG&f=1", "display_name": "TriMyc", "link": "https://stackoverflow.com/users/5911641/trimyc"}, "edited": false, "score": 0, "creation_date": 1459362696, "post_id": 36315253, "comment_id": 60257189, "body": "oh okay thanks for the clarification, in that case, no im not able to alter the constructors signature it was a given for the assignment so i kind of have to stick to it. but yeah not that you stated that it was telling me to set the capacity to the string size it definately makes sense now THANKS ALOT seriously i guess my brain is just fried from other classes i couldnt even catch logical errors anymore you guys are awesome."}, {"owner": {"reputation": 551, "user_id": 3513260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJwnZ.png?s=128&g=1", "display_name": "Fearnbuster", "link": "https://stackoverflow.com/users/3513260/fearnbuster"}, "edited": false, "score": 0, "creation_date": 1459363135, "post_id": 36315253, "comment_id": 60257496, "body": "I&#39;m glad to clear things up for you.  I know exactly how you feel.  I&#39;ve done that very same thing many times myself.  Usually your best bet for finding a solution is to take a break and come back to your project later, or to ask for help (as you did here).  Many times it takes a fresh perspective to spot errors."}], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 3513260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJwnZ.png?s=128&g=1", "display_name": "Fearnbuster", "link": "https://stackoverflow.com/users/3513260/fearnbuster"}, "edited": false, "score": 0, "creation_date": 1459359057, "post_id": 36315650, "comment_id": 60254828, "body": "I believe that you are using &quot;Capacity&quot; without initializing it."}, {"owner": {"reputation": 38, "user_id": 3259253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e49e5c0feb820512989c89be42f3be?s=128&d=identicon&r=PG", "display_name": "Aron Wolf", "link": "https://stackoverflow.com/users/3259253/aron-wolf"}, "reply_to_user": {"reputation": 551, "user_id": 3513260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJwnZ.png?s=128&g=1", "display_name": "Fearnbuster", "link": "https://stackoverflow.com/users/3513260/fearnbuster"}, "edited": false, "score": 0, "creation_date": 1459371235, "post_id": 36315650, "comment_id": 60262329, "body": "I asume hear that Capacity are something like a static variable, although Gerardo&#39;s answer is better"}], "tags": [], "owner": {"reputation": 38, "user_id": 3259253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e49e5c0feb820512989c89be42f3be?s=128&d=identicon&r=PG", "display_name": "Aron Wolf", "link": "https://stackoverflow.com/users/3259253/aron-wolf"}, "is_accepted": false, "score": 0, "last_activity_date": 1459358613, "creation_date": 1459358613, "answer_id": 36315650, "question_id": 36315253, "link": "https://stackoverflow.com/questions/36315253/determining-the-maximum-capacity-of-a-char-pointer-in-dynamic-memory-allocation/36315650#36315650", "title": "determining the maximum capacity of a char pointer in dynamic memory allocation", "body": "<p>Ok, sizeof only wok if you have access to the original pointer variable (that have to be static). Normally you use c++ classes for it and dont have to think about it. </p>\n\n<p>I think they want this code:</p>\n\n<pre><code>NIUString::NIUString( const char* other)\n{\n    Size = strlen(other);\n\n    if (Capacity == 0)\n    {\n        arrayPoint = nullptr;\n    }\n    if (Capacity &lt;= Size + 1)\n    {\n        Capacity = Size + 1;\n    }\n    arrayPoint = new char[Capacity];\n    strcpy(arrayPoint, other);\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 5911641, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3db22618ecb76204bfe3551adada4113?s=128&d=identicon&r=PG&f=1", "display_name": "TriMyc", "link": "https://stackoverflow.com/users/5911641/trimyc"}, "edited": false, "score": 0, "creation_date": 1459361941, "post_id": 36315725, "comment_id": 60256638, "body": "later on in the assignment we have to change the capacity of an object without changing the size. if we set the capacity equal to the string length wouldnt that also change the size later on? im not sure, its an honest question on my part im pretty new to this so im having a hard time with this"}, {"owner": {"reputation": 551, "user_id": 3513260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJwnZ.png?s=128&g=1", "display_name": "Fearnbuster", "link": "https://stackoverflow.com/users/3513260/fearnbuster"}, "reply_to_user": {"reputation": 39, "user_id": 5911641, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3db22618ecb76204bfe3551adada4113?s=128&d=identicon&r=PG&f=1", "display_name": "TriMyc", "link": "https://stackoverflow.com/users/5911641/trimyc"}, "edited": false, "score": 1, "creation_date": 1459362587, "post_id": 36315725, "comment_id": 60257101, "body": "Actually, no it wouldn&#39;t.  You see, changing the capacity to a different value is as simple as <code>Capacity = &quot;the new capacity&#39;s value&quot;</code>.  The &quot;size&quot; would only change with the capacity if you did: <code>Size = Capacity</code> or: <code>Size = &quot;the new capacity&#39;s value&quot;</code>.  You are not <b>linking</b> the capacity to the size in any way by simply assigning the the size to the capacity."}, {"owner": {"reputation": 39, "user_id": 5911641, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3db22618ecb76204bfe3551adada4113?s=128&d=identicon&r=PG&f=1", "display_name": "TriMyc", "link": "https://stackoverflow.com/users/5911641/trimyc"}, "edited": false, "score": 0, "creation_date": 1459362598, "post_id": 36315725, "comment_id": 60257109, "body": "wow that actually does make logical sense to me now, i guess i was confused with the wording of the assignment but not that you laid it out so well it definately seems like that was what was required of the assignment"}, {"owner": {"reputation": 551, "user_id": 3513260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJwnZ.png?s=128&g=1", "display_name": "Fearnbuster", "link": "https://stackoverflow.com/users/3513260/fearnbuster"}, "reply_to_user": {"reputation": 39, "user_id": 5911641, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3db22618ecb76204bfe3551adada4113?s=128&d=identicon&r=PG&f=1", "display_name": "TriMyc", "link": "https://stackoverflow.com/users/5911641/trimyc"}, "edited": false, "score": 0, "creation_date": 1459362925, "post_id": 36315725, "comment_id": 60257348, "body": "Oh yea?  I&#39;m glad I could help you.  If I&#39;m wrong, tell your teachers that some guy on the internet thought that this is what they intended, lol. :P  I have a favor to ask, if this did help you, could you up-vote my answer and maybe accept it as the answer to your question?  That would be great.  If I am wrong about what your teachers meant with their wording, then feel free to down vote my answer."}], "tags": [], "owner": {"reputation": 551, "user_id": 3513260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJwnZ.png?s=128&g=1", "display_name": "Fearnbuster", "link": "https://stackoverflow.com/users/3513260/fearnbuster"}, "is_accepted": false, "score": 0, "last_activity_date": 1459359437, "last_edit_date": 1459359437, "creation_date": 1459358892, "answer_id": 36315725, "question_id": 36315253, "link": "https://stackoverflow.com/questions/36315253/determining-the-maximum-capacity-of-a-char-pointer-in-dynamic-memory-allocation/36315725#36315725", "title": "determining the maximum capacity of a char pointer in dynamic memory allocation", "body": "<p><strong>\"Set the string capacity for the new object to the string size.\"</strong></p>\n\n<p>this is done after</p>\n\n<p><strong>\"Set the string size for the new object to the length of the C string other.\"</strong></p>\n\n<p>Therefore:</p>\n\n<ul>\n<li><p><strong>string size</strong> = <strong>string length</strong></p></li>\n<li><p><strong>string capacity</strong> = <strong>string size</strong></p></li>\n</ul>\n\n<p>then:</p>\n\n<ul>\n<li><strong>string capacity</strong> = <strong>string length</strong></li>\n</ul>\n\n<p>I think they are asking for this:</p>\n\n<pre><code>//secondary constructor\nNIUString::NIUString( const char* other)\n{\n    Capacity = Size = strlen(other);\n\n    if (Capacity == 0)\n    {\n        arrayPoint = nullptr;\n    }\n    else\n         arrayPoint = new char[Capacity];\n\n    strcpy(arrayPoint, other);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 551, "user_id": 3513260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJwnZ.png?s=128&g=1", "display_name": "Fearnbuster", "link": "https://stackoverflow.com/users/3513260/fearnbuster"}, "edited": false, "score": 0, "creation_date": 1459360515, "post_id": 36315792, "comment_id": 60255667, "body": "It may not matter, and I don&#39;t want to sound like a know-it-all by saying this, but if this is a homework assignment, then chances are that he can&#39;t alter the constructor&#39;s signature; only how the constructor performs it&#39;s task internally.  I may be wrong though, so let&#39;s ask him."}], "tags": [], "owner": {"reputation": 1437, "user_id": 4685116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cdca5.jpg?s=128&g=1", "display_name": "Ing. Gerardo S&#225;nchez", "link": "https://stackoverflow.com/users/4685116/ing-gerardo-s%c3%a1nchez"}, "is_accepted": false, "score": 2, "last_activity_date": 1459359722, "last_edit_date": 1459359722, "creation_date": 1459359136, "answer_id": 36315792, "question_id": 36315253, "link": "https://stackoverflow.com/questions/36315253/determining-the-maximum-capacity-of-a-char-pointer-in-dynamic-memory-allocation/36315792#36315792", "title": "determining the maximum capacity of a char pointer in dynamic memory allocation", "body": "<p>Try this, do what you want:</p>\n\n<p>1) Capacity autofilled</p>\n\n<p>2) Capacity > size</p>\n\n<p>BUT parameter other MUST NOT allocated using new:</p>\n\n<pre><code>template &lt;int _size&gt;\nNIUString::NIUString( const char (&amp;other)[_size])\n{\n    Capacity = _size;\n    Size = strlen(other);\n\n    if (Capacity == 0)\n    {\n        arrayPoint = nullptr;\n    }\n    else\n    {\n        arrayPoint = new char[Capacity];\n        strcpy(arrayPoint, other);\n    }\n}\n\nvoid main()\n{\n    char aux[20];// this works\n    strcpy(aux, \"test\");\n    NIUString niu(aux);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 837, "user_id": 5883767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PMXHe.jpg?s=128&g=1", "display_name": "MIbrah", "link": "https://stackoverflow.com/users/5883767/mibrah"}, "is_accepted": false, "score": 0, "last_activity_date": 1459359141, "creation_date": 1459359141, "answer_id": 36315795, "question_id": 36315253, "link": "https://stackoverflow.com/questions/36315253/determining-the-maximum-capacity-of-a-char-pointer-in-dynamic-memory-allocation/36315795#36315795", "title": "determining the maximum capacity of a char pointer in dynamic memory allocation", "body": "<p>Because the end point of the character array (which is dynamically-allocated) is not specified, sizeof will not do what you want.</p>\n"}], "owner": {"reputation": 39, "user_id": 5911641, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3db22618ecb76204bfe3551adada4113?s=128&d=identicon&r=PG&f=1", "display_name": "TriMyc", "link": "https://stackoverflow.com/users/5911641/trimyc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1343, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1459360781, "creation_date": 1459357334, "last_edit_date": 1459360781, "question_id": 36315253, "link": "https://stackoverflow.com/questions/36315253/determining-the-maximum-capacity-of-a-char-pointer-in-dynamic-memory-allocation", "title": "determining the maximum capacity of a char pointer in dynamic memory allocation", "body": "<p>First and foremost I want to be clear that this is a past homework assignment that I had but couldn't figure out and that I am still trying to wrap my head around. These are the instructions for the secondary constructor:</p>\n\n<p><strong>NIUString::NIUString(const char* other)</strong></p>\n\n<blockquote>\n  <p>This constructor for the NIUString class should initialize a new <code>NIUString</code> object to the C string <code>other</code>. The required logic is:<br>\n  Set the string size for the new object to the length of the C string <code>other</code>.<br>\n  Set the string capacity for the new object to the string size.<br>\n  If the string capacity is 0, set the string array pointer for the new object to <code>nullptr</code>. Otherwise, use the string array pointer for the new object to allocate an array of char. The number of elements in the new string array should be equal to the string capacity.<br>\n  Copy the characters of the C string <code>other</code> (up to, but not including the null character) into the string array.</p>\n</blockquote>\n\n<p>For my output i am supposed to get</p>\n\n<blockquote>\n  <p>testing second constructor<br>\n  s2: some text<br>\n  s2 size: 9<br>\n  s2 capacity: <strong>9</strong><br>\n  s2 is not empty</p>\n</blockquote>\n\n<p>but instead i get...</p>\n\n<blockquote>\n  <p>testing second constructor<br>\n  s2: some text<br>\n  s2 size: 9<br>\n  s2 capacity: <strong>8</strong><br>\n  s2 is not empty  </p>\n</blockquote>\n\n<p>After doing research I learned that this is because you can't use <code>sizeof</code> on a pointer, as it will only give you the size of the pointer in memory, not the actual size of the string capacity.</p>\n\n<p>Here is my code for the method I wrote</p>\n\n<pre><code>//secondary constructor\nNIUString::NIUString( const char* other)\n{\n    Capacity = sizeof(other);\n    Size = strlen(other);\n\n    if (Capacity == 0)\n    {\n        arrayPoint = nullptr;\n    }\n    else\n        arrayPoint = new char[Capacity];\n    strcpy(arrayPoint, other);\n\n}\n</code></pre>\n\n<p>Anyway my question is: what is the way in which this can be done? I have been working on this for a bit but haven't found an example similar enough to mine to be of any use. If anyone can guide me in the right direction that would be very useful. </p>\n\n<p>This is the code that I am using to test my method/class; everything else works fine except for the capacity of the array.</p>\n\n<pre><code>NIUString s2 = \"some text\";\n\ncout &lt;&lt; \"s2: \" &lt;&lt; s2 &lt;&lt; endl;\ncout &lt;&lt; \"s2 size: \" &lt;&lt; s2.size() &lt;&lt; endl;\ncout &lt;&lt; \"s2 capacity: \" &lt;&lt; s2.capacity() &lt;&lt; endl;\ncout &lt;&lt; \"s2 is \" &lt;&lt; ((s2.empty()) ? \"empty\\n\" : \"not empty\\n\");\ncout &lt;&lt; endl &lt;&lt;endl &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "debugging", "visual-studio-2015"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1459357277, "post_id": 36315193, "comment_id": 60253762, "body": "Did you try wrapping the path in quotes like you would do in the command line or a shortcut target?"}, {"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "reply_to_user": {"reputation": 37651, "user_id": 61289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34b5cae57e0dd170114dba444e37852?s=128&d=identicon&r=PG", "display_name": "Logan Capaldo", "link": "https://stackoverflow.com/users/61289/logan-capaldo"}, "edited": false, "score": 0, "creation_date": 1459357415, "post_id": 36315193, "comment_id": 60253849, "body": "@LoganCapaldo: you make my day! reply and you get +1!!!"}], "answers": [{"tags": [], "owner": {"reputation": 37651, "user_id": 61289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34b5cae57e0dd170114dba444e37852?s=128&d=identicon&r=PG", "display_name": "Logan Capaldo", "link": "https://stackoverflow.com/users/61289/logan-capaldo"}, "is_accepted": true, "score": 1, "last_activity_date": 1459357833, "creation_date": 1459357833, "answer_id": 36315407, "question_id": 36315193, "link": "https://stackoverflow.com/questions/36315193/cant-i-use-empty-space-char-as-target-path-on-debugging/36315407#36315407", "title": "Can&#39;t I use &quot;empty space&quot; char as Target Path on Debugging?", "body": "<p>You can use quotes to make sure that the path gets parsed as a single argument, as long as the program you're debugging uses the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/17w5ykft(v=vs.85).aspx\" rel=\"nofollow\">typical rules on windows</a> for command line parsing.</p>\n\n<p>E.g.</p>\n\n<p><code>\"$(TargetPath)\" /example</code></p>\n"}], "owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 36315407, "answer_count": 1, "score": 0, "last_activity_date": 1459357833, "creation_date": 1459357169, "question_id": 36315193, "link": "https://stackoverflow.com/questions/36315193/cant-i-use-empty-space-char-as-target-path-on-debugging", "title": "Can&#39;t I use &quot;empty space&quot; char as Target Path on Debugging?", "body": "<p>I'm trying to load a DLL I'm making with Visual Studio 2015 using a 3rd party software for debug it. In this case, I'm creating a VST instrument and load it with SaviHost, following <a href=\"http://www.martin-finke.de/blog/articles/audio-plugins-004-vst-and-au/#windows_debugging_setup\" rel=\"nofollow noreferrer\">this tutorial</a>.</p>\n\n<p>This is my current setup:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jmBmt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jmBmt.png\" alt=\"enter image description here\"></a></p>\n\n<p>the Target Path is <code>D:\\Google Drive\\Development\\WDL-OL\\IPlugExamples\\DefaultProject\\build-win\\vst2\\Win32\\bin\\DefaultProject.dll</code>.</p>\n\n<p>How you can see, there is \"empty space\" in the path, and I think this make problem with VS, since when I try to F5 it, I see this message:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qd7z2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qd7z2.png\" alt=\"enter image description here\"></a></p>\n\n<p>Google.dll makes no sense. It seems cut the path and \"fail\" loading a different resource? How can I fix this trouble?</p>\n\n<p>I'd like to not move my whole workspace...</p>\n"}, {"tags": ["c++", "glm-math"], "comments": [{"owner": {"reputation": 120111, "user_id": 469935, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/14lYV.jpg?s=128&g=1", "display_name": "Armen Tsirunyan", "link": "https://stackoverflow.com/users/469935/armen-tsirunyan"}, "edited": false, "score": 0, "creation_date": 1459356388, "post_id": 36314895, "comment_id": 60253175, "body": "In this particular example the problem is that something is empty, therefore you cannot access something[i]. Is that the problem? Did you simply forget to give an initial size to something?"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1459356508, "post_id": 36314895, "comment_id": 60253236, "body": "&quot;Doesn&#39;t work apparently&quot;, meaning what? Compilation error? Runtime error?"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 6115615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e5b926eb90cb9056ef83de06132b46b0?s=128&d=identicon&r=PG&f=1", "display_name": "Riggs", "link": "https://stackoverflow.com/users/6115615/riggs"}, "edited": false, "score": 0, "creation_date": 1459357087, "post_id": 36315025, "comment_id": 60253635, "body": "Aha... Well, my C++ is a bit sucky I guess. Thanks for the help, mate! :)"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 89, "user_id": 6115615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e5b926eb90cb9056ef83de06132b46b0?s=128&d=identicon&r=PG&f=1", "display_name": "Riggs", "link": "https://stackoverflow.com/users/6115615/riggs"}, "edited": false, "score": 0, "creation_date": 1459357618, "post_id": 36315025, "comment_id": 60253983, "body": "@Riggs, for the winner of the code-density award , <a href=\"http://pastebin.com/mUaketTh\" rel=\"nofollow noreferrer\">see here</a>. Best of luck."}], "tags": [], "owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "is_accepted": true, "score": 0, "last_activity_date": 1459356621, "creation_date": 1459356621, "answer_id": 36315025, "question_id": 36314895, "link": "https://stackoverflow.com/questions/36314895/copy-y-components-of-a-vector/36315025#36315025", "title": "Copy y-components of a vector", "body": "<p>You need to make sure the size of the vector grows along with the elements you push into them. The <code>[]</code> operator is only an accessor.</p>\n\n<pre><code>std::vector &lt;int&gt; something;\nsomething.resize(example.size());\n\nfor (int i = 0; i &lt; example.size(); i++)\n{\n    something[i] = example[i].y;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 0, "last_activity_date": 1459356622, "creation_date": 1459356622, "answer_id": 36315028, "question_id": 36314895, "link": "https://stackoverflow.com/questions/36314895/copy-y-components-of-a-vector/36315028#36315028", "title": "Copy y-components of a vector", "body": "<pre><code>std::vector &lt;int&gt; something;\n\nfor (int i = 0; i &lt; example.size(); i++)\n{\n    something[i] = example[i].y;\n}\n</code></pre>\n\n<p>Two issues:</p>\n\n<ol>\n<li><code>glm::vec3</code> is a floating-point type, and <code>example[i].y</code> is going to return a floating point value. And if these are normalized model vertices, they're very likely all in the range <code>[-1,1]</code>, which means that <code>something[i]</code> would always be assigned <code>-1</code>, <code>0</code>, or <code>1</code>.</li>\n<li><code>something</code> never has its memory initialized in the code snippet you're providing. That will cause runtime crashes. You should be writing something like </li>\n</ol>\n\n<p><code>std::vector&lt;float&gt; something(example.size());</code></p>\n"}], "owner": {"reputation": 89, "user_id": 6115615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e5b926eb90cb9056ef83de06132b46b0?s=128&d=identicon&r=PG&f=1", "display_name": "Riggs", "link": "https://stackoverflow.com/users/6115615/riggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 36315025, "answer_count": 2, "score": 0, "last_activity_date": 1459360153, "creation_date": 1459356250, "last_edit_date": 1459360153, "question_id": 36314895, "link": "https://stackoverflow.com/questions/36314895/copy-y-components-of-a-vector", "title": "Copy y-components of a vector", "body": "<p>I want to copy the y-components of a vector of the type: <code>std::vector &lt;glm::vec3&gt; example</code> because I can't access only the y-components of this vector by doing something like <code>example.size().y...</code>. So, I assume I have to copy the content of the y-components to another another vector/array, but is there a way to do that? I was thinking of something like:</p>\n\n<pre><code>std::vector &lt;int&gt; something;\n\n    for (int i = 0; i &lt; example.size(); i++)\n    {\n        something[i] = example[i].y;\n    }\n</code></pre>\n\n<p>but it doesn't work apparently. </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "vector", "debug-information"], "comments": [{"owner": {"reputation": 7242, "user_id": 109019, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/266408e128b44b980a953eda085d38a2?s=128&d=identicon&r=PG", "display_name": "Salgar", "link": "https://stackoverflow.com/users/109019/salgar"}, "edited": false, "score": 1, "creation_date": 1459356619, "post_id": 36314886, "comment_id": 60253320, "body": "An exception is being thrown presumably. Just run whatever you&#39;re running in a debugger and it will break on the exception (assuming you&#39;re not catching it) then look at the stack trace."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1459356895, "post_id": 36314886, "comment_id": 60253505, "body": "What development environment are you running under?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1459356926, "post_id": 36314886, "comment_id": 60253530, "body": "Use a debug build or browse for &#39;C++ stackoverflow stack trace&#39; if you have a release build, only"}, {"owner": {"reputation": 354, "user_id": 4586851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SFVGU.jpg?s=128&g=1", "display_name": "Robmotron", "link": "https://stackoverflow.com/users/4586851/robmotron"}, "edited": false, "score": 0, "creation_date": 1459356985, "post_id": 36314886, "comment_id": 60253560, "body": "I am running on Linux. This is all command line code used for scientific computing."}, {"owner": {"reputation": 354, "user_id": 4586851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SFVGU.jpg?s=128&g=1", "display_name": "Robmotron", "link": "https://stackoverflow.com/users/4586851/robmotron"}, "edited": false, "score": 0, "creation_date": 1459357090, "post_id": 36314886, "comment_id": 60253638, "body": "I am currently trying to use GDB to see if that gives me any more information. I should have said above that this framwork uses python as a UI and then calls c++ libraries and classes to do all the heavy lifting algorithms."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1459357141, "post_id": 36314886, "comment_id": 60253671, "body": "A nice tool for your issue is &#39;valgrind&#39; (but ignore the python related output)"}, {"owner": {"reputation": 1589, "user_id": 5652483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bJiX1.jpg?s=128&g=1", "display_name": "Scott Hutchinson", "link": "https://stackoverflow.com/users/5652483/scott-hutchinson"}, "edited": false, "score": 0, "creation_date": 1459358123, "post_id": 36314886, "comment_id": 60254331, "body": "For those with a similar problem, but who are using Visual Studio, you could try right-clicking the function definition and choosing View Call Hierarchy to see all the places where it is called from."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1459362328, "post_id": 36314886, "comment_id": 60256898, "body": "Fix this first: <code>Conditional jump or move depends on uninitialised value(s)</code>.  After that, you might ensure no C++ exception is bubbling to python."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1459371547, "post_id": 36314886, "comment_id": 60262531, "body": "Use <code>catch throw</code> in gdb to break where the exception is thrown."}], "owner": {"reputation": 354, "user_id": 4586851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SFVGU.jpg?s=128&g=1", "display_name": "Robmotron", "link": "https://stackoverflow.com/users/4586851/robmotron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1459360822, "creation_date": 1459356222, "last_edit_date": 1459360822, "question_id": 36314886, "link": "https://stackoverflow.com/questions/36314886/c-find-where-a-function-is-being-called-from-to-find-a-vector-range-check-erro", "title": "C++ find where a function is being called from to find a vector range check error", "body": "<p>I am running into a range check error from a vector that I am having trouble pin pointing. I am working in a VERY large c++ framework that is not really very well designed. Python is used as a UI which then calls c++ functions/classes to do all the heavy lifting. So the actual command I run is 'python thing.py --option1 etc...'. There is a function that returns an object that it finds by an index in a vector. There are two vectors that it can use based on a bool that is set. To be more concrete, I have something like:</p>\n\n<pre><code>object getObject(int i, bool trig=false){\n    if(trig) return vector1.at(i);\n    return vector2.at(i);\n}\n</code></pre>\n\n<p>The problem is that the vectors will be of different lengths so if you either give it the wrong index or you forget to set the 'trig' bool, there is a good chance you will go out of range. This function or something like it is called thousands of times across many different files so I am having trouble finding where this range check error is actually coming from. Currently I have been either commenting out blocks of code, or putting in print outs to try to find where the code gets before it crashes but this is proving quite difficult considering the number of places I have to do this. </p>\n\n<p>Is there an easy way to print out where this function was called from when I get the range check error? Stack trace or something like that? I am not really familiar with things like this.</p>\n\n<p><strong>Update:</strong>\nI have tried using GDB with a command like:</p>\n\n<pre><code>gdb -ex  r --args python fakes.py --datasets data --dir outdir\n</code></pre>\n\n<p>I see the same error I always get which looks like:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"fakes.py\", line 299, in &lt;module&gt;\nmain(options,args)\nFile \"fakes.py\", line 240, in main\ndriver.submit(job, submitDir)\nException: void EL::Driver::submit(const EL::Job&amp; job,\nconst string&amp; location) =&gt;\nDataVector::at range check (C++ exception)\n</code></pre>\n\n<p>Then it drops me into the GDB command line. If I type bt (which seems to be the right command to get the stack trace) I get the message \"No stack.\"</p>\n\n<p>I tried running Valgrind with this command too but I am not seeing anything useful in it. I could just be missing something however since I am new to valgrind. The following is the output of valgrind around where the error appears:</p>\n\n<pre><code>==344722== Conditional jump or move depends on uninitialised value(s)\n==344722==    at 0xE80FEC5: TObject::~TObject() (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libCore.so)\n==344722==    by 0x25437C52: EL::Driver::submitOnly(EL::Job const&amp;, std::string const&amp;) const (Driver.cxx:103)\n==344722==    by 0x25437F88: EL::Driver::submit(EL::Job const&amp;, std::string const&amp;) const (Driver.cxx:84)\n==344722==    by 0x1CA83031: ???\n==344722==    by 0xFFE6F7E: TClingCallFunc::exec(void*, void*) const (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libCling.so)\n==344722==    by 0xD1AA1AE: PyROOT::TVoidExecutor::Execute(long, void*, PyROOT::TCallContext*) (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libPyROOT.so)\n==344722==    by 0xD1CB0CB: PyROOT::TMethodHolder::CallSafe(void*, long, PyROOT::TCallContext*) (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libPyROOT.so)\n==344722==    by 0xD1C9DB9: PyROOT::TMethodHolder::Execute(void*, long, PyROOT::TCallContext*) (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libPyROOT.so)\n==344722==    by 0xD1C8A24: PyROOT::TMethodHolder::Call(PyROOT::ObjectProxy*, _object*, _object*, PyROOT::TCallContext*) (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libPyROOT.so)\n==344722==    by 0xD1E35A4: PyROOT::(anonymous namespace)::mp_call(PyROOT::MethodProxy*, _object*, _object*) (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libPyROOT.so)\n==344722==    by 0x4C61B62: PyObject_Call (abstract.c:2529)\n==344722==    by 0x4D161AD: PyEval_EvalFrameEx (ceval.c:4251)\n==344722==\nTraceback (most recent call last):\n  File \"fakes.py\", line 299, in &lt;module&gt;\n    main(options,args)\n  File \"fakes.py\", line 240, in main\n    driver.submit(job, submitDir)\nException: void EL::Driver::submit(const EL::Job&amp; job, const string&amp; location) =&gt;\n    DataVector::at range check (C++ exception)\n==344722== Invalid read of size 4\n==344722==    at 0x4CB08F3: PyObject_Free (obmalloc.c:994)\n==344722==    by 0x4D55452: collect (gcmodule.c:821)\n==344722==    by 0x4D55D27: PyGC_Collect (gcmodule.c:1440)\n==344722==    by 0x4D3E018: Py_Finalize (pythonrun.c:449)\n==344722==    by 0x4D53F8E: Py_Main (main.c:665)\n==344722==    by 0x3038C1ED5C: (below main) (in /lib64/libc-2.12.so)\n==344722==  Address 0x682d020 is 16 bytes before a block of size 48 alloc'd\n==344722==    at 0x4A085FC: operator new(unsigned long) (vg_replace_malloc.c:298)\n==344722==    by 0x10B7DD41: clang::ASTReader::ReadDeclContextStorage(clang::serialization::ModuleFile&amp;, llvm::BitstreamCursor&amp;, std::pair&lt;unsigned long, unsigned long&gt; const&amp;, clang::serialization::DeclContextInfo&amp;) (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libCling.so)\n==344722==    by 0x10BD8CCC: clang::ASTReader::ReadDeclRecord(unsigned int) (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libCling.so)\n==344722==    by 0x10B82DCC: clang::ASTReader::GetDecl(unsigned int) (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libCling.so)\n==344722==    by 0x11036DED: clang::MultiplexExternalSemaSource::GetExternalDecl(unsigned int) (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libCling.so)\n==344722==    by 0x1114F052: clang::ClassTemplateDecl::LoadLazySpecializations() const (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libCling.so)\n==344722==    by 0x1114F078: clang::ClassTemplateDecl::getSpecializations() const (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libCling.so)\n==344722==    by 0x11151209: clang::ClassTemplateDecl::findSpecialization(llvm::ArrayRef&lt;clang::TemplateArgument&gt;, void*&amp;) (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libCling.so)\n==344722==    by 0x10F55800: clang::Sema::CheckTemplateIdType(clang::TemplateName, clang::SourceLocation, clang::TemplateArgumentListInfo&amp;) (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libCling.so)\n==344722==    by 0x10FCC354: clang::TreeTransform&lt;(anonymous namespace)::TemplateInstantiator&gt;::TransformTemplateSpecializationType(clang::TypeLocBuilder&amp;, clang::TemplateSpecializationTypeLoc, clang::TemplateName) (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libCling.so)\n==344722==    by 0x10FB8805: clang::TreeTransform&lt;(anonymous namespace)::TemplateInstantiator&gt;::TransformType(clang::TypeLocBuilder&amp;, clang::TypeLoc) (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libCling.so)\n==344722==    by 0x10FB8DFC: clang::TreeTransform&lt;(anonymous namespace)::TemplateInstantiator&gt;::TransformType(clang::TypeLocBuilder&amp;, clang::TypeLoc) (in /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/x86_64/root/6.04.12-x86_64-slc6-gcc49-opt/lib/libCling.so)\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 2345, "user_id": 956531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bc58919dfd1e89d9d5be71a9c68dd9d?s=128&d=identicon&r=PG", "display_name": "alediaferia", "link": "https://stackoverflow.com/users/956531/alediaferia"}, "edited": false, "score": 1, "creation_date": 1459355912, "post_id": 36314493, "comment_id": 60252845, "body": "Are you positive <code>window-&gt;scale != 0</code>? Also, bare in mind that QDesktopWidget needs OS-specific calls to work. Is your OS supported by QDesktopWidget? Also, use <code>QApplication::desktop()</code> rather than instantiate your own instance."}, {"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 1, "creation_date": 1459356046, "post_id": 36314493, "comment_id": 60252928, "body": "You should read the documentation before posting questions on the internet: <a href=\"http://doc.qt.io/qt-5.6/qdesktopwidget.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5.6/qdesktopwidget.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 38, "user_id": 3259253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e49e5c0feb820512989c89be42f3be?s=128&d=identicon&r=PG", "display_name": "Aron Wolf", "link": "https://stackoverflow.com/users/3259253/aron-wolf"}, "is_accepted": true, "score": 2, "last_activity_date": 1459355691, "creation_date": 1459355691, "answer_id": 36314713, "question_id": 36314493, "link": "https://stackoverflow.com/questions/36314493/qt-always-says-that-my-screen-size-is-0/36314713#36314713", "title": "Qt always says that my screen size is 0", "body": "<p>It is much more easy. Full Screen is a flag. You can set it as follows:</p>\n\n<pre><code>my_widget-&gt;setWindowState(Qt::WindowFullScreen);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 751, "user_id": 2638316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defbb7b163e00a4ca29087ea8cdbfe43?s=128&d=identicon&r=PG", "display_name": "Blueman", "link": "https://stackoverflow.com/users/2638316/blueman"}, "is_accepted": false, "score": 1, "last_activity_date": 1459356451, "creation_date": 1459356451, "answer_id": 36314968, "question_id": 36314493, "link": "https://stackoverflow.com/questions/36314493/qt-always-says-that-my-screen-size-is-0/36314968#36314968", "title": "Qt always says that my screen size is 0", "body": "<p>You can simply open main window in full screen mode by calling <code>showFullScreen()</code> instead <code>show()</code>:    </p>\n\n<pre><code>#include \"MainWindow.h\"\n#include &lt;QApplication&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    MainWindow w;\n    w.showFullScreen();\n\n    return a.exec();\n}\n</code></pre>\n\n<p>There is no need to do it manually.</p>\n"}], "owner": {"reputation": 544, "user_id": 1563074, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b16f591204b97e90e811ac664b176e9b?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1563074/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 36314713, "answer_count": 2, "score": 0, "last_activity_date": 1459356451, "creation_date": 1459355065, "question_id": 36314493, "link": "https://stackoverflow.com/questions/36314493/qt-always-says-that-my-screen-size-is-0", "title": "Qt always says that my screen size is 0", "body": "<p>I have an application that I am trying to make full screen. I have seen on other posts that if I do what in my code, it should give me the size of the screen.</p>\n\n<pre><code>double MainSpace::getScopeX(paintBox* window){\n  QDesktopWidget temp;\n  QRect size = temp.screenGeometry(window);\n  return size.width() * window-&gt;scale;\n}\n</code></pre>\n\n<p>I have a window with a value that changes (scale) so I pass a pointer for that.</p>\n\n<p>Then I use QDesktopWidget::screenGeometry() to get the screen geometry of my window, but the width() and height() methods always return 0! I thought maybe the screen didn't exist in a screen yet so maybe it was returning 0 because there was nothing there, but screenCount() successfully returns 1, so I don't know what's going on. Why does my method always return 0?</p>\n"}, {"tags": ["c++", "visual-studio", "windows-xp"], "comments": [{"owner": {"reputation": 141, "user_id": 5626372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98d1e2bd5dc679194a0f9efcae6d641c?s=128&d=identicon&r=PG&f=1", "display_name": "ce_nort", "link": "https://stackoverflow.com/users/5626372/ce-nort"}, "edited": false, "score": 0, "creation_date": 1459354684, "post_id": 36314217, "comment_id": 60252036, "body": "Make sure you are deploying the dlls with the executable: <a href=\"http://stackoverflow.com/questions/11305633/xxxxxx-exe-is-not-a-valid-win32-application\" title=\"xxxxxx exe is not a valid win32 application\">stackoverflow.com/questions/11305633/&hellip;</a>"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1459355387, "post_id": 36314217, "comment_id": 60252469, "body": "You did these steps in the wrong order, the platform toolset is a per-platform setting.  Or in other words, you only changed the setting for x64, not for Win32.  Just do it again.  And don&#39;t forget to update the Release configuration as well."}, {"owner": {"reputation": 37, "user_id": 6083730, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-yLdsebawaq4/AAAAAAAAAAI/AAAAAAAACf0/WHfM2Z2ZHR4/photo.jpg?sz=128", "display_name": "Jacob", "link": "https://stackoverflow.com/users/6083730/jacob"}, "reply_to_user": {"reputation": 141, "user_id": 5626372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98d1e2bd5dc679194a0f9efcae6d641c?s=128&d=identicon&r=PG&f=1", "display_name": "ce_nort", "link": "https://stackoverflow.com/users/5626372/ce-nort"}, "edited": false, "score": 0, "creation_date": 1459356948, "post_id": 36314217, "comment_id": 60253543, "body": "@ce_nort where can I find the msvcr100.dll ? just search it in c:?"}, {"owner": {"reputation": 37, "user_id": 6083730, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-yLdsebawaq4/AAAAAAAAAAI/AAAAAAAACf0/WHfM2Z2ZHR4/photo.jpg?sz=128", "display_name": "Jacob", "link": "https://stackoverflow.com/users/6083730/jacob"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1459357376, "post_id": 36314217, "comment_id": 60253822, "body": "@HansPassant Hi, thanks for your advice. I swapped the two steps and set the release config to win32, I still have the same error."}, {"owner": {"reputation": 335, "user_id": 2766120, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100001203470432/picture?type=large", "display_name": "Luigi Mackenzie C. Brito", "link": "https://stackoverflow.com/users/2766120/luigi-mackenzie-c-brito"}, "edited": false, "score": 0, "creation_date": 1473781899, "post_id": 36314217, "comment_id": 66267706, "body": "I have the same issue. I was able to make it work last night. I forgot now.   Three things you need as far as I can remember.  Toolset to XP CodeGeneration to Multi-threaded Platform = x86 Statically Link Libraries"}, {"owner": {"reputation": 320, "user_id": 2527775, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2abfc3b3a08cf4b9d55d0061c4bc3e38?s=128&d=identicon&r=PG", "display_name": "Freitags", "link": "https://stackoverflow.com/users/2527775/freitags"}, "edited": false, "score": 0, "creation_date": 1498849252, "post_id": 36314217, "comment_id": 76687283, "body": "Statically linking libraries is not necessary."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 6083730, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-yLdsebawaq4/AAAAAAAAAAI/AAAAAAAACf0/WHfM2Z2ZHR4/photo.jpg?sz=128", "display_name": "Jacob", "link": "https://stackoverflow.com/users/6083730/jacob"}, "edited": false, "score": 0, "creation_date": 1459357159, "post_id": 36314370, "comment_id": 60253682, "body": "I noticed &quot;Visual Studio 2012 \u2013 Windows XP (v110_xp)&quot; is on the older version of visual studio. visual studio 2015 actually automatically  help me to update SDK kits. So I feel like sdk version should not be an issue. or there maybe a way to set the targeting kit?"}], "tags": [], "owner": {"reputation": 190, "user_id": 1693881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1f307d50eb1da6b1ffa341a1482401c?s=128&d=identicon&r=PG", "display_name": "And Wan", "link": "https://stackoverflow.com/users/1693881/and-wan"}, "is_accepted": false, "score": 1, "last_activity_date": 1580722537, "last_edit_date": 1580722537, "creation_date": 1459354683, "answer_id": 36314370, "question_id": 36314217, "link": "https://stackoverflow.com/questions/36314217/is-not-a-valid-win32-application-on-windows-xp/36314370#36314370", "title": "&quot;is not a valid win32 application&quot; on windows xp", "body": "<p>The main problem is the Windows SDK that you are using.</p>\n\n<p>Most recent Windows SDK have a compatibility list that will go far back to Windows 7.</p>\n\n<p>Here are two useful links:</p>\n\n<ul>\n<li><a href=\"https://blogs.msdn.microsoft.com/vcblog/2015/07/24/setup-changes-in-visual-studio-2015-affecting-c-developers/\" rel=\"nofollow noreferrer\">https://blogs.msdn.microsoft.com/vcblog/2015/07/24/setup-changes-in-visual-studio-2015-affecting-c-developers/</a></li>\n<li><a href=\"https://stackoverflow.com/questions/34488549/targetting-windows-xp-from-visual-studio-2015-enterprise-update-1\">Targetting Windows xp from visual studio 2015 enterprise update 1</a></li>\n</ul>\n"}], "owner": {"reputation": 37, "user_id": 6083730, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-yLdsebawaq4/AAAAAAAAAAI/AAAAAAAACf0/WHfM2Z2ZHR4/photo.jpg?sz=128", "display_name": "Jacob", "link": "https://stackoverflow.com/users/6083730/jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3742, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1580722537, "creation_date": 1459354200, "question_id": 36314217, "link": "https://stackoverflow.com/questions/36314217/is-not-a-valid-win32-application-on-windows-xp", "title": "&quot;is not a valid win32 application&quot; on windows xp", "body": "<p>Phenomenon: </p>\n\n<p>Build a c++ program using visual studio express 2015 on windows 7 platform. Copy the executable file to xp system, cannot run with the error\"not a valid win32 application\"</p>\n\n<p>Have tried two things</p>\n\n<ol>\n<li><p>go to \"configuration properties\" and set the \"Platform Toolset\" to \"visual studio 2015 - windows xp(v140_xp)\"</p></li>\n<li><p>go to \"configuration Manager\" and set the Platform to \"Win32\" (instead of x64) after these steps, still gives me same problem.</p></li>\n</ol>\n\n<p>anyone knows what is the root cause of this problem? thank you!</p>\n"}, {"tags": ["c++", "gcc", "assembly", "sse", "gnu-assembler"], "comments": [{"owner": {"reputation": 2082, "user_id": 5849470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/270b9a87f8f1cba83d545b6e601337ea?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jordan", "link": "https://stackoverflow.com/users/5849470/matt-jordan"}, "edited": false, "score": 1, "creation_date": 1459354188, "post_id": 36314090, "comment_id": 60251729, "body": "Why did you define pure as extern &quot;C&quot;, and not the others?  I suspect this is the reason for the difference, since you have forced the compiler to follow &quot;C&quot; calling convention."}, {"owner": {"reputation": 1286, "user_id": 1733424, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4f880f29b27d5b2c14399512b7155f96?s=128&d=identicon&r=PG", "display_name": "chew socks", "link": "https://stackoverflow.com/users/1733424/chew-socks"}, "reply_to_user": {"reputation": 2082, "user_id": 5849470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/270b9a87f8f1cba83d545b6e601337ea?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jordan", "link": "https://stackoverflow.com/users/5849470/matt-jordan"}, "edited": false, "score": 0, "creation_date": 1459356838, "post_id": 36314090, "comment_id": 60253464, "body": "It was a recommendation from this site (<a href=\"https://www.cs.uaf.edu/2011/fall/cs301/lecture/10_12_asm_c.html\" rel=\"nofollow noreferrer\">cs.uaf.edu/2011/fall/cs301/lecture/10_12_asm_c.html</a>) and then I didn&#39;t have to worry about the name mangling."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1459358803, "post_id": 36314090, "comment_id": 60254701, "body": "The normal way to write <code>pretty</code> that doesn&#39;t depend on how <code>immintrin.h</code> defines <code>__m128i</code> is <code>_mm_set1_epi64x(b)</code>.  It compiles the same: gcc chooses store/<code>vmovddup</code> (worse latency, one fewer ALU uop), clang chooses <code>vmovq xmm0, rdi</code> / <code>vpbroadcastq xmm0, xmm0</code> (better latency, two port5 uops on Haswell)"}], "answers": [{"comments": [{"owner": {"reputation": 1286, "user_id": 1733424, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4f880f29b27d5b2c14399512b7155f96?s=128&d=identicon&r=PG", "display_name": "chew socks", "link": "https://stackoverflow.com/users/1733424/chew-socks"}, "edited": false, "score": 0, "creation_date": 1459357288, "post_id": 36314450, "comment_id": 60253768, "body": "I was under the impression that the <code>xmm0</code> was OK but now that I think about it I see it; but I thought the <code>red zone</code> which I think <code>[rsp-0x10]</code> falls in has no guarantee about consistency across function calls. Wouldn&#39;t the lack of a return statement be covered by the calling convention which specifies <code>xmm0</code> as the return register; so that&#39;s where any caller of <code>wrap</code> will go to retrieve the value described by the function declaration?"}, {"owner": {"reputation": 1286, "user_id": 1733424, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4f880f29b27d5b2c14399512b7155f96?s=128&d=identicon&r=PG", "display_name": "chew socks", "link": "https://stackoverflow.com/users/1733424/chew-socks"}, "edited": false, "score": 0, "creation_date": 1459357478, "post_id": 36314450, "comment_id": 60253891, "body": "I added <code>xmm0</code> and <code>memory</code> to the clobber list (does that fix it?) and the only change was the addition of the <code>vzeroupper</code> instruction immediately after <code>vmovddup</code>."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 1286, "user_id": 1733424, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4f880f29b27d5b2c14399512b7155f96?s=128&d=identicon&r=PG", "display_name": "chew socks", "link": "https://stackoverflow.com/users/1733424/chew-socks"}, "edited": false, "score": 0, "creation_date": 1459359402, "post_id": 36314450, "comment_id": 60255011, "body": "@chewsocks: you <a href=\"http://stackoverflow.com/a/34522750/224132\">must not clobber the red zone from inline asm</a>, because there doesn&#39;t even seem to be a way to tell gcc that you want to do so.  If you want a value in memory for <code>vmovddup</code>, write it like this: <code>asm (&quot;vmovddup %[result], %[src]&quot; : [result] &quot;=x&quot; (output) : [src] &quot;m&quot; (b) ); return output;</code>.  Then gcc decides what memory to use, and can load directly from somewhere other than the stack.  It doesn&#39;t force gcc to load/store/reload if the value was already in memory.  <a href=\"https://godbolt.org/g/n9uEaO\" rel=\"nofollow noreferrer\">working example on godbolt</a>."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 1286, "user_id": 1733424, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4f880f29b27d5b2c14399512b7155f96?s=128&d=identicon&r=PG", "display_name": "chew socks", "link": "https://stackoverflow.com/users/1733424/chew-socks"}, "edited": false, "score": 0, "creation_date": 1459359797, "post_id": 36314450, "comment_id": 60255221, "body": "Also, @chewsocks: requiring <code>-masm=intel</code> to build is not common practice.  AT&amp;T syntax isn&#39;t <i>that</i> bad.  Unless this is an in-house project that other people don&#39;t need to build, it&#39;s usually a good idea to just suck it up and use the standard AT&amp;T syntax for GNU inline asm.  Or even use the dialect alternatives syntax:  <code>&quot;vmovddup {%[src], %[result] | %[src], %[result]}&quot;</code>, IIRC."}], "tags": [], "owner": {"reputation": 2978, "user_id": 904148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf9d0b9f5d61826525247bd5b79cdc0?s=128&d=identicon&r=PG", "display_name": "Timothy Baldwin", "link": "https://stackoverflow.com/users/904148/timothy-baldwin"}, "is_accepted": false, "score": 2, "last_activity_date": 1459359095, "last_edit_date": 1459359095, "creation_date": 1459354904, "answer_id": 36314450, "question_id": 36314090, "link": "https://stackoverflow.com/questions/36314090/why-does-gas-inline-assembly-wrapped-in-a-function-generate-different-instructio/36314450#36314450", "title": "Why does GAS inline assembly wrapped in a function generate different instructions for the caller than a pure assembly function", "body": "<p>GCC does not understand assembly language.</p>\n\n<p>Since <code>pure</code> is an external function it cannot determine which registers it alters so according to the ABI has to assume all the <code>xmm</code> registers are changed.</p>\n\n<p><code>wrap</code> has undefined behaviour as the <code>asm</code> statement clobbers <code>xmm0</code> and <code>[rsp-0x10]</code> which are not listed as clobbers or outputs (to a value which may or may not depend on <code>b</code>), and the function has no <code>return</code> statement.</p>\n\n<p>Edit: The ABI does not apply to inline assembly, I expect your program will not work if you remove <code>-fno-inline</code> from the command line.</p>\n"}], "owner": {"reputation": 1286, "user_id": 1733424, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4f880f29b27d5b2c14399512b7155f96?s=128&d=identicon&r=PG", "display_name": "chew socks", "link": "https://stackoverflow.com/users/1733424/chew-socks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1459359095, "creation_date": 1459353780, "question_id": 36314090, "link": "https://stackoverflow.com/questions/36314090/why-does-gas-inline-assembly-wrapped-in-a-function-generate-different-instructio", "title": "Why does GAS inline assembly wrapped in a function generate different instructions for the caller than a pure assembly function", "body": "<p>I've been writing some basic functions using GCC's <code>asm</code> to practice for an actual application.</p>\n\n<p>My functions <code>pretty</code>, <code>wrap</code>, and <code>pure</code> generate the same instructions to unpack a 64 bit integer into a 128 bit vector. <code>add1</code> and <code>add2</code> which call <code>pretty</code> and <code>wrap</code> respectively also generate the same instructions. But <code>add3</code> differs by saving its <code>xmm0</code> register by pushing it to the stack rather than by copying it to another <code>xmm</code> register. This I don't understand because the compiler can see the details of <code>pure</code> to know none of the other <code>xmm</code> registers will be clobbered.</p>\n\n<p>Here is the C++</p>\n\n<pre><code>#include &lt;immintrin.h&gt;\n\n__m128i pretty(long long b) { return (__m128i){b,b}; }\n\n__m128i wrap(long long b) {\n    asm (\"mov qword ptr [rsp-0x10], rdi\\n\"\n         \"vmovddup xmm0, qword ptr [rsp-0x10]\\n\"\n         :\n         : \"r\"(b)\n         );\n}\n\nextern \"C\" __m128i pure(long long b);\nasm (\".text\\n.global pure\\n\\t.type pure, @function\\n\"\n     \"pure:\\n\\t\"\n     \"mov qword ptr [rsp-0x10], rdi\\n\\t\"\n     \"vmovddup xmm0, qword ptr [rsp-0x10]\\n\\t\"\n     \"ret\\n\\t\"\n     );\n\n__m128i add1(__m128i in, long long in2) { return in + pretty(in2);}\n__m128i add2(__m128i in, long long in2) { return in + wrap(in2);}\n__m128i add3(__m128i in, long long in2) { return in + pure(in2);}\n</code></pre>\n\n<p>Compiled with <code>g++ -c  so.cpp -march=native   -masm=intel -O3 -fno-inline</code> and disassembled with <code>objdump -d -M intel so.o | c++filt</code>.</p>\n\n<pre><code>so.o:     file format elf64-x86-64\n\n\nDisassembly of section .text:\n\n0000000000000000 &lt;pure&gt;:\n   0:   48 89 7c 24 f0          mov    QWORD PTR [rsp-0x10],rdi\n   5:   c5 fb 12 44 24 f0       vmovddup xmm0,QWORD PTR [rsp-0x10]\n   b:   c3                      ret\n   c:   0f 1f 40 00             nop    DWORD PTR [rax+0x0]\n\n0000000000000010 &lt;pretty(long long)&gt;:\n  10:   48 89 7c 24 f0          mov    QWORD PTR [rsp-0x10],rdi\n  15:   c5 fb 12 44 24 f0       vmovddup xmm0,QWORD PTR [rsp-0x10]\n  1b:   c3                      ret\n  1c:   0f 1f 40 00             nop    DWORD PTR [rax+0x0]\n\n0000000000000020 &lt;wrap(long long)&gt;:\n  20:   48 89 7c 24 f0          mov    QWORD PTR [rsp-0x10],rdi\n  25:   c5 fb 12 44 24 f0       vmovddup xmm0,QWORD PTR [rsp-0x10]\n  2b:   c3                      ret\n  2c:   0f 1f 40 00             nop    DWORD PTR [rax+0x0]\n\n0000000000000030 &lt;add1(long long __vector(2), long long)&gt;:\n  30:   c5 f8 28 c8             vmovaps xmm1,xmm0\n  34:   48 83 ec 08             sub    rsp,0x8\n  38:   e8 00 00 00 00          call   3d &lt;add1(long long __vector(2), long long)+0xd&gt;\n  3d:   48 83 c4 08             add    rsp,0x8\n  41:   c5 f9 d4 c1             vpaddq xmm0,xmm0,xmm1\n  45:   c3                      ret\n  46:   66 2e 0f 1f 84 00 00    nop    WORD PTR cs:[rax+rax*1+0x0]\n  4d:   00 00 00\n\n0000000000000050 &lt;add2(long long __vector(2), long long)&gt;:\n  50:   c5 f8 28 c8             vmovaps xmm1,xmm0\n  54:   48 83 ec 08             sub    rsp,0x8\n  58:   e8 00 00 00 00          call   5d &lt;add2(long long __vector(2), long long)+0xd&gt;\n  5d:   48 83 c4 08             add    rsp,0x8\n  61:   c5 f9 d4 c1             vpaddq xmm0,xmm0,xmm1\n  65:   c3                      ret\n  66:   66 2e 0f 1f 84 00 00    nop    WORD PTR cs:[rax+rax*1+0x0]\n  6d:   00 00 00\n\n0000000000000070 &lt;add3(long long __vector(2), long long)&gt;:\n  70:   48 83 ec 18             sub    rsp,0x18\n  74:   c5 f8 29 04 24          vmovaps XMMWORD PTR [rsp],xmm0\n  79:   e8 00 00 00 00          call   7e &lt;add3(long long __vector(2), long long)+0xe&gt;\n  7e:   c5 f9 d4 04 24          vpaddq xmm0,xmm0,XMMWORD PTR [rsp]\n  83:   48 83 c4 18             add    rsp,0x18\n  87:   c3                      ret\n</code></pre>\n"}, {"tags": ["c++", "mysql", "visual-studio"], "answers": [{"tags": [], "owner": {"reputation": 2113, "user_id": 4433546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fp46R.jpg?s=128&g=1", "display_name": "TriskalJM", "link": "https://stackoverflow.com/users/4433546/triskaljm"}, "is_accepted": true, "score": 1, "last_activity_date": 1459418035, "last_edit_date": 1459418035, "creation_date": 1459356387, "answer_id": 36314944, "question_id": 36313958, "link": "https://stackoverflow.com/questions/36313958/unresolved-externals-when-trying-to-connect-to-mysql-with-c-in-visual-studio-2/36314944#36314944", "title": "Unresolved externals when trying to connect to mysql with C++ in Visual Studio 2013", "body": "<p>You've got a couple of problems occurring.</p>\n\n<ol>\n<li><p>The first is that your project settings appear to be expecting a Windows application, not a console application, as evidenced by trying to find the symbol <code>_WinMain@16</code> instead of <code>main</code>. Double-check your project settings.</p></li>\n<li><p>The second is that you're trying to link statically, but at least in some versions of mysql, you need to define a preprocessor directive in order for symbols to be visible to the rest of your code. Specifically, <code>_get_driver_instance()</code>, since this was a function added for those  linking against the mysql libraries dynamically. Try defining <code>mysqlcppconn_EXPORTS</code> in the project settings and rebuild.</p></li>\n</ol>\n"}], "owner": {"reputation": 65, "user_id": 3444847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/938d909ee6cad1047e2d1e98f13fdb70?s=128&d=identicon&r=PG&f=1", "display_name": "user3444847", "link": "https://stackoverflow.com/users/3444847/user3444847"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "accepted_answer_id": 36314944, "answer_count": 1, "score": 0, "last_activity_date": 1459418035, "creation_date": 1459353362, "question_id": 36313958, "link": "https://stackoverflow.com/questions/36313958/unresolved-externals-when-trying-to-connect-to-mysql-with-c-in-visual-studio-2", "title": "Unresolved externals when trying to connect to mysql with C++ in Visual Studio 2013", "body": "<p>I am trying to connect to mysql with C++ in Visual Studio 2013. I am using Release Configuration. I already put the directories </p>\n\n<p>C:\\mysql-5.7.11-winx64\\lib\nC:\\Program Files\\MySQL\\Connector.C++ 1.1\\include\nC:\\boost_1_60_0</p>\n\n<p>in C/C++ general-->Additional Dependencies, VC++ Directories and Linker general->Additional Dependencies</p>\n\n<p>and I also added mysqlcppconn-static.lib and libmysql.lib on Linker-->Input. </p>\n\n<p>And now I am getting an error of \nerror LNK1120: 2 unresolved externals<br>\nerror LNK2001: unresolved external symbol _get_driver_instance<br>\nerror LNK2001: unresolved external symbol _WinMain@16   </p>\n\n<p>How do I fix this? Thanks!</p>\n\n<pre><code>/* Standard C++ includes */\n#include &lt;stdlib.h&gt;\n#include &lt;iostream&gt;\n\n/*\n  Include directly the different\n  headers from cppconn/ and mysql_driver.h + mysql_util.h\n  (and mysql_connection.h). This will reduce your build time!\n*/\n#include \"mysql_connection.h\"\n\n#include &lt;cppconn/driver.h&gt;\n#include &lt;cppconn/exception.h&gt;\n#include &lt;cppconn/resultset.h&gt;\n#include &lt;cppconn/statement.h&gt;\n#include &lt;cppconn/prepared_statement.h&gt;\n\nusing namespace std;\n\nint main(void)\n{\ncout &lt;&lt; endl;\ncout &lt;&lt; \"Let's have MySQL count from 10 to 1...\" &lt;&lt; endl;\n\ntry {\n  sql::Driver *driver;\n  sql::Connection *con;\n  sql::Statement *stmt;\n  sql::ResultSet *res;\n  sql::PreparedStatement *pstmt;\n\n  /* Create a connection */\n  driver = get_driver_instance();\n  con = driver-&gt;connect(\"tcp://127.0.0.1:3306\", \"root\", \"root\");\n  /* Connect to the MySQL test database */\n  con-&gt;setSchema(\"test\");\n\n  stmt = con-&gt;createStatement();\n  stmt-&gt;execute(\"DROP TABLE IF EXISTS test\");\n  stmt-&gt;execute(\"CREATE TABLE test(id INT)\");\n  delete stmt;\n\n  /* '?' is the supported placeholder syntax */\n  pstmt = con-&gt;prepareStatement(\"INSERT INTO test(id) VALUES (?)\");\n  for (int i = 1; i &lt;= 10; i++) {\n    pstmt-&gt;setInt(1, i);\n    pstmt-&gt;executeUpdate();\n  }\n  delete pstmt;\n\n  /* Select in ascending order */\n  pstmt = con-&gt;prepareStatement(\"SELECT id FROM test ORDER BY id ASC\");\n  res = pstmt-&gt;executeQuery();\n\n  /* Fetch in reverse = descending order! */\n  res-&gt;afterLast();\n  while (res-&gt;previous())\n    cout &lt;&lt; \"\\t... MySQL counts: \" &lt;&lt; res-&gt;getInt(\"id\") &lt;&lt; endl;\n  delete res;\n\n  delete pstmt;\n  delete con;\n\n} catch (sql::SQLException &amp;e) {\n  cout &lt;&lt; \"# ERR: SQLException in \" &lt;&lt; __FILE__;\n  cout &lt;&lt; \"(\" &lt;&lt; __FUNCTION__ &lt;&lt; \") on line \" \n     &lt;&lt; __LINE__ &lt;&lt; endl;\n  cout &lt;&lt; \"# ERR: \" &lt;&lt; e.what();\n  cout &lt;&lt; \" (MySQL error code: \" &lt;&lt; e.getErrorCode();\n  cout &lt;&lt; \", SQLState: \" &lt;&lt; e.getSQLState() &lt;&lt;  \" )\" &lt;&lt; endl;\n}\n\ncout &lt;&lt; endl;\n\nreturn EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "boost-graph"], "comments": [{"owner": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "edited": false, "score": 1, "creation_date": 1459356400, "post_id": 36313927, "comment_id": 60253180, "body": "Without using a bidirectional graph, you will have to do a brute force search of all the nodes, looking for one that has vertex 2 as its child.  It may be worthwhile to create a temporary biderectional copy of your graph to save doing the search."}, {"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "reply_to_user": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "edited": false, "score": 0, "creation_date": 1459358908, "post_id": 36313927, "comment_id": 60254752, "body": "Thanks, actually I&#39;m not sure I have gotten bidirectionnal graphs correctly: if they are bidirectionnal, how can I have the <code>1&lt;-&gt;2</code> edge, and not the <code>2&lt;-&gt;3</code>, using <code>boost::in_edges()</code> ? Something unclear to me on <a href=\"http://www.boost.org/doc/libs/1_60_0/libs/graph/doc/BidirectionalGraph.html\" rel=\"nofollow noreferrer\">the page</a>."}, {"owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "reply_to_user": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "edited": false, "score": 1, "creation_date": 1459364667, "post_id": 36313927, "comment_id": 60258439, "body": "@ravenspoint if you are going to have a temporary graph anyway, why not rather create a second directed graph where all the edges are inverted... Using the bidirectional one you&#39;ll have to go and lookup in the original graph if the edge you are considering is an in or out edge... I might be missing something, but I think it would be cleaner and even have a bit less of overhead. In pseudo: <code>for (out_edges(v, tree_copy)){ print target as source and vicecersa }</code>  vs. <code>for(edges(v, tree_bi_copy)){check if in or out. if in print else skip}</code>"}, {"owner": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "reply_to_user": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 0, "creation_date": 1459364833, "post_id": 36313927, "comment_id": 60258549, "body": "@dingalapadum You are correct"}], "answers": [{"comments": [{"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 0, "creation_date": 1459370770, "post_id": 36317036, "comment_id": 60262072, "body": "Thanks for that answer, I believe you are true and there is no other way. The best solution among the two would depend on the graphs size and structure, probably. Anyhow, I think I solved my problem as I think I <i>can</i> finaly use a Bidirectionnal graph."}], "tags": [], "owner": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "is_accepted": true, "score": 2, "last_activity_date": 1459365247, "last_edit_date": 1459365247, "creation_date": 1459363014, "answer_id": 36317036, "question_id": 36313927, "link": "https://stackoverflow.com/questions/36313927/how-can-i-get-input-edges-of-a-given-vertex-on-a-directed-graph/36317036#36317036", "title": "How can I get input edges of a given vertex on a directed graph?", "body": "<p>Without using a bidirectional graph, you will have to do a brute force search of all the nodes, looking for one that has vertex 2 as its child.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/graph/adjacency_list.hpp&gt;\nusing namespace std;\n   using namespace boost;\n\nstruct TreeVertex   {  int id = -1;  };\n\ntypedef boost::adjacency_list&lt;\n    boost::vecS,\n    boost::vecS,\n    boost::directedS,\n    TreeVertex\n    &gt; tree_t;\n\n    tree_t tree;\n\n\nint main() {\n\n\n    auto v1 = boost::add_vertex( tree );    \n    auto v2 = boost::add_vertex( tree );    \n    auto v3 = boost::add_vertex( tree );    \n    boost::add_edge( v1, v2, tree );\n    boost::add_edge( v2, v3, tree );\n\n    int looking_for = 2;\n\n    typename graph_traits &lt; tree_t &gt;::out_edge_iterator ei, ei_end;\n    for( int v = 0; v &lt; num_edges( tree ); v++ )\n    for (boost::tie(ei, ei_end) = out_edges(v, tree); ei != ei_end; ++ei) {\n    auto source = boost::source ( *ei, tree );\n    auto target = boost::target ( *ei, tree );\n    if( target == looking_for )\n        std::cout &lt;&lt; \"There is an edge from \" &lt;&lt; source &lt;&lt;  \" to \" &lt;&lt; target &lt;&lt; std::endl;\n\n// create an inverted edge tree to search for parents\ntree_t invtree;\nboost::add_edge( v2, v1, invtree );\nboost::add_edge( v1, v3, invtree );\ntypename graph_traits &lt; tree_t &gt;::adjacency_iterator it, it_end;\nfor (tie(it, it_end) = adjacent_vertices(v2, invtree ); it != it_end; ++it) \n{\n    std::cout &lt;&lt; \"There is an inv edge from \" &lt;&lt;  v2\n        &lt;&lt; \" to \" &lt;&lt; *it &lt;&lt; std::endl;\n}\n\n\n    return 0;\n}\n</code></pre>\n\n<p>It may be worthwhile to create a temporary tree with inverted edges as a 'copy' of your graph to simplify the search for parents.  Something like invtree at the end of the code posted.</p>\n"}], "owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 874, "favorite_count": 0, "accepted_answer_id": 36317036, "answer_count": 1, "score": 1, "last_activity_date": 1459365247, "creation_date": 1459353296, "last_edit_date": 1495542692, "question_id": 36313927, "link": "https://stackoverflow.com/questions/36313927/how-can-i-get-input-edges-of-a-given-vertex-on-a-directed-graph", "title": "How can I get input edges of a given vertex on a directed graph?", "body": "<p>I have a directed graph and I want to fetch the parent of a given vertex.</p>\n\n<p>Say I have the graph <code>1 -&gt; 2 -&gt; 3</code>, I hold the vertex <code>2</code> and I want to get vertex <code>1</code>.</p>\n\n<p>My vertex and graph definitions:</p>\n\n<pre><code>struct TreeVertex   {  int id = -1;  };\n\ntypedef boost::adjacency_list&lt;\n    boost::vecS,\n    boost::vecS,\n    boost::directedS,\n    TreeVertex\n    &gt; tree_t;\n</code></pre>\n\n<p>An MVCE showing what I want to achieve (see <a href=\"http://ideone.com/yz64cC\" rel=\"nofollow noreferrer\">online here</a>):</p>\n\n<pre><code>int main() {\n    tree_t tree;\n    auto v1 = boost::add_vertex( tree );    \n    auto v2 = boost::add_vertex( tree );    \n    auto v3 = boost::add_vertex( tree );    \n    boost::add_edge( v1, v2, tree );\n    boost::add_edge( v2, v3, tree );\n\n// attempt to get the input edge of v2\n    auto pair_it_edge = boost::in_edges( v2, tree ); // FAILS TO BUILD  \n    auto v = boost::source( *pair_it_edge.first ); // should be v1\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/13798465/\">Another answer</a> suggests transforming the graph into a <code>BidirectionalGraph</code> but I need to keep it directed.</p>\n\n<p>Question: Is this possible ? How can I get the incoming edge of <code>v2</code>, so that I can extract <code>v1</code> ?</p>\n"}, {"tags": ["c++", "stl", "generic-programming"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1459353563, "post_id": 36313920, "comment_id": 60251303, "body": "Does a template function not work?"}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1459354943, "post_id": 36314388, "comment_id": 60252177, "body": "Good answer, covering the general case."}, {"owner": {"reputation": 23, "user_id": 6135657, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FKRcdShJs34/AAAAAAAAAAI/AAAAAAAAAFE/uA1lh1ZhPsY/photo.jpg?sz=128", "display_name": "Huang Cheng", "link": "https://stackoverflow.com/users/6135657/huang-cheng"}, "edited": false, "score": 0, "creation_date": 1459435824, "post_id": 36314388, "comment_id": 60295467, "body": "Thanks for help! Another questions: what containers do this template affects? So far, i have known like multimap, unordered_multimap, map, unordered_map, any more? And such the template does have 4 parameters, doesn&#39;t it? thanks again."}, {"owner": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "reply_to_user": {"reputation": 23, "user_id": 6135657, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FKRcdShJs34/AAAAAAAAAAI/AAAAAAAAAFE/uA1lh1ZhPsY/photo.jpg?sz=128", "display_name": "Huang Cheng", "link": "https://stackoverflow.com/users/6135657/huang-cheng"}, "edited": false, "score": 0, "creation_date": 1459436669, "post_id": 36314388, "comment_id": 60296133, "body": "@HuangCheng This will work for all class templates (e.g. containers) that have 4 template arguments. Just keep in mind that template arguments can have default values, so the number of template arguments a class template has is not always obvious."}], "tags": [], "owner": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "is_accepted": true, "score": 5, "last_activity_date": 1459357723, "last_edit_date": 1459357723, "creation_date": 1459354742, "answer_id": 36314388, "question_id": 36313920, "link": "https://stackoverflow.com/questions/36313920/c-generic-programming-on-multimap/36314388#36314388", "title": "C++ Generic Programming on Multimap", "body": "<blockquote>\n  <p>including multimap but not limited</p>\n</blockquote>\n\n<p>If I understand correctly, you want a template template function:</p>\n\n<pre><code>template &lt;\n    typename T1, \n    typename T2, \n    typename T3, \n    typename T4, \n    template &lt;typename, typename, typename, typename&gt; class M&gt;\nvoid PrintAllMaps(M&lt;T1, T2, T3, T4&gt;&amp; map) {\n    ...\n}\n</code></pre>\n\n<p>Note that <code>std::multimap</code> and other <code>std::map</code> like containers take actually more than 2 template parameters, the rest of them having default types.</p>\n\n<p>See the <a href=\"http://coliru.stacked-crooked.com/a/f5d30101b9ba083a\" rel=\"nofollow\"><kbd>Live Demo</kbd></a></p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1459355696, "post_id": 36314392, "comment_id": 60252698, "body": "The OP is looking for something that is not limited to just a multimap."}], "tags": [], "owner": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "is_accepted": false, "score": 0, "last_activity_date": 1459354763, "creation_date": 1459354763, "answer_id": 36314392, "question_id": 36313920, "link": "https://stackoverflow.com/questions/36313920/c-generic-programming-on-multimap/36314392#36314392", "title": "C++ Generic Programming on Multimap", "body": "<pre><code>template &lt;class TKey&gt;\ntemplate &lt;class TValue&gt;\nvoid PrintMapToStream(std::ostream &amp;stream, multimap&lt;TKey, TValue&gt; map)\n{\n    for (auto elem : map)\n        stream &lt;&lt; elem.second &lt;&lt; ' ';\n\n    stream &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Then just:</p>\n\n<pre><code>PrintMapToStream(std::cout, map);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 5, "last_activity_date": 1459384800, "last_edit_date": 1459384800, "creation_date": 1459358260, "answer_id": 36315549, "question_id": 36313920, "link": "https://stackoverflow.com/questions/36313920/c-generic-programming-on-multimap/36315549#36315549", "title": "C++ Generic Programming on Multimap", "body": "<p>I've had good luck with generic container functions:</p>\n\n<pre><code>template &lt;class Map&gt;\nvoid PrintMapToStream(std::ostream &amp;stream, const Map &amp;map) {\n    for (auto &amp;elem : map)\n        stream &lt;&lt; elem.second &lt;&lt; ' ';\n    stream &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Of course, this will fail with confusing error messages if you call it on something that doesn't allow you to iterate over pairs.</p>\n"}], "owner": {"reputation": 23, "user_id": 6135657, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FKRcdShJs34/AAAAAAAAAAI/AAAAAAAAAFE/uA1lh1ZhPsY/photo.jpg?sz=128", "display_name": "Huang Cheng", "link": "https://stackoverflow.com/users/6135657/huang-cheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 36314388, "answer_count": 3, "score": 2, "last_activity_date": 1459384800, "creation_date": 1459353280, "last_edit_date": 1459356050, "question_id": 36313920, "link": "https://stackoverflow.com/questions/36313920/c-generic-programming-on-multimap", "title": "C++ Generic Programming on Multimap", "body": "<p>The multimap is like below:</p>\n\n<pre><code>int main() {\n    multimap&lt;int, string&gt; coll;\n    coll = { {5, \"tagged\"} ,\n             {2, \"a\"} ,\n             {1, \"this\"} ,\n             {4, \"of\"} ,\n             {6, \"strings\"} ,\n             {1, \"is\"} ,\n             {3, \"multimap\"} \n          };\n}\n</code></pre>\n\n<p>Now, I'd like to get a function template like below to print all value elements in such containers one by one, including <code>multimap</code> but not limited to this type of map and this particular pair of template parameters.</p>\n\n<pre><code>void PrintAllMaps(multimap&lt;int, string&gt; map) {\n    for (auto elem : map) {\n        cout &lt;&lt; elem.second &lt;&lt; ' ';\n    }\n    cout &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "abstract-class"], "answers": [{"comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1459355639, "post_id": 36314329, "comment_id": 60252652, "body": "that <code>D==1</code> comparison is ugly - use <code>true&#47;false</code> if you must compare a bool to something. Better, just write <code>if (D)</code>. Best: write <code>if (CheckDomain(x)) ...</code>. Oh, and you probably want <code>EvalFunction </code> to be protected, since it shouldn&#39;t be called directly by client code."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1459355775, "post_id": 36314329, "comment_id": 60252749, "body": "Oh, and another one: your CheckDomain can just be <code>{ return x &gt; 0.0; }</code>."}], "tags": [], "owner": {"reputation": 340, "user_id": 2557120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b929c8e70ccad0a692c1ba3175b36da4?s=128&d=identicon&r=PG", "display_name": "icurays1", "link": "https://stackoverflow.com/users/2557120/icurays1"}, "is_accepted": true, "score": 1, "last_activity_date": 1459354581, "creation_date": 1459354581, "answer_id": 36314329, "question_id": 36313909, "link": "https://stackoverflow.com/questions/36313909/requiring-base-class-operator-to-perform-a-domain-check-c/36314329#36314329", "title": "Requiring base class operator to perform a &quot;domain check&quot; (C++)", "body": "<p>Actually, my method works!  I just spaced out on my definition of <code>ConcreteFunction::CheckDomain</code>.  I did the domain check, but didn't return it!  The following code compiles and runs as desired: </p>\n\n<pre><code>#include&lt;stdexcept&gt;\n#include&lt;iostream&gt;\n\nclass AbstractFunction{\n    public:\n        virtual bool CheckDomain(double) const = 0;\n        virtual double EvalFunction(double) const = 0;\n        virtual double operator()(double) const;\n};\n\ndouble AbstractFunction::operator()(double x) const{\n    bool D = CheckDomain(x);\n    if(D==1){\n        return EvalFunction(x);\n    }\n    else{\n        throw std::runtime_error(\"Error: Out of Domain\");\n    }\n}\n\nclass ConcreteFunction : public AbstractFunction{\n    public:\n        bool CheckDomain(double x) const {return (x&gt;0.0)? 1:0;}\n        double EvalFunction(double x) const {return x*x;}\n        // Don't need to define operator(), should inherit from AbstractFunction.\n};  \n\nint main()\n{\n    ConcreteFunction f;\n    std::cout&lt;&lt;\"f(1) = \"&lt;&lt;f(2.0)&lt;&lt;std::endl; //OK, returns 4\n    std::cout&lt;&lt;\"f(-1) = \"&lt;&lt;f(-1.0)&lt;&lt;std::endl; //Throws runtime error, out of domain.\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 340, "user_id": 2557120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b929c8e70ccad0a692c1ba3175b36da4?s=128&d=identicon&r=PG", "display_name": "icurays1", "link": "https://stackoverflow.com/users/2557120/icurays1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 36314329, "answer_count": 1, "score": 0, "last_activity_date": 1459354581, "creation_date": 1459353255, "question_id": 36313909, "link": "https://stackoverflow.com/questions/36313909/requiring-base-class-operator-to-perform-a-domain-check-c", "title": "Requiring base class operator to perform a &quot;domain check&quot; (C++)", "body": "<p>Let's say I'm trying to define an abstract base class for \"mathematical functions\" - i.e. things that look like <code>y=f(x)</code> where both <code>x</code> and <code>y</code> are numeric types, and <code>x</code> is in the \"domain\" of <code>f</code>.  Here's what my abstract base class might look like: </p>\n\n<pre><code>template&lt;typename T&gt;\nclass AbstractFunction{\npublic:\n    virtual bool CheckDomain(T) const = 0;\n    virtual T operator()(T) const = 0;\n};\n</code></pre>\n\n<p>This says that any concrete class derived from <code>AbstractFunction</code> must implement a <code>CheckDomain</code> method and an \"evaluation operator\" <code>()</code>.  Now what I'd like to do is <em>require</em> that the evaluation operator calls the <code>CheckDomain</code> function before evaluating the function.  Is there a neat way to do some sort of \"partial implementation\" for <code>operator()(T)</code>?  Obviously this would mean it's no longer a pure virtual. </p>\n\n<p>I thought I had it figured out with the following construction, but I must be missing something because if I create <code>ConcreteFunction f</code> and try to evaluate <code>f(1.0)</code>, it doesn't use the derived class methods (it always returns 0 for <code>CheckDomain(x)</code>).</p>\n\n<pre><code>class AbstractFunction{\n    public:\n        virtual bool CheckDomain(double) const = 0;\n        virtual double EvalFunction(double) const = 0;\n        virtual double operator()(double);\n};\n\ndouble AbstractFunction::operator()(double x){\n    bool D = CheckDomain(x);\n    if(D==1){\n        return EvalFunction(x);\n    }\n    else{\n        std::runtime_error(\"Error: Out of Domain\");\n    }\n}\n\nclass ConcreteFunction : public AbstractFunction{\n    public:\n        bool CheckDomain(double x) const {(x&gt;0.0)? 1:0;}\n        double EvalFunction(double x) const {return x*x;}\n        // Don't need to define operator(), should inherit from AbstractFunction.\n};  \n</code></pre>\n\n<p>I'm sure I'm missing something easy, any thoughts?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "edited": false, "score": 0, "creation_date": 1459355343, "post_id": 36313873, "comment_id": 60252442, "body": "Do you mean any possible &quot;standard&quot; C++ source, or are you willing to accept a highly limited subset of C++ (e.g. C)?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1459355685, "post_id": 36313873, "comment_id": 60252689, "body": "Objective-C does not let you &quot;mix&quot; with C++. Objective-C++ is not the same language as Objective-C in exactly the same way that C++ is not C. (It&#39;s what you get if you take the difference between Objective-C and C and add that difference to C++ instead.)"}, {"owner": {"reputation": 401, "user_id": 1460934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNf2j.png?s=128&g=1", "display_name": "Azure", "link": "https://stackoverflow.com/users/1460934/azure"}, "edited": false, "score": 0, "creation_date": 1459355799, "post_id": 36313873, "comment_id": 60252773, "body": "I need compilation of &quot;standard&quot; C++ files (C is too less)"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1459358684, "post_id": 36313873, "comment_id": 60254643, "body": "@Azure - this site is for asking <i>specific</i> programming questions, not for finding things. We are not trying to compete with Google."}, {"owner": {"reputation": 401, "user_id": 1460934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNf2j.png?s=128&g=1", "display_name": "Azure", "link": "https://stackoverflow.com/users/1460934/azure"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1459364127, "post_id": 36313873, "comment_id": 60258077, "body": "@Bo Persson - I am not trying to misuse this site for something that can be simply googled. I think this is a serious and interesting question related to C++ compilation prospects."}], "answers": [{"tags": [], "owner": {"reputation": 190, "user_id": 1693881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1f307d50eb1da6b1ffa341a1482401c?s=128&d=identicon&r=PG", "display_name": "And Wan", "link": "https://stackoverflow.com/users/1693881/and-wan"}, "is_accepted": false, "score": 1, "last_activity_date": 1459354455, "creation_date": 1459354455, "answer_id": 36314297, "question_id": 36313873, "link": "https://stackoverflow.com/questions/36313873/which-languages-other-than-c-have-native-support-for-c-source-files/36314297#36314297", "title": "Which languages other than C++ have native support for C++ source files?", "body": "<p>C++ source files can only be compiled by a C++ compiler - hence why it's written in C++ language. So effectively there isn't many other languages that can compile C++ source files without moderate to large changes or syntax conversion.</p>\n\n<p>The only other valid/probable answer I can think of is C++.NET - which Microsoft tried to spawn but then it died off.</p>\n"}], "owner": {"reputation": 401, "user_id": 1460934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNf2j.png?s=128&g=1", "display_name": "Azure", "link": "https://stackoverflow.com/users/1460934/azure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1459358515, "answer_count": 1, "score": -2, "last_activity_date": 1459443578, "creation_date": 1459353150, "last_edit_date": 1459443578, "question_id": 36313873, "link": "https://stackoverflow.com/questions/36313873/which-languages-other-than-c-have-native-support-for-c-source-files", "closed_reason": "Not suitable for this site", "title": "Which languages other than C++ have native support for C++ source files?", "body": "<p>I am interested in using C++ source code together with another language. The language should be able to also compile C++ sources. For example <a href=\"https://en.wikipedia.org/wiki/Objective-C#Objective-C.2B.2B\" rel=\"nofollow\">Objective C++ allows to mix C++ source code with Objective C</a> in the same program. There are probably not so many language that support things like this. Do you know the few that allow this?</p>\n\n<p>Please do only answer regarding hybrid compilation. I am already aware of scripting and DLL calling solutions.</p>\n"}, {"tags": ["c++", "segmentation-fault"], "comments": [{"owner": {"reputation": 671, "user_id": 5298959, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cdb0a2b0364de45e4108bdfa18d44002?s=128&d=identicon&r=PG&f=1", "display_name": "fuzzything44", "link": "https://stackoverflow.com/users/5298959/fuzzything44"}, "edited": false, "score": 8, "creation_date": 1459352884, "post_id": 36313760, "comment_id": 60250813, "body": "Have you set <code>childT</code> to be non-null at that point?"}, {"owner": {"reputation": 545, "user_id": 5458157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f169232f8d4042adda8069dce96032c?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Predey", "link": "https://stackoverflow.com/users/5458157/nick-predey"}, "reply_to_user": {"reputation": 671, "user_id": 5298959, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cdb0a2b0364de45e4108bdfa18d44002?s=128&d=identicon&r=PG&f=1", "display_name": "fuzzything44", "link": "https://stackoverflow.com/users/5298959/fuzzything44"}, "edited": false, "score": 0, "creation_date": 1459352984, "post_id": 36313760, "comment_id": 60250890, "body": "No, I haven&#39;t, but now I will."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 3, "creation_date": 1459353256, "post_id": 36313760, "comment_id": 60251070, "body": "<code>root-&gt;childT-&gt;Data = p_data;</code> does more than just assign a char to a char, it dereferences two pointers. It&#39;s far more likely one of those dereferences is what segfaults. If you&#39;d asked &quot;why does dereferencing two pointers and assigning a char to a char segfault?&quot; then you probably wouldn&#39;t have even needed to ask the question here."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1459362010, "post_id": 36313760, "comment_id": 60256689, "body": "NULL is obsolete in C++"}], "answers": [{"tags": [], "owner": {"reputation": 976, "user_id": 6105692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b319f39af45a42f5f38962b6869c335?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/6105692/foo"}, "is_accepted": true, "score": 4, "last_activity_date": 1459353144, "creation_date": 1459353144, "answer_id": 36313870, "question_id": 36313760, "link": "https://stackoverflow.com/questions/36313760/why-does-assigning-a-char-to-a-char-give-a-seg-fault-c/36313870#36313870", "title": "Why does assigning a &#39;char&#39; to a &#39;char&#39; give a seg fault? C++", "body": "<p>Your children are not pointing to any memory location. You have only created a new instance for the root node. You are getting a segfault because you are dereferencing a null pointer.</p>\n\n<p>For example:</p>\n\n<pre><code>class myTreeNode\n{\npublic:\n  char Data;\n  myTreeNode *childA = NULL;   //A's always go in child1\n  myTreeNode *childT = NULL;   //T's always go in child2\n  myTreeNode *childC = NULL;   //c's always go in child3\n  myTreeNode *childG = NULL;   //G's always go in child4\n};\n\nint main()\n{\n  // allocate memory\n  myTreeNode *root = new myTreeNode;\n  root-&gt;childT = new myTreeNode; // allocate child\n\n  root-&gt;childT-&gt;Data = 'a';\n\n  // delete allocated memory\n  delete root-&gt;childT;\n  delete root;\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 545, "user_id": 5458157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f169232f8d4042adda8069dce96032c?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Predey", "link": "https://stackoverflow.com/users/5458157/nick-predey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 36313870, "answer_count": 1, "score": 1, "last_activity_date": 1459361902, "creation_date": 1459352812, "last_edit_date": 1459361902, "question_id": 36313760, "link": "https://stackoverflow.com/questions/36313760/why-does-assigning-a-char-to-a-char-give-a-seg-fault-c", "title": "Why does assigning a &#39;char&#39; to a &#39;char&#39; give a seg fault? C++", "body": "<p>I have a class that looks like this:</p>\n\n<pre><code>class myTreeNode\n{\n     public:   \n        char Data;\n        myTreeNode *childA = NULL;   //A's always go in child1\n        myTreeNode *childT = NULL;   //T's always go in child2\n        myTreeNode *childC = NULL;   //c's always go in child3\n        myTreeNode *childG = NULL;   //G's always go in child4\n};\n</code></pre>\n\n<p>However, when I go to assign <code>Data</code> a value, I receive a seg fault. I do this like:</p>\n\n<pre><code>root-&gt;childT-&gt;Data = p_data;\n</code></pre>\n\n<p>Where <code>p_data</code> is a <code>char = t</code> and <code>root</code> is a pointer created by <code>myTreeNode *root = new myTreeNode;</code>. Why when going to assign <code>Data</code> a value would I get a seg fault? Isn't it just the same as doing <code>char Data = 't'</code>?</p>\n"}, {"tags": ["c++", "visual-studio", "audio", "fmod", "directsound"], "answers": [{"tags": [], "owner": {"reputation": 198, "user_id": 5109163, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-aU7pt9kICAI/AAAAAAAAAAI/AAAAAAAAFGo/UhHtu1lpnqc/photo.jpg?sz=128", "display_name": "Yapoz", "link": "https://stackoverflow.com/users/5109163/yapoz"}, "is_accepted": false, "score": -1, "last_activity_date": 1459354333, "creation_date": 1459354333, "answer_id": 36314251, "question_id": 36313554, "link": "https://stackoverflow.com/questions/36313554/how-to-play-two-or-more-sounds-at-the-same-time/36314251#36314251", "title": "How to play two or more sounds at the same time", "body": "<p>I would guess simple multithreading would do:</p>\n\n<pre><code>#include &lt;thread&gt;\n...\nthread playsound(&amp;playsound, this, &lt;other params&gt;);\nplaysound.detach();\nthread othersound(&amp;playsound, this, &lt;other params&gt;);\nothersound.detach();\n</code></pre>\n\n<p>Good luck</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4609021, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uIutI.jpg?s=128&g=1", "display_name": "Ashington", "link": "https://stackoverflow.com/users/4609021/ashington"}, "is_accepted": false, "score": 0, "last_activity_date": 1460525769, "creation_date": 1460525769, "answer_id": 36589450, "question_id": 36313554, "link": "https://stackoverflow.com/questions/36313554/how-to-play-two-or-more-sounds-at-the-same-time/36589450#36589450", "title": "How to play two or more sounds at the same time", "body": "<p>You can separate your sounds into SFX and music (which uses the music system). This way, you can control your background music separately (as well as make use of their music-specific features) from your sound effect events.</p>\n\n<p>In general, you need to have a separate event/sound instance for each of the sound you are playing. If you only have one, it could get 'stolen' and this might be the most possible reason for your problem. It could also be because of your channels.</p>\n\n<p>I am not sure if you are using FMOD Studio or FMOD Designer/FMOD Ex, though, so it really depends on which one you are using. In any case, if you are just starting, I recommend reading up on the <strong>FMOD Event System - Best Practices For Programmers</strong>\ndocumentation which you can get from the Internet, as well as the <strong>FMOD Ex Programmer's API</strong> documentation (you will have to have an account to download this, but it's worth it.)</p>\n\n<p>Good luck.</p>\n"}, {"tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": false, "score": 0, "last_activity_date": 1461527347, "last_edit_date": 1461527347, "creation_date": 1461526598, "answer_id": 36827975, "question_id": 36313554, "link": "https://stackoverflow.com/questions/36313554/how-to-play-two-or-more-sounds-at-the-same-time/36827975#36827975", "title": "How to play two or more sounds at the same time", "body": "<p><code>PlaySound</code> only has a single 'voice' to work with, so it can't play more than one sound at a time.</p>\n\n<p>To play more than one sound at a time requires a real-time mixer, so you need to use something else: XAudio2, FMOD, Wwise, MSS, OpenAL, etc.</p>\n\n<blockquote>\n  <p>DirectSound is deprecated and hasn't been updated since 2000. It still exists for BackCompat but has a number of restrictions and other subtle legacy behaviors. The only reason anyone should still be using DirectSound at all is if they are targeting Windows XP.</p>\n</blockquote>\n\n<p>If you are using C++, you should look at <a href=\"https://github.com/Microsoft/DirectXTK/wiki/Audio\" rel=\"nofollow\">DirectX Tool Kit for Audio</a> which is a simple C++ wrapper for XAudio2.</p>\n"}], "owner": {"reputation": 1, "user_id": 6135512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6dacb9e7b933779edf6024db8fd6ae8?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Cowan", "link": "https://stackoverflow.com/users/6135512/austin-cowan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2013, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1461527347, "creation_date": 1459352287, "last_edit_date": 1460527082, "question_id": 36313554, "link": "https://stackoverflow.com/questions/36313554/how-to-play-two-or-more-sounds-at-the-same-time", "title": "How to play two or more sounds at the same time", "body": "<p>I'm quite new to programming, I'm in my first year of my programming; CS1B.</p>\n\n<p>I'm making a text adventure game in Visual Studio 2015, I want to use two sounds, like music in the background and a sound effect. </p>\n\n<p>But whenever I try to do so, the first sound stops when the second sound starts. I'm using the <code>PlaySound()</code> function to do my sounds. I know about <code>FMOD</code> and <code>DirectSound</code> but I don't really know how to set it up. </p>\n\n<p>I tried looking through how to do this, but the stuff I find is really hard for me to follow. Any help will be good. Thanks.</p>\n"}, {"tags": ["c++", "macros", "intel"], "answers": [{"comments": [{"owner": {"reputation": 74, "user_id": 1971010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ff2f37508434b17c2e2982f9baa5e5c?s=128&d=identicon&r=PG", "display_name": "taleporos", "link": "https://stackoverflow.com/users/1971010/taleporos"}, "edited": false, "score": 0, "creation_date": 1459355045, "post_id": 36314151, "comment_id": 60252233, "body": "that sould works, but i dont know the number of the cores, so i have to put it on a for loop for i=0 to CORE_NUM, is it possible to do it? Check to Code Link above? it&#39;s not in main()..."}, {"owner": {"reputation": 713, "user_id": 734598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce678494043d536df4555cc33338f41e?s=128&d=identicon&r=PG", "display_name": "sigmalha", "link": "https://stackoverflow.com/users/734598/sigmalha"}, "reply_to_user": {"reputation": 74, "user_id": 1971010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ff2f37508434b17c2e2982f9baa5e5c?s=128&d=identicon&r=PG", "display_name": "taleporos", "link": "https://stackoverflow.com/users/1971010/taleporos"}, "edited": false, "score": 0, "creation_date": 1459355685, "post_id": 36314151, "comment_id": 60252692, "body": "no, you cannot do that, macro will be expanded before compile time, but the for loop may be dealt at the compile time. I do not get a good approach to deal with the problem, maybe you can write a script (bash , python,etc) to generate the file."}], "tags": [], "owner": {"reputation": 713, "user_id": 734598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce678494043d536df4555cc33338f41e?s=128&d=identicon&r=PG", "display_name": "sigmalha", "link": "https://stackoverflow.com/users/734598/sigmalha"}, "is_accepted": false, "score": 0, "last_activity_date": 1459354001, "creation_date": 1459354001, "answer_id": 36314151, "question_id": 36313532, "link": "https://stackoverflow.com/questions/36313532/macros-in-c-to-auto-generate-a-variable/36314151#36314151", "title": "MACROs in C++ to auto-generate a variable", "body": "<p>maybe this can help you</p>\n\n<pre><code>#define fun(a, b, num) LOCALVAR ITLB::CACHE a ## num (#b \" \" #num, ITLB::cacheSize, ITLB::lineSize, ITLB::associativity)\nfun(itlb_, ITLB, 0); \nfun(itlb_, ITLB, 1); \nfun(itlb_, ITLB, 2); \nfun(itlb_, ITLB, 3); \n</code></pre>\n\n<p>will expand to</p>\n\n<pre><code>LOCALVAR ITLB::CACHE itlb_0 (\"ITLB\" \" \" \"0\", ITLB::cacheSize, ITLB::lineSize, ITLB::associativity);\nLOCALVAR ITLB::CACHE itlb_1 (\"ITLB\" \" \" \"1\", ITLB::cacheSize, ITLB::lineSize, ITLB::associativity);\nLOCALVAR ITLB::CACHE itlb_2 (\"ITLB\" \" \" \"2\", ITLB::cacheSize, ITLB::lineSize, ITLB::associativity);\nLOCALVAR ITLB::CACHE itlb_3 (\"ITLB\" \" \" \"3\", ITLB::cacheSize, ITLB::lineSize, ITLB::associativity);\n</code></pre>\n\n<p>the \"ITLB\" \" \" \"0\" part is equivalent with \"ITLB 0\"</p>\n\n<p>not so graceful and maybe ugly, but it work as you want.</p>\n"}, {"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1459392755, "post_id": 36317885, "comment_id": 60269550, "body": "If <code>CORE_NUM</code> is a compile-time constant, you&#39;ll get better code for most use-cases with an array, not a vector.  It&#39;s one less level of indirection, and your <code>ItlbCachePool</code> becomes a POD type (at least if you replace the <code>std::string</code> with a <code>const char*</code>, which might also be a good idea.)"}, {"owner": {"reputation": 1536, "user_id": 631266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6ba5d18865bebe8b087f8e0209b892?s=128&d=identicon&r=PG", "display_name": "Avi Berger", "link": "https://stackoverflow.com/users/631266/avi-berger"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1459405068, "post_id": 36317885, "comment_id": 60273684, "body": "@PeterCordes agreed. I poked around at the OP&#39;s links to the Intel code he is using and found that ITLB::CACHE resolves to a class without a default constructor. I went with a vector here since &quot;auto-generating&quot; the initialization for the array would require more complicated preprocessor stuff. Admittedly, macros are what the OP was literally asking for. (FWIW, the constructor expects a std::string argument.)"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1459406446, "post_id": 36317885, "comment_id": 60274369, "body": "Oh yeah, I forgot that he said this was for use with Intel&#39;s PIN stuff.  Having each object keep a <code>std::string</code> seems insane to me, which is why my answer suggested dropping it altogether and determining identity with <code>current - start_of_array</code>.  I think my suggestion is a lot cleaner if it&#39;s viable while still solving the ultimate problem of using the PIN API (which I haven&#39;t looked at)."}, {"owner": {"reputation": 74, "user_id": 1971010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ff2f37508434b17c2e2982f9baa5e5c?s=128&d=identicon&r=PG", "display_name": "taleporos", "link": "https://stackoverflow.com/users/1971010/taleporos"}, "edited": false, "score": 0, "creation_date": 1459625325, "post_id": 36317885, "comment_id": 60372992, "body": "i really cant understand the code. I want to use <code>itlb_0</code> and <code>itlb_1</code> where have they been generated?  for example I am using that:  <code>const BOOL itlbHit = ((threadid % 2)  == 0 ? itlb_0.AccessSingleLine(addr, accessType) : itlb_1.AccessSingleLine(addr, accessType));</code>"}, {"owner": {"reputation": 1536, "user_id": 631266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6ba5d18865bebe8b087f8e0209b892?s=128&d=identicon&r=PG", "display_name": "Avi Berger", "link": "https://stackoverflow.com/users/631266/avi-berger"}, "reply_to_user": {"reputation": 74, "user_id": 1971010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ff2f37508434b17c2e2982f9baa5e5c?s=128&d=identicon&r=PG", "display_name": "taleporos", "link": "https://stackoverflow.com/users/1971010/taleporos"}, "edited": false, "score": 0, "creation_date": 1459674035, "post_id": 36317885, "comment_id": 60383937, "body": "@taleporos They haven&#39;t been. I&#39;ve tried to make my post clearer. My suggestion/recommendation is not to use CORE_NUM differently named variables, but one object that you can index into. It will make the rest of your code more manageable and maintainable."}, {"owner": {"reputation": 1536, "user_id": 631266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6ba5d18865bebe8b087f8e0209b892?s=128&d=identicon&r=PG", "display_name": "Avi Berger", "link": "https://stackoverflow.com/users/631266/avi-berger"}, "reply_to_user": {"reputation": 74, "user_id": 1971010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ff2f37508434b17c2e2982f9baa5e5c?s=128&d=identicon&r=PG", "display_name": "taleporos", "link": "https://stackoverflow.com/users/1971010/taleporos"}, "edited": false, "score": 0, "creation_date": 1459674240, "post_id": 36317885, "comment_id": 60384006, "body": "@taleporos  If you must use the separate variable approach and can use Boost, my second alternative can be modified to do it like so:      #include &lt;boost/preprocessor/iteration/local.hpp&gt; #define BOOST_PP_LOCAL_LIMITS     (0, CORE_NUM - 1) #define BOOST_PP_LOCAL_MACRO(n)   ITLB::CACHE itlb_ ## n ( &quot;ITLB &quot; #n, ITLB::cacheSize, ITLB::lineSize, ITLB::associativity); #include BOOST_PP_LOCAL_ITERATE()"}, {"owner": {"reputation": 1536, "user_id": 631266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6ba5d18865bebe8b087f8e0209b892?s=128&d=identicon&r=PG", "display_name": "Avi Berger", "link": "https://stackoverflow.com/users/631266/avi-berger"}, "edited": false, "score": 0, "creation_date": 1459675314, "post_id": 36317885, "comment_id": 60384313, "body": "At one time I tried to do something the way you are trying here. It started making my code cumbersome and messy. When I realized I could use an array instead, I wondered why I didn&#39;t think of an array in the first place, dumped the separate variable approach and never looked back. I&#39;m trying to help you over the next hurdle with less pain."}], "tags": [], "owner": {"reputation": 1536, "user_id": 631266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6ba5d18865bebe8b087f8e0209b892?s=128&d=identicon&r=PG", "display_name": "Avi Berger", "link": "https://stackoverflow.com/users/631266/avi-berger"}, "is_accepted": true, "score": 4, "last_activity_date": 1459673440, "last_edit_date": 1459673440, "creation_date": 1459365842, "answer_id": 36317885, "question_id": 36313532, "link": "https://stackoverflow.com/questions/36313532/macros-in-c-to-auto-generate-a-variable/36317885#36317885", "title": "MACROs in C++ to auto-generate a variable", "body": "<p>The way to produce variable names ending with a serial number is with macros. However, this approach generally complicates your code. Using something that you can index is cleaner and is my recommendation. As Peter Cordes indicates, when the size is known at compile time and performance is critical, a fixed size array should be the best choice. In other circumstances, a std::vector or some other collection class may be appropriate.</p>\n\n<p>Note: LOCALVAR appears to expand to static. If you wish to restrict access to your variables to a single source file, you will have to adapt my examples appropriately.</p>\n\n<p>Alternative 1:</p>\n\n<p>C++11, avoids preprocessor complexities, uses std::vector.</p>\n\n<p><em>To substitute a fixed size array for the std::vector and not get into the preprocessor would require ITLB::CACHE to have a default constructor (not currently the case) and be correctly copy assignable (not checked).</em> </p>\n\n<p>In .h:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n// other includes\n\n#define CORE_NUM 4\n\nclass ItlbCachePool\n{\npublic:\n    ItlbCachePool() \n    {\n        std::string namePrefix(\"ITLB \");\n        for ( std::size_t i = 0; i &lt; CORE_NUM; ++i )\n        {\n            pool.emplace_back( \n                namePrefix + std::to_string(i), \n                ITLB::cacheSize, \n                ITLB::lineSize, \n                ITLB::associativity);\n        }\n    }\n\n    ITLB::CACHE &amp;operator[](std::size_t index)       \n    { \n        return pool[index]; \n    }\n\n    const ITLB::CACHE &amp;operator[](std::size_t index) const \n    { \n        return pool[index]; \n    }\n\nprivate:\n    std::vector&lt;ITLB::CACHE&gt; pool;\n};\n\nextern ItlbCachePool itlibs;\n</code></pre>\n\n<p>In .cpp</p>\n\n<pre><code>// ...\nItlbCachePool itlibs;\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>const BOOL itlbHit = itlbs[coreIndex].AccessSingleLine(addr, accessType); \n</code></pre>\n\n<p>You may wish to add bounds checking to this and turn it into a singleton. You might also adapt this to allow for run-time determination of the number of cores.</p>\n\n<p>Do note that after construction, there is no way to add elements to the private vector. This keeps the vector from re-allocating and invalidating any pointers/references to vector elements some client code might have created. </p>\n\n<p>Alternative 2:</p>\n\n<p>Produces a bare array, requires Boost library to handle preprocessor complexities: </p>\n\n<p>In .h</p>\n\n<pre><code>#define CORE_NUM 4\nextern ITLB::CACHE itlbs[CORE_NUM];\n</code></pre>\n\n<p>In .cpp</p>\n\n<pre><code>#include &lt;boost/preprocessor/iteration/local.hpp&gt;\n\n// white space required before \"(\" on next line\n#define BOOST_PP_LOCAL_LIMITS     (0, CORE_NUM - 1)\n#define BOOST_PP_LOCAL_MACRO(n)   \\\n    ITLB::CACHE( \\\n    \"ITLB \" #n, ITLB::cacheSize, ITLB::lineSize, ITLB::associativity),\nITLB::CACHE itlbs[] = \n    {\n#include BOOST_PP_LOCAL_ITERATE()\n    };\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>const BOOL itlbHit = itlbs[coreIndex].AccessSingleLine(addr, accessType); \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 1, "last_activity_date": 1459395479, "creation_date": 1459395479, "answer_id": 36323689, "question_id": 36313532, "link": "https://stackoverflow.com/questions/36313532/macros-in-c-to-auto-generate-a-variable/36323689#36323689", "title": "MACROs in C++ to auto-generate a variable", "body": "<p>Do you need every ITLB object to actually store <code>cacheSize</code>, <code>lineSize</code>, etc. constants?  That seems like a big waste, unless you're simulating heterogeneous multicore (big.LITTLE).</p>\n\n<p>It may be better to set things up so code that uses these objects sees the <code>ITLB::associativity</code> constants.</p>\n\n<p>Like Avi Berger's answer suggests, you should use a vector or something to hold the ITLBs, so you can iterate over them instead of having to copy/paste code to use four differently-named variables.</p>\n\n<p>Since your number of cores is also a compile-time constant, you should use an array, not a <code>std::vector</code>, so there's zero overhead compared to accessing a single variable.</p>\n\n<p>You probably shouldn't store <code>std::string</code> names in the object either.  Having them in an array lets you find its number by doing pointer math:</p>\n\n<hr>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdint&gt;\n#define MAX_CORE 4\n\nstruct ITLB {\n    static const uint32_t page_size = 4*1024;\n    static const uint32_t cacheSize = 32 * page_size;\n    static const uint32_t associativity = 32;\n    static const uint32_t max_sets = cacheSize / (page_size * associativity);\n\n    // probably make this private\n    struct { uint64_t from, to; } entries[max_sets][associativity];\n    // write a default constructor if you want\n};\n\nstatic ITLB all_itlbs[MAX_CORE];  // or initialize with  = { ... };\n\nvoid foo(ITLB *itlb) {\n    std::cout &lt;&lt; \"Caller passed the ITLB for core \" &lt;&lt; itlb - all_itlbs;\n    std::cout &lt;&lt; \"\\nIts associativity is \" &lt;&lt; itlb-&gt;associativity &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>This lets <code>ITLB</code> be a POD type, which will probably let the compiler make better code in some cases.</p>\n\n<p>Writing your code with <code>static const</code> members lets you write code like <code>int foo = itlb-&gt;associativity;</code>, and have that be a compile-time constant.  But without changing the <em>users</em> of the code, <code>ITLB::page_size</code> could be a non-static member variable.  Users of the code wouldn't have to change to support heterogeneous ITLBs.</p>\n\n<p>You'd need to take care in how access to <code>ITLB::entries</code> is done.  If <code>associativity</code> isn't a compile-time constant, it can't just be a multidimensional array.  You could still use a fixed-size array, and have the smaller TLBs leave some of it unused if you \"simulate\" multidimensional arrays with a flat array indexed like <code>entries[set * associativity + way_within_set]</code>.</p>\n\n<p>BTW, this <a href=\"http://gcc.godbolt.org/#compilers:!((compiler:g530,options:&#39;+-std%3Dgnu%2B%2B11+-fverbose-asm+-O3++-march%3Dhaswell&#39;,source:&#39;%23include+%3Ciostream%3E%0A%23include+%3Ccstdint%3E%0A%23define+MAX_CORE+4%0A%0Astruct+ITLB+%7B%0A++++static+const+uint32_t+page_size+%3D+4*1024%3B%0A++++static+const+uint32_t+cacheSize+%3D+32+*+page_size%3B%0A++++static+const+uint32_t+associativity+%3D+32%3B%0A++++static+const+uint32_t+max_sets+%3D+cacheSize+/+(page_size+*+associativity)%3B%0A%0A++++//+probably+make+this+private%0A++++struct+%7B+uint64_t+from,+to%3B+%7D+entries%5Bmax_sets%5D%5Bassociativity%5D%3B%0A++++//+write+a+default+constructor+if+you+want%0A%7D%3B%0A%0Astatic+ITLB+all_itlbs%5BMAX_CORE%5D%3B++//+or+initialize+with++%3D+%7B+...+%7D%3B%0A%0Avoid+foo(ITLB+*itlb)+%7B%0A++++std::cout+%3C%3C+%22Caller+passed+the+ITLB+for+core+%22+%3C%3C+itlb+-+all_itlbs%3B%0A++++std::cout+%3C%3C+%22%5CnIts+associativity+is+%22+%3C%3C+itlb-%3Eassociativity+%3C%3C+!&#39;%5Cn!&#39;%3B%0A%7D%0A&#39;)),filterAsm:(commentOnly:!t,directives:!t,intel:!t,labels:!t),version:3\" rel=\"nofollow\">actually compiles, and as you can see from the asm</a>, the <code>itlb - all_itlbs</code> calculation just turns into a subtraction and right shift by 9 (since <code>sizeof(ITLB)</code> is 512).</p>\n"}], "owner": {"reputation": 74, "user_id": 1971010, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7ff2f37508434b17c2e2982f9baa5e5c?s=128&d=identicon&r=PG", "display_name": "taleporos", "link": "https://stackoverflow.com/users/1971010/taleporos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 36317885, "answer_count": 3, "score": 0, "last_activity_date": 1459673440, "creation_date": 1459352242, "question_id": 36313532, "link": "https://stackoverflow.com/questions/36313532/macros-in-c-to-auto-generate-a-variable", "title": "MACROs in C++ to auto-generate a variable", "body": "<p>I have the code below, which is a <a href=\"https://software.intel.com/en-us/articles/pin-a-dynamic-binary-instrumentation-tool\" rel=\"nofollow\">pintool</a> I am writing in <code>C++</code> this is a part of a <a href=\"https://svn.mcs.anl.gov/repos/performance/Gwalp/gwalpsite/pin/source/tools/Memory/allcache.cpp\" rel=\"nofollow\">code</a> that generates the ITLB part, of a single-core system. I am trying to adjust the code above, to make it work with multiple cores (for example 4)</p>\n\n<pre><code>#define CORE_NUM 4\n\nnamespace ITLB\n{\n    // instruction TLB: 4 kB pages, 32 entries, fully associative\n    const UINT32 lineSize = 4*KILO;\n    const UINT32 cacheSize = 32 * lineSize;\n    const UINT32 associativity = 32;\n    const CACHE_ALLOC::STORE_ALLOCATION allocation = CACHE_ALLOC::STORE_ALLOCATE;\n\n    const UINT32 max_sets = cacheSize / (lineSize * associativity);\n    const UINT32 max_associativity = associativity;\n\n    typedef CACHE_ROUND_ROBIN(max_sets, max_associativity, allocation) CACHE;\n}\nLOCALVAR ITLB::CACHE itlb(\"ITLB 0\", ITLB::cacheSize, ITLB::lineSize, ITLB::associativity);\n</code></pre>\n\n<p>i want to auto-generate the following:</p>\n\n<pre><code>LOCALVAR ITLB::CACHE itlb_0(\"ITLB 0\", ITLB::cacheSize, ITLB::lineSize, ITLB::associativity);\nLOCALVAR ITLB::CACHE itlb_1(\"ITLB 1\", ITLB::cacheSize, ITLB::lineSize, ITLB::associativity);\nLOCALVAR ITLB::CACHE itlb_2(\"ITLB 2\", ITLB::cacheSize, ITLB::lineSize, ITLB::associativity);\nLOCALVAR ITLB::CACHE itlb_3(\"ITLB 3\", ITLB::cacheSize, ITLB::lineSize, ITLB::associativity);\n</code></pre>\n\n<p>because of the CORE_NUM = 4. A possible solution is <code>MACROS</code> I guess! Any help?\nI am not very familiar using MACROs, could anyone suggest me a possible solution?</p>\n"}, {"tags": ["c++", "pointers", "doubly-linked-list"], "comments": [{"owner": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "edited": false, "score": 6, "creation_date": 1459352292, "post_id": 36313493, "comment_id": 60250349, "body": "<a href=\"http://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow noreferrer\">std::list</a> is a double-linked list."}, {"owner": {"reputation": 402, "user_id": 4084636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1E6K5.jpg?s=128&g=1", "display_name": "Adrian M.", "link": "https://stackoverflow.com/users/4084636/adrian-m"}, "edited": false, "score": 0, "creation_date": 1459352783, "post_id": 36313493, "comment_id": 60250742, "body": "The class object needs one more reference, to the previous node.  The functions of the class are what need to be modified the most, for example add needs to use a reference to hold the new previous node  so that the new node&#39;s previous node reference can be assigned to it.  The logic is pretty simple."}, {"owner": {"reputation": 1154, "user_id": 1932499, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hBDDp.jpg?s=128&g=1", "display_name": "alessalessio", "link": "https://stackoverflow.com/users/1932499/alessalessio"}, "edited": false, "score": 0, "creation_date": 1459352792, "post_id": 36313493, "comment_id": 60250747, "body": "do you need to implement something on your own?"}], "answers": [{"comments": [{"owner": {"reputation": 3528, "user_id": 509614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f541aec9a9f53fed5b470a31a1112418?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/509614/dennis"}, "edited": false, "score": 0, "creation_date": 1459356590, "post_id": 36313770, "comment_id": 60253299, "body": "You should not give link-only answers. Quote the most relevant part in this answer."}, {"owner": {"reputation": 1154, "user_id": 1932499, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hBDDp.jpg?s=128&g=1", "display_name": "alessalessio", "link": "https://stackoverflow.com/users/1932499/alessalessio"}, "reply_to_user": {"reputation": 3528, "user_id": 509614, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f541aec9a9f53fed5b470a31a1112418?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/509614/dennis"}, "edited": false, "score": 0, "creation_date": 1459416072, "post_id": 36313770, "comment_id": 60280614, "body": "Done. Added most relevant part"}], "tags": [], "owner": {"reputation": 1154, "user_id": 1932499, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hBDDp.jpg?s=128&g=1", "display_name": "alessalessio", "link": "https://stackoverflow.com/users/1932499/alessalessio"}, "is_accepted": false, "score": 2, "last_activity_date": 1459416032, "last_edit_date": 1459416032, "creation_date": 1459352839, "answer_id": 36313770, "question_id": 36313493, "link": "https://stackoverflow.com/questions/36313493/create-a-doubly-linked-list-in-c/36313770#36313770", "title": "create a doubly linked list in C++", "body": "<p>Each List Node  must a have a pointer to the previous and to the next List Node.\nThe List is then the container of List Nodes , linked together as a chain.</p>\n\n<pre><code>struct ListNode;\n\ntypedef struct ListNode {\n    struct ListNode *next;\n    struct ListNode *prev;\n    void *value;\n} ListNode;\n\ntypedef struct List {\n    int count;\n    ListNode *first;\n    ListNode *last;\n} List;\n</code></pre>\n\n<p>You need then to implement the methods push and pop accordingly.\nThe tricky part is the remove method. Store the two pointers of the previous and next Node that you want to delete, and then assign them accordingly to the previous and following node: </p>\n\n<pre><code>ListNode *after = node-&gt;next;\nListNode *before = node-&gt;prev;\nafter-&gt;prev = before;\nbefore-&gt;next = after;\n</code></pre>\n\n<p>This article may help you, full code and explanation</p>\n\n<p><a href=\"http://c.learncodethehardway.org/book/ex32.html\" rel=\"nofollow\">http://c.learncodethehardway.org/book/ex32.html</a></p>\n"}], "owner": {"reputation": 11, "user_id": 6114523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0b93c3afe29845cfc60d0488a42f96?s=128&d=identicon&r=PG&f=1", "display_name": "dingovo1", "link": "https://stackoverflow.com/users/6114523/dingovo1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 930, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459416032, "creation_date": 1459352162, "last_edit_date": 1459352210, "question_id": 36313493, "link": "https://stackoverflow.com/questions/36313493/create-a-doubly-linked-list-in-c", "title": "create a doubly linked list in C++", "body": "<p>I'm creating a programme that needs to read data from a spreadsheet in CSV form and assigns it to a doubly linked list in C++.I have created a singly linked list but I'm at a loss as to how to use this idea to make a doubly linked list. I understand you require a previous pointer but I am unsure as to actually implementing the code.</p>\n\n<p>code for my singly linked list:\nto add to the list:</p>\n\n<pre><code>if (!m_head)\n{\n    m_head = new Node(name, reference,latitude,longitude);\n}\nelse\n{\n    Node *current = m_head;\n    while (current-&gt;getNext() != 0)\n    {\n        current = current-&gt;getNext();\n    }\n    current-&gt;setNext(new Node(name, reference,latitude,longitude));\n}\n</code></pre>\n\n<p>please note: Node is a separate class to store data about the node e.g. name.</p>\n"}, {"tags": ["java", "android", "c++", "opencv", "ip-camera"], "answers": [{"tags": [], "owner": {"reputation": 406, "user_id": 4820880, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d8d221f919dee79f94c0e5176be80213?s=128&d=identicon&r=PG&f=1", "display_name": "PRCube", "link": "https://stackoverflow.com/users/4820880/prcube"}, "is_accepted": true, "score": 0, "last_activity_date": 1459356733, "creation_date": 1459356733, "answer_id": 36315064, "question_id": 36313489, "link": "https://stackoverflow.com/questions/36313489/opencv-cannot-stream-ip-camera/36315064#36315064", "title": "OpenCV cannot stream IP camera", "body": "<p>The issue was the version of OpenCV I was using, even though it is the latest version, it still has issues streaming from a URL, v2.4.9 works just fine.</p>\n"}], "owner": {"reputation": 406, "user_id": 4820880, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d8d221f919dee79f94c0e5176be80213?s=128&d=identicon&r=PG&f=1", "display_name": "PRCube", "link": "https://stackoverflow.com/users/4820880/prcube"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 36315064, "answer_count": 1, "score": 0, "last_activity_date": 1459356733, "creation_date": 1459352155, "question_id": 36313489, "link": "https://stackoverflow.com/questions/36313489/opencv-cannot-stream-ip-camera", "title": "OpenCV cannot stream IP camera", "body": "<p>I'm using the below code to access an IP camera, but I keep getting an error. If I change ip address to \"1\" which is a USB connected webcam, everything works fine, but streaming from URL doesn't work. I can access the camera from browser without any issues. I'm using OpenCV v3.1.</p>\n\n<pre><code>    public static void main(String[] args) {\n    System.loadLibrary(Core.NATIVE_LIBRARY_NAME);\n\n    VideoCapture ip_cam = new VideoCapture();\n\n    ip_cam.open(\"http://192.168.1.9:8080/video?x.mjpeg\");\n\n    if (!ip_cam.isOpened())\n    {\n        System.out.print(\"Error\");\n        return;\n    }\n\n    System.out.println(\"Success\");\n\n    ip_cam.release();\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "qt", "mingw", "qt-creator"], "comments": [{"owner": {"reputation": 2059, "user_id": 1138311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67def91a371d970532624092bc75f6ec?s=128&d=identicon&r=PG", "display_name": "KimKulling", "link": "https://stackoverflow.com/users/1138311/kimkulling"}, "edited": false, "score": 0, "creation_date": 1459352502, "post_id": 36313459, "comment_id": 60250510, "body": "Have you tried to do a clean build. The make-tool qmake is not so good with dependencies."}, {"owner": {"reputation": 4141, "user_id": 3419537, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7e5899a36794df8696441dfa03069bad?s=128&d=identicon&r=PG&f=1", "display_name": "user3419537", "link": "https://stackoverflow.com/users/3419537/user3419537"}, "reply_to_user": {"reputation": 2059, "user_id": 1138311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67def91a371d970532624092bc75f6ec?s=128&d=identicon&r=PG", "display_name": "KimKulling", "link": "https://stackoverflow.com/users/1138311/kimkulling"}, "edited": false, "score": 0, "creation_date": 1459352805, "post_id": 36313459, "comment_id": 60250759, "body": "Yep - &quot;I&#39;ve tried cleaning/rebuilding the project...&quot;, no luck."}, {"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 0, "creation_date": 1459356594, "post_id": 36313459, "comment_id": 60253305, "body": "Have you tried rerunning <code>qmake</code>?"}, {"owner": {"reputation": 4141, "user_id": 3419537, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7e5899a36794df8696441dfa03069bad?s=128&d=identicon&r=PG&f=1", "display_name": "user3419537", "link": "https://stackoverflow.com/users/3419537/user3419537"}, "edited": false, "score": 0, "creation_date": 1459357967, "post_id": 36313459, "comment_id": 60254233, "body": "I think I&#39;ve located the cause. Question has been updated"}, {"owner": {"reputation": 1560, "user_id": 2030219, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6314bf166040bf1eb9deb3a6c03d6864?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/2030219/joel"}, "edited": false, "score": 0, "creation_date": 1459483934, "post_id": 36313459, "comment_id": 60316934, "body": "can you show us the contents of the pro file?"}], "owner": {"reputation": 4141, "user_id": 3419537, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7e5899a36794df8696441dfa03069bad?s=128&d=identicon&r=PG&f=1", "display_name": "user3419537", "link": "https://stackoverflow.com/users/3419537/user3419537"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 867, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459564289, "creation_date": 1459352088, "last_edit_date": 1459358354, "question_id": 36313459, "link": "https://stackoverflow.com/questions/36313459/qt-creator-release-build-wont-compile", "title": "Qt Creator: Release build won&#39;t compile", "body": "<p>I've written a relatively simple Qt program that I'm trying to compile for windows with MinGW under Qt Creator. The Debug version builds and runs without problem, but when I try to build the Release version I get these errors</p>\n\n<pre><code>main.cpp:-1: error: undefined reference to `_imp___ZN12QApplicationC1ERiPPci'\nmain.cpp:-1: error: undefined reference to `_imp___ZN7QWidget4showEv'\nmain.cpp:-1: error: undefined reference to `_imp___ZN12QApplication4execEv'\nmain.cpp:-1: error: undefined reference to `_imp___ZN12QApplicationD1Ev'\nmain.cpp:-1: error: undefined reference to `_imp___ZN12QApplicationD1Ev'\n:-1: error: release/main.o: bad reloc address 0x13 in section `.eh_frame'\ncollect2.exe:-1: error: error: ld returned 1 exit status\n</code></pre>\n\n<p>The errors seem to suggest that one or more of the core Qt libraries cannot be found, however, the .pro file contains the line <code>QT += core gui widgets</code> and there is nothing Debug/Release specific. I've tried cleaning/rebuilding the project and restarting Qt Creator, to no avail. I have no problems compiling Release builds for other projects. I'm using Qt version 5.2.1. Any ideas? </p>\n\n<p><strong>Update:</strong></p>\n\n<p>I've singled out this line in the .pro file as the cause</p>\n\n<pre><code>win32: LIBS += -L\"C:/Program Files (x86)/MATLAB/R2015b/bin/win32\" -llibmat -llibmx\n</code></pre>\n\n<p>Inside the makefile I see this</p>\n\n<pre><code>LIBS = -lglu32 -lopengl32 -lgdi32 -luser32 -lmingw32 -lqtmain \"-LC:/Program Files (x86)/MATLAB/R2015b/bin/win32\" -llibmat -llibmx -LC:\\Qt\\Qt5.2.1\\5.2.1\\mingw48_32\\lib -lQt5Widgets -lQt5Gui -lQt5Core  \n</code></pre>\n\n<p>I suspect the problem lies in the order in which the link libraries are listed in the makefile. I vaguely recall encountering a similar problem in the past. How can I force qmake to place the Matlab libraries at the end of the list?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1459352426, "post_id": 36313446, "comment_id": 60250459, "body": "sorry, I dont understand, If the type does not have a <code>!=</code> the template wont get instantiated, if it has it, then everything should be fine, no?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1459352854, "post_id": 36313446, "comment_id": 60250793, "body": "I am not sure you can do this as built in types do not have member functions(which marcinj just proved me wonrg).  Personally instead of trying to figure this out I would do what the standard does and add an overload that takes a comparison object and uses that.  If the types provide built in operators the user can use the first version., otherwise they can use the overload and supply a comparator.  You could also just use <a href=\"http://en.cppreference.com/w/cpp/algorithm/equal\" rel=\"nofollow noreferrer\"><code>std::equal</code></a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1459353251, "post_id": 36313446, "comment_id": 60251068, "body": "@tobi303 I think the OP is worried that the type could have a conversion operator that the elements could convert to and then that is compared.  I don&#39;t think the language allows that and if that is the case then you are correct that this is not needed."}, {"owner": {"reputation": 36245, "user_id": 1137174, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/361fd9b1b32d13cd1c1dc03e5c6a2127?s=128&d=identicon&r=PG", "display_name": "Mike Lischke", "link": "https://stackoverflow.com/users/1137174/mike-lischke"}, "edited": false, "score": 0, "creation_date": 1459361690, "post_id": 36313446, "comment_id": 60256482, "body": "Good points! Yes, I&#39;m worried that the != comparison uses a default implementation without letting me know that."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1459353111, "post_id": 36313786, "comment_id": 60250969, "body": "I dont understand, how this helps. Anyhow if <code>T</code> has no <code>!=</code> operator, the OPs <code>equals&lt;T&gt;</code> wont compile, or am i missing something?"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1459353426, "post_id": 36313786, "comment_id": 60251193, "body": "I agree, I suppose with static assertion it is possible to give some better information of the error. The whole Concepts idea is to give better error messages - shorter and more meaningfull."}, {"owner": {"reputation": 36245, "user_id": 1137174, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/361fd9b1b32d13cd1c1dc03e5c6a2127?s=128&d=identicon&r=PG", "display_name": "Mike Lischke", "link": "https://stackoverflow.com/users/1137174/mike-lischke"}, "edited": false, "score": 0, "creation_date": 1459415088, "post_id": 36313786, "comment_id": 60279909, "body": "While this works nicely for value types it does not for pointer types. For instance <code>std::cout&lt;&lt;has_not_equal&lt;sample2*&gt;::value&lt;&lt;std::endl;</code> will print <code>true</code>."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 36245, "user_id": 1137174, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/361fd9b1b32d13cd1c1dc03e5c6a2127?s=128&d=identicon&r=PG", "display_name": "Mike Lischke", "link": "https://stackoverflow.com/users/1137174/mike-lischke"}, "edited": false, "score": 0, "creation_date": 1459421027, "post_id": 36313786, "comment_id": 60284248, "body": "@MikeLischke you might check if T is of class type, also disallow pointers -   those checks are provided by boost type traits also I suppose C++11 also has them. I have updated answer with Concepts solution which is the most elegant."}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": false, "score": 5, "last_activity_date": 1459421346, "last_edit_date": 1459421346, "creation_date": 1459352883, "answer_id": 36313786, "question_id": 36313446, "link": "https://stackoverflow.com/questions/36313446/how-to-determine-if-a-class-implements-operator-overloading/36313786#36313786", "title": "How to determine if a class implements != operator overloading?", "body": "<p>[update 1 - boost 'semi' solution]</p>\n\n<p>I realized that example from my first answer does not work if your class has conversion operator (to type which allows for != comparision), to fix it you can use boost <a href=\"http://www.boost.org/doc/libs/1_53_0/libs/type_traits/doc/html/boost_typetraits/reference/has_not_equal_to.html\" rel=\"nofollow\">has_not_equal_to</a> type trait. Still its not perfect, as in some cases it generates compilation error instead of giving a value. Those cases are listed in provided link.</p>\n\n<p>[update 2 - concepts solution]</p>\n\n<p>Example with use of concepts:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\ntemplate&lt;typename T&gt;\nconcept bool OperatorNotEqual_comparable()\n{\n    return requires (T a, T b) {\n        { a.operator!=(b) } -&gt; bool;\n    };   \n}\n\ntemplate &lt;OperatorNotEqual_comparable T&gt;\nstatic bool equals(const std::vector&lt;T&gt; &amp;a, const std::vector&lt;T&gt; &amp;b) {\n  if (a.size() != b.size())\n    return false;\n\n  for (size_t i = 0; i &lt; a.size(); ++i)\n    if (a[i] != b[i]) // Requires that the != operator is supported by the template type.\n      return false;\n\n  return true;\n}\n\nstruct sample1{\n    bool operator!=(const sample1&amp;) const { return true; }\n};\n\nstruct sample2{\n};\n\nstruct sample3{\n    operator void*() { return 0; }\n};\n\nint main() {\n    // Compiles ok!\n    std::vector&lt;sample1&gt; vec1;\n    equals(vec1, vec1);\n\n    // Fails, which is OK!\n    //std::vector&lt;sample2&gt; vec2;\n    //equals(vec2, vec2);    \n\n    // Fails, which is OK!\n    //std::vector&lt;sample2*&gt; vec2;\n    //equals(vec2, vec2);\n\n    // Fails, which is OK!\n    //std::vector&lt;int&gt; vec4;\n    //equals(vec4, vec4);        \n\n    // Fails, which is OK!\n    //std::vector&lt;sample3&gt; vec5;\n    //equals(vec5, vec5);            \n}\n</code></pre>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/txliKPeMcStc6FhK\" rel=\"nofollow\">http://melpon.org/wandbox/permlink/txliKPeMcStc6FhK</a></p>\n\n<p>[old answer - SFINAE solution, does not check for conversion operator]</p>\n\n<p>You can use SFINAE, and in the near future concepts (they are in gcc 6.0),</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;type_traits&gt;\n\ntemplate&lt;typename T&gt;\nclass has_not_equal{\n    template&lt;typename U&gt;\n    struct null_value{\n        static U&amp; value;\n    };\n\n    template&lt;typename U&gt;\n    static std::true_type test(U*,decltype(null_value&lt;U&gt;::value!=null_value&lt;U&gt;::value)* = 0);\n    static std::false_type test(void*);\n\npublic:\n    typedef decltype(test(static_cast&lt;T*&gt;(0))) type;\n    static const bool value = type::value;\n};\n\nstruct sample1{\n    bool operator!=(const sample1&amp;) { return true; }\n};\n\nstruct sample2{\n};\n\nint main(){\n    std::cout&lt;&lt;std::boolalpha;\n    std::cout&lt;&lt;has_not_equal&lt;int&gt;::value&lt;&lt;std::endl;\n    std::cout&lt;&lt;has_not_equal&lt;std::string&gt;::value&lt;&lt;std::endl;\n\n    std::cout&lt;&lt;has_not_equal&lt;sample1&gt;::value&lt;&lt;std::endl;\n    std::cout&lt;&lt;has_not_equal&lt;sample2&gt;::value&lt;&lt;std::endl;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>g++ -std=c++14 -O2 -Wall -pedantic -pthread main.cpp &amp;&amp; ./a.out\ntrue\ntrue\ntrue\nfalse\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/c9064ce77ea61e10\" rel=\"nofollow\">live</a></p>\n\n<p>above code is a modified version from this <a href=\"http://dixq.net/forum/blog.php?u=673&amp;b=2137\" rel=\"nofollow\">site</a>, it was for <code>operator==</code>, I changed it to <code>operator!=</code></p>\n"}, {"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 1, "last_activity_date": 1459353963, "creation_date": 1459353963, "answer_id": 36314139, "question_id": 36313446, "link": "https://stackoverflow.com/questions/36313446/how-to-determine-if-a-class-implements-operator-overloading/36314139#36314139", "title": "How to determine if a class implements != operator overloading?", "body": "<p>If <code>T</code> has no <code>operator !=</code>, then the template wont get instantiated for that type, but you will get a (possibly horribly long and unreadable) error message from your compiler. On the other hand, it <code>T</code> has a <code>operator !=</code>, then it should be just fine to use it. There wont be silent wrong result, unless <code>T</code>s <code>operator !=</code> is anyhow broken.</p>\n"}, {"tags": [], "owner": {"reputation": 8813, "user_id": 1812788, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Zn2AX.jpg?s=128&g=1", "display_name": "Tam&#225;s Zahola", "link": "https://stackoverflow.com/users/1812788/tam%c3%a1s-zahola"}, "is_accepted": false, "score": 0, "last_activity_date": 1459354659, "creation_date": 1459354659, "answer_id": 36314359, "question_id": 36313446, "link": "https://stackoverflow.com/questions/36313446/how-to-determine-if-a-class-implements-operator-overloading/36314359#36314359", "title": "How to determine if a class implements != operator overloading?", "body": "<blockquote>\n  <p>If someone uses a type without overloading it might end up using a simple binary comparison which might silently lead to wrong results. </p>\n</blockquote>\n\n<p>There's not such thing as \"binary comparison\" in C++. Either your class/struct has <code>operator!=</code> or the template won't be instantiated (and if there are no other candidates then it will be an error). </p>\n"}, {"tags": [], "owner": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "is_accepted": false, "score": 1, "last_activity_date": 1459356576, "last_edit_date": 1459356576, "creation_date": 1459356033, "answer_id": 36314827, "question_id": 36313446, "link": "https://stackoverflow.com/questions/36313446/how-to-determine-if-a-class-implements-operator-overloading/36314827#36314827", "title": "How to determine if a class implements != operator overloading?", "body": "<p>The only other (besides the conversion) case (I can think of) where a binary comparison can happen (has <code>operator!=</code> defined) and lead to silently wrong results is when <code>T</code> is actually a pointer and you expect a \"deep comparison\".</p>\n\n<p>One could add an overload for vectors containg pointers but that wouldn't cover pointer to array storage.</p>\n\n<pre><code>template &lt;typename T&gt;\nstatic bool equals(const std::vector&lt;T&gt; &amp;a, const std::vector&lt;T&gt; &amp;b) \n{\n  return std::equal(a.begin(), a.end(), b.begin());\n}\n\ntemplate &lt;typename T&gt;\nstatic bool equals(const std::vector&lt;T *&gt; &amp;a, const std::vector&lt;T *&gt; &amp;b) \n{\n  return std::equal(a.begin(), a.end(), b.begin() \n    [](T* ap, T* bp) -&gt; bool { return *ap == *bp; });\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1459369988, "last_edit_date": 1459369988, "creation_date": 1459366504, "answer_id": 36318096, "question_id": 36313446, "link": "https://stackoverflow.com/questions/36313446/how-to-determine-if-a-class-implements-operator-overloading/36318096#36318096", "title": "How to determine if a class implements != operator overloading?", "body": "<p>If you are interested in check whether there is an operator != defined in a class (and it has precisely given signature) you may want this approach (tests taken from marcinj's code):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;class T, class = void&gt;\nstruct has_not_equal: std::false_type { };\n\ntemplate &lt;class T&gt;\nstruct has_not_equal&lt;T, typename std::enable_if&lt;std::is_same&lt;decltype(static_cast&lt;bool (T::*)(const T&amp;)const&gt;(&amp;T::operator!=)), bool (T::*)(const T&amp;)const&gt;::value&gt;::type &gt;: std::true_type { };\n\nstruct sample1{\n    bool operator!=(const sample1&amp;) const { return true; }\n};\nstruct sample2{\n};\nstruct sample3:sample2 {\n  bool operator!=(const sample2&amp; b) const { return true; }\n};\n\nstruct sample4:sample2 {\n  bool operator!=(const sample2&amp; b) const { return true; }\n  bool operator!=(const sample4&amp; b) const { return true; }\n};\n\nint main(){\n\n    std::cout&lt;&lt;std::boolalpha;\n    std::cout&lt;&lt;has_not_equal&lt;int&gt;::value&lt;&lt;std::endl;\n    std::cout&lt;&lt;has_not_equal&lt;std::string&gt;::value&lt;&lt;std::endl;\n\n    std::cout&lt;&lt;has_not_equal&lt;sample1&gt;::value&lt;&lt;std::endl;\n    std::cout&lt;&lt;has_not_equal&lt;sample2&gt;::value&lt;&lt;std::endl;\n    std::cout&lt;&lt;has_not_equal&lt;sample3&gt;::value&lt;&lt;std::endl;\n    std::cout&lt;&lt;has_not_equal&lt;sample4&gt;::value&lt;&lt;std::endl;\n}\n</code></pre>\n\n<p>Output of the program:</p>\n\n<pre><code>false\nfalse\ntrue\nfalse\nfalse\ntrue\n</code></pre>\n\n<p>You may easily add allowed operator != overloads by adding specialization of the has_not_equal struct...</p>\n"}, {"tags": [], "owner": {"reputation": 36245, "user_id": 1137174, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/361fd9b1b32d13cd1c1dc03e5c6a2127?s=128&d=identicon&r=PG", "display_name": "Mike Lischke", "link": "https://stackoverflow.com/users/1137174/mike-lischke"}, "is_accepted": true, "score": 1, "last_activity_date": 1459500854, "last_edit_date": 1459500854, "creation_date": 1459417036, "answer_id": 36329603, "question_id": 36313446, "link": "https://stackoverflow.com/questions/36313446/how-to-determine-if-a-class-implements-operator-overloading/36329603#36329603", "title": "How to determine if a class implements != operator overloading?", "body": "<p>Even though the title of my question here says I'm looking for a way to determine if the != operator is defined, the real question (as you can read from the description and my comment) was how to ensure that I don't silently get wrong results for a type T which has no != operator defined. The existing answers brought up good points, but the real answer is this:</p>\n\n<p>1) You will get a compiler error on the <code>if (a[i] != b[i])</code> line if you instantiate the template with a value type array using a type that's missing the <code>!=</code> operator override (e.g. <code>std::vector&lt;sample2&gt;</code> from marcinj's answer) or you get hard to understand compiler error if you use <code>std::equal</code> instead. In this case the explicit comparison is much more helpful when looking for a solution.</p>\n\n<p>2) If you have a reference type in the vectors to compare you will at first get no problem at all (since there are comparison operators defined for references, even though they only do a flat comparison via the address values). If you want to ensure that the comparison works as if you had used value types (including deep comparison) then add a specialization for vectors with pointer types, as pointed out by Pixelchemist. However, I cannot get the std::equals variants to compile at the moment.</p>\n\n<p>At the end the solution that works for me is this:</p>\n\n<pre><code>template &lt;typename T&gt;\nstatic bool equals(const std::vector&lt;T&gt; &amp;a, const std::vector&lt;T&gt; &amp;b) {\n  if (a.size() != b.size())\n    return false;\n\n  for (size_t i = 0; i &lt; a.size(); ++i)\n    if (a[i] != b[i])\n      return false;\n\n  return true;\n}\n\ntemplate &lt;typename T&gt;\nstatic bool equals(const std::vector&lt;T*&gt; &amp;a, const std::vector&lt;T*&gt; &amp;b) {\n  if (a.size() != b.size())\n    return false;\n\n  for (size_t i = 0; i &lt; a.size(); ++i)\n    if (*a[i] != *b[i])\n      return false;\n\n  return true;\n}\n</code></pre>\n\n<p>Tested with the sample1/2/3/4 structs from marcinj's answer. It's important to note that the operator overloading must use a value type (<code>operator == (const sample1&amp;)</code>) instead of a reference type.</p>\n\n<p>I have still upvoted all answers that gave me useful information to get the final answer.</p>\n"}], "owner": {"reputation": 36245, "user_id": 1137174, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/361fd9b1b32d13cd1c1dc03e5c6a2127?s=128&d=identicon&r=PG", "display_name": "Mike Lischke", "link": "https://stackoverflow.com/users/1137174/mike-lischke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 36329603, "answer_count": 6, "score": 4, "last_activity_date": 1459500854, "creation_date": 1459352066, "question_id": 36313446, "link": "https://stackoverflow.com/questions/36313446/how-to-determine-if-a-class-implements-operator-overloading", "title": "How to determine if a class implements != operator overloading?", "body": "<p>Given the following function:</p>\n\n<pre><code>template &lt;typename T&gt;\nstatic bool equals(const std::vector&lt;T&gt; &amp;a, const std::vector&lt;T&gt; &amp;b) {\n  if (a.size() != b.size())\n    return false;\n\n  for (size_t i = 0; i &lt; a.size(); ++i)\n    if (a[i] != b[i]) // Requires that the != operator is supported by the template type.\n      return false;\n\n  return true;\n}\n</code></pre>\n\n<p>how can I determine if the given T overrides the <code>!=</code> operator? If someone uses a type without overloading it might end up using a simple binary comparison which might silently lead to wrong results. So I want to ensure only classes that have their own <code>!=</code> operator overloading can be used here.</p>\n"}, {"tags": ["c++", "header"], "comments": [{"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 3, "creation_date": 1459351908, "post_id": 36313267, "comment_id": 60250014, "body": "How are you compiling your code? or rather linking, it looks like you use class.cpp more than once during linking."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1459352093, "post_id": 36313267, "comment_id": 60250179, "body": "but ` error: multiple definition` does not indicate linker problems.."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1459352157, "post_id": 36313267, "comment_id": 60250234, "body": "I tried your code and had no errors compiling or linking. How are you building?"}, {"owner": {"reputation": 53, "user_id": 2719403, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f27b3a0bf27aa6af324fe6098f896b75?s=128&d=identicon&r=PG&f=1", "display_name": "Georgez", "link": "https://stackoverflow.com/users/2719403/georgez"}, "edited": false, "score": 0, "creation_date": 1459352478, "post_id": 36313267, "comment_id": 60250494, "body": "im using gnu compiler and codeblocks."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1459352582, "post_id": 36313267, "comment_id": 60250570, "body": "Can you get a build console and post the contents from doing a complete build?"}, {"owner": {"reputation": 53, "user_id": 2719403, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f27b3a0bf27aa6af324fe6098f896b75?s=128&d=identicon&r=PG&f=1", "display_name": "Georgez", "link": "https://stackoverflow.com/users/2719403/georgez"}, "edited": false, "score": 0, "creation_date": 1459352968, "post_id": 36313267, "comment_id": 60250881, "body": "<a href=\"https://gyazo.com/ac3e8ffe2204904aca423b18696f7c31\" rel=\"nofollow noreferrer\">gyazo.com/ac3e8ffe2204904aca423b18696f7c31</a>"}, {"owner": {"reputation": 53, "user_id": 2719403, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f27b3a0bf27aa6af324fe6098f896b75?s=128&d=identicon&r=PG&f=1", "display_name": "Georgez", "link": "https://stackoverflow.com/users/2719403/georgez"}, "edited": false, "score": 0, "creation_date": 1459352997, "post_id": 36313267, "comment_id": 60250902, "body": "thats a pic of the build console"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 5964547, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9vgEj_0Fco0/AAAAAAAAAAI/AAAAAAAAAwc/Fw7IoZsSBHk/photo.jpg?sz=128", "display_name": "Aadil Bhatti", "link": "https://stackoverflow.com/users/5964547/aadil-bhatti"}, "is_accepted": false, "score": 1, "last_activity_date": 1459353480, "last_edit_date": 1495540786, "creation_date": 1459353480, "answer_id": 36314014, "question_id": 36313267, "link": "https://stackoverflow.com/questions/36313267/ttrying-to-understand-classes-and-headers/36314014#36314014", "title": "Ttrying to understand Classes and headers", "body": "<p>How are you compiling the code? You need to make sure that you are building the specific \"class.o\" and \"main.o\" files separately before linking them together. Here is an example Makefile. </p>\n\n<pre><code>all: main\n\nmain: main.o class.o\n    g++ main.o class.o -o main\n\nmain.o: main.cpp class.h\n    g++ -c main.cpp\n\nclass.o: class.cpp class.h\n    g++ -c class.cpp\n</code></pre>\n\n<p>It looks like you are using double inclusion guards so I don't think that is the problem. Check out this answer for a more in-depth explanation of what is happening: <a href=\"https://stackoverflow.com/questions/17904643/error-with-multiple-definitions-of-function\">Error with multiple definitions of function</a></p>\n"}, {"comments": [{"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 53, "user_id": 2719403, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f27b3a0bf27aa6af324fe6098f896b75?s=128&d=identicon&r=PG&f=1", "display_name": "Georgez", "link": "https://stackoverflow.com/users/2719403/georgez"}, "edited": false, "score": 0, "creation_date": 1459360414, "post_id": 36314220, "comment_id": 60255607, "body": "@Georgez hmm; try cleaning your solution. Remove all of the old object files. Then recompile and rebuild."}], "tags": [], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "is_accepted": true, "score": 1, "last_activity_date": 1459354203, "creation_date": 1459354203, "answer_id": 36314220, "question_id": 36313267, "link": "https://stackoverflow.com/questions/36313267/ttrying-to-understand-classes-and-headers/36314220#36314220", "title": "Ttrying to understand Classes and headers", "body": "<p>From what you have shown here there should be no problems. What you could do to temporarily resolve this to find out if you are actually defining this function in several places is to wrap your class in a namespace.</p>\n\n<p><strong>class.h</strong></p>\n\n<pre><code>#ifndef CLASS_H_INCLUDED\n#define CLASS_H_INCLUDED\n\nnamespace myNamespace {\n\nclass Cat {\nprivate:\n    bool happy;\npublic:\n    void makehappy();\n    void makesad();\n    void speak();\n};\n\n} // namespace myNamespace\n\n#endif // CLASS_H_INCLUDED\n</code></pre>\n\n<p><strong>class.pp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"class.h\"\n\n// using namespace std; // Don't Use - This is Bad Practice\n                        // Can cause name clashing when trying to resolve name lookup\n\n\nnamespace myNamespace {\n\nvoid Cat::speak() {\n    if (happy) {\n        std::cout &lt;&lt; \"meoww\" &lt;&lt; std::endl;\n    } else {\n        std::cout &lt;&lt; \"sssss\" &lt;&lt; std::endl;\n    }\n}\n\nvoid Cat::makehappy() {\n    happy = true;\n}\n\nvoid Cat::makesad() {\n    happy = false;\n}\n\n} // namespace myNamespace\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"class.h\"\n// using namespace std; // Again -Bad Practice\n\nint main() {\n    using namespace myNamespace;    \n\n    Cat jim;\n    jim.makehappy();\n    jim.speak();\n\n    Cat george;\n    george.makesad();\n    george.speak();\n\n    return 0;\n}\n</code></pre>\n\n<p>Try this to see if you are getting the same compiler error. This should help you to see if you are defining this function in multiple spaces. Also by removing the <code>using namespace std;</code> and just using the scope resolution operator to the <code>std::</code> namespace will help to eliminate any possible problems and any possible future problems.</p>\n"}], "owner": {"reputation": 53, "user_id": 2719403, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f27b3a0bf27aa6af324fe6098f896b75?s=128&d=identicon&r=PG&f=1", "display_name": "Georgez", "link": "https://stackoverflow.com/users/2719403/georgez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 36314220, "answer_count": 2, "score": 0, "last_activity_date": 1459356748, "creation_date": 1459351636, "last_edit_date": 1459356748, "question_id": 36313267, "link": "https://stackoverflow.com/questions/36313267/ttrying-to-understand-classes-and-headers", "title": "Ttrying to understand Classes and headers", "body": "<p>**PROBLEM SOLVED. It appears that i had created an extra header by mistake, and since i deleted him , it worked.  **</p>\n\n<p>So i am trying to understand about classes and headers and how i can make them work together.\nI am following an online tutorial but it seems that something is going wrong in my code.\nThe problem is that when i try to run the <code>main</code> it gives me this error:\nmultiple definition of <code>Cat::speak()</code> and all the other functions.</p>\n\n<h1>main.cpp</h1>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"class.h\"\nusing namespace std;\n\nint main()\n{\n    Cat jim;\n    jim.makehappy();\n    jim.speak();\n\n    Cat george;\n    george.makesad();\n    george.speak();\n\n    return 0;\n}\n</code></pre>\n\n<h1>class.cpp</h1>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"class.h\"\nusing namespace std;\n\nvoid Cat::speak()\n{\n    if (happy)\n    {\n        cout &lt;&lt; \"meoww\" &lt;&lt; endl;\n    }\n    else\n    {\n        cout &lt;&lt; \"sssss\" &lt;&lt; endl;\n    }\n}\n\nvoid Cat::makehappy()\n{\n    happy = true;\n}\n\nvoid Cat::makesad()\n{\n    happy = false;\n}\n</code></pre>\n\n<h1>class.h</h1>\n\n<pre><code>#ifndef CLASS_H_INCLUDED\n#define CLASS_H_INCLUDED\n\nclass Cat\n{\nprivate:\n    bool happy;\npublic:\n    void makehappy();\n    void makesad();\n    void speak();\n};\n\n#endif // CLASS_H_INCLUDED\n</code></pre>\n"}, {"tags": ["c++", "html", "qt"], "comments": [{"owner": {"reputation": 20035, "user_id": 2971, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3f6251940b41a2251e7a9f4b745a7f2?s=128&d=identicon&r=PG", "display_name": "Magnus Hoff", "link": "https://stackoverflow.com/users/2971/magnus-hoff"}, "edited": false, "score": 1, "creation_date": 1459351647, "post_id": 36313183, "comment_id": 60249783, "body": "You say &quot;HTML5&quot;, but your DOCTYPE is pretty specifically saying &quot;XHTML 1.0&quot;. This might be incidental to your question, but there it is :)"}, {"owner": {"reputation": 3331, "user_id": 1747088, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QZWPt.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/1747088/james"}, "reply_to_user": {"reputation": 20035, "user_id": 2971, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3f6251940b41a2251e7a9f4b745a7f2?s=128&d=identicon&r=PG", "display_name": "Magnus Hoff", "link": "https://stackoverflow.com/users/2971/magnus-hoff"}, "edited": false, "score": 0, "creation_date": 1459351804, "post_id": 36313183, "comment_id": 60249926, "body": "Oh Yeah, That&#39;s strange considering the file was auto-generated by Qt Creator within a HTML5 project. I&#39;ve tried without that and it still doesn&#39;t work"}, {"owner": {"reputation": 20035, "user_id": 2971, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3f6251940b41a2251e7a9f4b745a7f2?s=128&d=identicon&r=PG", "display_name": "Magnus Hoff", "link": "https://stackoverflow.com/users/2971/magnus-hoff"}, "edited": false, "score": 0, "creation_date": 1459351845, "post_id": 36313183, "comment_id": 60249963, "body": "I haven&#39;t seen that <code>&lt;?c</code>-syntax before, but found this document: <a href=\"http://www.codeproject.com/Articles/336018/Building-C-Applications-with-HTML5\" rel=\"nofollow noreferrer\">codeproject.com/Articles/336018/&hellip;</a> It uses <code>out</code> rather than <code>cout</code>. Is that your problem?"}, {"owner": {"reputation": 3331, "user_id": 1747088, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QZWPt.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/1747088/james"}, "reply_to_user": {"reputation": 20035, "user_id": 2971, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3f6251940b41a2251e7a9f4b745a7f2?s=128&d=identicon&r=PG", "display_name": "Magnus Hoff", "link": "https://stackoverflow.com/users/2971/magnus-hoff"}, "edited": false, "score": 0, "creation_date": 1459352077, "post_id": 36313183, "comment_id": 60250162, "body": "Thanks for the link but still no job changing to <code>out</code> and rebuilding."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1459352954, "post_id": 36313183, "comment_id": 60250868, "body": "Where did you read about these code tags? Remember that you&#39;re still building a <i>Qt</i> application. Whatever you do must be supported by Qt! Unless you have URLs to Qt documentation demonstrating this technique, you are out of luck here."}, {"owner": {"reputation": 2519, "user_id": 202037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oktOo.png?s=128&g=1", "display_name": "Archie", "link": "https://stackoverflow.com/users/202037/archie"}, "edited": false, "score": 1, "creation_date": 1459353388, "post_id": 36313183, "comment_id": 60251167, "body": "It looks like your HTML is meant be processed by some kind of C interpreter on server side or something (like &lt;?php ... ?&gt;). Qt does not process your html, it just passes it to the WebKit browser as it is."}], "owner": {"reputation": 3331, "user_id": 1747088, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QZWPt.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/1747088/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459351428, "creation_date": 1459351428, "question_id": 36313183, "link": "https://stackoverflow.com/questions/36313183/simple-qt-html5", "title": "Simple Qt HTML5", "body": "<p>I have created a new HTML5 Qt app in Qt creator. The version I have is</p>\n\n<pre>\n<code>\nQt Creator 3.1.2 (opensource)\nBased on Qt 5.3.1 (MSVC 2010, 32 bit)\nBuilt on Jun 23 2014 at 04:13:10\nFrom revision a791e851a7\n</code>\n</pre>\n\n<p>I don't seem to be able to get any code in <code>&lt;?c</code> tags to work within the <code>HTML</code> file.</p>\n\n<p>For Instance I have this file:</p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /&gt;\n\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;a id=\"quit\"&gt;X&lt;/a&gt;\n    &lt;h1&gt;Hello&lt;/h1&gt;\n    &lt;h1&gt;HTML5&lt;/h1&gt;\n    &lt;h1&gt;World&lt;/h1&gt;\n    &lt;?c cout &lt;&lt; \"Hello World\" ?&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>But I never see the \"Hello World\" that should be produced by <code>cout</code>. Why is that?</p>\n"}, {"tags": ["c++", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 188, "user_id": 6025940, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f7881d1a844db75479cad003d88dbe0d?s=128&d=identicon&r=PG&f=1", "display_name": "george_t", "link": "https://stackoverflow.com/users/6025940/george-t"}, "edited": false, "score": 0, "creation_date": 1459351301, "post_id": 36313085, "comment_id": 60249489, "body": "error: (-215) size.width&gt;0 &amp;&amp; size.height&gt;0 in function imshow This happens now..."}, {"owner": {"reputation": 18834, "user_id": 13565, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/988a493e16f0e454c3585aed95db5e23?s=128&d=identicon&r=PG", "display_name": "Hannes Ovr&#233;n", "link": "https://stackoverflow.com/users/13565/hannes-ovr%c3%a9n"}, "reply_to_user": {"reputation": 188, "user_id": 6025940, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f7881d1a844db75479cad003d88dbe0d?s=128&d=identicon&r=PG&f=1", "display_name": "george_t", "link": "https://stackoverflow.com/users/6025940/george-t"}, "edited": false, "score": 0, "creation_date": 1459351395, "post_id": 36313085, "comment_id": 60249581, "body": "As the error somewhat cryptically tells you, the <code>Mat</code> you are passing to <code>imshow</code> is empty. I.e. at least one of its dimensions is zero. You should probably look over your matrices and see which one is used where and for what purpose."}], "tags": [], "owner": {"reputation": 18834, "user_id": 13565, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/988a493e16f0e454c3585aed95db5e23?s=128&d=identicon&r=PG", "display_name": "Hannes Ovr&#233;n", "link": "https://stackoverflow.com/users/13565/hannes-ovr%c3%a9n"}, "is_accepted": true, "score": 1, "last_activity_date": 1459351163, "creation_date": 1459351163, "answer_id": 36313085, "question_id": 36312935, "link": "https://stackoverflow.com/questions/36312935/dense-optical-flow-between-two-frames/36313085#36313085", "title": "Dense optical flow between two frames", "body": "<p>Thuis line </p>\n\n<pre><code>cvtColor(frame2, cflow, COLOR_GRAY2BGR);\n</code></pre>\n\n<p>is probably the culprit.\nOn a line above you load <code>frame2</code> as a color image using <code>frame2 = imread(\"./car2.jpg\", IMREAD_COLOR);</code> but now you are trying to convert it <em>from gray</em> instead, which seems illogical.</p>\n"}], "owner": {"reputation": 188, "user_id": 6025940, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f7881d1a844db75479cad003d88dbe0d?s=128&d=identicon&r=PG&f=1", "display_name": "george_t", "link": "https://stackoverflow.com/users/6025940/george-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "accepted_answer_id": 36313085, "answer_count": 1, "score": 0, "last_activity_date": 1459351163, "creation_date": 1459350792, "question_id": 36312935, "link": "https://stackoverflow.com/questions/36312935/dense-optical-flow-between-two-frames", "title": "Dense optical flow between two frames", "body": "<p>I am trying to compute dense optical flow using Farneback method and i face following error :  error: (-215) scn == 1 &amp;&amp; (dcn == 3 || dcn == 4) in function ipp_cvtColor</p>\n\n<p>My code : </p>\n\n<pre><code>Mat flow, cflow, frame1,frame2;\nUMat gray1,gray2, uflow;\nnamedWindow(\"flow\", 1);\n\n\nframe1 = imread(\"./car1.jpg\", IMREAD_COLOR);\nframe2 = imread(\"./car2.jpg\", IMREAD_COLOR);\n\ncvtColor(frame1, gray1, COLOR_BGR2GRAY);\ncvtColor(frame2, gray2, COLOR_BGR2GRAY);\n\n\ncalcOpticalFlowFarneback(gray2, gray1, uflow, 0.5, 3, 15, 3, 5, 1.2, 0);\ncvtColor(frame2, cflow, COLOR_GRAY2BGR);\nuflow.copyTo(flow);\ndrawOptFlowMap(flow, cflow, 16, 1.5, Scalar(0, 255, 0));\nimshow(\"flow\", cflow);\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1459351243, "post_id": 36312913, "comment_id": 60249436, "body": "You may sort you array first, then code to skip checked numbers is easy."}, {"owner": {"reputation": 37, "user_id": 5941698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/618adf1e4c3fced72e83c790b423d336?s=128&d=identicon&r=PG&f=1", "display_name": "ernie", "link": "https://stackoverflow.com/users/5941698/ernie"}, "edited": false, "score": 0, "creation_date": 1459351531, "post_id": 36312913, "comment_id": 60249691, "body": "I believe I am allowed to sort the array. In this case I would get {0,1,2,4,4,4,5,6,7,7,8,9} but its the skipping the next checked number part that has me stuck"}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 3, "creation_date": 1459351573, "post_id": 36312913, "comment_id": 60249719, "body": "You find 3 because you don&#39;t check if current number is already count as duplicate : the first 4, you find a duplicate, and the second one also. You have to check if the current number isn&#39;t in the begin of array. If it is, it&#39;s already count as duplicate, so no need to continue, you can pass to next number"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1459351622, "post_id": 36312913, "comment_id": 60249761, "body": "An other solution is to check with previous numbers (and if present skip it)."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1459359090, "post_id": 36312913, "comment_id": 60254839, "body": "@ernie To clarify what you are asking; are you asking how many different duplicates are found, or are you asking for how many numbers in total are duplicates? For example: { 1,1,2,2,2,3,3,3 }; The answer to first question would be 3 since there are 3 duplicates, and the 2nd answer would be that there are 8 numbers that are duplicates."}], "answers": [{"comments": [{"owner": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "edited": false, "score": 1, "creation_date": 1459351371, "post_id": 36313145, "comment_id": 60249558, "body": "<i>&quot;I have to do this using nested for loops and can not use vectors.&quot;</i>"}, {"owner": {"reputation": 18667, "user_id": 980344, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c4014c3c899f431c4b2cd1bb6ab0159c?s=128&d=identicon&r=PG&f=1", "display_name": "Luca Davanzo", "link": "https://stackoverflow.com/users/980344/luca-davanzo"}, "reply_to_user": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "edited": false, "score": 0, "creation_date": 1459351484, "post_id": 36313145, "comment_id": 60249661, "body": "map != vectors, btw you&#39;re right for &quot;nested loops&quot;"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1459352043, "post_id": 36313145, "comment_id": 60250136, "body": "yes maps are not the same as vectors but normally when someone says they can&#39;t use vectors it means it is homework and they typically cannot use any standard containers"}], "tags": [], "owner": {"reputation": 18667, "user_id": 980344, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c4014c3c899f431c4b2cd1bb6ab0159c?s=128&d=identicon&r=PG&f=1", "display_name": "Luca Davanzo", "link": "https://stackoverflow.com/users/980344/luca-davanzo"}, "is_accepted": false, "score": 0, "last_activity_date": 1459352398, "last_edit_date": 1459352398, "creation_date": 1459351327, "answer_id": 36313145, "question_id": 36312913, "link": "https://stackoverflow.com/questions/36312913/how-to-find-number-of-duplicates-in-an-array/36313145#36313145", "title": "How to find number of duplicates in an array?", "body": "<p>You can use a map, for instance, where key is number[i] and value is occurrences of number[i].</p>\n\n<pre><code>std::map&lt;int,int&gt; m;\nstd::map&lt;int,int&gt;::iterator it;\nfor(int i = 0; i &lt; num_elements; ++i) {\n   const int key = numbers[i];\n   int value = 0;\n   it = m.find(key)\n   if (it != m.end()) {\n      ++value;\n   }  \n   map.insert(std::make_pair(key,value));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 0, "last_activity_date": 1459352166, "last_edit_date": 1459352166, "creation_date": 1459351598, "answer_id": 36313249, "question_id": 36312913, "link": "https://stackoverflow.com/questions/36312913/how-to-find-number-of-duplicates-in-an-array/36313249#36313249", "title": "How to find number of duplicates in an array?", "body": "<p>Once you sort the array, instead of counting duplicates, count the number of transitions where <code>a[i-1] != a[i] &amp;&amp; a[i] == a[i+1]</code>, which will give the number of duplicate elements.  You have to guard for the boundaries though.</p>\n"}, {"tags": [], "owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "is_accepted": true, "score": 1, "last_activity_date": 1459351744, "creation_date": 1459351744, "answer_id": 36313305, "question_id": 36312913, "link": "https://stackoverflow.com/questions/36312913/how-to-find-number-of-duplicates-in-an-array/36313305#36313305", "title": "How to find number of duplicates in an array?", "body": "<p>The best way would be to use <code>std::vector</code> and <code>std::map</code> as already mentioned by others. But since you can only use nested loops and arrays here's an example that works:</p>\n\n<pre><code>const int num_elements = 12;\nint numbers[num_elements] = { 2, 6, 7, 4, 5, 4, 1, 8, 9, 0, 7, 4 };\nint counter = 0;\n\nfor ( int i = 0; i &lt; num_elements; i++ ) {\n    for ( int j = i + 1; j &lt; num_elements; j++ ) {\n        if ( numbers[j] == numbers[i] ) {\n            counter++;\n            for ( int k = 0; k &lt; i; k++ ) {\n                if ( numbers[k] == numbers[j] ) {\n                    counter--;\n                    break;\n                }\n            }\n            break;\n        }\n    }\n}\n\ncout &lt;&lt; counter &lt;&lt; endl;\n</code></pre>\n\n<p>It will print <code>2</code> and not <code>3</code>. Simply, when we find a duplicate, we go back and check if we already met this number.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 5941698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/618adf1e4c3fced72e83c790b423d336?s=128&d=identicon&r=PG&f=1", "display_name": "ernie", "link": "https://stackoverflow.com/users/5941698/ernie"}, "edited": false, "score": 0, "creation_date": 1459353067, "post_id": 36313326, "comment_id": 60250939, "body": "Although it is the much,  much longer way to do it, this is basically what we are expected to do. I just tried stuff out with the suggestions and basically go this same exact thing. Thank you !"}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "reply_to_user": {"reputation": 37, "user_id": 5941698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/618adf1e4c3fced72e83c790b423d336?s=128&d=identicon&r=PG&f=1", "display_name": "ernie", "link": "https://stackoverflow.com/users/5941698/ernie"}, "edited": false, "score": 0, "creation_date": 1459362457, "post_id": 36313326, "comment_id": 60256995, "body": "@ernie it&#39;s just a naive implementation. Free to you to improve ;) happy that help you"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 37, "user_id": 5941698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/618adf1e4c3fced72e83c790b423d336?s=128&d=identicon&r=PG&f=1", "display_name": "ernie", "link": "https://stackoverflow.com/users/5941698/ernie"}, "edited": false, "score": 0, "creation_date": 1459368574, "post_id": 36313326, "comment_id": 60260829, "body": "@ernie If this solved your problem don&#39;t forget to accept."}], "tags": [], "owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "is_accepted": false, "score": 3, "last_activity_date": 1459351795, "creation_date": 1459351795, "answer_id": 36313326, "question_id": 36312913, "link": "https://stackoverflow.com/questions/36312913/how-to-find-number-of-duplicates-in-an-array/36313326#36313326", "title": "How to find number of duplicates in an array?", "body": "<p>You find 3 because you don't check if current number is already count as duplicate : the first 4, you find a duplicate, and the second one also. You have to check if the current number isn't in the begin of array. If it is, it's already count as duplicate, so no need to continue, you can pass to next number </p>\n\n<pre><code>int main() {\n    const int num_elements = 12;\n    int numbers[num_elements] = { 2, 6, 7, 4, 5, 4, 1, 8, 9, 0, 7, 4 };\n\n\n    for(int i = 0; i &lt; num_elements; ++i){\n        int oneCounterMax = 0;  \n        bool notAlreadyCheck = true;  \n\n        for(int j = 0; j &lt; i-1; ++j) {\n            if (numbers[i] == numbers[j]){\n                notAlreadyCheck = false;\n            }\n        }\n        if (notAlreadyCheck) {    \n            for(int j = i + 1; j &lt; num_elements; ++j) {\n                if((numbers[i] == numbers[j]) &amp;&amp; (oneCounterMax &lt; 1)) {\n                    ++numduplicates;\n                    ++oneCounterMax;\n                }       \n            }\n        } \n    }       \n    cout &lt;&lt; numduplicates &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3197, "user_id": 5853530, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3b9567983f2e1d6c2315fa26202accb6?s=128&d=identicon&r=PG&f=1", "display_name": "Rajeev Singh", "link": "https://stackoverflow.com/users/5853530/rajeev-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1459352745, "last_edit_date": 1459352745, "creation_date": 1459352159, "answer_id": 36313492, "question_id": 36312913, "link": "https://stackoverflow.com/questions/36312913/how-to-find-number-of-duplicates-in-an-array/36313492#36313492", "title": "How to find number of duplicates in an array?", "body": "<p>First you have to sort the array,then skip the repeated elements  and increase the value of <strong><code>numduplicates</code></strong></p>\n\n<pre><code>int main() {\n    const int num_elements = 12;\n    int numbers[num_elements] = { 2, 6, 7, 4, 5, 4, 1, 8, 9, 0, 7, 4 };\n\n    sort(numbers,numbers+12);//sorting\n    int  numduplicates = 0;\n    for(int i = 0; i &lt; num_elements; ++i){\n        if((i+1)&lt;num_elements &amp;&amp; numbers[i] == numbers[i+1]) {\n            ++numduplicates;\n            while((i+1)&lt;num_elements &amp;&amp; numbers[i] == numbers[i+1])\n               i++;\n       }       \n    }       \n    cout &lt;&lt; numduplicates &lt;&lt; endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1459356392, "post_id": 36313504, "comment_id": 60253177, "body": "For sorted array you can count duplicates just in one pass without inner loops"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1459412354, "post_id": 36313504, "comment_id": 60278072, "body": "My solution uses passes over elements only once, i.e., its complexity is O(n), even though with inner loop. Your solution is fine, but it does not distinguish elements being in a sequence 2x, 3x, 4x, ... It depends whether you need to count multiplicities or not."}], "tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": false, "score": 0, "last_activity_date": 1459352193, "creation_date": 1459352193, "answer_id": 36313504, "question_id": 36312913, "link": "https://stackoverflow.com/questions/36312913/how-to-find-number-of-duplicates-in-an-array/36313504#36313504", "title": "How to find number of duplicates in an array?", "body": "<p>If you are allowed to sort the array, you can write something like this:</p>\n\n<pre><code>std::sort(numbers, numbers + num_elements);\n\nint k = 0;\nwhile (k &lt; num_elements - 1) {\n   int i = 1;\n   while ((k + i &lt; num_elements) &amp;&amp; (numbers[k + i] == numbers[k])) \n      i++;\n   if (i &gt; 1)\n      ... // numbers[k] is a duplicate with multiplicity i\n   k += i;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1459356517, "post_id": 36313534, "comment_id": 60253244, "body": "Just use int to remember value and you do not need boolean flag and complex conditions"}], "tags": [], "owner": {"reputation": 619, "user_id": 1222783, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/OSGjU.jpg?s=128&g=1", "display_name": "Nothing More", "link": "https://stackoverflow.com/users/1222783/nothing-more"}, "is_accepted": false, "score": 0, "last_activity_date": 1459352243, "creation_date": 1459352243, "answer_id": 36313534, "question_id": 36312913, "link": "https://stackoverflow.com/questions/36312913/how-to-find-number-of-duplicates-in-an-array/36313534#36313534", "title": "How to find number of duplicates in an array?", "body": "<p>First sort the array and then iterate over this sorted array. Use a bool flag to save the current state about whether this number has been counted as a duplicate number. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\nint main()\n{\n    const int num_elements = 12;\n    int numbers[num_elements] = { 2, 6, 7, 4, 5, 4, 1, 8, 9, 0, 7, 4 };\n\n    std:sort(numbers, numbers+num_elements);\n    int duplicate_count = 0;\n    bool duplicate = false;\n    for(int i = 1; i &lt; num_elements; i++)\n    {\n        if(numbers[i] != numbers[i-1])\n            duplicate = false;\n        else if(numbers[i] == numbers[i-1] &amp;&amp; !duplicate)\n        {\n            duplicate_count++;\n            duplicate = true;\n        }\n    }\n    cout &lt;&lt; \"duplicate count: \" &lt;&lt; duplicate_count &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "is_accepted": false, "score": 1, "last_activity_date": 1459354065, "last_edit_date": 1459354065, "creation_date": 1459353738, "answer_id": 36314080, "question_id": 36312913, "link": "https://stackoverflow.com/questions/36312913/how-to-find-number-of-duplicates-in-an-array/36314080#36314080", "title": "How to find number of duplicates in an array?", "body": "<p>Most of the answers are good enough, but not striving too far from your solution, there is also a clever trick to be had!:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    const int num_elements = 12;\n    int numbers[num_elements] = { 2, 6, 7, 4, 5, 4, 1, 8, 9, 0, 7, 4 };\n\n    unsigned int numduplicates = 0;\n    for (int i = 0; i &lt; num_elements; ++i) {\n        int counter = 0; // changed name\n        for (int j = i + 1; j &lt; num_elements; ++j) {\n            if (numbers[i] == numbers[j]) { // changed condition\n                ++counter; // only increment counter\n            }\n        }\n\n        if (counter == 1) { // added if statement\n            ++numduplicates;\n        }\n    }\n    cout &lt;&lt; numduplicates &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Instead of only counting 1 of the duplicates (with <code>oneCounterMax</code>), we count all of them. Then later we check if the number we counted is exactly 1.</p>\n\n<p>This does 2 things:</p>\n\n<ul>\n<li>We counted at least 1 duplicate, so there is a duplicate of the current number. but...</li>\n<li>If we counted more then 1 duplicate, we don't increment the duplicate counter, because it will already be done later on in our iteration, when we count again for the second to last duplicate.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 0, "last_activity_date": 1459357216, "last_edit_date": 1459357216, "creation_date": 1459356749, "answer_id": 36315066, "question_id": 36312913, "link": "https://stackoverflow.com/questions/36312913/how-to-find-number-of-duplicates-in-an-array/36315066#36315066", "title": "How to find number of duplicates in an array?", "body": "<p>Sounds like homework in which case your teacher may be unhappy with this approach even though it doesn't use <code>vector</code>.</p>\n\n<p>Given the input array:</p>\n\n<pre><code>int numbers[num_elements] = { 2, 6, 7, 4, 5, 4, 1, 8, 9, 0, 7, 4 };\n</code></pre>\n\n<p>You can find the unique size of the array by using a <a href=\"http://en.cppreference.com/w/cpp/container/set\" rel=\"nofollow\"><code>set</code></a>, because a <code>set</code>:</p>\n\n<blockquote>\n  <p>Is an associative container that contains a sorted set of <strong>unique</strong> objects of type <code>Key</code></p>\n</blockquote>\n\n<p>In C++14 you can build the <code>set</code> like this:</p>\n\n<pre><code>const auto numduplicates = num_elements - set&lt;int&gt;(cbegin(numbers), cend(numbers)).size();\n</code></pre>\n\n<p><a href=\"http://ideone.com/OpGbNl\" rel=\"nofollow\"><kbd>Live Example</kbd></a></p>\n\n<p>In C++11 you can build the <code>set</code> like this:</p>\n\n<pre><code>const auto numduplicates = num_elements - set&lt;int&gt;(numbers, next(numbers, num_elements)).size();\n</code></pre>\n\n<p>And before that you could build the <code>set</code> like this:</p>\n\n<pre><code>const auto numduplicates = num_elements - set&lt;int&gt;(numbers, numbers + num_elements).size();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1459357171, "creation_date": 1459357171, "answer_id": 36315194, "question_id": 36312913, "link": "https://stackoverflow.com/questions/36312913/how-to-find-number-of-duplicates-in-an-array/36315194#36315194", "title": "How to find number of duplicates in an array?", "body": "<p>Simplest implementation for sorted array:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n\nint main()\n{\n    int numbers[] = { 2, 6, 7, 4, 5, 4, 1, 8, 9, 0, 7, 4 };\n\n    auto b = std::begin( numbers );\n    auto e = std::end( numbers );\n    std:sort( b, e );\n    auto ne = std::unique( b, e );\n    std::cout &lt;&lt; \"duplicates:\" &lt;&lt; std::distance( ne, e ) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>or by one loop:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n\nint main()\n{\n    int numbers[] = { 2, 6, 7, 4, 5, 4, 1, 8, 9, 0, 7, 4 };\n\n    auto b = std::begin( numbers );\n    auto e = std::end( numbers );\n    std:sort( b, e );\n\n    int dups = 0;\n    int v = *b++;\n    for( auto it = b; it != e; ++it ) {\n       if( v != *it ) v = *it;\n       else ++dups;\n    }\n    std::cout &lt;&lt; \"duplicates:\" &lt;&lt; dups &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5941698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/618adf1e4c3fced72e83c790b423d336?s=128&d=identicon&r=PG&f=1", "display_name": "ernie", "link": "https://stackoverflow.com/users/5941698/ernie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 36313305, "answer_count": 10, "score": 0, "last_activity_date": 1459357291, "creation_date": 1459350728, "last_edit_date": 1459352624, "question_id": 36312913, "link": "https://stackoverflow.com/questions/36312913/how-to-find-number-of-duplicates-in-an-array", "title": "How to find number of duplicates in an array?", "body": "<p>I have a given array and I need to determine how to find the number of duplicates in it. I have to do this using nested for loops and can not use vectors. I have tried it so far and I get 3, but the answer should be 2 since only the numbers 4 and 7 repeat. I see why I am getting 3 since it checks 4 two times but I can't seem to figure out how to adjust it so It never checks 4 again once it found a match. </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    const int num_elements = 12;\n    int numbers[num_elements] = { 2, 6, 7, 4, 5, 4, 1, 8, 9, 0, 7, 4 };\n\n    unsigned int numduplicates = 0;    \n    for(int i = 0; i &lt; num_elements; ++i){\n        int oneCounterMax = 0;\n        for(int j = i + 1; j &lt; num_elements; ++j) {\n            if((numbers[i] == numbers[j]) &amp;&amp; (oneCounterMax &lt; 1)) {\n                ++numduplicates;\n                ++oneCounterMax;\n            }       \n\n        }\n    }       \n    cout &lt;&lt; numduplicates &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "parsing", "cscope"], "comments": [{"owner": {"reputation": 4258, "user_id": 1085699, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4Bql4.jpg?s=128&g=1", "display_name": "Nathaniel Johnson", "link": "https://stackoverflow.com/users/1085699/nathaniel-johnson"}, "edited": false, "score": 0, "creation_date": 1459350959, "post_id": 36312852, "comment_id": 60249211, "body": "<a href=\"https://github.com/Andersbakken/rtags\" rel=\"nofollow noreferrer\">github.com/Andersbakken/rtags</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1459351702, "post_id": 36312852, "comment_id": 60249838, "body": "As a wild guess, could the issue be that CScope is for parsing the C language and not C++?"}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1459355173, "post_id": 36312852, "comment_id": 60252320, "body": "If you run the preprocessor over the source code before parsing it, you don&#39;t have an preprocessor conditional blocks to worry about.   Do you want to find function calls inside disabled pp conditional blocks?  What if the conditional block is wrapped around the function header line?  What if it is wrapped around parts of the argument list?"}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1459355316, "post_id": 36312852, "comment_id": 60252418, "body": "The CScope web page clearly says it is for &quot;C&quot;.  <a href=\"http://cscope.sourceforge.net/\" rel=\"nofollow noreferrer\">cscope.sourceforge.net</a>"}], "answers": [{"comments": [{"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1459355029, "post_id": 36314439, "comment_id": 60252224, "body": "Does that work for GCC/Clang compatible code? I don&#39;t think so. [What dialect of C++ does OP have?]   It also isn&#39;t clear that OP wants to <i>navigate</i> the code so much as to make a list.  OP should tell us."}, {"owner": {"reputation": 190, "user_id": 1693881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1f307d50eb1da6b1ffa341a1482401c?s=128&d=identicon&r=PG", "display_name": "And Wan", "link": "https://stackoverflow.com/users/1693881/and-wan"}, "reply_to_user": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1459355647, "post_id": 36314439, "comment_id": 60252657, "body": "gcc? as long as it&#39;s standard C/C++ syntax then it&#39;ll be able to parse it all."}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1459364837, "post_id": 36314439, "comment_id": 60258555, "body": "Nobody I know writes &quot;standard&quot; C/C++ syntax.  Somehow something specific to dialect always creeps in somewhere."}, {"owner": {"reputation": 190, "user_id": 1693881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1f307d50eb1da6b1ffa341a1482401c?s=128&d=identicon&r=PG", "display_name": "And Wan", "link": "https://stackoverflow.com/users/1693881/and-wan"}, "reply_to_user": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1459415865, "post_id": 36314439, "comment_id": 60280450, "body": "I meant just normal C/C++.  <a href=\"http://www.theregister.co.uk/2015/10/21/microsoft_promises_clang_for_windows_in_november_visual_c_update/\" rel=\"nofollow noreferrer\">theregister.co.uk/2015/10/21/&hellip;</a> I heard Visual Studio 2015 will have platform toolset to let us compile for linux?  <a href=\"https://blogs.msdn.microsoft.com/vcblog/2016/03/30/visual-c-for-linux-development/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/vcblog/2016/03/30/&hellip;</a>"}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1459421721, "post_id": 36314439, "comment_id": 60284702, "body": "a) My point is that no real program contains what you call &quot;just normal C/C++&quot;.  So if you try to put a non MS C++ program into MSVS, it won&#39;t compile.  b)  Don&#39;t confuse compiling MSVS C++ in a Linux-compatible form, with compiling typical Linux C/C++ source code into a Linux-compatible form."}, {"owner": {"reputation": 190, "user_id": 1693881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1f307d50eb1da6b1ffa341a1482401c?s=128&d=identicon&r=PG", "display_name": "And Wan", "link": "https://stackoverflow.com/users/1693881/and-wan"}, "reply_to_user": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1459425991, "post_id": 36314439, "comment_id": 60287877, "body": "no no no. we are not compiling GNU/Clang C++ files in MSVC, ofcourse not. What I meant was that MSVC (Visual Studio 2013/15) will parse the files and generate a browsable source browser/database.  You can press F12 to &quot;go to definition&quot;  (or declaration) You can:  - find usages  - view caller graph/hierarchy  - navigate to  and more  You said you wanted a parser... like if you typed an object, it will code-complete the object&#39;s properties/members, etc. This is what MSVS"}, {"owner": {"reputation": 190, "user_id": 1693881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1f307d50eb1da6b1ffa341a1482401c?s=128&d=identicon&r=PG", "display_name": "And Wan", "link": "https://stackoverflow.com/users/1693881/and-wan"}, "reply_to_user": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1459426409, "post_id": 36314439, "comment_id": 60288194, "body": "I use Visual Studio 2013/15 just for source browsing ... but I can only build the files on another compiler.  Not sure if you can easily import/read the Clang/gnu projects into Visual Studio.. but am sure there&#39;s converters...  or just create a new Visual Studio project and add all files in. (again, we are not wanting to compile/build the project... just load it to browse, navigate, etc.)"}], "tags": [], "owner": {"reputation": 190, "user_id": 1693881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1f307d50eb1da6b1ffa341a1482401c?s=128&d=identicon&r=PG", "display_name": "And Wan", "link": "https://stackoverflow.com/users/1693881/and-wan"}, "is_accepted": false, "score": 0, "last_activity_date": 1459415988, "last_edit_date": 1459415988, "creation_date": 1459354873, "answer_id": 36314439, "question_id": 36312852, "link": "https://stackoverflow.com/questions/36312852/parsing-c-code-cscope/36314439#36314439", "title": "Parsing C++ code - CSCope", "body": "<p>I recommend loading the project in (free community versions) Visual Studio 2013/2015. It's got so much better navigation/source-browsing. It's quite fast in building &amp; indexing the source code.</p>\n\n<p><a href=\"https://blogs.msdn.microsoft.com/vcblog/2016/03/30/visual-c-for-linux-development/\" rel=\"nofollow\">https://blogs.msdn.microsoft.com/vcblog/2016/03/30/visual-c-for-linux-development/</a></p>\n"}], "owner": {"reputation": 2359, "user_id": 3801449, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/04t78.jpg?s=128&g=1", "display_name": "Eenoku", "link": "https://stackoverflow.com/users/3801449/eenoku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 893, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459415988, "creation_date": 1459350561, "question_id": 36312852, "link": "https://stackoverflow.com/questions/36312852/parsing-c-code-cscope", "title": "Parsing C++ code - CSCope", "body": "<p>I'm analyzing some large C++ projects. The only functionality I really need is finding function calls.</p>\n\n<p>For this I'm using <code>cscope</code> right now, but I discovered one big problem - it seems, that <code>cscope</code> is not able to find methods, e.g. <code>object.function()</code>.</p>\n\n<p>So, is it possible to change somehow the settings of <code>cscope</code>? Or, if it's not possible to parse C++ in a realiable way with <code>cscope</code>, could you, please, recommend some other parser, which is \"better-equipped\"?</p>\n\n<hr>\n\n<p>I'm using <code>cscope</code> as simply as possible, like this:</p>\n\n<pre><code>cscope -k -L3importantFunc path_to_some_file\n</code></pre>\n\n<p>I'm not creating the database separately, I think it should be sufficient this way for one specific file.</p>\n\n<hr>\n\n<p>I've already tried Clang, but it wasn't much better, since it isn't possible to look for functions enclosed in conditional-compilation blocks.</p>\n"}, {"tags": ["c++", "free"], "comments": [{"owner": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "edited": false, "score": 1, "creation_date": 1459350614, "post_id": 36312812, "comment_id": 60248971, "body": "The advice is to show the code. Or to profile it. Or break into a debugger when application wait for something too long."}, {"owner": {"reputation": 535, "user_id": 3837735, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/d0a7315fe1daf169ea87c6ef41e8f39a?s=128&d=identicon&r=PG&f=1", "display_name": "Krapow", "link": "https://stackoverflow.com/users/3837735/krapow"}, "reply_to_user": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "edited": false, "score": 0, "creation_date": 1459350770, "post_id": 36312812, "comment_id": 60249075, "body": "I already profiled it and I saw free took 95% of the running time..."}, {"owner": {"reputation": 7325, "user_id": 29762, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dcd05bd4d19c1aeffec0a380edfaaa5a?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/29762/ryan"}, "edited": false, "score": 1, "creation_date": 1459350818, "post_id": 36312812, "comment_id": 60249097, "body": "Advice... yes, 1) don&#39;t use <code>malloc</code>/<code>free</code> in C++ if you can help it, and 2) prefer a smart pointer (<code>auto_ptr</code>, <code>unique_ptr</code>, etc.) instead of <code>new</code>/<code>delete</code>."}, {"owner": {"reputation": 535, "user_id": 3837735, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/d0a7315fe1daf169ea87c6ef41e8f39a?s=128&d=identicon&r=PG&f=1", "display_name": "Krapow", "link": "https://stackoverflow.com/users/3837735/krapow"}, "edited": false, "score": 0, "creation_date": 1459350900, "post_id": 36312812, "comment_id": 60249151, "body": "I use delete, not free, but delete calls free. And if I use an unique_ptr, it will call delete which calls free and free will still be slow, in my logic."}, {"owner": {"reputation": 7325, "user_id": 29762, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dcd05bd4d19c1aeffec0a380edfaaa5a?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/29762/ryan"}, "edited": false, "score": 1, "creation_date": 1459351159, "post_id": 36312812, "comment_id": 60249368, "body": "You are assuming <code>unique_ptr</code> will cause the same behavior. Most likely there is a flaw in your allocation and deallocation logic that causes this behavior, and a smart pointer would help that scenario. Another tip, try to use <code>std:vector</code> or other STL container for arrays."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1459351266, "post_id": 36312812, "comment_id": 60249461, "body": "Well, delete shouldn&#39;t be doing anything too length aside from calling all of the dtors. Are you using a user defined type? What is the dtor doing?"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 3, "creation_date": 1459351359, "post_id": 36312812, "comment_id": 60249544, "body": "And I second the <code>std::vector</code> vote. Sometimes when working with intrinsics I&#39;ve used <code>_aligned_malloc</code> but even then I&#39;ll wrap it in a unique_ptr."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1459352184, "post_id": 36312812, "comment_id": 60250257, "body": "If you can, reuse the memory.  A technique in embedded systems is to allocate an array at the beginning of the program and pass pointers to it; instead of allocating, deleting, allocating, deleting, etc.  This technique also reduces the effects of fragmentation on your program."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1459354245, "post_id": 36312812, "comment_id": 60251770, "body": "Without knowing what you repeatedly alloc and free, hard to say. But I once worked on machines having as little as 640Mo RAM, and learned that fragmenting the heap was bad. The worse is allocate 2 blocs, free first and allocate a larger one. There is no garbage collector in C++, but if you use too much memory (including heap gaps), you could start swapping on disk. You should say more on you new[] delete[] usage..."}], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 3837735, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/d0a7315fe1daf169ea87c6ef41e8f39a?s=128&d=identicon&r=PG&f=1", "display_name": "Krapow", "link": "https://stackoverflow.com/users/3837735/krapow"}, "edited": false, "score": 0, "creation_date": 1459431015, "post_id": 36314613, "comment_id": 60291731, "body": "Thanks for the suggestions ! Qt is highly multithreaded and I also use one or two thread, it is possible that it falls into a bad state."}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 0, "last_activity_date": 1459355445, "creation_date": 1459355445, "answer_id": 36314613, "question_id": 36312812, "link": "https://stackoverflow.com/questions/36312812/delete-free-performance-variation/36314613#36314613", "title": "delete/free performance variation", "body": "<p>Advice: Something is wrong here. Something is not working the way it is supposed to work. There have been some suggestions for micro-optimisations, but that isn't going to help, until you figure out what is happening. </p>\n\n<p>If you can open that file in five seconds, then it shouldn't take more a second time. It's possible that it is the other way round, if you read a 2GB file and the second time it's all cached in RAM. But not what you are experiencing. </p>\n\n<p>Possibilities are for example accessing a server over a bad network connection, or some undefined behaviour, like </p>\n\n<pre><code>size_t size; // Forgot to initialise\nvoid* p = malloc (size);\nmemset (p, 0, size);\nfree (p);\n</code></pre>\n\n<p>might take no time at all once, and 130 seconds another time. Your app might use multithreading and get itself into a bad state sometimes where no progress is made for ages. </p>\n\n<p>I'd just launch the app, break into the debugger after 60 seconds, and check what the hell it is doing :-) Or use a profiler :-)</p>\n"}], "owner": {"reputation": 535, "user_id": 3837735, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/d0a7315fe1daf169ea87c6ef41e8f39a?s=128&d=identicon&r=PG&f=1", "display_name": "Krapow", "link": "https://stackoverflow.com/users/3837735/krapow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1459355445, "creation_date": 1459350446, "last_edit_date": 1459354325, "question_id": 36312812, "link": "https://stackoverflow.com/questions/36312812/delete-free-performance-variation", "title": "delete/free performance variation", "body": "<p>I developed an application that open and process files under Qt Creator with Qt 5.5 and MSVC 2013, under windows 7.</p>\n\n<p>I have seen some weird lag on my application: when I open a file, it takes 5 seconds. Relaunch the app, it takes more than 1 minutes. Relaunch: 5 seconds.</p>\n\n<p>It seems random, and when I profiled my app (with Very Sleepy CS), I saw that delete took 0.03 seconds of the total 130 seconds, and free took 124 seconds, and new 3 seconds.</p>\n\n<p>I use some new array[] and delete [] in my code.\nI don't know what can cause this kind of bug... The other opened programs didn't even changed.</p>\n\n<p>Any advise / idea?</p>\n\n<p>EDIT: Let's be more precise:\nI want to know if something could cause free to be randomly efficient/ ineficient.\nI profiled my app and the bottleneck is free.\nI don't call directly free because I use delete [].\nI need to use delete [] to work on array which are the fastest way in my case and performance is very important.</p>\n"}, {"tags": ["c++", "boost", "linker", "shared-libraries", "dynamic-linking"], "comments": [{"owner": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "edited": false, "score": 0, "creation_date": 1459350489, "post_id": 36312754, "comment_id": 60248878, "body": "Did you try <code>ldd -v</code> to check whether any the libraries it links against links to Boost?"}], "answers": [{"tags": [], "owner": {"reputation": 38, "user_id": 3259253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e49e5c0feb820512989c89be42f3be?s=128&d=identicon&r=PG", "display_name": "Aron Wolf", "link": "https://stackoverflow.com/users/3259253/aron-wolf"}, "is_accepted": false, "score": 0, "last_activity_date": 1459356060, "creation_date": 1459356060, "answer_id": 36314838, "question_id": 36312754, "link": "https://stackoverflow.com/questions/36312754/remove-library-dependency/36314838#36314838", "title": "Remove library dependency", "body": "<p>all you have done is correct. Something that happen in c++ is that is easy to  forget so recompile something. remove all .o files (and other things) and try it again</p>\n"}, {"comments": [{"owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "edited": false, "score": 0, "creation_date": 1459436570, "post_id": 36322771, "comment_id": 60296070, "body": "I used that command specifically thorugh a makefile, and ran <code>ldd</code> on the .so file generated. Both the library itself and binaries linked to it show boost dependencies."}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 0, "last_activity_date": 1459389015, "last_edit_date": 1592644375, "creation_date": 1459389015, "answer_id": 36322771, "question_id": 36312754, "link": "https://stackoverflow.com/questions/36312754/remove-library-dependency/36322771#36322771", "title": "Remove library dependency", "body": "<blockquote>\n<p><code>g++ -shared -Wl,-soname,myclass.so.1 -o lib/myclass.so.1 myclass.o -lc</code></p>\n<p>However after compiling I notice there is still a boost dependency</p>\n</blockquote>\n<p>You mean &quot;after linking&quot;.</p>\n<p>There is <em>no way</em> for the link command you gave to produce a library that depends on boost, unless your <code>g++</code> is actually an alias for something else.</p>\n<p>If it is an alias, don't use it. If you have a hacked-up <code>g++</code> or if you modified its <code>specs</code> file, don't do that.</p>\n<p>If the command you gave is not the <em>actual</em> command you used, show us the actual command (and remove boost from it).</p>\n"}], "owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1433, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1459389015, "creation_date": 1459350283, "last_edit_date": 1459351260, "question_id": 36312754, "link": "https://stackoverflow.com/questions/36312754/remove-library-dependency", "title": "Remove library dependency", "body": "<p>I have some boost-dependent code I want to compile as a dynamic library:</p>\n\n<pre><code>g++ -Wall -fPIC -o myclass.o -c myclass.cpp \ng++ -shared -Wl,-soname,myclass.so.1 -o lib/myclass.so.1 myclass.o -lc\n</code></pre>\n\n<p>However after compiling I notice there is still a boost dependency (I'm checking with <code>ldd</code>)</p>\n\n<pre><code>ldd lib/myclass.so.1\nlinux-vdso.so.1 (0x00007fff741fd000)\nlibboost_system.so.1.60.0 =&gt; /usr/lib/libboost_system.so.1.60.0 (0x00007f7945649000)\nlibboost_serialization.so.1.60.0 =&gt; /usr/lib/libboost_serialization.so.1.60.0 (0x00007f794540b000)\nlibstdc++.so.6 =&gt; /usr/lib/libstdc++.so.6 (0x00007f7945089000)\nlibm.so.6 =&gt; /usr/lib/libm.so.6 (0x00007f7944d83000)\nlibc.so.6 =&gt; /usr/lib/libc.so.6 (0x00007f79449e2000)\n/usr/lib64/ld-linux-x86-64.so.2 (0x00005590726ae000)\nlibgcc_s.so.1 =&gt; /usr/lib/libgcc_s.so.1 (0x00007f79447cc000)\nlibrt.so.1 =&gt; /usr/lib/librt.so.1 (0x00007f79445c3000)\nlibpthread.so.0 =&gt; /usr/lib/libpthread.so.0 (0x00007f79443a6000)\n</code></pre>\n\n<p>Is there any way to remove boost dynamic dependency on my shared library (pack the current boost version of the objects I'm calling in the .so)?</p>\n"}]