[{"tags": ["java", "c++", "performance", "algorithm", "recursion"], "comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 2, "creation_date": 1428537437, "post_id": 29527342, "comment_id": 47208984, "body": "Tail-call optimization is not guaranteed in C++, so it&#39;s non-portable to rely on it."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1428538734, "post_id": 29527342, "comment_id": 47209292, "body": "For some programming languages like <i>Prolog</i> and <i>Haskell</i> recursion is the only means to perform iterations. Evidently in such case, tail recursion is implemented, since otherwise one would easily run out of call stack."}, {"owner": {"reputation": 679, "user_id": 2593600, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/z3Rfd.jpg?s=128&g=1", "display_name": "Thomas Hsieh", "link": "https://stackoverflow.com/users/2593600/thomas-hsieh"}, "edited": false, "score": 0, "creation_date": 1428539025, "post_id": 29527342, "comment_id": 47209377, "body": "I see, so even for c, loops are a better choice to perform iterations over recursions?"}, {"owner": {"reputation": 9267, "user_id": 2284221, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/120d229a55c7a6ce3037e6932c190616?s=128&d=identicon&r=PG", "display_name": "Patrick Collins", "link": "https://stackoverflow.com/users/2284221/patrick-collins"}, "edited": false, "score": 1, "creation_date": 1428619265, "post_id": 29527342, "comment_id": 47252104, "body": "@ThomasHsieh It&#39;s a question of what the algorithm is most naturally suited to; rarely is the overhead from a recursive call significant."}, {"owner": {"reputation": 679, "user_id": 2593600, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/z3Rfd.jpg?s=128&g=1", "display_name": "Thomas Hsieh", "link": "https://stackoverflow.com/users/2593600/thomas-hsieh"}, "edited": false, "score": 0, "creation_date": 1428619516, "post_id": 29527342, "comment_id": 47252186, "body": "Oh ok I see. It&#39;s rather unnatural for me to, for instance, write a factorial function with loops. That&#39;s exactly what drove me to this concern. Thanks!"}], "answers": [{"owner": {"reputation": 16944, "user_id": 1401879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261a5f5af181ba929a5b066b19ae124f?s=128&d=identicon&r=PG", "display_name": "Stefan Haustein", "link": "https://stackoverflow.com/users/1401879/stefan-haustein"}, "is_accepted": true, "score": 1, "last_activity_date": 1428539294, "creation_date": 1428539294, "answer_id": 29527671, "question_id": 29527342, "link": "https://stackoverflow.com/questions/29527342/tail-recursive-programming-in-java/29527671#29527671", "title": "Tail-recursive programming in Java", "body": "<p>Tail-recursive programming in Java is not strictly wrong, it's just inefficient and may easily lead to stack overflows. </p>\n\n<p>Given that tail recursion optimization is not guaranteed in C++ (as pointed out in one of the comments), I'd avoid it general in Java, Javascript, C++ etc.</p>\n"}], "owner": {"reputation": 679, "user_id": 2593600, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/z3Rfd.jpg?s=128&g=1", "display_name": "Thomas Hsieh", "link": "https://stackoverflow.com/users/2593600/thomas-hsieh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "closed_date": 1428543451, "accepted_answer_id": 29527671, "answer_count": 1, "score": 1, "last_activity_date": 1580036943, "creation_date": 1428537278, "last_edit_date": 1580036943, "question_id": 29527342, "link": "https://stackoverflow.com/questions/29527342/tail-recursive-programming-in-java", "closed_reason": "Opinion-based", "title": "Tail-recursive programming in Java", "body": "<p>I've been coding in C/C++ for a few years, and I just started Java recently. In one of the projects I've done, I was doing tail-recursion on a big data set (I apologize for not providing the code because I can't find it...). I realized an obvious performance issue as opposed to that in C/C++. Then I read a few articles about why JVM does not support tail call optimization (yet?) and that Java programmers usually, if not always, use loops in place of tail-recursive calls. </p>\n\n<p>As such, is tail-recursive programming semantically wrong in Java, or is it just a bad practice in general, regardless of the language used?</p>\n\n<p>Is there any difference between the following two Java functions performance-wise and semant**nic-wise?</p>\n\n<p><strong>non-recursive</strong></p>\n\n<pre><code>int factorial(int n)\n{\n    int result = 1;\n    for (int i=1; i&lt;=n; i++) \n        result *= i;\n\n    return result;\n}\n</code></pre>\n\n<p><strong>recursive</strong></p>\n\n<pre><code>int factorial(int n)\n{\n    if (n == 1)\n        return 1;\n\n    return factorial(n-1) * n;\n}\n</code></pre>\n\n<p>Also, does it make any difference to change the recursive version to the following?</p>\n\n<pre><code>int factorial(int n)\n{\n    if (n == 1)\n        return 1;\n\n    //below is changed\n    int result = factorial(n-1) * n;\n    return result;\n}\n</code></pre>\n"}, {"tags": ["c++", "avr", "atmelstudio"], "comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1428537347, "post_id": 29527279, "comment_id": 47208963, "body": "Your version of <code>snprintf</code> must be non-standard if it requires <code>uint8_t*</code> See: <a href=\"http://en.cppreference.com/w/cpp/io/c/fprintf\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/c/fprintf</a> For the second parameter, you should tie it to your array <code>str</code> somehow instead of using a magic number, so that if <code>str</code> changes size, the value is updated automatically."}], "answers": [{"owner": {"reputation": 95, "user_id": 2961897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f8e44370a4d5a01264f6b768c50b02?s=128&d=identicon&r=PG&f=1", "display_name": "seansy", "link": "https://stackoverflow.com/users/2961897/seansy"}, "is_accepted": false, "score": 2, "last_activity_date": 1428538349, "creation_date": 1428538349, "answer_id": 29527517, "question_id": 29527279, "link": "https://stackoverflow.com/questions/29527279/avr-atmega169p-lcd-display-using-c/29527517#29527517", "title": "AVR ATMega169P LCD display using C++", "body": "<p>You are attempting to store an unsigned char array into a signed char array. Either declare str as unsigned char:</p>\n\n<pre><code>unsigned char str[100];\n</code></pre>\n\n<p>or cast str in the argument as unsigned char:</p>\n\n<pre><code>snprintf((uint8_t*)str, 100, '%d in',rpm);\n</code></pre>\n\n<p>In this case <code>uint8_t</code> and <code>unsigned char</code> are equivalent.</p>\n"}], "owner": {"reputation": 21, "user_id": 3505220, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/7e0c82adad5b5af31f0abfb6e691612d?s=128&d=identicon&r=PG&f=1", "display_name": "tcas271", "link": "https://stackoverflow.com/users/3505220/tcas271"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428538349, "creation_date": 1428536904, "question_id": 29527279, "link": "https://stackoverflow.com/questions/29527279/avr-atmega169p-lcd-display-using-c", "title": "AVR ATMega169P LCD display using C++", "body": "<p>I am trying to display something to the LCD screen on an ATMega 169P microcontroller. When using C, I am able to use this code:</p>\n\n<pre><code>char str[50];\nint value = 100;\nstr = sprintf(str, \"some text %d\", value);\nLCD_puts(str);\n</code></pre>\n\n<p>and it will display fine. LCD_puts is a method given to us by my teacher.\nHowever, I am trying to use C++ for my assignment, and I cannot get LCD_puts() to work. I've used sprintf and snprintf and I receive the following compiler error when using snprintf. The code I am using is below also. (Apologies for the formatting, I cannot post pictures).</p>\n\n<pre><code>char str[100];\nint rpm = 100; //Genaric value\n\nsnprintf(str, 100, '%d in',rpm);\nLCD_puts(str);\n</code></pre>\n\n<p>invalid conversion from 'char*' to 'unint8_t*' {aka unsigned char*}'[-fpermissive]</p>\n\n<p>I don't think my exact code is required, I only need to know why this error would be caused and if there is a C++ function that is the equivalent to sprintf that I could use. I will post my exact code if needed however. </p>\n"}, {"tags": ["c++", "boost-asio"], "answers": [{"comments": [{"owner": {"reputation": 74, "user_id": 409808, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c39673f2bc1e380622e2063090443b58?s=128&d=identicon&r=PG", "display_name": "Michael K.", "link": "https://stackoverflow.com/users/409808/michael-k"}, "edited": false, "score": 0, "creation_date": 1428540440, "post_id": 29527619, "comment_id": 47209744, "body": "I can&#39;t believe it was as simple as changing &quot;this&quot; to &quot;shared_from_this()&quot;.  Thank you very much for your help :)  As for the other things you pointed out, I was planning on doing those, but didn&#39;t as I couldn&#39;t get the code I had to work as it should.  Again, thank you."}], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 1, "last_activity_date": 1428539669, "last_edit_date": 1428539669, "creation_date": 1428539045, "answer_id": 29527619, "question_id": 29527175, "link": "https://stackoverflow.com/questions/29527175/invalid-instance-variable-in-asio-completion-handler/29527619#29527619", "title": "Invalid instance variable in Asio completion handler", "body": "<p>Firstly, you should use <code>shared_from_this</code> to prevent <code>tcp_connection</code> to be \"collected\" when there are only extant async operations:</p>\n\n<pre><code>    socket_.async_receive(asio::buffer(buf, 4096), 0,\n        bind(&amp;tcp_connection::handle_receive, shared_from_this()/*HERE!!*/, \n        buf,\n        std::placeholders::_1, std::placeholders::_2));\n</code></pre>\n\n<hr>\n\n<p>Secondly, your <code>tcp_connection</code> class should implement Rule Of Three (at least cleanup <code>crypt_</code> in the destructor and prohibit copy/assignment).</p>\n\n<p>You also don't free up <code>buf</code> in your current sample.</p>\n\n<p>Of course, in general, just use smart pointers for all of these.</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/c6bbd9386d13d534\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n"}], "owner": {"reputation": 74, "user_id": 409808, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c39673f2bc1e380622e2063090443b58?s=128&d=identicon&r=PG", "display_name": "Michael K.", "link": "https://stackoverflow.com/users/409808/michael-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 29527619, "answer_count": 1, "score": 1, "last_activity_date": 1428629556, "creation_date": 1428536202, "last_edit_date": 1428629556, "question_id": 29527175, "link": "https://stackoverflow.com/questions/29527175/invalid-instance-variable-in-asio-completion-handler", "title": "Invalid instance variable in Asio completion handler", "body": "<p>I've set up a simple async tcp server using Asio (non-boost), which pretty much follows the code used here: <a href=\"http://think-async.com/Asio/asio-1.11.0/doc/asio/tutorial/tutdaytime3.html\" rel=\"nofollow\">http://think-async.com/Asio/asio-1.11.0/doc/asio/tutorial/tutdaytime3.html</a></p>\n\n<p>I'm experiencing an issue where attempting to access a variable of the current tcp_connection instance inside the completion handler for async_read_some/async_receive throws an error.  The variable in question is simply a pointer to an instance of an encryption class that I have created.  It seems that this pointer becomes invalid (address of 0xFEEEFEEE) once the completion handler is called.  Here's the tcp_connection class that gets created once a connection from a client is made:</p>\n\n<pre><code>class tcp_connection\n    : public enable_shared_from_this&lt;tcp_connection&gt; {\npublic:\n    typedef shared_ptr&lt;tcp_connection&gt; pointer;\n\n    static pointer create(asio::io_service &amp;ios) {\n        return pointer(new tcp_connection(ios));\n    }\n\n    tcp::socket &amp;socket() {\n    return socket_;\n    }\n\n    void start() {\n        byte* buf = new byte[4096];\n\n        socket_.async_receive(asio::buffer(buf, 4096), 0,\n            bind(&amp;tcp_connection::handle_receive, this,\n            buf,\n            std::placeholders::_1, std::placeholders::_2));\n    }\n\nprivate:\n    tcp_connection(asio::io_service &amp;ios)\n        : socket_(ios) {\n        crypt_ = new crypt();\n    }\n\n    void handle_receive(byte* data, const asio::error_code &amp;err, size_t len) {\n        cout &lt;&lt; \"Received packet of length: \" &lt;&lt; len &lt;&lt; endl;\n\n        crypt_-&gt;decrypt(data, 0, len);  // This line causes a crash, as the crypt_ pointer is invalid.\n\n        for (int i = 0; i &lt; len; ++i)\n            cout &lt;&lt; hex &lt;&lt; setfill('0') &lt;&lt; setw(2) &lt;&lt; (int)data[i] &lt;&lt; \", \";\n\n        cout &lt;&lt; endl;\n    }\n\n    tcp::socket socket_;\n    crypt* crypt_;\n};\n</code></pre>\n\n<p>I'm assuming this has something to do with the way Asio uses threads internally.  I would have thought that the completion handler (handle_receive) would be invoked with the current tcp_connection instance, though.</p>\n\n<p>Is there something I'm missing?  I'm not too familiar with Asio.  Thanks in advance.</p>\n"}, {"tags": ["c++", "windows", "unicode", "encoding"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1428537004, "post_id": 29527078, "comment_id": 47208857, "body": "It is not a problem with GetWindowText.  Consoles are stuck in the 1980s and have the user-friendliness of a stone brick.  You&#39;ll have to switch to better encoding, like utf-8, use SetConsoleCP(CP_UTF8).  And change its font."}, {"owner": {"reputation": 378, "user_id": 2330143, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/95a600c4c9e618a2dc3f43a0103eeddd?s=128&d=identicon&r=PG", "display_name": "Stephen Eckels", "link": "https://stackoverflow.com/users/2330143/stephen-eckels"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1428538050, "post_id": 29527078, "comment_id": 47209135, "body": "Writing to a file instead of printing to a console produced the exact same issue."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1428538423, "post_id": 29527078, "comment_id": 47209219, "body": "What did the debugger tell you?"}, {"owner": {"reputation": 378, "user_id": 2330143, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/95a600c4c9e618a2dc3f43a0103eeddd?s=128&d=identicon&r=PG", "display_name": "Stephen Eckels", "link": "https://stackoverflow.com/users/2330143/stephen-eckels"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1428539306, "post_id": 29527078, "comment_id": 47209437, "body": "Writing to the console, and not setting the streams locale was the issue, you guys got me looking at output rather than code and i quickly figured out the locale issue, thank you."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1428543584, "post_id": 29527078, "comment_id": 47210646, "body": "Also look at <code>MessageBoxW()</code> or <code>OutputDebugStringW()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 378, "user_id": 2330143, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/95a600c4c9e618a2dc3f43a0103eeddd?s=128&d=identicon&r=PG", "display_name": "Stephen Eckels", "link": "https://stackoverflow.com/users/2330143/stephen-eckels"}, "edited": false, "score": 0, "creation_date": 1428539254, "post_id": 29527173, "comment_id": 47209423, "body": "This was the issue, also note that when i at first attempted to write to the file i did not set the locale, causing the same issue. After setting the locale use std::wofstream.imbue(std::locale(&quot;&quot;)) it worked as it should. Thank you."}], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": true, "score": 2, "last_activity_date": 1428536197, "creation_date": 1428536197, "answer_id": 29527173, "question_id": 29527078, "link": "https://stackoverflow.com/questions/29527078/getwindowtext-cant-handle-trademark-symbol/29527173#29527173", "title": "GetWindowText Can&#39;t Handle TradeMark Symbol", "body": "<p>CMD consoles don't handle Unicode well.  Send the output to a file and open it in and editor, and I suspect you'll get the actual character you expect.</p>\n"}], "owner": {"reputation": 378, "user_id": 2330143, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/95a600c4c9e618a2dc3f43a0103eeddd?s=128&d=identicon&r=PG", "display_name": "Stephen Eckels", "link": "https://stackoverflow.com/users/2330143/stephen-eckels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 29527173, "answer_count": 1, "score": 1, "last_activity_date": 1428536197, "creation_date": 1428535544, "question_id": 29527078, "link": "https://stackoverflow.com/questions/29527078/getwindowtext-cant-handle-trademark-symbol", "title": "GetWindowText Can&#39;t Handle TradeMark Symbol", "body": "<pre><code>HWND ForeWindow = GetForegroundWindow();\nwchar_t WindowTxt[1024] = { L'\\0' };\nGetWindowTextW(ForeWindow, WindowTxt, 1024);\nwprintf(L\"%s\\n\", WindowTxt);\nstd::wstring Str(WindowTxt);\nstd::wcout &lt;&lt; L\"Wnd: \" &lt;&lt; Str &lt;&lt; L\"\\n\";\n</code></pre>\n\n<p>Using the above code to get the window of skype which is \"Skype\u2122\" i get the output:</p>\n\n<blockquote>\n  <p>\"Skype?\"</p>\n</blockquote>\n\n<p>(the wcout line fails to execute)</p>\n\n<p>1) Why is the wide character version of GetWindowText unable to handle this character</p>\n\n<p>2) Why does std::wstring fail to parse the wchar_t array and then print it to the console</p>\n"}, {"tags": ["c++", "visual-studio", "debugging", "compiler-optimization"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1428535861, "post_id": 29527050, "comment_id": 47208500, "body": "There is no conflict between /Zi and /Od.  If you use /Ox then you get a &quot;best effort&quot; from the PDB.  It is serviceable, not ideal.  Using the /PDBSTRIPPED linker option is pretty common for the release build."}, {"owner": {"reputation": 2527, "user_id": 1997735, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/xLtbM.jpg?s=128&g=1", "display_name": "Betty Crokker", "link": "https://stackoverflow.com/users/1997735/betty-crokker"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1428589444, "post_id": 29527050, "comment_id": 47234219, "body": "Thanks!  Why did you put this is a comment and not an answer?"}], "owner": {"reputation": 2527, "user_id": 1997735, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/xLtbM.jpg?s=128&g=1", "display_name": "Betty Crokker", "link": "https://stackoverflow.com/users/1997735/betty-crokker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1428535414, "creation_date": 1428535414, "question_id": 29527050, "link": "https://stackoverflow.com/questions/29527050/c-compiler-interaction-between-zi-and-od", "title": "C++ Compiler - Interaction between /Zi and /Od?", "body": "<p>In a release build on Visual Studio 2008 (though this probably applies to any Microsoft compiler), I can set /Zi (\"Produces a program database (PDB) that contains type information and symbolic debugging information for use with the debugger. The symbolic debugging information includes the names and types of variables, as well as functions and line numbers.\") and also /Ox (\"Full Optimization\").</p>\n\n<p>These two flags are valid together, but seem to be in conflict.  One of the things the compiler might choose to do to fully optimize the code, is to rearrange code and change which code is in which line, but that screws up the information that the program database is compiling.</p>\n\n<p>When I have both flags, which one \"wins\"?  Does my code get fully optimized, and some line numbers are not available?  Or does the optimizer get set to \"less-than-full\", so that it leaves line numbers alone?</p>\n"}, {"tags": ["c++", "nim-lang"], "answers": [{"comments": [{"owner": {"reputation": 1067, "user_id": 311381, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6cb33c48bb858ba027b3450b8bc07bb1?s=128&d=identicon&r=PG", "display_name": "dhasenan", "link": "https://stackoverflow.com/users/311381/dhasenan"}, "edited": false, "score": 0, "creation_date": 1428604074, "post_id": 29538492, "comment_id": 47243850, "body": "That would work if I wanted to wrap <code>Foo::Bar&lt;T&gt;</code>. I don&#39;t know how to make it work with <code>Foo&lt;T&gt;::Bar</code>."}, {"owner": {"reputation": 358, "user_id": 1781410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d04bf1a9b96eeed7b8a1409312d2ec4?s=128&d=identicon&r=PG", "display_name": "endragor", "link": "https://stackoverflow.com/users/1781410/endragor"}, "reply_to_user": {"reputation": 1067, "user_id": 311381, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6cb33c48bb858ba027b3450b8bc07bb1?s=128&d=identicon&r=PG", "display_name": "dhasenan", "link": "https://stackoverflow.com/users/311381/dhasenan"}, "edited": false, "score": 0, "creation_date": 1428635572, "post_id": 29538492, "comment_id": 47256635, "body": "A more concrete example would help to understand your use case. I&#39;m not sure why difference between <code>Foo::Bar&lt;T&gt;</code> and <code>Foo&lt;T&gt;::Bar</code> matters to you."}, {"owner": {"reputation": 1067, "user_id": 311381, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6cb33c48bb858ba027b3450b8bc07bb1?s=128&d=identicon&r=PG", "display_name": "dhasenan", "link": "https://stackoverflow.com/users/311381/dhasenan"}, "edited": false, "score": 0, "creation_date": 1428674340, "post_id": 29538492, "comment_id": 47276390, "body": "Updated example. Vector::Iterator&lt;int&gt; uses Vector as a namespace, and Vector is an uninstantiated template, not a type or a namespace. It&#39;s illegal to use uninstantiated templates in C++. Then it uses Iterator as a template, and Iterator is not a template, just a type inside a templated type. Vector&lt;int&gt;::Iterator is a struct inside an instantiated template and works as expected. This isn&#39;t some strange edge case of the language; everyone who&#39;s worked with the STL has seen a std::vector&lt;int&gt;::iterator."}, {"owner": {"reputation": 358, "user_id": 1781410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d04bf1a9b96eeed7b8a1409312d2ec4?s=128&d=identicon&r=PG", "display_name": "endragor", "link": "https://stackoverflow.com/users/1781410/endragor"}, "reply_to_user": {"reputation": 1067, "user_id": 311381, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6cb33c48bb858ba027b3450b8bc07bb1?s=128&d=identicon&r=PG", "display_name": "dhasenan", "link": "https://stackoverflow.com/users/311381/dhasenan"}, "edited": false, "score": 0, "creation_date": 1428677297, "post_id": 29538492, "comment_id": 47278493, "body": "In Nim, you should just add <code>iterator items[T](v: Vector[T]): T</code> in your module. There is no need in a separate class. Even if there would be a need, I don&#39;t see a problem in having a separate <code>VectorIterator[T]</code> class. Bottom line is - there is no way to have nested types in Nim, because there is no point in that. So you should do some refactoring for the cases where you have nested types in C++."}, {"owner": {"reputation": 1067, "user_id": 311381, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6cb33c48bb858ba027b3450b8bc07bb1?s=128&d=identicon&r=PG", "display_name": "dhasenan", "link": "https://stackoverflow.com/users/311381/dhasenan"}, "edited": false, "score": 0, "creation_date": 1428777690, "post_id": 29538492, "comment_id": 47311567, "body": "You&#39;re still not understanding. I want to add a <code>type VectorIterator[T]</code> which maps to <code>Vector&lt;T&gt;::Iterator</code>. I could add a <code>Vector::Iterator&lt;T&gt;</code>, but that doesn&#39;t match the C++ type. I don&#39;t have control over the C++ type. I need to know if I can set any options, use a particular format of import specification, with <code>{.importcpp.}</code> to map a type to <code>Vector&lt;T&gt;::Iterator</code>."}], "owner": {"reputation": 358, "user_id": 1781410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d04bf1a9b96eeed7b8a1409312d2ec4?s=128&d=identicon&r=PG", "display_name": "endragor", "link": "https://stackoverflow.com/users/1781410/endragor"}, "is_accepted": false, "score": 0, "last_activity_date": 1428582451, "creation_date": 1428582451, "answer_id": 29538492, "question_id": 29526958, "link": "https://stackoverflow.com/questions/29526958/wrapping-nested-templated-types-in-nim/29538492#29538492", "title": "Wrapping nested templated types in nim", "body": "<p>I think there is no much sense in creating nested types in Nim, because minimal unit of encapsulation is module.\nSo you should just create a separate <code>FooBar[T]</code> type in the same module.</p>\n"}, {"owner": {"reputation": 4905, "user_id": 35511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6O2yC.jpg?s=128&g=1", "display_name": "zah", "link": "https://stackoverflow.com/users/35511/zah"}, "is_accepted": true, "score": 5, "last_activity_date": 1428967045, "creation_date": 1428967045, "answer_id": 29616619, "question_id": 29526958, "link": "https://stackoverflow.com/questions/29526958/wrapping-nested-templated-types-in-nim/29616619#29616619", "title": "Wrapping nested templated types in nim", "body": "<p>I've recently added the support for wrapping such nested types in the compiler. You'll need to use the latest code from the <strong>devel</strong> branch. Here is how it can be done:</p>\n\n<pre><code>{.emit: \"\"\"\n\ntemplate &lt;class T&gt;\nstruct Vector {\n  struct Iterator {};\n};\n\n\"\"\".}\n\ntype\n  Vector {.importcpp: \"Vector\".} [T] = object\n  VectorIterator {.importcpp: \"Vector&lt;'0&gt;::Iterator\".} [T] = object\n\nvar it: VectorIterator[int]\n</code></pre>\n\n<p>The relevant details in the manual can be found <a href=\"https://github.com/Araq/Nim/blob/6fb372d96bade748aa6cb3484fef2118b4585f26/doc/nimc.txt#L599\" rel=\"noreferrer\">here</a> and <a href=\"https://github.com/Araq/Nim/blob/6fb372d96bade748aa6cb3484fef2118b4585f26/doc/nimc.txt#L497\" rel=\"noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 1067, "user_id": 311381, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6cb33c48bb858ba027b3450b8bc07bb1?s=128&d=identicon&r=PG", "display_name": "dhasenan", "link": "https://stackoverflow.com/users/311381/dhasenan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 0, "accepted_answer_id": 29616619, "answer_count": 2, "score": 6, "last_activity_date": 1428967045, "creation_date": 1428534939, "last_edit_date": 1428777953, "question_id": 29526958, "link": "https://stackoverflow.com/questions/29526958/wrapping-nested-templated-types-in-nim", "title": "Wrapping nested templated types in nim", "body": "<p>I have a C++ type like:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Vector {\n  struct Iterator {\n  };\n};\n</code></pre>\n\n<p>And in C++ I can use <code>Iterator</code> as <code>Vector&lt;int&gt;::Iterator</code>.</p>\n\n<p>How do I wrap this to use it from Nim? c2nim emits</p>\n\n<pre><code>type Vector[T] {.importcpp...} = object\n  type Iterator[T] {.importcpp...}\n</code></pre>\n\n<p>which doesn't compile because nim doesn't have nested types, and would produce <code>Vector&lt;T&gt;::Iterator&lt;T&gt;</code> rather than <code>Vector&lt;T&gt;::Iterator</code>.</p>\n\n<p>I can use non-nested types in Nim:</p>\n\n<pre><code>type VectorIterator[T] {.importcpp: \"Vector::Iterator\".}\nvar v : VectorIterator[cint]\n</code></pre>\n\n<p>And this naturally produces <code>Vector::Iterator&lt;int&gt;</code>, which is wrong (it should be <code>Vector&lt;int&gt;::Iterator</code>).</p>\n\n<p>Is there a way to change the import specification to produce the correct output?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1428533330, "post_id": 29526640, "comment_id": 47207736, "body": "<code>std::map&lt;int, std::string&gt;</code>, populate the map, then randomly choose the index. btw, this is not a good question for SO, as it is primarily opinion based."}, {"owner": {"reputation": 3, "user_id": 4766389, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qoVp_esIS0w/AAAAAAAAAAI/AAAAAAAAADU/CSMd0z9Azxo/photo.jpg?sz=128", "display_name": "Colin S.", "link": "https://stackoverflow.com/users/4766389/colin-s"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1428533510, "post_id": 29526640, "comment_id": 47207787, "body": "Oh, my apologies. I was hoping it&#39;d be okay as I&#39;m not looking for a single way. I&#39;ll edit it. ^.^"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1428533577, "post_id": 29526640, "comment_id": 47207808, "body": "try reading this first: <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 318, "user_id": 4759917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3a2DX.jpg?s=128&g=1", "display_name": "Hailey", "link": "https://stackoverflow.com/users/4759917/hailey"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1428533586, "post_id": 29526640, "comment_id": 47207812, "body": "@vsoftco This isn&#39;t really opinion based. It might be too broad, but it&#39;s not opinion based: a program like that has a very logical flow. Also, what would <code>map&lt;int,string&gt;</code> have that <code>vector&lt;string&gt;</code> doesn&#39;t? Just curious."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 318, "user_id": 4759917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3a2DX.jpg?s=128&g=1", "display_name": "Hailey", "link": "https://stackoverflow.com/users/4759917/hailey"}, "edited": false, "score": 0, "creation_date": 1428533694, "post_id": 29526640, "comment_id": 47207849, "body": "@Hailey when I said opinion based I meant that there will be lots of ways of doing it, depending on the preference. You just gave an example: <code>vector&lt;string&gt;</code> vs <code>map&lt;int, string&gt;</code>. And yes, it is also too broad."}, {"owner": {"reputation": 318, "user_id": 4759917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3a2DX.jpg?s=128&g=1", "display_name": "Hailey", "link": "https://stackoverflow.com/users/4759917/hailey"}, "edited": false, "score": 0, "creation_date": 1428533887, "post_id": 29526640, "comment_id": 47207916, "body": "&quot;Primarily Opinion Based&quot; does not mean &quot;may have some variation in implementation&quot;. In fact, the description of POB specfically says &quot;Many good questions generate some degree of opinion based on expert experience&quot;."}, {"owner": {"reputation": 3, "user_id": 4766389, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qoVp_esIS0w/AAAAAAAAAAI/AAAAAAAAADU/CSMd0z9Azxo/photo.jpg?sz=128", "display_name": "Colin S.", "link": "https://stackoverflow.com/users/4766389/colin-s"}, "edited": false, "score": 1, "creation_date": 1428533932, "post_id": 29526640, "comment_id": 47207924, "body": "Okay, please avoid arguing! Cheers! I tried to be more specific in my question. My apologies for that."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4766389, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qoVp_esIS0w/AAAAAAAAAAI/AAAAAAAAADU/CSMd0z9Azxo/photo.jpg?sz=128", "display_name": "Colin S.", "link": "https://stackoverflow.com/users/4766389/colin-s"}, "edited": false, "score": 0, "creation_date": 1428535814, "post_id": 29526696, "comment_id": 47208486, "body": "Thank you for the answer! Both of you guys helped a great deal."}], "owner": {"reputation": 318, "user_id": 4759917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3a2DX.jpg?s=128&g=1", "display_name": "Hailey", "link": "https://stackoverflow.com/users/4759917/hailey"}, "is_accepted": true, "score": 1, "last_activity_date": 1428533522, "last_edit_date": 1495540247, "creation_date": 1428533522, "answer_id": 29526696, "question_id": 29526640, "link": "https://stackoverflow.com/questions/29526640/what-are-some-ways-to-go-about-making-a-program-that-will-randomly-pick-between/29526696#29526696", "title": "What are some ways to go about making a program that will randomly pick between 10-20 strings and display them to a user in C++?", "body": "<p>Such a program would be composed of three parts:</p>\n\n<ul>\n<li>Acquire the questions</li>\n</ul>\n\n<p>The questions would have to be in a file with something like</p>\n\n<pre><code>What is the capital of Arkansas? Little Rock\n</code></pre>\n\n<p>Put them all in a text file, one per line. Read them in to an array of strings, like in <a href=\"https://stackoverflow.com/a/13035743/4759917\">this answer</a>.</p>\n\n<ul>\n<li>Print out random questions from the array and accept inputs.</li>\n</ul>\n\n<p>Don't forget to split it into the question and answer based on the location of the <code>?</code>. This means you'll need only one ? per question. If the answer meets the answer after the ?, increment your correct counter. Either way, increment your total counter.</p>\n\n<ul>\n<li>compare the results</li>\n</ul>\n\n<p>At the end, give the user a report of how many they got right or wrong.</p>\n\n<p>Each of these are simple problems you can tackle one at a time, until you have your complete solution. :-)</p>\n\n<p>When you're done, look at the </p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 4766389, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qoVp_esIS0w/AAAAAAAAAAI/AAAAAAAAADU/CSMd0z9Azxo/photo.jpg?sz=128", "display_name": "Colin S.", "link": "https://stackoverflow.com/users/4766389/colin-s"}, "edited": false, "score": 0, "creation_date": 1428535488, "post_id": 29526980, "comment_id": 47208402, "body": "Let&#39;s take this a step further... You run the program, it says &quot;Capital of US&quot;, the user has to press enter to get &quot;Washington&quot;. Click again to get the second question. Would this same method work?"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 3, "user_id": 4766389, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qoVp_esIS0w/AAAAAAAAAAI/AAAAAAAAADU/CSMd0z9Azxo/photo.jpg?sz=128", "display_name": "Colin S.", "link": "https://stackoverflow.com/users/4766389/colin-s"}, "edited": false, "score": 0, "creation_date": 1428535582, "post_id": 29526980, "comment_id": 47208433, "body": "@ColinS. in principle yes, but you have to add additional logic (<code>if&#47;else</code>, reading the input etc.). If you&#39;re not familiar with that, you better get yourself a good introductory C++ book <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a> Basically Hailey&#39;s answer describes in a nutshell what you have to do, now try implementing it. What I wanted to mention in my answer was how to make sure you can go over all strings in random order, without repeating."}, {"owner": {"reputation": 3, "user_id": 4766389, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qoVp_esIS0w/AAAAAAAAAAI/AAAAAAAAADU/CSMd0z9Azxo/photo.jpg?sz=128", "display_name": "Colin S.", "link": "https://stackoverflow.com/users/4766389/colin-s"}, "edited": false, "score": 0, "creation_date": 1428535793, "post_id": 29526980, "comment_id": 47208480, "body": "Wonderful. You both rock. - The basics are covered, the shuffles/indexes in the actual code threw me off a &#39;bit. Cheers!"}], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": false, "score": 0, "last_activity_date": 1428535047, "creation_date": 1428535047, "answer_id": 29526980, "question_id": 29526640, "link": "https://stackoverflow.com/questions/29526640/what-are-some-ways-to-go-about-making-a-program-that-will-randomly-pick-between/29526980#29526980", "title": "What are some ways to go about making a program that will randomly pick between 10-20 strings and display them to a user in C++?", "body": "<p>If you want to go through <strong>all</strong> of the strings in random order, one way of doing it is generate a set of indexes from <code>0</code> to <code>N-1</code> as a <code>std::vector&lt;size_t&gt; idx</code>, shuffle the vector <code>idx</code> using <code>std::shuffle</code>, then use the shuffled vector to loop through your vector of strings.</p>\n\n<p>Here is a simple example of how this works:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\n#include &lt;algorithm&gt;\n#include &lt;numeric&gt;\n#include &lt;utility&gt;\n\nint main()\n{\n    std::random_device rd;\n    std::mt19937 gen(rd());\n\n    std::vector&lt;std::pair&lt;std::string, std::string&gt;&gt; qa\n    {\n        {\"Capital of US\", \"Washington\"},\n        {\"The baby in Family Guy\", \"Stewie\"},\n        {\"Capital of Texas\", \"Austin\"}\n    };\n\n    std::vector&lt;std::size_t&gt; idx(qa.size());\n    std::iota(idx.begin(), idx.end(), 0u); // generate indexes\n    std::shuffle(idx.begin(), idx.end(), gen); // shuffle the indexes\n    // now display the elements in random order:\n    for (std::size_t i = 0; i &lt; qa.size(); ++i)\n    {\n        std::cout &lt;&lt; qa[idx[i]].first &lt;&lt; \": \"\n                  &lt;&lt; qa[idx[i]].second &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p><code>std::shuffle</code> guarantees a uniform distribution over all possible permutations.</p>\n"}], "owner": {"reputation": 3, "user_id": 4766389, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qoVp_esIS0w/AAAAAAAAAAI/AAAAAAAAADU/CSMd0z9Azxo/photo.jpg?sz=128", "display_name": "Colin S.", "link": "https://stackoverflow.com/users/4766389/colin-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1428546659, "accepted_answer_id": 29526696, "answer_count": 2, "score": -1, "last_activity_date": 1428535047, "creation_date": 1428533208, "last_edit_date": 1428533904, "question_id": 29526640, "link": "https://stackoverflow.com/questions/29526640/what-are-some-ways-to-go-about-making-a-program-that-will-randomly-pick-between", "closed_reason": "Opinion-based", "title": "What are some ways to go about making a program that will randomly pick between 10-20 strings and display them to a user in C++?", "body": "<p>Okay, so I was thinking of making a program that will help me in my studies. My idea was based off of flash cards and a random number generator. As I still have a LOT to learn in C++, I was wondering what some good approaches or examples would be for accomplishing my goal.</p>\n\n<p>I'd like the program to output a random string from a predefined list to the user as well as go through all the defined strings before starting over again. </p>\n\n<p>Simply put... What will I need to do in order to make a \"generator\" go through the predefined strings in a random order?</p>\n"}, {"tags": ["c++", "header-files"], "answers": [{"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1428533697, "post_id": 29526634, "comment_id": 47207852, "body": "Re &quot;Without the inline qualifier, non-member functions defined in .h files act like they are extern functions&quot;, an <code>inline</code> function is <code>extern</code> by default."}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 5, "last_activity_date": 1428556073, "last_edit_date": 1592644375, "creation_date": 1428533169, "answer_id": 29526634, "question_id": 29526585, "link": "https://stackoverflow.com/questions/29526585/why-defining-classes-in-header-files-works-but-not-functions/29526634#29526634", "title": "Why defining classes in header files works but not functions", "body": "<p>When member functions are defined in the body of the class definition, they are <code>inline</code> by default. If you qualify the non-member functions <code>inline</code> in the .h file, it will work fine.</p>\n<p>Without the <code>inline</code> qualifier, non-member functions defined in .h files are compiled in every .cpp file that the .h file is included in. That violates the following rule from the standard:</p>\n<blockquote>\n<p><strong>3.2 One definition rule</strong></p>\n<p>3 Every program shall contain exactly one definition of every non-inline function or variable that is odr-used in that program; ...</p>\n</blockquote>\n<p>You will get the same error if you define member functions outside the body of the class definition in a .h file and did not add the <code>inline</code> qualifier explicitly.</p>\n"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 4, "last_activity_date": 1428535756, "last_edit_date": 1428535756, "creation_date": 1428533285, "answer_id": 29526657, "question_id": 29526585, "link": "https://stackoverflow.com/questions/29526585/why-defining-classes-in-header-files-works-but-not-functions/29526657#29526657", "title": "Why defining classes in header files works but not functions", "body": "<blockquote>\n  <p><strong>&rdquo;</strong> If I understand well, we can't define a function in a header file and use it in different unit translations (unless the function is declared static)</p>\n</blockquote>\n\n<p>That's incorrect. You can, and in the presented code <code>CAdd::getResult</code> is one such function.</p>\n\n<p>In order to support general use of a header in multiple translation units, which gives multiple competing definitions of the function, it needs to be <code>inline</code>. A function defined in the class definition, like <code>getResult</code>, is automatically <code>inline</code>. A function defined outside the class definition needs to be explicitly declared <code>inline</code>.</p>\n\n<p>In practical terms the <code>inline</code> specifier tells the linker to just arbitrarily select one of the definitions, if there are several.</p>\n\n<p>There is unfortunately no simple syntax to do the same for data. That is, data can't just be declared as <code>inline</code>. However, there is an exemption for static data members of class templates, and also an <code>inline</code> function with extern linkage can contain <code>static</code> local variables, and so compilers are required to support effectively the same mechanism also for data.</p>\n\n<p>An <code>inline</code> function has <code>extern</code> linkage by default. Since <code>inline</code> also serves as an optimization hint it's possible to have an <code>inline static</code> function. For the case of the default <code>extern</code> linkage, be aware that the standard then requires the function to be defined, identically, in every translation unit where it's used. </p>\n\n<p>The part of the standard dealing with this is called the <em>One Definition Rule</em>, usually abbreviated as the <strong>ODR</strong>.</p>\n\n<p>In C++11 the ODR is \u00a73.2 &ldquo;One definition rule&rdquo;. Specifically, C++11 \u00a73.2/3 specifies the requirement about definitions of an <code>inline</code> function in every relevant translation unit. This requirement is however repeated in C+11 \u00a77.1.2/4 about &ldquo;Function specifiers&rdquo;.</p>\n"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 4, "last_activity_date": 1428533621, "creation_date": 1428533621, "answer_id": 29526716, "question_id": 29526585, "link": "https://stackoverflow.com/questions/29526585/why-defining-classes-in-header-files-works-but-not-functions/29526716#29526716", "title": "Why defining classes in header files works but not functions", "body": "<p>Multiple translation units might need the definition of the class at compile time since it is not possible to know, for example, the types of members of the class (or even whether they exist) unless the definition of the class is available. (Therefore, you must be allowed to define a class in multiple translation units.) On the other hand, a translation unit only needs the declaration of a function because as long as it knows how to call the function, the compiler can leave the job of inserting the actual address of the function to the linker.</p>\n\n<p>But this comes at a price: if a class is defined multiple times in a program, all the definitions must be identical, and if they're not, then you may get strange linker errors, or if the program links, it will probably segfault.</p>\n\n<p>For functions you don't have this problem. If the function is defined multiple times, the linker will let you know. This is good, because it avoids accidentally defining multiple functions with the same name and signature in a given program. If you want to override this, you can declare the function <code>inline</code>. Then the same rule as that for classes applies: the function has to be defined in each translation unit in which it's used in a certain way (<em>odr-used</em>, to be precise) and all the definitions must be identical.</p>\n\n<p>If a function is defined within a class definition, there's a special rule that it's implicitly inline. If this were not the case, then it would make it impossible to have multiple definitions of a class as long as there's at least one function defined in the class definition unless you went to the trouble of marking all such functions <code>inline</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 1411235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ed6c5bca82aacc28bc20b61d9c1598b?s=128&d=identicon&r=PG", "display_name": "philibertin", "link": "https://stackoverflow.com/users/1411235/philibertin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1833, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1428556073, "creation_date": 1428532854, "last_edit_date": 1428533579, "question_id": 29526585, "link": "https://stackoverflow.com/questions/29526585/why-defining-classes-in-header-files-works-but-not-functions", "title": "Why defining classes in header files works but not functions", "body": "<p>I have this little piece of code :</p>\n\n<i>File modA.h</i>\n\n<pre><code>#ifndef MODA\n#define MODA\n\nclass CAdd {\npublic:\n    CAdd(int a, int b) : result_(a + b) { }\n\n    int getResult() const { return result_; }\n\nprivate:\n    int result_;\n};\n\n/*\nint add(int a, int b) {\n    return a + b;\n}\n*/\n#end\n</code></pre>\n\n<i>File calc.cpp</i>\n\n<pre><code>#include \"modA.h\"\n\nvoid doSomeCalc() {\n    //int r = add(1, 2);\n    int r = CAdd(1, 2).getResult();\n}\n</code></pre>\n\n<i>File main.cpp</i>\n\n<pre><code>#include \"modA.h\"\n\nint main() {\n    //int r = add(1, 2);\n    int r = CAdd(1, 2).getResult();\n    return 0;\n}\n</code></pre>\n\n<p>If I understand well, we can't define a function in a header file and use it in different unit translations (unless the function is declared static). The macro MODA wouldn't be defined in each unit translation and thus the body guard wouldn't prevent the header from being copied in place of every #include \"modA.h\". This would cause the function to be defined at different places and the linker would complain about it. Is it correct ?</p>\n\n<p>But then why is it possible to do so with a class and also with methods of a class. Why doesn't the linker complain about it ?\nIsn't it a redefinition of a class ?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 45749, "user_id": 21974, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61d62f97373c96dea8ad1e774b127cdd?s=128&d=identicon&r=PG", "display_name": "ypnos", "link": "https://stackoverflow.com/users/21974/ypnos"}, "edited": false, "score": 0, "creation_date": 1428532394, "post_id": 29526492, "comment_id": 47207416, "body": "Are you talking about a programming contest? Can you post more code?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1428532489, "post_id": 29526492, "comment_id": 47207452, "body": "There&#39;s no way to know with just the tiny bit of information you&#39;ve given us."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1428532592, "post_id": 29526492, "comment_id": 47207492, "body": "post a small complete example that shows the failure"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 2, "creation_date": 1428532848, "post_id": 29526492, "comment_id": 47207589, "body": "smells like that loop never terminates. Step through with a debugger"}, {"owner": {"reputation": 173, "user_id": 4245098, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LaD6y.jpg?s=128&g=1", "display_name": "xman", "link": "https://stackoverflow.com/users/4245098/xman"}, "edited": false, "score": 0, "creation_date": 1428532973, "post_id": 29526492, "comment_id": 47207634, "body": "The following full code is all right, accepted by leetcode."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1428533003, "post_id": 29526492, "comment_id": 47207641, "body": "<code>abs</code> is special in that some of its overloads are in <code>&lt;stdlib.h&gt;</code>, and some are in <code>&lt;math.h&gt;</code>. However, no matter which overload you&#39;re invoking it shouldn&#39;t matter (well except for <code>INT_MIN</code> value). Have you tried the two versions <i>repeatedly</i>."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1428536468, "post_id": 29526492, "comment_id": 47208671, "body": "Probably not your problem, but in some of this code you&#39;re being maybe a little too clever.  For example, <code>if (result &gt; (1&lt;&lt;31) - 1)</code> is both likely to result in undefined behavior and is less readable than <code>if (result &gt; INT_MAX)</code>."}, {"owner": {"reputation": 173, "user_id": 4245098, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LaD6y.jpg?s=128&g=1", "display_name": "xman", "link": "https://stackoverflow.com/users/4245098/xman"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1428538179, "post_id": 29526492, "comment_id": 47209168, "body": "@MichaelBurr You&#39;re right, that makes more sense."}], "answers": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 1, "last_activity_date": 1428536621, "last_edit_date": 1428536621, "creation_date": 1428534768, "answer_id": 29526933, "question_id": 29526492, "link": "https://stackoverflow.com/questions/29526492/time-limit-exceeded-with-abs-in-a-c-program/29526933#29526933", "title": "Time Limit Exceeded with abs() in a C++ Program", "body": "<p>It is likely the case that <code>abs()</code> is either a macro defined like:</p>\n\n<pre><code>#define abs(x) (((x)&lt;0)?-(x):(x))\n</code></pre>\n\n<p>or a template similarly defined:</p>\n\n<pre><code>template &lt;typename T&gt;\nT abs (T x) { return (x &lt; 0) ? -x : x; }\n</code></pre>\n\n<p>Thus, the resulting value of <code>abs()</code> adopts the same type as its argument. For an <code>int</code> type argument, <code>abs(INT_MIN)</code> may or may not be well defined, since it might cause signed integer overflow. (Technically, signed integer overflow invokes undefined behavior.) However, on a 2s-complement system, it will likely yield <code>INT_MIN</code> itself.</p>\n\n<hr>\n\n<p>For the following case (the one that gives you the time limit error):</p>\n\n<pre><code>int divide(int dividend, int divisor) {\n    long long dvd = abs(dividend), dvs = abs(divisor);\n</code></pre>\n\n<p>If the <code>divisor</code> is <code>INT_MIN</code>, then <code>dvs</code> is likely <code>INT_MIN</code>. Thus, it is negative.</p>\n\n<p>Now, later on, you have:</p>\n\n<pre><code>        long long temp = dvs;\n        int i = 0;\n        while (dvd &gt;= temp) {\n            temp = temp &lt;&lt; 1;\n            i++;\n        }\n</code></pre>\n\n<p>And this is an infinite loop if <code>dvd</code> is non-negative. This is because <code>temp</code> becomes <code>0</code> and stays there.</p>\n\n<hr>\n\n<p>The reason your \"fixed\" version works is because here:</p>\n\n<pre><code>int divide(int dividend, int divisor) {\n    long long dvd = dividend, dvs = divisor;\n    dvd = abs(dvd);\n    dvs = abs(dvs);\n</code></pre>\n\n<p>You have changed the type of the argument to <code>abs()</code> to be a <code>long long</code>, initialized by an <code>int</code>. So, if <code>dvs</code> is <code>(long long)INT_MIN</code>, then <code>abs(dvs)</code> is <code>-(long long)INT_MIN</code>, a positive number so long as <code>sizeof(int) &lt; sizeof(long long)</code>.</p>\n"}], "owner": {"reputation": 173, "user_id": 4245098, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LaD6y.jpg?s=128&g=1", "display_name": "xman", "link": "https://stackoverflow.com/users/4245098/xman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 29526933, "answer_count": 1, "score": -4, "last_activity_date": 1428536621, "creation_date": 1428532303, "last_edit_date": 1428536189, "question_id": 29526492, "link": "https://stackoverflow.com/questions/29526492/time-limit-exceeded-with-abs-in-a-c-program", "title": "Time Limit Exceeded with abs() in a C++ Program", "body": "<p>I encounter a problem with the abs() in a program. When I use the code:</p>\n\n<pre><code>long long dvd = abs(dividend), dvs = abs(divisor);\n</code></pre>\n\n<p>it been reported \"Time Limit Exceeded\"</p>\n\n<p>when use:</p>\n\n<pre><code>long long dvd = dividend, dvs = divisor;\ndvd = abs(dvd);\ndvs = abs(dvs);\n</code></pre>\n\n<p>everything is okay...</p>\n\n<p>The full code is following:</p>\n\n<pre><code>class Solution {\npublic:\n    int divide(int dividend, int divisor) {\n    long long dvd = dividend, dvs = divisor;\n    dvd = abs(dvd);\n    dvs = abs(dvs);\n    long long result = 0;\n\n    while (dvd &gt;= dvs) {\n        long long temp = dvs;\n        int i = 0;\n        while (dvd &gt;= temp) {\n            temp = temp &lt;&lt; 1;\n            i++;\n        }\n        dvd -= dvs &lt;&lt; (i-1);\n        result += (long long)1 &lt;&lt; (i-1);\n    }\n\n    result = ((long long)dividend &gt; 0 ^ (long long)divisor &gt; 0) ? -result : result;\n\n    if (result &gt; (1&lt;&lt;31) - 1)\n        return (1&lt;&lt;31) - 1;\n\n    return result;\n  }\n};\n</code></pre>\n\n<p>Could someone help to explain what happens with <code>abs()</code> here?</p>\n"}, {"tags": ["c++", "polynomial-math", "greatest-common-divisor", "polynomials"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1428617122, "post_id": 29526470, "comment_id": 47251296, "body": "It would help greatly if you stated precisely what&#39;s going wrong (and where if you know), rather than give a vague description. Also, sample inputs that it goes wrong with."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1428617398, "post_id": 29549900, "comment_id": 47251407, "body": "Aside: doing exact comparisons with <code>float</code> data is usually a bad idea, although <i>maybe</i> it&#39;s okay here, or even the right thing to do. But consider treating sufficiently small coefficients as zero."}], "owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "is_accepted": false, "score": 0, "last_activity_date": 1428617222, "creation_date": 1428617222, "answer_id": 29549900, "question_id": 29526470, "link": "https://stackoverflow.com/questions/29526470/polynomial-greatest-common-divisor-c/29549900#29549900", "title": "Polynomial Greatest Common Divisor C++", "body": "<pre><code>while(R-&gt;coeff[R-&gt;degree] == 0) {\n    R-&gt;degree--;\n}\n</code></pre>\n\n<p>This goes badly wrong if <code>R</code> is the zero polynomial.</p>\n"}, {"owner": {"reputation": 496, "user_id": 1217329, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f7025df575dd54e9ed8f88ccb45e27f7?s=128&d=identicon&r=PG", "display_name": "Titandrake", "link": "https://stackoverflow.com/users/1217329/titandrake"}, "is_accepted": true, "score": 0, "last_activity_date": 1428639581, "creation_date": 1428639581, "answer_id": 29553305, "question_id": 29526470, "link": "https://stackoverflow.com/questions/29526470/polynomial-greatest-common-divisor-c/29553305#29553305", "title": "Polynomial Greatest Common Divisor C++", "body": "<p>It seems likely that the line</p>\n\n<pre><code>if(R-&gt;degree==0 &amp;&amp; R-&gt;coeff[0]==0)\n        break;\n</code></pre>\n\n<p>is what's broken. Your coefficients are floats. Because computers are (unfortunately) finite, there will be small errors in your float computation. The code only exits the while loop if the coefficient is exactly 0. It seems likely that on some inputs, although it should divide evenly, you get <code>R-&gt;coeff[0] = 0.0000000001</code> or some other very small value that is not exactly 0.</p>\n\n<p>Try checking if the absolute value is within some very small tolerance (something like 10^-10 or 10^-12.) If you actually want the exact value, you'll need to look into exact precision floats, which is its own can of worms.</p>\n\n<p>(Looking at the code more closely, you do exact equality checks in other places too - these should all be changed to checking the absolute value is very small.)</p>\n"}, {"owner": {"reputation": 2984, "user_id": 525578, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0c69739c03de1550680e5d24874c927?s=128&d=identicon&r=PG", "display_name": "Serg", "link": "https://stackoverflow.com/users/525578/serg"}, "is_accepted": false, "score": 0, "last_activity_date": 1545296071, "creation_date": 1545296071, "answer_id": 53865270, "question_id": 29526470, "link": "https://stackoverflow.com/questions/29526470/polynomial-greatest-common-divisor-c/53865270#53865270", "title": "Polynomial Greatest Common Divisor C++", "body": "<p>This C++ library implements polynomial division: <a href=\"https://github.com/ohhmm/openmind/blob/77d79f62ded371579ed2812850b81a9f30d2693e/omnn/math/test/Sum_test.cpp#L308\" rel=\"nofollow noreferrer\">PolynomialDivHang_test_no_hang</a></p>\n"}], "owner": {"reputation": 15, "user_id": 4576531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05a5541391eef6862d22dba156a00a2e?s=128&d=identicon&r=PG&f=1", "display_name": "noob_1", "link": "https://stackoverflow.com/users/4576531/noob-1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2266, "favorite_count": 1, "accepted_answer_id": 29553305, "answer_count": 3, "score": 1, "last_activity_date": 1555262045, "creation_date": 1428532205, "last_edit_date": 1428638570, "question_id": 29526470, "link": "https://stackoverflow.com/questions/29526470/polynomial-greatest-common-divisor-c", "title": "Polynomial Greatest Common Divisor C++", "body": "<p>Here is my attempt to implement a program that finds GCD of two polynomials.\nI realize there is a problem in division method. A while loop decrementing the degree of a resulting polynomial in <code>division()</code> goes into \"infinity\" in some cases, and I can't understand in which exactly.</p>\n\n<p><em>Any clues on what goes wrong here?</em></p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;stdlib.h&gt;\n\n\n\nusing namespace std;\n\n//polynomial------------------------------\nstruct polynomial {\n    float *coeff;\n    int degree;\n};\n\n/*function declaration */\nint get_data(polynomial *P); \nint display(polynomial *P);\nint division(polynomial *P, polynomial *Q, polynomial *H, polynomial *R);\nint polcpy(polynomial *p, polynomial *q);\nvoid GCDPol(polynomial *P,polynomial *Q, polynomial *R);\n\n//GCD of two polynomials------------------\nvoid GCDpol(polynomial *P,polynomial *Q, polynomial *R) {\n    polynomial *res, *v;\n    res = (polynomial *) calloc(1,sizeof(polynomial));  \n    v = (polynomial *) calloc(1,sizeof(polynomial));  \n    while(1) {\n        division(P, Q, v, R);\n        if(R-&gt;degree==0 &amp;&amp; R-&gt;coeff[0]==0)\n            break;\n        else\n            polcpy(P,Q);\n            polcpy(Q,R);\n    }\n    polcpy(R,Q);\n    free(res);\n    free(v);\n}\n\n//pol copy--------------------------------\nint polcpy(polynomial *p, polynomial *q) {\n    p-&gt;degree=q-&gt;degree;\n    p-&gt;coeff = new float[p-&gt;degree + 1];\n    for (int i=0; i&lt;=p-&gt;degree; i++) \n        p-&gt;coeff[i]=q-&gt;coeff[i];\n    return 0;\n}\n\n//division--------------------------------\nint division(polynomial *P, polynomial *Q, polynomial *H, polynomial *R) {\n    float u;\n    int x;\n    polynomial *nh, *nr;\n    nh = (polynomial *) calloc(1,sizeof(polynomial));\n    nr = (polynomial *) calloc(1,sizeof(polynomial));\n\n    /*Euclidian Long Division*/\n    polcpy(nr, P);  \n    nh-&gt;degree = P-&gt;degree - Q-&gt;degree;\n    nh-&gt;coeff = new float[nh-&gt;degree + 1];\n    for (int i=nh-&gt;degree; i&gt;=0; i--)  {\n        nh-&gt;coeff[i] = nr-&gt;coeff[nr-&gt;degree] / Q-&gt;coeff[Q-&gt;degree];\n        for (int j=i; j &lt;= nr-&gt;degree; j++) {\n            u = nh-&gt;coeff[i] * Q-&gt;coeff[j-i];\n            nr-&gt;coeff[j] = nr-&gt;coeff[j] - u;\n        }\n        if (nr-&gt;degree &gt; 0)  \n            nr-&gt;degree--;\n    }\n\n    /*Quotient*/\n    polcpy(H, nh);  \n    /*Remainder*/   \n    polcpy(R, nr);\n    while(R-&gt;coeff[R-&gt;degree] == 0) {\n        R-&gt;degree--;\n    }   \n    free(nh); \n    free(nr);\n    return 0;\n}\n\n//display-------------------------------\nint display(polynomial *P) {\n    int i, j;\n    for (i = P-&gt;degree; i &gt;= 0; i--) {\n        cout &lt;&lt; P-&gt;coeff[i] &lt;&lt; \"x^\" &lt;&lt; i;\n        if ((i - 1) != -1)\n            cout &lt;&lt; \"+\";\n    }\n    cout &lt;&lt; \"\\n\";\n    return 0;\n}\n\n//get_data------------------------------\nint get_data(polynomial *P) {\n    cout &lt;&lt; \"Enter Degree Of Polynomial:\";\n    cin &gt;&gt; P-&gt;degree;\n    P-&gt;coeff = new float[P-&gt;degree + 1];\n    for (int i = P-&gt;degree; i &gt;= 0; i--) {\n        cout &lt;&lt; \"Enter coefficient of x^\" &lt;&lt; i &lt;&lt; \":\";\n        cin &gt;&gt; P-&gt;coeff[i];\n    }\n    return 0;\n}\n\n\nint main() {\n    polynomial *P, *Q, *R, *H;\n    P = (polynomial *) calloc(1,sizeof(polynomial));\n    Q = (polynomial *) calloc(1,sizeof(polynomial));\n    R = (polynomial *) calloc(1,sizeof(polynomial));\n    H = (polynomial *) calloc(1,sizeof(polynomial));\n    cout&lt;&lt;\"GDC\\n\";\n    get_data(P);\n    get_data(Q);\n    cout &lt;&lt; \"Polynomial1:\";\n    display(P);\n    cout &lt;&lt; \"Polynomial2:\";\n    display(Q);\n    GCDpol(P,Q,R);\n    display(R);\n    free(R);\n    free(P);\n    free(Q);\n    free(H);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "windows", "fopen", "c++98"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1428535090, "post_id": 29526377, "comment_id": 47208278, "body": "<code>I&#39;ve found articles saying that fopen() is better because it is cross platform while open() is not</code> That&#180;s correct. For some use cases, platform-specific functions may be the only (possible/acceptable) solution, but if fopen can do the job, always prefer it."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1428535118, "post_id": 29526377, "comment_id": 47208294, "body": "Personally, I&#39;d get rid of the calls to access and stat, since they don&#39;t seem to be doing anything useful.  The code doesn&#39;t even bother to use the data that stat is returning!"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 1, "creation_date": 1428536275, "post_id": 29526377, "comment_id": 47208618, "body": "Do those exceptions actually work? They seem to return a pointer do a deleted (due to stack unwinding) local buffer."}, {"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1428618413, "post_id": 29526377, "comment_id": 47251785, "body": "I&#39;m not sure if the exceptions actually work or not.  I&#39;m new to the system, and it seems they never made a way to unit test these routines."}, {"owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "edited": false, "score": 0, "creation_date": 1428618578, "post_id": 29526377, "comment_id": 47251853, "body": "The access and stat calls are only used in the if statements to check if the file is within the user&#39;s permissions, and that the file is actually there.  If they return failure, there is a sort of exception thrown.  That&#39;s why this all needs to be re written."}], "owner": {"reputation": 361, "user_id": 3633538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3f6f9fe20d09b664472ea54a2411047?s=128&d=identicon&r=PG&f=1", "display_name": "Makenbaccon", "link": "https://stackoverflow.com/users/3633538/makenbaccon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 688, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1428532961, "creation_date": 1428531655, "last_edit_date": 1428532961, "question_id": 29526377, "link": "https://stackoverflow.com/questions/29526377/time-of-check-time-of-use-issues-involving-access-faccessat-stat-lstat", "title": "Time-of-Check, Time-of-Use issues involving access(), faccessat(), stat(), lstat(), fstat(), open(), and fopen()", "body": "<p>I don't post here often, so bear with me while I try to decide how to solve this problem.</p>\n\n<p>I'm updating a code base that hasn't been touched for between 10 - 20 years.  The code was written without adherence to best practices, and by many authors with sometimes incomplete understandings of security conventions, or perhaps even before those conventions were common practice.  The compiler used on this code is c++98 or c++03, but not more recent.  The code is also cross platform between Linux and Windows.</p>\n\n<p>All of that said, I need the help of some C++ veterans understanding the proper use of access(), stat() and open() and their perversions as it relates to TOCTOU issues.</p>\n\n<p>Here is an example block of code illustrating the TOCTOU issue:</p>\n\n<pre><code>#ifdef WIN32\n    struct _stat buf;\n#else\n    struct stat buf;\n#endif //WIN32\n\n    FILE *fp;\n    char data[2560];\n\n    // Make sure file exists and is readable\n#ifdef WIN32\n    if (_access(file.c_str(), R_OK) == -1) {\n#else\n    if (access(file.c_str(), R_OK) == -1) {\n#endif //WIN32\n\n        /* This is a fix from a previous \n           Stack-based Buffer Overflow\n           issue.  I tried to keep the original\n           code as close to possible while\n           dealing with the potential security\n           issue, as I can't be certain of how\n           my change might effect the system. */\n\n        std::string checkStr(\"File \");\n        checkStr += file.c_str();\n        checkStr += \" Not Found or Not Readable\";\n        if(checkStr.length() &gt;= 2560)\n            throw checkStr.c_str();\n\n        char message[2560];\n        sprintf(message, \"File '%s' Not Found or Not Readable\", file.c_str());\n        //DISPLAY_MSG_ERROR( this, message, \"GetFileContents\", \"System\" );\n        throw message;\n        }\n\n    // Get the file status information\n#ifdef WIN32\n    if (_stat(file.c_str(), &amp;buf) != 0) {\n#else\n    if (stat(file.c_str(), &amp;buf) != 0) {\n#endif //WIN32\n\n        /* Same story here. */\n\n        std::string checkStr(\"File \");\n        checkStr += file.c_str();\n        checkStr += \" No Status Available\";\n        if(checkStr.length() &gt;= 2560)\n            throw checkStr.c_str();\n\n        char message[2560];\n        sprintf(message, \"File '%s' No Status Available\", file.c_str());\n        //DISPLAY_MSG_ERROR( this, message, \"GetFileContents\", \"System\" );\n        throw message;\n        }\n\n    // Open the file for reading\n    fp = fopen(file.c_str(), \"r\");\n    if (fp == NULL) {\n        char message[2560];\n        sprintf(message, \"File '%s' Cound Not be Opened\", file.c_str());\n        //DISPLAY_MSG_ERROR( this, message, \"GetFileContents\", \"System\" );\n        throw message;\n    }\n\n    // Read the file\n    MvString s, ss;\n    while (fgets(data, sizeof(data), fp) != (char *)0) {\n        s = data;\n        s.trimBoth();\n        if (s.compare( 0, 5, \"GROUP\" ) == 0) {\n            //size_t t = s.find_last_of( \":\" );\n            size_t t = s.find( \":\" );\n            if (t != string::npos) {\n                ss = s.substr( t+1 ).c_str();\n                ss.trimBoth();\n                ss = ss.substr( 1, ss.length() - 3 ).c_str();\n                group_list.push_back( ss );\n            }\n        }\n    }\n\n    // Close the file\n    fclose(fp);\n}\n</code></pre>\n\n<p>As you can see, the previous developer(s) wanted to make sure the user had access to \"file\", stat-ed \"file\", and then opened it without re-access()-ing and without re-stat()-ing \"file\" after fopen()-ing it.  I understand why this is a TOCTOU problem, but I'm not sure of how to fix it. </p>\n\n<p>From what I've researched, open() is preferred over fopen() and fstat() over stat(), but where does lstat() fit in? and if I do a stat, do I even need access() or faccessat()?  </p>\n\n<p>And to compound that, this needs to be compatable with a Windows compiler, and I've found articles saying that fopen() is better because it is cross platform while open() is not, making open() potentially unusable; this also seems to be the same for variations of stat() and access(), but I'm not certain.</p>\n\n<p>If you've gotten this far, thank you for reading it all, and I welcome any criticism about the post and help.  </p>\n"}, {"tags": ["c++", "point-cloud-library", "ros", "catkin"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1428531447, "post_id": 29526266, "comment_id": 47207067, "body": "where does the debugger say it goes bang?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1428531996, "post_id": 29526266, "comment_id": 47207265, "body": "The reason for crashes before <code>main</code> is mostly due to global or static objects being constructed before main() has run, and the construction of these objects causes the error.  You need to get a stack trace of the functions called that led up to the crash."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1428533538, "post_id": 29526266, "comment_id": 47207798, "body": "<a href=\"https://sourceware.org/gdb/onlinedocs/gdb/\" rel=\"nofollow noreferrer\">Start here</a>."}], "answers": [{"owner": {"reputation": 51, "user_id": 4766287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da692f9d754408eeb375571d7344efeb?s=128&d=identicon&r=PG", "display_name": "Collin B", "link": "https://stackoverflow.com/users/4766287/collin-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1428546895, "creation_date": 1428546895, "answer_id": 29528762, "question_id": 29526266, "link": "https://stackoverflow.com/questions/29526266/segmentation-fault-before-main-with-pclextractindices-pcl-ros-catkin/29528762#29528762", "title": "Segmentation fault before main with pcl::ExtractIndices (pcl, ROS, catkin)", "body": "<p>Thanks to the help from the commenters, I was able to find the issue. I did a backtrace with gdb and googled the output:</p>\n\n<pre><code>boost::math::lanczos::lanczos_initializer&lt;boost::math::lanczos::lanczos17m64, long double&gt;::init::init()\n</code></pre>\n\n<p>Then found this: <a href=\"http://answers.ros.org/question/194699/segmentation-fault-when-using-correspondencerejectorsampleconsensus/\" rel=\"nofollow\">http://answers.ros.org/question/194699/segmentation-fault-when-using-correspondencerejectorsampleconsensus/</a></p>\n\n<p>Which says that you can't use C++11 with PCL, so I removed this line from my CMakeLists.txt file:</p>\n\n<pre><code>set(CMAKE_CXX_FLAGS \"-std=c++0x ${CMAKE_CXX_FLAGS}\")\n</code></pre>\n\n<p>And it worked!</p>\n"}], "owner": {"reputation": 51, "user_id": 4766287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da692f9d754408eeb375571d7344efeb?s=128&d=identicon&r=PG", "display_name": "Collin B", "link": "https://stackoverflow.com/users/4766287/collin-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1204, "favorite_count": 0, "accepted_answer_id": 29528762, "answer_count": 1, "score": 2, "last_activity_date": 1428546895, "creation_date": 1428531045, "question_id": 29526266, "link": "https://stackoverflow.com/questions/29526266/segmentation-fault-before-main-with-pclextractindices-pcl-ros-catkin", "title": "Segmentation fault before main with pcl::ExtractIndices (pcl, ROS, catkin)", "body": "<p>I am attempting to run the following in C++:</p>\n\n<pre><code>#include &lt;pcl_ros/point_cloud.h&gt;\n#include \"pcl/pcl_base.h\"\n#include \"pcl/PointIndices.h\"\n#include \"pcl/conversions.h\"\n#include &lt;pcl/kdtree/kdtree_flann.h&gt;\n#include &lt;pcl/filters/extract_indices.h&gt;\n#include &lt;pcl/filters/voxel_grid.h&gt;\n\nusing namespace std;\nusing namespace pcl;\n\nvoid myFunction() {\n     ...\n     ExtractIndices&lt;PointXYZ&gt; rangefilter;\n     ...\n}\n\nint main() {\n     cout &lt;&lt; \"Hello\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>The code compiles, but I get a segmentation fault as soon as I run it; the cout statement isn't executed.  Notice I don't actually even call myFunction() in main.  The only error message is</p>\n\n<pre><code>Segmentation fault (core dumped)\n</code></pre>\n\n<p>When I comment out the ExtractIndices line in myFunction, the problem goes away and the code runs fine:</p>\n\n<pre><code>     // ExtractIndices&lt;PointXYZ&gt; rangefilter;\n</code></pre>\n\n<p>I am running this on Ubuntu with ROS and compiling it with catkin_make, if that helps.</p>\n\n<p>I'd really appreciate some help debugging this, as I've been stuck on this problem for a while. Thanks for reading!</p>\n"}, {"tags": ["c#", "c++", "imaging", "recode"], "answers": [{"comments": [{"owner": {"reputation": 494, "user_id": 3916429, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ad458e43ed590f2a5944b090f8294236?s=128&d=identicon&r=PG&f=1", "display_name": "user3916429", "link": "https://stackoverflow.com/users/3916429/user3916429"}, "edited": false, "score": 0, "creation_date": 1428534331, "post_id": 29526616, "comment_id": 47208044, "body": "@ananthonline First of all thanks a lot for your time. No errors at least, but instead of returning a cleaned image, its returning a yellow rectangle. i am looking into your code to check what is done and why maybe its giving me this. +1 anyway for your time and your really helpful help again"}, {"owner": {"reputation": 494, "user_id": 3916429, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ad458e43ed590f2a5944b090f8294236?s=128&d=identicon&r=PG&f=1", "display_name": "user3916429", "link": "https://stackoverflow.com/users/3916429/user3916429"}, "edited": false, "score": 0, "creation_date": 1428537351, "post_id": 29526616, "comment_id": 47208965, "body": "@ananthonline could you please convert me this last thing? it might fix my problem... <code>unsigned char *pixels = new unsigned char[width * height * 3]; \tunsigned char *p = pixels, *b = outmap; \tint col, row;  \tfor (row = 0; row &lt; rows; row++) \tfor (col = 0; col &lt; cols; col++) \t{ \t\t*p++ = *b; \t\t*p++ = *b; \t\t*p++ = *b++; \t}  \tcorona::Image *img = corona::CreateImage(width, height, IMAGE_FORMAT, pixels); \tcorona::SaveImage(filename, corona::FF_AUTODETECT, img);</code>"}, {"owner": {"reputation": 10471, "user_id": 802203, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/aDIFP.png?s=128&g=1", "display_name": "Ani", "link": "https://stackoverflow.com/users/802203/ani"}, "edited": false, "score": 2, "creation_date": 1428538500, "post_id": 29526616, "comment_id": 47209232, "body": "Updated my answer, hope that&#39;s the missing piece! Remember, these are just pointers (pun intended) to give you the tools you need. Now you should have all the bits (I can&#39;t stop myself!) needed."}, {"owner": {"reputation": 494, "user_id": 3916429, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ad458e43ed590f2a5944b090f8294236?s=128&d=identicon&r=PG&f=1", "display_name": "user3916429", "link": "https://stackoverflow.com/users/3916429/user3916429"}, "edited": false, "score": 0, "creation_date": 1428541283, "post_id": 29526616, "comment_id": 47209983, "body": "well its not doing the job as the original C++ exe was. I guess the only solution for me is to understand EXACTLY what is doing the original C++ code to do the same in C#. For now, your code is giving me a kind of black and white stripped pictures with some noise (maybe some of the &quot;dust&quot; its supposed to clean from the pictures. no idea yet.) i will try to understand all those asterisk thingies that are *loosing **me  *so **much xD thanks anyway"}, {"owner": {"reputation": 10471, "user_id": 802203, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/aDIFP.png?s=128&g=1", "display_name": "Ani", "link": "https://stackoverflow.com/users/802203/ani"}, "edited": false, "score": 0, "creation_date": 1428541412, "post_id": 29526616, "comment_id": 47210026, "body": "Your description of &quot;striping&quot; sounds like a stride problem. Try using the rowPtr, dstPtr like-approach for the source as well."}, {"owner": {"reputation": 494, "user_id": 3916429, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ad458e43ed590f2a5944b090f8294236?s=128&d=identicon&r=PG&f=1", "display_name": "user3916429", "link": "https://stackoverflow.com/users/3916429/user3916429"}, "edited": false, "score": 0, "creation_date": 1428569980, "post_id": 29526616, "comment_id": 47221076, "body": "omg.. that easy to understand <a href=\"http://www.cplusplus.com/doc/tutorial/pointers/\" rel=\"nofollow noreferrer\">cplusplus.com/doc/tutorial/pointers</a>, ill keep you int touch after some tries ^^ thanks again"}, {"owner": {"reputation": 494, "user_id": 3916429, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ad458e43ed590f2a5944b090f8294236?s=128&d=identicon&r=PG&f=1", "display_name": "user3916429", "link": "https://stackoverflow.com/users/3916429/user3916429"}, "edited": false, "score": 0, "creation_date": 1428579932, "post_id": 29526616, "comment_id": 47227332, "body": "Understanding now what was doing the C++ code, i totally rewrote it to pure secure C# code, using no pointer at all natives possibilities GetPixel() etc. Well it works pretty fine now... but its damn slow ... i guess pointers a way way faster ... im depressed all of a sudden xD."}, {"owner": {"reputation": 494, "user_id": 3916429, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ad458e43ed590f2a5944b090f8294236?s=128&d=identicon&r=PG&f=1", "display_name": "user3916429", "link": "https://stackoverflow.com/users/3916429/user3916429"}, "edited": false, "score": 0, "creation_date": 1428618109, "post_id": 29526616, "comment_id": 47251677, "body": "i have been totally unable to fix my problem still... <code>GetPixel</code> is the speed problem, so YES <code>LockBits()</code> is defintly what is needed. So i was looking again at your code, couldnt understand what you mean on your last comment sadly. I even tried to mix both approach since i know how to deal with array but not memory, tried to create array from bitmap using LockBits... and AccessViolation after only 27lines (y absciss) here:  <a href=\"http://codetidy.com/6384/\" rel=\"nofollow noreferrer\">codetidy.com/6384</a> . So i am totaly lost... If by any luck... you can guide me to the end of this weird thing im trying to do... god... thank you lol"}, {"owner": {"reputation": 494, "user_id": 3916429, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ad458e43ed590f2a5944b090f8294236?s=128&d=identicon&r=PG&f=1", "display_name": "user3916429", "link": "https://stackoverflow.com/users/3916429/user3916429"}, "edited": false, "score": 0, "creation_date": 1428618467, "post_id": 29526616, "comment_id": 47251807, "body": "btw here is what is giving me your code : <a href=\"http://postimg.org/image/gqmvzi3y1/\" rel=\"nofollow noreferrer\">postimg.org/image/gqmvzi3y1</a>   so it looks like &quot;Dust&quot; (the points, normal i guess), but not the vertical stripes"}, {"owner": {"reputation": 494, "user_id": 3916429, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ad458e43ed590f2a5944b090f8294236?s=128&d=identicon&r=PG&f=1", "display_name": "user3916429", "link": "https://stackoverflow.com/users/3916429/user3916429"}, "edited": false, "score": 0, "creation_date": 1428618803, "post_id": 29526616, "comment_id": 47251942, "body": "And incase it can help you faster, here is the fonction doing what i need exactly in C#; but using the SLOOOWW GetPixel(), so i would kinda need this one with LockBits... At least it might help you get my logic <a href=\"http://codetidy.com/6385/\" rel=\"nofollow noreferrer\">codetidy.com/6385</a>"}, {"owner": {"reputation": 494, "user_id": 3916429, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ad458e43ed590f2a5944b090f8294236?s=128&d=identicon&r=PG&f=1", "display_name": "user3916429", "link": "https://stackoverflow.com/users/3916429/user3916429"}, "edited": false, "score": 0, "creation_date": 1428623848, "post_id": 29526616, "comment_id": 47253580, "body": "I know where the error comes from! FINALLY, im trying to fix it for now on at least, it looks like the pixels are not RGB but RGBA no idea why... there is gamma ... so the pointers are wrong..."}, {"owner": {"reputation": 10471, "user_id": 802203, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/aDIFP.png?s=128&g=1", "display_name": "Ani", "link": "https://stackoverflow.com/users/802203/ani"}, "edited": false, "score": 0, "creation_date": 1428623898, "post_id": 29526616, "comment_id": 47253596, "body": "Great! Now all you need to do is skip the &quot;alpha&quot; pixels (not Gamma) in all the pixel-based loops! :)"}, {"owner": {"reputation": 494, "user_id": 3916429, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ad458e43ed590f2a5944b090f8294236?s=128&d=identicon&r=PG&f=1", "display_name": "user3916429", "link": "https://stackoverflow.com/users/3916429/user3916429"}, "edited": false, "score": 0, "creation_date": 1428625334, "post_id": 29526616, "comment_id": 47254000, "body": "and another error i found, the <code>(SQ(distance) &gt; DISTANCE(col, row, x, y)</code> is always right.... because DISTANCE() return something small under 30 or so, and the second statement is NEVER ==0... i dont understand where it comes from...."}, {"owner": {"reputation": 494, "user_id": 3916429, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ad458e43ed590f2a5944b090f8294236?s=128&d=identicon&r=PG&f=1", "display_name": "user3916429", "link": "https://stackoverflow.com/users/3916429/user3916429"}, "edited": false, "score": 0, "creation_date": 1428626100, "post_id": 29526616, "comment_id": 47254214, "body": "hmmm its all about <code>bitmap</code> ... <code>bitmap[GetXY(col, row, cols)]</code> only returns 84 or 85 in the loops... i dont understand but thats it"}, {"owner": {"reputation": 10471, "user_id": 802203, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/aDIFP.png?s=128&g=1", "display_name": "Ani", "link": "https://stackoverflow.com/users/802203/ani"}, "edited": false, "score": 0, "creation_date": 1428904803, "post_id": 29526616, "comment_id": 47343808, "body": "Could you upload your source image someplace and give me a link? Since it&#39;s my code that doesn&#39;t work, I feel obligated to at least have it loop through the pixels correctly."}], "owner": {"reputation": 10471, "user_id": 802203, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/aDIFP.png?s=128&g=1", "display_name": "Ani", "link": "https://stackoverflow.com/users/802203/ani"}, "is_accepted": false, "score": 3, "last_activity_date": 1428538502, "last_edit_date": 1428538502, "creation_date": 1428533024, "answer_id": 29526616, "question_id": 29526246, "link": "https://stackoverflow.com/questions/29526246/translating-a-c-dealing-with-corona-function-into-c/29526616#29526616", "title": "Translating a C++ (dealing with corona) function into C#", "body": "<p>The C# code will look something like this</p>\n\n<pre><code>private unsafe Bitmap optIm2(Bitmap img)\n{\n    int rows = img.Height;\n    int cols = img.Width;\n\n    var dstImg = new Bitmap(cols, rows, img.PixelFormat);\n    var srcImageData = img.LockBits(new Rectangle(0, 0, cols, rows), System.Drawing.Imaging.ImageLockMode.ReadOnly, img.PixelFormat);\n    var dstImageData = dstImg.LockBits(new Rectangle(0, 0, cols, rows), System.Drawing.Imaging.ImageLockMode.ReadOnly, dstImg.PixelFormat);\n    try\n    {\n        var bitmap = new byte[rows * cols];\n        var outmap = new byte[rows * cols];\n\n        fixed (byte* ptr = &amp;bitmap[0])\n        {\n            byte* pixels = (byte*)srcImageData.Scan0;\n            byte* p = ptr;\n\n            //convert to single byte grayscale\n            for (int row = 0; row &lt; rows; row++)\n            {\n                for (int col = 0; col &lt; cols; col++)\n                {\n                    var pixel = *pixels++;\n                    pixel += *pixels++; \n                    pixel += *pixels++;\n\n                    *p++ = (byte)(pixel / 3);  //here i dont know at all\n                }\n            }\n        }\n\n        int distance = 9;\n        int threshold = 7;\n\n        //check our threshold\n        for (int row = 0; row &lt; rows; row++)\n        {\n            for (int col = 0; col &lt; cols; col++)\n            {\n                if (bitmap[GetXY(col, row, cols)] != 0)\n                {\n                    int count = 0;\n                    int x, y;\n                    int dhalf = distance / 2 + 1;\n\n                    //optimization possible here by checking inside a circle rather than square+dist\n                    for (x = Math.Max(col - dhalf, 0); x &lt; Math.Min(col + dhalf, cols); x++)\n                    {\n                        for (y = Math.Max(row - dhalf, 0); y &lt; Math.Min(row + dhalf, rows); y++)\n                            if ((SQ(distance) &gt; DISTANCE(col, row, x, y)) &amp;&amp; (bitmap[GetXY(x, y, cols)] != 0))\n                                count++;\n                    }\n                    if (count &gt;= threshold)\n                        outmap[GetXY(col, row, cols)] = 255;\n                    else\n                        outmap[GetXY(col, row, cols)] = 0;\n                }\n                else\n                    outmap[GetXY(col, row, cols)] = 0;\n            }\n        }\n\n        // Copy data from outmap to pixels of bitmap. Since outmap is grayscale data, we replicate it for all channels\n        byte* dstPtr = (byte*)dstImageData.Scan0;\n        for (int row = 0; row &lt; rows; row++)\n        {\n            byte* rowPtr = dstPtr;\n            for (int col = 0; col &lt; cols; col++)\n            {\n                *rowPtr++ = outmap[GetXY(col, row, cols)];\n                *rowPtr++ = outmap[GetXY(col, row, cols)];\n                *rowPtr++ = outmap[GetXY(col, row, cols)];\n            }\n            dstPtr += dstImageData.Stride;\n        }\n    }\n    finally\n    {\n        img.UnlockBits(srcImageData);\n        img.Dispose();\n\n        dstImg.UnlockBits(dstImageData);\n    }\n\n    return dstImg;\n}\n\nprivate int GetXY(int x, int y, int w) { return ((x) + ((w) * (y))); }\nprivate int SQ(int a) { return ((a) * (a)); }\nprivate int DISTANCE(int a, int b, int c, int d) { return (SQ(a - c) + SQ(b - d)); }\n</code></pre>\n\n<p>While I haven't checked your actual logic for the correct algorithm, the code above contains all the bits you need to do that yourself. The main points to note are:</p>\n\n<ol>\n<li>How to get a pointer from an IntPtr (fixed)</li>\n<li>How to get pixel data from a bitmap</li>\n<li>How to write pixel data back to a bitmap</li>\n</ol>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 494, "user_id": 3916429, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ad458e43ed590f2a5944b090f8294236?s=128&d=identicon&r=PG&f=1", "display_name": "user3916429", "link": "https://stackoverflow.com/users/3916429/user3916429"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1428538502, "creation_date": 1428530930, "question_id": 29526246, "link": "https://stackoverflow.com/questions/29526246/translating-a-c-dealing-with-corona-function-into-c", "title": "Translating a C++ (dealing with corona) function into C#", "body": "<p>i had a C++ .exe i was using as a standalone image cleaner.\nBut i now want to use its fonction into my own c# app, so i started to translate it. But i REALLY TOTALLY know nothing about C++ and its logic.\nSo i come here for some help.</p>\n\n<p>First, does anyone know any equivalent for this function?\nCorona \"getPixels()\" (yes with an \"s\" because i know c# have a built-in getPixel) :\nhere is the function explaination from corona doc : <a href=\"http://corona.sourceforge.net/corona-1.0.2-doxygen/classcorona_1_1Image.html#a3\" rel=\"nofollow\">getPixels() Corona dll</a>\nit is used in the lines i am looking to translate.</p>\n\n<p>here is all the thing:</p>\n\n<p><strong>original C++ code:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"corona.h\"\n\n#define IMAGE_FORMAT corona::PF_R8G8B8 /* RGB mode - 8 bits each */\n#define GetXY(x,y, w)  ((x) + ((w) * (y)))\n#define MIN(a, b) ((a) &lt; (b) ? (a) : (b))\n#define MAX(a, b) ((a) &gt; (b) ? (a) : (b))\n\n#define SQ(a) ((a) * (a))\n#define DISTANCE(a, b, c, d) (SQ(a - c) + SQ(b - d))\n\n\n\nint main(int argc, char **argv)\n{\ncorona::Image *img;\nunsigned char *pixels;\nint threshold = 0;\nint distance = 0;\nint pixel;\nchar str[255];\nint rows, cols;\nint row, col;\nunsigned char *bitmap, *p;\nunsigned char *outmap;\npixels = (unsigned char*)img-&gt;getPixels();\nrows = img-&gt;getHeight();\ncols = img-&gt;getWidth();\nbitmap = new unsigned char[rows * cols];\np = bitmap;\noutmap = new unsigned char[rows * cols];\n\n//convert to single byte grayscale\nfor (row = 0; row &lt; rows; row++)\nfor (col = 0; col &lt; cols; col++)\n{\n    pixel = *pixels++;\n    pixel += *pixels++;\n    pixel += *pixels++;\n\n    *p++ = pixel / 3;\n}\n\n//free corona loading\ndelete img;\n\nint distance = 8;\nint threshold = 7;\n//check our threshold\nfor (row = 0; row &lt; rows; row++)\nfor (col = 0; col &lt; cols; col++)\n{\n    if (bitmap[GetXY(col, row, cols)])\n    {\n        int count = 0;\n        int x, y;\n        int dhalf = distance / 2 + 1;\n\n        //optimization possible here by checking inside a circle rather than square+dist\n        for (x = MAX(col - dhalf, 0); x &lt; MIN(col + dhalf, cols); x++)\n        for (y = MAX(row - dhalf, 0); y &lt; MIN(row + dhalf, rows); y++)\n        {\n            if (SQ(distance) &gt; DISTANCE(col, row, x, y) &amp;&amp; bitmap[GetXY(x, y, cols)])\n                count++;\n        }\n\n        if (count &gt;= threshold)\n            outmap[GetXY(col, row, cols)] = 255;\n        else\n            outmap[GetXY(col, row, cols)] = 0;\n    }\n    else\n        outmap[GetXY(col, row, cols)] = 0;\n}\n}\n</code></pre>\n\n<p>What i have now with what i could translate... i hope correctly at least...:</p>\n\n<pre><code>private Bitmap optIm2(Bitmap _img)\n        {\n            int rows = _img.Height;\n            int cols = _img.Width;\n            pixels = (unsigned char)img-&gt;getPixels();  //here i dont know at all\n            bitmap = new unsigned char[rows * cols];  //here i dont know at all\n            p = bitmap;\n            outmap = new unsigned char[rows * cols];  //here i dont know at all\n\n            //convert to single byte grayscale\n            for (int row = 0; row &lt; rows; row++)\n            {\n                for (int col = 0; col &lt; cols; col++)\n                {\n                    pixel = *pixels++;  //here i dont know at all\n                    pixel += *pixels++;  //here i dont know at all\n                    pixel += *pixels++;  //here i dont know at all\n\n                    *p++ = pixel / 3;  //here i dont know at all\n                }\n            }\n            //free corona loading\n            delete img;\n\n            int distance = 9;\n            int threshold = 7;\n\n            //check our threshold\n            for (int row = 0; row &lt; rows; row++)\n            {\n                for (int col = 0; col &lt; cols; col++)\n                {\n                    if (bitmap[GetXY(col, row, cols)])\n                    {\n                        int count = 0;\n                        int x, y;\n                        int dhalf = distance / 2 + 1;\n\n                        //optimization possible here by checking inside a circle rather than square+dist\n                        for (x = Math.Max(col - dhalf, 0); x &lt; Math.Min(col + dhalf, cols); x++)\n                        {\n                            for (y = Math.Max(row - dhalf, 0); y &lt; Math.Min(row + dhalf, rows); y++)\n                            {\n                                if (SQ(distance) &gt; DISTANCE(col, row, x, y) &amp;&amp; bitmap[GetXY(x, y, cols)])\n                                    count++;\n                            }\n                        }\n                        if (count &gt;= threshold)\n                        {\n                            outmap[GetXY(col, row, cols)] = 255;\n                        }\n                        else\n                        {\n                            outmap[GetXY(col, row, cols)] = 0;\n                        }\n                    }\n                    else\n                    {\n                        outmap[GetXY(col, row, cols)] = 0;\n                    }\n                }\n            }\nreturn iDontKnowWhatYet;\n        }\n\n\n        private int GetXY(int x,int y, int w) { return ((x) + ((w) * (y))); }\n        private int SQ(int a) { return ((a) * (a)); }\n        private int DISTANCE(int a, int b, int c, int d) { return (SQ(a - c) + SQ(b - d)); }\n</code></pre>\n\n<p>Could anyone help me understand and convert this please?</p>\n"}, {"tags": ["c++", "winapi", "networking", "ipv6"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1428621664, "post_id": 29526082, "comment_id": 47252896, "body": "The <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa814401.aspx\" rel=\"nofollow noreferrer\"><code>CreateUnicastIpAddressEntry</code> documentation</a> says: &quot;<i>To create an IPv4 address that persists, the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa390383.aspx\" rel=\"nofollow noreferrer\">EnableStatic method of the Win32_NetworkAdapterConfiguration Class</a> in the Windows Management Instrumentation (WMI) controls may be used.</i>&quot;  It does not mention IPv6 persistence, though."}, {"owner": {"reputation": 61, "user_id": 4766178, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CxoqVMfppMQ/AAAAAAAAAAI/AAAAAAAAAQc/0_5L5RmcnK0/photo.jpg?sz=128", "display_name": "Cosmin Poieana", "link": "https://stackoverflow.com/users/4766178/cosmin-poieana"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1429530178, "post_id": 29526082, "comment_id": 47626004, "body": "Yes, I need something that works with v6 and also to be persistent. Maybe a good idea is trying with WMI calls through <code>MSFT_NetIPAddress.Create</code>."}], "owner": {"reputation": 61, "user_id": 4766178, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CxoqVMfppMQ/AAAAAAAAAAI/AAAAAAAAAQc/0_5L5RmcnK0/photo.jpg?sz=128", "display_name": "Cosmin Poieana", "link": "https://stackoverflow.com/users/4766178/cosmin-poieana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 382, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1428621147, "creation_date": 1428530169, "last_edit_date": 1428621147, "question_id": 29526082, "link": "https://stackoverflow.com/questions/29526082/set-ipv6-for-adapter-on-windows-with-c", "title": "Set IPv6 for adapter on Windows with C", "body": "<p>I want to add/set an IPv6 address on an existing interface using C/C++ code through Windows API (iphlpapi). I don't want to use netsh or powershell cmdlets, but something more native.</p>\n\n<p>Until now, I have tried with <code>CreateUnicastIpAddressEntry</code> and I want to know if there's something persistent and complete to set other IPv6 values like gateway or DNS.</p>\n\n<p>Isn't there a simpler way of doing this?</p>\n"}, {"tags": ["c++", "console", "calculator", "effect"], "comments": [{"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 4, "creation_date": 1428529915, "post_id": 29525987, "comment_id": 47206373, "body": "<code>==</code> does equality comparison. Did you mean to use assignment (<code>=</code>)? It seems you got the order of the operands mixed up, though. Aside from this, you should <b>always</b> verify that your read attempts were successful (e.g., <code>if (std::cin &gt;&gt; i) { ... }</code>) and returning <code>ans</code> from <code>main()</code> also won&#39;t do you much good."}, {"owner": {"reputation": 18728, "user_id": 2382136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMbhT.jpg?s=128&g=1", "display_name": "Wojtek Surowka", "link": "https://stackoverflow.com/users/2382136/wojtek-surowka"}, "edited": false, "score": 1, "creation_date": 1428530071, "post_id": 29525987, "comment_id": 47206455, "body": "+1 for what Dietmar said, and also - you try with <code>return ans</code> statements to return the result of calculations from <code>main</code> function. It will not work as intended - normally you should return 0 from <code>main</code> if there were no errors. Try rather to output the result to <code>cout</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4766228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c018c07ac76efc8c52ab11120a43451e?s=128&d=identicon&r=PG&f=1", "display_name": "DGSec", "link": "https://stackoverflow.com/users/4766228/dgsec"}, "edited": false, "score": 0, "creation_date": 1428530245, "post_id": 29526051, "comment_id": 47206542, "body": "Im trying to change the value of ans though"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 1, "user_id": 4766228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c018c07ac76efc8c52ab11120a43451e?s=128&d=identicon&r=PG&f=1", "display_name": "DGSec", "link": "https://stackoverflow.com/users/4766228/dgsec"}, "edited": false, "score": 2, "creation_date": 1428530427, "post_id": 29526051, "comment_id": 47206629, "body": "@DGSec <code>ans = x + y;</code> does change the value of <code>ans</code> to <code>x + y</code>. If that is not what you want, not need to clarify your question."}, {"owner": {"reputation": 1, "user_id": 4766228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c018c07ac76efc8c52ab11120a43451e?s=128&d=identicon&r=PG&f=1", "display_name": "DGSec", "link": "https://stackoverflow.com/users/4766228/dgsec"}, "edited": false, "score": 0, "creation_date": 1428539155, "post_id": 29526051, "comment_id": 47209404, "body": "Thanks man that was it, but why didn&#39;t it work when I did x + y = ans; ?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 1, "user_id": 4766228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c018c07ac76efc8c52ab11120a43451e?s=128&d=identicon&r=PG&f=1", "display_name": "DGSec", "link": "https://stackoverflow.com/users/4766228/dgsec"}, "edited": false, "score": 0, "creation_date": 1428571446, "post_id": 29526051, "comment_id": 47222006, "body": "@DGSec Because <code>= </code> assigns its right hand side to its left hand side, not the other way around. If it would work both ways, how would the compiler know what <code>x = y;</code> is supposed to do?"}], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": false, "score": 2, "last_activity_date": 1428530052, "creation_date": 1428530052, "answer_id": 29526051, "question_id": 29525987, "link": "https://stackoverflow.com/questions/29525987/x-y-ans-statement-has-no-effect-c/29526051#29526051", "title": "x + y == ans; Statement has no effect (C++)", "body": "<p><code>==</code> is the comparison operator. So with</p>\n\n<pre><code>x + y == ans;\n</code></pre>\n\n<p>you check if <code>x + y</code> equals <code>ans</code> and then discard the result of the comparison. This does nothing, thus the warning.</p>\n\n<p>If you want to assign <code>x + y</code> to <code>ans</code>, use</p>\n\n<pre><code>ans = x + y;\n</code></pre>\n\n<p>Note that <code>ans</code> has to be on the left hand side.</p>\n"}], "owner": {"reputation": 1, "user_id": 4766228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c018c07ac76efc8c52ab11120a43451e?s=128&d=identicon&r=PG&f=1", "display_name": "DGSec", "link": "https://stackoverflow.com/users/4766228/dgsec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1428530052, "creation_date": 1428529818, "question_id": 29525987, "link": "https://stackoverflow.com/questions/29525987/x-y-ans-statement-has-no-effect-c", "title": "x + y == ans; Statement has no effect (C++)", "body": "<p>I know I could write a calculator in a more efficient way, but I'm at my last step so I wanna finish this.</p>\n\n<p>The warnings appear after the usleep()</p>\n\n<p>In my console I get 0 as my answer and I get 4 warnings saying that x +,-,*,/ ==ans doesn't do anything.</p>\n\n<p>This is probably a dumb mistake but plz haalp. I'm a beginner in C++ and programming in general.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;unistd.h&gt;\n\nusing namespace std;\n\nint main()\n{\n    //X is first number, Y is second\n    int ans = 0;\n    string i;\n    int x;\n    int y;\n    string op;\n\n    cout &lt;&lt; \"This is a four function integer calculator.\" &lt;&lt; endl &lt;&lt; endl &lt;&lt; \"Type 'help' at any time to view the help screen\" &lt;&lt; endl&lt;&lt; endl&lt;&lt;\"Insert your first number\" &lt;&lt; endl;\n    cin &gt;&gt; i;\n    if(i==\"help\"){\n    cout &lt;&lt; \"Help Menu\" &lt;&lt; endl &lt;&lt; endl &lt;&lt; \"add = +\" &lt;&lt; endl &lt;&lt;\"subtract = -\" &lt;&lt; endl &lt;&lt;\"multiply = *\" &lt;&lt; endl &lt;&lt;\"divide = /\"&lt;&lt; endl;\n    cin &gt;&gt; i;\n    }else{\n    stringstream(i) &gt;&gt; x;\n    cout &lt;&lt; \"Insert your operator\" &lt;&lt; endl;\n    cin &gt;&gt; op;\n    cout &lt;&lt; \"Insert your second number\" &lt;&lt; endl;\n    cin &gt;&gt; y;\n    cout &lt;&lt; \"The calculator will now preform \" &lt;&lt; x &lt;&lt; \" \" &lt;&lt; op &lt;&lt; \" \" &lt;&lt; y &lt;&lt; endl;\n    usleep(1000000);\n    if(op== \"+\"){\n        x + y == ans;\n        return ans;\n    }else if(op==\"-\"){\n        x - y == ans;\n        return ans;\n    }else if(op==\"*\"){\n        x * y == ans;\n        return ans;\n    }else if(op==\"/\"){\n        x / y == ans;\n        return ans;\n    }else{\n    cout &lt;&lt; \"You inserted an illegal operator, please restart the application\" &lt;&lt; endl;\n    }\n    cout &lt;&lt; endl &lt;&lt; ans &lt;&lt; endl;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "variables", "language-lawyer", "undefined-behavior"], "comments": [{"owner": {"reputation": 1724, "user_id": 3241687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d947e2e67319fa6adcf088098adf3079?s=128&d=identicon&r=PG&f=1", "display_name": "horns", "link": "https://stackoverflow.com/users/3241687/horns"}, "edited": false, "score": 0, "creation_date": 1428529186, "post_id": 29525797, "comment_id": 47206003, "body": "Are you interested in the answer for c++ or for c? It is possible that they are different, considering they have different standards."}, {"owner": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "edited": false, "score": 2, "creation_date": 1428529186, "post_id": 29525797, "comment_id": 47206004, "body": "It is undefined behavior."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1428533066, "post_id": 29525797, "comment_id": 47207659, "body": "One more good reason to turn on compiler warnings: <code>-Wall -Werror</code> are your friends."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1428544097, "post_id": 29525797, "comment_id": 47210802, "body": "For C++ see <a href=\"http://stackoverflow.com/q/14935722/1708801\">Does initialization entail lvalue-to-rvalue conversion? Is int x = x; UB?</a> and <a href=\"http://stackoverflow.com/q/23415661/1708801\">Has C++ standard changed with respect to the use of indeterminate values and undefined behavior in C++14</a>? Both question offer a very detailed discussion of this issue."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1428551476, "post_id": 29525797, "comment_id": 47212635, "body": "@ShafikYaghmour I knew it was a bad idea to allow the dual tag question :X Perhaps this question should be edited to be C++-only (and closed as duplicate), and a new C question posted"}], "answers": [{"comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1428544820, "post_id": 29525852, "comment_id": 47211019, "body": "Most of what you are quoting is a note which is not normative and it does not really explain whether this is undefined behavior or not. See <a href=\"http://stackoverflow.com/questions/29525797/can-a-variable-be-used-while-being-declared#comment47210802_29525797\">my comment above</a> for two questions that answers this question for C++ in detail for both pre C++14 and C++14 and forward."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1428546162, "post_id": 29525852, "comment_id": 47211360, "body": "@ShafikYaghmour: The question isn&#39;t whether this is undefined behavior, it is whether the variable can be used in its own initialization.  There are plenty of cases which use the variable without using its value, e.g. <code>void* p = &amp;p;</code> so it is a perfectly reasonable question."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1428546271, "post_id": 29525852, "comment_id": 47211386, "body": "@BenVoigt in the C++ case this example is clearly undefined behavior and not saying so is a poor answer IMHO. Sure there are caveats but none of them are explained. The way modern optimizing compilers work we need to be very clear on what is and what is not UB b/c the optimizers can do very aggressive things with code that it believes invokes UB."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1428547049, "post_id": 29525852, "comment_id": 47211582, "body": "Note that C++14 amended this example to use <code>unsigned char</code> since the <code>int</code> case invokes UB."}], "owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "is_accepted": false, "score": 3, "last_activity_date": 1428530846, "last_edit_date": 1428530846, "creation_date": 1428529199, "answer_id": 29525852, "question_id": 29525797, "link": "https://stackoverflow.com/questions/29525797/can-a-variable-be-used-while-being-declared/29525852#29525852", "title": "Can a variable be used while being declared?", "body": "<p>C++14 draft N4140 [basic.scope.pdecl]/1:</p>\n\n<blockquote>\n  <p>The <em>point of declaration</em> for a name is immediately after its complete declarator (Clause 8) and before its\n  <em>initializer</em> (if any), except as noted below. [ <em>Example:</em></p>\n</blockquote>\n\n<pre><code>unsigned char x = 12;\n{ unsigned char x = x; }\n</code></pre>\n\n<blockquote>\n  <p>Here the second <code>x</code> is initialized with its own (indeterminate) value. <em>\u2014end example</em> ]</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1428529730, "post_id": 29525932, "comment_id": 47206281, "body": "&quot;Using&quot; <code>x</code> could include <code>sizeof x</code> or <code>&amp;x</code>.  Both of those are not obviously undefined behavior."}, {"owner": {"reputation": 18728, "user_id": 2382136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMbhT.jpg?s=128&g=1", "display_name": "Wojtek Surowka", "link": "https://stackoverflow.com/users/2382136/wojtek-surowka"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1428529793, "post_id": 29525932, "comment_id": 47206317, "body": "@chux Agreed - I modified the answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1428529902, "post_id": 29525932, "comment_id": 47206370, "body": "Yes, I suspect even <code>int x = x - x;</code> is not even safe."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1428529977, "post_id": 29525932, "comment_id": 47206408, "body": "@chux <a href=\"http://stackoverflow.com/questions/25074180/is-aa-or-a-a-undefined-behaviour-if-a-is-not-initialized/25074258#25074258\">see here</a> for discussion of something similar"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1428544908, "post_id": 29525932, "comment_id": 47211045, "body": "See <a href=\"http://stackoverflow.com/questions/29525797/can-a-variable-be-used-while-being-declared#comment47210802_29525797\">my comment above</a> this does not really explain why it is undefined behavior."}], "owner": {"reputation": 18728, "user_id": 2382136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMbhT.jpg?s=128&g=1", "display_name": "Wojtek Surowka", "link": "https://stackoverflow.com/users/2382136/wojtek-surowka"}, "is_accepted": false, "score": 3, "last_activity_date": 1428529768, "last_edit_date": 1428529768, "creation_date": 1428529546, "answer_id": 29525932, "question_id": 29525797, "link": "https://stackoverflow.com/questions/29525797/can-a-variable-be-used-while-being-declared/29525932#29525932", "title": "Can a variable be used while being declared?", "body": "<p>The answer for C++ - I am quoting C++11 standard:</p>\n\n<p>3.3.3.1:</p>\n\n<blockquote>\n  <p>A name declared in a block (6.3) is local to that block; it has block scope. Its potential scope begins at its point of declaration (3.3.2) and ends at the end of its block.</p>\n</blockquote>\n\n<p>And the point of declaration is defined in 3.3.2 as</p>\n\n<blockquote>\n  <p>The point of declaration for a name is immediately after its complete declarator (Clause 8) and before its initializer (if any), except as noted below.</p>\n  \n  <p>[ Example:</p>\n</blockquote>\n\n<pre><code> int x = 12;\n { int x = x; }\n</code></pre>\n\n<blockquote>\n  <p>Here the second x is initialized with its own (indeterminate) value. \u2014 end example ]</p>\n</blockquote>\n\n<p>Obviously, using the value of <code>x</code> before it is initialised is undefined behaviour.</p>\n"}, {"comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1428547181, "post_id": 29526012, "comment_id": 47211611, "body": "Pascal provides a very nice summary of the evolution of indeterminate values in C in <a href=\"http://blog.frama-c.com/index.php?post/2013/03/13/indeterminate-undefined\" rel=\"nofollow noreferrer\">Reading indeterminate contents might as well be undefined</a>"}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1428617582, "post_id": 29526012, "comment_id": 47251467, "body": "Hmm - shouldn&#39;t declaring &#39;a&#39; with &#39;volatile&#39; keyword do the same job as a request of the variable address (&amp;a)?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1428619435, "post_id": 29526012, "comment_id": 47252152, "body": "@FISOCPP the standard doesn&#39;t say that"}], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 6, "last_activity_date": 1428531336, "last_edit_date": 1495535219, "creation_date": 1428529887, "answer_id": 29526012, "question_id": 29525797, "link": "https://stackoverflow.com/questions/29525797/can-a-variable-be-used-while-being-declared/29526012#29526012", "title": "Can a variable be used while being declared?", "body": "<p>This question has a slightly different answer in C than in C++.</p>\n\n<p>In both cases, <code>int x = x;</code> tries to initialize <code>x</code> with itself.</p>\n\n<hr>\n\n<p><strong>In C++</strong>: [dcl.init]/12 (N3936) says that any evaluation of an object with indeterminate value causes undefined behaviour, <em>except for</em> certain cases involving unsigned <code>char</code>. In fact there is an <em>Example</em>:</p>\n\n<pre><code>int f(bool b) {\n    unsigned char c;\n    unsigned char d = c; // OK, d has an indeterminate value\n    int e = d;        // undefined behavior\n    return b ? d : 0; // undefined behavior if b is true\n}\n</code></pre>\n\n<hr>\n\n<p><strong>In C:</strong> It is more complicated. This is very similar to the behaviour of <code>int b;  foo(b - b);</code> which is <a href=\"https://stackoverflow.com/questions/25074180/is-aa-or-a-a-undefined-behaviour-if-a-is-not-initialized/\">covered in full here</a>.</p>\n\n<p>I won't repeat that text but the conclusions are, in C11:</p>\n\n<ul>\n<li><code>int a = a; &amp;a;</code> causes UB if and only if the system has trap representations for <code>int</code></li>\n<li><code>int a = a;</code>, with no subsequent occurrence of <code>&amp;a</code>, causes UB.</li>\n</ul>\n\n<hr>\n\n<p>Historical note: In C90 this caused UB. In C99 the <em>trap representation</em> was introduced, and in C11 the possibility of register trap was introduced (for Itanium).  The C++ standard doesn't deal with trap representations at all, it seems underspecified in the case of things like <a href=\"https://stackoverflow.com/questions/29394518/whats-the-result-of-a-b\">bitwise operators</a> generating negative zero.</p>\n"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 0, "last_activity_date": 1428547386, "last_edit_date": 1428547386, "creation_date": 1428546859, "answer_id": 29528757, "question_id": 29525797, "link": "https://stackoverflow.com/questions/29525797/can-a-variable-be-used-while-being-declared/29528757#29528757", "title": "Can a variable be used while being declared?", "body": "<p>There really are two parts to this question, the one asked:</p>\n\n<blockquote>\n  <p>Can a variable be used while being declared?</p>\n</blockquote>\n\n<p>where there answer clearly is Yes, due to the point of declaration rule quoted in other answers.</p>\n\n<p>And, equally important but not asked:</p>\n\n<blockquote>\n  <p>What usages of a variable during its declaration are safe?</p>\n</blockquote>\n\n<p>Well, within the initializer, the variable has not yet completed initialization (a matter of object lifetime), and in fact construction hasn't yet even started.  The object lifetime rules (section 3.8 of the Standard) state that some but not all operations are permitted on such a variable:</p>\n\n<blockquote>\n  <p>Before  the  lifetime  of  an  object  has  started  but  after  the  storage  which  the  object  will  occupy  has  been allocated or, after the lifetime of an object has ended and before the storage which the object occupied is reused or released, any pointer that refers to the storage location where the object will be or was located may be used but only in limited ways.  For an object under construction or destruction, see 12.7.  Otherwise,\n  such a pointer refers to allocated storage, and using the pointer as if the pointer were of type <code>void*</code>, is well-defined.  Indirection through such a pointer is permitted but the resulting lvalue may only be used in limited ways, as described below.  The program has undefined behavior if:</p>\n  \n  <ul>\n  <li>the  object  will  be  or  was  of  a  class  type  with  a  non-trivial  destructor  and  the  pointer  is  used  as  the operand of a delete-expression,</li>\n  <li>the  pointer  is  used  to  access  a  non-static  data  member  or  call  a  non-static  member  function  of  the object, or</li>\n  <li>the  pointer  is  implicitly  converted  to  a  pointer  to  a  virtual  base  class,  or</li>\n  <li>the  pointer  is  used  as  the  operand  of  a  <code>static_cast</code>,  except  when  the  conversion  is  to  pointer to <em><code>cv</code></em> <code>void</code>, or to pointer to <em><code>cv</code></em> <code>void</code> and subsequently to pointer to either <em><code>cv</code></em> <code>char</code> or <em><code>cv</code></em>  <code>unsigned char</code>, or </li>\n  <li>the  pointer  is  used  as  the  operand  of  a  <code>dynamic_cast</code>.</li>\n  </ul>\n</blockquote>\n\n<p>Effectively, for types with non-trivial initialization, the memory location doesn't contain an object yet, so it has no dynamic type, and attempting to access it as any type except <code>char</code> or <code>unsigned char</code> immediately falls afoul of strict aliasing.</p>\n\n<p>For types with trivial initialization, including <code>int</code>, an object exists as soon as properly aligned storage is acquired.  But if that storage has automatic or dynamic storage duration, the value is indeterminate until the variable is written to.  This rule from section 8.5 applies:</p>\n\n<blockquote>\n  <p>If  no  initializer  is  speci\ufb01ed  for  an  object,  the  object  is  default-initialized.   When  storage  for  an  object with  automatic  or  dynamic  storage  duration  is  obtained,  the  object  has  an  indeterminate  value,  and  if no initialization is performed for the object, that object retains an indeterminate value until that value is replaced.  [ Note:  Objects with static or thread storage duration are zero-initialized,  see 3.6.2.   \u2014\n  end note ] If an indeterminate value is produced by an evaluation, the behavior is undefined except in the following cases:</p>\n</blockquote>\n\n<p>and all the exceptional cases listed are specific to <code>unsigned char</code>.</p>\n\n<p>At first glance, this rule appears not to apply, because an initializer is specified.  However, during evaluation of the initializer, we are exactly in the case that \"When  storage  for  an  object with  automatic  or  dynamic  storage  duration  is  obtained\" where the rule does apply.</p>\n"}], "owner": {"reputation": 53, "user_id": 4766219, "user_type": "registered", "profile_image": "https://graph.facebook.com/826470240756000/picture?type=large", "display_name": "Abo-Mahmoud Al-Homsi", "link": "https://stackoverflow.com/users/4766219/abo-mahmoud-al-homsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 1, "accepted_answer_id": 29526012, "answer_count": 4, "score": 5, "last_activity_date": 1428547386, "creation_date": 1428528957, "last_edit_date": 1428545010, "question_id": 29525797, "link": "https://stackoverflow.com/questions/29525797/can-a-variable-be-used-while-being-declared", "title": "Can a variable be used while being declared?", "body": "<p>Why does the following compile without an error?:</p>\n\n<pre><code>int main()\n{\n    int x = x;  //I thought this should cause an error\n    return 0;\n}\n</code></pre>\n\n<p>Where in the standards is it explained why this is allowed?</p>\n"}, {"tags": ["c++", "boost", "boost-build"], "answers": [{"comments": [{"owner": {"reputation": 5898, "user_id": 817659, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dc6960319324ecebe786580dfca13f07?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/817659/ivan"}, "edited": false, "score": 0, "creation_date": 1428614330, "post_id": 29527820, "comment_id": 47249986, "body": "Thanks that is very helpful."}], "owner": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "is_accepted": true, "score": 1, "last_activity_date": 1428540358, "creation_date": 1428540358, "answer_id": 29527820, "question_id": 29525658, "link": "https://stackoverflow.com/questions/29525658/confused-by-boost-build-parameters/29527820#29527820", "title": "Confused by boost build parameters", "body": "<p>Most of this is documented at: </p>\n\n<p><a href=\"http://www.boost.org/build/doc/html/bbv2/overview/invocation.html\" rel=\"nofollow\">http://www.boost.org/build/doc/html/bbv2/overview/invocation.html</a></p>\n\n<p>To answer 1: link indicates if the libraries that you create will be static or shared, while runtime-link indicates if your new libraries will use the shared or static native C and C++ libraries</p>\n\n<p>To answer 2: threading=multi indicates that your new libraries will utilize the multi-threading capacities of your system. --with-thread means that you build the BOOST threading libraries. When building boost you have the options of building only a subset of the available libraries.</p>\n\n<p>To build both the multi-thread and non-mt, use the options</p>\n\n<p>./bjam .... threading=single threading=multi ....</p>\n\n<p>a</p>\n"}], "owner": {"reputation": 5898, "user_id": 817659, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dc6960319324ecebe786580dfca13f07?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/817659/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "accepted_answer_id": 29527820, "answer_count": 1, "score": 0, "last_activity_date": 1428540358, "creation_date": 1428528395, "last_edit_date": 1428528838, "question_id": 29525658, "link": "https://stackoverflow.com/questions/29525658/confused-by-boost-build-parameters", "title": "Confused by boost build parameters", "body": "<p>Ok I realize this question has probably been asked several times before, but I cannot find a reasonable response to it.</p>\n\n<p>Using g++4.9 under linux, I built boost like this. I somewhat randomly picked these values based on what I have been able to gather from documentation other internet suggestions:</p>\n\n<pre><code>sudo ./bjam -a -j8 variant=release link=static runtime-link=shared threading=multi install --build-type=complete --layout=tagged --with-thread stage\n</code></pre>\n\n<p>But I only see the mt (because I see the -mt in the name), shared and static libaries in <code>/usr/local/lib</code>. No, shared-non-threaded libraries?</p>\n\n<p>I am confused by:</p>\n\n<ol>\n<li>what is the difference between <code>link</code> and <code>runtime-link</code> ?</li>\n<li>what is the difference between <code>threading=multi</code> and <code>--with-thread</code> ?</li>\n</ol>\n\n<p><strong>How do I get both the multi-threaded and the non-mt shared libraries, with highest possible speed optimizations possible, built?</strong></p>\n"}, {"tags": ["c++", "function-object"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4766100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e7b10607e6d4c4568725a51cf796fad?s=128&d=identicon&r=PG&f=1", "display_name": "KKG10", "link": "https://stackoverflow.com/users/4766100/kkg10"}, "edited": false, "score": 0, "creation_date": 1428529297, "post_id": 29525616, "comment_id": 47206047, "body": "Thanks for the clarification.I was using g++ on cygwin and bsd."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 11, "user_id": 4766100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e7b10607e6d4c4568725a51cf796fad?s=128&d=identicon&r=PG&f=1", "display_name": "KKG10", "link": "https://stackoverflow.com/users/4766100/kkg10"}, "edited": false, "score": 0, "creation_date": 1428555269, "post_id": 29525616, "comment_id": 47213766, "body": "@KKG10 You should split this one output statement into several statements."}], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1428528264, "creation_date": 1428528264, "answer_id": 29525616, "question_id": 29525549, "link": "https://stackoverflow.com/questions/29525549/cout-printing-in-reverse-order/29525616#29525616", "title": "cout printing in reverse order", "body": "<p>operator &lt;&lt; is a some function defined for its parameters. The order of evaluation of function arguments is unspecified. They can be evaluated right to left or left to right. It seems your compiler evaluates them right to left.</p>\n"}], "owner": {"reputation": 11, "user_id": 4766100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e7b10607e6d4c4568725a51cf796fad?s=128&d=identicon&r=PG&f=1", "display_name": "KKG10", "link": "https://stackoverflow.com/users/4766100/kkg10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1038, "favorite_count": 0, "closed_date": 1428528331, "answer_count": 1, "score": 1, "last_activity_date": 1428528264, "creation_date": 1428527983, "question_id": 29525549, "link": "https://stackoverflow.com/questions/29525549/cout-printing-in-reverse-order", "closed_reason": "Duplicate", "title": "cout printing in reverse order", "body": "<p>Trying overloading operator() in the following example:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Fib {\n  public:\n    Fib() : a0_(1), a1_(1) {}\n    int operator()();\n  private:\n    int a0_, a1_;\n};\nint Fib::operator()() {\n    int temp = a0_;\n    a0_ = a1_;\n    a1_ = temp + a0_;\n    return temp;\n}\n\nint main() {\n    Fib fib;\n\n    cout &lt;&lt; fib() &lt;&lt;\",\" &lt;&lt; fib() &lt;&lt; \",\" &lt;&lt; fib() &lt;&lt; \",\" &lt;&lt; fib() &lt;&lt; \",\" &lt;&lt; fib() &lt;&lt; \",\" &lt;&lt; fib() &lt;&lt; endl;\n}\n</code></pre>\n\n<p>It prints the fib sequence in the reverse order as 8,5,3,2,1,1. I understand the states are kept in () overlading but why the printing is showing up in the reverse order? </p>\n"}, {"tags": ["c++", "for-loop", "numerical-methods"], "answers": [{"owner": {"reputation": 386, "user_id": 2850884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ypzTS.png?s=128&g=1", "display_name": "kamshi", "link": "https://stackoverflow.com/users/2850884/kamshi"}, "is_accepted": false, "score": 3, "last_activity_date": 1428528714, "creation_date": 1428528714, "answer_id": 29525738, "question_id": 29525539, "link": "https://stackoverflow.com/questions/29525539/variable-values-dont-change-in-for-loop/29525738#29525738", "title": "Variable values don&#39;t change in for loop", "body": "<p>Your mistake lies in the function dv. 4/5 performs an integer division, which results in 0. Change</p>\n\n<pre><code>double dv (double v, double x)\n{\n    double r = -4/5*v-x;\n    return r;\n}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>double dv (double v, double x)\n{\n    double r = (-4.0/5.0)*v-x;\n    return r;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4629811, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a1909a4bbcc87100eb9f693c580cc56?s=128&d=identicon&r=PG&f=1", "display_name": "d-money", "link": "https://stackoverflow.com/users/4629811/d-money"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 947, "favorite_count": 0, "closed_date": 1532635411, "answer_count": 1, "score": -1, "last_activity_date": 1428528714, "creation_date": 1428527944, "question_id": 29525539, "link": "https://stackoverflow.com/questions/29525539/variable-values-dont-change-in-for-loop", "closed_reason": "Duplicate", "title": "Variable values don&#39;t change in for loop", "body": "<p>So I am trying to make a program to do a 4th order Runge-Kutta for a 2nd order ODE.  There is an issue somewhere with my for-loop.  The value of v and x do not change from the initialized values, and I'm not sure how to fix it.   </p>\n\n<pre><code>double dv (double v, double x)\n{\ndouble r = -4/5*v-x;\nreturn r;\n}\n\ndouble dx (double v)\n{\nreturn v;\n}\n\nint main()\n{\ndouble kx1, kx2, kx3, kx4;\ndouble kv1, kv2, kv3, kv4;\ndouble tf = 10;\nint n;\ndouble h;\n\ncout &lt;&lt; \"Number of iterations: \";\ncin &gt;&gt; n;\n\n// Create two vectors to store the iteration values\nvector&lt;double&gt; x;\nvector&lt;double&gt; v;\nvector&lt;double&gt; t;\n\n// Initialize the vectors\nx.push_back(0.3);\nv.push_back(0);\nt.push_back(0);\n\nh = tf/n;\n\nfor(int i=0; i&lt;n; i++)\n{ \n    // Establish all the k values\n    kx1 = dx(v[i]);\n    kv1 = dv(x[i],v[i]);\n\n    kx2 = dx(v[i]+h/2*kx1);\n    kv2 = dv(x[i]+h/2*kx1,v[i]+h/2*kv1);\n\n    kx3 = dx(v[i]+h/2*kx2);\n    kv3 = dv(x[i]+h/2*kx2,v[i]+h/2*kv2);\n\n    kx4 = dx(v[i]+h*kx3);\n    kv4 = dv(x[i]+h*kx3,v[i]+h*kv3);\n\n    double fx = x[i] + h/6*(kx1+2*kx1+2*kx3+kx4);\n    double fv = v[i] + h/6*(kv1+2*kv1+2*kv3+kv4);\n\n    x.push_back(fx);\n    v.push_back(fv);\n}\n\n\nsystem(\"pause\");\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "output", "buffer"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1428527946, "post_id": 29525453, "comment_id": 47205385, "body": "Ctrl+C is certainly not meant for normal termination. I think you can catch and handle the signal though."}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1428529876, "post_id": 29525623, "comment_id": 47206354, "body": "I <i>speculate</i> that CTRL+C instead sets the failbit or eofbit, as well as the asynchronous termination."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1428529889, "post_id": 29525623, "comment_id": 47206363, "body": "Also, <code>while(cin&gt;&gt;a)</code>"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428531468, "post_id": 29525623, "comment_id": 47207078, "body": "@MooingDuck yes you&#39;re right:  I&#39;ve edited my first answer following an additional test that showed that Ctrl+C doesn&#39;t add new input, but indeed, sets the failbit."}], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 1, "last_activity_date": 1428531226, "last_edit_date": 1428531226, "creation_date": 1428528303, "answer_id": 29525623, "question_id": 29525453, "link": "https://stackoverflow.com/questions/29525453/output-buffer-and-cntrlc-to-exit-program/29525623#29525623", "title": "Output buffer and Cntrl+C to exit program", "body": "<p>I could reproduce the case on windows with MSVC 2013, but not on linux.   </p>\n\n<p>Ctrl+C causes <code>cin&gt;&gt;a</code> to fail and the end of file flag to be set.  Thus <code>a</code> is not overwritten.  As you loop forever without looking at  <code>cin</code>'s state, you continue to output the last (unchanged) valid value.  </p>\n\n<p>Ctrl+C causes at the same moment the programme to be interupted. It's almost immediate, but only almost. For instance, in windows, the processing of Ctrl+C is done <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682541%28v=vs.85%29.aspx\" rel=\"nofollow\">by launching a separate thread</a>, leaving the main thread to continue what he's doing unitli it's over.   So the endless loop will be interupted by the termination signal, but it could still perform some iteration.  </p>\n\n<p>The easiest way to avoid this problem is to process correctly input errors:  </p>\n\n<pre><code>while (true){    \n    if (cin &gt;&gt; a)\n        output &lt;&lt; a &lt;&lt; endl;  // output only if input was successful\n}\n</code></pre>\n"}], "owner": {"reputation": 1131, "user_id": 4338785, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e624595a16f268116870ed65489e5bc6?s=128&d=identicon&r=PG&f=1", "display_name": "Silversonic", "link": "https://stackoverflow.com/users/4338785/silversonic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 29525623, "answer_count": 1, "score": 1, "last_activity_date": 1428531226, "creation_date": 1428527641, "question_id": 29525453, "link": "https://stackoverflow.com/questions/29525453/output-buffer-and-cntrlc-to-exit-program", "title": "Output buffer and Cntrl+C to exit program", "body": "<p>If I have a simple program like;</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nint main(){\n\n    ofstream output(\"huh.txt\");\n\n    int a;\n\n    while(true){\n         cin &gt;&gt; a;\n         output &lt;&lt; a &lt;&lt; endl;\n    }\n\n\n}\n</code></pre>\n\n<p>If I input </p>\n\n<pre><code>2\n3\n4\n5\n6\n7\n</code></pre>\n\n<p>And then press Cntrl+C to exit the program, what will be saved in huh.txt is:</p>\n\n<pre><code>2\n3\n4\n5\n6\n7\n7\n7\n7\n7\n</code></pre>\n\n<p>My main program is similar to this. It wants continuous input from the user to place in to an output file. The only problem is when exitting using Cntrl+C the output often duplicates like shown above. How exactly are Cntrl+C and \"output\"'s buffer being treated such that 7 is output 4 more times than usual? And is it generally a bad idea to exit a program through Cntrl+C?</p>\n"}, {"tags": ["c++", "unique-ptr"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1428527452, "post_id": 29525370, "comment_id": 47205157, "body": "Change <code>void del_curl(CURL * ptr_curl);</code> from a non-static member function to a static member function."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1428527542, "post_id": 29525370, "comment_id": 47205200, "body": "@FranciscoAguilera because you are trying to bind a pointer-to-function to a pointer-to-member-function, and this doesn&#39;t work: <code>uptr_curl_(init_curl(), &amp;client::del_curl)</code>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1428528503, "post_id": 29525370, "comment_id": 47205682, "body": "@FranciscoAguilera Because your statement &quot;This matches the signature of del_curl&quot; is wrong. It does <i>not</i> match. A <code>void (*)(CURL*)</code> is not the same as a <code>void (client::*)(CURL*)</code>. One is a member (requires a <code>this</code>), the other is not. <i>They&#39;re not the same type</i>. You can all-caps WHY all you  want; but that&#39;s why, whether you like it or not."}, {"owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1428528556, "post_id": 29525370, "comment_id": 47205715, "body": "@vsoftco Yes, it should work somehow, because I don&#39;t want those to be static functions. They are not static. There is not 1 big <code>curl_init</code> for all instances of <code>client</code> they are unique per client."}, {"owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1428528633, "post_id": 29525370, "comment_id": 47205754, "body": "@WhozCraig It does match. That is not the problem. See my edit. I get the same error with the edit."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 2, "creation_date": 1428529065, "post_id": 29525370, "comment_id": 47205951, "body": "No, it really doesn&#39;t match, and there is nothing in your question that&#39;s actually relevant to templates. A pointer-to-function cannot point to a pointer-to-member-function, that&#39;s never been possible outside of templates either, and it&#39;s fundamentally impossible. Just take a moment to think of how it could possibly work. You need some instance to call a non-static member function on. You don&#39;t have any instance available to call it on, nor any room to keep track of an instance. So you can&#39;t call it. I&#39;m quite sure this has been asked before already. Let me see if I can find a good dup."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1428529573, "post_id": 29525370, "comment_id": 47206199, "body": "The reason to make <code>del_curl</code> a <code>static</code> function is because it doesn&#39;t make sense to access the functionality with <code>x.del_curl(y)</code>: <code>x</code> has nothing to do with the operation you&#39;re trying to do. The same is true for <code>init_curl</code>. In fact, one could argue that these functions shouldn&#39;t even be members of the <code>client</code> class anyways, since they have absolutely nothing to do with <code>client</code> objects."}], "answers": [{"comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1428527947, "post_id": 29525496, "comment_id": 47205387, "body": "Indeed, I think it&#39;s also interesting to say whether it&#39;s possible to use a non-static member function as a deleter. Can you somehow use a <code>std::function</code> instead?"}, {"owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "edited": false, "score": 0, "creation_date": 1428528053, "post_id": 29525496, "comment_id": 47205449, "body": "No, you are incorrect. The type of <code>client::del_curl</code> is <code>void (psclient::*)(void *)</code>. See my edit."}, {"owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1428528169, "post_id": 29525496, "comment_id": 47205507, "body": "There is another reason why you can&#39;t pass non-static member functions as deleter arguments, and I want to know WHY. @vsoftco That was the original question. Nobody ever reads until the end. xD"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "edited": false, "score": 1, "creation_date": 1428528573, "post_id": 29525496, "comment_id": 47205718, "body": "@FranciscoAguilera, is that a statement or is that a hunch?"}, {"owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "edited": false, "score": 0, "creation_date": 1428528796, "post_id": 29525496, "comment_id": 47205828, "body": "@RSahu Because I can see no conceivable reason why that would be a requirement, I want to initialize an instance of curl for that class aka as a member function, not for all instances aka static."}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1428528881, "last_edit_date": 1428528881, "creation_date": 1428527793, "answer_id": 29525496, "question_id": 29525370, "link": "https://stackoverflow.com/questions/29525370/how-to-pass-a-non-static-member-function-as-a-unique-ptr-deleter/29525496#29525496", "title": "How to pass a non-static member function as a unique_ptr deleter", "body": "<p>The second template parameter used in the declaration of <code>uptr_curl_</code> is <code>void (*)(CURL *)</code></p>\n\n<p>The type of <code>&amp;client::del_curl</code> is <code>void (CURL::*)(CURL*)</code>.</p>\n\n<p>They are not the same. You can change <code>del_curl</code> to a <code>static</code> member function. That will resolve the problem.</p>\n\n<p><strong>Update</strong></p>\n\n<p>You can use a non-<code>static</code> member function with the help of <code>std::function</code> and <code>std::bind</code>.</p>\n\n<pre><code>class client\n{\n   public:\n      client();\n   private:\n      std::unique_ptr&lt;CURL, std::function&lt;void(CURL *)&gt;&gt; uptr_curl_;\n      CURL * init_curl();\n      void del_curl(CURL * ptr_curl);\n};\n\nclient::client() : uptr_curl_(init_curl(),\n                              std::bind(&amp;client::del_curl, this, std::placeholders::_1))\n{\n   // ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "edited": false, "score": 0, "creation_date": 1428528947, "post_id": 29525775, "comment_id": 47205896, "body": "You are right, it is correct, for instances where you want to &quot;pass a static member function as a unique_ptr deleter&quot;, but my question is &quot;How to pass a non-static member function as a unique_ptr deleter&quot;."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1428528948, "post_id": 29525775, "comment_id": 47205897, "body": "Upticked. I was about to post quite-literally identical code. Thanks for saving me the trouble. =P"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "edited": false, "score": 1, "creation_date": 1428528995, "post_id": 29525775, "comment_id": 47205919, "body": "@FranciscoAguilera the <code>deleter</code> here is non-static."}, {"owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "edited": false, "score": 0, "creation_date": 1428529025, "post_id": 29525775, "comment_id": 47205931, "body": "I&#39;ll update your post if I find an improved version that doesn&#39;t use bind. Actually, one way I can think of could be using a lambda somehow."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "edited": false, "score": 0, "creation_date": 1428529052, "post_id": 29525775, "comment_id": 47205943, "body": "@FranciscoAguilera yes, or <code>std::mem_fn</code>, but couldn&#39;t come up with a fast solution."}, {"owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "edited": false, "score": 0, "creation_date": 1428529054, "post_id": 29525775, "comment_id": 47205945, "body": "@vsoftco That comment was meant to address the first line in your answer."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "edited": false, "score": 0, "creation_date": 1428529334, "post_id": 29525775, "comment_id": 47206062, "body": "@FranciscoAguilera with a lambda seems a bit tricky, since you need to <code>decltype(lambda)</code> in the template, however define the lambda in the constructor (i.e. later)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1428529828, "post_id": 29525775, "comment_id": 47206337, "body": "@vsoftco: doesn&#39;t the lambda automatically convert into a <code>std::function</code>?"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1428529881, "post_id": 29525775, "comment_id": 47206358, "body": "@Hurkyl The lambda implicitly converts to a <code>std::function</code>, however in templates the type must be exactly the same. The type of a lambda is a closure, known only to the compiler, so you need the <code>decltype</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1428529991, "post_id": 29525775, "comment_id": 47206414, "body": "@vsoftco yeah, identical lambda do not equate to identical closures, so I concur with your assessment of the difficulty. A custom deleter wrapper (which your bind is effectively doing) seems the best alternative. You can do it without <code>std::bind</code> by providing the full monte yourself (<a href=\"http://ideone.com/CTXjZN\" rel=\"nofollow noreferrer\">see example</a>), but why bother when you can just bind it."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1428530060, "post_id": 29525775, "comment_id": 47206449, "body": "@WhozCraig Indeed. Probably there is a way of setting the deleter at runtime, but seems to be too convoluted when <code>std::bind</code> does it just fine."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1428530102, "post_id": 29525775, "comment_id": 47206473, "body": "@vsoftco: You don&#39;t need lambda in the type: you just need the deleter type to be something that the lambda can convert to when you pass it into the constructor."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1428530145, "post_id": 29525775, "comment_id": 47206487, "body": "@Hurkyl ohh I see what you meant, just keep the template <code>std::function</code>..."}, {"owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "edited": false, "score": 0, "creation_date": 1428530270, "post_id": 29525775, "comment_id": 47206559, "body": "@Hurkyl, so it will implicitly convert to <code>std::function</code> rather than a closure if you explicitly put std::function as the template parameter?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1428530323, "post_id": 29525775, "comment_id": 47206581, "body": "@Hurkyl you mean <a href=\"http://ideone.com/iSSWAd\" rel=\"nofollow noreferrer\">something like this</a> ? Never even gave it a thought until you mentioned it, I admit."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "edited": false, "score": 1, "creation_date": 1428530703, "post_id": 29525775, "comment_id": 47206752, "body": "@FranciscoAguilera the second argument in the <code>unique_ptr</code> constructor will try to convert to whatever the second template is, in this case being a <code>std::function</code> allows the conversion of any callable object (including lambda&#39;s)"}, {"owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "edited": false, "score": 0, "creation_date": 1428530877, "post_id": 29525775, "comment_id": 47206828, "body": "@vsoftco yeah, I ran into <a href=\"http://stackoverflow.com/questions/29359544/boost-thread-pool-bind-errors\">something similar</a> before. However, using it the lambda way may look prettier, but you would have the overhead of another function call, unless you inline the other function within the lambda. Something to keep in mind."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "edited": false, "score": 0, "creation_date": 1428530963, "post_id": 29525775, "comment_id": 47206864, "body": "@FranciscoAguilera I think the lambda can be inlined as good as <code>std::bind</code>, since internally both produce functors, don&#39;t they?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1428531514, "post_id": 29525775, "comment_id": 47207095, "body": "With the lambda solution, you could just do <code>this-&gt;deleter</code> without going through the pointer-to-member thing."}, {"owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "edited": false, "score": 0, "creation_date": 1428531524, "post_id": 29525775, "comment_id": 47207100, "body": "@vsoftco Not really sure, would be interesting if someone did a detailed analysis, including performance tests <i>hint</i> <i>hint</i> :p Over my head tbh i&#39;m just a beginner."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1428531598, "post_id": 29525775, "comment_id": 47207128, "body": "@Hurkyl absolutely right, I don&#39;t know what I was thinking about, thanks!"}, {"owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "edited": false, "score": 0, "creation_date": 1428531804, "post_id": 29525775, "comment_id": 47207200, "body": "@Hurkyl, is <code>this *</code> captured by default or do you have to explicitly capture <code>this *</code>?"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "edited": false, "score": 0, "creation_date": 1428531852, "post_id": 29525775, "comment_id": 47207218, "body": "@FranciscoAguilera it&#39;s not, that&#39;s why I used <code>[=]</code>. You can just capture <code>[this]</code> though."}], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 10, "last_activity_date": 1428531870, "last_edit_date": 1428531870, "creation_date": 1428528866, "answer_id": 29525775, "question_id": 29525370, "link": "https://stackoverflow.com/questions/29525370/how-to-pass-a-non-static-member-function-as-a-unique-ptr-deleter/29525775#29525775", "title": "How to pass a non-static member function as a unique_ptr deleter", "body": "<p>The answer of @R. Sahu is correct imo. However, if you insist of passing a non-static member function deleter, here is a way of doing it using the good old <code>std::bind</code> and <code>std::function</code>:</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nclass Foo\n{\nprivate:\n    std::unique_ptr&lt;int, std::function&lt;void(int*)&gt;&gt; _up;\npublic:\n    Foo(): _up(new int[42], std::bind(&amp;Foo::deleter, this, std::placeholders::_1))\n    {\n\n    }\n    void deleter(int* p)\n    {\n        delete[] p;\n        std::cout &lt;&lt; \"In deleter\" &lt;&lt; std::endl;\n    }\n};\n\nint main()\n{\n    Foo foo;\n}\n</code></pre>\n\n<p>PS: I just don't like the <code>bind</code>, I wonder if one can improve on that.</p>\n\n<hr>\n\n<p>With a lambda:</p>\n\n<pre><code>Foo(): _up(new int[42],\n               [this](int* p)-&gt;void\n               {\n                   deleter(p);\n               }\n          ){}\n</code></pre>\n"}], "owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2238, "favorite_count": 0, "closed_date": 1428529964, "accepted_answer_id": 29525775, "answer_count": 2, "score": 7, "last_activity_date": 1428531870, "creation_date": 1428527221, "last_edit_date": 1428529969, "question_id": 29525370, "link": "https://stackoverflow.com/questions/29525370/how-to-pass-a-non-static-member-function-as-a-unique-ptr-deleter", "closed_reason": "Duplicate", "title": "How to pass a non-static member function as a unique_ptr deleter", "body": "<pre><code>#include &lt;memory&gt;\n#include &lt;iostream&gt;\n#include &lt;exception&gt;\n#include &lt;curl/curl.h&gt;\n\nclass client\n{\nprivate:\n    std::unique_ptr&lt;CURL, decltype(&amp;psclient::del_curl)&gt; uptr_curl_;\n\n    inline CURL * init_curl()\n    {\n        CURLcode result = curl_global_init(CURL_GLOBAL_DEFAULT);\n        if(result != CURLE_OK)\n            throw std::logic_error(curl_easy_strerror(result));\n        return curl_easy_init();\n    }\n\n    inline void del_curl(CURL * ptr_curl)\n    {\n        curl_easy_cleanup(ptr_curl);\n        curl_global_cleanup();\n    }\npublic:\n    inline client()\n    : uptr_curl_(init_curl(), &amp;client::del_curl)\n    {\n    }\n}\n</code></pre>\n\n<p>The compiler keeps complaining <code>No matching constructor for initialization of 'std::unique_ptr&lt;CURL, void (*)(CURL *)&gt;'</code></p>\n\n<p>It seems to me like the declaration is correct for the deleter template argument. It is a function pointer that returns void and takes a CURL * as an argument. This matches the signature of <code>del_curl</code>.</p>\n\n<p>Is there yet another random rule, unknown to me, in C++ that specifies a requirement for template arguments to non-static member function pointers? If so, why?</p>\n"}, {"tags": ["c++", "opencv", "face-recognition"], "comments": [{"owner": {"reputation": 9802, "user_id": 82159, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0f8cefcdb645e4d8e1dfe8556ba5c102?s=128&d=identicon&r=PG", "display_name": "Dat Chu", "link": "https://stackoverflow.com/users/82159/dat-chu"}, "edited": false, "score": 2, "creation_date": 1428527015, "post_id": 29525314, "comment_id": 47204943, "body": "What are the errors?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1428527122, "post_id": 29525314, "comment_id": 47205000, "body": "<i>&quot;... but I&#39;m receiving many errors...&quot;</i> Sou you&#39;ll need to become specific about these."}, {"owner": {"reputation": 1192, "user_id": 1173675, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f73bebd21b40817eb9a944a692a272e0?s=128&d=identicon&r=PG", "display_name": "d00dle", "link": "https://stackoverflow.com/users/1173675/d00dle"}, "edited": false, "score": 0, "creation_date": 1428527898, "post_id": 29525314, "comment_id": 47205360, "body": "Always post errors if you get any no matter how many or how long. You can&#39;t expect anyone to figure out what&#39;s wrong without."}], "answers": [{"owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "is_accepted": true, "score": 1, "last_activity_date": 1428531190, "creation_date": 1428531190, "answer_id": 29526293, "question_id": 29525314, "link": "https://stackoverflow.com/questions/29525314/opencv-face-recognition/29526293#29526293", "title": "OpenCV face recognition", "body": "<p>Is your code complete ? There are plenty of careless mistakes that could be easily corrected just by reading the error messages.</p>\n\n<ul>\n<li>no <strong>main()</strong> function</li>\n<li>missing semicolon lines 83 and 85</li>\n<li><p>same line 85:</p>\n\n<pre><code>Mat Image* img = cvLoadImage (\"./Lena.png\");\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>Image = imread(\"./Lena.png\");\n</code></pre>\n\n<p><strong>cvLoadImage()</strong> is C (returning an <code>IplImage*</code>), not C++. (Although I don't understand why you are loading this same image over and over within an infinite loop.)</p></li>\n<li><p><code>original</code> fron line 88 is not defined</p></li>\n<li><p>lines 90-94 are twice the same thing</p></li>\n<li><p>undefined <code>text</code> variable line 113 in <strong>send()</strong> function, probably the one line 107 you should pass as parameter.</p></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 4766106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36cb94caac6c1b437e29b0bd91790c9e?s=128&d=identicon&r=PG&f=1", "display_name": "Gareth", "link": "https://stackoverflow.com/users/4766106/gareth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 637, "favorite_count": 0, "closed_date": 1428546688, "accepted_answer_id": 29526293, "answer_count": 1, "score": -5, "last_activity_date": 1428531190, "creation_date": 1428526976, "question_id": 29525314, "link": "https://stackoverflow.com/questions/29525314/opencv-face-recognition", "closed_reason": "Not suitable for this site", "title": "OpenCV face recognition", "body": "<p>Im am trying to use opencv to perform face recognition on a static image by comparing it against a database of images and printing the prediction to a txt file, this is the code i have put together but I'm receiving many errors. Any help on where i have gone wrong will be greatly appreciated. </p>\n\n<pre><code>  #include \"opencv2/core/core.hpp\"\n#include \"opencv2/contrib/contrib.hpp\"\n#include \"opencv2/highgui/highgui.hpp\"\n#include \"opencv2/imgproc/imgproc.hpp\"\n#include \"opencv2/objdetect/objdetect.hpp\"\n\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n\nusing namespace cv;\nusing namespace std;\n\n\nstatic Mat norm_0_255(InputArray _src) {\n    Mat src = _src.getMat();\n    // Create and return normalized image:\n    Mat dst;\n    switch(src.channels()) {\n        case 1:\n            cv::normalize(_src, dst, 0, 255, NORM_MINMAX, CV_8UC1);\n            break;\n        case 3:\n            cv::normalize(_src, dst, 0, 255, NORM_MINMAX, CV_8UC3);\n            break;\n        default:\n            src.copyTo(dst);\n            break;\n    }\n    return dst;\n}\n\nstatic void read_csv(const string&amp; filename, vector&lt;Mat&gt;&amp; images, vector&lt;int&gt;&amp; labels, char separator = ';') {\n    std::ifstream file(filename.c_str(), ifstream::in);\n    if (!file) {\n        string error_message = \"No valid input file was given, please check the given filename.\";\n        CV_Error(CV_StsBadArg, error_message);\n    }\n    string line, path, classlabel;\n    while (getline(file, line)) {\n        stringstream liness(line);\n        getline(liness, path, separator);\n        getline(liness, classlabel);\n        if(!path.empty() &amp;&amp; !classlabel.empty()) {\n            images.push_back(imread(path, 0));\n            labels.push_back(atoi(classlabel.c_str()));\n        }\n    }\n}\n//path to csv\nstring fn_csv = (\"./at.csv\");\n//patch to haar cascade\nstring fn_haar = (\"./haarcascade_frontalface_alt.xml\");\n// These vectors hold the images and corresponding labels.\nvector&lt;Mat&gt; images;\nvector&lt;int&gt; labels;\nread_csv(fn_csv, images, labels);\n\n\n\n\n\n    int im_width = images[0].cols;\n    int im_height = images[0].rows;\n\nMat testSample = images[images.size() - 1];\nint testLabel = labels[labels.size() - 1];\n\n//cv::createEigenFaceRecognizer(10);\n\n    //create the model\n\n    Ptr&lt;FaceRecognizer&gt; model = createEigenFaceRecognizer();\n    model-&gt;train(images, labels);\n\n//load cascade\n\n    CascadeClassifier haar_cascade;\n    haar_cascade.load(fn_haar);\n\n    Mat Image\n    for(;;) {\n   Mat Image* img = cvLoadImage (\"./Lena.png\")\n\n        Mat gray;\n        cvtColor(original, gray, CV_BGR2GRAY);\n        // Find the face\n        vector&lt; Rect_&lt;int&gt; &gt; faces;\n        haar_cascade.detectMultiScale(gray, faces);\n\n        vector&lt; Rect_&lt;int&gt; &gt; faces;\n        haar_cascade.detectMultiScale(gray, faces);\n\n        for(int i = 0; i &lt; faces.size(); i++) {\n            // Process face\n            Rect face_i = faces[i];\n            // Crop the face from the image.\n            Mat face = gray(face_i);\n\n            Mat face_resized;\n            cv::resize(face, face_resized, Size(im_width, im_height), 1.0, 1.0, INTER_CUBIC);\n            // prediction\n            int prediction = model-&gt;predict(face_resized);\n\nstring text = format(\"Prediction = %d\", prediction);\n        }\n\n    }\n\n    int send () {\n        std::string s= text;\n        std::ofstream os(\"prediction.txt\");\n        if (!os) { std::cerr&lt;&lt;\"Error writing to prediction\"&lt;&lt;std::endl; } else {\n            os &lt;&lt; s;  \n        }\n\n    return 0;\n    }\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1428528797, "post_id": 29525279, "comment_id": 47205829, "body": "There is code here for unicode/ascii converion <a href=\"http://stackoverflow.com/questions/4786292/converting-unicode-strings-and-vice-versa\" title=\"converting unicode strings and vice versa\">stackoverflow.com/questions/4786292/&hellip;</a> However, I don&#39;t know if that&#39;s what you need. Is <code>argv</code> supposed to be UTF-8 or something? Otherwise if path1 and path2 are ascii then just use ascii functions."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1428529880, "post_id": 29525279, "comment_id": 47206357, "body": "Are you sure you don&#39;t want to use <code>_rename</code> instead of <code>_wrename</code>?"}, {"owner": {"reputation": 1934, "user_id": 1010613, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/98ecd61e1e4efd18183cbbef402509dc?s=128&d=identicon&r=PG", "display_name": "hpn", "link": "https://stackoverflow.com/users/1010613/hpn"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1428530031, "post_id": 29525279, "comment_id": 47206435, "body": "@MatsPetersson Yes. actually path1 and path2 contain unicode characters."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428531094, "post_id": 29525279, "comment_id": 47206919, "body": "@hpn: What encoding do they use?  <a href=\"http://www.joelonsoftware.com/articles/Unicode.html\" rel=\"nofollow noreferrer\">The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)</a> and <a href=\"http://kunststube.net/encoding/\" rel=\"nofollow noreferrer\">What Every Programmer Absolutely, Positively Needs To Know About Encodings And Character Sets To Work With Text</a>"}], "answers": [{"owner": {"reputation": 109, "user_id": 3411246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/663d25ebf27c7aafbc81fe5e38d0bb35?s=128&d=identicon&r=PG&f=1", "display_name": "deanone", "link": "https://stackoverflow.com/users/3411246/deanone"}, "is_accepted": false, "score": 0, "last_activity_date": 1428564494, "last_edit_date": 1428564494, "creation_date": 1428564444, "answer_id": 29532365, "question_id": 29525279, "link": "https://stackoverflow.com/questions/29525279/convert-char-to-wchar-t/29532365#29532365", "title": "Convert char to wchar_t", "body": "<p>You can use something like this:</p>\n\n<pre><code>std::wstring s2ws(const std::string&amp; s) {\n    int slength = (int)s.length() + 1;\n    int len = MultiByteToWideChar(CP_ACP, 0, s.c_str(), slength, 0, 0); \n    std::wstring r(len, L'\\0');\n    MultiByteToWideChar(CP_ACP, 0, s.c_str(), slength, &amp;r[0], len);\n    r.resize(r.size() - 1);\n    return r;\n}\n</code></pre>\n"}, {"owner": {"reputation": 6643, "user_id": 2032021, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/c1c31bca855c458b3f218ef6a303184d?s=128&d=identicon&r=PG", "display_name": "Dr. Debasish Jana", "link": "https://stackoverflow.com/users/2032021/dr-debasish-jana"}, "is_accepted": false, "score": 0, "last_activity_date": 1428564754, "creation_date": 1428564754, "answer_id": 29532467, "question_id": 29525279, "link": "https://stackoverflow.com/questions/29525279/convert-char-to-wchar-t/29532467#29532467", "title": "Convert char to wchar_t", "body": "<p>Use <code>mbstowcs</code></p>\n\n<pre><code>size_t mbstowcs (wchar_t* dest, const char* src, size_t max);\n</code></pre>\n\n<p>Converts multibyte string to wide-character string. It translates the multibyte sequence pointed by src to the equivalent sequence of wide-characters (which is stored in the array pointed by dest), up until either max wide characters have been translated or until a null character is encountered in the multibyte sequence src (which is also translated and stored, but not counted in the length returned by the function).</p>\n\n<p>If max characters are successfully translated, the resulting string stored in dest is not null-terminated.</p>\n\n<p>The behavior of this function depends on the LC_CTYPE category of the selected C locale.</p>\n"}], "owner": {"reputation": 1934, "user_id": 1010613, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/98ecd61e1e4efd18183cbbef402509dc?s=128&d=identicon&r=PG", "display_name": "hpn", "link": "https://stackoverflow.com/users/1010613/hpn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4304, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1428564754, "creation_date": 1428526870, "last_edit_date": 1428529171, "question_id": 29525279, "link": "https://stackoverflow.com/questions/29525279/convert-char-to-wchar-t", "title": "Convert char to wchar_t", "body": "<p>In the following code how do I read <em>path1</em> and <em>path2</em> from arguments(<code>argv</code>)? How do I convert <code>argv[1]</code> and <code>argv[2]</code> to wide string format so that it's possible to use them as <code>_wrename</code> arguments?</p>\n\n<pre><code>int main(int argc, const char *argv[])\n{\n  const wchar_t path1[] = L\"/tmp/a\";\n  const wchar_t path2[] = L\"/tmp/b\";\n  _wrename(path1, path2);\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc", "auto-vectorization"], "comments": [{"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1428527439, "post_id": 29525219, "comment_id": 47205148, "body": "When I compile that (also with gcc 4.9.2 and the same command line, although <code>-march=native</code> may mean something different), adding <code>-save-temps</code>, I get the same output from the optimizer and assembly that contains <code>vmodapd</code> and <code>vaddpd</code> (i.e., is vectorized). I think the optimizer notes are about other parts of the code that can&#39;t be vectorized. Are you certain the addition in your generated asm isn&#39;t vectorized?"}, {"owner": {"reputation": 619, "user_id": 3910671, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/KtjIl.png?s=128&g=1", "display_name": "sperber", "link": "https://stackoverflow.com/users/3910671/sperber"}, "reply_to_user": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1428528316, "post_id": 29525219, "comment_id": 47205576, "body": "@Wintermute: From other examples I was under the impression that GCC explicitly states if a loop has been vectorized (verbosity level doesn&#39;t change that). The code consists of what I have posted, there are no other loops for which vectorization could fail. I haven&#39;t looked at assembly code. But there does not seem to be a speed gain with or without vectorization activated (assuming -O2)."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 1, "creation_date": 1428529897, "post_id": 29525219, "comment_id": 47206369, "body": "That there&#39;s no/little performance gain is because gcc 4.9.2 generates SSE instructions (albeit not SSE2) even with <code>-O0</code>. SSE2 instructions are only generated with <code>-O3</code>, but their advantage over SSE1 in this scenario is limited. Why the optimizer output does not mention any of this is anyone&#39;s guess, but I&#39;m looking at the generated asm, where it is plainly visible."}], "owner": {"reputation": 619, "user_id": 3910671, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/KtjIl.png?s=128&g=1", "display_name": "sperber", "link": "https://stackoverflow.com/users/3910671/sperber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1290, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1428526682, "creation_date": 1428526682, "question_id": 29525219, "link": "https://stackoverflow.com/questions/29525219/auto-vectorization-with-gcc", "title": "Auto-vectorization with GCC", "body": "<p>I would like to vectorize matrix-vector products in my code. I try to use auto-vectorization in GCC, and it just doesn't work at all and I have no clue how to make it work out. Right now I try a very simple example code:</p>\n\n<pre><code>#define N 200000\ndouble a[N] __attribute__(( aligned(16) ));\ndouble b[N] __attribute__(( aligned(16) )) ;\ndouble c[N] __attribute__(( aligned(16) )) ;\n\nvoid f()\n{ \n    int i;\n\n    for( i = 0; i &lt; N; i++ )\n    {\n        a[i] = b[i] + c[i];\n    }\n}\n\nint main( int argc,char** argv )\n{\n    f();\n\n    return( 0 );\n}\n</code></pre>\n\n<p>I use gcc version 4.9.2 and compile with flags (for completeness)</p>\n\n<pre><code>-Wall -O3 -ftree-vectorize -march=native -msse2 -fopt-info-vec-missed -ftree-vectorizer-verbose=1 -std=c++11 -fdiagnostics-color=auto\n</code></pre>\n\n<p>I get the following output (I really do not understand what the stuff means, but the bottom line clearly is that vectorization doesn't work out):</p>\n\n<pre><code>optimization2.cpp:10:2: note: misalign = 0 bytes of ref b[i_11]\noptimization2.cpp:10:2: note: misalign = 0 bytes of ref c[i_11]\noptimization2.cpp:10:2: note: misalign = 0 bytes of ref a[i_11]\noptimization2.cpp:10:2: note: virtual phi. skip.\noptimization2.cpp:10:2: note: num. args = 4 (not unary/binary/ternary op).\noptimization2.cpp:10:2: note: not ssa-name.\noptimization2.cpp:10:2: note: use not simple.\noptimization2.cpp:10:2: note: num. args = 4 (not unary/binary/ternary op).\noptimization2.cpp:10:2: note: not ssa-name.\noptimization2.cpp:10:2: note: use not simple.\noptimization2.cpp:6:6: note: not vectorized: not enough data-refs in basic block.\noptimization2.cpp:12:13: note: not vectorized: no vectype for stmt: vect__4.6_1 = MEM[(int *)vectp_b.4_9];\n scalar_type: vector(4) int\noptimization2.cpp:12:13: note: not vectorized: not enough data-refs in basic block.\noptimization2.cpp:6:6: note: not vectorized: not enough data-refs in basic block.\noptimization2.cpp:14:1: note: not vectorized: not enough data-refs in basic block.\noptimization2.cpp:10:2: note: misalign = 0 bytes of ref b[i_12]\noptimization2.cpp:10:2: note: misalign = 0 bytes of ref c[i_12]\noptimization2.cpp:10:2: note: misalign = 0 bytes of ref a[i_12]\noptimization2.cpp:10:2: note: virtual phi. skip.\noptimization2.cpp:10:2: note: num. args = 4 (not unary/binary/ternary op).\noptimization2.cpp:10:2: note: not ssa-name.\noptimization2.cpp:10:2: note: use not simple.\noptimization2.cpp:10:2: note: num. args = 4 (not unary/binary/ternary op).\noptimization2.cpp:10:2: note: not ssa-name.\noptimization2.cpp:10:2: note: use not simple.\noptimization2.cpp:16:5: note: not vectorized: not enough data-refs in basic block.\noptimization2.cpp:12:13: note: not vectorized: no vectype for stmt: vect__4.28_2 = MEM[(int *)vectp_b.26_9];\n scalar_type: vector(4) int\noptimization2.cpp:12:13: note: not vectorized: not enough data-refs in basic block.\noptimization2.cpp:16:5: note: not vectorized: not enough data-refs in basic block.\noptimization2.cpp:16:5: note: not vectorized: not enough data-refs in basic block.\n</code></pre>\n\n<p>I have tried many many other things and other codes but never could get anything vectorized. What is the trick?</p>\n"}, {"tags": ["c++", "qt", "vtable", "qobject"], "comments": [{"owner": {"reputation": 1130, "user_id": 3494492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/j7gkb.png?s=128&g=1", "display_name": "kiwixz", "link": "https://stackoverflow.com/users/3494492/kiwixz"}, "edited": false, "score": 1, "creation_date": 1428526081, "post_id": 29525053, "comment_id": 47204440, "body": "&#39;Clean all&#39; and try to manually run <code>qmake</code> (maybe from the menu in Qt Creator if you use it)"}, {"owner": {"reputation": 138, "user_id": 4577482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8cb36210b02627671d3504d3894b384?s=128&d=identicon&r=PG&f=1", "display_name": "marcus", "link": "https://stackoverflow.com/users/4577482/marcus"}, "edited": false, "score": 0, "creation_date": 1428526315, "post_id": 29525053, "comment_id": 47207352, "body": "Did you defne the createHelix() method in your cpp file and compiled it again?"}, {"owner": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "edited": false, "score": 0, "creation_date": 1428526394, "post_id": 29525053, "comment_id": 47207353, "body": "Yes, it&#39;s defined. Didn&#39;t add it to reduce space in question. void HelixButton::createHelix(bool){}."}, {"owner": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "reply_to_user": {"reputation": 1130, "user_id": 3494492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/j7gkb.png?s=128&g=1", "display_name": "kiwixz", "link": "https://stackoverflow.com/users/3494492/kiwixz"}, "edited": false, "score": 0, "creation_date": 1428526479, "post_id": 29525053, "comment_id": 47204659, "body": "I am not using QtCreator. I do compile with make -f Makefile.qt myPlugin.bundle and cleaned with make -f Makefile.qt clean. But same issue. Is there a better way to clean in command line ?"}, {"owner": {"reputation": 1130, "user_id": 3494492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/j7gkb.png?s=128&g=1", "display_name": "kiwixz", "link": "https://stackoverflow.com/users/3494492/kiwixz"}, "edited": false, "score": 1, "creation_date": 1428526571, "post_id": 29525053, "comment_id": 47204703, "body": "Notice the <b>q</b> in <b>qmake</b>, I think you have to run this too."}, {"owner": {"reputation": 1130, "user_id": 3494492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/j7gkb.png?s=128&g=1", "display_name": "kiwixz", "link": "https://stackoverflow.com/users/3494492/kiwixz"}, "edited": false, "score": 0, "creation_date": 1428526624, "post_id": 29525053, "comment_id": 47207354, "body": "@LaurentCrivello You forgotten to name the bool ?"}, {"owner": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "reply_to_user": {"reputation": 1130, "user_id": 3494492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/j7gkb.png?s=128&g=1", "display_name": "kiwixz", "link": "https://stackoverflow.com/users/3494492/kiwixz"}, "edited": false, "score": 0, "creation_date": 1428526745, "post_id": 29525053, "comment_id": 47204794, "body": "The Makefile.qt is actually instructing make to use make (I can see it in the echoed commands). I tried to run it manually, but still same issue."}, {"owner": {"reputation": 138, "user_id": 4577482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8cb36210b02627671d3504d3894b384?s=128&d=identicon&r=PG&f=1", "display_name": "marcus", "link": "https://stackoverflow.com/users/4577482/marcus"}, "edited": false, "score": 0, "creation_date": 1428527075, "post_id": 29525053, "comment_id": 47207355, "body": "Ok, so if each function is defined properly did you try to comment stuff out? Cleaning the project might also help."}, {"owner": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "edited": false, "score": 0, "creation_date": 1428527877, "post_id": 29525053, "comment_id": 47207356, "body": "Following your comment I commented a lot of stuff out and am now down to what is in the question (updated). Always same stuff: without Q_OBJECT it compiles perfect, with Q_OBJECT I get the error."}], "answers": [{"comments": [{"owner": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "edited": false, "score": 0, "creation_date": 1428528041, "post_id": 29525257, "comment_id": 47205444, "body": "qmake is executed properly when I don&#39;t have Q_OBJECT, so I am not sure this is really the issue;"}, {"owner": {"reputation": 5161, "user_id": 3065406, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6697e5c2ff5cfdf8f196fe42a309598?s=128&d=identicon&r=PG", "display_name": "deW1", "link": "https://stackoverflow.com/users/3065406/dew1"}, "reply_to_user": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "edited": false, "score": 0, "creation_date": 1428528200, "post_id": 29525257, "comment_id": 47205522, "body": "Then you&#39;re probably missing required definitions in your pro file would you mind showing the full pro. Also check in the full qmake doc how the pro has to be written against your project"}, {"owner": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "edited": false, "score": 0, "creation_date": 1428528430, "post_id": 29525257, "comment_id": 47205631, "body": "Ok, I have updated my question with the full Pro file and qtconfig too. Thanks."}, {"owner": {"reputation": 5161, "user_id": 3065406, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6697e5c2ff5cfdf8f196fe42a309598?s=128&d=identicon&r=PG", "display_name": "deW1", "link": "https://stackoverflow.com/users/3065406/dew1"}, "reply_to_user": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "edited": false, "score": 0, "creation_date": 1428529097, "post_id": 29525257, "comment_id": 47205964, "body": "Where did you define what type of app will be created And qt += qt debug or release for example so on. Please read the full overview link about the project file"}, {"owner": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "edited": false, "score": 0, "creation_date": 1428529264, "post_id": 29525257, "comment_id": 47206033, "body": "When compiling I give as argument myplugin.bundle, so it knows it will be a Maya bundle. Removing Q_OBJECT makes it compile properly, I can execute it into Maya, but the buttons are not responsive. Therefore I think the issue is not really related to type of app."}, {"owner": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "edited": false, "score": 0, "creation_date": 1428558332, "post_id": 29525257, "comment_id": 47214800, "body": "By looking a bit more deeply, I found out that no moc is generated for the Q_OBJECT objects. Will need to understand why."}], "owner": {"reputation": 5161, "user_id": 3065406, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6697e5c2ff5cfdf8f196fe42a309598?s=128&d=identicon&r=PG", "display_name": "deW1", "link": "https://stackoverflow.com/users/3065406/dew1"}, "is_accepted": false, "score": 0, "last_activity_date": 1428527166, "last_edit_date": 1428527166, "creation_date": 1428526797, "answer_id": 29525257, "question_id": 29525053, "link": "https://stackoverflow.com/questions/29525053/undefined-symbol-vtable/29525257#29525257", "title": "Undefined symbol vtable", "body": "<p>You have to run <code>qmake</code> in that folder for the <code>makefile</code> to be generated by Qt according to your project settings.</p>\n\n<p>After that you can run make.</p>\n\n<p>Also when running <code>qmake</code> you might need to specify the <code>.pro</code> file.</p>\n\n<p>Check the <a href=\"http://doc.qt.io/qt-5/qmake-running.html\" rel=\"nofollow\">documentation</a> of <code>qmake</code></p>\n\n<p>And <a href=\"http://doc.qt.io/qt-5/qmake-manual.html\" rel=\"nofollow\">this</a> for a full overview.</p>\n"}, {"owner": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "is_accepted": false, "score": 0, "last_activity_date": 1428563672, "creation_date": 1428563672, "answer_id": 29532099, "question_id": 29525053, "link": "https://stackoverflow.com/questions/29525053/undefined-symbol-vtable/29532099#29532099", "title": "Undefined symbol vtable", "body": "<p>My makefile was missing a moc generation command. Once moc_file.cpp generated and included from the main cpp file, everything compiles properly.</p>\n"}], "owner": {"reputation": 3363, "user_id": 786238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2ad644dfd29b5e1705af19c770ff65d5?s=128&d=identicon&r=PG", "display_name": "Laurent Crivello", "link": "https://stackoverflow.com/users/786238/laurent-crivello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 826, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1428563672, "creation_date": 1428526043, "last_edit_date": 1428528408, "question_id": 29525053, "link": "https://stackoverflow.com/questions/29525053/undefined-symbol-vtable", "title": "Undefined symbol vtable", "body": "<p>Compiling Qt cpp code and receiving this error:</p>\n\n<pre><code>Running ld for x86_64 ...\nUndefined symbols for architecture x86_64:\n  \"vtable for HelixButton\", referenced from:\n      HelixButton::HelixButton(QString const&amp;, QWidget*) in helixQtCmd.o\n      HelixButton::HelixButton(QString const&amp;, QWidget*) in helixQtCmd.o\n  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.\n</code></pre>\n\n<p>my .h file looks like:</p>\n\n<pre><code>class HelixButton : public QPushButton\n{\n    Q_OBJECT\n\npublic:\n            HelixButton(const QString&amp; text, QWidget* parent = 0);\n    virtual ~HelixButton();\n};\n</code></pre>\n\n<p>and the corresponding cpp:</p>\n\n<pre><code>HelixButton::HelixButton(const QString&amp; text, QWidget* parent)\n:   QPushButton(text, parent)\n{}\n\nHelixButton::~HelixButton()\n{}\n</code></pre>\n\n<p>The pro file contains the proper header:</p>\n\n<pre><code>include(qtconfig)\n    INCLUDEPATH += /Users/laurent/Dropbox/Dev/Maya/qt/include\n    INCLUDEPATH += /Users/laurent/Dropbox/Dev/Maya/qt/include/QtGui\n    INCLUDEPATH += /Users/laurent/Dropbox/Dev/Maya/qt/include/QtCore\n    INCLUDEPATH += /Users/laurent/Dropbox/Dev/Maya/qt/include/QtUiTools\n\nTARGET = helixQtCmd\nHEADERS += helixQtCmd.h\nSOURCES += helixQtCmd.cpp\n</code></pre>\n\n<p>Contents of the qtconfig file:</p>\n\n<pre><code>TEMPLATE = lib\nCONFIG -= debug\nCONFIG += qt warn_on plugin\n\n_DEVKIT_LOCATION = $$(MAYA_LOCATION)/../../devkit\n_MAYA_INCLUDE_DIR = $${_DEVKIT_LOCATION}/include\n\nDEFINES     += CC_GNU_ OSMac_ OSMacOSX_ Bits32_  REQUIRE_IOSTREAM \\\n            OSMac_MachO_ _LANGUAGE_C_PLUS_PLUS \nINCLUDEPATH += .. \"$${_MAYA_INCLUDE_DIR}\"\nTARGET_EXT  = bundle\nQMAKE_EXTENSION_SHLIB   = bundle\n\nQMAKE_CC    = clang\nQMAKE_CXX   = clang++\n\n_CFLAGS     = -O3 -include \"$${_MAYA_INCLUDE_DIR}/maya/OpenMayaMac.h\"\nQMAKE_CFLAGS    += $${_CFLAGS}\n\nQMAKE_CXXFLAGS  += $${_CFLAGS} -stdlib=libstdc++ $(WARNFLAGS) $(ERROR_FLAGS) \\\n            -fno-gnu-keywords -fpascal-strings\n\n_DYNLIB_LOCATION    = $$(MAYA_LOCATION)/MacOS\n_LREMAP         = -Wl,-executable_path,\"$${_DYNLIB_LOCATION}\"\n\nLIBS        += -L\"$${_DYNLIB_LOCATION}\" $${_LREMAP} -lOpenMaya -lFoundation \\\n            -framework System -framework CoreServices \\\n            -framework SystemConfiguration \\\n            -framework Carbon -framework Cocoa \\\n            -framework ApplicationServices \\\n            -framework IOKit \\\n            -framework QtCore \\\n            -framework QtGui\n\nQMAKE_LFLAGS    += -stdlib=libstdc++ -fno-gnu-keywords -fpascal-strings  \\\n            -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -bundle\n\nQMAKE_LINK      = $${QMAKE_CXX}\nQMAKE_MAC_SDK   = /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk\n\nMAKEFILE = $${TARGET}.mak\n</code></pre>\n\n<p>Reading multiple articles on internet show an issue with the destructor declaration, but it seems correct.<p>Removing Q_OBJECT makes it work, but i really need signals.<p>\nNo moc file is generated upon compilation.<p>Any clue what could go wrong ?<p>Thanks </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1428526556, "post_id": 29524965, "comment_id": 47204696, "body": "<code>malloc</code>??  Why not just use <code>std::vector&lt;std::string&gt;</code>?  In addition, you have memory leaks."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1428529716, "post_id": 29524965, "comment_id": 47206275, "body": "Please see here for a solution that does not leak memory.  <a href=\"http://ideone.com/86mnLY\" rel=\"nofollow noreferrer\">ideone.com/86mnLY</a>"}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 4282263, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2de6fe4e734dbe30a6958ae87e842ca0?s=128&d=identicon&r=PG&f=1", "display_name": "crixi", "link": "https://stackoverflow.com/users/4282263/crixi"}, "edited": false, "score": 0, "creation_date": 1428526244, "post_id": 29525059, "comment_id": 47204538, "body": "Oh, sorry, I copied just the part of the code that I considered that would be relevant. I just edited my post with the entire code that of course, include the main function too."}, {"owner": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "reply_to_user": {"reputation": 139, "user_id": 4282263, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2de6fe4e734dbe30a6958ae87e842ca0?s=128&d=identicon&r=PG&f=1", "display_name": "crixi", "link": "https://stackoverflow.com/users/4282263/crixi"}, "edited": false, "score": 0, "creation_date": 1428526296, "post_id": 29525059, "comment_id": 47204566, "body": "@crixi No worries, looks like my guess was correct anyway ;)"}, {"owner": {"reputation": 139, "user_id": 4282263, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2de6fe4e734dbe30a6958ae87e842ca0?s=128&d=identicon&r=PG&f=1", "display_name": "crixi", "link": "https://stackoverflow.com/users/4282263/crixi"}, "edited": false, "score": 0, "creation_date": 1428526602, "post_id": 29525059, "comment_id": 47204718, "body": "Got it now and solved it. I hate when I spend so much time on so stupid stuffs. Thank you for your help!"}], "owner": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "is_accepted": true, "score": 1, "last_activity_date": 1428526403, "last_edit_date": 1428526403, "creation_date": 1428526080, "answer_id": 29525059, "question_id": 29524965, "link": "https://stackoverflow.com/questions/29524965/longest-word-using-a-vector/29525059#29525059", "title": "Longest word using a vector", "body": "<p>Your example nests <code>Max_Word</code> within another function, <code>_tmain</code>. The compiler is telling you that nested functions are illegal in C++. Nested functions are functions <code>f</code> whose definition is inside the definition of another function:</p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[]) {\n    void f(int x) {\n        lounge(x);\n    }\n}\n</code></pre>\n\n<p>Instead you have to put it at namespace level, or use a lambda function if you want to create closures:</p>\n\n<pre><code>void f(int x) {\n    lounge(x);\n}\n\nint _tmain(int argc, _TCHAR* argv[]) {\n    int x = getx();\n    auto g = [=]() { lounge(x); };\n}\n</code></pre>\n"}, {"owner": {"reputation": 167, "user_id": 3851308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXwta.png?s=128&g=1", "display_name": "gujralam", "link": "https://stackoverflow.com/users/3851308/gujralam"}, "is_accepted": false, "score": 1, "last_activity_date": 1428526383, "last_edit_date": 1428526383, "creation_date": 1428526125, "answer_id": 29525070, "question_id": 29524965, "link": "https://stackoverflow.com/questions/29524965/longest-word-using-a-vector/29525070#29525070", "title": "Longest word using a vector", "body": "<p>You need to move function  Max_Word out of the  _tmain() block</p>\n"}, {"owner": {"reputation": 109, "user_id": 3411246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/663d25ebf27c7aafbc81fe5e38d0bb35?s=128&d=identicon&r=PG&f=1", "display_name": "deanone", "link": "https://stackoverflow.com/users/3411246/deanone"}, "is_accepted": false, "score": 0, "last_activity_date": 1428565797, "creation_date": 1428565797, "answer_id": 29532794, "question_id": 29524965, "link": "https://stackoverflow.com/questions/29524965/longest-word-using-a-vector/29532794#29532794", "title": "Longest word using a vector", "body": "<p>First of all you have mixed C code with some C++ elements which is a bit confusing for what you wish to do (maybe you come from C background). Anyway in order to find the longest word in characters in a text file I whould suggest the following solution:</p>\n\n<pre><code>std::ifstream in(file.txt);\nstd::string dataline;\nstd::map&lt;int,std::string&gt; items;\nwhile (getline(in,dataline)){\n    std::istringstream ss(dataline);\n    std::string item;\n    while (getline(ss,item,' ')){\n        items.insert(std::make_pair(item.size(),item));\n    }\n}\nstd::string largestWord = items.rbegin()-&gt;second;\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 4282263, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2de6fe4e734dbe30a6958ae87e842ca0?s=128&d=identicon&r=PG&f=1", "display_name": "crixi", "link": "https://stackoverflow.com/users/4282263/crixi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "closed_date": 1428566078, "accepted_answer_id": 29525059, "answer_count": 3, "score": -1, "last_activity_date": 1428565797, "creation_date": 1428525743, "last_edit_date": 1428526751, "question_id": 29524965, "link": "https://stackoverflow.com/questions/29524965/longest-word-using-a-vector", "closed_reason": "Not suitable for this site", "title": "Longest word using a vector", "body": "<p>I want to display the longest word from a text file. My first idea was to use <code>vector</code> and I tried this:</p>\n\n<p>Edit: check gha.st's answer for the solution and explanation.</p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[])\n{\nvector &lt;const char*&gt; v;\n    char str[100];\n    v.clear();\n\n\n    FILE *file;\n    file = fopen(\"file.txt\", \"r\");\n    while (fgets(str, 100, file) != NULL){\n        char *s = (char*)malloc(100);\n        strcpy(s, str);\n        v.push_back(s);\n    } fclose(file);\n\n\n    char* Max_Word(vector&lt;const char*&gt; &amp;v){\n          char MaxWord[100];\n        vector&lt;const char *&gt;::iterator it;\n        for (it = v.begin(); it != v.end(); it++){\n            if (strlen(*it)&gt;strlen(MaxWord))strcpy(MaxWord, *it);\n        }\n        return MaxWord;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>But something goes wrong, and I get: <code>Error 1   error C2601: 'Max_Word' : local function definitions are illegal</code></p>\n\n<p>Can someone help me understanding this error?</p>\n"}, {"tags": ["c++", "boost", "gmp", "multiprecision"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1428527138, "post_id": 29524881, "comment_id": 47205010, "body": "also, use <code>18446744073709551615ull</code> or initialize from string <code>mpz_int seed(&quot;18446744073709551615&quot;);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 559, "user_id": 4296471, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YMVKU.jpg?s=128&g=1", "display_name": "Jonathan Basile", "link": "https://stackoverflow.com/users/4296471/jonathan-basile"}, "edited": false, "score": 0, "creation_date": 1428527385, "post_id": 29524956, "comment_id": 47205120, "body": "O I see - I was a bit confused by the documentation - if i remove the class definition i still get the following errors: main.cpp:17:17: warning: integer constant is larger than the largest signed       integer type  gmp_int seed = 18446744073709551615;                 ^ main.cpp:17:10: error: no viable conversion from &#39;unsigned long long&#39; to       &#39;boost::multiprecision::backends::gmp_int&#39;  gmp_int seed = 18446744073709551615;"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 559, "user_id": 4296471, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YMVKU.jpg?s=128&g=1", "display_name": "Jonathan Basile", "link": "https://stackoverflow.com/users/4296471/jonathan-basile"}, "edited": false, "score": 0, "creation_date": 1428527421, "post_id": 29524956, "comment_id": 47205142, "body": "@JonathanBasile I already addressed that in my comment. Also, see my answer"}], "owner": {"reputation": 10206, "user_id": 65678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tLuGV.jpg?s=128&g=1", "display_name": "gha.st", "link": "https://stackoverflow.com/users/65678/gha-st"}, "is_accepted": false, "score": 2, "last_activity_date": 1428525707, "creation_date": 1428525707, "answer_id": 29524956, "question_id": 29524881, "link": "https://stackoverflow.com/questions/29524881/problems-using-boost-multiprecision-library/29524956#29524956", "title": "Problems using boost multiprecision library", "body": "<p>You are declaring a new type <code>class gmp_int;</code>. I cannot fathom any reason why you would want to do so.</p>\n\n<p>However, this means that the next line</p>\n\n<pre><code>typedef number&lt;gmp_int &gt;         mpz_int;\n</code></pre>\n\n<p>now is unable to decide whether you mean your new type <code>::gmp_int</code>  or Boosts version <code>::boost::multiprecision::gmp_int</code>.</p>\n\n<p>Your C++ compiler is attempting to tell you that it cannot decide which <code>gmp_int</code> is meant with its message \"reference to '<code>gmp_int</code>' is ambiguous\".</p>\n"}, {"comments": [{"owner": {"reputation": 559, "user_id": 4296471, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YMVKU.jpg?s=128&g=1", "display_name": "Jonathan Basile", "link": "https://stackoverflow.com/users/4296471/jonathan-basile"}, "edited": false, "score": 0, "creation_date": 1428527606, "post_id": 29525389, "comment_id": 47205226, "body": "This is very helpful - however, I am still getting the following errors:   Undefined symbols for architecture x86_64:   &quot;___gmp_get_memory_functions&quot;, referenced from:       boost::multiprecision::backends::gmp_int::str(long, unsigned int) const in main-8ba45a.o   &quot;___gmpz_clear&quot;, referenced from:       boost::multiprecision::backends::gmp_int::~gmp_int() in main-8ba45a.o  &quot;___gmpz_get_str&quot;, referenced from:       boost::multiprecision::backends::gmp_int::str(long, unsigned int) const in main-8ba45a.o"}, {"owner": {"reputation": 559, "user_id": 4296471, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YMVKU.jpg?s=128&g=1", "display_name": "Jonathan Basile", "link": "https://stackoverflow.com/users/4296471/jonathan-basile"}, "edited": false, "score": 0, "creation_date": 1428527627, "post_id": 29525389, "comment_id": 47205235, "body": "&quot;___gmpz_init&quot;, referenced from:       boost::multiprecision::backends::gmp_int::operator=(unsigned long) in main-8ba45a.o       boost::multiprecision::backends::gmp_int::gmp_int() in main-8ba45a.o   &quot;___gmpz_set_ui&quot;, referenced from:       boost::multiprecision::backends::gmp_int::operator=(unsigned long) in main-8ba45a.o ld: symbol(s) not found for architecture x86_64 clang: error: linker command failed with exit code 1 (use -v to see invocation)"}, {"owner": {"reputation": 559, "user_id": 4296471, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YMVKU.jpg?s=128&g=1", "display_name": "Jonathan Basile", "link": "https://stackoverflow.com/users/4296471/jonathan-basile"}, "edited": false, "score": 0, "creation_date": 1428527743, "post_id": 29525389, "comment_id": 47205283, "body": "how am i spamming? im just trying to put the errors messages here because i assume they&#39;re necessary to isolate the problem"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 559, "user_id": 4296471, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YMVKU.jpg?s=128&g=1", "display_name": "Jonathan Basile", "link": "https://stackoverflow.com/users/4296471/jonathan-basile"}, "edited": false, "score": 0, "creation_date": 1428527788, "post_id": 29525389, "comment_id": 47205298, "body": "I cannot possibly make the sample more interactive. Follow the <b><a href=\"http://coliru.stacked-crooked.com/a/2b1449285dcbda71\" rel=\"nofollow noreferrer\">Live On Coliru</a></b> link and see for yourself. <a href=\"http://coliru.stacked-crooked.com/a/3888d893a658598c\" rel=\"nofollow noreferrer\">Here&#39;s a clang variant</a>. Hope that helps..."}, {"owner": {"reputation": 559, "user_id": 4296471, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YMVKU.jpg?s=128&g=1", "display_name": "Jonathan Basile", "link": "https://stackoverflow.com/users/4296471/jonathan-basile"}, "edited": false, "score": 0, "creation_date": 1428528175, "post_id": 29525389, "comment_id": 47205510, "body": "The problem I&#39;m having is that I havent been able to reproduce your results. I see that the code works on coliru but not on my machine. if you arent willing to help further that&#39;s fine but i have to let people know that im still having a problem if someone else is going to. - i notice that you&#39;re using mpfr.hpp - that&#39;s not a library i have.   And i know i havent been able to isolate the problem - that&#39;s why im asking for help"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 559, "user_id": 4296471, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YMVKU.jpg?s=128&g=1", "display_name": "Jonathan Basile", "link": "https://stackoverflow.com/users/4296471/jonathan-basile"}, "edited": false, "score": 0, "creation_date": 1428528267, "post_id": 29525389, "comment_id": 47205552, "body": "@JonathanBasile fixed that for you <b><a href=\"http://coliru.stacked-crooked.com/a/22fc10f93d9d6611\" rel=\"nofollow noreferrer\">gmp only, clang</a></b>. It&#39;s a force of habit to include mpfr I guess :/"}, {"owner": {"reputation": 559, "user_id": 4296471, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YMVKU.jpg?s=128&g=1", "display_name": "Jonathan Basile", "link": "https://stackoverflow.com/users/4296471/jonathan-basile"}, "edited": false, "score": 0, "creation_date": 1428528594, "post_id": 29525389, "comment_id": 47205734, "body": "When I try to use the gmp library I get the &quot;Undefined symbols for architecture x86_64:&quot; message - does that mean I have 32-bit boost?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 559, "user_id": 4296471, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YMVKU.jpg?s=128&g=1", "display_name": "Jonathan Basile", "link": "https://stackoverflow.com/users/4296471/jonathan-basile"}, "edited": false, "score": 3, "creation_date": 1428528768, "post_id": 29525389, "comment_id": 47205818, "body": "@JonathanBasile I really don&#39;t know. It could be you&#39;re not linking <code>-lgmp</code> (in the right order!!!) or indeed your <code>gmp</code> is not 64 bit. (Boost is header only here, so that doesn&#39;t matter). If you don&#39;t work it out, post a new question about the linker error and tag it <a href=\"https://stackoverflow.com/questions/tagged/boost\">boost</a> <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> <a href=\"https://stackoverflow.com/questions/tagged/osx\">osx</a> <a href=\"https://stackoverflow.com/questions/tagged/clang%2b%2b\">clang++</a>"}, {"owner": {"reputation": 559, "user_id": 4296471, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YMVKU.jpg?s=128&g=1", "display_name": "Jonathan Basile", "link": "https://stackoverflow.com/users/4296471/jonathan-basile"}, "edited": false, "score": 0, "creation_date": 1428528850, "post_id": 29525389, "comment_id": 47205855, "body": "I didn&#39;t flag you - someone else did - so evidently I&#39;m not the only person who finds your attitude unnecessary - and the point im making in comments is that beyond the three issues you addressed in your answer (which was very helpful) i am now having another issue which has emerged since making the changes you suggested. again, if you dont want to help with this further problem, im just mentioning it in the hopes that someone else will."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 559, "user_id": 4296471, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YMVKU.jpg?s=128&g=1", "display_name": "Jonathan Basile", "link": "https://stackoverflow.com/users/4296471/jonathan-basile"}, "edited": false, "score": 0, "creation_date": 1428529162, "post_id": 29525389, "comment_id": 47205990, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/74761/discussion-between-sehe-and-jonathan-basile\">continue this discussion in chat</a>."}], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1428527306, "creation_date": 1428527306, "answer_id": 29525389, "question_id": 29524881, "link": "https://stackoverflow.com/questions/29524881/problems-using-boost-multiprecision-library/29525389#29525389", "title": "Problems using boost multiprecision library", "body": "<p>It looks like you copied the wrong bits from the documentation: <a href=\"http://www.boost.org/doc/libs/1_57_0/libs/multiprecision/doc/html/boost_multiprecision/tut/ints/gmp_int.html\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_57_0/libs/multiprecision/doc/html/boost_multiprecision/tut/ints/gmp_int.html</a></p>\n\n<p>What's shown is a <em>reference summary</em>, not a <em>usage synopsis</em>. The types shown <strong>already</strong> exist.</p>\n\n<p>A clear case of less is more:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/2b1449285dcbda71\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/multiprecision/mpfr.hpp&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    boost::multiprecision::mpz_int seed = 18446744073709551615ull;\n    std::cout &lt;&lt; seed;\n}\n</code></pre>\n"}], "owner": {"reputation": 559, "user_id": 4296471, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YMVKU.jpg?s=128&g=1", "display_name": "Jonathan Basile", "link": "https://stackoverflow.com/users/4296471/jonathan-basile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2306, "favorite_count": 0, "accepted_answer_id": 29525389, "answer_count": 2, "score": 2, "last_activity_date": 1428528173, "creation_date": 1428525436, "last_edit_date": 1428528173, "question_id": 29524881, "link": "https://stackoverflow.com/questions/29524881/problems-using-boost-multiprecision-library", "title": "Problems using boost multiprecision library", "body": "<p>I am trying to write a base conversion program that will work for numbers beyond the limits of C++'s long long integers. I am trying to use boost multiprecision libraries but have not made it very far.</p>\n\n<p>I have tried to compile the following:</p>\n\n<pre><code>#include &lt;boost/multiprecision/gmp.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;stdio.h&gt;\n\nnamespace boost{ namespace multiprecision{\n\nclass gmp_int;\n\ntypedef number&lt;gmp_int &gt;         mpz_int;\n\n}} // namespaces\n using namespace boost::multiprecision;\nint main(int argc, const char * argv[]) {\nmpz_int seed = 18446744073709551615;\n\n std::cout &lt;&lt; seed;\n  return 0;\n}\n</code></pre>\n\n<p>and received the following errors:</p>\n\n<pre><code>    main.cpp:17:20: error: reference to 'gmp_int' is ambiguous\ntypedef number&lt;gmp_int &gt;         mpz_int;\n               ^\n\n\nmain.cpp:15:11: note: candidate found by name lookup is\n  'boost::multiprecision::gmp_int'\nclass gmp_int;\n      ^\n\n/usr/local/boost_1_57_0/boost/multiprecision/gmp.hpp:2157:40: note:      candidate\n  found by name lookup is 'boost::multiprecision::gmp_int'\nusing boost::multiprecision::backends::gmp_int;\n                                   ^\n\nmain.cpp:17:20: error: reference to 'gmp_int' is ambiguous\ntypedef number&lt;gmp_int &gt;         mpz_int;\n               ^\n\nmain.cpp:15:11: note: candidate found by name lookup is\n  'boost::multiprecision::gmp_int'\nclass gmp_int;\n      ^\n\n /usr/local/boost_1_57_0/boost/multiprecision/gmp.hpp:2157:40: note: candidate\n  found by name lookup is 'boost::multiprecision::gmp_int'\nusing boost::multiprecision::backends::gmp_int;\n                                   ^\n\nmain.cpp:17:38: error: typedef redefinition with different types ('number&lt;class\n  boost::multiprecision::gmp_int&gt;' vs 'number&lt;struct\n  boost::multiprecision::backends::gmp_int&gt;')\ntypedef number&lt;gmp_int &gt;         mpz_int;\n                                 ^\n\n/usr/local/boost_1_57_0/boost/multiprecision/gmp.hpp:2214:34: note: previous\n  definition is here\ntypedef number&lt;gmp_int &gt;         mpz_int;\n                             ^\n\nmain.cpp:22:2: error: reference to 'gmp_int' is ambiguous\n gmp_int seed = 18446744073709551615;\n ^\n\n/usr/local/boost_1_57_0/boost/multiprecision/gmp.hpp:2157:40: note: candidate\n  found by name lookup is 'boost::multiprecision::gmp_int'\nusing boost::multiprecision::backends::gmp_int;\n                                   ^\n\nmain.cpp:15:11: note: candidate found by name lookup is\n    'boost::multiprecision::gmp_int'\nclass gmp_int;\n      ^\n</code></pre>\n\n<p>main.cpp:32:18: error: use of undeclared identifier 'seed'\n    std::cout &lt;&lt; seed;\n                 ^\n     5 errors generated.</p>\n\n<p>I know I must be making some pretty basic mistakes but I haven't had any success in fixing them. any help would be appreciated.</p>\n\n<p>I got a simple program to work using <code>#include &lt;boost/lambda/lambda.hpp&gt;</code>, so I am fairly certain that boost is installed correctly.</p>\n"}, {"tags": ["c++", "mysql"], "comments": [{"owner": {"reputation": 7031, "user_id": 28855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8a62c5134a4ff7b618582d8dd267d2b5?s=128&d=identicon&r=PG", "display_name": "Jaime Soriano", "link": "https://stackoverflow.com/users/28855/jaime-soriano"}, "edited": false, "score": 0, "creation_date": 1428525573, "post_id": 29524839, "comment_id": 47204162, "body": "Could you be more specific with the client library you&#39;re using? Or even better, provide some code of your application?"}], "answers": [{"owner": {"reputation": 5161, "user_id": 3065406, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6697e5c2ff5cfdf8f196fe42a309598?s=128&d=identicon&r=PG", "display_name": "deW1", "link": "https://stackoverflow.com/users/3065406/dew1"}, "is_accepted": false, "score": 0, "last_activity_date": 1428525979, "last_edit_date": 1592644375, "creation_date": 1428525979, "answer_id": 29525038, "question_id": 29524839, "link": "https://stackoverflow.com/questions/29524839/why-do-i-keep-getting-mysql-client-out-of-memory-error-after-a-certain-period-of/29525038#29525038", "title": "Why do I keep getting MySQL Client Out of Memory error after a certain period of time...?", "body": "<p>This is probably related to the queries you're using.\nIndexing can help as well as limiting the results returned from these queries.\nI'm guessing you're loading a certain amount of data using <code>SELECT</code> commands and the returned values need to be stored somewhere, which is the memory.</p>\n<p><a href=\"http://dev.mysql.com/doc/refman/5.7/en/out-of-memory.html\" rel=\"nofollow noreferrer\">http://dev.mysql.com/doc/refman/5.7/en/out-of-memory.html</a></p>\n<p>This link offers some possible solutions.</p>\n<blockquote>\n<p>To remedy the problem, first check whether your query is correct. Is it reasonable that it should return so many rows? If not, correct the query and try again. Otherwise, you can invoke mysql with the --quick option. This causes it to use the mysql_use_result() C API function to retrieve the result set, which places less of a load on the client (but more on the server).</p>\n</blockquote>\n<hr />\n<p>Also if you have enough RAM you could try to increase the memory limit in the config file.</p>\n<p>To be more specific this is what you want to adjust:</p>\n<p><code>InnoDB</code> Settings</p>\n<blockquote>\n<p>innodb_buffer_pool_size - Defaults to 128M. This is the main setting you want to change, since it sets how much memory InnoDB will use for data+indexes loaded into memory. For a dedicated MySQL server, the recommended size is 50-80% of installed memory. So for example, a server with 64G of RAM should have around a 50G buffer pool.</p>\n<p>The danger of setting this value too high is that there will be no memory left for the operating system and some MySQL-subsystems that rely on filesystem cache such as binary logs, and InnoDB's transaction logs.</p>\n</blockquote>\n<p>Taken from:</p>\n<p><a href=\"http://www.tocker.ca/2013/09/17/what-to-tune-in-mysql-56-after-installation.html\" rel=\"nofollow noreferrer\">http://www.tocker.ca/2013/09/17/what-to-tune-in-mysql-56-after-installation.html</a></p>\n<hr />\n<p>Another possibility is that something in the c++ code is not allocating the memory and after it's done deallocating the memory properly.</p>\n"}, {"owner": {"reputation": 2886, "user_id": 12897, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6b592fca6012883dcf8d57ca9f6542ca?s=128&d=identicon&r=PG", "display_name": "CindyH", "link": "https://stackoverflow.com/users/12897/cindyh"}, "is_accepted": false, "score": 0, "last_activity_date": 1428542917, "creation_date": 1428542917, "answer_id": 29528193, "question_id": 29524839, "link": "https://stackoverflow.com/questions/29524839/why-do-i-keep-getting-mysql-client-out-of-memory-error-after-a-certain-period-of/29528193#29528193", "title": "Why do I keep getting MySQL Client Out of Memory error after a certain period of time...?", "body": "<p>Another thing that could be leaking is connections.  Database connections are very expensive, and hang around.  I googled \"mysql connection pooling\".  If you're using Connector/J, you could look at <a href=\"http://dev.mysql.com/doc/connector-j/en/connector-j-usagenotes-j2ee-concepts-connection-pooling.html\" rel=\"nofollow\">http://dev.mysql.com/doc/connector-j/en/connector-j-usagenotes-j2ee-concepts-connection-pooling.html</a>, and if you're using connector/net you could try <a href=\"http://dev.mysql.com/doc/connector-net/en/connector-net-programming-connection-pooling.html\" rel=\"nofollow\">http://dev.mysql.com/doc/connector-net/en/connector-net-programming-connection-pooling.html</a>.  </p>\n"}], "owner": {"reputation": 663, "user_id": 2195567, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/33159b8791121aae132909022eef3954?s=128&d=identicon&r=PG", "display_name": "Ricky", "link": "https://stackoverflow.com/users/2195567/ricky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 944, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1428542917, "creation_date": 1428525260, "question_id": 29524839, "link": "https://stackoverflow.com/questions/29524839/why-do-i-keep-getting-mysql-client-out-of-memory-error-after-a-certain-period-of", "title": "Why do I keep getting MySQL Client Out of Memory error after a certain period of time...?", "body": "<p>I'm developing a server application that preforms various (probably hundreds to thousands) of MySQL Queries a day (SELECTS, INSERTS, &amp; UPDATES). </p>\n\n<p>The querying works great, until....</p>\n\n<p>For some reason after the Server has been up for roughly 1 to 2 days it generates a MySQL Error any time I try to preform any MySQL Query from the Server... The Server was developed using C++.</p>\n\n<p>The error says that The MySQL Client has run out of memory.</p>\n\n<p>I'm Using\nMySQL Community Server 5.6.24</p>\n\n<p>Is there some kind of hidden cache of data stored in memory that I don't know about that gets occupied anytime a MySQL Query gets executed....? That's the only thing I can think of.</p>\n"}, {"tags": ["c++", "pointers", "casting"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1428525263, "post_id": 29524782, "comment_id": 47204001, "body": "That&#39;s some pretty obfuscated code. I don&#39;t blame you for being confused.  Particularly casting <code>char * *</code> to <code>void *</code>."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 3, "creation_date": 1428525489, "post_id": 29524782, "comment_id": 47204120, "body": "I don&#39;t really see the point of this example. Trying to teach a concept by obfuscation seems like a poor strategy."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 0, "creation_date": 1428525670, "post_id": 29524782, "comment_id": 47204216, "body": "Where exactly is that conversion of char** to char* you are talking about?"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1428525807, "post_id": 29524782, "comment_id": 47204292, "body": "@RawN <code>char *notes[]</code> decays to <code>char**</code>, cast to <code>void *base</code>, cast to <code>(char*)</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1428525889, "post_id": 29524782, "comment_id": 47204332, "body": "@DrewDormann Right you are. Hard to go through that code."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 3, "creation_date": 1428525891, "post_id": 29524782, "comment_id": 47204335, "body": "this code is pure evil, waiting in the shadows to bite you. Hint: the line <code>(char*)base + 3 * sizeof(char*)</code> can also be written like <code>(char**) base + 3</code> (the latter makes a bit more sense). The former, however, treats <code>base</code> as a pointer-to-char (it just holds an address), so it needs to add <code>3 * sizeof(char*)</code> instead of just adding 3 to get the address of the last C-style string in the array"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 2, "creation_date": 1428525957, "post_id": 29524782, "comment_id": 47204372, "body": "It might help if you draw a memory diagram. Keep track of where things point and remember that the number of bytes pointer addition advances by depends on the type of the pointer."}, {"owner": {"reputation": 757, "user_id": 4633354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7c290c24f88566771b594bb7c18c0b71?s=128&d=identicon&r=PG&f=1", "display_name": "metis", "link": "https://stackoverflow.com/users/4633354/metis"}, "edited": false, "score": 0, "creation_date": 1428526121, "post_id": 29524782, "comment_id": 47204461, "body": "void pointer &quot;base&quot; holds the adress fo pointer of type char <b>. Below this line, in the line i commented as &quot; (char*) base // i didn&#39;t understand this line??? &quot;, i thought that this conversion occurs. Because, void pointer is converted to char*, since this void pointer holds the address of a char</b>, then i thought that this conversion is actually from char** to  char *"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1428526248, "post_id": 29524782, "comment_id": 47204540, "body": "@metis, Once you have a <code>void*</code>, the initial type is lost unless you have it elsewhere. This is a form of type-erasure. The conversion at that point is from <code>void*</code> to <code>char*</code>."}], "answers": [{"owner": {"reputation": 386, "user_id": 2850884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ypzTS.png?s=128&g=1", "display_name": "kamshi", "link": "https://stackoverflow.com/users/2850884/kamshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1428526194, "creation_date": 1428526194, "answer_id": 29525089, "question_id": 29524782, "link": "https://stackoverflow.com/questions/29524782/pointers-conversion-of-char-to-char/29525089#29525089", "title": "pointers, conversion of char ** to char *", "body": "<p>The third line says:\n\"Convert base to a char pointer, and add 3 times the size of an char pointer to the result. Then, implicitly cast the result to a void pointer and store it in elemAddr\"</p>\n\n<p>In the end, elemAddr points to the address of \"mariadb\". The cast to (char*) isn't necessary to do the pointer arithmetic, but it prevents the compiler from printing a warning. It is equivalent to</p>\n\n<pre><code>&amp;notes[3]\n</code></pre>\n\n<p>The fourth line tells the compiler to interpret the pointer as an pointer to char pointers. This pointer is then dereferenced so that the data pointed to by elemAddr is treated as an char pointer, which will be interpreted by std::cout as a C-string.</p>\n\n<p>I don't know where you got this example from, but this type of programming is a honey pot for really horrible bugs and hard to debug code.</p>\n"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 5, "last_activity_date": 1428526292, "last_edit_date": 1428526292, "creation_date": 1428526201, "answer_id": 29525091, "question_id": 29524782, "link": "https://stackoverflow.com/questions/29524782/pointers-conversion-of-char-to-char/29525091#29525091", "title": "pointers, conversion of char ** to char *", "body": "<p>These lines:</p>\n\n<pre><code>char *notes[] = {\"cpp\",\"python\",\"java\",\"mariadb\"};\nvoid * base = notes; \nvoid * elemAddr = (char*) base + 3* sizeof(char *);\ncout &lt;&lt; *(char **)elemAddr;\n</code></pre>\n\n<p>are an obfuscated equivalent of:</p>\n\n<pre><code>char *notes[] = {\"cpp\",\"python\",\"java\",\"mariadb\"};\ncout &lt;&lt; notes[3];\n</code></pre>\n\n<p><strong>Explanation:</strong></p>\n\n<pre><code>void * base = notes; \nvoid * elemAddr = (char*) base + 3* sizeof(char *);\n</code></pre>\n\n<p>is the same as:</p>\n\n<pre><code>char * base = (char*)notes; \nchar * elemAddr = base + 3 * sizeof(char *);\n</code></pre>\n\n<p>Since pointers are usually of the same size, those lines are kind of the same as:</p>\n\n<pre><code>char ** base = notes; \nchar ** elemAddr = base + 3;\n</code></pre>\n\n<p>which makes <code>elemAddr == &amp;notes[3]</code>. That leads to the line</p>\n\n<pre><code>cout &lt;&lt; *(char **)elemAddr;\n</code></pre>\n\n<p>to be the same as</p>\n\n<pre><code>cout &lt;&lt; notes[3];\n</code></pre>\n"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 2, "last_activity_date": 1428526266, "creation_date": 1428526266, "answer_id": 29525110, "question_id": 29524782, "link": "https://stackoverflow.com/questions/29524782/pointers-conversion-of-char-to-char/29525110#29525110", "title": "pointers, conversion of char ** to char *", "body": "<p>Ok, I'll bite:</p>\n\n<pre><code>char *notes[] = {\"cpp\",\"python\",\"java\",\"mariadb\"};\n</code></pre>\n\n<p>Declares an array of pointers to <code>char *</code>. (should actually be <code>const char *notes[]</code> since we can't modify the content ever)</p>\n\n<pre><code>void * base = notes; // notes and base, holds the address of note's first element\n</code></pre>\n\n<p>So assigns the address of the array <code>notes</code> to <code>base</code>, and losing any type information in the process.</p>\n\n<pre><code>void * elemAddr = (char*) base + 3* sizeof(char *); // i didn't understand this line???\n</code></pre>\n\n<p>Cast <code>base</code> to <code>char *</code>, meaning each element is now <code>sizeof(char) == 1</code>. Add <code>3 * sizeof(char *)</code> to that pointer -> 3 elements into the <code>notes</code> array, and assign it back to <code>elemAddr</code>. </p>\n\n<pre><code>cout &lt;&lt; *(char **)elemAddr;   // and this line\n</code></pre>\n\n<p>Since <code>elemAddr</code> is pointing to an element in <code>notes</code>, which is a <code>char*</code>, it really is a pointer to a pointer to <code>char</code>, and we want to print what it point to, hence the <code>*</code> at the very beginning.</p>\n\n<p>It is not very readable, and it would be MUCH simpler to write</p>\n\n<pre><code>const char* notes[] =  { ... };\ncout &lt;&lt; notes[3];\n</code></pre>\n\n<p>but then you wouldn't have posted here... </p>\n"}, {"comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1428526741, "post_id": 29525157, "comment_id": 47204791, "body": "The first line creates an array of pointers (meant to be interpreted as strings). There&#39;s no second level of pointer there."}], "owner": {"reputation": 1551, "user_id": 4727360, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/641b8a5386aa6c8c271b382292cf5b98?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4727360/ian"}, "is_accepted": false, "score": 0, "last_activity_date": 1428526440, "creation_date": 1428526440, "answer_id": 29525157, "question_id": 29524782, "link": "https://stackoverflow.com/questions/29524782/pointers-conversion-of-char-to-char/29525157#29525157", "title": "pointers, conversion of char ** to char *", "body": "<p>Let's go line by line:\n1st Line: We create a pointer to an array of strings... this is a pointer to the base address of an array... of pointers.</p>\n\n<p>2nd line: We make our char* into a void*, this this doesn't change the value of the pointer at all, just the type associated with it by the compiler.</p>\n\n<p>3rd line: When we operate on the base pointer, we cast it to a char* essentially undoing what we did on line 2.  We add 3 * the sizeof( char*) to our pointer.  This makes the pointer that was pointing to the base of our array of pointers, now point to the 4th pointer in our array.</p>\n\n<p>4th line: now we double deference our pointer, what is our pointer pointing to?  The third element in an array of pointers.  What is that pointer pointing to?  The string created back on line one.</p>\n"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 2, "last_activity_date": 1428526495, "creation_date": 1428526495, "answer_id": 29525171, "question_id": 29524782, "link": "https://stackoverflow.com/questions/29524782/pointers-conversion-of-char-to-char/29525171#29525171", "title": "pointers, conversion of char ** to char *", "body": "<p>Apparently the example code is meant to illustrate what goes on under the hood when you use array indexing.</p>\n\n<p>Repeating the code (as it was when I wrote this):</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n\n    char *notes[] = {\"cpp\",\"python\",\"java\",\"mariadb\"};\n    void * base = notes; // notes and base, holds the address of note's first element\n    void * elemAddr = (char*) base + 3* sizeof(char *); // i didn't understand this line???\n    cout &lt;&lt; *(char **)elemAddr;   // and this line\n\n    return 0;\n}\n</code></pre>\n\n<p>First, the declaration</p>\n\n<pre><code>char *notes[] = {\"cpp\",\"python\",\"java\",\"mariadb\"};\n</code></pre>\n\n<p>declares an array of pointers to <code>char</code>. Each pointer is initialized with a string literal. This language feature was deprecated in the original C++ standard, C++98, and was finally removed in C++11, so that with modern C++ (as of this writing C++14) it's just <strong>invalid</strong> code, code that will not compile with a conforming compiler.</p>\n\n<p>In standard C++ it could be</p>\n\n<pre><code>char const *notes[] = {\"cpp\",\"python\",\"java\",\"mariadb\"};\n</code></pre>\n\n<p>But let's ignore the <code>const</code> issue, and assume C++03 or C++98.</p>\n\n<p>Then the declaration</p>\n\n<pre><code>void * base = notes;\n</code></pre>\n\n<p>declares a <code>void*</code> pointer called <code>base</code>, initialized to the address of the first item of the array <code>notes</code>. This works via array expression <strong>decay</strong>, where an expression referring to an array produces a pointer to its first item.</p>\n\n<p>The declaration</p>\n\n<pre><code>void * elemAddr = (char*) base + 3* sizeof(char *); \n</code></pre>\n\n<p>is evidently intended to illustrate what's going on behind the scenes for the <code>[3]</code> indexing in</p>\n\n<pre><code>auto p = &amp; notes[3];\n</code></pre>\n\n<p>This works via byte oriented address arithmetic (<code>char</code> and its variants is the C++ notion of smallest addressable unit, a.k.a. byte). Starting with the base address of the array, one adds 3 times the size of each item. This lands you on the start of the 3'rd item.</p>\n\n<p>Finally, the expression</p>\n\n<pre><code>*(char **)elemAddr\n</code></pre>\n\n<p>uses that item. It's just ugly due to using low level types. But essentially, the item is a <code>char*</code> and so the address of the item is casted to <code>char**</code>, and then that pointer is dereferenced, yielding the <code>char*</code> pointer itself, which is the result of the expression (and passed to <code>cout</code>).</p>\n"}], "owner": {"reputation": 757, "user_id": 4633354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7c290c24f88566771b594bb7c18c0b71?s=128&d=identicon&r=PG&f=1", "display_name": "metis", "link": "https://stackoverflow.com/users/4633354/metis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 1, "accepted_answer_id": 29525110, "answer_count": 5, "score": 4, "last_activity_date": 1429759013, "creation_date": 1428525062, "last_edit_date": 1429759013, "question_id": 29524782, "link": "https://stackoverflow.com/questions/29524782/pointers-conversion-of-char-to-char", "title": "pointers, conversion of char ** to char *", "body": "<p>I am studying pointers, but I have been stumped by the example program below. It is supposed to be doing a conversion of <code>char**</code> to <code>char*</code>, but I don't understand the logic behind the program. What is the program doing?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n\n    char *notes[] = {\"cpp\",\"python\",\"java\",\"mariadb\"};\n    void * base = notes; // notes and base, holds the address of note's first element\n    void * elemAddr = (char*) base + 3* sizeof(char *); // i didn't understand this line???\n    cout &lt;&lt; *(char **)elemAddr;   // and this line\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "floating-point", "32-bit", "ieee-754", "ofstream"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1428525451, "post_id": 29524776, "comment_id": 47204097, "body": "Why did you actually expect <code>&quot;0x3D,0xCC,0xCC,0xCD&quot;</code>? There&#39;s a numerous reasons, why you can&#39;t rely on this. You know everything about <a href=\"http://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\"><i>endianess</i></a>, don&#39;t you?"}, {"owner": {"reputation": 13, "user_id": 4765918, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Tt_NN7goxs4/AAAAAAAAAAI/AAAAAAAAArw/X_2UU9lo9g0/photo.jpg?sz=128", "display_name": "Renan Muniz", "link": "https://stackoverflow.com/users/4765918/renan-muniz"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1428525456, "post_id": 29524776, "comment_id": 47204101, "body": "i&#39;m changing the main code in actionscript3 to C++, and don&#39;t want to drop compatibility: <a href=\"http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/ByteArray.html#writeFloat\" rel=\"nofollow noreferrer\">help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 13, "user_id": 4765918, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Tt_NN7goxs4/AAAAAAAAAAI/AAAAAAAAArw/X_2UU9lo9g0/photo.jpg?sz=128", "display_name": "Renan Muniz", "link": "https://stackoverflow.com/users/4765918/renan-muniz"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1428525710, "post_id": 29524776, "comment_id": 47204235, "body": "how can i set the endian of ofstream in c++?"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1428529732, "post_id": 29524776, "comment_id": 47206283, "body": "The question on how to set the endianess of a stream doesn&#39;t make any sense at all. Also, whenever you write data to a file you&#39;ll be best off to abstract the operation so you know the format of the data (and, yes, that makes sense even if the transformation happens to be the identity on some systems; obviously in your case it isn&#39;t because you need to encode the data to use the appropriate endianess)."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1428532191, "post_id": 29524776, "comment_id": 47207336, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 the question doesn&#39;t need improvement, it&#39;s perfectly well stated. You&#39;re the one who asked for justification for the question."}, {"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1428538176, "post_id": 29524776, "comment_id": 47209167, "body": "@RenanMuniz The &quot;endianness of the stream&quot; doesn&#39;t make much sense in this context. You&#39;re writing the bytes out in precisely the order they are stored in memory, the byte order in your output will depend on the endianness of floats on the underlying platform. It doesn&#39;t actually <i>matter</i> what order they are written to the output <i>as long as that order is consistent in the output between all platforms</i>. Otherwise you&#39;ll have trouble transferring saved data files between platforms. Reinterpreting to a 32-bit unsigned int and using <code>htonl</code> and <code>ntohl</code> is an easy way to guarantee order in output."}], "answers": [{"comments": [{"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1428537948, "post_id": 29526533, "comment_id": 47209118, "body": "Exactly what I was going to suggest when this popped up in the queue. This will guarantee the same byte order in the stored data regardless of the platform&#39;s local ordering, as long as the float can fit in 32 bits (as in the OP&#39;s case). Note the inverse is <code>ntohl</code>, when reading."}], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": true, "score": 1, "last_activity_date": 1428532536, "creation_date": 1428532536, "answer_id": 29526533, "question_id": 29524776, "link": "https://stackoverflow.com/questions/29524776/c-ofstream-float-encode/29526533#29526533", "title": "C++ ofstream float encode", "body": "<p>If you can convert the <code>float</code> to a <code>uint32_t</code>, you can use <a href=\"http://linux.die.net/man/3/htonl\" rel=\"nofollow\"><code>htonl</code></a> to get \"network\" byte order which is big-endian.</p>\n"}], "owner": {"reputation": 13, "user_id": 4765918, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Tt_NN7goxs4/AAAAAAAAAAI/AAAAAAAAArw/X_2UU9lo9g0/photo.jpg?sz=128", "display_name": "Renan Muniz", "link": "https://stackoverflow.com/users/4765918/renan-muniz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 29526533, "answer_count": 1, "score": 0, "last_activity_date": 1428532536, "creation_date": 1428525041, "question_id": 29524776, "link": "https://stackoverflow.com/questions/29524776/c-ofstream-float-encode", "title": "C++ ofstream float encode", "body": "<p>does anyone knows how to write an IEEE 754 single-precision (32-bit) floating-point number to an ofstream?</p>\n\n<p>i'm using:</p>\n\n<pre><code>float VERSION = 0.1;\nofstream header;\nheader.open(\"a4.pbf\",ios::binary);\nheader.write(reinterpret_cast&lt;const char*&gt;(&amp;VERSION), sizeof(float));\nheader.close();\n</code></pre>\n\n<ul>\n<li>the result value:   \"0xCD,0xCC,0xCC,0x3D\" </li>\n<li>the value expected: \"0x3D,0xCC,0xCC,0xCD\"</li>\n</ul>\n\n<p>thanks.</p>\n"}, {"tags": ["c++", "boost", "cmake"], "answers": [{"comments": [{"owner": {"reputation": 4789, "user_id": 1735836, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ee6KW.png?s=128&g=1", "display_name": "Patricia", "link": "https://stackoverflow.com/users/1735836/patricia"}, "edited": false, "score": 0, "creation_date": 1428590652, "post_id": 29538026, "comment_id": 47235099, "body": "I did install boost myself with a little help from a coworker.  Yes, boost was compiled for arm.  Is that the issue?  How must I compile it in order to get it to work in my VM?"}, {"owner": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "reply_to_user": {"reputation": 4789, "user_id": 1735836, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ee6KW.png?s=128&g=1", "display_name": "Patricia", "link": "https://stackoverflow.com/users/1735836/patricia"}, "edited": false, "score": 0, "creation_date": 1428596737, "post_id": 29538026, "comment_id": 47239518, "body": "If you mean to compile for arm then you need to indicate so in your CMakeLists.txt file. You can find documentation at <a href=\"http://www.cmake.org/cmake/help/v3.0/manual/cmake-toolchains.7.html\" rel=\"nofollow noreferrer\">cmake.org/cmake/help/v3.0/manual/cmake-toolchains.7.html</a>. If not then you can install boost using apt-get."}, {"owner": {"reputation": 4789, "user_id": 1735836, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ee6KW.png?s=128&g=1", "display_name": "Patricia", "link": "https://stackoverflow.com/users/1735836/patricia"}, "edited": false, "score": 0, "creation_date": 1428605888, "post_id": 29538026, "comment_id": 47244949, "body": "As I said, I&#39;m new to CMake and Boost and C++, for that matter.  You were absolutely correct.  All I needed to do is to remove the set (Boost_LIBRARY_DIR /usr/local/arm/lib) line.  That made it work!  :-)"}, {"owner": {"reputation": 4789, "user_id": 1735836, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ee6KW.png?s=128&g=1", "display_name": "Patricia", "link": "https://stackoverflow.com/users/1735836/patricia"}, "edited": false, "score": 0, "creation_date": 1428968431, "post_id": 29538026, "comment_id": 47378640, "body": "I have a new question if you&#39;d like to try to help.  It&#39;s here:  <a href=\"http://stackoverflow.com/q/29616807/1735836\">stackoverflow.com/q/29616807/1735836</a>"}, {"owner": {"reputation": 4789, "user_id": 1735836, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ee6KW.png?s=128&g=1", "display_name": "Patricia", "link": "https://stackoverflow.com/users/1735836/patricia"}, "edited": false, "score": 0, "creation_date": 1429051171, "post_id": 29538026, "comment_id": 47419325, "body": "Alain - I&#39;m having some linking issues.  The question is here:  <a href=\"http://stackoverflow.com/q/29638539/1735836\">stackoverflow.com/q/29638539/1735836</a>  If you&#39;re interested!!  :-)"}], "owner": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "is_accepted": true, "score": 1, "last_activity_date": 1428581086, "creation_date": 1428581086, "answer_id": 29538026, "question_id": 29524557, "link": "https://stackoverflow.com/questions/29524557/cmake-boost-libboost-filesystem-so-error-adding-symbols-file-in-wrong-format/29538026#29538026", "title": "CMake Boost libboost_filesystem.so error adding symbols: File in wrong format", "body": "<p>Boost_LIBRARIES is configured when you call find_package(Boost 1.54 ....) </p>\n\n<p>The line</p>\n\n<p>set (Boost_LIBRARY_DIR /usr/local/arm/lib)</p>\n\n<p>has no impact in your code.</p>\n\n<p>The mac still uses the intel processor, AFAIK, and so would your Ubuntu VM. From the location of your boost libraries it looks like boost was compiled for arm. Do you have other boost libraries installed on your system? Did you install boost yourself?</p>\n\n<p>a</p>\n"}], "owner": {"reputation": 4789, "user_id": 1735836, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ee6KW.png?s=128&g=1", "display_name": "Patricia", "link": "https://stackoverflow.com/users/1735836/patricia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2146, "favorite_count": 0, "accepted_answer_id": 29538026, "answer_count": 1, "score": 0, "last_activity_date": 1428605759, "creation_date": 1428524321, "last_edit_date": 1428605759, "question_id": 29524557, "link": "https://stackoverflow.com/questions/29524557/cmake-boost-libboost-filesystem-so-error-adding-symbols-file-in-wrong-format", "title": "CMake Boost libboost_filesystem.so error adding symbols: File in wrong format", "body": "<p>I'm new to CMake and to Boost!</p>\n\n<p>I'm on a mac, so I can't test Boost code on my machine.  I have a VM with Ubuntu.  I am using JetBrains CLion IDE, which uses CMake to build.  I've been unsuccessful with every tutorial I have tried.  So, I just decided to make a project that does nothing.  I've added the Boost information to the CMakeLists.txt file:</p>\n\n<p><img src=\"https://i.stack.imgur.com/Ksql8.png\" alt=\"enter image description here\"></p>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>Since I really didn't understand the CMakeLists.txt configuration, I learned that I was using one wrong configuration and needed to just remove the set(Boost_LIBRARY_DIR /usr/local/arm/lib) command.  Here is a new image of the CORRECT CMakeLists.txt file.</p>\n\n<h2><img src=\"https://i.stack.imgur.com/5T25X.png\" alt=\"enter image description here\"></h2>\n\n<p>I can't find where Boost_LIBRARIES is getting configured, which might have something to do with my problem.  You can see main does nothing but print out \"Hello, World!\"</p>\n\n<p><img src=\"https://i.stack.imgur.com/MtQ12.png\" alt=\"enter image description here\"></p>\n\n<p>Here is the error I get when I try to build:</p>\n\n<p><img src=\"https://i.stack.imgur.com/LOKoz.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c++"], "answers": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1428524511, "creation_date": 1428524511, "answer_id": 29524616, "question_id": 29524504, "link": "https://stackoverflow.com/questions/29524504/c-matrix-class-different-dimensions/29524616#29524616", "title": "c++ matrix class different dimensions", "body": "<p>You need three parameters:</p>\n\n<pre><code>template &lt;int rows, int cols, int cols2&gt;\nMatrix&lt;rows,cols2&gt; operator*(Matrix&lt;rows,cols&gt;&amp; a, Matrix&lt;cols,cols2&gt;&amp; b){...}\n</code></pre>\n"}, {"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "is_accepted": true, "score": 5, "last_activity_date": 1428617124, "last_edit_date": 1428617124, "creation_date": 1428524514, "answer_id": 29524617, "question_id": 29524504, "link": "https://stackoverflow.com/questions/29524504/c-matrix-class-different-dimensions/29524617#29524617", "title": "c++ matrix class different dimensions", "body": "<p>I think you need a third template argument:</p>\n\n<pre><code>template &lt;int N, int M, int P&gt;\nMatrix&lt;N,P&gt; operator*(Matrix&lt;N,M&gt;&amp; a, Matrix&lt;M,P&gt;&amp; b)\n{\n    ...\n}\n</code></pre>\n\n<p>see <a href=\"http://en.wikipedia.org/wiki/Matrix_multiplication\" rel=\"nofollow noreferrer\">http://en.wikipedia.org/wiki/Matrix_multiplication</a></p>\n"}], "owner": {"reputation": 47, "user_id": 3684545, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/05ce077aee2bb3a22cf3d9ff2ff7cee3?s=128&d=identicon&r=PG&f=1", "display_name": "user3684545", "link": "https://stackoverflow.com/users/3684545/user3684545"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 29524617, "answer_count": 2, "score": 2, "last_activity_date": 1428617124, "creation_date": 1428524162, "question_id": 29524504, "link": "https://stackoverflow.com/questions/29524504/c-matrix-class-different-dimensions", "title": "c++ matrix class different dimensions", "body": "<pre><code>template &lt;int rows, int cols&gt;\nclass Matrix{\n std::array&lt;double, rows*cols&gt; mData;\n...\n}\n</code></pre>\n\n<p>What's the right way to define <code>operator*</code> to be able to multiply matrices which don't have same dimensions?</p>\n\n<p>I tried this but it obviously doesn't work as it expects same dimensions.</p>\n\n<pre><code>template &lt;int rows, int cols&gt;\nMatrix&lt;rows,cols&gt; operator*(Matrix&lt;rows,cols&gt;&amp; a, Matrix&lt;rows,cols&gt;&amp; b){...}\n</code></pre>\n"}, {"tags": ["c++", "ios", "opencv", "image-processing", "png"], "answers": [{"comments": [{"owner": {"reputation": 5291, "user_id": 339946, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/aa96769ab1fb1bdb8b47d0ee737c5a05?s=128&d=identicon&r=PG", "display_name": "user339946", "link": "https://stackoverflow.com/users/339946/user339946"}, "edited": false, "score": 0, "creation_date": 1428525310, "post_id": 29524693, "comment_id": 47204034, "body": "I set either flags, and set bits per pixel to 32. However, my error is now &lt;Error&gt;: CGImageCreate: invalid image bits/pixel or bytes/row.  My current bytes per row is set to cvMat.step[0], which returns 1410. I&#39;m not sure what this value means. Also, the old bits per pixel was calculated with 8 * cvMat.elemSize(), but elemSize was 3. Is it wrong to overwrite that evaluation? Thanks"}, {"owner": {"reputation": 182, "user_id": 1073388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84096a8c70b2e2a7b78443ba62f9c769?s=128&d=identicon&r=PG", "display_name": "DanielS", "link": "https://stackoverflow.com/users/1073388/daniels"}, "reply_to_user": {"reputation": 5291, "user_id": 339946, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/aa96769ab1fb1bdb8b47d0ee737c5a05?s=128&d=identicon&r=PG", "display_name": "user339946", "link": "https://stackoverflow.com/users/339946/user339946"}, "edited": false, "score": 0, "creation_date": 1428526190, "post_id": 29524693, "comment_id": 47204503, "body": "@user339946 Please check updated answer. The wrong value returned by cvMat.elemSize() is due to the override of foreground"}, {"owner": {"reputation": 5291, "user_id": 339946, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/aa96769ab1fb1bdb8b47d0ee737c5a05?s=128&d=identicon&r=PG", "display_name": "user339946", "link": "https://stackoverflow.com/users/339946/user339946"}, "edited": false, "score": 0, "creation_date": 1428526223, "post_id": 29524693, "comment_id": 47204525, "body": "Yep! The problem was the source image was a 3 channel and lacked the alpha value. Thank you!"}], "owner": {"reputation": 182, "user_id": 1073388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84096a8c70b2e2a7b78443ba62f9c769?s=128&d=identicon&r=PG", "display_name": "DanielS", "link": "https://stackoverflow.com/users/1073388/daniels"}, "is_accepted": true, "score": 1, "last_activity_date": 1428525979, "last_edit_date": 1592644375, "creation_date": 1428524749, "answer_id": 29524693, "question_id": 29524440, "link": "https://stackoverflow.com/questions/29524440/generating-a-png-with-transparency-from-mat-opencv/29524693#29524693", "title": "Generating a PNG with transparency from Mat (OpenCV)", "body": "<p>It looks like the problem is <em>copyTo</em> method. From the doc:</p>\n<blockquote>\n<p>The method copies the matrix data to another matrix. Before copying the data, the method invokes</p>\n<p>m.create(this-&gt;size(), this-&gt;type());</p>\n</blockquote>\n<p>It looks like it overrides your setup of <em>foreground</em>. You need to find another way to copy bits to get alpha channel.</p>\n"}], "owner": {"reputation": 5291, "user_id": 339946, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/aa96769ab1fb1bdb8b47d0ee737c5a05?s=128&d=identicon&r=PG", "display_name": "user339946", "link": "https://stackoverflow.com/users/339946/user339946"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1715, "favorite_count": 1, "accepted_answer_id": 29524693, "answer_count": 1, "score": 1, "last_activity_date": 1428525979, "creation_date": 1428523923, "last_edit_date": 1428524381, "question_id": 29524440, "link": "https://stackoverflow.com/questions/29524440/generating-a-png-with-transparency-from-mat-opencv", "title": "Generating a PNG with transparency from Mat (OpenCV)", "body": "<p>I am doing some image manipulation which creates an image on a transparent background. I'm working with OpenCV (C++) and iOS. To begin, I setup a 4 channel 8 bit matrix, set all pixels to white with alpha 0 (is this correct?). Then copy the pixels from <code>result</code> into <code>foreground</code>:</p>\n\n<pre><code> cv::Mat foreground(image.size(),CV_8UC4, cv::Scalar(255,255,255,0));\n image.copyTo(foreground, result);\n</code></pre>\n\n<p>Next, I need to convert this <code>Mat</code> into a <code>UIImage</code>, the code I was using for this:</p>\n\n<pre><code>+(UIImage *)UIImageFromCVMat:(cv::Mat)cvMat\n{\n    NSData *data = [NSData dataWithBytes:cvMat.data length:cvMat.elemSize()*cvMat.total()];\n    CGColorSpaceRef colorSpace;\n\n    if (cvMat.elemSize() == 1) {\n        colorSpace = CGColorSpaceCreateDeviceGray();\n    } else {\n        colorSpace = CGColorSpaceCreateDeviceRGB();\n    }\n\n    CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef)data);\n\n    // Creating CGImage from cv::Mat\n    CGImageRef imageRef = CGImageCreate(cvMat.cols,                                 //width\n                                        cvMat.rows,                                 //height\n                                        8,                                          //bits per component\n                                        8 * cvMat.elemSize(),                       //bits per pixel\n                                        cvMat.step[0],                            //bytesPerRow\n                                        colorSpace,                                 //colorspace\n                                        kCGImageAlphaNone|kCGBitmapByteOrderDefault,// bitmap info\n                                        provider,                                   //CGDataProviderRef\n                                        NULL,                                       //decode\n                                        false,                                      //should interpolate\n                                        kCGRenderingIntentDefault                   //intent\n                                        );\n\n    // Getting UIImage from CGImage\n    UIImage *finalImage = [UIImage imageWithCGImage:imageRef];\n    CGImageRelease(imageRef);\n    CGDataProviderRelease(provider);\n    CGColorSpaceRelease(colorSpace);\n\n    return finalImage;\n}\n</code></pre>\n\n<p>This works fine for generating my image, but I noticed it wasn't transparent. So I figured instead using <code>CGImageCreate</code>, I could use:</p>\n\n<pre><code>CGImageRef imageRef = CGImageCreateWithPNGDataProvider(provider, NULL, false, kCGRenderingIntentDefault);\n</code></pre>\n\n<p>However I'm not sure if CGImageCreateWithPNGDataProvider is the right call, I'm not sure if the provider is formatted correctly for this method.</p>\n\n<p>I have also checked to make sure my <code>imageView.opaque = NO;</code>.</p>\n\n<p>Does anyone know the easiest way to convert a <code>cv::Mat</code> to <code>PNG</code> with transparency? Thanks</p>\n\n<p>*EDIT: I also tried tinkering with some of the flags for bitmap info on the original <code>CGImageCreate</code> function:</p>\n\n<pre><code>kCGImageAlphaPremultipliedLast,  /* For example, premultiplied RGBA */\n  kCGImageAlphaPremultipliedFirst, /* For example, premultiplied ARGB */\n  kCGImageAlphaLast,               /* For example, non-premultiplied RGBA */\n  kCGImageAlphaFirst,              /* For example, non-premultiplied ARGB */\n  kCGImageAlphaNoneSkipLast,       /* For example, RBGX. */\n  kCGImageAlphaNoneSkipFirst,      /* For example, XRGB. */\n</code></pre>\n\n<p>However, I get an error of <code>&lt;Error&gt;: CGImageCreate: invalid image bits/pixel: 24.</code> which I'm not sure how to interpret, since I initialized the <code>cv::Mat foreground</code> with 4 channels.</p>\n"}, {"tags": ["c++", "c++11", "tuples", "subset", "variadic-templates"], "answers": [{"owner": {"reputation": 15322, "user_id": 291737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/432bda8139dee981e1411f40cab0a13e?s=128&d=identicon&r=PG", "display_name": "StilesCrisis", "link": "https://stackoverflow.com/users/291737/stilescrisis"}, "is_accepted": false, "score": 1, "last_activity_date": 1428525253, "creation_date": 1428525253, "answer_id": 29524836, "question_id": 29524162, "link": "https://stackoverflow.com/questions/29524162/template-function-with-corresponding-parameters-to-subset-of-tuple-types/29524836#29524836", "title": "template function with corresponding parameters to subset of tuple types", "body": "<p>You should look into <code>boost::multi_index</code>. It is very close to what you are looking for.</p>\n\n<p><a href=\"http://www.boost.org/doc/libs/1_54_0/libs/multi_index/doc/tutorial/index.html\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_54_0/libs/multi_index/doc/tutorial/index.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 15322, "user_id": 291737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/432bda8139dee981e1411f40cab0a13e?s=128&d=identicon&r=PG", "display_name": "StilesCrisis", "link": "https://stackoverflow.com/users/291737/stilescrisis"}, "edited": false, "score": 0, "creation_date": 1428525453, "post_id": 29524854, "comment_id": 47204100, "body": "This gives your set linear performance on its searches... pretty weak from an algorithmic complexity perspective."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 15322, "user_id": 291737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/432bda8139dee981e1411f40cab0a13e?s=128&d=identicon&r=PG", "display_name": "StilesCrisis", "link": "https://stackoverflow.com/users/291737/stilescrisis"}, "edited": false, "score": 0, "creation_date": 1428525915, "post_id": 29524854, "comment_id": 47204345, "body": "@StilesCrisis the data the OP is inserting is not ordered?  As an aside, This gets far less obtuse in C++1z."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1428526286, "post_id": 29524854, "comment_id": 47204561, "body": "If your <code>==</code> is transparent, the above is inefficient.  As an example, <code>std::string</code> and <code>&quot;hello world&quot;</code>."}, {"owner": {"reputation": 123, "user_id": 3084793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/440d909b0b2a3f45ef043911076fc68a?s=128&d=identicon&r=PG&f=1", "display_name": "Alby", "link": "https://stackoverflow.com/users/3084793/alby"}, "edited": false, "score": 0, "creation_date": 1428528059, "post_id": 29524854, "comment_id": 47205454, "body": "This code is causing error: &quot;error C1001: An internal error has occurred in the compiler&quot;"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 123, "user_id": 3084793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/440d909b0b2a3f45ef043911076fc68a?s=128&d=identicon&r=PG&f=1", "display_name": "Alby", "link": "https://stackoverflow.com/users/3084793/alby"}, "edited": false, "score": 0, "creation_date": 1428531182, "post_id": 29524854, "comment_id": 47206956, "body": "@Alby Added a version that doesn&#39;t choke on the version of MSVC used by <a href=\"http://rextester.com/CMK89055\" rel=\"nofollow noreferrer\">rextester</a>."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1428531238, "post_id": 29524854, "comment_id": 47206978, "body": "@Yakk OTOH, the perfectly forwarding (or <code>const &amp;</code> + deduction) version won&#39;t allow braced initializers. It&#39;s a trade-off, as always."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1428531680, "post_id": 29524854, "comment_id": 47207161, "body": "@t.c. really, you need <code>2^n</code> overloads, taking a fixed <code>T&amp;&amp;</code> or a forwarding reference for each arg, with the more <code>T&amp;&amp;</code> version perferred.  This gives both brace and transparent comparison.  Or we could type erase comparison to <code>T const&amp;</code> ;)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1428532177, "post_id": 29524854, "comment_id": 47207332, "body": "@Yakk Forwarding references or not, you can&#39;t use braces with deduction. I suppose a sane solution would be to provide two overloads, one with either <code>const T&amp;</code> or <code>T&amp;&amp;</code> with <code>T</code> being deduced, and one with <code>const tuple_element_t&lt;&gt; &amp;</code> for braces. That doesn&#39;t solve the 0-as-null-pointer-constant problem, though. But I guess you can say &quot;just use <code>nullptr</code>&quot;."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1428535336, "post_id": 29524854, "comment_id": 47208352, "body": "@T.C. yes, <code>2^n</code> overloads for <code>n</code> parameters.  Each parameter either deduced with a forwarding reference, or a <code>T&amp;&amp;</code> rvalue reference from the tuple type.  Brace initialization in a field goes to the <code>T&amp;&amp;</code> rvalue overload.  For 1 argument cases, practical: in general, not.  The type-erase-to comparison-with-<code>T</code> is actually more practical (if also ridiculous).  Then each type erasure object can independently overload <code>T&amp;&amp;</code> rvalue or <code>U&amp;&amp;</code> forwarding reference, managing transparent equality and brace initialization.  One could imagine a language where that wouldn&#39;t be ridiculous, either."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1428612514, "post_id": 29524854, "comment_id": 47248904, "body": "@t.c. you may or may not be amused if you read the appendix to my answer below.  I added an on the fly type erasure view of equality, allowing both <code>{{whatever}}</code> construction and transparent comparison.  Well, I found it amusing.  ;)"}], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 5, "last_activity_date": 1428531454, "last_edit_date": 1428531454, "creation_date": 1428525318, "answer_id": 29524854, "question_id": 29524162, "link": "https://stackoverflow.com/questions/29524162/template-function-with-corresponding-parameters-to-subset-of-tuple-types/29524854#29524854", "title": "template function with corresponding parameters to subset of tuple types", "body": "<pre><code>// test whether a particular tuple is a match\ntemplate&lt;size_t... Pos&gt;\nstatic bool is_match(const Tuple&amp; tuple, const typename std::tuple_element&lt;Pos, Tuple&gt;::type &amp;... args) {\n    std::initializer_list&lt;bool&gt; results = { (std::get&lt;Pos&gt;(tuple) == args)... };\n    return std::all_of(results.begin(), results.end(), [](bool p) { return p; });\n}\n\n// Find the first one that is a match.\ntemplate&lt;size_t... Pos&gt;\ntypename vector&lt;Tuple&gt;::const_iterator find(const typename std::tuple_element&lt;Pos, Tuple&gt;::type &amp;... args) const {\n    return std::find_if(data.begin(), data.end(), [&amp;](const Tuple &amp; tup) { return is_match&lt;Pos...&gt;(tup, args...); });\n}\n</code></pre>\n\n<p>It's also possible to have <code>find</code> take a type parameter pack and perfectly forward, rather than taking fixed types with <code>tuple_element</code>. The benefit is that you can avoid an unnecessary conversion if <code>==</code> is transparent. The cost is that you can't take anything that can't be perfectly forwarded any more (e.g., braced initializer lists, <code>0</code> as a null pointer constant). A side benefit appears to be that MSVC 2013 doesn't choke on this version:</p>\n\n<pre><code>// test whether a particular tuple is a match\ntemplate&lt;size_t... Pos, class... Args&gt;\nstatic bool is_match(const Tuple&amp; tuple, Args&amp;&amp;... args) {\n    std::initializer_list&lt;bool&gt; results = { (std::get&lt;Pos&gt;(tuple) == std::forward&lt;Args&gt;(args))... };\n    return std::all_of(results.begin(), results.end(), [](bool p) { return p; });\n}\n\n// Find the first one that is a match.\ntemplate&lt;size_t... Pos, class... Args&gt;\ntypename vector&lt;Tuple&gt;::const_iterator find(Args&amp;&amp;... args) const {\n    return std::find_if(data.begin(), data.end(), [&amp;](const Tuple &amp; tup) { return is_match&lt;Pos...&gt;(tup, std::forward&lt;Args&gt;(args)...); });\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1428589746, "post_id": 29524993, "comment_id": 47234438, "body": "@T.C. why remove the seed <code>true</code>?  Is it not needed for an empty argument pack?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1428604318, "post_id": 29524993, "comment_id": 47243987, "body": "No, folding an empty pack with &amp;&amp; yields <code>true</code>."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1428604512, "post_id": 29524993, "comment_id": 47244094, "body": "@T.C. bah, what if my <code>operator&amp;&amp;</code> is overloaded to or values together?  &quot;Special case the most common case&quot; &quot;user friendly&quot; pfah."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1428940346, "post_id": 29524993, "comment_id": 47364874, "body": "@dyp yes, that was leftover from an earlier version.  I deleted the line."}], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1428940330, "last_edit_date": 1428940330, "creation_date": 1428525835, "answer_id": 29524993, "question_id": 29524162, "link": "https://stackoverflow.com/questions/29524162/template-function-with-corresponding-parameters-to-subset-of-tuple-types/29524993#29524993", "title": "template function with corresponding parameters to subset of tuple types", "body": "<p>This is a function that takes a seed value, and a set of lambdas.  It feeds that seed value through each of the lambdas in turn:</p>\n\n<pre><code>template&lt;class... Fs, class R&gt;\nR chain( R r, Fs&amp;&amp;... fs ) {\n  using in_order = int[];\n  (void)(in_order{0,\n    (\n      (r = std::forward&lt;Fs&gt;(fs)( r ))\n      , void(), 0\n    )...\n  });\n  return r;\n}\n</code></pre>\n\n<p>Inside your class, we use the above:</p>\n\n<pre><code>template&lt;size_t... Pos, class...Us&gt;\ntypename std::vector&lt;Tuple&gt;::const_iterator\nfind(Us const&amp;... us) const {\n  return std::find_if(\n    data.begin(), data.end(),\n    [&amp;](const Tuple &amp; tup) {\n      return chain(\n        true,\n        [&amp;](bool old){\n          return old &amp;&amp; (std::get&lt;Pos&gt;(tup) == us);\n        }...\n      );\n    }\n  );\n}\n</code></pre>\n\n<p>this compiles in clang, but not g++ 4.9.2 -- g++ doesn't like parameter packs inside lambdas.</p>\n\n<p>Note the fact we take <code>Us const&amp;...</code> -- this allows for transparent <code>==</code>, which is important in some cases.  <code>std::string == char const*</code> is a classic example, where if you force <code>find</code> to take the same value as in the tuple, you'll force a needless allocation in calling <code>find</code>.</p>\n\n<hr>\n\n<p>In C++1z, the <code>chain</code> call can be replaced with:</p>\n\n<pre><code>( ... &amp;&amp; (std::get&lt;Pos&gt;(tup) == us) )\n</code></pre>\n\n<p>which is conceptually identical, but much easier to read.  This is known as a \"fold expression\".</p>\n\n<hr>\n\n<p>Now, a problem with the above is that it uses forwarding references, which causes imperfect forwarding problems of perfect forwarding.</p>\n\n<p>The most annoying of which is the inability to use {} to construct arguments.</p>\n\n<p>If we use matching types, we instead force non-transparent comparison, which can be expensive (examine <code>std::string</code> compared to <code>\"hello this is a c string\"</code> -- it causes possibly allocation if we force the c string into a <code>std::string</code>.)</p>\n\n<p>A way around this is to <a href=\"http://coliru.stacked-crooked.com/a/2fc5158c4310de0e\" rel=\"nofollow\">type erase down to the concept of equality with a given type</a>.</p>\n\n<pre><code>template&lt;class...&gt;struct voider{using type=void;};\ntemplate&lt;class...Ts&gt;using void_t=typename voider&lt;Ts...&gt;::type;\ntemplate&lt;class T&gt;struct tag{using type=T;};\n\ntemplate&lt;class...&gt;struct types{using type=types;};\n\ntemplate&lt;class T&gt;\nusing block_deduction = typename tag&lt;T&gt;::type;\n\ntemplate&lt;class F, class Sig, class T=void&gt;\nstruct erase_view_op;\n\ntemplate&lt;class F, class R, class...Ts, class T&gt;\nstruct erase_view_op&lt;F, R(Ts...), T&gt;\n{\n  using fptr = R(*)(void const*, Ts&amp;&amp;...);\n\n  fptr f;\n  void const* ptr;\n\nprivate:\n  template&lt;class U&gt;\n  erase_view_op(U&amp;&amp; u, int):\n    f([](void const* p, Ts&amp;&amp;...ts)-&gt;R{\n      U&amp; u = reinterpret_cast&lt;U&amp;&gt;( *static_cast&lt;std::decay_t&lt;U&gt;*&gt;(const_cast&lt;void*&gt;(p)) );\n      return F{}( u, std::forward&lt;Ts&gt;(ts)... );\n    }),\n    ptr( static_cast&lt;void const*&gt;(std::addressof(u)) )\n  {}\npublic:\n  template&lt;class U, class=std::enable_if_t&lt; !std::is_same&lt;std::decay_t&lt;U&gt;,erase_view_op&gt;{} &amp;&amp; std::is_convertible&lt; std::result_of_t&lt;F(U,Ts...)&gt;, R &gt;{} &gt;&gt;\n  erase_view_op(U&amp;&amp; u):erase_view_op( std::forward&lt;U&gt;(u), 0 ){}\n\n  template&lt;class U=T, class=std::enable_if_t&lt; !std::is_same&lt;U, void&gt;{} &gt;&gt;\n  erase_view_op( block_deduction&lt;U&gt;&amp;&amp; u ):erase_view_op( std::move(u), 0 ){}\n\n  erase_view_op( erase_view_op const&amp; ) = default;\n  erase_view_op( erase_view_op&amp;&amp; ) = default;\n\n  R operator()( Ts... ts ) const {\n    return f( ptr, std::forward&lt;Ts&gt;(ts)... );\n  }\n};\n\nstruct equality {\n  template&lt;class lhs, class rhs&gt;\n  bool operator()(lhs const&amp; l, rhs const&amp; r)const {\n    return l==r;\n  }\n};\ntemplate&lt;class T&gt;\nusing erase_equal_to = erase_view_op&lt; equality, bool(T const&amp;), T &gt;;\nusing string_equal_to = erase_equal_to&lt; std::string &gt;;\n\nint main() {\n  static_assert( std::is_same&lt; bool, std::result_of_t&lt; std::equal_to&lt;&gt;(decltype(\"hello\"), std::string const&amp;) &gt; &gt;{}, \"hmm\" );\n  string_equal_to s = \"hello\";\n  string_equal_to s2 = {{\"hello\"}};\n  (void)s2;\n  std::string x = \"hello\";\n  std::string y = \"jello\";\n  std::cout &lt;&lt; s(x) &lt;&lt; s(y) &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>then we rewrite <code>find</code>:</p>\n\n<pre><code>template&lt;size_t... Pos&gt;\ntypename std::vector&lt;Tuple&gt;::const_iterator\nfind(erase_equal_to&lt; std::remove_reference_t&lt;std::tuple_element_t&lt;Pos, Tuple&gt;&gt; &gt;... us) const {\n  return std::find_if(\n    data.begin(), data.end(),\n    [&amp;](const Tuple &amp; tup) {\n      return chain(\n        true,\n        [&amp;](bool old){\n          return old &amp;&amp; us(std::get&lt;Pos&gt;(tup));\n        }...\n      );\n    }\n  );\n}\n</code></pre>\n\n<p>which does both transparent equality and allows <code>{}</code> based construction (well, it does require <code>{{}}</code> based construction -- the outer to say we are constructing the eraser, the inner to construct the <code>T</code>).</p>\n"}], "owner": {"reputation": 123, "user_id": 3084793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/440d909b0b2a3f45ef043911076fc68a?s=128&d=identicon&r=PG&f=1", "display_name": "Alby", "link": "https://stackoverflow.com/users/3084793/alby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 2, "accepted_answer_id": 29524854, "answer_count": 3, "score": 9, "last_activity_date": 1429204076, "creation_date": 1428522861, "last_edit_date": 1429204076, "question_id": 29524162, "link": "https://stackoverflow.com/questions/29524162/template-function-with-corresponding-parameters-to-subset-of-tuple-types", "title": "template function with corresponding parameters to subset of tuple types", "body": "<p>I would like to write function as this <code>find</code>:</p>\n\n<pre><code>multi_set&lt;int, string, double, myType&gt; m; //vector of tuples\nm.insert(/*some data*/);\nm.find&lt;1,2&gt;(\"something\",2.123);\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>m.find&lt;0,3&gt;(1,instanceOfMyType);\nm.find&lt;1&gt;(\"somethingelse\");\n</code></pre>\n\n<p>Where <code>find</code> can be parametrized corresponding to any subset of tuple parameters.</p>\n\n<p>My code so far:</p>\n\n<pre><code>template &lt;typename ... T&gt;\nclass multi_set{\n    typedef  tuple &lt; T... &gt; Tuple;\n    vector&lt;tuple&lt;T...&gt;&gt; data = vector&lt;tuple&lt;T...&gt;&gt;();\n\npublic:\n    void insert(T... t){\n        data.push_back(tuple&lt;T...&gt;(t...));\n    }\n\n\n    template&lt;size_t ... Pos&gt;\n    void find(???){\n    // then I would like to use those params to search through data and \n    // return first matching item\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "scope", "static-functions"], "answers": [{"owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "is_accepted": true, "score": 3, "last_activity_date": 1428524359, "creation_date": 1428524359, "answer_id": 29524567, "question_id": 29524120, "link": "https://stackoverflow.com/questions/29524120/c-file-scope-static-functions/29524567#29524567", "title": "C++ file-scope static functions", "body": "<p>That's a perfectly valid use of file-scope static functions, but keep in mind that this usage of static has been deprecated for quite some time.  It's generally preferred to use anonymous namespaces instead.</p>\n"}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "is_accepted": false, "score": 1, "last_activity_date": 1428524424, "creation_date": 1428524424, "answer_id": 29524590, "question_id": 29524120, "link": "https://stackoverflow.com/questions/29524120/c-file-scope-static-functions/29524590#29524590", "title": "C++ file-scope static functions", "body": "<p>I do a similar thing when it make sense to have functions and/of data that are not part of the class interface but rather an implementation detail.</p>\n\n<p>But I don't use the keyword static.  Instead, I put the functions and/or data in an unnamed namespace.</p>\n"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 1, "last_activity_date": 1428751901, "creation_date": 1428751901, "answer_id": 29577374, "question_id": 29524120, "link": "https://stackoverflow.com/questions/29524120/c-file-scope-static-functions/29577374#29577374", "title": "C++ file-scope static functions", "body": "<p>First off, the term you are looking for is <em>internal linkage</em>. Your question really should be: \"Which entities should have internal linkage?\" The <code>static</code> keyword, or alternatively unnamed namespaces, are just implementation mechanisms to achieve internal linkage.</p>\n\n<p>Now the answer should be obvious: All entities that are only required inside one single translation unit may be given internal linkage, and there are benefits in doing so: One is that the compiler can make use of the information that an entity cannot ever be seen by any other translation unit, so it can for example avoid emitting code that might be required otherwise, or inline more aggressively. Another reason is that you minimize the risk of accidental ODR violations if you happen to pick a name that is also used locally in some other TU.</p>\n\n<p>A typical example is like this:</p>\n\n<p><strong>my_lib.hpp:</strong></p>\n\n<pre><code>#ifndef H_MY_LIB\n#define H_MY_LIB\n\nnamespace foo\n{\n    void do_an_awesome_thing(void * p, std::size_t n);\n}\n\n#endif\n</code></pre>\n\n<p><strong>my_lib.cpp:</strong></p>\n\n<pre><code>#include \"my_lib.hpp\"\n\nnamespace foo\n{\n    namespace\n    {\n        void helper(void * p) { /* ... */ }\n        bool aux(std::size_t n, float f) { /* ... */ }\n\n        constexpr char usage[] = R\"(This is how you do it...)\";\n        constexpr float some_factor = 1.25;\n    }\n\n    void do_an_awesome_thing(void *p, std::size_t n)\n    {\n        if (!aux(n, some_factor)) { LOG_AND_DIE(usage); }\n        helper(p);\n    }\n}\n</code></pre>\n\n<p>Now your can be sure that your translation unit does not impose any undue link-time burden on the remainder of your program.</p>\n\n<p>The placement of the unnamed namespace is a matter of taste; you can either have it inside your usual namespace, or at the top level. The effect is the same.</p>\n"}], "owner": {"reputation": 1182, "user_id": 1655492, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f20d0782c02b7eed88a90664a7301367?s=128&d=identicon&r=PG", "display_name": "DigitalEye", "link": "https://stackoverflow.com/users/1655492/digitaleye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2096, "favorite_count": 0, "accepted_answer_id": 29524567, "answer_count": 3, "score": 1, "last_activity_date": 1428751901, "creation_date": 1428522739, "question_id": 29524120, "link": "https://stackoverflow.com/questions/29524120/c-file-scope-static-functions", "title": "C++ file-scope static functions", "body": "<p>When should I consider using static functions defined at file scope? </p>\n\n<p>I typically use them when the task done in one such function doesn't really belong in member functions of any class and when such a task is only needed (repeatedly) in a certain source file. </p>\n\n<p>Is my usage in line with why this feature exists? Or am I hijacking a concept that's intended for something else?</p>\n"}, {"tags": ["c++", "visual-studio-2005"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1428523014, "post_id": 29524106, "comment_id": 47202774, "body": "Have you tried running VS2005 as administrator? And needless to say, if you have VS2010 available, a more prudent approach might be to upgrade the solution to VS2010."}, {"owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "edited": false, "score": 0, "creation_date": 1428523894, "post_id": 29524106, "comment_id": 47203293, "body": "One of the problems was that if you have a source code file (or possibly a temporary file referenced in the build process: *.obj etc.) in your solution which full path is longer than 260 characters, then IDE might crash. You mentioned the solution is large and you could put it into certain subdirectory, so reaching such a long path is basically possible. Trying moving solution close to the root to eliminate the long path issue."}, {"owner": {"reputation": 1, "user_id": 4765612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a1fe6a558f3eca437e7aaabb05fa2d?s=128&d=identicon&r=PG&f=1", "display_name": "mstrorange", "link": "https://stackoverflow.com/users/4765612/mstrorange"}, "edited": false, "score": 0, "creation_date": 1428609637, "post_id": 29524106, "comment_id": 47247182, "body": "What are the pit falls when upgrading from 2005 to 2010? I&#39;m not prepared at this time to retest the entire solution. it is made up of 5 different projects."}], "owner": {"reputation": 1, "user_id": 4765612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a1fe6a558f3eca437e7aaabb05fa2d?s=128&d=identicon&r=PG&f=1", "display_name": "mstrorange", "link": "https://stackoverflow.com/users/4765612/mstrorange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428522710, "creation_date": 1428522710, "question_id": 29524106, "link": "https://stackoverflow.com/questions/29524106/visual-studio-2005-crashes-when-i-open-a-c-project-or-solution", "title": "Visual Studio 2005 crashes when i open a c++ project or solution", "body": "<p>i have quite a large solution with 10 projects (I am new to Visual Studio so be forgiving if I don't get the terminology right). One of the projects is a C++ project that would compile to a .dll. I have a new machine so everything is freshly installed. However, every time I try to open the c++ project VS crashes.</p>\n\n<p>I then tried creating a new c++ solution/project but as soon as it is created and the solution explorer is presented VS crashes. I have searched Stackoverflow and there was something that may have worked but the reference to hot fix KB947315 is not accessible. I have tried to find the hot fix but to no avail.</p>\n\n<p>I tried debugging VS2005 with VS2010 but did not get far.</p>\n\n<p>My OS is windows 7 and I have included a screen shot of the VS help about for the version</p>\n"}, {"tags": ["c++", "argument-dependent-lookup"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1428522283, "post_id": 29523855, "comment_id": 47202317, "body": "Should it be: (&amp;&amp; is GCC right)?"}], "answers": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": false, "score": 3, "last_activity_date": 1428522484, "creation_date": 1428522484, "answer_id": 29524054, "question_id": 29523855, "link": "https://stackoverflow.com/questions/29523855/what-is-c-name-lookup-doing-here-is-gcc-right/29524054#29524054", "title": "What is C++ name lookup doing here? (&amp; is GCC right?)", "body": "<p>GCC is right. <code>func</code> can only be found via ADL since it is an unqualified, dependent function call. <code>func</code> is declared in the global namespace but that is <em>not</em> an associated namespace of <code>ns::type</code>, only <code>ns</code> is (which is why your current code fails). When you replace <code>intermediate(exit_node)</code> with a direct call to <code>func(exit_node)</code> inside <code>foo</code>, then it is found by normal unqualified lookup.</p>\n"}, {"comments": [{"owner": {"reputation": 907, "user_id": 362981, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b51fdcf88ff6b732bc90654e3ce15384?s=128&d=identicon&r=PG", "display_name": "EvanED", "link": "https://stackoverflow.com/users/362981/evaned"}, "edited": false, "score": 0, "creation_date": 1428522898, "post_id": 29524130, "comment_id": 47202694, "body": "So in other words, the candidate call targets is the union of (i) those found by unqualified lookup at the point of definition (hence the &quot;defined later&quot; note) and (ii) those found by ADL at the point of instantiation?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 907, "user_id": 362981, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b51fdcf88ff6b732bc90654e3ce15384?s=128&d=identicon&r=PG", "display_name": "EvanED", "link": "https://stackoverflow.com/users/362981/evaned"}, "edited": false, "score": 0, "creation_date": 1428522976, "post_id": 29524130, "comment_id": 47202748, "body": "@EvanED ADL considers both the definition and the instantiation contexts."}], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 7, "last_activity_date": 1428522769, "creation_date": 1428522769, "answer_id": 29524130, "question_id": 29523855, "link": "https://stackoverflow.com/questions/29523855/what-is-c-name-lookup-doing-here-is-gcc-right/29524130#29524130", "title": "What is C++ name lookup doing here? (&amp; is GCC right?)", "body": "<p>The general rule is that anything that is not in the template definition context can only be picked up via ADL. In other words, normal unqualified lookup is performed only in the template definition context.</p>\n\n<p>Since no declaration of <code>func</code> is visible when <code>intermediate</code> was defined, and <code>func</code> is not in a namespace associated with <code>ns::type</code>, the code is ill-formed.</p>\n"}], "owner": {"reputation": 907, "user_id": 362981, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b51fdcf88ff6b732bc90654e3ce15384?s=128&d=identicon&r=PG", "display_name": "EvanED", "link": "https://stackoverflow.com/users/362981/evaned"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 1, "accepted_answer_id": 29524130, "answer_count": 2, "score": 10, "last_activity_date": 1428522769, "creation_date": 1428521883, "question_id": 29523855, "link": "https://stackoverflow.com/questions/29523855/what-is-c-name-lookup-doing-here-is-gcc-right", "title": "What is C++ name lookup doing here? (&amp; is GCC right?)", "body": "<p>I was having a problem in some production code that I minimized to the following test case:</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid intermediate(T t)\n{\n    func(t); // line 4 (\"func not declared in this scope\")\n}\n\nnamespace ns {\n    struct type {};\n}\n\nvoid func(ns::type const &amp; p); // line 11 (\"declared here, later\")\n\nvoid foo(ns::type exit_node)\n{\n    intermediate(exit_node);  // line 15 (\"required from here\")\n}\n</code></pre>\n\n<p>GCC 4.5 compiles this fine. Both with and without <code>-std=c++11</code>, 4.7 and 4.9 produce messages like:</p>\n\n<pre><code>test.cpp: In instantiation of \u2018void intermediate(T) [with T = ns::type]\u2019:\ntest.cpp:15:27:   required from here\ntest.cpp:4:5: error: \u2018func\u2019 was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]\ntest.cpp:11:6: note: \u2018void func(const ns::type&amp;)\u2019 declared here, later in the translation unit\n</code></pre>\n\n<p>All of the following three things will cause the file to successfully compile:</p>\n\n<ol>\n<li>Move <code>func(ns::type)</code> into the <code>ns</code> namespace (allowing ADL to find it in <code>ns</code>)</li>\n<li>Move <code>type</code> into the global namespace (allowing ADL to find it in <code>::</code>)</li>\n<li>Get rid of <code>intermediate</code> and call <code>func</code> directly from <code>foo</code></li>\n</ol>\n\n<p>So... what is going on here? Is it legal for GCC to reject this program? Why is <code>func</code> found by unqualified lookup in the third variant (call <code>func</code> directly from <code>foo</code>) but not found by unqualified lookup in the original variant at the point of instantiation?</p>\n"}, {"tags": ["c++", "directx", "ifstream", ".obj", "wifstream"], "comments": [{"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1428522519, "post_id": 29523739, "comment_id": 47202452, "body": "In my version of the <a href=\"https://directxmesh.codeplex.com/wikipage?title=Wavefront%20OBJ&amp;referringTitle=Geometry%20formats\" rel=\"nofollow noreferrer\">WaveFront OBJ reader</a> for <a href=\"http://go.microsoft.com/fwlink/?LinkID=324981\" rel=\"nofollow noreferrer\">DirectXMesh</a> I assume the .mtl has the same path as the input file and use some splitpath/makepath logic."}, {"owner": {"reputation": 11759, "user_id": 1451110, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8db1beb1451956240960e2254d4a3f64?s=128&d=identicon&r=PG", "display_name": "CodeAngry", "link": "https://stackoverflow.com/users/1451110/codeangry"}, "edited": false, "score": 0, "creation_date": 1428580106, "post_id": 29523739, "comment_id": 47227435, "body": "<b>Never rely on current directory.</b> Always use absolute paths, which you can build from <code>GetModuleFileName(nullptr, ...)</code>. Remove file name from it and append your asset path, assuming it&#39;s in the folder of the exe."}, {"owner": {"reputation": 15, "user_id": 3640122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0092a4837cb21c8bd6067af07c19e68c?s=128&d=identicon&r=PG&f=1", "display_name": "user3640122", "link": "https://stackoverflow.com/users/3640122/user3640122"}, "edited": false, "score": 0, "creation_date": 1429878370, "post_id": 29523739, "comment_id": 47820647, "body": "Thanks for the comment, i will try this. However, i still don&#39;t understand why getting using the path to the file, and adding the filename from the OBJ file doesn&#39;t work. I have tried also JUST getting the complete path from the OBJ file and it still wouldn&#39;t work.  I have used break points in both of these to verify the path being used is identical to the one hard coded and passed into the method. Does anyone know the difference here?"}], "owner": {"reputation": 15, "user_id": 3640122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0092a4837cb21c8bd6067af07c19e68c?s=128&d=identicon&r=PG&f=1", "display_name": "user3640122", "link": "https://stackoverflow.com/users/3640122/user3640122"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 292, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1428525448, "creation_date": 1428521510, "last_edit_date": 1428525448, "question_id": 29523739, "link": "https://stackoverflow.com/questions/29523739/cannot-open-mtl-file-unless-path-is-hard-coded", "title": "Cannot open .mtl file unless path is hard coded", "body": "<p>I'm having trouble with my .OBJ file model loader. I am reading in the model fine, but when it comes to reading in the .mtl file the file will only open if I hard code the path. </p>\n\n<p>I have check the path being given, and it matches the path I hard coded (which works just fine). But when ever I try to have the code either read the path from the .obj or just build it in the code, the file won't open.</p>\n\n<p>Bellow is the relevant code. If I have missed anything, let me know and I will provide it.</p>\n\n<pre><code>bool ObjLoader::LoadOBJ(const std::string&amp; filename, \n                        const std::string&amp; filePath, \n                        std::vector&lt;Vertex::PosNormal&gt;&amp; vertices,\n                        std::vector&lt;USHORT&gt;&amp; indices,\n                        std::vector&lt;MeshGeometry::Subset&gt;&amp; subsets,\n                        std::vector&lt;OBJMaterial&gt;&amp; mats)\n{\n    std::wifstream fin (filename.c_str());  // &lt;-- .obj path\n\n    if (fin)\n    {\n        while (fin)\n        {\n           // reads in .obj file\n           // works just fine\n           // meshMatLib read in from here                                     \n        }\n    }\n\n    // Close the obj file\n    fin.close();\n    fin.clear();\n\n    fin.open(meshMatLib);  // &lt;-- uses hardcoded path above for /mtl\n\n    if (fin)    // if the material file is open\n    {\n        while (fin)\n        {\n            // loads Mtl file\n            // will not open\n        }\n    }\n}\n</code></pre>\n\n<p>The below line is from the .obj file and is used for the .mtl path.\nmtllib Models\\testTeapot\\testTeapot.mtl</p>\n\n<p>the hard coded path which works is:</p>\n\n<pre><code> \"Models\\\\testTeapot\\\\testTeapot.mtl\"\n</code></pre>\n\n<p>It is passed into the method when LoadOBJ is called ('filePath')</p>\n\n<p>The fact that this works when I hard code the path, suggests to me that the issue is related to the path. Is there a way I can get any further information on why the std::wifstream has failed?</p>\n\n<p>Thanks in advance for any help, this has been driving me crazy for days now.</p>\n"}, {"tags": ["c++", "binary-tree", "binary-search-tree"], "comments": [{"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 2, "creation_date": 1428520945, "post_id": 29523505, "comment_id": 47201524, "body": "So stop calling <code>insert</code> with the exact same parameters with which it was already called and on the exact same node..."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1428521168, "post_id": 29523505, "comment_id": 47201649, "body": "Pardon my naivete, but why do your leaf pages have pointers?"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "reply_to_user": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1428521201, "post_id": 29523505, "comment_id": 47201667, "body": "@DarkFalcon would putting left = left-&gt;left and right = right-&gt;right before calling the function again be an efficient solution?"}], "answers": [{"owner": {"reputation": 5486, "user_id": 1236397, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/67c4831541a7ce09aeccf0a3abbf008b?s=128&d=identicon&r=PG", "display_name": "James Wilkins", "link": "https://stackoverflow.com/users/1236397/james-wilkins"}, "is_accepted": false, "score": 2, "last_activity_date": 1428521340, "last_edit_date": 1428521340, "creation_date": 1428521158, "answer_id": 29523615, "question_id": 29523505, "link": "https://stackoverflow.com/questions/29523505/binary-search-tree-insert-causing-a-stack-overflow-c/29523615#29523615", "title": "Binary Search Tree insert causing a stack overflow C++", "body": "<p>You are calling the same function on the same instance you are in, causing a stack overflow (cyclical calls to the same function).  I think you meant <code>left-&gt;insert(k,c);</code> and <code>right-&gt;insert(k,c);</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 7638, "user_id": 2986116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2f1444d1687fdda5fc2f039ccb0c4c?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/2986116/j%c3%a9r%c3%b4me"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1428584367, "post_id": 29523627, "comment_id": 47230399, "body": "@qlear Please accept the answer if it solved your issue :) Thx"}], "owner": {"reputation": 7638, "user_id": 2986116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2f1444d1687fdda5fc2f039ccb0c4c?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/2986116/j%c3%a9r%c3%b4me"}, "is_accepted": true, "score": 2, "last_activity_date": 1428521201, "creation_date": 1428521201, "answer_id": 29523627, "question_id": 29523505, "link": "https://stackoverflow.com/questions/29523505/binary-search-tree-insert-causing-a-stack-overflow-c/29523627#29523627", "title": "Binary Search Tree insert causing a stack overflow C++", "body": "<p>Looks like your problem is coming from the recursive call to <code>insert</code>. You should call it on the right or left leaf of the current leaf:</p>\n\n<pre><code>template &lt;class K, class T&gt;\nvoid BSTLeaf&lt;K,T&gt;::insert(const K&amp; k, const T&amp; c){\n    //if the key is less than the node it comes to\n    if(k &lt; key){\n        if(left == NULL){\n            left = new BSTLeaf&lt;K,T&gt;(k,c);\n        }\n        else\n            left-&gt;insert(k,c);\n    }\n    if(k &gt; key){\n        if(right == NULL){\n            right = new BSTLeaf&lt;K,T&gt;(k,c);\n        }\n        else\n            right-&gt;insert(k,c);\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 29523627, "answer_count": 2, "score": 0, "last_activity_date": 1428521340, "creation_date": 1428520815, "question_id": 29523505, "link": "https://stackoverflow.com/questions/29523505/binary-search-tree-insert-causing-a-stack-overflow-c", "title": "Binary Search Tree insert causing a stack overflow C++", "body": "<p>I am trying to insert values into a binary search tree.  I have a class for the leaves of the tree, and a class for the collection itself. Here is the class for the leaves: </p>\n\n<pre><code>template &lt;class K, class T&gt;\nclass BSTLeaf{\npublic:\n    BSTLeaf(const K&amp; k, const T&amp; c);\n    K key;\n    T data;\n    BSTLeaf * left;\n    BSTLeaf * right;\n    void insert(const K&amp; k, const T&amp; c);\nprivate:\n};\n</code></pre>\n\n<p>Here is the insert function for the other class that is working as intended:</p>\n\n<pre><code>template &lt;class K,class T&gt;\nvoid BSTKeyedCollection&lt;K,T&gt;::insert(const K&amp; k, const T&amp; c){\n    if(root != NULL){\n        cout &lt;&lt; \"trying to insert \" &lt;&lt; c &lt;&lt; endl;\n        root-&gt;insert(k,c);\n    }\n    else{\n        cout &lt;&lt; \"ROOT WAS NULL\" &lt;&lt; endl;\n        root = new BSTLeaf&lt;K,T&gt;(k,c);\n        cout &lt;&lt; \"The root node contains \" &lt;&lt; c &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>Here is the function that is causing the overflow:</p>\n\n<pre><code>template &lt;class K, class T&gt;\nvoid BSTLeaf&lt;K,T&gt;::insert(const K&amp; k, const T&amp; c){\n    //if the key is less than the node it comes to\n    if(k &lt; key){\n        if(left == NULL){\n            left = new BSTLeaf&lt;K,T&gt;(k,c);\n        }\n        else\n            insert(k,c);\n    }\n    if(k &gt; key){\n        if(right == NULL){\n            right = new BSTLeaf&lt;K,T&gt;(k,c);\n        }\n        else\n            insert(k,c);\n    }\n\n}\n</code></pre>\n\n<p>Not sure if the constructor would be helpful but here it is:</p>\n\n<pre><code>template &lt;class K,class T&gt;\nBSTLeaf&lt;K,T&gt;::BSTLeaf(const K&amp; k, const T&amp; c){\n    key = k;\n    data = c;\n    left = NULL;\n    right = NULL;\n};\n</code></pre>\n\n<p>We are allowed to assume that K will always be a type that &lt; and > will work for so that is not an issue. The function will insert a value at the root, insert one more value, and then overflow.  Thanks in advance for the help!</p>\n"}, {"tags": ["c++", "this", "operator-keyword"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 4134238, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/7eaa006c6b2cb85760006a53a52b4947?s=128&d=identicon&r=PG&f=1", "display_name": "Treck", "link": "https://stackoverflow.com/users/4134238/treck"}, "edited": false, "score": 0, "creation_date": 1428522728, "post_id": 29523566, "comment_id": 47202576, "body": "Yeah, that&#39;s the answer. Thank you very much."}], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1428520974, "creation_date": 1428520974, "answer_id": 29523566, "question_id": 29523490, "link": "https://stackoverflow.com/questions/29523490/using-overloaded-input-operator-with-this-pointer/29523566#29523566", "title": "Using overloaded input operator with this pointer", "body": "<p>Since you <code>operator &gt;&gt;()</code> takes a <code>Zadanie</code> you can use <code>plik &gt;&gt; *this;</code>.  <code>*this</code> dereferences the pointer and gives you the underlying object.</p>\n"}, {"owner": {"reputation": 6248, "user_id": 3191481, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lbaOV.png?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/3191481/edward"}, "is_accepted": false, "score": 0, "last_activity_date": 1428521175, "creation_date": 1428521175, "answer_id": 29523618, "question_id": 29523490, "link": "https://stackoverflow.com/questions/29523490/using-overloaded-input-operator-with-this-pointer/29523618#29523618", "title": "Using overloaded input operator with this pointer", "body": "<p>You must refer to <code>*this</code>:</p>\n\n<pre><code>    if(plik.good())\n        plik &gt;&gt; *this;\n</code></pre>\n\n<p>Alternatively, call the operator explicitly:</p>\n\n<pre><code>    if(plik.good())\n        operator&gt;&gt;(plik, *this);\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 4134238, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/7eaa006c6b2cb85760006a53a52b4947?s=128&d=identicon&r=PG&f=1", "display_name": "Treck", "link": "https://stackoverflow.com/users/4134238/treck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 29523566, "answer_count": 2, "score": 2, "last_activity_date": 1428521175, "creation_date": 1428520775, "question_id": 29523490, "link": "https://stackoverflow.com/questions/29523490/using-overloaded-input-operator-with-this-pointer", "title": "Using overloaded input operator with this pointer", "body": "<p>I couldn't find answer to my question, so here it goes. I created class with overloaded >> operator. Later in code, I've got a method which uses the same code, so I wanted to use overloaded operator with this pointer, but it seems it's not that easy. I wonder what's the problem here and how to solve it in elegant form.</p>\n\n<p>Code:</p>\n\n<pre><code>class Zadanie\n{\n    int rozmiar;\n    vector&lt;int&gt; dane;\npublic:\n\nZadanie(int _rozmiar = 0)\n{\n    rozmiar = _rozmiar;\n    dane.reserve(rozmiar);\n}\n\nint getRozmiar()              { return rozmiar; }\nvoid setRozmiar(int _rozmiar) { rozmiar = _rozmiar;}\n\nfriend istream &amp; operator &gt;&gt; (istream &amp; StrmWe, Zadanie &amp; zadanie)\n{\n    StrmWe &gt;&gt; zadanie.rozmiar;\n    for(int i = 0 ; i &lt; zadanie.rozmiar; i++)\n    {\n        int tmp;\n        StrmWe &gt;&gt; tmp;\n        zadanie.dane.push_back(tmp);\n    }\n\n    return StrmWe;\n}\n\nvoid WczytajDaneZPliku()\n{\n    const char* filepath = \"data0.txt\";\n    ifstream plik(filepath);\n    //plik.open(filepath, ios::in);\n\n    if(plik.good())\n        plik &gt;&gt; this;\n\n    plik.close();\n}\n</code></pre>\n\n<p>};</p>\n\n<p>Error: no match for 'operator>>' (operand types are 'std::ifstream {aka std::basic_ifstream}' and 'Zadanie* const')</p>\n\n<p>I'm looking forward for someone, who will reveal this mystery for me.</p>\n"}, {"tags": ["c++", "inheritance", "interface", "abstract-class", "pure-virtual"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1428520470, "post_id": 29523346, "comment_id": 47201257, "body": "Although C++ does not support it, contravariance would require a parameter that is less specific than <code>Parent*</code>, not more specific. The point is that you can use <code>Parent</code> and not know about <code>Child</code>. Passing a <code>Parent*</code> that is not a <code>Child*</code> would break things."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1428520941, "post_id": 29523346, "comment_id": 47201522, "body": "Your design is wrong. It should be `virtual Parent* OverrideMe(Child* func) = 0; (with a forward to Child). Still, it is ugly. You may make Parent and Child derived from some Node  (avoiding the inheritance from Parent to Child)."}], "answers": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": false, "score": 3, "last_activity_date": 1428520478, "creation_date": 1428520478, "answer_id": 29523411, "question_id": 29523346, "link": "https://stackoverflow.com/questions/29523346/override-function-that-return-base-type/29523411#29523411", "title": "Override function that return base type", "body": "<p>The type of the function parameter and the function's cv qualifiers have to be the same. So you can use</p>\n\n<pre><code>Child* OverrideMe(Parent* func) override;\n</code></pre>\n"}, {"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "is_accepted": false, "score": 2, "last_activity_date": 1428520480, "creation_date": 1428520480, "answer_id": 29523412, "question_id": 29523346, "link": "https://stackoverflow.com/questions/29523346/override-function-that-return-base-type/29523412#29523412", "title": "Override function that return base type", "body": "<p>You aren't overriding here because your <code>OverrideMe</code> function doesn't take in the same arguments as the function in the base class you are trying to override:</p>\n\n<pre><code>class Parent\n{\n    public:\n        virtual Parent* OverrideMe(Parent* func) = 0;\n};\n\nclass Child : public Parent\n{\n    public:\n        virtual Child* OverrideMe(Parent* func) override;\n};\n</code></pre>\n"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 0, "last_activity_date": 1428521063, "creation_date": 1428521063, "answer_id": 29523587, "question_id": 29523346, "link": "https://stackoverflow.com/questions/29523346/override-function-that-return-base-type/29523587#29523587", "title": "Override function that return base type", "body": "<p>This \"smells bad\", in other words, you are \"breaking\" the normal \"any object should be replaceable with any other object that is derived from it\". </p>\n\n<p>If you have an interface function in the base-class, then the function should take the same type throughout the class hierarchy. </p>\n\n<p>So the correct thing is to:</p>\n\n<p>Parent* OverrideMe(Parent* func) override;</p>\n\n<p>(You could, as juanchopanza says, return a derived type, but are you sure that the parent returned value will ALWAYS be the same class? To me, this looks like the type of function that could potentially return \"any derived object\", in which case you'd either be lying or end up with \"Interesting effects\")</p>\n\n<p>If for some reason this doesn't actually \"work\" in your case, then you probably shouldn't be using inheritance in this way.</p>\n"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1428521151, "creation_date": 1428521151, "answer_id": 29523613, "question_id": 29523346, "link": "https://stackoverflow.com/questions/29523346/override-function-that-return-base-type/29523613#29523613", "title": "Override function that return base type", "body": "<p>If C++ had full covariance and contravariance support, the correct relationship would be <strong>contravariant</strong> in input and <strong>covariant</strong> in output. Namely:</p>\n\n<pre><code>struct Organism { };\n\nstruct Animal : Organism {\n    virtual Animal* OverrideMe(Animal* ) = 0;\n};\n\nstruct Dog : Aniaml {\n    Dog* OverrideMe(Organism* ) override { ... }\n    \u2191\u2191\u2191             \u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\n    covariant       contravariant\n};\n</code></pre>\n\n<p>It seems a little unintuitive, but it does make sense. If you are expecting a <code>Animal*</code>, you should be able to handle anything that is a <code>Animal*</code> (of which a <code>Dog*</code> qualifies). Conversely, if you are doing some operation on a <code>Animal*</code>, you just need an operation that can take a <code>Animal*</code> - and an operation that takes an <code>Organism*</code> qualifies on that front. </p>\n\n<p>Note that if the input was <strong>co</strong>variant, that would break the type system. Consider something like;</p>\n\n<pre><code>Animal* a = new Dog;\na-&gt;OverrideMe(new Cat);\n</code></pre>\n\n<p>If <code>Dog::OverrideMe</code> were allowed to take a <code>Dog*</code>, that would fail - a <code>Cat*</code> is not a <code>Dog*</code>! So it is allowed to take an <code>Animal*</code> ... or anything more generic than that (e.g. <code>Organism*</code>), since all of those work fine.</p>\n\n<p>C++ does <strong>not</strong> have support for contravariance in input, only <strong>covariance</strong> in output. So you could write either:</p>\n\n<pre><code>Dog* OverrideMe(Animal* ) override { ... }\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>Animal* OverrideMe(Animal* ) override { .... }\n</code></pre>\n\n<p>but nothing else.</p>\n"}], "owner": {"reputation": 743, "user_id": 1107727, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ca78cc71e6c28a3a847cb3675bd3c301?s=128&d=identicon&r=PG", "display_name": "benderto", "link": "https://stackoverflow.com/users/1107727/benderto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 982, "favorite_count": 1, "accepted_answer_id": 29523613, "answer_count": 4, "score": 2, "last_activity_date": 1428521151, "creation_date": 1428520283, "question_id": 29523346, "link": "https://stackoverflow.com/questions/29523346/override-function-that-return-base-type", "title": "Override function that return base type", "body": "<p>I have two classes. Base class <code>Parent</code> and derived class <code>Child</code>. Class <code>Parent</code> has pure virtual function that returns its class type. How can I override it in derived class?</p>\n\n<pre><code>class Parent\n{\n    public:\n        virtual Parent* OverrideMe(Parent* func) = 0;\n};\n\nclass Child : public Parent\n{\n    public:\n        Child* OverrideMe(Child* func) override;\n};\n</code></pre>\n\n<p>I tried <code>Child* OverrideMe(Child* func) override;</code> but I end up with error that it does not override a base class member.</p>\n"}, {"tags": ["c++", "opencv", "bounding-box", "object-detection"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1428520336, "post_id": 29523177, "comment_id": 47201184, "body": "test for intersection: cv::Rect intersect = rect1 &amp;&amp; rect2; combine: if(intersection.width) combination = rect1 || rect2;"}, {"owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1428520599, "post_id": 29523177, "comment_id": 47201329, "body": "@Micka but that requires you to go through N rectangles N times each. For a small N that&#39;s fine. But empirically I&#39;ve found that the quadratic running time ends up making that slower than my solution below when you get a larger N"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1428521396, "post_id": 29523177, "comment_id": 47201787, "body": "thats obviously true! you can partition the space (similar to your answer) but that will be slow for smaller numbers and might use more memory."}, {"owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1428521513, "post_id": 29523177, "comment_id": 47201869, "body": "@Micka Also feasible. Part of why I posted this though was because it&#39;s also fairly lightweight and simple to implement. Once you get into partitioning and whatnot things tend to snowball"}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1428536895, "post_id": 29523177, "comment_id": 47208823, "body": "@marcman I think that to make this post more valuable, you should specify better 1) What do you mean by merging 2 rectangles, especially in term of result: do you want only the intersection, or the sum of the areas, or the min x0 and y0 (top corne r coordinates) and max x1 and y1 (bottom corner coordinates)? 2) What is that you mean by &quot;too complex&quot;? Too complicated, too expensive in term of processing? 3) Why your special solution is more suitable? Does it depend on the kind of input data you have? If yes, please describe more in detail your input data."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1428537169, "post_id": 29523177, "comment_id": 47208910, "body": "Regarding my comment of before, is one pixel overlap considered overlap?"}, {"owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "reply_to_user": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1428593436, "post_id": 29523177, "comment_id": 47237213, "body": "@Antonio one pixel is considered overlap, but you can account for that with that scale factor in the code. If you want to make 10 pixels the minimum overlaps just make the scaleFactor a Size(-5,-5) and both bounding boxes shrink by 5 pixels north/south and east/west (of course this is chessboard distance overlap, so diagonals are slightly different)"}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1428595325, "post_id": 29523177, "comment_id": 47238618, "body": "@marcman Thanks for the update! I was wondering about another case, by the way mentioned in your comment to your own answer: let&#39;s say at the beginning there&#39;s an isolated rectangle, no overlap with any of the other rectangles. Then, by merging 2 other rectangles, you obtain a rectangle that overlaps with the initially isolated rectangle. Should this rectangle merged with the other two? Because I think indeed that&#39;s a flaw with your solution, but reasonably you can do a second pass with another algorithm that doesn&#39;t draw the rectangles, it should be feasible at that point with less rectangles"}, {"owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "reply_to_user": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1428599045, "post_id": 29523177, "comment_id": 47240832, "body": "@Antonio you&#39;re right that is a flaw. I also see a second pass as the easiest fix, but as you pointed out, there are probably other, more efficient ways as well."}], "answers": [{"comments": [{"owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "edited": false, "score": 0, "creation_date": 1428520478, "post_id": 29523178, "comment_id": 47201259, "body": "One bug is that you can still end up with a bounding box inside a bigger one if the internal rectangle is disjoint from two others being merged. For example, if the TR, BR, BL quadrants in a 2D XY plane are filled, and there&#39;s a small object in the TL quadrant that&#39;s not connected. The result will be a rectangle around the entire plane, as well as a distinct one inside the TL quadrant. One fix is to call this function again, but then it&#39;s easy to start spiraling..."}, {"owner": {"reputation": 4857, "user_id": 1872540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMUNR.png?s=128&g=1", "display_name": "LovaBill", "link": "https://stackoverflow.com/users/1872540/lovabill"}, "edited": false, "score": 0, "creation_date": 1428592461, "post_id": 29523178, "comment_id": 47236483, "body": "I may suggest a much faster and lighter way. First, group all associated boxes using their pairwise overlap (operator &amp;). For each group of boxes, find the min and max for axes x and y. The results are same with yours but the method is not cpu heavy."}, {"owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "reply_to_user": {"reputation": 4857, "user_id": 1872540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMUNR.png?s=128&g=1", "display_name": "LovaBill", "link": "https://stackoverflow.com/users/1872540/lovabill"}, "edited": false, "score": 1, "creation_date": 1428593117, "post_id": 29523178, "comment_id": 47236959, "body": "@William how do you group associated boxes efficiently? Assuming you all you have is a vector of bounding boxes, how can you do that faster than O(N^2) time? I mentioned in a comment above, I haven&#39;t done analysis on my solution, but empirically it runs faster than comparing every <code>Rect</code> to every other"}, {"owner": {"reputation": 4857, "user_id": 1872540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMUNR.png?s=128&g=1", "display_name": "LovaBill", "link": "https://stackoverflow.com/users/1872540/lovabill"}, "edited": false, "score": 0, "creation_date": 1428594555, "post_id": 29523178, "comment_id": 47238066, "body": "I like what <a href=\"https://sites.google.com/site/wujx2001/home/c4\" rel=\"nofollow noreferrer\">C4 detector</a> does. Check function <code>void PostProcess()</code> in Pedestrian_ICRA.cpp. Unfortunately, he uses his own class and needs some extra work to use cv::Rect instead."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1428595679, "post_id": 29523178, "comment_id": 47238846, "body": "I do not understand the use of scaleFactor. I would expect a scale factor to be a multiplication term... Here you are only translating rectangles..."}, {"owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "reply_to_user": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 1, "creation_date": 1428598770, "post_id": 29523178, "comment_id": 47240686, "body": "@Antonio The list of operations on <code>rect</code> can be found <a href=\"http://docs.opencv.org/modules/core/doc/basic_structures.html#rect\" rel=\"nofollow noreferrer\">here</a>. +/- a <code>cv::Point()</code> does translations. +/- a cv::Size() will enlarge or shrink a <code>rect</code>. I had to test it to be sure too though"}], "owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "is_accepted": true, "score": 2, "last_activity_date": 1428519757, "creation_date": 1428519757, "answer_id": 29523178, "question_id": 29523177, "link": "https://stackoverflow.com/questions/29523177/opencv-merging-overlapping-rectangles/29523178#29523178", "title": "OpenCV: Merging overlapping rectangles", "body": "<pre><code>void mergeOverlappingBoxes(std::vector&lt;cv::Rect&gt; &amp;inputBoxes, cv::Mat &amp;image, std::vector&lt;cv::Rect&gt; &amp;outputBoxes)\n{\n    cv::Mat mask = cv::Mat::zeros(image.size(), CV_8UC1); // Mask of original image\n    cv::Size scaleFactor(10,10); // To expand rectangles, i.e. increase sensitivity to nearby rectangles. Doesn't have to be (10,10)--can be anything\n    for (int i = 0; i &lt; inputBoxes.size(); i++)\n    {\n        cv::Rect box = inputBoxes.at(i) + scaleFactor;\n        cv::rectangle(mask, box, cv::Scalar(255), CV_FILLED); // Draw filled bounding boxes on mask\n    }\n\n    std::vector&lt;std::vector&lt;cv::Point&gt;&gt; contours;\n    // Find contours in mask\n    // If bounding boxes overlap, they will be joined by this function call\n    cv::findContours(mask, contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);\n    for (int j = 0; j &lt; contours.size(); j++)\n    {\n        outputBoxes.push_back(cv::boundingRect(contours.at(j)));\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7769, "favorite_count": 5, "accepted_answer_id": 29523178, "answer_count": 1, "score": 5, "last_activity_date": 1428592931, "creation_date": 1428519757, "last_edit_date": 1495535560, "question_id": 29523177, "link": "https://stackoverflow.com/questions/29523177/opencv-merging-overlapping-rectangles", "title": "OpenCV: Merging overlapping rectangles", "body": "<p>In using OpenCV for detection tasks I keep running into the problem of merging overlapping bounding boxes; that is, essentially finding the bounding box around the union of two overlapping bounding boxes. This comes up a lot in object detection when, for some reason, the object of interest gets fractured into a number of bounding boxes, rather than one all-encompassing one.</p>\n\n<p>There are a few answers on StackOverflow for algorithmic solutions and helpful external libraries (e.g. <a href=\"https://stackoverflow.com/questions/7727758/find-overlapping-rectangles-algorithm\">this</a>, <a href=\"https://stackoverflow.com/questions/8460688/efficiently-group-overlapping-rectangles\">this</a>, <a href=\"https://stackoverflow.com/questions/2755459/merging-and-splitting-overlapping-rectangles-to-produce-non-overlapping-ones\">this</a>), and there's also the <a href=\"http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html#grouprectangles\" rel=\"nofollow noreferrer\"><code>groupRectangles</code></a> function provided by OpenCV (and the litany of associated questions/bugs: <a href=\"https://stackoverflow.com/questions/21421070/opencv-grouprectangles-getting-grouped-and-ungrouped-rectangles\">this</a>, <a href=\"https://stackoverflow.com/questions/23378932/undocumented-grouprectangles-variants-in-opencv\">this</a>, etc).</p>\n\n<p>I seem to find that the aforementioned solutions are a bit overly complex for the task I'm trying to perform. A lot of the algorithmic solutions solve this problem from a mathematical perspective (more like a thought experiment), while doing operations like <code>rect1 | rect2</code> can get really slow when the number of rectangles is high (it's O(N^2) to handle everything) and <code>groupRectangles</code> has some quirks that make it only partially effective. So I came up with a somewhat hackish solution that actually works pretty effectively. I thought I'd share it below for anyone else who needs a quick fix for this common problem.</p>\n\n<p>Feel free to comment and critique it.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 1374, "user_id": 3398271, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c998619fa2ed255eec79fed92f3c2edd?s=128&d=identicon&r=PG&f=1", "display_name": "Attilio", "link": "https://stackoverflow.com/users/3398271/attilio"}, "edited": false, "score": 0, "creation_date": 1428520575, "post_id": 29523142, "comment_id": 47201316, "body": "Are you on Linux or Windows? Maybe check what the error code means in general, and see if it makes sense in your situation."}, {"owner": {"reputation": 23728, "user_id": 299399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1907f4968c4c5b5fedb8f7cba422a032?s=128&d=identicon&r=PG", "display_name": "Frank Osterfeld", "link": "https://stackoverflow.com/users/299399/frank-osterfeld"}, "edited": false, "score": 0, "creation_date": 1428527441, "post_id": 29523142, "comment_id": 47205151, "body": "ShellExecute suggests you&#39;re on Windows. Which Qt version is that?"}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1428545142, "post_id": 29523142, "comment_id": 47211098, "body": "Try calling <code>ShellExecute()</code> directly and see if you get the same error code.  If so, it could be that your machine is configured incorrectly."}], "answers": [{"owner": {"reputation": 1643, "user_id": 3424163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/715b445ad1eebe39c58e11150888f2ed?s=128&d=identicon&r=PG&f=1", "display_name": "trivelt", "link": "https://stackoverflow.com/users/3424163/trivelt"}, "is_accepted": true, "score": 2, "last_activity_date": 1428560661, "creation_date": 1428560661, "answer_id": 29531247, "question_id": 29523142, "link": "https://stackoverflow.com/questions/29523142/qt-opening-urls/29531247#29531247", "title": "Qt - opening url&#39;s", "body": "<p>ShellExcecute Error 31 means <code>SE_ERR_NOASSOC</code> - there is no application associated with the given file name extension. Are you sure that your system configuration is correct? Did you try to use <code>openUrl</code> with other type of files (for example some local files)? </p>\n"}], "owner": {"reputation": 1887, "user_id": 4650497, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/KlOcy.png?s=128&g=1", "display_name": "Krzysztof Majewski", "link": "https://stackoverflow.com/users/4650497/krzysztof-majewski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 29531247, "answer_count": 1, "score": 1, "last_activity_date": 1428560661, "creation_date": 1428519638, "question_id": 29523142, "link": "https://stackoverflow.com/questions/29523142/qt-opening-urls", "title": "Qt - opening url&#39;s", "body": "<p>I have a problem with opening url using Qt.</p>\n\n<p>I have a Dialog with a PushButton on it and the clicked() slot:</p>\n\n<pre><code>void Dialog::on_pushButton_clicked()\n{\n    QDesktopServices::openUrl(QUrl(\"http://www.google.com\"));\n}\n</code></pre>\n\n<p>But when I click it I get an error:</p>\n\n<pre><code>ShellExecute 'http://www.google.com' failed (error 31)\n</code></pre>\n\n<p>What am i doing wrong?</p>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 2, "creation_date": 1428519659, "post_id": 29523130, "comment_id": 47200769, "body": "Maybe you should go and ask this on a gentoo-user forum.   Ok, I&#39;ll show myself out now..."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1428526876, "post_id": 29523130, "comment_id": 47204854, "body": "Coverage code costs space and time.  You probably don&#39;t want them in production code."}], "answers": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 1, "last_activity_date": 1428823455, "creation_date": 1428823455, "answer_id": 29587052, "question_id": 29523130, "link": "https://stackoverflow.com/questions/29523130/is-there-any-side-effect-to-compile-production-code-with-gcc-debug-options/29587052#29587052", "title": "Is there any side effect to compile production code with gcc debug options?", "body": "<p><sup><em>Transferring a succinct comment as an answer so maybe there can be closure on the question.</em></sup></p>\n\n<p>Coverage code costs space and time. You probably don't want them in production code.</p>\n\n<p>Debug information isn't loaded normally; the cost is much smaller (basically, zero).</p>\n"}], "owner": {"reputation": 4733, "user_id": 1068497, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c20ce344a5b5edf654c9bdfb61b947?s=128&d=identicon&r=PG", "display_name": "swang", "link": "https://stackoverflow.com/users/1068497/swang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 1, "accepted_answer_id": 29587052, "answer_count": 1, "score": 4, "last_activity_date": 1428823455, "creation_date": 1428519587, "last_edit_date": 1495542247, "question_id": 29523130, "link": "https://stackoverflow.com/questions/29523130/is-there-any-side-effect-to-compile-production-code-with-gcc-debug-options", "title": "Is there any side effect to compile production code with gcc debug options?", "body": "<p>For gcc flags like --coverage, do they have any side effect, for example run time performance penalty?</p>\n\n<p>If not then can I just leave them in the common makefile and use them to build production code?</p>\n\n<p>Gcc document doesn't say anything about this.</p>\n\n<p>This question \n<a href=\"https://stackoverflow.com/questions/89603/how-does-the-debugging-option-g-change-the-binary-executable\">How Does The Debugging Option -g Change the Binary Executable?</a></p>\n\n<p>explains -g, but how about --coverage\uff1fI guess the answer is yes, the added instrument code must cost quite a bit at runtime </p>\n"}, {"tags": ["c++", "initialization", "operator-overloading", "eigen"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1428520108, "post_id": 29523119, "comment_id": 47201035, "body": "More than likely they have overloaded the <code>operator,()</code> to allow this."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1428520191, "post_id": 29523119, "comment_id": 47201088, "body": "Found <a href=\"http://eigen.tuxfamily.org/dox/CommaInitializer_8h_source.html\" rel=\"nofollow noreferrer\">this</a> source code."}], "answers": [{"owner": {"reputation": 780, "user_id": 4647583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed29ba29164901d431c9755a8fc9a14?s=128&d=identicon&r=PG", "display_name": "Otomo", "link": "https://stackoverflow.com/users/4647583/otomo"}, "is_accepted": false, "score": 2, "last_activity_date": 1428520249, "creation_date": 1428520249, "answer_id": 29523337, "question_id": 29523119, "link": "https://stackoverflow.com/questions/29523119/how-could-comma-separated-initialization-such-as-in-eigen-be-possibly-implemente/29523337#29523337", "title": "How could comma separated initialization such as in Eigen be possibly implemented in C++?", "body": "<p>The comma itself is an operator in c++ which can be overloaded (and apparently is by eigen). I don't know the exact way eigen implements the overloading but I am sure that you can search for the sources of eigen to look it up.</p>\n\n<p>To your little experient you have to understand how the <em>un</em>overloaded comma operator works in c++.</p>\n\n<p>The comma operator has the form <code>&lt;statement&gt;,&lt;statement&gt;</code> and is evaluated to whatever the <strong>second</strong> statement is evaluated to. The operator <code>&lt;&lt;</code> has a higher precedence than the operator <code>,</code>. Because of that the <code>cout</code> is evaluated before the rest of the comma operations are evaluated.</p>\n\n<p>Because <code>,</code> is Left-to-right associative the code <code>(1,2,3,4,5)</code> is equal to <code>((((1,2),3),4),5)</code> which evaluates to the most right value, which is <code>5</code>.</p>\n"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 20, "last_activity_date": 1547414623, "last_edit_date": 1547414623, "creation_date": 1428520478, "answer_id": 29523410, "question_id": 29523119, "link": "https://stackoverflow.com/questions/29523119/how-could-comma-separated-initialization-such-as-in-eigen-be-possibly-implemente/29523410#29523410", "title": "How could comma separated initialization such as in Eigen be possibly implemented in C++?", "body": "<p>The basic idea is to overload both the <code>&lt;&lt;</code> and the <code>,</code> operators.</p>\n\n<p><code>m &lt;&lt; 1</code> is overloaded to put <code>1</code> into <code>m</code> and then returns a special proxy object &ndash; call it <code>p</code> &ndash; holding a reference to <code>m</code>.</p>\n\n<p>Then <code>p, 2</code> is overloaded to put <code>2</code> into <code>m</code> and return <code>p</code>, so that <code>p, 2, 3</code> will first put <code>2</code> into <code>m</code> and then <code>3</code>.</p>\n\n<p>A similar technique is used with <a href=\"http://www.boost.org/doc/libs/1_57_0/libs/assign/doc/index.html\" rel=\"noreferrer\">Boost.Assign</a>, though they use <code>+=</code> rather than <code>&lt;&lt;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1428522797, "post_id": 29523508, "comment_id": 47202624, "body": "Why isn&#39;t the order maintained when overloading <code>operator,</code>? Isn&#39;t <code>m &lt;&lt; f(), g()</code> just a composition of operators, with strict rules of left-to-right evaluation?"}, {"owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 1, "creation_date": 1428522992, "post_id": 29523508, "comment_id": 47202759, "body": "@vsoftco: the order of evaluation is not guaranteed for overloaded version of <code>,</code>, of <code>&amp;&amp;</code> and of <code>||</code> (the only operators where the evaluation order is guaranteed for the native version). You should not confuse the evaluation order with associativity and precedence (that are of course maintained by overloaded versions). In other words may be <code>g()</code> will be called before <code>f()</code> but the value from <code>f()</code> will be inserted in the matrix before the value from <code>g()</code>."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1428523148, "post_id": 29523508, "comment_id": 47202863, "body": "Thanks, you&#39;re right, I realized that I was actually thinking about associativity."}], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 8, "last_activity_date": 1428523223, "last_edit_date": 1428523223, "creation_date": 1428520823, "answer_id": 29523508, "question_id": 29523119, "link": "https://stackoverflow.com/questions/29523119/how-could-comma-separated-initialization-such-as-in-eigen-be-possibly-implemente/29523508#29523508", "title": "How could comma separated initialization such as in Eigen be possibly implemented in C++?", "body": "<p>This is a possible simplified implementation</p>\n\n<pre><code>struct M3f {\n    double m[3][3];\n    struct Loader {\n        M3f&amp; m;\n        int i;\n        Loader(M3f&amp; m, int i) : m(m), i(i) {}\n        Loader operator , (double x) {\n            m.m[i/3][i%3] = x;\n            return Loader(m, i+1);\n        }\n    };\n    Loader operator&lt;&lt;(double x) {\n        m[0][0] = x;\n        return Loader(*this, 1);\n    }\n};\n</code></pre>\n\n<p>The idea is that <code>&lt;&lt;</code> returns a <code>Loader</code> instance that waits for second element, and each loader instance uses the comma operator to update the matrix and returns another loader instance.</p>\n\n<p>Note that overloading the comma operator is generally considered a bad idea because the most specific characteristic of the operator is strict left-to-right evaluation order. However when overloaded this is not guaranteed and for example in</p>\n\n<pre><code>m &lt;&lt; f(), g(), ...\n</code></pre>\n\n<p><code>g()</code> could end up being called before <code>f()</code>.</p>\n\n<p>Note that I'm talking about the evaluation order, not about associativity or precedence that are of course maintained also for overloaded versions.\nFor example <code>g()</code> could be called before <code>f()</code> but the result from <code>f()</code> is guaranteed to be correctly placed in the matrix before the result from <code>g()</code>.</p>\n"}], "owner": {"reputation": 5185, "user_id": 2540407, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/70244e2142d529ec009d23422d404ba1?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2540407/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2152, "favorite_count": 4, "accepted_answer_id": 29523410, "answer_count": 3, "score": 13, "last_activity_date": 1547414623, "creation_date": 1428519523, "question_id": 29523119, "link": "https://stackoverflow.com/questions/29523119/how-could-comma-separated-initialization-such-as-in-eigen-be-possibly-implemente", "title": "How could comma separated initialization such as in Eigen be possibly implemented in C++?", "body": "<p>Here's a part of Eigen documentation:</p>\n\n<pre><code>Matrix3f m;\nm &lt;&lt; 1, 2, 3,\n     4, 5, 6,\n     7, 8, 9;\nstd::cout &lt;&lt; m;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1 2 3\n4 5 6\n7 8 9\n</code></pre>\n\n<p>I couldn't understand how could all the comma separated values be captured by operator&lt;&lt; above. I did a tiny experiment:</p>\n\n<pre><code>cout &lt;&lt; \"Just commas: \";\ncout &lt;&lt; 1, 2, 3, 4, 5;\ncout &lt;&lt; endl;\ncout &lt;&lt; \"Commas in parentheses: \";\ncout &lt;&lt; ( 1, 2, 3, 4, 5 );\ncout &lt;&lt; endl;\n</code></pre>\n\n<p>Predictably (according to my understanding of C++ syntax) only one of the values was captured by operator&lt;&lt; :</p>\n\n<pre><code>Just commas: 1\nCommas in parentheses: 5\n</code></pre>\n\n<p>Thus the title question.</p>\n"}, {"tags": ["c++", "private"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1428519574, "post_id": 29523085, "comment_id": 47200732, "body": "Ummmmm....<code>getX()</code> and <code>getY()</code> would be a start."}, {"owner": {"reputation": 18084, "user_id": 2700898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3RkV.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2700898/matt"}, "edited": false, "score": 6, "creation_date": 1428519897, "post_id": 29523085, "comment_id": 47200898, "body": "Look up &quot;friend functions&quot;."}, {"owner": {"reputation": 14930, "user_id": 395718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f1323cdc2a70698b5275082bf6e61184?s=128&d=identicon&r=PG", "display_name": "Dialecticus", "link": "https://stackoverflow.com/users/395718/dialecticus"}, "edited": false, "score": 0, "creation_date": 1428521409, "post_id": 29523085, "comment_id": 47201798, "body": "Your teacher expects you to add friend declaration of <code>foo</code> function. In principle it is good for you to know that such feature exists, but it would be bad if you would use it where other alternatives exist (which is almost always). <code>getX()</code> is something that you should be using in the real world."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1428523545, "post_id": 29523085, "comment_id": 47203106, "body": "If <code>foo</code> must be external to the class, declare it as a <code>friend</code> to allow it access to private member&#39;s. A (arguably) better option would be to give <code>Box</code> <code>const</code>, <code>public</code> methods that return a copy of the <code>private</code> members (something like <code>getX()</code> and <code>getY()</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 848, "user_id": 2749867, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/273bdd4dd7bde6f613b34a807276661e?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Groen", "link": "https://stackoverflow.com/users/2749867/kevin-groen"}, "edited": false, "score": 0, "creation_date": 1428519854, "post_id": 29523134, "comment_id": 47200873, "body": "My teacher wrote this code. I know that it&#39;s written pretty poorly. The assignment is that I need to make the code work, by just adding code to that 1 single line. So creating a getX and getY method sounds great but that would force me to modify the rest of my code which I can&#39;t do.   Do you know how I can make the code work with JUST adding one line of code?"}], "owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "is_accepted": false, "score": 1, "last_activity_date": 1428519593, "creation_date": 1428519593, "answer_id": 29523134, "question_id": 29523085, "link": "https://stackoverflow.com/questions/29523085/private-class-attributes-in-c/29523134#29523134", "title": "Private class attributes in C++", "body": "<p>What are you trying to do? Do you want x and y to be modifiable? If not, add getX and getY methods that simply return the values from within the class. If you want them to be modifiable freely, drop the OO charade and just make them public, since there's no reason to try to protect them in that case.</p>\n"}, {"owner": {"reputation": 194, "user_id": 3927474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WZGK1.png?s=128&g=1", "display_name": "code1x1.de", "link": "https://stackoverflow.com/users/3927474/code1x1-de"}, "is_accepted": false, "score": 1, "last_activity_date": 1466199127, "last_edit_date": 1466199127, "creation_date": 1428520158, "answer_id": 29523299, "question_id": 29523085, "link": "https://stackoverflow.com/questions/29523085/private-class-attributes-in-c/29523299#29523299", "title": "Private class attributes in C++", "body": "<p>Do it with some get methods:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Box {\n    int x,y;\n\n    public:\n    Box(int xi, int yi) \n    {\n        x=xi;\n        y=yi;\n    }\n\n    //Insert line of code here\n    int Box::getx(){return x;}\n    int Box::gety(){return y;}\n}\n\nbool foo(Box l, Box r){\n    return (l.get()*l.gety())&gt;(r.getx()*r.gety());\n}\n\nint main(int argc, char* argv[])\n{\n   Box b1(3,4), b2(1,2);\n\n   if(foo(b1,b2)) {\n       cout &lt;&lt;\"b1&gt;b2\\n\";\n   }\n   return cin.get();\n}\n</code></pre>\n"}, {"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "is_accepted": true, "score": 4, "last_activity_date": 1428520220, "creation_date": 1428520220, "answer_id": 29523326, "question_id": 29523085, "link": "https://stackoverflow.com/questions/29523085/private-class-attributes-in-c/29523326#29523326", "title": "Private class attributes in C++", "body": "<p>There are a lot of options here. If you are only allowed to add one line, you could make <code>foo</code> a friend function:</p>\n\n<pre><code>friend bool foo(Box l, Box r);\n</code></pre>\n\n<p>Getters are probably a better option, and you could make <code>foo</code> a static function as well, but that would take three lines (adding <code>Box::</code> in front of <code>foo</code> in the definition and in main where it is called).</p>\n"}], "owner": {"reputation": 848, "user_id": 2749867, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/273bdd4dd7bde6f613b34a807276661e?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Groen", "link": "https://stackoverflow.com/users/2749867/kevin-groen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "accepted_answer_id": 29523326, "answer_count": 3, "score": 0, "last_activity_date": 1466199127, "creation_date": 1428519392, "last_edit_date": 1428525023, "question_id": 29523085, "link": "https://stackoverflow.com/questions/29523085/private-class-attributes-in-c", "title": "Private class attributes in C++", "body": "<p>I'm currently reviewing a course from school and I've run against this question.</p>\n\n<p>The problem with the following code is that the attributes <code>x</code> and <code>y</code> for my <code>Box</code> class are private so can't be accessed by the <code>Foo</code> method. Still the course isn't as nice as to tell me <em>why</em> that is so I decided to ask the fine people of stackoverflow. </p>\n\n<p>What code on the <code>//Insert line of code here</code> below should be added to make my current program run?  </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Box {\n    int x,y;\n\n    public:\n    Box(int xi, int yi) \n    {\n        x=xi;\n        y=yi;\n    }\n\n    //Insert line of code here\n}\n\nbool foo(Box l, Box r){\n    return (l.x*l.y)&gt;(r.x*r.y);\n}\n\nint main(int argc, char* argv[])\n{\n   Box b1(3,4), b2(1,2);\n\n   if(foo(b1,b2)) {\n       cout &lt;&lt;\"b1&gt;b2\\n\";\n   }\n   return cin.get();\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++11"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1428518686, "post_id": 29522800, "comment_id": 47200189, "body": "<code>&amp;hello&lt;A&lt;decltype(a)&gt;&gt;</code> ?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1428518813, "post_id": 29522800, "comment_id": 47200275, "body": "@Borgleader: That&#39;s not quite right, the template parameter to <code>hello</code> would be the <code>int</code>, but there&#39;s no way to get <code>int</code> from <code>a</code> with the code as-is."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428518945, "post_id": 29522800, "comment_id": 47200376, "body": "This is equivalent to &quot;deducing which overload a set of parameters would bind to&quot;, which is, quite sadly, impossible in C++14. (I hear rumors they&#39;re adding something to C++17 for this)"}, {"owner": {"reputation": 8150, "user_id": 406009, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3au2T.jpg?s=128&g=1", "display_name": "Lalaland", "link": "https://stackoverflow.com/users/406009/lalaland"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428518979, "post_id": 29522800, "comment_id": 47200394, "body": "@MooingDuck What if a typedef was added to A so that a::type was int?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 8150, "user_id": 406009, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3au2T.jpg?s=128&g=1", "display_name": "Lalaland", "link": "https://stackoverflow.com/users/406009/lalaland"}, "edited": false, "score": 0, "creation_date": 1428519031, "post_id": 29522800, "comment_id": 47200422, "body": "@Lalaland: I assumed we couldn&#39;t make use of the fact that we knew <code>a</code> to be an <code>A</code>.  If we <i>can</i> assume that, then yes, that typedef would make it possible."}, {"owner": {"reputation": 57743, "user_id": 1090079, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uWGaU.png?s=128&g=1", "display_name": "Filip Ros&#233;en - refp", "link": "https://stackoverflow.com/users/1090079/filip-ros%c3%a9en-refp"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428519156, "post_id": 29522800, "comment_id": 47200490, "body": "@MooingDuck why would it be <i>&quot;impossible&quot;</i>? I can think of a few ways to get it working (some nicer than others)."}, {"owner": {"reputation": 111, "user_id": 4765519, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ui1h-lrUfao/AAAAAAAAAAI/AAAAAAAASsg/DjfDxVZhcCA/photo.jpg?sz=128", "display_name": "Javier Cabezas Rodr&#237;guez", "link": "https://stackoverflow.com/users/4765519/javier-cabezas-rodr%c3%adguez"}, "reply_to_user": {"reputation": 8150, "user_id": 406009, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3au2T.jpg?s=128&g=1", "display_name": "Lalaland", "link": "https://stackoverflow.com/users/406009/lalaland"}, "edited": false, "score": 2, "creation_date": 1428519211, "post_id": 29522800, "comment_id": 47200523, "body": "@Lalaland: parameters could be anything, not necessarily a class or class template."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 57743, "user_id": 1090079, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uWGaU.png?s=128&g=1", "display_name": "Filip Ros&#233;en - refp", "link": "https://stackoverflow.com/users/1090079/filip-ros%c3%a9en-refp"}, "edited": false, "score": 1, "creation_date": 1428519552, "post_id": 29522800, "comment_id": 47200720, "body": "@FilipRos&#233;en-refp: There are ways to get the <i>return type</i>, but to get the address, you need to know the parameters <i>after</i> implicit conversions, and there is no way to do this in C++.  (If you find a counterexample, that would be groundbreaking, and I would be thrilled to see it)  (Related, I&#39;m thinking about <a href=\"http://coliru.stacked-crooked.com/a/2f58e4fd99be5f55\" rel=\"nofollow noreferrer\">the general case</a>.  In <i>this</i> case it <i>might</i> be possible because there&#39;s only one template function, with no overloads, or conversions)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1428519679, "post_id": 29522800, "comment_id": 47200780, "body": "@MooingDuck Not even C++17. We do get invocation type traits in the library fundamentals TS, but they only work on function objects, not generic overload sets."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428520000, "post_id": 29522800, "comment_id": 47200969, "body": "@JavierCabezasRodr&#237;guez: Is <a href=\"http://coliru.stacked-crooked.com/a/a5012043f29f790c\" rel=\"nofollow noreferrer\">this</a> a clearer example of what you&#39;re trying to accomplish?"}, {"owner": {"reputation": 8790, "user_id": 1261432, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3cd64a8b152ef096abdd8d03925bf34?s=128&d=identicon&r=PG&f=1", "display_name": "Synxis", "link": "https://stackoverflow.com/users/1261432/synxis"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428520139, "post_id": 29522800, "comment_id": 47201059, "body": "@MooingDuck I don&#39;t see what you find &quot;impossible&quot;, getting the address of a template function instantiation is definitely possible..."}, {"owner": {"reputation": 57743, "user_id": 1090079, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uWGaU.png?s=128&g=1", "display_name": "Filip Ros&#233;en - refp", "link": "https://stackoverflow.com/users/1090079/filip-ros%c3%a9en-refp"}, "reply_to_user": {"reputation": 8790, "user_id": 1261432, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3cd64a8b152ef096abdd8d03925bf34?s=128&d=identicon&r=PG&f=1", "display_name": "Synxis", "link": "https://stackoverflow.com/users/1261432/synxis"}, "edited": false, "score": 0, "creation_date": 1428520247, "post_id": 29522800, "comment_id": 47201122, "body": "@Synxis see the added snippet that he just added/linked."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 8790, "user_id": 1261432, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3cd64a8b152ef096abdd8d03925bf34?s=128&d=identicon&r=PG&f=1", "display_name": "Synxis", "link": "https://stackoverflow.com/users/1261432/synxis"}, "edited": false, "score": 0, "creation_date": 1428520302, "post_id": 29522800, "comment_id": 47201158, "body": "@Synxis: Can you fill out the <code>get_foo_ptr</code> function for me then? <a href=\"http://coliru.stacked-crooked.com/a/a5012043f29f790c\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/a5012043f29f790c</a>   You can get the address of a template function instantiation just fine.  Easy.  As you show in your example.  What you cannot do is get the address of a function that would be called after overload resolution.  If he&#39;s asking for the prior, then it&#39;s doable, and your answer is correct.  If he&#39;s asking for the latter, it&#39;s not doable, and hvd&#39;s answer is correct.  As it is, the question is too vague to be certain."}, {"owner": {"reputation": 57743, "user_id": 1090079, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uWGaU.png?s=128&g=1", "display_name": "Filip Ros&#233;en - refp", "link": "https://stackoverflow.com/users/1090079/filip-ros%c3%a9en-refp"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428520303, "post_id": 29522800, "comment_id": 47201160, "body": "@MooingDuck ah yeah, I was thinking of the simple example provided by <i>OP</i> (which is solvable with relative ease) - thanks for the elaboration."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428520397, "post_id": 29522800, "comment_id": 47201217, "body": "Since the OP said he &quot;would like the types to be inferred by the compiler&quot; (in a deleted comment), I inferred the latter.  @JavierCabezasRodr&#237;guez: Can you clarify the question as to what we can and can&#39;t assume about the parameters when trying to get the pointer?"}, {"owner": {"reputation": 8790, "user_id": 1261432, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3cd64a8b152ef096abdd8d03925bf34?s=128&d=identicon&r=PG&f=1", "display_name": "Synxis", "link": "https://stackoverflow.com/users/1261432/synxis"}, "edited": false, "score": 0, "creation_date": 1428520489, "post_id": 29522800, "comment_id": 47201264, "body": "Ah I see. I really didn&#39;t read the question like you did, gonna see it deeper now."}, {"owner": {"reputation": 8790, "user_id": 1261432, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3cd64a8b152ef096abdd8d03925bf34?s=128&d=identicon&r=PG&f=1", "display_name": "Synxis", "link": "https://stackoverflow.com/users/1261432/synxis"}, "edited": false, "score": 0, "creation_date": 1428527044, "post_id": 29522800, "comment_id": 47204962, "body": "Finally deleted my answer, as it was a bit too narrow. In the general case, getting the address of function with inferred argument types is not possible, even in the case of template function (because first not all parameters are templated, and second because you can use &#39;advanced&#39; pattern matching with templates). Can you add an example of what you&#39;re trying to achieve ?"}, {"owner": {"reputation": 57743, "user_id": 1090079, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uWGaU.png?s=128&g=1", "display_name": "Filip Ros&#233;en - refp", "link": "https://stackoverflow.com/users/1090079/filip-ros%c3%a9en-refp"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1430070345, "post_id": 29522800, "comment_id": 47886431, "body": "@MooingDuck See <a href=\"http://b.atch.se/posts/non-constant-constant-expressions/\" rel=\"nofollow noreferrer\">this blog post</a>, using the technique a solution should be possible to implement."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1428519534, "post_id": 29523073, "comment_id": 47200710, "body": "Might want to explain that <code>+</code>. It&#39;s a bit obscure."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1428524578, "post_id": 29523073, "comment_id": 47203654, "body": "The pointer to lambda does not have the same effect as hello if copying <code>A&lt;int&gt;</code> has any side effects.  If you move, then if the move ctor has side effects (or if <code>hello</code> treats rvalues differently) it won&#39;t have the same effect.  If <code>hello</code> takes by-reference, any changes done to the objects won&#39;t be propagated out in the lambda solution.  All of these basically require inspecting the implementation of the function template <code>hello</code> and its signature to the level that you might as well do it all manually, no?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1428525167, "post_id": 29523073, "comment_id": 47203953, "body": "@Yakk You know how you want to call <code>hello</code>, so you can update the lambda to match, without having to know the implementation details of <code>hello</code>. If you know you&#39;ll want to pass lvalues, write <code>auto callable = +[](A&lt;int&gt; &amp;a, A&lt;int&gt; &amp;b) { return hello(a, b); };</code>. It&#39;ll work even if <code>hello</code> takes by value. Similarly rvalues, except for an added <code>std::move</code>: that too will work even if <code>hello</code> takes by value. But you do raise a valid point: there are some situations in which copies or moves of the parameters have a visible effect and in which that cannot be avoided."}], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": false, "score": 8, "last_activity_date": 1428519632, "last_edit_date": 1428519632, "creation_date": 1428519352, "answer_id": 29523073, "question_id": 29522800, "link": "https://stackoverflow.com/questions/29522800/is-it-possible-to-obtain-the-address-of-a-implicit-instantiation-of-a-function-t/29523073#29523073", "title": "Is it possible to obtain the address of a implicit instantiation of a function template?", "body": "<p>The process of determining the function to call based on the arguments is called overload resolution, and the standard lists in which cases it gets used:</p>\n\n<blockquote>\n  <p><strong>13.3 Overload resolution [over.match]</strong></p>\n  \n  <p>2 Overload resolution selects the function to call in seven distinct contexts within the language:</p>\n  \n  <p>(2.1) -- invocation of a function named in the function call syntax (13.3.1.1.1);</p>\n  \n  <p>(2.2) -- invocation of a function call operator, a pointer-to-function conversion function, a reference-to-pointer-to-function conversion function, or a reference-to-function conversion function on a class object named\n  in the function call syntax (13.3.1.1.2);</p>\n  \n  <p>(2.3) -- invocation of the operator referenced in an expression (13.3.1.2);</p>\n  \n  <p>(2.4) -- invocation of a constructor for direct-initialization (8.5) of a class object (13.3.1.3);</p>\n  \n  <p>(2.5) -- invocation of a user-defined conversion for copy-initialization (8.5) of a class object (13.3.1.4);</p>\n  \n  <p>(2.6) -- invocation of a conversion function for initialization of an object of a nonclass type from an expression of class type (13.3.1.5); and</p>\n  \n  <p>(2.7) -- invocation of a conversion function for conversion to a glvalue or class prvalue to which a reference (8.5.3) will be directly bound (13.3.1.6).</p>\n</blockquote>\n\n<p>Of these, the <em>only</em> one that applies to regular functions is 2.1, and that requires a <code>f(args)</code> context which only tells the caller the result.</p>\n\n<p>So, what you ask for cannot be done. Not exactly, anyway.</p>\n\n<p>Now, depending on what you want to accomplish, there are some things that <em>are</em> possible:</p>\n\n<p>It is possible to get a pointer to the function if you know the <em>exact</em> signature: given <code>template &lt;typename T&gt; int hello(A&lt;T&gt; a, A&lt;T&gt; b)</code>, you can obtain the address using that: <code>static_cast&lt;int(*)(A&lt;int&gt;,A&lt;int&gt;)&gt;(hello)</code>. However, for this to work, you need to know the return type (which you might be able to obtain using <code>decltype</code>), and you need to know the parameter types (which may be different from the argument types, and which you aren't able to obtain reliably).</p>\n\n<p>It is also possible to get a pointer to a function that, when called, will have the same effect as <code>hello</code>:</p>\n\n<pre><code>auto callable = +[](A&lt;int&gt; a, A&lt;int&gt; b) { return hello(a, b); };\n</code></pre>\n\n<p>The <code>[](A&lt;int&gt; a, A&lt;int&gt; b) { return hello(a, b); }</code> creates a lambda without any captures, and lambdas without any captures can implicitly be converted to a function pointer of a matching type. The <code>+</code> forces the use of that conversion, without requiring the type to be spelled out.</p>\n\n<p>However, this will not have the same address as <code>hello</code>, so might not be suitable for subsequent comparisons.</p>\n\n<p>That's the best you can get.</p>\n"}, {"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428525236, "post_id": 29524105, "comment_id": 47203987, "body": "I clarified the question with a comment from the asker on a deleted post: &quot;I would like the types to be inferred by the compiler.&quot;"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428597666, "post_id": 29524105, "comment_id": 47240081, "body": "Yes.  This works for the OP case where the parameter types are exact matches."}], "owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "is_accepted": false, "score": 2, "last_activity_date": 1428573168, "last_edit_date": 1428573168, "creation_date": 1428522706, "answer_id": 29524105, "question_id": 29522800, "link": "https://stackoverflow.com/questions/29522800/is-it-possible-to-obtain-the-address-of-a-implicit-instantiation-of-a-function-t/29524105#29524105", "title": "Is it possible to obtain the address of a implicit instantiation of a function template?", "body": "<p>I tried this in <a href=\"http://ideone.com/NGknrj\" rel=\"nofollow\">Ideone</a>:</p>\n\n<pre><code>// A and hello defined as OP\nint main()\n{\n    A&lt;int&gt; a;\n    A&lt;float&gt; b;\n\n    decltype(hello(a,b,3)) (*pf)(decltype(a), decltype(b), decltype(3))=hello;\n    std::cout &lt;&lt; (void*)pf &lt;&lt; \"\\n\";                                                                                                                                                           \n\n    return 0;\n}\n</code></pre>\n\n<p>It seemed to output a memory address.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1428600041, "post_id": 29538905, "comment_id": 47241398, "body": "Welcome to SO. It can take just a single good answer to gain enough reputation to comment, and I encourage you to do so if this is the level of comments you&#39;d like to leave, this is useful. :) Lambdas can be templated in C++14 (look up <code>auto</code> parameters), but that wouldn&#39;t help, a templated lambda can be converted to multiple function pointer types, so the trick of using <code>+</code> to force the single possible conversion doesn&#39;t work. But..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1428600142, "post_id": 29538905, "comment_id": 47241457, "body": "...you don&#39;t need templated lambdas, and you don&#39;t need the lambdas to match exactly to the function being called, you merely need to match the arguments you want to pass. The lambda body can take care of any implicit conversions from the argument types to the wrapped function&#39;s parameter types. For instance, <code>void f(long l) { } int main() { auto x = +[](int a) { f(a); }; }</code> is fine, and gives <code>x</code> type <code>void(*)(int)</code>. It&#39;s okay that it doesn&#39;t exactly match the type of <code>&amp;f</code>."}, {"owner": {"reputation": 729, "user_id": 4766202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c3ba57b38a92d53156f02b081c4b1a?s=128&d=identicon&r=PG&f=1", "display_name": "Llu&#237;s Vilanova", "link": "https://stackoverflow.com/users/4766202/llu%c3%ads-vilanova"}, "edited": false, "score": 0, "creation_date": 1428605469, "post_id": 29538905, "comment_id": 47244671, "body": "Right, I was thinking about avoiding the declaration of a lambda with a specific number of arguments. See edit on my response."}], "owner": {"reputation": 729, "user_id": 4766202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c3ba57b38a92d53156f02b081c4b1a?s=128&d=identicon&r=PG&f=1", "display_name": "Llu&#237;s Vilanova", "link": "https://stackoverflow.com/users/4766202/llu%c3%ads-vilanova"}, "is_accepted": false, "score": 1, "last_activity_date": 1428605737, "last_edit_date": 1428605737, "creation_date": 1428583553, "answer_id": 29538905, "question_id": 29522800, "link": "https://stackoverflow.com/questions/29522800/is-it-possible-to-obtain-the-address-of-a-implicit-instantiation-of-a-function-t/29538905#29538905", "title": "Is it possible to obtain the address of a implicit instantiation of a function template?", "body": "<p>@hvd: AFAIK, you cannot declare a lambda without knowing the signature of the function you wanna wrap (lambdas cannot be templated). But you can use an intermediate class with a static method instead:</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;class A&gt;\nvoid func(A a, int b)\n{\n    std::cout &lt;&lt; \"a=\" &lt;&lt; a &lt;&lt; \" b=\" &lt;&lt; b &lt;&lt; \"\\n\";\n}\n\ntemplate&lt;class... A&gt;\nclass proxy_func\n{\npublic:\n    static auto call(A... args) -&gt; decltype(func(args...))\n        {\n            return func(args...);\n        }\n};\n\ntemplate&lt;template&lt;class...&gt; class P, class... User&gt;\nvoid* addr(User... user)\n{\n    return (void*)&amp;P&lt;User...&gt;::call;\n}\n\ntemplate&lt;template&lt;class...&gt; class P, class... User&gt;\nauto call(User... user) -&gt; decltype(P&lt;User...&gt;::call(user...))\n{\n    return P&lt;User...&gt;::call(user...);\n}\n\ntemplate&lt;class T&gt;\nvoid test()\n{\n    T value = 1;\n    printf(\"func &gt; %p\\n\", &amp;func&lt;T&gt;);\n    printf(\"func &gt; \");\n    func(value, 1);\n    printf(\"proxy&gt; %p\\n\", &amp;proxy_func&lt;T, int&gt;::call);\n    printf(\"proxy&gt; \");\n    proxy_func&lt;T, int&gt;::call(value, 1);\n    printf(\"auto &gt; %p\\n\", addr&lt;proxy_func&gt;(value, 1));\n    printf(\"auto &gt; \");\n    call&lt;proxy_func&gt;(value, 1);\n}\n\nint main(int argc, char **argv)\n{\n    printf(\"==int==\\n\");\n    test&lt;int&gt;();\n    printf(\"==long==\\n\");\n    test&lt;long&gt;();\n}\n</code></pre>\n\n<p>The result is this:</p>\n\n<pre><code>g++ -std=c++11 -o /tmp/test /tmp/test.cpp &amp;&amp; /tmp/test\n==int==\nfunc &gt; 0x400a8d\nfunc &gt; a=1 b=1\nproxy&gt; 0x400ae6\nproxy&gt; a=1 b=1\nauto &gt; 0x400ae6\nauto &gt; a=1 b=1\n==long==\nfunc &gt; 0x400b35\nfunc &gt; a=1 b=1\nproxy&gt; 0x400b91\nproxy&gt; a=1 b=1\nauto &gt; 0x400b91\nauto &gt; a=1 b=1\n</code></pre>\n\n<p>Of course, this requires declaring a generic proxy that knows about the <em>name</em> of the target function (nothing else), and that might not be acceptable as a solution for @JavierCabezasRodr\u00edguez.</p>\n\n<p>PS: Sorry I did not post it as a comment, but I do not have enough reputation for it.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Using a proxy class instead of a lambda forgoes the need to know the number of parameters, so that you can use a hackishly macro approach to wrap any target function:</p>\n\n<pre><code>#define proxy(f)                                \\\n    template&lt;class... A&gt;                        \\\n    class proxy_ ## f                           \\\n    {                                           \\\n    public:                                                     \\\n        static auto call(A... args) -&gt; decltype(f(args...))     \\\n        {                                                       \\\n            return f(args...);                                  \\\n        }                                                       \\\n    }\n\nproxy(func);\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 4765519, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ui1h-lrUfao/AAAAAAAAAAI/AAAAAAAASsg/DjfDxVZhcCA/photo.jpg?sz=128", "display_name": "Javier Cabezas Rodr&#237;guez", "link": "https://stackoverflow.com/users/4765519/javier-cabezas-rodr%c3%adguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 942, "favorite_count": 2, "answer_count": 3, "score": 11, "last_activity_date": 1428605737, "creation_date": 1428518380, "last_edit_date": 1428525130, "question_id": 29522800, "link": "https://stackoverflow.com/questions/29522800/is-it-possible-to-obtain-the-address-of-a-implicit-instantiation-of-a-function-t", "title": "Is it possible to obtain the address of a implicit instantiation of a function template?", "body": "<p>I would like to know if there is any way to obtain the address of the instantiation of a function template produced by a specific set of arguments.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename T&gt;\nclass A {}; \n\ntemplate &lt;typename T, typename T2&gt;\nint hello(A&lt;T&gt; a, A&lt;T2&gt; b, int c)\n{\n    return 69; \n}\n\nint main()\n{\n    A&lt;int&gt; a;\n    A&lt;float&gt; b;\n    std::cout &lt;&lt; (&amp;hello)(a, b, 3) &lt;&lt; \"\\n\";                                                                                                                                                           \n\n    return 0;\n}\n</code></pre>\n\n<p>This code prints the value returned by the function call. How can I print the address of the version of \"hello\" instantiated for a and b parameters? I would like the types to be inferred by the compiler.</p>\n"}, {"tags": ["c++", "struct", "lua", "lua-table", "lua-api"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4765549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c886c0c0b8edc0e8af2d1fc102113a76?s=128&d=identicon&r=PG&f=1", "display_name": "kokodude", "link": "https://stackoverflow.com/users/4765549/kokodude"}, "edited": false, "score": 0, "creation_date": 1428529403, "post_id": 29523450, "comment_id": 47206101, "body": "what i have to pass to getfield and getinteger to get the values with second solution?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428530533, "post_id": 29523450, "comment_id": 47206677, "body": "Alternatively, make it a lua global via lua_setglobal.  I&#39;m pretty sure there&#39;s an API for C code to have &quot;hidden&quot; globals, but I can&#39;t find it now."}], "owner": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "is_accepted": true, "score": 1, "last_activity_date": 1428530554, "last_edit_date": 1428530554, "creation_date": 1428520611, "answer_id": 29523450, "question_id": 29522768, "link": "https://stackoverflow.com/questions/29522768/lua-pass-table-to-function-modify-it-and-get-it-back-in-c/29523450#29523450", "title": "Lua pass table to function, modify it and get it back in C++", "body": "<p>I see two ways:</p>\n\n<ol>\n<li><p>Make <code>test</code> return <code>arg</code>. In this case, use <code>lua_pcall( L, 1, 0, 1 )</code>.</p></li>\n<li><p>Duplicate <code>arg</code> on the stack before calling <code>test</code> by adding these lines before <code>lua_pcall</code>:</p></li>\n</ol>\n\n<p>--</p>\n\n<pre><code>lua_pushvalue( L, -1 );\nlua_insert( L, -3 );\n</code></pre>\n\n<p>Either way, after <code>test</code> returns, you can get its fields with <code>lua_getfield</code>.</p>\n\n<pre><code>lua_getfield(L,-1,\"var1\")); arg.var1 =\u00a0lua_tointeger(L,-1);\nlua_getfield(L,-2,\"var2\")); arg.var2 =\u00a0lua_tointeger(L,-1);\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4765549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c886c0c0b8edc0e8af2d1fc102113a76?s=128&d=identicon&r=PG&f=1", "display_name": "kokodude", "link": "https://stackoverflow.com/users/4765549/kokodude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 0, "accepted_answer_id": 29523450, "answer_count": 1, "score": 0, "last_activity_date": 1428530554, "creation_date": 1428518280, "last_edit_date": 1428529980, "question_id": 29522768, "link": "https://stackoverflow.com/questions/29522768/lua-pass-table-to-function-modify-it-and-get-it-back-in-c", "title": "Lua pass table to function, modify it and get it back in C++", "body": "<p>I'm trying to add functionality in my program where I pass a C++ struct into Lua function let it play with it and then set it back to C++ program.</p>\n\n<p>Lua function:</p>\n\n<pre><code>function test( arg )\n    arg.var1 = arg.var1 * 2\n    arg.var2 = 1\nend\n</code></pre>\n\n<p>C++ function:</p>\n\n<pre><code>struct MyStruct\n{\n    int var1;\n    int var2;\n};\n\nMyStruct arg;\n\narg.var1 = 2;\narg.var2 = 2;\n\nlua_getglobal( L, \"test\" );\n\nlua_newtable( L );\n\nlua_pushstring( L, \"var1\" );\nlua_pushinteger( L, arg.var1 );\nlua_settable( L, -3 );\n\nlua_pushstring( L, \"var2\" );\nlua_pushinteger( L, arg.var2 );\nlua_settable( L, -3 );\n\nlua_pcall( L, 1, 0, 0 );\n\n// now i want somehow to grab back the modified table i pushed to c++ function as arg\narg.var1 = lua_*\narg.var2 = lua_*\n</code></pre>\n\n<p>so that I end up with this:</p>\n\n<pre><code>arg.var1 == 4\narg.var2 == 1\n</code></pre>\n\n<p>But I have no idea how I could do this, is it possible?</p>\n"}, {"tags": ["c++", "macros", "dlib"], "answers": [{"comments": [{"owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "edited": false, "score": 0, "creation_date": 1428521685, "post_id": 29522878, "comment_id": 47201965, "body": "Thanks for replying. What does <code>DLIB_NO_WARN_UNUSED</code> do here between <code>COMPILE_TIME_ASSERT(expression)</code> and <code>typedef</code>?"}, {"owner": {"reputation": 8790, "user_id": 1261432, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3cd64a8b152ef096abdd8d03925bf34?s=128&d=identicon&r=PG&f=1", "display_name": "Synxis", "link": "https://stackoverflow.com/users/1261432/synxis"}, "reply_to_user": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "edited": false, "score": 0, "creation_date": 1428522277, "post_id": 29522878, "comment_id": 47202314, "body": "Probably something compiler specific to disable the warning about unused typedef (because you normally won&#39;t use this typedef, and some compilers warn about it)."}, {"owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "edited": false, "score": 0, "creation_date": 1428523359, "post_id": 29522878, "comment_id": 47202989, "body": "but dlib is the library name, so putting <code>DLIB_NO_WARN_UNUSED</code> between <code>COMPILE_TIME_ASSERT(expression)</code> and <code>typedef</code>, I don&#39;t understanding how it is syntactically right."}, {"owner": {"reputation": 8790, "user_id": 1261432, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3cd64a8b152ef096abdd8d03925bf34?s=128&d=identicon&r=PG&f=1", "display_name": "Synxis", "link": "https://stackoverflow.com/users/1261432/synxis"}, "reply_to_user": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "edited": false, "score": 0, "creation_date": 1428524549, "post_id": 29522878, "comment_id": 47203641, "body": "<code>DLIB_NO_WARN_UNUSED</code> is a macro. It could be <code>#define DLIB_NO_WARN_UNUSED</code> (so this would be replaced by nothing) or <code>#define DLIB_NO_WARN_UNUSED some-compiler-magic</code>."}, {"owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "edited": false, "score": 0, "creation_date": 1428524903, "post_id": 29522878, "comment_id": 47203813, "body": "Thanks for the time, I think I got it."}], "owner": {"reputation": 8790, "user_id": 1261432, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3cd64a8b152ef096abdd8d03925bf34?s=128&d=identicon&r=PG&f=1", "display_name": "Synxis", "link": "https://stackoverflow.com/users/1261432/synxis"}, "is_accepted": true, "score": 3, "last_activity_date": 1428518692, "last_edit_date": 1495535058, "creation_date": 1428518692, "answer_id": 29522878, "question_id": 29522749, "link": "https://stackoverflow.com/questions/29522749/typedef-char-in-a-macro/29522878#29522878", "title": "typedef char in a macro", "body": "<p>This is a C++03 static assert, or at least the workaround used to simulate it.</p>\n\n<p>The following defines a struct only if <code>value</code> is true, else the type is not defined.</p>\n\n<pre><code>template &lt;bool value&gt; struct compile_time_assert;\ntemplate &lt;&gt; struct compile_time_assert&lt;true&gt; { enum {value=1};  };\n</code></pre>\n\n<p>Which means <code>compile_time_assert&lt;true&gt;::value</code> is perfectly correct, but <code>compile_time_assert&lt;false&gt;::value</code> is a compilation error since <code>compile_time_assert&lt;false&gt;</code> is not defined.</p>\n\n<p>Now, the core of the assert:</p>\n\n<pre><code>DLIB_NO_WARN_UNUSED typedef char BOOST_JOIN(DLIB_CTA, __LINE__) ::dlib::compile_time_assert&lt;(bool)(expression)&gt;::value]\n</code></pre>\n\n<p>This defines a typedef on a <code>char</code> array of size 1, only if <code>expression</code> evaluates to true. If the expression evaluates to false, then there is a compile time error and the name of the typedef is a hint about the error.</p>\n\n<p>Note that there are some variants of this. Some use a negative or null size instead of a compilation error, ie they define the following:</p>\n\n<pre><code>template &lt;&gt; struct compile_time_assert&lt;false&gt; { enum { value = -1 };  };\n</code></pre>\n\n<p>But actually there is a way concise formulation of this (you can see it <a href=\"https://stackoverflow.com/questions/14621968/how-to-do-static-assert-with-macros\">in this question</a>):</p>\n\n<pre><code>typedef char static_assert_something[expression ? 1 : -1];\n</code></pre>\n"}], "owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 29522878, "answer_count": 1, "score": 0, "last_activity_date": 1428535712, "creation_date": 1428518227, "last_edit_date": 1428535712, "question_id": 29522749, "link": "https://stackoverflow.com/questions/29522749/typedef-char-in-a-macro", "title": "typedef char in a macro", "body": "<p>I am reading the machine learning library dlib which is written in C++. I came across a code in a <a href=\"http://dlib.net/dlib/assert.h.html\" rel=\"nofollow\">header file</a> which defines a bunch of macros. I have difficulties understanding the following code</p>\n\n<pre><code>#ifndef BOOST_JOIN\n#define BOOST_JOIN( X, Y ) BOOST_DO_JOIN( X, Y )\n#define BOOST_DO_JOIN( X, Y ) BOOST_DO_JOIN2(X,Y)\n#define BOOST_DO_JOIN2( X, Y ) X##Y\n#endif\n//  a bunch of other code\n\nnamespace dlib\n{\ntemplate &lt;bool value&gt; struct compile_time_assert;\ntemplate &lt;&gt; struct compile_time_assert&lt;true&gt; { enum {value=1};  };\n// a bunch of other definitions\n}\n\n#define COMPILE_TIME_ASSERT(expression) \\\n    DLIB_NO_WARN_UNUSED typedef char BOOST_JOIN(DLIB_CTA, __LINE__)[::dlib::compile_time_assert&lt;(bool)(expression)&gt;::value] \n</code></pre>\n\n<p>what I do not understand is that</p>\n\n<ol>\n<li><p>what does the last line in the above code do?</p></li>\n<li><p><code>typedef char</code> here is so weird, I don't understand it at all.</p></li>\n<li>After substitution for <code>BOOST_JOIN</code>, it becomes <code>DLIB_CTA__LINE__[1]</code>, why it is an array? Is it legal?</li>\n</ol>\n"}, {"tags": ["c++", "user-interface", "winapi"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1428518611, "post_id": 29522645, "comment_id": 47200140, "body": "We can only guess how you coded your program"}, {"owner": {"reputation": 20901, "user_id": 9476, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f01cbd2238e2a78e4c43fa596f51d6a1?s=128&d=identicon&r=PG", "display_name": "Dmitri Nesteruk", "link": "https://stackoverflow.com/users/9476/dmitri-nesteruk"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1428518894, "post_id": 29522645, "comment_id": 47200339, "body": "@DavidHeffernan <i>default Win32 app</i>"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1428519442, "post_id": 29522645, "comment_id": 47200652, "body": "Doesn&#39;t look like that here ......"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1428519879, "post_id": 29522645, "comment_id": 47200887, "body": "@DmitriNesteruk Probably is a setting on your PC and has nothing to do with the building of a Win32 application.  What about other applications and windows?"}, {"owner": {"reputation": 20901, "user_id": 9476, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f01cbd2238e2a78e4c43fa596f51d6a1?s=128&d=identicon&r=PG", "display_name": "Dmitri Nesteruk", "link": "https://stackoverflow.com/users/9476/dmitri-nesteruk"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1428520834, "post_id": 29522645, "comment_id": 47201461, "body": "@PaulMcKenzie Windows 8.1, I suspect that&#39;s the only factor that could affect the app"}, {"owner": {"reputation": 6090, "user_id": 4699340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U4Ums.jpg?s=128&g=1", "display_name": "Andrew Komiagin", "link": "https://stackoverflow.com/users/4699340/andrew-komiagin"}, "edited": false, "score": 0, "creation_date": 1428520915, "post_id": 29522645, "comment_id": 47201503, "body": "The behavior is the same on Win7 and Win8/8.1. It is due the &#39;Handedness&#39; setting. Please find the answer and solution below."}], "answers": [{"owner": {"reputation": 6090, "user_id": 4699340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U4Ums.jpg?s=128&g=1", "display_name": "Andrew Komiagin", "link": "https://stackoverflow.com/users/4699340/andrew-komiagin"}, "is_accepted": true, "score": 6, "last_activity_date": 1428519867, "creation_date": 1428519867, "answer_id": 29523203, "question_id": 29522645, "link": "https://stackoverflow.com/questions/29522645/win32-menu-item-alignment/29523203#29523203", "title": "Win32 menu item alignment", "body": "<p>The <strong>'Handedness'</strong> setting has become corrupted or changed. To change this, follow these steps.</p>\n\n<ol>\n<li><p>Press the Windows logo <strong>key+R</strong> to bring up the <strong>Run</strong> dialog box. In the\n<strong>Open</strong> line, copy/paste the following line of text:\n<em>shell:::{80F3F1D5-FECA-45F3-BC32-752C152E456E}</em></p></li>\n<li><p>Press <strong>OK</strong>.</p></li>\n<li><p>This will start the <strong>Tablet PC Settings</strong> configuration dialog (Even if\nyou do not have a Tablet PC).</p></li>\n<li><p>Select the <strong>Other</strong> Tab.</p></li>\n<li><p>In the Handedness section, place a check mark in the <strong>Left Handed</strong>\noption.</p></li>\n<li><p>Click <strong>OK</strong>.</p></li>\n</ol>\n"}, {"owner": {"reputation": 562, "user_id": 2099379, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b8ed234e265e7ef57ed1de860c8e5c65?s=128&d=identicon&r=PG", "display_name": "kero", "link": "https://stackoverflow.com/users/2099379/kero"}, "is_accepted": false, "score": 2, "last_activity_date": 1428569791, "creation_date": 1428569791, "answer_id": 29534022, "question_id": 29522645, "link": "https://stackoverflow.com/questions/29522645/win32-menu-item-alignment/29534022#29534022", "title": "Win32 menu item alignment", "body": "<p>SystemParametersInfo, SPI_GET/SETMENUDROPALIGMENT</p>\n"}], "owner": {"reputation": 20901, "user_id": 9476, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f01cbd2238e2a78e4c43fa596f51d6a1?s=128&d=identicon&r=PG", "display_name": "Dmitri Nesteruk", "link": "https://stackoverflow.com/users/9476/dmitri-nesteruk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 29523203, "answer_count": 2, "score": 0, "last_activity_date": 1428569791, "creation_date": 1428517915, "question_id": 29522645, "link": "https://stackoverflow.com/questions/29522645/win32-menu-item-alignment", "title": "Win32 menu item alignment", "body": "<p>I've generated a default Win32 app in Visual Studio and my menu looks like this</p>\n\n<p><img src=\"https://i.stack.imgur.com/xzZWh.png\" alt=\"enter image description here\"></p>\n\n<p>How do I make the menu items left-aligned to the menu item instead of right-aligned? Thanks.</p>\n"}, {"tags": ["c++", "c", "string"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1428518039, "post_id": 29522621, "comment_id": 47199812, "body": "It is an array of pointers (each points to an char array of it&#39;s own length) and make it <code>const char *messages[NUM_THREADS];</code>"}, {"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1428520047, "post_id": 29522621, "comment_id": 47200995, "body": "This is illegal for ISO standard, although gcc and clang allow it without error."}, {"owner": {"reputation": 317, "user_id": 3740387, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/569d27732cfc28ce3dd092fe30d2e900?s=128&d=identicon&r=PG&f=1", "display_name": "user3740387", "link": "https://stackoverflow.com/users/3740387/user3740387"}, "edited": false, "score": 0, "creation_date": 1428520710, "post_id": 29522621, "comment_id": 47201394, "body": "What is it that&#39;s illegal? Also could you pl go through my comments in Blindy&#39;s answer and answer them? I&#39;m interested in knowing the entire mechanism as to how and in which segment the string is stored and accessed. In addition why does a certain way work with compile time strings but doesn&#39;t work with input entered at runtime. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1428518192, "post_id": 29522677, "comment_id": 47199904, "body": "&quot;This is C.&quot;  Awesome."}, {"owner": {"reputation": 317, "user_id": 3740387, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/569d27732cfc28ce3dd092fe30d2e900?s=128&d=identicon&r=PG&f=1", "display_name": "user3740387", "link": "https://stackoverflow.com/users/3740387/user3740387"}, "edited": false, "score": 0, "creation_date": 1428520002, "post_id": 29522677, "comment_id": 47200970, "body": "Am I right in assuming that the strings reside in the data segment and the same works for cin&gt;&gt;messages[i] i.e. the string goes into the data segment even at runtime?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1428520093, "post_id": 29522677, "comment_id": 47201026, "body": "<code>cin&gt;&gt;messages[i]</code> is undefined behavior."}, {"owner": {"reputation": 317, "user_id": 3740387, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/569d27732cfc28ce3dd092fe30d2e900?s=128&d=identicon&r=PG&f=1", "display_name": "user3740387", "link": "https://stackoverflow.com/users/3740387/user3740387"}, "edited": false, "score": 0, "creation_date": 1428520382, "post_id": 29522677, "comment_id": 47201211, "body": "Oh, thanks for pointing that out to me. I wrote that on Xcode and it didn&#39;t give any compilation error. But it faulted on running. Could you please explain as to why this is so? Why doesn&#39;t the same mechanism work even for runtime input. This actually was my primary question."}, {"owner": {"reputation": 317, "user_id": 3740387, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/569d27732cfc28ce3dd092fe30d2e900?s=128&d=identicon&r=PG&f=1", "display_name": "user3740387", "link": "https://stackoverflow.com/users/3740387/user3740387"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1428521090, "post_id": 29522677, "comment_id": 47201603, "body": "@drescherjm From the link you recently posted(<a href=\"http://stackoverflow.com/questions/1614723/why-is-this-string-reversal-c-code-causing-a-segmentation-fault/1614739#1614739\" title=\"why is this string reversal c code causing a segmentation fault\">stackoverflow.com/questions/1614723/&hellip;</a>), I understand that the data segment I was referring to is read-only and can&#39;t be written to at runtime. So why does the data segment exist at all? Just to hold strings literals declared at runtime and save space in stack and some time during execution(stack writing/loading)?"}, {"owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "edited": false, "score": 0, "creation_date": 1428528740, "post_id": 29522677, "comment_id": 47205807, "body": "The read only data segment as you call it isn&#39;t the opposite of the stack. It could be held literally anywhere in RAM. It&#39;s actually a code segment, your executable is memory mapped when loaded and since the strings are assembled as is you can just use the address right away. Also it&#39;s not &quot;runtime&quot;, the runtime has no write access to these pages (hence the crash in any protected OS)."}], "owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "is_accepted": false, "score": 4, "last_activity_date": 1428518017, "creation_date": 1428518017, "answer_id": 29522677, "question_id": 29522621, "link": "https://stackoverflow.com/questions/29522621/how-is-space-allocated-char-arrays/29522677#29522677", "title": "How is space allocated char* arrays?", "body": "<p>The memory used by those strings is exactly as long as the string length plus one (the terminating null character). The array you defined has <code>4*NUM_THREADS</code> bytes (assuming your vanilla variety of 32-bit C compiler) since it only holds pointers, not copies of the entire strings.</p>\n\n<p>There's no rounding, no guessing, no fuzzing of data. This is C.</p>\n"}], "owner": {"reputation": 317, "user_id": 3740387, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/569d27732cfc28ce3dd092fe30d2e900?s=128&d=identicon&r=PG&f=1", "display_name": "user3740387", "link": "https://stackoverflow.com/users/3740387/user3740387"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428518017, "creation_date": 1428517854, "question_id": 29522621, "link": "https://stackoverflow.com/questions/29522621/how-is-space-allocated-char-arrays", "title": "How is space allocated char* arrays?", "body": "<p>For example, in</p>\n\n<pre><code>#define NUM_THREADS 8\nchar *messages[NUM_THREADS];\nmessages[0] = \"English: Hello World!\";\nmessages[1] = \"French: Bonjour, le monde!\";\nmessages[2] = \"Spanish: Hola al mundo\";\nmessages[3] = \"Klingon: Nuq neH!\";\nmessages[4] = \"German: Guten Tag, Welt!\"; \nmessages[5] = \"Russian: Zdravstvytye, mir!\";\nmessages[6] = \"Japan: Sekai e konnichiwa!\";\nmessages[7] = \"Latin: Orbis, te saluto!\";\n</code></pre>\n\n<p>During compile time, does the compiler calculate the maximum length of all those strings and then reserve space = NUM_THREADS * ( max_len + 1 ). Added 1 for the null byte at the end of strings. Or is different amount of space allocated for each of those strings depending on their length rounded up to the nearest word?</p>\n\n<p>However, this can't always be possible since the initialization need not necessarily happen at compile time. I'm assuming a pointer to the data section where the strings will be stored is held with messages[i].</p>\n"}, {"tags": ["c++", "c++11", "initialization"], "comments": [{"owner": {"reputation": 18728, "user_id": 2382136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMbhT.jpg?s=128&g=1", "display_name": "Wojtek Surowka", "link": "https://stackoverflow.com/users/2382136/wojtek-surowka"}, "edited": false, "score": 0, "creation_date": 1428517689, "post_id": 29522429, "comment_id": 47199579, "body": "Your code is correct. Internal error is always a bug in the compiler, and apparently you encountered one. BTW you do not need parens in the <code>new</code> statement - <code>new TESTY;</code> is enough and more common."}, {"owner": {"reputation": 23041, "user_id": 1149664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac4f96b553d2e45776bd6235fee4222d?s=128&d=identicon&r=PG", "display_name": "Johan Lundberg", "link": "https://stackoverflow.com/users/1149664/johan-lundberg"}, "edited": false, "score": 4, "creation_date": 1428517697, "post_id": 29522429, "comment_id": 47199583, "body": "internal error == compiler bug. upgrade, re-test, report."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1428517729, "post_id": 29522429, "comment_id": 47199604, "body": "Its working <a href=\"https://ideone.com/WZEASK\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 3164, "user_id": 4629950, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/001a96e6db51b7c668f813a78565df84?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/4629950/thomas"}, "edited": false, "score": 0, "creation_date": 1428517896, "post_id": 29522429, "comment_id": 47199712, "body": "Could you post exactly what command you are using to compile this, so that we know which flags you are using? Google says it might have to do something with the -ip flag."}, {"owner": {"reputation": 8673, "user_id": 358013, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d4bcff3f4c96a8fe584b6d765778e9f8?s=128&d=identicon&r=PG", "display_name": "blueskin", "link": "https://stackoverflow.com/users/358013/blueskin"}, "reply_to_user": {"reputation": 23041, "user_id": 1149664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac4f96b553d2e45776bd6235fee4222d?s=128&d=identicon&r=PG", "display_name": "Johan Lundberg", "link": "https://stackoverflow.com/users/1149664/johan-lundberg"}, "edited": false, "score": 0, "creation_date": 1428518519, "post_id": 29522429, "comment_id": 47200087, "body": "@Johan: Thanks. I&#39;ll keep this post open so that if others bump into the same error they would know this is one of the possible causes"}, {"owner": {"reputation": 8673, "user_id": 358013, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d4bcff3f4c96a8fe584b6d765778e9f8?s=128&d=identicon&r=PG", "display_name": "blueskin", "link": "https://stackoverflow.com/users/358013/blueskin"}, "reply_to_user": {"reputation": 3164, "user_id": 4629950, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/001a96e6db51b7c668f813a78565df84?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/4629950/thomas"}, "edited": false, "score": 0, "creation_date": 1428518866, "post_id": 29522429, "comment_id": 47200317, "body": "@Thomas : Even without any flags I get this error. Maybe this is an issue with the compiler version I am using"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1428522730, "post_id": 29522429, "comment_id": 47202577, "body": "Isn&#39;t initializing values in the class definition a relatively new feature (e.g., C++11)?  Isn&#39;t gcc 4.3.0 relatively old?  Which library are you using?  Is numeric_limits&lt;T&gt;::max() marked as constexpr?"}], "owner": {"reputation": 8673, "user_id": 358013, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d4bcff3f4c96a8fe584b6d765778e9f8?s=128&d=identicon&r=PG", "display_name": "blueskin", "link": "https://stackoverflow.com/users/358013/blueskin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1428517903, "creation_date": 1428517325, "last_edit_date": 1428517903, "question_id": 29522429, "link": "https://stackoverflow.com/questions/29522429/wierd-compilation-error-on-c11-in-class-member-initialization", "title": "Wierd compilation error on C++11 in-class member initialization", "body": "<p>I have a class that initializes a 'double' member variable something as below</p>\n\n<pre><code>class TESTY {\npublic:\n  TESTY(){}\nprivate:\n  double m_double = std::numeric_limits&lt;float&gt;::max();\n};\n</code></pre>\n\n<p>And by creating instance as,</p>\n\n<pre><code>new TESTY();\n</code></pre>\n\n<p>I get the following error when compiling. </p>\n\n<pre><code>\": internal error: IERROR_MODULE_ID_0\n</code></pre>\n\n<p>Not sure what's happening here and even google has no answer for this.\nAm using intel64/icpc -gcc-version=430. Interestingly it works fine with C++14 <a href=\"http://ideone.com/bsnr92\" rel=\"nofollow\">here</a></p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1428517424, "post_id": 29522368, "comment_id": 47199433, "body": "Are you looking for something like <a href=\"http://isocpp.org/wiki/faq/dtors#placement-new\" rel=\"nofollow noreferrer\">placement new</a>?"}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1428522596, "post_id": 29522368, "comment_id": 47202493, "body": "A lot of low-level system programming depends on this behavior. What specifically are you trying to achieve. Your question is too broad."}, {"owner": {"reputation": 238, "user_id": 1922340, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bdd07153e1903a04e9f0d0f0fa0bbea?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/1922340/sam"}, "edited": false, "score": 0, "creation_date": 1428523224, "post_id": 29522368, "comment_id": 47202908, "body": "Rob, I have a large memory that needs to stay in one location in a system. Functions that access this memory will only know it&#39;s location and after reading data at the beginning of the location they will know how the data is arranged. I would like to have the function then associate the proper struct with the location.  Is this possible? Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 238, "user_id": 1922340, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bdd07153e1903a04e9f0d0f0fa0bbea?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/1922340/sam"}, "edited": false, "score": 0, "creation_date": 1428518259, "post_id": 29522460, "comment_id": 47199954, "body": "Thanks!   Is there a way to do that without changing the data stored at pages? Eg just changing the structure of the memory and leaving the data intact?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 238, "user_id": 1922340, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bdd07153e1903a04e9f0d0f0fa0bbea?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/1922340/sam"}, "edited": false, "score": 0, "creation_date": 1428519357, "post_id": 29522460, "comment_id": 47200593, "body": "I don&#39;t understand what you mean by &quot;changing the structure of the memory and leaving the data intact?&quot; Memory is just bits and bytes. The language gives them structure and meaning. There is no such thing as changing the structure of memory."}, {"owner": {"reputation": 238, "user_id": 1922340, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bdd07153e1903a04e9f0d0f0fa0bbea?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/1922340/sam"}, "edited": false, "score": 0, "creation_date": 1428522107, "post_id": 29522460, "comment_id": 47202202, "body": "I guess I am asking if I was passed page_pointer which was filled with integer data, could I somehow access that data using the struct a, which is the same size?  Thanks for the help!"}, {"owner": {"reputation": 238, "user_id": 1922340, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bdd07153e1903a04e9f0d0f0fa0bbea?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/1922340/sam"}, "edited": false, "score": 0, "creation_date": 1428523810, "post_id": 29522460, "comment_id": 47203247, "body": "That is exactly it! Thank you"}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1428523129, "last_edit_date": 1428523129, "creation_date": 1428517410, "answer_id": 29522460, "question_id": 29522368, "link": "https://stackoverflow.com/questions/29522368/is-it-possible-to-convert-a-pointer-to-contiguous-memory-of-known-size-into-a-st/29522460#29522460", "title": "Is it possible to convert a pointer to contiguous memory of known size into a structure?", "body": "<blockquote>\n  <p>I want to take a structure (test) of same size as pages and place it at the memory location of pages. Is this possible?</p>\n</blockquote>\n\n<p>Yes, it is possible. However, instead of using</p>\n\n<pre><code>*page_pointer = a; \n</code></pre>\n\n<p>you should use <code>memcpy</code>.</p>\n\n<pre><code>memcpy(page_pointer, &amp;a, sizeof(pages));\n</code></pre>\n\n<p><strong>Update, in response to comment by OP</strong></p>\n\n<p>I think you are asking whether you can do something like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct foo\n{\n   int a;\n   int b;\n   int c;\n};\n\nint main()\n{\n   int array[3] = {10, 20, 30};\n   foo* ptr = static_cast&lt;foo*&gt;((void*)array);\n   std::cout &lt;&lt; ptr-&gt;a &lt;&lt; \", \" &lt;&lt; ptr-&gt;b &lt;&lt; \", \" &lt;&lt; ptr-&gt;c &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I tried it on g++ 4.9.2 and works OK. I am not sure whether it violates any type aliasing rules.</p>\n"}], "owner": {"reputation": 238, "user_id": 1922340, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bdd07153e1903a04e9f0d0f0fa0bbea?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/1922340/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 29522460, "answer_count": 1, "score": 0, "last_activity_date": 1428523129, "creation_date": 1428517145, "last_edit_date": 1428522278, "question_id": 29522368, "link": "https://stackoverflow.com/questions/29522368/is-it-possible-to-convert-a-pointer-to-contiguous-memory-of-known-size-into-a-st", "title": "Is it possible to convert a pointer to contiguous memory of known size into a structure?", "body": "<p>Ex.</p>\n\n<pre><code>int pages[3];\nint *page_ptr;\npage_ptr = pages;\n\n//\n\ntest a;\n*page_pointer = a; \n</code></pre>\n\n<p>I want to take a structure (<code>test</code>) of same size as <code>pages</code> and place it at the memory location of <code>pages</code>. Is this possible?</p>\n\n<ul>\n<li>without changing the data at pages, just how pages is accessed.</li>\n</ul>\n"}, {"tags": ["android", "c++", "opengl-es-2.0"], "comments": [{"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1428517139, "post_id": 29522305, "comment_id": 47199269, "body": "How can you say it works perfectly if you can&#39;t reproduce the problem anyway?"}, {"owner": {"reputation": 1081, "user_id": 4629102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857b6d784b99de3915d9dfb4de92d67d?s=128&d=identicon&r=PG&f=1", "display_name": "Iqbal S", "link": "https://stackoverflow.com/users/4629102/iqbal-s"}, "edited": false, "score": 0, "creation_date": 1428519430, "post_id": 29522305, "comment_id": 47200644, "body": "Check for the memory constrains while this crash happened and also post the crash logs here. If you think it is a rare issue then use tools like crashlytics, crash logs, etc.. which shall provide you the logs when app crashes through email or tool."}, {"owner": {"reputation": 23, "user_id": 4765428, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fphcmmGodwE/AAAAAAAAAAI/AAAAAAAAA7o/iGllIceBQkc/photo.jpg?sz=128", "display_name": "Duarte Roso", "link": "https://stackoverflow.com/users/4765428/duarte-roso"}, "reply_to_user": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1428522331, "post_id": 29522305, "comment_id": 47202338, "body": "@ChrisStratton Right. I can reproduce in the flow of the app. But as you can expect, swapping buffers is a pretty common command. You could argue that I&#39;m missing something which is causing the issue, this would be a valid point if more than one device/gpu was affected by this which is not the case. By perfectly I mean that stops crashing, as simple as this."}, {"owner": {"reputation": 23, "user_id": 4765428, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fphcmmGodwE/AAAAAAAAAAI/AAAAAAAAA7o/iGllIceBQkc/photo.jpg?sz=128", "display_name": "Duarte Roso", "link": "https://stackoverflow.com/users/4765428/duarte-roso"}, "reply_to_user": {"reputation": 1081, "user_id": 4629102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857b6d784b99de3915d9dfb4de92d67d?s=128&d=identicon&r=PG&f=1", "display_name": "Iqbal S", "link": "https://stackoverflow.com/users/4629102/iqbal-s"}, "edited": false, "score": 0, "creation_date": 1428522524, "post_id": 29522305, "comment_id": 47202458, "body": "@Iqbal Haven&#39;t tried anything other that the monitor.bat that comes with the Android SDK (or NDK?). Sadly nothing very useful is logged there."}, {"owner": {"reputation": 1081, "user_id": 4629102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857b6d784b99de3915d9dfb4de92d67d?s=128&d=identicon&r=PG&f=1", "display_name": "Iqbal S", "link": "https://stackoverflow.com/users/4629102/iqbal-s"}, "edited": false, "score": 0, "creation_date": 1428522843, "post_id": 29522305, "comment_id": 47202654, "body": "Oh OK. Henceforth please integrate one of the tools I mentioned, those will be very helpful to trace the logs."}, {"owner": {"reputation": 5236, "user_id": 692167, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/414107f42456622acd7bb1d083f0b074?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/692167/tom"}, "edited": false, "score": 0, "creation_date": 1433288493, "post_id": 29522305, "comment_id": 49284283, "body": "This issue might be of interest.  I just contributed a Nexus 6 5.0 stack trace that indicated the same thing.   <a href=\"https://code.google.com/p/android/issues/detail?id=175143\" rel=\"nofollow noreferrer\">code.google.com/p/android/issues/detail?id=175143</a>"}], "answers": [{"owner": {"reputation": 431, "user_id": 936422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6f3be84674fe6fd568c81db4601059e?s=128&d=identicon&r=PG", "display_name": "gal", "link": "https://stackoverflow.com/users/936422/gal"}, "is_accepted": true, "score": 1, "last_activity_date": 1429289189, "last_edit_date": 1495540711, "creation_date": 1428742591, "answer_id": 29575989, "question_id": 29522305, "link": "https://stackoverflow.com/questions/29522305/adreno-420-driver-bug-on-android-5-1/29575989#29575989", "title": "Adreno 420 driver bug on Android 5.1", "body": "<p>I'm having the same problem and I can reproduce it. It happens obviously because it runs out of stack memory due to deep nested loops in the rendering process.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/29437756/android-lollipop-5-1-fatal-signal-11-sigsegv-code-2-fault-addr-0x9e985ff8-i\">Android Lollipop 5.1: Fatal signal 11 (SIGSEGV), code 2, fault addr 0x9e985ff8 in tid 4093 (RenderThread) / when using lot of nine patch graphics</a></p>\n\n<p>I've already reported it to the google issue tracker:</p>\n\n<p><a href=\"https://code.google.com/p/android/issues/detail?id=163100\" rel=\"nofollow noreferrer\">https://code.google.com/p/android/issues/detail?id=163100</a></p>\n\n<p>Update: Meanwhile I found a way to work around this issue. It's definitely not a long time solution, but for the moment, it's just the best available to stop my apps from crashing. </p>\n\n<p>I disabled GPU rendering for particular graphic layers. It slows the drawing down a bit, but not significant.</p>\n\n<p>So the nightmare is over for now, but I still think, this issue must be fixed on the driver itself. It cannot be that something that worked perfect with 5.0.2 and below, immediately stops to work with 5.1.</p>\n"}, {"owner": {"reputation": 15872, "user_id": 580677, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4b386c750d5f10ac62b6547f67e6a7a6?s=128&d=identicon&r=PG", "display_name": "nmr", "link": "https://stackoverflow.com/users/580677/nmr"}, "is_accepted": false, "score": 0, "last_activity_date": 1431323558, "creation_date": 1431323558, "answer_id": 30160464, "question_id": 29522305, "link": "https://stackoverflow.com/questions/29522305/adreno-420-driver-bug-on-android-5-1/30160464#30160464", "title": "Adreno 420 driver bug on Android 5.1", "body": "<p>I have seen some weird behavior on the N6 as well, and while I cannot rule out app bugs, it looks to me like the Adreno driver is to blame. </p>\n\n<p>Specifically, in landscape mode, our GLSurfaceView only renders one half of it's content, but occasionally flickers all of it. And with certain scenes being rendered there is intermittent flickering. In a case of extra weirdness, I have seen one half of the screen completely freeze, stuck on app content, even after returning to the launcher via the home button. It appears kind of like it would if it used multi stream transport and one of the streams was getting lost.</p>\n"}], "owner": {"reputation": 23, "user_id": 4765428, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fphcmmGodwE/AAAAAAAAAAI/AAAAAAAAA7o/iGllIceBQkc/photo.jpg?sz=128", "display_name": "Duarte Roso", "link": "https://stackoverflow.com/users/4765428/duarte-roso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 1, "accepted_answer_id": 29575989, "answer_count": 2, "score": 2, "last_activity_date": 1431323558, "creation_date": 1428516940, "question_id": 29522305, "link": "https://stackoverflow.com/questions/29522305/adreno-420-driver-bug-on-android-5-1", "title": "Adreno 420 driver bug on Android 5.1", "body": "<p>Just wanted to share an experience I had to see if anyone came across such issue, if they found the cause and more importantly how they fixed it.</p>\n\n<p>The problem is pretty simple: while debugging native code on a Nexus 6, which as the Adreno 420 GPU, eglSwapBuffer could crash under certain circumstances when using Android 5.1 (5.0 worked perfectly).\nSince I could not repro it I am unable to tell you what went wrong. According to the documentation, elgSwapBuffer calls internally glFlush; and so if I call glFlush before calling eglSwapBuffer all of a sudden it works perfectly. \nMy guess is that the driver does not flush properly thus crashing when swaping the buffers.</p>\n\n<p>Any comments on this?</p>\n\n<p>Cheers,\nD</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 28, "creation_date": 1428516621, "post_id": 29522179, "comment_id": 47198950, "body": "Because you&#39;re using a vector of vector, which means each of your columns (or rows) is a separate allocation which may or may not be in a cache friendly location."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 6, "creation_date": 1428516646, "post_id": 29522179, "comment_id": 47198971, "body": "Are those times from single runs, or averages over multiple runs?"}, {"owner": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "edited": false, "score": 0, "creation_date": 1428516761, "post_id": 29522179, "comment_id": 47199052, "body": "How do you allocate <code>matrix</code> in C?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 4, "creation_date": 1428516815, "post_id": 29522179, "comment_id": 47199089, "body": "Are your optimisations on? Some C++ compilers enable range-checking on vectors when it&#39;s off, like in debug builds."}, {"owner": {"reputation": 2743, "user_id": 2554810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bcabfe7eb829de8fb40e2f3d1719128?s=128&d=identicon&r=PG", "display_name": "IllusiveBrian", "link": "https://stackoverflow.com/users/2554810/illusivebrian"}, "edited": false, "score": 7, "creation_date": 1428516846, "post_id": 29522179, "comment_id": 47199106, "body": "What compiler options are you using?  Why does the C++ solution get wrapped in a class, are you including the class initialization in your timer?  Speaking of which, how are you timing the execution?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 4, "creation_date": 1428516901, "post_id": 29522179, "comment_id": 47199139, "body": "Are the allocating schemes different? A single block in C vs. multiple blocks (vectors) in C++. Anyway you should prefer a single block of memory (no vector of vector)."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 3, "creation_date": 1428517403, "post_id": 29522179, "comment_id": 47199425, "body": "Try a thin <a href=\"http://stackoverflow.com/a/12009991/179910\">wrapper around a single vector instead</a>."}, {"owner": {"reputation": 10530, "user_id": 521897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ZTZI.jpg?s=128&g=1", "display_name": "amdn", "link": "https://stackoverflow.com/users/521897/amdn"}, "edited": false, "score": 1, "creation_date": 1428517517, "post_id": 29522179, "comment_id": 47199488, "body": "Although identical syntactically, the expression &quot;matrix[i][j]&quot; in C and in C++ are likely implemented very differently in your case (you can make it equivalent in C++ by allocating matrix as one single block of memory stored in row major order).  Look for a definition of &quot;operator []&quot; in your matrix class, it will likely point to where the problem is."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428518493, "post_id": 29522179, "comment_id": 47200069, "body": "Additionally, the C++ was probably compiled with exceptions enabled, and the C wasn&#39;t, which can <i>sometimes</i> incur a performance penalty.  To reduce this, mark C++ functions as <code>noexcept</code> or <code>nothrow</code> (depending on your compiler)."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1428518764, "post_id": 29522179, "comment_id": 47200234, "body": "With most halfway-modern compilers, exception don&#39;t incur an overhead unless they are thrown, @MooingDuck. The exception-handling code is not stored inline with the &quot;normal&quot; code and thus doesn&#39;t increase size and cache misses. An IMHO more likely influence is a container implementation with debug diagnostics."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1428519203, "post_id": 29522179, "comment_id": 47200515, "body": "@UlrichEckhardt: Except, you know, <a href=\"http://stackoverflow.com/a/3590198/845092\">MSVC compiling x86</a> (<a href=\"https://msdn.microsoft.com/en-us/library/vstudio/c0hwkhwe(v=vs.100).aspx\" rel=\"nofollow noreferrer\">and here</a>), and <a href=\"http://sourceforge.net/p/mingw-w64/mailman/message/30171170/\" rel=\"nofollow noreferrer\">GCC on x86</a> (due to patent issues)...   But you&#39;re right the containers + debug are a <i>way</i> bigger consideration."}, {"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1428521809, "post_id": 29522179, "comment_id": 47202040, "body": "Create a matrix class and represent 2D matrices with an inline (x, y) overloaded function call that internally calculates position into a single dimension vector.  It&#39;ll then be almost on par with C rather than vector of vector as others have pointed out."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1428541843, "post_id": 29522179, "comment_id": 47210163, "body": "For benchmark questions you should post <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>s including the benchmarking code and your compiler switches.   See bames53&#39;s code sample for what you should be posting."}, {"owner": {"reputation": 309, "user_id": 3284190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edfcd17c09577e60803235d0820ec0c?s=128&d=identicon&r=PG&f=1", "display_name": "nwod", "link": "https://stackoverflow.com/users/3284190/nwod"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1428584960, "post_id": 29522179, "comment_id": 47230815, "body": "@Robinson That makes sense. I have found simpler examples that avoid vectors of vectors and any complex data structures in general."}, {"owner": {"reputation": 309, "user_id": 3284190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edfcd17c09577e60803235d0820ec0c?s=128&d=identicon&r=PG&f=1", "display_name": "nwod", "link": "https://stackoverflow.com/users/3284190/nwod"}, "reply_to_user": {"reputation": 2743, "user_id": 2554810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bcabfe7eb829de8fb40e2f3d1719128?s=128&d=identicon&r=PG", "display_name": "IllusiveBrian", "link": "https://stackoverflow.com/users/2554810/illusivebrian"}, "edited": false, "score": 0, "creation_date": 1428585275, "post_id": 29522179, "comment_id": 47231099, "body": "@Namfuak I have no control over the compiler options, and the C++ solution is wrapped in a class because that&#39;s the format the LeetCode website requires for C++ solutions. The code I have shown is all that I am allowed to provide as an answer, and the compiling and benchmarking is done by the LeetCode backend, presumably in a reasonable way. Or maybe not so reasonable way. I can&#39;t know. But they do specify that C++ environment is g++ 4.9.1 and the C one is gcc 4.9.1."}, {"owner": {"reputation": 309, "user_id": 3284190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edfcd17c09577e60803235d0820ec0c?s=128&d=identicon&r=PG&f=1", "display_name": "nwod", "link": "https://stackoverflow.com/users/3284190/nwod"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1428585896, "post_id": 29522179, "comment_id": 47231499, "body": "@MattMcNabb Unfortunately, I don&#39;t have any control over the benchmarking code and compiler switches used on LeetCode. I have provided a couple of simpler MCVEs though. I know it&#39;s far from ideal but you can just copy and paste the whole example on the LeetCode website for completeness and verification..."}], "answers": [{"comments": [{"owner": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "edited": false, "score": 3, "creation_date": 1428518901, "post_id": 29522744, "comment_id": 47200345, "body": "I don&#39;t see how this answers the question. Is the C++ code changing the size of the vectors? Of not, then why should that contribute to the running time? The vector is already being passed by reference. Although you&#39;ve made true statements, I don&#39;t quite see how they&#39;re relevant to the question at hand."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 3, "creation_date": 1428519161, "post_id": 29522744, "comment_id": 47200495, "body": "There is absolutely no reason why C++ should be faster (or slower) than C, having this simple data structure."}, {"owner": {"reputation": 8325, "user_id": 1350209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bd2f0eb2365d2a1fcd6f4eb4d40366b1?s=128&d=identicon&r=PG", "display_name": "Cole Johnson", "link": "https://stackoverflow.com/users/1350209/cole-johnson"}, "edited": false, "score": 0, "creation_date": 1428529338, "post_id": 29522744, "comment_id": 47206067, "body": "Adding to @DieterL&#252;cking: C++&#39;s original &quot;compiler&quot; output was simply C code. All it did was transform (then) &quot;C++&quot; into C code to be fed to a C compiler. No reason why C++ would be slower. Its original name (I think) was &quot;C with classes&quot;."}, {"owner": {"reputation": 13828, "user_id": 1146881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wZqsm.jpg?s=128&g=1", "display_name": "nick", "link": "https://stackoverflow.com/users/1146881/nick"}, "reply_to_user": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "edited": false, "score": 0, "creation_date": 1428540651, "post_id": 29522744, "comment_id": 47209807, "body": "@RobKennedy Do you know why this question was downvoted? Robinson&#39;s comment and bames53&#39;s answer said essentially the same thing."}, {"owner": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "reply_to_user": {"reputation": 13828, "user_id": 1146881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wZqsm.jpg?s=128&g=1", "display_name": "nick", "link": "https://stackoverflow.com/users/1146881/nick"}, "edited": false, "score": 0, "creation_date": 1428544010, "post_id": 29522744, "comment_id": 47210774, "body": "I don&#39;t know why you&#39;re asking me, @Nick. Robinson&#39;s comment suggests the problem is cache locality. Bames&#39;s answer says the problem is optimization. Those aren&#39;t the same things."}], "owner": {"reputation": 6643, "user_id": 2032021, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/c1c31bca855c458b3f218ef6a303184d?s=128&d=identicon&r=PG", "display_name": "Dr. Debasish Jana", "link": "https://stackoverflow.com/users/2032021/dr-debasish-jana"}, "is_accepted": false, "score": -4, "last_activity_date": 1428518511, "last_edit_date": 1428518511, "creation_date": 1428518221, "answer_id": 29522744, "question_id": 29522179, "link": "https://stackoverflow.com/questions/29522179/why-is-my-c-code-three-times-slower-than-the-c-equivalent-on-leetcode/29522744#29522744", "title": "Why is my C++ code three times slower than the C equivalent on LeetCode?", "body": "<p>You are using vector of vector in your C++ code snippet. Vectors are sequence containers in C++ that are like arrays that can change in size. Instead of <code>vector&lt;vector&lt;int&gt;&gt;</code> if you use statically allocated arrays, that would be better. You may use your own Array class as well with operator [] overloaded, but vector has more overhead as it dynamically resizes when you add more elements than its original size. In C++, you use call by reference to further reduce your time if you compare that with C. C++ should run even faster if written well.</p>\n"}, {"comments": [{"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 1, "creation_date": 1428523765, "post_id": 29523732, "comment_id": 47203224, "body": "I&#39;ve often seen <code>std::vector&lt;T&gt;</code> being optimized down to &quot;raw&quot; arrays, but, as you correctly say, you need to turn optimizations on. With C you&#39;re already using that kind of arrays, so unoptimized code will be faster."}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1428524671, "post_id": 29523732, "comment_id": 47203704, "body": "@bames53 Actually, it&#39;s not always the case that <code>vector&lt;vector&lt;T&gt;&gt;</code> is worse than a custom struct. This depends a lot on the application. (E.g. adding another column is an extremely costly thing for the struct, but not for the nested vector). As always, one should profile the actual use case."}, {"owner": {"reputation": 1130, "user_id": 3494492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/j7gkb.png?s=128&g=1", "display_name": "kiwixz", "link": "https://stackoverflow.com/users/3494492/kiwixz"}, "edited": false, "score": 2, "creation_date": 1428525485, "post_id": 29523732, "comment_id": 47204119, "body": "On a side note, gcc use <code>-Og</code> for debugger-friendly optimizations."}, {"owner": {"reputation": 15322, "user_id": 291737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/432bda8139dee981e1411f40cab0a13e?s=128&d=identicon&r=PG", "display_name": "StilesCrisis", "link": "https://stackoverflow.com/users/291737/stilescrisis"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1428525814, "post_id": 29523732, "comment_id": 47204299, "body": "@black: You&#39;ve seen <code>vector</code> optimized into a raw array? That shouldn&#39;t be possible, unless the optimizer is able to turn a heap allocation into a stack-based one, which is far beyond the optimization abilities of any compiler I&#39;ve ever seen."}, {"owner": {"reputation": 2021, "user_id": 321935, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PiKZc.jpg?s=128&g=1", "display_name": "SilverbackNet", "link": "https://stackoverflow.com/users/321935/silverbacknet"}, "edited": false, "score": 0, "creation_date": 1428539710, "post_id": 29523732, "comment_id": 47209536, "body": "Pointers to a heap allocation are often referred to as raw arrays, because array and pointer syntax are interchangeable in C. Never heard that phrase to mean stack arrays specifically."}, {"owner": {"reputation": 79428, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "reply_to_user": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1428540195, "post_id": 29523732, "comment_id": 47209650, "body": "@stefan That&#39;s true, it does depend. However cases where <code>vector&lt;vector&lt;int&gt;&gt;</code> has an advantage are specialized and uncommon compared to how often a contiguous block of memory is a better arrangement."}, {"owner": {"reputation": 309, "user_id": 3284190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edfcd17c09577e60803235d0820ec0c?s=128&d=identicon&r=PG&f=1", "display_name": "nwod", "link": "https://stackoverflow.com/users/3284190/nwod"}, "edited": false, "score": 0, "creation_date": 1428584480, "post_id": 29523732, "comment_id": 47230484, "body": "@bames53 That&#39;s a really good point. Sadly I have no control over how the code was compiled or benchmarked. However, I can see how it makes a lot of sense for LeetCode to be compiling and comparing the code people submit without compiler optimisations. I have gathered a couple of simpler minimal examples that don&#39;t involve any complicated data structures and updated the question. Do you suppose lack of compiler optimisation might still be the cause of the issue?"}, {"owner": {"reputation": 1544, "user_id": 1536934, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/b289b3c15836cb88791f192c99d4b122?s=128&d=identicon&r=PG", "display_name": "baordog", "link": "https://stackoverflow.com/users/1536934/baordog"}, "edited": false, "score": 0, "creation_date": 1428600276, "post_id": 29523732, "comment_id": 47241547, "body": "@barnes53 and to all: Just to be clear, he&#39;s not benchmarking the code himself. He&#39;s submitting this code to a competitive coding website which gives him back it&#39;s own interpretation of what the codes timing is. I imagine they don&#39;t give him control over optimization options."}, {"owner": {"reputation": 79428, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "reply_to_user": {"reputation": 309, "user_id": 3284190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edfcd17c09577e60803235d0820ec0c?s=128&d=identicon&r=PG&f=1", "display_name": "nwod", "link": "https://stackoverflow.com/users/3284190/nwod"}, "edited": false, "score": 0, "creation_date": 1428614056, "post_id": 29523732, "comment_id": 47249823, "body": "@nwod In those later examples optimization shouldn&#39;t make a difference, since the C++ is not using any abstraction beyond what the C version is doing. I&#39;m guessing that the explanation for this is that the examples are being compiled with different compilers or with some other different compiler options. Without knowing how the compilation is done I would say it makes no sense to compare these runtime numbers; it&#39;s clearly not an apples to apples comparison."}, {"owner": {"reputation": 309, "user_id": 3284190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edfcd17c09577e60803235d0820ec0c?s=128&d=identicon&r=PG&f=1", "display_name": "nwod", "link": "https://stackoverflow.com/users/3284190/nwod"}, "edited": false, "score": 0, "creation_date": 1428747024, "post_id": 29523732, "comment_id": 47301636, "body": "@bames53 That&#39;s what I thought too but the LeetCode website gives you a plot of the run time distributions for all accepted solutions in all programming languages on the same graph, so the implication is that the comparison is valid. On the other hand, having used LeetCode for a few days now, I&#39;m becoming more and more convinced that there&#39;s a lot of corner cutting and roughness around the edges of that website..."}], "owner": {"reputation": 79428, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "is_accepted": true, "score": 43, "last_activity_date": 1428757057, "last_edit_date": 1495542227, "creation_date": 1428521486, "answer_id": 29523732, "question_id": 29522179, "link": "https://stackoverflow.com/questions/29522179/why-is-my-c-code-three-times-slower-than-the-c-equivalent-on-leetcode/29523732#29523732", "title": "Why is my C++ code three times slower than the C equivalent on LeetCode?", "body": "<p>Lately I've been seeing the <code>vector&lt;vector&lt;int&gt;&gt;</code> suggestion a lot for doing 2d arrays in C++, and I've been pointing out to people why this really isn't a good idea. It's a handy trick to know when slapping together temporary code, but there's (almost) never any reason to ever use it for real code. The <a href=\"https://stackoverflow.com/a/29055366/365496\">right thing to do</a> is to use a class that wraps a contiguous block of memory.</p>\n\n<p>So my first reaction might be to point to this as a possible source for the disparity. However you're also using <code>int**</code> in the C version, which is generally a sign of the exact same problem as <code>vector&lt;vector&lt;int&gt;&gt;</code>.</p>\n\n<p>So instead I decided to just compare the two solutions.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/fa8441cc5baa0391\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/fa8441cc5baa0391</a></p>\n\n<blockquote>\n  <p>6468424<br>\n  6588511</p>\n</blockquote>\n\n<p>That's the time taken by the 'C version' vs the 'C++ version' in nanoseconds.</p>\n\n<p>My results don't show anything like the disparity you describe. Then it occurred to me to check a common mistake people make when benchmarking</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/e57d791876b9252b\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/e57d791876b9252b</a></p>\n\n<blockquote>\n  <p>18386695<br>\n  42400612</p>\n</blockquote>\n\n<p>Notice that the -O3 flag from the first example has become -O0, which disables optimization.</p>\n\n<p>Conclusion: you're probably comparing unoptimized executables.</p>\n\n<p>C++ supports building rich abstractions that don't require overhead, but eliminating the the overhead does require certain code transformations that play havoc with the 'debuggability' of code.</p>\n\n<p>That means debug builds avoid those transformations and therefore C++ debug builds are often slower than debug builds of C style code because C style code just doesn't use much abstraction. Seeing a 130% slowdown such as the above is not at all surprising when timing, for example, machine code that uses function calls in place of simple store instructions.</p>\n\n<hr>\n\n<p>Some code really needs optimizations in order to have reasonable performance even for debugging, so compilers often offer a mode that applies some optimizations which don't cause too much trouble for debuggers. Clang and gcc use <code>-O1</code> for this, and you can see that even this level of optimization essentially eliminates the gap in this program between C style code and the more C++ style code:</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/13967ebcfcfa4073\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/13967ebcfcfa4073</a></p>\n\n<blockquote>\n  <p>8389992<br>\n  8196935</p>\n</blockquote>\n\n<hr>\n\n<p><strong>Update:</strong></p>\n\n<p>In those later examples optimization shouldn't make a difference, since the C++ is not using any abstraction beyond what the C version is doing. I'm guessing that the explanation for this is that the examples are being compiled with different compilers or with some other different compiler options. Without knowing how the compilation is done I would say it makes no sense to compare these runtime numbers; LeetCode is clearly not producing an apples to apples comparison.</p>\n"}], "owner": {"reputation": 309, "user_id": 3284190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edfcd17c09577e60803235d0820ec0c?s=128&d=identicon&r=PG&f=1", "display_name": "nwod", "link": "https://stackoverflow.com/users/3284190/nwod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2662, "favorite_count": 3, "closed_date": 1428544279, "accepted_answer_id": 29523732, "answer_count": 2, "score": 11, "last_activity_date": 1594083628, "creation_date": 1428516495, "last_edit_date": 1594083628, "question_id": 29522179, "link": "https://stackoverflow.com/questions/29522179/why-is-my-c-code-three-times-slower-than-the-c-equivalent-on-leetcode", "closed_reason": "Not suitable for this site", "title": "Why is my C++ code three times slower than the C equivalent on LeetCode?", "body": "<p>I've been doing some of the <a href=\"http://leetcode.com/\" rel=\"nofollow\">LeetCode problems</a>, and I notice that the C solutions are a couple of times faster than the exact same thing in C++. For example:</p>\n\n<p><strong>Updated with a couple of simpler examples:</strong></p>\n\n<blockquote>\n  <p>Given a sorted array and a target value, return the index if the target is found. If not, return the index where it would be if it were inserted in order. You may assume no duplicates in the array. (<a href=\"http://leetcode.com/problems/search-insert-position/\" rel=\"nofollow\">Link to question on LeetCode</a>)</p>\n</blockquote>\n\n<p>My solution in C, runs in 3&nbsp;ms:</p>\n\n<pre><code>int searchInsert(int A[], int n, int target) {\n    int left = 0;\n    int right = n;\n    int mid = 0;\n    while (left&lt;right) {\n        mid = (left + right) / 2;\n        if (A[mid]&lt;target) {\n            left = mid + 1;\n        }\n        else if (A[mid]&gt;target) {\n            right = mid;\n        }\n        else {\n            return mid;\n        }\n    }\n    return left;\n}\n</code></pre>\n\n<p>My other C++ solution, exactly the same but as a member function of the Solution class runs in 13&nbsp;ms:</p>\n\n<pre><code>class Solution {\npublic:\n    int searchInsert(int A[], int n, int target) {\n        int left = 0;\n        int right = n;\n        int mid = 0;\n        while (left&lt;right) {\n            mid = (left + right) / 2;\n            if (A[mid]&lt;target) {\n                left = mid + 1;\n            }\n            else if (A[mid]&gt;target) {\n                right = mid;\n            }\n            else {\n                return mid;\n            }\n        }\n        return left;\n    }\n};\n</code></pre>\n\n<p>Even simpler example:</p>\n\n<blockquote>\n  <p>Reverse the digits of an integer. Return 0 if the result will overflow. (<a href=\"http://leetcode.com/problems/reverse-integer/\" rel=\"nofollow\">Link to question on LeetCode</a>)</p>\n</blockquote>\n\n<p>The C version runs in 6&nbsp;ms:</p>\n\n<pre><code>int reverse(int x) {\n    long rev = x % 10;\n    x /= 10;\n    while (x != 0) {\n        rev *= 10L;\n        rev += x % 10;\n        x /= 10;\n        if (rev&gt;(-1U &gt;&gt; 1) || rev &lt; (1 &lt;&lt; 31)) {\n            return 0;\n        }\n    }\n    return rev;\n}\n</code></pre>\n\n<p>And the C++ version is exactly the same but as a member function of the Solution class, and runs for 19&nbsp;ms:</p>\n\n<pre><code>class Solution {\npublic:\n    int reverse(int x) {\n        long rev = x % 10;\n        x /= 10;\n        while (x != 0) {\n            rev *= 10L;\n            rev += x % 10;\n            x /= 10;\n            if (rev&gt;(-1U &gt;&gt; 1) || rev &lt; (1 &lt;&lt; 31)) {\n                return 0;\n            }\n        }\n        return rev;\n    }\n};\n</code></pre>\n\n<p>I see how there would be considerable overhead from using vector of vector as a 2D array in the original example if the LeetCode testing system doesn't compile the code with optimisation enabled. But the simpler examples above shouldn't suffer that issue because the data structures are pretty raw, especially in the second case where all you have is long or integer arithmetics. That's still slower by a factor of three.</p>\n\n<p>I'm starting to think that there might be something odd happening with the way LeetCode do the benchmarking in general because even in the C version of the integer reversing problem you get a huge bump in running time from just replacing the line\n    if (rev>(-1U >> 1) || rev &lt; (1 &lt;&lt; 31)) {\nwith\n    if (rev>INT_MAX || rev &lt; INT_MIN) {</p>\n\n<p>Now, I suppose having to <code>#include&lt;limits.h&gt;</code> might have something to do with that but it seems a bit extreme that this simple change bumps the execution time from just 6&nbsp;ms to 19&nbsp;ms.</p>\n"}, {"tags": ["c++", "double"], "comments": [{"owner": {"reputation": 5357, "user_id": 948918, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SfJmq.jpg?s=128&g=1", "display_name": "pkacprzak", "link": "https://stackoverflow.com/users/948918/pkacprzak"}, "edited": false, "score": 2, "creation_date": 1428516555, "post_id": 29522171, "comment_id": 47198895, "body": "Avoid checking equality of two floating point numbers."}, {"owner": {"reputation": 3047, "user_id": 446303, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0223ff085aabfc2db1422d5341f28dad?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/446303/max"}, "edited": false, "score": 0, "creation_date": 1428517164, "post_id": 29522171, "comment_id": 47199282, "body": "Check difference against a tolerance; the tolerance must be set depending on your particular domain."}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 3087364, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/b7fb64ff48558b699d2680ca326f7149?s=128&d=identicon&r=PG&f=1", "display_name": "cheftao", "link": "https://stackoverflow.com/users/3087364/cheftao"}, "edited": false, "score": 0, "creation_date": 1428518151, "post_id": 29522205, "comment_id": 47199886, "body": "Thanks a lot ! Exactly what I am looking for"}, {"owner": {"reputation": 13415, "user_id": 102, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f20eaa6bccefd48c6ca5aff0badffdce?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/102/bill"}, "edited": false, "score": 0, "creation_date": 1428518277, "post_id": 29522205, "comment_id": 47199964, "body": "In general, a constant tolerance is a bad idea because the amount adjacent floats differ by changes depending on the numbers themselves. <a href=\"https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/\" rel=\"nofollow noreferrer\">randomascii.wordpress.com/2012/02/25/&hellip;</a>"}], "owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "is_accepted": false, "score": 7, "last_activity_date": 1428516573, "creation_date": 1428516573, "answer_id": 29522205, "question_id": 29522171, "link": "https://stackoverflow.com/questions/29522171/make-sure-c-decimal-comparison-is-correct/29522205#29522205", "title": "Make sure c++ decimal comparison is correct", "body": "<p>If you are being paranoid about using <code>==</code> on <code>doubles</code> or <code>floats</code> (which you should be) you can always check that they are close within a small tolerance.</p>\n\n<pre><code>bool same = fabs(a-b) &lt; 0.000001;\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 3087364, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/b7fb64ff48558b699d2680ca326f7149?s=128&d=identicon&r=PG&f=1", "display_name": "cheftao", "link": "https://stackoverflow.com/users/3087364/cheftao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428516573, "creation_date": 1428516472, "question_id": 29522171, "link": "https://stackoverflow.com/questions/29522171/make-sure-c-decimal-comparison-is-correct", "title": "Make sure c++ decimal comparison is correct", "body": "<p>I have two double variable. double a = 0.10000, double b = 0.1. How can I make sure the comparison (a == b) is always true ? </p>\n"}, {"tags": ["c++", "explicit-conversion", "explicit-constructor", "class-constructors"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4765108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6da1fa186916ea9c68162baf8c12dd45?s=128&d=identicon&r=PG&f=1", "display_name": "Cross R", "link": "https://stackoverflow.com/users/4765108/cross-r"}, "edited": false, "score": 0, "creation_date": 1428519679, "post_id": 29522459, "comment_id": 47200781, "body": "You&#39;re right. The extra parens does the trick. I found out C++11 allows this construction with braces to avoid this parse issue.      GlobalPortId port{ PortId(i) };"}], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": true, "score": 2, "last_activity_date": 1428517408, "creation_date": 1428517408, "answer_id": 29522459, "question_id": 29522059, "link": "https://stackoverflow.com/questions/29522059/c-no-matching-function-for-call-to-and-no-known-conversion-for-argument/29522459#29522459", "title": "C++ &#39;no matching function for call to&#39; and &#39;no known conversion for argument&#39;", "body": "<p>You have been hit by the most vexing parse. <code>GlobalPortId port(PortId(i));</code> declares a function called <code>port</code> that takes a parameter of type <code>PortId</code> named <code>i</code> and returns a <code>GlobalPortId</code>. I believe extra parens will take care of it: <code>GlobalPortId port((PortId(i)));</code></p>\n"}, {"comments": [{"owner": {"reputation": 4252, "user_id": 677418, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MANYZ.jpg?s=128&g=1", "display_name": "Sleek Geek", "link": "https://stackoverflow.com/users/677418/sleek-geek"}, "edited": false, "score": 1, "creation_date": 1428521264, "post_id": 29522544, "comment_id": 47201703, "body": "Try explaining your answer further."}], "owner": {"reputation": 1, "user_id": 4765564, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/dd17ac45cfef4ae8c71343766c71ac15?s=128&d=identicon&r=PG", "display_name": "Eduardo", "link": "https://stackoverflow.com/users/4765564/eduardo"}, "is_accepted": false, "score": 0, "last_activity_date": 1428519708, "last_edit_date": 1428519708, "creation_date": 1428517656, "answer_id": 29522544, "question_id": 29522059, "link": "https://stackoverflow.com/questions/29522059/c-no-matching-function-for-call-to-and-no-known-conversion-for-argument/29522544#29522544", "title": "C++ &#39;no matching function for call to&#39; and &#39;no known conversion for argument&#39;", "body": "<p>You must use:</p>\n\n<pre><code>GlobalPortId port = GlobalPortId(PortId(i));\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4765108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6da1fa186916ea9c68162baf8c12dd45?s=128&d=identicon&r=PG&f=1", "display_name": "Cross R", "link": "https://stackoverflow.com/users/4765108/cross-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1134, "favorite_count": 0, "accepted_answer_id": 29522459, "answer_count": 2, "score": 2, "last_activity_date": 1428519708, "creation_date": 1428516108, "question_id": 29522059, "link": "https://stackoverflow.com/questions/29522059/c-no-matching-function-for-call-to-and-no-known-conversion-for-argument", "title": "C++ &#39;no matching function for call to&#39; and &#39;no known conversion for argument&#39;", "body": "<p>I have this piece of code:</p>\n\n<pre><code>    class Enum {\n     public:\n      const int &amp;value() const {\n        return value_;\n      }\n\n      bool operator==(const Enum &amp;other) const {\n        return (other.value() == this-&gt;value_);\n      }\n\n      bool operator!=(const Enum &amp;other) const {\n        return !(*this == other);\n      }\n\n      bool operator&lt;(const Enum&amp; other) const {\n        return value_ &lt; other.value();\n    }\n\n     protected:\n      Enum(const int &amp;value) : value_(value) {\n      }\n\n      void set_value(int value) {\n        value_ = value;\n      }\n\n     private:\n      int value_;\n    };\n\n    /*\n     * Port-Id Base classes\n     */\n    class PortIdBase : public Enum {\n     public:\n      virtual ~PortIdBase() {}\n     protected:\n        PortIdBase(int value) : Enum(value) {}\n    };\n\n    class PortId : public PortIdBase {\n     public:\n      PortId(int value) : PortIdBase(value) {}\n      PortId() : PortIdBase(0) {}\n      virtual ~PortId() {}\n    };\n\n    class GlobalPortId {\n    public:\n      GlobalPortId(const PortIdBase id_base) : base_(id_base) {}\n      virtual ~GlobalPortId() {}\n\n    private:\n      PortIdBase base_;\n    };\n\n\n    class CfpDevice {\n     public:\n      explicit CfpDevice(int dev_cfp_instance) : instance_(dev_cfp_instance) {}\n      virtual ~CfpDevice() {}\n\n    private:\n      int instance_;\n    };\n\n    class Cfp {\n    public:\n      explicit Cfp(const GlobalPortId &amp;id,\n          CfpDevice* const device) : id_(id),\n                                     device_(device) {}\n      ~Cfp() { delete device_; }\n\n    private:\n      const GlobalPortId id_;\n      CfpDevice* const device_;\n    };\n\n    int main() {\n      int number_of_devices = 5;\n      for(int i = 0; i &lt; number_of_devices; ++i) {\n        GlobalPortId port(PortId(i));\n        CfpDevice *cfp_device = new CfpDevice(i);\n        Cfp *cfp = new Cfp(port, cfp_device);\n      }\n      return 0;\n    }\n</code></pre>\n\n<p>I had to change the code to fit all in one file, so don't worry about implementing separately from definitions and memory allocation. I'll fix everything in my original files.\nMy question is why compiling this code I have this message:</p>\n\n<blockquote>\n  <p>test.cc: In function \u2018int main()\u2019:\n  test.cc:86:40: error: no matching function for call to \u2018Cfp::Cfp(GlobalPortId (&amp;)(PortId), CfpDevice*&amp;)\u2019\n      Cfp <em>cfp = new Cfp(port, cfp_device);\n                                         ^\n  test.cc:86:40: note: candidates are:\n  test.cc:70:12: note: Cfp::Cfp(const GlobalPortId&amp;, CfpDevice</em>)\n    explicit Cfp(const GlobalPortId &amp;id,\n             ^\n  test.cc:70:12: note:   no known conversion for argument 1 from \u2018GlobalPortId(PortId)\u2019 to \u2018const GlobalPortId&amp;\u2019\n  test.cc:68:7: note: Cfp::Cfp(const Cfp&amp;)\n  class Cfp {\n        ^\n  test.cc:68:7: note:   candidate expects 1 argument, 2 provided</p>\n</blockquote>\n\n<p>However if I change:</p>\n\n<pre><code>GlobalPortId port(PortId(i));\n</code></pre>\n\n<p>for</p>\n\n<pre><code>GlobalPortId port(static_cast&lt;PortIdBase&gt;(PortId(i)));\n</code></pre>\n\n<p>It works.</p>\n\n<p>Also if I remove</p>\n\n<pre><code>GlobalPortId port(PortId(i));\n</code></pre>\n\n<p>and instantiates inside Cfp creation:</p>\n\n<pre><code>Cfp *cfp = new Cfp(GlobalPortId(PortId(i)), cfp_device);\n</code></pre>\n\n<p>It also works.</p>\n\n<p>Is there anybody who could explain:</p>\n\n<ol>\n<li>Why is it allowed to instantiate Cfp, calling GlobalPortId and PortId constructors at the same line? But it isn't allowed to use them when you instantiate them separately.</li>\n<li>Why it isn't allowed to instantiate Cfp using 'port' without cast?</li>\n</ol>\n"}, {"tags": ["c++", "dll", "proxy", "directx"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3465782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75f8b678fde717167cd781a766f7b996?s=128&d=identicon&r=PG&f=1", "display_name": "Adolif4", "link": "https://stackoverflow.com/users/3465782/adolif4"}, "edited": false, "score": 0, "creation_date": 1428617337, "post_id": 29525222, "comment_id": 47251381, "body": "Broad questions require broad answers. I think this is just what I was looking for! Since I&#39;m new to the site, how do I mark your answer as the one I wanted?"}, {"owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "reply_to_user": {"reputation": 13, "user_id": 3465782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75f8b678fde717167cd781a766f7b996?s=128&d=identicon&r=PG&f=1", "display_name": "Adolif4", "link": "https://stackoverflow.com/users/3465782/adolif4"}, "edited": false, "score": 0, "creation_date": 1428682802, "post_id": 29525222, "comment_id": 47281947, "body": "Glad it helps! To accept, click the checkbox right underneath the voting buttons next to the answer."}], "owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "is_accepted": true, "score": 0, "last_activity_date": 1428526701, "creation_date": 1428526701, "answer_id": 29525222, "question_id": 29522056, "link": "https://stackoverflow.com/questions/29522056/using-a-c-proxy-dll-for-directx9-how-would-one-rotate-a-scene/29525222#29525222", "title": "Using a C++ proxy dll for DirectX9, how would one rotate a scene?", "body": "<p>In general terms, most 3D shaders use a set of three matrices to determine how vertices are transformed into screen space. In DirectX, these are commonly called the World, View and Projection matrices (in GL, the 'World' matrix is commonly referred to as 'Model'). In D3D9, these matrices will be set as shader constants (via IDirect3DDevice9::SetVertexShaderConstantF). Also note that is it is common practice to concatenate these matrices into a single matrix on the CPU before passing them to the vertex shader, so that the redundant calculation is not being performed per-vertex.</p>\n\n<p>Assuming this is the setup of the shaders in the game you are trying to proxy, you would need to identify which shaders to target (eg. which ones are 3D world-object shaders). Note that there may be shaders in the game which are not for 3D world rendering, such as those for UI (if applicable). Then, intercept any calls to IDirect3DDevice9::SetVertexShaderConstantF when the targeted shaders are active, and modify the uniform(s) associated with transforming the vertices to screen space. This will take some trial and error, and certainly, some knowledge of HLSL disassembly, as I'm assuming you don't have the source for the shaders.</p>\n\n<p>Even accomplishing that, it's very likely that you will not get the results you want, if you plan to modify the 'View' portion of the transformation in any significant way (eg. where the camera is looking). The reason being is that frequently, many game systems perform 3D world calculations on the CPU, which you would obviously not be affecting. The most obvious example is a frustum based culling system, which determines which objects to render. Because proxying will not modify such a system, you may \"look off into empty space\".</p>\n"}], "owner": {"reputation": 13, "user_id": 3465782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75f8b678fde717167cd781a766f7b996?s=128&d=identicon&r=PG&f=1", "display_name": "Adolif4", "link": "https://stackoverflow.com/users/3465782/adolif4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 29525222, "answer_count": 1, "score": 1, "last_activity_date": 1428526701, "creation_date": 1428516100, "question_id": 29522056, "link": "https://stackoverflow.com/questions/29522056/using-a-c-proxy-dll-for-directx9-how-would-one-rotate-a-scene", "title": "Using a C++ proxy dll for DirectX9, how would one rotate a scene?", "body": "<p>I'm looking to add free-look to a DirectX 9 game (even when the game disables it) via a proxy d3d9.dll. I have the source code to a simple proxy in C++. The game itself is not open-source, but the developers couldn't care less about mods.</p>\n\n<p>I know it is possible, because some 3D anaglpyh driver hacks that use proxy dlls (like IZ3D) rotate the scene quite a bit when the distance between the two eyes is set to very high. Code for this effect on the web (at least, using Google) simply does not exist. Keep in mind that the game uses shaders and makes no obvious use of the matrix stack.</p>\n\n<p>How would I do this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "edited": false, "score": 2, "creation_date": 1428516333, "post_id": 29522053, "comment_id": 47198757, "body": "are you sure m_windowMap isn&#39;t null when you call getWindow?"}, {"owner": {"reputation": 7638, "user_id": 2986116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2f1444d1687fdda5fc2f039ccb0c4c?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/2986116/j%c3%a9r%c3%b4me"}, "edited": false, "score": 1, "creation_date": 1428516947, "post_id": 29522053, "comment_id": 47199158, "body": "My guess is that <code>keyValuePair-&gt;second</code> is <code>null</code> or undefined and you are trying to access <code>window</code> property. This suppose that you called <code>init</code> before <code>getWindow</code> and so m_windowMap isn&#39;t <code>null</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1114683"}, "reply_to_user": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "edited": false, "score": 0, "creation_date": 1428517352, "post_id": 29522053, "comment_id": 47199405, "body": "@dwcanillas I don&#39;t think it is as when I call Windows init(), I get the created primary window.  @JeromeL The latter is true. I do call Window&#39;s init() first, and then in my Renderer class, to initialise my renderer I then call <code>window.getWindow();</code> (&lt;-- I haven&#39;t made it that far as the error is getting in the way)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1114683"}, "edited": false, "score": 0, "creation_date": 1428522741, "post_id": 29522053, "comment_id": 47202584, "body": "EDIT: so it&#39;s the <code>windowMap::const_iterator keyValuePair = m_windowMap-&gt;find(id);</code> line that&#39;s causing the access violation error. Any ideas?"}], "owner": {"user_type": "does_not_exist", "display_name": "user1114683"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428516098, "creation_date": 1428516098, "question_id": 29522053, "link": "https://stackoverflow.com/questions/29522053/map-struct-causing-unhandled-exception-error", "title": "Map Struct causing unhandled exception error?", "body": "<p>So I've got the following in my code:</p>\n\n<p><code>Window.hpp</code></p>\n\n<pre><code>class Window {\n    struct windowMap {\n        SDL_Window* window = 0;\n        const char* title = 0;\n        int width;\n        int height;\n        int flags;\n    };\n\n    typedef std::map&lt;std::string, windowStruct*&gt; windowMap;\n\n    windowMap* m_windowMap;\n};\n</code></pre>\n\n<p><code>Window.cpp</code></p>\n\n<pre><code>bool Window::init() {\n    m_windowMap = new windowMap();\n    (...)\n};\n\nSDL_Window* Window::getWindow(std::string id) {\n    windowMap::const_iterator keyValuePair = m_windowMap-&gt;find(id);\n\n    // check if the ID was found\n    if (keyValuePair != m_windowMap-&gt;end()) {\n        return keyValuePair-&gt;second-&gt;window;\n    }\n\n    SDL_LogError(ERROR, \"Could not get window\");\n    return 0;\n};\n</code></pre>\n\n<p>Now Intellisense does not throw any errors at all, and neither does the compiler but when I run the program, I get an unhandled exception error thrown:</p>\n\n<pre><code>Unhandled exception at 0x/*Quite a long address here*/ in SDL2-CutePlanet.exe 0xC0000005:\nAccess violation reading location 0x/*Quite a lot of 'F's here*/\n</code></pre>\n\n<p>The culprit seems to be <code>getWindow();</code> but I don't understand and know what is causing it to trip?</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1428516030, "post_id": 29521923, "comment_id": 47198599, "body": "This has been asked many times, what about the previous answers to similar questions did not help you?"}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1428524448, "post_id": 29521923, "comment_id": 47203588, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/4421706/operator-overloading\">Operator overloading</a>"}], "answers": [{"owner": {"reputation": 4791, "user_id": 3899471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f65ff7602231a1a1653a7debf32e7f?s=128&d=identicon&r=PG&f=1", "display_name": "kvorobiev", "link": "https://stackoverflow.com/users/3899471/kvorobiev"}, "is_accepted": false, "score": 0, "last_activity_date": 1428516319, "last_edit_date": 1428516319, "creation_date": 1428516001, "answer_id": 29522019, "question_id": 29521923, "link": "https://stackoverflow.com/questions/29521923/overloading-the-output-stream-operator-for-a-class/29522019#29522019", "title": "Overloading the Output Stream Operator for a Class", "body": "<p>You could write non-member function</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Student&amp; stud)\n{\n  os &lt;&lt; stud.name &lt;&lt; \" \" &lt;&lt; stud.CWID;\n  return os;\n}\n</code></pre>\n\n<p>and declare it as friend function in your class</p>\n\n<pre><code>class Student {\n    std::string name;\n    int CWID;\npublic:\n    Student(std::string name = \"N/A\", int CWID = 99999999) : this-&gt;name(name), this-&gt;CWID(CWID) {}\n    friend ostream&amp; operator&lt;&lt;(ostream&amp; os, const Student&amp; stud);\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 4750722, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/8fc8846e1b8c6e5fbbc3cd14090a3ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Blood Brother", "link": "https://stackoverflow.com/users/4750722/blood-brother"}, "edited": false, "score": 0, "creation_date": 1428516469, "post_id": 29522086, "comment_id": 47198845, "body": "Thanks Sahu, you&#39;re really helpful as always."}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1428516193, "creation_date": 1428516193, "answer_id": 29522086, "question_id": 29521923, "link": "https://stackoverflow.com/questions/29521923/overloading-the-output-stream-operator-for-a-class/29522086#29522086", "title": "Overloading the Output Stream Operator for a Class", "body": "<p>Add member functions to the class that return the name and CWID.</p>\n\n<pre><code>std::string getName() const {return name;}\nint getCWID() const {return CWID;}\n</code></pre>\n\n<p>Then, add a non-member function to write the data out to a stream.</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, Student const&amp; s)\n{\n   return out &lt;&lt; s.getName() &lt;&lt; \" \" &lt;&lt; s.getCWID();\n}\n</code></pre>\n"}, {"owner": {"reputation": 386, "user_id": 2850884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ypzTS.png?s=128&g=1", "display_name": "kamshi", "link": "https://stackoverflow.com/users/2850884/kamshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1428516293, "creation_date": 1428516293, "answer_id": 29522118, "question_id": 29521923, "link": "https://stackoverflow.com/questions/29521923/overloading-the-output-stream-operator-for-a-class/29522118#29522118", "title": "Overloading the Output Stream Operator for a Class", "body": "<p>Here is how you do it:</p>\n\n<pre><code>class Student {\n    std::string name;\n    int CWID;\npublic:\n    Student(std::string name = \"N/A\", int CWID = 99999999) : name(name), CWID(CWID) {}\n\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; stream, const Student&amp; student);\n};\n\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; stream, const Student&amp; student)\n{\n    stream &lt;&lt; '(' &lt;&lt; student.name &lt;&lt; \", \" &lt;&lt; student.CWID &lt;&lt; ')';\n    return stream;\n}\n</code></pre>\n\n<p>Please note that this overloaded function is not part of the class.</p>\n"}], "owner": {"reputation": 105, "user_id": 4750722, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/8fc8846e1b8c6e5fbbc3cd14090a3ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Blood Brother", "link": "https://stackoverflow.com/users/4750722/blood-brother"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1428516319, "creation_date": 1428515736, "question_id": 29521923, "link": "https://stackoverflow.com/questions/29521923/overloading-the-output-stream-operator-for-a-class", "title": "Overloading the Output Stream Operator for a Class", "body": "<p>Suppose this is my class:</p>\n\n<pre><code>class Student {\n    std::string name;\n    int CWID;\npublic:\n    Student(std::string name = \"N/A\", int CWID = 99999999) : this-&gt;name(name), this-&gt;CWID(CWID) {}\n};\n</code></pre>\n\n<p>Now, how do I overload the output stream operator <code>&lt;&lt;</code> that will print all the data in the class. I'm guessing this is equivalent to the <code>toString()</code> method in Java but kindly show me how to do it in C++.</p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1428515484, "post_id": 29521829, "comment_id": 47198271, "body": "Proper indentation please."}, {"owner": {"reputation": 3785, "user_id": 4427938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M6mua.png?s=128&g=1", "display_name": "Ayushi Jha", "link": "https://stackoverflow.com/users/4427938/ayushi-jha"}, "edited": false, "score": 2, "creation_date": 1428515548, "post_id": 29521829, "comment_id": 47198306, "body": "If the control reaches into the <code>else if</code> part, there is no <code>return</code>, hence the warning."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 3785, "user_id": 4427938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M6mua.png?s=128&g=1", "display_name": "Ayushi Jha", "link": "https://stackoverflow.com/users/4427938/ayushi-jha"}, "edited": false, "score": 0, "creation_date": 1428515573, "post_id": 29521829, "comment_id": 47198319, "body": "@karma_geek It&#39;s inside a <code>while</code> loop that will continue in that case, though."}, {"owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 0, "creation_date": 1428515601, "post_id": 29521829, "comment_id": 47198337, "body": "What do you return if copies &lt; 0?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1428515654, "post_id": 29521829, "comment_id": 47198370, "body": "Make it while(true) and get rid of keeping"}], "answers": [{"comments": [{"owner": {"reputation": 638, "user_id": 4200455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/daHhz.jpg?s=128&g=1", "display_name": "szulak", "link": "https://stackoverflow.com/users/4200455/szulak"}, "edited": false, "score": 0, "creation_date": 1428515764, "post_id": 29521915, "comment_id": 47198426, "body": "Moreover, for(;;) is more efficient than while(true)."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 638, "user_id": 4200455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/daHhz.jpg?s=128&g=1", "display_name": "szulak", "link": "https://stackoverflow.com/users/4200455/szulak"}, "edited": false, "score": 3, "creation_date": 1428515841, "post_id": 29521915, "comment_id": 47198478, "body": "@szulak Really? I don&#39;t believe <i>any</i> compiler worth its salt produces different code for those two."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "reply_to_user": {"reputation": 638, "user_id": 4200455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/daHhz.jpg?s=128&g=1", "display_name": "szulak", "link": "https://stackoverflow.com/users/4200455/szulak"}, "edited": false, "score": 2, "creation_date": 1428515853, "post_id": 29521915, "comment_id": 47198485, "body": "@szulak If so, throw the compiler out of the window."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 638, "user_id": 4200455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/daHhz.jpg?s=128&g=1", "display_name": "szulak", "link": "https://stackoverflow.com/users/4200455/szulak"}, "edited": false, "score": 1, "creation_date": 1428515857, "post_id": 29521915, "comment_id": 47198486, "body": "@szulak Can you give any compiler where they don&#39;t generate the exact same code, and where concerns about efficiency are meaningful?"}, {"owner": {"reputation": 638, "user_id": 4200455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/daHhz.jpg?s=128&g=1", "display_name": "szulak", "link": "https://stackoverflow.com/users/4200455/szulak"}, "edited": false, "score": 0, "creation_date": 1428515924, "post_id": 29521915, "comment_id": 47198522, "body": "I&#39;ve seen such statement on the SO, but it was assumed a compilation without any optimisation."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 638, "user_id": 4200455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/daHhz.jpg?s=128&g=1", "display_name": "szulak", "link": "https://stackoverflow.com/users/4200455/szulak"}, "edited": false, "score": 0, "creation_date": 1428516178, "post_id": 29521915, "comment_id": 47198677, "body": "@szulak I would say these should be equivalent even in non-optimising mode."}], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 3, "last_activity_date": 1428515796, "last_edit_date": 1428515796, "creation_date": 1428515715, "answer_id": 29521915, "question_id": 29521829, "link": "https://stackoverflow.com/questions/29521829/how-to-get-rid-of-these-warning/29521915#29521915", "title": "How to get rid of these warning?", "body": "<p>The whole <code>keepgoing</code> business is redundant&mdash;you only ever set it to <code>false</code> just before exiting the function anyway. Replace it with a \"forever\" loop and the warning should disappear:</p>\n\n<pre><code>bool Order::add(std::istream&amp; is){\n   int copies;\n\n   for(;;) {\n      std::cout &lt;&lt; \"Quantity (0 to quit) : \";\n      is &gt;&gt; copies;  \n      if (copies==0){\n         return false;\n      }else if (copies&lt;0){\n         std::cout &lt;&lt; \"Enter a positive number. Try again.\"&lt;&lt;std::endl;\n      }else{\n         no_copies+=copies;\n         return true;\n      }\n   }\n}\n</code></pre>\n\n<p>Note that you're not checking that the input succeeded, which you always should.</p>\n"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": false, "score": 2, "last_activity_date": 1428515763, "creation_date": 1428515763, "answer_id": 29521936, "question_id": 29521829, "link": "https://stackoverflow.com/questions/29521829/how-to-get-rid-of-these-warning/29521936#29521936", "title": "How to get rid of these warning?", "body": "<p>Basically, your code is too complicated for your compiler to give more useful warnings.</p>\n\n<p>You've added a <code>keepgoing</code> variable that doesn't add anything. In all cases where you meaningfully use its value, its value will be <code>true</code>. However, the compiler is unable to determine that it will always be <code>true</code> in all relevant cases, and accounts for the possibility that it unexpectedly gets set to false. Who knows, maybe your compiler supports you modifying the variable using a debugger.</p>\n\n<p>As noted already, you can easily get rid of that variable: your <code>return</code> statement will cause the <code>while</code> loop to be exited, regardless of that <code>while</code> loop's condition.</p>\n"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1428515774, "creation_date": 1428515774, "answer_id": 29521941, "question_id": 29521829, "link": "https://stackoverflow.com/questions/29521829/how-to-get-rid-of-these-warning/29521941#29521941", "title": "How to get rid of these warning?", "body": "<p>Move the <code>return</code> statement after</p>\n\n<pre><code>     keepgoing = false;\n</code></pre>\n\n<p>to the end.</p>\n\n<pre><code>     return false;\n</code></pre>\n\n<p>Like:</p>\n\n<pre><code>bool Order::add(std::istream&amp; is){\n   int copies;\n   bool keepgoing = true;\n\n   while (keepgoing){   \n      std::cout &lt;&lt; \"Quantity (0 to quit) : \";\n      is &gt;&gt; copies;  \n      if (copies==0){\n         keepgoing = false;\n         // No need to return from here.\n         // Changing keepgoing to false will break the loop.\n      }else if (copies&lt;0){\n         std::cout &lt;&lt; \"Enter a positive number. Try again.\"&lt;&lt;std::endl;\n      }else{\n         no_copies+=copies;\n         return true;\n      }\n   }\n\n   return false;\n}\n</code></pre>\n"}, {"owner": {"reputation": 71, "user_id": 4561333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0488014a1293cebe9ce7a815f02f6c7?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Morrison", "link": "https://stackoverflow.com/users/4561333/mark-morrison"}, "is_accepted": false, "score": 0, "last_activity_date": 1428607313, "creation_date": 1428607313, "answer_id": 29547150, "question_id": 29521829, "link": "https://stackoverflow.com/questions/29521829/how-to-get-rid-of-these-warning/29547150#29547150", "title": "How to get rid of these warning?", "body": "<p>It sounds like the compiler isn't very clear on its warnings.  The warning is trying to say that if your function reaches the end, you're not returning any value.  Since your while loop could conceivably exit - you're checking a bool variable rather than just saying <code>while (true)</code> - the compiler is telling you that not all paths through your code return a value, which is a bad thing. </p>\n\n<p>A lot of compilers will treat <code>while (true)</code> as warnings in their own right, since they could easily lead to infinite loops.  For warning-free code, move the line</p>\n\n<pre><code>return false\n</code></pre>\n\n<p>from where you have it to the very end of the function.  This way, when the user enters 0 the <code>keepgoing</code> variable will break the while loop and fall to the end of the function, returning false.</p>\n"}], "owner": {"reputation": 21, "user_id": 4765109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcf31616c077e62b517677f9e328ac65?s=128&d=identicon&r=PG&f=1", "display_name": "Adaa", "link": "https://stackoverflow.com/users/4765109/adaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1428607313, "creation_date": 1428515458, "last_edit_date": 1428515624, "question_id": 29521829, "link": "https://stackoverflow.com/questions/29521829/how-to-get-rid-of-these-warning", "title": "How to get rid of these warning?", "body": "<pre><code>bool Order::add(std::istream&amp; is){\n   int copies;\n   bool keepgoing = true;\n\n   while (keepgoing){   \n      std::cout &lt;&lt; \"Quantity (0 to quit) : \";\n      is &gt;&gt; copies;  \n      if (copies==0){\n         keepgoing = false;\n         return false;\n\n      }else if (copies&lt;0){\n         std::cout &lt;&lt; \"Enter a positive number. Try again.\"&lt;&lt;std::endl;\n      }else{\n         no_copies+=copies;\n         return true;\n      }\n   }\n}\n</code></pre>\n\n<p>It showing warning that the control may reach end of non-void function.\nAm not getting it.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1428515456, "post_id": 29521805, "comment_id": 47198259, "body": "<code>FileHelper::DeleteFile</code> how is it <code>C</code>?"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 3, "creation_date": 1428515571, "post_id": 29521805, "comment_id": 47198317, "body": "Probably your <code>logPrint</code> is doing something <i>bad</i>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1428515678, "post_id": 29521805, "comment_id": 47198382, "body": "Haven&#39;t cracked open your debugger and stepped through your code yet?"}, {"owner": {"reputation": 2188, "user_id": 1371096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/199a17aadbe13eb23bc4a1327e7dc54b?s=128&d=identicon&r=PG", "display_name": "StarPilot", "link": "https://stackoverflow.com/users/1371096/starpilot"}, "edited": false, "score": 2, "creation_date": 1428515699, "post_id": 29521805, "comment_id": 47198391, "body": "The first thing that springs to mind is that you are passing in a string that has already been deleted. The first call using it succeeds because that memory hasn&#39;t been cleaned/re-used, but the second call shows you the randaom garbage because after the call to <code>logPrint()</code>, that memory area has been reused. The second (and less likely) possibility that occurs to me is that your <code>logPrint()</code> function is doing naughty things to the passed in string."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1428515849, "post_id": 29521805, "comment_id": 47198481, "body": "What happened to the <code>filePath=</code> that is supposed to be in your output?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4765172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/943d88ef3c65bf36c50798c61cd4ecac?s=128&d=identicon&r=PG&f=1", "display_name": "Leo Werner", "link": "https://stackoverflow.com/users/4765172/leo-werner"}, "edited": false, "score": 0, "creation_date": 1428519574, "post_id": 29522900, "comment_id": 47200731, "body": "Yes, it is exactly the problem. I am thinking to use malloca to reserve a memory to store the filepath. Not sure which way is better between malloca and static const."}, {"owner": {"reputation": 379, "user_id": 4697850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64565ff7883702e02339bfec4479753c?s=128&d=identicon&r=PG&f=1", "display_name": "Hannah Zhang", "link": "https://stackoverflow.com/users/4697850/hannah-zhang"}, "reply_to_user": {"reputation": 1, "user_id": 4765172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/943d88ef3c65bf36c50798c61cd4ecac?s=128&d=identicon&r=PG&f=1", "display_name": "Leo Werner", "link": "https://stackoverflow.com/users/4765172/leo-werner"}, "edited": false, "score": 0, "creation_date": 1428519766, "post_id": 29522900, "comment_id": 47200831, "body": "using malloca() is also fine, just remember to free the memory once you are done with the file path, otherwise it will cause memory leak."}], "owner": {"reputation": 379, "user_id": 4697850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64565ff7883702e02339bfec4479753c?s=128&d=identicon&r=PG&f=1", "display_name": "Hannah Zhang", "link": "https://stackoverflow.com/users/4697850/hannah-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1428518795, "creation_date": 1428518795, "answer_id": 29522900, "question_id": 29521805, "link": "https://stackoverflow.com/questions/29521805/why-the-incoming-string-is-different-when-print-it-out-more-than-twice/29522900#29522900", "title": "Why the incoming string is different when print it out more than twice?", "body": "<p>It looks like the caller function used a buffer that is not belong to it to store the \"filePath\" and pass the pointer to your function. The buffer apparently used by the log print function in your case. Here is one example that caller's behavior:</p>\n\n<pre><code>     const char* getFilePath(){\n           const char* p= \"\\mnt\\app\\datafile.db\";      \n           return p;\n     }\n\n     void caller_function(){\n           int ret;\n           const char * path = getFilePath();    \n           ret =  deleteFile(path);\n           if(ret != 1)\n               printf(\"delete File failed \");\n           return;\n     } \n</code></pre>\n\n<p>getFilePath() used a local buffer (char * p) to saved the file path, and pass this local buffer pointer p to caller_function(). After getFilePath() is returned, the local buffer memory is released from stack. The buffer is free to be used by any functions. \nC use a lot passing by reference, as programmer, you have to be very careful and making sure the reference buffer is not destroyed when the function is done.</p>\n\n<p>One way to fix the problem is using a static buffer to store the file path, \"static const\" variables are created once and aren't destroyed when the function exits. </p>\n\n<pre><code>      const char* getFilePath(){\n           static const char* p= \"\\mnt\\app\\datafile.db\";      \n           return p;\n      }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4765172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/943d88ef3c65bf36c50798c61cd4ecac?s=128&d=identicon&r=PG&f=1", "display_name": "Leo Werner", "link": "https://stackoverflow.com/users/4765172/leo-werner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1428518795, "creation_date": 1428515396, "last_edit_date": 1428515733, "question_id": 29521805, "link": "https://stackoverflow.com/questions/29521805/why-the-incoming-string-is-different-when-print-it-out-more-than-twice", "title": "Why the incoming string is different when print it out more than twice?", "body": "<pre><code>int deleteFile(const char* filePath)\n{\n    int rc;\n    int retVal ;\n\n    logPrint(\"filePath=%s \\n\",filePath);  \n    logPrint(\"call delete file,  filePath=%s \\n\",filePath);\n\n    if( (rc=FileHelper::DeleteFile(filePath)) == true &amp;&amp;\n        FileHelper::FileExists(filePath) == false)\n    {\n          logPrint(\" file deleted successfully \\n\");    \n          retVal = 1;   \n    }\n    else\n    {\n         logPrint(\" file deleted failed \\n\");       \n         retVal = -1;\n    }\n    return retVal;\n}\n</code></pre>\n\n<p>The first <code>logPrint(\"filePath=%s \\n\",filePath);</code> </p>\n\n<p>printed out : </p>\n\n<blockquote>\n  <p><code>\"\\mnt\\app\\datafile.db\"</code></p>\n</blockquote>\n\n<p>However, the second <code>logPrint(\"call delete file,  filePath=%s \\n\",filePath);</code></p>\n\n<p>printed out :</p>\n\n<blockquote>\n  <p><code>\"call delete file, call delete file\"</code></p>\n</blockquote>\n\n<p>So it seems the filePath is changed. How it gets changed before deleteFile() returns?</p>\n"}, {"tags": ["c++", "arrays", "pointers", "reverse"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 3, "creation_date": 1428515215, "post_id": 29521737, "comment_id": 47198133, "body": "No, because the answer clearly depends on where the array ends."}], "answers": [{"owner": {"reputation": 151870, "user_id": 1501794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VyUv5.jpg?s=128&g=1", "display_name": "Rahul Tripathi", "link": "https://stackoverflow.com/users/1501794/rahul-tripathi"}, "is_accepted": false, "score": 0, "last_activity_date": 1428515430, "creation_date": 1428515430, "answer_id": 29521814, "question_id": 29521737, "link": "https://stackoverflow.com/questions/29521737/reversing-array-without-using-array-size/29521814#29521814", "title": "Reversing Array Without Using Array Size", "body": "<p>No it is not possible. If you dont know the size of your array then you cant reverse it.</p>\n"}, {"owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "is_accepted": false, "score": 0, "last_activity_date": 1428515465, "creation_date": 1428515465, "answer_id": 29521832, "question_id": 29521737, "link": "https://stackoverflow.com/questions/29521737/reversing-array-without-using-array-size/29521832#29521832", "title": "Reversing Array Without Using Array Size", "body": "<p>It can be possible if you define a \"terminator\" for your array element type, like \\0 used for char arrays. You should always end the array with that value, otherwise you'll obtain runtime errors. But it's always better to use the size or avoid arrays and use vectors since you're using c++ and not c.</p>\n"}, {"owner": {"reputation": 6090, "user_id": 4699340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U4Ums.jpg?s=128&g=1", "display_name": "Andrew Komiagin", "link": "https://stackoverflow.com/users/4699340/andrew-komiagin"}, "is_accepted": false, "score": 2, "last_activity_date": 1428515822, "creation_date": 1428515822, "answer_id": 29521953, "question_id": 29521737, "link": "https://stackoverflow.com/questions/29521737/reversing-array-without-using-array-size/29521953#29521953", "title": "Reversing Array Without Using Array Size", "body": "<p>In general the answer is <strong>NO</strong>.\nIt is only possible for so called terminated arrays like NULL-terminated char array:</p>\n\n<pre><code>void reverse(char* str)\n{\n   int end = -1;\n   int front = -1;\n\n   while (str[++end] != NULL);  \n\n   while (--end &gt; ++front)\n   {   \n      char temp = str[end];\n      str[end] = str[front];\n      str[front] = temp;\n   }\n}\n</code></pre>\n"}, {"owner": {"reputation": 820, "user_id": 4266707, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-fLyyGXepW68/AAAAAAAAAAI/AAAAAAAAABI/RjSsIhv1dvs/photo.jpg?sz=128", "display_name": "Javia1492", "link": "https://stackoverflow.com/users/4266707/javia1492"}, "is_accepted": false, "score": 0, "last_activity_date": 1428515856, "creation_date": 1428515856, "answer_id": 29521966, "question_id": 29521737, "link": "https://stackoverflow.com/questions/29521737/reversing-array-without-using-array-size/29521966#29521966", "title": "Reversing Array Without Using Array Size", "body": "<p>Nope. Without knowing the size, you cannot use the iterators to reverse it and without using iterators and not knowing the size, it wouldnt be possible to reverse that particular array. You would have to declare another array, copy the contents from the first array into the new array, and perform the content reverse on the new array.</p>\n"}], "owner": {"reputation": 521, "user_id": 4625564, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/22d57fed0d310bacb0e4b607d268cb36?s=128&d=identicon&r=PG&f=1", "display_name": "CSCH", "link": "https://stackoverflow.com/users/4625564/csch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 703, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1428516411, "creation_date": 1428515178, "last_edit_date": 1428516411, "question_id": 29521737, "link": "https://stackoverflow.com/questions/29521737/reversing-array-without-using-array-size", "title": "Reversing Array Without Using Array Size", "body": "<p>It is relatively easy to reverse an array given a pointer to the array and the size of the array.</p>\n\n<p>But my question is: Is it possible to reverse the array given just a pointer to the array?</p>\n\n<p>( in C++ btw)</p>\n\n<h2>EDIT</h2>\n\n<p>This was a question apparently asked in an interview at Lockheed Martin. See <a href=\"http://www.glassdoor.com/Interview/Object-Oriented-coding-questions-Given-an-array-you-don-t-know-the-size-make-an-array-that-has-the-elements-in-the-oppo-QTN_208078.htm\" rel=\"nofollow\">here</a></p>\n"}, {"tags": ["c++", "pointers", "c++11", "memory", "smart-pointers"], "answers": [{"owner": {"reputation": 3603, "user_id": 2439734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629f39ca24fb9db9584a7d3609a48bfa?s=128&d=identicon&r=PG", "display_name": "Johan", "link": "https://stackoverflow.com/users/2439734/johan"}, "is_accepted": true, "score": 7, "last_activity_date": 1428515336, "creation_date": 1428515336, "answer_id": 29521781, "question_id": 29521658, "link": "https://stackoverflow.com/questions/29521658/conserving-memory-programming-efficiently-when-using-stdshared-ptr/29521781#29521781", "title": "Conserving memory/programming efficiently when using `std::shared_ptr`", "body": "<p><code>shared_ptr</code> are here to allocate memory for you... Do not use <code>new</code> with them !</p>\n\n<p>The basic usage would be:</p>\n\n<pre><code>std::shared_ptr&lt;MyClass&gt; ptr(new MyClass(THING));\n</code></pre>\n\n<p>But even better:</p>\n\n<pre><code>auto ptr = std::make_shared&lt;MyClass&gt;(THING);\n</code></pre>\n\n<p>The latter provide a lot more guarantee over exception handling and also ensure you won't use <code>new</code> anymore.</p>\n\n<p>Your container will now be something like:</p>\n\n<pre><code>typedef std::vector&lt;std::shared_ptr&lt;MyClass&gt;&gt; Container;\n</code></pre>\n\n<p>For more information read <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\">shared_ptr on cppreference</a>.</p>\n"}], "owner": {"reputation": 3670, "user_id": 2681057, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c2135aa4c462b83c2844bf35d03c447?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Chapman", "link": "https://stackoverflow.com/users/2681057/nick-chapman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 29521781, "answer_count": 1, "score": 0, "last_activity_date": 1428515336, "creation_date": 1428514941, "question_id": 29521658, "link": "https://stackoverflow.com/questions/29521658/conserving-memory-programming-efficiently-when-using-stdshared-ptr", "title": "Conserving memory/programming efficiently when using `std::shared_ptr`", "body": "<p>I am trying to create a bunch of shared pointers and put them into various containers.</p>\n\n<p>Using raw pointers I would think to do the following:</p>\n\n<pre><code>Container a, b, c;\nMyClass *ptr;\nwhile(!finishedCreating){\n    ptr = new MyClass(SOME_CHANGING_THING);\n    a.add(ptr);\n    b.add(ptr);\n    c.add(ptr);\n}\n</code></pre>\n\n<p>But of course now if I want to destruct <code>a</code>, <code>b</code>, and <code>c</code> I would need to delete the pointers that they contain. If I did the following:</p>\n\n<pre><code>~Container{\n    delete[] myListOfPointers;\n}\n</code></pre>\n\n<p>I would get an error when destructing because deleting <code>a</code> would delete the same memory that <code>b</code> and <code>c</code> are supposed to get rid of. </p>\n\n<p>Enter smart pointers, specifically, <code>std::shared_ptr</code>. I would like to do something similar to before where I can create a single entity and use it to point to tons of memory locations but I'm not sure how to do this? </p>\n\n<p>Would I want to create a pointer to a <code>std::shared_ptr</code> so that I can reallocate that pointer such as</p>\n\n<pre><code>std::shared_ptr&lt;MyClass&gt; *ptr = new std::shared_ptr&lt;MyClass&gt;(new MyClass(THING));\n</code></pre>\n"}, {"tags": ["c++", "c++11", "sfinae"], "comments": [{"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 3, "creation_date": 1428515114, "post_id": 29521615, "comment_id": 47198080, "body": "Tested with g++ 4.9.2 and clang++ 3.6.0 I get YES twice, so I&#39;m guessing that you have a compiler bug. What compiler are you using?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1428515392, "post_id": 29521615, "comment_id": 47198237, "body": "@rodrigo sigh. 4.7.2."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1428532501, "post_id": 29521615, "comment_id": 47207457, "body": "4.8 also has NO/YES, so this looks like something that&#39;s been fixed in 4.9"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1428534564, "post_id": 29521615, "comment_id": 47208122, "body": "Hmm, <code>(E*) nullptr</code> works. Interesting. My guess is that GCC 4.7/8 sees that <code>nullptr_t</code> is not a pointer type and called it a substitution failure right there, without looking at whether <code>U</code> is in a deducible context or not."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1428534238, "post_id": 29526568, "comment_id": 47208014, "body": "Or, surprisingly enough, wrapping <code>decltype(U::FOO)*</code> into a non-deduced context - <code>template&lt;class T&gt; struct identity{ using type = T; }; template&lt;class T&gt; using non_deduced = typename identity&lt;T&gt;::type;</code> and use <code>non_deduced&lt;decltype(U::FOO)*&gt;</code>, which makes me think that GCC 4.7 is for whatever reason attempting to deduce U from the second parameter."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1428589038, "post_id": 29526568, "comment_id": 47233911, "body": "Yeah all three of those work, thanks. I guess I just need to upgrade. Glad they have it already fixed at least."}], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 2, "last_activity_date": 1428532757, "creation_date": 1428532757, "answer_id": 29526568, "question_id": 29521615, "link": "https://stackoverflow.com/questions/29521615/sfinae-works-explicitly-but-not-implicitly/29526568#29526568", "title": "SFINAE works explicitly but not implicitly", "body": "<p>Looks like a GCC bug to me. There are plenty of workarounds. For example:</p>\n\n<pre><code>template &lt;typename U&gt;\ninline auto add_FOO(std::vector&lt;U&gt;&amp; v, int) -&gt; decltype(U::FOO, void()) {\n    std::cout &lt;&lt; \"YES\\n\";\n}\n\ntemplate &lt;typename U&gt;\ninline void add_FOO(std::vector&lt;U&gt;&amp; v, ... ) {\n    std::cout &lt;&lt; \"NO\\n\";\n}\n\nadd_FOO(v, 0);\n</code></pre>\n\n<p>or </p>\n\n<pre><code>template &lt;typename U, decltype(U::FOO)* = nullptr&gt;\ninline void add_FOO(std::vector&lt;U&gt;&amp; v, int) {\n    std::cout &lt;&lt; \"YES\\n\";\n}\n\ntemplate &lt;typename U&gt;\ninline void add_FOO(std::vector&lt;U&gt;&amp; v, ... ) {\n    std::cout &lt;&lt; \"NO\\n\";\n}\n\nadd_FOO(v, 0);\n</code></pre>\n"}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 29526568, "answer_count": 1, "score": 1, "last_activity_date": 1428532757, "creation_date": 1428514801, "question_id": 29521615, "link": "https://stackoverflow.com/questions/29521615/sfinae-works-explicitly-but-not-implicitly", "title": "SFINAE works explicitly but not implicitly", "body": "<p>I'm working with multiple different versions of a library that have different sets of enums defined, and I'm trying to switch at compile-time based on whether or not different values exist. I'm using the <code>decltype()</code> vs <code>...</code> trick:</p>\n\n<pre><code>enum E {\n    FOO = 0,\n    BAR\n};\n\ntemplate &lt;typename U&gt;\ninline void add_FOO(std::vector&lt;U&gt;&amp; v, decltype(U::FOO)* ) {\n    std::cout &lt;&lt; \"YES\\n\";\n}\n\ntemplate &lt;typename U&gt;\ninline void add_FOO(std::vector&lt;U&gt;&amp; v, ... ) {\n    std::cout &lt;&lt; \"NO\\n\";\n}\n</code></pre>\n\n<p>But when I try to use it:</p>\n\n<pre><code>std::vector&lt;E&gt; v;\nadd_FOO(v, nullptr);      // prints NO\nadd_FOO&lt;E&gt;(v, nullptr);   // prints YES\n</code></pre>\n\n<p>Why the difference? <code>U</code> should get deduced as <code>E</code>, so why do I need to specify it explicitly? I'm compiling on gcc 4.7.2.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1428514743, "post_id": 29521564, "comment_id": 47197854, "body": "What is the code you are using currently?"}, {"owner": {"reputation": 1, "user_id": 4709352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f94ccde13d87915cf3f1074f1f2f842?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709352/chris"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1428515043, "post_id": 29521564, "comment_id": 47198040, "body": "Do you want me to post all of my code or just a portion of it?  Essentially I set up a vector containing the threads with vector&lt;future&lt;int&gt;&gt; functions, and get the return values with for(i=0; i&lt;functions.size(); i++){value=functions[i].get();}.  Is that what you wanted to know? It&#39;s c++, by the way."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1428515642, "post_id": 29521564, "comment_id": 47198356, "body": "Have you looked at using <a href=\"http://www.boost.org/doc/libs/1_55_0/doc/html/thread/synchronization.html#thread.synchronization.futures\" rel=\"nofollow noreferrer\">boost future</a>?"}, {"owner": {"reputation": 1, "user_id": 4709352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f94ccde13d87915cf3f1074f1f2f842?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709352/chris"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1428515783, "post_id": 29521564, "comment_id": 47198442, "body": "No, I haven&#39;t. Would that work on icbc 13.1?  I&#39;ve never used boost before, is it part of the standard library, and if not, how and where would I get it?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1428516224, "post_id": 29521564, "comment_id": 47198700, "body": "boost is a third party library.  You have to install the library and link it into your project to use it.  I haven&#39;t used it but i believe it is C++98 compatible."}, {"owner": {"reputation": 1, "user_id": 4709352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f94ccde13d87915cf3f1074f1f2f842?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709352/chris"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1428516301, "post_id": 29521564, "comment_id": 47198742, "body": "Ok, thank you! I will try it and let you know if it works!"}, {"owner": {"reputation": 1, "user_id": 4709352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f94ccde13d87915cf3f1074f1f2f842?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709352/chris"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1428554638, "post_id": 29521564, "comment_id": 47213546, "body": "From what I could find, boost does not appear to have any support for async."}], "owner": {"reputation": 1, "user_id": 4709352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f94ccde13d87915cf3f1074f1f2f842?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709352/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428514586, "creation_date": 1428514586, "question_id": 29521564, "link": "https://stackoverflow.com/questions/29521564/icbc-13-1-getting-return-value-from-a-thread-without-includefuture", "title": "icbc 13.1 getting return value from a thread without #include&lt;future&gt;", "body": "<p>So I was working on a project and using #include along with async to get return values from threads.  I got it all working, only to find out a few hours ago that future will only compile on icbc 14.0, whereas I will eventually need to run the program on icbc 13.1 compiler.  My question is, is there a way to get a return value from a thread, say an int, without using future? Thank you!</p>\n"}, {"tags": ["c++", "macos", "qt", "frameworks", "bundle"], "answers": [{"owner": {"reputation": 23728, "user_id": 299399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1907f4968c4c5b5fedb8f7cba422a032?s=128&d=identicon&r=PG", "display_name": "Frank Osterfeld", "link": "https://stackoverflow.com/users/299399/frank-osterfeld"}, "is_accepted": false, "score": 1, "last_activity_date": 1428740135, "last_edit_date": 1428740135, "creation_date": 1428739237, "answer_id": 29575555, "question_id": 29521545, "link": "https://stackoverflow.com/questions/29521545/qt-5-4-application-bundled-for-osx-crashes-when-launched/29575555#29575555", "title": "Qt 5.4 application bundled for OSX crashes when launched", "body": "<p>It's not a crash, it's a deliberate abort. qt_message_fatal() indicates that there's an error message printed on stderr that should give you details. Check for it in the \"Console\" application. Judging from the backtrace, I assume that it can't find the platform plugin (libqcocoa.dylib). Plugins are not linked at build time, so otool won't show them. You must bundle the platform plugin (and other plugins if you need them) with the application, where libqcocoa.dylib goes to Foo.app/Contents/PlugIns/platforms, and run the usual install_name_tool procedure on each plugin.</p>\n\n<p>You might also want to try the \"macdeployqt\" tool shipped with Qt. That works fine at least for the not too complex deployment scenarios (in Qt 4 times it was worse)</p>\n"}], "owner": {"reputation": 41, "user_id": 4765197, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152974166228197/picture?type=large", "display_name": "Joel Kivel&#228;", "link": "https://stackoverflow.com/users/4765197/joel-kivel%c3%a4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1252, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1428740135, "creation_date": 1428514541, "question_id": 29521545, "link": "https://stackoverflow.com/questions/29521545/qt-5-4-application-bundled-for-osx-crashes-when-launched", "title": "Qt 5.4 application bundled for OSX crashes when launched", "body": "<p>I've been trying to bundle my Qt application as OSX .app but encountered weird crashing right when I launch the bundled app. \nThe application uses QtCore, QtGui, QtNetwork, QtWidgets, QtMultimedia and QtOpenGL frameworks, and Jack Audio Connection Kit as a dylib. </p>\n\n<p>I Added all following into .app/Content/Frameworks/  and did name_install_tool'ing to make sure everything is searched from @executable_path/../Frameworks/ and linking each of the frameworks to each other likewise. When doing otool -L to the xxx.app/Content/MacOs/xxx  I get the following:</p>\n\n<pre><code>@executable_path/../Frameworks/libjack.0.dylib (compatibility version 1.0.0, current version 1.0.0)\n@executable_path/../Frameworks/QtMultimedia.framework/Versions/5/QtMultimedia (compatibility version 5.4.0, current version 5.4.0)\n@executable_path/../Frameworks/QtNetwork.framework/Versions/5/QtNetwork (compatibility version 5.4.0, current version 5.4.0)\n@executable_path/../Frameworks/QtCore.framework/Versions/5/QtCore (compatibility version 5.4.0, current version 5.4.0)\n/System/Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration (compatibility version 1.0.0, current version 1.0.0)\n/System/Library/Frameworks/IOKit.framework/Versions/A/IOKit (compatibility version 1.0.0, current version 275.0.0)\n@executable_path/../Frameworks/QtGui.framework/Versions/5/QtGui (compatibility version 5.4.0, current version 5.4.0)\n@executable_path/../Frameworks/QtOpenGL.framework/Versions/5/QtOpenGL (compatibility version 5.4.0, current version 5.4.0)\n@executable_path/../Frameworks/QtWidgets.framework/Versions/5/QtWidgets (compatibility version 5.4.0, current version 5.4.0)\n/System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL (compatibility version 1.0.0, current version 1.0.0)\n/System/Library/Frameworks/AGL.framework/Versions/A/AGL (compatibility version 1.0.0, current version 1.0.0)\n/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 104.1.0)\n/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1213.0.0)\n</code></pre>\n\n<p>Which whould imply everything is ok, but when I run the bundled app separated from the development environment, The application crashes: </p>\n\n<pre><code>Thread 0 Crashed:: Dispatch queue: com.apple.main-thread\n0   libsystem_kernel.dylib          0x00007fff8fca9866 __pthread_kill + 10\n1   libsystem_pthread.dylib         0x00007fff85c9a35c pthread_kill + 92\n2   libsystem_c.dylib               0x00007fff85670b1a abort + 125\n3   org.qt-project.QtCore           0x0000000109819159 qt_message_fatal(QtMsgType, QMessageLogContext const&amp;, QString const&amp;) + 9\n4   org.qt-project.QtCore           0x000000010981a611 QMessageLogger::fatal(char const*, ...) const + 161\n5   org.qt-project.QtGui            0x0000000109e13307 QGuiApplicationPrivate::createPlatformIntegration() + 6359\n6   org.qt-project.QtGui            0x0000000109e1332b QGuiApplicationPrivate::createEventDispatcher() + 27\n7   org.qt-project.QtCore           0x0000000109a34b11 QCoreApplication::init() + 113\n8   org.qt-project.QtCore           0x0000000109a34a87 QCoreApplication::QCoreApplication(QCoreApplicationPrivate&amp;) + 39\n9   org.qt-project.QtGui            0x0000000109e1079e QGuiApplication::QGuiApplication(QGuiApplicationPrivate&amp;) + 14\n10  org.qt-project.QtWidgets        0x000000010a43653e QApplication::QApplication(int&amp;, char**, int) + 206\n</code></pre>\n\n<p>And not crashing from missing frameworks or dylibs. The program works fine when running on development machine with Qt frameworks searched from /Users/xxx/Qt/5.4/clang_64/lib .  </p>\n\n<p>Also running the program so that only jack dylib is searched from @executable_path/../Frameworks/ and Qt libs from /Users/xxx/Qt/.. works fine. So it's not jack (perhaps).</p>\n\n<p>If there is some framework/lib loading during runtime, how could I find out what ? But then again, it should link to /Users/xxx/Qt/... and work ?   </p>\n"}, {"tags": ["c++", "boost", "boost-propertytree"], "comments": [{"owner": {"reputation": 12989, "user_id": 2994596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YU9Zw.png?s=128&g=1", "display_name": "SleuthEye", "link": "https://stackoverflow.com/users/2994596/sleutheye"}, "edited": false, "score": 0, "creation_date": 1428514979, "post_id": 29521533, "comment_id": 47197994, "body": "<code>return &amp;children;</code> returns a pointer to a local instance."}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1428516392, "post_id": 29522057, "comment_id": 47198793, "body": "erm. It&#39;s a property tree. Of course you don&#39;t need to do this"}], "owner": {"reputation": 1785, "user_id": 4680870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClLL3.png?s=128&g=1", "display_name": "tivn", "link": "https://stackoverflow.com/users/4680870/tivn"}, "is_accepted": false, "score": 1, "last_activity_date": 1428517033, "last_edit_date": 1428517033, "creation_date": 1428516102, "answer_id": 29522057, "question_id": 29521533, "link": "https://stackoverflow.com/questions/29521533/creating-a-boost-property-tree-recursively/29522057#29522057", "title": "Creating a boost property tree recursively", "body": "<p><code>ptree children;</code> is a local variable, the memory will not be valid anymore when the method return. Change this to <code>ptree &amp;children = *(new ptree());</code> . But you need to be careful to delete it after use. It will be safer if your method return a normal <code>ptree</code> rather than 'pointer to <code>ptree</code>'. In this case you will not need to worry about <code>new</code> or <code>delete</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1428519434, "post_id": 29522333, "comment_id": 47200647, "body": "Added a full live demo: <a href=\"http://coliru.stacked-crooked.com/a/88fed2aed694554b\" rel=\"nofollow noreferrer\">Live On Coliru</a>"}], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1428520297, "last_edit_date": 1428520297, "creation_date": 1428517025, "answer_id": 29522333, "question_id": 29521533, "link": "https://stackoverflow.com/questions/29521533/creating-a-boost-property-tree-recursively/29522333#29522333", "title": "Creating a boost property tree recursively", "body": "<p>The worst offenders are</p>\n\n<ol>\n<li>returning a dangling pointer to a local <code>ptree</code></li>\n<li><p>this line:</p>\n\n<pre><code>std::shared_ptr&lt;ITreeNode&gt; c(child); // cast raw pointer to shared pointer\n</code></pre>\n\n<p>That's not a cast. It's a conversion constructor. And by calling it you <strong>transfer ownership</strong>. This means, directly, that your loop <em>delete</em> all the children in the original <code>ITreeNode</code> tree (because when <code>c</code> is destructed, it implicitly does <code>delete child</code> since no one else holds the shared pointer).</p></li>\n</ol>\n\n<p>I'm simplifying the code. Will post in a bit.</p>\n\n<pre><code>void WebTreeView::insertProjectNode(ITreeNode const&amp; node, ptree&amp; into) {\n    ptree current;\n\n    for (auto const* child : node.Children())\n        if (child) insertProjectNode(*child, current);\n\n    into.add_child(node.Name(), current);\n}\n</code></pre>\n\n<p>Or, closer to your interface (but missing the step of naming the root:)</p>\n\n<pre><code>ptree WebTreeView::insertProjectNode(ITreeNode const&amp; node) {\n    ptree current;\n\n    for (auto const* child : node.Children())\n        if (child) \n            current.add_child(child-&gt;Name(), insertProjectNode(*child));\n\n    return current;\n}\n</code></pre>\n\n<h2>Full Demo</h2>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/1e99baf621994716\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/property_tree/ptree.hpp&gt;\n#include &lt;memory&gt;\n#include &lt;iostream&gt;\n#include &lt;list&gt;\n\nstruct ITreeNode {\n    std::string Name() const { return _name; }\n    std::list&lt;ITreeNode *&gt; const &amp;Children() const { return _children; }\n\n    ITreeNode(ITreeNode const&amp;)            = delete;\n    ITreeNode&amp; operator=(ITreeNode const&amp;) = delete;\n\n    ITreeNode(std::string name = \"\", std::list&lt;ITreeNode*&gt; const&amp; children = {})\n        : _name(std::move(name)),\n          _children(children)\n    {\n    }\n\n    ~ITreeNode() {\n        for (auto* c : _children)\n            delete c; // TODO make depthfirst deletion using iteration instead\n                      // of breadth-first using recursion to avoid\n                      // stack-overflow on large trees\n    }\n  private:\n    std::string _name;\n    std::list&lt;ITreeNode *&gt; _children;\n};\n\nusing boost::property_tree::ptree;\n\nnamespace demo {\n    ptree insertProjectNode(ITreeNode const&amp; node);\n\n    ptree insertProjectNode(ITreeNode const&amp; node) {\n        ptree current;\n\n        for (auto const* child : node.Children())\n            if (child) \n                current.add_child(child-&gt;Name(), insertProjectNode(*child));\n\n        return current;\n    }\n}\n\n#include &lt;boost/property_tree/xml_parser.hpp&gt;\n\nint main() {\n\n    ITreeNode const source = { \"a\", {\n        new ITreeNode { \"ab\", {\n            new ITreeNode { \"ab0\" },\n            new ITreeNode { \"ab1\" },\n            new ITreeNode { \"ab2\" },\n        } },\n        new ITreeNode { \"ac\", {\n            new ITreeNode { \"ac0\" },\n        } },\n        new ITreeNode { \"ad\", {\n            new ITreeNode { \"ad0\" },\n            new ITreeNode { \"ad1\" },\n            new ITreeNode { \"ad2\" },\n            new ITreeNode { \"ad3\" },\n        } },\n    } };\n\n    ptree root;\n    root.add_child(source.Name(), demo::insertProjectNode(source));\n\n    boost::property_tree::write_xml(std::cout, root,\n            boost::property_tree::xml_writer_make_settings&lt;std::string&gt;(' ', 2));\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;a&gt;\n  &lt;ab&gt;\n    &lt;ab0/&gt;\n    &lt;ab1/&gt;\n    &lt;ab2/&gt;\n  &lt;/ab&gt;\n  &lt;ac&gt;\n    &lt;ac0/&gt;\n  &lt;/ac&gt;\n  &lt;ad&gt;\n    &lt;ad0/&gt;\n    &lt;ad1/&gt;\n    &lt;ad2/&gt;\n    &lt;ad3/&gt;\n  &lt;/ad&gt;\n&lt;/a&gt;\n</code></pre>\n"}], "owner": {"reputation": 1075, "user_id": 1720860, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1dad28876742c8e4942a2dd251b314e1?s=128&d=identicon&r=PG", "display_name": "hAlE", "link": "https://stackoverflow.com/users/1720860/hale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1102, "favorite_count": 0, "accepted_answer_id": 29522333, "answer_count": 2, "score": 1, "last_activity_date": 1428520297, "creation_date": 1428514517, "question_id": 29521533, "link": "https://stackoverflow.com/questions/29521533/creating-a-boost-property-tree-recursively", "title": "Creating a boost property tree recursively", "body": "<p>I am trying to create a boost property tree from a tree structure that I already have. I get a memeroy access violation error on the <code>ptree node = *p</code> line.</p>\n\n<p>How should I change this code to make it work?</p>\n\n<pre><code>ptree* WebTreeView::insertProjectNode(std::shared_ptr&lt;ITreeNode&gt; projectNode)\n{\n\nif (projectNode-&gt;Children().size() == 0)\n{\n    return nullptr;\n}\n\nptree children;\n\nfor (auto child : projectNode-&gt;Children())\n{\n    std::shared_ptr&lt;ITreeNode&gt; c(child); // cast raw pointer to shared pointer\n    std::string nodetext = c-&gt;Name().c_str();\n\n    ptree *p = insertProjectNode(c);\n\n    if (p)\n    {\n        ptree node = *p; \n        children.put_child(nodetext, node);\n    }\n    else\n    {\n        children.put(nodetext, \" \");\n    }\n}\n\nreturn &amp;children;\n}\n</code></pre>\n"}, {"tags": ["c++", "internet-explorer", "ssl", "activex", "indy"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1428628385, "post_id": 29521506, "comment_id": 47254819, "body": "That error means OpenSSL&#39;s <code>SSL_CTX_new()</code> function is failing. Contexts are not shared across connections, Indy creates a new context each per connection. It is rare that <code>SSL_CTX_new()</code> itself would fail, unless OpenSSL itself hasn&#39;t been initialized correctly, or you are sharing an <code>SSLIOHandler</code> object across multiple Indy client components, or something like that. Indy should already be closing the context when the I/O is destroyed. That being said, you are using old versions of Delphi and Indy, so you might also consider upgrading (at least Indy) and see if the problem still continues."}, {"owner": {"reputation": 253, "user_id": 40459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8092e78a8b829899d2a385b6c9156f0?s=128&d=identicon&r=PG", "display_name": "Zeroth", "link": "https://stackoverflow.com/users/40459/zeroth"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1428689385, "post_id": 29521506, "comment_id": 47285519, "body": "Thank you Remy. The problem ended up disappearing when some build parameters were changed(when I was trying to debug the delphi code) and some new directories were included in a project. So it might be a build thing."}], "owner": {"reputation": 253, "user_id": 40459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8092e78a8b829899d2a385b6c9156f0?s=128&d=identicon&r=PG", "display_name": "Zeroth", "link": "https://stackoverflow.com/users/40459/zeroth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428594964, "creation_date": 1428514440, "last_edit_date": 1428594964, "question_id": 29521506, "link": "https://stackoverflow.com/questions/29521506/ssl-error-when-restarting-application", "title": "SSL error when restarting application", "body": "<p>The application is a trusted ActiveX container which needs to support SSL for connections to a third-party service. </p>\n\n<p>That works fine, except in a specific situation:\nIf you keep IE open with another tab, close the page with the active x control, then browse to the page with the active x control on it again, when that control tries to set up SSL again, it fails with \"Error Creating SSL Context\". </p>\n\n<p>Reading other threads on this error leads me to think that I may somehow need to reuse the SSL context instead of setting up a new context. That or close the SSL context properly when the active x control is closed. The error doesn't happen if you restart IE. </p>\n\n<p>More information - we are using Codegear RAD Studio 2007, with the Indy library for SSL. This problem only happens when the active x does the initial log in or validation call through ssl, then sets up another ssl connection to retrieve data from an API. This connection is disposed of, then the active x control is closed down. It is when the control tries to log in again that we receive the error \"Error creating ssl context\". </p>\n"}, {"tags": ["c++", "sockets"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1428514723, "post_id": 29521467, "comment_id": 47197835, "body": "Well, you could ensure encodings match and understand that TCP is a streaming service and receiving one byte per read call is not an error."}], "answers": [{"owner": {"reputation": 36538, "user_id": 471164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/45d4a7ba0fb8e789356f5da87536444d?s=128&d=identicon&r=PG", "display_name": "vitaut", "link": "https://stackoverflow.com/users/471164/vitaut"}, "is_accepted": false, "score": 2, "last_activity_date": 1428516557, "last_edit_date": 1428516557, "creation_date": 1428514720, "answer_id": 29521596, "question_id": 29521467, "link": "https://stackoverflow.com/questions/29521467/how-to-properly-read-from-a-socket-message-c/29521596#29521596", "title": "How to properly read from a socket message (C++)", "body": "<p>According to the <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/read.html\" rel=\"nofollow\">documentation of the POSIX read function</a>:</p>\n\n<blockquote>\n  <p>If fildes refers to a socket, read() shall be equivalent to recv() with no flags set.</p>\n</blockquote>\n\n<p>and the <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/recv.html\" rel=\"nofollow\">documentation of recv</a> says the following</p>\n\n<blockquote>\n  <p>For stream-based sockets, such as SOCK_STREAM, message boundaries shall be ignored. In this case, data shall be returned to the user as soon as it becomes available, and no data shall be discarded.</p>\n</blockquote>\n\n<p>So you should be prepared to receive incomplete data (after one call to read) or use a message-based socket. Possible ways to deal with incomplete data are passing the message size or using a special value such as NUL char to mark the message end.</p>\n"}, {"owner": {"reputation": 343, "user_id": 4674154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989ef37d2458dfe6a2fb9e47a56bec07?s=128&d=identicon&r=PG&f=1", "display_name": "sk_pleasant", "link": "https://stackoverflow.com/users/4674154/sk-pleasant"}, "is_accepted": true, "score": 0, "last_activity_date": 1428515055, "creation_date": 1428515055, "answer_id": 29521698, "question_id": 29521467, "link": "https://stackoverflow.com/questions/29521467/how-to-properly-read-from-a-socket-message-c/29521698#29521698", "title": "How to properly read from a socket message (C++)", "body": "<p>The first example writes the length of the written string as a 16-bit number in front of the actual string. The string is shorter than 256 characters, hence the first byte is 0x00. You need to adjust the way you read the message on the server side. For more information, see <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html#writeUTF(java.lang.String)\" rel=\"nofollow\">this</a>.</p>\n\n<p>In your second example, your problem is that you are not guaranteed that you receive all 4 chars in one buffer. In my opinion, it would be the best to finish your sent string with a null byte and buffer until you receive this byte.</p>\n"}], "owner": {"reputation": 23, "user_id": 4765272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dadb12e6ebc83493f3ef501f2797364?s=128&d=identicon&r=PG&f=1", "display_name": "NullX4", "link": "https://stackoverflow.com/users/4765272/nullx4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 29521698, "answer_count": 2, "score": 1, "last_activity_date": 1428516557, "creation_date": 1428514321, "question_id": 29521467, "link": "https://stackoverflow.com/questions/29521467/how-to-properly-read-from-a-socket-message-c", "title": "How to properly read from a socket message (C++)", "body": "<p>I am using this server code:</p>\n\n<pre><code>     [...]\n     while(1){\n       bzero(buffer,256);\n       n = read(newsockfd,buffer,255);\n       if (n &lt; 0) error(\"ERROR reading from socket\");\n       cout &lt;&lt; \"Message \" &lt;&lt; buffer &lt;&lt; n &lt;&lt; endl;\n     }\n     [...]\n</code></pre>\n\n<p>On the client side, I have, among other things (this is Java):</p>\n\n<pre><code>out.writeUTF(\"MOVE\");\n</code></pre>\n\n<p>This line repeats itself several times. But, when I do that, the output I get is:</p>\n\n<pre><code>Message 6\n</code></pre>\n\n<p>So the n is correct, but the buffer is empty.</p>\n\n<p>I have also tried:</p>\n\n<pre><code>out.writeBytes(\"MOVE\");\n</code></pre>\n\n<p>And sometimes I get this:</p>\n\n<pre><code>Message MOVE4\n</code></pre>\n\n<p>But sometimes I get this:</p>\n\n<pre><code>Message M1\nMessage O1\nMessage V1\nMessage E1\n</code></pre>\n\n<p>So, what can I do? Thank you so much.</p>\n"}, {"tags": ["c++", "static-assert"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 2, "creation_date": 1428514858, "post_id": 29521466, "comment_id": 47197924, "body": "The whole reason <code>typedef foo&lt; 5 &gt; t;</code> compiles is because it <i>doesn&#39;t</i> instantiate your template."}], "answers": [{"comments": [{"owner": {"reputation": 2929, "user_id": 1346512, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c17493831d719174c912567e8778f3dc?s=128&d=identicon&r=PG", "display_name": "Torsten Robitzki", "link": "https://stackoverflow.com/users/1346512/torsten-robitzki"}, "edited": false, "score": 0, "creation_date": 1428516223, "post_id": 29521551, "comment_id": 47198699, "body": "Thank you and all others for all the good solutions. Unfortunately I can flag only one answer as the correct answer."}, {"owner": {"reputation": 2929, "user_id": 1346512, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c17493831d719174c912567e8778f3dc?s=128&d=identicon&r=PG", "display_name": "Torsten Robitzki", "link": "https://stackoverflow.com/users/1346512/torsten-robitzki"}, "edited": false, "score": 0, "creation_date": 1428917773, "post_id": 29521551, "comment_id": 47350148, "body": "while implementing your solution, I found it convenient to use a third template as interface to hide the default parameter."}], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 4, "last_activity_date": 1428514553, "creation_date": 1428514553, "answer_id": 29521551, "question_id": 29521466, "link": "https://stackoverflow.com/questions/29521466/force-static-assert-to-fire-during-type-instantiating/29521551#29521551", "title": "Force static_assert to fire during type instantiating", "body": "<p>One suggestion</p>\n\n<pre><code>template &lt;int I&gt;\nstruct foo_guard {\n  static_assert(I &lt; 5, \"I must be smaller than 5!\");\n  typedef void type;\n};\ntemplate &lt; int I, typename = typename foo_guard&lt;I&gt;::type&gt;\nstruct foo\n{\n};\n</code></pre>\n"}, {"owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "is_accepted": false, "score": 4, "last_activity_date": 1428514635, "creation_date": 1428514635, "answer_id": 29521574, "question_id": 29521466, "link": "https://stackoverflow.com/questions/29521466/force-static-assert-to-fire-during-type-instantiating/29521574#29521574", "title": "Force static_assert to fire during type instantiating", "body": "<p>There might be a more elegant way, but you could make <code>foo</code> a metafunction that refers to itself:</p>\n\n<pre><code>template &lt; int I &gt;\nstruct foo\n{\n    static_assert( I &lt; 5 ,\"I must be smaller than 5!\" );\n    typedef foo&lt;I&gt; type;\n};\n\nint main()\n{\n    typedef typename foo&lt; 5 &gt;::type t; // won't compile\n}\n</code></pre>\n"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": false, "score": 3, "last_activity_date": 1428515362, "creation_date": 1428515362, "answer_id": 29521791, "question_id": 29521466, "link": "https://stackoverflow.com/questions/29521466/force-static-assert-to-fire-during-type-instantiating/29521791#29521791", "title": "Force static_assert to fire during type instantiating", "body": "<p>To keep the impact on existing code as low as possible, you can use a template alias:</p>\n\n<pre><code>template &lt;int I&gt;\nstruct foo_impl\n{\n    static_assert(I &lt; 5 ,\"I must be smaller than 5!\");\n};\n\ntemplate &lt;int I, int = sizeof(foo_impl&lt;I&gt;)&gt;\nusing foo = foo_impl&lt;I&gt;;\n\nint main()\n{\n    typedef foo&lt;5&gt; t;\n}\n</code></pre>\n\n<p>This allows the static assertion to be kept with the rest of the implementation, yet doesn't require the code using <code>foo&lt;N&gt;</code> to use a different syntax for referring to the template.</p>\n"}, {"comments": [{"owner": {"reputation": 2929, "user_id": 1346512, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c17493831d719174c912567e8778f3dc?s=128&d=identicon&r=PG", "display_name": "Torsten Robitzki", "link": "https://stackoverflow.com/users/1346512/torsten-robitzki"}, "edited": false, "score": 0, "creation_date": 1428529966, "post_id": 29521913, "comment_id": 47206395, "body": "That&#39;s definitively a solution I keep in mind for internal parts of the library. But for the interface part I like the verbose static_asserts."}], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1428515709, "creation_date": 1428515709, "answer_id": 29521913, "question_id": 29521466, "link": "https://stackoverflow.com/questions/29521466/force-static-assert-to-fire-during-type-instantiating/29521913#29521913", "title": "Force static_assert to fire during type instantiating", "body": "<pre><code>template &lt; int I, class=std::enable_if_t&lt; (I&lt;5) &gt; &gt;\nstruct foo {};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/06e01cb96e5b4815\" rel=\"nofollow\">live example</a>.</p>\n\n<p>Here we do a SFINAE test that bounds <code>I</code>.</p>\n"}], "owner": {"reputation": 2929, "user_id": 1346512, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c17493831d719174c912567e8778f3dc?s=128&d=identicon&r=PG", "display_name": "Torsten Robitzki", "link": "https://stackoverflow.com/users/1346512/torsten-robitzki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 2, "accepted_answer_id": 29521551, "answer_count": 4, "score": 4, "last_activity_date": 1428515709, "creation_date": 1428514318, "question_id": 29521466, "link": "https://stackoverflow.com/questions/29521466/force-static-assert-to-fire-during-type-instantiating", "title": "Force static_assert to fire during type instantiating", "body": "<p>how could I force the <code>static_assert</code> in this given class:</p>\n\n<pre><code>template &lt; int I &gt;\nstruct foo\n{\n    static_assert( I &lt; 5 ,\"I must be smaller than 5!\" );\n};\n</code></pre>\n\n<p>to fire when I instantiate the template no when I instantiate the resulting type:</p>\n\n<pre><code>int main()\n{\n    typedef foo&lt; 5 &gt; t; // compiles\n    t tt; // will not compile \n}\n</code></pre>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1428514533, "post_id": 29521414, "comment_id": 47197714, "body": "There should be a lot of duplicates regarding this problem. You may fix you logic errors by sketching the algorithm on paper."}, {"owner": {"reputation": 115, "user_id": 2023328, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2f9921a342866e656392a02729cf69e9?s=128&d=identicon&r=PG", "display_name": "user2023328", "link": "https://stackoverflow.com/users/2023328/user2023328"}, "edited": false, "score": 0, "creation_date": 1428515133, "post_id": 29521414, "comment_id": 47198091, "body": "@DieterL&#252;cking I already did this. I seem to have forgotten that the second parameter of substr is count, not end position. Solving that seemed to fix the problem."}], "answers": [{"comments": [{"owner": {"reputation": 5834, "user_id": 2297365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4179be309867f97cb08385c9338c436?s=128&d=identicon&r=PG", "display_name": "huu", "link": "https://stackoverflow.com/users/2297365/huu"}, "edited": false, "score": 0, "creation_date": 1428514706, "post_id": 29521510, "comment_id": 47197825, "body": "To add to this answer, the first time you push back a token into your return vector, <code>currPos</code> is <code>0</code>, obviating the need to use <code>str.find(delimiter) - currPos</code>. You should, however, not separate the first instance of finding the delimiter with any of the others -- this should all happen within the same loop, using the same positioning logic."}], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 1, "last_activity_date": 1428514460, "creation_date": 1428514460, "answer_id": 29521510, "question_id": 29521414, "link": "https://stackoverflow.com/questions/29521414/function-to-split-strings-using-stringfind-and-stringsubstr-returns-wrong-to/29521510#29521510", "title": "Function to split strings using string::find and string::substr returns wrong tokens", "body": "<p>The problem is that second parameter to <code>std::string::substr()</code> is count not position. Your code should be modified from:</p>\n\n<pre><code>if (str.find(delimiter) != string::npos)\n    ret.push_back(str.substr(currPos, str.find(delimiter)));\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>auto fpos = str.find(delimiter);\nif (fpos != string::npos)\n    ret.push_back(str.substr(currPos, fpos - currPos));\n    //                                ^^^^^^^^^^^^^^\n</code></pre>\n\n<p>and so on.</p>\n"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1428515752, "creation_date": 1428515752, "answer_id": 29521929, "question_id": 29521414, "link": "https://stackoverflow.com/questions/29521414/function-to-split-strings-using-stringfind-and-stringsubstr-returns-wrong-to/29521929#29521929", "title": "Function to split strings using string::find and string::substr returns wrong tokens", "body": "<p>It would be more correct to use <code>find_first_of</code> instead of <code>find</code>. Take into account that there can be adjacent blanks in the string and moreover the string can start from a blank. </p>\n\n<p>Here is a demonstrative porgram that shows how the function can be written</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nstd::vector&lt;std::string&gt; split_str( const std::string &amp;s, const char *delimiter )\n{\n    std::vector&lt;std::string&gt; v;\n\n    size_t n = 0;\n\n    for ( std::string::size_type pos = 0;\n          ( pos = s.find_first_not_of( delimiter, pos ) ) != std::string::npos;\n          pos = s.find_first_of( delimiter, pos ) )\n    {\n        ++n;\n    }        \n\n    v.reserve( n );\n\n    for ( std::string::size_type pos = 0;\n          ( pos = s.find_first_not_of( delimiter, pos ) ) != std::string::npos; )\n    {\n        auto next_pos = s.find_first_of( delimiter, pos );\n\n        if ( next_pos == std::string::npos ) next_pos = s.size();\n\n        v.push_back( s.substr( pos, next_pos - pos ) );\n\n        pos = next_pos;\n    }        \n\n    return v;\n}\n\n\nint main() \n{\n    std::string s( \"ab bc cd de \" );\n\n    std::cout &lt;&lt; s &lt;&lt; std::endl;    \n\n    auto v = split_str( s, \" \" );\n\n    for ( auto t : v ) std::cout &lt;&lt; t &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>ab bc cd de \nab\nbc\ncd\nde\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 2023328, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2f9921a342866e656392a02729cf69e9?s=128&d=identicon&r=PG", "display_name": "user2023328", "link": "https://stackoverflow.com/users/2023328/user2023328"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 29521510, "answer_count": 2, "score": 0, "last_activity_date": 1428515752, "creation_date": 1428514160, "question_id": 29521414, "link": "https://stackoverflow.com/questions/29521414/function-to-split-strings-using-stringfind-and-stringsubstr-returns-wrong-to", "title": "Function to split strings using string::find and string::substr returns wrong tokens", "body": "<pre><code>//splits a string into a vector of multiple tokens\nstd::vector&lt;string&gt; split_str(std::string&amp; str, const char* delimiter){\n    std::vector&lt;string&gt; ret;\n    size_t currPos = 0;\n    //Add the first element to the vector\n    if (str.find(delimiter) != string::npos)\n        ret.push_back(str.substr(currPos, str.find(delimiter)));\n\n\n    while (currPos != str.size() - 1){\n\n        if (str.find(delimiter, currPos) != string::npos){\n            //Current at one past the delimiter\n            currPos = str.find(delimiter, currPos) + 1;\n            //Substring everything from one past the delimiter until the next delimiter\n            ret.push_back(str.substr(currPos, str.find(delimiter, currPos)));\n        }\n        //If last whitespace is not right at the end\n        else if (currPos &lt; str.size()){\n            //Add the last element to the vector and end the loop\n            ret.push_back(str.substr(currPos, str.size()));\n            currPos = str.size() - 1;\n        }\n\n    }\n    return ret;\n}\n</code></pre>\n\n<p>The program is supposed to take a string and a delimiter as an input and return a vector of strings (tokens) as an output. However, when I try it with a simple input such as:</p>\n\n<p>ab bc cd de (delimiter is \" \")</p>\n\n<p>The output will be 5 elements: \"ab\", \"bc cd\", \"cd de\", \"de\", \"de\"</p>\n"}, {"tags": ["c++", "templates", "c++11", "sfinae"], "comments": [{"owner": {"reputation": 6093, "user_id": 4293020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/352ea26cb808b26c421ab55184231322?s=128&d=identicon&r=PG", "display_name": "Simon Gibbons", "link": "https://stackoverflow.com/users/4293020/simon-gibbons"}, "edited": false, "score": 4, "creation_date": 1428513455, "post_id": 29521010, "comment_id": 47197097, "body": "If you are willing to add boost as a dependency then <a href=\"http://www.boost.org/doc/libs/1_57_0/libs/tti/doc/html/index.html\" rel=\"nofollow noreferrer\">boost.TTI</a> has what you are looking for in the <code>BOOST_TTI_HAS_MEMBER_FUNCTION</code> macro"}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 2, "creation_date": 1428513683, "post_id": 29521010, "comment_id": 47197211, "body": "Are you totally sure you want to do this? In the standard library they make you spell out exactly which <code>find</code> form you want to use to make it explicitly clear when you&#39;re doing a linear search and when you&#39;re using a more efficient mechanism. As a side note if you really do want to do this, definitely use <code>find</code> instead of <code>count</code>, it&#39;s just avoiding premature pessimization."}, {"owner": {"reputation": 8131, "user_id": 991425, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/31fd767c0343a06af0f15c3521ce2166?s=128&d=identicon&r=PG", "display_name": "Haatschii", "link": "https://stackoverflow.com/users/991425/haatschii"}, "reply_to_user": {"reputation": 6093, "user_id": 4293020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/352ea26cb808b26c421ab55184231322?s=128&d=identicon&r=PG", "display_name": "Simon Gibbons", "link": "https://stackoverflow.com/users/4293020/simon-gibbons"}, "edited": false, "score": 0, "creation_date": 1428514124, "post_id": 29521010, "comment_id": 47197468, "body": "@SimonGibbons: Thanks, it looks like what I need. However I would prefer not to depend on boost at the moment."}, {"owner": {"reputation": 8131, "user_id": 991425, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/31fd767c0343a06af0f15c3521ce2166?s=128&d=identicon&r=PG", "display_name": "Haatschii", "link": "https://stackoverflow.com/users/991425/haatschii"}, "reply_to_user": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1428514316, "post_id": 29521010, "comment_id": 47197583, "body": "@MarkB: As far as I understand <code>std::find</code> also uses different algorithms depending on whether or not we have an ordered container, doesn&#39;t it? At least <a href=\"http://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/find</a> writes that the complexity is at most linear, i.e. can be less than linear for suitable containers. However correct me if I am wrong."}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1428514517, "post_id": 29521010, "comment_id": 47197703, "body": "@Haatschii The standard just says &quot;at most last-first comparisons&quot;, so the assumption is that it&#39;s linear for all container types."}], "answers": [{"comments": [{"owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "edited": false, "score": 1, "creation_date": 1428516046, "post_id": 29521342, "comment_id": 47198609, "body": "VS 2015 (at least preview version) <a href=\"http://blogs.msdn.com/b/vcblog/archive/2014/11/17/c-11-14-17-features-in-vs-2015-preview.aspx\" rel=\"nofollow noreferrer\">doesn&#39;t support it as well</a>"}, {"owner": {"reputation": 8131, "user_id": 991425, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/31fd767c0343a06af0f15c3521ce2166?s=128&d=identicon&r=PG", "display_name": "Haatschii", "link": "https://stackoverflow.com/users/991425/haatschii"}, "edited": false, "score": 0, "creation_date": 1428516858, "post_id": 29521342, "comment_id": 47199114, "body": "Interesting approach. Works well for me (GCC 4.8). Thank you very much."}], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 16, "last_activity_date": 1428513898, "creation_date": 1428513898, "answer_id": 29521342, "question_id": 29521010, "link": "https://stackoverflow.com/questions/29521010/enable-template-function-if-class-has-specific-member-function/29521342#29521342", "title": "Enable template function if class has specific member function", "body": "<p>C++14 feature, reimplemented:</p>\n\n<pre><code>template&lt;class...&gt;struct voider{using type=void;};\ntemplate&lt;class...Ts&gt;using void_t=typename voider&lt;Ts...&gt;::type;\n</code></pre>\n\n<p>A mini metaprogramming library:</p>\n\n<pre><code>template&lt;class...&gt;struct types{using type=types;};\nnamespace details {\n  template&lt;template&lt;class...&gt;class Z, class types, class=void&gt;\n  struct can_apply : std::false_type {};\n  template&lt;template&lt;class...&gt;class Z, class...Ts&gt;\n  struct can_apply&lt; Z, types&lt;Ts...&gt;, void_t&lt; Z&lt;Ts...&gt; &gt; &gt;:\n    std::true_type\n  {};\n}\ntemplate&lt;template&lt;class...&gt;class Z, class...Ts&gt;\nusing can_apply = details::can_apply&lt;Z,types&lt;Ts...&gt;&gt;;\n</code></pre>\n\n<p><code>can_apply&lt; some_template, args... &gt;</code> inherits from <code>true_type</code> iff <code>some_template&lt;args...&gt;</code> is a valid expression (in the immediate context).</p>\n\n<p>Now for your problem:</p>\n\n<pre><code>template&lt;class T, class I&gt;\nusing dot_count_type = decltype( std::declval&lt;T&gt;().count(std::declval&lt;I&gt;()) );\n\ntemplate&lt;class T, class I&gt;\nusing has_dot_count = can_apply&lt;dot_count_type, T, I&gt;;\n</code></pre>\n\n<p>and <code>has_dot_count</code> is a traits class that inherits from <code>true_type</code> iff <code>T.count(I)</code> is a valid expression.</p>\n\n<pre><code>namespace details {\n  template&lt;class C, class I&gt;\n  bool contains(std::false_type, C const&amp; c, I const&amp; i) {\n    for(auto&amp;&amp; x:c) {\n      if(x == i) { return true; }\n    }\n    return false;\n  }\n  template&lt;class C, class I&gt;\n  bool contains(std::true_type, C const&amp; c, I const&amp; i) {\n    return c.count(i) != 0;\n  }\n}\ntemplate&lt;class C, class I&gt;\nbool contains( C const&amp; c, I const&amp; i ) {\n  return details::contains( has_dot_count&lt;C const&amp;,I const&amp;&gt;{}, c, i );\n}\n</code></pre>\n\n<p>which uses tag dispatching instead of SFINAE.</p>\n\n<p>Using <code>find</code> seems like a better idea than <code>.count</code> as an aside.  In fact, in one case you should use <code>.find</code> the other <code>find</code>.  In both cases you should use <code>using std::end; auto e = end(c);</code>.</p>\n\n<p>As an aside, MSVC 2013 (I don't know about 2015) doesn't handle this kind of SFINAE used above.  They call it \"expression SFINAE\".  They have custom extensions to detect the existence of a member function.  But that is because they are far from C++11 standard compliant.</p>\n"}], "owner": {"reputation": 8131, "user_id": 991425, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/31fd767c0343a06af0f15c3521ce2166?s=128&d=identicon&r=PG", "display_name": "Haatschii", "link": "https://stackoverflow.com/users/991425/haatschii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 972, "favorite_count": 4, "accepted_answer_id": 29521342, "answer_count": 1, "score": 12, "last_activity_date": 1440118817, "creation_date": 1428512809, "last_edit_date": 1440118817, "question_id": 29521010, "link": "https://stackoverflow.com/questions/29521010/enable-template-function-if-class-has-specific-member-function", "title": "Enable template function if class has specific member function", "body": "<p>I wrote the following template function, which checks whether an arbitary container contains a specific element:</p>\n\n<pre><code>template&lt;template&lt;class, class...&gt; class container_t, class item_t, class... rest_t&gt;\nbool contains(const container_t&lt;item_t, rest_t...&gt; &amp;_container, const item_t &amp;_item) {\n    for(const item_t &amp;otherItem : _container) {\n        if(otherItem == _item) { return true; }\n    }\n    return false;\n}\n</code></pre>\n\n<p>This works well for most containers. However for all kinds of sets (and maps) it is sub optimal since there we could use:</p>\n\n<pre><code>template&lt;template&lt;class, class...&gt; class set_t, class item_t, class... rest_t&gt;\nbool contains(const set_t&lt;item_t, rest_t...&gt; &amp;_set, const item_t &amp;_item) {\n    return _set.count(_item) &gt; 0;\n}\n</code></pre>\n\n<p>Obviously we can't use both templates simultaneously because of ambiguity. Now I am looking for a way to use <code>std::enable_if</code> to enable the to first template if <code>container_t</code> does not provide a <code>count</code> member function and the second template if it does. However I can't figure out how to check for a specif member function (using C++11).</p>\n"}, {"tags": ["c++", "c", "sockets"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1428513193, "post_id": 29520968, "comment_id": 47196951, "body": "You have not presented the code by which you create the socket, so I don&#39;t know what kind it is.  Inasmuch as you seem to think that there is a meaningful sense in which it can be &quot;disconnected&quot;, however, it must be some type of stream socket.  In that case, why should your program continue to try to read from it after a disconnection?  No data will ever be forthcoming until the socket is reconnected, and that doesn&#39;t happen automatically."}, {"owner": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1428514747, "post_id": 29520968, "comment_id": 47197861, "body": "I think I am exiting the receive loop once I get a SOCKET_ERROR and thats the wrong. As for a single read it might return SOCKET_ERROR and evetually for next reads it might report a success, so I guess here I need to check for time elapsed. Is it so?"}, {"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1428515514, "post_id": 29520968, "comment_id": 47198283, "body": "Use write and error sets: select(&lt;MAXSOCK+1&gt;, &lt;read-set&gt;, &lt;write-set&gt;, &lt;error-set&gt;, timeout);"}], "answers": [{"comments": [{"owner": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "edited": false, "score": 0, "creation_date": 1428514558, "post_id": 29521431, "comment_id": 47197729, "body": "Here I&#39;m dealing with a single socket instance. So shall I really need to consider that (socket_fd + 1)? Moreover I cannot loop like this, I need to check whether my receive method has failed to received data for maximum timeout limit."}, {"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "reply_to_user": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "edited": false, "score": 0, "creation_date": 1428514667, "post_id": 29521431, "comment_id": 47197797, "body": "I am not saying you have to take this code as is. But you should check your return codes, and see if it has EINTR if so you need to take it into account, and yes you need socketdescriptor +1"}, {"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "reply_to_user": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "edited": false, "score": 0, "creation_date": 1428514741, "post_id": 29521431, "comment_id": 47197850, "body": "if EINTR is in the picture you have to create a time variable and take the elapsed time into account. Can complicate the code a bit."}, {"owner": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "edited": false, "score": 0, "creation_date": 1428514840, "post_id": 29521431, "comment_id": 47197913, "body": "I think I am exiting the receive loop once I get a SOCKET_ERROR and thats the wrong. As for a single read it might return SOCKET_ERROR and evetually for next reads it might report a success, so I guess here I need to check for time elapsed. Is it so? If that be the case I need not to use the select() to wait for a timout. Only need to set the socket into non blocking mode. Am I correct?"}, {"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "reply_to_user": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "edited": false, "score": 0, "creation_date": 1428514942, "post_id": 29521431, "comment_id": 47197978, "body": "blocking is easier, you cannot get EINTR if it is blocking mode."}, {"owner": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "edited": false, "score": 0, "creation_date": 1428515021, "post_id": 29521431, "comment_id": 47198023, "body": "Yes, blocking is easier. In blocking mode I can simply set a timeout with setsockopt()."}], "owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "is_accepted": false, "score": 1, "last_activity_date": 1428514856, "last_edit_date": 1428514856, "creation_date": 1428514205, "answer_id": 29521431, "question_id": 29520968, "link": "https://stackoverflow.com/questions/29520968/c-tcp-socket-non-blocking-receive-timeout/29521431#29521431", "title": "c tcp socket non blocking receive timeout", "body": "<p>The first parameter to select should not be 0.\nCorrect usage of select can be found here :\n<a href=\"http://developerweb.net/viewtopic.php?id=2933\" rel=\"nofollow\">http://developerweb.net/viewtopic.php?id=2933</a></p>\n\n<p>the first parameter should be the max value of your socket +1 and take interrupted system calls into account if it is non blocking:</p>\n\n<pre><code>/* Call select() */\ndo {\n   FD_ZERO(&amp;readset);\n   FD_SET(socket_fd, &amp;readset);\n   result = select(socket_fd + 1, &amp;readset, NULL, NULL, NULL);\n} while (result == -1 &amp;&amp; errno == EINTR);\n</code></pre>\n\n<p>This is just example code you probably need the timeout parameter as well.\nIf you can get EINTR this will complicate your required logic, because if you get EINTR you have to do the same call again, but with the remaining time to wait for.</p>\n"}, {"comments": [{"owner": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "edited": false, "score": 0, "creation_date": 1428523652, "post_id": 29522376, "comment_id": 47203162, "body": "Anyone with review comments?"}], "owner": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "is_accepted": false, "score": 0, "last_activity_date": 1428517814, "last_edit_date": 1428517814, "creation_date": 1428517167, "answer_id": 29522376, "question_id": 29520968, "link": "https://stackoverflow.com/questions/29520968/c-tcp-socket-non-blocking-receive-timeout/29522376#29522376", "title": "c tcp socket non blocking receive timeout", "body": "<p>I think for non blocking mode one needs to check the recv() failure along with a timeout value. That mean first select() will return whether the socket is ready to receive data or not. If yes it will go forward else it will sleep until timeout elapses on the select() method call line. But if the receive fails due to some uncertain situations while inside read loop there we need to manually check for socket error and maximum timeout value. If the socket error continues and timeout elapses we need to break it.</p>\n\n<p>I'm done with my receive timeout logic with non blocking mode. \nPlease correct me if I am wrong.</p>\n\n<pre><code>  bool bReturn = true;\n  SetNonBlockingMode(true);\n\n  //check whether the socket is ready to receive\n  fd_set stRead;\n  FD_ZERO(&amp;stRead);\n  FD_SET(m_hSocket, &amp;stRead);\n  int iRet = select(0, &amp;stRead, NULL, NULL, &amp;m_stTimeout);\n\n  DWORD dwStartTime = GetTickCount();\n  DWORD dwCurrentTime = 0;\n\n  //if socket is not ready this line will be hit after 3 sec timeout and go to the end\n  //if it is ready control will go inside the read loop and reads data until data ends or\n  //socket error is getting triggered continuously for more than 3 secs.\n  if ((iRet &gt; 0) &amp;&amp; (FD_ISSET(m_hSocket, &amp;stRead)))\n  {\n    while ((iBuffLen-1) &gt; 0)\n    {\n      int iRcvLen = recv(m_hSocket, pchBuff, iBuffLen-1, 0);\n      dwCurrentTime = GetTickCount();\n\n      if ((iRcvLen == SOCKET_ERROR) &amp;&amp; ((dwCurrentTime - dwStartTime) &gt;= SOCK_TIMEOUT_SECONDS * 1000))\n      {\n        bReturn = false;\n        break;\n      }\n      else if (iRcvLen == 0)\n      {\n        break;\n      }\n\n      pchBuff  += iRcvLen;\n      iBuffLen -= iRcvLen;\n    }\n  }\n\n  SetNonBlockingMode(false);\n  return bReturn;\n</code></pre>\n"}], "owner": {"reputation": 668, "user_id": 3859951, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w86J6.png?s=128&g=1", "display_name": "hypheni", "link": "https://stackoverflow.com/users/3859951/hypheni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1106, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1428517814, "creation_date": 1428512686, "last_edit_date": 1428513422, "question_id": 29520968, "link": "https://stackoverflow.com/questions/29520968/c-tcp-socket-non-blocking-receive-timeout", "title": "c tcp socket non blocking receive timeout", "body": "<p>Trying to write a client which will try to receive data till 3 seconds. I have implemented the connect method using select by below code. </p>\n\n<pre><code>//socket creation \nm_hSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n\nm_stAddress.sin_family           = AF_INET;\n  m_stAddress.sin_addr.S_un.S_addr = inet_addr(pchIP);\nm_stAddress.sin_port             = htons(iPort);\n\nm_stTimeout.tv_sec = SOCK_TIMEOUT_SECONDS;\nm_stTimeout.tv_usec = 0;\n\n//connecting to server\nlong iMode = 1;\nint iResult = ioctlsocket(m_hSocket, FIONBIO, &amp;iMode);\n\nconnect(m_hSocket, (struct sockaddr *)&amp;m_stAddress, sizeof(m_stAddress));\n\nlong iMode = 0;\niResult = ioctlsocket(m_hSocket, FIONBIO, &amp;iMode);\n\nfd_set stWrite;\nFD_ZERO(&amp;stWrite);\nFD_SET(m_hSocket, &amp;stWrite);\n\niResult = select(0, NULL, &amp;stWrite, NULL, &amp;m_stTimeout);            \n\nif((iResult &gt; 0) &amp;&amp; (FD_ISSET(m_hSocket, &amp;stWrite)))\n  return true;\n</code></pre>\n\n<p>But I cannot figure out what I am missing at receiving timeout with below code? It doesn't wait if the server connection got disconnected. It just returns instantly from select method. \nAlso how can I write a non blocking socket call with timeout for socket send.</p>\n\n<pre><code>long iMode = 1;\nint iResult = ioctlsocket(m_hSocket, FIONBIO, &amp;iMode);\n\nfd_set stRead;\nFD_ZERO(&amp;stRead);\nFD_SET(m_hSocket, &amp;stRead);\n\nint iRet = select(0, &amp;stRead, NULL, NULL, &amp;m_stTimeout);\n\nif ((iRet &gt; 0) &amp;&amp; (FD_ISSET(m_hSocket, &amp;stRead)))\n{\n  while ((iBuffLen-1) &gt; 0)\n  {\n    int iRcvLen = recv(m_hSocket, pchBuff, iBuffLen-1, 0);\n    if (iRcvLen == SOCKET_ERROR)\n    {\n      return false;\n    }\n    else if (iRcvLen == 0)\n    {\n      break;\n    }\n\n    pchBuff  += iRcvLen;\n    iBuffLen -= iRcvLen;\n  }\n}    \n</code></pre>\n"}, {"tags": ["c++", "c++11", "destructor"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 4, "creation_date": 1428512746, "post_id": 29520961, "comment_id": 47196705, "body": "<code>const_cast&lt;const MyType*&gt;(this)-&gt;show();</code> ? Although, I&#39;m curious about your use case."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1428512820, "post_id": 29520961, "comment_id": 47196742, "body": "Interesting. Should there be a <code>~Destructor() const</code> feature in C++?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1428512878, "post_id": 29520961, "comment_id": 47196772, "body": "@NeilKirk constant destructor which does not change object?"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 7, "creation_date": 1428512883, "post_id": 29520961, "comment_id": 47196774, "body": "@NeilKirk You&#39;re destroying the object and its members, how could that possibly be &quot;const&quot;?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1428512936, "post_id": 29520961, "comment_id": 47196803, "body": "if it is a do nothing destructor sure but otherwise the destructor can&#39;t be const"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1428513050, "post_id": 29520961, "comment_id": 47196869, "body": "@Borgleader no he wonder why <code>this</code> is not const when called for const object."}, {"owner": {"reputation": 1860, "user_id": 3671410, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/7dAyV.jpg?s=128&g=1", "display_name": "Artur Pyszczuk", "link": "https://stackoverflow.com/users/3671410/artur-pyszczuk"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1428513201, "post_id": 29520961, "comment_id": 47196958, "body": "@Borgleader I don&#39;t know which one will be used, I want user to decide which one will be invoked by making object const or not const. Your solution will always invoke const version."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1428513259, "post_id": 29520961, "comment_id": 47196987, "body": "How can a <b>const</b> object be modified during its destruction!?!?!?!"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 4, "creation_date": 1428513381, "post_id": 29520961, "comment_id": 47197053, "body": "@NeilKirk the same way it is modified during construction"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1428513858, "post_id": 29520961, "comment_id": 47197314, "body": "I fear you need two (interacting) types &#39;My_type&#39; and &#39;My_const_type&#39; to achieve your goal."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1428517448, "post_id": 29520961, "comment_id": 47199449, "body": "@NeilKirk: I recall once wishing there was <code>const</code> overloads of constructors and destructors.  I don&#39;t recall the use-case, but it had something to do with wanting to storing something as a public member by value in mutable objects, or by const-ref in const objects."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1428513183, "post_id": 29521080, "comment_id": 47196944, "body": "I am afraid the code will not have behavior OP needs. He wants const method called for const object only. I am not sure that is possible."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1428513615, "post_id": 29521080, "comment_id": 47197177, "body": "Surely can be done with std::is_const&lt;T&gt; and some template trickery."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 1, "creation_date": 1428513670, "post_id": 29521080, "comment_id": 47197202, "body": "@Robinson really? inside ctor or dtor? How?"}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1428514478, "post_id": 29521080, "comment_id": 47197679, "body": "The wrapper as above is the cleanest way of doing it.  The one I was thinking of is very clunky."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1428517894, "post_id": 29521080, "comment_id": 47199711, "body": "As an aside, I think I would prefer to reserve the name <code>cthis</code> for a pointer rather than a reference."}], "owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": true, "score": 18, "last_activity_date": 1428674300, "last_edit_date": 1428674300, "creation_date": 1428513026, "answer_id": 29521080, "question_id": 29520961, "link": "https://stackoverflow.com/questions/29520961/how-can-i-call-const-member-function-from-destructor/29521080#29521080", "title": "How can I call const member function from destructor", "body": "\n\n<p>The reason the non-const overload is being called when on a <code>const</code> instance is because cv-qualifiers on the current instance aren't considered during destruction.  [class.dtor]/p2:</p>\n\n<blockquote>\n  <p>A destructor is used to destroy objects of its class type. The address of a destructor shall not be taken.\n  A destructor can be invoked for a const, volatile or const volatile object. <strong><code>const</code> and <code>volatile</code>\n  semantics (7.1.6.1) are not applied on an object under destruction.</strong> They stop being in effect when the\n  destructor for the most derived object (1.8) starts.</p>\n</blockquote>\n\n<p>You can use a simply bind <code>*this</code> to a reference to <code>const</code> to get the behavior you need:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>~My_type() { \n    My_type const&amp; ref(*this);\n    ref.show();\n}\n</code></pre>\n\n<p>Or maybe you can use a wrapper that stores a reference and calls <code>show()</code> in its own destructor:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>template&lt;class T&gt;\nstruct MyTypeWrapper : std::remove_cv_t&lt;T&gt; {\n    using Base = std::remove_cv_t&lt;T&gt;;\n    using Base::Base;\n\n    T&amp;       get()       { return ref; }\n    T const&amp; get() const { return ref; }\n\n    ~MyTypeWrapper() { ref.show(); }\nprivate:\n    T&amp; ref = static_cast&lt;T&amp;&gt;(*this);\n};\n</code></pre>\n"}, {"owner": {"reputation": 105, "user_id": 3945388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ea88f2f47576c1bf853f6f80ade22ac?s=128&d=identicon&r=PG&f=1", "display_name": "Bernhard Heinrich", "link": "https://stackoverflow.com/users/3945388/bernhard-heinrich"}, "is_accepted": false, "score": 2, "last_activity_date": 1428516998, "last_edit_date": 1428516998, "creation_date": 1428513061, "answer_id": 29521089, "question_id": 29520961, "link": "https://stackoverflow.com/questions/29520961/how-can-i-call-const-member-function-from-destructor/29521089#29521089", "title": "How can I call const member function from destructor", "body": "<p>I like this question. </p>\n\n<p>Destructors can't be const. They behave like any non-const method. A non-const method calls non-const methods. </p>\n\n<p>But, there are good reasons to call const methods in destructors. (Logging for instance). Having both, a non-const and a const version, called from a non-const method, the non-const is called. </p>\n\n<p>To call the const, it is possible to use static_cast. But... you cannot determine when to cast. (In other words: You don't know if you are const yourself). </p>\n"}, {"comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1428584026, "post_id": 29522440, "comment_id": 47230124, "body": "Non-const member functions can call const <i>and</i> non-const member functions. The behavior being shown in the OP&#39;s example is generally unexpected."}], "owner": {"reputation": 6643, "user_id": 2032021, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/c1c31bca855c458b3f218ef6a303184d?s=128&d=identicon&r=PG", "display_name": "Dr. Debasish Jana", "link": "https://stackoverflow.com/users/2032021/dr-debasish-jana"}, "is_accepted": false, "score": 3, "last_activity_date": 1428517358, "creation_date": 1428517358, "answer_id": 29522440, "question_id": 29520961, "link": "https://stackoverflow.com/questions/29520961/how-can-i-call-const-member-function-from-destructor/29522440#29522440", "title": "How can I call const member function from destructor", "body": "<p>Destructor is supposed to do the cleanup of its members/ This, in a sense, destructor is supposed tomodify the contents of the current object whole doing the cleanup. So, destructor has to be non-const. And, a non-const mnember function can call all non-const member function only. This explains. </p>\n"}], "owner": {"reputation": 1860, "user_id": 3671410, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/7dAyV.jpg?s=128&g=1", "display_name": "Artur Pyszczuk", "link": "https://stackoverflow.com/users/3671410/artur-pyszczuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1259, "favorite_count": 4, "accepted_answer_id": 29521080, "answer_count": 3, "score": 27, "last_activity_date": 1428674300, "creation_date": 1428512659, "question_id": 29520961, "link": "https://stackoverflow.com/questions/29520961/how-can-i-call-const-member-function-from-destructor", "title": "How can I call const member function from destructor", "body": "<p>Is there any possible way to invoke const member function from destructor, when const object is destroyed?</p>\n\n<p>Consider:</p>\n\n<pre><code>struct My_type { \n    ~My_type () { \n        show ();\n    }\n\n    void show () { \n        cout &lt;&lt; \"void show ()\" &lt;&lt; endl;\n    }\n    void show () const { \n        cout &lt;&lt; \"void show () const\" &lt;&lt; endl;\n    }\n};\n</code></pre>\n\n<p>And usage:</p>\n\n<pre><code>My_type mt;\nconst My_type cmt;\nmt.show ();\ncmt.show ();\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>void show ()\nvoid show () const\nvoid show ()\nvoid show ()\n</code></pre>\n\n<p>Can someone explain me why const version of show has not been invoked when <strong>cmt</strong> is destroyed?</p>\n"}, {"tags": ["c++", "arrays", "char", "return"], "comments": [{"owner": {"reputation": 964, "user_id": 3581959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d9512660b1fc2250ffd6ac3a158b1d01?s=128&d=identicon&r=PG&f=1", "display_name": "MCHAppy", "link": "https://stackoverflow.com/users/3581959/mchappy"}, "edited": false, "score": 0, "creation_date": 1428512454, "post_id": 29520819, "comment_id": 47196527, "body": "<code>char c = char(cows + &#39;0&#39;);</code> is there a <code>cows</code> variable ?"}, {"owner": {"reputation": 159, "user_id": 4697022, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d523f606e4c07824bbc8e40ee8fe369c?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/4697022/robert"}, "reply_to_user": {"reputation": 964, "user_id": 3581959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d9512660b1fc2250ffd6ac3a158b1d01?s=128&d=identicon&r=PG&f=1", "display_name": "MCHAppy", "link": "https://stackoverflow.com/users/3581959/mchappy"}, "edited": false, "score": 0, "creation_date": 1428512611, "post_id": 29520819, "comment_id": 47196625, "body": "yes there is, that&#39;s just the end of the code, and I know for sure it&#39;s only a one digit number"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1428512612, "post_id": 29520819, "comment_id": 47196626, "body": "Seems strange to be using <code>std::string</code> internally within the function, then go back to <code>char*</code> for the result. Also, the way you&#39;re converting <code>cows</code> and <code>bulls</code> to characters will only work if there are less than 10 of each."}, {"owner": {"reputation": 219328, "user_id": 15498, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Wi4EN.png?s=128&g=1", "display_name": "Damien_The_Unbeliever", "link": "https://stackoverflow.com/users/15498/damien-the-unbeliever"}, "edited": false, "score": 1, "creation_date": 1428512645, "post_id": 29520819, "comment_id": 47196651, "body": "Can you show the complete header? Also, I suspect you&#39;re being taught bad habits (the fact that this seems to be <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> given the <code>cout</code> usage, but then you&#39;re being asked to work in terms of raw pointers would indicate this)"}, {"owner": {"reputation": 3540, "user_id": 4182275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sF9cb.png?s=128&g=1", "display_name": "NikolayK", "link": "https://stackoverflow.com/users/4182275/nikolayk"}, "edited": false, "score": 0, "creation_date": 1428512835, "post_id": 29520819, "comment_id": 47196748, "body": "1)  You can&#39;t compare <code>char*</code> with <code>==</code>, like you do in <code>while</code> condition, use <code>strcmp</code>. 2) In this case there is no one line solution. You can initialize <code>result</code> with <code>NULL</code>, put <code>if</code> condition in the beginning of the loop, if <code>result</code> is not null, then do <code>delete</code>. 3) Also you need to correctly allocate memory. The size of the string is not always 18."}, {"owner": {"reputation": 159, "user_id": 4697022, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d523f606e4c07824bbc8e40ee8fe369c?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/4697022/robert"}, "edited": false, "score": 0, "creation_date": 1428512979, "post_id": 29520819, "comment_id": 47196836, "body": "class BullsAndCows {     public:         BullsAndCows(int = 4);         BullsAndCows(int[], int);          void SetContainerSize(int);         void SetContainer(int*);          bool IsInsideContainer(int);         bool CowElement(int*, int, int);         bool BullElement(int*, int, int);         char* TryToGuess(int);         void start();         // void print();      private:         int sizeOfContainer;         int* numbersContainer;         int numberOfGuesses; };"}, {"owner": {"reputation": 159, "user_id": 4697022, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d523f606e4c07824bbc8e40ee8fe369c?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/4697022/robert"}, "edited": false, "score": 0, "creation_date": 1428513018, "post_id": 29520819, "comment_id": 47196858, "body": "any way I can separate them :/"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1428513022, "post_id": 29520819, "comment_id": 47196860, "body": "@Robert Don&#39;t put code in comments, edit the question."}, {"owner": {"reputation": 219328, "user_id": 15498, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Wi4EN.png?s=128&g=1", "display_name": "Damien_The_Unbeliever", "link": "https://stackoverflow.com/users/15498/damien-the-unbeliever"}, "edited": false, "score": 0, "creation_date": 1428513042, "post_id": 29520819, "comment_id": 47196864, "body": "@Robert - there&#39;s an edit link (bottom left, below tags). You can&#39;t show code in comments but you can improve your <i>question</i>"}, {"owner": {"reputation": 159, "user_id": 4697022, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d523f606e4c07824bbc8e40ee8fe369c?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/4697022/robert"}, "edited": false, "score": 0, "creation_date": 1428513528, "post_id": 29520819, "comment_id": 47197141, "body": "Damien could you please explain more about these bad habits"}], "answers": [{"comments": [{"owner": {"reputation": 3540, "user_id": 4182275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sF9cb.png?s=128&g=1", "display_name": "NikolayK", "link": "https://stackoverflow.com/users/4182275/nikolayk"}, "edited": false, "score": 0, "creation_date": 1428512902, "post_id": 29520994, "comment_id": 47196783, "body": "You delete variable, and then check if it&#39;s equals to something."}, {"owner": {"reputation": 219328, "user_id": 15498, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Wi4EN.png?s=128&g=1", "display_name": "Damien_The_Unbeliever", "link": "https://stackoverflow.com/users/15498/damien-the-unbeliever"}, "edited": false, "score": 0, "creation_date": 1428512927, "post_id": 29520994, "comment_id": 47196798, "body": "I admit I&#39;m rusty but isn&#39;t this the moral equivalent of use after free?"}, {"owner": {"reputation": 159, "user_id": 4697022, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d523f606e4c07824bbc8e40ee8fe369c?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/4697022/robert"}, "edited": false, "score": 0, "creation_date": 1428513365, "post_id": 29520994, "comment_id": 47197043, "body": "Thank you and Nikolay, now it works fine, no mem leak :)"}], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1428512938, "last_edit_date": 1428512938, "creation_date": 1428512752, "answer_id": 29520994, "question_id": 29520819, "link": "https://stackoverflow.com/questions/29520819/where-to-delete-returned-char/29520994#29520994", "title": "Where to delete returned char*", "body": "<p>You need to <code>delete result[]</code> each time through the loop, after you're done using it. Otherwise, you'll leak that memory the next time you assign to the variable. But this also means that you can't use <code>result</code> in the <code>while</code> clause, because it has already been deleted. You'll have to test this inside the loop.</p>\n\n<pre><code>bool done = false;\ndo\n{\n    cout &lt;&lt; \"Your guess:\";\n    cin &gt;&gt; guess;\n    result = TryToGuess(guess);\n    cout &lt;&lt; \"\\t\\t\\t[\" &lt;&lt; guess &lt;&lt; \"] =&gt; \" &lt;&lt; result &lt;&lt; endl;\n    done = strcmp(result, \"Congarulations! You made a right guess!\") == 0;\n    delete result[];\n} while (!done);\n</code></pre>\n\n<p>Note also that you don't use <code>==</code> to compare C strings (it will compare the pointer values, not the contents of the strings), you must use <code>strcmp</code>.</p>\n"}], "owner": {"reputation": 159, "user_id": 4697022, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d523f606e4c07824bbc8e40ee8fe369c?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/4697022/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 29520994, "answer_count": 1, "score": 0, "last_activity_date": 1435932582, "creation_date": 1428512174, "last_edit_date": 1435932582, "question_id": 29520819, "link": "https://stackoverflow.com/questions/29520819/where-to-delete-returned-char", "title": "Where to delete returned char*", "body": "<p>I have a homework assignment to implement a bulls and cows game class, our tutor gave us a header and we have to implement it, in it there's this function</p>\n\n<pre><code>char* TryToGuess(int);\n</code></pre>\n\n<p>What it does is it receives an int and has to return char* containing how many bulls and cows you've guessed. What I did was create a string, pass all the information in it and then convert it to a char* like so:</p>\n\n<pre><code>string result = \"Cows:\";\nchar c = char(cows + '0');\nresult += c;\nresult += \"    Bulls:\";\nchar b = char(bulls + '0');\nresult += b;\nchar* finalResult = new char[18];\nstrcpy(finalResult, result.c_str());\nreturn finalResult;\n</code></pre>\n\n<p>We also have a function called start where we execute our game, my code for it is </p>\n\n<pre><code>char* result;\nint guess;\ndo\n{\n    cout &lt;&lt; \"Your guess:\";\n    cin &gt;&gt; guess;\n    result = TryToGuess(guess);\n    cout &lt;&lt; \"\\t\\t\\t[\" &lt;&lt; guess &lt;&lt; \"] =&gt; \" &lt;&lt; result &lt;&lt; endl;\n} while (result != \"Congarulations! You made a right guess!\");\ncout &lt;&lt; \"\\n\\n\\t\\t It took you \" &lt;&lt; numberOfGuesses &lt;&lt; \" guesses to finish the game.\\n\";\n</code></pre>\n\n<p>Problem is there's a memory leak and I don't know where to put the delete[], it can't be inside the cycle because the condition in while won't be met. Thanks in advance for your help.</p>\n\n<p>PS: I can't change the return type to string, my tutor has set it so.</p>\n\n<p>PS2: Here's the full header</p>\n\n<pre><code>#ifndef BULLSANDCOWS_H_\n#define BULLSANDCOWS_H_\nclass BullsAndCows\n{\n    public:\n        BullsAndCows(int = 4);\n        BullsAndCows(int[], int);\n\n        void SetContainerSize(int);\n        void SetContainer(int*);\n\n        bool IsInsideContainer(int);\n        bool CowElement(int*, int, int);\n        bool BullElement(int*, int, int);\n        char* TryToGuess(int);\n        void start();\n\n       // void print();\n\n    private:\n        int sizeOfContainer;\n        int* numbersContainer;\n        int numberOfGuesses;\n};\n\n#endif // BULLSANDCOWS_H_\n</code></pre>\n"}, {"tags": ["c++", "linux", "timer", "real-time"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1428512267, "post_id": 29520768, "comment_id": 47196415, "body": "There&#39;s <code>std::chrono</code> and <code>std::thread</code>. Do you have any particular constraints regarding the timer&#39;s resolution?"}, {"owner": {"reputation": 141, "user_id": 3850181, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/607c41c01815f80fe1b74120cb23d173?s=128&d=identicon&r=PG&f=1", "display_name": "Dm3Ch", "link": "https://stackoverflow.com/users/3850181/dm3ch"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1428512385, "post_id": 29520768, "comment_id": 47196482, "body": "As I know <code>std::chrono</code> and <code>std::thread</code> doesn&#39;t support soft real time."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1428512471, "post_id": 29520768, "comment_id": 47196540, "body": "<i>&quot;soft real time&quot;</i> Please elaborate in your question what exactly you&#39;re referring to."}, {"owner": {"reputation": 141, "user_id": 3850181, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/607c41c01815f80fe1b74120cb23d173?s=128&d=identicon&r=PG&f=1", "display_name": "Dm3Ch", "link": "https://stackoverflow.com/users/3850181/dm3ch"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1428512537, "post_id": 29520768, "comment_id": 47196576, "body": "My system could be overloaded. So I want this process work on overloaded system without freezing."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 2, "creation_date": 1428512578, "post_id": 29520768, "comment_id": 47196605, "body": "@Dm3Ch then give your process higher priority than the process which is overloading your system."}, {"owner": {"reputation": 141, "user_id": 3850181, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/607c41c01815f80fe1b74120cb23d173?s=128&d=identicon&r=PG&f=1", "display_name": "Dm3Ch", "link": "https://stackoverflow.com/users/3850181/dm3ch"}, "edited": false, "score": 0, "creation_date": 1428512630, "post_id": 29520768, "comment_id": 47196640, "body": "Under &quot;soft real time&quot; i means that it should work with soft real time requirement"}, {"owner": {"reputation": 141, "user_id": 3850181, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/607c41c01815f80fe1b74120cb23d173?s=128&d=identicon&r=PG&f=1", "display_name": "Dm3Ch", "link": "https://stackoverflow.com/users/3850181/dm3ch"}, "edited": false, "score": 0, "creation_date": 1428512691, "post_id": 29520768, "comment_id": 47196674, "body": "But i want timer guaranty sleeping time with ms resolution."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1428512745, "post_id": 29520768, "comment_id": 47196704, "body": "@Dm3Ch <i>&quot;... with soft real time requirement ...&quot;</i> What kinda buzzword speech is this please? Again, can you refer to a concise definition for this term? <i>&quot;But i want timer guaranty sleeping time with ms resolution.&quot;</i> Ahh, now we&#39;re getting closer."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1428520031, "post_id": 29520768, "comment_id": 47200983, "body": "Read <a href=\"http://man7.org/linux/man-pages/man7/time.7.html\" rel=\"nofollow noreferrer\">time(7)</a>"}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 0, "creation_date": 1445525531, "post_id": 29520768, "comment_id": 54368164, "body": "Annoying that this quesion was closed, and with a bad motivation. He asked for a good timer, not a &#39;book, tool, software library, tutorial or other off-site resource&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 3850181, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/607c41c01815f80fe1b74120cb23d173?s=128&d=identicon&r=PG&f=1", "display_name": "Dm3Ch", "link": "https://stackoverflow.com/users/3850181/dm3ch"}, "edited": false, "score": 0, "creation_date": 1428514874, "post_id": 29521280, "comment_id": 47197936, "body": "How can I change sleeping time when I called <code>sleep_for()</code>?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 141, "user_id": 3850181, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/607c41c01815f80fe1b74120cb23d173?s=128&d=identicon&r=PG&f=1", "display_name": "Dm3Ch", "link": "https://stackoverflow.com/users/3850181/dm3ch"}, "edited": false, "score": 0, "creation_date": 1428516862, "post_id": 29521280, "comment_id": 47199118, "body": "@Dm3Ch <i>&quot;How can I change sleeping time ...&quot;</i> You cannot, once <code>sleep_for()</code> was called. You might consider a more sophisticated timer based on e.g. a condition variable that enables you to interrupt prematurely."}, {"owner": {"reputation": 141, "user_id": 3850181, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/607c41c01815f80fe1b74120cb23d173?s=128&d=identicon&r=PG&f=1", "display_name": "Dm3Ch", "link": "https://stackoverflow.com/users/3850181/dm3ch"}, "edited": false, "score": 0, "creation_date": 1428517784, "post_id": 29521280, "comment_id": 47199637, "body": "What you could recomend?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 141, "user_id": 3850181, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/607c41c01815f80fe1b74120cb23d173?s=128&d=identicon&r=PG&f=1", "display_name": "Dm3Ch", "link": "https://stackoverflow.com/users/3850181/dm3ch"}, "edited": false, "score": 0, "creation_date": 1428520032, "post_id": 29521280, "comment_id": 47200984, "body": "@Dm3Ch That&#39; s completely out of scope of your original question here. Please ask another one."}], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 1, "last_activity_date": 1428523040, "last_edit_date": 1428523040, "creation_date": 1428513671, "answer_id": 29521280, "question_id": 29520768, "link": "https://stackoverflow.com/questions/29520768/linux-c-timer-with-soft-real-time-support/29521280#29521280", "title": "Linux C++ Timer with Soft Real Time Support", "body": "<p>As you clarified about that <em>soft real time requirement</em> in your comment:</p>\n\n<blockquote>\n  <p><em>\"But i want timer guaranty sleeping time with ms resolution.\"</em></p>\n</blockquote>\n\n<p>From standard c++ you can check the actually available resolution for e.g. the <code>std::chrono::high_resolution_clock</code> or <code>std::chrono::system_clock</code> using the <a href=\"http://en.cppreference.com/w/cpp/chrono/high_resolution_clock\" rel=\"nofollow\"><code>std::chrono::high_resolution_clock::period</code></a> member type. If your current system implementation doesn't meet the required resolution, you may throw an exception or such.</p>\n\n<p>Here's a <a href=\"http://ideone.com/m68aZz\" rel=\"nofollow\">demo</a> how to do it:</p>\n\n<pre><code>#include &lt;chrono&gt;\n#include &lt;ratio&gt;\n#include &lt;stdexcept&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    try {\n        // Uncomment any of the following checks for a particular \n        // resolution in question\n        if(std::ratio_less_equal&lt;std::nano\n          ,std::chrono::system_clock::period&gt;::value) {\n        // if(std::ratio_less_equal&lt;std::micro\n        //     ,std::chrono::system_clock::period&gt;::value) {\n        // if(std::ratio_less_equal&lt;std::milli\n        //     ,std::chrono::system_clock::period&gt;::value) {\n        // if(std::ratio_less_equal&lt;std::centi\n        //     ,std::chrono::system_clock::period&gt;::value) {\n            throw std::runtime_error\n                (\"Clock doesn't meet the actual resolution requirements.\");\n        }\n    }\n    catch(const std::exception&amp; ex) {\n        std::cout &lt;&lt; \"Exception: '\" &lt;&lt; ex.what() &lt;&lt; \"'\" &lt;&lt; std::endl;\n    }\n    std::cout &lt;&lt; \"The curently available resolution is: \" \n              &lt;&lt; std::chrono::system_clock::period::num &lt;&lt; \"/\" \n              &lt;&lt; std::chrono::system_clock::period::den\n              &lt;&lt; \" seconds\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The output (at ideone system) is:</p>\n\n<pre><code>Exception: 'Clock doesn't meet the actual resolution requirements.'\nThe curently available resolution is: 1/1000000000 seconds\n</code></pre>\n\n<hr>\n\n<p>For sleeping a predefined time period, you can use <a href=\"http://en.cppreference.com/w/cpp/thread/sleep_for\" rel=\"nofollow\"><code>std::thread::sleep_for()</code></a> to realize a timer.</p>\n"}], "owner": {"reputation": 141, "user_id": 3850181, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/607c41c01815f80fe1b74120cb23d173?s=128&d=identicon&r=PG&f=1", "display_name": "Dm3Ch", "link": "https://stackoverflow.com/users/3850181/dm3ch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "closed_date": 1428547170, "accepted_answer_id": 29521280, "answer_count": 1, "score": -1, "last_activity_date": 1428523040, "creation_date": 1428512031, "question_id": 29520768, "link": "https://stackoverflow.com/questions/29520768/linux-c-timer-with-soft-real-time-support", "closed_reason": "Not suitable for this site", "title": "Linux C++ Timer with Soft Real Time Support", "body": "<p>I'm writing scheduler for my system, that should collect data from sensors.<br>\nMy scheduler have got list with planed tasks. Scheduler running in one thread and running tasks in individual threads.</p>\n\n<p>Please, recommend me timer in C++, that support soft real time.<br>\nI'm writing code for vanilla Linux.</p>\n\n<p>P.S. I didn't found same question on StackOverflow.<br>\nP.S.S Sorry for my bad English</p>\n"}, {"tags": ["c++", "class", "variables", "types", "ascii"], "comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 3, "creation_date": 1428511753, "post_id": 29520668, "comment_id": 47196081, "body": "Could you please include the full error message?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 10, "creation_date": 1428511787, "post_id": 29520668, "comment_id": 47196099, "body": "Psychic debugger says: recursive headers."}, {"owner": {"reputation": 11, "user_id": 4604230, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1559580190963009/picture?type=large", "display_name": "Michael Schroeder", "link": "https://stackoverflow.com/users/4604230/michael-schroeder"}, "edited": false, "score": 0, "creation_date": 1428511866, "post_id": 29520668, "comment_id": 47196148, "body": "error C2146: syntax error : missing &#39;;&#39; before identifier &#39;_player&#39; error C4430: missing type specifier - int assumed. Note: C++ does not support default-int"}, {"owner": {"reputation": 11, "user_id": 4604230, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1559580190963009/picture?type=large", "display_name": "Michael Schroeder", "link": "https://stackoverflow.com/users/4604230/michael-schroeder"}, "edited": false, "score": 0, "creation_date": 1428511934, "post_id": 29520668, "comment_id": 47196203, "body": "Mooing Duck, i think thats because i accidentally labled this as level.h instead of gamesystem.h"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1428511983, "post_id": 29520668, "comment_id": 47196237, "body": "Please edit the question to include the error message. It means <code>Player</code> isn&#39;t defined at that point. Without seeing Player.h, I cannot say why."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1428512015, "post_id": 29520668, "comment_id": 47196254, "body": "@MichaelSchroeder 1st: Put additional information by <a href=\"http://stackoverflow.com/posts/29520668/edit\">editing your question</a> please. 2nd: Please don&#39;t use leading underscores (<code>_</code>) for variable names. These are reserved for standard language implementation defined symbols."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1428512024, "post_id": 29520668, "comment_id": 47196265, "body": "Does Player.h include GameSystem.h?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1428512129, "post_id": 29520668, "comment_id": 47196336, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/625799/resolve-circular-dependencies-in-c\">Resolve circular dependencies in c++</a>"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1428512301, "post_id": 29520668, "comment_id": 47196433, "body": "Why does Player.h need to include GameSystem.h?"}, {"owner": {"reputation": 11, "user_id": 4604230, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1559580190963009/picture?type=large", "display_name": "Michael Schroeder", "link": "https://stackoverflow.com/users/4604230/michael-schroeder"}, "edited": false, "score": 0, "creation_date": 1428512342, "post_id": 29520668, "comment_id": 47196454, "body": "I added the Player.h                                                                                 error C2146: syntax error : missing &#39;;&#39; before identifier &#39;_player&#39;                                                                                                                           error C4430: missing type specifier - int assumed. Note: C++ does not support default-int"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1428512363, "post_id": 29520668, "comment_id": 47196466, "body": "Please refrain from using leading &#39;_&#39; in variable names, as they may be reserved for compiler usage.  (You could simply remove the character or place it at the end of the identifier.)"}, {"owner": {"reputation": 11, "user_id": 4604230, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1559580190963009/picture?type=large", "display_name": "Michael Schroeder", "link": "https://stackoverflow.com/users/4604230/michael-schroeder"}, "edited": false, "score": 0, "creation_date": 1428512466, "post_id": 29520668, "comment_id": 47196534, "body": "why was i tought that _ was used for pricate variables?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1428512584, "post_id": 29520668, "comment_id": 47196610, "body": "@MichaelSchroeder: Talk to the person who taught you the coding style, as they would know."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1428512619, "post_id": 29520668, "comment_id": 47196634, "body": "Are there line numbers associated with your error messages?"}, {"owner": {"reputation": 11, "user_id": 4604230, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1559580190963009/picture?type=large", "display_name": "Michael Schroeder", "link": "https://stackoverflow.com/users/4604230/michael-schroeder"}, "edited": false, "score": 0, "creation_date": 1428512667, "post_id": 29520668, "comment_id": 47196659, "body": "Do you know whay these variables are unspecified?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1428512696, "post_id": 29520668, "comment_id": 47196677, "body": "Your <code>Player.h</code> file doesn&#39;t use any of the header files you are including.  Remove them.  Put them in the source file."}, {"owner": {"reputation": 11, "user_id": 4604230, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1559580190963009/picture?type=large", "display_name": "Michael Schroeder", "link": "https://stackoverflow.com/users/4604230/michael-schroeder"}, "edited": false, "score": 0, "creation_date": 1428512713, "post_id": 29520668, "comment_id": 47196687, "body": "line 22 of GameSystem.h"}, {"owner": {"reputation": 185, "user_id": 3282085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16720da2a470091bb28232d85434c332?s=128&d=identicon&r=PG&f=1", "display_name": "user3282085", "link": "https://stackoverflow.com/users/3282085/user3282085"}, "edited": false, "score": 0, "creation_date": 1428512919, "post_id": 29520668, "comment_id": 47196794, "body": "Though not the problem: does your player.h file have a #pragma once at the top?  If not you should add one."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1428512963, "post_id": 29520668, "comment_id": 47196827, "body": "You got to show the cpp file where it all start - that is where the problem can be found. My guess is that GameSystem.h is included before Player.h and Level.h."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1428514495, "post_id": 29520668, "comment_id": 47197691, "body": "@MichaelSchroeder You should assume that half of what you are taught about C++ programming at a school is either wrong or obsolete."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1428513949, "post_id": 29521107, "comment_id": 47197367, "body": "There is a <i>third</i> solution, and that is to remove the <code>#include &quot;GameSystem.h&quot;</code> from <code>Player.h</code>, since the <code>Player</code> class doesn&#39;t reference <code>GameSystem</code>."}, {"owner": {"reputation": 169, "user_id": 4715062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce1e0666c8aaa02ec6ba781f991caab5?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Bedard", "link": "https://stackoverflow.com/users/4715062/jonathan-bedard"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1428522875, "post_id": 29521107, "comment_id": 47202675, "body": "@Thomas Matthews, that&#39;s what my 1st solution is"}, {"owner": {"reputation": 175, "user_id": 7101158, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/76d66e04094c0d43a9053a1d2858eb19?s=128&d=identicon&r=PG&f=1", "display_name": "yolob 21", "link": "https://stackoverflow.com/users/7101158/yolob-21"}, "edited": false, "score": 0, "creation_date": 1566073044, "post_id": 29521107, "comment_id": 101543445, "body": "hint about dependecy problem helped"}], "owner": {"reputation": 169, "user_id": 4715062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce1e0666c8aaa02ec6ba781f991caab5?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Bedard", "link": "https://stackoverflow.com/users/4715062/jonathan-bedard"}, "is_accepted": false, "score": 0, "last_activity_date": 1428513102, "creation_date": 1428513102, "answer_id": 29521107, "question_id": 29520668, "link": "https://stackoverflow.com/questions/29520668/c-does-not-support-default-int/29521107#29521107", "title": "C++ does not support default-int", "body": "<p>You have a dependency problem here, there are two solutions.</p>\n\n<p>First, Player.h isn't actually dependent on GameSystem.h, so don't include GameSystem.h in Player.h.</p>\n\n<pre><code>//Player.h\n#pragma once\n//Remove GameSystem.h\n//#include \"GameSystem.h\"\n#include \"Level.h\"\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;conio.h&gt;\n#include &lt;vector&gt;\n</code></pre>\n\n<p>If, for some reason, you DO need the GameSystem class declaration in the Player class, just do this:</p>\n\n<pre><code>//Player.h\n#pragma once\n#include \"Level.h\"\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;conio.h&gt;\n#include &lt;vector&gt;\n\n//Declare the class\nclass GameSystem;\n</code></pre>\n\n<p>You will need to include the full header file in the .cpp file, but you don't actually need the full class definition to use a class in another classes definition (actually, GameSystem.h doesn't even need to include Player.h, it could just declare but not define the Player class)</p>\n"}, {"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1428513313, "post_id": 29521143, "comment_id": 47197022, "body": "Also, remove the <code>using namespace std;</code> from the header files.  Your <code>Player</code> class doesn&#39;t use anything from <code>namespace std</code>."}], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 2, "last_activity_date": 1428514351, "last_edit_date": 1428514351, "creation_date": 1428513206, "answer_id": 29521143, "question_id": 29520668, "link": "https://stackoverflow.com/questions/29520668/c-does-not-support-default-int/29521143#29521143", "title": "C++ does not support default-int", "body": "<p>Your <code>GameSystem.h</code> file has the line:</p>\n\n<pre><code>#include \"Player.h\"\n</code></pre>\n\n<p>Your <code>Player.h</code> file has the line:</p>\n\n<pre><code>#include \"GameSystem.h\"\n</code></pre>\n\n<p>This can't be good.  And besides the <code>Player</code> class declaration in the header file doesn't use anything from <code>GameSystem.h</code>, so remove the <code>GameSystem.h</code> from the header file (I recommend removing all the <code>#include</code> that don't resolve anything in Player.h header file).  </p>\n\n<p><strong>Edit 1:</strong><br>\nI changed the header files and made them use <a href=\"http://en.wikipedia.org/wiki/Include_guard\" rel=\"nofollow\">Include Guards</a>.  I don't get any errors.<br>\nPlayer.hpp:  </p>\n\n<pre><code>#ifndef PLAYER_HPP\n#define PLAYER_HPP\n  class Player\n  {\n  public:\n     Player();\n\nvoid initPlayer(int level, int health, int attack, int defense, int experience);\n\n    //Setters\nvoid setPosition(int x, int y);\n\n    //Getters\nvoid getPosition(int &amp;x, int &amp;y);\n\n\nprivate:\n\n    //Properties\nint _level;\nint _health;\nint _attack;\nint _defense;\nint _experience;\n\n    //Position\nint _x;\nint _y;\n  };\n\n#endif // PLAYER_HPP\n</code></pre>\n\n<p>GameSystem.hpp:</p>\n\n<pre><code>#ifndef GSYSTEM_HPP\n#define GSYSTEM_HPP\n\n#include \"Player.hpp\"\n#include \"Level.hpp\"\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass GameSystem\n {\n public:\n    GameSystem(string levelFileName);\n\n    void playGame();\n\nprivate:\n    Level _level;\n    Player _player;\n  };\n\n#endif // GSYSTEM_HPP\n</code></pre>\n\n<p>I changed the filename extensions to help distinguish between C language header files (.h) and C++ language header files (.hpp).  </p>\n\n<p>I also simplified the header files by remove unused include files.  </p>\n"}], "owner": {"reputation": 11, "user_id": 4604230, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1559580190963009/picture?type=large", "display_name": "Michael Schroeder", "link": "https://stackoverflow.com/users/4604230/michael-schroeder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3441, "favorite_count": 0, "closed_date": 1428544084, "answer_count": 2, "score": -3, "last_activity_date": 1428514351, "creation_date": 1428511706, "last_edit_date": 1428512259, "question_id": 29520668, "link": "https://stackoverflow.com/questions/29520668/c-does-not-support-default-int", "closed_reason": "Not suitable for this site", "title": "C++ does not support default-int", "body": "<p>I am getting an error on my private variables Player_player; and Level _level; it is telling me that it is missing the type specifier and im not sure why this is. I have made classes for both Level and Player, so shouldnt I be able to use Player and Level to specify the variable type?</p>\n\n<p>thanks for the help,</p>\n\n<p>mike</p>\n\n<pre><code>//GameSystem.h\n\n#pragma once\n#include \"Player.h\"\n#include \"Level.h\"\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;conio.h&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nclass GameSystem\n {\n public:\n    GameSystem(string levelFileName);\n\n    void playGame();\n\nprivate:\n    Level _level;\n    Player _player;\n  };\n</code></pre>\n\n#\n\n<p>//Player.h</p>\n\n<pre><code>  #pragma once\n  #include \"GameSystem.h\"\n  #include \"Level.h\"\n  #include &lt;string&gt;\n  #include &lt;iostream&gt;\n  #include &lt;fstream&gt;\n  #include &lt;cstdlib&gt;\n  #include &lt;conio.h&gt;\n  #include &lt;vector&gt;\n\n  using namespace std;\n\n  class Player\n  {\n  public:\n     Player();\n\nvoid initPlayer(int level, int health, int attack, int defense, int experience);\n\n    //Setters\nvoid setPosition(int x, int y);\n\n    //Getters\nvoid getPosition(int &amp;x, int &amp;y);\n\n\nprivate:\n\n    //Properties\nint _level;\nint _health;\nint _attack;\nint _defense;\nint _experience;\n\n    //Position\nint _x;\nint _y;\n  };\n</code></pre>\n"}, {"tags": ["c++", "get", "ifstream"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1428511597, "post_id": 29520578, "comment_id": 47195989, "body": "do not use <code>eof()</code> to control reading from a file.  Use <code>while(c = in.get())</code>.  read <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">this</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1428511668, "post_id": 29520578, "comment_id": 47196032, "body": "@NathanOliver That&#39;s not very good either, just use the stream (e.g. <code>while (in)</code>)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1428511668, "post_id": 29520578, "comment_id": 47196034, "body": "To extend on @NathanOliver&#39;s comment: <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1428511755, "post_id": 29520578, "comment_id": 47196084, "body": "A question to the OP, why are you using the <code>*(argv+1)</code> syntax? It&#39;s valid but a little harder to understand than the normal <code>argv[1]</code> syntax."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1428511759, "post_id": 29520578, "comment_id": 47196086, "body": "@JoachimPileborg Why would you do that?  You want the read operation to control the loop so the first time the read fails the loop stops."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1428511907, "post_id": 29520578, "comment_id": 47196177, "body": "@NathanOliver The problem is that the used overload of the <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/get\" rel=\"nofollow noreferrer\"><code>get</code></a> function might not return zero on error or end of file, it returns <code>Traits::eof()</code> (which defaults to <a href=\"http://en.cppreference.com/w/cpp/string/char_traits/eof\" rel=\"nofollow noreferrer\"><code>std::char_traits::eof</code></a>). There&#39;s nothing to say that the value will be zero."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1428512297, "post_id": 29520578, "comment_id": 47196430, "body": "@JoachimPileborg good point, but <code>while(in)</code> will still read past the end of file, doesn&#39;t it? Shouldn&#39;t you test the state of the stream after each <code>get</code>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 1, "creation_date": 1428512361, "post_id": 29520578, "comment_id": 47196464, "body": "@vsoftco That&#39;s true, so better use the <code>&gt;&gt;</code> operator as in your answer. :)"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4765116"}, "edited": false, "score": 0, "creation_date": 1429196796, "post_id": 29520651, "comment_id": 47494832, "body": "I don&#39;t read eof, cause I break the loop. if (in.eof())             break;"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1429197267, "post_id": 29520651, "comment_id": 47495225, "body": "@MasterOfLife say you are at the end of the file (immediately before EOF). Then you test <code>if(in.eof())</code>, which will be false (you didn&#39;t yet reach EOF). Next you read <code>c = in.get()</code>, now you get the EOF in <code>c</code>. You should test for EOF <b>after</b> you read, and if the stream is EOF then discard the read (and break from the loop). In your case, change the order of <code>if</code> and <code>c = in.get()</code>, that is, put <code>c = in.get()</code> at the top of the loop. I highly recommend you to carefully read the link I posted."}], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": false, "score": 7, "last_activity_date": 1428512895, "last_edit_date": 1495540905, "creation_date": 1428511651, "answer_id": 29520651, "question_id": 29520578, "link": "https://stackoverflow.com/questions/29520578/c-ifstream-class-get-method-returns-the-character/29520651#29520651", "title": "C++ ifstream class get() method returns the character?", "body": "<p>In the <code>while</code> loop you end up reading <code>eof</code>:</p>\n\n<pre><code>c = in.get(); // reads eof\ncout &lt;&lt; c;\n</code></pre>\n\n<p>This is not the best way to read a text file, use</p>\n\n<pre><code>while(in &gt;&gt; c){ // process c here }\n</code></pre>\n\n<p>or </p>\n\n<pre><code>while(in &gt;&gt; std::noskipws &gt;&gt; c) { // process c here } \n</code></pre>\n\n<p>if you want the white spaces (like <code>\\n</code>) included. </p>\n\n<p>If your file is in binary, then it doesn't make too much sense to display it, but if you want, then use <code>get()</code> but test <code>if(!in) break;</code> before further processing</p>\n\n<pre><code>c = in.get();\nif (!in) // test the stream\n    break;\ncout &lt;&lt; c; // then process\n</code></pre>\n\n<p>If you just want to display the file, the easiest way is to use the stream buffer directly, like</p>\n\n<pre><code>std::cout &lt;&lt; in.rdbuf(); // display the whole file at once\n</code></pre>\n\n<p>Related: <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a></p>\n"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1428511974, "creation_date": 1428511974, "answer_id": 29520753, "question_id": 29520578, "link": "https://stackoverflow.com/questions/29520578/c-ifstream-class-get-method-returns-the-character/29520753#29520753", "title": "C++ ifstream class get() method returns the character?", "body": "<p>The <code>istream::get()</code> method returns an <em>untranslated</em> value from the input stream.  </p>\n\n<p>If the value is not printable, your console may translate the character to '?'.</p>\n\n<p>A better method is to print the value of the character along with the character:  </p>\n\n<pre><code>cout &lt;&lt; \"\\'\" &lt;&lt; c &lt;&lt; \"\\', 0x\" &lt;&lt; hex &lt;&lt; ((unsigned int) c) &lt;&lt; endl;\n</code></pre>\n\n<p>This will allow you to see unprintable characters.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4765116"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17822, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1509398887, "creation_date": 1428511406, "last_edit_date": 1509398887, "question_id": 29520578, "link": "https://stackoverflow.com/questions/29520578/c-ifstream-class-get-method-returns-the-character", "title": "C++ ifstream class get() method returns the character?", "body": "<p>I have this code</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main(int argc, char **argv) {\n    ifstream in;\n    in.open(*(argv+1));\n    char c;\n\n    while (true) {\n        if (in.eof())\n            break;\n        c = in.get();\n        cout &lt;&lt; c;\n    }\n    in.close();\n\n    return 0;\n}\n</code></pre>\n\n<p>I read the file which is passed via the command line as the first argument.\nWhile reading the file, I get the char '?' as the last one. Why?</p>\n\n<p>If I remove this line</p>\n\n<pre><code>in.open(*(argv+1));\n</code></pre>\n\n<p>I will get only the char '?'.</p>\n"}, {"tags": ["c++", "string", "pointers"], "comments": [{"owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 1, "creation_date": 1428511553, "post_id": 29520543, "comment_id": 47195966, "body": "Actually, it&#39;s not c++ but C"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1428511645, "post_id": 29520543, "comment_id": 47196022, "body": "It&#39;s not so much of a trick as normal pointer usage."}, {"owner": {"reputation": 81, "user_id": 1445525, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8lx0a.png?s=128&g=1", "display_name": "youngrp", "link": "https://stackoverflow.com/users/1445525/youngrp"}, "reply_to_user": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 0, "creation_date": 1428512437, "post_id": 29520543, "comment_id": 47196508, "body": "@galinette is related to an MSDN C++ article. Thank you for your time anyway."}], "answers": [{"comments": [{"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "reply_to_user": {"reputation": 81, "user_id": 1445525, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8lx0a.png?s=128&g=1", "display_name": "youngrp", "link": "https://stackoverflow.com/users/1445525/youngrp"}, "edited": false, "score": 2, "creation_date": 1428512702, "post_id": 29520606, "comment_id": 47196682, "body": "@youngrp  Careful.. Technically there are copying the first <code>TCHAR</code>.  This may or may not be a byte, depending on the platform. See <a href=\"https://msdn.microsoft.com/en-us/library/office/cc842072.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/office/cc842072.aspx</a>"}, {"owner": {"reputation": 81, "user_id": 1445525, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8lx0a.png?s=128&g=1", "display_name": "youngrp", "link": "https://stackoverflow.com/users/1445525/youngrp"}, "reply_to_user": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1428513585, "post_id": 29520606, "comment_id": 47197164, "body": "@PeterM sure. I&#39;m not using TCHAR but good point. I never uses UNICODE but many people does ;)"}], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": true, "score": 10, "last_activity_date": 1428511489, "creation_date": 1428511489, "answer_id": 29520606, "question_id": 29520543, "link": "https://stackoverflow.com/questions/29520543/c-pointer-trick/29520606#29520606", "title": "C++ pointer trick", "body": "<p>Since in C++ char-arrays and char-pointers are in many ways equivalent, they are dereferencing both pointers to copy one element from one array to the other.</p>\n\n<p>You could equivalently express the same functionality like this, which might make it easier to understand what they are doing:</p>\n\n<pre><code>szDrive[0] = p[0];\n</code></pre>\n"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 8, "last_activity_date": 1428511551, "creation_date": 1428511551, "answer_id": 29520627, "question_id": 29520543, "link": "https://stackoverflow.com/questions/29520543/c-pointer-trick/29520627#29520627", "title": "C++ pointer trick", "body": "<p>This code:</p>\n\n<pre><code>*szDrive = *p;\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>szDrive[0] = p[0];\n</code></pre>\n\n<p>which means you copy first symbol from string <code>p</code> to string <code>szDrive</code>, which is drive letter in this case.</p>\n"}], "owner": {"reputation": 81, "user_id": 1445525, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8lx0a.png?s=128&g=1", "display_name": "youngrp", "link": "https://stackoverflow.com/users/1445525/youngrp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 29520606, "answer_count": 2, "score": 2, "last_activity_date": 1428511551, "creation_date": 1428511326, "question_id": 29520543, "link": "https://stackoverflow.com/questions/29520543/c-pointer-trick", "title": "C++ pointer trick", "body": "<p>I'm trying to understand how this C++ pointer trick really works. In MSDN <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366789%28v=vs.85%29.aspx\" rel=\"nofollow\">Obtaining a File Name From a File Handle</a> we can see:</p>\n\n<pre><code>// Copy the drive letter to the template string\n*szDrive = *p;\n</code></pre>\n\n<p>At the first they declare an \"template string\" that will receive the drive letter without the trailing backslash (<code>TCHAR szDrive[3] = TEXT(\" :\");</code>) and then they do this pointer trick and voil\u00e0! I've tryied to disasembly but no clue at all:</p>\n\n<pre><code>            *szDrive = *p;\n011D178D  mov         eax,dword ptr [p]  \n011D1793  mov         cl,byte ptr [eax]  \n011D1795  mov         byte ptr [ebp-214h],cl\n</code></pre>\n\n<p>I'm afraid that is the lamest trick ever...</p>\n"}, {"tags": ["c++", "c", "sockets", "network-programming"], "comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1428515168, "post_id": 29520523, "comment_id": 47198104, "body": "The documentation for SO_SNDTIMEO contradicts your assumption in pretty clear words. Honor the documentation."}], "answers": [{"comments": [{"owner": {"reputation": 583, "user_id": 1525573, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/982e0112d167af292207d91c9f55235d?s=128&d=identicon&r=PG&f=1", "display_name": "BalticMusicFan", "link": "https://stackoverflow.com/users/1525573/balticmusicfan"}, "edited": false, "score": 0, "creation_date": 1428512587, "post_id": 29520664, "comment_id": 47196612, "body": "This answers about preferable alternatives that i could use instead. But you did not answered if this timeout logic is valid for Windows systems."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "reply_to_user": {"reputation": 583, "user_id": 1525573, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/982e0112d167af292207d91c9f55235d?s=128&d=identicon&r=PG&f=1", "display_name": "BalticMusicFan", "link": "https://stackoverflow.com/users/1525573/balticmusicfan"}, "edited": false, "score": 0, "creation_date": 1428512655, "post_id": 29520664, "comment_id": 47196655, "body": "The answer is supposed to tell that using timeouts for regular operations is not the best of ideas."}, {"owner": {"reputation": 583, "user_id": 1525573, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/982e0112d167af292207d91c9f55235d?s=128&d=identicon&r=PG&f=1", "display_name": "BalticMusicFan", "link": "https://stackoverflow.com/users/1525573/balticmusicfan"}, "edited": false, "score": 0, "creation_date": 1428513688, "post_id": 29520664, "comment_id": 47197213, "body": "this would be used to kill connections for HTTP server that should be closed. See related question <a href=\"http://serverfault.com/questions/680855/how-to-configure-apache-to-kill-stalled-data-transfers\" title=\"how to configure apache to kill stalled data transfers\">serverfault.com/questions/680855/&hellip;</a>"}], "owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "is_accepted": false, "score": 3, "last_activity_date": 1428513153, "last_edit_date": 1428513153, "creation_date": 1428511688, "answer_id": 29520664, "question_id": 29520523, "link": "https://stackoverflow.com/questions/29520523/how-to-send-and-receive-data-up-to-so-sndtimeo-and-so-rcvtimeo-without-corruptin/29520664#29520664", "title": "How to send and receive data up to SO_SNDTIMEO and SO_RCVTIMEO without corrupting connection?", "body": "<p>While you MIGHT implement something along the ideas you have given in your question, there are preferable alternatives on all major systems.</p>\n\n<p>Namely:</p>\n\n<ul>\n<li>kqueue on FreeBSD and family. And on MAC OSX.</li>\n<li>epoll on linux and related types of operating systems.</li>\n<li>IO completion ports on Windows.</li>\n</ul>\n\n<p>Using those technologies allows you to process traffic on multiple sockets without timeout logics and polling in an efficient, reactive manner. They all can be considered successors of the ancient <code>select()</code> function in socket API.</p>\n\n<p>As for the quoted documentation for send() in your question, it is not really confusing or contradicting. Useful network protocols implement a mechanism to create \"backpressure\" for situations where a sender tries to send more data than a receiver (and/or the transport channel) can accomodate for. So, an application can only provide more data to send() if the network stack has buffer space ready for it. </p>\n\n<p>If, for example an application tries to send 3Kb worth of data and the tcp/ip stack has only room for 800 bytes, <code>send()</code> might succeed and return that it used 800 bytes of the 3k offered bytes.</p>\n\n<p>The basic approach to forwarding the data on a connection is: Do not read from the incoming socket until you know you can send that data to the outgoing socket. If you read greedily (and buffer on application layer), you deprive the communication channel of its backpressure mechanism. </p>\n\n<p>So basically, the \"send capability\" should drive the receive actions.</p>\n\n<p>As for using timeouts for this \"middle man\", there are 2 major scenarios:</p>\n\n<ol>\n<li>You know the sending behavior of the sender application. I.e. if it has some intent on sending any data within your chosen receive timeout at any time. Some applications only send sporadically and any chosen value for a receive timeout could be wrong. Even if it is supposed to send at a specific time interval, your timeouts will cause trouble once someone debugs the sending application. </li>\n<li>You want the \"middle man\" to work for unknown applications (which must not use some encryption for middle man to have a chance, of course). There, you cannot pick any \"adequate\" timeout value because you know nothing about the sending behavior of the involved application(s).</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1428515227, "post_id": 29521649, "comment_id": 47198141, "body": "It is also possible (and probably also desirable in some scenarios) to use IO completion ports from 1 thread (without thread pool). It is a bit hard to figure that one out from the existing sources of documentation, though. The reason why I mention this is mainly because if you go ultra-high performance (which the author of this question probably will not attempt), you end in the field of user mode scheduling, avoiding of context switches and scalability. For &quot;normal high performance&quot;, the thread pool approach probably is good to go for."}, {"owner": {"reputation": 49, "user_id": 4765219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae3058f70f3ae16d894d7309a4ddf51e?s=128&d=identicon&r=PG", "display_name": "Tom Dial", "link": "https://stackoverflow.com/users/4765219/tom-dial"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1428516846, "post_id": 29521649, "comment_id": 47199107, "body": "+1 Totally agree. In fact, for I/O bound systems, as this may very well be, you may not see a benefit at all from &gt;1 thread. Servers written with libevent use a single-threaded model, and where I work at FactSet, we have a similar framework in place for some applications-- I/O is handled by a main thread, long-running work is delegated to a background thread pool."}], "owner": {"reputation": 49, "user_id": 4765219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae3058f70f3ae16d894d7309a4ddf51e?s=128&d=identicon&r=PG", "display_name": "Tom Dial", "link": "https://stackoverflow.com/users/4765219/tom-dial"}, "is_accepted": false, "score": 3, "last_activity_date": 1428514915, "creation_date": 1428514915, "answer_id": 29521649, "question_id": 29520523, "link": "https://stackoverflow.com/questions/29520523/how-to-send-and-receive-data-up-to-so-sndtimeo-and-so-rcvtimeo-without-corruptin/29521649#29521649", "title": "How to send and receive data up to SO_SNDTIMEO and SO_RCVTIMEO without corrupting connection?", "body": "<p>As a previous poster has suggested, I strongly urge you to reconsider the design of your server so that it employs an asynchronous I/O strategy. This may very well require that you spend significant time learning about each operating systems' preferred approach. It will be time well-spent.</p>\n\n<p>For anything other than a toy application, using blocking I/O in the manner that you suggest will not perform well. Even with short timeouts, it sounds to me as though you won't be able to service new connections until you have completed the work for the current connection. You may also find (with short timeouts) that you're burning more CPU time spinning waiting for work to do than actually doing work.</p>\n\n<p>A previous poster wisely suggested taking a look at Windows I/O completion ports. Take a look at this article I wrote in 2007 for Dr. Dobbs. It's not perfect, but I try to do a decent job of explaining how you can design a simple server that uses a small thread pool to handle potentially large numbers of connections:  </p>\n\n<p>Windows I/O Completion Ports\n<a href=\"http://www.drdobbs.com/cpp/multithreaded-asynchronous-io-io-comple/201202921\" rel=\"nofollow\">http://www.drdobbs.com/cpp/multithreaded-asynchronous-io-io-comple/201202921</a></p>\n\n<p>If you're on Linux/FreeBSD/MacOSX, take a look at libevent:</p>\n\n<p>Libevent\n<a href=\"http://libevent.org/\" rel=\"nofollow\">http://libevent.org/</a></p>\n\n<p>Finally, a good, practical book on writing TCP/IP servers and clients is \"Practical TCP/IP Sockets in C\" by Michael Donahoe and Kenneth Calvert. You could also check out the W. Richard Stevens texts (which cover the topic completely for UNIX.)</p>\n\n<p>In summary, I think you should take some time to learn more about asynchronous socket I/O and the established, best-of-breed approaches for developing servers. </p>\n\n<p>Feel free to private message me if you have questions down the road.</p>\n"}], "owner": {"reputation": 583, "user_id": 1525573, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/982e0112d167af292207d91c9f55235d?s=128&d=identicon&r=PG&f=1", "display_name": "BalticMusicFan", "link": "https://stackoverflow.com/users/1525573/balticmusicfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1646, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1428514915, "creation_date": 1428511251, "question_id": 29520523, "link": "https://stackoverflow.com/questions/29520523/how-to-send-and-receive-data-up-to-so-sndtimeo-and-so-rcvtimeo-without-corruptin", "title": "How to send and receive data up to SO_SNDTIMEO and SO_RCVTIMEO without corrupting connection?", "body": "<p>I am currently planning how to develop a <em>man in the middle</em> network application for TCP server that would transfer data between server and client. It would behave as regular client for server and server for remote client without modifying any data. It will be optionally used to detect and measure how long server or client is not able to receive data that is ready to be received in situation when connection is inactive.</p>\n\n<p>I am planning to use blocking send and recv functions. Before any data transfer I would call a setsockopt function to set SO_SNDTIMEO and SO_RCVTIMEO to about 10 - 20 miliseconds assuming it will force blocking send and recv functions to return early in order to let another active connection data to be routed. Running thread per connection looks too expensive. I would not use async sockets here because I can not find guarantee that they will get complete in a parts of second especially when large data amount is being sent or received. High data delays does not look good. I would use very small buffers here but calling function for each received byte looks overkill.</p>\n\n<p>My next assumption would be that is safe to call send or recv later if it has previously terminated by timeout and data was received less than requested.</p>\n\n<p>But I am confused by contradicting information available at msdn.</p>\n\n<blockquote>\n  <p>send function</p>\n  \n  <p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms740149%28v=vs.85%29.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms740149%28v=vs.85%29.aspx</a></p>\n  \n  <p>If no error occurs, send returns the total number of bytes sent, which\n  can be less than the number requested to be sent in the len parameter.</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>SOL_SOCKET Socket Options</p>\n  \n  <p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms740532%28v=vs.85%29.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms740532%28v=vs.85%29.aspx</a></p>\n  \n  <p>SO_SNDTIMEO - The timeout, in milliseconds, for blocking send calls.\n  The default for this option is zero, which indicates that a send\n  operation will not time out. If a blocking send call times out, the\n  connection is in an indeterminate state and should be closed.</p>\n</blockquote>\n\n<p>Are my assumptions correct that I can use these functions like this? Maybe there is more effective way to do this?</p>\n\n<p>Thanks for answers</p>\n"}, {"tags": ["c++"], "answers": [{"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": true, "score": 8, "last_activity_date": 1428511293, "creation_date": 1428511293, "answer_id": 29520538, "question_id": 29520494, "link": "https://stackoverflow.com/questions/29520494/map-with-custom-class-having-constructor-with-argument/29520538#29520538", "title": "map with custom class having constructor with argument", "body": "<p>This is because <code>operator[]</code> will insert a default constructed object if the key doesn't already exist in the map.</p>\n\n<p>You're probably looking for <code>insert</code> for non-default-constructable object types.</p>\n"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": false, "score": 4, "last_activity_date": 1428512119, "last_edit_date": 1428512119, "creation_date": 1428511666, "answer_id": 29520656, "question_id": 29520494, "link": "https://stackoverflow.com/questions/29520494/map-with-custom-class-having-constructor-with-argument/29520656#29520656", "title": "map with custom class having constructor with argument", "body": "<p><code>std::map::operator[]</code> requires the value type (or <code>mapped_type</code>) to be satisfy the DefaultInsertable concept. From [map.access]:</p>\n\n<blockquote>\n<pre><code>T&amp; operator[](const key_type&amp; x);\n</code></pre>\n  \n  <p>Effects: If there is no key equivalent to <code>x</code> in the map, inserts <code>value_type(x, T())</code> into the map.<br>\n  <strong>Requires: <code>key_type</code> shall be <code>CopyInsertable</code> and <code>mapped_type</code> shall be <code>DefaultInsertable</code> into <code>*this</code>.</strong><br>\n  Returns: A reference to the <code>mapped_type</code> corresponding to <code>x</code> in <code>*this</code>.<br>\n  Complexity: Logarithmic</p>\n</blockquote>\n\n<p><code>Foo</code> declares its own constructor that disables the implicit generation of a default constructor, so it's not default-constructible.</p>\n\n<p>The solution is to either declare a default constructor or use the <code>emplace()</code> method to construct a value type in-place:</p>\n\n<pre><code>fooMap.emplace(1, foo);\n</code></pre>\n"}], "owner": {"reputation": 1966, "user_id": 3134055, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3ff13bfbb362e8209b79c4d2370760bb?s=128&d=identicon&r=PG&f=1", "display_name": "akai", "link": "https://stackoverflow.com/users/3134055/akai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 957, "favorite_count": 0, "closed_date": 1428519989, "accepted_answer_id": 29520538, "answer_count": 2, "score": 0, "last_activity_date": 1565881155, "creation_date": 1428511149, "last_edit_date": 1428511343, "question_id": 29520494, "link": "https://stackoverflow.com/questions/29520494/map-with-custom-class-having-constructor-with-argument", "closed_reason": "Duplicate", "title": "map with custom class having constructor with argument", "body": "<p>When I define an argument to the constructor, its object can't be set to a map:</p>\n\n<pre><code>#include &lt;map&gt;\n\nclass Foo\n{\npublic:\n    int fooInt;\n    Foo(int fooInt)\n    : fooInt(fooInt)\n    {};\n};\n\nint main()\n{\n    Foo foo(2);\n    std::map&lt;int, Foo&gt; fooMap;\n    fooMap[1] = foo;\n    return 0;\n}\n// won't compile\n</code></pre>\n\n<p>If no argument (i.e. define <code>Foo()</code> and declare <code>Foo foo</code>), this works. Why?</p>\n\n<p>I actually think I'm missing something very basic... but I can't figure out what is meant by the long error message.</p>\n"}, {"tags": ["c++", "mfc"], "comments": [{"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1428511262, "post_id": 29520462, "comment_id": 47195783, "body": "CodeGuru has an article about this.  Alas, the solution appears to be to write a function to do it. <a href=\"http://www.codeguru.com/cpp/controls/controls/article.php/c2145/EnablingDisabling-a-Group-of-Controls.htm\" rel=\"nofollow noreferrer\">codeguru.com/cpp/controls/controls/article.php/c2145/&hellip;</a>"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 3, "creation_date": 1428511456, "post_id": 29520462, "comment_id": 47195922, "body": "You can create an array of dialog IDs and loop through them instead of writing code for each individually. Or you could iterate through the windows starting with the first control and ending with the last in each group."}, {"owner": {"reputation": 1754, "user_id": 4449640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-me4y5aVPCrY/AAAAAAAAAAI/AAAAAAAAABI/0dkBJMaB1IE/photo.jpg?sz=128", "display_name": "Kyle Williamson", "link": "https://stackoverflow.com/users/4449640/kyle-williamson"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1428511741, "post_id": 29520462, "comment_id": 47196070, "body": "The idea of using an array of dialog IDs is excellent.  Thank you for your response @MarkRansom."}], "answers": [{"comments": [{"owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "edited": false, "score": 1, "creation_date": 1428522773, "post_id": 29521076, "comment_id": 47202611, "body": "Great idea to include the bEnable flag as a parameter, so the method can be used for more dynamic UI affects.  Also, it is not necessary (and actually is harmful) to cast the <code>CWnd *</code> return of <code>GetDlgItem</code> to a <code>CButton *</code> since <code>EnableWindow</code> is a <code>CWnd</code> method (and you can use it for IDs that are NOT bound to <code>CButton</code>s)."}], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 3, "last_activity_date": 1491895182, "last_edit_date": 1491895182, "creation_date": 1428512999, "answer_id": 29521076, "question_id": 29520462, "link": "https://stackoverflow.com/questions/29520462/disabling-greying-out-multiple-gui-items-in-c/29521076#29521076", "title": "Disabling (Greying out) multiple GUI Items in C++", "body": "<p>I use this:</p>\n\n<pre><code>void EnableDlgItem (CWnd *dlg, int items[], BOOL bEnable)\n{\n  int i = 0, item ;\n\n  while ((item = items[i++]) != 0)\n  {\n    CWnd *pControl = dlg-&gt;GetDlgItem(item) ;\n\n    if (pControl != NULL)\n      pControl-&gt;EnableWindow(bEnable) ;\n  }\n}\n\n...\n</code></pre>\n\n<p>And in some <code>CYourDialog::OnSomethingFunction()</code></p>\n\n<pre><code>static int ids[] = {IDOK, IDC_EDIT1, IDC_EDIT2, 0};\nEnableDlgItem(this, ids, FALSE);\n</code></pre>\n"}, {"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "is_accepted": false, "score": 2, "last_activity_date": 1428513543, "creation_date": 1428513543, "answer_id": 29521235, "question_id": 29520462, "link": "https://stackoverflow.com/questions/29520462/disabling-greying-out-multiple-gui-items-in-c/29521235#29521235", "title": "Disabling (Greying out) multiple GUI Items in C++", "body": "<p>As others have said, MFC does not expose a method that allows you to enable/disable a group of controls.  You'll need to craft your own code to do that.</p>\n\n<p>I was faced with the very same situation and decided to handle it by deriving my own groupbox class.  In my situation, the groupbox enable/disable functioning was tied to the state of a checkbox as seen below.</p>\n\n<p><img src=\"https://i.stack.imgur.com/sDgHc.png\" alt=\"enter image description here\"></p>\n\n<p>(I've redacted some information from it).</p>\n\n<p>Clicking on the checkbox will toggle the enable/disable of <strong>all</strong> controls within the groupbox.  There's nothing stopping you from deriving your own class for the groupbox and exposing a method that can be called (rather than a checkbox) to enable/disable controls.  The advantage to this approach is that if you create the class in a generic manner, you can re-use it in other situations where a groupbox is the \"parent\" of other controls.</p>\n"}], "owner": {"reputation": 1754, "user_id": 4449640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-me4y5aVPCrY/AAAAAAAAAAI/AAAAAAAAABI/0dkBJMaB1IE/photo.jpg?sz=128", "display_name": "Kyle Williamson", "link": "https://stackoverflow.com/users/4449640/kyle-williamson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2782, "favorite_count": 1, "accepted_answer_id": 29521076, "answer_count": 2, "score": 1, "last_activity_date": 1491895182, "creation_date": 1428511004, "question_id": 29520462, "link": "https://stackoverflow.com/questions/29520462/disabling-greying-out-multiple-gui-items-in-c", "title": "Disabling (Greying out) multiple GUI Items in C++", "body": "<p><strong>Question:</strong>\nI am looking for an effective way to disable(grey) <strong>mutiple</strong> items in a MFC C++ application.  Depending on if the user is signed into a SQL Server or Oracle account, I wish to disable a section of GUI items.</p>\n\n<p><strong>What I have tried:</strong>\nI have used the following code to disable one of my two \"Create User\" buttons.</p>\n\n<pre><code>if(checkIsSQLServer())\n{\n    CWnd *oraCreateUser = GetDlgItem(BTN_ORA_CREATE);\n    oraCreateUser-&gt;EnableWindow(false);  //Disable Oracle \"Create User\" button\n}\nelse\n{\n    CWnd *sqlCreateLogin = GetDlgItem(BTN_SQL_CREATE); \n    sqlCreateLogin-&gt;EnableWindow(false);  //Disable SQL Server \"Create User\" button.\n}\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/iPzVm.png\" alt=\"enter image description here\">\n.</p>\n\n<p>This code works perfectly, however it only disables the button.  I wish to disable all items within either groupbox.</p>\n\n<p>Do I need to create a <code>CWnd*</code> object for every item I wish to disable?  Is there a more effective way, such as a way to disable all items that are contained within a group box?</p>\n"}, {"tags": ["c++", "c-strings"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1428510922, "post_id": 29520350, "comment_id": 47195565, "body": "char arrays = C-style strings. The system is assuming (incorrectly in this one case) that you want print out the string itself, not the string&#39;s address."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1428510931, "post_id": 29520350, "comment_id": 47195571, "body": "@MarcB: Argh answers in comments -.-"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1428511010, "post_id": 29520350, "comment_id": 47195623, "body": "@LightningRacisinObrit Oh sorry, I thought the question was why does <code>cout &lt;&lt; d</code> print a string... and I was wondering how that was happening."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "edited": false, "score": 0, "creation_date": 1428511128, "post_id": 29520350, "comment_id": 47195699, "body": "<a href=\"http://stackoverflow.com/questions/501816/why-does-cout-print-char-arrays-differently-from-other-arrays\" title=\"why does cout print char arrays differently from other arrays\">stackoverflow.com/questions/501816/&hellip;</a>"}], "answers": [{"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "is_accepted": false, "score": 1, "last_activity_date": 1428511233, "last_edit_date": 1428511233, "creation_date": 1428510913, "answer_id": 29520430, "question_id": 29520350, "link": "https://stackoverflow.com/questions/29520350/why-is-a-char-pointer-dereferenced-automatically-in-a-dynamic-array/29520430#29520430", "title": "Why is a char pointer dereferenced automatically in a dynamic array", "body": "<p>It prints the string because that's what the definition of that particular <code>operator&lt;&lt;</code> overload <em>does</em>. Cast to <code>void *</code> if you want to print an address:</p>\n\n<pre><code>cout &lt;&lt; static_cast&lt;void *&gt;(as) &lt;&lt; endl;\n</code></pre>\n"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1428510915, "creation_date": 1428510915, "answer_id": 29520432, "question_id": 29520350, "link": "https://stackoverflow.com/questions/29520350/why-is-a-char-pointer-dereferenced-automatically-in-a-dynamic-array/29520432#29520432", "title": "Why is a char pointer dereferenced automatically in a dynamic array", "body": "<p>IOStreams treat <code>char*</code> (and <code>const char*</code>) specially, so that you can print C-strings without further effort:</p>\n\n<pre><code>std::cout &lt;&lt; \"hello world\\n\";\n</code></pre>\n\n<p>(Bear in mind that the string literal expression decays immediately to a <code>const char*</code> when passed to <code>operator&lt;&lt;</code>.)</p>\n\n<p>If you do not want this behaviour, you can cast to <code>void*</code>:</p>\n\n<pre><code>char* as = new char[100];\nas[0] = 'a';\nas[1] = 'b';\nas[2] = NULL;\ncout &lt;&lt; (void*)as &lt;&lt; endl;\n</code></pre>\n\n<p>Your \"fix\" is actually broken, because you are printing the address of the pointer <code>as</code>, not the address of the array elements that <code>as</code> points to. This is indicated by the <code>char**</code> type, which you already noticed.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4352513"}, "edited": false, "score": 0, "creation_date": 1428512624, "post_id": 29520442, "comment_id": 47196636, "body": "so, if i wanted to save the address of the first element. i would still use char * as; but if i was to print it. i&#39;d have to type cast it? just for clarification"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1428514932, "post_id": 29520442, "comment_id": 47197973, "body": "@tropicalmemes <code>as</code> is <i>itself</i> a pointer to the first location of the memory you allocated. And if you want to print the address <code>as</code> is pointing to then you have to cast it."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1428535704, "post_id": 29520442, "comment_id": 47208460, "body": "@tropicalmemes: Yes."}], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1428510941, "creation_date": 1428510941, "answer_id": 29520442, "question_id": 29520350, "link": "https://stackoverflow.com/questions/29520350/why-is-a-char-pointer-dereferenced-automatically-in-a-dynamic-array/29520442#29520442", "title": "Why is a char pointer dereferenced automatically in a dynamic array", "body": "<p>There is no overloaded output operator <code>&lt;&lt;</code> that prints the address for any <code>char</code> pointer, it treats all  <code>char</code> pointers as strings. If you want to print the address of a pointer, you need to cast it to <code>void*</code></p>\n\n<pre><code>std::cout &lt;&lt; \"Address of string is \" &lt;&lt; static_cast&lt;void*&gt;(as) &lt;&lt; '\\n';\n</code></pre>\n\n<hr>\n\n<p>On a side-note, the code</p>\n\n<pre><code>char ** d = &amp;as;\ncout &lt;&lt; d &lt;&lt; \"this is d\" &lt;&lt; endl;\n</code></pre>\n\n<p>will <strong><em>not</em></strong> print the address of the string, i.e. the pointer contained inside <code>as</code>, instead it will print where the <em>variable</em> <code>as</code> is stored in memory. Not quite the same thing.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428511140, "post_id": 29520452, "comment_id": 47195709, "body": "@MooingDuck: By the standard library&#39;s IOStreams &quot;module&quot;."}], "owner": {"reputation": 1750, "user_id": 2012682, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9112f84d873ba861a68f3ddd7e02d1b?s=128&d=identicon&r=PG", "display_name": "Brice M. Dempsey", "link": "https://stackoverflow.com/users/2012682/brice-m-dempsey"}, "is_accepted": false, "score": 2, "last_activity_date": 1428511192, "last_edit_date": 1428511192, "creation_date": 1428510974, "answer_id": 29520452, "question_id": 29520350, "link": "https://stackoverflow.com/questions/29520350/why-is-a-char-pointer-dereferenced-automatically-in-a-dynamic-array/29520452#29520452", "title": "Why is a char pointer dereferenced automatically in a dynamic array", "body": "<p><code>char*</code> character pointers are considered to be C-style null terminated strings by the <code>std::ostream</code> <code>&lt;&lt;</code> operator. You are right that this is a different behavior from other pointer types.</p>\n\n<p><code>&amp;a</code> is not a pointer to <code>a[0]</code> . It is a pointer to <code>a</code> which is itself a pointer. <code>a</code> is in fact the pointer to <code>a[0]</code> and is equivalent to <code>&amp;a[0]</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1428511103, "post_id": 29520461, "comment_id": 47195685, "body": "Nope, outputting <code>&amp;as</code> is broken. See my answer."}], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1428511331, "last_edit_date": 1428511331, "creation_date": 1428511001, "answer_id": 29520461, "question_id": 29520350, "link": "https://stackoverflow.com/questions/29520350/why-is-a-char-pointer-dereferenced-automatically-in-a-dynamic-array/29520461#29520461", "title": "Why is a char pointer dereferenced automatically in a dynamic array", "body": "<p>The &lt;&lt; operator is overloaded to take a <code>char*</code> and output its contents where as there is no such overload for a <code>int*</code>/<code>int[]</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4352513"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 791, "favorite_count": 0, "closed_date": 1428511141, "accepted_answer_id": 29520442, "answer_count": 5, "score": 0, "last_activity_date": 1428511331, "creation_date": 1428510684, "question_id": 29520350, "link": "https://stackoverflow.com/questions/29520350/why-is-a-char-pointer-dereferenced-automatically-in-a-dynamic-array", "closed_reason": "Duplicate", "title": "Why is a char pointer dereferenced automatically in a dynamic array", "body": "<p>Perhaps a stupid question. When I <code>cout</code> the pointer to the char array, I thought it would print an address; instead it dereferences the address and prints the actual values till null.</p>\n\n<p>As opposed to an int array where it does what I expect it to. It prints the address of the first element.</p>\n\n<p>Why does the char element gets dereferenced when you print the pointer.</p>\n\n<pre><code>char* as = new char[100];\n    as[0] = 'a';\n    as[1] = 'b';\n    as[2] = NULL;\n    cout &lt;&lt; as &lt;&lt; endl;\n\n    int* s = new int[100];\n    s[0] = 2;\n    cout &lt;&lt; s &lt;&lt; endl;\n</code></pre>\n\n<p>Asking this because when I try to get the address to the first char element <code>a[0] = 'a';</code>. I have to store it in a pointer to a pointer. Which seems weird to me but that's besides the point.</p>\n\n<pre><code>char ** d = &amp;as;\n    cout &lt;&lt; d &lt;&lt; \"this is d\" &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "edited": false, "score": 3, "creation_date": 1428510864, "post_id": 29520336, "comment_id": 47195527, "body": "you should use <a href=\"http://www.cplusplus.com/reference/string/string/\" rel=\"nofollow noreferrer\">std::string</a>.  It has methods to split and maniuplate the characters within the string."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1428511498, "post_id": 29520336, "comment_id": 47195944, "body": "In C, you&#39;re probably best off returning a dynamically allocated structure and relying on the caller to free it. C++ has other methods I can&#39;t speak to."}, {"owner": {"reputation": 1401, "user_id": 2003821, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/o7Hlt.jpg?s=128&g=1", "display_name": "Aadam", "link": "https://stackoverflow.com/users/2003821/aadam"}, "edited": false, "score": 0, "creation_date": 1428511563, "post_id": 29520336, "comment_id": 47195971, "body": "error: &#39;string&#39; is not a member of &#39;std&#39;"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1428513396, "post_id": 29520336, "comment_id": 47197060, "body": "@Aadam: <code>#include &lt;string&gt;</code>"}, {"owner": {"reputation": 1401, "user_id": 2003821, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/o7Hlt.jpg?s=128&g=1", "display_name": "Aadam", "link": "https://stackoverflow.com/users/2003821/aadam"}, "edited": false, "score": 0, "creation_date": 1428514379, "post_id": 29520336, "comment_id": 47197629, "body": "I got that after #include &lt;string&gt;"}, {"owner": {"reputation": 1401, "user_id": 2003821, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/o7Hlt.jpg?s=128&g=1", "display_name": "Aadam", "link": "https://stackoverflow.com/users/2003821/aadam"}, "edited": false, "score": 0, "creation_date": 1428514421, "post_id": 29520336, "comment_id": 47197649, "body": "Can i get a simple example?"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1428514639, "post_id": 29520336, "comment_id": 47197776, "body": "I don&#39;t see any return values so I&#39;m not sure where you want to return a string array. You should use <code>std::vector&lt;std::string&gt;</code> for a dynamic array of strings. Or replace with <code>String</code> if this is the type you want to use."}, {"owner": {"reputation": 1401, "user_id": 2003821, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/o7Hlt.jpg?s=128&g=1", "display_name": "Aadam", "link": "https://stackoverflow.com/users/2003821/aadam"}, "edited": false, "score": 0, "creation_date": 1428516901, "post_id": 29520336, "comment_id": 47199138, "body": "This std is irritating..... Anyway the whole world is distraught with it :p"}], "owner": {"reputation": 1401, "user_id": 2003821, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/o7Hlt.jpg?s=128&g=1", "display_name": "Aadam", "link": "https://stackoverflow.com/users/2003821/aadam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428512997, "creation_date": 1428510660, "last_edit_date": 1428512997, "question_id": 29520336, "link": "https://stackoverflow.com/questions/29520336/return-string-array", "title": "Return String array", "body": "<p>I don't know if this question is asked. But I couldn't find any clear answer after searching full day on net. I would like to return a string array from a function. Right now I can make a String array by splitting a string.</p>\n\n<p>I am new to this but familiar with Java, very hard to split a string though. I tried as below. Someone please make a function out of it which can be used thru out.</p>\n\n<pre><code>void setup(){\n   Serial.begin(9600);\n   Serial.println(\"Starting..\");\n // Define \n  String txt = \"A@10,20,30:B@40,50,60:B@70,80,90:A@100,110,120\"; \n  int str_len = txt.length() + 1; \n  char char_array[str_len];\n  txt.toCharArray(char_array, str_len);\n\n  Serial.println(char_array);\n\n  char *p = char_array;\n  char *str;\n  int i=0;\n  String arr[20];\n  while ((str = strtok_r(p, \":\", &amp;p)) != NULL) {// delimiter is the semicolon\n    String stringOne =  String(str);\n    arr[i++]=stringOne;\n  }\n}\nvoid loop(){}\n</code></pre>\n\n<p>Also is it possible to make String array \"arr\" size dynamic?</p>\n"}, {"tags": ["c++", "curl", "refresh"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1428510751, "post_id": 29520297, "comment_id": 47195467, "body": "Does your web browser confirm that the source has changed?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1428510798, "post_id": 29520297, "comment_id": 47195491, "body": "Are you sure you modified the <i>correct</i> file? I.e. the one on the server at that specific address? Other than that, I don&#39;t think cURL does any caching, but it might be worth checking out."}, {"owner": {"reputation": 13, "user_id": 4765067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43df7d1a4d1c68c454e041cc66c84b1d?s=128&d=identicon&r=PG&f=1", "display_name": "Mumtasin Imran", "link": "https://stackoverflow.com/users/4765067/mumtasin-imran"}, "edited": false, "score": 0, "creation_date": 1428511437, "post_id": 29520297, "comment_id": 47195907, "body": "Yes. I&#39;m sure I&#39;ve edited the correct file. And the updated source is being printed whenever I refresh the URL from IE."}, {"owner": {"reputation": 13, "user_id": 4765067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43df7d1a4d1c68c454e041cc66c84b1d?s=128&d=identicon&r=PG&f=1", "display_name": "Mumtasin Imran", "link": "https://stackoverflow.com/users/4765067/mumtasin-imran"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1428511483, "post_id": 29520297, "comment_id": 47195935, "body": "@DrewDormann Which browser? IE or other ones?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4765067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43df7d1a4d1c68c454e041cc66c84b1d?s=128&d=identicon&r=PG&f=1", "display_name": "Mumtasin Imran", "link": "https://stackoverflow.com/users/4765067/mumtasin-imran"}, "edited": false, "score": 0, "creation_date": 1428514635, "post_id": 29521096, "comment_id": 47197775, "body": "Yes I rewrited the source code. But how can I update the page?"}, {"owner": {"reputation": 141, "user_id": 3850181, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/607c41c01815f80fe1b74120cb23d173?s=128&d=identicon&r=PG&f=1", "display_name": "Dm3Ch", "link": "https://stackoverflow.com/users/3850181/dm3ch"}, "reply_to_user": {"reputation": 13, "user_id": 4765067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43df7d1a4d1c68c454e041cc66c84b1d?s=128&d=identicon&r=PG&f=1", "display_name": "Mumtasin Imran", "link": "https://stackoverflow.com/users/4765067/mumtasin-imran"}, "edited": false, "score": 0, "creation_date": 1428514663, "post_id": 29521096, "comment_id": 47197793, "body": "What do you use as web server?"}, {"owner": {"reputation": 141, "user_id": 3850181, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/607c41c01815f80fe1b74120cb23d173?s=128&d=identicon&r=PG&f=1", "display_name": "Dm3Ch", "link": "https://stackoverflow.com/users/3850181/dm3ch"}, "reply_to_user": {"reputation": 13, "user_id": 4765067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43df7d1a4d1c68c454e041cc66c84b1d?s=128&d=identicon&r=PG&f=1", "display_name": "Mumtasin Imran", "link": "https://stackoverflow.com/users/4765067/mumtasin-imran"}, "edited": false, "score": 0, "creation_date": 1428515074, "post_id": 29521096, "comment_id": 47198062, "body": "WEB hosting or VPS/VDS?"}, {"owner": {"reputation": 13, "user_id": 4765067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43df7d1a4d1c68c454e041cc66c84b1d?s=128&d=identicon&r=PG&f=1", "display_name": "Mumtasin Imran", "link": "https://stackoverflow.com/users/4765067/mumtasin-imran"}, "edited": false, "score": 0, "creation_date": 1428515909, "post_id": 29521096, "comment_id": 47198512, "body": "Isn&#39;t there any other way to update page without uploading new file?"}, {"owner": {"reputation": 141, "user_id": 3850181, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/607c41c01815f80fe1b74120cb23d173?s=128&d=identicon&r=PG&f=1", "display_name": "Dm3Ch", "link": "https://stackoverflow.com/users/3850181/dm3ch"}, "reply_to_user": {"reputation": 13, "user_id": 4765067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43df7d1a4d1c68c454e041cc66c84b1d?s=128&d=identicon&r=PG&f=1", "display_name": "Mumtasin Imran", "link": "https://stackoverflow.com/users/4765067/mumtasin-imran"}, "edited": false, "score": 0, "creation_date": 1428516037, "post_id": 29521096, "comment_id": 47198605, "body": "No. cURL gets file from server. So if you modified file on your computer, but doesn&#39;t upload it on server, cURL gets old file."}, {"owner": {"reputation": 13, "user_id": 4765067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43df7d1a4d1c68c454e041cc66c84b1d?s=128&d=identicon&r=PG&f=1", "display_name": "Mumtasin Imran", "link": "https://stackoverflow.com/users/4765067/mumtasin-imran"}, "edited": false, "score": 0, "creation_date": 1428516312, "post_id": 29521096, "comment_id": 47198746, "body": "No no..Maybe you&#39;ve misunderstood. This is what I&#39;m doing- First of all I&#39;ve created a page on my server named mypage.html. My Program prints its source on the console when executed. Next I used a PHP script from my server to change the page source &amp; again executed the program. But I was getting the old source again."}, {"owner": {"reputation": 141, "user_id": 3850181, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/607c41c01815f80fe1b74120cb23d173?s=128&d=identicon&r=PG&f=1", "display_name": "Dm3Ch", "link": "https://stackoverflow.com/users/3850181/dm3ch"}, "reply_to_user": {"reputation": 13, "user_id": 4765067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43df7d1a4d1c68c454e041cc66c84b1d?s=128&d=identicon&r=PG&f=1", "display_name": "Mumtasin Imran", "link": "https://stackoverflow.com/users/4765067/mumtasin-imran"}, "edited": false, "score": 0, "creation_date": 1428516404, "post_id": 29521096, "comment_id": 47198802, "body": "So you have got 2 pages: 1. Static page 2. PHP script that update first file  Is it so?"}], "owner": {"reputation": 141, "user_id": 3850181, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/607c41c01815f80fe1b74120cb23d173?s=128&d=identicon&r=PG&f=1", "display_name": "Dm3Ch", "link": "https://stackoverflow.com/users/3850181/dm3ch"}, "is_accepted": false, "score": 0, "last_activity_date": 1428513068, "creation_date": 1428513068, "answer_id": 29521096, "question_id": 29520297, "link": "https://stackoverflow.com/questions/29520297/c-curl-refresh-page/29521096#29521096", "title": "C++ cURL Refresh Page", "body": "<p>I think you rewrite source code of the page, but remember update page on web server or page cashed</p>\n"}, {"owner": {"reputation": 185, "user_id": 4706176, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/812825682133700/picture?type=large", "display_name": "Abdullah Shahriar", "link": "https://stackoverflow.com/users/4706176/abdullah-shahriar"}, "is_accepted": true, "score": 0, "last_activity_date": 1428692892, "creation_date": 1428692892, "answer_id": 29568992, "question_id": 29520297, "link": "https://stackoverflow.com/questions/29520297/c-curl-refresh-page/29568992#29568992", "title": "C++ cURL Refresh Page", "body": "<p>I faced the same problem recently. But it was with WinINet, not with cURL. Simply I changed my .html file to .php on my server and it worked fine! Actually .php files aren't cached by browser. So give it a try.</p>\n"}], "owner": {"reputation": 13, "user_id": 4765067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43df7d1a4d1c68c454e041cc66c84b1d?s=128&d=identicon&r=PG&f=1", "display_name": "Mumtasin Imran", "link": "https://stackoverflow.com/users/4765067/mumtasin-imran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 774, "favorite_count": 0, "accepted_answer_id": 29568992, "answer_count": 2, "score": 0, "last_activity_date": 1440855732, "creation_date": 1428510538, "last_edit_date": 1440855732, "question_id": 29520297, "link": "https://stackoverflow.com/questions/29520297/c-curl-refresh-page", "title": "C++ cURL Refresh Page", "body": "<p>I have the following code in C++</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;curl/curl.h&gt;\n#include &lt;string.h&gt;\n\nusing namespace std;\n\n\n\nint main(int argc, char *argv[])\n{\n   CURL *curl;\n  CURLcode res;\n\n  curl = curl_easy_init();\n  if(curl) {\n    curl_easy_setopt(curl, CURLOPT_URL, \"http://example.com/mypage.html\");\n    /* example.com is redirected, so we tell libcurl to follow redirection */ \n    curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, 1L);\n\n    /* Perform the request, res will get the return code */ \n    res = curl_easy_perform(curl);\n    /* Check for errors */ \n    if(res != CURLE_OK)\n      fprintf(stderr, \"curl_easy_perform() failed: %s\\n\",\n              curl_easy_strerror(res));\n\n    /* always cleanup */ \n    curl_easy_cleanup(curl);\n  }\n    system(\"PAUSE\");\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>When I'm running this program it is showing the source code of mypage.html on the console. Next I updated the source code of mypage.html and again executed the program, but it was printing the previous source code on the console again. Where's the problem? Please Help.</p>\n"}, {"tags": ["c++", "xml", "dom", "xsd-validation", "xerces-c"], "comments": [{"owner": {"reputation": 484, "user_id": 4478159, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HIUrS7xPXcg/AAAAAAAAAAI/AAAAAAAAApI/URqp8XgUB4Q/photo.jpg?sz=128", "display_name": "csauvanet", "link": "https://stackoverflow.com/users/4478159/csauvanet"}, "edited": false, "score": 0, "creation_date": 1429608208, "post_id": 29520296, "comment_id": 47666801, "body": "Is line 121 calling CodeSynthesis validation on your elementRoot ? The exception is from CodeSynthesis not from Xerces ?"}, {"owner": {"reputation": 153, "user_id": 1580428, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702d92a4359b2f877c5400678ea22535?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/1580428/georges"}, "reply_to_user": {"reputation": 484, "user_id": 4478159, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HIUrS7xPXcg/AAAAAAAAAAI/AAAAAAAAApI/URqp8XgUB4Q/photo.jpg?sz=128", "display_name": "csauvanet", "link": "https://stackoverflow.com/users/4478159/csauvanet"}, "edited": false, "score": 0, "creation_date": 1429633889, "post_id": 29520296, "comment_id": 47686264, "body": "I&#39;m not sure. I have this same code working when I don&#39;t have namespaces attached to the xml"}, {"owner": {"reputation": 484, "user_id": 4478159, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HIUrS7xPXcg/AAAAAAAAAAI/AAAAAAAAApI/URqp8XgUB4Q/photo.jpg?sz=128", "display_name": "csauvanet", "link": "https://stackoverflow.com/users/4478159/csauvanet"}, "edited": false, "score": 0, "creation_date": 1429686576, "post_id": 29520296, "comment_id": 47709283, "body": "Can you show the XSD and the XML ?"}, {"owner": {"reputation": 484, "user_id": 4478159, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HIUrS7xPXcg/AAAAAAAAAAI/AAAAAAAAApI/URqp8XgUB4Q/photo.jpg?sz=128", "display_name": "csauvanet", "link": "https://stackoverflow.com/users/4478159/csauvanet"}, "edited": false, "score": 1, "creation_date": 1429686932, "post_id": 29520296, "comment_id": 47709514, "body": "What if you change the DOM content with this option to true: <code>parser-&gt;setDoNamespaces(true);</code>"}, {"owner": {"reputation": 153, "user_id": 1580428, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702d92a4359b2f877c5400678ea22535?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/1580428/georges"}, "reply_to_user": {"reputation": 484, "user_id": 4478159, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HIUrS7xPXcg/AAAAAAAAAAI/AAAAAAAAApI/URqp8XgUB4Q/photo.jpg?sz=128", "display_name": "csauvanet", "link": "https://stackoverflow.com/users/4478159/csauvanet"}, "edited": false, "score": 0, "creation_date": 1429722588, "post_id": 29520296, "comment_id": 47736682, "body": "Perfect! that was it, thank you so much!"}], "owner": {"reputation": 153, "user_id": 1580428, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702d92a4359b2f877c5400678ea22535?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/1580428/georges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 836, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1428510538, "creation_date": 1428510538, "question_id": 29520296, "link": "https://stackoverflow.com/questions/29520296/xerces-c-expecting-namespace-element", "title": "Xerces c expecting namespace element", "body": "<p>I'm trying to use xerces-c to parse an xml string. I've used xsd code synthesis to generate the cxx and hxx files from the xsd that corresponds to the string. I've been trying to get it to ignore the namespace that is attributed with the xsd. In the string I receive all of the elements have the namespace in front of them:      filtermessage:filterMessage. I also tried sending the xml string w/o the namespace in it. i.e just filterMessage. Either way I get this error: DOM Exception parsing, exception: expected element 'filtermessage#msgSystem'. I also tried:</p>\n\n<pre><code>  auto_ptr&lt;filterMessage&gt; table(filterMessage_(*xmlDoc));\n</code></pre>\n\n<p>which gets me the same error.</p>\n\n<p>The DOMNodeList* getchildren command doesn't have a problem. Does anyone know how I could get xerces-c to ignore the namespace? (I Successfully got xerces-c to parse this message but it involved me taking out the namespace from the xsd to beging with)</p>\n\n<pre><code>            XercesDOMParser* parser = new XercesDOMParser();\n            parser-&gt;setDoNamespaces(false);\n            parser-&gt;setDoSchema(false);\n            parser-&gt;setValidationScheme(XercesDOMParser::Val_Never);\n            parser-&gt;parse(xmlBuf);\n\n            DOMDocument *xmlDoc;\n\n            xmlDoc = parser-&gt;getDocument();\n\n            if(!xmlDoc)\n            {\n                    cout &lt;&lt; \"Failed to parse\" &lt;&lt; endl;\n                    return;\n            }\n            DOMElement* elementRoot = xmlDoc-&gt;getDocumentElement();\n\n            if( !elementRoot )\n            {\n                    cout &lt;&lt; \"empty xml doc\" &lt;&lt; endl;\n                    fflush(stdout);\n            }\n            else\n            {\n                    DOMNodeList* children = elementRoot-&gt;getChildNodes();\n                    cout &lt;&lt; __FILE__ &lt;&lt; \" \" &lt;&lt; __LINE__ &lt;&lt; endl;\n                    fflush(stdout);\n                    filterMessage msg(*elementRoot, xml_schema::flags::dont_validate);\n                    cout &lt;&lt; __FILE__ &lt;&lt; \" \" &lt;&lt; __LINE__ &lt;&lt; endl;\n                    fflush(stdout);\n            }\n</code></pre>\n\n<p>output: </p>\n\n<pre><code>Filter.cpp 119\nDOM Exception parsing, exception: expected element 'filtermessage#msgSystem'\n</code></pre>\n\n<p>this is the start of the string:</p>\n\n<pre><code>&lt; filtermessage:filterMessage xmlns:filtermapping=\"filtermapping\" xmlns:filtermessage=\"filtermessage\"&gt;\n\n&lt; filtermessage:msgSystem&gt;\n</code></pre>\n"}, {"tags": ["c++", "pointers", "c-strings"], "comments": [{"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 2, "creation_date": 1428510549, "post_id": 29520273, "comment_id": 47195371, "body": "Arrays are not pointers. Duplicate hundreds of times over."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1428510886, "post_id": 29520273, "comment_id": 47195545, "body": "You are not allocating for or copying <code>str</code>&#39;s terminating character."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 2, "creation_date": 1428511202, "post_id": 29520273, "comment_id": 47195746, "body": "You didn&#39;t include an error message and the inputs which cause the issue."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 1, "creation_date": 1428511713, "post_id": 29520273, "comment_id": 47196055, "body": "The question is a mess. You can&#39;t just say &quot;there is an error&quot;. Do you mean there is an error inside the <code>String</code> constructor we see here? Or do you mean there is error elsewhere in your code at the location where you create a <code>String</code> object and call this constructor? And why are you trying (with bugs) to create a <code>String</code> object anyway, when <code>std:: string</code> exists"}], "answers": [{"owner": {"reputation": 7641, "user_id": 4282370, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0WI7C.jpg?s=128&g=1", "display_name": "Amnon Shochot", "link": "https://stackoverflow.com/users/4282370/amnon-shochot"}, "is_accepted": true, "score": 0, "last_activity_date": 1428510899, "creation_date": 1428510899, "answer_id": 29520425, "question_id": 29520273, "link": "https://stackoverflow.com/questions/29520273/const-char-ptr-vs-char-ptr/29520425#29520425", "title": "const char * ptr vs char ptr []", "body": "<ol>\n<li>Unless the pointer was explicitly defined to be constant (<code>const</code>) the pointer to the array is not constant but just a regular pointer, thus can be modified </li>\n<li>The above code is buggy as arr should be of len [size + 1] to save space for the terminating zero (end of string char)</li>\n</ol>\n"}], "owner": {"reputation": 55, "user_id": 4572293, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-LBJcGoaawAE/AAAAAAAAAAI/AAAAAAAAAEM/l4-EcX8w2uo/photo.jpg?sz=128", "display_name": "Nilesh Kumar", "link": "https://stackoverflow.com/users/4572293/nilesh-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "accepted_answer_id": 29520425, "answer_count": 1, "score": -7, "last_activity_date": 1428510899, "creation_date": 1428510467, "last_edit_date": 1428510537, "question_id": 29520273, "link": "https://stackoverflow.com/questions/29520273/const-char-ptr-vs-char-ptr", "title": "const char * ptr vs char ptr []", "body": "<p>I am passing a string constant from main to a function, My question was why there is an error when I put an array of characters (cstring) in the function argument but it works alright when I put constant character pointer, isn't an array a constant pointer ??\nHere is the function (it is actually a parametrized constructor for my string class)  </p>\n\n<pre><code>String (   const char * str )\n        {\n            size = strlen(str);\n            arr = new char [size] // arr and size are my data members\n            for ( int i = 0 ; i&lt;size ; i++)\n                arr[i] = str[i];\n        }\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1428510499, "post_id": 29520214, "comment_id": 47195346, "body": "How about just a simple <a href=\"http://en.cppreference.com/w/cpp/io/basic_istringstream\" rel=\"nofollow noreferrer\"><code>std::istringstream</code></a> and let the input operator <code>&gt;&gt;</code> handle it?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1428510503, "post_id": 29520214, "comment_id": 47195349, "body": "What about template specializations?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428511921, "post_id": 29520214, "comment_id": 47196191, "body": "Or <code>boost::lexical_cast</code>?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1428511971, "post_id": 29520214, "comment_id": 47196228, "body": "Since user-defined-types will need to provide a conversion function, I fail to see the problem with requiring the user to provide a conversion <i>specialization</i> instead."}], "answers": [{"comments": [{"owner": {"reputation": 1487, "user_id": 1709708, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/868a7da775b2263dd1d813a78f3e27cc?s=128&d=identicon&r=PG", "display_name": "user1709708", "link": "https://stackoverflow.com/users/1709708/user1709708"}, "edited": false, "score": 0, "creation_date": 1428571631, "post_id": 29520637, "comment_id": 47222109, "body": "So to support new/custom types I just have to define a friend overload of std::istringstream&amp; operator&gt;&gt;(std::istringstream&amp; is, MyType&amp; type) ? If yes, then this is exactly what I&#39;m looking for. There will be an error at compile time if one of my new types doesn&#39;t implement this operator, right?"}], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 1, "last_activity_date": 1428511604, "creation_date": 1428511604, "answer_id": 29520637, "question_id": 29520214, "link": "https://stackoverflow.com/questions/29520214/how-to-customly-convert-template-arguments/29520637#29520637", "title": "How to customly convert template arguments", "body": "<p><sub>This is turning Joachim's comment into an answer.</sub></p>\n\n<p>Use <code>std::istringstream</code> and let the input operator <code>&gt;&gt;</code> handle it.</p>\n\n<pre><code>std::istringstream iss(str);\nT result;\nif (!(iss &gt;&gt; result)) {\n    throw std::logical_error(\"Type conversion failed!\");\n}\nreturn result;\n</code></pre>\n"}], "owner": {"reputation": 1487, "user_id": 1709708, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/868a7da775b2263dd1d813a78f3e27cc?s=128&d=identicon&r=PG", "display_name": "user1709708", "link": "https://stackoverflow.com/users/1709708/user1709708"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 29520637, "answer_count": 1, "score": 1, "last_activity_date": 1428511604, "creation_date": 1428510293, "question_id": 29520214, "link": "https://stackoverflow.com/questions/29520214/how-to-customly-convert-template-arguments", "title": "How to customly convert template arguments", "body": "<p>Lets say I parse a file and will get a string vector as a result which contains various data types. I'm now looking for a function like:</p>\n\n<pre><code>template&lt;typename T&gt;\nT convertToType(const std::string&amp; str);\n</code></pre>\n\n<p>which can do this conversion. Ideally I should be able to somehow provide my own conversion function, i.e. if T is an own complex type. Is there a way around having to pass it as a parameter everytime?</p>\n\n<p>I was thinking about some sort of:</p>\n\n<pre><code>if(typeof(T) == double)\n  std::stod(str)\n// ...\nelse\n  throw std::logical_error(\"Type not supported yet!\");\n</code></pre>\n\n<p>Another option would be to write a template specialization for each type but this seems to make the use of a template function pretty useless if I have to specify it for each type again...</p>\n"}, {"tags": ["c++", "multithreading", "lambda"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1428511090, "post_id": 29520148, "comment_id": 47195679, "body": "You could consider using a thread safe queue implementation like <a href=\"https://juanchopanzacpp.wordpress.com/2013/02/26/concurrent-queue-c11/\" rel=\"nofollow noreferrer\">this</a>. You pass the queue as an argument when the thread is created, then wait on it in the original thread. When your callback is called you just push onto the queue."}], "answers": [{"owner": {"reputation": 79428, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "is_accepted": false, "score": 0, "last_activity_date": 1428540990, "creation_date": 1428540990, "answer_id": 29527921, "question_id": 29520148, "link": "https://stackoverflow.com/questions/29520148/how-to-execute-a-callback-in-the-original-thread-in-c/29527921#29527921", "title": "How to execute a callback in the original thread in C++?", "body": "<p>Consider:</p>\n\n<pre><code>void thread1() {\n  boost::thread t(blah, ... whatever);\n\n  while (true) {\n    std::cout &lt;&lt; \"working\\n\";\n  }\n}\n</code></pre>\n\n<p>The thread that's spawned here can't just interrupt the thread that created it and make it start executing whatever the spawned thread wants. If a context is not responsible for spawning a thread and therefore setting the thread's 'entry point', then getting the thread to run some code requires cooperation from the thread itself.</p>\n\n<p>For example, a thread might continuously process a queue of work items. Getting such a thread to run code just depends on putting a work item into the queue.</p>\n\n<p>So if you want background threads to be able to come back and make some code execute on the original thread you need to design the original thread to allow this. Generally this is done as described above with a queue of some sort. A couple examples of this are the Windows Event loop or <code>dispatch_main()</code> in GCD on OS X.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 4764933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe58f808e5f147b8cfc26c2a4cf62e34?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Aurilac", "link": "https://stackoverflow.com/users/4764933/simon-aurilac"}, "edited": false, "score": 0, "creation_date": 1428594707, "post_id": 29528146, "comment_id": 47238162, "body": "Ok, thanks for the answer. I note this one as the &#39;correct&#39; one because of &quot;You cannot arbitrarily run code on another existing thread&quot;."}], "owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "is_accepted": true, "score": 2, "last_activity_date": 1428542566, "creation_date": 1428542566, "answer_id": 29528146, "question_id": 29520148, "link": "https://stackoverflow.com/questions/29520148/how-to-execute-a-callback-in-the-original-thread-in-c/29528146#29528146", "title": "How to execute a callback in the original thread in C++?", "body": "<p>You cannot arbitrarily run code on another existing thread that is carrying its own business. As @bames53 stated on his answer, you need some cooperation mechanism with this thread to deliver tasks to it, like a queue or some place you will place this task.</p>\n\n<p>Example:</p>\n\n<ul>\n<li>Thread 1 creates tasks and place them on queue;</li>\n<li>Thread 2 fetch tasks from queue and execute them;</li>\n</ul>\n\n<p>Note that allowing two concurrent threads to modify variables shared among them is a very dangerous practice, and will most likely cause crashes. To do that safely, you must use mutex (mutual exclusion), a technique that guarantees that the threads won't access a shared variable at the same time.</p>\n"}], "owner": {"reputation": 23, "user_id": 4764933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe58f808e5f147b8cfc26c2a4cf62e34?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Aurilac", "link": "https://stackoverflow.com/users/4764933/simon-aurilac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1469, "favorite_count": 0, "accepted_answer_id": 29528146, "answer_count": 2, "score": 0, "last_activity_date": 1428542566, "creation_date": 1428510125, "last_edit_date": 1428540093, "question_id": 29520148, "link": "https://stackoverflow.com/questions/29520148/how-to-execute-a-callback-in-the-original-thread-in-c", "title": "How to execute a callback in the original thread in C++?", "body": "<p>In C++, can I execute a function in a thread, and pass to this function a lambda that will be executed in the original thread ?</p>\n\n<pre><code>class A\n{\n    void fA()\n    {\n        // thread 1\n        boost::thread t(boost::bind(&amp;A::fA, this, [=]() { /* code to execute in thread 1 */  }\n    }\n\n    void fB(const std::function&lt;void()&gt; &amp;callback)\n    {\n        // thread 2\n\n        how to execute 'callback' in the original thread (thread 1) ?\n    }    \n}\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "opengl", "c++11", "glfw", "freetype"], "comments": [{"owner": {"reputation": 126, "user_id": 346446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f959dfa086586f0c14c793723d077d9?s=128&d=identicon&r=PG", "display_name": "baderman", "link": "https://stackoverflow.com/users/346446/baderman"}, "edited": false, "score": 0, "creation_date": 1428510981, "post_id": 29520052, "comment_id": 47195600, "body": "To optimize, maybe You should generate all glyphs earlier, put it onto separate texture (with given offset on x and y axes), then transfer single texture to card and paint with parts of bigger texture. Thanks to this, You will have to generate bitmaps only once, and thanks to given non-zero offsets textures won&#39;t bleed. Otherwise, @genpfault answer should be sufficient."}, {"owner": {"reputation": 215, "user_id": 732862, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/68d23e2381aa8fbd8c27070a97cbd78d?s=128&d=identicon&r=PG&f=1", "display_name": "HonestHeuristic", "link": "https://stackoverflow.com/users/732862/honestheuristic"}, "reply_to_user": {"reputation": 126, "user_id": 346446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f959dfa086586f0c14c793723d077d9?s=128&d=identicon&r=PG", "display_name": "baderman", "link": "https://stackoverflow.com/users/346446/baderman"}, "edited": false, "score": 0, "creation_date": 1428511311, "post_id": 29520052, "comment_id": 47195824, "body": "I&#39;m not familiar with a way to load every glyph in a face and I wanted to be unicode friendly so decided to do loading on a when-necessary basis. There is a font class that calls the load function only if the character hasn&#39;t already been loaded and the size previously loaded is too small for the requested draw size. If this proves too inefficient later I will swap it but right now I want to remain flexible in this way."}], "answers": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": true, "score": 4, "last_activity_date": 1428510520, "creation_date": 1428510520, "answer_id": 29520289, "question_id": 29520052, "link": "https://stackoverflow.com/questions/29520052/freetype-glyphs-wrap-when-loaded-into-opengl/29520289#29520289", "title": "Freetype glyphs wrap when loaded into openGL", "body": "<p><code>GL_TEXTURE_WRAP_S</code>/<code>GL_TEXTURE_WRAP_T</code> default to <code>GL_REPEAT</code>.</p>\n\n<p>Use <code>GL_CLAMP_TO_EDGE</code> instead.</p>\n"}], "owner": {"reputation": 215, "user_id": 732862, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/68d23e2381aa8fbd8c27070a97cbd78d?s=128&d=identicon&r=PG&f=1", "display_name": "HonestHeuristic", "link": "https://stackoverflow.com/users/732862/honestheuristic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "accepted_answer_id": 29520289, "answer_count": 1, "score": 3, "last_activity_date": 1428510520, "creation_date": 1428509911, "question_id": 29520052, "link": "https://stackoverflow.com/questions/29520052/freetype-glyphs-wrap-when-loaded-into-opengl", "title": "Freetype glyphs wrap when loaded into openGL", "body": "<p>I'm trying to load TrueTypeFonts through freetype and display them using openGL and this is what I'm getting:</p>\n\n<p><img src=\"https://i.stack.imgur.com/RlE40.png\" alt=\"Font application\"></p>\n\n<p>As you can see mostly it's fine but if you look closer each individual glyph seems to have some small incongruities around the borders. I noticed that these strange lines are actually carried over pixels from the other side. Look at the 'T' and 'h' in particular where you can see small bars corresponding with the opposite side of the texture. This happens with different fonts as well. Here is the code responsible for copying the glyph bitmap buffer into openGL:</p>\n\n<pre><code>    void load(FT_GlyphSlot glyphSlot, double loadedHeight){\n        this-&gt;loadedHeight = loadedHeight;\n        int width = glyphSlot-&gt;bitmap.width;\n        int height = glyphSlot-&gt;bitmap.rows;\n\n        sizeRatios = Vector2D(width / loadedHeight, height / loadedHeight);\n        offsetRatios = Vector2D(glyphSlot-&gt;bitmap_left / loadedHeight, glyphSlot-&gt;metrics.horiBearingY / loadedHeight);\n        advanceRatios = Vector2D((glyphSlot-&gt;advance.x &gt;&gt; 6) / loadedHeight, (glyphSlot-&gt;advance.y &gt;&gt; 6) / loadedHeight);\n\n        std::cout &lt;&lt; width &lt;&lt; \", \" &lt;&lt; height &lt;&lt; std::endl;\n\n        GLubyte * textureData = new GLubyte[width * height * 4];\n\n        for(int y = 0; y &lt; height; y++){\n            for(int x = 0; x &lt; width; x++){\n                for(int i = 0; i &lt; 4; i++){\n                    textureData[(x + y * width) * 4 + i] = glyphSlot-&gt;bitmap.buffer[x + width * y];\n                }\n            }\n        }\n\n        texture.bind();\n        glPixelStorei(GL_UNPACK_ALIGNMENT, 1);\n        glTexParameteri(GL_TEXTURE_2D, GL_GENERATE_MIPMAP, GL_TRUE);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR_MIPMAP_LINEAR);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);\n        texture.load(GL_TEXTURE_2D, 0, GL_RGBA, glyphSlot-&gt;bitmap.width, glyphSlot-&gt;bitmap.rows, 0, GL_RGBA, GL_UNSIGNED_BYTE, textureData);\n        // glGenerateMipmap(GL_TEXTURE_2D);\n\n        delete [] textureData;\n    }\n</code></pre>\n\n<p>The size of the font face is set elsewhere and passed into this method along with the glyph slot that I want to load. The texture object is just a class that creates a texture handle and keeps track of it, load just passes the parameters directly into glTexImage2D().</p>\n\n<p>I've tried shifting the pixels by one using modulus rotation and it worked vertically but not horizontally. I have also tried loading the texture by passing the buffer directly into load by changing the format to GL_RED as described <a href=\"http://www.gedge.ca/dev/2013/12/08/opengl-text-rendering-with-freetype/\" rel=\"nofollow noreferrer\">here</a> but the problem doesn't go away, so I think that maybe it might even be a flaw in freetype?</p>\n\n<p>I wonder is there is some basic element of texture loading that I do not understand.</p>\n\n<p>If you need some additional source code to understand what is wrong please ask.</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 1887, "user_id": 4650497, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/KlOcy.png?s=128&g=1", "display_name": "Krzysztof Majewski", "link": "https://stackoverflow.com/users/4650497/krzysztof-majewski"}, "edited": false, "score": 0, "creation_date": 1428514377, "post_id": 29520670, "comment_id": 47197628, "body": "I know but it&#39;s not what i want. I am just wondering if it&#39;s posiible do it my way..."}], "owner": {"reputation": 355, "user_id": 2676547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e04f56cfc6f814bc3e9db3f97bc54f57?s=128&d=identicon&r=PG", "display_name": "poe84it", "link": "https://stackoverflow.com/users/2676547/poe84it"}, "is_accepted": true, "score": 1, "last_activity_date": 1428511709, "creation_date": 1428511709, "answer_id": 29520670, "question_id": 29519986, "link": "https://stackoverflow.com/questions/29519986/qt-connecting-two-signals-and-one-slot/29520670#29520670", "title": "Qt connecting two signals and one slot", "body": "<p>If you need to force the user to push a QButton for \"applying\" the text he/she typed in a QTextEdit to a QLabel, maybe you want to check the validity of the inserted text, or use the text to achieve some goal or to store it in a variable for later use... so you need a custom slot or a custom class.</p>\n\n<p>Instead you can connect the signal QTextEdit.textChanged(QString) to the slot QLabel.setText(QString), so everything is typed in the QTextEdit is sent to the QLabel without pushing a button.</p>\n\n<p>But all depends on your aim.</p>\n"}, {"owner": {"reputation": 26, "user_id": 4704098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/84FVi.jpg?s=128&g=1", "display_name": "Finisher", "link": "https://stackoverflow.com/users/4704098/finisher"}, "is_accepted": false, "score": 1, "last_activity_date": 1428515416, "creation_date": 1428515416, "answer_id": 29521808, "question_id": 29519986, "link": "https://stackoverflow.com/questions/29519986/qt-connecting-two-signals-and-one-slot/29521808#29521808", "title": "Qt connecting two signals and one slot", "body": "<p>Here's how I would do it:</p>\n\n<p><code>connect(ui-&gt;pushbutton, SIGNAL(clicked()), this, SLOT(slot_pushbutton_clicked()))</code></p>\n\n<p>And then in the the <code>slot_pushbutton_clicked</code> slot,</p>\n\n<p><code>ui-&gt;label-&gt;setText(ui-&gt;lineEdit-&gt;text)</code></p>\n\n<p>Hope it helps :)</p>\n"}], "owner": {"reputation": 1887, "user_id": 4650497, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/KlOcy.png?s=128&g=1", "display_name": "Krzysztof Majewski", "link": "https://stackoverflow.com/users/4650497/krzysztof-majewski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 845, "favorite_count": 0, "accepted_answer_id": 29520670, "answer_count": 2, "score": 1, "last_activity_date": 1428515416, "creation_date": 1428509716, "question_id": 29519986, "link": "https://stackoverflow.com/questions/29519986/qt-connecting-two-signals-and-one-slot", "title": "Qt connecting two signals and one slot", "body": "<p>I have a programm with a QLabel, QTextEdit and a QPushButton.</p>\n\n<p>I want to put the text from LineEdit to Label when I click the button.</p>\n\n<p>I can do that by creating my own slot but can it be done with Qt slots?</p>\n\n<p>I've tried this code but it works not as I want...</p>\n\n<pre><code>this-&gt;connect(pushButton ,SIGNAL(clicked()), lineEdit, SIGNAL(textChanged(QString)), Qt::QueuedConnection);\nt-&gt;connect(lineEdit, SIGNAL(textChanged(QString)) , label ,SLOT(setText(QString)), Qt::DirectConnection);\n</code></pre>\n"}, {"tags": ["c++", "ssl", "boost", "openssl", "boost-asio"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1428522925, "post_id": 29519852, "comment_id": 47202714, "body": "You can have concurrency issues with a single thread, particularly if you use co-routines. The thread checks something, does something that implicitly or indirectly yields and allows another thread to run, and then does something assuming the thing it previously checked hasn&#39;t changed. Does each SSL connection have an associated strand? Are all asynchronous operations that can trigger composed operations properly dispatched on the strand?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user562566"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1428524235, "post_id": 29519852, "comment_id": 47203476, "body": "@DavidSchwartz yessir, they do have an associated strand and all async operations that access the connections are wrapped as well."}, {"owner": {"user_type": "does_not_exist", "display_name": "user562566"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1428528399, "post_id": 29519852, "comment_id": 47205615, "body": "@DavidSchwartz I fixed it, and it was the most absolutely ridiculous thing, the error codes from openSSL were masking the real issue which, when I went over the control flow ignoring them, turned out to be a failure in parsing the initial request, which, since no async_io op was fired to carry on the session, led to a premature shutdown of the sessions which caused boost error codes to aggregate the mysterious and yet (almost) entirely unrelated &quot;decryption failed or....&quot;. Thanks for your help. Not sure if I should just can this question."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1428530768, "post_id": 29519852, "comment_id": 47206780, "body": "You can answer it yourself I guess."}], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 8326714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/929531ba0c7361437e6dbc1cadc7f168?s=128&d=identicon&r=PG&f=1", "display_name": "Mike5050", "link": "https://stackoverflow.com/users/8326714/mike5050"}, "edited": false, "score": 0, "creation_date": 1503926205, "post_id": 29537064, "comment_id": 78798366, "body": "I know this is old, but I am suffering the same issue when I am doing: ssl_do_handshake, its turning SSL_ERROR(1), and this exact issue.  Using 1.0.2l."}], "owner": {"user_type": "does_not_exist", "display_name": "user562566"}, "is_accepted": true, "score": 17, "last_activity_date": 1428578604, "last_edit_date": 1428578604, "creation_date": 1428578276, "answer_id": 29537064, "question_id": 29519852, "link": "https://stackoverflow.com/questions/29519852/openssl-decryption-failed-or-bad-record-mac-boostasio/29537064#29537064", "title": "OpenSSL decryption failed or bad record mac boost::asio", "body": "<p>I was going to just delete this question, but I decided to answer it in light of the fact that nowhere on the net (that I could find) actually pointed to a correct solution to this problem. I've read every single report about this error that one could find and every single one of those reports, the people \"solved\" or \"reduced\" this error in a different way. Every single one of them, a different solution. This is what helped make this issue so difficult to reason out, because everyone everywhere has a different underlying causal explanation.</p>\n\n<p>It's complicated, ready? This error will present itself if you cancel/abort a pending async SSL operation. Mind->boom(). It'll be even more confusing if you do what the docs say and use async_shutdown to do so, because even the call back to async_shutdown will fail (error code is set) and your error message will randomly be something stupid like \"decryption failed or bad record mac\" or \"block cipher pad is wrong\" or \"SSLv3 alert!\" so on and so forth. <strong><em>When seeing errors like this, ignore the errors and analyze the control flow of your IO ops, somewhere you're either prematurely ending them or getting them out of order.</em></strong> </p>\n\n<p>In my case, the premature end was (sort of) intentional, since during this stupid heavy refactor I decided to change things outside the scope of the problem, like my HTTPHeader parser, which I bugged out and ended up cause it to fail nearly 100% and thus aborting the connections. :) The error strings were masking the real cause by telling me encryption failed for some reason or another.  Dumb mistake I know, but I take comfort in being the first one (apparently) to recognize it. :)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user562566"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7844, "favorite_count": 2, "accepted_answer_id": 29537064, "answer_count": 1, "score": 4, "last_activity_date": 1613676165, "creation_date": 1428509353, "last_edit_date": 1592644375, "question_id": 29519852, "link": "https://stackoverflow.com/questions/29519852/openssl-decryption-failed-or-bad-record-mac-boostasio", "title": "OpenSSL decryption failed or bad record mac boost::asio", "body": "<p>I'm writing a transparent intercepting HTTPS capable proxy using boost::asio + openSSL. I have a default server context where I specify that the server is a TLSv1.2 server, when a client connects, I extract the host from the hello and use <code>SSL_set_SSL_CTX</code> to set the context (which either already exists or I've just created it after spoofing the upstream cert) and initiate the server (downstream) read/write volley as well as the upstream.</p>\n<p>This was working before I started storing and sharing contexts. On each new incoming connection, I was creating a new client socket and context, loading ca-bundle as verify file, then creating a new server context, getting the spoofed certificate. It was functioning, but I started developing issues where EC_KEY objects were being double freed and such. <a href=\"https://stackoverflow.com/questions/29465501/ssl-use-certificate-seems-to-be-causing-a-double-free\">I learned from another question of mine</a> that I was going about this the wrong way and began refactoring to recycle and share CTX objects. To be specific, I'm using a single client CTX shared across the board that loads, at program startup, the CA-Bundle for verification.</p>\n<p>However, since this refactor, I'm getting this on both the client and the server:</p>\n<pre><code> decryption failed or bad record mac\n</code></pre>\n<p>..mixed with a bajillion &quot;short read&quot;s. If I try to force everything TLSv1.2, I get</p>\n<pre><code>block cipher pad is wrong\n</code></pre>\n<p>Those errors are given to me after a read/write has failed and I call <code>async_shutdown</code> on either upstream or downstream sockets, which in the callback, error is set (so the shutdown failed).</p>\n<p>I've scoured the interwebs finding jira posts from places like apache httpd and nginx where this error was fixed in different ways (resizing read buffers to be larger, openSSL patches, forcing SSLv3, so on and so forth).</p>\n<p>I thought there might be an issue with multithreading (my io-service uses a thread pool) but I can see in the code that boost do_init sets locking mechanics for openSSL and all of my IO are wrapped into a single strand.</p>\n<p>I'm at a total loss and am wondering if anyone can shed light on what might be happening. I realize I've posted no code, that's because I've got hundreds and hundreds of lines of it and don't want to turn people off with a huge code dump. I realize however this is a rather complicated program and thus a complicated issue so please ask and I'll provide whatever I can.</p>\n<p><strong>Edit</strong> <br>\nI guess I should mention for completeness that I'm getting these errors on both openssl 1.0.2 and 1.0.2a, Win 8.1 x64 and I'm intercepting and routing the http/https traffic through my proxy with with WinDivert.</p>\n<p><strong>Edit 2</strong><br>\nReduced entire program to 1 thread, same effect. Created new client CTX for each client connection, same issue. Tried disabling AES-NI, issue persists. Tried different computer, same effect. Recompiled openssl from source (was using precompiled binaries), issue persists. Tried setting additional OP_ workaround flags described in current docs related to downgrade detection, padding bugs, so on and so forth, issue persist. I think I'll just start randomly mashing the keyboard and compile button soon.</p>\n"}, {"tags": ["c++", "opencv", "orb", "keypoint"], "comments": [{"owner": {"reputation": 35699, "user_id": 2056772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574eff69e66401997eecd2ac405053c1?s=128&d=identicon&r=PG", "display_name": "berak", "link": "https://stackoverflow.com/users/2056772/berak"}, "edited": false, "score": 0, "creation_date": 1428576601, "post_id": 29519771, "comment_id": 47225268, "body": "your example is far too constructed and easy. in reality, you can&#39;t make any assumptions about the amount of translation/rotation/shearing, that&#39;s why you have to rely on comparing features, not keypoint locations."}, {"owner": {"reputation": 783, "user_id": 4474553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qerC9.jpg?s=128&g=1", "display_name": "fakeaccount", "link": "https://stackoverflow.com/users/4474553/fakeaccount"}, "reply_to_user": {"reputation": 35699, "user_id": 2056772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574eff69e66401997eecd2ac405053c1?s=128&d=identicon&r=PG", "display_name": "berak", "link": "https://stackoverflow.com/users/2056772/berak"}, "edited": false, "score": 0, "creation_date": 1428576882, "post_id": 29519771, "comment_id": 47225427, "body": "Well its an incredibly simplified example so to get the point across. But anyway, surely you can be able to have an image with known <code>keypoints</code> that you&#39;re happy with, then be able to know the relationship between all of these (i.e. the relational distances between them and the &quot;shape&quot; of the <code>keypoints</code>) and use that to compare with another images <code>keypoints</code> to get ride of those that don&#39;t fall roughly into that known &quot;shape&quot; from your own image? ~ on top of comparing features too obviously ~"}], "answers": [{"comments": [{"owner": {"reputation": 783, "user_id": 4474553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qerC9.jpg?s=128&g=1", "display_name": "fakeaccount", "link": "https://stackoverflow.com/users/4474553/fakeaccount"}, "edited": false, "score": 0, "creation_date": 1428510723, "post_id": 29520241, "comment_id": 47195444, "body": "You&#39;ve misread what I wrote, see my EDIT -- I meant that the arbitrary positions of the keypoints x, y, and z, NOT the x, y coordinates of the keypoints."}], "owner": {"reputation": 406, "user_id": 4153719, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0c99b3de4dcc64d8bae44f655148c97b?s=128&d=identicon&r=PG&f=1", "display_name": "Zypps987", "link": "https://stackoverflow.com/users/4153719/zypps987"}, "is_accepted": false, "score": 0, "last_activity_date": 1428510378, "creation_date": 1428510378, "answer_id": 29520241, "question_id": 29519771, "link": "https://stackoverflow.com/questions/29519771/opencv-c-compare-keypoint-locations-in-different-images/29520241#29520241", "title": "opencv c++ compare keypoint locations in different images", "body": "<p>What is it you are trying to do exactly? More information is needed to give you a good answer. Otherwise it'll have to be very broad and most likely not useful to your needs.</p>\n\n<p>And with your statement \"determining whether the matched keypoints are relatively in the same locations on both\" do you mean literally on the same x,y positions between 2 images?</p>\n\n<p>I would try out the SURF algorithm. It works extremely well for what you described above (though I found it to be a bit slow unless you use gpu acceleration, 5fps vs 34fps).</p>\n\n<p>Here is the tutorial for surf, I personally found it very useful, but the executables are for linux users only. However you can simply remove the OS specific bindings in the source code and keep only the opencv related bindings and have it compile + run on linux just the same.</p>\n\n<p><a href=\"https://code.google.com/p/find-object/#Tutorials\" rel=\"nofollow\">https://code.google.com/p/find-object/#Tutorials</a></p>\n\n<p>Hope this helped!</p>\n"}, {"owner": {"reputation": 223, "user_id": 4545462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1621daa22a3453391a193ad9fb7820d2?s=128&d=identicon&r=PG&f=1", "display_name": "Whysmerhill", "link": "https://stackoverflow.com/users/4545462/whysmerhill"}, "is_accepted": false, "score": 0, "last_activity_date": 1428568108, "last_edit_date": 1428568108, "creation_date": 1428560898, "answer_id": 29531314, "question_id": 29519771, "link": "https://stackoverflow.com/questions/29519771/opencv-c-compare-keypoint-locations-in-different-images/29531314#29531314", "title": "opencv c++ compare keypoint locations in different images", "body": "<p>You can do a filter on the pixels distance between two keypoint.\nLet's say matches is your vector of matches, kp_1 your vector of keypoints on the first picture and kp_2 on the second. You can use the code above to eliminate obviously incorrect matches. You just need to fix a threshold.</p>\n\n<pre><code>double threshold= YourValue;\nvector&lt;DMatch&gt; good_matches;\nfor (int i = 0; i &lt; matches.size(); i++)\n{\n    double dist_p = sqrt(pow(abs(kp_1[matches[i][0].queryIdx].pt.x - kp_2[matches[i][0].trainIdx].pt.x), 2) + pow(abs(kp_1[matches[i][0].queryIdx].pt.y - kp_2[matches[i][0].trainIdx].pt.y), 2));\n    if (dist_p &lt; threshold)\n    {\n        good_matches.push_back(matches[i][0]);\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8509, "user_id": 1068986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/1Xw9n.jpg?s=128&g=1", "display_name": "sansuiso", "link": "https://stackoverflow.com/users/1068986/sansuiso"}, "reply_to_user": {"reputation": 783, "user_id": 4474553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qerC9.jpg?s=128&g=1", "display_name": "fakeaccount", "link": "https://stackoverflow.com/users/4474553/fakeaccount"}, "edited": false, "score": 0, "creation_date": 1428586831, "post_id": 29531874, "comment_id": 47232198, "body": "I&#39;ve added a section that addresses your problem more specifically."}, {"owner": {"reputation": 783, "user_id": 4474553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qerC9.jpg?s=128&g=1", "display_name": "fakeaccount", "link": "https://stackoverflow.com/users/4474553/fakeaccount"}, "edited": false, "score": 0, "creation_date": 1429009895, "post_id": 29531874, "comment_id": 47394821, "body": "I&#39;ve been looking into that for the past couple of days, and it is so confusing... Could you elaborate a bit more please? @sansuiso"}], "owner": {"reputation": 8509, "user_id": 1068986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/1Xw9n.jpg?s=128&g=1", "display_name": "sansuiso", "link": "https://stackoverflow.com/users/1068986/sansuiso"}, "is_accepted": false, "score": 5, "last_activity_date": 1428586797, "last_edit_date": 1428586797, "creation_date": 1428562910, "answer_id": 29531874, "question_id": 29519771, "link": "https://stackoverflow.com/questions/29519771/opencv-c-compare-keypoint-locations-in-different-images/29531874#29531874", "title": "opencv c++ compare keypoint locations in different images", "body": "<p>Keypoint matching is a problem with several dimensions. These dimensions are:</p>\n\n<ul>\n<li><strong>spatial</strong> distance, ie, the <code>(x,y)</code> distance as measured from the locations of two keypoints in different images</li>\n<li><strong>feature</strong> distance, that is, a distance that describes <em>how much two keypoints look alike</em>.</li>\n</ul>\n\n<p>Depending on your context, you do not want to compute the same distance, or you want to combine both. Here are some use cases:</p>\n\n<ul>\n<li><strong>optical flow</strong>, as implemented by opencv's <a href=\"http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html#calcopticalflowpyrlk\" rel=\"nofollow\">sparse Lucas-Kanade optical flow</a>. In this case, keypoints called <em>good features</em> are computed in each frame, then matched on a <em>spatial</em> distance basis. This works because the image is supposed to change relatively slowly (the input frames have a video framerate);</li>\n<li><strong>image stitching</strong>, as you can implement from opencv's <a href=\"http://docs.opencv.org/modules/features2d/doc/features2d.html\" rel=\"nofollow\">features2d</a> (free or <a href=\"http://docs.opencv.org/modules/nonfree/doc/feature_detection.html\" rel=\"nofollow\">non-free</a>). In this case, the images change radically since you move your camera around. Then, your goal becomes to find stable points, ie, points that are present in two or more images whatever their location is. In this case you will use <em>feature</em> distance. This also holds when you have a template image of an object that you want to find in query images.</li>\n</ul>\n\n<p>In order to compute <em>feature</em> distance, you need to compute a coded version of their appearance. This operation is performed by the <a href=\"http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_descriptor_extractors.html\" rel=\"nofollow\">DescriptorExtractor</a> class.\nThen, you can compute distances between the output of the descriptions: if the distance between two descriptions is small then the original keypoints are very likely to correspond to the same scene point.</p>\n\n<p>Pay attention when you compute distances to use the correct distance function: ORB, FREAK, BRISK rely on Hamming distance, while SIFt and SURF use a more usual L2 distance.</p>\n\n<p><strong>Match filtering</strong></p>\n\n<p>When you have individual matches, you may want to perform match filtering in order to reject good individual matches that may arise from scene ambiguities. Think for example of a keypoint that originates from the corner of a window of a house. Then it is very likely to match with another window in another house, but this may not be the good house or the good window.</p>\n\n<p>You have several ways of doing it:</p>\n\n<ul>\n<li>RANSAC performs a consistency check of the computed matches with the current solution estimate. Basically, it picks up some matches at random, computes a solution to the problem (usually a geometric transform between 2 images) and then counts how many of the matchings agree with this estimate. The estimate with the higher count of inliers wins;</li>\n<li>David Lowe performed another kind of filtering in the original SIFT paper. \nHe kept the two best candidates for a match with a given query keypoint, ie, points that had the lowest distance (or highest similarity). Then, he computed the ratio <code>similarity(query, best)/similarity(query, 2nd best)</code>. If this ratio is too low then the second best is also a good candidate for a match, and the matching result is dubbed ambiguous and rejected.</li>\n</ul>\n\n<p>Exactly how you should do it in your case is thus very likely to depend on your exact application.</p>\n\n<p><strong>Your specific case</strong></p>\n\n<p>In your case, you want to develop an <em>alternate feature descriptor</em> that is based on neighbouring keypoints.\nThe sky is obviously the limit here, but here are some steps that I would follow:</p>\n\n<ol>\n<li><p>make your descriptor rotation and scale invariant by computing the <a href=\"http://en.wikipedia.org/wiki/Principal_component_analysis\" rel=\"nofollow\">PCA</a> of the keypoints :</p>\n\n<pre><code>// Form a matrix from KP locations in current image\ncv::Mat allKeyPointsMatrix = gatherAllKeypoints(keypoints); \n\n// Compute PCA basis\ncv::PCA currentPCA(allKeyPointsMatrix, 2);\n\n// Reproject keypoints in new basis\ncv::Mat normalizedKeyPoints = currentPCA.project(allKeyPointsMatrix);\n</code></pre></li>\n<li><p>(optional) sort the keypoints in a quadtree or kd-tree for faster spatial indexing</p></li>\n<li>Compute for each keypoint a descriptor that is (for example) the offsets in normalized coordinates of the 4 or 5 closest keypoints</li>\n<li>Do the same in your query image</li>\n<li>Match keypoints from both mages based on these new descriptors.</li>\n</ol>\n"}], "owner": {"reputation": 783, "user_id": 4474553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qerC9.jpg?s=128&g=1", "display_name": "fakeaccount", "link": "https://stackoverflow.com/users/4474553/fakeaccount"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3589, "favorite_count": 3, "answer_count": 3, "score": 3, "last_activity_date": 1428586797, "creation_date": 1428509140, "last_edit_date": 1428576337, "question_id": 29519771, "link": "https://stackoverflow.com/questions/29519771/opencv-c-compare-keypoint-locations-in-different-images", "title": "opencv c++ compare keypoint locations in different images", "body": "<p>When comparing 2 images via <code>feature extraction</code>, how do you compare <code>keypoint</code> distances so to disregard those that are obviously incorrect?</p>\n\n<p>I've found when comparing similar images against each other, most of the time it can fairly accurate, but other times it can throws matches that are completely separate.</p>\n\n<p>So I'm after a way of looking at the 2 sets of <code>keypoints</code> from both images and determining whether the matched <code>keypoints</code> are relatively in the same locations on both. As in it knows that <code>keypoints</code> 1, 2, and 3 are so far apart on image 1, so the corresponding keypoints matched on image 2 should be of a fairly similar distance away from each other again.</p>\n\n<p>I've used <code>RANSAC</code> and <code>minimum distance</code> checks in the past but only to some effect, they don't seem to be as thorough as I'm after.</p>\n\n<p>(Using <code>ORB</code> and <code>BruteForce</code>)</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Changed <em>\"x, y, and z\"</em> to <em>\"1, 2, and 3\"</em></p>\n\n<p><strong>EDIT 2</strong> -- I'll try to explain further with quick Paint made examples:</p>\n\n<p>Say I have this as my image:</p>\n\n<p><img src=\"https://i.stack.imgur.com/OcxMb.png\" alt=\"enter image description here\"></p>\n\n<p>And I give it this image to compare against:</p>\n\n<p><img src=\"https://i.stack.imgur.com/tWk7L.png\" alt=\"enter image description here\"></p>\n\n<p>Its a cropped and squashed version of the original, but obviously similar.</p>\n\n<p>Now, say you ran it through <code>feature detection</code> and it came back with these results for the <code>keypoints</code> for the two images:</p>\n\n<p><img src=\"https://i.stack.imgur.com/IaRV2.png\" alt=\"enter image description here\"><img src=\"https://i.stack.imgur.com/mzozd.png\" alt=\"enter image description here\"></p>\n\n<p>The <code>keypoints</code> on both images are in roughly the same areas, and proportionately the same distance away from each other. Take the <code>keypoint</code> I've circled, lets call it <strong><em>\"Image 1 Keypoint 1\"</em></strong>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/rcDzn.png\" alt=\"enter image description here\"></p>\n\n<p>We can see that there are 5 <code>keypoints</code> around it. Its these distances between them and <strong><em>\"Image 1 Keypoint 1\"</em></strong> that I want to obtain so to compare them against <strong><em>\"Image 2 Keypoint 1\"</em></strong> and its 5 surround <code>keypoints</code> in the same area (see below) so as to not just compare a <code>keypoint</code> to another <code>keypoint</code>, but to compare <strong>\"known shapes\"</strong> based off of the locations of the <code>keypoints</code>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/rjZ42.png\" alt=\"enter image description here\"></p>\n\n<p>--</p>\n\n<p>Does that make sense?</p>\n"}, {"tags": ["c++", "class"], "answers": [{"owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "is_accepted": false, "score": 4, "last_activity_date": 1428509204, "last_edit_date": 1428509204, "creation_date": 1428509026, "answer_id": 29519720, "question_id": 29519652, "link": "https://stackoverflow.com/questions/29519652/defining-the-function/29519720#29519720", "title": "Defining the function", "body": "<blockquote>\n  <p>When i am defining the <code>EAN&amp; getEAN()</code> function as <code>Order::EAN&amp; getEAN()</code></p>\n</blockquote>\n\n<p>You have to define it as:</p>\n\n<pre><code>EAN&amp; Order::getEAN()\n</code></pre>\n\n<p>In other words, <code>getEAN()</code> is a function within the class <code>Order</code>. It is erroneous to say <code>EAN</code> is a member of the <code>Order</code> class.</p>\n"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1428509035, "creation_date": 1428509035, "answer_id": 29519724, "question_id": 29519652, "link": "https://stackoverflow.com/questions/29519652/defining-the-function/29519724#29519724", "title": "Defining the function", "body": "<p>I think you mean</p>\n\n<pre><code>EAN&amp; Order::getEAN() { /* ... */ }\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>Order::EAN&amp; getEAN() { /* ... */ }\n</code></pre>\n\n<p>That is member function getEAN itself indeed is declared in class Order while type EAN is not defined in class Order though it is used in the class Order definition.</p>\n"}], "owner": {"reputation": 3, "user_id": 4521909, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/776177dbcd27340b49478a9e3f564114?s=128&d=identicon&r=PG&f=1", "display_name": "Adi", "link": "https://stackoverflow.com/users/4521909/adi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1428509204, "creation_date": 1428508849, "last_edit_date": 1428508975, "question_id": 29519652, "link": "https://stackoverflow.com/questions/29519652/defining-the-function", "title": "Defining the function", "body": "<pre><code>#include\"EAN.h\"\n class Order{\n private:\n    EAN ean_object;     \n    int no_copies;\n    int no_delivered;\n public:\n    Order();    \n    Order(const EAN&amp; ean);\n    EAN&amp; getEAN(); \n    int outstanding() const;    \n    bool add(std::istream&amp; is); \n    bool add(int n); \n    bool receive(std::istream&amp; is); \n    void display(std::ostream&amp; os) const;\n }; \nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Order&amp; order);\n</code></pre>\n\n<p>This is my header file. When i am defining the <code>EAN&amp; getEAN()</code> function as <code>Order::EAN&amp; getEAN()</code>. Its showing error as no type name <code>EAN</code> in <code>Order</code> class? How to define it?</p>\n"}, {"tags": ["c++", "templates", "declaration", "circular-dependency"], "comments": [{"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "edited": false, "score": 2, "creation_date": 1428508911, "post_id": 29519585, "comment_id": 47194359, "body": "I don&#39;t see a reason you need <code>#include  &quot;ClassA.h&quot;</code> in your <code>ClassB</code> header file.  move it to your cpp file and give it a shot?"}], "answers": [{"comments": [{"owner": {"reputation": 239, "user_id": 4618646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e2ad1951cdcb0d3d7e350af469771c26?s=128&d=identicon&r=PG&f=1", "display_name": "user32323", "link": "https://stackoverflow.com/users/4618646/user32323"}, "edited": false, "score": 0, "creation_date": 1428510041, "post_id": 29519829, "comment_id": 47195077, "body": "Removing the include you mentioned and adding a <code>#include &quot;Configuration.h&quot;</code> in the <b>.cpp</b> file  of ClassB, it works."}], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1428509275, "creation_date": 1428509275, "answer_id": 29519829, "question_id": 29519585, "link": "https://stackoverflow.com/questions/29519585/circular-class-dependency-within-template-member/29519829#29519829", "title": "circular class dependency within template member", "body": "<p>Just remove <code>#include \"ClassA.h\"</code> from class <code>B</code>'s header and it should work. But there appear to be multiple compilation problems with your code so it's hard to say (missing function <code>getHandle</code>, missing <code>it()</code>, missing type <code>Handle</code> etc).</p>\n"}], "owner": {"reputation": 239, "user_id": 4618646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e2ad1951cdcb0d3d7e350af469771c26?s=128&d=identicon&r=PG&f=1", "display_name": "user32323", "link": "https://stackoverflow.com/users/4618646/user32323"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1428509275, "creation_date": 1428508686, "question_id": 29519585, "link": "https://stackoverflow.com/questions/29519585/circular-class-dependency-within-template-member", "title": "circular class dependency within template member", "body": "<pre><code>#ifndef CLASSB\n#define CLASSB\n\n#include \"ClassA.h\"\n\nnamespace name {\n\nclass ClassB\n{\npublic:\n    static Handle conn();\n};\n\n}\n\n#endif\n</code></pre>\n\n<p>-</p>\n\n<pre><code>#include \"ClassB.h\"\n\nHandle name::ClassB::conn()\n{\n    return getHandle(ClassA::it().str());\n}\n</code></pre>\n\n<p>-</p>\n\n<pre><code>#ifndef CLASSA\n#define CLASSA\n\n#include \"ClassB.h\"\n\nnamespace name {\n\nclass ClassA\n{\npublic:\n    template &lt;typename T&gt;\n    T myFunc(const std::string&amp;)\n    {\n        auto tmp = ClassB::conn();\n    }\n};\n\n}\n#endif\n</code></pre>\n\n<p>Calling <em>ClassB::conn()</em> gives a compiler error which says that the class <em>ClassB</em> is not declared. When I forward declare it I get an error message about an incomplete type.</p>\n\n<p>I can't move the template function to my .cpp files as it is a template function. So, how to fix this?</p>\n"}, {"tags": ["c++", "casting", "bitwise-operators"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 4, "creation_date": 1428508163, "post_id": 29519368, "comment_id": 47193867, "body": "You&#39;re close, but you should cast back to a <code>float*</code>, then dereference that. (Note that you are playing dangerously close to Undefined Behaviour here. Please don&#39;t do this in any production code.)"}, {"owner": {"reputation": 1132, "user_id": 4541936, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-vSV_VWUJDjs/AAAAAAAAAAI/AAAAAAAAABw/z_VrnEEZogs/photo.jpg?sz=128", "display_name": "brads3290", "link": "https://stackoverflow.com/users/4541936/brads3290"}, "reply_to_user": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1428508286, "post_id": 29519368, "comment_id": 47193947, "body": "Thanks :) Would you be able to elaborate on <i>Undefined Behaviour</i>? I&#39;m not sure I understand what you mean."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1428508342, "post_id": 29519368, "comment_id": 47193984, "body": "@BradSullivan <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Undefined_behavior</a>"}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 1, "creation_date": 1428508477, "post_id": 29519368, "comment_id": 47194071, "body": "@BradSullivan When you break the rules in languages like C++ or C, they don&#39;t hold your hand. They just make your program meaningless, and anything could happen (crash, appear to work, melt the walls, ...). You are strictly ok here, but very close to doing something illegal, for instance changing anything through <code>bytes</code>."}, {"owner": {"reputation": 1132, "user_id": 4541936, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-vSV_VWUJDjs/AAAAAAAAAAI/AAAAAAAAABw/z_VrnEEZogs/photo.jpg?sz=128", "display_name": "brads3290", "link": "https://stackoverflow.com/users/4541936/brads3290"}, "edited": false, "score": 0, "creation_date": 1428508578, "post_id": 29519368, "comment_id": 47194148, "body": "Cheers. I didn&#39;t realise it was a coined term. Probably should have noted the capitalisation :)"}], "answers": [{"comments": [{"owner": {"reputation": 1132, "user_id": 4541936, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-vSV_VWUJDjs/AAAAAAAAAAI/AAAAAAAAABw/z_VrnEEZogs/photo.jpg?sz=128", "display_name": "brads3290", "link": "https://stackoverflow.com/users/4541936/brads3290"}, "edited": false, "score": 0, "creation_date": 1428508361, "post_id": 29519416, "comment_id": 47193999, "body": "Works like a charm. Thanks a lot."}], "owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "is_accepted": false, "score": 6, "last_activity_date": 1428508501, "last_edit_date": 1428508501, "creation_date": 1428508195, "answer_id": 29519416, "question_id": 29519368, "link": "https://stackoverflow.com/questions/29519368/c-operating-on-the-bits-in-a-floating-point-value/29519416#29519416", "title": "C++ - Operating on the bits in a floating point value", "body": "<p><code>bytes</code> is a <strong>pointer</strong>.</p>\n\n<p>Change</p>\n\n<pre><code>float f1 = reinterpret_cast&lt;float&amp;&gt;(bytes);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>float f1 = *reinterpret_cast&lt;float*&gt;(bytes);\n// Cast to a different pointer... ^\n//         ^ ...and dereference that pointer.\n</code></pre>\n"}], "owner": {"reputation": 1132, "user_id": 4541936, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-vSV_VWUJDjs/AAAAAAAAAAI/AAAAAAAAABw/z_VrnEEZogs/photo.jpg?sz=128", "display_name": "brads3290", "link": "https://stackoverflow.com/users/4541936/brads3290"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1428508501, "creation_date": 1428508056, "last_edit_date": 1495535058, "question_id": 29519368, "link": "https://stackoverflow.com/questions/29519368/c-operating-on-the-bits-in-a-floating-point-value", "title": "C++ - Operating on the bits in a floating point value", "body": "<p>I'm trying to write a function that will reinterpret a set of bytes as a <code>float</code>. I have viewed a <a href=\"https://stackoverflow.com/questions/1723575/how-to-perform-a-bitwise-operation-on-floating-point-numbers\">Stackoverflow question</a> which lead me to try <code>reinterpret_cast&lt;&gt;()</code> on an array of characters, and I started experimenting with splitting a float into chars and then reassembling it again, but that only gives me seemingly random numbers rather than what I think the value should be, as the output is different each time. A few different examples are:</p>\n\n<pre><code>1.58661e-038\n3.63242e-038\n2.53418e-038\n</code></pre>\n\n<p>The float variable <em>should</em> contain the value 5.2.</p>\n\n<p>Compiling the code:</p>\n\n<pre><code>float f = 5.2;\nunsigned char* bytes = reinterpret_cast&lt;unsigned char*&gt;(&amp;f);\nfloat f1 = reinterpret_cast&lt;float&amp;&gt;(bytes);\n\nstd::cout &lt;&lt; f1 &lt;&lt; std::endl;\n</code></pre>\n\n<p>gave me</p>\n\n<pre><code>1.75384e-038\n</code></pre>\n\n<p>And then of course, a different number each time the program is run. Interestingly, however, if I put the code in a loop and execute it several times in a single run, the output stays consistent. This leads me to think it might be a memory location, but if so, I'm not sure how to access the real value of the variable - the dereference operator doesn't work, because it's not a pointer.</p>\n\n<p>So my question is - How can I split a variable of type <code>float</code> (and later on, a <code>double</code>) into individual bytes (allowing me to modify the bits), and then reassemble it.</p>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["c++", "frame", "kinect", "velocity"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1428507721, "post_id": 29519228, "comment_id": 47193556, "body": "This seems better suited for <a href=\"http://cs.stackexchange.com/\">cs.stackexchange.com</a> no?"}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1428507775, "post_id": 29519228, "comment_id": 47193603, "body": "This is a non-trivial problem, usually found under the heading &quot;image registration&quot;."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 2, "creation_date": 1428507851, "post_id": 29519228, "comment_id": 47193667, "body": "@EdChum cs.se is more for research level questions. This is a trivial division, not a computer science problem ((pos2 - pos1) / interval)."}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1428507935, "post_id": 29519228, "comment_id": 47193710, "body": "@KonradRudolph the question still feels a little broad at this stage though"}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1428507937, "post_id": 29519228, "comment_id": 47193717, "body": "That is dependent upon whether the camera is moving and what the camera is looking at, including whether or not it has to be robust to other entities entering the field of vision."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1428508017, "post_id": 29519228, "comment_id": 47193774, "body": "@Robinson Since the question is tagged <a href=\"https://stackoverflow.com/questions/tagged/kinect\">kinect</a> I think we can assume a stationary camera. [In fact, the machine should also directly provide positional data in addition to images \u2026]"}, {"owner": {"reputation": 780, "user_id": 4647583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed29ba29164901d431c9755a8fc9a14?s=128&d=identicon&r=PG", "display_name": "Otomo", "link": "https://stackoverflow.com/users/4647583/otomo"}, "edited": false, "score": 1, "creation_date": 1428508266, "post_id": 29519228, "comment_id": 47193934, "body": "The answer to you question is: <b>Yes, it is possible.</b>"}, {"owner": {"reputation": 136, "user_id": 4601311, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/796932940360350/picture?type=large", "display_name": "Eadhun Di", "link": "https://stackoverflow.com/users/4601311/eadhun-di"}, "edited": false, "score": 0, "creation_date": 1428508331, "post_id": 29519228, "comment_id": 47193972, "body": "The Kinect is fixed and the person doesn&#39;t get out of the field of its vision."}], "answers": [{"comments": [{"owner": {"reputation": 136, "user_id": 4601311, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/796932940360350/picture?type=large", "display_name": "Eadhun Di", "link": "https://stackoverflow.com/users/4601311/eadhun-di"}, "edited": false, "score": 1, "creation_date": 1428509169, "post_id": 29519491, "comment_id": 47194519, "body": "You helped me a lot, thank you :)"}], "owner": {"reputation": 1237, "user_id": 1165207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f64398194d321df20f928fac80a5991a?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Ernesto Lara Rodr&#237;guez", "link": "https://stackoverflow.com/users/1165207/jos%c3%a9-ernesto-lara-rodr%c3%adguez"}, "is_accepted": true, "score": 1, "last_activity_date": 1428592532, "last_edit_date": 1428592532, "creation_date": 1428508441, "answer_id": 29519491, "question_id": 29519228, "link": "https://stackoverflow.com/questions/29519228/is-it-possible-to-calculate-velocity-from-an-image/29519491#29519491", "title": "Is it possible to calculate velocity from an image?", "body": "<p>Instead of using the depth data, you can activate skeleton tracking and track the position of the head joint: it will give you better results. The positions of joints in Kinect's skeleton tracking are given in meters, so simply calculating the distance from the head's position in the current frame and the head's position in the previous frame, and dividing by the time elapsed in seconds (remember to divide milliseconds by 1000) should give you the speed in meters per second.</p>\n\n<p>If it's not possible to activate skeleton tracking, you can find the highest pixel on the image that belongs to the user (Kinect's depth data includes that information, or if you don't have depth data, use the highest non-black pixel in your images), and then map it to 3D world space using Kinect SDK's coordinate mapper. Then calculate speed as stated above.</p>\n\n<p>This will give you the speed for each frame; to find the overall speed you can average the last 30 speeds or so (this will give you the user's average speed in the last second, which should variate more smoothly than a per-frame value).</p>\n"}], "owner": {"reputation": 136, "user_id": 4601311, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/796932940360350/picture?type=large", "display_name": "Eadhun Di", "link": "https://stackoverflow.com/users/4601311/eadhun-di"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "closed_date": 1428515364, "accepted_answer_id": 29519491, "answer_count": 1, "score": 0, "last_activity_date": 1428592532, "creation_date": 1428507658, "question_id": 29519228, "link": "https://stackoverflow.com/questions/29519228/is-it-possible-to-calculate-velocity-from-an-image", "closed_reason": "Needs more focus", "title": "Is it possible to calculate velocity from an image?", "body": "<p>I'm wondering if it's possible to calculate the speed ( on the Y-axis ) of a person only by having time in milliseconds since sequence start and different frames that contains the person moving in the scene  . Like this for example :</p>\n\n<p><img src=\"https://i.stack.imgur.com/EQeiM.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c++", "ubuntu", "jsoncpp"], "comments": [{"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1428507691, "post_id": 29519104, "comment_id": 47193530, "body": "-L to point to library location, -l to link to a library"}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 1, "creation_date": 1428507937, "post_id": 29519104, "comment_id": 47193716, "body": "So -L/usr/lib -ljsoncpp"}, {"owner": {"reputation": 2079, "user_id": 3461617, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b551849b0da31fcb2f8ffae813f7c834?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro", "link": "https://stackoverflow.com/users/3461617/sandro"}, "edited": false, "score": 0, "creation_date": 1428509355, "post_id": 29519104, "comment_id": 47194628, "body": "You say you build library with scons. Did you build jsoncpp library yourself. Maybe compiled does not know where to search your custom library"}, {"owner": {"reputation": 287, "user_id": 4544474, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/86a542ac206f87b0e6ae8d595228f1a1?s=128&d=identicon&r=PG&f=1", "display_name": "jfjobidon", "link": "https://stackoverflow.com/users/4544474/jfjobidon"}, "edited": false, "score": 0, "creation_date": 1428597123, "post_id": 29519104, "comment_id": 47239746, "body": "I did build the library myself and then I copied the file libjson_linux-gcc-4.8_libmt in /usr/lib. I tried with -L/usr/lib -ljsoncpp And it works ! Thanks"}], "answers": [{"owner": {"reputation": 10672, "user_id": 996366, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/F8mcb.jpg?s=128&g=1", "display_name": "Eka", "link": "https://stackoverflow.com/users/996366/eka"}, "is_accepted": false, "score": 1, "last_activity_date": 1469252842, "creation_date": 1469252842, "answer_id": 38538616, "question_id": 29519104, "link": "https://stackoverflow.com/questions/29519104/linking-jsoncpp-on-ubuntu/38538616#38538616", "title": "linking jsoncpp on Ubuntu", "body": "<p>For <strong>CodeBlocks (Ubuntu 14.04)</strong></p>\n\n<p>I have faced same problem in my codeblocks IDE after installing <code>jsconcpp</code>. This is how I rectified my problem.</p>\n\n<p>Got to <code>project&gt;Build Options&gt;linker settings</code> and in the <code>link libraries</code> add <code>jsconcpp</code> and click ok</p>\n"}], "owner": {"reputation": 287, "user_id": 4544474, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/86a542ac206f87b0e6ae8d595228f1a1?s=128&d=identicon&r=PG&f=1", "display_name": "jfjobidon", "link": "https://stackoverflow.com/users/4544474/jfjobidon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2462, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1469252842, "creation_date": 1428507309, "question_id": 29519104, "link": "https://stackoverflow.com/questions/29519104/linking-jsoncpp-on-ubuntu", "title": "linking jsoncpp on Ubuntu", "body": "<p>I try to use jsoncpp library with c++ on Ubuntu.\nI compiled the code and built the library with scons.\nNow I can compile a simple programme:</p>\n\n<pre><code>#include \"json/json.h\"\n#include &lt;json/value.h&gt;\n#include &lt;json/writer.h&gt;\nint main()\n{\n    return 0;\n}\n</code></pre>\n\n<p>I use this command to compile:</p>\n\n<pre><code>g++ test.cpp -usr/lib/libjson_linux-gcc-4.8_libmt\n</code></pre>\n\n<p>I conclude that the compiler knows where to find the library.\nThe problem comes when I declare a json object:</p>\n\n<pre><code>Json::Value root;\n</code></pre>\n\n<p>Then I have this error message:\nundefined reference to \u00ab Json::Value::Value(Json::ValueType) \u00bb</p>\n\n<p>How can I fix this problem?</p>\n"}, {"tags": ["c++", "c", "operating-system"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 7, "creation_date": 1428507347, "post_id": 29519068, "comment_id": 47193269, "body": "What is wrong with <code>sizeof</code>?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1428507404, "post_id": 29519068, "comment_id": 47193315, "body": "You&#39;re assuming a byte has eight bits."}, {"owner": {"reputation": 189, "user_id": 2923228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oUCDA.jpg?s=128&g=1", "display_name": "JY0284", "link": "https://stackoverflow.com/users/2923228/jy0284"}, "edited": false, "score": 0, "creation_date": 1428508206, "post_id": 29519068, "comment_id": 47193898, "body": "That means &#39;unsigned&#39; is not an official description in standard C?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1428508341, "post_id": 29519068, "comment_id": 47193983, "body": "I tried to clarify your question based on your comments. If I failed to capture your intent, feel free to improve or rollback the edit."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1428508365, "post_id": 29519068, "comment_id": 47194005, "body": "Compiler will determine the size of the <code>int</code>, regardless to system. but you can use <code>int64_t</code> or <code>int32_t</code>."}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428508471, "post_id": 29519068, "comment_id": 47194066, "body": "If you mean getting 64-bit for 64-bit CPUs and 32-bit for 32-bit CPUs, <code>long</code> is usually used instead. note that int is 32 bit in 64-bit CPUs and for pointer-copying and storing, <code>long</code> or (more often) <code>unsigned long</code> are used to match CPU word size."}, {"owner": {"reputation": 189, "user_id": 2923228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oUCDA.jpg?s=128&g=1", "display_name": "JY0284", "link": "https://stackoverflow.com/users/2923228/jy0284"}, "edited": false, "score": 0, "creation_date": 1428508949, "post_id": 29519068, "comment_id": 47194381, "body": "Can I say the word length of long is always the same as the word length of CPU no matter I am using 32-bit OS or 64-bit OS?"}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428509152, "post_id": 29519068, "comment_id": 47194509, "body": "@JY___ yeah, it&#39;s guaranteed by the C standard. Check my comment in Jonathon&#39;s reply."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1428512493, "post_id": 29519068, "comment_id": 47196552, "body": "@JohnBollinger: No, <code>num_copy</code> is unsigned, so not negative. Both the shift and the conversion from -1 are well defined (the conversion giving the largest representable value)."}, {"owner": {"reputation": 5284, "user_id": 2040925, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/191d1998634eaa0af6129682394dc560?s=128&d=identicon&r=PG", "display_name": "typ1232", "link": "https://stackoverflow.com/users/2040925/typ1232"}, "reply_to_user": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 2, "creation_date": 1428512574, "post_id": 29519068, "comment_id": 47196602, "body": "@holgac Whether an architecture is 32-bit or 64-bit is typically determined by the size of pointers. I think even there are exceptions with weird data models. But <code>intptr_t</code> should be the better option than <code>long</code>. For example the data model on 64-bit Windows has 32-bit longs."}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "reply_to_user": {"reputation": 5284, "user_id": 2040925, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/191d1998634eaa0af6129682394dc560?s=128&d=identicon&r=PG", "display_name": "typ1232", "link": "https://stackoverflow.com/users/2040925/typ1232"}, "edited": false, "score": 0, "creation_date": 1428513258, "post_id": 29519068, "comment_id": 47196986, "body": "@typ1232 usually, but not always. word size actually represents CPU register size. There are some architectures using different sized addresses. I think the best way would be bit shifting a register in assembly."}], "answers": [{"comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1428507571, "post_id": 29519151, "comment_id": 47193446, "body": "@Angew Agreed, but I interpreted <i>&quot;system int size&quot;</i> to mean the size of <code>int</code> on your compiler."}, {"owner": {"reputation": 189, "user_id": 2923228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oUCDA.jpg?s=128&g=1", "display_name": "JY0284", "link": "https://stackoverflow.com/users/2923228/jy0284"}, "edited": false, "score": 0, "creation_date": 1428507974, "post_id": 29519151, "comment_id": 47193745, "body": "@Anger is right, it&#39;s different between compiler&#39;s int size and system&#39;s"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 189, "user_id": 2923228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oUCDA.jpg?s=128&g=1", "display_name": "JY0284", "link": "https://stackoverflow.com/users/2923228/jy0284"}, "edited": false, "score": 0, "creation_date": 1428508013, "post_id": 29519151, "comment_id": 47193770, "body": "@JY___ I completely understand that. Your question was ambiguous."}, {"owner": {"reputation": 189, "user_id": 2923228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oUCDA.jpg?s=128&g=1", "display_name": "JY0284", "link": "https://stackoverflow.com/users/2923228/jy0284"}, "edited": false, "score": 0, "creation_date": 1428508080, "post_id": 29519151, "comment_id": 47193814, "body": "Can you help me with the correct title of this question?"}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428508538, "post_id": 29519151, "comment_id": 47194115, "body": "<code>long</code> is always the same size as CPU word length."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428508710, "post_id": 29519151, "comment_id": 47194226, "body": "@holgac is that required by the standard?"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428508711, "post_id": 29519151, "comment_id": 47194227, "body": "@holgac Citation would be great."}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 1, "creation_date": 1428508842, "post_id": 29519151, "comment_id": 47194315, "body": "Linux Kernel Development, Ch 17 (3rd edition, pg 381) says that &quot;A word is the amount of data that a machine can process at one time.&quot; &quot;The size of a processor\u2019s general-purpose registers (GPRs) is equal to its word size.&quot; &quot;Additionally, the size of the C type long is equal to the word size, whereas the size of the int type is sometimes less than that of the word size&quot;"}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428508981, "post_id": 29519151, "comment_id": 47194408, "body": "@JonathonReinhart also pg 383: &quot;The size of the C long type is guaranteed to be the machine\u2019s word size.&quot;"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428509028, "post_id": 29519151, "comment_id": 47194443, "body": "@holgac Great, thank you. I&#39;ve incorporated your comments into my answer. If you&#39;d prefer, you can write your own answer, which I would up-vote."}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428509252, "post_id": 29519151, "comment_id": 47194572, "body": "@JonathonReinhart No need, thank you for the offer :)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1428509851, "post_id": 29519151, "comment_id": 47194967, "body": "Downvote:  The <code>long</code> type is based on a range of values not the processor&#39;s word size.  On 8-bit and 16-bit processors, the <code>long</code> type would take up more than one processor word in order to meet the range specification. So, by your statement, on an 8-bit processor, the <code>long</code> type would have the range of 8 bits, which is smaller than the range of an <code>int</code>."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1428510021, "post_id": 29519151, "comment_id": 47195061, "body": "Sigh, I give up. I&#39;ll leave this answer for the discussion in the comments only."}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1428510961, "post_id": 29519151, "comment_id": 47195590, "body": "@ThomasMatthews You may be right, the book I&#39;ve read might be misinforming. Sorry for the confusion, but the book so certainly states that fact that I didn&#39;t question it. See this section of the 2nd edition of the same book: <a href=\"http://www.makelinux.net/books/lkd2/ch19lev1sec2\" rel=\"nofollow noreferrer\">makelinux.net/books/lkd2/ch19lev1sec2</a>"}, {"owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "edited": false, "score": 0, "creation_date": 1428511897, "post_id": 29519151, "comment_id": 47196169, "body": "Implementations of C on 16-bit processors routinely use 32-bits for long and 16-bits for int."}], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": true, "score": 2, "last_activity_date": 1428510085, "last_edit_date": 1592644375, "creation_date": 1428507430, "answer_id": 29519151, "question_id": 29519068, "link": "https://stackoverflow.com/questions/29519068/how-to-determine-processor-word-length-in-c/29519151#29519151", "title": "How to determine processor word length in C?", "body": "<p>As <a href=\"https://stackoverflow.com/questions/29519068/how-to-determine-processor-word-length-in-c/29519151?noredirect=1#comment47194315_29519151\">@holgac mentioned</a>, the <code>long</code> datatype is always the same size as the machine's native word size:</p>\n<blockquote>\n<p>&quot;A word is the amount of data that a machine can process at one time.&quot; &quot;The size of a processor\u2019s general-purpose registers (GPRs) is equal to its word size.&quot; &quot;Additionally, the size of the C type long is equal to the word size, whereas the size of the int type is sometimes less than that of the word size&quot;</p>\n<p>-- Linux Kernel Development, Ch 17 (3rd edition, pg 381)</p>\n</blockquote>\n<p>As <a href=\"https://stackoverflow.com/questions/29519068/how-to-determine-processor-word-length-in-c/29519151#comment47194967_29519151\">indicated by Thomas Matthews</a> however, this may not apply to machines with small word lengths.</p>\n<p>To determine the size of <code>long</code> on your compiler, just use <code>sizeof(long)</code>:</p>\n<pre><code>int main(void)\n{\n    printf(&quot;long is %d bits on this system\\n&quot;, (int)sizeof(long)*CHAR_BIT);\n    return 0;\n}\n</code></pre>\n<p>See also:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/q/3200954/119527\">What is CHAR_BIT?</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 189, "user_id": 2923228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oUCDA.jpg?s=128&g=1", "display_name": "JY0284", "link": "https://stackoverflow.com/users/2923228/jy0284"}, "edited": false, "score": 0, "creation_date": 1428507884, "post_id": 29519183, "comment_id": 47193683, "body": "You are right about this. sizeof() also gets the compiler&#39;s int size.I was thinking whether there is some way like macro #program to get this done."}], "owner": {"reputation": 8789, "user_id": 539465, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2acba600ecfbe1cc2e7f3c94b686ac84?s=128&d=identicon&r=PG", "display_name": "Valentin Lorentz", "link": "https://stackoverflow.com/users/539465/valentin-lorentz"}, "is_accepted": false, "score": 1, "last_activity_date": 1428507513, "creation_date": 1428507513, "answer_id": 29519183, "question_id": 29519068, "link": "https://stackoverflow.com/questions/29519068/how-to-determine-processor-word-length-in-c/29519183#29519183", "title": "How to determine processor word length in C?", "body": "<p>Wasn't <code>sizeof</code>\u00a0allowed?</p>\n\n<p>Also, a slightly improved implementation (no need for a copy, less runs of the loop and no division):</p>\n\n<pre><code>int main(){\n    int num = 1;\n    int count = 0;    \n\n    while(num &lt;&lt;= 8){\n        count++;\n    }\n\n    printf(\"System size of int:%d\", count+1);\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1428510139, "post_id": 29520119, "comment_id": 47195127, "body": "Will this work on architectures where function pointers are more than just a pointer? I recall Itanium being strange in that regard, with a function &quot;descriptor&quot; or the like."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1428510491, "post_id": 29520119, "comment_id": 47195342, "body": "@JonathonReinhart: I changed it to a regular pointer. The idea is to choose something that the machine is willing to use an entire register to hold. This is likely to work for 16-bit systems, for which <code>sizeof(long)</code> has to fail."}, {"owner": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428511511, "post_id": 29520119, "comment_id": 47195950, "body": "There are some 64bit architectures using 32bit pointers. See <a href=\"http://en.wikipedia.org/wiki/Memory_address#Word_size_versus_address_size\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 1459, "user_id": 669567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VOmJA.jpg?s=128&g=1", "display_name": "holgac", "link": "https://stackoverflow.com/users/669567/holgac"}, "edited": false, "score": 0, "creation_date": 1428511855, "post_id": 29520119, "comment_id": 47196143, "body": "@holgac: Thanks, noted in the answer."}], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 0, "last_activity_date": 1428512470, "last_edit_date": 1428512470, "creation_date": 1428510059, "answer_id": 29520119, "question_id": 29519068, "link": "https://stackoverflow.com/questions/29519068/how-to-determine-processor-word-length-in-c/29520119#29520119", "title": "How to determine processor word length in C?", "body": "<p>As an interview question, the only correct way to do it in straight C is to use conditional compilation. The conditional compilation allows the word size to be defined differently for the various platforms the software runs on, or identified in a way so that the correct size can be obtained from a database. Since a company knows which platforms the product will run on, or which platforms they are willing to support, the platform can be chosen at compile or run-time, and the right word size will be selected as a result.</p>\n\n<p>Any other way of sussing out the word size will either be platform/system specific code or a heuristic. One possible heuristic is to use the size of a pointer to represent the machine word size.</p>\n\n<pre><code>word_size = sizeof(void *);\n</code></pre>\n\n<p>Given this is a heuristic, <a href=\"http://en.wikipedia.org/wiki/Memory_address#Word_size_versus_address_size\" rel=\"nofollow\">there are platforms for which it will fail</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 2492012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7318406207d3b030cc417d0da883d6c5?s=128&d=identicon&r=PG", "display_name": "Erich Horn", "link": "https://stackoverflow.com/users/2492012/erich-horn"}, "edited": false, "score": 0, "creation_date": 1446273180, "post_id": 33448646, "comment_id": 54685149, "body": "that was run on a 32 bit windows 7"}, {"owner": {"reputation": 87, "user_id": 2492012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7318406207d3b030cc417d0da883d6c5?s=128&d=identicon&r=PG", "display_name": "Erich Horn", "link": "https://stackoverflow.com/users/2492012/erich-horn"}, "edited": false, "score": 0, "creation_date": 1446273616, "post_id": 33448646, "comment_id": 54685234, "body": "I added long and put it in a gist (<a href=\"https://gist.github.com/f03f1071bce240654ec4.git\" rel=\"nofollow noreferrer\">gist.github.com/f03f1071bce240654ec4.git</a>)"}, {"owner": {"reputation": 87, "user_id": 2492012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7318406207d3b030cc417d0da883d6c5?s=128&d=identicon&r=PG", "display_name": "Erich Horn", "link": "https://stackoverflow.com/users/2492012/erich-horn"}, "edited": false, "score": 0, "creation_date": 1446274669, "post_id": 33448646, "comment_id": 54685432, "body": "And I guess I should add so it will be on point that the sizeof(void*) * CHAR_BIT should be the machine word size in bits, however it might actually be sizeof(void*) * 8.  Not really sure, but should actually be the same I think.  UTC-8 or 16 or what ever, a char is 8 bits in C.  But then again there will always be acceptations.  One thing you can rely on is that a nibble is always 4 bits.  So using sprintf should validate that."}], "owner": {"reputation": 87, "user_id": 2492012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7318406207d3b030cc417d0da883d6c5?s=128&d=identicon&r=PG", "display_name": "Erich Horn", "link": "https://stackoverflow.com/users/2492012/erich-horn"}, "is_accepted": false, "score": 2, "last_activity_date": 1446276034, "last_edit_date": 1446276034, "creation_date": 1446271991, "answer_id": 33448646, "question_id": 29519068, "link": "https://stackoverflow.com/questions/29519068/how-to-determine-processor-word-length-in-c/33448646#33448646", "title": "How to determine processor word length in C?", "body": "<p>I think my OCD kicked in a bit here, here is the result:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\n#define SIZEOF_CHAR sizeof(char)\n#define SIZEOF_INT sizeof(int)\n#define SIZEOF_LONG sizeof(long)\n#define SIZEOF_POINTER sizeof(void *)\n\n#define NIBBLE_BIT 4\n#ifndef CHAR_BIT\n#define CHAR_BIT 8    // should have been defined in &lt;limits.h&gt;\n#endif\n#define INT_BIT (SIZEOF_INT * CHAR_BIT)\n#define LONG_BIT (SIZEOF_LONG * CHAR_BIT)\n#define POINTER_BIT (SIZEOF_POINTER * CHAR_BIT)\n\nint main(void)\n{\n  char hexchar[SIZEOF_CHAR * 2 + 1],\n       hexint[SIZEOF_INT * 2 + 1],\n       hexlong[SIZEOF_LONG * 2 + 1],\n       hexpointer[SIZEOF_POINTER * 2 + 1];\n  int strlen_hexchar, strlen_hexint, strlen_hexlong, strlen_hexpointer;\n\n  strlen_hexchar = sprintf(hexchar, \"%x\", (unsigned char)-1);\n  strlen_hexint = sprintf(hexint, \"%x\", (unsigned int)-1);\n  strlen_hexlong = sprintf(hexlong, \"%x\", (unsigned long)-1l);\n  strlen_hexpointer = sprintf(hexpointer, \"%p\", (void*)-1l);\n\n  printf(\"#define SIZEOF_CHAR sizeof(char)                // %2d\\n\", SIZEOF_CHAR);\n  printf(\"#define SIZEOF_INT sizeof(int)                  // %2d\\n\", SIZEOF_INT);\n  printf(\"#define SIZEOF_LONG sizeof(long)                  // %2d\\n\", SIZEOF_LONG);\n  printf(\"#define SIZEOF_POINTER sizeof(void *)           // %2d\\n\", SIZEOF_POINTER);\n\n  printf(\"\\n\");\n\n  printf(\"#define NIBBLE_BIT %-2d\\n\", NIBBLE_BIT);\n  printf(\"#ifndef CHAR_BIT\\n\");\n  printf(\"#define CHAR_BIT %-2d   // should have been defined in &lt;limits.h&gt;\\n\", CHAR_BIT);\n  printf(\"#endif\\n\");\n  printf(\"#define INT_BIT (SIZEOF_INT * CHAR_BIT)         // %2d\\n\", INT_BIT);\n  printf(\"#define INT_LONG (INT_LONG * CHAR_BIT)         // %2d\\n\", LONG_BIT);\n  printf(\"#define POINTER_BIT (SIZEOF_POINTER * CHAR_BIT) // %2d\\n\", POINTER_BIT);\n\n  printf(\"\\n\");\n\n  printf(\"\\nTest setup...\\n\");\n  printf(\"\\n\");\n\n  printf(\"char hexchar[CHAR_BIT * SIZEOF_CHAR + 1],\\n\");\n  printf(\"    hexint[CHAR_BIT * SIZEOF_INT + 1],\\n\");\n  printf(\"    hexlong[CHAR_BIT * SIZEOF_LONG + 1],\\n\");\n  printf(\"    hexpointer[CHAR_BIT * SIZEOF_POINTER + 1];\\n\");\n  printf(\"int strlen_hexchar, strlen_hexint, strlen_hexlong, strlen_hexpointer;\\n\");\n  printf(\"\\n\");\n  printf(\"strlen_hexchar = sprintf(hexchar, \\\"%%x\\\", (unsigned char)-1);\\n//    returned %d, hexchar populated with \\\"%s\\\"\\n\",\n      strlen_hexchar, hexchar);\n  printf(\"strlen_hexint = sprintf(hexint, \\\"%%x\\\", (unsigned int)-1);\\n//    returned %d, hexint populated with \\\"%s\\\"\\n\",\n      strlen_hexint, hexint);\n  printf(\"strlen_hexlong = sprintf(hexlong, \\\"%%x\\\", (unsigned long)-1);\\n//    returned %d, hexlong populated with \\\"%s\\\"\\n\",\n      strlen_hexlong, hexlong);\n  printf(\"strlen_hexpointer = sprintf(hexpointer, \\\"%%x\\\", (void*)-1l);\\n//    returned %d, hexpointer populated with \\\"%s\\\"\\n\",\n      strlen_hexpointer, hexpointer);\n\n  printf(\"\\n\\nTest results...\\n\");\n  printf(\"\\n\");\n\n  if (SIZEOF_CHAR * 2 == strlen_hexchar) {\n    printf(\"testing (SIZEOF_CHAR * 2 == strlen_hexchar) [pass]\\n\");\n  } else {\n    printf(\"testing (SIZEOF_CHAR * 2 == strlen_hexchar) [fail]\\n\");\n    printf(\"  (%d != $d)\\n\", SIZEOF_CHAR * 2, strlen_hexchar);\n  }\n\n  if (SIZEOF_INT * 2 == strlen_hexint) {\n    printf(\"testing (SIZEOF_INT * 2 == strlen_hexint) [pass]\\n\");\n  } else {\n    printf(\"testing (SIZEOF_INT * 2 == strlen_hexint) [fail]\\n\");\n    printf(\"  (%d != $d)\\n\", SIZEOF_INT * 2, strlen_hexint);\n  }\n\n  if (SIZEOF_LONG * 2 == strlen_hexlong) {\n    printf(\"testing (SIZEOF_LONG * 2 == strlen_hexlong) [pass]\\n\");\n  } else {\n    printf(\"testing (SIZEOF_LONG * 2 == strlen_hexlong) [fail]\\n\");\n    printf(\"  (%d != $d)\\n\", SIZEOF_LONG * 2, strlen_hexlong);\n  }\n\n  if (SIZEOF_POINTER * 2 == strlen_hexpointer) {\n    printf(\"testing (SIZEOF_POINTER * 2 == strlen_hexpointer) [pass]\\n\");\n  } else {\n    printf(\"testing (SIZEOF_POINTER * 2 == strlen_hexpointer) [fail]\\n\");\n    printf(\"  (%d != $d)\\n\", SIZEOF_POINTER * 2, strlen_hexpointer);\n  }\n\n  printf(\"\\n\");\n\n  if (CHAR_BIT == strlen_hexchar * NIBBLE_BIT) {\n    printf(\"testing (CHAR_BIT == strlen_hexchar * NIBBLE_BIT) [pass]\\n\");\n  } else {\n    printf(\"testing (CHAR_BIT == strlen_hexchar * NIBBLE_BIT) [fail]\\n\");\n    printf(\"  (%d != $d)\\n\", CHAR_BIT, strlen_hexchar * NIBBLE_BIT);\n  }\n\n  if (INT_BIT == strlen_hexint * NIBBLE_BIT) {\n    printf(\"testing (INT_BIT == strlen_hexint * NIBBLE_BIT) [pass]\\n\");\n  } else {\n    printf(\"testing (INT_BIT == strlen_hexint * NIBBLE_BIT) [fail]\\n\");\n    printf(\"  (%d != $d)\\n\", INT_BIT, strlen_hexint * NIBBLE_BIT);\n  }\n\n  if (LONG_BIT == strlen_hexlong * NIBBLE_BIT) {\n    printf(\"testing (LONG_BIT == strlen_hexlong * NIBBLE_BIT) [pass]\\n\");\n  } else {\n    printf(\"testing (LONG_BIT == strlen_hexlong * NIBBLE_BIT) [fail]\\n\");\n    printf(\"  (%d != $d)\\n\", LONG_BIT, strlen_hexlong * NIBBLE_BIT);\n  }\n\n  if (POINTER_BIT == strlen_hexpointer * 4) {\n    printf(\"testing (POINTER_BIT == strlen_hexpointer * NIBBLE_BIT) [pass]\\n\");\n  } else {\n    printf(\"testing (POINTER_BIT == strlen_hexpointer * NIBBLE_BIT) [fail]\\n\");\n    printf(\"  (%d != $d)\\n\", POINTER_BIT, strlen_hexpointer * NIBBLE_BIT);\n  }\n\n  printf(\"\\n\");\n\n  if ((int)(SIZEOF_POINTER * CHAR_BIT) == strlen_hexpointer * NIBBLE_BIT) {\n    printf(\"testing ((int)(SIZEOF_POINTER * CHAR_BIT) == strlen_hexpointer * NIBBLE_BIT) [pass]\\n\");\n  } else {\n    printf(\"testing ((int)(SIZEOF_POINTER * CHAR_BIT) == strlen_hexpointer * NIBBLE_BIT) [fail]\\n\");\n    printf(\"  (%d != %d)\\n\", (int)(SIZEOF_POINTER * CHAR_BIT), strlen_hexpointer * NIBBLE_BIT);\n  }\n\n  printf(\"\\nConclusion: this machine word is %d bytes and %d bits\\n\", SIZEOF_POINTER * 8 / CHAR_BIT, strlen_hexpointer * NIBBLE_BIT);\n  if ((int)(SIZEOF_POINTER * CHAR_BIT) != strlen_hexpointer * NIBBLE_BIT) {\n    printf(\" * however this conclusion did not pass the (int)(SIZEOF_POINTER * 8 / CHAR_BIT) == strlen_hexpointer * NIBBLE_BIT) test\\n\");\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>The output from this code shows the following on my machine:</p>\n\n<pre><code>$ sizeofword.exe # from mingw32 shell on windows7\n#define SIZEOF_CHAR sizeof(char)                //  1\n#define SIZEOF_INT sizeof(int)                  //  4\n#define SIZEOF_LONG sizeof(long)                  //  4\n#define SIZEOF_POINTER sizeof(void *)           //  4\n\n#define NIBBLE_BIT 4\n#ifndef CHAR_BIT\n#define CHAR_BIT 8    // should have been defined in &lt;limits.h&gt;\n#endif\n#define INT_BIT (SIZEOF_INT * CHAR_BIT)         // 32\n#define INT_LONG (INT_LONG * CHAR_BIT)         // 32\n#define POINTER_BIT (SIZEOF_POINTER * CHAR_BIT) // 32\n\n\nTest setup...\n\nchar hexchar[CHAR_BIT * SIZEOF_CHAR + 1],\n    hexint[CHAR_BIT * SIZEOF_INT + 1],\n    hexlong[CHAR_BIT * SIZEOF_LONG + 1],\n    hexpointer[CHAR_BIT * SIZEOF_POINTER + 1];\nint strlen_hexchar, strlen_hexint, strlen_hexlong, strlen_hexpointer;\n\nstrlen_hexchar = sprintf(hexchar, \"%x\", (unsigned char)-1);\n//    returned 2, hexchar populated with \"ff\"\nstrlen_hexint = sprintf(hexint, \"%x\", (unsigned int)-1);\n//    returned 8, hexint populated with \"ffffffff\"\nstrlen_hexlong = sprintf(hexlong, \"%x\", (unsigned long)-1);\n//    returned 8, hexlong populated with \"ffffffff\"\nstrlen_hexpointer = sprintf(hexpointer, \"%x\", (void*)-1l);\n//    returned 8, hexpointer populated with \"FFFFFFFF\"\n\n\nTest results...\n\ntesting (SIZEOF_CHAR * 2 == strlen_hexchar) [pass]\ntesting (SIZEOF_INT * 2 == strlen_hexint) [pass]\ntesting (SIZEOF_LONG * 2 == strlen_hexlong) [pass]\ntesting (SIZEOF_POINTER * 2 == strlen_hexpointer) [pass]\n\ntesting (CHAR_BIT == strlen_hexchar * NIBBLE_BIT) [pass]\ntesting (INT_BIT == strlen_hexint * NIBBLE_BIT) [pass]\ntesting (LONG_BIT == strlen_hexlong * NIBBLE_BIT) [pass]\ntesting (POINTER_BIT == strlen_hexpointer * NIBBLE_BIT) [pass]\n\ntesting ((int)(SIZEOF_POINTER * CHAR_BIT) == strlen_hexpointer * NIBBLE_BIT) [pass]\n\nConclusion: this machine word is 4 bytes and 32 bits\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 2923228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oUCDA.jpg?s=128&g=1", "display_name": "JY0284", "link": "https://stackoverflow.com/users/2923228/jy0284"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1880, "favorite_count": 0, "accepted_answer_id": 29519151, "answer_count": 4, "score": 2, "last_activity_date": 1446276034, "creation_date": 1428507220, "last_edit_date": 1428508688, "question_id": 29519068, "link": "https://stackoverflow.com/questions/29519068/how-to-determine-processor-word-length-in-c", "title": "How to determine processor word length in C?", "body": "<p>I have met a question \"How to determine processor word length without using sizeof() in C?\" in an interview and I believed I gave the wrong answer.</p>\n\n<p>My code was as follows:</p>\n\n<pre><code>int main(){\n    int num = -1;\n    int count = 0;    \n\n    unsigned int num_copy = (unsigned int)num;\n    while(num_copy &gt;&gt;= 1){\n        count++;\n    }\n\n    printf(\"System size of int:%d\", (count  + 1)/ 8);\n\n    return 0;\n}\n</code></pre>\n\n<p>The output answer is only decided by compiler options. So, how can I get the right answer (system word length)?</p>\n\n<p>What if I change part of this question from 'processor word length' to 'operating system word length'?</p>\n"}]