[{"tags": ["c++", "operator-overloading", "c++14", "c++17"], "comments": [{"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1502326748, "post_id": 45602368, "comment_id": 78164992, "body": "I&#39;d say gcc is wrong here.  If will break a lot of existing code if this ever makes it into a release.  The standard prohibits overloading arithmetic operators for pointer types."}, {"owner": {"reputation": 194, "user_id": 4908404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/819c6d195f763e7be9eb6cba1672536e?s=128&d=identicon&r=PG", "display_name": "akinomyoga", "link": "https://stackoverflow.com/users/4908404/akinomyoga"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1502332474, "post_id": 45602368, "comment_id": 78166374, "body": "@Michael Roy &gt; <i>It will break a lot of existing code</i> Oh, I see. That&#39;s the reason why CWG 1687 didn&#39;t modify the definition of viability. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 4908404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/819c6d195f763e7be9eb6cba1672536e?s=128&d=identicon&r=PG", "display_name": "akinomyoga", "link": "https://stackoverflow.com/users/4908404/akinomyoga"}, "edited": false, "score": 0, "creation_date": 1502332917, "post_id": 45602856, "comment_id": 78166473, "body": "Thank you very much for your explanation and bug reports! Would you have a plan to make a bug report for Visual Studio 2017 which behaves the same with current GCC?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 194, "user_id": 4908404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/819c6d195f763e7be9eb6cba1672536e?s=128&d=identicon&r=PG", "display_name": "akinomyoga", "link": "https://stackoverflow.com/users/4908404/akinomyoga"}, "edited": false, "score": 0, "creation_date": 1502333255, "post_id": 45602856, "comment_id": 78166560, "body": "@akinomyoga Don&#39;t use Windows ever, so don&#39;t even know where to make such a bug report."}, {"owner": {"reputation": 194, "user_id": 4908404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/819c6d195f763e7be9eb6cba1672536e?s=128&d=identicon&r=PG", "display_name": "akinomyoga", "link": "https://stackoverflow.com/users/4908404/akinomyoga"}, "edited": false, "score": 0, "creation_date": 1502333367, "post_id": 45602856, "comment_id": 78166583, "body": "Thanks. Then I will make a report later."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1502327689, "last_edit_date": 1502327689, "creation_date": 1502326917, "answer_id": 45602856, "question_id": 45602368, "link": "https://stackoverflow.com/questions/45602368/correct-behavior-of-built-in-operator-candidates-of-overload-resolution-in-the-o/45602856#45602856", "title": "Correct behavior of built-in operator candidates of overload resolution in the operator expression context", "body": "<p>I agree with your interpretation. We have arguments of type <code>int*</code> and <code>Y</code> and we have two candidates:</p>\n\n<pre><code>operator+(X, int);                // #1\noperator+(int*, std::ptrdiff_t ); // #2\n</code></pre>\n\n<p><code>#1</code> requires two user-defined conversion sequences, <code>#2</code> requires an standard conversion sequence (Exact Match, though doesn't matter) and a user-defined conversion sequence. For the first argument, a standard conversion sequence <a href=\"http://eel.is/c++draft/over.ics.rank#2.1\" rel=\"nofollow noreferrer\">is better than</a> a user-defined conversion sequence, while for the second argument, the two sequences are indistinguishable (none of <a href=\"http://eel.is/c++draft/over.ics.rank#3.3\" rel=\"nofollow noreferrer\">these conditions</a> apply). Since the first implicit conversion sequence in <code>#2</code> is better than the first implicit conversion sequence in <code>#1</code>, and the second conversion sequences are equivalent, <code>#2</code> <a href=\"http://eel.is/c++draft/over.match.best#1.3\" rel=\"nofollow noreferrer\">wins</a>. </p>\n\n<p>And then post-CWG 1687, we <a href=\"http://eel.is/c++draft/over.match.oper#7\" rel=\"nofollow noreferrer\">don't perform</a> the last conversion from <code>double</code> to <code>ptrdiff_t</code>, so the result should be ill-formed. </p>\n\n<hr />\n\n<p>To answer this question:</p>\n\n<blockquote>\n  <p>is the behavior intended by CWG 1687?</p>\n</blockquote>\n\n<p>I suspect it certainly is, given that the example is:</p>\n\n<blockquote>\n<pre><code>int *b = Y() + X();             // error: pointer arithmetic requires integral operand\n</code></pre>\n</blockquote>\n\n<p>which is quite similar to your example - the only difference being that <code>Y()</code> is convertible to <code>int*</code> rather directly being <code>int*</code>.  I went ahead and filed <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=81789\" rel=\"nofollow noreferrer\">gcc 81789</a> and <a href=\"https://bugs.llvm.org/show_bug.cgi?id=34138\" rel=\"nofollow noreferrer\">llvm 34138</a>. Note that clang simply doesn't implement CWG 1687, the examples from that issue and in the standard compile.</p>\n"}], "owner": {"reputation": 194, "user_id": 4908404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/819c6d195f763e7be9eb6cba1672536e?s=128&d=identicon&r=PG", "display_name": "akinomyoga", "link": "https://stackoverflow.com/users/4908404/akinomyoga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 45602856, "answer_count": 1, "score": 8, "last_activity_date": 1502449514, "creation_date": 1502322922, "last_edit_date": 1502449514, "question_id": 45602368, "link": "https://stackoverflow.com/questions/45602368/correct-behavior-of-built-in-operator-candidates-of-overload-resolution-in-the-o", "title": "Correct behavior of built-in operator candidates of overload resolution in the operator expression context", "body": "<p>Currently I'm trying to understand the paragraph <a href=\"http://eel.is/c++draft/over.match.oper#7\" rel=\"nofollow noreferrer\">[over.match.oper]/7</a> in the C++ Standard, but encountered the following case where GCC and Clang produce different results:</p>\n\n<p><a href=\"https://wandbox.org/permlink/WpoMviA4MHId7iD9\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/WpoMviA4MHId7iD9</a></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nvoid print_type(int) { std::cout &lt;&lt; \"int\" &lt;&lt; std::endl; }\nvoid print_type(int*) { std::cout &lt;&lt; \"int*\" &lt;&lt; std::endl; }\n\nstruct X { X(int*) {} };\nstruct Y { operator double() { return 0.0; } };\n\nint operator+(X, int) { return 0; }   // #1\n// T* operator+(T*, std::ptrdiff_t);  // #2: a built-in operator (N4659 16.6/14)\n\nint main() {\n  int* p = 0;\n  Y y;\n\n  print_type(p + y);  // This line produces different results for different compilers:\n                      //   - gcc HEAD 8.0.0   : always \"int\" (#1 is called)\n                      //   - clang HEAD 6.0.0 : always \"int*\" (#2 is called)\n                      //   - my understanding : \"int*\" until C++11, ill-formed since C++14\n\n  return 0;\n}\n</code></pre>\n\n<h1>Description in standards</h1>\n\n<p>Here are quotes of the corresponding paragraph from versions of standards:</p>\n\n<p><strong>C++1z (N4659) 16.3.1.2 [over.match.oper] paragraph 7</strong> <br/>\n(essentially the same with <strong>C++14 (N4140) 13.3.1.2 [over.match.oper] paragraph 7</strong>):</p>\n\n<blockquote>\n  <p>If a built-in candidate is selected by overload resolution, the operands of class type are converted to the types of the corresponding parameters of the selected operation function, except that the second standard conversion sequence of a user-defined conversion sequence (16.3.3.1.2) is not applied. Then the operator is treated as the corresponding built-in operator and interpreted according to Clause 8. [Example:</p>\n  \n  <pre class=\"lang-cpp prettyprint-override\"><code>struct X {\n  operator double();\n};\nstruct Y {\n  operator int*();\n};\nint *a = Y() + 100.0; // error: pointer arithmetic requires integral operand\nint *b = Y() + X();   // error: pointer arithmetic requires integral operand\n</code></pre>\n  \n  <p>- end example]</p>\n</blockquote>\n\n<p><strong>C++03 13.3.1.2 [over.match.oper] paragraph 7</strong> <br/>\n(essentially the same with <strong>C++11 (N3291) 13.3.1.2 [over.match.oper] paragraph 7</strong>):</p>\n\n<blockquote>\n  <p>If a built-in candidate is selected by overload resolution, the operands are converted to the types of the corresponding parameters of the selected operation function. Then the operator is treated as the corresponding built-in operator and interpreted according to clause 5.</p>\n</blockquote>\n\n<p>The change in C++14 was introduced by <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/cwg_defects.html#1687\" rel=\"nofollow noreferrer\">CWG 1687</a>.</p>\n\n<h2>My naive interpretation</h2>\n\n<p>I initially thought the top code should be ill-formed in C++14. According to the standards, my naive understanding of the process of the overload resolution of the top code is this (section numbers are from N4659):</p>\n\n<p>First the set of candidate functions is generated. It contains the user-defined operator <code>#1</code> (<a href=\"http://eel.is/c++draft/over.match.oper#3.2\" rel=\"nofollow noreferrer\">16.3.1.2/(3.2)</a>) and a built-in operator <code>#2</code> (<a href=\"http://eel.is/c++draft/over.match.oper#3.3\" rel=\"nofollow noreferrer\">16.3.1.2/(3.3)</a>, <a href=\"http://eel.is/c++draft/over.built#14\" rel=\"nofollow noreferrer\">16.6/14</a>). Next, to determine the set of viable functions, viability of both operators is tested by constructing implicit conversion sequences (ICS) for each argument/parameter pair; All of the ICSs are successfully constructed as <code>ICS1(#1) = int* \u2192 X</code> (<a href=\"http://eel.is/c++draft/over.ics.user\" rel=\"nofollow noreferrer\">16.3.3.1.2</a>, user-defined conversion sequence), <code>ICS2(#2) = Y \u2192 double \u2192 int</code> (user-defined conversion sequence), <code>ICS1(#2) = int* \u2192 int*</code> (<a href=\"http://eel.is/c++draft/over.best.ics#6\" rel=\"nofollow noreferrer\">16.3.3.1/6</a>, identity conversion, one of the standard conversion sequences) and <code>ICS2(#2) = X \u2192 double \u2192 std::ptrdiff_t</code> (user-defined conversion sequence), and therefore both operators are viable. Then, the best viable function is selected by comparing ICSs; Since <code>ICS1(#2)</code> is better than <code>ICS1(#1)</code> (<a href=\"http://eel.is/c++draft/over.ics.rank#2.1\" rel=\"nofollow noreferrer\">16.3.3.2/(2.1)</a>) and <code>ICS2(#2)</code> is not worse than <code>ICS2(#1)</code> (<a href=\"http://eel.is/c++draft/over.ics.rank#3\" rel=\"nofollow noreferrer\">16.3.3.2/3</a>), <code>#2</code> is a better function than <code>#1</code> (<a href=\"http://eel.is/c++draft/over.match.best#1\" rel=\"nofollow noreferrer\">16.3.3/1</a>). Finally the built-in operator <code>#2</code> is selected by the overload resolution (<a href=\"http://eel.is/c++draft/over.match.best#2\" rel=\"nofollow noreferrer\">16.3.3/2</a>).</p>\n\n<p>When a built-in operator is selected, the rule quoted above (<a href=\"http://eel.is/c++draft/over.match.oper#7\" rel=\"nofollow noreferrer\">16.3.1.2/7</a>) applies: after applying ICSs to the arguments, treatment of the operator expression is transferred to Clause 8 [expr]. Here the application of ICSs differs in C++11 and C++14. In C++11, ICSs are totally applied, so <code>(int*) y + (std::ptrdiff_t) (double) n</code> is considered, and it's fine. While, in C++14 the second standard conversion sequences in user-defined conversion sequences are not applied, so <code>(int*) y + (double) n</code> is considered. This results in a semantic rule violation (<a href=\"http://eel.is/c++draft/expr.add#1\" rel=\"nofollow noreferrer\">8.7/1</a>), i.e. the expression is ill-formed and implementation is required to issue diagnostic messages.</p>\n\n<h2>Clang's interpretation</h2>\n\n<p>Clang selects <code>#2</code> and calls it without any diagnostic messages on 8.7/1 violation. My guess is Clang totally applies ICSs to the arguments before it transfers the call to built-in rules (8.7/1), and this is a bug.</p>\n\n<h2>GCC's interpretation</h2>\n\n<p>GCC selects <code>#1</code> without diagnostics. Microsoft C/C++ compiler in Visual Studio 2017 seems to behave the same. <del>Also, this behavior seems reasonable to me</del> (<strong>Edit</strong>: See [1]).</p>\n\n<p>My guess is GCC considers <code>#2</code> is not viable and then only the viable function is <code>#1</code>. But I couldn't find any rules like that the built-in operator is not viable when it becomes ill-formed without second standard conversion sequences in user-defined conversion sequences. In fact, when the phrase \"<em>except that the second standard conversion sequence of a user-defined conversion sequence</em>\" is introduced by CWG 1687, it seems there are no other modifications in the definition of viability.</p>\n\n<h1>Question</h1>\n\n<p><em>Question 1</em>: According to the current standard, which is the correct interpretation?</p>\n\n<p><em>Question 2</em>: If my naive interpretation is correct, is the behavior intended by CWG 1687?</p>\n\n<hr>\n\n<p><strong>Footnotes</strong></p>\n\n<ul>\n<li>[1]: Not to silently break the existing codes written in C++03, this behavior wouldn't be desired. This might be the reason why CWG 1687 decided to just disable the second standard conversion sequence leaving the definition of viability as it is. See comments below.</li>\n</ul>\n\n<p><strong>Update</strong></p>\n\n<p>After this question this issue was reported for the following compilers:</p>\n\n<ul>\n<li>gcc <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=81789\" rel=\"nofollow noreferrer\">gcc 81789</a></li>\n<li>clang <a href=\"https://bugs.llvm.org/show_bug.cgi?id=34138\" rel=\"nofollow noreferrer\">llvm 34138</a></li>\n<li>msc <a href=\"https://developercommunity.visualstudio.com/content/problem/92207/bug-c-cwg-1687-is-performed-too-early-in-overload.html\" rel=\"nofollow noreferrer\">visualstudio 92207</a></li>\n</ul>\n"}, {"tags": ["c++", "templates", "c++14"], "comments": [{"owner": {"reputation": 571, "user_id": 5538150, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/939792052758789/picture?type=large", "display_name": "Criss", "link": "https://stackoverflow.com/users/5538150/criss"}, "reply_to_user": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1502321874, "post_id": 45602197, "comment_id": 78163831, "body": "There is a link to coliru. Also pasted the same code here."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1502321904, "post_id": 45602197, "comment_id": 78163837, "body": "Cool, my comment raced with your update."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1502322106, "post_id": 45602197, "comment_id": 78163890, "body": "Just drop the <code>template&lt;&gt;</code>."}, {"owner": {"reputation": 571, "user_id": 5538150, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/939792052758789/picture?type=large", "display_name": "Criss", "link": "https://stackoverflow.com/users/5538150/criss"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1502324611, "post_id": 45602197, "comment_id": 78164456, "body": "Thanks, @T.C. .It solved both of my problems... Also AndyG posted a bit more extended answer."}], "answers": [{"comments": [{"owner": {"reputation": 571, "user_id": 5538150, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/939792052758789/picture?type=large", "display_name": "Criss", "link": "https://stackoverflow.com/users/5538150/criss"}, "edited": false, "score": 0, "creation_date": 1502324453, "post_id": 45602320, "comment_id": 78164416, "body": "Uhh.. It was that simple... I still had in mind that <code>template&lt;typename T&gt; void f(T){}   void f(int){}</code> is an UB and for some reason I also avoided just overloading here. Ofc my concern here is just irrelevant, but I decided so without even thinking :D  Also thank you for the tagged dispatch example - something new to know. Anyway just an overload was just fine in both of my problematic situations."}], "tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 1, "last_activity_date": 1502322962, "last_edit_date": 1502322962, "creation_date": 1502322636, "answer_id": 45602320, "question_id": 45602197, "link": "https://stackoverflow.com/questions/45602197/walking-around-a-standard-restriction-of-explicit-specialization/45602320#45602320", "title": "Walking around a standard restriction of explicit specialization", "body": "<p>Write a normal overload?</p>\n\n<pre><code>void print(int first) const { std::cout &lt;&lt; first; }\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/Rhrxyt911zlFa73l\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<hr>\n\n<p>Barring that, assuming your example is actually a bit more complicated, you may want to look into tagged dispatch:</p>\n\n<pre><code>struct A\n{\n    template&lt;class... Args&gt;\n    struct A_tag{};\n\n    template&lt;typename ...Args&gt;\n    A(Args... args) { print(A_tag&lt;Args...&gt;{}, int(args)...); }\n\n    template&lt;typename ...Rest&gt;\n    void print(A_tag&lt;int, Rest...&gt;, int first, Rest... rest) const\n    {\n        std::cout &lt;&lt; first;\n        print(A_tag&lt;Rest...&gt;{}, int(rest)...);\n    }\n\n    void print(A_tag&lt;int&gt;, int first) const { std::cout &lt;&lt; first; }\n};\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/P67bcfkvkpH4kzUD\" rel=\"nofollow noreferrer\">Demo 2</a></p>\n\n<p>The idea behind the tagged dispatch approach is still to take advantage of overloading, but it does so having the overloads accept a <code>tag</code> struct that is specialized on a certain type.</p>\n\n<p>Tagged functions can be hidden as <code>private</code>, and you can expose pretty looking non-tagged functions.</p>\n"}], "owner": {"reputation": 571, "user_id": 5538150, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/939792052758789/picture?type=large", "display_name": "Criss", "link": "https://stackoverflow.com/users/5538150/criss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 1, "accepted_answer_id": 45602320, "answer_count": 1, "score": 0, "last_activity_date": 1502322962, "creation_date": 1502321658, "last_edit_date": 1502321964, "question_id": 45602197, "link": "https://stackoverflow.com/questions/45602197/walking-around-a-standard-restriction-of-explicit-specialization", "title": "Walking around a standard restriction of explicit specialization", "body": "<p>I'm struggling with coding explicit specialization of variadic template of member function in a pretty way. The problem is that standard forbids explicit specializations in non-namespace scopes as explained <a href=\"https://stackoverflow.com/questions/2097811/c-syntax-for-explicit-specialization-of-a-template-function-in-a-template-clas\">here</a>. MSVC allows such thing, but GCC (and probably some other more standard-respecting compilers) doesn't.<br>\n<a href=\"http://coliru.stacked-crooked.com/a/ae1dfc5398064239\" rel=\"nofollow noreferrer\">Reproduction of the problem</a>  (let's say it's just printing for simplicity)</p>\n\n<pre><code>struct A\n{\n   template&lt;typename ...Args&gt;\n   A(Args... args) { print(int(args)...); }\n\n   template&lt;typename ...Rest&gt;\n   void print(int first, Rest... rest) const\n   {\n       std::cout &lt;&lt; first;\n       print(int(rest)...);\n   }\n   template&lt;&gt;\n   void print(int first) const { std::cout &lt;&lt; first; }\n};\n\nint main()\n{\n   A(1, 3, 2, 5, 7, 4);\n}\n</code></pre>\n\n<p>In provided link there's much simpler situation mainly because of just one template parameter and lack of 'recursion'. I can't find a way to get this working and in not eyes-bleeding manner.<br>\nBesides provided reproduction I also got exactly the same problem, but with constructor which makes this even more complex...</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 2811, "user_id": 6635521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ht17F.jpg?s=128&g=1", "display_name": "David Scarlett", "link": "https://stackoverflow.com/users/6635521/david-scarlett"}, "edited": false, "score": 1, "creation_date": 1502320531, "post_id": 45602004, "comment_id": 78163503, "body": "If there are no specific problems that you are aware of, it would be more appropriate to post this to the <a href=\"https://codereview.stackexchange.com/\">Code Review Stack Exchange</a>."}, {"owner": {"reputation": 889, "user_id": 7174778, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea532fbe618953b221b4da28d03d56dd?s=128&d=identicon&r=PG&f=1", "display_name": "YotKay", "link": "https://stackoverflow.com/users/7174778/yotkay"}, "reply_to_user": {"reputation": 2811, "user_id": 6635521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ht17F.jpg?s=128&g=1", "display_name": "David Scarlett", "link": "https://stackoverflow.com/users/6635521/david-scarlett"}, "edited": false, "score": 0, "creation_date": 1502320585, "post_id": 45602004, "comment_id": 78163520, "body": "Ok, I will move it there. I didn&#39;t know about Code Review site."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1502320602, "post_id": 45602004, "comment_id": 78163527, "body": "Just make the thread a member. There&#39;s no need for pointers here."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1502320650, "post_id": 45602004, "comment_id": 78163549, "body": "@PeteBecker: Copiable"}, {"owner": {"reputation": 889, "user_id": 7174778, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea532fbe618953b221b4da28d03d56dd?s=128&d=identicon&r=PG&f=1", "display_name": "YotKay", "link": "https://stackoverflow.com/users/7174778/yotkay"}, "edited": false, "score": 3, "creation_date": 1502320868, "post_id": 45602004, "comment_id": 78163606, "body": "Pete Becker - but if I make it normal thread, not a pointer, then the thread will start automatically when A is constructed. I don&#39;t want that. I want the thread to start with &#39;start&#39; method."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1502322115, "post_id": 45602004, "comment_id": 78163893, "body": "Joining a thread won&#39;t make it stop running. The thread function needs to be designed to receive a &quot;stop&quot; signal so it knows when to return."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1502322154, "post_id": 45602004, "comment_id": 78163903, "body": "You don&#39;t want a <code>shared_ptr</code> to a thread. The only reason I can think of to share a thread is if you want to deliberately break the program"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1502322287, "post_id": 45602004, "comment_id": 78163937, "body": "@YotKay: no, it will not automatically start as long as the thread is default constructed. And I&#39;d rather put the cleanup code in A&#39;s destructor than using the custom deleter, but that is probably a matter of taste."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1502322616, "post_id": 45602004, "comment_id": 78164011, "body": "Simpler version: <a href=\"http://ideone.com/Mti9kd\" rel=\"nofollow noreferrer\">ideone.com/Mti9kd</a>"}, {"owner": {"reputation": 889, "user_id": 7174778, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea532fbe618953b221b4da28d03d56dd?s=128&d=identicon&r=PG&f=1", "display_name": "YotKay", "link": "https://stackoverflow.com/users/7174778/yotkay"}, "edited": false, "score": 0, "creation_date": 1502353270, "post_id": 45602004, "comment_id": 78174977, "body": "I know that joining thread doesn&#39;t stop the thread. What I want is to just wait for the thread to finish in either of these: (1) calling &#39;stop&#39; method, (2) destroying object of class A. Solution with smart pointer (doesn&#39;t matter if shared_ptr or unique_ptr) allows this."}], "answers": [{"comments": [{"owner": {"reputation": 889, "user_id": 7174778, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea532fbe618953b221b4da28d03d56dd?s=128&d=identicon&r=PG&f=1", "display_name": "YotKay", "link": "https://stackoverflow.com/users/7174778/yotkay"}, "edited": false, "score": 1, "creation_date": 1502400730, "post_id": 45602798, "comment_id": 78207166, "body": "This is exactly what I tried to avoid. Have you heard of &#39;rule of zero&#39;? The rule says: &quot;Classes that have custom destructors, copy/move constructors or copy/move assignment operators should deal exclusively with ownership (which follows from the Single Responsibility Principle). Other classes should not have custom destructors, copy/move constructors or copy/move assignment operators.&quot; Although this is not about ownership, the principle is the same. We should not implement destructors on our own, but we should rely on other classes to perform some tasks for us (like shared_ptr or unique_ptr)."}, {"owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "reply_to_user": {"reputation": 889, "user_id": 7174778, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea532fbe618953b221b4da28d03d56dd?s=128&d=identicon&r=PG&f=1", "display_name": "YotKay", "link": "https://stackoverflow.com/users/7174778/yotkay"}, "edited": false, "score": 0, "creation_date": 1502405394, "post_id": 45602798, "comment_id": 78208759, "body": "Ok, in the case you dont want use dynamic memory, use <code>unique_ptr</code> but be careful of not leave the context where <code>unique_ptr</code> is living before the thread has been finished, otherwise you could cause an exception at the moment of release memory (when the context of  <code>unique_ptr</code> has been finished) when the thread is still alive."}, {"owner": {"reputation": 802, "user_id": 8995791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0641adeb562969e9c041dfd36f244508?s=128&d=identicon&r=PG&f=1", "display_name": "Barnack", "link": "https://stackoverflow.com/users/8995791/barnack"}, "edited": false, "score": 1, "creation_date": 1564585138, "post_id": 45602798, "comment_id": 101081796, "body": "Please, if you want to use raw pointers (which i&#39;m too much a fan of), at least use <code>nullptr</code> instead of <code>NULL</code>. Thanks."}], "tags": [], "owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "is_accepted": false, "score": 1, "last_activity_date": 1566319444, "last_edit_date": 1566319444, "creation_date": 1502326401, "answer_id": 45602798, "question_id": 45602004, "link": "https://stackoverflow.com/questions/45602004/thread-as-member-variable/45602798#45602798", "title": "Thread as member variable", "body": "<p>In my case i like to have the control of what are create and when it is destroyed. So, my proposal is:</p>\n\n<p>You can add the thread pointer as a member of your class and check if it was finish as i show you in this example:</p>\n\n<pre><code>class A{\n\n   std::thread *pThread = nullptr; \\\\ Thread Pointer\n   //...\npublic:\n   A();\n   ~A();\n   void start();\n   void stop();\n}\n</code></pre>\n\n<p>And used it as:</p>\n\n<pre><code>void start()\n{\n    if(pThread == nullptr) \n    {\n       pThread = new thread(fun); //Create the thread and store its reference\n    }\n}\n\n~A()\n{\n    if (pThread != nullptr)\n    {\n        if(pThread-&gt;joinable()) \\\\Wait until the thread has been finished\n            pThread-&gt;join();\n        delete pThread; \\\\IMPORTANT, release the memory. \n    }\n}\n</code></pre>\n\n<p>In this sample i use the thread to synchronized the destruction of Class, it will not be destroyed until the thread has been finished.</p>\n\n<p><strong>Note</strong>:  If you want to use a method of some class as the function which runs the thread, you can use <code>std::bind</code>.</p>\n\n<blockquote>\n  <p>Also you can use smart pointer as <code>unique_ptr</code> instead of <code>std::thread</code>, as i made in this sample. In this case the memory will be release  when the class get to be destroyed, so be sure the thread is finished before delete this pointer o leave the context (Class).</p>\n</blockquote>\n"}], "owner": {"reputation": 889, "user_id": 7174778, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea532fbe618953b221b4da28d03d56dd?s=128&d=identicon&r=PG&f=1", "display_name": "YotKay", "link": "https://stackoverflow.com/users/7174778/yotkay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1512, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1566319444, "creation_date": 1502320334, "last_edit_date": 1502323553, "question_id": 45602004, "link": "https://stackoverflow.com/questions/45602004/thread-as-member-variable", "title": "Thread as member variable", "body": "<p>I want to have a thread kept as member variable of a class. I want to start the thread inside 'start' method, and stop the thread inside 'stop' method. I also want to be sure that the thread joins, whether or not the 'stop' method is called. </p>\n\n<p>I designed the following code, using <code>shared_ptr</code> with custom deleter used to both join the thread and delete the pointer to thread, but I am not 100% sure if it is fully correct. </p>\n\n<p>Please comment on this. Is everything OK here? Or maybe there is a better approach how to do this (e.g. use <code>unique_ptr</code> or desing other RAII class)?</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\nusing namespace std::chrono_literals;\n\nvoid fun() { std::cout &lt;&lt; \"inside thread\\n\"; std::this_thread::sleep_for(1s); }\n\nclass A\n{\npublic:\n    A() : pT(nullptr) {}\n\n    void start()\n    {\n        std::cout &lt;&lt; \"starting...\\n\";\n        pT.reset(new std::thread(fun), [](auto p) {\n            if (p-&gt;joinable()) \n            { \n                std::cout &lt;&lt; \"joining thread\\n\";\n                p-&gt;join(); \n            }\n            std::cout &lt;&lt; \"deleting thread\\n\"; \n            delete p;\n       });\n    }\n\n    void stop()\n    {\n        std::cout &lt;&lt; \"stopping...\\n\";\n        pT.reset();\n    }\n\nprivate:\n    std::shared_ptr&lt;std::thread&gt; pT;\n};\nint main()\n{\n    A a;\n    a.start();\n    std::this_thread::sleep_for(2s);\n    a.stop();\n\n    return 0;\n}\n</code></pre>\n\n<p>The output is correct:</p>\n\n<pre><code>starting...\ninside thread\nstopping...\njoining thread\ndeleting thread\n</code></pre>\n"}, {"tags": ["c++", "c++11", "pthreads", "clion"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1502319147, "post_id": 45601811, "comment_id": 78163070, "body": "You need to link with <code>-lpthread</code>."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1502320184, "post_id": 45601811, "comment_id": 78163407, "body": "@Sam ... or even better with <code>-pthread</code>."}, {"owner": {"reputation": 185, "user_id": 3315622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a1160a5a2388582b0fc82fcc8bdfaab?s=128&d=identicon&r=PG&f=1", "display_name": "skap", "link": "https://stackoverflow.com/users/3315622/skap"}, "edited": false, "score": 0, "creation_date": 1502321357, "post_id": 45601811, "comment_id": 78163718, "body": "It&#39;s much better to use cross-platform style, listed here: <a href=\"https://stackoverflow.com/a/4774027/3315622\">stackoverflow.com/a/4774027/3315622</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1376, "user_id": 5190508, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9a505583a1564c89608a5dc393580654?s=128&d=identicon&r=PG&f=1", "display_name": "S.R", "link": "https://stackoverflow.com/users/5190508/s-r"}, "edited": false, "score": 0, "creation_date": 1502319263, "post_id": 45601832, "comment_id": 78163110, "body": "with <code>-pthread</code> flag? First I hear about that. Where you found that information?"}, {"owner": {"reputation": 2577, "user_id": 6263317, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Imx4J.jpg?s=128&g=1", "display_name": "Jon Deaton", "link": "https://stackoverflow.com/users/6263317/jon-deaton"}, "reply_to_user": {"reputation": 1376, "user_id": 5190508, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9a505583a1564c89608a5dc393580654?s=128&d=identicon&r=PG&f=1", "display_name": "S.R", "link": "https://stackoverflow.com/users/5190508/s-r"}, "edited": false, "score": 0, "creation_date": 1502319312, "post_id": 45601832, "comment_id": 78163127, "body": "I learned about it here <a href=\"https://stackoverflow.com/questions/23250863/difference-between-pthread-and-lpthread-while-compiling\" title=\"difference between pthread and lpthread while compiling\">stackoverflow.com/questions/23250863/&hellip;</a>"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 1, "creation_date": 1502321779, "post_id": 45601832, "comment_id": 78163809, "body": "As the answer in the linked question states, you should use -pthread, not -lpthread."}], "tags": [], "owner": {"reputation": 2577, "user_id": 6263317, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Imx4J.jpg?s=128&g=1", "display_name": "Jon Deaton", "link": "https://stackoverflow.com/users/6263317/jon-deaton"}, "is_accepted": false, "score": 0, "last_activity_date": 1502323505, "last_edit_date": 1502323505, "creation_date": 1502319146, "answer_id": 45601832, "question_id": 45601811, "link": "https://stackoverflow.com/questions/45601811/undefined-reference-to-pthread-clion/45601832#45601832", "title": "Undefined reference to pthread CLion", "body": "<p>You have to compile with flag <code>-lpthread</code> or <code>-pthread</code> (its usually advised to use<code>pthread</code>). If you're using CLion then you will need to edit CMakeLists.txt to ensure that your code is compiled with this flag by setting compiler flags with a command like:</p>\n\n<pre><code>SET( CMAKE_CXX_FLAGS  \"&lt;other compiler flags&gt; -pthread\")\n</code></pre>\n\n<p>You can learn more about these options on <a href=\"https://stackoverflow.com/questions/23250863/difference-between-pthread-and-lpthread-while-compiling\">this post</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1502321947, "post_id": 45602145, "comment_id": 78163847, "body": "That is not enough. You also have to set the compiler flag <code>-pthread</code>"}], "tags": [], "owner": {"reputation": 86, "user_id": 7252814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc296279d5dec570b68ce3ea2b7cc644?s=128&d=identicon&r=PG&f=1", "display_name": "Nate M", "link": "https://stackoverflow.com/users/7252814/nate-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1502321382, "creation_date": 1502321382, "answer_id": 45602145, "question_id": 45601811, "link": "https://stackoverflow.com/questions/45601811/undefined-reference-to-pthread-clion/45602145#45602145", "title": "Undefined reference to pthread CLion", "body": "<p>Make sure you are linking to pthread in the end of your CMakeLists.txt</p>\n\n<pre><code>target_link_libraries(${PROJECT_NAME} pthread)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 134, "user_id": 5677103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XmC9x.jpg?s=128&g=1", "display_name": "Paul Laffitte", "link": "https://stackoverflow.com/users/5677103/paul-laffitte"}, "edited": false, "score": 1, "creation_date": 1524255858, "post_id": 47981591, "comment_id": 86914961, "body": "It worked for me but I also had to add <code>find_package(Threads)</code>."}, {"owner": {"reputation": 2400, "user_id": 1831518, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/38cd07441e861b59dba41d842f81cab2?s=128&d=identicon&r=PG", "display_name": "Abdelrahman Shoman", "link": "https://stackoverflow.com/users/1831518/abdelrahman-shoman"}, "reply_to_user": {"reputation": 134, "user_id": 5677103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XmC9x.jpg?s=128&g=1", "display_name": "Paul Laffitte", "link": "https://stackoverflow.com/users/5677103/paul-laffitte"}, "edited": false, "score": 0, "creation_date": 1581861166, "post_id": 47981591, "comment_id": 106570055, "body": "@PaulLaffitte It worked for me without having to add <code>find_package(Threads)</code>"}, {"owner": {"reputation": 1676, "user_id": 2299084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/96d021ccec6067dbbd79573a3b39a8d1?s=128&d=identicon&r=PG", "display_name": "user60561", "link": "https://stackoverflow.com/users/2299084/user60561"}, "edited": false, "score": 0, "creation_date": 1590186774, "post_id": 47981591, "comment_id": 109596056, "body": "I downvoted not because this is a bad answer, it was ok at the time of writing. However, best practice is now to use <code>find_package(\u2026)</code> and link against <code>Threads::Threads</code> as in <a href=\"https://stackoverflow.com/a/58052624/2299084\">stackoverflow.com/a/58052624/2299084</a>"}], "tags": [], "owner": {"reputation": 363, "user_id": 7486894, "user_type": "registered", "profile_image": "https://graph.facebook.com/1405995739430965/picture?type=large", "display_name": "Le Danh", "link": "https://stackoverflow.com/users/7486894/le-danh"}, "is_accepted": false, "score": 21, "last_activity_date": 1514308142, "creation_date": 1514308142, "answer_id": 47981591, "question_id": 45601811, "link": "https://stackoverflow.com/questions/45601811/undefined-reference-to-pthread-clion/47981591#47981591", "title": "Undefined reference to pthread CLion", "body": "<p>In CLion, to compile with flag -pthread you should add the following line to CMakeLists.txt (I've tested and it works):</p>\n\n<pre><code>SET(CMAKE_CXX_FLAGS -pthread)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "is_accepted": false, "score": 4, "last_activity_date": 1569179681, "creation_date": 1569179681, "answer_id": 58052624, "question_id": 45601811, "link": "https://stackoverflow.com/questions/45601811/undefined-reference-to-pthread-clion/58052624#58052624", "title": "Undefined reference to pthread CLion", "body": "<p>In <code>CMake</code> first find the package:</p>\n\n<pre><code>find_package(Threads REQUIRED)\n</code></pre>\n\n<p>Then link against it:</p>\n\n<pre><code>target_link_libraries(${PROJECT_NAME} Threads::Threads)\n</code></pre>\n\n<p>Now the build will succeed the linking step.</p>\n"}], "owner": {"reputation": 81, "user_id": 6014657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebda5218ff68f489b89c2d13b0a6abc1?s=128&d=identicon&r=PG&f=1", "display_name": "A. Lopez", "link": "https://stackoverflow.com/users/6014657/a-lopez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16419, "favorite_count": 3, "answer_count": 4, "score": 8, "last_activity_date": 1569179681, "creation_date": 1502319009, "last_edit_date": 1502321088, "question_id": 45601811, "link": "https://stackoverflow.com/questions/45601811/undefined-reference-to-pthread-clion", "title": "Undefined reference to pthread CLion", "body": "<p>I'm trying to run this simple thread c++ program in CLion</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nusing namespace std;\n\n\n//Start of the thread t1\n void hello() {\n     cout &lt;&lt; \"Hello,concurrent world!\" &lt;&lt; endl; }\n\n\n\n int main() {\n     thread t1(hello);     // spawn new thread that calls hello()\n\n     cout &lt;&lt; \"Concurrency has started!\" &lt;&lt; endl;\n     t1.join();            \n\n     cout &lt;&lt; \"Concurrency completed!\";\n\n     return 0;\n   }\n</code></pre>\n\n<p>My problem is that there's an error of undefined reference to pthread, and I don't undestand what I'm doing wrong... please notice that I'm  doing this on CLion. </p>\n"}, {"tags": ["c++", "visual-c++", "build", "bazel", "cl"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 8401945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116dd8e1d27e003acbd92ce361614d6b?s=128&d=identicon&r=PG&f=1", "display_name": "sgreens", "link": "https://stackoverflow.com/users/8401945/sgreens"}, "edited": false, "score": 0, "creation_date": 1502399316, "post_id": 45619966, "comment_id": 78206563, "body": "I moved all the .h files from <code>hdrs</code> to <code>srcs</code>, but get the same errors as before. Regarding icu::StringPiece, I don&#39;t want to use that in <code>a.cc</code>, I want to use the other StringPiece"}, {"owner": {"reputation": 21554, "user_id": 4243, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/501b2f1d20a7a8f9539d46776a640225?s=128&d=identicon&r=PG", "display_name": "kristina", "link": "https://stackoverflow.com/users/4243/kristina"}, "reply_to_user": {"reputation": 45, "user_id": 8401945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116dd8e1d27e003acbd92ce361614d6b?s=128&d=identicon&r=PG&f=1", "display_name": "sgreens", "link": "https://stackoverflow.com/users/8401945/sgreens"}, "edited": false, "score": 0, "creation_date": 1502457392, "post_id": 45619966, "comment_id": 78231469, "body": "icu_54? Then specify <code>icu_54::StringPiece</code>."}, {"owner": {"reputation": 45, "user_id": 8401945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116dd8e1d27e003acbd92ce361614d6b?s=128&d=identicon&r=PG&f=1", "display_name": "sgreens", "link": "https://stackoverflow.com/users/8401945/sgreens"}, "edited": false, "score": 0, "creation_date": 1502911617, "post_id": 45619966, "comment_id": 78401132, "body": "No, I want to use cpp/src/strings/stringpiece. I don&#39;t want the icu stringpiece.h to be visible to <code>a.cc</code>, but it needs to be visible to <code>schriter.h</code> when building <code>a.cc</code>. I did this using cmake with <code>target_include_directories(icucommon PRIVATE source&#47;common)</code>, but can&#39;t seem to achieve the same result with Bazel."}, {"owner": {"reputation": 45, "user_id": 8401945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116dd8e1d27e003acbd92ce361614d6b?s=128&d=identicon&r=PG&f=1", "display_name": "sgreens", "link": "https://stackoverflow.com/users/8401945/sgreens"}, "edited": false, "score": 0, "creation_date": 1504909752, "post_id": 45619966, "comment_id": 79213235, "body": "This is now resolved. I think the root problem was that our project was using relative paths for its #include statements. I changed them all the absolute paths, and now it doesn&#39;t try to use icu_54::StringPiece when it should use a different StringPiece."}], "tags": [], "owner": {"reputation": 21554, "user_id": 4243, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/501b2f1d20a7a8f9539d46776a640225?s=128&d=identicon&r=PG", "display_name": "kristina", "link": "https://stackoverflow.com/users/4243/kristina"}, "is_accepted": false, "score": 1, "last_activity_date": 1502385845, "creation_date": 1502385845, "answer_id": 45619966, "question_id": 45601780, "link": "https://stackoverflow.com/questions/45601780/ambiguous-symbol-in-bazel-building-c/45619966#45619966", "title": "&quot;ambiguous symbol&quot; in Bazel building C++", "body": "<p>You should be able to add the namespace (<code>icu::StringPiece</code>, I'm guessing?) to resolve the C2872 error.</p>\n\n<p>For limiting visibility, check out <a href=\"https://docs.bazel.build/versions/master/be/c-cpp.html#hdrs\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p>For cc_library rules, headers in hdrs comprise the public interface of the library and can be directly included both from the files in hdrs and srcs of the library itself as well as from files in hdrs and srcs of cc_* rules that list the library in their deps. Headers in srcs must only be directly included from the files in hdrs and srcs of the library itself.</p>\n</blockquote>\n\n<p>This means that <code>hdrs</code> define transitively visible headers and <code>srcs</code> is for \"private\" headers.</p>\n\n<p>However, as the docs points out further down, this cannot always be perfectly enforced:</p>\n\n<blockquote>\n  <p>Unfortunately Bazel currently cannot distinguish between direct and transitive inclusions, so it cannot detect error cases where a file illegally includes a header directly that is only allowed to be included transitively. For example, Bazel would not complain if in the example above foo.cc directly includes baz.h. This would be illegal, because foo does not directly depend on baz.</p>\n</blockquote>\n\n<p>So, it should prevent all but the most determined user to put it in the <code>srcs</code> of a private target with a <code>copts = ['-Ithird_party/icu/source/common']</code> option.</p>\n"}], "owner": {"reputation": 45, "user_id": 8401945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116dd8e1d27e003acbd92ce361614d6b?s=128&d=identicon&r=PG&f=1", "display_name": "sgreens", "link": "https://stackoverflow.com/users/8401945/sgreens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1502385845, "creation_date": 1502318867, "question_id": 45601780, "link": "https://stackoverflow.com/questions/45601780/ambiguous-symbol-in-bazel-building-c", "title": "&quot;ambiguous symbol&quot; in Bazel building C++", "body": "<h1>Background</h1>\n\n<p>I am on Windows building with Bazel using cl to compile C++.</p>\n\n<h3>Subset of files:</h3>\n\n<pre><code>third_party/icu/source/common/unicode/schriter.h\nthird_party/icu/source/common/unicode/utypes.h\nthird_party/icu/source/common/unicode/stringpiece.h\nthird_party/icu/source/common/stringpiece.cpp\nthird_party/icu/BUILD\na/a.cc\na/a.h\na/BUILD\nb/cpp/src/strings/stringpiece.h\nb/cpp/src/util/uri_utils.h\nb/BUILD\n</code></pre>\n\n<p><code>schriter.h</code> has <code>#include \"unicode/utypes.h\"</code>.</p>\n\n<p><code>uri_utils.h</code> and <code>b/cpp/src/strings/stringpiece.h</code> both have <code>class StringPiece</code>. <code>third_party/icu/source/common/unicode/stringpiece.h</code> has <code>class U_COMMON_API StringPiece : public UMemory</code></p>\n\n<p><code>a.cc</code> refers to <code>StringPiece</code> and has these includes:</p>\n\n<pre><code>#include \"b/cpp/util/uri_utils.h\"\n#include \"strings/stringpiece.h\"\n#include \"third_party/icu/source/common/unicode/schriter.h\"\n</code></pre>\n\n<h3><code>a/BUILD</code>:</h3>\n\n<pre><code>cc_library(\n    name = \"a\",\n    srcs = [\"a.cc\"],\n    hdrs = [\"a.h\"],\n    deps = [\n        \"//third_party/icu:common\",\n        \"//b:sdk_strings\",\n    ],\n)\n</code></pre>\n\n<h3><code>b/BUILD</code>:</h3>\n\n<pre><code>cc_library(\n    name = \"sdk_strings\",\n    srcs = [\n        \"cpp/util/uri_utils.cc\",\n        \"cpp/src/strings/stringpiece.cc\"\n    ],\n    hdrs = [\n        \"cpp/util/uri_utils.h\",\n        \"cpp/src/strings/stringpiece.h\",\n    ],\n    includes = [\"cpp/src\"],\n)\n</code></pre>\n\n<h3><code>third_party/icu/BUILD</code>:</h3>\n\n<pre><code>cc_library(\n    name = \"common\",\n    srcs = [\n        \"source/common/stringpiece.cpp\",\n        \"source/stubdata/stubdata.c\",\n    ],\n    hdrs = glob([\"**/*.h\"]),\n)\n</code></pre>\n\n<h1>Problem</h1>\n\n<p>As is, building <code>third_party/icu:common</code> fails with: \n <code>third_party/icu/source/stubdata/stubdata.c(20): fatal error C1083: Cannot open include file: 'unicode/utypes.h': No such file or directory</code></p>\n\n<p>If I add <code>copts = [\"/Ithird_party/icu/source/common\",],</code> to <code>third_party/icu/BUILD</code>, then <code>icu:common</code> builds but target <code>a</code> fails with:<br>\n<code>third_party/icu/source/common/unicode/schriter.h(21): fatal error C1083: Cannot open include file: 'unicode/utypes.h': No such file or directory</code></p>\n\n<p>If instead I add <code>includes = [\"source/common\",],</code>, then <code>icu:common</code> builds but target <code>a</code> fails with:</p>\n\n<pre><code>a/a.cc(168): error C2872: 'StringPiece': ambiguous symbol\nb/cpp/util/uri_utils.h(24): note: could be 'StringPiece'\nthird_party\\icu\\source\\common\\unicode/stringpiece.h(52): note: or 'icu_54::StringPiece'\n</code></pre>\n\n<p>The source compiles fine using cmake, so I shouldn't need to change the source. How do I change the BUILD files to make this build correctly? How do I let everything in <code>icu</code> access the headers in <code>unicode</code>, but not expose <code>unicode/stringpiece.h</code> to targets that depend on <code>icu</code>?</p>\n"}, {"tags": ["c++", "for-loop", "set"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1502318839, "post_id": 45601723, "comment_id": 78162987, "body": "You probably want <code>map&lt;int, int&gt;</code>instead."}, {"owner": {"reputation": 183, "user_id": 4475130, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a4d640a92aa265f9c429dd098d77f0a?s=128&d=identicon&r=PG&f=1", "display_name": "Tomas Gudmundsson", "link": "https://stackoverflow.com/users/4475130/tomas-gudmundsson"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1502318892, "post_id": 45601723, "comment_id": 78163005, "body": "oh great thanks! I didn&#39;t find this when I searched"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1502318912, "post_id": 45601723, "comment_id": 78163011, "body": "Or see the linked question for another possibility."}], "owner": {"reputation": 183, "user_id": 4475130, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a4d640a92aa265f9c429dd098d77f0a?s=128&d=identicon&r=PG&f=1", "display_name": "Tomas Gudmundsson", "link": "https://stackoverflow.com/users/4475130/tomas-gudmundsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1502318813, "answer_count": 0, "score": 0, "last_activity_date": 1502318895, "creation_date": 1502318562, "question_id": 45601723, "link": "https://stackoverflow.com/questions/45601723/change-custom-class-value-in-range-based-for-loop", "closed_reason": "Duplicate", "title": "Change custom class value in range based for loop", "body": "<p>I'm building a data structure to keep track of count and rank of elements. I have a set of a struct I made and when I'm trying to modify the members in the struct with the range based for loop I get this error:</p>\n\n<p><em>error: cannot assign to variable 'it' with const-qualified type 'const item &amp;'</em></p>\n\n<p>I already overloaded the &lt; operator. What do I have to do more to make this work?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;set&gt;\nusing namespace std;\n\nstruct item {\n        int val, count;\n\n        item(int v, int c) : val{v}, count{c} {}\n};\n\nbool operator&lt;(const item &amp;a, const item &amp;b) {\n            return a.val &lt; b.val;\n}\n\n\nclass DS {\n\n    set&lt;item&gt; S;\n\n    public:\n    void notWorking(int x) {\n            for (auto &amp;it : S) {\n                    if (it.val &lt; x) it.count++;\n            }   \n    }   \n};\n\n\nint main() {                                                                                                                                                                                                                                \n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "object", "associative-array", "php-cpp"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 7009996, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-gUv5ruf1c1w/AAAAAAAAAAI/AAAAAAAAACg/T-qGVmvNMzw/photo.jpg?sz=128", "display_name": "Rainer St&#246;tter", "link": "https://stackoverflow.com/users/7009996/rainer-st%c3%b6tter"}, "is_accepted": false, "score": 0, "last_activity_date": 1526998998, "creation_date": 1526998998, "answer_id": 50470108, "question_id": 45601705, "link": "https://stackoverflow.com/questions/45601705/how-to-pass-array-of-objects-using-phpcpp-loop-through-each-object-and-return-a/50470108#50470108", "title": "How to pass Array of Objects using PHPCPP, loop through each object and return associative array", "body": "<p>In contrary to your declaration \n   Php::ByVal(\"curves\", \"Array\", false);\nI am using\n  Php::ByVal(\"curves\", \"Array\", true);</p>\n\n<p>I did not test this piece of code, therefore it may be necessary to add some slight corrections :-)</p>\n\n<p>Good luck!</p>\n\n<pre><code>public:\n\n  Php::Value GetAssociativeArray( Php::Parameters &amp;params ) {\n\n        if ( params.size( ) &lt; 1 ) {\n            error_function( \"need at least 1 parameter\" );        \n        }\n\n        if ( ! params[ 0 ].isObject( ) ) {\n            error_function( \"needs an object as first parameter\" );\n        }\n\n\n        //\n        // what you have to do before you can use this example:\n        // define the data type data_t, which should be stored in php_array_result\n        // supply the PHP class the objects in php_array_objects belong to -  can be coded in PHP or cpp\n        // supply the PHP class the objects in php_array_result belong to -  can be coded in PHP or cpp\n        //\n\n        // the PHP object associated to the current cpp class\n        Php::Value self( this );\n        // the objects received\n        Php::Value php_array_objects  = params[ 0 ];\n        // the PHP array to return\n        Php::Array php_array_result;\n        // the c++ - class\n        Curve * obj_curve;\n        // a single PHP object from the PHP array we received\n        Php::Value php_obj_in\n        // a single object from the PHP array we are delivering\n        Php::Object php_obj_out;\n        // the key of the associative PHP Array\n        std::string array_key;\n        // the data to collect in the associative PHP array\n        data_t data;        \n        // some other data\n        int64_t data_returned;\n\n\n        for ( int i = 0; i &lt; php_array_objects.size( ) ; i++ ) {\n\n            // retrieve the next object\n            php_obj_in = php_array_objects[ i ];\n\n            // cast PHP object to c++-class\n            obj_curve = ( Curve * ) php_obj_in.implementation( );\n\n            // do something with obj_curve\n\n            data = obj_curve-&gt;do_something( );\n\n            // calculate the key\n\n            key = \"key_\" + std::to_string( i );\n\n            // to create an object pass in the class name ( Curve ) to the constructor with optional constructor parameters (1,2,3)\n\n            php_obj_out = Php::Object( \"Curve\", 1, 2, 3 );\n\n            // set a class member named \"class_member\" of php_obj_out\n\n            php_obj_out[ \"class_member\" ] = data;\n\n            // call the method \"class_method\" of php_obj_out\n\n            data_returned = php_obj_out.call( \"class_method\", \"parameter\" );\n\n            // add the new  created object to the PHP array\n\n            php_array_result[ key ] = php_obj_out;\n\n        }\n\n        return php_array_result;\n\n    }   // GetAssociativeArray( )    \n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 3120265, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/45bd7f4a89f187ae1fd9299e9d27e839?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous007", "link": "https://stackoverflow.com/users/3120265/anonymous007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 338, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526998998, "creation_date": 1502318484, "last_edit_date": 1502354077, "question_id": 45601705, "link": "https://stackoverflow.com/questions/45601705/how-to-pass-array-of-objects-using-phpcpp-loop-through-each-object-and-return-a", "title": "How to pass Array of Objects using PHPCPP, loop through each object and return associative array", "body": "<p>I have recently started learning <a href=\"http://www.php-cpp.com/\" rel=\"nofollow noreferrer\">PHPCPP - A C++ library for developing PHP extensions</a> and trying to understand:</p>\n\n<ol>\n<li>how to pass an Array of objects from php to C++ through PHPCPP\nlibrary as examples give only info about arrays and objects separately, </li>\n<li>then how to loop through each object in C++  </li>\n<li>and how to return an associative array back to PHP </li>\n</ol>\n\n<p>Can someone point me to the right direction?</p>\n\n<p>I have come up with this example however need some help:</p>\n\n<pre><code>class Curve{\n public :\n    double shape;\n    double peak;\n    double tpeak;\n    double start;\n    double lag;\n    double index;\n};\n\nPhp::Value example1(Php::Parameters &amp;params) { \n    vector&lt;Curve&gt; c = params[0];\n\n    //create an associative array and return to php\n    std::map&lt; std::string, std::map&lt;std::string, std::map&lt;std::string, std::map&lt;std::string, std::double&gt;&gt;&gt; &gt; data;\n    // loop through array of objects here or do something with an array\n    ...\n    data[c.shape][c.peak][c.tpeak][c.start] = 1/12 * c.index;\n\n    return data;\n}\n\n\nextern \"C\" {\n    PHPCPP_EXPORT void *get_module() {\n        static Php::Extension myExtension(\"my_extension\", \"1.0\");\n        myExtension.add&lt;example1&gt;(\"example1\", { \n                Php::ByVal(\"curves\", \"Array\", false); \n        });\n        eturn myExtension;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates", "lambda"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1502318644, "post_id": 45601697, "comment_id": 78162897, "body": "From your use case, you should probably use <code>void randomFunction(std::function&lt;void(MyClass*)&gt; lambda, MyClass* obj)</code>"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1502318799, "post_id": 45601697, "comment_id": 78162968, "body": "Can you get the contents of a <code>std::function</code>? Yes. Can you get the contents of a lambda? No."}, {"owner": {"reputation": 23, "user_id": 6004280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5558c70f600fc6d6c5c32f394938514d?s=128&d=identicon&r=PG&f=1", "display_name": "LD_FLO", "link": "https://stackoverflow.com/users/6004280/ld-flo"}, "edited": false, "score": 0, "creation_date": 1502319215, "post_id": 45601697, "comment_id": 78163099, "body": "Of course there is tons of way to achieve the same result. I just find <code>randomFunction(this, [this]{ methodCall(); });</code> redundant"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 6, "creation_date": 1502319294, "post_id": 45601697, "comment_id": 78163120, "body": "The whole purpose of <code>std::function</code> is to implement type erasure. Now you want to un-erase the erased type. Whatever you&#39;re trying to do, you need to solve the real problem correctly, instead of trying to figure out how to do this, which you think is the solution to your problem. It is not."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6004280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5558c70f600fc6d6c5c32f394938514d?s=128&d=identicon&r=PG&f=1", "display_name": "LD_FLO", "link": "https://stackoverflow.com/users/6004280/ld-flo"}, "edited": false, "score": 0, "creation_date": 1502363476, "post_id": 45610268, "comment_id": 78182244, "body": "The problem is I don&#39;t want to evaluate the lambda at this moment (I store it actually). In the end, this is just a matter of syntaxic sugar, not a big deal."}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "reply_to_user": {"reputation": 23, "user_id": 6004280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5558c70f600fc6d6c5c32f394938514d?s=128&d=identicon&r=PG&f=1", "display_name": "LD_FLO", "link": "https://stackoverflow.com/users/6004280/ld-flo"}, "edited": false, "score": 0, "creation_date": 1502363931, "post_id": 45610268, "comment_id": 78182570, "body": "@LD_FLO A lambda stores its capture as datamembers (because it is essentially an unnamed struct with call operator).  How these members are stored is an implementation detail and therefore you cannot access them."}], "tags": [], "owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "is_accepted": false, "score": 0, "last_activity_date": 1502358656, "creation_date": 1502358656, "answer_id": 45610268, "question_id": 45601697, "link": "https://stackoverflow.com/questions/45601697/detect-get-captured-values-of-a-lambda-function/45610268#45610268", "title": "Detect/get captured values of a lambda function", "body": "<p>You have captured <code>this</code>, so why not just return it from the lambda?  Of course chaos will ensue if the corresponding object is not accessible anymore.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nclass MyClass;\n\nvoid randomFunction(std::function&lt;MyClass*()&gt; lambda)\n{\n  std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n  MyClass* obj = lambda();\n}\n\nclass MyClass\n{\npublic:\n  void methodCall()\n  {\n    std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n  }\n\n  void test()\n  {\n    std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n    auto lambda = [this]() { methodCall(); return this; };\n    randomFunction(lambda);\n  }\n};\n\n\nint main()\n{\n  MyClass mc;\n  mc.test();\n}\n</code></pre>\n\n<p><kbd><a href=\"https://wandbox.org/permlink/vwsM7FulvfdbUu8r\" rel=\"nofollow noreferrer\">Live example</a></kbd></p>\n"}], "owner": {"reputation": 23, "user_id": 6004280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5558c70f600fc6d6c5c32f394938514d?s=128&d=identicon&r=PG&f=1", "display_name": "LD_FLO", "link": "https://stackoverflow.com/users/6004280/ld-flo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1502358656, "creation_date": 1502318457, "question_id": 45601697, "link": "https://stackoverflow.com/questions/45601697/detect-get-captured-values-of-a-lambda-function", "title": "Detect/get captured values of a lambda function", "body": "<p>Is there a way to detect and/or retrieve the values captured in a lambda function, statically or dynamically ?</p>\n\n<p>Example, for the use case :</p>\n\n<pre><code>randomFunction([this](){ methodCall(); });\n</code></pre>\n\n<p>Is this possible ?</p>\n\n<pre><code>void randomFunction(std::function&lt;void()&gt; lambda) {\n    ... // Detect if lambda capture is 'this'\n    MyClass* obj = /* retrieve lambda capture 'this' */;\n    ...\n}\n</code></pre>\n\n<p>Let's say <em>MyClass</em> is known, will always be the same, and all of this occurs in a template function. Is there at least some traits/tricks to distinguish which template function to call according to the lambda captures ?</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 2, "creation_date": 1502318316, "post_id": 45601660, "comment_id": 78162786, "body": "Link the required ibraries: <code>-lboost_system</code> or such."}], "answers": [{"comments": [{"owner": {"reputation": 3808, "user_id": 2922611, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f26420ac1fcb58b3d0c0f63273eaf3f5?s=128&d=identicon&r=PG&f=1", "display_name": "kenba", "link": "https://stackoverflow.com/users/2922611/kenba"}, "edited": false, "score": 0, "creation_date": 1502348849, "post_id": 45601775, "comment_id": 78172175, "body": "Please delete the line &quot;Boost ASIO is a header-only library so you don&#39;t need to link anything specifically for it.&quot;. <code>boost asio</code> is header only, but it depends on <code>boost_system</code> which is why it requires <code>-lboost_system</code> to be added to the compiler options."}, {"owner": {"reputation": 3, "user_id": 8442207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ad70685c75a2afb2b2b58211a3e981?s=128&d=identicon&r=PG", "display_name": "Dillion F", "link": "https://stackoverflow.com/users/8442207/dillion-f"}, "edited": false, "score": 0, "creation_date": 1502382890, "post_id": 45601775, "comment_id": 78197553, "body": "I tried your solution but gives me following error: ld: library not found for -lboost_system clang: error: linker command failed with exit code 1 (use -v to see invocation). but I do have boost installed under that location."}, {"owner": {"reputation": 11476, "user_id": 2790047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5a7631a67903295da25dabb94e1f51b?s=128&d=identicon&r=PG", "display_name": "jodag", "link": "https://stackoverflow.com/users/2790047/jodag"}, "reply_to_user": {"reputation": 3, "user_id": 8442207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ad70685c75a2afb2b2b58211a3e981?s=128&d=identicon&r=PG", "display_name": "Dillion F", "link": "https://stackoverflow.com/users/8442207/dillion-f"}, "edited": false, "score": 0, "creation_date": 1502385173, "post_id": 45601775, "comment_id": 78198921, "body": "@DillionF Try changing the <code>boost_1_64_0&#47;libs&#47;</code> part of the <code>-Lboost_1_64_0&#47;libs&#47;</code> option to the absolute path where boost libs are located. There needs to be a file named <code>libboost_system.a</code> or <code>libboost_system.so</code>, or something along those lines in the folder indicated by <code>-L</code>. See the answer to <a href=\"https://stackoverflow.com/questions/32929709/the-l-option-in-gcc\">this question</a> which also also applies to clang."}], "tags": [], "owner": {"reputation": 11476, "user_id": 2790047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5a7631a67903295da25dabb94e1f51b?s=128&d=identicon&r=PG", "display_name": "jodag", "link": "https://stackoverflow.com/users/2790047/jodag"}, "is_accepted": true, "score": 0, "last_activity_date": 1502384410, "last_edit_date": 1502384410, "creation_date": 1502318842, "answer_id": 45601775, "question_id": 45601660, "link": "https://stackoverflow.com/questions/45601660/how-to-build-the-c-code-with-boost-library/45601775#45601775", "title": "how to build the c++ code with boost library", "body": "<p>The compiler option <code>-Lboost_1_64_0/libs/</code> just tells the compiler to look in that directory for libraries. You still need to specify which libraries to link. According to the <a href=\"http://www.boost.org/doc/libs/1_64_0/doc/html/boost_asio/using.html\" rel=\"nofollow noreferrer\">boost documentation</a> you will need the boost_system library, so add <code>-lboost_system</code> to the compiler options.</p>\n\n<p>The corrected compile command should look something like this</p>\n\n<pre><code>c++ -Iboost_1_64_0 -Lboost_1_64_0/libs/ -lboost_system -stdlib=libc++ PortConfig.cpp -o PortConfig\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8442207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ad70685c75a2afb2b2b58211a3e981?s=128&d=identicon&r=PG", "display_name": "Dillion F", "link": "https://stackoverflow.com/users/8442207/dillion-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 45601775, "answer_count": 1, "score": 0, "last_activity_date": 1502384410, "creation_date": 1502318227, "question_id": 45601660, "link": "https://stackoverflow.com/questions/45601660/how-to-build-the-c-code-with-boost-library", "title": "how to build the c++ code with boost library", "body": "<p>what I want to do is a c++ code which utilize boost library and do a simple RS232 communication. I got the code like following: </p>\n\n<pre><code>#include &lt;boost/asio.hpp&gt; // include boost\nusing namespace::boost::asio;  // save tons of typing\n#include &lt;iostream&gt;\nusing std::cin;\n\n// These are the values our port needs to connect\n#ifdef _WIN32\n// windows uses com ports, this depends on what com port your cable is plugged in to.\n    const char *PORT = \"COM3\";\n#else\n// Mac OS ports\n    const char *PORT = \"/dev/tty.usbserial\";\n#endif\n// Note: all the following except BAUD are the exact same as the default values\n\nserial_port_base::baud_rate BAUD(19200);\nserial_port_base::character_size C_SIZE( 8 );\nserial_port_base::flow_control FLOW( serial_port_base::flow_control::none );\nserial_port_base::parity PARITY( serial_port_base::parity::none );\nserial_port_base::stop_bits STOP( serial_port_base::stop_bits::one );\n\nint main()\n{\n    io_service io;\n    serial_port port( io, PORT );\n    port.set_option( BAUD );\n    port.set_option( C_SIZE );\n    port.set_option( FLOW );\n    port.set_option( PARITY );\n    port.set_option( STOP );\n\n    unsigned char command[1] = {0};\n\n    // read in user value to be sent to device\n    int input;\n    cin &gt;&gt; input;\n\n    // The cast will convert too big numbers into range.\n    while( input &gt;= 0 )\n    {\n        // convert our read in number into the target data type\n        command[0] = static_cast&lt;unsigned char&gt;( input );\n        write( port, buffer( command, 1 ) );\n\n        // read in the next input value\n        cin &gt;&gt; input;\n    }\n\n    // all done sending commands\n    return 0;\n}\n</code></pre>\n\n<p>and I am building the code with following command:</p>\n\n<pre><code>c++ -Iboost_1_64_0 -Lboost_1_64_0/libs/ -stdlib=libc++ PortConfig.cpp -o PortConfig\n</code></pre>\n\n<p>but the terminal keeps giving me error: </p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"boost::system::system_category()\", referenced from:\n      boost::asio::error::get_system_category() in PortConfig-2187c6.o\n      boost::system::error_code::error_code() in PortConfig-2187c6.o\n      ___cxx_global_var_init.2 in PortConfig-2187c6.o\n  \"boost::system::generic_category()\", referenced from:\n      ___cxx_global_var_init in PortConfig-2187c6.o\n      ___cxx_global_var_init.1 in PortConfig-2187c6.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>could anyone help me on that? Thanks in advance.</p>\n"}, {"tags": ["c++", "macos", "keyboard", "fltk"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1502318193, "post_id": 45601543, "comment_id": 78162753, "body": "Probably possible using AppleScript. A quick google search yields <a href=\"http://www.macosxautomation.com/applescript/features/system-prefs.html\" rel=\"nofollow noreferrer\">this</a>. You can call AppleScript code using <a href=\"https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/osascript.1.html\" rel=\"nofollow noreferrer\">osascript</a> in bash (with a system call in c++)."}], "answers": [{"comments": [{"owner": {"reputation": 1012, "user_id": 2771733, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/12f942f8999889c27fbb0859c12c316a?s=128&d=identicon&r=PG&f=1", "display_name": "z80crew", "link": "https://stackoverflow.com/users/2771733/z80crew"}, "edited": false, "score": 0, "creation_date": 1502355466, "post_id": 45602171, "comment_id": 78176539, "body": "I just get <code>The domain&#47;default pair of (kCFPreferencesAnyApplication, NSUserKeyEquivalents) does not exist</code>. But your answer gave me additional ideas for search terms. I&#39;ll update my question with some infos I got."}], "tags": [], "owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "is_accepted": false, "score": 2, "last_activity_date": 1502321506, "creation_date": 1502321506, "answer_id": 45602171, "question_id": 45601543, "link": "https://stackoverflow.com/questions/45601543/how-to-get-macos-keyboard-shortcuts-set-in-system-preferences-programmatically/45602171#45602171", "title": "How to get macOS keyboard shortcuts set in System Preferences programmatically?", "body": "<p>I can't test right now the answer ... but I would first try to <code>popen</code> the <code>defaults</code> command like:</p>\n\n<pre><code>HFILE file;\nif (!(file = popen(\"defaults read NSGlobalDomain NSUserKeyEquivalents\", \"r\")))\n{\n    return nullptr;    \n}\nconst int MAX_BUF_SIZE = 512;\nchar temp[MAX_BUF_SIZE+1] = \"\";\nwhile (fgets(temp, MAX_BUF_SIZE, file) &gt; 0)\n{\n    printf(\"%s\",temp);\n    memset(temp, 0, MAX_BUF_SIZE+1);\n}\npclose(file);\n</code></pre>\n\n<p>Here I just <code>printf</code> its output but you will likely want to parse it.</p>\n"}], "owner": {"reputation": 1012, "user_id": 2771733, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/12f942f8999889c27fbb0859c12c316a?s=128&d=identicon&r=PG&f=1", "display_name": "z80crew", "link": "https://stackoverflow.com/users/2771733/z80crew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1502357161, "creation_date": 1502317473, "last_edit_date": 1502357161, "question_id": 45601543, "link": "https://stackoverflow.com/questions/45601543/how-to-get-macos-keyboard-shortcuts-set-in-system-preferences-programmatically", "title": "How to get macOS keyboard shortcuts set in System Preferences programmatically?", "body": "<p>On macOS the key combination <code>CMD+Backtick</code> is used to cycle through the open windows of an application when using an english keyboard. On German keyboards for example the combination is <code>CMD+&lt;</code>. This shortcut can even be configured using <code>System Preferences</code> -> <code>Keyboard</code> -> <code>Shortcuts</code> -> <code>Keyboard</code> -> <code>Move focus to next window</code>.</p>\n\n<p>For my multi-window GUI application using FLTK I want to utilize this shortcut, but have no idea how to fetch the combination the user has set on his or her system. So what I'm looking for is a macOS system call that gives me the key combination that is used to <code>Move focus to next window</code> on this very Mac.</p>\n\n<p>Of course if there would be a somewhat builtin way using FLTK I'd prefer that over having to use native system calls.</p>\n\n<p>Googling for this issue is a nightmare ...</p>\n\n<p><strong>Update 08/10/2017</strong>\n\u00d6\u00f6's <a href=\"https://stackoverflow.com/a/45602171/2771733\" title=\"answer\">answer</a> gave me some ideas for additional research. I've since learned that the preferences are stored in <code>com.apple.symbolichotkeys</code>, more precisely in key 27.</p>\n\n<pre><code>        27 =         {\n        enabled = 1;\n        value =             {\n            parameters =                 (\n                98,\n                11,\n                524288\n            );\n            type = standard;\n        };\n    };\n</code></pre>\n\n<p><strong>Parameter 1 (98):</strong> That's the ASCII code for \"b\". The first parameter has the ascii code of the shortcut used or 65535 if it's a non-ascii character.</p>\n\n<p><strong>Parameter 2 (11):</strong> That's the keyboard code for the kVK_ANSI_B (<a href=\"https://stackoverflow.com/questions/3202629/where-can-i-find-a-list-of-mac-virtual-key-codes%20[Source]\">source</a>). These codes are keyboard dependent. On a US keyboard, kVK_ANSI_Z is 0x06, while on a german keyboard it's 0x10.</p>\n\n<p><strong>Parameter 3 (524288):</strong> That's for the modifier key:</p>\n\n<pre><code>0x000000 =&gt; \"No modifier\",\n0x020000 =&gt; \"Shift\",\n0x040000 =&gt; \"Control\",\n0x080000 =&gt; \"Option\",\n0x100000 =&gt; \"Command\",\n</code></pre>\n\n<p>(0x80000 equals 524288.)</p>\n\n<p>So my task just seems to be to parse the output of <code>defaults read com.apple.symbolichotkeys</code>, get the key combinations from the parameter dictionary, interpret those combinations correctly depending on the keyboard layout and use these information to set the callbacks in my FLTK app.</p>\n"}, {"tags": ["c++", "operator-overloading", "operands"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502317228, "post_id": 45601463, "comment_id": 78162446, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\">What are the basic rules and idioms for operator overloading?</a>"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1502317851, "post_id": 45601463, "comment_id": 78162650, "body": "Have you tried making the comparison operators const functions taking a const reference parameter?"}, {"owner": {"reputation": 73, "user_id": 8402515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2706f969b000c22fe0203b2dc4072103?s=128&d=identicon&r=PG&f=1", "display_name": "wem18", "link": "https://stackoverflow.com/users/8402515/wem18"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1502318432, "post_id": 45601463, "comment_id": 78162823, "body": "@scohe001 Just tried that. Now I am getting a Mach-o error instead of the operand error. Any clue why?"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1502318502, "post_id": 45601463, "comment_id": 78162846, "body": "@wem18 Mach-o linker error? Can you post it?"}, {"owner": {"reputation": 73, "user_id": 8402515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2706f969b000c22fe0203b2dc4072103?s=128&d=identicon&r=PG&f=1", "display_name": "wem18", "link": "https://stackoverflow.com/users/8402515/wem18"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502318549, "post_id": 45601463, "comment_id": 78162861, "body": "@user0042 I read through that, but still couldn&#39;t really figure it out. I&#39;m doing my best to not post an unnecessary question but I&#39;m really confused here."}, {"owner": {"reputation": 73, "user_id": 8402515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2706f969b000c22fe0203b2dc4072103?s=128&d=identicon&r=PG&f=1", "display_name": "wem18", "link": "https://stackoverflow.com/users/8402515/wem18"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1502318630, "post_id": 45601463, "comment_id": 78162892, "body": "@scohe001 It says &quot;linker command failed with exit code 1 (use -v to see invocation)&quot; in Xcode on a Mac. What can I do to get you more information?  Usually the error points out more information, but none here."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1502319409, "post_id": 45601463, "comment_id": 78163167, "body": "@wem18 after some quick googling, looks like you might be accidentally including a <code>.cpp</code> somewhere or have double implemented the main function. Without seeing all of your code it&#39;s a little hard to guess just off of that error message."}, {"owner": {"reputation": 73, "user_id": 8402515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2706f969b000c22fe0203b2dc4072103?s=128&d=identicon&r=PG&f=1", "display_name": "wem18", "link": "https://stackoverflow.com/users/8402515/wem18"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1502319538, "post_id": 45601463, "comment_id": 78163207, "body": "@scohe001 Yep, that was it. I figured it out about a minute before you commented that, I had included the .h and the .cpp. Stupid mistake on my part. So it was the const part of the overloaded operator that was messing it up, thanks so much for the help!"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 8402515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2706f969b000c22fe0203b2dc4072103?s=128&d=identicon&r=PG&f=1", "display_name": "wem18", "link": "https://stackoverflow.com/users/8402515/wem18"}, "edited": false, "score": 0, "creation_date": 1502319618, "post_id": 45601604, "comment_id": 78163229, "body": "Thank you so much for the help! Yep, it looks like this was it. Sorry about having such a dumb question, I have like 2000 lines of code in this project so I was just having trouble finding what was wrong. Really appreciate the help.                                              Out of curiosity, any clue why I was able to perform comparison operations on Mine objects outside of the sort method even though I was missing the const declarations?"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1502317895, "creation_date": 1502317895, "answer_id": 45601604, "question_id": 45601463, "link": "https://stackoverflow.com/questions/45601463/invalid-operands-to-binary-expression-using-overloaded-operators/45601604#45601604", "title": "Invalid Operands to Binary Expression using Overloaded Operators", "body": "<p>You are missing the <code>const</code> qualifiers.</p>\n\n<p>Change the functions to:</p>\n\n<pre><code>bool operator&lt;(Mine const&amp; m) const;\nbool operator&gt;(Mine const&amp; m) const;\nbool operator==(Mine const&amp; m) const;\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 8402515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2706f969b000c22fe0203b2dc4072103?s=128&d=identicon&r=PG&f=1", "display_name": "wem18", "link": "https://stackoverflow.com/users/8402515/wem18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2299, "favorite_count": 0, "accepted_answer_id": 45601604, "answer_count": 1, "score": 1, "last_activity_date": 1502318489, "creation_date": 1502316942, "last_edit_date": 1502318489, "question_id": 45601463, "link": "https://stackoverflow.com/questions/45601463/invalid-operands-to-binary-expression-using-overloaded-operators", "title": "Invalid Operands to Binary Expression using Overloaded Operators", "body": "<p>Edit: I've read through the guide at <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\">What are the basic rules and idioms for operator overloading?</a> but I just can't figure out what is throwing the error. I am not hurt by down votes, but if you could explain what's causing you to down vote, I'd really appreciate it. I'm new to this community and don't want to ask questions incorrectly or piss people off, but I really do need help. Nobody can figure out why it wasn't working.</p>\n\n<p>I am getting an error: Invalid Operands to Binary Expression. I am sorting a linked list of objects using the below bubbleSort method. It is throwing the error at the \"*it1 > *it2. The dereference returns the info stored in the linked list.</p>\n\n<p>In this case, it is 2 objects, Mine. I will paste the class definition with the overloaded comparison operators below. Any help is appreciated, I really can't figure out what is wrong. I have successfully been able to get the comparison operators to work outside of the sort function.</p>\n\n<p>If more information is needed, let me know. Full disclosure, this is a class project. I am not asking for code, just a solution to this error, which my professor was even stumped by. </p>\n\n<pre><code>template&lt;typename T&gt;\nvoid LL&lt;T&gt;::bubbleSortI()\n{\nbool hasChanged = true;\nint swapcount = 0;\n\nwhile (hasChanged)\n{\n    int changecount = 0;\n    LL_iterator&lt;T&gt; it1 = begin();\n    LL_iterator&lt;T&gt; it2 = begin();\n    ++it2;\n\n    while(it2!=trailer)\n    {\n        if (*it1 &gt; *it2)\n        {\n            it1.swap(it2);\n            swapcount++;\n            changecount++;\n        }\n        ++it1;\n        ++it2;\n    }\n    if(changecount==0)\n    {\n        hasChanged = false;\n    }\n}\ncout &lt;&lt; swapcount &lt;&lt; \" swaps performed on the list. The list is now ordered.\" &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>And the Class declaration for Mine</p>\n\n<pre><code>class Mine\n{\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream &amp;os, const Mine &amp;m);\n\n\nprotected:\n    string mineID;\n    string mineName;\n    string nearestTown;\n    string mineStatus;\n    Date mineStatusDate;\n\npublic:\n    ~Mine();\n    Mine(string = \"0000000\", string = \"unknown\", string = \"unknown\", string = \"Abandoned\",\n         Date = Date(1900, 1, 1));\n\n    string getMineID() const { return mineID; }\n    string getMineName() const { return mineName; }\n    string getNearestTown() const { return nearestTown; }\n    string getMineStatus() const  { return mineStatus; }\n    Date getStatusDate() const { return mineStatusDate; }\n    void setMineID(string mID);\n    void setMineStatus(string mStat);\n    bool operator&gt;(Mine &amp;m);\n    bool operator&lt;(Mine &amp;m);\n    bool operator==(Mine &amp;m);\n\n    virtual void execReport1(ostream &amp; = std::cout) const;\n\n};\n</code></pre>\n\n<p>And the overloaded comparisons:</p>\n\n<pre><code>bool Mine::operator&lt;(Mine &amp;m)\n{\n    return getMineID() &lt; m.getMineID();\n}\n\nbool Mine::operator&gt;(Mine &amp;m)\n{\n    return getMineID() &gt; m.getMineID();\n}\n\nbool Mine::operator==(Mine &amp;m)\n{\n    return getMineID() == m.getMineID();\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "fragment-shader", "vertex-shader", "geometry-shader"], "answers": [{"tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": true, "score": 4, "last_activity_date": 1502317536, "creation_date": 1502317536, "answer_id": 45601552, "question_id": 45601431, "link": "https://stackoverflow.com/questions/45601431/do-i-need-to-pass-color-though-my-geometry-shader-to-the-fragment-shader/45601552#45601552", "title": "Do I need to pass color though my geometry shader to the fragment shader?", "body": "<p>Quoting <a href=\"https://www.khronos.org/registry/OpenGL/specs/gl/GLSLangSpec.3.30.pdf\" rel=\"nofollow noreferrer\">GLSL 3.30 specs 4.3.1 Inputs</a> :</p>\n\n<blockquote>\n  <p>Fragment shader inputs get per-fragment values, typically interpolated\n  from a previous stage's outputs</p>\n</blockquote>\n\n<p>Having a geometry shader is the previous stage. So yes, your FS uses inputs from your GS and only from it.</p>\n"}], "owner": {"reputation": 516, "user_id": 2118290, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/bFB3H.gif?s=128&g=1", "display_name": "Steven Venham", "link": "https://stackoverflow.com/users/2118290/steven-venham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 45601552, "answer_count": 1, "score": 0, "last_activity_date": 1502317536, "creation_date": 1502316792, "question_id": 45601431, "link": "https://stackoverflow.com/questions/45601431/do-i-need-to-pass-color-though-my-geometry-shader-to-the-fragment-shader", "title": "Do I need to pass color though my geometry shader to the fragment shader?", "body": "<p>So I have three shaders in my program.</p>\n\n<p>Vertex:</p>\n\n<pre><code>#version 330 core\nin vec2 Inpoint;\nin vec2 texCoords;\n\nout vec2 TexCoords;\n\nuniform mat4 model;\nuniform mat4 projection;\n\nvoid main()\n{\n    TexCoords = texCoords;\n    gl_Position = projection * model * vec4(Inpoint, 0.0, 1.0);\n}\n</code></pre>\n\n<p>Geometry: </p>\n\n<pre><code>#version 330 core\n\nlayout(triangles) in;\nlayout(triangle_strip, max_vertices = 4) out;\n\nvoid main()\n{\n    int i;\n\n    for (i = 0; i &lt; gl_in.length(); i++)\n    {\n        gl_Position = gl_in[i].gl_Position;\n        EmitVertex();\n    }\n    EndPrimitive();\n}\n</code></pre>\n\n<p>And finally the fragment shader:</p>\n\n<pre><code>#version 330 core\nin vec2 TexCoords;\nout vec4 color;\n\nuniform sampler2D image;\nuniform vec3 spriteColor;\n\nvoid main()\n{    \n    color = vec4(spriteColor, 1.0) * texture(image, TexCoords);\n}  \n</code></pre>\n\n<p>Now without the geometry shader, everything displays just fine. But as soon as I include the geometry shader, everything goes ... bad.</p>\n\n<p>It acts like its not getting chords for the textures. </p>\n\n<p>So, the question is, does the geometry shader need to pass the data through itself to the fragment shader? I mean the geometry shader is basically doing nothing so it shouldn't. Unless there is some giant mistake I am missing.</p>\n\n<p>I tried to add a pass-though but it complains that everything needs to be an array, and even when I did make it an array it didn't quite work right.</p>\n"}, {"tags": ["c++", "templates", "boost-variant"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 1, "creation_date": 1502316722, "post_id": 45601390, "comment_id": 78162258, "body": "Why not make <code>getTab</code> a function template?"}, {"owner": {"reputation": 9959, "user_id": 6103040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a1eff68533fb4a36cec22c963996c527?s=128&d=identicon&r=PG&f=1", "display_name": "F. Priv&#233;", "link": "https://stackoverflow.com/users/6103040/f-priv%c3%a9"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1502316828, "post_id": 45601390, "comment_id": 78162295, "body": "@scohe001 Edited: don&#39;t compile."}, {"owner": {"reputation": 9959, "user_id": 6103040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a1eff68533fb4a36cec22c963996c527?s=128&d=identicon&r=PG&f=1", "display_name": "F. Priv&#233;", "link": "https://stackoverflow.com/users/6103040/f-priv%c3%a9"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1502316874, "post_id": 45601390, "comment_id": 78162316, "body": "@0x499602D2 It is precisely what I want to avoid. I want to template, but with strings."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 1, "creation_date": 1502316974, "post_id": 45601390, "comment_id": 78162355, "body": "@F.Priv&#233; &quot;so that I don&#39;t have to make extensive dispatcher functions when using this class&quot; Why would you need to make dispatcher functions?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1502317173, "post_id": 45601390, "comment_id": 78162423, "body": "@F.Priv&#233;: You are asking for something that is usually handled by implementing a factory function that returns a polymorphic type, not a templated type. You can use a templated class as the concrete implementation of an object instance, as long as it also implements the polymorphic interface."}, {"owner": {"reputation": 9959, "user_id": 6103040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a1eff68533fb4a36cec22c963996c527?s=128&d=identicon&r=PG&f=1", "display_name": "F. Priv&#233;", "link": "https://stackoverflow.com/users/6103040/f-priv%c3%a9"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1502317271, "post_id": 45601390, "comment_id": 78162459, "body": "@0x499602D2 See <a href=\"https://github.com/privefl/bigstatsr/blob/master/src/colstats.cpp\" rel=\"nofollow noreferrer\">github.com/privefl/bigstatsr/blob/master/src/colstats.cpp</a> for an example."}, {"owner": {"reputation": 9959, "user_id": 6103040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a1eff68533fb4a36cec22c963996c527?s=128&d=identicon&r=PG&f=1", "display_name": "F. Priv&#233;", "link": "https://stackoverflow.com/users/6103040/f-priv%c3%a9"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1502317383, "post_id": 45601390, "comment_id": 78162493, "body": "@RemyLebeau I don&#39;t know what a &quot;factory function&quot; nor a &quot;polymorphic interface&quot; are. Could you explain with an example?"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1502328702, "post_id": 45601390, "comment_id": 78165403, "body": "If you are already using boost, you should have a look at boost.fusion."}, {"owner": {"reputation": 9959, "user_id": 6103040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a1eff68533fb4a36cec22c963996c527?s=128&d=identicon&r=PG&f=1", "display_name": "F. Priv&#233;", "link": "https://stackoverflow.com/users/6103040/f-priv%c3%a9"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1502348550, "post_id": 45601390, "comment_id": 78171997, "body": "@Micha&#235;lRoy I&#39;ve read <a href=\"https://theboostcpplibraries.com/boost.fusion\" rel=\"nofollow noreferrer\">theboostcpplibraries.com/boost.fusion</a>. Not sure how it can help me?"}], "answers": [{"comments": [{"owner": {"reputation": 9959, "user_id": 6103040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a1eff68533fb4a36cec22c963996c527?s=128&d=identicon&r=PG&f=1", "display_name": "F. Priv&#233;", "link": "https://stackoverflow.com/users/6103040/f-priv%c3%a9"}, "edited": false, "score": 0, "creation_date": 1502317747, "post_id": 45601460, "comment_id": 78162622, "body": "Seems promising. I&#39;ll try your solution tomorrow and come back to you."}, {"owner": {"reputation": 9959, "user_id": 6103040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a1eff68533fb4a36cec22c963996c527?s=128&d=identicon&r=PG&f=1", "display_name": "F. Priv&#233;", "link": "https://stackoverflow.com/users/6103040/f-priv%c3%a9"}, "edited": false, "score": 0, "creation_date": 1502350740, "post_id": 45601460, "comment_id": 78173391, "body": "<b>Seems I can&#39;t use <code>boost::variant&lt;Tab&lt;int&gt;, Tab&lt;double&gt; &gt;</code> as an element of the <code>Tab</code> class.</b> The compiler says that <code>boost::variant&lt;Tab&lt;int&gt;, Tab&lt;double&gt; &gt;</code> doesn&#39;t have the members and methods of the <code>Tab</code> class."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 5, "last_activity_date": 1502318247, "last_edit_date": 1502318247, "creation_date": 1502316929, "answer_id": 45601460, "question_id": 45601390, "link": "https://stackoverflow.com/questions/45601390/templating-with-strings-instead-of-types/45601460#45601460", "title": "Templating with strings instead of types", "body": "<p>You may do something like:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Tab {\npublic:\n  Tab(std::size_t length) : tab(length) {}\n\n  // ...\nprivate:\n    std::vector&lt;T&gt; tab;\n}; \n\nboost::variant&lt;Tab&lt;int&gt;, Tab&lt;double&gt; &gt;\nCreateTab(const std::string&amp; type, std::size_t length)\n{\n    if (type == \"int\") {\n        return Tab&lt;int&gt;(length);\n    } else if (type == \"double\") {\n        return Tab&lt;double&gt;(length);\n    }\n    throw std::runtime_error(\"Bad type\");\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9959, "user_id": 6103040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a1eff68533fb4a36cec22c963996c527?s=128&d=identicon&r=PG&f=1", "display_name": "F. Priv&#233;", "link": "https://stackoverflow.com/users/6103040/f-priv%c3%a9"}, "edited": false, "score": 0, "creation_date": 1502348211, "post_id": 45601715, "comment_id": 78171762, "body": "I don&#39;t see how this can prevent me from having to dispatch strings to typenames?"}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "reply_to_user": {"reputation": 9959, "user_id": 6103040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a1eff68533fb4a36cec22c963996c527?s=128&d=identicon&r=PG&f=1", "display_name": "F. Priv&#233;", "link": "https://stackoverflow.com/users/6103040/f-priv%c3%a9"}, "edited": false, "score": 0, "creation_date": 1502349274, "post_id": 45601715, "comment_id": 78172454, "body": "@F.Priv&#233; Why are you using strings instead of typenames in the first place?  In this example there is clearly no need."}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "reply_to_user": {"reputation": 9959, "user_id": 6103040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a1eff68533fb4a36cec22c963996c527?s=128&d=identicon&r=PG&f=1", "display_name": "F. Priv&#233;", "link": "https://stackoverflow.com/users/6103040/f-priv%c3%a9"}, "edited": false, "score": 0, "creation_date": 1502350024, "post_id": 45601715, "comment_id": 78172950, "body": "@F.Priv&#233; Unfortunately, this doesn&#39;t clarify it.  Do you want to avoid using a template class for <code>Tab</code>?  If yes, why?"}, {"owner": {"reputation": 9959, "user_id": 6103040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a1eff68533fb4a36cec22c963996c527?s=128&d=identicon&r=PG&f=1", "display_name": "F. Priv&#233;", "link": "https://stackoverflow.com/users/6103040/f-priv%c3%a9"}, "edited": false, "score": 0, "creation_date": 1502351045, "post_id": 45601715, "comment_id": 78173544, "body": "A template class is OK. What I doesn&#39;t want is to make an extensive <code>case</code> statement (for all typenames that need to be supported, based on the string type) in all functions that need this class."}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "reply_to_user": {"reputation": 9959, "user_id": 6103040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a1eff68533fb4a36cec22c963996c527?s=128&d=identicon&r=PG&f=1", "display_name": "F. Priv&#233;", "link": "https://stackoverflow.com/users/6103040/f-priv%c3%a9"}, "edited": false, "score": 0, "creation_date": 1502351156, "post_id": 45601715, "comment_id": 78173624, "body": "@F.Priv&#233; Is the string a constant expression, i.e. <code>&quot;int&quot;</code> or is it a runtime parameter?"}, {"owner": {"reputation": 9959, "user_id": 6103040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a1eff68533fb4a36cec22c963996c527?s=128&d=identicon&r=PG&f=1", "display_name": "F. Priv&#233;", "link": "https://stackoverflow.com/users/6103040/f-priv%c3%a9"}, "edited": false, "score": 0, "creation_date": 1502351288, "post_id": 45601715, "comment_id": 78173715, "body": "The string is a constant. For example I want to map <code>&quot;int&quot;</code> to <code>int</code>, <code>&quot;double&quot;</code> to <code>double</code>, <code>&quot;uchar&quot;</code> to <code>unsigned char</code>, etc."}], "tags": [], "owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "is_accepted": false, "score": 2, "last_activity_date": 1502318534, "creation_date": 1502318534, "answer_id": 45601715, "question_id": 45601390, "link": "https://stackoverflow.com/questions/45601390/templating-with-strings-instead-of-types/45601715#45601715", "title": "Templating with strings instead of types", "body": "<p>I would not \"template on string\" and return a variant but rather template on the return type.  You can then</p>\n\n<pre><code>getTab&lt;int&gt;(17);\n</code></pre>\n\n<p>Even with this you don't need any \u201cexpensive dispatcher functions\u201d you were referring to in your question.  You just template on the wrapped type of <code>Tab</code> as so</p>\n\n<pre><code>template &lt; typename T &gt;\nvoid algorithm(Tab&lt;T&gt; const&amp; t) { ... }\n</code></pre>\n\n<p>I also replaced the bare pointer with a <code>std::vector</code> for ease of use and memory correctness.</p>\n\n<pre><code>#include &lt;vector&gt;\n\ntemplate &lt;typename T&gt;\nclass Tab {\n  std::vector&lt;T&gt; tab;\npublic :\n\n  Tab(std::size_t length) : tab(length) {}\n\n  T operator[](std::size_t i) {\n    return tab[i];\n  }\n}; \n\ntemplate &lt; typename T &gt;\nTab&lt;T&gt; getTab(std::size_t length)\n{\n  return Tab&lt;T&gt;(length);\n}\n\nint main()\n{\n  auto ti = getTab&lt;int&gt;(17);\n  auto td = getTab&lt;double&gt;(29);\n}\n</code></pre>\n"}], "owner": {"reputation": 9959, "user_id": 6103040, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a1eff68533fb4a36cec22c963996c527?s=128&d=identicon&r=PG&f=1", "display_name": "F. Priv&#233;", "link": "https://stackoverflow.com/users/6103040/f-priv%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1502349844, "creation_date": 1502316565, "last_edit_date": 1502349844, "question_id": 45601390, "link": "https://stackoverflow.com/questions/45601390/templating-with-strings-instead-of-types", "title": "Templating with strings instead of types", "body": "<p>I want to create a class that works with many types. \nYet, I want to instantiate an element of this class not with a type but rather with a string (e.g. using <code>\"int\"</code> instead of <code>int</code>) so that I don't have to make extensive dispatcher functions when using this class.</p>\n\n<p>On a small class <code>Tab</code>, I tried two \"solutions\":</p>\n\n<p>The first one:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Tab {\npublic :\n\n  Tab(std::size_t length) {\n    T* tab_[length];\n    tab = tab_;\n  }\n\n  T* tab;\n\n  T operator[](std::size_t i) {\n    return tab[i];\n  }\n}; \n\nTab getTab(std::string type, std::size_t length) {\n\n    if (type == \"int\") {\n      Tab&lt;int&gt; tab(length);\n    } else if (type == \"double\") {\n      Tab&lt;double&gt; tab(length);\n    }\n\n    return tab;\n}\n</code></pre>\n\n<p>The second one:</p>\n\n<pre><code>typedef boost::variant&lt;int, double&gt; numeric;\ntypedef boost::variant&lt;int*, double*&gt; numeric_ptr;\n\nclass Tab {\npublic :\n\n  Tab(std::string type, std::size_t length) {\n    if (type == \"int\") {\n      tab = new int[length];\n    } else if (type == \"double\") {\n      tab = new double[length];\n    }\n  }\n\n  numeric_ptr tab;\n\n  numeric operator[](std::size_t i) {\n    return tab[i];\n  }\n}; \n</code></pre>\n\n<p>Both tries don't compile. I would love to have a not-so-complicated solution to my problem.</p>\n\n<p><strong>Edit: Why are you using strings instead of typenames in the first place?</strong></p>\n\n<p>I have many functions that use a templated class. In each function, I can know the typename of the templated class as a string so I have to use a dispatch function like this one: <a href=\"https://github.com/privefl/bigstatsr/blob/master/src/colstats.cpp\" rel=\"nofollow noreferrer\">https://github.com/privefl/bigstatsr/blob/master/src/colstats.cpp</a>. If you have 20 functions like this, it's really annoying to write a dispatch function for every single one of them (and it's prone to error). </p>\n\n<p>So I would rather like to create just one dispatch function for the instantiation of the class and use this function in all the functions that need an instance of this templated class.</p>\n"}, {"tags": ["c++", "dll", "ide", "codeblocks", "matrix-vision"], "comments": [{"owner": {"reputation": 292, "user_id": 3107907, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IJpxQ.jpg?s=128&g=1", "display_name": "Mike Gibson", "link": "https://stackoverflow.com/users/3107907/mike-gibson"}, "edited": false, "score": 0, "creation_date": 1502317696, "post_id": 45601324, "comment_id": 78162606, "body": "Quick secondary question: Does anyone think there is even a remote chance that the issue could somehow be caused by memory corruption in the host application?  I don&#39;t believe there is any memory corruption in the host application, and I&#39;m not sure it would even be possible for memory corruption in the host application to affect the memory for the dll (or at least it would seem the chances would be fairly astronomical)"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1502318496, "post_id": 45601324, "comment_id": 78162844, "body": "Can it be that you have two .dll files, similar but not the same, in different dirs?"}, {"owner": {"reputation": 292, "user_id": 3107907, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IJpxQ.jpg?s=128&g=1", "display_name": "Mike Gibson", "link": "https://stackoverflow.com/users/3107907/mike-gibson"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1502318779, "post_id": 45601324, "comment_id": 78162957, "body": "It is not the case. But even if it were, I wouldn&#39;t expect the host application to choose one location when ran from Windows File Manager, and then the host application to choose a different location when ran from the IDE... right?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1502318932, "post_id": 45601324, "comment_id": 78163017, "body": "Well, it can be if the .dll lives in the same directory as the .exe and C::B has another dir (perhaps due to a different project in the same workspace)."}, {"owner": {"reputation": 292, "user_id": 3107907, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IJpxQ.jpg?s=128&g=1", "display_name": "Mike Gibson", "link": "https://stackoverflow.com/users/3107907/mike-gibson"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1502319358, "post_id": 45601324, "comment_id": 78163143, "body": "Not at issue here, but noted for the future."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1502319548, "post_id": 45601324, "comment_id": 78163212, "body": "What about using the debugger to see how the dll is called and used?"}], "owner": {"reputation": 292, "user_id": 3107907, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IJpxQ.jpg?s=128&g=1", "display_name": "Mike Gibson", "link": "https://stackoverflow.com/users/3107907/mike-gibson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502316205, "creation_date": 1502316205, "question_id": 45601324, "link": "https://stackoverflow.com/questions/45601324/different-behavior-in-dll-when-running-host-application-from-codeblocks-ide", "title": "Different behavior in dll when running host application from Codeblocks IDE", "body": "<p>I'm having an interesting problem regarding a machine vision camera, a dll, a host application, and CodeBlocks.</p>\n\n<p>I have a dll that enumerates Matrix Vision cameras, and directs calls from a host application to whichever camera the host application is addressing.</p>\n\n<p>I have a bluefox-IGC camera that I'll refer to as the SD camera and a BlueFox3-1100C camera that I'll refer to as the HD camera.</p>\n\n<p>In the dll, the first thing to be done is to create a new DeviceManager (a Matrix-Vision class) and ask it how many devices are connected:</p>\n\n<pre><code>FDeviceManager =new DeviceManager;\n\n// Check to see if any devices are currently connected.\nCount =FDeviceManager-&gt;deviceCount();\nif ( Count == 0)\n{\n    OutputDebugStr(\"WARNING: No cameras found by camera driver.\");\n    return CAM_FAILURE;\n}\n</code></pre>\n\n<p>When I run the host application from Windows File Manager, both the SD and HD camera will be found. If only 1 SD camera is present, Count = 1. If only 1 HD camera is present, Count = 1. If one of each is present, Count = 2. No problems.</p>\n\n<p>However, if I run the host application from the CodeBlocks IDE, no HD cameras are ever found. So, 1 SD Camera -> Count = 1. 1 HD Camera -> Count = 0. 1 SD + 1 HD -> Count = 1.</p>\n\n<p>I'm not even sure what direction to look in here. </p>\n\n<p>Since the IDE clearly runs the host application in the IDE's memory space, I could see this being a problem with CodeBlocks.</p>\n\n<p>Has anyone seen any disparate behavior like this before?</p>\n\n<p>Here are some quick stats:</p>\n\n<ul>\n<li>OS is Windows 7 Pro 64-bit SP1 </li>\n<li>Host application is 32-bit, compiled with TDM-GCC-32</li>\n<li>dll is 32-bit, compiled with TDM-GCC-32</li>\n</ul>\n\n<p>If any more information is needed, just ask.</p>\n"}, {"tags": ["c#", "c++", "unity3d", "google-project-tango"], "comments": [{"owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "edited": false, "score": 0, "creation_date": 1502316770, "post_id": 45601237, "comment_id": 78162278, "body": "If it crashes on <code>memcpy</code> you have to also post that part that uses <code>memcpy</code> and where you are copying and writing to."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1502316851, "post_id": 45601237, "comment_id": 78162306, "body": "I&#39;m not sure about first scanline being metadata, as <a href=\"https://developers.google.com/tango/apis/unity/reference/class/tango/tango-unity-image-data#class_tango_1_1_tango_unity_image_data_1a0cec79b5bfb41f2f44e1533b5ff04237\" rel=\"nofollow noreferrer\">docs don&#39;t mention it</a>. Plane size calculations should be based on strides e.g. <code>yPlaneSize = imageData.stride * imageData.height;</code> Also you are passing plane sizes as strides into <code>incomingI420Frame</code>."}, {"owner": {"reputation": 2603, "user_id": 846340, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b4e01fd7f5752f9de60d5a8b96460392?s=128&d=identicon&r=PG", "display_name": "peetonn", "link": "https://stackoverflow.com/users/846340/peetonn"}, "edited": false, "score": 0, "creation_date": 1502319338, "post_id": 45601237, "comment_id": 78163135, "body": "thanks! i&#39;ll double check that. here&#39;s the <a href=\"https://developers.google.com/tango/apis/unity/reference/interface/i-tango-video-overlay\" rel=\"nofollow noreferrer\">link</a> where it mentions metadata."}], "owner": {"reputation": 2603, "user_id": 846340, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b4e01fd7f5752f9de60d5a8b96460392?s=128&d=identicon&r=PG", "display_name": "peetonn", "link": "https://stackoverflow.com/users/846340/peetonn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502315731, "creation_date": 1502315731, "question_id": 45601237, "link": "https://stackoverflow.com/questions/45601237/passing-yuv-data-from-tango-to-c-plugin-causes-bad-memory-access", "title": "Passing YUV data from Tango to C++ plugin causes bad memory access", "body": "<p>My app is in Unity and uses Google Tango SDK. I'm getting YUV image buffer delivered to <code>OnTangoImageAvailableEventHandler</code>, from there, I need to retrieve individual Y, U and V buffers and pass them to C++ plugin. Here's what I do:</p>\n\n<pre><code>public class LibraryWrapper {\n    [DllImport (\"library\")]\n    public static extern void incomingI420Frame(uint width, uint height, \n      uint strideY, uint strideU, uint strideV,\n      IntPtr yPlane, IntPtr uPlane, IntPtr vPlane);\n}\n\npublic void OnTangoImageAvailableEventHandler(Tango.TangoEnums.TangoCameraId cameraId, Tango.TangoUnityImageData imageBuffer)\n{\n    uint offset = imageData.stride; // offset, because first scanline is a metadata, according to Tango documentation \n    uint yPlaneSize = imageData.width * imageData.height;\n    uint vPlaneSize = imageData.width / 2 * imageData.height / 2;\n    uint uPlaneSize = vPlaneSize;\n\n    GCHandle pinnedBuffer = GCHandle.Alloc (imageData.data, GCHandleType.Pinned);\n\n    IntPtr yPlane = new IntPtr (pinnedBuffer.AddrOfPinnedObject ().ToInt64 () + offset);\n    offset += yPlaneSize;\n    IntPtr vPlane = new IntPtr (pinnedBuffer.AddrOfPinnedObject ().ToInt64 () + offset);\n    offset += vPlaneSize;\n    IntPtr uPlane = new IntPtr (pinnedBuffer.AddrOfPinnedObject ().ToInt64 () + offset);\n\n    Debug.Log (\"processing frame... \" + imageData.width + \"x\" + imageData.height + \" total size \" + imageData.data.Length);\n    Debug.Log (\"stride \" + imageData.stride + \". yplane \" + String.Format(\"{0:X}\", yPlane) + \" (\" + yPlaneSize + \" bytes)\");\n    Debug.Log (\"uplane \" + String.Format(\"{0:X}\", uPlane) + \" (\" + uPlaneSize + \" bytes)\");\n    Debug.Log (\"vplane \" + String.Format(\"{0:X}\", vPlane) + \" (\" + vPlaneSize + \" bytes)\");\n\n    LibraryWrapper.incomingI420Frame (imageData.width, imageData.height,\n        yPlaneSize, uPlaneSize, vPlaneSize, yPlane, uPlane, vPlane);\n\n    pinnedBuffer.Free ();\n} \n</code></pre>\n\n<p>C++ library function is:</p>\n\n<pre><code>void incomingI420Frame(\n        const unsigned int width,\n        const unsigned int height,\n        const unsigned int strideY,\n        const unsigned int strideU,\n        const unsigned int strideV,\n        const unsigned char* yBuffer,\n        const unsigned char* uBuffer,\n        const unsigned char* vBuffer);\n</code></pre>\n\n<p>Application crashes on <code>memcpy</code> of the data:</p>\n\n<pre><code>08-09 14:42:42.789  9384  9401 F libc    : Fatal signal 11 (SIGSEGV), code 1, fault addr 0x0 in tid 9401 (UnityMain)\n backtrace:\n08-09 14:42:42.907   542   542 F DEBUG   :     #00 pc 00016978  /system/lib/libc.so (__memcpy_base+104)\n</code></pre>\n\n<p>Obviously, I messed up with pointer, however I don't see how - I'm using <code>GCHandle</code> to pin the buffer, so it shouldn't move, right? Moreover call to C++ happens in the same thread, so I doubt GC will ever have a chance to touch the buffer. Thus, I suspect, error might be in calculating pointers for Y, U or V data.</p>\n"}, {"tags": ["c++", "string", "bitset"], "comments": [{"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 1, "creation_date": 1502315986, "post_id": 45601168, "comment_id": 78161956, "body": "It&#39;s probably simplest to operate on 8-byte integers rather than on individual bytes."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1502317941, "post_id": 45601168, "comment_id": 78162677, "body": "How do you tell the difference between <code>&quot;Hello&quot;</code> and <code>&quot;Hello\\x7f&quot;</code>? Both would be represented in the same way. Did you mean to include the null terminator too, or do you want to disallow that character?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1502322024, "post_id": 45601168, "comment_id": 78163862, "body": "@DanielH: I read the question as the extra <code>1</code>s wont be added until the next full octet, not starting after the last encoded bit, so <code>&quot;Hello&quot;</code> would be <code>10010001 10010111 01100110 11001101 11100000 11111111 11111111 ...</code>, whereas <code>&quot;Hello\\x7f&quot;</code> would be <code>10010001 10010111 01100110 11001101 11111111 11000000 11111111 ...</code> instead."}, {"owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "edited": false, "score": 0, "creation_date": 1502322055, "post_id": 45601168, "comment_id": 78163873, "body": "What is 8 bit ASCII?"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1502377627, "post_id": 45601168, "comment_id": 78193911, "body": "@RemyLebeau Then what about <code>&quot;Daniel H&quot;</code> vs <code>&quot;Daniel H\\x7f&quot;</code>? The string <code>&quot;Daniel H&quot;</code>, encoded in 7 bits per character, would end at the end of the 7th octet. It is difficult to avoid all ambiguity; <a href=\"https://en.wikipedia.org/wiki/GSM_03.38#GSM_7-bit_default_alphabet_and_extension_table_of_3GPP_TS_23.038_.2F_GSM_03.38\" rel=\"nofollow noreferrer\">SMS does something similar</a>, so you can\u2019t end a text message with a multiple of 8 characters total with a carriage return (not that you would usually want to), and I <i>think</i> the original spec made it so you couldn\u2019t end the message with an <code>@</code> (which you might want)."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "edited": false, "score": 0, "creation_date": 1502377778, "post_id": 45601168, "comment_id": 78194039, "body": "@EvilTeach A convenient way to say \u201cASCII chars encoded in the seven low-order bits of an octet with the high-order bit set to 0\u201d. It isn\u2019t technically correct but it is usually perfectly understandable."}], "answers": [{"comments": [{"owner": {"reputation": 275, "user_id": 6154148, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bd3cb95076687eaca190af66ae979f0?s=128&d=identicon&r=PG&f=1", "display_name": "nnja", "link": "https://stackoverflow.com/users/6154148/nnja"}, "edited": false, "score": 0, "creation_date": 1502316830, "post_id": 45601336, "comment_id": 78162297, "body": "Thank you, just had to reverse the numbers to work (0 -&gt; 6, etc)."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 3, "last_activity_date": 1502316886, "last_edit_date": 1502316886, "creation_date": 1502316260, "answer_id": 45601336, "question_id": 45601168, "link": "https://stackoverflow.com/questions/45601168/create-string-of-7-bit-ascii-text-from-8-bit-ascii-chars-in-c/45601336#45601336", "title": "Create string of 7-bit ASCII text from 8-bit ASCII chars in C++", "body": "<p>It seems as if you expect statement <code>std::vector&lt;bool&gt; chartemp(a[i])</code> to copy the <code>i</code>'th character of <code>a</code> as a series of bits into the vector. Yet the constructor of a vector interprets the value as the initial size, and <code>a[i]</code> is the ASCII-value of the respective character in <code>a</code> (e.g. <code>72</code> for <code>'H'</code>). So you have a good chance to create vectors of larger size than expected, each position initialized with <code>false</code>.</p>\n\n<p>Instead, I'd suggest to use bit-masking:</p>\n\n<pre><code>    temp[j++] = a[i] &amp; (1 &lt;&lt; 6);\n    temp[j++] = a[i] &amp; (1 &lt;&lt; 5);\n    temp[j++] = a[i] &amp; (1 &lt;&lt; 4);\n    temp[j++] = a[i] &amp; (1 &lt;&lt; 3);\n    temp[j++] = a[i] &amp; (1 &lt;&lt; 2);\n    temp[j++] = a[i] &amp; (1 &lt;&lt; 1);\n    temp[j++] = a[i] &amp; (1 &lt;&lt; 0);\n</code></pre>\n\n<p>And instead of using <code>temp[j++]</code>, you could use <code>temp.push_back(a[i] &amp; (1 &lt;&lt; 0))</code>, thereby also overcoming the need of initializing the vector with the right size.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1502322213, "last_edit_date": 1502322213, "creation_date": 1502319844, "answer_id": 45601920, "question_id": 45601168, "link": "https://stackoverflow.com/questions/45601168/create-string-of-7-bit-ascii-text-from-8-bit-ascii-chars-in-c/45601920#45601920", "title": "Create string of 7-bit ASCII text from 8-bit ASCII chars in C++", "body": "<p>Try something like this:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n\nstd::string stuffIt(const std::string &amp;str, const int maxOctets)\n{\n    const int maxBits = maxOctets * 8;\n    const int maxChars = maxBits / 7;\n\n    if (str.size() &gt; maxChars)\n    {\n        // t0o many chars to stuff into maxOctes!\n        return \"\";\n    }\n\n    std::vector&lt;bool&gt; temp(maxBits);\n    int idx = temp.size()-1;\n\n    for (int i = 0; i &lt; str.size(); ++i)\n    {\n        char ch = str[i];\n        for(int j = 0; j &lt; 7; ++j)\n            temp[idx--] = (ch &gt;&gt; (6-j)) &amp; 1;\n    }\n\n    int numBits = (((7 * str.size()) + 7) &amp; ~7);\n\n    for (int i = (temp.size()-numBits-1); i &gt;= 0; --i) {\n        temp[i] = 1;\n    }\n\n    std::string s;\n    s.reserve(temp.size());\n\n    for(int j = temp.size()-1; j &gt;= 0; --j)\n        s.push_back(temp[j] ? '1' : '0');\n\n    return s;\n}\n</code></pre>\n\n<p><code>stuffIt(\"Hello\", 12)</code> returns:</p>\n\n<blockquote>\n  <p>100100011001011101100110110011011110000011111111111111111111111111111111111111111111111111111111</p>\n</blockquote>\n\n<p><code>stuffIt(\"Hello\", 24)</code> returns:</p>\n\n<blockquote>\n  <p>100100011001011101100110110011011110000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111</p>\n</blockquote>\n\n<p><code>stuffIt(\"Hello\", 36)</code> returns:</p>\n\n<blockquote>\n  <p>100100011001011101100110110011011110000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111</p>\n</blockquote>\n\n<p><code>stuffIt(\"Hello\", 46)</code> returns:</p>\n\n<blockquote>\n  <p>10010001100101110110011011001101111000001111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111</p>\n</blockquote>\n\n<p>If you want to know how many octets a given string will require (without adding octets full of <code>1</code>s), you can use this formula:</p>\n\n<pre><code>const int numChars = str.size();\nconst int numBits = (numChars * 7);\nconst int bitsNeeded = ((numBits + 7) &amp; ~7);\nconst int octetsNeeded = (bitsNeeded / 8);\n</code></pre>\n\n<p>If you want the extra <code>1</code>s, just round <code>octetsNeeded</code> up to the desired value (for instance, the next even multiple of 12).</p>\n"}], "owner": {"reputation": 275, "user_id": 6154148, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bd3cb95076687eaca190af66ae979f0?s=128&d=identicon&r=PG&f=1", "display_name": "nnja", "link": "https://stackoverflow.com/users/6154148/nnja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "accepted_answer_id": 45601336, "answer_count": 2, "score": 1, "last_activity_date": 1502322213, "creation_date": 1502315422, "question_id": 45601168, "link": "https://stackoverflow.com/questions/45601168/create-string-of-7-bit-ascii-text-from-8-bit-ascii-chars-in-c", "title": "Create string of 7-bit ASCII text from 8-bit ASCII chars in C++", "body": "<p>I wish to create a string with up to 46 octets, filled in with 7-bit ASCII chars. For example, for the string 'Hello':</p>\n\n<ol>\n<li>I take the last 7 bits of 'H' (0x48 - 100 1000) and put it in the first 7 bits of the first octet.</li>\n<li>I take the next char 'e' (0x65 - 110 0101), the first bit will go to the last bit of the first octet then it will fill the next 6 bits of octet 2.</li>\n<li>Repeat 1-2 until end of string, then the rest of the octets will be filled in with 1's.</li>\n</ol>\n\n<p>Here is my attempt which I have worked quite a bit on, I've tried using bitset but it seems that it is not appropriate for this task as I do not have to have 46 octets all the time. If the string can fit in 12 (or 24, 36) octets (and just have the rest filled in by 1's) then I do not have to use 46.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\n\nint main()\n{\n    std::string a = \"Hello\";\n    int N = 0;\n    if (a.size() &lt;= 11) {\n        // I'm supposed to implement some logic here to check if it\n        // will fit 12, 24, 36 or 46 octets but I will do it later.\n        N = 80;\n    }\n\n    std::vector&lt;bool&gt; temp(N);\n    int j = 0;\n    for (int i = 0; i &lt; a.size(); i++) {\n        std::vector&lt;bool&gt; chartemp(a[i]);\n\n        cout &lt;&lt; a[i] &lt;&lt; \"\\n\";\n        cout &lt;&lt; chartemp[0] &lt;&lt; \"\\n\";\n        cout &lt;&lt; chartemp[1] &lt;&lt; \"\\n\";\n        cout &lt;&lt; chartemp[2] &lt;&lt; \"\\n\";\n        cout &lt;&lt; chartemp[3] &lt;&lt; \"\\n\";\n        cout &lt;&lt; chartemp[4] &lt;&lt; \"\\n\";\n        temp[j++] = chartemp[0];\n        temp[j++] = chartemp[1];\n        temp[j++] = chartemp[2];\n        temp[j++] = chartemp[3];\n        temp[j++] = chartemp[4];\n        temp[j++] = chartemp[5];\n        temp[j++] = chartemp[6];\n    }\n\n    for (int k = j; k &lt; N; k++) {\n        temp[j++] = 1;\n    }\n\n    std::string s = \"\";\n    for (int l = 0; l &lt;= temp.size(); l++)\n    {\n        if (temp[l]) {\n            s += '1';\n        }\n        else {\n            s += '0';\n        }\n    }    \n    cout &lt;&lt; s &lt;&lt; \"\\n\";\n\n}\n</code></pre>\n\n<p>The result is </p>\n\n<pre><code>000000000000000000000000000000000001111111111111111111111111111111111111111111110\n</code></pre>\n"}, {"tags": ["c++", "select", "winsock2"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1502315537, "post_id": 45601151, "comment_id": 78161764, "body": "Well, looks like WinAPI doesn&#39;t like it. If you want to sleep for 1 seconds, just use <code>Sleep</code>. (although I strongly believe <code>sleep</code> has no place in production code)"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1502315548, "post_id": 45601151, "comment_id": 78161771, "body": "Calling <code>select</code> with no FD_SETs does work on Unix, but I wouldn&#39;t be at all surprised to hear it <i>doesn&#39;t</i> work on Winsock.  You could try using Sleep() (not to be confused with sleep()) instead - that takes a time in milliseconds."}, {"owner": {"reputation": 121, "user_id": 8358955, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/caea907ba96e55150bfaa66230584127?s=128&d=identicon&r=PG&f=1", "display_name": "Gergely Tomcs&#225;nyi", "link": "https://stackoverflow.com/users/8358955/gergely-tomcs%c3%a1nyi"}, "edited": false, "score": 0, "creation_date": 1502316183, "post_id": 45601151, "comment_id": 78162056, "body": "This is so sad. Thanks."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1502328599, "post_id": 45601151, "comment_id": 78165382, "body": "What&#39;s wrong with using the Windows Sleep() function?"}], "answers": [{"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1502325224, "last_edit_date": 1502325224, "creation_date": 1502324816, "answer_id": 45602626, "question_id": 45601151, "link": "https://stackoverflow.com/questions/45601151/winsock2-select-returns-wsaeinval-error-10022/45602626#45602626", "title": "Winsock2 select() returns WSAEINVAL (error 10022)", "body": "<p>From the notorious and offensive <a href=\"ftp://ftp.ibiblio.org/pub/micro/pc-stuff/ms-windows/winsock/lamelist.html\" rel=\"nofollow noreferrer\">Winsock 'lame list'</a>:</p>\n\n<blockquote>\n  <p>Calling select() with three empty FD_SETs and a valid TIMEOUT structure as a sleezy delay function.</p>\n  \n  <p>Inexcusably lame.</p>\n</blockquote>\n\n<p>Note the mis-spelling. The document is worth reading, if you can stand it, just to see the incredible depths hubris can attain. In case they've recanted, or discovered that they didn't invent the Sockets API, you could try it with empty FD sets instead of null parameters, but I don't hold out much hope.</p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 8358955, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/caea907ba96e55150bfaa66230584127?s=128&d=identicon&r=PG&f=1", "display_name": "Gergely Tomcs&#225;nyi", "link": "https://stackoverflow.com/users/8358955/gergely-tomcs%c3%a1nyi"}, "edited": false, "score": 0, "creation_date": 1502363125, "post_id": 45603078, "comment_id": 78182020, "body": "Thanks for the idea. Just one more question: <code>largestFileDescriptorValuePlusOne</code> means that I have to pass the size of the largest FD_SET +1 in order to achieve compatibility?"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 121, "user_id": 8358955, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/caea907ba96e55150bfaa66230584127?s=128&d=identicon&r=PG&f=1", "display_name": "Gergely Tomcs&#225;nyi", "link": "https://stackoverflow.com/users/8358955/gergely-tomcs%c3%a1nyi"}, "edited": false, "score": 0, "creation_date": 1502373202, "post_id": 45603078, "comment_id": 78190224, "body": "You have to compute the maximum value of all the socket fd values that you added to any of the fd_set objects (via the FD_SET() macro), and add one to that."}], "tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": true, "score": 0, "last_activity_date": 1502373256, "last_edit_date": 1502373256, "creation_date": 1502328961, "answer_id": 45603078, "question_id": 45601151, "link": "https://stackoverflow.com/questions/45601151/winsock2-select-returns-wsaeinval-error-10022/45603078#45603078", "title": "Winsock2 select() returns WSAEINVAL (error 10022)", "body": "<blockquote>\n  <p>However, I have seen a few examples calling select() without any\n  FD_SETs.</p>\n</blockquote>\n\n<p>It will work in most OS's (that aren't Windows).</p>\n\n<blockquote>\n  <p>Is it possible somehow [under Windows]?</p>\n</blockquote>\n\n<p>Not directly, but it's easy enough to roll your own wrapper around select() that gives you the behavior you want even under Windows:</p>\n\n<pre><code>int proper_select(int largestFileDescriptorValuePlusOne, struct fd_set * readFS, struct fd_set * writeFS, struct fd_set * exceptFS, struct timeVal * timeout)\n{\n#ifdef _WIN32\n   // Note that you *do* need to pass in the correct value \n   // for (largestFileDescriptorValuePlusOne) for this wrapper\n   // to work; Windows programmers sometimes just pass in a dummy value, \n   // because the current Windows implementation of select() ignores the \n   // parameter, but that's a portability-killing hack and wrong, \n   // so don't do it!\n   if ((largestFileDescriptorValuePlusOne &lt;= 0)&amp;&amp;(timeout != NULL))\n   {\n      // Windows select() will error out on a timeout-only call, so call Sleep() instead.\n      Sleep(((timeout-&gt;tv_sec*1000000)+timeout-&gt;tv_usec)/1000);\n      return 0;\n   }\n#endif\n\n   // in all other cases we just pass through to the normal select() call\n   return select(maxFD, readFS, writeFS, exceptFS, timeout);\n}\n</code></pre>\n\n<p>... then just call proper_select() instead of select() and you're golden.</p>\n"}], "owner": {"reputation": 121, "user_id": 8358955, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/caea907ba96e55150bfaa66230584127?s=128&d=identicon&r=PG&f=1", "display_name": "Gergely Tomcs&#225;nyi", "link": "https://stackoverflow.com/users/8358955/gergely-tomcs%c3%a1nyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1718, "favorite_count": 0, "accepted_answer_id": 45603078, "answer_count": 2, "score": 0, "last_activity_date": 1502373256, "creation_date": 1502315369, "question_id": 45601151, "link": "https://stackoverflow.com/questions/45601151/winsock2-select-returns-wsaeinval-error-10022", "title": "Winsock2 select() returns WSAEINVAL (error 10022)", "body": "<p>I have the given code:</p>\n\n<pre><code>#include &lt;winsock2.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    WSADATA wsaData;\n    if (WSAStartup(MAKEWORD(2, 2), &amp;wsaData) != 0)\n    {\n        std::cout &lt;&lt; \"WSA Initialization failed!\" &lt;&lt; std::endl;\n        WSACleanup();\n    }\n\n    timeval time;\n    time.tv_sec = 1;\n    time.tv_usec = 0;\n    int retval = select(0, NULL, NULL, NULL, &amp;time);\n    if (retval == SOCKET_ERROR)\n    {\n        std::cout &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>It prints <code>10022</code>, which means error WSAEINVAL. According to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms740141(v=vs.85).aspx\" rel=\"nofollow noreferrer\">this page</a>, I can get this error only if:</p>\n\n<blockquote>\n  <p><strong>WSAEINVAL:</strong> The time-out value is not valid, or all three descriptor parameters were null.</p>\n</blockquote>\n\n<p>However, I have seen a few examples calling select() without any <code>FD_SET</code>s. Is it possible somehow? I need to do it in a client-side code to let the program sleep for short periods while it is not connected to the server.</p>\n"}, {"tags": ["c++", "c++11", "templates", "stdmap", "template-templates"], "comments": [{"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 0, "creation_date": 1502315767, "post_id": 45601144, "comment_id": 78161866, "body": "A <a href=\"http://en.cppreference.com/w/cpp/container/map\" rel=\"nofollow noreferrer\"><code>std::map</code></a> has more than two template parameters.  You also have a type <code>Compare</code> and a type <code>Allocator</code>.  You have to specify all, even the defaulted ones."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1502316504, "post_id": 45601144, "comment_id": 78162177, "body": "Note that your code will just work come C++17; the solutions below are all for C++14 and below."}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 5, "last_activity_date": 1502316010, "last_edit_date": 1502316010, "creation_date": 1502315442, "answer_id": 45601170, "question_id": 45601144, "link": "https://stackoverflow.com/questions/45601144/template-function-to-receive-a-generic-map-as-a-parameter/45601170#45601170", "title": "Template function to receive a generic map as a parameter", "body": "<p>Try with</p>\n\n<pre><code>template&lt; template &lt;typename...&gt; class Container, typename ... Ts &gt;\nvoid printMap(Container&lt;int, long, Ts...&gt; inputMap,\n              bool additionalParam = false)\n</code></pre>\n\n<p>The (bigger) problem in your code is that <code>std::map</code> and <code>std::unordered_map</code> are template classes with four (not two) template parameters. The 3rd and the 4th have default value so you can define a <code>std::map</code> object as</p>\n\n<pre><code> std::map&lt;int, long&gt; map1;\n</code></pre>\n\n<p>but, with default parameter, you're defining it as</p>\n\n<pre><code> std::map&lt;int, long, std::less&lt;int&gt;,\n          std::allocator&lt;std::pair&lt;const int, long&gt; &gt;&gt; map1;\n</code></pre>\n\n<p>(ps: or you can make it simple and use <code>auto</code>, as in the Semyon Burov's solution; +1)</p>\n"}, {"comments": [{"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 0, "creation_date": 1502316058, "post_id": 45601263, "comment_id": 78161994, "body": "I added a <code>static_assert</code> to maintain the type constraints."}, {"owner": {"reputation": 982, "user_id": 5314692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772574311ed4da5b181c0134a99dda29?s=128&d=identicon&r=PG&f=1", "display_name": "Semyon Burov", "link": "https://stackoverflow.com/users/5314692/semyon-burov"}, "reply_to_user": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 0, "creation_date": 1502316346, "post_id": 45601263, "comment_id": 78162126, "body": "@HenriMenke Personally, I dont see any problem in ability to print any kind of map instead of <code>Map&lt;int, long int&gt;</code>."}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 0, "creation_date": 1502317450, "post_id": 45601263, "comment_id": 78162516, "body": "Me neither, but it was part of the question that the map is specialized for <code>int</code> and <code>long</code>."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1502326754, "post_id": 45601263, "comment_id": 78164995, "body": "Not a great difference but the test proposed by Henri Menke can be used also to enable/disable (via SFINAE) the function; something like <code>template &lt;typename Map&gt; typename std::enable_if&lt;std::is_same&lt; typename Map::key_type, int &gt;::value &amp;&amp; std::is_same&lt; typename Map::mapped_type, long &gt;::value&gt;::type printMap(const Map&amp; map, bool additionalParam = false)</code>"}, {"owner": {"reputation": 982, "user_id": 5314692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772574311ed4da5b181c0134a99dda29?s=128&d=identicon&r=PG&f=1", "display_name": "Semyon Burov", "link": "https://stackoverflow.com/users/5314692/semyon-burov"}, "edited": false, "score": 0, "creation_date": 1502352340, "post_id": 45601263, "comment_id": 78174383, "body": "Come on... Even if a type of key and value of a map is valueable for topic starter, the assertion definitely shouldn&#39;t be in printing function. May be somewhere else, where there are actual work with elements of map. <code>printMap</code> functionality is limited only by existence of <code>operator&lt;&lt;</code> overload for key and value types of map"}], "tags": [], "owner": {"reputation": 982, "user_id": 5314692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772574311ed4da5b181c0134a99dda29?s=128&d=identicon&r=PG&f=1", "display_name": "Semyon Burov", "link": "https://stackoverflow.com/users/5314692/semyon-burov"}, "is_accepted": false, "score": 5, "last_activity_date": 1502316789, "last_edit_date": 1502316789, "creation_date": 1502315864, "answer_id": 45601263, "question_id": 45601144, "link": "https://stackoverflow.com/questions/45601144/template-function-to-receive-a-generic-map-as-a-parameter/45601263#45601263", "title": "Template function to receive a generic map as a parameter", "body": "<p>Compiler cant deduce template argument if you define it that way.\nTry to use:</p>\n\n<pre><code>template&lt;typename Map&gt;\nvoid printMap(const Map&amp; map, bool additionalParam = false) {\n    for (const auto&amp; p : map)\n        cout&lt;&lt;p.first &lt;&lt;\",\"&lt;&lt; p.second &lt;&lt;std::endl;\n}\n</code></pre>\n\n<p>If you need to check, that <code>Map</code> is exactly <code>Map&lt;int, long int&gt;</code>, then add static assertion to a body of function:</p>\n\n<pre><code>static_assert( std::is_same&lt; typename Map::key_type, int &gt;::value &amp;&amp;\n                       std::is_same&lt; typename Map::mapped_type, long &gt;::value, \"!\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1502317676, "post_id": 45601411, "comment_id": 78162598, "body": "@EdgarRokyan: Oh, yeah, that&#39;s fine, I was just kinda illustrating the point. But, yeah."}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 0, "last_activity_date": 1502317729, "last_edit_date": 1502317729, "creation_date": 1502316681, "answer_id": 45601411, "question_id": 45601144, "link": "https://stackoverflow.com/questions/45601144/template-function-to-receive-a-generic-map-as-a-parameter/45601411#45601411", "title": "Template function to receive a generic map as a parameter", "body": "<p>Try this:</p>\n\n<pre><code>template&lt;class Container&gt;\nvoid printMap(const Container&amp; inputMap)\n{\n    using Key = typename Container::key_type; \n    using Value = typename Container::mapped_type;\n    for (const std::pair&lt;Key,Value&gt; p : inputMap)\n        std::cout &lt;&lt; p.first &lt;&lt; \",\" &lt;&lt; p.second &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>or better yet, just:</p>\n\n<pre><code>template&lt;class Container&gt;\nvoid printMap(const Container&amp; inputMap)\n{\n    for (const auto&amp; p : inputMap)\n        std::cout &lt;&lt; p.first &lt;&lt; \",\"&lt;&lt; p.second &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 895, "user_id": 2110769, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/4MQer.png?s=128&g=1", "display_name": "Andrea Araldo", "link": "https://stackoverflow.com/users/2110769/andrea-araldo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3688, "favorite_count": 0, "answer_count": 3, "score": 7, "last_activity_date": 1502351878, "creation_date": 1502315309, "last_edit_date": 1502351878, "question_id": 45601144, "link": "https://stackoverflow.com/questions/45601144/template-function-to-receive-a-generic-map-as-a-parameter", "title": "Template function to receive a generic map as a parameter", "body": "<p>There may be many case in which we want to perform some operation on a <code>std::map</code> or a <code>std::unordered_map</code> that is exactly the same, independently from the type of the map. Let us consider the following example:</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;unordered_map&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt; template &lt;typename,typename&gt; class Container &gt;\nvoid printMap(Container&lt;int, long&gt; inputMap, bool additionalParam = false)\n{\n    for (const pair&lt;int,long&gt; p : inputMap)\n        cout&lt;&lt;p.first &lt;&lt;\",\"&lt;&lt; p.second &lt;&lt;std::endl;\n}\n\nint main()\n{\nint a = 1;\nlong b = 2;\nmap&lt;int,long&gt; map1;\nmap1.emplace(a,b);\nunordered_map&lt;int,long&gt; map2;\nmap2.emplace(a,b);\nprintMap(map1);\nprintMap(map2);\n\nreturn EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>If I try to compile the example above, I have this:</p>\n\n<pre><code>error: no matching function for call to \u2018printMap(std::map&lt;int, long int&gt;&amp;)\u2019\n</code></pre>\n\n<p>I read about the use of template of template in this <a href=\"https://stackoverflow.com/a/406936/2110769\" title=\"post\">post</a>. What is the right way to do that?</p>\n"}, {"tags": ["c++", "arrays", "templates", "reference", "parameter-passing"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1502314674, "post_id": 45600991, "comment_id": 78161418, "body": "the <code>array</code> in <code>int * array = ...</code> is a pointer, not an array. Your function expects an array."}], "answers": [{"tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": true, "score": 2, "last_activity_date": 1502315547, "last_edit_date": 1502315547, "creation_date": 1502314987, "answer_id": 45601080, "question_id": 45600991, "link": "https://stackoverflow.com/questions/45600991/sending-array-pointer-reference-to-template/45601080#45601080", "title": "Sending Array Pointer/Reference to Template", "body": "<p>Just read the compiler error message:</p>\n\n<pre><code>$ g++ --std=c++14 -o a a.cpp\na.cpp: In function \u2018int main(int, char**)\u2019:\na.cpp:26:42: error: no matching function for call to \u2018ARRAY_MAN(int*&amp;, int*&amp;, int, int, int, int)\u2019\n     ARRAY_MAN(array, array, 3, 34, 56, 10);\n                                          ^\na.cpp:5:6: note: candidate: template&lt;class Var, class T, long unsigned int N, class ... Args&gt; void ARRAY_MAN(Var, T (&amp;)[N], uint32_t, Args ...)\n void ARRAY_MAN(Var variable, T(&amp;)[N], uint32_t numParams, Args... args)\n      ^\na.cpp:5:6: note:   template argument deduction/substitution failed:\na.cpp:26:42: note:   mismatched types \u2018T [N]\u2019 and \u2018int*\u2019\n     ARRAY_MAN(array, array, 3, 34, 56, 10);\n</code></pre>\n\n<p>The second parameter to your function is a reference to fixed-length array, not a reference to a pointer. If your function parameter were a <code>T[]</code>, <code>T[N]</code> or <code>T*</code>, that would all (AFAICR) amount to the same thing - taking a pointer. But fixed-length-array <em>references</em> are special. See also:</p>\n\n<p><a href=\"https://stackoverflow.com/q/2188991/1593077\">What is useful about a reference-to-array parameter?</a></p>\n\n<p>You could say that this is a way to get past the backwards compatibility with C, and have \"bona fide\" array parameters to functions.</p>\n"}], "owner": {"reputation": 1597, "user_id": 1131067, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5zIZe.png?s=128&g=1", "display_name": "ManiAm", "link": "https://stackoverflow.com/users/1131067/maniam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 45601080, "answer_count": 1, "score": 3, "last_activity_date": 1502315547, "creation_date": 1502314529, "last_edit_date": 1502315485, "question_id": 45600991, "link": "https://stackoverflow.com/questions/45600991/sending-array-pointer-reference-to-template", "title": "Sending Array Pointer/Reference to Template", "body": "<p>I wrote a simple program that sends array <code>array[]</code> to a function named ARRAY_MAN, which then modifies the array's contents:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;class Var, class T, std::size_t N, class... Args&gt;\nvoid ARRAY_MAN(Var variable, T(&amp;)[N], uint32_t numParams, Args... args)\n{\n    std::vector&lt;T&gt; arguments{args...};\n\n    if(arguments.size() != numParams)\n        throw std::runtime_error(\"mismatch\");\n\n    for(uint32_t i = 0; i &lt; numParams; ++i)\n        variable[i] = arguments[i];\n}\n\n\nint main(int argc, char* argv[])\n{\n    int array[] = {1,2,3}; // (*)\n\n    // print array before sending\n    for(uint32_t i = 0; i &lt; 3; ++i)\n        std::cout &lt;&lt; array[i] &lt;&lt; \" \";\n    std::cout &lt;&lt; std::endl;\n\n    ARRAY_MAN(array, array, 3, 34, 56, 10);\n\n    // print array after sending\n    for(uint32_t i = 0; i &lt; 3; ++i)\n        std::cout &lt;&lt; array[i] &lt;&lt; \" \";\n    std::cout &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>This compiles and runs. But if I replace the line marked <code>(*)</code> with this line:</p>\n\n<pre><code>int *array = new int(3);\n</code></pre>\n\n<p>I get this error:</p>\n\n<blockquote>\n  <p>no matching function for call to \u2018ARRAY_MAN(int*&amp;, int*&amp;, int, int,\n  int, int)\u2019</p>\n</blockquote>\n\n<p>How can I send this second <code>array</code>  to the ARRAY_MAN function?</p>\n"}, {"tags": ["c++", "qt", "sqlite", "qt5"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1502314546, "post_id": 45600944, "comment_id": 78161361, "body": "How do you choose those five elements?"}, {"owner": {"reputation": 55, "user_id": 7076121, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/522788454597245/picture?type=large", "display_name": "Amanda Zhu", "link": "https://stackoverflow.com/users/7076121/amanda-zhu"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1502315390, "post_id": 45600944, "comment_id": 78161697, "body": "Sorry I forgot to mention that. I sort them by the date column and pick the first 5 most recent ones."}], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1502321676, "last_edit_date": 1502321676, "creation_date": 1502320975, "answer_id": 45602094, "question_id": 45600944, "link": "https://stackoverflow.com/questions/45600944/display-first-few-rows-using-qtsql-qsqltablemodel-with-qtableview/45602094#45602094", "title": "Display first few rows using QtSql.QSqlTableModel with QTableView", "body": "<p>A possible solution would be to use <code>setFilter(\"id limit 5\")</code> but this method places <code>\"Where\"</code> before the string and this causes that when I want to use <code>setSort()</code> it generates a syntax error problem in the order, so I discard it.</p>\n\n<p>For this reason I propose the following solution, which is to create a class that inherits from <code>QSqlTableModel</code> and to override the <code>selectStatement()</code> method.</p>\n\n<p><strong>sqltablemodel.h</strong></p>\n\n<pre><code>#ifndef SQLTABLEMODEL_H\n#define SQLTABLEMODEL_H\n\n#include &lt;QSqlTableModel&gt;\n\nclass SqlTableModel : public QSqlTableModel\n{\n    int mLimit;\n    Q_OBJECT\npublic:\n    SqlTableModel(QObject *parent = Q_NULLPTR, QSqlDatabase db = QSqlDatabase()): QSqlTableModel(parent, db)\n    {\n        mLimit = -1;\n    }\n\n    int limit() const{\n        return mLimit;\n    }\n    void setLimit(int limit){\n        if(limit &gt; 0)\n            mLimit = limit;\n    }\n\nprotected:\n    QString selectStatement() const\n    {\n        QString query = QSqlTableModel::selectStatement();\n        if(mLimit &gt; 0)\n            query += QString(\" LIMIT %1\").arg(mLimit);\n        return query;\n    }\n};\n\n#endif // SQLTABLEMODEL_H\n</code></pre>\n\n<p>Then you change the QSqlTableModel to the SqlTableModel class and you use the <code>setLimit()</code></p>\n\n<p>Example:</p>\n\n<pre><code>SqlTableModel *model = new SqlTableModel();\nmodel-&gt;setTable(\"person\");\nmodel-&gt;setEditStrategy(QSqlTableModel::OnManualSubmit);\nmodel-&gt;setSort(0, Qt::DescendingOrder);\nmodel-&gt;setLimit(5);\nmodel-&gt;select();\n//print query\nqDebug()&lt;&lt;model-&gt;query().lastQuery();\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>\"SELECT \\\"id\\\", \\\"firstname\\\", \\\"lastname\\\" FROM person ORDER BY person.\\\"id\\\" DESC LIMIT 5\"\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6035995"}, "is_accepted": false, "score": 0, "last_activity_date": 1510519602, "creation_date": 1510519602, "answer_id": 47253779, "question_id": 45600944, "link": "https://stackoverflow.com/questions/45600944/display-first-few-rows-using-qtsql-qsqltablemodel-with-qtableview/47253779#47253779", "title": "Display first few rows using QtSql.QSqlTableModel with QTableView", "body": "<p>When you use the setFilter(\"LIMIT 5\") that generate something similar to this:</p>\n\n<pre><code>WHERE (LIMIT 5)\n</code></pre>\n\n<p>Which is totally wrong. Just check it with the selectStatement() and you will see. </p>\n\n<p>Maybe this trick is not nice but shorter, just correct that Sql query with a little SQL-injection:</p>\n\n<pre><code>setFilter(\"1) LIMIT 5;#\")\n</code></pre>\n\n<p>It will generete this:</p>\n\n<pre><code>WHERE (1) LIMIT 5;#)\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 7076121, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/522788454597245/picture?type=large", "display_name": "Amanda Zhu", "link": "https://stackoverflow.com/users/7076121/amanda-zhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 0, "accepted_answer_id": 45602094, "answer_count": 2, "score": 1, "last_activity_date": 1510524595, "creation_date": 1502314331, "last_edit_date": 1510524595, "question_id": 45600944, "link": "https://stackoverflow.com/questions/45600944/display-first-few-rows-using-qtsql-qsqltablemodel-with-qtableview", "title": "Display first few rows using QtSql.QSqlTableModel with QTableView", "body": "<p>I'm trying to display only 5 rows of my table from a SQLite database file which I used QSqlTableModel to gain access and QTableView to display on the UI.</p>\n\n<p>I have looked it up but yet to find a function in either QSqlTableModel or QTableView to accomplish this. Any suggestions?</p>\n"}, {"tags": ["c++", "memory-leaks", "mfc"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502315237, "post_id": 45600905, "comment_id": 78161645, "body": "Is it always 74?"}, {"owner": {"reputation": 1900, "user_id": 1649095, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db2aa9551b0c523fcb92a6e98cfabc3a?s=128&d=identicon&r=PG", "display_name": "Mark Morrisson", "link": "https://stackoverflow.com/users/1649095/mark-morrisson"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502529605, "post_id": 45600905, "comment_id": 78255709, "body": "Yes, it&#39;s always 74. I found out that the memory leak happened in a non-MFC code I imported into my project. Though, I guess _CrtSetDbgFlag is not called before this code executes."}, {"owner": {"reputation": 1900, "user_id": 1649095, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db2aa9551b0c523fcb92a6e98cfabc3a?s=128&d=identicon&r=PG", "display_name": "Mark Morrisson", "link": "https://stackoverflow.com/users/1649095/mark-morrisson"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502556081, "post_id": 45600905, "comment_id": 78263507, "body": "I put these lines in the constructor of the main class of the external code, and the debugger stops when allocating a std::vector on the stack (not on the heap). Very strange..."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502558340, "post_id": 45600905, "comment_id": 78264142, "body": "<b><i>std::vector on the stack</i></b> Remember the vector may be on the stack but it allocates from the heap."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502559068, "post_id": 45600905, "comment_id": 78264360, "body": "Perhaps the leak report is a false positive."}, {"owner": {"reputation": 1900, "user_id": 1649095, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db2aa9551b0c523fcb92a6e98cfabc3a?s=128&d=identicon&r=PG", "display_name": "Mark Morrisson", "link": "https://stackoverflow.com/users/1649095/mark-morrisson"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502571831, "post_id": 45600905, "comment_id": 78267971, "body": "It was a class member of this kind: std::vector&lt;char&gt; so I don&#39;t think it can trigger a memory leak... Anyway, where do you usually put _CrtSetDbgFlag in a MFC app?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502629568, "post_id": 45600905, "comment_id": 78279051, "body": "Is the class a singeleton?"}, {"owner": {"reputation": 1900, "user_id": 1649095, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db2aa9551b0c523fcb92a6e98cfabc3a?s=128&d=identicon&r=PG", "display_name": "Mark Morrisson", "link": "https://stackoverflow.com/users/1649095/mark-morrisson"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502665541, "post_id": 45600905, "comment_id": 78288904, "body": "Well, it&#39;s not technically a singleton but it is instantiated only once, if that was your question."}], "answers": [{"comments": [{"owner": {"reputation": 1900, "user_id": 1649095, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db2aa9551b0c523fcb92a6e98cfabc3a?s=128&d=identicon&r=PG", "display_name": "Mark Morrisson", "link": "https://stackoverflow.com/users/1649095/mark-morrisson"}, "edited": false, "score": 0, "creation_date": 1502352827, "post_id": 45601219, "comment_id": 78174691, "body": "I did that but the debugger didn&#39;t break before the end of the program. But I&#39;m wondering something: since I called _CrtSetDbgFlag in the CWinApp::InitInstance(), the heap instrumentation has been activated too late, don&#39;t you think?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 1900, "user_id": 1649095, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db2aa9551b0c523fcb92a6e98cfabc3a?s=128&d=identicon&r=PG", "display_name": "Mark Morrisson", "link": "https://stackoverflow.com/users/1649095/mark-morrisson"}, "edited": false, "score": 0, "creation_date": 1502387006, "post_id": 45601219, "comment_id": 78200044, "body": "@MarkMorrisson Correct.  Either the 74th allocation has already occurred when you call _CrtSetBreakAlloc, or your program never gets to that 74th allocation."}, {"owner": {"reputation": 1900, "user_id": 1649095, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db2aa9551b0c523fcb92a6e98cfabc3a?s=128&d=identicon&r=PG", "display_name": "Mark Morrisson", "link": "https://stackoverflow.com/users/1649095/mark-morrisson"}, "edited": false, "score": 0, "creation_date": 1502398321, "post_id": 45601219, "comment_id": 78206113, "body": "So, what can I do?"}, {"owner": {"reputation": 1589, "user_id": 5652483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bJiX1.jpg?s=128&g=1", "display_name": "Scott Hutchinson", "link": "https://stackoverflow.com/users/5652483/scott-hutchinson"}, "edited": false, "score": 0, "creation_date": 1534350713, "post_id": 45601219, "comment_id": 90677741, "body": "Please add instructions for calling _CrtSetBreakAlloc(74); when at a breakpoint. I tried the Immediate window, but it said <code>identifier &quot;_CrtSetBreakAlloc&quot; is undefined</code>."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 1589, "user_id": 5652483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bJiX1.jpg?s=128&g=1", "display_name": "Scott Hutchinson", "link": "https://stackoverflow.com/users/5652483/scott-hutchinson"}, "edited": false, "score": 0, "creation_date": 1534391996, "post_id": 45601219, "comment_id": 90690380, "body": "@ScottHutchinson You use the <code>_CrtSetBreakAlloc</code> function to set a break count in your code.  In the debugger, set the <code>_crtBreakAlloc</code> global variable."}, {"owner": {"reputation": 1589, "user_id": 5652483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bJiX1.jpg?s=128&g=1", "display_name": "Scott Hutchinson", "link": "https://stackoverflow.com/users/5652483/scott-hutchinson"}, "edited": false, "score": 0, "creation_date": 1534427158, "post_id": 45601219, "comment_id": 90708481, "body": "Thanks. I found these instructions for how to do it using the Watch window: <a href=\"https://support.microsoft.com/en-us/help/151585/how-to-use-crtbreakalloc-to-debug-a-memory-allocation\" rel=\"nofollow noreferrer\">support.microsoft.com/en-us/help/151585/&hellip;</a>"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 1589, "user_id": 5652483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bJiX1.jpg?s=128&g=1", "display_name": "Scott Hutchinson", "link": "https://stackoverflow.com/users/5652483/scott-hutchinson"}, "edited": false, "score": 0, "creation_date": 1534430498, "post_id": 45601219, "comment_id": 90710890, "body": "@ScottHutchinson I&#39;ve updated my answer to include your useful support article link."}, {"owner": {"reputation": 1589, "user_id": 5652483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bJiX1.jpg?s=128&g=1", "display_name": "Scott Hutchinson", "link": "https://stackoverflow.com/users/5652483/scott-hutchinson"}, "edited": false, "score": 0, "creation_date": 1534447873, "post_id": 45601219, "comment_id": 90719942, "body": "Sadly, I still cannot make it work: Whatever I type in the Watch window, I just get a message like &quot;\t\t{,,msvcr40d.dll}*__p__crtBreakAlloc()\tModule &quot;msvcr40d.dll&quot; not found.\t Even when I type {,,msvcr110d.dll}*__p__crtBreakAlloc() even though I can see that dll file in the debug folder, I still get Module &quot;msvcr110d.dll&quot; not found."}, {"owner": {"reputation": 1589, "user_id": 5652483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bJiX1.jpg?s=128&g=1", "display_name": "Scott Hutchinson", "link": "https://stackoverflow.com/users/5652483/scott-hutchinson"}, "edited": false, "score": 0, "creation_date": 1534448501, "post_id": 45601219, "comment_id": 90720173, "body": "I am debugging a Multi-Threaded Debug DLL (/MDd), but I get this for step 1a: _crtBreakAlloc\tidentifier &quot;_crtBreakAlloc&quot; is undefined."}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 2, "last_activity_date": 1534430467, "last_edit_date": 1534430467, "creation_date": 1502315626, "answer_id": 45601219, "question_id": 45600905, "link": "https://stackoverflow.com/questions/45600905/detecting-memory-leaks-in-mfc-application/45601219#45601219", "title": "Detecting memory leaks in MFC application", "body": "<p>Step into your app to start debugging (that's step, not run, so you'll be stopped in the debugger before anything in your program has run), then set <code>_crtBreakAlloc</code> to the allocation you want to stop at (74).  Then run and you should get a break on the 74th allocation.  <a href=\"https://msdn.microsoft.com/en-us/library/974tc9t1.aspx#BKMK_Track_Heap_Allocation_Requests\" rel=\"nofollow noreferrer\">CRT Debug Heap Details</a> has information on this variable.</p>\n\n<p><a href=\"https://support.microsoft.com/en-us/help/151585/how-to-use-crtbreakalloc-to-debug-a-memory-allocation\" rel=\"nofollow noreferrer\">This Microsoft support article</a> also lists instructions for using <code>_crtBreakAlloc</code> in the debugger.</p>\n"}, {"comments": [{"owner": {"reputation": 1900, "user_id": 1649095, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db2aa9551b0c523fcb92a6e98cfabc3a?s=128&d=identicon&r=PG", "display_name": "Mark Morrisson", "link": "https://stackoverflow.com/users/1649095/mark-morrisson"}, "edited": false, "score": 0, "creation_date": 1502398306, "post_id": 45608428, "comment_id": 78206103, "body": "Since I&#39;m including in my project many external files, I added these lines at the end of stdafx.h (which is normally included by every source file) but it didn&#39;t work better."}, {"owner": {"reputation": 410, "user_id": 2608530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/4ctKm.png?s=128&g=1", "display_name": "rtischer8277", "link": "https://stackoverflow.com/users/2608530/rtischer8277"}, "edited": false, "score": 0, "creation_date": 1569607920, "post_id": 45608428, "comment_id": 102665623, "body": "You cannot add the <code>#define new DEBUG_NEW</code> to the bottom of the <code>stdafx.h</code> file. It must be in each <code>.cpp</code> file."}], "tags": [], "owner": {"reputation": 74, "user_id": 8418327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b73277918b4aeb765d53d7ea3d1e95b7?s=128&d=identicon&r=PG&f=1", "display_name": "Ovidiu Cucu", "link": "https://stackoverflow.com/users/8418327/ovidiu-cucu"}, "is_accepted": false, "score": 1, "last_activity_date": 1502353986, "creation_date": 1502353986, "answer_id": 45608428, "question_id": 45600905, "link": "https://stackoverflow.com/questions/45600905/detecting-memory-leaks-in-mfc-application/45608428#45608428", "title": "Detecting memory leaks in MFC application", "body": "<p>Writing this code</p>\n\n<pre><code>#ifdef _DEBUG\n#define new DEBUG_NEW\n#endif\n</code></pre>\n\n<p>in top of each implementation (.CPP) file, can help you to detect the source of memory leaks.\nSee also: <a href=\"http://codexpert.ro/blog/2012/12/25/how-to-detect-memory-leaks-in-mfc/\" rel=\"nofollow noreferrer\">How to detect memory leaks in MFC</a>.</p>\n"}], "owner": {"reputation": 1900, "user_id": 1649095, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db2aa9551b0c523fcb92a6e98cfabc3a?s=128&d=identicon&r=PG", "display_name": "Mark Morrisson", "link": "https://stackoverflow.com/users/1649095/mark-morrisson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3757, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1534430467, "creation_date": 1502314120, "question_id": 45600905, "link": "https://stackoverflow.com/questions/45600905/detecting-memory-leaks-in-mfc-application", "title": "Detecting memory leaks in MFC application", "body": "<p>I'm writing an MFC app using Visual 2017 and when the application exits in debug mode, I get this:</p>\n\n<blockquote>\n  <p>Detected memory leaks! Dumping objects -> {74} normal block at\n  0x00000230E49A7000, 16 bytes long.  Data: &lt;0   0           > 30 00 97\n  E4 30 02 00 00 00 00 00 00 00 00 00 00  Object dump complete.</p>\n</blockquote>\n\n<p>So, in order to know which function is causing the leak, I've added these lines in stdafx.h:</p>\n\n<pre><code>#define _CRTDBG_MAP_ALLOC\n#include &lt;stdlib.h&gt;\n#include &lt;crtdbg.h&gt;\n</code></pre>\n\n<p>And these lines in CWinApp::InitInstance():</p>\n\n<pre><code>_CrtSetDbgFlag(_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF);\n_CrtSetBreakAlloc(74);\n</code></pre>\n\n<p>Though, it did not work. I suspect that the 74th memory allocation number has been made before my code is executed. Which method could I overload to be certain to be called first?</p>\n"}, {"tags": ["c++", "visual-studio-2015"], "answers": [{"tags": [], "owner": {"reputation": 57, "user_id": 2394721, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/36385c8505d1ed7d839102c91e330e92?s=128&d=identicon&r=PG", "display_name": "Tim P", "link": "https://stackoverflow.com/users/2394721/tim-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1502337465, "creation_date": 1502337465, "answer_id": 45604199, "question_id": 45600706, "link": "https://stackoverflow.com/questions/45600706/visual-studio-2015-reference-by-symbolic-directory-location/45604199#45604199", "title": "Visual Studio 2015 - Reference by Symbolic Directory Location", "body": "<p>I decided to create a QT Class Library to contain the schema specific functions.  </p>\n"}], "owner": {"reputation": 57, "user_id": 2394721, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/36385c8505d1ed7d839102c91e330e92?s=128&d=identicon&r=PG", "display_name": "Tim P", "link": "https://stackoverflow.com/users/2394721/tim-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1502337465, "creation_date": 1502313109, "question_id": 45600706, "link": "https://stackoverflow.com/questions/45600706/visual-studio-2015-reference-by-symbolic-directory-location", "title": "Visual Studio 2015 - Reference by Symbolic Directory Location", "body": "<p>A Visual Studio 2015 for a database project with varying schemas.  Can you please suggest a way in which I can include files from a directory referenced via an environment variable.  VS2015 - the .H files may be covered by referencing the file by environment variable  similar to $(QTDIR) from within the VS IDE. </p>\n\n<p>How to handle the matching .CPP files other than importing via a directory-specific class library?</p>\n\n<p>-TPeer</p>\n"}, {"tags": ["c++", "eigen"], "comments": [{"owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "edited": false, "score": 3, "creation_date": 1502313650, "post_id": 45600683, "comment_id": 78160963, "body": "Seems to work fine for me. I can&#39;t replicate your error. Can you post a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example?"}, {"owner": {"reputation": 9, "user_id": 7232224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c15867e19fb74f897ea4a9a8e122f25b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Hamel", "link": "https://stackoverflow.com/users/7232224/jack-hamel"}, "reply_to_user": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "edited": false, "score": 0, "creation_date": 1502377432, "post_id": 45600683, "comment_id": 78193758, "body": "I am also having trouble replicating it.  It seems to only be failing in one case and working in others.  I have two ways of running this code.  One is actually running the entire program that this belongs to and I get the normalization error.  I can also run it through a Boost test case and the normalization works fine.  I will have to play around some more before I can give you anymore information.  Thanks for trying though."}, {"owner": {"reputation": 9, "user_id": 7232224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c15867e19fb74f897ea4a9a8e122f25b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Hamel", "link": "https://stackoverflow.com/users/7232224/jack-hamel"}, "reply_to_user": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "edited": false, "score": 1, "creation_date": 1502378088, "post_id": 45600683, "comment_id": 78194280, "body": "Turns out it is an error due to the way I construct the class.  In the test case I was using the normal constructor for a pulse, but in the whole program I use a default constructor that doesn&#39;t use the normalization in the initialization line. It is now fixed."}], "owner": {"reputation": 9, "user_id": 7232224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c15867e19fb74f897ea4a9a8e122f25b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Hamel", "link": "https://stackoverflow.com/users/7232224/jack-hamel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 262, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502313002, "creation_date": 1502313002, "question_id": 45600683, "link": "https://stackoverflow.com/questions/45600683/eigen-normalized-not-functioning", "title": "eigen normalized() not functioning", "body": "<p>I have a class called Pulse that looks like the following plus some irrelevant functions: </p>\n\n<pre><code>Pulse::Pulse(const double amplitude,\n         const double delay,\n         const double width,\n         const double freq,\n         const Eigen::Vector3d &amp;wavevector,\n         const Eigen::Vector3d &amp;field_orientation)\n: amplitude(amplitude),\n  delay(delay),\n  width(width),\n  freq(freq),\n  wavevector(wavevector),\n  field_orientation(field_orientation.normalized())\n{\n}\n\nEigen::Vector3d Pulse::operator()(const Eigen::Vector3d &amp;r,\n                                  const double t) const\n{\n  const double arg = wavevector.dot(r) - freq * (t - delay);\n  return (amplitude * 2 * field_orientation * gaussian(arg / width) * cos(arg));\n}\n</code></pre>\n\n<p>I call <code>operator()</code> and expect it to return what it clearly should return, however I am getting values off by a factor of 1 / norm(field_orientation).  </p>\n\n<p>Through my testing I have discovered that in the initialization line of the class <code>field_orientation</code> is not being properly normalized.  When I replace <code>field_orientation</code> in the return statement of the function with <code>field_orientation.normalized()</code>, I am getting the proper values.  </p>\n\n<p>Any ideas as to why the vector is not being normalized as is?</p>\n"}, {"tags": ["c++", "properties", "unnamed-class"], "comments": [{"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 0, "creation_date": 1502313193, "post_id": 45600665, "comment_id": 78160785, "body": "You already have a <code>StaticLibrary</code> datamember in <code>Environment</code>.  What prevents you from making that public?"}, {"owner": {"reputation": 10386, "user_id": 365338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9204e001a231dfbf8e55a8a68ec95699?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/365338/zak"}, "reply_to_user": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 0, "creation_date": 1502313219, "post_id": 45600665, "comment_id": 78160796, "body": "The constraint that says I cannot."}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 0, "creation_date": 1502313420, "post_id": 45600665, "comment_id": 78160883, "body": "But exposing a pointer to the private datamember is fine?  I&#39;m sorry, but this constraint is completely stupid."}, {"owner": {"reputation": 10386, "user_id": 365338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9204e001a231dfbf8e55a8a68ec95699?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/365338/zak"}, "reply_to_user": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 0, "creation_date": 1502313508, "post_id": 45600665, "comment_id": 78160916, "body": "@HenriMenke The code above is the smallest sample I could create to demonstrate the compiler error. The larger body of code dictates the constraint. How stupid it may, or may not, be is not the point of this post."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1502313982, "post_id": 45600665, "comment_id": 78161098, "body": "Can you add a <code>int func() {sl-&gt;func();}</code> to the anonymous class? Can you have the anonymous class <i>inherit</i> from <code>Environment</code>? Without knowing where the constraint comes from it\u2019s hard to answer the question."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1502314952, "post_id": 45600665, "comment_id": 78161529, "body": "Could your syntax change to <code>env.bar-&gt;func()</code>?"}, {"owner": {"reputation": 10386, "user_id": 365338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9204e001a231dfbf8e55a8a68ec95699?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/365338/zak"}, "edited": false, "score": 0, "creation_date": 1502315199, "post_id": 45600665, "comment_id": 78161634, "body": "No, the syntax is necessary to match an externally defined API."}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 0, "creation_date": 1502315340, "post_id": 45600665, "comment_id": 78161675, "body": "Unrelated:  You don&#39;t need to declare functions inside the class body <code>inline</code>.  They are <code>inline</code> by default."}], "answers": [{"comments": [{"owner": {"reputation": 10386, "user_id": 365338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9204e001a231dfbf8e55a8a68ec95699?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/365338/zak"}, "edited": false, "score": 0, "creation_date": 1502314039, "post_id": 45600861, "comment_id": 78161127, "body": "As stated as my #1 constraint, I cannot have a reference to <code>StaticLibrary</code> as a public member in <code>Environment</code>."}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "reply_to_user": {"reputation": 10386, "user_id": 365338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9204e001a231dfbf8e55a8a68ec95699?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/365338/zak"}, "edited": false, "score": 0, "creation_date": 1502314158, "post_id": 45600861, "comment_id": 78161174, "body": "@Zak This was not in the question.  According to the question &#187;I cannot put StaticLibrary directly as a public member&#171; which is perfectly fulfilled here.  Please make your question more concise."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1502314171, "post_id": 45600861, "comment_id": 78161183, "body": "You can\u2019t have  reference in addition to not having it a direct member? You didn\u2019t say that part."}, {"owner": {"reputation": 10386, "user_id": 365338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9204e001a231dfbf8e55a8a68ec95699?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/365338/zak"}, "edited": false, "score": 0, "creation_date": 1502314495, "post_id": 45600861, "comment_id": 78161342, "body": "The syntax is paramount. I cannot use <code>env.bar().func()</code>."}, {"owner": {"reputation": 10386, "user_id": 365338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9204e001a231dfbf8e55a8a68ec95699?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/365338/zak"}, "edited": false, "score": 0, "creation_date": 1502314681, "post_id": 45600861, "comment_id": 78161422, "body": "I highlighted my actual question. I will not be able to modify the data structure, I need help forcing syntax. Suggestions on how to modify the data structure are unhelpful."}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "reply_to_user": {"reputation": 10386, "user_id": 365338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9204e001a231dfbf8e55a8a68ec95699?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/365338/zak"}, "edited": false, "score": 0, "creation_date": 1502314820, "post_id": 45600861, "comment_id": 78161488, "body": "@Zak Then it is not possible.  The <code>.</code> operator does not apply any conversions before lookup.  So either <code>func()</code> is a member of <code>bar</code> or you have to make <code>bar</code> a reference (or public member) to <code>StaticLibrary</code>.  Or, of course, you call the conversion explicitly as in <code>static_cast&lt;StaticLibrary&gt;(env.bar).func();</code>."}, {"owner": {"reputation": 10386, "user_id": 365338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9204e001a231dfbf8e55a8a68ec95699?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/365338/zak"}, "edited": false, "score": 0, "creation_date": 1502314850, "post_id": 45600861, "comment_id": 78161496, "body": "Can you site your source for, &quot;there is no way around replicating the interface of StaticLibrary&quot;? This may be the answer. Also, can you please remove the top two code bodies, so this &quot;answer&quot; would be more obvious?"}], "tags": [], "owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "is_accepted": false, "score": 0, "last_activity_date": 1502315273, "last_edit_date": 1502315273, "creation_date": 1502313910, "answer_id": 45600861, "question_id": 45600665, "link": "https://stackoverflow.com/questions/45600665/c-utilizing-dot-syntax-to-call-function-on-property-unnamed-class/45600861#45600861", "title": "C++ Utilizing dot syntax to call function on &quot;Property&quot; (unnamed class)", "body": "<p>For the nested class there is no way around replicating the interface of <code>StaticLibrary</code>, because the member access operator (<code>.</code>) does not apply any conversions.  So to call <code>func()</code> on <code>bar</code> you need to have a member function <code>func()</code> in <code>bar</code>.  It does not suffice if <code>bar</code> converts to something that has a member function <code>func()</code> (because this could be ambiguous).</p>\n\n<p>That is to say, you could wrap the interface of <code>StaticLibrary</code> inside <code>bar</code> by having a delegating member function <code>int func() { return sl.func(); }</code> or you make <code>bar</code> a public data member of type <code>StaticLibrary</code> (which was forbidden by your constraint).</p>\n\n<p>Here I gave the nested class a name because it makes the errors more readable and I store a reference rather than a pointer because I like value semantics.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass StaticLibrary {\npublic:\n  int func() {\n    std::cout &lt;&lt; \"called \" &lt;&lt; __FUNCTION__ &lt;&lt; std::endl;\n    return 0;\n  }\n};\n\nclass Environment {\nprivate:\n  StaticLibrary sl;\npublic:\n\n  class Bar {\n    friend Environment;\n    StaticLibrary&amp; sl;\n  public:\n    explicit Bar(StaticLibrary&amp; _sl) : sl(_sl) {};\n    operator StaticLibrary&amp; () { return sl; }\n    int func() { return sl.func(); }\n  } bar;\n\n  Environment() : sl{}, bar{sl} {};\n\n  int foo() {\n    std::cout &lt;&lt; \"called \" &lt;&lt; __FUNCTION__ &lt;&lt; std::endl;\n    return 0;\n  }\n};\n\nint main (void) {\n    Environment env;\n    env.foo();\n\n    // Works\n    StaticLibrary sl = env.bar;\n    sl.func();\n\n    // Works, but the syntax is too cumbersome. Can the static cast be inferred somehow?\n    static_cast&lt;StaticLibrary&gt;(env.bar).func();\n\n    // unnamedDotSyntax.cpp:48:13: error: \u2018class Environment::&lt;anonymous&gt;\u2019 has no member named \u2018func\u2019\n    //      env.bar.func();\n    env.bar.func();\n}\n</code></pre>\n"}], "owner": {"reputation": 10386, "user_id": 365338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9204e001a231dfbf8e55a8a68ec95699?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/365338/zak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 659, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1502315273, "creation_date": 1502312926, "last_edit_date": 1502314317, "question_id": 45600665, "link": "https://stackoverflow.com/questions/45600665/c-utilizing-dot-syntax-to-call-function-on-property-unnamed-class", "title": "C++ Utilizing dot syntax to call function on &quot;Property&quot; (unnamed class)", "body": "<h3>Goal</h3>\n\n<p>My objective is to call <code>StaticLibrary::func()</code> from the property (unnamed class) on Environment using the dot syntax.</p>\n\n<p>For example:</p>\n\n<p><code>env.bar.func();</code></p>\n\n<p>I have been able to achieve <code>static_cast&lt;StaticLibrary&gt;(env.bar).func();</code>, which is close, but the syntax is still too cumbersome.</p>\n\n<h3>Question</h3>\n\n<p><strong>Can the static cast be inferred, or can I overload some operator to get the desired syntax?</strong></p>\n\n<blockquote>\n  <p><strong><em>NOTE:</strong> I have a constraint that I cannot put <code>StaticLibrary</code> directly as a public member of the <code>Environment</code> class (object, reference or pointer).</em></p>\n</blockquote>\n\n<h3>Error</h3>\n\n<p>I currently get the error (<em>which I understand, but pasted here for completeness</em>):</p>\n\n<pre><code>unnamedDotSyntax.cpp: In function \u2018int main()\u2019:\nunnamedDotSyntax.cpp:48:13: error: \u2018class Environment::&lt;anonymous&gt;\u2019 has no member named \u2018func\u2019\n     env.bar.func();\n             ^\n</code></pre>\n\n<h3>Code</h3>\n\n<p><em>The example below is the most distilled version of the code I can offer.</em></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass StaticLibrary {\n  public:\n    int func (void) {\n        std::cout &lt;&lt; \"called \" &lt;&lt; __FUNCTION__ &lt;&lt; std::endl;\n    }\n};\n\nclass Environment {\n  public:\n    Environment (void) {\n        bar.sl = &amp;sl;\n    }\n\n    inline\n    int foo (void) {\n        std::cout &lt;&lt; \"called \" &lt;&lt; __FUNCTION__ &lt;&lt; std::endl;\n    }\n\n    class {\n        friend Environment;\n      public:\n        operator StaticLibrary &amp; (void) {\n            return *sl;\n        }\n      private:\n        StaticLibrary * sl;\n    } bar;\n\n  private:\n    StaticLibrary sl;\n};\n\nint main (void) {\n    Environment env;\n    env.foo();\n\n    // Works\n    StaticLibrary sl = env.bar;\n    sl.func();\n\n    // Works, but the syntax is too cumbersome. Can the static cast be inferred somehow?\n    static_cast&lt;StaticLibrary&gt;(env.bar).func();\n\n    // unnamedDotSyntax.cpp:48:13: error: \u2018class Environment::&lt;anonymous&gt;\u2019 has no member named \u2018func\u2019\n    //      env.bar.func();\n    env.bar.func();\n}\n</code></pre>\n\n<blockquote>\n  <p><strong><em>NOTE:</strong> This must be GCC compatible not Microsoft VC++</em></p>\n</blockquote>\n"}, {"tags": ["c++", "multithreading", "do-while"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1502312209, "post_id": 45600460, "comment_id": 78160349, "body": "You need to either properly implement multithreaded app or make it event driven. Neither one is simple."}, {"owner": {"reputation": 1167, "user_id": 932786, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/49bf3465e918ef75eb511f089b833bb1?s=128&d=identicon&r=PG", "display_name": "Salahuddin", "link": "https://stackoverflow.com/users/932786/salahuddin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1502313133, "post_id": 45600460, "comment_id": 78160766, "body": "Thanks Slava for the your quick answer. I thought there may be some other simpler way. I&#39;ll try to go with one of those. Which one do you suggest? and why?"}], "answers": [{"comments": [{"owner": {"reputation": 1167, "user_id": 932786, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/49bf3465e918ef75eb511f089b833bb1?s=128&d=identicon&r=PG", "display_name": "Salahuddin", "link": "https://stackoverflow.com/users/932786/salahuddin"}, "edited": false, "score": 0, "creation_date": 1502316433, "post_id": 45600852, "comment_id": 78162156, "body": "Many many thanks for your answer and for the whole time it took to be written. I&#39;ll go through slowly and will look for a good tutorial for event-driven model. Thanks"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1502313844, "creation_date": 1502313844, "answer_id": 45600852, "question_id": 45600460, "link": "https://stackoverflow.com/questions/45600460/check-for-a-condition-periodically-without-blocking/45600852#45600852", "title": "Check for a condition periodically without blocking", "body": "<p>You probably want an event-driven model.</p>\n\n<p>In an event-driven model, your main engine is a tight loop that reads events, updates state, then waits for more events.</p>\n\n<p>Some events are time based, others are input based.</p>\n\n<p>The only code that is permitted to block your main thread is the main loop, where it blocks until a timer hits or a new event arrives.</p>\n\n<p>It might very roughly look like this:</p>\n\n<pre><code>using namespace std::literals::chrono_literals;\nvoid main_loop( engine_state* state ) {\n  bool bContinue = true;\n  while(bContinue) {\n    update_ui(state);\n    while(bContinue &amp;&amp; process_message(state, 10ms)) {\n      bContinue = update_state(state);\n    }\n    bContinue = update_state(state);\n  }\n}\n</code></pre>\n\n<p><code>update_ui</code> provides feedback to the user, if required.</p>\n\n<p><code>process_message(state, duration)</code> looks for a message to process, or for 10ms to occur.  If it sees a message (like <code>goToPosition</code>), it modifies <em>state</em> to reflect that message (for example, it might store the desired destionation).  It does not block, nor does it take lots of time.</p>\n\n<p>If no message is recived in <code>duration</code> time, it returns anyhow without modifying <code>state</code> (I'm assuming you want things to happen even if no new input/messages occur).</p>\n\n<p><code>update_state</code> takes the <code>state</code> and evolves it.  <code>state</code> might have a last updated time stamp; <code>update_state</code> would then make the \"physics\" reflect the time since last one.  Or do any other updates.</p>\n\n<p>The point is that <code>process_message</code> doesn't do work on the state (it encodes desires), while <code>update_state</code> advances \"reality\".</p>\n\n<p>It returns <code>false</code> if the main loop should exit.</p>\n\n<p><code>update_state</code> is called once for every <code>process_message</code> call.</p>\n\n<p><code>updateClips</code> being called every 500ms can be encoded as a repeated automatic event in the queue of messages <code>process_message</code> reads.</p>\n\n<pre><code>void process_message( engine_state* state, std::chrono::milliseconds ms ) {\n  auto start = std::chrono::high_resolution_clock::now();\n  while (start + ms &gt; std::chrono::high_resolution_clock::now()) {\n    // engine_state::delayed is a priority_queue of timestamp/action\n    // ordered by timestamp:\n    while (!state-&gt;delayed.empty()) {\n      auto stamp = state-&gt;delayed.front().stamp;\n      if (stamp &gt;= std::chrono::high_resolution_clock::now()) {\n        auto f = state-&gt;queue.front().action;\n        state-&gt;queue.pop();\n        f(stamp, state);\n      } else {\n        break;\n      }\n    }\n    //engine_state.queue is std::queue&lt;std::function&lt;void(engine_state*)&gt;&gt;\n    if (!state-&gt;queue.empty()) {\n      auto f = state-&gt;queue.front();\n      state-&gt;queue.pop();\n      f(state);\n    }\n  }\n}\n</code></pre>\n\n<p>The repeated polling is implemented as a delayed action that, as its first operation, inserts a new delayed action due 500ms after this one.  We pass in the time the action was due to run.</p>\n\n<p>\"Normal\" events can be instead pushed into the normal action <code>queue</code>, which is a sequence of <code>std::function&lt;void(engine_state*)&gt;</code> and executed in order.</p>\n\n<p>If there is nothing to do, the above function busy-waits for <code>ms</code> time and then returns.  In some cases, we might want to go to sleep instead.</p>\n\n<p>This is just a sketch of an event loop.  There are many, many on the internet.</p>\n"}], "owner": {"reputation": 1167, "user_id": 932786, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/49bf3465e918ef75eb511f089b833bb1?s=128&d=identicon&r=PG", "display_name": "Salahuddin", "link": "https://stackoverflow.com/users/932786/salahuddin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 45600852, "answer_count": 1, "score": 0, "last_activity_date": 1502313844, "creation_date": 1502311932, "question_id": 45600460, "link": "https://stackoverflow.com/questions/45600460/check-for-a-condition-periodically-without-blocking", "title": "Check for a condition periodically without blocking", "body": "<p>In my project, function <code>clipsUpdate</code> reads some facts which are set by CLIPS without the interference of my C++ code. Based on the read facts, clipsUpdate calls the needed function. </p>\n\n<pre><code>void updateClips(void)\n{\n     // read clipsAction\n\n     switch(clipsAction)\n     {\n         case ActMove:\n                 goToPosition (0, 0, clipsActionArg);\n                 break;\n     }\n}\n</code></pre>\n\n<p>In <code>goToPosition</code> function, a message is sent to the vehicle to move to the specified position and then a while loop is used to wait until the vehicle reaches the position.</p>\n\n<pre><code>void goToPosition(float north, float east, float down)\n{\n     // Prepare and send the message\n\n     do \n     {\n          // Read new location information.\n     }while(/*Specified position reached?*/)\n}\n</code></pre>\n\n<p>The problem is that <code>updateClips</code> should be called every 500 ms and when the <code>goToPosition</code> function is called, the execution is blocked until the target location is reached. During this waiting period, something may happen that requires the vehicle to stop. Therefore, updateClips should be called every 500 ms no matter what, and it should be able to stop executing <code>goToPosition</code> if it's running.</p>\n\n<p>I tried using threads as following, but it didn't work successfully with me and it was difficult for me to debug. I think it can be done with a simpler and cleaner way.</p>\n\n<pre><code>case ActMove:\n      std::thread t1(goToPosition, 0, 0, clipsActionArg);\n      t1.detach();\n      break;\n</code></pre>\n\n<p>My question is, how can I check if the target location is reached without blocking the execution, i.e., without using <code>while</code>?</p>\n"}, {"tags": ["c++", "header"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1502314761, "post_id": 45600415, "comment_id": 78161457, "body": "This doesn&#39;t address the question, but use <code>#include &lt;...&gt;</code> for system headers and <code>#include &quot;...&quot;</code> for your own headers."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1502315282, "post_id": 45600415, "comment_id": 78161661, "body": "@Pete Becker - I don&#39;t disagree, but you should explain <i>why</i>. Also, if you tell your compiler about your own include dirs then using &quot;&lt;&gt;&quot; can be just fine.. In any case; your comment doesn&#39;t explain the <i>difference</i> between the two forms, but just says &quot;do this&quot; which is not really as helpful as it could be."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1502315351, "post_id": 45600415, "comment_id": 78161677, "body": "@JesperJuhl -- I would agree if that had been an answer. But it&#39;s not, and since it isn&#39;t intended to address the question, it&#39;s short, and not intended to start a discussion."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1502315608, "post_id": 45600415, "comment_id": 78161795, "body": "@Pete Becker - fair enough. I can accept that :-)"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 8293889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b89df5bdf6f52b27e57a777a2a138ee?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/8293889/daniel"}, "edited": false, "score": 1, "creation_date": 1502364657, "post_id": 45600538, "comment_id": 78183114, "body": "I can see your point, it makes sense, thanks.  I also did some more research on it, I guess the object files and the program would increase because of it.  I found this video useful showing the compilation and linkage, gotta skip to the middle though: <a href=\"https://www.youtube.com/watch?v=5UMHbzZGQuE&amp;index=17&amp;list=PLggLP4f-rq02gmlePH-vQJ8PF6hyf08CN\" rel=\"nofollow noreferrer\">youtube.com/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 3, "last_activity_date": 1502313986, "last_edit_date": 1502313986, "creation_date": 1502312290, "answer_id": 45600538, "question_id": 45600415, "link": "https://stackoverflow.com/questions/45600415/c-extra-header-file/45600538#45600538", "title": "c++ &quot;extra&quot; header file", "body": "<p>The potential negative effect is one of compile time. If someone includes your header who doesn't need the header it drags in, the compile time of that compilation unit will increase for no good reason.</p>\n\n<p>For toy projects or small projects (of a few hundred files) that compile in a few seconds, this makes no real difference.\nBut when you work on projects that are millions of lines of code spread across hundreds of thousands of files, that already take a significant fraction of an hour to compile, and you add an include to a header that's included by 12000 other files because you could not be bothered to explicitly add it to the 120 files that actually needed it (but just happened to include the common header) - then you are not going to be popular, since you just increased everyones average build time by several minutes.</p>\n\n<p>There is also the risk (in bad code bases) that the header you (unnessesarily) drag in to other files may redefine stuff that breaks things for that source file that didn't even need the other header in the first place.</p>\n\n<p>For the above reasons, <em>I</em> believe that headers should only include what they <em>really</em> need themselves and cannot forward declare. Implementation files should <em>only</em> include headers they <em>really</em> need (and include their own headers <em>first</em> to make sure they are self contained).</p>\n\n<p>Hope that answers your question.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1502314257, "post_id": 45600588, "comment_id": 78161224, "body": "Include guards don&#39;t help you when the header is included in 10000 files but the extra include you added to the header was only needed by 10. All 10000 source files now need to pay the cost of compiling that extra header (and that adds up to real time - minutes) quickly - for big code bases)."}], "tags": [], "owner": {"reputation": 684, "user_id": 7117084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uJwkv.jpg?s=128&g=1", "display_name": "9Breaker", "link": "https://stackoverflow.com/users/7117084/9breaker"}, "is_accepted": false, "score": 1, "last_activity_date": 1502319313, "last_edit_date": 1502319313, "creation_date": 1502312555, "answer_id": 45600588, "question_id": 45600415, "link": "https://stackoverflow.com/questions/45600415/c-extra-header-file/45600588#45600588", "title": "c++ &quot;extra&quot; header file", "body": "<p>\"The question is about including an unnecessary header to avoid calling it multiple times in sub-files.\" </p>\n\n<p>Include guards will solve the feasible part of this problem of including multiple headers in the same file. Include guards will cut down the unnecessary includes to a certain extent. See the link below:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8020113/c-include-guards\">C++ #include guards</a></p>\n\n<p>An include guard is made by adding the following to your header file:</p>\n\n<pre><code>//at the very top of the header\n#ifndef NAMEOFHEADER_H\n#define NAMEOFHEADER_H\n\n// header info\n\n//at the very last line of the header\n#endif\n</code></pre>\n\n<p>This will keep you from accumulating the same header file multiple times in another .h or .cpp file. </p>\n\n<p>And as was stated in the comment below, even if every header has include guards you can still end up with information not even needed for your file being defined by the compiler during its preprocessor directives. This is bound to happen with the chain of includes across multiple files. </p>\n"}], "owner": {"reputation": 33, "user_id": 8293889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b89df5bdf6f52b27e57a777a2a138ee?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/8293889/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 45600538, "answer_count": 2, "score": 3, "last_activity_date": 1502361038, "creation_date": 1502311801, "last_edit_date": 1502361038, "question_id": 45600415, "link": "https://stackoverflow.com/questions/45600415/c-extra-header-file", "title": "c++ &quot;extra&quot; header file", "body": "<p>The question is about including an unnecessary header to avoid calling it multiple times in sub-files.\nHere's the scenario, I have a few files:</p>\n\n<pre><code>srlogger.h\n\nsrinterface.h\n\nsrinterface.cc\n#include &lt;srinterface.h&gt;\n#include \"srlogger.h\"\n\nsrbinhttp.h\n#include \"srinterface.h\"\n\nsrbinhttp.cc\n#include &lt;srbinhttp.h&gt;\n#include \"srlogger.h\"\n\nsrsocket.h\n#include \"srinterface.h\"\n\nsrsocket.cc\n#include &lt;srsocket.h&gt;\n#include \"srlogger.h\"\n\nsrhttp.h\n#include \"srinterface.h\"\n\nsrhttp.cc\n#include &lt;srhttp.h&gt;\n#include \"srlogger.h\"\n</code></pre>\n\n<p>Now, what I want to do is to remove the <code>#include \"srlogger.h\"</code> from all .cc files shown, and instead include it to the <code>srinterface.h</code> file as:</p>\n\n<pre><code>srinterface.h\n#include \"srlogger.h\"\n</code></pre>\n\n<p>Since all of the .cc respective header files include the srinterface.h the srlogger.h would be covered.\nNow, why would this be bad?</p>\n\n<p>Please do not say that you should only include the necessary headers to compile and nothing extra, this is not enough explanation.</p>\n\n<p>I want to know in real examples why this would be bad.</p>\n\n<p>Oh if someone removes the <code>#include \"srlogger.h\"</code> from the <code>srinterface.h</code> it would break the other file, this is a weak explanation. A comment after the include could easily warn other people.</p>\n\n<p>What interests me the most is if it will affect the compilation in a bad way, will the size of the objects or executable files change because of that, does it affect performance.</p>\n\n<p>Or you have a really good explanation why this is bad.</p>\n\n<p>PS.: If you are curious why would I want to do that, is because I was mapping the dependencies between the files, and doing such a thing I can create a graphical visualization between all the dependencies, making it easier to understand how the pieces of the puzzle fit together. Transferring sub-headers to common header in the higher hierarchy header creates a more organized structure between the all files.</p>\n"}, {"tags": ["c++", "gcc", "pragma", "error-suppression"], "comments": [{"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1502314874, "post_id": 45600368, "comment_id": 78161507, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/10932479/in-gcc-how-to-mute-the-fpermissive-warning\">In gcc, how to mute the -fpermissive warning?</a>"}, {"owner": {"reputation": 167, "user_id": 5097738, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/90a162c0ab1147908190e3ee5c622f1d?s=128&d=identicon&r=PG", "display_name": "Andreas", "link": "https://stackoverflow.com/users/5097738/andreas"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 2, "creation_date": 1502315116, "post_id": 45600368, "comment_id": 78161598, "body": "This question is specifically directed towards newer versions of gcc where the solution provided in the aformentioned SO question does not work. I even included an example."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1502315352, "post_id": 45600368, "comment_id": 78161678, "body": "It&#39;s still the same question, especially since the other one mentions that these problems apply. I&#39;ve filed a bug: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=81787\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=81787</a>"}, {"owner": {"reputation": 167, "user_id": 5097738, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/90a162c0ab1147908190e3ee5c622f1d?s=128&d=identicon&r=PG", "display_name": "Andreas", "link": "https://stackoverflow.com/users/5097738/andreas"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1502315499, "post_id": 45600368, "comment_id": 78161752, "body": "So this is a bug and not a change in gcc?"}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1502315785, "post_id": 45600368, "comment_id": 78161871, "body": "Well, it&#39;s a change (as a side effect of an important revamping of the diagnostics system), but an unexpected one. There are plenty of other bugs from that error, but <code>-fpermissive</code> is rarely useful anymore, so it slipped through the cracks."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1502316096, "post_id": 45600368, "comment_id": 78162008, "body": "@o11c No, it&#39;s <i>very much</i> an expected change. It was changed as a result of <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=49655\" rel=\"nofollow noreferrer\">PR 49655</a>."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 1, "creation_date": 1502316224, "post_id": 45600368, "comment_id": 78162070, "body": "@hvd Except that <code>-fpermissive</code> <i>is</i> a warning option, just like <code>-pedantic</code> (which got an alias to a new name to fix it with this change)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1502316355, "post_id": 45600368, "comment_id": 78162129, "body": "@o11c Unless it&#39;s changed in recent versions, I seem to recall <code>-fpermissive</code> changing the language and by design causing valid C++ code to be rejected or to be compiled in ways that the standard doesn&#39;t allow. It doesn&#39;t control the diagnostics (or at least does more than that). It mutates the language in such a way that (some of) the diagnostics no longer apply."}, {"owner": {"reputation": 167, "user_id": 5097738, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/90a162c0ab1147908190e3ee5c622f1d?s=128&d=identicon&r=PG", "display_name": "Andreas", "link": "https://stackoverflow.com/users/5097738/andreas"}, "edited": false, "score": 0, "creation_date": 1502317180, "post_id": 45600368, "comment_id": 78162428, "body": "To me it still seems safer to be able to use -fpermissive on a smaller section of code rather than be forced to compile the whole project with the flag."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1502318390, "post_id": 45600368, "comment_id": 78162807, "body": "@hvd the fact that the compiler continues emitting diagnostics after a <code>-fpermissive</code> error proves that it is just a diagnostic."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 1, "creation_date": 1502318879, "post_id": 45600368, "comment_id": 78163000, "body": "@o11c That makes no sense."}], "owner": {"reputation": 167, "user_id": 5097738, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/90a162c0ab1147908190e3ee5c622f1d?s=128&d=identicon&r=PG", "display_name": "Andreas", "link": "https://stackoverflow.com/users/5097738/andreas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4164, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1502315413, "creation_date": 1502311597, "last_edit_date": 1502315413, "question_id": 45600368, "link": "https://stackoverflow.com/questions/45600368/how-to-supress-a-fpermissive-error-using-modern-gcc", "title": "How to supress a -fpermissive error using modern gcc?", "body": "<p>I am trying to compile some nonconforming code in c++17 but am stuck at the with the following issue.</p>\n\n<pre><code>#pragma GCC diagnostic push\n#pragma GCC diagnostic ignored \"-fpermissive\"\n\nSome code that compiles only when with -fpermissive flag is set\n\n#pragma GCC diagnostic pop\n</code></pre>\n\n<p>compiles fine on gcc version 4.6.4 through 4.7.4, but all later versions of gcc are giving me the following warning and don't suppress the error.</p>\n\n<pre><code>warning: \u2018-fpermissive\u2019 is not an option that controls warnings [-Wpragmas]\n#pragma GCC diagnostic ignored \"-fpermissive\"\n</code></pre>\n\n<p>When I write (out of desperation)</p>\n\n<pre><code>#pragma GCC diagnostic push\n#pragma GCC diagnostic ignored \"-Wpragmas\"\n#pragma GCC diagnostic ignored \"-fpermissive\"\n\nSome code that compiles only when with -fpermissive flag is set\n\n#pragma GCC diagnostic pop\n</code></pre>\n\n<p>I am back at square one. Currently I'd like to continue using gcc 7.1 for the project. I can compile the entire project with -fpermissive flag set as a compile option but this means that some other section of code causing \na -fpermissive error could compile.</p>\n\n<p>Condensed example <a href=\"https://godbolt.org/g/KFd5Ke\" rel=\"nofollow noreferrer\">https://godbolt.org/g/KFd5Ke</a></p>\n\n<p>This question is not a duplicate of <a href=\"https://stackoverflow.com/questions/10932479/in-gcc-how-to-mute-the-fpermissive-warning\">In gcc, how to mute the -fpermissive warning?</a> as this is directed toward newer versions of gcc where  the solution provided in the aformentioned So question does not work. I even included an example.</p>\n"}, {"tags": ["c++", "regex", "boost"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1502314614, "post_id": 45600212, "comment_id": 78161387, "body": "For a direct answer to the Regex question: <a href=\"https://stackoverflow.com/questions/3122344/boost-c-regex-how-to-get-multiple-matches?noredirect=1&amp;lq=1\" title=\"boost c regex how to get multiple matches\">stackoverflow.com/questions/3122344/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 90, "user_id": 3861103, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fee3114c34693bc46d05422684f2be29?s=128&d=identicon&r=PG&f=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/3861103/todd"}, "edited": false, "score": 0, "creation_date": 1502462402, "post_id": 45600933, "comment_id": 78235084, "body": "Thanks this worked perfectly and I do think this is better than my regular expression although I did not need to worry about handling various forms of floating point numbers."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 1, "last_activity_date": 1502314288, "creation_date": 1502314288, "answer_id": 45600933, "question_id": 45600212, "link": "https://stackoverflow.com/questions/45600212/regular-expression-multiple-floating-point/45600933#45600933", "title": "Regular Expression Multiple Floating Point", "body": "<p>I think you're using the wrong tool for the job. If you want a parser, use a parser.</p>\n\n<p>After all you want to parse the data. There are many valid formats for real numbers (what about positive signs, scientific notation, NaN and infinity?). You want to have the correctly converted data, not the string values.</p>\n\n<p>You may even want to have the name or reliably skip it, even if the name contains a number (OOOPS).</p>\n\n<p>So, here's a simple approach using Boost Spirit:</p>\n\n<p><strong><kbd><a href=\"https://wandbox.org/permlink/7Xtn0Z6FGfzF9f2H\" rel=\"nofollow noreferrer\">Live On Wandbox</a></kbd></strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/spirit/include/qi.hpp&gt;\nnamespace qi = boost::spirit::qi;\n\nbool parse_line(std::string const&amp; line, std::string&amp; name, double&amp; a, double&amp; b, double&amp; c) {\n    using It = std::string::const_iterator;\n    qi::rule&lt;It, std::string()&gt; quoted = '\"' &gt;&gt; *~qi::char_('\"') &gt;&gt; '\"';\n\n    It f = line.begin(), l = line.end();\n    return qi::phrase_parse(f, l, quoted &gt;&gt; qi::double_ &gt;&gt; qi::double_ &gt;&gt; qi::double_, qi::blank, name, a, b, c);\n}\n\nint main() {\n    std::string name;\n    double a, b, c;\n\n    if (parse_line(\"\\\"this is a name\\\" 39.789876 -83.997978 30.000000\", name, a, b, c)) {\n        std::cout &lt;&lt; \"Parsed: \\n\"\n            &lt;&lt; \" Name '\" &lt;&lt; name &lt;&lt; \"'\\n\"\n            &lt;&lt; \" (a,b,c): (\" &lt;&lt; a &lt;&lt; \", \" &lt;&lt; b &lt;&lt; \", \" &lt;&lt; c &lt;&lt; \")\\n\";\n    }\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>Parsed:\n Name 'this is a name'\n (a,b,c): (39.7899, -83.998, 30)\n</code></pre>\n"}], "owner": {"reputation": 90, "user_id": 3861103, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fee3114c34693bc46d05422684f2be29?s=128&d=identicon&r=PG&f=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/3861103/todd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 45600933, "answer_count": 1, "score": 1, "last_activity_date": 1522925301, "creation_date": 1502310974, "last_edit_date": 1522925301, "question_id": 45600212, "link": "https://stackoverflow.com/questions/45600212/regular-expression-multiple-floating-point", "title": "Regular Expression Multiple Floating Point", "body": "<p>I have looked at the previous questions to find the best way to look for a floating point value. My problem is I have a line that should contain at least 3 floating point values in addition to some other text. I want to extract the first three floating point values from the line and use them. However, I can only get boost::regex to give me the first value. What am I doing wrong? I do want to force at least one digit on each side of the decimal and force that a decimal must exist as well.</p>\n\n<p>My example input string is </p>\n\n<pre><code>\"this is a name\" 39.789876 -83.997978 30.000000\n</code></pre>\n\n<p>My code looks like</p>\n\n<pre><code>std::string line = \"\\\"this is a name\\\" 39.789876 -83.997978 30.000000\";\nstatic boost::regex llhNums_regex = boost::regex(\"[-]?[0-9]+[.][0-9]+\");\nboost::smatch resultsTwo;\nif(boost::regex_search(line, resultsTwo, llhNums_regex))\n{\n    std::cout &lt;&lt; \"Found results\\n\";\n}\nfor(int i = 0 ; i&lt;resultsTwo.size() ; ++i)\n{\n    std::cerr &lt;&lt; i &lt;&lt; \": \" &lt;&lt; resultsTwo[i].str() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Yet <code>resultsTwo.size()</code> is only 1 and it prints out just the first floating point value. How do I get all three values out? I am sure there is something basic with regular expressions I am misunderstanding, but I cannot figure it out. </p>\n"}, {"tags": ["c++", "c", "arduino"], "comments": [{"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1502311090, "post_id": 45600202, "comment_id": 78159814, "body": "Pleasse show a consistent piece of code. I.e. get as close as you can to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please."}, {"owner": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "reply_to_user": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1502313475, "post_id": 45600202, "comment_id": 78160903, "body": "So sorry, I&#39;ll do"}, {"owner": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "reply_to_user": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1502325654, "post_id": 45600202, "comment_id": 78164730, "body": "I did. Thank you."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1502353203, "post_id": 45600202, "comment_id": 78174930, "body": "Are you sure? I do not see an edit by you in the change log. I only see a change by KeineLust, who kindly improved the  markdown."}, {"owner": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "reply_to_user": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1502376232, "post_id": 45600202, "comment_id": 78192746, "body": "Ho I put it as answer, not as comment. Sorry. I am going to add it here if needed."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "edited": false, "score": 0, "creation_date": 1502317278, "post_id": 45600885, "comment_id": 78162462, "body": "I actually reading data byte-by-byte from the serial. But precisely, I would like to send the 4 bytes to the next serial (no choice for serial), and keep a trace of thoses informations in tables (10 maybe)... sketch is following"}, {"owner": {"reputation": 197, "user_id": 1521611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/230ed18c5635ed65d03a1b44b3d7361c?s=128&d=identicon&r=PG", "display_name": "Sol Arnu", "link": "https://stackoverflow.com/users/1521611/sol-arnu"}, "reply_to_user": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "edited": false, "score": 0, "creation_date": 1502317386, "post_id": 45600885, "comment_id": 78162495, "body": "so since you have 10 bits, write it as two bytes with a union and read it that way."}, {"owner": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "edited": false, "score": 0, "creation_date": 1502317641, "post_id": 45600885, "comment_id": 78162586, "body": "Thank you for your answer. however, I would like to keep as minimum possible size of the members, and this is why I try to stick to bits."}, {"owner": {"reputation": 197, "user_id": 1521611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/230ed18c5635ed65d03a1b44b3d7361c?s=128&d=identicon&r=PG", "display_name": "Sol Arnu", "link": "https://stackoverflow.com/users/1521611/sol-arnu"}, "reply_to_user": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "edited": false, "score": 0, "creation_date": 1502317897, "post_id": 45600885, "comment_id": 78162665, "body": "ok, well, good luck! trying to do something not aligned to byte boundaries is quite tricky."}, {"owner": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "edited": false, "score": 0, "creation_date": 1502318265, "post_id": 45600885, "comment_id": 78162772, "body": "now I am more interested. Please would you mind to precise your formulation"}, {"owner": {"reputation": 197, "user_id": 1521611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/230ed18c5635ed65d03a1b44b3d7361c?s=128&d=identicon&r=PG", "display_name": "Sol Arnu", "link": "https://stackoverflow.com/users/1521611/sol-arnu"}, "reply_to_user": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "edited": false, "score": 0, "creation_date": 1502318507, "post_id": 45600885, "comment_id": 78162849, "body": "do the details i added help? Or what were you looking for?"}, {"owner": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "edited": false, "score": 0, "creation_date": 1502318656, "post_id": 45600885, "comment_id": 78162902, "body": "&quot;doing something not aligned to byte boundaries&quot;. I am sorry I don&#39;t understand this point, and I would like you precise this point. If that is possible."}, {"owner": {"reputation": 197, "user_id": 1521611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/230ed18c5635ed65d03a1b44b3d7361c?s=128&d=identicon&r=PG", "display_name": "Sol Arnu", "link": "https://stackoverflow.com/users/1521611/sol-arnu"}, "reply_to_user": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "edited": false, "score": 0, "creation_date": 1502318735, "post_id": 45600885, "comment_id": 78162933, "body": "Ah, I just mean if you want to store an array of your <code>structTable</code> then it is hard to do that without wasting the extra six bits (from 10-&gt;16 bits). Most computer architectures are pretty inefficient at accessing non-aligned data."}, {"owner": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "edited": false, "score": 0, "creation_date": 1502319165, "post_id": 45600885, "comment_id": 78163081, "body": "thank you. this is why I am confuse in the process. should (if possible)  to cast the char (in hex) to a struct in my union, then write in struct of bit?"}, {"owner": {"reputation": 197, "user_id": 1521611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/230ed18c5635ed65d03a1b44b3d7361c?s=128&d=identicon&r=PG", "display_name": "Sol Arnu", "link": "https://stackoverflow.com/users/1521611/sol-arnu"}, "reply_to_user": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "edited": false, "score": 0, "creation_date": 1502376066, "post_id": 45600885, "comment_id": 78192636, "body": "Probably the other answer is more elegant!"}, {"owner": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "edited": false, "score": 0, "creation_date": 1502377055, "post_id": 45600885, "comment_id": 78193450, "body": "right now I am on the fog for this process, please, which answer you are talking about? thank you"}, {"owner": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "edited": false, "score": 0, "creation_date": 1502378450, "post_id": 45600885, "comment_id": 78194533, "body": "Thank you for your good help Sol Arnu, It seems I cannot post the result of your code, so I will ask a new question that follow this thread. Thank you"}, {"owner": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "edited": false, "score": 0, "creation_date": 1502482610, "post_id": 45600885, "comment_id": 78245732, "body": "&quot;From Sol Arnu: I just mean if you want to store an array of your structTable then it is hard to do that without wasting the extra six bits (from 10-&gt;16 bits)&quot;.  Why a table could not be considered as slignment of strings in the table and just take each adress folling each other? Thank you"}], "tags": [], "owner": {"reputation": 197, "user_id": 1521611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/230ed18c5635ed65d03a1b44b3d7361c?s=128&d=identicon&r=PG", "display_name": "Sol Arnu", "link": "https://stackoverflow.com/users/1521611/sol-arnu"}, "is_accepted": false, "score": 1, "last_activity_date": 1502317853, "last_edit_date": 1502317853, "creation_date": 1502314025, "answer_id": 45600885, "question_id": 45600202, "link": "https://stackoverflow.com/questions/45600202/arduino-how-to-feed-a-struct-from-a-serial-read/45600885#45600885", "title": "Arduino - how to feed a struct from a serial.read()?", "body": "<p>According to the Arduino reference I just looked up <a href=\"https://www.arduino.cc/en/Serial/Read\" rel=\"nofollow noreferrer\">Serial::read</a>, the code returns data byte-by-byte (eight bits at a time). So probably you should just read the data one byte (eight bits at a time) and do your unpacking after the fact.</p>\n\n<p>In fact you might want to use a <code>union</code> (see e.g. <a href=\"https://stackoverflow.com/questions/2468708/converting-bit-field-to-int\">this other stackoverflow post</a> on how to use a <code>union</code>) so that you can get the best of both worlds. Specifically, if you define a <code>union</code> of your definition with the bits broken out and a second part of the <code>union</code> as one or two bytes, you can send the data as bytes and then decode it in the bits you are interested in.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Here is an attempt at some more details. There are a lot of caveats about unions - they aren't portable, they are compiler dependent, etc. But this might be worth trying.</p>\n\n<pre><code>typedef struct {\n  unsigned int page:1; // (0,1)\n  unsigned int cric:4; // 10 choices (4 bits)\n  unsigned int crac:3; // 5 choices (3 bits)\n  unsigned int croc:2; // 3 choices (2 bits)\n} structTable;\n\ntypedef union {\n  structTable a;\n  uint16_t b;\n} u_structTable;\n\nserial.Read(val1);\nserial.Read(val2);\n\nu_structTable x;\nx.b = val1 | (val2&lt;&lt;8);\nprintf(\"page is %d\\n\", x.a.page);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "edited": false, "score": 0, "creation_date": 1502378311, "post_id": 45603281, "comment_id": 78194444, "body": "thank you  much Michael Roy. I will try this and ask a new question that follow this post."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "reply_to_user": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "edited": false, "score": 0, "creation_date": 1502379018, "post_id": 45603281, "comment_id": 78194995, "body": "Just make sure you use the same packed struct in the program at the other end to send/receive data.  This way of sending/receiving data is very common, This is the same technique used by the IP stack, for example.."}], "tags": [], "owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "is_accepted": true, "score": 1, "last_activity_date": 1502331497, "last_edit_date": 1502331497, "creation_date": 1502330561, "answer_id": 45603281, "question_id": 45600202, "link": "https://stackoverflow.com/questions/45600202/arduino-how-to-feed-a-struct-from-a-serial-read/45603281#45603281", "title": "Arduino - how to feed a struct from a serial.read()?", "body": "<p>You can only send full bytes over the serial port.  But you can also send raw data directly. </p>\n\n<pre><code>void send (const structTable* table)\n{\n    Serial.write((const char*)table, sizeof(structTable));  // 2 bytes.\n}\n\nbool receive(structTable* table)\n{\n    return (Serial.readBytes((char*)table, sizeof(structTable)) == sizeof(structTable));\n}\n</code></pre>\n\n<p>You also have to be aware that sizeof(int) is not the same on all CPUS</p>\n\n<p>A word about endianness.  The definition for your struct for the program at the other end of the serial link, if running on a CPU with a different endianness would become:</p>\n\n<pre><code>struct structTable {\n  unsigned short int croc:2; // 3 choices (2 bits)\n  unsigned short int crac:3; // 5 choices (3 bits)\n  unsigned short int cric:4; // 10 choices (4 bits)\n  unsigned short int page:1; // (0,1)\n};\n</code></pre>\n\n<p>Note the use of short int, which you can also use in the arduino code to be more precise.  The reason is that short int is 16 bits on most CPUs, while int may be 16,32 or even 64 bits.</p>\n"}], "owner": {"reputation": 13, "user_id": 8425305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/331713e4b470bc2ea83744a12390cc59?s=128&d=identicon&r=PG&f=1", "display_name": "patatos", "link": "https://stackoverflow.com/users/8425305/patatos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5015, "favorite_count": 0, "accepted_answer_id": 45603281, "answer_count": 2, "score": 1, "last_activity_date": 1502520514, "creation_date": 1502310945, "last_edit_date": 1502520514, "question_id": 45600202, "link": "https://stackoverflow.com/questions/45600202/arduino-how-to-feed-a-struct-from-a-serial-read", "title": "Arduino - how to feed a struct from a serial.read()?", "body": "<p>I am a beginner and I am trying to feed a struct table with 4 members typed BIN with a pointer, then send them to another one, serial2. I fail to do so.</p>\n\n<p>I receive 4 chars from <code>serial1.read()</code>, for example 'A' '10' '5' '3'. \nTo decrease the size of the data, I want to use a struct:</p>\n\n<pre><code>struct structTable {\n  unsigned int page:1; // (0,1)\n  unsigned int cric:4; // 10 choices (4 bits)\n  unsigned int crac:3; // 5 choices (3 bits)\n  unsigned int croc:2; // 3 choices (2 bits)\n};\n</code></pre>\n\n<p>I declare and set: instance and pointer</p>\n\n<pre><code>struct structTable structTable;\nstruct structTable *PtrstructTable; \nPtrstructTable = &amp;structTable;\n</code></pre>\n\n<p>Then I try to feed like this:</p>\n\n<pre><code>for(int i = 0; i&lt;=4; i++) {\n  if(i == 1) {\n    (*PtrProgs).page = Serial.read();\n  if(i == 2) {\n    (*PtrProgs).cric = Serial.read();\n</code></pre>\n\n<p>And so on. But it's not working...</p>\n\n<p>I tried to feed a first char table and tried to cast the result:</p>\n\n<pre><code>(*PtrProgs).page = PtrT[1], BIN;\n</code></pre>\n\n<p>And now, I realize I can not feed 3 bits in one time! doh! All this seems very weak, and certainly a too long process for just 4 values. (I wanted to keep this kind of struct table for more instances).</p>\n\n<p>Please, could you help me to find a simpler way to feed my table?</p>\n"}, {"tags": ["c++", "opencv", "matrix", "camera", "pixelformat"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1502315563, "post_id": 45600146, "comment_id": 78161777, "body": "Which video i/o backend?"}, {"owner": {"reputation": 31, "user_id": 8172267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6c19534d516e1eced9f8e960be5b0f?s=128&d=identicon&r=PG&f=1", "display_name": "David Rosenfield", "link": "https://stackoverflow.com/users/8172267/david-rosenfield"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1502317108, "post_id": 45600146, "comment_id": 78162398, "body": "I am using Basler and TeleDyne Dalsa cameras for which I do not believe there is a specific backend so I have been using CAP_ANY."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1502317382, "post_id": 45600146, "comment_id": 78162491, "body": "<code>CAP_ANY</code> just means it automagically picks one that works. You&#39;ll need to go through the list manually and see which one it is. I&#39;d start from the most likely ones, I guess <code>PVAPI</code> <code>GIGANETIX</code> and maybe <code>XIAPI</code> (that might be a long shot)? At least in trunk, I see some binning properties supported by <code>PVAPI</code> and <code>XIAPI</code>. I&#39;m not sure how well PVAPI talks with other manufacturers cameras (i just have AVT ones), and Ximea API seems like something proprietary too. I guess the giganetix one might be it, although in that case you&#39;re out of luck -- at best you&#39;ve gotta patch openCV to add support."}, {"owner": {"reputation": 31, "user_id": 8172267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6c19534d516e1eced9f8e960be5b0f?s=128&d=identicon&r=PG&f=1", "display_name": "David Rosenfield", "link": "https://stackoverflow.com/users/8172267/david-rosenfield"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1502370538, "post_id": 45600146, "comment_id": 78187792, "body": "Ok thanks I will give those a try"}], "owner": {"reputation": 31, "user_id": 8172267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6c19534d516e1eced9f8e960be5b0f?s=128&d=identicon&r=PG&f=1", "display_name": "David Rosenfield", "link": "https://stackoverflow.com/users/8172267/david-rosenfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502311607, "creation_date": 1502310706, "last_edit_date": 1502311607, "question_id": 45600146, "link": "https://stackoverflow.com/questions/45600146/binning-a-gige-camera-with-opencv-in-visual-studio-c", "title": "Binning a GigE Camera with OpenCV in Visual Studio C++", "body": "<p>How can I control horizontal and vertical binning on a camera for 2x2 and 4x4 from a C++ program running on Windows in Visual Studio 2012?</p>\n"}, {"tags": ["c++", "2d", "directx", "scaling"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8231319, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-z8VaR2uPs24/AAAAAAAAAAI/AAAAAAAAABE/PM-E2eJpASg/photo.jpg?sz=128", "display_name": "VBS", "link": "https://stackoverflow.com/users/8231319/vbs"}, "edited": false, "score": 0, "creation_date": 1502311037, "post_id": 45600155, "comment_id": 78159793, "body": "I am using Direct3D9 for training purposes. Thank you. How can I use ID3DXSprite::SetTransform, for example?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 13, "user_id": 8231319, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-z8VaR2uPs24/AAAAAAAAAAI/AAAAAAAAABE/PM-E2eJpASg/photo.jpg?sz=128", "display_name": "VBS", "link": "https://stackoverflow.com/users/8231319/vbs"}, "edited": false, "score": 0, "creation_date": 1502311329, "post_id": 45600155, "comment_id": 78159915, "body": "I can&#39;t say that messing with DX9 sprites is a waste of time but it would be definitely better to switch to DX10-11 and shaders. Implementing custom sprite drawer with DX11 should be a reasonable training task."}, {"owner": {"reputation": 13, "user_id": 8231319, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-z8VaR2uPs24/AAAAAAAAAAI/AAAAAAAAABE/PM-E2eJpASg/photo.jpg?sz=128", "display_name": "VBS", "link": "https://stackoverflow.com/users/8231319/vbs"}, "edited": false, "score": 0, "creation_date": 1502312092, "post_id": 45600155, "comment_id": 78160292, "body": "Many D3D9 stuff still using together with D3D11. Is it not prevent my understanding DirectX, basically, if i start from D3D11?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 13, "user_id": 8231319, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-z8VaR2uPs24/AAAAAAAAAAI/AAAAAAAAABE/PM-E2eJpASg/photo.jpg?sz=128", "display_name": "VBS", "link": "https://stackoverflow.com/users/8231319/vbs"}, "edited": false, "score": 0, "creation_date": 1502312382, "post_id": 45600155, "comment_id": 78160434, "body": "I would say that starting from Direct3D 11 would provide better understanding of DirectX and graphical programming in general."}, {"owner": {"reputation": 13, "user_id": 8231319, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-z8VaR2uPs24/AAAAAAAAAAI/AAAAAAAAABE/PM-E2eJpASg/photo.jpg?sz=128", "display_name": "VBS", "link": "https://stackoverflow.com/users/8231319/vbs"}, "edited": false, "score": 0, "creation_date": 1502312577, "post_id": 45600155, "comment_id": 78160532, "body": "I build simple D3D11 examples, but I never worked with hard D3D11 applications. I&#39;ll try."}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 1, "last_activity_date": 1502311822, "last_edit_date": 1502311822, "creation_date": 1502310739, "answer_id": 45600155, "question_id": 45600054, "link": "https://stackoverflow.com/questions/45600054/how-to-scale-idirect3dtexture9-using-direct3d9/45600155#45600155", "title": "How to scale IDirect3DTexture9 using Direct3D9?", "body": "<p>You can adjust sprite size, rotattion and world position using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb174258(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>ID3DXSprite::SetTransform</code></a> method. You can use it by building <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb206269(v=vs.85).aspx\" rel=\"nofollow noreferrer\">transformation matrix</a>.</p>\n\n<pre><code>::D3DXMATRIX scaling_matrix;\n::D3DXMATRIX rotation_matrix;\n::D3DXMATRIX move_matrix;\n::D3DXMATRIX intermediate_matrix;\n::D3DXMATRIX final_matrix;\n\n::D3DXMatrixScaling(&amp;scaling_matrix, scale_x, scale_y, 1.0f);\n::D3DXMatrixRotationZ(&amp;rotation_matrix, rotation);\n::D3DXMatrixTranslation(&amp;move_matrix, x, y, 1.0f);\n::D3DXMatrixMultiply(&amp;intermediate_matrix, &amp;scaling_matrix, &amp;rotation_matrix);\n::D3DXMatrixMultiply(&amp;final_matrix, &amp;intermediate_matrix, &amp;move_matrix);\n\nsprite_handler-&gt;SetTransform(&amp;final_matrix);\n</code></pre>\n\n<p>But I must mention that the article you posted is outdated. DirectX9 and sprites provided by <code>D3DXSPRITE</code> are essentially deprecated.</p>\n"}], "owner": {"reputation": 13, "user_id": 8231319, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-z8VaR2uPs24/AAAAAAAAAAI/AAAAAAAAABE/PM-E2eJpASg/photo.jpg?sz=128", "display_name": "VBS", "link": "https://stackoverflow.com/users/8231319/vbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 0, "accepted_answer_id": 45600155, "answer_count": 1, "score": 1, "last_activity_date": 1502311822, "creation_date": 1502310348, "question_id": 45600054, "link": "https://stackoverflow.com/questions/45600054/how-to-scale-idirect3dtexture9-using-direct3d9", "title": "How to scale IDirect3DTexture9 using Direct3D9?", "body": "<p>My issue is in commen by ChurchSkiz on this web-page <a href=\"https://www.gamedev.net/forums/topic/577397-making-a-2d-menu-in-directx/\" rel=\"nofollow noreferrer\">https://www.gamedev.net/forums/topic/577397-making-a-2d-menu-in-directx/</a>.\nEverything is simple, but I cannot understand how to scale that texture.\nI want to do it like image for game main menu. How it seems to me, it's only a way which scale any texture to display's resolution of a user (1024x768, 1920x1080 etc).</p>\n\n<p>I also made a non-generic way to scale texture. It depends on centain texture's and display's resolution</p>\n\n<pre><code>// The texture are 1024x768 and my display's resolution are 1440x900.\nD3DXVECTOR3 center(-200,-50, 0);\n\nsprite_handler-&gt;Draw(KidRightTexture, nullptr, &amp;center, nullptr, D3DCOLOR_XRGB(255, 255, 255));\n</code></pre>\n\n<p>Any ideas? Also, is there a better way to draw my texture? For example, maybe without the sprite? I am very new to DirectX.\nBut everything changes when our display are 1600x1050.</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "lambda"], "comments": [{"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 2, "creation_date": 1502310066, "post_id": 45599958, "comment_id": 78159307, "body": "It&#39;s always a good idea to post an error message too..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1502310086, "post_id": 45599958, "comment_id": 78159312, "body": "Can you elaborate on these issues you are having?"}, {"owner": {"reputation": 304, "user_id": 1324674, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a0b8ba4a4b6c5148d24caf27c311b0e7?s=128&d=identicon&r=PG", "display_name": "user1324674", "link": "https://stackoverflow.com/users/1324674/user1324674"}, "edited": false, "score": 0, "creation_date": 1502310968, "post_id": 45599958, "comment_id": 78159765, "body": "Edited post with errors"}], "answers": [{"comments": [{"owner": {"reputation": 304, "user_id": 1324674, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a0b8ba4a4b6c5148d24caf27c311b0e7?s=128&d=identicon&r=PG", "display_name": "user1324674", "link": "https://stackoverflow.com/users/1324674/user1324674"}, "edited": false, "score": 0, "creation_date": 1502317602, "post_id": 45601459, "comment_id": 78162575, "body": "Thank you so much you have no idea how long I was working on this, not knowing how to come to a solution."}, {"owner": {"reputation": 304, "user_id": 1324674, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a0b8ba4a4b6c5148d24caf27c311b0e7?s=128&d=identicon&r=PG", "display_name": "user1324674", "link": "https://stackoverflow.com/users/1324674/user1324674"}, "edited": false, "score": 0, "creation_date": 1502376330, "post_id": 45601459, "comment_id": 78192832, "body": "how would I go about getting this to work for threads that launch member functions? Generally I would launch a thread like thread(&amp;Class::function, this, args....) but I&#39;m getting an error with the interruptible thread trying this same thing (even though it worked otherwise): <a href=\"https://gist.github.com/anonymous/5f023198620e35667c0a158d13772334\" rel=\"nofollow noreferrer\">gist.github.com/anonymous/5f023198620e35667c0a158d13772334</a>"}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 304, "user_id": 1324674, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a0b8ba4a4b6c5148d24caf27c311b0e7?s=128&d=identicon&r=PG", "display_name": "user1324674", "link": "https://stackoverflow.com/users/1324674/user1324674"}, "edited": false, "score": 0, "creation_date": 1502381278, "post_id": 45601459, "comment_id": 78196567, "body": "@user1324674 You should ask that as a new question.  Pointer-to-member objects use a different syntax."}, {"owner": {"reputation": 304, "user_id": 1324674, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a0b8ba4a4b6c5148d24caf27c311b0e7?s=128&d=identicon&r=PG", "display_name": "user1324674", "link": "https://stackoverflow.com/users/1324674/user1324674"}, "edited": false, "score": 0, "creation_date": 1502489362, "post_id": 45601459, "comment_id": 78248198, "body": "if you dont mind, I have some follow up questions as I&#39;m disassembling all the code changes and ideas you&#39;ve introduced so I can better understand what is going on- I wanna start with this part here, you said when I pass fxn to thread&#39;s constructor it is being decayed to (*)(), but why is this? if _fxn is a reference that is being forwarded to the lambda, should it not be a reference as well? Or am I wrong about what forward is doing?"}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 304, "user_id": 1324674, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a0b8ba4a4b6c5148d24caf27c311b0e7?s=128&d=identicon&r=PG", "display_name": "user1324674", "link": "https://stackoverflow.com/users/1324674/user1324674"}, "edited": false, "score": 0, "creation_date": 1502499523, "post_id": 45601459, "comment_id": 78250274, "body": "Read <a href=\"http://en.cppreference.com/w/cpp/thread/thread/thread\" rel=\"nofollow noreferrer\">the documentation</a> for <code>std::thread</code>&#39;s constructor.  It decays because the standard says it does.  All references passed to <code>std::thread</code>&#39;s constructor do so."}], "tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": true, "score": 4, "last_activity_date": 1502317445, "last_edit_date": 1502317445, "creation_date": 1502316922, "answer_id": 45601459, "question_id": 45599958, "link": "https://stackoverflow.com/questions/45599958/interruptible-thread-class-c11-getting-errors/45601459#45601459", "title": "Interruptible Thread class C++11 - getting errors?", "body": "<p>Your issue is that <code>std::thread</code> stores a copy of its arguments, so the type of <code>Function</code> and the type of the object passed to your lambda aren't the same.</p>\n\n<p>When you call <code>InterruptibleThread(doWork)</code>, <code>Function</code> gets deduced to be <code>void (&amp;)()</code>: that is, reference to a function taking no arguments and returning void.  When you pass <code>fxn</code> along to <code>std::thread</code>'s constructor, it decays to <code>void (*)()</code> (pointer to a function taking no arguments and returning void) and gets stored in some internal storage.  When the new thread starts up that internal object gets passed as the second parameter to your lambda, but the type <code>void (*)()</code> doesn't match the expected <code>void (&amp;)()</code> and everything falls apart.  Similarly your constructor currently doesn't work if I pass it an lvalue reference to some functor.</p>\n\n<p>A similar problem exists for <code>args</code>.  For example, if you pass an lvalue <code>std::string</code> as one of <code>args</code>, it will get passed to the lambda as a <code>std::string&amp;&amp;</code> and things will explode.</p>\n\n<p>The easiest way to fix this is to make the lambda parameter type <code>auto</code> (assuming you're using c++14):</p>\n\n<pre><code>InterruptibleThread( Function&amp;&amp; fxn, Args&amp;&amp;... args )\n    : thrd(\n            []( atomic_bool&amp; f, auto&amp;&amp; fxn, auto&amp;&amp;... args ) {\n                flagRef = &amp;f;\n                fxn( std::move(args)... );\n            },\n            std::ref(flag),\n            std::forward&lt;Function&gt;(fxn),\n            std::forward&lt;Args&gt;(args)... ) {\n}\n</code></pre>\n\n<p>If you're still on c++11, you'll have to use <code>std::decay</code> to get the correct parameter type:</p>\n\n<pre><code>InterruptibleThread( Function&amp;&amp; fxn, Args&amp;&amp;... args )\n    : thrd(\n            []( atomic_bool&amp; f,\n                typename std::decay&lt;Function&gt;::type&amp;&amp; fxn,\n                typename std::decay&lt;Args&gt;::type&amp;&amp;... args ) {\n                flagRef = &amp;f;\n                fxn( std::move(args)... );\n            },\n            std::ref(flag),\n            std::forward&lt;Function&gt;(fxn),\n            std::forward&lt;Args&gt;(args)... ) {\n}\n</code></pre>\n\n<p>Note in both cases I've wrapped <code>flag</code> in a <code>std::reference_wrapper</code> since <code>std::atomic</code> is not copyable and it would be incorrect to make a copy even if it were.</p>\n"}], "owner": {"reputation": 304, "user_id": 1324674, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a0b8ba4a4b6c5148d24caf27c311b0e7?s=128&d=identicon&r=PG", "display_name": "user1324674", "link": "https://stackoverflow.com/users/1324674/user1324674"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 1, "accepted_answer_id": 45601459, "answer_count": 1, "score": 1, "last_activity_date": 1528818743, "creation_date": 1502309996, "last_edit_date": 1528818743, "question_id": 45599958, "link": "https://stackoverflow.com/questions/45599958/interruptible-thread-class-c11-getting-errors", "title": "Interruptible Thread class C++11 - getting errors?", "body": "<p>I'm following the idea here <a href=\"https://stackoverflow.com/a/13893381/1324674\">https://stackoverflow.com/a/13893381/1324674</a> attempting to create a thread class that will have a static pointer to a boolean flag that will tell a thread to quit (or rather, throw an exception and end). I'm having several issues however while following that same code and I'm wondering how to fix it, I've been working on this for several hours now-</p>\n\n\n\n<pre><code>using namespace std;\n\nclass InterruptThreadException {};\n\nclass InterruptibleThread {\nprivate:\n    static thread_local atomic_bool* flagRef;\n    atomic_bool flag{false};\n    thread thrd;\n\npublic:\n    friend void checkForInterrupt( );\n    template &lt; typename Function, typename... Args &gt;\n    InterruptibleThread( Function&amp;&amp; _fxn, Args&amp;&amp;... _args )\n        : thrd(\n                []( atomic_bool&amp; f, Function&amp;&amp; fxn, Args&amp;&amp;... args ) {\n                    flagRef = &amp;f;\n                    fxn( forward&lt; Args &gt;( args )... );\n                },\n                flag,\n                forward&lt; Function &gt;( _fxn ),\n                forward&lt; Args &gt;( _args )...\n\n                ) {\n        thrd.detach( );\n    }\n    bool stopping( ) const {\n        return flag.load( );\n    }\n\n    void stop( ) {\n        flag.store( true );\n    }\n};\n\nthread_local atomic_bool* InterruptibleThread::flagRef = nullptr;\n\nvoid checkForInterrupt( ) {\n    if ( !InterruptibleThread::flagRef ) {\n        return;\n    }\n    if ( !InterruptibleThread::flagRef-&gt;load( ) ) {\n        return;\n    }\n    throw InterruptThreadException( );\n}\n\nvoid doWork( ) {\n    int i = 0;\n    while ( true ) {\n        cout &lt;&lt; \"Checking for interrupt: \" &lt;&lt; i++ &lt;&lt; endl;\n        checkForInterrupt( );\n        this_thread::sleep_for( chrono::seconds( 1 ) );\n    }\n}\n\nint main( ) {\n    InterruptibleThread t( doWork );\n    cout &lt;&lt; \"Press enter to stop\\n\";\n    getchar( );\n    t.stop( );\n\n    cout &lt;&lt; \"Press enter to exit\" &lt;&lt; endl;\n    getchar( );\n    return 0;\n}\n</code></pre>\n\n<p>Now I believe the issue is coming from the lambda function inside of the thread call as if I remove that and just have the fxn and args call the program runs fine (obviously without the ability to terminate a thread).</p>\n\n<p>Any idea what I'm doing wrong?</p>\n\n<p>Errors below- visual studio:</p>\n\n<pre><code>Error   C2672   'std::invoke': no matching overloaded function found    \nError   C2893   Failed to specialize function template 'unknown-type std::invoke(_Callable &amp;&amp;,_Types &amp;&amp;...) noexcept(&lt;expr&gt;)'   \n</code></pre>\n\n<p>gnu:\n<a href=\"https://gist.github.com/anonymous/2d5ccfa9ab04320902f51d005a96d2ae\" rel=\"nofollow noreferrer\">https://gist.github.com/anonymous/2d5ccfa9ab04320902f51d005a96d2ae</a></p>\n"}, {"tags": ["c++", "multithreading", "qt", "optimization", "semaphore"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1502310414, "post_id": 45599955, "comment_id": 78159480, "body": "Search the internet for &quot;double buffering&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 13642, "user_id": 4013258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d423395e1033fa23d80a5561ab170fa?s=128&d=identicon&r=PG&f=1", "display_name": "Surt", "link": "https://stackoverflow.com/users/4013258/surt"}, "is_accepted": false, "score": 1, "last_activity_date": 1503150114, "creation_date": 1503150114, "answer_id": 45772266, "question_id": 45599955, "link": "https://stackoverflow.com/questions/45599955/producer-and-consumer-optimization/45772266#45772266", "title": "Producer and Consumer Optimization", "body": "<p>Use a wait-free ring buffer.</p>\n\n<p>Boost claims to have <a href=\"http://www.boost.org/doc/libs/1_64_0/doc/html/boost/lockfree/spsc_queue.html\" rel=\"nofollow noreferrer\">one</a></p>\n\n<p>Note it is in the lock free folder but all methods claim to be thread safe and wait-free.</p>\n"}], "owner": {"reputation": 73, "user_id": 6057448, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f886e5213dc67bf176ebd6ade3551065?s=128&d=identicon&r=PG&f=1", "display_name": "A. Fasih", "link": "https://stackoverflow.com/users/6057448/a-fasih"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1503150114, "creation_date": 1502309987, "question_id": 45599955, "link": "https://stackoverflow.com/questions/45599955/producer-and-consumer-optimization", "title": "Producer and Consumer Optimization", "body": "<p>I am writing a C++ program in Qt that has an OnReceive(int value) event. It captures and push_back integer values into the std::vector. On another worker thread I have access to this vector and I can set a semaphore to wait for 20 values and then I can process them.</p>\n\n<p>I want to do some optimization.</p>\n\n<p>My question is how can I segment my buffer or vector into 3 parts of 0-4, 5-10, 11-19  so for example, as soon as 5 values are available in the vector (e.g 0 to 4), the second worker start to process them while the first thread still continue to get the rest of values?</p>\n\n<p>by this way I wanna have an overlap between my threads. so they don't need to be run in serial.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "visual-studio", "mfc"], "comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1502313044, "post_id": 45599874, "comment_id": 78160735, "body": "Do you understand what you are proposing, while certainly 100% possible, is odd?  And therefore likely difficult?  Cross-process communication between a console-app and an MFC app would be more normal. MFC is supported in console apps mostly for helper classes like CString."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1502315709, "post_id": 45599874, "comment_id": 78161835, "body": "While it is just an option in the executable header, the extra nasty little detail in C++ is that the entrypoint changes.  So you can&#39;t get it linked unless you provide a main() substitute for MFC&#39;s WinMain().  Running Editbin.exe with the /subsystem option afterwards ought to be easiest."}, {"owner": {"reputation": 39, "user_id": 4757257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fa0d73fbe16c03ae2a85db5d83f2891?s=128&d=identicon&r=PG&f=1", "display_name": "Hhdzhu", "link": "https://stackoverflow.com/users/4757257/hhdzhu"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1502470959, "post_id": 45599874, "comment_id": 78240167, "body": "@zzxyz,Hans thank you!!"}], "owner": {"reputation": 39, "user_id": 4757257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fa0d73fbe16c03ae2a85db5d83f2891?s=128&d=identicon&r=PG&f=1", "display_name": "Hhdzhu", "link": "https://stackoverflow.com/users/4757257/hhdzhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502309707, "creation_date": 1502309707, "question_id": 45599874, "link": "https://stackoverflow.com/questions/45599874/vsc-can-i-using-mfc-in-a-console-project-and-show-window", "title": "vsc++ ,Can I using MFC in a console project and show window?", "body": "<p>I create a win32 console project with option add MFC, and MSVS produce some code automate for me,if I wanted drawing some windows, do I need derive my own class from CWinApp? or  use an instance of CWinApp directly? \nIf I use an instance of CWinApp directly,how do I custom InitInstance function to get the frame that I like?\nSimply put,If I want make some windows using the code below,how to do that?</p>\n\n<pre><code>int main()\n{\n    int nRetCode = 0;\n\n    HMODULE hModule = ::GetModuleHandle(nullptr);\n\n    if (hModule != nullptr)\n    {\n        // initialize MFC and print and error on failure\n        if (!AfxWinInit(hModule, nullptr, ::GetCommandLine(), 0))\n        {\n            // TODO: change error code to suit your needs\n            wprintf(L\"Fatal Error: MFC initialization failed\\n\");\n            nRetCode = 1;\n        }\n        else\n        {\n\n            // TODO: code your application's behavior here.\n        }\n    }\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "visual-c++", "serial-port"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1502310169, "post_id": 45599846, "comment_id": 78159364, "body": "How are you intending to use the gathered information? If you have processing that depends on readings from all the sensors I&#39;d use overlapped IO Because you will have fewer synchonization problems. If each sensor lives in it&#39;s own little works and does not interact with the result of data from the other sensors,  and you have a recent enough Visual Studio to support <code>std::thread</code>, multithreaded with each thread blocking and  and listening should be simpler."}, {"owner": {"reputation": 55, "user_id": 7926817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5439faf8b3190d85a5a063990494e9d5?s=128&d=identicon&r=PG&f=1", "display_name": "neophyte", "link": "https://stackoverflow.com/users/7926817/neophyte"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1502310560, "post_id": 45599846, "comment_id": 78159558, "body": "@user4581301 All the sensors are independent from each other, and data processing occurs outside of the scope of this program. So if this were multithreaded with non-overlapped I/O, threads wouldn&#39;t block each other?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1502312404, "post_id": 45599846, "comment_id": 78160446, "body": "I think I&#39;m going to have to shut up on this one. Having hunted down the document from which the quote you cite, what they describe is either poorly worded or a freaking nightmare. I am unsure whether they mean if you block on access to a serial port, all serial ports are blocked or just the one serial port. The first seems insane. I need to experiment."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1502315787, "post_id": 45599846, "comment_id": 78161872, "body": "Experimented and find that I can have multiple threads simultaneously talking to different serial ports."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1502316111, "post_id": 45599846, "comment_id": 78162014, "body": "Test consisted of two threats starting, then sleeping for a second while the main thread blocked on a read to COM1 that would never complete because no timeout was set and no device was present to respond. Two other threads opened COM3 and COM4 respectively. Each sent a request to the attached device and then performed a blocking read while waiting for the response."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1502316341, "post_id": 45599846, "comment_id": 78162123, "body": "Bonus: I found a bug in the Windows port of my serial wrapper. Thanks!"}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1502321538, "post_id": 45599846, "comment_id": 78163756, "body": "<i>&quot;people have suggested having a thread to write and another to read&quot;</i> -- IMO that&#39;s a rarely-needed  design.  The device on the other end that you&#39;re communicating with is very likely single threaded rather than R/W multi-threaded.  The typical dialog on a serial link is a series of request-response messages.  The serial link is rarely used like a network connection.  Additionally, the OS always buffers the receive data from the UART, so the application does not have to be executing or &quot;ready&quot; to &quot;read&quot; the data.  Your original plan of a thread to service each serial port makes sense."}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1502322438, "post_id": 45599846, "comment_id": 78163969, "body": "<i>&quot;Windows documentation states that ... call a communications API...&quot;</i> -- I interpret that to apply on a per-device or per-controller basis.  Once an I/O operation is started, other operations on that device/controller have to wait.  The serial ports are independent devices (even if there&#39;s a USB hub involved).  Read and write operations to serial ports are independent operations and do not interact (soft flow-control might be the exception)."}], "owner": {"reputation": 55, "user_id": 7926817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5439faf8b3190d85a5a063990494e9d5?s=128&d=identicon&r=PG&f=1", "display_name": "neophyte", "link": "https://stackoverflow.com/users/7926817/neophyte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1011, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502309602, "creation_date": 1502309602, "question_id": 45599846, "link": "https://stackoverflow.com/questions/45599846/c-multithreading-serial-port", "title": "c++ - Multithreading serial port", "body": "<p>I currently need to write a Windows 10 application that collects data from four different sensors (encoders and IMUs) via serial. I am writing this in Visual Studio in c++.</p>\n\n<p>Each sensor requires me to write to it once to initialize it and then just read values. I was thinking of having a thread for each sensor (i.e. serial port) and a main thread to gather all of the data and save it in a file. </p>\n\n<p>In other Stack Overflow questions, however, people have suggested having a thread to write and another to read, or a single threaded overlapped approach.</p>\n\n<p>What are the pros/cons of this versus multithreaded? And if I do choose the multithreaded path do I need to use overlapped I/O or can I do non-overlapped?</p>\n\n<p>Windows documentation states that for non-overlapped:</p>\n\n<blockquote>\n  <p>If one thread is blocked waiting for its I/O operation to complete, all other threads that subsequently call a communications API will be blocked until the original operation completes. For instance, if one thread were waiting for a ReadFile function to return, any other thread that issued a WriteFile function would be blocked.</p>\n</blockquote>\n\n<p>Is this still true if I am using different serial ports for each sensor? Since I need to read these values as fast as possible I cannot afford blocking.</p>\n\n<p>Any help is appreciated! This is my first time designing a system...</p>\n"}, {"tags": ["c++", "windows", "createprocess"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1502310561, "post_id": 45599821, "comment_id": 78159559, "body": "Could you post the code? I think that some arguments were not passed correctly to <code>CreateProcess</code>."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1502310747, "post_id": 45599821, "comment_id": 78159657, "body": "for <code>CreateProcess</code> if you use name as first argument - <code>lpApplicationName</code> - no matter which extension - only internal file context. so i assume you use name in second argument - <code>lpCommandLine</code> - where really result can be depend from file extension. solution - always use not empty <code>lpApplicationName</code> - and all will be work for any file name"}, {"owner": {"reputation": 410, "user_id": 2608530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/4ctKm.png?s=128&g=1", "display_name": "rtischer8277", "link": "https://stackoverflow.com/users/2608530/rtischer8277"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1502311827, "post_id": 45599821, "comment_id": 78160163, "body": "@CristiFati I posted the code. The call works fine. Just not without the <code>.exe</code> extension."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1502312072, "post_id": 45599821, "comment_id": 78160283, "body": "@rtischer8277 - but you not show main - <code>filePathName</code> and <code>commandCh</code> - anyway <code>CreateProcess</code> work without any problems for any file extension when <code>filePathName</code> used and not 0"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1502313023, "post_id": 45599821, "comment_id": 78160720, "body": "Worked smoothly for me with <code>filePathName</code> pointing to the (full) path of the executable (called it <i>a.out</i>) and <code>commandCh</code> set to <code>NULL</code>. Note: test for <code>GetLastError</code> only if <code>CreateProcess</code> returns <code>FALSE</code>."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1502321711, "post_id": 45599821, "comment_id": 78163792, "body": "Using <code>lpApplicationName</code> is not required for this. <code>CreateProcess</code> slices out the application path from <code>lpCommandLine</code>, based on white space or quoting, and passes this to <code>SearchPath</code> with an optional &quot;.exe&quot; extension. What exactly are the types and contents of <code>filePathName</code> and <code>commandCh</code>, and do you have <code>UNICODE</code> defined?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1502404529, "post_id": 45599821, "comment_id": 78208471, "body": "Your error handling is wrong, but despite that your code as posted works perfectly well for me on both Windows 7 and Windows 10.  Are you sure the problem isn&#39;t in the executable you&#39;re launching?"}, {"owner": {"reputation": 410, "user_id": 2608530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/4ctKm.png?s=128&g=1", "display_name": "rtischer8277", "link": "https://stackoverflow.com/users/2608530/rtischer8277"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1502453836, "post_id": 45599821, "comment_id": 78229036, "body": "@Harry Johnston Glad to hear the sample code is working for you. My test file was a simple generated MFC Dialog program with nothing changed but the caption so the problem is not the .exe file. I&#39;ll put the code on some of my other machines to see if it works there. 8 my 10 PCs are running Windows 10 and the other two 8.1."}, {"owner": {"reputation": 410, "user_id": 2608530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/4ctKm.png?s=128&g=1", "display_name": "rtischer8277", "link": "https://stackoverflow.com/users/2608530/rtischer8277"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1502457023, "post_id": 45599821, "comment_id": 78231216, "body": "@Harry Johnston I have now tested on two other machines with exactly the same problem. I thought it might be a bitness problem, so I did the tests again making sure all compilations were all x86, with no difference in the results. Let\u2019s compare compilers and OS versions. For the 3 tests PCs I am running  VS2017 Version 5.2(26430.14), VS2017 Version 5.2(26403.7) and VS2017 Version 5.2(26430.16). The OSs are 10.0.15063, 10.0.15063 and 10.0.16251 (insider edition)."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1502462974, "post_id": 45599821, "comment_id": 78235481, "body": "Does it work if you also pass <code>commandLine</code> as <code>&quot;C:\\\\File1&quot;</code>?  Can you run <code>C:\\File1</code> in CMD? It calls <code>CreateProcess</code> with the fully-qualified path in <code>lpApplicationName</code>. If that works, then there&#39;s probably something wrong with your build. You say it crashes, so execute it with an attached debugger or configure a post-mortem debugger. That beats guessing."}, {"owner": {"reputation": 410, "user_id": 2608530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/4ctKm.png?s=128&g=1", "display_name": "rtischer8277", "link": "https://stackoverflow.com/users/2608530/rtischer8277"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1502472566, "post_id": 45599821, "comment_id": 78241030, "body": "@eryksun I am executing the program in the VS debugger. Passing <code>\u201cC:\\\\File1\u201d</code> as <code>commandLine</code> with <code>NULL</code> in <code>lpApplicationName</code> crashes as well. Running from a command prompt gets this: \u201c&#39;File1&#39; is not recognized as an internal or external command, operable program or batch file\u201d. See crash images above."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1502473741, "post_id": 45599821, "comment_id": 78241629, "body": "CMD can execute a file without an extension if you add &quot;.&quot; to <code>PATHEXT</code>, e.g. <code>set PATHEXT=%PATHEXT%;.</code> should make it work."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1502474130, "post_id": 45599821, "comment_id": 78241810, "body": "I suppose it will fail from CMD too, since it looks like it&#39;s the target MFC app itself that&#39;s crashing with a failed assertion in mfc140ud.dll."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1502494188, "post_id": 45599821, "comment_id": 78249377, "body": "Try a child program without MFC, one that just calls MessageBox.  I wouldn&#39;t be at all surprised if you&#39;ve discovered a bug in MFC."}, {"owner": {"reputation": 410, "user_id": 2608530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/4ctKm.png?s=128&g=1", "display_name": "rtischer8277", "link": "https://stackoverflow.com/users/2608530/rtischer8277"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1502554186, "post_id": 45599821, "comment_id": 78262985, "body": "@Harry Johnston Works fine with an ordinary <code>C:\\\\ConsoleApp</code> as file. Then I looked up the file named in the <code>Debug Assertion Failed!</code> dialog at <code>\u2026 atlmfc\\src\\mfc\\appinit.cpp Line: 84</code>. Here is the line: ` ASSERT(*lpszExt == &#39;.&#39;);` Running <code>C:\\\\File1.</code> of course works fine. Next, I checked the docs again to see if I missed it. It was there: \u201cIf the file name ends in a period (.) with no extension, or if the file name contains a path, .exe is not appended\u201d. And, of course, the MFC <code>File1.</code> program runs fine with an ending period. So, no bug in MFC this time. Sorry, I should have seen that."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1502561750, "post_id": 45599821, "comment_id": 78265173, "body": "The docs are in error. <a href=\"https://msdn.microsoft.com/en-us/library/aa365527\" rel=\"nofollow noreferrer\"><code>SearchPath</code></a> is called whenever <code>lpApplicationName</code> is <code>NULL</code>, even if <code>lpCommandLine</code> contains a fully-qualified path for the executable. The search includes the optional extension &quot;.exe&quot;. Thus &quot;if the file name contains a path&quot;, it actually does try appending &quot;.exe&quot;. The docs are correct that appending &quot;.exe&quot; isn&#39;t tried if the name ends with &quot;.&quot;. Anyway, the assert in the MFC code is a bug; it&#39;s wrong to require an extension."}, {"owner": {"reputation": 410, "user_id": 2608530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/4ctKm.png?s=128&g=1", "display_name": "rtischer8277", "link": "https://stackoverflow.com/users/2608530/rtischer8277"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1502800864, "post_id": 45599821, "comment_id": 78343711, "body": "@eryksun Question: how are you able to determine that <code>SearchPath</code> is called whenever <code>lpApplicationName</code> is <code>NULL</code>? Are you reading this in the docs somewhere? Are you able to debug into <code>CreateProcess</code>?"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1502802737, "post_id": 45599821, "comment_id": 78344951, "body": "It&#39;s from debugging <code>kernelbase!CreateProcessInternalW</code> with several test cases. There&#39;s a lot of work to do in user mode before calling <code>ntdll!NtCreateUserProcess</code>, so a lot of the behavior can be discerned with a user-mode debugger. The kernel side is more tedious because you&#39;re limited in what you can do with live kernel debugging, such as not being able to set breakpoints. Kernel debugging generally requires two computers, or at least a VM."}, {"owner": {"reputation": 410, "user_id": 2608530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/4ctKm.png?s=128&g=1", "display_name": "rtischer8277", "link": "https://stackoverflow.com/users/2608530/rtischer8277"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1502898725, "post_id": 45599821, "comment_id": 78394198, "body": "@eryksun In the past I have sometimes been able to modify MFC directly in usermode by overriding the MFC function in my app code. In this case the function is <code>void CWinApp::SetCurrentHandles()</code> in the <code>\u2026\\atlmfc\\src\\mfc\\appinit.cpp</code> file. I tried this as an experiment, but was unable to <code>break</code> in the new code. My theory was that <code>void MyWinApp::SetCurrentHandles()</code> would override it and in my code I would eliminate the <code>ASSERT</code> on <code>\u2019.\u2019</code>. Shouldn\u2019t it be possible to do this and stay in usermode debugging? It would be a big advantage for us app developers."}], "owner": {"reputation": 410, "user_id": 2608530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/4ctKm.png?s=128&g=1", "display_name": "rtischer8277", "link": "https://stackoverflow.com/users/2608530/rtischer8277"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 887, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529138206, "creation_date": 1502309474, "last_edit_date": 1592644375, "question_id": 45599821, "link": "https://stackoverflow.com/questions/45599821/open-an-executable-file-without-an-exe-extension-with-createprocess", "title": "Open an executable file without an \u201c.exe\u201d extension with CreateProcess", "body": "<p>I want to create a process whose filename doesn\u2019t have the <code>.exe</code> extension. This is the same question as <a href=\"https://stackoverflow.com/questions/12655314\">Open an executable file without an \u201c.exe\u201d extension with ShellExecute</a> had, only with <code>CreateProcess</code>. The answer to his question said to set the <code>sei.lpClass = TEXT(&quot;exefile&quot;);</code>. No such parameter in the <code>STARTUPINFO</code> structure.</p>\n<p>Is there an equivalent solution for <code>CreateProcess</code>. Currently, it fails with no extension. Doesn\u2019t even give a proper error message. Just crashes the program.</p>\n<h1>Edit2:</h1>\n<p>Sorry, here's a complete test program demonstrating my problem:</p>\n<pre><code>#include &quot;stdafx.h&quot;\n#include &lt;Windows.h&gt;\n\nLPCTSTR FILE_PATH_NAME = _tcsdup( TEXT( &quot;C:\\\\File1.exe&quot; ) ); // ok, launches new process correctly\n//LPCTSTR FILE_PATH_NAME = _tcsdup( TEXT( &quot;C:\\\\File1&quot; ) ); // debug assertion in mfc\nLPCTSTR FILE_PATH_NAME = _tcsdup( TEXT( &quot;C:\\\\File1.&quot; ) ); // ok, launches new process correctly. Needs ending period (.) to work\nLPTSTR commandLine = _tcsdup( TEXT( &quot;1234&quot; ) );\n\nint main()\n{\n  PROCESS_INFORMATION pi;\n  STARTUPINFO si;\n\n  ZeroMemory( &amp;pi, sizeof( pi ) );\n  ZeroMemory( &amp;si, sizeof( si ) );\n  si.cb = sizeof( si );\n\n  CreateProcess\n  (\n    FILE_PATH_NAME,          // must be fully qualified file path name\n    commandLine,            // Command line (cannot be const or literal str)\n    NULL,                 // Process handle is not inheritable\n    NULL,                 // Thread handle is not inheritable\n    FALSE,                // handle inheritance false\n    0,                    // default\n    NULL,                 // Use parent's environment block\n    NULL,                 // Use parent's starting directory \n    &amp;si,                  // Pointer to startupinfo structure\n    &amp;pi                   // Pointer to process_information structure\n  );\n\n  DWORD lastError = GetLastError();\n  if( lastError != ERROR_SUCCESS )\n  {\n    // failed\n  }\n\n  CloseHandle( pi.hThread );\n  CloseHandle( pi.hProcess );\n\n  return 0;\n}\n</code></pre>\n<h1>Edit3:</h1>\n<p>Crash image</p>\n<p><a href=\"https://i.stack.imgur.com/1ndXC.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1ndXC.jpg\" alt=\"CreateProcess crash in VS debugger\" /></a></p>\n"}, {"tags": ["c++", "raytracing"], "comments": [{"owner": {"reputation": 9677, "user_id": 2000124, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/W8PnM.png?s=128&g=1", "display_name": "Rem", "link": "https://stackoverflow.com/users/2000124/rem"}, "edited": false, "score": 0, "creation_date": 1502309585, "post_id": 45599766, "comment_id": 78159080, "body": "have you looked at embree? <a href=\"https://embree.github.io/\" rel=\"nofollow noreferrer\">embree.github.io</a>"}, {"owner": {"reputation": 139, "user_id": 7978004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b5a0a81e32d18747dd286d8b85484ef?s=128&d=identicon&r=PG&f=1", "display_name": "Cloyz", "link": "https://stackoverflow.com/users/7978004/cloyz"}, "reply_to_user": {"reputation": 9677, "user_id": 2000124, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/W8PnM.png?s=128&g=1", "display_name": "Rem", "link": "https://stackoverflow.com/users/2000124/rem"}, "edited": false, "score": 0, "creation_date": 1502323641, "post_id": 45599766, "comment_id": 78164255, "body": "Thanks ! I will look at it."}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 7978004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b5a0a81e32d18747dd286d8b85484ef?s=128&d=identicon&r=PG&f=1", "display_name": "Cloyz", "link": "https://stackoverflow.com/users/7978004/cloyz"}, "edited": false, "score": 0, "creation_date": 1502331623, "post_id": 45602872, "comment_id": 78166161, "body": "Thank you very much !. I agree shooting 8 rays against 1 triangle will be an improvement since i can also benefit of mini frustums culling for primary rays. Batch and after reorganize ray results from different paths seems quite challenging :)"}, {"owner": {"reputation": 139, "user_id": 7978004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b5a0a81e32d18747dd286d8b85484ef?s=128&d=identicon&r=PG&f=1", "display_name": "Cloyz", "link": "https://stackoverflow.com/users/7978004/cloyz"}, "edited": false, "score": 0, "creation_date": 1502407059, "post_id": 45602872, "comment_id": 78209220, "body": "For the last line i think the two first operand should be swapped.  So : _mm256_blendv_ps(t, _mm256_set1_ps(-1.0f), failed);"}], "tags": [], "owner": {"reputation": 6746, "user_id": 8185995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d69271095c22ec7a2f5cad43ea3ac0?s=128&d=identicon&r=PG&f=1", "display_name": "robthebloke", "link": "https://stackoverflow.com/users/8185995/robthebloke"}, "is_accepted": true, "score": 6, "last_activity_date": 1502415672, "last_edit_date": 1502415672, "creation_date": 1502327091, "answer_id": 45602872, "question_id": 45599766, "link": "https://stackoverflow.com/questions/45599766/fast-sse-ray-4-triangle-intersection/45602872#45602872", "title": "Fast SSE ray - 4 triangle intersection", "body": "<p>It is possible to do up to 16 triangles with AVX512, 8 with AVX2, and 4 with SSE. The trick though, is to ensure the data is in SOA format. The other trick is to not 'return false' at any point (just filter the results at the end). So you triangle input would look something like:</p>\n\n<pre><code>  struct Tri {\n    __m256 e1[3];\n    __m256 e2[3];\n    __m256 v0[3];\n  };\n</code></pre>\n\n<p>And your ray would look like:</p>\n\n<pre><code>  struct Ray {\n    __m256 dir[3];\n    __m256 pos[3];\n  };\n</code></pre>\n\n<p>The maths code then starts to look far nicer (be aware the _mm_dp_ps is not the fastest function ever written - and also be aware that accessing the internal implementation of the __m128/__m256/__m512 types is not portable). </p>\n\n<pre><code>  #define or8f _mm256_or_ps\n  #define mul _mm256_mul_ps\n  #define fmsub _mm256_fmsub_ps\n  #define fmadd _mm256_fmadd_ps\n\n  void cross(__m256 result[3], const __m256 a[3], const __m256 b[3])\n  {\n    result[0] = fmsub(a[1], b[2], mul(b[1], a[2]));\n    result[1] = fmsub(a[2], b[0], mul(b[2], a[0]));\n    result[2] = fmsub(a[0], b[1], mul(b[0], a[1]));\n  }\n  __m256 dot(const __m256 a[3], const __m256 b[3])\n  {\n    return fmadd(a[2], b[2], fmadd(a[1], b[1], mul(a[0], b[0])));\n  }\n</code></pre>\n\n<p>You basically have 4 conditions in the method:</p>\n\n<pre><code>if (a &gt; negativeEpsilon &amp;&amp; a &lt; positiveEpsilon)\n\nif (u &lt; 0.0f)\n\nif (v &lt; 0.0f || (u + v &gt; 1.0f))\n\nif (t &lt; 0.0f || t &gt; m_length)\n</code></pre>\n\n<p>If any of those conditions are true, then there is no intersection. That basically requires a little refactoring (in pseudo code)</p>\n\n<pre><code>__m256 condition0 = (a &gt; negativeEpsilon &amp;&amp; a &lt; positiveEpsilon);\n\n__m256 condition1 = (u &lt; 0.0f)\n\n__m256 condition2 = (v &lt; 0.0f || (u + v &gt; 1.0f))\n\n__m256 condition3 = (t &lt; 0.0f || t &gt; m_length)\n\n// combine all conditions that can cause failure.\n__m256 failed = or8f(or8f(condition0, condition1), or8f(condition2, condition3));\n</code></pre>\n\n<p>So finally, if an intersection occurred, the result will be t. If an intersection <em>DID NOT</em> occur, then we need to set the result to something wrong (a negative number is possibly a good choice in this case!)</p>\n\n<pre><code>// if(failed) return -1;\n// else return t;\nreturn _mm256_blendv_ps(t, _mm256_set1_ps(-1.0f), failed);\n</code></pre>\n\n<p>Whilst the final code may look a bit nasty, it will end up being significantly faster than your approach. The devil is in the details though.... </p>\n\n<p>One major problem with this approach is that you have a choice between testing 1 ray against 8 triangles, or testing 8 rays against 1 triangle. For primarily rays this probably isn't a big deal. For secondary rays that have a habit of scattering in different directions), things can start to get a bit annoying. There's a good chance most of the ray tracing code will end up following a pattern of: test -> sort -> batch -> test -> sort -> batch</p>\n\n<p>If you don't follow that pattern, you're pretty much never going to get the most out of the vector units. (Thankfully the compress/expand instructions in AVX512 help out with this quite a lot!)</p>\n"}, {"tags": [], "owner": {"reputation": 139, "user_id": 7978004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b5a0a81e32d18747dd286d8b85484ef?s=128&d=identicon&r=PG&f=1", "display_name": "Cloyz", "link": "https://stackoverflow.com/users/7978004/cloyz"}, "is_accepted": false, "score": 3, "last_activity_date": 1502506404, "last_edit_date": 1502506404, "creation_date": 1502420387, "answer_id": 45626274, "question_id": 45599766, "link": "https://stackoverflow.com/questions/45599766/fast-sse-ray-4-triangle-intersection/45626274#45626274", "title": "Fast SSE ray - 4 triangle intersection", "body": "<p>I ended with the following working code</p>\n\n<pre><code>struct PackedTriangles\n{\n    __m256 e1[3];\n    __m256 e2[3];\n    __m256 v0[3];\n    __m256 inactiveMask; // Required. We cant always have 8 triangles per packet.\n};\n\nstruct PackedIntersectionResult\n{\n    float t = Math::infinity&lt;float&gt;();\n    int idx;\n};\n\nstruct PackedRay\n{\n    __m256 m_origin[3];\n    __m256 m_direction[3];\n    __m256 m_length;\n\n    bool intersect(const PackedTriangles&amp; packedTris, PackedIntersectionResult&amp; result) const;\n};\n\n#define or8f _mm256_or_ps\n#define mul _mm256_mul_ps\n#define fmsub _mm256_fmsub_ps\n#define fmadd _mm256_fmadd_ps\n#define cmp _mm256_cmp_ps\n#define div _mm256_div_ps\n\nvoid avx_multi_cross(__m256 result[3], const __m256 a[3], const __m256 b[3])\n{\n    result[0] = fmsub(a[1], b[2], mul(b[1], a[2]));\n    result[1] = fmsub(a[2], b[0], mul(b[2], a[0]));\n    result[2] = fmsub(a[0], b[1], mul(b[0], a[1]));\n}\n\n__m256 avx_multi_dot(const __m256 a[3], const __m256 b[3])\n{\n    return fmadd(a[2], b[2], fmadd(a[1], b[1], mul(a[0], b[0])));\n}\n\nvoid avx_multi_sub(__m256 result[3], const __m256 a[3], const __m256 b[3])\n{\n    result[0] = _mm256_sub_ps(a[0], b[0]);\n    result[1] = _mm256_sub_ps(a[1], b[1]);\n    result[2] = _mm256_sub_ps(a[2], b[2]);\n}\n\nconst __m256 oneM256 = _mm256_set1_ps(1.0f);\nconst __m256 minusOneM256 = _mm256_set1_ps(-1.0f);\nconst __m256 positiveEpsilonM256 = _mm256_set1_ps(1e-6f);\nconst __m256 negativeEpsilonM256 = _mm256_set1_ps(-1e-6f);\nconst __m256 zeroM256 = _mm256_set1_ps(0.0f);\n\nbool PackedRay::intersect(const PackedTriangles&amp; packedTris, PackedIntersectionResult&amp; result) const\n{\n    __m256 q[3];\n    avx_multi_cross(q, m_direction, packedTris.e2);\n\n    __m256 a = avx_multi_dot(packedTris.e1, q);\n\n    __m256 f = div(oneM256, a);\n\n    __m256 s[3];\n    avx_multi_sub(s, m_origin, packedTris.v0);\n\n    __m256 u = mul(f, avx_multi_dot(s, q));\n\n    __m256 r[3];\n    avx_multi_cross(r, s, packedTris.e1);\n\n    __m256 v = mul(f, avx_multi_dot(m_direction, r));\n\n    __m256 t = mul(f, avx_multi_dot(packedTris.e2, r));\n\n    // Failure conditions\n    __m256 failed = _mm256_and_ps(\n        cmp(a, negativeEpsilonM256, _CMP_GT_OQ),\n        cmp(a, positiveEpsilonM256, _CMP_LT_OQ)\n    );\n\n    failed = or8f(failed, cmp(u, zeroM256, _CMP_LT_OQ));\n    failed = or8f(failed, cmp(v, zeroM256, _CMP_LT_OQ));\n    failed = or8f(failed, cmp(_mm256_add_ps(u, v), oneM256, _CMP_GT_OQ));\n    failed = or8f(failed, cmp(t, zeroM256, _CMP_LT_OQ));\n    failed = or8f(failed, cmp(t, m_length, _CMP_GT_OQ));\n    failed = or8f(failed, packedTris.inactiveMask);\n\n    __m256 tResults = _mm256_blendv_ps(t, minusOneM256, failed);\n\n    int mask = _mm256_movemask_ps(tResults);\n    if (mask != 0xFF)\n    {\n        // There is at least one intersection\n        result.idx = -1;\n\n        float* ptr = (float*)&amp;tResults;\n        for (int i = 0; i &lt; 8; ++i)\n        {\n            if (ptr[i] &gt;= 0.0f &amp;&amp; ptr[i] &lt; result.t)\n            {\n                result.t = ptr[i];\n                result.idx = i;\n            }\n        }\n\n        return result.idx != -1;\n    }\n\n    return false;\n}\n</code></pre>\n\n<p><strong>RESULTS</strong></p>\n\n<p>The results are awesome. For a 100k triangle scene <strong>i have a 84% speedup</strong> !!. For a very small scene(20 triangles) i have a performance loss of 13%. But it's ok because these one are not usual.</p>\n"}], "owner": {"reputation": 139, "user_id": 7978004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b5a0a81e32d18747dd286d8b85484ef?s=128&d=identicon&r=PG&f=1", "display_name": "Cloyz", "link": "https://stackoverflow.com/users/7978004/cloyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1461, "favorite_count": 6, "accepted_answer_id": 45602872, "answer_count": 2, "score": 4, "last_activity_date": 1502506404, "creation_date": 1502309273, "last_edit_date": 1502322525, "question_id": 45599766, "link": "https://stackoverflow.com/questions/45599766/fast-sse-ray-4-triangle-intersection", "title": "Fast SSE ray - 4 triangle intersection", "body": "<p>I am currently working on a Path Tracer, and i am looking for ways to optimize my ray-triangle intersections. I currently use the following sse4 implementation of Moller-Trumbore algorithm:</p>\n\n<pre><code>bool Ray::intersectTriangle(const Triangle tri, float&amp; result) const\n{\n    __m128 q = _mm_cross_ps(m_directionM128, tri.e2);\n\n    float a = _mm_dp_ps(tri.e1, q, dotProductMask).m128_f32[0];\n\n    if (a &gt; negativeEpsilon &amp;&amp; a &lt; positiveEpsilon)\n        return false;\n\n    float f = 1.0f / a;\n\n    __m128 s = _mm_sub_ps(m_originM128, tri.v0);\n    float u = f * _mm_dp_ps(s, q, dotProductMask).m128_f32[0];\n\n    if (u &lt; 0.0f)\n        return false;\n\n    __m128 r = _mm_cross_ps(s, tri.e1);\n    float v = f * _mm_dp_ps(m_directionM128, r, dotProductMask).m128_f32[0];\n\n    if (v &lt; 0.0f || (u + v &gt; 1.0f))\n        return false;\n\n    float t = f * _mm_dp_ps(tri.e2, r, dotProductMask).m128_f32[0];\n    if (t &lt; 0.0f || t &gt; m_length)\n        return false;\n\n    result = t;\n\n    return true;\n}\n</code></pre>\n\n<p>(If someone see a way to optimize it let me know).\nThen i've read that it is possible to perform intersection tests on 4 triangles simultaneously using SIMD intructions. But how to do that ? I don't see how could it be possible to implement it in a way that will be more efficient than my sequential fashion.  </p>\n\n<p><a href=\"http://s000.tinyupload.com/?file_id=41574205242427972905\" rel=\"nofollow noreferrer\">Here</a> the small code concerned of my renderer.</p>\n"}, {"tags": ["c++", "arrays", "opengl", "matrix"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1502310091, "post_id": 45599691, "comment_id": 78159315, "body": "What does <code>glGetError</code> return? And what does <code>glGetUniformLocation</code> return?"}, {"owner": {"reputation": 317, "user_id": 4308277, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/967ebed83022fd9d018dfdc92c86cf86?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo Muratov", "link": "https://stackoverflow.com/users/4308277/pavlo-muratov"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1502312774, "post_id": 45599691, "comment_id": 78160615, "body": "Your comment led me to a solution. There is a very stupid bug on my end. The code I posted is actually slightly different from what I&#39;m using in my project. In my project I get all uniform names using glGetProgramiv and glGetActiveUniform at initialization stage, then put all name - location pairs in a map. I get locations from that map when its time to make glUniform... calls. As it turned out glGetActiveUniform gives uDepthSplits[0] as a name of the uniform which leads to absence of uDepthSplits key in the map. glGetUniformLocation works equally well with uDepthSplits and uDepthSplits[0]."}, {"owner": {"reputation": 317, "user_id": 4308277, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/967ebed83022fd9d018dfdc92c86cf86?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo Muratov", "link": "https://stackoverflow.com/users/4308277/pavlo-muratov"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1502313112, "post_id": 45599691, "comment_id": 78160762, "body": "I&#39;m sorry for misleading you by substituting code pieces, but that brought a solution, interestingly enough."}], "owner": {"reputation": 317, "user_id": 4308277, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/967ebed83022fd9d018dfdc92c86cf86?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo Muratov", "link": "https://stackoverflow.com/users/4308277/pavlo-muratov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 803, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502485073, "creation_date": 1502309012, "last_edit_date": 1502485073, "question_id": 45599691, "link": "https://stackoverflow.com/questions/45599691/properly-set-uniform-array-in-opengl-shader", "title": "Properly set uniform array in OpenGL shader", "body": "<p>I have two uniform arrays</p>\n\n<pre><code>uniform mat4 uLightSpaceMatrices[6];\nuniform float uDepthSplits[kMaxCascades];\n</code></pre>\n\n<p>Where kMaxCascades is defined as follows</p>\n\n<pre><code>const int kMaxCascades = 4;\n</code></pre>\n\n<p>The only way I can set values correctly is by obtaining separate uniform locations for each element in the array:</p>\n\n<ol>\n<li><p>For matrix array</p>\n\n<pre><code>template &lt;std::size_t size&gt;\nvoid setUniformArray(const std::string&amp; uniformName, const std::array&lt;glm::mat4, size&gt;&amp; matrices) {\n      for(int i = 0; i &lt; matrices.size(); ++i) {\n           glUniformMatrix4fv(glGetUniformLocation(mName, (uniformName + \"[\" + std::to_string(i) + \"]\").c_str()), 1, GL_FALSE, glm::value_ptr(matrices[i]));\n      }\n}\n</code></pre></li>\n<li><p>For floats array</p>\n\n<pre><code>for(int i = 0; i &lt; cascades.splits.size(); ++i) {\n     std::string name = \"uDepthSplits\";\n     std::string fullName = name + \"[\" + std::to_string(i) + \"]\";\n     glUniform1f(glGetUniformLocation(mName, fullName.c_str()), cascades.splits[i]);\n}\n</code></pre>\n\n<p>Where splits is a <code>std::vector&lt; float &gt;</code> </p></li>\n</ol>\n\n<p>Now, what is not working, but should (as I see it):</p>\n\n<ol>\n<li><p>For matrix array</p>\n\n<p>Just one call to glUniformMatrix4fv with number of matrices specified</p>\n\n<pre><code>template &lt;std::size_t size&gt;\nvoid setUniformArray(const std::string&amp; uniformName, const std::array&lt;glm::mat4, size&gt;&amp; matrices) {\n    glUniformMatrix4fv(glGetUniformLocation(mName, uniformName.c_str()), matrices.size(), GL_FALSE, matrices.data());\n}\n</code></pre></li>\n<li><p>For floats array</p>\n\n<pre><code>glUniform1fv(glGetUniformLocation(mName, \"uDepthSplits\"), cascades.splits.size(), cascades.splits.data());\n</code></pre></li>\n</ol>\n\n<p>The question is <strong>WHY</strong> does one approach work and another doesn't? </p>\n"}, {"tags": ["c++", "sorting", "gcc", "std", "gnu"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 8, "creation_date": 1502308676, "post_id": 45599509, "comment_id": 78158645, "body": "Where would you put <code>c</code> if <code>a &lt; b</code> and <code>b &lt; c</code> but <code>c &lt; a</code>?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1502309311, "post_id": 45599509, "comment_id": 78158950, "body": "&quot;i.e. precisely why it can crash.&quot; There are many possible implementations of <code>std::sort</code>. Only what is in common - they must follow specifications. So you question is - what is possible (future) implementation that can crash on this particular violation. Do not you think you are asking for too match?"}, {"owner": {"reputation": 469, "user_id": 2386397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12eae0dbe973add131df20f9478cbe78?s=128&d=identicon&r=PG", "display_name": "Mike B", "link": "https://stackoverflow.com/users/2386397/mike-b"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1502318642, "post_id": 45599509, "comment_id": 78162896, "body": "@NathanOliver I believe this will depend entirely on the order of the initial input and the sorting algorithm chosen. I&#39;ve done a few scratch-pad paper approaches and found that the &#39;invalid&#39; elements will often naturally gravitate to the top or bottom of the array, or they may end up in the middle.  Of course there&#39;s no &#39;valid&#39; result from this sort. C could be anywhere such that it satisfies being smaller or larger than one of the adjacent elements. I&#39;m thinking for a semi-efficient bubblesort that ignores the top element on the nth pass, for example, it might fail even that requirement."}, {"owner": {"reputation": 469, "user_id": 2386397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12eae0dbe973add131df20f9478cbe78?s=128&d=identicon&r=PG", "display_name": "Mike B", "link": "https://stackoverflow.com/users/2386397/mike-b"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1502318827, "post_id": 45599509, "comment_id": 78162979, "body": "@Slava I know it&#39;s a bit of a longshot. I&#39;ve done some extensive googling and I&#39;ve found a couple people saying that they know std::sort will crash when you use a non-transitive comparator, but I guess I&#39;m hoping somebody would be familiar with a specific usecase and would have faced it before, and be able to give me an idea for why this happens.  In the live code that causes this issue, the problem is intermittant and I have no capacity to reproduce. Furthermore, the binary has had the debug symbols stripped so I struggle to follow the exact code path."}, {"owner": {"reputation": 767718, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1592454009, "post_id": 45599509, "comment_id": 110432408, "body": "So it appears (to me at least) that you&#39;re breaking the contract with the sort function and wondering why things are going wrong. It&#39;s this contract that allows the sort function to make assumptions when doing its job, assumptions that probably make it faster. Surely it would make more sense to either respect the contract or find a <i>different</i> sort function that allows for your case. I too am curious that, if you have a sorted list <code>a, b</code> and you want to insert a <code>c</code> that&#39;s both less than <code>a</code> and more than <code>b</code> (and also possibly <i>between</i> <code>a</code> and <code>b</code>), where is it meant to go?"}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 0, "creation_date": 1611436959, "post_id": 45599509, "comment_id": 116452594, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/2441045/bewildering-segfault-involving-stl-sort-algorithm\">Bewildering SegFault involving STL sort algorithm</a>"}], "owner": {"reputation": 469, "user_id": 2386397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12eae0dbe973add131df20f9478cbe78?s=128&d=identicon&r=PG", "display_name": "Mike B", "link": "https://stackoverflow.com/users/2386397/mike-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1502308323, "creation_date": 1502308323, "question_id": 45599509, "link": "https://stackoverflow.com/questions/45599509/why-does-stdsort-segfault-with-non-transitive-comparators", "title": "Why does std::sort segfault with non-transitive comparators?", "body": "<pre><code>struct Object\n{\n    int x;\n    int y;\n    bool isXValid()\n    {\n       return x &gt; 0;\n    }\n};\n\nbool mySort(const Object&amp; lhs, const Object&amp; rhs)\n{\n    // Note the short-circuit here\n    bool isValidForCheck = lhs.isXValid() &amp;&amp; rhs.isXValid();\n\n    // rhs may be valid because short-circuit, or both may be invalid\n    if (isValidForCheck)\n    {\n       return lhs.x &lt; rhs.x;\n    }\n\n    return lhs.y &lt; rhs.y;\n}\n\nint main()\n{\n    std::vector&lt;Object&gt; myVec;\n    // random populating of myVec\n    std::sort(myVec.begin(), myVec.end(), mySort);\n    return 0;\n}\n</code></pre>\n\n<p>My comparison function is irreflexive but does not respect transitivity.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1293231/stl-ordering-strict-weak-ordering\">stl ordering - strict weak ordering</a></p>\n\n<p>Thus, if:</p>\n\n<pre><code>  (a &lt; b) == true, (b &lt; a) must be false.\n</code></pre>\n\n<p>Additionally, if:</p>\n\n<pre><code>   a == b, then (a &lt; b) and (b &lt; a) are false.\n</code></pre>\n\n<p>However, it is not transitive. For example, with the following values:</p>\n\n<pre><code> (1, 3) (-1, 2), (3, 1)\n</code></pre>\n\n<p>Then it is possible to produce a sorted container where:</p>\n\n<pre><code>  a &lt; b, and b &lt; c, but c &lt; a.\n</code></pre>\n\n<p>This answer : <a href=\"https://stackoverflow.com/questions/24048022/what-causes-stdsort-to-access-address-out-of-range\">What causes std::sort() to access address out of range</a> explains why std::sort will address out-of-bounds when the comparison function doesn't respect irreflexibility (for example, quicksort where we do comp(pivot, pivot) and get true, thus the left pointer keeps walking right off the end of the array).</p>\n\n<p>However, I am seeing crashes with comparisons that are irreflexive but non-transitive. I also believe I am going off the end of the array.</p>\n\n<p>I cannot provide the exact code here as it is proprietary. The example above will not crash in my tests, but I am aware that std::sort will select different algorithms based upon the container and elements to be sorted.</p>\n\n<p>What I'd like to know is if anybody knows why std::sort would crash under GNU C++ when the comparison is non-transitive? I know that non-transitive comparisons break the contract and it's undefined behaviour, but I was hoping for a similar answer to the one in the linked question - i.e. precisely <em>why</em> it can crash.</p>\n"}, {"tags": ["c++", "stdio"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1502308191, "post_id": 45599457, "comment_id": 78158401, "body": "The <code>s</code> doesn&#39;t belong there in the first snippet."}, {"owner": {"reputation": 5, "user_id": 8425881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59eaccecec9443910f44ea333a17c45b?s=128&d=identicon&r=PG&f=1", "display_name": "R. Tyma", "link": "https://stackoverflow.com/users/8425881/r-tyma"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1502308338, "post_id": 45599457, "comment_id": 78158479, "body": "data is array of chars char data[20] so I think s is good format."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1502308419, "post_id": 45599457, "comment_id": 78158520, "body": "<code>fscanf</code> can&#39;t back up, so when it hits <code>%s</code> in the format it reads an entire string, which is all characters until a whitespace."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1502308473, "post_id": 45599457, "comment_id": 78158540, "body": "<code>%s[^\\&quot;]</code> ===&gt; <code>%[^\\&quot;]</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1502308526, "post_id": 45599457, "comment_id": 78158574, "body": "See what @n.m. noted, and <a href=\"http://en.cppreference.com/w/cpp/io/c/fscanf\" rel=\"nofollow noreferrer\">review the documentation for <code>std::scanf</code></a>. And don&#39;t feel bad. You&#39;re not the first person to mash together set and string formatted input, and you certainly won&#39;t be the last."}, {"owner": {"reputation": 5, "user_id": 8425881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59eaccecec9443910f44ea333a17c45b?s=128&d=identicon&r=PG&f=1", "display_name": "R. Tyma", "link": "https://stackoverflow.com/users/8425881/r-tyma"}, "edited": false, "score": 0, "creation_date": 1502308563, "post_id": 45599457, "comment_id": 78158594, "body": "so there is no method except put space before &quot;?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1502308909, "post_id": 45599457, "comment_id": 78158760, "body": "Not sure what you&#39;re asking. This is a dupe of many, <i>many</i> different previous asks, but its somewhat painful to find as the titles and contexts are generally so divergent they don&#39;t search well. <a href=\"http://ideone.com/WyNERQ\" rel=\"nofollow noreferrer\">See live example here</a>. I&#39;ll spend a little time looking for an appropriate dupe unless someone else beats me to it."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1502311097, "post_id": 45599457, "comment_id": 78159816, "body": "Why are you using fscanf?"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 8425881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59eaccecec9443910f44ea333a17c45b?s=128&d=identicon&r=PG&f=1", "display_name": "R. Tyma", "link": "https://stackoverflow.com/users/8425881/r-tyma"}, "edited": false, "score": 0, "creation_date": 1502364121, "post_id": 45599862, "comment_id": 78182715, "body": "Ok, that is what I need. Now it works exactly how I want."}], "tags": [], "owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "is_accepted": true, "score": 0, "last_activity_date": 1502309672, "creation_date": 1502309672, "answer_id": 45599862, "question_id": 45599457, "link": "https://stackoverflow.com/questions/45599457/how-to-ignore-quote-in-fscanf/45599862#45599862", "title": "how to ignore quote in fscanf", "body": "<p>If you don't want to think too deeply about formatting strings you could always read in the full string than take out the sub string that you want.  </p>\n\n<p><strong>Example:</strong>\n<br><br>The following code searches through <code>str</code> for the first <code>\"</code> and last <code>\"</code> and puts the substring in <code>strNew</code>.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;  //used for ease but not the best to use in actual code.\n\nint main()\n{\n  string str = \"variable=\\\"name\\\"\";\n  cout &lt;&lt; str &lt;&lt; endl;\n  int first = str.find(\"\\\"\");\n  int last = str.find_last_of(\"\\\"\");\n  string strNew = str.substr (first + 1, last - first -1);\n  cout &lt;&lt; strNew &lt;&lt; endl;\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 8425881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59eaccecec9443910f44ea333a17c45b?s=128&d=identicon&r=PG&f=1", "display_name": "R. Tyma", "link": "https://stackoverflow.com/users/8425881/r-tyma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 45599862, "answer_count": 1, "score": 0, "last_activity_date": 1502309672, "creation_date": 1502308105, "question_id": 45599457, "link": "https://stackoverflow.com/questions/45599457/how-to-ignore-quote-in-fscanf", "title": "how to ignore quote in fscanf", "body": "<p>I have problem with read string from text file. In file there is data in this format:</p>\n\n<p>something=\"test\"</p>\n\n<p>And I want to read string between quotes. So in my program I do:</p>\n\n<pre><code>fscanf(fil,\"language=\\\"%s[^\\\"]\",data);  \n</code></pre>\n\n<p>or</p>\n\n<pre><code>fscanf(fil,\"language=\\\"%s\\\"\",data);\n</code></pre>\n\n<p>but I always get test\" in variable data. How can I ignore the second quote? Except putting space before in file. I want exactly that format in text file.</p>\n\n<p>I will be grateful for help.</p>\n"}, {"tags": ["c++", "crtp"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1502308155, "post_id": 45599427, "comment_id": 78158388, "body": "Related: <a href=\"https://stackoverflow.com/q/2469013/1896169\">stackoverflow.com/q/2469013/1896169</a>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1502308197, "post_id": 45599427, "comment_id": 78158405, "body": "Also related, almost answers this: <a href=\"https://stackoverflow.com/q/4173254/1896169\">stackoverflow.com/q/4173254/1896169</a>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1502308212, "post_id": 45599427, "comment_id": 78158412, "body": "To put it simply, yes this is safe"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1502308352, "post_id": 45599427, "comment_id": 78158484, "body": "<code>is_base_of&lt; A&lt;Derived, T&gt;, D&gt;</code> seems to be wrong. If you restrict potential derived classes to D alone, you don&#39;t need to define any templates. Perhaps you meant <code>is_base_of&lt; A&lt;Derived, T&gt;, Derived&gt;</code>."}, {"owner": {"reputation": 2897, "user_id": 3392714, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/302ac6bfbe982dcd53aa123f9bde72eb?s=128&d=identicon&r=PG&f=1", "display_name": "dani", "link": "https://stackoverflow.com/users/3392714/dani"}, "edited": false, "score": 0, "creation_date": 1502308453, "post_id": 45599427, "comment_id": 78158535, "body": "yes, this was what i mean."}], "answers": [{"comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1502311295, "post_id": 45599735, "comment_id": 78159901, "body": "Pedantic mode on: CRTP is an idiom, not a pattern."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 1, "creation_date": 1502313638, "post_id": 45599735, "comment_id": 78160959, "body": "@skypjack Well, nitpicking back: At least the <i>P</i> in CRTP stands for <i>Pattern</i> ;-)"}], "tags": [], "owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "is_accepted": true, "score": 2, "last_activity_date": 1502310005, "last_edit_date": 1502310005, "creation_date": 1502309166, "answer_id": 45599735, "question_id": 45599427, "link": "https://stackoverflow.com/questions/45599427/if-i-cast-the-this-pointer-of-a-base-class-to-the-derived-type-is-it-safe-and-w/45599735#45599735", "title": "If I cast the this pointer of a base class to the derived type, is it safe and well defind?", "body": "<blockquote>\n  <p>If I have a template base class that takes the type of the derived class, is safe to cast the <code>this</code> pointer of this base class to the type of the derived class?<br>\n  ...<br>\n  It obviously works (here), but is it well defined?</p>\n</blockquote>\n\n<p>Yes, it's safe and is well defined. It's actually a well known and commonly used pattern (see <a href=\"https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern\" rel=\"nofollow noreferrer\">CRTP</a>) and aka <em>Static Polymorphism</em>.</p>\n\n<p>Examples of usage:</p>\n\n<ul>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/3ax346b7.aspx\" rel=\"nofollow noreferrer\"><strong>Microsoft ATL</strong></a></li>\n<li>Alexei Andrescou's <a href=\"http://loki-lib.sourceforge.net/\" rel=\"nofollow noreferrer\"><strong>Loki library</strong></a></li>\n</ul>\n\n<hr>\n\n<pre><code>Derived *thisToDerived() {\n    // Your static_assert is superfluos\n    // static_assert(std::is_base_of&lt; A&lt;Derived, T&gt;, Derived&gt;::value, \"not\");\n    return static_cast&lt;Derived*&gt;(this);\n        // ^^^^^^^^^^^^^^^^^^^^^\n        // Already guarantees that Derived is inherited from A\n}\n</code></pre>\n"}], "owner": {"reputation": 2897, "user_id": 3392714, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/302ac6bfbe982dcd53aa123f9bde72eb?s=128&d=identicon&r=PG&f=1", "display_name": "dani", "link": "https://stackoverflow.com/users/3392714/dani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 1, "accepted_answer_id": 45599735, "answer_count": 1, "score": 0, "last_activity_date": 1502314696, "creation_date": 1502308003, "last_edit_date": 1502314696, "question_id": 45599427, "link": "https://stackoverflow.com/questions/45599427/if-i-cast-the-this-pointer-of-a-base-class-to-the-derived-type-is-it-safe-and-w", "title": "If I cast the this pointer of a base class to the derived type, is it safe and well defind?", "body": "<p>If I have a template base class that takes the type of the derived class, is safe to cast the this pointer of this base class to the type of the derived class? </p>\n\n<p>Consider this code, where the base class <code>A</code> casts the this pointer to a template parameter (<code>Derived</code>). It also checks if the provided type is actually derived from this class. It obviously works (here), but is it well defined?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass D;\n\ntemplate&lt;typename Derived, typename T&gt;\nclass A\n{\npublic:\n    Derived *thisToDerived() {\n        static_assert(std::is_base_of&lt; A&lt;Derived, T&gt;, Derived&gt;::value, \"not\");\n        return static_cast&lt;Derived*&gt;(this);\n    }\nprivate:\n    T m;\n};\n\n\nclass D : public A&lt;D, int&gt;\n{\nprivate:\n    double d;\n    float f;\n};\n\n\nint main() {\n    D d;\n    std::cout&lt;&lt;\"this:    \"&lt;&lt;&amp;d&lt;&lt;\"\\nderived: \"&lt;&lt;d.thisToDerived();\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1502308397, "post_id": 45599348, "comment_id": 78158507, "body": "You can use your approach too. If you dig deeper, you might find how the two approaches are different, and when you should use one vs the other."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1502308485, "post_id": 45599348, "comment_id": 78158550, "body": "I&#39;m not sure what you&#39;re asking here. Are you wondering <i>if</i> this works, or <i>why</i> it works, or how to get around it?"}, {"owner": {"reputation": 445, "user_id": 2723947, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100004556739052/picture?type=large", "display_name": "mualloc", "link": "https://stackoverflow.com/users/2723947/mualloc"}, "edited": false, "score": 0, "creation_date": 1502308568, "post_id": 45599348, "comment_id": 78158597, "body": "@R Sahu Can you, please, explain the difference or provide links-related keywords that I can read-search?"}, {"owner": {"reputation": 445, "user_id": 2723947, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100004556739052/picture?type=large", "display_name": "mualloc", "link": "https://stackoverflow.com/users/2723947/mualloc"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1502309075, "post_id": 45599348, "comment_id": 78158854, "body": "@meagar Actually, I haven&#39;t even tried the approach I mentioned but my wonderings would be if this works and if it works, why not mentioned as a way of making a class non-inheritable in literature?"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 2, "creation_date": 1502309252, "post_id": 45599348, "comment_id": 78158931, "body": "@mualloc Because we have <code>final</code> now? Yes, of course you can use a private constructor for this, but why would you? That&#39;s the <i>wrong</i> solution now that <code>final</code> exists. You can use a wrench to hammer in a nail, but you shouldn&#39;t wonder why &quot;the literature&quot; doesn&#39;t bother to mention this fact when <i>hammers</i> exist."}, {"owner": {"reputation": 445, "user_id": 2723947, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100004556739052/picture?type=large", "display_name": "mualloc", "link": "https://stackoverflow.com/users/2723947/mualloc"}, "edited": false, "score": 0, "creation_date": 1502309486, "post_id": 45599348, "comment_id": 78159042, "body": "@meager What is wrong with this solution? That is my question. Someone might have to work with an old compiler which &#39;final&#39; does not exist. Actually, it happens very often for long-term projects."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1502310583, "post_id": 45599348, "comment_id": 78159570, "body": "@mualloc &quot;Someone might have to work with an old compiler which &#39;final&#39; does not exist&quot; - then you should (kindly) lean on them until they agree to update their tool-chain to something more modern and then use <code>final</code> :-) That&#39;s the <i>proper</i> fix."}, {"owner": {"reputation": 1338, "user_id": 4360353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f921d78049db0195bb3fc3cda8e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "Basya", "link": "https://stackoverflow.com/users/4360353/basya"}, "edited": false, "score": 0, "creation_date": 1502310643, "post_id": 45599348, "comment_id": 78683016, "body": "You can find places that talk about this technique and other ideas, from before &quot;final&quot; existed in C++. You just have to look at older posts/mailing list entries. For example: <a href=\"http://www.cplusplus.com/forum/general/12600/\" rel=\"nofollow noreferrer\">this from 2009</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "is_accepted": false, "score": 0, "last_activity_date": 1502311610, "creation_date": 1502311610, "answer_id": 45600371, "question_id": 45599348, "link": "https://stackoverflow.com/questions/45599348/making-a-class-non-inheritable-by-defining-default-private-constructor/45600371#45600371", "title": "Making a class non-inheritable by defining default private constructor", "body": "<p>Why would the standard forbid that? In theory, nothing prevents you from declaring your Derived class a friend of the Base class. That would ensure the only possible way to extend your base class is through very well known classes. I can't think of any practical case and I think it's bad, but it is POSSIBLE to do such horror...</p>\n\n<pre><code>struct BaseClass\n{\nfriend struct DerivedClass;\n\nprivate:\n    BaseClass() {}\n};\n\nstruct DerivedClass : BaseClass\n{\npublic:\n    DerivedClass() {}\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 445, "user_id": 2723947, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100004556739052/picture?type=large", "display_name": "mualloc", "link": "https://stackoverflow.com/users/2723947/mualloc"}, "edited": false, "score": 1, "creation_date": 1502311898, "post_id": 45600385, "comment_id": 78160198, "body": "class A &#39;s constructor is public, so it is not what I am saying."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 445, "user_id": 2723947, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100004556739052/picture?type=large", "display_name": "mualloc", "link": "https://stackoverflow.com/users/2723947/mualloc"}, "edited": false, "score": 1, "creation_date": 1502312006, "post_id": 45600385, "comment_id": 78160253, "body": "@mualloc default visibility of a class is <code>private</code>, thus <code>class C { C() {} };</code> is equivalent to <code>class C { private: C() {} };</code>. Constructor isn&#39;t public actually. If you try to construct a <code>B</code> in the second example it won&#39;t compile."}, {"owner": {"reputation": 445, "user_id": 2723947, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100004556739052/picture?type=large", "display_name": "mualloc", "link": "https://stackoverflow.com/users/2723947/mualloc"}, "edited": false, "score": 1, "creation_date": 1502312630, "post_id": 45600385, "comment_id": 78160556, "body": "OK, you are right about the default visibility issue and thank you for your explanation. That is what I was looking for."}, {"owner": {"reputation": 445, "user_id": 2723947, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100004556739052/picture?type=large", "display_name": "mualloc", "link": "https://stackoverflow.com/users/2723947/mualloc"}, "edited": false, "score": 1, "creation_date": 1502313011, "post_id": 45600385, "comment_id": 78160716, "body": "By the way, I am sorry for being such careless since I did not  compile the code that I described so that I could discover and define the problem better."}, {"owner": {"reputation": 445, "user_id": 2723947, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100004556739052/picture?type=large", "display_name": "mualloc", "link": "https://stackoverflow.com/users/2723947/mualloc"}, "edited": false, "score": 1, "creation_date": 1502313279, "post_id": 45600385, "comment_id": 78160819, "body": "Actually, what are the differences between struct B: A {} and struct B: A { B(): A() {} }?"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 445, "user_id": 2723947, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100004556739052/picture?type=large", "display_name": "mualloc", "link": "https://stackoverflow.com/users/2723947/mualloc"}, "edited": false, "score": 1, "creation_date": 1502313398, "post_id": 45600385, "comment_id": 78160872, "body": "@mualloc In the first case, <code>B()</code> is implicitly deleted. In the second case it&#39;s ill-formed for <code>A()</code> isn&#39;t visible."}, {"owner": {"reputation": 445, "user_id": 2723947, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100004556739052/picture?type=large", "display_name": "mualloc", "link": "https://stackoverflow.com/users/2723947/mualloc"}, "edited": false, "score": 0, "creation_date": 1502313639, "post_id": 45600385, "comment_id": 78160961, "body": "Doesn&#39;t compiler put B(): A() {} into B: A {} implicitly when programmer does not write specifically?"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 445, "user_id": 2723947, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100004556739052/picture?type=large", "display_name": "mualloc", "link": "https://stackoverflow.com/users/2723947/mualloc"}, "edited": false, "score": 0, "creation_date": 1502313700, "post_id": 45600385, "comment_id": 78160981, "body": "@mualloc In this case, no. The constructor is implicitly deleted for it would be ill-formed otherwise."}, {"owner": {"reputation": 445, "user_id": 2723947, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100004556739052/picture?type=large", "display_name": "mualloc", "link": "https://stackoverflow.com/users/2723947/mualloc"}, "edited": false, "score": 1, "creation_date": 1502315246, "post_id": 45600385, "comment_id": 78161649, "body": "Maybe I am asking too much but let me tell you what I inferred and correct me if I am wrong: A default constructor is created by compiler if it is not defined by user and it is CALLED by user. In former, since B type is not created in main(), a default B constructor is not created and in latter, since a default constructor, which calls private default constructor of base class, is created by user, it does not compile."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": true, "score": 2, "last_activity_date": 1502312557, "last_edit_date": 1502312557, "creation_date": 1502311674, "answer_id": 45600385, "question_id": 45599348, "link": "https://stackoverflow.com/questions/45599348/making-a-class-non-inheritable-by-defining-default-private-constructor/45600385#45600385", "title": "Making a class non-inheritable by defining default private constructor", "body": "<p><code>final</code> and private constructor are not the same thing.</p>\n\n<p>Consider this:</p>\n\n<pre><code>struct A final {};\nstruct B: A {};\n\nint main() {}\n</code></pre>\n\n<p>It won't compile, that's a fact.<br>\nNow consider this:</p>\n\n<pre><code>class A { A() {} };\nstruct B: A {};\n\nint main() {}\n</code></pre>\n\n<p>It compiles. Ok, it happens that <code>B()</code> constructor is deleted but you are not using it. It won't compile if you change slightly the definition to:</p>\n\n<pre><code>struct B: A { B(): A() {} };\n</code></pre>\n\n<p>Anyway, the previous example just <em>works</em> (for some mean of <em>works</em>), so what's the difference?<br>\n<code>final</code> forbids inheritance. A private constructor doesn't allow you to construct objects of <em>that</em> type but you can still define <em>that</em> type. Therefore you can do something like this (that doesn't make much sense but gives you an idea):</p>\n\n<pre><code>#include&lt;type_traits&gt;\n\nclass A { A() {}};\nstruct B: A {};\n\ntemplate&lt;typename T&gt;\nvoid f() {\n    static_assert(std::is_base_of&lt;A, B&gt;::value, \"!\");\n    // ...\n}\n\nint main() {\n    f&lt;B&gt;();\n}\n</code></pre>\n\n<p>How is it that it compiles if you cannot inherit from <code>A</code>? Because your assumption was wrong, you can inherit from <code>A</code>. You can't construct an object of type <code>B</code>, but you can still use <code>B</code> as a type as long as you don't try to create instances. On the other side, if you put there <code>final</code> you get a compile-time error and that's all, you cannot use type <code>B</code> in any way.</p>\n"}], "owner": {"reputation": 445, "user_id": 2723947, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100004556739052/picture?type=large", "display_name": "mualloc", "link": "https://stackoverflow.com/users/2723947/mualloc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 888, "favorite_count": 1, "accepted_answer_id": 45600385, "answer_count": 2, "score": 1, "last_activity_date": 1502312557, "creation_date": 1502307715, "last_edit_date": 1502309009, "question_id": 45599348, "link": "https://stackoverflow.com/questions/45599348/making-a-class-non-inheritable-by-defining-default-private-constructor", "title": "Making a class non-inheritable by defining default private constructor", "body": "<p>Although I have seen <code>final</code> and virtual inheritance methods achieve this, I cannot understand why defining no constructors, except a default private one, does not prevent a class from being inherited. (Also, base class's copy constructor and copy assignment methods should be declared private as a precaution.)</p>\n\n<p>Basically what I mean is if a base class's constructor is private and it has no other constructors, then, when a derived class wants to extend this base class:</p>\n\n<ol>\n<li><p>The derived class cannot call the default constructor of the base class because it is defined private</p></li>\n<li><p>The derived class cannot call any non-default constructors of the base class since there are no such constructors</p></li>\n</ol>\n\n<p>So it is a compile time error and I cannot find another way to get over this.</p>\n\n<p>I am sure I am wrong somewhere; otherwise, I could find a page on the internet that offers this as a way of making a class non-inheritable, but please, explain to me why I am wrong.</p>\n"}, {"tags": ["c++", "opengl", "glfw", "glew"], "comments": [{"owner": {"reputation": 1338, "user_id": 4360353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f921d78049db0195bb3fc3cda8e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "Basya", "link": "https://stackoverflow.com/users/4360353/basya"}, "edited": false, "score": 1, "creation_date": 1502307326, "post_id": 45599026, "comment_id": 78157999, "body": "Run it in the debugger and see which line causes the problem."}, {"owner": {"reputation": 1338, "user_id": 4360353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f921d78049db0195bb3fc3cda8e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "Basya", "link": "https://stackoverflow.com/users/4360353/basya"}, "edited": false, "score": 0, "creation_date": 1502307359, "post_id": 45599026, "comment_id": 78158015, "body": "Just a quick question -- are you in an embedded or otherwise unusual environment (like where the size of an unsigned int may be less than 32 bits).  (Rather unlikely these days, but you never know....)"}, {"owner": {"reputation": 57, "user_id": 8079885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbf8a732f7dc1d9483364049b5e9b9d?s=128&d=identicon&r=PG&f=1", "display_name": "64humans", "link": "https://stackoverflow.com/users/8079885/64humans"}, "reply_to_user": {"reputation": 1338, "user_id": 4360353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f921d78049db0195bb3fc3cda8e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "Basya", "link": "https://stackoverflow.com/users/4360353/basya"}, "edited": false, "score": 0, "creation_date": 1502307389, "post_id": 45599026, "comment_id": 78158030, "body": "Im running 64bit Ubuntu. And the problematic line is glGenBuffers(1, &amp;VBO)"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 2, "creation_date": 1502307402, "post_id": 45599026, "comment_id": 78158037, "body": "Why are you calling <code>glewInit()</code> <i>before</i> <code>glfwMakeContextCurrent()</code>?  It won&#39;t do anything useful without a current GL context."}, {"owner": {"reputation": 57, "user_id": 8079885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbf8a732f7dc1d9483364049b5e9b9d?s=128&d=identicon&r=PG&f=1", "display_name": "64humans", "link": "https://stackoverflow.com/users/8079885/64humans"}, "edited": false, "score": 0, "creation_date": 1502307482, "post_id": 45599026, "comment_id": 78158080, "body": "It never said anything about where to place glewInit()"}, {"owner": {"reputation": 57, "user_id": 8079885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbf8a732f7dc1d9483364049b5e9b9d?s=128&d=identicon&r=PG&f=1", "display_name": "64humans", "link": "https://stackoverflow.com/users/8079885/64humans"}, "edited": false, "score": 0, "creation_date": 1502307490, "post_id": 45599026, "comment_id": 78158085, "body": "It is working now Thank you so much!"}, {"owner": {"reputation": 1338, "user_id": 4360353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f921d78049db0195bb3fc3cda8e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "Basya", "link": "https://stackoverflow.com/users/4360353/basya"}, "edited": false, "score": 0, "creation_date": 1502308322, "post_id": 45599026, "comment_id": 78158472, "body": "for posterity, what fixed it?"}, {"owner": {"reputation": 1338, "user_id": 4360353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f921d78049db0195bb3fc3cda8e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "Basya", "link": "https://stackoverflow.com/users/4360353/basya"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1502309329, "post_id": 45599026, "comment_id": 78158961, "body": "@genpfault -- maybe you want to write it up as an answer?"}, {"owner": {"reputation": 57, "user_id": 8079885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbf8a732f7dc1d9483364049b5e9b9d?s=128&d=identicon&r=PG&f=1", "display_name": "64humans", "link": "https://stackoverflow.com/users/8079885/64humans"}, "edited": false, "score": 0, "creation_date": 1502309339, "post_id": 45599026, "comment_id": 78158971, "body": "Placing <code>glewInit()</code> after <code>glfwMakeContextCurrent()</code>"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "reply_to_user": {"reputation": 1338, "user_id": 4360353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f921d78049db0195bb3fc3cda8e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "Basya", "link": "https://stackoverflow.com/users/4360353/basya"}, "edited": false, "score": 0, "creation_date": 1502309489, "post_id": 45599026, "comment_id": 78159044, "body": "@BasyaPerlman: Eh, 64humans is welcome to it."}], "answers": [{"tags": [], "owner": {"reputation": 57, "user_id": 8079885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbf8a732f7dc1d9483364049b5e9b9d?s=128&d=identicon&r=PG&f=1", "display_name": "64humans", "link": "https://stackoverflow.com/users/8079885/64humans"}, "is_accepted": true, "score": 0, "last_activity_date": 1520862511, "last_edit_date": 1520862511, "creation_date": 1502309435, "answer_id": 45599811, "question_id": 45599026, "link": "https://stackoverflow.com/questions/45599026/opengl-segmentation-fault-error/45599811#45599811", "title": "OpenGL &quot;Segmentation fault&quot; error", "body": "<p>It was really simple i just need to put</p>\n\n<pre><code>glewExperimental = GL_TRUE;\nglewInit();\n</code></pre>\n\n<p>After the <code>glfwMakeContextCurrent()</code></p>\n"}], "owner": {"reputation": 57, "user_id": 8079885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbf8a732f7dc1d9483364049b5e9b9d?s=128&d=identicon&r=PG&f=1", "display_name": "64humans", "link": "https://stackoverflow.com/users/8079885/64humans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1706, "favorite_count": 0, "accepted_answer_id": 45599811, "answer_count": 1, "score": -1, "last_activity_date": 1520862511, "creation_date": 1502306512, "last_edit_date": 1520861106, "question_id": 45599026, "link": "https://stackoverflow.com/questions/45599026/opengl-segmentation-fault-error", "title": "OpenGL &quot;Segmentation fault&quot; error", "body": "<p>I have been playing with OpenGL and Ubuntu lately and it seems that i have encountered an error.</p>\n\n<p>I have tried to follow other threads that have exactly the same thing as a problem.</p>\n\n<p>Simply put, i did no work...</p>\n\n<p>This is my error:</p>\n\n<pre><code>Segmentation fault (core dumped)\n</code></pre>\n\n<p>I compile the program using this \"build.sh\" script</p>\n\n<pre><code>g++ -o exec main.cpp -I/usr/include/libdrm -lglfw -I/usr/include/libdrm -lGL -I/usr/include/libdrm -lGLEW -lGLU -lGL\n</code></pre>\n\n<p>And here is my \"main.cpp\"</p>\n\n<pre><code>#include &lt;GL/glew.h&gt;\n#include &lt;GLFW/glfw3.h&gt;\n\nint main(){\n\n    if(!glfwInit()){\n        //error\n    }\n\n    glewExperimental = GL_TRUE;\n\n    glewInit();\n\n    GLFWwindow* window = glfwCreateWindow(640, 480, \"Title\", NULL, NULL);\n\n    if(!window){\n        //error\n    }\n\n    glfwMakeContextCurrent(window);\n\n    glClearColor(0.2f, 0.3f, 0.3f, 1.0f);\n\n    float vertices[] = {\n        -0.5f, -0.5f, 0.0f,\n         0.5f, -0.5f, 0.0f,\n         0.0f,  0.5f, 0.0f\n    };  \n\n    unsigned int VBO;\n\n    glGenBuffers(1, &amp;VBO);\n\n    while(!glfwWindowShouldClose(window)){\n\n        glfwPollEvents();   \n\n        glClear(GL_COLOR_BUFFER_BIT);\n\n        glfwSwapBuffers(window);\n    }\n\n    glfwDestroyWindow(window);\n\n    glfwTerminate();\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Edit</strong>:</p>\n\n<p>The problem has been resolved.<br/>\nFor anyone that is like me you need to call <code>glewInit()</code> after <code>makeContextCurrent()</code></p>\n"}, {"tags": ["c++", "class", "inheritance", "initialization"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1502305836, "post_id": 45598810, "comment_id": 78157197, "body": "No.  The base class has to be completely constructed before the derived class even starts to be constructed.  You can&#39;t just set the member in the derived class constructor body?"}, {"owner": {"reputation": 11476, "user_id": 2790047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5a7631a67903295da25dabb94e1f51b?s=128&d=identicon&r=PG", "display_name": "jodag", "link": "https://stackoverflow.com/users/2790047/jodag"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1502306008, "post_id": 45598810, "comment_id": 78157297, "body": "@NathanOliver Thanks, and no I can&#39;t. The parent class initializes its member with a default parameterization that sets up some network connections. These parameters cannot be altered after initialization."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1502306099, "post_id": 45598810, "comment_id": 78157342, "body": "Then how do you expect to be able to set base class member if there is no way to set it?"}, {"owner": {"reputation": 11476, "user_id": 2790047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5a7631a67903295da25dabb94e1f51b?s=128&d=identicon&r=PG", "display_name": "jodag", "link": "https://stackoverflow.com/users/2790047/jodag"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1502306154, "post_id": 45598810, "comment_id": 78157371, "body": "@NathanOliver I&#39;m not expecting anything. I&#39;m asking if there&#39;s a way for the child class to override the Parent&#39;s default initialization."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1502306224, "post_id": 45598810, "comment_id": 78157415, "body": "Ah, unfortunately, no.  You don&#39;t get to create a new constructor for the base class."}, {"owner": {"reputation": 11476, "user_id": 2790047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5a7631a67903295da25dabb94e1f51b?s=128&d=identicon&r=PG", "display_name": "jodag", "link": "https://stackoverflow.com/users/2790047/jodag"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1502307227, "post_id": 45598810, "comment_id": 78157933, "body": "@NathanOliver Thanks, I thought this may be the case but hoped I was wrong."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1502307355, "post_id": 45598810, "comment_id": 78158009, "body": "So the problem is that <code>Parent() : member(0) {}</code> is really more like <code>Parent() : member(&#47;* Something expensive and&#47;or unchangeable *&#47;) {}</code>? Unfortunately, no, you can\u2019t. The closest you could come is, in the body of the <code>Child</code> constructor, saying <code>member.~Foo(); new(&amp;member) Foo{42}</code> in the body of the constructor. I think that causes undefined behavior, but if it doesn\u2019t (or maybe even if it does but the compiler doesn\u2019t do any optimizations to it) it\u2019ll almost do what you want."}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1502307578, "post_id": 45598810, "comment_id": 78158134, "body": "Perhaps a constructor in the base with the necessary parameters?"}, {"owner": {"reputation": 11476, "user_id": 2790047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5a7631a67903295da25dabb94e1f51b?s=128&d=identicon&r=PG", "display_name": "jodag", "link": "https://stackoverflow.com/users/2790047/jodag"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1502307603, "post_id": 45598810, "comment_id": 78158148, "body": "@Daniel H That right. It&#39;s certainly an interesting suggestion. I hadn&#39;t thought of explicitly invoking the destructor. If this isn&#39;t undefined behavior it may meet my needs I&#39;ll have to check."}, {"owner": {"reputation": 11476, "user_id": 2790047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5a7631a67903295da25dabb94e1f51b?s=128&d=identicon&r=PG", "display_name": "jodag", "link": "https://stackoverflow.com/users/2790047/jodag"}, "reply_to_user": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1502307730, "post_id": 45598810, "comment_id": 78158199, "body": "@Charles Unfortunately I can&#39;t modify the base class. In practice I could technically add a new constructor to the library header file but I have good reasons to want to avoid changing the base class."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502314339, "post_id": 45598810, "comment_id": 78161263, "body": "@jodag <i>&quot;Unfortunately I can&#39;t modify the base class.&quot;</i> In case they left you with any reasonable design, my answer could be helpful."}], "answers": [{"comments": [{"owner": {"reputation": 11476, "user_id": 2790047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5a7631a67903295da25dabb94e1f51b?s=128&d=identicon&r=PG", "display_name": "jodag", "link": "https://stackoverflow.com/users/2790047/jodag"}, "edited": false, "score": 0, "creation_date": 1502306639, "post_id": 45598910, "comment_id": 78157618, "body": "It may be too narrow, I could expand it more but the question is about overriding the parent&#39;s initializer. In this answer the parent still initializes <code>Foo</code> to 0, then the Child creates a new instance of <code>Foo</code> with a value of <code>1</code> and copies it to <code>member</code>. I&#39;m actually a little surprised this runs as I thought that <code>=</code> form of constructor initialization only worked for during initialization."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1502306667, "post_id": 45598910, "comment_id": 78157637, "body": "That&#39;s an assignment, not an initialisation. It &quot;works&quot; because <code>Foo</code> has a converting constructor."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1502308074, "post_id": 45598910, "comment_id": 78158354, "body": "Why aren\u2019t you supposed to assign to the <code>Parent::member</code> variable? If they didn\u2019t want it assigned to they would have made it <code>private</code>."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1502308238, "post_id": 45598910, "comment_id": 78158429, "body": "@DanielH Ask the OP please, that&#39;s not the point apparently. That&#39;s how many <i>Component Frameworks</i> solve the problem BTW."}], "tags": [], "owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "is_accepted": false, "score": 1, "last_activity_date": 1502307522, "last_edit_date": 1502307522, "creation_date": 1502306047, "answer_id": 45598910, "question_id": 45598810, "link": "https://stackoverflow.com/questions/45598810/is-it-possible-to-defer-member-variable-initialization-to-inherited-class-withou/45598910#45598910", "title": "Is it possible to defer member variable initialization to inherited class without modifying the parent class?", "body": "<p>The easiest way is to initialize <code>Parent::member</code> in the <code>Child</code> class constructor body (again):</p>\n\n<pre><code>class Child : public Parent\n{\n    public:\n        Child() {\n            Parent::member = 1;\n        }\n\n};\n</code></pre>\n\n<p>See the <a href=\"http://coliru.stacked-crooked.com/a/504779fb529e0c63\" rel=\"nofollow noreferrer\">live demo</a>.</p>\n\n<hr>\n\n<p>As it was clarified in comments, you aren't supposed to <em>assign</em> the \n<code>Parent::member</code> variable.</p>\n\n<p>In such case (let's assume the design was at least something useful),\nyou usually have the ability to apply a setter for certain properties of the parent class member's instance:</p>\n\n<pre><code>class Foo {\n    Foo(const&amp; Foo) = delete;\n    Foo&amp; operator=(const&amp; Foo) = delete;\npublic:\n    Foo() = default;\n    int property() const;\n    void property(int newVal);\n};\n\nclass Parent {\nprotected:\n    Foo member;\npublic:\n    Parent() = default;\n};\n\nclass Child : public Parent {\npublic:\n    Child() {\n        Parent::member.property(1);\n    };\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1502306945, "creation_date": 1502306945, "answer_id": 45599145, "question_id": 45598810, "link": "https://stackoverflow.com/questions/45598810/is-it-possible-to-defer-member-variable-initialization-to-inherited-class-withou/45599145#45599145", "title": "Is it possible to defer member variable initialization to inherited class without modifying the parent class?", "body": "<blockquote>\n  <p>Is it possible to defer the initialization of a parent's member variable to an inherited class? If so, how?</p>\n</blockquote>\n\n<p>The parent class's member variable is either initialized in its member initialization list or in the body of the constructor. The child class cannot initialize the parent class's member variable in its initializer list -- that is not allowed by the language. The best you can do, it seems, is to set the value of the parent class's member in the body of the child class's constructor.</p>\n\n<p>Example:</p>\n\n<pre><code>struct foo\n{\n   int a;\n};\n\nstruct bar : foo\n{\n   bar() : a(0) {} // Not allowed\n};\n</code></pre>\n\n<p>but</p>\n\n<pre><code>struct bar : foo\n{\n   bar() { a = 0; } // Allowed\n};\n</code></pre>\n"}], "owner": {"reputation": 11476, "user_id": 2790047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5a7631a67903295da25dabb94e1f51b?s=128&d=identicon&r=PG", "display_name": "jodag", "link": "https://stackoverflow.com/users/2790047/jodag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 45599145, "answer_count": 2, "score": 3, "last_activity_date": 1502307522, "creation_date": 1502305607, "question_id": 45598810, "link": "https://stackoverflow.com/questions/45598810/is-it-possible-to-defer-member-variable-initialization-to-inherited-class-withou", "title": "Is it possible to defer member variable initialization to inherited class without modifying the parent class?", "body": "<p>I'm having a specific problem which I've converted into the following <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Foo {\n    public:\n        Foo(int v) : val(v) {}\n\n        int get_val() const\n        {\n            return val;\n        }\n\n    private:\n        int val;\n};\n\nclass Parent {\n    public:\n        Parent() : member(0) {}\n\n        const Foo&amp; get_member() const\n        {\n            return member;\n        }\n\n    protected:\n        Foo member;\n};\n\n// Nothing above this line should be changed\n\nclass Child : public Parent\n{\n    public:\n        // This doesn't work (compile error)\n        //Child() Parent::member(1) {}\n\n        // Nor does this (also a compile error)\n        //Child() this-&gt;member(1) {}\n};\n\nint main()\n{\n    Child x;\n    std::cout &lt;&lt; x.get_member().get_val() &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>This example demonstrates the issue I'm having in a larger software project where I'm inheriting from an external library but <em>need to directly initialize one of the parent's member variables</em>.</p>\n\n<p>Unfortunately, the Parent class does not have a constructor which parameterizes its member's initialization.</p>\n\n<p>If the <code>Parent</code> class had a constructor of the form</p>\n\n<pre><code>Parent(int val) : member(val) {}\n</code></pre>\n\n<p>then I could write a <code>Child</code> constructor as </p>\n\n<pre><code>Child() Parent::Parent(1) {}\n</code></pre>\n\n<p>but that is not the case for me.</p>\n\n<p><strong>Question</strong>: Is it possible to defer the initialization of a parent's member variable to an inherited class? If so, how?</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 3, "creation_date": 1502305367, "post_id": 45598737, "comment_id": 78156947, "body": "<code>&gt;&gt;</code> is valid only since C++11"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 2, "creation_date": 1502305473, "post_id": 45598737, "comment_id": 78157005, "body": "@EdgarRokyan, that has been valid for a long time, VS C++ 6.0 is a bit old. That&#39;s all."}, {"owner": {"reputation": 339, "user_id": 8115110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def1988587cc51069b8da1dd8aecc6e3?s=128&d=identicon&r=PG&f=1", "display_name": "Louie Mayo", "link": "https://stackoverflow.com/users/8115110/louie-mayo"}, "edited": false, "score": 0, "creation_date": 1502305565, "post_id": 45598737, "comment_id": 78157049, "body": "So it&#39;s just a nuance of an old C++ compiler then? And they would both compile with a newer compiler?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1502305581, "post_id": 45598737, "comment_id": 78157058, "body": "maybe dupe: <a href=\"https://stackoverflow.com/questions/6695261/template-within-template-why-should-be-within-a-nested-template-arg\" title=\"template within template why should be within a nested template arg\">stackoverflow.com/questions/6695261/&hellip;</a>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1502305582, "post_id": 45598737, "comment_id": 78157059, "body": "That&#39;s correct."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1502305653, "post_id": 45598737, "comment_id": 78157104, "body": "Also, unless you have to use Visual c++ 6.0 I would suggest you use MSVS 2017 which is C++11/14(mostly) and some 17 complaint"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1502305681, "post_id": 45598737, "comment_id": 78157122, "body": "If you have the option, you can download the community editions of the latest VS tools from MS for free. I would strongly advise using them instead of using VS C++ 6.0."}], "owner": {"reputation": 339, "user_id": 8115110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def1988587cc51069b8da1dd8aecc6e3?s=128&d=identicon&r=PG&f=1", "display_name": "Louie Mayo", "link": "https://stackoverflow.com/users/8115110/louie-mayo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502305319, "creation_date": 1502305319, "question_id": 45598737, "link": "https://stackoverflow.com/questions/45598737/c-vector-compile-error-on-template-struct", "title": "C++ Vector compile error on template struct", "body": "<pre><code>template&lt;class T&gt;\nstruct TSData{\n    int timestamp;\n    T data;\n}; \n\nint main () {\n    std::vector&lt;TSData&lt;int&gt;&gt; Gen;   //Compile Error\n    std::vector&lt;TSData&lt;int&gt; &gt; Stts; //Compiles fine\n}\n</code></pre>\n\n<p>I'm using Visual c++ 6.0, and I ran into this issue today. I'm wondering why having a space makes the second statement OK. Without the space I would get the following errors:</p>\n\n<pre><code>error C2146: syntax error : missing ',' before identifier 'Stts' \nerror C2654: 'OLPkrStts' : attempt to access member outside a member function\nerror C2143: syntax error : missing '&gt;' before ';'\n</code></pre>\n"}, {"tags": ["c++", "binary", "char"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1502305229, "post_id": 45598689, "comment_id": 78156871, "body": "<code>int8_t</code> is signed. Try <code>uint8_t</code>. What do you mean by &quot;stops working&quot; ?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1502305243, "post_id": 45598689, "comment_id": 78156877, "body": "BTW this looks a lot like C++"}, {"owner": {"reputation": 710, "user_id": 1780030, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/46e2d7faa98fa4042b6671705e7cdfab?s=128&d=identicon&r=PG", "display_name": "Mr. Fegur", "link": "https://stackoverflow.com/users/1780030/mr-fegur"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1502309031, "post_id": 45598689, "comment_id": 78158826, "body": "@Jean-Fran&#231;oisFabre Sorry. I meant the output is no longer 15 as expected. The program still compiles and runs."}], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 3, "last_activity_date": 1502306379, "last_edit_date": 1502306379, "creation_date": 1502305943, "answer_id": 45598883, "question_id": 45598689, "link": "https://stackoverflow.com/questions/45598689/conversion-of-binary-encoded-unsigned-char-to-integer/45598883#45598883", "title": "Conversion of binary encoded unsigned char to integer", "body": "<p>What you see (actually what you don't see) is that <code>cout</code>, when feeded witn an <code>int8_t</code>, interprets the value as a character, and ASCII-code 15 might not leave anything visible on the debug console. Note that an environment (for example mine) might define <code>int8_t</code> as follows:</p>\n\n<pre><code>// _int8_t.h:\n#ifndef _INT8_T\n#define _INT8_T\ntypedef __signed char       int8_t;\n#endif /* _INT8_T */\n</code></pre>\n\n<p>If you changed your <code>binValue</code> to, for example, <code>47</code>, then you would see an <code>'/'</code>.\nTo print a character type (or <code>int8_t</code>) as decimal, convert it to an int in the course of printing:</p>\n\n<pre><code>int main()\n{\n    unsigned char binValue = 0&lt;&lt;7 | 0&lt;&lt;6 | 1&lt;&lt;5 | 0&lt;&lt;4 | 1&lt;&lt;3 | 1&lt;&lt;2 | 1&lt;&lt;1 | 1&lt;&lt;0;\n    // changed to 47 for demonstration purpose\n\n    int8_t intValue  = (int8_t)binValue;\n\n    std::cout &lt;&lt; \"as char:\" &lt;&lt; intValue &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"as decimal:\" &lt;&lt; (int)intValue &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"as decimal:\" &lt;&lt; +intValue &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 1780030, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/46e2d7faa98fa4042b6671705e7cdfab?s=128&d=identicon&r=PG", "display_name": "Mr. Fegur", "link": "https://stackoverflow.com/users/1780030/mr-fegur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1045, "favorite_count": 0, "accepted_answer_id": 45598883, "answer_count": 1, "score": 2, "last_activity_date": 1502308991, "creation_date": 1502305144, "last_edit_date": 1502308991, "question_id": 45598689, "link": "https://stackoverflow.com/questions/45598689/conversion-of-binary-encoded-unsigned-char-to-integer", "title": "Conversion of binary encoded unsigned char to integer", "body": "<p>In the following, I encode the number 15 in binary into an unsigned char, and then convert it to an int. However, when I replace int with int8_t, it doesn't output 15 any more. I don't understand why though. Isn't the size of int8_t 8 bits, and so it should match pretty well with char, which is also 8 bits?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n\n  unsigned char binValue = 0&lt;&lt;7 | 0&lt;&lt;6 | 0&lt;&lt;5 | 0&lt;&lt;4 | 1&lt;&lt;3 | 1&lt;&lt;2 | 1&lt;&lt;1 | 1&lt;&lt;0; // this is 15 in binary\n\n  int intValue  = (int)binValue;\n\n  // memcpy(&amp;intValue,&amp;binValue,sizeof(int)); // Or this one\n\n  std::cout &lt;&lt; intValue &lt;&lt; std::endl;\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 3, "creation_date": 1502304837, "post_id": 45598505, "comment_id": 78156636, "body": "You should be able to count on <code>_DEBUG</code>. See <a href=\"https://stackoverflow.com/a/367922/434551\">stackoverflow.com/a/367922/434551</a>."}, {"owner": {"reputation": 9, "user_id": 6801664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c46128b4be4eb17febf628c359652cc?s=128&d=identicon&r=PG&f=1", "display_name": "Lark", "link": "https://stackoverflow.com/users/6801664/lark"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1502305151, "post_id": 45598505, "comment_id": 78156818, "body": "Thanks for the prompt responses. The version with #ifdef _DEBUG output the same eyecatcher (blah Release mm/dd/yy) whether debug or release build. The user&#39;s tests check a startup message"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1502305347, "post_id": 45598505, "comment_id": 78156933, "body": "I am surprised by that."}, {"owner": {"reputation": 9, "user_id": 6801664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c46128b4be4eb17febf628c359652cc?s=128&d=identicon&r=PG&f=1", "display_name": "Lark", "link": "https://stackoverflow.com/users/6801664/lark"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1502305363, "post_id": 45598505, "comment_id": 78156943, "body": "...sorry, hit the enter key. The user&#39;s tests inspect a startup message and that determines what sort of tests they&#39;ll run. As mentioned earlier, I checked other entries, and that&#39;s why I tried &#39;_DEBUG&#39; and &#39;NDEBUG&#39;, to no effect. The debug build is indeed a debug build, and the optimized release build is indeed an optimized release build. I made the mistake of thinking this was a simple change, and now, as always, it has metastasized."}, {"owner": {"reputation": 9, "user_id": 6801664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c46128b4be4eb17febf628c359652cc?s=128&d=identicon&r=PG&f=1", "display_name": "Lark", "link": "https://stackoverflow.com/users/6801664/lark"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1502305469, "post_id": 45598505, "comment_id": 78157002, "body": "Actually, I made the mistake of telling the user that it was a simple change."}, {"owner": {"reputation": 9, "user_id": 6801664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c46128b4be4eb17febf628c359652cc?s=128&d=identicon&r=PG&f=1", "display_name": "Lark", "link": "https://stackoverflow.com/users/6801664/lark"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1502305677, "post_id": 45598505, "comment_id": 78157116, "body": "Here&#39;s the C++-specific build line:   /GS /GL /W3 /Gy /Zc:wchar_t /Zi /Gm- /Ox /Fd&quot;x64\\Release\\vc140.pdb&quot; /Zc:inline /fp:precise /D &quot;_MBCS&quot; /errorReport:prompt /WX- /Zc:forScope /Gd /Oi /MT /Fa&quot;x64\\Release\\&quot; /EHsc /nologo /Fo&quot;x64\\Release\\&quot; /Fp&quot;x64\\Release\\blah.pch&quot;"}, {"owner": {"reputation": 9, "user_id": 6801664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c46128b4be4eb17febf628c359652cc?s=128&d=identicon&r=PG&f=1", "display_name": "Lark", "link": "https://stackoverflow.com/users/6801664/lark"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1502305712, "post_id": 45598505, "comment_id": 78157133, "body": "...and the debug build line:  /GS /W3 /Zc:wchar_t /ZI /Gm /Od /Fd&quot;x64\\Debug\\vc140.pdb&quot; /Zc:inline /fp:precise /D &quot;_MBCS&quot; /errorReport:prompt /WX- /Zc:forScope /Gd /Oi /MT /Fa&quot;x64\\Debug\\&quot; /EHsc /nologo /Fo&quot;x64\\Debug\\&quot; /Fp&quot;x64\\Debug\\blah.pch&quot;"}, {"owner": {"reputation": 9, "user_id": 6801664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c46128b4be4eb17febf628c359652cc?s=128&d=identicon&r=PG&f=1", "display_name": "Lark", "link": "https://stackoverflow.com/users/6801664/lark"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1502305743, "post_id": 45598505, "comment_id": 78157148, "body": "...which probably is no help at all. But there you go."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1502306174, "post_id": 45598505, "comment_id": 78157382, "body": "I&#39;m out of my depth here. Hope someone else can help you."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 2, "last_activity_date": 1502306818, "last_edit_date": 1502306818, "creation_date": 1502306485, "answer_id": 45599019, "question_id": 45598505, "link": "https://stackoverflow.com/questions/45598505/visual-studio-c-determining-if-in-a-debug-or-release-build/45599019#45599019", "title": "Visual Studio C++ - Determining if in a debug or release build", "body": "<p>Beyond checking a define at compile time (like <code>NDEBUG</code> or <code>_DEBUG</code> or some other define you set yourself) and outputting a message based on that, then the answer is \"No, you cannot generally determine programatically at run time how the executable was compiled\".</p>\n\n<p>But it's fairly easy to do at compile time:</p>\n\n<pre><code>#if defined _DEBUG\n    std::cout &lt;&lt; \"debug build\\n\";\n#else\n    std::cout &lt;&lt; \"release build\\n\";\n#endif\n</code></pre>\n\n<p>Then just make sure your build system sets whatever define you base your check on.. shouldn't take long to do.</p>\n"}], "owner": {"reputation": 9, "user_id": 6801664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c46128b4be4eb17febf628c359652cc?s=128&d=identicon&r=PG&f=1", "display_name": "Lark", "link": "https://stackoverflow.com/users/6801664/lark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2179, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1502306818, "creation_date": 1502304570, "question_id": 45598505, "link": "https://stackoverflow.com/questions/45598505/visual-studio-c-determining-if-in-a-debug-or-release-build", "title": "Visual Studio C++ - Determining if in a debug or release build", "body": "<p>Without adding special -D build options, is there a means to determine if a build is a 'Debug' or 'Release', as set by the Configuration Manager? I've tried ifdeffing 'NDEBUG' or '_DEBUG', but it appears they are not automatically defined, and thus referencing either is unproductive. \nThe user simply wants to know if a build is 'release' or 'debug' on startup, likely so they'll know on which version to run automated performance tests.\nThere's the configuration property $(Configuration), but how to reference that programmatically is a puzzle, assuming it can be done at all. Perhaps the optimization level (/Ox) can be checked...somehow. Anyway, perhaps it's just not possible and the user will just have to assume. I've looked at other questions, but as they don't seem to mesh very well with this difficulty, I thought I'd toss it in, see what happens. I told him that if they can check the executable size, well, 'debug' is twice the size of 'release'; they didn't care much for that notion. Thanks.</p>\n"}, {"tags": ["c++", "api-design"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1502304707, "post_id": 45598485, "comment_id": 78156559, "body": "What us up with init? Why not do it initialization in the constructor? Also, your factory method return type is actually the same as your class, so this factory is useless."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1502304872, "post_id": 45598485, "comment_id": 78156655, "body": "If you <i>really</i> want to use macros (you almost certainly don&#39;t), you&#39;d probably need something like GCC&#39;s <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html\" rel=\"nofollow noreferrer\">statement expressions</a>: <code>#define CREATE(T, ...) ({ auto* ret = new T; ret-&gt;init(__VA_ARGS__); ret; })</code>"}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1502315829, "creation_date": 1502315829, "answer_id": 45601253, "question_id": 45598485, "link": "https://stackoverflow.com/questions/45598485/using-a-macro-to-replace-create-functions-in-a-factory-pattern-style-api/45601253#45601253", "title": "Using a macro to replace &quot;create()&quot; functions in a factory pattern style API", "body": "<p>You can mix both template and macro:</p>\n\n<pre><code>template &lt;typename T, typename InitF, typename... Args&gt;\nT* CreateImpl(T* t, InitF init, Args&amp;&amp;...args)\n{\n    (t-&gt;*init)(std::forward&lt;Args&gt;(args)...);\n    return t;\n}\n</code></pre>\n\n<p>and the MACRO (to forward private stuff)</p>\n\n<pre><code>// I assume no overloads of T::init\n#define CREATE(T, ...) CreateImpl(new T(), &amp;T::init, __VA_ARGS__)\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 8328160, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c5b728d77647bb441497144ec00c5d11?s=128&d=identicon&r=PG&f=1", "display_name": "csk", "link": "https://stackoverflow.com/users/8328160/csk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 45601253, "answer_count": 1, "score": 0, "last_activity_date": 1502315829, "creation_date": 1502304510, "question_id": 45598485, "link": "https://stackoverflow.com/questions/45598485/using-a-macro-to-replace-create-functions-in-a-factory-pattern-style-api", "title": "Using a macro to replace &quot;create()&quot; functions in a factory pattern style API", "body": "<p>I'm writing a C++ library with all classes making use of the <em>factory pattern</em>, i.e. having a private empty constructor and a private <code>void init()</code> function, which does the actual initialization of an instance. The classes that can be instantiated by the library user have a public static <code>create()</code> function which does the following:</p>\n\n<pre><code>static Class* create(int arg1, int arg2) {\n    Class* ret = new Class();\n    ret-&gt;init(arg1, arg2);\n    return ret;\n}\n</code></pre>\n\n<p>There are also several classes which <em>shall not be instantiated from outside the library</em>, so they don't provide a public <code>create()</code>.</p>\n\n<p>These \"internal classes\" do have some <code>friend</code> relationships between each other, so they can instantiate each other. Let's assume I want to write as little code as possible, so I would like to avoid declaring and defining private <code>create()</code> functions for all the internal classes, but I would also like to avoid writing </p>\n\n<pre><code>InternalClass* foo = new InternalClass(); \nfoo-&gt;init();\n</code></pre>\n\n<p>all the time an internal class gets instantiated. Instead it would be nice to have a single (template) function or macro that can create <em>any</em> internal class with just one line of code, e.g.</p>\n\n<pre><code>template&lt;class T, typename ...Args&gt; inline T* create(Args... args) {\n    T* ret = new T();\n    ret-&gt;init(args...);\n    return ret;\n}\n</code></pre>\n\n<p>The problem with the above function (which would be defined as a standalone function in a global shared header, thus the <code>inline</code> keyword) is that it bypasses the <code>friend</code> declarations between the classes and thus wouldn't compile.</p>\n\n<p>The problem with a macro on the other hand is that it can't \"return\" a pointer to the instance as long as there is the statement <code>ret-&gt;init()</code> inside the macro, so using the macro like the following wouldn't be possible:</p>\n\n<pre><code>InternalClass* foo = CREATE(InternalClass, arg1, arg2);\n</code></pre>\n\n<p>Finally, my question is:</p>\n\n<p>Is it somehow possible to create a macro that can be called in the above way (and without changing the return type of all the <code>init()</code> functions to a class type pointer, which would indeed allow the following: <code>#define CREATE(T, ...) (new T())-&gt;init(__VA_ARGS__)</code>)?</p>\n\n<p>(Please note that this is more an <em>academic</em> than a <em>practical</em> question as I've already implemented the solution with the private <code>create()</code> functions, which works perfectly fine and seems to be the \"cleanest\" solution. I was just wondering if there <em>could have been</em> a solution with macros, too...)</p>\n"}, {"tags": ["c++", "linux", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8441358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a10750d496498e58394dce01ac0bafd?s=128&d=identicon&r=PG&f=1", "display_name": "Sutil", "link": "https://stackoverflow.com/users/8441358/sutil"}, "is_accepted": true, "score": 0, "last_activity_date": 1502363161, "creation_date": 1502363161, "answer_id": 45611988, "question_id": 45598144, "link": "https://stackoverflow.com/questions/45598144/unable-to-build-opencv-contrib-modules-on-linux/45611988#45611988", "title": "Unable to build opencv_contrib modules on linux", "body": "<p>I was using the sources from OpenCV 3.2 from few weeks ago so I re-downloaded from github (OpenCV 3.3 this time) and re-installed  following the same steps described in my first post and it worked!</p>\n\n<p>Maybe I had some \"bad\" version of OpenCV 3.2 with some sneaky incompatibility problem.</p>\n"}], "owner": {"reputation": 1, "user_id": 8441358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a10750d496498e58394dce01ac0bafd?s=128&d=identicon&r=PG&f=1", "display_name": "Sutil", "link": "https://stackoverflow.com/users/8441358/sutil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1353, "favorite_count": 0, "accepted_answer_id": 45611988, "answer_count": 1, "score": 0, "last_activity_date": 1502363161, "creation_date": 1502303246, "last_edit_date": 1592644375, "question_id": 45598144, "link": "https://stackoverflow.com/questions/45598144/unable-to-build-opencv-contrib-modules-on-linux", "title": "Unable to build opencv_contrib modules on linux", "body": "<p>I'm trying to build OpenCV with the xfeatures2d module from opencv_contrib on linux but I'm unable to build any extra module. Here is what I have tried (I have basically followed the instructions I found on the net and in the README file in opencv_contrib):</p>\n<ol>\n<li>Downloading opencv and opencv_contrib from github:</li>\n</ol>\n<blockquote>\n<p>$ git clone <a href=\"https://github.com/opencv/opencv.git\" rel=\"nofollow noreferrer\">https://github.com/opencv/opencv.git</a></p>\n<p>$ git clone <a href=\"https://github.com/opencv/opencv_contrib.git\" rel=\"nofollow noreferrer\">https://github.com/opencv/opencv_contrib.git</a></p>\n</blockquote>\n<ol start=\"2\">\n<li>Creating a build directory:</li>\n</ol>\n<blockquote>\n<p>$ cd ~/opencv</p>\n<p>$ mkdir release</p>\n<p>$ cd release</p>\n</blockquote>\n<ol start=\"3\">\n<li>Running cmake:</li>\n</ol>\n<blockquote>\n<p>$ cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local \u2013D OPENCV_EXTRA_MODULES_PATH=../../opencv_contrib/modules -D WITH_LIBV4L=on -D WITH_GSTREAMER=on -D WITH_OPENGL=on -D WITH_VTK=on  -D BUILD_EXAMPLES=ON -D WITH_GTK=on -D WITH_QT=on ..</p>\n</blockquote>\n<p>I have specified the path to opencv_contrib/modules (also tried with the absolute path but no difference) and I'm sure this is the right path. CMake seems to run with no error however it doesn't want to build the extra modules. Here is the cmake output:</p>\n<blockquote>\n<p>--   OpenCV modules:</p>\n<p>--     To be built:                 core flann imgproc ml objdetect photo video dnn imgcodecs shape videoio highgui superres ts features2d calib3d java stitching videostab python2</p>\n<p>--     Disabled:                    world</p>\n<p>--     Disabled by dependency:      -</p>\n<p>--     Unavailable:                 cudaarithm cudabgsegm cudacodec cudafeatures2d cudafilters cudaimgproc cudalegacy cudaobjdetect cudaoptflow cudastereo cudawarping cudev python3 viz</p>\n</blockquote>\n<p>I only have the &quot;standard&quot; modules but nothing from opencv_contrib... If I build the library at this point, I only get the &quot;standard&quot; library (as expected). I have tried to explicitly enable xfeatures2d by adding -D BUILD_opencv_xfeatures2d=ON and I also tried not to build the examples but without any effect.</p>\n<p>Anyone see what I have done wrong?</p>\n<p>Thanks for your help.</p>\n"}, {"tags": ["c++", "php-extension", "php-cpp"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 7, "creation_date": 1502303365, "post_id": 45598036, "comment_id": 78155806, "body": "I suspect its not the C++ code that&#39;s slow but the overhead of calling the native function. Can you try with a function that has more code in it?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1502305206, "post_id": 45598036, "comment_id": 78156855, "body": "Your testing code is pointless. You need to run multiple iterations (at least 1000000) using random inputs and remove string concatenation as it most likely takes more time than function call."}, {"owner": {"reputation": 314, "user_id": 5228740, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nnUZy.png?s=128&g=1", "display_name": "Hannes Hauptmann", "link": "https://stackoverflow.com/users/5228740/hannes-hauptmann"}, "edited": false, "score": 1, "creation_date": 1502305413, "post_id": 45598036, "comment_id": 78156979, "body": "I suggest calculating pi for some thousand poitions."}], "answers": [{"tags": [], "owner": {"reputation": 199, "user_id": 3120265, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/45bd7f4a89f187ae1fd9299e9d27e839?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous007", "link": "https://stackoverflow.com/users/3120265/anonymous007"}, "is_accepted": false, "score": 1, "last_activity_date": 1502354561, "creation_date": 1502354561, "answer_id": 45608626, "question_id": 45598036, "link": "https://stackoverflow.com/questions/45598036/why-phpcpp-extension-function-written-in-c-is-slower-then-function-written-in/45608626#45608626", "title": "why phpcpp extension function written in C++ is slower then function written in php", "body": "<p><strong>UPDATE and ANSWER</strong></p>\n\n<p>as suggested i'm trying to test with a more complex function to see if overhead is causing C++ function to be slower</p>\n\n<p>i have modified existing \"test_function\" + added another function \"test_function_inner\" and declared it.</p>\n\n<pre><code>double test_function_inner(double a, double b);\n\n      Php::Value test_function(Php::Parameters &amp;params)\n    {\n        double a = params[0];\n        double b = params[1];\n        double res = 0.0;\n        int i = 100;\n        while (i &gt; 0) {\n            res = res + test_function_inner(a, b);\n            --i;\n        }\n\n        return res;\n    }\n    double test_function_inner(double a, double b) {\n        double res = 0.0;\n        while (b &gt; a) {\n            res = res + (a + b) * (a - b) / 100;\n            b = b - 1;\n        }\n        return res;\n    }\n</code></pre>\n\n<p><strong>Testing</strong>:</p>\n\n<pre><code> &lt;?php\n    $output = '';\n\n    //local php function test\n\n        $start_time = microtime(true);\n        $output.= \"&lt;br&gt; test_function local: \" . local_test_function(123.4,1200000.5);\n        $end_time = microtime(true);\n        $duration = $end_time - $start_time;\n        $duration = number_format($duration,20);\n        $output.=\", Duration: \".$duration.'&lt;br&gt;';\n\n    // function written in c++\n\n        $start_time = microtime(true);\n        $output.= \"function written in c++: \" . test_function(123.4,1200000.5);\n\n        $end_time = microtime(true);\n        $duration = $end_time - $start_time;\n        $duration = number_format($duration,20);\n        $output.=\", Duration: \".$duration . '&lt;br&gt;';\n    ?&gt;\n</code></pre>\n\n<p><strong>results</strong>:</p>\n\n<pre><code>test_function local result: -5.7600142172989E+17, Duration: 9.23940896987915039062\n\nfunction written in c++ result: -5.7600142172989E+17, Duration: 0.72759604454040527344\n</code></pre>\n\n<p><strong>CONCLUSION</strong>\nit was overhead caused by initial function call as suggested , and small operations and calculations doesn't worth putting into separate functions in the extension as it wouldn't boost the application but instead would cause negative effect on performance.</p>\n"}], "owner": {"reputation": 199, "user_id": 3120265, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/45bd7f4a89f187ae1fd9299e9d27e839?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous007", "link": "https://stackoverflow.com/users/3120265/anonymous007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1502354561, "creation_date": 1502302922, "last_edit_date": 1502354472, "question_id": 45598036, "link": "https://stackoverflow.com/questions/45598036/why-phpcpp-extension-function-written-in-c-is-slower-then-function-written-in", "title": "why phpcpp extension function written in C++ is slower then function written in php", "body": "<p>I have recently created a php extension with <a href=\"http://www.php-cpp.com\" rel=\"nofollow noreferrer\">PHPCPP - C++ library for developing PHP extensions</a> and was expecting a performance boost, however instead of seeing a boost i m only seeing degradation in performance. I believe i'm doing something incorrectly and maybe somebody may spot why is this happening?</p>\n\n<p><strong>Here is a C++ code</strong>:</p>\n\n<pre><code>#include &lt;phpcpp.h&gt;\n#include &lt;ctime&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;string&gt; \n#include &lt;regex&gt;\n#include &lt;stdlib.h&gt;     /* atof,strtod */\n#include &lt;cstddef&gt;        // std::size_t\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n#include &lt;boost/algorithm/string.hpp&gt; // include Boost, a C++ library\n#include &lt;boost/regex.hpp&gt;\n\nusing namespace std;\nPhp::Value test_function(Php::Parameters &amp;params)\n{\n    double a = params[0];\n    double b = params[1];\n\n    return (a + b) * (a - b) / 100;\n}\n\n/**\n*  Switch to C context, because the Zend engine expects get get_module()\n*  to have a C style function signature\n*/\nextern \"C\" {\n    /**\n    *  Startup function that is automatically called by the Zend engine\n    *  when PHP starts, and that should return the extension details\n    *  @return void*\n    */\n    PHPCPP_EXPORT void *get_module()\n    {\n        // the extension object\n        static Php::Extension extension(\"test_extension\", \"1.0\");\n\n        // add functions so that they can be called from PHP scripts\n\n        extension.add(\"test_function\", test_function, {\n            Php::ByVal(\"a\", Php::Type::Float,true),\n            Php::ByVal(\"b\", Php::Type::Float,true)\n        });\n        // return the extension details\n        return extension;\n    }\n}\n</code></pre>\n\n<p><strong>Here is the command line extension compilation</strong>:</p>\n\n<pre><code>[root@test test_extension]# make\ng++ -Wall -c -O2 -std=c++11 -fpic -o main.o main.cpp\ng++ -shared -o test_extension.so main.o -lphpcpp\n[root@test test_extension]# make install\ncp -f test_extension.so /usr/lib64/php/modules\ncp -f test_extension.ini /etc/php.d\n</code></pre>\n\n<p><strong>Here is my simple test</strong>:</p>\n\n<pre><code>&lt;?php\n//function written in php\nfunction local_test_function($a,$b){\n    $res = ($a + $b) * ($a - $b) / 100;\n    return $res;\n}\n\n$output = '';\n\n//local php function test\n\n    $start_time = microtime(true);\n    $output.= \"&lt;br&gt; test_function local: \" . local_test_function(123.4,12.5);\n    $end_time = microtime(true);\n    $duration = $end_time - $start_time;\n    $duration = number_format($duration,20);\n    $output.=\", Duration: \".$duration.'&lt;br&gt;';\n\n// function written in c++\n\n    $start_time = microtime(true);\n    $output.= \"function written in c++: \" . test_function(123.4,12.5);\n\n    $end_time = microtime(true);\n    $duration = $end_time - $start_time;\n    $duration = number_format($duration,20);\n    $output.=\", Duration: \".$duration . '&lt;br&gt;';\n\n?&gt;\n</code></pre>\n\n<p><strong>The results are</strong>:</p>\n\n<pre><code>test_function local result: 150.7131, Duration: 0.00000715255737304688\nfunction written in c++ result: 150.7131, Duration: 0.00003004074096679688\n</code></pre>\n\n<p>the conclusion PHP function written in C++ is 4 times slower.\nCan someone tell why? And is there a way to improve my code in C++?</p>\n"}, {"tags": ["c++", "avr-gcc"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502302477, "post_id": 45597881, "comment_id": 78155272, "body": "Omit the <code>-g</code> flag to avoid adding debug code and symbols?"}, {"owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 1, "creation_date": 1502302754, "post_id": 45597881, "comment_id": 78155456, "body": "It may be due to the data being static.  (C++ requires injected code to guarantee object is only initialized once, even in multithreaded code.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4113344"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502302935, "post_id": 45597881, "comment_id": 78155559, "body": "@user0042 Nope, no change."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4113344"}, "reply_to_user": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 0, "creation_date": 1502302999, "post_id": 45597881, "comment_id": 78155597, "body": "@ChrisUzdavinis Well, this is <code>avr5</code> code, an 8-bit micro-controller; there&#39;s no multi-threading, the compiler should know :-( . I have already used static members that were structs with template classes and I never noticed such weird thing."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502303166, "post_id": 45597881, "comment_id": 78155704, "body": "@Nasha Probably not related to that specific case, but you should use <code>avr-g++</code> when compiling and linking c++ code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4113344"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502314257, "post_id": 45597881, "comment_id": 78161225, "body": "@user0042 I know about <code>avr-g++</code>. One of the reasons I&#39;m using <code>avr-gcc</code> is that I want to exclude as much as possible of the standard libraries from the build. It implies limitations but the missing features are not really needed in a micro-controller environment. Never had a problem so far."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4113344"}, "reply_to_user": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 0, "creation_date": 1502634041, "post_id": 45597881, "comment_id": 78280357, "body": "@ChrisUzdavinis It looks like the guard code is present only when I define a static member of type <code>struct</code> or <code>class</code> <i>within</i> a template class. If I define a class that inherits from a template and define a static member of type <code>struct</code> or <code>class</code> in the derived class, there&#39;s no guard code. That doesn&#39;t help me :-( ."}, {"owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "edited": false, "score": 0, "creation_date": 1515313012, "post_id": 45597881, "comment_id": 83248094, "body": "Did you find any solution for this? I encounter the very same problem: avr-g++ is generating useless guad variables even if I use -fno-threadsafe-statics."}], "owner": {"user_type": "does_not_exist", "display_name": "user4113344"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 511, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1502302378, "creation_date": 1502302378, "question_id": 45597881, "link": "https://stackoverflow.com/questions/45597881/strange-guard-variable-initialization-code-can-it-be-removed", "title": "Strange &quot;guard variable&quot; initialization code \u2014 can it be removed?", "body": "<p>I have compiled a sample program to test my AVR library. Here's the command line:</p>\n\n<pre><code>avr-gcc -g -Wall -mcall-prologues -fshort-enums -Os -ffreestanding -I./include -I./ -DF_CPU=8000000L -Wl,-gc-sections -Wl,-relax -mmcu=attiny1634 *.cpp -o main\n</code></pre>\n\n<p>Inspecting the resulting assembler code I find the following:</p>\n\n<pre><code>000001c6 &lt;_GLOBAL__sub_I___vector_16&gt;:\ntemplate&lt;class driver&gt; cqueue uart&lt;driver&gt;::rxq __attribute__ ((section (\".noinit\")));\n 1c6:   20 91 09 01     lds     r18, 0x0109     ; 0x800109 &lt;guard variable for uart&lt;drv::uart0&gt;::rxq&gt;\n 1ca:   30 91 0a 01     lds     r19, 0x010A     ; 0x80010a &lt;guard variable for uart&lt;drv::uart0&gt;::rxq+0x1&gt;\n 1ce:   40 91 0b 01     lds     r20, 0x010B     ; 0x80010b &lt;guard variable for uart&lt;drv::uart0&gt;::rxq+0x2&gt;\n 1d2:   50 91 0c 01     lds     r21, 0x010C     ; 0x80010c &lt;guard variable for uart&lt;drv::uart0&gt;::rxq+0x3&gt;\n 1d6:   60 91 0d 01     lds     r22, 0x010D     ; 0x80010d &lt;guard variable for uart&lt;drv::uart0&gt;::rxq+0x4&gt;\n 1da:   70 91 0e 01     lds     r23, 0x010E     ; 0x80010e &lt;guard variable for uart&lt;drv::uart0&gt;::rxq+0x5&gt;\n 1de:   80 91 0f 01     lds     r24, 0x010F     ; 0x80010f &lt;guard variable for uart&lt;drv::uart0&gt;::rxq+0x6&gt;\n 1e2:   90 91 10 01     lds     r25, 0x0110     ; 0x800110 &lt;guard variable for uart&lt;drv::uart0&gt;::rxq+0x7&gt;\n 1e6:   a1 e0           ldi     r26, 0x01       ; 1\n 1e8:   32 d0           rcall   .+100           ; 0x24e &lt;__adddi3_s8&gt;\n 1ea:   20 93 09 01     sts     0x0109, r18     ; 0x800109 &lt;guard variable for uart&lt;drv::uart0&gt;::rxq&gt;\n 1ee:   30 93 0a 01     sts     0x010A, r19     ; 0x80010a &lt;guard variable for uart&lt;drv::uart0&gt;::rxq+0x1&gt;\n 1f2:   40 93 0b 01     sts     0x010B, r20     ; 0x80010b &lt;guard variable for uart&lt;drv::uart0&gt;::rxq+0x2&gt;\n 1f6:   50 93 0c 01     sts     0x010C, r21     ; 0x80010c &lt;guard variable for uart&lt;drv::uart0&gt;::rxq+0x3&gt;\n 1fa:   60 93 0d 01     sts     0x010D, r22     ; 0x80010d &lt;guard variable for uart&lt;drv::uart0&gt;::rxq+0x4&gt;\n 1fe:   70 93 0e 01     sts     0x010E, r23     ; 0x80010e &lt;guard variable for uart&lt;drv::uart0&gt;::rxq+0x5&gt;\n 202:   80 93 0f 01     sts     0x010F, r24     ; 0x80010f &lt;guard variable for uart&lt;drv::uart0&gt;::rxq+0x6&gt;\n 206:   90 93 10 01     sts     0x0110, r25     ; 0x800110 &lt;guard variable for uart&lt;drv::uart0&gt;::rxq+0x7&gt;\n 20a:   20 91 01 01     lds     r18, 0x0101     ; 0x800101 &lt;guard variable for uart&lt;drv::uart1&gt;::rxq&gt;\n 20e:   30 91 02 01     lds     r19, 0x0102     ; 0x800102 &lt;guard variable for uart&lt;drv::uart1&gt;::rxq+0x1&gt;\n 212:   40 91 03 01     lds     r20, 0x0103     ; 0x800103 &lt;guard variable for uart&lt;drv::uart1&gt;::rxq+0x2&gt;\n 216:   50 91 04 01     lds     r21, 0x0104     ; 0x800104 &lt;guard variable for uart&lt;drv::uart1&gt;::rxq+0x3&gt;\n 21a:   60 91 05 01     lds     r22, 0x0105     ; 0x800105 &lt;guard variable for uart&lt;drv::uart1&gt;::rxq+0x4&gt;\n 21e:   70 91 06 01     lds     r23, 0x0106     ; 0x800106 &lt;guard variable for uart&lt;drv::uart1&gt;::rxq+0x5&gt;\n 222:   80 91 07 01     lds     r24, 0x0107     ; 0x800107 &lt;guard variable for uart&lt;drv::uart1&gt;::rxq+0x6&gt;\n 226:   90 91 08 01     lds     r25, 0x0108     ; 0x800108 &lt;guard variable for uart&lt;drv::uart1&gt;::rxq+0x7&gt;\n 22a:   11 d0           rcall   .+34            ; 0x24e &lt;__adddi3_s8&gt;\n 22c:   20 93 01 01     sts     0x0101, r18     ; 0x800101 &lt;guard variable for uart&lt;drv::uart1&gt;::rxq&gt;\n 230:   30 93 02 01     sts     0x0102, r19     ; 0x800102 &lt;guard variable for uart&lt;drv::uart1&gt;::rxq+0x1&gt;\n 234:   40 93 03 01     sts     0x0103, r20     ; 0x800103 &lt;guard variable for uart&lt;drv::uart1&gt;::rxq+0x2&gt;\n 238:   50 93 04 01     sts     0x0104, r21     ; 0x800104 &lt;guard variable for uart&lt;drv::uart1&gt;::rxq+0x3&gt;\n 23c:   60 93 05 01     sts     0x0105, r22     ; 0x800105 &lt;guard variable for uart&lt;drv::uart1&gt;::rxq+0x4&gt;\n 240:   70 93 06 01     sts     0x0106, r23     ; 0x800106 &lt;guard variable for uart&lt;drv::uart1&gt;::rxq+0x5&gt;\n 244:   80 93 07 01     sts     0x0107, r24     ; 0x800107 &lt;guard variable for uart&lt;drv::uart1&gt;::rxq+0x6&gt;\n 248:   90 93 08 01     sts     0x0108, r25     ; 0x800108 &lt;guard variable for uart&lt;drv::uart1&gt;::rxq+0x7&gt;\n 24c:   08 95           ret\n\n0000024e &lt;__adddi3_s8&gt;:\n 24e:   00 24           eor     r0, r0\n 250:   a7 fd           sbrc    r26, 7\n 252:   00 94           com     r0\n 254:   2a 0f           add     r18, r26\n 256:   30 1d           adc     r19, r0\n 258:   40 1d           adc     r20, r0\n 25a:   50 1d           adc     r21, r0\n 25c:   60 1d           adc     r22, r0\n 25e:   70 1d           adc     r23, r0\n 260:   80 1d           adc     r24, r0\n 262:   90 1d           adc     r25, r0\n 264:   08 95           ret\n\n00000266 &lt;__tablejump2__&gt;:\n 266:   ee 0f           add     r30, r30\n 268:   ff 1f           adc     r31, r31\n 26a:   05 90           lpm     r0, Z+\n 26c:   f4 91           lpm     r31, Z\n 26e:   e0 2d           mov     r30, r0\n 270:   09 94           ijmp\n</code></pre>\n\n<p>Variables <code>uart&lt;drv::uart0&gt;::rxq&gt;</code> is defined as follows (<code>uart&lt;drv::uart0&gt;::rxq&gt;</code> has a similar definition):</p>\n\n<pre><code>namespace drv {\n\nstruct uart0\n{\n    static void putchar(char c) { UDR0 = c; }\n};\n\n}   /* namespace drv */\n\n\n\nclass uart0 : uart&lt;drv::uart0&gt;\n{\n    ...\n};\n\ntemplate &lt;class driver&gt;\nclass uart : public driver\n{\nprotected:\n    static cqueue rxq;\n\npublic:\n    static char getchar() { ... }\n};\n\ntemplate&lt;class driver&gt; \ncqueue uart&lt;driver&gt;::rxq __attribute__ ((section (\".noinit\")));\n</code></pre>\n\n<p>In the above, <code>cqueue</code> is the circular buffer class:</p>\n\n<pre><code>class cqueue\n{\nprotected:\n    typedef union {\n        struct {\n            uint8_t head: 4;\n            uint8_t tail: 4;\n        };\n        uint8_t nibbles;\n    } nibbles_t;\n\n    // Indices and data initialized with zeroes\n    volatile nibbles_t ptr;\n    qchar data[ 1 &lt;&lt; 4 ];\n\npublic:\n    bool is_empty() const { return ptr.head == ptr.tail; }\n    void reset() { ptr.head = ptr.tail = 0; }\n    uint8_t available() const { ... }\n    bool put(qchar) { ... }\n    qchar get() { ... }\n};\n</code></pre>\n\n<p>The circular buffer is meant to be uninitialized so I don't understand why and what the guard code is doing there. Despite adding the <code>.noinit</code> section that code is still present and is chewing up a part of the flash (almost <strong>200 bytes</strong>, just to control <strong>32</strong>!) I'd rather keep.</p>\n\n<p>The guard code is called from the beginning of the program:</p>\n\n<pre><code>00000124 &lt;__do_global_ctors&gt;:\n 124:   10 e0           ldi     r17, 0x00       ; 0\n 126:   c4 e8           ldi     r28, 0x84       ; 132\n 128:   d0 e0           ldi     r29, 0x00       ; 0\n 12a:   03 c0           rjmp    .+6             ; 0x132 &lt;__do_global_ctors+0xe&gt;\n 12c:   21 97           sbiw    r28, 0x01       ; 1\n 12e:   fe 01           movw    r30, r28\n 130:   9a d0           rcall   .+308           ; 0x266 &lt;__tablejump2__&gt;\n 132:   c3 38           cpi     r28, 0x83       ; 131\n 134:   d1 07           cpc     r29, r17\n 136:   d1 f7           brne    .-12            ; 0x12c &lt;__do_global_ctors+0x8&gt;\n</code></pre>\n\n<p>How can I tell the compiler not to add that guard code?</p>\n"}, {"tags": ["c++", "windows", "qt", "linker", "include"], "comments": [{"owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 0, "creation_date": 1502303361, "post_id": 45597816, "comment_id": 78155801, "body": "Why not use <a href=\"https://doc.qt.io/qt-5/qversionnumber.html\" rel=\"nofollow noreferrer\"><b>QVersionNumber</b></a> for version."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1502307820, "post_id": 45597816, "comment_id": 78158239, "body": "@ErrorSyntacticRemorse: QVersionNumber has nothing to do with what OP is trying to achieve."}, {"owner": {"reputation": 121, "user_id": 6553450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61f6a3abf6f8bafd528316a1b118589f?s=128&d=identicon&r=PG&f=1", "display_name": "Jamie S", "link": "https://stackoverflow.com/users/6553450/jamie-s"}, "edited": false, "score": 0, "creation_date": 1502307973, "post_id": 45597816, "comment_id": 78158315, "body": "@ErrorSyntacticRemorse I&#39;m specifically looking to embed version data within the executable file itself (so I can know it without needing to run the exe). QVersionNumber doesn&#39;t provide that, unfortunately."}], "owner": {"reputation": 121, "user_id": 6553450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61f6a3abf6f8bafd528316a1b118589f?s=128&d=identicon&r=PG&f=1", "display_name": "Jamie S", "link": "https://stackoverflow.com/users/6553450/jamie-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 387, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1502307516, "creation_date": 1502302158, "last_edit_date": 1502307516, "question_id": 45597816, "link": "https://stackoverflow.com/questions/45597816/qt-automatically-generated-rc-file-cannot-open-include-file-windows-h", "title": "Qt automatically generated .rc file cannot open include file &#39;windows.h&#39;", "body": "<p>In my Qt 5.9.1 project, I wanted to add version info to the executable to help with debugging. So, I added <code>VERSION = 1.0.0</code> to the 'Project.pro' file, which automatically generated a 'Project_resource.rc' file, as expected from <a href=\"http://doc.qt.io/qt-5/qmake-variable-reference.html#version\" rel=\"nofollow noreferrer\">Qt Version</a>.</p>\n\n<p>However, the project now fails to compile, giving the error <code>RC1015: cannot open include file 'windows.h'</code> on the line <code>#include &lt;windows.h&gt;</code> in 'Project_resource.rc'. I know that <code>windows.h</code> is known by the compiler at another point in the program, because in <code>main.cpp</code> I <code>#include &lt;windows.h&gt;</code> and use a function from there, and that successfully compiles. I just can't figure out why the 'Project_resource.rc' can't find that same file.</p>\n\n<p>Note: I have the following above the <code>VERSION = 1.0.0</code> line in 'Project.pro', which is how my <code>main.cpp</code> can find <code>&lt;windows.h&gt;</code>.</p>\n\n<pre><code>INCLUDEPATH += \"C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt\"\nLIBS += -L\"C:/Program Files (x86)/Windows Kits/10/Lib/10.0.10240.0/ucrt/x64\"\nINCLUDEPATH += \"C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/um\"\nLIBS += -L\"C:/Program Files (x86)/Windows Kits/10/Lib/10.0.10240.0/um/x64\"\nINCLUDEPATH += \"C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/shared\"\n</code></pre>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1502301775, "post_id": 45597688, "comment_id": 78154875, "body": "You mean like <code>unordered_map&lt;string, MyClass*&gt; idToMyClassMap{{&quot;foo&quot;, nullptr},{&quot;bar&quot;, nullptr}};</code>?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1502302308, "post_id": 45597688, "comment_id": 78155170, "body": "I would make it properly synchronized first and measure if it really needs that hacks (which are dangerous)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1502302566, "post_id": 45597688, "comment_id": 78155324, "body": "@Slava, those are not hacks, but very standard practice."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1502303440, "post_id": 45597688, "comment_id": 78155860, "body": "@SergeyA when you deduce what method can do and cannot do from observed behavior, but not from documentation I would consider that as a hack."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1502303921, "post_id": 45597688, "comment_id": 78156111, "body": "@Slava, which methods are you referring to?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1502304118, "post_id": 45597688, "comment_id": 78156231, "body": "@SergeyA non const version of <code>std::unordered_map::find()</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1502304450, "post_id": 45597688, "comment_id": 78156420, "body": "@Slava, it is your choice to infer gurantees from behavior, not documentation, not mine. Have you chosen to infer it from documentation, like I did, you&#39;d find this page: <a href=\"http://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container</a> and read it."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1502304643, "post_id": 45597688, "comment_id": 78156530, "body": "@Then you should point to this documentation and put a quote from it."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1502305030, "post_id": 45597688, "comment_id": 78156737, "body": "@Slava, if you are not familiar with certain area, you should ask the question, rather than assuming."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 1, "last_activity_date": 1502304503, "last_edit_date": 1502304503, "creation_date": 1502301870, "answer_id": 45597738, "question_id": 45597688, "link": "https://stackoverflow.com/questions/45597688/update-values-corresponding-to-different-existing-keys-in-unordred-map-from-mult/45597738#45597738", "title": "Update values corresponding to different existing keys in unordred_map from multiple threads", "body": "<p>Yes, this would work in the sense that you will not be subjecting yourself to race conditions - assuming you do not modify the same element from more than one thread.</p>\n\n<p><code>find</code> is a rare example of the container member function which is not marked <code>const</code> (because it returns modifiable iterator) but still is safe to be called from multiple threads simultaneously. </p>\n\n<p>To get more information on container thread-safety, I strongly recommend memorizing this page: <a href=\"http://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/container</a></p>\n"}, {"tags": [], "owner": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "is_accepted": false, "score": 0, "last_activity_date": 1502654941, "last_edit_date": 1502654941, "creation_date": 1502332137, "answer_id": 45603488, "question_id": 45597688, "link": "https://stackoverflow.com/questions/45597688/update-values-corresponding-to-different-existing-keys-in-unordred-map-from-mult/45603488#45603488", "title": "Update values corresponding to different existing keys in unordred_map from multiple threads", "body": "<p>Your approach triggers undefined behavior since you have a potential situation where multiple threads access the <code>MyClass</code> pointer in an existing map element while at least one of them is modifying it.</p>\n\n<p>Reading and writing to a single memory location is forbidden by the standard in the section about data races (1.10.1-2):</p>\n\n<blockquote>\n  <p>Two expression evaluations conflict if one of them modifies a memory location and the other one reads or modifies the same memory location.</p>\n</blockquote>\n\n<p>This problem has many aspects and one of them is that a thread may access a partially constructed <code>MyClass</code> object since object creation is not synchronized between threads.  </p>\n\n<p>Consider using a <code>std::shared_mutex</code> (C++17) for read/write access on the map; pre-allocating elements will not be necessary then</p>\n"}], "owner": {"reputation": 45, "user_id": 6182843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48570de7857c8286350587307955ffa5?s=128&d=identicon&r=PG&f=1", "display_name": "no89key", "link": "https://stackoverflow.com/users/6182843/no89key"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 45597738, "answer_count": 2, "score": 1, "last_activity_date": 1502654941, "creation_date": 1502301677, "question_id": 45597688, "link": "https://stackoverflow.com/questions/45597688/update-values-corresponding-to-different-existing-keys-in-unordred-map-from-mult", "title": "Update values corresponding to different existing keys in unordred_map from multiple threads", "body": "<p>I have an unordered map looks like this:</p>\n\n<pre><code>unordered_map&lt;string, MyClass*&gt; idToMyClassMap;\n</code></pre>\n\n<p>Now I understand that I cannot do insert/delete and etc to this map from multiple threads without synchronization. But can I pre-populate this map with the largest possible entries that I will use with an list of pre-known string key and all nullptr for MyClass. When I actually want to \"insert\" to this map, I will just iterate through the map, find which key is nullptr and use that. When I am deleting, I will set the value to nullptr again.</p>\n\n<p>Would this work?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1502301269, "post_id": 45597520, "comment_id": 78154597, "body": "&quot;why is the program throwing me an error of out of bounds????&quot; Hmm maybe because you &#39;re trying to access out of bounds?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1502301284, "post_id": 45597520, "comment_id": 78154608, "body": "<code>for(i=1;i&lt;n-1;i++)</code> If you erase items there no longer will be n items."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502301332, "post_id": 45597520, "comment_id": 78154640, "body": "Erasing elements from the vector changes it&#39;s size, hence you&#39;re going out of bounds. Consider to change <code>n</code> accordingly (<code>--n</code>)."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 2, "creation_date": 1502301497, "post_id": 45597520, "comment_id": 78154736, "body": "Always iterate backwards when deleting elements in the &quot;naive way&quot;, it&#39;ll still be O(n^2), but at least you&#39;ll avoid &quot;shifting indexes&quot;."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 2, "creation_date": 1502301663, "post_id": 45597520, "comment_id": 78154825, "body": "(that being said, the proper solution is O(n), with the classical &quot;read pointer/write pointer&quot; loop, or more simply, using <code>std::remove</code> and its relatives)"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1502301915, "post_id": 45597520, "comment_id": 78154946, "body": "Construct a set from vector and then assign the data back to vector."}, {"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 1, "creation_date": 1502302010, "post_id": 45597520, "comment_id": 78154983, "body": "A good debugger could be very helpful in finding the problem here... Have you tried one?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1502302702, "post_id": 45597520, "comment_id": 78155417, "body": "Why all the downvotes? The question is clear enough and even has short and to-the-point sample code. That&#39;s better than most questions."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 2, "last_activity_date": 1502302547, "creation_date": 1502302547, "answer_id": 45597931, "question_id": 45597520, "link": "https://stackoverflow.com/questions/45597520/index-out-of-bound-exception-while-accessing-vector-elements/45597931#45597931", "title": "index out of bound exception while accessing vector elements", "body": "<p>You are accessing out of bounds since after erasing an element your container is now one element shorter than the number of times you are iterating.</p>\n\n<p>In any case; you can solve your problem in two lines if you just use what's already available in the standard library:</p>\n\n<pre><code>auto last = std::unique(a.begin(), a.end());\na.erase(last, a.end()); \n</code></pre>\n\n<p>See also: <a href=\"http://en.cppreference.com/w/cpp/algorithm/unique\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/algorithm/unique</a></p>\n"}], "owner": {"reputation": 7, "user_id": 8441267, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-8wHPj86Mtag/AAAAAAAAAAI/AAAAAAAABh8/qygQXdpQFsA/photo.jpg?sz=128", "display_name": "varun krishna", "link": "https://stackoverflow.com/users/8441267/varun-krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 45597931, "answer_count": 1, "score": -4, "last_activity_date": 1502331843, "creation_date": 1502301089, "last_edit_date": 1502331843, "question_id": 45597520, "link": "https://stackoverflow.com/questions/45597520/index-out-of-bound-exception-while-accessing-vector-elements", "title": "index out of bound exception while accessing vector elements", "body": "<pre><code>#include &lt;iostream&gt;\n#include&lt;algorithm&gt;\n#include&lt;vector&gt;\nusing namespace std;\n\n\n    int main()\n{\n    int t;\n    cin&gt;&gt;t;\n    while(t--)\n    { vector &lt;int&gt; a,b;\n      int i,n,m,k;\n      bool cond=true;\n     cin&gt;&gt;n;\n     for(i=0;i&lt;n;i++)\n     {\n         cin&gt;&gt;m;\n         a.push_back(m);\n     }\n     for(i=1;i&lt;n-1;i++)\n     {\n         if(a.at(i)==a.at(i+1))\n            a.erase(a.begin()+i);\n     }\n     n=a.size();\n     for(i=0;i&lt;n;i++)\n        cout&lt;&lt;a[i];\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I want to delete all repetitions of consecutive numbers.<br>\nThis program throws an \"out of bounds\" error. \nIs there any logical error, or could you suggest some better algorithm?</p>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1502301116, "post_id": 45597492, "comment_id": 78154509, "body": "Everything you could want to know: <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\" title=\"what are the basic rules and idioms for operator overloading\">stackoverflow.com/questions/4421706/&hellip;</a>"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 3, "creation_date": 1502301166, "post_id": 45597492, "comment_id": 78154533, "body": "Btw this <code>return (book1==book2) ? true : false;</code> could simply be <code>return book1 == book2;</code>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8075674"}, "edited": false, "score": 0, "creation_date": 1502301477, "post_id": 45597554, "comment_id": 78154719, "body": "This is exactly what I was looking for"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8075674"}, "edited": false, "score": 0, "creation_date": 1502302287, "post_id": 45597554, "comment_id": 78155161, "body": "I don&#39;t want to create an entirely new question just for one little issue, but if I had an object called book1 would it be possible that I could use the current object that is calling the function as a parameter? So if I had a function called compare(), and I called book1.compare(book2) it would automatically compare book1 to book2 instead of making me pass in two objects."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1502302439, "post_id": 45597554, "comment_id": 78155249, "body": "This is what method does (case 1), you can call it as <code>book1 == book2</code> or more explicit <code>book1.operator==( book2 )</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8075674"}, "edited": false, "score": 0, "creation_date": 1502302639, "post_id": 45597554, "comment_id": 78155375, "body": "so could that be put into a function called compare() that I call with book1.compare(book2)?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1502303069, "post_id": 45597554, "comment_id": 78155641, "body": "@sS5H I do not quite understand your question, you probably better create another one with code sample explaining what you want to achieve. You definitely can write <code>compare()</code> as a method that internally calls <code>==</code> either way. For example <code>bool compare( const &amp;b ) const { return *this == b; }</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8075674"}, "edited": false, "score": 0, "creation_date": 1502303942, "post_id": 45597554, "comment_id": 78156127, "body": "Yes, that is precisely what I had in mind. Thank you"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 4, "last_activity_date": 1502301821, "last_edit_date": 1502301821, "creation_date": 1502301218, "answer_id": 45597554, "question_id": 45597492, "link": "https://stackoverflow.com/questions/45597492/overloading-the-comparison-operator-for-object-members/45597554#45597554", "title": "Overloading the comparison operator for object members", "body": "<p>You basically have 2 choices:</p>\n\n<ol>\n<li><p>use a member operator with one argument:</p>\n\n<pre><code>class Book {\n...\n    bool operator==( const Book &amp;an ) const { return ISDN() == an.ISDN(); }\n};\n</code></pre></li>\n<li><p>use a non-member operator (and possibly a <code>friend</code> statement) with 2 arguments:</p>\n\n<pre><code>bool operator==( const Book &amp;b1, const Book &amp;b2 )\n{\n    return b1.ISBN() == b2.ISBN();\n}\n</code></pre></li>\n</ol>\n\n<p>Note that <code>ISDN()</code> should be made <code>const</code>.</p>\n\n<p>Either way, you need to return a <code>bool</code>, not a <code>Book &amp;</code>, which is usually returned by the assignment operator <code>=</code>, not the comparison operator <code>==</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8075674"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5994, "favorite_count": 0, "accepted_answer_id": 45597554, "answer_count": 1, "score": 0, "last_activity_date": 1502301821, "creation_date": 1502300991, "question_id": 45597492, "link": "https://stackoverflow.com/questions/45597492/overloading-the-comparison-operator-for-object-members", "title": "Overloading the comparison operator for object members", "body": "<p>Say I have a class called book:</p>\n\n<pre><code>class Book {\n    int i;\n\n    public:\n        Book(int ii)\n        : i(ii) {\n        }\n\n        int ISBN() {\n            return i;\n        }\n};\n</code></pre>\n\n<p>I want to overload the comparison operator for the Book class, so that I can create a bool function that will compare the member \"i\" when it comes across book1==book2.</p>\n\n<pre><code>bool is_same() {\n    return (book1==book2) ? true : false;\n}\n</code></pre>\n\n<p>How would I go about this? This is the current operator overload function I have, it gives me an \"invalid initialization of non-const reference of type 'Book&amp;' from an rvalue of the type 'bool'\" error. I currently have my overloaded function inside of the class Book as a public function.</p>\n\n<pre><code>Book&amp; operator==(const Book&amp; b) const {\n        return ISBN() == b.ISBN();\n    }\n</code></pre>\n\n<p>I'm relatively new to operator overloading, I have sifted through many answers but none of them resolve my issue. I understand how one could simply do book1==book2, but that would only return true if every single member was of the same value. In this case I have more than just one, but I only want to return true if \"i\" is the same for both objects.</p>\n"}, {"tags": ["java", "c++", "opencv", "cmake", "linux-mint"], "comments": [{"owner": {"reputation": 5711, "user_id": 1398418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30a1570b27c1389f4decdd649ebe9d9?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/1398418/oleg"}, "edited": false, "score": 0, "creation_date": 1502301970, "post_id": 45597379, "comment_id": 78154967, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/18529800/how-to-resolve-could-not-find-jni-building-opencv-on-raspberry-pi\">How to resolve &quot;Could not find JNI&quot;, building OpenCV on Raspberry Pi?</a>"}, {"owner": {"reputation": 26, "user_id": 6280194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc75c7d1f40faa90a9b9e40265bcc4fe?s=128&d=identicon&r=PG&f=1", "display_name": "chamith mawela", "link": "https://stackoverflow.com/users/6280194/chamith-mawela"}, "reply_to_user": {"reputation": 5711, "user_id": 1398418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30a1570b27c1389f4decdd649ebe9d9?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/1398418/oleg"}, "edited": false, "score": 0, "creation_date": 1502302112, "post_id": 45597379, "comment_id": 78155059, "body": "already tried every thing in that post. still couldn&#39;t solve the problem"}], "owner": {"reputation": 26, "user_id": 6280194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc75c7d1f40faa90a9b9e40265bcc4fe?s=128&d=identicon&r=PG&f=1", "display_name": "chamith mawela", "link": "https://stackoverflow.com/users/6280194/chamith-mawela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 861, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502302230, "creation_date": 1502300593, "last_edit_date": 1502302230, "question_id": 45597379, "link": "https://stackoverflow.com/questions/45597379/how-to-resolve-opencv-cmake-building-error-could-not-findjni-on-linuxmint", "title": "how to resolve opencv cmake building error: could NOT findJNI on linuxmint?", "body": "<p>I am trying to do a project combining opencv with java. I am trying to build opencv using cmake. But every time I am trying to do so following error comes up.\ncommand I used is,</p>\n\n<p><code>cmake -DBUILD_SHARED_LIBS=OFF ..</code></p>\n\n<p>The error message received is:</p>\n\n<pre><code>Could NOT find JNI (missing: JAVA_AWT_LIBRARY JAVA_JVM_LIBRARY \nJAVA_INCLUDE_PATH JAVA_INCLUDE_PATH2 JAVA_AWT_INCLUDE_PATH) \n</code></pre>\n\n<p>I have tried every thing by searching the threads here,  but couldn't find the solution for this. <br><br>Things I have tried are:</p>\n\n<ol>\n<li><strong>Setting the environmental variables</strong> for java using <code>export JAVA_HOME=/usr/lib/jvm/java-8-oracle</code></li>\n<li><strong>editing the FindJNI.cmake file</strong> under cmake installed directory</li>\n</ol>\n\n<p>I am using cmake 3.0. and linux mint as the OS.</p>\n"}, {"tags": ["c++", "uniform-initialization", "list-initialization"], "comments": [{"owner": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 0, "creation_date": 1502300085, "post_id": 45597163, "comment_id": 78153864, "body": "<a href=\"http://en.cppreference.com/w/cpp/utility/initializer_list\" rel=\"nofollow noreferrer\">initializer_list</a>? BTW... in this particular case, you can reduce your code by using a <a href=\"http://en.cppreference.com/w/cpp/language/default_arguments\" rel=\"nofollow noreferrer\">default argument</a>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1502300171, "post_id": 45597163, "comment_id": 78153929, "body": "If you just use <code>const char*</code> instead of <code>char*</code>, it simply compiles as is. What&#39;s the question?"}], "answers": [{"comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1502300523, "post_id": 45597292, "comment_id": 78154146, "body": "If you need <code>field2</code> to be changeable, you need to either use <code>std::string</code> or copy the string manually. Even if you don\u2019t need <code>const</code>-ness, you should probably still use <code>std::string</code> or the C++17 <code>std::string_view</code>."}, {"owner": {"reputation": 1070, "user_id": 2752442, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6b31e07cade10f63e7958d6ccd4230e3?s=128&d=identicon&r=PG", "display_name": "Fylax", "link": "https://stackoverflow.com/users/2752442/fylax"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1502300692, "post_id": 45597292, "comment_id": 78154246, "body": "@DanielH nice thing the <code>string_view</code>. This is immutable so it was a <code>const char*</code>, it did not copy it as I did think it wasn&#39;t important. I was wrong! Just to be clear, if <code>field1</code> is constant too (and then I have a <code>const int a</code> in costructor, everything keep working?"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 2, "creation_date": 1502300791, "post_id": 45597292, "comment_id": 78154308, "body": "You can initialize a non-<code>const</code> variable with a <code>const</code> value. The issue here is that you can\u2019t initialize a <i>pointer to non-<code>const</code></i> with a <code>pointer to *const*</code>, because then you could change the value through the created pointer."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 7, "last_activity_date": 1502301019, "last_edit_date": 1502301019, "creation_date": 1502300296, "answer_id": 45597292, "question_id": 45597163, "link": "https://stackoverflow.com/questions/45597163/custom-brace-initializer/45597292#45597292", "title": "Custom brace initializer", "body": "<p>You're almost there.  <code>MyStruct x = { 1, \"string\" };</code> is called <em>copy list initialization</em>.  It will attempt to construct a <code>MyStruct</code> from the available constructors with the parameters supplied from the <em>braced-init-list</em></p>\n\n<p>Your issue is that your constructor takes a <code>char*</code> while <code>\"string\"</code> is a <code>const char[N]</code> which can decay to a <code>const char*</code>, not a <code>char*</code>.  So making thing that change </p>\n\n<pre><code>struct MyStruct {\n    int field1;\n   const char* field2;\n    MyStruct(int a, const char* b): field2(b) {\n        field1 = a;\n    }\n    MyStruct(int a): MyStruct(a, nullptr) {}\n    ~MyStruct() {}\n};\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>MyStruct x = { 1, \"string\" };\n</code></pre>\n\n<p>Will work.  If you want to make this a little more bullet proof you can change <code>field2</code> to be a <code>std::string</code> and use</p>\n\n<pre><code>struct MyStruct {\n    int field1;\n    std::string field2;\n    MyStruct(int a, const std::string&amp; b): field1(a), field2(b) {}\n    MyStruct(int a): MyStruct(a, \"\") {}\n    ~MyStruct() {}\n};\n</code></pre>\n"}], "owner": {"reputation": 1070, "user_id": 2752442, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6b31e07cade10f63e7958d6ccd4230e3?s=128&d=identicon&r=PG", "display_name": "Fylax", "link": "https://stackoverflow.com/users/2752442/fylax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 45597292, "answer_count": 1, "score": 2, "last_activity_date": 1502301699, "creation_date": 1502299916, "last_edit_date": 1502301699, "question_id": 45597163, "link": "https://stackoverflow.com/questions/45597163/custom-brace-initializer", "title": "Custom brace initializer", "body": "<p>Let's say I have this struct:</p>\n\n<pre><code>struct MyStruct {\n    int field1;\n    char *field2;\n    MyStruct(int a, char* b): field2(b) {\n        field1 = doStuff(a);\n    }\n    MyStruct(int a): MyStruct(a, nullptr) {}\n    ~MyStruct();\n}\n</code></pre>\n\n<p>As far as I know this is not an aggregate as I have some constructors.</p>\n\n<p>What I want to achieve is to use the <em>curly brace initializer</em> in a custom way, which means using a code like this:</p>\n\n<pre><code>MyStruct x = { 1, \"string\" };\n</code></pre>\n\n<p>which implicitly calls the proper constructor (the first one in this case).</p>\n\n<p>Is this possible in any way?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1502299868, "post_id": 45597127, "comment_id": 78153737, "body": "because <code>blocks[1]</code> contains <code>&quot;0&quot;</code>"}, {"owner": {"reputation": 435, "user_id": 7254217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cae6804e10636ea9ec75c5565c855c1?s=128&d=identicon&r=PG&f=1", "display_name": "Acontz", "link": "https://stackoverflow.com/users/7254217/acontz"}, "edited": false, "score": 1, "creation_date": 1502299914, "post_id": 45597127, "comment_id": 78153764, "body": "This isn&#39;t really relevant but <code>using namespace std</code> is generally considered a bad practice because it pollutes the namespace."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 4, "creation_date": 1502299925, "post_id": 45597127, "comment_id": 78153769, "body": "This isn&#39;t even valid C++. Statements can&#39;t exist outside of a function. Where&#39;s <code>main()</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1502299949, "post_id": 45597127, "comment_id": 78153782, "body": "What do you expect <code>(&quot;0x&quot;, lBlock, randBlock[rand() % 14], &quot;0&quot;)</code> to do?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1502299953, "post_id": 45597127, "comment_id": 78153784, "body": "please tell us what do you think your code does and what did you expect to print?"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502299983, "post_id": 45597127, "comment_id": 78153797, "body": "You cannot call functions outside of any function scope. Did you miss to embed that code into <code>int main { }</code>?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1502300155, "post_id": 45597127, "comment_id": 78153912, "body": "@Ron why not?..."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1502300168, "post_id": 45597127, "comment_id": 78153924, "body": "Please read up on the <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code> constructors</a>, I don&#39;t see any constructors that convert an integer value."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1502300192, "post_id": 45597127, "comment_id": 78153946, "body": "@bolov Lacks a seed."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1502300218, "post_id": 45597127, "comment_id": 78153968, "body": "@Ron yes it does lack a seed. Still random though."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1502300257, "post_id": 45597127, "comment_id": 78153995, "body": "Looks like you may want to create a <code>struct</code> or <code>class</code> to represent a block (for the <code>blocks</code> array)."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 435, "user_id": 7254217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cae6804e10636ea9ec75c5565c855c1?s=128&d=identicon&r=PG&f=1", "display_name": "Acontz", "link": "https://stackoverflow.com/users/7254217/acontz"}, "edited": false, "score": 0, "creation_date": 1502300473, "post_id": 45597127, "comment_id": 78154117, "body": "@HeikoKoelle I would not recommend doing that but <code>using namespace</code> in cpp file is personal preference. Doing so in header would be harmful."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1502300534, "post_id": 45597127, "comment_id": 78154153, "body": "@Slava Both are harmful in different ways. In a header it&#39;s more harmful, but it&#39;s still harmful in a cpp file."}, {"owner": {"reputation": 4346, "user_id": 6375113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JHg5K.jpg?s=128&g=1", "display_name": "Bugs", "link": "https://stackoverflow.com/users/6375113/bugs"}, "edited": false, "score": 0, "creation_date": 1502364084, "post_id": 45597127, "comment_id": 78182685, "body": "Please don&#39;t append <i>solved</i> to the title. Instead consider marking an answer as accepted which will tell others that is has now been solved. Thank you."}, {"owner": {"reputation": 3, "user_id": 7832599, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bU96DKn6EmY/AAAAAAAAAAI/AAAAAAAAAQM/UIR3wwvnxYA/photo.jpg?sz=128", "display_name": "Joe Standring", "link": "https://stackoverflow.com/users/7832599/joe-standring"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1502364242, "post_id": 45597127, "comment_id": 78182787, "body": "I forgot to include the main() function in my code example but it is in my code and im sorry for the confusion. I would also like to ask what Heiko Koell means by &quot;pollutes the namespace&quot;. Im kinda new to c++. This has also been solved by @cdhowie and I thank you all for your input."}, {"owner": {"reputation": 19564, "user_id": 5292302, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b61b00d5bcb378f99eadff312544514?s=128&d=identicon&r=PG", "display_name": "Petter Friberg", "link": "https://stackoverflow.com/users/5292302/petter-friberg"}, "edited": false, "score": 0, "creation_date": 1502367332, "post_id": 45597127, "comment_id": 78185203, "body": "@Joe if an answer has solved you problem consider to accept the answer (the green check mark) next to answer, see <a href=\"https://stackoverflow.com/tour\">tour</a>"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1502372669, "post_id": 45597127, "comment_id": 78189738, "body": "@JoeStandring It takes all of the names in the <code>std</code> namespace and throws them into your global namespace.  This can cause ambiguity errors at best, or silent usage of the wrong type at worst."}], "answers": [{"tags": [], "owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "is_accepted": true, "score": 5, "last_activity_date": 1502300804, "last_edit_date": 1502300804, "creation_date": 1502300100, "answer_id": 45597225, "question_id": 45597127, "link": "https://stackoverflow.com/questions/45597127/cout-will-not-display-object-in-array/45597225#45597225", "title": "cout will not display object in array", "body": "<pre><code>(\"0x\", lBlock, randBlock[rand() % 14], \"0\")\n</code></pre>\n\n<p>This expression invokes the <a href=\"http://en.cppreference.com/w/cpp/language/operator_other\" rel=\"nofollow noreferrer\">comma (<code>,</code>) operator</a> three times.</p>\n\n<blockquote>\n  <p>In a comma expression <code>E1, E2</code>, the expression <code>E1</code> is evaluated, its result is discarded ... and its side effects are completed before evaluation of the expression <code>E2</code> begins.</p>\n  \n  <p>The type, value, and value category of the result of the comma expression are exactly the type, value, and value category of the second operand, <code>E2</code>.</p>\n</blockquote>\n\n<p>To put it another way, <code>(a, b) == b</code>, assuming that:</p>\n\n<ul>\n<li><code>b == b</code></li>\n<li>The expression <code>a</code> does not cause any side effects that could cause <code>b != b</code>.</li>\n</ul>\n\n<p>Therefore, the above expression is equivalent to <code>\"0\"</code> (except for the side effect of calling <code>rand()</code>).  <code>std::cout</code> is correctly displaying this value.</p>\n\n<p>It looks like you probably meant this instead:</p>\n\n<pre><code>std::string(\"0x\") + std::to_string(lBlock) + randBlock[rand() % 14] + \"0\"\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7832599, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bU96DKn6EmY/AAAAAAAAAAI/AAAAAAAAAQM/UIR3wwvnxYA/photo.jpg?sz=128", "display_name": "Joe Standring", "link": "https://stackoverflow.com/users/7832599/joe-standring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 45597225, "answer_count": 1, "score": -4, "last_activity_date": 1502365162, "creation_date": 1502299779, "last_edit_date": 1502365162, "question_id": 45597127, "link": "https://stackoverflow.com/questions/45597127/cout-will-not-display-object-in-array", "title": "cout will not display object in array", "body": "<p>So I have an array with currently two objects. When ran, the display is \"0\".</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;process.h&gt;\n#include &lt;string&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint lBlock = rand() % 99 + 10;\nint rBlock = lBlock + 1;\nstring randBlock[15] = { \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\"};\nstring blocks[2] = {(\"0x\", lBlock, randBlock[rand() % 14], \"0\"), (\"0x\", lBlock, randBlock[rand() % 14], \"0\")};\ncout &lt;&lt; blocks[1];\n</code></pre>\n\n<p>Any help will be greatly apreciated!</p>\n"}, {"tags": ["python", "c++", "linux", "windows", "unix"], "comments": [{"owner": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "edited": false, "score": 0, "creation_date": 1502300035, "post_id": 45597124, "comment_id": 78153829, "body": "google://&quot;python ffi&quot;"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502300833, "post_id": 45597124, "comment_id": 78154339, "body": "Python provides a C-API, also you could consider to use <code>boost::python</code> for interfacing."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1502304249, "post_id": 45597124, "comment_id": 78156308, "body": "Requesting libraries, documentation, examples, tutorials is off-topic in SO."}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 1214490, "user_type": "registered", "profile_image": "https://graph.facebook.com/706878126/picture?type=large", "display_name": "Vedhas Deshpande", "link": "https://stackoverflow.com/users/1214490/vedhas-deshpande"}, "is_accepted": false, "score": 0, "last_activity_date": 1502308853, "creation_date": 1502308853, "answer_id": 45599643, "question_id": 45597124, "link": "https://stackoverflow.com/questions/45597124/transferring-data-between-python-and-c-without-writing-to-file-windows-and-uni/45599643#45599643", "title": "Transferring Data Between Python and C++ Without Writing To File Windows and Unix", "body": "<p>You can define message between python and C++ using google's protobuf:</p>\n\n<p><a href=\"https://developers.google.com/protocol-buffers/\" rel=\"nofollow noreferrer\">https://developers.google.com/protocol-buffers/</a></p>\n\n<p>Define a .proto file following the protobuf convention, then convert that proto file to python package, and C++ definitions.</p>\n\n<p>Add a message between python and C++ application, while sending the message make sure you encode and receiving decode it using proper APIs. Include the headers and package when compiling.</p>\n"}, {"tags": [], "owner": {"reputation": 1312, "user_id": 1033326, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/544e259be531876393970779b7c25f28?s=128&d=identicon&r=PG", "display_name": "sancelot", "link": "https://stackoverflow.com/users/1033326/sancelot"}, "is_accepted": false, "score": 0, "last_activity_date": 1502312033, "creation_date": 1502312033, "answer_id": 45600485, "question_id": 45597124, "link": "https://stackoverflow.com/questions/45597124/transferring-data-between-python-and-c-without-writing-to-file-windows-and-uni/45600485#45600485", "title": "Transferring Data Between Python and C++ Without Writing To File Windows and Unix", "body": "<p>this is possible, but you will have to take your time. some steps are needed.</p>\n\n<p>you can use swig to make a shared library/dll that will wrap your c++ function for python. this will run on  linux / and windows, if you compile it for linux and win32. </p>\n\n<p>Another option is to embed python in c++. </p>\n\n<p>finally to package the whole thing for windows use cx_freeze to make a windows exe and  then innosetup to make an installation package.</p>\n"}], "owner": {"reputation": 15, "user_id": 8217105, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-snHRHOGDpZ4/AAAAAAAAAAI/AAAAAAAAAAA/S7VEDdFeYtc/photo.jpg?sz=128", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/8217105/daniel-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 670, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1502312033, "creation_date": 1502299766, "last_edit_date": 1502301177, "question_id": 45597124, "link": "https://stackoverflow.com/questions/45597124/transferring-data-between-python-and-c-without-writing-to-file-windows-and-uni", "title": "Transferring Data Between Python and C++ Without Writing To File Windows and Unix", "body": "<p>I have pre-existing python and C++ files where the python file defines a number of points and the C++ code does the calculations I need with its existing libraries. The end product of this is a file that the C++ code writes out. I am looking for a way in python to take a list of say 2000 points, pass it to a function and then all of the C++ code is executed and the file I need is output.</p>\n\n<p>Some other notes. This needs to be something that could work on Linux or Windows machines, and a minimal amount of installing new plugins would be nice (but I will take what I can get). Also this is all going to be run on the same machine.</p>\n\n<p>Please let me know what my best options are!</p>\n"}, {"tags": ["c++", "qt", "placeholder", "qlineedit"], "comments": [{"owner": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1502300118, "post_id": 45596988, "comment_id": 78153891, "body": "Everything is fine here, the problem elsewhere)"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1502301882, "post_id": 45596988, "comment_id": 78154920, "body": "If you put text with <code>setText()</code>, the placeholder will disappear, you are sure that you have not done that. With the code you show it is impossible to solve the problem. It would be great to share your complete code through github, drive, etc to review it."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1502319911, "post_id": 45596988, "comment_id": 78163334, "body": "Try <code>QLineEdit *q = new QLineEdit(this);</code>"}, {"owner": {"reputation": 513, "user_id": 2836202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a51bd1f2be1a9ab93aee8d828e461aef?s=128&d=identicon&r=PG&f=1", "display_name": "user2836202", "link": "https://stackoverflow.com/users/2836202/user2836202"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1502320246, "post_id": 45596988, "comment_id": 78163419, "body": "What @scopchanov will work if <code>this</code> is a view."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1502320337, "post_id": 45596988, "comment_id": 78163444, "body": "Sorry, but I can&#39;t understand what you mean."}, {"owner": {"reputation": 1018, "user_id": 1875585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qwUtI.jpg?s=128&g=1", "display_name": "PRIME", "link": "https://stackoverflow.com/users/1875585/prime"}, "edited": false, "score": 0, "creation_date": 1502343157, "post_id": 45596988, "comment_id": 78169297, "body": "It seems correct, can you possibly post the code of this complete class/module?"}, {"owner": {"reputation": 123, "user_id": 8397826, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/aeb0efbf115b749fc63bc9af6ca7d289?s=128&d=identicon&r=PG&f=1", "display_name": "annie", "link": "https://stackoverflow.com/users/8397826/annie"}, "edited": false, "score": 0, "creation_date": 1502345995, "post_id": 45596988, "comment_id": 78170460, "body": "There is no connection of this with my program as of now. I have a lineedit into which i want the user to enter the number of items required. To indicate this, I want to set the placeholder text into the linedit using the above two lines of code, but on running, the lineedit is blank without any placeholder set"}, {"owner": {"reputation": 123, "user_id": 8397826, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/aeb0efbf115b749fc63bc9af6ca7d289?s=128&d=identicon&r=PG&f=1", "display_name": "annie", "link": "https://stackoverflow.com/users/8397826/annie"}, "edited": false, "score": 0, "creation_date": 1502346541, "post_id": 45596988, "comment_id": 78170750, "body": "Is there any connection between QLineEdit *q and the object name of my lineEdit?"}], "answers": [{"tags": [], "owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "is_accepted": true, "score": 6, "last_activity_date": 1502361413, "creation_date": 1502361413, "answer_id": 45611358, "question_id": 45596988, "link": "https://stackoverflow.com/questions/45596988/placeholder-in-qt/45611358#45611358", "title": "Placeholder in qt", "body": "<p>As the isolated code you have provided is not enough to give us a clue where the problem is, I suggest you to try this minimalistic example, see if it works for you and adapt it for your purpose. If the adaptation does not work, then post the changes you have made to discuss them.</p>\n\n<p><strong>MainWindow.h</strong></p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n#include &lt;QLineEdit&gt;\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\npublic:\n    explicit MainWindow(QWidget *parent = nullptr);\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p><strong>MainWindow.cpp</strong></p>\n\n<pre><code>#include \"MainWindow.h\"\n\nMainWindow::MainWindow(QWidget *parent) : QMainWindow(parent)\n{\n    QLineEdit *q = new QLineEdit(this);\n    q-&gt;setPlaceholderText(\"Enter number\");\n    setCentralWidget(q);\n}\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 8397826, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/aeb0efbf115b749fc63bc9af6ca7d289?s=128&d=identicon&r=PG&f=1", "display_name": "annie", "link": "https://stackoverflow.com/users/8397826/annie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5530, "favorite_count": 0, "accepted_answer_id": 45611358, "answer_count": 1, "score": 3, "last_activity_date": 1540716541, "creation_date": 1502299293, "last_edit_date": 1540716541, "question_id": 45596988, "link": "https://stackoverflow.com/questions/45596988/placeholder-in-qt", "title": "Placeholder in qt", "body": "<p>I want to set a placeholder text in a QLineEdit. I am using the below code to do so:</p>\n\n<pre><code>QLineEdit *q = new QLineEdit;\nq-&gt;setPlaceholderText(\"Enter number\");\n</code></pre>\n\n<p>But on executing, the placeholder does not set. What may be the problem here?</p>\n"}, {"tags": ["c++", "templates", "explicit-instantiation"], "comments": [{"owner": {"reputation": 2019, "user_id": 1872084, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/IkM1T.jpg?s=128&g=1", "display_name": "Nipun", "link": "https://stackoverflow.com/users/1872084/nipun"}, "edited": false, "score": 1, "creation_date": 1502299786, "post_id": 45596922, "comment_id": 78153685, "body": "if you can use boost, then try with <code>BOOST_PP_LIST_FOR_EACH</code>. You can also refer this link <a href=\"https://stackoverflow.com/questions/23946669/varadiac-macros-for-making-different-partial-specialization-of-a-class\" title=\"varadiac macros for making different partial specialization of a class\">stackoverflow.com/questions/23946669/&hellip;</a>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1502300179, "post_id": 45596922, "comment_id": 78153935, "body": "I really don&#39;t think you should worry too much about explicitly instantiating all the templates. In the bigger picture, they will most likely be dwarfed by the volume of other parts of your code base."}, {"owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "edited": false, "score": 1, "creation_date": 1502300511, "post_id": 45596922, "comment_id": 78154141, "body": "@R Sahu : I prefer explicit instantiation because 1) I like to keep the header clean from the actual implementation 2) I allow instantiation only for types I know the code is made for 3) reduce compiling time"}, {"owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "reply_to_user": {"reputation": 2019, "user_id": 1872084, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/IkM1T.jpg?s=128&g=1", "display_name": "Nipun", "link": "https://stackoverflow.com/users/1872084/nipun"}, "edited": false, "score": 0, "creation_date": 1502300629, "post_id": 45596922, "comment_id": 78154209, "body": "@Nipun: TY. I&#39;ll give a look to Boost even if I didn&#39;t want to have this dependence."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1502304604, "post_id": 45596922, "comment_id": 78156503, "body": "@Teloze, I understand your motivation for explicit instantiation, and I am in favor of it. I am saying, don&#39;t worry too much about the explicit instantiations becoming too verbose or voluminous. Overall, they will be small part of your code base."}, {"owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "edited": false, "score": 0, "creation_date": 1502305807, "post_id": 45596922, "comment_id": 78157179, "body": "@R Sahu, I thought you were referring to the dimensions of the executable. My bad :P"}], "owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1873, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1502299814, "creation_date": 1502298985, "last_edit_date": 1502299814, "question_id": 45596922, "link": "https://stackoverflow.com/questions/45596922/explicit-instantiation-of-member-function-template-of-class-template", "title": "Explicit instantiation of member function template of class template", "body": "<p>Supposing I have  a class template in my header file with a member function template.</p>\n\n<pre><code>//file.hxx\ntemplate&lt;class T&gt;\nstruct A {\n    T val;\n    template&lt;class U&gt; foo(U a);\n};\n</code></pre>\n\n<p>and I have in a .cpp the implementation of foo:</p>\n\n<pre><code>//file.cpp\n#include \"file.hxx\"\n#include &lt;typeinfo&gt;\ntemplate&lt;class T&gt; template&lt;class U&gt;\nA&lt;T&gt;::foo&lt;U&gt;(U a){\n    std::cout &lt;&lt; \"Type T: \" &lt;&lt; typeid(val).name() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Type U: \" &lt;&lt; typeid(a).name() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>If I want to explicitly instantiate my class and member function in the .cpp file for, say, int and float, I need something like:</p>\n\n<pre><code>template struct A&lt;int&gt;;\ntemplate struct A&lt;float&gt;;\ntemplate A&lt;int&gt;::foo&lt;int&gt;(int);\ntemplate A&lt;int&gt;::foo&lt;float&gt;(float);\ntemplate A&lt;float&gt;::foo&lt;int&gt;(int);\ntemplate A&lt;float&gt;::foo&lt;float&gt;(float);\n</code></pre>\n\n<p>which becomes a little verbose if I start having a lot of types of T and U. Is there any faster way to do this and still having the explicit instantiation of the templates in the cpp file? I was imagining something like</p>\n\n<pre><code>template&lt;class T&gt;\ntemplate A&lt;T&gt;::foo&lt;int&gt;(int);\ntemplate&lt;class T&gt;\ntemplate A&lt;T&gt;::foo&lt;float&gt;(float);\ntemplate struct A&lt;int&gt;;\ntemplate struct A&lt;float&gt;;\n</code></pre>\n\n<p>but it doesn't work.</p>\n"}, {"tags": ["c++", "qt", "compiler-errors", "visual-studio-2017"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502299415, "post_id": 45596902, "comment_id": 78153489, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/42777424/visual-studio-2017-errors-on-standard-headers\">Visual Studio 2017 errors on standard headers</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1502299510, "post_id": 45596902, "comment_id": 78153538, "body": "Next time please post the errors from the Output tab  of Visual Studio instead of the errors tab. The Output Tab is in a better format for posting as text."}, {"owner": {"reputation": 41, "user_id": 8439383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c018cc8330329931043a3fb273fa9f?s=128&d=identicon&r=PG&f=1", "display_name": "StckoflwUsr", "link": "https://stackoverflow.com/users/8439383/stckoflwusr"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502299973, "post_id": 45596902, "comment_id": 78153793, "body": "@drescherjm Yeah, that solved most of my Erros, thanks. But the errors in the QtGuiApplication.h still exist."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1502300087, "post_id": 45596902, "comment_id": 78153867, "body": "<b><i>#include &quot;ui_QtGuiApplication1.h&quot; //This could not be found</i></b> likely means that uic was not run on your .ui file. The addon is supposed to do that for you. I do use Visual Studio but don&#39;t use the addon so I am not sure  how to fix that. I use CMake instead."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 8439383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c018cc8330329931043a3fb273fa9f?s=128&d=identicon&r=PG&f=1", "display_name": "StckoflwUsr", "link": "https://stackoverflow.com/users/8439383/stckoflwusr"}, "is_accepted": false, "score": 2, "last_activity_date": 1502300733, "creation_date": 1502300733, "answer_id": 45597428, "question_id": 45596902, "link": "https://stackoverflow.com/questions/45596902/c-compile-problems-with-qt-for-visual-studio-2017/45597428#45597428", "title": "C++ compile problems with Qt for Visual Studio 2017", "body": "<p>I solved this problem myself!</p>\n\n<p>The Qt add-in creates the Project with the Windowns 8.1 SDK, you need to retarget it to the Win 10 SDK to get the compile Errors from the QtGuiApplication.h away. Even if the 8.1 SDK is installed. Seems like a bug.</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 5827730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mCmOf.jpg?s=128&g=1", "display_name": "Khalil Al-rahman Yossefi", "link": "https://stackoverflow.com/users/5827730/khalil-al-rahman-yossefi"}, "is_accepted": false, "score": 0, "last_activity_date": 1612369174, "creation_date": 1612369174, "answer_id": 66031503, "question_id": 45596902, "link": "https://stackoverflow.com/questions/45596902/c-compile-problems-with-qt-for-visual-studio-2017/66031503#66031503", "title": "C++ compile problems with Qt for Visual Studio 2017", "body": "<p>The solution was quite simple to me, just unload and then reload the solution from Solution Explorer!\nThis will clear all c++ compiler errors! Don't know why ...</p>\n"}], "owner": {"reputation": 41, "user_id": 8439383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c018cc8330329931043a3fb273fa9f?s=128&d=identicon&r=PG&f=1", "display_name": "StckoflwUsr", "link": "https://stackoverflow.com/users/8439383/stckoflwusr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1520, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1612369174, "creation_date": 1502298930, "last_edit_date": 1502352629, "question_id": 45596902, "link": "https://stackoverflow.com/questions/45596902/c-compile-problems-with-qt-for-visual-studio-2017", "title": "C++ compile problems with Qt for Visual Studio 2017", "body": "<p>I have installed Qt Creator with the <em>msvc2017_64</em> binary. I also installed the Qt add-in for VS2017. I can create a QtGuiApplication without any problems, but when i try to compile it, many errors appear. I listed them <a href=\"https://pastebin.com/GPkA08pj\" rel=\"nofollow noreferrer\">here</a>, on pastebin, because I cannot add this many characters to Stackoverflow. I'm sorry for that.</p>\n\n<p>Do I need any essential packages for this? I installed C++ for VS2017 ofc. I also included the QtPath in the Qt VS Tools menu.</p>\n\n<p>I did not edit the files since project creation and compiling fails due to errors.</p>\n\n<hr>\n\n<p><strong>EDIT:</strong> This problem is solved <a href=\"https://stackoverflow.com/questions/42777424/visual-studio-2017-errors-on-standard-headers\">here</a>. But not only the Errors form Pastebin exist, also the one following in the <strong>QtGuiApplication.h</strong></p>\n\n<hr>\n\n<p><strong>QtGuiApplication.h: (Errors marked as comments)</strong></p>\n\n<pre><code>#pragma once\n\n#include &lt;QtWidgets/QMainWindow&gt;\n#include \"ui_QtGuiApplication1.h\" //This could not be found\n\nclass QtGuiApplication1 : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    QtGuiApplication1(QWidget *parent = Q_NULLPTR);\n\nprivate:\n    Ui::QtGuiApplication1Class ui; //Ui namespace does not exist\n};\n</code></pre>\n\n<p><strong>QtApplication.cpp:</strong></p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"QtGuiApplication1.h\"\n\nQtGuiApplication1::QtGuiApplication1(QWidget *parent)\n    : QMainWindow(parent)\n{\n    ui.setupUi(this);\n}\n</code></pre>\n\n<p><strong>main.cpp:</strong></p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"QtGuiApplication1.h\"\n#include &lt;QtWidgets/QApplication&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    QtGuiApplication1 w;\n    w.show();\n    return a.exec();\n}\n</code></pre>\n"}, {"tags": ["c++", "time", "timezone", "posix"], "answers": [{"tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": true, "score": 2, "last_activity_date": 1502300095, "last_edit_date": 1502300095, "creation_date": 1502299526, "answer_id": 45597068, "question_id": 45596794, "link": "https://stackoverflow.com/questions/45596794/c-converting-unix-time-to-non-local-timezone/45597068#45597068", "title": "C++: converting Unix time to non-local timezone", "body": "<p>The time zone abbreviations shown by <code>date</code> and other tools are not the names of time zones.  The IANA time zone database uses a major city within the relevant region instead.  The reason for that is that the abbreviations are not unique, and they do not convey sufficient information to convert past dates because places switch time zones.</p>\n\n<p>In addition, POSIX specifies that the <code>TZ</code> variable has to be parsed in a specific way, and it pretty much suggests to treat a bare time zone abbreviation like UTC (but with a different abbreviation).</p>\n\n<p>Instead, you have to use the actual time zone name, such as <code>Europe/Berlin</code>, or a POSIX time zone specifier such as <code>CET-1CEST</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": false, "score": 2, "last_activity_date": 1502412715, "creation_date": 1502412715, "answer_id": 45625398, "question_id": 45596794, "link": "https://stackoverflow.com/questions/45596794/c-converting-unix-time-to-non-local-timezone/45625398#45625398", "title": "C++: converting Unix time to non-local timezone", "body": "<p>I'm providing an additional answer in case someone wants to do this in a way that is thread safe (without setting a global such as an environment variable).  This answer requires C++11 (or better) and <a href=\"https://howardhinnant.github.io/date/tz.html\" rel=\"nofollow noreferrer\">Howard Hinnant's free, open-source timezone library</a>, which has been ported to linux, macOS and Windows.</p>\n\n<p>This library builds on <code>&lt;chrono&gt;</code>, extending it to calendars and timezones.  One can interface with the C timing API such as <code>struct tm</code> with this library, but such facilities aren't built in to the library.  This library makes the C API unnecessary, unless you have to interface with other code that uses the C API.</p>\n\n<p>For example there is a type called <code>date::zoned_seconds</code> that couples a <code>system_clock::time_point</code> (except with <code>seconds</code> precision) with a <code>date::time_zone</code> to create local time in an arbitrary time zone.  As <a href=\"https://github.com/HowardHinnant/date/wiki/Examples-and-Recipes#Ccompatiblity\" rel=\"nofollow noreferrer\">described in more detail here</a>, here is how you can convert a <code>zoned_seconds</code> into a <code>std::tm</code>:</p>\n\n<pre><code>std::tm\nto_tm(date::zoned_seconds tp)\n{\n    using namespace date;\n    using namespace std;\n    using namespace std::chrono;\n    auto lt = tp.get_local_time();\n    auto ld = floor&lt;days&gt;(lt);\n    time_of_day&lt;seconds&gt; tod{lt - ld};  // &lt;seconds&gt; can be omitted in C++17\n    year_month_day ymd{ld};\n    tm t{};\n    t.tm_sec  = tod.seconds().count();\n    t.tm_min  = tod.minutes().count();\n    t.tm_hour = tod.hours().count();\n    t.tm_mday = unsigned{ymd.day()};\n    t.tm_mon  = unsigned{ymd.month()} - 1;\n    t.tm_year = int{ymd.year()} - 1900;\n    t.tm_wday = unsigned{weekday{ld}};\n    t.tm_yday = (ld - local_days{ymd.year()/jan/1}).count();\n    t.tm_isdst = tp.get_info().save != minutes{0};\n    return t;\n}\n</code></pre>\n\n<p>Using this building block, it becomes almost trivial to convert a <code>time_t</code> to a <code>tm</code> in an arbitrary time zone (without setting a global):</p>\n\n<pre><code>std::tm\nlocaltime_tz(time_t t, const std::string&amp; timezone)\n{\n    using namespace date;\n    using namespace std::chrono;\n    return to_tm({timezone, floor&lt;seconds&gt;(system_clock::from_time_t(t))});\n}\n</code></pre>\n\n<p>If you're using C++17, you can remove <code>using namespace date</code> as <code>floor&lt;seconds&gt;</code> will be completely provided within <code>namespace std::chrono</code>.</p>\n\n<p>The above code creates a <code>zoned_seconds</code> from the <code>string</code> <code>timezone</code> and a <code>system_clock::time_point</code> derived from the <code>time_t</code> <code>t</code>.  The <code>zoned_seconds</code> is conceptually a <code>pair&lt;time_zone, system_clock::time_point&gt;</code> but of arbitrary precision.  And it can also be thought of as a <code>pair&lt;time_zone, local_time&gt;</code> since the <code>time_zone</code> knows how to map between UTC and local time.  So most of the user-written code above is just in extracting the local time from the <code>zoned_seconds</code> and placing that into a <code>struct tm</code>.</p>\n\n<p>The above code can be exercised like this:</p>\n\n<pre><code>auto tm = localtime_tz(time(nullptr), \"America/Anchorage\");\n</code></pre>\n\n<p>If you don't need the result in a <code>tm</code> but can instead stay within the <code>&lt;chrono&gt;</code> system, there exists very nice features in the <a href=\"https://howardhinnant.github.io/date/tz.html\" rel=\"nofollow noreferrer\">timezone library</a> for parsing and formatting the <code>zoned_seconds</code>, for example:</p>\n\n<pre><code>cout &lt;&lt; zoned_seconds{\"America/Anchorage\", floor&lt;seconds&gt;(system_clock::now())} &lt;&lt; '\\n';\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>2017-08-10 16:50:28 AKDT\n</code></pre>\n"}], "owner": {"reputation": 381, "user_id": 7437148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f59cf049075a3cee0db37db68b07b9ed?s=128&d=identicon&r=PG&f=1", "display_name": "John S.", "link": "https://stackoverflow.com/users/7437148/john-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 0, "accepted_answer_id": 45597068, "answer_count": 2, "score": 1, "last_activity_date": 1502412715, "creation_date": 1502298539, "question_id": 45596794, "link": "https://stackoverflow.com/questions/45596794/c-converting-unix-time-to-non-local-timezone", "title": "C++: converting Unix time to non-local timezone", "body": "<p>I am trying to convert a time held in a variable of <code>time_t</code> to a <code>struct tm*</code> in some time zone which is not the local time zone.</p>\n\n<p>Building on <a href=\"https://stackoverflow.com/questions/1223947/time-zone-conversion-c-api-on-linux-anyone\">this post</a>, which discusses the inverse operation going from <code>struct tm*</code> to <code>time_t</code>, I have written the following function:</p>\n\n<pre><code>struct tm* localtime_tz(time_t* t, std::string timezone) {\n\n  struct tm* ret;\n  char* tz;\n\n  tz = std::getenv(\"TZ\"); // Store currently set time zone                                                                                                                           \n\n  // Set time zone                                                                                                                                                                   \n  setenv(\"TZ\", timezone.c_str(), 1);\n  tzset();\n\n  std::cout &lt;&lt; \"Time zone set to \" &lt;&lt; std::getenv(\"TZ\") &lt;&lt; std::endl;\n\n  ret = std::localtime(t); // Convert given Unix time to local time in time zone                                                                                                     \n  std::cout &lt;&lt; \"Local time is: \" &lt;&lt; std::asctime(ret);\n  std::cout &lt;&lt; \"UTC time is: \" &lt;&lt; std::asctime(std::gmtime(t));\n\n  // Reset time zone to stored value                                                                                                                                                 \n  if (tz)\n    setenv(\"TZ\", tz, 1);\n  else\n    unsetenv(\"TZ\");\n  tzset();\n\n  return ret;\n\n}\n</code></pre>\n\n<p>However, the conversion fails, and I get</p>\n\n<pre><code>Time zone set to CEST\nLocal time is: Wed Aug  9 16:39:38 2017\nUTC time is: Wed Aug  9 16:39:38 2017\n</code></pre>\n\n<p>i.e. local time is set to UTC time, instead of UTC+2 for CEST.</p>\n"}, {"tags": ["c++", "regex", "pcre", "poco-libraries"], "comments": [{"owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1502298434, "post_id": 45596696, "comment_id": 78152933, "body": "Double up the backslash, since <code>\\s</code> is not a recognized escape sequence in string literal."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502298725, "post_id": 45596696, "comment_id": 78153107, "body": "Isn&#39;t that <i>line-end</i> <code>$</code> for regex?"}], "answers": [{"tags": [], "owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "is_accepted": false, "score": 0, "last_activity_date": 1502298718, "creation_date": 1502298718, "answer_id": 45596835, "question_id": 45596696, "link": "https://stackoverflow.com/questions/45596696/how-to-match-n-in-pocoregularexpression-c/45596835#45596835", "title": "How to match &quot;\\n&quot; in Poco::RegularExpression C++?", "body": "<p>This should work</p>\n\n<pre><code>Poco::RegularExpression s (\"\\\\s\"); // White char\nPoco::RegularExpression n (\"\\\\n\"); // New line\nPoco::RegularExpression r (\"\\\\r\"); // Carrige return\nPoco::RegularExpression t (\"\\\\t\"); // Tabulator\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "is_accepted": true, "score": 0, "last_activity_date": 1502300684, "creation_date": 1502300684, "answer_id": 45597408, "question_id": 45596696, "link": "https://stackoverflow.com/questions/45596696/how-to-match-n-in-pocoregularexpression-c/45597408#45597408", "title": "How to match &quot;\\n&quot; in Poco::RegularExpression C++?", "body": "<p>The problem is the scape sequence in your regex. </p>\n\n<p>In this case you want to add a backslash (<code>\\</code>) into the string <code>astring</code>, using the token <code>\\s</code>, but in C/C++ or Java it must be writen as double <code>\\\\</code>. So, to fix your problem you must add another backslash:</p>\n\n<pre><code>Poco::RegularExpression regex(\"[A-Z]+\\\\s+[A-Z]+\");\n</code></pre>\n\n<p>Here you can find the reference: </p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/escape\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/escape</a></p>\n"}], "owner": {"reputation": 98, "user_id": 2806916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b8b185367f947a208eef339dc6bdd12?s=128&d=identicon&r=PG&f=1", "display_name": "SunDontShine", "link": "https://stackoverflow.com/users/2806916/sundontshine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 673, "favorite_count": 0, "accepted_answer_id": 45597408, "answer_count": 2, "score": 0, "last_activity_date": 1509031583, "creation_date": 1502298215, "last_edit_date": 1509031583, "question_id": 45596696, "link": "https://stackoverflow.com/questions/45596696/how-to-match-n-in-pocoregularexpression-c", "title": "How to match &quot;\\n&quot; in Poco::RegularExpression C++?", "body": "<p>My current code is:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Poco/Foundation.h&gt;\n#include &lt;Poco/RegularExpression.h&gt;\n\nint main()\n{\n    Poco::RegularExpression regex(\"[A-Z]+\\s+[A-Z]+\");\n    Poco::RegularExpression::MatchVec mvec;\n    constad std::string astring = \"ABC\\nDEFG\";\n\n    int matches = regex.match(astring,0,mvec);\n\n    std::cout &lt;&lt; \"Hello World\\n\";\n\n    return 0;\n }\n</code></pre>\n\n<p>The position of the '\\n' in the string I am trying to match can be, a single space, multiple spaces, or new line(hence why I am using whitespace meta character). </p>\n\n<p>The number of matches returned is zero. Is there a flag I need to set or something?</p>\n"}, {"tags": ["c++", "ios", "winapi", "unicode", "tchar"], "answers": [{"comments": [{"owner": {"reputation": 1677, "user_id": 1037419, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7c9d4b98477c867ca095345d3bccf631?s=128&d=identicon&r=PG", "display_name": "Melodius", "link": "https://stackoverflow.com/users/1037419/melodius"}, "edited": false, "score": 0, "creation_date": 1502300409, "post_id": 45596935, "comment_id": 78154078, "body": "Great! Still missing #define _sntprintf vsnprintf and including wchar.h is presumably not necessary?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1677, "user_id": 1037419, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7c9d4b98477c867ca095345d3bccf631?s=128&d=identicon&r=PG", "display_name": "Melodius", "link": "https://stackoverflow.com/users/1037419/melodius"}, "edited": false, "score": 0, "creation_date": 1502300604, "post_id": 45596935, "comment_id": 78154197, "body": "You are mapping <code>_sntprintf</code> to the wrong function. I updated my answer."}, {"owner": {"reputation": 1677, "user_id": 1037419, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7c9d4b98477c867ca095345d3bccf631?s=128&d=identicon&r=PG", "display_name": "Melodius", "link": "https://stackoverflow.com/users/1037419/melodius"}, "edited": false, "score": 0, "creation_date": 1502300798, "post_id": 45596935, "comment_id": 78154313, "body": "Ok. Now I get &quot;No matching function call to snprintf&quot; in the line: _sntprintf( m_sErr, sizeof(m_sErr)/sizeof(m_sErr[0]), L&quot;Tiedoston %s avaaminen ep\\xE4onnistui.&quot;, pFileNimi );"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1677, "user_id": 1037419, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7c9d4b98477c867ca095345d3bccf631?s=128&d=identicon&r=PG", "display_name": "Melodius", "link": "https://stackoverflow.com/users/1037419/melodius"}, "edited": false, "score": 0, "creation_date": 1502300880, "post_id": 45596935, "comment_id": 78154367, "body": "Change <code>L&quot;...&quot;</code> to <code>_T(&quot;...&quot;)</code> in the 3rd parameter. You are passing a <code>wchar_t*</code> where a <code>char*</code> is expected. And make sure <code>pFileNimi</code> is <code>TCHAR</code>-based and not <code>wchar_t</code>-based so it matches the correct character type that the function <code>_sntprintf</code> maps to is expecting."}, {"owner": {"reputation": 1677, "user_id": 1037419, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7c9d4b98477c867ca095345d3bccf631?s=128&d=identicon&r=PG", "display_name": "Melodius", "link": "https://stackoverflow.com/users/1037419/melodius"}, "edited": false, "score": 0, "creation_date": 1502301046, "post_id": 45596935, "comment_id": 78154466, "body": "So I probably have to add an #ifdef macOS for the changed line?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1677, "user_id": 1037419, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7c9d4b98477c867ca095345d3bccf631?s=128&d=identicon&r=PG", "display_name": "Melodius", "link": "https://stackoverflow.com/users/1037419/melodius"}, "edited": false, "score": 0, "creation_date": 1502301085, "post_id": 45596935, "comment_id": 78154493, "body": "No. <code>_sntprintf( m_sErr, sizeof(m_sErr)&#47;sizeof(m_sErr[0]), _T(&quot;Tiedoston %s avaaminen ep\\xE4onnistui.&quot;), pFileNimi );</code>, where <code>pFileNimi</code> is either a <code>TCHAR*</code> or <code>TCHAR[]</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1677, "user_id": 1037419, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7c9d4b98477c867ca095345d3bccf631?s=128&d=identicon&r=PG", "display_name": "Melodius", "link": "https://stackoverflow.com/users/1037419/melodius"}, "edited": false, "score": 0, "creation_date": 1502301579, "post_id": 45596935, "comment_id": 78154779, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/151526/discussion-between-remy-lebeau-and-melodius\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1502300832, "last_edit_date": 1502300832, "creation_date": 1502299049, "answer_id": 45596935, "question_id": 45596681, "link": "https://stackoverflow.com/questions/45596681/how-to-port-windows-c-that-handles-unicode-with-tchar-h-to-ios-app/45596935#45596935", "title": "How to port Windows C++ that handles unicode with tchar.h to iOS app", "body": "<p>The purpose of <code>TCHAR</code> (and FYI, it is <code>_TCHAR</code> in the C runtime, <code>TCHAR</code> is for the Win32 API) is to allow code to switch between either <code>char</code> or <code>wchar_t</code> APIs at compile time, but your defines are mixing them together. The <code>wcs</code> functions are for <code>wchar_t</code>, so you need to change those defines to the <code>char</code> counterparts, to match your other <code>char</code>-based defines:</p>\n\n<pre><code>#define _tcsncpy strncpy\n#define _tcscpy strcpy\n#define _tcscmp strcmp\n#define _tcsrchr strrchr\n</code></pre>\n\n<p>Also, you are mapping <code>_sntprintf</code> to the wrong C function.  It needs to be mapped to <code>snprintf()</code> instead of <code>vsnprintf()</code>:</p>\n\n<pre><code>#define _sntprintf snprintf\n</code></pre>\n\n<p><code>snprintf()</code> and <code>vsnprintf()</code> are declared very differently:</p>\n\n<pre><code>int snprintf ( char * s, size_t n, const char * format, ... );\nint vsnprintf (char * s, size_t n, const char * format, va_list arg );\n</code></pre>\n\n<p>Which is likely why you are getting \"wrong arguments\" errors. </p>\n"}], "owner": {"reputation": 1677, "user_id": 1037419, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7c9d4b98477c867ca095345d3bccf631?s=128&d=identicon&r=PG", "display_name": "Melodius", "link": "https://stackoverflow.com/users/1037419/melodius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "accepted_answer_id": 45596935, "answer_count": 1, "score": 0, "last_activity_date": 1563778037, "creation_date": 1502298167, "last_edit_date": 1502298493, "question_id": 45596681, "link": "https://stackoverflow.com/questions/45596681/how-to-port-windows-c-that-handles-unicode-with-tchar-h-to-ios-app", "title": "How to port Windows C++ that handles unicode with tchar.h to iOS app", "body": "<p>I have some c++ code that I need to integrate into an iOS app. The windows c++ code handles unicode using tchar.h. I have made the following defines for iOS:</p>\n\n<pre><code>#include &lt;wchar.h&gt;\n#define _T(x)     x\n#define TCHAR       char\n#define _tremove    unlink\n#define _stprintf   sprintf\n#define _sntprintf vsnprintf\n#define _tcsncpy wcsncpy\n#define _tcscpy wcscpy\n#define _tcscmp wcscmp\n#define _tcsrchr wcsrchr\n#define _tfopen fopen\n</code></pre>\n\n<p>When trying to build the app many of these are either missing (ex. wcscpy) or have the wrong arguments. The coder responsible for the c++ code said I should use char instead of wchar so I defined TCHAR as char. Does anyone have a clue as to how this should be done?</p>\n"}, {"tags": ["c++", "compiler-errors", "openmp"], "comments": [{"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 1, "creation_date": 1502308113, "post_id": 45596303, "comment_id": 78158373, "body": "The OpenMP specification forbids the threads to have any other exit code paths than the one via the end of the parallel region. In other words, <code>return</code> statements or <code>goto</code> to labels outside the parallel region are not allowed. The compiler should issue an error, but Microsoft&#39;s OpenMP implementation is <b>very</b> old and unsupported and apparently very broken."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1502353785, "post_id": 45596303, "comment_id": 78175303, "body": "Do the work sharing on the outer loop rather than the inner loop. Be careful <code>std::vector</code> though. Either reserve a chunk of memory ahead of time that will contain all the primes or fill private <code>std::vector</code> for each thread and then join them afterwards."}], "answers": [{"tags": [], "owner": {"reputation": 893, "user_id": 4204413, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wkXjz.png?s=128&g=1", "display_name": "TimD1", "link": "https://stackoverflow.com/users/4204413/timd1"}, "is_accepted": true, "score": 2, "last_activity_date": 1502297514, "creation_date": 1502297514, "answer_id": 45596519, "question_id": 45596303, "link": "https://stackoverflow.com/questions/45596303/openmp-causes-internal-compiler-error/45596519#45596519", "title": "OpenMP causes internal compiler error", "body": "<p>OpenMP is designed to spawn numerous threads which can perform multiple independent operations simultaneously. In your case, I believe the error is caused by the fact that many threads are spawned, but only some of them are prematurely terminated by the <code>return false;</code> statement. Instead of immediately returning <code>false</code>, try setting a boolean variable:</p>\n\n<pre><code>bool checkPrime(int n) {\n    if (n == 2) return true;\n    if (n &lt; 2 || n % 2 == 0) return false;\n    bool prime = true;\n\n    #pragma omp parallel for\n    for (int i = 3; i &lt;= static_cast&lt;int&gt;(sqrt(n)); i += 2) {\n        if (n % i == 0) prime = false;\n    }\n\n    return prime;        \n}\n</code></pre>\n\n<p>Additionally, note that using OpenMP requires that you compile with additional flags. You're probably already doing this correctly if you ran into a compiler error.</p>\n"}], "owner": {"reputation": 103, "user_id": 7489346, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/59961acb777a05ccb91a71a718add607?s=128&d=identicon&r=PG&f=1", "display_name": "Folling", "link": "https://stackoverflow.com/users/7489346/folling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1009, "favorite_count": 0, "accepted_answer_id": 45596519, "answer_count": 1, "score": 2, "last_activity_date": 1502297514, "creation_date": 1502296834, "question_id": 45596303, "link": "https://stackoverflow.com/questions/45596303/openmp-causes-internal-compiler-error", "title": "OpenMP causes internal compiler error", "body": "<p>I wrote a little program to test the performance gain of OpenMP.\nI compile using Microsoft Visual Studio.</p>\n\n<pre><code>void findAllPrimesUntilX() {\n    for (int i = 2; i &lt;= upToXthPrimes; i++) {\n        if (i % 500 == 0) std::cout &lt;&lt; \"First \" &lt;&lt; i * 500 &lt;&lt; \"primes have been checked\\n\";\n        if (checkPrime(i)) primes.push_back(i);\n    }\n    std::cout &lt;&lt; \"All primes have been calculated!\\n\";\n}\n</code></pre>\n\n<p>this is the function calling \"checkPrime(i)\" which looks like this:</p>\n\n<pre><code>bool checkPrime(int n) {\n    if (n == 2) return true;\n    if (n &lt; 2 || n % 2 == 0) return false;      \n#pragma omp parallel for\n        for (int i = 3; i &lt;= static_cast&lt;int&gt;(sqrt(n)); i += 2) {\n            if (n % i == 0) return false;\n        }\n        return true;        \n}\n</code></pre>\n\n<p>I am now getting a \"C1001 Error : An internal error has occured in the compiler.\"</p>\n\n<p>Removing the #pragma omp parallel for solves this problem. So what's the deal?</p>\n\n<p>Thanks in advance</p>\n\n<p>Folling</p>\n"}, {"tags": ["c++", "json", "qt", "qt4", "qt5"], "comments": [{"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1502320929, "post_id": 45596118, "comment_id": 78163620, "body": "I would suggest you to try <i>QJsonValue::toVariant()</i> and then extract your value from the <i>QVariant</i> using <i>QVariant::value()</i>. Basically, something like this: <code>QDecimal dec = array.at(1).toVariant().value&lt;QDecimal&gt;()</code>;."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7946870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acfc0a40f80fa4c51e9798c62b2d496f?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7946870/dennis"}, "edited": false, "score": 0, "creation_date": 1502299124, "post_id": 45596168, "comment_id": 78153326, "body": "Yeah right, but how to get the value out of the JSON array without the double thing?"}, {"owner": {"reputation": 1427, "user_id": 6168687, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/s8Up9.png?s=128&g=1", "display_name": "catbadger", "link": "https://stackoverflow.com/users/6168687/catbadger"}, "reply_to_user": {"reputation": 21, "user_id": 7946870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acfc0a40f80fa4c51e9798c62b2d496f?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7946870/dennis"}, "edited": false, "score": 0, "creation_date": 1502299502, "post_id": 45596168, "comment_id": 78153532, "body": "you&#39;ll have to access it as a string."}, {"owner": {"reputation": 21, "user_id": 7946870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acfc0a40f80fa4c51e9798c62b2d496f?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7946870/dennis"}, "edited": false, "score": 0, "creation_date": 1502299765, "post_id": 45596168, "comment_id": 78153671, "body": "But the format is no a string. It is a JsonNumber. I tried to read it like:     <code>QDecDouble a;     a.fromString( jsonArray.at(1).toString().toUtf8() );</code>"}, {"owner": {"reputation": 1427, "user_id": 6168687, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/s8Up9.png?s=128&g=1", "display_name": "catbadger", "link": "https://stackoverflow.com/users/6168687/catbadger"}, "reply_to_user": {"reputation": 21, "user_id": 7946870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acfc0a40f80fa4c51e9798c62b2d496f?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7946870/dennis"}, "edited": false, "score": 0, "creation_date": 1502300386, "post_id": 45596168, "comment_id": 78154062, "body": "what&#39;s the value of array.at(1).toString()  ??"}, {"owner": {"reputation": 21, "user_id": 7946870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acfc0a40f80fa4c51e9798c62b2d496f?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7946870/dennis"}, "edited": false, "score": 0, "creation_date": 1502301278, "post_id": 45596168, "comment_id": 78154602, "body": "The string is empty, since the QJsonValue is <b>not</b> a string. If I try to pick the value with <code>QJsonValue val = jsonArray.at(1);</code>, I can see in the debugger, that the value contains -93.787000000000006"}, {"owner": {"reputation": 1427, "user_id": 6168687, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/s8Up9.png?s=128&g=1", "display_name": "catbadger", "link": "https://stackoverflow.com/users/6168687/catbadger"}, "reply_to_user": {"reputation": 21, "user_id": 7946870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acfc0a40f80fa4c51e9798c62b2d496f?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7946870/dennis"}, "edited": false, "score": 0, "creation_date": 1502303372, "post_id": 45596168, "comment_id": 78155815, "body": "Why not just use that then?"}, {"owner": {"reputation": 1427, "user_id": 6168687, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/s8Up9.png?s=128&g=1", "display_name": "catbadger", "link": "https://stackoverflow.com/users/6168687/catbadger"}, "reply_to_user": {"reputation": 21, "user_id": 7946870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acfc0a40f80fa4c51e9798c62b2d496f?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7946870/dennis"}, "edited": false, "score": 0, "creation_date": 1502303520, "post_id": 45596168, "comment_id": 78155901, "body": "also... have you thought of parsing the json using a parsing library? <a href=\"https://github.com/open-source-parsers/jsoncpp\" rel=\"nofollow noreferrer\">github.com/open-source-parsers/jsoncpp</a>"}, {"owner": {"reputation": 21, "user_id": 7946870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acfc0a40f80fa4c51e9798c62b2d496f?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7946870/dennis"}, "edited": false, "score": 0, "creation_date": 1502305171, "post_id": 45596168, "comment_id": 78156831, "body": "I need the exact price for buy/sell stuff. Double is not an option. I will check jsoncpp! Thank you."}], "tags": [], "owner": {"reputation": 1427, "user_id": 6168687, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/s8Up9.png?s=128&g=1", "display_name": "catbadger", "link": "https://stackoverflow.com/users/6168687/catbadger"}, "is_accepted": false, "score": 0, "last_activity_date": 1502296335, "creation_date": 1502296335, "answer_id": 45596168, "question_id": 45596118, "link": "https://stackoverflow.com/questions/45596118/qt-json-decimal-value/45596168#45596168", "title": "Qt Json decimal value", "body": "<p>You can't use toDouble() to get it out as that changes the precision available. You're going to have to do your math with QDecimal.</p>\n"}], "owner": {"reputation": 21, "user_id": 7946870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acfc0a40f80fa4c51e9798c62b2d496f?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7946870/dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 395, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1502296335, "creation_date": 1502296167, "question_id": 45596118, "link": "https://stackoverflow.com/questions/45596118/qt-json-decimal-value", "title": "Qt Json decimal value", "body": "<p>I have a JsonArray with an entry like: [1502054710762,-93.787]\nI am using the <a href=\"https://github.com/semihc/qdecimal\" rel=\"nofollow noreferrer\">QDecimal</a> class in my project to work with real decimal values instead of float or double.\nNow my problem is, that the value in the JsonArray is not a string. It is a JsonNumber as decimal. If I try to read the value throuh array.at(1).toDouble(), I generate an inaccurate decimal value.</p>\n\n<p>Interesting point: this only happens on my Linux server, but runs fine on my Notebook. - No idea why...</p>\n"}, {"tags": ["c++", "overloading", "implicit-conversion", "ambiguity"], "comments": [{"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1502295842, "post_id": 45595993, "comment_id": 78151475, "body": "Can you add an overload of the function ?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1502295847, "post_id": 45595993, "comment_id": 78151480, "body": "Why would passing in <code>nullptr</code> here have any meaning? Defining your functions as <code>float&amp;</code> and <code>int&amp;</code> could avoid this, but if that&#39;s off the table that&#39;s harsh. You could call this failure a feature and be done with it."}, {"owner": {"reputation": 121, "user_id": 7152961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/da2d8284f7ca46ad1631eac7d209b82b?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh G", "link": "https://stackoverflow.com/users/7152961/dinesh-g"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1502422135, "post_id": 45595993, "comment_id": 78212403, "body": "@tadman I know we can fix that using reference, but I was asked by some one whether it is possible or not."}, {"owner": {"reputation": 121, "user_id": 7152961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/da2d8284f7ca46ad1631eac7d209b82b?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh G", "link": "https://stackoverflow.com/users/7152961/dinesh-g"}, "reply_to_user": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1502422302, "post_id": 45595993, "comment_id": 78212443, "body": "@nefas Yes, we can add overload."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 7152961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/da2d8284f7ca46ad1631eac7d209b82b?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh G", "link": "https://stackoverflow.com/users/7152961/dinesh-g"}, "edited": false, "score": 0, "creation_date": 1502422268, "post_id": 45596045, "comment_id": 78212432, "body": "Thanks for your answer. What if parameter is &quot;NULL&quot; instead of nullptr ?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 121, "user_id": 7152961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/da2d8284f7ca46ad1631eac7d209b82b?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh G", "link": "https://stackoverflow.com/users/7152961/dinesh-g"}, "edited": false, "score": 0, "creation_date": 1502435629, "post_id": 45596045, "comment_id": 78217415, "body": "@DineshG Updated my answer"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 4, "last_activity_date": 1502435631, "last_edit_date": 1502435631, "creation_date": 1502295942, "answer_id": 45596045, "question_id": 45595993, "link": "https://stackoverflow.com/questions/45595993/approaches-on-fixing-the-ambiguity/45596045#45596045", "title": "Approaches on fixing the Ambiguity", "body": "<p>This can be fixed by adding a \"dummy\" overload taking a <a href=\"http://en.cppreference.com/w/cpp/types/nullptr_t\" rel=\"nofollow noreferrer\"><code>std::nullptr_t</code></a> argument:</p>\n\n<pre><code>void Display(std::nullptr_t)\n{\n}\n</code></pre>\n\n<p>This will then be called when passing <code>nullptr</code>.</p>\n\n<hr>\n\n<p>The macro <code>NULL</code> and the previous recommended null-pointer <code>0</code> are problematic though, as they will again introduce ambiguity.</p>\n\n<p>Solving for <code>0</code> is easy, just add <em>another</em> overload taking a simple <code>int</code> (not a pointer) as argument. This <em>might</em> also solve the ambiguity with <code>NULL</code> but also might not.</p>\n\n<p>The problem with <a href=\"http://en.cppreference.com/w/cpp/types/NULL\" rel=\"nofollow noreferrer\">the <code>NULL</code> macro</a> is that it's implementation defined. It <em>might</em> be expanded as <code>nullptr</code>. It <em>might</em> be expanded as <code>0</code>. Or it <em>might</em> be expanded to some other integer literal which evaluates as zero, but of an unknown type.</p>\n\n<p>For example on my current system <code>NULL</code> is defined as <code>0LL</code>, that is a <code>long long int</code>.</p>\n\n<p>To handle all <em>currently</em> possible null pointers you need the following overloads:</p>\n\n<pre><code>void Display(std::nullptr_t);  // For nullptr\nvoid Display(int);             // For 0 and some implementations of NULL\nvoid Display(long);            // For some implementations of NULL\nvoid Display(long long);       // For some implementations of NULL\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 7152961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/da2d8284f7ca46ad1631eac7d209b82b?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh G", "link": "https://stackoverflow.com/users/7152961/dinesh-g"}, "edited": false, "score": 0, "creation_date": 1502422421, "post_id": 45596061, "comment_id": 78212472, "body": "Thanks for your answer. What if parameter is &quot;NULL&quot; instead of nullptr ?"}], "tags": [], "owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "is_accepted": false, "score": 2, "last_activity_date": 1502295996, "creation_date": 1502295996, "answer_id": 45596061, "question_id": 45595993, "link": "https://stackoverflow.com/questions/45595993/approaches-on-fixing-the-ambiguity/45596061#45596061", "title": "Approaches on fixing the Ambiguity", "body": "<p>You could use <a href=\"http://en.cppreference.com/w/cpp/types/nullptr_t\" rel=\"nofollow noreferrer\"><code>nullptr_t</code></a> with another overload:</p>\n\n<pre><code>void Display(std::nullptr_t nullData)\n{\n    // Handle special case of nullptr\n}\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 7152961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/da2d8284f7ca46ad1631eac7d209b82b?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh G", "link": "https://stackoverflow.com/users/7152961/dinesh-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 45596045, "answer_count": 2, "score": 0, "last_activity_date": 1502435631, "creation_date": 1502295784, "last_edit_date": 1502422363, "question_id": 45595993, "link": "https://stackoverflow.com/questions/45595993/approaches-on-fixing-the-ambiguity", "title": "Approaches on fixing the Ambiguity", "body": "<p>I have been asked the following example to fix without modifying both function declaration and call.</p>\n\n<pre><code>void Display(int *nData)\n{\n}\n\nvoid Display(float *fData)\n{\n}\n\nint main()\n{\n    int a = 5;\n    float b = 4.0f;\n\n    Display(&amp;a);\n    Display(&amp;b);\n    Display(nullptr or NULL); // Ambiguity here, as nullptr or NULL (0) can be converted implicitly by compiler to both int and float\n\n    return 0;\n}\n</code></pre>\n\n<p>Any ideas ? \nThanks</p>\n\n<p>EDIT: Thanks for answers to fix this using std::nullptr_t with an overload, but what if the argument is \"NULL\" instead of nullptr ? How to fix that ?</p>\n"}, {"tags": ["c++", "matlab", "vector"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502295630, "post_id": 45595913, "comment_id": 78151329, "body": "&quot;30&#176; in the x-dimension&quot; I cannot imagine how that can make sense. What could make sense is to calculate the angle after projecting onto the xy plane (or xz / yz plane)"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 1, "creation_date": 1502295646, "post_id": 45595913, "comment_id": 78151346, "body": "That&#39;s more a geometry question than about programming. Two vectors in 3D space share a plane (or not). The angle between them is projected at that plane."}, {"owner": {"reputation": 2847, "user_id": 6786718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/l8z29.png?s=128&g=1", "display_name": "Kev1n91", "link": "https://stackoverflow.com/users/6786718/kev1n91"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1502295690, "post_id": 45595913, "comment_id": 78151377, "body": "@tobi303 sry, that&#39;s what I meant."}, {"owner": {"reputation": 2847, "user_id": 6786718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/l8z29.png?s=128&g=1", "display_name": "Kev1n91", "link": "https://stackoverflow.com/users/6786718/kev1n91"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502295693, "post_id": 45595913, "comment_id": 78151383, "body": "@user0042 sry is there a SO for this ?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1502295721, "post_id": 45595913, "comment_id": 78151403, "body": "if thats what you meant, then its trivial: Project onto the plane and then calculate the angle in 2d"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502295724, "post_id": 45595913, "comment_id": 78151409, "body": "@Kev1n91 SE Math maybe?"}, {"owner": {"reputation": 2847, "user_id": 6786718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/l8z29.png?s=128&g=1", "display_name": "Kev1n91", "link": "https://stackoverflow.com/users/6786718/kev1n91"}, "edited": false, "score": 0, "creation_date": 1502296079, "post_id": 45595913, "comment_id": 78151604, "body": "Thank you, that&#39;s just what I wanted to know. Could not find this simple answer"}], "answers": [{"tags": [], "owner": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "is_accepted": false, "score": 3, "last_activity_date": 1502296960, "creation_date": 1502296960, "answer_id": 45596351, "question_id": 45595913, "link": "https://stackoverflow.com/questions/45595913/calculate-the-angle-between-two-3d-vectors-for-each-dimension/45596351#45596351", "title": "Calculate the angle between two 3D vectors for each dimension", "body": "<p>While I really really think that its likely you are making some mistake in your maths, prior to this, the solution to your problem is easy.</p>\n\n<p>Projecting the vectors to a Cartesian plane is simple removing that coordinate that doesn belong. E.g. projecting 2 vectors to XY plane, is essentially making their \"z\" to be equal to zero. </p>\n"}], "owner": {"reputation": 2847, "user_id": 6786718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/l8z29.png?s=128&g=1", "display_name": "Kev1n91", "link": "https://stackoverflow.com/users/6786718/kev1n91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1502296960, "creation_date": 1502295515, "last_edit_date": 1502296009, "question_id": 45595913, "link": "https://stackoverflow.com/questions/45595913/calculate-the-angle-between-two-3d-vectors-for-each-dimension", "title": "Calculate the angle between two 3D vectors for each dimension", "body": "<p>I know how to calculate the angle between two vectors, like suggested here <a href=\"https://stackoverflow.com/questions/18330451/angle-between-two-vectors-matlab\">Angle between two vectors matlab</a> , however, what do I have to do to only get the degree in one dimension. So that I can tell if vector <code>A</code> and vector <code>B</code> have an angle of for example 30\u00b0 in the xy-dimension, but in the yz-dimension an angle of 40\u00b0. </p>\n\n<p>Now I want to know how can I project a vector at the planes in MATLAB ? \nAfter this I should be able to calculate the angle the same way it is done in the provided link</p>\n"}, {"tags": ["c++", "asynchronous", "parallel-processing", "qt5"], "comments": [{"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1502298047, "post_id": 45595752, "comment_id": 78152705, "body": "Perhaps off topic but... your use of <a href=\"http://doc.qt.io/qt-5/qobject.html#moveToThread\" rel=\"nofollow noreferrer\"><code>QObject::moveToThread</code></a> looks a bit suspect.  You must <i>push</i> an object from its current thread to the new thread whereas you appear to be <i>pulling</i> the object onto the current thread."}], "owner": {"reputation": 14111, "user_id": 978486, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mEjSr.jpg?s=128&g=1", "display_name": "ManuelSchneid3r", "link": "https://stackoverflow.com/users/978486/manuelschneid3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1502295689, "creation_date": 1502294987, "last_edit_date": 1502295689, "question_id": 45595752, "link": "https://stackoverflow.com/questions/45595752/local-qeventloop-in-qtconcurrent-mapped", "title": "Local QEventLoop in QtConcurrent mapped", "body": "<p>I have a job queue processed with QtConcurrent mapped. One of the jobs has several existing processes (created in the main loop). I don't know which process ends first so it would be nice to have an event loop to connect to QProcess' signals. What do I have to do to run a local event loop and all signals being processed in this local event loop?</p>\n\n<p>Will the following work?</p>\n\n<pre><code>QEventLoop loop;\nfor (auto proc : processes) {\n    process.moveToThread(QThread::currentThread);\n    connect(&amp;process, &amp;QProcess::stdoutready, this, &amp;someFunction);\n}\nloop.exec();\n</code></pre>\n"}, {"tags": ["c++", "c", "abi"], "answers": [{"tags": [], "owner": {"reputation": 15140, "user_id": 241776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/nqobx.jpg?s=128&g=1", "display_name": "linuxbuild", "link": "https://stackoverflow.com/users/241776/linuxbuild"}, "is_accepted": true, "score": 1, "last_activity_date": 1502807114, "creation_date": 1502807114, "answer_id": 45694918, "question_id": 45595723, "link": "https://stackoverflow.com/questions/45595723/what-is-the-extended-option-in-abi-compliance-checker-used-for/45694918#45694918", "title": "What is the extended option in abi-compliance-checker used for?", "body": "<p>By default the tool checks data types that are used (as parameter, return value or field of parameter or return value, etc.) by exported symbols of the analyzed binary. Unused data types are not checked by default. In <code>-extended</code> mode the tool will check all data types including unused.</p>\n\n<p>In your example I see that the number of checked symbols is different in the extended mode, but it should be the same according to the description of the option. Detection of added/removed <code>_SymbolDefinedInStaticInitOnly*</code> looks like a regression bug in the tool for me.</p>\n\n<p>For now, the <code>-extended</code> option enables the -headers-only option implicitly, that enables analysis of all inline symbols in headers. I think we should not enable -headers-only option in this case.</p>\n\n<p>Looks like <code>-extended</code> option doesn't work as expected for now. We need to fix it.</p>\n"}], "owner": {"reputation": 401, "user_id": 413238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869deec4e42e0404fb8ccbf8b7b01d4f?s=128&d=identicon&r=PG", "display_name": "Gunee", "link": "https://stackoverflow.com/users/413238/gunee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 1, "accepted_answer_id": 45694918, "answer_count": 1, "score": 1, "last_activity_date": 1511983477, "creation_date": 1502294905, "last_edit_date": 1511983477, "question_id": 45595723, "link": "https://stackoverflow.com/questions/45595723/what-is-the-extended-option-in-abi-compliance-checker-used-for", "title": "What is the extended option in abi-compliance-checker used for?", "body": "<p>abi-compliance-checker is a perl program that can check ABI of libraries on linux (<a href=\"https://lvc.github.io/abi-compliance-checker/\" rel=\"nofollow noreferrer\">https://lvc.github.io/abi-compliance-checker/</a>)</p>\n\n<p>The tool has a <code>-extended</code> option, and here is what the manual says about it:</p>\n\n<blockquote>\n  <p>If  your library A is supposed to be used by other library B and              you want to control the ABI of B, then you  should  enable  this option.  The tool will check for changes in all data types, even if they are not used by any function in the library A. Such data types  are  not  part of the A library ABI, but may be a part of the ABI of the B library.\n  The short scheme is:\n                app C (broken) -> lib B (broken ABI) -> lib A (stable ABI)</p>\n</blockquote>\n\n<p>Even after trying checking ABI with and without the option, I still don't really understand the meaning option and how it changes the results I get.</p>\n\n<p>Here is a snippet of the results I have without the option:</p>\n\n<pre><code>Test Results\nTotal Header Files  177\nTotal Libraries 1\nTotal Symbols / Types   96 / 57\nCompatibility   100%\n\nAdded Symbols  1 \ndemangle.h, libtoolbox.so.16.0.0.27\nnamespace mdw\ndemangle ( std::__cxx11::string const&amp; iMangledString )\n\nProblems with Symbols, Low Severity  1 \nBufferMgr.h\nnamespace toolbox\n[+] kDefaultMaxBufferSize [data]  1 \n</code></pre>\n\n<p>And here are the results with the option activated:</p>\n\n<pre><code>Test Results\nTotal Header Files  177\nTotal Symbols / Types   158 / 375\nCompatibility   99.8%\n\nAdded Symbols  2 \ndemangle.h\nnamespace mdw\ndemangle ( std::__cxx11::string const&amp; iMangledString )\n\nStaticInit.h\nnamespace toolbox\n_SymbolDefinedInStaticInitOnly_StaticInit ( )\n\nRemoved Symbols  1 \nStaticInit.h\nnamespace toolbox\n_SymbolDefinedInStaticInitOnly ( )\n\nProblems with Symbols, Low Severity  1 \nBufferMgr.h\nnamespace toolbox\n[+] kDefaultMaxBufferSize [data]  1 \n</code></pre>\n\n<p>Is anyone able to explain what this option means, and what the differences in the output mean from an ABI standpoint?</p>\n"}, {"tags": ["c++", "vector", "iterator"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 4, "creation_date": 1502292584, "post_id": 45594862, "comment_id": 78149364, "body": "Change <code>i != v.end();</code> to <code>i &lt; v.end();</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1502292605, "post_id": 45594862, "comment_id": 78149381, "body": "just think about what happens if your vector contains an odd number of entries (it does). Will <code>it != v.end()</code> ever be false ?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1502292724, "post_id": 45594862, "comment_id": 78149467, "body": "btw I would always use a index based loop instead of an iterator based loop when you do care about the index. Iterators arent really meant to be treated like indexes"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502293214, "post_id": 45594862, "comment_id": 78149831, "body": "@user0042 wouldn&#39;t it still be UB to increment an iterator to the last element by 2? e.g. <code>(v.end()-1)+2</code>"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1502293761, "post_id": 45594862, "comment_id": 78150209, "body": "@Kevin No, dereferencing it after is UB."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502294075, "post_id": 45594862, "comment_id": 78150406, "body": "@user0042 Looks like getting an iterator past the end (<code>v.end()+1</code>) is UB: <a href=\"https://stackoverflow.com/questions/37209725/are-iterators-past-the-one-past-the-end-iterator-undefined-behavior\" title=\"are iterators past the one past the end iterator undefined behavior\">stackoverflow.com/questions/37209725/&hellip;</a>"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1502294269, "post_id": 45594862, "comment_id": 78150527, "body": "@Kevin And you read this <a href=\"https://stackoverflow.com/a/37219916/8242698\">answer</a> too?"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502294463, "post_id": 45594862, "comment_id": 78150645, "body": "@user0042 Yes, and it tells me that incrementing <code>v.end()</code> violates the precondition that the iterator is dereferenceable, i.e. it&#39;s UB. From the &quot;operational semantics&quot; it seems that <code>i+2</code>, when <code>i == v.end()-1</code> is also UB."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1502296027, "post_id": 45594862, "comment_id": 78151576, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/36425393/using-an-iterator-to-divide-an-array-into-parts-with-unequal-size\">Using an iterator to Divide an Array into Parts with Unequal Size</a>"}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 0, "last_activity_date": 1502293212, "creation_date": 1502293212, "answer_id": 45595140, "question_id": 45594862, "link": "https://stackoverflow.com/questions/45594862/iterator-out-of-range-run-time-exception-with-an-iteration-by-2-in-a-for-loop/45595140#45595140", "title": "Iterator out of range run time exception with an iteration by 2 in a for loop", "body": "<blockquote>\n  <p>Is there a way to iterate by 2 elements each time with a for loop and\n  if possible, can the condition to prevent this exception be defined in\n  the for() statement?</p>\n</blockquote>\n\n<p>Sure there is a way. The most natural would be this</p>\n\n<pre><code>vector&lt;int&gt; v {1, 2, 10, 4, 5, 6, 7, 8, 9 };\nfor (size_t i=0; i &lt; v.size(); i = i + 2) {\n    cout &lt;&lt; v[i] &lt;&lt; \" \";\n}\n</code></pre>\n\n<p>Iterators (just like anything else) arent the best tool for every situation. Iterators are meant to be an abstraction that does not care about an index. Thus when you actually do care about the index, I would not use iterators, but a plain index based loop. Of course its a matter of taste, but being so much used to loops that  go from <code>begin</code> to <code>end</code> incremented via <code>++it</code>, it can help a lot to distinguish a loop that deviates from this usual pattern. </p>\n"}, {"tags": [], "owner": {"reputation": 3023, "user_id": 5587393, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1d83bf6603c6c7a002ab8e18e418e2e5?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Luzzara", "link": "https://stackoverflow.com/users/5587393/marco-luzzara"}, "is_accepted": false, "score": 0, "last_activity_date": 1502294565, "creation_date": 1502294565, "answer_id": 45595610, "question_id": 45594862, "link": "https://stackoverflow.com/questions/45594862/iterator-out-of-range-run-time-exception-with-an-iteration-by-2-in-a-for-loop/45595610#45595610", "title": "Iterator out of range run time exception with an iteration by 2 in a for loop", "body": "<p>As @tobi303 said, the most suitable way for you is to use indexes and not iterators. Anyway, there's a reason for the <code>Out of Range Exception</code>. If you try with this vector (or in general if you add another element to it):</p>\n\n<pre><code>{1, 2, 10, 4, 5, 6, 7, 8, 9, 1 }\n</code></pre>\n\n<p>You won't obtain that exception. This is what the doc says about the <code>end</code> method:</p>\n\n<blockquote>\n  <p>Returns an iterator referring to the past-the-end element in the vector container.\n  The past-the-end element is the theoretical element that would follow the last element in the vector. It does not point to any element, and thus shall not be dereferenced.</p>\n</blockquote>\n\n<p>So, when <code>*i</code> is equal to 9, and the for loop checks for the end of the vector, it will go on. But if you add 2 to <code>i</code>, the <code>end</code> method will never match the actual end.</p>\n"}], "owner": {"reputation": 105, "user_id": 6753139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b5a91f2e5ecea5ab0bc8eecca46ea7?s=128&d=identicon&r=PG&f=1", "display_name": "allicanseenow", "link": "https://stackoverflow.com/users/6753139/allicanseenow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 45595140, "answer_count": 2, "score": -1, "last_activity_date": 1502294565, "creation_date": 1502292457, "question_id": 45594862, "link": "https://stackoverflow.com/questions/45594862/iterator-out-of-range-run-time-exception-with-an-iteration-by-2-in-a-for-loop", "title": "Iterator out of range run time exception with an iteration by 2 in a for loop", "body": "<p>Here is a piece of my code:</p>\n\n<pre><code>vector&lt;int&gt; v {1, 2, 10, 4, 5, 6, 7, 8, 9 };\nfor (auto i = v.begin(); i != v.end(); i = i + 2) {\n    cout &lt;&lt; (*i) &lt;&lt; \" \";\n}\n</code></pre>\n\n<p>What I want to do is to advance the iterator by 2 elements after each iteration. However, there is a runtime exception: offset out of range. So my question is:</p>\n\n<p>Is there a way to iterate by 2 elements each time with a for loop and if possible, can the condition to prevent this exception be defined in the for() statement?</p>\n"}, {"tags": ["android", "c++", "qt"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1502308800, "post_id": 45594693, "comment_id": 78158696, "body": "show your .pro, please"}, {"owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "edited": false, "score": 0, "creation_date": 1502353049, "post_id": 45594693, "comment_id": 78174834, "body": "Add <code>QT += sql</code> to your .pro file."}, {"owner": {"reputation": 638, "user_id": 2531713, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/NqXiJ.jpg?s=128&g=1", "display_name": "Bull", "link": "https://stackoverflow.com/users/2531713/bull"}, "edited": false, "score": 0, "creation_date": 1502354300, "post_id": 45594693, "comment_id": 78175651, "body": "It was a single .cpp file for testing purposes, so no .pro file."}], "answers": [{"tags": [], "owner": {"reputation": 638, "user_id": 2531713, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/NqXiJ.jpg?s=128&g=1", "display_name": "Bull", "link": "https://stackoverflow.com/users/2531713/bull"}, "is_accepted": false, "score": 0, "last_activity_date": 1502354247, "creation_date": 1502354247, "answer_id": 45608515, "question_id": 45594693, "link": "https://stackoverflow.com/questions/45594693/can-i-use-qtsql-in-c4droid/45608515#45608515", "title": "Can I use &lt;QtSql&gt; in C4Droid?", "body": "<p>After emailing the creator, I decided to reinstall GCC plugin and enabled carefully all Qt options. It worked.</p>\n"}], "owner": {"reputation": 638, "user_id": 2531713, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/NqXiJ.jpg?s=128&g=1", "display_name": "Bull", "link": "https://stackoverflow.com/users/2531713/bull"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1502354247, "creation_date": 1502292002, "question_id": 45594693, "link": "https://stackoverflow.com/questions/45594693/can-i-use-qtsql-in-c4droid", "title": "Can I use &lt;QtSql&gt; in C4Droid?", "body": "<p>Have anybody managed to compile a c++ file with <code>\"#include &lt;QtSql&gt;\"</code> directive?</p>\n\n<p>As soon as I include that directive, I get this compile error:</p>\n\n<pre><code>Note: No relevant classes found. No output generated. /data/user/0/com.n0n3m4.droidc/files/temp.c:3:17:fatal error: QtSql: No such file or directory\n#include &lt;QtSql&gt;\n       ^\ncompilation terminated.\n</code></pre>\n\n<p>Any ideas for enabling QtSql (specifically SqlLite in C4Droid)?</p>\n"}, {"tags": ["c++", "variadic-templates", "c++17"], "comments": [{"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1502291894, "post_id": 45594593, "comment_id": 78148821, "body": "The solution you linked to is 5 lines long. How much simplification are you looking for?"}, {"owner": {"reputation": 2897, "user_id": 3392714, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/302ac6bfbe982dcd53aa123f9bde72eb?s=128&d=identicon&r=PG&f=1", "display_name": "dani", "link": "https://stackoverflow.com/users/3392714/dani"}, "reply_to_user": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 1, "creation_date": 1502292226, "post_id": 45594593, "comment_id": 78149109, "body": "My question <a href=\"https://stackoverflow.com/questions/45578484/is-it-possible-to-get-the-first-type-of-a-parameter-pack-in-a-one-liner/45578533#45578533\">here</a> had four working lines, the answer had only one. Solutions you find here for making a <code>tuple</code> of <code>vector</code>s of some types in a pack are longer than 10 lines. Its now doable in one."}, {"owner": {"reputation": 2897, "user_id": 3392714, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/302ac6bfbe982dcd53aa123f9bde72eb?s=128&d=identicon&r=PG&f=1", "display_name": "dani", "link": "https://stackoverflow.com/users/3392714/dani"}, "reply_to_user": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1502292513, "post_id": 45594593, "comment_id": 78149309, "body": "@Sneftel, there you go. one-liner."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1502292755, "post_id": 45594593, "comment_id": 78149499, "body": "There I go indeed. :)"}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 6, "last_activity_date": 1502292478, "creation_date": 1502292478, "answer_id": 45594876, "question_id": 45594593, "link": "https://stackoverflow.com/questions/45594593/checking-that-a-template-type-t-is-part-of-a-variadic-parameter-pack-in-c17/45594876#45594876", "title": "Checking that a template type T is part of a variadic parameter pack in C++17", "body": "<p>I hear fold-expressions are the new hotness:</p>\n\n<pre><code>static_assert((std::is_same_v&lt;T, Ts&gt; || ...));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1502292484, "creation_date": 1502292484, "answer_id": 45594877, "question_id": 45594593, "link": "https://stackoverflow.com/questions/45594593/checking-that-a-template-type-t-is-part-of-a-variadic-parameter-pack-in-c17/45594877#45594877", "title": "Checking that a template type T is part of a variadic parameter pack in C++17", "body": "<p>Easy enough in C++ with fold expressions:</p>\n\n<pre><code>template&lt;typename... Ts&gt;\nclass A\n{\n  template&lt;typename T&gt;\n  void action() {\n    static_assert((... || std::is_same_v&lt;T, Ts&gt;)), \"Not!\")\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": false, "score": 5, "last_activity_date": 1502292534, "creation_date": 1502292534, "answer_id": 45594895, "question_id": 45594593, "link": "https://stackoverflow.com/questions/45594593/checking-that-a-template-type-t-is-part-of-a-variadic-parameter-pack-in-c17/45594895#45594895", "title": "Checking that a template type T is part of a variadic parameter pack in C++17", "body": "<p>If you prefer a library trait:</p>\n\n<pre><code>static_assert(std::disjunction_v&lt;std::is_same&lt;T, Ts&gt;...&gt;);\n</code></pre>\n\n<p>Note that this performs short circuiting (perhaps not exceedingly beneficial here, but something to keep in mind). Fold expressions are equally viable:</p>\n\n<pre><code>static_assert((std::is_same_v&lt;T, Ts&gt; || ...));\n</code></pre>\n\n<p>(Stolen from @Barry.)</p>\n"}], "owner": {"reputation": 2897, "user_id": 3392714, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/302ac6bfbe982dcd53aa123f9bde72eb?s=128&d=identicon&r=PG&f=1", "display_name": "dani", "link": "https://stackoverflow.com/users/3392714/dani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "accepted_answer_id": 45594876, "answer_count": 3, "score": 4, "last_activity_date": 1522772890, "creation_date": 1502291748, "last_edit_date": 1522772890, "question_id": 45594593, "link": "https://stackoverflow.com/questions/45594593/checking-that-a-template-type-t-is-part-of-a-variadic-parameter-pack-in-c17", "title": "Checking that a template type T is part of a variadic parameter pack in C++17", "body": "<p>I want to check that a type <code>T</code> is also part of a parameter pack <code>Ts</code>. There are <a href=\"https://stackoverflow.com/questions/19426045/how-can-you-statically-check-that-a-type-t-exists-in-a-variadic-template-paramet\">solutions</a> that do that in C++14, but I'm wandering if this can be simplified in C++17. If <code>T</code> is not found in <code>Ts</code>the compiler should stop (static_assertion should fail).</p>\n\n<pre><code>template&lt;typename... Ts&gt;\nclass A\n{\n  template&lt;typename T&gt;\n  void action() {\n    // check that T is also in Ts (static_assertion)\n  }\n}\n</code></pre>\n"}, {"tags": ["android", "c++", "google-project-tango"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 6500216, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-w17pkXxmyGM/AAAAAAAAAAI/AAAAAAAAADI/XH5wTKJVuhA/photo.jpg?sz=128", "display_name": "Ivan Dryanovski", "link": "https://stackoverflow.com/users/6500216/ivan-dryanovski"}, "is_accepted": true, "score": 1, "last_activity_date": 1503507414, "creation_date": 1503507414, "answer_id": 45845449, "question_id": 45594520, "link": "https://stackoverflow.com/questions/45594520/using-tango3dr-areadescription-createfromdataset-on-asus-zenfone-ar/45845449#45845449", "title": "Using Tango3DR_AreaDescription_createFromDataset on Asus Zenfone AR", "body": "<p>New version of library uploaded on <a href=\"https://developers.google.com/tango/downloads\" rel=\"nofollow noreferrer\">https://developers.google.com/tango/downloads</a> which contains the missing file.</p>\n"}], "owner": {"reputation": 35, "user_id": 571120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0f118bb36b579a626997f2093dd7ff?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/571120/anders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 45845449, "answer_count": 1, "score": 1, "last_activity_date": 1503507414, "creation_date": 1502291550, "question_id": 45594520, "link": "https://stackoverflow.com/questions/45594520/using-tango3dr-areadescription-createfromdataset-on-asus-zenfone-ar", "title": "Using Tango3DR_AreaDescription_createFromDataset on Asus Zenfone AR", "body": "<p>I am creating meshes from Tango datasets, trying to support Asus Zenfone AR. My app is already working fine on Lenovo Phab 2 Pro.</p>\n\n<p>The first step is calling <code>Tango3DR_AreaDescription_createFromDataset</code> to create a <code>Tango3DR_AreaDescription</code>. I am calling the function without specifying a <code>loop_closure_database_path</code> in the second argument:</p>\n\n<pre><code>  Tango3DR_Status res = Tango3DR_AreaDescription_createFromDataset(dataset_path.c_str(),\n                                                                   nullptr, //loop_closure_database_path\n                                                                   &amp;area_description_raw,\n                                                                   progress_logger,\n                                                                   &amp;num_api_calls);\n</code></pre>\n\n<p>The Zenfone AR crashes in this function, probably related to this logcat line:\n<code>A/tango: loop_closure_file_reader_disk.cc:186 Check failed: generic::DirectoryExists(loop_closure_files_path) Provided root path for loop-closure files /sdcard/config does not exist.</code></p>\n\n<p>If I specify an empty (but existing) directory for <code>loop_closure_database_path</code>, I get a similar crash:\n<code>A/tango: loop_closure_file_reader_disk.cc:293 Check failed: generic::DirectoryExists(descriptor_sub_path) Path for feature-descriptor type /sdcard/testing/lens_invariant_ocvfreak does not exist.</code></p>\n\n<p>Interestingly, I see that my Phab 2 Pro actually has a directory named <code>/sdcard/config</code> including various files and a <code>lens_invariant_ocvfreak</code> sub-directory. This directory is not present on my Asus Zenfone AR, however.</p>\n\n<p>What can I do to get this working? The documentation in <code>tango_3d_reconstruction.h</code> says loop closure database is downloadable from the Tango developers website, but I can't find it anywhere. I am not entirely sure what is loop closure database is actually supposed to do, but there should be a way to manage without it, correct?</p>\n"}, {"tags": ["c++", "set"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1502291672, "post_id": 45594516, "comment_id": 78148638, "body": "What is the type of <code>i</code>? Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1502291773, "post_id": 45594516, "comment_id": 78148711, "body": "@Carcigenicate The iterator of a set&lt;set&lt;int&gt;&gt; should point to 1 set though... no?"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1502291813, "post_id": 45594516, "comment_id": 78148740, "body": "@Borgleader Whoops, you&#39;re right, my bad."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1502291830, "post_id": 45594516, "comment_id": 78148754, "body": "What&#39;s the full error?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1502291930, "post_id": 45594516, "comment_id": 78148853, "body": "You cannot modify data in set, so you  either need different container or take internal set, update and reinsert."}, {"owner": {"reputation": 253, "user_id": 7805352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e31b4b674b507a1d03669c0f7de0ea95?s=128&d=identicon&r=PG&f=1", "display_name": "rw435", "link": "https://stackoverflow.com/users/7805352/rw435"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1502291947, "post_id": 45594516, "comment_id": 78148874, "body": "@AlgirdasPreid\u017eius &quot;...insert some integer element i...&quot;"}, {"owner": {"reputation": 253, "user_id": 7805352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e31b4b674b507a1d03669c0f7de0ea95?s=128&d=identicon&r=PG&f=1", "display_name": "rw435", "link": "https://stackoverflow.com/users/7805352/rw435"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1502291996, "post_id": 45594516, "comment_id": 78148914, "body": "@Carcigenicate the full error is: &quot;no instance of overloaded function &quot;std::set&lt;_Kty, _Pr, _Alloc&gt;::insert [with _Kty=int, _Pr=std::less&lt;int&gt;, _Alloc=std::allocator&lt;int&gt;]&quot; matches the argument list and object (the object has type qualifiers that prevent a match)&quot;"}, {"owner": {"reputation": 253, "user_id": 7805352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e31b4b674b507a1d03669c0f7de0ea95?s=128&d=identicon&r=PG&f=1", "display_name": "rw435", "link": "https://stackoverflow.com/users/7805352/rw435"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1502292068, "post_id": 45594516, "comment_id": 78148976, "body": "@Slava could you elaborate what you mean by &quot;take the internal set&quot;?"}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1502292074, "post_id": 45594516, "comment_id": 78148982, "body": "Apparently <code>*it</code> is a <code>const std::set&lt;int&gt;</code> even though you&#39;re not using a const iterator."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1502292106, "post_id": 45594516, "comment_id": 78149010, "body": "@DavidWang I mean remove it from outer set, update and reinsert."}], "answers": [{"comments": [{"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1502292776, "post_id": 45594763, "comment_id": 78149517, "body": "What the OP wants is even more likely (I&#39;m just guessing) to prepare a total content of set, and then insert it into meta-set of sets. If he is using single set for permutations, then he should insert into meta-set cloned copy of working set, i.e. the mutations must happen on the working set, which was not inserted into meta. So I don&#39;t think he will need remove + change + re-insert pattern, IMO he needs just M times &quot;insert(clone(workingSet))&quot;."}, {"owner": {"reputation": 253, "user_id": 7805352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e31b4b674b507a1d03669c0f7de0ea95?s=128&d=identicon&r=PG&f=1", "display_name": "rw435", "link": "https://stackoverflow.com/users/7805352/rw435"}, "reply_to_user": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1502293726, "post_id": 45594763, "comment_id": 78150176, "body": "Ah thank you for elaborating and also providing a solution. And @Ped7g you&#39;re right, I have cloned a copy of the working set (at each iteration of <code>i</code> up to n)."}], "tags": [], "owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "is_accepted": true, "score": 3, "last_activity_date": 1502292830, "last_edit_date": 1502292830, "creation_date": 1502292205, "answer_id": 45594763, "question_id": 45594516, "link": "https://stackoverflow.com/questions/45594516/inserting-primitive-type-into-set-of-sets/45594763#45594763", "title": "Inserting primitive type into set of sets", "body": "<p>You are not allowed to modify the elements of a set, because this would break the internal ordering mechanism which the set uses. So the type of <code>*it</code> in your loop is <code>const set&lt;int&gt;&amp;</code>. Consequently, you cannot call insert on it.</p>\n\n<p>What you can do is make a copy of the element, insert an element into the copy, remove the original, and replace it with the copy.</p>\n\n<pre><code>for (set&lt;set&lt;int&gt; &gt;::iterator it = permutations.begin(); it != permutations.end(); )\n{\n    auto copy = *it;\n    copy.insert(i);\n    it = permutations.erase(it);\n    permutations.insert(copy);\n}\n</code></pre>\n\n<p>Note that if inserting an element in one set makes it identical to another, it will not be inserted, and you will end up with one less element set in your set. For example, if your set is <code>{{}, {1}, {1,2}}</code>, and <code>i</code> is 1, then the above loop will look at the empty set, add a 1 to it (resulting in <code>{1}</code>), and then it will fail when it tries to add that set back in, because there is already a set with that value.</p>\n"}], "owner": {"reputation": 253, "user_id": 7805352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e31b4b674b507a1d03669c0f7de0ea95?s=128&d=identicon&r=PG&f=1", "display_name": "rw435", "link": "https://stackoverflow.com/users/7805352/rw435"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 45594763, "answer_count": 1, "score": 1, "last_activity_date": 1502292830, "creation_date": 1502291542, "last_edit_date": 1502291602, "question_id": 45594516, "link": "https://stackoverflow.com/questions/45594516/inserting-primitive-type-into-set-of-sets", "title": "Inserting primitive type into set of sets", "body": "<p>I am looking to find all subsets of some set of size <code>n</code>, e.g. <code>{{}, {1}, {1, 2} etc. }</code> using the method described <a href=\"https://stackoverflow.com/questions/728972/finding-all-the-subsets-of-a-set\">here</a>.</p>\n\n<p>My issue arises with attempting to build a set of sets with C++11. Namely, I have a <code>set&lt;set&lt;int&gt; &gt; permutations</code> which contains all my subsets. If I attempt to insert some integer element <code>i</code> into each of the subsets contained in <code>permutations</code>, as follows:</p>\n\n<pre><code>for (set&lt;set&lt;int&gt; &gt;::iterator it = permutations.begin(); it != permutations.end(); ++it)\n{\n    it-&gt;insert(i);    //error here\n}\n</code></pre>\n\n<p>I run into a \"no instance of overloaded function matches the argument list (the object has type qualifiers that prevent a match\" error. My understanding is that iterator <code>it</code> refers to a <code>set&lt;int&gt;</code> object, and so <code>*it</code> has member function <code>insert()</code>. What is causing this particular error to arise?</p>\n"}, {"tags": ["c++", "templates", "c++14", "template-meta-programming", "temporary"], "comments": [{"owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "edited": false, "score": 0, "creation_date": 1502296661, "post_id": 45594500, "comment_id": 78151960, "body": "Have a look at C++17 folding expressions <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4295.html\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4295.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1502309688, "post_id": 45594743, "comment_id": 78159132, "body": "<code>decltype(auto)</code> is strong magic, one must be extremely careful that you actually <i>mean</i> it.  +1"}], "tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": true, "score": 3, "last_activity_date": 1502292138, "creation_date": 1502292138, "answer_id": 45594743, "question_id": 45594500, "link": "https://stackoverflow.com/questions/45594500/forwards-and-return-types-in-functional-like-reduce-function/45594743#45594743", "title": "Forwards and return type(s) in functional-like reduce function", "body": "<p>You could try</p>\n\n<pre><code>template &lt;typename F, typename T&gt;\nconstexpr T reduce(F&amp;&amp;, T &amp;&amp;t) {\n    return std::forward&lt;T&gt;(t);\n}\n</code></pre>\n\n<p>This returns a prvalue when the second argument was an rvalue, and an lvalue referring to the argument otherwise. Your snippets seem to be <a href=\"http://coliru.stacked-crooked.com/a/28e3c7c4ee7ce807\" rel=\"nofollow noreferrer\">fine with it</a>.</p>\n\n<p>Alternatively, just use your second variant and wrap <code>vec</code> in <code>std::ref</code>, mutatis mutandis. That is also the standard approach when templates handle objects by value. </p>\n"}, {"tags": [], "owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "is_accepted": false, "score": 2, "last_activity_date": 1502298143, "creation_date": 1502298143, "answer_id": 45596672, "question_id": 45594500, "link": "https://stackoverflow.com/questions/45594500/forwards-and-return-types-in-functional-like-reduce-function/45596672#45596672", "title": "Forwards and return type(s) in functional-like reduce function", "body": "<p>The lambda in your problem case:</p>\n\n<pre><code>[](auto a, auto b) {\n    std::copy(std::begin(b), std::end(b), std::back_inserter(a));\n    return a;\n}\n</code></pre>\n\n<p>returns by value, so when <code>reduce</code> recurses:</p>\n\n<pre><code> return reduce(\n    std::forward&lt;F&gt;(f),\n    std::forward&lt;F&gt;(f)(std::forward&lt;T1&gt;(t1), std::forward&lt;T2&gt;(t2)), // HERE\n    std::forward&lt;Args&gt;(args)...);\n</code></pre>\n\n<p>The second argument is a temporary initialized from that by-value return object. When the recursion finally terminates:</p>\n\n<pre><code>template &lt;typename F, typename T&gt;\nconstexpr decltype(auto) reduce(F&amp;&amp;, T &amp;&amp;t) {\n    return std::forward&lt;T&gt;(t);\n}\n</code></pre>\n\n<p>It returns a reference bound to that temporary object which is destroyed while unwinding the recursion, so that <code>v</code> is initialized from a dangling reference.</p>\n\n<p>The easiest fix for this would be to NOT create a temporary in your lambda and instead accumulate the results in the input object which you know will live at least until the end of the full expression (<a href=\"http://coliru.stacked-crooked.com/a/b05341ccb37224ab\" rel=\"nofollow noreferrer\"><strong>DEMO</strong></a>):</p>\n\n<pre><code>auto fn = [](auto&amp;&amp; a, auto const&amp; b) -&gt; decltype(auto) {\n    std::copy(std::begin(b), std::end(b), std::back_inserter(a));\n    // Or better:\n    // a.insert(std::end(a), std::begin(b), std::end(b));\n    return static_cast&lt;decltype(a)&gt;(a);\n};\n\nstd::vector&lt;int&gt; vec;\ndecltype(auto) u = reduce(fn, vec,\n    std::set&lt;int&gt;{1, 2}, std::list&lt;int&gt;{3, 4}, std::vector&lt;int&gt;{5, 6});\n\nassert(&amp;vec == &amp;u); // ok\nassert((vec == std::vector&lt;int&gt;{1, 2, 3, 4, 5, 6})); // ok\n\nauto v = reduce(fn, std::vector&lt;int&gt;{},\n    std::set&lt;int&gt;{1, 2},  std::list&lt;int&gt;{3, 4}, std::vector&lt;int&gt;{5, 6});\nassert((v == std::vector&lt;int&gt;{1, 2, 3, 4, 5, 6})); // ok\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 0, "last_activity_date": 1502310671, "creation_date": 1502310671, "answer_id": 45600140, "question_id": 45594500, "link": "https://stackoverflow.com/questions/45594500/forwards-and-return-types-in-functional-like-reduce-function/45600140#45600140", "title": "Forwards and return type(s) in functional-like reduce function", "body": "<p>Someone mentioned fold expressions.</p>\n\n<pre><code>template&lt;class F, class T=void&gt;\nstruct reduce_t;\n\ntemplate&lt;class F&gt;\nreduce_t&lt;F&gt; reduce( F&amp;&amp; f );\n\ntemplate&lt;class F, class T&gt;\nreduce_t&lt;F, T&gt; reduce( F&amp;&amp; f, T&amp;&amp; t );\n\ntemplate&lt;class F, class T&gt;\nstruct reduce_t {\n  F f;\n  T t;\n  template&lt;class Rhs&gt;\n  auto operator|( Rhs&amp;&amp; rhs )&amp;&amp;{\n    return reduce( f, f( std::forward&lt;T&gt;(t), std::forward&lt;Rhs&gt;(rhs) ) );\n  }\n  T get()&amp;&amp;{ return std::forward&lt;T&gt;(t); }\n};\ntemplate&lt;class F&gt;\nstruct reduce_t&lt;F,void&gt; {\n  F f;\n  template&lt;class Rhs&gt;\n  auto operator|( Rhs&amp;&amp; rhs )&amp;&amp;{\n    return reduce( f, std::forward&lt;Rhs&gt;(rhs) );\n  }\n};\n\ntemplate&lt;class F&gt;\nreduce_t&lt;F&gt; reduce( F&amp;&amp; f ) {\n  return {std::forward&lt;F&gt;(f)};\n}\n\ntemplate&lt;class F, class T&gt;\nreduce_t&lt;F, T&gt; reduce( F&amp;&amp; f, T&amp;&amp; t ) {\n  return {std::forward&lt;F&gt;(f), std::forward&lt;T&gt;(t)};\n}\ntemplate&lt;class F, class T, class...Ts&gt;\nauto reduce( F&amp;&amp; f, T&amp;&amp; t, Ts&amp;&amp;...ts ) {\n    return (reduce( std::forward&lt;F&gt;(f), std::forward&lt;T&gt;(t) ) | ... |  std::forward&lt;Ts&gt;(ts));\n}\n</code></pre>\n\n<p>then any of these work:</p>\n\n<pre><code>decltype(auto) u = (reduce([](auto &amp;a, auto b) -&gt; auto&amp; {\n    std::copy(std::begin(b), std::end(b), std::back_inserter(a));\n    return a;\n}) | vec | std::set&lt;int&gt;{1, 2} | std::list&lt;int&gt;{3, 4} | std::vector&lt;int&gt;{5, 6}).get();\n\ndecltype(auto) u = reduce([](auto &amp;a, auto b) -&gt; auto&amp; {\n    std::copy(std::begin(b), std::end(b), std::back_inserter(a));\n    return a;\n}, vec, std::set&lt;int&gt;{1, 2}, std::list&lt;int&gt;{3, 4}, std::vector&lt;int&gt;{5, 6}).get();\n\nauto u_val = (\n    reduce([](auto a, auto b) {\n      std::copy(std::begin(b), std::end(b), std::back_inserter(a));\n      return a;\n    })\n    | std::vector&lt;int&gt;{} | std::set&lt;int&gt;{1, 2}\n    | std::list&lt;int&gt;{3, 4} | std::vector&lt;int&gt;{5, 6}\n).get();\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/324b00b369a0de1e\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n"}], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 45594743, "answer_count": 3, "score": 5, "last_activity_date": 1502310671, "creation_date": 1502291483, "last_edit_date": 1502292906, "question_id": 45594500, "link": "https://stackoverflow.com/questions/45594500/forwards-and-return-types-in-functional-like-reduce-function", "title": "Forwards and return type(s) in functional-like reduce function", "body": "<p>I need to create a <code>reduce</code> function similar to <a href=\"http://en.cppreference.com/w/cpp/algorithm/reduce\" rel=\"nofollow noreferrer\"><code>std::reduce</code></a>, but instead of working on containers, this function should work on variadic parameters.</p>\n\n<p>This is what I currently have:</p>\n\n<pre><code>template &lt;typename F, typename T&gt;\nconstexpr decltype(auto) reduce(F&amp;&amp;, T &amp;&amp;t) {\n    return std::forward&lt;T&gt;(t);\n}\n\ntemplate &lt;typename F, typename T1, typename T2, typename... Args&gt;\nconstexpr decltype(auto) reduce(F&amp;&amp; f, T1&amp;&amp; t1, T2&amp;&amp; t2, Args&amp;&amp;... args) {\n    return reduce(\n        std::forward&lt;F&gt;(f),\n        std::forward&lt;F&gt;(f)(std::forward&lt;T1&gt;(t1), std::forward&lt;T2&gt;(t2)),\n        std::forward&lt;Args&gt;(args)...);\n}\n</code></pre>\n\n<p>The following works as expected:</p>\n\n<pre><code>std::vector&lt;int&gt; vec;\ndecltype(auto) u = reduce([](auto &amp;a, auto b) -&gt; auto&amp; {\n        std::copy(std::begin(b), std::end(b), std::back_inserter(a));\n        return a;\n    }, vec, std::set&lt;int&gt;{1, 2}, std::list&lt;int&gt;{3, 4}, std::vector&lt;int&gt;{5, 6});\n\nassert(&amp;vec == &amp;u); // ok\nassert(vec == std::vector&lt;int&gt;{1, 2, 3, 4, 5, 6}); // ok\n</code></pre>\n\n<p>But the following does not work:</p>\n\n<pre><code>auto u = reduce([](auto a, auto b) {\n        std::copy(std::begin(b), std::end(b), std::back_inserter(a));\n        return a;\n    }, std::vector&lt;int&gt;{}, std::set&lt;int&gt;{1, 2}, \n    std::list&lt;int&gt;{3, 4}, std::vector&lt;int&gt;{5, 6});\n</code></pre>\n\n<p>This basically crashes - To make this work, I need to e.g. change the first definition of <code>reduce</code> to:</p>\n\n<pre><code>template &lt;typename F, typename T&gt;\nconstexpr auto reduce(F&amp;&amp;, T &amp;&amp;t) {\n    return t;\n}\n</code></pre>\n\n<p>But if I do so, the first snippet does not work anymore.</p>\n\n<p>The problem problem lies in the forwarding of the parameters and the return type of the <code>reduce</code> function, but I can find it.</p>\n\n<p>How should I modify my <code>reduce</code> definitions to make both snippets work?</p>\n"}, {"tags": ["c++", "static"], "comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1502295491, "post_id": 45594299, "comment_id": 78151248, "body": "There is no reason to tolerate the unknown, nor leave this up to the linker.  Simply ensure the sequence using explicit code early in main()."}], "answers": [{"comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1502298526, "post_id": 45595061, "comment_id": 78152985, "body": "You are quoting C++11 but a lot of <a href=\"https://stackoverflow.com/a/34276374/1708801\">basis.start changed due to defect report 2026</a> for various reasons. So be careful."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 6, "last_activity_date": 1502293572, "last_edit_date": 1502293572, "creation_date": 1502293009, "answer_id": 45595061, "question_id": 45594299, "link": "https://stackoverflow.com/questions/45594299/is-initialization-of-static-member-of-a-class-guaranteed-before-initialization-o/45595061#45595061", "title": "Is initialization of static member of a class guaranteed before initialization of a static object of that class?", "body": "<blockquote>\n  <p>In the code, would <code>mFunc</code> be initialized to <code>nullptr</code> before <code>myClassObj</code> gets created? The reason for the query is that if the order is not guaranteed, then <code>mFunc</code> may get initialized again to <code>nullptr</code>.</p>\n</blockquote>\n\n<p>The answer to the question is \"Yes\".</p>\n\n<p>Setting aside the issue of initialization of thread specific objects, initialization of non-local variables is carried out in the following order.</p>\n\n<ol>\n<li>All variables are zero-initialized (order not specified). This is called <em>zero initialization</em>.</li>\n<li>All variables that can be initialized using constant values are initialized. This is called <em>constant initialization</em>.</li>\n</ol>\n\n<p>Those ( 1 and 2 above) are called <em>static initialization</em>.</p>\n\n<p>After that, dynamic initialization is performed.</p>\n\n<p>In your case, <code>MyClass::mFunc</code> is initialized using <em>constant initialization</em> while <code>myClassObj</code> is initialized using <em>dynamic initialization</em>. Hence, the former is guaranteed to be initialized first.</p>\n\n<p>More on this topic can be found at <a href=\"https://timsong-cpp.github.io/cppwp/n3337/basic.start.init\" rel=\"nofollow noreferrer\">https://timsong-cpp.github.io/cppwp/n3337/basic.start.init</a>.</p>\n"}], "owner": {"reputation": 591, "user_id": 7791328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1TP4d.png?s=128&g=1", "display_name": "iVoid", "link": "https://stackoverflow.com/users/7791328/ivoid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 1, "accepted_answer_id": 45595061, "answer_count": 1, "score": 10, "last_activity_date": 1502293572, "creation_date": 1502290973, "question_id": 45594299, "link": "https://stackoverflow.com/questions/45594299/is-initialization-of-static-member-of-a-class-guaranteed-before-initialization-o", "title": "Is initialization of static member of a class guaranteed before initialization of a static object of that class?", "body": "<p>I encountered this C++ static initialization order related query at a code review recently. </p>\n\n<ol>\n<li>I've a class with static member variable in a compilation unit</li>\n<li>I've a static object of that class using a constructor in a different compilation unit</li>\n</ol>\n\n<p>Here, I want to know if the static member variable is guaranteed to be initialized before the static object constructor is called?</p>\n\n<p><em>MyClass.h</em>:</p>\n\n<pre><code>typedef int (*MyFunc)(int);\nclass MyClass {\nMyClass(MyFunc fptr) {\n    mFunc = fptr;\n}\nstatic MyFunc mFunc;\n}\n</code></pre>\n\n<p><em>MyClass.cpp</em>:</p>\n\n<pre><code>MyFunc MyClass::mFunc = nullptr;\n</code></pre>\n\n<p><em>MyDifferentClass.h</em>:</p>\n\n<pre><code>MyDifferentClass {\npublic:\n    static int MyStaticFunc(int);\n}\n</code></pre>\n\n<p><em>MyDifferentClass.cpp</em>:</p>\n\n<pre><code>static MyClass myClassObj(MyDifferentClass::MyStaticFunc);\n</code></pre>\n\n<p>In the code, would <code>mFunc</code> be initialized to <code>nullptr</code> before <code>myClassObj</code> gets created? The reason for the query is that if the order is not guaranteed, then <code>mFunc</code> may get initialized again to <code>nullptr</code>.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 1333, "user_id": 408642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YYwoc.png?s=128&g=1", "display_name": "Benp44", "link": "https://stackoverflow.com/users/408642/benp44"}, "edited": false, "score": 0, "creation_date": 1502292316, "post_id": 45594248, "comment_id": 78149186, "body": "Does this help? <a href=\"https://stackoverflow.com/questions/42258892/qprocessstartdetached-not-show-console-window\" title=\"qprocessstartdetached not show console window\">stackoverflow.com/questions/42258892/&hellip;</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1502292666, "post_id": 45594248, "comment_id": 78149428, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/42258892/qprocessstartdetached-not-show-console-window\">QProcess::startDetached() not show console window</a>"}, {"owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "edited": false, "score": 0, "creation_date": 1502293094, "post_id": 45594248, "comment_id": 78149753, "body": "Possible, however I think I have a better answer than that solution so I am going to post it below"}], "answers": [{"tags": [], "owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "is_accepted": true, "score": 1, "last_activity_date": 1502293424, "creation_date": 1502293424, "answer_id": 45595224, "question_id": 45594248, "link": "https://stackoverflow.com/questions/45594248/qprocess-doesnt-show-the-command-window/45595224#45595224", "title": "QProcess doesn&#39;t show the command window", "body": "<p>So as discussed in the comments on my questions <a href=\"https://stackoverflow.com/questions/42258892/qprocessstartdetached-not-show-console-window\">this</a> StackOverflow post explains that this is infact correct behaviour when using the startDetached() function.</p>\n\n<p>I'm not entirely sure what the answer to that question was suggesting to do but here is my working solution.</p>\n\n<p><code>system()</code> is a windows specific function which \"can execute any command that can run on terminal if operating system allows\" <a href=\"http://www.geeksforgeeks.org/system-call-in-c/\" rel=\"nofollow noreferrer\">link</a></p>\n\n<p>If I replace this line:</p>\n\n<pre><code> bool res = QProcess::startDetached(program, arguments);\n</code></pre>\n\n<p>with the following, then it works:</p>\n\n<pre><code>system(QString(\"D:\\\\Qt\\\\5.9.1\\\\msvc2017_64\\\\bin\\\\myApp.exe \" +tableName +\" \" + fileName).toStdString().c_str());\n</code></pre>\n\n<p>In the short term I have simply moved this application into the Qt folder because it needs the DLLs however with a proper release of this app you can run it from wherever, including from next to the application that is running it.</p>\n\n<p>I do then get a terminal window and my app runns correctly.</p>\n"}, {"tags": [], "owner": {"reputation": 1721, "user_id": 941831, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ZdiGx.jpg?s=128&g=1", "display_name": "Gediminas", "link": "https://stackoverflow.com/users/941831/gediminas"}, "is_accepted": false, "score": 0, "last_activity_date": 1519046645, "creation_date": 1519046645, "answer_id": 48867208, "question_id": 45594248, "link": "https://stackoverflow.com/questions/45594248/qprocess-doesnt-show-the-command-window/48867208#48867208", "title": "QProcess doesn&#39;t show the command window", "body": "<p>When migrating from Qt 5.7.0.0(x86) to 5.10.0.0(x64) I was really surprised to see that using the new Qt version, a child (<em>launched with \"QProcess::startDetached\"</em>) process will not show up it's console (even though it's a console application! <em>(SubSystem:CONSOLE)</em>)</p>\n\n<p>MS documentation regarding \"AllocConsole\" says:</p>\n\n<blockquote>\n  <p>Console applications are initialized with a console, unless they are\n  created as detached processes (by calling the CreateProcess function\n  with the DETACHED_PROCESS flag).</p>\n</blockquote>\n\n<p><a href=\"https://docs.microsoft.com/en-us/windows/console/allocconsole\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/console/allocconsole</a></p>\n\n<blockquote>\n  <p>Console processes are not attached to a console if they are created\n  using CreateProcess with DETACHED_PROCESS</p>\n</blockquote>\n\n<p><a href=\"https://docs.microsoft.com/en-us/windows/console/creation-of-a-console\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/console/creation-of-a-console</a></p>\n\n<p>So I'm assuming that new Qt versions are using the \"CreateProcess\" with the \"DETACHED_PROCESS\" flag.</p>\n\n<p><strong>What I've ended up doing:</strong></p>\n\n<ul>\n<li>For child process I'm now using \"<strong>SubSystem:WINDOWS</strong>\". (Really\nimportant)  </li>\n<li>Inside the child process I'm creating the new console by using \"<strong>AllocConsole</strong>()\" </li>\n<li>Using: \"<strong>freopen</strong>(\"CONOUT$\", \"w\", <strong>stderr</strong>);\" and \"<strong>freopen</strong>(\"CONOUT$\",\n\"w\", <strong>stdout</strong>);\" (\"<strong>stderr</strong>\" is really important if you want to capture qDebug, qInfo, etc...)</li>\n</ul>\n\n<p>P.s. </p>\n\n<p>If you would need to use \"SubSystem:CONSOLE\", be sure to call \"<strong>FreeConsole</strong>\" before calling \"<strong>AllocConsole</strong>\". This is required, because child process will by default be using parent process console...</p>\n"}], "owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1334, "favorite_count": 0, "accepted_answer_id": 45595224, "answer_count": 2, "score": 1, "last_activity_date": 1519046645, "creation_date": 1502290823, "last_edit_date": 1502293623, "question_id": 45594248, "link": "https://stackoverflow.com/questions/45594248/qprocess-doesnt-show-the-command-window", "title": "QProcess doesn&#39;t show the command window", "body": "<p>I have the following code which runs an exectuable using <code>QProcess</code>. The code all runs fine and the new executable runs and is all fine.</p>\n\n<pre><code>QString fileName = ui.textBrowser_csvFile-&gt;toPlainText();\nQString tableName = ui.textBrowser_2-&gt;toPlainText();\n\nQString program = \"resources/myExe.exe\";\nQStringList arguments;\narguments &lt;&lt; tableName &lt;&lt; fileName;\n\nbool res = QProcess::startDetached(program, arguments);\n</code></pre>\n\n<p>It is a <code>Qt Console Application</code> using <code>QCoreApplication</code> and there it doesn't spawn the terminal window like it would if I run it normally. It would be useful to monitor the progress of the executable so how do I get my Application to run the new program and display the terminal window?</p>\n\n<p><strong>Edit</strong> Possible duplicate does <em>technically</em> answer the question, but I have answered this question with a working solution.</p>\n"}, {"tags": ["c++", "multithreading", "asynchronous"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1502296159, "post_id": 45594222, "comment_id": 78151662, "body": "You probably don&#39;t need a thread <i>or</i> an async task. You need to post a repeating event to your UI looper, and when you receive the event, you update that part.  What&#39;s your UI toolkit?"}, {"owner": {"reputation": 13, "user_id": 5136708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/765d4b72e75ddc131f4765e46a51a73d?s=128&d=identicon&r=PG&f=1", "display_name": "ASMStephen", "link": "https://stackoverflow.com/users/5136708/asmstephen"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1502311487, "post_id": 45594222, "comment_id": 78159972, "body": "Thanks for the answer, Mooing Duck. I&#39;m looking to keep this application as lightweight as possible, so I&#39;m using the Win32 API."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1502311731, "post_id": 45594222, "comment_id": 78160115, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms644906(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}], "owner": {"reputation": 13, "user_id": 5136708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/765d4b72e75ddc131f4765e46a51a73d?s=128&d=identicon&r=PG&f=1", "display_name": "ASMStephen", "link": "https://stackoverflow.com/users/5136708/asmstephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502295849, "creation_date": 1502290743, "last_edit_date": 1502295849, "question_id": 45594222, "link": "https://stackoverflow.com/questions/45594222/continuously-asynchronously-poll-and-update-label-in-c-gui-application", "title": "Continuously (asynchronously) poll and update label in C++ GUI application", "body": "<p>I have an application that opens another process and modifies its memory. What I'd like to have as a part of the GUI is a label that updates (perhaps every second or so) to let the user know if they're attached to the other process.</p>\n\n<p>When the application is found running, I'm creating a handle to it, obtaining the base address of it, and then the rest of the work is done through button clicks and hotkeys. Anyway, for each time the application is found running, I want it to do all the things I have it do to obtain the handle, etc., etc.</p>\n\n<p>This way, the other application can be closed and reopened without my app also needing to be closed/reopened accordingly.</p>\n\n<p>Thus far, my research has led me to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682453(v=vs.85).aspx\" rel=\"nofollow noreferrer\">CreateThread()</a> and <a href=\"http://en.cppreference.com/w/cpp/thread/async\" rel=\"nofollow noreferrer\">std::async</a> (as well as std::launch::async and std::launch::deferred). The issue I'm having is I can't seem to find examples of infinitely-running asynchronous code (in its own thread, perhaps). I'm having a difficult time wrapping my head around how to make this happen, as everything I've tried still keeps execution from continuing as if I'd just written a while loop in main() or something.</p>\n\n<p>Anything exemplifying the type of functionality I'm looking to achieve would be immensely appreciated! Thanks for your time and help, everyone.</p>\n"}, {"tags": ["c++", "opencv", "cmake", "visual-studio-2017", "static-libraries"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1502292034, "post_id": 45593856, "comment_id": 78148949, "body": "It is almost certainly due to your compiler or linker settings. Compare them between the library project and the DLL project."}, {"owner": {"reputation": 9309, "user_id": 496405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d224ce8793eda60a36f5e0ed9f124c?s=128&d=identicon&r=PG", "display_name": "g19fanatic", "link": "https://stackoverflow.com/users/496405/g19fanatic"}, "edited": false, "score": 0, "creation_date": 1502306653, "post_id": 45593856, "comment_id": 78157629, "body": "can we get the CMakeLists.txt for your project that is trying to link in the opencv library? I&#39;m guessing there is a problem here..."}, {"owner": {"reputation": 692, "user_id": 1529308, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da97639e7a382f47c4356da9579ede7f?s=128&d=identicon&r=PG", "display_name": "hrust", "link": "https://stackoverflow.com/users/1529308/hrust"}, "reply_to_user": {"reputation": 9309, "user_id": 496405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d224ce8793eda60a36f5e0ed9f124c?s=128&d=identicon&r=PG", "display_name": "g19fanatic", "link": "https://stackoverflow.com/users/496405/g19fanatic"}, "edited": false, "score": 0, "creation_date": 1502343362, "post_id": 45593856, "comment_id": 78169371, "body": "@g19fanatic my project is not built with CMake only opencv. My DLL is simply a win32 app project in visual studio, so I believe it&#39;s built with some visual studio rules."}], "answers": [{"comments": [{"owner": {"reputation": 692, "user_id": 1529308, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da97639e7a382f47c4356da9579ede7f?s=128&d=identicon&r=PG", "display_name": "hrust", "link": "https://stackoverflow.com/users/1529308/hrust"}, "edited": false, "score": 0, "creation_date": 1502358739, "post_id": 45610181, "comment_id": 78178982, "body": "In case of prebuilt opencv package version 3.3 does not contain staticlib for x86, opencv 2.3.14 contains, but I encounter many more problems with older version if I switch to it."}, {"owner": {"reputation": 11, "user_id": 2416469, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x8OwU.jpg?s=128&g=1", "display_name": "MFmaniak", "link": "https://stackoverflow.com/users/2416469/mfmaniak"}, "reply_to_user": {"reputation": 692, "user_id": 1529308, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da97639e7a382f47c4356da9579ede7f?s=128&d=identicon&r=PG", "display_name": "hrust", "link": "https://stackoverflow.com/users/1529308/hrust"}, "edited": false, "score": 0, "creation_date": 1502358889, "post_id": 45610181, "comment_id": 78179083, "body": "So do NOT use the prebuilt opencv package :)"}, {"owner": {"reputation": 692, "user_id": 1529308, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da97639e7a382f47c4356da9579ede7f?s=128&d=identicon&r=PG", "display_name": "hrust", "link": "https://stackoverflow.com/users/1529308/hrust"}, "edited": false, "score": 0, "creation_date": 1502359270, "post_id": 45610181, "comment_id": 78179360, "body": "With own built libraries I cannot properly add them as static libraries and I cannot carry myriads of dll&#39;s along with the one I&#39;m developing."}, {"owner": {"reputation": 11, "user_id": 2416469, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x8OwU.jpg?s=128&g=1", "display_name": "MFmaniak", "link": "https://stackoverflow.com/users/2416469/mfmaniak"}, "reply_to_user": {"reputation": 692, "user_id": 1529308, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da97639e7a382f47c4356da9579ede7f?s=128&d=identicon&r=PG", "display_name": "hrust", "link": "https://stackoverflow.com/users/1529308/hrust"}, "edited": false, "score": 0, "creation_date": 1502359880, "post_id": 45610181, "comment_id": 78179793, "body": "If you have problems with linking to prebuilt libs, you never get further until you fix linking to your own built libraries."}, {"owner": {"reputation": 692, "user_id": 1529308, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da97639e7a382f47c4356da9579ede7f?s=128&d=identicon&r=PG", "display_name": "hrust", "link": "https://stackoverflow.com/users/1529308/hrust"}, "edited": false, "score": 0, "creation_date": 1502360002, "post_id": 45610181, "comment_id": 78179874, "body": "Exactly, I am currently stuck with linking pf either prebuilt or compiled libs and that question is devoted to this issue."}, {"owner": {"reputation": 11, "user_id": 2416469, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x8OwU.jpg?s=128&g=1", "display_name": "MFmaniak", "link": "https://stackoverflow.com/users/2416469/mfmaniak"}, "reply_to_user": {"reputation": 692, "user_id": 1529308, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da97639e7a382f47c4356da9579ede7f?s=128&d=identicon&r=PG", "display_name": "hrust", "link": "https://stackoverflow.com/users/1529308/hrust"}, "edited": false, "score": 0, "creation_date": 1502360047, "post_id": 45610181, "comment_id": 78179899, "body": "Try building a sample project with only opencv 3.3.0 static linked. And add your other &quot;bad&quot; dependencies one by one to discover linking conflicts."}, {"owner": {"reputation": 692, "user_id": 1529308, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da97639e7a382f47c4356da9579ede7f?s=128&d=identicon&r=PG", "display_name": "hrust", "link": "https://stackoverflow.com/users/1529308/hrust"}, "edited": false, "score": 0, "creation_date": 1502360543, "post_id": 45610181, "comment_id": 78180282, "body": "With all the ammendments made I still receive 300+ error stating something like that <code>LNK2019\tunresolved external symbol _ippicviMean_16s_C4R@20 referenced in function &quot;bool __cdecl cv::ipp_mean(class cv::Mat &amp;,class cv::Mat &amp;,class cv::Scalar_&lt;double&gt; &amp;)&quot; (?ipp_mean@cv@@YA_NAAVMat@1@0AAV?$Scalar_@N@1@@Z)\topencv_tes&zwnj;&#8203;t\t&lt;path&gt;\\opencv_test&zwnj;&#8203;\\opencv_core330d.lib&zwnj;&#8203;(stat.obj)</code>"}, {"owner": {"reputation": 11, "user_id": 2416469, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x8OwU.jpg?s=128&g=1", "display_name": "MFmaniak", "link": "https://stackoverflow.com/users/2416469/mfmaniak"}, "reply_to_user": {"reputation": 692, "user_id": 1529308, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da97639e7a382f47c4356da9579ede7f?s=128&d=identicon&r=PG", "display_name": "hrust", "link": "https://stackoverflow.com/users/1529308/hrust"}, "edited": false, "score": 0, "creation_date": 1502360963, "post_id": 45610181, "comment_id": 78180565, "body": "Here is the a cut from the list of additional dependencies that i use in my project (maybe this will be useful): ws2_32.lib imm32.lib winmm.lib version.lib uxtheme.lib dwmapi.lib Iphlpapi.lib Vfw32.lib ipp_iw.lib ippicvmt.lib opengl32.lib glu32.lib ittnotify.lib zlib.lib IlmImf.lib libjasper.lib libtiff.lib libwebp.lib opencv_world330.lib"}], "tags": [], "owner": {"reputation": 11, "user_id": 2416469, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x8OwU.jpg?s=128&g=1", "display_name": "MFmaniak", "link": "https://stackoverflow.com/users/2416469/mfmaniak"}, "is_accepted": false, "score": 0, "last_activity_date": 1502359725, "last_edit_date": 1502359725, "creation_date": 1502358427, "answer_id": 45610181, "question_id": 45593856, "link": "https://stackoverflow.com/questions/45593856/include-static-library-in-vs-c-project/45610181#45610181", "title": "Include static library in VS C++ project", "body": "<p>To resolve \"Error type 3\" add *.lib files from \"staticlib\" dir to \"Linker->Input->Additional Dependencies\". For example \"_ipp\" symbols are defined in \"ipp_iw.lib\" and \"ippicvmt.lib\".</p>\n\n<p>Just for info. I successfully built opencv from sources as a static and shared library (as opencv_world3**.lib) using MSVS 2012 and cmake 3.9.0. But also done that with MSVS 2017 community.</p>\n\n<p>PS. Maybe a TYPO but you said that you use opencv <strong>3.3.0</strong> but in error messages there is opencv_core<strong>320</strong>d.lib</p>\n\n<p>PPS. \"Error type 1\" is the result of using static debug runtime version in opencv_core (MTd) and dynamic debug runtime in your app (MDd)</p>\n"}, {"comments": [{"owner": {"reputation": 692, "user_id": 1529308, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da97639e7a382f47c4356da9579ede7f?s=128&d=identicon&r=PG", "display_name": "hrust", "link": "https://stackoverflow.com/users/1529308/hrust"}, "edited": false, "score": 0, "creation_date": 1502366127, "post_id": 45611163, "comment_id": 78184241, "body": "I am probably still missing something. However, after recompilation and rechecking the project properties number of problems reduced and currently I receive only <code>unresolved external symbols</code>"}, {"owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "reply_to_user": {"reputation": 692, "user_id": 1529308, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da97639e7a382f47c4356da9579ede7f?s=128&d=identicon&r=PG", "display_name": "hrust", "link": "https://stackoverflow.com/users/1529308/hrust"}, "edited": false, "score": 0, "creation_date": 1502381227, "post_id": 45611163, "comment_id": 78196541, "body": "@hrust If your problems are related only to unresolved external symbols, usually you have some .lib files missing from the [Additional Dependencies].  Have you tried to deselect <code>BUILD_WITH_DYNAMIC_IPP</code> during OpenCV building?"}], "tags": [], "owner": {"reputation": 1975, "user_id": 6070341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHHZU.png?s=128&g=1", "display_name": "Costantino Grana", "link": "https://stackoverflow.com/users/6070341/costantino-grana"}, "is_accepted": false, "score": 0, "last_activity_date": 1502360840, "creation_date": 1502360840, "answer_id": 45611163, "question_id": 45593856, "link": "https://stackoverflow.com/questions/45593856/include-static-library-in-vs-c-project/45611163#45611163", "title": "Include static library in VS C++ project", "body": "<p>I always have the same problems. This is why I have a property sheet ready for use.</p>\n\n<p>The steps to follow for static compilation are:</p>\n\n<ol>\n<li>Remember to Build the INSTALL project in the CMake generated Solution. Let's call <code>$(OPENCV_DIR)</code> the folder where the install happened (usually something like <code>xxx\\install</code>). You can create an environment variable for this.</li>\n<li>Add in front of <code>[Configuration Properties]-&gt;[VC++ Directories]-&gt;[Include Directories]</code> <code>$(OPENCV_DIR)\\include;</code>. The semicolon is to separate paths.</li>\n<li>Add in front of <code>[Configuration Properties]-&gt;[VC++ Directories]-&gt;[Library Directories]</code> <code>$(OPENCV_DIR)\\x86\\vc15\\staticlib;</code>. </li>\n<li>Match the runtime library linkage mode between OpenCV and your project. If you unselect <code>BUILD_SHARED_LIBS</code> by default the CRT is statically linked (/MT for Release or /MTd for Debug). If you want it dynamically linked deselect <code>BUILD_WITH_STATIC_CRT</code>. So, as you already realized, fix it in <code>[Configuration Properties]-&gt;[C/C++]-&gt;[Code Generation]-&gt;[Runtime Library]</code>.</li>\n<li>Copy all filenames matching <code>*.lib</code> (<code>*d.lib</code> for Debug) and add them in <code>[Configuration Properties]-&gt;[Linker]-&gt;[Input]-&gt;[Additional Dependencies]</code> separated by semicolons.</li>\n</ol>\n\n<p>It's quite painful, so do it once in a Property Sheet and just include it when needed.</p>\n"}], "owner": {"reputation": 692, "user_id": 1529308, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da97639e7a382f47c4356da9579ede7f?s=128&d=identicon&r=PG", "display_name": "hrust", "link": "https://stackoverflow.com/users/1529308/hrust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1965, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1502360840, "creation_date": 1502289761, "last_edit_date": 1502349055, "question_id": 45593856, "link": "https://stackoverflow.com/questions/45593856/include-static-library-in-vs-c-project", "title": "Include static library in VS C++ project", "body": "<h1>Configuration I have</h1>\n\n<ul>\n<li>Windows 10 64bit</li>\n<li>Visual Studio Community 2017 with Visual C++ 2017</li>\n<li>CMake 3.9.0</li>\n<li>opencv 3.3.0</li>\n</ul>\n\n<h1>Aim</h1>\n\n<p>Goal is to build opencv as a static library (<strong>.lib</strong>) and include into a Visual C++ project which is a DLL. Everything should be compiled for x86 architecture or simply 32bit.</p>\n\n<h1>Process</h1>\n\n<p>Latest opencv distributive does not contain dll's compiled for 32bit system and therefore, I need to compile own version. According to the opencv 2.4 documentation on <a href=\"http://docs.opencv.org/2.4/doc/tutorials/introduction/windows_install/windows_install.html#windows-installation\" rel=\"nofollow noreferrer\">\"installation in Windows\"</a>. I have compiled the library with <code>BUILD_SHARED_LIBS</code> option disabled and configured target project as described in <a href=\"http://docs.opencv.org/2.4/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html#windows-visual-studio-how-to\" rel=\"nofollow noreferrer\">\"how to build applications with OpenCV inside the Microsoft Visual Studio\"</a>.</p>\n\n<p>Compilation of my project fails with following errors (totally error count is greater than 800)</p>\n\n<p><em>Error type 1</em></p>\n\n<pre><code>LNK2038 mismatch detected for 'RuntimeLibrary': value 'MTd_StaticDebug' \ndoesn't match value 'MDd_DynamicDebug' in main.obj  \n\\opencv_core320d.lib(alloc.obj)\n</code></pre>\n\n<p><em>Error type 2</em></p>\n\n<pre><code>LNK2005 \"public: void __thiscall std::basic_ostream&lt;char,struct \nstd::char_traits&lt;char&gt; &gt;::_Osfx(void)\" (?_Osfx@?$basic_ostream@DU?\n$char_traits@D@std@@@std@@QAEXXZ) already defined in \nopencv_core320d.lib(system.obj) \\msvcprtd.lib(MSVCP140D.dll)\n</code></pre>\n\n<p><em>Error type 3</em></p>\n\n<pre><code>LNK2001 unresolved external symbol _ippicviHSVToRGB_16u_C3R@24  \n\\opencv_imgproc320d.lib(color.obj)\n</code></pre>\n\n<p>I believe it may be due to uncoordinated compilation options or erroneous configuration of my project, but because I am heavy Linux user I experience difficulties with setting up these things on Windows.</p>\n\n<h1>Update</h1>\n\n<p>After I have matched configuration shown in the screen below block of errors about code generation mismatch disappeared, but undefined references are still there.\n<a href=\"https://i.stack.imgur.com/chPPJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/chPPJ.png\" alt=\"Runtime library option\"></a></p>\n\n<p>Thank you for help!</p>\n"}, {"tags": ["c++", "eclipse-cdt"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1502289405, "post_id": 45593521, "comment_id": 78146814, "body": "Add an include path (Project-&gt;Properties-&gt;C/C++-&gt;Paths and Symbols Includes Tab) to the root of the headers."}, {"owner": {"reputation": 61, "user_id": 1510024, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a4bd7807eade81dec6523f2927d8306?s=128&d=identicon&r=PG", "display_name": "user1510024", "link": "https://stackoverflow.com/users/1510024/user1510024"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1502290173, "post_id": 45593521, "comment_id": 78147439, "body": "thanks, that helped"}, {"owner": {"reputation": 9309, "user_id": 496405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d224ce8793eda60a36f5e0ed9f124c?s=128&d=identicon&r=PG", "display_name": "g19fanatic", "link": "https://stackoverflow.com/users/496405/g19fanatic"}, "edited": false, "score": 0, "creation_date": 1502306971, "post_id": 45593521, "comment_id": 78157800, "body": "I would not do as the comment suggested since when you re-run cmake, it will blow away your changes. Those mods are not reproducable for others trying to build the project UNLESS you include the eclipse CDT solution files (which defeats the point of using CMake)."}, {"owner": {"reputation": 61, "user_id": 1510024, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a4bd7807eade81dec6523f2927d8306?s=128&d=identicon&r=PG", "display_name": "user1510024", "link": "https://stackoverflow.com/users/1510024/user1510024"}, "edited": false, "score": 0, "creation_date": 1502310126, "post_id": 45593521, "comment_id": 78159330, "body": "OK, I&#39;ll probably just end up adding the new files manually everytime anyway, since a clean solution probably beats less maintenance. But not having new files automaticly picked up just seams like such  a non-programmer thing to do."}, {"owner": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "reply_to_user": {"reputation": 9309, "user_id": 496405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d224ce8793eda60a36f5e0ed9f124c?s=128&d=identicon&r=PG", "display_name": "g19fanatic", "link": "https://stackoverflow.com/users/496405/g19fanatic"}, "edited": false, "score": 0, "creation_date": 1502330014, "post_id": 45593521, "comment_id": 78165728, "body": "It&#39;s not clear from the question whether you use CMake to generate the Eclipse project, or set up the Eclipse project yourself. @g19fanatic&#39;s concern only applies in the first case."}, {"owner": {"reputation": 61, "user_id": 1510024, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a4bd7807eade81dec6523f2927d8306?s=128&d=identicon&r=PG", "display_name": "user1510024", "link": "https://stackoverflow.com/users/1510024/user1510024"}, "edited": false, "score": 0, "creation_date": 1502345897, "post_id": 45593521, "comment_id": 78170422, "body": "Now I have an eclipse projected that needs to be converted into a cmake project, so basicly replace eclipse with cmake and makefiles."}, {"owner": {"reputation": 9309, "user_id": 496405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d224ce8793eda60a36f5e0ed9f124c?s=128&d=identicon&r=PG", "display_name": "g19fanatic", "link": "https://stackoverflow.com/users/496405/g19fanatic"}, "edited": false, "score": 0, "creation_date": 1502367065, "post_id": 45593521, "comment_id": 78184985, "body": "One solution i&#39;ve had to do in the past with CDT is to create a &#39;patch&#39; that adds the stdlib locations to the generated CDT project file. The patch would be commited into SCM and there would be a custom step in the cmake to apply the patch after everything was generated."}], "owner": {"reputation": 61, "user_id": 1510024, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a4bd7807eade81dec6523f2927d8306?s=128&d=identicon&r=PG", "display_name": "user1510024", "link": "https://stackoverflow.com/users/1510024/user1510024"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502345935, "creation_date": 1502288873, "last_edit_date": 1502345935, "question_id": 45593521, "link": "https://stackoverflow.com/questions/45593521/how-can-i-use-absolute-include-paths-in-eclipse-cdt", "title": "How can I use absolute include paths in Eclipse CDT?", "body": "<p>I'm working on importing a C++ eclipse cdt project into  cmake, while changing as little code as possible. Now I have run into an issue. Eclipse sets include paths relative to the file itself, while the project using cmake uses paths realtive to the source directory. So basicly imaging this file structure:  </p>\n\n<pre><code>-Main\n--Main.cpp\n-Header.h\n</code></pre>\n\n<p>in eclipse you would do this:</p>\n\n<pre><code>#include \"../Header.cpp\"\n</code></pre>\n\n<p>while in cmake you would do this:</p>\n\n<pre><code>#include \"Header.cpp\"\n</code></pre>\n\n<p>So I basicly now need a way to make eclipse work the second way. Is there some kind of setting I can use for this?</p>\n"}, {"tags": ["c++", "sockets", "winapi", "gdi", "bitblt"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1502288889, "post_id": 45593404, "comment_id": 78146377, "body": "You use a device-independent bitmap on the sending side (by way of <code>GetDIBits</code>) but a device-dependent one on the receiving side (by way of <code>CreateBitmapIndirect</code>). I suggest you use a DIB on the receiving side as well, e.g. via <code>CreateDIBSection</code>"}, {"owner": {"reputation": 911, "user_id": 5056622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40ac41414354b234863571efdb0d020a?s=128&d=identicon&r=PG&f=1", "display_name": "Reznicencu Bogdan", "link": "https://stackoverflow.com/users/5056622/reznicencu-bogdan"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1502289070, "post_id": 45593404, "comment_id": 78146528, "body": "I&#39;&#39;l test it and reply if it works or not.Thanks"}, {"owner": {"reputation": 911, "user_id": 5056622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40ac41414354b234863571efdb0d020a?s=128&d=identicon&r=PG&f=1", "display_name": "Reznicencu Bogdan", "link": "https://stackoverflow.com/users/5056622/reznicencu-bogdan"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1502290071, "post_id": 45593404, "comment_id": 78147352, "body": "You mean CreateDIBitmap maybe ?  because CreateDIBSection as I can see doesn&#39;t return an HBITMAP from an array . I believe, based on the HDC it gives out an array and a HBITMAP. That&#39;s not what i want on the server."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1502290230, "post_id": 45593404, "comment_id": 78147497, "body": "<code>CreateDIBSection</code> creates a new bitmap, and gives you direct access to its data storage. You can copy your bits into that storage, and they will be immediately reflected in the bitmap. But if you prefer, <code>CreateDIBitmap</code> should also work, I think."}, {"owner": {"reputation": 911, "user_id": 5056622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40ac41414354b234863571efdb0d020a?s=128&d=identicon&r=PG&f=1", "display_name": "Reznicencu Bogdan", "link": "https://stackoverflow.com/users/5056622/reznicencu-bogdan"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1502290484, "post_id": 45593404, "comment_id": 78147702, "body": "I had no idea.I guess it reserves the space for the bitmap in memory based on the header i give to it.Do i need to delete[] it ? Or it does so when calling DeleteObject [HBITMAP]?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1502290886, "post_id": 45593404, "comment_id": 78148070, "body": "The memory is associated with the handle, and is freed when you delete the bitmap via <code>DeleteObject</code>."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1502291169, "post_id": 45593404, "comment_id": 78148286, "body": "<code>bmHeight</code> needs to be negative for a top-down bitmap, and you have made it positive. Presumably that&#39;s all it is."}, {"owner": {"reputation": 911, "user_id": 5056622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40ac41414354b234863571efdb0d020a?s=128&d=identicon&r=PG&f=1", "display_name": "Reznicencu Bogdan", "link": "https://stackoverflow.com/users/5056622/reznicencu-bogdan"}, "edited": false, "score": 0, "creation_date": 1502291589, "post_id": 45593404, "comment_id": 78148583, "body": "I did with CreateDIBSection .It works , yet i removed abs() and still shows the right way (with or without it&#39;s the same thing...).I checked the height in the client and server and it is always positive.When i set it negative in the server it didn&#39;t show anything.Is this negative thing real ?"}, {"owner": {"reputation": 911, "user_id": 5056622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40ac41414354b234863571efdb0d020a?s=128&d=identicon&r=PG&f=1", "display_name": "Reznicencu Bogdan", "link": "https://stackoverflow.com/users/5056622/reznicencu-bogdan"}, "edited": false, "score": 0, "creation_date": 1502302033, "post_id": 45593404, "comment_id": 78154999, "body": "why the downvote ?"}], "answers": [{"tags": [], "owner": {"reputation": 911, "user_id": 5056622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40ac41414354b234863571efdb0d020a?s=128&d=identicon&r=PG&f=1", "display_name": "Reznicencu Bogdan", "link": "https://stackoverflow.com/users/5056622/reznicencu-bogdan"}, "is_accepted": true, "score": 3, "last_activity_date": 1502292288, "creation_date": 1502292288, "answer_id": 45594796, "question_id": 45593404, "link": "https://stackoverflow.com/questions/45593404/image-sent-over-tcp-is-flipped/45594796#45594796", "title": "Image sent over TCP is flipped", "body": "<p>Thanks to @Igor Tandetnik I solved this problem .This is the final code:</p>\n\n<p>On the client i send BITMAPINFO instead of BITMAPINFOHEADER:</p>\n\n<pre><code>//...\n// send first the bmpInfo struct\n// send raw data : dataBuffer\n//.....\n</code></pre>\n\n<p>Server side(I used CreateDIBSection instead of CreateBitmapIndirect):</p>\n\n<pre><code>// data is the entire sent : structure + dataBuffer\n\nHDC hDc = GetDC(windowHwnd);\nHDC tCpyHdc = CreateCompatibleDC(hDc);\n\nBITMAPINFO bmpInfo = *(BITMAPINFO*)data;\nBITMAP bmp;\nbmp.bmType = 0;\nbmp.bmWidth = bmpInfo.bmiHeader.biWidth;\nbmp.bmHeight = -abs(bmpInfo.bmiHeader.biHeight);\nbmp.bmPlanes = bmpInfo.bmiHeader.biPlanes;\nbmp.bmWidthBytes = bmpInfo.bmiHeader.biWidth * 4;\nbmp.bmBitsPixel = bmpInfo.bmiHeader.biBitCount;\nbmp.bmBits = (char*)(data + sizeof(BITMAPINFO));\n\nchar* dibarr = NULL;\nHBITMAP hB = CreateDIBSection(windowData.tCpyHdc, &amp;bmpInfo, DIB_RGB_COLORS, (void**)&amp;dibarr, 0, 0);\nmemcpy((void*)dibarr, (void*)bmp.bmBits, inf.packetsz - sizeof(BITMAPINFO));\n\nHBITMAP oldBmp = (HBITMAP)SelectObject(tCpyHdc, hB);\nStretchBlt(hDc, 0, 0, width - 20, height - 40, tCpyHdc, 0, 0, bmp.bmWidth, bmp.bmHeight, SRCCOPY);\n</code></pre>\n"}], "owner": {"reputation": 911, "user_id": 5056622, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40ac41414354b234863571efdb0d020a?s=128&d=identicon&r=PG&f=1", "display_name": "Reznicencu Bogdan", "link": "https://stackoverflow.com/users/5056622/reznicencu-bogdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 45594796, "answer_count": 1, "score": 1, "last_activity_date": 1502292288, "creation_date": 1502288548, "last_edit_date": 1502289446, "question_id": 45593404, "link": "https://stackoverflow.com/questions/45593404/image-sent-over-tcp-is-flipped", "title": "Image sent over TCP is flipped", "body": "<p>I created an client which sends a screenshot over TCP to an server.The image is sent successfully. However at receival the image is upside down(I know this is set by the negative height in one of the structure's properties).\nI've searched over the internet on the means of doing it, but I couldn't find a proper way to achieve this.So if there's a better way of doing it , please do correct me.</p>\n\n<p>This is how I send the screenshot (client) :</p>\n\n<pre><code>HDC ScreenDC = GetDC(0);\nHDC hMemory = CreateCompatibleDC(ScreenDC);\nPOINT ScreenSize = { GetDeviceCaps(ScreenDC, HORZRES),GetDeviceCaps(ScreenDC, VERTRES)};\n\n// fill the hbitmap wtih the screenshot\nHBITMAP hBitmap = CreateCompatibleBitmap(ScreenDC, ScreenSize.x, ScreenSize.y);\nHGDIOBJ hOldBitmap = SelectObject(hMemory, hBitmap);\nBITMAPINFO bmpInfo = { 0 };\n\nbmpInfo.bmiHeader.biSize = sizeof(bmpInfo.bmiHeader);\nGetDIBits(ScreenDC , hBitmap, 0, 0, NULL, &amp;bmpInfo, DIB_RGB_COLORS); // fill bmpInfo with info about the hBitmap\nchar * dataBuffer = new char[bmpInfo.bmiHeader.biSizeImage];\n\n// adjust the header for our needs\nbmpInfo.bmiHeader.biBitCount = 32;\nbmpInfo.bmiHeader.biCompression = BI_RGB;  // no compression -&gt; easier to use\nbmpInfo.bmiHeader.biHeight = abs(bmpInfo.bmiHeader.biHeight);\nBitBlt(hMemory, 0, 0, ScreenSize.x, ScreenSize.y, ScreenDC, 0, 0, SRCCOPY); // take a screenshot\nGetDIBits(ScreenDC, hBitmap, 0, bmpInfo.bmiHeader.biHeight, dataBuffer, &amp;bmpInfo, DIB_RGB_COLORS);  // fill dataBuffer with raw image data\n\n// send first the bmpInfo.bmiHeader struct\n// send raw data : dataBuffer\n//.....\n</code></pre>\n\n<p>I am sure the message is being sent and received properly as I have implemented a protocol for separating the packets.This is not the problem .</p>\n\n<p>This is the receiver (server) :</p>\n\n<pre><code>// data is the entire sent : structure + dataBuffer\n\nHDC hDc = GetDC(windowHwnd);\nHDC tCpyHdc = CreateCompatibleDC(hDc);\n\nBITMAPINFOHEADER bmpHeader = *(BITMAPINFOHEADER*)data;\nBITMAP bmp;\nbmp.bmType = 0;\nbmp.bmWidth = bmpHeader.biWidth;\nbmp.bmHeight = abs(bmpHeader.biHeight);\nbmp.bmPlanes = bmpHeader.biPlanes;\nbmp.bmWidthBytes = bmpHeader.biWidth * 4;\nbmp.bmBitsPixel = bmpHeader.biBitCount;\nbmp.bmBits = (char*)(data + sizeof(BITMAPINFOHEADER));\n\nHBITMAP hB = CreateBitmapIndirect(&amp;bmp);\n\nHBITMAP oldBmp = (HBITMAP)SelectObject(tCpyHdc, hB);\nStretchBlt(hDc, 0, 0, width - 20, height - 40, tCpyHdc, 0, 0, bmp.bmWidth, bmp.bmHeight, SRCCOPY);\n</code></pre>\n\n<p>The image is upside down .How can I fix it ?</p>\n"}, {"tags": ["c++", "buffer", "ifstream"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 2, "creation_date": 1502288182, "post_id": 45593222, "comment_id": 78145763, "body": "Did you check if <code>my_file</code> opened correctly?"}, {"owner": {"reputation": 43, "user_id": 4358948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d5183b74dfad4f3e10d4a8c7c6afc7d?s=128&d=identicon&r=PG&f=1", "display_name": "uriBaba", "link": "https://stackoverflow.com/users/4358948/uribaba"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1502288747, "post_id": 45593222, "comment_id": 78146246, "body": "Yes and it did open correctly"}], "answers": [{"tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": false, "score": 3, "last_activity_date": 1502289177, "creation_date": 1502289177, "answer_id": 45593647, "question_id": 45593222, "link": "https://stackoverflow.com/questions/45593222/ifstream-doesnt-read-to-buffer/45593647#45593647", "title": "ifstream doesn&#39;t read to buffer", "body": "<p>You seek to end-of-file, and <strong>then</strong> try to read. Of course it fails - the file is positioned at EOF, there's no data to read.</p>\n"}], "owner": {"reputation": 43, "user_id": 4358948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d5183b74dfad4f3e10d4a8c7c6afc7d?s=128&d=identicon&r=PG&f=1", "display_name": "uriBaba", "link": "https://stackoverflow.com/users/4358948/uribaba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1502289194, "creation_date": 1502288080, "last_edit_date": 1502289194, "question_id": 45593222, "link": "https://stackoverflow.com/questions/45593222/ifstream-doesnt-read-to-buffer", "title": "ifstream doesn&#39;t read to buffer", "body": "<p>In the following code the read method doesn't seem to fill the given buffer:</p>\n\n<pre><code>ifstream pkcs7_file(file_name, std::ios::binary);\nif ( pkcs7_file.fail() )\n{\n    std::cout &lt;&lt; \"File failed before reading!\\n\";\n}\npkcs7_file.seekg(0, pkcs7_file.end);\nsize_t len = pkcs7_file.tellg();\n\nchar * buffer = new char[len];\n\npkcs7_file.read(buffer, len);\n\npkcs7_file.close();\n</code></pre>\n\n<p>When debugging with VS 2012 and printing, the Len variable is as expected (and not zero) but the buffer doesn't change after the read function - it remains with the same value from before the read.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "matlab", "opencv", "mex"], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 2955708, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/82cf9a2822aa5877e0341db1fb86f9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Kristan", "link": "https://stackoverflow.com/users/2955708/kristan"}, "edited": false, "score": 0, "creation_date": 1502368088, "post_id": 45593587, "comment_id": 78185777, "body": "I have edited the code a bit. *D a pointer to a container with int values. But the input matrix is having floating point values, so what mxGetPr(prhs[3])[i] is returning to D[i] actually? Could you please help me?"}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "reply_to_user": {"reputation": 315, "user_id": 2955708, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/82cf9a2822aa5877e0341db1fb86f9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Kristan", "link": "https://stackoverflow.com/users/2955708/kristan"}, "edited": false, "score": 0, "creation_date": 1502372554, "post_id": 45593587, "comment_id": 78189629, "body": "@Kristan Just cast the data to <code>int</code> before storing. I&#39;ll edit my post.  It&#39;s not safe, but that&#39;s what you do.  Is the input matrix coming from MATLAB <b>also</b> floating-point?  That is, when you call your MEX function, is the input type of the third input parameter into your MEX function <b>also</b> of type <code>double</code> or floating-point?  That is important before I edit my post."}, {"owner": {"reputation": 315, "user_id": 2955708, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/82cf9a2822aa5877e0341db1fb86f9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Kristan", "link": "https://stackoverflow.com/users/2955708/kristan"}, "edited": false, "score": 0, "creation_date": 1502372997, "post_id": 45593587, "comment_id": 78190037, "body": "Yes, the input matrix has floating point values. What I would like to do is that instead of using mxGetPr(), I would like to use some other (preferably OpenCV) function to return the same value as mxGetPr() does. The reason is that I will not use anymore the original Matlab code, but &quot;purely&quot; C++(OpenCV)."}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "reply_to_user": {"reputation": 315, "user_id": 2955708, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/82cf9a2822aa5877e0341db1fb86f9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Kristan", "link": "https://stackoverflow.com/users/2955708/kristan"}, "edited": false, "score": 0, "creation_date": 1502373269, "post_id": 45593587, "comment_id": 78190293, "body": "You&#39;d have to copy the data into a <code>cv::Mat</code> before using any of the OpenCV methods on it. I&#39;ll edit my post but all you do is cast the data."}, {"owner": {"reputation": 315, "user_id": 2955708, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/82cf9a2822aa5877e0341db1fb86f9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Kristan", "link": "https://stackoverflow.com/users/2955708/kristan"}, "edited": false, "score": 0, "creation_date": 1502373735, "post_id": 45593587, "comment_id": 78190689, "body": "sure, now I use cv::Mat for containing elements. and what i want to do is looping over this matrix and returning the same value as mxGetPr() does."}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "reply_to_user": {"reputation": 315, "user_id": 2955708, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/82cf9a2822aa5877e0341db1fb86f9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Kristan", "link": "https://stackoverflow.com/users/2955708/kristan"}, "edited": false, "score": 0, "creation_date": 1502374013, "post_id": 45593587, "comment_id": 78190944, "body": "Ok so is <code>D</code> actually a <code>cv::Mat</code>?? That is different entirely. Is it your intent to copy the data from MATLAB to a <code>cv::Mat</code> container? You should have explicitly said so your question. It changes the answer entirely. Please clarify for me because I&#39;m confused with what you want. OpenCV will never return what MATLAB gives you."}, {"owner": {"reputation": 315, "user_id": 2955708, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/82cf9a2822aa5877e0341db1fb86f9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Kristan", "link": "https://stackoverflow.com/users/2955708/kristan"}, "edited": false, "score": 0, "creation_date": 1502374775, "post_id": 45593587, "comment_id": 78191580, "body": "sorry for not being clear. So initially prhs[3] was a MATLAB matrix, and used in mexFunction() for process. But now I implemented everything in C++(OpenCV) so I have cv::Mat d .The type of int<i>D did not change. I would like to process &quot;d&quot; similarly way as it was with the input Matlab matrix. As I understand in the mexFunction() mxGetPr() returned double</i> and gave it to D[i]. Now, I would like to return the same value but using OpenCV function -I guess somehow accessing pointers to the elements-."}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "reply_to_user": {"reputation": 315, "user_id": 2955708, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/82cf9a2822aa5877e0341db1fb86f9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Kristan", "link": "https://stackoverflow.com/users/2955708/kristan"}, "edited": false, "score": 0, "creation_date": 1502375328, "post_id": 45593587, "comment_id": 78192026, "body": "So you want a pointer to the actual data instead? OpenCV can only do this on a row basis. You can only get a pointer to one row of data at a time. What&#39;s the problem with using the <code>at</code> method to get your data?"}, {"owner": {"reputation": 315, "user_id": 2955708, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/82cf9a2822aa5877e0341db1fb86f9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Kristan", "link": "https://stackoverflow.com/users/2955708/kristan"}, "edited": false, "score": 0, "creation_date": 1502375862, "post_id": 45593587, "comment_id": 78192470, "body": "Now I am confused, in the mexFunction() D[i] gets a pointer or data by mxGetPr(prhs[3])[i];? It is important because later D is an input into another function..."}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "reply_to_user": {"reputation": 315, "user_id": 2955708, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/82cf9a2822aa5877e0341db1fb86f9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Kristan", "link": "https://stackoverflow.com/users/2955708/kristan"}, "edited": false, "score": 1, "creation_date": 1502377010, "post_id": 45593587, "comment_id": 78193412, "body": "No, you&#39;re copying a value stored at the memory pointed to by <code>mxGetPr</code> into the allocated memory in <code>D</code>. I think I&#39;ll stop here. I don&#39;t know what you want and maybe someone else can help you."}, {"owner": {"reputation": 315, "user_id": 2955708, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/82cf9a2822aa5877e0341db1fb86f9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Kristan", "link": "https://stackoverflow.com/users/2955708/kristan"}, "edited": false, "score": 0, "creation_date": 1502433314, "post_id": 45593587, "comment_id": 78216114, "body": "appreciate your help now it is getting clear, hat happens when continuing someone else coding...confusion. but thanks again for your time and help!"}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "reply_to_user": {"reputation": 315, "user_id": 2955708, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/82cf9a2822aa5877e0341db1fb86f9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Kristan", "link": "https://stackoverflow.com/users/2955708/kristan"}, "edited": false, "score": 0, "creation_date": 1502433814, "post_id": 45593587, "comment_id": 78216386, "body": "You&#39;re welcome. I suppose I didn&#39;t answer your question but I guess I helped in some way."}], "tags": [], "owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "is_accepted": true, "score": 2, "last_activity_date": 1502373356, "last_edit_date": 1502373356, "creation_date": 1502289053, "answer_id": 45593587, "question_id": 45593187, "link": "https://stackoverflow.com/questions/45593187/return-value-of-mxgetpr-equivalent-looping/45593587#45593587", "title": "return value of mxGetPr() -- equivalent looping", "body": "<p><a href=\"http://www.mathworks.com/help/matlab/apiref/mxgetpr.html\" rel=\"nofollow noreferrer\"><code>mxGetPr</code></a> returns a pointer of type <code>double</code> so you can access your data using pointer arithmetic.  Also, you must remember that the pointer returned to you has the data in <strong>column-major</strong> order.  This means that you must traverse your data row-wise instead of column-wise like in traditional C order.</p>\n\n<p>In column-major order, you access location <code>(i, j)</code> with the following linear index:</p>\n\n<pre><code>j * rows + i\n</code></pre>\n\n<p><code>rows</code> is the number of rows in your matrix, with <code>i</code> and <code>j</code> being the row and column you want to access.  In row-major or C order, the way you access data is:</p>\n\n<pre><code>i * cols + j\n</code></pre>\n\n<p>Here <code>cols</code> is the number of columns in your matrix.  I'm assuming you want to lay out your data in row-major format rather than column major.  Therefore if you want to loop through the data using two <code>for</code> loops, do something like this:</p>\n\n<pre><code>double *ptr = mxGetPr(prhs[3]);\n\n// A L x N matrix - L rows, N columns\nfor (int i = 0; i &lt; L; i++)\n{\n    for (int j = 0; j &lt; N; j++)\n    {\n        D[i * N + j] = (int) ptr[j * L + i];\n    }\n}\n</code></pre>\n\n<p>Here <code>D</code> is a pointer pointing to integer data. You have to cast the data in order to do this as the pointer to the data from MATLAB is already <code>double</code>. It's nasty but that's what you have to do. You can use <code>D</code> in row-major order so it's compatible with the rest of your code.  I'm assuming that you are using MATLAB MEX as way of making pre-written C++ code to be interfaced with MATLAB.</p>\n"}], "owner": {"reputation": 315, "user_id": 2955708, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/82cf9a2822aa5877e0341db1fb86f9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Kristan", "link": "https://stackoverflow.com/users/2955708/kristan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 45593587, "answer_count": 1, "score": 0, "last_activity_date": 1502373663, "creation_date": 1502288003, "last_edit_date": 1502373663, "question_id": 45593187, "link": "https://stackoverflow.com/questions/45593187/return-value-of-mxgetpr-equivalent-looping", "title": "return value of mxGetPr() -- equivalent looping", "body": "<p>I am trying to implement a <code>mexFunction()</code> into \"pure\" C++ (OpenCV), but the returned value by <code>mxGetPr()</code> is not clear at all for me.</p>\n\n<p>The following code is aimed to be implemented:</p>\n\n<pre><code>void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])\n    {\n\n       int *D = new int[N*L];\n\n       // where N and L are dimensions (cols and rows) of matrix prhs[3] \n       // prhs[3] is a NxL matrix containing floating point value\n\n       for (int i=0; i&lt;N*L; i++)\n           D[i] = mxGetPr(prhs[3])[i];\n\n\n    }\n</code></pre>\n\n<p>My question is, what kind of value is given by <code>mxGetPr(prhs[3])[i]</code> and <code>mxGetPr(prhs[4])[i]</code>? And how is it looping through matrix?</p>\n\n<p>I tried to do something like this:</p>\n\n<pre><code>for (int i=0; i&lt;l; i++)\n   {\n       for(int j=0; j&lt;n; j++)\n       {\n           D[iCounter] = (int)d.at&lt;uchar&gt;(i,j);\n           iCounter++;\n       }\n   }\n</code></pre>\n\n<p>Looping through <code>d</code> matrix which is the same as input value <code>prhs[3]</code>, but apparently it is not correct.\nI guess the order/type of the returned value is not the same as in the original <code>mexFunction</code>.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Now I have cv::Mat d; instead of prhs[3] and try to do the same as in mexfunction.</p>\n\n<pre><code>int *D = new int[N*L];\n\nint iCounter = 0;\n\nfor (int i=0; i&lt;L; i++)\n   {\n       for(int j=0; j&lt;N; j++)\n       {\n           D[iCounter] = (int)d.at&lt;uchar&gt;(i,j);\n           iCounter++;\n       }\n   }\n</code></pre>\n\n<p>But here (int)d.at(i,j) returns value of the \"d\" matrix...where in the roiginal code a pointer was returned by mxGetPr().</p>\n"}, {"tags": ["c++", "c++11", "constants", "constexpr"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1502287936, "post_id": 45593044, "comment_id": 78145553, "body": "Please add the code that doesn&#39;t compile instead of describing it."}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1502288012, "post_id": 45593044, "comment_id": 78145621, "body": "@molbdnilo There is a link to coliru."}, {"owner": {"reputation": 273, "user_id": 2480884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba68307bc6b4c769fc2d67ce24493f49?s=128&d=identicon&r=PG", "display_name": "Geek", "link": "https://stackoverflow.com/users/2480884/geek"}, "edited": false, "score": 0, "creation_date": 1502288080, "post_id": 45593044, "comment_id": 78145681, "body": "Builds fine for me!"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1502288411, "post_id": 45593044, "comment_id": 78145961, "body": "In fact, it is the working case scenario that puzzles me. Calling a <code>constexpr</code> function with a non-<code>constexpr</code> argument should be illegal, but for some reason g++ is happy when the argument&#39;s type is <code>const int</code> :/."}, {"owner": {"reputation": 944, "user_id": 1832712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e57c7d0a8ad5f647bce1df728ed7a227?s=128&d=identicon&r=PG", "display_name": "Georg", "link": "https://stackoverflow.com/users/1832712/georg"}, "reply_to_user": {"reputation": 273, "user_id": 2480884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba68307bc6b4c769fc2d67ce24493f49?s=128&d=identicon&r=PG", "display_name": "Geek", "link": "https://stackoverflow.com/users/2480884/geek"}, "edited": false, "score": 0, "creation_date": 1502288517, "post_id": 45593044, "comment_id": 78146060, "body": "@Geek which compiler (and which version) do you use?"}, {"owner": {"reputation": 944, "user_id": 1832712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e57c7d0a8ad5f647bce1df728ed7a227?s=128&d=identicon&r=PG", "display_name": "Georg", "link": "https://stackoverflow.com/users/1832712/georg"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1502288628, "post_id": 45593044, "comment_id": 78146141, "body": "@YSC It is legal, see for example A Tour of C++ (by Bjarne Stroustrup), section 1.7."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1502288714, "post_id": 45593044, "comment_id": 78146229, "body": "@YSC I thnk <a href=\"https://stackoverflow.com/a/370337/4342498\">this</a> sheds light on it"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1502290039, "post_id": 45593044, "comment_id": 78147332, "body": "@NathanOliver I don&#39;t get it, how is it related to <code>const int</code> variables being implicitly <code>constexpr</code>? Maybe my wording was bad. The answer of Edgar on the other hand confirms what I suspected."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1502527310, "post_id": 45593720, "comment_id": 78255088, "body": "A couple years back, CWG rejected EWG&#39;s request to make <code>const float</code> usable in constant expressions, IIRC."}, {"owner": {"reputation": 1619, "user_id": 2185248, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c35571716a7a2efc6d95f996c6744f78?s=128&d=identicon&r=PG", "display_name": "r0ng", "link": "https://stackoverflow.com/users/2185248/r0ng"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1519087024, "post_id": 45593720, "comment_id": 84756477, "body": "@T.C. y CWG did that to make everyone life so hard~?"}], "tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": true, "score": 9, "last_activity_date": 1502289847, "last_edit_date": 1502289847, "creation_date": 1502289372, "answer_id": 45593720, "question_id": 45593044, "link": "https://stackoverflow.com/questions/45593044/the-value-of-a-const-variable-is-or-is-not-usable-in-a-constant-expression-depe/45593720#45593720", "title": "The value of a const variable is or is not usable in a constant expression, depending on the variable type", "body": "<p>Non-<code>constexpr</code> but <code>const</code> variables must be of integer or enumeration type for them to be usable in constant expressions. See <a href=\"http://eel.is/c++draft/expr.const#2.7\" rel=\"noreferrer\">[expr.const]/2</a>:</p>\n\n<blockquote>\n  <p>an lvalue-to-rvalue conversion unless it is applied to </p>\n  \n  <p>(2.7.1) a non-volatile glvalue of <strong>integral or enumeration type</strong>\n  that refers to a complete non-volatile const object with a preceding\n  initialization, initialized with a constant expression, or [..]</p>\n</blockquote>\n\n<p>The reasons for this limitation must be mostly historical. Floating points have been handled with care when it comes to constant expressions; think non-type template parameters. This is due to their strongly platform dependent behaviour that renders compile time calculations less mathematical than they should be. </p>\n"}, {"comments": [{"owner": {"reputation": 1617, "user_id": 2366125, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7dacf9d9610efb358d0efaceaa9956b9?s=128&d=identicon&r=PG&f=1", "display_name": "CKM", "link": "https://stackoverflow.com/users/2366125/ckm"}, "edited": false, "score": 0, "creation_date": 1601827906, "post_id": 45593724, "comment_id": 113520523, "body": "Can you comment on why <code>const double</code> or <code>const float</code> not allowed in constant expression besides last statement of Columbo?"}], "tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": false, "score": 9, "last_activity_date": 1502290735, "last_edit_date": 1502290735, "creation_date": 1502289386, "answer_id": 45593724, "question_id": 45593044, "link": "https://stackoverflow.com/questions/45593044/the-value-of-a-const-variable-is-or-is-not-usable-in-a-constant-expression-depe/45593724#45593724", "title": "The value of a const variable is or is not usable in a constant expression, depending on the variable type", "body": "<p>From <a href=\"http://en.cppreference.com/w/cpp/language/constant_expression\" rel=\"nofollow noreferrer\">constant expression</a> (Core constant expressions):</p>\n\n<blockquote>\n  <p>10) Any other lvalue-to-rvalue implicit conversion, unless the\n  lvalue...</p>\n  \n  <p>a) <strong>has integral or enumeration type</strong> and refers to a complete non-volatile \n  const object, which is initialized with a constant expression</p>\n</blockquote>\n\n<p>It means, that here:</p>\n\n<pre><code>const int test1 = 5;\nconstexpr double result1 = square_cstxpr((double)test1);\n</code></pre>\n\n<p><code>test1</code> is a constant expression, <code>square_cstxpr</code> can be called with <code>test1</code> as an argument at compile time and its result can be assigned to <em>constexpr variable</em> <code>result</code>.</p>\n\n<p>On the other hand, here:</p>\n\n<pre><code>const double test2 = 5;\nconstexpr double result2 = square_cstxpr((double)test2);\n</code></pre>\n\n<p><code>test2</code> is not a constant expression because it is not of integral or enumeration type. Consequently, <code>square_cstxpr</code> cannot be called at compile time with <code>test2</code>as an argument.</p>\n"}], "owner": {"reputation": 944, "user_id": 1832712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e57c7d0a8ad5f647bce1df728ed7a227?s=128&d=identicon&r=PG", "display_name": "Georg", "link": "https://stackoverflow.com/users/1832712/georg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24032, "favorite_count": 3, "accepted_answer_id": 45593720, "answer_count": 2, "score": 16, "last_activity_date": 1502290735, "creation_date": 1502287628, "question_id": 45593044, "link": "https://stackoverflow.com/questions/45593044/the-value-of-a-const-variable-is-or-is-not-usable-in-a-constant-expression-depe", "title": "The value of a const variable is or is not usable in a constant expression, depending on the variable type", "body": "<p>The following code is fine:</p>\n\n<pre><code>constexpr double square_cstxpr(double x) { return x * x; }\n\nint main() {\n    const int test = 5;\n    constexpr double result = square_cstxpr((double)test);\n}\n</code></pre>\n\n<p>However, if the type of <code>test</code> is changed from <code>const int</code> to <code>const double</code>, g++ gives the following error: <code>the value of 'test' is not usable in a constant expression</code>.</p>\n\n<p>See the code and output of g++ here: <a href=\"http://coliru.stacked-crooked.com/a/2fe9b176c2b23798\" rel=\"noreferrer\">http://coliru.stacked-crooked.com/a/2fe9b176c2b23798</a></p>\n\n<p>Could somebody explain that behavior?</p>\n"}, {"tags": ["c++", "while-loop"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1502287752, "post_id": 45593016, "comment_id": 78145404, "body": "You never change <code>stopnumber</code>. What did you expect?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1502287761, "post_id": 45593016, "comment_id": 78145413, "body": "It would be necessary to initialise <code>stopnumber</code> to something other than <code>&#39;|&#39;</code> to prevent undefined behaviour on the first loop iteration.  Then assigning <code>stopnumber = &#39;|&#39;</code> within the loop will stop the loop when execution reaches the <code>}</code>.   Your code is doing neither."}, {"owner": {"reputation": 3, "user_id": 7899530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11eac9a5c123de9da3a8ba51a30177b?s=128&d=identicon&r=PG&f=1", "display_name": "Ross_Barkley", "link": "https://stackoverflow.com/users/7899530/ross-barkley"}, "edited": false, "score": 0, "creation_date": 1502288166, "post_id": 45593016, "comment_id": 78145748, "body": "Do I even need stopnumber? as someone else suggested I could just use firstnumber and secondnumber as my conditions in the while loop"}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1502288380, "post_id": 45593016, "comment_id": 78145940, "body": "The problem with the input is that you can enter anything. What happens if you enter letters?"}, {"owner": {"reputation": 3, "user_id": 7899530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11eac9a5c123de9da3a8ba51a30177b?s=128&d=identicon&r=PG&f=1", "display_name": "Ross_Barkley", "link": "https://stackoverflow.com/users/7899530/ross-barkley"}, "edited": false, "score": 0, "creation_date": 1502288453, "post_id": 45593016, "comment_id": 78145998, "body": "Thanks ZDF, so I need to sanitise my inputs somehow!?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1502288485, "post_id": 45593016, "comment_id": 78146030, "body": "No, you don&#39;t need <code>stopnumber</code> if you test for some condition involving other variables or constants."}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1502288572, "post_id": 45593016, "comment_id": 78146104, "body": "@Ross_Barkley Read about <code>istream::get</code>, <code>::isdigit</code> &amp; <code>istream::putback</code>."}, {"owner": {"reputation": 3, "user_id": 7899530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11eac9a5c123de9da3a8ba51a30177b?s=128&d=identicon&r=PG&f=1", "display_name": "Ross_Barkley", "link": "https://stackoverflow.com/users/7899530/ross-barkley"}, "edited": false, "score": 0, "creation_date": 1502288694, "post_id": 45593016, "comment_id": 78146210, "body": "I have been reading through the book ZDF and haven&#39;t come across that yet. I assume to do this task, I shouldn&#39;t have to use things that haven&#39;t been taught yet?  Peter, I have tried  while(firstnumber!=&#39;|&#39; &amp;&amp; secondnumber!=&#39;|&#39;){  but it didnt work"}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1502289189, "post_id": 45593016, "comment_id": 78146635, "body": "<code>&#39;|&#39;</code> is not a number. So trying to read it as a number will fail."}], "answers": [{"tags": [], "owner": {"reputation": 531, "user_id": 4024800, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9337e41ca3a0a77776c3f3b8feac0398?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Gibson", "link": "https://stackoverflow.com/users/4024800/paul-gibson"}, "is_accepted": false, "score": 0, "last_activity_date": 1502287738, "creation_date": 1502287738, "answer_id": 45593088, "question_id": 45593016, "link": "https://stackoverflow.com/questions/45593016/how-to-stop-a-while-loop-in-c/45593088#45593088", "title": "How to stop a while loop in c++", "body": "<p>Your loop is testing <code>stopnumber</code> which is never set.  If you set <code>stopnumber</code> to either <code>firstnumber</code> or <code>secondnumber</code> then perhaps you can get your logic to work but there is a step missing as it is.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5758355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5e5d16beb360f21ddb16ff807d27fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Starmage", "link": "https://stackoverflow.com/users/5758355/starmage"}, "is_accepted": false, "score": 0, "last_activity_date": 1502291612, "last_edit_date": 1502291612, "creation_date": 1502289137, "answer_id": 45593627, "question_id": 45593016, "link": "https://stackoverflow.com/questions/45593016/how-to-stop-a-while-loop-in-c/45593627#45593627", "title": "How to stop a while loop in c++", "body": "<p>This depends on whether you need to exit directly after you receive the '|' character or whether you mind running through the rest of the loop first before exiting it......</p>\n\n<p>Personally I'd want to exit straight after receiving the '|' so would follow the basic idea of....</p>\n\n<pre><code>int a,b;\n\nwhile(){\n  read your values a,b in\n  if (a='|' || b='|'){exit()};\n  print your values\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1502289607, "post_id": 45593706, "comment_id": 78146991, "body": "Any non-digit character will break the loop, not only <code>&#39;|&#39;</code>."}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1502365449, "post_id": 45593706, "comment_id": 78183717, "body": "You will have first to decide what you&#39;ll do with invalid input. You have two choices: 1. Display an error message and exit the program (simpler). 2. Ignore the invalid input (harder)."}], "tags": [], "owner": {"reputation": 3, "user_id": 7899530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11eac9a5c123de9da3a8ba51a30177b?s=128&d=identicon&r=PG&f=1", "display_name": "Ross_Barkley", "link": "https://stackoverflow.com/users/7899530/ross-barkley"}, "is_accepted": false, "score": 0, "last_activity_date": 1502289339, "creation_date": 1502289339, "answer_id": 45593706, "question_id": 45593016, "link": "https://stackoverflow.com/questions/45593016/how-to-stop-a-while-loop-in-c/45593706#45593706", "title": "How to stop a while loop in c++", "body": "<p>Ok, I think I have found my answer</p>\n\n<p>I tried putting my cin in the while loop as such</p>\n\n<pre><code>int firstnumber;\nint secondnumber;\n\n  while (cin &gt;&gt; firstnumber &gt;&gt; secondnumber)\n</code></pre>\n\n<p>And it worked! Thanks everyone for your help</p>\n"}, {"comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1502291737, "post_id": 45593767, "comment_id": 78148681, "body": "streams support a <code>.peek()</code> member, which can help avoid the read/check/put-back cycle."}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1502292458, "post_id": 45593767, "comment_id": 78149272, "body": "@JerryCoffin The character must be removed from stream."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1502292577, "post_id": 45593767, "comment_id": 78149357, "body": "Eventually, perhaps--but if it&#39;s a digit, you don&#39;t want to remove it right then. And in this case, the apparent intent is that if it&#39;s a <code>|</code>, the program will immediately exit, in which case it doesn&#39;t matter whether you remove it from the stream or not."}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1502293614, "post_id": 45593767, "comment_id": 78150101, "body": "@JerryCoffin I don&#39;t see how <code>peek</code> simplifies the code - I might be wrong."}], "tags": [], "owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "is_accepted": false, "score": 1, "last_activity_date": 1502290061, "last_edit_date": 1502290061, "creation_date": 1502289524, "answer_id": 45593767, "question_id": 45593016, "link": "https://stackoverflow.com/questions/45593016/how-to-stop-a-while-loop-in-c/45593767#45593767", "title": "How to stop a while loop in c++", "body": "<p>This is how your loop should look like:</p>\n\n<ol>\n<li>Read a character (<code>std::cin::get</code>).</li>\n<li>If successful and your character is the stop symbol, break the loop.</li>\n<li>If your character is not a digit (<code>::isdigit</code>), continue looping.</li>\n<li>If your character is a digit, put it back(<code>std::cin::putback</code>).</li>\n<li>Read two integers.</li>\n<li>If successful, display them, if not, clear the stream (<code>std::cin::clear</code>).</li>\n</ol>\n\n<p>You will have to patiently try to understand what <code>get</code>, <code>putback</code> &amp; <code>isdigit</code> are doing.</p>\n\n<p><strong>[EDIT]</strong>\n<a href=\"http://ideone.com/iDJ5Ct\" rel=\"nofollow noreferrer\">Run it</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cctype&gt;\n\nint main()\n{\n  char c;\n  while ( std::cin.get( c ) &amp;&amp; c != '|' )\n  {\n    if ( !std::isdigit( c ) )\n      continue;\n\n    std::cin.putback( c );\n\n    int i, j;\n    if ( std::cin &gt;&gt; i &gt;&gt; j )\n      std::cout &lt;&lt; i &lt;&lt; ' ' &lt;&lt; j &lt;&lt; std::endl;\n    else\n      std::cin.clear();\n  }\n\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1502296045, "post_id": 45595665, "comment_id": 78151583, "body": "What if you enter <code>abc 123</code>?"}, {"owner": {"reputation": 11, "user_id": 6771898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f1a9a98a34f84865bb102d8fbba88f0?s=128&d=identicon&r=PG&f=1", "display_name": "bpieszko", "link": "https://stackoverflow.com/users/6771898/bpieszko"}, "reply_to_user": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1502296310, "post_id": 45595665, "comment_id": 78151751, "body": "@ZDF Why would you like to enter abc 123? Ross_Barkley asked to make app that reads 2 integers or ends when &#39;|&#39; is written."}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1502296494, "post_id": 45595665, "comment_id": 78151863, "body": "A user types anything she/he likes. What happens if you enter <code>||</code>?"}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1502297456, "post_id": 45595665, "comment_id": 78152394, "body": "1. The new code will break the loop for any non-digit character (<i>&quot;Exit the program when a terminating &#39;|&#39; is entered&quot;</i>). 2. <code>stoi</code> will throw if it is not able to convert <code>s</code>, so there is no need for <code>isNumber</code>."}], "tags": [], "owner": {"reputation": 11, "user_id": 6771898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f1a9a98a34f84865bb102d8fbba88f0?s=128&d=identicon&r=PG&f=1", "display_name": "bpieszko", "link": "https://stackoverflow.com/users/6771898/bpieszko"}, "is_accepted": false, "score": 0, "last_activity_date": 1502297176, "last_edit_date": 1502297176, "creation_date": 1502294731, "answer_id": 45595665, "question_id": 45593016, "link": "https://stackoverflow.com/questions/45593016/how-to-stop-a-while-loop-in-c/45595665#45595665", "title": "How to stop a while loop in c++", "body": "<p>std::stoi(std::string) - returns int from std::string</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nbool isNumber(std::string &amp;str) {\n    for (auto i : str) {\n        if (i &lt; '0' || i &gt; '9') return false;\n    return true;\n}\n\nint main () {\n    int a, b;\n    std::string s;\n\n    while (true) {\n        std::cin &gt;&gt; s;\n        if (s == \"|\" || !isNumber(s)) break;\n        a = std::stoi(s);\n\n        std::cin &gt;&gt; s;\n        if (s == \"|\" || !isNumber(s)) break;\n        b = std::stoi(s);\n\n        std::cout &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7899530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11eac9a5c123de9da3a8ba51a30177b?s=128&d=identicon&r=PG&f=1", "display_name": "Ross_Barkley", "link": "https://stackoverflow.com/users/7899530/ross-barkley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4203, "favorite_count": 0, "answer_count": 5, "score": -5, "last_activity_date": 1502297176, "creation_date": 1502287556, "last_edit_date": 1502289038, "question_id": 45593016, "link": "https://stackoverflow.com/questions/45593016/how-to-stop-a-while-loop-in-c", "title": "How to stop a while loop in c++", "body": "<p>\"Write a program that consists of a while-loop that (each time around the loop) reads in two ints and then prints them.\nExit the program when a terminating '|' is entered.\"</p>\n\n<p>my attempt</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\nusing namespace std;\n\n\n\nint main(){\n\n    int firstnumber;\n    int secondnumber;\n    int stopnumber;\n\n\n    while(stopnumber!='|'){\n\n        cout &lt;&lt;\"Please enter an integer, followed by another integer: \\n\";\n        cin &gt;&gt; firstnumber &gt;&gt; secondnumber;\n        cout &lt;&lt;\"\\n\" &lt;&lt;  firstnumber &lt;&lt;\"   \"&lt;&lt;  secondnumber&lt;&lt; \"    \\n\";\n\n    }\n\nreturn 0;\n}\n</code></pre>\n\n<p>the program takes 2 number and prints them, but when i enter '|' , it goes in infinite loop. How to stop the program when i enter '|'</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8440212"}, "edited": false, "score": 0, "creation_date": 1502288093, "post_id": 45593060, "comment_id": 78145690, "body": "Of course! I should&#39;ve noted that from this resource on <a href=\"http://www.cplusplus.com/reference/algorithm/transform/\" rel=\"nofollow noreferrer\">std::transform</a> but I missed it. Thank you!!"}], "tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": true, "score": 3, "last_activity_date": 1502296645, "last_edit_date": 1502296645, "creation_date": 1502287680, "answer_id": 45593060, "question_id": 45592999, "link": "https://stackoverflow.com/questions/45592999/flipping-a-map-using-transform-receiving-error-type-int-unexpected/45593060#45593060", "title": "Flipping a map using transform, receiving error &quot;type int unexpected&quot;", "body": "<p>You should write <code>flip_pair</code> instead of <code>flip_pair&lt;int, double&gt;</code>:</p>\n\n<pre><code>std::transform(s.begin(), s.end(),\n    std::inserter(dst, dst.begin()), flip_pair);\n</code></pre>\n\n<p><code>flip_pair&lt;int, double&gt;</code> syntax might be used when templates are involved, but in your example they aren't.</p>\n\n<p>Note, that another option (if you need <code>flip_pair</code> functionality only in a single place) is to simply use <em>lambda</em> instead:</p>\n\n<pre><code>std::transform(std::cbegin(s), std::cend(s), \n    std::inserter(dst, std::begin(dst)), [](const auto&amp; e) {\n        return std::make_pair(e.second, e.first);\n    });\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8440212"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 45593060, "answer_count": 1, "score": 0, "last_activity_date": 1502296645, "creation_date": 1502287513, "question_id": 45592999, "link": "https://stackoverflow.com/questions/45592999/flipping-a-map-using-transform-receiving-error-type-int-unexpected", "title": "Flipping a map using transform, receiving error &quot;type int unexpected&quot;", "body": "<p>I have the following code, which includes flipping a map I took from this <a href=\"https://stackoverflow.com/questions/5056645/sorting-stdmap-using-value?newreg=d6b84480dbd6421d927652470b0e0659\">question</a>. The compiler returns an error for the last line of code, saying the 'int' type is unexpected in the argument 'flip_pair&lt;int,double&gt;'. I'm confused about this - the type seems correct for the flip_pair function, so I feel like I must be missing something more fundamental. Thank you for any advice.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n\nstd::pair&lt;double,int&gt; flip_pair(const std::pair&lt;int, double&gt; &amp;p){\n    return std::pair&lt;double,int&gt;(p.second,p.first);\n}\n\nint main(){\n\n    std::map&lt;int, double&gt; s;\n    s[1] = 5.5; s[2] = 3.2;\n\n    std::multimap&lt;double,int&gt; dst;\n    std::transform(s.begin(), s.end(),\n        std::inserter(dst, dst.begin()),flip_pair&lt;int, double&gt;);\n\n}\n</code></pre>\n"}, {"tags": ["c++", "ubuntu", "qt-creator"], "answers": [{"tags": [], "owner": {"reputation": 627, "user_id": 7463034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/81d5b1067d7ba2b07119879253a92cde?s=128&d=identicon&r=PG&f=1", "display_name": "Mikola", "link": "https://stackoverflow.com/users/7463034/mikola"}, "is_accepted": false, "score": 0, "last_activity_date": 1502289175, "creation_date": 1502289175, "answer_id": 45593646, "question_id": 45592995, "link": "https://stackoverflow.com/questions/45592995/qwebengineview-component-doesnt-present-in-my-system/45593646#45593646", "title": "qwebengineview component doesn&#39;t present in my system", "body": "<p>It seems it could be fixed by installing libqt5webkit5-dev</p>\n"}], "owner": {"reputation": 627, "user_id": 7463034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/81d5b1067d7ba2b07119879253a92cde?s=128&d=identicon&r=PG&f=1", "display_name": "Mikola", "link": "https://stackoverflow.com/users/7463034/mikola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502289175, "creation_date": 1502287501, "question_id": 45592995, "link": "https://stackoverflow.com/questions/45592995/qwebengineview-component-doesnt-present-in-my-system", "title": "qwebengineview component doesn&#39;t present in my system", "body": "<p>I have installed qt creator 3.5.1, QT version 5.5.1. I have found that my qt doesn't support qwebengineview. Could you explain why and how can I add this support?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1502287310, "post_id": 45592808, "comment_id": 78145030, "body": "You&#39;ve found a really complicated way to say <code>*const_cast&lt;int*&gt;(ap)=27;</code> which is perfectly valid as <code>a</code> isn&#39;t <code>const</code>. If <code>a</code> was <code>const</code> then both of these would be UB."}, {"owner": {"reputation": 3, "user_id": 8440061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bddda44e6a9f2047da09192b8022e216?s=128&d=identicon&r=PG&f=1", "display_name": "zhangshuai", "link": "https://stackoverflow.com/users/8440061/zhangshuai"}, "edited": false, "score": 0, "creation_date": 1502287845, "post_id": 45592808, "comment_id": 78145478, "body": "yeah\uff0cmy code just remove the const feature like the const_cast .Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1502287428, "post_id": 45592904, "comment_id": 78145131, "body": "But it would still compile if you changed to <code>const int</code>, won&#39;t it? The use of <code>value_type</code> discards the <code>const</code>."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1502287672, "post_id": 45592904, "comment_id": 78145341, "body": "Yes, but then the code would not have well-defined behavior because it is illegal to modify a <code>const</code> object. It might be stored in memory that is not writable, for example. Or multiple <code>const</code> objects with the same value might be stored in the same place!"}, {"owner": {"reputation": 96, "user_id": 2496851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccab7863ea2bc40e02e9cc9969bd2450?s=128&d=identicon&r=PG", "display_name": "kleszcz", "link": "https://stackoverflow.com/users/2496851/kleszcz"}, "edited": false, "score": 0, "creation_date": 1502287678, "post_id": 45592904, "comment_id": 78145349, "body": "Yes, it will compile with <code>const int</code> as shown <a href=\"https://godbolt.org/g/gQcCXp\" rel=\"nofollow noreferrer\">here</a>. It will fail if they will try passsing const object to the <code>iterator_traits</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1502287771, "post_id": 45592904, "comment_id": 78145421, "body": "@DavidSchwartz I think that&#39;s the point of the question. Why does this enable violating const-correctness?"}, {"owner": {"reputation": 3, "user_id": 8440061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bddda44e6a9f2047da09192b8022e216?s=128&d=identicon&r=PG&f=1", "display_name": "zhangshuai", "link": "https://stackoverflow.com/users/8440061/zhangshuai"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1502288244, "post_id": 45592904, "comment_id": 78145822, "body": "@Barmar,Yes,the point I want to talk  is why this can   enable violating const-correctness .And it is just like the const_cast ,remove the const feature."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 3, "user_id": 8440061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bddda44e6a9f2047da09192b8022e216?s=128&d=identicon&r=PG&f=1", "display_name": "zhangshuai", "link": "https://stackoverflow.com/users/8440061/zhangshuai"}, "edited": false, "score": 1, "creation_date": 1502288357, "post_id": 45592904, "comment_id": 78145918, "body": "@zhangshaui Because <code>value_type</code> doesn&#39;t include the <code>const</code> attribute. <code>const</code> is an attribute of a location, not a value."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1502287233, "creation_date": 1502287233, "answer_id": 45592904, "question_id": 45592808, "link": "https://stackoverflow.com/questions/45592808/chage-the-value-of-a-variable-using-a-const-type-by-the-way-of-construct-isn/45592904#45592904", "title": "chage the value of a variable using a const type * by the way of construct, isn&#39;t it illegal\uff1f", "body": "<p>No.</p>\n\n<p>It is only illegal to modify a <code>const</code> object. Since <code>a</code> is not a <code>const</code> object, it is perfectly legal, and well-defined, to modify its value.</p>\n\n<p>But the code could crash if you change the code to:</p>\n\n<pre><code>const int a=15;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": true, "score": 0, "last_activity_date": 1502289016, "creation_date": 1502289016, "answer_id": 45593570, "question_id": 45592808, "link": "https://stackoverflow.com/questions/45592808/chage-the-value-of-a-variable-using-a-const-type-by-the-way-of-construct-isn/45593570#45593570", "title": "chage the value of a variable using a const type * by the way of construct, isn&#39;t it illegal\uff1f", "body": "<p>Well,</p>\n\n<p>it is legal since internally <code>construct</code> use <code>placement-new</code>.</p>\n\n<p>So what happens is:\n<code>new((void *)ap) int(27);</code> and since the memory pointed by <code>ap</code> is allocated and not <code>const</code>, placement-new works just fine.</p>\n\n<p>It's the same as doing <code>new((void *)&amp;a) int(27);</code></p>\n\n<hr>\n\n<p>That said, let's make <code>a</code> <code>const</code>: <code>const int a=15</code> \nNow the following code will compile too</p>\n\n<pre><code> const int a=15;\n int *aa = (int*)&amp;a;\n *aa=27;\n</code></pre>\n\n<p>because that cast will get rid of the type safety and force the conversion. It' UB obviously. The same way the cast in the <code>placement-new</code> will compile and be UB.</p>\n\n<p>It's your responsibility to make sure you don't use <code>const</code> memory in placement-new expressions.</p>\n"}], "owner": {"reputation": 3, "user_id": 8440061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bddda44e6a9f2047da09192b8022e216?s=128&d=identicon&r=PG&f=1", "display_name": "zhangshuai", "link": "https://stackoverflow.com/users/8440061/zhangshuai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 45593570, "answer_count": 2, "score": 0, "last_activity_date": 1502289016, "creation_date": 1502286998, "question_id": 45592808, "link": "https://stackoverflow.com/questions/45592808/chage-the-value-of-a-variable-using-a-const-type-by-the-way-of-construct-isn", "title": "chage the value of a variable using a const type * by the way of construct, isn&#39;t it illegal\uff1f", "body": "<p>code here\uff1a</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iterator&gt;\nusing namespace std;\nint main() {\n    int a=15;\n    const int*ap=&amp;a;\n    allocator&lt;iterator_traits&lt;decltype(ap)&gt;::value_type&gt;aallo;\n    cout&lt;&lt;\"before construct:\"&lt;&lt;a&lt;&lt;endl;   //15\n    aallo.construct(ap,27);               //isn't illegal?\n    cout&lt;&lt;\"after construct:\"&lt;&lt;a&lt;&lt;endl;    //27\n}\n</code></pre>\n\n<p>here ,we can change the value of a from its pointer  ap,but the ap is a const int*,it must not be modified by ap.but here it works using allocator.construct,isn't it illegal\uff1f \nfresh man asking,thank you!</p>\n"}, {"tags": ["c++", "c++11", "function-pointers", "overload-resolution", "argument-dependent-lookup"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 1635525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7debd92e5cac197b8ab9502d5cf98ca8?s=128&d=identicon&r=PG", "display_name": "salmin", "link": "https://stackoverflow.com/users/1635525/salmin"}, "edited": false, "score": 0, "creation_date": 1502289221, "post_id": 45592748, "comment_id": 78146661, "body": "Thank you! Regarding use2: is there a way in use2&lt;T&gt; to obtain a function pointer that contains address of the exact same overload of f() that is resolved in use1&lt;T&gt;?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 165, "user_id": 1635525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7debd92e5cac197b8ab9502d5cf98ca8?s=128&d=identicon&r=PG", "display_name": "salmin", "link": "https://stackoverflow.com/users/1635525/salmin"}, "edited": false, "score": 0, "creation_date": 1502289381, "post_id": 45592748, "comment_id": 78146794, "body": "I can&#39;t think of any way to &quot;dependify&quot; a name. The standard only envisions the second lookup phase when the name is used in a straight function call, <code>name(some_args)</code>, and not other cases where overload resolution may need to be performed."}], "tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": true, "score": 0, "last_activity_date": 1502287571, "last_edit_date": 1502287571, "creation_date": 1502286883, "answer_id": 45592748, "question_id": 45592603, "link": "https://stackoverflow.com/questions/45592603/overload-resolution-name-lookup-and-function-pointers/45592748#45592748", "title": "Overload resolution, name lookup and function pointers", "body": "<p>Two-phase name lookup. At the point where <code>use1</code> is defined, three overloads of <code>f</code> are visible via normal lookup. At the point of instantiation, additional overloads may be found - but only by argument-dependent lookup. <code>Test2</code> is in global namespace, so <code>f(Test2)</code> is found by ADL; whereas <code>string</code> is in namespace <code>std</code>, and so <code>f(string)</code> (which is, obviously, not in namespace <code>std</code>) is not found by ADL. <code>double</code> has no associated namespaces, and so ADL doesn't kick in at all.</p>\n\n<p>In <code>use2</code>, <code>f</code> is not a dependent name, and so the second-phase lookup is not performed at all - only overloads visible at the point of definition are considered.</p>\n"}], "owner": {"reputation": 165, "user_id": 1635525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7debd92e5cac197b8ab9502d5cf98ca8?s=128&d=identicon&r=PG", "display_name": "salmin", "link": "https://stackoverflow.com/users/1635525/salmin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 45592748, "answer_count": 1, "score": 0, "last_activity_date": 1502287571, "creation_date": 1502286510, "question_id": 45592603, "link": "https://stackoverflow.com/questions/45592603/overload-resolution-name-lookup-and-function-pointers", "title": "Overload resolution, name lookup and function pointers", "body": "<p>I have a case where lookup and overload resolution behaves differently:</p>\n\n<ul>\n<li>for user-defined class <em>vs</em> built-in types <em>vs</em> std::string</li>\n<li>for direct call <em>vs</em> function pointer call</li>\n</ul>\n\n<p>I cannot figure what exact parts of the standard justify these differences.</p>\n\n<p><strong>Consider the following C++11 code:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nstruct Test1 {};\nstruct Test2 {};\n\ntemplate&lt;typename T&gt;\nint f(T t) { return 0; }\n\nint f(Test1 t) { return 10; }\nint f(int y) { return 20; }\n\ntemplate&lt;typename T&gt;\nint use1() { return f(T()); }\n\ntemplate&lt;typename T&gt;\nint use2() { auto fp = static_cast&lt;int(*)(T)&gt;(&amp;f); return (*fp)(T()); }\n\nint f(Test2 t) { return 30; }\nint f(string s) { return 40; }\nint f(double y) { return 50; }\n\nint main() {\n    cout &lt;&lt; \"use1&lt;float&gt;:  \" &lt;&lt; use1&lt;float&gt;()  &lt;&lt; endl;\n    cout &lt;&lt; \"use1&lt;Test1&gt;:  \" &lt;&lt; use1&lt;Test1&gt;()  &lt;&lt; endl;\n    cout &lt;&lt; \"use1&lt;int&gt;:    \" &lt;&lt; use1&lt;int&gt;()    &lt;&lt; endl;\n    cout &lt;&lt; \"use1&lt;Test2&gt;:  \" &lt;&lt; use1&lt;Test2&gt;()  &lt;&lt; endl;\n    cout &lt;&lt; \"use1&lt;string&gt;: \" &lt;&lt; use1&lt;string&gt;() &lt;&lt; endl;\n    cout &lt;&lt; \"use1&lt;double&gt;: \" &lt;&lt; use1&lt;double&gt;() &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"use2&lt;float&gt;:  \" &lt;&lt; use2&lt;float&gt;()  &lt;&lt; endl;\n    cout &lt;&lt; \"use2&lt;Test1&gt;:  \" &lt;&lt; use2&lt;Test1&gt;()  &lt;&lt; endl;\n    cout &lt;&lt; \"use2&lt;int&gt;:    \" &lt;&lt; use2&lt;int&gt;()    &lt;&lt; endl;\n    cout &lt;&lt; \"use2&lt;Test2&gt;:  \" &lt;&lt; use2&lt;Test2&gt;()  &lt;&lt; endl;\n    cout &lt;&lt; \"use2&lt;string&gt;: \" &lt;&lt; use2&lt;string&gt;() &lt;&lt; endl;\n    cout &lt;&lt; \"use2&lt;double&gt;: \" &lt;&lt; use2&lt;double&gt;() &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output is (same with g++ 6.3 and clang++5.0.0 trunk):</strong></p>\n\n<pre><code>use1&lt;float&gt;:  0\nuse1&lt;Test1&gt;:  10\nuse1&lt;int&gt;:    20\nuse1&lt;Test2&gt;:  30\nuse1&lt;string&gt;: 0\nuse1&lt;double&gt;: 0\n\nuse2&lt;float&gt;:  0\nuse2&lt;Test1&gt;:  10\nuse2&lt;int&gt;:    20\nuse2&lt;Test2&gt;:  0\nuse2&lt;string&gt;: 0\nuse2&lt;double&gt;: 0\n</code></pre>\n\n<p><strong>Questions:</strong></p>\n\n<ol>\n<li>Why <code>use1&lt;string&gt;</code> is different from <code>use1&lt;Test2&gt;</code> ? Both types are declared \"at the top\", both f() overloads are declared at the bottom.</li>\n<li>Why <code>use1&lt;Test2&gt;</code> is different from  <code>use1&lt;double&gt;</code>? Corresponding f() overloads are on adjacent lines, is there anything special in treatment of built-in types?</li>\n<li>Why <code>use1&lt;Test2&gt;</code> is different from <code>use2&lt;Test2&gt;</code>? The type of a pointer to function in use2 seems to match the calling context in use1.</li>\n</ol>\n"}, {"tags": ["c++", "visual-studio-2015", "uwp"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 2152870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/403b9f8f099cabc0e70af1bb9c4e7774?s=128&d=identicon&r=PG", "display_name": "ajso", "link": "https://stackoverflow.com/users/2152870/ajso"}, "edited": false, "score": 0, "creation_date": 1502352998, "post_id": 45605078, "comment_id": 78174803, "body": "Unfortunately my explanation may not be clear enough. By include I meant a collection of files external to the project being included when packaging. Sunius&#39;s answer lead me to the following question which is basically what I was looking for (although not the way to achieve it the way I would prefer):  <a href=\"https://stackoverflow.com/questions/28610893/how-do-i-include-content-files-in-subdirectories-in-windows-8-1-phone\" title=\"how do i include content files in subdirectories in windows 8 1 phone\">stackoverflow.com/questions/28610893/&hellip;</a>"}], "tags": [], "owner": {"reputation": 25248, "user_id": 7254781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FsIFV.jpg?s=128&g=1", "display_name": "Nico Zhu - MSFT", "link": "https://stackoverflow.com/users/7254781/nico-zhu-msft"}, "is_accepted": false, "score": 0, "last_activity_date": 1502342596, "creation_date": 1502342596, "answer_id": 45605078, "question_id": 45592565, "link": "https://stackoverflow.com/questions/45592565/including-external-folder-in-uwp-visual-studio-project/45605078#45605078", "title": "Including external folder in UWP visual studio project", "body": "<blockquote>\n  <p>I have a UWP project in Visual Studio (2015, c++) and I want to include an external folder tree of assets (e.g. images) so that when I run it in the emulator those files are available (similarly, when I build a final package I want the files with the package). The files aren't fixed (i.e. I may add/remove files at a later time)</p>\n</blockquote>\n\n<p>From your description, I think you want to mount an external folder for your uwp app. However, not all path can be accessed directly  under current file access rules. </p>\n\n<blockquote>\n  <p><a href=\"https://blogs.msdn.microsoft.com/wsdevsol/2012/12/04/skip-the-path-stick-to-the-storagefile/\" rel=\"nofollow noreferrer\">Access to other locations</a> is available only through a broker process. This broker process runs with the user\u2019s full privileges, and it can use these privileges on the app\u2019s behalf for locations the app has requested via capabilities, locations requested by the user via file pickers, etc. The StorageItem encapsulates this brokerage procedure so the app doesn\u2019t need to deal with it directly.</p>\n</blockquote>\n\n<p>As Rob said that you can access to other locations with the user\u2019s full privileges. For more you could refer to <a href=\"https://docs.microsoft.com/en-us/windows/uwp/files/file-access-permissions\" rel=\"nofollow noreferrer\">File access permissions</a> official documentation.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 2152870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/403b9f8f099cabc0e70af1bb9c4e7774?s=128&d=identicon&r=PG", "display_name": "ajso", "link": "https://stackoverflow.com/users/2152870/ajso"}, "edited": false, "score": 0, "creation_date": 1502352537, "post_id": 45605168, "comment_id": 78174503, "body": "Unfortunately adding individual files would be unmanageable. However your answer did give me a vector for a better search and I found this which is very similar to my question (but for 8.1 instead of 10):  <a href=\"https://stackoverflow.com/questions/28610893/how-do-i-include-content-files-in-subdirectories-in-windows-8-1-phone\" title=\"how do i include content files in subdirectories in windows 8 1 phone\">stackoverflow.com/questions/28610893/&hellip;</a>  Unfortunately it looks like building w/ makeappx is my only option (and I am still unclear if that will even work w/ the emulator).  Thank-you though."}], "tags": [], "owner": {"reputation": 2227, "user_id": 1289007, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c09a0c0e9587d8bc02473752e16e0490?s=128&d=identicon&r=PG", "display_name": "Sunius", "link": "https://stackoverflow.com/users/1289007/sunius"}, "is_accepted": false, "score": 1, "last_activity_date": 1502343078, "creation_date": 1502343078, "answer_id": 45605168, "question_id": 45592565, "link": "https://stackoverflow.com/questions/45592565/including-external-folder-in-uwp-visual-studio-project/45605168#45605168", "title": "Including external folder in UWP visual studio project", "body": "<p>Use <code>AppxPackagePayload</code> element in your .vcxproj file:</p>\n\n<pre><code>&lt;AppxPackagePayload Include=\"PathToYourImage.jpg\"&gt;\n  &lt;TargetPath&gt;SubfolderInPackage\\FileName.jpg&lt;/TargetPath&gt;\n&lt;/AppxPackagePayload&gt;\n</code></pre>\n\n<p>Unfortunately, you'll need to reference every file your want to copy separately. I don't know if there is a way to do it for a directory.</p>\n"}], "owner": {"reputation": 73, "user_id": 2152870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/403b9f8f099cabc0e70af1bb9c4e7774?s=128&d=identicon&r=PG", "display_name": "ajso", "link": "https://stackoverflow.com/users/2152870/ajso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1502343078, "creation_date": 1502286425, "question_id": 45592565, "link": "https://stackoverflow.com/questions/45592565/including-external-folder-in-uwp-visual-studio-project", "title": "Including external folder in UWP visual studio project", "body": "<p>I have a UWP project in Visual Studio (2015, c++) and I want to include an <strong>external</strong> folder tree of assets (e.g. images) so that when I run it in the emulator those files are available (similarly, when I build a final package I want the files with the package). The files aren't fixed (i.e. I may add/remove files at a later time)</p>\n\n<p>In a regular desktop application I would simply use a post-build step and do an xcopy on the folder into the target directory. This, however, does not work for the UWP build. When I run in the emulator nothing is there (or even in the target directory).</p>\n\n<p><strong>Is there some way to add a build step to copy files (retaining directory structure) or even better a way to add an external folder reference to the project?</strong></p>\n\n<p>I know I am not the only one that does this. Most results in searches are irrelevant, others aren't dynamic, or rely on the files to be within the project's directory tree. </p>\n"}, {"tags": ["javascript", "c++", "json", "node.js"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1502286318, "post_id": 45592401, "comment_id": 78144184, "body": "Why do you think using C++ would be a solution here? And what are you using to run this Javascript? Node? Please tag the environment. There may be a way to handle this without any C++ code. Why do you need to convert JSON back and forth? For formatting? Please describe the <i>actual</i> problem since this looks like an XY problem."}, {"owner": {"reputation": 21, "user_id": 4662292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3127f270ce8f9a9c8e5473dbfbdf7876?s=128&d=identicon&r=PG&f=1", "display_name": "majuss", "link": "https://stackoverflow.com/users/4662292/majuss"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1502300035, "post_id": 45592401, "comment_id": 78153830, "body": "Sorry for being so unprecise at the first place. So the thing is: I get this huge tree back from a transactions which I run on a database. Maybe I could write it in some kind of controlled stream but I think the stringify is the problem."}], "owner": {"reputation": 21, "user_id": 4662292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3127f270ce8f9a9c8e5473dbfbdf7876?s=128&d=identicon&r=PG&f=1", "display_name": "majuss", "link": "https://stackoverflow.com/users/4662292/majuss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502299951, "creation_date": 1502286050, "last_edit_date": 1502299951, "question_id": 45592401, "link": "https://stackoverflow.com/questions/45592401/how-to-save-giant-json-inside-javascript-with-c", "title": "How to save giant JSON inside javascript with C++", "body": "<p>I have javascript code that is writing a giant hierarchic tree into a javascript object. The RAM is not the problem, even with --max_old_space_size set to 128 GB it still crashes. So I want to find a way to write this object to the disc with C++ inside javascript, or export the variable somehow to save it with C++ inside another program.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>db._txn({\n    collections: {\n        read:['rank_extract']\n    }}, convert, (status, headers, body) =&gt; {\n        body = JSON.parse(body);\n        fs.writeFileSync('treeee.json', JSON.stringify(body.result, false, 2));\n        console.log(\"Finished tagging weinstein parasites/freeliving on full tree\");\n    });\n</code></pre>\n\n<p>I didn't find anything that suits my question. I have little to no experience in C++.</p>\n"}, {"tags": ["c++", "itk"], "answers": [{"comments": [{"owner": {"reputation": 370, "user_id": 8294110, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3g1c.jpg?s=128&g=1", "display_name": "avazula", "link": "https://stackoverflow.com/users/8294110/avazula"}, "edited": false, "score": 2, "creation_date": 1502287075, "post_id": 45592481, "comment_id": 78144853, "body": "Doesn&#39;t this example compute the median filter? Because I am just looking for the median value, I do not want to apply any smoothing filter. Sorry if my question is stupid, this problem really puzzles me."}], "tags": [], "owner": {"reputation": 16850, "user_id": 172642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2a18a04255beea3beff827eecedd64?s=128&d=identicon&r=PG", "display_name": "gavinb", "link": "https://stackoverflow.com/users/172642/gavinb"}, "is_accepted": false, "score": 0, "last_activity_date": 1502286236, "creation_date": 1502286236, "answer_id": 45592481, "question_id": 45592342, "link": "https://stackoverflow.com/questions/45592342/compute-the-median-value-of-an-image-using-itk/45592481#45592481", "title": "Compute the median value of an image using ITK", "body": "<p>Sure, there's an example of computing the median value of an image included in ITK's Examples:</p>\n\n<ul>\n<li><a href=\"https://itk.org/ITKExamples/src/Filtering/Smoothing/ApplyMedianFilter/Documentation.html\" rel=\"nofollow noreferrer\">https://itk.org/ITKExamples/src/Filtering/Smoothing/ApplyMedianFilter/Documentation.html</a></li>\n</ul>\n\n<p>You can apply this filter first to compute the median, then use this as an input to the thresholds for the Canny filter.</p>\n"}, {"comments": [{"owner": {"reputation": 370, "user_id": 8294110, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3g1c.jpg?s=128&g=1", "display_name": "avazula", "link": "https://stackoverflow.com/users/8294110/avazula"}, "edited": false, "score": 0, "creation_date": 1502354465, "post_id": 45593644, "comment_id": 78175753, "body": "Your answer is quite helpful to me, thank you. However, there is still sth I can&#39;t get: what&#39;s the purpose of a label image? I have seen this doc before you mentioned it but I gave it up because I couldn&#39;t figure out what was a label for, since I would like to use this filter on the whole image and not just a tiny region of it."}, {"owner": {"reputation": 1281, "user_id": 961076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/089be30fbe69314d7bc8b7a807326ae2?s=128&d=identicon&r=PG", "display_name": "blowekamp", "link": "https://stackoverflow.com/users/961076/blowekamp"}, "reply_to_user": {"reputation": 370, "user_id": 8294110, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3g1c.jpg?s=128&g=1", "display_name": "avazula", "link": "https://stackoverflow.com/users/8294110/avazula"}, "edited": false, "score": 0, "creation_date": 1502721030, "post_id": 45593644, "comment_id": 78311315, "body": "I have updated my answer to clarify what a label image is and how we are using it."}, {"owner": {"reputation": 370, "user_id": 8294110, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3g1c.jpg?s=128&g=1", "display_name": "avazula", "link": "https://stackoverflow.com/users/8294110/avazula"}, "edited": false, "score": 0, "creation_date": 1502876657, "post_id": 45593644, "comment_id": 78378360, "body": "I solved it with the histogram computation, but I tried your answer too and this works fine. Thanks."}], "tags": [], "owner": {"reputation": 1281, "user_id": 961076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/089be30fbe69314d7bc8b7a807326ae2?s=128&d=identicon&r=PG", "display_name": "blowekamp", "link": "https://stackoverflow.com/users/961076/blowekamp"}, "is_accepted": true, "score": 1, "last_activity_date": 1502720998, "last_edit_date": 1502720998, "creation_date": 1502289171, "answer_id": 45593644, "question_id": 45592342, "link": "https://stackoverflow.com/questions/45592342/compute-the-median-value-of-an-image-using-itk/45593644#45593644", "title": "Compute the median value of an image using ITK", "body": "<p>I believe you want to compute some basic image intensity statistics over the whole image. Please look at the <em>itk::StatisticsImageFilter</em>:</p>\n\n<p><a href=\"https://itk.org/Doxygen/html/classitk_1_1StatisticsImageFilter.html\" rel=\"nofollow noreferrer\">https://itk.org/Doxygen/html/classitk_1_1StatisticsImageFilter.html</a></p>\n\n<p>This is close, it computes the mean and the standard deviation, but not the median.</p>\n\n<p>The statistics filter which operator on label <em>do</em> include the median. The filter is call *itk::LabelStatisticsImageFilter:</p>\n\n<p><a href=\"https://itk.org/Doxygen/html/classitk_1_1LabelStatisticsImageFilter.html\" rel=\"nofollow noreferrer\">https://itk.org/Doxygen/html/classitk_1_1LabelStatisticsImageFilter.html</a></p>\n\n<p>The LabelStatisticsImageFilter is typically run on a label image. A label image is just an integer image which uses an integer value to represent a segmented object.</p>\n\n<p>In this case we will create a label image which represents the entire image, so that we run the statistics on the entire image. If you copy the image, and use Image::Fill, to make a label image of all 1s you can get the statistics you want.</p>\n\n<p>Here is some SimpleITK Python code to demonstrate the idea:</p>\n\n<pre><code>In [1]: import SimpleITK as sitk\n\nIn [2]: img = sitk.Image([10]*2, sitk.sitkUInt8)\n\nIn [3]: img = sitk.AdditiveGaussianNoise(img)\n\nIn [4]: stats = sitk.LabelStatisticsImageFilter()\n\nIn [5]: stats.UseHistogramsOn()\n\nIn [6]: onesImage = (img == img)\n\nIn [7]: stats.Execute(img+1, onesImage)\n\nIn [8]: stats.GetMean(1)\nOut[8]: 1.43\n\nIn [9]: stats.GetMedian(1)\nOut[9]: 1.0\n</code></pre>\n"}], "owner": {"reputation": 370, "user_id": 8294110, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3g1c.jpg?s=128&g=1", "display_name": "avazula", "link": "https://stackoverflow.com/users/8294110/avazula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 596, "favorite_count": 0, "accepted_answer_id": 45593644, "answer_count": 2, "score": 1, "last_activity_date": 1502720998, "creation_date": 1502285882, "question_id": 45592342, "link": "https://stackoverflow.com/questions/45592342/compute-the-median-value-of-an-image-using-itk", "title": "Compute the median value of an image using ITK", "body": "<p>I am new to picture processing and especially in using ITK. I would like to compute the Canny filter of a Dicom image (CT scans) and for this, I need to tune the filter with an upper &amp; a lower threshold value. I read <a href=\"http://www.pyimagesearch.com/2015/04/06/zero-parameter-automatic-canny-edge-detection-with-python-and-opencv/\" rel=\"nofollow noreferrer\">there</a> that it is possible to compute the threshold parameters with the median value of the image and statistical assumptions, and that it gives good results in most cases. </p>\n\n<p>The problem is that I struggle with the calculation of this median value. I have tried to obtain it from the histogram computation of my image but this expands my code a lot and I find it difficult for anybody to easily understand what I've done in this part of the project.</p>\n\n<p>Is there any other way to compute the median value of an image in ITK than by computing its histogram? </p>\n\n<p>Thanks in advance for your help. </p>\n"}, {"tags": ["c++", "nullptr", "pc-lint"], "comments": [{"owner": {"reputation": 1377, "user_id": 616363, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba52fe6209405eee462a3f059316b5ba?s=128&d=identicon&r=PG", "display_name": "Alek86", "link": "https://stackoverflow.com/users/616363/alek86"}, "edited": false, "score": 0, "creation_date": 1502285964, "post_id": 45592279, "comment_id": 78143873, "body": "Yes, map::find does return an object. And I was surprised that lint generated me that error. But I need to do something about it."}], "owner": {"reputation": 1377, "user_id": 616363, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba52fe6209405eee462a3f059316b5ba?s=128&d=identicon&r=PG", "display_name": "Alek86", "link": "https://stackoverflow.com/users/616363/alek86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 320, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1502285737, "creation_date": 1502285737, "question_id": 45592279, "link": "https://stackoverflow.com/questions/45592279/pc-lint-stdmap-and-error-613-possible-use-of-null-ptr", "title": "PC-Lint, std::map and error 613 (possible use of null ptr)", "body": "<p>I tried to use PC-Lint with an option +fnr. It makes lint suspect that  all pointer-like returns from functions could be nullptr.</p>\n\n<p>But for some functions I know they won't return nullptr in any case. To tell PC-Lint that it can ignore nullptr check for them I can use</p>\n\n<pre><code>-sem(func, @p != 0)\n</code></pre>\n\n<p>But there is another problem: PC-Lint cannot correctly check situation when standard containers return iterators.</p>\n\n<pre><code>// using +fnr in .lnt file\n//lint -sem(f1, @p != 0)\n//lint -sem(std::map::find, @p != 0)\n#include&lt;map&gt;\n\nint* f1();\n\nint main()\n{\n    int* p1 = f1();\n    *p1 = 2;            // -sem worked\n\n    std::map&lt;int, int&gt; m;\n    std::map&lt;int, int&gt;::iterator it = m.find(1);\n    if (it != m.end())\n        it-&gt;second = 12;// even -sem doesn't work\n}\n</code></pre>\n\n<p>It generates</p>\n\n<pre><code>C:\\lint_test\\f3.cpp(18): Issue 613: (Warning -- Possible use of null pointer 'unknown-name' in left argument to operator '-&gt;' [Reference: file C:\\lint_test\\f3.cpp: line 18])\n</code></pre>\n\n<p>If PC-Lint is not smart enough to see that I check the iterator before using I would like at least turn off this check for std::map::find. But I can't, -sem doesn't work</p>\n\n<p>Does anyone know how to address this problem?</p>\n"}, {"tags": ["c++", "static-analysis", "cppcheck", "clang-static-analyzer"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1502285967, "post_id": 45592264, "comment_id": 78143876, "body": "<code>TemplateTest</code> doesn&#39;t even have a default constructor, so your code doesn&#39;t compile."}, {"owner": {"reputation": 213, "user_id": 1282104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4f0ff56e16e1e854578f7bf67e2b007?s=128&d=identicon&r=PG", "display_name": "cierech", "link": "https://stackoverflow.com/users/1282104/cierech"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1502298652, "post_id": 45592264, "comment_id": 78153063, "body": "Sorry, modified code to compile."}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 1, "creation_date": 1502313634, "post_id": 45592264, "comment_id": 78160956, "body": "Unitialized at what point in time?  After the constructor runs and before anything else happens to the object?   If there are multiple constructors, and some initialize one slot, and some initialize other slots, but all slots are covered by the set of constructors, is that &quot;uninitialized&quot; by your definition? Or do you want to know if a slot is uninitiaized after the constructor is called from a specific site?"}, {"owner": {"reputation": 213, "user_id": 1282104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4f0ff56e16e1e854578f7bf67e2b007?s=128&d=identicon&r=PG", "display_name": "cierech", "link": "https://stackoverflow.com/users/1282104/cierech"}, "edited": false, "score": 0, "creation_date": 1502330715, "post_id": 45592264, "comment_id": 78165906, "body": "I guess what is problematic, and I would like to find out by static analysis, is the situation that the object construction by using one of the constructors provided does not initialize the value_ member. Does that make sense?"}, {"owner": {"reputation": 213, "user_id": 1282104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4f0ff56e16e1e854578f7bf67e2b007?s=128&d=identicon&r=PG", "display_name": "cierech", "link": "https://stackoverflow.com/users/1282104/cierech"}, "edited": false, "score": 0, "creation_date": 1502332227, "post_id": 45592264, "comment_id": 78166309, "body": "So in my example, by using the default constructor of TemplateTest in:      TemplateTest&lt;ViewMode&gt; viewMode2_; TemplateTest::value_ does not get set which is something I was hoping to catch with static analysis."}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1502385141, "post_id": 45592264, "comment_id": 78198901, "body": "So what you want to know is if every constructor initializes every member.  What if the constructor passes a reference to a member, to a function defined as external?  That function may or may not modify the member.  Count that as &quot;initialized&quot;  (optimistic) or &quot;uninitialized&quot; (conservative)?  What if it invokes a method supplied by the templated class (essentially the same problem)?"}, {"owner": {"reputation": 213, "user_id": 1282104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4f0ff56e16e1e854578f7bf67e2b007?s=128&d=identicon&r=PG", "display_name": "cierech", "link": "https://stackoverflow.com/users/1282104/cierech"}, "edited": false, "score": 0, "creation_date": 1502387943, "post_id": 45592264, "comment_id": 78200608, "body": "Right, in that case I would expect no warning, since the analyzer can&#39;t be sure. But in the simplified case I supplied, that&#39;s not the case right? The analyzer does know.  So is the answer that this is by design, and no analyzer can generate a warning in this situation?"}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1502396672, "post_id": 45592264, "comment_id": 78205336, "body": "I suppose you want the answer off-the-shelf.   I don&#39;t have that, but can point to a tool that I think could give you the answer with some configuration effort."}, {"owner": {"reputation": 213, "user_id": 1282104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4f0ff56e16e1e854578f7bf67e2b007?s=128&d=identicon&r=PG", "display_name": "cierech", "link": "https://stackoverflow.com/users/1282104/cierech"}, "edited": false, "score": 0, "creation_date": 1502397898, "post_id": 45592264, "comment_id": 78205914, "body": "I tried cppcheck and clang with all warnings turned off, and they didnt report this error... So my original question was is there a static analyzer that would detect this, or is this case ambiguous and is just something analyzers dont look for."}, {"owner": {"reputation": 213, "user_id": 1282104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4f0ff56e16e1e854578f7bf67e2b007?s=128&d=identicon&r=PG", "display_name": "cierech", "link": "https://stackoverflow.com/users/1282104/cierech"}, "edited": false, "score": 0, "creation_date": 1502413158, "post_id": 45592264, "comment_id": 78210539, "body": "I meant all warnings options turned on of course :)"}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1502451705, "post_id": 45592264, "comment_id": 78227626, "body": "If the off-the-shelf tools don&#39;t look for this, then they don&#39;t look for it.  In that case you may want to turn to a customizable tool, from which this information can be extracted.  I don&#39;t know if Clang can be bent to do this. A tool I do know can be customized for this: see <a href=\"https://stackoverflow.com/a/8818844/120163\">stackoverflow.com/a/8818844/120163</a>"}], "answers": [{"comments": [{"owner": {"reputation": 213, "user_id": 1282104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4f0ff56e16e1e854578f7bf67e2b007?s=128&d=identicon&r=PG", "display_name": "cierech", "link": "https://stackoverflow.com/users/1282104/cierech"}, "edited": false, "score": 0, "creation_date": 1502579634, "post_id": 45635958, "comment_id": 78269588, "body": "Follow up question:  Any idea, why this doesn&#39;t raise the unitialized value warning <code>template&lt;typename T, bool C = std::is_copy_constructible&lt;T&gt;::value&gt; class Observable {      public:       Observable() {}      private:       T value_;  };  class Bah {  public:   Bah() {};     private:      Observable&lt;int&gt; tValue_;  };</code>  But when I remove the second template parameter (bool), it does?"}, {"owner": {"reputation": 1190, "user_id": 4070000, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4c671fa7002be8d180675875a8c9148e?s=128&d=identicon&r=PG&f=1", "display_name": "orbitcowboy", "link": "https://stackoverflow.com/users/4070000/orbitcowboy"}, "reply_to_user": {"reputation": 213, "user_id": 1282104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4f0ff56e16e1e854578f7bf67e2b007?s=128&d=identicon&r=PG", "display_name": "cierech", "link": "https://stackoverflow.com/users/1282104/cierech"}, "edited": false, "score": 0, "creation_date": 1502615319, "post_id": 45635958, "comment_id": 78275510, "body": "It seems that you have found a case, where Cppcheck is currently blind. I have created a ticket about this test case on our bugtracker (<a href=\"http://trac.cppcheck.net/ticket/8162#ticket\" rel=\"nofollow noreferrer\">trac.cppcheck.net/ticket/8162#ticket</a>). Many thanks for evaluating Cppcheck!"}], "tags": [], "owner": {"reputation": 1190, "user_id": 4070000, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4c671fa7002be8d180675875a8c9148e?s=128&d=identicon&r=PG&f=1", "display_name": "orbitcowboy", "link": "https://stackoverflow.com/users/4070000/orbitcowboy"}, "is_accepted": false, "score": 2, "last_activity_date": 1502456679, "creation_date": 1502456679, "answer_id": 45635958, "question_id": 45592264, "link": "https://stackoverflow.com/questions/45592264/c-static-analysis-template-classes/45635958#45635958", "title": "C++ static analysis, template classes", "body": "<p>Thank you for evaluating Cppcheck. A warning is given for the second example, in case you add the --inconclusive flag, for example:</p>\n\n<pre><code>class Foo\n{\nprivate:\n    int m_nValue;\npublic:\n    Foo() {};\n    explicit Foo(int value) : m_nValue(value) {}\n    int GetValue() const\n    {\n        return m_nValue;\n    }\n};\n\nclass Bar\n{\npublic:\n    Bar() {}\n\n    static void DoSomething() {\n        Foo foo;\n    }\n};\n</code></pre>\n\n<p>The output from Cppcheck</p>\n\n<pre><code>$ cppcheck --enable=all --inconclusive uninitmembervar.cpp \n[uninitmembervar.cpp:6]: (warning, inconclusive) Member variable 'Foo::m_nValue' is not initialized in the constructor.\n</code></pre>\n"}], "owner": {"reputation": 213, "user_id": 1282104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4f0ff56e16e1e854578f7bf67e2b007?s=128&d=identicon&r=PG", "display_name": "cierech", "link": "https://stackoverflow.com/users/1282104/cierech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1502456679, "creation_date": 1502285686, "last_edit_date": 1502389987, "question_id": 45592264, "link": "https://stackoverflow.com/questions/45592264/c-static-analysis-template-classes", "title": "C++ static analysis, template classes", "body": "<p>I need a static analyzer that will find uninitialized variables members/variables... of a templated class type.</p>\n\n<p>Can any analyzer do this? I tried clang/cppcheck and a couple of others with no luck.</p>\n\n<p>Here is my test code:</p>\n\n<pre><code>enum class ViewMode\n{\n One   = 1,\n Two     = 2,\n Three  = 3,\n Four     = 4\n};\n\nclass TestClass {\n public:\n   TestClass() {}\n};\n\ntemplate&lt;typename T, bool C = std::is_copy_constructible&lt;T&gt;::value&gt;\nclass TemplateTest\n{\n public:\n\n  TemplateTest() {}\n\n  TemplateTest(const T&amp; value)\n   : value_(value)\n  {}\n\n  TemplateTest(const TemplateTest&amp;) = delete;\n\n  TemplateTest(TemplateTest&lt;T, C&gt;&amp;&amp; rhs)\n      : value_(std::move(rhs.value_))\n  {}\n\n  TemplateTest(T&amp;&amp; value)\n      : value_(std::move(value))\n  {}\n private:\n  T value_;\n\n};\n\nclass StaticAnalysisTest {\n\n public:\n  StaticAnalysisTest() {}\n\n  void DoSomething() {\n\n  }\n\n private:\n  ViewMode viewMode_;     //this uninitialized warning is found\n  TemplateTest&lt;ViewMode&gt; viewMode2_; //this one is not\n};\n</code></pre>\n\n<p>I have further distilled the problem to:</p>\n\n<pre><code>class Foo\n{\n private:\n  int m_nValue;\n public:\n  Foo() {};\n  Foo(int value) : m_nValue(value) {}\n  int GetValue() { return m_nValue; }\n};\n\nclass Bar\n{\n public:\n  Bar(){}\n\n  void DoSomething() {\n    Foo foo;\n  }\n};\n</code></pre>\n\n<p>This does not generate an unitialized variable warning, but when I comment out:</p>\n\n<pre><code> //Foo(int value) : m_nValue(value) {}\n</code></pre>\n\n<p>it does</p>\n"}, {"tags": ["c++", "image", "qt"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1502285777, "post_id": 45592050, "comment_id": 78143712, "body": "If QT decompresses the image then 31349 * 26982 * 32 / 8 = 3,383,434,872 bytes approx 3,226 Gb"}, {"owner": {"reputation": 705, "user_id": 4849439, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/049ab7c04b283ef0c73cba0046427335?s=128&d=identicon&r=PG&f=1", "display_name": "JLev", "link": "https://stackoverflow.com/users/4849439/jlev"}, "edited": false, "score": 0, "creation_date": 1502285837, "post_id": 45592050, "comment_id": 78143768, "body": "Damn it, thank you"}, {"owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1502289473, "post_id": 45592050, "comment_id": 78146879, "body": "@Ron No, according to the accepted answer, the size limit for images in Qt is 32767x32767, which is larger than the OP&#39;s image."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "reply_to_user": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "edited": false, "score": 0, "creation_date": 1502292361, "post_id": 45592050, "comment_id": 78149212, "body": "@DonaldDuck It is the image dimension times the bytes per pixel that makes up the total bytes allowed. Not just the dimension."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1502296518, "post_id": 45592050, "comment_id": 78151884, "body": "3G pixmap in label? I know the modern displays have insane resolutions, but stil... something like 512x512 should be enough for icon at the moment (a bit of sarcasm, I guess the &quot;label&quot; was just debugging quick-hack and the image is not to end as &quot;icon&quot; in the end... when I was for example working on games and we had something like that as background under level, with 1:1 scale (i.e. only small part is visible), usually we used some kind of tiling, storing several tiles separately and dynamically loading only the nearest of them, similar to how web maps works today in aerial view))."}], "owner": {"reputation": 705, "user_id": 4849439, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/049ab7c04b283ef0c73cba0046427335?s=128&d=identicon&r=PG&f=1", "display_name": "JLev", "link": "https://stackoverflow.com/users/4849439/jlev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "closed_date": 1502292917, "answer_count": 0, "score": 0, "last_activity_date": 1502289826, "creation_date": 1502285173, "last_edit_date": 1502289826, "question_id": 45592050, "link": "https://stackoverflow.com/questions/45592050/loading-large-jpg-images-in-qt-fails", "closed_reason": "Duplicate", "title": "Loading large JPG images in qt fails", "body": "<p>Trying to load a 105 Mb (31349X26982 pixels) image to a QImage or QPixmap using this code :</p>\n\n<p><code>QImage m(\"/home/user/Desktop/a.jpg\");</code></p>\n\n<p>and</p>\n\n<p><code>QPixmap m(\"/home/user/Desktop/a.jpg\");</code></p>\n\n<p>both fails to load the image with no debugging information in Qt Creator.</p>\n\n<p>No warnings / errors appear. When trying to show it in a label, the label is empty.   </p>\n\n<p>Using Qt 5.7 on ubuntu 16.04, with qt creator 4.0.2 and gcc 7.1</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["c++", "loops", "arduino", "nodemcu", "arduino-esp8266"], "comments": [{"owner": {"reputation": 3080, "user_id": 7590993, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10154373026397157/picture?type=large", "display_name": "Hariom Singh", "link": "https://stackoverflow.com/users/7590993/hariom-singh"}, "edited": false, "score": 0, "creation_date": 1502285045, "post_id": 45591955, "comment_id": 78143061, "body": "Use break .. to come out of the loop"}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 1, "creation_date": 1502285228, "post_id": 45591955, "comment_id": 78143233, "body": "Why not just not use a loop, and make it a handler you call regularly from the main loop?"}, {"owner": {"reputation": 329, "user_id": 2969793, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/776e074e09dca71e29c2ca031f9af360?s=128&d=identicon&r=PG&f=1", "display_name": "Ramki", "link": "https://stackoverflow.com/users/2969793/ramki"}, "edited": false, "score": 0, "creation_date": 1502285656, "post_id": 45591955, "comment_id": 78143596, "body": "I think I get what you guys are saying. I will check tonight and reply back. Thank you all."}], "answers": [{"tags": [], "owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1502285321, "creation_date": 1502285321, "answer_id": 45592113, "question_id": 45591955, "link": "https://stackoverflow.com/questions/45591955/infinite-loop-outside-of-the-loop-function/45592113#45592113", "title": "Infinite loop outside of the loop() function", "body": "<p>dont block the main loop instead let the loop to call the handler every time the function is called...</p>\n\n<pre><code>void setup()\n{\n    //setup required parameters/handlers\n}\n\nvoid loop()\n{\n    // a piece of code that calls the handler\n    if(handler())\n    {\n        // TODDY\n    }\n}\n\nbool handler()\n{\n    //intended infinite loop\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6233, "user_id": 5741073, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/1uZeL.jpg?s=128&g=1", "display_name": "TomServo", "link": "https://stackoverflow.com/users/5741073/tomservo"}, "is_accepted": false, "score": 2, "last_activity_date": 1502285335, "creation_date": 1502285335, "answer_id": 45592119, "question_id": 45591955, "link": "https://stackoverflow.com/questions/45591955/infinite-loop-outside-of-the-loop-function/45592119#45592119", "title": "Infinite loop outside of the loop() function", "body": "<p>You should have only one \"infinite\" loop in your sketch, and it's already constructed for you, it's <code>loop()</code>.  Every other loop -- or any function call, for that matter -- that you construct <strong>must</strong> have some way to exit and get back to <code>loop()</code>, preferably quickly.  You could exit with a <code>break</code> or any other mechanism that returns control to <code>loop()</code>.  But you must return...</p>\n"}], "owner": {"reputation": 329, "user_id": 2969793, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/776e074e09dca71e29c2ca031f9af360?s=128&d=identicon&r=PG&f=1", "display_name": "Ramki", "link": "https://stackoverflow.com/users/2969793/ramki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1502520978, "creation_date": 1502284957, "last_edit_date": 1502520978, "question_id": 45591955, "link": "https://stackoverflow.com/questions/45591955/infinite-loop-outside-of-the-loop-function", "title": "Infinite loop outside of the loop() function", "body": "<p>This is the pseudo code of my Arduino sketch for NodeMCU. It has an handler that updates the LED strip continuously.</p>\n\n<pre><code>void setup() {\n\n}\n\nvoid loop() {\n\n}\n\nbool handler() {\n//intended infinite loop\n}\n</code></pre>\n\n<p>The problem is that the infinite loop is blocking the main <code>loop()</code>. Is there a way that I can execute the infinite loop without blocking the main <code>loop()</code> function.</p>\n\n<p>I am sorry my question is vague, I am only a beginner in Arduino programming.</p>\n"}, {"tags": ["c++", "opencv", "computer-vision"], "comments": [{"owner": {"reputation": 172, "user_id": 3119363, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/450e08780d2b8ef1d83d1444a0ba2cad?s=128&d=identicon&r=PG&f=1", "display_name": "alasin", "link": "https://stackoverflow.com/users/3119363/alasin"}, "edited": false, "score": 0, "creation_date": 1502287883, "post_id": 45591888, "comment_id": 78145509, "body": "Are the images from the camera just rotated? Or there&#39;s translation too?"}, {"owner": {"reputation": 33, "user_id": 6480598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fff525f7b1d10a928006ac32012bcb2e?s=128&d=identicon&r=PG&f=1", "display_name": "open cl", "link": "https://stackoverflow.com/users/6480598/open-cl"}, "reply_to_user": {"reputation": 172, "user_id": 3119363, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/450e08780d2b8ef1d83d1444a0ba2cad?s=128&d=identicon&r=PG&f=1", "display_name": "alasin", "link": "https://stackoverflow.com/users/3119363/alasin"}, "edited": false, "score": 0, "creation_date": 1502291075, "post_id": 45591888, "comment_id": 78148215, "body": "I am considering translation also, see my final ray plane intersection equation."}], "owner": {"reputation": 33, "user_id": 6480598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fff525f7b1d10a928006ac32012bcb2e?s=128&d=identicon&r=PG&f=1", "display_name": "open cl", "link": "https://stackoverflow.com/users/6480598/open-cl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 607, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1502284794, "creation_date": 1502284794, "question_id": 45591888, "link": "https://stackoverflow.com/questions/45591888/reverse-projection-from-2d-to-3d-i-have-intrinsic-parameter-of-camera-but-no-ex", "title": "Reverse projection from 2D to 3D, I have intrinsic parameter of camera but no extrinsic parameter. I do have multiple images form same camera", "body": "<p>I am trying to project pixels to lines which originate from the camera and travel trough the image plane.I have camera center C, direction vector for each line originating from the camera center v and the plane equation\na<em>x+b</em>y+c<em>z+d=0. \nNow I can write\na</em>(C_x+v_x<em>t) + b</em>(C_y+v_y<em>t) + c</em>(C_z+v_z*t) + d = 0. \nNow solving t and use it to find the 3D position.\n- here since I do not have extrinsic parameter, I am doing the calculation with an estimating using different values- The below is my algorithm-\nHere,\n    O_c = focal point = camera center, the camera opening through which light enters.</p>\n\n<pre><code>F- focal length. The length between optical center and the center of the image plane( image plane is the plane where we are getting 2d version of the image)\nC_x,C_y= centre of image plane.\nR = rotation matrix.\nn = rays of back projections\nX,Y,Z= coordinates of points P\nWe are assuming Z= 1, this plane.\n(u,v) )= pixel points on image plane.\n</code></pre>\n\n<p>From which we will do back projection.\nNow we are assuming the center of the crucible as universal plane.\nHere, we are trying to find the ray \u2013 plane intersection.\nWe have, pixel points of image plane.\nNow, we are doing back projections in order to find the rays intersecting the plane ,\nAt first we find a vector from the focal point through the pixel,</p>\n\n<p>Now, when we are doing back projection , focus on the line connecting  and (u,v).</p>\n\n<p>So , in case of (u,v) point t,\n The distance between Fc and the center of image plane (principle point)-Fx</p>\n\n<pre><code>n(0) = (u - C_x) / F.\nn(1) = (v - C_y) / F;\nn(2) = 1.0;\n</code></pre>\n\n<p>Now , we are representing unit vectors in terms of universal plane,( center of crucible)</p>\n\n<p>n = transpose(R) * n, which is the coordinate transformation from the pinhole camera coordinate system to the crucible centered one.\nHere, I am using different values of R ( different angle of roll, pitch , yaw )- mostly changing the value of pitch, keeping yaw small and roll 0;</p>\n\n<p>Then, we are using the ray plane intersection, in order to find the t,</p>\n\n<p>Now,\nHere we are assuming the plane Z = 1,\n      O_c + t * n = (X,Y,Z)\nEqualizing the third coordinate we will get t, and after that the coordinates (X Y) are calculated and will be used later to find the circle center.</p>\n\n<p>My query is-</p>\n\n<ol>\n<li>Is my algorithm correct?</li>\n<li>Is there any way to do this conversion (2D to 3D) and get external parameter of camera using same image of a camera?\nIn my case Z is not equal to 0;</li>\n</ol>\n\n<p>I have read all the answers posted here and really stuck in this problem for a very long time, any kind of suggestion would be highly appreciated.</p>\n"}, {"tags": ["c++", "destructor", "placement-new"], "comments": [{"owner": {"reputation": 2375, "user_id": 2757079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C6Hsu.jpg?s=128&g=1", "display_name": "Muhammad Ahmad", "link": "https://stackoverflow.com/users/2757079/muhammad-ahmad"}, "edited": false, "score": 7, "creation_date": 1502282812, "post_id": 45591084, "comment_id": 78141157, "body": "Please show your code instead of explaining it."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1502283103, "post_id": 45591084, "comment_id": 78141414, "body": "It&#39;s not quite clear what exactly you are doing, but generally, you can skip running the destructor if and only if the object is trivially destructible."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1502283162, "post_id": 45591084, "comment_id": 78141466, "body": "@BaummitAugen which in this case, the optimizer will do it anyway, so one should not really think about it"}], "answers": [{"comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 2, "creation_date": 1502284981, "post_id": 45591239, "comment_id": 78143008, "body": "Not only can <code>std::is_trivially_destructible&lt;&gt;</code> be used to determine if it&#39;s fine. You REALLY should be using it in a <code>static_assert()</code> to ensure someone doesn&#39;t add a <code>string</code> to the struct in 6 months, or something silly like that."}, {"owner": {"reputation": 79, "user_id": 7242858, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c0eed4732c3726e94ff08d4b7b64d112?s=128&d=identicon&r=PG&f=1", "display_name": "user7242858", "link": "https://stackoverflow.com/users/7242858/user7242858"}, "edited": false, "score": 0, "creation_date": 1502289454, "post_id": 45591239, "comment_id": 78146864, "body": "What if struct or any member of it has explicitly defined destructor but with empty body?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 79, "user_id": 7242858, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c0eed4732c3726e94ff08d4b7b64d112?s=128&d=identicon&r=PG&f=1", "display_name": "user7242858", "link": "https://stackoverflow.com/users/7242858/user7242858"}, "edited": false, "score": 1, "creation_date": 1502294237, "post_id": 45591239, "comment_id": 78150510, "body": "@user7242858 Any explicitly provided destructor is <i>not</i> considered trivial, even if its body is empty."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1502283146, "creation_date": 1502283146, "answer_id": 45591239, "question_id": 45591084, "link": "https://stackoverflow.com/questions/45591084/placement-new-and-destructor/45591239#45591239", "title": "Placement new and destructor", "body": "<p>You can skip a call to destructor if it is <em>trivial</em>:</p>\n\n<blockquote>\n  <p><a href=\"http://en.cppreference.com/w/cpp/language/destructor\" rel=\"noreferrer\">A trivial destructor is a destructor that performs no action. Objects with trivial destructors don't require a delete-expression and may be disposed of by simply deallocating their storage.</a> </p>\n</blockquote>\n\n<p>You can tell if the type is trivially destructible using <a href=\"http://en.cppreference.com/w/cpp/types/is_destructible\" rel=\"noreferrer\"><code>std::is_trivially_destructible&lt;Type&gt;::value</code></a> expression. If you compile with optimization on, most optimizers will figure this out for you, so there will be no performance hit for writing a loop that calls trivial destructors for all objects in the block.</p>\n"}], "owner": {"reputation": 79, "user_id": 7242858, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c0eed4732c3726e94ff08d4b7b64d112?s=128&d=identicon&r=PG&f=1", "display_name": "user7242858", "link": "https://stackoverflow.com/users/7242858/user7242858"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 0, "accepted_answer_id": 45591239, "answer_count": 1, "score": 3, "last_activity_date": 1502283146, "creation_date": 1502282741, "question_id": 45591084, "link": "https://stackoverflow.com/questions/45591084/placement-new-and-destructor", "title": "Placement new and destructor", "body": "<p>I have simple struct that has fixed size and contains build-in types. I create memory pool by allocating chunk of memory and I split this memory to blocks of size of my struct. Then it uses placement new to call constructor on particular memory block to initialize some members with default values. Then I would like to release whole memory chunk by calling delete[] operator. Can I safely skip explicit destructor call for each object initialized with placement new? I don't locate any resources inside constructor or inside constructors of other member fields of that class. I want just release whole memory chunk.</p>\n"}]