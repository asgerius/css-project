[{"tags": ["c++", "opengl", "crash", "nvidia", "vbo"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6702577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ea839072bc0d451c6f1a6cc1920751?s=128&d=identicon&r=PG&f=1", "display_name": "Gonnen Daube", "link": "https://stackoverflow.com/users/6702577/gonnen-daube"}, "edited": false, "score": 0, "creation_date": 1470873984, "post_id": 38885317, "comment_id": 65131370, "body": "the first bug was not actually a bug, when pasting to the website i accidentally changed the 1 to 0. just so you won&#39;t think i&#39;m stupid XD"}, {"owner": {"reputation": 924, "user_id": 5069540, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gijl_3OcPeM/AAAAAAAAAAI/AAAAAAAAAAA/5D0FtItLzPc/photo.jpg?sz=128", "display_name": "Harish", "link": "https://stackoverflow.com/users/5069540/harish"}, "edited": false, "score": 0, "creation_date": 1470874058, "post_id": 38885317, "comment_id": 65131393, "body": "would incorrect <code>size</code> in <code>glVertexAttribPointer()</code> cause <code>Access violation reading</code> error?"}, {"owner": {"reputation": 11, "user_id": 6702577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ea839072bc0d451c6f1a6cc1920751?s=128&d=identicon&r=PG&f=1", "display_name": "Gonnen Daube", "link": "https://stackoverflow.com/users/6702577/gonnen-daube"}, "edited": false, "score": 0, "creation_date": 1470874246, "post_id": 38885317, "comment_id": 65131444, "body": "I don&#39;t know, I&#39;m currently checking if it matters."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 924, "user_id": 5069540, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gijl_3OcPeM/AAAAAAAAAAI/AAAAAAAAAAA/5D0FtItLzPc/photo.jpg?sz=128", "display_name": "Harish", "link": "https://stackoverflow.com/users/5069540/harish"}, "edited": false, "score": 0, "creation_date": 1470874688, "post_id": 38885317, "comment_id": 65131556, "body": "@Harish: &quot;<i>would incorrect size in glVertexAttribPointer() cause Access violation reading error?</i>&quot; Not directly. In the event of most OpenGL errors, no state is changed. So it is as if it hadn&#39;t been called it at all. Which means it&#39;s the same problem, just done a different way."}, {"owner": {"reputation": 924, "user_id": 5069540, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gijl_3OcPeM/AAAAAAAAAAI/AAAAAAAAAAA/5D0FtItLzPc/photo.jpg?sz=128", "display_name": "Harish", "link": "https://stackoverflow.com/users/5069540/harish"}, "edited": false, "score": 0, "creation_date": 1470874896, "post_id": 38885317, "comment_id": 65131604, "body": "I thought <code>glDrawArraysInstanced()</code> would cause the error as it tried to read beyond his second buffer."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 924, "user_id": 5069540, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gijl_3OcPeM/AAAAAAAAAAI/AAAAAAAAAAA/5D0FtItLzPc/photo.jpg?sz=128", "display_name": "Harish", "link": "https://stackoverflow.com/users/5069540/harish"}, "edited": false, "score": 0, "creation_date": 1470875103, "post_id": 38885317, "comment_id": 65131651, "body": "@Harish: It&#39;s causing a crash because there&#39;s no buffer attached to an enabled array, so it tries to use a NULL CPU memory pointer."}, {"owner": {"reputation": 924, "user_id": 5069540, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gijl_3OcPeM/AAAAAAAAAAI/AAAAAAAAAAA/5D0FtItLzPc/photo.jpg?sz=128", "display_name": "Harish", "link": "https://stackoverflow.com/users/5069540/harish"}, "edited": false, "score": 0, "creation_date": 1470875780, "post_id": 38885317, "comment_id": 65131794, "body": "@NicolBolas Doesn&#39;t glBufferData() with NULL pointer create a new storage buffer of said size but not care about values? I don&#39;t think it is accessing a null pointer there."}, {"owner": {"reputation": 924, "user_id": 5069540, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gijl_3OcPeM/AAAAAAAAAAI/AAAAAAAAAAA/5D0FtItLzPc/photo.jpg?sz=128", "display_name": "Harish", "link": "https://stackoverflow.com/users/5069540/harish"}, "reply_to_user": {"reputation": 11, "user_id": 6702577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ea839072bc0d451c6f1a6cc1920751?s=128&d=identicon&r=PG&f=1", "display_name": "Gonnen Daube", "link": "https://stackoverflow.com/users/6702577/gonnen-daube"}, "edited": false, "score": 0, "creation_date": 1470876302, "post_id": 38885317, "comment_id": 65131889, "body": "@NicolBolas I checked both conditions and incorrect <code>size</code> produces slightly different error <code>(nvoglv64.dll) in Sample.exe: An unhandled exception</code> and exceeding the buffer size produces the error in question <code>(nvoglv64.dll) in Sample.exe: Access violation reading</code>. While both answers are correct I believe mine is a more direct answer and yours prevents a follow up question from @GonnenDaube. Thanks its clearer now."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 924, "user_id": 5069540, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gijl_3OcPeM/AAAAAAAAAAI/AAAAAAAAAAA/5D0FtItLzPc/photo.jpg?sz=128", "display_name": "Harish", "link": "https://stackoverflow.com/users/5069540/harish"}, "edited": false, "score": 0, "creation_date": 1470879080, "post_id": 38885317, "comment_id": 65132436, "body": "@Harish: &quot;<i>Doesn&#39;t glBufferData() with NULL pointer create a new storage buffer of said size but not care about values?</i>&quot; That has nothing to do with this. Unless <code>glVertexAttribPointer</code> successfully executes, no buffer object is ever associated with attribute 1. And if no buffer object is associated with an enabled attribute, then you get the pre-VBO default behavior: it pulls array data from a CPU pointer. A pointer who&#39;s default value is NULL."}, {"owner": {"reputation": 924, "user_id": 5069540, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gijl_3OcPeM/AAAAAAAAAAI/AAAAAAAAAAA/5D0FtItLzPc/photo.jpg?sz=128", "display_name": "Harish", "link": "https://stackoverflow.com/users/5069540/harish"}, "edited": false, "score": 0, "creation_date": 1470880338, "post_id": 38885317, "comment_id": 65132707, "body": "@NicolBolas I think I&#39;ll probably ask this in another question since my tests show a different result. I see no crash if i call <code>glVertexAttribPointer()</code>with <code>size</code> as <code>5</code> which is clearly invalid. Incorrect vertices are drawn on the screen with <code>glDraw*()</code> which returns <code>GL_INVALID_VALUE</code> as expected, but there is no crash, which indicates that the buffer is valid with garbage values. But if the count exceeds the size of the VBO in <code>glBufferData()</code> the program crashes with <code>access violation</code> error."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 1, "last_activity_date": 1470873361, "creation_date": 1470873361, "answer_id": 38885317, "question_id": 38885265, "link": "https://stackoverflow.com/questions/38885265/opengl-crashes-when-trying-to-use-gldrawarraysinstanced/38885317#38885317", "title": "OpenGL crashes when trying to use glDrawArraysInstanced()", "body": "<blockquote>\n<pre><code> glVertexAttribPointer(0, 4 * 4, GL_FLOAT, GL_FALSE, 4 * 4 * sizeof(GLfloat), NULL);\n</code></pre>\n</blockquote>\n\n<p>Your crash is the result of a simple copy-and-paste bug. You use attribute 0 here, which means you never called <code>glVertexAttribPointer</code> for attribute 1. Therefore, it uses the default attribute state, thus leading to a crash.</p>\n\n<p>However, I strongly suspect that you are attempting to pass a 4x4 matrix as a single attribute. That won't work; OpenGL will <a href=\"https://www.opengl.org/sdk/docs/man/html/glVertexAttribPointer.xhtml\" rel=\"nofollow\">give you a <code>GL_INVALID_VALUE</code> error</a> if you try to set the attribute's size to be more than 4.</p>\n\n<p><a href=\"https://www.opengl.org/wiki/Vertex_Shader#Inputs\" rel=\"nofollow\">Matrices are treated as arrays of (column) vectors</a>. And each vector takes up a <em>separate</em> attribute index. So if you want to pass a matrix, you will have to use 4 attribute indices (starting with the one provided by your shader). And each one will have to have the divisor set for it as well.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6702577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ea839072bc0d451c6f1a6cc1920751?s=128&d=identicon&r=PG&f=1", "display_name": "Gonnen Daube", "link": "https://stackoverflow.com/users/6702577/gonnen-daube"}, "edited": false, "score": 0, "creation_date": 1470874168, "post_id": 38885367, "comment_id": 65131417, "body": "I accidentally made a mistake when pasting to the website and changed the 1 to 0."}], "tags": [], "owner": {"reputation": 924, "user_id": 5069540, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gijl_3OcPeM/AAAAAAAAAAI/AAAAAAAAAAA/5D0FtItLzPc/photo.jpg?sz=128", "display_name": "Harish", "link": "https://stackoverflow.com/users/5069540/harish"}, "is_accepted": false, "score": 0, "last_activity_date": 1470873818, "creation_date": 1470873818, "answer_id": 38885367, "question_id": 38885265, "link": "https://stackoverflow.com/questions/38885265/opengl-crashes-when-trying-to-use-gldrawarraysinstanced/38885367#38885367", "title": "OpenGL crashes when trying to use glDrawArraysInstanced()", "body": "<p>Why are you remapping the Vertex Attribute pointer to your second vbo?</p>\n\n<pre><code>glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(GLfloat), NULL);\n...\nglVertexAttribPointer(0, 4 * 4, GL_FLOAT, GL_FALSE, 4 * 4 * sizeof(GLfloat), NULL);\n</code></pre>\n\n<p>refer <a href=\"https://www.opengl.org/sdk/docs/man/html/glVertexAttribPointer.xhtml\" rel=\"nofollow\">https://www.opengl.org/sdk/docs/man/html/glVertexAttribPointer.xhtml</a> for more info on <code>glVertexAttribPointer()</code></p>\n\n<p>I am guessing your draw call </p>\n\n<pre><code>glDrawArraysInstanced(sphereModel-&gt;mode, 0, sphereModel-&gt;numVertices, sphereCount);\n</code></pre>\n\n<blockquote>\n  <p>Note the '0' index in both cases</p>\n</blockquote>\n\n<p>is exceeding the size of your second VBO and hence the error. Is this intentional that you want to remap your vertex attribute pointer to the second VBO? This overwrites the first mapping, in other words your first VBO is not being used.</p>\n\n<p>I suggest using <code>GLuint attribute1;</code> to store the index and map accordingly to avoid such problems in future. Using numbers for attribute index directly like <code>0</code> is an easy way to make mistakes like this.</p>\n"}], "owner": {"reputation": 11, "user_id": 6702577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ea839072bc0d451c6f1a6cc1920751?s=128&d=identicon&r=PG&f=1", "display_name": "Gonnen Daube", "link": "https://stackoverflow.com/users/6702577/gonnen-daube"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 0, "accepted_answer_id": 38885317, "answer_count": 2, "score": 0, "last_activity_date": 1470915976, "creation_date": 1470872932, "last_edit_date": 1470915976, "question_id": 38885265, "link": "https://stackoverflow.com/questions/38885265/opengl-crashes-when-trying-to-use-gldrawarraysinstanced", "title": "OpenGL crashes when trying to use glDrawArraysInstanced()", "body": "<p>Load to VAO function</p>\n\n<pre><code>glGenVertexArrays(1, &amp;VAO);\nglGenBuffers(1, &amp;modelVertexVBO);\nglGenBuffers(1, &amp;sphereTransformVBO);\n\nglBindVertexArray(VAO);\nglBindBuffer(GL_ARRAY_BUFFER, modelVertexVBO);\n\nglBufferData(GL_ARRAY_BUFFER, sizeof(GLfloat) * (sphereModel-&gt;numVertices * 3), &amp;(sphereModel-&gt;vertices[0]), GL_STATIC_DRAW);\nglVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(GLfloat), NULL);\n\n\nglBindBuffer(GL_ARRAY_BUFFER, sphereTransformVBO);\n\nglBufferData(GL_ARRAY_BUFFER, sizeof(GLfloat) * (maxSphereStorage * 4 * 4), NULL, GL_STATIC_DRAW);\nglVertexAttribPointer(1, 4 * 4, GL_FLOAT, GL_FALSE, 4 * 4 * sizeof(GLfloat), NULL);\n\nglEnableVertexAttribArray(0);\nglEnableVertexAttribArray(1);\nglVertexAttribDivisor(sphereTransformVBO, 1);\n\nglBindVertexArray(0);\n</code></pre>\n\n<p>Geometry drawing function:</p>\n\n<pre><code>glBindVertexArray(VAO);\nglDrawArraysInstanced(sphereModel-&gt;mode, 0, sphereModel-&gt;numVertices, sphereCount);\n</code></pre>\n\n<p>When I try running this code it crashes with the following crash note:\n    Exception thrown at 0x0000000068F4EDB4 (nvoglv64.dll) in Engine.exe: 0xC0000005: Access violation reading location 0x0000000000000000.</p>\n\n<p>When I remove the second VBO it works for some reason.</p>\n"}, {"tags": ["c++", "url", "httpresponse", "http-response-codes"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1470872306, "post_id": 38885184, "comment_id": 65130959, "body": "What do you find so difficult about <a href=\"http://manpages.courier-mta.org/htmlman3/getaddrinfo.3.html\" rel=\"nofollow noreferrer\"><code>getaddrinfo</code></a>() followed by <a href=\"http://manpages.courier-mta.org/htmlman2/socket.2.html\" rel=\"nofollow noreferrer\"><code>socket</code></a>(), then <a href=\"http://manpages.courier-mta.org/htmlman2/connect.2.html\" rel=\"nofollow noreferrer\"><code>connect</code></a>(), then <a href=\"http://manpages.courier-mta.org/htmlman2/write.2.html\" rel=\"nofollow noreferrer\"><code>write</code></a>(), and finally <a href=\"http://manpages.courier-mta.org/htmlman2/read.2.html\" rel=\"nofollow noreferrer\"><code>read</code></a>()?"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1470872854, "post_id": 38885184, "comment_id": 65131097, "body": "I agree @SamVarshavchik more methods = less errors, and more specific"}, {"owner": {"reputation": 2078, "user_id": 1184801, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/03bdf23b59e23cfd6e479e4b0ba1eb35?s=128&d=identicon&r=PG", "display_name": "Dan James Palmer", "link": "https://stackoverflow.com/users/1184801/dan-james-palmer"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1470878084, "post_id": 38885184, "comment_id": 65132246, "body": "@SamVarshavchik I clearly didn&#39;t find an example whilst scouring the web that put forth that solution. I will look into it"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1470878275, "post_id": 38885184, "comment_id": 65132284, "body": "HTTP is not trivial to implement by hand (look at all the questions on StackOverflow of people having trouble writing their own HTTP clients).  I would not recommend the <code>connect()</code>/<code>write()</code>/<code>read()</code> approach unless you are really good at socket programming and are prepared to implement all of the nuances that HTTP requires to <i>properly</i> handle the server&#39;s response."}, {"owner": {"reputation": 15, "user_id": 3894299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1097b86749ae2be990ec77078edb48b0?s=128&d=identicon&r=PG&f=1", "display_name": "user3894299", "link": "https://stackoverflow.com/users/3894299/user3894299"}, "edited": false, "score": 0, "creation_date": 1470878660, "post_id": 38885184, "comment_id": 65132354, "body": "cURL is your friend. Here is a similar question: <a href=\"http://stackoverflow.com/questions/9786150/save-curl-content-result-into-a-string-in-c\" title=\"save curl content result into a string in c\">stackoverflow.com/questions/9786150/&hellip;</a>"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1470878695, "post_id": 38885184, "comment_id": 65132364, "body": "For one-off fetch of a known document, of a known MIME content-type, from a fixed URL, a plain socket connection will work just fine. The nice thing about HTTP is how gracefully it degrades to the lowest common denominator between the client and the server. The server is not going to send a pipelined response, nor a byte range response, nor a compress response, unless the client indicates its support for it."}], "answers": [{"comments": [{"owner": {"reputation": 2078, "user_id": 1184801, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/03bdf23b59e23cfd6e479e4b0ba1eb35?s=128&d=identicon&r=PG", "display_name": "Dan James Palmer", "link": "https://stackoverflow.com/users/1184801/dan-james-palmer"}, "edited": false, "score": 0, "creation_date": 1470878025, "post_id": 38885407, "comment_id": 65132220, "body": "This certainly looks like the simple solution I was looking for. Is CPR the only library I have to import into my project?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 2078, "user_id": 1184801, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/03bdf23b59e23cfd6e479e4b0ba1eb35?s=128&d=identicon&r=PG", "display_name": "Dan James Palmer", "link": "https://stackoverflow.com/users/1184801/dan-james-palmer"}, "edited": false, "score": 0, "creation_date": 1470878839, "post_id": 38885407, "comment_id": 65132396, "body": "@DanJamesPalmer <code>CPR</code> is a &quot;wrapper&quot; library for <a href=\"https://curl.haxx.se/\" rel=\"nofollow noreferrer\">CURL</a> so you also need to install <a href=\"https://curl.haxx.se/\" rel=\"nofollow noreferrer\">CURL</a>."}, {"owner": {"reputation": 5834, "user_id": 2297365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4179be309867f97cb08385c9338c436?s=128&d=identicon&r=PG", "display_name": "huu", "link": "https://stackoverflow.com/users/2297365/huu"}, "edited": false, "score": 0, "creation_date": 1471032647, "post_id": 38885407, "comment_id": 65208468, "body": "For quickly getting up and running, cpr does include cURL inside of the repository as a submodule. There should be instructions in the <a href=\"https://github.com/whoshuu/cpr#usage\" rel=\"nofollow noreferrer\">Usage</a> section that will help you get started. Additionally, you can clone or fork the <a href=\"https://github.com/whoshuu/cpr-example\" rel=\"nofollow noreferrer\">example repository</a> with all the necessary CMake scaffolding you need to make a simple GET request."}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 1, "last_activity_date": 1470874746, "last_edit_date": 1470874746, "creation_date": 1470874172, "answer_id": 38885407, "question_id": 38885184, "link": "https://stackoverflow.com/questions/38885184/get-the-http-response-for-a-url-in-c/38885407#38885407", "title": "Get the http response for a URL in C++", "body": "<p>You may want to look at the <a href=\"https://github.com/whoshuu/cpr\" rel=\"nofollow\">CPR</a> library:</p>\n\n<pre><code>auto response = cpr::Get // or cpr::Head\n(\n    cpr::Url{\"http://www.google.com\"},\n    cpr::Header{{\"accept\", \"text/html\"}},\n    cpr::Timeout{4 * 1000}\n);\n\nif(response.status_code != 200)\n{\n    // fail\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1470878490, "last_edit_date": 1470878490, "creation_date": 1470878146, "answer_id": 38885845, "question_id": 38885184, "link": "https://stackoverflow.com/questions/38885184/get-the-http-response-for-a-url-in-c/38885845#38885845", "title": "Get the http response for a URL in C++", "body": "<p>Have a look at <a href=\"https://curl.haxx.se/libcurl/\" rel=\"nofollow\">libcurl</a>, eg:</p>\n\n<pre><code>#include &lt;curl/curl.h&gt; \n\nCURL *c = curl_easy_init(); \nif (!c)\n{\n    ...\n}\nelse\n{\n    struct curl_slist *headers = curl_slist_append(NULL, \"Accept: text/html\");\n\n    curl_easy_setopt(c, CURLOPT_URL, \"http://www.google.com\");\n    curl_easy_setopt(c, CURLOPT_HTTPHEADER, headers); \n    curl_easy_setopt(c, CURLOPT_TIMEOUT, 4 * 1000);\n    curl_easy_setopt(c, CURLOPT_NOBODY, 1);\n\n    CURLcode res = curl_easy_perform(c);\n    curl_slist_free_all(headers);\n\n    if (res != CURLE_OK)\n    {\n        ...\n    }\n    else\n    {\n        long responseCode;\n        curl_easy_getinfo(c, CURLINFO_RESPONSE_CODE, &amp;responseCode); \n\n        ...\n    }\n\n    curl_easy_cleanup(c);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2078, "user_id": 1184801, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/03bdf23b59e23cfd6e479e4b0ba1eb35?s=128&d=identicon&r=PG", "display_name": "Dan James Palmer", "link": "https://stackoverflow.com/users/1184801/dan-james-palmer"}, "edited": false, "score": 0, "creation_date": 1470945597, "post_id": 38886354, "comment_id": 65168815, "body": "Hi Alain-Jacques, I am trying to implement your suggestion. I&#39;ve downloaded the .h and .cpp files for HappyHTTP and added them to my project. I&#39;ve included them in the .cc file I want to use. I get the following errors when trying to compile in VS2015. Any ideas? <a href=\"https://postimg.org/image/jz0xu87d1/\" rel=\"nofollow noreferrer\">postimg.org/image/jz0xu87d1</a>"}, {"owner": {"reputation": 11, "user_id": 6040256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fe9a8ff82291a66f64091f24901da4?s=128&d=identicon&r=PG&f=1", "display_name": "ajburlet", "link": "https://stackoverflow.com/users/6040256/ajburlet"}, "reply_to_user": {"reputation": 2078, "user_id": 1184801, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/03bdf23b59e23cfd6e479e4b0ba1eb35?s=128&d=identicon&r=PG", "display_name": "Dan James Palmer", "link": "https://stackoverflow.com/users/1184801/dan-james-palmer"}, "edited": false, "score": 0, "creation_date": 1470962671, "post_id": 38886354, "comment_id": 65174708, "body": "@DanJamesPalmer, I edited the answer with a lazy solution for your VS2015 trouble. The thing is, the compiler is mostly complaining about usage of unsafe string calls and deprecated socket functions. There are better ways to solve this, such as replacing sprintf for snprintf for instance, which states the length of the buffer avoiding possible memory problems."}, {"owner": {"reputation": 2078, "user_id": 1184801, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/03bdf23b59e23cfd6e479e4b0ba1eb35?s=128&d=identicon&r=PG", "display_name": "Dan James Palmer", "link": "https://stackoverflow.com/users/1184801/dan-james-palmer"}, "edited": false, "score": 0, "creation_date": 1471017392, "post_id": 38886354, "comment_id": 65200863, "body": "Thanks Alain-Jacques, that did indeed get rid of the errors. I now have a new issue. See <a href=\"https://postimg.org/image/434d3es11/\" rel=\"nofollow noreferrer\">postimg.org/image/434d3es11</a>. I&#39;m taking over this project from someone else. It appears all the methods have to be part of the CSpeedTest umbrella. When I put the happyHTTP methods under that umbrella I get the error. Removing the CSpeedTest solve the error but I then can&#39;t call CheckACM from other methods...."}, {"owner": {"reputation": 11, "user_id": 6040256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fe9a8ff82291a66f64091f24901da4?s=128&d=identicon&r=PG&f=1", "display_name": "ajburlet", "link": "https://stackoverflow.com/users/6040256/ajburlet"}, "reply_to_user": {"reputation": 2078, "user_id": 1184801, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/03bdf23b59e23cfd6e479e4b0ba1eb35?s=128&d=identicon&r=PG", "display_name": "Dan James Palmer", "link": "https://stackoverflow.com/users/1184801/dan-james-palmer"}, "edited": false, "score": 0, "creation_date": 1471268740, "post_id": 38886354, "comment_id": 65266457, "body": "Since you&#39;re talking about non-static methods, you will get the argument incompatibility error. Maybe you can define the callbacks as friend functions, so they can access internal members of CSpeedTest, and place them outside the class."}], "tags": [], "owner": {"reputation": 11, "user_id": 6040256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fe9a8ff82291a66f64091f24901da4?s=128&d=identicon&r=PG&f=1", "display_name": "ajburlet", "link": "https://stackoverflow.com/users/6040256/ajburlet"}, "is_accepted": false, "score": 1, "last_activity_date": 1470962471, "last_edit_date": 1470962471, "creation_date": 1470882410, "answer_id": 38886354, "question_id": 38885184, "link": "https://stackoverflow.com/questions/38885184/get-the-http-response-for-a-url-in-c/38886354#38886354", "title": "Get the http response for a URL in C++", "body": "<p>In some cases I used <a href=\"http://scumways.com/happyhttp/happyhttp.html\" rel=\"nofollow\">HappyHTTP</a>, since it's small and easy to use. It is somewhat limited, but depending on what you need it can get the job done.</p>\n\n<p>I changed their example program a bit to give you an idea of how to use it for your purpose:</p>\n\n<pre><code>// invoked when response headers have been received\nvoid OnBegin( const happyhttp::Response* r, void* userdata )\n{\n     *userdata = r-&gt;getstatus();\n}\n\n// invoked to process response body data (may be called multiple times)\nvoid OnData( const happyhttp::Response* r, void* userdata, const unsigned char* data, int n )\n{\n\n}\n\n// invoked when response is complete\nvoid OnComplete( const happyhttp::Response* r, void* userdata )\n{\n\n}\n\n\nvoid TestGET()\n{\n    int returnStatus;\n    happyhttp::Connection conn( \"www.google.com\", 80 );\n    conn.setcallbacks( OnBegin, OnData, OnComplete, &amp;returnStatus );\n\n    conn.request( \"GET\", \"/\" );\n\n    while( conn.outstanding() ) conn.pump();\n\n    if (returnStatus != 200) printf(\"FAIL\");\n    else printf(\"OK\");\n}\n</code></pre>\n\n<p>In order to make it work on VS2015, you can use the following lazy solution: add the following to the start of happyhttp.cpp.</p>\n\n<pre><code>#ifdef WIN32\n    #pragma comment(lib, \"ws2_32.lib\")\n    #define strcasecmp _stricmp\n    #define _WINSOCK_DEPRECATED_NO_WARNINGS\n    #define _CRT_SECURE_NO_WARNINGS\n#endif\n</code></pre>\n"}], "owner": {"reputation": 2078, "user_id": 1184801, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/03bdf23b59e23cfd6e479e4b0ba1eb35?s=128&d=identicon&r=PG", "display_name": "Dan James Palmer", "link": "https://stackoverflow.com/users/1184801/dan-james-palmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5881, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1470962471, "creation_date": 1470872245, "question_id": 38885184, "link": "https://stackoverflow.com/questions/38885184/get-the-http-response-for-a-url-in-c", "title": "Get the http response for a URL in C++", "body": "<p>I want to simply get the HTTP response or simple pass/fail for a URL in C++</p>\n\n<p>Something like the AJAX call I use in JavaScript</p>\n\n<pre><code>$.ajax({\n    url: \"http://www.google.com\",\n    dataType: \"html\",\n    timeout: 4 * 1000\n}).done(function() {\n\n})\n.fail(function() {\n\n});\n</code></pre>\n\n<p>Half the solutions I've seem far too convoluted. In search of a simpler way. </p>\n"}, {"tags": ["c++", "c++11", "move-semantics"], "answers": [{"comments": [{"owner": {"reputation": 8382, "user_id": 398461, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ixu8F.jpg?s=128&g=1", "display_name": "wcochran", "link": "https://stackoverflow.com/users/398461/wcochran"}, "edited": false, "score": 0, "creation_date": 1470871886, "post_id": 38885122, "comment_id": 65130862, "body": "Thanks. Sanity check -- that&#39;s what I thought."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1470885130, "post_id": 38885122, "comment_id": 65133785, "body": "@remy The correctness of the OP&#39;s code does not require move semantics (that would be sufficient as well).  If there is an actual error in my interpretaation, please clarify."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 8, "last_activity_date": 1470884679, "last_edit_date": 1470884679, "creation_date": 1470871819, "answer_id": 38885122, "question_id": 38885113, "link": "https://stackoverflow.com/questions/38885113/is-it-safe-to-use-cs-stdmove-from-object-in-inner-scope-to-outer-scope/38885122#38885122", "title": "Is it safe to use C++&#39;s std::move from object in inner scope to outer scope?", "body": "<p>Yes, vector follows value semantics.</p>\n\n<p>The storage is now owned by the outer vector, after a move.</p>\n"}], "owner": {"reputation": 8382, "user_id": 398461, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ixu8F.jpg?s=128&g=1", "display_name": "wcochran", "link": "https://stackoverflow.com/users/398461/wcochran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 38885122, "answer_count": 1, "score": 2, "last_activity_date": 1470884679, "creation_date": 1470871741, "question_id": 38885113, "link": "https://stackoverflow.com/questions/38885113/is-it-safe-to-use-cs-stdmove-from-object-in-inner-scope-to-outer-scope", "title": "Is it safe to use C++&#39;s std::move from object in inner scope to outer scope?", "body": "<p>In the following C++11/14 code snippet I use <code>std::move</code> to\n\"move\" the contents of the vector <code>Y</code> in the inner scope, to the vector <code>X</code>\nin outer scope:</p>\n\n<pre><code>void foo() {\n   vector&lt;int&gt; X(10);\n   ...\n   for (...) {\n      vector&lt;int&gt; Y(100);\n      ...\n      X = std::move(Y);\n   }\n   ...Safe to use X here which contains Y's last content?\n }\n</code></pre>\n\n<p><code>Y</code>'s contructor/destructor is invoked at the top/bottom of the loop for each iteration. Since the contents are \"moved\" out of <code>Y</code> to <code>X</code> those contents will still be viable (now stored in <code>X</code>) beyond the end of the loop correct?</p>\n"}, {"tags": ["c++", "gcc", "visual-c++", "clang", "language-lawyer"], "answers": [{"comments": [{"owner": {"reputation": 1144, "user_id": 2054398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b865847749e59dde2dd3f65917bbdd?s=128&d=identicon&r=PG", "display_name": "ColdCat", "link": "https://stackoverflow.com/users/2054398/coldcat"}, "edited": false, "score": 0, "creation_date": 1470942553, "post_id": 38885680, "comment_id": 65167275, "body": "Thanks, I updated my question to emphasize my interrogations."}], "tags": [], "owner": {"reputation": 7970, "user_id": 4117097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrdeC.jpg?s=128&g=1", "display_name": "Anton Malyshev", "link": "https://stackoverflow.com/users/4117097/anton-malyshev"}, "is_accepted": false, "score": 0, "last_activity_date": 1470876623, "creation_date": 1470876623, "answer_id": 38885680, "question_id": 38884954, "link": "https://stackoverflow.com/questions/38884954/template-specialization-static-initialization-iccvc-vs-gccclang/38885680#38885680", "title": "Template specialization static initialization icc+vc vs gcc+clang", "body": "<p>Yes, it seems to meet standard.</p>\n\n<p>At least C++14 standard contains (hope its final revision contains it as well, I've checked with pre-release version <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3797.pdf\" rel=\"nofollow\">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3797.pdf</a>).</p>\n\n<blockquote>\n  <p>14.7.1 Implicit instantiation\n  ...\n  Unless a member of a class template or a member template has been explicitly instantiated or explicitly specialized, the specialization of the member is implicitly instantiated when the specialization is referenced in a context that requires the member definition to exist; in particular, the initialization (and any associated side-effects) of a static data member does not occur unless the static data member is itself used in a way that requires the definition of the static data member to exist.\n  ...</p>\n</blockquote>\n\n<p>By <code>const int TBase&lt;double&gt;::j=0;</code> you are accessing (not specializing) static member <code>j</code> of <code>TBase&lt;double&gt;</code>, so <code>TBase&lt;double&gt;</code> specialization should be created if not existed yet.</p>\n\n<p>The code sample without templates, which proves that you are just accessing struct member:</p>\n\n<pre><code>struct WithoutTemplate {\n    static const int i;\n};\nconst int WithoutTemplate::i = 5;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1144, "user_id": 2054398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b865847749e59dde2dd3f65917bbdd?s=128&d=identicon&r=PG", "display_name": "ColdCat", "link": "https://stackoverflow.com/users/2054398/coldcat"}, "edited": false, "score": 0, "creation_date": 1471021400, "post_id": 38906180, "comment_id": 65202987, "body": "Thanks. So implicit instantiation is for template local usage, explicit instantiation for template export like in lib. With vc++ the template declaration and initialisation of a value like int const X&lt;mytype&gt;::j = 3; is enough for code (x&lt;Mytype&gt;()).j to be &quot;valid&quot; seems a bit odd."}], "tags": [], "owner": {"reputation": 137021, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "is_accepted": true, "score": 3, "last_activity_date": 1470949666, "creation_date": 1470949666, "answer_id": 38906180, "question_id": 38884954, "link": "https://stackoverflow.com/questions/38884954/template-specialization-static-initialization-iccvc-vs-gccclang/38906180#38906180", "title": "Template specialization static initialization icc+vc vs gcc+clang", "body": "<p>The two syntaxes are both valid, but they mean different things. The syntax with <code>template&lt;&gt;</code> is used to declare or define a member of an implicit or explicit <em>instantiation</em>:</p>\n\n<pre><code>template&lt;class T&gt; struct X { static int const i; };\n\ntemplate&lt;&gt; int const X&lt;char&gt;::i = 1; // Define member of an implicit instantiation\n\ntemplate struct X&lt;long&gt;;\ntemplate&lt;&gt; int const X&lt;long&gt;::i = 2; // Define member of an explicit instantiation\n</code></pre>\n\n<p>The syntax without <code>template&lt;&gt;</code> is used to define a member of a <em>specialization</em>:</p>\n\n<pre><code>template&lt;&gt; struct X&lt;float&gt; { static int const j; }; // Class template specialization\nint const X&lt;float&gt;::j = 3;\n</code></pre>\n"}], "owner": {"reputation": 1144, "user_id": 2054398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b865847749e59dde2dd3f65917bbdd?s=128&d=identicon&r=PG", "display_name": "ColdCat", "link": "https://stackoverflow.com/users/2054398/coldcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 38906180, "answer_count": 2, "score": 1, "last_activity_date": 1470949666, "creation_date": 1470870540, "last_edit_date": 1470944004, "question_id": 38884954, "link": "https://stackoverflow.com/questions/38884954/template-specialization-static-initialization-iccvc-vs-gccclang", "title": "Template specialization static initialization icc+vc vs gcc+clang", "body": "<p>It looks like compilers accept different syntax to initialization of static in template.</p>\n\n<pre><code>template &lt;typename T&gt; struct TBase\n{   \n    static const int i;\n    static const int j;\n};\n\n// compile: gcc + clang + visual + icc\ntemplate &lt;&gt; const int TBase&lt;double&gt;::i=1;\n\n// compile: vc + icc\n// failed gcc, gcc -fpermissive, clang\nconst int TBase&lt;double&gt;::j=2;\n</code></pre>\n\n<p>Is the syntax without <code>template&lt;&gt;</code> accepted by the standard even if it's obviously not portable at the moment ?</p>\n\n<p>edit: \nWith this code on vc++  <code>TBase&lt;double&gt;::i==1</code> and <code>TBase&lt;double&gt;::j==2</code> exactly like the code without template. </p>\n\n<pre><code>struct noTemplate \n{   \n    static const int i;\n    static const int j;\n};\nconst int noTemplate::i=1; \nconst int noTemplate::j=2;\n</code></pre>\n\n<p>gcc and clang seems to enforce the use of <code>template&lt;&gt;</code> to initialize this static, I don't see why compiler need this information.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 1, "creation_date": 1470870067, "post_id": 38884875, "comment_id": 65130411, "body": "<a href=\"http://programmers.stackexchange.com/questions/133688/is-c11-uniform-initialization-a-replacement-for-the-old-style-syntax\">Uniform Initialization</a>...."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1470871589, "post_id": 38884875, "comment_id": 65130791, "body": "For searching, in-class member initializer / initialization will probably serve you well. That&#39;s not a &quot;holy standard&quot; term though."}], "answers": [{"comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1470870650, "post_id": 38884922, "comment_id": 65130545, "body": "Grammatically, <code>brace-or-equal-initializer</code> can be applied to things other than NSDMs. So technically, it didn&#39;t have a name before."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 2, "last_activity_date": 1470872360, "last_edit_date": 1470872360, "creation_date": 1470870268, "answer_id": 38884922, "question_id": 38884875, "link": "https://stackoverflow.com/questions/38884875/what-is-the-term-for-structure-member-initialization-inside-the-definition/38884922#38884922", "title": "What is the term for structure member initialization inside the definition?", "body": "<p>It's called a <em>brace-or-equal-initializer</em> for a non-static data member. Now, it is known as a default member initializer (thanks <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0134r0.html\" rel=\"nofollow\">P0134</a>). </p>\n"}, {"comments": [{"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1470870306, "post_id": 38884923, "comment_id": 65130470, "body": "I was looking for the term so I could Google for the semantics of such initialization. Simply searching for &quot;member initialization in struct definition&quot; was not sufficient."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 2, "last_activity_date": 1470871014, "last_edit_date": 1470871014, "creation_date": 1470870271, "answer_id": 38884923, "question_id": 38884875, "link": "https://stackoverflow.com/questions/38884875/what-is-the-term-for-structure-member-initialization-inside-the-definition/38884923#38884923", "title": "What is the term for structure member initialization inside the definition?", "body": "<p>It is not immediately clear what specifically your question is supposed to be about: the syntax or the feature. </p>\n\n<p>If I correctly understand the scope of your question, the standard meticulously calls this feature \"<em>brace-or-equal-initializers</em> of non-static data members\". Yes, the whole thing.</p>\n\n<p>So, the syntax is of <em>brace-or-equal-initializer</em>. And it happens to be used with a non-static data member in your example.</p>\n"}, {"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 1, "last_activity_date": 1470878490, "creation_date": 1470878490, "answer_id": 38885876, "question_id": 38884875, "link": "https://stackoverflow.com/questions/38884875/what-is-the-term-for-structure-member-initialization-inside-the-definition/38885876#38885876", "title": "What is the term for structure member initialization inside the definition?", "body": "<p>Grammatically, the initializer is a <em>brace-or-equal-initializer</em>, but that is cumbersome to say, and this construction now has a proper technical term, too: <em>default member initializer</em> (cf. [class.mem]/8). This term was introduced after C++14 and is currently in the working draft.</p>\n"}], "owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 38884923, "answer_count": 3, "score": 1, "last_activity_date": 1470878490, "creation_date": 1470869952, "question_id": 38884875, "link": "https://stackoverflow.com/questions/38884875/what-is-the-term-for-structure-member-initialization-inside-the-definition", "title": "What is the term for structure member initialization inside the definition?", "body": "<p>Consider the following example program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct FooBar {\n    bool test{true}; // What is this syntax called?\n};\n\nint main() {\n    FooBar bar;\n    printf(\"%d\\n\", bar.test);\n}\n</code></pre>\n\n<p>What is the name of the syntax for the initialization on the line with the comment?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "edited": false, "score": 3, "creation_date": 1470869794, "post_id": 38884836, "comment_id": 65130340, "body": "Use the <code>%</code> module operator. It will return the remainder of a division. i.e. <code>3%2 == 1</code>, <code>2%2 == 0</code>, <code>0%2 == 0</code>, etc.."}, {"owner": {"reputation": 1854, "user_id": 6539544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0075a1be0f17b9ac03dbb0b9b27d5aab?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Bajaj", "link": "https://stackoverflow.com/users/6539544/vaibhav-bajaj"}, "edited": false, "score": 0, "creation_date": 1470869896, "post_id": 38884836, "comment_id": 65130367, "body": "Change <code>&gt;</code> to <code>&gt;=</code>"}, {"owner": {"reputation": 2133, "user_id": 5447208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f8eb976d91e3b7bb21366a68d1a70f?s=128&d=identicon&r=PG&f=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/5447208/cody"}, "edited": false, "score": 0, "creation_date": 1471304051, "post_id": 38884836, "comment_id": 65283879, "body": "@Lauren Curphey if one of the answers below helped you, you should click the checkmark next to it to indicate it is the correct answer."}], "answers": [{"tags": [], "owner": {"reputation": 2133, "user_id": 5447208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f8eb976d91e3b7bb21366a68d1a70f?s=128&d=identicon&r=PG&f=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/5447208/cody"}, "is_accepted": false, "score": 1, "last_activity_date": 1470870863, "creation_date": 1470870863, "answer_id": 38884992, "question_id": 38884836, "link": "https://stackoverflow.com/questions/38884836/output-odd-numbers-between-2-integers-in-c/38884992#38884992", "title": "Output odd numbers between 2 integers in C++", "body": "<p>I think your logic is overcomplicating the problem a little bit.  Did you mean to do something like this?</p>\n\n<pre><code>void OutputOdds(int min, int max)\n{\n    for(int i = min; i &lt;= max; i++)\n    {\n        if(i % 2 == 1 || i % 2 == -1)\n            cout &lt;&lt; i &lt;&lt; \" \";\n    }\n}\n</code></pre>\n\n<p>Tests:</p>\n\n<pre><code>OutputOdds(-25, 6);\ncout &lt;&lt; endl &lt;&lt; endl;\nOutputOdds(1, 3);\ncout &lt;&lt; endl &lt;&lt; endl;\nOutputOdds(2, 4);\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>-25 -23 -21 -19 -17 -15 -13 -11 -9 -7 -5 -3 -1 1 3 5 \n\n1 3 \n\n3 \n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6697869"}, "is_accepted": false, "score": 1, "last_activity_date": 1470873724, "creation_date": 1470873724, "answer_id": 38885354, "question_id": 38884836, "link": "https://stackoverflow.com/questions/38884836/output-odd-numbers-between-2-integers-in-c/38885354#38885354", "title": "Output odd numbers between 2 integers in C++", "body": "<p>You can try something like this:</p>\n\n<pre><code>void printOddsBetween(int min, int max) {\n  int t = min + (min % 2 == 0);\n  while (t &lt;= max) {\n    cout &lt;&lt; t &lt;&lt; endl;\n    t += 2;\n  }\n}\n</code></pre>\n\n<p>It starts at the closest odd value to <code>min</code>. Then just prints every odd value up to <code>max</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 5921053, "user_type": "registered", "profile_image": "https://graph.facebook.com/826528504140893/picture?type=large", "display_name": "Mohammed Al-Shami", "link": "https://stackoverflow.com/users/5921053/mohammed-al-shami"}, "is_accepted": false, "score": 0, "last_activity_date": 1522435518, "creation_date": 1522435518, "answer_id": 49579743, "question_id": 38884836, "link": "https://stackoverflow.com/questions/38884836/output-odd-numbers-between-2-integers-in-c/49579743#49579743", "title": "Output odd numbers between 2 integers in C++", "body": "<pre><code>  int min = 1;\n  int max = 11;\n  int counter = 0;\n    for (int i = min; i &lt;= max; i++) {\n        if (i % 2 != 0) {\n            System.out.println(i);\n            counter += 1;\n        }\n    }\n    System.out.println(\"counter\" + counter);\n    int xx[] = new int[counter];\n    int ii = 0;\n    for (int i = min; i &lt;= max; i++) {\n        if (i % 2 != 0) {\n            xx[ii] = i;\n            ii += 1;\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6702486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba892cd719f7520daa459925083d6c34?s=128&d=identicon&r=PG&f=1", "display_name": "Lauren Curphey", "link": "https://stackoverflow.com/users/6702486/lauren-curphey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8884, "favorite_count": 0, "answer_count": 3, "score": -5, "last_activity_date": 1522435518, "creation_date": 1470869644, "question_id": 38884836, "link": "https://stackoverflow.com/questions/38884836/output-odd-numbers-between-2-integers-in-c", "title": "Output odd numbers between 2 integers in C++", "body": "<p>I have completed code that works for the majority of cases for outputting odd numbers between two integers in C++. However it doesn't work for negative numbers and/or if the two values are less than 3 in difference from one another (e.g. it works if the two numbers are 2 &amp; 5, but does not work if the two numbers are 2 &amp; 4).</p>\n\n<p>I know that it is a cause of my code which adds 2 every time the while loop iterates, I'm just not sure how to rectify it.</p>\n\n<pre><code>while (secondOddNum - firstOddNum &gt; 2)\n    {\n        if (firstOddNum % 2 &gt; 0) //positive numbers\n        {\n            firstOddNum += 2;\n            sumOdd += pow(firstOddNum,2);\n            cout &lt;&lt; firstOddNum &lt;&lt; endl;\n\n        } else // even numbers\n        {\n            firstOddNum += 1;\n            sumOdd += pow(firstOddNum,2);\n            cout &lt;&lt; firstOddNum &lt;&lt; endl;\n        }\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "visual-studio", "static-libraries", "static-linking"], "comments": [{"owner": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1470870899, "post_id": 38884822, "comment_id": 65130607, "body": "If I understand correctly, <i>Niftilib</i> depends on <i>zlib</i> and you want to link your application with <i>Niftilib</i>. Than, no, it does not matter in exec. project, but it matters in the <i>Niftilib</i> lib. as well. I do not use CMake, however, in VS, when you create a static link, which is dependent on another static link, you can link it (zlib in Niftilib project) via Configuration Properties -&gt; Librarian -&gt; General -&gt; Additional Dependencies. So I think, yes, you should change it and probably skip in exec. project. Hope this helped ;-)"}, {"owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "reply_to_user": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1470912193, "post_id": 38884822, "comment_id": 65147451, "body": "I think if I skip it in exec, the MyExec project doesn&#39;t compile. It failed at link step, because it cannot find symbols. My question is, if I compile niftilib, which depends on zlib, will zlib symbols be included in niftilib.lib or not ? Do I need to link it to MyExec also ? Thank you."}, {"owner": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1470920952, "post_id": 38884822, "comment_id": 65153492, "body": "Did you try to skip it in exec? If you do not call zlib functions directly from exec, it should be linked in niftlib only and should not be set in exec, I think so... unfortunately I am not sure... :-/ try it."}, {"owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "reply_to_user": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1470942696, "post_id": 38884822, "comment_id": 65167355, "body": "I tried, but it doesn&#39;t work. I got some missing symbols error."}, {"owner": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1470945868, "post_id": 38884822, "comment_id": 65168946, "body": "Could you post whole error list?"}, {"owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "reply_to_user": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1470948722, "post_id": 38884822, "comment_id": 65170248, "body": "I added the errors in the post."}, {"owner": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1470950151, "post_id": 38884822, "comment_id": 65170961, "body": "Hmm... I&#39;ve briefly checked the code... Why don&#39;t you simply add the sources to your project and compile the sources as they are? Why do you need to build static libraries? It would simplify your intention..."}, {"owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "reply_to_user": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1470976033, "post_id": 38884822, "comment_id": 65177625, "body": "zlib and niftilib already exists, I didn&#39;t created them. Putting everything in the same project would complicate things in the future as it won&#39;t be modular."}, {"owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "reply_to_user": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1471322790, "post_id": 38884822, "comment_id": 65287908, "body": "Why did I get a -1 ???"}], "answers": [{"comments": [{"owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "edited": false, "score": 0, "creation_date": 1471038334, "post_id": 38923135, "comment_id": 65210698, "body": "Ok, thank you. So it&#39;s more like Linking 2. It makes sense now. I check nifticlib and why it asked me for zlibd.lib, but I think it&#39;s because nifticlib is compiling some unit tests (executables), so it need to link them to zlib too. So even if I don&#39;t use these executables, they are compiled."}, {"owner": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "reply_to_user": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "edited": false, "score": 0, "creation_date": 1471385014, "post_id": 38923135, "comment_id": 65323112, "body": "@whiteShadow Ups... sorry, I did not realized, linking is regarding dynamic libraries. This answer must be correct."}, {"owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "reply_to_user": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1471387473, "post_id": 38923135, "comment_id": 65323905, "body": "@Dom no it was about static libraries"}], "tags": [], "owner": {"reputation": 5284, "user_id": 2040925, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/191d1998634eaa0af6129682394dc560?s=128&d=identicon&r=PG", "display_name": "typ1232", "link": "https://stackoverflow.com/users/2040925/typ1232"}, "is_accepted": true, "score": 1, "last_activity_date": 1471021386, "creation_date": 1471021386, "answer_id": 38923135, "question_id": 38884822, "link": "https://stackoverflow.com/questions/38884822/how-does-vs2015-link-static-libraries-to-other-libraries-and-executables/38923135#38923135", "title": "How does VS2015 link static libraries to other libraries and executables?", "body": "<p>The usual way is that linking is only done when an executable binary is generated. This includes for example normal executables, but also dynamic libraries (.dll, .so). Linking is not done for static libraries (.lib, .a).</p>\n\n<p>That means if you build a static library of \"nifticlib\" it does not need to be linked to \"zlib\".</p>\n\n<p>You should definitly change the dependency from the dynamic one to the static one, because CMake carries dependencies from static libraries over to the final binary. In this case it should not matter though, because you don't specify a real CMake dependency, just some variable for the library.</p>\n\n<p>Note: In Visual Studio you can pretty easily \"link\" static libraries into each other. What it does is just concatenation of all functions into one .lib file. CMake does not use this feature though and instead carries dependencies over like mentioned above when doing \"TARGET_LINK_LIBRARIES\" on a static library target.</p>\n"}], "owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 670, "favorite_count": 0, "accepted_answer_id": 38923135, "answer_count": 1, "score": 0, "last_activity_date": 1471021386, "creation_date": 1470869542, "last_edit_date": 1471020384, "question_id": 38884822, "link": "https://stackoverflow.com/questions/38884822/how-does-vs2015-link-static-libraries-to-other-libraries-and-executables", "title": "How does VS2015 link static libraries to other libraries and executables?", "body": "<p>I'm trying to create a project, that will create an executable <em>MyExec.exe</em>, which will depends on another library <em>Niftilib</em>, which itself depends on <em>zlib</em>.</p>\n\n<p>What I did is that I used cmake and created a superbuild, using ExternalProject_Add to download and compile <em>zlib</em>:</p>\n\n<pre><code>ExternalProject_Add(Zlib\n    SOURCE_DIR \"${PROJECT_BINARY_DIR}/deps/zlib\"\n    BINARY_DIR \"${PROJECT_BINARY_DIR}/deps/zlib-build\"\n    INSTALL_DIR \"${PROJECT_BINARY_DIR}/deps/zlib-install\"\n    GIT_REPOSITORY \"${git_protocol}://github.com/madler/zlib.git\"\n    GIT_TAG \"50893291621658f355bc5b4d450a8d06a563053d\"\n    CMAKE_ARGS\n        -DCMAKE_INSTALL_PREFIX=&lt;INSTALL_DIR&gt;\n        -DINSTALL_BIN_DIR=&lt;INSTALL_DIR&gt;/bin\n        -DINSTALL_INC_DIR=&lt;INSTALL_DIR&gt;/include\n        -DINSTALL_LIB_DIR=&lt;INSTALL_DIR&gt;/lib\n        -DINSTALL_MAN_DIR=&lt;INSTALL_DIR&gt;/share/man\n        -DINSTALL_PKGCONFIG_DIR=&lt;INSTALL_DIR&gt;/share/pkgconfig)\n</code></pre>\n\n<p>I did the same for <em>Nifticlib</em>:</p>\n\n<pre><code>ExternalProject_Add(Nifticlib\n    SOURCE_DIR \"${PROJECT_BINARY_DIR}/deps/nifticlib\"\n    BINARY_DIR \"${PROJECT_BINARY_DIR}/deps/nifticlib-build\"\n    INSTALL_DIR \"${PROJECT_BINARY_DIR}/deps/nifticlib-install\"\n    GIT_REPOSITORY \"${git_protocol}://gitlab.com/slckr/nifticlib.git\"\n    GIT_TAG \"9f427b39eb6a16822c6ed34454f87eb751b23220\"\n    CMAKE_ARGS\n        -DCMAKE_INSTALL_PREFIX=&lt;INSTALL_DIR&gt;\n        -DZLIB_INCLUDE_DIR=${ZLIB_INC_DIR}\n        -DZLIB_LIBRARY_DEBUG=${ZLIB_LIB_DIR}/zlibd.lib\n    DEPENDS Zlib)\n</code></pre>\n\n<p>Then I did the same for <em>MyExec</em>:</p>\n\n<pre><code>ExternalProject_Add(MyExec\n    SOURCE_DIR \"${PROJECT_BINARY_DIR}/MyExec\"\n    BINARY_DIR \"${PROJECT_BINARY_DIR}/MyExec-build\"\n    INSTALL_DIR \"${PROJECT_BINARY_DIR}/MyExec-install\"\n    GIT_REPOSITORY \"${git_protocol}://gitlab.com/slckr/MyExec.git\"\n    GIT_TAG \"8514aacf5422f1111602e24ea73b229556293b8c\"\n    CMAKE_ARGS\n        -DCMAKE_INSTALL_PREFIX=&lt;INSTALL_DIR&gt;\n        -DBOOST_INC_DIR=${Boost_INCLUDE_DIRS}\n        -DBOOST_LIB_DIR=${Boost_LIBRARY_DIRS}\n        -DZLIB_INC_DIR=${ZLIB_INC_DIR}\n        -DZLIB_LIB_DIR=${ZLIB_LIB_DIR}\n        -DNIFTI_INC_DIR=${NIFTI_INC_DIR}\n        -DNIFTI_LIB_DIR=${NIFTI_LIB_DIR}\n    DEPENDS Nifticlib)\n</code></pre>\n\n<p>And in my CMakeLists of MyExec project, I have this:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.6)\n\nproject(MyExec)\n\ninclude_directories(${BOOST_INC_DIR} ${ZLIB_INC_DIR} ${NIFTI_INC_DIR})\nlink_directories(${BOOST_LIB_DIR} ${ZLIB_LIB_DIR} ${NIFTI_LIB_DIR})\n\nadd_subdirectory(DataStructure)\nadd_subdirectory(FileHandler)\nadd_subdirectory(Parser)\n\nadd_executable(${PROJECT_NAME} MyExec.cc)\ntarget_link_libraries(${PROJECT_NAME} zlibd znz nifticdf niftiio DataStructure FileHandler Parser)\n\ninstall(TARGETS ${PROJECT_NAME} RUNTIME DESTINATION bin)\n</code></pre>\n\n<p>My goal is to be able to distribute MyExec.exe without having all the required libraries (except boost). I want nifticlib library to be embedded in my exec.</p>\n\n<p>If I compile this way, it doesn't work, because it says that zlibd.dll is missing. I find out that I had to link my executable to zlibstaticd instead of zlibd.</p>\n\n<p>But my question is, should I also change -<code>DZLIB_LIBRARY_DEBUG=${ZLIB_LIB_DIR}/zlibd.lib</code> to -<code>DZLIB_LIBRARY_DEBUG=${ZLIB_LIB_DIR}/zlibstaticd.lib</code> in Nifticlib project ?</p>\n\n<p>Or does it only matter in the executable project ? Why does nifticlib require me to provide the path to the zlib library, if it's build as a static library and doesn't do any linking ?</p>\n\n<p>Thank you.</p>\n\n<p><strong>Edit:</strong> If I dont link the zlib to my executable, I get these errors:</p>\n\n<pre><code>5&gt;znz.lib(znzlib.obj) : error LNK2019: unresolved external symbol gzdopen referenced in function znzdopen\n5&gt;znz.lib(znzlib.obj) : error LNK2019: unresolved external symbol gzread referenced in function znzread\n5&gt;znz.lib(znzlib.obj) : error LNK2019: unresolved external symbol gzwrite referenced in function znzwrite\n5&gt;znz.lib(znzlib.obj) : error LNK2019: unresolved external symbol gzputs referenced in function znzputs\n5&gt;znz.lib(znzlib.obj) : error LNK2019: unresolved external symbol gzgets referenced in function znzgets\n5&gt;znz.lib(znzlib.obj) : error LNK2019: unresolved external symbol gzputc referenced in function znzputc\n5&gt;znz.lib(znzlib.obj) : error LNK2019: unresolved external symbol gzgetc referenced in function znzgetc\n5&gt;znz.lib(znzlib.obj) : error LNK2019: unresolved external symbol gzflush referenced in function znzflush\n5&gt;znz.lib(znzlib.obj) : error LNK2019: unresolved external symbol gzeof referenced in function znzeof\n5&gt;znz.lib(znzlib.obj) : error LNK2019: unresolved external symbol gzclose referenced in function Xznzclose\n5&gt;znz.lib(znzlib.obj) : error LNK2019: unresolved external symbol gzopen referenced in function znzopen\n5&gt;znz.lib(znzlib.obj) : error LNK2019: unresolved external symbol gzseek referenced in function znzseek\n5&gt;znz.lib(znzlib.obj) : error LNK2019: unresolved external symbol gztell referenced in function znztell\n</code></pre>\n\n<p>znz is part of nifticlib. It is the part using the zlib library.</p>\n\n<p><strong>Edit 2:</strong> To make it simpler, my question is does the linking happen like Linking 1 or Linking 2 (knowing that nifticlib depends on zlib, both compiled as static libraries):</p>\n\n<pre><code>  Linking 1                           Linking 2\n--------------           --------------      ---------------\n|    zlib    |           |    zlib    |      |  nifticlib  |\n--------------           --------------      ---------------\n      |                         \\                   /\n--------------                   \\                 /\n| nifticlib  |                    \\               /\n--------------                     \\             /\n      |                          -------------------\n--------------                   |   MyExec.exe    |\n| MyExec.exe |                   -------------------\n--------------\n</code></pre>\n"}, {"tags": ["c++", "unit-testing", "cppunit"], "comments": [{"owner": {"reputation": 1238, "user_id": 553596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f75aa7b74c7fea29f67d27bca6716453?s=128&d=identicon&r=PG", "display_name": "moggi", "link": "https://stackoverflow.com/users/553596/moggi"}, "edited": false, "score": 0, "creation_date": 1472054088, "post_id": 38884804, "comment_id": 65601344, "body": "What kind of logging do you need? And how do you use cppunit? There are several ways depending on how you use cppunit."}, {"owner": {"reputation": 1816, "user_id": 98077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbd5f1c2f535b14165ae883fa7c3f37?s=128&d=identicon&r=PG", "display_name": "Jens Alfke", "link": "https://stackoverflow.com/users/98077/jens-alfke"}, "reply_to_user": {"reputation": 1238, "user_id": 553596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f75aa7b74c7fea29f67d27bca6716453?s=128&d=identicon&r=PG", "display_name": "moggi", "link": "https://stackoverflow.com/users/553596/moggi"}, "edited": false, "score": 0, "creation_date": 1472170440, "post_id": 38884804, "comment_id": 65656649, "body": "As I said above, &quot;I&#39;d like to log the name of each test on a separate line, before the test runs.&quot;"}, {"owner": {"reputation": 1816, "user_id": 98077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbd5f1c2f535b14165ae883fa7c3f37?s=128&d=identicon&r=PG", "display_name": "Jens Alfke", "link": "https://stackoverflow.com/users/98077/jens-alfke"}, "reply_to_user": {"reputation": 1238, "user_id": 553596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f75aa7b74c7fea29f67d27bca6716453?s=128&d=identicon&r=PG", "display_name": "moggi", "link": "https://stackoverflow.com/users/553596/moggi"}, "edited": false, "score": 0, "creation_date": 1472170480, "post_id": 38884804, "comment_id": 65656656, "body": "I&#39;ve actually dumped CppUnit. I discovered Catch, which is a million times nicer, and am converting all of my tests to it. <a href=\"https://github.com/philsquared/Catch\" rel=\"nofollow noreferrer\">github.com/philsquared/Catch</a>"}], "answers": [{"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 0, "last_activity_date": 1616123197, "creation_date": 1616123197, "answer_id": 66702001, "question_id": 38884804, "link": "https://stackoverflow.com/questions/38884804/how-to-make-cppunit-logging-more-verbose/66702001#66702001", "title": "How to make CppUnit logging more verbose?", "body": "<p>It is simple enough to define and install a custom progress listener to emit the name of each test before it's performed.  Here's one I wrote today:</p>\n<pre><code>class MyCustomProgressTestListener : public CppUnit::TextTestProgressListener {\n public:\n     virtual void startTest(CppUnit::Test *test) {\n         fprintf(stderr, &quot;starting test %s\\n&quot;, test-&gt;getName().c_str());\n     }\n};\n</code></pre>\n<p>Install it on a test runner like this:</p>\n<pre><code>CppUnit::TextUi::TestRunner runner;\nMyCustomProgressTestListener progress;\nrunner.eventManager().addListener(&amp;progress);\n</code></pre>\n"}], "owner": {"reputation": 1816, "user_id": 98077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbd5f1c2f535b14165ae883fa7c3f37?s=128&d=identicon&r=PG", "display_name": "Jens Alfke", "link": "https://stackoverflow.com/users/98077/jens-alfke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 655, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1616123197, "creation_date": 1470869457, "question_id": 38884804, "link": "https://stackoverflow.com/questions/38884804/how-to-make-cppunit-logging-more-verbose", "title": "How to make CppUnit logging more verbose?", "body": "<p>I'm using CppUnit to write unit tests for a C++ library. By default it prints a single \".\" character to the console for each test. I'd like to log the name of each test on a separate line, before the test runs.</p>\n\n<p>I've looked into the CppUnit API, but it's not at all obvious how to customize the output. Instead of offering customization options, it's more of a framework that you can plug new handlers into. (The tutorial hasn't helped, either.) I could probably spend a day figuring out how to do this, but I can't afford to lose the time. Could someone provide a quick snippet that can customize the per-test log output?</p>\n"}, {"tags": ["java", "c++", "jvm", "conceptual"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1470869144, "post_id": 38884702, "comment_id": 65130153, "body": "I think the statement &quot;compilers are expensive&quot; requires some qualification to have any meaning."}, {"owner": {"reputation": 743, "user_id": 1304252, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/QsuGZ.jpg?s=128&g=1", "display_name": "lv99Zubat", "link": "https://stackoverflow.com/users/1304252/lv99zubat"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1470869338, "post_id": 38884702, "comment_id": 65130215, "body": "I think you&#39;re correct, I edited it."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1470869387, "post_id": 38884702, "comment_id": 65130231, "body": "It doesn&#39;t sound like the video is explaining it very well."}, {"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1470869605, "post_id": 38884702, "comment_id": 65130286, "body": "The JVM essentially <i>is</i> a compiler, and modern JVMs are quite complex ones. Sounds like the video producer isn&#39;t familiar with the technology."}, {"owner": {"reputation": 743, "user_id": 1304252, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/QsuGZ.jpg?s=128&g=1", "display_name": "lv99Zubat", "link": "https://stackoverflow.com/users/1304252/lv99zubat"}, "edited": false, "score": 0, "creation_date": 1470869782, "post_id": 38884702, "comment_id": 65130338, "body": "Yeah, the video wasn&#39;t thorough enough for me, nor could I find the answer anywhere else, which is why I&#39;m here :P"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 3, "creation_date": 1470869950, "post_id": 38884702, "comment_id": 65130385, "body": "A JVM largely consists of library code which can be made largely platform-independent. Ignoring HotSpot, JITs, etc., the task of porting to another platforms consists only of implementing the platform-specific parts for that platform. This is indeed much cheaper than implementing a compiler. I don&#39;t find the assertion that &#39;compilers are expensive&#39; even slightly controversial in this context, unless you include script-kiddy tools which aren&#39;t relevant to the discussion."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1470870777, "post_id": 38884702, "comment_id": 65130577, "body": "@EJP - Though a fairer comparison would be &quot;porting the backend of a compiler&quot; - it&#39;s unclear why that would be substantially more expensive than porting the platform-specific components of a JVM."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1470875097, "post_id": 38884702, "comment_id": 65131648, "body": "@OliverCharlesworth It would indeed be a fairer comparison, but porting library code requires lower (or at least more common) skills than retargeting compiler backends. It doesn&#39;t sound like the video has much of a clue about compiler architectures."}, {"owner": {"reputation": 743, "user_id": 1304252, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/QsuGZ.jpg?s=128&g=1", "display_name": "lv99Zubat", "link": "https://stackoverflow.com/users/1304252/lv99zubat"}, "edited": false, "score": 0, "creation_date": 1471017566, "post_id": 38884702, "comment_id": 65200979, "body": "Can anyone give me advice as to how to edit this question such that it is not opinion based? I fail to see how saying what is different about two things is a matter of opinion. I took out the part (see edit) that may have led someone to think the question is opinion based even though it wasn&#39;t substantial to the answer of the question."}], "answers": [{"comments": [{"owner": {"reputation": 743, "user_id": 1304252, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/QsuGZ.jpg?s=128&g=1", "display_name": "lv99Zubat", "link": "https://stackoverflow.com/users/1304252/lv99zubat"}, "edited": false, "score": 0, "creation_date": 1470928533, "post_id": 38884873, "comment_id": 65159374, "body": "Correct me if I&#39;m wrong, but the JVM is most likely written in either C or C++. I have to run the JVM on an architecure. So it doesn&#39;t make a difference whether I run Java/JVM on an architecture or straight C/C++. Either way I need a C/C++ compiler written for the architecture."}], "tags": [], "owner": {"reputation": 182843, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "is_accepted": false, "score": 1, "last_activity_date": 1470870345, "last_edit_date": 1470870345, "creation_date": 1470869931, "answer_id": 38884873, "question_id": 38884702, "link": "https://stackoverflow.com/questions/38884702/how-is-making-the-jvm-compatible-with-a-cpu-architecture-different-than-making-a/38884873#38884873", "title": "How is making the JVM compatible with a CPU architecture different than making a compiler for a CPU architecture?", "body": "<p>The initial (BETA) versions of Java were <em>derided</em> for being \"write once, test everywhere\". Improving the quality of the software on the initial platforms (SunOS/Solaris, Windows, Mac, etc) greatly increased its' portability (and <em>portable software</em> is inherently easier to port). Currently, there are multiple implementations of Java (IBM, JRockit, etc).</p>\n\n<p>Fundamentally, Java is the <em>specification</em> of a virtual machine that executes byte codes; and <strong>not</strong> any particular implementation. Because the byte code is the same across platform the Java compiler doesn't need to be altered to support new platforms. Further, much of the <a href=\"http://openjdk.java.net/\" rel=\"nofollow\">OpenJDK</a> (and, thus, the Oracle JVM) is written in Java. Basically, <a href=\"https://en.wikipedia.org/wiki/Bootstrapping_(compilers)\" rel=\"nofollow\">bootstrapping</a> Java is simplified compared to bootstrapping a compiler for a \"real\" CPU architecture<sup><strong>1</strong></sup>.</p>\n\n<p><sup><strong>1</strong><sub>Excluding CPUs that <a href=\"https://en.wikipedia.org/wiki/Java_processor\" rel=\"nofollow\">natively execute Java byte code</a>.</sub></sup></p>\n"}], "owner": {"reputation": 743, "user_id": 1304252, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/QsuGZ.jpg?s=128&g=1", "display_name": "lv99Zubat", "link": "https://stackoverflow.com/users/1304252/lv99zubat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "closed_date": 1470901837, "answer_count": 1, "score": 5, "last_activity_date": 1470929147, "creation_date": 1470868805, "last_edit_date": 1470929147, "question_id": 38884702, "link": "https://stackoverflow.com/questions/38884702/how-is-making-the-jvm-compatible-with-a-cpu-architecture-different-than-making-a", "closed_reason": "Opinion-based", "title": "How is making the JVM compatible with a CPU architecture different than making a compiler for a CPU architecture?", "body": "<p>In my quest to understand the reasoning to use Java over C++ or vice versa for writing applications, I became stuck on this one point. I watched a video introducing me to Java and they said the reason there is a JVM is because it makes Java portable, meaning it runs on many architectures like phones and stuff without having to write a new compiler for each different CPU OS combo. But people must have to do something to make it compatible with each CPU and OS. I don't see how using a JVM changes anything.</p>\n"}, {"tags": ["c++", "cuda", "gtk", "glade", "nsight"], "comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1470872934, "post_id": 38884643, "comment_id": 65131114, "body": "Please show your compilation commands."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1470894990, "post_id": 38884643, "comment_id": 65136874, "body": "That is a linking error, not a compilation error. You have to <i>link</i> the relevant GTK libraries"}, {"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 0, "creation_date": 1470920320, "post_id": 38884643, "comment_id": 65153006, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 2448547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RjHw9.jpg?s=128&g=1", "display_name": "FabioB", "link": "https://stackoverflow.com/users/2448547/fabiob"}, "edited": false, "score": 0, "creation_date": 1470929115, "post_id": 38893071, "comment_id": 65159774, "body": "Thanks, I&#39;ll try to figure out this ASAP."}, {"owner": {"reputation": 73, "user_id": 2448547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RjHw9.jpg?s=128&g=1", "display_name": "FabioB", "link": "https://stackoverflow.com/users/2448547/fabiob"}, "edited": false, "score": 0, "creation_date": 1470945056, "post_id": 38893071, "comment_id": 65168552, "body": "I just edited my question and added the nvcc commands used at build. I&#39;ll try to figure out the correct options.."}, {"owner": {"reputation": 73, "user_id": 2448547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RjHw9.jpg?s=128&g=1", "display_name": "FabioB", "link": "https://stackoverflow.com/users/2448547/fabiob"}, "edited": false, "score": 0, "creation_date": 1470950260, "post_id": 38893071, "comment_id": 65171018, "body": "Well, I spent 2 hours trying everything I could imagine in the settings both NVCC compiler and NVCC linker, changing options order, relative and absolute paths to libraries....  I&#39;ll try to ask in the Nvidia dev forums."}, {"owner": {"reputation": 73, "user_id": 2448547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RjHw9.jpg?s=128&g=1", "display_name": "FabioB", "link": "https://stackoverflow.com/users/2448547/fabiob"}, "edited": false, "score": 0, "creation_date": 1470956659, "post_id": 38893071, "comment_id": 65173276, "body": "Any idea if it would be possible to use pkg-config trough the nvcc linker settings in Nsight?"}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "reply_to_user": {"reputation": 73, "user_id": 2448547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RjHw9.jpg?s=128&g=1", "display_name": "FabioB", "link": "https://stackoverflow.com/users/2448547/fabiob"}, "edited": false, "score": 0, "creation_date": 1470999535, "post_id": 38893071, "comment_id": 65189650, "body": "@Fabio: Yes it is possible"}, {"owner": {"reputation": 73, "user_id": 2448547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RjHw9.jpg?s=128&g=1", "display_name": "FabioB", "link": "https://stackoverflow.com/users/2448547/fabiob"}, "edited": false, "score": 0, "creation_date": 1471083354, "post_id": 38893071, "comment_id": 65219179, "body": "Thanks, it worked! I now have another error tough:     <code>&#47;usr&#47;bin&#47;ld: .&#47;src&#47;GladeTest.o: relocation R_X86_64_32S against &#39;.bss&#39; can not be used when making a shared object; recompile with -fPIC</code>"}, {"owner": {"reputation": 73, "user_id": 2448547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RjHw9.jpg?s=128&g=1", "display_name": "FabioB", "link": "https://stackoverflow.com/users/2448547/fabiob"}, "edited": false, "score": 0, "creation_date": 1471084000, "post_id": 38893071, "comment_id": 65219339, "body": "nevermind, I simply recompiled with -fPIC as mentionned in the error message(...) and it work now.... Thanks again !"}, {"owner": {"reputation": 73, "user_id": 2448547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RjHw9.jpg?s=128&g=1", "display_name": "FabioB", "link": "https://stackoverflow.com/users/2448547/fabiob"}, "edited": false, "score": 0, "creation_date": 1471084069, "post_id": 38893071, "comment_id": 65219351, "body": "tough, I used gtk+-3.0 and not gtk+-2.0"}], "tags": [], "owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "is_accepted": true, "score": 3, "last_activity_date": 1471000019, "last_edit_date": 1471000019, "creation_date": 1470909420, "answer_id": 38893071, "question_id": 38884643, "link": "https://stackoverflow.com/questions/38884643/using-glade-with-cuda-compiler-nvidia-eclipse-nsight-which-nvcc-linker-sett/38893071#38893071", "title": "Using Glade with CUDA compiler (Nvidia Eclipse Nsight) -&gt; which NVCC linker settings?", "body": "<p>It is important to realize that the source of the errors you are seeing is linking, not compilation, and the reason will be that you are not linking the required GTK libraries.</p>\n\n<p>I was able to produce an executable from the code you posted (with a tiny modification) against GTK2 on a Ubuntu system like this:</p>\n\n<pre><code>$ nvcc -arch=sm_52 -Xcompiler=\"`pkg-config --cflags gtk+-2.0`\" cuda_glade.cu `pkg-config --libs gtk+-2.0`\n\n$ ldd a.out\n    linux-vdso.so.1 =&gt;  (0x00007ffdf351c000)\n    libgtk-x11-2.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libgtk-x11-2.0.so.0 (0x00007f85eece0000)\n    libgobject-2.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0 (0x00007f85eea8e000)\n    librt.so.1 =&gt; /lib/x86_64-linux-gnu/librt.so.1 (0x00007f85ee886000)\n    libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f85ee668000)\n    libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f85ee464000)\n    libstdc++.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f85ee15f000)\n    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f85edd9a000)\n    libgdk-x11-2.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libgdk-x11-2.0.so.0 (0x00007f85edae7000)\n    libgmodule-2.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libgmodule-2.0.so.0 (0x00007f85ed8e2000)\n    libpangocairo-1.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libpangocairo-1.0.so.0 (0x00007f85ed6d5000)\n    libX11.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libX11.so.6 (0x00007f85ed3a0000)\n    libXfixes.so.3 =&gt; /usr/lib/x86_64-linux-gnu/libXfixes.so.3 (0x00007f85ed199000)\n    libatk-1.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libatk-1.0.so.0 (0x00007f85ecf77000)\n    libcairo.so.2 =&gt; /usr/lib/x86_64-linux-gnu/libcairo.so.2 (0x00007f85ecc6c000)\n    libgdk_pixbuf-2.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libgdk_pixbuf-2.0.so.0 (0x00007f85eca4a000)\n    libgio-2.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libgio-2.0.so.0 (0x00007f85ec6d7000)\n    libpangoft2-1.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libpangoft2-1.0.so.0 (0x00007f85ec4c2000)\n    libpango-1.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libpango-1.0.so.0 (0x00007f85ec274000)\n    libfontconfig.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libfontconfig.so.1 (0x00007f85ec038000)\n    libglib-2.0.so.0 =&gt; /lib/x86_64-linux-gnu/libglib-2.0.so.0 (0x00007f85ebd30000)\n    libm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007f85eba29000)\n    libffi.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libffi.so.6 (0x00007f85eb821000)\n    /lib64/ld-linux-x86-64.so.2 (0x000055d54fa62000)\n    libgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f85eb60a000)\n    libXrender.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libXrender.so.1 (0x00007f85eb400000)\n    libXinerama.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libXinerama.so.1 (0x00007f85eb1fd000)\n    libXi.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libXi.so.6 (0x00007f85eafec000)\n    libXrandr.so.2 =&gt; /usr/lib/x86_64-linux-gnu/libXrandr.so.2 (0x00007f85eade2000)\n    libXcursor.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libXcursor.so.1 (0x00007f85eabd8000)\n    libXcomposite.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libXcomposite.so.1 (0x00007f85ea9d4000)\n    libXdamage.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libXdamage.so.1 (0x00007f85ea7d1000)\n    libXext.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libXext.so.6 (0x00007f85ea5bf000)\n    libfreetype.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libfreetype.so.6 (0x00007f85ea31b000)\n    libxcb.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libxcb.so.1 (0x00007f85ea0fc000)\n    libpixman-1.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libpixman-1.so.0 (0x00007f85e9e53000)\n    libpng12.so.0 =&gt; /lib/x86_64-linux-gnu/libpng12.so.0 (0x00007f85e9c2d000)\n    libxcb-shm.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libxcb-shm.so.0 (0x00007f85e9a2a000)\n    libxcb-render.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libxcb-render.so.0 (0x00007f85e9820000)\n    libz.so.1 =&gt; /lib/x86_64-linux-gnu/libz.so.1 (0x00007f85e9607000)\n    libselinux.so.1 =&gt; /lib/x86_64-linux-gnu/libselinux.so.1 (0x00007f85e93e3000)\n    libresolv.so.2 =&gt; /lib/x86_64-linux-gnu/libresolv.so.2 (0x00007f85e91c8000)\n    libharfbuzz.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libharfbuzz.so.0 (0x00007f85e8f73000)\n    libthai.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libthai.so.0 (0x00007f85e8d69000)\n    libexpat.so.1 =&gt; /lib/x86_64-linux-gnu/libexpat.so.1 (0x00007f85e8b3f000)\n    libpcre.so.3 =&gt; /lib/x86_64-linux-gnu/libpcre.so.3 (0x00007f85e8901000)\n    libXau.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libXau.so.6 (0x00007f85e86fc000)\n    libXdmcp.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libXdmcp.so.6 (0x00007f85e84f6000)\n    libgraphite2.so.3 =&gt; /usr/lib/x86_64-linux-gnu/libgraphite2.so.3 (0x00007f85e82cf000)\n    libdatrie.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libdatrie.so.1 (0x00007f85e80c8000)\n</code></pre>\n\n<p>Here I am using <code>pkg-config</code> to get the necessary compiler flags and linker dependencies and just passing them directly to <code>nvcc</code>. You could construct them by hand if you don't have access to <code>pkg-config</code>. The important point is putting library dependencies <em>after</em> your own code. The GNU linker reads dependencies left-to-right, and if you specify a library <em>before</em> code that depends on it, the linker will just discard the library and cause a linking error.</p>\n\n<hr>\n\n<p>EDIT: To do this in Nsight Eclipse edition</p>\n\n<p>Add the <code>pkg-config</code> commands in the Project properties for both the compiler and linker phases using <code>$(shell pkg-config ...)</code>:\n<a href=\"https://i.stack.imgur.com/Z3FNR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z3FNR.png\" alt=\"nvcc compile flags\"></a>\n<a href=\"https://i.stack.imgur.com/POCNN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/POCNN.png\" alt=\"nvcc linker flags\"></a></p>\n\n<p>Building the project with your code gives this build log:</p>\n\n<pre><code>make all \nBuilding file: ../src/glade_cuda.cu\nInvoking: NVCC Compiler\n/opt/cuda-7.5/bin/nvcc -O3 -Xcompiler -fPIC -Xcompiler -pthread -I/usr/include/gtk-2.0 -I/usr/lib/x86_64-linux-gnu/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/pango-1.0 -I/usr/include/gio-unix-2.0/ -I/usr/include/freetype2 -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/pixman-1 -I/usr/include/libpng12 -I/usr/include/harfbuzz   -gencode arch=compute_52,code=sm_52  -odir \"src\" -M -o \"src/glade_cuda.d\" \"../src/glade_cuda.cu\"\n/opt/cuda-7.5/bin/nvcc -O3 -Xcompiler -fPIC -Xcompiler -pthread -I/usr/include/gtk-2.0 -I/usr/lib/x86_64-linux-gnu/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/pango-1.0 -I/usr/include/gio-unix-2.0/ -I/usr/include/freetype2 -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/pixman-1 -I/usr/include/libpng12 -I/usr/include/harfbuzz   --compile --relocatable-device-code=false -gencode arch=compute_52,code=compute_52 -gencode arch=compute_52,code=sm_52  -x cu -o  \"src/glade_cuda.o\" \"../src/glade_cuda.cu\"\nFinished building: ../src/glade_cuda.cu\n\nBuilding target: libGTK test\nInvoking: NVCC Linker\n/opt/cuda-7.5/bin/nvcc --cudart static -shared -Xlinker -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lgio-2.0 -lpangoft2-1.0 -lpangocairo-1.0 -lgdk_pixbuf-2.0 -lcairo -lpango-1.0 -lfontconfig -lgobject-2.0 -lglib-2.0 -lfreetype   --relocatable-device-code=false -gencode arch=compute_52,code=compute_52 -gencode arch=compute_52,code=sm_52 -link -o  \"libGTK test\"  ./src/glade_cuda.o   \nFinished building target: libGTK test\n\n\n12:57:43 Build Finished (took 3s.963ms)\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 2448547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RjHw9.jpg?s=128&g=1", "display_name": "FabioB", "link": "https://stackoverflow.com/users/2448547/fabiob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 1, "accepted_answer_id": 38893071, "answer_count": 1, "score": 0, "last_activity_date": 1471000019, "creation_date": 1470868502, "last_edit_date": 1470951811, "question_id": 38884643, "link": "https://stackoverflow.com/questions/38884643/using-glade-with-cuda-compiler-nvidia-eclipse-nsight-which-nvcc-linker-sett", "title": "Using Glade with CUDA compiler (Nvidia Eclipse Nsight) -&gt; which NVCC linker settings?", "body": "<p>I'm starting a new project which involves CUDA, and I would like to use Glade (v3) for the GUI.</p>\n\n<p>I'm trying to implement a Glade project in a basic CUDA template project, and here is my code so far:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;numeric&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;gtk/gtk.h&gt;\n\nstatic void CheckCudaErrorAux (const char *, unsigned, const char *, cudaError_t);\n#define CUDA_CHECK_RETURN(value) CheckCudaErrorAux(__FILE__,__LINE__, #value, value)\n\n/**\n * CUDA kernel that computes reciprocal values for a given vector\n */\n__global__ void reciprocalKernel(float *data, unsigned vectorSize) {\n    unsigned idx = blockIdx.x*blockDim.x+threadIdx.x;\n    if (idx &lt; vectorSize)\n        data[idx] = 1.0/data[idx];\n}\n\n/**\n * Host function that copies the data and launches the work on GPU\n */\nfloat *gpuReciprocal(float *data, unsigned size)\n{\n    float *rc = new float[size];\n    float *gpuData;\n\n    CUDA_CHECK_RETURN(cudaMalloc((void **)&amp;gpuData, sizeof(float)*size));\n    CUDA_CHECK_RETURN(cudaMemcpy(gpuData, data, sizeof(float)*size, cudaMemcpyHostToDevice));\n\n    static const int BLOCK_SIZE = 256;\n    const int blockCount = (size+BLOCK_SIZE-1)/BLOCK_SIZE;\n    reciprocalKernel&lt;&lt;&lt;blockCount, BLOCK_SIZE&gt;&gt;&gt; (gpuData, size);\n\n    CUDA_CHECK_RETURN(cudaMemcpy(rc, gpuData, sizeof(float)*size, cudaMemcpyDeviceToHost));\n    CUDA_CHECK_RETURN(cudaFree(gpuData));\n    return rc;\n}\n\nfloat *cpuReciprocal(float *data, unsigned size)\n{\n    float *rc = new float[size];\n    for (unsigned cnt = 0; cnt &lt; size; ++cnt) rc[cnt] = 1.0/data[cnt];\n    return rc;\n}\n\n\nvoid initialize(float *data, unsigned size)\n{\n    for (unsigned i = 0; i &lt; size; ++i)\n        data[i] = .5*(i+1);\n}\n\nint main(int argc, char *argv[])\n{\n    static const int WORK_SIZE = 65530;\n    float *data = new float[WORK_SIZE];\n\n    initialize (data, WORK_SIZE);\n\n    GtkBuilder      *builder;\n    GtkWidget       *window;\n\n    gtk_init(&amp;argc, &amp;argv);\n\n    builder = gtk_builder_new();\n    gtk_builder_add_from_file (builder, \"GladeTest01.glade\", NULL);\n\n    window = GTK_WIDGET(gtk_builder_get_object(builder, \"applicationwindow1\"));\n    gtk_builder_connect_signals(builder, NULL);\n\n    g_object_unref(builder);\n\n    gtk_widget_show(window);\n    gtk_main();\n\n    /*\n    float *recCpu = cpuReciprocal(data, WORK_SIZE);\n    float *recGpu = gpuReciprocal(data, WORK_SIZE);\n    float cpuSum = std::accumulate (recCpu, recCpu+WORK_SIZE, 0.0);\n    float gpuSum = std::accumulate (recGpu, recGpu+WORK_SIZE, 0.0);\n\n    /* Verify the results *//*\n    std::cout&lt;&lt;\"gpuSum = \"&lt;&lt;gpuSum&lt;&lt; \" cpuSum = \" &lt;&lt;cpuSum&lt;&lt;std::endl;\n\n    /* Free memory *//*\n    delete[] data;\n    delete[] recCpu;\n    delete[] recGpu;\n*/\n    return 0;\n}\n\n// called when window is closed\nvoid on_QuitApp()\n{\n    gtk_main_quit();\n}\n</code></pre>\n\n<p>At compilation, I'm unable to understand why I got these errors : </p>\n\n<pre><code>/home/fabio/AppTests/GladeTest01/Debug/../src/GladeTest.cu:72: undefined reference to `gtk_init'\n/home/fabio/AppTests/GladeTest01/Debug/../src/GladeTest.cu:74: undefined reference to `gtk_builder_new'\n/home/fabio/AppTests/GladeTest01/Debug/../src/GladeTest.cu:75: undefined reference to `gtk_builder_add_from_file'\n/home/fabio/AppTests/GladeTest01/Debug/../src/GladeTest.cu:77: undefined reference to `gtk_widget_get_type'\n/home/fabio/AppTests/GladeTest01/Debug/../src/GladeTest.cu:77: undefined reference to `gtk_builder_get_object'\n/home/fabio/AppTests/GladeTest01/Debug/../src/GladeTest.cu:77: undefined reference to `g_type_check_instance_cast'\n/home/fabio/AppTests/GladeTest01/Debug/../src/GladeTest.cu:78: undefined reference to `gtk_builder_connect_signals'\n/home/fabio/AppTests/GladeTest01/Debug/../src/GladeTest.cu:80: undefined reference to `g_object_unref'\n/home/fabio/AppTests/GladeTest01/Debug/../src/GladeTest.cu:82: undefined reference to `gtk_widget_show'\n/home/fabio/AppTests/GladeTest01/Debug/../src/GladeTest.cu:83: undefined reference to `gtk_main'\n./src/GladeTest.o: In function `on_QuitApp()':\n/home/fabio/AppTests/GladeTest01/Debug/../src/GladeTest.cu:105: undefined reference to `gtk_main_quit'\ncollect2: error: ld returned 1 exit status\nmake: *** [GladeTest] Error 1\n</code></pre>\n\n<p>As everything seems to be defined in gtk.h and all the other includes in it...\nWhat am I missing here ?</p>\n\n<p>Is somebody able to give me some directions or to tell me what I am doing wrong?</p>\n\n<p>Edit :\nHere is the compilation commands used :</p>\n\n<pre><code>Invoking: NVCC Compiler\n/usr/local/cuda-7.5/bin/nvcc -I/usr/include/gtk-3.0 -I/usr/include/atk-1.0 -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/glib-2.0 -G -g -O3 -gencode arch=compute_52,code=sm_52 -m64 -odir \"src\" -M -o \"src/GladeTest.d\" \"../src/GladeTest.cu\"\n/usr/local/cuda-7.5/bin/nvcc -I/usr/include/gtk-3.0 -I/usr/include/atk-1.0 -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/glib-2.0 -G -g -O3 --compile --relocatable-device-code=false -gencode arch=compute_52,code=compute_52 -gencode arch=compute_52,code=sm_52 -m64  -x cu -o  \"src/GladeTest.o\" \"../src/GladeTest.cu\"\nFinished building: ../src/GladeTest.cu\n\nBuilding target: GladeTest\nInvoking: NVCC Linker\n/usr/local/cuda-7.5/bin/nvcc --cudart static --relocatable-device-code=false -gencode arch=compute_52,code=compute_52 -gencode arch=compute_52,code=sm_52 -m64 -link -o  \"GladeTest\"  ./src/GladeTest.o    \n</code></pre>\n\n<p>If I understood correctly the answers, all the -I options should be in the nvcc linker call and not in the nvcc compiler command ?</p>\n\n<p>Edit 2 :\nHere is one of the many variants I tried. With the same results everytime :</p>\n\n<pre><code>Invoking: NVCC Compiler\n/usr/local/cuda-7.5/bin/nvcc -I/usr/include/gtk-3.0 -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/pango-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/atk-1.0 -G -g -O3 -gencode arch=compute_52,code=sm_52 -m64 -odir \"src\" -M -o \"src/GladeTest.d\" \"../src/GladeTest.cu\"\n/usr/local/cuda-7.5/bin/nvcc -I/usr/include/gtk-3.0 -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/pango-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/atk-1.0 -G -g -O3 --compile --relocatable-device-code=false -gencode arch=compute_52,code=compute_52 -gencode arch=compute_52,code=sm_52 -m64  -x cu -o  \"src/GladeTest.o\" \"../src/GladeTest.cu\"\nFinished building: ../src/GladeTest.cu\n\nBuilding target: GladeTest\nInvoking: NVCC Linker\n/usr/local/cuda-7.5/bin/nvcc --cudart static -L/usr/include/gtk-3.0 -L/usr/include/glib-2.0 -L/usr/lib/x86_64-linux-gnu/glib-2.0/include -L/usr/include/pango-1.0 -L/usr/include/cairo -L/usr/include/gdk-pixbuf-2.0 -L/usr/include/atk-1.0 -lGL -lGLU -lglut  --relocatable-device-code=false -gencode arch=compute_52,code=compute_52 -gencode arch=compute_52,code=sm_52 -m64 -link -o  \"GladeTest\"  ./src/GladeTest.o\n</code></pre>\n"}, {"tags": ["c++", "openssl", "char", "aes"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1470872462, "post_id": 38884506, "comment_id": 65131006, "body": "You should <i>not</i> use <code>AES_encrypt</code> and friends. That&#39;s a software-only implementation, so you will not enjoy hardware support, like AES-NI. You should be using <code>EVP_*</code> functions. See <a href=\"http://wiki.openssl.org/index.php/EVP_Symmetric_Encryption_and_Decryption\" rel=\"nofollow noreferrer\">EVP Symmetric Encryption and Decryption</a> on the OpenSSL wiki. In fact, you should probably be using authenticated encryption because it provides <i>both</i> confidentiality and authenticity. See <a href=\"http://wiki.openssl.org/index.php/EVP_Authenticated_Encryption_and_Decryption\" rel=\"nofollow noreferrer\">EVP Authenticated Encryption and Decryption</a> on the OpenSSL wiki."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1470904471, "post_id": 38884506, "comment_id": 65142275, "body": "<b><i><code>KS (AESKey) : L&quot;F-ZTNW meOJLK1s5&quot;</code></i></b> - Windows uses UTF-16 and Linux uses UTF-32. That means half of your key bits are 0 on Windows (effectively, 64-bit key), and three-quarters of your key bits are 0 on Linux (effectively, 32-bit key). You need to digest your key string with something like HKDF to extract the entropy and then key the cipher. Otherwise, there&#39;s a non-trivial threat because the bad guy can brute force the keys."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 6702403, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f654b0dd99fe1282b7860bd4df6a43cd?s=128&d=identicon&r=PG&f=1", "display_name": "Jakooop", "link": "https://stackoverflow.com/users/6702403/jakooop"}, "edited": false, "score": 0, "creation_date": 1470901493, "post_id": 38885983, "comment_id": 65140456, "body": "Thanks ! This code work with large file but still I have one little problem first 16 chars is invalid (16 of 580 000 )"}, {"owner": {"reputation": 19, "user_id": 6702403, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f654b0dd99fe1282b7860bd4df6a43cd?s=128&d=identicon&r=PG&f=1", "display_name": "Jakooop", "link": "https://stackoverflow.com/users/6702403/jakooop"}, "edited": false, "score": 0, "creation_date": 1470901688, "post_id": 38885983, "comment_id": 65140572, "body": "plain text lenght = 564944 crypt = 564960 decrypt = 564944"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 19, "user_id": 6702403, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f654b0dd99fe1282b7860bd4df6a43cd?s=128&d=identicon&r=PG&f=1", "display_name": "Jakooop", "link": "https://stackoverflow.com/users/6702403/jakooop"}, "edited": false, "score": 0, "creation_date": 1470903335, "post_id": 38885983, "comment_id": 65141600, "body": "@Jakooop - Please open another question. Provide the code you are using (including the tweaks you have performed), and state exactly what is wrong with the first 16 characters."}, {"owner": {"reputation": 19, "user_id": 6702403, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f654b0dd99fe1282b7860bd4df6a43cd?s=128&d=identicon&r=PG&f=1", "display_name": "Jakooop", "link": "https://stackoverflow.com/users/6702403/jakooop"}, "edited": false, "score": 0, "creation_date": 1470903751, "post_id": 38885983, "comment_id": 65141835, "body": "ok I find fails . I must set IV and AESKey not random a I made bad convert"}], "tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": true, "score": 2, "last_activity_date": 1470880939, "last_edit_date": 1470880939, "creation_date": 1470879351, "answer_id": 38885983, "question_id": 38884506, "link": "https://stackoverflow.com/questions/38884506/openssl-aes-128-cbc-0-crash-enrypted-char/38885983#38885983", "title": "OpenSSL AES 128 CBC \\0 crash enrypted char*", "body": "<p>Here's an example which demonstrates how to use <code>std::strings</code> to manage buffers while using OpenSSL's EVP interfaces. It also avoids the extra copying you are doing. You still need to improve your keying strategy.</p>\n\n<p>You should provide a zeroize'ing allocator. You should consider an <a href=\"http://wiki.openssl.org/index.php/EVP_Authenticated_Encryption_and_Decryption\" rel=\"nofollow\">Authenticated Encryption mode</a>.</p>\n\n<p>Compile it with <code>g++ -std=c++11 test.cxx -o test.exe -lcrypto</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;memory&gt;\n#include &lt;stdexcept&gt;\nusing namespace std;\n\n#include &lt;openssl/evp.h&gt;\n#include &lt;openssl/rand.h&gt;\n\nstatic const unsigned int KEY_SIZE = 16;\nstatic const unsigned int BLOCK_SIZE = 16;\n\ntypedef unsigned char byte;\nusing EVP_CIPHER_CTX_free_ptr = std::unique_ptr&lt;EVP_CIPHER_CTX, decltype(&amp;::EVP_CIPHER_CTX_free)&gt;;\n\nvoid gen_keys(byte key[KEY_SIZE], byte iv[BLOCK_SIZE]);\nvoid encrypt(const byte key[KEY_SIZE], const byte iv[BLOCK_SIZE], const string&amp; ptext, string&amp; ctext);\nvoid decrypt(const byte key[KEY_SIZE], const byte iv[BLOCK_SIZE], const string&amp; ctext, string&amp; rtext);\n\nint main(int argc, char* argv[])\n{\n  // plaintext, ciphertext, recovered text\n  string ptext = \"Now is the time for all good men to come to the aide of their country\";\n  string ctext, rtext;\n\n  byte key[KEY_SIZE], iv[BLOCK_SIZE];\n  gen_keys(key, iv);\n\n  encrypt(key, iv, ptext, ctext);\n  decrypt(key, iv, ctext, rtext);\n\n  cout &lt;&lt; \"Recovered message:\\n\" &lt;&lt; rtext &lt;&lt; endl;\n\n  return 0;\n}\n\nvoid gen_keys(byte key[KEY_SIZE], byte iv[BLOCK_SIZE])\n{\n    int rc = RAND_bytes(key, KEY_SIZE);\n    if (rc != 1)\n      throw runtime_error(\"RAND_bytes key failed\");\n\n    rc = RAND_bytes(iv, BLOCK_SIZE);\n    if (rc != 1)\n      throw runtime_error(\"RAND_bytes for iv failed\");\n}\n\nvoid encrypt(const byte key[KEY_SIZE], const byte iv[BLOCK_SIZE], const string&amp; ptext, string&amp; ctext)\n{\n    EVP_CIPHER_CTX_free_ptr ctx(EVP_CIPHER_CTX_new(), ::EVP_CIPHER_CTX_free);\n    int rc = EVP_EncryptInit_ex(ctx.get(), EVP_aes_128_cbc(), NULL, key, iv);\n    if (rc != 1)\n      throw runtime_error(\"EVP_EncryptInit_ex failed\");\n\n    // Cipher text will be upto 16 bytes larger than plain text\n    ctext.resize(ptext.size()+16);\n\n    int out_len1 = (int)ctext.size();    \n    rc = EVP_EncryptUpdate(ctx.get(), (byte*)&amp;ctext[0], &amp;out_len1, (const byte*)&amp;ptext[0], (int)ptext.size());\n    if (rc != 1)\n      throw runtime_error(\"EVP_EncryptUpdate failed\");\n\n    int out_len2 = (int)ctext.size() - out_len1;\n    rc = EVP_EncryptFinal_ex(ctx.get(), (byte*)&amp;ctext[0]+out_len1, &amp;out_len2);\n    if (rc != 1)\n      throw runtime_error(\"EVP_EncryptFinal_ex failed\");\n\n    ctext.resize(out_len1 + out_len2);\n}\n\nvoid decrypt(const byte key[KEY_SIZE], const byte iv[BLOCK_SIZE], const string&amp; ctext, string&amp; rtext)\n{\n    EVP_CIPHER_CTX_free_ptr ctx(EVP_CIPHER_CTX_new(), ::EVP_CIPHER_CTX_free);\n    int rc = EVP_DecryptInit_ex(ctx.get(), EVP_aes_128_cbc(), NULL, key, iv);\n    if (rc != 1)\n      throw runtime_error(\"EVP_DecryptInit_ex failed\");\n\n    // Recovered text will be smaller than cipher text, not larger\n    rtext.resize(ctext.size());\n\n    int out_len1 = (int)rtext.size();    \n    rc = EVP_DecryptUpdate(ctx.get(), (byte*)&amp;rtext[0], &amp;out_len1, (const byte*)&amp;ctext[0], (int)ctext.size());\n    if (rc != 1)\n      throw runtime_error(\"EVP_DecryptUpdate failed\");\n\n    int out_len2 = (int)rtext.size() - out_len1;\n    rc = EVP_DecryptFinal_ex(ctx.get(), (byte*)&amp;rtext[0]+out_len1, &amp;out_len2);\n    if (rc != 1)\n      throw runtime_error(\"EVP_DecryptFinal_ex failed\");\n\n    rtext.resize(out_len1 + out_len2);\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6702403, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f654b0dd99fe1282b7860bd4df6a43cd?s=128&d=identicon&r=PG&f=1", "display_name": "Jakooop", "link": "https://stackoverflow.com/users/6702403/jakooop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 795, "favorite_count": 1, "accepted_answer_id": 38885983, "answer_count": 1, "score": 0, "last_activity_date": 1470880939, "creation_date": 1470867710, "last_edit_date": 1470874428, "question_id": 38884506, "link": "https://stackoverflow.com/questions/38884506/openssl-aes-128-cbc-0-crash-enrypted-char", "title": "OpenSSL AES 128 CBC \\0 crash enrypted char*", "body": "<p>I have problem with OpenSSL AES ( I use aes.h ) :</p>\n\n<ol>\n<li><p>get binary file (.pdf , .jpg ) or some .xml , .txt about 5000 chars , then i enrypt base64.</p></li>\n<li><p>When I try enrypt AES i get bad size ( Random 400 , 200 , 50 ) , my AESKey is random 128bits from chars : [abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ,.-@#&amp;*oeOE\u00af_ ]</p></li>\n</ol>\n\n<p>I think that problem is '\\0' enrypted char but i don't know can I extort entry\n(string can save char array with \\0 element but unsigned char* and char* is aborted )</p>\n\n<p>this is my code : </p>\n\n<pre><code>std::string PFHelper::ASE_encode(std::string in, wchar_t* KS)\n{\n//const unsigned char* aes_input = reinterpret_cast&lt;const unsigned char *&gt; (in.c_str());\nunsigned char* aes_input = new unsigned char[in.length()];\nstrcpy((char*)aes_input, in.c_str());\nstd::string KS_string = PFHelper::ConvertFromUtf8ToString(KS);\nunsigned char* aes_key = new unsigned char[16];\nstrcpy((char*)aes_key, KS_string.c_str());\n/* Input data to encrypt */\nunsigned char iv[AES_BLOCK_SIZE];\nmemset(iv, 0x00, AES_BLOCK_SIZE);\nconst size_t encslength = ((in.length() + AES_BLOCK_SIZE) / AES_BLOCK_SIZE) * AES_BLOCK_SIZE;\n/* Buffers for Encryption and Decryption */\nunsigned char * enc_out = new unsigned char [encslength];\n//unsigned char * dec_out = new unsigned char[in.length()];\nmemset(enc_out, 0, encslength);\n//memset(dec_out, 0, in.length());\nAES_KEY enc_key;\nAES_set_encrypt_key(aes_key, 128, &amp;enc_key);\nAES_cbc_encrypt(aes_input, enc_out, encslength, &amp;enc_key, iv, AES_ENCRYPT);\n\n//AES_KEY decrypt;\n//memset(iv, 0x00, AES_BLOCK_SIZE);\n\n\n//AES_cbc_encrypt((unsigned char*)enc_out, dec_out, encslength, &amp;decrypt, iv, AES_DECRYPT);\n//std::string returned = ConvertFromUnsignedCharToString(enc_out);\nmemset(aes_key, 0x00, 16);\nmemset(aes_input, 0x00, in.length());\nreturn ConvertFromUnsignedCharToString(enc_out);\n}\n</code></pre>\n\n<p>Sample value :</p>\n\n<p>KS (AESKey) :  L\"F-ZTNW meOJLK1s5\"</p>\n\n<p>in(5464chars) : PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVR.....</p>\n\n<p>out(51chars) : \"\u00a9\u00a6\u013e\u2018\u0147\u00b7rno\u015a8n\u017e\u0119w\u0159\u00eb\u016fl2\u011bY \u00dfJ2\u00a8\u00df\u0148O\u00d7 ohX\u00ad\u201a\u017d~\u015a\u010c\u201dE</p>\n\n<p>I try EVP and typical char key and problem is the same </p>\n\n<pre><code>//set back to normal\nunsigned char* aes_input = new unsigned char[in.length()];\nstrcpy((char*)aes_input, in.c_str());\n\nunsigned char* dec_out = new unsigned char[in.length()];\nmemset(dec_out, 0, in.length());\ndec_out[in.length()] = '\\0';\n\n/* A 256 bit key */\nunsigned char *key = (unsigned char *)\"01234567890123456789012345678901\";\n\n/* A 128 bit IV */\nunsigned char *iv = (unsigned char *)\"01234567890123456\";\n\nint lenght;\nint c_len = in.length() + AES_BLOCK_SIZE;\n//Set up encryption\nint f_len = 0;\nEVP_CIPHER_CTX *ctx;\nctx = EVP_CIPHER_CTX_new();\nif (EVP_EncryptInit_ex(ctx, EVP_aes_256_cbc(), NULL, key, iv) != 1)\n{\n    wcout &lt;&lt; L\"1\";\n}\nif (EVP_EncryptUpdate(ctx, dec_out, &amp;lenght, aes_input, in.length()) != 1)\n{\n    wcout &lt;&lt; L\"2\";\n}\nif (EVP_EncryptFinal_ex(ctx, dec_out, &amp;lenght) != 1)\n{\n    wcout &lt;&lt; L\"3\";\n}\nreturn ConvertFromUnsignedCharToString(dec_out);\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 1328, "user_id": 1496826, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7b0948fbc76b59e1d7a48df9ccf2b273?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/1496826/mohit"}, "edited": false, "score": 0, "creation_date": 1470868061, "post_id": 38884480, "comment_id": 65129857, "body": "Though only this part will work: <code>using CT = typename std::remove_pointer&lt;T&gt;::type const *;</code> Thanks a lot for the answer."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 1328, "user_id": 1496826, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7b0948fbc76b59e1d7a48df9ccf2b273?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/1496826/mohit"}, "edited": false, "score": 0, "creation_date": 1470868571, "post_id": 38884480, "comment_id": 65129995, "body": "@mohit if you know <code>T</code> is a pointer, write a <code>T*</code> specialization instead of a <code>T</code> one..."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 1328, "user_id": 1496826, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7b0948fbc76b59e1d7a48df9ccf2b273?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/1496826/mohit"}, "edited": false, "score": 0, "creation_date": 1470868746, "post_id": 38884480, "comment_id": 65130026, "body": "@Mohit Didn&#39;t realize <code>T</code> was always a pointer. In that case, you should write a specialization as Yakk says, see the &quot;Possible Implementation&quot; section of <a href=\"http://en.cppreference.com/w/cpp/types/is_pointer\" rel=\"nofollow noreferrer\"><code>remove_pointer</code></a> for an example."}], "tags": [], "owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "is_accepted": true, "score": 6, "last_activity_date": 1470867560, "creation_date": 1470867560, "answer_id": 38884480, "question_id": 38884416, "link": "https://stackoverflow.com/questions/38884416/how-to-apply-low-level-const-to-a-template-variable-i-am-trying-to-write-a-cons/38884480#38884480", "title": "How to apply low level const to a template variable. I am trying to write a const_cast implementation", "body": "<p>You could use <a href=\"http://en.cppreference.com/w/cpp/types/conditional\" rel=\"noreferrer\"><code>std::conditional</code></a> to handle pointer types correctly.</p>\n\n<pre><code>using CT = typename std::conditional&lt;\n                std::is_pointer&lt;T&gt;::value,\n                typename std::remove_pointer&lt;T&gt;::type const *,\n                T const\n            &gt;::type;\nstatic_assert(std::is_same&lt;CT,const int *&gt;::value, \"CT is not const int*\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 2, "last_activity_date": 1470869382, "creation_date": 1470869382, "answer_id": 38884791, "question_id": 38884416, "link": "https://stackoverflow.com/questions/38884416/how-to-apply-low-level-const-to-a-template-variable-i-am-trying-to-write-a-cons/38884791#38884791", "title": "How to apply low level const to a template variable. I am trying to write a const_cast implementation", "body": "<p>Just for completeness, you could write a type trait that is specialized for pointers:</p>\n\n<pre><code>template &lt;class T&gt; struct const_qualify     { using type = T const; };\ntemplate &lt;class T&gt; struct const_qualify&lt;T*&gt; { using type = T const*; };\ntemplate &lt;class T&gt; struct const_qualify&lt;T&amp;&gt; { using type = T const&amp;; };\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>using CT = typename const_qualify&lt;T&gt;::type;\n</code></pre>\n\n<p>The reference specialization isn't really useful in this case, since you can't stick a reference in a union, but is there for completeness. </p>\n"}], "owner": {"reputation": 1328, "user_id": 1496826, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7b0948fbc76b59e1d7a48df9ccf2b273?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/1496826/mohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 1, "accepted_answer_id": 38884480, "answer_count": 2, "score": 4, "last_activity_date": 1470869382, "creation_date": 1470867197, "last_edit_date": 1470867791, "question_id": 38884416, "link": "https://stackoverflow.com/questions/38884416/how-to-apply-low-level-const-to-a-template-variable-i-am-trying-to-write-a-cons", "title": "How to apply low level const to a template variable. I am trying to write a const_cast implementation", "body": "<p>How do I make this <code>static_assert</code> pass in my failing code? I tried all permutations of <code>const</code> around <code>T</code> but I am not able to get <code>const int *</code>. Compiler always interprets it as <code>int * const</code>.</p>\n\n<pre><code>template &lt;class T&gt;\nunion const_cast_impl {\n\n    using CT =  const T;\n    static_assert(std::is_same&lt;CT,const int *&gt;::value, \"CT is not const int*\");\n\n    T data;\n    CT cdata;\n\n    const_cast_impl(CT ptr):cdata(ptr){}\n\n    operator T(){\n        return data;\n    }\n};\n\nint main(){\n    int a = 2;\n    const int *ptr = &amp;a;\n    int *ptr2 = const_cast_impl&lt;int *&gt;(ptr);\n}\n</code></pre>\n"}, {"tags": ["c++", "private", "encapsulation", "public"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1470867135, "post_id": 38884399, "comment_id": 65129565, "body": "Can you provide us with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please?"}, {"owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470867214, "post_id": 38884399, "comment_id": 65129587, "body": "Aside what I&#39;ve provided? What I&#39;ve provided is more coherent."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470867255, "post_id": 38884399, "comment_id": 65129601, "body": "<a href=\"http://stackoverflow.com/questions/60570/why-should-the-pimpl-idiom-be-used\">PIMPL.</a>"}, {"owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470867313, "post_id": 38884399, "comment_id": 65129618, "body": "@user4581301 It&#39;s an option, but I&#39;d like to seek alternatives before refactoring the code to implement PIMPL."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470867463, "post_id": 38884399, "comment_id": 65129670, "body": "That&#39;s not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of course! Please put at least a link to a decent online compiler."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1470867775, "post_id": 38884399, "comment_id": 65129772, "body": "Why is &quot;typedef&quot; significant? It&#39;s not one of those &quot;typedef of an untagged struct&quot; things that some C programmers seem to believe is a good idea?"}, {"owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470867899, "post_id": 38884399, "comment_id": 65129810, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Happy? I&#39;ve included a <code>main</code> I&#39;m not including the original C typedef because it&#39;s irrelevant to the question. In fact, I shouldn&#39;t include it because that&#39;s the whole point, I want to hide it."}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "edited": false, "score": 0, "creation_date": 1470867932, "post_id": 38884399, "comment_id": 65129823, "body": "PIMPL seems like the most obvious way to do this, though. I think you&#39;re saying you don&#39;t want to use pointers because you&#39;d have to change the rest of the file? I&#39;m not sure if something like <code>extern struct originalTypedef</code> would work...?"}, {"owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1470868124, "post_id": 38884399, "comment_id": 65129873, "body": "@molbdnilo I believe it is. It&#39;s declared as follows: \t<code>struct hid_device_;</code> <code>typedef struct hid_device_ hid_device; &#47;**&lt; opaque hidapi structure *&#47;</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470868426, "post_id": 38884399, "comment_id": 65129957, "body": "If you use a <code>typedef</code> in the header, you will have to expose the <code>typedef</code> in the header. You can tag it private, but you&#39;re stuck including the original api header somewhere. If you really want to hide the original API, it&#39;s <code>void *</code>, PIMPL, or PIMPL by another name."}], "answers": [{"comments": [{"owner": {"reputation": 419, "user_id": 1767890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d81032b1f022720d48309e368fc36539?s=128&d=identicon&r=PG", "display_name": "Ben Braun", "link": "https://stackoverflow.com/users/1767890/ben-braun"}, "edited": false, "score": 0, "creation_date": 1470867979, "post_id": 38884520, "comment_id": 65129844, "body": "Was writing this answer but this was first. Quick note that option (1) is only appropriate if the C API is not expected to change in the future (as then you&#39;ll have to update the wrapper). Also you may need to use a conditional macro &quot;IS_ORIGINAL_C_API_INCLUDED&quot; or such to prevent multiple definition errors in myWrapper.cpp."}, {"owner": {"reputation": 4705, "user_id": 102345, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/etoxY.gif?s=128&g=1", "display_name": "JBRWilkinson", "link": "https://stackoverflow.com/users/102345/jbrwilkinson"}, "edited": false, "score": 0, "creation_date": 1470869285, "post_id": 38884520, "comment_id": 65130196, "body": "#2 will work but you&#39;ll lose all type information, so careful with the casting."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1470868058, "last_edit_date": 1470868058, "creation_date": 1470867852, "answer_id": 38884520, "question_id": 38884399, "link": "https://stackoverflow.com/questions/38884399/forward-declare-a-c-typedef-in-a-c-header/38884520#38884520", "title": "forward declare a C typedef in a C++ header", "body": "<p>Options that I was able to think of quickly:</p>\n\n<ol>\n<li><p>You can repeat just the <code>typedef</code> from the C API in myWrapper.h.</p>\n\n<pre><code>typedef struct the_original_struct_type originalTypedef;\n</code></pre></li>\n<li><p>You can use a <code>void*</code> as the member variable in <code>myWrapper</code> and <code>reinterpret_cast</code> to <code>originalTypedef*</code> before calling the C API.</p>\n\n<pre><code>class myWrapper\n{\n   private:\n      void* original;\n};\n</code></pre></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "edited": false, "score": 0, "creation_date": 1470868358, "post_id": 38884557, "comment_id": 65129944, "body": "I appreciate the answer, but I&#39;m looking for an alternative to PIMPL. The codebase already exists and doing such requires a massive refactor for one tiny thing"}, {"owner": {"reputation": 4705, "user_id": 102345, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/etoxY.gif?s=128&g=1", "display_name": "JBRWilkinson", "link": "https://stackoverflow.com/users/102345/jbrwilkinson"}, "reply_to_user": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "edited": false, "score": 0, "creation_date": 1470869380, "post_id": 38884557, "comment_id": 65130228, "body": "okay, so just forward declare the originalTypeDef as it&#39;s exact type - but don&#39;t define it in the header. In this way, you won&#39;t need to include the original api header in your wrapper header."}], "tags": [], "owner": {"reputation": 4705, "user_id": 102345, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/etoxY.gif?s=128&g=1", "display_name": "JBRWilkinson", "link": "https://stackoverflow.com/users/102345/jbrwilkinson"}, "is_accepted": false, "score": 0, "last_activity_date": 1470868139, "creation_date": 1470868139, "answer_id": 38884557, "question_id": 38884399, "link": "https://stackoverflow.com/questions/38884399/forward-declare-a-c-typedef-in-a-c-header/38884557#38884557", "title": "forward declare a C typedef in a C++ header", "body": "<p>What you're looking for is something like the pImpl pattern - you provide a C++ API and the implementation is obfuscated from the client:</p>\n\n<p>Header File</p>\n\n<pre><code>// forward declare obfuscated implementation\n// we can do this because we're only using a ptr\nclass Implementation;\n\nclass Wrapper\n{\n   public:\n      Wrapper();\n      ~Wrapper();\n      void doSomething();\n\n   private:\n      Implementation * pImpl;\n  };\n</code></pre>\n\n<p>.cpp file</p>\n\n<pre><code>  #include \"originalAPI.h\"\n  class Implementation\n  {\n     public:\n      void doSomething()\n      {\n         OriginalAPI_DoSomething();\n      }\n   };\n\n   Wrapper::Wrapper()\n   {\n     this-&gt;pImpl = new Implementation();\n   }\n\n   Wrapper::~Wrapper()\n   {\n      delete pImpl;\n   }\n\n   void Wrapper::doSomething()\n   {\n      pImpl-&gt;doSomething;\n   }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 419, "user_id": 1767890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d81032b1f022720d48309e368fc36539?s=128&d=identicon&r=PG", "display_name": "Ben Braun", "link": "https://stackoverflow.com/users/1767890/ben-braun"}, "is_accepted": false, "score": 1, "last_activity_date": 1470868203, "creation_date": 1470868203, "answer_id": 38884574, "question_id": 38884399, "link": "https://stackoverflow.com/questions/38884399/forward-declare-a-c-typedef-in-a-c-header/38884574#38884574", "title": "forward declare a C typedef in a C++ header", "body": "<p>An exotic solution would be to write a code generator that reads in original_c_api.h, and outputs a file original_c_api_types.h that only includes struct definitions, types, etc but does not include any functions, and a file original_c_api_functions.h containing the function declarations. Then wrapper.h includes original_c_api_types.h and wrapper.cpp includes wrapper.h and original_c_api_functions.h. The code generator should be run as a target in your makefile. </p>\n\n<p>Of course, if you have the authority to modify the original C api files that's the easiest solution.</p>\n"}], "owner": {"reputation": 1984, "user_id": 1642677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6c4db19dd7a5daf2cdd1352e622fc013?s=128&d=identicon&r=PG", "display_name": "audiFanatic", "link": "https://stackoverflow.com/users/1642677/audifanatic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "closed_date": 1471487755, "answer_count": 3, "score": 0, "last_activity_date": 1470868203, "creation_date": 1470867089, "last_edit_date": 1470867819, "question_id": 38884399, "link": "https://stackoverflow.com/questions/38884399/forward-declare-a-c-typedef-in-a-c-header", "closed_reason": "Not suitable for this site", "title": "forward declare a C typedef in a C++ header", "body": "<p>I wrote a C++ wrapper class for a C API. </p>\n\n<p>My wrapper class has a private instance member of a typedef structure used in the original API. I do not want to modify the API header file, but I also want to hide all traces of the original API, so I DO NOT want to include the original API header file in the wrapper class' header.</p>\n\n<p>I'm probably overlooking something really simple, but I'm not finding it. PIMPL is an option, but I'd prefer to seek alternatives before refactoring the whole codebase for one little thing.</p>\n\n<p><em>wrapper.hpp</em></p>\n\n<pre><code>class myWrapper\n{\npublic:\n    myWrapper();\n\nprivate:\n    originalTypedef *original; // forward declaration needed for originalTypedef \n};\n</code></pre>\n\n<p><em>wrapper.cpp</em></p>\n\n<pre><code>#include \"wrapper.hpp\"\n#include \"originalAPI.h\"\n\nmyWrapper::myWrapper()\n{\n    original = originalAPI_get();\n}\n</code></pre>\n\n<p><em>Main.cpp</em></p>\n\n<pre><code>#include \"wrapper.hpp\"\n\nint main()\n{\n    myWrapper wrapper = new myWrapper();\n}\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 419, "user_id": 1767890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d81032b1f022720d48309e368fc36539?s=128&d=identicon&r=PG", "display_name": "Ben Braun", "link": "https://stackoverflow.com/users/1767890/ben-braun"}, "edited": false, "score": 0, "creation_date": 1470867431, "post_id": 38884279, "comment_id": 65129657, "body": "Not really a solution, but a quick and dirty way with your original code is to assign the return value of (current-&gt;value-&gt;*call)(args) to a boolean local variable. This assignment will fail to compile unless the function actually returns a boolean, so in effect you will have limited the function to only accepting functions that return boolean. The resulting compile error is actually pretty informative if I recall correctly, something like &quot;cannot convert a &lt;wrong return type&gt; to boolean.&quot;"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1470868191, "post_id": 38884279, "comment_id": 65129893, "body": "This approach will also work if the function returns an int, which would be wrong."}, {"owner": {"reputation": 1955, "user_id": 1264768, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/94mm8.png?s=128&g=1", "display_name": "salbeira", "link": "https://stackoverflow.com/users/1264768/salbeira"}, "edited": false, "score": 0, "creation_date": 1470868600, "post_id": 38884279, "comment_id": 65130001, "body": "Well we are talking about c++, the semantics behind a bool and an int as a return type is intertwined in ways we all do not like to think about."}, {"owner": {"reputation": 419, "user_id": 1767890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d81032b1f022720d48309e368fc36539?s=128&d=identicon&r=PG", "display_name": "Ben Braun", "link": "https://stackoverflow.com/users/1767890/ben-braun"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1470869208, "post_id": 38884279, "comment_id": 65130175, "body": "@SamVarshavchik bool is in fact type-defed to int in some versions of the standard I think. If you really need this safety, what about defining your own typesafe bool enum and then only accepting functions that output members of that enum."}, {"owner": {"reputation": 1955, "user_id": 1264768, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/94mm8.png?s=128&g=1", "display_name": "salbeira", "link": "https://stackoverflow.com/users/1264768/salbeira"}, "edited": false, "score": 0, "creation_date": 1470870411, "post_id": 38884279, "comment_id": 65130490, "body": "I don&#39;t need that safety, it was really just the best way to pass something into an &quot;if&quot; that I thought of, no need to think too much about that"}], "answers": [{"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": -1, "last_activity_date": 1470868216, "creation_date": 1470868216, "answer_id": 38884578, "question_id": 38884279, "link": "https://stackoverflow.com/questions/38884279/c-template-function-that-takes-a-function-type-with-specific-return-type/38884578#38884578", "title": "C++ template function that takes a function type with specific return type", "body": "<p>A simple solution involves using partial specialization to force a compilation error:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;utility&gt;\n\ntemplate&lt;typename T&gt; struct is_bool;\n\ntemplate&lt;&gt; struct is_bool&lt;bool&gt; { typedef int value; };\n\ntemplate&lt;typename function, typename ... arguments&gt;\nvoid for_each_call(function call, arguments &amp;&amp; ... args)\n{\n    typedef decltype(call(std::forward&lt;arguments&gt;(args)...)) ret_type;\n\n    typedef typename is_bool&lt;ret_type&gt;::value x;\n\n    call(std::forward&lt;arguments&gt;(args)...);\n}\n\nbool foo(int, int) {}   // Compiles\n\n// int foo(int, int) {}   // Does not compile\n\nint main()\n{\n    for_each_call(foo, 4, 2);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1955, "user_id": 1264768, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/94mm8.png?s=128&g=1", "display_name": "salbeira", "link": "https://stackoverflow.com/users/1264768/salbeira"}, "edited": false, "score": 0, "creation_date": 1470870681, "post_id": 38884674, "comment_id": 65130551, "body": "The first approach I also thought about but I get the compile error: Error: &gt;&gt;.*&lt;&lt; or &gt;&gt;-&gt;*&lt;&lt; needs to be used to call the pointer to element as function in &gt;&gt;call (...)&lt;&lt; , eg. &gt;&gt;(... -&gt; *call)(...)&lt;&lt; . That&#39;s the reason I limited myself to member functions."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1955, "user_id": 1264768, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/94mm8.png?s=128&g=1", "display_name": "salbeira", "link": "https://stackoverflow.com/users/1264768/salbeira"}, "edited": false, "score": 0, "creation_date": 1470871827, "post_id": 38884674, "comment_id": 65130845, "body": "@salbeira I don&#39;t know what you&#39;re saying. Did you use <a href=\"http://en.cppreference.com/w/cpp/utility/functional/mem_fn\" rel=\"nofollow noreferrer\"><code>mem_fn()</code></a>?"}, {"owner": {"reputation": 1955, "user_id": 1264768, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/94mm8.png?s=128&g=1", "display_name": "salbeira", "link": "https://stackoverflow.com/users/1264768/salbeira"}, "edited": false, "score": 0, "creation_date": 1470872620, "post_id": 38884674, "comment_id": 65131041, "body": "When and where? And propably not because I avoid the std:: in my training sessions because if I would use std:: I would not need to write these little snippets of personal success :-P"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1955, "user_id": 1264768, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/94mm8.png?s=128&g=1", "display_name": "salbeira", "link": "https://stackoverflow.com/users/1264768/salbeira"}, "edited": false, "score": 0, "creation_date": 1470873264, "post_id": 38884674, "comment_id": 65131197, "body": "@salbeira Where I said to in the answer. Also read the reference. Also avoiding using the standard library is pretty silly."}, {"owner": {"reputation": 1955, "user_id": 1264768, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/94mm8.png?s=128&g=1", "display_name": "salbeira", "link": "https://stackoverflow.com/users/1264768/salbeira"}, "edited": false, "score": 0, "creation_date": 1470873522, "post_id": 38884674, "comment_id": 65131255, "body": "I do this to try to understand what and why the std:: does things. The construction of the mem_fn wrapper seems like something I would try to implement myself without 500 edge cases myself, I just tried to read the libc++ functions.h and thought &quot;wow I do not understand anything in there, time to try this myself&quot; --- also yeah - I do it because it is silly and fun"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 1, "last_activity_date": 1470869026, "last_edit_date": 1470869026, "creation_date": 1470868654, "answer_id": 38884674, "question_id": 38884279, "link": "https://stackoverflow.com/questions/38884279/c-template-function-that-takes-a-function-type-with-specific-return-type/38884674#38884674", "title": "C++ template function that takes a function type with specific return type", "body": "<p>First of all, this approach is unnecessarily limiting:</p>\n\n<pre><code>(current-&gt;value-&gt;*call)(args ...);\n</code></pre>\n\n<p>If you <em>require</em> a member function, there's only a small handful of operations you can actually do. If the caller wants to do more, they're kind of screwed. Instead, generalize and pass <code>current-&gt;value</code> as the first argument:</p>\n\n<pre><code>template&lt;typename function, typename ... arguments&gt;\nvoid for_each_call(function call, arguments ... args)\n{\n    for(ListElement * current = this-&gt;first; current != nullptr; current = current-&gt;next)\n    {\n        call(current-&gt;value, args...);\n    }\n}\n</code></pre>\n\n<p>This works on all the cases as before - where you would pass <code>&amp;Class::mem</code> before now instead you pass <code>std::mem_fn(&amp;Class::mem)</code> - but now you can pass any kind of callable too.</p>\n\n<hr />\n\n<p>Now onto your main question. You don't have to do anything different. Just use the result of <code>call()</code>:</p>\n\n<pre><code>template&lt;typename function, typename ... arguments&gt;\nvoid for_each_call(function call, arguments ... args)\n{\n    for(ListElement* current = this-&gt;first; current != nullptr; current = current-&gt;next)\n    {\n        if (call(current-&gt;value, args...)) {\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>That's it. If the user provides a callable that doesn't return something contextually convertible to <code>bool</code>, they'll get a compile error. Why limit to just returning <code>bool</code>? </p>\n\n<p>If you really do need really just <code>bool</code>, throw in a static assert:</p>\n\n<pre><code>template&lt;typename function, typename ... arguments&gt;\nvoid for_each_call(function call, arguments ... args)\n{\n    static_assert(std::is_same&lt;decltype(call(this-&gt;first-&gt;value, args...)), bool&gt;::value, \"Must be bool!\");\n    // rest...\n}\n</code></pre>\n\n<p>Note: You probably want to take your <code>arguments...</code> by reference to <code>const</code> to avoid lots of copies. </p>\n"}, {"tags": [], "owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "is_accepted": false, "score": 0, "last_activity_date": 1470868868, "creation_date": 1470868868, "answer_id": 38884714, "question_id": 38884279, "link": "https://stackoverflow.com/questions/38884279/c-template-function-that-takes-a-function-type-with-specific-return-type/38884714#38884714", "title": "C++ template function that takes a function type with specific return type", "body": "<p>Starting from this, just to show you how <em>member function pointers work</em>:</p>\n\n<pre><code>class Foo {\n public:\n  bool test() { return true; }\n};\n\n/// The function takes a member function of a class T and its arguments.\ntemplate&lt;typename T, typename... Args&gt;\nvoid for_each_call_until(bool (T::*member_function)(Args...),\n                         Args&amp;&amp; ... args) {\n  T obj;  // Instantiate an example object.\n  bool rts = (obj.*member_function)(std::forward&lt;Args&gt;(args)...);\n  if (rts == false) {  // Check for the result of the member function\n    // close\n  }\n  // ...\n}\n</code></pre>\n\n<p>Your function could be something like:</p>\n\n<pre><code>template&lt;typename... Args&gt;\nvoid for_each_call_until(bool (ListElement::*member_function)(Args...),\n                         Args&amp;&amp; ... args) {\n  for ( /* iteration over pointers */ ) {\n    bool rts = (current-&gt;*member_function)(std::forward&lt;Args&gt;(args)...);\n    if (rts == false) {\n      // break\n    }\n    // ...\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 1955, "user_id": 1264768, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/94mm8.png?s=128&g=1", "display_name": "salbeira", "link": "https://stackoverflow.com/users/1264768/salbeira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1585, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1470872726, "creation_date": 1470866465, "last_edit_date": 1470872726, "question_id": 38884279, "link": "https://stackoverflow.com/questions/38884279/c-template-function-that-takes-a-function-type-with-specific-return-type", "title": "C++ template function that takes a function type with specific return type", "body": "<p>I am doing some magic with templates in c++ and thought of trying something.</p>\n\n<p>In this case I wrote a naive generic list implementation with a <code>List</code> Type and a <code>ListElement</code> Type that contains the data.</p>\n\n<p>Now I already wrote a templated \"for each call\" function, that takes an arbitrary member function type of the type stored in the list with an arbitrary argument list and calls that member function on each element in the list with the given arguments:</p>\n\n<pre><code>template&lt;typename function, typename ... arguments&gt;\nvoid for_each_call(function call, arguments ... args)\n{\n    for(ListElement * current = this-&gt;first; current != nullptr; current = current-&gt;next)\n    {\n        (current-&gt;value-&gt;*call)(args ...);\n    }\n}\n</code></pre>\n\n<p>The problem with this is that I can not \"react\" to the return values of the called function. Though I do NOT want to implement a <code>.map</code> functionality!</p>\n\n<p>Now I want to implement a \"for each call until\" that calls a function upon the values in the list until a call returns \"true\" and then stops. For that I need to limit the functions inserted as a template parameter to functions of any type that specifically return a boolean. I typed around until the compiler stopped complaining and got this:</p>\n\n<pre><code>template&lt;bool (*function), typename ... arguments&gt;\nvoid for_each_call_until(arguments ... args)\n{\n    for(ListElement * current = this-&gt;first; current != nullptr; current = current-&gt;next)\n    {\n        if((current-&gt;value-&gt;*function)(args ...)) break;\n    }\n}\n</code></pre>\n\n<p>What is happening here, is this the right way, and if not, what is the right way?</p>\n\n<p>EDIT: As some people recommend using functions from the std:: namespace: In these little training sessions I try to avoid the std:: like a plague, as if I would want to use std:: I would not write these little standardimplementations of stuff like lists, vectors or mappings myself but use std:: or boost::</p>\n"}, {"tags": ["c++", "arrays", "gdb", "address-sanitizer", "stack-corruption"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470865764, "post_id": 38884083, "comment_id": 65129090, "body": "Are you using gcc/clang?  It is a extension that is on by default for those."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1470865853, "post_id": 38884083, "comment_id": 65129126, "body": "<a href=\"http://coliru.stacked-crooked.com/a/62ef3e46c5ee6a37\" rel=\"nofollow noreferrer\">Does not compile cleanly.</a> Are you talking about the GnuC++ dialect? If so, please make that explicit."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1470866002, "post_id": 38884083, "comment_id": 65129190, "body": "Your memset() in the method() funciton overruns your array by 10 bytes., which might corrupt the stack. You might get random behavior, you might get a crash. You are likely also be using a compiler that supports VLA in C++ (which means your array is sized at runtime, not at compile time)."}], "answers": [{"comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1470865964, "post_id": 38884141, "comment_id": 65129177, "body": "The comments I use:  &quot;-ggdb -std=c++14 -Wall -Wextra -Wshadow -Wnon-virtual-dtor -pedantic -Wcast-align -Wcast-qual -Wconversion -Wpointer-arith -Wunused -Woverloaded-virtual   -O0 &quot; with g++ on ubuntu"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 3, "last_activity_date": 1470865799, "creation_date": 1470865799, "answer_id": 38884141, "question_id": 38884083, "link": "https://stackoverflow.com/questions/38884083/array-size-declared-by-function-leads-to-stack-corruption-but-clean-compilation/38884141#38884141", "title": "Array size declared by function leads to stack corruption, but clean compilation?", "body": "<p>This is why you should always compile with warnings enabled. In this case, the relevant one is:</p>\n\n<pre><code>main.cpp:66:20: warning: ISO C++ forbids variable length array 'arr' [-Wvla]\n     char arr[p-&gt;f()];\n                    ^\n</code></pre>\n\n<p>(Note that there are other warnings, this is just the relevant one). <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html\" rel=\"nofollow\">Variable length arrays</a> are permitted by gcc as an extension, which is why your code compiled. But had you seen this warning, presumably you would've made a different decision. <code>-Wall -Wextra</code> is your friend.</p>\n\n<blockquote>\n  <p>Also, why does memset (writing an extra 10 bytes of an \"undetermined\" array size) run without a segmentation fault?</p>\n</blockquote>\n\n<p>Undefined behavior is undefined, it doesn't necessarily require a segmentation fault. </p>\n"}], "owner": {"reputation": 21, "user_id": 6702224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ei1gN.png?s=128&g=1", "display_name": "ZeFlashCoder", "link": "https://stackoverflow.com/users/6702224/zeflashcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1470865799, "creation_date": 1470865494, "question_id": 38884083, "link": "https://stackoverflow.com/questions/38884083/array-size-declared-by-function-leads-to-stack-corruption-but-clean-compilation", "title": "Array size declared by function leads to stack corruption, but clean compilation?", "body": "<p>This is a code sample that I managed to extract from an original source code that compiles cleanly but crashes in a more or less random manner:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n#include &lt;cstring&gt;\n\nclass base\n{\n    public:\n\n        base() {}\n        virtual const char f(void) = 0 ;\n};\n\nclass d1 : public base\n{\n    static const char s = 15;\n\n    public:\n\n        d1()\n        {\n        }\n\n        const char f()\n        {\n            return s;\n        }\n};\n\nclass d2 : public base\n{\n    static const char n = 25;\n\n    public:\n\n        d2()\n        {\n        }\n\n        const char f()\n        {\n            return n;\n        }\n};\n\nvoid method(char* p, size_t len)\n{\n    memset(p, 0, ((len * sizeof(char)) + 10));\n}\n\nint main(int argc, char **argv)\n{\n    base *p = NULL;\n\n\n    if(argc == 2)\n    {\n        printf(\"p shall be instance of d2\\n\");\n        p = new d2();\n    }\n    else\n    {\n        printf(\"p shall be instance of d1\\n\");\n        p = new d1();\n    }\n\n    char arr[p-&gt;f()];\n\n    printf(\"Size of arr is %d\\n\", sizeof(arr));\n    method(arr, p-&gt;f());\n\n}\n</code></pre>\n\n<p>After some debug sessions with GDB and Address Sanitizer tools we've found that:</p>\n\n<pre><code>char arr[p-&gt;f()];\n</code></pre>\n\n<p>is the one to blame for the stack corruption. </p>\n\n<p>Knowing that p is instantiated at runtime and that array size declaration is done at compile time with a fixed value, how does this compile without complaining? What is the value of p->f() at compile time?</p>\n\n<p>Also, why does memset (writing an extra 10 bytes of an \"undetermined\" array size) run without a segmentation fault?</p>\n"}, {"tags": ["c++", "xcode", "image", "debugging", "lldb"], "answers": [{"tags": [], "owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "is_accepted": true, "score": 1, "last_activity_date": 1471300631, "last_edit_date": 1495541690, "creation_date": 1471300631, "answer_id": 38964053, "question_id": 38883994, "link": "https://stackoverflow.com/questions/38883994/how-do-i-get-lldb-to-output-images/38964053#38964053", "title": "How do I get LLDB to output images?", "body": "<p>I think you are asking about:</p>\n\n<p><a href=\"https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/CustomClassDisplay_in_QuickLook/Introduction/Introduction.html\" rel=\"nofollow noreferrer\">https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/CustomClassDisplay_in_QuickLook/Introduction/Introduction.html</a></p>\n\n<p>This was answered here in:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/21052666/how-can-i-quick-look-custom-objects-with-xcode-5-visual-debugger#21153058\">How can I Quick Look custom objects with Xcode 5 visual debugger?</a></p>\n\n<p>You have to be able to convert your image to a UIImage or some other type that the QuickLook system natively understands.</p>\n"}], "owner": {"reputation": 34200, "user_id": 153535, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/537262a1fa55f447898d6072791f3899?s=128&d=identicon&r=PG", "display_name": "fbrereto", "link": "https://stackoverflow.com/users/153535/fbrereto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 38964053, "answer_count": 1, "score": 0, "last_activity_date": 1471300631, "creation_date": 1470865042, "question_id": 38883994, "link": "https://stackoverflow.com/questions/38883994/how-do-i-get-lldb-to-output-images", "title": "How do I get LLDB to output images?", "body": "<p>I have a single 8-bit channel buffer whose contents I would like to see in the middle of a debugging session. Using whatever might be available under Xcode/LLDB, can this be done? A solution that uses a separate window (or even dumping to an external file) is fine.</p>\n\n<p>What changes about the answer if the image is 8-bit planar RGBA?</p>\n"}, {"tags": ["python", "c++", "refactoring", "clang", "abstract-syntax-tree"], "comments": [{"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 1, "creation_date": 1470868025, "post_id": 38883991, "comment_id": 65129855, "body": "What you have exhibited is a string of patches; why can&#39;t you just apply them in order? [Maybe you are making several overlapping patches to the AST?] Would it be more useful to just modify the AST for each change as you make them, then spit out the revised AST?  Then you can&#39;t have an out-of-order patching problem."}, {"owner": {"reputation": 45996, "user_id": 164171, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/dec2e1cd575b184c3695fe6d18a24638?s=128&d=identicon&r=PG", "display_name": "static_rtti", "link": "https://stackoverflow.com/users/164171/static-rtti"}, "reply_to_user": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1470868421, "post_id": 38883991, "comment_id": 65129953, "body": "You have to be careful about order as changes can invalidate line numbers. I agree modifying the AST would be the best option, unfortunately cindex does not support it."}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 1, "creation_date": 1472529628, "post_id": 38883991, "comment_id": 65775224, "body": "If the tool you have won&#39;t do the job well, you can choose another tool.   Check my bio for a tool (DMS) that can parse C++, build and modify C++ ASTs (we did that avoid exactly silly patching problems when composing changes) and then regenerate valid source code.   It isn&#39;t in Python, though.  It isn&#39;t in C++ either; DMS is an array of DSLs that cooperate to let you specify transformations."}], "answers": [{"tags": [], "owner": {"reputation": 45996, "user_id": 164171, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/dec2e1cd575b184c3695fe6d18a24638?s=128&d=identicon&r=PG", "display_name": "static_rtti", "link": "https://stackoverflow.com/users/164171/static-rtti"}, "is_accepted": true, "score": 0, "last_activity_date": 1476103143, "creation_date": 1476103143, "answer_id": 39958507, "question_id": 38883991, "link": "https://stackoverflow.com/questions/38883991/how-can-i-apply-changes-to-source-files-with-python/39958507#39958507", "title": "How can I apply changes to source files with Python?", "body": "<p>So I rolled out my own. The code is almost certainly buggy and not very pretty, but I'm posting it in the hope it might help someone until a better solution is found.</p>\n\n<pre><code>class PatchRecord(object):\n    \"\"\" Record patches, validate them, order them, and apply them \"\"\"\n\n    def __init__(self):\n        # output of readlines for each patched file\n        self.lines = {}\n        # list of patches for each patched file\n        self.patches = {}\n\n    class Patch(object):\n        \"\"\" Abstract base class for editing operations \"\"\"\n\n        def __init__(self, filename, start, end):\n            self.filename = filename\n            self.start = start\n            self.end = end\n\n        def __repr__(self):\n            return \"{op}: {filename} {start}/{end} {what}\".format(\n                op=self.__class__.__name__.upper(),\n                filename=self.filename,\n                start=format_place(self.start),\n                end=format_place(self.end),\n                what=getattr(self, \"what\", \"\"))\n\n        def apply(self, lines):\n            print \"Warning: applying no-op patch\"\n\n    class Delete(Patch):\n\n        def __init__(self, filename, extent):\n            super(PatchRecord.Delete, self).__init__(\n                filename, extent.start, extent.end)\n            print \"DELETE: {file} {extent}\".format(file=self.filename,\n                                                   extent=format_extent(extent))\n\n        def apply(self, lines):\n            lines[self.start.line - 1:self.end.line] = [\n                lines[self.start.line - 1][:self.start.column - 1] +\n                lines[self.end.line - 1][self.end.column:]]\n\n    class Insert(Patch):\n\n        def __init__(self, filename, start, what):\n            super(PatchRecord.Insert, self).__init__(filename, start, start)\n            self.what = what\n            print \"INSERT {where} {what}\".format(what=what, where=format_place(self.start))\n\n        def apply(self, lines):\n            line = lines[self.start.line - 1]\n            lines[self.start.line - 1] = \"%s%s%s\" % (\n                line[:self.start.column],\n                self.what,\n                line[self.start.column:])\n\n    class Replace(Patch):\n\n        def __init__(self, filename, extent, what):\n            super(PatchRecord.Replace, self).__init__(\n                filename, extent.start, extent.end)\n            self.what = what\n            print \"REPLACE: {where} {what}\".format(what=what,\n                                                   where=format_extent(extent))\n\n        def apply(self, lines):\n            lines[self.start.line - 1:self.end.line] = [\n                lines[self.start.line - 1][:self.start.column - 1] +\n                self.what +\n                lines[self.end.line - 1][self.end.column - 1:]]\n\n    # Convenience functions for creating patches\n    def delete(self, filename, extent):\n        self.patches[filename] = self.patches.get(\n            filename, []) + [self.Delete(filename, extent)]\n\n    def insert(self, filename, where, what):\n        self.patches[filename] = self.patches.get(\n            filename, []) + [self.Insert(filename, where, what)]\n\n    def replace(self, filename, extent, what):\n        self.patches[filename] = self.patches.get(\n            filename, []) + [self.Replace(filename, extent, what)]\n\n    def _pos_to_tuple(self, position):\n        \"\"\" Convert a source location to a tuple for use as a sorting key \"\"\"\n        return (position.line, position.column)\n\n    def sort(self, filename):\n        \"\"\" Sort patches by extent start \"\"\"\n        self.patches[filename].sort(key=lambda p: self._pos_to_tuple(p.start))\n\n    def validate(self, filename):\n        \"\"\"Try to insure patches are consistent\"\"\"\n        print \"Checking patches for %s\" % filename\n        self.sort(filename)\n        previous = self.patches[filename][0]\n        for p in self.patches[filename][1:]:\n            assert(self._pos_to_tuple(p.start) &gt;\n                   self._pos_to_tuple(previous.start))\n\n    def _apply(self, filename):\n        self.sort(filename)\n        lines = self._getlines(filename)\n        for p in reversed(self.patches[filename]):\n            print p\n            p.apply(lines)\n\n    def _getlines(self, filename):\n        \"\"\" Get source file lines for editing \"\"\"\n        if not filename in self.lines:\n            with open(filename) as f:\n                self.lines[filename] = f.readlines()\n        return self.lines[filename]\n\n    def apply(self):\n        for filename in self.patches:\n            self.validate(filename)\n            self._apply(filename)\n            # with open(filename+\".patched\",\"w\") as output:\n            with open(filename, \"w\") as output:\n                output.write(\"\".join(self._getlines(filename)))\n</code></pre>\n\n<p>Just create a <code>PatchRecord</code> object, add changes using the <code>create</code>, <code>replace</code> and <code>delete</code> methods, and apply them with <code>apply</code> when you're ready.</p>\n"}], "owner": {"reputation": 45996, "user_id": 164171, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/dec2e1cd575b184c3695fe6d18a24638?s=128&d=identicon&r=PG", "display_name": "static_rtti", "link": "https://stackoverflow.com/users/164171/static-rtti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 39958507, "answer_count": 1, "score": 2, "last_activity_date": 1476103143, "creation_date": 1470865032, "last_edit_date": 1470868680, "question_id": 38883991, "link": "https://stackoverflow.com/questions/38883991/how-can-i-apply-changes-to-source-files-with-python", "title": "How can I apply changes to source files with Python?", "body": "<p>I am refactoring C++ code using the Python bindings of the Clang compiler (<a href=\"https://github.com/llvm-mirror/clang/tree/master/bindings/python\" rel=\"nofollow\">cindex</a>). Using that, I analyze the AST and prepare changes. I end up with a list of operations similar to the following:</p>\n\n<pre><code>DELETE line 10\nINSERT line 5 column 32: &lt;&lt;  \"tofu\"\nREPLACE from line 31 colum 6 to line 33 column 82 with: std::cout &lt;&lt; \"Thanks SO\"\n...\n</code></pre>\n\n<p><strong>My question is how to turn these into actual file changes.</strong></p>\n\n<p>Doing it directly with python seems tedious: patches need to be applied in the right order and checked for consistency. It looks quite hard and error-prone.</p>\n\n<p>I also can\u2019t find a good library to help (clang does have something called a Rewriter, but it isn't wrapped in Python. I'd really like to avoid C++ for refactoring if possible).</p>\n\n<p>Maybe an idea could be to generate patches and apply them with git, maybe? But even that seems a bit tedious.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "windows", "winapi", "memory"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1470865536, "post_id": 38883757, "comment_id": 65128979, "body": "Individual apps can&#39;t naively do things like hibernate and restore. Only the system can. You need to persist your state to a file somehow. You will have to write the code. Much in the same way as programs like Excel do. And then restore that state. No simple magic avoids the hard yards."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 1, "creation_date": 1470866159, "post_id": 38883757, "comment_id": 65129240, "body": "You say &quot;to restore the system&quot;.  Do you mean the state of your process or the state of the entire computer (other processes, the OS, etc.)?  If just your process, this can be done, but it would be a lot of work and probably isn&#39;t better than building a real undo capability into your program."}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1470866850, "post_id": 38883757, "comment_id": 65129472, "body": "Hmm, pressed something on the app and gave you a +1 by mistake @AdrianMcCarthy.  Anyway, to answer your question, I meant application state not system state.  Yeah, I figured as much, but my colleague was adamant about the other thing, so I thought I&#39;d investigate."}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1470867154, "post_id": 38883757, "comment_id": 65129571, "body": "@DavidHeffernan, like Excel does? If you are just referring to saving the programme state to a file, almost any application does that.  I was just looking for a general way of doing something like a hibernate/restore."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1470901092, "post_id": 38883757, "comment_id": 65140219, "body": "I know that&#39;s what you meant and I said that it wasn&#39;t possible."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1470904761, "post_id": 38883757, "comment_id": 65142442, "body": "Why don&#39;t you speed up saving the state then? An obvious optimization would be to store application state to a memory file, instead of persisting it to disk. @AdrianMcCarthy: This cannot be done for a single process either. How would you restore a file handle to a file that has since been disappeared? The accepted answer has an entire list of issue which cannot be dealt with in general."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470935148, "post_id": 38883757, "comment_id": 65163234, "body": "@IInspectable:  That&#39;s why I asked about whether this was about system state or program state.  If system state changes (like a file goes away), then there&#39;s not much you can do.  If the concern is strictly about program state (that&#39;s not otherwise tied to system state), it could be made to work.  There&#39;s not enough information in the question."}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470935737, "post_id": 38883757, "comment_id": 65163555, "body": "@IInspectable, that is not possible.  In some files, the memory usage can be quite taxed and there is a lot of complexity that I won&#39;t go into here that can cause additional issues.  In any case, it is as I suspected.  This isn&#39;t a viable solution."}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 2, "last_activity_date": 1470868308, "creation_date": 1470868308, "answer_id": 38884603, "question_id": 38883757, "link": "https://stackoverflow.com/questions/38883757/how-to-create-and-restore-memory-image-dump/38884603#38884603", "title": "How to create and restore memory image dump", "body": "<p>This isn't possible in general. If you tried it, it might fail in subtle and unpredictable ways. Here are a few potential problems:</p>\n\n<ol>\n<li>The process might store its process ID and thread IDs. When you restore it, there is no good way to ensure it gets the same IDs.</li>\n<li>The process might have files locked. There's no way to ensure those files are in the same state.</li>\n<li>The process might have files open that no longer exist later. Consider temporary files.</li>\n<li>The process might have sockets or pipes open either internally or even to other processes.</li>\n<li>The process might have manipulated shared state that communicates with other processes and stopping the process with that shared state in an inconsistent state might disrupt other processes.</li>\n<li>The process might have a lock on DLLs or other executable files that may not exist identically when you try to restart the process.</li>\n</ol>\n\n<p>There are a lot of other problems as well. Generally platforms that provide application save/restore capability are either very limited in what they let applications do or they require the close cooperation of the applications.</p>\n"}], "owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 663, "favorite_count": 1, "closed_date": 1471487721, "accepted_answer_id": 38884603, "answer_count": 1, "score": -5, "last_activity_date": 1470868308, "creation_date": 1470863944, "last_edit_date": 1470867584, "question_id": 38883757, "link": "https://stackoverflow.com/questions/38883757/how-to-create-and-restore-memory-image-dump", "closed_reason": "Needs more focus", "title": "How to create and restore memory image dump", "body": "<p>So, I have a questionably coded application, with a lot of data structures that need to be restored in a particular way. </p>\n\n<p>I have to implement a one off undo, to restore the application to what it was before a very complex operation. </p>\n\n<p>A member of my team suggested to save the file and restore it to ensure that everything gets reverted. Doing that is a very resource intensive and time consuming operation. File saving and loading can take a minute or more with all the parsing and event processing.</p>\n\n<p>So I have this idea: if I could somehow save the memory state, like in a dump file, I could save the image state and revert it if necessary. </p>\n\n<p>Is this possible to do? If so, how? </p>\n"}, {"tags": ["python", "c++", "boost-python", "web-site-project"], "comments": [{"owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "edited": false, "score": 0, "creation_date": 1470864692, "post_id": 38883660, "comment_id": 65128645, "body": "You could try using numpy directly if you wanna work with matrices. It&#39;s fast."}, {"owner": {"reputation": 71, "user_id": 4704247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e92a8aec87d6e9139ef11e1c5c8260b3?s=128&d=identicon&r=PG&f=1", "display_name": "doody1986", "link": "https://stackoverflow.com/users/4704247/doody1986"}, "reply_to_user": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "edited": false, "score": 0, "creation_date": 1470865052, "post_id": 38883660, "comment_id": 65128776, "body": "numpy is good but for big data problem, I think C++ is faster. That&#39;s why I want to use C++ implemented function as the computation engine"}], "answers": [{"tags": [], "owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "is_accepted": false, "score": 0, "last_activity_date": 1470865480, "creation_date": 1470865480, "answer_id": 38884078, "question_id": 38883660, "link": "https://stackoverflow.com/questions/38883660/is-there-a-good-way-to-send-data-from-python-context-to-c-without-too-much-cop/38884078#38884078", "title": "Is there a good way to send data from python context to C++ without too much copy involved", "body": "<p>There's a project called ndarray with this as their exact aim: <a href=\"https://github.com/ndarray/ndarray\" rel=\"nofollow\">https://github.com/ndarray/ndarray</a> see also <a href=\"https://github.com/ndarray/Boost.NumPy\" rel=\"nofollow\">https://github.com/ndarray/Boost.NumPy</a> .</p>\n\n<p>There is some compatibility with other C++ matrix libraries (eg. Eigen) which should help with the computations.</p>\n"}, {"comments": [{"owner": {"reputation": 237, "user_id": 2791928, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f35331d251b247e403d03c8e7fda371a?s=128&d=identicon&r=PG&f=1", "display_name": "shayst", "link": "https://stackoverflow.com/users/2791928/shayst"}, "edited": false, "score": 0, "creation_date": 1574071594, "post_id": 38886567, "comment_id": 104086197, "body": "I know it&#39;s an old question, but could you explain the reason to manually decrease ref count of pobj?"}], "tags": [], "owner": {"reputation": 7948, "user_id": 4899330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a19fa016a8fc6c0a3250f03f108a9?s=128&d=identicon&r=PG&f=1", "display_name": "doqtor", "link": "https://stackoverflow.com/users/4899330/doqtor"}, "is_accepted": false, "score": 3, "last_activity_date": 1470884417, "creation_date": 1470884417, "answer_id": 38886567, "question_id": 38883660, "link": "https://stackoverflow.com/questions/38883660/is-there-a-good-way-to-send-data-from-python-context-to-c-without-too-much-cop/38886567#38886567", "title": "Is there a good way to send data from python context to C++ without too much copy involved", "body": "<blockquote>\n  <p>However, every time I send a data from python, say a matrix, to C++, I\n  have to use python list, which means I have to transform the matrix\n  data into list and in C++ context transform the list into an internal\n  matrix object.</p>\n</blockquote>\n\n<p>No, you don't have to use the python list. You can use numpy array which allocates data as a C contiguous segment which can be passed down to C++ without copying and viewed as a matrix using a matrix wrapper class.</p>\n\n<p>In python allocate 2d array using numpy:</p>\n\n<pre><code>&gt;&gt;&gt; y=np.empty((2,5), dtype=np.int16)\n&gt;&gt;&gt; y\narray([[   12, 27750, 26465,  2675,     0],\n       [    0,     0,     0,  2601,     0]], dtype=int16)\n&gt;&gt;&gt; y.flags['C_CONTIGUOUS']\nTrue\n&gt;&gt;&gt; foo(y,2,5)\n</code></pre>\n\n<p>Pass matrix data to C++ using below function exposed to python:</p>\n\n<pre><code>void foo(python::object obj, size_t size1, size_t size2)\n{\n    PyObject* pobj = obj.ptr();\n    Py_buffer pybuf;\n    PyObject_GetBuffer(pobj, &amp;pybuf, PyBUF_SIMPLE);\n    void *buf = pybuf.buf;\n    int16_t *p = (int16_t*)buf;\n    Py_XDECREF(pobj);\n\n    MyMatrixWrapper matrix(p, size1, size2);\n    // ....\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4704247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e92a8aec87d6e9139ef11e1c5c8260b3?s=128&d=identicon&r=PG&f=1", "display_name": "doody1986", "link": "https://stackoverflow.com/users/4704247/doody1986"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470884417, "creation_date": 1470863615, "question_id": 38883660, "link": "https://stackoverflow.com/questions/38883660/is-there-a-good-way-to-send-data-from-python-context-to-c-without-too-much-cop", "title": "Is there a good way to send data from python context to C++ without too much copy involved", "body": "<p>The title could be confusing. Here I will state my question more clearly.</p>\n\n<p>I want to create a website based on python (a lot of existing framework like Flask and cherryPy) and along with a C++ computation engine for the sake of processing speed. So I need to create an interface for python to call C++ functions. Fortunately the boost.python can do the job. However, every time I send a data from python, say a matrix, to C++, I have to use python list, which means I have to transform the matrix data into list and in C++ context transform the list into an internal matrix object. As a result, a lot of data copy occur, which could not be an intelligent or efficient approach. So my questions is that if, considering the complexity, we don't map C++ matrix class to a python class through boost.python, is there a better way to do the similar work without or only with small number of copy?</p>\n"}, {"tags": ["c++", "windows", "webkit"], "answers": [{"tags": [], "owner": {"reputation": 131, "user_id": 2691131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Ftw1.png?s=128&g=1", "display_name": "fujii", "link": "https://stackoverflow.com/users/2691131/fujii"}, "is_accepted": false, "score": 1, "last_activity_date": 1471265460, "creation_date": 1471265460, "answer_id": 38955448, "question_id": 38883563, "link": "https://stackoverflow.com/questions/38883563/embedding-webkit-in-a-windows-application-licensing-issues/38955448#38955448", "title": "Embedding WebKit in a Windows application: Licensing issues?", "body": "<p>There are two WebKit Windows ports at the moment:</p>\n\n<ul>\n<li>AppleWin port</li>\n<li>WinCairo port</li>\n</ul>\n\n<p>WebKit itself is licensed under LGPL and BSDL.\nBut, AppleWin port uses Apple's proprietary WebKit Support Library.\nThis can't be redistributed.\n<a href=\"https://developer.apple.com/opensource/internet/webkit_sptlib_agree.html\" rel=\"nofollow\">https://developer.apple.com/opensource/internet/webkit_sptlib_agree.html</a></p>\n"}], "owner": {"reputation": 111, "user_id": 6365537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a877908ac20b45128514e25632ea2b3c?s=128&d=identicon&r=PG&f=1", "display_name": "AwesomeSauce", "link": "https://stackoverflow.com/users/6365537/awesomesauce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1471265460, "creation_date": 1470863259, "last_edit_date": 1495542785, "question_id": 38883563, "link": "https://stackoverflow.com/questions/38883563/embedding-webkit-in-a-windows-application-licensing-issues", "title": "Embedding WebKit in a Windows application: Licensing issues?", "body": "<p>I have a questions with regards to using Webkit as a component in a Windows application. I know there are options for embedding a browser, but they are overkill for my needs.</p>\n\n<p>Looking at the <a href=\"https://webkit.org/licensing-webkit/\" rel=\"nofollow noreferrer\">WebKit licensing page</a>, it seems that the licenses are permissible; the traditional BSD license and the Library GPL license, the latter of which allows me to distribute my application as \"work that uses the library\". This is also stated <a href=\"https://webkit.org/project/\" rel=\"nofollow noreferrer\">here</a>. However, I've found several posts (including on Stackoverflow, such as <a href=\"https://stackoverflow.com/a/11167123/6365537\">this one</a>) that say that Apple has some proprietary code in there which doesn't allow its redistribution. Is this an inconsistency, or am I missing something?</p>\n"}, {"tags": ["c++", "object", "initialization-list", "member-initialization"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1470863392, "post_id": 38883526, "comment_id": 65128052, "body": "Can&#39;t you initialize this variable <i>in</i> the constructor?"}, {"owner": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "edited": false, "score": 0, "creation_date": 1470863404, "post_id": 38883526, "comment_id": 65128062, "body": "What&#39;s wrong? Wrong design. What are you trying to archieve with that cyclic dependency. Is it really necessary to have these dependencies?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1470864653, "post_id": 38883526, "comment_id": 65128629, "body": "I don&#39;t think this should be a problem unless the <code>Output</code> constructor dereferences <code>ncd2RelayPtr</code>."}, {"owner": {"reputation": 31, "user_id": 5343613, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a080641463db11e617126f160417e8ac?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/5343613/felix"}, "reply_to_user": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "edited": false, "score": 0, "creation_date": 1470865838, "post_id": 38883526, "comment_id": 65129119, "body": "@KIIV is there a better solution to doing this?"}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "edited": false, "score": 0, "creation_date": 1470865841, "post_id": 38883526, "comment_id": 65129120, "body": "If you name the inputs to the constructor something different than the class members (like <code>inNcd2RelayPtr</code>) then you don&#39;t need to use <code>this</code> (just <code>ncd2RelayPtr = inNcd2RelayPtr;</code>), and you can be more sure that your code is behaving properly."}], "answers": [{"comments": [{"owner": {"reputation": 1157, "user_id": 4615411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10203968548633918/picture?type=large", "display_name": "Giora Guttsait", "link": "https://stackoverflow.com/users/4615411/giora-guttsait"}, "edited": false, "score": 0, "creation_date": 1470863484, "post_id": 38883611, "comment_id": 65128091, "body": "You beat me to it. That is in fact the answer. Compilers today throw errors for those things."}, {"owner": {"reputation": 31, "user_id": 5343613, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a080641463db11e617126f160417e8ac?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/5343613/felix"}, "edited": false, "score": 0, "creation_date": 1470865205, "post_id": 38883611, "comment_id": 65128833, "body": "I reordered them now. Do you know why its crashing inside the Output constructor?"}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "reply_to_user": {"reputation": 31, "user_id": 5343613, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a080641463db11e617126f160417e8ac?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/5343613/felix"}, "edited": false, "score": 0, "creation_date": 1470865473, "post_id": 38883611, "comment_id": 65128946, "body": "@Felix It&#39;s crashing because <code>&amp;ncd2Relay</code> is not defined until the body of the <code>HighWaterDetector</code> constructor starts (as opposed to still being in the initializer list for <code>HighWaterDetector</code>), for the reason grigor stated; i.e. the constructor of <code>Output</code> is being called before <code>ncd2Relay</code> is constructed, so the reference of <code>ncd2Relay</code> is probably garbage."}, {"owner": {"reputation": 31, "user_id": 5343613, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a080641463db11e617126f160417e8ac?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/5343613/felix"}, "reply_to_user": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "edited": false, "score": 0, "creation_date": 1470865804, "post_id": 38883611, "comment_id": 65129101, "body": "@Keith M I modified my class to have NCD2Relay before Output just like grigor said. Are you telling me ncd2Relay is still not defined when the constructor of Output is being called? How do I fix this problem? Is there a different way to do this? Thanks for you help."}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "reply_to_user": {"reputation": 31, "user_id": 5343613, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a080641463db11e617126f160417e8ac?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/5343613/felix"}, "edited": false, "score": 0, "creation_date": 1470866054, "post_id": 38883611, "comment_id": 65129208, "body": "@Felix I imagine that would have fixed the problem. If not, try my comment on the OP?"}], "tags": [], "owner": {"reputation": 1494, "user_id": 4608341, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a999fbef69237425f8537ea518f97be4?s=128&d=identicon&r=PG&f=1", "display_name": "grigor", "link": "https://stackoverflow.com/users/4608341/grigor"}, "is_accepted": false, "score": 3, "last_activity_date": 1470863440, "creation_date": 1470863440, "answer_id": 38883611, "question_id": 38883526, "link": "https://stackoverflow.com/questions/38883526/how-to-pass-pointer-of-a-class-member-in-a-member-initialization-list/38883611#38883611", "title": "How to pass pointer of a class member in a member initialization list?", "body": "<p>In C++ the initializer list doesn't follow the order in which you write the items in the initializer. It rather follows the order in which the members are declared in your class. Since you put your <code>NCD2Relay</code> after your <code>Output</code> inside the class, then <code>NCD2Relay</code> will be initialized <strong>after</strong> Output, even though in the initializer you put <code>NCD2Relay</code> first. So, just move <code>NCD2Relay</code> <strong>before</strong> the <code>Output</code> inside your class declaration.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5343613, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a080641463db11e617126f160417e8ac?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/5343613/felix"}, "edited": false, "score": 0, "creation_date": 1470864406, "post_id": 38883621, "comment_id": 65128535, "body": "Program still crashes when declaring an instance of HighWaterDetector."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "reply_to_user": {"reputation": 31, "user_id": 5343613, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a080641463db11e617126f160417e8ac?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/5343613/felix"}, "edited": false, "score": 0, "creation_date": 1470864676, "post_id": 38883621, "comment_id": 65128638, "body": "@Felix, have you reordered the declarations of <code>output1</code> and <code>ncd2Relay</code> in your class definition?"}, {"owner": {"reputation": 31, "user_id": 5343613, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a080641463db11e617126f160417e8ac?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/5343613/felix"}, "edited": false, "score": 0, "creation_date": 1470864971, "post_id": 38883621, "comment_id": 65128748, "body": "Yes crashes actually in the Output constructor. See above... I posted that constructor as well."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "reply_to_user": {"reputation": 31, "user_id": 5343613, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a080641463db11e617126f160417e8ac?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/5343613/felix"}, "edited": false, "score": 1, "creation_date": 1470865994, "post_id": 38883621, "comment_id": 65129187, "body": "@Felix, then you actually have an extra bug other than your ordering problem. Have you step through your code with the debugger?"}], "tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": false, "score": 4, "last_activity_date": 1470864597, "last_edit_date": 1470864597, "creation_date": 1470863481, "answer_id": 38883621, "question_id": 38883526, "link": "https://stackoverflow.com/questions/38883526/how-to-pass-pointer-of-a-class-member-in-a-member-initialization-list/38883621#38883621", "title": "How to pass pointer of a class member in a member initialization list?", "body": "<p>Did you heed to your compiler warnings? or are they turned on to maximum?\nThe order of declaration of your members may be the cause:</p>\n\n<pre><code>class HighWaterDetector\n{\npublic:\n    HighWaterDetector(Device* device);\n    Device * devicePtr;\n    Output * output1Ptr;\n    CloudMsgParser * cloudMsgParserPtr;\n    Output output1;                     // &lt;- This is constructed before\n    NCD2Relay ncd2Relay;                // &lt;- This...\n    CloudMsgParser cloudMsgParser;\n};\n</code></pre>\n\n<p>but your constructor goes like:</p>\n\n<pre><code>HighWaterDetector::HighWaterDetector(Device* device): ncd2Relay(), output1(1, &amp;ncd2Relay){ ... }\n</code></pre>\n\n<p>In the above context, using the address of <code>ncd2Relay</code> in the constructor of <code>output1</code> is simply using a pointer to an uninitialized object which is Undefined Behavior when you eventually dereference it before it's construction. Hence, You will need to enforce the ordering in your class definition...</p>\n\n<p>Just to quote from the C++ standard: (emphasis mine) <a href=\"http://www.eel.is/c++draft/class.base.init#13\" rel=\"nofollow\">[class.base.init/13]</a></p>\n\n<blockquote>\n  <p>In a non-delegating constructor, initialization proceeds in the\n  following order:</p>\n  \n  <ul>\n  <li><p>First, and only for the constructor of the most derived class ([intro.object]), virtual base classes are initialized in the order\n  they appear on a depth-first left-to-right traversal of the directed\n  acyclic graph of base classes, where \u201cleft-to-right\u201d is the order of\n  appearance of the base classes in the derived class\n  base-specifier-list.</p></li>\n  <li><p>Then, direct base classes are initialized in declaration order as they appear in the base-specifier-list (regardless of the order of the\n  mem-initializers).</p></li>\n  <li><p><strong>Then, non-static data members are initialized in the order they were declared in the class definition (again regardless of the order of the\n  mem-initializers).</strong></p></li>\n  <li><p>Finally, the compound-statement of the constructor body is executed.</p></li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 31, "user_id": 5343613, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a080641463db11e617126f160417e8ac?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/5343613/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1116, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1470865360, "creation_date": 1470863107, "last_edit_date": 1470865360, "question_id": 38883526, "link": "https://stackoverflow.com/questions/38883526/how-to-pass-pointer-of-a-class-member-in-a-member-initialization-list", "title": "How to pass pointer of a class member in a member initialization list?", "body": "<p>I have a class named HighWaterDetector:</p>\n\n<pre><code>class HighWaterDetector\n{\npublic:\n    HighWaterDetector(Device* device);\n    Device * devicePtr;\n    Output * output1Ptr;\n    CloudMsgParser * cloudMsgParserPtr;\n    Output output1;\n    NCD2Relay ncd2Relay;\n    CloudMsgParser cloudMsgParser;\n};\n</code></pre>\n\n<p>with constructor:</p>\n\n<pre><code>HighWaterDetector::HighWaterDetector(Device* device): ncd2Relay(), output1(1, &amp;ncd2Relay){\n}\n</code></pre>\n\n<p>I am trying to initialize an instance of Output in the member initialization list for HighWaterDetector but Output which requires you to pass a pointer to an instance of NCD2Relay which is also a member of the class HighWaterDetector. My program crashes inside the output constructor. Is this the wrong way of doing this? What am I doing wrong?</p>\n\n<p>Output class:</p>\n\n<pre><code>class Output\n{\npublic:\n    Output(ushort relayNum, NCD2Relay* ncd2RelayPtr);\n    ushort relayNum;\n    OutputStatus outputStatus;\n    int setOutputOn(void);\n    int setOutputOff(void);\n    void process(void);\n    NCD2Relay* ncd2RelayPtr;\n};\n\n\n//Output Constructor\nOutput::Output(ushort relayNum, NCD2Relay* ncd2RelayPtr) {\n    this-&gt;relayNum = relayNum;\n    this-&gt;ncd2RelayPtr = ncd2RelayPtr; //DOESNT CRASH IF I COMMENT THIS OUT\n    this-&gt;outputStatus.outFail = 0;\n    Serial.print(\"Initializing output \");\n    Serial.println(this-&gt;relayNum);\n    this-&gt;setOutputOff();\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1470863860, "post_id": 38883473, "comment_id": 65128267, "body": "If you&#39;re going to implement this, you should implement it <i>correctly</i>. There is no single &quot;current buffer&quot;; each <code>bufType</code> has <i>its own</i> current buffer."}, {"owner": {"reputation": 416, "user_id": 3183526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RwNsS.png?s=128&g=1", "display_name": "64_", "link": "https://stackoverflow.com/users/3183526/64"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1470863893, "post_id": 38883473, "comment_id": 65128280, "body": "Of course, but the idea still stands. I will edit the post, though."}, {"owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "edited": false, "score": 0, "creation_date": 1470864200, "post_id": 38883473, "comment_id": 65128443, "body": "Once I asked a similar question. Not quite satisfied by the answers, though, so not marking as a duplicate. <a href=\"http://stackoverflow.com/questions/22094960/storing-opengl-state\">stackoverflow.com/questions/22094960/storing-opengl-state</a>"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1470872016, "post_id": 38883473, "comment_id": 65130891, "body": "Not exactly what you asked, but <a href=\"https://books.google.at/books?id=ujfOBQAAQBAJ&amp;pg=PA75&amp;lpg=PA75&amp;dq=cozzi+delaying+opengl+calls&amp;source=bl&amp;ots=OB5P2vjh3a&amp;sig=4e6cZHpA4JLXTbt5rh6zmd_CtOg&amp;hl=en&amp;sa=X&amp;ved=0ahUKEwiuwfbxgLjOAhVD2BoKHeN5BLoQ6AEILDAD#v=onepage&amp;q=cozzi%20delaying%20opengl%20calls&amp;f=false\" rel=\"nofollow noreferrer\">this article</a> might be interesting to read"}, {"owner": {"reputation": 416, "user_id": 3183526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RwNsS.png?s=128&g=1", "display_name": "64_", "link": "https://stackoverflow.com/users/3183526/64"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1470872519, "post_id": 38883473, "comment_id": 65131022, "body": "@BDL thank you, that was interesting."}, {"owner": {"reputation": 28011, "user_id": 417292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d3520ad50fa42c9319830bd9f0900c5d?s=128&d=identicon&r=PG", "display_name": "jcoder", "link": "https://stackoverflow.com/users/417292/jcoder"}, "edited": false, "score": 0, "creation_date": 1470901270, "post_id": 38883473, "comment_id": 65140331, "body": "Personally I&#39;d be very surprised if the driver didn&#39;t do this <i>where it was faster to do so</i> because if it&#39;s 1% faster by doing this check on average then they are 1% faster their competition now than they would other wise have been. It&#39;s such an easy quick performance win... And if it&#39;s not, then you won&#39;t see much advantage doing it either."}, {"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1470923778, "post_id": 38883473, "comment_id": 65155639, "body": "It&#39;s useful for software testing. I do a lot of API hooking for software I did not write and have to be very anal about keeping the state machine in a consistent state. I have never seen major benefits from doing this, bigger benefits come from checking not for particular binding states but for redundant data modification. I&#39;ve written code to checksum all of the data passing through <code>glTexImage2D (...)</code> and avoid CPU-&gt;driver-&gt;GPU work when there&#39;s already a valid texture with the same data. That offers huge performance improvements in GL and D3D, I&#39;m not sure why driver vendors don&#39;t do this."}], "answers": [{"comments": [{"owner": {"reputation": 416, "user_id": 3183526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RwNsS.png?s=128&g=1", "display_name": "64_", "link": "https://stackoverflow.com/users/3183526/64"}, "edited": false, "score": 0, "creation_date": 1470892071, "post_id": 38886813, "comment_id": 65135783, "body": "I see. This is prety much what I suspected. Out of interest, do you know if either DirectX or Vulkan suffer from similar problems? I assume they must, due to the implementation specificness."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 416, "user_id": 3183526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RwNsS.png?s=128&g=1", "display_name": "64_", "link": "https://stackoverflow.com/users/3183526/64"}, "edited": false, "score": 0, "creation_date": 1470921810, "post_id": 38886813, "comment_id": 65154144, "body": "@user3183526: Vulkan is low-level. If you bind some state to a command buffer, then you should expect to incur the costs of binding it."}], "tags": [], "owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "is_accepted": true, "score": 4, "last_activity_date": 1470886299, "creation_date": 1470886299, "answer_id": 38886813, "question_id": 38883473, "link": "https://stackoverflow.com/questions/38883473/should-i-cache-opengl-state-such-as-currently-bound-buffers-or-does-opengl-do-t/38886813#38886813", "title": "Should I cache OpenGL state such as currently bound buffers, or does OpenGL do that anyway?", "body": "<p>This is highly platform and vendor dependent.</p>\n\n<p>You're asking if \"OpenGL would implement...\". As you certainly understand already, OpenGL is an API specification. There are many different implementations, and whether they check for redundant state changes is entirely an implementation decision, which can (and will) be different from implementation to implementation.</p>\n\n<p>You shouldn't even expect that a given implementation handles this the same for all pieces of state.</p>\n\n<p>Since this topic is somewhat close to my heart based on past experience, I was tempted to write a small essay, including a few rants. But I decided that it wouldn't belong here, so here is just a list of considerations that could affect if a given OpenGL implementation tests for redundant state changes in specific cases:</p>\n\n<ul>\n<li>How expensive is it to actually change the state? If it's very cheap, checking for redundant changes might simply not be worth it.</li>\n<li>How expensive is it to check for redundant changes? Normally not much, but we're looking at pieces of software where every little bit counts.</li>\n<li>Are important apps/benchmarks redundantly changing this state on a frequent basis?</li>\n<li>What's the philosophy on responsibilities of apps vs. responsibilities of OpenGL implementations?</li>\n</ul>\n\n<p>And yes, this is unfortunate for everybody. For you as an app writer who wants to get ideal performance across vendors/platforms, there's really no easy solution. If you add checks to your code, they will be useless, and add extra overhead, on platforms that have the same checks in the OpenGL implementation. If you do not have checks in your code, and cannot easily avoid having these redundant state changes in the first place, you may leave performance on the table on platforms where the OpenGL implementation does not check.</p>\n"}, {"comments": [{"owner": {"reputation": 416, "user_id": 3183526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RwNsS.png?s=128&g=1", "display_name": "64_", "link": "https://stackoverflow.com/users/3183526/64"}, "edited": false, "score": 0, "creation_date": 1470891491, "post_id": 38887089, "comment_id": 65135605, "body": "I see. But the currently bound <code>GL_ELEMENT_ARRAY_BUFFER</code> automatically binds when a different <code>vao</code> gets bound, correct? So in that case you aren&#39;t getting any speed boost, but you aren&#39;t getting any bugs. In the second example, would it not be possible just to set the current cache setting to an invalid number (e.g <code>0</code> for buffers) when something gets deleted so that the next object gets bound regardless. And either way, if that doesn&#39;t happen for a specified buffer type, then at the worst you are binding it a couple more times than you should, which is not much of a problem, no?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 416, "user_id": 3183526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RwNsS.png?s=128&g=1", "display_name": "64_", "link": "https://stackoverflow.com/users/3183526/64"}, "edited": false, "score": 0, "creation_date": 1470921558, "post_id": 38887089, "comment_id": 65153950, "body": "@user3183526: &quot;<i>So in that case you aren&#39;t getting any speed boost, but you aren&#39;t getting any bugs.</i>&quot; Let&#39;s say you bind buffer A while VAO Q is bound. Then you switch to VAO R which uses buffer B. And then you try to bind buffer A. Well, your cache thinks that A is <i>already bound</i> and therefore doesn&#39;t bind it again. Which means that VAO R is still using buffer B when you wanted to change it to use buffer A."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 416, "user_id": 3183526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RwNsS.png?s=128&g=1", "display_name": "64_", "link": "https://stackoverflow.com/users/3183526/64"}, "edited": false, "score": 0, "creation_date": 1470921677, "post_id": 38887089, "comment_id": 65154041, "body": "&quot;<i>would it not be possible just to set ... when something gets deleted</i>&quot; You could do that. But my overall point is this: were you even aware of this problem <i>before</i> I mentioned it? How can you be certain that you have discovered all of these kinds of issues? And if you&#39;re not <i>certain</i>, then it isn&#39;t reliable. Broken code is worse than slow-performing code."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 3, "last_activity_date": 1470888346, "creation_date": 1470888346, "answer_id": 38887089, "question_id": 38883473, "link": "https://stackoverflow.com/questions/38883473/should-i-cache-opengl-state-such-as-currently-bound-buffers-or-does-opengl-do-t/38887089#38887089", "title": "Should I cache OpenGL state such as currently bound buffers, or does OpenGL do that anyway?", "body": "<p>The reason why state caching is a bad idea is simple: you're doing it wrong. You'll <em>always</em> be in danger of doing it wrong.</p>\n\n<p>Oh sure, you corrected the mistake I pointed out, that different buffer bindings have different state. And maybe you're using a hash-table that makes lookup pretty quick, even if a new extension comes out that <a href=\"https://www.opengl.org/registry/specs/ARB/indirect_parameters.txt\" rel=\"nofollow\">adds a new buffer binding point</a> that didn't exist when you wrote your cache.</p>\n\n<p>But that's merely the tip of the iceberg as far as object binding idiosyncrasies.</p>\n\n<p>For example, did you realize that <code>GL_ELEMENT_ARRAY_BUFFER</code> is not actually context state? It's really <em>VAO state</em>, and every time you bind a new VAO, that buffer binding changes. So your VAO cache now has to change the shadowed element buffer binding too.</p>\n\n<p>Also, were you aware that deleting an object automatically <em>unbinds</em> it from any context binding points it is currently bound to? And this is true even for objects that are attached to another object that is bound to the context; the deleted object is automatically detached.</p>\n\n<p>Except that this is only true for <em>certain object types</em>. And even then, it's only true for the context that was <em>current</em> when the object was deleted. Other contexts will be unaffected.</p>\n\n<p>My point is this: proper caching of state is <em>really hard.</em> And if you get it wrong, you will create a multitude of very subtle bugs in your application. Whereas if you just let OpenGL do its thing and structure your code so that multiple binding simply doesn't happen, then you don't have a problem.</p>\n"}], "owner": {"reputation": 416, "user_id": 3183526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RwNsS.png?s=128&g=1", "display_name": "64_", "link": "https://stackoverflow.com/users/3183526/64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 2, "accepted_answer_id": 38886813, "answer_count": 2, "score": 3, "last_activity_date": 1470888346, "creation_date": 1470862938, "last_edit_date": 1470863971, "question_id": 38883473, "link": "https://stackoverflow.com/questions/38883473/should-i-cache-opengl-state-such-as-currently-bound-buffers-or-does-opengl-do-t", "title": "Should I cache OpenGL state such as currently bound buffers, or does OpenGL do that anyway?", "body": "<p>A typical OpenGL call might look like the following:</p>\n\n<pre><code>GLuint buffer;\nglGenBuffers(1, &amp;buffer);\nglBindBuffer(GL_SOME_BUFFER, buffer);\n...\n</code></pre>\n\n<p>I've read that binding of buffers and other similar functions can be quite expensive. Is it worth saving the currently bound buffer, and checking it before I bind? Such as this: </p>\n\n<pre><code>void StateManager::bindBuffer(GLenum bufType, GLuint bufID) {\n    if (this-&gt;m_currentBuffer[bufType] != bufID) {\n        glBindBuffer(bufType, bufID);\n        this-&gt;m_currentBuffer[bufType] = bufID;\n    }\n}\n</code></pre>\n\n<p>The idea behind this being that if <code>bufID</code> is already bound then the expensive call to <code>glBindBuffer</code> is missed. Is this a worthwhile approach? I assumed that OpenGL would likely implement such an optimization already, but I have seen this pattern used in a few projects now, so I am having my doubts. I am simply interested because it would be a pretty simple thing to implement, but if it doesn't make much/any difference then I will skip it (avoiding premature optimization). </p>\n"}, {"tags": ["c++", "c++11", "netbeans"], "comments": [{"owner": {"reputation": 6779, "user_id": 1691223, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/c2AsP.jpg?s=128&g=1", "display_name": "Shravan40", "link": "https://stackoverflow.com/users/1691223/shravan40"}, "edited": false, "score": 0, "creation_date": 1470863149, "post_id": 38883443, "comment_id": 65127956, "body": "Have you tried <code>Reparsing Project</code>  ?"}, {"owner": {"reputation": 193, "user_id": 6702210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79ed4cfaac612a382cf8f98f4d4698fc?s=128&d=identicon&r=PG&f=1", "display_name": "reconn", "link": "https://stackoverflow.com/users/6702210/reconn"}, "reply_to_user": {"reputation": 6779, "user_id": 1691223, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/c2AsP.jpg?s=128&g=1", "display_name": "Shravan40", "link": "https://stackoverflow.com/users/1691223/shravan40"}, "edited": false, "score": 0, "creation_date": 1470864051, "post_id": 38883443, "comment_id": 65128369, "body": "Yes, I did try reparsing the project. No result."}], "answers": [{"tags": [], "owner": {"reputation": 280, "user_id": 6519963, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b9e3fec772f1cdcd0011287e13f484a?s=128&d=identicon&r=PG&f=1", "display_name": "EmbeddedGuy", "link": "https://stackoverflow.com/users/6519963/embeddedguy"}, "is_accepted": false, "score": 0, "last_activity_date": 1472576447, "creation_date": 1472576447, "answer_id": 39233207, "question_id": 38883443, "link": "https://stackoverflow.com/questions/38883443/netbeans-showing-an-error-which-successfully-builds-and-works/39233207#39233207", "title": "Netbeans showing an error which successfully builds and works", "body": "<p>Anytime Netbeans gives me an error, but code compiles fine, I successfully correct it by erasing the MPLABX cache directory. I use Mac, but very likely it doesn't matter.</p>\n\n<p>In my case, the 'var' cache directory is located at:</p>\n\n<pre><code>/Users/USER_NAME/Library/Caches/mplab_ide/dev/v3.35/var\n</code></pre>\n\n<p>(replace USER_NAME with your user name)</p>\n\n<p>Let us know if it worked, or you find another solution.</p>\n"}], "owner": {"reputation": 193, "user_id": 6702210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79ed4cfaac612a382cf8f98f4d4698fc?s=128&d=identicon&r=PG&f=1", "display_name": "reconn", "link": "https://stackoverflow.com/users/6702210/reconn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472576447, "creation_date": 1470862829, "last_edit_date": 1470864213, "question_id": 38883443, "link": "https://stackoverflow.com/questions/38883443/netbeans-showing-an-error-which-successfully-builds-and-works", "title": "Netbeans showing an error which successfully builds and works", "body": "<p>I think I found an annoying bug (if not then someone explain please) in NetBeans 8.1 where C++11 shows an error and C++04 - I believe - not.</p>\n\n<pre><code>OtherClass* getOtherInstance(Coordiantes c) { return this-&gt;array[c.x][c.y] }\ninstance.getOtherInstance(Coordinates(0,0))-&gt;sayHello();\n</code></pre>\n\n<p>This code works, but when I used C++11's convenient features (which I use quite often) inside the parameters of the method, NB showed an error which surprisingly <strong>builds fine</strong>. So it looks like this:</p>\n\n<pre><code>instance.getOtherInstance({0,0})-&gt;sayHello(); // Error: unable to resolve identifier sayHello.\n</code></pre>\n\n<p>I know the problem is not big yet it is quite annoying to me having to write Coordinates(0,0) every time. Is there any way I could get rid of the error?</p>\n"}, {"tags": ["c++", "eigen3"], "answers": [{"comments": [{"owner": {"reputation": 2179, "user_id": 2630666, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/VIN5F.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2630666/matt"}, "edited": false, "score": 1, "creation_date": 1470924994, "post_id": 38890722, "comment_id": 65156595, "body": "What&#39;s the difference between <code>Eigen::aligned_allocator&lt;edge&gt;</code> and <code>Eigen::aligned_allocator&lt;Eigen::Matrix&lt;double, 2, 1&gt; &gt;</code> for this example?  The reason I ask is both produce code without errors."}, {"owner": {"reputation": 1328, "user_id": 2079934, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf1f4bf373ae0a70c59cef1239401117?s=128&d=identicon&r=PG&f=1", "display_name": "SpamBot", "link": "https://stackoverflow.com/users/2079934/spambot"}, "reply_to_user": {"reputation": 2179, "user_id": 2630666, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/VIN5F.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2630666/matt"}, "edited": false, "score": 1, "creation_date": 1470927241, "post_id": 38890722, "comment_id": 65158327, "body": "Using an allocator made for a different type sounds like anything <i>could</i> happen at runtime, I would be careful."}], "tags": [], "owner": {"reputation": 1328, "user_id": 2079934, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf1f4bf373ae0a70c59cef1239401117?s=128&d=identicon&r=PG&f=1", "display_name": "SpamBot", "link": "https://stackoverflow.com/users/2079934/spambot"}, "is_accepted": true, "score": 3, "last_activity_date": 1470902861, "creation_date": 1470902861, "answer_id": 38890722, "question_id": 38883424, "link": "https://stackoverflow.com/questions/38883424/eigen-unaligned-array-assert/38890722#38890722", "title": "Eigen unaligned array assert", "body": "<p>You have a <code>std::vector</code> that contains fixed-size Eigen types that are to be aligned. \nThe issue is <code>std::vector&lt;edge&gt;</code> where <code>edge</code> contains fixed-size aligned <code>Eigen::Matrix&lt;double, 2, 1&gt;</code>.\nHere, <code>EIGEN_MAKE_ALIGNED_OPERATOR_NEW</code> is not sufficient, you additionally need to choose Eigen's aligned allocators as described in <a href=\"https://eigen.tuxfamily.org/dox/group__TopicStlContainers.html\" rel=\"nofollow\">https://eigen.tuxfamily.org/dox/group__TopicStlContainers.html</a></p>\n\n<blockquote>\n  <p>Using STL containers on fixed-size vectorizable Eigen types, or classes >having members of such types, requires taking the following two steps:\n  (i) A 16-byte-aligned allocator must be used. Eigen does provide one ready for use: aligned_allocator.\n  (ii) If you want to use the <em>std::vector container, you need to <code>#include &lt;Eigen/StdVector&gt;</code></em>.</p>\n</blockquote>\n\n<p>You should correct your code roughly like this (not tested):</p>\n\n<pre><code>#include&lt;Eigen/StdVector&gt;\nclass Foo { \n  ...\n  std::vector&lt;edge,Eigen::aligned_allocator&lt;edge&gt; &gt; edges;\n}\n</code></pre>\n\n<p>Warning: On Linux you were just lucky it worked (maybe because 32bit/64bit), your code should really be corrected.</p>\n"}], "owner": {"reputation": 2179, "user_id": 2630666, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/VIN5F.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2630666/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1221, "favorite_count": 0, "accepted_answer_id": 38890722, "answer_count": 1, "score": 2, "last_activity_date": 1470902861, "creation_date": 1470862741, "question_id": 38883424, "link": "https://stackoverflow.com/questions/38883424/eigen-unaligned-array-assert", "title": "Eigen unaligned array assert", "body": "<p>I have a class that finds the convex hull of a 2D set of points.  It contains a struct which has 2 <code>Eigen::Matrix&lt;double, 2, 1&gt;</code> inside.  It looks like this (with many things removed):</p>\n\n<pre><code>class Foo{\npublic:\n    Foo(Eigen::Matrix&lt;double, Eigen::Dynamic, Eigen::Dynamic&gt;);\n\nprivate:\n    struct edge{\n        unsigned int a;\n        unsigned int b;\n        Eigen::Matrix&lt;double, 2, 1&gt; slope;\n        double mag;\n        Eigen::Matrix&lt;double, 2, 1&gt; normal;\n        std::vector&lt;unsigned int&gt; list;\n    };\n\n    Eigen::Matrix&lt;double, Eigen::Dynamic, Eigen::Dynamic&gt; points;\n    std::vector&lt;edge&gt; edges\n};\n</code></pre>\n\n<p>I am getting an assertion error when adding edges to the vector <code>edges</code> like this:</p>\n\n<pre><code>void Foo::DoThing(){\n    edges.push_back(edge());\n}\n</code></pre>\n\n<p>The exact error is:</p>\n\n<blockquote>\n  <p>Assertion failed: (reinterpret_cast(array) &amp; 0xf) == 0 &amp;&amp;\n  \"this assertio n is explained here: \"\n  \"<a href=\"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalign\" rel=\"nofollow\">http://eigen.tuxfamily.org/dox-devel/group__TopicUnalign</a>\n  edArrayAssert.html\" \" **** READ THIS WEB PAGE !!! ****\", file\n  \\blah\\blah\\blah\\includes\\eigen\\eigen-eigen-dc6cfdf9bcec\\eigen\\src\\core\\densestorage.h, line 86</p>\n</blockquote>\n\n<p>I went to the webpage and read that I needed to add this macro:\n<code>EIGEN_MAKE_ALIGNED_OPERATOR_NEW</code> which I added to the struct as follows:</p>\n\n<pre><code>struct edge{\n        unsigned int a;\n        unsigned int b;\n        Eigen::Matrix&lt;double, 2, 1&gt; slope;\n        double mag;\n        Eigen::Matrix&lt;double, 2, 1&gt; normal;\n        std::vector&lt;unsigned int&gt; list;\n\n        EIGEN_MAKE_ALIGNED_OPERATOR_NEW\n    };\n</code></pre>\n\n<p>But the error continues.  This is happening with VS 2013 and with Eigen version 3.2.9.  The same code unmodified works fine with version 3.2.0.  On linux with GCC version 5.3 it works fine with a beta build of Eigen.  What am I doing wrong with this newer version to cause this problem? </p>\n"}, {"tags": ["c++", "excel", "vba", "dll", "com"], "comments": [{"owner": {"reputation": 9829, "user_id": 3961708, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9fcd3fc0eae3e7b0e1f4f120f1326bcd?s=128&d=identicon&r=PG&f=1", "display_name": "cyboashu", "link": "https://stackoverflow.com/users/3961708/cyboashu"}, "edited": false, "score": 0, "creation_date": 1470862323, "post_id": 38883236, "comment_id": 65127562, "body": "did you develop that dll yourself? is it in C#, (wishful guess, I can see C++ tag). Anyways, one suggestion, add the COM tag and remove macros. you will get more response, hopefully."}, {"owner": {"reputation": 4621, "user_id": 4709298, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fe41ea7cc395df33b3ad744599248d80?s=128&d=identicon&r=PG&f=1", "display_name": "Preston", "link": "https://stackoverflow.com/users/4709298/preston"}, "edited": false, "score": 0, "creation_date": 1470867070, "post_id": 38883236, "comment_id": 65129547, "body": "try with Microsoft ActiveX Data Objects 2.8 Library checked in tools&gt;references that is"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6432984"}, "edited": false, "score": 0, "creation_date": 1470868616, "post_id": 38883236, "comment_id": 65130004, "body": "Have you tried one of the free code cleaners online?  They&#39;ll export everything into text files and then rebuild the workbook for you. <a href=\"http://www.appspro.com/Utilities/CodeCleaner.htm\" rel=\"nofollow noreferrer\">Excel VBA Code Cleaner</a>"}, {"owner": {"reputation": 41, "user_id": 4200522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7321b51e006006d20bc50f89dfd370bf?s=128&d=identicon&r=PG&f=1", "display_name": "Ronnie", "link": "https://stackoverflow.com/users/4200522/ronnie"}, "reply_to_user": {"reputation": 4621, "user_id": 4709298, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fe41ea7cc395df33b3ad744599248d80?s=128&d=identicon&r=PG&f=1", "display_name": "Preston", "link": "https://stackoverflow.com/users/4709298/preston"}, "edited": false, "score": 0, "creation_date": 1470921581, "post_id": 38883236, "comment_id": 65153965, "body": "@tom I tried doing that but it did not help. I think this is an issue with the dll file i am trying to add to the references. The 64-bit dll gets named as ScriptHost instead of its actual name. Does anyone know which part is responsible for the naming of this library. (I could not find &quot;ScriptHost&quot; in my C++ source code)."}], "owner": {"reputation": 41, "user_id": 4200522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7321b51e006006d20bc50f89dfd370bf?s=128&d=identicon&r=PG&f=1", "display_name": "Ronnie", "link": "https://stackoverflow.com/users/4200522/ronnie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 422, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1470920507, "creation_date": 1470862023, "last_edit_date": 1470920507, "question_id": 38883236, "link": "https://stackoverflow.com/questions/38883236/how-to-permanently-remove-or-update-a-vba-reference-in-excel", "title": "How to permanently remove or update a VBA reference in excel?", "body": "<p>My application makes use of macros to generate some charts and this uses references to some of the application dlls. I have converted the whole application from 32-bit to 64-bit including the dlls. But one of these references still seems to refer to 32-bit dll which i was using earlier. Now even when i try adding the new dll file in references it gets named differently and hence i am not able to create objects of this dll from the macros code. It gives me an error saying:\n<strong>Automation error: library not registered</strong></p>\n\n<p>Corresponding code:</p>\n\n<pre><code>On Error GoTo errNoDatabase\n       Set server = CreateObject(\"Bemmsdb.Server\")\n       'server.Connect \"SQLOLEDB\", \"BACKUP\", \"\", \"\", \"Trusted_Connection=Yes\"\n       'Set db = server.OpenDatabase(\"BEMMS\")\n       server.Connect \"\", \"\", \"\", \"\", \"\"\n       Set db = server.OpenDatabase(\"\")\n       GoTo errSkip errNoDatabase:\n       MsgBox \"Unable to open database. Be sure to select a database in PowerScape before running the 'Query Enetics Database' macro.\",\n   Title:=\"Query Enetics Database Macro\"\n       Exit Sub\n</code></pre>\n\n<p>This gives me the error message at the bottom since it can not create the Bemmsdb.Server object. Can anyone help me with this?</p>\n\n<p>Excel 2013 64bit\nWindows 10 64bit\nVisual Studio 2008 SP1</p>\n"}, {"tags": ["c++", "windows", "winapi"], "comments": [{"owner": {"reputation": 1066, "user_id": 3359878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9WfKf.jpg?s=128&g=1", "display_name": "Amadeusz", "link": "https://stackoverflow.com/users/3359878/amadeusz"}, "edited": false, "score": 0, "creation_date": 1470865250, "post_id": 38883212, "comment_id": 65128854, "body": "I assume this is not the icon you wanted?"}, {"owner": {"reputation": 124, "user_id": 6343272, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QFOky.png?s=128&g=1", "display_name": "pixel", "link": "https://stackoverflow.com/users/6343272/pixel"}, "reply_to_user": {"reputation": 1066, "user_id": 3359878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9WfKf.jpg?s=128&g=1", "display_name": "Amadeusz", "link": "https://stackoverflow.com/users/3359878/amadeusz"}, "edited": false, "score": 0, "creation_date": 1470865328, "post_id": 38883212, "comment_id": 65128884, "body": "@Amadeusz No, I wanted the icon located at <code>C:\\\\Users\\\\pixel\\\\Desktop\\\\MEIN.ico</code>"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1470865585, "post_id": 38883212, "comment_id": 65129006, "body": "Why don&#39;t you specify the icon that you want?"}, {"owner": {"reputation": 1066, "user_id": 3359878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9WfKf.jpg?s=128&g=1", "display_name": "Amadeusz", "link": "https://stackoverflow.com/users/3359878/amadeusz"}, "edited": false, "score": 0, "creation_date": 1470866070, "post_id": 38883212, "comment_id": 65129216, "body": "According to the resources you provided (Microsoft) your first argument in the ICON control sholud be text and not an icon resource ID. Maby changing it will help?"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1470867139, "post_id": 38883212, "comment_id": 65129567, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so that people can try to reproduce your issue."}, {"owner": {"reputation": 124, "user_id": 6343272, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QFOky.png?s=128&g=1", "display_name": "pixel", "link": "https://stackoverflow.com/users/6343272/pixel"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1470889411, "post_id": 38883212, "comment_id": 65134994, "body": "@JonathanPotter I&#39;ve updated the question with source code, I tried to be as minimal as possible. I got the sample icon from the <a href=\"https://www.iconfinder.com/icons/60173/example_icon\" rel=\"nofollow noreferrer\">internet</a>"}], "answers": [{"comments": [{"owner": {"reputation": 124, "user_id": 6343272, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QFOky.png?s=128&g=1", "display_name": "pixel", "link": "https://stackoverflow.com/users/6343272/pixel"}, "edited": false, "score": 0, "creation_date": 1470893134, "post_id": 38887433, "comment_id": 65136152, "body": "I&#39;ve literally spent days on trying to get this to work! I thought that using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms645434(v=vs.85).aspx\" rel=\"nofollow noreferrer\">CreateDialog</a> with NULL would work because it says    &gt;If this parameter is NULL, then the current executable is used.    Is there ever a time that I would want to use NULL?"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "reply_to_user": {"reputation": 124, "user_id": 6343272, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QFOky.png?s=128&g=1", "display_name": "pixel", "link": "https://stackoverflow.com/users/6343272/pixel"}, "edited": false, "score": 2, "creation_date": 1470893579, "post_id": 38887433, "comment_id": 65136343, "body": "To be honest I don&#39;t know, as you say the docs for <code>CreateDialog</code> say that it&#39;s valid to pass NULL, it&#39;s just that the icon control doesn&#39;t like it. Probably best to always pass a valid module handle since it won&#39;t hurt and as you see, sometimes helps :)"}, {"owner": {"reputation": 30603, "user_id": 27491, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48cc12ad73f816bc5b115a9ca6965328?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/27491/chris-becke"}, "edited": false, "score": 1, "creation_date": 1470901911, "post_id": 38887433, "comment_id": 65140722, "body": "It is valid to pass NULL. Especially if you are making a dialog that implements shell-like functionality and you would <i>want</i> to use shell32 icons. Sometimes the MSDN documentation is written in a way that implies its more targeting an internal audience. See the documentation for <code>ShellAbout</code> for an extreme example."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1470917980, "post_id": 38887433, "comment_id": 65151298, "body": "I guess this is an additional caveat when <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20121214-00/?p=5833\" rel=\"nofollow noreferrer\">using <code>NULL</code> as an <code>hInstance</code></a>: if the dialog system just passes the given <code>hInstance</code> to <code>LoadIcon()</code>, and we know that passing <code>NULL</code> to <code>LoadIcon()</code> uses the system icon list, then <code>NULL</code> isn&#39;t always the current module! :D To avoid issues like this, always pass the correct hInstance for your component."}], "tags": [], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": true, "score": 5, "last_activity_date": 1470890808, "creation_date": 1470890808, "answer_id": 38887433, "question_id": 38883212, "link": "https://stackoverflow.com/questions/38883212/how-do-i-include-a-custom-icon-in-the-client-area-of-a-dialog-box/38887433#38887433", "title": "How do I include a custom icon in the client area of a dialog box?", "body": "<p>The problem is your call to <code>CreateDialog</code> is not providing a module handle, which is stopping the icon control from being able to locate the specified icon in your program's resources.</p>\n\n<p>Obviously in this instance it defaults to looking in the system image list, which is why you see system icons appear (and change when you change the ID).</p>\n\n<p>Change your call to:</p>\n\n<pre><code>about = CreateDialog(hInstance,\n                        MAKEINTRESOURCE(IDD_DIALOG),\n                        hwnd,\n                        DialogProc);\n</code></pre>\n"}], "owner": {"reputation": 124, "user_id": 6343272, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QFOky.png?s=128&g=1", "display_name": "pixel", "link": "https://stackoverflow.com/users/6343272/pixel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1845, "favorite_count": 0, "accepted_answer_id": 38887433, "answer_count": 1, "score": 0, "last_activity_date": 1470890808, "creation_date": 1470861926, "last_edit_date": 1495535320, "question_id": 38883212, "link": "https://stackoverflow.com/questions/38883212/how-do-i-include-a-custom-icon-in-the-client-area-of-a-dialog-box", "title": "How do I include a custom icon in the client area of a dialog box?", "body": "<p>This question is different than <a href=\"https://stackoverflow.com/questions/7410846/using-an-icon-on-a-dialog-box-window-c-win32-api\">Using an icon on a dialog box window C++ Win32 API</a>, I'm trying to include a custom icon into the <strong>client area</strong> of a dialog box. When I run the code, I get a default Windows icon instead of the custom one I want. If I change the value of <code>IDI_ICON1</code> to any number between 80 and 120, I'll get different Windows icons; I've tried higher numbers but then nothing will appear. I saw someone at <a href=\"http://www.cplusplus.com/forum/windows/33736/\" rel=\"nofollow noreferrer\">cplusplus.com</a> run into the same error and I did the same thing, but it didn't make a difference.   </p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa381017(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Microsoft's</a> reference about icons.   </p>\n\n<p>When I run the code:<br>\n<a href=\"https://i.stack.imgur.com/dcbEi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dcbEi.png\" alt=\"Unmatched Dialog Box\"></a>  </p>\n\n<p>Visual Studio says it'll look like this: \n<a href=\"https://i.stack.imgur.com/zBqDj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zBqDj.png\" alt=\"Visual Studio&#39;s Dialog Editor\"></a></p>\n\n<p>Source.cpp  </p>\n\n<pre><code>#pragma comment(lib,\"ole32.lib\")\n#pragma comment(linker,\"\\\"/manifestdependency:type='win32' \\\nname='Microsoft.Windows.Common-Controls' version='6.0.0.0' \\\nprocessorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*'\\\"\")\n\n_TCHAR szClassName[] = \"StackOverflow\";\nHWND hwnd;\n\nLRESULT CALLBACK WindowProcedure(HWND, UINT, WPARAM, LPARAM);\nINT_PTR CALLBACK DialogProc(HWND handle, UINT message, WPARAM wparam, LPARAM lparam);\n\nint _stdcall WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR CmdLine, int nShowCmd)\n{\n    MSG messages;\n    WNDCLASSEX wincl;\n    HWND about;\n\n    wincl.cbSize = sizeof(WNDCLASSEX);\n    wincl.style = CS_DBLCLKS;\n    wincl.lpfnWndProc = WindowProcedure;\n    wincl.cbClsExtra = 0;\n    wincl.cbWndExtra = 0;\n    wincl.hInstance = hInstance;\n    wincl.hIcon = LoadIcon(GetModuleHandle(NULL), MAKEINTRESOURCE(IDI_ICON1));\n    wincl.hCursor = LoadCursor(NULL, IDC_ARROW);\n    wincl.hbrBackground = (HBRUSH)COLOR_WINDOW;//COLOR_BACKGROUND;\n    wincl.lpszMenuName = NULL;\n    wincl.lpszClassName = szClassName;\n    wincl.hIconSm = LoadIcon(GetModuleHandle(NULL), MAKEINTRESOURCE(IDI_ICON1));\n\n    if(!RegisterClassEx(&amp;wincl))\n        return 0;\n\n    hwnd = CreateWindowEx(WS_EX_LEFT | WS_EX_LTRREADING | WS_EX_WINDOWEDGE,     //dwExStyle\n        szClassName,                                                            //ClassName\n        \"StackOverflow\",                                                        //WindowName\n        WS_OVERLAPPED | WS_SYSMENU | WS_CAPTION | WS_EX_PALETTEWINDOW,          //Window Style\n        CW_USEDEFAULT,                                                          //Horizontal Pos\n        CW_USEDEFAULT,                                                          //Verticals Pos\n        100,                                                                    //Width\n        100,                                                                    //Height\n        HWND_DESKTOP,                                                           //Parent\n        NULL,                                                                   //Menu\n        hInstance,                                                              //Module Assoc  \n        NULL);                                                                  //CreateStruct\n\n    about = CreateDialog(   NULL,\n                            MAKEINTRESOURCE(IDD_DIALOG),\n                            hwnd,\n                            DialogProc);\n\n    while (GetMessage(&amp;messages, NULL, 0, 0))\n    {\n        TranslateMessage(&amp;messages);\n        DispatchMessage(&amp;messages);\n    }\n\n    return messages.wParam;\n}\n\nINT_PTR CALLBACK DialogProc(HWND handle, UINT message, WPARAM wparam, LPARAM lparam)\n{\n    switch (message)\n    {\n    case WM_INITDIALOG:\n        //This changes the Icon in the TitleBar\n        SendMessage(handle, WM_SETICON, ICON_SMALL,\n            (LPARAM)LoadIcon(GetModuleHandle(NULL), MAKEINTRESOURCE(IDI_ICON1)));\n        return TRUE;\n    case WM_CLOSE:\n        DestroyWindow(handle);\n        return TRUE;\n    case WM_DESTROY:\n        PostQuitMessage(0);\n        return TRUE;\n    case WM_COMMAND:\n        switch (LOWORD(wparam))\n        {\n        case IDCOK:\n            //TODO\n        case IDCANCEL:\n            //EndDialog(handle,wparam);\n            DestroyWindow(handle);\n            return TRUE;\n        default:\n            return FALSE;\n        }\n    default:\n        return FALSE;\n    }\n    return FALSE;\n}\n\nLRESULT CALLBACK WindowProcedure(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)\n{\n    return DefWindowProc(hwnd, message, wParam, lParam);\n}\n</code></pre>\n\n<p>StackOverflow.rc</p>\n\n<pre><code>#include \"resource.h\"\n\nIDD_DIALOG DIALOGEX 0, 0, 245, 57\nSTYLE DS_SETFONT | DS_MODALFRAME | DS_SETFOREGROUND | DS_FIXEDSYS | DS_CENTER | WS_POPUP | WS_VISIBLE | WS_CAPTION | WS_SYSMENU\nCAPTION \"About Dialog\"\nFONT 10, \"MS Shell Dlg\", 400, 0, 0x1\nBEGIN\n    DEFPUSHBUTTON   \"OK\",IDOK,166,7,50,14\n    PUSHBUTTON      \"Cancel\",2,166,30,50,14\n    LTEXT           \"The Icon here needs to match the one in the Titlebar\",IDC_STATIC,50,15,107,28\n    ICON            IDI_ICON1,103,19,16,20,20, SS_ICON\nEND\n\n// Icon with lowest ID value placed first to ensure application icon\n// remains consistent on all systems.\nIDI_ICON1               ICON                    \"C:\\\\Users\\\\pixel\\\\Desktop\\\\MEIN.ico\"\n</code></pre>\n\n<p>resource.h</p>\n\n<pre><code>//{{NO_DEPENDENCIES}}\n// Microsoft Visual C++ generated include file.\n// Used by StackOverflow.rc\n//\n#define IDD_DIALOG                      101\n#define IDI_ICON1                       103\n#define IDCOK                           105\n#define IDCANCEL                        106\n</code></pre>\n"}, {"tags": ["c++", "shared-libraries", "dlib"], "comments": [{"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 0, "creation_date": 1470863711, "post_id": 38883173, "comment_id": 65128193, "body": "Were there any warnings in the compilation e.g. it complaining about no <code>BLAS</code> library being found? It might help. You could also try <code>cmake CMAKE_CXX_FLAGS=-mavx ..</code>, which will add the <code>-mavx</code> option to compilation - it may give an optimization boost to the build. TBH, though you would need to compare the resulting compiled code for the library to determine the reason for the performance difference"}, {"owner": {"reputation": 2178, "user_id": 3209505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89cdc5a35bbffb1f0dbc1a1026642d2c?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeniy", "link": "https://stackoverflow.com/users/3209505/evgeniy"}, "edited": false, "score": 0, "creation_date": 1470991580, "post_id": 38883173, "comment_id": 65184503, "body": "All face detection code is header-based. It does not depend on using shared/static libraries (but they are needed for loading face detector model). The problem is somewhere else. Please tell us more details about this performance problems: CPU model/speed, image resolution, detection time in both cases"}], "answers": [{"comments": [{"owner": {"reputation": 1403, "user_id": 1072039, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/mFWFk.jpg?s=128&g=1", "display_name": "logidelic", "link": "https://stackoverflow.com/users/1072039/logidelic"}, "edited": false, "score": 0, "creation_date": 1497018682, "post_id": 39016754, "comment_id": 75917270, "body": "Thanks for this answer! I did much searching before I came across this and was just convinced that dlib&#39;s face detection was ridiculously slow. The key point is that, since it is contained fully in header files, the optimization of your program is what matters here! (it is also surprising that the difference between the debug build and the release build would be many seconds vs a few ms)."}], "tags": [], "owner": {"reputation": 4819, "user_id": 6730309, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ch5I4rWxJsk/AAAAAAAAAAI/AAAAAAAAAQs/IafX4QBx88s/photo.jpg?sz=128", "display_name": "runhani", "link": "https://stackoverflow.com/users/6730309/runhani"}, "is_accepted": false, "score": 3, "last_activity_date": 1471521122, "last_edit_date": 1471521122, "creation_date": 1471518838, "answer_id": 39016754, "question_id": 38883173, "link": "https://stackoverflow.com/questions/38883173/c-program-with-shared-dlib-libraries-extremely-slow-on-ubuntu-14-04/39016754#39016754", "title": "C++ Program with shared Dlib libraries extremely slow on Ubuntu 14.04", "body": "<p>I want to share my experience. ^^</p>\n\n<p>You should use <strong>-O3</strong> and <strong>-mavx</strong> option for speed up. </p>\n\n<p>(<strong>-O3</strong> complie option is critical for speed up)</p>\n\n<p>I created a shared library for dlib as mentioned above. </p>\n\n<p>and compiled <strong>web_face_pose_ex.cpp</strong> with dlib shared library.</p>\n\n<p><strong>OS</strong> : <em>Ubuntu 14.04</em></p>\n\n<p><strong>dlib version</strong> : <em>19.0.0</em></p>\n\n<p><strong>Input Resolution</strong> : 640 x 480 webcam (Logitech C920)</p>\n\n<ol>\n<li><p>I exported below path.</p>\n\n<pre><code>$ export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig\n$ export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib\n</code></pre></li>\n<li><p>Without <strong>-O3</strong> option : <strong><em>time : 2674.25 ms</em></strong></p>\n\n<pre><code>g++ -o my_web_face webcam_face_pose_ex.cpp -lpthread -lX11 -lblas -llapack `pkg-config --cflags --libs opencv dlib-1`\n</code></pre></li>\n<li><p>With -O3 option : <strong><em>time : 55 ms</em></strong></p>\n\n<pre><code>g++ -o -O3 my_web_face webcam_face_pose_ex.cpp -lpthread -lX11 -lblas -llapack `pkg-config --cflags --libs opencv dlib-1`\n</code></pre></li>\n<li><p>With both <strong>-O3</strong> &amp; <strong>-mavx</strong> (use AVX) : <strong><em>time : 45 ms</em></strong></p>\n\n<pre><code>g++ -o -O3 -mavx my_web_face webcam_face_pose_ex.cpp -lpthread -lX11 -lblas -llapack `pkg-config --cflags --libs opencv dlib-1`\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 31, "user_id": 6383158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/317fe4b86d91623b21572b8ffdb33a52?s=128&d=identicon&r=PG&f=1", "display_name": "elHam", "link": "https://stackoverflow.com/users/6383158/elham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1131, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1471521122, "creation_date": 1470861804, "last_edit_date": 1495540295, "question_id": 38883173, "link": "https://stackoverflow.com/questions/38883173/c-program-with-shared-dlib-libraries-extremely-slow-on-ubuntu-14-04", "title": "C++ Program with shared Dlib libraries extremely slow on Ubuntu 14.04", "body": "<p>According to Davis Kings answer in that question: <a href=\"https://stackoverflow.com/questions/33996361/create-a-shared-library-for-dlib/33997825#33997825\">Create a shared library for dlib</a>, I created shared libraries for Dlib and linked them to a program that uses the Dlib Face detection to detect faces in the pictures of a camera, using these commands:</p>\n\n<pre><code>cd dlib-19.0/dlib\nmkdir build\ncd build\ncmake ..\nmake\nsudo make install\n</code></pre>\n\n<p>And the <code>-ldlib</code> option.</p>\n\n<p>I can compile and execute the program, however the face detection is extremely slow. </p>\n\n<p>I tried the same program on Windows with Visual Studio 2013. When I used the Debug Mode, the face detection was extremely slow as well, but was running pretty well in Release mode. So I thought, that the shared libraries might be in Debug mode as well and tried to force them in Release mode with these commands:</p>\n\n<pre><code>cd examples\nmkdir build\ncd build\ncmake ..\ncmake --build . --config Release \nsudo make install\n</code></pre>\n\n<p>But the result was the same as before.</p>\n\n<p>Does anybody have an Idea, what the reason could be, that it is that slow?</p>\n\n<p>Thank you for your help.</p>\n"}, {"tags": ["c++", "math", "trigonometry", "math.h", "cmath"], "comments": [{"owner": {"reputation": 5746, "user_id": 583570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17472ad659a41e48c4574e01d2312807?s=128&d=identicon&r=PG", "display_name": "markgz", "link": "https://stackoverflow.com/users/583570/markgz"}, "edited": false, "score": 0, "creation_date": 1470861747, "post_id": 38883134, "comment_id": 65127282, "body": "try <code>result = sqrt(....);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1659, "user_id": 6252597, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209557469319499/picture?type=large", "display_name": "Cameron637", "link": "https://stackoverflow.com/users/6252597/cameron637"}, "is_accepted": false, "score": 2, "last_activity_date": 1470861762, "creation_date": 1470861762, "answer_id": 38883164, "question_id": 38883134, "link": "https://stackoverflow.com/questions/38883134/c-expression-must-be-a-modifiable-lvalue/38883164#38883164", "title": "C++: Expression must be a modifiable lvalue", "body": "<p>You've switched around your assignment.  You're trying to assign the sqrt function the value of result; you want to assign the result to the value of the sqrt output:</p>\n\n<pre><code>double a, b, result;\n\ncout &lt;&lt; \"Please enter your two side lengths (ex:12 5)\";\ncin &gt;&gt; a, b;\nresult = sqrt(pow(a, 2) + pow(b, 2));\n\ncout &lt;&lt; result &lt;&lt; endl;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1470861883, "post_id": 38883170, "comment_id": 65127347, "body": "<a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow noreferrer\">The comma operator</a>. : )"}, {"owner": {"reputation": 11, "user_id": 5635293, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7dDiWeeniMc/AAAAAAAAAAI/AAAAAAAAAKc/5SaoV91FSEs/photo.jpg?sz=128", "display_name": "Lindy", "link": "https://stackoverflow.com/users/5635293/lindy"}, "edited": false, "score": 0, "creation_date": 1470861892, "post_id": 38883170, "comment_id": 65127354, "body": "Ah yes, I did this in other parts of my program but missed that here. Thanks for solving an error before I knew I had it!"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1470861941, "post_id": 38883170, "comment_id": 65127372, "body": "Ah, well, i know the comma operator there, but not otherwise."}], "tags": [], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "is_accepted": true, "score": 1, "last_activity_date": 1470862016, "last_edit_date": 1470862016, "creation_date": 1470861792, "answer_id": 38883170, "question_id": 38883134, "link": "https://stackoverflow.com/questions/38883134/c-expression-must-be-a-modifiable-lvalue/38883170#38883170", "title": "C++: Expression must be a modifiable lvalue", "body": "<p>Modify your <code>cin</code> statement to <code>cin &gt;&gt; a &gt;&gt; b;</code>, this reads multiple values at once, since the comma operator doesn't exist for <code>cin</code>. Also, switch the order of the result variable on the right side of the assignment to left side. The two operands to the <code>=</code> on the assignment are l-values, standing for left-values, supposed to be on the left side, and r-values, standing for right-values, supposed to be on the right side. Switch them, and you get an error.</p>\n\n<h3>Your new Modified Code</h3>\n\n<pre><code>double a, b, result;\n\ncout &lt;&lt; \"Please enter your two side lengths (ex:12 5)\";\n\ncin &gt;&gt; a &gt;&gt; b; //&lt;-- See '&gt;&gt;' here\n\n//sqrt(pow(a, 2) + pow(b, 2)) = result; &lt;-- switch these to...\n\nresult = sqrt(pow(a, 2) + pow(b, 2)); //&lt;-- ...this\ncout &lt;&lt; result &lt;&lt; endl;\n</code></pre>\n\n<p><kbd><a href=\"http://cpp.sh/2f4d2\" rel=\"nofollow\">Live Example</a></kbd></p>\n"}, {"tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": false, "score": 3, "last_activity_date": 1470861807, "last_edit_date": 1495535358, "creation_date": 1470861807, "answer_id": 38883175, "question_id": 38883134, "link": "https://stackoverflow.com/questions/38883134/c-expression-must-be-a-modifiable-lvalue/38883175#38883175", "title": "C++: Expression must be a modifiable lvalue", "body": "<p>First, <code>cin &gt;&gt; a, b</code> <a href=\"https://stackoverflow.com/q/7425318/4354477\">does not do what you think it's doing</a>. You'd better write <code>cin &gt;&gt; a &gt;&gt; b</code>. </p>\n\n<p>Then, you assign <em>data</em> to variables, not <em>variables</em> to data. So do <code>result = sqrt(...)</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 6779, "user_id": 1691223, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/c2AsP.jpg?s=128&g=1", "display_name": "Shravan40", "link": "https://stackoverflow.com/users/1691223/shravan40"}, "is_accepted": false, "score": 1, "last_activity_date": 1470862612, "last_edit_date": 1470862612, "creation_date": 1470861839, "answer_id": 38883185, "question_id": 38883134, "link": "https://stackoverflow.com/questions/38883134/c-expression-must-be-a-modifiable-lvalue/38883185#38883185", "title": "C++: Expression must be a modifiable lvalue", "body": "<p>The main problem is the line number <code>4</code> and <code>5</code> of your piece of code.</p>\n\n<p><code>cin &gt;&gt; a,b;</code> is wrong. You can take multiple input in a line like this <code>cin &gt;&gt; a &gt;&gt; b;</code></p>\n\n<p>And in the line number 5 you are doing assignment in wrong order. You should just reverse it <code>result</code> this way <code>result = sqrt(pow(a, 2) + pow(b, 2)) ;</code></p>\n"}], "owner": {"reputation": 11, "user_id": 5635293, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7dDiWeeniMc/AAAAAAAAAAI/AAAAAAAAAKc/5SaoV91FSEs/photo.jpg?sz=128", "display_name": "Lindy", "link": "https://stackoverflow.com/users/5635293/lindy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 0, "accepted_answer_id": 38883170, "answer_count": 4, "score": 0, "last_activity_date": 1470862612, "creation_date": 1470861633, "question_id": 38883134, "link": "https://stackoverflow.com/questions/38883134/c-expression-must-be-a-modifiable-lvalue", "title": "C++: Expression must be a modifiable lvalue", "body": "<p>I am making a text based simple operation/trig calculator. I am getting the error: \"Expression must be a modifiable lvalue\" when I attempt to sqrt the squared variables. Here is my current code: (the error highlights the sqrt)</p>\n\n<pre><code>double a, b, result;\n\ncout &lt;&lt; \"Please enter your two side lengths (ex:12 5)\";\ncin &gt;&gt; a, b;\nsqrt(pow(a, 2) + pow(b, 2)) = result;\n\ncout &lt;&lt; result &lt;&lt; endl;\n</code></pre>\n\n<p>Apologies for any formatting errors, first question asked here any help is appreciated. Thank you!</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 177, "user_id": 1131116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3388871e17b4fe09e48006ab8963ad04?s=128&d=identicon&r=PG", "display_name": "halit", "link": "https://stackoverflow.com/users/1131116/halit"}, "is_accepted": false, "score": 0, "last_activity_date": 1470862432, "creation_date": 1470862432, "answer_id": 38883346, "question_id": 38883121, "link": "https://stackoverflow.com/questions/38883121/transferring-a-string-from-one-cpp-file-to-another/38883346#38883346", "title": "Transferring a string from one .cpp file to another", "body": "<p>If you don't want to use global variable it is better share your classes and we can think with your current design. Otherwise there is a global approach below.</p>\n\n<p>You will define a global variable named <code>value</code> in a header file and you will use <code>extern</code> keyword while defining. It means that there is a global <code>value</code> variable that is created once and every .cpp file includes that header will use same variable. Let me write an example. </p>\n\n<p>Think you have <code>common.h</code> file defining your string value:</p>\n\n<pre><code>extern std::string value;\n</code></pre>\n\n<p>And you have two different .cpp files they share that common value. In file1.cpp create that <code>value</code>. </p>\n\n<p><em>file1.cpp:</em></p>\n\n<pre><code>#include \"common.h\"\n\nstd::string value;\n\nvoid fooInFile1() {\n    value = \"Changed from fooInFile1!\";\n}\n</code></pre>\n\n<p><em>file2.cpp</em></p>\n\n<pre><code>#include \"common.h\"\n\nvoid fooInFile2() {\n    value = \"Changed from fooInFile2!\";\n}\n</code></pre>\n\n<p>In this example file1.cpp and file2.cpp are affecting the same <code>value</code> variable.</p>\n"}, {"tags": [], "owner": {"reputation": 26196, "user_id": 1841194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e65b668131c96399c25c6fae3fff8da5?s=128&d=identicon&r=PG&f=1", "display_name": "frogatto", "link": "https://stackoverflow.com/users/1841194/frogatto"}, "is_accepted": false, "score": 0, "last_activity_date": 1470862635, "creation_date": 1470862635, "answer_id": 38883398, "question_id": 38883121, "link": "https://stackoverflow.com/questions/38883121/transferring-a-string-from-one-cpp-file-to-another/38883398#38883398", "title": "Transferring a string from one .cpp file to another", "body": "<p>The best solution I can think of would be using <a href=\"http://doc.qt.io/qt-4.8/signalsandslots.html\" rel=\"nofollow\">signals and slots</a>. In <code>on_tableView_view_activated</code> you should emit a signal and catch it in <code>IVBD.cpp</code>.</p>\n\n<p>Using global variables doen't sound good, though it works!</p>\n"}], "owner": {"reputation": 49, "user_id": 6702160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a001c3e665a9e43936a9f43b7c38c8fc?s=128&d=identicon&r=PG&f=1", "display_name": "dpopo", "link": "https://stackoverflow.com/users/6702160/dpopo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1470862635, "creation_date": 1470861559, "question_id": 38883121, "link": "https://stackoverflow.com/questions/38883121/transferring-a-string-from-one-cpp-file-to-another", "title": "Transferring a string from one .cpp file to another", "body": "<p>Good evening, I working on a project that requires me to use a string variable in one .cpp file and same string variable in the next .cpp file. This is my patientdatabase.cpp:</p>\n\n<pre><code>void patientDatabase::on_tableView_view_activated(const QModelIndex &amp;index)\n{\n QString value = ui-&gt;tableView_view-&gt;model()-&gt;data(index).toString();\n patientR.connOpen();\n QSqlQuery qry;\n qry.prepare(\"select * from imageTable where PatientId = '\"+value+\"'\");\nif (qry.exec()){\n    IVDB *x = new IVDB;\n    x-&gt;show();\n}\n</code></pre>\n\n<p>This function basically changes windows to IVBD whenever I click on patientId on the table provided in my patientDatabase and now I need the string 'value' in my IVBD.cpp </p>\n\n<pre><code>QSqlQuery *qry = new QSqlQuery(registration.db);\nqry-&gt;prepare(\"select * from imageTable where PatientId ='\"+value+\"'\");    // this string 'value; is from the last .cpp file\n</code></pre>\n\n<p>I dont want to use global variables but stuck here and not sure how to approach it. </p>\n"}, {"tags": ["c++", "qt", "qt5.7"], "comments": [{"owner": {"reputation": 2698, "user_id": 490560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5641d03655d7b0436b299c1650448274?s=128&d=identicon&r=PG", "display_name": "Ignitor", "link": "https://stackoverflow.com/users/490560/ignitor"}, "edited": false, "score": 0, "creation_date": 1470867122, "post_id": 38883119, "comment_id": 65129563, "body": "How about using two QToolBars put into a QHBoxLayout with a QSpacerItem in between?"}, {"owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "reply_to_user": {"reputation": 2698, "user_id": 490560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5641d03655d7b0436b299c1650448274?s=128&d=identicon&r=PG", "display_name": "Ignitor", "link": "https://stackoverflow.com/users/490560/ignitor"}, "edited": false, "score": 0, "creation_date": 1470935624, "post_id": 38883119, "comment_id": 65163496, "body": "@Ignitor Well, that is a pretty good ideia. The only problem now is that there is a visual separation between both QToolBars. It ain&#39;t the best solution but works fine. Thanks ^^"}], "answers": [{"comments": [{"owner": {"reputation": 2549, "user_id": 823321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrwbB.png?s=128&g=1", "display_name": "s\u0250un\u0131\u0254\u05df\u0250q\u0250p", "link": "https://stackoverflow.com/users/823321/s%c9%90un%c4%b1%c9%94%d7%9f%c9%90q%c9%90p"}, "edited": false, "score": 0, "creation_date": 1525420226, "post_id": 50169520, "comment_id": 87357059, "body": "Please describe a little bit your solution, and don&#39;t just dump code as an answer. <a href=\"https://stackoverflow.com/help/how-to-answer\">stackoverflow.com/help/how-to-answer</a>"}], "tags": [], "owner": {"reputation": 139, "user_id": 9087341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7598c9e24eb07efd2f4a9b71324b421b?s=128&d=identicon&r=PG&f=1", "display_name": "K&#228;seknacker", "link": "https://stackoverflow.com/users/9087341/k%c3%a4seknacker"}, "is_accepted": false, "score": 2, "last_activity_date": 1525425938, "last_edit_date": 1525425938, "creation_date": 1525419041, "answer_id": 50169520, "question_id": 38883119, "link": "https://stackoverflow.com/questions/38883119/qt-5-7-0-how-to-add-a-horizontal-spacer-in-toolbar/50169520#50169520", "title": "(Qt 5.7.0) How to add a horizontal spacer in toolBar", "body": "<p>My solution:</p>\n\n<pre><code>// add left Actions\nQAction* action1 = ui.toolBar-&gt;addAction(/* ... */);\n\n// Spacer\nQWidget* spacer = new QWidget();\nspacer-&gt;setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Preferred);\nui.toolBar-&gt;addWidget(spacer);\n\n// add right Actions\nQAction* action2 = ui.toolBar-&gt;addAction(/* ... */);\n</code></pre>\n\n<p>Between my left and right actions, I've added a QWidget that separates them. Crucial for this is QSizePolicy :: Expanding</p>\n"}], "owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1431, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525425938, "creation_date": 1470861549, "question_id": 38883119, "link": "https://stackoverflow.com/questions/38883119/qt-5-7-0-how-to-add-a-horizontal-spacer-in-toolbar", "title": "(Qt 5.7.0) How to add a horizontal spacer in toolBar", "body": "<p>I have a QtoolBar in my mainwindow. This toolBar have several QActions. I need some of this Actions to stay in the left side of the toolBar and some o them to stay at the right side.</p>\n\n<p>How do I make them separeted?</p>\n\n<p>I don't see any reason for more details inn this question but if necessary I will add them.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "hardware", "motherboard"], "comments": [{"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 3, "creation_date": 1470861513, "post_id": 38883092, "comment_id": 65127164, "body": "You can&#39;t expect us to give you code?"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 1, "creation_date": 1470861613, "post_id": 38883092, "comment_id": 65127219, "body": "Did you google that? It is unclear what you are asking here or/and too broad"}, {"owner": {"reputation": 39, "user_id": 6702185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4a32ab82c20195928826cf86128c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ITCSB", "link": "https://stackoverflow.com/users/6702185/itcsb"}, "edited": false, "score": 0, "creation_date": 1470861797, "post_id": 38883092, "comment_id": 65127304, "body": "FirstStep, I googled this, but received no real answer for Windows 7."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 1, "creation_date": 1470861811, "post_id": 38883092, "comment_id": 65127310, "body": "Define &quot;<i>real answer</i>&quot;? And did you start with any base code?"}, {"owner": {"reputation": 39, "user_id": 6702185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4a32ab82c20195928826cf86128c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ITCSB", "link": "https://stackoverflow.com/users/6702185/itcsb"}, "edited": false, "score": 2, "creation_date": 1470861936, "post_id": 38883092, "comment_id": 65127371, "body": "Using the Beep(hertz, milli) and trying /a in the console. Although that only directed it to my default sound device as I expected."}, {"owner": {"reputation": 2371, "user_id": 270006, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/874bcba40024d48919097b29a25e852d?s=128&d=identicon&r=PG", "display_name": "\u0179V -", "link": "https://stackoverflow.com/users/270006/%c5%b9v"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 1, "creation_date": 1470862171, "post_id": 38883092, "comment_id": 65127489, "body": "@FirstStep dude, what? How would it be possible to start with base code for something that is not known how to do?"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 2371, "user_id": 270006, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/874bcba40024d48919097b29a25e852d?s=128&d=identicon&r=PG", "display_name": "\u0179V -", "link": "https://stackoverflow.com/users/270006/%c5%b9v"}, "edited": false, "score": 1, "creation_date": 1470862366, "post_id": 38883092, "comment_id": 65127589, "body": "@ZephyrPellerin wow calm down. OP could have improved the Q if wanted to get better responses. Why did not he provide that small code in the OP instead of the comment then?"}, {"owner": {"reputation": 39, "user_id": 6702185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4a32ab82c20195928826cf86128c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ITCSB", "link": "https://stackoverflow.com/users/6702185/itcsb"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1470862433, "post_id": 38883092, "comment_id": 65127624, "body": "@FirstStep could you inform me how to better improve the question in order for the community to provide better answers? I am quite new as you might be able to tell and would appreciate any feedback I can get."}, {"owner": {"reputation": 19564, "user_id": 5292302, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b61b00d5bcb378f99eadff312544514?s=128&d=identicon&r=PG", "display_name": "Petter Friberg", "link": "https://stackoverflow.com/users/5292302/petter-friberg"}, "edited": false, "score": 0, "creation_date": 1470862527, "post_id": 38883092, "comment_id": 65127679, "body": "This question seems reasonable scoped, hence I can&#39;t see why it needs a code attempt. However the community is full of homework question so they all expect some code, for example you could add that Beep... only send to default sound device (to make them less skeptic and show that you understand some of the issues."}, {"owner": {"reputation": 39, "user_id": 6702185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4a32ab82c20195928826cf86128c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ITCSB", "link": "https://stackoverflow.com/users/6702185/itcsb"}, "reply_to_user": {"reputation": 19564, "user_id": 5292302, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b61b00d5bcb378f99eadff312544514?s=128&d=identicon&r=PG", "display_name": "Petter Friberg", "link": "https://stackoverflow.com/users/5292302/petter-friberg"}, "edited": false, "score": 0, "creation_date": 1470862784, "post_id": 38883092, "comment_id": 65127802, "body": "@PetterFriberg I think I edited the question to be more descriptive."}, {"owner": {"reputation": 124, "user_id": 4951232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMsLd.png?s=128&g=1", "display_name": "Darth Futuza", "link": "https://stackoverflow.com/users/4951232/darth-futuza"}, "edited": false, "score": 0, "creation_date": 1470863294, "post_id": 38883092, "comment_id": 65128016, "body": "Err...this may not be what your looking for, but like this?  std::cout&lt;&lt;&quot;\\a&quot;; EDIT: nevermind see you already tried that."}, {"owner": {"reputation": 39, "user_id": 6702185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4a32ab82c20195928826cf86128c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ITCSB", "link": "https://stackoverflow.com/users/6702185/itcsb"}, "reply_to_user": {"reputation": 124, "user_id": 4951232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMsLd.png?s=128&g=1", "display_name": "Darth Futuza", "link": "https://stackoverflow.com/users/4951232/darth-futuza"}, "edited": false, "score": 0, "creation_date": 1470863492, "post_id": 38883092, "comment_id": 65128095, "body": "@DarthFutuza no sorry, I just tested it and it only provides you with the Windows error / notification beep, not a motherboard beep or even a specified frequency, but thank you."}, {"owner": {"reputation": 19564, "user_id": 5292302, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b61b00d5bcb378f99eadff312544514?s=128&d=identicon&r=PG", "display_name": "Petter Friberg", "link": "https://stackoverflow.com/users/5292302/petter-friberg"}, "edited": false, "score": 0, "creation_date": 1470863884, "post_id": 38883092, "comment_id": 65128277, "body": "I have edited your post to send it in to re-open que, if you have more details consider to future improve your question."}, {"owner": {"reputation": 39, "user_id": 6702185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4a32ab82c20195928826cf86128c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ITCSB", "link": "https://stackoverflow.com/users/6702185/itcsb"}, "reply_to_user": {"reputation": 19564, "user_id": 5292302, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b61b00d5bcb378f99eadff312544514?s=128&d=identicon&r=PG", "display_name": "Petter Friberg", "link": "https://stackoverflow.com/users/5292302/petter-friberg"}, "edited": false, "score": 0, "creation_date": 1470863969, "post_id": 38883092, "comment_id": 65128325, "body": "@PetterFriberg I edited it a bit more but I couldn&#39;t find that much more to add, thanks for editing it yourself as well."}, {"owner": {"reputation": 19564, "user_id": 5292302, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b61b00d5bcb378f99eadff312544514?s=128&d=identicon&r=PG", "display_name": "Petter Friberg", "link": "https://stackoverflow.com/users/5292302/petter-friberg"}, "edited": false, "score": 1, "creation_date": 1470864540, "post_id": 38883092, "comment_id": 65128582, "body": "this question seems similar, maybe it can help you <a href=\"http://stackoverflow.com/questions/4060601/make-sounds-beep-with-c\" title=\"make sounds beep with c\">stackoverflow.com/questions/4060601/make-sounds-beep-with-c</a>"}, {"owner": {"reputation": 39, "user_id": 6702185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4a32ab82c20195928826cf86128c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ITCSB", "link": "https://stackoverflow.com/users/6702185/itcsb"}, "reply_to_user": {"reputation": 19564, "user_id": 5292302, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b61b00d5bcb378f99eadff312544514?s=128&d=identicon&r=PG", "display_name": "Petter Friberg", "link": "https://stackoverflow.com/users/5292302/petter-friberg"}, "edited": false, "score": 0, "creation_date": 1470864663, "post_id": 38883092, "comment_id": 65128632, "body": "@PetterFriberg I saw that one before making this question and it did not answer the question I had for Windows 7 OS."}, {"owner": {"reputation": 19564, "user_id": 5292302, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b61b00d5bcb378f99eadff312544514?s=128&d=identicon&r=PG", "display_name": "Petter Friberg", "link": "https://stackoverflow.com/users/5292302/petter-friberg"}, "edited": false, "score": 1, "creation_date": 1470864735, "post_id": 38883092, "comment_id": 65128658, "body": "Consider editing into the question, to avoid duplicate, explaining why it does not work"}, {"owner": {"reputation": 19564, "user_id": 5292302, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b61b00d5bcb378f99eadff312544514?s=128&d=identicon&r=PG", "display_name": "Petter Friberg", "link": "https://stackoverflow.com/users/5292302/petter-friberg"}, "edited": false, "score": 1, "creation_date": 1470864904, "post_id": 38883092, "comment_id": 65128719, "body": "This may also be of interest <a href=\"http://superuser.com/questions/227939/how-to-make-the-pc-speaker-beep-from-the-windows-7-command-prompt\" title=\"how to make the pc speaker beep from the windows 7 command prompt\">superuser.com/questions/227939/&hellip;</a>, moving on I hope it gets re-opened"}, {"owner": {"reputation": 39, "user_id": 6702185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4a32ab82c20195928826cf86128c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ITCSB", "link": "https://stackoverflow.com/users/6702185/itcsb"}, "reply_to_user": {"reputation": 19564, "user_id": 5292302, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b61b00d5bcb378f99eadff312544514?s=128&d=identicon&r=PG", "display_name": "Petter Friberg", "link": "https://stackoverflow.com/users/5292302/petter-friberg"}, "edited": false, "score": 0, "creation_date": 1470865088, "post_id": 38883092, "comment_id": 65128790, "body": "@PetterFriberg the reasons why these don&#39;t help is because they mainly pertain to making a real Beep through the sound card, and when they are specifically talking about the motherboard internal speakers, it requires you to replace windows operating system files, which I cannot do in this particular instance."}, {"owner": {"reputation": 19564, "user_id": 5292302, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b61b00d5bcb378f99eadff312544514?s=128&d=identicon&r=PG", "display_name": "Petter Friberg", "link": "https://stackoverflow.com/users/5292302/petter-friberg"}, "edited": false, "score": 1, "creation_date": 1470865264, "post_id": 38883092, "comment_id": 65128860, "body": "Lots of good stuff to explain in question : ), show research effort, explain all requirements etc."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 6702185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4a32ab82c20195928826cf86128c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ITCSB", "link": "https://stackoverflow.com/users/6702185/itcsb"}, "edited": false, "score": 0, "creation_date": 1470862007, "post_id": 38883219, "comment_id": 65127410, "body": "I appreciate the response and it would be perfect although I am not running linux for my operating system, although ill keep that line of code in case I need it at a later time!"}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "reply_to_user": {"reputation": 39, "user_id": 6702185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4a32ab82c20195928826cf86128c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ITCSB", "link": "https://stackoverflow.com/users/6702185/itcsb"}, "edited": false, "score": 0, "creation_date": 1470866810, "post_id": 38883219, "comment_id": 65129458, "body": "@ITCSB Next time consider tagging platform-sensitive questions with <code>[linux]</code> or <code>[windows]</code> etc."}], "tags": [], "owner": {"reputation": 2371, "user_id": 270006, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/874bcba40024d48919097b29a25e852d?s=128&d=identicon&r=PG", "display_name": "\u0179V -", "link": "https://stackoverflow.com/users/270006/%c5%b9v"}, "is_accepted": false, "score": 3, "last_activity_date": 1470862032, "last_edit_date": 1470862032, "creation_date": 1470861936, "answer_id": 38883219, "question_id": 38883092, "link": "https://stackoverflow.com/questions/38883092/how-to-make-motherboard-beep-through-c-code/38883219#38883219", "title": "How to make Motherboard Beep through C++ Code?", "body": "<h3>The question was later specified to refer to Win32 programming environment, this question describes a Linux solution.</h3>\n\n<p>You can use the <code>KIOCSOUND</code> ioctl to generate a tone, as such</p>\n\n<pre><code>ioctl(fd,KIOCSOUND,(int) tone)\n</code></pre>\n\n<p><a href=\"http://man7.org/tlpi/\" rel=\"nofollow\">The Linux Programming Interface</a> is a fabulous book that describes using IOCTLs in detail, but there are public resources that describe the IOCTL such as the perennially <a href=\"http://www.tldp.org/LDP/lpg/node83.html\" rel=\"nofollow\">classic TLDP</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 6702185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4a32ab82c20195928826cf86128c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ITCSB", "link": "https://stackoverflow.com/users/6702185/itcsb"}, "edited": false, "score": 0, "creation_date": 1470863372, "post_id": 38883537, "comment_id": 65128039, "body": "This seems great, but it wouldn&#39;t work for my needs, I am trying to create a song with beep commands and then give it to my friend who wouldn&#39;t want his computer system files being changed in any shape or form."}], "tags": [], "owner": {"reputation": 66, "user_id": 5215038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e932c9f2eff6fb648dc38da0c91b051?s=128&d=identicon&r=PG&f=1", "display_name": "artursg", "link": "https://stackoverflow.com/users/5215038/artursg"}, "is_accepted": false, "score": 2, "last_activity_date": 1470863160, "last_edit_date": 1490005103, "creation_date": 1470863160, "answer_id": 38883537, "question_id": 38883092, "link": "https://stackoverflow.com/questions/38883092/how-to-make-motherboard-beep-through-c-code/38883537#38883537", "title": "How to make Motherboard Beep through C++ Code?", "body": "<p>In Windows 7, Beep was rewritten to pass the beep to the default sound device for the session. This is normally the sound card, except when run under Terminal Services, in which case the beep is rendered on the client. <a href=\"https://msdn.microsoft.com/en-us/library/ms679277(v=vs.85).aspx\" rel=\"nofollow noreferrer\">source</a></p>\n\n<p>There is apparently one possible modification of system descibed <a href=\"https://superuser.com/a/230167/506548\">here</a>.</p>\n"}], "owner": {"reputation": 39, "user_id": 6702185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4a32ab82c20195928826cf86128c7d?s=128&d=identicon&r=PG&f=1", "display_name": "ITCSB", "link": "https://stackoverflow.com/users/6702185/itcsb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2253, "favorite_count": 0, "closed_date": 1470863216, "answer_count": 2, "score": 3, "last_activity_date": 1470863804, "creation_date": 1470861438, "last_edit_date": 1470863804, "question_id": 38883092, "link": "https://stackoverflow.com/questions/38883092/how-to-make-motherboard-beep-through-c-code", "closed_reason": "Needs more focus", "title": "How to make Motherboard Beep through C++ Code?", "body": "<p>How can I make the motherboard internal speaker produce sounds, for example using the Beep command but directed towards the <strong>motherboards speakers</strong>. </p>\n\n<blockquote>\n  <p>OS = Windows 7 x64</p>\n</blockquote>\n\n<p>I currently know how to provide beeps to the default sound device, including tone and millisecond's but this does not answer my question since I cant force any of these sounds towards the motherboard internal speakers.</p>\n\n<pre><code>Beep(523, 500);\n</code></pre>\n\n<p>My question is mainly based around an alternative to Beep which would play through the motherboards speakers rather than the computer audio card. Or a way to direct the Beep command or incoming audio frequencies towards the motherboards speakers.</p>\n"}, {"tags": ["c++", "gcc", "mingw", "mingw32"], "comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1470866297, "post_id": 38883023, "comment_id": 65129297, "body": "Did you try changing the permissions on the &#39;include&#39; directory?"}, {"owner": {"reputation": 67, "user_id": 3739187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8695fc5fad44f5d075dea1762a1097ca?s=128&d=identicon&r=PG&f=1", "display_name": "codechao", "link": "https://stackoverflow.com/users/3739187/codechao"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1470877762, "post_id": 38883023, "comment_id": 65132152, "body": "The permissions are set to full access for everyone"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1470884365, "post_id": 38883023, "comment_id": 65133579, "body": "Typo in path name?  compare &quot;c:/MinGW/lib/gcc/...&quot;  to &quot;c:/mingw/bin/../lib/...&quot; or maybe you have 2 installations ... nad should not mix them."}, {"owner": {"reputation": 67, "user_id": 3739187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8695fc5fad44f5d075dea1762a1097ca?s=128&d=identicon&r=PG&f=1", "display_name": "codechao", "link": "https://stackoverflow.com/users/3739187/codechao"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1470942254, "post_id": 38883023, "comment_id": 65167128, "body": "I don&#39;t think so? I typed in the whole path it gives for ld.exe and it gets to the right place. I&#39;m not sure what you&#39;re saying there"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1470950615, "post_id": 38883023, "comment_id": 65171195, "body": "Oh. I forgot Windows is generally not case sensitive. ... sorry."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1470951219, "post_id": 38883023, "comment_id": 65171448, "body": "&quot;ld&quot; is probably the &quot;gnu linker&quot;.  (You should be able to invoke it as &quot;ld --version&quot;)   It is what I would expect mingw to run.   However, on Ubuntu my make files never mention &quot;ld&quot;.  Sorry I have not been much help.  Been too long since I used mingw on Windows."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1470952220, "post_id": 38883023, "comment_id": 65171856, "body": "One more idea - 15+ yrs ago mingw did a poor job of naming their (?)dll&#39;s.  Our team had some older tools based on earlier mingw, and if those tools were loaded prior to running the latest tool suite&#39;s compile or linker, and the names conflicted, things did not work.  I think reset was necessary.  I don&#39;t remember a solution, I think when you wanted to  build you reset your PC and then made sure to not run any of the old tools (and vice-versa).  But, that was a long time ago."}], "owner": {"reputation": 67, "user_id": 3739187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8695fc5fad44f5d075dea1762a1097ca?s=128&d=identicon&r=PG&f=1", "display_name": "codechao", "link": "https://stackoverflow.com/users/3739187/codechao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1058, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470945795, "creation_date": 1470861167, "last_edit_date": 1470945795, "question_id": 38883023, "link": "https://stackoverflow.com/questions/38883023/mingw-ld-exe-cant-find-gcc-include-permission-denied", "title": "MinGW ld.exe can&#39;t find GCC include, permission denied", "body": "<p>I'm trying to build this stupid library <a href=\"https://github.com/LRN/libntlink\" rel=\"nofollow\">https://github.com/LRN/libntlink</a> so I can use it in a porting projects, and its given me nothing but trouble so far. This time the linker can't seem to access the gcc include folder. Here's the error</p>\n\n<pre><code>gcc  c:/MinGW/lib/gcc/mingw32/4.9.3/include;c:/MinGW/include -I. -O3 -fno-common\n-Wall -mms-bitfields -D_WIN32_WINNT=0x600 -o juncpoint.o -c juncpoint.c\nc:/mingw/bin/../lib/gcc/mingw32/4.9.3/../../../../mingw32/bin/ld.exe: cannot fin\nd c:/MinGW/lib/gcc/mingw32/4.9.3/include: Permission denied\ncollect2.exe: error: ld returned 1 exit status\n</code></pre>\n\n<p>I can post the whole makefile, but it may be easier and cleaner to go to the github page, since the makefile is a little lengthy. I checked the stuff I found, nothing else is using ld or whatever, and the folder in question has the square for read only, which iirc means its not read only. I've tried running the command at an elevated level every way I know how. Nothing has worked.</p>\n\n<p>EDIT: It does this for all folders, if you specify them as the input file for ld. The thing is written wrong maybe? I'm not sure what its trying to do with that.</p>\n"}, {"tags": ["c++", "memory", "malloc", "free", "realloc"], "comments": [{"owner": {"reputation": 252, "user_id": 4403294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/029e6e295cd808c16cf68c7db4679dec?s=128&d=identicon&r=PG", "display_name": "rscarson", "link": "https://stackoverflow.com/users/4403294/rscarson"}, "edited": false, "score": 2, "creation_date": 1470861147, "post_id": 38882932, "comment_id": 65126979, "body": "Where is toString defined"}, {"owner": {"reputation": 4108, "user_id": 1149924, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aaf5827d09d4eb31df2e3e25d1de9bd8?s=128&d=identicon&r=PG", "display_name": "kkm", "link": "https://stackoverflow.com/users/1149924/kkm"}, "edited": false, "score": 0, "creation_date": 1470861262, "post_id": 38882932, "comment_id": 65127049, "body": "What is in &quot;MyString.h&quot;?"}, {"owner": {"reputation": 1494, "user_id": 4608341, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a999fbef69237425f8537ea518f97be4?s=128&d=identicon&r=PG&f=1", "display_name": "grigor", "link": "https://stackoverflow.com/users/4608341/grigor"}, "edited": false, "score": 1, "creation_date": 1470861356, "post_id": 38882932, "comment_id": 65127092, "body": "I would encourage to use <code>new</code> and <code>delete</code> instead of <code>malloc</code> and <code>free</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470861360, "post_id": 38882932, "comment_id": 65127095, "body": "Should be getting a compiler warning at <code>test = test + &quot; world&quot;;</code> because <code>&quot; world&quot;</code> is a <code>const char *</code>, not a <code>char *</code>. Same with <code>MyString test = MyString(&quot;hello!&quot;);</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1494, "user_id": 4608341, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a999fbef69237425f8537ea518f97be4?s=128&d=identicon&r=PG&f=1", "display_name": "grigor", "link": "https://stackoverflow.com/users/4608341/grigor"}, "edited": false, "score": 0, "creation_date": 1470861419, "post_id": 38882932, "comment_id": 65127120, "body": "Normally I would agree @grigor , but then the <code>realloc</code> trick they use later would be a bit nasty."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470864172, "post_id": 38882932, "comment_id": 65128428, "body": "Voting to close as off topic, requires <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, because it&#39;s been about 45 minutes since missing information was requested and it has not been supplied. What has been posted is flawed, but not fatally so; the cause of the crash cannot be determined without the complete definition and implementation <code>MyString</code>. The two answers so far are probably correct, but this can&#39;t be proved."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470864409, "post_id": 38883138, "comment_id": 65128537, "body": "Off topic: There is a really good trick that uses <code>+=</code> to implement <code>+</code> covered here: <a href=\"http://stackoverflow.com/questions/4421706/operator-overloading/4421719#4421719\" title=\"operator overloading\">stackoverflow.com/questions/4421706/operator-overloading/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1066, "user_id": 3359878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9WfKf.jpg?s=128&g=1", "display_name": "Amadeusz", "link": "https://stackoverflow.com/users/3359878/amadeusz"}, "is_accepted": true, "score": 0, "last_activity_date": 1470864035, "last_edit_date": 1470864035, "creation_date": 1470861661, "answer_id": 38883138, "question_id": 38882932, "link": "https://stackoverflow.com/questions/38882932/c-corrupted-heap/38883138#38883138", "title": "C++ Corrupted Heap", "body": "<p>I'm fixing my post according to @user4581301 suggestion:</p>\n\n<p>You sholud modify your addition operator overload so it spawns a new object and also implement assigment operator overload like this:</p>\n\n<pre><code>MyString operator+(char* add) const {\n    int thisSize = sizeof(char)*strlen(str);\n    int addSize = sizeof(char)*(strlen(add) + 1);\n    int fullSize = thisSize + addSize;\n\n    char* tempStr = (char*)malloc(fullSize);\n    strcpy_s(tempStr, fullSize, str);\n    strcpy_s(tempStr + thisSize, fullSize, add);\n\n    return MyString(tempStr);\n}\n\nMyString&amp; operator=(const MyString&amp; assign){\n\n    int assignSize = sizeof(char)*(strlen(assign.str) + 1);\n\n    str = (char*)realloc(str, assignSize);\n\n    strcpy_s(str, assignSize, assign.str);\n\n    return *this;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470863835, "post_id": 38883375, "comment_id": 65128254, "body": "Very high likelihood you are correct. <code>test = test + &quot; world&quot;;</code> may well be fatal, but we need to see <code>operator=</code> implementation, if any, to be sure. The copy constructor and destructor look Rule of Three compliant and we have not seen the assignment operator. Until then, the best we can do is guess."}], "tags": [], "owner": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "is_accepted": false, "score": 0, "last_activity_date": 1470862525, "creation_date": 1470862525, "answer_id": 38883375, "question_id": 38882932, "link": "https://stackoverflow.com/questions/38882932/c-corrupted-heap/38883375#38883375", "title": "C++ Corrupted Heap", "body": "<p>You have to learn about <a href=\"https://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming)\" rel=\"nofollow\">Rule Of Three</a></p>\n\n<p>Implicit assigment operator is used and when the old object is destroyed new one uses already freed pointer and later it tries to free it again. </p>\n"}], "owner": {"reputation": 1, "user_id": 6702025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73225db62c85cbaa1c0aed2d537ab240?s=128&d=identicon&r=PG&f=1", "display_name": "user6702025", "link": "https://stackoverflow.com/users/6702025/user6702025"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 38883138, "answer_count": 2, "score": -2, "last_activity_date": 1470864035, "creation_date": 1470860816, "last_edit_date": 1470861248, "question_id": 38882932, "link": "https://stackoverflow.com/questions/38882932/c-corrupted-heap", "title": "C++ Corrupted Heap", "body": "<p>My program seems to throw a rune-time exception about a corrupted heap when the main method returns. I have taken the proper precautions to not have this happen, including a copy constructor. Could anyone shed some light on why this is happening?</p>\n\n<p>MyString.cpp</p>\n\n<pre><code>#include \"MyString.h\"\n#include &lt;cstdio&gt;\n#include &lt;Windows.h&gt;\n\nMyString::MyString() {\n    str = (char*)malloc(sizeof(char));\n    *str = '\\0';\n}\n\nMyString::MyString(char* src) {\n    int size = sizeof(char)*(strlen(src) + 1);\n    str = (char*)malloc(size);\n    strcpy_s(str, size, src);\n}\n\n\nMyString MyString::operator+(char* add) {\n    int addSize = sizeof(char)*strlen(add);\n    int fullSize = sizeof(char)*(strlen(str) + 1) + addSize;\n    str = (char*)realloc(str, fullSize);\n    char* temp = str;\n    temp += strlen(str);\n    strcpy_s(temp, addSize + 1, add);\n    return *this;\n}\n\nMyString::~MyString() {\n    if (str)\n        free(str);\n}\n\nMyString::MyString(const MyString &amp;arg) {\n    int size = sizeof(char) * (strlen(arg.str) + 1);\n    str = (char*)malloc(size);\n    strcpy_s(str, size, arg.str);\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"MyString.h\"\nusing namespace std;\n\n\nint main(int argc, char *argv[]) {\n    MyString test = MyString(\"hello!\");\n    test = test + \" world\";\n    cout &lt;&lt; test.toString() &lt;&lt; endl;\n    cout &lt;&lt; strlen(test.toString()) &lt;&lt; endl;\n    system(\"pause\");\n    return 0; //runtime error here\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 3, "creation_date": 1470861270, "post_id": 38882921, "comment_id": 65127054, "body": "The question can just be reduced to <code>A foo() { return A(); }</code>, none of the rest is relevant. And then... which constructor do you think? It&#39;s easy to simply instrument and find out. Do you question the results you got?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1470866391, "post_id": 38882921, "comment_id": 65129332, "body": "@Barry not necessarily easy to find by testing, because of copy elision"}, {"owner": {"reputation": 4320, "user_id": 5103620, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8ae06ea53a316cc879b9100b3ff25bfc?s=128&d=identicon&r=PG", "display_name": "Sebastian Lenartowicz", "link": "https://stackoverflow.com/users/5103620/sebastian-lenartowicz"}, "edited": false, "score": 0, "creation_date": 1470866460, "post_id": 38882921, "comment_id": 65129355, "body": "As I&#39;ve found out - my problem was caused by copy elision."}], "answers": [{"tags": [], "owner": {"reputation": 177, "user_id": 1131116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3388871e17b4fe09e48006ab8963ad04?s=128&d=identicon&r=PG", "display_name": "halit", "link": "https://stackoverflow.com/users/1131116/halit"}, "is_accepted": false, "score": 0, "last_activity_date": 1470866164, "creation_date": 1470866164, "answer_id": 38884211, "question_id": 38882921, "link": "https://stackoverflow.com/questions/38882921/what-constructor-is-called-in-this-case/38884211#38884211", "title": "What constructor is called in this case?", "body": "<p>If you are compiling with C++11, inside <code>foo</code> when <code>return A()</code> ran it calls default constructor. Then when it returns from foo <code>move constructor</code> is called. But if you're compiling with older versions first default constructor is called then copy constructor is called.</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1470866750, "last_edit_date": 1495542776, "creation_date": 1470866750, "answer_id": 38884337, "question_id": 38882921, "link": "https://stackoverflow.com/questions/38882921/what-constructor-is-called-in-this-case/38884337#38884337", "title": "What constructor is called in this case?", "body": "<p>The code is:</p>\n\n<pre><code>A foo() {return A();}\n</code></pre>\n\n<p>When <code>foo()</code> is called , the sequence of effects is:</p>\n\n<ol>\n<li>Temporary created by <code>A()</code> using <code>A</code>'s default constructor.</li>\n<li><em>Return value object</em> of type <code>A</code> created using copy/move constructor, with step 1's temporary as argument (that is, move constructor if it exists, otherwise copy constructor).</li>\n<li>Temporary from step 1 is destructed.</li>\n</ol>\n\n<p>However this is a <a href=\"https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization\">copy elision</a> context, so the compiler might combine all 3 steps into one, and create the <em>return value object</em> using <code>A</code>'s default constructor.  </p>\n\n<p>What happens to the <em>return value object</em> depends on what the calling code does. There might be further copy elision. In the usage:</p>\n\n<pre><code>int i = foo().bar();\n</code></pre>\n\n<p>nothing else happens; <code>bar()</code> is called on the <em>return value object</em>, the value is assigned to <code>i</code>, and then the return value object is destroyed.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6697869"}, "is_accepted": false, "score": 0, "last_activity_date": 1470878221, "creation_date": 1470878221, "answer_id": 38885854, "question_id": 38882921, "link": "https://stackoverflow.com/questions/38882921/what-constructor-is-called-in-this-case/38885854#38885854", "title": "What constructor is called in this case?", "body": "<p>The default constructor is called. Maybe trying this makes it clearer:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass A {\npublic:\n  A() {\n    cout &lt;&lt; \"A's default ctor\" &lt;&lt; endl;\n  }\n};\n\nint main() {\n  A a;\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 4320, "user_id": 5103620, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8ae06ea53a316cc879b9100b3ff25bfc?s=128&d=identicon&r=PG", "display_name": "Sebastian Lenartowicz", "link": "https://stackoverflow.com/users/5103620/sebastian-lenartowicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 38884337, "answer_count": 3, "score": 0, "last_activity_date": 1470878221, "creation_date": 1470860780, "last_edit_date": 1470864102, "question_id": 38882921, "link": "https://stackoverflow.com/questions/38882921/what-constructor-is-called-in-this-case", "title": "What constructor is called in this case?", "body": "<p>Let's say I have an object</p>\n\n<pre><code>class A {\n    public:\n    int bar();\n};\n\nA foo() {return A();}\nint A::bar() {return 5;}\n</code></pre>\n\n<p>And then I do this:</p>\n\n<pre><code>int i = foo().bar();\n</code></pre>\n\n<p>What constructor is invoked for the temporary value created when <code>foo()</code> returns?</p>\n"}, {"tags": ["c++", "mariadb", "clion"], "comments": [{"owner": {"reputation": 2972, "user_id": 766024, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04cbea6decee0cca22f4afa8a38a9652?s=128&d=identicon&r=PG", "display_name": "etienne", "link": "https://stackoverflow.com/users/766024/etienne"}, "edited": false, "score": 1, "creation_date": 1470920619, "post_id": 38882671, "comment_id": 65153263, "body": "Has CLion finished parsing the project (look at the status bar for an &quot;Updating indices...&quot; background job) ? For a large project it may take a loooong time (10 to 20 minutes)"}, {"owner": {"reputation": 514, "user_id": 2847079, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cb214e9e25b8c54e66a1082b3fced5fc?s=128&d=identicon&r=PG", "display_name": "Bruno P&#233;rel", "link": "https://stackoverflow.com/users/2847079/bruno-p%c3%a9rel"}, "reply_to_user": {"reputation": 2972, "user_id": 766024, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04cbea6decee0cca22f4afa8a38a9652?s=128&d=identicon&r=PG", "display_name": "etienne", "link": "https://stackoverflow.com/users/766024/etienne"}, "edited": false, "score": 0, "creation_date": 1470934184, "post_id": 38882671, "comment_id": 65162778, "body": "Yes, strange thing is that the &quot;Updating indices&quot; and &quot;Building symbols&quot; indeed took a lot of time, but still CLion throws a lot of basic syntax errors (I&#39;ve updated the screenshot to show the status bar of CLion). Also in the Project view on the left, a lot of directories are grayed out, like if they are ignored or something, and I didn&#39;t configure anything like this"}, {"owner": {"reputation": 816, "user_id": 1577539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dV1dN.jpg?s=128&g=1", "display_name": "goldwin-es", "link": "https://stackoverflow.com/users/1577539/goldwin-es"}, "edited": false, "score": 0, "creation_date": 1470942159, "post_id": 38882671, "comment_id": 65167069, "body": "Does it compile successfully from inside CLion?"}, {"owner": {"reputation": 2972, "user_id": 766024, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04cbea6decee0cca22f4afa8a38a9652?s=128&d=identicon&r=PG", "display_name": "etienne", "link": "https://stackoverflow.com/users/766024/etienne"}, "edited": false, "score": 0, "creation_date": 1471004797, "post_id": 38882671, "comment_id": 65192779, "body": "Oddly, the file you&#39;re viewing is grayed out in the left pane, as if CLion was not considering it part of the project. You should check the compilation flags/macro definitions/etc. to make sure CLion picks it as a project file."}, {"owner": {"reputation": 514, "user_id": 2847079, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cb214e9e25b8c54e66a1082b3fced5fc?s=128&d=identicon&r=PG", "display_name": "Bruno P&#233;rel", "link": "https://stackoverflow.com/users/2847079/bruno-p%c3%a9rel"}, "reply_to_user": {"reputation": 816, "user_id": 1577539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dV1dN.jpg?s=128&g=1", "display_name": "goldwin-es", "link": "https://stackoverflow.com/users/1577539/goldwin-es"}, "edited": false, "score": 0, "creation_date": 1471206344, "post_id": 38882671, "comment_id": 65247524, "body": "@goldwin-es I didn&#39;t think that I had to compile the project from within CLion since I had already done that from outside the IDE."}, {"owner": {"reputation": 514, "user_id": 2847079, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cb214e9e25b8c54e66a1082b3fced5fc?s=128&d=identicon&r=PG", "display_name": "Bruno P&#233;rel", "link": "https://stackoverflow.com/users/2847079/bruno-p%c3%a9rel"}, "reply_to_user": {"reputation": 2972, "user_id": 766024, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04cbea6decee0cca22f4afa8a38a9652?s=128&d=identicon&r=PG", "display_name": "etienne", "link": "https://stackoverflow.com/users/766024/etienne"}, "edited": false, "score": 0, "creation_date": 1471207469, "post_id": 38882671, "comment_id": 65247842, "body": "@etienne : Indeed, if I browse to a non-grayed-out file, I see a bunch of errors but far less. I changed CLion&#39;s config to use the external, system default CMake version instead of CLion&#39;s bundled one and ran &quot;Build all&quot;. The number of errors decreased a lot (makes sense). I still see a lot of strange errors, for example in sql_lex.cc the sql_lex.h include is in grey with the notice &quot;unused import statement&quot;. Could CLion and CMake not see the same errors ?"}], "owner": {"reputation": 514, "user_id": 2847079, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cb214e9e25b8c54e66a1082b3fced5fc?s=128&d=identicon&r=PG", "display_name": "Bruno P&#233;rel", "link": "https://stackoverflow.com/users/2847079/bruno-p%c3%a9rel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470934033, "creation_date": 1470859953, "last_edit_date": 1592644375, "question_id": 38882671, "link": "https://stackoverflow.com/questions/38882671/browsing-mariadbs-source-code-with-clion", "title": "Browsing MariaDB&#39;s source code with CLion", "body": "<p>I'm attempting to explore MariaDB's source code and thought that the easiest way would be to use a C++ IDE. I used the Bash script <code>debian/autobake-deb.sh</code> bundled in MariaDB to compile the project, then opened it with CLion. Unfortunately it looks like a lot of code is not recognized (even though CMake is bundled with CLion) which prevents me from using autocomplete, function references and such in a lot of places.</p>\n<p>For instance when I open libmysqld.c :\n<a href=\"https://i.stack.imgur.com/DiBzO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DiBzO.png\" alt=\"libmysqld\" /></a></p>\n<p>There are errors almost every line.</p>\n<p>I'm a beginner in C/C++ so I'm not sure what I would have to configure or install to make CLion recognize the symbols better.</p>\n<p>edit : Updated screenshot with status bar</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1470859785, "post_id": 38882625, "comment_id": 65126287, "body": "Use a <a href=\"http://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">range based for loop</a> and then you know it is only called once."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 5, "creation_date": 1470859900, "post_id": 38882625, "comment_id": 65126347, "body": "Do it in the simpler way to read, until your profiler tells you that it needs to change."}, {"owner": {"reputation": 203, "user_id": 5778994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7142de71cf94a9c49ee35de131411e3?s=128&d=identicon&r=PG&f=1", "display_name": "Pippin", "link": "https://stackoverflow.com/users/5778994/pippin"}, "edited": false, "score": 0, "creation_date": 1470859926, "post_id": 38882625, "comment_id": 65126357, "body": "Yes I&#39;m aware of range based for loops. I agree that my example is poor, but I would still be interested in the answers."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1470860068, "post_id": 38882625, "comment_id": 65126444, "body": "Why do you think cend() is more expensive than a variable load?"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1470860124, "post_id": 38882625, "comment_id": 65126472, "body": "Your code guarantees that cend() will be called one more times than necessary."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1470860283, "post_id": 38882625, "comment_id": 65126551, "body": "If you <i>really</i> want to know what the compiler does, then inspect the generated asm."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470860428, "post_id": 38882625, "comment_id": 65126619, "body": "@JesperJuhl ....for every <i>possible</i> implementation?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 1, "creation_date": 1470860502, "post_id": 38882625, "comment_id": 65126651, "body": "@Kyle Strand possibly. Depending on your curriosity level."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 1, "creation_date": 1470860646, "post_id": 38882625, "comment_id": 65126723, "body": "I&#39;ve removed the &quot;best practices&quot; part of the question, because such questions are considered off-topic here. I&#39;ve also replaced your title with one that actually describes the question (which is very important and possibly why you received a downvote). Don&#39;t worry that the question has been marked as a duplicate; it&#39;s still a reasonable question, just one that happens to have a potentially hard-to-find duplicate."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470860662, "post_id": 38882625, "comment_id": 65126732, "body": "@JesperJuhl I&#39;m going to go ahead and assert that asking here is actually a better solution than that."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 1, "creation_date": 1470860908, "post_id": 38882625, "comment_id": 65126852, "body": "@Kyle Strand Sure. Fine with me. But inspecting the code the compiler <i>actually</i> generates really is the only way to know for sure. And every C++ developer worth his &quot;salt&quot; should be able to read a bit of asm. So I don&#39;t think it&#39;s an unreasonable comment."}], "owner": {"reputation": 203, "user_id": 5778994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7142de71cf94a9c49ee35de131411e3?s=128&d=identicon&r=PG&f=1", "display_name": "Pippin", "link": "https://stackoverflow.com/users/5778994/pippin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "closed_date": 1470860291, "answer_count": 0, "score": 1, "last_activity_date": 1470862703, "creation_date": 1470859744, "last_edit_date": 1470862703, "question_id": 38882625, "link": "https://stackoverflow.com/questions/38882625/does-optimization-remove-unnecessary-cend-calls", "closed_reason": "Duplicate", "title": "Does optimization remove unnecessary `cend()` calls?", "body": "<p>How many times would <code>myVector.cend()</code> be called at runtime:</p>\n\n<pre><code>    std::vector&lt;int&gt; myVector;\n\n        // ...\n\n    for (auto it = myVector.cbegin(); it != myVector.cend(); ++it)\n    {\n       // ...\n    }\n</code></pre>\n\n<p>It should be called either once or <code>myVector.size() + 1</code> times, but I'm not sure how much we can expect the compiler to optimize things here. Because of that, I almost always add beforehand:</p>\n\n<pre><code>const auto end = myVector.cend();\n</code></pre>\n\n<p>and fix the loop this way:</p>\n\n<pre><code>for (auto it = myVector.cbegin(); it != end; ++it)\n</code></pre>\n"}, {"tags": ["c++", "qt", "integration", "cairo"], "answers": [{"tags": [], "owner": {"reputation": 309, "user_id": 6701991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ijLIr.jpg?s=128&g=1", "display_name": "sx107", "link": "https://stackoverflow.com/users/6701991/sx107"}, "is_accepted": true, "score": 1, "last_activity_date": 1471084411, "creation_date": 1471084411, "answer_id": 38931799, "question_id": 38882623, "link": "https://stackoverflow.com/questions/38882623/cairo-push-group-analog-in-qt-clear-composition-mode-clears-everything-undern/38931799#38931799", "title": "cairo_push_group analog in Qt: &quot;clear&quot; composition mode clears everything underneath it", "body": "<p>I've found anwser myself.\nOne way one can do it is to still use the <code>QPainterPath</code> += and -= operators (which are identical to the <code>QPainterPath::united</code> and <code>QPainterPath::subtracted</code> methods), but without <strong>any</strong> bezier curves. I've replaced all the arcs, circles, etc. with \"polylines\" (for example, every circle is replaced with a 100-sided polygon). You can achieve any quality you need just by changing the number of sides etc.</p>\n\n<p>The other solution - with the temporary <code>QImage</code> - seems to be not too slow and works just okay. This is the way it is done in cairo also. Just create a <code>QImage</code> with the same size asthe original, a <code>QPainter</code> with the same settings as the original one and use the new <code>QPainter</code> to draw on the temporary image, and, finally, use the <code>QPainter::drawImage</code> method to draw everything on the original device.</p>\n"}], "owner": {"reputation": 309, "user_id": 6701991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ijLIr.jpg?s=128&g=1", "display_name": "sx107", "link": "https://stackoverflow.com/users/6701991/sx107"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 38931799, "answer_count": 1, "score": 1, "last_activity_date": 1471084411, "creation_date": 1470859738, "last_edit_date": 1470908123, "question_id": 38882623, "link": "https://stackoverflow.com/questions/38882623/cairo-push-group-analog-in-qt-clear-composition-mode-clears-everything-undern", "title": "cairo_push_group analog in Qt: &quot;clear&quot; composition mode clears everything underneath it", "body": "<p>I am writing an app using QPainter and I need an analog of the <a href=\"https://www.cairographics.org/manual/cairo-cairo-t.html#cairo-push-group\" rel=\"nofollow noreferrer\">cairo_push_group</a> in the QPainter class to draw, say, a rectangle with bunch of holes in it, which may intersect.</p>\n\n<p>The problem is that when I draw holes with the \"clear\" compose mode, everything is cleared underneath the holes I draw; I want the image, that was underneath the hole before I started drawing my complex shape, to stay. In other words - everything underneath the hole is cleared, when I just want everything underneath the hole to bee seen through.</p>\n\n<p>One solution seems to be using the <code>QPainterPath</code> with Odd fill option (the default one), but that does not suit me, as in my app the holes may intersect, and this way the two holes won't combine (the intersection of two holes is not a hole).</p>\n\n<p>One more solution is to just to use the <code>QPainterPath::subtracted</code> method, but for some reason it reduces the quality of polygons (circles become shapes with a countable number of sides, for example).</p>\n\n<p>The other solution is to save the <code>QImage</code> I am drawing on to a temporary <code>QImage</code>, clear it, draw everything that I need and then using the \"destination over\" mode draw it again, but that seems to be a very slow and memory-consuming solution.</p>\n\n<p>Is there any other solution to this problem? Maybe there IS an analog of the <a href=\"https://www.cairographics.org/manual/cairo-cairo-t.html#cairo-push-group\" rel=\"nofollow noreferrer\">cairo_push_group</a> function in Qt?</p>\n\n<p>Please don't advice me to switch to cairo.<br>\nPictures explain the problem better: <a href=\"https://i.stack.imgur.com/vyyRH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vyyRH.png\" alt=\"Pictures\"></a></p>\n"}, {"tags": ["c++", "arrays", "algorithm"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1470859098, "post_id": 38882323, "comment_id": 65125912, "body": "what is the point of having the <code>Forward</code> and <code>Backward</code> arrays? If both <code>A[0]</code> and <code>A[n-1]</code> are the minimum value (e.g <code>0</code>), those arrays are pretty useless, or do i miss something?"}, {"owner": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1470859192, "post_id": 38882323, "comment_id": 65125963, "body": "A is not sorted and the values dont need to be from 0 to n-1, they can be all 1 for example."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470859261, "post_id": 38882323, "comment_id": 65125997, "body": "Wondering what&#39;s wrong with <code>std::min</code>.. of course your types have to have sane comparison operators, but the &quot;find the minimum&quot; bit is kind of a solved problem.."}, {"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 1, "creation_date": 1470859335, "post_id": 38882323, "comment_id": 65126032, "body": "If they are not sorted arrays then no, finding the minimum value in constant time is not possible - that&#39;s what <code>std::priority_queue&lt;Type, Container&lt;Type&gt;, std::greater&lt;Type&gt;&gt;</code> is for."}, {"owner": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "edited": false, "score": 0, "creation_date": 1470859339, "post_id": 38882323, "comment_id": 65126037, "body": "my problem is finding the minimum using that 2 arrays"}, {"owner": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "edited": false, "score": 1, "creation_date": 1470859480, "post_id": 38882323, "comment_id": 65126105, "body": "Consider an array that is flanked with -Infinity on both sides. Then the forward and backward arrays will point to their respective ends, and be useless. What&#39;s left is A, and you need O(n) to pick a minimum out of n unsorted elements."}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 3, "last_activity_date": 1470859398, "creation_date": 1470859398, "answer_id": 38882540, "question_id": 38882323, "link": "https://stackoverflow.com/questions/38882323/get-minimum-element-in-constant-time/38882540#38882540", "title": "Get minimum element in constant time", "body": "<p>No you cant. A counter example is:</p>\n\n<pre><code>A        = {0, 4, 3, 2, 3, 4, 0}\nForward  = {6, 6, 6, 6, 6, 6, 6}\nBackward = {0, 0, 0, 0, 0, 0, 0}\nl = 1, k = 5\n</code></pre>\n\n<p>ie <code>Forward</code> and <code>Backward</code> are of no use in that case and you have to search the array which is <code>O(k-l)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1470859471, "post_id": 38882545, "comment_id": 65126101, "body": "damn you were 13 seconds faster ;)"}, {"owner": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "edited": false, "score": 0, "creation_date": 1470859579, "post_id": 38882545, "comment_id": 65126179, "body": "people could act like both of you and answer instead of just downvoting for no reason.. thanks, it was clear enough"}, {"owner": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1470859581, "post_id": 38882545, "comment_id": 65126181, "body": "@tobi303 still  much slower than my comment"}, {"owner": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "reply_to_user": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "edited": false, "score": 0, "creation_date": 1470859612, "post_id": 38882545, "comment_id": 65126198, "body": "@Daniel was my comment not enough? You would have been better off deleting your question."}, {"owner": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "edited": false, "score": 0, "creation_date": 1470859959, "post_id": 38882545, "comment_id": 65126378, "body": "It would be enough but they answered my question, gave me an example and before your comment"}, {"owner": {"reputation": 2531, "user_id": 3160529, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/409ccefcab7337f7dc87a4cac668de1d?s=128&d=identicon&r=PG", "display_name": "Shubham", "link": "https://stackoverflow.com/users/3160529/shubham"}, "reply_to_user": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "edited": false, "score": 0, "creation_date": 1470860295, "post_id": 38882545, "comment_id": 65126563, "body": "@Daniel You probably got downvotes because this would have been pretty simple to counter with an example if you had tried with some well thought examples."}, {"owner": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "edited": false, "score": 0, "creation_date": 1470915603, "post_id": 38882545, "comment_id": 65149668, "body": "I was pretty sure it wasnt possible from some examples i had in mind, but as I really needed this to be possible, I came here to ask"}], "tags": [], "owner": {"reputation": 2531, "user_id": 3160529, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/409ccefcab7337f7dc87a4cac668de1d?s=128&d=identicon&r=PG", "display_name": "Shubham", "link": "https://stackoverflow.com/users/3160529/shubham"}, "is_accepted": true, "score": 3, "last_activity_date": 1470859884, "last_edit_date": 1470859884, "creation_date": 1470859414, "answer_id": 38882545, "question_id": 38882323, "link": "https://stackoverflow.com/questions/38882323/get-minimum-element-in-constant-time/38882545#38882545", "title": "Get minimum element in constant time", "body": "<p>No. Atleast not in O(1) time. A counter example is as follows. <code>0-based</code> indexing is used here. Let </p>\n\n<pre><code>index     = {0, 1, 2, 3, 4, 5, 6, 7, 8}\nA         = {1, 3, 5, 7, 9, 6, 4, 2, 0}\n\nForward   = {8, 8, 8, 8, 8, 8, 8, 8, 8}\nBackward  = {0, 0, 0, 0, 0, 0, 0, 0, 8}\n</code></pre>\n\n<p>Now, if I ask you to get the index of the minimum value in range <code>[3, 7]</code>, how will you do it?</p>\n\n<p>Basically they will be of no use to find in the range [a, b] </p>\n\n<blockquote>\n  <p>if <code>forward[a] &gt; b</code> and <code>backward[b] &lt; a</code>.</p>\n</blockquote>\n"}], "owner": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 440, "favorite_count": 0, "accepted_answer_id": 38882545, "answer_count": 2, "score": -3, "last_activity_date": 1470859884, "creation_date": 1470858665, "last_edit_date": 1470859095, "question_id": 38882323, "link": "https://stackoverflow.com/questions/38882323/get-minimum-element-in-constant-time", "title": "Get minimum element in constant time", "body": "<p>Lets say I have an array A of size n, where 0 &lt;= A[i] &lt;= n.</p>\n\n<p>Lets say I have 2 arrays Forward and Backward, size n, where:</p>\n\n<pre><code>Forward[i] =  index j where\n              A[j] = min(A[i], A[i+1], ..., A[n-1])\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Backward[i] = index j where\n              A[j] = min(A[i], A[i-1], ..., A[0])\n</code></pre>\n\n<p>My question is:</p>\n\n<ul>\n<li>given A, Forward and Backward</li>\n<li>given 2 indexes <em>l</em> and <em>r</em></li>\n</ul>\n\n<p>Can I discover the index k such that A[k] = min(A[l], A[l+1], ..., A[r]) in constant time?</p>\n"}, {"tags": ["c++", "vector", "struct", "parameters", "parameter-passing"], "comments": [{"owner": {"reputation": 4792, "user_id": 588243, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7134a1b3bb60919edcbf78eab4e0992d?s=128&d=identicon&r=PG", "display_name": "Torbj&#246;rn", "link": "https://stackoverflow.com/users/588243/torbj%c3%b6rn"}, "edited": false, "score": 1, "creation_date": 1470858667, "post_id": 38882256, "comment_id": 65125694, "body": "Why do you mix C-arrays with <code>std::vector</code>?"}, {"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 0, "creation_date": 1470858741, "post_id": 38882256, "comment_id": 65125735, "body": "Where do you set <code>ScanParam16::FFTLen</code>? It seems like it&#39;s not being set just after you initialise <code>static ScanParam16 param;</code> so the variable <code>wArray</code> will be empty."}, {"owner": {"reputation": 2378, "user_id": 1277239, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/42d3dede20a5ce60d6b89149cb0abc08?s=128&d=identicon&r=PG", "display_name": "Nick X Tsui", "link": "https://stackoverflow.com/users/1277239/nick-x-tsui"}, "reply_to_user": {"reputation": 4792, "user_id": 588243, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7134a1b3bb60919edcbf78eab4e0992d?s=128&d=identicon&r=PG", "display_name": "Torbj&#246;rn", "link": "https://stackoverflow.com/users/588243/torbj%c3%b6rn"}, "edited": false, "score": 0, "creation_date": 1470858746, "post_id": 38882256, "comment_id": 65125740, "body": "@Torbj&#246;rn I was trying to pass the array directly, but the array get &quot;lost&quot; pretty much similarly when it gets into the dll. So I tried vector to see it I can get around it."}, {"owner": {"reputation": 2378, "user_id": 1277239, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/42d3dede20a5ce60d6b89149cb0abc08?s=128&d=identicon&r=PG", "display_name": "Nick X Tsui", "link": "https://stackoverflow.com/users/1277239/nick-x-tsui"}, "reply_to_user": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 0, "creation_date": 1470858847, "post_id": 38882256, "comment_id": 65125778, "body": "@ArchbishopOfBanterbury Right before the new operator. See update. Sorry, did not show."}, {"owner": {"reputation": 4108, "user_id": 1149924, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aaf5827d09d4eb31df2e3e25d1de9bd8?s=128&d=identicon&r=PG", "display_name": "kkm", "link": "https://stackoverflow.com/users/1149924/kkm"}, "edited": false, "score": 0, "creation_date": 1470859306, "post_id": 38882256, "comment_id": 65126020, "body": "Is it possible that the dll was built with different compilers or settings, or with a different version of the common header? Print <code>sizeof(ScanParam16)</code> and the offset of <code>winArray</code> from the beginning of the structure, e. g. <code>(int)(&amp;((ScanParam16*)0)-&gt;winArray)</code>, in both  the caller and the callee, and make sure they match."}, {"owner": {"reputation": 2378, "user_id": 1277239, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/42d3dede20a5ce60d6b89149cb0abc08?s=128&d=identicon&r=PG", "display_name": "Nick X Tsui", "link": "https://stackoverflow.com/users/1277239/nick-x-tsui"}, "reply_to_user": {"reputation": 4108, "user_id": 1149924, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aaf5827d09d4eb31df2e3e25d1de9bd8?s=128&d=identicon&r=PG", "display_name": "kkm", "link": "https://stackoverflow.com/users/1149924/kkm"}, "edited": false, "score": 0, "creation_date": 1470859697, "post_id": 38882256, "comment_id": 65126242, "body": "@kkm They are of different size. In the caller it is 156, in the callee(dll) it is 160. So....what happened? I use both VS2010 to build the projects."}, {"owner": {"reputation": 4108, "user_id": 1149924, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aaf5827d09d4eb31df2e3e25d1de9bd8?s=128&d=identicon&r=PG", "display_name": "kkm", "link": "https://stackoverflow.com/users/1149924/kkm"}, "edited": false, "score": 2, "creation_date": 1470860098, "post_id": 38882256, "comment_id": 65126460, "body": "If you can recompile both, make sure you use exactly same compiler and settings for both. If your OS is Windows, MS compilers are notoriously differ in their C++ ABI both from from version to version and between Debug and Release builds. You cannot pass C++ object from e. g. release-compiled binary to a debug-compiled DLL, or similarly mix VS2013 and VS2015 and so on. I&#39;ve seen inconsistencies in g++-compiled binaries too, but they are less common.Then try to figure out what changed. My guess it&#39;s the <code>sizeof(std::vector&lt;float&gt;)</code> that differs between the two. dll&#39;s one is larger:a debug build?"}, {"owner": {"reputation": 2378, "user_id": 1277239, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/42d3dede20a5ce60d6b89149cb0abc08?s=128&d=identicon&r=PG", "display_name": "Nick X Tsui", "link": "https://stackoverflow.com/users/1277239/nick-x-tsui"}, "reply_to_user": {"reputation": 4108, "user_id": 1149924, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aaf5827d09d4eb31df2e3e25d1de9bd8?s=128&d=identicon&r=PG", "display_name": "kkm", "link": "https://stackoverflow.com/users/1149924/kkm"}, "edited": false, "score": 0, "creation_date": 1470860442, "post_id": 38882256, "comment_id": 65126625, "body": "@kkm I think built both with Debug option, and launch the Debug version because I wanted to debug."}, {"owner": {"reputation": 2378, "user_id": 1277239, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/42d3dede20a5ce60d6b89149cb0abc08?s=128&d=identicon&r=PG", "display_name": "Nick X Tsui", "link": "https://stackoverflow.com/users/1277239/nick-x-tsui"}, "edited": false, "score": 0, "creation_date": 1470860508, "post_id": 38882256, "comment_id": 65126659, "body": "I mean, if it is too mysterious, perhaps I should just strip the array from the  struct then pass the array independently?"}, {"owner": {"reputation": 4108, "user_id": 1149924, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aaf5827d09d4eb31df2e3e25d1de9bd8?s=128&d=identicon&r=PG", "display_name": "kkm", "link": "https://stackoverflow.com/users/1149924/kkm"}, "edited": false, "score": 0, "creation_date": 1470861072, "post_id": 38882256, "comment_id": 65126940, "body": "I do not know, and &quot;mysterious&quot; is subjective. If by &quot;array&quot; you mean the <code>std::vector</code> embedded in the struct, and <code>sizeof(std::vector&lt;float&gt;)</code> is different in the two binaries, then it&#39;s not going to work anyway. You may also avoid the issue by passing a pointer to a caller-allocated memory (a C-style array), provided the callee does not need to manipulate it. You can still use a <code>vector</code> and pass a pointer to the first element in all practical cases I can think of (although this is not standardized before C++17)."}], "answers": [{"tags": [], "owner": {"reputation": 2378, "user_id": 1277239, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/42d3dede20a5ce60d6b89149cb0abc08?s=128&d=identicon&r=PG", "display_name": "Nick X Tsui", "link": "https://stackoverflow.com/users/1277239/nick-x-tsui"}, "is_accepted": true, "score": 0, "last_activity_date": 1470925833, "creation_date": 1470925833, "answer_id": 38899233, "question_id": 38882256, "link": "https://stackoverflow.com/questions/38882256/pass-a-struct-with-a-member-being-vector/38899233#38899233", "title": "Pass a struct with a member being vector", "body": "<p>I actually don't have an answer to this questions, but I am just presenting how I did what I wanted by getting around it.</p>\n\n<p>I basically strip out the array/vector from the struct, and passed it separately as the second argument, something like this:</p>\n\n<pre><code> //caller.cpp\n    ReconAxial16 operator;\nfloat* wArray = new float[param.FFTLen];\n    GenKernCoef(wArray, param.FFTLen, kType, ParaDataFloat, param.dDetSampleRes);\n    operator.Init( param, wArray ) ;\n</code></pre>\n\n<p>Of course in the dll project, I did something like this to make it accept an array as an additional argument:</p>\n\n<pre><code>// dll.h\nLONG SetupGeometry( const ScanParam16 &amp;param, float* wArray);   \n</code></pre>\n\n<p>It worked. I stepped in, and saw the <code>wArray</code> get passed correctly into the dll.</p>\n"}], "owner": {"reputation": 2378, "user_id": 1277239, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/42d3dede20a5ce60d6b89149cb0abc08?s=128&d=identicon&r=PG", "display_name": "Nick X Tsui", "link": "https://stackoverflow.com/users/1277239/nick-x-tsui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 38899233, "answer_count": 1, "score": 5, "last_activity_date": 1470925833, "creation_date": 1470858375, "last_edit_date": 1470858807, "question_id": 38882256, "link": "https://stackoverflow.com/questions/38882256/pass-a-struct-with-a-member-being-vector", "title": "Pass a struct with a member being vector", "body": "<p>I have a class which builds a dll, implemented as a single solution. In its header file I have a struct with a member being vector. like following;</p>\n\n<pre><code>// dll.h\n\n    struct ScanParam16\n    {\n        // int param\n        int nChanDetX, nChanDetZ;\n        int nViewPerRot, nViewPerSlice, \n            nChanDetXPerMod; \n        int nImgXY, nImgZ;  \n        int nSlicePerProcess, n2Group;\n        int FFTLen;\n\n        // float param\n        float pitch;\n        float isoOffX, isoOffZ;\n        float fov, dfov;\n        float imgCentX, imgCentY, imgCentZ;\n        float sdd, srad, drad;\n        float dDetX, dDetZ, dDetU, dDetV, interModGapX, dDetSampleRes;\n\n        std::vector&lt;float&gt; winArray;\n\n        bool interleave;\n\n        // enum\n        bpInterpType16 iType;\n    };\n</code></pre>\n\n<p>In the code that calls this dll, the vector winArrar is valued like following:</p>\n\n<pre><code>// caller.cpp\n    static ScanParam16 param;\n    param.FFTLen = 2048;\n    float* wArray = new float[param.FFTLen];\n    GenKernCoef(wArray, param.FFTLen, kType, ParaDataFloat, aram.dDetSampleRes);\n    std::vector&lt;float&gt; v(wArray, wArray+param.FFTLen);\n    param.winArray = v;\n</code></pre>\n\n<p>Everything looks fine now. I can see that <code>param.winArray</code> is properly set with correct values. </p>\n\n<p>However, when I pass the <code>param</code> as a parameter , the <code>param.winArray</code> becomes 0 in capacity/length as I observe inside the dll.</p>\n\n<p>Here is how the param gets passed:</p>\n\n<pre><code>//caller.cpp\n    ReconAxial16 operator;\n    operator.Init( param ) ;\n</code></pre>\n\n<p>Above is the point right before the parameter is passed down to the dll.</p>\n\n<p>And below is the point where the parameter gets inside of the dll:</p>\n\n<pre><code>// dll.cpp\n    void ReconAxial16::Init(const ScanParam16&amp; param )                      \n    {\n        /**************************************************************/\n        //                  setup geometry and detv\n        /**************************************************************/\n        SetupGeometry(param);   \n\n        // Allocate buffer for reconstructed image (on cpu side)\n        _img = (float *)malloc(_nImgXY * _nImgXY * sizeof(float));\n\n        ......\n\n    }\n</code></pre>\n\n<p>Here when I step in, I can see <code>param.winArray</code> is of length 0, but all the other parameters look fine. </p>\n\n<p>I don't under stand it, and wondering how can I pass the vector properly? Thanks a lot.</p>\n"}, {"tags": ["c++", "c++11", "cuda", "gcc5", "limited-user"], "comments": [{"owner": {"reputation": 11821, "user_id": 2192361, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/739fdeab1b8bfdd773da2f1f0610197e?s=128&d=identicon&r=PG", "display_name": "Pavan Yalamanchili", "link": "https://stackoverflow.com/users/2192361/pavan-yalamanchili"}, "edited": false, "score": 1, "creation_date": 1470858355, "post_id": 38882151, "comment_id": 65125539, "body": "Make a local copy of the CUDA 7.5 toolkit and edit <code>host_config.h</code> and use nvcc from the local copy ?"}, {"owner": {"reputation": 108, "user_id": 968909, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ae4e8f169249a7ef6daa953edc5a7a4a?s=128&d=identicon&r=PG", "display_name": "darel", "link": "https://stackoverflow.com/users/968909/darel"}, "reply_to_user": {"reputation": 11821, "user_id": 2192361, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/739fdeab1b8bfdd773da2f1f0610197e?s=128&d=identicon&r=PG", "display_name": "Pavan Yalamanchili", "link": "https://stackoverflow.com/users/2192361/pavan-yalamanchili"}, "edited": false, "score": 0, "creation_date": 1470858632, "post_id": 38882151, "comment_id": 65125673, "body": "@Pavan Yalamanchili Thanks for the quick reply. Am I to do a simple copy-paste operation of the CUDA toolkit? Anyway, let me try it out."}, {"owner": {"reputation": 11821, "user_id": 2192361, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/739fdeab1b8bfdd773da2f1f0610197e?s=128&d=identicon&r=PG", "display_name": "Pavan Yalamanchili", "link": "https://stackoverflow.com/users/2192361/pavan-yalamanchili"}, "edited": false, "score": 0, "creation_date": 1470858879, "post_id": 38882151, "comment_id": 65125792, "body": "Use rsync if it is available instead of copy. rsync avoids copying duplicates for symbolic links."}, {"owner": {"reputation": 108, "user_id": 968909, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ae4e8f169249a7ef6daa953edc5a7a4a?s=128&d=identicon&r=PG", "display_name": "darel", "link": "https://stackoverflow.com/users/968909/darel"}, "reply_to_user": {"reputation": 11821, "user_id": 2192361, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/739fdeab1b8bfdd773da2f1f0610197e?s=128&d=identicon&r=PG", "display_name": "Pavan Yalamanchili", "link": "https://stackoverflow.com/users/2192361/pavan-yalamanchili"}, "edited": false, "score": 0, "creation_date": 1470861783, "post_id": 38882151, "comment_id": 65127298, "body": "@Pavan Yalamanchili It seems to still reference the system installed version. I&#39;m using Cmake with find_package(CUDA).. Maybe I need to do something to make it reference the copy in my home dir? How do I do so? Or rather, how should I write my Cmake to consider the changes?"}, {"owner": {"reputation": 11821, "user_id": 2192361, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/739fdeab1b8bfdd773da2f1f0610197e?s=128&d=identicon&r=PG", "display_name": "Pavan Yalamanchili", "link": "https://stackoverflow.com/users/2192361/pavan-yalamanchili"}, "edited": false, "score": 0, "creation_date": 1470862496, "post_id": 38882151, "comment_id": 65127663, "body": "You need to export the environment variable <code>CUDA_TOOLKIT_ROOT_DIR</code> to the new path and start over again."}, {"owner": {"reputation": 11821, "user_id": 2192361, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/739fdeab1b8bfdd773da2f1f0610197e?s=128&d=identicon&r=PG", "display_name": "Pavan Yalamanchili", "link": "https://stackoverflow.com/users/2192361/pavan-yalamanchili"}, "edited": false, "score": 1, "creation_date": 1470878799, "post_id": 38882151, "comment_id": 65132385, "body": "I&#39;m voting to close this question as off-topic because it is not programming related."}, {"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 0, "creation_date": 1470939162, "post_id": 38882151, "comment_id": 65165352, "body": "You may also want to try <a href=\"https://developer.nvidia.com/cuda-toolkit\" rel=\"nofollow noreferrer\">CUDA 8 Release Candidate</a>"}], "answers": [{"tags": [], "owner": {"reputation": 108, "user_id": 968909, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ae4e8f169249a7ef6daa953edc5a7a4a?s=128&d=identicon&r=PG", "display_name": "darel", "link": "https://stackoverflow.com/users/968909/darel"}, "is_accepted": false, "score": 1, "last_activity_date": 1470866837, "creation_date": 1470866837, "answer_id": 38884357, "question_id": 38882151, "link": "https://stackoverflow.com/questions/38882151/making-gcc-5-1-0-work-with-cuda-7-5-as-non-root-user/38884357#38884357", "title": "Making GCC 5.1.0 work with CUDA 7.5 as non-root user", "body": "<p>Thanks to @Pavan Yalamanchili. Copying of the system installed version to a local path allowed me to edit the host_config file, thereby resolving the issue.</p>\n"}], "owner": {"reputation": 108, "user_id": 968909, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ae4e8f169249a7ef6daa953edc5a7a4a?s=128&d=identicon&r=PG", "display_name": "darel", "link": "https://stackoverflow.com/users/968909/darel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470866837, "creation_date": 1470858004, "last_edit_date": 1470864172, "question_id": 38882151, "link": "https://stackoverflow.com/questions/38882151/making-gcc-5-1-0-work-with-cuda-7-5-as-non-root-user", "title": "Making GCC 5.1.0 work with CUDA 7.5 as non-root user", "body": "<p>I've done the rounds through Google unsuccessfully. My question is a bit unique - I have a big chunk of code that has a lot of C++11 dependencies, which runs just fine when I compile with GCC 5.1.0 but throws a big bunch of errors on GCC 4.8.3, the latter which works fine with CUDA. I also need to do some work with CUDA, which of course doesn't work because of the GCC 5.1.0 version. This is similar to a number of issues raised before, whose recommendations involved editing the host_config.h file to remove the offending line. However, I'm working on an institution's cluster and cannot edit the file since it was installed by the Sys admin. I can load any GCC version using the module load command but we have the C++11 dependency issues with the code if I downgrade to a lower GCC version. Any advice around this?</p>\n"}, {"tags": ["c++", "templates", "instantiation", "member", "definition"], "comments": [{"owner": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "edited": false, "score": 1, "creation_date": 1470857632, "post_id": 38882029, "comment_id": 65125172, "body": "Is <code>write_wave</code> the same thing you refer to as <code>output_wave</code>? The compiler should generate a definition for it for any given <code>kernel&lt;T, N&gt;</code> which has been instantiated."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1470857884, "post_id": 38882029, "comment_id": 65125293, "body": "Take the address of it"}, {"owner": {"reputation": 53, "user_id": 6684508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w37fR.png?s=128&g=1", "display_name": "zll", "link": "https://stackoverflow.com/users/6684508/zll"}, "edited": false, "score": 0, "creation_date": 1471007694, "post_id": 38882029, "comment_id": 65194609, "body": "Thank you all for your feedback.  I&#39;ve updated my state of knowledge in the description above. The take-away is that assigning the address of the member function to a data member does the trick -- at the expense of making each instance of the class slightly bigger -- so this is still not ideal."}], "owner": {"reputation": 53, "user_id": 6684508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w37fR.png?s=128&g=1", "display_name": "zll", "link": "https://stackoverflow.com/users/6684508/zll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1471007529, "creation_date": 1470857543, "last_edit_date": 1471007529, "question_id": 38882029, "link": "https://stackoverflow.com/questions/38882029/force-definition-of-template-class-member-function", "title": "Force definition of template class member function?", "body": "<p>I have a template class as follows:</p>\n\n<pre><code>template &lt;class T, int N&gt;\nclass kernel: public std::array&lt;T, N &lt;&lt; 1&gt; {\n    :\npublic:\n    kernel(void) : std::array&lt;T, N &lt;&lt; 1&gt;{} { blah... }\n    template &lt;typename... E&gt;\n    kernel(const E &amp;&amp;... e):\n        std::array&lt;T, N &lt;&lt; 1&gt;{{std::forward&lt;const E&gt;(e)...}} { blah... }\n    :\n    T write_wav(const char *filename) const { blah... }\n};\n</code></pre>\n\n<p>In my program, I instantiate <code>kernel&lt;T, N&gt;</code> for various values of T and N without problems, but never actually call <code>kernel&lt;T, N&gt;::write_wav()</code>, and so the compiler does not generate a definition for it.</p>\n\n<p>Thing is, I WANT the compiler to generate a definition, because I want to call <code>kernel&lt;T, N&gt;::write_wav()</code> from my debugger (Immediate Window in VC++2015).  How would I force the compiler to do so?</p>\n\n<p>Thus far, the only working approach I stumbled upon is to call <code>kernel&lt;T, N&gt;::write_wav()</code> from the constructor, and hence generate a reference to it:</p>\n\n<pre><code>kernel(void) : std::array&lt;T, N &lt;&lt; 1&gt;{} { write_wav(nullptr); }\ntemplate &lt;typename... E&gt;\nkernel(const E &amp;&amp;... e):\n    std::array&lt;T, N &lt;&lt; 1&gt;{{std::forward&lt;const E&gt;(e)...}} { write_wav(nullptr); }\n</code></pre>\n\n<p>Alas, this introduces an unnecessary execution overhead.  Is there a cleaner way to do this?</p>\n\n<p>If I try taking the address of kernel::write_wav(), like so:</p>\n\n<pre><code>    kernel(void) : std::array&lt;T, N &lt;&lt; 1&gt;{} { &amp;kernel&lt;T, N&gt;::write_wav; }\n</code></pre>\n\n<p>Then things compile fine but the member function is still not instantiated (probably because the compiler can figure out that its address has no uses).</p>\n\n<p>Alternately, I tried creating a pointer to member inside the class and assigning the address to it:</p>\n\n<pre><code>    T(kernel&lt;T, N&gt;::*write_wav_ptr)(const char *filename) const;\n    kernel(void) : std::array&lt;T, N &lt;&lt; 1&gt;{} { write_wav_ptr = &amp;kernel&lt;T, N&gt;::write_wav; }\n</code></pre>\n\n<p>Then things work fine (and kernel::write_wav() gets instantiated), but each instance of kernel now has an extra data member that I don't really need.</p>\n"}, {"tags": ["c++", "ios", "opengl-es", "textures"], "comments": [{"owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1470886524, "post_id": 38882003, "comment_id": 65134119, "body": "Does it render untextured? I didn&#39;t look at all the code, but one obvious problem is that you call <code>glBindAttribLocation()</code> too late. This needs to happen <i>before</i> you link the program."}, {"owner": {"reputation": 1799, "user_id": 1137713, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iuRcY.jpg?s=128&g=1", "display_name": "iHowell", "link": "https://stackoverflow.com/users/1137713/ihowell"}, "reply_to_user": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1470917203, "post_id": 38882003, "comment_id": 65150727, "body": "Oh really? Thanks. I will try that out."}, {"owner": {"reputation": 1799, "user_id": 1137713, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iuRcY.jpg?s=128&g=1", "display_name": "iHowell", "link": "https://stackoverflow.com/users/1137713/ihowell"}, "reply_to_user": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1470918278, "post_id": 38882003, "comment_id": 65151510, "body": "Unfortunately there are still issues, but if I switch to my other shader and comment out the third attribute, the box shows up. As for having a blank texture, I don&#39;t think that is happening, since it is loading the image correctly, though I&#39;m not quite sure how to check that the texture is created correctly."}], "answers": [{"tags": [], "owner": {"reputation": 1799, "user_id": 1137713, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iuRcY.jpg?s=128&g=1", "display_name": "iHowell", "link": "https://stackoverflow.com/users/1137713/ihowell"}, "is_accepted": false, "score": 0, "last_activity_date": 1470934647, "creation_date": 1470934647, "answer_id": 38902171, "question_id": 38882003, "link": "https://stackoverflow.com/questions/38882003/texture-not-showing-up-in-opengl-es-2-0/38902171#38902171", "title": "Texture not showing up in OpenGL ES 2.0", "body": "<p>Unfortunately, this was simply me not assigning a uniform to a value, which caused all vertices to go to (0,0) (or something like that). </p>\n"}], "owner": {"reputation": 1799, "user_id": 1137713, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iuRcY.jpg?s=128&g=1", "display_name": "iHowell", "link": "https://stackoverflow.com/users/1137713/ihowell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470934647, "creation_date": 1470857444, "question_id": 38882003, "link": "https://stackoverflow.com/questions/38882003/texture-not-showing-up-in-opengl-es-2-0", "title": "Texture not showing up in OpenGL ES 2.0", "body": "<p>Currently working in OpenGL ES 2.0 in native on iOS. For some reason, my texture quad won't render, it just won't appear. I try to load in a .bmp file for the texture, and I do know that it goes through, because the log function I put in <code>PolygonRenderer.addTexture</code> prints out <code>\"Image size: 256, 256\"</code>, which is the size of my texture.</p>\n\n<p>Edit: My <code>.bmp</code> texture is saved in R8, G8, B8 form.</p>\n\n<p>VertexShader:</p>\n\n<pre><code>std::string textureVertex =\n    \"attribute vec3 vertexloc;                                              \\n\"\n    \"attribute vec3 vertexcol;                                              \\n\"\n    \"attribute vec2 vertexuv;                                               \\n\"\n    \"varying vec2 TexCoords;                                                \\n\"\n    \"varying vec3 textColor;                                                \\n\"\n    \"uniform mat4 projection;                                               \\n\"\n    \"uniform mat4 view;                                                     \\n\"\n    \"uniform mat4 offset;                                                   \\n\"\n    \"void main()                                                            \\n\"\n    \"{                                                                      \\n\"\n    \"    gl_Position = projection * view * offset * vec4(vertexloc, 1.0);   \\n\"\n    \"    TexCoords = vertexuv;                                              \\n\"\n    \"    textColor = vertexcol;                                             \\n\"\n    \"}\";\n</code></pre>\n\n<p>Fragment Shader:</p>\n\n<pre><code>std::string textureFragment =\n    \"precision mediump float;                                               \\n\"\n    \"varying vec2 TexCoords;                                                \\n\"\n    \"varying vec3 textColor;                                                \\n\"\n    \"uniform sampler2D text;                                                \\n\"\n    \"void main()                                                            \\n\"\n    \"{                                                                      \\n\"\n    \"    vec4 sampled = vec4(1.0, 1.0, 1.0, texture2D(text, TexCoords).r);  \\n\"\n    \"    gl_FragColor = vec4(textColor, 1.0) * sampled;                     \\n\"\n    \"}\";\n</code></pre>\n\n<p>Vertices:</p>\n\n<pre><code>x = sWindowWidth / 2 - 1000 / 2;\n    y = - sWindowHeight / 2 - 172 / 2;\n    w = 1000;\n    h = 172;\n    temp = {\n        x,              y + h,          0.3,\n        textureColor.x,    textureColor.y,    textureColor.z,\n        0, 1,\n\n        x,              y,              0.3,\n        textureColor.x,    textureColor.y,    textureColor.z,\n        0, 0,\n\n        x + w,          y,              0.3,\n        textureColor.x,    textureColor.y,    textureColor.z,\n        1, 0,\n\n        x,              y + h,          0.3,\n        textureColor.x,    textureColor.y,    textureColor.z,\n        0, 1,\n\n        x + w,          y,              0.3,\n        textureColor.x,    textureColor.y,    textureColor.z,\n        1, 0,\n\n        x + w,          y + h,          0.3,\n        textureColor.x,    textureColor.y,    textureColor.z,\n        1, 1\n    };\n    polygonRenderer.addLoadingPolygon(temp);\n</code></pre>\n\n<p>PolygonRenderer excerpts:</p>\n\n<p>AddLoadingPolygon:</p>\n\n<pre><code>void PolygonRenderer::addLoadingPolygon(std::vector&lt;GLfloat&gt; vertices) {\n    GLuint vertexBuffer;\n    glGenBuffers(1, &amp;vertexBuffer);\n    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);\n    glBufferData(GL_ARRAY_BUFFER, vertices.size() * sizeof(GLfloat),\n        vertices.data(), GL_STATIC_DRAW);\n    if(vertexBuffer == 0){\n        log(\"gl vertexBuffer not generated\");\n    }\n    loadingPolygons.push_back(PolygonRenderObject{\n        vertexBuffer,\n        (long)vertices.size() / 8,\n        0\n    });\n}\n</code></pre>\n\n<p>AddTexture:</p>\n\n<pre><code>void PolygonRenderer::addTexture(const char* imagePath) {\n    // Data read from the header of the BMP file\n    unsigned char header[54]; // Each BMP file begins by a 54-bytes header\n    unsigned int dataPos;     // Position in the file where the actual data begins\n    unsigned int width, height;\n    unsigned int imageSize;   // = width*height*3\n    // Actual RGB data\n    unsigned char * data;\n    // Open the file\n    FILE * file = fopen(imagePath,\"rb\");\n    if (!file) {\n        log(\"Image could not be opened\\n\");\n        return;\n    }\n    if (fread(header, 1, 54, file) != 54) {\n        log(\"Not a correct BMP file\");\n        return;\n    }\n    if (header[0] != 'B' || header[1] != 'M') {\n        log(\"Not a correct BMP file\");\n        return;\n    }\n    // Read ints from the byte array\n    dataPos     = *(int*)&amp;(header[0x0A]);\n    imageSize   = *(int*)&amp;(header[0x22]);\n    width       = *(int*)&amp;(header[0x12]);\n    height      = *(int*)&amp;(header[0x16]);\n\n    if (imageSize == 0) {\n        imageSize = width * height;\n    }\n    log(\"Image size: %d, %d\", width, height);\n    if (dataPos == 0) {\n        dataPos = 54;\n    }\n\n    data = new unsigned char[imageSize];\n    fread(data, 1, imageSize, file);\n    fclose(file);\n\n    glActiveTexture(GL_TEXTURE0);\n\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n\n    GLuint textureId;\n    glGenTextures(1, &amp;textureId);\n    glBindTexture(GL_TEXTURE_2D, textureId);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB,\n        GL_UNSIGNED_BYTE, data);\n\n    checkForGLError(\"Add texture:\");\n    log(\"Texture created: %d\", textureId);\n    textures.push_back(textureId);\n}\n</code></pre>\n\n<p>Render for this part:</p>\n\n<pre><code>glUseProgram(shader.get(1));\n        glBindAttribLocation(shader.get(1), 2, \"vertexloc\");\n        glBindAttribLocation(shader.get(1), 3, \"vertexcol\");\n        glBindAttribLocation(shader.get(1), 4, \"vertexuv\");\n\n        glBindTexture(GL_TEXTURE_2D, textures[0]);\n\n        glEnableVertexAttribArray(2);\n        glEnableVertexAttribArray(3);\n        glEnableVertexAttribArray(4);\n\n        glUniformMatrix4fv(viewLocation, 1, GL_FALSE,\n            &amp;frame.combinedMatrix[16 * objects[1].ViewGroup]);\n\n        glBindBuffer(GL_ARRAY_BUFFER, objects[1].Buffer);\n        glVertexAttribPointer(2, 3, GL_FLOAT, GL_FALSE, 8 * sizeof(GLfloat),\n            0);\n\n        glBindBuffer(GL_ARRAY_BUFFER, objects[1].Buffer);\n        glVertexAttribPointer(3, 3, GL_FLOAT, GL_FALSE, 8 * sizeof(GLfloat),\n                              (GLvoid*)(3 * sizeof(GLfloat)));\n\n        glBindBuffer(GL_ARRAY_BUFFER, objects[1].Buffer);\n        glVertexAttribPointer(4, 2, GL_FLOAT, GL_FALSE, 8 * sizeof(GLfloat),\n                              (GLvoid*)(6 * sizeof(GLfloat)));\n\n        checkForGLError(\"In Renderer\");\n        glDrawArrays(GL_TRIANGLES, 0, 6);\n        glBindBuffer(GL_ARRAY_BUFFER, 0);\n\n        glDisableVertexAttribArray(2);\n        glDisableVertexAttribArray(3);\n        glDisableVertexAttribArray(4);\n</code></pre>\n"}, {"tags": ["c++", "browser", "browser-history", "wininet"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470858266, "post_id": 38881911, "comment_id": 65125500, "body": "Every browser does its own thing.. so, you have to implement a different solution for each browser you want to support. Sorry, no shortcuts available.."}], "answers": [{"tags": [], "owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "is_accepted": false, "score": 1, "last_activity_date": 1470857341, "creation_date": 1470857341, "answer_id": 38881984, "question_id": 38881911, "link": "https://stackoverflow.com/questions/38881911/how-to-get-history-of-a-web-brower-like-google-chrome-in-c/38881984#38881984", "title": "How to get history of a web brower like google chrome in c++ ?", "body": "<p>Wininet is for networking so it wouldn't make sense for such a function to be there. I would export the history to an intermediary format (Firefox does it to HTML) and find a library to read that.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470858548, "post_id": 38882161, "comment_id": 65125632, "body": "And the primary &quot;take away&quot; is that &quot;there&#39;s no standard way to do this&quot; - not even with the same browser on different operating systems."}, {"owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470858923, "post_id": 38882161, "comment_id": 65125825, "body": "@JesperJuhl Typically same browser on different OSs has the same history format, but different location, e.g. Chrome. Unfortunately, there is no &quot;silver bullet&quot; for browser history parsing, you need to support each format separately."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470859022, "post_id": 38882161, "comment_id": 65125871, "body": "Isn&#39;t that what I said?"}, {"owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470859022, "post_id": 38882161, "comment_id": 65125872, "body": "@JesperJuhl By the way, there is not too much popular engines to support. It&#39;s Chrome, Fire Fox and IE. Opera now uses Chromium, so it has the same history format as Chrome."}, {"owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470859209, "post_id": 38882161, "comment_id": 65125973, "body": "@JesperJuhl Yes, you right"}], "tags": [], "owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "is_accepted": false, "score": 1, "last_activity_date": 1470858029, "creation_date": 1470858029, "answer_id": 38882161, "question_id": 38881911, "link": "https://stackoverflow.com/questions/38881911/how-to-get-history-of-a-web-brower-like-google-chrome-in-c/38882161#38882161", "title": "How to get history of a web brower like google chrome in c++ ?", "body": "<p>Google Chrome stores it's history in SQLite DB. So it's pretty easy to open and read it. History of visited sites stored in a file named <strong>History</strong>. Path to the default user history is different for the different versions of OS. On Windows XP:  </p>\n\n<blockquote>\n  <p>C:\\Documents and Settings\\%USERNAME%\\Local Settings\\Application\n  Data\\Google\\Chrome\\User Data\\Default\\Preferences</p>\n</blockquote>\n\n<p>On Windows Vista and later:   </p>\n\n<blockquote>\n  <p>C:\\Users\\%USERNAME%\\AppData\\Local\\Google\\Chrome\\User\n  Data\\Default\\Preferences</p>\n</blockquote>\n\n<p>The hardest part here is to convert <strong>visit time</strong> to user-friendly format. This value stored in <strong>visits.visit_time</strong> as number of microseconds since Jan 1, 1601 UTC. </p>\n"}], "owner": {"reputation": 35, "user_id": 6442145, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1036467179741374/picture?type=large", "display_name": "Ritwik Vashistha", "link": "https://stackoverflow.com/users/6442145/ritwik-vashistha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1585, "favorite_count": 0, "closed_date": 1470878628, "answer_count": 2, "score": 0, "last_activity_date": 1470858029, "creation_date": 1470857073, "question_id": 38881911, "link": "https://stackoverflow.com/questions/38881911/how-to-get-history-of-a-web-brower-like-google-chrome-in-c", "closed_reason": "Needs more focus", "title": "How to get history of a web brower like google chrome in c++ ?", "body": "<p>I am working on a program in c++ and i need to get history of a web browser (default) or any like google chrome so what functions will help to get history ?<br>\nIs there any function in wininet?</p>\n"}, {"tags": ["c++", "ssh"], "comments": [{"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1471092030, "post_id": 38881762, "comment_id": 65221331, "body": "Not sure how 3des is related to the question but 3DES should not be used in new work, it has been superseded by AES."}], "answers": [{"tags": [], "owner": {"reputation": 20508, "user_id": 2196426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e8759ad9a50739704dca2e84fa9b50?s=128&d=identicon&r=PG", "display_name": "Jakuje", "link": "https://stackoverflow.com/users/2196426/jakuje"}, "is_accepted": false, "score": 1, "last_activity_date": 1470991947, "creation_date": 1470991947, "answer_id": 38913838, "question_id": 38881762, "link": "https://stackoverflow.com/questions/38881762/how-make-3des-cbc-iv/38913838#38913838", "title": "How make 3des-cbc IV?", "body": "<p>Wikipedia explains the CBC quite well:</p>\n\n<p><img src=\"https://upload.wikimedia.org/wikipedia/commons/6/66/Cbc_decryption.png\" alt=\"image\"></p>\n\n<p>The initiation vector for the second bloc is the first block of ciphertext</p>\n"}, {"tags": [], "owner": {"reputation": 4282, "user_id": 165063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJdL7.png?s=128&g=1", "display_name": "Roman Khimov", "link": "https://stackoverflow.com/users/165063/roman-khimov"}, "is_accepted": false, "score": 0, "last_activity_date": 1471025800, "creation_date": 1471025800, "answer_id": 38924187, "question_id": 38881762, "link": "https://stackoverflow.com/questions/38881762/how-make-3des-cbc-iv/38924187#38924187", "title": "How make 3des-cbc IV?", "body": "<p>Quoting <a href=\"https://tools.ietf.org/html/rfc4253\" rel=\"nofollow\">RFC 4253</a>:</p>\n\n<blockquote>\n  <p>The encrypted data in all packets sent in one direction SHOULD be\n   considered a single data stream.  For example, initialization vectors\n   SHOULD be passed from the end of one packet to the beginning of the\n   next packet. </p>\n</blockquote>\n\n<p>And although it's a \"SHOULD\" I couldn't find any deviation from this, so your second packet should use the last block from the first packet as an IV. </p>\n"}], "owner": {"reputation": 15, "user_id": 3107137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c023f2a7c4395a00e2b3b01a19c1ae68?s=128&d=identicon&r=PG&f=1", "display_name": "user3107137", "link": "https://stackoverflow.com/users/3107137/user3107137"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1471025800, "creation_date": 1470856454, "question_id": 38881762, "link": "https://stackoverflow.com/questions/38881762/how-make-3des-cbc-iv", "title": "How make 3des-cbc IV?", "body": "<p>i working now on realization of SSH protocol in C ++. I deal with cbc encryption mode. I understood that initial vector's initialization for first block is calculated from a hash of certain data, vector's initialization for the next blocks - it's previous block of ciphertext. It works only for the first packet, in the second packet is impossible to decrypt the first block. Maybe because the last block of ciphertext is comprised of 4 bytes? How is calculate the initial IV for the second package?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1470857009, "post_id": 38881788, "comment_id": 65124830, "body": "What about with the <code>decltype</code> version? Is your map actually a <code>map&lt;guid, RadioTransmitterInformation&gt;</code>? You didn&#39;t post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, so I can&#39;t be sure."}, {"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1470858064, "post_id": 38881788, "comment_id": 65125389, "body": "Damn nevermind, I made a huge mistake. Your answer did fix my issue. Thanks a lot!"}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 6, "last_activity_date": 1470856561, "creation_date": 1470856561, "answer_id": 38881788, "question_id": 38881707, "link": "https://stackoverflow.com/questions/38881707/functor-for-find-if-and-map-avoid-copy-of-value/38881788#38881788", "title": "Functor for find_if and map, avoid copy of value", "body": "<blockquote>\n<pre><code>const std::pair&lt;guid, RadioTransmitterInformation&gt; &amp;t\n</code></pre>\n</blockquote>\n\n<p>The value_type of a <code>map</code> always stores the key as <code>const</code>. But your <code>pair</code> here doesn't store the key as <code>const</code>. So to call your function, it has to copy the internal <code>pair</code> value into a temporary, which gets bound to a <code>const&amp;</code> parameter. And thus, gets deleted after calling your lambda.</p>\n\n<p>Instead, use:</p>\n\n<pre><code>const std::pair&lt;const guid, RadioTransmitterInformation&gt; &amp;t\n</code></pre>\n\n<p>Or even better:</p>\n\n<pre><code>const decltype(mRTMap)::value_type &amp;t\n</code></pre>\n\n<p>Or even better-er if you have C++14:</p>\n\n<pre><code>const auto &amp;t\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": false, "score": 2, "last_activity_date": 1470856606, "creation_date": 1470856606, "answer_id": 38881799, "question_id": 38881707, "link": "https://stackoverflow.com/questions/38881707/functor-for-find-if-and-map-avoid-copy-of-value/38881799#38881799", "title": "Functor for find_if and map, avoid copy of value", "body": "<p>If a map has type <code>std::map&lt;guid, RadioTransmitterInformation&gt;</code>, then it stores values of type <code>std::pair&lt;const guid, RadioTransmitterInformation&gt;</code> - note the <code>const</code>.</p>\n\n<p>Since <code>std::pair&lt;guid, RadioTransmitterInformation&gt;</code> is a different type, the compiler has to generate a temporary <code>pair</code> to call your functors (in either version).</p>\n\n<p>So try using <code>const std::pair&lt;const guid, RadioTransmitterInformation&gt;&amp;</code> arguments, or maybe <code>const decltype(mRTMap)::value_type&amp;</code>.</p>\n"}], "owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 38881788, "answer_count": 2, "score": 0, "last_activity_date": 1470857160, "creation_date": 1470856219, "last_edit_date": 1470857160, "question_id": 38881707, "link": "https://stackoverflow.com/questions/38881707/functor-for-find-if-and-map-avoid-copy-of-value", "title": "Functor for find_if and map, avoid copy of value", "body": "<p>Is there a way to avoid the copy (I guess that's what's going on under the hood) for the value in the <code>std::pair</code> for the functor with a <code>std::map</code>?</p>\n\n<pre><code>struct request_number_find\n{\n  request_number_find(const unsigned __int64 &amp;baseline) : _baseline(baseline) {}\n  bool operator() (const std::pair&lt;guid, RadioTransmitterInformation&gt; &amp;arg)\n//-------------------------------------- ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  { \n    return _baseline == arg.second.mPropagationServer.mRequestNumber; \n  }\n  unsigned __int64 _baseline;\n};\n</code></pre>\n\n<p>Even with C++11 lambda</p>\n\n<pre><code>auto it = std::find_if(mRTMap.begin(), mRTMap.end(), \n  [](const std::pair&lt;guid, RadioTransmitterInformation&gt; &amp;t) -&gt; bool { \n    return t.second.mPropagationServer.mRequestNumber == 24031;\n  }\n);\n</code></pre>\n\n<p>In both cases, I always see the destructor of <code>RadioTransmitterInformation</code> getting call multiple times while searching for the value.</p>\n\n<p>Map declaration:</p>\n\n<pre><code>std::map&lt;guid, RadioTransmitterInformation, guid_compare&gt; mRTMap;\n</code></pre>\n\n<p>guid_compare:</p>\n\n<pre><code>struct guid_compare {\n  bool operator() (const guid&amp; lhs, const guid&amp; rhs) const{\n    return lhs &lt; rhs;\n  }\n};\n</code></pre>\n\n<p>Find_if call:</p>\n\n<pre><code>std::find_if(mRTMap.begin(), mRTMap.end(), request_number_find(24031));\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "file"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1470856001, "post_id": 38881629, "comment_id": 65124275, "body": "Your life would be so much easier with <code>std::ifstream</code> (among other things)"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 5, "creation_date": 1470856004, "post_id": 38881629, "comment_id": 65124276, "body": "Where to even begin..."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1470856090, "post_id": 38881629, "comment_id": 65124327, "body": "I know theres &quot;include &lt;iostream&gt;&quot; and a lone &quot;wcout&quot; in there, but this should be retagged as C (IMHO)"}, {"owner": {"reputation": 124, "user_id": 4951232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMsLd.png?s=128&g=1", "display_name": "Darth Futuza", "link": "https://stackoverflow.com/users/4951232/darth-futuza"}, "edited": false, "score": 0, "creation_date": 1470856130, "post_id": 38881629, "comment_id": 65124360, "body": "Take a look at this: <a href=\"http://stackoverflow.com/questions/2912520/read-file-contents-into-a-string-in-c\" title=\"read file contents into a string in c\">stackoverflow.com/questions/2912520/&hellip;</a>"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 1, "creation_date": 1470856815, "post_id": 38881629, "comment_id": 65124727, "body": "Does your file.bin really contain UTF-16LE characters? If so, you&#39;re almost there, but you need to null-terminate data: <code>data[lSize&#47;2]=0;</code> and print the data without dereferencing it: <code>std::wcout &lt;&lt; data;</code>"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1470857776, "post_id": 38881629, "comment_id": 65125242, "body": "<i>&quot;I would really prefer C style opening/reading files&quot;</i> - Dafuq you wanna do that for?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1470858242, "post_id": 38881629, "comment_id": 65125488, "body": "What&#39;s the encoding of the file? You&#39;re only printing the first character, and if it&#39;s a BOM encoding that&#39;s not a printable character. If it&#39;s actually ASCII, you&#39;re possibly printing something that your terminal doesn&#39;t support, like \u6162 (U+6162) or \u6261 (U+6261)). (You&#39;re also forgetting to check that opening the file and reading it succeeds.)"}, {"owner": {"reputation": 65, "user_id": 5062925, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4e22c663feb80b32ceeeeac150bfb2b0?s=128&d=identicon&r=PG&f=1", "display_name": "user5062925", "link": "https://stackoverflow.com/users/5062925/user5062925"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1470859100, "post_id": 38881629, "comment_id": 65125913, "body": "@molbdnilo the file is encoded in Unicode (UTF-16LE) according to notepad, the hex values of file.bin are <code>FF FE 20 00 61 00 20 00 62 00 20 00 63 00</code> , (I&#39;ve also added some error checking)"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1470859515, "post_id": 38881629, "comment_id": 65126129, "body": "@user5062925 And those first two bytes make an unprintable character (U+FEFF, the BOM) . You need to skip the BOM if it&#39;s there."}, {"owner": {"reputation": 65, "user_id": 5062925, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4e22c663feb80b32ceeeeac150bfb2b0?s=128&d=identicon&r=PG&f=1", "display_name": "user5062925", "link": "https://stackoverflow.com/users/5062925/user5062925"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1470860304, "post_id": 38881629, "comment_id": 65126567, "body": "@molbdnilo Alright that helped a lot, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 6525134, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/22ca87aa8db2cbfc8ed6b4164e932154?s=128&d=identicon&r=PG&f=1", "display_name": "Eliyahu-Shmuel", "link": "https://stackoverflow.com/users/6525134/eliyahu-shmuel"}, "edited": false, "score": 0, "creation_date": 1470856696, "post_id": 38881728, "comment_id": 65124662, "body": "too I recomend it."}, {"owner": {"reputation": 65, "user_id": 5062925, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4e22c663feb80b32ceeeeac150bfb2b0?s=128&d=identicon&r=PG&f=1", "display_name": "user5062925", "link": "https://stackoverflow.com/users/5062925/user5062925"}, "edited": false, "score": 0, "creation_date": 1470860445, "post_id": 38881728, "comment_id": 65126628, "body": "Even though I&#39;d rather wanted to use fopen and fread, I will accept this answer."}, {"owner": {"reputation": 124, "user_id": 4951232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMsLd.png?s=128&g=1", "display_name": "Darth Futuza", "link": "https://stackoverflow.com/users/4951232/darth-futuza"}, "edited": false, "score": 0, "creation_date": 1470862657, "post_id": 38881728, "comment_id": 65127736, "body": "The link to the other question contains answers with more c-style file reading, check those out."}], "tags": [], "owner": {"reputation": 124, "user_id": 4951232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMsLd.png?s=128&g=1", "display_name": "Darth Futuza", "link": "https://stackoverflow.com/users/4951232/darth-futuza"}, "is_accepted": true, "score": 3, "last_activity_date": 1470856315, "last_edit_date": 1495542176, "creation_date": 1470856315, "answer_id": 38881728, "question_id": 38881629, "link": "https://stackoverflow.com/questions/38881629/c-reading-a-file-prints-nothing-to-console/38881728#38881728", "title": "C++ reading a file prints nothing to console", "body": "<pre><code>#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n\n  std::ifstream ifs(\"file.bin\");\n  std::string content( (std::istreambuf_iterator&lt;char&gt;(ifs) ),\n                       (std::istreambuf_iterator&lt;char&gt;()    ) );\n\n std::cout&lt;&lt;content;\n\n  return 0;\n}\n</code></pre>\n\n<p>Use std::ifstream if you're using c++.  You're making this much more complicated then you need to.  See this former <a href=\"https://stackoverflow.com/questions/2912520/read-file-contents-into-a-string-in-c\">answer</a>.</p>\n"}], "owner": {"reputation": 65, "user_id": 5062925, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4e22c663feb80b32ceeeeac150bfb2b0?s=128&d=identicon&r=PG&f=1", "display_name": "user5062925", "link": "https://stackoverflow.com/users/5062925/user5062925"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 1, "accepted_answer_id": 38881728, "answer_count": 1, "score": -4, "last_activity_date": 1470859141, "creation_date": 1470855945, "last_edit_date": 1470859141, "question_id": 38881629, "link": "https://stackoverflow.com/questions/38881629/c-reading-a-file-prints-nothing-to-console", "title": "C++ reading a file prints nothing to console", "body": "<p>I'm having trouble printing the contents of a file to console.</p>\n\n<p>file.bin contents are \"abc\".</p>\n\n<p><code>data</code> holds value, but it just doesn't print it...</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    wchar_t *data;\n\n    FILE* file;\n    int err = _wfopen_s(&amp;file, L\"file.bin\", L\"rb\");\n\n    if (err != 0) \n    {\n      std::cout &lt;&lt; \"Error\";\n      return 0;\n    }\n\n    fseek(file, 0, SEEK_END);\n    long lSize;\n    lSize = ftell(file);\n    rewind(file);\n\n    data = (wchar_t *)malloc(lSize + 1);\n\n    fread(data, 1, lSize, file);\n\n    //dereference pointer\n    wchar_t data2 = *data;\n    std::wcout &lt;&lt; data2; // prints nothing...\n\n    system(\"PAUSE\");\n    return 0;\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>I know about <code>fstream</code> but I would really prefer C style opening/reading files.</p>\n"}, {"tags": ["c++", "linux", "gcc", "position-independent-code"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1470855834, "post_id": 38881505, "comment_id": 65124183, "body": "If you haven&#39;t already used a profiler to profile each of the scenarios you have presented you really should do that."}, {"owner": {"reputation": 5824, "user_id": 781743, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d19aed08825cbb3a52289ce9d5613035?s=128&d=identicon&r=PG", "display_name": "graywolf", "link": "https://stackoverflow.com/users/781743/graywolf"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1470856576, "post_id": 38881505, "comment_id": 65124597, "body": "I&#39;m just setting up a build system, don&#39;t really have anything to profile yet"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1470857691, "post_id": 38881505, "comment_id": 65125198, "body": "Well the only way you&#39;re going to get a definitive answer on performance is to run it in a profiler. Probably best to do first rather than asking people to speculate on what the outcome might be."}, {"owner": {"reputation": 5824, "user_id": 781743, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d19aed08825cbb3a52289ce9d5613035?s=128&d=identicon&r=PG", "display_name": "graywolf", "link": "https://stackoverflow.com/users/781743/graywolf"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1470859730, "post_id": 38881505, "comment_id": 65126255, "body": "point to asking this question was that I&#39;m surely not the first one to encounter this problem"}, {"owner": {"reputation": 192274, "user_id": 36565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ccfec45e3fba785daf0e89a797c9216?s=128&d=identicon&r=PG", "display_name": "David Rodr&#237;guez - dribeas", "link": "https://stackoverflow.com/users/36565/david-rodr%c3%adguez-dribeas"}, "edited": false, "score": 0, "creation_date": 1470863121, "post_id": 38881505, "comment_id": 65127940, "body": "The actual architecture that you are targeting is quite relevant for the question. We run these tests for some of our own code and the impact (for our own code, mileage can vary) was minimal for x86_64, but quite noticeable for SPARC, with x86_32 somewhere in between."}, {"owner": {"reputation": 5824, "user_id": 781743, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d19aed08825cbb3a52289ce9d5613035?s=128&d=identicon&r=PG", "display_name": "graywolf", "link": "https://stackoverflow.com/users/781743/graywolf"}, "reply_to_user": {"reputation": 192274, "user_id": 36565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ccfec45e3fba785daf0e89a797c9216?s=128&d=identicon&r=PG", "display_name": "David Rodr&#237;guez - dribeas", "link": "https://stackoverflow.com/users/36565/david-rodr%c3%adguez-dribeas"}, "edited": false, "score": 0, "creation_date": 1470864153, "post_id": 38881505, "comment_id": 65128420, "body": "@DavidRodr&#237;guez-dribeas oh, good point, I added the architecture. mostly targeting amd64."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1470864316, "post_id": 38881505, "comment_id": 65128503, "body": "While that may be true it&#39;s still a reflection of the lack of research and investigation done on your part. If you had does that part of the research you would already have your answer."}], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 12754117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ca990c146b0db5ab4d4ab6c359f413e?s=128&d=identicon&r=PG&f=1", "display_name": "rjhcnf", "link": "https://stackoverflow.com/users/12754117/rjhcnf"}, "is_accepted": false, "score": 0, "last_activity_date": 1582292172, "creation_date": 1582292172, "answer_id": 60339753, "question_id": 38881505, "link": "https://stackoverflow.com/questions/38881505/pic-performance-in-static-libraries/60339753#60339753", "title": "PIC performance in static libraries", "body": "<p>The downside to PIC is a modest degradation in application performance (often 5 to 15 percent)</p>\n"}], "owner": {"reputation": 5824, "user_id": 781743, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d19aed08825cbb3a52289ce9d5613035?s=128&d=identicon&r=PG", "display_name": "graywolf", "link": "https://stackoverflow.com/users/781743/graywolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 586, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1582292172, "creation_date": 1470855542, "last_edit_date": 1470864069, "question_id": 38881505, "link": "https://stackoverflow.com/questions/38881505/pic-performance-in-static-libraries", "title": "PIC performance in static libraries", "body": "<p>I'm using <code>yaml-cpp</code> library, which by default generates position dependent static library (<code>libyaml-cpp.a</code>). My own library compiles into two versions, static and shared. Since I need shared one, I have to turn on PIC for the <code>yaml-cpp</code> (that's the easy part). Now however, do I suffer performance hit in the static library? If yes, how big?</p>\n\n<p>Basically, I have three options:</p>\n\n<ol>\n<li>compile <code>yaml-cpp</code> twice, once position dependent and once PIC, link appropriate onces into mine shared and static library\n\n<ul>\n<li>Pros: probably best perfomance wise, both mine shared and static and use same object files (meaning .cpp are compiled only once)</li>\n<li>Cons: probably most setup, <code>yaml-cpp</code> will be compiled twice but that should not matter, I'll be not changing it (that often)</li>\n</ul></li>\n<li>compile <code>yaml-cpp</code> once as PIC, link it into mine shared (PIC) and static (not PIC)\n\n<ul>\n<li>Pros: easy to setup</li>\n<li>Cons: source codes need to compile twice (shared (PIC), static (non PIC))</li>\n</ul></li>\n<li>compile <code>yaml-cpp</code> once as PIC and compile both mine (shared &amp; static) as PIC too\n\n<ul>\n<li>Pros: easy to setup</li>\n<li>Cons: slight perfomance hit in static one?</li>\n</ul></li>\n</ol>\n\n<p>So the option 1 seems like the best one. Do I have any false assumptions in my summary? Or did I miss any other option?</p>\n\n<p>Platform: amd64</p>\n"}, {"tags": ["c++", "class", "definition"], "comments": [{"owner": {"reputation": 1580, "user_id": 6667256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c939d82ad703536dcfc9f9eee6dd819?s=128&d=identicon&r=PG&f=1", "display_name": "Franck", "link": "https://stackoverflow.com/users/6667256/franck"}, "edited": false, "score": 3, "creation_date": 1470855170, "post_id": 38881319, "comment_id": 65123794, "body": "variables and types should have different names. The declaration <code>button* button</code> is likely to cause problems. That&#39;s why class and variables usually use different conventions (ex: start with a lowercase for variables&#39; names and an uppercase for classes&#39; names)."}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 5, "creation_date": 1470855213, "post_id": 38881319, "comment_id": 65123822, "body": "Why don&#39;t you split <i>implementation</i> and <i>declaration</i> in different files, respectively <i>-cpp</i> and <i>.hpp</i>? You should avoid that kind of problems"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470855413, "post_id": 38881319, "comment_id": 65123936, "body": "Look up &quot;forward declaration&quot;. And also &quot;circular dependency&quot;."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1470855414, "post_id": 38881319, "comment_id": 65123938, "body": "Use separate headers and implementation files. This ain&#39;t Java. (This is covered in your fine C++ book.)"}, {"owner": {"reputation": 247, "user_id": 5890294, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Xcy0u.png?s=128&g=1", "display_name": "AstroRP", "link": "https://stackoverflow.com/users/5890294/astrorp"}, "reply_to_user": {"reputation": 1580, "user_id": 6667256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c939d82ad703536dcfc9f9eee6dd819?s=128&d=identicon&r=PG&f=1", "display_name": "Franck", "link": "https://stackoverflow.com/users/6667256/franck"}, "edited": false, "score": 1, "creation_date": 1470855507, "post_id": 38881319, "comment_id": 65124002, "body": "@Franck tried to change <code>button</code> (variable name) to <code>b</code> and so with label, that didn&#39;t do anything"}], "owner": {"reputation": 247, "user_id": 5890294, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Xcy0u.png?s=128&g=1", "display_name": "AstroRP", "link": "https://stackoverflow.com/users/5890294/astrorp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1470855602, "answer_count": 0, "score": 1, "last_activity_date": 1470854972, "creation_date": 1470854972, "question_id": 38881319, "link": "https://stackoverflow.com/questions/38881319/classes-need-the-definition-of-each-other-how-to-define-them", "closed_reason": "Duplicate", "title": "Classes need the definition of each other. How to define them?", "body": "<p>I'm trying to make gui (buttons, etc.) in Allegro, and I have some problems.\nSo far there are three classes: screen, button, label. \nThe (simplified) code looks like this:</p>\n\n<p>gui.h:</p>\n\n<pre><code>class button;\nclass label;\nclass screen;    \n\nclass screen {\n    typedef boost::variant&lt; button*, label* &gt; gui_element;\n    std::vector&lt;gui_element&gt; elements;\n\npublic:\n    ALLEGRO_COLOR background_col;\n    void add(button *button) {\n        elements.push_back(button);\n    }\n    void add(label *label) {\n        elements.push_back(label);\n    }\n\n    class draw_visitor : public boost::static_visitor&lt;&gt;\n    {\n    public:\n        void operator()(button *button) const\n        {\n            button-&gt;draw(); //C2027: use of undefined type 'button'\n                            //C2227: left of 'draw' must point to class/struct/union/generic type\n        }\n        void operator()(label *label) const\n        {\n            label-&gt;draw();  //Same here\n        }\n\n    };\n\n    void draw() {\n        al_clear_to_color(background_col);\n\n        for (u_int i = 0; i &lt; elements.size(); i++) {\n            boost::apply_visitor(draw_visitor(), elements[i]);\n        }\n\n        al_flip_display();\n    }\n};\n#include \"button.h\"\n#include \"label.h\"\n</code></pre>\n\n<p>button.h:</p>\n\n<pre><code>class button {\npublic:\n    button(screen *scr)\n    {\n        scr-&gt;add(this);\n    }\n    void draw() {\n    //draw the button\n    }\n};\n</code></pre>\n\n<p>(label.h is the same but with labels)</p>\n\n<p>This code gives some errors (see the comments in the code).</p>\n\n<p>Moving screen's definition after the #includes give a similar error, but inside button's and label's constructor:\n<code>scr-&gt;add(this)</code> Use of undefined type 'screen'; Left of '->add' must point to class/struct/union/generic type</p>\n\n<p>So, how could I define them?</p>\n"}, {"tags": ["c++", "compilation", "floating-point", "double", "denormalization"], "comments": [{"owner": {"reputation": 337, "user_id": 6636350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tm4aDcd-6Ig/AAAAAAAAAAI/AAAAAAAAATM/HXrZmHRW_V0/photo.jpg?sz=128", "display_name": "Shaun Ramsey", "link": "https://stackoverflow.com/users/6636350/shaun-ramsey"}, "edited": false, "score": 0, "creation_date": 1470855109, "post_id": 38881222, "comment_id": 65123766, "body": "As a test, perhaps you can set a var to denorm_min and then check whether it is equal to denorm_min or min?"}, {"owner": {"reputation": 367, "user_id": 2019840, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e9d91a2be13694b8a4c53dace014114?s=128&d=identicon&r=PG", "display_name": "RAs", "link": "https://stackoverflow.com/users/2019840/ras"}, "reply_to_user": {"reputation": 337, "user_id": 6636350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tm4aDcd-6Ig/AAAAAAAAAAI/AAAAAAAAATM/HXrZmHRW_V0/photo.jpg?sz=128", "display_name": "Shaun Ramsey", "link": "https://stackoverflow.com/users/6636350/shaun-ramsey"}, "edited": false, "score": 0, "creation_date": 1470856126, "post_id": 38881222, "comment_id": 65124357, "body": "@ShaunRamsey You mean assigning <code>x = denorm_min()</code> and then testing <code>if(x==denorm_min())</code> because if normalization is not being done, then x would stay equal to denorm_min, otherwise it would be forced to be equal min()?"}, {"owner": {"reputation": 337, "user_id": 6636350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tm4aDcd-6Ig/AAAAAAAAAAI/AAAAAAAAATM/HXrZmHRW_V0/photo.jpg?sz=128", "display_name": "Shaun Ramsey", "link": "https://stackoverflow.com/users/6636350/shaun-ramsey"}, "edited": false, "score": 0, "creation_date": 1470856968, "post_id": 38881222, "comment_id": 65124803, "body": "I think @Nicol Bolas&#39;s answer is better. But yes that&#39;s the test I was preposing."}, {"owner": {"reputation": 337, "user_id": 6636350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tm4aDcd-6Ig/AAAAAAAAAAI/AAAAAAAAATM/HXrZmHRW_V0/photo.jpg?sz=128", "display_name": "Shaun Ramsey", "link": "https://stackoverflow.com/users/6636350/shaun-ramsey"}, "edited": false, "score": 2, "creation_date": 1470858117, "post_id": 38881222, "comment_id": 65125420, "body": "Also, doesn&#39;t denorm_min return min if has_denorm is denorm_absent?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 337, "user_id": 6636350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tm4aDcd-6Ig/AAAAAAAAAAI/AAAAAAAAATM/HXrZmHRW_V0/photo.jpg?sz=128", "display_name": "Shaun Ramsey", "link": "https://stackoverflow.com/users/6636350/shaun-ramsey"}, "edited": false, "score": 0, "creation_date": 1470858546, "post_id": 38881222, "comment_id": 65125629, "body": "@ShaunRamsey: Yes, it does."}], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 2019840, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e9d91a2be13694b8a4c53dace014114?s=128&d=identicon&r=PG", "display_name": "RAs", "link": "https://stackoverflow.com/users/2019840/ras"}, "edited": false, "score": 0, "creation_date": 1470858320, "post_id": 38881389, "comment_id": 65125527, "body": "Thanks for the details! So, if I understood you correctly, &quot;trusting the implementation&quot; here would mean that I could do a simple test like 1) <code>x = std::numeric_limits&lt;float&gt;::denorm_min()</code> and then 2) <code>if(x==1.17549435E-38f)</code>? Or, maybe even better, <code>if(std::numeric_limits&lt;float&gt;::min() == std::numeric_limits&lt;float&gt;::denorm_min())</code>?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 367, "user_id": 2019840, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e9d91a2be13694b8a4c53dace014114?s=128&d=identicon&r=PG", "display_name": "RAs", "link": "https://stackoverflow.com/users/2019840/ras"}, "edited": false, "score": 0, "creation_date": 1470858425, "post_id": 38881389, "comment_id": 65125576, "body": "@user2019840: What I mean by &quot;trust the implementation&quot; is to simply check <code>has_denorm</code>. If that value is <code>denorm_present</code>, then you should assume that it won&#39;t arbitrarily flush denormalized values."}, {"owner": {"reputation": 367, "user_id": 2019840, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e9d91a2be13694b8a4c53dace014114?s=128&d=identicon&r=PG", "display_name": "RAs", "link": "https://stackoverflow.com/users/2019840/ras"}, "edited": false, "score": 0, "creation_date": 1470858575, "post_id": 38881389, "comment_id": 65125644, "body": "Ah, got it, now I see what you mean. That&#39;s clever, because it&#39;s indeed a simple solution. Many thanks"}, {"owner": {"reputation": 367, "user_id": 2019840, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e9d91a2be13694b8a4c53dace014114?s=128&d=identicon&r=PG", "display_name": "RAs", "link": "https://stackoverflow.com/users/2019840/ras"}, "edited": false, "score": 0, "creation_date": 1470859141, "post_id": 38881389, "comment_id": 65125931, "body": "I went with your more elegant solution and it works perfectly. But just for the sake of completeness, I tried what I commented before and it seems that <code>x = std::numeric_limits&lt;float&gt;::denorm_min()</code> returns zero when flush-to-zero is enabled."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 5, "last_activity_date": 1470858511, "last_edit_date": 1470858511, "creation_date": 1470855208, "answer_id": 38881389, "question_id": 38881222, "link": "https://stackoverflow.com/questions/38881222/using-c-is-there-a-way-to-detect-whether-floats-doubles-denormals-are-being/38881389#38881389", "title": "Using C++, is there a way to detect whether floats/doubles denormals are being &quot;normalized&quot; by the compiler/system?", "body": "<p>You should simply trust the implementation to return <a href=\"http://en.cppreference.com/w/cpp/types/numeric_limits\" rel=\"nofollow\">the correct values for <code>std::numeric_limits</code></a>. If <a href=\"http://en.cppreference.com/w/cpp/types/numeric_limits/has_denorm\" rel=\"nofollow\"><code>std::numeric_limits&lt;float&gt;::has_denorm</code> is <code>std::denorm_present</code></a>, then you should assume that regular C++ operators will not implicitly normalize floating-point values.</p>\n\n<p>Note that this is a separate query from <a href=\"http://en.cppreference.com/w/cpp/types/numeric_limits/is_iec559\" rel=\"nofollow\"><code>std::numeric_limits&lt;float&gt;::has_iec559</code></a>, which tests for the usage of IEC-559/IEEE-754 floats. So a system can use IEEE-754 floats, but not support denormalized floats. Therefore, implementations which always flush denormalized floats to zero ought to return <code>std::denorm_absent</code> for <code>has_denorm</code>.</p>\n"}], "owner": {"reputation": 367, "user_id": 2019840, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e9d91a2be13694b8a4c53dace014114?s=128&d=identicon&r=PG", "display_name": "RAs", "link": "https://stackoverflow.com/users/2019840/ras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "accepted_answer_id": 38881389, "answer_count": 1, "score": 3, "last_activity_date": 1470858511, "creation_date": 1470854595, "question_id": 38881222, "link": "https://stackoverflow.com/questions/38881222/using-c-is-there-a-way-to-detect-whether-floats-doubles-denormals-are-being", "title": "Using C++, is there a way to detect whether floats/doubles denormals are being &quot;normalized&quot; by the compiler/system?", "body": "<p>Putting it directly, my question is precisely as stated in the title: in an application being written using C++, is there a way to detect whether floats/doubles denormals are being \"normalized\" by the compiler/system (e.g. trough DAZ, FTZ, etc)?</p>\n\n<p>If context is needed, what I am trying to accomplish is to detect programaticaly the minimal float/double values. These results, however, depend on whether denormals are or not being \"normalized\": if they are, the minimal values are given by std's numeric limits min(), otherwise it's given by denorm_min().</p>\n"}, {"tags": ["c++", "macos", "g++", "sdl-2"], "comments": [{"owner": {"reputation": 566, "user_id": 3923799, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4563a74caf6b13d3fe6ba307ee01b10f?s=128&d=identicon&r=PG&f=1", "display_name": "Andy M", "link": "https://stackoverflow.com/users/3923799/andy-m"}, "edited": false, "score": 1, "creation_date": 1470854835, "post_id": 38881208, "comment_id": 65123614, "body": "It looks like the SDL2 folder is not in your path (<code>brew info SDL2</code> should show you where this is), point there with the -I flag (capital i for include)"}, {"owner": {"reputation": 337, "user_id": 6636350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tm4aDcd-6Ig/AAAAAAAAAAI/AAAAAAAAATM/HXrZmHRW_V0/photo.jpg?sz=128", "display_name": "Shaun Ramsey", "link": "https://stackoverflow.com/users/6636350/shaun-ramsey"}, "edited": false, "score": 0, "creation_date": 1470854932, "post_id": 38881208, "comment_id": 65123662, "body": "Definitely a duplicate of: <a href=\"http://stackoverflow.com/questions/20277477/how-do-you-include-files-in-c-from-the-library-framework-folder-in-mac\" title=\"how do you include files in c from the library framework folder in mac\">stackoverflow.com/questions/20277477/&hellip;</a>"}, {"owner": {"reputation": 41, "user_id": 6352529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f51e417b604504bad96fa586ecb0aeb5?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Ferretti", "link": "https://stackoverflow.com/users/6352529/nicholas-ferretti"}, "edited": false, "score": 0, "creation_date": 1470854937, "post_id": 38881208, "comment_id": 65123665, "body": "/usr/local/Cellar/SDL2/2.0.4     -This is what gets returned from brew info SDL2"}], "owner": {"reputation": 41, "user_id": 6352529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f51e417b604504bad96fa586ecb0aeb5?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Ferretti", "link": "https://stackoverflow.com/users/6352529/nicholas-ferretti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4941, "favorite_count": 0, "closed_date": 1470854899, "answer_count": 0, "score": 2, "last_activity_date": 1470854522, "creation_date": 1470854522, "question_id": 38881208, "link": "https://stackoverflow.com/questions/38881208/sdl2-sdl-h-file-not-found-mac", "closed_reason": "Duplicate", "title": "&#39;SDL2/SDL.h&#39; file not found mac", "body": "<p>I am trying to include the SDL library in my c++ project. I have installed the SDL2.framework and included it in Library/Frameworks. I have also run the following commands in the terminal:</p>\n\n<pre><code>brew install SDL2\nbrew install SDL2_Image\n</code></pre>\n\n<p>However, when I try to compile using my makefile:</p>\n\n<pre><code>OBJS=texture.cpp window.cpp\n\nLFLAGS=-lSDL2 -lSDL2_image\nCURRDIR=`pwd`\n.PHONY: test\n\nall: test\n\ntest: $(OBJS) test.o\n    g++ -std=c++11 -Wall $(OBJS) test.o $(LFLAGS)\n\ntest.o: test.cpp\n    g++ -c -std=c++11 -DSPRITEFILENAME=\"\\\"$(CURRDIR)/sprites.png\\\"\" -Wall test.cpp -o test.o\n</code></pre>\n\n<p>I get the following error: </p>\n\n<pre><code>./texture.h:7:10: fatal error: 'SDL2/SDL.h' file not found\n#include &lt;SDL2/SDL.h&gt;\n         ^\n1 error generated.\nmake: *** [test.o] Error 1\n</code></pre>\n\n<p>Any help will be appreciated.</p>\n"}, {"tags": ["c++", "c", "pthreads", "posix", "ada"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 5, "creation_date": 1470854149, "post_id": 38881052, "comment_id": 65123246, "body": "Possibly because C and C++ are different languages? Identical syntax does not imply identical semantics."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 5, "creation_date": 1470854436, "post_id": 38881052, "comment_id": 65123403, "body": "You should not be treating pointers to functions as pointers to objects \u2014 they aren&#39;t guaranteed to be the same size, even in C (though they commonly are the same size).  C++ is fussier about such issues; you have to explicitly convert <code>void *</code> to the desired type, whereas C does that casually for you \u2014 one of the reasons C++ programmers are leery of C at times.  Succinctly, there&#39;s lots of C code that is not valid C++ code; your function is one example of such code."}, {"owner": {"reputation": 22472, "user_id": 40851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RwWVj.jpg?s=128&g=1", "display_name": "Simon Wright", "link": "https://stackoverflow.com/users/40851/simon-wright"}, "edited": false, "score": 0, "creation_date": 1470855903, "post_id": 38881052, "comment_id": 65124221, "body": "Your C function doesn\u2019t seem to add any value over just using <code>pthread_create()</code> directly. In fact, you lose the thread id <code>pthread_t</code>."}, {"owner": {"reputation": 105, "user_id": 5921147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de28daa68dc73d0cd8e8e0a2869403b9?s=128&d=identicon&r=PG&f=1", "display_name": "Nautilus", "link": "https://stackoverflow.com/users/5921147/nautilus"}, "reply_to_user": {"reputation": 22472, "user_id": 40851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RwWVj.jpg?s=128&g=1", "display_name": "Simon Wright", "link": "https://stackoverflow.com/users/40851/simon-wright"}, "edited": false, "score": 0, "creation_date": 1470858920, "post_id": 38881052, "comment_id": 65125822, "body": "@SimonWright Yes I know that.This rest of the function is not EXACTLY the same. This was more of for clarity purposes."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1470865804, "post_id": 38881052, "comment_id": 65129100, "body": "Your compiler is actually obligated to issue a diagnostic message about this in C, provided you have the correct prototype for <code>pthread_create()</code> visible when you call it. There is no implicit conversion from <code>void*</code> to function-pointer type, this is a constraint violation."}, {"owner": {"reputation": 507, "user_id": 987209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe9053cd9e9543a6876166643da34679?s=128&d=identicon&r=PG", "display_name": "darkestkhan", "link": "https://stackoverflow.com/users/987209/darkestkhan"}, "edited": false, "score": 1, "creation_date": 1470996874, "post_id": 38881052, "comment_id": 65188032, "body": "Out of curiosity, what is the point of passing address to Ada function into pthread instead of using native Ada threading (tasking)?"}], "answers": [{"tags": [], "owner": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "is_accepted": true, "score": 10, "last_activity_date": 1470854777, "last_edit_date": 1470854777, "creation_date": 1470854288, "answer_id": 38881128, "question_id": 38881052, "link": "https://stackoverflow.com/questions/38881052/differences-between-pthread-in-c-vs-c/38881128#38881128", "title": "Differences between Pthread in C vs C++", "body": "<p>Implicit type conversions in C++ are much more strict than in C. The <code>void * function</code> parameter can't be used as function pointer in C++ or C...</p>\n\n<p>You need <code>void* (*function)(void*)</code> in your function prototype.</p>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 5921147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de28daa68dc73d0cd8e8e0a2869403b9?s=128&d=identicon&r=PG&f=1", "display_name": "Nautilus", "link": "https://stackoverflow.com/users/5921147/nautilus"}, "edited": false, "score": 0, "creation_date": 1470858743, "post_id": 38881497, "comment_id": 65125737, "body": "How would I create a thread that runs a function using the c++ standard thread library when all i have is the address ( pointer ) to the function that is passed in from Ada?"}], "tags": [], "owner": {"reputation": 6779, "user_id": 1691223, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/c2AsP.jpg?s=128&g=1", "display_name": "Shravan40", "link": "https://stackoverflow.com/users/1691223/shravan40"}, "is_accepted": false, "score": 1, "last_activity_date": 1470855513, "last_edit_date": 1495540856, "creation_date": 1470855513, "answer_id": 38881497, "question_id": 38881052, "link": "https://stackoverflow.com/questions/38881052/differences-between-pthread-in-c-vs-c/38881497#38881497", "title": "Differences between Pthread in C vs C++", "body": "<p>As mentioned by <a href=\"https://stackoverflow.com/users/5271927/kiiv\">KIIV</a> implicit type conversions in C++ are much more strict than in C.</p>\n\n<p><code>void* (*function) (void*)</code></p>\n\n<p>This is a pointer to a function which takes one <code>void*</code> argument and returns <code>void*</code>.</p>\n\n<p>To get rid of your errors in C++, change your function to return <code>void *</code>, and pass it without type-casting it. The return from the thread function can be a simple return <code>NULL</code> if you don't care about the value.</p>\n\n<p>There are various other issues with using this C library directly from C++; in particular, for portability, the thread entry function should be <code>extern \"C\"</code>. Good practice should be using the standard C++ thread library (or Boost's implementation, if you're stuck with a pre-2011 version of the language).</p>\n"}], "owner": {"reputation": 105, "user_id": 5921147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de28daa68dc73d0cd8e8e0a2869403b9?s=128&d=identicon&r=PG&f=1", "display_name": "Nautilus", "link": "https://stackoverflow.com/users/5921147/nautilus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1183, "favorite_count": 0, "accepted_answer_id": 38881128, "answer_count": 2, "score": 1, "last_activity_date": 1470855513, "creation_date": 1470853982, "question_id": 38881052, "link": "https://stackoverflow.com/questions/38881052/differences-between-pthread-in-c-vs-c", "title": "Differences between Pthread in C vs C++", "body": "<p>So I was able to pass an Ada function using Ada_function'Address to a C_function. Here is the C function: </p>\n\n<pre><code>void Create_Process(int * status, void * function) {\n    pthread_t new_thread;\n\n    //creating function with the given function and no arguments.\n    *status = pthread_create(&amp;new_thread, NULL, function, NULL);\n}\n</code></pre>\n\n<p>This worked perfectly fine. My problem is when I try to use this same function in C++. It fails at compiling with the error:</p>\n\n<pre><code>error: invalid conversion from \u2018void*\u2019 to \u2018void* (*)(void*)\u2019 [-fpermissive]\n*status = pthread_create(&amp;new_thread, NULL, function, NULL);\n</code></pre>\n\n<p>Is there any reason that this works / compiles in C but not C++?</p>\n"}, {"tags": ["c++", "ubuntu", "gdb", "mmap"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470854266, "post_id": 38881042, "comment_id": 65123326, "body": "Is that really a valid address? It reads like <code>deadbEEF</code> at a page-address."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470854536, "post_id": 38881042, "comment_id": 65123453, "body": "Any reason you changed the language? (and then remove the tag of the wrong language)."}, {"owner": {"reputation": 203, "user_id": 6524939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66c08308e85fe4e732ca7278a75ada7?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/6524939/robert"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470854642, "post_id": 38881042, "comment_id": 65123524, "body": "I wrote an easily distinguishable address for the simplistic example. The actual address is a random address along the lines of 0x7fffec4000"}, {"owner": {"reputation": 203, "user_id": 6524939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66c08308e85fe4e732ca7278a75ada7?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/6524939/robert"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470854681, "post_id": 38881042, "comment_id": 65123546, "body": "I&#39;m writing in c++ but my problem comes code that&#39;s not specific to c++"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470857244, "post_id": 38881042, "comment_id": 65124953, "body": "You should use the actual address. Such like the one used are missleading; good programmers trigger to patterns."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 1, "creation_date": 1470860665, "post_id": 38881042, "comment_id": 65126736, "body": "What type of object is being mmapped? I&#39;ve heard accounts of <code>ptrace</code> failing to access memory that has been mmapped to device special files. Also, can you add a tag that identifies your OS?"}, {"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1470896358, "post_id": 38881042, "comment_id": 65137476, "body": "@MarkPlotnick <i>&quot;I&#39;ve heard accounts&quot;</i> -&gt; Actually, it&#39;s true. I&#39;ve experienced it myself while developing on Linux for a device with memory-mapped registers and a badly coded kernel driver. The code <a href=\"https://github.com/torvalds/linux/blob/d52bd54db8be8999df6df5a776f38c4f8b5e9cea/mm/memory.c#L3871\" rel=\"nofollow noreferrer\">here</a> rejects reads or writes to <code>VM_IO&#47;VM_PFNMAP</code> memory unless the driver defined a <code>vm_ops-&gt;access</code> getter function that encodes the knowledge about how to read that region of memory. I ended up hacking GDBserver into translating reads from that region into reads of its own device memory mapping."}, {"owner": {"reputation": 649, "user_id": 5602491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2426d2645029b0fa49495a956020ee66?s=128&d=identicon&r=PG&f=1", "display_name": "gilez", "link": "https://stackoverflow.com/users/5602491/gilez"}, "edited": false, "score": 0, "creation_date": 1470947504, "post_id": 38881042, "comment_id": 65169655, "body": "See <a href=\"http://stackoverflow.com/questions/3640095/gdb-cant-access-mmapd-kernel-allocated-memory\" title=\"gdb cant access mmapd kernel allocated memory\">stackoverflow.com/questions/3640095/&hellip;</a>"}], "owner": {"reputation": 203, "user_id": 6524939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66c08308e85fe4e732ca7278a75ada7?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/6524939/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 876, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470893034, "creation_date": 1470853957, "last_edit_date": 1470893034, "question_id": 38881042, "link": "https://stackoverflow.com/questions/38881042/gdb-cannot-access-memory-i-mmap", "title": "GDB cannot access memory I mmap", "body": "<p>In my code I mmap some memory and can read and write from it. For some reason when I run the code in gdb though, gbd can't access it. What's the problem?</p>\n\n<p>The code in question</p>\n\n<pre><code>cout &lt;&lt; \"creating temp\" &lt;&lt; endl;\nint *temp = mmap(... PROT_READ | PROT_WRITE ...);\n*temp = 5;\ncout &lt;&lt; \"temp = \" &lt;&lt; *temp &lt;&lt; endl;\n</code></pre>\n\n<p>The output when ran</p>\n\n<pre><code>creating temp\ntemp = 5\n</code></pre>\n\n<p>My gdb prompt</p>\n\n<pre><code>(gdb) n  \n77        *temp = 5;  \n(gdb) p temp  \n$1 = (int *)0x7fffec4000;   \n(gdb) x temp  \n0x7fffec4000: cannot access memory at 0x7fffec4000  \n(gdb) n  \n78        cout &lt;&lt; \"temp = \" &lt;&lt; *temp &lt;&lt; endl;\n(gdb) x temp  \n0x7fffec4000: cannot access memory at 0x7fffec4000\n(gdb) n\ntemp = 5\n(gdb) x temp  \n0x7fffec4000: cannot access memory at 0x7fffec4000\n</code></pre>\n"}, {"tags": ["c++", "windows", "gcc", "mingw", "mingw32"], "comments": [{"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1470854149, "post_id": 38881021, "comment_id": 65123245, "body": "what shell are you using? Anyway, try with double slashes \\\\ or just use /"}, {"owner": {"reputation": 67, "user_id": 3739187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8695fc5fad44f5d075dea1762a1097ca?s=128&d=identicon&r=PG&f=1", "display_name": "codechao", "link": "https://stackoverflow.com/users/3739187/codechao"}, "reply_to_user": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1470854454, "post_id": 38881021, "comment_id": 65123415, "body": "doing / worked. Different error now, but its at least further along, and I&#39;m not stuck anymore, even if I might be again soon, but it seems like a different problem at least. Still very strange things happening. Lots of /../ being put in the path."}], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 3739187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8695fc5fad44f5d075dea1762a1097ca?s=128&d=identicon&r=PG&f=1", "display_name": "codechao", "link": "https://stackoverflow.com/users/3739187/codechao"}, "is_accepted": true, "score": 0, "last_activity_date": 1470854322, "creation_date": 1470854322, "answer_id": 38881139, "question_id": 38881021, "link": "https://stackoverflow.com/questions/38881021/mingw-gcc-exe-removing-all-from-path/38881139#38881139", "title": "MinGW GCC.exe removing all \\ from path", "body": "<p>The problem was that the person who wrote the cmd put it in \\ path form when it needed to be in / path form for the shell I was in. A different problem shows up now related to permission denied</p>\n"}], "owner": {"reputation": 67, "user_id": 3739187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8695fc5fad44f5d075dea1762a1097ca?s=128&d=identicon&r=PG&f=1", "display_name": "codechao", "link": "https://stackoverflow.com/users/3739187/codechao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 38881139, "answer_count": 1, "score": 1, "last_activity_date": 1470854322, "creation_date": 1470853881, "question_id": 38881021, "link": "https://stackoverflow.com/questions/38881021/mingw-gcc-exe-removing-all-from-path", "title": "MinGW GCC.exe removing all \\ from path", "body": "<p>I am not really sure what's going on here. I'm trying to compile <a href=\"https://github.com/LRN/libntlink\" rel=\"nofollow\">https://github.com/LRN/libntlink</a> so I can easily port this Unix call-reliant code (that project provides windows implementations of symlink() lstat() and macros like S_ISDIR. </p>\n\n<p>Anyway, when I run the supplied cmd file (after changing the variables to point to the right path), I get this:</p>\n\n<pre><code>gcc  c:\\MinGW\\lib\\gcc\\mingw32\\4.9.3\\include;c:\\MinGW\\include -I. -O3 -fno-common\n-Wall -mms-bitfields -D_WIN32_WINNT=0x600 -o juncpoint.o -c juncpoint.c\ngcc.exe: error: c:MinGWlibgccmingw324.9.3include: No such file or directory\n</code></pre>\n\n<p>It seems like for some reason all \\ are being totally removed from path sometime before gcc.exe parses it to find its stuff. The same thing is happening with c:\\MinGW\\include. I looked through the makefile, and although I have trouble reading it, I didn't see anything that seemed like it would cause this. This isn't my first time using MinGW, and although the first time failed too, it was for a different reason.</p>\n"}, {"tags": ["c++", "boost-asio"], "comments": [{"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1470859436, "post_id": 38880676, "comment_id": 65126083, "body": "I am not sure how you compiled this, as I do not find any global wrap functions. Using the member level wrap, I could not see the assert happening though"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1470860661, "post_id": 38880676, "comment_id": 65126731, "body": "@Arunmu this is not boost::asio. it&#39;s the standalone version 1.11.0"}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1470861948, "post_id": 38880676, "comment_id": 65127379, "body": "Yeah, even I am using the standalone version 1.11.0 (header only). <code>g++ -std=c++11 -DASIO_STANDALONE  -o wrap_test wrap_test.cc -I &#47;Users&#47;arunmu&#47;asio-master&#47;asio&#47;include&#47;</code> is how I am building it."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1470862504, "post_id": 38880676, "comment_id": 65127669, "body": "@Arunmu may I ask where you downloaded your version?"}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1470862882, "post_id": 38880676, "comment_id": 65127839, "body": "It&#39;s been quite a while since I had this downloaded. I think it was from <a href=\"http://think-async.com/\" rel=\"nofollow noreferrer\">think-async.com</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1470901764, "post_id": 38889147, "comment_id": 65140622, "body": "Did it just get more complicated ?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 2, "creation_date": 1470906154, "post_id": 38889147, "comment_id": 65143239, "body": "@Arunmu not from the client users perspective. Service implementors (like me) have some new skills to learn, but the changes are good - particularly being able to carry move-only objects into completion handlers (such as futures), which is what I am doing here."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 5, "last_activity_date": 1470898070, "creation_date": 1470898070, "answer_id": 38889147, "question_id": 38880676, "link": "https://stackoverflow.com/questions/38880676/asio-1-11-0-standalone-wrap-not-correct-or-is-it-me/38889147#38889147", "title": "asio 1.11.0 standalone wrap not correct... or is it me?", "body": "<p>Turns out that it was my misunderstanding.</p>\n\n<p>Here's a copy of the reply by Asio's author:</p>\n\n<blockquote>\n  <p>Hi Richard,</p>\n  \n  <p>Yes this behaviour is deliberate. However, in the networking TS and\n  the latest code on the master branch this facility has been renamed\n  from wrap (which implied adding another layer as you expected) to\n  bind_executor. This function simply imbues the object with an\n  associated executor; if it already had one it is overridden.</p>\n  \n  <p>If you need true wrapping then you should explicitly wrap your inner\n  handler in an outer function object (or lambda), and have the outer\n  handler dispatch() the inner handler on its \"associated executor\". As\n  you're writing your own asynchronous operation, I suggest adopting the\n  following pattern (documented in the networking TS as part of the\n  \"requirements on asynchronous operations\"):</p>\n  \n  <ul>\n  <li><p>Ask the handler for its associated executor using get_associated_executor.</p></li>\n  <li><p>post() the handler to that executor if your operation finishes immediately.</p></li>\n  <li><p>dispatch() the handler to that executor otherwise.</p></li>\n  </ul>\n  \n  <p>So (untested code, may require tip of master branch):</p>\n\n<pre><code>    template&lt;class Task, class Handler&gt;\n    void async_execute(implementation&amp; impl, Task&amp;&amp; task, Handler&amp;&amp; handler)\n    {\n        ...\n\n        auto ex = asio::get_associated_executor(handler get_io_context());\n\n        // this is immediate completion, so we use post()\n\n        if (not impl)\n        {\n            post(ex, [handler = std::forward&lt;Handler&gt;(handler)]() mutable\n                 {\n                     promise_type promise;\n                     promise.set_exception(std::make_exception_ptr(system_error(errors::null_handle)));\n                     handler(promise.get_future());\n                 });\n            return;\n        }\n\n        // this is not immediate completion, so we use dispatch()\n        // (NOTE: assumes this-&gt;post_execute() does not run the task)\n\n        // Optional. Really only needed if your io_context participates in the\n        // async operation in some way not shown in this snippet, and not\n        // simply as a channel for delivering the handler.\n        auto io_work = make_work_guard(get_io_contet());\n\n        auto handler_work = make_work_guard(ex);\n        auto impl_ptr = impl.get();\n        auto async_handler = [this,\n                              ex,\n                              impl_ptr,\n                              io_work, handler_work,\n                              handler = std::forward&lt;Handler&gt;(handler)]\n        (detail::long_running_task_op::identifier ident,\n         auto future) mutable\n        {\n            assert(impl_ptr);\n            io_work.reset();\n            dispatch(ex, [handler = std::move(handler), future = std::move(future)]() mutable\n                 {\n                     handler(std::move(future));\n                 });\n            assert(impl_ptr);\n            impl_ptr-&gt;remove_op(ident);\n        };\n\n        ...\n\n        this-&gt;post_execute();\n    }\n</code></pre>\n  \n  <p>Hope this helps.</p>\n  \n  <p>Cheers, Chris</p>\n</blockquote>\n"}], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 4, "answer_count": 1, "score": 6, "last_activity_date": 1470898070, "creation_date": 1470852689, "last_edit_date": 1470875404, "question_id": 38880676, "link": "https://stackoverflow.com/questions/38880676/asio-1-11-0-standalone-wrap-not-correct-or-is-it-me", "title": "asio 1.11.0 standalone wrap not correct... or is it me?", "body": "<p>Given the following test program:</p>\n\n<pre><code>#include &lt;asio.hpp&gt;\n#include &lt;cassert&gt;\n\nint main()\n{\n    asio::io_service ios1, ios2;\n    asio::io_service::strand s2(ios2);\n\n    auto test_func = wrap(s2, [&amp;] {\n        assert(s2.running_in_this_thread());\n    });\n\n    auto wrap_test_func = wrap(ios1, test_func);\n\n    wrap_test_func();\n\n    ios1.run_one();\n    ios2.run_one();\n\n}\n</code></pre>\n\n<p>My understanding is that this program should not assert.</p>\n\n<p><code>wrap_test_func</code> is wrapped into <code>io_service</code> <code>ios1</code>. The function it is wrapping is wrapped into <code>strand</code> <code>s2</code> (which uses <code>ios2</code>).</p>\n\n<p>As I understand it, calling <code>wrap_test_func</code> should be equivalent to <code>dispatch(ios1, test_func)</code> which should then dispatch the lambda in <code>s2</code>).</p>\n\n<p>However, it looks as if wrap has unwrapped the inner wrapper.</p>\n\n<p>Is this expected behaviour?</p>\n"}, {"tags": ["c++", "keyboard", "sfml"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470851819, "post_id": 38880133, "comment_id": 65121900, "body": "Of course you can fix that. You just need to keep track of what keys are pressed and what sprites to move when certain keys are pressed."}, {"owner": {"reputation": 100, "user_id": 5609267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15e320ff586bd7c4a694715cddac4101?s=128&d=identicon&r=PG&f=1", "display_name": "James Bond", "link": "https://stackoverflow.com/users/5609267/james-bond"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470852561, "post_id": 38880133, "comment_id": 65122348, "body": "@JesperJuhl But how can I keep track of two keys being pressed at the same time?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470853214, "post_id": 38880133, "comment_id": 65122717, "body": "Use a couple of <code>bool</code> variables that you set to <code>true</code> when the relevant key is pressed and <code>false</code> when it is released - then test your bools to determine what to do."}, {"owner": {"reputation": 100, "user_id": 5609267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15e320ff586bd7c4a694715cddac4101?s=128&d=identicon&r=PG&f=1", "display_name": "James Bond", "link": "https://stackoverflow.com/users/5609267/james-bond"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470853567, "post_id": 38880133, "comment_id": 65122915, "body": "@JesperJuhl How do I check if it is released?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1470853660, "post_id": 38880133, "comment_id": 65122964, "body": "SFML delivers you events both when keys are pressed and when they are released. Check the documentation. It&#39;s all described in great detail. Relevant link: <a href=\"http://www.sfml-dev.org/documentation/2.4.0/structsf_1_1Event_1_1KeyEvent.php\" rel=\"nofollow noreferrer\">sfml-dev.org/documentation/2.4.0/&hellip;</a>"}, {"owner": {"reputation": 100, "user_id": 5609267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15e320ff586bd7c4a694715cddac4101?s=128&d=identicon&r=PG&f=1", "display_name": "James Bond", "link": "https://stackoverflow.com/users/5609267/james-bond"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470853797, "post_id": 38880133, "comment_id": 65123049, "body": "@JesperJuhl Alright, look at my edit. Where do I go from here?"}, {"owner": {"reputation": 100, "user_id": 5609267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15e320ff586bd7c4a694715cddac4101?s=128&d=identicon&r=PG&f=1", "display_name": "James Bond", "link": "https://stackoverflow.com/users/5609267/james-bond"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470853818, "post_id": 38880133, "comment_id": 65123065, "body": "@JesperJuhl I need to be able to have 2 at once but also only one."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470854167, "post_id": 38880133, "comment_id": 65123260, "body": "Yes. I <i>get</i> that. If you have two <code>bool</code>s &quot;key_a_pressed&quot; and &quot;key_b_pressed&quot; that you keep updated based on events received, then you can simply do <code>if (key_a_pressed &amp;&amp; key_b_pressed) { &#47;* stuff to do when both pressed *&#47; } else if (key_a_pressed) { &#47;* stuff to do when only &quot;a&quot; pressed *&#47; } else if (key_b_pressed) { &#47;* stuff to do when only &quot;b&quot; pressed *&#47; } else { &#47;* stuff to do when none pressed *&#47; } &#47;* stuff to always do here *&#47;</code> ... It&#39;s not that hard."}, {"owner": {"reputation": 100, "user_id": 5609267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15e320ff586bd7c4a694715cddac4101?s=128&d=identicon&r=PG&f=1", "display_name": "James Bond", "link": "https://stackoverflow.com/users/5609267/james-bond"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470854354, "post_id": 38880133, "comment_id": 65123368, "body": "@JesperJuhl Thanks for helping!"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470854511, "post_id": 38880133, "comment_id": 65123447, "body": "Your welcome. I hope you solved your problem.   Btw, this is exactly what @Joachim Pileborg said in his answer - I just spelled it out a bit more."}], "answers": [{"comments": [{"owner": {"reputation": 100, "user_id": 5609267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15e320ff586bd7c4a694715cddac4101?s=128&d=identicon&r=PG&f=1", "display_name": "James Bond", "link": "https://stackoverflow.com/users/5609267/james-bond"}, "edited": false, "score": 0, "creation_date": 1470853264, "post_id": 38880266, "comment_id": 65122745, "body": "The problem I have then is that when I press one key alone, it won&#39;t move. I want it to be able to handle two, and to be able to handle one."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 100, "user_id": 5609267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15e320ff586bd7c4a694715cddac4101?s=128&d=identicon&r=PG&f=1", "display_name": "James Bond", "link": "https://stackoverflow.com/users/5609267/james-bond"}, "edited": false, "score": 0, "creation_date": 1470901025, "post_id": 38880266, "comment_id": 65140182, "body": "@JamesBond You can use the flag for that too. In your main rendering/event loop, if the flag for the key is set (i.e it is being pressed) then update the position of whatever objects needs to be &quot;moved&quot;. Do this before the rendering."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1470851275, "creation_date": 1470851275, "answer_id": 38880266, "question_id": 38880133, "link": "https://stackoverflow.com/questions/38880133/c-sfml-how-to-read-two-keys-in-sfml-pressed-at-the-same-time/38880266#38880266", "title": "C++ SFML - How to read two keys in SFML pressed at the same time?", "body": "<p>You solve it by having a flag that is set when one key is pressed, and cleared when the key is released. Then you can check this flag when the other key is pressed.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470858864, "post_id": 38882076, "comment_id": 65125785, "body": "The problem there is that mixing events and direct checks may result in conflicting results. Sure, you <i>can</i> probe the keys &quot;right now&quot;, but that will miss &quot;user pressed the key for a short amount of time and then released it&quot; since it is not pressed <i>right now</i>. You usually want to pick being either driven by events or immediate results, but mixing them usually leads to confusion."}, {"owner": {"reputation": 3364, "user_id": 520217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/417a6f6d3cffb86f937638e050d89006?s=128&d=identicon&r=PG", "display_name": "Hiura", "link": "https://stackoverflow.com/users/520217/hiura"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1470923141, "post_id": 38882076, "comment_id": 65155147, "body": "@JesperJuhl, hence the &#39;alternatively&#39; ;)"}], "tags": [], "owner": {"reputation": 3364, "user_id": 520217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/417a6f6d3cffb86f937638e050d89006?s=128&d=identicon&r=PG", "display_name": "Hiura", "link": "https://stackoverflow.com/users/520217/hiura"}, "is_accepted": false, "score": 2, "last_activity_date": 1470857724, "creation_date": 1470857724, "answer_id": 38882076, "question_id": 38880133, "link": "https://stackoverflow.com/questions/38880133/c-sfml-how-to-read-two-keys-in-sfml-pressed-at-the-same-time/38882076#38882076", "title": "C++ SFML - How to read two keys in SFML pressed at the same time?", "body": "<p>Alternatively, you can use <a href=\"http://www.sfml-dev.org/documentation/2.4.0/classsf_1_1Keyboard.php#a80a04b2f53005886957f49eee3531599\" rel=\"nofollow\"><code>sf::Keyboard::isKeyPressed</code></a> to probe the state of the keyboard at a given point.</p>\n\n<p>One issue with your current code is that all the variables are local to the if-statement and therefore reinitialised when processing the next event. They should be defined outside the <code>if</code>. Another problem is that you don't handle the <code>KeyReleased</code> event.</p>\n"}], "owner": {"reputation": 100, "user_id": 5609267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15e320ff586bd7c4a694715cddac4101?s=128&d=identicon&r=PG&f=1", "display_name": "James Bond", "link": "https://stackoverflow.com/users/5609267/james-bond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2156, "favorite_count": 0, "accepted_answer_id": 38880266, "answer_count": 2, "score": 1, "last_activity_date": 1470857724, "creation_date": 1470850857, "last_edit_date": 1470853768, "question_id": 38880133, "link": "https://stackoverflow.com/questions/38880133/c-sfml-how-to-read-two-keys-in-sfml-pressed-at-the-same-time", "title": "C++ SFML - How to read two keys in SFML pressed at the same time?", "body": "<p>I made a very simple two player game in which one person is the jellyfish, and the other is the shark in SFML. The only problem with it is that only one sprite can move at once. Is this possible to fix and how can I fix it?</p>\n\n<p>EDIT: My attempt is this:</p>\n\n<pre><code>if (event.type == sf::Event::KeyPressed)\n            {\n                bool D;\n                bool A;\n                bool S;\n                bool W;\n                bool Up;\n                bool Right;\n                bool Left;\n                bool Down;\n                if (event.key.code == sf::Keyboard::A)\n                    A = true;\n\n\n\n                if (event.key.code == sf::Keyboard::D)\n                     D = true;\n\n                if (event.key.code == sf::Keyboard::W)\n                     W = true;\n\n                if (event.key.code == sf::Keyboard::S)\n                     S = true;\n\n                if (event.key.code == sf::Keyboard::Left)\n                     Left = true;\n\n                if (event.key.code == sf::Keyboard::Right)\n                     Right = true;\n\n                if (event.key.code == sf::Keyboard::Up)\n                     Up = true;\n\n                if (event.key.code == sf::Keyboard::Down)\n                     Down = true;\n\n                if (D and Right)\n                {\n                    jelly.move(10, 0)\n                }\n                  ...\n\n\n\n            }\n</code></pre>\n"}, {"tags": ["c++", "macos", "osx-elcapitan", "gdal", "iconv"], "comments": [{"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1483544593, "post_id": 38880007, "comment_id": 70140963, "body": "Did you figure it out?"}], "answers": [{"comments": [{"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1483622079, "post_id": 41469056, "comment_id": 70177061, "body": "Another thing you can do is build iconv by itself and tell GDAL where to get it from."}, {"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1483622764, "post_id": 41469056, "comment_id": 70177551, "body": "Also, did you run configure?  I&#39;m assuming you did, because you must be using what came from configure command to do make. If you don&#39;t think you need to configure after your upgrade of os, you might be wrong.  Just a suggestion.  I usually don&#39;t answer questions here, and I know this one is an older one."}, {"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1483623001, "post_id": 41469056, "comment_id": 70177707, "body": "There are some flags at this link that you didn&#39;t use:  <a href=\"https://trac.osgeo.org/gdal/wiki/BuildingOnMac\" rel=\"nofollow noreferrer\">trac.osgeo.org/gdal/wiki/BuildingOnMac</a>"}, {"owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "edited": false, "score": 0, "creation_date": 1483625153, "post_id": 41469056, "comment_id": 70179222, "body": "Another thought, is gdal looking for iconv dylib or another version?"}], "tags": [], "owner": {"reputation": 2682, "user_id": 1012914, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/YcjKJ.jpg?s=128&g=1", "display_name": "Michele", "link": "https://stackoverflow.com/users/1012914/michele"}, "is_accepted": false, "score": 0, "last_activity_date": 1483622296, "last_edit_date": 1483622296, "creation_date": 1483548231, "answer_id": 41469056, "question_id": 38880007, "link": "https://stackoverflow.com/questions/38880007/cant-compile-gdal-on-osx-1-11-6-due-to-libiconv-link-error/41469056#41469056", "title": "Can&#39;t compile GDAL on OSX 1.11.6 due to libiconv link error", "body": "<p>I ran into this error in a file that uses gdal, and I had to add this in my cmakelist:\noptimized iconv debug iconv</p>\n\n<p>I know that's a little different than what you're looking for.  Did you try with Gdal 1.11.1?</p>\n\n<p>Also, did you start out by cleaning it?  We run into issues with that all the time.  </p>\n\n<p>I look in my PATH, not my LD_LIBRARY_PATH (that's blank), and see /usr/bin, which is where my iconv is.  </p>\n\n<p>Are there any flags to set in the GDAL config file or makefile?  Sorry to be generic.  Someone else in my group built this.  Added: I see the flags you list above, but maybe there's a GDAL flag to use to tell it where iconv is.</p>\n"}], "owner": {"reputation": 848, "user_id": 2059999, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/gnHm2.jpg?s=128&g=1", "display_name": "TxAG98", "link": "https://stackoverflow.com/users/2059999/txag98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 422, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483622296, "creation_date": 1470850441, "question_id": 38880007, "link": "https://stackoverflow.com/questions/38880007/cant-compile-gdal-on-osx-1-11-6-due-to-libiconv-link-error", "title": "Can&#39;t compile GDAL on OSX 1.11.6 due to libiconv link error", "body": "<p>I recently upgraded my OSX machine to OSX El Capitan (1.11.6) and have run into an issue with compiling GDAL 1.11.x.  I've tried this with 1.11.4 and 1.11.5 and I get the same result.  </p>\n\n<p>We use GDAL 1.11.x as a dependency on one of our projects -- for now we can't update to GDAL 2.x because there are legacy software issues that are stuck with some functions that were deprecated out in GDAL 2.x ...</p>\n\n<p>Since moving my machine to El Capitan, GDAL 1.11.x fails to build with the following linker error message down towards the final link step:</p>\n\n<pre><code>/Applications/Xcode.app/Contents/Developer/usr/bin/make -C pdf\nmake[3]: Nothing to be done for `default'.\n/Applications/Xcode.app/Contents/Developer/usr/bin/make libgdal.la\n/bin/sh /test/gdal-1.11.5/libtool --mode=link   g++    -L/opt/local/lib -lgeos_c  -lsqlite3 -lpthread -ldl               -liconv  -L/opt/local/lib -lxml2 -lz -lpthread -liconv -lm  -o libgdal.la /test/gdal-1.11.5/frmts/o/*.lo /test/gdal-1.11.5/gcore/*.lo /test/gdal-1.11.5/port/*.lo /test/gdal-1.11.5/alg/*.lo /test/gdal-1.11.5/ogr/ogrsf_frmts/o/*.lo ./ogr/ogrgeometryfactory.lo ./ogr/ogrpoint.lo ./ogr/ogrcurve.lo ./ogr/ogrlinestring.lo ./ogr/ogrlinearring.lo ./ogr/ogrpolygon.lo ./ogr/ogrutils.lo ./ogr/ogrgeometry.lo ./ogr/ogrgeometrycollection.lo ./ogr/ogrmultipolygon.lo ./ogr/ogrsurface.lo ./ogr/ogrmultipoint.lo ./ogr/ogrmultilinestring.lo ./ogr/ogr_api.lo ./ogr/ogrfeature.lo ./ogr/ogrfeaturedefn.lo ./ogr/ogrfeaturequery.lo ./ogr/ogrfeaturestyle.lo ./ogr/ogrfielddefn.lo ./ogr/ogrspatialreference.lo ./ogr/ogr_srsnode.lo ./ogr/ogr_srs_proj4.lo ./ogr/ogr_fromepsg.lo ./ogr/ogrct.lo ./ogr/ogr_opt.lo ./ogr/ogr_srs_esri.lo ./ogr/ogr_srs_pci.lo ./ogr/ogr_srs_usgs.lo ./ogr/ogr_srs_dict.lo ./ogr/ogr_srs_panorama.lo ./ogr/ogr_srs_ozi.lo ./ogr/ogr_srs_erm.lo ./ogr/swq.lo ./ogr/swq_expr_node.lo ./ogr/swq_parser.lo ./ogr/swq_select.lo ./ogr/swq_op_registrar.lo ./ogr/swq_op_general.lo ./ogr/ogr_srs_validate.lo ./ogr/ogr_srs_xml.lo ./ogr/ograssemblepolygon.lo ./ogr/ogr2gmlgeometry.lo ./ogr/gml2ogrgeometry.lo ./ogr/ogr_expat.lo ./ogr/ogrpgeogeometry.lo ./ogr/ogrgeomediageometry.lo ./ogr/ogr_geocoding.lo ./ogr/osr_cs_wkt.lo ./ogr/osr_cs_wkt_parser.lo ./ogr/ogrgeomfielddefn.lo \\\n    -rpath /usr/local/lib \\\n    -no-undefined \\\n    -version-info 19:5:18\n\nlibtool: link: g++ -dynamiclib  -o .libs/libgdal.1.dylib &lt;snipped out the rest of the gigantic link line/&gt;\n\nUndefined symbols for architecture x86_64:\n  \"_iconv\", referenced from:\n      CPLRecodeIconv(char const*, char const*, char const*) in cpl_recode_iconv.o\n      CPLRecodeFromWCharIconv(wchar_t const*, char const*, char const*) in cpl_recode_iconv.o\n  \"_iconv_close\", referenced from:\n      CPLRecodeIconv(char const*, char const*, char const*) in cpl_recode_iconv.o\n      CPLRecodeFromWCharIconv(wchar_t const*, char const*, char const*) in cpl_recode_iconv.o\n  \"_iconv_open\", referenced from:\n      CPLRecodeIconv(char const*, char const*, char const*) in cpl_recode_iconv.o\n      CPLRecodeFromWCharIconv(wchar_t const*, char const*, char const*) in cpl_recode_iconv.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[1]: *** [libgdal.la] Error 1\nmake: *** [check-lib] Error 2\n</code></pre>\n\n<p>I'm doing a <a href=\"https://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithMinimizedDrivers\" rel=\"nofollow\">minimal configuration</a> based on documentation I found on GDAL's website:</p>\n\n<pre><code>$ ./configure --with-netcdf=no \\\n              --with-jpeg=no \\\n              --with-threads \\\n              --with-ogr \\\n              --with-geos \\\n              --with-libz=internal \\\n              --with-libtiff=internal \\\n              --with-geotiff=internal \\\n              --without-gif \\\n              --without-pg \\\n              --without-grass \\\n              --without-libgrass \\\n              --without-cfitsio \\\n              --without-pcraster \\\n              --without-png \\\n              --without-gif \\\n              --without-ogdi \\\n              --without-fme \\\n              --without-hdf4 \\\n              --without-hdf5 \\\n              --without-jasper \\\n              --without-ecw \\\n              --without-kakadu \\\n              --without-mrsid \\\n              --without-jp2mrsid \\\n              --without-bsb \\\n              --without-grib \\\n              --without-mysql \\\n              --without-ingres \\\n              --without-xerces \\\n              --without-expat \\\n              --without-odbc \\\n              --without-curl \\\n              --without-dwgdirect \\\n              --without-idb \\\n              --without-sde \\\n              --without-perl \\\n              --without-php \\\n              --without-ruby \\\n              --with-hide-internal-symbols \\\n              --disable-rpath\n</code></pre>\n\n<p>I am using macports and have libiconv installed... </p>\n\n<pre><code>$ sudo port install libiconv\n---&gt;  Cleaning libiconv\n---&gt;  Scanning binaries for linking errors\n---&gt;  No broken files found.\n</code></pre>\n\n<p>/opt/local/lib is also in my <strong>LD_LIBRARY_PATH</strong> and DYLD_LIBRARY_PATH and I verified that libiconv is in /opt/local/lib as well:</p>\n\n<pre><code>&gt; ll /opt/local/lib/*iconv*\nlrwxr-xr-x  1 root  admin    16B Jan 29  2016 /opt/local/lib/libiconv.dylib@ -&gt; libiconv.2.dylib\n-rw-r--r--  1 root  admin   1.0M Jan 29  2016 /opt/local/lib/libiconv.a\n-rw-r--r--  1 root  admin   1.0M Jan 29  2016 /opt/local/lib/libiconv.2.dylib\n</code></pre>\n\n<p>Has anyone run across something like this?  Any ideas?</p>\n"}, {"tags": ["c++", "qt", "c++11", "qt5", "c++14"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1470850617, "post_id": 38879978, "comment_id": 65121204, "body": "What commands does <code>qmake</code> print?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 5, "creation_date": 1470850847, "post_id": 38879978, "comment_id": 65121332, "body": "How do you expect to distinguish between two includes of headers with the same name? Also the include guards are the same. But these issues should not cause the error you&#39;re showing."}, {"owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "edited": false, "score": 0, "creation_date": 1470854570, "post_id": 38879978, "comment_id": 65123477, "body": "Ok, got it. Namespaces allow me to select a particular scope from a set of scopes. To introduce these scopes I put them in different files (different file names). I have to use namespaces if these scopes contain symbols with the same name."}, {"owner": {"reputation": 192274, "user_id": 36565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ccfec45e3fba785daf0e89a797c9216?s=128&d=identicon&r=PG", "display_name": "David Rodr&#237;guez - dribeas", "link": "https://stackoverflow.com/users/36565/david-rodr%c3%adguez-dribeas"}, "edited": false, "score": 0, "creation_date": 1470863705, "post_id": 38879978, "comment_id": 65128188, "body": "I still don&#39;t get why you want the files to have the right names. I consider that a design issue, problematic in general and will most probably explode. You have two namespaces, just name the files <code>a_class1.h</code> and <code>b_class1.h</code> (similarly for the .cpp). If you need to select one or the other you can wrap the <code>#include</code> within <code>#ifdef</code> or otherwise control it through the build system. Also I would avoid using directives...."}], "answers": [{"comments": [{"owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "edited": false, "score": 0, "creation_date": 1470851383, "post_id": 38880231, "comment_id": 65121649, "body": "Well, that&#39;s the point. I was trying to understand how to use namespaces to be able to have &quot;files with the same name in different directories&quot;. So, the issue here is more of <code>qmake</code> than of C++, may I say that?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "edited": false, "score": 0, "creation_date": 1470851598, "post_id": 38880231, "comment_id": 65121768, "body": "@KcFnMi Who told you that namespaces and filenames are related at all? It&#39;s a <code>qmake</code> deficiency, you can&#39;t bypass it by doing anything other than: 1. changing the file name(s), or 2. modifying qmake itself, and certainly not by modifying the file contents!"}, {"owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "edited": false, "score": 0, "creation_date": 1470851718, "post_id": 38880231, "comment_id": 65121837, "body": "I listen some people talk about cmake, is it an alternative to qmake (is this case)?"}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 3, "last_activity_date": 1470851178, "creation_date": 1470851178, "answer_id": 38880231, "question_id": 38879978, "link": "https://stackoverflow.com/questions/38879978/namespace-use-causes-multiple-definition-of/38880231#38880231", "title": "Namespace use causes multiple definition of", "body": "<p>It looks like qmake doesn't support files with the same name in different directories.  It ends up trying to build both a/class1.cpp and b/class1.cpp into the same debug/class1.o file, and then link that file twice.</p>\n\n<p>Try renaming one of your *.cpp files.</p>\n"}], "owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 1, "accepted_answer_id": 38880231, "answer_count": 1, "score": 0, "last_activity_date": 1470851178, "creation_date": 1470850343, "last_edit_date": 1470850910, "question_id": 38879978, "link": "https://stackoverflow.com/questions/38879978/namespace-use-causes-multiple-definition-of", "title": "Namespace use causes multiple definition of", "body": "<p>I'm trying to make use of namespace but I'm getting a compilation error:</p>\n\n<pre><code>multiple definition of `B::Class1::Class1()\n</code></pre>\n\n<p>The following outlines the code structure I have here:</p>\n\n<pre><code>//.pro\nSOURCES += ../main.cpp \\\n           ../a/class1.cpp \\\n           ../b/class1.cpp    \nHEADERS += \\\n           ../a/class1.h \\\n           ../b/class1.h\n\n// folder a, header\n#ifndef CLASS1_H\n#define CLASS1_H\n\nnamespace A {\nclass Class1 {\npublic:\n    Class1();\n};\n}    \n#endif // CLASS1_H\n\n// folder a, source\n#include \"class1.h\"    \nusing namespace A;\n\nClass1::Class1() {\n}\n\n// folder b, header\n#ifndef CLASS1_H\n#define CLASS1_H\n\nnamespace B {\nclass Class1 {\npublic:\n    Class1();\n    void doB();\n};\n}    \n#endif // CLASS1_H\n\n// folder b, source\n#include \"class1.h\"    \nusing namespace B;\n\nClass1::Class1() {\n}\nvoid B::Class1::doB() {    \n}\n\n// main.cpp\n#include \"a/class1.h\"\nusing namespace A;\n\nint main(int argc, char *argv[]) {\n    Class1 c;\n}\n</code></pre>\n\n<p>What I'm doing wrong?</p>\n\n<p>Here is the compilation output:</p>\n\n<pre><code>14:39:54: Running steps for project test...\n14:39:54: Starting: \"C:\\Qt\\Qt5.3.2\\Tools\\mingw482_32\\bin\\mingw32-make.exe\" clean\nC:/Qt/Qt5.3.2/Tools/mingw482_32/bin/mingw32-make -f Makefile.Debug clean\nC:/Qt/Qt5.3.2/Tools/mingw482_32/bin/mingw32-make -f Makefile.Release clean\nmingw32-make[1]: Entering directory 'C:/Users/User/Downloads/namespace/build'\nMakefile.Debug:133: warning: overriding recipe for target 'debug/class1.o'\nMakefile.Debug:130: warning: ignoring old recipe for target 'debug/class1.o'\nmingw32-make[1]: Entering directory 'C:/Users/User/Downloads/namespace/build'\nMakefile.Release:133: warning: overriding recipe for target 'release/class1.o'\nMakefile.Release:130: warning: ignoring old recipe for target 'release/class1.o'\ndel debug\\main.o debug\\class1.o debug\\class1.o\ndel release\\main.o release\\class1.o release\\class1.o\nNao foi poss\u00a1vel encontrar C:\\Users\\User\\Downloads\\namespace\\build\\release\\main.o\nNao foi poss\u00a1vel encontrar C:\\Users\\User\\Downloads\\namespace\\build\\debug\\main.o\nmingw32-make[1]: Leaving directory 'C:/Users/User/Downloads/namespace/build'\nmingw32-make[1]: Leaving directory 'C:/Users/User/Downloads/namespace/build'\n14:39:55: The process \"C:\\Qt\\Qt5.3.2\\Tools\\mingw482_32\\bin\\mingw32-make.exe\" exited normally.\n14:39:55: Configuration unchanged, skipping qmake step.\n14:39:55: Starting: \"C:\\Qt\\Qt5.3.2\\Tools\\mingw482_32\\bin\\mingw32-make.exe\" \nC:/Qt/Qt5.3.2/Tools/mingw482_32/bin/mingw32-make -f Makefile.Debug\nmingw32-make[1]: Entering directory 'C:/Users/User/Downloads/namespace/build'\nMakefile.Debug:133: warning: overriding recipe for target 'debug/class1.o'\nMakefile.Debug:130: warning: ignoring old recipe for target 'debug/class1.o'\ng++ -c -pipe -fno-keep-inline-dllexport -std=c++1y -g -frtti -Wall -Wextra -fexceptions -mthreads -DUNICODE -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_NEEDS_QMAIN -I. -I\"C:\\Qt\\Qt5.3.2\\5.3\\mingw482_32\\include\" -I\"C:\\Qt\\Qt5.3.2\\5.3\\mingw482_32\\include\\QtWidgets\" -I\"C:\\Qt\\Qt5.3.2\\5.3\\mingw482_32\\include\\QtGui\" -I\"C:\\Qt\\Qt5.3.2\\5.3\\mingw482_32\\include\\QtCore\" -I\"debug\" -I\"C:\\Qt\\Qt5.3.2\\5.3\\mingw482_32\\mkspecs\\win32-g++\" -o debug\\main.o ..\\main.cpp\ng++ -c -pipe -fno-keep-inline-dllexport -std=c++1y -g -frtti -Wall -Wextra -fexceptions -mthreads -DUNICODE -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_NEEDS_QMAIN -I. -I\"C:\\Qt\\Qt5.3.2\\5.3\\mingw482_32\\include\" -I\"C:\\Qt\\Qt5.3.2\\5.3\\mingw482_32\\include\\QtWidgets\" -I\"C:\\Qt\\Qt5.3.2\\5.3\\mingw482_32\\include\\QtGui\" -I\"C:\\Qt\\Qt5.3.2\\5.3\\mingw482_32\\include\\QtCore\" -I\"debug\" -I\"C:\\Qt\\Qt5.3.2\\5.3\\mingw482_32\\mkspecs\\win32-g++\" -o debug\\class1.o ..\\b\\class1.cpp\n..\\main.cpp:5:5: warning: unused parameter 'argc' [-Wunused-parameter]\n int main(int argc, char *argv[]) {\n     ^\n..\\main.cpp:5:5: warning: unused parameter 'argv' [-Wunused-parameter]\ng++ -Wl,-subsystem,windows -mthreads -o debug\\test.exe debug/main.o debug/class1.o debug/class1.o  -lglu32 -lopengl32 -lgdi32 -luser32 -lmingw32 -LC:/Qt/Qt5.3.2/5.3/mingw482_32/lib -lqtmaind -LC:\\mingw482\\mingw32\\lib -LC:\\Utils\\icu32_52_1_mingw482\\lib -LC:\\utils\\postgresql\\pgsql\\lib -LC:\\utils\\mysql\\mysql\\lib -LC:\\opensll\\lib -LC:\\Qt\\Qt5.3.2\\5.3\\mingw482_32/lib -lQt5Widgetsd -lQt5Guid -lQt5Cored \ndebug/class1.o: In function `ZN1B6Class1C2Ev':\nC:\\Users\\User\\Downloads\\namespace\\build/../b/class1.cpp:4: multiple definition of `B::Class1::Class1()'\ndebug/class1.o:C:\\Users\\User\\Downloads\\namespace\\build/../b/class1.cpp:4: first defined here\ndebug/class1.o: In function `ZN1B6Class1C2Ev':\nC:\\Users\\User\\Downloads\\namespace\\build/../b/class1.cpp:4: multiple definition of `B::Class1::Class1()'\ndebug/class1.o:C:\\Users\\User\\Downloads\\namespace\\build/../b/class1.cpp:4: first defined here\ndebug/class1.o: In function `ZN1B6Class13doBEv':\nC:\\Users\\User\\Downloads\\namespace\\build/../b/class1.cpp:7: multiple definition of `B::Class1::doB()'\ndebug/class1.o:C:\\Users\\User\\Downloads\\namespace\\build/../b/class1.cpp:7: first defined here\ndebug/main.o: In function `main':\nC:\\Users\\User\\Downloads\\namespace\\build/../main.cpp:6: undefined reference to `A::Class1::Class1()'\ncollect2.exe: error: ld returned 1 exit status\nMakefile.Debug:81: recipe for target 'debug\\test.exe' failed\nmingw32-make[1]: Leaving directory 'C:/Users/User/Downloads/namespace/build'\nMakefile:34: recipe for target 'debug' failed\nmingw32-make[1]: *** [debug\\test.exe] Error 1\nmingw32-make: *** [debug] Error 2\n14:39:55: The process \"C:\\Qt\\Qt5.3.2\\Tools\\mingw482_32\\bin\\mingw32-make.exe\" exited with code 2.\nError while building/deploying project test (kit: Desktop Qt 5.3 MinGW 32bit)\nWhen executing step \"Make\"\n14:39:55: Elapsed time: 00:01.\n</code></pre>\n"}, {"tags": ["c++", "sockets", "visual-c++", "winsock"], "comments": [{"owner": {"reputation": 2113, "user_id": 1927176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d4YlH.jpg?s=128&g=1", "display_name": "fnc12", "link": "https://stackoverflow.com/users/1927176/fnc12"}, "edited": false, "score": 0, "creation_date": 1470853438, "post_id": 38879976, "comment_id": 65122843, "body": "You can receive all data in a <code>while</code> loop by checking return value of <code>recv</code> function and expect reading until return value is <code>0 </code>"}], "answers": [{"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1470864347, "last_edit_date": 1470864347, "creation_date": 1470862808, "answer_id": 38883438, "question_id": 38879976, "link": "https://stackoverflow.com/questions/38879976/function-setsockopt-seems-not-working/38883438#38883438", "title": "Function setsockopt seems not working", "body": "<p>You can make the buffer as big as the system will let you, but nothing you can do will allow you to receive all of your data at once from TCP. You have to loop until you receive all the data you are expecting.</p>\n\n<p>Your question is based on a false assumption.</p>\n"}, {"comments": [{"owner": {"reputation": 42, "user_id": 5868856, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/19438b6acc7c13d5696f0da37ba8e9d9?s=128&d=identicon&r=PG&f=1", "display_name": "anc", "link": "https://stackoverflow.com/users/5868856/anc"}, "edited": false, "score": 0, "creation_date": 1470921330, "post_id": 38883523, "comment_id": 65153775, "body": "Thank you for the help, but there is a a left question: I keep a open channel to communicate with my server (that code you saw), and I keep sending a XML each 500ms. What happens is that my sochet receive several XML as only one, because the sending is to fast. so, in short - I have less <code>chrs_read</code> returning <code>-1</code>than I should have and the files are concatenating."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 42, "user_id": 5868856, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/19438b6acc7c13d5696f0da37ba8e9d9?s=128&d=identicon&r=PG&f=1", "display_name": "anc", "link": "https://stackoverflow.com/users/5868856/anc"}, "edited": false, "score": 1, "creation_date": 1470935266, "post_id": 38883523, "comment_id": 65163281, "body": "@cna as I told you in the last paragraph of my answer, you need a delimiter in between the XML messages. TCP has no concept of message boundaries, you need to handle that at the application layer. Call <code>recv()</code> in a loop until you reach the appropriate end of a message, then process the message as needed, then call <code>recv()</code> in a loop until you reach the appropriate end of the next message, and so on. <code>recv()</code> by itself can&#39;t do everything for you, you need your own logic on top of it."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1470863099, "creation_date": 1470863099, "answer_id": 38883523, "question_id": 38879976, "link": "https://stackoverflow.com/questions/38879976/function-setsockopt-seems-not-working/38883523#38883523", "title": "Function setsockopt seems not working", "body": "<p><code>setsockopt(SO_RCVBUF)</code> DOES NOT guarantee that you can receive an entire message in a single <code>recv()</code> call. It DOES NOT even guarantee that you will get the buffer size you requested. You have to use <code>getsockopt(SO_RCVBUF)</code> to retrieve the actual buffer size.</p>\n\n<p><code>SO_RCVBUF</code> simply controls how many bytes the socket can hold in its internal buffer before the sender starting blocking waiting for you to read the bytes. But <code>recv()</code> DOES NOT guarantee that it will return all of the bytes you requested (unless you call it with the <code>MSG_WAITALL</code> flag, which I would not recommend in this situation since you don't know the message length beforehand).  If you ask <code>recv()</code> to read X bytes, and only Y bytes are currently available, where Y &lt; X, <code>recv()</code> will return Y bytes and not wait to return X bytes.  The only guarantee is that <code>recv()</code> will return <em>at least</em> 1 byte and <em>no more</em> than X bytes.  So, you still need a reading loop no matter what you set the internal buffer size to.</p>\n\n<p><code>SO_RCVBUF</code> is merely a suggestive option used for optimizing network I/O.  Don't actually rely on it for your code's reading logic.</p>\n\n<p>That said, there are other problems with the code you showed.</p>\n\n<p>You are allocating and freeing your receive buffer on each iteration of your loop.  Don't do that.  Allocate it once, THEN loop the reading, THEN free the buffer when finished.</p>\n\n<p>There is no need to over-allocate your receive buffer beyond what you actually ask from <code>recv()</code>.  There is also no need to zero the buffer when reading.  Those steps are just wasted overhead.</p>\n\n<p>You are also not taking the return value of <code>recv()</code> into account when appending the receive buffer to your <code>std::string</code>.  You are using the <code>std::string</code> constructor that expects the buffer to be null-terminated.  You are relying on your buffer zeroing to provide a null-terminator, but if the data contains any embedded nul characters of its own (depending on the XML's encoding) then that will truncate what you append to the <code>std::string</code>.  <code>recv()</code> returns how many bytes it read.  You need to append exactly that many bytes to your <code>std::string</code>, no more no less.</p>\n\n<p>Try something more like this:</p>\n\n<pre><code>#define IP_BUF_SZ 2000000\n\n//...\n\nstd::string sBuffer;\nlong chrs_read;\n\n//...\n\nint iBufSize = IP_BUF_SZ;\nint iBufVarSize = sizeof(iBufSize);\n\nif (setsockopt(sockfd, SOL_SOCKET, SO_RCVBUF, (char*)&amp;iBufSize, iBufVarSize) == SOCKET_ERROR)\n    MessageBox(\"Unable to set buffer size\");\nelse if (getsockopt(sockfd, SOL_SOCKET, SO_RCVBUF, (char*)&amp;iBufSize, &amp;iBufVarSize) == SOCKET_ERROR)\n{\n    MessageBox(\"Unable to get buffer size\");\n    iBufSize = IP_BUF_SZ;\n}\n\nchar* buf = (char*) malloc(iBufSize);\nif (!buf)\n    MessageBox(\"Unable to allocate buffer\");\nelse\n{\n    do\n    {\n        chrs_read = recv(sockfd, buf, iBufSize, 0);\n        if (chrs_read &lt;= 0)\n        {\n            if (chrs_read == SOCKET_ERROR)\n                MessageBox(\"Unable to read message\");\n            break;\n        }\n        sBuffer.append(buf, chrs_read);\n    }\n    while (true);\n\n    free(buf);\n    buf = NULL;\n}\n</code></pre>\n\n<p>Note that this logic is reading until the socket disconnects or encounters an error while reading.  That is OK if there is only ever 1 message per socket connection.  But if you intend to send multiple XML messages on a single connection, that will not work anymore.  You would need to put a delimiter in between the messages so you know where one message ends and the next begins.  That could be a leading header specifying the message's length, or it could be a unique terminator sequence at the end of the message.</p>\n"}], "owner": {"reputation": 42, "user_id": 5868856, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/19438b6acc7c13d5696f0da37ba8e9d9?s=128&d=identicon&r=PG&f=1", "display_name": "anc", "link": "https://stackoverflow.com/users/5868856/anc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 798, "favorite_count": 0, "accepted_answer_id": 38883523, "answer_count": 2, "score": -1, "last_activity_date": 1470864347, "creation_date": 1470850339, "last_edit_date": 1470850385, "question_id": 38879976, "link": "https://stackoverflow.com/questions/38879976/function-setsockopt-seems-not-working", "title": "Function setsockopt seems not working", "body": "<p>I'm working with the WinSock2 and I would like to receive all my packages at once (they are XML files).\nRight now I'm making as below because setsockopt seems ignoring my \"order\" to set a size of the receiving buffer, but it always returns OK from the execution:</p>\n\n<pre><code>#define IP_BUF_SZ 2000000\n//...\nstd::string sBuffer;\nlong chrs_read = 0;\nint iBufSize = IP_BUF_SZ;\n//...\nif (setsockopt(sockfd, SOL_SOCKET, SO_RCVBUF, (char*)&amp;iBufSize, sizeof(int)) == SOCKET_ERROR)\n    MessageBox(\"Unable to increase\"); //never reachs here\n\ndo\n{\n    char* buf = (char*)MALLOCZ(IP_BUF_SZ + 1000);\n    chrs_read = recv(sockfd, buf, IP_BUF_SZ, 0);\n\n    if (chrs_read &gt; 0)\n        sBuffer += std::string(buf);\n\n    FREE(buf);\n    buf = NULL;\n}\nwhile (chrs_read &gt; 0);\n</code></pre>\n\n<p>but I would like to do something like that (all at once):</p>\n\n<pre><code>setsockopt(IP_STATUS[CHAN_EPIC].sockfd, SOL_SOCKET, SO_RCVBUF, (char*)&amp;iBufSize, sizeof(int);\nchar* buf = (char*)MALLOCZ(IP_BUF_SZ + 1000);\nchrs_read = recv(IP_STATUS[CHAN_EPIC].sockfd, buf, IP_BUF_SZ, 0); \nsBuffer += std::string(buf);\n</code></pre>\n\n<p><strong>Remark</strong>: my files are less than IP_BUF_SZ sized.\nThank you in advance.</p>\n"}, {"tags": ["c++", "initialization", "post-increment"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1470850032, "post_id": 38879880, "comment_id": 65120871, "body": "Because declarations and definitions aren&#39;t general expressions. Also in the case of <code>double good++;</code>, remember that non-static local variables are uninitialized and have an indeterminate value, so using them in any way would lead to undefined behavior anyway."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1470850124, "post_id": 38879880, "comment_id": 65120921, "body": "Do note your first example is not good.  It is UB as <code>good</code> is never initialized."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1470850161, "post_id": 38879880, "comment_id": 65120947, "body": "The first isn&#39;t valid either."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1470850398, "post_id": 38879880, "comment_id": 65121070, "body": "What do you expect the values of <code>good</code> to be in either of your examples?"}, {"owner": {"reputation": 124, "user_id": 4951232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMsLd.png?s=128&g=1", "display_name": "Darth Futuza", "link": "https://stackoverflow.com/users/4951232/darth-futuza"}, "reply_to_user": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1470850440, "post_id": 38879880, "comment_id": 65121093, "body": "It compiles on GCC 4.9.2...I&#39;m not asking why it isn&#39;t a good idea to do this (I already know that), I want to know why the first compiles and the second does not.  @GManNickG some random value in memory incremented by 1."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1470850499, "post_id": 38879880, "comment_id": 65121135, "body": "you shouldnt expect anything from UB other than UB"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1470850543, "post_id": 38879880, "comment_id": 65121170, "body": "The first compiles because it is <b><i>sytactically</i></b> valid C++, even if it leads to undefined behavior. The compiler can (and will if you enable more warnings which I recommend) emit a warning for the first case though. The second is simply not valid according to the C++ specification."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1470850626, "post_id": 38879880, "comment_id": 65121212, "body": "What would you expect <code>double good++;</code> to be?"}, {"owner": {"reputation": 124, "user_id": 4951232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMsLd.png?s=128&g=1", "display_name": "Darth Futuza", "link": "https://stackoverflow.com/users/4951232/darth-futuza"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1470850802, "post_id": 38879880, "comment_id": 65121309, "body": "@Joachim Pileborg, That&#39;s what I&#39;m wondering about in particular, why the c++ specification allows the first, but not the second.  Do you have a source that I can read up on that more?"}, {"owner": {"reputation": 124, "user_id": 4951232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMsLd.png?s=128&g=1", "display_name": "Darth Futuza", "link": "https://stackoverflow.com/users/4951232/darth-futuza"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470850963, "post_id": 38879880, "comment_id": 65121404, "body": "@NathanOliver I am not expecting any particular value, I just expect it to be initialized to some random garbage value in memory and then that value to be incremented by one."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1470851065, "post_id": 38879880, "comment_id": 65121450, "body": "@DarthFutuza What would be the use case for such sillyness?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470851069, "post_id": 38879880, "comment_id": 65121455, "body": "@DarthFutuza What possible purpose would that serve?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1470851085, "post_id": 38879880, "comment_id": 65121473, "body": "@DarthFutuza You can always <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/n4594.pdf\" rel=\"nofollow noreferrer\">read the draft of the upcoming C++17 standard (PDF)</a>. Declarations have not changed in the new specification to allow (or disallow) silliness like this."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1470851140, "post_id": 38879880, "comment_id": 65121505, "body": "@DarthFutuza If you want random numbers use one of the standard random number generators."}, {"owner": {"reputation": 124, "user_id": 4951232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMsLd.png?s=128&g=1", "display_name": "Darth Futuza", "link": "https://stackoverflow.com/users/4951232/darth-futuza"}, "edited": false, "score": 0, "creation_date": 1470851213, "post_id": 38879880, "comment_id": 65121545, "body": "I&#39;m not asking to solve a practical problem, I am just trying to understand why the standard is the way it is."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1470851428, "post_id": 38879880, "comment_id": 65121676, "body": "Its pointless so why even bother.  Somewhere in the grammar it will spell it out but do you really need it spelled out?  <code>double good++;</code> is nonsense and should not be allowed.  The first code block should also not be allowed but it is a much more difficult problem to find in all cases so it is not, not required to compile."}, {"owner": {"reputation": 124, "user_id": 4951232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMsLd.png?s=128&g=1", "display_name": "Darth Futuza", "link": "https://stackoverflow.com/users/4951232/darth-futuza"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470851777, "post_id": 38879880, "comment_id": 65121874, "body": "@NathanOliver because I&#39;m curious and I feel the same way.  Why should the first be allowed and not the second?  They both lead to generally bad coding practices and I can&#39;t see any practical use for allowing either.  I thought maybe there&#39;s a reason for the first to be allowed, but from what it sounds like there isn&#39;t one."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470851909, "post_id": 38879880, "comment_id": 65121947, "body": "The first one is legal grammar so it is allowed.  It is UB but finding it can be very hard so it The standard labeled it as UB and no diagnostic is required."}, {"owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1470851943, "post_id": 38879880, "comment_id": 65121976, "body": "It appears <code>double good++;</code> is supposed to make <code>good</code> even &quot;better&quot; than <code>double</code>? In that case, <code>long double good;</code> is what you really want ;)"}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1470862147, "post_id": 38879880, "comment_id": 65127481, "body": "Languages aren&#39;t designed in the &quot;everything is possible, okay now what&#39;s not allowed&quot; fashion. They&#39;re designed in &quot;nothing is possible, okay now what will we allow&quot; fashion. It doesn&#39;t exist because nobody made it so. People probably won&#39;t bother to take the time to make it so because there already exists ways to get that result trivially."}], "answers": [{"comments": [{"owner": {"reputation": 124, "user_id": 4951232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMsLd.png?s=128&g=1", "display_name": "Darth Futuza", "link": "https://stackoverflow.com/users/4951232/darth-futuza"}, "edited": false, "score": 0, "creation_date": 1470851955, "post_id": 38880426, "comment_id": 65121982, "body": "Thank you, this actually brings a lot of sense to it.  The first is allowed because separately the statements are valid, because of their potential use - but together do not do anything useful.  Multiple statements generally aren&#39;t context sensitive, which is my bad in assuming they would be."}], "tags": [], "owner": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "is_accepted": true, "score": 2, "last_activity_date": 1470851964, "last_edit_date": 1470851964, "creation_date": 1470851778, "answer_id": 38880426, "question_id": 38879880, "link": "https://stackoverflow.com/questions/38879880/why-cant-variables-be-declared-and-modified-at-once-c/38880426#38880426", "title": "Why can&#39;t variables be declared and modified at once? (C++)", "body": "<p>You practically already answered your question: Because declaration does not assign a value. Therefore your second sample <strong><em>never</em></strong> makes sense.</p>\n\n<p>The first sample consists of two separate statements each of which could make sense in a certain context. Therefore it compiles.</p>\n"}], "owner": {"reputation": 124, "user_id": 4951232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMsLd.png?s=128&g=1", "display_name": "Darth Futuza", "link": "https://stackoverflow.com/users/4951232/darth-futuza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 38880426, "answer_count": 1, "score": -7, "last_activity_date": 1470851964, "creation_date": 1470849916, "question_id": 38879880, "link": "https://stackoverflow.com/questions/38879880/why-cant-variables-be-declared-and-modified-at-once-c", "title": "Why can&#39;t variables be declared and modified at once? (C++)", "body": "<p>Why is this valid:</p>\n\n<pre><code>int main()\n{\n double good; good++;\n return 0;\n}\n</code></pre>\n\n<p>but this is not:</p>\n\n<pre><code>int main()\n{\n double good++;\n return 0;\n}\n</code></pre>\n\n<p>I know that normally you want to initialize variables to some value before increment it (because then it'd just contain random garbage from memory), but I'm just curious why the latter does not allow this.  Doesn't the post-increment operator, happen after the value is returned?  It would make sense for ++good not to work, but I don't understand why good++ doesn't.</p>\n"}, {"tags": ["c++", "linker", "ld"], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1470850116, "creation_date": 1470850116, "answer_id": 38879917, "question_id": 38879807, "link": "https://stackoverflow.com/questions/38879807/link-shared-library-with-main-to-executables-providing-a-handler-function-only/38879917#38879917", "title": "Link shared library with main() to executables providing a handler function only", "body": "<p>The trouble looks to be that you are linking <code>libMain.so</code> with <code>main.so</code> and expect <code>libMain.so</code> to expose <code>main.so</code> symbols.</p>\n\n<p>Two solutions come to mind:</p>\n\n<ol>\n<li>Link <code>libMain.so</code> to <code>main.so</code> with <code>-r</code> flag. <code>gcc -shared -r -o libMain.so main.so</code>.</li>\n<li>Link <code>libMain.so</code> to <code>main.o</code> (the object file instead of <code>.so</code>).</li>\n</ol>\n\n<p>And another note is that you should use <code>g++</code> for compiling and linking C++ code.</p>\n"}, {"comments": [{"owner": {"reputation": 27749, "user_id": 591495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74a70bd517ad39fc6512f6d02c6f4ae9?s=128&d=identicon&r=PG", "display_name": "obataku", "link": "https://stackoverflow.com/users/591495/obataku"}, "edited": false, "score": 0, "creation_date": 1470850819, "post_id": 38880068, "comment_id": 65121313, "body": "to ditch the second shared object file entirely we can use <code>gcc -shared -o libMain.so -fPIC main.cpp</code> directly"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 2, "last_activity_date": 1470850643, "creation_date": 1470850643, "answer_id": 38880068, "question_id": 38879807, "link": "https://stackoverflow.com/questions/38879807/link-shared-library-with-main-to-executables-providing-a-handler-function-only/38880068#38880068", "title": "Link shared library with main() to executables providing a handler function only", "body": "<p>There's nothing technically wrong with putting the <code>main</code> function in a shared library, as long as it somehow ends up \"in\" your final executable. It's weird, and unconventional, and probably very confusing, but technically there's no reason that it shouldn't work.</p>\n\n<p>But what you have here are <em>two</em> shared libraries - <code>libMain.so</code> and <code>main.so</code>. The former doesn't actually do anything except link to the latter. The problem is that a shared library doesn't \"include\" another shared library &mdash; it just extends the dependency tree. It doesn't \"contain\" any functions. Those functions are still found only in <code>main.so</code>.</p>\n\n<p><strong>So, your final executable must link against <code>main.so</code> as well.</strong></p>\n\n<p>I'd recommend losing <code>libMain.so</code> altogether, since it's not doing anything. And if you use <code>gcc</code> (rather than <code>g++</code>) to compile C++ code, you're not going to be linking the C++ standard library runtime, so fix that too.</p>\n"}], "owner": {"reputation": 327, "user_id": 2685189, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/74d91b5a5b3ce513dbc54f86cf2baee1?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Bergemann", "link": "https://stackoverflow.com/users/2685189/frank-bergemann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 38880068, "answer_count": 2, "score": 0, "last_activity_date": 1470850643, "creation_date": 1470849666, "last_edit_date": 1470850304, "question_id": 38879807, "link": "https://stackoverflow.com/questions/38879807/link-shared-library-with-main-to-executables-providing-a-handler-function-only", "title": "Link shared library with main() to executables providing a handler function only", "body": "<p>How can I provide a <strong>shared</strong> library including the <code>main()</code> routine for creating executables, that provide only a handler() routine?</p>\n\n<pre><code>frank@frank-M470-2:/media/Workspace/eclipse/libMain$ cat Makefile\n\nmain.so: main.cpp\n    gcc -shared -o main.so -fPIC main.cpp\n\nlibMain.so: main.so\n    gcc -shared -o libMain.so main.so\n\ntest1:  libMain.so test1.o\n    g++ -o test1 test1.o -L. -lMain\n\ntest2:  libMain.so test2.o\n    g++ -o test2 test2.o -L. -lMain\n\nall: test1 test2\n\nclean:\n    rm -f test1 test2 libMain.so *.o *.so\n\nfrank@frank-M470-2:/media/Workspace/eclipse/libMain$ cat main.cpp\n\nvoid DoSomething(void);\n\nint main(int, char **)\n{\n   DoSomething();\n   return 0;\n}\n\nfrank@frank-M470-2:/media/Workspace/eclipse/libMain$ cat test1.cpp\n#include &lt;iostream&gt;\n\nvoid DoSomething(void)\n{\n  std::cout &lt;&lt; \"hello from test1\" &lt;&lt; std::endl;\n}\n\nfrank@frank-M470-2:/media/Workspace/eclipse/libMain$ cat test2.cpp\n#include &lt;iostream&gt;\n\nvoid DoSomething(void)\n{\n  std::cout &lt;&lt; \"hello from test2\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>This works:</p>\n\n<p>> g++ -o test1 test1.o main.so <br>\nBecause main() is in main.so\nBut it's not available anymore in libMain.so (?!)</p>\n"}, {"tags": ["c++", "visual-studio", "build", "visual-studio-2015"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1470851927, "post_id": 38879736, "comment_id": 65121960, "body": "You could create a batch file that executes msbuild to build the configurations you want in the order you want."}], "answers": [{"tags": [], "owner": {"reputation": 1118, "user_id": 2191849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fOaLe.jpg?s=128&g=1", "display_name": "static_cast", "link": "https://stackoverflow.com/users/2191849/static-cast"}, "is_accepted": false, "score": 0, "last_activity_date": 1544124435, "last_edit_date": 1544124435, "creation_date": 1470850152, "answer_id": 38879928, "question_id": 38879736, "link": "https://stackoverflow.com/questions/38879736/visual-studio-how-to-chain-build-of-projects-with-different-bitness/38879928#38879928", "title": "Visual Studio - how to chain build of projects with different bitness", "body": "<p>Visual Studio has a \"Batch Build\" option. Build -> Batch Build. This will support building multiple configurations. Which, as I understand your question, is what you want.</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/jj651644.aspx\" rel=\"nofollow noreferrer\">Here</a> is the MS link.</p>\n\n<p>I don't think you can add this permanently to the solution/project configuration.</p>\n"}], "owner": {"reputation": 2687, "user_id": 1802974, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0066445dcc2757c44db6d1e61ae10a7d?s=128&d=identicon&r=PG", "display_name": "Victor Mezrin", "link": "https://stackoverflow.com/users/1802974/victor-mezrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "closed_date": 1470853724, "answer_count": 1, "score": 1, "last_activity_date": 1544124435, "creation_date": 1470849395, "question_id": 38879736, "link": "https://stackoverflow.com/questions/38879736/visual-studio-how-to-chain-build-of-projects-with-different-bitness", "closed_reason": "Duplicate", "title": "Visual Studio - how to chain build of projects with different bitness", "body": "<p>I have a C++ solution with several projects, for example <code>A</code> and <code>B</code>.\nIn build process I need several sequential steps:</p>\n\n<ul>\n<li><code>A x32</code></li>\n<li><code>A x64</code></li>\n<li><code>B x32</code></li>\n</ul>\n\n<p>This needed because results of <code>A x32</code> and <code>A x64</code> used in pre-build event of <code>B x32</code>.</p>\n\n<p>It's easy to force Visual Studio compile <code>A x32</code> before <code>B x32</code> - just add <code>A</code> to <code>B</code>'s dependencies. But how we can force Visual Studio to compile <code>A x64</code> before <code>B x32</code>?</p>\n\n<p>I use Visual Studio 2015</p>\n"}, {"tags": ["c++", "linux", "assembly", "g++", "binutils"], "comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1470849989, "post_id": 38879672, "comment_id": 65120842, "body": "Try using <code>g++ -v -c hello.cpp</code> to see what sub-commands the top-level g++ driver program runs."}, {"owner": {"reputation": 68, "user_id": 4567685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sp8bR.png?s=128&g=1", "display_name": "Leso_KN", "link": "https://stackoverflow.com/users/4567685/leso-kn"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1470850101, "post_id": 38879672, "comment_id": 65120911, "body": "Thanks for the quick reply, i&#39;ll give it a try :) (rhime)"}, {"owner": {"reputation": 2151, "user_id": 4089452, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ff06d18979a4020538af1ebecbbea27b?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Power", "link": "https://stackoverflow.com/users/4089452/alessandro-power"}, "edited": false, "score": 0, "creation_date": 1470850420, "post_id": 38879672, "comment_id": 65121084, "body": "To clarify: have you tried to compile a simple Hello World executable?"}, {"owner": {"reputation": 68, "user_id": 4567685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sp8bR.png?s=128&g=1", "display_name": "Leso_KN", "link": "https://stackoverflow.com/users/4567685/leso-kn"}, "edited": false, "score": 0, "creation_date": 1470850511, "post_id": 38879672, "comment_id": 65121149, "body": "Yes, just did that now, but same error again :/ <code>int main() {     return 0; }</code>"}, {"owner": {"reputation": 68, "user_id": 4567685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sp8bR.png?s=128&g=1", "display_name": "Leso_KN", "link": "https://stackoverflow.com/users/4567685/leso-kn"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1470850875, "post_id": 38879672, "comment_id": 65121350, "body": "@PeterCordes Here&#39;s the <code>g++ -v -c HelloWorld.cpp</code> output: <a href=\"http://pastebin.com/Ks2be0hL\" rel=\"nofollow noreferrer\">pastebin.com/Ks2be0hL</a>"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1470850957, "post_id": 38879672, "comment_id": 65121400, "body": "<a href=\"https://stackoverflow.com/posts/38879672/edit\">Edit</a> it into your question.  And also the output of <code>type -a as</code>, and <code>as --version</code>.  Maybe also <code>dpkg -S &#47;usr&#47;bin&#47;as</code> to see which package provided that <code>as</code>."}], "answers": [{"comments": [{"owner": {"reputation": 68, "user_id": 4567685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sp8bR.png?s=128&g=1", "display_name": "Leso_KN", "link": "https://stackoverflow.com/users/4567685/leso-kn"}, "edited": false, "score": 0, "creation_date": 1470853005, "post_id": 38880603, "comment_id": 65122592, "body": "Thanks for your reply! I already thought of that, but just to make sure: you really want me to <code>apt-get purge binutils</code>? Because it would look like <a href=\"http://hubit.selfhost.eu:9812/LsoftProducts/laCaja/fl/%C3%96ffentlich/Purging%20binutils.png\" rel=\"nofollow noreferrer\">this</a>... This is really not meant saccastic, i&#39;m just not sure if i should do this :/ (also note the <code>ubuntu-desktop*</code> near the end..)"}, {"owner": {"reputation": 3022, "user_id": 5848185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb8aeaba2acf07cd6dbd0a44b8862484?s=128&d=identicon&r=PG&f=1", "display_name": "GAD3R", "link": "https://stackoverflow.com/users/5848185/gad3r"}, "reply_to_user": {"reputation": 68, "user_id": 4567685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sp8bR.png?s=128&g=1", "display_name": "Leso_KN", "link": "https://stackoverflow.com/users/4567685/leso-kn"}, "edited": false, "score": 0, "creation_date": 1470856380, "post_id": 38880603, "comment_id": 65124495, "body": "Run <code>apt-get remove</code> without <code>purge</code>, <code>purge</code> will remove all dependencies"}], "tags": [], "owner": {"reputation": 3022, "user_id": 5848185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb8aeaba2acf07cd6dbd0a44b8862484?s=128&d=identicon&r=PG&f=1", "display_name": "GAD3R", "link": "https://stackoverflow.com/users/5848185/gad3r"}, "is_accepted": false, "score": 0, "last_activity_date": 1470852438, "creation_date": 1470852438, "answer_id": 38880603, "question_id": 38879672, "link": "https://stackoverflow.com/questions/38879672/g-as-fails-to-determine-which-assembler-to-run/38880603#38880603", "title": "g++: as fails to determine which assembler to run", "body": "<p>Remove <code>binutils</code> and reinstall it using the following steps:</p>\n\n<p>Create an installation directory <code>/opt/cross</code>, and make sure you have write permission to  .</p>\n\n<pre><code>sudo mkdir -p /opt/cross\nsudo chown user /opt/cross\nexport PATH=/opt/cross/bin:$PATH\n</code></pre>\n\n<p>Download and install</p>\n\n<pre><code>wget http://mirrors.muzzy.it/gnu/binutils/binutils-2.9.tar.gz\ntar xvf binutils-2.9.tar.gz\ncd binutils-2.9\nlinux32 ./configure --prefix=/opt/cross --target=aarch64-linux --disable-multilib\n</code></pre>\n\n<p>If dosn't work remove <code>--target=aarch64-linux</code>, the <code>--disable-multilib</code> option means that we only want our Binutils installation to work with programs and libraries using the aarch64 instruction set, and not any related instruction sets such as aarch32, run:</p>\n\n<pre><code>linux32 ./configure --prefix=/opt/cross --disable-multilib\nlinux32 make\nlinux32 make install\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68, "user_id": 4567685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sp8bR.png?s=128&g=1", "display_name": "Leso_KN", "link": "https://stackoverflow.com/users/4567685/leso-kn"}, "edited": false, "score": 0, "creation_date": 1470854078, "post_id": 38881048, "comment_id": 65123205, "body": "Ah, i see. Thank you, i&#39;ll try it :)"}, {"owner": {"reputation": 68, "user_id": 4567685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sp8bR.png?s=128&g=1", "display_name": "Leso_KN", "link": "https://stackoverflow.com/users/4567685/leso-kn"}, "edited": false, "score": 0, "creation_date": 1470854300, "post_id": 38881048, "comment_id": 65123348, "body": "Great, compiling the HelloWorld.cpp now works. :) But for the two QT-applications i&#39;ve tested it for, there&#39;s now a new error. I&#39;ll edit it in."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 68, "user_id": 4567685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sp8bR.png?s=128&g=1", "display_name": "Leso_KN", "link": "https://stackoverflow.com/users/4567685/leso-kn"}, "edited": false, "score": 0, "creation_date": 1470854873, "post_id": 38881048, "comment_id": 65123628, "body": "@Leso_KN: If it&#39;s a different error, then it&#39;s a different question and you should post it separately instead of changing the question and invalidating this answer."}, {"owner": {"reputation": 68, "user_id": 4567685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sp8bR.png?s=128&g=1", "display_name": "Leso_KN", "link": "https://stackoverflow.com/users/4567685/leso-kn"}, "edited": false, "score": 0, "creation_date": 1470854944, "post_id": 38881048, "comment_id": 65123669, "body": "oh, ok! Well then: closed :)"}, {"owner": {"reputation": 68, "user_id": 4567685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sp8bR.png?s=128&g=1", "display_name": "Leso_KN", "link": "https://stackoverflow.com/users/4567685/leso-kn"}, "edited": false, "score": 0, "creation_date": 1470855537, "post_id": 38881048, "comment_id": 65124019, "body": "Found the solution anyways; i was able to solve it with just the same trick (<code>which ld</code> gave me one result, but i renamed it anyways - seems like there <i>was</i> another ld, that&#39;s why i was confused first). But thanks all again, thread closed :)"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 68, "user_id": 4567685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sp8bR.png?s=128&g=1", "display_name": "Leso_KN", "link": "https://stackoverflow.com/users/4567685/leso-kn"}, "edited": false, "score": 0, "creation_date": 1470855784, "post_id": 38881048, "comment_id": 65124159, "body": "@Leso_KN: <code>which</code> only shows the first hit, like the <code>type</code> shell builtin without <code>-a</code>.  But ok, that does sound like it was part of the same problem after all.  I should have said &quot;if it&#39;s a different kind of error&quot;, or something, since an edit about /usr/local/bin/ld being a problem would have been ok.  (but of course the answer doesn&#39;t really change, as you figured out :)"}, {"owner": {"reputation": 68, "user_id": 4567685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sp8bR.png?s=128&g=1", "display_name": "Leso_KN", "link": "https://stackoverflow.com/users/4567685/leso-kn"}, "edited": false, "score": 0, "creation_date": 1470855896, "post_id": 38881048, "comment_id": 65124215, "body": "Ah ok, i didn&#39;t know that ;) Yes, in the end it was kind of the same error <i>and</i> (moreover) it indeed <i>was</i> related to that iOS-sdk thing (search for <code>ld: unknown option: -plugin</code> - only osx issues xD"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 68, "user_id": 4567685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sp8bR.png?s=128&g=1", "display_name": "Leso_KN", "link": "https://stackoverflow.com/users/4567685/leso-kn"}, "edited": false, "score": 0, "creation_date": 1470855978, "post_id": 38881048, "comment_id": 65124263, "body": "@Leso_KN: <code>which</code> has a man page which documents its options.  <code>which -a</code> would have worked.  But you should prefer the <code>type</code> shell built-in for most uses because it shows you aliases and shell functions as well as searching <code>$PATH</code>."}, {"owner": {"reputation": 68, "user_id": 4567685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sp8bR.png?s=128&g=1", "display_name": "Leso_KN", "link": "https://stackoverflow.com/users/4567685/leso-kn"}, "edited": false, "score": 0, "creation_date": 1470856115, "post_id": 38881048, "comment_id": 65124349, "body": "ok, i&#39;ll use that method in the future. Thank you for your help again :)"}, {"owner": {"reputation": 449, "user_id": 1019109, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8b44713fe2d3264569c56626b2707dd?s=128&d=identicon&r=PG", "display_name": "interDist", "link": "https://stackoverflow.com/users/1019109/interdist"}, "edited": false, "score": 0, "creation_date": 1582672217, "post_id": 38881048, "comment_id": 106856655, "body": "I just had the same exact problem with <code>as</code> and <code>ld</code>. maybe it is related somehow to Ubuntu (incorrect default package?..)."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 449, "user_id": 1019109, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8b44713fe2d3264569c56626b2707dd?s=128&d=identicon&r=PG", "display_name": "interDist", "link": "https://stackoverflow.com/users/1019109/interdist"}, "edited": false, "score": 0, "creation_date": 1582673607, "post_id": 38881048, "comment_id": 106856998, "body": "@interDist: I&#39;m pretty sure no packages distributed as an official part of Ubuntu install anything in /usr/local/.  So no, not a &quot;default&quot; package, but possibly some third-party package that installed a version of <code>as</code>"}], "tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 2, "last_activity_date": 1470853976, "creation_date": 1470853976, "answer_id": 38881048, "question_id": 38879672, "link": "https://stackoverflow.com/questions/38879672/g-as-fails-to-determine-which-assembler-to-run/38881048#38881048", "title": "g++: as fails to determine which assembler to run", "body": "<p><code>type -a as</code> says <code>as</code> is <code>/usr/local/bin/as</code>.  This is what gcc is running, not <code>/usr/bin/as</code>, because <code>/usr/local/bin/as</code> is found first in your <code>$PATH</code> search order.  This is why re-installing packages and so on is having no effect: something else you installed (probably manually) installed a non-standard <code>as</code>.</p>\n\n<p>Have a look at <code>/usr/local/bin/as</code> and figure out where it came from, and what to do with it.  For now you can just rename it to <code>as.unknown</code> or something, and then everything will use the normal system assembler (<code>/usr/bin/as</code>).</p>\n"}], "owner": {"reputation": 68, "user_id": 4567685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sp8bR.png?s=128&g=1", "display_name": "Leso_KN", "link": "https://stackoverflow.com/users/4567685/leso-kn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 0, "accepted_answer_id": 38881048, "answer_count": 2, "score": 1, "last_activity_date": 1470854463, "creation_date": 1470849140, "last_edit_date": 1592644375, "question_id": 38879672, "link": "https://stackoverflow.com/questions/38879672/g-as-fails-to-determine-which-assembler-to-run", "title": "g++: as fails to determine which assembler to run", "body": "<p>Today I wanted to recompile one of my projects. Compiling this project had already worked on my machine, but this time an error occured.</p>\n<p>The compiler output goes:</p>\n<pre><code>fatal error: as: unknown host architecture (can't determine which assembler to run)`\n</code></pre>\n<p>for the line:</p>\n<pre><code>g++ -c -pipe -O2 -Wall -W -D_REENTRANT -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I../../.vscode -I/usr/include/qt4/QtCore -I/usr/include/qt4/QtGui -I/usr/include/qt4 -I. -I../../.vscode -I. -o Main.o ../../Main.cpp\n</code></pre>\n<p>I tried to compile some other projects, but realized, that I wouldn't be able to compile anything using any c++ compiler, so I looked it up.</p>\n<p>The only fitting thread I found was <a href=\"https://stackoverflow.com/questions/24785554/gcc-assembler-unable-to-determine-architecture\">this one</a> but the solution 'reinstalling binutils' didn't work for me (tried <code>sudo apt-get install --reinstall binutils</code> as well as <code>--reinstall gcc</code>, <code>g++</code> and <code>build-essential</code>)</p>\n<p>One possible reason for this problem that comes to my mind is the iOS-toolchain I installed yesterday - I had to install some different clang versions - but I actually didn't change anything on the system's assembler...</p>\n<p>If someone's got an idea; any help would be appreciated :)</p>\n<hr />\n<h2>Additional info:</h2>\n<p>Ubuntu 16.04 LTS 64bit</p>\n<p>AMD FX(tm)-6300 Six-Core Processor \u00d7 6</p>\n<hr />\n<pre><code>uname -m\n</code></pre>\n<p>returns <code>x86_64</code></p>\n<hr />\n<pre><code> gcc -march=native -v -E - 2&gt;&amp;1 &lt;&lt;&lt;'' | grep &quot;cc1&quot; | egrep -o -e $'-m(arch|tune)=[^ &quot;\\']+'\n</code></pre>\n<p>returns <code>-march=bdver2</code> and <code>-mtune=bdver2</code></p>\n<hr />\n<p>already tried <code>gcc [...] -march</code> with <code>bdver2</code> and other architectures</p>\n<hr />\n<p><code>g++ -v -c HelloWorld.cpp</code> gives me: <a href=\"http://pastebin.com/Ks2be0hL\" rel=\"nofollow noreferrer\">http://pastebin.com/Ks2be0hL</a></p>\n<hr />\n<p><code>type -a as</code> says:</p>\n<pre><code>as is /usr/local/bin/as\nas is /usr/bin/as\n</code></pre>\n<hr />\n<p><code>as --version</code> sadly just show's me the error again, but <code>info as</code> tells me it's <code>binutils-2.26.1-system</code> from 2016-08-07</p>\n<hr />\n<p><code>dpkg -S /usr/bin/as</code> prints: <code>binutils: /usr/bin/as</code></p>\n"}, {"tags": ["c++", "gcc", "mingw"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1470848675, "post_id": 38879510, "comment_id": 65120133, "body": "That should not happen, looks like your installation is broken. (Also, it&#39;s old.) Did you try reinstalling?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470849052, "post_id": 38879510, "comment_id": 65120366, "body": "related/dupe: <a href=\"http://stackoverflow.com/questions/38538924/g-updated-on-mingw-gets-massive-error-messages\" title=\"g updated on mingw gets massive error messages\">stackoverflow.com/questions/38538924/&hellip;</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1470849061, "post_id": 38879510, "comment_id": 65120376, "body": "Given the first two error messages, there is something amiss with your installation.  On a Unix system, it would be as if the <code>&lt;sys&#47;types.h&gt;</code> header was not functioning.  Think seriously about whether to reinstall \u2014 that may be the easiest way to fix the problem.  Otherwise, you&#39;re down to tracking which header isn&#39;t defining <code>_ino_t</code> and <code>_dev_t</code> that should, and why it doesn&#39;t when compiling with strict C++.  It might be a bug in the system.  Can you upgrade from GCC 4.9.3 to, say, 6.1.0?  (GCC 4.9.4 was released 2016-08-03 as the last 4.9.x version.  GCC 5.4 was released at the same time.)"}, {"owner": {"reputation": 257, "user_id": 6274654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f0b36df143b09356a689cef652cd628?s=128&d=identicon&r=PG&f=1", "display_name": "ratorx", "link": "https://stackoverflow.com/users/6274654/ratorx"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1470849067, "post_id": 38879510, "comment_id": 65120382, "body": "@Baum mit Augen I&#39;ll try running the mingw update again although I did it before the trying to compile this. If my installation was proken, surely it would never compile? My program does compile, just not when using any of the -std=c++xx arguments."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1470849096, "post_id": 38879510, "comment_id": 65120398, "body": "@BaummitAugen But he says that: &quot;I&#39;m using the gcc compiler on Windows with MinGW.&quot;"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1470849153, "post_id": 38879510, "comment_id": 65120430, "body": "@ratorx Well, it doesn&#39;t compile with the standard flags although it should, looks pretty broken to me. :)"}, {"owner": {"reputation": 257, "user_id": 6274654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f0b36df143b09356a689cef652cd628?s=128&d=identicon&r=PG&f=1", "display_name": "ratorx", "link": "https://stackoverflow.com/users/6274654/ratorx"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470849237, "post_id": 38879510, "comment_id": 65120476, "body": "@Nathanoliver I know that it works when using -std=gnu++xx, but my question is more about why that&#39;s the case, because surely nothing in my code is improper c++?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1470849808, "post_id": 38879510, "comment_id": 65120764, "body": "There&#39;s a chain of questions linked to from <a href=\"http://stackoverflow.com/q/38538924\">SO 38538924</a> suggested by NathanOliver with the same symptoms.  There&#39;s nothing wrong with your source code; it is, as you say, correct. There&#39;s a bug of some sort with the MinGW installation or with the distribution (the installation reflects what was distributed but what was distributed is itself faulty). You might need to review the <code>c:\\mingw\\lib\\gcc\\mingw32\\4.9.3\\include\\c++\\bits\\postypes.h</code> file to see what&#39;s going wrong \u2014 or other files in the chain, or other files included (try <code>-H</code> to see the headers)."}], "answers": [{"tags": [], "owner": {"reputation": 257, "user_id": 6274654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f0b36df143b09356a689cef652cd628?s=128&d=identicon&r=PG&f=1", "display_name": "ratorx", "link": "https://stackoverflow.com/users/6274654/ratorx"}, "is_accepted": true, "score": 0, "last_activity_date": 1470851937, "creation_date": 1470851937, "answer_id": 38880469, "question_id": 38879510, "link": "https://stackoverflow.com/questions/38879510/include-iostream-gives-error-using-std-c11/38880469#38880469", "title": "#include &lt;iostream&gt; gives error using -std=c++11", "body": "<p>Solved by changing to mingw64 (which also uses a newer version of gcc). Seems like the problem was with either my mingw32 installation or with the distribution (as pointed out by Jonathan Leffler).\nAll the -std=c++xx parameters now work.</p>\n"}], "owner": {"reputation": 257, "user_id": 6274654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f0b36df143b09356a689cef652cd628?s=128&d=identicon&r=PG&f=1", "display_name": "ratorx", "link": "https://stackoverflow.com/users/6274654/ratorx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 939, "favorite_count": 0, "accepted_answer_id": 38880469, "answer_count": 1, "score": 0, "last_activity_date": 1470851937, "creation_date": 1470848544, "last_edit_date": 1470848871, "question_id": 38879510, "link": "https://stackoverflow.com/questions/38879510/include-iostream-gives-error-using-std-c11", "title": "#include &lt;iostream&gt; gives error using -std=c++11", "body": "<p>I'm using the gcc compiler on Windows with MinGW. Version is 4.9.3.\nThe following code gives errors when -std=c++98, -std=c++03 or -std=c++11 is used as an argument.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    std::cout &lt;&lt; \"Hello world!\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>The code compiles with no errors when -std=gnu++98, -std=gnu++03 or std=gnu++11 is used as an argument. Also, the code compiles with no errors when using no c++ version arguments (g++ test.cpp -c)</p>\n\n<p>On further investigation I found it was the #include causing issues.\nThis code produces no errors when using any of the std=c++ arguments:</p>\n\n<pre><code>int main()\n{\n    return 0;\n}\n</code></pre>\n\n<p>However, when looking for other things to include to test my code, the following works:</p>\n\n<pre><code>#include &lt;cmath&gt;\nint main()\n{\n    return 0;\n}\n</code></pre>\n\n<p>but this doesn't:</p>\n\n<pre><code>#include &lt;string&gt;\nint main()\n{\n    return 0;\n}\n</code></pre>\n\n<p>What's going on? From a brief search on gnu++, it says that it provides additional extensions but code as simple as the ones above surely shouldn't be reliant on any extensions?</p>\n\n<p>I've pasted the large error which occurs when compiling the first piece of code with g++ test.cpp -c -std=c++11. <a href=\"http://pastebin.com/k0RLtWQz\" rel=\"nofollow\">http://pastebin.com/k0RLtWQz</a></p>\n\n<p>The first messages are:</p>\n\n<pre><code>$ g++ test.cpp -c -std=c++11\nIn file included from c:\\mingw\\include\\wchar.h:208:0,\n                 from c:\\mingw\\lib\\gcc\\mingw32\\4.9.3\\include\\c++\\cwchar:44,\n                 from c:\\mingw\\lib\\gcc\\mingw32\\4.9.3\\include\\c++\\bits\\postypes.h:40,\n                 from c:\\mingw\\lib\\gcc\\mingw32\\4.9.3\\include\\c++\\iosfwd:40,\n                 from c:\\mingw\\lib\\gcc\\mingw32\\4.9.3\\include\\c++\\ios:38,\n                 from c:\\mingw\\lib\\gcc\\mingw32\\4.9.3\\include\\c++\\ostream:38,\n                 from c:\\mingw\\lib\\gcc\\mingw32\\4.9.3\\include\\c++\\iostream:39,\n                 from test.cpp:1:\nc:\\mingw\\include\\sys/stat.h:173:14: error: '_dev_t' does not name a type\n struct _stat __struct_stat_defined( _off_t, time_t );\n              ^\nc:\\mingw\\include\\sys/stat.h:173:14: error: '_ino_t' does not name a type\n struct _stat __struct_stat_defined( _off_t, time_t );\n              ^\n\u2026\n</code></pre>\n"}, {"tags": ["c++", "windbg", "critical-section"], "answers": [{"comments": [{"owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "edited": false, "score": 0, "creation_date": 1470854657, "post_id": 38879725, "comment_id": 65123535, "body": "Apropos how the recursion count goes up, I understand. But if the recursion count is at 2, how can the lock count be at 0 (or -2 depending on which listing you believe)? esp. considering if a thread calls LeaveCriticalSection <i>both</i> recursion and lock counts go down."}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "reply_to_user": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "edited": false, "score": 0, "creation_date": 1470859976, "post_id": 38879725, "comment_id": 65126393, "body": "@ForeverLearning: I have reproduced your case and updated my answer."}, {"owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "edited": false, "score": 2, "creation_date": 1470868197, "post_id": 38879725, "comment_id": 65129895, "body": "you are a Ninja! Thanks for all the help. I will look into this a bit longer and report back."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1470869848, "post_id": 38879725, "comment_id": 65130349, "body": "If I&#39;m reading that all correctly, a <code>LockCount</code> field of -2 means that one thread holds the lock and no threads are waiting for it.  Doesn&#39;t that pretty much rule out the possibility that this particular critical section is involved in a deadlock?"}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1470909351, "post_id": 38879725, "comment_id": 65145607, "body": "@HarryJohnston: exactly. I added the explanation of the -2 and this conclusion."}, {"owner": {"reputation": 2173, "user_id": 1317574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e67222870db5dfc5194cdca848c59818?s=128&d=identicon&r=PG", "display_name": "Marc Sherman", "link": "https://stackoverflow.com/users/1317574/marc-sherman"}, "edited": false, "score": 0, "creation_date": 1470921107, "post_id": 38879725, "comment_id": 65153590, "body": "Thanks for getting Steve Johnson to implement !dlk for non-managed processes!"}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "reply_to_user": {"reputation": 2173, "user_id": 1317574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e67222870db5dfc5194cdca848c59818?s=128&d=identicon&r=PG", "display_name": "Marc Sherman", "link": "https://stackoverflow.com/users/1317574/marc-sherman"}, "edited": false, "score": 0, "creation_date": 1470921410, "post_id": 38879725, "comment_id": 65153842, "body": "@MarcSherman: I&#39;m also glad he implemented it. Helped me out a couple of times already."}, {"owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1471028149, "post_id": 38879725, "comment_id": 65206304, "body": "@HarryJohnston Not sure how you figure that. LockCount starts with -1 and if a thread acquires the CS, it goes to 0. A count of 2 means, one thread acquired it and 2 other threads are waiting on it. So unless you release the CS more times than you have acquired it, how can it go below -1?"}, {"owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1471028251, "post_id": 38879725, "comment_id": 65206350, "body": "@HarryJohnston sorry. I did not notice Thomas&#39; update to this thread. He did mention I should stick to the interpretation of !locks which reports 0 and that definitely makes sense to me."}], "tags": [], "owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "is_accepted": true, "score": 7, "last_activity_date": 1470909304, "last_edit_date": 1592644375, "creation_date": 1470849345, "answer_id": 38879725, "question_id": 38879506, "link": "https://stackoverflow.com/questions/38879506/critical-section-hang-analysis-with-windbg/38879725#38879725", "title": "Critical section hang analysis with Windbg", "body": "<p>I could easily reproduce the effects of negative LockCount with a sample application, and here are my answers:</p>\n<h2>Responses to your questions</h2>\n<p>Regarding 1)</p>\n<blockquote>\n<p>Should I take MyModule!RTL_CRITICAL_SECTION as definitive clue this critical section is probably defined inside MyModule?</p>\n</blockquote>\n<p>Yes, it's your definition of a critical section, which may or may not correspond to Microsoft's definition. To use Microsoft's definition use <code>dt nt!_RTL_CRITICAL_SECTION</code></p>\n<p>Regarding 2)</p>\n<blockquote>\n<p>Is there a way to make Windbg display the actual variable name of this critical section? (i.e assuming #1 is true and this is a CS the application code has defined/access to.)</p>\n</blockquote>\n<p>Yes, if it's used by a function that's on the call stack. With <code>.frame</code>, navigate to the frme, and with <code>?? variableName</code> display the variable, e.g.</p>\n<pre><code>0:000&gt; k L2\n # ChildEBP RetAddr  \n00 0116faa4 00d67419 KERNELBASE!DebugBreak+0x2\n01 0116fc5c 00d67ebe CriticalSectionLeaveTwice!main+0x109\n0:000&gt; .frame 1\n01 0116fc5c 00d67ebe CriticalSectionLeaveTwice!main+0x109 [c:\\users\\t\\documents\\visual studio 2015\\projects\\criticalsectionleavetwice\\criticalsectionleavetwice\\criticalsectionleavetwice.cpp @ 24]\n0:000&gt; ?? CriticalSection\nstruct _RTL_CRITICAL_SECTION\n   +0x000 DebugInfo        : 0xffffffff _RTL_CRITICAL_SECTION_DEBUG\n   +0x004 LockCount        : 0n-2\n   +0x008 RecursionCount   : 0n2\n   +0x00c OwningThread     : 0x00000d6c Void\n   +0x010 LockSemaphore    : (null) \n   +0x014 SpinCount        : 0x20007d0\n</code></pre>\n<p>Regarding 3)</p>\n<blockquote>\n<p>Why do the LockCount values in the aforementioned listings at odds with each other? (one has 0 and the other has -2.)</p>\n</blockquote>\n<p>The field <code>LockCount</code> is not a true lock count any more, as explained in\n<a href=\"https://stackoverflow.com/a/7408797/480982\">this answer</a>. Relevant part:</p>\n<blockquote>\n<p>In Microsoft Windows Server 2003 Service Pack 1 and later versions of Windows, the LockCount field is parsed as follows:</p>\n<ul>\n<li>The lowest bit shows the lock status. If this bit is 0, the critical section is locked; if it is 1, the critical section is not locked.</li>\n<li>The next bit shows whether a thread has been woken for this lock. If this bit is 0, then a thread has been woken for this lock; if it is 1, no thread has been woken.</li>\n<li>The remaining bits are the ones-complement of the number of threads waiting for the lock.</li>\n</ul>\n</blockquote>\n<p>IMHO the <code>!locks</code> command should do the interpretation for you.</p>\n<p>The particular value of <code>-2</code> is <code>11111111 ... 1111110</code> in binary, so the last bit is 0, meaning that the critical section is locked. The bit before is 1, so no thread has been woken. The one's complement of the remaining is 0, which corresponds to the lock count output of <code>!locks</code>.</p>\n<p>This means, that the critical section you analyzed is not involved in a deadlock.</p>\n<p>Regarding 4)</p>\n<blockquote>\n<p>I think I understand LockCount well enough to know it can't go below -1. Not to mention RecursionCount seems to be badly out of step with LockCount.</p>\n</blockquote>\n<p>See #3.</p>\n<p>Regarding unnumbered question 5)</p>\n<blockquote>\n<p>should I just chalk this up to corrupted CS?</p>\n</blockquote>\n<p>No. It does not seem to be corrupted.</p>\n<h2>Using !dlk for deadlock analysis</h2>\n<p>To check if it's responsible for a deadlock, I suggest using <a href=\"/questions/tagged/sosex\" class=\"post-tag\" title=\"show questions tagged &#39;sosex&#39;\" rel=\"tag\">sosex</a>'s (<a href=\"http://www.stevestechspot.com/default.aspx\" rel=\"nofollow noreferrer\">download</a>) <code>!dlk</code> command. Although it's an extension for .NET primarily, I have once requested to make it work for critical sections even without .NET - and the feature was implemented in one of the newer versions of SOSex.</p>\n<p>If it could not find .NET, it'll output a warning about that fact and then continue analyzing the critical sections:</p>\n<p>In your case it may look like this:</p>\n<pre><code>0:000&gt; !dlk\nUnable to initialize .NET data interface. The CLR has not yet been loaded in the process (mscorwks/clr module not loaded).\nExamining CriticalSections...\nNo deadlocks detected.\n</code></pre>\n<p>Usage:</p>\n<pre><code>.load c:\\path\\to\\sosex.dll\n!dlk\n</code></pre>\n<p>If it identifies a deadlock, it's very easy to read. If it does not, you still need to apply other techniques, i.e. it's not a guarantee that there's no deadlock of some other kind (e.g. in case the wait chain includes other types of synchronization objects like threads, events, ...).</p>\n<p>Example output (not for critical section, but will be similar):</p>\n<pre><code>0:010&gt; !dlk\nDeadlock detected:\nCLR thread 4 holds sync block 00000000024c6970 OBJ:000000007fff0f80[System.String] STRVAL=SYNC1\n             waits sync block 00000000024c6928 OBJ:000000007fff0fa8[System.String] STRVAL=SYNC2\nCLR thread 5 holds sync block 00000000024c6928 OBJ:000000007fff0fa8[System.String] STRVAL=SYNC2\n             waits sync block 00000000024c6970 OBJ:000000007fff0f80[System.String] STRVAL=SYNC1\nCLR Thread 4 is waiting at ConsoleTestApp.ConsoleTestApp.MonitorDeadlockThreadProc()+0xa4(IL) [C:\\dev\\ConsoleTestApp\\ConsoleTestApp.cs, line 195]\nCLR Thread 5 is waiting at ConsoleTestApp.ConsoleTestApp.MonitorDeadlockThreadProc()+0xa4(IL) [C:\\dev\\ConsoleTestApp\\ConsoleTestApp.cs, line 195]\n\n1 deadlock detected. \n</code></pre>\n<h2>Hang analysis</h2>\n<p><code>!analyze -hang</code> and <a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=49924\" rel=\"nofollow noreferrer\">Debug Diag</a> may help in hang analysis.</p>\n"}], "owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2906, "favorite_count": 2, "accepted_answer_id": 38879725, "answer_count": 1, "score": 4, "last_activity_date": 1470909304, "creation_date": 1470848530, "question_id": 38879506, "link": "https://stackoverflow.com/questions/38879506/critical-section-hang-analysis-with-windbg", "title": "Critical section hang analysis with Windbg", "body": "<p>I recently got myself a dump file generated via procdump when my application remained unresponsive for a while.</p>\n\n<p>When I run !locks on the dump file, I get a lone entry that goes something like:</p>\n\n<pre><code>0:000&gt; !locks\n\nCritSec +123456 at 00123456\nWaiterWoken       No\nLockCount         0\nRecursionCount    2\nOwningThread      aaaa\nEntryCount        0\nContentionCount   0\n*** Locked\n</code></pre>\n\n<p>Just that one listing. That's all. When I drill down further with:</p>\n\n<pre><code>0:000&gt; dt RTL_CRITICAL_SECTION 00123456\nMyModule!RTL_CRITICAL_SECTION\n  +0x000 DebugInfo      : 0x00aabbcc _RTL_CRITICAL_SECTION_DEBUG\n  +0x004 LockCount      : 0n-2\n  +0x008 RecursionCount : 0n2\n  +0x00c OwningThread   : 0x0000aaaa Void\n  +0x010 LockSemaphore  : (null)\n  +0x014 SpinCount      : 0\n</code></pre>\n\n<p>Questions:</p>\n\n<p>1) Should I take <code>MyModule!RTL_CRITICAL_SECTION</code> as definitive clue this critical section is probably defined inside MyModule?</p>\n\n<p>2) Is there a way to make Windbg display the actual variable name of this critical section? (i.e assuming #1 is true and this is a CS the application code has defined/access to.)</p>\n\n<p>3) Why do the LockCount values in the aforementioned listings at odds with each other? (one has 0 and the other has -2.)</p>\n\n<p>4) I think I understand LockCount well enough to know it can't go below -1. Not to mention RecursionCount seems to be badly out of step with LockCount.</p>\n\n<p>I guess the bottom line question is should I just chalk this up to corrupted CS?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1470848587, "post_id": 38879475, "comment_id": 65120089, "body": "You mean on functions, or variables, or both?"}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 8, "creation_date": 1470849067, "post_id": 38879475, "comment_id": 65120383, "body": "For the record, I disagree with the close-vote. The question is asking for a <i>technical</i> reason why this can&#39;t be done, and the existing answer gives just such an answer--without any opinion involved."}], "answers": [{"comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 1, "creation_date": 1470848973, "post_id": 38879548, "comment_id": 65120322, "body": "It&#39;s probably also worth noting that even <code>constexpr</code> doesn&#39;t <i>guarantee</i> compile-time evaluation except when evaluated in a compile-time context (such as a template argument), although that&#39;s not explicitly part of the question."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1470849020, "post_id": 38879548, "comment_id": 65120341, "body": "@KyleStrand: You&#39;re correct that the Standard requires the compiler to detect that the expression used to initialize a <code>constexpr</code> object is precomputable (according to the rules laid out in the Standard), not always to actually do it."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 3, "creation_date": 1470849153, "post_id": 38879548, "comment_id": 65120431, "body": "I just mention this because one can easily imagine incorrect answers to the original question based on the mistaken idea that <code>constexpr</code> <i>forces</i> compile-time evaluation."}, {"owner": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1470931316, "post_id": 38879548, "comment_id": 65161195, "body": "This answer is a pretty good one.  It&#39;s in two parts.  The first part claims that requiring constexpr provides a useful diagnostic ability.  I&#39;m not sold on this especially given the convenience of not having to explicitly apply the keyword constexpr."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1470931701, "post_id": 38879548, "comment_id": 65161404, "body": "@RobertRamey: The very first part tells you that good compilers will optimze and precompute at compile-time in many cases even when <code>constexpr</code> is not specified.  That&#39;s your &quot;convenience&quot;.  The keyword gives you the diagnostic, plus the ability to use the result in places where a compile-time constant is required -- and in those places implicit optimizations will never get you there because they don&#39;t yield a compile-time constant expression."}, {"owner": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1470931717, "post_id": 38879548, "comment_id": 65161414, "body": "The second part hinges on my usage of the phrase &quot;if possible&quot; and suggests the phrase &quot;Computable at compile-time&quot;.  I would certainly be fine with that.  Basically my question is why the constexpr semantics cannot be the default - perhaps with  a different keyword &quot;runtime only&quot; to flag functions which might look &quot;computable at runtime&quot; but which in fact are not.  Just musing here as it&#39;s frustrates me no end that being able to use header only library functions at compile time (binary_search etc) would permit me to write more correct code and do more work at compile time."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1470931954, "post_id": 38879548, "comment_id": 65161550, "body": "@RobertRamey: Sorry I&#39;d intended for what you call &quot;the second part&quot; to be a footnote, but while I used the footnote reference in the main answer, I&#39;d missed it in the note.  Edited to fix formatting."}, {"owner": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1470943293, "post_id": 38879548, "comment_id": 65167687, "body": "@BenVoigt &quot; implicit optimizations will never get you there because they don&#39;t yield a compile-time constant expression&quot;.  That&#39;s why I don&#39;t want an implicit optimization.  I want &quot;implicit&quot; constexpr which quite a different thing.  I want to use &quot;Computable at compile-time&quot; expressions at compile time without having to be explicit about it.  I appreciate your efforts, but I&#39;m still not convinced that it&#39;s not doable and that it&#39;s not a good idea."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1470945789, "post_id": 38879548, "comment_id": 65168904, "body": "@RobertRamey: So when you use an expression, any complex expression, where a compile-time constant is required, and the compiler can&#39;t determine the result at compile time, what is the diagnostic you get?  Right now, <code>constexpr</code> allows the compiler to direct you to the portion of the code where the marking for compile-time-computable and reality don&#39;t match.  Without the marking, any code involved in the computation could be the culprit and the compiler can do nothing to help you find it."}, {"owner": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1471028221, "post_id": 38879548, "comment_id": 65206335, "body": "&quot;... what is the diagnostic you get?&quot;  answer: the same diagnostic you get now.  Right now is says &quot;not a constexpr expression&quot; or something similar.  I would expect to get &quot;cannot be used as a constant expression because ... is not computable at compile time&quot;.  The effect would be exactly the same as if one went through all the libraries and code and marked all pure functions &quot;constexpr&quot;.  I&#39;m still not seeing a problem with this."}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 17, "last_activity_date": 1470931874, "last_edit_date": 1470931874, "creation_date": 1470848676, "answer_id": 38879548, "question_id": 38879475, "link": "https://stackoverflow.com/questions/38879475/why-cant-constexpr-just-be-the-default/38879548#38879548", "title": "Why can&#39;t constexpr just be the default?", "body": "<p>It already is permitted to evaluate side-effect-free computations at compile time, under the as-if rule.</p>\n\n<p>What <code>constexpr</code> does is provide guarantees on what data-flow analysis a compliant compiler is <em>required</em> to do to detect<sup>1</sup> compile-time-computable expressions, and also allow the programmer to express that intent so that they get a diagnostic if they accidentally do something that cannot be precomputed.</p>\n\n<p>Making <code>constexpr</code> the default would eliminate that very useful diagnostic ability.</p>\n\n<hr>\n\n<p><sup>1</sup> In general, requiring \"evaluate all expressions at compile time if possible\" is a non-starter, because detecting the \"if possible\" requires solving the Halting Problem, and computer scientists know that this is not possible in the general case.  So instead a relaxation is used where the outputs are { \"Computable at compile-time\", \"Not computable at compile-time <em>or couldn't decide</em>\" }.  And the ability of different compilers to decide would depend on how smart their test was, which would make this feature non-portable.  <code>constexpr</code> defines the exact test to use.  A smarter compiler can still pre-compute even more expressions than the Standard test dictates, but if they fail the test, they can't be marked <code>constexpr</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1471028766, "post_id": 38902021, "comment_id": 65206606, "body": "&quot;I&#39;m not sure how you could specify this portably ...&quot; easy - the same way that the compiler currently determines whether constexpr is used correctly.  The diagnostics are already implemented.  But the are only applied to expressions marked as constexpr.  I propose to apply them to any expression invoked at compile time.  That&#39;s all."}, {"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "reply_to_user": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1471032130, "post_id": 38902021, "comment_id": 65208230, "body": "@RobertRamey If I&#39;m writing a library and there are functions I intend to be usable in a context requiring a compile time constant then without <code>constexpr</code> I can only get a diagnostic when they&#39;re used. Maybe that&#39;s ok if I have comprehensive unit tests but then there&#39;s a documentation issue for clients of the library. How do they know if a given function is intended to be <code>constexpr</code> and can be relied upon to remain so in future versions of the library or just happens to be <code>constexpr</code> as currently implemented? How would you rely on anything in the standard library being portably <code>constexpr</code>?"}, {"owner": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1471036953, "post_id": 38902021, "comment_id": 65210255, "body": "first question - If you want to be sure something is constexpr you would have to explicitly test it - true.  This is more or less similar to saying - if you want something to be constexpr you have to say so.  I don&#39;t disagree with this."}, {"owner": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1471037209, "post_id": 38902021, "comment_id": 65210346, "body": "second question - if you intend that something be constexpr and don&#39;t create a test for it and the you change it, user code could be effected.  This is currently true for all code - especially that which is templates and will break if requirements are changed.  To the extent this is currently handled at all, it is currently handled via static_asserts, concepts, type requirements etc. It would be the same in my scenario.  One would create a type trait (is_pure, or is_compiletime_computable, or whatever, and use with the same mechanisms we currently use."}, {"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "reply_to_user": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1471043673, "post_id": 38902021, "comment_id": 65212137, "body": "@RobertRamey your original question brings up the standard library. I&#39;d agree there are currently parts of the standard library that it would be helpful were <code>constexpr</code> that currently aren&#39;t. That&#39;s basically a function of the committee not getting round to discussing them, agreeing it is reasonable to commit to guaranteeing they will always be <code>constexpr</code> and declaring them so. With implicit <code>constexpr</code>, as a user you still couldn&#39;t rely on anything being in the standard library being guaranteed portably <code>constexpr</code> unless the standard documented it which would not happen any quicker."}, {"owner": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1471120924, "post_id": 38902021, "comment_id": 65229628, "body": "LOL - that&#39;s exactly how I came to this point!   if this change were made, then all the standard library functions that could be evaluatable at compile time would be and there would be no need to go into the standard library and evaluate them one by one by hand.  It&#39;s pointless to have a committee spending time on a job that a compiler can do.  This change wouldn&#39;t break any existing code - as far as I can tell"}, {"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "reply_to_user": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 1, "creation_date": 1471148002, "post_id": 38902021, "comment_id": 65233742, "body": "@RobertRamey I think you missed the point I was making: you couldn&#39;t portably rely on any given standard library function being constexpr even if it happened to be in a particular implementation without it being documented as guaranteed to be so which would require just the same time consuming discussion that is happening anyway to mark them <code>constexpr</code>"}, {"owner": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1471188705, "post_id": 38902021, "comment_id": 65242388, "body": "I&#39;m suggesting changing the language - not any libraries.  With my suggestion - any expression which could be constexpr would automatically be constexpr.  The requirements for an expression to be constexpr are well defined by the standard and implemented by the current vendors - that&#39;s how the know when to emit a syntax error message.  Under my  proposal the &quot;constexpr&quot; concept would be built in.  It wouldn&#39;t require any change to any library - except perhaps removing the now redundant constexpr keyword"}, {"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "reply_to_user": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 1, "creation_date": 1471193915, "post_id": 38902021, "comment_id": 65243820, "body": "@RobertRamey you&#39;re missing my point. For a function in the standard library to be portably usable in a constexpr context, it is not enough for the standard to just say any function that can be compiled constexpr will be. The standard also has to specify which functions are required to be compilable as constexpr. Whether that is specified as now with the keyword <code>constexpr</code> or is just stated in the standard document it still has to be discussed and added to the standard for every function that is decided should be portably constexpr."}, {"owner": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1471301577, "post_id": 38902021, "comment_id": 65283219, "body": "&#39;The standard also has to specify which functions are required to be compilable as constexpr&quot;.  This is not true.   I couldn&#39;t be even in principle.    This is suggested change to the language - not the libraries. And the language standard is described without reference to the standard library."}, {"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "reply_to_user": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 1, "creation_date": 1471305248, "post_id": 38902021, "comment_id": 65284125, "body": "@RobertRamey it&#39;s true in the context I stated it: &quot;For a function in the standard library to be <i>portably</i> usable in a constexpr context&quot;. Under an implicit constexpr rule like you suggest, the standard would still need to state that a function must be constexpr compilable for code to be able to rely on use in a constexpr context being portable. Under the much more restrictive C++11 constexpr rules that was more of a problem than in C++14 but there are still reasonable implementations that would be problematic (like using a lambda, at least until we get constexpr lambdas)."}, {"owner": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1471357994, "post_id": 38902021, "comment_id": 65308197, "body": "I didn&#39;t understand the comments except for the lambda one.  Under my rule, any lambda which could be constexpr would be constexpr.  So there would be no need to explicitly mark anything - not even a lambda as constexpr.  We wouldn&#39;t need to &quot;wait for constexpr lambdas&quot; because the language change would deliver them right away.  At the standards level all the discussion about which functions should be constexpr would disappear.  The only real question is the original one in my post - &quot;why can&#39;t constexpr be the default&quot;.   So far, I&#39;ve seen no convincing answer as to why it can&#39;t."}, {"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "reply_to_user": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 2, "creation_date": 1471366683, "post_id": 38902021, "comment_id": 65313719, "body": "@RobertRamey I&#39;m not sure why you&#39;re not getting the point I&#39;m making. I&#39;ll try another example. In C++11 <code>std::max()</code> was not <code>constexpr</code> and under C++11 constexpr rules there could be valid implementations (using an <code>if</code> statement) that would not be compilable as constexpr. As a user, having implicit constexpr would not be enough to use the result of <code>std::max()</code> portably as say an array size because it might happen to compile on one implementation but could fail on another compliant implementation. The standard would still need to be updated to say <code>max()</code> should be constexpr friendly."}], "tags": [], "owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "is_accepted": false, "score": 1, "last_activity_date": 1470934043, "creation_date": 1470934043, "answer_id": 38902021, "question_id": 38879475, "link": "https://stackoverflow.com/questions/38879475/why-cant-constexpr-just-be-the-default/38902021#38902021", "title": "Why can&#39;t constexpr just be the default?", "body": "<p>As Ben Voigt points out, compilers are already allowed to evaluate anything at compile time under the as-if rule.</p>\n\n<p>What <code>constexpr</code> also does is lay out clear rules for expressions that can be used in places where a compile time constant is <em>required</em>. That means I can write code like this and know it will be portable:</p>\n\n<pre><code>constexpr int square(int x) { return x * x; }\n\n...\nint a[square(4)] = {};\n...\n</code></pre>\n\n<p>Without the keyword and clear rules in the standard I'm not sure how you could specify this portably and provide useful diagnostics on things the programmer intended to be <code>constexpr</code> but don't meet the requirements.</p>\n"}, {"comments": [{"owner": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1514656194, "post_id": 48020223, "comment_id": 83042826, "body": "This is the first useful answer so far.  I would paraphrase your response by saying that, for a particular function, whether or not it could be evaluated at compile time would be dependent on the implementation which is outside the requirements specified by the standard.  So switching standard library implementations could break a program."}, {"owner": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1514656618, "post_id": 48020223, "comment_id": 83042974, "body": "On the other hand, all functions which can be constexpr share certain characteristics - no side effects, depend only on function arguments, etc.  This information is available in the specification of the function interface which is defined in the standard for all standard library functions.  Soooo - I don&#39;t think making all functions that can be constexpr actually be constexpr would be a problem.  I would add that the constexpr keyword would still have a role in enforcing that the function implementation actually be constexpr and produce a syntax error if it isn&#39;t."}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "reply_to_user": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1514791326, "post_id": 48020223, "comment_id": 83067240, "body": "re: paraphrase: yep, you got it now;  re: first useful answer: glad to hear it.  I actually just took mattnewport&#39;s last few comments and made explicit all the stuff that he was trying to imply by the word &quot;portable&quot;;  re: &quot;I don&#39;t think making all functions that can be constexpr actually be constexpr would be a problem&quot;: way too aggressive I think.  Consider, for instance, the trig functions.  Their specification probably meets the requirements.  (I didn&#39;t check.)  But I doubt most implementations meet them.  Do you want to insist everyone rewrite their trig functions?"}, {"owner": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1514895212, "post_id": 48020223, "comment_id": 83093994, "body": "Consider, for instance, the trig functions ...  I would be very surprised if any trig function depended on having side effects or depended on anything other than it&#39;s arguments.  So I would suspect the correctness of any trig function which would fail to compile if made constexpr."}, {"owner": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1514895361, "post_id": 48020223, "comment_id": 83094082, "body": "But suppose I&#39;m wrong and suppose some particular implementation of some particular trig function would not be automatically constexpr.  Things would be no different than they are now.  No currently functioning program would break."}, {"owner": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1514895570, "post_id": 48020223, "comment_id": 83094187, "body": "Finally, there are cases which would create a problem.  compilers currently contain special functions for floating point which are non standard.  _builtin is an example.  These invoke assembler code functions to implement certain non - standard behavior.  Now if someone&#39;s standard library relied on these features which by definition cannot be implemented at compile time, then these functions could not be constexpr by default.   But these are sort of special cases.  I don&#39;t think that having to deals with these would be worse than the current situation."}, {"owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "reply_to_user": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "edited": false, "score": 0, "creation_date": 1514917449, "post_id": 48020223, "comment_id": 83105025, "body": "&quot;I don&#39;t think that having to deal with these would be worse than the current situation&quot;; you could be right; it&#39;s a balancing act; on the one hand you annoy people for no good reason; on the other you needlessly constrain implementations of the standard library."}], "tags": [], "owner": {"reputation": 1099, "user_id": 3273929, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/41a12b51e925e256a5d847ecca6360a5?s=128&d=identicon&r=PG&f=1", "display_name": "Mark VY", "link": "https://stackoverflow.com/users/3273929/mark-vy"}, "is_accepted": true, "score": 5, "last_activity_date": 1514539241, "creation_date": 1514539241, "answer_id": 48020223, "question_id": 38879475, "link": "https://stackoverflow.com/questions/38879475/why-cant-constexpr-just-be-the-default/48020223#48020223", "title": "Why can&#39;t constexpr just be the default?", "body": "<p>Note: despite the below, I admit to liking the idea of making constexpr the default.  But you asked why it wasn't already done, so to answer that I will simply elaborate on mattnewport's last comment:</p>\n\n<p>Consider the situation today.  You're trying to use some function from the standard library in a context that requires a constant expression.  It's not marked as constexpr, so you get a compiler error.  This seems dumb, since \"clearly\" the ONLY thing that needs to change for this to work is to add the word constexpr to the definition.</p>\n\n<p>Now consider life in the alternate universe where we adopt your proposal.  Your code now compiles, yay!  Next year you decide you to add Windows support to whatever project you're working on.  How hard can it be?  You'll compile using Visual Studio for your Windows users and keep using gcc for everyone else, right?</p>\n\n<p>But the first time you try to compile on Windows, you get a bunch of compiler errors: this function can't be used in a constant expression context.  You look at the code of the function in question, and compare it to the version that ships with gcc.  It turns out that they are slightly different, and that the version that ships with gcc meets the technical requirements for constexpr by sheer accident, and likewise the one that ships with Visual Studio does not meet those requirements, again by sheer accident.  Now what?</p>\n\n<p>No problem you say, I'll submit a bug report to Microsoft: this function should be fixed.  They close your bug report: the standard never says this function must be usable in a constant expression, so we can implement however we want.  So you submit a bug report to the gcc maintainers: why didn't you warn me I was using non-portable code?  And they close it too: how were we supposed to know it's not portable?  We can't keep track of how everyone else implements the standard library.</p>\n\n<p>Now what?  No one did anything really wrong.  Not you, not the gcc folks, nor the Visual Studio folks.  Yet you still end up with un-portable code and are not a happy camper at this point.  All else being equal, a good language standard will try to make this situation as unlikely as possible.</p>\n\n<p>And even though I used an example of different compilers, it could just as well happen when you try to upgrade to a newer version of the same compiler, or even try to compile with different settings.  For example: the function contains an assert statement to ensure it's being called with valid arguments.  If you compile with assertions disabled, the assertion \"disappears\" and the function meets the rules for constexpr; if you enable assertions, then it doesn't meet them.  (This is less likely these days now that the rules for constexpr are very generous, but was a bigger issue under the C++11 rules.  But in principle the point remains even today.)</p>\n\n<p>Lastly we get to the admittedly minor issue of error messages.  In today's world, if I try to do something like stick in a <code>cout</code> statement in constexpr function, I get a nice simple error right away.  In your world, we would have the same situation that we have with templates, deep stack-traces all the way to the very bottom of the implementation of output streams.  Not fatal, but surely annoying.</p>\n\n<p>This is a year and a half late, but I still hope it helps.</p>\n"}], "owner": {"reputation": 984, "user_id": 2491382, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b8f8fc32e3a4033d61ce31d592309ad8?s=128&d=identicon&r=PG", "display_name": "Robert Ramey", "link": "https://stackoverflow.com/users/2491382/robert-ramey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 0, "accepted_answer_id": 48020223, "answer_count": 3, "score": 18, "last_activity_date": 1514539241, "creation_date": 1470848417, "last_edit_date": 1470848615, "question_id": 38879475, "link": "https://stackoverflow.com/questions/38879475/why-cant-constexpr-just-be-the-default", "title": "Why can&#39;t constexpr just be the default?", "body": "<p><code>constexpr</code> permits expressions which can be evaluated at compile time to be ... evaluated at compile time. </p>\n\n<p>Why is this keyword even necessary?  Why not permit or require that compilers evaluate all expressions at compile time if possible?</p>\n\n<p>The standard library has an uneven application of constexpr which causes a lot of inconvenience.  Making constexpr the \"default\" would address that and likely improve a huge amount of existing code.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1470848255, "post_id": 38879386, "comment_id": 65119917, "body": "&quot;<i>This doesn&#39;t seem to work.</i>&quot; <i>What</i> doesn&#39;t work? Where is there an error? How does it fail?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1470848364, "post_id": 38879386, "comment_id": 65119978, "body": "returning -1 doesn&#39;t look like a good idea unless you want to treat all negative numbers or at least -1 as non a number."}, {"owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1470850605, "post_id": 38879386, "comment_id": 65121197, "body": "@NicolBolas: thanks, I&#39;ve updated my question"}, {"owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470850643, "post_id": 38879386, "comment_id": 65121225, "body": "@NathanOliver: yeah, sorry, this is a poorly named toy example"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1470848579, "creation_date": 1470848579, "answer_id": 38879517, "question_id": 38879386, "link": "https://stackoverflow.com/questions/38879386/can-i-replicate-inheritance-with-overloading/38879517#38879517", "title": "Can I replicate inheritance with overloading?", "body": "<blockquote>\n  <p>My question is whether it's possible to move the <code>to_int</code> method outside of the classes, into the form of an overloaded function.</p>\n</blockquote>\n\n<p>Using overloaded non-member functions is a viable option only if you deal with the derived types at all times.</p>\n\n<p>If you need the functionality through a reference or pointer to the base class type, then using overloaded non-member functions is not a viable option. In that case, a <code>virtual</code> member function is the right choice.</p>\n"}, {"comments": [{"owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "edited": false, "score": 0, "creation_date": 1470851004, "post_id": 38879797, "comment_id": 65121421, "body": "This is cool, but I think it requires me to know at compile time what my number is?"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "edited": false, "score": 0, "creation_date": 1470851393, "post_id": 38879797, "comment_id": 65121655, "body": "@user357269 From the example, I guessed they were known. Otherwise saying that you can use your function as <code>calculate_stuff(Number(4));</code> wouldn&#39;t have sense."}, {"owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "edited": false, "score": 0, "creation_date": 1470851523, "post_id": 38879797, "comment_id": 65121727, "body": "can you explain why that wouldn&#39;t make sense? I know at compile time whether it&#39;s a number (positive integer) or not a number."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "edited": false, "score": 0, "creation_date": 1470852309, "post_id": 38879797, "comment_id": 65122197, "body": "@user357269 I mean, if you write - <i>I can use it as <code>Numeric{4}</code></i>, one can think that you know at compile time your constants. It&#39;s not a minimal, working example that resembles the real problem. That&#39;s all. Not a problem, don&#39;t worry, just to be clearer in your questions in the future."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 0, "last_activity_date": 1470849628, "creation_date": 1470849628, "answer_id": 38879797, "question_id": 38879386, "link": "https://stackoverflow.com/questions/38879386/can-i-replicate-inheritance-with-overloading/38879797#38879797", "title": "Can I replicate inheritance with overloading?", "body": "<p>You can use a template class and an using declaration to do that:</p>\n\n<pre><code>template&lt;int v&gt;\nstruct Numeric {};\n\nusing NotANumber = Numeric&lt;-1&gt;;\n\ntemplate&lt;int N&gt;\nconstexpr int Numeric_to_int (Numeric&lt;N&gt;) {\n    return N;\n}\n\nint main() {\n    static_assert(Numeric_to_int(NotANumber{}) == -1, \"!\");\n    static_assert(Numeric_to_int(Numeric&lt;42&gt;{}) == 42, \"!\");\n}\n</code></pre>\n\n<p>Also, consider the use of a <code>std::integral_constant</code> for the same purpose.<br>\nAs an example:</p>\n\n<pre><code>template&lt;int v&gt;\nusing Numeric = std::integral_constant&lt;int, v&gt;;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "edited": false, "score": 0, "creation_date": 1470853429, "post_id": 38880313, "comment_id": 65122838, "body": "Thanks for pointing out slicing, I hadn&#39;t heard of it before. I tried passing by value/reference, but neither worked. It&#39;s also helpful to know that sum types are called <code>variant</code>s in C++"}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 1, "last_activity_date": 1470851430, "last_edit_date": 1495535624, "creation_date": 1470851430, "answer_id": 38880313, "question_id": 38879386, "link": "https://stackoverflow.com/questions/38879386/can-i-replicate-inheritance-with-overloading/38880313#38880313", "title": "Can I replicate inheritance with overloading?", "body": "<blockquote>\n<pre><code>int calculate_stuff (const Numeric n)\n</code></pre>\n</blockquote>\n\n<p>How could it work? You passed in a base class. <em>By value</em>. The compiler cannot know what derived class it used to be. In fact, since you took the base class by value, the compiler <em>knows</em> that <code>n</code> is <em>neither</em> of the derived classes.</p>\n\n<p>C++ isn't Java; if you pass something by value, you make a copy (or move to it). And if you passed one of the derived classes, that <a href=\"https://stackoverflow.com/questions/274626/what-is-object-slicing\">causes <em>slicing</em></a>; you only copy the base class data. The parameter is therefore exactly what it says: an object who's dynamic type is <code>Numeric</code>. Exactly and only that, not one of its derived classes.</p>\n\n<p>Even if you took a <code>const Numeric &amp;n</code> instead, that won't help. The compiler doesn't know what type it used to be. And you can't even use <code>dynamic_cast</code> to convert it back, since <code>Numeric</code> is not a polymorphic class.</p>\n\n<p>A better way to handle this is to actually use a proper <code>variant</code> class (<code>optional</code> is effectively a specialized <code>variant</code>).</p>\n"}], "owner": {"reputation": 1525, "user_id": 6664393, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fe985e0b1cf77b72acb4e0058029acda?s=128&d=identicon&r=PG&f=1", "display_name": "user357269", "link": "https://stackoverflow.com/users/6664393/user357269"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 38880313, "answer_count": 3, "score": -2, "last_activity_date": 1470851430, "creation_date": 1470848130, "last_edit_date": 1470851421, "question_id": 38879386, "link": "https://stackoverflow.com/questions/38879386/can-i-replicate-inheritance-with-overloading", "title": "Can I replicate inheritance with overloading?", "body": "<p><strong>Prelude:</strong> I have updated this question to address NicolBolas' suggestion. Please leave a constructive comment if you downvote, thank you.</p>\n\n<p>I'm writing a function that takes a number (<code>uint</code>) or a flag that it's not a number. It then goes on to work with the given number or <code>-1</code>.</p>\n\n<p>Here's the idea </p>\n\n<pre><code>struct Numeric {\n    virtual int to_int() const = 0;\n};\nstruct NotANumber : Numeric {\n    int to_int () const {\n        return -1;\n    }\n}\nstruct Number : Numeric {\n    const uint n;\n    Number (const uint n): n(n) {}\n    int to_int () const {\n        return n;\n    }\n};\n</code></pre>\n\n<p>So then my function could be used as:</p>\n\n<pre><code>calculate_stuff(NotANumber());\ncalculate_stuff(Number(4));\n</code></pre>\n\n<p>My question is whether it's possible to move the <code>to_int</code> method outside of the classes, into the form of an overloaded function:</p>\n\n<pre><code>struct Numeric {};\n\nstruct NotANumber : Numeric {}\n\nstruct Number : Numeric {\n    const uint n;\n    Number (const uint n): n(n) {}\n};\n\nint Numeric_to_int (const NotANumber) {\n    return -1;\n}\n\nint Numeric_to_int (const Number n) {\n    return n.n;\n}\n</code></pre>\n\n<p>This doesn't seem to work. Is it possible to fix this? Is the issue that overloading happens at compile time, whereas overriding is at runtime?</p>\n\n<p>(I think I'm going to use <code>std::optional</code> and <code>value_or</code> for this specific problem, but I would still like to know the answer to my questions above)</p>\n\n<p><strong>Edit:</strong> sorry, I should've clarified what \"doesn't work\" means:</p>\n\n<pre><code>int calculate_stuff (const Numeric n) {\n    std::cout &lt;&lt; Numeric_to_int(n) &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>This doesn't compile: <code>no matching function for call to \u2018Numeric_to_int(const Numeric&amp;)\u2019</code></p>\n"}, {"tags": ["c++", "c++11", "exception", "exception-handling"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 4, "creation_date": 1470848102, "post_id": 38878999, "comment_id": 65119844, "body": "You mean &quot;over shared library calls&quot; not &quot;within libraries&quot; right?  How, exactly, is the library built, the code that calls the library built, and can you generate a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of a toy library that throws and a toy app that loads it and fails to catch?"}, {"owner": {"reputation": 171, "user_id": 6522377, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-oPYYo3Tbj5k/AAAAAAAAAAI/AAAAAAAAAVk/20jmjLMx7SI/photo.jpg?sz=128", "display_name": "Nils &#39;Linkpy&#39; Reid", "link": "https://stackoverflow.com/users/6522377/nils-linkpy-reid"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1470848594, "post_id": 38878999, "comment_id": 65120094, "body": "Done. I thought it was useless here since it isn&#39;t related to any &quot;real&quot; code."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 1, "creation_date": 1470848880, "post_id": 38878999, "comment_id": 65120261, "body": "The example isn&#39;t complete. Your <code>main</code> has a reference to <code>C_Configuration</code> which isn&#39;t defined (except in the other source). You&#39;re at least missing an <code>#include</code>. Without being <i>Complete</i> the example is not <i>Verifiable</i>. If I can&#39;t compile your code, I can&#39;t test it for myself."}, {"owner": {"reputation": 171, "user_id": 6522377, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-oPYYo3Tbj5k/AAAAAAAAAAI/AAAAAAAAAVk/20jmjLMx7SI/photo.jpg?sz=128", "display_name": "Nils &#39;Linkpy&#39; Reid", "link": "https://stackoverflow.com/users/6522377/nils-linkpy-reid"}, "edited": false, "score": 0, "creation_date": 1470849224, "post_id": 38878999, "comment_id": 65120471, "body": "I &quot;think&quot; it&#39;s done now."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1470849505, "post_id": 38878999, "comment_id": 65120617, "body": "Nope. C_Configuration.cpp still declares a member of an undeclared class. Did you try to compile your own example? And what is the exact sequence of commands you use to compile and link both objects?"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1470849540, "post_id": 38878999, "comment_id": 65120634, "body": "What are your link commands?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1470849792, "post_id": 38878999, "comment_id": 65120761, "body": "Show complete command lines how you compile and link."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1470850052, "post_id": 38878999, "comment_id": 65120889, "body": "And, just in case: check which library your program is linking against at run-time (use <code>ldd</code>)."}, {"owner": {"reputation": 171, "user_id": 6522377, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-oPYYo3Tbj5k/AAAAAAAAAAI/AAAAAAAAAVk/20jmjLMx7SI/photo.jpg?sz=128", "display_name": "Nils &#39;Linkpy&#39; Reid", "link": "https://stackoverflow.com/users/6522377/nils-linkpy-reid"}, "edited": false, "score": 0, "creation_date": 1470850782, "post_id": 38878999, "comment_id": 65121298, "body": "Compile command : <code>g++ -IHeaders&#47; -ILibraries&#47;ns_framework&#47;Headers -ILibraries&#47;osumax_shared&#47;Headers -std=c++11 -g -Wall -DDEBUG -DLINUX -DX86_64 -m64  -c -o Objects&#47;Main.o Sources&#47;Main.cpp</code>  And the link command : <code>g++ -L.&#47;Libraries&#47; -m64 Objects&#47;Main.o -ltinyxml2 -lns_framework -lsfml-system -lsfml-window -lsfml-graphics -losumax_shared -o .&#47;osumax</code>"}, {"owner": {"reputation": 171, "user_id": 6522377, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-oPYYo3Tbj5k/AAAAAAAAAAI/AAAAAAAAAVk/20jmjLMx7SI/photo.jpg?sz=128", "display_name": "Nils &#39;Linkpy&#39; Reid", "link": "https://stackoverflow.com/users/6522377/nils-linkpy-reid"}, "reply_to_user": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1470850817, "post_id": 38878999, "comment_id": 65121312, "body": "@davmac : I tried to build the example but.. The example works. The exception is caught in the library."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1470872840, "post_id": 38878999, "comment_id": 65131093, "body": "@Nils&#39;Linkpy&#39;Reid then it&#39;s not a <i>Verifiable</i> example. The idea is to reduce your program - which exhibits the behaviour - to the smallest possible (<i>Minimal</i>) program which is still compilable (<i>Complete</i>) and still exhibits the problem (<i>Verifiable</i>) - hence &quot;MCVE&quot;. If your smaller example doesn&#39;t exhibit the problem, then it&#39;s something about your original program which is causing the issues. You need to reduce it piece by piece until you can discover what change makes it start/stop working."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1470872995, "post_id": 38878999, "comment_id": 65131127, "body": "@Nils&#39;Linkpy&#39;Reid I see you&#39;ve found the problem and edited the solution into your question. I suggest you delete the question, or otherwise (if you think it could be useful to others) post the solution as an answer."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 6522377, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-oPYYo3Tbj5k/AAAAAAAAAAI/AAAAAAAAAVk/20jmjLMx7SI/photo.jpg?sz=128", "display_name": "Nils &#39;Linkpy&#39; Reid", "link": "https://stackoverflow.com/users/6522377/nils-linkpy-reid"}, "edited": false, "score": 0, "creation_date": 1470850635, "post_id": 38879990, "comment_id": 65121215, "body": "Tried : <code>.&#47;osumax: error while loading shared libraries: ared-libgcc: cannot open shared object file: No such file or directory</code> And LDD says : <code>ared-libgcc =&gt; not found</code>"}, {"owner": {"reputation": 171, "user_id": 6522377, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-oPYYo3Tbj5k/AAAAAAAAAAI/AAAAAAAAAVk/20jmjLMx7SI/photo.jpg?sz=128", "display_name": "Nils &#39;Linkpy&#39; Reid", "link": "https://stackoverflow.com/users/6522377/nils-linkpy-reid"}, "edited": false, "score": 0, "creation_date": 1470851074, "post_id": 38879990, "comment_id": 65121463, "body": "And, in the link options page : <code>Therefore, the G++ and GCJ drivers automatically add -shared-libgcc whenever you build a shared library or a main executable, because C++ and Java programs typically use exceptions, so this is the right thing to do.</code> and LDD says : <code>libgcc_s.so.1 =&gt; &#47;lib&#47;x86_64-linux-gnu&#47;libgcc_s.so.1</code>"}, {"owner": {"reputation": 1501, "user_id": 3537339, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001674253388/picture?type=large", "display_name": "Bruno Ferreira", "link": "https://stackoverflow.com/users/3537339/bruno-ferreira"}, "reply_to_user": {"reputation": 171, "user_id": 6522377, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-oPYYo3Tbj5k/AAAAAAAAAAI/AAAAAAAAAVk/20jmjLMx7SI/photo.jpg?sz=128", "display_name": "Nils &#39;Linkpy&#39; Reid", "link": "https://stackoverflow.com/users/6522377/nils-linkpy-reid"}, "edited": false, "score": 0, "creation_date": 1470941148, "post_id": 38879990, "comment_id": 65166441, "body": "Shared objects must go to /usr/lib on linux OR set the LD_LIBRARY_PATH env properly. See: <a href=\"http://serverfault.com/questions/279068/cant-find-so-in-the-same-directory-as-the-executable\" title=\"cant find so in the same directory as the executable\">serverfault.com/questions/279068/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1501, "user_id": 3537339, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001674253388/picture?type=large", "display_name": "Bruno Ferreira", "link": "https://stackoverflow.com/users/3537339/bruno-ferreira"}, "is_accepted": false, "score": 4, "last_activity_date": 1470941732, "last_edit_date": 1470941732, "creation_date": 1470850392, "answer_id": 38879990, "question_id": 38878999, "link": "https://stackoverflow.com/questions/38878999/try-catch-doesnt-work-in-shared-library/38879990#38879990", "title": "Try-catch doesn&#39;t work in shared library?", "body": "<p>According to <a href=\"https://gcc.gnu.org/onlinedocs/gcc-5.4.0/gcc/Link-Options.html#Link-Options\" rel=\"nofollow\">gcc manual</a>:</p>\n\n<blockquote>\n  <p>if a library or main executable is supposed to throw or catch exceptions, you must link it using the G++ or GCJ driver, as appropriate for the languages used in the program, or using the option <strong>-shared-libgcc</strong>, such that it is linked with the shared libgcc. </p>\n</blockquote>\n\n<p>Shared libraries (in C++ and Java) have that flag set by default, but not main executables. In any case, you should use it on both.</p>\n\n<h3>Test Case:</h3>\n\n<p><em>lib.cpp</em>:</p>\n\n<pre><code>#include \"lib.hpp\"\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint function_throws_int() {\n    try {\n        throw 2;\n    }\n    catch (...) {\n        cout &lt;&lt; \"int throws lib\" &lt;&lt; endl;\n        throw;\n    }\n\n    return -1;\n}\n\nint function_throws_string() {\n    try {\n        throw std::string(\"throw\");\n    }\n    catch (...) {\n        cout &lt;&lt; \"throws string lib\" &lt;&lt; endl;\n        throw;\n    }\n}\n</code></pre>\n\n<p><em>lib.hpp</em>:</p>\n\n<pre><code>int function_throws_int();\nint function_throws_string();\n</code></pre>\n\n<p><strong>Compile command line</strong>:\n<code>g++ -m64 -g -shared-libgcc -shared -fPIC -std=c++11 -o libtest.so lib.cpp</code></p>\n\n<p><em>main.cpp</em>:</p>\n\n<pre><code>#include \"lib.hpp\"\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main(int argc, char ** argv) {\n    try {\n        function_throws_int();\n    }\n    catch (const string &amp; e) {\n        cout &lt;&lt; \"string caught main\" &lt;&lt; endl;\n    }\n    catch (int i) {\n        cout &lt;&lt; \"int caught main\" &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Compile command line</strong>:\n<code>g++ -m64 -g -shared-libgcc -o main -L. main.cpp -ltest</code></p>\n\n<p><strong>Execute</strong>: \n<code>LD_LIBRARY_PATH=. ./main</code></p>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>int throws lib\nint caught main\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 6522377, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-oPYYo3Tbj5k/AAAAAAAAAAI/AAAAAAAAAVk/20jmjLMx7SI/photo.jpg?sz=128", "display_name": "Nils &#39;Linkpy&#39; Reid", "link": "https://stackoverflow.com/users/6522377/nils-linkpy-reid"}, "is_accepted": true, "score": 4, "last_activity_date": 1470931862, "creation_date": 1470931862, "answer_id": 38901400, "question_id": 38878999, "link": "https://stackoverflow.com/questions/38878999/try-catch-doesnt-work-in-shared-library/38901400#38901400", "title": "Try-catch doesn&#39;t work in shared library?", "body": "<p>Simple. Never use <code>ld</code> with C++. I changed all <code>ld</code> commands in my project to <code>g++</code> but seems I forgot for this library.</p>\n\n<p>In short, I was using <code>ld</code> for building my library but <code>g++</code> for the main executable. So the exceptions worked in the executable but not in the library because <code>ld</code> does not includes the C++ libraries which handle the exception system.</p>\n"}], "owner": {"reputation": 171, "user_id": 6522377, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-oPYYo3Tbj5k/AAAAAAAAAAI/AAAAAAAAAVk/20jmjLMx7SI/photo.jpg?sz=128", "display_name": "Nils &#39;Linkpy&#39; Reid", "link": "https://stackoverflow.com/users/6522377/nils-linkpy-reid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3879, "favorite_count": 4, "accepted_answer_id": 38901400, "answer_count": 2, "score": 4, "last_activity_date": 1470941732, "creation_date": 1470846789, "last_edit_date": 1495542340, "question_id": 38878999, "link": "https://stackoverflow.com/questions/38878999/try-catch-doesnt-work-in-shared-library", "title": "Try-catch doesn&#39;t work in shared library?", "body": "<p><sub>(This is like <a href=\"https://stackoverflow.com/questions/38855112/c-custom-exception-not-caught?noredirect=1#comment65077592_38855112\">my other question</a> but this one is for another thing, even if it's related)</sub></p>\n\n<p>I've got a big issue in my project. I've got a library which handle XML and can throw exception. And, using it for creating a configuration file class show my first bug : exceptions aren't handled in the library, at all, and with every exception.</p>\n\n<p>In the library I wrote :</p>\n\n<pre><code>try {\n    throw std::exception();\n}\ncatch (...)\n{\n    printf(\"caught\\n\");\n}\n</code></pre>\n\n<p>But, the exception isn't handled and call <code>std::terminate</code> immediately :</p>\n\n<pre><code>terminate called after throwing an instance of 'std::exception'\n  what():  std::exception\n</code></pre>\n\n<p>The compilation flags are the simplest one : <code>-fPIC -std=c++11 -g -Wall</code> for the library, and <code>-std=c++11 -g -Wall</code> for the executable (plus the libraries and variant build defines). Also, I'm using G++ 5.4.0, under Linux (Linux Mint to be precise).</p>\n\n<p>This is my <code>main</code> :</p>\n\n<pre><code>#include \"ns/core/C_Configuration.hpp\"\n\n#include &lt;iostream&gt;\n\nusing namespace std;\nusing namespace ns;\n\n\nint\nmain (int argc, char** argv)\n{\n    try {\n        C_Configuration c (\"test.xml\");\n        c.load (\"test.xml\");\n    } catch (const std::exception&amp; ex) {\n        cout &lt;&lt; ex.what () &lt;&lt; endl;\n    } catch (...) {\n        cout &lt;&lt; \"Caught.\" &lt;&lt; endl;\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>The <code>C_Configuration.hpp</code> :</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;exception&gt;\n\n\nnamespace ns\n{\n\n\n    class C_Configuration\n    {\n\n    public:\n\n        C_Configuration (std::string);\n\n\n        bool load (std::string file);\n\n    };\n\n\n} // namespace ns\n</code></pre>\n\n<p>And, this is the <code>C_Configuration.cpp</code> :</p>\n\n<pre><code>#include \"ns/core/C_Configuration.hpp\"\n\n#include &lt;cstdio&gt;\n\nusing namespace std;\n\n\nnamespace ns\n{\n\n\n\nC_Configuration::C_Configuration (string)\n{ }\n\n\n\nbool\nC_Configuration::load (string file)\n{\n\n    try {\n        throw exception();\n    } catch (const exception&amp; ex) {\n        printf (\"In C_Configuration : %s\\n\", ex.what ());\n    } catch (...) {\n        printf (\"In C_Configuration : caught\\n\");\n    }\n\n\n    return true;\n}\n\n\n} // namespace ns\n</code></pre>\n\n<p>Buid commands :</p>\n\n<pre><code>g++ -m64 -g -shared -fPIC -std=c++11 -o libns_framework.so C_Configuration.cpp\ng++ -m64 -g -L. -o exe main.cpp -lns_framework \n</code></pre>\n\n<p><strong>Note :</strong> I give this example, but it works as expected, the exception is caught in the library, not like in my main project. If you want to investigate more, you can check my project code <a href=\"https://github.com/neoshadow-studio/osumax\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>The problem is when :</p>\n\n<ul>\n<li>The try-catch block is <em>inside</em> the library ;</li>\n<li>The try-catch block is <em>outside</em> the library ;</li>\n</ul>\n\n<p>In any case, the exception is thrown <em>inside</em> the library. But, exception thrown outside are caught in the executable code :</p>\n\n<pre><code>int\nmain (int argc, char** argv)\n{\n    try {\n        throw 1;\n    } catch (...) {\n        cout &lt;&lt; \"Caught\" &lt;&lt; endl;\n    }\n\n    // Useless code\n\n    return 0;\n}\n</code></pre>\n\n<p>This code just write <code>Caught</code> in the output.</p>\n\n<p>So, my question is simple : Is C++ exception not handled within libraries, or I just forgot a compilation flag ? I need to say in the executable code, the exceptions work fine.</p>\n\n<p>Thanks for your help.</p>\n\n<p><strong>EDIT :</strong> Oh god, my bad. Problem solved. Into the deepest part of my build configuration, an <code>ld</code> took the place of <code>g++</code>. Now the exception is working fine. Thanks for you help.</p>\n"}, {"tags": ["c++", "windows", "winforms", "winapi", "windows-mui"], "owner": {"reputation": 7274, "user_id": 1453076, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1aa3fec00c56d24b82051525a76cb90?s=128&d=identicon&r=PG", "display_name": "Vladimirs", "link": "https://stackoverflow.com/users/1453076/vladimirs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1306, "favorite_count": 1, "answer_count": 0, "score": 5, "last_activity_date": 1599341476, "creation_date": 1470846787, "last_edit_date": 1599341476, "question_id": 38878998, "link": "https://stackoverflow.com/questions/38878998/what-is-rescache-hit", "title": "What is rescache.hit?", "body": "<p>I am having some issues with my c++ application - Symantec Critical System Protection blocks my application because it tries to access <code>C:\\Windows\\rescache\\rcXXXX\\ResCache.hit</code>.</p>\n\n<p>From googling I managed to find out that it is related to MUI, but nothing specific.</p>\n\n<p>Also I enabled auditing for those files in <code>rescache</code> and tried to replicate this in my dev environment. However, I never seen any attempts from my application to access <code>ResCache.hit</code>, it was always accessed only by svchost.exe.</p>\n\n<p>So what is ResCache.hit and how it can be modified from your application (e.g. if there any WINAPI calls that can result into your application accessing that file or something like that)?</p>\n"}, {"tags": ["c++", "visual-studio", "build", "visual-studio-2015"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1470846962, "post_id": 38878812, "comment_id": 65119215, "body": "Can they be run in a project&#39;s pre/post build steps?"}, {"owner": {"reputation": 6174, "user_id": 1577341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmeAD.jpg?s=128&g=1", "display_name": "Jacques de Hooge", "link": "https://stackoverflow.com/users/1577341/jacques-de-hooge"}, "edited": false, "score": 1, "creation_date": 1470847237, "post_id": 38878812, "comment_id": 65119372, "body": "In complicated cases like this I write a Python build script to construct everything. It gives me more control and flexibility than make and far more than VS. It is a bit of an investment upfront, but for a multi-year project it pays off greatly."}, {"owner": {"reputation": 2687, "user_id": 1802974, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0066445dcc2757c44db6d1e61ae10a7d?s=128&d=identicon&r=PG", "display_name": "Victor Mezrin", "link": "https://stackoverflow.com/users/1802974/victor-mezrin"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1470847884, "post_id": 38878812, "comment_id": 65119724, "body": "@Borgleader Thank you. Post-build event perfectly fits my needs."}, {"owner": {"reputation": 2687, "user_id": 1802974, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0066445dcc2757c44db6d1e61ae10a7d?s=128&d=identicon&r=PG", "display_name": "Victor Mezrin", "link": "https://stackoverflow.com/users/1802974/victor-mezrin"}, "reply_to_user": {"reputation": 6174, "user_id": 1577341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmeAD.jpg?s=128&g=1", "display_name": "Jacques de Hooge", "link": "https://stackoverflow.com/users/1577341/jacques-de-hooge"}, "edited": false, "score": 0, "creation_date": 1470847904, "post_id": 38878812, "comment_id": 65119739, "body": "@JacquesdeHooge Thank you. Right now post-build event is good for me. Can you tell for future - how to launch a build process of an project from solution via python script/shell command? Is there any command-line interface for the Visual Studio build engine?"}], "answers": [{"tags": [], "owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "is_accepted": false, "score": 0, "last_activity_date": 1470857449, "creation_date": 1470857449, "answer_id": 38882006, "question_id": 38878812, "link": "https://stackoverflow.com/questions/38878812/visual-studio-how-to-automate-build-process/38882006#38882006", "title": "Visual Studio - how to automate build process?", "body": "<p>For the same task I've configured local build server with use of <a href=\"https://www.jetbrains.com/teamcity/\" rel=\"nofollow\">TeamCity</a>. It perfectly fulfills your requirements. Here is the <a href=\"https://confluence.jetbrains.com/display/TCD10/Configure+and+Run+Your+First+Build\" rel=\"nofollow\">instruction</a> for how to create build configuration.</p>\n"}, {"tags": [], "owner": {"reputation": 431, "user_id": 1996740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15dbb119c7202127e3005edc5ecb0286?s=128&d=identicon&r=PG", "display_name": "Akin Ocal", "link": "https://stackoverflow.com/users/1996740/akin-ocal"}, "is_accepted": false, "score": 4, "last_activity_date": 1470875936, "last_edit_date": 1495542176, "creation_date": 1470866706, "answer_id": 38884330, "question_id": 38878812, "link": "https://stackoverflow.com/questions/38878812/visual-studio-how-to-automate-build-process/38884330#38884330", "title": "Visual Studio - how to automate build process?", "body": "<p>I would suggest a combination of MSBuild XML automation and Jenkins. In detail :</p>\n\n<p><strong>MSBuild :</strong> It comes with Visual Studio. You need to access VS command prompt to access it. In VS command prompt, if you type \"MSBuild your_project.vcproj\" it will build it for you.</p>\n\n<p><strong>MSBuild XML Files :</strong> You can create a simple XML file and pass it to MSBuild. This will greatly help you to organize your build process. It is a large topic , however, you can think of it as Microsoft style makefile/build system ( even though Microsoft has nmake ) and much more convenient. You can define targets, set variables , put conditions , parallelize builds, set actions in order to call shell commands. A very simple one looks like :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;Project DefaultTargets=\"Build\"\n    xmlns=\"http://schemas.microsoft.com/developer/msbuild/2003\"&gt;\n\n  &lt;PropertyGroup&gt;\n    &lt;CPPProject&gt;your_cpp_project.sln&lt;/CPPProject&gt;\n    &lt;powershell_execute&gt;powershell.exe -executionpolicy bypass -command&lt;/powershell_execute&gt;\n    &lt;UtilityScript&gt;utility.ps1&lt;/UtilityScript&gt;\n  &lt;/PropertyGroup&gt;\n\n  &lt;Target Name=\"Build\"&gt;\n    &lt;Exec Command=\"msbuild.exe $(CPPProject) /p:Configuration=Release /p:Platform=Win32\" /&gt;\n    &lt;Exec Command=\"msbuild.exe $(CPPProject) /p:Configuration=Release_x64 /p:Platform=x64\" /&gt;\n    &lt;Exec Command=\"$(powershell_execute) $(UtilityScript) args\" /&gt;\n  &lt;/Target&gt;\n\n    &lt;Target Name=\"Clean\"&gt;\n        &lt;!-- DO YOUR CLEANING HERE--&gt;\n  &lt;/Target&gt;\n\n&lt;/Project&gt;\n</code></pre>\n\n<p><strong>Jenkins :</strong> Once you install it , it will run as a Windows service which has its embedded HTTP server. You can quickly access it with your browser via localhost:8080. Jenkins is another topic on its own , but I find it very convenient to automate commands and organize them as job definitions.</p>\n\n<p><strong>Extra sauce ( Powershell &amp; MSBuild extensions ) :</strong> As you can call commands from either MSBuild or Jenkins,  you can always Powershell ( in which you can also inline C# code if necessary) I have found this useful where I needed to implement custom logics quickly and easily such as incrementing minor versions before each release etc. Note that there are also extension packs for enriching MSBuild XMLs` functionality.</p>\n\n<p><strong>Downsides of Jenkins and TFS as an alternative :</strong> Jenkins is generally very convenient. The main downside on Windows is that it was not straightforward to colorize console outputs , however, it can be dealt with. In general, I have found it very stable. On the other hand, TFS already is a Microsoft solution , I am not sure about its licensing options but it can also be an alternative to Jenkins. In that case , you will be relying more on MSBuild XML file. One of the downsides of TFS 2013 for me was , it was not always working accurately in over network operations due to some conflicts with Microsoft`s http.sys , which was quite disappointing. However, I have not checked TFS2015</p>\n\n<p><strong>General suggestion :</strong> As it is a central solution , I`d highly recommend implementing most of your logic in an MSBuild XML file as this will make your build system also easily invokable via command line and also easy to switch between different systems like Jenkins , TFS or others</p>\n\n<p><strong>Other notes :</strong></p>\n\n<ol>\n<li><p>If it is only MSVC 2015 , you might avoid installing VisualStudio as MSVC2015 has a standalone build : <a href=\"https://blogs.msdn.microsoft.com/vcblog/2015/11/02/announcing-visual-c-build-tools-2015-standalone-c-tools-for-build-environments/\" rel=\"nofollow noreferrer\">https://blogs.msdn.microsoft.com/vcblog/2015/11/02/announcing-visual-c-build-tools-2015-standalone-c-tools-for-build-environments/</a></p></li>\n<li><p>If you go Jenkins way, the very first thing you need to handle is accessing to Visual Studio command prompt. In that case see this : <a href=\"https://stackoverflow.com/questions/762539/how-do-i-write-a-build-batch-script-that-runs-vcvars32-bat-and-then-continues-w\">How do I write a build batch script that runs vcvars32.bat, and then continues with the build?</a></p></li>\n</ol>\n"}], "owner": {"reputation": 2687, "user_id": 1802974, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0066445dcc2757c44db6d1e61ae10a7d?s=128&d=identicon&r=PG", "display_name": "Victor Mezrin", "link": "https://stackoverflow.com/users/1802974/victor-mezrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3749, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1470875936, "creation_date": 1470846115, "question_id": 38878812, "link": "https://stackoverflow.com/questions/38878812/visual-studio-how-to-automate-build-process", "title": "Visual Studio - how to automate build process?", "body": "<p>I have a C++ solution with many projects. During compilation I need to build part of projects in Win32 mode. Then execute several shell commands. Then build several projects in x64 mode. Then execute several more shell commands. Then, finally, build one more project in Win32 mode.</p>\n\n<p>I'm tired to do this again and again manually ) How I could automate all these steps?</p>\n\n<p>I use Visual Studio 2015</p>\n"}, {"tags": ["c++", "qt", "c++11"], "comments": [{"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1470846641, "post_id": 38878798, "comment_id": 65119039, "body": "Why is it saying <code>QWidget </code> in the error ?You are not showing the complete example ?"}, {"owner": {"reputation": 1580, "user_id": 5186897, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/1004543019596040/picture?type=large", "display_name": "Mattia F.", "link": "https://stackoverflow.com/users/5186897/mattia-f"}, "reply_to_user": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1470846768, "post_id": 38878798, "comment_id": 65119108, "body": "ClockSim is a derived class of QWidget, nothing else."}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1470846826, "post_id": 38878798, "comment_id": 65119150, "body": "Also you are passing an argument of type <code>char const (&amp;)[10]</code>. If your member function expects <code>const char*</code>, the this would not work (probably there would be some ambiguity)"}, {"owner": {"reputation": 1580, "user_id": 5186897, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/1004543019596040/picture?type=large", "display_name": "Mattia F.", "link": "https://stackoverflow.com/users/5186897/mattia-f"}, "reply_to_user": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1470846910, "post_id": 38878798, "comment_id": 65119186, "body": "Well <code>QLabel::setStyleSheet</code> expects a <code>QString&amp;</code>, but even if i use <code>QString {&quot;color:red;&quot;}</code> the error remains the same."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470846931, "post_id": 38878798, "comment_id": 65119202, "body": "Also do not forget you need to pass an instance of the class as well if it is a non static member function."}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1470847024, "post_id": 38878798, "comment_id": 65119245, "body": "@MattiaF. That wont work if QString is anything like std::string"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1470847113, "post_id": 38878798, "comment_id": 65119300, "body": "@MattiaF. `&quot;color:red;&quot; is a temporary string literal, you can&#39;t pass that to a function expecting a non const reference"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1470847971, "post_id": 38878798, "comment_id": 65119775, "body": "Is <code>setStylesSheet</code> just a typo for <code>setStyleSheet</code>?  If so, please <a href=\"https://stackoverflow.com/posts/38878798/edit\">edit</a> your question to fix that."}], "answers": [{"comments": [{"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 1, "creation_date": 1470847393, "post_id": 38879072, "comment_id": 65119469, "body": "Nice, I was going to post answer but it looks similar as mine: here is some test source code: <a href=\"http://coliru.stacked-crooked.com/a/d64862509212d127\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/d64862509212d127</a>"}, {"owner": {"reputation": 7027, "user_id": 1735922, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a82aaa47327bba0f9657c32ce20c8914?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1735922/john"}, "edited": false, "score": 0, "creation_date": 1470862890, "post_id": 38879072, "comment_id": 65127846, "body": "Aren&#39;t base class member function pointers implicitly convertible to derived class member function pointers?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 7027, "user_id": 1735922, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a82aaa47327bba0f9657c32ce20c8914?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1735922/john"}, "edited": false, "score": 0, "creation_date": 1470862967, "post_id": 38879072, "comment_id": 65127879, "body": "@John: Yes, but that doesn&#39;t mean template type deduction can deal with the possible conversion."}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 5, "last_activity_date": 1470847065, "creation_date": 1470847065, "answer_id": 38879072, "question_id": 38878798, "link": "https://stackoverflow.com/questions/38878798/pass-function-member-pointer-as-parameter-to-function/38879072#38879072", "title": "Pass function member pointer as parameter to function", "body": "<p>Since <code>setStylesSheet</code> is an inherited member of <code>QWidget</code>, the type of <code>&amp;QLabel::setStylesSheet</code> is actually <code>void (QWidget::*)(const QString&amp;)</code>, and that doesn't match your template function parameter.</p>\n\n<p>You'll need to use another template parameter for the actual class of the member function:</p>\n\n<pre><code>template &lt;class R, class C, class ...Params, class ...Args&gt;\ntypename std::enable_if&lt;std::is_base_of&lt;C,QLabel&gt;::value &amp;&amp;\n                        sizeof...(Params)==sizeof...(Args)&gt;::type \nClockSim::applyToLabels (R (C::*f)(Params...), Args&amp;&amp; ...args)\n{\n    (ui-&gt;labelSingleTime-&gt;*f)(std::forward&lt;Args&gt;(args)...);\n}\n</code></pre>\n\n<p>I've also made the function pointer parameters different from your passed args, since you try to pass a <code>const char(&amp;)[11]</code> which is not a <code>QString</code> but converts to one.</p>\n"}], "owner": {"reputation": 1580, "user_id": 5186897, "user_type": "registered", "accept_rate": 11, "profile_image": "https://graph.facebook.com/1004543019596040/picture?type=large", "display_name": "Mattia F.", "link": "https://stackoverflow.com/users/5186897/mattia-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 38879072, "answer_count": 1, "score": 1, "last_activity_date": 1470860842, "creation_date": 1470846078, "last_edit_date": 1470860842, "question_id": 38878798, "link": "https://stackoverflow.com/questions/38878798/pass-function-member-pointer-as-parameter-to-function", "title": "Pass function member pointer as parameter to function", "body": "<p>I'm working on a Qt project and I have decided to implement a function which takes a pointer to a <code>QLabel</code> member function and its parameters, and applies it to some labels.</p>\n\n<pre><code>template &lt;class R, class ...Args&gt;\nvoid ClockSim::applyToLabels (R (QLabel::*f)(Args...), Args&amp;&amp; ...args)\n{\n    ui-&gt;labelSingleTime-&gt;*f (std::forward&lt;Args&gt;(args)...);\n    //Repeat it for many other labels\n\n}\n</code></pre>\n\n<p>I tried to call it with:</p>\n\n<pre><code>applyToLabels (&amp;QLabel::setStyleSheet, \"color:red;\");\n</code></pre>\n\n<p>It says: </p>\n\n<p>error: <em>no matching member function for call to 'applyToLabels'</em></p>\n\n<p><em>candidate template ignored: could not match 'QLabel' against 'QWidget'</em></p>\n\n<p>Any solution? Thanks</p>\n"}, {"tags": ["c++", "tail-recursion"], "comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 2, "creation_date": 1470845982, "post_id": 38878700, "comment_id": 65118644, "body": "This is simply not a tail call. GCC may still transform the call and optimise it <i>like</i> a tail-call under the as-if rule."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1470845985, "post_id": 38878700, "comment_id": 65118645, "body": "Which version of GCC? What flags are you passing to the compiler?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1470846012, "post_id": 38878700, "comment_id": 65118662, "body": "Besides, the recursive call is part of another expression so it&#39;s not really a tail call anyway."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1470846016, "post_id": 38878700, "comment_id": 65118665, "body": "@JoachimPileborg, 5.3 and 6.1, -O3 is used as a flag."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1470846025, "post_id": 38878700, "comment_id": 65118671, "body": "Hmm. Does <code>int y; int x = foo(&amp;y);</code> also prevent TCO?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1470846076, "post_id": 38878700, "comment_id": 65118710, "body": "@JoachimPileborg,variant2 is is optmized  as a tail call. On any rate, switching to <code>return tco_test()</code> doesn&#39;t make a difference,  it was there simply to stop compiler thinking I have an undefined behavior there."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1470846118, "post_id": 38878700, "comment_id": 65118740, "body": "@KonradRudolph, see my answer to Joachim."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470846821, "post_id": 38878700, "comment_id": 65119143, "body": "Does the memory leak introduced by variant 2 have anything to do with it?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470847213, "post_id": 38878700, "comment_id": 65119354, "body": "@NathanOliver, nope. I have tested with delete&#39;s there as well, I was just trying to give as concise example as possible."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1470854508, "post_id": 38878700, "comment_id": 65123443, "body": "To test things more properly you should do the (trivial) rewrite to have the recursive call directly as a <code>return</code> expression at the very end. But this can only tell you something about your compiler&#39;s optimization abilities. THere&#39;s nothing about the local array that absolutely prevents tail call optimization."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1470848115, "post_id": 38879173, "comment_id": 65119854, "body": "Not sure if I follow. What do you mean by &#39;external foo&#39; in this case? May be some illustrating code?"}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1470851309, "post_id": 38879173, "comment_id": 65121609, "body": "Calls to <code>foo</code> can&#39;t be inlined because there is no definition in scope."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1470852774, "post_id": 38879173, "comment_id": 65122466, "body": "@KonradRudolph I have added an illustrative example how how exporting the address of a local variable can create program semantics which breaks under constant space recursion."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1470853915, "post_id": 38879173, "comment_id": 65123122, "body": "I am not following this example. How is an array is different from a single pointer in terms of external visibility? My variant2 could as well be in a form of <code>int* arr = &amp;static_int_variable</code> and it would still be TCO-optimized (ill-formed as it is, of course).  May be you could reword your example,  make it slightly? shorter and emphasize how array is different from the pointer here"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1470854092, "post_id": 38879173, "comment_id": 65123211, "body": "@Kaz Ah, I was confusing <code>foo</code> and <code>tco_test</code>. The answer now makes sense. But just to be pedantic: <a href=\"http://stackoverflow.com/q/5987020/1968\"><code>foo</code> can be inlined at link time</a>."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1470854214, "post_id": 38879173, "comment_id": 65123291, "body": "@KonradRudolph However, the example holds up even if <code>record</code> and <code>tally</code> are completely inlined into <code>tail_funtion</code>.  Of course, on the other hand, the compiler could see very deeply and just reduce the whole thing to <code>return 21</code>."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1470854266, "post_id": 38879173, "comment_id": 65123327, "body": "@Kaz I know. As I said: I simply mistook <code>foo</code> for the recursive function in the explanation."}], "tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": false, "score": 4, "last_activity_date": 1470852576, "last_edit_date": 1470852576, "creation_date": 1470847389, "answer_id": 38879173, "question_id": 38878700, "link": "https://stackoverflow.com/questions/38878700/why-local-arrays-in-functions-seem-to-prevent-tco/38879173#38879173", "title": "Why local arrays in functions seem to prevent TCO?", "body": "<p>If the compiler sill performed TCO, then all of the external <code>foo(arr)</code> calls would receive the same pointer. That's a visible semantics change, and thus no longer a pure optimization.</p>\n\n<p>The fact that the local variable in question is an array is probably a red herring here; it is its visibility to the outside via a pointer that is important.</p>\n\n<p>Consider this program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint *valptr[7], **curptr = valptr, **endptr = valptr + 7;\n\nvoid reset(void)\n{\n  curptr = valptr;\n\n}\n\nint record(int *ptr)\n{\n  if (curptr &gt;= endptr)\n    return 1;\n  *curptr++ = ptr;\n  return 0;\n}\n\nint tally(void)\n{\n  int **pp;\n  int count = 0;\n\n  for (pp = valptr; pp &lt; curptr; pp++)\n    count += **pp;\n\n  return count;\n}\n\nint tail_function(int x)\n{\n  return record(&amp;x) ? tally() : tail_function(x + 1);\n}\n\nint main(void)\n{\n  printf(\"tail_function(0) = %d\\n\", tail_function(0));\n  return 0;\n}\n</code></pre>\n\n<p>As the <code>tail_function</code> recurses, which it does via a tail call, the <code>record</code> function records the addresses of different instances of the local variable <code>x</code>. When it runs out of room, it returns <code>1</code>, and that triggers <code>tail_function</code> to call <code>tally</code> and return. <code>tally</code> sweeps through the recorded memory locations and adds their values.</p>\n\n<p>If <code>tally</code> were subject to TCO, then there would just be one instance of <code>x</code>. Effectively, it would be this:</p>\n\n<pre><code>int tail_function(int x)\n{\ntail:\n  if (record(&amp;x))\n    return tally();\n  x = x + 1;\n  goto tail;\n}\n</code></pre>\n\n<p>And so now, <code>record</code> is recording the same location over and over again, causing <code>tally</code> to calculate an incorrect value instead of the expected <code>21</code>.</p>\n\n<p>The logic of <code>record</code> and <code>tally</code> depends on <code>x</code> being actually instantiated on each activation of the scope, and that outer activations of the scope have a lifetime which endures until the inner ones terminate. That requirement precludes <code>tail_function</code> from recursing in constant space; it must allocate separate <code>x</code> instances.</p>\n"}], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1470852576, "creation_date": 1470845780, "question_id": 38878700, "link": "https://stackoverflow.com/questions/38878700/why-local-arrays-in-functions-seem-to-prevent-tco", "title": "Why local arrays in functions seem to prevent TCO?", "body": "<p>Looks like having a local array in your function prevents tail-call optimization on it on all compilers I've checked it on:</p>\n\n<pre><code>int foo(int*);\n\nint tco_test() {\n    // int arr[5]={1, 2, 3, 4, 5}; // &lt;-- variant 1\n    // int* arr = new int[5]; // &lt;-- variant 2\n    int x = foo(arr);\n    return x &gt; 0 ? tco_test() : x;\n}\n</code></pre>\n\n<p>When <code>variant 1</code> is active,  there is a true call to <code>tco_test()</code> in the end (gcc tries to  do some unrolling before,  but it still calls the function in the end). <code>Variant 2</code> does TCO as expected.</p>\n\n<p>Is there something in local arrays which make it impossible to optimize tail calls?</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 963, "user_id": 822830, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bb3101a4a8b25029bccef1f1851d7ba8?s=128&d=identicon&r=PG", "display_name": "mike", "link": "https://stackoverflow.com/users/822830/mike"}, "edited": false, "score": 0, "creation_date": 1470891681, "post_id": 38879481, "comment_id": 65135652, "body": "Yes why I didn&#39;t think of just reusing the model and having a mapper per line edit, I don&#39;t know! Duh!"}], "tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 1, "last_activity_date": 1470848430, "creation_date": 1470848430, "answer_id": 38879481, "question_id": 38878661, "link": "https://stackoverflow.com/questions/38878661/is-there-a-nice-way-to-map-a-qstandarditemmodel-to-many-qlineedits/38879481#38879481", "title": "Is there a nice way to map a QStandardItemModel to many QLineEdits", "body": "<p>You could create a <code>QDataWidgetMapper</code> for each widget.</p>\n\n<p>Alternatively, make one widget be the 'master value' and connect its <code>valueChanged()</code> signal (or whatever you want to call it) to the corresponding <code>setValue()</code> slot of all the 'slave' widgets.</p>\n"}], "owner": {"reputation": 963, "user_id": 822830, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bb3101a4a8b25029bccef1f1851d7ba8?s=128&d=identicon&r=PG", "display_name": "mike", "link": "https://stackoverflow.com/users/822830/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 38879481, "answer_count": 1, "score": 0, "last_activity_date": 1470848430, "creation_date": 1470845646, "question_id": 38878661, "link": "https://stackoverflow.com/questions/38878661/is-there-a-nice-way-to-map-a-qstandarditemmodel-to-many-qlineedits", "title": "Is there a nice way to map a QStandardItemModel to many QLineEdits", "body": "<p>I have a single value that needs to appear on several parts of my UI. </p>\n\n<p>Where I have a list of values that is duplicated - for instance QComboboxes, I create a single QStandardItemModel and set that model on the combos. </p>\n\n<p>I'd like to do something similar for this single value. Great, I thought, I'll use QDataWidgetMapper, but it turns out that QDataWidgetMapper doesn't allow one to many mappings, i.e. I can only map one widget to each column in my table. I'd like to map many. </p>\n\n<p>I can think of a few roll-my-own ways around this but if there's an easy way to do it that is built in, I'd appreciate hearing it. I'm on Qt 4.7 fwiw. </p>\n"}, {"tags": ["c++", "arrays", "string", "memcpy"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1470845364, "post_id": 38878529, "comment_id": 65118233, "body": "<code>cin&gt;&gt;n;</code> is not valid C. (unless <code>cin</code> is an object of integer type, both <code>cin</code> and <code>n</code> are initialized, and the value of <code>n</code> is positive and lower than the width of the type of <code>cin</code>, in which case it&#39;s a statement with no effect."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1470845476, "post_id": 38878529, "comment_id": 65118312, "body": "Show the full input/output session"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1470845514, "post_id": 38878529, "comment_id": 65118333, "body": "What should <code>strcat(a[0],&quot;\\0&quot;);</code> do?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1470845693, "post_id": 38878529, "comment_id": 65118439, "body": "Replace <code>strcat(a[0],&quot;\\0&quot;);</code> by <code>a[0][n] = &#39;\\0&#39;;</code>. Mind the quotes."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470845871, "post_id": 38878529, "comment_id": 65118564, "body": "That&#39;s not C! Use the correct tags!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1470845949, "post_id": 38878529, "comment_id": 65118620, "body": "Since when does C++ allow VLAs?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1470846078, "post_id": 38878529, "comment_id": 65118711, "body": "Don&#39;t use <code>scanf(&quot;%s&quot;,str);</code> - may result in buffer overflow"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1470846224, "post_id": 38878529, "comment_id": 65118811, "body": "So the question to you is do you really want to use C++ to solve your problem, or solve your problem using more or less, <code>C</code> code?"}, {"owner": {"reputation": 495, "user_id": 6108030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/--9NMkdtkd-E/AAAAAAAAAAI/AAAAAAAAAEU/xZHeX66qrcA/photo.jpg?sz=128", "display_name": "Aditya pratap singh", "link": "https://stackoverflow.com/users/6108030/aditya-pratap-singh"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1470846893, "post_id": 38878529, "comment_id": 65119179, "body": "@PaulMcKenzie actually I am using c++ ,tag &#39;C&#39; was put by mistake.I am not that much familiar with c++ strings so just trying to make best use of  C"}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1470845795, "post_id": 38878683, "comment_id": 65118520, "body": "Also <code>&quot;\\0&quot;</code> is not the same as <code>&#39;\\0&#39;</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1470845881, "post_id": 38878683, "comment_id": 65118575, "body": "@alk You mean that <code>&quot;\\0&quot;</code> will actually be <i>two</i> zeros?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1470845933, "post_id": 38878683, "comment_id": 65118608, "body": "Yes!-) Twice as much memory! An array, a <code>char[2]</code> not a <code>char</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1470846029, "post_id": 38878683, "comment_id": 65118675, "body": "@alk Actually I think <code>strcat(whatever, &quot;\\0&quot;);</code> should not do anything to <code>whatever</code> (if terminated), as <code>&quot;\\0&quot;</code> is an empty string no matter how long."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1470846078, "post_id": 38878683, "comment_id": 65118712, "body": "I agree, but still ... ;-)"}, {"owner": {"reputation": 495, "user_id": 6108030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/--9NMkdtkd-E/AAAAAAAAAAI/AAAAAAAAAEU/xZHeX66qrcA/photo.jpg?sz=128", "display_name": "Aditya pratap singh", "link": "https://stackoverflow.com/users/6108030/aditya-pratap-singh"}, "edited": false, "score": 0, "creation_date": 1470846808, "post_id": 38878683, "comment_id": 65119140, "body": "@EugeneSh.Still getting undesired output,however when I declare array a as char a[3][8] only then it shows correct output"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 495, "user_id": 6108030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/--9NMkdtkd-E/AAAAAAAAAAI/AAAAAAAAAEU/xZHeX66qrcA/photo.jpg?sz=128", "display_name": "Aditya pratap singh", "link": "https://stackoverflow.com/users/6108030/aditya-pratap-singh"}, "edited": false, "score": 0, "creation_date": 1470847299, "post_id": 38878683, "comment_id": 65119413, "body": "@Adityapratapsingh Have you made the change for <i>all</i> <code>a</code> elements, not only the <code>a[0]</code>?"}, {"owner": {"reputation": 495, "user_id": 6108030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/--9NMkdtkd-E/AAAAAAAAAAI/AAAAAAAAAEU/xZHeX66qrcA/photo.jpg?sz=128", "display_name": "Aditya pratap singh", "link": "https://stackoverflow.com/users/6108030/aditya-pratap-singh"}, "edited": false, "score": 0, "creation_date": 1470847727, "post_id": 38878683, "comment_id": 65119643, "body": "@EugeneSh.No,I did it only for a[0]"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1470847777, "post_id": 38878683, "comment_id": 65119667, "body": "<code>a[0]</code> was just an example. It applies for the rest."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 1, "last_activity_date": 1470847849, "last_edit_date": 1470847849, "creation_date": 1470845708, "answer_id": 38878683, "question_id": 38878529, "link": "https://stackoverflow.com/questions/38878529/trouble-copying-the-string-using-memcpy/38878683#38878683", "title": "Trouble copying the string using memcpy", "body": "<p>The command <code>strcat(a[0],\"\\0\");</code> is working on strings which are already terminated by <code>\\0</code>. Otherwise it doesn't know <em>where</em> to append the second string. In your case <code>a[0]</code> is not terminated, so the function will induce undefined behavior. You can do the following instead:</p>\n\n<pre><code>a[0][n] = '\\0';\n</code></pre>\n\n<p>(the same is for the rest of <code>a</code> elements)</p>\n"}], "owner": {"reputation": 495, "user_id": 6108030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/--9NMkdtkd-E/AAAAAAAAAAI/AAAAAAAAAEU/xZHeX66qrcA/photo.jpg?sz=128", "display_name": "Aditya pratap singh", "link": "https://stackoverflow.com/users/6108030/aditya-pratap-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 38878683, "answer_count": 1, "score": -5, "last_activity_date": 1470847849, "creation_date": 1470845278, "last_edit_date": 1470846309, "question_id": 38878529, "link": "https://stackoverflow.com/questions/38878529/trouble-copying-the-string-using-memcpy", "title": "Trouble copying the string using memcpy", "body": "<p>I have a string say <code>toioyhpknmtlghk</code>.I want to create a 2-d character array having n rows such that it contains first,second,third sub strings of length n as it's rows.</p>\n\n<p>For example,here <strong>n=5</strong> the sub strings of length 5 are, <code>toioy</code> <code>hpknm</code> and <code>tlghk</code>\nso array <strong>arr</strong> should look like</p>\n\n<pre><code>t o i o y\nh p k n m\nt l g h k\n</code></pre>\n\n<p>Now this could have been easier if I copy the characters by looping through the array but here I am trying to use <strong>memcpy</strong> as,</p>\n\n<pre><code>int main()\n{\n  long n;\n  cin&gt;&gt;n;\n  char a[3][n+1];char str[20];   //I have taken n+1 columns as n for substring and 1 for '\\0'\n  scanf(\"%s\",str);\n  char *p=str;\n  memcpy(a[0],p,n);strcat(a[0],\"\\0\");\n  p=p+n;\n  memcpy(a[1],p,n);strcat(a[1],\"\\0\");\n  p=p+n;\n  memcpy(a[2],p,n);strcat(a[2],\"\\0\");\n\n  for(int i=0;i&lt;3;i++)\n  {\n    printf(\"%s\\n\",a[i]);\n  }\n\n}\n</code></pre>\n\n<p>But on outputting the array following results are obtained,</p>\n\n<pre><code>//input\n5\ntoioyhpknmtlghk\n\n//output    \ntoioy\nhpknm{tlghk\u203c\u00e2\ntlghk\u203c\u00e2\n</code></pre>\n"}, {"tags": ["c++", "linked-list"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 4, "creation_date": 1470845362, "post_id": 38878527, "comment_id": 65118230, "body": "Please edit your question to contain a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470845473, "post_id": 38878527, "comment_id": 65118308, "body": "It&#39;s also a good idea to inspect your code by stepping through line by line with the debugger before asking here."}, {"owner": {"reputation": 434, "user_id": 1823963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88a7101a0d591218488379114ddc1cb4?s=128&d=identicon&r=PG", "display_name": "malchemist", "link": "https://stackoverflow.com/users/1823963/malchemist"}, "edited": false, "score": 0, "creation_date": 1470845549, "post_id": 38878527, "comment_id": 65118356, "body": "At first, your code does not compile. After correction - use debugger"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1470845668, "post_id": 38878527, "comment_id": 65118414, "body": "Use a debugger <b>and</b> pen and paper.  Draw the links and nodes as you execute each statement."}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1470847083, "post_id": 38878527, "comment_id": 65119280, "body": "A good, free debugger you can use is <a href=\"https://www.gnu.org/software/gdb/\" rel=\"nofollow noreferrer\">GDB</a>. Do a quick google search for tutorials. Using a debugger will change your life."}], "answers": [{"tags": [], "owner": {"reputation": 1580, "user_id": 6667256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c939d82ad703536dcfc9f9eee6dd819?s=128&d=identicon&r=PG&f=1", "display_name": "Franck", "link": "https://stackoverflow.com/users/6667256/franck"}, "is_accepted": false, "score": 1, "last_activity_date": 1470845632, "creation_date": 1470845632, "answer_id": 38878657, "question_id": 38878527, "link": "https://stackoverflow.com/questions/38878527/what-is-wrong-with-this-implementation-of-linked-list/38878657#38878657", "title": "What is wrong with this implementation of linked list?", "body": "<p>The problem comes from the non-initialization of ptr in the method add_to_head. </p>\n\n<pre><code>Node *ptr;\nptr-&gt;info=el\n</code></pre>\n\n<p>At least ptr should be a new allocated cell</p>\n\n<pre><code>Node *ptr = new Node;\nptr-&gt;info=el\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 2724296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59f685e754156ce5d19f550d08972f4f?s=128&d=identicon&r=PG&f=1", "display_name": "kakashi", "link": "https://stackoverflow.com/users/2724296/kakashi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470845632, "creation_date": 1470845260, "question_id": 38878527, "link": "https://stackoverflow.com/questions/38878527/what-is-wrong-with-this-implementation-of-linked-list", "title": "What is wrong with this implementation of linked list?", "body": "<p>This is my code for creating a singly-linked list in C++.</p>\n\n<p>The function <strong><em>del_alt()</em></strong> deletes every alternate element starting from the second element.</p>\n\n<p>The compiler gives no error as such , but during run the program terminates abruptly after showing the original list.</p>\n\n<p>I have tried my best to find the possible errors but can't find any.</p>\n\n<p>Help appreciated.</p>\n\n<p>Cheers.</p>\n\n<pre><code>    #include&lt;iostream&gt;\n\nusing namespace std;\nclass Node \n{\n    public:\n        Node()\n        {\n            next=0;\n        }\n        Node *next;\n        int info;\n\n};\n\nclass List\n{\n    private:\n        Node *head,*tail;\n    public:\n        List()\n        {\n            head=0;\n            tail=0;\n        }\n    void  del_alt();\n    void add_to_head(int);\n    void show_list();\n};\n\n\nvoid List :: del_alt()\n{\n  if(!head||(head==tail))\n    return;\n  else\n   {\n      Node *current,*after,*ptr;\n      for(current=head,after=head-&gt;next;current!=0;current=current-&gt;next,after=current-&gt;next)\n      {\n        ptr=after;\n        current-&gt;next==after-&gt;next;\n        if(ptr==tail)\n            tail=current;\n        delete ptr; \n      }\n    }\n}\n\nvoid List :: add_to_head(int el)\n{\n    Node *ptr;\n    ptr-&gt;info=el;\n    if(!head)\n        {\n            ptr-&gt;next=0;\n            head=tail=ptr;\n        }   \n    else\n        {\n            ptr-&gt;next=head;\n            head=ptr;\n        }\n}\n\nvoid List::show_list()\n{   Node *ptr;\n    cout&lt;&lt;\"\\n\\n\";\n    ptr=head;\n    while(ptr!=0)\n    {\n        cout&lt;&lt;\"\\t\"&lt;&lt;ptr-&gt;info;\n        ptr=ptr-&gt;next;\n    }\n}   \nint main()\n{\n    List l;\n    int el;\n    char ch;\n    cout&lt;&lt;\"\\n\\n\\t\\t enter elements\\n\\n\\t\";\n    do\n    {\n        cin&gt;&gt;el;\n        l.add_to_head(el);\n        cout&lt;&lt;\"\\n\\t want to enter more ? (y/n) \\n\";\n        cin&gt;&gt;ch;\n    }while(ch=='y'||ch=='Y');\n\n    cout&lt;&lt;\"\\n\\t Original list -&gt; \\n\";\n    l.show_list();\n    l.del_alt();\n    cout&lt;&lt;\"\\n\\t After deletion -&gt; \\n\";\n    n.show_list();\n    cout&lt;&lt;\"\\n\\n \\\\===============================================\";\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc", "boost", "clang", "c++14"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1470845149, "post_id": 38878454, "comment_id": 65118103, "body": "What errors does gcc give?"}, {"owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1470845500, "post_id": 38878454, "comment_id": 65118328, "body": "@aschepler I&#39;ve added the first line of the error - the rest doesn&#39;t add much. Same for <code>std::crend</code>. I actually think gcc is correct here - there is no <code>rbegin</code> or <code>rend</code> member method in <code>boost::iterator_range</code>. I just don&#39;t quite understand how Clang is making one!"}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1470845786, "post_id": 38878454, "comment_id": 65118514, "body": "@Daniel : Are you using Clang with libc++ or libstdc++? If the former, presumably it calls <code>std::make_reverse_iterator(range.begin())</code> if no <code>rbegin</code> member function is present. If the latter, then good question indeed..."}, {"owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "reply_to_user": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1470845889, "post_id": 38878454, "comment_id": 65118579, "body": "@ildjarn libc++. That&#39;s what I suspected too, but is that correct behaviour?"}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1470846022, "post_id": 38878454, "comment_id": 65118668, "body": "@Daniel : I don&#39;t know, but if that&#39;s your real question then you need some serious editing here to reflect that (and probably the <code>language-lawyer</code> tag). I.e, your question presently seems to be asking about GCC, but your real question is in regards to libc++."}], "answers": [{"comments": [{"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 2, "creation_date": 1470851254, "post_id": 38878818, "comment_id": 65121566, "body": "Thanks for the bug report."}, {"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 2, "creation_date": 1470860001, "post_id": 38878818, "comment_id": 65126406, "body": "And now it is fixed."}], "tags": [], "owner": {"reputation": 137021, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "is_accepted": true, "score": 11, "last_activity_date": 1470848318, "last_edit_date": 1592644375, "creation_date": 1470846133, "answer_id": 38878818, "question_id": 38878454, "link": "https://stackoverflow.com/questions/38878454/clang-vs-gcc-stdcrbegin-with-boostiterator-range/38878818#38878818", "title": "Clang vs gcc std::crbegin with boost::iterator_range", "body": "<p>It's a <a href=\"https://llvm.org/bugs/show_bug.cgi?id=28927\" rel=\"noreferrer\">bug in libc++</a>; <code>std::crbegin</code> is delegating to <code>rbegin</code>, but by calling it unqualified it's picking up <a href=\"http://www.boost.org/doc/libs/1_61_0/boost/range/rbegin.hpp\" rel=\"noreferrer\"><code>boost::rbegin</code></a> (<a href=\"http://www.boost.org/doc/libs/1_61_0/libs/range/doc/html/range/reference/concept_implementation/semantics/functions.html\" rel=\"noreferrer\">documentation</a>):</p>\n<pre><code>template &lt;class _Cp&gt;\ninline _LIBCPP_INLINE_VISIBILITY\nauto crbegin(const _Cp&amp; __c) -&gt; decltype(rbegin(__c))\n{\n    return rbegin(__c);\n    //     ^-- unqualified, allows ADL\n}\n</code></pre>\n<p>This is contrary to <strong>[iterator.range]</strong>, which says that <code>crbegin</code> should delegate to <code>std::rbegin</code> only:</p>\n<blockquote>\n<p><code>template &lt;class C&gt; constexpr auto crbegin(const C&amp; c) -&gt; decltype(std::rbegin(c));</code></p>\n<p>14 -  <em>Returns:</em> <code>std::rbegin(c)</code>.</p>\n</blockquote>\n<p>Libc++'s implementations of <code>cbegin</code>, <code>cend</code> and <code>crend</code> have the same bug.</p>\n"}], "owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 38878818, "answer_count": 1, "score": 6, "last_activity_date": 1470848318, "creation_date": 1470845041, "last_edit_date": 1470846719, "question_id": 38878454, "link": "https://stackoverflow.com/questions/38878454/clang-vs-gcc-stdcrbegin-with-boostiterator-range", "title": "Clang vs gcc std::crbegin with boost::iterator_range", "body": "<p>Clang 3.8.1 with libc++ compiles the following program:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\n#include &lt;boost/range/iterator_range.hpp&gt;\n\nint main()\n{\n    const std::vector&lt;int&gt; v {1, 2, 3};\n\n    const auto range = boost::make_iterator_range(v);\n\n    std::copy(std::crbegin(range), std::crend(range), std::ostream_iterator&lt;int&gt; {std::cout, \" \"});\n    std::cout &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>But gcc 6.1.0 with libstdc++ does not. First line of gcc error is:</p>\n\n<pre><code>error: no matching function for call to 'crbegin(const boost::iterator_range&lt;__gnu_cxx::__normal_iterator&lt;const int*, std::vector&lt;int&gt; &gt; &gt;&amp;\n</code></pre>\n\n<p>Who is right?</p>\n\n<p><strong>Note</strong>: Boost version 1.61</p>\n"}, {"tags": ["c++", "windows", "opencv", "webcam"], "comments": [{"owner": {"reputation": 459, "user_id": 5504460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mii1q.jpg?s=128&g=1", "display_name": "Mohamed Moanis", "link": "https://stackoverflow.com/users/5504460/mohamed-moanis"}, "edited": false, "score": 0, "creation_date": 1470849751, "post_id": 38878249, "comment_id": 65120737, "body": "How you built opencv?"}, {"owner": {"reputation": 155, "user_id": 2218067, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b474cf744b04b4ff5f0a6403ef8b5ce?s=128&d=identicon&r=PG", "display_name": "user2218067", "link": "https://stackoverflow.com/users/2218067/user2218067"}, "reply_to_user": {"reputation": 459, "user_id": 5504460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mii1q.jpg?s=128&g=1", "display_name": "Mohamed Moanis", "link": "https://stackoverflow.com/users/5504460/mohamed-moanis"}, "edited": false, "score": 0, "creation_date": 1470882256, "post_id": 38878249, "comment_id": 65133128, "body": "@MohamedMoanis I am using precompiled binary package from opencv.org."}], "owner": {"reputation": 155, "user_id": 2218067, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b474cf744b04b4ff5f0a6403ef8b5ce?s=128&d=identicon&r=PG", "display_name": "user2218067", "link": "https://stackoverflow.com/users/2218067/user2218067"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470844422, "creation_date": 1470844422, "question_id": 38878249, "link": "https://stackoverflow.com/questions/38878249/opencv-camera-cant-get-a-video-decompresser", "title": "OpenCV camera - can&#39;t get a video decompresser?", "body": "<p>I am using opencv C++ (2.4.13) on windows 10 (10.0.10586) to read some image frame from my webcam using the following code:</p>\n\n<pre><code>VideoCapture capture;\nMat frame;    \ncapture.open(-1);\nif (!capture.isOpened()) { printf(\"--(!)Error opening video capture\\n\"); return -1; }\n\nwhile (capture.read(frame)) ....\n</code></pre>\n\n<p>Opening the cam was successful but <code>capture.read(frame)</code> failed, returning an empty frame.</p>\n\n<p>My cam works well in windows 10's camera application.</p>\n\n<p>I debugged into opencv source code and found that the problem is here:</p>\n\n<pre><code>hic = ICOpen( MAKEFOURCC('V','I','D','C'),\n                      vfmt0.biCompression, ICMODE_DECOMPRESS );\n</code></pre>\n\n<p>with vfmt0.biCompression = 0x47504a4d  ( \"MJPG\" = motion JPEG  )</p>\n\n<p>The <code>ICOpen</code> function returned zero so the whole progress failed. <code>ICOpen</code> is a windows API to get a compressor/decompressor of video streams.</p>\n\n<p>Do I need to install additional decompressor or any configuration step to get cam work under openCV?</p>\n"}, {"tags": ["c++", "memory-management", "vector"], "comments": [{"owner": {"reputation": 721, "user_id": 6479780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yP4ZE.png?s=128&g=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/6479780/omar"}, "edited": false, "score": 9, "creation_date": 1470844188, "post_id": 38878133, "comment_id": 65117520, "body": "If you are using C++, don&#39;t use <code>malloc</code> and  <code>free</code>, use <code>new</code>and <code>delete</code>"}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 3, "creation_date": 1470844301, "post_id": 38878133, "comment_id": 65117588, "body": "How do you add element in <code>push_back</code>? If you&#39;re using placement new, then calling destructor explicitly would be fine."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1470844575, "post_id": 38878133, "comment_id": 65117749, "body": "You implementation isn&#39;t overly safe on the whole. Your <code>push_back</code> reinterprets raw uninitialized memory as an object and than assigns to it. Try storing <code>std::string</code> in your <code>Array</code> and a calamity will surely follow."}, {"owner": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 0, "creation_date": 1470844580, "post_id": 38878133, "comment_id": 65117756, "body": "I don&#39;t see any reason to believe that <code>realloc</code> will not cause a peak in memory usage the same way delete/new combinations would."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1470844737, "post_id": 38878133, "comment_id": 65117849, "body": "Your assignment operator is flawed in that you change data members before allocating memory.  What if <code>malloc</code> returns NULL?  How are you going to &quot;rollback&quot; the changes you made to your object&#39;s data members?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1470846059, "post_id": 38878133, "comment_id": 65118694, "body": "&quot;<i>The reason I&#39;m using malloc() is, I&#39;m trying to utilize realloc().</i>&quot; You cannot use <code>realloc</code> on storage for types which are not trivially copyable."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 3, "creation_date": 1470846852, "post_id": 38878133, "comment_id": 65119162, "body": "<code>std::vector</code> uses an <i>allocator</i> that is a template parameter, defaulting to <code>std::allocator</code>. As of C++17 and later it will use that allocator via <a href=\"http://en.cppreference.com/w/cpp/memory/allocator_traits/construct\" rel=\"nofollow noreferrer\"><code>std::allocator_traits</code></a>, calling <code>std::allocator_traits:.construct</code> to construct an object in specified storage, and <code>std::allocator_traits::destroy</code> to destroy an object."}, {"owner": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1470846930, "post_id": 38878133, "comment_id": 65119200, "body": "@Cheersandhth.-Alf What&#39;s inside the black box <code>allocator_traits</code>?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1470847349, "post_id": 38878133, "comment_id": 65119439, "body": "I linked to the docs at cppreference.com, they&#39;re generally reliable."}, {"owner": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1470850172, "post_id": 38878133, "comment_id": 65120955, "body": "no, I mean how does <code>allocator_traits</code> do its obj? How does it work internally? @Cheersandhth.-Alf"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1470850447, "post_id": 38878133, "comment_id": 65121099, "body": "Oh. As the docs explains, <code>allocator_traits::construct</code> will use the allocator&#39;s <code>construct</code> if there is one, and otherwise use a placement <code>new</code> expression (the default). And with all standard containers the default allocator is <code>std::allocator</code>, whose <code>construct</code> function uses a placement <code>new</code> expression. So through two levels of defaults it&#39;s placement <code>new</code>. If you want to use it yourself directly, be sure to include the <code>new</code> header, and prefix <code>new</code> with a double colon, <code>::new</code>, to avoid picking up a class-specific overload."}], "answers": [{"comments": [{"owner": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "edited": false, "score": 0, "creation_date": 1470844447, "post_id": 38878206, "comment_id": 65117667, "body": "I thought about it, but my concern with <code>new</code> and <code>delete</code> is memory peak when reallocing. (Both the old buffer and new buffer has to be present for a moment so that we can copy data.)"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1470844551, "post_id": 38878206, "comment_id": 65117730, "body": "You wrote your class as a template.  If I give your class a <code>std::string</code> or basically any non-POD type, your code will fail using <code>malloc</code>.  C++ is not C."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "edited": false, "score": 0, "creation_date": 1470844555, "post_id": 38878206, "comment_id": 65117733, "body": "@KelvinZhang That is something you need if you want to support types that must be deep copied."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "reply_to_user": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "edited": false, "score": 0, "creation_date": 1470844586, "post_id": 38878206, "comment_id": 65117762, "body": "@KelvinZhang So your question is actually about how vector implements reallocation, not about malloc and free right?"}, {"owner": {"reputation": 709, "user_id": 2471708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/56e762ba61956bdbe5099e0e368daba0?s=128&d=identicon&r=PG", "display_name": "apmccartney", "link": "https://stackoverflow.com/users/2471708/apmccartney"}, "edited": false, "score": 2, "creation_date": 1470844622, "post_id": 38878206, "comment_id": 65117787, "body": "It seems that you&#39;re under the impression that realloc retains the memory of the original allocation. This is not the case."}], "tags": [], "owner": {"reputation": 709, "user_id": 2471708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/56e762ba61956bdbe5099e0e368daba0?s=128&d=identicon&r=PG", "display_name": "apmccartney", "link": "https://stackoverflow.com/users/2471708/apmccartney"}, "is_accepted": false, "score": 0, "last_activity_date": 1470844320, "creation_date": 1470844320, "answer_id": 38878206, "question_id": 38878133, "link": "https://stackoverflow.com/questions/38878133/how-does-stdvector-destruct-its-objects/38878206#38878206", "title": "How does std::vector destruct its objects?", "body": "<p>Rather than calling to <code>malloc</code> and <code>free</code>, prefer to use <code>new</code> and <code>delete</code>. Calling to <code>delete</code> will ensure that the instance dtor is called. =)</p>\n"}, {"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470844685, "post_id": 38878301, "comment_id": 65117819, "body": "That won&#39;t work well when you try to add a single new value to the back of the vector.  You&#39;ll have to copy the array <i>every single time</i>."}, {"owner": {"reputation": 1580, "user_id": 6667256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c939d82ad703536dcfc9f9eee6dd819?s=128&d=identicon&r=PG&f=1", "display_name": "Franck", "link": "https://stackoverflow.com/users/6667256/franck"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470854459, "post_id": 38878301, "comment_id": 65123416, "body": "@MartinBonner I suppose that length can evolve until capacity and that the destructor does nothing on T object created by the default constructor (the ones that are between length and capacity). For reallocation, a new allocation is required with move assignments. Yes std::vector perfectly does the job."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470892838, "post_id": 38878301, "comment_id": 65136053, "body": "But the point about capacity is that you don&#39;t construct the elements between size() and capacity() - you just allocated the memory."}, {"owner": {"reputation": 1580, "user_id": 6667256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c939d82ad703536dcfc9f9eee6dd819?s=128&d=identicon&r=PG&f=1", "display_name": "Franck", "link": "https://stackoverflow.com/users/6667256/franck"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470900543, "post_id": 38878301, "comment_id": 65139875, "body": "@MartinBonner I agree with your comment. The solutions described above and in vector.tcc are more adequate with just an allocation for the elements between size() and capacity()."}], "tags": [], "owner": {"reputation": 1580, "user_id": 6667256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c939d82ad703536dcfc9f9eee6dd819?s=128&d=identicon&r=PG&f=1", "display_name": "Franck", "link": "https://stackoverflow.com/users/6667256/franck"}, "is_accepted": false, "score": 0, "last_activity_date": 1470902813, "last_edit_date": 1470902813, "creation_date": 1470844614, "answer_id": 38878301, "question_id": 38878133, "link": "https://stackoverflow.com/questions/38878133/how-does-stdvector-destruct-its-objects/38878301#38878301", "title": "How does std::vector destruct its objects?", "body": "<p>At the limit it is possible to use <em>new []</em> if the default constructor is reserved for <em>just allocated</em> objects and if the /move/copy constructors/assignment operators and destructor of T propagate the information <em>just allocated</em> or <em>user object</em>. The solution in std::vector and its default allocator is nevertheless a far better design.</p>\n\n<p>The construction</p>\n\n<pre><code>buffer = new T[capacity];\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>buffer = (T*)malloc(capacity * sizeof(T));\n</code></pre>\n\n<p>and</p>\n\n<pre><code>delete [] buffer;\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>free(buffer);\n</code></pre>\n\n<p>will automatically call the destructor of each object as on the example</p>\n\n<pre><code>class A {\npublic:\n  ~A() { std::cout &lt;&lt; \"ok\" &lt;&lt; std::endl; }\n};\n\nint main() {\n  A* a = new A[3];\n  delete [] a;\n  return 0;\n}\n</code></pre>\n\n<p>this code outputs 3 \"ok\". Then A should contain additional fields and a non default constructor to differentiate allocation from user construction.</p>\n"}, {"comments": [{"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 1, "creation_date": 1470844710, "post_id": 38878304, "comment_id": 65117833, "body": "Not really. <code>vector</code> is an allocator-aware container so no mainstream implementation is going to write <code>~T()</code>."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1470845063, "post_id": 38878304, "comment_id": 65118053, "body": "@uhohsomebodyneedsapupper But the default allocator will."}, {"owner": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "edited": false, "score": 0, "creation_date": 1470846139, "post_id": 38878304, "comment_id": 65118757, "body": "OK How should I use placement new though? <code>new (buffer[length]) T()</code> ?"}, {"owner": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "edited": false, "score": 0, "creation_date": 1470846216, "post_id": 38878304, "comment_id": 65118806, "body": "If I use placement new, do I still need to assign the allocated object to buffer[length]?(Since the object object is allocated on buffer)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1470851096, "post_id": 38878304, "comment_id": 65121478, "body": "&quot;If I use placement new, do I still need to assign the allocated object to buffer[length]?&quot; No, <code>push_back</code> should call placement <code>new</code> with the copy constructor. No assignment."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470893250, "post_id": 38878304, "comment_id": 65136202, "body": "&quot;How do I use placement new&quot;.  <code>new(m_end++) T(arg);</code>  (assuming you have a pointer of type T* which points just past the end of the allocated variables.)"}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": true, "score": 5, "last_activity_date": 1470893053, "last_edit_date": 1470893053, "creation_date": 1470844616, "answer_id": 38878304, "question_id": 38878133, "link": "https://stackoverflow.com/questions/38878133/how-does-stdvector-destruct-its-objects/38878304#38878304", "title": "How does std::vector destruct its objects?", "body": "<p>Calling <code>~T()</code> is <em>exactly</em> how <code>std::vector</code> handles the problem.</p>\n\n<p>You do however have a couple of problems:  </p>\n\n<p>Firstly, <code>push_back</code> needs to use placement new to copy-construct the value into the vector.  You can't just use assignment.  </p>\n\n<p>Secondly, you can't call <code>realloc</code> - if the object have internal pointers, they are going to end up pointing outside them selves.  You must call <code>malloc</code> again, then use placement new to copy-construct the values, then explictly delete all the old values, then call <code>free</code> to release the old value.</p>\n\n<p>(Actually, <code>std::vector</code> doesn't call <code>~T()</code> itself.  Instead it calls the allocator which is responsible for ... <em>allocating</em> and deallocating memory.  Internally though, that is how general purpose allocators do it.)</p>\n"}, {"tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 2, "last_activity_date": 1470846764, "last_edit_date": 1470846764, "creation_date": 1470845980, "answer_id": 38878768, "question_id": 38878133, "link": "https://stackoverflow.com/questions/38878133/how-does-stdvector-destruct-its-objects/38878768#38878768", "title": "How does std::vector destruct its objects?", "body": "<blockquote>\n  <p>push_back(const T &amp;t) add one element, call realloc() if necessary.</p>\n</blockquote>\n\n<p>It is ok as long as <code>T</code> is <code>trivially copiable</code>,  for example, try to push back double linked lists and after reallcoation take one and iterate backwards - the app will probably crash. the solution is to overload the function twice, one for types which are trivialy copiable, and one for objects that are not.</p>\n\n<p>As opposed to others, I'm quite sorry that the standard containers do not use <code>realloc</code> for objects which are trivially copiable. at least on Windows, <code>realloc</code> first checks if the current block can hold the new size and if so - it just updates the heap entry, causing huge performance boost (no copying). </p>\n\n<blockquote>\n  <p>call ~T() EXPLICITLY before I free() the memory.</p>\n</blockquote>\n\n<p>Yes, this is how the standard allocator does it. assume <code>size</code> is the object count, you iterate each one and destruct it manually:</p>\n\n<pre><code>for (auto i=0U;i&lt;size;i++){\n   data[i].~T();\n}\n</code></pre>\n\n<p>Interestingly, C++17 will add <code>std::destruct</code> which does exactly that.</p>\n\n<p><strong><em>Bonus:</em></strong>\nUsing <code>new[]</code> and <code>delete[]</code> will not help here. usually, dynamic arrays saves <em>more space</em> than what they need to achieve capacity ,the extra space is not filled with live objects, only junk. </p>\n\n<p><code>new[]</code> will fill the entire memory with objects. capacity cannot be implemented this way. the array will move/copy the entire objects whenever someone pushes back new elements. so after 1000 <code>push_back</code>'s, there will be 1000 reallocations. we want amortized time of <code>O(log (n))</code>.</p>\n\n<p>even the standard allocator will call <code>new(size_t)</code> or <code>malloc</code> and not <code>new[]</code></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6700774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8576d73663816c0e08d6e90b314e47a1?s=128&d=identicon&r=PG&f=1", "display_name": "Cristian Garc&#237;a", "link": "https://stackoverflow.com/users/6700774/cristian-garc%c3%ada"}, "is_accepted": false, "score": -1, "last_activity_date": 1470856127, "last_edit_date": 1592644375, "creation_date": 1470856127, "answer_id": 38881681, "question_id": 38878133, "link": "https://stackoverflow.com/questions/38878133/how-does-stdvector-destruct-its-objects/38881681#38881681", "title": "How does std::vector destruct its objects?", "body": "<p>Here you have an example how it works more or less std::vector:</p>\n<pre><code>#ifndef __STDVECTOR__\n#define __STDVECTOR__\n\n#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate &lt;typename T&gt;\n    class StdVector{\n        private:\n            T *buffer;\n            unsigned int capacity;\n        public:\n            //Constructor.\n            StdVector(){\n                capacity=0;\n                buffer=new T[capacity];\n            }\n            //Copy constructor.\n            StdVector(const StdVector &amp;asv){\n                int i;\n                \n                capacity=asv.getCapacity();\n                buffer=new T[asv.getCapacity()];\n                for (i=0; i&lt;capacity; i++){\n                    buffer[i]=asv[i];\n                }\n            }\n            //Destructor.\n            ~StdVector(){\n                delete []buffer;\n            }\n            void push_back(T obj){\n                StdVector oldSV(*this);\n                int i;\n                \n                capacity++;\n                delete []buffer;\n                buffer=new T[capacity];\n                for (i=0; i&lt;oldSV.getCapacity(); i++){\n                    buffer[i]=oldSV[i];\n                }\n                buffer[i]=obj;\n            };\n            T getBuffer() const{\n                if (capacity==0){\n                    throw exception();\n                }\n                return *buffer;\n            };\n            T &amp;operator[](int index) const{\n                if (index&gt;=capacity){\n                    //Out of range.\n                    throw exception();\n                }\n                else{\n                    return buffer[index];\n                }\n            }\n            StdVector &amp;operator=(const StdVector &amp;obj){\n                capacity=obj.getCapacity();\n                delete []buffer;\n                buffer=new T[capacity];\n                buffer=obj.getBuffer();\n                return *this;\n            }\n            unsigned int getCapacity() const{\n                return capacity;\n            };\n    };\n \n#endif\n\nint main(){\n    try{\n        StdVector&lt;int&gt; test;\n        StdVector&lt;string&gt; test2;\n        unsigned int i;\n        \n        test.push_back(5);\n        test.push_back(4);\n        test.push_back(3);\n        test.push_back(2);\n        test.push_back(1);\n        test.push_back(0);\n        test.push_back(-1);\n        test.push_back(-2);\n        test.push_back(-3);\n        test.push_back(-4);\n        test.push_back(-5);\n        for (i=0; i&lt;test.getCapacity(); i++){\n            cout &lt;&lt; test[i] &lt;&lt; endl;\n        }\n        test2.push_back(&quot;Hello&quot;);\n        test2.push_back(&quot; &quot;);\n        test2.push_back(&quot;World&quot;);\n        test2.push_back(&quot;.&quot;);\n        cout &lt;&lt; &quot;---------------&quot; &lt;&lt; endl;\n        for (i=0; i&lt;test2.getCapacity(); i++){\n            cout &lt;&lt; test2[i];\n        }\n        cout &lt;&lt; endl;\n    }\n    catch(...){\n        cout &lt;&lt; &quot;Exception.&quot; &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n<p>\nIt prints:\n</p>\n<p>\n5\n</p>\n<p>\n4\n</p>\n<p>\n3\n</p>\n<p>\n2\n</p>\n<p>\n1\n</p>\n<p>\n0\n</p>\n<p>\n-1\n</p>\n<p>\n-2\n</p>\n<p>\n-3\n</p>\n<p>\n-4\n</p>\n<p>\n-5\n</p>\n<p>\n---------------\n</p>\n<p>\nHello World.\n</p>\n<p>\nMaybe i have some error. If you know, say me pls.\n</p>\n"}], "owner": {"reputation": 842, "user_id": 4995940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/459561740873608/picture?type=large", "display_name": "Kelvin  Zhang", "link": "https://stackoverflow.com/users/4995940/kelvin-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1353, "favorite_count": 0, "accepted_answer_id": 38878304, "answer_count": 5, "score": 5, "last_activity_date": 1470902813, "creation_date": 1470844067, "last_edit_date": 1470844344, "question_id": 38878133, "link": "https://stackoverflow.com/questions/38878133/how-does-stdvector-destruct-its-objects", "title": "How does std::vector destruct its objects?", "body": "<p>I'm trying to implement my own std::vector for sake of practice. Current source code:<a href=\"http://pastebin.com/bE4kjzcb\">http://pastebin.com/bE4kjzcb</a></p>\n\n<hr>\n\n<p>Here is an outline of my class:</p>\n\n<ol>\n<li><code>Array()</code> allocate some memory using <code>malloc()</code></li>\n<li><code>push_back(const T &amp;t)</code> add one element, call <code>realloc()</code> if necessary.</li>\n<li><code>~Array()</code> call <code>free()</code> to release memory.</li>\n</ol>\n\n<p>The major issue with this model is, <code>free()</code> recycles the memory, but it doesn't call <code>T</code>'s destructor(when <code>T</code> is a class rather than standard data type). </p>\n\n<p>This could cause severe resource leak when elements inside vectors are objects. My solution to this problem is, call <code>~T()</code> <strong>EXPLICITLY</strong> before I <code>free()</code> the memory. </p>\n\n<p>The reason I'm using <code>malloc()</code> is, I'm trying to utilize <code>realloc()</code>. If I use <code>new</code> and <code>delete</code>, memory usage will peak when reallocing. (The moment when both the new buffer and old buffer are present.)</p>\n\n<p>Q:\nIs that a bad design? how does <code>std::vector</code> resolve this problem? Is there other flaws in my vector class?</p>\n\n<p>PS:Let's not talk about multithread performances of <code>malloc()</code> now.</p>\n"}, {"tags": ["c++", "performance"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1470843333, "post_id": 38877827, "comment_id": 65116912, "body": "I read somewhere else something like &quot;<i>Test it 10 times with covering all the cases and then take the average time as your result</i>&quot;"}, {"owner": {"reputation": 171, "user_id": 2345397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/29212d203a5df277348eaf400e24eb24?s=128&d=identicon&r=PG", "display_name": "user2345397", "link": "https://stackoverflow.com/users/2345397/user2345397"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1470843751, "post_id": 38877827, "comment_id": 65117194, "body": "@FirstStep Thats a good idea; automating the process would at least speed it up considerably. And now that I think of it, the average of separate runs should be much more telling. My only worry is the question of where the variation comes from. If its due to the system periodically requiring more computational resources, then an average wouldn&#39;t necessarily converge to the correct value. I try to work without any unnecessary programs running, but there are limits to this, so obtaining a fair measurement still seems difficult."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470844048, "post_id": 38877827, "comment_id": 65117407, "body": "How long does an individual test run take?  I think I&#39;d want 10 or 20 seconds of runs.  (Possibly also worth timing a smallish constant program before and after to see if something is slowing the machine down.)"}, {"owner": {"reputation": 171, "user_id": 2345397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/29212d203a5df277348eaf400e24eb24?s=128&d=identicon&r=PG", "display_name": "user2345397", "link": "https://stackoverflow.com/users/2345397/user2345397"}, "edited": false, "score": 0, "creation_date": 1470844903, "post_id": 38877827, "comment_id": 65117949, "body": "If I automated my current method of testing, the individual tests would be pretty slow because I have to aquire an OpenGL context and load in data each time. But if I designed it so I could test different implementations during a single run, I&#39;d avoid that and I&#39;d avoid the strange variation in execution speed that happens between runs. And I like your idea about having a program that measures relative system speed. Maybe I could launch several threads to do this measurement and then use that to normalize the results of the tests..."}], "owner": {"reputation": 171, "user_id": 2345397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/29212d203a5df277348eaf400e24eb24?s=128&d=identicon&r=PG", "display_name": "user2345397", "link": "https://stackoverflow.com/users/2345397/user2345397"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1470843211, "creation_date": 1470843211, "question_id": 38877827, "link": "https://stackoverflow.com/questions/38877827/are-there-tools-methods-to-objectively-measure-performance", "title": "Are there tools/ methods to objectively measure performance?", "body": "<p>I'm writing a high performance application (a raytracer) in C++ using Visual Studio, and I just spent two days trying to root out a performance drop I witnessed after refactoring the code. The reason it took so long was because the performance drop was smaller than the normal variation in execution time I witnessed from run to run. </p>\n\n<p>Not sure if this is normal, but sometimes the program may run at around 33fps pretty consistently, then if you close and rerun, it may run at 37fps. This means that in order to test any new change, I had to manually run and rerun until I witnessed peak performance (And this could require up to like 10 runs). Simply running it for some large number of frames, and measuring the time doesn't fix this variability. For example, if the program runs for 40 seconds on average, it will nevertheless vary by over 1-2 seconds, which makes this test nearly useless for detecting the 1 millisecond per frame performance loss I was dealing with. </p>\n\n<p>Visual Studio's profiling tools also didn't help find this small of an issue, because they also were subject to variation, and in any case, its not necessarily going to tell me the exact offending line, so I have to test solutions, and the profiler is not very effective at confirming a proposed solution's efficacy. </p>\n\n<p>I realize this all may sound like premature optimization, but I don't think it is because I'm optimizing <em>only</em> after finishing complete features; I'm just trying to monitor changes in performance regularly so that issues like the above don't slip in and just get added to the apparent cost of the new feature. </p>\n\n<p>Anyways, my question is simply whether there's a way to objectively determine the \"real\" speed of an application, discounting the effect of variation. Or, failing that, how do developers deal with such issues? I doubt that my current process is the ideal one. </p>\n"}, {"tags": ["c++", "makefile", "include", "libraries", "dlib"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 3346727, "user_type": "registered", "profile_image": "https://graph.facebook.com/1002267116/picture?type=large", "display_name": "user3346727", "link": "https://stackoverflow.com/users/3346727/user3346727"}, "edited": false, "score": 0, "creation_date": 1470844107, "post_id": 38877907, "comment_id": 65117451, "body": "I have changed the INC line and commented the LIB line.          #LIB\t\t:= $(shell find $(LIBDIR) -type f -name *.$(SRCEXT))         INC\t\t:= -Iinclude/dlib/ Also I added the following to my header file:         #include &lt;../include/dlib/geometry.h&gt;  I don&#39;t know what you mean with the problem in the linking phase? (it does not make without saying: &quot;No such file or directory&quot;)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 3, "user_id": 3346727, "user_type": "registered", "profile_image": "https://graph.facebook.com/1002267116/picture?type=large", "display_name": "user3346727", "link": "https://stackoverflow.com/users/3346727/user3346727"}, "edited": false, "score": 0, "creation_date": 1470844771, "post_id": 38877907, "comment_id": 65117864, "body": "check my edit, and tell me the results. If it compiles and you have a link problem, post that too."}, {"owner": {"reputation": 3, "user_id": 3346727, "user_type": "registered", "profile_image": "https://graph.facebook.com/1002267116/picture?type=large", "display_name": "user3346727", "link": "https://stackoverflow.com/users/3346727/user3346727"}, "edited": false, "score": 0, "creation_date": 1470845210, "post_id": 38877907, "comment_id": 65118148, "body": "Yes, Thanks a lot! Ther was only one problem still, which I solved. The problem was that the dlib folder was included. This is wrong (for dlib at least) and gives errors. What I now did is: INC     := -Iinclude/dlib and #include &lt;dlib/geometry.h&gt;. This works now. Thank you so many times!"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 0, "last_activity_date": 1470844732, "last_edit_date": 1470844732, "creation_date": 1470843393, "answer_id": 38877907, "question_id": 38877749, "link": "https://stackoverflow.com/questions/38877749/include-dlib-in-c-project/38877907#38877907", "title": "Include dlib in c++ project", "body": "<p>What the documentation is saying is that you must not configure your compiler so it finds the dlib includes by default, but do it in your project.</p>\n\n<p>That makes sense, so when you distribute your makefile, it will work for other users without changing compiler configuration.</p>\n\n<p>For your problem, just change</p>\n\n<pre><code>INC     :=\n</code></pre>\n\n<p>by</p>\n\n<pre><code>INC     := -Iinclude/dlib\n</code></pre>\n\n<p>You will be able to use dlib headers that you have added to your project like that:</p>\n\n<pre><code>#include &lt;geometry.h&gt;\n</code></pre>\n\n<p>(don't add the path, it is already in the compiler search path, driven by the <code>-I</code> option)</p>\n\n<p>A bit out of scope of your question, but if you use functions from the <code>dlib</code> library (not only defines), you'll have a similar problem at the link phase (undefined symbols for called dlib symbols). That line could help but I think it is suspicious too:</p>\n\n<pre><code>LIB     := $(shell find $(LIBDIR) -type f -name *.$(SRCEXT))\n</code></pre>\n\n<p>It looks for source files in LIB (unless I'm mistaken, <code>SRCEXT</code> cannot contain library extensions)</p>\n"}], "owner": {"reputation": 3, "user_id": 3346727, "user_type": "registered", "profile_image": "https://graph.facebook.com/1002267116/picture?type=large", "display_name": "user3346727", "link": "https://stackoverflow.com/users/3346727/user3346727"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1605, "favorite_count": 0, "accepted_answer_id": 38877907, "answer_count": 1, "score": 0, "last_activity_date": 1470844732, "creation_date": 1470842978, "question_id": 38877749, "link": "https://stackoverflow.com/questions/38877749/include-dlib-in-c-project", "title": "Include dlib in c++ project", "body": "<p>I'm trying to get the dlib library working in my c++ project and don't know what to do with my Makefile and the #include&lt;...> in the header file of my script. I have placed my header file and my script in the src directory. A symbolic link has been made to the dlib library, the link is in the include directory (see the folder structure below).</p>\n\n<p>On the dlib website it says:</p>\n\n<blockquote>\n  <p>You should not add the dlib folder itself to your compiler's include path</p>\n  \n  <p>Instead you should add the folder that contains the dlib folder to your include search path and then use include statements of the form #include . This will ensure that everything builds correctly. </p>\n</blockquote>\n\n<p>The only thing I want is to include the dlib in my header file and make it compile so that I can use all the functions of dlib. Can you help me with this?</p>\n\n<p>The folder structure is like this:</p>\n\n<pre><code>    projectDir\n    |-Makefile\n    |-src\n    | |-main.cpp\n    | |-main.hpp\n    |-include\n      |-dlib (symbolic link)\n        |-all\n        |  |-source.cpp\n        |- lots of header files\n        |-...\n</code></pre>\n\n<p>The makefile looks like this:</p>\n\n<pre><code>    CC      := g++ # This is the main compiler\n    # CC := clang --analyze # and comment out the linker last line for sanity\n    SRCDIR  := src\n    LIBDIR  := lib\n    BUILDDIR:= build\n    TARGET  := bin/main\n\n    SRCEXT  := cpp\n    SOURCES := $(shell find $(SRCDIR) -type f -name *.$(SRCEXT))\n    OBJECTS := $(patsubst$(SRCDIR)/%,$(BUILDDIR)                                                        /%,$(SOURCES:.$(SRCEXT)=.o))\n    CFLAGS  := -g # -Wall\n    LIB     := $(shell find $(LIBDIR) -type f -name *.$(SRCEXT))\n    INC     :=\n\n    $(TARGET): $(OBJECTS)\n        @echo \" Linking...\"\n        $(CC) $^ -o $(TARGET) $(LIB)\n\n    $(BUILDDIR)/%.o: $(SRCDIR)/%.$(SRCEXT)\n        @mkdir -p $(BUILDDIR)\n        $(CC) $(CFLAGS) $(INC) -c -o $@ $&lt;\n\n    clean:\n        @echo \" Cleaning...\"; \n        $(RM) -r $(BUILDDIR) $(TARGET)\n\n    .PHONY: clean\n</code></pre>\n\n<p>This is the main.cpp file:</p>\n\n<pre><code>    #include \"main.hpp\"\n\n    int main(){\n        return 0;\n    }\n</code></pre>\n\n<p>And the header file: main.hpp, is empty since I really don't know what to do with it.</p>\n"}, {"tags": ["c++", "boost", "boost-spirit"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 6453996, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e4931764d4efbd2b40c3f672cc640ea?s=128&d=identicon&r=PG&f=1", "display_name": "Milan Irigoyen", "link": "https://stackoverflow.com/users/6453996/milan-irigoyen"}, "edited": false, "score": 0, "creation_date": 1470904329, "post_id": 38884727, "comment_id": 65142194, "body": "Thanks for the quick answer, in great detail as always :)  But I think my mind just broke. How come you can get two different outputs of one rule? I&#39;m guessing that by using <code>operator=</code> you only get the parsers, and qi::raw gives you the complete output? How would that work internally? Every rule stores both its &quot;normal&quot; and raw outputs?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 75, "user_id": 6453996, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e4931764d4efbd2b40c3f672cc640ea?s=128&d=identicon&r=PG&f=1", "display_name": "Milan Irigoyen", "link": "https://stackoverflow.com/users/6453996/milan-irigoyen"}, "edited": false, "score": 2, "creation_date": 1470907278, "post_id": 38884727, "comment_id": 65144038, "body": "Indeed, raw [] exposes the raw matched input sequence. The reason you can use both attributes is because of where the semantic action attaches. The first attaches at the sub parser expression (that exposes the name), and the <code>fromFile</code> action attaches to the result of the<code>raw []</code> directive itself"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 75, "user_id": 6453996, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e4931764d4efbd2b40c3f672cc640ea?s=128&d=identicon&r=PG&f=1", "display_name": "Milan Irigoyen", "link": "https://stackoverflow.com/users/6453996/milan-irigoyen"}, "edited": false, "score": 1, "creation_date": 1470907479, "post_id": 38884727, "comment_id": 65144179, "body": "A proper qi::rule only <i>synthesises</i> one attribute naturally (although it would be possible to synthesise a tuple of them from a custom directive like <code>with_raw</code>."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 3, "last_activity_date": 1470868914, "last_edit_date": 1495541289, "creation_date": 1470868914, "answer_id": 38884727, "question_id": 38877702, "link": "https://stackoverflow.com/questions/38877702/boostspirit-parsing-into-structure-and-reusing-parts-of-it/38884727#38884727", "title": "Boost:spirit Parsing into structure and reusing parts of it", "body": "<p>Addressing the questions:</p>\n\n<blockquote>\n  <ol>\n  <li>My idea was to only adapt part of the structure with <code>BOOST_FUSION_ADAPT_STRUCT</code>, and fill the rest with semantic actions. Stupid idea, or am I just doing it wrong?</li>\n  </ol>\n</blockquote>\n\n<p>Not unthinkable. Not my recommendation (see <a href=\"https://stackoverflow.com/questions/8259440/boost-spirit-semantic-actions-are-evil\">Boost Spirit: &quot;Semantic actions are evil&quot;?</a>). But yeah you're doing it wrong:</p>\n\n<p>You want <code>lit(\"$\")</code> instead of <code>char_(\"$\")</code> if you don't want it to be part of the exposed attribute. In fact, <code>'$'</code> will do here</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li><p>Is there a way to bind a semantic action and still get the output? Like</p>\n\n<pre><code>char_[doSomething] // Can this both call doSomething, and parse a char?\n</code></pre></li>\n  </ol>\n</blockquote>\n\n<p>Yes. You're doing it right now, and it works because of <code>operator%=</code> you used instead of <code>operator=</code> (see the docs: <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/spirit/doc/html/spirit/qi/reference/nonterminal/rule.html#spirit.qi.reference.nonterminal.rule.expression_semantics\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_61_0/libs/spirit/doc/html/spirit/qi/reference/nonterminal/rule.html#spirit.qi.reference.nonterminal.rule.expression_semantics</a>).</p>\n\n<p>However, it seems you are really trying to use the same input twice (raw as <code>fromFile</code> and \"cooked\" as <code>name</code>?)  it backfires, because the auto-rule attribute propagation <em>also</em> overwrites <code>name</code> with the value you want for <code>fromFile</code>.</p>\n\n<p>The only quick way out, here, is to use SA only. I'd suggest making <code>VariableHolder</code>'s constructor responsible for details though. </p>\n\n<blockquote>\n  <p>Side note: it looks a bit as if the optional parentheses suggest an expression grammar. If so, make that explicit in the grammar, instead of hardcoding a special case in the rule for a <code>variableName</code>. If not, carry on :)</p>\n</blockquote>\n\n<p>Here's an attempted fix:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/122b36f7c112d921\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/spirit/include/qi.hpp&gt;\n#include &lt;boost/spirit/include/phoenix.hpp&gt;\n\nnamespace qi      = boost::spirit::qi;\nnamespace phoenix = boost::phoenix;\n\nstruct VariableHolder {\n    std::string name;     // contains \"varName\"\n    std::string fromFile; // contains \"$(varName)\" or \"$varName\"\n};\n\ntemplate &lt;typename It, typename Skipper = qi::ascii::space_type&gt; struct P : qi::grammar&lt;It, VariableHolder(), Skipper&gt; {\n    P() : P::base_type(start) {\n        auto _name     = phoenix::bind(&amp;VariableHolder::name, qi::_val);\n        auto _fromFile = phoenix::bind(&amp;VariableHolder::fromFile, qi::_val);\n\n        variableName = qi::alpha &gt;&gt; +qi::alnum;\n        variable = '$' &gt;&gt; (variableName | '(' &gt;&gt; variableName &gt;&gt; ')');\n\n        start = qi::as_string [ qi::raw [ \n                variable [ _name = qi::_1 ]] \n            ] [ _fromFile = qi::_1 ];\n\n        BOOST_SPIRIT_DEBUG_NODES((start)(variable)(variableName))\n    }\n\n  private:\n    qi::rule&lt;It, std::string(), Skipper&gt; variable;\n    qi::rule&lt;It, VariableHolder(), Skipper&gt; start;\n    // lexemes\n    qi::rule&lt;It, std::string()&gt; variableName;\n};\n\nint main() {\n    using It = std::string::const_iterator;\n    P&lt;It&gt; const p;\n\n    for (std::string const input : { \n            \"$foo1\",\n            \"$(bar2)\" \n        }) \n    {\n        It f = input.begin(), l = input.end();\n        VariableHolder data;\n\n        bool ok = qi::phrase_parse(f, l, p, qi::ascii::space, data);\n\n        if (ok) {\n            std::cout &lt;&lt; \"Parse success: \" &lt;&lt; data.name &lt;&lt; \" (source: '\" &lt;&lt; data.fromFile &lt;&lt; \"')\\n\";\n        } else {\n            std::cout &lt;&lt; \"Parse failure ('\" &lt;&lt; input &lt;&lt; \"')\\n\";\n        }\n\n        if (f != l) {\n            std::cout &lt;&lt; \"Remaining unparsed input: '\" &lt;&lt; std::string(f, l) &lt;&lt; \"'\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>Parse success: foo1 (source: '$foo1')\nParse success: bar2 (source: '$(bar2)')\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 6453996, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e4931764d4efbd2b40c3f672cc640ea?s=128&d=identicon&r=PG&f=1", "display_name": "Milan Irigoyen", "link": "https://stackoverflow.com/users/6453996/milan-irigoyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 1, "accepted_answer_id": 38884727, "answer_count": 1, "score": 1, "last_activity_date": 1470868914, "creation_date": 1470842865, "question_id": 38877702, "link": "https://stackoverflow.com/questions/38877702/boostspirit-parsing-into-structure-and-reusing-parts-of-it", "title": "Boost:spirit Parsing into structure and reusing parts of it", "body": "<p>I have to find variables in a sentence and replace them by their value. Variables can be written in different forms, like $varName, or $(varName) for example.</p>\n\n<p>I'd like to have a struct VariableHolder to have easy access to both :</p>\n\n<pre><code>struct VariableHolder\n{\n    string name;    // contains \"varName\"\n    string fromFile;  // contains \"$(varName)\" or \"$varName\"\n    void setName(ustring n) { name = n; }\n}\n</code></pre>\n\n<p>Obviously, I'd like to avoid doing multiple passes and calling multiple parsers.\nWhat I have so far is this : </p>\n\n<pre><code>BOOST_FUSION_ADAPT_STRUCT(VariableHolder,\n(ustring, fromFile)\n)\n// variableName is another parser that returns a string\nqi::rule&lt;Iterator, VariableHolder()&gt; variable %=\n                (qi::char_(\"$\")\n                    &gt;&gt; (variableName[phoenix::bind(&amp;VariableHolder::setName, qi::_val, qi::_1)]\n                        | (qi::char_(\"(\")\n                            &gt;&gt; variableName[phoenix::bind(&amp;VariableHolder::setName, qi::_val, qi::_1)]\n                            &gt;&gt; qi::char_(\")\")))\n                    );\n</code></pre>\n\n<p>Which doesn't work. The name is correctly set, but the fromFile variable only contains a \"$\", and never anything else.</p>\n\n<p>So, my questions to you fine folk :</p>\n\n<ol>\n<li>My idea was to only adapt part of the structure with BOOST_FUSION_ADAPT_STRUCT, and fill the rest with semantic actions. Stupid idea, or am I just doing it wrong?</li>\n<li><p>Is there a way to bind a semantic action and still get the output? Like </p>\n\n<p>char_[doSomething] // Can this both call doSomething, and parse a char?</p></li>\n</ol>\n"}, {"tags": ["c++", "cuda"], "comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 2, "creation_date": 1470843048, "post_id": 38877670, "comment_id": 65116716, "body": "You are misinterpreting what is going on. The memory writes are not a bottleneck in this code. Removing them simply allows the compiler to optimize most of you code away"}, {"owner": {"reputation": 93, "user_id": 5899789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f15d4bbde208f87613727a3a0b536c0?s=128&d=identicon&r=PG&f=1", "display_name": "xlog", "link": "https://stackoverflow.com/users/5899789/xlog"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1470843782, "post_id": 38877670, "comment_id": 65117227, "body": "@talonmies God, you&#39;re absolutely right. So the calculations themselves are actually slow.  I&#39;ll leave this question in case anyone else makes the same mistake."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 1, "creation_date": 1470844646, "post_id": 38877670, "comment_id": 65117796, "body": "I doubt the calculations are the problem. The memory loads inside the loop will be the biggest issue. Start thinking about data re-use and cache performance"}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 2, "creation_date": 1470852407, "post_id": 38877670, "comment_id": 65122254, "body": "As talonmies says, the code is likely memory bound. However, as a side note: Performance-wise, the computation being performed in this code would benefit from the use of the <code>rnorm3d()</code> function."}], "answers": [{"tags": [], "owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "is_accepted": true, "score": 2, "last_activity_date": 1470908510, "creation_date": 1470908510, "answer_id": 38892701, "question_id": 38877670, "link": "https://stackoverflow.com/questions/38877670/cuda-is-there-a-faster-way-of-writing-to-global-memory/38892701#38892701", "title": "CUDA: is there a faster way of writing to global memory?", "body": "<p>Memory is usually a bottle-neck in this kind of computation, even if it is not taking 90% of the time as you measured. I would suggest two things.</p>\n\n<h3>Load the <code>device...[index]</code> into shared memory</h3>\n\n<p>As it stands, all threads read the same <code>deviceXpos[index]</code>, <code>deviceYpos[index]</code>, <code>deviceZpos[index]</code> and <code>deviceMasses[index]</code>. You could, instead, load them into shared memory:</p>\n\n<pre><code>static const int blockSize = ....;\n\n__shared__ float shXpos[blockSize];\n__shared__ float shYpos[blockSize];\n__shared__ float shZpos[blockSize];\n__shared__ float shMasses[blockSize];\nfor (int mainIndex=0; mainIndex&lt;particlesNumber; index+=blockSize) {\n    __syncthreads(); //ensure computation from previous iteration has completed\n    shXpos[threadIdx.x] = deviceXpos[mainIndex + threadIdx.x];\n    shYpos[threadIdx.x] = deviceYpos[mainIndex + threadIdx.x];\n    shZpos[threadIdx.x] = deviceZpos[mainIndex + threadIdx.x];\n    shMasses[threadIdx.x] = deviceMasses[mainIndex + threadIdx.x];\n    __syncthreads(); //ensure all data is read before computation starts\n    for (int index=0; index&lt;blockSize; ++index) {\n        .... //your computation, using sh....[index] values\n    }\n}\n</code></pre>\n\n<p>This should reduce the amount of global memory reads, as each thread reads different data, rather than all reading the same thing.</p>\n\n<p>Be aware however, that this suggestion may not be that effective, if the drivers correctly manage L1 caching. Try it though!</p>\n\n<h2>Handle more than 1 (receiving) particle per thread</h2>\n\n<p>You may want to perform calculation for more than one particle at a time. Instead of having just a single set of {<code>particleX/Y/Zpos</code>, <code>x/y/zForce</code>}, representing a single particle receiving the force, you could have a few of those at the same time.\nThis way, by loading your source once in the loop, you can handle several receivers.</p>\n\n<p>This may significantly reduce your memory pressure, but at the same time increase your register count. Too many registers - and you won't be able to launch that many threads.</p>\n\n<p>Check how many registers your thread already has and consult the CUDA occupancy calculator to see how many more you can use. Maybe reducing the occupancy from 1 to 0.5 or 0.75, but at the same time handling more particles will be beneficial? You will need to experiment, as this may vary from GPU to GPU.</p>\n"}], "owner": {"reputation": 93, "user_id": 5899789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f15d4bbde208f87613727a3a0b536c0?s=128&d=identicon&r=PG&f=1", "display_name": "xlog", "link": "https://stackoverflow.com/users/5899789/xlog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1284, "favorite_count": 0, "accepted_answer_id": 38892701, "answer_count": 1, "score": 2, "last_activity_date": 1470908510, "creation_date": 1470842792, "question_id": 38877670, "link": "https://stackoverflow.com/questions/38877670/cuda-is-there-a-faster-way-of-writing-to-global-memory", "title": "CUDA: is there a faster way of writing to global memory?", "body": "<p>I'm writing an n-body simulation, and basically the whole operation is:</p>\n\n<pre><code>-Prepare CUDA memory\n loop {\n    -Copy data to CUDA\n    -Launch kernel\n    -Copy data to host\n    -Operations using data (drawing etc.)\n }\n</code></pre>\n\n<p>I've noticed that almost 90% of time is spent writing data to global device memory in the kernel. Here is the kernel:</p>\n\n<pre><code> __global__ void calculateForcesCuda(float *deviceXpos, float *deviceYpos, float *deviceZpos,\n                                    float *deviceXforces, float *deviceYforces, float *deviceZforces,\n                                    float *deviceMasses, int particlesNumber) {\n     int tid = threadIdx.x + blockIdx.x * blockDim.x;\n     if (tid &lt;= particlesNumber) {\n         float particleXpos = deviceXpos[tid];\n         float particleYpos = deviceYpos[tid];\n         float particleZpos = deviceZpos[tid];\n         float xForce = 0.0f;\n         float yForce = 0.0f;\n         float zForce = 0.0f;\n         for (int index=0; index&lt;particlesNumber; index++) {\n             if (tid != index) {\n                 float otherXpos = deviceXpos[index];\n                 float otherYpos = deviceYpos[index];\n                 float otherZpos = deviceZpos[index];\n                 float mass = deviceMasses[index];\n                 float distx = particleXpos - otherXpos;\n                 float disty = particleYpos - otherYpos;\n                 float distz = particleZpos - otherZpos;\n                 float distance = sqrt((distx*distx + disty*disty + distz*distz) + 0.01f);\n                 xForce += 10.0f * mass / distance * (otherXpos - particleXpos);\n                 yForce += 10.0f * mass / distance * (otherYpos - particleYpos);\n                 zForce += 10.0f * mass / distance * (otherZpos - particleZpos);\n             }\n         }\n         deviceXforces[tid] += xForce;\n         deviceYforces[tid] += yForce;      \n         deviceZforces[tid] += zForce;\n     }\n }\n</code></pre>\n\n<p>The device running this is the GTX 970. The time it takes to execute is around 8.0 seconds, however after adding these flags: <strong><em>-gencode arch=compute_52,code=sm_52</em></strong>, the performance is increased to around 6.7 seconds. After commenting out the code that writes to global device memory: </p>\n\n<pre><code>deviceXforces[tid] += xForce;\ndeviceYforces[tid] += yForce;      \ndeviceZforces[tid] += zForce;\n</code></pre>\n\n<p>... the total execution time is reduced to around 0.92 seconds, which means that writing to global device memory takes about 86% of execution time. Is there a way I can increase the performance of these writes?</p>\n"}, {"tags": ["c++", "linux", "caching"], "comments": [{"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1470843009, "post_id": 38877584, "comment_id": 65116681, "body": "Each time you need to store a new cache, check the size of caches-folder and remove the oldest one. You can handle everything via software. The date of a cache can be stored as <i>hash table</i> or read with a system-call by OS file&#39;s properties."}, {"owner": {"reputation": 610, "user_id": 5212952, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9V6zT.jpg?s=128&g=1", "display_name": "Drgabble", "link": "https://stackoverflow.com/users/5212952/drgabble"}, "reply_to_user": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1471606840, "post_id": 38877584, "comment_id": 65425630, "body": "Well yes, I&#39;ve written my own one now, but I was looking for a ready made library. Seems like I&#39;m reinventing the wheel a bit here."}], "owner": {"reputation": 610, "user_id": 5212952, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9V6zT.jpg?s=128&g=1", "display_name": "Drgabble", "link": "https://stackoverflow.com/users/5212952/drgabble"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470842572, "creation_date": 1470842572, "question_id": 38877584, "link": "https://stackoverflow.com/questions/38877584/how-do-i-cache-files-on-disk-deleting-old-files-when-folder-size-too-large", "title": "How do I cache files on disk, deleting old files when folder size too large?", "body": "<p>I'm creating a program that converts files between formats as a service. It should cache the resultant files in case the same conversion is requested again. Hence I need to store files on disk in such a way that they the oldest one is deleted when the folder size exceeds a given amount.</p>\n\n<p>I'm looking for a C / C++ library or even a separate binary or linux function (similar to logrotate) that would do this. It seems like something that must have been done before. The program will be running on Ubuntu 16.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1470842691, "post_id": 38877440, "comment_id": 65116409, "body": "In C++03 streams were implicitly converted to <code>void*</code> to allow them to be used in contextual bool contexts, like <code>if (std::cin &gt;&gt; n)</code>. However that allowed it to be abused in non-boolean contexts. In C++11, an explicit bool conversion operator was added."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 1, "creation_date": 1470842841, "post_id": 38877440, "comment_id": 65116525, "body": "That address is the address of <code>std::cin</code>, which is the instance of a class used to represent the standard input stream <code>stdin</code>."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 18, "last_activity_date": 1470842549, "creation_date": 1470842549, "answer_id": 38877570, "question_id": 38877440, "link": "https://stackoverflow.com/questions/38877440/what-does-stdcout-stdcin-do/38877570#38877570", "title": "What does std::cout &lt;&lt; std::cin do?", "body": "<p>It looks like you are using C++98 or C++03.  In those versions <code>cin</code> could be implicitly converted to a <code>void*</code> so what you are seeing is that conversion.</p>\n\n<p>If you used C++11, which got rid of the implicit <code>void*</code> conversion and instead implemented a explicit conversion to bool this would produce a compiler error like</p>\n\n<pre><code>clang++ -std=c++11 -O2 -Wall -pedantic -pthread main.cpp &amp;&amp; ./a.out\nmain.cpp:4:15: error: invalid operands to binary expression ('ostream' (aka 'basic_ostream&lt;char&gt;') and 'istream' (aka 'basic_istream&lt;char&gt;'))\n    std::cout &lt;&lt; std::cin;\n    ~~~~~~~~~ ^  ~~~~~~~~\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:245:7: note: candidate function not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'const void *' for 1st argument; take the address of the argument with &amp;\n      operator&lt;&lt;(const void* __p)\n      ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/system_error:209:5: note: candidate function [with _CharT = char, _Traits = std::char_traits&lt;char&gt;] not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'const std::error_code' for 2nd argument\n    operator&lt;&lt;(basic_ostream&lt;_CharT, _Traits&gt;&amp; __os, const error_code&amp; __e)\n    ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:108:7: note: candidate function not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to '__ostream_type &amp;(*)(__ostream_type &amp;)' (aka 'basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;(*)(basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;)') for 1st argument\n      operator&lt;&lt;(__ostream_type&amp; (*__pf)(__ostream_type&amp;))\n      ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:117:7: note: candidate function not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to '__ios_type &amp;(*)(__ios_type &amp;)' (aka 'basic_ios&lt;char, std::char_traits&lt;char&gt; &gt; &amp;(*)(basic_ios&lt;char, std::char_traits&lt;char&gt; &gt; &amp;)') for 1st argument\n      operator&lt;&lt;(__ios_type&amp; (*__pf)(__ios_type&amp;))\n      ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:127:7: note: candidate function not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'std::ios_base &amp;(*)(std::ios_base &amp;)' for 1st argument\n      operator&lt;&lt;(ios_base&amp; (*__pf) (ios_base&amp;))\n      ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:166:7: note: candidate function not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'long' for 1st argument\n      operator&lt;&lt;(long __n)\n      ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:170:7: note: candidate function not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'unsigned long' for 1st argument\n      operator&lt;&lt;(unsigned long __n)\n      ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:174:7: note: candidate function not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'bool' for 1st argument\n      operator&lt;&lt;(bool __n)\n      ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:178:7: note: candidate function not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'short' for 1st argument\n      operator&lt;&lt;(short __n);\n      ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:181:7: note: candidate function not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'unsigned short' for 1st argument\n      operator&lt;&lt;(unsigned short __n)\n      ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:189:7: note: candidate function not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'int' for 1st argument\n      operator&lt;&lt;(int __n);\n      ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:192:7: note: candidate function not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'unsigned int' for 1st argument\n      operator&lt;&lt;(unsigned int __n)\n      ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:201:7: note: candidate function not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'long long' for 1st argument\n      operator&lt;&lt;(long long __n)\n      ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:205:7: note: candidate function not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'unsigned long long' for 1st argument\n      operator&lt;&lt;(unsigned long long __n)\n      ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:220:7: note: candidate function not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'double' for 1st argument\n      operator&lt;&lt;(double __f)\n      ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:224:7: note: candidate function not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'float' for 1st argument\n      operator&lt;&lt;(float __f)\n      ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:232:7: note: candidate function not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'long double' for 1st argument\n      operator&lt;&lt;(long double __f)\n      ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:270:7: note: candidate function not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to '__streambuf_type *' (aka 'basic_streambuf&lt;char, std::char_traits&lt;char&gt; &gt; *') for 1st argument\n      operator&lt;&lt;(__streambuf_type* __sb);\n      ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:502:5: note: candidate function [with _CharT = char, _Traits = std::char_traits&lt;char&gt;] not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'char' for 2nd argument\n    operator&lt;&lt;(basic_ostream&lt;_CharT, _Traits&gt;&amp; __out, char __c)\n    ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:508:5: note: candidate function [with _Traits = std::char_traits&lt;char&gt;] not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'char' for 2nd argument\n    operator&lt;&lt;(basic_ostream&lt;char, _Traits&gt;&amp; __out, char __c)\n    ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:514:5: note: candidate function [with _Traits = std::char_traits&lt;char&gt;] not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'signed char' for 2nd argument\n    operator&lt;&lt;(basic_ostream&lt;char, _Traits&gt;&amp; __out, signed char __c)\n    ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:519:5: note: candidate function [with _Traits = std::char_traits&lt;char&gt;] not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'unsigned char' for 2nd argument\n    operator&lt;&lt;(basic_ostream&lt;char, _Traits&gt;&amp; __out, unsigned char __c)\n    ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:556:5: note: candidate function [with _Traits = std::char_traits&lt;char&gt;] not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'const char *' for 2nd argument\n    operator&lt;&lt;(basic_ostream&lt;char, _Traits&gt;&amp; __out, const char* __s)\n    ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:569:5: note: candidate function [with _Traits = std::char_traits&lt;char&gt;] not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'const signed char *' for 2nd argument\n    operator&lt;&lt;(basic_ostream&lt;char, _Traits&gt;&amp; __out, const signed char* __s)\n    ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:574:5: note: candidate function [with _Traits = std::char_traits&lt;char&gt;] not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'const unsigned char *' for 2nd argument\n    operator&lt;&lt;(basic_ostream&lt;char, _Traits&gt;&amp; __out, const unsigned char* __s)\n    ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:628:5: note: candidate function [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, _Tp = std::basic_istream&lt;char&gt;] not viable: no known conversion from 'ostream' (aka 'basic_ostream&lt;char&gt;') to 'basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;&amp;' for 1st argument\n    operator&lt;&lt;(basic_ostream&lt;_CharT, _Traits&gt;&amp;&amp; __os, const _Tp&amp; __x)\n    ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/bits/ostream.tcc:321:5: note: candidate function [with _CharT = char, _Traits = std::char_traits&lt;char&gt;] not viable: no known conversion from 'istream' (aka 'basic_istream&lt;char&gt;') to 'const char *' for 2nd argument\n    operator&lt;&lt;(basic_ostream&lt;_CharT, _Traits&gt;&amp; __out, const char* __s)\n    ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:497:5: note: candidate template ignored: deduced conflicting types for parameter '_CharT' ('char' vs. 'std::basic_istream&lt;char&gt;')\n    operator&lt;&lt;(basic_ostream&lt;_CharT, _Traits&gt;&amp; __out, _CharT __c)\n    ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/bits/basic_string.h:5325:5: note: candidate template ignored: could not match 'basic_string' against 'basic_istream'\n    operator&lt;&lt;(basic_ostream&lt;_CharT, _Traits&gt;&amp; __os,\n    ^\n/usr/local/bin/../lib/gcc/x86_64-pc-linux-gnu/6.1.0/../../../../include/c++/6.1.0/ostream:539:5: note: candidate template ignored: could not match 'const _CharT *' against 'istream' (aka 'basic_istream&lt;char&gt;')\n    operator&lt;&lt;(basic_ostream&lt;_CharT, _Traits&gt;&amp; __out, const _CharT* __s)\n    ^\n1 error generated.\n</code></pre>\n"}], "owner": {"reputation": 257, "user_id": 6274654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f0b36df143b09356a689cef652cd628?s=128&d=identicon&r=PG&f=1", "display_name": "ratorx", "link": "https://stackoverflow.com/users/6274654/ratorx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 38877570, "answer_count": 1, "score": 17, "last_activity_date": 1470842884, "creation_date": 1470842236, "question_id": 38877440, "link": "https://stackoverflow.com/questions/38877440/what-does-stdcout-stdcin-do", "title": "What does std::cout &lt;&lt; std::cin do?", "body": "<p>I am new to C++ and was messing around with some of the things that I've learnt.\nSo I tried the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main() {\n    std::cout &lt;&lt; std::cin;\n}\n</code></pre>\n\n<p>So I expected the code to return an error, but instead got what I think is a memory address (0x6fccc408). Also, when running it multiple times, I got the same memory address, even after restarting cmd. What exactly does this memory address signify?</p>\n"}, {"tags": ["c++", "arrays", "matrix", "unicode", "qr-code"], "comments": [{"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1470853527, "post_id": 38877434, "comment_id": 65122896, "body": "Have you tried with a space and \\u2588 (maybe doubled) like <a href=\"https://ideone.com/v6i7cZ\" rel=\"nofollow noreferrer\">here</a>?"}, {"owner": {"reputation": 5832, "user_id": 1650200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x9BvZ.jpg?s=128&g=1", "display_name": "Angelos Chalaris", "link": "https://stackoverflow.com/users/1650200/angelos-chalaris"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1470855002, "post_id": 38877434, "comment_id": 65123706, "body": "@Bob__ that is actually a very good solution, could you post it as an answer so I can accept it?"}], "answers": [{"tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": true, "score": 1, "last_activity_date": 1470855492, "creation_date": 1470855492, "answer_id": 38881487, "question_id": 38877434, "link": "https://stackoverflow.com/questions/38877434/print-matrix-as-black-and-white-squares-similar-to-qr-code/38881487#38881487", "title": "Print matrix as black and white squares, similar to QR code", "body": "<p>A possible alternative is to use space character for 0 and Unicode Character 'FULL BLOCK' (U+2588) \u2588 to represent 1.</p>\n\n<pre><code>(Board[i][j] == 0) ? \"  \" : \"\\u2588\\u2588\";\n</code></pre>\n\n<p>You can see how it looks like <a href=\"https://ideone.com/v6i7cZ\" rel=\"nofollow\">here</a> where I also used a pair of each character to take into account the font aspect ratio.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8056323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wJVZx.png?s=128&g=1", "display_name": "V. Flyson", "link": "https://stackoverflow.com/users/8056323/v-flyson"}, "is_accepted": false, "score": 0, "last_activity_date": 1540177908, "creation_date": 1540177908, "answer_id": 52921945, "question_id": 38877434, "link": "https://stackoverflow.com/questions/38877434/print-matrix-as-black-and-white-squares-similar-to-qr-code/52921945#52921945", "title": "Print matrix as black and white squares, similar to QR code", "body": "<p>I used smaller block symbols than full block and whitespace in my program, please take a look here: <a href=\"https://github.com/Y2Z/qr\" rel=\"nofollow noreferrer\">https://github.com/Y2Z/qr</a></p>\n\n<p>\u2588, whitespace, \u2580, and \u2584 make the resulting QR Code to be four times more compact than when generated only by using \u2588 and whitespace.</p>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 5832, "user_id": 1650200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x9BvZ.jpg?s=128&g=1", "display_name": "Angelos Chalaris", "link": "https://stackoverflow.com/users/1650200/angelos-chalaris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "accepted_answer_id": 38881487, "answer_count": 2, "score": 1, "last_activity_date": 1540177908, "creation_date": 1470842224, "last_edit_date": 1470842897, "question_id": 38877434, "link": "https://stackoverflow.com/questions/38877434/print-matrix-as-black-and-white-squares-similar-to-qr-code", "title": "Print matrix as black and white squares, similar to QR code", "body": "<p>I am implementing a micro QR code generator in C++ and I want to print the final matrix that is generated as a set of black and white squares to look like a real QR code. My matrix is made up of integer values of <code>1</code> and <code>0</code> (there is a reason in my code for that, instead of using boolean values) and I want to print a black square for a value of <code>1</code> or a white square for a value of <code>0</code>. </p>\n\n<p>My current code (see below or test it <a href=\"http://ideone.com/WqTnNY\" rel=\"nofollow\">here</a>) uses Unicode characters <code>\\u2b1c</code> and <code>\\u2b1b</code> to achieve a result similar to what I want but it is not square enough to be scanned by a QR code scanner.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint i,j;\nint printPixels(int Board[11][11]){\n    for (i=0;i&lt;11;i++){\n        for (j=0;j&lt;11;j++)  cout &lt;&lt; ((Board[i][j] == 0) ? \"\\u2b1c\" : \"\\u2b1b\");\n        cout &lt;&lt; endl;\n    }\n    return 0;\n}\nint main() {\n    int a[11][11]={\n        {1,1,1,1,1,1,1,0,1,0,1},{1,0,0,0,0,0,1,0,1,0,1},\n        {1,0,1,1,1,0,1,0,1,1,0},{1,0,1,1,1,0,1,0,0,0,0},\n        {1,0,1,1,1,0,1,0,1,1,1},{1,0,0,0,0,0,1,0,0,0,1},\n        {1,1,1,1,1,1,1,0,1,1,1},{0,0,0,0,0,0,0,0,0,1,1},\n        {1,1,0,0,1,1,1,0,0,1,0},{0,0,1,0,1,1,0,0,0,1,0},\n        {1,1,1,1,1,0,0,1,1,1,1}\n    };\n    printPixels(a);\n}\n</code></pre>\n\n<p><strong>Limitations</strong></p>\n\n<ul>\n<li>I can only use ASCII or Unicode characters to do this and not any drawing library or package (the reason for this is complicated, but this is my specification).</li>\n<li>I need the implementation to be as platform-independent as possible and look good enough to scan if possible with a common QR code scanner.</li>\n<li>I would like it to look good on something like <a href=\"http://ideone.com\" rel=\"nofollow\">Ideone</a>, which has a white background instead of the usual black background of most terminals.</li>\n</ul>\n"}, {"tags": ["c++", "initialization", "global-variables", "variable-assignment", "variable-declaration"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470842272, "post_id": 38877371, "comment_id": 65116107, "body": "<code>g_int = 5; </code> is not initialization in main.  It is assignment."}], "answers": [{"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 1, "last_activity_date": 1470842796, "last_edit_date": 1470842796, "creation_date": 1470842315, "answer_id": 38877470, "question_id": 38877371, "link": "https://stackoverflow.com/questions/38877371/value-initializing-global-variables-at-declaration/38877470#38877470", "title": "Value-initializing global variables at declaration", "body": "<p>First of all, <code>int g_int = 5;</code> (and <code>int g_int;</code>) is not declaration, it's definition.</p>\n\n<blockquote>\n  <p>Is this legal C++?</p>\n</blockquote>\n\n<p>Yes, and <code>g_int</code> will be initialized with value <code>5</code>. (BTW: For <code>int g_int;</code> <code>g_int</code> will be initialized with value <code>0</code>.)</p>\n\n<blockquote>\n  <p>If it is legal, is assignment of a function result also legal, with the function call guaranteed to be executed before main? E.g.\n  time_t g_starttime = time();?</p>\n</blockquote>\n\n<p>Yes, it is guaranteed.</p>\n\n<p>BTW: <code>g_int = 5;</code> in <code>main()</code> is not initialization, it's just assignment. It means that if <code>g_int</code> is used before <code>main()</code> entered, the default value <code>0</code> (not <code>5</code>) will be used.</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1470842327, "creation_date": 1470842327, "answer_id": 38877482, "question_id": 38877371, "link": "https://stackoverflow.com/questions/38877371/value-initializing-global-variables-at-declaration/38877482#38877482", "title": "Value-initializing global variables at declaration", "body": "<blockquote>\n  <p>others say it must be initialized in main</p>\n</blockquote>\n\n<p>\"Others\" are wrong: although variables defined inside a translation unit certainly <em>could</em> be assigned in <code>main</code>, they don't <em>have to</em> be assigned in <code>main</code>.</p>\n\n<p>This is perfectly legal in C++. Assignment of a function result also legal, and the initialization is guaranteed to happen before entering <code>main</code>.</p>\n\n<p>Moreover, if you have multiple declarations with initialization inside the same translation unit (i.e. inside the same CPP file) they are guaranteed to be executed in textual order. If you do this</p>\n\n<pre><code>int twoTimes(int i) {\n    cout &lt;&lt; \"Doubling \" &lt;&lt; i &lt;&lt; endl;\n    return 2*i;\n}\nint a = twoTimes(7);\nint b = twoTimes(8);\nint main() {\n    ...\n}\n</code></pre>\n\n<p>the output is guaranteed to be</p>\n\n<pre><code>Doubling 7\nDoubling 8\n</code></pre>\n"}], "owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 38877482, "answer_count": 2, "score": 2, "last_activity_date": 1470842796, "creation_date": 1470842075, "question_id": 38877371, "link": "https://stackoverflow.com/questions/38877371/value-initializing-global-variables-at-declaration", "title": "Value-initializing global variables at declaration", "body": "<p>I have read some conflicting info about assigning values to global variables at declaration.</p>\n\n<p>Some seem to allow this:</p>\n\n<pre><code>int g_int = 5;\n</code></pre>\n\n<p>while others say it must be initalized in main:</p>\n\n<pre><code>int g_int;\nint main() { \n    g_int = 5; \n}\n</code></pre>\n\n<p>I personally have used the first style in Visual Studio 2008\u20132013 without any problems. </p>\n\n<ul>\n<li>Is this legal C++?</li>\n<li>If it isn't defined in C++, is it still compiler-defined behaviour in MSVC and g++?</li>\n<li>If it is legal, is assignment of a function result also legal, with the function call guaranteed to be executed before <code>main</code>? E.g. <code>time_t g_starttime = time();</code>?</li>\n</ul>\n"}, {"tags": ["c++", "reference"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1470842195, "post_id": 38877350, "comment_id": 65116065, "body": "The accepted answer states <i>The only way this can cause a problem is if the caller stores the reference, rather than copy the string, and tries to use it after the object is destroyed.</i> so unless you plan to destroy the object whats the problem?"}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1470842672, "last_edit_date": 1470842672, "creation_date": 1470842261, "answer_id": 38877452, "question_id": 38877350, "link": "https://stackoverflow.com/questions/38877350/function-returning-const-reference-called-from-another-member-function/38877452#38877452", "title": "function returning const reference called from another member function", "body": "<p>This statement</p>\n\n<pre><code>const std::vector&lt;double&gt; &amp; vec2 = Get_vec();  \n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>const std::vector&lt;double&gt; &amp; vec2 = vec;  \n</code></pre>\n\n<p>There is no any problem with using references to data members of a class inside its methods (I mean the method void some_method()\n). In any case the life time of a reference to a data member of an object inside its method is shorter than the life time of the object itself.</p>\n"}], "owner": {"reputation": 586, "user_id": 2523394, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d40798a5768de79d43dae9251fb06642?s=128&d=identicon&r=PG", "display_name": "lorniper", "link": "https://stackoverflow.com/users/2523394/lorniper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 38877452, "answer_count": 1, "score": 1, "last_activity_date": 1470842672, "creation_date": 1470842011, "last_edit_date": 1495540293, "question_id": 38877350, "link": "https://stackoverflow.com/questions/38877350/function-returning-const-reference-called-from-another-member-function", "title": "function returning const reference called from another member function", "body": "<p>I do know that returning const reference sometimes cause troubles, like the accepted answer in this <a href=\"https://stackoverflow.com/questions/134731/returning-a-const-reference-to-an-object-instead-of-a-copy\">thread</a>.\nHowever, I am not sure if the following use of const reference with object returned with implicit this pointer is always safe ?</p>\n\n<pre><code>class foo\n{\n    private:\n    std::vector&lt;double&gt; vec;\n\n    public:\n    const std::vector&lt;double&gt;&amp; Get_vec() const\n    {\n       return vec;\n    }\n\n    void some_method()\n    {\n       const std::vector&lt;double&gt; &amp; vec2 = Get_vec();  // this-&gt;Get_vec\n\n       // do something with vec2\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "python-3.x", "ubuntu-16.04"], "comments": [{"owner": {"reputation": 11210, "user_id": 725937, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/32cba7500e49d4c491289f9e101c693b?s=128&d=identicon&r=PG", "display_name": "abergmeier", "link": "https://stackoverflow.com/users/725937/abergmeier"}, "edited": false, "score": 0, "creation_date": 1470842973, "post_id": 38877185, "comment_id": 65116640, "body": "Out of desperation I tried <code>sys.stdin.detach()</code> but this does not change anything."}, {"owner": {"reputation": 11210, "user_id": 725937, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/32cba7500e49d4c491289f9e101c693b?s=128&d=identicon&r=PG", "display_name": "abergmeier", "link": "https://stackoverflow.com/users/725937/abergmeier"}, "edited": false, "score": 0, "creation_date": 1470900422, "post_id": 38877185, "comment_id": 65139791, "body": "It actually seems like it is possible and works fine. If I build a pipe with <code>echo</code> it works fine."}], "owner": {"reputation": 11210, "user_id": 725937, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/32cba7500e49d4c491289f9e101c693b?s=128&d=identicon&r=PG", "display_name": "abergmeier", "link": "https://stackoverflow.com/users/725937/abergmeier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1470842688, "creation_date": 1470841593, "last_edit_date": 1470842688, "question_id": 38877185, "link": "https://stackoverflow.com/questions/38877185/using-stdcin-from-native-module", "title": "Using std::cin from native module", "body": "<p>I have a native module and try to read from <code>std::cin</code> but never seem to get any data. Now my question is whether this is possible at all or whether python is silently consuming input into an own buffer.</p>\n"}, {"tags": ["c++", "x86", "interrupt", "32-bit", "osdev"], "comments": [{"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1470843015, "post_id": 38877152, "comment_id": 65116683, "body": "Have you enabled interrupts for the mouse via the PS2 controller configuration byte? <a href=\"http://wiki.osdev.org/%228042%22_PS/2_Controller#Interrupts\" rel=\"nofollow noreferrer\">wiki.osdev.org/%228042%22_PS/2_Controller#Interrupts</a>"}, {"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1470847957, "post_id": 38877152, "comment_id": 65119767, "body": "@MichaelPetch well i tried to do it at first but that didnt work either"}, {"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1470851600, "post_id": 38877152, "comment_id": 65121771, "body": "@MichaelPetch updated to my latest Mouse.c++ but still dosent work :/"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1470878352, "post_id": 38877152, "comment_id": 65132300, "body": "<code>p8b_irq.out(0x27,PIC_SLAVE_MASK);</code> or should that be <code>p8b_irq.out(0x28,PIC_SLAVE_MASK);</code> ? Seems the way you mapped them you have overlapped the two ranges of IRQs."}, {"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1470879270, "post_id": 38877152, "comment_id": 65132480, "body": "That dosent help @MichaelPetch ."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1470880048, "post_id": 38877152, "comment_id": 65132644, "body": "Well I&#39;m pretty sure that without the change from 0x27 to x28 you&#39;ll have the wrong interrupt handler called since IRQ7 and IRQ8 would be mapped to the same IVT entry and all interrupts above IRQ8 would map to the IVT entry one below what you expect. The only other thing I can suggest (on top of change above) is that you use your <code>mouse_read()</code> inside your mouse interrupt handler. If you don&#39;t do the read from port 0x60 in your mouse interrupt handle, then the next interrupt will not be sent."}, {"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1470880131, "post_id": 38877152, "comment_id": 65132661, "body": "you want me to do a mouse_read(0x60); Inside the handler? @MichaelPetch"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1470880180, "post_id": 38877152, "comment_id": 65132673, "body": "Just anything that reads port 0x60 in the mouse interrupt handler. You can throw away the value you get as a test. I&#39;m also assuming you have hooked Int 12 interrupt handler."}, {"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1470880286, "post_id": 38877152, "comment_id": 65132697, "body": "@MichaelPetch the mouse_read() dosent do it... hooked the int 12 interrupt handler? you mean this? <code>install_handler_irq(12, mouse_ps2_handler);</code>"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1470880396, "post_id": 38877152, "comment_id": 65132720, "body": "Well from your code I assume you do something like <code>MOUSE mouse;     mouse.install_mouse_driver();</code> which in turn does <code>install_handler_irq(12, mouse_ps2_handler);</code> . I noticed in your github code that those lines were commented out in your kernel.c++ file."}, {"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1470880601, "post_id": 38877152, "comment_id": 65132770, "body": "@MichaelPetch Oh my god you are a genius.. Ofcourse Commenting out stuff ruins my mouse.. Thanks a lot Micheal!!!!"}], "owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 494, "favorite_count": 3, "answer_count": 0, "score": 1, "last_activity_date": 1470960166, "creation_date": 1470841497, "last_edit_date": 1470960166, "question_id": 38877152, "link": "https://stackoverflow.com/questions/38877152/ps-2-mouse-not-firing", "title": "PS/2 Mouse Not Firing", "body": "<p>Everyone! I just finished writing my Keyboard Driver. Right now the problem is that my PS/2 MOUSE IRQ won't fire(IRQ 12). I tested this by this code:</p>\n\n<pre><code>    #include \"irq.h\"\n\n    #define PIC_MASTER_CONTROL 0x20\n    #define PIC_MASTER_MASK 0x21\n    #define PIC_SLAVE_CONTROL 0xa0\n    #define PIC_SLAVE_MASK 0xa1\n\n\n    typedef void(*regs_func)(struct regs *r);\n\n\n    /*Get all irq's*/\n    extern \"C\" void irq0(void);\n    extern \"C\" void irq1(void);\n    extern \"C\" void irq2(void);\n    extern \"C\" void irq3(void);\n    extern \"C\" void irq4(void);\n    extern \"C\" void irq5(void);\n    extern \"C\" void irq6(void);\n    extern \"C\" void irq7(void);\n    extern \"C\" void irq8(void);\n    extern \"C\" void irq9(void);\n    extern \"C\" void irq10(void);\n    extern \"C\" void irq11(void);\n    extern \"C\" void irq12(void);\n    extern \"C\" void irq13(void);\n    extern \"C\" void irq14(void);\n    extern \"C\" void irq15(void);\n\n\n    extern void panic(const char* exception);\n\n    regs_func irq_routines[16] = {\n        0,0,0,0,0,0,0,0\n       ,0,0,0,0,0,0,0,0\n    };\n\n    static PORT::Port8Bits p8b_irq;\n    static SerialPort sp_irq;\n\n    //Basically a declaration of IDT_ENTRY in \n    //idt.c++\n    struct idt_entry {\n        uint16_t base_lo;\n        uint16_t sel; // Kernel segment goes here.\n        uint8_t always0;\n        uint8_t flags; // Set using the table.\n        uint16_t base_hi;\n    }__attribute__((packed));\n\n    //Get the Exact IDT array from idt.c++\n    extern struct idt_entry idt[256];\n\n    static inline void idt_set_gate(uint8_t num, void(*handler)(void), uint16_t sel,\n                 uint8_t flags) \n    {\n        idt[num].base_lo = (uintptr_t)handler &gt;&gt; 0 &amp; 0xFFFF;\n        idt[num].base_hi = (uintptr_t)handler &gt;&gt; 16 &amp; 0xffff;\n        idt[num].always0 = 0;\n        idt[num].sel = sel;\n        idt[num].flags = flags;\n    }\n\n    IRQ::IRQ(){}; \n    IRQ::~IRQ(){};\n\n    /* Normally, IRQs 0 to 7 are mapped to entries 8 to 15. This\n    *  is a problem in protected mode, because IDT entry 8 is a\n    *  Double Fault! Without remapping, every time IRQ0 fires,\n    *  you get a Double Fault Exception, which is NOT actually\n    *  what's happening. We send commands to the Programmable\n    *  Interrupt Controller (PICs - also called the 8259's) in\n    *  order to make IRQ0 to 15 be remapped to IDT entries 32 to\n    *  47 */\n    void IRQ::irq_remap()\n    {\n\n            // ICW1 - begin initialization\n        p8b_irq.out(0x11,PIC_MASTER_CONTROL);\n        p8b_irq.out(0x11,PIC_SLAVE_CONTROL);\n\n        // Remap interrupts beyond 0x20 because the first 32 are cpu exceptions\n        p8b_irq.out(0x20,PIC_MASTER_MASK);\n        p8b_irq.out(0x27,PIC_SLAVE_MASK);\n\n        // ICW3 - setup cascading\n        p8b_irq.out(0x04,PIC_MASTER_MASK);\n        p8b_irq.out(0x02,PIC_SLAVE_MASK);\n\n        // ICW4 - environment info\n        p8b_irq.out(0x01,PIC_MASTER_MASK);\n        p8b_irq.out(0x01,PIC_SLAVE_MASK);\n\n        // mask interrupts\n        p8b_irq.out(0x00,PIC_MASTER_MASK);\n        p8b_irq.out(0x00,PIC_SLAVE_MASK);\n    }\n\n    void install_handler_irq(int irq, regs_func handler)\n    {\n        printf(\" \\n Installer IRQ %d \\n \", irq);\n       irq_routines[irq] = handler;\n    }\n\n    void uninstall_handler_irq(int irq)\n    {\n       irq_routines[irq] = 0;\n    } \n\n\n\n\n    /* First remap the interrupt controllers, and then we install\n    *  the appropriate ISRs to the correct entries in the IDT. This\n    *  is just like installing the exception handlers */\n\n    void IRQ::install_irqs()\n    {\n       this-&gt;irq_remap();\n        idt_set_gate(32, irq0, 0x08, 0x8E);\n        idt_set_gate(33, irq1, 0x08, 0x8E);\n        idt_set_gate(34, irq2, 0x08, 0x8E);\n        idt_set_gate(35, irq3, 0x08, 0x8E);\n        idt_set_gate(36, irq4, 0x08, 0x8E);\n        idt_set_gate(37, irq5, 0x08, 0x8E);\n        idt_set_gate(38, irq6, 0x08, 0x8E);\n        idt_set_gate(39, irq7, 0x08, 0x8E);\n        idt_set_gate(40, irq8, 0x08, 0x8E);\n        idt_set_gate(41, irq9, 0x08, 0x8E);\n        idt_set_gate(42, irq10, 0x08, 0x8E);\n        idt_set_gate(43, irq11, 0x08, 0x8E);\n        idt_set_gate(44, irq12, 0x08, 0x8E);\n        idt_set_gate(45, irq13, 0x08, 0x8E);\n        idt_set_gate(46, irq14, 0x08, 0x8E);    \n        idt_set_gate(47, irq15, 0x08, 0x8E);\n    }\n\n    /* Each of the IRQ ISRs point to this function, rather than\n    *  the 'fault_handler' in 'isrs.c'. The IRQ Controllers need\n    *  to be told when you are done servicing them, so you need\n    *  to send them an \"End of Interrupt\" command (0x20). There\n    *  are two 8259 chips: The first exists at 0x20, the second\n    *  exists at 0xA0. If the second controller (an IRQ from 8 to\n    *  15) gets an interrupt, you need to acknowledge the\n    *  interrupt at BOTH controllers, otherwise, you only send\n    *  an EOI command to the first controller. If you don't send\n    *  an EOI, you won't raise any more IRQs */\n    extern \"C\" void irq_handler(struct regs *r)\n    {\n         /* This is a blank function pointer */\n        regs_func handler;\n\n        /* Find out if we have a custom handler to run for this\n        *  IRQ, and then finally, run it */\n        handler = irq_routines[r-&gt;int_no];\n        if (handler)\n        {\n\n\n    handler(r);\n    }\n\n    /* If the IDT entry that was invoked was greater than 40\n\n\n *  (meaning IRQ8 - 15), then we need to send an EOI to\n    *  the slave controller */\n    if (r-&gt;int_no &gt;= 8)\n    {\n        p8b_irq.out(0x20,0xA0);\n    }\n\n    /* In either case, we need to send an EOI to the master\n    *  interrupt controller too */\n    p8b_irq.out(0x20, 0x20);\n}\n</code></pre>\n\n<p>as you can see at the bottom, where my irq_handler is, for each irq i tell it to print the irq_number. Well i have set up my PIT So i get a 0 every second, and then since i set up my keyboard i get a 1 every time i press a key. a 4 at beggining because i enable COM1. BUT , when i move my mouse , i dont get a 12 For some reason... My Mouse Driver is just as follows:</p>\n\n<p>mouse.c++:</p>\n\n<pre><code>#include \"mouse.h\"\n\n\ntypedef void(*regs_func)(struct regs *r);\n\nextern void install_handler_irq(int irq, regs_func handler);\n\nstatic PORT::Port8Bits p8b_mouse_drv;\n\n\nvoid mouse_ps2_handler(struct regs *r)\n{\n  printf(\"IRQ 12 \\n \");\n}\nvoid mouse_wait(unsigned char type)\n{\n  unsigned int _time_out=100000;\n  if(type==0)\n  {\n    while(_time_out--) //Data\n    {\n      if((p8b_mouse_drv.in(0x64) &amp; 1)==1)\n      {\n        return;\n      }\n    }\n    return;\n  }\n  else\n  {\n    while(_time_out--) //Signal\n    {\n      if((p8b_mouse_drv.in(0x64) &amp; 2)==0)\n      {\n        return;\n      }\n    }\n    return;\n  }\n}\n\nunsigned char mouse_read()\n{\n//Get response from mouse\nmouse_wait(0);\nreturn p8b_mouse_drv.in(0x60);\n}\n\n\nvoid mouse_write(unsigned char a_write)\n{\n//Wait to be able to send a command\nmouse_wait(1);\n//Tell the mouse we are sending a command\np8b_mouse_drv.out(0xD4,0x64);\n//Wait for the final part\nmouse_wait(1);\n//Finally write\np8b_mouse_drv.out(a_write,0x60);\n}\n\nvoid MOUSE::install_mouse_driver()\n{\n   mouse_wait(1);\n   p8b_mouse_drv.out(0xA8,0x64);\n\n   mouse_wait(1);\n    p8b_mouse_drv.out(0x20,0x64);\n\n    unsigned char status_byte;\n    mouse_wait(0);\n    status_byte = (p8b_mouse_drv.in(0x60) | 2);\n\n\n    mouse_wait(1);\n    p8b_mouse_drv.out(0x60,0x64);\n\n\n    mouse_wait(1);\n    p8b_mouse_drv.out(status_byte,0x60);\n\n\n    mouse_write(0xF6);\n    mouse_read();\n\n    mouse_write(0xF4);\n    mouse_read();\n\n    install_handler_irq(12, mouse_ps2_handler);\n}\n</code></pre>\n\n<p>kernel.c++:</p>\n\n<pre><code>#include \"types.h\"\n#include \"gdt.h\"\n#include \"stdio.h\"\n#include \"serial.h\"\n#include \"mem.h\"\n#include \"idt.h\"\n#include \"timer.h\"\n#include \"isr.h\"\n#include \"kbd.h\"\n#include \"mouse.h\"\n#include \"irq.h\"\n\n\n\n\n//Call all class constructor\n//for global objects before\n//calling the kernel\ntypedef void (*constructor)();\nextern \"C\" constructor start_ctors;\nextern \"C\" constructor end_ctors;\nextern \"C\" void callConstructors()\n{\n    for(constructor* i = &amp;start_ctors; i != &amp;end_ctors; i++)\n        (*i)();\n}\n\n\n\nextern \"C\" void kernelMain(void* multiboot_structure,uint32_t magicnumber)\n{\n   cls();\n   gdt gt;\n   IDT idt;\n   ISR isr;\n   IRQ irq;\n   SerialPort sp;\n   isr.install_isrs();\n   irq.install_irqs();\n    Timer timer;\n    timer.install_timer();  \n    KBD kbd;\n    kbd.install_kbd_driver();\n\n    MOUSE mouse;\n    mouse.install_mouse_driver();\n    __asm__ __volatile__ (\"sti\");\n\n//  int x = 5/0;\n   while(1);    \n   err:\n       while(1);\n}\n</code></pre>\n\n<p>If you want to see my whole project you can go to learning repo: <a href=\"https://github.com/amanuel2/OS_Mirror\" rel=\"nofollow\">https://github.com/amanuel2/OS_Mirror</a> . I want the IRQ12 to fire so i can start working on my mouse driver. Help would be appreciated.</p>\n"}, {"tags": ["c++", "dictionary", "syntax", "iterator", "std"], "comments": [{"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 2, "creation_date": 1470841576, "post_id": 38877126, "comment_id": 65115624, "body": "Try <code>typename map&lt;rngT, lookupTable&lt;T&gt;*&gt;::iterator</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1470842626, "post_id": 38877126, "comment_id": 65116365, "body": "I was wrong, but <code>template class lookupTable&lt;double&gt;;</code> before fully defining <code>lookupTable</code> will bite you. Off topic: the default cases in the switches return nothing. Good for a compiler warning and a bit of nastier debugging if an invalid or new  <code>opt</code> ever sneaks in."}], "answers": [{"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 4, "last_activity_date": 1565800214, "last_edit_date": 1565800214, "creation_date": 1470844466, "answer_id": 38878261, "question_id": 38877126, "link": "https://stackoverflow.com/questions/38877126/syntax-error-for-identifier-iterator/38878261#38878261", "title": "Syntax error for identifier &#39;iterator&#39;", "body": "<p>Because the compiler doesn't yet know the type of <code>std::map&lt;S, table&lt;T&gt;*&gt;</code>, it can't yet know that <code>std::map&lt;S, table&lt;T&gt;*&gt;::iterator</code> is a type (it could be a member).  You need to tell it that it will be a type, using the <code>typename</code> keyword:</p>\n\n<pre><code>template &lt;typename S, typename T&gt;\nvoid f(S s, typename std::map&lt;S, table&lt;T&gt;*&gt;::iterator it);\n//          ^^^^^^^^\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6004805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc33bb5fd1f94dde00c5e04193cf25a6?s=128&d=identicon&r=PG&f=1", "display_name": "GodLovesUGaius", "link": "https://stackoverflow.com/users/6004805/godlovesugaius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2487, "favorite_count": 1, "accepted_answer_id": 38878261, "answer_count": 1, "score": -3, "last_activity_date": 1565800214, "creation_date": 1470841455, "last_edit_date": 1470844348, "question_id": 38877126, "link": "https://stackoverflow.com/questions/38877126/syntax-error-for-identifier-iterator", "title": "Syntax error for identifier &#39;iterator&#39;", "body": "<p>The following code throws two compiler errors in VS 2013:</p>\n\n<ol>\n<li>The template function definition throws\n\n<blockquote>\n  <p>error C2061: syntax error : identifier '<code>iterator</code>'</p>\n</blockquote></li>\n<li>The specialization of that template function throws\n\n<blockquote>\n  <p>error C2912: explicit specialization '<code>double getFillIn&lt;double,double&gt;(fillInOptions,double,std::_Tree_iterator&lt;std::_Tree_val&lt;std::_Tree_simple_types&lt;std::pair&lt;const _Kty,_Ty&gt;&gt;&gt;&gt;,inputLoader *,va_list)</code>' is not a specialization of a function template</p>\n</blockquote></li>\n</ol>\n\n<p>Can anyone please explain why? I'm fairly certain the second error is just a consequence of the first, but I don't understand why it can't figure out that <code>iterator</code> identifier.</p>\n\n<pre><code>#include &lt;map&gt;\n\ntemplate &lt;typename T&gt; class table {\n};\n\ntemplate &lt;typename S, typename T&gt;\nvoid f(S s, std::map&lt;S, table&lt;T&gt;*&gt;::iterator it);\n</code></pre>\n"}, {"tags": ["c++", "unix"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 2, "creation_date": 1470843521, "post_id": 38877072, "comment_id": 65117047, "body": "Are you aware that the <code>tail</code> program already exists with this exact behavior?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1470846977, "post_id": 38877072, "comment_id": 65119222, "body": "The expected output as posted is <b>not</b> the las 10 records?"}, {"owner": {"reputation": 81, "user_id": 1885183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd666c78b96ec37b3aae0af3c0ab2ac?s=128&d=identicon&r=PG", "display_name": "user1885183", "link": "https://stackoverflow.com/users/1885183/user1885183"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1471001127, "post_id": 38877072, "comment_id": 65190576, "body": "Thanks everyone!! @BenVoigt I agree but I need to do it using a c++ program"}, {"owner": {"reputation": 81, "user_id": 1885183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd666c78b96ec37b3aae0af3c0ab2ac?s=128&d=identicon&r=PG", "display_name": "user1885183", "link": "https://stackoverflow.com/users/1885183/user1885183"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1471001972, "post_id": 38877072, "comment_id": 65191074, "body": "@chqrlie Sorry, I copied the 10 lines randomly from the file"}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1470841524, "post_id": 38877141, "comment_id": 65115587, "body": "Out of curiosity, why do you need to store the lines in memory?  Will there be enough memory to store the lines?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1470841720, "post_id": 38877141, "comment_id": 65115724, "body": "@ThomasMatthews:  Storing the lines in memory is the simplest method.  It works even if the input file is a device or a pipe: seeking into the input would not be possible for those.  Modern computers have enough RAM for most reasonable values of <code>n</code> and types of input files."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1470842616, "post_id": 38877141, "comment_id": 65116355, "body": "A better technique would be to use <code>std::string</code> since it allocates dynamically.  You could use <code>std::getline</code> with <code>std::ifstream</code>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1470842744, "post_id": 38877141, "comment_id": 65116448, "body": "For a C++ implementation, I would definitely encourage the use of <code>std::getline</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1470843289, "post_id": 38877141, "comment_id": 65116887, "body": "FYI, the OP has tagged this as C++."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1470845731, "post_id": 38877141, "comment_id": 65118477, "body": "@ThomasMatthews:  He originally tagged the question as both C and C++, and he mixes both languages..."}, {"owner": {"reputation": 81, "user_id": 1885183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd666c78b96ec37b3aae0af3c0ab2ac?s=128&d=identicon&r=PG", "display_name": "user1885183", "link": "https://stackoverflow.com/users/1885183/user1885183"}, "edited": false, "score": 0, "creation_date": 1471001993, "post_id": 38877141, "comment_id": 65191092, "body": "Thanks for your answer @chqrlie"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 81, "user_id": 1885183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd666c78b96ec37b3aae0af3c0ab2ac?s=128&d=identicon&r=PG", "display_name": "user1885183", "link": "https://stackoverflow.com/users/1885183/user1885183"}, "edited": false, "score": 0, "creation_date": 1471541974, "post_id": 38877141, "comment_id": 65399529, "body": "@user1885183: you can accept this answer by clicking on the grey checkmark below the answer score."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 3, "last_activity_date": 1470842470, "last_edit_date": 1470842470, "creation_date": 1470841472, "answer_id": 38877141, "question_id": 38877072, "link": "https://stackoverflow.com/questions/38877072/writing-last-n-lines-from-one-file-to-another/38877141#38877141", "title": "Writing last n lines from one file to another", "body": "<p>To only write the last <code>n</code> lines, you could allocate an array of <code>n</code> strings and store the lines into it as you read them, only keeping the last <code>n</code> when the array fills up, using modular index to avoid unnecessary copying.</p>\n\n<p>When you reach the end of file, output the lines from the array.</p>\n\n<p>Also avoid mixing C and C++.  Either use <code>&lt;stdio.h&gt;</code> or <code>&lt;iostream&gt;</code>, but using both at the same time is error prone and inelegant.</p>\n\n<p>Here is a simple implementation in C:</p>\n\n<pre><code>#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define N 100\n\nint main(void) {\n    char line[1024];\n    char *stash[N] = { NULL };\n    int i, j;\n    FILE *HrData, *fout;\n\n    if ((fout = fopen(\"24HrDiskData.dat\", \"a\")) == NULL) {\n        fprintf(stderr, \"cannot open 24HrDiskData.dat for appending: %s\\n\",\n                strerror(errno));\n        return 1;\n    }\n    if ((HrData = fopen(\"/home/xvishuk/diskData.dat\", \"r\")) == NULL) {\n        fprintf(stderr, \"cannot open input file: %s\\n\",\n                strerror(errno));\n        return 1;\n    }\n    for (i = 0; fgets(line, 1024, HrData) != NULL;) {\n        free(stash[i]);\n        stash[i] = strdup(line);\n        i = (i + 1) % N;\n    }\n    fclose(HrData);\n    for (j = i;;) {\n        if (stash[i])\n            fputs(stash[i], fout);\n        i = (i + 1) % N;\n        if (i == j)\n            break;\n    }\n    fclose(fout);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470841662, "post_id": 38877142, "comment_id": 65115692, "body": "Why use two passes?  Why not do it all in one pass since you have to read the file line by line anyways."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1470842475, "post_id": 38877142, "comment_id": 65116251, "body": "One, you don&#39;t know how many lines are in the file. Secondly, there may not be enough memory to contain the entire file."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1470842675, "post_id": 38877142, "comment_id": 65116397, "body": "This would not work if the input file is a pipe or a device, or if the input file is modified while seeking back, as is most likely the case of log files such as the one the OP is reading."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1470842706, "post_id": 38877142, "comment_id": 65116419, "body": "Why do you need memory?  Read in the file line by line and discard them until you find the first line that is within the 24 hour range.  Then copy each line until the end of file into the new file.  The requires only one string worth of data in memory and a single pass."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470843895, "post_id": 38877142, "comment_id": 65117306, "body": "@NathanOliver:  I added an example that maintains the last N text lines of the file."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1470844289, "post_id": 38877142, "comment_id": 65117575, "body": "I don&#39;t think either of these will work.  The OP wants all lines from the last 24 hours.  That means the time stamp in each line needs to be read and compared until you find the start of 24 hours back.  I still maintain that my approach in my previous comment is the easiest way to do that."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1470845599, "post_id": 38877142, "comment_id": 65118383, "body": "My bad, I was understanding that the OP wanted the last N lines, unconditionally."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470845867, "post_id": 38877142, "comment_id": 65118560, "body": "@NathanOliver: where do you get this information? <i>I wish to copy last n lines from diskData.dat to 24HrDiskData.dat</i> seems unambiguous to me."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1470846404, "post_id": 38877142, "comment_id": 65118901, "body": "@chqrlie The file name is <i>24HrDiskData</i>.  using that and his example it looks like he wants to store just the last records that are within 24 hours. from the end."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470846922, "post_id": 38877142, "comment_id": 65119195, "body": "@NathanOliver: that&#39;s a wild guess! evidence does not support it: the 12th line from the end has a stamp of <code>Sat Mar 26 22:31:38</code>, probably less than 24 hours from the reference date as well. For what it is worth, the posted output is not even the last 10 lines: the very last line is missing."}, {"owner": {"reputation": 81, "user_id": 1885183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd666c78b96ec37b3aae0af3c0ab2ac?s=128&d=identicon&r=PG", "display_name": "user1885183", "link": "https://stackoverflow.com/users/1885183/user1885183"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1471001866, "post_id": 38877142, "comment_id": 65191021, "body": "@NathanOliver you are correct I wanted to store the records of last 24 hrs in the file."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1471005102, "post_id": 38877142, "comment_id": 65192950, "body": "@NathanOliver: so you guessed right... I answered the question stated in the post, you can post an answer for the OPs ultimate goal."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1470843837, "last_edit_date": 1470843837, "creation_date": 1470841479, "answer_id": 38877142, "question_id": 38877072, "link": "https://stackoverflow.com/questions/38877072/writing-last-n-lines-from-one-file-to-another/38877142#38877142", "title": "Writing last n lines from one file to another", "body": "<p>Two passes.  </p>\n\n<p>First pass, count the lines and store their file positions.</p>\n\n<p>Second pass, calculate the line number you want to start copying from.  Look up its file position in the container.  Seek to the file position. Start copying.</p>\n\n<p><strong>Edit 1: Example code</strong>  </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nint main(void)\n{\n  std::string text_line;\n  std::vector&lt;std::streampos&gt; file_positions;\n  std::ifstream input_file(\"my_file.txt\");\n  file_positions.push_back(input_file.tellg());\n  while (std::getline(input_file, text_line))\n  {\n      file_positions.push_back(input_file.tellg());\n  }\n  // The total lines is file_positions.size().\n  // Return the last 13 lines\n  const unsigned int total_lines = file_positions.size();\n  std::streampos seek_position = 0;\n  unsigned int index = 0U;\n  if (total_lines &gt; 13U)\n  {\n      index = total_lines - 13U;\n  }\n  input_file.clear();\n  input_file.seekg(file_positions[index]);\n  // Copy text lines to output file...\n  return 0;\n} \n</code></pre>\n\n<p><strong>Edit 2 - More efficient method</strong><br>\nYou could maintain a container of <em>N</em> text lines as you read through the file.  </p>\n\n<pre><code>#include &lt;deque&gt;\n//...\nint main(void)\n{\n  std::deque&lt;std::string&gt; text_lines(N);\n  while (std::getline(input_file, text_line))\n  {\n     if (text_lines.size() == N)\n     {\n        text_lines.pop_front();\n     }\n     text_lines.push_back(text_line);\n  }\n  // Now copy the text lines from the `std::deque` to the output file.\n  //...\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 1885183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd666c78b96ec37b3aae0af3c0ab2ac?s=128&d=identicon&r=PG", "display_name": "user1885183", "link": "https://stackoverflow.com/users/1885183/user1885183"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1470843837, "creation_date": 1470841304, "last_edit_date": 1470841569, "question_id": 38877072, "link": "https://stackoverflow.com/questions/38877072/writing-last-n-lines-from-one-file-to-another", "title": "Writing last n lines from one file to another", "body": "<p>This is the program I have written which copies all the lines from <code>diskData.dat</code> file to <code>24HrDiskData.dat</code> file. As of now I am copying all the lines from one file to another I wish to copy last <strong>n</strong> lines from <code>diskData.dat</code> to <code>24HrDiskData.dat</code> </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;fstream&gt;\n#include &lt;stdlib.h&gt;\n\nusing namespace std;\n\nint main(int argc, char *argv[]) {\n    FILE *HrData;\n    char tempData[1024];\n    int flag = 0;\n    ofstream fout;\n\n    fout.open(\"24HrDiskData.dat\", ios::app);    // open file for appending\n    assert (!fout.fail());\n\n    if ((HrData = fopen(\"/home/xvishuk/diskData.dat\", \"r\")) == NULL) {\n        printf(\"\\nFile cannot be opened\");\n    }\n    while (fgets(tempData, 1024, HrData) != NULL) {\n        fout &lt;&lt; tempData; // write the data to the file\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Sample pattern of Delimited data</strong></p>\n\n<pre><code>|Sat Mar 26 18:47:57 2016|1|1|182|60.66|3|30|4782|31|68|4|3467750|110|43.1562|64|\n|Sat Mar 26 19:01:49 2016|1|1|140|46.26|3.03|30|4782|30|68|4|3467764|96|43.1562|64|\n|Sat Mar 26 19:15:40 2016|1|1|184|61.07|3.01|30|4782|30|68|4|3467777|112|43.1562|64|\n|Sat Mar 26 19:29:30 2016|1|1|180|59.91|3|30|4782|32|68|4|3467791|98|43.1562|64|\n|Sat Mar 26 19:43:20 2016|1|1|194|64.61|3|30|4782|32|68|4|3467805|114|43.1562|64|\n|Sat Mar 26 19:57:17 2016|1|1|170|56.62|3|30|4782|30|68|4|3467818|102|43.1562|64|\n|Sat Mar 26 20:11:14 2016|1|1|140|46.32|3.02|30|4782|30|68|4|3467832|118|43.1562|64|\n|Sat Mar 26 20:25:12 2016|1|1|176|58.35|3.02|30|4782|30|68|4|3467846|104|43.1562|64|\n|Sat Mar 26 20:39:10 2016|1|1|202|66.9|3.02|30|4782|30|68|4|3467859|120|43.1562|64|\n|Sat Mar 26 20:53:11 2016|1|1|198|65.85|3.01|30|4782|31|68|4|3467873|106|43.1562|64|\n|Sat Mar 26 21:07:12 2016|1|1|184|60.97|3.02|30|4782|32|68|4|3467887|92|43.1562|64|\n|Sat Mar 26 21:21:11 2016|1|1|152|50.28|3.02|30|4782|31|68|4|3467901|108|43.1562|64|\n|Sat Mar 26 21:35:16 2016|1|1|168|55.77|3.01|30|4782|30|68|4|3467915|94|43.1562|64|\n|Sat Mar 26 21:49:20 2016|1|1|172|57.03|3.02|30|4782|31|68|4|3467928|112|43.1562|64|\n|Sat Mar 26 22:03:26 2016|1|1|152|50.56|3.01|30|4782|33|68|4|3467942|98|43.1562|64|\n|Sat Mar 26 22:17:32 2016|1|1|174|57.86|3.01|30|4782|31|68|4|3467956|114|43.1562|64|\n|Sat Mar 26 22:31:38 2016|1|1|156|51.86|3.01|30|4782|30|68|4|3467970|100|43.1562|64|\n|Sat Mar 26 22:45:44 2016|1|1|202|66.57|3.03|30|4782|30|68|4|3467984|116|43.1562|64|\n|Sat Mar 26 22:59:55 2016|1|1|188|62.4|3.01|30|4782|31|68|4|3467998|102|43.1562|64|\n|Sat Mar 26 23:14:06 2016|1|1|164|53.95|3.04|30|4782|32|68|4|3468012|118|43.1562|64|\n|Sat Mar 26 23:28:17 2016|1|1|168|55.78|3.01|30|4782|31|68|4|3468026|104|43.1562|64|\n|Sat Mar 26 23:42:28 2016|1|1|176|58.33|3.02|30|4782|30|68|4|3468040|120|43.1562|64|\n|Sat Mar 26 23:56:39 2016|1|1|170|55.76|3.05|30|4782|30|68|4|3468053|106|43.1562|64|\n|Sun Mar 27 00:10:54 2016|1|1|172|56.97|3.02|30|4782|31|68|4|3468067|92|43.1562|64|\n|Sun Mar 27 00:25:13 2016|1|1|184|61.23|3.01|30|4782|33|68|4|3468081|108|43.1562|64|\n|Sun Mar 27 00:39:26 2016|1|1|188|62.12|3.03|30|4782|31|68|4|3468096|94|43.1562|64|\n|Sun Mar 27 00:53:42 2016|1|1|170|56.42|3.01|30|4782|30|68|4|3468110|110|43.1562|64|\n|Sun Mar 27 01:07:58 2016|1|1|174|57.8|3.01|30|4782|31|68|4|3468124|96|43.1562|64|\n</code></pre>\n\n<p><strong>Expected Output</strong> </p>\n\n<p>The last 10 records.</p>\n\n<pre><code>|Sat Mar 26 22:45:44 2016|1|1|202|66.57|3.03|30|4782|30|68|4|3467984|116|43.1562|64|\n|Sat Mar 26 22:59:55 2016|1|1|188|62.4|3.01|30|4782|31|68|4|3467998|102|43.1562|64|\n|Sat Mar 26 23:14:06 2016|1|1|164|53.95|3.04|30|4782|32|68|4|3468012|118|43.1562|64|\n|Sat Mar 26 23:28:17 2016|1|1|168|55.78|3.01|30|4782|31|68|4|3468026|104|43.1562|64|\n|Sat Mar 26 23:42:28 2016|1|1|176|58.33|3.02|30|4782|30|68|4|3468040|120|43.1562|64|\n|Sat Mar 26 23:56:39 2016|1|1|170|55.76|3.05|30|4782|30|68|4|3468053|106|43.1562|64|\n|Sun Mar 27 00:10:54 2016|1|1|172|56.97|3.02|30|4782|31|68|4|3468067|92|43.1562|64|\n|Sun Mar 27 00:25:13 2016|1|1|184|61.23|3.01|30|4782|33|68|4|3468081|108|43.1562|64|\n|Sun Mar 27 00:39:26 2016|1|1|188|62.12|3.03|30|4782|31|68|4|3468096|94|43.1562|64|\n|Sun Mar 27 00:53:42 2016|1|1|170|56.42|3.01|30|4782|30|68|4|3468110|110|43.1562|64|\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "mfc"], "comments": [{"owner": {"reputation": 2297, "user_id": 6630084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e0d817b4f28ee3d219b87ceefcda2ed?s=128&d=identicon&r=PG&f=1", "display_name": "Jackdaw", "link": "https://stackoverflow.com/users/6630084/jackdaw"}, "edited": false, "score": 1, "creation_date": 1470852485, "post_id": 38876966, "comment_id": 65122306, "body": "Check value returned by the <i>GetNumberFormat()</i> function. If it is 0 call <i>GetLastError()</i> to get extended error information."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 1, "creation_date": 1470852863, "post_id": 38876966, "comment_id": 65122516, "body": "The code you have posted is incomplete. It won&#39;t work at all. It is ANSI code so it may not work for some non-English languages."}, {"owner": {"reputation": 2297, "user_id": 6630084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e0d817b4f28ee3d219b87ceefcda2ed?s=128&d=identicon&r=PG&f=1", "display_name": "Jackdaw", "link": "https://stackoverflow.com/users/6630084/jackdaw"}, "edited": false, "score": 1, "creation_date": 1470859923, "post_id": 38876966, "comment_id": 65126354, "body": "Actually to make this code working properly for different languages it is necessary to turn on the multi language support by setting <i>Character Set</i> parameter in the project configuration properties to <b>Use Unicode Character Set</b>. As well as change code to use <code>TCHAR</code> type instead of <code>char</code>."}], "owner": {"reputation": 1, "user_id": 6700966, "user_type": "registered", "profile_image": "https://graph.facebook.com/1166111540122735/picture?type=large", "display_name": "Piyush Baral", "link": "https://stackoverflow.com/users/6700966/piyush-baral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470858035, "creation_date": 1470841021, "last_edit_date": 1470858035, "question_id": 38876966, "link": "https://stackoverflow.com/questions/38876966/getnumberformat-returning-junk-value-for-non-english-domain", "title": "GetNumberFormat returning junk value for Non-English Domain", "body": "<p>I am using the <code>GetNumberFormat</code> function to get the formatted number but its returning the junk value for the Non-English locale.</p>\n\n<p>Its working fine for English locale.</p>\n\n<p>Code:</p>\n\n<pre><code>int FormatNumber(double number, long nbrDecs, char* destBuf, int bufSize)\n{\nchar        infoBuf[3];\nchar        decimalSep[10];\nchar        thousandSep[10];\nchar        sourceNbr[50];\nNUMBERFMT*  customFormat = NULL;\nUINT        defDigits;\nLCID        lcid;\nint         status;\n\nlcid = GetUserDefaultLCID();\n\nstatus = GetLocaleInfo(lcid, LOCALE_IDIGITS, infoBuf, 3);\nif (status == 0){\n    return status;\n}\n\ndefDigits =  atoi(infoBuf);\nif (defDigits != (UINT) nbrDecs){\n    customFormat = new NUMBERFMT;\n\n    customFormat-&gt;NumDigits = nbrDecs;\n\n    status = GetLocaleInfo(lcid, LOCALE_ILZERO, infoBuf, 3);\n    customFormat-&gt;LeadingZero = atoi(infoBuf);\n\n    status = GetLocaleInfo(lcid, LOCALE_SGROUPING, infoBuf, 3);\n    customFormat-&gt;Grouping = atoi(infoBuf);\n\n    status = GetLocaleInfo(lcid, LOCALE_STHOUSAND, thousandSep, 10);\n    customFormat-&gt;lpThousandSep = thousandSep;\n\n    status = GetLocaleInfo(lcid, LOCALE_SDECIMAL, decimalSep, 10);\n    customFormat-&gt;lpDecimalSep = decimalSep;\n\n    status = GetLocaleInfo(lcid, LOCALE_INEGNUMBER, infoBuf, 3);\n    customFormat-&gt;NegativeOrder = atoi(infoBu`enter code here`f);\n}\n\nsprintf_s(sourceNbr, sizeof(sourceNbr),\"%f\", number)\nstatus = GetNumberFormat(lcid, 0, sourceNbr, customFormat, destBuf,     bufSize);\n// here destBuf is having the junk value. \n\nif (customFormat != NULL)\n    delete customFormat;\n\nreturn status; \n}\n</code></pre>\n\n<p>I am getting junk value. Here <code>destBuf</code> is returning the junk value.</p>\n"}, {"tags": ["c++", "sony"], "comments": [{"owner": {"reputation": 2265, "user_id": 982840, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3dc7514c4091ec4326643eda54aa7b8a?s=128&d=identicon&r=PG&f=1", "display_name": "mldeveloper", "link": "https://stackoverflow.com/users/982840/mldeveloper"}, "edited": false, "score": 0, "creation_date": 1471280853, "post_id": 38876742, "comment_id": 65273588, "body": "What do the timestamps of the pictures read if you connect to the Playmemories Mobile App first to set the date before taking pictures?  Is the date correct or does it still read Jan 1st 2014?  We tried reproducing the issue but the API works correctly."}, {"owner": {"reputation": 11, "user_id": 6556924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28acde6fda6ca07bfe5dd668b76ebe59?s=128&d=identicon&r=PG&f=1", "display_name": "Krijnen", "link": "https://stackoverflow.com/users/6556924/krijnen"}, "reply_to_user": {"reputation": 2265, "user_id": 982840, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3dc7514c4091ec4326643eda54aa7b8a?s=128&d=identicon&r=PG&f=1", "display_name": "mldeveloper", "link": "https://stackoverflow.com/users/982840/mldeveloper"}, "edited": false, "score": 0, "creation_date": 1471336844, "post_id": 38876742, "comment_id": 65294273, "body": "When connected to the Mobile App first the pictures do show the correct date and time, so it doesn&#39;t seem to be a camera issue. Can you confirm that the json request I send is in fact correct?"}, {"owner": {"reputation": 2265, "user_id": 982840, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3dc7514c4091ec4326643eda54aa7b8a?s=128&d=identicon&r=PG&f=1", "display_name": "mldeveloper", "link": "https://stackoverflow.com/users/982840/mldeveloper"}, "edited": false, "score": 0, "creation_date": 1471468762, "post_id": 38876742, "comment_id": 65364540, "body": "The JSON request appears to be correct.  I&#39;m confused as to why the camera is not retaining the date and time after connecting to the mobile app.  Once you set the date and time the camera is supposed to retain that info unless you remove the battery.  Are you removing the battery somehow?  After connecting to the mobile app when does the date and time become incorrect?"}, {"owner": {"reputation": 11, "user_id": 6556924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28acde6fda6ca07bfe5dd668b76ebe59?s=128&d=identicon&r=PG&f=1", "display_name": "Krijnen", "link": "https://stackoverflow.com/users/6556924/krijnen"}, "reply_to_user": {"reputation": 2265, "user_id": 982840, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3dc7514c4091ec4326643eda54aa7b8a?s=128&d=identicon&r=PG&f=1", "display_name": "mldeveloper", "link": "https://stackoverflow.com/users/982840/mldeveloper"}, "edited": false, "score": 0, "creation_date": 1471510933, "post_id": 38876742, "comment_id": 65378700, "body": "I&#39;m sorry, I might have been unclear. The camera does indeed retain the correct date and time after connecting to the app. And indeed only when removing the battery the date is reset. I just want our custom api to be able to reset the date and time, so it&#39;s one less thing to worry about when recharging etc. Should the camera be in any specific mode to set the date?"}, {"owner": {"reputation": 2265, "user_id": 982840, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3dc7514c4091ec4326643eda54aa7b8a?s=128&d=identicon&r=PG&f=1", "display_name": "mldeveloper", "link": "https://stackoverflow.com/users/982840/mldeveloper"}, "edited": false, "score": 0, "creation_date": 1471628019, "post_id": 38876742, "comment_id": 65439123, "body": "Thanks for the clarification.  It makes more sense now.  The mode should not matter."}, {"owner": {"reputation": 11, "user_id": 6556924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28acde6fda6ca07bfe5dd668b76ebe59?s=128&d=identicon&r=PG&f=1", "display_name": "Krijnen", "link": "https://stackoverflow.com/users/6556924/krijnen"}, "reply_to_user": {"reputation": 2265, "user_id": 982840, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3dc7514c4091ec4326643eda54aa7b8a?s=128&d=identicon&r=PG&f=1", "display_name": "mldeveloper", "link": "https://stackoverflow.com/users/982840/mldeveloper"}, "edited": false, "score": 0, "creation_date": 1471856658, "post_id": 38876742, "comment_id": 65498498, "body": "Do you have any other ideas what could be wrong, or what I could try? I still would really like it to be able to update remotely, since that also syncs it with the other systems (flight logs etc.)"}, {"owner": {"reputation": 2265, "user_id": 982840, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3dc7514c4091ec4326643eda54aa7b8a?s=128&d=identicon&r=PG&f=1", "display_name": "mldeveloper", "link": "https://stackoverflow.com/users/982840/mldeveloper"}, "edited": false, "score": 0, "creation_date": 1471891590, "post_id": 38876742, "comment_id": 65521020, "body": "Unfortunately, no.  If I think of anything will follow up."}, {"owner": {"reputation": 11, "user_id": 6556924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28acde6fda6ca07bfe5dd668b76ebe59?s=128&d=identicon&r=PG&f=1", "display_name": "Krijnen", "link": "https://stackoverflow.com/users/6556924/krijnen"}, "reply_to_user": {"reputation": 2265, "user_id": 982840, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3dc7514c4091ec4326643eda54aa7b8a?s=128&d=identicon&r=PG&f=1", "display_name": "mldeveloper", "link": "https://stackoverflow.com/users/982840/mldeveloper"}, "edited": false, "score": 0, "creation_date": 1471941548, "post_id": 38876742, "comment_id": 65539392, "body": "Ok, thanks for your time and consideration."}], "owner": {"reputation": 11, "user_id": 6556924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28acde6fda6ca07bfe5dd668b76ebe59?s=128&d=identicon&r=PG&f=1", "display_name": "Krijnen", "link": "https://stackoverflow.com/users/6556924/krijnen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470840491, "creation_date": 1470840491, "question_id": 38876742, "link": "https://stackoverflow.com/questions/38876742/sony-qx1-api-setcurrenttime", "title": "sony qx1 api setcurrenttime", "body": "<p>I'm trying to implement functions from the sony qx1 api using c++ and succeeded to do so for pretty much everything I need (shooting video, pictures, changing shutter speed etc.) The only issue I run in to is setting the date and time. The json request I'm sending reads:</p>\n\n<pre><code>    {\"method\":\"setCurrentTime\", \"params\":[{\"dateTime\": \"2016-08-10T15:21:37Z\"}]\n, \"id\":1, \"version\": \"1.0\"}\n</code></pre>\n\n<p>which I believe matches the example given in the reference.\nIt doesn't return any errors and seems to get a response from the camera (when it isn't connected I do get a timeout response). However when analyzing the pictures it shows them all as taken on January 1st 2014. </p>\n\n<p>I tried playing around with the request quite a bit, but haven't managed to find a request that the camera actually responds to. The camera does however change its date when connecting to the mobile app, just like it's supposed to, indicating me that it should be possible to somehow change the date and time setting remotely.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "algorithm", "circular-buffer"], "comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1470840404, "post_id": 38876667, "comment_id": 65114791, "body": "Your first sentence seems to indicate this is an <i>answer</i> to something rather than a question; maybe you&#39;d like to rephrase this; also, language-tagging is always a good idea."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1470840606, "post_id": 38876667, "comment_id": 65114930, "body": "@MarcusM&#252;ller: changed the first sentence, language is not important for the algo here."}, {"owner": {"reputation": 328, "user_id": 6468799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2acdefe8f864fb9d892f5ff97e0fb4bf?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas", "link": "https://stackoverflow.com/users/6468799/nicolas"}, "edited": false, "score": 1, "creation_date": 1470840804, "post_id": 38876667, "comment_id": 65115085, "body": "I think you can solve this by replacing one of the offset variables by a size variable."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1470840816, "post_id": 38876667, "comment_id": 65115099, "body": "@Klaus I humbly disagree"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1470841083, "post_id": 38876667, "comment_id": 65115275, "body": "@klaus I&#39;m still not 100% sure I understand the <i>problem</i> you&#39;re trying to solve. Could you state more clearly what you actually want to implement?"}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1470841806, "post_id": 38876667, "comment_id": 65115786, "body": "@MarcusM&#252;ller: My implementation only utilizes size-1 elements in the buffer. Given a buffer size of 8 you only can store 7 elements. If you add a counter var, the overall size of buffer + management data increases by sizeof(counter) but utilizes one more element which results in overall additional cost sizeof(counter_var) - sizeof ( element ). If sizeof(element) is smaller than sizeof(counter_var) this is not useful. I search a solution which comes without additional cost in space and hopefully also in runtime consumption."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1470842062, "post_id": 38876667, "comment_id": 65115973, "body": "Your implementation of <b>what</b> exactly?"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1470842124, "post_id": 38876667, "comment_id": 65116020, "body": "I mean your question title says &quot;circular buffer&quot;, and you seem to be perfectly capable of using the modulo operator to index an array, but I seem to be missing something, because with that, you&#39;d use all elements of that array."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1470842270, "post_id": 38876667, "comment_id": 65116105, "body": "@MarcusM&#252;ller this is a perfectly reasonable implementation of a circular buffer; when the two offsets are equal, the buffer could be either full or empty. It&#39;s generally empty by convention, meaning there&#39;s no way to mark the buffer as full."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1470842424, "post_id": 38876667, "comment_id": 65116216, "body": "@MarkRansom absolutely! But we both then don&#39;t see why he&#39;s using one element less, right?"}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1470897892, "post_id": 38876667, "comment_id": 65138283, "body": "@MarcusM&#252;ller: If you use the given implementation you will see that a buffer of size 8 can only hold 7 elements at a time but all slots of the buffer will be used circular. But as already mentioned there is always 1 element gap on a &quot;full&quot; buffer."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1470921252, "post_id": 38876667, "comment_id": 65153721, "body": "@Klaus are you the one that downvoted my answer? Did you try it?"}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1470921744, "post_id": 38876667, "comment_id": 65154091, "body": "@MarkRansom: No, why do you think this? I prefer giving comments to improve maybe wrong answers. But I have not inspected your code in the moment so that there is no reason for commenting nor voting."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1470922737, "post_id": 38876667, "comment_id": 65154855, "body": "I prefer it that way too, I was just wondering if I had made a mistake and somebody wasn&#39;t kind enough to point it out. At least @MarcusM&#252;ller was honest when he did it to me yesterday."}], "answers": [{"comments": [{"owner": {"reputation": 2026, "user_id": 3789665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/38983281a7926f50843153d9e0788cdf?s=128&d=identicon&r=PG&f=1", "display_name": "greybeard", "link": "https://stackoverflow.com/users/3789665/greybeard"}, "edited": false, "score": 0, "creation_date": 1470953817, "post_id": 38877519, "comment_id": 65172417, "body": "(You might want to point out <i>the</i> saving grace of using <i>sentinel values</i>.)"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 2026, "user_id": 3789665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/38983281a7926f50843153d9e0788cdf?s=128&d=identicon&r=PG&f=1", "display_name": "greybeard", "link": "https://stackoverflow.com/users/3789665/greybeard"}, "edited": false, "score": 0, "creation_date": 1470956566, "post_id": 38877519, "comment_id": 65173252, "body": "@greybeard not sure there is one. This is <i>almost</i> but not quite lock free if you have different threads calling <code>Put</code> and <code>Pull</code>."}], "tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": -1, "last_activity_date": 1470921150, "last_edit_date": 1470921150, "creation_date": 1470842419, "answer_id": 38877519, "question_id": 38876667, "link": "https://stackoverflow.com/questions/38876667/circular-buffer-implementation/38877519#38877519", "title": "circular buffer implementation", "body": "<p>You could use a special sentinel value for one of the offsets, such as -1, to indicate that the buffer is full or empty. This will complicate your code for checking and modifying the offset.</p>\n\n<pre><code>// write data always! if buffer is already full, overwrite old data!\nvoid Put( const CONTENT_TYPE &amp;data )\n{\n    buffer[ inOffset++] = data;\n    inOffset%=size;\n\n    // was data overwritten, skip it by setting read offset to sentinel\n    if ( inOffset == outOffset || outOffset == -1 ) \n    {\n        outOffset = -1;\n        std::cout &lt;&lt; \"Overwrite\" &lt;&lt; std::endl;\n    }\n}\n\nCONTENT_TYPE Pull()\n{\n    if (outOffset == -1)\n        outOffset = inOffset;\n    CONTENT_TYPE data = buffer[ outOffset++ ];\n    outOffset %= size;\n    return data;\n}\n\nbool IsEmpty()\n{\n    return outOffset == inOffset;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1470842961, "post_id": 38877633, "comment_id": 65116634, "body": "That&#39;s not the way a circular buffer works. You only increment one offset or the other, depending on whether you&#39;re reading or writing; the only exception is when you overwrite because the buffer was full, which requires modifying the other offset to erase the oldest element. In your plan how do you tell the difference between an empty and a full buffer? P.S. I don&#39;t like my answer either, but it&#39;s the best I can come up with that meets the constraints - it&#39;s much easier to just accept the loss of 1 element capacity."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1470846038, "post_id": 38877633, "comment_id": 65118684, "body": "exactly, you&#39;re increasing either read or write pointer. By using different semantics when to &quot;reset&quot; to zero, you keep the full/empty information contained in the read-write pointer difference. Empty buffer: read==write pointer; full buffer read != write, but (read + buff length )% buff length  = write"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1470846165, "post_id": 38877633, "comment_id": 65118771, "body": "ah, I should add that write buffer exists on twice the buffer length, and just gets aliased onto the single length."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1470852946, "post_id": 38877633, "comment_id": 65122564, "body": "The devil&#39;s in the details. If you write length*2 into the buffer, the write index will wrap again and it looks empty once more."}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 0, "last_activity_date": 1470846222, "last_edit_date": 1470846222, "creation_date": 1470842690, "answer_id": 38877633, "question_id": 38876667, "link": "https://stackoverflow.com/questions/38876667/circular-buffer-implementation/38877633#38877633", "title": "circular buffer implementation", "body": "<p>You'd just deal with that by using different points in time at which you do the modulo operation; assume we increase the read and write pointers after every access. If we now do the read pointer's modulo instantly after increasing, and the write pointer's modulo just right before reading, the |write-read| of a full buffer would be the length of the buffer, without any special case handling. For that to work, your write pointer should always be <strong>used</strong> <code>% buffer_length</code>, but <strong>stored</strong> <code>% (2 * buffer_length)</code>.</p>\n\n<p>I don't especially like Mark's answer, because handling things as special cases is usually not a good idea, as little as introducing negative sentinel values is in a place where you'd typically used <code>size_t</code> (i.e. an unsigned integer).</p>\n"}, {"tags": [], "owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "is_accepted": false, "score": 1, "last_activity_date": 1470969934, "last_edit_date": 1470969934, "creation_date": 1470884457, "answer_id": 38886571, "question_id": 38876667, "link": "https://stackoverflow.com/questions/38876667/circular-buffer-implementation/38886571#38886571", "title": "circular buffer implementation", "body": "<p>You can use two integers and fill all slots if one is an index and the other an element count, then convert to find the second index on the fly:\n</p>\n\n<pre><code>void put(const ELEMENT&amp; element) {\n  if (nElements == size) throw \"put: buffer full\";\n  buffer[(start + nElements++) % size] = element;\n}\n\nELEMENT get() {\n  if (nElements == 0) throw \"get: buffer empty\";\n  ELEMENT&amp; value = buffer[start];\n  start = (start + 1) % size;\n  --nElements;\n  return value;\n}\n</code></pre>\n\n<p>Of course you can replace the mod operations with <code>if (foo &gt; size) foo -= size;</code> if you like.</p>\n"}], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1857, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1470969934, "creation_date": 1470840318, "last_edit_date": 1470852058, "question_id": 38876667, "link": "https://stackoverflow.com/questions/38876667/circular-buffer-implementation", "title": "circular buffer implementation", "body": "<p>Yes again, I come again with that very straight forward implementation which is something like this:</p>\n\n<pre><code>    // write data always! if buffer is already full, overwrite old data!\n    void Put( const CONTENT_TYPE &amp;data )\n    {\n        buffer[ inOffset++] = data;\n        inOffset%=size;\n\n        // was data overwritten, skip it by increment read offset\n        if ( inOffset == outOffset ) \n        {\n            outOffset++;\n            outOffset%=size;\n            std::cout &lt;&lt; \"Overwrite\" &lt;&lt; std::endl;\n        }\n    }\n\n    CONTENT_TYPE Pull()\n    {\n        CONTENT_TYPE data = buffer[ outOffset++ ];\n        outOffset %= size;\n        return data;\n    }\n</code></pre>\n\n<p>But this simple algorithm utilizes only size-1 one elements of the buffer!</p>\n\n<p>If I want to avoid that, I only found a solution with adding another counter variable, which wastes me sizeof(counter_var) - sizeof(element) bytes.</p>\n\n<p>Q: Is there a solution which did not waste memory? It looks so terrible simple but I can't catch it :-)</p>\n\n<p>Remark: There are some more lines of code to protect for empty reads and other stuff, but this is not important to the question. And it is not tagged c++ because the algorithm did not depend on the language, also if I give a c++ code example.</p>\n"}, {"tags": ["c++", "signals"], "comments": [{"owner": {"reputation": 1505, "user_id": 2641513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bGWLp.jpg?s=128&g=1", "display_name": "zoska", "link": "https://stackoverflow.com/users/2641513/zoska"}, "edited": false, "score": 0, "creation_date": 1470841083, "post_id": 38876648, "comment_id": 65115276, "body": "first of all, you can&#39;t really do much inside signal handler - to check which system calls are signal safe check <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">man 7 signal</a>. So <code>printf</code> and <code>gets</code> should not be used. With the second question - what do you mean by &quot;different program&quot;? Do you want to include signal handling in class and hide it under its implementation, so everyone who&#39;s using/linking to it will have signal handler set up?"}, {"owner": {"reputation": 23, "user_id": 3778805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C182j.png?s=128&g=1", "display_name": "Jonathan Michael Foonlan Tsang", "link": "https://stackoverflow.com/users/3778805/jonathan-michael-foonlan-tsang"}, "reply_to_user": {"reputation": 1505, "user_id": 2641513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bGWLp.jpg?s=128&g=1", "display_name": "zoska", "link": "https://stackoverflow.com/users/2641513/zoska"}, "edited": false, "score": 0, "creation_date": 1470849596, "post_id": 38876648, "comment_id": 65120662, "body": "@zoska That&#39;s right, yes - I&#39;d like to have the signal caught by each instance of <code>Simulator</code> (for example, to get all of them to print their state on receiving a <code>SIGINT</code>). One way I thought about it was to put the <code>sigaction</code> call inside the constructor <code>Simulator::Simulator</code>, but that won&#39;t work because <code>handler</code> works with the particular instance <code>sim</code>, not any other instance."}, {"owner": {"reputation": 1505, "user_id": 2641513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bGWLp.jpg?s=128&g=1", "display_name": "zoska", "link": "https://stackoverflow.com/users/2641513/zoska"}, "edited": false, "score": 0, "creation_date": 1471000217, "post_id": 38876648, "comment_id": 65190041, "body": "So in one process you want to have multiple instances of Simulator and pass information to each one of them, when signal reaches the process?"}, {"owner": {"reputation": 1505, "user_id": 2641513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bGWLp.jpg?s=128&g=1", "display_name": "zoska", "link": "https://stackoverflow.com/users/2641513/zoska"}, "edited": false, "score": 0, "creation_date": 1471000321, "post_id": 38876648, "comment_id": 65190091, "body": "Moreover, hiding signal handling under library implementation is very risky. You don&#39;t know if user of your class is not using the same signal or some other way of handling signals like signal fd, which could make your code or user of your code not working. What exactly do you want to achieve?"}], "owner": {"reputation": 23, "user_id": 3778805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C182j.png?s=128&g=1", "display_name": "Jonathan Michael Foonlan Tsang", "link": "https://stackoverflow.com/users/3778805/jonathan-michael-foonlan-tsang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1470909747, "creation_date": 1470840258, "last_edit_date": 1470909747, "question_id": 38876648, "link": "https://stackoverflow.com/questions/38876648/a-packaged-way-to-handle-signals", "title": "A packaged way to handle signals?", "body": "<p>I have a program for solving a dynamical system. Stripped to its bones, it looks something like this:</p>\n\n<pre><code>#include &lt;various_things.h&gt;\n\ndouble f(double t, double x, double p, double dt);\n\nclass Simulator {\n  Simulator();\n  void solve();\n\n  double solution;\n  double time, timeMax, timeStep;\n  double parameter;\n};\n\nvoid Simulator::solve()\n{\n  while (time &lt; timeMax)\n  {\n    solution = f(time, solution, parameter, timeStep);\n    time += timeStep;\n    printf(\"%f %f\\n\", time, solution);\n  }\n}\n\nint main(int argc, char* argv)\n{\n  Simulator* sim = new Simulator(vp);\n  if (argc &lt;= 2) exit(-1);\n  sim-&gt;time = 0;\n  sim-&gt;solution = atof(argv[1]); // initial condition\n  sim-&gt;parameter = atof(argv[2]); // 'parameters'\n  /* ... */\n  sim-&gt;solve();\n}\n</code></pre>\n\n<p>An initial condition and a parameter are first specified through the arguments. Then <code>Simulator::solve()</code> performs a loop which updates the solution. </p>\n\n<p>I wanted to make this more interactive, so that one can pass a <code>SIGINT</code> signal and specify a new parameter, for example. So, based on the signal-handling tutorials that I could find, I tried something like this:</p>\n\n<pre><code>#include &lt;signal.h&gt;\n\nstatic void handler(int signum, siginfo_t *siginfo, ucontext_t *context)\n{\n  /* What does context do? */\n  printf(\"What should the new parameter value be? [%f]\", sim-&gt;parameter);\n  char buffer[1024];\n  gets(buffer);\n  if (strcmp(buffer, \"\\n\") != 0)\n    sim-&gt;parameter = atof(buffer);\n  sim-&gt;solve();\n}\n\n/* This is now declared in the global scope. */\nSimulator* sim;\n\nint main(int argc, char* argv)\n{\n  /* I don't really understand how this bit works. */\n  struct sigaction act;\n  memset(&amp;act, '\\0', sizeof(act));\n  act.sa_sigaction = &amp;handler;\n  act.sa_flags = SA_SIGINFO; // what?\n\n  if (sigaction(SIGINT, &amp;act, NULL) &lt; 0)\n  {\n    /* Under what circumstances would this happen? */\n    fprintf(stderr, \"Could not handle signal.\\n\");\n    perror(\"sigaction\");\n    return 1;\n  }\n\n  sim = new Simulator;\n  if (argc &lt;= 2) exit(-1);\n  sim-&gt;time = 0;\n  sim-&gt;solution = atof(argv[1]);\n  sim-&gt;parameter = atof(argv[2]);\n  /* ... */\n  sim-&gt;solve();\n }\n</code></pre>\n\n<p>I think this code works. But I have some concerns about it:</p>\n\n<ul>\n<li>I am worried about declaring <code>sim</code> in the global scope, but I don't know how else to get <code>handler()</code> to know about it.</li>\n<li>Suppose I want to use <code>Simulator</code> in a different program. At the moment, the signal-handling is done in <code>main()</code>; would it be possible to make it intrinsic to <code>Simulator</code> (so that any program using <code>Simulator</code> will catch the signal)?</li>\n</ul>\n"}, {"tags": ["c++", "wxwidgets", "hotkeys"], "comments": [{"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 1, "creation_date": 1470841095, "post_id": 38876605, "comment_id": 65115284, "body": "keep in mind that wxWidgets is a cross-platform library. So &quot;PageDown&quot; may not work on some platforms. In regards to your fist question - does it work the same on Windows? Also what is you wxWidgets version? What is you GTK version it compiled against? What is your OS/OS  version? Finally, did you try the menu sample? You will need to modify the sample code to acquire the numeric keys as accelerators."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1470919311, "post_id": 38876605, "comment_id": 65152299, "body": "@Igor, the question talks about <code>2</code>, <code>&#47;</code> or <code>*</code> keys... Even in case of cross platform, those keys are <b>always</b> present.  It&#39;s the case of a desktop calculator program.  Nobody is talking about some strange key like the ones you can fin in an Apple computer."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 3558897, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4e197702508b1d8580c0e692ed2a8e6c?s=128&d=identicon&r=PG&f=1", "display_name": "user3558897", "link": "https://stackoverflow.com/users/3558897/user3558897"}, "edited": false, "score": 0, "creation_date": 1470853784, "post_id": 38880067, "comment_id": 65123039, "body": "thanks! Other keys&#39; accelerator strings are <code>KP_SUBTRACT</code>, <code>KP_ADD</code>, <code>KP_MULTIPLY</code>, <code>KP_DIVIDE</code>, <code>KP_ENTER</code> and <code>KP_DECIMAL</code> - just found them using triar-and-error way."}, {"owner": {"reputation": 18238, "user_id": 15275, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WNTZ3.jpg?s=128&g=1", "display_name": "VZ.", "link": "https://stackoverflow.com/users/15275/vz"}, "reply_to_user": {"reputation": 91, "user_id": 3558897, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4e197702508b1d8580c0e692ed2a8e6c?s=128&d=identicon&r=PG&f=1", "display_name": "user3558897", "link": "https://stackoverflow.com/users/3558897/user3558897"}, "edited": false, "score": 1, "creation_date": 1470862776, "post_id": 38880067, "comment_id": 65127795, "body": "I&#39;ve added the full list of supported strings to the documentation in <a href=\"https://github.com/wxWidgets/wxWidgets/commit/7d9d5934b557df1f512e7eda93f350da68599450\" rel=\"nofollow noreferrer\">this commit</a> now."}], "tags": [], "owner": {"reputation": 18238, "user_id": 15275, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WNTZ3.jpg?s=128&g=1", "display_name": "VZ.", "link": "https://stackoverflow.com/users/15275/vz"}, "is_accepted": true, "score": 2, "last_activity_date": 1470850639, "creation_date": 1470850639, "answer_id": 38880067, "question_id": 38876605, "link": "https://stackoverflow.com/questions/38876605/wxmenuitem-accelerator-specifications/38880067#38880067", "title": "wxMenuItem accelerator specifications", "body": "<p>You're looking for <code>WXK_NUMPAD2</code> (which is documented together with all the other <a href=\"http://docs.wxwidgets.org/3.1.0/defs_8h.html#a41c4609211685cff198618963ec8f77d\" rel=\"nofollow\">key codes</a>) and the corresponding menu accelerator string (which is unfortunately not documented) is <code>KP_2</code>.</p>\n"}], "owner": {"reputation": 91, "user_id": 3558897, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4e197702508b1d8580c0e692ed2a8e6c?s=128&d=identicon&r=PG&f=1", "display_name": "user3558897", "link": "https://stackoverflow.com/users/3558897/user3558897"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 38880067, "answer_count": 1, "score": 1, "last_activity_date": 1470850639, "creation_date": 1470840175, "question_id": 38876605, "link": "https://stackoverflow.com/questions/38876605/wxmenuitem-accelerator-specifications", "title": "wxMenuItem accelerator specifications", "body": "<p>I'm trying to use some numpad button (like <code>/</code>, <code>*</code> and digits) as accelerators for wxMenuItem (C++, GTK), but they doesn't works.</p>\n\n<p>If I specify just <code>2</code>, only the ordinary <code>2</code> button will fire the event, not <code>2</code> on numpad with NumLock ON (while ASCII codes are the same).  It's the same with <code>/</code> and <code>*</code> buttons.</p>\n\n<p>I've tried to find some specifications for accelerators in wxWidgets docs, but unfortunately they are not complete (for example, it says I need to specify <code>pgdn</code> for PageDown key, but actually both <code>PgDn</code> and <code>PageDown</code> works good) and give no idea of using NumPad buttons.</p>\n\n<p>Tried something like <code>NumX</code> for NumPadX buttons - it doesn't works too.</p>\n\n<p><strong>So, the questions are:</strong></p>\n\n<p>1) Is there any <strong>complete</strong> specification for accelerators in wxWidgets?</p>\n\n<p>2) If not, can anyone suggest me how to use NumPad buttons as accelerators?</p>\n"}, {"tags": ["c++", "scripting", "declaration"], "comments": [{"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 2, "creation_date": 1470840170, "post_id": 38876557, "comment_id": 65114617, "body": "system(&quot;DatabaseBackup.bat&quot;); will execute it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1470840225, "post_id": 38876557, "comment_id": 65114660, "body": "What is <code>public FILE *DatabaseBackup.bat fopen(*C$)</code>?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470840619, "post_id": 38876557, "comment_id": 65114943, "body": "@Nathan ^ Invalid c++ code :)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1470841784, "post_id": 38876557, "comment_id": 65115773, "body": "A character variable only holds 1 character.  The words &quot;yes&quot; and &quot;no&quot; consist of more than one character.  You will either need the user to enter &#39;y&#39; or &#39;n&#39;; or use <code>std::string</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1470841871, "post_id": 38876557, "comment_id": 65115829, "body": "You never initialize your Boolean variables.  The statement &quot;<code>if (no)</code>&quot; will depend on the random value in memory.  Undefined behavior, anything could happen."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1470844722, "post_id": 38876557, "comment_id": 65117839, "body": "Why write a program for this?  Can&#39;t you just use <code>read -p &quot;Do you want to cancel?&quot; -N 1 -t 300&quot;</code> (or the equivalent for your shell) in your script?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 2340139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6051d4ff9afdded8a504f6be7795678d?s=128&d=identicon&r=PG", "display_name": "pfx7", "link": "https://stackoverflow.com/users/2340139/pfx7"}, "is_accepted": false, "score": 0, "last_activity_date": 1470845204, "last_edit_date": 1495539859, "creation_date": 1470845204, "answer_id": 38878503, "question_id": 38876557, "link": "https://stackoverflow.com/questions/38876557/launching-a-script-from-c/38878503#38878503", "title": "Launching a Script from C++", "body": "<blockquote>\n  <p>The problems I am having is I am not sure how to declare the file system and file so it can be called. </p>\n</blockquote>\n\n<p>I'm not sure what you mean by \"declare the file system\". If you want to open a file, take a look at <a href=\"http://www.cplusplus.com/doc/tutorial/files/\" rel=\"nofollow noreferrer\">C++ File IO</a> </p>\n\n<blockquote>\n  <p>Then, I am not sure how to call the script to run</p>\n</blockquote>\n\n<p>Running the script is a OS related function. See <a href=\"https://stackoverflow.com/a/478960/2340139\">this answer</a> on how to do this.</p>\n\n<blockquote>\n  <p>I am also not sure how to count down the 5 minutes to auto launch the script when ready. </p>\n</blockquote>\n\n<p>You need to use a <a href=\"https://stackoverflow.com/a/3220503/2340139\">timer/clock</a> with a <a href=\"http://www.tutorialspoint.com/cplusplus/cpp_signal_handling.htm\" rel=\"nofollow noreferrer\">signal/interrupt</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 6700595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7735e18b75445be33046de598505303?s=128&d=identicon&r=PG&f=1", "display_name": "deathblooms69", "link": "https://stackoverflow.com/users/6700595/deathblooms69"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1470845204, "creation_date": 1470840048, "last_edit_date": 1470840800, "question_id": 38876557, "link": "https://stackoverflow.com/questions/38876557/launching-a-script-from-c", "title": "Launching a Script from C++", "body": "<p>What I want to do is create a program to prompt the user for input. If they select yes I want to terminate the rest of the program. If they select no I want to immediately run a script. If there is no input for 5 minutes I want the script to automatically run. The only reason I want to use the script or batch file is I previously created it and it is already done. </p>\n\n<p>The problems I am having is I am not sure how to declare the file system and file so it can be called. Then, I am not sure how to call the script to run. I am also not sure how to count down the 5 minutes to auto launch the script when ready. Below is my file in all it's current form.</p>\n\n<pre><code>//Program Name Apex Database Backup\n//Written 8/3/2016\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\nusing namespace std;\nint main()\n{\n    //Declarations\n    bool yes;\n    bool no;\n    char yesOrno;\n    string open;\n    FILE *C$;\n    //Prompt the User for Input\n    cout &lt;&lt; \"Are You Currently Loading Out? If Not This Program Will Execute in 5 Minutes. \" &lt;&lt; endl;\n    cout &lt;&lt; \"You Will Lose Your Connection to Apex! \" &lt;&lt; endl;\n    cout &lt;&lt; \"Enter yes or no: \" &lt;&lt; endl;\n    //Get User Input\n    cin &gt;&gt; yesOrno;\n    //Open the File\n    public FILE *DatabaseBackup.bat fopen(*C$)\n        //Process the Selection\n            if (no)\n            {\n                ShellExecute (DatabaseBackup.bat);\n            }   \n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1470839984, "post_id": 38876466, "comment_id": 65114447, "body": "This is what a virtual clone function is for."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470840110, "post_id": 38876466, "comment_id": 65114557, "body": "You just need to replace the raw pointers with <code>unique_ptr</code> from the answer in the dupe question."}, {"owner": {"reputation": 540, "user_id": 6700329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e394498291b33c63ffddfa958ae79786?s=128&d=identicon&r=PG&f=1", "display_name": "wychmaster", "link": "https://stackoverflow.com/users/6700329/wychmaster"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1470901562, "post_id": 38876466, "comment_id": 65140495, "body": "Thx a lot for the quick response. I will use this approach then."}], "owner": {"reputation": 540, "user_id": 6700329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e394498291b33c63ffddfa958ae79786?s=128&d=identicon&r=PG&f=1", "display_name": "wychmaster", "link": "https://stackoverflow.com/users/6700329/wychmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "closed_date": 1470840078, "answer_count": 0, "score": 0, "last_activity_date": 1470839831, "creation_date": 1470839831, "question_id": 38876466, "link": "https://stackoverflow.com/questions/38876466/deep-copy-of-unique-ptr-map-with-abstract-base-class", "closed_reason": "Duplicate", "title": "deep copy of unique_ptr map with abstract base class", "body": "<p>i have the following problem: I have a map of unique pointers. The unique pointers type is a base class. Now i want to make a copy of this map. I tried something like this:</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;memory&gt;\n\nclass A\n{\n    virtual void myFunc()=0;\n};\n\nclass B : public A\n{\n    float b;\npublic:\n    virtual void myFunc() override\n    {\n        b=1.0;\n    }\n};\n\n\nint main()\n{\n    std::map&lt;int,std::unique_ptr&lt;A&gt;&gt; myMap;\n    std::map&lt;int,std::unique_ptr&lt;A&gt;&gt; myMapCopy;\n\n    myMap.emplace(1,std::make_unique&lt;B&gt;());\n    for(auto&amp; itMyMap : myMap)\n    {\n        myMapCopy.emplace(itMyMap.first,std::make_unique&lt;A&gt;(*itMyMap.second));\n    }\n}\n</code></pre>\n\n<p>Problem is, that I have to specify the type when calling make_unique, but  I don't know if its a B or any other derived class. Is there some nice trick to make deep copies of a unique pointer without specializations?</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2015"], "comments": [{"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1470839893, "post_id": 38876438, "comment_id": 65114373, "body": "which redistributable?"}, {"owner": {"reputation": 663, "user_id": 2195567, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/33159b8791121aae132909022eef3954?s=128&d=identicon&r=PG", "display_name": "Ricky", "link": "https://stackoverflow.com/users/2195567/ricky"}, "reply_to_user": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1470840687, "post_id": 38876438, "comment_id": 65114994, "body": "They have 2013 x86 redistributable installed already (all of them), but I don&#39;t want them to have to install 2015 x86 redistributable when I compile again using Visual Studio 2015."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1470840785, "post_id": 38876438, "comment_id": 65115069, "body": "You need VS2013 as well, you can use the ToolSet option in a VS2015 project to get a 2013 compatible flavor of the DLL.  If you designed your DLL interface <i>very</i> carefully or the client doesn&#39;t use C++ at all then you can build your DLL with /MT instead of /MD.  That however doesn&#39;t come to a good end very often."}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1470840840, "post_id": 38876438, "comment_id": 65115109, "body": "you can modify the target framework and platform toolset to be the same as 2013. see this for more details: <a href=\"https://msdn.microsoft.com/en-GB/library/ff770576.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-GB/library/ff770576.aspx</a>"}, {"owner": {"reputation": 663, "user_id": 2195567, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/33159b8791121aae132909022eef3954?s=128&d=identicon&r=PG", "display_name": "Ricky", "link": "https://stackoverflow.com/users/2195567/ricky"}, "edited": false, "score": 0, "creation_date": 1470841150, "post_id": 38876438, "comment_id": 65115323, "body": "Thank you guys. I am installing Visual Studio 2013 Community now. I didn&#39;t know about the 2015 toolset option..."}], "owner": {"reputation": 663, "user_id": 2195567, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/33159b8791121aae132909022eef3954?s=128&d=identicon&r=PG", "display_name": "Ricky", "link": "https://stackoverflow.com/users/2195567/ricky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 474, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470839785, "creation_date": 1470839785, "question_id": 38876438, "link": "https://stackoverflow.com/questions/38876438/can-i-compile-visual-studio-2013-dlls-in-visual-studio-2015", "title": "Can I compile Visual Studio 2013 DLL&#39;s in Visual Studio 2015?", "body": "<p>I just upgraded to Visual Studio 2015, but I have a DLL that is used by some clients that was compiled with Visual Studio 2013.</p>\n\n<p>Is there anyway for me to compile this DLL in 2015, without needing them to download the 2015 redistributable?</p>\n"}, {"tags": ["c++", "visual-studio-2015"], "owner": {"reputation": 104, "user_id": 6233880, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/EjhcM.jpg?s=128&g=1", "display_name": "grae22", "link": "https://stackoverflow.com/users/6233880/grae22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470839321, "creation_date": 1470839321, "question_id": 38876261, "link": "https://stackoverflow.com/questions/38876261/vs2015-sharing-projects-between-solutions-seems-to-extend-build-times-unnecessar", "title": "VS2015 sharing projects between solutions seems to extend build times unnecessarily", "body": "<p>We have several (around 10) C++ DLL projects that are shared between several solutions.</p>\n\n<p>My (possibly naive) belief is that if I'm building each solution consecutively - after the first solution's build, the rest should build very quickly. This is (thankfully) true for the 'compiling code' stuff, but something doesn't seem quite right as the compiler/linker still does some work that seems unnecessary.</p>\n\n<p>To simplify the problem I've created two solutions that share an effectively empty win32 DLL project. After each build I get the following ('normal' verbosity output - I'll spare you the 'detailed' and 'diagnostic', for now):</p>\n\n<pre><code>1&gt;InitializeBuildStatus:\n1&gt;         Creating \"Debug\\Prj_1.tlog\\unsuccessfulbuild\" because \"AlwaysCreate\" was specified.\n1&gt;       ClCompile:\n1&gt;         All outputs are up-to-date.\n1&gt;         All outputs are up-to-date.\n1&gt;       Link:\n1&gt;         All outputs are up-to-date.\n1&gt;         Prj_1.vcxproj -&gt; E:\\code\\C++\\CommonLibTest\\CLT_1\\Debug\\Prj_1.dll\n1&gt;         Prj_1.vcxproj -&gt; E:\\code\\C++\\CommonLibTest\\CLT_1\\Debug\\Prj_1.pdb (Full PDB)\n1&gt;       FinalizeBuildStatus:\n1&gt;         Deleting file \"Debug\\Prj_1.tlog\\unsuccessfulbuild\".\n1&gt;         Touching \"Debug\\Prj_1.tlog\\Prj_1.lastbuildstate\".\n</code></pre>\n\n<p>It's the 'link' step that concerns me - in particular the <code>(Full PDB)</code>. This isn't significant in the test situation, but when building our larger solutions it tends to add an annoying amount of time to the build process (a build that 'should' take a couple seconds ends up taking around a minute).</p>\n\n<p>With 'detailed' build output I see the following message:</p>\n\n<blockquote>\n  <p>Forcing rebuild of all source files due to a change in the command\n  line since the last build.</p>\n</blockquote>\n\n<p>I've seen other posts on this site relating to this message, but nothing mentioned in these has helped me.</p>\n\n<p>I've tried the above simple test case with and without precompiled-headers, with no change in behaviour.</p>\n\n<p>My only solution is to change the intermediate directory to be a subfolder in the solution's output-folder. This isn't ideal, though, as you then have to build each project in isolation... which ends up taking much longer.</p>\n"}, {"tags": ["c++", "visual-studio", "process"], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1470839532, "post_id": 38876219, "comment_id": 65114076, "body": "Isn&#39;t some standard include file which avoids that?"}], "tags": [], "owner": {"reputation": 8856, "user_id": 4746087, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3C19Q.png?s=128&g=1", "display_name": "Kurt Van den Branden", "link": "https://stackoverflow.com/users/4746087/kurt-van-den-branden"}, "is_accepted": true, "score": 6, "last_activity_date": 1470839207, "creation_date": 1470839207, "answer_id": 38876219, "question_id": 38876218, "link": "https://stackoverflow.com/questions/38876218/execute-a-command-and-get-output-popen-and-pclose-undefined/38876219#38876219", "title": "Execute a command and get output: popen and pclose undefined", "body": "<p>Since a Microsoft compiler is used, an underscore is needed at the beginning of <code>popen</code> and <code>pclose</code>. Replace:</p>\n\n<pre><code>std::shared_ptr&lt;FILE&gt; pipe(popen(cmd, \"r\"), pclose);\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>std::shared_ptr&lt;FILE&gt; pipe(_popen(cmd, \"r\"), _pclose);\n</code></pre>\n"}], "owner": {"reputation": 8856, "user_id": 4746087, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3C19Q.png?s=128&g=1", "display_name": "Kurt Van den Branden", "link": "https://stackoverflow.com/users/4746087/kurt-van-den-branden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3427, "favorite_count": 0, "accepted_answer_id": 38876219, "answer_count": 1, "score": 4, "last_activity_date": 1470839333, "creation_date": 1470839207, "last_edit_date": 1495535361, "question_id": 38876218, "link": "https://stackoverflow.com/questions/38876218/execute-a-command-and-get-output-popen-and-pclose-undefined", "title": "Execute a command and get output: popen and pclose undefined", "body": "<p>As explained in <a href=\"https://stackoverflow.com/a/478960/4746087\">this answer</a>, I tried to execute a windows command and get the output within C++ in a visual studio project.  </p>\n\n<pre><code>std::string executeCommand (const char* cmd) {\n    char buffer[128];\n    std::string result = \"\";\n    std::shared_ptr&lt;FILE&gt; pipe(popen(cmd, \"r\"), pclose);\n    if (!pipe) throw std::runtime_error(\"popen() failed!\");\n\n    while (!feof(pipe.get())) {\n        if (fgets(buffer, 128, pipe.get()) != NULL)\n            result += buffer;\n    }\n    return result;\n}\n</code></pre>\n\n<p>Problem is, this is not compiling.The following errors are given:</p>\n\n<pre><code>Error: identifier \"popen\" is undefined.\nError: identifier \"pclose\" is undefined.\n</code></pre>\n"}]