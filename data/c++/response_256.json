[{"tags": ["c++"], "comments": [{"owner": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "edited": false, "score": 2, "creation_date": 1575504434, "post_id": 59186289, "comment_id": 104592882, "body": "You&#39;re missing a lot of how recursive functions work. <code>currentLevel</code> and <code>NodeCount</code> do not persist inside the new scope when you call the function again. You also don&#39;t return the value of your recursive calls. Specific to the error code, not all paths in your function return a value."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "is_accepted": false, "score": 5, "last_activity_date": 1575504611, "creation_date": 1575504611, "answer_id": 59186385, "question_id": 59186289, "link": "https://stackoverflow.com/questions/59186289/function-that-returns-the-number-of-nodes-in-a-certain-level-of-a-binary-search/59186385#59186385", "title": "function that returns the number of nodes in a certain level of a binary search tree", "body": "<p>The error is basically what it says on the tin: your function can reach the end without returning a value.</p>\n\n<p>To see why, let's just look at your outer if statement:</p>\n\n<pre><code>if(node-&gt;left != NULL)\n    //...\nif(node-&gt;right != NULL)\n    //...\n//...\n</code></pre>\n\n<p>What happens if both <code>node-&gt;left</code> <em>and</em> <code>node-&gt;right</code> are null? You don't handle this case at all. That's a bug.</p>\n\n<p>Secondly (and arguably most importantly) you call yourself recursively, but don't do anything with the return value of your function. You don't return it, and you don't save it for later either. That means nothing really happens to it. It just gets lost.</p>\n\n<p>Because of this, your function won't return this value at all. That creates situations in which <strong>nothing</strong> is returned.</p>\n\n<p>So, to fix this, figure out what you want to do with the recursive return value of your function and either a) save it in a temporary variable, or b) simply return it. Which one you choose will depend on what you want your function to count.</p>\n\n<p>Also, make sure you return a value even if both sides of the tree are NULL.</p>\n"}], "owner": {"reputation": 13, "user_id": 12192117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfe1e57e87918e9a35d53a674d6b4ae?s=128&d=identicon&r=PG&f=1", "display_name": "ronnie", "link": "https://stackoverflow.com/users/12192117/ronnie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575504625, "creation_date": 1575503910, "last_edit_date": 1575504625, "question_id": 59186289, "link": "https://stackoverflow.com/questions/59186289/function-that-returns-the-number-of-nodes-in-a-certain-level-of-a-binary-search", "title": "function that returns the number of nodes in a certain level of a binary search tree", "body": "<p>I have to create a function <code>getNodesatLevel</code> that returns the number of nodes at a level, however, I'm getting a \"may reach end of void function\" error. This is for a Binary Search tree, and I'm required to use recursion for this function. </p>\n\n<pre><code>int TreeType::getNodesAtLevel(TreeNode * &amp;node, int level, ItemType * mainArr)\n{\n    int currentLevel = 0;\n    int NodeCount = 1;\n\n    if(currentLevel == level)\n    {\n        NodeCount++;\n        return NodeCount;\n    }\n    else if(currentLevel != level)\n    {\n        currentLevel++;\n\n        if(node-&gt;left != NULL)\n            getNodesAtLevel(node-&gt;left, level, mainArr);\n\n        if(node-&gt;right != NULL)\n            getNodesAtLevel(node-&gt;right, level, mainArr);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "syntax", "bmp", "bitmapimage"], "comments": [{"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1575504005, "post_id": 59186280, "comment_id": 104592768, "body": "It is taking the memory address of <code>data[18]</code>, treating it as a pointer to an integer, then dereferencing it. Basically, treating it as a number. This seems like UB though, since <code>data</code> is only size 1"}, {"owner": {"reputation": 8010, "user_id": 10659910, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3zC2tMoc6PA/AAAAAAAAAAI/AAAAAAAAADg/n9BjRO9gFMo/photo.jpg?sz=128", "display_name": "William Miller", "link": "https://stackoverflow.com/users/10659910/william-miller"}, "reply_to_user": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1575504462, "post_id": 59186280, "comment_id": 104592886, "body": "@ChrisMM <code>&amp;data[18]</code> is size <code>8</code> on 64-bit and <code>4</code> on 32-bit, so I think this is only undefined behavior if that ends up causing a read past the end of <code>data</code>, no?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1575504659, "post_id": 59186280, "comment_id": 104592935, "body": "<i>What is *(int</i>)&amp;data[18] actually doing in this code?* Violating the <a href=\"https://en.cppreference.com/w/c/language/object#Strict_aliasing\" rel=\"nofollow noreferrer\">Strict Aliasing Rule</a>, so it could be doing absolutely anything."}, {"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "reply_to_user": {"reputation": 8010, "user_id": 10659910, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3zC2tMoc6PA/AAAAAAAAAAI/AAAAAAAAADg/n9BjRO9gFMo/photo.jpg?sz=128", "display_name": "William Miller", "link": "https://stackoverflow.com/users/10659910/william-miller"}, "edited": false, "score": 2, "creation_date": 1575504660, "post_id": 59186280, "comment_id": 104592936, "body": "@WilliamMiller, unless I&#39;m misreading, <code>data</code> is allocated as an array of 1 <code>unsigned char</code>. I think it should have been <code>new unsigned char[size]</code>"}, {"owner": {"reputation": 8010, "user_id": 10659910, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3zC2tMoc6PA/AAAAAAAAAAI/AAAAAAAAADg/n9BjRO9gFMo/photo.jpg?sz=128", "display_name": "William Miller", "link": "https://stackoverflow.com/users/10659910/william-miller"}, "reply_to_user": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1575504779, "post_id": 59186280, "comment_id": 104592960, "body": "@ChrisMM I totally missed that, I wonder if it&#39;s a typo"}, {"owner": {"reputation": 43, "user_id": 12482021, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iXGGa675M5E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdtMadlv40qAsOt4GjeqTUj15biaw/photo.jpg?sz=128", "display_name": "RBreight", "link": "https://stackoverflow.com/users/12482021/rbreight"}, "reply_to_user": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 1, "creation_date": 1575504879, "post_id": 59186280, "comment_id": 104592985, "body": "@ChrisMM that was a typo, thanks for pointing it out"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1575505085, "post_id": 59186280, "comment_id": 104593033, "body": "Thanks for cleaning that up, @RBreight . Unfortunately it&#39;s still Undefined Behaviour. You can view any object as an array of characters, but the reverse is not true. You can only convert an array of characters to another type if certain conditions are met, and in this case they probably aren&#39;t. Consider using <code>int width; memcpy(&amp;width, &amp;data[18], sizeof (width));</code> to ensure correct alignment  and praying that there are no endian issues."}, {"owner": {"reputation": 43, "user_id": 12482021, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iXGGa675M5E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdtMadlv40qAsOt4GjeqTUj15biaw/photo.jpg?sz=128", "display_name": "RBreight", "link": "https://stackoverflow.com/users/12482021/rbreight"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1575505344, "post_id": 59186280, "comment_id": 104593093, "body": "@user4581301 thanks for that explanation, I&#39;m confused why this works if it&#39;s undefined behavior? (it does get the correct value for width as far as i can tell)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 8010, "user_id": 10659910, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3zC2tMoc6PA/AAAAAAAAAAI/AAAAAAAAADg/n9BjRO9gFMo/photo.jpg?sz=128", "display_name": "William Miller", "link": "https://stackoverflow.com/users/10659910/william-miller"}, "edited": false, "score": 0, "creation_date": 1575505673, "post_id": 59186280, "comment_id": 104593179, "body": "Undefined Behaviour can work; it&#39;s just not guaranteed to or even be consistent. In this case the writer is making a bunch of assumptions about how the CPU works and what the CPU will let it get away with. Here they&#39;re probably only taking a small performance hit on the CPUs that will allow misaligned accesses. This code will, as @WilliamMiller hints at in his answer, fail hilariously on a system with a non-32 bit <code>int</code>. That makes <code>int32_t width; memcpy(&amp;width, &amp;data[18], sizeof (width));</code> a better idea than my previous suggestion. The size is fixed."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1575505700, "post_id": 59186280, "comment_id": 104593185, "body": "Undefined behavior can sometimes appear to work.  It&#39;s just not guaranteed."}, {"owner": {"reputation": 43, "user_id": 12482021, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iXGGa675M5E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdtMadlv40qAsOt4GjeqTUj15biaw/photo.jpg?sz=128", "display_name": "RBreight", "link": "https://stackoverflow.com/users/12482021/rbreight"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1575505950, "post_id": 59186280, "comment_id": 104593237, "body": "@user4581301 that makes more sense, so <code>int32_t width; memcp(&amp;width, &amp;data[18], sizeof(width));</code> is implementation agnostic but <code>*(int*)&amp;data[18]</code> will fail if <code>int</code> isn&#39;t 32 bits?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1575506846, "post_id": 59186280, "comment_id": 104593429, "body": "Yes, but <code>*(int*)&amp;data[18]</code> will also fail on CPUs that require a 32 bit number to be aligned to a 32 bit address (Some CPUs will allow mis-aligned data, but access it much more slowly). Assuming that <code>data</code> is aligned to whatever size data the CPU prefers (usually 32 or 64 bits) <code>data[18]</code> will not be because 18 is not evenly divisible by 4 (32 bits in bytes). It will also fail if the CPU is <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\">big endian</a> and the byte order is backwards."}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1575508351, "post_id": 59186280, "comment_id": 104593758, "body": "Off topic, but not quite: <a href=\"https://docs.microsoft.com/en-us/windows/win32/gdi/bitmap-storage\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/win32/gdi/bitmap-st&zwnj;&#8203;orage</a>."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575506055, "post_id": 59186318, "comment_id": 104593258, "body": "You should note that this cast is UB.  There is no integer there so synthesizing one is illegal."}, {"owner": {"reputation": 8010, "user_id": 10659910, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3zC2tMoc6PA/AAAAAAAAAAI/AAAAAAAAADg/n9BjRO9gFMo/photo.jpg?sz=128", "display_name": "William Miller", "link": "https://stackoverflow.com/users/10659910/william-miller"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575506286, "post_id": 59186318, "comment_id": 104593309, "body": "@NathanOliver-ReinstateMonica Good point, I&#39;m glad others noticed that"}], "tags": [], "owner": {"reputation": 8010, "user_id": 10659910, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3zC2tMoc6PA/AAAAAAAAAAI/AAAAAAAAADg/n9BjRO9gFMo/photo.jpg?sz=128", "display_name": "William Miller", "link": "https://stackoverflow.com/users/10659910/william-miller"}, "is_accepted": true, "score": 6, "last_activity_date": 1576105195, "last_edit_date": 1576105195, "creation_date": 1575504080, "answer_id": 59186318, "question_id": 59186280, "link": "https://stackoverflow.com/questions/59186280/what-is-intdata18-actually-doing-in-this-code/59186318#59186318", "title": "What is *(int*)&amp;data[18] actually doing in this code?", "body": "<blockquote>\n  <h2> Note </h2> \n  \n  <p>As <a href=\"https://stackoverflow.com/users/10686048/chrismm\">@user4581301</a> indicated in the comments, this depends on the implementation and will fail in many instances. And as <a href=\"https://stackoverflow.com/users/10686048/chrismm\">@NathanOliver- Reinstate Monica</a> and <a href=\"https://stackoverflow.com/users/10686048/chrismm\">@ChrisMM</a> pointed out this is Undefined Behavior and the result is not guaranteed.</p>\n</blockquote>\n\n<p>According to the <a href=\"https://en.wikipedia.org/wiki/BMP_file_format#DIB_header_(bitmap_information_header)\" rel=\"nofollow noreferrer\">bitmap header format</a>, the width of the bitmap in pixels is stored as a signed 32-bit integer beginning at byte offset 18. The syntax</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int width = *(int*)&amp;data[18];\n</code></pre>\n\n<p>reads bytes 19 through 22, inclusive (assuming a 32-bit <code>int</code>) and interprets the result as an integer. </p>\n\n<h2> How? </h2>\n\n<ul>\n<li><code>&amp;data[18]</code> gets the address of the <code>unsigned char</code> at index 18</li>\n<li><code>(int*)</code> casts the address from <code>unsigned char*</code> to <code>int*</code> to avoid <a href=\"https://stackoverflow.com/questions/12417378/cast-from-char-to-int-loses-precision/17082063#17082063\">loss of precision on 64 bit architectures</a></li>\n<li><code>*(int*)</code> dereferences the address to get the referred <code>int</code> value</li>\n</ul>\n\n<p>So basically, it takes the address of <code>data[18]</code> and reads the bytes at that address as if they were an integer. </p>\n\n<h2> Why doesn't a simple cast to `int` work? </h2>\n\n<p><code>sizeof(data[18])</code> is <code>1</code>, because <code>unsigned char</code> is one byte (<code>0</code>-<code>255</code>) but <code>sizeof(&amp;data[18])</code> is <code>4</code> if the system is 32-bit and <code>8</code> if it is 64-bit, this can be <a href=\"https://stackoverflow.com/questions/6751749/what-is-the-size-of-a-pointer\">larger (or even smaller for 16-bit systems)</a> but with the exception of 16-bit systems it should be at minimum <code>4</code> bytes. Obviously reading more than <code>4</code> bytes is not desired in this case, and the cast to <code>(int*)</code> and subsequent dereference to <code>int</code> yields <code>4</code> bytes, and indeed the 4 bytes between offsets 18 and 21, inclusive. A simple cast from <code>unsigned char</code> to <code>int</code> will also yield 4 bytes, but only one byte of the information from <code>data</code>. This is illustrated by the following example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;bitset&gt;\n\nint main() {\n    // Populate 18-21 with a recognizable pattern for demonstration\n    std::bitset&lt;8&gt; _bits(std::string(\"10011010\"));\n    unsigned long bits = _bits.to_ulong();\n    for (int ii = 18; ii &lt; 22; ii ++) {\n        data[ii] = static_cast&lt;unsigned char&gt;(bits);\n    }\n\n    std::cout &lt;&lt; \"data[18]                    -&gt; 1 byte  \" \n        &lt;&lt; std::bitset&lt;32&gt;(data[18]) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"*(unsigned short*)&amp;data[18] -&gt; 2 bytes \" \n        &lt;&lt; std::bitset&lt;32&gt;(*(unsigned short*)&amp;data[18]) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"*(int*)&amp;data[18]            -&gt; 4 bytes \" \n        &lt;&lt; std::bitset&lt;32&gt;(*(int*)&amp;data[18]) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>data[18]                    -&gt; 1 byte  00000000000000000000000010011010\n*(unsigned short*)&amp;data[18] -&gt; 2 bytes 00000000000000001001101010011010\n*(int*)&amp;data[18]            -&gt; 4 bytes 10011010100110101001101010011010\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 12482021, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iXGGa675M5E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdtMadlv40qAsOt4GjeqTUj15biaw/photo.jpg?sz=128", "display_name": "RBreight", "link": "https://stackoverflow.com/users/12482021/rbreight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 59186318, "answer_count": 1, "score": 4, "last_activity_date": 1576105195, "creation_date": 1575503826, "last_edit_date": 1575504844, "question_id": 59186280, "link": "https://stackoverflow.com/questions/59186280/what-is-intdata18-actually-doing-in-this-code", "title": "What is *(int*)&amp;data[18] actually doing in this code?", "body": "<p>I came across this syntax for reading a BMP file in C++ </p>\n\n<pre><code>#include &lt;fstream&gt;\nint main() {\n    std::ifstream in('filename.bmp', std::ifstream::binary);\n    in.seekg(0, in.end);\n    size = in.tellg();\n    in.seekg(0);\n    unsigned char * data = new unsigned char[size];\n    in.read((unsigned char *)data, size);\n\n    int width = *(int*)&amp;data[18];\n    // omitted remainder for minimal example\n}\n</code></pre>\n\n<p>and I don't understand what the line</p>\n\n<pre><code>int width = *(int*)&amp;data[18];\n</code></pre>\n\n<p>is actually doing. Why doesn't a simple cast from <code>unsigned char *</code> to <code>int</code>, <code>int width = (int)data[18];</code>, work?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1575504258, "post_id": 59186230, "comment_id": 104592838, "body": "<code>file</code> != <code>inFile</code>."}, {"owner": {"reputation": 45, "user_id": 12482767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6567a9f53a0ee9bb92af08b4af624fbd?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/12482767/ricardo"}, "reply_to_user": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1575504962, "post_id": 59186230, "comment_id": 104593001, "body": "for what part exactly?"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 12482767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6567a9f53a0ee9bb92af08b4af624fbd?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/12482767/ricardo"}, "edited": false, "score": 0, "creation_date": 1575505977, "post_id": 59186426, "comment_id": 104593245, "body": "Thank you very much it worked. Is there a possible way that you could do this without using the #include&lt;set&gt;. As i have not learned that in class yet"}, {"owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "reply_to_user": {"reputation": 45, "user_id": 12482767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6567a9f53a0ee9bb92af08b4af624fbd?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/12482767/ricardo"}, "edited": false, "score": 0, "creation_date": 1575506036, "post_id": 59186426, "comment_id": 104593251, "body": "Of course there is a way :-) What about <a href=\"https://coliru.stacked-crooked.com/a/e8c38f06bb446afa\" rel=\"nofollow noreferrer\">something like this</a>?"}, {"owner": {"reputation": 45, "user_id": 12482767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6567a9f53a0ee9bb92af08b4af624fbd?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/12482767/ricardo"}, "edited": false, "score": 0, "creation_date": 1575506715, "post_id": 59186426, "comment_id": 104593402, "body": "wow thank you so much it works, had me scared at first cause of the first program."}, {"owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "reply_to_user": {"reputation": 45, "user_id": 12482767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6567a9f53a0ee9bb92af08b4af624fbd?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/12482767/ricardo"}, "edited": false, "score": 0, "creation_date": 1575506808, "post_id": 59186426, "comment_id": 104593424, "body": "Glad I could help :-) Please, don&#39;t forget to mark the answer as a solution."}], "tags": [], "owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "is_accepted": true, "score": 1, "last_activity_date": 1575504954, "creation_date": 1575504954, "answer_id": 59186426, "question_id": 59186230, "link": "https://stackoverflow.com/questions/59186230/i-need-to-write-a-program-that-reads-a-file-which-will-output-all-unique-integer/59186426#59186426", "title": "I need to write a program that reads a file which will output all unique integers, if the integer has been seen already it will be dismissed", "body": "<p>In your <code>read_file()</code> function, you're passing an <code>fstream</code> instance of an already open file, which is correct, however, later in the same function, you declare a new instance of <code>fstream</code> called <code>inFile</code> which is not open and you're trying to read from this file stream.</p>\n\n<p>Remove the <code>fstream inFile</code> and read from the <code>file</code> which your function takes as an argument.</p>\n\n<p>Also, your algorithm is not correct - the first if statement condition will be always evaluated to false. You're assigning <code>number</code> to <code>number_hold</code> and then you're checking for their non-equality.</p>\n\n<p>As a solution, consider something like this:</p>\n\n<pre><code>void read_file(fstream &amp;file)\n{\n    set&lt;int&gt; arr; // storage for your unique numbers\n    while (!file.eof())\n    {\n        int number;\n        file &gt;&gt; number; // read the number\n\n        // check if this number is already in your unique list\n        if (arr.find(number) == arr.end()) { // If it isn't, print it out...\n            cout &lt;&lt; number &lt;&lt; endl;\n            arr.insert(number); // ...and put it to your unique list\n        }\n    }\n}\n</code></pre>\n\n<p>Note that for this to work you have to include another header file called <code>set</code></p>\n\n<pre><code>#include &lt;set&gt;\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 12482767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6567a9f53a0ee9bb92af08b4af624fbd?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/12482767/ricardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 59186426, "answer_count": 1, "score": 2, "last_activity_date": 1575504954, "creation_date": 1575503394, "last_edit_date": 1575504100, "question_id": 59186230, "link": "https://stackoverflow.com/questions/59186230/i-need-to-write-a-program-that-reads-a-file-which-will-output-all-unique-integer", "title": "I need to write a program that reads a file which will output all unique integers, if the integer has been seen already it will be dismissed", "body": "<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\nusing namespace std;\n\nvoid read_file(fstream &amp;file);\n\nint main()\n{\n    fstream inFile;\n    inFile.open(\"Data.txt\");\n    if (inFile.fail())\n    {\n        cerr &lt;&lt; \"Error with opening file\";\n        exit(1);\n    }\n    else\n    {\n        read_file(inFile);\n    }\n\n    inFile.close();\n\n    return 0;\n}\n\nvoid read_file(fstream &amp;file)\n{\n    int arr[100];\n    fstream inFile;\n    int number;\n    int number_trash;\n    int number_hold;\n\n    while (!inFile.eof())\n    {\n        for (int i = 0; i &lt; 101; i++)\n        {\n            inFile &gt;&gt; number;\n            number_hold = number;\n            if (number != number_hold)\n            {\n                arr[i] = number;\n                cout &lt;&lt; arr[i] &lt;&lt; endl;\n            }\n            else\n            {\n                number_trash = number;\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "dynamic", "return", "queue", "outputstream"], "comments": [{"owner": {"reputation": 5541, "user_id": 9967571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EwjwT.png?s=128&g=1", "display_name": "jignatius", "link": "https://stackoverflow.com/users/9967571/jignatius"}, "edited": false, "score": 0, "creation_date": 1575503881, "post_id": 59186158, "comment_id": 104592733, "body": "With <code>std::cout</code> the order of evaluation of arguments is unspecified. It doesn&#39;t have to be left to right."}, {"owner": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "edited": false, "score": 0, "creation_date": 1575503997, "post_id": 59186158, "comment_id": 104592763, "body": "Looks like dupe of <a href=\"https://stackoverflow.com/questions/7718508/order-of-evaluation-of-arguments-using-stdcout\">order of evaluations</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 1787151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c78ddbab629e2a3c06415187dcd39b?s=128&d=identicon&r=PG", "display_name": "Trenchie", "link": "https://stackoverflow.com/users/1787151/trenchie"}, "edited": false, "score": 0, "creation_date": 1575504764, "post_id": 59186247, "comment_id": 104592955, "body": "And your professor should <i>really</i> know this. If they&#39;re teaching C++, they should understand the stack. Like, this should have been REALLY obvious to him."}], "tags": [], "owner": {"reputation": 11, "user_id": 1787151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c78ddbab629e2a3c06415187dcd39b?s=128&d=identicon&r=PG", "display_name": "Trenchie", "link": "https://stackoverflow.com/users/1787151/trenchie"}, "is_accepted": false, "score": 0, "last_activity_date": 1575504656, "last_edit_date": 1592644375, "creation_date": 1575503511, "answer_id": 59186247, "question_id": 59186158, "link": "https://stackoverflow.com/questions/59186158/my-dynamically-linked-queue-improperly-outputs-three-return-functions-when-calle/59186247#59186247", "title": "My dynamically linked queue improperly outputs three return functions when called in the same output stream", "body": "<p>I'll give you a big hint: Your output is &quot;a m 4&quot;, not &quot;m a 4&quot;. The remainder of the answer is below...</p>\n<blockquote>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n</blockquote>\n<p>(edit: added more explanation)</p>\n<p>The cout is running the arguments right to left, because of the <strong>associativity</strong> of the <code>&lt;&lt;</code> operator. So it's getting the size, <em>then</em> getting the first item in the queue, <em>then</em> getting the next one. Even though the operator itself is Left-to-Right, in order to apply them in that order, it's evaluating the arguments right to left.</p>\n<p>Think of it this way, while it's required to apply the operators on the left before it applies the ones on the right, it's still evaluating the argument on the right of the operator before it evaluates the one on the left.</p>\n<p>This is fundamentally about how the stack works. It's loading the evaluation of the arguments and operators right to left so that it can apply the operators in the reverse order.</p>\n<p>Since the operators are all the same precedence, it's pushing the right most operand, then the right most operator, then that' operator's left operand, which is everything to the left.</p>\n<p>If your operators are L-R associative, that means that the operands are evaluated R-L before being operated on L-R.</p>\n<p>Just do</p>\n<pre><code>        cout &lt;&lt; q1.serve() &lt;&lt; &quot; &quot;;\n        cout &lt;&lt; q1.serve() &lt;&lt; &quot; &quot;;\n        cout &lt;&lt; q1.getSize() &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12482702, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j0mK0R3j6hI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rccQbyzsc61Yk87g9EWxddtD6gExw/photo.jpg?sz=128", "display_name": "Rice_N_Tuna23", "link": "https://stackoverflow.com/users/12482702/rice-n-tuna23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575666884, "creation_date": 1575502750, "last_edit_date": 1575666884, "question_id": 59186158, "link": "https://stackoverflow.com/questions/59186158/my-dynamically-linked-queue-improperly-outputs-three-return-functions-when-calle", "title": "My dynamically linked queue improperly outputs three return functions when called in the same output stream", "body": "<p>For an assignment I was tasked with creating a queue with linked lists. Our professor has given us the test code to insure the program is working properly and for grading. My serve function returns a character. However in the <code>main()</code>, the function is called twice within one <code>cout</code> statement, and it returns the character in incorrect order. The <code>getSize</code> function is also called, however it does not seem to do anything.</p>\n\n<pre><code>cout &lt;&lt; boolalpha;\nQueue q1 = Queue();\nq1.append('m');\nq1.append('a');\nq1.append('b');\nq1.append('b');\nq1.display();\ncout &lt;&lt; q1.serve() &lt;&lt; \" \" &lt;&lt; q1.serve() &lt;&lt; \" \" &lt;&lt; q1.getSize() &lt;&lt; endl;\n</code></pre>\n\n<p>the display outputs: m a b b. However the cout shows as: a m 4. This should obviously come out as: m a 2.</p>\n\n<p>If i separate the serve and the getSize functions, it works just fine, i.e. <code>cout &lt;&lt; q1.serve() &lt;&lt; \" \"; cout &lt;&lt; q1.serve() &lt;&lt; \" \"; cout &lt;&lt; q1.getSize() &lt;&lt; \" \";</code></p>\n\n<p>Below I have posted the code for the linked queue. I imagine I have made a mistake with my node pointers, however I have drawn pictures and re-written the code to no avail.\nI also apologize if Ive improperly formatted this as it is my first posting. Thank you.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nstruct Node {\n    char data;\n    Node* next;\n};\n\nclass Queue {\nprivate:\n    Node* front, * rear;\n    int size;\npublic:\n    Queue();\n    void append(char);\n    char serve();\n    bool isEmpty();\n    bool isFull();\n    int getSize();\n    void display();\n}; \n\nQueue::Queue() {\n    front = rear = nullptr;\n    size = 0;\n}\n\nvoid Queue::append(char v) {\n    Node* p = new Node;\n    p-&gt;data = v;\n    p-&gt;next = nullptr;\n    if (size == 0) {\n        front = rear = p;\n        size++;\n    }\n    else if (size == 1) {\n        front-&gt;next = p;\n        rear = p;\n        size++;\n    }\n    else {\n        rear-&gt;next = p;\n        rear = p;\n        size++;\n    }\n}\n\nchar Queue::serve() {\n    if (front != nullptr) {\n        Node* temp = front;\n        char v = temp-&gt;data;\n        front = front-&gt;next;\n        delete temp;\n        size--;\n        return v;\n    }\n}\n\nbool Queue::isEmpty() {\n    return size == 0;\n}\n\nbool Queue::isFull() {\n    return false;\n}\n\nint Queue::getSize() {\n    return size;\n}\n\nvoid Queue::display() {\n    Node* runner = front;\n    while (runner != nullptr) {\n        cout &lt;&lt; runner-&gt;data &lt;&lt; \" \";\n        runner = runner-&gt;next;\n    }\n    cout &lt;&lt; endl;\n}\n\nint main() {\n    cout &lt;&lt; boolalpha;\n    Queue q1 = Queue();\n    q1.append('m');\n    q1.append('a');\n    q1.append('b');\n    q1.append('b');\n    q1.display();\n    cout &lt;&lt; endl &lt;&lt; q1.isEmpty() &lt;&lt; \" \" &lt;&lt; q1.isFull() &lt;&lt; \" \" &lt;&lt; q1.getSize() &lt;&lt; endl;\n    cout &lt;&lt; q1.serve() &lt;&lt; \" \" &lt;&lt; q1.serve() &lt;&lt; \" \" &lt;&lt; q1.getSize() &lt;&lt; endl;\n    q1.display();\n    cout &lt;&lt; endl;\n\n    /*cout &lt;&lt; q1.isEmpty() &lt;&lt; \" \" &lt;&lt; q1.isFull() &lt;&lt; \" \" &lt;&lt; q1.getSize() &lt;&lt; endl;\n    char a = q1.serve(); char b = q1.serve();\n    cout &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b &lt;&lt; \" \" &lt;&lt; q1.getSize() &lt;&lt; endl;*/ \n}\n</code></pre>\n"}, {"tags": ["c++", "c++14", "constants", "constexpr"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1575506685, "post_id": 59186141, "comment_id": 104593395, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/50149036/what-is-the-use-of-a-constexpr-on-a-non-const-member-function\" title=\"what is the use of a constexpr on a non const member function\">stackoverflow.com/questions/50149036/&hellip;</a> ?"}, {"owner": {"reputation": 531, "user_id": 9175160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50715702ce5d4b4cfce091bdb2502a1d?s=128&d=identicon&r=PG&f=1", "display_name": "AnOccasionalCashew", "link": "https://stackoverflow.com/users/9175160/anoccasionalcashew"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1575506949, "post_id": 59186141, "comment_id": 104593455, "body": "@KamilCuk Yeah I just noticed that one, not sure how I missed it earlier. The accepted answer there doesn&#39;t make much sense to me, but the other one provides a prvalue based example. Would it be correct to say that prvalues can be mutated at compile time, but once assigned become constant?"}, {"owner": {"reputation": 531, "user_id": 9175160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50715702ce5d4b4cfce091bdb2502a1d?s=128&d=identicon&r=PG&f=1", "display_name": "AnOccasionalCashew", "link": "https://stackoverflow.com/users/9175160/anoccasionalcashew"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1575507644, "post_id": 59186141, "comment_id": 104593603, "body": "@KamilCuk After thinking about the accepted answer some more - would it be correct to say that, within a constexpr function, you might wish to create and mutate an object instance before returning it. However, you won&#39;t be able to call a non-constexpr function at compile time, so you&#39;ll need a non-const constexpr one in that scenario."}], "answers": [{"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1575513342, "post_id": 59187254, "comment_id": 104594743, "body": "Technically there&#39;s no object that &quot;becomes&quot; <code>constexpr</code>; every variable either is or isn&#39;t. (There&#39;s also no assignment happening here, just initialization which uses the <code>=</code> token.) In <code>constexpr Value v = Value{}.add(1);</code> there are two different <code>Value</code> objects: the temporary materialized from <code>Value{}</code> which is not <code>const</code>, so <code>add(int)</code> can be called, then the object <code>v</code> which is initialized from the <code>*this</code> expression in the return statement, so <code>v</code> is copy-initialized from the temporary."}], "tags": [], "owner": {"reputation": 531, "user_id": 9175160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50715702ce5d4b4cfce091bdb2502a1d?s=128&d=identicon&r=PG&f=1", "display_name": "AnOccasionalCashew", "link": "https://stackoverflow.com/users/9175160/anoccasionalcashew"}, "is_accepted": false, "score": 1, "last_activity_date": 1575512258, "creation_date": 1575512258, "answer_id": 59187254, "question_id": 59186141, "link": "https://stackoverflow.com/questions/59186141/usecase-for-non-const-constexpr-member-functions/59187254#59187254", "title": "Usecase for non-const constexpr member functions?", "body": "<p>It seems that I inadvertently duplicated <a href=\"https://stackoverflow.com/q/50149036\">this question</a> as well as <a href=\"https://stackoverflow.com/q/54575426\">this other one</a>. Based on their answers, there are (at least) two concrete scenarios in which a non-const constexpr member function is useful.</p>\n\n<ol>\n<li><p><strong>Mutation of temporaries.</strong> It is permissible to mutate a temporary value at compile time; it only becomes constant upon assignment.</p></li>\n<li><p><strong>Mutation of objects during function execution.</strong> While executing, a constexpr function might create an object instance and then mutate it via member functions. Those member functions can't be called at compile time unless they're constexpr, but they can't mutate the instance they're called against if they're const.</p></li>\n</ol>\n\n<pre><code>struct Value\n{\n    int i{};\n\n    constexpr Value add(int n)\n    {\n        this-&gt;i += n;\n        return *this;\n    }\n\n    constexpr Value add(Value other) const\n    {\n        Value ret{this-&gt;i};\n        ret.add(other.i); // call to non-const constexpr member\n        return ret;\n    }\n};\n\nint main()\n{\n    constexpr Value v = Value{}.add(1);\n    // v.add(1); // illegal\n    constexpr Value u = v.add(v);\n}\n</code></pre>\n"}], "owner": {"reputation": 531, "user_id": 9175160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50715702ce5d4b4cfce091bdb2502a1d?s=128&d=identicon&r=PG&f=1", "display_name": "AnOccasionalCashew", "link": "https://stackoverflow.com/users/9175160/anoccasionalcashew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1575512258, "creation_date": 1575502635, "question_id": 59186141, "link": "https://stackoverflow.com/questions/59186141/usecase-for-non-const-constexpr-member-functions", "title": "Usecase for non-const constexpr member functions?", "body": "<p>In C++14 and beyond, <code>constexpr</code> for member functions no longer implies <code>const</code>.</p>\n\n<pre><code>struct Value\n{\n    int i = 5;\n\n    constexpr bool not_five() // requires const to compile\n    {\n        return this-&gt;i != 5;\n    }\n};\n\nint main()\n{\n    constexpr Value v{6};\n    static_assert(v.not_five());\n}\n</code></pre>\n\n<pre><code>error: passing \u2018const Value\u2019 as \u2018this\u2019 argument discards qualifiers [-fpermissive]\n  static_assert(v.not_five());\n                           ^\n</code></pre>\n\n<p>It seems as though calling a non-const constexpr member function at compile time implies the mutation of a constant, since the object it's called against exists at compile time and is being mutated. Under what circumstances is the concept of a non-const constexpr member function useful?</p>\n"}, {"tags": ["c++", "memory", "heap", "new-operator", "delete-operator"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1575502733, "post_id": 59186127, "comment_id": 104592442, "body": "Unrelated: <i>I understand that by doing this the values are stored in the heap</i> It&#39;s better tio use the term Dynamic Memory rather than heap. Heap is a common implementation of Dynamic Memory, but a C++ implementation could instead use fairy dust for dynamic memory so long as the implementor could make it work."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1575502960, "post_id": 59186127, "comment_id": 104592504, "body": "Side note: <a href=\"https://stackoverflow.com/questions/6500313/why-should-c-programmers-minimize-use-of-new\">Why should C++ programmers minimize use of &#39;new&#39;?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 12298306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7159eea670b286be3f00f73e2962497e?s=128&d=identicon&r=PG&f=1", "display_name": "CSstudZ", "link": "https://stackoverflow.com/users/12298306/csstudz"}, "edited": false, "score": 0, "creation_date": 1575503143, "post_id": 59186178, "comment_id": 104592549, "body": "Yes! I forgot the * after Object. Thank you for your answer. Another question : is the address stored in the pointer myObject the address of the first attribute of the object I create?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1575503363, "post_id": 59186178, "comment_id": 104592608, "body": "Side note: <code>char * name = &quot;Aname&quot;;</code> is also illegal.  <code>&quot;Aname&quot;</code> is a <a href=\"https://en.cppreference.com/w/cpp/language/string_literal\" rel=\"nofollow noreferrer\">String Literal</a>, a constant array of characters, and cannot be assigned to a non-constant pointer without a non-Standard language extension that allows the assignment. This is often allowed for legacy reasons as it used to be quite common to assign string literals to <code>char *</code> in the old days. The bugs that resulted from trying to modify the constant string data through the non-<code>const</code> pointer were quite common, too."}, {"owner": {"reputation": 85, "user_id": 12298306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7159eea670b286be3f00f73e2962497e?s=128&d=identicon&r=PG&f=1", "display_name": "CSstudZ", "link": "https://stackoverflow.com/users/12298306/csstudz"}, "edited": false, "score": 0, "creation_date": 1575503581, "post_id": 59186178, "comment_id": 104592662, "body": "Thank you for you answers and sides notes. They are very helpful to a beginner like me!! To clarify my previous comment, I meant it in comparison to a pointer to an array for instance, that I know stores the adress of the first element of that array. Does that work as well for my object?  If a change the order in which I declare the attributes will it change where myObject points to?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 85, "user_id": 12298306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7159eea670b286be3f00f73e2962497e?s=128&d=identicon&r=PG&f=1", "display_name": "CSstudZ", "link": "https://stackoverflow.com/users/12298306/csstudz"}, "edited": false, "score": 1, "creation_date": 1575503717, "post_id": 59186178, "comment_id": 104592700, "body": "@CSstudZ yes, the memory address of an object is the same as the memory address of its 1st data member.  However, that data member may not be what you are expecting. For instance, in a class with virtual methods, the object pointer points at the object&#39;s <i>virtual method table</i>, which is created implicitly by the compiler, it does not point at any data member that you explicitly declared in the class."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1575503483, "last_edit_date": 1575503483, "creation_date": 1575502955, "answer_id": 59186178, "question_id": 59186127, "link": "https://stackoverflow.com/questions/59186127/memory-management-of-class-object-attributes-in-c/59186178#59186178", "title": "Memory management of class object attributes in C++", "body": "<p>The code you showed in your second example will not compile, because</p>\n\n<ul>\n<li><p><code>myObject</code> is not declared as a pointer</p></li>\n<li><p>in C++11 and later, a <em>non-const</em> <code>char*</code> pointer cannot point to a string literal.</p></li>\n</ul>\n\n<p>So you need this instead:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Object::Object(int param1, const char * param2) \n{\n  attr1 = param1; \n  attr2 = new char[strlen(param2)+1];\n  strcpy(attr2, param2); \n}\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>const char * name = \"Aname\";\nObject * myObject = new Object(3, name); // &lt;-- note the * !\n</code></pre>\n\n<p>That being said, the rest of your comments are correct.  Since <code>myObject</code> is being created with <code>new</code>, its data members reside in <em>dynamic memory</em> (ie, the heap), and you must call <code>delete myObject</code> to destroy it and free its memory when you are done using it.  And since you are <em>directly</em> allocating memory for <code>attr2</code> with <code>new[]</code>, you need to manually call <code>delete[] attr2</code> to free it.</p>\n\n<p>However, you are NOT <em>directly</em> allocating memory for <code>attr1</code> with <code>new</code>, so you DO NOT need to manually call <code>delete attr1</code>. The memory for <code>attr1</code> is managed by the compiler and will be released automatically when <code>myObject</code> is destroyed.</p>\n\n<p>In short, when something is allocated explicitly by a function/operator, it must be deallocated explicitly with a corresponding function/operator, eg:</p>\n\n<ul>\n<li><p>when something is explicitly allocated with the C++ <code>new</code> or <code>new[]</code> operator, it must be explicitly deallocated with the <code>delete</code> or <code>delete[]</code> operator, respectively.</p></li>\n<li><p>if something is explicitly allocated with the C runtime <code>(m|c|re)alloc()</code> funtion, it must be explicitly deallocated with the C runtime <code>free()</code> function.</p></li>\n<li><p>if something is explicitly allocated with the Win32 API <code>(Local|Global)Alloc()</code> or <code>(Local|Global)ReAlloc()</code> function, it must be explicitly deallocated with the Win32 API <code>(Local|Global)Free()</code> function.</p></li>\n<li><p>etc</p></li>\n</ul>\n"}], "owner": {"reputation": 85, "user_id": 12298306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7159eea670b286be3f00f73e2962497e?s=128&d=identicon&r=PG&f=1", "display_name": "CSstudZ", "link": "https://stackoverflow.com/users/12298306/csstudz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575503483, "creation_date": 1575502520, "question_id": 59186127, "link": "https://stackoverflow.com/questions/59186127/memory-management-of-class-object-attributes-in-c", "title": "Memory management of class object attributes in C++", "body": "<p>I'm sorry if this question was asked before. I searched the internet but couldn't find any clear answer.</p>\n\n<p>Here is the issue :</p>\n\n<p>Let's say I have a public class called Object that has 2 attributes. One is <code>int attr1</code> and the other one is <code>char * attr2</code>. The constructor is (I have a header file) :</p>\n\n<pre><code>Object::Object(int param1, char * param2) \n{\n  attr1=param1; \n  attr2 = new char[strlen(param2)+1]; // I understand that by doing this the values are stored in the heap\n  strcpy(attr2, param2); \n}\n</code></pre>\n\n<p>I understand that in the destructor of the class Object I need to write <code>delete [] attr2</code>.</p>\n\n<p>In another file, main.cpp I create a new object this way :</p>\n\n<pre><code>char * name = \"Aname\";\nObject myObject = new Object(3, name);\n</code></pre>\n\n<p>From what I've understood, whenever <code>new</code> is used, the value is stored in the heap. Therefore a <code>delete</code> is necessary in order to avoid memory leaks.\nHere I have used the <code>new</code> operator to create an Object. Therefore myObject is a pointer to an Object stored in the heap. I will need to do this : <code>delete myObject</code> when I will no longer need it.</p>\n\n<p>So this is my question : since the object that myObject points to is stored in the heap, does that mean that all it's attributes are stored in the heap (including <code>attr1</code> which is simply an int) ?\nIf so, how come I don't have to free it as well (meaning use the operator <code>delete</code> for it in the destructor) ?</p>\n\n<p>Thank you for you help!</p>\n\n<p>Note : english is not my first language, sorry for the mistakes.</p>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1575501719, "post_id": 59185973, "comment_id": 104592132, "body": "You can.  <code>*p</code> or <code>p[0]</code>.  <code>*(p+1)</code> or <code>p[1]</code>.  Et cetera."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1575502037, "post_id": 59185973, "comment_id": 104592220, "body": "<code>p[index]</code> is the same as <code>*(p+index)</code>, so <code>*p</code> works just fine whether you use <code>new int</code> or <code>new int[size_array]</code>, just note that in the second case it only accesses the 1st element in the array, unless <code>p</code> is updated to point at another element. Which you shouldn&#39;t do, use a separate pointer for that, if needed."}], "answers": [{"tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": true, "score": 5, "last_activity_date": 1575531378, "last_edit_date": 1575531378, "creation_date": 1575501723, "answer_id": 59186006, "question_id": 59185973, "link": "https://stackoverflow.com/questions/59185973/accessing-value-of-array-using-pointers/59186006#59186006", "title": "Accessing value of array using pointers", "body": "<p><code>p[0]</code> is syntax sugar (for arrays) for:</p>\n\n<pre><code>*(p + 0)\n</code></pre>\n\n<p>Which is equivalent to:</p>\n\n<pre><code>*p\n</code></pre>\n\n<hr>\n\n<p><code>*p[0]</code> does not work because it is equivalent to:</p>\n\n<pre><code>**p\n</code></pre>\n\n<p>In other words, de-referencing the pointer/array twice.</p>\n"}], "owner": {"reputation": 45, "user_id": 12433215, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N8SqZ9ddvRo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3relEcJlOqjLwILsuxq79FzNH0QVaA/photo.jpg?sz=128", "display_name": "AAAA", "link": "https://stackoverflow.com/users/12433215/aaaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 59186006, "answer_count": 1, "score": 2, "last_activity_date": 1575531378, "creation_date": 1575501508, "last_edit_date": 1575501926, "question_id": 59185973, "link": "https://stackoverflow.com/questions/59185973/accessing-value-of-array-using-pointers", "title": "Accessing value of array using pointers", "body": "<p>We know that we can dynamically create variables using pointers as for example:</p>\n\n<pre><code>int *p = new int(5);\n</code></pre>\n\n<p>We can access its value using <code>*</code> as</p>\n\n<pre><code>cout &lt;&lt; *p;\n</code></pre>\n\n<p>But this is not the case of the array, consider the below code:</p>\n\n<pre><code>int size_array = 5;\nint * p = new int[size_array];\n</code></pre>\n\n<p>if we need to access the value of the first element, we do the following:</p>\n\n<pre><code>cout &lt;&lt; p[0];\n</code></pre>\n\n<p>but why we can't do the same as for a dynamic variable like above?, i.e. using <code>*</code>:</p>\n\n<pre><code>cout &lt;&lt; *p[0];\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 4, "creation_date": 1575501326, "post_id": 59185903, "comment_id": 104592036, "body": "Must be an assignment due today, second question about this today. Anyway, <code>examchoice1 &gt;&gt; examarray[n]</code> is not how you do assignments. <code>&gt;&gt;</code> is used to read from <code>istream</code> objects. You want <code>=</code>, and the other way around."}, {"owner": {"reputation": 17, "user_id": 12427562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3825489fd64c8cec62beb51e8be99139?s=128&d=identicon&r=PG&f=1", "display_name": "Cant_Focus", "link": "https://stackoverflow.com/users/12427562/cant-focus"}, "reply_to_user": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1575502688, "post_id": 59185903, "comment_id": 104592432, "body": "Thank you ChrisMM!"}], "owner": {"reputation": 17, "user_id": 12427562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3825489fd64c8cec62beb51e8be99139?s=128&d=identicon&r=PG&f=1", "display_name": "Cant_Focus", "link": "https://stackoverflow.com/users/12427562/cant-focus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575501000, "creation_date": 1575501000, "question_id": 59185903, "link": "https://stackoverflow.com/questions/59185903/reading-grades-from-text-file-into-an-array-c", "title": "Reading grades from text file into an array C++", "body": "<p>So I have a text document that holds the data</p>\n\n<p>StudentID grade1 grade2 grade3</p>\n\n<p>1234        80     90    100</p>\n\n<p>2000        12     24     36</p>\n\n<p>3000        13     85     97</p>\n\n<p>How can I store only the grade1 numbers into an array to use for manipulation such as finding averages?</p>\n\n<p>Here is the code I have so far.</p>\n\n<pre><code>string fileName = \"grades.txt\";\nifstream fin;\nfin.open(fileName);\nif (!fin)\n{\n    cout &lt;&lt; fileName &lt;&lt; \" is not found. \" &lt;&lt; endl;\n    system(\"pause\");\n    exit(0);\n}\n\n\nint examnum;\nint examchoice1;\nint n = 0;\nint examarray[3];\ndouble exam1;\ndouble exam2;\ndouble exam3;\n\n//double average = 0;\n\ncout &lt;&lt; \"Which exam would you like to view statistics of?: \";\ncin &gt;&gt; examnum;\nwhile (examnum &lt; 1 || examnum &gt; 3)\n{\n    cout &lt;&lt; \"Please enter a valid exam to view: \";\n    cin &gt;&gt; examnum;\n}\n\nif (examnum == 1) \n{\n        while (fin &gt;&gt; studentID &gt;&gt; examchoice1 &gt;&gt; exam2\n            &gt;&gt; exam3)\n        {\n            examchoice1 &gt;&gt; examarray[n];\n            n++;\n        }\n\n\n}\nfin.close();\n</code></pre>\n"}, {"tags": ["c++", "cmake", "visual-studio-2019", "clang-tidy"], "answers": [{"tags": [], "owner": {"reputation": 416, "user_id": 10291440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bp4ZW.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/10291440/bryan"}, "is_accepted": false, "score": 2, "last_activity_date": 1575501671, "last_edit_date": 1575501671, "creation_date": 1575501377, "answer_id": 59185953, "question_id": 59185859, "link": "https://stackoverflow.com/questions/59185859/how-to-enable-clang-tidy-in-cmakelists-txt-for-visual-studio-2019/59185953#59185953", "title": "How to enable clang-tidy in CMakeLists.txt for Visual Studio 2019?", "body": "<p>That is not supported at the moment for <code>CMakeLists.txt</code>:</p>\n\n<blockquote>\n  <p>We do not currently support configuration via the <code>CMAKE_&lt;LANG&gt;_CLANG_TIDY</code>  variable in CMakeLists.txt in the IDE.  </p>\n</blockquote>\n\n<p><a href=\"https://devblogs.microsoft.com/cppblog/code-analysis-with-clang-tidy-in-visual-studio/\" rel=\"nofollow noreferrer\">https://devblogs.microsoft.com/cppblog/code-analysis-with-clang-tidy-in-visual-studio/</a></p>\n"}], "owner": {"reputation": 333, "user_id": 1507435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/485be57df7f93fea0e818de6b90f9cd3?s=128&d=identicon&r=PG", "display_name": "user1507435", "link": "https://stackoverflow.com/users/1507435/user1507435"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1575501671, "creation_date": 1575500730, "question_id": 59185859, "link": "https://stackoverflow.com/questions/59185859/how-to-enable-clang-tidy-in-cmakelists-txt-for-visual-studio-2019", "title": "How to enable clang-tidy in CMakeLists.txt for Visual Studio 2019?", "body": "<p>Visual Studio 2019 <a href=\"https://docs.microsoft.com/en-us/visualstudio/code-quality/clang-tidy?view\" rel=\"nofollow noreferrer\">documentation</a> only talks about changing <code>CMakeSettings.json</code> to enable <code>clang-tidy</code> analysis for a project. How can I do the same in <code>CMakeLists.txt</code>?</p>\n"}, {"tags": ["c++", "priority-queue"], "answers": [{"comments": [{"owner": {"reputation": 7323, "user_id": 4960953, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d6e55bc6aef94acc340d142f9f8aded?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail_Sam", "link": "https://stackoverflow.com/users/4960953/mikhail-sam"}, "edited": false, "score": 0, "creation_date": 1575501185, "post_id": 59185910, "comment_id": 104591996, "body": "can I add <code>Comparator</code> into my <code>Node</code> struct? and use it in typedef? Or I need to create new one?"}, {"owner": {"reputation": 805, "user_id": 7908019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wBTC1gSxMPU/AAAAAAAAAAI/AAAAAAAAABY/85JVWoAxQI0/photo.jpg?sz=128", "display_name": "Gerard097", "link": "https://stackoverflow.com/users/7908019/gerard097"}, "reply_to_user": {"reputation": 7323, "user_id": 4960953, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d6e55bc6aef94acc340d142f9f8aded?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail_Sam", "link": "https://stackoverflow.com/users/4960953/mikhail-sam"}, "edited": false, "score": 0, "creation_date": 1575501263, "post_id": 59185910, "comment_id": 104592016, "body": "Yeah there is no problem with that"}, {"owner": {"reputation": 7323, "user_id": 4960953, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d6e55bc6aef94acc340d142f9f8aded?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail_Sam", "link": "https://stackoverflow.com/users/4960953/mikhail-sam"}, "edited": false, "score": 0, "creation_date": 1575501321, "post_id": 59185910, "comment_id": 104592033, "body": "can you show the example please? I can&#39;t figure out how to add - tried as struct method, but still doesn&#39;t work :("}, {"owner": {"reputation": 7323, "user_id": 4960953, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d6e55bc6aef94acc340d142f9f8aded?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail_Sam", "link": "https://stackoverflow.com/users/4960953/mikhail-sam"}, "edited": false, "score": 0, "creation_date": 1575502109, "post_id": 59185910, "comment_id": 104592239, "body": "Awesome! It works! I already voted your answer! But I have one more question - don&#39;t know is it ok to ask here again... Look at my addition to the question please."}, {"owner": {"reputation": 7323, "user_id": 4960953, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d6e55bc6aef94acc340d142f9f8aded?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail_Sam", "link": "https://stackoverflow.com/users/4960953/mikhail-sam"}, "edited": false, "score": 0, "creation_date": 1575502905, "post_id": 59185910, "comment_id": 104592492, "body": "Ohh, looks like this was typo :)"}], "tags": [], "owner": {"reputation": 805, "user_id": 7908019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wBTC1gSxMPU/AAAAAAAAAAI/AAAAAAAAABY/85JVWoAxQI0/photo.jpg?sz=128", "display_name": "Gerard097", "link": "https://stackoverflow.com/users/7908019/gerard097"}, "is_accepted": true, "score": 2, "last_activity_date": 1575502206, "last_edit_date": 1575502206, "creation_date": 1575501030, "answer_id": 59185910, "question_id": 59185826, "link": "https://stackoverflow.com/questions/59185826/create-priority-queue-using-struct-and-map/59185910#59185910", "title": "Create priority_queue using struct and map", "body": "<p>priority_queue template parameter doesn't expect a function but instead an object Type</p>\n\n<pre><code>template &lt;class T, class Container = vector&lt;T&gt;,\n  class Compare = less&lt;typename Container::value_type&gt; &gt; class priority_queue;\n</code></pre>\n\n<p>so just wrap that function into a struct/class (Functor) and that should work.</p>\n\n<pre><code>struct Comparator\n{\n  bool operator()(const Node* first, const Node* second) const {\n    return first-&gt;freq &gt; second-&gt;freq;\n  }\n};\n\ntypedef std::priority_queue&lt;Node*,\n                            std::vector&lt;Node*&gt;,\n                            Comparator&gt; my_queue;\n</code></pre>\n\n<p>If you want the Comparator inside the Node struct just make an inner struct</p>\n\n<pre><code>struct Node {\n    unsigned char symbol;\n    unsigned int freq;\n    Node* left;\n    Node* right;\n\n    Node(unsigned char _byte, int _freq)\n        : symbol(_byte), freq(_freq), left(nullptr), right(nullptr) {};\n\n    struct Comparator\n    {\n      bool operator()(const Node* first, const Node* second) const {\n        return first-&gt;freq &gt; second-&gt;freq;\n      }\n    };\n};\n\ntypedef std::priority_queue&lt;Node*,\n                            std::vector&lt;Node*&gt;,\n                            Node::Comparator&gt; my_queue;\n\nmy_queue queue(node_vect.begin(), node_vect.end());\n</code></pre>\n"}], "owner": {"reputation": 7323, "user_id": 4960953, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6d6e55bc6aef94acc340d142f9f8aded?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail_Sam", "link": "https://stackoverflow.com/users/4960953/mikhail-sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 59185910, "answer_count": 1, "score": 0, "last_activity_date": 1575502206, "creation_date": 1575500503, "last_edit_date": 1575502169, "question_id": 59185826, "link": "https://stackoverflow.com/questions/59185826/create-priority-queue-using-struct-and-map", "title": "Create priority_queue using struct and map", "body": "<p>I have struct:</p>\n\n<pre><code>struct Node {\n    unsigned char symbol;\n    unsigned int freq;\n    Node* left;\n    Node* right;\n\n    Node(unsigned char _byte, int _freq)\n        : symbol(_byte), freq(_freq), left(nullptr), right(nullptr) {};\n};\n</code></pre>\n\n<p>and already created such <code>unordered_map</code>:</p>\n\n<pre><code>std::unordered_map&lt;unsigned char, uint&gt; freqs ={{'a',12}, {'b',122}};\n</code></pre>\n\n<p>What I want to do - is to create <code>priority_queue</code> the next way:</p>\n\n<ol>\n<li>Create new Node for every pair from <code>freqs</code></li>\n<li>Create <code>priority_queue</code> from all of this <code>Node</code>s.</li>\n</ol>\n\n<p>What I tried so far:\ncreate vector from map and try to create priority_queue:</p>\n\n<pre><code>bool nodeCompare(const Node* first, const Node* second){\n    return first-&gt;freq &gt; second-&gt;freq;\n}\n\ntypedef std::priority_queue&lt;Node*,\n                            std::vector&lt;Node*&gt;,\n                            nodeCompare()&gt; my_queue;\n\nstd::vector&lt;Node*&gt; node_vect;\nstd::unordered_map&lt;byte, uint&gt;::iterator it;\nfor (it = freqs.begin(); it != freqs.end(); ++it)\n{\n    Node* new_node = new Node(it-&gt;first, it-&gt;second);\n    node_vect.push_back(new_node);\n}\nmy_queue(node_vect.begin(), node_vect.end(), nodeCompare);\n</code></pre>\n\n<p>But this doesn't work: error in <code>typedef</code> construction:</p>\n\n<blockquote>\n  <p>function \"nodeCompare\" is not a type name</p>\n</blockquote>\n\n<p><strong>Additional question:</strong>\nif I create my vector in this way, maybe there is some method to push Nodes into my_queue without creating additional vector?</p>\n\n<pre><code>my_queue q;\nstd::vector&lt;Node*&gt; node_vect;\nstd::unordered_map&lt;byte, uint&gt;::iterator it;\nfor (it = freqs.begin(); it != freqs.end(); ++it)\n{\n    Node* new_node = new Node(it-&gt;first, it-&gt;second);\n    node_vect.push_back(new_node);\n    //q.push(new_node); this doesn't work\n}\n</code></pre>\n"}, {"tags": ["c++", "arduino", "arduino-c++"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 12442132, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBMk7p40JrXm0jK71scy3evx_Q3aKsHeiuVab8P3w=k-s128", "display_name": "Jack W", "link": "https://stackoverflow.com/users/12442132/jack-w"}, "edited": false, "score": 0, "creation_date": 1575501443, "post_id": 59185695, "comment_id": 104592071, "body": "Thanks so much! Works great!"}], "tags": [], "owner": {"reputation": 354, "user_id": 12476310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5600671f867be17bed062203133755df?s=128&d=identicon&r=PG&f=1", "display_name": "cischa", "link": "https://stackoverflow.com/users/12476310/cischa"}, "is_accepted": true, "score": 3, "last_activity_date": 1575499841, "last_edit_date": 1575499841, "creation_date": 1575499677, "answer_id": 59185695, "question_id": 59185654, "link": "https://stackoverflow.com/questions/59185654/trying-to-make-an-if-statement-that-checks-if-a-string-contains-a-character-usin/59185695#59185695", "title": "Trying to make an if statement that checks if a string contains a character using indexOf. Having a little bit of trouble", "body": "<p>If <code>X</code> is found, <code>indexOf()</code> will return its index. If it is found at index 0, your <code>if</code> statement will evaluate to false. Likewise, if <code>X</code> is not found, <code>indexOf()</code> will return <code>-1</code>, which your <code>if</code> statement will evaluate as true. To check if <code>X</code> exists in <code>serialData</code>, you need to check if <code>indexOf()</code> does not return <code>-1</code>:</p>\n\n<pre><code>if (serialData.indexOf('X') != -1)\n</code></pre>\n\n<p>See the <a href=\"https://www.arduino.cc/reference/en/language/variables/data-types/string/functions/indexof/\" rel=\"nofollow noreferrer\"><code>indexOf()</code> documentation</a> for more information.</p>\n"}], "owner": {"reputation": 23, "user_id": 12442132, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBMk7p40JrXm0jK71scy3evx_Q3aKsHeiuVab8P3w=k-s128", "display_name": "Jack W", "link": "https://stackoverflow.com/users/12442132/jack-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 59185695, "answer_count": 1, "score": 0, "last_activity_date": 1575499841, "creation_date": 1575499440, "question_id": 59185654, "link": "https://stackoverflow.com/questions/59185654/trying-to-make-an-if-statement-that-checks-if-a-string-contains-a-character-usin", "title": "Trying to make an if statement that checks if a string contains a character using indexOf. Having a little bit of trouble", "body": "<p>I want it to be where if the string contains a certain character it would do one thing. For example if <code>Serial.readString();</code> reads X100Y100 then I want to check if it contains an X or not. What I have so far is:</p>\n\n<pre><code>void serialEvent() {\n    serialData = Serial.readString();\n    if (serialData.indexOf('X')) {\n        serX.write(parseDataX(serialData));\n    } else {\n    // Doesnt contain the character X\n    }\n}\n</code></pre>\n\n<p>Would this work?</p>\n"}, {"tags": ["c++", "geometry", "2d", "line", "collision"], "comments": [{"owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "edited": false, "score": 3, "creation_date": 1575499075, "post_id": 59185564, "comment_id": 104591421, "body": "Hello and welcome to StackOverflow. Please, read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. Have you at least tried Googling <code>line circle intersection</code>? It yields a ton of results for me."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "edited": false, "score": 1, "creation_date": 1575499294, "post_id": 59185564, "comment_id": 104591497, "body": "@ProXicT <a href=\"https://stackoverflow.com/conduct\">Be Nice</a>. I can speak from personal experience that trying to google stuff like this usually gets me directed to the Is-This-Even-Written-In-A-Language-That-Exists-On-Earth sites like the math-heavy side of Wikipedia or Wolfram Alpha, which are next-to-useless for anyone who isn&#39;t actively working on a degree in formal mathematics. If there&#39;s already a question here dealing with this issue, we can tag it as a duplicate; if not, I think there&#39;s enough information to answer it."}, {"owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 1, "creation_date": 1575500735, "post_id": 59185564, "comment_id": 104591891, "body": "@Xirema Usually, when someone is trying to write a game engine of some sort, they need to learn at least some math and they will definitely come across sites which are math-heavy. But I see your point and because I very well remember being in OP&#39;s shoes, I&#39;ll try to write up an answer for him."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1575504256, "post_id": 59185564, "comment_id": 104592835, "body": "The other downside of googling when you don&#39;t really know what you are looking for is <a href=\"https://en.wikipedia.org/wiki/Sturgeon%27s_law\" rel=\"nofollow noreferrer\">Sturgeon&#39;s Revelation</a>. Since the Internet is approximately 90% crud, we can infer that the vast majority of tutorials and code samples one finds will be crud. You already have to have some idea of what you need in order to distinguish the good information from the stuff that&#39;ll lead you down rabbit holes or make you a worse programmer."}], "answers": [{"tags": [], "owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "is_accepted": false, "score": 1, "last_activity_date": 1575501296, "creation_date": 1575501296, "answer_id": 59185938, "question_id": 59185564, "link": "https://stackoverflow.com/questions/59185564/2d-game-how-ai-enemy-knows-that-there-is-a-barrier-between-them-and-player/59185938#59185938", "title": "2D game - how AI enemy knows that there is a barrier between them and player", "body": "<p>This is a very basic line-circle intersection algorithm based on a simple trigonometry:</p>\n\n<pre><code>bool lineCircleIntersection(const Line&amp; line, const Circle&amp; circle) {\n      const float dx = line.end.x - line.start.x;\n      const float dy = line.end.y - line.start.y;\n      const float a = dx * dx + dy * dy;\n      const float b = 2 * (dx * (line.start.x - circle.origin.x) + dy * (line.start.y - circle.origin.y));\n      float c = circle.origin.x * circle.origin.x + circle.origin.y * circle.origin.y;\n      c += line.start.x * line.start.x + line.start.y * line.start.y;\n      c -= 2 * (circle.origin.x * line.start.x + circle.origin.y * line.start.y);\n      c -= circle.radius * circle.radius;\n      return (b * b - 4 * a * c) &gt;= 0;\n}\n</code></pre>\n\n<p><a href=\"https://coliru.stacked-crooked.com/a/63aa7a25af7aa757\" rel=\"nofollow noreferrer\">LIVE DEMO</a></p>\n"}], "owner": {"reputation": 1, "user_id": 12482551, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCL_5sBFQv1QtwLR4kL6Fq0nIT7bd963ryvPej5vg=k-s128", "display_name": "Marty K", "link": "https://stackoverflow.com/users/12482551/marty-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1575501296, "creation_date": 1575498798, "question_id": 59185564, "link": "https://stackoverflow.com/questions/59185564/2d-game-how-ai-enemy-knows-that-there-is-a-barrier-between-them-and-player", "title": "2D game - how AI enemy knows that there is a barrier between them and player", "body": "<p>I have the enemy at position x1,y1 and the player at x2,y2. For the houses (the barriers) I use the collision circles, e.g. x3,y3,r.</p>\n\n<p>How can I check that enemy sees player and is able to aim and fire? So, I am looking for algoritm for test that line x1,y1-x2,y2 touches the circle or not.</p>\n\n<p>Thank you for your advice! :)</p>\n"}, {"tags": ["c++", "arrays", "sorting"], "comments": [{"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 5, "creation_date": 1575498730, "post_id": 59185500, "comment_id": 104591317, "body": "How did you debug your code? Where did the behavior of your differ from your expectation? Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Remove everything unnecessary."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 1, "creation_date": 1575498929, "post_id": 59185500, "comment_id": 104591380, "body": "Why do you load the data twice?"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1575499275, "post_id": 59185500, "comment_id": 104591489, "body": "Did you try to use <code>std::sort</code> instead of your sort implementation? Why do you pass an empty title or name to the sort functions? You don&#39;t use it."}, {"owner": {"reputation": 1, "user_id": 12283271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCKVbr3nx93URNSa4qklhibHLG-jy0PsZaxIhi2Og=k-s128", "display_name": "Mewgamez", "link": "https://stackoverflow.com/users/12283271/mewgamez"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 1, "creation_date": 1575502871, "post_id": 59185500, "comment_id": 104592483, "body": "I used breakpoints in visual studio to debug my code, commenting out lines of code, and running the program to determine where I was having problems with my code. Where the behavior differed from my expectation was getting the program to display the list of books sorted alphabetically by its title. The first entry in the array in my output was a set of parenthesis."}, {"owner": {"reputation": 1, "user_id": 12283271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCKVbr3nx93URNSa4qklhibHLG-jy0PsZaxIhi2Og=k-s128", "display_name": "Mewgamez", "link": "https://stackoverflow.com/users/12283271/mewgamez"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1575503737, "post_id": 59185500, "comment_id": 104592705, "body": "I loaded the code twice because the first time was to actually load the data, the second time was to set it to count so the sort functions could find the positions of the array elements and sort them alphabetically based on if the function is sorting the title or author."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1575532230, "post_id": 59185500, "comment_id": 104600170, "body": "The second call to the load function will do exactly the same. You can remove the first <code>loadData();</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12283271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCKVbr3nx93URNSa4qklhibHLG-jy0PsZaxIhi2Og=k-s128", "display_name": "Mewgamez", "link": "https://stackoverflow.com/users/12283271/mewgamez"}, "edited": false, "score": 1, "creation_date": 1575508998, "post_id": 59186098, "comment_id": 104593893, "body": "Thank you! I got the array to populate fully after changing the starting point."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1575532439, "post_id": 59186098, "comment_id": 104600241, "body": "Could you explain why the book array starts from 1? In <code>loadData</code> <code>count</code> starts with 0"}, {"owner": {"reputation": 68, "user_id": 10218609, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yUXIKgThSDo/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7p8oZXoK8Ky0PJePWKKYbULz-tVSA/mo/photo.jpg?sz=128", "display_name": "Sam Black", "link": "https://stackoverflow.com/users/10218609/sam-black"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1575536426, "post_id": 59186098, "comment_id": 104601949, "body": "@ThomasSablik It&#39;s because during his <code>sortByTitle()</code> he is doing j + 1 without checking if j goes outside the array, it does so once so it places an empty string to the front of the array.  The reason he doesn&#39;t go out of bounds is because he&#39;s set the size of the array to 1000."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1575536563, "post_id": 59186098, "comment_id": 104602007, "body": "So probably the sort function should be fixed instead of the loop index"}], "tags": [], "owner": {"reputation": 68, "user_id": 10218609, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yUXIKgThSDo/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7p8oZXoK8Ky0PJePWKKYbULz-tVSA/mo/photo.jpg?sz=128", "display_name": "Sam Black", "link": "https://stackoverflow.com/users/10218609/sam-black"}, "is_accepted": true, "score": 0, "last_activity_date": 1575502555, "last_edit_date": 1575502555, "creation_date": 1575502240, "answer_id": 59186098, "question_id": 59185500, "link": "https://stackoverflow.com/questions/59185500/missing-array-element-issue/59186098#59186098", "title": "Missing array element issue", "body": "<p>You were starting your loop from 0 inside your <code>showAll()</code> method when your books array starts from 1, just start the loop from 1 and go to count + 1</p>\n\n<pre><code>for (int i = 1; i &lt; count + 1; i++)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "is_accepted": false, "score": 0, "last_activity_date": 1575545717, "last_edit_date": 1575545717, "creation_date": 1575541987, "answer_id": 59193186, "question_id": 59185500, "link": "https://stackoverflow.com/questions/59185500/missing-array-element-issue/59193186#59193186", "title": "Missing array element issue", "body": "<p>Your sort function doesn't work correctly. It's off by one and moves an empty element to the first index. It would cause undefined behavior if your array were full. Your sort function sorts all elements from 0 to <code>count</code> but it should sort from 0 to <code>count - 1</code>. You should fix your sort function (<code>std::sort</code> usually is faster than bubble sort):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\n// structure\nstruct Book {\n    string title;\n    string author;\n};\n\nconst int ARRAY_SIZE = 1000;\nBook books[ARRAY_SIZE];\nstring pathName;\nifstream lib;\n\n// global variables\nint loadData();\nvoid showAll(int count);\nvoid sortByTitle(int count, string title);\n\n\nint main()\n{\n    // initialised variables\n    int count = 0;\n    char selector = 'q', yesNoAnswer = 'n';\n    string name;\n    string title;\n\n    // asks user for file pathname\n    cout &lt;&lt; \"Welcome to Tommy's Library Database.\" &lt;&lt; endl;\n    cout &lt;&lt; \"Please enter the name of the file: \";\n    getline(cin, pathName);\n    loadData();\n    count = loadData();\n    cout &lt;&lt; count &lt;&lt; \" Records loaded successfully.\" &lt;&lt; endl;\n    // Switch case menu\n    do {\n        cout &lt;&lt; endl &lt;&lt; \"Please enter a keyword that corresponds to the list of options: \" &lt;&lt; endl;\n        cout &lt;&lt; \" Search by: (A)uthor, (T)itle, (S)how All, (Q)uit Program: \";\n        cin &gt;&gt; selector;\n        selector = toupper(selector);\n        switch (selector)\n        {\n        case 'S':\n            sortByTitle(count, title);\n            if (count &lt;= 0) {\n                cout &lt;&lt; \" No counts found! \" &lt;&lt; endl;\n            }\n            else {\n                showAll(count);\n            }\n            break;\n        }\n    }\n    while (selector != 'q' &amp;&amp; selector != 'Q');\n    return 0;\n}\n\nint loadData()\n{\n    int count = 0;\n    int i = 0;\n\n    lib.open(pathName);\n    ifstream lib(pathName);\n\n    if (!lib)\n    {\n        cout &lt;&lt; \" Unable to open file path! \" &lt;&lt; endl;\n        return -1;\n    }\n    while (!lib.eof())\n    {\n        getline(lib, books[count].title);\n        getline(lib, books[count].author);\n        count++;\n    }\n    return count;\n}\n// displays all book titles beside the author names\nvoid showAll(int count)\n{\n    for (int i = 0; i &lt; count; i++)\n    {\n        cout &lt;&lt; books[i].title &lt;&lt; \" \" &lt;&lt; \"(\" &lt;&lt; books[i].author &lt;&lt; \")\" &lt;&lt; endl;\n    }\n}\n// Sorts by book title.\nvoid sortByTitle(int count, string title) {\n    std::sort(books, books + count, [](const auto &amp;lhs, const auto &amp;rhs) {\n        return lhs.title &lt; rhs.title;\n    });\n}\n</code></pre>\n\n<p>In addition:</p>\n\n<ul>\n<li>You shouldn't read a stream with <code>while (!lib.eof())</code>: <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-i-e-while-stream-eof-cons\">Why is iostream::eof inside a loop condition (i.e. <code>while (!stream.eof())</code>) considered wrong?</a></li>\n<li>You can remove the first <code>loadData()</code></li>\n<li>You can remove the second parameter of <code>void sortByTitle(int count)</code></li>\n<li>You are shadowing global variables with local variables, e.g. global <code>ifstream lib</code> and local <code>ifstream lib</code> in <code>int loadData()</code></li>\n<li>You can remove unused variables</li>\n<li>You should remove <code>using namespace std;</code>: <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Why is \u201cusing namespace std;\u201d considered bad practice?</a></li>\n<li>You should avoid global variables</li>\n<li>You should replace <code>endl</code> by <code>'\\n'</code> if you don't need to flush in that moment. <code>endl</code> does more than a simple linebreak and usually it's not necessary.</li>\n</ul>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nusing std::cin;\nusing std::cout;\nusing std::ifstream;\nusing std::string;\n\n// structure\nstruct Book {\n    string title;\n    string author;\n};\n\nconst int ARRAY_SIZE = 1000;\n\n// global variables\nint loadData(string pathName, Book *books);\nvoid showAll(Book *books, int count);\nvoid sortByTitle(Book *books, int count);\n\n\nint main()\n{\n    // initialised variables\n    int count = 0;\n    char selector = 'q';\n\n    // asks user for file pathname\n    cout &lt;&lt; \"Welcome to Tommy's Library Database.\\n\";\n    cout &lt;&lt; \"Please enter the name of the file: \";\n    string pathName;\n    getline(cin, pathName);\n    Book books[ARRAY_SIZE];\n    count = loadData(pathName, books);\n    cout &lt;&lt; count &lt;&lt; \" Records loaded successfully.\\n\";\n    // Switch case menu\n    do {\n        cout &lt;&lt; \"\\nPlease enter a keyword that corresponds to the list of options: \\n\";\n        cout &lt;&lt; \" Search by: (A)uthor, (T)itle, (S)how All, (Q)uit Program: \";\n        cin &gt;&gt; selector;\n        selector = toupper(selector);\n        switch (selector)\n        {\n        case 'S':\n            sortByTitle(books, count);\n            if (count &lt;= 0) {\n                cout &lt;&lt; \" No counts found! \\n\";\n            }\n            else {\n                showAll(books, count);\n            }\n            break;\n        }\n    }\n    while (selector != 'q' &amp;&amp; selector != 'Q');\n    return 0;\n}\n\nint loadData(string pathName, Book *books)\n{\n    int count = 0;\n    ifstream lib(pathName);\n\n    if (!lib)\n    {\n        cout &lt;&lt; \" Unable to open file path! \\n\";\n        return -1;\n    }\n    while (getline(lib, books[count].title))\n    {\n        getline(lib, books[count].author);\n        count++;\n    }\n    return count;\n}\n// displays all book titles beside the author names\nvoid showAll(Book *books, int count)\n{\n    for (int i = 0; i &lt; count; i++)\n    {\n        cout &lt;&lt; books[i].title &lt;&lt; \" \" &lt;&lt; \"(\" &lt;&lt; books[i].author &lt;&lt; \")\\n\";\n    }\n}\n// Sorts by book title.\nvoid sortByTitle(Book *books, int count) {\n    std::sort(books, books + count, [](const auto &amp;lhs, const auto &amp;rhs) {\n        return lhs.title &lt; rhs.title;\n    });\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12283271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCKVbr3nx93URNSa4qklhibHLG-jy0PsZaxIhi2Og=k-s128", "display_name": "Mewgamez", "link": "https://stackoverflow.com/users/12283271/mewgamez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 59186098, "answer_count": 2, "score": -1, "last_activity_date": 1575545717, "creation_date": 1575498345, "last_edit_date": 1575501901, "question_id": 59185500, "link": "https://stackoverflow.com/questions/59185500/missing-array-element-issue", "title": "Missing array element issue", "body": "<p>This is part of a homework assignment I recently finished. I am required to use an array of structs to store a library of books by title and author. The code is working and running perfectly fine when sorting and displaying author or title alphabetically according to user input. </p>\n\n<p>The only issue I run into is when it shows all books sorted alphabetically. There are 14 books total in the text file used with the assignment, but only 13 books show up when the show all (S) option is entered.</p>\n\n<p>An example of the error would be:</p>\n\n<pre><code>()\n\nAudio for Games (Brandon)\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>Audio for Games (Brandon)\nBeginning LINUX Programming (Stones and Matthew)\n</code></pre>\n\n<p>My Code:</p>\n\n<pre><code>\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\n// structure\nstruct Book {\n    string title;\n    string author;\n};\n\nconst int ARRAY_SIZE = 1000;\nBook books[ARRAY_SIZE];\nstring pathName;\nifstream lib;\n\n// global variables\nint loadData();\nvoid showAll(int count);\nvoid sortByTitle(int count, string title);\n\n\nint main()\n{\n    // initialised variables\n    int count = 0;\n    char selector = 'q', yesNoAnswer = 'n';\n    string name;\n    string title;\n\n    // asks user for file pathname\n    cout &lt;&lt; \"Welcome to Tommy's Library Database.\" &lt;&lt; endl;\n    cout &lt;&lt; \"Please enter the name of the file: \";\n    getline(cin, pathName);\n    loadData();\n    count = loadData();\n    cout &lt;&lt; count &lt;&lt; \" Records loaded successfully.\" &lt;&lt; endl;\n    // Switch case menu\n    do {\n        cout &lt;&lt; endl &lt;&lt; \"Please enter a keyword that corresponds to the list of options: \" &lt;&lt; endl;\n        cout &lt;&lt; \" Search by: (A)uthor, (T)itle, (S)how All, (Q)uit Program: \";\n        cin &gt;&gt; selector;\n        selector = toupper(selector);\n        switch (selector)\n        {\n        case 'S':\n            sortByTitle(count, title);\n            if (count &lt;= 0) {\n                cout &lt;&lt; \" No counts found! \" &lt;&lt; endl;\n            }\n            else {\n                showAll(count);\n            }\n            break;\n        }\n    }\n    while (selector != 'q' &amp;&amp; selector != 'Q');\n    return 0;\n}\n\nint loadData()\n{\n    int count = 0;\n    int i = 0;\n\n    lib.open(pathName);\n    ifstream lib(pathName);\n\n    if (!lib)\n    {\n        cout &lt;&lt; \" Unable to open file path! \" &lt;&lt; endl;\n        return -1;\n    }\n    while (!lib.eof())\n    {\n        getline(lib, books[count].title);\n        getline(lib, books[count].author);\n        count++;\n    }\n    return count;\n}\n// displays all book titles beside the author names\nvoid showAll(int count)\n{\n    for (int i = 0; i &lt; count; i++)\n    {\n        cout &lt;&lt; books[i].title &lt;&lt; \" \" &lt;&lt; \"(\" &lt;&lt; books[i].author &lt;&lt; \")\" &lt;&lt; endl;\n    }\n}\n// Sorts by book title.\nvoid sortByTitle(int count, string title) {\n    Book temp;\n    for (int i = 0; i &lt; count; i++) {\n        for (int j = 0; j &lt; count - i; j++) {\n            if (books[j].title &gt; books[j + 1].title) {\n                temp = books[j];\n                books[j] = books[j + 1];\n                books[j + 1] = temp;\n            }\n        }\n    }\n}\n\n</code></pre>\n\n<p>The text file im using with the assignment (books.txt)</p>\n\n<pre><code>Objects First with Java\nBarnes and Kolling\nGame Development Essentials\nNovak\nThe Game Maker's Apprentice\nOvermars\nC++ Programming: From Problem Analysis...\nMalik\nC++ Programming Lab Manual\nScholl\nBeginning LINUX Programming\nStones and Matthew\nC++ Programming: Program Design Including...\nD. S. Malik\nC++ How to Program\nDeitel and Deitel\nProgramming and Problem Solving with C++\nDale, Weems, Headington\nGame Character Development with Maya\nWard\nDeveloping Games in Java\nBrackeen\nC# Programming\nHarvey, Robinson, Templeman, Watson\nJava Programming\nFarrell\nAudio for Games\nBrandon\n</code></pre>\n"}, {"tags": ["android", "c++", "cmake"], "comments": [{"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "edited": false, "score": 0, "creation_date": 1575498523, "post_id": 59185478, "comment_id": 104591253, "body": "Your <code>pathToProject</code> variable has a semicolon in the path. Is this intentional?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1575498558, "post_id": 59185478, "comment_id": 104591264, "body": "Wrap the value of <code>IMPORTED_LOCATION</code> into <b>double quotes</b>. Do the same for <code>pathToProject</code> variable&#39;s value. Otherwise CMake treats them as a <b>list</b> because of semicolon."}, {"owner": {"reputation": 2372, "user_id": 7954210, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/cmlwe.gif?s=128&g=1", "display_name": "Mouaad Abdelghafour AITALI", "link": "https://stackoverflow.com/users/7954210/mouaad-abdelghafour-aitali"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1575499174, "post_id": 59185478, "comment_id": 104591448, "body": "@Tsyvarev thank you so much for your comment"}], "answers": [{"comments": [{"owner": {"reputation": 2372, "user_id": 7954210, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/cmlwe.gif?s=128&g=1", "display_name": "Mouaad Abdelghafour AITALI", "link": "https://stackoverflow.com/users/7954210/mouaad-abdelghafour-aitali"}, "edited": false, "score": 0, "creation_date": 1575499247, "post_id": 59185580, "comment_id": 104591478, "body": "thank you for your answer, I know it&#39;s should be another question but I get this now : <code>ninja: error: &#39;C:&#47;Users&#47;Mouad;AITALI&#47;AndroidStudioProjects&#47;BGREMOVER&#47;app&#47;s&zwnj;&#8203;rc&#47;main&#47;jniLibs&#47;arm6&zwnj;&#8203;4-v8a&#47;libopencv_java&zwnj;&#8203;3.so&#39;, needed by &#39;..&#47;..&#47;..&#47;..&#47;build&#47;intermediates&#47;cmake&#47;debug&#47;obj&#47;arm64-v8a&#47;l&zwnj;&#8203;ibgrabcut.so&#39;, missing and no known rule to make it</code>"}, {"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "reply_to_user": {"reputation": 2372, "user_id": 7954210, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/cmlwe.gif?s=128&g=1", "display_name": "Mouaad Abdelghafour AITALI", "link": "https://stackoverflow.com/users/7954210/mouaad-abdelghafour-aitali"}, "edited": false, "score": 0, "creation_date": 1575500167, "post_id": 59185580, "comment_id": 104591774, "body": "Does the library <code>libopencv_java3.so</code> <i>actually</i> exist at that location?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1575537620, "post_id": 59185580, "comment_id": 104602463, "body": "On the screenshot between <code>Mouad</code> and <code>AITALI</code> there is a <b>space</b>, not a <b>semicolon</b> as you use in <code>pathToProject</code> variable."}], "tags": [], "owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "is_accepted": true, "score": 1, "last_activity_date": 1575498940, "creation_date": 1575498940, "answer_id": 59185580, "question_id": 59185478, "link": "https://stackoverflow.com/questions/59185478/cmake-set-target-properties-called-with-incorrect-number-of-arguments/59185580#59185580", "title": "CMake set target properties called with incorrect number of arguments", "body": "<p>As commented, CMake uses the semicolon <code>;</code> to define lists. So if the path contains semicolons, you must enclose the definition, and places where you use the variable <code>pathToProject</code> with double quotes:</p>\n\n<pre><code>set(pathToProject \"C:\\\\Users\\\\Mouad;AITALI\\\\AndroidStudioProjects\\\\BGREMOVER\")\n\n...\n\nset_target_properties(lib_opencv PROPERTIES IMPORTED_LOCATION \"${pathToProject}/app/src/main/jniLibs/${ANDROID_ABI}/libopencv_java3.so\")\n</code></pre>\n\n<p>The <a href=\"https://cmake.org/cmake/help/latest/prop_tgt/IMPORTED_LOCATION.html\" rel=\"nofollow noreferrer\"><code>IMPORTED_LOCATION</code></a> property only takes one value. So when you provide a list for that property, the <code>set_target_properties()</code> command cannot parse the arguments correctly, which yields the error.</p>\n"}], "owner": {"reputation": 2372, "user_id": 7954210, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/cmlwe.gif?s=128&g=1", "display_name": "Mouaad Abdelghafour AITALI", "link": "https://stackoverflow.com/users/7954210/mouaad-abdelghafour-aitali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1445, "favorite_count": 0, "accepted_answer_id": 59185580, "answer_count": 1, "score": 0, "last_activity_date": 1576283083, "creation_date": 1575498227, "last_edit_date": 1576283083, "question_id": 59185478, "link": "https://stackoverflow.com/questions/59185478/cmake-set-target-properties-called-with-incorrect-number-of-arguments", "title": "CMake set target properties called with incorrect number of arguments", "body": "<p>I'm trying to use <strong>OpenCV</strong> library in my project, but I get this error at runtime :</p>\n\n<blockquote>\n  <p>Build command failed. Error while executing process\n  D:\\Sdk\\cmake\\3.6.4111459\\bin\\cmake.exe with arguments\n  {-HC:\\Users\\Mouad AITALI\\AndroidStudioProjects\\BGREMOVER\\app\n  -BC:\\Users\\Mouad AITALI\\AndroidStudioProjects\\BGREMOVER\\app.cxx\\cmake\\debug\\arm64-v8a\n  -DANDROID_ABI=arm64-v8a -DANDROID_PLATFORM=android-16 -DCMAKE_LIBRARY_OUTPUT_DIRECTORY=C:\\Users\\Mouad AITALI\\AndroidStudioProjects\\BGREMOVER\\app\\build\\intermediates\\cmake\\debug\\obj\\arm64-v8a\n  -DCMAKE_BUILD_TYPE=Debug -DANDROID_NDK=D:\\Sdk\\ndk\\19.2.5345600 -DCMAKE_CXX_FLAGS=-std=c++11 -DCMAKE_TOOLCHAIN_FILE=D:\\Sdk\\ndk\\19.2.5345600\\build\\cmake\\android.toolchain.cmake\n  -DCMAKE_MAKE_PROGRAM=D:\\Sdk\\cmake\\3.6.4111459\\bin\\ninja.exe -GAndroid Gradle - Ninja}\n  -- Configuring incomplete, errors occurred! See also \"C:/Users/Mouad AITALI/AndroidStudioProjects/BGREMOVER/app/.cxx/cmake/debug/arm64-v8a/CMakeFiles/CMakeOutput.log\".</p>\n  \n  <p>CMake Error at CMakeLists.txt:13 (set_target_properties):<br>\n  set_target_properties called with incorrect number of arguments.</p>\n</blockquote>\n\n<p><strong>CMakeLists.txt</strong></p>\n\n<pre><code>#declare folder path\nset(pathToProject C:\\\\Users\\\\Mouad;AITALI\\\\AndroidStudioProjects\\\\BGREMOVER)\n\ncmake_minimum_required(VERSION 3.4.1)\n\nset(CMAKE_VERBOSE_MAKEFILE on)\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=gnu++11\")\n\ninclude_directories(${pathToOpenCv}/sdk/native/jni/include)\n\n#library location\nadd_library(lib_opencv SHARED IMPORTED)\nset_target_properties(lib_opencv PROPERTIES IMPORTED_LOCATION ${pathToProject}/app/src/main/jniLibs/${ANDROID_ABI}/libopencv_java3.so)\n\n#define libraries\nadd_library(native-lib SHARED src/main/cpp/native-lib.cpp)\nadd_library(grabcut SHARED src/main/cpp/jni-grabcut-lib.cpp src/main/cpp/grabcutter_p.cpp src/main/cpp/grabcutter_p.h)\n\nfind_library(log-lib log)\n\n#target libraries\ntarget_link_libraries(native-lib ${log-lib} lib_opencv)\ntarget_link_libraries(grabcut ${log-lib} lib_opencv)\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 12, "creation_date": 1575498072, "post_id": 59185432, "comment_id": 104591116, "body": "<code>bar(a, b, c)</code>?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1575498136, "post_id": 59185432, "comment_id": 104591133, "body": "<code>bar(a, b, c);</code> will pass those three arguments. Under some circumstances, you might want to define the parameters as rvalue references, and use <code>std::forward</code> when calling the function (but for the types you&#39;re passing here, that probably won&#39;t make any difference)."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 3, "creation_date": 1575498162, "post_id": 59185432, "comment_id": 104591147, "body": "There are template-oriented ways for passing argument lists, but really nothing for a simple case like yours where simply being less lazy is the best solution."}, {"owner": {"reputation": 4660, "user_id": 12149471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb9107b3d75e1de3585ba0f14e9d632?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Wenzel", "link": "https://stackoverflow.com/users/12149471/andreas-wenzel"}, "edited": false, "score": 0, "creation_date": 1575498440, "post_id": 59185432, "comment_id": 104591230, "body": "You could group all 3 variables in a struct and pass one parameter to the function, which would be a struct pointer or reference. That way, you only have to deal with one parameter instead of 3. However, depending on your program, that may not be meaningful, especially if you want to pass the variables by value instead of by pointer/reference."}], "answers": [{"comments": [{"owner": {"reputation": 1073, "user_id": 3763139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gkUYr.jpg?s=128&g=1", "display_name": "Sopel", "link": "https://stackoverflow.com/users/3763139/sopel"}, "edited": false, "score": 2, "creation_date": 1575499029, "post_id": 59185540, "comment_id": 104591408, "body": "There is nothing wrong in having many arguments if they don&#39;t represent a single abstraction. Here we cannot say anything about the arguments&#39; meaning so it&#39;s just speculation. This also doesn&#39;t answer the question."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 1073, "user_id": 3763139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gkUYr.jpg?s=128&g=1", "display_name": "Sopel", "link": "https://stackoverflow.com/users/3763139/sopel"}, "edited": false, "score": 1, "creation_date": 1575499232, "post_id": 59185540, "comment_id": 104591473, "body": "@Sopel note that I didn&#39;t say I <i>agree</i> with the practice. However, in this case, if you&#39;re passing the same arguments around multiple times (so often that you need to ask a SO question about it), I think it&#39;s safe to assume there&#39;s some way to abstract those into a struct. If nothing else, they could be abstracted as <code>struct foo_bar_args</code>."}, {"owner": {"reputation": 1073, "user_id": 3763139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gkUYr.jpg?s=128&g=1", "display_name": "Sopel", "link": "https://stackoverflow.com/users/3763139/sopel"}, "edited": false, "score": 0, "creation_date": 1575499296, "post_id": 59185540, "comment_id": 104591498, "body": "&quot;However, in this case, if you&#39;re passing the same arguments around multiple times (so often that you need to ask a SO question about it), I think it&#39;s safe to assume there&#39;s some way to abstract those into a struct. &quot; fair enough"}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 2, "last_activity_date": 1575498584, "creation_date": 1575498584, "answer_id": 59185540, "question_id": 59185432, "link": "https://stackoverflow.com/questions/59185432/in-c-how-can-i-pass-all-of-current-functions-arguments-to-another-function/59185540#59185540", "title": "In c++, how can I pass all of current function&#39;s arguments to another function?", "body": "<p>I read a book on clean code awhile ago that advocated for a max of 2 function arguments. 3 was only for extenuating circumstances and 4 was a heinous crime.</p>\n\n<p>If you're going to be passing <code>a</code>, <code>b</code> and <code>c</code> around together often, clearly they mean something together. So in a case like this, the book would suggest making a struct to hold that information:</p>\n\n<pre><code>struct Abc {\n    int a;\n    char *b;\n    double c;\n};\n\nint bar(Abc abc)\n{\n\n}\n\nint foo(Abc abc)\n{\n    bar(abc);\n}\n</code></pre>\n\n<p>This way you don't punish yourself for longer, more descriptive names, and you can add another informative name for what all three of those values mean together.</p>\n"}], "owner": {"reputation": 523, "user_id": 3754314, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1739665361/picture?type=large", "display_name": "mmnormyle", "link": "https://stackoverflow.com/users/3754314/mmnormyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1575498584, "creation_date": 1575497926, "question_id": 59185432, "link": "https://stackoverflow.com/questions/59185432/in-c-how-can-i-pass-all-of-current-functions-arguments-to-another-function", "title": "In c++, how can I pass all of current function&#39;s arguments to another function?", "body": "<p>Is there an expression in c++ that allows me to pass all of the current function's arguments, in order, to another function? See the example below.</p>\n\n<pre><code>int bar(int a, char* b, double c)\n{\n\n}\n\nint foo(int a, char* b, double c)\n{\n    bar({what goes here?});    // Equivalent to bar(a, b, c);\n}\n</code></pre>\n"}, {"tags": ["c++", "deleted-functions"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 3, "creation_date": 1575496813, "post_id": 59185221, "comment_id": 104590770, "body": "<code>Test&amp; operator=(Test&amp;&amp; a);</code> you declare the assignment operator but never implement it..."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 5, "creation_date": 1575496848, "post_id": 59185221, "comment_id": 104590780, "body": "Did you mean to write <code>if (x == 1)</code> in <code>main()</code> ?  <code>=</code> is the assignment operator, while <code>==</code> is the comparison-operator."}, {"owner": {"reputation": 1073, "user_id": 3763139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gkUYr.jpg?s=128&g=1", "display_name": "Sopel", "link": "https://stackoverflow.com/users/3763139/sopel"}, "edited": false, "score": 0, "creation_date": 1575496878, "post_id": 59185221, "comment_id": 104590791, "body": "you don&#39;t have a copy constructor nor an assignment operator. Declaring move constructor makes them deleted by default. Or do <code>outTest = std::move(arg)</code>"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1575497030, "post_id": 59185221, "comment_id": 104590827, "body": "<code>if (array != nullptr) {</code> is pointless. Just <code>delete[] array;</code>."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1575498200, "post_id": 59185221, "comment_id": 104591158, "body": "gcc and clang tell you why the function is deleted. Does MSVC not do that?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1575645409, "post_id": 59185221, "comment_id": 104647519, "body": "@CluelessCollegeStuden I noticed that you removed your comment to the answer you got. If anything is unclear, just ask in the comment section. I can imagine that <code>std::cout &lt;&lt; outTest.array;</code> does not do what you&#39;d like for example. If that&#39;s the case, just ask."}], "answers": [{"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 2, "last_activity_date": 1575499001, "creation_date": 1575499001, "answer_id": 59185585, "question_id": 59185221, "link": "https://stackoverflow.com/questions/59185221/trying-to-locate-a-deleted-function/59185585#59185585", "title": "Trying to locate a deleted function", "body": "<p>You should get an error along these lines:</p>\n\n<blockquote>\n  <p><code>constexpr Test&amp; Test::operator=(const Test&amp;)\u2019 is implicitly declared as deleted because \u2018Test\u2019 declares a move constructor or move assignment operator</code></p>\n</blockquote>\n\n<p>This is a good thing, because the default copy assignment operator would have done a terrible job. It would have copied your pointer - and you would have ended up with two instances both claiming to own the data. Both would try to <code>delete[]</code> it later - with undefined behaviour as a result.</p>\n\n<p>You should probably implement all 5 member functions mentioned in <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">The rule of three/five/zero</a>.</p>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;utility&gt;\n\nclass Test {\npublic:\n    int size;\n    double* array;\npublic: \n    Test() : \n        size(0),\n        array(nullptr)                    // make sure the default constructed array\n                                          // is set to nullptr\n    {}\n    Test(int sizeArg) :\n        size(sizeArg),\n        array(new double[size]{})         // zero initialize the array\n    {}\n    // rule of five:\n    Test(const Test&amp; arg) :               // copy ctor\n        size(arg.size),\n        array(new double[size])\n    {\n        std::copy(arg.array, arg.array+size, array);\n    }\n    Test(Test&amp;&amp; arg) :                    // move ctor\n        size(arg.size),\n        array(std::exchange(arg.array, nullptr)) // get pointer from arg and give nullptr\n                                                 // to arg\n    {}\n    Test&amp; operator=(const Test&amp; arg) {    // copy assignment operator\n        Test tmp(arg);                    // reuse copy constructor\n        std::swap(*this, tmp);            // let \"tmp\" destroy our current array\n        return *this;\n    } \n    Test&amp; operator=(Test&amp;&amp; arg) {         // move assignment operator \n        size = arg.size;\n        std::swap(array, arg.array);      // let the other object delete our current array\n        return *this;\n    }   \n    ~Test() {\n        delete[] array;                   // no \"if\" needed, it's ok to delete nullptr\n    }\n};\n\nint main()\n{\n    Test outTest;\n    int x = 1;\n\n    if(x==1) {                           // use == when comparing for equality\n        Test arg(2);\n        outTest = arg;\n    }\n    std::cout &lt;&lt; outTest.array;\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 12076356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37c7ed1ed8e2cff8f7f80b17cf4a465f?s=128&d=identicon&r=PG&f=1", "display_name": "CluelessCollegeStuden", "link": "https://stackoverflow.com/users/12076356/cluelesscollegestuden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 59185585, "answer_count": 1, "score": 0, "last_activity_date": 1575502559, "creation_date": 1575496716, "last_edit_date": 1575502559, "question_id": 59185221, "link": "https://stackoverflow.com/questions/59185221/trying-to-locate-a-deleted-function", "title": "Trying to locate a deleted function", "body": "<p>Messing around in C++ for class and came across a error stating that i was trying to reference a deleted function. Here is the error</p>\n\n<blockquote>\n  <p>C2280(Test &amp;Test::operator = (const Test&amp; : attempting to reference a deleted function).</p>\n</blockquote>\n\n<p>Here is my code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"pch.h\"\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Test {\npublic:\n    int size;\n    double* array;\npublic: \n    Test();\n    Test&amp; operator=(Test&amp;&amp; a);\n    Test(int sizeArg) {\n        size = sizeArg;\n        array = new double[size];\n    }\n    Test(Test&amp;&amp; arg) {\n        size = arg.size;\n        array = arg.array;\n        arg.size = 0;\n        arg.array = nullptr;\n    }\n    ~Test()\n    {\n        if (array != nullptr) {\n            delete[]array;\n        }\n    }\n};\n\nint main()\n{\n    Test outTest;\n    int x = 1;\n    //Wont work since looking for a deleted function\n    if (x = 1) {\n        Test arg(200000000);\n        outTest = arg;\n    }\n    cout &lt;&lt; outTest.array;\n}\n</code></pre>\n\n<p>The problem is in the <code>main()</code> on the equal sign.</p>\n"}, {"tags": ["c++", "linux", "daemon"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1575496609, "post_id": 59185128, "comment_id": 104590692, "body": "<code>daemonize()</code> will prevent your daemon from holding up other processes, but there&#39;s no guarantee that a hard-coded delay of 5000000 (or any amount, really) will be long enough to ensure that the hardware is initialized properly before you try to use it.  You&#39;d be better off trying to use the hardware immediately, and then if you find that you can&#39;t (because the hardware is uninitialized), <i>that</i> would be the time to sleep for a second or two and then try again (and repeat as necessary until the hardware is usable)."}, {"owner": {"reputation": 174, "user_id": 3991361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117c04ce5e8216b90c553a0c7ffc8ac0?s=128&d=identicon&r=PG&f=1", "display_name": "Larry B", "link": "https://stackoverflow.com/users/3991361/larry-b"}, "edited": false, "score": 0, "creation_date": 1575497125, "post_id": 59185128, "comment_id": 104590855, "body": "If your daemon is a service, why not set the other daemon as a dependency so that it doesn&#39;t start up until the other one is up?  Not sure if this is applicable to your case, but there is something <a href=\"https://serverfault.com/questions/617823/how-to-set-systemd-service-dependencies\">here</a> that may be useful for your case."}, {"owner": {"reputation": 2649, "user_id": 1048588, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/1324473728/picture?type=large", "display_name": "jstuardo", "link": "https://stackoverflow.com/users/1048588/jstuardo"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1575497135, "post_id": 59185128, "comment_id": 104590861, "body": "Thanks @JeremyFriesner. I understand your point and you are right. However, the actual problem is that both daemons tries to use the hardware at the same time, causing it to get blocked. When that happens, once in SSH console, I need to shutdown my daemon... then the hardware is unblocked. By the way, this is not a computer but an RFID antenna, and what I have watched, with 5 seconds is enough to wait. That is why I asked if I add the delay after the if, the forked process willl wait, but the main process will return so, all other daemons should start without that delay."}, {"owner": {"reputation": 2649, "user_id": 1048588, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/1324473728/picture?type=large", "display_name": "jstuardo", "link": "https://stackoverflow.com/users/1048588/jstuardo"}, "reply_to_user": {"reputation": 174, "user_id": 3991361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117c04ce5e8216b90c553a0c7ffc8ac0?s=128&d=identicon&r=PG&f=1", "display_name": "Larry B", "link": "https://stackoverflow.com/users/3991361/larry-b"}, "edited": false, "score": 0, "creation_date": 1575497276, "post_id": 59185128, "comment_id": 104590893, "body": "@LarryB I have seen I can add the service in the sh script, in the line &quot;# Required-Start:    $local_fs $syslog&quot;... but, how can I get the other daemon name? is the name of the sh file used to start it?"}, {"owner": {"reputation": 174, "user_id": 3991361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117c04ce5e8216b90c553a0c7ffc8ac0?s=128&d=identicon&r=PG&f=1", "display_name": "Larry B", "link": "https://stackoverflow.com/users/3991361/larry-b"}, "edited": false, "score": 0, "creation_date": 1575497739, "post_id": 59185128, "comment_id": 104591031, "body": "Does your daemon access the hardware via files on the file system? If yes, then you might be able to use <code>lsof</code> to figure out which process is accessing those files."}], "owner": {"reputation": 2649, "user_id": 1048588, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/1324473728/picture?type=large", "display_name": "jstuardo", "link": "https://stackoverflow.com/users/1048588/jstuardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575496308, "creation_date": 1575496158, "last_edit_date": 1575496308, "question_id": 59185128, "link": "https://stackoverflow.com/questions/59185128/if-i-add-a-delay-in-a-daemon-initialization-may-it-affect-how-other-daemons-are", "title": "If I add a delay in a daemon initialization, may it affect how other daemons are loaded at boot time?", "body": "<p>I have developed a daemon in C++ whose main code is the following:</p>\n\n<pre><code>if ((ret = daemonize(daemonpath, daemonpid)) == -1) {\n    syslog(LOG_INFO, \"Ejecutando daemon\");\n\n    Reader reader(bSearch);\n    reader.StartAsync();\n    while (!exitdaemon) {\n\n    }\n    reader.StopAsync();\n    daemonShutdown();\n}\n</code></pre>\n\n<p>\"daemonize\" method does all the stuff to create the daemon (does a fork, creates the PID, etc.) so it is not relevant for the question because it is the standard code to create a daemon.</p>\n\n<p>Well, the daemon works perfectly, but when I configure the system to load my daemon at boot time, it enteres in conflict with other daemon. The fact is that the other daemon initializes some hardware my daemon uses. So, I need to start my daemon some seconds later than the other daemon.</p>\n\n<p>If I add a <code>usleep(5000000)</code> call after the <code>if</code> statement, may it affect the delay of the other daemons in the system?</p>\n\n<p>I think it should not affect because the \"daemonize\" method does a fork, so a copy of this process is launched, and the rest of the main process continues normally after the \"if\" statement.</p>\n\n<p>Can you confirm if this is true?</p>\n"}, {"tags": ["c++", "emscripten"], "owner": {"reputation": 132, "user_id": 5907621, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZA2O7w518Xg/AAAAAAAAAAI/AAAAAAAAALo/MLXwg7UxqlQ/photo.jpg?sz=128", "display_name": "Hiisi T", "link": "https://stackoverflow.com/users/5907621/hiisi-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575495471, "creation_date": 1575495471, "question_id": 59185006, "link": "https://stackoverflow.com/questions/59185006/emscripten-fatal-error-sys-cdefs-h-no-such-file-or-directory-when-compiling-f", "title": "Emscripten: fatal error: sys/cdefs.h: No such file or directory when compiling for 32 bit", "body": "<p>When trying to compile an existing C++ project with emscripten I got the following error:\n<code>emmake make LINUX</code></p>\n\n<pre><code>In file included from /usr/include/stdio.h:27:0,\n                 from src/abinitplugin.c:50:\n/usr/include/features.h:367:25: fatal error: sys/cdefs.h: No such file or directory\ncompilation terminated.\n</code></pre>\n\n<p>I am able to compile for LINUXAMD64, but I need it specifically 32-bit. How do I solve it?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 6, "creation_date": 1575495490, "post_id": 59184985, "comment_id": 104590359, "body": "<code>Node *head = NULL; int *start = &amp;head-&gt;data;</code> does this not immediately break everything?"}, {"owner": {"reputation": 3839, "user_id": 9171697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475b59ee1312dc014fbe1eebcd91d307?s=128&d=identicon&r=PG&f=1", "display_name": "Meowmere", "link": "https://stackoverflow.com/users/9171697/meowmere"}, "edited": false, "score": 1, "creation_date": 1575495575, "post_id": 59184985, "comment_id": 104590381, "body": "And even if it works, <code>99</code> will never be in the linked list, since <code>99 - 11 = 88</code> which is not a multiply of 10."}, {"owner": {"reputation": 11, "user_id": 12482354, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDV9S-a2JNCM3qQdkVwDtVRjRpDXJO0Q6x_dqwj=k-s128", "display_name": "ali desu", "link": "https://stackoverflow.com/users/12482354/ali-desu"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1575496057, "post_id": 59184985, "comment_id": 104590533, "body": "actually <code>int *start = &amp;head-&gt;data;</code> break every thing.  I&#39;m trying to assign first of list to it but i can&#39;t. @scohe001 After all this doesn&#39;t matter 99 it not multiply of 10"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1575496131, "post_id": 59184985, "comment_id": 104590556, "body": "<code>Node *head = NULL; int *start = &amp;head-&gt;data; &#47;&#47; Get start of linked list</code> -- Those two lines are outside of <code>main</code>, meaning they are executed before <code>main</code> begins.  Thus the error should be obvious, given that information.  What were your intentions of writing code outside of <code>main</code> like that?"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1575496221, "post_id": 59184985, "comment_id": 104590587, "body": "Yes @ali, because <code>head</code> is NULL. So <code>head-&gt;data</code> or without the syntactic sugar, <code>(*head).data</code> is attempting to dereference NULL. In other words, you&#39;re trying to pull the &quot;first of list&quot; from a list that doesn&#39;t exist. It&#39;s not clear to me what you&#39;re asking here, given the code doesn&#39;t run without error."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1575496377, "post_id": 59184985, "comment_id": 104590622, "body": "@alidesu Your code with the violations mentioned above removed: <a href=\"https://godbolt.org/z/zRK3bR\" rel=\"nofollow noreferrer\">godbolt.org/z/zRK3bR</a> You don&#39;t need <code>start</code> for anything."}, {"owner": {"reputation": 11, "user_id": 12482354, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDV9S-a2JNCM3qQdkVwDtVRjRpDXJO0Q6x_dqwj=k-s128", "display_name": "ali desu", "link": "https://stackoverflow.com/users/12482354/ali-desu"}, "edited": false, "score": 0, "creation_date": 1575496434, "post_id": 59184985, "comment_id": 104590636, "body": "If I want to be clear, i want to print from 11 to 99. What should i do ? Is there a problem this &quot;print()&quot; function ?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1575496512, "post_id": 59184985, "comment_id": 104590658, "body": "You&#39;ll print from 91 back to 11 in decrements of 10 with the values you entered. Print the values as you enter them to see it."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12482354, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDV9S-a2JNCM3qQdkVwDtVRjRpDXJO0Q6x_dqwj=k-s128", "display_name": "ali desu", "link": "https://stackoverflow.com/users/12482354/ali-desu"}, "edited": false, "score": 0, "creation_date": 1575496688, "post_id": 59185169, "comment_id": 104590726, "body": "Thanks for your Wonderful answer :D"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1575496727, "post_id": 59185169, "comment_id": 104590738, "body": "&quot;<i>For that <code>head</code> is not enough</i>&quot; it is if you&#39;re willing to iterate to the end of the list on every push_back. Or if you have an <code>insert_after()</code> that takes a <code>Node*</code>. By no means do you <i>need</i> a <code>tail</code>."}], "tags": [], "owner": {"reputation": 411, "user_id": 10707570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06bdf41f31e012dd092e7ce0fa3cca97?s=128&d=identicon&r=PG&f=1", "display_name": "AshleyWilkes", "link": "https://stackoverflow.com/users/10707570/ashleywilkes"}, "is_accepted": true, "score": 1, "last_activity_date": 1575496462, "creation_date": 1575496462, "answer_id": 59185169, "question_id": 59184985, "link": "https://stackoverflow.com/questions/59184985/singly-linked-list-in-c/59185169#59185169", "title": "Singly Linked List in C++", "body": "<p>1) If that <code>for</code> cycle that inserts elements should really end with <code>i += 11</code>, then yes, <code>99</code> is the first element in the list.</p>\n\n<p>2) The list looks like this <code>99 -&gt; 88 -&gt; ... -&gt; 22 -&gt; 11</code>. There is no way of getting from <code>11</code> to <code>22</code>, you can only traverse the list in one direction. That's a characteristic of the <code>list</code> data structure.</p>\n\n<p>If you need to print the elements in the same order you insert them, you need to insert at the end on the list, not at the front. For that <code>head</code> is not enough, you'd need another pointer to the list, one pointing to the end, let's call it <code>tail</code>. <code>insert()</code> would then use <code>tail</code> in much the same way as it uses <code>head</code> now (it would not touch or change <code>head</code> at all ).</p>\n"}], "owner": {"reputation": 11, "user_id": 12482354, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDV9S-a2JNCM3qQdkVwDtVRjRpDXJO0Q6x_dqwj=k-s128", "display_name": "ali desu", "link": "https://stackoverflow.com/users/12482354/ali-desu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "accepted_answer_id": 59185169, "answer_count": 1, "score": 1, "last_activity_date": 1575496462, "creation_date": 1575495402, "last_edit_date": 1575495411, "question_id": 59184985, "link": "https://stackoverflow.com/questions/59184985/singly-linked-list-in-c", "title": "Singly Linked List in C++", "body": "<p>I have source code that adds items to linked list and prints them.\nNow the \"print()\" function prints items from end to first. There are 2 questions:\n1. is \"99\" the first item in linked list ?\n2. if \"11\" is the first item in linked list, how i can set the start position of the list to print from first ?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Node\n{\n    public:\n        int data;\n        Node *next;\n};\n\nNode *head = NULL;\nint *start = &amp;head-&gt;data; // Get start of linked list\n\nvoid insert(int data)\n{\n    Node *new_node = new Node();\n    new_node-&gt;data = data;\n    new_node-&gt;next = head;\n    head = new_node;\n}\n\nvoid display()\n{\n    Node *ptr;\n    ptr = head;\n    while (ptr != NULL)\n    {\n        cout&lt;&lt; ptr-&gt;data &lt;&lt; \" \";\n        ptr = ptr-&gt;next;\n    }\n}\n\nint main()\n{\n    for (int i = 11; i &lt;= 100; i += 10)\n        insert(i);\n    cout&lt;&lt; \"Setting head-&gt;data address...\";\n    &amp;head-&gt;data = start;\n    cout&lt;&lt; \"[ OK ]\\n\";\n    cout&lt;&lt; \"The linked list is: \";\n    display();\n    cout&lt;&lt; endl;\n\n    return 0;\n}\n\n</code></pre>\n"}, {"tags": ["c++", "c", "compiler-construction", "elf"], "comments": [{"owner": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "edited": false, "score": 2, "creation_date": 1575511272, "post_id": 59184882, "comment_id": 104594352, "body": "Generally, if the address is (or VMA+LMA are) zero, that means you have an ELF file that has not yet been linked and hence no addresses are assigned yet. The object file must be read by a linker, which will assign addresses. If the linker is a dynamic linker, it will assign them based on whatever&#39;s running right now. If it is a static linker, it will build a loadable image with pre-assigned addresses."}, {"owner": {"reputation": 29, "user_id": 2409922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02d00370df4e6533b10b5bbce50ae45?s=128&d=identicon&r=PG", "display_name": "ericshufro", "link": "https://stackoverflow.com/users/2409922/ericshufro"}, "reply_to_user": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "edited": false, "score": 0, "creation_date": 1575559834, "post_id": 59184882, "comment_id": 104614749, "body": "I ma pretty sure its the final linked file.  There is a map generated along with it, but i feel as though there is still some stuff missing because even the map only shows offsets and no full addresses where the SRAM base address is present; as well as other memory base addresses."}, {"owner": {"reputation": 29, "user_id": 2409922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02d00370df4e6533b10b5bbce50ae45?s=128&d=identicon&r=PG", "display_name": "ericshufro", "link": "https://stackoverflow.com/users/2409922/ericshufro"}, "reply_to_user": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "edited": false, "score": 0, "creation_date": 1575562414, "post_id": 59184882, "comment_id": 104616243, "body": "I stand corrected.  The map file does show ORIGIN + size for each section.  I wonder why the origin doesnt seem to be available as physical address in the elf.  Should it be or do i need to dig through elf headers to determine the origin for each section?"}, {"owner": {"reputation": 29, "user_id": 2409922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02d00370df4e6533b10b5bbce50ae45?s=128&d=identicon&r=PG", "display_name": "ericshufro", "link": "https://stackoverflow.com/users/2409922/ericshufro"}, "reply_to_user": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "edited": false, "score": 0, "creation_date": 1575563678, "post_id": 59184882, "comment_id": 104616953, "body": "Torek - You were spot on!  Thank you.  The linker generates a relocatable object file with the extention .elf.  This file then runs through the linker a second time where a second core&#39;s relocatable object is also included.  They are fully linked and packaged in to a multi-core archive file which the debugger uses to load memory.  I opened the .mca with 7-zip and extracted the image file which had the addressed filled in. A+"}, {"owner": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "edited": false, "score": 0, "creation_date": 1575566573, "post_id": 59184882, "comment_id": 104618391, "body": "Ah, you have one of those two-pass linkage setups for some reason. (I have no idea what the reason is on your system, but there probably is one. :-) )"}], "owner": {"reputation": 29, "user_id": 2409922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02d00370df4e6533b10b5bbce50ae45?s=128&d=identicon&r=PG", "display_name": "ericshufro", "link": "https://stackoverflow.com/users/2409922/ericshufro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575495688, "creation_date": 1575494776, "last_edit_date": 1575495688, "question_id": 59184882, "link": "https://stackoverflow.com/questions/59184882/how-does-one-determine-the-physical-load-address-of-various-elf-file-sections", "title": "How does one determine the physical load address of various ELF file sections?", "body": "<p>When I objdump an ELF file emitted from GHS Multi, the physical address fields for each section is set to 0; however, section file offsets are available, but those offsets do not correspond to the memory region addresses from the linker directive file so alone, offset is not sufficient; as they appear to be file offset only. </p>\n\n<p>Question: How does one compute the physical load address for each section?  </p>\n\n<p>My idea is to read through the ELF file and determine the load address for each of the 90 sections and then check to see what memory range the address falls within. In this manner, I can tally memory usage for each memory region; internal sram, external sram, flash, dataflash, etc.</p>\n\n<p>Is the idea flawed? Is there something else I am missing?</p>\n\n<p>No virtual addressing is used.  It is a simple executable intended for a 32-bit micro-controller.  We are running an RTOS on a Renesas RH850. There is no MMU or MPU active. The program entry point is hooked directly to the processor reset vector; exception: We use a small boot loader in production but jump directly from the boot loader to the start address of the image.</p>\n\n<p>I wish I could share the map file or ELF, but unfortunately, it is not mine to share. I can, however, share the output of <code>readelf</code>.</p>\n\n<p>There are 92 section headers, starting at offset 0xa2d6b0:</p>\n\n<pre><code>Section Headers:\n  [Nr] Name              Type            Addr     Off    Size   ES Flg Lk Inf Al\n  [ 0]                   NULL            00000000 000000 000000 00      0   0  0\n  [ 1] /DISCARD/         PROGBITS        00000000 000000 000000 00      0   0  0\n  [ 2] .text             PROGBITS        00000000 000040 0c596a 00  AX  0   0  2\n  [ 3] .data             PROGBITS        00000000 0c59b0 0038b8 00  WA  0   0  8\n  [ 4] .bss              NOBITS          00000000 000000 0033b0 00  WA  0   0  8\n  [ 5] .entry_section    PROGBITS        00000000 0c9268 0000e8 00  AX  0   0  2\n  [ 6] .vectorTableCOde  PROGBITS        00000000 0c9350 000004 00  AX  0   0  2\n  [ 7] .rela.text        RELA            00000000 0c9354 0a4b14 0c     89   2  4\n  [ 8] .rela.entry_secti RELA            00000000 16de68 000108 0c     89   5  4\n  [ 9] .rela.vectorTable RELA            00000000 16df70 00000c 0c     89   6  4\n  [10] .rodata           PROGBITS        00000000 16df7c 135928 00   A  0   0  4\n  [11] .note.renesas     NOTE            00000000 2a38a4 000050 00      0   0  4\n  [12] .bss_sram         NOBITS          00000000 000000 07acd0 00  WA  0   0  8\n  [13] .rbss             NOBITS          00000000 000000 00b5dc 00  WA  0   0  8\n  [14] .rela.data        RELA            00000000 2a38f4 002124 0c     89   3  4\n  [15] .rela.rodata      RELA            00000000 2a5a18 00d41c 0c     89  10  4\n  [16] .rela.ghsinfo     RELA            00000000 2b2e34 000774 0c     89  88  4\n  [17] .slbss            NOBITS          00000000 000000 003534 00  WA  0   0  8\n  [18] .applicationInfo  PROGBITS        00000000 2b35a8 000040 00   A  0   0  4\n  [19] .applicationEnd   PROGBITS        00000000 2b35e8 000014 00   A  0   0  4\n  [20] .R_FDL_Text       PROGBITS        00000000 2b35fc 0016ea 00  AX  0   0  2\n  [21] .rela.R_FDL_Text  RELA            00000000 2b4ce8 001278 0c     89  20  4\n  [22] .R_FDL_Const      PROGBITS        00000000 2b5f60 000014 00   A  0   0  4\n  [23] .R_FDL_Data       NOBITS          00000000 000000 000064 00  WA  0   0  4\n  [24] .OS_CONST         PROGBITS        00000000 2b5f80 0002b4 00   A  0   0 16\n  [25] .rela.OS_CONST    RELA            00000000 2b6234 000624 0c     89  24  4\n  [26] .OS_CODE          PROGBITS        00000000 2b6858 0114c0 00  AX  0   0  4\n  [27] .rela.OS_CODE     RELA            00000000 2c7d18 0094b0 0c     89  26  4\n  [28] .OS_CORE0_CONST   PROGBITS        00000000 2d11c8 002af0 00   A  0   0  8\n  [29] .OS_CORE0_VAR_NOI NOBITS          00000000 000000 001604 00  WA  0   0  8\n  [30] .rela.OS_CORE0_CO RELA            00000000 2d3cb8 0040bc 0c     89  28  4\n  [31] .OS_STACK_BLETASK NOBITS          00000000 000000 001000 00  WA  0   0  4\n  [32] .OS_STACK_BSWTASK NOBITS          00000000 000000 001000 00  WA  0   0  4\n  [33] .OS_STACK_CANCM_T NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [34] .OS_STACK_CANCOM_ NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [35] .OS_STACK_CLITASK NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [36] .OS_STACK_CPUMONI NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [37] .OS_STACK_CHIMEAP NOBITS          00000000 000000 001388 00  WA  0   0  4\n  [38] .OS_STACK_CHIMEDR NOBITS          00000000 000000 000fa0 00  WA  0   0  4\n  [39] .OS_STACK_DIRANAB NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [40] .OS_STACK_DIRANAD NOBITS          00000000 000000 000320 00  WA  0   0  4\n  [41] .OS_STACK_EXTAMPT NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [42] .OS_STACK_HWTIMER NOBITS          00000000 000000 000320 00  WA  0   0  4\n  [43] .OS_STACK_IPC2TAS NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [44] .OS_STACK_IPCMPTA NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [45] .OS_STACK_IDLETAS NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [46] .OS_STACK_IPCGATE NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [47] .OS_STACK_KEYTASK NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [48] .OS_STACK_LOGGERT NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [49] .OS_STACK_MODULEM NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [50] .OS_STACK_NVMTASK NOBITS          00000000 000000 001000 00  WA  0   0  4\n  [51] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [52] .OS_STACK_OSCORE_ NOBITS          00000000 000000 001000 00  WA  0   0  4\n  [53] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [54] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [55] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [56] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [57] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [58] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [59] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [60] .OS_STACK_OSCORE_ NOBITS          00000000 000000 001000 00  WA  0   0  4\n  [61] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [62] .OS_STACK_OSCORE_ NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [63] .OS_STACK_POLLING NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [64] .OS_STACK_PWRAMPT NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [65] .OS_STACK_RTCTASK NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [66] .OS_STACK_TESTSIM NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [67] .OS_STACK_TIMERTA NOBITS          00000000 000000 000400 00  WA  0   0  4\n  [68] .OS_STACK_VEHCFG3 NOBITS          00000000 000000 000960 00  WA  0   0  4\n  [69] .OS_STACK_VEHCFG4 NOBITS          00000000 000000 000320 00  WA  0   0  4\n  [70] .OS_STACK_VEHCFG5 NOBITS          00000000 000000 0004b0 00  WA  0   0  4\n  [71] .OS_STACK_VIDEOIN NOBITS          00000000 000000 000800 00  WA  0   0  4\n  [72] .OS_STACK_HWPWRCT NOBITS          00000000 000000 0005dc 00  WA  0   0  4\n  [73] .OS_STACK_SENSORT NOBITS          00000000 000000 000514 00  WA  0   0  4\n  [74] .OS_STACK_STARTUP NOBITS          00000000 000000 0008fc 00  WA  0   0  4\n  [75] .OS_STACK_SYSCTRL NOBITS          00000000 000000 000dac 00  WA  0   0  4\n  [76] .OS_STACK_VEHCFG1 NOBITS          00000000 000000 0005dc 00  WA  0   0  4\n  [77] .OS_STACK_VEHCFG2 NOBITS          00000000 000000 0005dc 00  WA  0   0  4\n  [78] .OS_EXCVEC_CORE0_ PROGBITS        00000000 2d7d80 0001fc 00  AX  0   0 512\n  [79] .OS_INTVEC_CORE0_ PROGBITS        00000000 2d7f80 000800 00  AX  0   0 512\n  [80] .rela.OS_EXCVEC_C RELA            00000000 2d8780 000180 0c     89  78  4\n  [81] .rela.OS_INTVEC_C RELA            00000000 2d8900 001800 0c     89  79  4\n  [82] .OS_VAR_NOCACHE_N NOBITS          00000000 000000 00000c 00  WA  0   0  4\n  [83] .OS_CORESTATUS_CO NOBITS          00000000 000000 000014 00  WA  0   0  4\n  [84] .OS_BARRIER_CORE0 NOBITS          00000000 000000 000008 00  WA  0   0  4\n  [85] .bootstrap        PROGBITS        00000000 2da100 000040 00  AX  0   0  2\n  [86] .rela.bootstrap   RELA            00000000 2da140 000018 0c     89  85  4\n  [87] .gstackfix        PROGBITS        00000000 000000 000000 00      0   0  4\n  [88] .ghsinfo          NOTE            00000000 2da158 000480 00      0   0  1\n  [89] .symtab           SYMTAB          00000000 2da5d8 261080 10     90 110134  4\n  [90] .strtab           STRTAB          00000000 53b658 4f173c 00      0   0  1\n  [91] .shstrtab         STRTAB          00000000 a2cd94 00091c 00      0   0  1\nKey to Flags:\n  W (write), A (alloc), X (execute), M (merge), S (strings), I (info),\n  L (link order), O (extra OS processing required), G (group), T (TLS),\n  C (compressed), x (unknown), o (OS specific), E (exclude),\n  p (processor specific)\n</code></pre>\n"}, {"tags": ["c++", "formatting", "setw"], "comments": [{"owner": {"reputation": 90101, "user_id": 2509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79ed928ca8b1ab9a637720bf0fb20732?s=128&d=identicon&r=PG&f=1", "display_name": "dmckee --- ex-moderator kitten", "link": "https://stackoverflow.com/users/2509/dmckee-ex-moderator-kitten"}, "edited": false, "score": 0, "creation_date": 1575494887, "post_id": 59184854, "comment_id": 104590142, "body": "Notice that Betty&#39;s name is one shorter than Archie&#39;s and Veronica&#39;s is one longer. Where do their grades start relatibve one another? Why?"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1575494896, "post_id": 59184854, "comment_id": 104590148, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/14765155/how-can-i-easily-format-my-data-table-in-c\">How can I easily format my data table in C++?</a>"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1575494963, "post_id": 59184854, "comment_id": 104590176, "body": "You can combine first and last name into one string."}, {"owner": {"reputation": 3, "user_id": 12136259, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB1EEaFJIOy8eFEV1aKg1C5tytPu9m6VZ6ykVMR=k-s128", "display_name": "Arian Ghorbani", "link": "https://stackoverflow.com/users/12136259/arian-ghorbani"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1575495172, "post_id": 59184854, "comment_id": 104590258, "body": "@scohe001 it doesn&#39;t seem to. I tried using setfill to help solve the issue, but it did nothing."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1575497117, "post_id": 59184854, "comment_id": 104590852, "body": "<code>outFile &lt;&lt; students[i].fName &lt;&lt; &quot; &quot; &lt;&lt; students[i].lName &lt;&lt; string(30 - students[i].fName.length() - students[i].lName.length(), &#39; &#39;);</code>"}], "owner": {"reputation": 3, "user_id": 12136259, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB1EEaFJIOy8eFEV1aKg1C5tytPu9m6VZ6ykVMR=k-s128", "display_name": "Arian Ghorbani", "link": "https://stackoverflow.com/users/12136259/arian-ghorbani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575494589, "creation_date": 1575494589, "question_id": 59184854, "link": "https://stackoverflow.com/questions/59184854/setw-not-seeming-to-work-consistently-in-output-file", "title": "Setw not seeming to work consistently in output file", "body": "<p>The program I'm building is meant to output students names, their 5 scores, and their grade from a input file named \"students.txt\" into an output file named \"output.txt\". All of the calculation required is correct, but the formatting of the output file is not, as I want all of the scores and grades to be aligned under their titles. I was under the impression that setw included within it the text it's applied to, but it seems to be applied inconsistently in the same file, to my knowledge. I know that the problem lies with the differing lengths of the names being used, I just don't know how to solve that, as I thought setw was supposed to be used for formatting in that circumstance. This is the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\n\nusing namespace std;\n\nstruct studentType\n{\n    int scores[5];\n    string fName;\n    string lName;\n    char grade;\n};\n\nvoid read(ifstream&amp; inFile, studentType students[], int numStudents);\n\nvoid calcGrade(studentType students[], int numStudents);\n\nvoid print(ofstream&amp; outFile, studentType students[], int numStudents);\n\nint main()\n{\n    ifstream inFile;\n    ofstream outFile;\n\n    const int numStudents = 12;\n\n    studentType students[20];\n\n    inFile.open(\"students.txt\");\n    outFile.open(\"output.txt\");\n\n    read(inFile, students, numStudents);\n\n    calcGrade(students, numStudents);\n\n    print(outFile, students, numStudents);\n\n    inFile.close();\n    outFile.close();\n\n\n    return 0;\n}\n\nvoid read(ifstream&amp; inFile, studentType students[], int numStudents)\n{\n    for (int i = 0; i &lt; numStudents; i++)\n    {\n        inFile &gt;&gt; students[i].fName &gt;&gt; students[i].lName;\n        for (int i2 = 0; i2 &lt; 5; i2++)\n            inFile &gt;&gt; students[i].scores[i2];\n        inFile.ignore(100, '\\n');\n    }\n}\n\nvoid calcGrade(studentType students[], int numStudents)\n{\n    double averageScore;\n\n    for (int i = 0; i &lt; numStudents; i++)\n    {\n        int aggregateScore = 0;\n        for (int i2 = 0; i2 &lt; 5; i2++)\n            aggregateScore += students[i].scores[i2];\n\n        averageScore = aggregateScore / 5;\n        if (averageScore &gt;= 90)\n            students[i].grade = 'A';\n        else if (averageScore &gt;= 80)\n            students[i].grade = 'B';\n        else if (averageScore &gt;= 70)\n            students[i].grade = 'C';\n        else if (averageScore &gt; 60)\n            students[i].grade = 'D';\n        else\n            students[i].grade = 'F';\n    }\n\n}\n\nvoid print(ofstream&amp; outFile, studentType students[], int numStudents)\n{\n    outFile &lt;&lt; right &lt;&lt; \"Name\" &lt;&lt; setw(40) &lt;&lt; \"Scores\" &lt;&lt; setw(30) &lt;&lt; \"Grade\" &lt;&lt; endl;\n    for (int i = 0; i &lt; numStudents; i++)\n    {\n        outFile &lt;&lt; right &lt;&lt; students[i].fName &lt;&lt; \" \" &lt;&lt; students[i].lName &lt;&lt; setw(20);\n\n        for (int i2 = 0; i2 &lt; 5; i2++)\n            outFile &lt;&lt; right &lt;&lt; \" \" &lt;&lt; students[i].scores[i2];\n\n        outFile &lt;&lt; right &lt;&lt; setw(20) &lt;&lt; students[i].grade &lt;&lt; endl;\n    }\n\n\n\n\n}\n\n</code></pre>\n\n<p>This is what I'm getting in the output file:</p>\n\n<pre><code>Name                                  Scores                         Grade\nARCHIE ANDREW                    90 80 70 90 80                   B\nBETTY COOPER                    100 100 100 100 100                   A\nVERONICA LODGE                    70 70 70 80 80                   C\nTARA DREW                    90 80 78 90 89                   B\nNANCY COOPER                    100 100 10 90 100                   B\nRONI DODGE                    70 77 70 88 80                   C\nRICHIE DREW                    90 80 70 90 80                   B\nBELLA HOOPER                    100 100 100 100 100                   A\nNINA HODGE                    70 70 70 80 80                   C\nCLARA DEW                    90 80 78 90 89                   B\nFANCY COOP                    100 100 10 90 100                   B\nRINA EDGE                    70 77 70 88 80                   C\n</code></pre>\n"}, {"tags": ["c++", "data-structures"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1575493064, "post_id": 59184540, "comment_id": 104589529, "body": "Have you tried adding a default constructor to <code>BSTNode</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12482204, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DVb_WEIUrAo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc_cOEk4I5nosEXety2yp-ojbFOow/photo.jpg?sz=128", "display_name": "Addison", "link": "https://stackoverflow.com/users/12482204/addison"}, "edited": false, "score": 0, "creation_date": 1575571403, "post_id": 59184707, "comment_id": 104620608, "body": "Great, thank you! That first line of code you provided did the trick!"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": -1, "last_activity_date": 1575494580, "last_edit_date": 1575494580, "creation_date": 1575493755, "answer_id": 59184707, "question_id": 59184540, "link": "https://stackoverflow.com/questions/59184540/initializing-an-array-of-structs-within-a-class-definition/59184707#59184707", "title": "Initializing an array of structs within a class definition", "body": "<blockquote>\n  <p>Is there a way to set all of the data values to -1,</p>\n</blockquote>\n\n<p>There isn't because the design of your node implies a specific design of the hash table. Since you have nodes, that implies that you use <a href=\"https://en.wikipedia.org/wiki/Hash_table#Separate_chaining\" rel=\"nofollow noreferrer\">separate chaining</a> for hash table collision resolution.</p>\n\n<p>And that means your bucket array <code>table</code> needs to be initialized with null pointers, otherwise it contains indeterminate values:</p>\n\n<pre><code>BSTNode* table[1019] = {}; // Zero-initialize buckets.\n</code></pre>\n\n<p>And then <code>lookup</code> member function is going to look like:</p>\n\n<pre><code>bool HashBST::lookup(int value) {\n    unsigned value_hash = hash(value); // Hash must be an unsigned value.\n    unsigned index = value_hash % tableSize;\n    for(BSTNode* node = table[index]; node; node = node-&gt;right) {\n        if(node-&gt;data == value)\n            return true;\n    }\n    return false;\n}\n</code></pre>\n\n<hr>\n\n<p>In a more advanced version the bucket table should be just a pointer <code>BSTNode* table;</code> which gets initialized with the result of <code>new[]</code> and the size of the referred table is in <code>tableSize</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 605, "user_id": 7128840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RdNYI.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/7128840/adam"}, "is_accepted": false, "score": -1, "last_activity_date": 1575494035, "creation_date": 1575494035, "answer_id": 59184755, "question_id": 59184540, "link": "https://stackoverflow.com/questions/59184540/initializing-an-array-of-structs-within-a-class-definition/59184755#59184755", "title": "Initializing an array of structs within a class definition", "body": "<p>Here is how I would do it in a C++ friendly way: </p>\n\n<p>Firstly, convert <code>table</code> to <code>std::vector</code>:</p>\n\n<p><code>std::vector&lt;BSTNode*&gt; table</code></p>\n\n<p>Create a constructor for <code>HashBst</code> that initializes your <code>std::vector&lt;T*&gt;</code> with all nullptr values. </p>\n\n<p><code>HashBST() : table(1019) {} //table items are all nullptr</code></p>\n"}], "owner": {"reputation": 3, "user_id": 12482204, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DVb_WEIUrAo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc_cOEk4I5nosEXety2yp-ojbFOow/photo.jpg?sz=128", "display_name": "Addison", "link": "https://stackoverflow.com/users/12482204/addison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 59184707, "answer_count": 2, "score": 0, "last_activity_date": 1575494580, "creation_date": 1575492793, "question_id": 59184540, "link": "https://stackoverflow.com/questions/59184540/initializing-an-array-of-structs-within-a-class-definition", "title": "Initializing an array of structs within a class definition", "body": "<p>I have a struct that creates nodes for a BST like this</p>\n\n<pre><code>struct BSTNode{\n    int data;\n    BSTNode *left;\n    BSTNode *right;\n};\n</code></pre>\n\n<p>and I need to create an array of these root nodes inside of a class</p>\n\n<pre><code>class HashBST{\npublic:\n    bool lookup(int);\n    void insert(int);\n    bool remove(int);\n    float getLoad();\n//private:\n    int hash(int);\n\n    BSTNode *table[1019];\n    float load;\n    int occupied = 0;\n    int tableSize = 1019;\n};\n</code></pre>\n\n<p>from there I want to be able to check and see if a BST node has an entry or not. Initially I tried setting the <code>data</code> int to -1 in the struct definition, but in my array in the class, each node had a garbage data value. </p>\n\n<p>Is there a way to set all of the data values to -1, or more ideally, set all the pointers in the <code>table</code> array to <code>NULL</code> until something is stored in them?</p>\n"}, {"tags": ["c++", "casting"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1575492533, "post_id": 59184426, "comment_id": 104589334, "body": "It can&#39;t be done. Find a workaround."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575492909, "post_id": 59184426, "comment_id": 104589476, "body": "You either need to overload or make your own type with a conversion operator.  Those are the only options."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1575496311, "post_id": 59184426, "comment_id": 104590607, "body": "\u201cImplicit typecast\u201d is a contradiction. A cast is something you write in your source code to tell the compiler to do a conversion. It is always explicit. The term you want is \u201cimplicit conversion\u201d."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1575495823, "last_edit_date": 1575495823, "creation_date": 1575495118, "answer_id": 59184936, "question_id": 59184426, "link": "https://stackoverflow.com/questions/59184426/how-to-define-an-implicit-conversion-for-typedefs/59184936#59184936", "title": "How to define an implicit conversion for typedefs?", "body": "<p>It is not possible to add new implicit conversions for existing classes, such as <code>std::pair</code>. Implicit conversions can only be member functions:</p>\n\n<ul>\n<li>A non-explicit constructor that can be called with one argument. If there are more arguments, they must have default values.</li>\n<li><code>operator T() const</code> conversion operator. </li>\n</ul>\n\n<p>And it is not possible to add new member functions to classes without changing class definition. This restriction is in place to prevent a function introduced at global or namespace scope from changing the semantics of your existing code. </p>\n\n<hr>\n\n<p>What you can do instead is create a new class with a conversion constructor (a non-explicit constructor that can be called with one argument):</p>\n\n<pre><code>struct MyPair : std::pair&lt;std::string, int&gt; {\n    // In this class scope pair now refers to std::pair&lt;std::string, int&gt;.\n\n    MyPair(std::string const&amp; a)\n        : pair(a, 0)\n    {}\n\n    MyPair(pair const&amp; a)\n        : pair(a)\n    {}\n};\n\n</code></pre>\n\n<p>The derivation from <code>std::pair&lt;std::string, int&gt;</code> makes it possible to pass <code>MyPair</code> where <code>std::pair&lt;std::string, int&gt;</code> is expected. And another constructor for converting <code>std::pair&lt;std::string, int&gt;</code> to <code>MyPair</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 10937722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213e9ded3908f26d735b26536a4c6472?s=128&d=identicon&r=PG&f=1", "display_name": "Coeus", "link": "https://stackoverflow.com/users/10937722/coeus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 211, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1575496956, "creation_date": 1575492238, "last_edit_date": 1575496956, "question_id": 59184426, "link": "https://stackoverflow.com/questions/59184426/how-to-define-an-implicit-conversion-for-typedefs", "title": "How to define an implicit conversion for typedefs?", "body": "<p>I want to have an automatic conversion from <code>std::string</code> into my type <code>my_type</code>, defined as</p>\n\n<p><code>typedef std::pair&lt;std::string,int&gt; my_type;</code></p>\n\n<p>such that the <code>.first</code> part of the converted <code>my_type</code> is the string and the <code>.second</code> part is always 0.</p>\n\n<p>It should also work if one calls the function <code>std::string fun(my_type x, ...) { return x.first; }</code> with, say,</p>\n\n<p><code>std::string s = \"Hello\"; fun(s, ...);</code>.</p>\n\n<p>I don't want to define a new class instead of <code>my_type</code> and also not to overload all of my functions if possible. I tried to wrap my head around how to use <code>operator</code> for this but I can't get my program to compile.</p>\n\n<p><strong>EDIT:</strong>\nSince this doesn't seem to be possible without defining a custom struct or so, here is a workaround that I came up with, but I was hoping it can be achieved without defining a new class/struct. Thank you for saving me more time trying to do this, though.</p>\n\n<pre><code>class Element {\n  public:\n    Element() {};\n    Element(std::string s, int a) { name = s; value = a; };\n    Element(std::string s) { name = s; value = 0; };\n    ...\n    std::string return_name() { return name; };\n  private:\n    std::string name;\n    int value;\n };\n\nstd::string fun(Element x) { return x.return_name(); };\n</code></pre>\n\n<p>Calling <code>std::string s = \"Hello\"; fun(s);</code> works now automatically.</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1575492009, "post_id": 59184269, "comment_id": 104589108, "body": "It&#39;s not clear to me what you&#39;re trying to do here. Are you attempting to convert <code>g</code> from an integer variable into a double variable?"}, {"owner": {"reputation": 169, "user_id": 12482112, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ogm7X.jpg?s=128&g=1", "display_name": "David Peterson", "link": "https://stackoverflow.com/users/12482112/david-peterson"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1575492088, "post_id": 59184269, "comment_id": 104589135, "body": "Yes..that&#39;s what I&#39;m trying to do"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1575492144, "post_id": 59184269, "comment_id": 104589161, "body": "That&#39;s not possible. <code>g</code> is declared an <code>int</code>. It will always be an <code>int</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575492146, "post_id": 59184269, "comment_id": 104589163, "body": "You can&#39;t change the type of a variable after you declare it."}, {"owner": {"reputation": 169, "user_id": 12482112, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ogm7X.jpg?s=128&g=1", "display_name": "David Peterson", "link": "https://stackoverflow.com/users/12482112/david-peterson"}, "edited": false, "score": 0, "creation_date": 1575492314, "post_id": 59184269, "comment_id": 104589236, "body": "I&#39;m not sure but I have seen examples where they change the data type by casting...let me actually post it in my question by editing"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575492399, "post_id": 59184444, "comment_id": 104589266, "body": "<i>An rvalue is not something you can assign to</i> This is only true for built in types.  Any class type rvalue can be assigned to unless you explicitly forbid it."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1575492404, "post_id": 59184444, "comment_id": 104589268, "body": "Note that <code>static_cast</code> can yield an lvalue if the type to convert to is a reference type."}, {"owner": {"reputation": 169, "user_id": 12482112, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ogm7X.jpg?s=128&g=1", "display_name": "David Peterson", "link": "https://stackoverflow.com/users/12482112/david-peterson"}, "edited": false, "score": 0, "creation_date": 1575492749, "post_id": 59184444, "comment_id": 104589413, "body": "Yeah...I guess you&#39;re right...maybe the only solution is to change int to double or float..."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 169, "user_id": 12482112, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ogm7X.jpg?s=128&g=1", "display_name": "David Peterson", "link": "https://stackoverflow.com/users/12482112/david-peterson"}, "edited": false, "score": 0, "creation_date": 1575492864, "post_id": 59184444, "comment_id": 104589454, "body": "@David I&#39;ve edited to try to address your example. Does that make sense?"}, {"owner": {"reputation": 169, "user_id": 12482112, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ogm7X.jpg?s=128&g=1", "display_name": "David Peterson", "link": "https://stackoverflow.com/users/12482112/david-peterson"}, "edited": false, "score": 0, "creation_date": 1575493095, "post_id": 59184444, "comment_id": 104589549, "body": "Ok..thank you everyone and thank you scohe001...Wish you all best of luck :)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1575578504, "post_id": 59184444, "comment_id": 104623758, "body": "You might want to mention that <code>rvalue</code> means value on the &quot;right hand side&quot; (of an assignment), and <code>lvalue</code> means value on the &quot;left hand side&quot; (of an assignment).  (Ie, the R and L means &quot;left&quot; and &quot;right&quot;).  But that name is legacy, so it is just a way to remember which is which."}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": true, "score": 6, "last_activity_date": 1575492853, "last_edit_date": 1575492853, "creation_date": 1575492297, "answer_id": 59184444, "question_id": 59184269, "link": "https://stackoverflow.com/questions/59184269/using-static-cast-over-compound-operators/59184444#59184444", "title": "Using static_cast over compound operators", "body": "<p>I think you're misunderstanding the function of <code>static_cast</code>.</p>\n\n<p><code>static_cast</code> will (if possible) convert a value to another type, and give you a resulting rvalue of the new type<sup>1</sup>. An <a href=\"https://en.cppreference.com/w/cpp/language/value_category\" rel=\"nofollow noreferrer\">rvalue</a> is not something you can assign to<sup>2</sup> (unlike an lvalue, which is what you're seeing in your error message).</p>\n\n<p>In C++ a variable's type is given once and only once during the declaration. For that variable's entire lifetime it'll be of the type it was declared (Note this is different from weaker typed languages like Python or JavaScript).</p>\n\n<hr>\n\n<p>In reply to your example, note that <strong>no variables are changing their types.</strong></p>\n\n<pre><code>average = static_cast&lt;double&gt;(total) / count;\n</code></pre>\n\n<p><code>average</code> was declared as a <code>double</code>, and it remains a <code>double</code>. The magic here is that you're casting <code>total</code> to <code>double</code>. So <code>static_cast&lt;double&gt;(total)</code> gives you a <code>double</code> with the equivalent value as the integer <code>total</code> (but this is no longer <code>total</code>! It's now a temporary unnamed <code>double</code>). You then divide that unnamed <code>double</code> by <code>count</code>, and assign the result to <code>average</code>. </p>\n\n<hr>\n\n<p><sup>1. Except in the case where the type to convert to is a reference type. (thanks Brian!)</sup><br>\n<sup>2. For native types. \"Any class type rvalue can be assigned to unless you explicitly forbid it.\" (Thanks Nathan!)</sup></p>\n"}], "owner": {"reputation": 169, "user_id": 12482112, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ogm7X.jpg?s=128&g=1", "display_name": "David Peterson", "link": "https://stackoverflow.com/users/12482112/david-peterson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 59184444, "answer_count": 1, "score": 4, "last_activity_date": 1575492853, "creation_date": 1575491569, "last_edit_date": 1575492402, "question_id": 59184269, "link": "https://stackoverflow.com/questions/59184269/using-static-cast-over-compound-operators", "title": "Using static_cast over compound operators", "body": "<p>I'm a beginner at C++ programming ...I was practicing and I encountered this problem...Here I'm trying to use static_cast over a compound operator...I'm actually trying to divide two integers and get the answer as double...This is the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main() {\n    int g {0}, h {0};\n    cout &lt;&lt; \"Enter g and h: \" &lt;&lt; endl;\n    cin &gt;&gt; g &gt;&gt; h;\n    static_cast&lt;double&gt;(g) /= (h);\n    cout &lt;&lt; \"g: \" &lt;&lt; g &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>now I know I can change int to double...or do something like this:</p>\n\n<pre><code>i = g/h;\ncout &lt;&lt; static_cast&lt;double&gt;(i) &lt;&lt; endl;\n</code></pre>\n\n<p>but let's make this a challenge...what if we actually need to enter integers (not doubles)?</p>\n\n<p>And this is the error I get:</p>\n\n<pre><code>error: lvalue required as left operand of assignment\n</code></pre>\n\n<p>Example: Changing data type by casting</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    int total {0};\n    int num1 {0}, num2 {0}, num3{0};\n    const int count {3};\n\n    cout &lt;&lt; \"Enter 3 integers: \";\n    cin &gt;&gt; num1 &gt;&gt; num2 &gt;&gt; num3;\n\n    total = num1 + num2 + num3;\n    double average {0.0};\n    //This is where it confuses almost everyone. Imagine total is equal to 50, so average is equal to 16.66.\n    //But the problem is that total is an integer so you will only get 16 as answer.\n    //The solution is to convert it by casting.\n    average = static_cast&lt;double&gt;(total) / count;\n    //average = (double)total/count;      //Old-Style code\n\n    cout &lt;&lt; \"The 3 numbers are: \" &lt;&lt; num1 &lt;&lt; \", \" &lt;&lt; num2 &lt;&lt; \", \" &lt;&lt; num3 &lt;&lt; endl;\n    cout &lt;&lt; \"The sum of the numbers are: \" &lt;&lt; total &lt;&lt; endl;\n    cout &lt;&lt; \"The average of the numbers is: \" &lt;&lt; average &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["android", "c++", "exception", "android-ndk", "segmentation-fault"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1575491398, "post_id": 59184160, "comment_id": 104588874, "body": "C++ exceptions unwind the stack.  If the exception tries to unwind a non-C++ frame and that non-C++ frame doesn&#39;t play nice with your particular C++ compiler&#39;s way of doing stack unwinding, SIGSEGV isn&#39;t surprising."}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 5630726, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N4ZkbtRMy9E/AAAAAAAAAAI/AAAAAAAADGk/PI0HS66jFn4/photo.jpg?sz=128", "display_name": "Mike Dudnik", "link": "https://stackoverflow.com/users/5630726/mike-dudnik"}, "is_accepted": false, "score": 0, "last_activity_date": 1583825726, "creation_date": 1583825726, "answer_id": 60613220, "question_id": 59184160, "link": "https://stackoverflow.com/questions/59184160/android-ndk-c-exceptions-cause-crash-with-3rd-party-native-library/60613220#60613220", "title": "Android NDK - C++ Exceptions cause crash with 3rd party native library", "body": "<p>I might be late for the party, but I've recently faced crashes of the same nature.\nIn my case it appeared that clang had known issue of compiling libs which are crashing on event of throwing \"native\" exceptions. I've upgraded my tool-chain, so now it cross-compiled via current-latest \"android-ndk-r21\".\nThat did it for me. </p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 8649279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b72235f907e147341f61d5064376372?s=128&d=identicon&r=PG&f=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/8649279/colin"}, "is_accepted": true, "score": 0, "last_activity_date": 1586965377, "creation_date": 1586965377, "answer_id": 61232837, "question_id": 59184160, "link": "https://stackoverflow.com/questions/59184160/android-ndk-c-exceptions-cause-crash-with-3rd-party-native-library/61232837#61232837", "title": "Android NDK - C++ Exceptions cause crash with 3rd party native library", "body": "<p>It turns out, the issue was the third party library.  If a native library is built without exceptions, then code that calls that library also cannot use exceptions.</p>\n\n<p>Very frustrating.</p>\n"}], "owner": {"reputation": 13, "user_id": 8649279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b72235f907e147341f61d5064376372?s=128&d=identicon&r=PG&f=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/8649279/colin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 61232837, "answer_count": 2, "score": 0, "last_activity_date": 1586965377, "creation_date": 1575491079, "question_id": 59184160, "link": "https://stackoverflow.com/questions/59184160/android-ndk-c-exceptions-cause-crash-with-3rd-party-native-library", "title": "Android NDK - C++ Exceptions cause crash with 3rd party native library", "body": "<p>I am having an issue in an android native library I am creating that is dependant on another 3rd party library.</p>\n\n<p>I am using a proprietary Android POS terminal (Android Lollipop API 22).  It comes with a proprietary native library \".so\" and I am wrapping that library with my own native code that will be called from Android Java.</p>\n\n<p>The issue I have, is when my code throws a c++ exception that is caught inside the native library (that is, I am not throwing an exception to java) the application crashes with SIGSEGV fatal error at the throw statement.</p>\n\n<p>If I take the 3rd party native library out of the link, I can throw and catch exceptions all I want.  Add back the \".so\" library, and any throw causes a crash.</p>\n\n<p>Any idea how to troubleshoot or resolve the issue?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1575490479, "post_id": 59184002, "comment_id": 104588476, "body": "Use a <code>std::array</code> instead of raw arrays."}], "answers": [{"comments": [{"owner": {"reputation": 2708, "user_id": 383632, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MT9E1.png?s=128&g=1", "display_name": "Bartvbl", "link": "https://stackoverflow.com/users/383632/bartvbl"}, "edited": false, "score": 0, "creation_date": 1575506953, "post_id": 59184273, "comment_id": 104593456, "body": "Thanks! Not being able to modify the array&#39;s contents at runtime was exactly the point, though :)"}], "tags": [], "owner": {"reputation": 805, "user_id": 7908019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wBTC1gSxMPU/AAAAAAAAAAI/AAAAAAAAABY/85JVWoAxQI0/photo.jpg?sz=128", "display_name": "Gerard097", "link": "https://stackoverflow.com/users/7908019/gerard097"}, "is_accepted": true, "score": 3, "last_activity_date": 1575491578, "creation_date": 1575491578, "answer_id": 59184273, "question_id": 59184002, "link": "https://stackoverflow.com/questions/59184002/how-do-i-initialise-a-const-array-struct-field-with-the-output-of-a-function/59184273#59184273", "title": "How do I initialise a const array struct field with the output of a function?", "body": "<p>As Nathan suggested you should change the raw array with an <code>std::array</code>. This way you still have the benefit of stack allocation but now you can initialize from a copy.</p>\n\n<pre><code>using MyArray = std::array&lt;unsigned int, 32&gt;;\n\nconst MyArray listOfValues;\n\nMyArray processParameters(unsigned int parameter) {\n\n    MyArray arrayValues;\n\n    for(int i = 0; i &lt; 32; i++) {\n        arrayValues[i] = i * parameter;\n    }\n    return arrayValues;\n}\n</code></pre>\n\n<p>I removed the const from the array data type since it's not necesary because your array is const already, also with const unsigned int you wouldn't be able to set the values of <code>arrayValues</code> at run time.</p>\n"}, {"tags": [], "owner": {"reputation": 166, "user_id": 9166558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/478cc3ab8ce513fa5e43f931f104cd7a?s=128&d=identicon&r=PG&f=1", "display_name": "T W Bennet", "link": "https://stackoverflow.com/users/9166558/t-w-bennet"}, "is_accepted": false, "score": 1, "last_activity_date": 1575491722, "creation_date": 1575491722, "answer_id": 59184302, "question_id": 59184002, "link": "https://stackoverflow.com/questions/59184002/how-do-i-initialise-a-const-array-struct-field-with-the-output-of-a-function/59184302#59184302", "title": "How do I initialise a const array struct field with the output of a function?", "body": "<p>Does this serve your purpose?  No heap allocations that I can see.</p>\n\n<pre><code>struct SomeType {\n    const unsigned int *listOfValues;\n\n    const unsigned int * processParameters(unsigned int parameter) {\n        for(int i = 0; i &lt; 32; i++) {\n            _listOfValues[i] = i * parameter;\n        }\n        return _listOfValues;\n    }\n\n    SomeType(unsigned int parameter) :\n        listOfValues(processParameters(parameter))\n    {\n\n    }\n    private:\n        unsigned int _listOfValues[32];\n};\n</code></pre>\n"}], "owner": {"reputation": 2708, "user_id": 383632, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MT9E1.png?s=128&g=1", "display_name": "Bartvbl", "link": "https://stackoverflow.com/users/383632/bartvbl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 59184273, "answer_count": 2, "score": 3, "last_activity_date": 1575491722, "creation_date": 1575490382, "question_id": 59184002, "link": "https://stackoverflow.com/questions/59184002/how-do-i-initialise-a-const-array-struct-field-with-the-output-of-a-function", "title": "How do I initialise a const array struct field with the output of a function?", "body": "<p>I have a struct that contains a const array, and would like to initialise it to specific values upon construction. Unfortunately, its contents depend on several parameters which are passed into the constructor as parameters, and require a function to compute the contents of the array.</p>\n\n<p>What I'd ideally like to do looks something like this:</p>\n\n<pre><code>struct SomeType {\n    const unsigned int listOfValues[32];\n\n    unsigned int[32] processParameters(unsigned int parameter) {\n        unsigned int arrayValues[32];\n        for(int i = 0; i &lt; 32; i++) {\n            arrayValues[i] = i * parameter;\n        }\n        return arrayValues;\n    }\n\n    SomeType(unsigned int parameter) : listOfValues(processParameters(parameter)) {\n\n    }\n};\n</code></pre>\n\n<p>Of course there are several issues here (returning an array from a function is not possible, data type mismatches, etc). However, is there any way this <em>is</em> possible?</p>\n\n<p>I've seen other similar questions suggest using a std::vector for this, but the heap allocation(s) this incurs is something my performance budget can't afford.</p>\n"}, {"tags": ["c++", "function", "loops", "matrix", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1575490917, "post_id": 59183977, "comment_id": 104588674, "body": "You are passing a pointer-by-value.  You are not changing the pointer.  You are changing what the pointer points to.  What the pointer points to was not &quot;pass by value&quot; (it wasn&#39;t passed at all).  Note that C-style arrays readily <i>decay</i> into pointers."}, {"owner": {"reputation": 37, "user_id": 12299255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b0f1726b1125d216621cb573d505d2?s=128&d=identicon&r=PG&f=1", "display_name": "ric", "link": "https://stackoverflow.com/users/12299255/ric"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1575491332, "post_id": 59183977, "comment_id": 104588854, "body": "@Eljay ok thank you"}], "owner": {"reputation": 37, "user_id": 12299255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b0f1726b1125d216621cb573d505d2?s=128&d=identicon&r=PG&f=1", "display_name": "ric", "link": "https://stackoverflow.com/users/12299255/ric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575490273, "creation_date": 1575490273, "question_id": 59183977, "link": "https://stackoverflow.com/questions/59183977/why-this-program-works-else-if-parameters-have-passed-through-value", "title": "Why this program works else if parameters have passed through value?", "body": "<p>In this program I allocate a squared matrix in the function inserimento but I passed the arguments by value and so it wouldn't worked but the output of printf is right.\nWhy?</p>\n\n<p>// MAX is a costant that represents the both maximum of lines and rows.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAX 10\n\nusing namespace std;\n\nvoid insert(int **matrix,int &amp;riga);\nvoid print(int **matrix,int riga);\n\n\nint main(){\n    int *matrix[MAX];\n    int riga;\n    insert(matrix,riga);\n    print(matrix,riga);\n\n    cin.get();\n    return 0;\n}\n\nvoid insert(int **matrix,int &amp;riga){\n    int i,j;\n    cout&lt;&lt;\"Dimmi la riga\"&lt;&lt;endl;\n    cin&gt;&gt;riga;\n    while(cin.get()!='\\n');\n    cout&lt;&lt;\"c\";\n    *matrix=new int [riga];\n    cout&lt;&lt;\"c\";\n    for(i=0;i&lt;riga;i++){\n        matrix[i]=new int [riga];\n    }\n\n    for(i=0;i&lt;riga;i++){\n        for(j=0;j&lt;riga;j++){\n            cout&lt;&lt;\"dimmi n\"&lt;&lt;endl;\n            cin&gt;&gt;matrix[i][j];\n        }\n    }\n}\n\nvoid print(int *matrix[],int riga){\n    int i,j;\n        for(i=0;i&lt;riga;i++){\n            for(j=0;j&lt;riga;j++){\n                cout&lt;&lt;matrix[i][j]&lt;&lt;\"\\t\";\n            }   \n            cout&lt;&lt;endl;\n        }\n}\n</code></pre>\n"}, {"tags": ["c++", "memory-management", "global-variables", "static-libraries", "undefined-behavior"], "comments": [{"owner": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "edited": false, "score": 3, "creation_date": 1575489207, "post_id": 59183674, "comment_id": 104587971, "body": "It lives through the lifetime of the compilation unit that&#39;s using it. Yes it&#39;s allowed to do this, but it&#39;s bad practice."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 2, "creation_date": 1575490665, "post_id": 59183674, "comment_id": 104588562, "body": "<code>extern</code> should not be used on function definitions. It has no effect, and potentially confuses the reader."}, {"owner": {"reputation": 249, "user_id": 7277003, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e4d86d399ff2cca8ff66f6cac10b3ad4?s=128&d=identicon&r=PG&f=1", "display_name": "SampleTime", "link": "https://stackoverflow.com/users/7277003/sampletime"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1575491449, "post_id": 59183674, "comment_id": 104588896, "body": "@Brian You are right... I thought that I can use it to control which functions become &quot;visible&quot; for users of the library, but apparently, that&#39;s not the case. Is there a different keyword used for such a feature?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1575491530, "post_id": 59183674, "comment_id": 104588923, "body": "You can declare functions <code>static</code> in order to make them private to the translation unit. Declaring them in an anonymous namespace has the same effect."}], "answers": [{"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": true, "score": 2, "last_activity_date": 1575489893, "creation_date": 1575489893, "answer_id": 59183903, "question_id": 59183674, "link": "https://stackoverflow.com/questions/59183674/how-long-live-global-variables-in-a-static-library/59183903#59183903", "title": "How long live global variables in a static library?", "body": "<p>You can think of global variables being initialized before <code>main()</code> is entered and destroyed after <code>main()</code> exits.</p>\n\n<p>The actual rules are a bit more complex, but in most simple situations like this that will cover you.</p>\n\n<hr>\n\n<p>What you are referring to as a global variable in this case is actually \"static storage duration object\" with \"global scope\".</p>\n\n<p>There are other examples of static storage duration objects.</p>\n\n<pre><code>extern int foo(int i)\n{\n    static int global = 0;   // marking this static inside a function\n                             // makes it a static storage duration\n                             // object that lives longer than the function.\n\n    global += i;\n    return global;\n}\n</code></pre>\n"}], "owner": {"reputation": 249, "user_id": 7277003, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e4d86d399ff2cca8ff66f6cac10b3ad4?s=128&d=identicon&r=PG&f=1", "display_name": "SampleTime", "link": "https://stackoverflow.com/users/7277003/sampletime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 59183903, "answer_count": 1, "score": 0, "last_activity_date": 1575489893, "creation_date": 1575488938, "question_id": 59183674, "link": "https://stackoverflow.com/questions/59183674/how-long-live-global-variables-in-a-static-library", "title": "How long live global variables in a static library?", "body": "<p>Assume I have the following static library, implemented in C++:</p>\n\n<pre><code>int global = 0;\n\nextern int foo(int i)\n{\n    global += i;\n    return global;\n}\n</code></pre>\n\n<p>And I use it as follows in my project:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nextern int foo(int i);\n\nint main()\n{\n    std::cout &lt;&lt; foo(1) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; foo(1) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; foo(1) &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>This code prints out:</p>\n\n<pre><code>1\n2\n3\n</code></pre>\n\n<p>So, apparently, the global variable \"survives\" the function call, unlike when I would implement foo in an executable and call that executable multiple times, the global variable would be set to zero each time.</p>\n\n<p><strong>Question</strong>: How long do global variables live in a static library used like above? As long as the <code>main</code> function of the calling executable? Is it even allowed to do this?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "edited": false, "score": 1, "creation_date": 1575489022, "post_id": 59183629, "comment_id": 104587884, "body": "Initialize your <code>double_array</code> in the <code>else {}</code> block.  If you need it in both, initialize it before the <code>if{}</code> block"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 7, "creation_date": 1575489264, "post_id": 59183629, "comment_id": 104587991, "body": "Your professor is wrong. C++ only supports <i>Variable Length Arrays</i> (VLAs) through NON-Standard compiler extension. The C++ Standard does not provide for their use.. <code>std::vector&lt;std::vector &lt;int&gt;&gt;</code> will, or, not recommended, you can use <code>new&#47;delete[]</code>."}, {"owner": {"reputation": 1, "user_id": 11168156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000d60cd4675dc9adbd9d8633877e85f?s=128&d=identicon&r=PG&f=1", "display_name": "David Sanchez Gracia", "link": "https://stackoverflow.com/users/11168156/david-sanchez-gracia"}, "edited": false, "score": 0, "creation_date": 1575489290, "post_id": 59183629, "comment_id": 104588006, "body": "Thanks a lot! It is so simple, yet it didn&#39;t come to my mind"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1575495449, "post_id": 59183629, "comment_id": 104590348, "body": "<i>our teacher said it must be implemented this way</i> -- That code is wrong.  Have your teacher try this trick with Visual C++, and they will rightly be greeted with a compiler error."}], "owner": {"reputation": 1, "user_id": 11168156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000d60cd4675dc9adbd9d8633877e85f?s=128&d=identicon&r=PG&f=1", "display_name": "David Sanchez Gracia", "link": "https://stackoverflow.com/users/11168156/david-sanchez-gracia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1579115183, "creation_date": 1575488773, "last_edit_date": 1579115183, "question_id": 59183629, "link": "https://stackoverflow.com/questions/59183629/not-initiating-c-two-dimension-arrays", "title": "Not Initiating C++ two dimension arrays", "body": "<p>My case is really simple, in fact I am unable to find an optimal solution for it.</p>\n\n<p>In the code I'm developing I must create a two dimensional array in this way (our teacher said it must be implemented this way):</p>\n\n<pre><code>while{\n  if(first_case){\n    int number_of_elements&lt;&lt;INPUT;\n    int double_array[number_of_elements][number_of_elements];\n  }else{\n  //NOW WE WORK WITH THE double_array\n  }\n}\n</code></pre>\n\n<p>The thing is that obviously the program doesn't compile because the loop may not access the first \"if\" before going to the \"else\". On the other hand, I can't leave without initiating a two dimensional array in c++.</p>\n\n<p>I am pretty lost right now and I would much appreciate any help you may provide.</p>\n"}, {"tags": ["c++", "function", "templates", "if-statement", "parameters"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11798915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22fb41e1a6a0ba7dc768ff1bf8624020?s=128&d=identicon&r=PG&f=1", "display_name": "Hamoud", "link": "https://stackoverflow.com/users/11798915/hamoud"}, "edited": false, "score": 0, "creation_date": 1575489867, "post_id": 59183636, "comment_id": 104588236, "body": "but i&#39;m testing my program with (&quot;float , int , and char &quot;)"}, {"owner": {"reputation": 23, "user_id": 11798915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22fb41e1a6a0ba7dc768ff1bf8624020?s=128&d=identicon&r=PG&f=1", "display_name": "Hamoud", "link": "https://stackoverflow.com/users/11798915/hamoud"}, "edited": false, "score": 0, "creation_date": 1575490754, "post_id": 59183636, "comment_id": 104588605, "body": "i edit it but still not working for the template function to check whether is odd or even"}, {"owner": {"reputation": 23, "user_id": 11798915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22fb41e1a6a0ba7dc768ff1bf8624020?s=128&d=identicon&r=PG&f=1", "display_name": "Hamoud", "link": "https://stackoverflow.com/users/11798915/hamoud"}, "edited": false, "score": 0, "creation_date": 1575490769, "post_id": 59183636, "comment_id": 104588613, "body": "i edit it but still not working for the template function to check whether is odd or even"}], "tags": [], "owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "is_accepted": false, "score": 2, "last_activity_date": 1575489204, "last_edit_date": 1575489204, "creation_date": 1575488798, "answer_id": 59183636, "question_id": 59183592, "link": "https://stackoverflow.com/questions/59183592/i-have-been-created-a-template-function-but-i-got-an-error-for-checking-if-the-i/59183636#59183636", "title": "I have been created a template function but i got an error for checking if the input is an odd or even in C++", "body": "<p>The modulus (%) operator does not work with <code>double</code> or <code>float</code>.</p>\n\n<p>You can create a specialization of the function and use <code>fmod()</code>/<code>fmodf()</code> instead.\nBeware of comparing floating point numbers with <code>0</code> though.</p>\n\n<pre><code>template&lt;&gt;\nfloat mini(float a, float b)\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1087, "user_id": 2129218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bf5ffff85c1f5609fca08eb8e05279?s=128&d=identicon&r=PG", "display_name": "Build Succeeded", "link": "https://stackoverflow.com/users/2129218/build-succeeded"}, "is_accepted": true, "score": 2, "last_activity_date": 1575489186, "creation_date": 1575489186, "answer_id": 59183734, "question_id": 59183592, "link": "https://stackoverflow.com/questions/59183592/i-have-been-created-a-template-function-but-i-got-an-error-for-checking-if-the-i/59183734#59183734", "title": "I have been created a template function but i got an error for checking if the input is an odd or even in C++", "body": "<p>Go with fmod as the double don't have the operator % implemented.</p>\n\n<p>Below link can help more:\n<a href=\"https://stackoverflow.com/questions/20237232/error-c2296-illegal-left-operand-has-type-double-in-c\">error C2296: &#39;%&#39; : illegal, left operand has type &#39;double&#39; in C++</a></p>\n"}, {"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 1, "last_activity_date": 1575494548, "creation_date": 1575494548, "answer_id": 59184845, "question_id": 59183592, "link": "https://stackoverflow.com/questions/59183592/i-have-been-created-a-template-function-but-i-got-an-error-for-checking-if-the-i/59184845#59184845", "title": "I have been created a template function but i got an error for checking if the input is an odd or even in C++", "body": "<p>Doing this with floating points is a bit tricky since there's no guarantee that the remainder of a division with 2 will result in exactly 0 even for entered numbers that are clearly even. Also, the numbers you enter may not be stored exactly as you entered them, which can also change the odd/even characteristic. <a href=\"https://en.cppreference.com/w/cpp/types/numeric_limits/epsilon\" rel=\"nofollow noreferrer\">Epsilon</a> can help in some cases, but it'll just settle for <code>&gt;</code> 0 here:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;type_traits&gt;\n#include &lt;limits&gt;\n#include &lt;sstream&gt;\n#include &lt;iomanip&gt;\n\n// the function template for integer types\ntemplate &lt;class type, std::enable_if_t&lt;std::is_integral_v&lt;type&gt;, int&gt; = 0&gt;\ntype mini(type a, type b)\n{\n    auto min = std::min(a, b);\n    if(min%2) std::cout &lt;&lt; \"The int \" &lt;&lt; min &lt;&lt; \" is odd\\n\";\n    else std::cout &lt;&lt; \"The int \" &lt;&lt; min &lt;&lt; \" is even\\n\";\n    return min;\n}\n\n// the function template for floating point types\ntemplate&lt;class type, std::enable_if_t&lt;std::is_floating_point_v&lt;type&gt;, int&gt; = 0&gt;\ntype mini(type a, type b) {\n    auto min = std::min(a, b);\n\n    // do the floating point modulus operation\n    auto mod = std::abs(std::fmod(min, type{2}));\n\n    // check if it's bigger than a default initialized \"type\" (0.f or 0.)\n    if(mod &gt; type{}) // std::numeric_limits&lt;type&gt;::epsilon())\n        std::cout &lt;&lt; \"The float \" &lt;&lt; min &lt;&lt; \" is odd\\n\";\n    else\n        std::cout &lt;&lt; \"The float \" &lt;&lt; min &lt;&lt; \" is even\\n\";\n    return min;\n}\n\n// the rest is just for testing\n\nstd::istringstream cin(\n    \"5 4\\n\"\n    \"a b\\n\"\n    \"6.1 4.0000002\\n\"             // float  - even, stored as 4\n    \"6.1 4.0000001\\n\"             // double - odd, has enough precision\n    \"6666666653 6666666653\\n\"     // float  - looks odd, right? Probably not...\n);\n\ntemplate&lt;typename type&gt;\nvoid enter(const char* txt) {\n    type a, b;\n    std::cout &lt;&lt; \"Enter two \" &lt;&lt; txt &lt;&lt; ':';\n    if(cin &gt;&gt; a &gt;&gt; b)\n        mini(a, b);\n}\n\nint main()\n{\n    std::cout &lt;&lt; std::setprecision(20);\n    enter&lt;int&gt;(\"ints\");\n    enter&lt;char&gt;(\"chars\");\n    enter&lt;float&gt;(\"floats\");\n    enter&lt;double&gt;(\"doubles\");\n    enter&lt;float&gt;(\"floats again\");\n}\n</code></pre>\n\n<p>Possible output:</p>\n\n<pre><code>Enter two ints:The int 4 is even\nEnter two chars:The int a is odd\nEnter two floats:The float 4 is even\nEnter two doubles:The float 4.0000001000000002804 is odd\nEnter two floats again:The float 6666666496 is even\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11798915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22fb41e1a6a0ba7dc768ff1bf8624020?s=128&d=identicon&r=PG&f=1", "display_name": "Hamoud", "link": "https://stackoverflow.com/users/11798915/hamoud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 59183734, "answer_count": 3, "score": 0, "last_activity_date": 1575494548, "creation_date": 1575488610, "last_edit_date": 1575489819, "question_id": 59183592, "link": "https://stackoverflow.com/questions/59183592/i-have-been-created-a-template-function-but-i-got-an-error-for-checking-if-the-i", "title": "I have been created a template function but i got an error for checking if the input is an odd or even in C++", "body": "<p>I have been created the template function to check for the minimum between three different data types which are ( int , float , and char ) I think my code is pretty much good but when it come to executing it said <code>invalid operands of types 'float' and 'int' to binary operator %</code> I'm not sure what to do in this case, my code is : </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\nusing namespace std;\n\ntemplate &lt;class type&gt;\n\n    type mini(type a , type b)\n    {\n        type x;\n        x = fmod(a,b);\n        if (x ==0)\n        {\n            cout&lt;&lt;\"it is an even\";\n            return x;\n        }\n        else\n            cout&lt;&lt;\"it is an odd\";\n            return x;\n    }\n\nint main()\n{\n    cout&lt;&lt;\"Enter an integer:\";\n    int a,b;\n    cin&gt;&gt;a&gt;&gt;b;\n    mini &lt;int&gt; (a,b);\n    cout&lt;&lt;\"\\n\";\n    cout&lt;&lt;\"Enter a character:\";\n    char x,y;\n    cin&gt;&gt;x&gt;&gt;y;\n    mini &lt;char&gt; (x,y);\n    cout&lt;&lt;\"\\n\";\n    cout&lt;&lt;\"Enter a floating pointing:\";\n    float c,d;\n    cin&gt;&gt;c&gt;&gt;d;\n    mini &lt;float&gt; (c,d);\n    cout&lt;&lt;\"\\n\";\n    return 0;\n}\n\n</code></pre>\n\n<p>I updated the code, is it correct ? </p>\n"}, {"tags": ["c++", "c++11", "gcc"], "comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1575575976, "post_id": 59183456, "comment_id": 104622710, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/203696/discussion-on-question-by-c-m-stdmutexlock-produces-weird-and-unnecessar\">moved to chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2298, "user_id": 6427477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oYQ8Y.png?s=128&g=1", "display_name": "C.M.", "link": "https://stackoverflow.com/users/6427477/c-m"}, "edited": false, "score": 0, "creation_date": 1582821376, "post_id": 60436198, "comment_id": 106917264, "body": "Makes sense... Thank you."}], "tags": [], "owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "is_accepted": true, "score": 1, "last_activity_date": 1582815969, "creation_date": 1582815969, "answer_id": 60436198, "question_id": 59183456, "link": "https://stackoverflow.com/questions/59183456/stdmutexlock-produces-weird-and-unnecessary-asm-code/60436198#60436198", "title": "std::mutex::lock() produces weird (and unnecessary) asm code", "body": "<p>It seems that you are misinterpreting the asm output. What you see is not the code of foo but the inlined code of <code>mutex::lock</code>.</p>\n\n<p>From <a href=\"https://github.com/gcc-mirror/gcc/blob/master/libstdc%2B%2B-v3/include/std/mutex\" rel=\"nofollow noreferrer\">https://github.com/gcc-mirror/gcc/blob/master/libstdc%2B%2B-v3/include/std/mutex</a>:</p>\n\n<pre><code>void lock() // in class mutex\n{\n    int __e = __gthread_recursive_mutex_lock(&amp;_M_mutex);\n\n    // EINVAL, EAGAIN, EBUSY, EINVAL, EDEADLK(may)\n    if (__e)\n        __throw_system_error(__e);\n}\n</code></pre>\n\n<p>From <a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-4.0/gthr-default_8h-source.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-4.0/gthr-default_8h-source.html</a>:</p>\n\n<pre><code>static inline int __gthread_recursive_mutex_lock (__gthread_recursive_mutex_t *mutex)\n{\n    return __gthread_mutex_lock (mutex);\n}\n\nstatic inline int __gthread_mutex_lock (__gthread_mutex_t *mutex)\n{\n    if (__gthread_active_p ())\n        return pthread_mutex_lock (mutex);\n    else\n        return 0;\n}\n</code></pre>\n\n<p>The names do not exactly match your asm code, so I probably looked at a different libstdc++ source, but to me it looks like the compiler inlined <code>mutex::lock</code> into your function <code>foo</code> and it also inlined the functions that <code>mutex::lock</code> is calling.</p>\n"}], "owner": {"reputation": 2298, "user_id": 6427477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oYQ8Y.png?s=128&g=1", "display_name": "C.M.", "link": "https://stackoverflow.com/users/6427477/c-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 60436198, "answer_count": 1, "score": 7, "last_activity_date": 1582815969, "creation_date": 1575488012, "question_id": 59183456, "link": "https://stackoverflow.com/questions/59183456/stdmutexlock-produces-weird-and-unnecessary-asm-code", "title": "std::mutex::lock() produces weird (and unnecessary) asm code", "body": "<p>I was checking generated asm for some of my code and my eye caught some <a href=\"https://godbolt.org/z/tknRf6\" rel=\"noreferrer\">interesting stuff</a>:</p>\n\n<pre><code>#include &lt;mutex&gt;\n\nstd::mutex m;\n\nvoid foo()\n{\n    m.lock();\n}\n</code></pre>\n\n<p>generated asm code (x86-64 gcc 9.2, <code>-std=c++11 -O2</code>):</p>\n\n<pre><code>foo():\n        mov     eax, OFFSET FLAT:_ZL28__gthrw___pthread_key_createPjPFvPvE\n        test    rax, rax\n        je      .L10                  // (1) we can simply bypass lock() call?\n        sub     rsp, 8\n        mov     edi, OFFSET FLAT:m\n        call    __gthrw_pthread_mutex_lock(pthread_mutex_t*)\n        test    eax, eax\n        jne     .L14                  // (2) waste of space that will never be executed\n        add     rsp, 8\n        ret\n.L10:\n        ret\n.L14:\n        mov     edi, eax\n        call    std::__throw_system_error(int)\nm:\n        .zero   40\n</code></pre>\n\n<p>Questions:</p>\n\n<ul>\n<li>part (1) -- gcc specific: \n\n<ul>\n<li>what it is doing? (allocating TLS entry?)</li>\n<li>how failing that operation allows us to silently bypass <code>lock()</code> call?</li>\n</ul></li>\n<li>part (2) -- looks like each compiler is affected:\n\n<ul>\n<li><code>std::mutex::lock()</code> <a href=\"https://en.cppreference.com/w/cpp/thread/mutex/lock\" rel=\"noreferrer\">can throw</a> according to standard</li>\n<li>... but it never does in correct code (as discussed in related SO posts), for all intents and purposes <code>std::mutex::lock()</code> is always <code>noexcept</code> in correct code</li>\n<li>is it possible to let compiler know so that it stops emitting unnecessary tests and instruction blocks (like <code>.L14</code> above)?</li>\n</ul></li>\n</ul>\n\n<p><strong>Note:</strong> I can't see how throwing from <code>std::mutex::lock()</code> is better than simply <code>abort()</code>ing. In both cases your program is screwed (no one expects it to fail), but at least in latter case you end up with considerably smaller asm code (\"pay only for something you use\", remember?).</p>\n"}, {"tags": ["c++", "debugging", "exception", "linked-list"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1575486467, "post_id": 59183065, "comment_id": 104586877, "body": "Did you try to step through your code, <b>line-by-line</b>, with a debugger, while investigating the values of all of the variables, at <b>each</b> execution step, while seeing where it stops matching your expectations? Visual Studio has an excellent debugger."}, {"owner": {"reputation": 51, "user_id": 11037784, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ge0BY5sc5aA/AAAAAAAAAAI/AAAAAAAAM_c/EBzE96UZc_o/photo.jpg?sz=128", "display_name": "lambozsolty", "link": "https://stackoverflow.com/users/11037784/lambozsolty"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1575486824, "post_id": 59183065, "comment_id": 104587016, "body": "@RemyLebeau thanks for your answer! How could I implement insert()function?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1575488383, "post_id": 59183065, "comment_id": 104587620, "body": "@lambozsolty See the answer I just posted"}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1575488358, "creation_date": 1575488358, "answer_id": 59183524, "question_id": 59183065, "link": "https://stackoverflow.com/questions/59183065/exception-thrown-in-ordered-linked-listwrite-access-violation/59183524#59183524", "title": "Exception thrown in ordered linked list(write access violation)", "body": "<p><code>insert()</code> is coded all wrong. When the list is empty, it tries to access the members of <code>first</code> when <code>first</code> hasn't been allocated yet and is still <code>nullptr</code>. In fact, <code>insert()</code> doesn't even try to allocate any <code>Node</code> instances at all. You need to add calls to <code>new</code> inside of <code>insert()</code>.</p>\n\n<p>Also, <code>remove()</code> is accessing <code>Node</code> members via <code>nullptr</code> pointers, too.</p>\n\n<p>Also, <code>isEmpty()</code> is returning the wrong value, it needs to use <code>==</code> instead of <code>&gt;</code>.</p>\n\n<p>Try something more like this instead:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#pragma once\n#include &lt;iostream&gt;\n\ntemplate &lt;class T, class LessComp = std::less&lt;T&gt;, class EqualComp = std::equal_to&lt;T&gt; &gt;\nclass OrderedList \n{\n    private:\n        struct Node \n        {\n            T value;\n            Node* next;\n            Node(const T&amp; value, Node* next = nullptr) : value(value), next(next) {}\n        };\n\n        Node* first = nullptr;\n        int numElements = 0;\n\n    public:\n        OrderedList() = default;\n        OrderedList(const OrderedList&amp;) = delete;\n        ~OrderedList();\n\n        bool isEmpty() const;\n        void insert(const T&amp;);\n        void remove(const T&amp;);\n        int size() const;\n        bool find(const T&amp;) const;\n        void listItems(std::ostream&amp;) const;\n};\n\ntemplate &lt;class T, class LessComp, class EqualComp &gt;\nOrderedList&lt;T, LessComp, EqualComp&gt;::~OrderedList()\n{\n    Node* current = first;\n    Node* next;\n\n    while (current)\n    {\n        next = current-&gt;next;\n        delete current;\n        current = next;\n    }\n\n    numElements = 0;\n}\n\ntemplate &lt;class T, class LessComp, class EqualComp &gt;\nbool OrderedList&lt;T, LessComp, EqualComp&gt;::isEmpty() const\n{\n    return numElements == 0;\n    // or: return first == nullptr;\n}\n\ntemplate &lt;class T, class LessComp, class EqualComp &gt;\nvoid OrderedList&lt;T, LessComp, EqualComp&gt;::insert(const T&amp; element)\n{\n    Node* temp = first;\n    Node* node = nullptr;\n\n    LessComp lesscomp;\n\n    if (!first)\n    {\n        first = new Node(element);\n    }\n    else if (lesscomp(element, first-&gt;value))\n    {\n        first = new Node(element, first);\n    }\n    else\n    {\n        while (temp-&gt;next &amp;&amp; !lesscomp(element, temp-&gt;value))\n        {\n            temp = temp-&gt;next;\n        }\n\n        temp-&gt;next = new Node(element, temp-&gt;next);\n    }\n\n    ++numElements;\n}\n\ntemplate &lt;class T, class LessComp, class EqualComp &gt;\nvoid OrderedList&lt;T, LessComp, EqualComp&gt;::remove(const T&amp; element) \n{\n    Node* current = first;\n    Node** prev = &amp;first;\n\n    EqualComp equalcomp;\n\n    while (current)\n    {\n        if (equalcomp(current-&gt;value, element))\n        {\n            *prev = current-&gt;next;\n            delete current;\n            --numElements;\n            return;\n        }\n\n        prev = &amp;(current-&gt;next);\n        current = current-&gt;next;\n    }\n}\n\ntemplate &lt;class T, class LessComp, class EqualComp &gt;\nint OrderedList&lt;T, LessComp, EqualComp&gt;::size() const\n{\n    return numElements;\n}\n\ntemplate &lt;class T, class LessComp, class EqualComp &gt;\nbool OrderedList&lt;T, LessComp, EqualComp&gt;::find(const T&amp; element) const\n{\n    Node* current = first;\n\n    EqualComp equalcomp;\n\n    while (current)\n    {\n        if (equalcomp(current-&gt;value, element))\n        {\n            return true;\n        }\n\n        current = current-&gt;next;\n    }\n\n    return false;\n}\n\ntemplate &lt;class T, class LessComp, class EqualComp &gt;\nvoid OrderedList&lt;T, LessComp, EqualComp&gt;::listItems(std::ostream&amp; os) const\n{\n    Node* temp = first;\n\n    while (temp)\n    {\n        os &lt;&lt; temp-&gt;value &lt;&lt; std::endl;\n        temp = temp-&gt;next;\n    }\n}\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main()\n{\n    OrderedList&lt;int&gt; l;\n\n    l.insert(3);\n    l.insert(6);\n    l.insert(56);\n    l.insert(1);\n\n    l.listItems(cout);\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/gL1F3J\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}], "owner": {"reputation": 51, "user_id": 11037784, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ge0BY5sc5aA/AAAAAAAAAAI/AAAAAAAAM_c/EBzE96UZc_o/photo.jpg?sz=128", "display_name": "lambozsolty", "link": "https://stackoverflow.com/users/11037784/lambozsolty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 59183524, "answer_count": 1, "score": 0, "last_activity_date": 1575488358, "creation_date": 1575486312, "question_id": 59183065, "link": "https://stackoverflow.com/questions/59183065/exception-thrown-in-ordered-linked-listwrite-access-violation", "title": "Exception thrown in ordered linked list(write access violation)", "body": "<p>I am getting a write access violation exception when I try to run my code.</p>\n\n<pre><code>\nint main()\n{\n    OrderedList&lt;int&gt; l;\n\n    l.insert(3);\n    l.insert(6);\n    l.insert(56);\n    l.insert(1);\n\n\n    return 0;\n}\n</code></pre>\n\n<p>Here is OrderedList.h including all the functions of OrderedList class:</p>\n\n<pre><code>#pragma once\n#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate &lt;class T, class LessComp = less&lt;T&gt;, class Equal = equal_to&lt;T&gt; &gt;\nclass OrderedList \n{\n    private:\n        struct Node \n        {\n            T value;\n            Node* next;\n            Node(const T&amp; value, Node* next = nullptr) : value(value), next(next) {}\n        };\n\n        Node* first;\n        int numElements;\n\n    public:\n        OrderedList();\n        ~OrderedList();\n        bool isEmpty();\n        void insert(const T&amp;);\n        void remove(const T&amp;);\n        int size() const;\n        bool find(const T&amp;) const;\n        void listItems(ostream&amp;);\n};\n\ntemplate &lt;class T, class LessComp, class Equal &gt;\nOrderedList&lt;T, LessComp, Equal&gt;::OrderedList() \n{\n    this-&gt;first = nullptr;\n    this-&gt;numElements = 0;\n}\ntemplate &lt;class T, class LessComp, class Equal &gt;\nOrderedList&lt;T, LessComp, Equal&gt;::~OrderedList()\n{\n    Node* current = this-&gt;first;\n    Node* next;\n\n    while (current != nullptr)\n    {\n        next = current-&gt;next;\n        delete current;\n        current = next;\n    }\n\n    this-&gt;numElements = 0;\n}\n\ntemplate &lt;class T, class LessComp, class Equal &gt;\nbool OrderedList&lt;T, LessComp, Equal&gt;::isEmpty()\n{\n    return this-&gt;numElements &gt; 0;\n}\n\ntemplate &lt;class T, class LessComp, class Equal &gt;\nvoid OrderedList&lt;T, LessComp, Equal&gt;::insert(const T&amp; element)\n{\n    Node* temp = this-&gt;first;\n    Node* node=nullptr;\n\n    LessComp lesscomp;\n\n    if (this-&gt;first == nullptr)\n    {\n        this-&gt;first-&gt;value=element;\n        this-&gt;first-&gt;next = nullptr;\n    }\n    else\n    {\n        if (lesscomp(element, this-&gt;first-&gt;value))\n        {\n            node-&gt;value = element;\n            node-&gt;next = this-&gt;first;\n            this-&gt;first = node;\n        }\n        else\n        {\n            while (temp-&gt;next != nullptr &amp;&amp; !(lesscomp(element, temp-&gt;value) &amp;&amp; element &gt;= temp-&gt;value))\n            {\n                temp = temp-&gt;next;\n            }\n\n            if (temp-&gt;next == nullptr)\n            {\n                temp = temp-&gt;next;\n                temp-&gt;value = element;\n                temp-&gt;next = nullptr;\n            }\n            else\n            {\n                node-&gt;value = element;\n                node-&gt;next = temp-&gt;next;\n                temp-&gt;next = node;\n            }\n        }\n    }\n\n    ++this-&gt;numElements;\n}\n\ntemplate &lt;class T, class LessComp, class Equal &gt;\nvoid OrderedList&lt;T, LessComp, Equal&gt;::remove(const T&amp; element) \n{\n    Node* temp = this-&gt;first;\n    Node* prev;\n\n    if (temp == nullptr &amp;&amp; temp-&gt;value == element)\n    {\n        this-&gt;first = temp-&gt;next;\n\n        delete temp;\n\n        return;\n    }\n\n    while (temp != nullptr &amp;&amp; temp-&gt;value != element)\n    {\n        prev = temp;\n        temp = temp-&gt;next;\n    }\n\n    if (temp == nullptr)\n    {\n        return;\n    }\n\n    prev-&gt;next = temp-&gt;next;\n\n    delete temp;\n\n    --this-&gt;numElements;\n}\n\n\ntemplate &lt;class T, class LessComp, class Equal &gt;\nint OrderedList&lt;T, LessComp, Equal&gt;::size() const\n{\n    return this-&gt;numElements;\n}\n\ntemplate &lt;class T, class LessComp, class Equal &gt;\nbool OrderedList&lt;T, LessComp, Equal&gt;::find(const T&amp; element) const\n{\n    Node* current = this-&gt;first;\n\n    while (current != nullptr)\n    {\n        if (current-&gt;value == element)\n        {\n            return true;\n        }\n\n        current = current-&gt;next;\n    }\n\n    return false;\n}\n\ntemplate &lt;class T, class LessComp, class Equal &gt;\nvoid OrderedList&lt;T, LessComp, Equal&gt;::listItems(ostream&amp; os)\n{\n    Node* temp = this-&gt;first;\n\n    while (temp != nullptr)\n    {\n        os &lt;&lt; temp-&gt;value &lt;&lt; endl;\n        temp = temp-&gt;next;\n    }\n}\n\n</code></pre>\n\n<p>And the error:\n<a href=\"https://i.stack.imgur.com/30y9a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/30y9a.png\" alt=\"enter image description here\"></a></p>\n\n<p>I don't know what to try to solve this problem.</p>\n\n<p>I want to create a sorted linked list using templates.</p>\n\n<p>Any ideas or suggestions? </p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["c++", "unreal-engine4"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 12469199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2ee2e489e5a9c38cc476060d1b9ee95?s=128&d=identicon&r=PG&f=1", "display_name": "WolvLey", "link": "https://stackoverflow.com/users/12469199/wolvley"}, "is_accepted": false, "score": 1, "last_activity_date": 1575896919, "creation_date": 1575896919, "answer_id": 59249610, "question_id": 59183025, "link": "https://stackoverflow.com/questions/59183025/unreal-engine-how-to-get-the-axismappings-via-c-code/59249610#59249610", "title": "Unreal Engine - How to get the AxisMappings via C++ code", "body": "<p>Im not sure because I use Blueprints most of the time for this, but one way to get the value is to bind it to a method.</p>\n\n<p>(Example of the AFPSCharacter Template)</p>\n\n<pre><code>PlayerInputComponent-&gt;BindAxis(\"MoveForward\", this, &amp;APawn::MoveForward);\n</code></pre>\n\n<p>And later use it in the method</p>\n\n<pre><code>void AFPSCharacter::MoveForward(float Value){\n//for example print the val\n UE_LOG(LogTemp, Warning, TEXT(\"%f\"), Value);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 10823695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dfb62eb31b99e517ed87c133f4bd14f?s=128&d=identicon&r=PG&f=1", "display_name": "Franz", "link": "https://stackoverflow.com/users/10823695/franz"}, "is_accepted": true, "score": 0, "last_activity_date": 1575964523, "last_edit_date": 1575964523, "creation_date": 1575961915, "answer_id": 59261989, "question_id": 59183025, "link": "https://stackoverflow.com/questions/59183025/unreal-engine-how-to-get-the-axismappings-via-c-code/59261989#59261989", "title": "Unreal Engine - How to get the AxisMappings via C++ code", "body": "<p>this was my first thought too but unfortunately you can't get the Keys, you just bind the method to an axis name. The MoveForward's \"Value\" parameter hold the scale value but not the Key value. 1.0f for example when you press \"W\" or -1.0f when you press \"S\". </p>\n\n<p>I've already found a solution for my issue. The GetAxisValue(FName) is the wrong method for this purpose. </p>\n\n<p>Instead I found the UInputSettings class that contains a method named GetAxisMappingByName(FName, TArray)</p>\n\n<p>Here a code snippet how it works:</p>\n\n<pre><code>// Get the instance of the InputSettings\nUInputSettings* InputSettings = UInputSettings::GetInputSettings();\n\n// AxisMappings with all the information will be stored here\nTArray&lt;FInputAxisKeyMapping&gt; VerticalKeys;\nTArray&lt;FInputAxisKeyMapping&gt; HorizontalKeys;\n\n// Load the AxisMappings\nInputSettings-&gt;GetAxisMappingByName(FName(\"MoveForward\"), VerticalKeys);\nInputSettings-&gt;GetAxisMappingByName(FName(\"MoveRight\"), HorizontalKeys);\n\n// Each MovementKey gets its own variable\nFKey ForwardKey;\nFKey BackKey;\nFKey LeftKey;\nFKey RightKey;\n\n// Assign each key to the correct direction\nfor (FInputAxisKeyMapping verticalKey : VerticalKeys)\n{\n    if (verticalKey.Scale == 1.0f)\n        ForwardKey = verticalKey.Key;\n    else if (verticalKey.Scale == -1.0f)\n        BackKey = verticalKey.Key;\n}\n\nfor (FInputAxisKeyMapping horizontalKey : HorizontalKeys)\n{\n    if (horizontalKey.Scale == 1.0f)\n        RightKey = horizontalKey.Key;\n    else if (horizontalKey.Scale == -1.0f)\n        LeftKey = horizontalKey.Key;\n}\n</code></pre>\n\n<p>Is there a better solution for assigning the keys than using for loops? Feel free to correct my code since I'm not really an expert in C++. ;-)</p>\n"}], "owner": {"reputation": 31, "user_id": 10823695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dfb62eb31b99e517ed87c133f4bd14f?s=128&d=identicon&r=PG&f=1", "display_name": "Franz", "link": "https://stackoverflow.com/users/10823695/franz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 0, "accepted_answer_id": 59261989, "answer_count": 2, "score": 0, "last_activity_date": 1575964523, "creation_date": 1575486139, "question_id": 59183025, "link": "https://stackoverflow.com/questions/59183025/unreal-engine-how-to-get-the-axismappings-via-c-code", "title": "Unreal Engine - How to get the AxisMappings via C++ code", "body": "<p>I'm new to the Unreal Engine and C++... </p>\n\n<p>I'm trying to get the assigned Key of an Axis. I found out that the information are stored in the DefaultInput.ini file but how do i access these data programmatically?</p>\n\n<p>There's a GetAxisValue(const FName) method but it does not return anything.</p>\n\n<pre><code>FString AxisName = \"MoveForward\";\nauto value = PlayerInputComponent-&gt;GetAxisValue(FName(*AxisName));\n</code></pre>\n\n<p>What am I doing wrong? I would really appreciate your help.</p>\n"}, {"tags": ["c++", "pointers", "rvalue"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1575486116, "post_id": 59182962, "comment_id": 104586761, "body": "<code>how can i have a pointer to it??</code> -- Because the syntax is legal C++?"}, {"owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "edited": false, "score": 1, "creation_date": 1575486219, "post_id": 59182962, "comment_id": 104586794, "body": "The pointer is to <code>integer{4}.x</code> and you can just ask for it&#39;s adress, since the adress exists. But dereferencing the pointer after that statement is UB, since it is dangling (it points to an object that is no longer there)"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1575486609, "last_edit_date": 1575486609, "creation_date": 1575486149, "answer_id": 59183030, "question_id": 59182962, "link": "https://stackoverflow.com/questions/59182962/pointer-to-rvalue-object-member-variable/59183030#59183030", "title": "Pointer to rvalue object member variable", "body": "<p>While <code>integer{4}</code> is an rvalue, you call <code>ref()</code> which returns an <code>int&amp;</code> which is always an lvalue.  This allows the code to compile, but you have undefined behavior since you dereference a pointer to an object that no longer exists.</p>\n\n<p>To fix this you can provide a <em>ref-qualifer</em> for <code>ref</code> which only allows it to be called on lvalues.  That would look like</p>\n\n<pre><code>struct integer {\n    int x;\n    int&amp; ref() &amp; {\n        return x;\n    }\n};\n</code></pre>\n\n<p>and will cause a compiler error if you try to use</p>\n\n<pre><code>integer{4}.ref()\n</code></pre>\n\n<p>since <code>integer{4}</code> is not an lvalue which <code>ref</code> now requires.</p>\n"}], "owner": {"reputation": 157, "user_id": 12282667, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AVu5g.jpg?s=128&g=1", "display_name": "Denomycor", "link": "https://stackoverflow.com/users/12282667/denomycor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 2, "accepted_answer_id": 59183030, "answer_count": 1, "score": 4, "last_activity_date": 1575486609, "creation_date": 1575485844, "last_edit_date": 1575486323, "question_id": 59182962, "link": "https://stackoverflow.com/questions/59182962/pointer-to-rvalue-object-member-variable", "title": "Pointer to rvalue object member variable", "body": "<p>This is a very quick question. I have the following code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct integer {\n    int x;\n    int&amp; ref() {\n        return x;\n    }\n};\n\n//main...\nint* l = &amp;integer{4}.ref();\nstd::cout &lt;&lt; *l;\n</code></pre>\n\n<p>My question is: Isn't <code>&amp;integer{4}.ref()</code> a rvalue since it is a temporary object? How can I have a pointer to it? And is it undefined behavior?</p>\n"}, {"tags": ["c++", "mingw-w64"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1575485506, "post_id": 59182833, "comment_id": 104586529, "body": "Are you sure the file includes <code>&lt;cstddef&gt;</code>?  If you make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of <code>#include &lt;cstddef&gt; void foo(nullptr_t) {} int main() { foo(nullptr); }</code> does that compile?"}, {"owner": {"reputation": 742, "user_id": 6271889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39d2f217c1e060d40fca9e619528ec4e?s=128&d=identicon&r=PG&f=1", "display_name": "Leonardo", "link": "https://stackoverflow.com/users/6271889/leonardo"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575485781, "post_id": 59182833, "comment_id": 104586637, "body": "Edited the question. Yes, I&#39;m positive. Unless I&#39;m hallucinating and that <code>#include &lt;cstddef&gt;</code> doesn&#39;t do what I think it does."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575485814, "post_id": 59182833, "comment_id": 104586654, "body": "Does the minimal example compile or do you get an error for that as well?"}, {"owner": {"reputation": 742, "user_id": 6271889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39d2f217c1e060d40fca9e619528ec4e?s=128&d=identicon&r=PG&f=1", "display_name": "Leonardo", "link": "https://stackoverflow.com/users/6271889/leonardo"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575486102, "post_id": 59182833, "comment_id": 104586758, "body": "It also fails. If I add <code>using namespace std;</code>, then it works."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1575486295, "post_id": 59182833, "comment_id": 104586817, "body": "Ah, yes.  <code>nullptr_t</code> is not guaranteed to be outside <code>std::</code>.  You can add <code>using std::nullptr_t</code> to the top of the file to fix that."}, {"owner": {"reputation": 529, "user_id": 11877195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ed77976acc203f50e7699ba07061865?s=128&d=identicon&r=PG&f=1", "display_name": "Sahsahae", "link": "https://stackoverflow.com/users/11877195/sahsahae"}, "edited": false, "score": 2, "creation_date": 1575486414, "post_id": 59182833, "comment_id": 104586854, "body": "Or you can just use <code>std::nullptr_t</code> like you do with every other std type ever..."}, {"owner": {"reputation": 742, "user_id": 6271889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39d2f217c1e060d40fca9e619528ec4e?s=128&d=identicon&r=PG&f=1", "display_name": "Leonardo", "link": "https://stackoverflow.com/users/6271889/leonardo"}, "edited": false, "score": 0, "creation_date": 1575487336, "post_id": 59182833, "comment_id": 104587222, "body": "Not my code, it&#39;s from cpputest. This seems a fairly basic thing to be missing. Shouldn&#39;t CMake take care of this?"}], "answers": [{"tags": [], "owner": {"reputation": 742, "user_id": 6271889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39d2f217c1e060d40fca9e619528ec4e?s=128&d=identicon&r=PG&f=1", "display_name": "Leonardo", "link": "https://stackoverflow.com/users/6271889/leonardo"}, "is_accepted": false, "score": 0, "last_activity_date": 1575488772, "creation_date": 1575488772, "answer_id": 59183627, "question_id": 59182833, "link": "https://stackoverflow.com/questions/59182833/mingw-w64-compilation-fails-with-nullptr-t/59183627#59183627", "title": "MinGW-w64 compilation fails with nullptr_t", "body": "<p>The fix is simple enough:</p>\n\n<pre><code>SimpleString StringFrom(const std::nullptr_t value)\n{\n    (void) value;\n    return \"(null)\";\n}\n</code></pre>\n\n<p>Thanks for NathanOliver- Reinstate Monica for helping to figure this out.</p>\n"}], "owner": {"reputation": 742, "user_id": 6271889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39d2f217c1e060d40fca9e619528ec4e?s=128&d=identicon&r=PG&f=1", "display_name": "Leonardo", "link": "https://stackoverflow.com/users/6271889/leonardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575488772, "creation_date": 1575485239, "last_edit_date": 1575485717, "question_id": 59182833, "link": "https://stackoverflow.com/questions/59182833/mingw-w64-compilation-fails-with-nullptr-t", "title": "MinGW-w64 compilation fails with nullptr_t", "body": "<p>I'm trying to compile cpputest with MinGHW-w64 and it's failing because it can't find nullptr_t. The function that is failing is cpputest\\src\\CppUTest\\SimpleString.cpp:StringFrom</p>\n\n<pre><code>SimpleString StringFrom(const nullptr_t value)\n{\n    (void) value;\n    return \"(null)\";\n}\n</code></pre>\n\n<p>I tried to manually compile this file with</p>\n\n<p><code>C:\\mingw-w64\\i686-8.1.0-posix-dwarf-rt_v6-rev0\\mingw32\\bin\\g++.exe  -DCPPUTEST_HAVE_STRDUP=1 -DHAVE_CONFIG_H -D_TIMESPEC_DEFINED=1 @CMakeFiles/CppUTest.dir/includes_CXX.rsp -include \"C:/git/tdd/cpputest/include/CppUTest/MemoryLeakDetectorNewMacros.h\" -include \"C:/git/tdd/cpputest/include/CppUTest/MemoryLeakDetectorMallocMacros.h\"   -std=c++11  -Wall -Wextra -pedantic -Wshadow -Wswitch-default -Wswitch-enum -Wconversion -Wsign-conversion -Wno-padded -Wno-long-long -Woverloaded-virtual -Wno-old-style-cast -Wno-c++14-compat -O2 -g -DNDEBUG   -o CMakeFiles\\CppUTest.dir\\SimpleString.cpp.obj -c C:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp</code></p>\n\n<p>It fails with</p>\n\n<pre><code>C:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp:565:31: error: 'nullptr_t' does not name a type\n SimpleString StringFrom(const nullptr_t value)\n                               ^~~~~~~~~\nC:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp:565:31: note: 'nullptr_t' is defined in header '&lt;cstddef&gt;'; did you forget to '#include &lt;cstddef&gt;'?\nC:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp:32:1:\n+#include &lt;cstddef&gt;\n\nC:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp:565:31:\n SimpleString StringFrom(const nullptr_t value)\n                               ^~~~~~~~~\nC:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp:565:14: error: redefinition of 'SimpleString StringFrom(int)'\n SimpleString StringFrom(const nullptr_t value)\n              ^~~~~~~~~~\nC:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp:479:14: note: 'SimpleString StringFrom(int)' previously defined here\n SimpleString StringFrom(int value)\n              ^~~~~~~~~~\nC:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp: In function 'SimpleString StringFrom(cpputest_longlong)':\nC:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp:576:29: warning: unknown conversion type character 'l' in format [-Wformat=]\n     return StringFromFormat(\"%lld\", value);\n                             ^~~~~~\nC:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp:576:29: warning: too many arguments for format [-Wformat-extra-args]\nC:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp: In function 'SimpleString StringFrom(cpputest_ulonglong)':\nC:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp:581:29: warning: unknown conversion type character 'l' in format [-Wformat=]\n     return StringFromFormat(\"%llu\", value);\n                             ^~~~~~\nC:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp:581:29: warning: too many arguments for format [-Wformat-extra-args]\nC:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp: In function 'SimpleString HexStringFrom(cpputest_longlong)':\nC:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp:586:29: warning: unknown conversion type character 'l' in format [-Wformat=]\n     return StringFromFormat(\"%llx\", value);\n                             ^~~~~~\nC:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp:586:29: warning: too many arguments for format [-Wformat-extra-args]\nC:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp: In function 'SimpleString HexStringFrom(cpputest_ulonglong)':\nC:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp:591:29: warning: unknown conversion type character 'l' in format [-Wformat=]\n     return StringFromFormat(\"%llx\", value);\n                             ^~~~~~\nC:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp:591:29: warning: too many arguments for format [-Wformat-extra-args]\n</code></pre>\n\n<p>I tried the naive solution of including cstddef:</p>\n\n<pre><code>#include &lt;cstddef&gt;\n\nSimpleString StringFrom(const nullptr_t value)\n{\n    (void) value;\n    return \"(null)\";\n}\n</code></pre>\n\n<p>But that fails with the same error:</p>\n\n<pre><code>C:\\git\\tdd\\cpputest\\src\\CppUTest\\SimpleString.cpp:568:31: error: 'nullptr_t' does not name a type\n SimpleString StringFrom(const nullptr_t value)\n</code></pre>\n\n<p>This error doesn't make any sense as I'm including cstddef.</p>\n\n<p>This problem is related with <a href=\"https://stackoverflow.com/questions/59142848/compiling-cpputest-with-mingw-w64\">this question</a>.</p>\n\n<p>Any help is appreciated!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 1, "creation_date": 1575484897, "post_id": 59182735, "comment_id": 104586294, "body": "Unrelated: <a href=\"https://stackoverflow.com/questions/1107705/systempause-why-is-it-wrong\">Don&#39;t use <code>system(&quot;pause&quot;)</code></a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1575484907, "post_id": 59182735, "comment_id": 104586298, "body": "What is <code>fileName</code>? What is <code>fin</code>? Please try to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to show us, preferably one which shows all variables and how they are initialized and if possible just for us to copy-paste to be able to replicate the problem you have."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1575484978, "post_id": 59182735, "comment_id": 104586324, "body": "A hint about your problem though: Learn about <a href=\"https://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow noreferrer\"><i>short-circuit evaluation</i></a>, and think about how the order you do things in the loop condition might be affected by it."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1575485024, "post_id": 59182735, "comment_id": 104586339, "body": "<code>while (fin &gt;&gt; studentID &gt;&gt; exam_1 &gt;&gt; exam_2     &gt;&gt; exam_3 &amp;&amp; !found)</code>  -- Read that line out loud.  What does it tell you?  Read a new line, and if you found something previously, don&#39;t loop.  Is that what you want, to read a new line in, destroying the previous results?  Shouldn&#39;t you check if you found something first,, and if not found, then read the new line?  It all boils down to simple logic -- it&#39;s really nothing to have a struggle with."}, {"owner": {"reputation": 17, "user_id": 12427562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3825489fd64c8cec62beb51e8be99139?s=128&d=identicon&r=PG&f=1", "display_name": "Cant_Focus", "link": "https://stackoverflow.com/users/12427562/cant-focus"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1575502934, "post_id": 59182735, "comment_id": 104592499, "body": "@PaulMcKenzie You are correct, sorry I didnt notice, and yes I was Struggling which is perfectly okay"}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 0, "last_activity_date": 1575485151, "creation_date": 1575485151, "answer_id": 59182817, "question_id": 59182735, "link": "https://stackoverflow.com/questions/59182735/ask-the-user-to-enter-the-studentid-then-you-will-open-the-text-file-and-search/59182817#59182817", "title": "ask the user to enter the studentID. Then you will open the text file and search for this ID. (C++)", "body": "<p>Your got the loop condition wrong. Lets say one iteration found the <code>ID</code>, <code>found</code> is set to true, then for the next iteration the condition is evaluated:</p>\n\n<pre><code>while (fin &gt;&gt; studentID &gt;&gt; exam_1 &gt;&gt; exam_2 &gt;&gt; exam_3 &amp;&amp; !found)\n</code></pre>\n\n<p>No matter what is the value of <code>found</code> you read the next entry in the file. Change it to</p>\n\n<pre><code>while (!found &amp;&amp; fin &gt;&gt; studentID &gt;&gt; exam_1 &gt;&gt; exam_2 &gt;&gt; exam_3)\n</code></pre>\n\n<p><code>&amp;&amp;</code> short-circuits, ie when <code>!found</code> is <code>false</code>, the rest of the condition is not evaluated.</p>\n"}], "owner": {"reputation": 17, "user_id": 12427562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3825489fd64c8cec62beb51e8be99139?s=128&d=identicon&r=PG&f=1", "display_name": "Cant_Focus", "link": "https://stackoverflow.com/users/12427562/cant-focus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1575485151, "creation_date": 1575484765, "question_id": 59182735, "link": "https://stackoverflow.com/questions/59182735/ask-the-user-to-enter-the-studentid-then-you-will-open-the-text-file-and-search", "title": "ask the user to enter the studentID. Then you will open the text file and search for this ID. (C++)", "body": "<p>Struggling really hard with this, I need to enter an ID number thats in a text file and output the associated grades that are on the same line of the text file</p>\n\n<p>This is the code I have, it prints the correct average but it prints the test scores of the next ID numeber</p>\n\n<pre><code>int searchID;\nint studentID;\nbool found = false;\n\ndouble exam_1;\ndouble exam_2;\ndouble exam_3;\ndouble average = 0;\n\ncout &lt;&lt; \"Enter student ID to search in file \" &lt;&lt;\n    fileName &lt;&lt; \" : \";\n//read searchID value\ncin &gt;&gt; searchID;\n\n//read data from file until the search id is found\nwhile (fin &gt;&gt; studentID &gt;&gt; exam_1 &gt;&gt; exam_2\n    &gt;&gt; exam_3 &amp;&amp; !found)\n{\n    if (searchID == studentID)\n    {\n        average = (exam_1 + exam_2 + exam_3) / 3.0;\n        found = true;\n    }\n}\n//close the file stream,fin\nfin.close();\n//check if search id is found\nif (found)\n{\n    cout &lt;&lt; left &lt;&lt; setw(10) &lt;&lt; \"Exam 1\" &lt;&lt; setw(10) &lt;&lt; exam_1 &lt;&lt; endl;\n    cout &lt;&lt; left &lt;&lt; setw(10) &lt;&lt; \"Exam 2\" &lt;&lt; setw(10) &lt;&lt; exam_2 &lt;&lt; endl;\n    cout &lt;&lt; left &lt;&lt; setw(10) &lt;&lt; \"Exam 3\" &lt;&lt; setw(10) &lt;&lt; exam_3 &lt;&lt; endl;\n    cout &lt;&lt; fixed &lt;&lt; setprecision(2)\n        &lt;&lt; \"Average : \" &lt;&lt; average &lt;&lt; endl;\n}\nelse\n    cout &lt;&lt; searchID &lt;&lt; \" student id is not found.\" &lt;&lt; endl;\n\nsystem(\"pause\");\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "dynamic-linking", "visual-c++-2005", "microsoft-runtime-library"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1575488518, "post_id": 59182615, "comment_id": 104587677, "body": "not in vs 2005, it can only use the 2005 runtime, why do you want to use a different version?"}, {"owner": {"reputation": 23, "user_id": 11534592, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yTCgD_5dARk/AAAAAAAAAAI/AAAAAAAAAEk/1bhdb9UwGM0/photo.jpg?sz=128", "display_name": "Santi J Fry", "link": "https://stackoverflow.com/users/11534592/santi-j-fry"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1575532037, "post_id": 59182615, "comment_id": 104600082, "body": "Because the target (Win NT) system has an older runtime than the host used to compile (Win 10)"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1575532259, "post_id": 59182615, "comment_id": 104600181, "body": "yeah but vs 2005 is pretty unlikely to produce code for an OS that was released 10 years after it was. Have you tried running your code on NT?"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1575532359, "post_id": 59182615, "comment_id": 104600210, "body": "though it doesn&#39;t look like vs 2005 supports nt: <a href=\"https://support.microsoft.com/en-gb/help/2661358/minimum-service-pack-levels-for-microsoft-vc-redistributable-packages\" rel=\"nofollow noreferrer\">support.microsoft.com/en-gb/help/2661358/&hellip;</a>"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1575532611, "post_id": 59182615, "comment_id": 104600299, "body": "this states static linking is the only option: <a href=\"http://www.malsmith.net/blog/visual-c-visual-history/\" rel=\"nofollow noreferrer\">malsmith.net/blog/visual-c-visual-history</a>"}, {"owner": {"reputation": 23, "user_id": 11534592, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yTCgD_5dARk/AAAAAAAAAAI/AAAAAAAAAEk/1bhdb9UwGM0/photo.jpg?sz=128", "display_name": "Santi J Fry", "link": "https://stackoverflow.com/users/11534592/santi-j-fry"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1575540014, "post_id": 59182615, "comment_id": 104603806, "body": "Yeah, I tried and I can execute code but using the Static Run Time Library, but due to the dependencies of the project I cannot use the Static version anymore."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1575542859, "post_id": 59182615, "comment_id": 104605326, "body": "You&#39;ll need to change your dependencies to use the static runtime or stop supporting an OS Microsoft stopped supporting 15 years ago"}], "owner": {"reputation": 23, "user_id": 11534592, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yTCgD_5dARk/AAAAAAAAAAI/AAAAAAAAAEk/1bhdb9UwGM0/photo.jpg?sz=128", "display_name": "Santi J Fry", "link": "https://stackoverflow.com/users/11534592/santi-j-fry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575484224, "creation_date": 1575484224, "question_id": 59182615, "link": "https://stackoverflow.com/questions/59182615/choosing-the-md-run-time-library-version-for-cross-compiling", "title": "Choosing the MD Run-Time Library version for cross compiling", "body": "<p>I need to cross compile using Visual 2005 in Windows 10 to deploy in a Windows NT. I compiled (in WIN10) using the MT Run-Time library and I could execute some applications in windows NT correctly, but now I need to use the MD, instead of the MT. Could I say to the compiler which MD version link against to? using some Macro like WIN32_WINNT or similar?</p>\n\n<p>Thanks!!</p>\n"}, {"tags": ["android", "c++", "unity3d", "opengl-es"], "comments": [{"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 2, "creation_date": 1575485575, "post_id": 59182390, "comment_id": 104586563, "body": "The only thing I can see is: It has to be <code>glEnableVertexAttribArray(vertex_pos_location);</code> rather than <code>glEnableVertexAttribArray(0);</code>."}], "owner": {"reputation": 53, "user_id": 12411600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40251f5da7eac1e913a48ae797329da0?s=128&d=identicon&r=PG&f=1", "display_name": "ShhhSecret", "link": "https://stackoverflow.com/users/12411600/shhhsecret"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575486044, "creation_date": 1575483209, "last_edit_date": 1575486044, "question_id": 59182390, "link": "https://stackoverflow.com/questions/59182390/gldrawarrays-not-rendering-to-framebuffer-although-glclear-works-fine", "title": "glDrawArrays not rendering to framebuffer (although glClear works fine)?", "body": "<p>I'm trying to render to a texture using OpenGL ES on an Android phone (using a native plugin/C++). I can set the color of the texture using <code>glClear</code>, and I can clear different sections to different colors using <code>glScissor</code> so I'm fairly sure the issue isn't the framebuffer setup/attachment. Probably there's an issue with the shaders or the vertex data, but I can't see what it is.</p>\n\n<p>Here's the code I've reduced the problem down to:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;GLES3/gl31.h&gt;\n#include &lt;GLES2/gl2ext.h&gt;\n#include &lt;GLES3/gl3ext.h&gt;\n\nconst int32_t WIDTH = 512;\nconst int32_t HEIGHT = 512;\n\nchar vertex_code[] = R\"(\n\n#version 300 es\n\nin vec3 VertexPosition;\n\nvoid main() {\n    gl_Position = vec4(VertexPosition, 1.0f);\n}\n\n)\";\n\nchar fragment_code[] = R\"(\n\n#version 300 es\nprecision mediump float;\n\nout vec4 FragColor;\n\nvoid main() {\n\n    FragColor = vec4(1.0f, 0.0f, 1.0f, 1.0f);\n\n}\n\n)\";\n\nGLuint compile_shader(char* shader_code, GLenum shader_type) {\n\n    GLuint shader_id = glCreateShader(shader_type);\n    glShaderSource(shader_id, 1, &amp;shader_code, nullptr);\n    glCompileShader(shader_id);\n\n    // check shader compilation:\n    GLint result = 0;\n    glGetShaderiv(shader_id, GL_COMPILE_STATUS, &amp;result);\n    if (result == GL_FALSE) {\n        glDeleteShader(shader_id);\n        return 0;\n    }\n\n    return shader_id;\n\n}\n\nGLuint create_shader_program(char* vertex_code, char* fragment_code) {\n\n    GLuint vertex_id = compile_shader(vertex_code, GL_VERTEX_SHADER);\n    GLuint fragment_id = compile_shader(fragment_code, GL_FRAGMENT_SHADER);\n    GLuint shader_program_id = glCreateProgram();\n\n    // attach shaders and link:\n    glAttachShader(shader_program_id, vertex_id);\n    glAttachShader(shader_program_id, fragment_id);\n    glLinkProgram(shader_program_id);\n\n    // check linking status:\n    GLint result = 0;\n    glGetProgramiv(shader_program_id, GL_LINK_STATUS, &amp;result);\n    if (result == GL_FALSE) {\n        glDeleteProgram(shader_program_id);\n        glDeleteShader(vertex_id);\n        glDeleteShader(fragment_id);\n        return 0;\n    }\n\n    // delete the shaders now that they're linked:\n    glDetachShader(shader_program_id, vertex_id);\n    glDetachShader(shader_program_id, fragment_id);\n    glDeleteShader(vertex_id);\n    glDeleteShader(fragment_id);\n\n    return shader_program_id;\n\n}\n\nGLuint render_texture() {\n\n\n    // *** create framebuffer and texture to render into\n    GLuint framebuffer_id;\n    glGenFramebuffers(1, &amp;framebuffer_id);\n    glBindFramebuffer(GL_FRAMEBUFFER, framebuffer_id);\n\n    GLuint target_texture_id;\n    glGenTextures(1, &amp;target_texture_id);\n    glBindTexture(GL_TEXTURE_2D, target_texture_id);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, WIDTH, HEIGHT, 0, GL_RGBA, GL_UNSIGNED_BYTE, nullptr);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n\n    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, target_texture_id, 0);\n\n    if(glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE) {\n        return 0;\n    }\n\n    glBindTexture(GL_TEXTURE_2D, 0);\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\n\n    // *** create shader program\n    GLuint shader_program_id = create_shader_program(vertex_code, fragment_code);\n\n    // *** set up quad\n    float quad[] = {\n        // positions        \n        -1.0f, -1.0f,  0.0f,\n         1.0f,  1.0f,  0.0f,\n        -1.0f,  1.0f,  0.0f,\n\n        -1.0f, -1.0f,  0.0f,\n         1.0f, -1.0f,  0.0f,\n         1.0f,  1.0f,  0.0f,\n\n    };\n\n    GLuint vertex_data_buffer, vertex_array;\n    glGenVertexArrays(1, &amp;vertex_array);\n    glGenBuffers(1, &amp;vertex_data_buffer);\n    glBindVertexArray(vertex_array);\n    // load vertex data into VBO:\n    glBindBuffer(GL_ARRAY_BUFFER, vertex_data_buffer);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(quad), quad, GL_STATIC_DRAW);\n    // position attribute\n    GLint vertex_pos_location = glGetAttribLocation(shader_program_id, \"VertexPosition\");\n    Log(\"vertex_pos_location %i\", vertex_pos_location);\n    glVertexAttribPointer(vertex_pos_location, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(float), (void*)0);\n    glEnableVertexAttribArray(0);\n\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n\n    // *** render\n    glBindFramebuffer(GL_FRAMEBUFFER, framebuffer_id);\n    glClearColor(0.0f, 0.0f, 1.0f, 1.0f);\n    glClear(GL_COLOR_BUFFER_BIT);\n\n    glUseProgram(shader_program_id);\n    glBindVertexArray(vertex_array);\n    glDrawArrays(GL_TRIANGLES, 0, 6);\n\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\n\n    glFinish();\n\n    return target_texture_id;\n\n}\n\n</code></pre>\n\n<p>When I use this texture elsewhere (within Unity, for what it's worth) I can see that the <code>glClear(GL_COLOR_BUFFER_BIT);</code> call has worked fine, but I'm not seeing the pink colour I'd expect from the basic fragment shader. I've used <code>glGetError()</code> to check for errors after each GL call, and they all seem fine...</p>\n\n<p>Any thoughts on what the issue could be?</p>\n"}, {"tags": ["c++", "reference", "pass-by-value"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1575482577, "post_id": 59182211, "comment_id": 104585215, "body": "please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1575482691, "post_id": 59182211, "comment_id": 104585271, "body": "Looks remotely like some <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">rule of three</a> violation in code not shown. We&#39;ll need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to help you further."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1575482852, "post_id": 59182211, "comment_id": 104585358, "body": "You have a bug somewhere in your code, and the bug can be anywhere. That&#39;s what&#39;s going on. And without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that anyone can cut/paste, run, and reproduce your observations, there isn&#39;t much that anyone can help you, here."}, {"owner": {"reputation": 924, "user_id": 10735374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e720db2d4072edfeb760e263ea43217d?s=128&d=identicon&r=PG&f=1", "display_name": "JShorthouse", "link": "https://stackoverflow.com/users/10735374/jshorthouse"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1575483310, "post_id": 59182211, "comment_id": 104585606, "body": "@SamVarshavchik I have updated my question to include a minimum reproducible example"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1575483632, "post_id": 59182211, "comment_id": 104585749, "body": "This is undefined behavior. The shown code uses two completely different classes named &quot;Wire&quot; in two different places. What do you expect to accomplish by defining a <code>struct Wire</code> in a header that doesn&#39;t have any class members, whatsoever, but then defining a different <code>struct Wire</code> in a different <code>.cpp</code> that actually has class members, and populating them? C++ does not work this way. Define a single <code>Wire</code> class in your header, and <code>#include</code> it from all <code>.cpp</code> source files."}, {"owner": {"reputation": 924, "user_id": 10735374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e720db2d4072edfeb760e263ea43217d?s=128&d=identicon&r=PG&f=1", "display_name": "JShorthouse", "link": "https://stackoverflow.com/users/10735374/jshorthouse"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1575485058, "post_id": 59182211, "comment_id": 104586350, "body": "@SamVarshavchik I have made the changes you suggested and now everything is working as expected, thank you. If you write up your solution as an answer I will happily accept it. Are there any guidelines on what should be put in headers and what should be put in source files? I made this mistake because for some reason I assumed that definitions should all be in source files if possible, and so I instead tried to &quot;forward declare&quot; the struct with its constructor, which obviously didn&#39;t work out."}, {"owner": {"reputation": 924, "user_id": 10735374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e720db2d4072edfeb760e263ea43217d?s=128&d=identicon&r=PG&f=1", "display_name": "JShorthouse", "link": "https://stackoverflow.com/users/10735374/jshorthouse"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1575485272, "post_id": 59182211, "comment_id": 104586443, "body": "@SamVarshavchik Also, should source files always <code>#include</code> their headers? For some reason I thought this was to be avoided because if headers just contain forward declarations it&#39;s just going to be redundant information, but now I see that is is needed in some cases."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1575487900, "post_id": 59182211, "comment_id": 104587432, "body": "What you had was not a forward declaration. A forward declaration would be just <code>struct Wire;</code> and nothing more. That&#39;s what a forward declaration is: only a class name."}], "owner": {"reputation": 924, "user_id": 10735374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e720db2d4072edfeb760e263ea43217d?s=128&d=identicon&r=PG&f=1", "display_name": "JShorthouse", "link": "https://stackoverflow.com/users/10735374/jshorthouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1575636676, "creation_date": 1575482531, "last_edit_date": 1575483226, "question_id": 59182211, "link": "https://stackoverflow.com/questions/59182211/struct-values-inside-vector-become-corrupted-when-passed-by-value", "title": "Struct Values inside Vector Become Corrupted when Passed by Value", "body": "<p>I have the following simple struct:</p>\n\n<pre><code>struct Wire {\n    int start_x;\n    int end_x;\n    int start_y;\n    int end_y;\n\n    Wire(int sx, int ex, int sy, int ey): start_x(sx), end_x(ex), start_y(sy), end_y(ey) {}\n};\n</code></pre>\n\n<p>I also have the following print functions that take a <code>std::vector&lt;Wire&gt;</code> and print out some values from the first item:</p>\n\n<p>These functions are indentical apart from the fact that one takes arguments by value and the other by reference.</p>\n\n<pre><code>void print_first_wire_value(std::vector&lt;Wire&gt; wires){\n    std::cout &lt;&lt; \"(\" &lt;&lt; wires[0].start_x &lt;&lt; \", \" &lt;&lt; wires[0].start_y &lt;&lt; \")\" &lt;&lt; std::endl;\n}\n\nvoid print_first_wire_reference(std::vector&lt;Wire&gt; &amp;wires){\n    std::cout &lt;&lt; \"(\" &lt;&lt; wires[0].start_x &lt;&lt; \", \" &lt;&lt; wires[0].start_y &lt;&lt; \")\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>My main function includes the following code.</p>\n\n<p>It populates a vector with wire objects using another function. It then calls both of the print functions.</p>\n\n<pre><code>std::vector&lt;Wire&gt; wires = input_to_wires(first_line);\n\nstd::cout &lt;&lt; \"By value: \" &lt;&lt; std::endl;\nprint_first_wire_value(wires);\nstd::cout &lt;&lt; \"By reference: \" &lt;&lt; std::endl;\nprint_first_wire_reference(wires);\n</code></pre>\n\n<p>I know for a fact the first start_x and end_x values are 0 and 0. Both print functions should print these values. But bizarrely I instead get this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>By value: \n(-543694264, -543694264)\nBy reference: \n(0, 0)\n</code></pre>\n\n<p>What on earth is going on here?</p>\n\n<hr>\n\n<h1>Minimum Reproducible Example</h1>\n\n<p>(Please excuse the seemingly strange names, this is the start of a solution to a programming challenge from <a href=\"https://adventofcode.com/\" rel=\"nofollow noreferrer\">advent of code</a>).</p>\n\n<p>day3_lib.h</p>\n\n<pre><code>#pragma once\n#include &lt;vector&gt;\n#include &lt;string&gt;\n\nstruct Wire{\n    Wire(int sx, int ex, int sy, int ey);\n};\n\nstd::vector&lt;Wire&gt; populate_wires();\n\nvoid print_first_wire_value(std::vector&lt;Wire&gt; wires);\n\nvoid print_first_wire_reference(std::vector&lt;Wire&gt; &amp;wires);\n</code></pre>\n\n<p>day3_lib.cpp</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n#include &lt;stdexcept&gt;\n\nstruct Wire {\n    int start_x;\n    int end_x;\n    int start_y;\n    int end_y;\n\n    Wire(int sx, int ex, int sy, int ey): start_x(sx), end_x(ex), start_y(sy), end_y(ey) {}\n};\n\nstd::vector&lt;Wire&gt; populate_wires(){\n    std::vector&lt;Wire&gt; wires;\n\n    Wire wire1(0, 0, 1003, 0);\n    Wire wire2(1003, 0, 1003, -138);\n    Wire wire3(1003, 0, 662, -138);\n\n    wires.push_back(wire1);\n    wires.push_back(wire2);\n    wires.push_back(wire3);\n\n    return wires;\n}\n\nvoid print_first_wire_value(std::vector&lt;Wire&gt; wires){\n    std::cout &lt;&lt; \"(\" &lt;&lt; wires[0].start_x &lt;&lt; \", \" &lt;&lt; wires[0].start_y &lt;&lt; \")\" &lt;&lt; std::endl;\n}\n\nvoid print_first_wire_reference(std::vector&lt;Wire&gt; &amp;wires){\n    std::cout &lt;&lt; \"(\" &lt;&lt; wires[0].start_x &lt;&lt; \", \" &lt;&lt; wires[0].start_y &lt;&lt; \")\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>day3.cpp</p>\n\n<pre><code>#include \"./day3_lib.h\"\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nint main(){\n    std::vector&lt;Wire&gt; wires = populate_wires();\n\n    std::cout &lt;&lt; \"By value: \" &lt;&lt; std::endl;\n    print_first_wire_value(wires);\n    std::cout &lt;&lt; \"By reference: \" &lt;&lt; std::endl;\n    print_first_wire_reference(wires);\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "mfc"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1575483403, "post_id": 59182183, "comment_id": 104585645, "body": "If the base class function does something you need done, call it. If not, don&#39;t."}, {"owner": {"reputation": 5085, "user_id": 1181353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zqKlZ.jpg?s=128&g=1", "display_name": "Joseph Willcoxson", "link": "https://stackoverflow.com/users/1181353/joseph-willcoxson"}, "edited": false, "score": 2, "creation_date": 1575484632, "post_id": 59182183, "comment_id": 104586182, "body": "IIRC, if you&#39;re using MFC&#39;s Doc/View/Template architecture, the CFrameWnd::OnCreate creates the view window (by calling CFrameWnd::OnCreateClient). You don&#39;t have to call the baseclass method, but you might bet <i>interesting</i> results if you don&#39;t call it."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 1, "creation_date": 1575515898, "post_id": 59182183, "comment_id": 104595281, "body": "Call the base function if you are not sure what it is doing. Your program may work without it, but there could be traps along the way. If you know exactly what the base function is doing, and you want to completely override, then don&#39;t call the base function in that case."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1575547712, "post_id": 59182183, "comment_id": 104607911, "body": "@jes: That advice doesn&#39;t help. MFC is a library, and its documentation covers the <i>interface</i>, not the implementation. How would you determine, what a base class implementation does?"}, {"owner": {"reputation": 1712, "user_id": 3781728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qta2K.png?s=128&g=1", "display_name": "Ed Dore", "link": "https://stackoverflow.com/users/3781728/ed-dore"}, "edited": false, "score": 0, "creation_date": 1575677248, "post_id": 59182183, "comment_id": 104658889, "body": ".wrt determine what the base impementation does: set a breakpoint on the call to the base function and hit F5. When the breakpoint is hit, do a Step Into with the debugger, and evaluate the code. MFC source ships with VS, and with latest version is located in a directory similar to : C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Enterprise\\VC\\Tools\\MSVC\\14.24.28314\\atlmfc\\src\\&zwnj;&#8203;mfc\\"}], "owner": {"reputation": 11, "user_id": 9433872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9674c2115d3c517d8ff71c03e67103e7?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/9433872/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575511864, "creation_date": 1575482413, "question_id": 59182183, "link": "https://stackoverflow.com/questions/59182183/why-should-cframewndoncreate-be-called-by-a-derived-class", "title": "Why should CFrameWnd::OnCreate be called by a derived class?", "body": "<p>Various examples show a the OnCreate method of a class derived from CFrameWnd calling the base class's OnCreate method.</p>\n\n<p>Yet a simple program I created appears to make no difference if I don't do this. The window is still displayed. Am I missing something, or is it just good practice?</p>\n\n<p>Be gentle, I'm just a beginner :)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1575481398, "post_id": 59181914, "comment_id": 104584602, "body": "<code>data = data;</code> sets the local variable <code>data</code> to the value the local variable <code>data</code> has. Not so useful but allowed. It does not modify the class member with the same name because it is shadowed. I would make the names different (not necessary but less confusing) and use the constructors initializer list. <a href=\"https://www.geeksforgeeks.org/when-do-we-use-initializer-list-in-c/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/when-do-we-use-initializer-lis&zwnj;&#8203;t-in-c/</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 8, "creation_date": 1575481677, "post_id": 59181914, "comment_id": 104584738, "body": "<code>Something(int data)     {         data = data;      }</code> wants to become <code>Something(int data) : data(data)      { }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1575482050, "post_id": 59182061, "comment_id": 104584931, "body": "<code>Something(int data) : data(data) {}</code> is the <i>preferred</i> way to handle this, without having to rename anything. Then there is no ambiguity at all over which <code>data</code> refers to the class member and which <code>data</code> refers to the constructor parameter."}, {"owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1575482140, "post_id": 59182061, "comment_id": 104584981, "body": "@RemyLebeau Ah, you&#39;re right. 3 ways to fix this. Personally, I still don&#39;t like it and would still pass it as _data."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1575482196, "post_id": 59182061, "comment_id": 104585009, "body": "@RemyLebeau Even with the member initializer list it is still reasonable to use different names to avoid confusion in the body or other initializers. I agree though, that using the initializer list should be preferred."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1575482284, "post_id": 59182061, "comment_id": 104585063, "body": "@walnut you can use similar argument for the opposite, more names means more chance for confusion. in <code>Something(int data) : data(data) {}</code> there is no way to confuse the two"}, {"owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "edited": false, "score": 0, "creation_date": 1575561748, "post_id": 59182061, "comment_id": 104615846, "body": "My personal take is simple: don&#39;t overload variable names. Ever. You might get away with it, but it&#39;s also a great way to have errors that you just can&#39;t figure out."}], "tags": [], "owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "is_accepted": false, "score": 0, "last_activity_date": 1575481880, "creation_date": 1575481880, "answer_id": 59182061, "question_id": 59181914, "link": "https://stackoverflow.com/questions/59181914/why-does-this-return-a-unexpected-value/59182061#59182061", "title": "why does this return a unexpected value?", "body": "<pre><code>Something(int data)\n{\n    data = data; //\n}\n</code></pre>\n\n<p>I consider this a really bad way to code this. You've defined a method that overrides a class-level variable, which is a really bad idea. To fix this, you can do one of two things:</p>\n\n<pre><code>Something(int _data)\n{\n    data = _data; //\n}\n\nSomething(int data)\n{\n    this-&gt;data = data; //\n}\n</code></pre>\n\n<p>I do the first one. I think it's evil to hide class variables, but you'll find a lot of code that does the second, at least in constructors. A lot of IDEs will flag this as a warning.</p>\n"}, {"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 2, "last_activity_date": 1575482755, "last_edit_date": 1575482755, "creation_date": 1575482445, "answer_id": 59182190, "question_id": 59181914, "link": "https://stackoverflow.com/questions/59181914/why-does-this-return-a-unexpected-value/59182190#59182190", "title": "why does this return a unexpected value?", "body": "<p>You should prefer initialization over assignment:</p>\n\n<pre><code>Something(int data) : data(data) {}\n</code></pre>\n\n<p>In your code <code>data</code> is the local variable, the parameter passed to the constructor. You are assigning the value of <code>data</code> to <code>data</code> which effectively does nothing. </p>\n\n<p>Here <code>: data(data)</code> is special syntax for the constructors initializer list. <code>data(...)</code> is the class member, while <code>...(data)</code> is the parameter. Note that this is a special case where you can refer to two different variables via the exact same name. You can still use a different name for the parameter, what you choose is only based on opinions, personal perference and possibly coding standards you have to adhere to.</p>\n"}], "owner": {"reputation": 501, "user_id": 11144794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb6d431490a2e8a9d50745c9ffa07103?s=128&d=identicon&r=PG&f=1", "display_name": "kkxx", "link": "https://stackoverflow.com/users/11144794/kkxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 1, "answer_count": 2, "score": -4, "last_activity_date": 1575482755, "creation_date": 1575481274, "question_id": 59181914, "link": "https://stackoverflow.com/questions/59181914/why-does-this-return-a-unexpected-value", "title": "why does this return a unexpected value?", "body": "<pre><code># include &lt;iostream&gt;\nusing namespace std;\n\n\nclass Something\n{\npublic:\n    int data;\n\n\n    Something(int data)\n    {\n        data = data; //\n    }\n};\n\nint main()\n{   \n    Something s = Something(4);\n    cout &lt;&lt; s.data &lt;&lt; endl; \n    return 0;\n\n}\n</code></pre>\n\n<p>When I run the above code, I got output 32764. I know it can be fixed by changing data = data by\n(*this).data = data or this->data = data. I was just thought the above code would work out also.  </p>\n"}, {"tags": ["c++", "qt", "vtk", "qvtkwidget"], "comments": [{"owner": {"reputation": 109, "user_id": 4358739, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/4IuKS.jpg?s=128&g=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/4358739/ravi"}, "edited": false, "score": 0, "creation_date": 1575498343, "post_id": 59181499, "comment_id": 104591206, "body": "Can you give more information about which version of the VTK is being used ?"}, {"owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "reply_to_user": {"reputation": 109, "user_id": 4358739, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/4IuKS.jpg?s=128&g=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/4358739/ravi"}, "edited": false, "score": 0, "creation_date": 1575498520, "post_id": 59181499, "comment_id": 104591251, "body": "@Ravi I&#39;m using VTK 8.2.0, Qt 5.13.1, macOS 10.14.6"}, {"owner": {"reputation": 109, "user_id": 4358739, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/4IuKS.jpg?s=128&g=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/4358739/ravi"}, "edited": false, "score": 0, "creation_date": 1575500490, "post_id": 59181499, "comment_id": 104591840, "body": "I had used the [VTK 8.2.0, Qt 5.13.1, Windows 10] but the issue cannot be replicated. But the similar scenario can be replicated when the actor is set to represent the wire frame. i.e. sphereActor-&gt;GetProperty()-&gt;SetRepresentationToWireframe(); When using the wireframe only when the mouse points on the edges of the wireframe the pick coordinates are obtained. May be you can try explicitly setting the sphereActor-&gt;GetProperty()-&gt;SetRepresentationToSurface();"}, {"owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "reply_to_user": {"reputation": 109, "user_id": 4358739, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/4IuKS.jpg?s=128&g=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/4358739/ravi"}, "edited": false, "score": 0, "creation_date": 1575535121, "post_id": 59181499, "comment_id": 104601398, "body": "It is already set to surface, so no difference. It is like as if the sphere is on a different position with respect to what I see on the screen, so clicking in the upper right empty region I consistently pick the sphere actor."}], "answers": [{"tags": [], "owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "is_accepted": false, "score": 1, "last_activity_date": 1575536142, "creation_date": 1575536142, "answer_id": 59191410, "question_id": 59181499, "link": "https://stackoverflow.com/questions/59181499/qvtkwidget-vtkproppicker-fails-wrong-coordinates/59191410#59191410", "title": "QVTKWidget + vtkPropPicker fails wrong coordinates", "body": "<p>Switching to <code>QVTKOpenGLWidget</code> fixed the issue.</p>\n\n<p>Also, <code>QVTKWidget</code> is deprecated and will be removed soon.</p>\n"}], "owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575536142, "creation_date": 1575479810, "last_edit_date": 1575498497, "question_id": 59181499, "link": "https://stackoverflow.com/questions/59181499/qvtkwidget-vtkproppicker-fails-wrong-coordinates", "title": "QVTKWidget + vtkPropPicker fails wrong coordinates", "body": "<p>I'm using <code>vtkPropPicker</code> with <code>QVTKWidget</code>, but it is not working: pick position is always (0,0,0) and actor is NULL when clicking on the white sphere. Clicking on the empty region however returns sometimes the <code>sphereActor</code>. Maybe is this a problem caused by the HiDPI resolution?</p>\n\n<pre><code>#include &lt;vtkBorderWidget.h&gt;\n#include &lt;vtkCommand.h&gt;\n#include &lt;vtkPolyDataMapper.h&gt;\n#include &lt;vtkRenderer.h&gt;\n#include &lt;vtkRenderWindow.h&gt;\n#include &lt;vtkSmartPointer.h&gt;\n#include &lt;vtkSphereSource.h&gt;\n\n#include &lt;vtkInteractorStyleTrackballCamera.h&gt;\n#include &lt;vtkPropPicker.h&gt;\n\nclass MouseInteractorStyle2 : public vtkInteractorStyleTrackballCamera\n{\npublic:\n    static MouseInteractorStyle2* New();\n    vtkTypeMacro(MouseInteractorStyle2, vtkInteractorStyleTrackballCamera);\n\n    virtual void OnLeftButtonDown()\n    {\n      int *clickPos = this-&gt;GetInteractor()-&gt;GetEventPosition();\n\n      vtkSmartPointer&lt;vtkPropPicker&gt;  picker = vtkSmartPointer&lt;vtkPropPicker&gt;::New();\n      picker-&gt;Pick(clickPos[0], clickPos[1], 0, this-&gt;GetDefaultRenderer());\n\n      double *pos = picker-&gt;GetPickPosition();\n      std::cout &lt;&lt; \"Click at \" &lt;&lt; clickPos[0] &lt;&lt; \" \" &lt;&lt; clickPos[1] &lt;&lt;\n                   \", pick position (world coordinates) is \" &lt;&lt; pos[0] &lt;&lt; \" \" &lt;&lt; pos[1] &lt;&lt; \" \" &lt;&lt; pos[2] &lt;&lt;\n                   \", actor is \" &lt;&lt; picker-&gt;GetActor() &lt;&lt; std::endl;\n\n      vtkInteractorStyleTrackballCamera::OnLeftButtonDown();\n    }\n};\n\nvtkStandardNewMacro(MouseInteractorStyle2);\n\nMainWindow::MainWindow(QWidget *parent)\n    : QMainWindow(parent)\n    , ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n\n    vtkSmartPointer&lt;vtkSphereSource&gt; sphereSource = vtkSmartPointer&lt;vtkSphereSource&gt;::New();\n    sphereSource-&gt;Update();\n\n    vtkSmartPointer&lt;vtkPolyDataMapper&gt; sphereMapper = vtkSmartPointer&lt;vtkPolyDataMapper&gt;::New();\n    sphereMapper-&gt;SetInputConnection(sphereSource-&gt;GetOutputPort());\n\n    vtkSmartPointer&lt;vtkActor&gt; sphereActor = vtkSmartPointer&lt;vtkActor&gt;::New();\n    sphereActor-&gt;SetMapper(sphereMapper);\n\n    vtkSmartPointer&lt;vtkRenderer&gt; renderer = vtkSmartPointer&lt;vtkRenderer&gt;::New();\n    renderer-&gt;AddActor(sphereActor);\n    this-&gt;ui-&gt;qvtkWidget-&gt;GetRenderWindow()-&gt;AddRenderer(renderer);\n\n    vtkSmartPointer&lt;MouseInteractorStyle2&gt; style = vtkSmartPointer&lt;MouseInteractorStyle2&gt;::New();\n    style-&gt;SetDefaultRenderer(renderer);\n    this-&gt;ui-&gt;qvtkWidget-&gt;GetInteractor()-&gt;SetInteractorStyle(style);\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n</code></pre>\n\n<p>mainwindow.h:</p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n\nQT_BEGIN_NAMESPACE\nnamespace Ui { class MainWindow; }\nQT_END_NAMESPACE\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    MainWindow(QWidget *parent = nullptr);\n    ~MainWindow();\n\nprivate:\n    Ui::MainWindow *ui;\n};\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>mainwindow.ui:</p>\n\n<pre class=\"lang-or-tag-here prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ui version=\"4.0\"&gt;\n &lt;class&gt;MainWindow&lt;/class&gt;\n &lt;widget class=\"QMainWindow\" name=\"MainWindow\"&gt;\n  &lt;property name=\"geometry\"&gt;\n   &lt;rect&gt;\n    &lt;x&gt;0&lt;/x&gt;\n    &lt;y&gt;0&lt;/y&gt;\n    &lt;width&gt;800&lt;/width&gt;\n    &lt;height&gt;600&lt;/height&gt;\n   &lt;/rect&gt;\n  &lt;/property&gt;\n  &lt;property name=\"windowTitle\"&gt;\n   &lt;string&gt;MainWindow&lt;/string&gt;\n  &lt;/property&gt;\n  &lt;widget class=\"QWidget\" name=\"centralwidget\"&gt;\n   &lt;layout class=\"QVBoxLayout\" name=\"verticalLayout\"&gt;\n    &lt;item&gt;\n     &lt;widget class=\"QVTKWidget\" name=\"qvtkWidget\" native=\"true\"/&gt;\n    &lt;/item&gt;\n   &lt;/layout&gt;\n  &lt;/widget&gt;\n  &lt;widget class=\"QMenuBar\" name=\"menubar\"&gt;\n   &lt;property name=\"geometry\"&gt;\n    &lt;rect&gt;\n     &lt;x&gt;0&lt;/x&gt;\n     &lt;y&gt;0&lt;/y&gt;\n     &lt;width&gt;800&lt;/width&gt;\n     &lt;height&gt;22&lt;/height&gt;\n    &lt;/rect&gt;\n   &lt;/property&gt;\n  &lt;/widget&gt;\n  &lt;widget class=\"QStatusBar\" name=\"statusbar\"/&gt;\n &lt;/widget&gt;\n &lt;customwidgets&gt;\n  &lt;customwidget&gt;\n   &lt;class&gt;QVTKWidget&lt;/class&gt;\n   &lt;extends&gt;QWidget&lt;/extends&gt;\n   &lt;header&gt;QVTKWidget.h&lt;/header&gt;\n   &lt;container&gt;1&lt;/container&gt;\n  &lt;/customwidget&gt;\n &lt;/customwidgets&gt;\n &lt;resources/&gt;\n &lt;connections/&gt;\n&lt;/ui&gt;\n</code></pre>\n\n<p>main.cpp:</p>\n\n<pre><code>#include \"mainwindow.h\"\n\n#include &lt;QApplication&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    MainWindow w;\n    w.show();\n    return a.exec();\n}\n</code></pre>\n\n<p>Using VTK 8.2.0, Qt 5.13.1, macOS 10.14.6</p>\n"}, {"tags": ["c++", "c", "linker", "embedded", "objcopy"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1575480718, "post_id": 59181464, "comment_id": 104584228, "body": "Since you&#39;ve tagged it [c] and [c++], it&#39;s worth mentioning that you could create your own tool. It sounds like a reasonably simple task to convert an SREC file with varying lengths into an SREC file with fixed lengths."}, {"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1575480980, "post_id": 59181464, "comment_id": 104584390, "body": "@user253751 I did it already &quot;by hand&quot; and I thought about writing a small python script and if until next week I find now better solution, I am going to do this. But I thougt maybe there are possible other users who came across the same problem"}, {"owner": {"reputation": 119, "user_id": 7458049, "user_type": "registered", "profile_image": "https://graph.facebook.com/1588840764489336/picture?type=large", "display_name": "0x6261627564", "link": "https://stackoverflow.com/users/7458049/0x6261627564"}, "edited": false, "score": 2, "creation_date": 1575492347, "post_id": 59181464, "comment_id": 104589247, "body": "If you come from automotive world you can use the Vector HexView or WindRiver ddump as an alternative 3rd party, both can be used to generate SREC with fixed length."}, {"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1575492605, "post_id": 59181464, "comment_id": 104589363, "body": "Probably worth seeing if there&#39;s some combination of options to srec_cat which could do this, either by itself or with modifications to fill out the end of a line.  Going through an intermediate flat binary stage could also be an option - start with a block of &quot;erased&quot;, <code>dd</code> a partial binary over it, re-encode to hex."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1575534809, "post_id": 59181464, "comment_id": 104601254, "body": "Writing such a program yourself is indeed not rocket science. Read the file and write a new one simultaneously. Store all data in RAM until you have enough to write a fixed length to the new file. Recalculate address and checksum. Repeat until done. Leave S0 and S9 as they were. Couple of hours of work, at most."}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 4079728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af401958b184b726aeeb94fec448fb6f?s=128&d=identicon&r=PG&f=1", "display_name": "Ummer K K", "link": "https://stackoverflow.com/users/4079728/ummer-k-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1576141317, "creation_date": 1576141317, "answer_id": 59300955, "question_id": 59181464, "link": "https://stackoverflow.com/questions/59181464/create-motorola-s-record-with-fixed-size-length/59300955#59300955", "title": "Create motorola s-record with fixed size length", "body": "<p>You can try the srec_cat utility to do this. Following is an example command.</p>\n\n<p>\"srec_cat long.srec \u2212o short.s19 \u2212line-length=46\"</p>\n"}], "owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576141317, "creation_date": 1575479723, "question_id": 59181464, "link": "https://stackoverflow.com/questions/59181464/create-motorola-s-record-with-fixed-size-length", "title": "Create motorola s-record with fixed size length", "body": "<p>Because I have to use a third-party bootloader which cannot handle varying lengths of lines in an SREC file, I need a way to instrument <code>objcopy</code> to create a SREC file, where every <code>S1</code> line has the same lengths (if no info from ELF file is provided, it should be filled with <code>FF</code>).</p>\n\n<p>We can assume that the address increments are consistent, so we do not jump higher in addresses than our specified line length. So we do not need to create in-between lines with all <code>FF</code> e.g.</p>\n\n<p>I found out about <code>--srec-len</code> but this only sets the maximum length size.<br>\nI would need something that sets a fixed length size, is there something I can use? </p>\n\n<p>A possible solution would be also to transform the earlier generated SREC file from objcopy with a (third-party) tool</p>\n"}, {"tags": ["c++", "c", "pointers", "while-loop"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1575479544, "post_id": 59181383, "comment_id": 104583633, "body": "<code>while(predicate) body</code>, in the first the body isn&#39;t given.  In the second, the body is <code>;</code>."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1575479909, "post_id": 59181383, "comment_id": 104583799, "body": "This is an apples-and-oranges comparison.  Statement 2 is useless and does nothing.  Statement 1 is incomplete, so we can&#39;t say what it does."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1575479946, "post_id": 59181383, "comment_id": 104583815, "body": "@SRIKANTH Provide a minimal complete program that demonstrates the difference."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1575481658, "post_id": 59181383, "comment_id": 104584731, "body": "<code>str</code> doesn&#39;t seem to be defined anywhere."}, {"owner": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575486516, "post_id": 59181383, "comment_id": 104586897, "body": "Updated with runnable code and results"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1575489472, "post_id": 59181383, "comment_id": 104588083, "body": "@SRI I&#39;ve tried to clarify the issue with your code in an edit to my answer."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575482084, "post_id": 59181460, "comment_id": 104584954, "body": "I have verified the next statement is executing only once."}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "reply_to_user": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575483272, "post_id": 59181460, "comment_id": 104585581, "body": "Then in the case you verified it only looped once. This is what the language does, that <code>if</code> and <code>else</code> in your updated example code is for every loop. See this runnable example <a href=\"https://rextester.com/EVS72895\" rel=\"nofollow noreferrer\">rextester.com/EVS72895</a>"}, {"owner": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575486220, "post_id": 59181460, "comment_id": 104586795, "body": "I got the point, but something is not correct in my code. if or else block is executing only once. Updated the runnable code and results. I am clueless."}], "tags": [], "owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "is_accepted": false, "score": 0, "last_activity_date": 1575479721, "creation_date": 1575479721, "answer_id": 59181460, "question_id": 59181383, "link": "https://stackoverflow.com/questions/59181383/pointer-decrement-inside-while-loop-with-semicolon-vs-without-semicolon/59181460#59181460", "title": "pointer decrement inside while loop with semicolon vs without semicolon", "body": "<blockquote>\n  <p><code>while(p2 != src &amp;&amp; --p2 != dest)</code></p>\n</blockquote>\n\n<p>Without the terminating semicolon, the loop is executing the next statement on <em>each iteration</em>. With the semicolon, the next statement will only be executed <em>once</em> when the loop ends. The exact difference will depend on what that statement is.</p>\n\n<pre><code>int x = 5, int y = 0;\nwhile (x--)\n++y;\n</code></pre>\n\n<p>Without the semicolon, <code>++y</code> happens on each iteration (x = 5, 4, 3, 2, 1) so y = 5. Add the semicolon and it only happens after the loop completes, giving y = 1.</p>\n\n<p>Note that if <code>++y</code> is on the same line or not, indented or not, has no relevance to C or C++.</p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575542939, "post_id": 59181519, "comment_id": 104605377, "body": "Thanks!. I got the point. But, as per the behavior of while loop, If the length is x (x &gt; 3) then the if-else block should be executed (x-3) times. But what ever is the length, the if-else block is being executed only once. could you please explain ?"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575549754, "post_id": 59181519, "comment_id": 104609004, "body": "@SRI please reread the second half of my answer again. Your while loop condition depends on <code>--p2 != dst</code>, but the very first time the condition is run, that is false. So your if-else is never once run (the loop is never entered)."}, {"owner": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575611167, "post_id": 59181519, "comment_id": 104632386, "body": "Thank you, but &lt;the very first time the condition is run, that is false&gt;, This happens only when the size is 4, If the size is greater than 4, lets assume the size to be 7 then the condition holds true for 3 iterations and then on the fourth iteration the condition becomes false. Hence if-else block should be executed for 3 times. But this is not happening. In the question, I have added memory lay out when the size is 7."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575648158, "post_id": 59181519, "comment_id": 104648972, "body": "@SRI &quot;<i>lets assume the size to be 7 then the condition holds true for 3 iterations</i>&quot; nope. The condition, <code>p2 != src &amp;&amp;  --p2 != dest</code> is true the <i>first</i> time you enter the loop, but then you run <code>while(size--) { *(--p1) = *(--p2); }</code> which decrements <code>p2</code>, <code>size</code> times. I&#39;m going to be honest with you here, this code is a mess. You have a nested loop for some reason, and that strange loop up top. I&#39;d strongly suggest starting over here. Or if this is a class project, seeking help from your professor."}, {"owner": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "edited": false, "score": 0, "creation_date": 1575656740, "post_id": 59181519, "comment_id": 104652551, "body": "Thanks a lot!, I have finally understood the whole mess I have created. Once again thank you."}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 1, "last_activity_date": 1575489454, "last_edit_date": 1575489454, "creation_date": 1575479864, "answer_id": 59181519, "question_id": 59181383, "link": "https://stackoverflow.com/questions/59181383/pointer-decrement-inside-while-loop-with-semicolon-vs-without-semicolon/59181519#59181519", "title": "pointer decrement inside while loop with semicolon vs without semicolon", "body": "<p>With a <code>while</code> (or <code>for</code> or <code>if</code>), you have two options for the body. You can either use curly braces for a multi-statement body:</p>\n\n<pre><code>while(condition) {\n    multi;\n    statement;\n    body;\n}\n</code></pre>\n\n<p>Or you can leave off the curly braces and the next statement will be considered the body of the loop. This can be nice with good formatting for short bodies:</p>\n\n<pre><code>if(condition)\n    return thing;\n</code></pre>\n\n<p>But it can also be confusing with bad formatting:</p>\n\n<pre><code>if(condition)\n    thing += thing2;\n    return thing;\n</code></pre>\n\n<p>Only that first statement (<code>thing += thing2</code>) is actually in the body of the <code>if</code> there. The <code>return</code> will get run every time regardless.</p>\n\n<p>A semicolon by itself is the null statement. It is a full statement in its own right, but it does nothing. So</p>\n\n<pre><code>while(condition);\n</code></pre>\n\n<p>Is the same as</p>\n\n<pre><code>while(condition) {\n    ;\n}\n</code></pre>\n\n<p>Your other example without the semicolon will pull the next statement found in the code and use it as the body of the loop.</p>\n\n<hr>\n\n<p>In response to your update, let's take a look at the memory of your string through a run of the function with input \"abcd\":</p>\n\n<pre><code>        src--+ dst-+\n             |     |\n             v     v\n            ++-----+----------------+\n            |0|1|2|3|4|5|6|7|8| ... |\n            +-----------------------+\ndest[15] -&gt; |a|b|c|d|0|0|0|0|0| ... |\n            +-----------------------+\n</code></pre>\n\n<p>Note that <code>size</code> here is 4, so when you do <code>char *p2 = (char *)src;</code> and <code>p2 += size;</code>, your pointers look like:</p>\n\n<pre><code>       p2+--+\n            |\nsrc+-+ dst++|\n     |     ||\n     v     vv\n    ++-----+----------------+\n    |0|1|2|3|4|5|6|7|8| ... |\n    +-----------------------+\n    |a|b|c|d|0|0|0|0|0| ... |\n    +-----------------------+\n</code></pre>\n\n<p>And then you do:</p>\n\n<pre><code>while(p2 != src &amp;&amp;  --p2 != dst)\n</code></pre>\n\n<p>Well guess what, <code>--p2</code> is exactly <code>dst</code>! So your loop ends without ever once getting run and you just return <code>dst</code>, which is a pointer to the last character in the string.</p>\n\n<p>This is one of the many problems with trying to copy a string within itself. Your source and destination are overlapping!</p>\n"}], "owner": {"reputation": 65, "user_id": 7939629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6576ba1adee3e5ea13b7ac2f19947ce0?s=128&d=identicon&r=PG&f=1", "display_name": "SRIKANTH", "link": "https://stackoverflow.com/users/7939629/srikanth"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "closed_date": 1575481664, "answer_count": 2, "score": -5, "last_activity_date": 1575611775, "creation_date": 1575479452, "last_edit_date": 1575611775, "question_id": 59181383, "link": "https://stackoverflow.com/questions/59181383/pointer-decrement-inside-while-loop-with-semicolon-vs-without-semicolon", "closed_reason": "Needs details or clarity", "title": "pointer decrement inside while loop with semicolon vs without semicolon", "body": "<pre><code>void* My_memmove(void *dest, const void *src, size_t size)\n{\n    char *p1 = (char *)dest;\n    char *p2 = (char *)src;\n\n    if(NULL == p1 || NULL == p2)\n    {\n        return NULL;\n    }\n    p2 += size;\n\n    while(p2 != src &amp;&amp;  --p2 != dest)\n    if(p2 != src)\n    {\n        printf(\"inside IF \\n\");\n        p1 += size;\n        p2  = (char *)src + size;\n\n        while(size--)\n        {\n            *(--p1) = *(--p2);\n        }\n    }\n    else\n    {\n        printf(\"inside ELSE \\n\");\n        while(size--)\n        {\n            *(p1++) = *(p2++);\n        }\n    }\n\n    return dest;\n}\n\nint main(void)\n{\n   char dest[15];\n   memset(dest, 0, 15);\n\n   printf(\"Enter the string : \");\n   scanf(\"%s\", dest);\n\n    My_memmove(dest+3, dest, strlen(dest));\n    printf(\"dest+3 : %s \\n\", dest+3);\n\n    return (0);\n}\n</code></pre>\n\n<p>Could you please explain what is happening when there is no semicolon after while(p2 != src &amp;&amp;  --p2 != dest)\nBecause the above program works for all the inputs expect for the input of size 4</p>\n\n<p>RESULTS:</p>\n\n<p>Enter the string : 12</p>\n\n<p>inside IF</p>\n\n<p>dest+3 : 12</p>\n\n<p>Enter the string : 123</p>\n\n<p>inside IF</p>\n\n<p>dest+3 : 123</p>\n\n<p>Enter the string : 1234</p>\n\n<p>dest+3 : 4</p>\n\n<p>Enter the string : 12345</p>\n\n<p>inside IF</p>\n\n<p>dest+3 : 12345</p>\n\n<p>Enter the string : 123456</p>\n\n<p>inside IF</p>\n\n<p>dest+3 : 123456</p>\n\n<p>Memory layout after p2+size when the size is 7</p>\n\n<pre><code>                      p2+--+\n                           | \n        src+-+ dst++       |\n             |     |       |\n             v     v       v\n            ++-----+-------+--------+\n            |0|1|2|3|4|5|6|7|8| ... |\n            +-----------------------+\ndest[15] -&gt; |a|b|c|d|e|f|g|0|0| ... |\n            +-----------------------+\n</code></pre>\n"}, {"tags": ["c#", "c++", "dcom"], "comments": [{"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1575479415, "post_id": 59181299, "comment_id": 104583567, "body": "If you&#39;re having trouble passing a string array, try passing a callback to the C# program, then when you get the printers in C# iterate the array of strinsg, passing each string one at a time into the callback."}, {"owner": {"reputation": 39, "user_id": 9045902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87a81594052fc5d75bc027d1dbaa69bb?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/9045902/alexander"}, "reply_to_user": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1575482100, "post_id": 59181299, "comment_id": 104584960, "body": "I think I solved it correctly, although the answer will come tomorrow when I&#39;ve got some sleep and can think more clearly."}], "owner": {"reputation": 39, "user_id": 9045902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87a81594052fc5d75bc027d1dbaa69bb?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/9045902/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575479114, "creation_date": 1575479114, "question_id": 59181299, "link": "https://stackoverflow.com/questions/59181299/retrieve-string-array-from-c-in-c-through-dcom", "title": "Retrieve string array from C++ in C# through DCOM", "body": "<p>I have an application that needs to retrieve an array of strings from another computer. I am fairly certain that everything works on the C++ side as I have other cases doing something similar but between C++. The first example below is how I image it would but with a function call from C# (which does not work). So how do I get the <em>printers</em> to work in this case?</p>\n\n<pre><code>IntPtr printers;\nint numPrinters;\n\nglobalPrinter.GetAllPrinterNames(out numPrinters, printers);\nstring[] printerNames;\nMarshalUnmananagedArray2Struct(printers, numPrinters, out printerNames); //perhaps a later case to figure out\n</code></pre>\n\n<p>Inside C++:</p>\n\n<pre><code>STDMETHODIMP CPrinter::GetAllPrinterNames(long* pValSize, BSTR** pVal)\n{\n    StackLock&lt;CPrinter&gt; aLock(this);\n\n    PRINTER_INFO_2*    list;\n    DWORD               numPrinters = 0;\n    DWORD               sz = 0;\n    DWORD               Level = 2;\n\n    EnumPrinters(PRINTER_ENUM_LOCAL | PRINTER_ENUM_CONNECTIONS, NULL, Level, NULL, 0, &amp;sz, &amp;numPrinters);\n    if (!EnumPrinters(PRINTER_ENUM_LOCAL | PRINTER_ENUM_CONNECTIONS, NULL, Level, (LPBYTE)list, sz, &amp;sz, &amp;numPrinters))\n    {\n        free(list);\n    }\n\n    *pValSize = numPrinters;\n\n    *pVal = (BSTR*) ::CoTaskMemAlloc((*pValSize) * sizeof(BSTR));\n\n    for (int n = 0; n &lt;= *pValSize; n++) {\n\n        String printerName = list[n].pPrinterName;\n        (*pVal)[n] = printerName.AllocBSTR(); //Help library allocs the BSTR.\n    }\n    free(list);\n\n    return S_OK;\n}\n</code></pre>\n\n<p>.idl:</p>\n\n<pre><code>[id(3), helpstring(\"method GetAllPrinterNames\")] HRESULT GetAllPrinterNames([out] long* length, [out, size_is(, *length)] BSTR **Message);\n</code></pre>\n"}, {"tags": ["c++", "constexpr"], "comments": [{"owner": {"reputation": 1508, "user_id": 5606784, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1kh6GOqapNQ/AAAAAAAAAAI/AAAAAAAAAD0/rhfjm0_RQWo/photo.jpg?sz=128", "display_name": "Rian Quinn", "link": "https://stackoverflow.com/users/5606784/rian-quinn"}, "edited": false, "score": 1, "creation_date": 1575479036, "post_id": 59181178, "comment_id": 104583343, "body": "I don&#39;t think this is an issue with constexpr as much as it is an issue with the use of begin() and end(). Use cbegin() and cend()."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "reply_to_user": {"reputation": 1508, "user_id": 5606784, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1kh6GOqapNQ/AAAAAAAAAAI/AAAAAAAAAD0/rhfjm0_RQWo/photo.jpg?sz=128", "display_name": "Rian Quinn", "link": "https://stackoverflow.com/users/5606784/rian-quinn"}, "edited": false, "score": 1, "creation_date": 1575479077, "post_id": 59181178, "comment_id": 104583364, "body": "@RianQuinn Or <code>const auto it</code>"}, {"owner": {"reputation": 1004, "user_id": 3088265, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/99c2e5db7086c4dc0a5bd9aada58f162?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Vock", "link": "https://stackoverflow.com/users/3088265/richard-vock"}, "edited": false, "score": 0, "creation_date": 1575479402, "post_id": 59181178, "comment_id": 104583559, "body": "Using <code>const auto</code> yields the same result (i.e. the same error). And std::experimental::ranges::filter_view (which is the actual type here) has no cbegin/cend."}, {"owner": {"reputation": 416, "user_id": 10291440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bp4ZW.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/10291440/bryan"}, "edited": false, "score": 2, "creation_date": 1575479592, "post_id": 59181178, "comment_id": 104583657, "body": "With GCC Trunk making both begin and end const functions gets it to compile. <a href=\"https://godbolt.org/z/3_wKh9\" rel=\"nofollow noreferrer\">godbolt.org/z/3_wKh9</a>"}, {"owner": {"reputation": 1004, "user_id": 3088265, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/99c2e5db7086c4dc0a5bd9aada58f162?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Vock", "link": "https://stackoverflow.com/users/3088265/richard-vock"}, "edited": false, "score": 0, "creation_date": 1575480198, "post_id": 59181178, "comment_id": 104583953, "body": "Indeed that compiles. In other words those functions cannot take const void* / const auto&amp; parameters..."}], "answers": [{"comments": [{"owner": {"reputation": 1004, "user_id": 3088265, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/99c2e5db7086c4dc0a5bd9aada58f162?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Vock", "link": "https://stackoverflow.com/users/3088265/richard-vock"}, "edited": false, "score": 0, "creation_date": 1575480833, "post_id": 59181678, "comment_id": 104584304, "body": "Unfortunately it seems that ranges (or at least views) do not implement const variants - rendering this infeasible. However your answer still provides the explanation, so I mark it as the accepted answer."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1004, "user_id": 3088265, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/99c2e5db7086c4dc0a5bd9aada58f162?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Vock", "link": "https://stackoverflow.com/users/3088265/richard-vock"}, "edited": false, "score": 0, "creation_date": 1575481562, "post_id": 59181678, "comment_id": 104584691, "body": "That&#39;s a shame :("}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 1, "last_activity_date": 1575480407, "creation_date": 1575480407, "answer_id": 59181678, "question_id": 59181178, "link": "https://stackoverflow.com/questions/59181178/passing-const-t-as-this-to-a-constexpr-member-function/59181678#59181678", "title": "Passing const T&amp; as this to a constexpr member function", "body": "<p>I don't think this has anything to do with <code>constexpr</code>.</p>\n\n<p>You have a reference to <code>const</code> <code>RangeT</code>, and you're trying to invoke non-<code>const</code> member functions on it (<code>begin()</code> and <code>end()</code>).</p>\n\n<p>Provide <code>const</code> overloads (and/or <code>cbegin()</code>/<code>cend()</code> variants) if you want to permit that.</p>\n"}, {"tags": [], "owner": {"reputation": 416, "user_id": 10291440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bp4ZW.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/10291440/bryan"}, "is_accepted": false, "score": 1, "last_activity_date": 1575480438, "creation_date": 1575480438, "answer_id": 59181690, "question_id": 59181178, "link": "https://stackoverflow.com/questions/59181178/passing-const-t-as-this-to-a-constexpr-member-function/59181690#59181690", "title": "Passing const T&amp; as this to a constexpr member function", "body": "<p>In your code as begin and end are not const functions the <code>this</code> pointer can't point to a <code>const</code> object without  \"discarding qualifiers\".  </p>\n\n<p>By making the functions <code>const</code> then the <code>this</code> pointer can point to a <code>const</code> object.</p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/language/member_functions#const-.2C_volatile-.2C_and_ref-qualified_member_functions\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/member_functions#const-.2C_volatile-.2C_and_ref-qualified_member_functions</a>  </p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/language/this\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/this</a></p>\n\n<p><a href=\"https://godbolt.org/z/3_wKh9\" rel=\"nofollow noreferrer\">https://godbolt.org/z/3_wKh9</a></p>\n"}], "owner": {"reputation": 1004, "user_id": 3088265, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/99c2e5db7086c4dc0a5bd9aada58f162?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Vock", "link": "https://stackoverflow.com/users/3088265/richard-vock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 59181678, "answer_count": 2, "score": 0, "last_activity_date": 1575480438, "creation_date": 1575478760, "question_id": 59181178, "link": "https://stackoverflow.com/questions/59181178/passing-const-t-as-this-to-a-constexpr-member-function", "title": "Passing const T&amp; as this to a constexpr member function", "body": "<p>I am trying to fix some library code where a boiled-down minimal version looks like this:</p>\n\n<pre><code> #include &lt;iostream&gt;\n\n template &lt;typename RangeT&gt;                                          \n struct formatter {                               \n     constexpr void format(const RangeT&amp; values) {    \n         for (auto it = values.begin(), end = values.end(); it != end; ++it) { \n             std::cout &lt;&lt; it &lt;&lt; \"\\n\";                \n         }                                                                       \n     }                                    \n }; \n\ntemplate &lt;typename RangeT, typename Formatter&gt; \nstruct type_erased {                                                       \n    static void format(const void* arg) {                                \n        Formatter f;                   \n        f.format(*static_cast&lt;const RangeT*&gt;(arg)); \n    }                                                  \n};                                                                 \n\nstruct view {   \n    int count_;                                \n\n    constexpr View(int count) : count_(count) {}  \n\n    constexpr int \n    begin() { return 0; }                   \n\n    constexpr int                                                    \n    end() { return -1; } \n};                      \n\nint                                                         \nmain()                                                         \n{                               \n    View view(5);       \n    void* ptr = static_cast&lt;void*&gt;(&amp;view);                          \n    type_erased&lt;View, formatter&lt;View&gt;&gt;::format(ptr); \n}                                                                       \n</code></pre>\n\n<p>The above code does not compile in GCC since:</p>\n\n<pre><code>../src/view.cpp: In instantiation of \u2018constexpr void formatter&lt;RangeT&gt;::format(const RangeT&amp;) [with RangeT = View]\u2019:\n../src/view.cpp:21:9:   required from \u2018static void type_erased&lt;RangeT, Formatter&gt;::format(const void*) [with RangeT = View; Formatter = formatter&lt;View&gt;]\u2019\n../src/view.cpp:43:41:   required from here\n../src/view.cpp:11:15: error: passing \u2018const View\u2019 as \u2018this\u2019 argument discards qualifiers [-fpermissive]\n   11 |     for (auto it = values.begin(), end = values.end(); it != end; ++it) {\n  |               ^~\n../src/view.cpp:31:5: note:   in call to \u2018constexpr int View::begin()\u2019\n   31 |     begin() { return 0; }\n  |     ^~~~~\n../src/view.cpp:11:36: error: passing \u2018const View\u2019 as \u2018this\u2019 argument discards qualifiers [-fpermissive]\n   11 |     for (auto it = values.begin(), end = values.end(); it != end; ++it) {\n  |                                    ^~~\n../src/view.cpp:34:5: note:   in call to \u2018constexpr int View::end()\u2019\n   34 |     end() { return -1; }\n</code></pre>\n\n<p>What are the rules regarding <code>this</code> in constexpr member function? Is it subject to the rules specified for function parameters or are there special constraints?</p>\n\n<p>How would I go about fixing this error? If it would only be the formatter struct I would use <code>RangeT&amp;&amp;</code> and <code>std::move</code> since views are by definition copyable in O(1) as far as I know. I don't know how to do that with the type erasure step in the mix though...</p>\n\n<p>Thanks in advance,\nRichard</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1575478567, "post_id": 59181082, "comment_id": 104583076, "body": "<code>Personne::Genre::HOMME</code>, since you declared <code>Genre</code> as an <code>enum class</code>, you need to fully qualify it."}, {"owner": {"reputation": 1, "user_id": 11359368, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0LpGmKZA1NI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfr7g5Xyqo4XiOY72Y0dGwoYry-zA/mo/photo.jpg?sz=128", "display_name": "Alice Langertton", "link": "https://stackoverflow.com/users/11359368/alice-langertton"}, "reply_to_user": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 0, "creation_date": 1575478618, "post_id": 59181082, "comment_id": 104583115, "body": "I shoud not change the test"}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1575478928, "post_id": 59181082, "comment_id": 104583281, "body": "Remove <code>class</code> after <code>enum</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11359368, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0LpGmKZA1NI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfr7g5Xyqo4XiOY72Y0dGwoYry-zA/mo/photo.jpg?sz=128", "display_name": "Alice Langertton", "link": "https://stackoverflow.com/users/11359368/alice-langertton"}, "edited": false, "score": 0, "creation_date": 1575478655, "post_id": 59181122, "comment_id": 104583135, "body": "I should not change the test, I should adapt the test with the code"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 1, "user_id": 11359368, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0LpGmKZA1NI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfr7g5Xyqo4XiOY72Y0dGwoYry-zA/mo/photo.jpg?sz=128", "display_name": "Alice Langertton", "link": "https://stackoverflow.com/users/11359368/alice-langertton"}, "edited": false, "score": 1, "creation_date": 1575478890, "post_id": 59181122, "comment_id": 104583266, "body": "@AliceLangertton \u2022 the test is broken.  You should change the test.  Tests test the code.  The code should not conform to the test, that&#39;s backwards."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1575479100, "post_id": 59181122, "comment_id": 104583387, "body": "@Eljay Good advice, unless the tests are coming from an external source (like the teacher for example)."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1575479312, "post_id": 59181122, "comment_id": 104583518, "body": "@Yksisarvinen \u2022 Agreed, in that case it is best to optimize the situation for the best grade, rather than to optimize for being correct."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1575479576, "post_id": 59181122, "comment_id": 104583650, "body": "@Eljay &quot;in that case it is best to optimize the situation for the best grade, rather than to optimize for being correct&quot; - No. It is better to be correct and then educate the teacher about his/her broken tests. Ignore irrelevant fluff like &quot;grades&quot;."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1575479662, "post_id": 59181122, "comment_id": 104583692, "body": "@JesperJuhl \u2022 depending on the teacher, that may adversely impact the grade, or may enhance the grade.  A bit of a gambit.  Know thy teacher before going down that path.  (I actually agree with you that grades are fluff.  But for many people, they are important.)"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1575479753, "post_id": 59181122, "comment_id": 104583737, "body": "@Eljay in the end, grades don&#39;t matter one bit. Being able to do your job or not does. Don&#39;t optimize for irrelevant metrics."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1575478806, "last_edit_date": 1575478806, "creation_date": 1575478601, "answer_id": 59181122, "question_id": 59181082, "link": "https://stackoverflow.com/questions/59181082/error-enum-is-not-e-member-of-the-class/59181122#59181122", "title": "ERROR : enum is not e member of the class", "body": "<p>You have to write</p>\n\n<pre><code>Personne::Genre genre = Personne::Genre::HOMME;\n</code></pre>\n\n<p>because Genre is a scoped enumeration.</p>\n\n<p>Or you could declare an unscoped enumeration in the class.</p>\n\n<pre><code>enum Genre { HOMME, FEMME, INDERTEMINE };\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11359368, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0LpGmKZA1NI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfr7g5Xyqo4XiOY72Y0dGwoYry-zA/mo/photo.jpg?sz=128", "display_name": "Alice Langertton", "link": "https://stackoverflow.com/users/11359368/alice-langertton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575478886, "creation_date": 1575478464, "question_id": 59181082, "link": "https://stackoverflow.com/questions/59181082/error-enum-is-not-e-member-of-the-class", "title": "ERROR : enum is not e member of the class", "body": "<p>I have declared an enum inside the class as in the below : </p>\n\n<pre><code>class Personne{\n\n    public:\n        enum class Genre { HOMME, FEMME, INDERTEMINE };\n        Personne();\n        Personne(const char*,const char*,Personne::Genre);\n        const char *getPrenom() const;\n        const char *getNom()const;\n        Personne::Genre getGenre() const;\n\n\n    private:\n        const char * nom;\n        const char * prenom;\n\n};\n</code></pre>\n\n<p>While doing this test : </p>\n\n<pre><code>TEST_CASE(\"Personne1\") {\n    const char * prenom   = \"Bruce\";\n    const char * nom      = \"Wayne\";\n    Personne::Genre genre = Personne::HOMME;\n    Personne p(prenom, nom, genre);\n\n    REQUIRE( prenom    == p.getPrenom());\n    REQUIRE( nom       == p.getNom());\n    REQUIRE( genre     == p.getGenre());\n}\n</code></pre>\n\n<p>It gives me an error : 'HOMME' is not a member of 'Personne'.\nPersonne::Genre genre = Personne::HOMME;</p>\n\n<p>Can you fix that please it's very important?</p>\n"}, {"tags": ["c++", "compiler-errors", "rvalue"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1575477618, "post_id": 59180731, "comment_id": 104582516, "body": "Why do you need the rvalue reference arguments, I just don&#39;t see it making any sense? What is the actual and underlying problem you need to solve using rvalue references? What is the use-case? How will (and do) you use the comparison operator?"}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 1, "creation_date": 1575477650, "post_id": 59180731, "comment_id": 104582529, "body": "Why do want to &quot;find out on which side of the <code>==</code> my rvalue reference is placed&quot;?  This maybe an X/Y problem."}, {"owner": {"reputation": 610, "user_id": 1702991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hnk8G.jpg?s=128&g=1", "display_name": "jaba", "link": "https://stackoverflow.com/users/1702991/jaba"}, "edited": false, "score": 0, "creation_date": 1575477811, "post_id": 59180731, "comment_id": 104582608, "body": "I have a variable which holds let&#39;s say AntiParallel. This should return true when compared with BiParallel. When the variable holds BiParallel it should only be true when compared with BiParallel. I think I will write a class for it to make my intentions clearer but I still want to know why I get a compiler error. Like this: var == PType::BiParallel"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1575477921, "post_id": 59180731, "comment_id": 104582667, "body": "I don&#39;t see you needing rvalue references for that. Just check something like <code>return (lhs == AntiParallel &amp;&amp; rhs == BiParallel || lhs == rhs);</code> And you can do that by taking <i>both</i> arguments by value."}, {"owner": {"reputation": 610, "user_id": 1702991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hnk8G.jpg?s=128&g=1", "display_name": "jaba", "link": "https://stackoverflow.com/users/1702991/jaba"}, "edited": false, "score": 0, "creation_date": 1575477983, "post_id": 59180731, "comment_id": 104582702, "body": "Thats not enough. someone could write PType::BiParallel == var which should be true if var = AntiParallel."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 2, "creation_date": 1575478478, "post_id": 59180731, "comment_id": 104583010, "body": "<code>void Foo(Bar bar)</code> and <code>void Foo(Bar&amp;&amp; bar)</code> the overload is ambiguous, because either one is equally a valid option when the parameter is an rvalue.  <code>void Foo(Bar const&amp; bar)</code> and <code>void Foo(Bar&amp;&amp; bar)</code> are not ambiguous."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1575480080, "post_id": 59180731, "comment_id": 104583898, "body": "Please explain why you don&#39;t just implement <code>bool operator==(PType, PType)</code> and nothing else? How is the value category of any relevance to <code>operator==</code>? I don&#39;t see a problem: <a href=\"https://godbolt.org/z/H5EAQ8\" rel=\"nofollow noreferrer\">godbolt.org/z/H5EAQ8</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1575480984, "post_id": 59180731, "comment_id": 104584392, "body": "Please take some time to refresh <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>. Include all details in the question itself, like the underlying problem you&#39;re trying to solve, why you need to differentiate between e.g. the literal <code>PType::Parallel</code> and a variable with that value, and other requirements you have. Preferably with a rationale behind the requirement (unless it&#39;s for a school assignment or similar, when there often isn&#39;t a rationale)."}], "answers": [{"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 1, "last_activity_date": 1575569033, "creation_date": 1575569033, "answer_id": 59200908, "question_id": 59180731, "link": "https://stackoverflow.com/questions/59180731/remove-global-implicit-function-avoid-ambiguous-operator/59200908#59200908", "title": "Remove global implicit function - avoid ambiguous operator", "body": "<p>I had written another answer to this question, but the OP pointed out that my answer was incorrect. Upon thinking about this more, I believe that what the OP is trying to do is simply not possible.</p>\n\n<p>As described in C++17 [over.built]/16, during overload resolution, a built-in candidate is generated with the signature</p>\n\n<pre><code>bool operator==(PType, PType);\n</code></pre>\n\n<p>If the built-in candidate is selected, then the built-in semantics of <code>==</code> will apply.</p>\n\n<p>Now, it is possible to define your own <code>operator==</code>, but unless you declare one <em>with the same exact signature</em> as the built-in candidate, the built-in candidate will still get generated. Thus, at overload resolution time, the built-in candidate either wins (due to exact match), or is tied with some user-declared overload, resultin in ambiguity.</p>\n\n<p>If you do declare your own <code>operator==</code> with the exact signature of the built-in candidate, then the built-in candidate is not generated ([over.match.oper]/(3.3.4)). You are allowed to delete it if you wish:</p>\n\n<pre><code>bool operator==(PType, PType) = delete;\n</code></pre>\n\n<p>However, a deleted function still participates in overload resolution (unless it is a defaulted move constructor or move assignment operator). Therefore, this does not solve the problem: with additional overloads such as</p>\n\n<pre><code>bool operator==(PType&amp;&amp;, PType);\n</code></pre>\n\n<p>there is potential for ambiguity, and such ambiguity only arises once the argument types are actually known. That's why the compilation error doesn't occur until you actually try to use <code>==</code>.</p>\n\n<p>What you really want is some way to prevent the built-in candidate, or another function with the same signature, from being considered by overload resolution at all. If you could do so, then you could force an overload to be chosen based on value category from an overload set like the following:</p>\n\n<pre><code>bool operator==(const PType&amp; lhs, const PType&amp; rhs);\nbool operator==(const PType&amp; lhs, PType&amp;&amp; rhs);\nbool operator==(PType&amp;&amp; lhs, const PType&amp; rhs);\nbool operator==(PType&amp;&amp; lhs, PType&amp;&amp; rhs);\n</code></pre>\n\n<p>But as far as I can see, there is no way to do this, so what the OP wants does not seem possible.</p>\n"}], "owner": {"reputation": 610, "user_id": 1702991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hnk8G.jpg?s=128&g=1", "display_name": "jaba", "link": "https://stackoverflow.com/users/1702991/jaba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 59200908, "answer_count": 1, "score": 0, "last_activity_date": 1575569033, "creation_date": 1575477367, "last_edit_date": 1575537850, "question_id": 59180731, "link": "https://stackoverflow.com/questions/59180731/remove-global-implicit-function-avoid-ambiguous-operator", "title": "Remove global implicit function - avoid ambiguous operator", "body": "<p>Let's say I have an enum class: </p>\n\n<pre><code>enum class PType : int\n{\n   Parallel     = 0,\n   AntiParallel = 1,\n   BiParallel   = 2,\n   NotParallel  = 3\n};\n</code></pre>\n\n<p>I now want to create the two operators </p>\n\n<pre><code>bool operator==(PType lhs, PType&amp;&amp; rhs)\nbool operator==(PType&amp;&amp; lhs, PType rhs)\n</code></pre>\n\n<p>so that I can find out on which side of the == my rvalue reference is placed. </p>\n\n<p>Unfortunately I get a compiler error </p>\n\n<blockquote>\n  <p>error C2593: 'operator ==' is ambiguous </p>\n</blockquote>\n\n<p>in VisualStudio because the compiler automatically generates the following operator:</p>\n\n<pre><code>bool operator==(const PType lhs, const PType rhs); \n</code></pre>\n\n<p>for it. Trying to delete it with </p>\n\n<pre><code>bool operator==(const PType lhs, const PType rhs) = delete;\n</code></pre>\n\n<p>doesn't result in an compilation error in that line but I still get the \"is ambiguous\" error afterward. </p>\n\n<p>Any ideas on how to make this work?</p>\n\n<p><strong>EDIT:</strong>\nI know how to do it with a regular class but I still want to figure out why the compiler produces the error. I know the code is sketchy, bad style and could lead to errors as mentioned by many. \nAnyway, I had the idea that this type of thing could work and so I tried and I think it can still work if I only could get \"= delete\" to work.\nSo now I ask this question out of pure academic interest because I want to learn more about the compiler and why the compiler reports no error when I delete the function but then complains a few lines later that the allegedly deleted function is considered an overload candidate. </p>\n\n<p>The reason why I want to differentiate between where the rvalue reference is because then I know on which side of the == the variable is and on which side the compare value like PType::BiParallel can be found. The reason for this is that a variable containing Parallel or AntiParallel compared with PType::BiParallel should return true as I just want to know if we have some sort of parallelism. On the other hand if the variable contains BiParallel and is compared against PType::Parallel or PType::AntiParallel both comparisons should be false because you can not say which one is true. \nAgain, I know this is bad style but I find it academically interesting why the compiler is accepting the \"= delete\". </p>\n"}, {"tags": ["c++", "winapi"], "answers": [{"comments": [{"owner": {"reputation": 642, "user_id": 3052750, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/T90I2.jpg?s=128&g=1", "display_name": "KKlouzal", "link": "https://stackoverflow.com/users/3052750/kklouzal"}, "edited": false, "score": 0, "creation_date": 1575481227, "post_id": 59181731, "comment_id": 104584514, "body": "Thank you, good eye on the <code>==</code> also. It is working as intended now. I assumed I could pass in a null pointer of the correct type and the function would set my pointer to some internal initialized variable. Thank you."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 642, "user_id": 3052750, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/T90I2.jpg?s=128&g=1", "display_name": "KKlouzal", "link": "https://stackoverflow.com/users/3052750/kklouzal"}, "edited": false, "score": 1, "creation_date": 1575481596, "post_id": 59181731, "comment_id": 104584703, "body": "@KKlouzal &quot;<i>I assumed I could pass in a null pointer of the correct type and the function would set my pointer to some internal initialized variable</i>&quot; - you assumed incorrectly. Nothing in the documentation claims passing in a NULL pointer is valid. Nor does it make sense to do so. Nor was there any NULL pointer being used in your code anyway"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1575481061, "last_edit_date": 1575481061, "creation_date": 1575480593, "answer_id": 59181731, "question_id": 59180706, "link": "https://stackoverflow.com/questions/59180706/dequeuing-multiple-completions-with-getqueuedcompletionstatusex/59181731#59181731", "title": "Dequeuing Multiple Completions With GetQueuedCompletionStatusEx", "body": "<p>You quoted from the <a href=\"https://docs.microsoft.com/en-us/windows/win32/fileio/getqueuedcompletionstatusex-func\" rel=\"nofollow noreferrer\">documentation</a>, but you seem to have missed the important part <em>above</em> the snippet you quoted:</p>\n\n<blockquote>\n  <p><em>lpCompletionPortEntries</em> [out]</p>\n  \n  <p><strong>On input, points to a pre-allocated array of <code>OVERLAPPED_ENTRY</code> structures.</strong></p>\n  \n  <p>On output, receives an array of <code>OVERLAPPED_ENTRY</code> structures that hold the entries. The number of array elements is provided by <em>ulNumEntriesRemoved</em>.</p>\n</blockquote>\n\n<p><code>OVERLAPPED_ENTRY pEntries;</code> declares a <em>single</em> <code>OVERLAPPED_ENTRY</code>, not an <em>array</em> of <code>OVERLAPPED_ENTRY</code> elements.  That is why <code>pEntries[i]</code> does not work, because <code>pEntries</code> is not an array (or even a pointer).</p>\n\n<p>When you pass <code>&amp;pEntries</code> to the function, you are passing in a pointer to 1 <code>OVERLAPPED_ENTRY</code>, but you are setting the <code>ulCount</code> pointer to <code>PENDING_RECVS</code>, so the function is expecting you to pass in a pointer to an array containing at last <code>PENDING_RECVS</code> number of <code>OVERLAPPED_ENTRY</code> elements in it.  You are not doing that (unless <code>PENDING_RECVS</code> is 1).</p>\n\n<p>Also, <code>NumEntries = 0</code> is an assignment, not a comparison.  You should have gotten a compiler warning about that.  You need to use <code>operator==</code> instead of <code>operator=</code>.</p>\n\n<p>Try something more like this instead:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void GetPackets() {\n    OVERLAPPED_ENTRY Entries[PENDING_RECVS];\n    ULONG NumEntries = 0;\n    if (!GetQueuedCompletionStatusEx(PointIOCP, Entries, PENDING_RECVS, &amp;NumEntries, 0, FALSE)) {\n        printf(\"Get Queued Completion Status - Point Error: %u\\n\", GetLastError());\n        return;\n    }\n\n    if (NumEntries == 0) { return; }\n\n    printf(\"Got Entries!\\n\");\n    for (ULONG i = 0; i &lt; NumEntries; ++i) {\n        NetPacket_Recv* Packet = reinterpret_cast&lt;NetPacket_Recv*&gt;(Entries[i].lpOverlapped);\n        ...\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1575480890, "creation_date": 1575480890, "answer_id": 59181814, "question_id": 59180706, "link": "https://stackoverflow.com/questions/59180706/dequeuing-multiple-completions-with-getqueuedcompletionstatusex/59181814#59181814", "title": "Dequeuing Multiple Completions With GetQueuedCompletionStatusEx", "body": "<p>Make it:</p>\n\n<pre><code>OVERLAPPED_ENTRY entries[10];\n</code></pre>\n\n<p>(or some other maximum number you would like to return) instead, just like any other array. And pass the number of instances as the third parameter to GetQueuedCompletionStatusEx. (note how I changed the variable name as it is not actually a pointer). The function parameter is a pointer but the array variable is not.</p>\n"}], "owner": {"reputation": 642, "user_id": 3052750, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/T90I2.jpg?s=128&g=1", "display_name": "KKlouzal", "link": "https://stackoverflow.com/users/3052750/kklouzal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 59181731, "answer_count": 2, "score": 0, "last_activity_date": 1575481061, "creation_date": 1575477316, "question_id": 59180706, "link": "https://stackoverflow.com/questions/59180706/dequeuing-multiple-completions-with-getqueuedcompletionstatusex", "title": "Dequeuing Multiple Completions With GetQueuedCompletionStatusEx", "body": "<p>I'm attempting to use <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/ioapiset/nf-ioapiset-getqueuedcompletionstatusex\" rel=\"nofollow noreferrer\"><code>GetQueuedCompletionStatusEx</code></a> to dequeue multiple completions from an I/O Completion Port (IOCP).</p>\n\n<pre><code>void GetPackets() {\n    OVERLAPPED_ENTRY pEntries;\n    ULONG NumEntries;\n    if (!GetQueuedCompletionStatusEx(PointIOCP, &amp;pEntries, PENDING_RECVS, &amp;NumEntries, 0, false)) {\n        printf(\"Get Queued Completion Status - Point Error: %i\\n\", GetLastError());\n        return;\n    }\n\n    if (NumEntries = 0) { return; }\n\n    printf(\"Got Entries!\\n\");\n    for (unsigned int i = 0; i &lt; NumEntries; i++) {\n        NetPacket_Recv* Packet = reinterpret_cast&lt;NetPacket_Recv*&gt;(pEntries[i].lpOverlapped);\n    }\n}\n</code></pre>\n\n<p>The error is with <code>pEntries[i].lpOverlapped</code>. The compiler is telling me no <code>[]</code> operator exists for <code>OVERLAPPED_ENTRY</code>. According to the documentation <code>pEntries</code> should receive an array of <code>OVERLAPPED_ENTRY</code> structures. </p>\n\n<blockquote>\n  <p>lpCompletionPortEntries: Receives an array of OVERLAPPED_ENTRY structures that hold the entries.</p>\n</blockquote>\n\n<p>I'm only declaring a single instance of <code>OVERLAPPED_ENTRY</code> when I define <code>pEntries</code>. <strong>How do I define <code>pEntries</code> to be a pointer to an array of <code>OVERLAPPED_ENTRY</code> instead?</strong></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575477283, "post_id": 59180664, "comment_id": 104582312, "body": "Are you actually doing <code>void do(MyClass&lt;int&gt;::Ptr ptr)</code>, or do you have <code>template &lt;typename T&gt; void do(MyClass&lt;T&gt;::Ptr ptr)</code>?"}, {"owner": {"reputation": 327, "user_id": 10116440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d5c9fa71ce4de6fd5bc6dd29956979?s=128&d=identicon&r=PG", "display_name": "Guerlando OCs", "link": "https://stackoverflow.com/users/10116440/guerlando-ocs"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575477867, "post_id": 59180664, "comment_id": 104582639, "body": "@NathanOliver-ReinstateMonica <code>do</code> is a member function of a templated class. Sory for not including it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575477958, "post_id": 59180664, "comment_id": 104582689, "body": "No worries.  When you want to do <code>void do(MyClass&lt;T&gt;::Ptr ptr)</code> you need <code>void do(typename MyClass&lt;T&gt;::Ptr ptr)</code> to tell the compiler that <code>ptr</code> is a type since it is a dependent name."}], "owner": {"reputation": 327, "user_id": 10116440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d5c9fa71ce4de6fd5bc6dd29956979?s=128&d=identicon&r=PG", "display_name": "Guerlando OCs", "link": "https://stackoverflow.com/users/10116440/guerlando-ocs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 0, "closed_date": 1575477906, "answer_count": 0, "score": 0, "last_activity_date": 1575477217, "creation_date": 1575477217, "question_id": 59180664, "link": "https://stackoverflow.com/questions/59180664/how-to-do-typedef-for-shared-ptr-of-templated-class", "closed_reason": "Duplicate", "title": "How to do typedef for shared_ptr of templated class?", "body": "<p>I want to do like this:</p>\n\n<pre><code>template &lt;class T&gt;\nclass MyClass\n{\npublic:\n    typedef std::shared_ptr&lt;MyClass&gt; Ptr;\n</code></pre>\n\n<p>so I can use like this:</p>\n\n<pre><code>void do(MyClass&lt;int&gt;::Ptr ptr)\n</code></pre>\n\n<p>however I'm getting </p>\n\n<pre><code>error: \u2018MyClass&lt;T&gt;::Ptr\u2019 is not a type\n     void do(MyClass&lt;T&gt;::Ptr ptr);\n</code></pre>\n"}, {"tags": ["c++", "string", "segmentation-fault"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1575477543, "post_id": 59180627, "comment_id": 104582465, "body": "<code>BaseObject(this-&gt;OptionConstructor(option))</code> the <code>this</code> isn&#39;t constructed yet at that point.  Probably going to cause problems.  Make your constructor helper function <code>static</code>."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1575477914, "post_id": 59180627, "comment_id": 104582665, "body": "Code also works if you replace <code>string str = &quot;foo&quot;;</code> with <code>string str = string(&quot;foo&quot;);</code> (at least, it does on MSVC). Could be a clue?"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1575477977, "post_id": 59180627, "comment_id": 104582701, "body": "It&#39;s this line that crashes: <code>this-&gt;str = option.str;</code>"}, {"owner": {"reputation": 348, "user_id": 5675380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vnmtf.jpg?s=128&g=1", "display_name": "Matthieu H", "link": "https://stackoverflow.com/users/5675380/matthieu-h"}, "reply_to_user": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1575478152, "post_id": 59180627, "comment_id": 104582804, "body": "@Adrian On the online IDE use <code>string str = string(&quot;foo&quot;);</code> does not change anything."}, {"owner": {"reputation": 348, "user_id": 5675380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vnmtf.jpg?s=128&g=1", "display_name": "Matthieu H", "link": "https://stackoverflow.com/users/5675380/matthieu-h"}, "reply_to_user": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1575478203, "post_id": 59180627, "comment_id": 104582842, "body": "@Adrian, Ok but why ? I want an explanation."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1575478432, "post_id": 59180627, "comment_id": 104582976, "body": "@MatthieuH So do I! \ud83d\ude0a So far, I can only guess - explicit construction of a <code>string</code> <i>versus</i> initialization/assignment? It&#39;s certainly got me going."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1575479098, "post_id": 59180627, "comment_id": 104583384, "body": "@Adrian-ReinstateMonica \u2022 it&#39;ll crash there... if you are lucky.  The string object has not been constructed yet at that point, so it&#39;s just uninitialized bits.  That problem stems from using <code>this</code> before it has been constructed."}, {"owner": {"reputation": 1573, "user_id": 752318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31de368b1bbb9988477511b2c59d61c0?s=128&d=identicon&r=PG", "display_name": "pure cuteness", "link": "https://stackoverflow.com/users/752318/pure-cuteness"}, "edited": false, "score": 2, "creation_date": 1575479395, "post_id": 59180627, "comment_id": 104583555, "body": "The line <code>this-&gt;str = option.str;</code> calls copy-assignment operator of <code>std::string</code>, but <code>this-&gt;str</code> is not initialized yet. For example, It may crash because copy-assignment operator tries to deallocate memory pointed by <code>this-&gt;str</code>, but fails because <code>this-&gt;str</code> does not point to correct memory (it is not initialized and may contain garbage)."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "reply_to_user": {"reputation": 1573, "user_id": 752318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31de368b1bbb9988477511b2c59d61c0?s=128&d=identicon&r=PG", "display_name": "pure cuteness", "link": "https://stackoverflow.com/users/752318/pure-cuteness"}, "edited": false, "score": 0, "creation_date": 1575497761, "post_id": 59180627, "comment_id": 104591040, "body": "@purecuteness Excellent! I smelt UB but couldn&#39;t nail it down - you did that. Consider  posting an answer - you&#39;re guaranteed at least one upvote!"}, {"owner": {"reputation": 348, "user_id": 5675380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vnmtf.jpg?s=128&g=1", "display_name": "Matthieu H", "link": "https://stackoverflow.com/users/5675380/matthieu-h"}, "reply_to_user": {"reputation": 1573, "user_id": 752318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31de368b1bbb9988477511b2c59d61c0?s=128&d=identicon&r=PG", "display_name": "pure cuteness", "link": "https://stackoverflow.com/users/752318/pure-cuteness"}, "edited": false, "score": 0, "creation_date": 1575625265, "post_id": 59180627, "comment_id": 104637700, "body": "@purecuteness So did you say that my string is built after the constructor call? That doesn&#39;t make any sense !"}, {"owner": {"reputation": 1573, "user_id": 752318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31de368b1bbb9988477511b2c59d61c0?s=128&d=identicon&r=PG", "display_name": "pure cuteness", "link": "https://stackoverflow.com/users/752318/pure-cuteness"}, "edited": false, "score": 0, "creation_date": 1575627199, "post_id": 59180627, "comment_id": 104638694, "body": "Constructors of members are called after constructors of base classes. <code>OptionConstructor</code> is called before <code>BaseObject</code> constructor, hence it is called before <code>option</code> member constructor. Inside <code>OptionConstructor</code> you&#39;re trying to assign to <code>option</code> member, but it&#39;s not constructed - you can&#39;t work with it yet."}, {"owner": {"reputation": 348, "user_id": 5675380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vnmtf.jpg?s=128&g=1", "display_name": "Matthieu H", "link": "https://stackoverflow.com/users/5675380/matthieu-h"}, "reply_to_user": {"reputation": 1573, "user_id": 752318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31de368b1bbb9988477511b2c59d61c0?s=128&d=identicon&r=PG", "display_name": "pure cuteness", "link": "https://stackoverflow.com/users/752318/pure-cuteness"}, "edited": false, "score": 0, "creation_date": 1575629251, "post_id": 59180627, "comment_id": 104639729, "body": "@purecuteness Ok I understood, my problem is at the end of <code>BaseObject</code> consturctor I call a an <code>isValid()</code> method and this methods fail if option is a <code>null_ptr</code>. My solution is to pass a default <code>BaseOption</code> in <code>baseObject</code> constructor and set the value of pointer inside contructor of `DerivedOption."}], "answers": [{"comments": [{"owner": {"reputation": 348, "user_id": 5675380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vnmtf.jpg?s=128&g=1", "display_name": "Matthieu H", "link": "https://stackoverflow.com/users/5675380/matthieu-h"}, "edited": false, "score": 0, "creation_date": 1575478401, "post_id": 59180952, "comment_id": 104582958, "body": "Yes But I need the option to be instantiated before the BaseOject constructor  because I use option insite BaseOject constructor."}, {"owner": {"reputation": 1573, "user_id": 752318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31de368b1bbb9988477511b2c59d61c0?s=128&d=identicon&r=PG", "display_name": "pure cuteness", "link": "https://stackoverflow.com/users/752318/pure-cuteness"}, "reply_to_user": {"reputation": 348, "user_id": 5675380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vnmtf.jpg?s=128&g=1", "display_name": "Matthieu H", "link": "https://stackoverflow.com/users/5675380/matthieu-h"}, "edited": false, "score": 1, "creation_date": 1575478535, "post_id": 59180952, "comment_id": 104583053, "body": "Then it is better to add member function <code>Init(BaseOption *)</code> to <code>BaseObject</code> class, and call that function from the body of <code>DerivedObject</code> constructor"}, {"owner": {"reputation": 348, "user_id": 5675380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vnmtf.jpg?s=128&g=1", "display_name": "Matthieu H", "link": "https://stackoverflow.com/users/5675380/matthieu-h"}, "edited": false, "score": 0, "creation_date": 1575625182, "post_id": 59180952, "comment_id": 104637663, "body": "So did you say that my string is built after the constructor call ?"}, {"owner": {"reputation": 1573, "user_id": 752318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31de368b1bbb9988477511b2c59d61c0?s=128&d=identicon&r=PG", "display_name": "pure cuteness", "link": "https://stackoverflow.com/users/752318/pure-cuteness"}, "reply_to_user": {"reputation": 348, "user_id": 5675380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vnmtf.jpg?s=128&g=1", "display_name": "Matthieu H", "link": "https://stackoverflow.com/users/5675380/matthieu-h"}, "edited": false, "score": 0, "creation_date": 1575626828, "post_id": 59180952, "comment_id": 104638513, "body": "Members are initialized after constructors of base classes."}], "tags": [], "owner": {"reputation": 1573, "user_id": 752318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31de368b1bbb9988477511b2c59d61c0?s=128&d=identicon&r=PG", "display_name": "pure cuteness", "link": "https://stackoverflow.com/users/752318/pure-cuteness"}, "is_accepted": false, "score": 2, "last_activity_date": 1575478422, "last_edit_date": 1575478422, "creation_date": 1575478082, "answer_id": 59180952, "question_id": 59180627, "link": "https://stackoverflow.com/questions/59180627/segmentation-fault-core-dumped-with-string-but-not-with-char/59180952#59180952", "title": "Segmentation fault (core dumped) with string but not with char*", "body": "<p>You have very peculiar constructor of <code>DerivedObject</code>. Change it to something like this:</p>\n\n<pre><code>class DerivedObject : public BaseObject {\npublic:\n    DerivedObject(DerivedOption option)\n        : BaseObject(&amp;this-&gt;option)\n        , option(std::move(option))\n    {}\n\n    DerivedOption option;\n};\n</code></pre>\n\n<p>It's still peculiar, because you're passing pointer to not-yet-constructed member <code>option</code> to constructor of <code>BaseObject</code></p>\n\n<p>Also you should remove implementation of copy-assignment operator in <code>BaseOption</code>/<code>DerivedOption</code> or implement copy-constructor as well.</p>\n\n<hr>\n\n<p>In your example function <code>OptionConstructor</code> is called even before constructor of <code>BaseObject</code>, moreover that function calls copy-assignment operator of not-yet constructed member <code>option</code>, which I suppose is undefined behavior (in your case it renders to program crash).</p>\n"}, {"tags": [], "owner": {"reputation": 348, "user_id": 5675380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vnmtf.jpg?s=128&g=1", "display_name": "Matthieu H", "link": "https://stackoverflow.com/users/5675380/matthieu-h"}, "is_accepted": true, "score": 0, "last_activity_date": 1575899166, "last_edit_date": 1575899166, "creation_date": 1575630189, "answer_id": 59211887, "question_id": 59180627, "link": "https://stackoverflow.com/questions/59180627/segmentation-fault-core-dumped-with-string-but-not-with-char/59211887#59211887", "title": "Segmentation fault (core dumped) with string but not with char*", "body": "<p>For solution my problem I did something like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class BaseObject {\npublic:\n    BaseObject(BaseOption* option) {\n        option != nullptr ? this-&gt;option = option : this-&gt;option = new BaseOption();\n    }\nprotected :\n    BaseOption* option;\n};\n\nclass DerivedObject : public BaseObject {\npublic:\n    DerivedObject(DerivedOption option)\n    : BaseObject(nullptr) {\n        this-&gt;option = option;\n        delete this-&gt;BaseObject::option;\n        this-&gt;BaseObject::option;\n    }\n    DerivedOption option;\n\n};\n</code></pre>\n"}], "owner": {"reputation": 348, "user_id": 5675380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vnmtf.jpg?s=128&g=1", "display_name": "Matthieu H", "link": "https://stackoverflow.com/users/5675380/matthieu-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 59211887, "answer_count": 2, "score": 0, "last_activity_date": 1575899166, "creation_date": 1575477108, "last_edit_date": 1575630241, "question_id": 59180627, "link": "https://stackoverflow.com/questions/59180627/segmentation-fault-core-dumped-with-string-but-not-with-char", "title": "Segmentation fault (core dumped) with string but not with char*", "body": "<p>I have a very weird and complicated bug related to the functioning of the string in C++.\nI wrote MWE (minimal working example) that I compile with a online IDE (<a href=\"https://ide.geeksforgeeks.org/VvtPbcQPa2\" rel=\"nofollow noreferrer\">code here</a>) :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass BaseOption {\npublic:\n    BaseOption&amp; operator=(const BaseOption&amp; option) {\n        return *this;\n    }\n};\n\nclass DerivedOption: public BaseOption\n{\n\npublic:\n    string str = \"foo\";\n\n    DerivedOption&amp; operator=(const DerivedOption&amp; option) {\n        this-&gt;str = option.str;\n        this-&gt;BaseOption::operator=(option);\n        return *this;\n    };\n};\n\nclass BaseObject {\npublic:\n    BaseObject(BaseOption* option) {\n        this-&gt;option = option;\n}\nprivate:\n    BaseOption* option;\n};\n\nclass DerivedObject : public BaseObject {\npublic:\n    DerivedObject(DerivedOption option)\n    : BaseObject(this-&gt;OptionConstructor(option)){}\n    DerivedOption option;\nprivate:\n    DerivedOption* OptionConstructor(DerivedOption&amp; option){\n        this-&gt;option = option;\n        return &amp;this-&gt;option;\n    }\n};\n\n\nint main() {\n    DerivedOption option;\n    DerivedObject object(option);\n    cout &lt;&lt; \"The program ran without error.\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>This code return a Segmentation Fault (SIGSEGV) at runtime</p>\n\n<p><strong>but</strong> when I remplace</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>string str = \"foo\";\n</code></pre>\n\n<p>by</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>char* str = (char*)\"foo\";\n</code></pre>\n\n<p>the code works correctly.\nCan someone explain that?</p>\n"}, {"tags": ["c++", "linux", "system-calls"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1575478426, "post_id": 59180592, "comment_id": 104582972, "body": "Note: a file can have multiple names - hard links."}], "answers": [{"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 1, "last_activity_date": 1575479033, "last_edit_date": 1575479033, "creation_date": 1575478612, "answer_id": 59181124, "question_id": 59180592, "link": "https://stackoverflow.com/questions/59180592/more-explanation-on-statfs64/59181124#59181124", "title": "More explanation on `statfs64`", "body": "<blockquote>\n  <p>Does <strong>\"total file nodes in file system\"</strong> mean how much existing files we have? Does it include directories and links?</p>\n</blockquote>\n\n<p>Almost. Yes, it includes directories and softlinks, but two files can can share the same inode. In that case, they are hardlinked and share the same space on hard disk, but is viewed as different files in the filesystem. Example to illustrate:</p>\n\n<pre><code>% echo Hello &gt; test1.txt\n% ln test1.txt test2.txt\n% ls -i test1.txt test2.txt\n14946320 test1.txt  14946320 test2.txt\n</code></pre>\n\n<p>The number you'll see to the left of the filenames are the inodes (you'll have a different number than in my example). As you can see, they have the same inode. If you make a change to one file, the same change will be visible through the other file.</p>\n\n<blockquote>\n  <p>What does mean \"free file nodes in fs\"?</p>\n</blockquote>\n\n<p>A filesystem often have an upper limit of inodes it can keep track of. The actual type <code>fsfilcnt_t</code> sets one limit (18446744073709551615 on my system), but it's most probably something lower. Unless you use your filesystem in very special ways, this limit is usually not a problem.</p>\n\n<blockquote>\n  <p>What is f_spare? In some Linux forks (for example, in Android) I see that f_spare size is 4, and additional field f_flags is defined. </p>\n</blockquote>\n\n<p><code>f_spare</code> is just spare bytes to pad the struct itself. The padding bytes are reserved for future use. If one <code>__fsword_t</code> of info is added to the struct in the future, they'll remove one spare <code>__fsword_t</code> from <code>f_spare</code>. My system only has 4 spare <code>__fsword_t</code>s for example (32 bytes).</p>\n\n<blockquote>\n  <p>What flags are defined for f_flags?</p>\n</blockquote>\n\n<p>The mount flags defined for your system may be different, but my <code>man statfs64</code> page shows these:</p>\n\n<pre><code>   ST_MANDLOCK\n          Mandatory locking is permitted on the filesystem (see fcntl(2)).\n\n   ST_NOATIME\n          Do not update access times; see mount(2).\n\n   ST_NODEV\n          Disallow access to device special files on this filesystem.\n\n   ST_NODIRATIME\n          Do not update directory access times; see mount(2).\n\n   ST_NOEXEC\n          Execution of programs is disallowed on this filesystem.\n\n   ST_NOSUID\n          The set-user-ID and set-group-ID bits are ignored by exec(3) for executable files on this filesystem\n\n   ST_RDONLY\n          This filesystem is mounted read-only.\n\n   ST_RELATIME\n          Update atime relative to mtime/ctime; see mount(2).\n\n   ST_SYNCHRONOUS\n          Writes are synched to the filesystem immediately (see the description of O_SYNC in open(2)).\n   ST_MANDLOCK\n          Mandatory locking is permitted on the filesystem (see fcntl(2)).\n\n   ST_NOATIME\n          Do not update access times; see mount(2).\n\n   ST_NODEV\n          Disallow access to device special files on this filesystem.\n\n   ST_NODIRATIME\n          Do not update directory access times; see mount(2).\n\n   ST_NOEXEC\n          Execution of programs is disallowed on this filesystem.\n\n   ST_NOSUID\n          The set-user-ID and set-group-ID bits are ignored by exec(3) for executable files on this filesystem\n\n   ST_RDONLY\n          This filesystem is mounted read-only.\n\n   ST_RELATIME\n          Update atime relative to mtime/ctime; see mount(2).\n\n   ST_SYNCHRONOUS\n          Writes are synched to the filesystem immediately (see the description of O_SYNC in open(2)).\n</code></pre>\n\n<blockquote>\n  <p>Is f_fsid just random number that uniquely identifies the file system, or what is it?</p>\n</blockquote>\n\n<p>Directly from the <code>man statfs64</code> page: <em>\"Nobody knows what f_fsid is supposed to contain (but see below)\"</em> and further below:</p>\n\n<p><strong>The <code>f_fsid</code> field</strong></p>\n\n<p>Solaris, Irix and POSIX have a system call statvfs(2) that returns a struct statvfs (defined in ) containing an unsigned long f_fsid.  Linux, SunOS, HP-UX, 4.4BSD have a system call  statfs()  that  returns a struct statfs (defined in ) containing a fsid_t f_fsid, where fsid_t is defined as struct { int val[2]; }.  The same holds for FreeBSD, except that it uses the include file .</p>\n\n<p>The  general  idea  is that f_fsid contains some random stuff such that the pair (f_fsid,ino) uniquely determines a file.  Some operating systems use (a variation on) the device number, or the device number combined with the filesystem type.  Several operating systems restrict giving out the f_fsid field to the superuser only (and zero it for unprivileged users), because this field is used in the filehandle of the filesystem  when  NFS-exported,       and giving it out is a security concern.</p>\n\n<p>Under some operating systems, the fsid can be used as the second argument to the sysfs(2) system call.</p>\n"}], "owner": {"reputation": 3661, "user_id": 1089715, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8f436794fc93079e12250b45e7eb78c1?s=128&d=identicon&r=PG", "display_name": "Vitalii", "link": "https://stackoverflow.com/users/1089715/vitalii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 1, "accepted_answer_id": 59181124, "answer_count": 1, "score": 1, "last_activity_date": 1575479033, "creation_date": 1575476985, "question_id": 59180592, "link": "https://stackoverflow.com/questions/59180592/more-explanation-on-statfs64", "title": "More explanation on `statfs64`", "body": "<p>According to documentation, the structure fields explanation follows:</p>\n\n<pre><code>struct statfs {\n__SWORD_TYPE f_type; /* type of file system (see below) */\n__SWORD_TYPE f_bsize; /* optimal transfer block size */\nfsblkcnt_t f_blocks; /* total data blocks in file system */\nfsblkcnt_t f_bfree; /* free blocks in fs */\nfsblkcnt_t f_bavail; /* free blocks available to\nunprivileged user */\nfsfilcnt_t f_files; /* total file nodes in file system */\nfsfilcnt_t f_ffree; /* free file nodes in fs */\nfsid_t f_fsid; /* file system id */\n__SWORD_TYPE f_namelen; /* maximum length of filenames */\n__SWORD_TYPE f_frsize; /* fragment size (since Linux 2.6) */\n__SWORD_TYPE f_spare[5];\n};\n</code></pre>\n\n<p>Does \"<strong>total file nodes in file system</strong>\" mean how much existing files we have? Does it include directories and links?</p>\n\n<p>What does mean \"<strong>free file nodes in fs</strong>\"?</p>\n\n<p>What is <strong>f_spare</strong>?</p>\n\n<p>In some Linux forks (for example, in Android) I see that <code>f_spare</code> size is 4, and additional field <code>f_flags</code> is defined. What flags are defined for <code>f_flags</code>?</p>\n\n<p>Is <code>f_fsid</code> just random number that uniquely identifies the file system, or what is it?</p>\n"}, {"tags": ["c++", "mutation-testing"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1575476558, "post_id": 59180429, "comment_id": 104581878, "body": "If <code>task_id</code> returns a <code>const char *</code>, this is technically valid, but pretty much nonsensical, C++. If <code>task_id</code> returns a <code>std::string</code>, one of the <code>&lt;</code> overloads compares to a <code>std::string</code>, and <code>std::string</code> can be implicitly constructed from a string literal, so that&#39;s what gets compiled."}], "answers": [{"comments": [{"owner": {"reputation": 2280, "user_id": 229058, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1556e6ebdef89457b4a34b9a1b426a2a?s=128&d=identicon&r=PG", "display_name": "Stephen Rasku", "link": "https://stackoverflow.com/users/229058/stephen-rasku"}, "edited": false, "score": 0, "creation_date": 1575478079, "post_id": 59180815, "comment_id": 104582753, "body": "A &quot;valid mutation&quot; would be a mutation that is actually testable.  Could I come up with a test that provides some value that <code>task_id()</code> returns that would pass the existing code but not the mutated code.  It sounds like no.  Thanks for your answer."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 2280, "user_id": 229058, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1556e6ebdef89457b4a34b9a1b426a2a?s=128&d=identicon&r=PG", "display_name": "Stephen Rasku", "link": "https://stackoverflow.com/users/229058/stephen-rasku"}, "edited": false, "score": 0, "creation_date": 1575478161, "post_id": 59180815, "comment_id": 104582811, "body": "@StephenRasku The result will be the same for any non-empty <code>task_id()</code>, because the conditional assuredly evaluates to <code>false</code> in both cases."}, {"owner": {"reputation": 2280, "user_id": 229058, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1556e6ebdef89457b4a34b9a1b426a2a?s=128&d=identicon&r=PG", "display_name": "Stephen Rasku", "link": "https://stackoverflow.com/users/229058/stephen-rasku"}, "edited": false, "score": 0, "creation_date": 1575478196, "post_id": 59180815, "comment_id": 104582833, "body": "That&#39;s what I thought.  Thanks for the clarification."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 2280, "user_id": 229058, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1556e6ebdef89457b4a34b9a1b426a2a?s=128&d=identicon&r=PG", "display_name": "Stephen Rasku", "link": "https://stackoverflow.com/users/229058/stephen-rasku"}, "edited": false, "score": 0, "creation_date": 1575478207, "post_id": 59180815, "comment_id": 104582846, "body": "However, the behaviour differs for empty <code>task_id()</code>."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 0, "last_activity_date": 1575477660, "creation_date": 1575477660, "answer_id": 59180815, "question_id": 59180429, "link": "https://stackoverflow.com/questions/59180429/mutation-survives-when-comparing-to-empty-string-in-c/59180815#59180815", "title": "Mutation Survives When Comparing to Empty String in C++?", "body": "<p><code>std::string</code> defines a lexicographic \"less-than\" relation, that can be accessed <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/operator_cmp\" rel=\"nofollow noreferrer\">using <code>operator&lt;</code></a>.</p>\n\n<p>The specific expression you've shown will always evaluate to <code>false</code>, because no string sorts (lexicographically) less-than the empty string. But that doesn't make the code invalid, merely pointless. I don't know what you mean by a \"valid mutation\" exactly, but hopefully that will point you to the answer.</p>\n"}], "owner": {"reputation": 2280, "user_id": 229058, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1556e6ebdef89457b4a34b9a1b426a2a?s=128&d=identicon&r=PG", "display_name": "Stephen Rasku", "link": "https://stackoverflow.com/users/229058/stephen-rasku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 59180815, "answer_count": 1, "score": 0, "last_activity_date": 1575477660, "creation_date": 1575476453, "last_edit_date": 1575477569, "question_id": 59180429, "link": "https://stackoverflow.com/questions/59180429/mutation-survives-when-comparing-to-empty-string-in-c", "title": "Mutation Survives When Comparing to Empty String in C++?", "body": "<p>I am mutating my code and it's complaining that the following mutation survived:</p>\n\n<pre><code>--- /home/user/src/file.cc 2019-12-03 13:48:12.510311\n+++ /home/user/src/file.cc 2019-12-03 14:00:14.164006\n@@ -283,7 +283,7 @@\n }\n\n bool SomeClass::isValid(proto::SomeProto const&amp; task_pb) const {\n-    if (task_pb.task_id() == \"\") {\n+    if (task_pb.task_id() &lt; \"\") {\n         log(LOG_WARNING, \"no id given\");\n         return false;\n     } else if (task_pb.task_type() == proto::TaskType::UNKNOWN) {\n</code></pre>\n\n<p>The declaration for <code>task_id()</code> is:</p>\n\n<pre><code>const ::std::string&amp; task_id() const;\n</code></pre>\n\n<p>Is there a <code>string</code> that can be less than <code>\"\"</code>?  Would this even be considered a valid mutation for <code>string</code>s?</p>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1575476769, "post_id": 59180353, "comment_id": 104582010, "body": "I wonder if UDL suffixes count as an identifiers."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1575477110, "post_id": 59180353, "comment_id": 104582212, "body": "FWIW your code should be in a namespace and if you follow that you are safe."}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575477309, "post_id": 59180353, "comment_id": 104582325, "body": "@NathanOliver-ReinstateMonica: How would I even use that literal then? Let&#39;s say I&#39;ve put, whatever, say... <code>_km</code> (for kilometers) it in the namespace <code>udl</code>. Then a literal for 5km looks like... <code>5udl::_km</code>?"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575477314, "post_id": 59180353, "comment_id": 104582328, "body": "@NathanOliver-ReinstateMonica That\u2019s what I thought \u2026 but that\u2019s not true, see my answer."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1575477372, "post_id": 59180353, "comment_id": 104582364, "body": "@Damon <code>using udl::operator &quot;&quot;_km</code>, or <code>using namespace udl</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1575477384, "post_id": 59180353, "comment_id": 104582373, "body": "@Damon That is what <code>using</code> statements are for.  In the scope where you need to use the literal, have a using statement that imports it."}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1575477788, "post_id": 59180353, "comment_id": 104582599, "body": "@KonradRudolph: Well, certainly, the rule exists for the same reason why other identifiers are reserved. And of course, from the implementor&#39;s point of view, it makes sense, too.  It&#39;s just that my personal point of view is a different one (user&#39;s point of view). From that POV it causes a major inconvenience with very little (in fact, zero) gains for features that don&#39;t exist or aren&#39;t implemented for years to go (and if they existed I&#39;d likely not use them anyway). But how I personally feel about it is probably irrelevant for the question whether it&#39;s legal per the standard."}], "answers": [{"comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1575477154, "post_id": 59180565, "comment_id": 104582235, "body": "Even with an exception won&#39;t an implementation defined <code>int _x(int);</code> (in global) cause a compilation error?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1575477208, "post_id": 59180565, "comment_id": 104582268, "body": "Potentially interesting further reading: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1882\" rel=\"nofollow noreferrer\">CWG 1882</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1575477226, "post_id": 59180565, "comment_id": 104582278, "body": "@RichardCritten What do you mean?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1575477691, "post_id": 59180565, "comment_id": 104582552, "body": "I understood: <i>&quot;...arguably should have an exemption...&quot;</i> to indicate that user defined operators of the form <code>_x</code> should be exempt from  <code>[lex.name]</code>.  If I have misunderstood then what follows next is <b>rubbish</b>.  If the implementation had already declared a function <code>int _x(int);</code> in global scope (reserved name so ok), then a user declared <code>long double operator &quot;&quot; _x(long double);</code> (for example) would get a compilation error."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1575477919, "post_id": 59180565, "comment_id": 104582666, "body": "I don&#39;t see how an exemption can cure this issue."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1575477923, "post_id": 59180565, "comment_id": 104582670, "body": "@RichardCritten Granted, I suppose any such exemption would have to be accompanied by changes in the lookup rules, lol"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1575477967, "post_id": 59180565, "comment_id": 104582697, "body": "Yup the nice <i>simple</i> lookup rules."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1575478044, "post_id": 59180565, "comment_id": 104582738, "body": "@RichardCritten Indeed. I have made an edit (attribution in rev history)"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 0, "last_activity_date": 1575478030, "last_edit_date": 1575478030, "creation_date": 1575476924, "answer_id": 59180565, "question_id": 59180353, "link": "https://stackoverflow.com/questions/59180353/is-every-normal-use-of-user-defined-literals-undefined-behavior/59180565#59180565", "title": "Is every &quot;normal&quot; use of user-defined literals undefined behavior?", "body": "<p>Given the literal with suffix <code>_X</code>, <a href=\"http://eel.is/c++draft/lex.ext#nt:ud-suffix\" rel=\"nofollow noreferrer\">the grammar calls <code>_X</code> an \"identifier\"</a>.</p>\n\n<p>So, yes: the standard has, presumably inadvertently, made it impossible to create a UDT at global scope, or UDTs that start with a capital letter, in a well-defined program. (Note that the former is not something you generally want to do anyway!)</p>\n\n<p>This cannot be resolved editorially: the names of user-defined literals would have to have their own lexical \"namespace\" that prevented clashes with (for example) names of implementation-provided functions. In my opinion, though, it would have been nice for there to be a non-normative note somewhere, pointing out the consequences of these rules and pointing out that they are deliberate.</p>\n"}, {"comments": [{"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "edited": false, "score": 0, "creation_date": 1575477949, "post_id": 59180594, "comment_id": 104582682, "body": "Good catch, I didn&#39;t even think about capital-letter SI units."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1575478405, "post_id": 59180594, "comment_id": 104582963, "body": "The standard contains an example that shows that <code>operator&quot;&quot;_Bq</code> is ok (which means <code>operator&quot;&quot;_K</code> is also ok). The trick is to omit the space between <code>&quot;&quot;</code> and the suffix. See C++17 [over.literal]/8."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1575478774, "post_id": 59180594, "comment_id": 104583201, "body": "@Brian I hate it when examples are the only source of normative wording. Great find. And the fact that they decided to make this whitespace significant is even more messed up. Either way, I\u2019ve fixed my answer."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1575479482, "post_id": 59180594, "comment_id": 104583607, "body": "It&#39;s not that the example is the only source. Rather, this follows from the fact that a <i>user-defined-string-literal</i> is a single preprocessing token. That being said, the example does clarify the intent, plus I never would have realized this if it weren&#39;t for the example."}, {"owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1591899005, "post_id": 59180594, "comment_id": 110237994, "body": "@Brian &quot;...  a <i>user-defined-string-literal</i> is a single preprocessing token&quot;. Could you clarify where can I find this in the Standard?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "edited": false, "score": 0, "creation_date": 1591908394, "post_id": 59180594, "comment_id": 110242349, "body": "@Belloc C++17 5.4 ([lex.pptoken])"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "edited": false, "score": 1, "creation_date": 1591984925, "post_id": 59180594, "comment_id": 110271725, "body": "@Belloc There are two grammar productions for <i>literal-operator-id</i>. Note that <code>&quot;&quot;_Bq2</code> is a <i>user-defined-string-literal</i>, a single preprocessing token. Whereas <code>&quot;&quot; _Bq2</code> is a <i>string-literal</i> followed by an <i>identifier</i>. Both are valid syntax. But in the latter case, a reserved identifier is present, which violates the rules on reserved names."}, {"owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1591984986, "post_id": 59180594, "comment_id": 110271759, "body": "@Brian I thought I had understood your <a href=\"https://stackoverflow.com/questions/59180353/is-every-normal-use-of-user-defined-literals-undefined-behavior/59181016#comment104583607_59180594\">comment above</a>, but I still have problems with the example in <a href=\"http://eel.is/c++draft/over.literal#8\" rel=\"nofollow noreferrer\">&#91;over.literal&#93;/8</a>. Please, see <a href=\"http://coliru.stacked-crooked.com/a/d58cd0baff1f2f51\" rel=\"nofollow noreferrer\">this snippet</a> in Coliru."}, {"owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1591986007, "post_id": 59180594, "comment_id": 110272227, "body": "@Brian Now I can see what you mean. That&#39;s really tricky. I suppose the rule being violated in my example is <a href=\"http://eel.is/c++draft/lex.name#3.1\" rel=\"nofollow noreferrer\">&#91;lex.name&#93;/(3.1)</a>. Is that correct?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "edited": false, "score": 0, "creation_date": 1591986072, "post_id": 59180594, "comment_id": 110272256, "body": "@Belloc Yes. It is very tricky and one would never guess this if it had not been an explicit example."}, {"owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1591986405, "post_id": 59180594, "comment_id": 110272377, "body": "@Brian Congratulations. I think I would never guess this myself even with the example. Thanks for the help."}], "tags": [], "owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "is_accepted": false, "score": 3, "last_activity_date": 1575478928, "last_edit_date": 1575478928, "creation_date": 1575476993, "answer_id": 59180594, "question_id": 59180353, "link": "https://stackoverflow.com/questions/59180353/is-every-normal-use-of-user-defined-literals-undefined-behavior/59180594#59180594", "title": "Is every &quot;normal&quot; use of user-defined literals undefined behavior?", "body": "<blockquote>\n  <p>Is every \u201cnormal\u201d use of user-defined literals undefined behavior?</p>\n</blockquote>\n\n<p>Clearly not.</p>\n\n<p>The following is the <em>idiomatic</em> (and thus definitely \u201cnormal\u201d) use of UDLs, and it\u2019s well-defined according to the rule you\u2019ve just listed:</p>\n\n<pre><code>namespace si {\n    struct metre {\u00a0\u2026 };\n\n    constexpr metre operator \"\"_m(long double value) { return metre{value}; }\n}\n</code></pre>\n\n<p>You\u2019ve listed problematic cases and I agree with your assessment about their validity but they\u2019re easily avoided in idiomatic C++ code so I don\u2019t entirely see the problem with the current wording, even if it was potentially accidental.</p>\n\n<p>According to the example in [over.literal]/8, we can even use capital letters after the underscore:</p>\n\n<blockquote>\n<pre><code>float operator \"\"E(const char*);    // error: reserved literal suffix (20.5.4.3.5, 5.13.8)\ndouble operator\"\"_Bq(long double);  // OK: does not use the reserved identifier _Bq (5.10)\ndouble operator\"\" _Bq(long double); // uses the reserved identifier _Bq (5.10)\n</code></pre>\n</blockquote>\n\n<p>The only problematic thing thus seems to be the fact that the standard makes the whitespace between <code>\"\"</code> and the UDL name significant.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1575477262, "creation_date": 1575477262, "answer_id": 59180682, "question_id": 59180353, "link": "https://stackoverflow.com/questions/59180353/is-every-normal-use-of-user-defined-literals-undefined-behavior/59180682#59180682", "title": "Is every &quot;normal&quot; use of user-defined literals undefined behavior?", "body": "<p>Yes, defining your own user defined literal in the global namespace results in an ill-formed program.</p>\n\n<p>I haven't run into this myself, because I try to follow the rule:</p>\n\n<p>Don't put anything (besides <code>main</code>, namespaces, and <code>extern \"C\"</code> stuff for ABI stability) in the global namespace.</p>\n\n<pre><code>namespace Mine {\n  struct meter { double value; };\n  inline namespace literals {\n    meter operator \"\"_m( double v ) { return {v}; }\n  }\n}\n\nint main() {\n  using namespace Mine::literals;\n  std::cout &lt;&lt; 15_m.value &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>This also means you cannot use <code>_CAPS</code> as your literal name, even in a namespace.</p>\n\n<p>Inline namespaces called <code>literals</code> is a great way to package up your user defined literal operators.  They can be imported where you want to use it without having to name exactly which literals you want, or if you import the entire namespace you also get the literals.</p>\n\n<p>This follows how the <code>std</code> library handles literals as well, so should be familiar to users of your code.</p>\n"}, {"comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1575478725, "post_id": 59180722, "comment_id": 104583169, "body": "Unfortunately this answer doesn\u2019t seem to address the validity of <code>_Foo</code> suffixes, which were omitted from the question but are rather problematic."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 6, "last_activity_date": 1575477342, "creation_date": 1575477342, "answer_id": 59180722, "question_id": 59180353, "link": "https://stackoverflow.com/questions/59180353/is-every-normal-use-of-user-defined-literals-undefined-behavior/59180722#59180722", "title": "Is every &quot;normal&quot; use of user-defined literals undefined behavior?", "body": "<p>Yes: the combination of forbidding the use of <code>_</code> as the start of a global identifier coupled with requiring non-standard UDLs to start with <code>_</code> means that you can't put them in the global namespace. But you shouldn't be dirtying up the global namespace with stuff, <em>especially</em> UDLs, so that shouldn't be much of a problem.</p>\n\n<p>The traditional idiom, as used by the standard, is to put UDLs in a <code>literals</code> namespace (and if you have different sets of UDLs, then you put them in different <code>inline namespaces</code> below that namespace). That <code>literals</code> namespace is typically underneath your main one. When you want to use a particular set of UDLs, you invoke <code>using namespace my_namespace::literals</code> or whichever sub-namespace contains your literal set of choice.</p>\n\n<p>This is important because UDLs tend to be <em>heavily</em> abbreviated. The standard for example uses <code>s</code> for <code>std::string</code>, but also for <code>std::chrono::duration</code> of seconds. While they do apply to different kinds of literals (<code>s</code> applied to a string is a string, while <code>s</code> applied to a number is a duration), it can sometimes be confusing to read code that uses abbreviated literals. So you shouldn't throw literals at all users of your library; they should opt-in to using them.</p>\n\n<p>By using different namespaces for these (<code>std::literals::string_literals</code> and <code>std::literals::chrono_literals</code>), the user can be up-front about which sets of literals they want in which parts of code.</p>\n"}, {"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1575479763, "post_id": 59181016, "comment_id": 104583745, "body": "I was going to go with a similar interpretation. Considering one can define a function like <code>void operator+(foo, bar)</code>, where clearly the function name is not an identifier, but it is a name. Same goes for <code>operator &quot;&quot; _foo</code> being the name in our case."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 5, "last_activity_date": 1575479537, "last_edit_date": 1575479537, "creation_date": 1575478273, "answer_id": 59181016, "question_id": 59180353, "link": "https://stackoverflow.com/questions/59180353/is-every-normal-use-of-user-defined-literals-undefined-behavior/59181016#59181016", "title": "Is every &quot;normal&quot; use of user-defined literals undefined behavior?", "body": "<p>This is a good question, and I'm not sure about the answer, but I think the answer is \"no, it's not UB\" based on a particular reading of the standard.</p>\n\n<p>[lex.name]/3.2 reads:</p>\n\n<blockquote>\n  <p>Each identifier that begins with an underscore is reserved to the implementation for use as a name in the global namespace.</p>\n</blockquote>\n\n<p>Now, clearly, the restriction \"as a name in the global namespace\" should be read as applying to the entire rule, not just to how the implementation may use the name. That is, its meaning is not</p>\n\n<p>\"each identifier that begins with an underscore is reserved to the implementation, AND the implementation may use such identifiers as names in the global namespace\"</p>\n\n<p>but rather,</p>\n\n<p>\"the use of any identifier that begins with an underscore as a name in the global namespace is reserved to the implementation\".</p>\n\n<p>(If we believed the first interpretation, then it would mean that no one could declare a function called <code>my_namespace::_foo</code>, for example.)</p>\n\n<p>Under the second interpretation, something like a global declaration of <code>operator\"\"_foo</code> (in the global scope) is legal, because such a declaration does not use <code>_foo</code> as a name. Rather, the identifier is just a part of the actual name, which is <code>operator\"\"_foo</code> (which does <em>not</em> start with an underscore).</p>\n"}], "owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "answer_count": 5, "score": 8, "last_activity_date": 1575479537, "creation_date": 1575476158, "question_id": 59180353, "link": "https://stackoverflow.com/questions/59180353/is-every-normal-use-of-user-defined-literals-undefined-behavior", "title": "Is every &quot;normal&quot; use of user-defined literals undefined behavior?", "body": "<p>User defined literals <em>must</em> start with an underscore.</p>\n\n<p>This is a more or less universally well-known rule that you can find on every layman-worded site talking about user literals. It is also a rule which I (and possibly others?) have been blatantly ignoring ever since on a \"what a bullshit\" base. Now of course, that's strictly not correct. In the strictest sense, this uses a reserved identifier, and thus invokes Undefined Behavior (although you don't get as much as a shrug from the compiler, practically).</p>\n\n<p>So, pondering whether I should continue to deliberately ignore that (in my opinion useless) part of the standard or not, I decided to look at what's actually written. Because, you know, what does it matter what <em>everybody knows</em>. What matters is what's written in the standard.</p>\n\n<p><code>[over.literal]</code> states that \"some\" literal suffix identifiers are reserved, linking to <code>[usrlit.suffix]</code>. The latter states that <strong>all</strong> are reserved, except those that start with an underscore. OK, so that's pretty much exactly what we already knew, explicitly written (or rather, written backwards).</p>\n\n<p>Also, <code>[over.literal]</code> contains a <em>Note</em> which hints to an obvious but troubling thing:</p>\n\n<blockquote>\n  <p>except for the constraints described above, they are ordinary namespace-scope functions and function templates</p>\n</blockquote>\n\n<p>Well, sure they are. Nowhere does it say that they aren't, so what else would you expect them to be.</p>\n\n<p>But wait a moment. <code>[lex.name]</code> explicitly states that each identifier that begins with an underscore <strong>in the global namespace</strong> is reserved.</p>\n\n<p>Now, a literal operator usually, unless you explicitly put it into a namespace (which, I believe nobody does!?) is very much in the global namespace. So, the name, which <em>must</em> begin with an underscore, is reserved. There is no mention of a special exception. So, every name (with underscore, or without) is a reserved name.</p>\n\n<p>Are you indeed expected to put user defined literals into a namespace because the \"normal\" usage (underscore or not) is using a reserved name?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575475641, "post_id": 59180183, "comment_id": 104581339, "body": "Basically you don&#39;t.  Template code needs to live in the header file."}, {"owner": {"reputation": 520, "user_id": 2851232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7767e5dadb31a9da170a4504af5b92a7?s=128&d=identicon&r=PG&f=1", "display_name": "Nujufas", "link": "https://stackoverflow.com/users/2851232/nujufas"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575475810, "post_id": 59180183, "comment_id": 104581447, "body": "I don&#39;t mind explicit instantiation - As mentioned in one of the answers specified in the original(not mine) question."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575475973, "post_id": 59180183, "comment_id": 104581550, "body": "Why would you want to do that?  It&#39;s a lot of work for basically zero gain."}, {"owner": {"reputation": 520, "user_id": 2851232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7767e5dadb31a9da170a4504af5b92a7?s=128&d=identicon&r=PG&f=1", "display_name": "Nujufas", "link": "https://stackoverflow.com/users/2851232/nujufas"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575476050, "post_id": 59180183, "comment_id": 104581594, "body": "I don&#39;t mind the extra work. If it can be done I need to know how it can be done"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1575476155, "post_id": 59180183, "comment_id": 104581661, "body": "<a href=\"https://stackoverflow.com/questions/45596922/explicit-instantiation-of-member-function-template-of-class-template\">This questions</a> shows you how you would have to explicitly instantiate the templates."}, {"owner": {"reputation": 520, "user_id": 2851232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7767e5dadb31a9da170a4504af5b92a7?s=128&d=identicon&r=PG&f=1", "display_name": "Nujufas", "link": "https://stackoverflow.com/users/2851232/nujufas"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575476308, "post_id": 59180183, "comment_id": 104581737, "body": "As you see its a question - and at the bottom it says &#39;but it doesn&#39;t work&#39;."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575476385, "post_id": 59180183, "comment_id": 104581788, "body": "Look at the <i>I need something like: &lt;code block&gt; which becomes a little verbose if I start having a lot of types of T and U</i> part.  The last bit is the shortcut the OP tried since it can get very verbose."}, {"owner": {"reputation": 520, "user_id": 2851232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7767e5dadb31a9da170a4504af5b92a7?s=128&d=identicon&r=PG&f=1", "display_name": "Nujufas", "link": "https://stackoverflow.com/users/2851232/nujufas"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575476513, "post_id": 59180183, "comment_id": 104581862, "body": "Thank You..............."}], "owner": {"reputation": 520, "user_id": 2851232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7767e5dadb31a9da170a4504af5b92a7?s=128&d=identicon&r=PG&f=1", "display_name": "Nujufas", "link": "https://stackoverflow.com/users/2851232/nujufas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575476276, "creation_date": 1575475586, "question_id": 59180183, "link": "https://stackoverflow.com/questions/59180183/how-to-define-a-template-function-of-a-template-class-outside-the-header", "title": "How to define a template function of a template class outside the header?", "body": "<p>I have the following code: </p>\n\n<p>test.h</p>\n\n<pre><code>struct A {void funA() { cout&lt;&lt;\"Hello\"; } };\n\ntemplate&lt;typename T&gt;\nstruct B: public T {\n  template&lt;typename X&gt;\n  void funB(X x) {\n    this-&gt;funA();\n    cout&lt;&lt;\" world, I'm \" &lt;&lt;typeid(x).name()&lt;&lt;\"\\n\";\n  }\n};\ntemplate class B&lt;A&gt;;\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>int main() {\n  B&lt;A&gt; o;      \n  o.funB('a');\n  o.funB(1);\n}\n</code></pre>\n\n<p>Yields:</p>\n\n<blockquote>\n  <p>Hello world, I'm c</p>\n  \n  <p>Hello world, I'm i</p>\n</blockquote>\n\n<p>No Problem!</p>\n\n<p>But I'm unable to move the definition of the function 'funB' to test.cpp.</p>\n\n<p>I tried the following and failed: </p>\n\n<p>test.h</p>\n\n<pre><code>...\n  template&lt;typename X&gt;\n  void funB(X x);\n...\n</code></pre>\n\n<p>test.cpp</p>\n\n<pre><code>...\ntemplate&lt;typename T&gt;\ntemplate&lt;typename X&gt;\nvoid B&lt;T&gt;::funB(X x) {\n  this-&gt;funA();\n  cout&lt;&lt;\" world, I'm \" &lt;&lt;typeid(x).name()&lt;&lt;\"\\n\";\n}\n...\n</code></pre>\n\n<p>Yields:</p>\n\n<blockquote>\n  <p>undefined reference to 'void B::funB(char)'</p>\n  \n  <p>undefined reference to 'void B::funB(int)'</p>\n</blockquote>\n"}, {"tags": ["c++", "wxwidgets"], "comments": [{"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1575478363, "post_id": 59180068, "comment_id": 104582940, "body": "Do you have access to git? Will you be able to ru <code>git bisect</code>?"}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1575479598, "post_id": 59180068, "comment_id": 104583660, "body": "also, did you try to debug it?"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 1182998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2da1e856b7993776f50f9ee1aea422b5?s=128&d=identicon&r=PG", "display_name": "gibbotronic", "link": "https://stackoverflow.com/users/1182998/gibbotronic"}, "edited": false, "score": 0, "creation_date": 1575483255, "post_id": 59182324, "comment_id": 104585571, "body": "Thanks for the speedy answer. I will grab the master from GitHub and use that, most likely. Thanks - thought I was going insane."}], "tags": [], "owner": {"reputation": 18238, "user_id": 15275, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WNTZ3.jpg?s=128&g=1", "display_name": "VZ.", "link": "https://stackoverflow.com/users/15275/vz"}, "is_accepted": true, "score": 1, "last_activity_date": 1575482981, "creation_date": 1575482981, "answer_id": 59182324, "question_id": 59180068, "link": "https://stackoverflow.com/questions/59180068/wxwidgets-mac-clipboard-on-3-1-3-broken/59182324#59182324", "title": "wxWidgets mac clipboard on 3.1.3 broken?", "body": "<p>Yes, unfortunately copying to clipboard got broken shortly before 3.1.3 release. It was fixed soon after it in <a href=\"https://github.com/wxWidgets/wxWidgets/commit/53c5ebedca8219fd2c6c7b505c49dfe202286f4c\" rel=\"nofollow noreferrer\">this commit</a> that you should be able to cherry-pick locally -- or you could just update to the latest master.</p>\n"}], "owner": {"reputation": 51, "user_id": 1182998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2da1e856b7993776f50f9ee1aea422b5?s=128&d=identicon&r=PG", "display_name": "gibbotronic", "link": "https://stackoverflow.com/users/1182998/gibbotronic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 59182324, "answer_count": 1, "score": 0, "last_activity_date": 1575482981, "creation_date": 1575475236, "question_id": 59180068, "link": "https://stackoverflow.com/questions/59180068/wxwidgets-mac-clipboard-on-3-1-3-broken", "title": "wxWidgets mac clipboard on 3.1.3 broken?", "body": "<p>I am not sure if I am doing something exceedingly stupid but my calls to the clipboard have ceased working since 3.1.3. I stepped into the code and it all works at the lower levels (wxClipboard::AddData returns true). This worked under 3.1.2, which I built on macOS 10.12.6 Sierra with the following configure:</p>\n\n<pre><code>configure --disable-shared --enable-unicode --prefix=\"$(pwd)\" --enable-ipc --enable-base64 --enable-exceptions --enable-fontenum --enable-fs_archive --enable-stdpaths --enable-sysoptions --enable-threads --enable-url --enable-aui  --enable-graphics_ctx  --enable-printarch --enable-timer --enable-ribbon --enable-webview --enable-display --enable-splash --enable-snglinst --enable-printfposparam --with-opengl --with-osx_cocoa --with-expat=builtin --with-cxx=11 --enable-cxx11 --enable-stl --enable-std_iostreams --enable-std_string --enable-ftp --enable-http --enable-fileproto --enable-sockets --enable-ipv6 --enable-dataobj --enable-ipc --enable-any --enable-arcstream --enable-backtrace --enable-cmdline --enable-datetime --enable-debugreport --enable-dynamicloader --enable-exceptions --enable-ffile --enable-file --enable-filehistory --enable-filesystem --enable-fontmap --enable-fs_inet --enable-fs_zip --enable-fsvolume --enable-fswatcher --enable-geometry --enable-sound --enable-stopwatch --enable-streams --enable-tarstream --enable-textbuf --enable-textfile --enable-variant --enable-zipstream --enable-protocol --enable-protocol-http --enable-protocol-ftp --enable-protocol-file --enable-html --enable-htmlhelp --enable-propgrid --enable-svg --enable-clipboard --enable-dnd --enable-accel --with-osx_cocoa  --disable-debug_flag --with-libpng=builtin --with-libjpeg=builtin --with-zlib=builtin\n</code></pre>\n\n<p>I know that the base SDK has moved from what it used to be (10.4?) to (10.9) and I do not explicitly specify it so I am going along with the defaults for 3.1.3.</p>\n\n<p>For wxWidgets 3.1.3 under the same system I built with the following configure options:</p>\n\n<pre><code>configure --disable-shared --enable-unicode --prefix=\"$(pwd)\" --enable-stc --enable-ipc --enable-base64 --enable-exceptions --enable-fontenum --enable-fs_archive --enable-stdpaths --enable-sysoptions --enable-threads --enable-url --enable-aui  --enable-graphics_ctx  --enable-printarch --enable-timer --enable-ribbon --enable-webview --enable-display --enable-splash --enable-snglinst --enable-printfposparam --with-opengl --with-osx_cocoa --with-expat=builtin --with-cxx=11 --enable-cxx11 --enable-stl --enable-std_iostreams --enable-std_string --enable-ftp --enable-http --enable-fileproto --enable-sockets --enable-ipv6 --enable-dataobj --enable-ipc --enable-any --enable-arcstream --enable-backtrace --enable-cmdline --enable-datetime --enable-debugreport --enable-dynamicloader --enable-exceptions --enable-ffile --enable-file --enable-filehistory --enable-filesystem --enable-fontmap --enable-fs_inet --enable-fs_zip --enable-fsvolume --enable-fswatcher --enable-geometry --enable-sound --enable-stopwatch --enable-streams --enable-tarstream --enable-textbuf --enable-textfile --enable-variant --enable-zipstream --enable-protocol --enable-protocol-http --enable-protocol-ftp --enable-protocol-file --enable-html --enable-htmlhelp --enable-propgrid --enable-svg --enable-clipboard --enable-dnd --enable-accel --with-osx_cocoa  --disable-debug_flag --with-libpng=builtin --with-libjpeg=builtin --with-zlib=builtin --with-libtiff=builtin\n</code></pre>\n\n<p>I have written a sample test application to test this and the clipboard seems defunct. If I use the clipboard sample the paste button is disabled.</p>\n\n<p>Here's a test application:</p>\n\n<pre><code>#include &lt;wx/wx.h&gt;\n#include &lt;wx/app.h&gt;\n#include &lt;wx/clipbrd.h&gt;\n\nclass MainFrame : public wxFrame\n{\nprotected:\n  wxStaticText* label;\npublic:\n  MainFrame( wxWindow* parent, wxWindowID id = wxID_ANY, const wxString&amp; title = wxEmptyString, const wxPoint&amp; pos = wxDefaultPosition, const wxSize&amp; size = wxSize( 500,300 ), long style = wxDEFAULT_FRAME_STYLE|wxTAB_TRAVERSAL )\n  : wxFrame(parent, id, title, pos, size, style)\n  {\n    this-&gt;SetSizeHints( wxDefaultSize, wxDefaultSize );\n    wxBoxSizer* bSizer1;\n    bSizer1 = new wxBoxSizer( wxVERTICAL );\n    label = new wxStaticText( this, wxID_ANY, wxT(\"&lt;pasted text should go here&gt;\"), wxDefaultPosition, wxDefaultSize, wxALIGN_LEFT|wxST_NO_AUTORESIZE );\n    label-&gt;Wrap( -1 );\n    bSizer1-&gt;Add( label, 1, wxALIGN_CENTER_HORIZONTAL|wxALL, 5 );\n    this-&gt;SetSizer( bSizer1 );\n    this-&gt;Layout();\n    this-&gt;Centre( wxBOTH );\n\n    if (wxTheClipboard-&gt;Open())\n    {\n      wxTheClipboard-&gt;SetData(new wxTextDataObject(\"Hello this is pasted text\"));\n      wxTheClipboard-&gt;Close();\n    }\n    if (wxTheClipboard-&gt;Open())\n    {\n      if (wxTheClipboard-&gt;IsSupported( wxDF_TEXT ))\n      {\n        wxTextDataObject data;\n        wxTheClipboard-&gt;GetData(data);\n        label-&gt;SetLabel(data.GetText());\n      }\n      wxTheClipboard-&gt;Close();\n    }\n  }\n  virtual ~MainFrame() { }\n};\n\nclass demoApp: public wxApp\n{\n  MainFrame *frame = nullptr;\npublic:\n  demoApp();\n  virtual ~demoApp() { }\n  virtual bool OnInit() override;\n};\n\nIMPLEMENT_APP(demoApp)\n//#include &lt;ApplicationServices/ApplicationServices.h&gt;\ndemoApp::demoApp()\n{\n  //ProcessSerialNumber PSN;\n  //GetCurrentProcess(&amp;PSN);\n  //TransformProcessType(&amp;PSN,kProcessTransformToForegroundApplication);\n}\nbool demoApp::OnInit()\n{\n  frame = new MainFrame(nullptr);\n  frame-&gt;Show();\n  SetTopWindow(frame);\n  SetExitOnFrameDelete(true);\n  return true;\n}\n</code></pre>\n\n<p>You can build that with something like</p>\n\n<pre><code>g++ clipboard.cpp -o clipboard -std=gnu++11 -I/DeveloperLibs/wxWidgets-3.1.3/build-debug/lib/wx/include/osx_cocoa-unicode-static-3.1/ -I/DeveloperLibs/wxWidgets-3.1.3/include -D_FILE_OFFSET_BITS=64 -DWXUSINGDLL -D__WXMAC__ -D__WXOSX__ -D__WXOSX_COCOA__ -D_DEBUG=1-stdlib=libc++ -L/DeveloperLibs/wxWidgets-3.1.3/build-debug/lib/ -framework IOKit -framework Carbon -framework Cocoa -framework AudioToolbox -framework System -lwx_baseu-3.1 -lwx_osx_cocoau_adv-3.1 -lwx_osx_cocoau_core-3.1 -liconv -lz -headerpad_max_install_names -lwxregexu-3.1 -lwx_osx_cocoau_qa-3.1 -framework Quartz -lwx_baseu_xml-3.1 -lwxjpeg-3.1 -lwxpng-3.1 -lwxzlib-3.1 -lwxexpat-3.1 -lwxtiff-3.1 -llzma\n</code></pre>\n\n<p>I can't see anything wrong with it at all??\nI should note that the same application fails to work under Mojave (with the binary from the Sierra system, or even with the binary built under Mojave using the wxWidgets on my Mojave system).</p>\n"}, {"tags": ["c++", "variadic-templates", "template-meta-programming", "generic-programming", "typetraits"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1575475402, "post_id": 59180043, "comment_id": 104581195, "body": "AFAIK there is no generic solution for this.  We either need reflection or some new type of template syntax that allows the parameter to be a type or non type parameter."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1575475418, "post_id": 59180043, "comment_id": 104581204, "body": "This is indeed a limitation that the language currently does not have a work-around for. At least AFAIK. At the same time, mixing typed and untyped template parameters are fairly rare. Your version with <code>auto...</code> will work in most cases."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 2, "creation_date": 1575475491, "post_id": 59180043, "comment_id": 104581246, "body": "@super I&#39;m not sure I would call it rare.  <code>std::array</code> is a major use case and there are plenty of classes out there like it for matrices and things of the like."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1575475618, "post_id": 59180043, "comment_id": 104581319, "body": "@NathanOliver-ReinstateMonica And <code>std::array</code> styled things will work with the double-pack solution given here. It&#39;s not rare to mix, it rare to mix in the form of <code>non-type, type, non-type</code>, where as <code>types.., non-types...</code> is fairly common."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1575475795, "post_id": 59180043, "comment_id": 104581437, "body": "@super Ah.  Yeah, I have not seen anyone doing that."}, {"owner": {"reputation": 1291, "user_id": 8658157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DwurD.png?s=128&g=1", "display_name": "Elliott", "link": "https://stackoverflow.com/users/8658157/elliott"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1575478663, "post_id": 59180043, "comment_id": 104583139, "body": "@super How would you handle the case of <code>types..., non-types...</code>? When I try to do that I always get errors. It\u2019s not as generic as original question, but an answer to it would make my solution much better than what I have now..."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1575481898, "post_id": 59180043, "comment_id": 104584846, "body": "@ElliottSmith I don&#39;t think even that can be done in a generic way. You would have to add specialization for <code>type, non-types...</code>, <code>type, type, non-types...</code> ect. Not very clean code, but once you stuff it away in your header you hpefully don&#39;t have to look at it very often. :-)"}, {"owner": {"reputation": 1291, "user_id": 8658157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DwurD.png?s=128&g=1", "display_name": "Elliott", "link": "https://stackoverflow.com/users/8658157/elliott"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1575483211, "post_id": 59180043, "comment_id": 104585545, "body": "@super Yes, but currently I can\u2019t even handle the cases we\u2019re they\u2019re nicely separated, like <code>type, type, non-type, non-type</code>. Putting any variadic template arguments in any spot other than the end gives me errors..."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 2, "creation_date": 1575484001, "post_id": 59180043, "comment_id": 104585915, "body": "@ElliottSmith Yes, that&#39;s what I mean when I say you need to add specializations. The <code>non-type</code> can be a pack, but the leading types would need one specialization each. <code>type, non-types...</code> and <code>type, type, non-type...</code> would be 2 specialization. If you add 10 you should have the behaviour you want with some arguably ugly code."}, {"owner": {"reputation": 1291, "user_id": 8658157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DwurD.png?s=128&g=1", "display_name": "Elliott", "link": "https://stackoverflow.com/users/8658157/elliott"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1575484446, "post_id": 59180043, "comment_id": 104586110, "body": "@super Okay, Thanks for your help. It sounds like it\u2019s not worth adding more specialisations without a specific need. It\u2019s a shame to not have this functionality for library implementations..."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 3, "creation_date": 1575603028, "post_id": 59180043, "comment_id": 104630491, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/29342064/unify-type-and-non-type-template-parameters\">Unify type and non-type template parameters</a>"}, {"owner": {"reputation": 1291, "user_id": 8658157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DwurD.png?s=128&g=1", "display_name": "Elliott", "link": "https://stackoverflow.com/users/8658157/elliott"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577115825, "post_id": 59180043, "comment_id": 105097009, "body": "@DavisHerring, Actually that question seems to combine my problem with the problem of passing incomplete data types as arguments, meaning each separate struct that handles the problem needs its own type/non-type permutation <i>before</i> specialization - hence that appears to be a much harder problem. Also the accepted answer is to the problem hasn&#39;t solved the questioner&#39;s original problem, nor has it solved mine. Also if they used my code they code solve it more neatly anyway, because I&#39;m able to take advantage of c++17. What I&#39;d like to know is if it&#39;s possible with modern c++..."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577116132, "post_id": 59180043, "comment_id": 105097143, "body": "@Elliott-ReinstateMonica: When your question is \u201cIs it possible to\u2026?\u201d, an answer that shows as close as you can get is an answer.  There may well be a better duplicate that uses (and shows the limitations of) <code>auto</code> template parameters."}], "owner": {"reputation": 1291, "user_id": 8658157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DwurD.png?s=128&g=1", "display_name": "Elliott", "link": "https://stackoverflow.com/users/8658157/elliott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 1, "answer_count": 0, "score": 9, "last_activity_date": 1577104138, "creation_date": 1575475165, "last_edit_date": 1577104138, "question_id": 59180043, "link": "https://stackoverflow.com/questions/59180043/handle-variadic-templates-for-general-case-mixed-types-and-non-types", "title": "Handle variadic templates for general-case mixed types and non-types", "body": "<p>So I'm trying to make a type trait that says whether two \"outer\" class types are the same.</p>\n\n<p>ie. <code>std::vector&lt;int&gt;</code> is the same as <code>std::vector&lt;double&gt;</code>, I don't care about any inner arguments for my type trait.</p>\n\n<p>A problem that I had with trying to make a generic type trait for this is that I only know how to handle the <em>typed</em> variadic templates <strong>separately</strong> to the <em>non-typed</em> ones, which appears to stop me from making it generic.</p>\n\n<p>Is it possible to handle any permutation of typed and non-typed template arguments?</p>\n\n<p>Here's what I've implemented (including an example of where it fails):</p>\n\n<pre><code>// g++ -std=c++17\n\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;array&gt;\n#include &lt;type_traits&gt;\n\n// If the outer types don't match\ntemplate &lt;typename, typename&gt;\nstruct is_outer_type_same : std::false_type {};\n\n\n// if the arguments of the compared Type contains only types\n// ie. std::vector&lt;int,std::allocator&lt;int&gt;&gt;\n// (the inner arguments are also types)\n\ntemplate &lt;template&lt;typename...&gt; typename OuterType,\n                   typename... InnerTypes1,\n                   typename... InnerTypes2\n         &gt;\nstruct is_outer_type_same &lt; OuterType&lt;InnerTypes1...&gt;,\n                            OuterType&lt;InnerTypes2...&gt;\n                          &gt;\n        : std::true_type {};\n\n\n// if the arguments of the compared Type contains only non-types\n// eg. SomeClassName&lt;4,5,2&gt;\n\ntemplate &lt;template&lt;auto...&gt; typename OuterType,\n                   auto... InnerVariables1,\n                   auto... InnerVariables2\n         &gt;\nstruct is_outer_type_same &lt; OuterType&lt;InnerVariables1...&gt;,\n                            OuterType&lt;InnerVariables2...&gt;\n                          &gt;\n        : std::true_type {};\n\n\n// if the arguments of the compared Type contains a single\n// typed-argument followed by some non-typed arguments\n// ie. std::array&lt;int, 4&gt;\n\ntemplate &lt;template&lt;typename, auto...&gt; typename OuterType,\n        typename InnerType1, auto... InnerVariables1,\n        typename InnerType2, auto... InnerVariables2\n         &gt;\nstruct is_outer_type_same &lt; OuterType&lt;InnerType1, InnerVariables1...&gt;,\n                            OuterType&lt;InnerType2, InnerVariables2...&gt;\n                          &gt;\n        : std::true_type {};\n\n\n// For any outer types whose arguments have the pattern:\n// single variable argument followed by a sequence of typed arguments:\n\ntemplate &lt;template&lt;auto, typename...&gt; typename OuterType,\n    auto InnerVariable1, typename... InnerTypes1,\n    auto InnerVariable2, typename... InnerTypes2\n         &gt;\nstruct is_outer_type_same &lt; OuterType&lt;InnerVariable1, InnerTypes1...&gt;, \n                            OuterType&lt;InnerVariable2, InnerTypes2...&gt;\n                          &gt;\n        : std::true_type {};\n\n\n// This is to make it neater to evaluate:\n\ntemplate &lt;typename S, typename T&gt;\ninline constexpr bool is_outer_type_same_v\n                    = is_outer_type_same&lt;S,T&gt;::value;\n\n\n// Example type that fails to be handled\n// correctly by the above struct templates: \ntemplate &lt;typename A, typename B, int C&gt;\nstruct ExampleType\n{\n    A data1;\n    B data2;\n    const int data3 = C;\n};\n\n\nint main ()\n{   \n    // Examples to show where it fails:\n\n    std::cout &lt;&lt; \"Fails to find match for ExampleType: \"\n\n    &lt;&lt; is_outer_type_same_v&lt;ExampleType&lt;double,int,2&gt;,\n                            ExampleType&lt;double,int,2&gt;&gt;\n\n    &lt;&lt; std::endl &lt;&lt; std::endl\n\n\n\n    // Examples to show where it works:\n\n    &lt;&lt; \"Finds correctly: \" &lt;&lt; std::endl\n\n\n    &lt;&lt; std::endl &lt;&lt; \"Matches for std::vector: \"\n\n    &lt;&lt; is_outer_type_same_v&lt;std::vector&lt;int&gt;,\n                            std::vector&lt;double&gt;&gt;\n\n    &lt;&lt; is_outer_type_same_v&lt;std::vector&lt;std::vector&lt;int&gt;&gt;,\n                            std::vector&lt;double&gt;&gt;\n\n    &lt;&lt; is_outer_type_same_v&lt;std::vector&lt;std::array&lt;int,3&gt;&gt;,\n                            std::vector&lt;double&gt;&gt;\n\n\n    &lt;&lt; std::endl &lt;&lt; \"Mismatches for std::vector: \"\n\n    &lt;&lt; is_outer_type_same_v&lt;int,\n                            std::vector&lt;int&gt;&gt;\n\n    &lt;&lt; is_outer_type_same_v&lt;std::array&lt;int, 3&gt;,\n                            std::vector&lt;int&gt;&gt;\n\n    &lt;&lt; is_outer_type_same_v&lt;std::array&lt;std::vector&lt;int&gt;, 3&gt;,\n                            std::vector&lt;int&gt;&gt;\n\n\n    &lt;&lt; std::endl &lt;&lt; \"Matches for std::array: \"\n\n    &lt;&lt; is_outer_type_same_v&lt;std::array&lt;int, 3&gt;,\n                            std::array&lt;double, 7&gt;&gt;\n\n    &lt;&lt; is_outer_type_same_v&lt;std::array&lt;std::vector&lt;int&gt;, 7&gt;,\n                            std::array&lt;double, 2&gt;&gt;\n\n    &lt;&lt; is_outer_type_same_v&lt;std::array&lt;std::array&lt;int,3&gt;, 8&gt;,\n                            std::array&lt;std::vector&lt;double&gt;, 5&gt;&gt;\n\n\n    &lt;&lt; std::endl &lt;&lt; \"Mismatches for std::array: \"\n\n    &lt;&lt; is_outer_type_same_v&lt;int,\n                            std::array&lt;int,2&gt;&gt;\n\n    &lt;&lt; is_outer_type_same_v&lt;std::vector&lt;int&gt;,\n                            std::array&lt;int,8&gt;&gt;\n\n    &lt;&lt; is_outer_type_same_v&lt;std::vector&lt;std::array&lt;int,3&gt;&gt;,\n                            std::array&lt;int,2&gt;&gt;\n\n    &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 2, "creation_date": 1575477240, "post_id": 59179940, "comment_id": 104582288, "body": "provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 1, "creation_date": 1575479412, "post_id": 59179940, "comment_id": 104583565, "body": "Does your <code>Settings</code> type have the <a href=\"https://doc.qt.io/qt-5/qt.html#WidgetAttribute-enum\" rel=\"nofollow noreferrer\"><code>Qt::WA_DeleteOnClose</code></a> attribute set?"}, {"owner": {"reputation": 179, "user_id": 717599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9155f436265f2c7f84a670b23c3f9bf2?s=128&d=identicon&r=PG", "display_name": "bialy", "link": "https://stackoverflow.com/users/717599/bialy"}, "edited": false, "score": 1, "creation_date": 1575487802, "post_id": 59179940, "comment_id": 104587388, "body": "Look here: <a href=\"https://github.com/bialasjaroslaw/event_handlers\" rel=\"nofollow noreferrer\">github.com/bialasjaroslaw/event_handlers</a> If you click button and open second window both Events are handled, because object of class Patients is created. If you do not click within 5 second (event is timeout from QTimer), Patients object will not be created, though never connected to event signal. Basically there is no object of class Patients connected to QTimer::timeout, so nothings except Settings::eventHandler is fired. In your first example both objects are created just at the begining, so there are connected from the start."}], "answers": [{"comments": [{"owner": {"reputation": 335, "user_id": 4677268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a076324dbf9683fe9945f34eba39fed6?s=128&d=identicon&r=PG&f=1", "display_name": "vtc", "link": "https://stackoverflow.com/users/4677268/vtc"}, "edited": false, "score": 0, "creation_date": 1575540896, "post_id": 59189262, "comment_id": 104604250, "body": "Thanks for your input.  <code>this-&gt;setWindowFlag(Qt::WA_QuitOnClose, false);</code>  throws an erros saying  <code>error: cannot initialize a parameter of type &#39;Qt::WindowType&#39; with an rvalue of type &#39;Qt::WidgetAttribute&#39; qwidget.h:569:38: note: passing argument to parameter here</code>"}], "tags": [], "owner": {"reputation": 2125, "user_id": 11497022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YGeg.jpg?s=128&g=1", "display_name": "Soheil Armin", "link": "https://stackoverflow.com/users/11497022/soheil-armin"}, "is_accepted": false, "score": 3, "last_activity_date": 1575561601, "last_edit_date": 1575561601, "creation_date": 1575526410, "answer_id": 59189262, "question_id": 59179940, "link": "https://stackoverflow.com/questions/59179940/connecting-to-a-same-signal-in-two-windows/59189262#59189262", "title": "Connecting to a same signal in two windows", "body": "<p>As per Qt documentation for <a href=\"https://doc.qt.io/qt-5/qwidget.html#close\" rel=\"nofollow noreferrer\"><code>QWidget::close()</code></a>, which <a href=\"https://doc.qt.io/qt-5/qmainwindow.html\" rel=\"nofollow noreferrer\"><code>QMainWindow</code></a> is being inherited from:</p>\n\n<blockquote>\n  <p>The <code>QApplication::lastWindowClosed()</code> signal is emitted when the last\n  visible primary window (i.e. window with no parent) with the\n  <strong><code>Qt::WA_QuitOnClose</code> attribute</strong> set is closed. <strong><em>By default this attribute\n  is set for all widgets except transient windows</em></strong> such as splash\n  screens, tool windows, and popup menus.</p>\n</blockquote>\n\n<p>So, in the second scenario, when you set the parent of <code>Patients</code> to a <code>Settings</code> instance, you should expect an undefined behavior like this. Because by calling <code>Settings::close()</code> should delete <code>Settings</code> and quit the application when the call returns to the event loop. You can explicitly change it by :</p>\n\n<pre><code>Settings::Settings( QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::Settings)\n{\n    ui-&gt;setupUi(this);\n    this-&gt;setAttribute(Qt::WA_QuitOnClose, false);\n    connect(&amp;api, &amp;tetra_grip_api::tetraGripEvent,this, &amp;Settings::eventHandler);\n...\n}\n</code></pre>\n\n<p>You can also reparent both windows to another window.</p>\n"}], "owner": {"reputation": 335, "user_id": 4677268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a076324dbf9683fe9945f34eba39fed6?s=128&d=identicon&r=PG&f=1", "display_name": "vtc", "link": "https://stackoverflow.com/users/4677268/vtc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575634444, "creation_date": 1575474894, "last_edit_date": 1575634444, "question_id": 59179940, "link": "https://stackoverflow.com/questions/59179940/connecting-to-a-same-signal-in-two-windows", "title": "Connecting to a same signal in two windows", "body": "<p>Can you think of a reason why this second scenario not working?</p>\n\n<p>I have signal connection in two windows , <code>Settings</code> and <code>Patients</code></p>\n\n<p>In <code>Settings</code>:</p>\n\n<pre><code>Settings::Settings( QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::Settings)\n{\n    ui-&gt;setupUi(this);\n\nconnect(&amp;api, &amp;tetra_grip_api::tetraGripEvent,this, &amp;Settings::eventHandler);\n...\n}\n\n</code></pre>\n\n<p><code>api</code> is global instance of a class.</p>\n\n<p>And in <code>Patients</code>:</p>\n\n<pre><code>Patients::Patients( QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::Patients)\n{\n    ui-&gt;setupUi(this);\n\nconnect(&amp;api, &amp;tetra_grip_api::tetraGripEvent,this, &amp;Patients::eventHandlerTwo);\n\n}\n</code></pre>\n\n<p><strong>Situation1 - Working</strong></p>\n\n<p>I construct both <code>Settings</code> and <code>Patients</code> window from <code>Main</code></p>\n\n<pre><code>#include &lt;QApplication&gt;\n\ntetra_grip_api api;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n\n    api.openSerialPort();\n    QObject::connect(api.serial, SIGNAL(readyRead()), &amp;api, SLOT(readData()));\n\n\n    Settings  w(nullptr); //----&gt;this behaves right\n    Patients  v(nullptr); //---- &gt;this behaves right\n\n    v.show();\n    w.show();\n\n    return a.exec();\n}\n</code></pre>\n\n<p>By working I mean , both the slots are being called , and <code>QLabel</code> set text accordingly</p>\n\n<p><strong>Situation 2 - Not working</strong></p>\n\n<p>I call <code>Patients</code> from <code>Settings</code>:</p>\n\n<pre><code>void Settings::on_pushButton_patients_clicked()\n{\n    this-&gt;close();\n    stagetwo = new Patients(this);\n    stagetwo -&gt; show();\n}\n</code></pre>\n\n<p>where <code>stagetwo</code> is public</p>\n\n<pre><code>public:\n     Settings(QString,QWidget *parent = nullptr);\n    ~Settings();\n     Patients *stagetwo;\n</code></pre>\n\n<p>Here <code>Settings</code> works just fine (slot being called) but <code>Patients::eventhandlerTwo</code> is not being called at all.</p>\n\n<p><strong>EDIT (Found the bug)</strong></p>\n\n<p>It's bit late to understand that I need to call a method in the API (<code>battery_percentage</code>) to emit signal <code>tetraGripEvent</code> ( <code>bettery_percentage</code> will contact \"battery register\" in the device and this will force API to emit signal)</p>\n\n<p>basically I need to do this on both <code>Settings</code> and <code>Patients</code></p>\n\n<pre><code>#include \"settings.h\"\n#include \"ui_settings.h\"\n\n Settings ::   Settings (QWidget *parent) : QMainWindow(parent)\nQMainWindow(parent)\n    , ui(new Ui::Settings )\n{\n    ui-&gt;setupUi(this);\n\n    connect(&amp;api, &amp;tetra_grip_api::tetraGripEvent,this, &amp;Settings::eventHandler);\n...\n  tetra_grip_api::battery_percentage(); ------&gt; calling this only emit the signal\n\n}\n</code></pre>\n\n<p>and in <code>Patients</code></p>\n\n<pre><code>#include \"patients.h\"\n#include \"ui_patients.h\"\n\nPatients::Patients(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::Patients)\n{\n    ui-&gt;setupUi(this);\n\n\n  connect(&amp;api, &amp;tetra_grip_api::tetraGripEvent,this, &amp;Patients::eventHandlerTwo);\n...\n  tetra_grip_api::battery_percentage(); \n\n}\n\n</code></pre>\n"}, {"tags": ["c++", "class", "forward-declaration", "scopes"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1575476213, "post_id": 59179799, "comment_id": 104581682, "body": "Unrelated: The block of <code>#define</code>s in the header looks a lot like you should consider making it an <a href=\"https://en.cppreference.com/w/cpp/language/enum\" rel=\"nofollow noreferrer\"><code>enum</code></a>"}, {"owner": {"reputation": 13, "user_id": 8963657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9807795c16cd2616d1e9da2e1a462a6?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Castles", "link": "https://stackoverflow.com/users/8963657/antonio-castles"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1575972190, "post_id": 59179799, "comment_id": 104737220, "body": "@user4581301 Thanks a lot for the suggestion. Can you explain to me why <code>enum</code> is better than <code>#define</code> in this case?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1576000596, "post_id": 59179799, "comment_id": 104752981, "body": "<code>#define</code> is a simple text substitution that happens before just about everything else. There are no sanity checks or smarter logic applied to the substitution. Anywhere <code>startStop</code> is found in the code it is replaced by <code>2</code>, no matter how stupid or insane the substitution is.If you accidentally reuse <code>startStop</code>, for example a function <code>void startStop()</code>, the results can be truly bizarre, the function earlier is seen by the compiler as <code>void 2()</code>, and the error messages are almost always misleading. <code>enum</code> is processed during compilation and gets checked more thoroughly before it is used."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8963657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9807795c16cd2616d1e9da2e1a462a6?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Castles", "link": "https://stackoverflow.com/users/8963657/antonio-castles"}, "edited": false, "score": 0, "creation_date": 1575541340, "post_id": 59180048, "comment_id": 104604480, "body": "Thanks a lot for your answer, I&#39;ll try it as soon as possible. So, if I understand correctly, the member <code>setTargetRel</code> can be called with <code>Stepper::setTargetRel()</code> without creating a <code>Stepper</code>object?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 13, "user_id": 8963657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9807795c16cd2616d1e9da2e1a462a6?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Castles", "link": "https://stackoverflow.com/users/8963657/antonio-castles"}, "edited": false, "score": 0, "creation_date": 1575541413, "post_id": 59180048, "comment_id": 104604515, "body": "@AntonioCastles I dont know. If it is a static method then yes"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 0, "last_activity_date": 1575475180, "creation_date": 1575475180, "answer_id": 59180048, "question_id": 59179799, "link": "https://stackoverflow.com/questions/59179799/declaration-of-global-members-inside-a-class-in-c/59180048#59180048", "title": "Declaration of global members inside a class in c++", "body": "<p>Your premise is broken:</p>\n\n<blockquote>\n  <p>These two objects have to be declared globally, since they have static members.</p>\n</blockquote>\n\n<p>No. When a class has static members you actually do not need any object to access those members.</p>\n\n<p>It is not clear where you have <code>Stepper</code> declared, but it seems you are missing the <code>#include</code> when you are trying to access its members. If <code>setTargetRel()</code> is a <code>static</code> method of <code>Stepper</code> then you call it eg like this:</p>\n\n<pre><code> Stepper::setTargetRel(1024);\n</code></pre>\n\n<p>If <code>setTargetRel</code> is not a static method, then you'll need an instance to call it. Still you shouldn't make this instance a global variable, but either make it a member of <code>Example</code> or pass it as parameter to <code>Example::moveMotor</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 0, "last_activity_date": 1575475842, "creation_date": 1575475842, "answer_id": 59180261, "question_id": 59179799, "link": "https://stackoverflow.com/questions/59179799/declaration-of-global-members-inside-a-class-in-c/59180261#59180261", "title": "Declaration of global members inside a class in c++", "body": "<p>Add to <code>example.h</code>:<br>\n<code>extern Stepper motor;</code></p>\n\n<p>Add to <code>example.cpp</code>:<br>\n<code>Stepper motor(stepPin, dirPin);</code></p>\n\n<pre><code>void Example::moveMotor() {\n    motor.setTargetRel(1024); // remove :: before motor\n</code></pre>\n\n<p>Remove from <code>main.cpp</code>:<br>\n<code>Stepper motor(stepPin, dirPin);</code></p>\n\n<p>This should allow all files including <code>example.h</code> to use the global variable <code>motor</code> - but there's something wrong with the overall design.</p>\n\n<p>If <code>Example</code> is responsible for setting the target and initializing the movement, why doesn't it own both the <code>Stepper</code> and <code>StepControl</code> instances and provide convenience functions to keep the actions together? Example:</p>\n\n<pre><code>class Example {\npublic:\n  Example() : \n    motor(stepPin, dirPin),\n    controller{}\n  {}  \n\n  void moveMotor(int target=1024) {\n    motor.setTargetRel(target);\n    controller.move(motor);\n  }\n\nprivate:\n  Stepper motor;\n  StepControl controller;\n};\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8963657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9807795c16cd2616d1e9da2e1a462a6?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Castles", "link": "https://stackoverflow.com/users/8963657/antonio-castles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575475842, "creation_date": 1575474455, "question_id": 59179799, "link": "https://stackoverflow.com/questions/59179799/declaration-of-global-members-inside-a-class-in-c", "title": "Declaration of global members inside a class in c++", "body": "<p>I am trying to program a microcontroller to move a motor and perform other functions with an encoder and some potentiometers. I want to use a library that sends pulses to the motor driver via a pulse width modulation signal, but as far as I understand the classes of this library rely on static variables, which I don't know how to access from my own class. This is a simplification of my header:</p>\n\n<pre><code>#include &lt;Arduino.h&gt;\n#include &lt;Teensystep.h&gt;\n#define startStop               2\n#define stepPin                 3\n#define dirPin                  4\n#define channelA                5\n#define channelB                6\n#define enabPin                 7\n#define dirSwitch               8\n#define soundTrig               9\n#define chipSelect              10\n#define mosiSdi                 11\n#define misoSdo                 12\n#define clk                     13\n\n#define led                     A3\n#define potSpeed                A4\n#define encoButton              A5\n#define sensor                  A7\n\nclass Example{\n\npublic:  \n\n        void moveMotor();\n\n};\n\n</code></pre>\n\n<p>This would be my example.cpp, where I use motor and controller, which are global objects:</p>\n\n<pre><code>\n#include &lt;example.h&gt;\n\nvoid Example::moveMotor(){\n\n    ::motor.setTargetRel(1024);\n    ::controller.move(::motor);\n}\n\n</code></pre>\n\n<p>And here is my main.cpp file:</p>\n\n<pre><code>#include &lt;example.h&gt;\n\n  Stepper motor(stepPin, dirPin);\n  StepControl controller;\n  Example exampleObject();\n\nvoid setup(){\n\n  pinMode(enabPin, OUTPUT);\n  pinMode(stepPin, OUTPUT);\n  pinMode(chipSelect, OUTPUT);\n  pinMode(dirPin, OUTPUT);\n  pinMode(sensor, INPUT_PULLUP);\n  pinMode(led, OUTPUT);\n  pinMode(channelA, INPUT);\n  pinMode(channelB, INPUT);\n  pinMode(startStop, OUTPUT);\n  pinMode(dirSwitch, OUTPUT);\n  pinMode(encoButton, INPUT);\n\n};\n\nvoid loop(){\n   exampleObject.moveMotor();\n};\n\n</code></pre>\n\n<p>I know I'm doing something wrong but I don't know where to look for a solution, any help is welcome. Thanks.</p>\n\n<p>In the files presented above, I am creating a class called <code>Example</code>, which has only one function that depends on two objects, <code>Stepper</code> and <code>StepControl</code>. These two objects have to be declared globally, since they have static members. For that reason I am writing the function of my class calling global objects:</p>\n\n<pre><code>\n#include &lt;example.h&gt;\n\nvoid Example::moveMotor(){\n\n    ::motor.setTargetRel(1024);\n    ::controller.move(::motor);\n}\n\n</code></pre>\n\n<p>However, when I compile the program the compiler tells me that </p>\n\n<pre><code>'motor' has not been declared. The global scope has no 'motor'\n</code></pre>\n\n<p>How can I make a member of a class a global object?</p>\n\n<p>I am writing the program on Visual Code for linux with an extension for physical computing called platformIO and the library that I'm using is called <a href=\"https://github.com/luni64/TeensyStep\" rel=\"nofollow noreferrer\">TeensyStep</a>.</p>\n"}, {"tags": ["c++", "c", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 2, "creation_date": 1575474780, "post_id": 59179672, "comment_id": 104580804, "body": "Well, you have 3 <b>separate problems</b>: 1. Extract parameters passed to <code>cmake</code>. 2. Combine that parameters into the string like <code>OPT1=ON OPT3=ON</code>. 3. Pass resulted string to the C program as a macro. Which problem you have already solved and which you cannot?"}, {"owner": {"reputation": 611, "user_id": 8622794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0b975deef3e80e5fd9ce63f1f1ef91f?s=128&d=identicon&r=PG&f=1", "display_name": "trozen", "link": "https://stackoverflow.com/users/8622794/trozen"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1575475548, "post_id": 59179672, "comment_id": 104581278, "body": "@Tsyvarev None yet, I was hoping someone already had the same requirements ;-) Your right though, this can be broken down into smaller steps - number 2 and 3 seem to be quite straightforward. However I didn&#39;t find a way to list all CMake options so far..."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1575476867, "post_id": 59179672, "comment_id": 104582089, "body": "&quot;I didn&#39;t find a way to list all CMake options so far.&quot; - It seems there is not easy way for doing this. See e.g. <a href=\"https://stackoverflow.com/questions/10205986/how-to-capture-cmake-command-line-arguments\">this question</a> or <a href=\"https://stackoverflow.com/questions/30870975/cmake-get-the-used-commandline-flags-d\">that one</a>."}], "answers": [{"tags": [], "owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "is_accepted": false, "score": 1, "last_activity_date": 1575476563, "creation_date": 1575476563, "answer_id": 59180451, "question_id": 59179672, "link": "https://stackoverflow.com/questions/59179672/get-cmake-options-from-program/59180451#59180451", "title": "Get cmake options from program", "body": "<p>I don't know if it is possible to find out if an option has been specified explicitly or not.</p>\n\n<p>The proposed solution will show all option values as specified in a CMake string variable. It consists of 3 steps:</p>\n\n<ul>\n<li>Combine the option values to a string in <code>CMakeLists.txt</code></li>\n<li>Let CMake generate a source file with placeholder substitution.</li>\n<li>Compile and link your program with the generated file.</li>\n</ul>\n\n<p>In <code>CMakeLists.txt</code> add e.g.</p>\n\n<pre><code>set(BUILD_OPTIONS \"OPT1=${OPT1} OPT2=${OPT2} OPT3=${OPT3}\")\n\nconfigure_file(${CMAKE_CURRENT_SOURCE_DIR}/build_options.c.in ${CMAKE_CURRENT_BINARY_DIR}/build_options.c @ONLY)\n</code></pre>\n\n<p>Manually created files:</p>\n\n<p><code>build_options.c.in</code></p>\n\n<pre><code>#include \"build_options.h\"\n\nconst char *BUILD_OPTIONS = \"@BUILD_OPTIONS@\";\n</code></pre>\n\n<p><code>build_options.h</code></p>\n\n<pre><code>#ifndef BUILD_OPTIONS_H_\n#define BUILD_OPTIONS_H_\n\nextern const char *BUILD_OPTIONS;\n\n#endif /* BUILD_OPTIONS_H_ */\n</code></pre>\n\n<p><code>CMake</code> will generate <code>build_options.c</code></p>\n\n<pre><code>#include \"build_options.h\"\n\nconst char *BUILD_OPTIONS = \"OPT1=ON OPT2=OFF OPT3=ON\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 333, "user_id": 5310544, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Gv9DnOaW1s/AAAAAAAAAAI/AAAAAAAAEgA/E67WwOkt5QQ/photo.jpg?sz=128", "display_name": "\u013dubom&#237;r Carik", "link": "https://stackoverflow.com/users/5310544/%c4%bdubom%c3%adr-carik"}, "is_accepted": false, "score": 0, "last_activity_date": 1575496638, "creation_date": 1575496638, "answer_id": 59185203, "question_id": 59179672, "link": "https://stackoverflow.com/questions/59179672/get-cmake-options-from-program/59185203#59185203", "title": "Get cmake options from program", "body": "<p>It is possible to use <a href=\"https://cmake.org/cmake/help/latest/command/configure_file.html\" rel=\"nofollow noreferrer\">configure_file</a> command with 'cmakedefine' feaure. This is capable to generate something very similar what autotools do i.e. config.h with all enabled/disabled features.\nThe final string may be concatenated from particular sub-string depending if CMake option defined.</p>\n"}, {"tags": [], "owner": {"reputation": 300, "user_id": 11743870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gztw1.png?s=128&g=1", "display_name": "Tal Avraham", "link": "https://stackoverflow.com/users/11743870/tal-avraham"}, "is_accepted": false, "score": 0, "last_activity_date": 1575885231, "creation_date": 1575885231, "answer_id": 59246312, "question_id": 59179672, "link": "https://stackoverflow.com/questions/59179672/get-cmake-options-from-program/59246312#59246312", "title": "Get cmake options from program", "body": "<p>Well, if the program itself was compiled using the CMakeLists.txt file, you could write something along these lines:</p>\n\n<pre><code>option (OPT1 \u201coption 1\u201d OFF)\noption (OPT2 \u201coption 2\u201d OFF)\n\nif (OPT1)\n    add_definitions (-DOPT1_ENABLED)\nendif(OPT1)\n\nif (OPT2)\n    add_definitions (-DOPT2_ENABLED)\nendif(OPT2)\n</code></pre>\n\n<p>Then in your program:</p>\n\n<pre><code>int main(void)\n{\n    std::cout &lt;&lt; \u201cBuild options: \u201c;\n#ifdef OPT1_ENABLED\n    std::cout &lt;&lt; \u201cOPT1=ON \u201d;\n#else\n    std::cout &lt;&lt; \u201cOPT1=OFF \u201d;\n#endif /* OPT1 */\n\n#ifdef OPT2_ENABLED\n    std::cout &lt;&lt; \u201cOPT2=ON \u201d;\n#else\n    std::cout &lt;&lt; \u201cOPT2=OFF \u201d;\n#endif /* OPT2 */\n\n    std::cout &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 611, "user_id": 8622794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0b975deef3e80e5fd9ce63f1f1ef91f?s=128&d=identicon&r=PG&f=1", "display_name": "trozen", "link": "https://stackoverflow.com/users/8622794/trozen"}, "is_accepted": false, "score": 0, "last_activity_date": 1575996763, "creation_date": 1575996763, "answer_id": 59272063, "question_id": 59179672, "link": "https://stackoverflow.com/questions/59179672/get-cmake-options-from-program/59272063#59272063", "title": "Get cmake options from program", "body": "<p>Finally I'm using the following approach, maybe someone fill find that useful. Instead of <code>option()</code> function I'm using custom <code>feature_option()</code>:</p>\n\n<pre><code>include(cmake/options.cmake)\n\nfeature_option(OPT1 \"option 1\" OFF)\nfeature_option(OPT2 \"option 2\" OFF)\nfeature_option(OPT3 \"option 3\" OFF)\n</code></pre>\n\n<p>which defines the option and also stores it on a list. Then it can be passed to the compiler via <code>ENABLED_FEATURES</code> define:</p>\n\n<pre><code>get_feature_list(feature_list)\nmessage(STATUS \"Enabled features: ${feature_list}\")\ntarget_compile_definitions(target PUBLIC \"-DENABLED_FEATURES=\\\"${feature_list}\\\"\")\n</code></pre>\n\n<p>Those functions are defined in separate <code>options.cmake</code> file, so they can be used in project consiting of multiple modules:</p>\n\n<pre><code>function(feature_option option_variable help_string) # optional argument: default_value\n    option(${option_variable} ${help_string} ${ARGN})\n    get_property(FEATURE_VARIABLE_LIST GLOBAL PROPERTY FEATURE_VARIABLE_LIST)\n    set_property(GLOBAL PROPERTY FEATURE_VARIABLE_LIST ${FEATURE_VARIABLE_LIST} ${option_variable})\nendfunction()\n\nfunction(get_feature_list output_variable)\n    get_property(FEATURE_VARIABLE_LIST GLOBAL PROPERTY FEATURE_VARIABLE_LIST)\n    foreach(option_variable ${FEATURE_VARIABLE_LIST})\n        set(option_value \"${${option_variable}}\")\n        if(${option_value})\n            if(feature_list)\n                set(feature_list \"${feature_list},${option_variable}\")\n            else()\n                set(feature_list \"${option_variable}\")\n            endif()\n        endif()\n    endforeach()\n    set(${output_variable} ${feature_list} PARENT_SCOPE)\nendfunction()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 611, "user_id": 8622794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0b975deef3e80e5fd9ce63f1f1ef91f?s=128&d=identicon&r=PG&f=1", "display_name": "trozen", "link": "https://stackoverflow.com/users/8622794/trozen"}, "is_accepted": false, "score": 0, "last_activity_date": 1576073000, "creation_date": 1576073000, "answer_id": 59287504, "question_id": 59179672, "link": "https://stackoverflow.com/questions/59179672/get-cmake-options-from-program/59287504#59287504", "title": "Get cmake options from program", "body": "<p>It is possible to pass a list of all defines to a program in a single string using generator expressions:</p>\n\n<pre><code>target_compile_options(target PRIVATE \"-DENABLED_FEATURES=\\\"$&lt;JOIN:$&lt;TARGET_PROPERTY:COMPILE_DEFINITIONS&gt;,$&lt;COMMA&gt;&gt;\\\"\")\n</code></pre>\n\n<p>Using <code>target_compile_options</code> instead of <code>target_compile_definitions</code>, as the latter would cause infinite recursion.</p>\n\n<p>In CMake 3.15 and newer it is possible to use <code>REMOVE_DUPLICATES</code> generator, if a single define may appear several times on a command line.</p>\n"}], "owner": {"reputation": 611, "user_id": 8622794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0b975deef3e80e5fd9ce63f1f1ef91f?s=128&d=identicon&r=PG&f=1", "display_name": "trozen", "link": "https://stackoverflow.com/users/8622794/trozen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1576073000, "creation_date": 1575474113, "question_id": 59179672, "link": "https://stackoverflow.com/questions/59179672/get-cmake-options-from-program", "title": "Get cmake options from program", "body": "<p>How can I get CMake options used for building from within a program?</p>\n\n<p>E.g. I would like to use this:</p>\n\n<pre><code>int main()\n{\n    std::cout &lt;&lt; \"Build options: \" &lt;&lt; BUILD_OPTIONS &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><code>BUILD_OPTIONS</code> would contain a string with all options passed to <code>cmake</code>, like:</p>\n\n<pre><code>cmake -DOPT1 -DOPT3\n</code></pre>\n\n<p>with <code>CMakeLists.txt</code> defined as follows:</p>\n\n<pre><code>option(OPT1 \"option 1\" OFF)\noption(OPT2 \"option 2\" OFF)\noption(OPT3 \"option 3\" OFF)\n</code></pre>\n\n<p>The desired output of such program:</p>\n\n<pre><code>Build options: OPT1=ON OPT3=ON\n</code></pre>\n\n<p>(<code>OPT2</code> skipped, as it is not defined explicitly and equal to default value)</p>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1575473955, "post_id": 59179577, "comment_id": 104580257, "body": "Begin by putting the class definition in a <i>header file</i> that you can <code>#include</code>."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 2, "creation_date": 1575474200, "post_id": 59179577, "comment_id": 104580421, "body": "&quot;<i>without completely recoding</i>&quot;: You just need to cut-and-paste the class definition from this file into the header file. The function implementations don&#39;t <i>need</i> to be outside the class in a <code>.cpp</code> file."}], "answers": [{"tags": [], "owner": {"reputation": 428, "user_id": 7421020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6faa42c836c9cf455d50c86e033c44b?s=128&d=identicon&r=PG&f=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/7421020/federico"}, "is_accepted": false, "score": 0, "last_activity_date": 1575478614, "last_edit_date": 1575478614, "creation_date": 1575475369, "answer_id": 59180110, "question_id": 59179577, "link": "https://stackoverflow.com/questions/59179577/splitting-written-class-into-two-files-c/59180110#59180110", "title": "Splitting written class into two files (C++)", "body": "<p>Is as simple as creating the two files, cutting copying things inside and then adding <code>#include \"CAPiece.h\"</code> at the beginning of files in which you need this class.</p>\n\n<p><code>CAPiece.h</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class CAPiece\n{\npublic:\n    CAPiece(char cColor);\n    ~CAPiece();\n    virtual char GetPiece() = 0;\n    char GetColor();\n    bool IsLegalMove(int iSrcRow, int iSrcCol, int iDestRow, int iDestCol, CAPiece* qpaaBoard[8][8]); \n\nprivate:\n    virtual bool AreSquaresLegal(int iSrcRow, int iSrcCol, int iDestRow, int iDestCol, CAPiece* qpaaBoard[8][8]) = 0;\n    char mcColor;\n};\n</code></pre>\n\n<p><code>CAPiece.cpp</code></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"CaPiece.h\"\n\nCAPiece::CAPiece(char cColor) \n       : mcColor(cColor) \n{}\nCAPiece::~CAPiece() \n{}\nchar CAPiece::GetColor() \n{\n   return mcColor;\n}\nbool CAPiece::CAPieceIsLegalMove(int iSrcRow, int iSrcCol, int iDestRow, int iDestCol, CAPiece* qpaaBoard[8][8]) \n{\n    CAPiece* qpDest = qpaaBoard[iDestRow][iDestCol];\n    if ((qpDest == 0) || (mcColor != qpDest-&gt;GetColor())) {\n       return AreSquaresLegal(iSrcRow, iSrcCol, iDestRow, iDestCol, qpaaBoard);\n    }\n    return false;\n}\n\n\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10593205, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dfiuKU-_52g/AAAAAAAAAAI/AAAAAAAABdY/bdMmiPsbdc8/photo.jpg?sz=128", "display_name": "Arseny Ivanov", "link": "https://stackoverflow.com/users/10593205/arseny-ivanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1575478614, "creation_date": 1575473804, "last_edit_date": 1575474387, "question_id": 59179577, "link": "https://stackoverflow.com/questions/59179577/splitting-written-class-into-two-files-c", "title": "Splitting written class into two files (C++)", "body": "<p>So, I have a  C++ class written in the <code>main.cpp</code> file of the project,like this:</p>\n\n<pre><code>class CAPiece\n{\npublic:\n    CAPiece(char cColor) : mcColor(cColor) {}\n    ~CAPiece() {}\n    virtual char GetPiece() = 0;\n    char GetColor() {\n        return mcColor;\n    }\n    bool IsLegalMove(int iSrcRow, int iSrcCol, int iDestRow, int iDestCol, CAPiece* qpaaBoard[8][8]) {\n        CAPiece* qpDest = qpaaBoard[iDestRow][iDestCol];\n        if ((qpDest == 0) || (mcColor != qpDest-&gt;GetColor())) {\n            return AreSquaresLegal(iSrcRow, iSrcCol, iDestRow, iDestCol, qpaaBoard);\n        }\n        return false;\n    }\nprivate:\n    virtual bool AreSquaresLegal(int iSrcRow, int iSrcCol, int iDestRow, int iDestCol, CAPiece* qpaaBoard[8][8]) = 0;\n    char mcColor;\n};\n</code></pre>\n\n<p>Is there a way to transfer it to the two separate files created by the Visual Studio Class Manager, without completely recoding it? (By two separate I mean <code>CAPiece.h</code> and <code>CAPiece.cpp</code> files)</p>\n"}, {"tags": ["c++", "c", "libraries"], "comments": [{"owner": {"reputation": 95, "user_id": 10908150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zMy_o6BDHsg/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbvC7fdOOLBG86NfTRoJkC76dfXvw/mo/photo.jpg?sz=128", "display_name": "Urquhart", "link": "https://stackoverflow.com/users/10908150/urquhart"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1575474074, "post_id": 59179542, "comment_id": 104580327, "body": "That only shows include paths, not library paths. However, a similiar method to show library paths would only list all candidates, not the actual resolution."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1575474143, "post_id": 59179542, "comment_id": 104580374, "body": "<code>ldd foo</code> shows the runtime resolution of the library, if that helps you."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1575474183, "post_id": 59179542, "comment_id": 104580410, "body": "If linking using <code>g++</code> you might want to try <code>-Wl,--verbose</code> ."}], "answers": [{"tags": [], "owner": {"reputation": 330, "user_id": 3930873, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000174128456/picture?type=large", "display_name": "Mike Seeds", "link": "https://stackoverflow.com/users/3930873/mike-seeds"}, "is_accepted": false, "score": 1, "last_activity_date": 1575477117, "last_edit_date": 1575477117, "creation_date": 1575476174, "answer_id": 59180358, "question_id": 59179542, "link": "https://stackoverflow.com/questions/59179542/show-path-of-library-that-ld-found-through-l/59180358#59180358", "title": "Show path of library that ld found through -l", "body": "<p>ELF files do not include an absolute path to the shared library. That is the job of the dynamic linker. You can confirm this by running. strings executable | grep libname. The shared library can be anywhere on the linker search path. </p>\n\n<p>readelf -d executable </p>\n\n<p>To test the behaviour of the dynamic loader use ldd (List Dynamic Dependencies)</p>\n\n<p>Example below with /bin/bash</p>\n\n<blockquote>\n  <p>ldd /bin/bash</p>\n  \n  <p>libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6</p>\n</blockquote>\n\n<p>You may also want to follow symlinks</p>\n\n<blockquote>\n  <p>ls -al /lib/x86_64-linux-gnu/libc.so.6</p>\n  \n  <p>lrwxrwxrwx 1 root root 12 Feb  5  2019 /lib/x86_64-linux-gnu/libc.so.6 -> libc-2.23.so</p>\n</blockquote>\n"}], "owner": {"reputation": 95, "user_id": 10908150, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zMy_o6BDHsg/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbvC7fdOOLBG86NfTRoJkC76dfXvw/mo/photo.jpg?sz=128", "display_name": "Urquhart", "link": "https://stackoverflow.com/users/10908150/urquhart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "closed_date": 1575512162, "answer_count": 1, "score": 0, "last_activity_date": 1575477117, "creation_date": 1575473701, "question_id": 59179542, "link": "https://stackoverflow.com/questions/59179542/show-path-of-library-that-ld-found-through-l", "closed_reason": "Duplicate", "title": "Show path of library that ld found through -l", "body": "<p>Is it possible to make g++/ld show the absolute path of the library, that a -l option has been resolved to?\nIn my case I am trying to link the lrs library through -llrs and I suspect that it resolves to /usr/lib/liblrs.so but I want to be sure.</p>\n"}, {"tags": ["c++", "regex", "string", "c++17"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1575473826, "post_id": 59179532, "comment_id": 104580169, "body": "You&#39;re not missing anything.  <code>std::regex</code> doesn&#39;t provide a way to get what it was constructed from."}, {"owner": {"reputation": 2945, "user_id": 5345715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13f05631812e06e1599ce28b59ed000c?s=128&d=identicon&r=PG&f=1", "display_name": "User12547645", "link": "https://stackoverflow.com/users/5345715/user12547645"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575473884, "post_id": 59179532, "comment_id": 104580210, "body": "Is there a way to solve the above problem then? Besides of having the caller pass an extra <code>std::string</code> which describes the regex?"}, {"owner": {"reputation": 2362, "user_id": 1472416, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7b29bdd4037fe62aa667a5ed517d9790?s=128&d=identicon&r=PG", "display_name": "jgr208", "link": "https://stackoverflow.com/users/1472416/jgr208"}, "edited": false, "score": 0, "creation_date": 1575473962, "post_id": 59179532, "comment_id": 104580261, "body": "huh? do you mean to show the regular expression used, show the regular expression in plain english, or show the string that was used? also you are returning a string from a bool which is not correct and why an error is being thrown. a bool is expected as the return. lastly, if you are trying to get the plain english of the regex which you would need to build a regex parser that parses the regex and outputs what each part is doing."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1575474136, "post_id": 59179532, "comment_id": 104580368, "body": "@User12547645 AFAIK, that is the only way.  What you could do is make your own <code>regex</code> class that wraps <code>std::regex</code> and a <code>std::string</code>."}, {"owner": {"reputation": 2945, "user_id": 5345715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13f05631812e06e1599ce28b59ed000c?s=128&d=identicon&r=PG&f=1", "display_name": "User12547645", "link": "https://stackoverflow.com/users/5345715/user12547645"}, "edited": false, "score": 0, "creation_date": 1575474205, "post_id": 59179532, "comment_id": 104580424, "body": "Show the regular expression: If the regular expression is <code>std::basic_regex{&quot;\\d+abc\\d[1-3]&quot;}</code>, and <code>str=&quot;some string&quot;, then </code>func` should return <code>&quot;String some string does not match the pattern \\d+abc\\d[1-3]&quot;</code>."}, {"owner": {"reputation": 2945, "user_id": 5345715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13f05631812e06e1599ce28b59ed000c?s=128&d=identicon&r=PG&f=1", "display_name": "User12547645", "link": "https://stackoverflow.com/users/5345715/user12547645"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575474258, "post_id": 59179532, "comment_id": 104580458, "body": "Thank you very much for the suggestion @NathanOliver-ReinstateMonica. This does not sound ideal to me, but better than nothing"}, {"owner": {"reputation": 2362, "user_id": 1472416, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7b29bdd4037fe62aa667a5ed517d9790?s=128&d=identicon&r=PG", "display_name": "jgr208", "link": "https://stackoverflow.com/users/1472416/jgr208"}, "edited": false, "score": 0, "creation_date": 1575474264, "post_id": 59179532, "comment_id": 104580462, "body": "@User12547645 well then the problem is you are trying to return a string from a function that returns a bool"}, {"owner": {"reputation": 2945, "user_id": 5345715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13f05631812e06e1599ce28b59ed000c?s=128&d=identicon&r=PG&f=1", "display_name": "User12547645", "link": "https://stackoverflow.com/users/5345715/user12547645"}, "edited": false, "score": 0, "creation_date": 1575474315, "post_id": 59179532, "comment_id": 104580490, "body": "True, the function shoudl return a string. I will fix that"}, {"owner": {"reputation": 2945, "user_id": 5345715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13f05631812e06e1599ce28b59ed000c?s=128&d=identicon&r=PG&f=1", "display_name": "User12547645", "link": "https://stackoverflow.com/users/5345715/user12547645"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1575474466, "post_id": 59179532, "comment_id": 104580584, "body": "@NathanOliver-ReinstateMonica if you like you can suggest that as an answer. I will wait a day or two and then mark your answer as a solution, if there is no better way to do this"}, {"owner": {"reputation": 2362, "user_id": 1472416, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7b29bdd4037fe62aa667a5ed517d9790?s=128&d=identicon&r=PG", "display_name": "jgr208", "link": "https://stackoverflow.com/users/1472416/jgr208"}, "edited": false, "score": 0, "creation_date": 1575474516, "post_id": 59179532, "comment_id": 104580625, "body": "@User12547645 <a href=\"https://www.geeksforgeeks.org/regex-regular-expression-in-c/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/regex-regular-expression-in-c</a> should give you some help"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1575474648, "post_id": 59179532, "comment_id": 104580712, "body": "Most users won&#39;t know how to parse a regular expression that has a certain amount of complexity. It&#39;s much better to <b>describe</b> the expected input than to make users figure out the meaning of a fairly technical (often write-only) string."}], "answers": [{"comments": [{"owner": {"reputation": 2945, "user_id": 5345715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13f05631812e06e1599ce28b59ed000c?s=128&d=identicon&r=PG&f=1", "display_name": "User12547645", "link": "https://stackoverflow.com/users/5345715/user12547645"}, "edited": false, "score": 0, "creation_date": 1575553608, "post_id": 59179966, "comment_id": 104611242, "body": "Thank you very much for your answer. This is a nice and simple solution. Not what I expected, though. I thought that there is something in the standard that I must have missed"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 2945, "user_id": 5345715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13f05631812e06e1599ce28b59ed000c?s=128&d=identicon&r=PG&f=1", "display_name": "User12547645", "link": "https://stackoverflow.com/users/5345715/user12547645"}, "edited": false, "score": 1, "creation_date": 1575553831, "post_id": 59179966, "comment_id": 104611342, "body": "@User12547645 No problem.  You didn&#39;t miss anything AFAIK.  There is a <a href=\"http://groups.google.com/a/isocpp.org/forum/?fromgroups#!forum/std-proposals\" rel=\"nofollow noreferrer\">standard google group</a> that you can float ideas in and you could ask about if it would be worth getting this functionality built into <code>std::regex</code>."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1575479677, "last_edit_date": 1575479677, "creation_date": 1575474961, "answer_id": 59179966, "question_id": 59179532, "link": "https://stackoverflow.com/questions/59179532/how-to-get-the-underlying-string-of-a-regular-expression-in-c/59179966#59179966", "title": "How to get the underlying string of a regular expression in C++?", "body": "<p><code>std::regex</code> doesn't provide a way to get the string from it once it has been constructed.  One way to get around that is to wrap the regex and the string together in a object so you can pass them together.  That would look like</p>\n\n<pre><code>class my_regex\n{\n    std::string str;\n    std::regex regex;\npublic:\n    my_regex(const std::string&amp; regex_str) : str(regex_str), regex(regex_str) {}\n    const std::string&amp; str() const { return str; }\n    std::regex&amp; regex() { return regex; }\n};\n</code></pre>\n\n<p>and then you would use it in your code like</p>\n\n<pre><code>std::string func(my_regex rgx, std::string str)\n{\n    // do stuff 1\n    if (!std::regex_match(str, rgx.regex()))\n    {\n        return \"String \" + str + \" does not match the pattern \" + rgx.str();\n    }\n    // do stuff 2\n}\n</code></pre>\n\n<hr>\n\n<p>You could make <code>str</code> and <code>regex</code> conversion operators instead but an issue with that is that a lot of the regex library uses function templates and no conversion is done during type deduction so you would have to explicitly cast, which is more verbose then just calling a member function.</p>\n"}], "owner": {"reputation": 2945, "user_id": 5345715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13f05631812e06e1599ce28b59ed000c?s=128&d=identicon&r=PG&f=1", "display_name": "User12547645", "link": "https://stackoverflow.com/users/5345715/user12547645"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 1, "accepted_answer_id": 59179966, "answer_count": 1, "score": 2, "last_activity_date": 1575479677, "creation_date": 1575473647, "last_edit_date": 1575474328, "question_id": 59179532, "link": "https://stackoverflow.com/questions/59179532/how-to-get-the-underlying-string-of-a-regular-expression-in-c", "title": "How to get the underlying string of a regular expression in C++?", "body": "<p>I have a string and want to check if this string matches a specified regex. If that is not the case I would like to return a warning to the user that says <code>string xyz does not match regex abc</code>. </p>\n\n<p>Example code:</p>\n\n<pre><code>std::string func(std::basic_regex rgx, std::string str)\n{\n    // do stuff 1\n    if (!std::regex_match(str, rgx))\n    {\n        return \"String \" + str + \" does not match the pattern \" + std::string(rgx);\n    }\n    // do stuff 2\n}\n</code></pre>\n\n<p>This does not work, since both <code>std::string(rgx)</code> and <code>\"some string \" + rgx + \" more string\"</code> gives an error.</p>\n\n<p>Also <code>std::basic_regex</code> does not seem to provide a method to retrieve the underlying string that describes it (see <a href=\"https://en.cppreference.com/w/cpp/regex/basic_regex\" rel=\"nofollow noreferrer\">cppreference</a>). <strong>What did I miss?</strong></p>\n\n<p>I am using C++17.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1575473762, "post_id": 59179497, "comment_id": 104580132, "body": "What do you want the hypothetical <code>to_string(house)</code> to return?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1575473770, "post_id": 59179497, "comment_id": 104580136, "body": "So create an <code>to_string</code> function to do what you need? <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/to_string\" rel=\"nofollow noreferrer\"><code>std::to_string</code></a> is not a magic function that can take any kind of &quot;object&quot; and create a string from it."}, {"owner": {"reputation": 1140, "user_id": 9252020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PDrj2.jpg?s=128&g=1", "display_name": "Rhathin", "link": "https://stackoverflow.com/users/9252020/rhathin"}, "edited": false, "score": 1, "creation_date": 1575473841, "post_id": 59179497, "comment_id": 104580181, "body": "If you want to know if insert was successful, <code>insert</code> method in <code>std::map</code> returns <code>std::pair</code> in which second element denotes whether the insertion took place or not"}, {"owner": {"reputation": 15, "user_id": 11469831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d2e9a484bc5b4be89b64270a7d44f1?s=128&d=identicon&r=PG&f=1", "display_name": "bartolomo", "link": "https://stackoverflow.com/users/11469831/bartolomo"}, "edited": false, "score": 0, "creation_date": 1575473873, "post_id": 59179497, "comment_id": 104580201, "body": "And is there some other, maybe better way, how to store object in set with some specific key? Maybe what would be the best type of that key?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1575474606, "post_id": 59179497, "comment_id": 104580693, "body": "What are the members of <code>House</code>? How do they distinguish unique houses? It could be as simple as <code>std::string to_string(const House &amp; house) { return house.address; }</code>"}, {"owner": {"reputation": 15, "user_id": 11469831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d2e9a484bc5b4be89b64270a7d44f1?s=128&d=identicon&r=PG&f=1", "display_name": "bartolomo", "link": "https://stackoverflow.com/users/11469831/bartolomo"}, "edited": false, "score": 0, "creation_date": 1575475043, "post_id": 59179497, "comment_id": 104580980, "body": "Thank you. I have added new method for House. Now, how can I determine if insert was succesful or not? I&#39;m trying it with iterator: <code>std::map&lt;string,House&gt;::iterator it = complexbook.find(houseName);</code>, but this code has error No viable overloaded &#39;=&#39;."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1575475478, "post_id": 59179497, "comment_id": 104581235, "body": "@bartolomo <code>const_iterator</code> or better yet, you could have used <code>auto iter = \u2026</code>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1575476251, "post_id": 59179497, "comment_id": 104581699, "body": "<a href=\"https://en.cppreference.com/w/cpp/container/map/insert\" rel=\"nofollow noreferrer\">std::map::insert</a>"}], "owner": {"reputation": 15, "user_id": 11469831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d2e9a484bc5b4be89b64270a7d44f1?s=128&d=identicon&r=PG&f=1", "display_name": "bartolomo", "link": "https://stackoverflow.com/users/11469831/bartolomo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575473970, "creation_date": 1575473537, "question_id": 59179497, "link": "https://stackoverflow.com/questions/59179497/c-object-name-to-str", "title": "C++ object name to str", "body": "<p>This is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;set&gt;\n#include &lt;map&gt;\n\nusing namespace std;\n\n...\n\nmap&lt;string, House&gt;  complexbook;\n\n...\n\nbool Complex::addHouse(const House &amp;house) {\n                                                  // v\n    complexbook.insert(pair&lt;const string, House&gt;(to_string(house),house));   \n    //return true if insert was succesful, return false if house already was in complexbook\n}\n</code></pre>\n\n<p>So what I have a problem with is, how to create a string from the value of &amp;house (as input for method). I want to do this because of return value of method - as described above, I want to differentiate between inserted and not inserted.</p>\n"}, {"tags": ["c++", "templates", "metaprogramming", "template-meta-programming"], "comments": [{"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1575474006, "post_id": 59179396, "comment_id": 104580280, "body": "Depends, will the two versions of the function differ a lot? <code>if constexpr</code> could be a good option if you can use <code>c++17</code>."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 1, "creation_date": 1575474096, "post_id": 59179396, "comment_id": 104580343, "body": "Also, using SFINAE in functions like that you need overloaded functions. That means you need two versions of <code>myFunc</code> in the class for that to work."}], "answers": [{"tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1575474766, "last_edit_date": 1575474766, "creation_date": 1575473968, "answer_id": 59179626, "question_id": 59179396, "link": "https://stackoverflow.com/questions/59179396/c-templates-overloading-method-depend-on-class-type/59179626#59179626", "title": "c++ templates overloading method depend on class type", "body": "<p>The simplest way I can think of would be to just use <code>if constexpr</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T&gt;\nclass MyClass\n{\n    auto myFunc()\n    {\n        if constexpr (std::is_arithmetic_v&lt;T&gt;)\n        {\n            return T{};\n        }\n        else\n        {\n            // do smth\n        }\n    }\n};\n</code></pre>\n\n<p>If you can't use C++17, you will have to revert to some SFINAE-based approach. What that would best look like exactly depends a lot on what the actual signatures involved should be. But, for example, you could provide a partial class template specialization for the case of an arithmetic type:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T, typename = void&gt;\nclass MyClass\n{\n    void myFunc()\n    {\n        // do smth\n    }\n};\n\ntemplate &lt;typename T&gt;\nclass MyClass&lt;T, std::enable_if_t&lt;std::is_arithmetic&lt;T&gt;::value&gt;&gt;\n{\n    T myFunc()\n    {\n        return {};\n    }\n};\n</code></pre>\n\n<p>Note that an arithmetic type cannot be a class type or enum, so I'm not sure what <code>T::value</code> was trying to achieve in your example code for the case of <code>T</code> being an arithmetic type\u2026</p>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 11331746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9012d6eff427526b3900dff139acd84c?s=128&d=identicon&r=PG&f=1", "display_name": "ziyiyituxe", "link": "https://stackoverflow.com/users/11331746/ziyiyituxe"}, "edited": false, "score": 0, "creation_date": 1575480294, "post_id": 59179981, "comment_id": 104584010, "body": "Thank you.  What if i want to use this function like : <code>m.myFunc&lt;myType&gt;():</code> and then in myFunc: <code>return myType::someAtr</code> I thought that one more <code>template </code> exactly above myFuction is enought, but its not :("}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 141, "user_id": 11331746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9012d6eff427526b3900dff139acd84c?s=128&d=identicon&r=PG&f=1", "display_name": "ziyiyituxe", "link": "https://stackoverflow.com/users/11331746/ziyiyituxe"}, "edited": false, "score": 0, "creation_date": 1575482258, "post_id": 59179981, "comment_id": 104585050, "body": "@ziyiyituxe <code>m.myFunc&lt;myType&gt;</code> would reach the <code>yay</code> branch since <code>myType</code> is not arithmetic. I don&#39;t fully understand what you mean."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 141, "user_id": 11331746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9012d6eff427526b3900dff139acd84c?s=128&d=identicon&r=PG&f=1", "display_name": "ziyiyituxe", "link": "https://stackoverflow.com/users/11331746/ziyiyituxe"}, "edited": false, "score": 0, "creation_date": 1575482409, "post_id": 59179981, "comment_id": 104585124, "body": "Do you want <code>MyClass&lt;int&gt;</code> to always return an <code>int</code> even if it&#39;s used like <code>MyClass&lt;int&gt;::myFunc&lt;myType&gt;();</code>?"}, {"owner": {"reputation": 141, "user_id": 11331746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9012d6eff427526b3900dff139acd84c?s=128&d=identicon&r=PG&f=1", "display_name": "ziyiyituxe", "link": "https://stackoverflow.com/users/11331746/ziyiyituxe"}, "edited": false, "score": 0, "creation_date": 1575485127, "post_id": 59179981, "comment_id": 104586376, "body": "I mean, I want <code>myFunc</code> to take <code>myType</code> typename and then, if MyClass is numeric <code>return myType::someAtr;</code> and if not: <code>cout&lt;&lt;&quot;Not numeric&quot;;</code>"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 141, "user_id": 11331746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9012d6eff427526b3900dff139acd84c?s=128&d=identicon&r=PG&f=1", "display_name": "ziyiyituxe", "link": "https://stackoverflow.com/users/11331746/ziyiyituxe"}, "edited": false, "score": 1, "creation_date": 1575485724, "post_id": 59179981, "comment_id": 104586623, "body": "That can be done. If you need all the combinations to work you need to keep adding more overloads. Either way it&#39;s probably better if you ask a new question and be more specific if you want a different answer instead of modifying this."}], "tags": [], "owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "is_accepted": true, "score": 2, "last_activity_date": 1575474998, "creation_date": 1575474998, "answer_id": 59179981, "question_id": 59179396, "link": "https://stackoverflow.com/questions/59179396/c-templates-overloading-method-depend-on-class-type/59179981#59179981", "title": "c++ templates overloading method depend on class type", "body": "<p>As an alternative to the <code>constexpr if</code> solution already supplied, here is your initial idea in it's working form.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt;\nstruct MyClass{\n   template &lt;typename returnT = T, std::enable_if_t&lt;std::is_arithmetic_v&lt;returnT&gt;, bool&gt; = true&gt;\n   T myFunc();\n\n   template &lt;typename returnT = T, std::enable_if_t&lt;!std::is_arithmetic_v&lt;returnT&gt;, bool&gt; = true&gt;\n   void myFunc();\n};\n\n\ntemplate &lt;typename T&gt;\ntemplate &lt;typename returnT, std::enable_if_t&lt;std::is_arithmetic_v&lt;returnT&gt;, bool&gt;&gt;\nT MyClass&lt;T&gt;::myFunc()\n{\n    std::cout &lt;&lt; \"yo\\n\";\n    return T{};\n}\n\ntemplate &lt;typename T&gt;\ntemplate &lt;typename returnT, std::enable_if_t&lt;!std::is_arithmetic_v&lt;returnT&gt;, bool&gt;&gt;\nvoid MyClass&lt;T&gt;::myFunc()\n{\n    std::cout &lt;&lt; \"yay\\n\";\n}\n\nint main() {\n    MyClass&lt;int&gt; m;\n    MyClass&lt;std::string&gt; n;\n    m.myFunc();\n    n.myFunc();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1575476350, "post_id": 59180287, "comment_id": 104581768, "body": "<a href=\"https://tio.run/##lZA7a8MwEIB3/4qDDklKWjrLrpfQQIamxahDoSAUWWkFsmysc4gT8ttdSXHeS@tF1um77x6iqh6@hejulBG6ySUk2FaSYc0V2jQ6hVVpsZa8SDuURaU59qjhhRzDoix1Co5oBEJGXTyObjmgl0xCx7Dk2soUtuChXC5hVao8XGLY/VXirhcOeis4z4@E5tbCazvx5zYC9x1SLeaEKMt4rfCnkKhE4grO4gvoWHhGyIprXzzbE6H7op02RtDh1ZAj12HQi7JBSBJg7D17ofSTTT/mEzp7mzPmw4MvM3C9Bx@9lYVh/@eqJTa1gSdvrZqFVoIc5wk7yQjx/32xobf3Ocfyw9HIp@/iThmEgisDnguefpOJe0lhvd@Ep1p4hvXjQRpfs3CfwmYf3ZxRu@4X\" rel=\"nofollow noreferrer\">tio.run/##lZA7a8MwEIB3/&hellip;</a>"}], "tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 1, "last_activity_date": 1575475952, "creation_date": 1575475952, "answer_id": 59180287, "question_id": 59179396, "link": "https://stackoverflow.com/questions/59179396/c-templates-overloading-method-depend-on-class-type/59180287#59180287", "title": "c++ templates overloading method depend on class type", "body": "<p>I would create a helper template class to select the return type, and a helper function that uses overloading to perform the right behavior.</p>\n\n<pre><code>template &lt;typename, bool&gt; struct RType;\ntemplate &lt;typename T&gt; struct RType&lt;T, false&gt; { typedef void type; };\ntemplate &lt;typename T&gt; struct RType&lt;T, true&gt; { typedef T type; };\n\ntemplate&lt;typename T&gt;\nclass MyClass{\n    typedef RType&lt;T, std::is_arithmetic&lt;T&gt;::value&gt; R;\n\n    void myFuncT(RType&lt;T, false&gt;) {}\n    T myFuncT(RType&lt;T, true&gt;) { return 0; }\n\npublic:\n    typename R::type myFunc() { return myFuncT(R()); }\n};\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 11331746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9012d6eff427526b3900dff139acd84c?s=128&d=identicon&r=PG&f=1", "display_name": "ziyiyituxe", "link": "https://stackoverflow.com/users/11331746/ziyiyituxe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 1, "accepted_answer_id": 59179981, "answer_count": 3, "score": 0, "last_activity_date": 1575475952, "creation_date": 1575473268, "question_id": 59179396, "link": "https://stackoverflow.com/questions/59179396/c-templates-overloading-method-depend-on-class-type", "title": "c++ templates overloading method depend on class type", "body": "<p>I have class like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nMyClass{\n   //myFunc();\n}\n</code></pre>\n\n<p>I want to create myFunc method that return numeric value if class template is numeric and return nothing (void) when class template is not numeric.</p>\n\n<p>For now, I got sth like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nMyClass{\n   template &lt;typename returnT&gt;\n   returnT myFunc();\n}\n\n\ntemplate &lt;typename T&gt;\ntemplate &lt;typename returnT&gt;\ntypename std::enable_if&lt;std::is_arithmetic&lt;T&gt;::value&gt;\nT MyClass&lt;T&gt;::myFunc()\n{\n    return T::value;\n}\n\ntemplate &lt;typename T&gt;\ntemplate &lt;typename returnT&gt;\ntypename std::enable_if&lt;!std::is_arithmetic&lt;T&gt;::value&gt;\nvoid MyClass::myFunc()\n{\n    //do sth\n}\n</code></pre>\n\n<p>of course, that doesn't work.  Is that a good idea to solve this problem this way? What is \"smart\" and working solution?</p>\n"}, {"tags": ["c++", "visual-studio-code", "cmake"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1575473492, "post_id": 59179392, "comment_id": 104579974, "body": "Use <a href=\"https://cmake.org/cmake/help/latest/command/target_include_directories.html\" rel=\"nofollow noreferrer\"><code>target_include_directories</code></a> to add the directory to the executable target."}, {"owner": {"reputation": 657, "user_id": 7091177, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c17fd87bcfadaad1b38a28b8af8f3648?s=128&d=identicon&r=PG&f=1", "display_name": "M.Mac", "link": "https://stackoverflow.com/users/7091177/m-mac"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1575473985, "post_id": 59179392, "comment_id": 104580269, "body": "@Someprogrammerdude i added the code <code>target_include_directories(Tensor_Lib &#47;home&#47;name&#47;Libraries&#47;range-v3&#47;range-v3-master&#47;include)</code> after my add_executable and comment-out my old code, but unfortunately, it still doesn&#39;t work."}, {"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 1, "creation_date": 1575474982, "post_id": 59179392, "comment_id": 104580939, "body": "You need the library <b>and</b> the include directory."}, {"owner": {"reputation": 657, "user_id": 7091177, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c17fd87bcfadaad1b38a28b8af8f3648?s=128&d=identicon&r=PG&f=1", "display_name": "M.Mac", "link": "https://stackoverflow.com/users/7091177/m-mac"}, "reply_to_user": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 0, "creation_date": 1575477134, "post_id": 59179392, "comment_id": 104582223, "body": "@sweenish i updated my code. I am adding the header files i want to use to my exe but it still doesn&#39;t work."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1575477435, "post_id": 59179392, "comment_id": 104582407, "body": "You need to specify <code>PUBLIC</code> or <code>PRIVATE</code> scope, not <code>INTERFACE</code>."}, {"owner": {"reputation": 657, "user_id": 7091177, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c17fd87bcfadaad1b38a28b8af8f3648?s=128&d=identicon&r=PG&f=1", "display_name": "M.Mac", "link": "https://stackoverflow.com/users/7091177/m-mac"}, "edited": false, "score": 0, "creation_date": 1575477922, "post_id": 59179392, "comment_id": 104582669, "body": "i thank you very much, now it works."}], "owner": {"reputation": 657, "user_id": 7091177, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c17fd87bcfadaad1b38a28b8af8f3648?s=128&d=identicon&r=PG&f=1", "display_name": "M.Mac", "link": "https://stackoverflow.com/users/7091177/m-mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1039, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1575477026, "creation_date": 1575473259, "last_edit_date": 1575477026, "question_id": 59179392, "link": "https://stackoverflow.com/questions/59179392/visual-studio-code-cmake-cannot-find-third-party-library-headers-even-if-the-cm", "title": "Visual Studio Code, CMake cannot find third party library headers even if the CMakeList.txt is correct", "body": "<p>I want to use the <code>ranges-v3</code> library for my c++ project inside Visual Studio Code, since the <code>CLion IDE</code> crashes or has performance issues with larger projects.</p>\n\n<p>I downloaded the <code>C++ Plugin</code> by Microsoft and the <code>CMake-tools</code> and <code>CMake</code> plugin to work with CMake. Additionally, I changed my <code>c_cpp_properties.json</code>, so it uses my g++ compiler (GCC 9.2) and copied parts of my cmake code into my new <code>CMakeLists.txt</code> to use the ranges library.</p>\n\n<p>My problem is, that the ranges library headers are not found in my vscode project, but in my CLion project it works fine using the <code>add_library</code>, <code>set_target_properties</code> and <code>target_link_libraries</code> functions.</p>\n\n<p>The error message that is thrown when I write <code>#include &lt;range/v3/view/iota.hpp&gt;</code> is the following:</p>\n\n<pre><code>fatal error: range/v3/view/iota.hpp: No such file or directory\n    2 | #include &lt;range/v3/view/iota.hpp&gt;\n      |          ^~~~~~~~~~~~~~~~~~~~~~~~\ncompilation terminated.\n</code></pre>\n\n<p>Here my JSON and CMake code.\nc_cpp_properties.json:</p>\n\n<pre><code>{\n    \"configurations\": [\n        {\n            \"name\": \"Linux\",\n            \"includePath\": [\n                \"${workspaceFolder}/**\"\n            ],\n            \"defines\": [],\n            \"compilerPath\": \"/usr/local/bin/g++\",\n            \"cStandard\": \"c11\",\n            \"cppStandard\": \"c++20\",\n            \"intelliSenseMode\": \"clang-x64\",\n            \"configurationProvider\": \"vector-of-bool.cmake-tools\"\n        }\n    ],\n    \"version\": 4\n}\n</code></pre>\n\n<p>my CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.0.0)\nproject(Tensor_Lib VERSION 0.1.0)\n\ninclude(CTest)\nenable_testing()\n\nadd_library(range_v3 INTERFACE IMPORTED) #same code in CLION CMakeLists.txt\nset_target_properties(range_v3 PROPERTIES\n        INTERFACE_INCLUDE_DIRECTORIES /home/name/Libraries/range-v3/range-v3-master/include) #same code in CLION CMakeLists.txt\n\nadd_compile_options(-fconcepts) #enables concepts(unstable). Stable versions will be released with gcc/g++ 10\n\nadd_executable(Tensor_Lib main.cpp)\n\ntarget_link_libraries(Tensor_Lib range_v3) #same code in CLION CMakeLists.txt\n\n\nset(CPACK_PROJECT_NAME ${PROJECT_NAME})\nset(CPACK_PROJECT_VERSION ${PROJECT_VERSION})\ninclude(CPack)\n</code></pre>\n\n<p>Another CMakeList.txt version that doesn't work:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.0.0)\n\nproject(Tensor_Lib VERSION 0.0.1)\n\ninclude(CTest)\nenable_testing()\n\nset(RANGES_DIRECTORY /home/name/Libraries/range-v3/range-v3-master/include)\n\nset(HEADER_FILES ${RANGES_DIRECTORY}/range/v3/view/iota.hpp)\n\nadd_executable(Tensor_Lib main.cpp ${HEADER_FILES})\n\ntarget_include_directories(Tensor_Lib INTERFACE ${RANGES_DIRECTORY})\n\n\nset(CPACK_PROJECT_NAME ${PROJECT_NAME})\nset(CPACK_PROJECT_VERSION ${PROJECT_VERSION})\ninclude(CPack)\n</code></pre>\n"}, {"tags": ["c++", "regex"], "comments": [{"owner": {"reputation": 6953, "user_id": 4541045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdfffa01cff641ad93fa459b26d3cdb4?s=128&d=identicon&r=PG&f=1", "display_name": "ti7", "link": "https://stackoverflow.com/users/4541045/ti7"}, "edited": false, "score": 0, "creation_date": 1575473219, "post_id": 59179300, "comment_id": 104579819, "body": "The start and end of string match are probably what&#39;s tripping up your regex. Unusual to suggest links, but take a look at <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101.com</a>, which is a terrific regex building tool."}], "answers": [{"tags": [], "owner": {"reputation": 2138, "user_id": 1919896, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7da069e9930c3bdcc9b7af581c0de4eb?s=128&d=identicon&r=PG", "display_name": "Icarus3", "link": "https://stackoverflow.com/users/1919896/icarus3"}, "is_accepted": false, "score": 0, "last_activity_date": 1575482332, "creation_date": 1575482332, "answer_id": 59182168, "question_id": 59179300, "link": "https://stackoverflow.com/questions/59179300/get-sentences-with-regular-expressions-in-c/59182168#59182168", "title": "Get sentences with regular expressions in c++", "body": "<p>Apart from start and end of the string in regex, you are forgetting to update the 's' with the suffix.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;regex&gt;\n\nint main()\n{\n    std::string s (\"Hello world! My name is Mike. Why so serious?\");\n    std::smatch m;\n    std::regex e (\"\\\\s?[A-Za-z,;'\\\"\\\\s]+[.?!]\");\n\n    while(std::regex_search (s,m,e))\n    {\n            std::cout &lt;&lt; m.str() &lt;&lt; \"\\n\" ;\n            s = m.suffix();\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12480672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5aa5624508a55f8fd87b422fc033cd1?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/12480672/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575482332, "creation_date": 1575472948, "question_id": 59179300, "link": "https://stackoverflow.com/questions/59179300/get-sentences-with-regular-expressions-in-c", "title": "Get sentences with regular expressions in c++", "body": "<p>I need to get sentences with regex from String with word \"walk\". Now I am trying just to get sentences</p>\n\n<pre><code>std::string s (\"Hello world! My name is Mike. Why so serious?\");\nstd::smatch m;\nstd::regex e (\"^\\\\s+[A-Za-z,;'\\\"\\\\s]+[.?!]$\");   // matches words beginning by \"sub\"\n\nwhile (std::regex_search (s,m,e)) {\n    for (auto w:m)\n        std::cout &lt;&lt; w &lt;&lt; \"\\n\" ;\n}\n</code></pre>\n\n<p>And this doesn't work.</p>\n"}, {"tags": ["c++", "std-function", "const-correctness"], "comments": [{"owner": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1575473586, "post_id": 59179293, "comment_id": 104580025, "body": "@MaxLanghof No.....<code>std::function</code> has the equivalent to a <code>struct a{ std::any x; };</code> in it....."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1575473776, "post_id": 59179293, "comment_id": 104580140, "body": "Here is a small snippet of the internals of the MSVC <code>std::function</code> implementation: <a href=\"https://i.stack.imgur.com/eNenN.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/eNenN.png</a> where <code>using _Ptrt = _Func_base&lt;_Ret, _Types...&gt;</code>. I rest my case."}], "answers": [{"comments": [{"owner": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "edited": false, "score": 0, "creation_date": 1575473919, "post_id": 59179593, "comment_id": 104580237, "body": "Yup.....that actually makes a lot of sense.....still confusing at first glance though"}, {"owner": {"reputation": 13842, "user_id": 759253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0136e90dfd678a82c1dbba77dcbfc28e?s=128&d=identicon&r=PG", "display_name": "Igor R.", "link": "https://stackoverflow.com/users/759253/igor-r"}, "edited": false, "score": 0, "creation_date": 1575474594, "post_id": 59179593, "comment_id": 104580683, "body": "I believe it&#39;s a design flaw. This indirection should be an implementation detail transparent to the user, and the constness could be propagated using some metaprogramming."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 13842, "user_id": 759253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0136e90dfd678a82c1dbba77dcbfc28e?s=128&d=identicon&r=PG", "display_name": "Igor R.", "link": "https://stackoverflow.com/users/759253/igor-r"}, "edited": false, "score": 0, "creation_date": 1575475657, "post_id": 59179593, "comment_id": 104581351, "body": "@IgorR. Yes, the constness could be propagated. <code>std::vector</code> does this, <code>std::unique_ptr</code> doesn&#39;t. I feel <code>std::function</code> is not really about expressing invariants of the functor state though. Maybe we could repurpose abominable function types (i.e. <code>std::function&lt;int() const&gt;</code>) to distinguish?"}, {"owner": {"reputation": 13842, "user_id": 759253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0136e90dfd678a82c1dbba77dcbfc28e?s=128&d=identicon&r=PG", "display_name": "Igor R.", "link": "https://stackoverflow.com/users/759253/igor-r"}, "edited": false, "score": 0, "creation_date": 1575477668, "post_id": 59179593, "comment_id": 104582536, "body": "<code>unique_ptr</code> should not propagate constness, as the regular pointer does not. And <code>std::function&lt;int() const&gt;</code> wouldn&#39;t compile."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 13842, "user_id": 759253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0136e90dfd678a82c1dbba77dcbfc28e?s=128&d=identicon&r=PG", "display_name": "Igor R.", "link": "https://stackoverflow.com/users/759253/igor-r"}, "edited": false, "score": 1, "creation_date": 1575478717, "post_id": 59179593, "comment_id": 104583163, "body": "@IgorR. I know. My point was that some parts of the standard library do it and some others don&#39;t. Which category <code>std::function</code> should fall into is not clear to me. And the <code>std::function&lt;int() const&gt;</code> was a hypothetical - of course it doesn&#39;t compile now, but would it satisfy e.g. the OP here if that could be made valid, expressing &quot;can only be assigned functors with a <code>operator() const</code> (or stateless ones)&quot;? (even if behind the scenes that would be quite atrocious, due to using abominable function types)?"}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 4, "last_activity_date": 1575474184, "last_edit_date": 1575474184, "creation_date": 1575473846, "answer_id": 59179593, "question_id": 59179293, "link": "https://stackoverflow.com/questions/59179293/stdfunction-const-correctness/59179593#59179593", "title": "std::function const correctness", "body": "<p>This boils down to the same as <code>struct A { int* x; };</code>, where in a <code>const A a;</code> you can modify <em>the value</em> of <code>*(a.x)</code> (but not where it points to). There is a level of indirection in <code>std::function</code> (from the type erasure) through which <code>const</code> is not propagated.</p>\n\n<p>And no, <code>std::function&lt;int()&gt; const&amp; f</code> is not pointless. In a <code>std::function&lt;int()&gt;&amp; f</code> you would be able to assign a different functor to <code>f</code>, which you cannot do in the <code>const</code> case.</p>\n"}], "owner": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 4, "accepted_answer_id": 59179593, "answer_count": 1, "score": 11, "last_activity_date": 1575474184, "creation_date": 1575472914, "question_id": 59179293, "link": "https://stackoverflow.com/questions/59179293/stdfunction-const-correctness", "title": "std::function const correctness", "body": "<p>Suppose I have a callable type like so:</p>\n\n<pre><code>struct mutable_callable\n{\n    int my_mutable = 0;\n    int operator()() { // Not const\n        return my_mutable++;\n    }\n};\n</code></pre>\n\n<p>Note that <code>mutable_callable</code> has a non-const <code>operator()</code> that modifies a member variable.....</p>\n\n<p>Now suppose I create a <code>std::function</code> out of my type:</p>\n\n<pre><code>std::function&lt;int()&gt; foo = mutable_callable{};\n</code></pre>\n\n<p>Now I can do this:</p>\n\n<pre><code>void invoke(std::function&lt;int()&gt; const&amp; z)\n{\n    z();\n}\n\nint main()\n{\n    invoke(foo); // foo changed.....oops\n}\n</code></pre>\n\n<p>Now as far as I can tell <code>std::function</code>s <code>operator()</code> is <code>const</code> as per:\n<a href=\"https://en.cppreference.com/w/cpp/utility/functional/function/operator()\" rel=\"noreferrer\">https://en.cppreference.com/w/cpp/utility/functional/function/operator()</a></p>\n\n<p>So my gut feeling is that you shouldn't be able to do this.....</p>\n\n<p>But then looking at:\n<a href=\"https://en.cppreference.com/w/cpp/utility/functional/function/function\" rel=\"noreferrer\">https://en.cppreference.com/w/cpp/utility/functional/function/function</a></p>\n\n<p>This doesn't seem to put any constraints on whether or not the callable type has a constant <code>operator()</code>......</p>\n\n<p>So my question is this: I am correct in assuming that <code>std::function&lt;int()&gt; const&amp;</code> is essentially the same thing as <code>std::function&lt;int()&gt;&amp;</code> that is there is no actually difference between the behavior of the two......and if that is the case why is it not <code>const</code> correct?</p>\n"}, {"tags": ["c++", "debugging", "gdb"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1575473604, "post_id": 59179126, "comment_id": 104580036, "body": "Offset from start of function? Purely a guess."}], "answers": [{"tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 1, "last_activity_date": 1575557944, "last_edit_date": 1575557944, "creation_date": 1575510399, "answer_id": 59187044, "question_id": 59179126, "link": "https://stackoverflow.com/questions/59179126/understanding-gdb-syntax-for-c-program/59187044#59187044", "title": "Understanding GDB syntax for C++ program", "body": "<blockquote>\n  <p>What does that number means in relation to the function?</p>\n</blockquote>\n\n<p>It means that at location <code>$rsp+24</code> GDB found a value which <em>looks</em> like an address that points 662 bytes inside the code for <code>Class_Name::Foo()</code>.</p>\n\n<p>It could be a coincidence, or it could be that that address was pushed onto the stack (e.g. because <code>Foo()</code> called some other function).</p>\n\n<p>Using <code>x/i '&amp;Class_Name::Foo(Data_Type const&amp;)+662-5</code> may show that there is a <code>CALL</code> instruction at that address, which would be a strong indication that this is not just a random coincidence.</p>\n"}], "owner": {"reputation": 239, "user_id": 5005269, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8accd926c6ec5d9e6aed6a1085717361?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Phan", "link": "https://stackoverflow.com/users/5005269/thomas-phan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "accepted_answer_id": 59187044, "answer_count": 1, "score": 4, "last_activity_date": 1575559206, "creation_date": 1575472425, "last_edit_date": 1575559206, "question_id": 59179126, "link": "https://stackoverflow.com/questions/59179126/understanding-gdb-syntax-for-c-program", "title": "Understanding GDB syntax for C++ program", "body": "<p>After performing the command <code>x/64ga $rsp</code>, I get this as one of the line output:</p>\n\n<pre><code>&lt;Hex-addr-val&gt; &lt;Hex-addr-val&gt; &lt;Hex-addr-val&gt; &lt;Class_Name::Foo(Data_Type const&amp;)+662&gt;\n</code></pre>\n\n<p>So I understand everything on that line excepts for the '+662' part at the end. What does that number means in relation to the function? Is it a positive value at the time of crash? Or something else?</p>\n"}, {"tags": ["c++", "valgrind", "massif"], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 1, "last_activity_date": 1575472730, "creation_date": 1575472730, "answer_id": 59179240, "question_id": 59179072, "link": "https://stackoverflow.com/questions/59179072/massif-visualizer-for-profiling-multiple-data-structures/59179240#59179240", "title": "massif-visualizer for profiling multiple data structures", "body": "<p>There <em>is</em> a seesaw in that graph.</p>\n\n<p>The green dwindles to nothing and gives way to the blue.</p>\n\n<p>It's just hard to spot because the bulk of heap usage (in orange) is taken up by overheads (standard library etc.) and this is dwarfing the memory taken by your containers.</p>\n"}], "owner": {"reputation": 949, "user_id": 1015315, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/acc5cfe18423f43ae9692a71c4dea156?s=128&d=identicon&r=PG", "display_name": "Ilonpilaaja", "link": "https://stackoverflow.com/users/1015315/ilonpilaaja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 59179240, "answer_count": 1, "score": 0, "last_activity_date": 1575472730, "creation_date": 1575472241, "question_id": 59179072, "link": "https://stackoverflow.com/questions/59179072/massif-visualizer-for-profiling-multiple-data-structures", "title": "massif-visualizer for profiling multiple data structures", "body": "<p>This is, I guess, a pretty common scenario for anyone doing performance studies.\nSuppose one has a few data structures, and would like to evaluate their space performance --\nwithout counting using e.g. <code>sizeof</code> but rather in an empirical way.\nI model this situation in an MWE as follows:</p>\n\n<ul>\n<li>there is an STL <code>stack&lt;in&gt;</code> and there is a <code>set&lt;int&gt;</code>  </li>\n<li>first I create\nthe stack and push some (random) numbers into it </li>\n<li>I delete the stack,\nand push some numbers into the set </li>\n<li>I run <code>valgrind --tool-massif\n--max-steps=1000 --time-unit=ms main</code> </li>\n<li>finally, I visualize using the eponymous `massif-visualizer'</li>\n</ul>\n\n<p>The code:</p>\n\n<pre><code>#include &lt;set&gt;\n#include &lt;stack&gt;\n#include &lt;random&gt;\n#include &lt;memory&gt;\n#include &lt;functional&gt;\nusing namespace std;\n\nconst int n= 42;\nstd::default_random_engine engine;\nstd::uniform_int_distribution&lt;int&gt; distribution(0,n-1);\n\nint main() {\n    unique_ptr&lt;stack&lt;int&gt;&gt; stck;\n    unique_ptr&lt;set&lt;int&gt;&gt; st;\n\n    auto dice= bind(distribution,engine);\n\n    {\n        // first try the stack\n        stck = make_unique&lt;stack&lt;int&gt;&gt;();\n        for (auto i = 0; i &lt; 0x420; ++i)\n            stck-&gt;push(dice());\n        stck.reset();\n    }\n    {\n        // then try the set\n        st= make_unique&lt;set&lt;int&gt;&gt;();\n        for (auto i = 0; i &lt; 0x420; ++i)\n            st-&gt;insert(dice());\n        st.reset();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The image:\n<a href=\"https://i.stack.imgur.com/ttKDa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ttKDa.png\" alt=\"enter image description here\"></a></p>\n\n<p>I can see a clear divide when the stack->set transition occurs.\nHowever, the memory is not fully released, it seems -- one intuitively (and maybe naively) would expect some \"seesaw\" image. How do we achieve this effect? I presumed that <code>.reset()</code> woul call the stack's destructor. I guess it does, since on the right half of the image the tooltips talk\nof <code>Rb_tree</code> (i.e. the <code>set&lt;&gt;</code>) only. My question is, which switch in <code>massif</code> tool or what sort of arrangement in my code would produce a more \"intuitive-looking\" image?\nOf course, I could write the same boilerplate code for each data structure I test, but I would like to juxtapose them so that their memory performance is easily comparable.</p>\n"}, {"tags": ["c++", "opengl", "glut", "opengl-compat"], "comments": [{"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1575473053, "post_id": 59178994, "comment_id": 104579741, "body": "You can&#39;t load a &quot;.png&quot; file like that! <code>fread</code> just reads the <a href=\"https://en.wikipedia.org/wiki/Portable_Network_Graphics\" rel=\"nofollow noreferrer\">PNG</a> but doesn&#39;t decode it. I recommend to use a library like <a href=\"https://stb.handmade.network/\" rel=\"nofollow noreferrer\">STB</a>. See <a href=\"https://stackoverflow.com/questions/12518111/how-to-load-a-bmp-on-glut-to-use-it-as-a-texture/50641676#50641676\">How to load a bmp on GLUT to use it as a texture?</a>"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1575544242, "post_id": 59178994, "comment_id": 104606088, "body": "You need to bind the texture, enable texturing (fixed function pipeline) or use a shader that does texturing (shader pipeline), and draw some shape like a quad. Don&#39;t forget the shape you draw needs texture coordinates."}], "answers": [{"comments": [{"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1575473092, "post_id": 59179312, "comment_id": 104579768, "body": "No, it is not is loaded correctly, because it is a png file. The png file is read but it is not decoded."}, {"owner": {"reputation": 11, "user_id": 12480527, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_0y9Y-zpXLA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcZb2Ex77I4h2N2adeyNPHPwHzy1A/photo.jpg?sz=128", "display_name": "Hurrairah Nasir", "link": "https://stackoverflow.com/users/12480527/hurrairah-nasir"}, "edited": false, "score": 0, "creation_date": 1575473116, "post_id": 59179312, "comment_id": 104579775, "body": "i have used soil before but my problem is not with loading the texture. its with displaying it. i dont know how to do that. i just want the source code. i dont want to get into too much detail of opengl. just want to display an image on the screen."}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 11, "user_id": 12480527, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_0y9Y-zpXLA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcZb2Ex77I4h2N2adeyNPHPwHzy1A/photo.jpg?sz=128", "display_name": "Hurrairah Nasir", "link": "https://stackoverflow.com/users/12480527/hurrairah-nasir"}, "edited": false, "score": 0, "creation_date": 1575473333, "post_id": 59179312, "comment_id": 104579879, "body": "@HurrairahNasir <i>&quot;i dont want to get into too much detail of opengl.&quot;</i> - you have to. There is no &quot;short&quot; solution (except <a href=\"https://www.khronos.org/opengl/wiki/Legacy_OpenGL\" rel=\"nofollow noreferrer\">Legacy OpenGL</a>  - <code>glBegin</code>/<code>glEnd</code> sequence). Read a tutorial e.g. <a href=\"https://learnopengl.com/Getting-started/Textures\" rel=\"nofollow noreferrer\">LearnOpenGL - Textures</a>."}, {"owner": {"reputation": 19, "user_id": 12337361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c79d981d90a27ae07c34dd5c38b3555?s=128&d=identicon&r=PG&f=1", "display_name": "ich.", "link": "https://stackoverflow.com/users/12337361/ich"}, "edited": false, "score": 0, "creation_date": 1575475401, "post_id": 59179312, "comment_id": 104581194, "body": "I will give you example Code when i am home. Though understanding in necessary, when Working With OpenGL. You can use it as Basis but i highly recommend going through a Tutorial and learning the basics"}], "tags": [], "owner": {"reputation": 19, "user_id": 12337361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c79d981d90a27ae07c34dd5c38b3555?s=128&d=identicon&r=PG&f=1", "display_name": "ich.", "link": "https://stackoverflow.com/users/12337361/ich"}, "is_accepted": false, "score": -1, "last_activity_date": 1575472977, "creation_date": 1575472977, "answer_id": 59179312, "question_id": 59178994, "link": "https://stackoverflow.com/questions/59178994/how-to-display-a-loaded-texture-on-the-screen-using-opengl/59179312#59179312", "title": "How to display a loaded texture on the screen using openGL", "body": "<p>If your Texture is loaded correctly, what you need is a shader pipeline containing a Vertex shader and a Fragment shader. Then you can Render a rectangle and apply the Texture in the Fragment shader Stage.</p>\n\n<p>Btw. SOIL is great lib for <strong>loading</strong> textures</p>\n"}], "owner": {"reputation": 11, "user_id": 12480527, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_0y9Y-zpXLA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcZb2Ex77I4h2N2adeyNPHPwHzy1A/photo.jpg?sz=128", "display_name": "Hurrairah Nasir", "link": "https://stackoverflow.com/users/12480527/hurrairah-nasir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 266, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1575472977, "creation_date": 1575471955, "last_edit_date": 1575472671, "question_id": 59178994, "link": "https://stackoverflow.com/questions/59178994/how-to-display-a-loaded-texture-on-the-screen-using-opengl", "title": "How to display a loaded texture on the screen using openGL", "body": "<p>I am using the function :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>GLuint LoadTexture(const char* filename)\n{\n\n    GLuint texture;\n\n    int width, height;\n\n    unsigned char* data;\n\n    FILE* file;\n\n    file = fopen(filename, \"rb\");\n\n    if (file == NULL) return 0;\n    width = 1024;\n    height = 512;\n    data = (unsigned char*)malloc(width * height * 3);\n    //int size = fseek(file,);\n    fread(data, width * height * 3, 1, file);\n    fclose(file);\n\n    for (int i = 0; i &lt; width * height; ++i)\n    {\n        int index = i * 3;\n        unsigned char B, R;\n        B = data[index];\n        R = data[index + 2];\n\n        data[index] = R;\n        data[index + 2] = B;\n\n    }\n\n\n    glGenTextures(1, &amp;texture);\n    glBindTexture(GL_TEXTURE_2D, texture);\n    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_NEAREST);\n\n\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);\n    gluBuild2DMipmaps(GL_TEXTURE_2D, 3, width, height, GL_RGB, GL_UNSIGNED_BYTE, data);\n    free(data);\n\n    return texture;\n}\n</code></pre>\n\n<p>in <code>display()</code> function :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>GLuint texture;\ntexture = LoadTexture(\"bubble.png\");\nglBindTexture(GL_TEXTURE_2D, texture);\n</code></pre>\n\n<p>how do i make the texture appear on the screen? what do i need to do after i have binded the texture?</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1575472030, "post_id": 59178871, "comment_id": 104579194, "body": "I am not sure what your problem is, i.e. your classes/intentions are convoluted and fuzzy, but when locking a conditional variable, the held mutex for it gets unlocked when initiating the waiting."}, {"owner": {"reputation": 399, "user_id": 4994952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f350d9aaf9ee9b4c504db27f73a55660?s=128&d=identicon&r=PG&f=1", "display_name": "Itsbananas", "link": "https://stackoverflow.com/users/4994952/itsbananas"}, "reply_to_user": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1575473745, "post_id": 59178871, "comment_id": 104580118, "body": "The streaming system is represented by a singleton Loader. This object uses a Reader object that launches a thread to read files from the disk while the main thread runs the game loop. My problem is to write code that stops and start the reading thread."}], "answers": [{"comments": [{"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1575472810, "post_id": 59179051, "comment_id": 104579608, "body": "You want to take the lock outside the loop. That way, the value is checked under the lock. You can use the predicate version to do it all in one go: <code>unique_lock&lt;std::mutex&gt; lock(myMutex); condVar.wait(lock, [] { return value != 0; });</code>"}], "tags": [], "owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "is_accepted": false, "score": 0, "last_activity_date": 1575479779, "last_edit_date": 1575479779, "creation_date": 1575472138, "answer_id": 59179051, "question_id": 59178871, "link": "https://stackoverflow.com/questions/59178871/keeping-a-thread-locked-a-long-time/59179051#59179051", "title": "Keeping a thread locked a long time", "body": "<p>Your code is good. This is my standard code for waiting on a value:</p>\n\n<pre><code>void\nWaitCondition::wait() {\n    unique_lock&lt;std::mutex&gt; lock(myMutex);\n    while (!value) {\n        condVar.wait(lock);\n    }\n}\n</code></pre>\n\n<p>Waiting on the condVar actually frees the lock until the wait completes. So you're good.</p>\n\n<p>(Edited with suggestion from Raymond.)</p>\n"}, {"comments": [{"owner": {"reputation": 399, "user_id": 4994952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f350d9aaf9ee9b4c504db27f73a55660?s=128&d=identicon&r=PG&f=1", "display_name": "Itsbananas", "link": "https://stackoverflow.com/users/4994952/itsbananas"}, "edited": false, "score": 0, "creation_date": 1575473558, "post_id": 59179257, "comment_id": 104580014, "body": "That&#39;s what I understood whe I read about condition variables yes. My problem is that I&#39;m not sure if my code has any problem."}, {"owner": {"reputation": 399, "user_id": 4994952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f350d9aaf9ee9b4c504db27f73a55660?s=128&d=identicon&r=PG&f=1", "display_name": "Itsbananas", "link": "https://stackoverflow.com/users/4994952/itsbananas"}, "edited": false, "score": 0, "creation_date": 1575478745, "post_id": 59179257, "comment_id": 104583181, "body": "I added the definition for the function void Loader::RequestToLoadRegion(Region &amp;region) at the end. The mutex must be locked when the Reader has read all the files so that the reading thread only works when it has to."}, {"owner": {"reputation": 399, "user_id": 4994952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f350d9aaf9ee9b4c504db27f73a55660?s=128&d=identicon&r=PG&f=1", "display_name": "Itsbananas", "link": "https://stackoverflow.com/users/4994952/itsbananas"}, "edited": false, "score": 0, "creation_date": 1575479231, "post_id": 59179257, "comment_id": 104583474, "body": "I&#39;m wondering about using lock_guard or unique_lock. I do not want the reading thread to run when there are no files to read. But when it is blocked by wait(), I guess it will resume if and only if both the mutex isn&#39;t lock and the predicate returns true."}], "tags": [], "owner": {"reputation": 61707, "user_id": 5597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/014ef33a9f0e7e3ac5a12e7446d2d619?s=128&d=identicon&r=PG", "display_name": "Anthony Williams", "link": "https://stackoverflow.com/users/5597/anthony-williams"}, "is_accepted": false, "score": 2, "last_activity_date": 1575534925, "last_edit_date": 1575534925, "creation_date": 1575472786, "answer_id": 59179257, "question_id": 59178871, "link": "https://stackoverflow.com/questions/59178871/keeping-a-thread-locked-a-long-time/59179257#59179257", "title": "Keeping a thread locked a long time", "body": "<p><code>std::unique_lock</code> is very similar to <code>std::lock_guard</code>: it acquires the lock in the constructor and releases it in the destructor. The difference is that it provides additional facilities as well, one of which is that you can use it with <code>std::condition_variable::wait</code>.</p>\n\n<p>When you call <code>wait</code>, then the library marks the thread as waiting, and then unlocks the mutex and blocks. When the condition variable unblocks (either because of a call to <code>notify_one</code> or <code>notify_all</code> or spuriously), it then re-locks the mutex before the call to <code>wait</code> returns. Thus the mutex is locked both before and after the <code>wait</code> call, but not during the <code>wait</code> call.</p>\n\n<p>UPDATE:</p>\n\n<p><code>OnStartReading</code> locks the mutex directly, and has no corresponding unlock. This is really unusual: it means the mutex will be locked forever, from this point onwards.</p>\n\n<p>I would expect <code>onStartReading</code> to use <code>std::lock_guard</code> to lock the mutex, to ensure it is unlocked afterwards. If you need it to be locked for the whole of <code>ReadFiles</code>, then <code>OnStartReading</code> will need to use <code>unique_lock</code>, and return it, or <code>ReadFiles</code> moved into <code>OnStartReading</code>.</p>\n\n<p>FURTHER UPDATE:</p>\n\n<p>The more code is added, the worse this looks :(</p>\n\n<p><strong>You cannot lock a mutex in one thread and unlock it another.</strong></p>\n\n<p>As a general rule, you should <strong>never</strong> call <code>lock</code> or <code>unlock</code> on a mutex directly. If you can, just use <code>lock_guard</code>, and contain the lock to a single scope. If you need to use the lock with a condition variable wait, use <code>unique_lock</code>. If you <em>must</em> lock in one scope, and unlock in another, use <code>unique_lock</code> and pass it as a parameter as a return value.</p>\n\n<p>The call to <code>m_canReadCondVar.wait</code> will not return until either <code>m_canRead</code> is set, or <code>m_quit</code> is set, <em>and</em> it can acquire the mutex lock. If another thread holds the mutex (temporarily, because you should only hold the lock for a short time), then the wait cannot return.</p>\n\n<p><code>RequestToLoadRegion</code> is just wrong. It should set the flag, then unlock the mutex, not the other way round, otherwise there is a data race on <code>m_canRead</code>, and undefined behaviour. However, the mutex unlock here cannot pair with the lock in <code>OnStartReading</code> anyway unless they are in the same thread.</p>\n"}], "owner": {"reputation": 399, "user_id": 4994952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f350d9aaf9ee9b4c504db27f73a55660?s=128&d=identicon&r=PG&f=1", "display_name": "Itsbananas", "link": "https://stackoverflow.com/users/4994952/itsbananas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575534925, "creation_date": 1575471441, "last_edit_date": 1575478533, "question_id": 59178871, "link": "https://stackoverflow.com/questions/59178871/keeping-a-thread-locked-a-long-time", "title": "Keeping a thread locked a long time", "body": "<p>Edit 2: To be clear my problem is that I am struggling to write code to block and resume a thread to do some work (in this case, reading some files).</p>\n\n<p>Edit 3: Added the function definition for void Loader::RequestToLoadRegion(Region &amp;region).</p>\n\n<p>I want to create a basic streaming system in my game. I need a thread to read game files that will be blocked most of the time and awaken from time to time. Here is how my current design works.</p>\n\n<p>Everytime the player is approaching a region of the world that is not loaded in RAM,\n  the game sends a request to the (unique) Loader object to load this region (the Loader class represents the streaming system).\n  Each region has a list of files associated with it that will be read to create game data and load it into RAM.</p>\n\n<p>The loading is accomplished in two steps:</p>\n\n<ul>\n<li>Step 1: read all the files and push their content into a queue,</li>\n<li>Step 2: process the raw file data stored in this queue.</li>\n</ul>\n\n<p>The Loader object uses a Reader object to read all the files and push their content into the aforementioned queue. In the constructor of the Loader, the Reader object is constructed, which starts a thread that will be used to read the files. However, this reading thread will be blocked most of the time and only awaken by the Loader when this latter receives a request to load a new region.</p>\n\n<p>At the start of each frame, the Loader will be given control and checks its current state, either loading or not. If it is in the loading state, then it will try to access the queue protected by a mutex. If it gets an item from the queue it will process it and give control back to the game. The next item in the queue will be processed on the next frame and so on until the loading of the region is complete.</p>\n\n<p>I know how to implement this part using a mutex. However I have some troubles to keep to the reading thread blocked and to wake it when a loading request arrives. I've learnt how to use a std::condition_variable for a basic program and my current solution is the following:</p>\n\n<ul>\n<li>Upon creation of the Loader, it locks a mutex so that the reading thread stays blocked.</li>\n<li>When the game sends a request to the Loader, this latter sets a flag (m_canRead) of the Reader to true and call notify_one() with a condition variable to wake up the reading thread.</li>\n<li><p>When the reading thread is about to read the files, it calls m_loader.OnStartReading() so that the Loader locks the m_canReadMutex mutex. Then control goes back to the reader which reads the files.</p>\n\n<p>The biggest problem I have with this design is that I learnt that you usually lock a mutex for a short period of time and you usually use it with a std::lock_guard so that if an exception occurs the mutex will be unlocked.</p></li>\n</ul>\n\n<pre><code>// This is the function ran by the reading thread\n// m_readingThread = std::thread(&amp;Reader::Run, this);\nvoid Reader::Run() {\n  while (true) {\n    {\n      std::unique_lock&lt;std::mutex&gt; ul(m_canReadMutex);\n      m_canReadCondVar.wait(ul, [this](){ return m_quit || m_canRead; });\n      // Determine the cause of the wake up\n      if (m_quit) { // Does the game wants to quit? We break out of\n    break;      // the loop to reach the end of the Run() function\n      }             // that way we can join() the reading thread.\n\n      // If control reaches this line, it means the thread was awaken by\n      // a load request and can read. The closing bracket \"will run the destructtor\"\n      // of the std::unique_lock to unlock the mutex.\n    }\n\n    { // When control reaches this scope, it means m_canRead is true.\n      m_loader.OnStartReading(); // will lock the mutex m_canReadMutex\n      ReadFiles();\n    }\n  }// end-while (true)\n}// end-function void Run()\n\nvoid Reader::ReadFiles() {\n  /* Read all the files and push data into the queue */\n}\n\nvoid Loader::OnStartReading() {\n  m_canReadMutex.lock();\n}\n\n// This function unlocks the mutex and wake up the reading thread.\nvoid Loader::RequestToLoadRegion(Region &amp;region) {\n  /* Get the list of files associated to the region */\n  m_canReadMutex.unlock();\n  m_reader.m_canRead = true; // Set the flag so the predicate in the reader's wait() evaluates to true\n  m_canReadCondVar.notify_one(); // Wake up the reader thread\n}\n</code></pre>\n"}, {"tags": ["c++", "sockets", "websocket", "socket.io"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1575534320, "post_id": 59178725, "comment_id": 104601027, "body": "Does &quot;this function is being looped around&quot; mean that the <code>io</code> variable is being destroyed? That will kill the connection and any ongoing communication."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1575534690, "post_id": 59178725, "comment_id": 104601206, "body": "Furthermore: it is unclear from your question if you want <i>one</i> invocation at any given moment or have several connections in parallel. Also, why is &quot;this function being looped&quot;? Wouldn&#39;t it be better to keep the connection open and <code>emit</code> keys as they occur?"}], "owner": {"reputation": 67, "user_id": 3113901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288d5a12052a980d3cd3b9ac7a24bc10?s=128&d=identicon&r=PG&f=1", "display_name": "user3113901", "link": "https://stackoverflow.com/users/3113901/user3113901"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575475159, "creation_date": 1575470969, "last_edit_date": 1575475159, "question_id": 59178725, "link": "https://stackoverflow.com/questions/59178725/socket-emit-inside-set-open-listener-doesnt-work-when-clear-con-listener-is-call", "title": "socket emit inside set_open_listener doesnt work when clear_con_listener is called", "body": "<p>This small portion of the code is inside a function, and this function is being looped around. While running it , it's emitting the data to the server once but after that, it doesn't go inside open listener to emit variable <strong>command</strong> </p>\n\n<pre><code>sio::client io;\nio.set_open_listener([&amp;]() {\n    io.socket()-&gt;emit(\"key\", command);\n    io.clear_con_listeners();\n\n});\nio.connect(\"http://127.0.0.1:8081\");\n</code></pre>\n\n<p>I am not able to emit the data 1st, how to make the listener emit first and then close it. Is there a way to do this like async-await in javascript.</p>\n"}, {"tags": ["c++", "esent", "extensible-storage-engine"], "answers": [{"tags": [], "owner": {"reputation": 401, "user_id": 1856025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IX0Eb.jpg?s=128&g=1", "display_name": "Martin Chisholm", "link": "https://stackoverflow.com/users/1856025/martin-chisholm"}, "is_accepted": false, "score": 0, "last_activity_date": 1576264405, "creation_date": 1576264405, "answer_id": 59328536, "question_id": 59178626, "link": "https://stackoverflow.com/questions/59178626/how-to-recover-es-database-using-jetapi-in-another-folder/59328536#59328536", "title": "How to recover ES database using JetAPI in another folder?", "body": "<ol>\n<li><p>No, you'll need to copy at least the database to another location. You can refer to the logs in the origin location. You can either use <code>JetInit3</code> and specify a Restore Map (the arguments can be a bit finicky to get right, though), or <code>eseutil -r</code>, using the <code>-l</code>, <code>-s</code>, and <code>-d</code> options to specify the log file path, system path (checkpoint), and database path.</p></li>\n<li><p>The log files are absolutely necessary to get it to a clean state losslessly. If you want to get <em>something</em> out of it, then use <code>eseutil -p</code> (called \"rePair\", but it should really be \"salvage\"), which ruthlessly deletes data if there are any inconsistencies. It is designed with the premise of \"Something is better than nothing\", and it could easily result in a database that Exchange won't be able to do anything with. You may be lucky, or you may be unlucky. There are (used to be?) third party products that specialized in this sort of data recovery.</p></li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 12479021, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i8ms5boAGVg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcLXFxOjPwmPl9DFSEAsY_3od5p1A/photo.jpg?sz=128", "display_name": "Anatoly", "link": "https://stackoverflow.com/users/12479021/anatoly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576264405, "creation_date": 1575470658, "question_id": 59178626, "link": "https://stackoverflow.com/questions/59178626/how-to-recover-es-database-using-jetapi-in-another-folder", "title": "How to recover ES database using JetAPI in another folder?", "body": "<p>Help me, please!\nI have a database (Microsoft Exchange) in dirty shutdown (database, logs, checkpoint files) I can recover it using JetInit function, but it affects the original files. </p>\n\n<ol>\n<li>Is there a way to recover this base at some new location with JetAPI without changing original files, or if I have read-only access to them?</li>\n<li>Is there a way to bring the base to consistent state if there are no log files, but base is in ditry shutdown.</li>\n</ol>\n"}, {"tags": ["c++", "dependencies"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1575471048, "post_id": 59178513, "comment_id": 104578595, "body": "How would you implement <code>is_armadillo</code> when you might only use <code>Eigen</code> at some point? Is your plan to always include <i>all</i> the libraries?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1575471353, "post_id": 59178513, "comment_id": 104578789, "body": "In any case, both <code>Eigen</code> and <code>armadillo</code> are large complex libraries with non-trivial interfaces (same for presumably any other notable C++ matrix library). The core matrix types might have similar enough interfaces to more or less swap them out, but (as you already noticed with <code>norm</code>), the other functionality will differ quite a bit. And the difference will probably be more than superficial - maybe one library does an SVD in-place, the other one doesn&#39;t. You&#39;d have to sensibly wrap all such functionality yourself. That&#39;s no small task and I&#39;m not sure if it&#39;s feasible for a larger project."}, {"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1575471377, "post_id": 59178513, "comment_id": 104578801, "body": "@MaxLanghof Good point... It would be stupid to include Armadillo if I want to use Eigen... and then I would not be able to implement is_armadillo... unless I hardcode it, or let cmake generate that variable for me in function of which library is available."}, {"owner": {"reputation": 1096, "user_id": 1320299, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4eb10908b6f080f748a620f2c78b6270?s=128&d=identicon&r=PG", "display_name": "Chaosit", "link": "https://stackoverflow.com/users/1320299/chaosit"}, "edited": false, "score": 1, "creation_date": 1575471626, "post_id": 59178513, "comment_id": 104578963, "body": "You probably want to have a look into preprocessor flags (you will have to wrap the definition of <code>MatrixImplementation</code> with some <code>#ifdef</code>). Then you can set desired flags through the CMake configuration of your project like <code>-DMYPROJECT_MATRIX_LIB=eigen&#47;armadillo&#47;adhoc</code>. If you put <code>#ifdefs</code> around key definitions and dependencies - you will get the modular behavior. It is a pain in the neck to support this though..."}], "answers": [{"comments": [{"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1575472549, "post_id": 59179106, "comment_id": 104579487, "body": "But then every call to norm or whatever function would have an indirection if I understand what you mean. And I&#39;d prefer not to have that. In FEM, you can have millions of elements, and I need it to go really fast."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1575472790, "post_id": 59179106, "comment_id": 104579596, "body": "The interface of most matrix libraries is huge, and in many cases not even compatible on a syntactical level. Wrapping that would be a little more than &quot;a virtual base class&quot;. And at least <code>Eigen</code> is massively templated, which doesn&#39;t mix well with virtual methods."}], "tags": [], "owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "is_accepted": false, "score": 1, "last_activity_date": 1575472354, "creation_date": 1575472354, "answer_id": 59179106, "question_id": 59178513, "link": "https://stackoverflow.com/questions/59178513/switch-between-dependencies/59179106#59179106", "title": "Switch between dependencies", "body": "<p>I'm not familiar with either of those libraries, but they probably don't implement a common interface. Another approach would be to write a wrapper class that is simply a pass-through to the methods you use in Eigen, but have that implement an interface. Then if you try a new library, write a new wrapper class that implements the same interface. Then you can pick which wrapper to instantiate, and there rest of your code remains untouched.</p>\n\n<p>If you're not familiar with interfaces in C++ -- it's just a virtual base class. You can do a google of \"C++ Interface\" and get some good writeups.</p>\n\n<p>That's how I would do it.</p>\n"}, {"comments": [{"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1575533976, "post_id": 59179135, "comment_id": 104600880, "body": "I need very few things for dense matrices (determinant, transpose, initialization, ..., basic stuff). For sparse matrices, just write and invoke a solver. I think I won&#39;t have to implement too much. I thought you were going to propose an entire different way of doing this. It seems I&#39;m not headed the wrong direction then..."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 1, "last_activity_date": 1575472459, "creation_date": 1575472459, "answer_id": 59179135, "question_id": 59178513, "link": "https://stackoverflow.com/questions/59178513/switch-between-dependencies/59179135#59179135", "title": "Switch between dependencies", "body": "<p>Both <code>Eigen</code> and <code>armadillo</code> are large complex libraries with non-trivial interfaces (same for presumably any other notable C++ matrix library). Each one presumably has its own pitfalls and idiosyncrasies, and beyond basic syntax they will most certainly have plenty of incompatibilities.</p>\n\n<p>So before delving into the specifics of how to do this, I would first take a deep look at whether this is feasible in the first place.</p>\n\n<ul>\n<li><p>Do you want to write a few hundred lines of code that mainly does vanilla matrix handling (say, multiplication) which should work more or less the same in any C++ matrix library? Sounds doable.</p></li>\n<li><p>Are you planning this project to have thousands of lines of code that deeply interface with specialized matrix functionality (slicing? decompositions? reordering? you will probably want sparse matrices/algorithms?)? Do all those features even exist in each library? Do they use even remotely the same data structures? Does the syntax vary wildly? Do functions take completely different argument? I foresee a painful future for you in this case.</p></li>\n</ul>\n\n<p>I would first of all recommend keeping your set of supported libraries closed. Define which libraries you want to support as early as possible. Then iterate on conceptual pieces of your solver algorithms and verify that everything you need is present in all the libraries. If you want your code to work with all of them, you have to develop against all of them. You can initially do this using preprocessor switches like</p>\n\n<pre><code>#ifdef USE_EIGEN\n  // Do the matrix decomposition in one way.\n#else\n  // Do the matrix decomposition in some other way.\n#endif\n</code></pre>\n\n<p>and then refactor these blocks into (essentially) wrapper functions or classes as you go.</p>\n\n<p>It would also pay to be familiar with the different libraries ahead of time (ties in with everything above). You don't want to find out halfway through the project that library <code>X</code> has sparse matrices but no meaningful algorithms to actually operate on them!</p>\n\n<p>The code snippets you show look mostly reasonable, except you will likely have to substitute some parts for preprocessor flags. But compared to the challenges you will most likely face (and given that you seem comfortable with type aliases and templates in general) I don't think these things are what you should worry about for now...</p>\n"}], "owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1575474859, "creation_date": 1575470320, "last_edit_date": 1575474859, "question_id": 59178513, "link": "https://stackoverflow.com/questions/59178513/switch-between-dependencies", "title": "Switch between dependencies", "body": "<p>I have a code which solves differential equations by means of the finite element method. To that end, I use Eigen so I don't have to implement matrices by myself. Now, in the future, I would like to try the same code with another library, like Armadillo. I would like to be able to switch easily between the libraries.</p>\n\n<p>I am new to this, and my question is basically if the following is good practice. In an attempt to make my code work for any matrix library, I define the types <code>DataType</code> and <code>MatrixImplementation</code> in a header. The latter is the one which should determine whether to use one library or the other.</p>\n\n<pre><code>// data type\nusing DataType = double;\n\n// matrix implementation\ntemplate &lt;typename TYPE = DataType, size_t ROWS = 1, size_t COLS = 1&gt;\nusing MatrixImplementation = Eigen::Matrix&lt;DataType, ROWS, COLS&gt;;\n</code></pre>\n\n<p>I can then check whether or not Eigen is used like this:</p>\n\n<pre><code>// check which matrix implementation\nconstexpr static bool is_eigen = std::is_same&lt;MatrixImplementation&lt;DataType, 1, 1&gt;,Eigen::Matrix&lt;DataType, 1, 1&gt;&gt;::value;\n</code></pre>\n\n<p>I can now define the <code>IndexType</code> (typically <code>size_t</code> or <code>unsigned int</code>) to access the elements of a vector or matrix as follows:</p>\n\n<pre><code>// index type\nusing IndexType = std::conditional_t&lt;is_eigen, Eigen::Index,\n                  std::conditional_t&lt;is_armadillo, ..., \n                  std::conditional_t&lt;is_***, ..., \n                  ...&gt;;\n</code></pre>\n\n<p>Likewise, I can define the <code>Matrix</code> type as follows:</p>\n\n<pre><code>// matrix type\ntemplate &lt;size_t ROWS, size_t COLS&gt;\nusing Matrix = std::conditional_t&lt;is_eigen, Eigen::Matrix&lt;DataType, ROWS, COLS&gt;, ...&gt;;\n</code></pre>\n\n<p>and so on. Furthermore, I would have to define the operations on the matrices (only those I need), for instance the norm:</p>\n\n<pre><code>template &lt;class Matrix&gt;\nconstexpr auto norm(const Matrix&amp; m)\n{\n    if constexpr (is_eigen)\n        return m.norm();\n    else if constexpr (is_armadillo)\n        return ...;\n    else\n        return 0.0;\n}\n</code></pre>\n\n<p>I would then calculate the norm as follows:</p>\n\n<pre><code>Matrix&lt;3,3&gt; my_matrix;\nauto norm_matrix = norm(my_matrix);\n</code></pre>\n\n<p>Is this the way to go? Or is there a better alternative, maybe some fancy design pattern I should consider?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Thanks to @MaxLanghof's comment: </p>\n\n<blockquote>\n  <p>How would you implement is_armadillo when you might only use Eigen at\n  some point? Is your plan to always include all the libraries?</p>\n</blockquote>\n\n<p>I now let CMake write which matrix library to use into a <code>config.h</code> file:</p>\n\n<pre><code>#define MATRIX_LIBRARY EIGEN // this value is written by cmake\n#define EIGEN 1\n#define ARMADILLO 2\n</code></pre>\n\n<p>Now, I can determine if the code is going to use Eigen or Armadillo as follows:</p>\n\n<pre><code>#if MATRIX_LIBRARY == EIGEN\nconstexpr static bool is_eigen = true;\n#else\nconstexpr static bool is_eigen = false;\n#endif\n#if MATRIX_LIBRARY == ARMADILLO\nconstexpr static bool is_armadillo = true;\n#else\nconstexpr static bool is_armadillo = false;\n#endif\n</code></pre>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1575471285, "post_id": 59178491, "comment_id": 104578748, "body": "Build the new string from scratch instead of trying to manipulate the existing string.  Every call to <code>insert</code> invokes a copy operation on your string, thus making this approach (more than likely) slower than just building a new string."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 12367469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCwBY7KLWryf4tOvB5Nav1SNmY2gACKUhqXksQrQ=k-s128", "display_name": "Trollblod", "link": "https://stackoverflow.com/users/12367469/trollblod"}, "edited": false, "score": 0, "creation_date": 1575471167, "post_id": 59178752, "comment_id": 104578679, "body": "I tried doing this by adding &quot; decrypt.insert(decrypt[i].find(vowel[j]), 1, &#39;5&#39;);&quot; But that is not acceptable with the find syntax."}, {"owner": {"reputation": 182, "user_id": 2045380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHkVI.jpg?s=128&g=1", "display_name": "Bobby Tables", "link": "https://stackoverflow.com/users/2045380/bobby-tables"}, "reply_to_user": {"reputation": 27, "user_id": 12367469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCwBY7KLWryf4tOvB5Nav1SNmY2gACKUhqXksQrQ=k-s128", "display_name": "Trollblod", "link": "https://stackoverflow.com/users/12367469/trollblod"}, "edited": false, "score": 0, "creation_date": 1575471215, "post_id": 59178752, "comment_id": 104578707, "body": "find(vowel[j], start_pos) is the syntax you need. start_pos should be where you placed the last 5, which you would need to keep track of somewhere. But you can also do it more elegantly as @molbdnilo points out."}], "tags": [], "owner": {"reputation": 182, "user_id": 2045380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHkVI.jpg?s=128&g=1", "display_name": "Bobby Tables", "link": "https://stackoverflow.com/users/2045380/bobby-tables"}, "is_accepted": false, "score": 0, "last_activity_date": 1575471082, "creation_date": 1575471082, "answer_id": 59178752, "question_id": 59178491, "link": "https://stackoverflow.com/questions/59178491/add-character-at-every-vowel/59178752#59178752", "title": "Add character at every vowel", "body": "<p>Your <code>find</code> is stopping at the first instance of the vowel, 'o'. You should include a starting position for your find so you ignore the part of the decrypt string you've already analyzed.</p>\n"}, {"comments": [{"owner": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "edited": false, "score": 0, "creation_date": 1575471568, "post_id": 59178754, "comment_id": 104578938, "body": "@Mori I have switch encrypt and decrypt, as the original loop was over encrypt"}], "tags": [], "owner": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "is_accepted": true, "score": 0, "last_activity_date": 1575471738, "last_edit_date": 1575471738, "creation_date": 1575471090, "answer_id": 59178754, "question_id": 59178491, "link": "https://stackoverflow.com/questions/59178491/add-character-at-every-vowel/59178754#59178754", "title": "Add character at every vowel", "body": "<p><code>find</code> with one argument starts from the beginning. You would need the other <a href=\"https://www.geeksforgeeks.org/string-find-in-cpp/\" rel=\"nofollow noreferrer\">find</a>.</p>\n\n<p>However maintaing an index in decrypt, one no longer would need a find.</p>\n\n<pre><code>int encryptI = 0;\nfor (int i = 0; i &lt; decrypt.length(); i++, encyptI++){\n    for (int j=0; j&lt;vowel.length(); j++){\n        if (decrypt[i] == vowel[j]){\n                //encryptI = encrypt.find(vowel[j], encryptI);\n                encrypt.insert(encryptI, 1, '5');\n                encrypt.insert(encryptI + 1, +1, '5');\n                encryptI += 2;\n                break;\n        }\n    }\n}\n</code></pre>\n\n<p>The code could be nicer.</p>\n\n<pre><code>string encrypt;\nfor (int i = 0; i &lt; decrypt.length(); i++, decyptI++){\n    char ch = decrypt[i];\n    if (vowel.find(ch) != string::npos) {\n        encrypt.append('5');\n        encrypt.append(ch);\n        encrypt.append('5');\n    } else {\n        encrypt.append(ch);\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 12367469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCwBY7KLWryf4tOvB5Nav1SNmY2gACKUhqXksQrQ=k-s128", "display_name": "Trollblod", "link": "https://stackoverflow.com/users/12367469/trollblod"}, "edited": false, "score": 0, "creation_date": 1575474279, "post_id": 59178760, "comment_id": 104580469, "body": "Hmm, I&#39;m getting this error: undefined reference to `is_vowel(char)&#39; collect2.exe: error: ld returned 1 exit status"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 27, "user_id": 12367469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCwBY7KLWryf4tOvB5Nav1SNmY2gACKUhqXksQrQ=k-s128", "display_name": "Trollblod", "link": "https://stackoverflow.com/users/12367469/trollblod"}, "edited": false, "score": 0, "creation_date": 1575474324, "post_id": 59178760, "comment_id": 104580496, "body": "@Trollblod Because you didn&#39;t implement it."}, {"owner": {"reputation": 27, "user_id": 12367469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCwBY7KLWryf4tOvB5Nav1SNmY2gACKUhqXksQrQ=k-s128", "display_name": "Trollblod", "link": "https://stackoverflow.com/users/12367469/trollblod"}, "edited": false, "score": 0, "creation_date": 1575474551, "post_id": 59178760, "comment_id": 104580651, "body": "Oh right, won&#39;t it be able to have this working within a function? This is already my 3rd function (besides main). And the &quot;pASSWoRod&quot; is actually passed to this function as a return value from the one above. I wrote it as a separate string in here to make it easier to read.  Otherwise it&#39;s encrypt = password; (taken from the function previously)."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 27, "user_id": 12367469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCwBY7KLWryf4tOvB5Nav1SNmY2gACKUhqXksQrQ=k-s128", "display_name": "Trollblod", "link": "https://stackoverflow.com/users/12367469/trollblod"}, "edited": false, "score": 0, "creation_date": 1575526142, "post_id": 59178760, "comment_id": 104597934, "body": "@Trollblod Having several functions is rarely a problem, and three isn&#39;t exactly a lot. It&#39;s a far more common problem to have too few."}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 3, "last_activity_date": 1575474352, "last_edit_date": 1575474352, "creation_date": 1575471104, "answer_id": 59178760, "question_id": 59178491, "link": "https://stackoverflow.com/questions/59178491/add-character-at-every-vowel/59178760#59178760", "title": "Add character at every vowel", "body": "<p><code>find</code>, when not proved a starting point, always finds the first instance.</p>\n\n<p>Searching and keeping track of the string length and where you've already inserted characters is much harder than it seems at first glance (as you've noticed).</p>\n\n<p>Build the result from scratch instead of inserting characters into an initial string.</p>\n\n<p>Also, implement this function (actual implementation left as an exercise):</p>\n\n<pre><code>bool is_vowel(char c);\n</code></pre>\n\n<p>and then </p>\n\n<pre><code>std::string encrypt = \"pASSWoRod\";\nstd::string decrypt;\nfor (auto c: encrypt)\n{\n    if (is_vowel(c))\n    {\n        decrypt += '5';\n        decrypt += c;\n        decrypt += '5';\n    }\n    else\n    {\n        decrypt += c;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 12367469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCwBY7KLWryf4tOvB5Nav1SNmY2gACKUhqXksQrQ=k-s128", "display_name": "Trollblod", "link": "https://stackoverflow.com/users/12367469/trollblod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 59178754, "answer_count": 3, "score": 0, "last_activity_date": 1575474352, "creation_date": 1575470273, "last_edit_date": 1575470769, "question_id": 59178491, "link": "https://stackoverflow.com/questions/59178491/add-character-at-every-vowel", "title": "Add character at every vowel", "body": "<p>I had a similiar question earlier and managed to solve it. Now I'm trying to do it backwards, this is my code at the moment.</p>\n\n<p>Basically I want the end result to \"p5A5SSW5o5R5o5d\", but when I run this it just find the first \"o\" which is in the first part of passworod, I need it to skip the the vowel it have already added a 5 before and after to. </p>\n\n<p>I want every vowel (only included AOao in the current string as thats all the vowels appearing in my string), to have a 5 as prefix and suffix. It gets stuck at the first o and doesnt proceed to the next o. I have created a nested for loop which means it takes the first character in the encrypt-string, proceeds to the next for-loop and loops through every single vowel Ive included in the vowel string until it finds a match. Otherwise it restarts at the first for-loop but incremented by one. First go it should search the letter \"p\", second run it should search the letter \"A\" and so on. </p>\n\n<p>Result: p<strong>5</strong>A<strong>5</strong>SSW<strong>55</strong>o<strong>55</strong>rod</p>\n\n<p>Expected Result: p<strong>5</strong>A<strong>5</strong>SSW<strong>5</strong>o<strong>5</strong>R<strong>5</strong>o<strong>5</strong>d</p>\n\n<p>In the end I will also want to rotate all the characters, but thats for another task, I think I can just use either if-statement or a switch to do that. If it ends up on a 5, do nothing, otherwise rotate.</p>\n\n<p>I hope I made myself clear and provided you with all the relevant information, otherwise just holler in the comments.</p>\n\n<p>Thanks in advance.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;sstream&gt;\n\nconst string vowel = \"AOao\";\nstring encrypt, decrypt;\nencrypt = \"pASSWoRod\";\ndecrypt = encrypt;\n\n\n for (int i=0; i&lt;encrypt.length(); i++){\n        for (int j=0; j&lt;vowel.length(); j++){\n            if (encrypt[i] == vowel[j]){\n\n                    decrypt.insert(decrypt.find(vowel[j]), 1, '5');\n                    decrypt.insert(decrypt.find(vowel[j]) + 1, +1, '5');\n\n            }\n        }\n    }\n\nreturn decrypt;\n}\n\n\n</code></pre>\n"}, {"tags": ["c++", "qt", "qwt"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 10273198, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/feccd5bd958abcc90046e77493b1d078?s=128&d=identicon&r=PG", "display_name": "Uwe", "link": "https://stackoverflow.com/users/10273198/uwe"}, "is_accepted": false, "score": 0, "last_activity_date": 1577112031, "creation_date": 1577112031, "answer_id": 59457110, "question_id": 59178430, "link": "https://stackoverflow.com/questions/59178430/plot-a-spline-curve-on-a-cloud-of-points-using-qwt/59457110#59457110", "title": "Plot a spline curve on a cloud of points using Qwt", "body": "<p>spline interpolation does not work properly in Qwt 6.1, but when using Qwt >= 6.2 you find a complete new implementation of various spline interpolation/approximation algos.</p>\n"}], "owner": {"reputation": 636, "user_id": 2748928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ff8b42bfa46bf4aebf52c856918f3c?s=128&d=identicon&r=PG&f=1", "display_name": "Masthan", "link": "https://stackoverflow.com/users/2748928/masthan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577112031, "creation_date": 1575470088, "last_edit_date": 1575477583, "question_id": 59178430, "link": "https://stackoverflow.com/questions/59178430/plot-a-spline-curve-on-a-cloud-of-points-using-qwt", "title": "Plot a spline curve on a cloud of points using Qwt", "body": "<p>I have a set of points I want to plot a spline line along a group of points . I have written code </p>\n\n<pre><code>QwtSplineCurveFitter curveFitter;\nQPolygonF splinecurve = curveFitter.fitCurve(QPolygonF(whitepixels));\nstd::vector&lt;cv::Point2d&gt; polygonpoints ;\nwhile(iter != splinecurve.end())\n{\n    polygonpoints.push_back(cv::Point2d(iter-&gt;x(),iter-&gt;y()));\n    ++iter;\n}\nstd::vector&lt;cv::Point2d&gt;::iterator itr = polygonpoints.begin();\ncv::Point2d firstpoint;\ncv::Mat whitemask;\nwhitemask = cv::Scalar::all(255);\nwhile (itr != polygonpoints.end())\n{\n    if(*itr == polygonpoints.front())\n    {\n        firstpoint = *itr;\n    }\n    else\n    {\n        cv::line(img, firstpoint, *itr, cv::Scalar(0,255,0), 1);\n        firstpoint = *itr;\n    }\n    ++itr;\n}\ncv::imshow(\"newline\",whitemask);\ncv::waitKey(0);\n</code></pre>\n\n<p>But getting image like this. I want to draw a spline curve along the points \n<a href=\"https://i.stack.imgur.com/Xw1nO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xw1nO.png\" alt=\"enter image description here\"></a></p>\n\n<p>The points which are used to draw spline </p>\n\n<pre><code> x: 615 y:  807 \n\n x: 616 y:  808.41 \n\n x: 617 y:  805.848 \n\n x: 617.476 y:  808.845 \n\n x: 618 y:  810.786 \n\n x: 618.69 y:  806.306 \n\n x: 619 y:  811.735 \n\n x: 619.472 y:  811.043 \n\n x: 620 y:  808.69 \n\n x: 620.053 y:  820.387 \n\n x: 620.976 y:  802.451 \n\n x: 621 y:  815.143 \n\n x: 621.312 y:  817.39 \n\n x: 622 y:  806.102 \n\n x: 622 y:  819.597 \n\n x: 622.433 y:  815.76 \n\n x: 623 y:  806.559 \n\n x: 623 y:  820.054 \n\n x: 623.324 y:  820.59 \n\n x: 624 y:  807.018 \n\n x: 624 y:  820.511 \n\n x: 624.223 y:  825.097 \n\n x: 624.996 y:  807.633 \n\n x: 625 y:  820.969 \n\n x: 625.134 y:  829.079 \n\n x: 625.964 y:  809.359 \n\n x: 626 y:  821.426 \n\n x: 626.065 y:  832.334 \n\n x: 626.907 y:  812.125 \n\n x: 627 y:  821.883 \n\n x: 627.018 y:  834.659 \n\n x: 627.828 y:  815.731 \n\n x: 628 y:  822.34 \n\n x: 628 y:  835.853 \n\n x: 628.733 y:  819.973 \n\n x: 629 y:  822.797 \n\n x: 629 y:  836.287 \n\n x: 629.628 y:  824.65 \n\n x: 630 y:  823.254 \n\n x: 630 y:  836.748 \n\n x: 630.517 y:  829.559 \n\n x: 631 y:  823.712 \n\n x: 631 y:  837.205 \n\n x: 631.405 y:  834.499 \n\n x: 632 y:  824.167 \n\n x: 632 y:  837.663 \n\n x: 632.512 y:  832.728 \n\n x: 633 y:  828.623 \n\n x: 633 y:  842.115 \n\n x: 633.704 y:  830.236 \n\n x: 634 y:  833.077 \n\n x: 634.004 y:  846.392 \n\n x: 634.78 y:  828.835 \n\n x: 635 y:  833.534 \n\n x: 635 y:  847.03 \n\n x: 635.679 y:  833.33 \n\n x: 636 y:  833.991 \n\n x: 636 y:  847.487 \n\n x: 636.57 y:  838.153 \n\n x: 637 y:  834.448 \n\n x: 637 y:  847.943 \n\n x: 637.458 y:  843.103 \n\n x: 638 y:  834.905 \n\n x: 638 y:  848.4 \n\n x: 638.348 y:  847.978 \n\n x: 639 y:  835.37 \n\n x: 639 y:  848.857 \n\n x: 639.244 y:  852.575 \n\n x: 639.999 y:  835.857 \n\n x: 640 y:  849.314 \n\n x: 640.153 y:  856.692 \n\n x: 640.974 y:  837.322 \n\n x: 641 y:  849.771 \n\n x: 641.078 y:  860.127 \n\n x: 641.922 y:  839.874 \n\n x: 642 y:  850.228 \n\n x: 642.026 y:  862.678 \n\n x: 642.847 y:  843.309 \n\n x: 643 y:  850.685 \n\n x: 643 y:  864.188 \n\n x: 643.648 y:  850.43 \n\n x: 644 y:  849.144 \n\n x: 644 y:  862.63 \n\n x: 644.742 y:  849.385 \n\n x: 645 y:  853.598 \n\n x: 645.107 y:  863.678 \n\n x: 646.001 y:  848.526 \n\n x: 646 y:  862.052 \n\n x: 646.992 y:  849.718 \n\n x: 647 y:  862.998 \n\n x: 647.85 y:  850.968 \n\n x: 648 y:  859.953 \n\n x: 648.398 y:  861.506 \n\n x: 649 y:  856.908 \n\n x: 649.032 y:  869.454 \n\n x: 649.999 y:  853.898 \n\n x: 650 y:  867.356 \n\n x: 650.718 y:  859.282 \n\n x: 651 y:  864.312 \n\n x: 651.249 y:  870.318 \n\n x: 652 y:  861.267 \n\n x: 651.999 y:  874.79 \n\n x: 652.946 y:  859.858 \n\n x: 653 y:  871.715 \n\n x: 653.683 y:  867.426 \n\n x: 654 y:  872.665 \n\n x: 654.57 y:  871.304 \n\n x: 655 y:  873.614 \n\n x: 655.455 y:  875.27 \n\n x: 656 y:  874.564 \n\n x: 656.341 y:  879.18 \n\n x: 657 y:  875.514 \n\n x: 657.268 y:  882.567 \n\n x: 658 y:  878.46 \n\n x: 658.374 y:  882.964 \n\n x: 659 y:  881.407 \n\n x: 659.486 y:  883.224 \n\n x: 660 y:  884.353 \n\n x: 660.598 y:  883.469 \n\n x: 661 y:  887.3 \n\n x: 661.706 y:  883.82 \n\n x: 662 y:  890.246 \n\n x: 662.804 y:  884.401 \n\n x: 663 y:  893.193 \n\n x: 663.731 y:  887.64 \n\n x: 664 y:  894.142 \n\n x: 664.944 y:  886.823 \n\n x: 665.001 y:  899.056 \n\n x: 666 y:  892.53 \n\n x: 666.5 y:  896.003 \n\n x: 667 y:  899.466 \n\n x: 667.999 y:  892.941 \n\n x: 668.066 y:  905.083 \n\n x: 669 y:  899.85 \n\n x: 669.683 y:  899.643 \n\n x: 670 y:  906.787 \n\n x: 670.706 y:  901.904 \n\n x: 671 y:  907.738 \n\n x: 671.578 y:  906.169 \n\n x: 672 y:  908.687 \n\n x: 672.198 y:  916.227 \n\n x: 673 y:  905.64 \n\n x: 673 y:  919.137 \n\n x: 673.677 y:  909.588 \n\n x: 674 y:  912.095 \n\n x: 674.031 y:  924.539 \n\n x: 674.957 y:  906.531 \n\n x: 675 y:  918.547 \n\n x: 675.294 y:  922.023 \n\n x: 676 y:  911.504 \n\n x: 676 y:  925 \n\n x: 676.666 y:  915.826 \n\n x: 677 y:  917.959 \n\n x: 677.027 y:  930.549 \n\n x: 677.951 y:  912.574 \n\n x: 678 y:  924.411 \n\n x: 678.258 y:  928.6 \n\n x: 679 y:  915.38 \n\n x: 679 y:  928.866 \n\n x: 679.381 y:  927.129 \n\n x: 680 y:  915.831 \n\n x: 680 y:  929.323 \n\n x: 680.234 y:  932.522 \n\n x: 680.978 y:  913.248 \n\n x: 681 y:  925.782 \n\n x: 681.017 y:  938.614 \n\n x: 681.864 y:  919.905 \n\n x: 682 y:  928.238 \n\n x: 682.029 y:  940.629 \n\n x: 682.888 y:  921.449 \n\n x: 683 y:  930.694 \n\n x: 683 y:  944.197 \n\n x: 683.61 y:  930.819 \n\n x: 684 y:  927.153 \n\n x: 684 y:  940.647 \n\n x: 684.253 y:  943.009 \n\n x: 684.985 y:  924.28 \n\n x: 685 y:  937.107 \n\n x: 685.019 y:  949.752 \n\n x: 685.76 y:  930.657 \n\n x: 686 y:  933.566 \n\n x: 686 y:  947.06 \n\n x: 686.404 y:  942.782 \n\n x: 687 y:  930.026 \n\n x: 687 y:  943.52 \n\n x: 687.029 y:  955.759 \n\n x: 687.783 y:  936.037 \n\n x: 688 y:  939.979 \n\n x: 688 y:  953.473 \n\n x: 688.431 y:  948.002 \n\n x: 689 y:  936.445 \n\n x: 689 y:  949.932 \n\n x: 689.038 y:  961.602 \n\n x: 689.735 y:  941.623 \n\n x: 690 y:  942.394 \n\n x: 690 y:  955.888 \n\n x: 690.18 y:  960.719 \n\n x: 690.915 y:  938.953 \n\n x: 691 y:  948.349 \n\n x: 691 y:  961.843 \n\n x: 691.398 y:  956.202 \n\n x: 691.999 y:  940.844 \n\n x: 692 y:  954.304 \n\n x: 692.005 y:  967.546 \n\n x: 692.638 y:  950.669 \n\n x: 693 y:  946.766 \n\n x: 693 y:  960.26 \n\n x: 693.067 y:  970.425 \n\n x: 693.765 y:  948.972 \n\n x: 694 y:  950.722 \n\n x: 694 y:  964.216 \n\n x: 694.139 y:  970.774 \n\n x: 694.857 y:  948.345 \n\n x: 695 y:  954.678 \n\n x: 695 y:  968.172 \n\n x: 695.229 y:  970.19 \n\n x: 695.93 y:  948.636 \n\n x: 696 y:  958.634 \n\n x: 696 y:  972.128 \n\n x: 696.333 y:  968.942 \n\n x: 696.98 y:  950.114 \n\n x: 697 y:  962.59 \n\n x: 697 y:  976.071 \n\n x: 697.63 y:  960.575 \n\n x: 698 y:  957.05 \n\n x: 698 y:  970.545 \n\n x: 698.247 y:  973.171 \n\n x: 698.983 y:  954.262 \n\n x: 699 y:  967.004 \n\n x: 699.045 y:  978.604 \n\n x: 699.848 y:  958.341 \n\n x: 700 y:  965.462 \n\n x: 700 y:  978.962 \n\n x: 700.699 y:  963.064 \n\n x: 701 y:  963.921 \n\n x: 701 y:  977.409 \n\n x: 701.637 y:  965.425 \n\n x: 702 y:  964.378 \n\n x: 702 y:  977.867 \n\n x: 702.759 y:  964.02 \n\n x: 703 y:  968.832 \n\n x: 703.121 y:  978.461 \n\n x: 704 y:  963.775 \n\n x: 704 y:  977.277 \n\n x: 704.921 y:  964.968 \n\n x: 705 y:  976.235 \n\n x: 705.829 y:  968.156 \n\n x: 706 y:  977.18 \n\n x: 707 y:  970.639 \n\n x: 708 y:  976\n</code></pre>\n"}, {"tags": ["c++", "polymorphism", "operator-overloading"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1575469838, "post_id": 59178249, "comment_id": 104577875, "body": "Because you have different arguments in <code>A::operator==</code> and <code>B::operator==</code> the function in <code>B</code> doesn&#39;t override the function in <code>A</code>, instead <code>B::operator==</code> <i>hides</i> <code>A::operator==</code>. If you add the special identifier <code>override</code> after the functions in the derived class (i.e. <code>virtual bool operator==(const B&amp; other) const override</code> in the <code>B</code> class) then the compiler will give you an error for that. Same problem with <code>C</code> of course."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12479975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7da145284a189d29bd45fd220c8a82a?s=128&d=identicon&r=PG&f=1", "display_name": "Bernad D.", "link": "https://stackoverflow.com/users/12479975/bernad-d"}, "edited": false, "score": 0, "creation_date": 1575472310, "post_id": 59178863, "comment_id": 104579365, "body": "Oh, nice. But as B and C derive from A, as long as I implemente the case &quot;Compare A against A&quot; I can always compare any of my objects together, right ? In your example, even if I don&#39;t implemente the case Compare B against C but I try to do b1 == c1 it will use the method defined to compare A against A or not ?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 3, "user_id": 12479975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7da145284a189d29bd45fd220c8a82a?s=128&d=identicon&r=PG&f=1", "display_name": "Bernad D.", "link": "https://stackoverflow.com/users/12479975/bernad-d"}, "edited": false, "score": 1, "creation_date": 1575473568, "post_id": 59178863, "comment_id": 104580016, "body": "@BernadD. Not with template specializations; no attempts at implicit conversion are made in the search for a matching template instantiation. Note that this construct is not the same as overloading. Also note that the &quot;base template&quot; is not implemented, which will cause a compilation error for the un-specialized cases."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 0, "last_activity_date": 1575471404, "creation_date": 1575471404, "answer_id": 59178863, "question_id": 59178249, "link": "https://stackoverflow.com/questions/59178249/good-practice-for-overloading-operator-and-polymorphism/59178863#59178863", "title": "Good practice for overloading operator == and polymorphism?", "body": "<p>As a possible way to solve your problem you couldimplement the comparison as a non-member template function, with specialization for the possible and valid combinations.</p>\n\n<p>Simple (and incomplete) example:</p>\n\n<pre><code>// Base case\ntemplate&lt;typename T, typename U&gt;\nstd::enable_if_t&lt;std::is_base_of_v&lt;A, T&gt; &amp;&amp; std::is_base_of_v&lt;A, U&gt;, bool&gt; operator==(T const&amp;, U const&amp;);\n// The enable_if is to make sure only A and derivatives of it could be used\n\n// Specialization: Compare A against A\ntemplate&lt;&gt;\nbool operator==(A const&amp; l, A const&amp; r) { /* Some implementation... */ }\n\n// Specialization: Compare B against B\ntemplate&lt;&gt;\nbool operator==(B const&amp; l, B const&amp; r) { /* Some implementation... */ }\n\n// Specialization: Compare B against A\ntemplate&lt;&gt;\nbool operator==(B const&amp; l, A const&amp; r) { /* Some implementation... */ }\n\n// Specialization: Compare B against C\ntemplate&lt;&gt;\nbool operator==(B const&amp; l, C const&amp; r) { /* Some implementation... */ }\n\n// Specialization: Compare C against C\ntemplate&lt;&gt;\nbool operator==(C const&amp; l, C const&amp; r) { /* Some implementation... */ }\n</code></pre>\n\n<p>Only those comparisons explicitly specialized will be allowed, any other will lead to build errors. And each specialization could be implemented to perform the comparisons in the most effective way.</p>\n\n<p>Yes it's a lot of seemingly duplicated code, but the specializations could call some common functions for combinations that are to be compared in the same way (for example comparing a <code>B</code> against <code>C</code> is probably the same as comparing <code>C</code> against <code>B</code>, and thus can be implemented in a shared function).</p>\n"}], "owner": {"reputation": 3, "user_id": 12479975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7da145284a189d29bd45fd220c8a82a?s=128&d=identicon&r=PG&f=1", "display_name": "Bernad D.", "link": "https://stackoverflow.com/users/12479975/bernad-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 59178863, "answer_count": 1, "score": 0, "last_activity_date": 1575471404, "creation_date": 1575469531, "last_edit_date": 1575469611, "question_id": 59178249, "link": "https://stackoverflow.com/questions/59178249/good-practice-for-overloading-operator-and-polymorphism", "title": "Good practice for overloading operator == and polymorphism?", "body": "<p>Here is my goal: I have an abstract base class A implementing an operator ==, then I have several derived classes (ie B and C) that each implement an operator ==. I want that when I test b1 == b2 it call the operator defined in B, but I also want to be able to call b1 == c1 and it call the operator defined in the base class A. </p>\n\n<p>Indeed, my library represent geometric object and even though b1 and c1 are not the same class they may represent the same 3D object but stored/formulated in a different manner. The operator == in the base class A is slow but test exactly if the 3D objects are equal (by disctretizing) and the operators defined in the child class are faster as they know which formulation is used and can check exactly for equality. </p>\n\n<p>Here was my first try : </p>\n\n<pre><code>// Base class A\nclass A{\n\npublic:\n  A() {}\n\n  // ... some pure virtual methods\n\n  virtual bool operator==(const A&amp; other) const {\n    std::cout&lt;&lt;\" operator == in A\"&lt;&lt;std::endl;\n    // slow equality test by discretization\n  }\n\n  virtual bool operator!=(const A&amp; other) const {\n    return !(*this == other);\n  }\n\n}; // end A\n\n// Derived class B\nclass B: public A{\n\npublic:\n  B() {}\n\n  // ... stuff\n\n  virtual bool operator==(const B&amp; other) const {\n    std::cout&lt;&lt;\" operator == in B\"&lt;&lt;std::endl;\n    // fast and exact test between two B objects\n  }\n\n  virtual bool operator!=(const B&amp; other) const {\n    return !(*this == other);\n  }\n\n}; // end B\n\n// Derived classC\nclass C: public A{\n\npublic:\n  C() {}\n\n  // ... stuff\n\n  virtual bool operator==(const C&amp; other) const {\n    std::cout&lt;&lt;\" operator == in C\"&lt;&lt;std::endl;\n    // fast and exact test between two C objects\n  }\n\n  virtual bool operator!=(const C&amp; other) const {\n    return !(*this == other);\n  }\n\n}; // end C\n</code></pre>\n\n<p>This implementation worked only for test between the same objects : </p>\n\n<pre><code>B b1(...),b2(...);\nC c1(...),c2(...);\nb1 == b2; // OK, output \" operator == in B\"\nc1 == c2; // OK, output \" operator == in C\"\nb1 == c1; // do not compile : unknow conversion from C to B\n</code></pre>\n\n<p>So, to fix this issue I added the following methods in B and C implementation (1) : </p>\n\n<pre><code>  virtual bool operator==(const A&amp; other) const {\n    return A::operator==(other);\n  }\n\n  virtual bool operator!=(const A&amp; other) const {\n    return !(*this == other);\n  }\n</code></pre>\n\n<p>Now, my first test code work : </p>\n\n<pre><code>b1 == c1; // OK, output \" operator == in A\" as expected\n</code></pre>\n\n<p>But, I still cannot use polymorphisme (not 100% sure it's the right term in this context) with this operators : </p>\n\n<pre><code>A* a_b1 = new B(...);\nA* a_c1 = new C(...);\nb1 == *a_b1; // output \" operator == in A\" !\nc1 == *a_c1; // output \" operator == in A\" !\n</code></pre>\n\n<p>So to fix this, I changed the method added in (1) to the implementation of B and C try to cast the input of type A to the current child type. Here is the final result : </p>\n\n<pre><code>// Base class A\nclass A{\n\npublic:\n  A() {}\n\n  // ... some pure virtual methods\n\n  virtual bool operator==(const A&amp; other) const {\n    std::cout&lt;&lt;\" operator == in A\"&lt;&lt;std::endl;\n    // slow equality test by discretization\n  }\n\n  virtual bool operator!=(const A&amp; other) const {\n    return !(*this == other);\n  }\n\n}; // end A\n\n// Derived class B\nclass B: public A{\n\npublic:\n  B() {}\n\n  // ... stuff\n\n  virtual bool operator==(const B&amp; other) const {\n    std::cout&lt;&lt;\" operator == in B\"&lt;&lt;std::endl;\n    // fast and exact test between two B objects\n  }\n\n  virtual bool operator!=(const B&amp; other) const {\n    return !(*this == other);\n  }\n\n  // CHANGED METHOD :\n  virtual bool operator==(const A&amp; other) const {\n   const B* other_cast = dynamic_cast&lt;const B*&gt;(&amp;other);\n   if(other_cast)\n     return *this == *other_cast;\n   else\n     return A::operator()(other);\n  }\n\n  virtual bool operator!=(const A&amp; other) const {\n    return !(*this == other);\n  }\n\n}; // end B\n\n// Derived classC\nclass C: public A{\n\npublic:\n  C() {}\n\n  // ... stuff\n\n  virtual bool operator==(const C&amp; other) const {\n    std::cout&lt;&lt;\" operator == in C\"&lt;&lt;std::endl;\n    // fast and exact test between two C objects\n  }\n\n  virtual bool operator!=(const C&amp; other) const {\n    return !(*this == other);\n  }\n\n  // CHANGED METHOD :\n  virtual bool operator==(const A&amp; other) const {\n   const C* other_cast = dynamic_cast&lt;const C*&gt;(&amp;other);\n   if(other_cast)\n     return *this == *other_cast;\n   else\n     return A::operator()(other);\n  }\n\n  virtual bool operator!=(const A&amp; other) const {\n    return !(*this == other);\n  }\n\n}; // end C\n</code></pre>\n\n<p>So, with this code I achieved what I wanted, ie : </p>\n\n<pre><code>B b1(...),b2(...);\nC c1(...),c2(...);\nb1 == b2; // OK, output \" operator == in B\"\nc1 == c2; // OK, output \" operator == in C\"\nb1 == c1; // OK, output \" operator == in A\"\nA* a_b1 = new B(...);\nA* a_c1 = new C(...);\nb1 == *a_b1; //OK, output \" operator == in B\" !\nc1 == *a_c1; //OK, output \" operator == in C\" !\n</code></pre>\n\n<p>But I am really not sure if it's a good way to achieve that, as the need for a cast usually highlight a bad design. What are your suggestions to improve this code ? </p>\n"}, {"tags": ["c++", "templates", "sfinae"], "answers": [{"comments": [{"owner": {"reputation": 1253, "user_id": 697683, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6065c081ec0bdeb9b6fe803054c3afbf?s=128&d=identicon&r=PG", "display_name": "user697683", "link": "https://stackoverflow.com/users/697683/user697683"}, "edited": false, "score": 0, "creation_date": 1575470664, "post_id": 59178344, "comment_id": 104578389, "body": "Thank you. Sadly, this makes sense."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1575473052, "post_id": 59178344, "comment_id": 104579738, "body": "Hm. I wonder why if all viable candidates are from the same source, they would care about the non-viable ones from elsewhere. Does it have any (safety?)-advantage?"}, {"owner": {"reputation": 1253, "user_id": 697683, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6065c081ec0bdeb9b6fe803054c3afbf?s=128&d=identicon&r=PG", "display_name": "user697683", "link": "https://stackoverflow.com/users/697683/user697683"}, "edited": false, "score": 0, "creation_date": 1575473233, "post_id": 59178344, "comment_id": 104579827, "body": "Bonus question: why exactly those two names can&#39;t be a part of an overload set? Or in other words, why can&#39;t the ambiguity check be performed <i>after</i> overload resolution? Is there a particular reason this was standardised as such, or is it just one of those random C++ quirks that we have to live with?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1253, "user_id": 697683, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6065c081ec0bdeb9b6fe803054c3afbf?s=128&d=identicon&r=PG", "display_name": "user697683", "link": "https://stackoverflow.com/users/697683/user697683"}, "edited": false, "score": 1, "creation_date": 1575473479, "post_id": 59178344, "comment_id": 104579965, "body": "@user697683 - A base class can change. If it introduces a function that&#39;s a better match in overload resolution then in the current approach things don&#39;t compile. If instead we did overload resolution anyway, the new overload would get picked. So the code would build, but behave differently without notice. That would be bad."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1575473747, "post_id": 59178344, "comment_id": 104580120, "body": "@Deduplicator - The issue is with potentially viable and better(implicit conversion-wise) overloads sneaking in."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 9, "last_activity_date": 1575469810, "creation_date": 1575469810, "answer_id": 59178344, "question_id": 59178136, "link": "https://stackoverflow.com/questions/59178136/why-doesnt-sfinae-work-across-multiple-inheritance/59178344#59178344", "title": "Why doesn&#39;t SFINAE work across multiple inheritance?", "body": "<p>There is no overload resolution happening in your example, so the SFINAE doesn't matter.</p>\n\n<p>The key here is that <strong>name lookup</strong> happens <em>before</em> overload resolution. Name lookup finds an overload set, and then overload resolution is performed on the set that was found. </p>\n\n<p>The name has to map to a single set inside a single object type. In your case, the same name maps to members of two different sub-objects, so the name lookup is ambiguous. An immediate solution is to add using declarations:</p>\n\n<pre><code>class Derived: public ClassWithFoo, public ClassWithDisabledFoo&lt;double&gt;\n{\n    using ClassWithFoo::foo;\n    using ClassWithDisabledFoo::foo;\n};\n</code></pre>\n\n<p>This introduces the name into <code>Derived</code>, where the declaration can now be unambiguously found to refer to an overload set composed of the members we brought in.</p>\n"}], "owner": {"reputation": 1253, "user_id": 697683, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6065c081ec0bdeb9b6fe803054c3afbf?s=128&d=identicon&r=PG", "display_name": "user697683", "link": "https://stackoverflow.com/users/697683/user697683"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 59178344, "answer_count": 1, "score": 5, "last_activity_date": 1575469810, "creation_date": 1575469160, "question_id": 59178136, "link": "https://stackoverflow.com/questions/59178136/why-doesnt-sfinae-work-across-multiple-inheritance", "title": "Why doesn&#39;t SFINAE work across multiple inheritance?", "body": "<p>Here's the code:</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;class T&gt;\nclass ClassWithDisabledFoo\n{\npublic:\n    template &lt;class U = T, std::enable_if_t&lt;std::is_integral&lt;U&gt;::value, int&gt; = 0&gt;\n    void foo(){}\n};\n\nclass ClassWithFoo\n{\npublic:\n    void foo(){}\n};\n\nclass Derived: public ClassWithFoo, public ClassWithDisabledFoo&lt;double&gt;\n{\n\n};\n\nvoid test()\n{\n    Derived d;\n    d.foo();\n}\n\n\n</code></pre>\n\n<p>At the point of calling <code>d.foo()</code>, both clang and gcc say that the call to <code>foo</code> is ambiguous, despite <code>ClassWithDisabledFoo::foo</code> being disabled by <code>enable_if</code>. If I move the <code>foo</code> definition from <code>ClassWithFoo</code> to <code>Derived</code>, the code compiles.</p>\n\n<p>Why doesn't this work and how can I make it work?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 4, "creation_date": 1575469077, "post_id": 59178035, "comment_id": 104577360, "body": "Type erasure is not some magical weapon. Yes, you put all those objects into a vector - but why? What do you actually want to accomplish? C++ is a strongly typed language, so to do anything useful with your objects, you need to somehow remember/figure out the right type again. If you don&#39;t have a way to do that, then type erasure probably was not the right solution."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1575469278, "post_id": 59178035, "comment_id": 104577498, "body": "In other words: You told us that you used a hammer, that the nail is now stuck in the wood and that you&#39;d like to get it back out. There are many ways to get that nail back out. Some of them are slow. Some of them involve destroying the wood. But we can&#39;t give you a helpful answer because we don&#39;t know why you put the nails in there and what the purpose of getting them out again is. Maybe you didn&#39;t actually need a hammer and wood? This looks like an <a href=\"https://meta.stackexchange.com/q/66377\">XY problem</a>, so I suggest you describe what you actually want to accomplish in the first place."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5088457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e14455c2cbc4d9ae2fb6c19f1d6bb58a?s=128&d=identicon&r=PG&f=1", "display_name": "Hyperhyper", "link": "https://stackoverflow.com/users/5088457/hyperhyper"}, "edited": false, "score": 0, "creation_date": 1575532681, "post_id": 59178471, "comment_id": 104600327, "body": "Thanks it works! I&#39;m using these type erased objects because they share a common-interface. My data is some sort of a key-value pair, where the value can be a primitive type or even a complex one."}], "tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": true, "score": 2, "last_activity_date": 1575471124, "last_edit_date": 1575471124, "creation_date": 1575470231, "answer_id": 59178471, "question_id": 59178035, "link": "https://stackoverflow.com/questions/59178035/accessing-objects-in-a-vector-of-template-class-objects/59178471#59178471", "title": "accessing objects in a vector of template class objects", "body": "<blockquote>\n  <p>So my question is, how do I get the objects behind a <code>shared_ptr</code>, when I don't know the templates type?</p>\n</blockquote>\n\n<p>The answer is <strong>you can't</strong>, respectively, you can't <strong>from outside of <code>Aimpl</code></strong>, which is the only place where the type of the stored object is known.</p>\n\n<p>Type erasure is used mostly when all the type-erased objects share some common interface. In your case, for example, you can type the contents of <code>int</code>, <code>std::string</code>, and <code>double</code> into the output stream. To perform this via a <em>pointer-to-base</em> <code>A</code>, you need to use <code>virtual</code> functions:</p>\n\n<pre><code>class A\n{\n  public: virtual void print() const = 0;\n};\n\ntemplate &lt;class T&gt;\nclass AImpl : public A\n{\n  T obj;\npublic:      \n  AImpl(T _obj) : obj(_obj) { }      \n  ~AImpl() { cout &lt;&lt; \"Deleting \" &lt;&lt; obj &lt;&lt; endl; }\n\n  virtual void print() const override\n  {\n    cout &lt;&lt; obj &lt;&lt; endl;\n  }\n};\n</code></pre>\n\n<p>Then, you can print out the value of all type-erased objects stored in <code>As</code> as follows:</p>\n\n<pre><code>for (const auto ptr&amp; : As) As-&gt;print();\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5088457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e14455c2cbc4d9ae2fb6c19f1d6bb58a?s=128&d=identicon&r=PG&f=1", "display_name": "Hyperhyper", "link": "https://stackoverflow.com/users/5088457/hyperhyper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 59178471, "answer_count": 1, "score": 0, "last_activity_date": 1575471124, "creation_date": 1575468817, "last_edit_date": 1575469245, "question_id": 59178035, "link": "https://stackoverflow.com/questions/59178035/accessing-objects-in-a-vector-of-template-class-objects", "title": "accessing objects in a vector of template class objects", "body": "<p>i am having a vector of various objects of a template class by implementing this answer: <a href=\"https://stackoverflow.com/a/36588158/5088457\">https://stackoverflow.com/a/36588158/5088457</a> </p>\n\n<p>I'm developing with qt. But I'm having trouble casting/accessing these objects. So my question is, how do i get the objects behind a shared_ptr, when I don't know the templates type? As you can see in the code snippet below, it's about getting an AImpl object out of the vector As. Thanks!</p>\n\n<p>I think the authors code snippet is a good minimal example: </p>\n\n<pre><code>class A{};\n\ntemplate &lt;class T&gt;\nclass AImpl : public A{\npublic:\n    T obj;\n    AImpl(T _obj):obj(_obj){}\n    ~AImpl(){\n        cout &lt;&lt; \"Deleting \" &lt;&lt; obj &lt;&lt; endl;\n    }\n};\n\nint main(int argc, char** argv)\n{\n    AImpl &lt;string&gt;* a1 = new AImpl &lt;string&gt; (\"string1234\");\n    AImpl &lt;int&gt;* a2 = new AImpl &lt;int&gt; (1234);\n    AImpl &lt;double&gt;* a3 = new AImpl &lt;double&gt; (1.234);\n    vector &lt;shared_ptr&lt;A&gt;&gt; As;\n    As.push_back(shared_ptr&lt;A&gt;(a1));\n    As.push_back(shared_ptr&lt;A&gt;(a2));\n    As.push_back(shared_ptr&lt;A&gt;(a3));\n}\n\n\n\n\n</code></pre>\n"}, {"tags": ["c++", "llvm"], "comments": [{"owner": {"reputation": 2081, "user_id": 3048763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EdaRb.jpg?s=128&g=1", "display_name": "compor", "link": "https://stackoverflow.com/users/3048763/compor"}, "edited": false, "score": 0, "creation_date": 1575471322, "post_id": 59177878, "comment_id": 104578772, "body": "So, does this happen when your tool is an identity transform (i.e. simply reads and write the IR without changing anything whatsoever)?  If so, could you please provide an absolutely MWE that replicates this behaviour?"}, {"owner": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "edited": false, "score": 0, "creation_date": 1575476771, "post_id": 59177878, "comment_id": 104582011, "body": "You seem to add that <code>%struct.hoge</code> second time somehow."}, {"owner": {"reputation": 171, "user_id": 10106434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zzZsLoDW2gs/AAAAAAAAAAI/AAAAAAAAAIg/dUrzkhXaOXc/photo.jpg?sz=128", "display_name": "funnypig run", "link": "https://stackoverflow.com/users/10106434/funnypig-run"}, "reply_to_user": {"reputation": 2081, "user_id": 3048763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EdaRb.jpg?s=128&g=1", "display_name": "compor", "link": "https://stackoverflow.com/users/3048763/compor"}, "edited": false, "score": 0, "creation_date": 1575508939, "post_id": 59177878, "comment_id": 104593877, "body": "@compor Yes. For debugging, I output the code two times in different files. First, right after loading the IR then after instrumenting the IR. Name gets mangled(?) the same. As for the second question, what does MWE stand for?"}, {"owner": {"reputation": 171, "user_id": 10106434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zzZsLoDW2gs/AAAAAAAAAAI/AAAAAAAAAIg/dUrzkhXaOXc/photo.jpg?sz=128", "display_name": "funnypig run", "link": "https://stackoverflow.com/users/10106434/funnypig-run"}, "reply_to_user": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "edited": false, "score": 0, "creation_date": 1575509068, "post_id": 59177878, "comment_id": 104593905, "body": "@arrowd I\u2019m sorry. I don\u2019t think I\u2019m following what you\u2019re saying. Could you please re-phrase it?"}, {"owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 1, "creation_date": 1575529439, "post_id": 59177878, "comment_id": 104599071, "body": "The LLVM module loader will rename types when it thinks two different types might have the same name. It&#39;s a bit too eager for my taste so I patched it, but anyway, what happens is that the type exists, and <i>then</i> a module that uses the type is loaded, and the loader assumes that the existing type and the type referenced in the loaded module aren&#39;t meant to be the same, and renames one just to be safe."}, {"owner": {"reputation": 8022, "user_id": 164925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35f656cad1ff0d8797c598930dda7faa?s=128&d=identicon&r=PG", "display_name": "Anton Korobeynikov", "link": "https://stackoverflow.com/users/164925/anton-korobeynikov"}, "edited": false, "score": 0, "creation_date": 1575531116, "post_id": 59177878, "comment_id": 104599698, "body": "@funnypigrun Could you please elaborate, why this is a problem? And why you&#39;re relying on the particular naming? Note that names are debugging feature and they could be easily stripped from the module."}, {"owner": {"reputation": 171, "user_id": 10106434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zzZsLoDW2gs/AAAAAAAAAAI/AAAAAAAAAIg/dUrzkhXaOXc/photo.jpg?sz=128", "display_name": "funnypig run", "link": "https://stackoverflow.com/users/10106434/funnypig-run"}, "reply_to_user": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 0, "creation_date": 1575532862, "post_id": 59177878, "comment_id": 104600388, "body": "@arnt Thank you. Now I understand why this happens. Is there any way to disable this? Because this does not happen in the <code>opt</code> tool on both llvm-project version <code>9.0.0</code> and <code>10-init</code>. I think <code>ctx.setDiscardValueName(false)</code> was supposed to fix it but it&#39;s not? Which part of llvm shall I modify?"}, {"owner": {"reputation": 171, "user_id": 10106434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zzZsLoDW2gs/AAAAAAAAAAI/AAAAAAAAAIg/dUrzkhXaOXc/photo.jpg?sz=128", "display_name": "funnypig run", "link": "https://stackoverflow.com/users/10106434/funnypig-run"}, "reply_to_user": {"reputation": 8022, "user_id": 164925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35f656cad1ff0d8797c598930dda7faa?s=128&d=identicon&r=PG", "display_name": "Anton Korobeynikov", "link": "https://stackoverflow.com/users/164925/anton-korobeynikov"}, "edited": false, "score": 0, "creation_date": 1575533378, "post_id": 59177878, "comment_id": 104600628, "body": "@AntonKorobeynikov It&#39;s quite complicated. But let&#39;s say I have a C source code that I want to analyze. For static analysis, I need debug information of the C code. On the other hand, for dynamic analysis, I need LLVM-IR debug information. Which is obtained by using <code>-strip-debug</code> and <code>-debugify</code> passes. Now, this means I have 2 LLVM-IR codes that I have to be able to map with each other. (Also, one of them is instrumented) This is where the name mangling becomes a problem, I use string matching to find the same instruction. If there is any alternatives, I would be really happy to hear it."}, {"owner": {"reputation": 3524, "user_id": 829116, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6dc2fd642323cb9bab9a050710290353?s=128&d=identicon&r=PG", "display_name": "AlexDenisov", "link": "https://stackoverflow.com/users/829116/alexdenisov"}, "edited": false, "score": 2, "creation_date": 1575535233, "post_id": 59177878, "comment_id": 104601442, "body": "The easiest way to fix it is to use two different contexts (one per module), then you won&#39;t get collisions. Have you considered this approach?"}, {"owner": {"reputation": 2081, "user_id": 3048763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EdaRb.jpg?s=128&g=1", "display_name": "compor", "link": "https://stackoverflow.com/users/3048763/compor"}, "edited": false, "score": 0, "creation_date": 1575536247, "post_id": 59177878, "comment_id": 104601872, "body": "@funnypigrun I agree with AlexDenisov."}, {"owner": {"reputation": 2081, "user_id": 3048763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EdaRb.jpg?s=128&g=1", "display_name": "compor", "link": "https://stackoverflow.com/users/3048763/compor"}, "edited": false, "score": 1, "creation_date": 1575536580, "post_id": 59177878, "comment_id": 104602017, "body": "Moreover, the whole problem stems from the way you&#39;ve designed your analyses. Instead of trying to map information from one to another maybe you should reconsider your pipeline design and use the same source twice and correlate the 2 with something that does not change (names at the IR level are quite fragile anyway)."}, {"owner": {"reputation": 171, "user_id": 10106434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zzZsLoDW2gs/AAAAAAAAAAI/AAAAAAAAAIg/dUrzkhXaOXc/photo.jpg?sz=128", "display_name": "funnypig run", "link": "https://stackoverflow.com/users/10106434/funnypig-run"}, "reply_to_user": {"reputation": 3524, "user_id": 829116, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6dc2fd642323cb9bab9a050710290353?s=128&d=identicon&r=PG", "display_name": "AlexDenisov", "link": "https://stackoverflow.com/users/829116/alexdenisov"}, "edited": false, "score": 0, "creation_date": 1575537507, "post_id": 59177878, "comment_id": 104602418, "body": "@AlexDenisov Oh. That explains a lot. So, If I understand correctly, the mangling is caused by two &#39;mostly&#39; same modules getting loaded with the same context. And the result is that the latter module&#39;s type is considered a different one so it gets indexed. I didn&#39;t really know what <code>LLVMContext</code> was for until now. My tool used to only load one module before I had to take the dynamic analysis into account. Maybe that&#39;s why I was getting away with just one context. Thank you very much."}, {"owner": {"reputation": 171, "user_id": 10106434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zzZsLoDW2gs/AAAAAAAAAAI/AAAAAAAAAIg/dUrzkhXaOXc/photo.jpg?sz=128", "display_name": "funnypig run", "link": "https://stackoverflow.com/users/10106434/funnypig-run"}, "reply_to_user": {"reputation": 2081, "user_id": 3048763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EdaRb.jpg?s=128&g=1", "display_name": "compor", "link": "https://stackoverflow.com/users/3048763/compor"}, "edited": false, "score": 0, "creation_date": 1575537714, "post_id": 59177878, "comment_id": 104602520, "body": "@compor I suppose my current design could use some work. Currently, I use <code>Makefile</code> to automatically call some passes via <code>opt</code>. But I should probably just call them from inside my program. I guess my current design has been affected by the fact that this tool started out as a <code>ModulePass</code> then was extended to become a standalone program. Thank you for the suggestion."}, {"owner": {"reputation": 2081, "user_id": 3048763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EdaRb.jpg?s=128&g=1", "display_name": "compor", "link": "https://stackoverflow.com/users/3048763/compor"}, "edited": false, "score": 0, "creation_date": 1575537933, "post_id": 59177878, "comment_id": 104602617, "body": "@funnypigrun yes, you got what Alex wrote. At the IR level, in the same module and context, types have to have unique names. It&#39;s very C-like :)"}, {"owner": {"reputation": 171, "user_id": 10106434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zzZsLoDW2gs/AAAAAAAAAAI/AAAAAAAAAIg/dUrzkhXaOXc/photo.jpg?sz=128", "display_name": "funnypig run", "link": "https://stackoverflow.com/users/10106434/funnypig-run"}, "reply_to_user": {"reputation": 2081, "user_id": 3048763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EdaRb.jpg?s=128&g=1", "display_name": "compor", "link": "https://stackoverflow.com/users/3048763/compor"}, "edited": false, "score": 0, "creation_date": 1575538265, "post_id": 59177878, "comment_id": 104602792, "body": "@compor Well, I\u2019m going to have to document that to help out my successors. Appreciate the help :D"}, {"owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 0, "creation_date": 1575538726, "post_id": 59177878, "comment_id": 104603081, "body": "Not sure I understand this. Is the problem that one type gets two different names with the same structure? Or are there two types in different contexts that are meant to have the same name? If the latter, then please disregard my comment above."}, {"owner": {"reputation": 171, "user_id": 10106434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zzZsLoDW2gs/AAAAAAAAAAI/AAAAAAAAAIg/dUrzkhXaOXc/photo.jpg?sz=128", "display_name": "funnypig run", "link": "https://stackoverflow.com/users/10106434/funnypig-run"}, "reply_to_user": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 0, "creation_date": 1575542206, "post_id": 59177878, "comment_id": 104604950, "body": "@arnt It&#39;s the latter case. I&#39;m trying to load two mostly identical LLVM-IR codes. The problem was that I loaded them both with the same context. Thus, the type names in the second modules were considered to be conflicting with the first one. Thank you for your time."}, {"owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 0, "creation_date": 1575542732, "post_id": 59177878, "comment_id": 104605245, "body": "In which case I think they actually are the same types, but you don&#39;t need them to be in the same context, so you can avoid the problem by using two different contexts. That&#39;s an excellent approach IMO, because every approach to a possible type conflict has serious drawbacks. Often, avoiding a problem is better than trying to solve it."}, {"owner": {"reputation": 171, "user_id": 10106434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zzZsLoDW2gs/AAAAAAAAAAI/AAAAAAAAAIg/dUrzkhXaOXc/photo.jpg?sz=128", "display_name": "funnypig run", "link": "https://stackoverflow.com/users/10106434/funnypig-run"}, "reply_to_user": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "edited": false, "score": 0, "creation_date": 1575543778, "post_id": 59177878, "comment_id": 104605855, "body": "@arnt Yes. That is what I am going to do. Appreciate the help. :)"}], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 10106434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zzZsLoDW2gs/AAAAAAAAAAI/AAAAAAAAAIg/dUrzkhXaOXc/photo.jpg?sz=128", "display_name": "funnypig run", "link": "https://stackoverflow.com/users/10106434/funnypig-run"}, "is_accepted": true, "score": 0, "last_activity_date": 1576731986, "creation_date": 1576731986, "answer_id": 59403575, "question_id": 59177878, "link": "https://stackoverflow.com/questions/59177878/llvm-ir-loading-type-name-mangling/59403575#59403575", "title": "LLVM IR Loading type name mangling", "body": "<p><strong>Short Answer:</strong></p>\n\n<p>Do not use the same <code>LLVMContext</code> to read modules if they are <strong>NOT</strong> supposed to be in the same program.</p>\n\n<hr>\n\n<p><strong>Long Answer:</strong></p>\n\n<p>By reading multiple <code>Module</code>s with the same <code>LLVMContext</code>, you imply that those <code>Module</code>s are supposed to be within the same program.</p>\n\n<p>So what happens is that, when there are multiple <code>Module</code>s that have the same type name , they get indexed in order to avoid conflict.</p>\n\n<hr>\n\n<p>Thank you for all the help in the comments. :)</p>\n"}], "owner": {"reputation": 171, "user_id": 10106434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zzZsLoDW2gs/AAAAAAAAAAI/AAAAAAAAAIg/dUrzkhXaOXc/photo.jpg?sz=128", "display_name": "funnypig run", "link": "https://stackoverflow.com/users/10106434/funnypig-run"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 1, "accepted_answer_id": 59403575, "answer_count": 1, "score": 0, "last_activity_date": 1576731986, "creation_date": 1575468365, "question_id": 59177878, "link": "https://stackoverflow.com/questions/59177878/llvm-ir-loading-type-name-mangling", "title": "LLVM IR Loading type name mangling", "body": "<p>I'm having a hard time fixing this problem with loading LLVM-IR modules.</p>\n\n<p>First of all here is the problem.\nI have this LLVM-IR File with this instruction:</p>\n\n<pre><code>%7 = getelementptr inbounds %struct.hoge, %struct.hoge* %6, i32 0, i32 0, !dbg !34\n</code></pre>\n\n<p>Now, when I load it using my tool, it turns to this:</p>\n\n<pre><code>%7 = getelementptr inbounds %struct.hoge.0, %struct.hoge.0* %6, i32 0, i32 0, !dbg !34\n</code></pre>\n\n<p>My goal is to get rid of this <code>.0</code> at the end of all struct types.</p>\n\n<p>Here is some code,</p>\n\n<p>Module loading:</p>\n\n<pre><code>Module *FPR_::load(const path &amp;input) const {\n    // Construct module\n    SMDiagnostic err;\n    unique_ptr&lt;Module&gt; module{parseIRFile(input.string(), err, ctx, true, \"\")};\n    ...\n</code></pre>\n\n<p>Module printing:</p>\n\n<pre><code>ofstream ofs(\"hoge.ll\");\nstring str;\nraw_string_ostream rso(str);\nmodule-&gt;print(rso, NULL, true, true);\nofs &lt;&lt; str;\n</code></pre>\n\n<p>Now, let me tell you what I've done so far.</p>\n\n<ol>\n<li>I've debugged my instrumentation tool and found out that this <code>.0</code> gets added when the module is LOADED not PRINTED. I found this out because my tool outputs some instructions for debug purposed and they already have the <code>.0</code>s right after loading.</li>\n<li>I've tried to load and print the same module multiple times and this is the result.</li>\n</ol>\n\n<pre><code>%7 = getelementptr inbounds %struct.hoge.0.0.0.0.0.0, %struct.hoge.0.0.0.0.0.0* %6, i32 0, i32 0, !dbg !34\n</code></pre>\n\n<p>Which would be funny if this isn't stopping me from developing my tool.</p>\n\n<ol start=\"3\">\n<li>Verified that this does not happen with the <code>opt</code> tool.</li>\n</ol>\n\n<pre><code>[user@host]opt hoge.ll -o foo.ll\n[user@host]diff hoge.ll foo.ll\n[user@host]\n</code></pre>\n\n<p>Which means there must be something I'm missing that <code>opt</code> does.</p>\n\n<ol start=\"4\">\n<li>Read <code>opt</code>'s source code.\nSome of the code felt like they mattered. And here is what I've ended up with.</li>\n</ol>\n\n<pre><code>LLVMContext ctx;\nctx.setDiscardValueNames(false);\nctx.enableDebugTypeODRUniquing();\nFPR_::FPR_ FPR_(path(src_ll.getValue()), path(dep_ll.getValue()), ctx, options); // Module gets loaded in this constructor.\n</code></pre>\n\n<p>The options in the <code>Context</code> is all I found that <code>opt</code> seemed to do different. But no results so far.</p>\n\n<p>Frankly, I'm out of ideas on how to fix this. So any help would be greatly appreciated.</p>\n\n<p>And as a side note, I know that it is recommended to use the <code>opt</code> tool itself for static analysis or instrumentation.\nBut the problem is, the tool I am trying to make uses the static analysis for dynamic analysis as well. So I do not want my program to end when it outputs the instrumented LLVM-IR.</p>\n\n<p>I could do some dirty hack and not return from the <code>runOnModule</code> method and just print the Module from there. But I do want to avoid that if possible.</p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["c++", "macos", "boost", "macos-catalina"], "comments": [{"owner": {"reputation": 259, "user_id": 3662499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0feb5c5ba76ba3a57b3cd09566dfebe2?s=128&d=identicon&r=PG&f=1", "display_name": "JDQ", "link": "https://stackoverflow.com/users/3662499/jdq"}, "edited": false, "score": 1, "creation_date": 1583898409, "post_id": 59177784, "comment_id": 107263959, "body": "Found this because I am experiencing the same issue with versions 1.55 and 1.72 on macOS Mojave."}, {"owner": {"reputation": 308, "user_id": 1414763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7ff18dd900574294b3f8434a16516b3?s=128&d=identicon&r=PG", "display_name": "Dean", "link": "https://stackoverflow.com/users/1414763/dean"}, "edited": false, "score": 0, "creation_date": 1592138242, "post_id": 59177784, "comment_id": 110313019, "body": "You should submit a bug report to the Boost devs. (Submitted as an Answer because SO doesn&#39;t allow me to make comments.)"}], "owner": {"reputation": 31, "user_id": 12187896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0319b2c9a7408987e34902528a31b1f7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/12187896/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1592138242, "creation_date": 1575468098, "question_id": 59177784, "link": "https://stackoverflow.com/questions/59177784/possible-macos-catalina-boost-install-name-bug", "title": "Possible MacOS Catalina boost install-name bug?", "body": "<p>I encountered some issues when trying to link boost build on MacOS Catalina. I did specifically set the include and libdir. Inspecting the install-name with <code>otool -l</code> I found, that the install-name was still set to the realative path of the binary bin.v2/libs/serialization/build/gcc-9.2/release/threading-multi/visibility-hidden/libboost_serialization.dylib.</p>\n\n<p>In order to achieve the expected behaviour (and the behaviour in MacOS Mojave) I simply set the install-name by hand. </p>\n\n<pre><code>for name in libboost_*.dylib; do install_name_tool -id path/boost/lib/${name} ${name}; done\n</code></pre>\n\n<p>Did I miss something ? Is there an option I could have enabled ? Where there general changes to install-name in MacOS Catalina ? </p>\n"}, {"tags": ["c++", "string", "c++11"], "comments": [{"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 9, "creation_date": 1575468149, "post_id": 59177728, "comment_id": 104576766, "body": "Store your strings and string arrays in an <code>unordered_map</code>. This will be much more efficient. You can also form a composite key made of the string and the value and use that key to index the map."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1576057178, "post_id": 59177728, "comment_id": 104771538, "body": "Are the strings showed in the snippet just an example or the actual expected values?"}, {"owner": {"reputation": 1055, "user_id": 4461980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4ca290b7b3a3f7c57f8c2e48bf978fa?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Humblot", "link": "https://stackoverflow.com/users/4461980/florian-humblot"}, "edited": false, "score": 1, "creation_date": 1576593884, "post_id": 59177728, "comment_id": 104945526, "body": "@rim in all your <code>else if</code>&#39;s you also make the array of <code>real_value</code> bigger but you don&#39;t add more strings to the array. Just in case you weren&#39;t aware of it :)"}, {"owner": {"reputation": 2710, "user_id": 3737186, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/PYtA4.png?s=128&g=1", "display_name": "Sjoerd222888", "link": "https://stackoverflow.com/users/3737186/sjoerd222888"}, "edited": false, "score": 0, "creation_date": 1576660248, "post_id": 59177728, "comment_id": 104967823, "body": "Just an idea: Maybe it is possible to think of an approach using <a href=\"https://en.wikipedia.org/wiki/SIMD\" rel=\"nofollow noreferrer\">SMID</a>. Not sure how this would actually look like with C++ though and for string operations it might also look quite ugly."}], "answers": [{"comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1576409791, "post_id": 59282655, "comment_id": 104883932, "body": "you can also make a custom hashing function for std::unordered_map to make it faster, since the keys are known"}, {"owner": {"reputation": 1087, "user_id": 2129218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bf5ffff85c1f5609fca08eb8e05279?s=128&d=identicon&r=PG", "display_name": "Build Succeeded", "link": "https://stackoverflow.com/users/2129218/build-succeeded"}, "edited": false, "score": 1, "creation_date": 1576606608, "post_id": 59282655, "comment_id": 104951920, "body": "Using the at() or operator [] on unordered_map is risky game as if passed first parameter to the function is not present in unordered_map then you have to face the out_of_bound exception. Better use the find()."}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "reply_to_user": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 1, "creation_date": 1576611213, "post_id": 59282655, "comment_id": 104953823, "body": "@Romen I took these into account. Just note the comments in my code."}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "reply_to_user": {"reputation": 1087, "user_id": 2129218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bf5ffff85c1f5609fca08eb8e05279?s=128&d=identicon&r=PG", "display_name": "Build Succeeded", "link": "https://stackoverflow.com/users/2129218/build-succeeded"}, "edited": false, "score": 0, "creation_date": 1576611271, "post_id": 59282655, "comment_id": 104953848, "body": "@Mannoj Yeah, that&#39;s why the comment <code>maybe check if str is present in the map</code> is there. If the OP will make sure not to call <code>Compare_Method</code> with invalid argument, <code>find</code> is not necessary."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1576624635, "post_id": 59282655, "comment_id": 104958716, "body": "My personal preference would be to use <code>find</code> anyway, to avoid having the code used by <code>operator[]</code> to insert the key and a default value when calling <code>map[str]</code> and possible performance hit creating a default value to insert should <code>str</code> not be found."}, {"owner": {"reputation": 1087, "user_id": 2129218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bf5ffff85c1f5609fca08eb8e05279?s=128&d=identicon&r=PG", "display_name": "Build Succeeded", "link": "https://stackoverflow.com/users/2129218/build-succeeded"}, "edited": false, "score": 0, "creation_date": 1576643724, "post_id": 59282655, "comment_id": 104962356, "body": "@Zereges, our program should have the capability to hande it. The answer is a bit specific with limitations."}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1576657780, "post_id": 59282655, "comment_id": 104966747, "body": "@1201ProgramAlarm OP can decide what to do on their own. I don&#39;t (at least I didn&#39;t at all) see what is their plan to do with this. That&#39;s why the comments are their for OP to decide whether they want to apply them or not."}, {"owner": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "edited": false, "score": 0, "creation_date": 1576736363, "post_id": 59282655, "comment_id": 104996836, "body": "@Zereges how about boundary check when std::vector&lt;std::string&gt; is used instead. if i access map[str][1000] ?"}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "reply_to_user": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "edited": false, "score": 0, "creation_date": 1576763534, "post_id": 59282655, "comment_id": 105009243, "body": "@rim If you want boundary checks, use <code>map.at(str).at(val)</code>, which will throw an exception if the value is not found."}], "tags": [], "owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "is_accepted": true, "score": 9, "last_activity_date": 1576056850, "creation_date": 1576056850, "answer_id": 59282655, "question_id": 59177728, "link": "https://stackoverflow.com/questions/59177728/efficient-way-to-compare-more-50-strings/59282655#59282655", "title": "Efficient way to compare more 50 strings", "body": "<p>This would be my way of doing that. The data structure is created only once and the access times should be fast enough</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;array&gt;\n#include &lt;unordered_map&gt;\n\nstd::string Compare_Method(const std::string&amp; str, int val)\n{\n    //                                  or std::vector&lt;std::string&gt;\n    static std::unordered_map&lt;std::string, std::array&lt;std::string, 3&gt;&gt; map\n    {\n        {  \"FIRST\", { \"Hello1\", \"hail1\", \"bye1\" }},\n        { \"SECOND\", { \"Hello2\", \"hail2\", \"bye2\" }},\n        {  \"THIRD\", { \"Hello3\", \"hail3\", \"bye3\" }},\n        // 50+ more\n    };\n\n    // maybe check if str is present in the map\n\n    return map[str][val];\n}\n\nint main()\n{\n    std::cout &lt;&lt; Compare_Method(\"SECOND\", 1) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>If <code>std::unordered_map</code> isn't (fast) enough for you, you can come up with some sort of static optimal hash structure, since keys are known at compile time.</p>\n"}, {"comments": [{"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 1, "creation_date": 1576334700, "post_id": 59334520, "comment_id": 104870208, "body": "<i>You&#39;ll obviously need a method to convert <code>string</code> to <code>int</code></i>, so your <code>GetEnumIndex</code> will perform a lots of comparsions as well."}, {"owner": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "edited": false, "score": 0, "creation_date": 1576479580, "post_id": 59334520, "comment_id": 104898950, "body": "You siad &quot;string comparisons will take a toll on performance&quot; but still GetEnumIndex do the string comparing ?"}], "tags": [], "owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "is_accepted": false, "score": 2, "last_activity_date": 1576321418, "creation_date": 1576321418, "answer_id": 59334520, "question_id": 59177728, "link": "https://stackoverflow.com/questions/59177728/efficient-way-to-compare-more-50-strings/59334520#59334520", "title": "Efficient way to compare more 50 strings", "body": "<p>If those 50 strings are something you will be widely using throughout your program, <code>string</code> comparisons will take a toll on performance. I'd suggest you to adapt them to an <code>enum</code>.</p>\n\n<pre><code>enum Strings\n{\n    FIRST,\n    SECOND,\n    THIRD,\n    \u2026\n    \u2026\n}\n</code></pre>\n\n<p>You'll obviously need a method to convert <code>string</code> to <code>int</code> whenever you get one from the source (user input, file read, etc.). This should be as infrequent as possible since your system now works on enum values (which can be used as indices on STL containers as we see in the next step)</p>\n\n<pre><code>int GetEnumIndex(const std::string&amp; str)\n{\n    // here you can map all variants of the same string to the same number\n    if (\"FIRST\" == str || \"first\" == str) return 1;\n    \u2026\n}\n</code></pre>\n\n<p>Then, the comparison method can be based on the <code>enum</code> instead of the <code>string</code>:</p>\n\n<pre><code>std::string Compare_Method(const int&amp; strIndex, int val)\n{\n    static std::vector&lt;std::vector&lt;std::string&gt;&gt; stringArray\n    {\n        { \"Hello1\", \"hail1\", \"bye1\" },\n        { \"Hello2\", \"hail2\", \"bye2\", \"aloha2\" },\n        { \"Hello3\", \"hail3\", \"bye3\", \"aloha3\", \"tata3\" },\n        \u2026\n    };\n    return stringArray[strIndex][val];\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "edited": false, "score": 1, "creation_date": 1576576446, "post_id": 59371121, "comment_id": 104935963, "body": "link is invalid"}, {"owner": {"reputation": 2636, "user_id": 4635560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv67d.jpg?s=128&g=1", "display_name": "Manthan Tilva", "link": "https://stackoverflow.com/users/4635560/manthan-tilva"}, "reply_to_user": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "edited": false, "score": 0, "creation_date": 1576577256, "post_id": 59371121, "comment_id": 104936430, "body": "@rim check now."}, {"owner": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "edited": false, "score": 1, "creation_date": 1576585873, "post_id": 59371121, "comment_id": 104940976, "body": "accepting this since i found more info and best approach"}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1576600049, "post_id": 59371121, "comment_id": 104948845, "body": "None of your other methods used <a href=\"https://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\"><code>std::unordered_map</code></a> which can be measurably faster than <code>std::map</code> for lookups. I would test that variant of the map structure and include it for completeness of the answer. (It might even be <i>faster</i> than the method you chose for the answer?)"}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 1, "creation_date": 1576605725, "post_id": 59371121, "comment_id": 104951532, "body": "Your testing methodology seems biased as well, <code>Method6</code> only has to perform up to 5 string comparisons since you chose such a small size for <code>NUMBERS</code>. The original question stated that <code>NUMBERS</code> would actually be <i>at least</i> 50 elements long, which would cause the more efficient lookup structures like <code>std::map</code> and <code>std::unordered_map</code> to demonstrate their performance better. I made my own tests and found <code>std::unordered_map</code> to be 10 - 10000 times faster than linearly searching a <code>std::array</code> (depending on how far down the key was in the array, also on MSVC instead of GCC)."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1576624676, "post_id": 59371121, "comment_id": 104958726, "body": "With a little effort would could sort <code>NUMBERS</code> (and similarly <code>VALUES</code>) then do a binary search instead of a linear one."}, {"owner": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "reply_to_user": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1576658379, "post_id": 59371121, "comment_id": 104966974, "body": "@Romen Can you please show the result of your test."}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1576680964, "post_id": 59371121, "comment_id": 104978550, "body": "<a href=\"https://gist.github.com/romenhurst/a643d9fc537f4ee8e46ed3b9913f0349\" rel=\"nofollow noreferrer\">Here is a gist</a> of my test. I left out the inner array lookup because that operation would contribute the same complexity to both algorithms being tested. This test generates 1000 unique keys and shows that maps are <b>much</b> faster than linear array searches when n &gt;&gt; 5. I realize that <i>my</i> testing methodology may have problems too, but I&#39;m not sure they would contribute a significant error to the ~100:1 difference we see in the tests. Zereges&#39; answer deserves the bounty because it is much more optimal than this algo."}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "reply_to_user": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "edited": false, "score": 0, "creation_date": 1576690427, "post_id": 59371121, "comment_id": 104983834, "body": "@rim, forgot to tag you. See comment above."}], "tags": [], "owner": {"reputation": 2636, "user_id": 4635560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv67d.jpg?s=128&g=1", "display_name": "Manthan Tilva", "link": "https://stackoverflow.com/users/4635560/manthan-tilva"}, "is_accepted": false, "score": 2, "last_activity_date": 1576574725, "creation_date": 1576574725, "answer_id": 59371121, "question_id": 59177728, "link": "https://stackoverflow.com/questions/59177728/efficient-way-to-compare-more-50-strings/59371121#59371121", "title": "Efficient way to compare more 50 strings", "body": "<p>With information provided by you, I tried various variations to find out best way to achieve objective. I am listing best one here. You can see other methods <a href=\"https://github.com/manthanrtilva/stackoverflow/blob/master/59177728/Main.cpp\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>You can compile it and run <code>run.sh</code> to compare performance of all cases. </p>\n\n<pre><code>std::string Method6(const std::string &amp;str, int val) {\n  static std::array&lt;std::string, 5&gt; NUMBERS{\"FIRST\", \"SECOND\", \"THIRD\",\n                                            \"FOURTH\", \"FIFTH\"};\n  static std::array&lt;std::vector&lt;std::string&gt;, 5&gt; VALUES{\n      std::vector&lt;std::string&gt;{\"FIRST\", \"hai1\", \"bye1\"},\n      std::vector&lt;std::string&gt;{\"Hello1\", \"SECOND\", \"bye1\"},\n      std::vector&lt;std::string&gt;{\"Hello1\", \"hai1\", \"THIRD\"},\n      std::vector&lt;std::string&gt;{\"FOURTH\", \"hai1\", \"bye1\"},\n      std::vector&lt;std::string&gt;{\"Hello1\", \"FIFTH\", \"bye1\"}};\n  for (int i = 0; i &lt; NUMBERS.size(); ++i) {\n    if (NUMBERS[i] == str) {\n      return VALUES[i][val];\n    }\n  }\n  return \"\";\n}\n</code></pre>\n\n<p>For simplicity I have been using <code>NUMBERS</code> with length of 5 but you can use what ever length you want to. </p>\n\n<p><code>VALUES</code> is <code>std::array</code> of <code>std::vector</code> so you can add any number if element to <code>std::vector</code>.</p>\n\n<blockquote>\n  <p>output from github code. </p>\n\n<pre><code>Method1   880\nMethod2   851\nMethod3   7292\nMethod4   989\nMethod5   598\nMethod6   440\n</code></pre>\n</blockquote>\n\n<p>You output may be different based on you system and system load at the time of execution. </p>\n"}], "owner": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "accepted_answer_id": 59282655, "answer_count": 3, "score": 5, "last_activity_date": 1576593383, "creation_date": 1575467943, "last_edit_date": 1576321591, "question_id": 59177728, "link": "https://stackoverflow.com/questions/59177728/efficient-way-to-compare-more-50-strings", "title": "Efficient way to compare more 50 strings", "body": "<p>I have method which takes two parameters one as <code>string</code> and other as <code>int</code>.</p>\n\n<p>The  string has to compare with more than <strong>50 string</strong> and Once  the match is found int value need to be mapped with hard coded string as Example below </p>\n\n<p>EX: </p>\n\n<pre><code>  string Compare_Method(std::string str, int val) {\n\n     if(str == \"FIRST\")\n{\n  std::array&lt;std::string, 3&gt; real_value = {\"Hello1\",\"hai1\",\"bye1\"}\n  return real_value[val];\n}\n\n     else if(str == \"SECOND\")\n{\n  std::array&lt;std::string, 4&gt; real_value = {\"Hello2\",\"hai2\",\"bye2\"}\n  return real_value[val];\n}\n\n     else if(str == \"THIRD\")\n{\n  std::array&lt;std::string, 5&gt; real_value = {\"Hello3\",\"hai3\",\"bye3\"}\n  return real_value[val];\n}\n\n//----- 50+ else if\n\n}\n</code></pre>\n\n<p>My approach is as above. What will be the efficient way </p>\n\n<p><strong>1.To compare more than 50 string.</strong></p>\n\n<p><strong>2. create std::array for each if case</strong></p>\n\n<p><strong>EDITED : std::array size is not fixed it can be 3,4,5 as edited above.</strong></p>\n"}, {"tags": ["c++", "algorithm", "struct", "iterator", "find"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 3, "creation_date": 1575467583, "post_id": 59177607, "comment_id": 104576438, "body": "You loop through the vector, checking each <code>Stock</code> inside to see if it&#39;s the right one."}, {"owner": {"reputation": 1472, "user_id": 6942918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EzNAX.png?s=128&g=1", "display_name": "kyriakosSt", "link": "https://stackoverflow.com/users/6942918/kyriakosst"}, "edited": false, "score": 0, "creation_date": 1575467839, "post_id": 59177607, "comment_id": 104576598, "body": "Apart from the straightforward answer of having an if statement in a loop, also take a look at <a href=\"https://stackoverflow.com/questions/15517991/search-a-vector-of-objects-by-object-attribute\">this So post</a>"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 2, "creation_date": 1575468594, "post_id": 59177607, "comment_id": 104577080, "body": "<a href=\"https://stackoverflow.com/posts/59177607/edit\">Edit</a> the question and put the actual struct in it. <code>id</code> is <i>not</i> a private member of <code>Stock</code> as the question now stands - which you only mention in a comment to one of the answers."}], "answers": [{"comments": [{"owner": {"reputation": 1472, "user_id": 6942918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EzNAX.png?s=128&g=1", "display_name": "kyriakosSt", "link": "https://stackoverflow.com/users/6942918/kyriakosst"}, "reply_to_user": {"reputation": 37, "user_id": 11453590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9f941ba097f40e7e41de5c33c69376f?s=128&d=identicon&r=PG&f=1", "display_name": "user11453590", "link": "https://stackoverflow.com/users/11453590/user11453590"}, "edited": false, "score": 2, "creation_date": 1575468047, "post_id": 59177621, "comment_id": 104576700, "body": "@user11453590 You should add this to your question. BUT,  the <code>struct</code> keyword in C++ means that (by default) all members of the struct are public. So something is clearly missing from your question"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 37, "user_id": 11453590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9f941ba097f40e7e41de5c33c69376f?s=128&d=identicon&r=PG&f=1", "display_name": "user11453590", "link": "https://stackoverflow.com/users/11453590/user11453590"}, "edited": false, "score": 3, "creation_date": 1575468058, "post_id": 59177621, "comment_id": 104576706, "body": "@user11453590 If <code>id</code> is a private member of <code>Stock</code>, then the <code>Stock</code> definition you showed us is different from the actual one. Please, do not waste our time and write your question more carefully using your actual code/case."}, {"owner": {"reputation": 1472, "user_id": 6942918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EzNAX.png?s=128&g=1", "display_name": "kyriakosSt", "link": "https://stackoverflow.com/users/6942918/kyriakosst"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1575468262, "post_id": 59177621, "comment_id": 104576840, "body": "@DanielsaysreinstateMonica I agree, but please be friendlier. The user is clearly learning, it doesn&#39;t mean that they are careless. You are not helping either"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 1472, "user_id": 6942918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EzNAX.png?s=128&g=1", "display_name": "kyriakosSt", "link": "https://stackoverflow.com/users/6942918/kyriakosst"}, "edited": false, "score": 1, "creation_date": 1575468316, "post_id": 59177621, "comment_id": 104576873, "body": "@kyriakosSt asking to fix error in code that does not have the error is careless, what else?"}, {"owner": {"reputation": 1472, "user_id": 6942918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EzNAX.png?s=128&g=1", "display_name": "kyriakosSt", "link": "https://stackoverflow.com/users/6942918/kyriakosst"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1575468815, "post_id": 59177621, "comment_id": 104577216, "body": "@formerlyknownas_463035818 May be simply due to lack of knowledge, but even so, saying to a novice user (both in SO and evidently in programming) that they waste our time is not the way to go."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 1472, "user_id": 6942918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EzNAX.png?s=128&g=1", "display_name": "kyriakosSt", "link": "https://stackoverflow.com/users/6942918/kyriakosst"}, "edited": false, "score": 1, "creation_date": 1575468890, "post_id": 59177621, "comment_id": 104577250, "body": "@kyriakosSt please dont turn everything into a discussion about friendlyness / welcomingness. Not showing the code that matches the error is wasting time and it has to be allowed to say this (also to a new user)"}, {"owner": {"reputation": 1472, "user_id": 6942918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EzNAX.png?s=128&g=1", "display_name": "kyriakosSt", "link": "https://stackoverflow.com/users/6942918/kyriakosst"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1575469242, "post_id": 59177621, "comment_id": 104577468, "body": "@formerlyknownas_463035818 I respectfully disagree for this specific case, but we can have different opinions. Sorry for starting this conversation"}, {"owner": {"reputation": 37, "user_id": 11453590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9f941ba097f40e7e41de5c33c69376f?s=128&d=identicon&r=PG&f=1", "display_name": "user11453590", "link": "https://stackoverflow.com/users/11453590/user11453590"}, "edited": false, "score": 0, "creation_date": 1575469518, "post_id": 59177621, "comment_id": 104577667, "body": "Thanks I solved the issue. Sorry for being unclear and my lack of knowledge."}], "tags": [], "owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "is_accepted": true, "score": 4, "last_activity_date": 1575467596, "creation_date": 1575467596, "answer_id": 59177621, "question_id": 59177607, "link": "https://stackoverflow.com/questions/59177607/searching-vector-of-struct/59177621#59177621", "title": "Searching Vector of Struct", "body": "<pre><code>for(auto data : all_data){\n    if(data.id == id)\n        std::cout &lt;&lt; \"Found\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1575468546, "last_edit_date": 1575468546, "creation_date": 1575468010, "answer_id": 59177751, "question_id": 59177607, "link": "https://stackoverflow.com/questions/59177607/searching-vector-of-struct/59177751#59177751", "title": "Searching Vector of Struct", "body": "<p>You can use the standard algorithm <code>std::find_if</code>. For example</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n\n//\u2026\n\nint id = some_value;\n\nauto it = std::find_if( std::begin( all_data ), std::end( all_data ),\n                        [=]( const Staock &amp;stocl )\n                        {\n                            return stock.id == id;\n                        } );\n\nif ( it != std::end( all_data ) )\n{\n    std::cout &lt;&lt; it-&gt;id &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Instead of the lambda you could use the function object <code>std::equal_to</code> and <code>std::bind</code> provided that you are going to compare the whole objects of the type Stock or if you will declare a corresponding comparison operator.</p>\n\n<p>Here is a demonstrative program that uses a lambda</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n\nstruct Stock{\n    int id;\n    std::string title;\n    std::string colour;\n    std::string size;\n    int quantity;\n    float cost;\n};\n\nint main() \n{\n    std::vector&lt;Stock&gt; all_data =\n    {\n        { 1, \"A\" }, { 2, \"B\" }, { 3, \"C\" }, { 4, \"D\" }, { 5, \"E\" }\n    };\n\n    int id = 3;\n\n    auto it = std::find_if( std::begin( all_data ), std::end( all_data ),\n                            [=]( const Stock &amp;stock )\n                            {\n                                return stock.id == id;\n                            } );\n\n    if ( it != std::end( all_data ))\n    {\n        std::cout &lt;&lt; it-&gt;id &lt;&lt; \": \" &lt;&lt; it-&gt;title &lt;&lt; '\\n';\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>3: C\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1575468421, "post_id": 59177775, "comment_id": 104576946, "body": "curiosity: why inherit from <code>unary_function</code> ?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1575541509, "post_id": 59177775, "comment_id": 104604560, "body": "Interesting. <code>unary_function</code> was deprecated in C++11 and is supposed to have been removed in C++17, but both <code>clang++</code> and <code>g++</code> have kept it. <a href=\"https://godbolt.org/z/JgbXDR\" rel=\"nofollow noreferrer\">godbolt.org/z/JgbXDR</a>"}], "tags": [], "owner": {"reputation": 411, "user_id": 8141382, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L6JrAPVc2Eg/AAAAAAAAAAI/AAAAAAAAARE/bu8c7r3lu_M/photo.jpg?sz=128", "display_name": "GokuMizuno", "link": "https://stackoverflow.com/users/8141382/gokumizuno"}, "is_accepted": false, "score": 1, "last_activity_date": 1575468065, "creation_date": 1575468065, "answer_id": 59177775, "question_id": 59177607, "link": "https://stackoverflow.com/questions/59177607/searching-vector-of-struct/59177775#59177775", "title": "Searching Vector of Struct", "body": "<p>You can try something like</p>\n\n<pre><code>it = std::find_if(all_data.begin(), all_data.end(), std::bind(&amp;all_data::id, _1) == data.id);\n</code></pre>\n\n<p>from <code>#include &lt;algorithm&gt;</code></p>\n\n<p>Or, you can write your own function object</p>\n\n<pre><code>struct find_id : std::unary_function&lt;Stock, bool&gt; {\n    int id;\n    find_id(int id):id(id) { }\n    bool operator()(Stock const&amp; m) const {\n        return m.id == id;\n    }\n};\n\nit = std::find_if(alll_data.Stock.begin(), all_data.Stock.end(), \n         find_id(currentStockObject));\n</code></pre>\n\n<p>Modify as needed.</p>\n"}], "owner": {"reputation": 37, "user_id": 11453590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9f941ba097f40e7e41de5c33c69376f?s=128&d=identicon&r=PG&f=1", "display_name": "user11453590", "link": "https://stackoverflow.com/users/11453590/user11453590"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1575500577, "accepted_answer_id": 59177621, "answer_count": 3, "score": 0, "last_activity_date": 1575468690, "creation_date": 1575467526, "last_edit_date": 1575468690, "question_id": 59177607, "link": "https://stackoverflow.com/questions/59177607/searching-vector-of-struct", "closed_reason": "Duplicate", "title": "Searching Vector of Struct", "body": "<p>I have a struct like this:</p>\n\n<pre><code>struct Stock{\n    int id;\n    string title;\n    string colour;\n    string size;\n    int quantity;\n    float cost;\n}\n</code></pre>\n\n<p>Vector</p>\n\n<pre><code>vector&lt;Stock&gt; all_data;\n</code></pre>\n\n<p>Now I want to search for a specific stock in the <strong>all_data</strong> vector by the ID. How can I do this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 3, "creation_date": 1575467557, "post_id": 59177564, "comment_id": 104576418, "body": "That is not how to overload the <code>operator&lt;&lt;</code> in either case. See <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\">here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "edited": false, "score": 0, "creation_date": 1575470127, "post_id": 59177631, "comment_id": 104578054, "body": "does not compile. but if I add friend keyword then the compilation works fne"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "edited": false, "score": 0, "creation_date": 1575472088, "post_id": 59177631, "comment_id": 104579223, "body": "@MOHAMED If that&#39;s the case, your real <code>Box</code> definition is not like what you put in the question. If you use the <code>Box</code> definition as it is in the question, it works without <code>friend</code>: <a href=\"https://godbolt.org/z/e9zdhX\" rel=\"nofollow noreferrer\">godbolt.org/z/e9zdhX</a> - But sure, making <code>operator&lt;&lt;</code> a friend is common - or if you already have public accessors for <code>l</code>, <code>b</code> and <code>h</code> you can use those in <code>operator&lt;&lt;</code> if you don&#39;t want to make <code>operator&lt;&lt;</code> a friend."}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 5, "last_activity_date": 1575467615, "creation_date": 1575467615, "answer_id": 59177631, "question_id": 59177564, "link": "https://stackoverflow.com/questions/59177564/compilation-error-when-i-overload-cout-operator-inside-the-class/59177631#59177631", "title": "compilation error when I overload cout operator inside the class", "body": "<p>The member function:</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream&amp; os);\n</code></pre>\n\n<p>would be useful in this case:</p>\n\n<pre><code>boxobject &lt;&lt; os;\n</code></pre>\n\n<p>which is rarely what you want to do. Instead, you need this free function:</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Box&amp; inb) {\n    os &lt;&lt; (inb.l * inb.b * inb.h);\n    return os;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1575468742, "last_edit_date": 1575468742, "creation_date": 1575467665, "answer_id": 59177647, "question_id": 59177564, "link": "https://stackoverflow.com/questions/59177564/compilation-error-when-i-overload-cout-operator-inside-the-class/59177647#59177647", "title": "compilation error when I overload cout operator inside the class", "body": "<p>You can't overload <code>operator &lt;&lt;</code> that way and have it work like normal.  When you have</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream&amp; os) {\n    os &lt;&lt; (l * b * h);\n    return os;\n}\n</code></pre>\n\n<p>What you really have is</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(Box&amp; this_, ostream&amp; os) {\n    os &lt;&lt; (this_.l * this_.b * this_.h);\n    return os;\n}\n</code></pre>\n\n<p>Which means you would need to call <code>cout</code> like</p>\n\n<pre><code>B &lt;&lt; cout &lt;&lt; endl;\n</code></pre>\n\n<p>The reason for this is that all class member functions have an implicit parameter of a reference type to the class as their first parameter.  The compiler inserts this for you as that is how the member function knows which object to work on.</p>\n"}, {"comments": [{"owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "edited": false, "score": 0, "creation_date": 1575470150, "post_id": 59177719, "comment_id": 104578070, "body": "the variables are public in my class. I used your function but still does not work. I added friend keyword and the compilation work now"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "edited": false, "score": 0, "creation_date": 1575480407, "post_id": 59177719, "comment_id": 104584074, "body": "@MOHAMED I don&#39;t understand your comment (or the comment you made to my answer). This answer already makes it a <code>friend</code>. Where did you add the <code>friend</code> keyword to this answer exacly?"}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": false, "score": 1, "last_activity_date": 1575467919, "creation_date": 1575467919, "answer_id": 59177719, "question_id": 59177564, "link": "https://stackoverflow.com/questions/59177564/compilation-error-when-i-overload-cout-operator-inside-the-class/59177719#59177719", "title": "compilation error when I overload cout operator inside the class", "body": "<p>The expression <code>X &lt;&lt; Y</code> (when at least one operand has class or enum type) looks for whether <code>operator&lt;&lt;(X, Y)</code> or <code>X.operator(Y)</code> can be called.</p>\n\n<p>So in <code>cout &lt;&lt; B</code>, it looks for <code>operator&lt;&lt;(cout, B)</code> and <code>cout.operator&lt;&lt;(B)</code>. Notice it's not at all looking for members of <code>B</code>. It looks for members of <code>cout</code>, but you can't add new members to a standard library class. So you need to define the non-member function.</p>\n\n<p>The member you did define would make <code>B &lt;&lt; std::cout &lt;&lt; std::endl;</code> work, but that doesn't look right, obviously.</p>\n\n<p>One other option, necessary if the operator needs to use private members of the class, or nice if we just want the operator visible in the class's <code>public</code> section, is to declare it a <code>friend</code>, which is really a non-member:</p>\n\n<pre><code>class Box {\npublic:\n    Box(int length, int breadth, int height) : l(length), b(breadth), h(height) {}\n\n    friend std::ostream&amp; operator&lt;&lt;(ostream&amp; os, const Box&amp; box) {\n        os &lt;&lt; (box.l * box.b * box.h);\n        return os;\n    }\n\nprivate:\n    int l, b, h;\n};\n</code></pre>\n"}], "owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1575468742, "creation_date": 1575467399, "question_id": 59177564, "link": "https://stackoverflow.com/questions/59177564/compilation-error-when-i-overload-cout-operator-inside-the-class", "title": "compilation error when I overload cout operator inside the class", "body": "<p>compilation error when I overload cout operator inside the class</p>\n\n<p>What I am missing?</p>\n\n<p>Here after the source code. The problem disappear when I define the overload operator outside the class</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Box {\n    public:\n                int l, b, h;\n        Box(int length, int breadth, int height) : l(length), b(breadth), h(height) {}\n#if 1\n        ostream&amp; operator&lt;&lt;(ostream&amp; os) {\n            os &lt;&lt; (l * b * h);\n            return os;\n        }\n#endif\n};\n\n#if 0\nostream&amp; operator&lt;&lt;(ostream&amp; os, Box inb) {\n    os &lt;&lt; (inb.l * inb.b * inb.h);\n    return os;\n}\n#endif\n\n\nint main(void) {\n    Box B(3,4,5);\n        cout &lt;&lt; B &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "mingw-w64"], "answers": [{"tags": [], "owner": {"reputation": 322, "user_id": 2734026, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fg5k2.jpg?s=128&g=1", "display_name": "Evan Hendler", "link": "https://stackoverflow.com/users/2734026/evan-hendler"}, "is_accepted": true, "score": 0, "last_activity_date": 1575471676, "creation_date": 1575471676, "answer_id": 59178930, "question_id": 59177540, "link": "https://stackoverflow.com/questions/59177540/including-libraries-while-cross-compiling-using-mingw-w64-on-ubuntu/59178930#59178930", "title": "Including libraries while cross-compiling using Mingw-w64 on Ubuntu", "body": "<p>Easy day.</p>\n\n<p>Download source tarball. Extract: </p>\n\n<p><code>tar zxvf mylibrary.tar.gz</code></p>\n\n<p><code>cd mylibrary</code></p>\n\n<p><code>./configure --target x86_64-w64-mingw32 --prefix /usr/x86_64-w64-mingw32</code></p>\n\n<p>Compile:</p>\n\n<p><code>x86_64-w64-mingw32-g++ myprogram.cpp -o myprogram.exe -std=c++11 -static</code></p>\n"}], "owner": {"reputation": 322, "user_id": 2734026, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fg5k2.jpg?s=128&g=1", "display_name": "Evan Hendler", "link": "https://stackoverflow.com/users/2734026/evan-hendler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 59178930, "answer_count": 1, "score": 0, "last_activity_date": 1575471676, "creation_date": 1575467323, "question_id": 59177540, "link": "https://stackoverflow.com/questions/59177540/including-libraries-while-cross-compiling-using-mingw-w64-on-ubuntu", "title": "Including libraries while cross-compiling using Mingw-w64 on Ubuntu", "body": "<p>I'm trying to cross-compile a program with the following libraries:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;curl/curl.h&gt;\n#include &lt;bits/stdc++.h&gt;\n#include &lt;gmp.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;vector&gt;\n</code></pre>\n\n<p>Due to the nature of the project, the source is compiled to download. The server runs Ubuntu 18.04. I've succeeded in employing this using <code>mingw-w64</code> on less complex programs by running:</p>\n\n<p><code>x86_64-w64-mingw32-g++ api_1.cpp -o api_1.exe -std=c++11 -static</code></p>\n\n<p>This fails when I run it on the above example with:</p>\n\n<pre><code>api_1.cpp:3:10: fatal error: curl/curl.h: No such file or directory\n #include &lt;curl/curl.h&gt;\n      ^~~~~~~~~~~~~\ncompilation terminated.\n</code></pre>\n\n<p>Without <code>#include &lt;curl/curl.h&gt;</code>, <code>#include &lt;gmp.h&gt;</code> fails.</p>\n\n<p>Looking in <code>/usr/x86_64-w64-mingw32/include</code>, neither of those libraries are there. How do I add additional libraries to <code>mingw-w64</code>?</p>\n"}, {"tags": ["c++", "encryption"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1575467091, "post_id": 59177452, "comment_id": 104576146, "body": "&quot; but at the end the letters &quot;u, v, w, x, y, z&quot; are changed to &quot;k, l, m, n, o, p&quot;&quot; what else should happen? PLease include actual and desired output"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1575467210, "post_id": 59177452, "comment_id": 104576220, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> will help tremendously."}, {"owner": {"reputation": 13848, "user_id": 276193, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3d9b60ead1b0c8420c03b203832e8d5f?s=128&d=identicon&r=PG", "display_name": "learnvst", "link": "https://stackoverflow.com/users/276193/learnvst"}, "edited": false, "score": 0, "creation_date": 1575467834, "post_id": 59177452, "comment_id": 104576596, "body": "1. What should happen instead? 2. Should be <code>void ciph(yadda)</code> if you are modifying arr in-place using pointer"}], "answers": [{"tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": false, "score": 0, "last_activity_date": 1575468286, "creation_date": 1575468286, "answer_id": 59177853, "question_id": 59177452, "link": "https://stackoverflow.com/questions/59177452/problem-with-cipher-showing-doubled-letters-c/59177853#59177853", "title": "Problem with cipher showing doubled letters c++", "body": "<blockquote>\n  <p>This should change every letter to some other i.e \"a to g\" etc. Everything is good but at the end the letters \"u, v, w, x, y, z\" are changed to \"k, l, m, n, o, p\" same as \"a, b, c, d, e, f\".</p>\n</blockquote>\n\n<p>Consider these lines of code</p>\n\n<pre><code>if (arr[i]&lt;=122 &amp;&amp; arr[i]&gt;=113)\n{ //^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    arr[i]=arr[i]-test(a);\n}\n\nelse\n{\n    arr[i]=arr[i]+test(a);\n}\n</code></pre>\n\n<p>You can rewrite those as (assumning an ASCII encoding)</p>\n\n<pre><code>if ( 'K' &lt;= arr[i]  &amp;&amp; arr[i] &lt;= 'R' )\n{ // ^^^                         ^^^       \n    arr[i]=arr[i]-test(a);\n}\n\nelse\n{\n    arr[i]=arr[i]+test(a);\n}\n</code></pre>\n\n<p>Note that <code>'R'</code> is different from <code>'r'</code>. If your test case contains only lower case letters, the first branch will never be executed.</p>\n\n<p>In general you should avoid magic numbers like <code>122</code> and use a standard container like <code>std::string</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 12480103, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VR1HHXXm3MY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re_si_pt5p3gVIBRWeySB-fy9DOxw/photo.jpg?sz=128", "display_name": "Arashi", "link": "https://stackoverflow.com/users/12480103/arashi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575468286, "creation_date": 1575466991, "question_id": 59177452, "link": "https://stackoverflow.com/questions/59177452/problem-with-cipher-showing-doubled-letters-c", "title": "Problem with cipher showing doubled letters c++", "body": "<p>I have a little problem with my code. This should change every letter to some other i.e \"a to g\" etc. Everything is good but at the end the letters \"u, v, w, x, y, z\" are changed to \"k, l, m, n, o, p\" same as \"a, b, c, d, e, f\". I spent like 5 hours to find the problem and still don't know what to do. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n\n\nint test(int a)\n{\n    if(a==1){\n        return a;\n    }\n        return a - test(a-1);\n}\n\n\nchar ciph(char *arr, int a)\n{\n    int lenght = strlen(arr);\n\n    for(int i=0;i&lt;lenght &amp;&amp; arr[i]!='\\0';i++)\n    {\n        if (isalpha(arr[i]))\n        {\n            if (arr[i]&lt;=122 &amp;&amp; arr[i]&gt;=113)\n            {\n                 arr[i]=arr[i]-test(a);\n            }\n\n            else\n            {\n                 arr[i]=arr[i]+test(a);\n            }\n\n        }\n    }\n\n    std::cout &lt;&lt; arr &lt;&lt; std::endl;\n\n\n}\n\nint main()\n{\n    int b=19;\n    char arr[100];\n    std::cin.getline(arr, 100);\n    std::cout &lt;&lt; ciph(arr, b) &lt;&lt; std::endl;\n\n return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "linked-list", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 4915, "user_id": 10686048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd06d00a80b9b69e83f561ee5a392?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisMM", "link": "https://stackoverflow.com/users/10686048/chrismm"}, "edited": false, "score": 1, "creation_date": 1575467654, "post_id": 59177404, "comment_id": 104576476, "body": "Your question isn&#39;t making sense to me. But in in the case of the very last <code>Patterns</code> object created, its <code>next_pattern</code> may point to anywhere."}, {"owner": {"reputation": 692, "user_id": 3789716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H6gk9.png?s=128&g=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/3789716/alessandro"}, "edited": false, "score": 0, "creation_date": 1575467696, "post_id": 59177404, "comment_id": 104576498, "body": "Hi, welcome to SOF! Can you please provide an error message that can explain how and when your program fails?"}, {"owner": {"reputation": 1, "user_id": 12181122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2xYkRg_v1rE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfEIcdhBRaMOSaHykAJzfwjj3fr8Q/photo.jpg?sz=128", "display_name": "HY Lim", "link": "https://stackoverflow.com/users/12181122/hy-lim"}, "edited": false, "score": 0, "creation_date": 1575510488, "post_id": 59177404, "comment_id": 104594201, "body": "Thank you for your advice. I modified the code for the {next_pattern} to get a NULL"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12181122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2xYkRg_v1rE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfEIcdhBRaMOSaHykAJzfwjj3fr8Q/photo.jpg?sz=128", "display_name": "HY Lim", "link": "https://stackoverflow.com/users/12181122/hy-lim"}, "edited": false, "score": 0, "creation_date": 1575509637, "post_id": 59178218, "comment_id": 104594027, "body": "Thank you, I modified the code. but I still have the error message"}], "tags": [], "owner": {"reputation": 2125, "user_id": 11497022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YGeg.jpg?s=128&g=1", "display_name": "Soheil Armin", "link": "https://stackoverflow.com/users/11497022/soheil-armin"}, "is_accepted": false, "score": 0, "last_activity_date": 1575469433, "creation_date": 1575469433, "answer_id": 59178218, "question_id": 59177404, "link": "https://stackoverflow.com/questions/59177404/can-the-same-structures-allocate-different-memory-sizes-in-c/59178218#59178218", "title": "Can the same structures allocate different memory sizes in C++?", "body": "<p>It should not happen but actually you are doing it by writing to a memory address which does not belogs to <code>chained_fail_log</code>.\nIf <code>chained_fail_log</code> should have <code>chain_cell_length</code> characters length minus the null terminator then you should :</p>\n\n<pre><code>// one more for null terminator\ncurpattern-&gt;chained_fail_log =  new char[chain_cell_length+1]; \nfor(int i = 0; i &lt; chain_cell_length; i++ ) curpattern-&gt;chained_fail_log[i] = '0';\ncurpattern-&gt;chained_fail_log[chain_cell_length] = '\\0'\n</code></pre>\n\n<p>In your original code <code>curpattern-&gt;chained_fail_log[chain_cell_length] = '\\0'</code> is breaking memory boundry of your <code>chained_fail_log</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12181122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2xYkRg_v1rE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfEIcdhBRaMOSaHykAJzfwjj3fr8Q/photo.jpg?sz=128", "display_name": "HY Lim", "link": "https://stackoverflow.com/users/12181122/hy-lim"}, "is_accepted": false, "score": 0, "last_activity_date": 1575627792, "last_edit_date": 1575627792, "creation_date": 1575622795, "answer_id": 59209875, "question_id": 59177404, "link": "https://stackoverflow.com/questions/59177404/can-the-same-structures-allocate-different-memory-sizes-in-c/59209875#59209875", "title": "Can the same structures allocate different memory sizes in C++?", "body": "<p>I finally find the answer.</p>\n\n<p>In some cases, data was inserted in the curpattern->chained_fail_log[-1] on my program.</p>\n\n<p>I fixed these cases, then the memory deallocation(delete) works without errors.</p>\n"}], "owner": {"reputation": 1, "user_id": 12181122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2xYkRg_v1rE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfEIcdhBRaMOSaHykAJzfwjj3fr8Q/photo.jpg?sz=128", "display_name": "HY Lim", "link": "https://stackoverflow.com/users/12181122/hy-lim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575627792, "creation_date": 1575466836, "last_edit_date": 1575510167, "question_id": 59177404, "link": "https://stackoverflow.com/questions/59177404/can-the-same-structures-allocate-different-memory-sizes-in-c", "title": "Can the same structures allocate different memory sizes in C++?", "body": "<p>My structure code is like this:</p>\n\n<pre><code>typedef struct Patterns {\n    int pattern_num;\n    char *chained_fail_log;\n    Patterns *next_pattern;\n} Pat;\n</code></pre>\n\n<p>I made this structure for the linked-list, and the linked-lists are allocated by \"new\"</p>\n\n<pre><code>for( int num_of_pat = 1; num_of_pat &lt; number_of_pattern+1; num_of_pat++) {\n            curpattern-&gt;next_pattern = new Pat;\n            curpattern = curpattern-&gt;next_pattern;\n            curpattern-&gt;next_pattern = NULL;\n            curpattern-&gt;pattern_num = num_of_pat;\n            curpattern-&gt;chained_fail_log =  new char[chain_cell_length+1];\n            for(int i = 0; i &lt; chain_cell_length; i++ ) curpattern-&gt;chained_fail_log[i] = '0';\n            curpattern-&gt;chained_fail_log[chain_cell_length] = '\\0';\n}\ncurpattern-&gt;next_pattern = NULL;\n</code></pre>\n\n<p>I deleted the structure by delete. </p>\n\n<pre><code>`void Circuit_Fail_Log::freepattern() {\n    Pat * delpattern = fail_pattern_log;\n    int i = 0;\n    while( delpattern != NULL ) {\n            i++;\n            fail_pattern_log = delpattern-&gt;next_pattern;\n            printf(\"pattern_num:%d\\tchained_pattern:%s\\n\",delpattern-&gt;pattern_num,delpattern-&gt;chained_fail_log);\n                    delete[] delpattern-&gt;chained_fail_log;\n                    delpattern-&gt;chained_fail_log = NULL;\n                    delete delpattern;\n            delpattern = fail_pattern_log;\n    }\n</code></pre>\n\n<p>As you see in the code, the pointer for the next list cannot point to the next list in some cases.\nI assume that the memory size of the list became bigger than the size when it was allocated.\nSo, the linked list pointer cannot point to the next list.</p>\n\n<p>error message is </p>\n\n<pre><code>*** Error in `fextraction': double free or corruption (out):0x0000000001de9de0 ***\n======= Backtrace: =========\n/lib64/libc.so.6(+0x81679)[0x7f66390fb679]\nfextraction[0x401ae4]\nfextraction[0x401ed3]\n/lib64/libc.so.6(__libc_start_main+0xf5)[0x7f663909c505]\nfextraction[0x4008d9]\n</code></pre>\n\n<p>How can I fix this? </p>\n"}, {"tags": ["c++", "borland-c++", "borland-c"], "comments": [{"owner": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "edited": false, "score": 0, "creation_date": 1575466767, "post_id": 59177328, "comment_id": 104575946, "body": "Why you are preferring array of chars (e.g. <code>char kelas[5]</code>) to <code>std::string</code>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1575466959, "post_id": 59177328, "comment_id": 104576068, "body": "<code>#include&lt;iostream.h&gt;</code> -- This is not a standard header.  The correct header is <code>&lt;iostream&gt;</code>"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 3, "creation_date": 1575466964, "post_id": 59177328, "comment_id": 104576070, "body": "Borland C++ 5 came out in 1997.  It predates C++ standardization.  So I have to wonder, why is this question tagged <code>c++11</code> and <code>c++-cli</code>?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1575466985, "post_id": 59177328, "comment_id": 104576082, "body": "@aldo Some arrays have too small size to store the entered strings."}, {"owner": {"reputation": 21, "user_id": 11803617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78af4b316027679fbef6866f9565f589?s=128&d=identicon&r=PG&f=1", "display_name": "aldo", "link": "https://stackoverflow.com/users/11803617/aldo"}, "reply_to_user": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "edited": false, "score": 0, "creation_date": 1575467295, "post_id": 59177328, "comment_id": 104576273, "body": "@Gupta i just found it on Google code, so i don&#39;t know which one is better, and this is my first time on using c++"}, {"owner": {"reputation": 21, "user_id": 11803617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78af4b316027679fbef6866f9565f589?s=128&d=identicon&r=PG&f=1", "display_name": "aldo", "link": "https://stackoverflow.com/users/11803617/aldo"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1575467337, "post_id": 59177328, "comment_id": 104576293, "body": "@VladfromMoscow how can i solve it sir? i still don&#39;t get it"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1575467500, "post_id": 59177328, "comment_id": 104576378, "body": "@aldo <i>i just found it on Google code</i> -- Visual Studio 2019 Community -- g++ 8.x or above using any good IDE.  All these are free, better options than a 20+ year old compiler."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1575467536, "post_id": 59177328, "comment_id": 104576403, "body": "@aldo Make the sizes of the arrays greater. You are entering strings that are greater than the sizes of the arrays."}, {"owner": {"reputation": 21, "user_id": 11803617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78af4b316027679fbef6866f9565f589?s=128&d=identicon&r=PG&f=1", "display_name": "aldo", "link": "https://stackoverflow.com/users/11803617/aldo"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1575467822, "post_id": 59177328, "comment_id": 104576582, "body": "@VladfromMoscow no sir, the caracter of my array is 18(eighteen), and the size of the array i made was 30(thirty),"}, {"owner": {"reputation": 21, "user_id": 11803617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78af4b316027679fbef6866f9565f589?s=128&d=identicon&r=PG&f=1", "display_name": "aldo", "link": "https://stackoverflow.com/users/11803617/aldo"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1575467922, "post_id": 59177328, "comment_id": 104576642, "body": "@PaulMcKenzie I have downloaded Visual Studio anyway sir, but my leturer wanted me to use Borland, so i have no choice for using any other compiler. Can you please sir, suggest me what should i do to fix this problem?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1575468596, "post_id": 59177328, "comment_id": 104577082, "body": "<i>but my lecturer wanted me to use Borland</i> -- So your lecturer also suggested to use <code>gets</code>, a function that from even 20 years ago, is dangerous to use?"}, {"owner": {"reputation": 21, "user_id": 11803617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78af4b316027679fbef6866f9565f589?s=128&d=identicon&r=PG&f=1", "display_name": "aldo", "link": "https://stackoverflow.com/users/11803617/aldo"}, "edited": false, "score": 0, "creation_date": 1575469000, "post_id": 59177328, "comment_id": 104577317, "body": "the &#39;gets&#39; is i am coding it sir, i just search on google and found one interesting basic program using <b>Borland</b>, so i used it. My lecturer just teaches us with Borland, and the study just happen once til we have to make a program with it"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1575469291, "post_id": 59177328, "comment_id": 104577508, "body": "<i>i just search on google</i> -- Learning C++ via google is not the way to learn a language such as C++."}, {"owner": {"reputation": 21, "user_id": 11803617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78af4b316027679fbef6866f9565f589?s=128&d=identicon&r=PG&f=1", "display_name": "aldo", "link": "https://stackoverflow.com/users/11803617/aldo"}, "edited": false, "score": 0, "creation_date": 1575469434, "post_id": 59177328, "comment_id": 104577608, "body": "Emm, i am sorry to hear that sir. Maybe i am wrong in a way for learning this language, any suggestion from you for such a beginner like me sir?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1575512570, "post_id": 59177328, "comment_id": 104594586, "body": "Borland is so ancient it doesn&#39;t really fit current reasonable definitions of &quot;C++&quot;; it&#39;s more like a relic of when it was on the way to becoming the language it is. You would get more useful help if you can learn actual C++. If a course requires using Borland C++, I can only recommend dropping the class if you still can."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1575514374, "post_id": 59177328, "comment_id": 104594928, "body": "The arrays are too small for the amount you are typing in"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11803617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78af4b316027679fbef6866f9565f589?s=128&d=identicon&r=PG&f=1", "display_name": "aldo", "link": "https://stackoverflow.com/users/11803617/aldo"}, "edited": false, "score": 0, "creation_date": 1575468512, "post_id": 59177596, "comment_id": 104577018, "body": "I&#39;ll try it sir,"}, {"owner": {"reputation": 21, "user_id": 11803617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78af4b316027679fbef6866f9565f589?s=128&d=identicon&r=PG&f=1", "display_name": "aldo", "link": "https://stackoverflow.com/users/11803617/aldo"}, "edited": false, "score": 0, "creation_date": 1575468852, "post_id": 59177596, "comment_id": 104577231, "body": "it says <i>&quot;Qualifier &#39;std&#39; is not a class or namespace name&quot;</i> , do i need to declare some header first sir?"}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 21, "user_id": 11803617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78af4b316027679fbef6866f9565f589?s=128&d=identicon&r=PG&f=1", "display_name": "aldo", "link": "https://stackoverflow.com/users/11803617/aldo"}, "edited": false, "score": 0, "creation_date": 1575472158, "post_id": 59177596, "comment_id": 104579270, "body": "You will need to <code>#include &lt;string&gt;</code>."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 21, "user_id": 11803617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78af4b316027679fbef6866f9565f589?s=128&d=identicon&r=PG&f=1", "display_name": "aldo", "link": "https://stackoverflow.com/users/11803617/aldo"}, "edited": false, "score": 0, "creation_date": 1575472270, "post_id": 59177596, "comment_id": 104579340, "body": "Also don&#39;t use <code>.h</code> at the end of your <code>#include</code> names - that doesn&#39;t put them into <code>namespace std;</code> and isn&#39;t really C++."}, {"owner": {"reputation": 21, "user_id": 11803617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78af4b316027679fbef6866f9565f589?s=128&d=identicon&r=PG&f=1", "display_name": "aldo", "link": "https://stackoverflow.com/users/11803617/aldo"}, "edited": false, "score": 0, "creation_date": 1575501995, "post_id": 59177596, "comment_id": 104592209, "body": "I followed what you said sir, but it gave me another error like this <i>&#39;cout&#39; is not a member of &#39;std&#39;</i> and <i>&#39;cin&#39; is not a member of &#39;std&#39;</i>, and do i have to put <b>using namespace std;</b> sir, after declare some of library in the heading?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1575512590, "post_id": 59177596, "comment_id": 104594594, "body": "I believe Borland C++ doesn&#39;t have any <code>std::</code> support at all."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1575467799, "last_edit_date": 1575467799, "creation_date": 1575467481, "answer_id": 59177596, "question_id": 59177328, "link": "https://stackoverflow.com/questions/59177328/the-variabel-in-my-program-is-not-giving-the-value-user-already-gave/59177596#59177596", "title": "The variabel in my program is not giving the value user already gave", "body": "<p>All of your input arrays:</p>\n\n<pre><code>  char nama[25];\n  char kelas[5];\n  char jurusan[30];\n  char universitas[30];\n  char alamat[30];\n</code></pre>\n\n<p>are going to be one continuous block of <code>char</code>s.  Your input methods will easily overflow from one array to the next causing all sorts of havoc.</p>\n\n<p>Try using <code>std::string</code> instead and input from <code>std::cin</code>:</p>\n\n<pre><code>  std::string nama;\n  std::string kelas;\n  std::string jurusan;\n  std::string universitas;\n  std::string alamat;\n\n  std::cout &lt;&lt; \"Masukkan Nama Anda\\t : \";\n  std::cin &gt;&gt; nama;\n  std::cout &lt;&lt; std::endl;\n  std::cout &lt;&lt;\"Kelas\\t\\t\\t : \";\n  std::cin &gt;&gt; kelas;\n  std::cout &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"Jurusan\\t\\t\\t : \";\n  std::cin &gt;&gt; jurusan;\n  std::cout &lt;&lt;std::endl;\n  std::cout &lt;&lt; \"Universitas\\t\\t : \";\n  std::cin &gt;&gt; universitas;\n  std::cout &lt;&lt;std::endl;\n  std::cout &lt;&lt; \"Alamat\\t\\t\\t : \";\n  std::cin &gt;&gt; alamat;\n  std::cout &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 11803617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78af4b316027679fbef6866f9565f589?s=128&d=identicon&r=PG&f=1", "display_name": "aldo", "link": "https://stackoverflow.com/users/11803617/aldo"}, "is_accepted": false, "score": 0, "last_activity_date": 1575512174, "last_edit_date": 1575512174, "creation_date": 1575511737, "answer_id": 59187201, "question_id": 59177328, "link": "https://stackoverflow.com/questions/59177328/the-variabel-in-my-program-is-not-giving-the-value-user-already-gave/59187201#59187201", "title": "The variabel in my program is not giving the value user already gave", "body": "<p>After i tried some several suggestion to solve my own problem. Then i wonder, why there is just the variable of <strong>Jurusan</strong> which contain character that i don't know where it comes from. I tried to see it again, and then i reverse the place of another variable, also i put a comment sign <code>//comment to make it not being seen as a code by machine</code> in front of the <strong>Jurusan</strong> variable there is no problem anymore. Quite thinking, and then i just tried to count the sum of character in a variable which exactly below the <strong>Jurusan</strong> variable(<strong>Universitas</strong> variable), and then i also count the size of that variable(<strong>Universitas</strong> variable).</p>\n\n<p>After this i just realised if the word \"u\" which in the variable <strong>Jurusan</strong> is the rest of the characther which comes from the variable below the <strong>Jurusan</strong> variable, which variable <strong>Universitas</strong>.</p>\n\n<p>I am as the user, put the characther greater than the size of <strong>Universitas</strong> variable. And of course, that is wrong, and a mistake. </p>\n\n<p>I came back to the code, and make the size of the variable <strong>Universitas</strong> is greater than before, and right now the problem is solved. And you guys can see it in my picture below if that is already succed, you also can compare it with the previous picture that i sent here in the Question section which has problem.</p>\n\n<p><a href=\"https://i.stack.imgur.com/r7X9C.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r7X9C.jpg\" alt=\"This is the result that i expected, and you guys can compare it with the previoes one which has mistake before\"></a></p>\n\n<p>So, thank you guys for you who tried to help me. Cheers!</p>\n"}], "owner": {"reputation": 21, "user_id": 11803617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78af4b316027679fbef6866f9565f589?s=128&d=identicon&r=PG&f=1", "display_name": "aldo", "link": "https://stackoverflow.com/users/11803617/aldo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575512174, "creation_date": 1575466621, "last_edit_date": 1575468411, "question_id": 59177328, "link": "https://stackoverflow.com/questions/59177328/the-variabel-in-my-program-is-not-giving-the-value-user-already-gave", "title": "The variabel in my program is not giving the value user already gave", "body": "<p>I am right now learning about making a program using Borland, so this is my first time on use it. I got confused by the result, cause the result is not what I expected.</p>\n\n<p>Below is my code:</p>\n\n<pre><code>#include&lt;iostream.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;stdio.h&gt;\nvoid main()\n{\n        char nama[25];\n      char kelas[5];\n      char jurusan[30];\n      char universitas[30];\n      char alamat[30];\n\n      cout&lt;&lt;\"Masukkan Nama Anda\\t : \";\n      gets(nama);\n      cout&lt;&lt;endl;\n      cout&lt;&lt;\"Kelas\\t\\t\\t : \";\n      gets(kelas);\n      cout&lt;&lt;endl;\n      cout&lt;&lt;\"Jurusan\\t\\t\\t : \";\n      gets(jurusan);\n      cout&lt;&lt;endl;\n      cout&lt;&lt;\"Universitas\\t\\t : \";\n      gets(universitas);\n      cout&lt;&lt;endl;\n      cout&lt;&lt;\"Alamat\\t\\t\\t : \";\n      gets(alamat);\n      cout&lt;&lt;endl;\n\n      cout&lt;&lt;\"\\n\\tBIODATA ANDA SEBAGAI MAHASISWA ADALAH SEBAGAI BERIKUT:\"&lt;&lt;endl;\n      cout&lt;&lt;\"\\n\\nNama\\t\\t\\t : \"&lt;&lt;nama&lt;&lt;endl;\n      cout&lt;&lt;\"Kelas\\t\\t\\t : \"&lt;&lt;kelas&lt;&lt;endl;\n      cout&lt;&lt;\"Jurusan\\t\\t\\t : \"&lt;&lt;jurusan&lt;&lt;endl;\n      cout&lt;&lt;\"Universitas\\t\\t : \"&lt;&lt;universitas&lt;&lt;endl;\n      cout&lt;&lt;\"Alamat\\t\\t\\t : \"&lt;&lt;alamat&lt;&lt;endl;\n      cout&lt;&lt;\"\\n\\nSilahkan tekan tombol ENTER untuk keluar dari program biodata singkat ini!\";\n      getch();\n\n}\n</code></pre>\n\n<p>The result I got is kinda fine, but there is still one problem that I got here. Which there is one variable that don't show what the value of the user already gave, it did not show the value, it even just gave the word \"u\" which I don't understand from where this word was coming. I sent it with my picture, so you can see it.\n<a href=\"https://i.stack.imgur.com/AZawn.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AZawn.jpg\" alt=\"This is the image\"></a></p>\n\n<p>I hope you would help me, and thank you very much for reading my problem.</p>\n"}, {"tags": ["c++", "exception"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1575466532, "post_id": 59177263, "comment_id": 104575792, "body": "Start with <code>cout &lt;&lt; arr.at(7) &lt;&lt; endl;</code>"}, {"owner": {"reputation": 11, "user_id": 12135973, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAqjjztabCQ5K-2yln837Q9OpsY_U7QKEG4jlMN=k-s128", "display_name": "Andr&#233; Costa", "link": "https://stackoverflow.com/users/12135973/andr%c3%a9-costa"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1575467137, "post_id": 59177263, "comment_id": 104576165, "body": "I tried cout &lt;&lt; arr.at(7) &lt;&lt; endl; and it returns :  Unhandled exception at 0x763F35D2 in Parte 4.exe: Microsoft C++ exception: std::out_of_range at memory location 0x004FF814."}, {"owner": {"reputation": 11, "user_id": 12135973, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAqjjztabCQ5K-2yln837Q9OpsY_U7QKEG4jlMN=k-s128", "display_name": "Andr&#233; Costa", "link": "https://stackoverflow.com/users/12135973/andr%c3%a9-costa"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1575467157, "post_id": 59177263, "comment_id": 104576183, "body": "So this I can catch?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1575467277, "post_id": 59177263, "comment_id": 104576260, "body": "You can catch the exception.  Or not.  Depends on what you want to do."}, {"owner": {"reputation": 11, "user_id": 12135973, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAqjjztabCQ5K-2yln837Q9OpsY_U7QKEG4jlMN=k-s128", "display_name": "Andr&#233; Costa", "link": "https://stackoverflow.com/users/12135973/andr%c3%a9-costa"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1575467502, "post_id": 59177263, "comment_id": 104576382, "body": "Well I was just experimenting to see if I could understand the use of the exception handling, so I will mess around with this case since it can be handled. Thank you very much"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1575482885, "post_id": 59177263, "comment_id": 104585372, "body": "Most compilers (more precisely, standard library implementations) have a way to enable bounds checks for containers. I suggest looking into that."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1575466938, "post_id": 59177392, "comment_id": 104576055, "body": "<i>If you try to access an array index which is out of bounds your program will crash</i> That&#39;s onle possible outcome, it is by no means guaranteed to happen"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1575466957, "post_id": 59177392, "comment_id": 104576065, "body": "No, &quot;will crash&quot; is wrong. It&#39;s undefined behavior. It <i>might</i> crash (if you&#39;re lucky). It might also print random garbage, format your hard drive, or make your cat pregnant."}], "tags": [], "owner": {"reputation": 73, "user_id": 3616561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204a3bf0b8009b743fbd075f63f91a4?s=128&d=identicon&r=PG&f=1", "display_name": "rcs", "link": "https://stackoverflow.com/users/3616561/rcs"}, "is_accepted": false, "score": -3, "last_activity_date": 1575555988, "last_edit_date": 1575555988, "creation_date": 1575466812, "answer_id": 59177392, "question_id": 59177263, "link": "https://stackoverflow.com/questions/59177263/exception-handlers-on-array-c/59177392#59177392", "title": "Exception handlers on array C++", "body": "<p>If you try to access an array index which is out of bounds your program will crash - you can't catch that. You just need to guard against it to make sure it cannot happen</p>\n\n<p>EDIT - Of course the replies to this answer are valid, it is not guaranteed to crash. You may even be lucky and get an exception but that's unlikely so no point in trying to handle it. </p>\n\n<p>BUT I stand by the answer - make sure it cannot happen. Theres so many ways to do this, runtime checks, use std::array and at() (with try/catch), ASSERTS the options are endless. It's much better to avoid situations happening through good design than to handle the situation when it has already happened.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1575482618, "creation_date": 1575482618, "answer_id": 59182238, "question_id": 59177263, "link": "https://stackoverflow.com/questions/59177263/exception-handlers-on-array-c/59182238#59182238", "title": "Exception handlers on array C++", "body": "<p>Accessing an array out of bounds (whether it is a <code>std::array</code> or a C-style array) using the <code>[]</code> operator is <strong>undefined behavior</strong>, there is no bounds checking performed, so there is no guarantee of an exception being thrown at all.  <em>Best case</em>, an OS exception will be thrown, which you may or may not be able to catch.  <em>Worse case</em>, no exception will be thrown at all and you will corrupt memory, which you may or may not notice for a long time if ever.</p>\n\n<p>If you want to guarantee a standardized catchable exception is thrown, use the <a href=\"https://en.cppreference.com/w/cpp/container/array/at\" rel=\"nofollow noreferrer\"><code>std::array::at()</code></a> method, which throws a <a href=\"https://en.cppreference.com/w/cpp/error/out_of_range\" rel=\"nofollow noreferrer\"><code>std::out_of_range</code></a> exception that you can catch with a standard C++ <code>try/catch</code> block, eg:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;exception&gt;\n#include &lt;cstdlib&gt;\n\ntemplate&lt;class T, int N&gt;\nvoid PrintArray(std::array&lt;T, N&gt; &amp;a) \n{\n    for (size_t i = 0; i &lt; a.size(); ++i)\n    {\n        std::cout &lt;&lt; a[i] &lt;&lt; ' '; a[i] = 1 + i;\n    }\n}\n\nint main()\n{\n    std::array &lt;int, 6&gt; arr = { 1,2,3,4,5,6 };\n    PrintArray(arr);\n\n    std::cout &lt;&lt; \"2a pos do arr -&gt; \";\n    std::cout &lt;&lt; arr[2] &lt;&lt; std::endl; \n\n    try {\n        std::cout &lt;&lt; arr.at(7) &lt;&lt; std::endl;\n    }\n    catch (const std::out_of_range &amp;) {\n        std::cout &lt;&lt; \"range error!\" &lt;&lt; std::endl;\n    }\n\n    std::system(\"Pause\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12135973, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAqjjztabCQ5K-2yln837Q9OpsY_U7QKEG4jlMN=k-s128", "display_name": "Andr&#233; Costa", "link": "https://stackoverflow.com/users/12135973/andr%c3%a9-costa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575555988, "creation_date": 1575466418, "question_id": 59177263, "link": "https://stackoverflow.com/questions/59177263/exception-handlers-on-array-c", "title": "Exception handlers on array C++", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;exception&gt;\n\nusing namespace std;\n\ntemplate&lt;class T, int N&gt;\nvoid PrintArray(array&lt;T, N&gt; a) \n{\n    for (int i = 0; i &lt; int(a.size()); i++)\n    {\n        cout &lt;&lt; a[i] &lt;&lt; ' '; a[i] = 1 + i;\n    }\n}\n\nint main()\n{\n    array &lt;int, 6&gt; arr = { 1,2,3,4,5,6 };\n    PrintArray&lt;int, 6&gt;(arr);\n\n    cout &lt;&lt; \"2a pos do arr -&gt; \";\n    cout &lt;&lt; arr[2] &lt;&lt; endl; \n\n    **cout &lt;&lt; arr[7] &lt;&lt; endl;**\n\n\n    system(\"Pause\");\n    return 0;\n\n}\n</code></pre>\n\n<p>I don't seem to be understanding how to use try catch to handle this exception, or if it is even possible (I believe it is). Can someone please explain how would I handle the non existent element of the array. </p>\n"}, {"tags": ["c++", "c++11", "lambda"], "comments": [{"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1575465857, "post_id": 59177078, "comment_id": 104575410, "body": "The second lambda expects no arguments and the first expects two arguments. You could pass the lambda as callback to another function and the other function calls the lambda with given values, e.g. std::copy_if expects a function with one parameter."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1575466243, "post_id": 59177078, "comment_id": 104575627, "body": "I&#39;d argue against making <code>add</code> a lambda in the first place, it should be a normal function which makes it even more reusable as it can be used from other functions."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1575466519, "post_id": 59177078, "comment_id": 104575785, "body": "Defining functions within functions for the sake of it is not really what lambdas are for: If C++ wanted to allow defining functions within functions, we could do that without lambdas. In particular, your example/argument is about a pure function (one with no state), whereas the most significant benefit of lambdas is allowing the convenient capture of state into a (stateful) functor. It should be no surprise that capturing state is not useful for writing your state-free functions. You can still use lambdas for that, but don&#39;t expect all of their design aspects to be relevant/useful..."}], "answers": [{"tags": [], "owner": {"reputation": 2647, "user_id": 832009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/009fa7a90fa08dc24fee138fb8d04fa4?s=128&d=identicon&r=PG", "display_name": "QuentinUK", "link": "https://stackoverflow.com/users/832009/quentinuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1575466242, "creation_date": 1575466242, "answer_id": 59177209, "question_id": 59177078, "link": "https://stackoverflow.com/questions/59177078/in-c-lambda-expressions-why-would-one-prefer-capturing-by-value-over-passing/59177209#59177209", "title": "In C++ Lambda Expressions, why would one prefer capturing by value over passing as arguments?", "body": "<p>When the function is passed to another function, such as a Standard Library algorithm which requires the function to have parameters.</p>\n"}, {"tags": [], "owner": {"reputation": 61707, "user_id": 5597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/014ef33a9f0e7e3ac5a12e7446d2d619?s=128&d=identicon&r=PG", "display_name": "Anthony Williams", "link": "https://stackoverflow.com/users/5597/anthony-williams"}, "is_accepted": true, "score": 2, "last_activity_date": 1575466279, "creation_date": 1575466279, "answer_id": 59177220, "question_id": 59177078, "link": "https://stackoverflow.com/questions/59177078/in-c-lambda-expressions-why-would-one-prefer-capturing-by-value-over-passing/59177220#59177220", "title": "In C++ Lambda Expressions, why would one prefer capturing by value over passing as arguments?", "body": "<p>Capturing by value stores the values directly in the lambda. These values are accessible in all invocations of that lambda.</p>\n\n<p>If your lambda takes arguments then the values must be supplied each time.</p>\n\n<p>This allows you to pass the lambda to things that don't allow passing arguments, or pass a different number of arguments. For example, you could pass a lambda with captured variables to <code>std::for_each</code>, and have the lambda operate on the captured values <em>and</em> the supplied element:</p>\n\n<pre><code>std::vector&lt;int&gt; vi={1,2,3,4,452,99};\n\nauto x=56;\n\nstd::for_each(vi.begin(),vi.end(),[=](int i){\n  std::cout&lt;&lt;x+i&lt;&lt;std::endl;\n});\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 11922121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HFXNA.jpg?s=128&g=1", "display_name": "Beltway", "link": "https://stackoverflow.com/users/11922121/beltway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "closed_date": 1575466465, "accepted_answer_id": 59177220, "answer_count": 2, "score": 0, "last_activity_date": 1575466279, "creation_date": 1575465789, "question_id": 59177078, "link": "https://stackoverflow.com/questions/59177078/in-c-lambda-expressions-why-would-one-prefer-capturing-by-value-over-passing", "closed_reason": "Duplicate", "title": "In C++ Lambda Expressions, why would one prefer capturing by value over passing as arguments?", "body": "<p>Presuming i would use Lamdba functions to define fuctions within functions to better structure the code, in what cases someone could prefer the second option over the first one, as the latter is clearly less reusable since no different arguements can be passed?</p>\n\n<pre><code>int main() {\n    int foo = 1;\n    int bar = 4;\n\n    //Passing as Parameters\n    auto add = [](auto a, auto b) {\n        return a + b;\n    };\n    std::cout &lt;&lt; \"Add: \" &lt;&lt; add(foo, bar) &lt;&lt; std::endl;\n\n    //Capturing by value\n    auto multiply = [=]() {\n        return foo * bar;\n    };\n    std::cout &lt;&lt; \"Multiply: \" &lt;&lt; multiply() &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "cmake", "clion", "lib"], "comments": [{"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1575466112, "post_id": 59176989, "comment_id": 104575554, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/3897839/how-to-link-c-program-with-boost-using-cmake\">How to link C++ program with Boost using CMake</a> See also <a href=\"https://cmake.org/cmake/help/v3.15/module/FindBoost.html\" rel=\"nofollow noreferrer\">cmake doc</a>."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 12479980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d18bc3885f95909b822504407e3c92c?s=128&d=identicon&r=PG&f=1", "display_name": "Amjad Alissa", "link": "https://stackoverflow.com/users/12479980/amjad-alissa"}, "edited": false, "score": 0, "creation_date": 1575473357, "post_id": 59177128, "comment_id": 104579889, "body": "After removing the line that you suggested to remove, I get this error when bulding the project: [ 60%] Built target My_String_src [ 80%] Linking CXX executable Boost_Tests_run.exe C:\\PROGRA~1\\MINGW-~1\\X86_64~1.0-P\\mingw64\\bin\\ar.exe: unable to rename &#39;CMakeFiles\\Boost_Tests_run.dir/objects.a&#39;; reason: File exists mingw32-make.exe[2]: *** [test\\CMakeFiles\\Boost_Tests_run.dir\\build.make:86: test/Boost_Tests_run.exe] Error 1 mingw32-make.exe[1]: *** [CMakeFiles\\Makefile2:141: test/CMakeFiles/Boost_Tests_run.dir/all] Error 2 mingw32-make.exe: *** [Makefile:83: all] Error 2"}, {"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "reply_to_user": {"reputation": 71, "user_id": 12479980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d18bc3885f95909b822504407e3c92c?s=128&d=identicon&r=PG&f=1", "display_name": "Amjad Alissa", "link": "https://stackoverflow.com/users/12479980/amjad-alissa"}, "edited": false, "score": 0, "creation_date": 1575478024, "post_id": 59177128, "comment_id": 104582730, "body": "@AmjadAlissa I expanded my answer. Like in the first answer I posted, you <b>cannot</b> simply use directories in calls to <code>target_link_libraries()</code>, they must be actual libraries. I hope this is helpful."}, {"owner": {"reputation": 71, "user_id": 12479980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d18bc3885f95909b822504407e3c92c?s=128&d=identicon&r=PG&f=1", "display_name": "Amjad Alissa", "link": "https://stackoverflow.com/users/12479980/amjad-alissa"}, "edited": false, "score": 0, "creation_date": 1575478514, "post_id": 59177128, "comment_id": 104583038, "body": "thank you very much for your answers! It is the first time i use boost and i really spent alot of time trying to figure out how to make the project work but with no success so far.  Again I did exactly as you said, I modified the cmakelists.txt to be like: find_package(Boost REQUIRED COMPONENTS unit_test_framework) target_link_libraries (Boost_Tests_run Boost::unit_test_framework) I get this error:  Could NOT find Boost (missing: unit_test_framework) (found version   &quot;1.71.0&quot;)"}], "tags": [], "owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "is_accepted": false, "score": 0, "last_activity_date": 1575477967, "last_edit_date": 1575477967, "creation_date": 1575465984, "answer_id": 59177128, "question_id": 59176989, "link": "https://stackoverflow.com/questions/59176989/configuring-boost-library-in-clion/59177128#59177128", "title": "Configuring Boost Library in CLion", "body": "<p>The code is telling the linker to link this library <code>../src</code> to your executable. This is an invalid operation, so remove this line:</p>\n\n<pre><code>target_link_libraries(Boost_Tests_run ../src)\n</code></pre>\n\n<p>The arguments to <a href=\"https://cmake.org/cmake/help/latest/command/target_link_libraries.html\" rel=\"nofollow noreferrer\"><code>target_link_libraries()</code></a> are reserved for <strong>targets</strong> and <strong>library names</strong> (including full paths to library files). The <code>../src</code> argument does not fit either of those criteria, as it is simply a directory. </p>\n\n<hr>\n\n<p>EDIT: Another potential issue is your <code>Boost_LIBRARIES</code> variable. Again, this should not be provided to <code>target_link_libraries()</code> if it just contains a directory path. It should instead contain the <strong>full path</strong> to the libraries, including the library names. </p>\n\n<p>However, the modern <code>FindBoost.cmake</code> module provides a better approach. If you know the Boost components you want to use (e.g. <code>filesystem</code>), you should specify those components in your <code>find_package()</code> call:</p>\n\n<pre><code>find_package(Boost REQUIRED COMPONENTS filesystem)\n</code></pre>\n\n<p>Then, the find module will populate <em>imported</em> targets for you, and you can link to them like this instead:</p>\n\n<pre><code>target_link_libraries(Boost_Tests_run PUBLIC Boost::filesystem)\n</code></pre>\n\n<p>I suggest taking a look at some of the examples on this <a href=\"https://cmake.org/cmake/help/latest/module/FindBoost.html\" rel=\"nofollow noreferrer\">page</a>.</p>\n"}], "owner": {"reputation": 71, "user_id": 12479980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d18bc3885f95909b822504407e3c92c?s=128&d=identicon&r=PG&f=1", "display_name": "Amjad Alissa", "link": "https://stackoverflow.com/users/12479980/amjad-alissa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575477967, "creation_date": 1575465515, "last_edit_date": 1575477584, "question_id": 59176989, "link": "https://stackoverflow.com/questions/59176989/configuring-boost-library-in-clion", "title": "Configuring Boost Library in CLion", "body": "<p>It is my First time to use Boost lib, So of course I ran into problem:</p>\n\n<p>First this is the CMAKELISTS.txt for my project:</p>\n\n<pre><code>    ===========================================\n    src/CMAKELISTS.txt:\n    =========================================== \n    cmake_minimum_required(VERSION 3.15)\n    project(My_String)\n\n    set(CMAKE_CXX_STANDARD 17)\n    set(SOURCE_FILES MyString.cpp MyString.h main.cpp)\n\n    add_executable(My_String_src ${SOURCE_FILES})\n    ===========================================\n    test/CMAKELISTS.txt:\n    ===========================================\n    cmake_minimum_required(VERSION 3.15)\n    project(My_String)\n\n    set(CMAKE_CXX_STANDARD 17)\n    set(Boost_USE_STATIC_LIBS OFF)\n    set(SOURCE_FILES MyStringTest.cpp)\n    set(Boost_INCLUDE_DIR \"C:\\\\Program Files\\\\Boost\\\\boost_1_71_0\")\n    set(Boost_LIBRARIES \"C:\\\\Program Files\\\\Boost\\\\boost_1_71_0\")\n\n    find_package (Boost COMPONENTS unit_test_framework)\n\n    include_directories(${Boost_INCLUDE_DIR})\n    include_directories(../src)\n\n    add_executable (Boost_Tests_run ${SOURCE_FILES})\n\n    target_link_libraries (Boost_Tests_run ${Boost_LIBRARIES})\n    ==============================================\n    top_level CMAKELISTS.txt for the whole project:\n    ==============================================\n    cmake_minimum_required(VERSION 3.15)\n    project(My_String)\n\n    set(CMAKE_CXX_STANDARD 17)\n\n    add_subdirectory(src)\n    add_subdirectory(test)\n</code></pre>\n\n<p>Note: I have built the BOOST lib!<code>enter code here</code>\nIn MyStringTest.cpp I have:</p>\n\n<pre><code>#define BOOST_TEST_DYN_LINK\n#define BOOST_TEST_MAIN\n#define BOOST_TEST_MODULE MyString_Test_Suite\n\n#include &lt;iostream&gt;\n#include \"MyString.h\"\n#include \"MyString.cpp\"\n#include &lt;boost/test/unit_test.hpp&gt;\n</code></pre>\n\n<p>The error that I get when I build the project:</p>\n\n<pre><code>    [ 50%] Building CXX object test/CMakeFiles/Boost_Tests_run.dir/MyStringTest.cpp.obj\n    [100%] Linking CXX executable Boost_Tests_run.exe\n    C:\\PROGRA~1\\MINGW-~1\\X86_64~1.0-P\\mingw64\\bin\\ar.exe: unable to rename 'CMakeFiles\\Boost_Tests_run.dir/objects.a'; reason: File exists\n    mingw32-make.exe[3]: *** [test\\CMakeFiles\\Boost_Tests_run.dir\\build.make:86: test/Boost_Tests_run.exe] Error 1\n    mingw32-make.exe[2]: *** [CMakeFiles\\Makefile2:141: test/CMakeFiles/Boost_Tests_run.dir/all] Error 2\n    mingw32-make.exe[1]: *** [CMakeFiles\\Makefile2:148: test/CMakeFiles/Boost_Tests_run.dir/rule] Error 2\n    mingw32-make.exe: *** [Makefile:130: Boost_Tests_run] Error 2\n</code></pre>\n\n<p>What is wrong with my configurations?\nAnd what do i need to do to fix it?</p>\n"}, {"tags": ["c++", "avx2"], "comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1575465752, "post_id": 59176951, "comment_id": 104575352, "body": "Is loading the discarded entries from <code>b</code> allowed, or must they be untouched?"}, {"owner": {"reputation": 218, "user_id": 3881777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f243b58f6074c5391194798a69929386?s=128&d=identicon&r=PG&f=1", "display_name": "nimbus3000", "link": "https://stackoverflow.com/users/3881777/nimbus3000"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1575465824, "post_id": 59176951, "comment_id": 104575391, "body": "yes we can load it into a temporary variable and then get rid of them later"}], "answers": [{"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 4, "creation_date": 1575467303, "post_id": 59177307, "comment_id": 104576279, "body": "On Skylake, <code>_mm256_maskload_pd</code> should be just as efficient, with the same <code>vcmppd</code> result as the mask.  Although it might have worse latency if the mask has to be ready before the load can start.  <code>vmaskmovpd</code> as a load is 2 fused-domain uops, p23 + p015 on Skylake.  It&#39;s also efficient on Ryzen, only a single uop (per 128 bits).  But on Broadwell or earlier it&#39;s 3 uops, p23 + 2p5 which is terrible vs. <code>vandpd</code>."}], "tags": [], "owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "is_accepted": true, "score": 4, "last_activity_date": 1575466568, "creation_date": 1575466568, "answer_id": 59177307, "question_id": 59176951, "link": "https://stackoverflow.com/questions/59176951/selective-load-using-avx2-c/59177307#59177307", "title": "Selective load using AVX2 C++", "body": "<p>Since the entries of <code>b</code> can be loaded unconditionally, the entries that should be zeroed out can be zeroed with a mask:</p>\n\n<pre><code>__m256d zero = _mm256_setzero_pd();\n__m256d c = _mm256_and_pd(b, _mm256_cmp_pd(zero, a, _CMP_NEQ_UQ));\n</code></pre>\n\n<p>Using <code>_CMP_NEQ_UQ</code> means that a NaN in <code>a</code> does not zero the entry, while with <code>_CMP_NEQ_OQ</code> both zero and NaN would zero out the entry.</p>\n"}], "owner": {"reputation": 218, "user_id": 3881777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f243b58f6074c5391194798a69929386?s=128&d=identicon&r=PG&f=1", "display_name": "nimbus3000", "link": "https://stackoverflow.com/users/3881777/nimbus3000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 2, "accepted_answer_id": 59177307, "answer_count": 1, "score": 0, "last_activity_date": 1575466568, "creation_date": 1575465410, "last_edit_date": 1575465653, "question_id": 59176951, "link": "https://stackoverflow.com/questions/59176951/selective-load-using-avx2-c", "title": "Selective load using AVX2 C++", "body": "<p>I am trying to achieve the following using AVX2 but not been able to do after spending half a day. \nI tried using maskload and other things, but havent been able to solve the problem.</p>\n\n<p>I have two double precision arrays, a and b.</p>\n\n<pre><code>double a[] = {-1000.00, 0.00, 2000.00, 3500.00};\ndouble b[] = {1.25, 1.636, -2.50, 3.25};\n</code></pre>\n\n<p>I want to load only those values from <code>b</code> into a <code>__m256d</code> for which corresponding value in <code>a</code> are non zero, otherwise it is set to 0. </p>\n\n<p>Something like:</p>\n\n<pre><code>double c[4];\nfor(int i=0; i&lt;4; ++i)\n{\n    if a[i] == 0\n        c[i] = 0;\n    else\n        c[i] = b[i];\n}\n</code></pre>\n\n<p>Can someone help?</p>\n\n<p>Edit: This is a part of a larger problem, does not have only 4 values hence I dont want to calculate another array like I have here and the load that array into registers.</p>\n"}, {"tags": ["c++", "templates"], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1575464517, "creation_date": 1575464517, "answer_id": 59176672, "question_id": 59176588, "link": "https://stackoverflow.com/questions/59176588/specializes-the-stdswap-algorithm-for-self-defined-container/59176672#59176672", "title": "specializes the std::swap algorithm for self defined container", "body": "<p>It's a simple case of name hiding: In the <code>Stack</code> class the name <code>swap</code> is <code>Stack::swap</code>.</p>\n\n<p>If you want to use some other function you need to provide an explicit scope, as in</p>\n\n<pre><code>::swap(container, other.container);\n</code></pre>\n\n<p>Note the use of the <code>::</code> scoping operator to use the <code>swap</code> function from the global scope.</p>\n"}, {"tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 2, "last_activity_date": 1575464933, "last_edit_date": 1575464933, "creation_date": 1575464543, "answer_id": 59176686, "question_id": 59176588, "link": "https://stackoverflow.com/questions/59176588/specializes-the-stdswap-algorithm-for-self-defined-container/59176686#59176686", "title": "specializes the std::swap algorithm for self defined container", "body": "<p>Here:</p>\n\n<pre><code>void swap(Stack &amp;other) {\n    swap(container, other.container);\n}\n</code></pre>\n\n<p>You are calling <code>swap</code> from itself.  You don't want that.  To make it so ADL finds the right swap function, you can try this:</p>\n\n<pre><code>// outside the class\ntemplate &lt;typename T&gt;\nvoid MySwap(T&amp; a1, T&amp; a2) {\n    using std::swap; // may not be needed in your case\n    swap(a1, a2);\n}\n\n// in the class\nvoid swap(Stack &amp;other) {\n    MySwap(container, other.container);\n}\n</code></pre>\n\n<p>The name <code>swap</code> inside <code>MySwap</code> cannot possibly refer to <code>Stack::swap</code>, so it will use ADL to find the correct overload.</p>\n\n<p>For more on why <code>using std::swap</code> is useful but possibly unnecessary in your case, see: <a href=\"https://en.cppreference.com/w/cpp/named_req/Swappable\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/named_req/Swappable</a></p>\n"}], "owner": {"reputation": 349, "user_id": 12137041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40a1e25afcc44d211f3f1c2985100db3?s=128&d=identicon&r=PG&f=1", "display_name": "zenxy", "link": "https://stackoverflow.com/users/12137041/zenxy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 59176672, "answer_count": 2, "score": 0, "last_activity_date": 1575464933, "creation_date": 1575464248, "last_edit_date": 1575464406, "question_id": 59176588, "link": "https://stackoverflow.com/questions/59176588/specializes-the-stdswap-algorithm-for-self-defined-container", "title": "specializes the std::swap algorithm for self defined container", "body": "<p>I wrote my own vector and stack, they are class template,both works fine,now I want to Specializes the std::swap algorithm for my stack,so I defined a function template swap as friend of vector, it uses the swap inside vector.then I defined a swap member function in stack.but if I try to call that swap function, it can't compile. the vs2019 says the \"the swap function doesn't accept two arguments\". I thought the swap inside stack class would use argument dependent lookup,but it didn't do that.please help me,what is the right way to do it? thanks a lot. some code of vector and stack are below</p>\n\n<p>Vector.h</p>\n\n<pre><code>  template&lt;class Object&gt;\n    void swap(Vector&lt;Object&gt;&amp; lhs, Vector&lt;Object&gt;&amp; rhs) {\n        lhs.swap(rhs);\n    }\n    template&lt;class Object&gt;\n    class Vector {\n        //.....\n        friend void swap&lt;&gt;(Vector&lt;Object&gt;&amp; lhs, Vector&lt;Object&gt;&amp; rhs);\n    public:\n        //...\n        void swap(Vector &amp;rhs){\n        //....\n        }\n    }\n</code></pre>\n\n<p>Stack.h</p>\n\n<pre><code> #include\"Vector.h\"\n    template&lt;class Object,class Container&gt;\n    class Stack {\n    //......\n    void swap(Stack &amp;other) {\n        swap(container, other.container);\n    }\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>//....\nint main() {\n//....\n    Stack&lt;int,Vector&lt;int&gt;&gt;s1,s2;\n    s1.swap(s2);\n}\n//....\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1575464279, "post_id": 59176564, "comment_id": 104574499, "body": "<a href=\"https://en.cppreference.com/w/cpp/string/basic_string/stof\" rel=\"nofollow noreferrer\"><code>std::stod</code></a>?"}, {"owner": {"reputation": 1, "user_id": 12471641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db4fe434860b493c1e1a0da6785a30e1?s=128&d=identicon&r=PG&f=1", "display_name": "mth4000", "link": "https://stackoverflow.com/users/12471641/mth4000"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1575464759, "post_id": 59176564, "comment_id": 104574759, "body": "I tried doing  std::getline(s,val,&#39;,&#39;); std::stod(val); temp.push_back(val);  but I get errors concerning the pushback"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1575464868, "post_id": 59176564, "comment_id": 104574828, "body": "Please follow the link! See what the function <b><i>returns</i></b>."}, {"owner": {"reputation": 1, "user_id": 12471641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db4fe434860b493c1e1a0da6785a30e1?s=128&d=identicon&r=PG&f=1", "display_name": "mth4000", "link": "https://stackoverflow.com/users/12471641/mth4000"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1575465903, "post_id": 59176564, "comment_id": 104575438, "body": "I got it to convert the strings into doubles, but now it doesn&#39;t take in the correct numbers. I have no idea what its doing. The output was 12.5 22.6 32.7. Now its 4 4 4. I updated my code so you could see."}, {"owner": {"reputation": 1, "user_id": 12471641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db4fe434860b493c1e1a0da6785a30e1?s=128&d=identicon&r=PG&f=1", "display_name": "mth4000", "link": "https://stackoverflow.com/users/12471641/mth4000"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1575466370, "post_id": 59176564, "comment_id": 104575702, "body": "I figured out what my mistake was! I was using std::stod very incorrectly. Thanks for your help!"}], "answers": [{"tags": [], "owner": {"reputation": 331, "user_id": 6754741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62292b1f46b3caffe6d73a430086b4ea?s=128&d=identicon&r=PG&f=1", "display_name": "O Yahya", "link": "https://stackoverflow.com/users/6754741/o-yahya"}, "is_accepted": false, "score": 0, "last_activity_date": 1575464902, "last_edit_date": 1575464902, "creation_date": 1575464760, "answer_id": 59176751, "question_id": 59176564, "link": "https://stackoverflow.com/questions/59176564/c-double-values-from-csv-file-into-vector/59176751#59176751", "title": "C++ double values from CSV file into vector", "body": "<p>Declare the vector you want to store the CSV numbers in as vector of doubles?</p>\n\n<pre><code>std::vector&lt;double&gt; temp;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12471641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db4fe434860b493c1e1a0da6785a30e1?s=128&d=identicon&r=PG&f=1", "display_name": "mth4000", "link": "https://stackoverflow.com/users/12471641/mth4000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575466097, "creation_date": 1575464144, "last_edit_date": 1575466097, "question_id": 59176564, "link": "https://stackoverflow.com/questions/59176564/c-double-values-from-csv-file-into-vector", "title": "C++ double values from CSV file into vector", "body": "<p>I have a code that takes a column in the middle of my CSV file and puts all the values in that column into a vector as strings. Is there a way to easily edit this code so the values are changed into doubles before they enter the vector? I keep getting errors with my attempts. </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;vector&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;   \n\nstd::vector&lt;double&gt; readStock(std::string fileName){\n   int counter=0;\n   std::vector&lt;double&gt; temp; //create vector\n   std::ifstream f(fileName);\n   if(f.is_open()){\n     std::string str;\n     std::getline(f,str); //skip the first row\n     while(std::getline(f,str)){ //read each line\n       std::istringstream s(str);  //stringstream to parse csv\n       std::string val;  //string to hold value\n       for(int i=1;i&lt;12;++i){ //skips until we get to the column that we want\n         ++counter;\n         std::getline(s,val, ',');\n\n     }\n     +counter;\n     std::getline(s,val,',');\n     std::size_t hold=0;\n     std::stod(val, &amp;hold);\n     std::cout&lt;&lt;val&lt;&lt;\" \";\n     std::cout&lt;&lt;hold&lt;&lt;\" \";\n   }\n   f.close();\n\n}\n\n   return temp;\n}\nint main(){\n   std::string ticker;\n   std::cin&gt;&gt; ticker;\n   ticker +=\".csv\";\n   std::cout&lt;&lt;ticker;\n   std::vector&lt;double&gt; stock1;\n   stock1=readStock(ticker);\n   std::cout&lt;&lt;st&lt;&lt;std::endl;\n   for(int i=0;i&lt;stock.size();++i){\n     std::cout&lt;&lt;stock1[i]&lt;&lt;\" \";\n   }\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "vb.net"], "comments": [{"owner": {"reputation": 4022, "user_id": 776176, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/19c3520310696dce7052bd43c3d969af?s=128&d=identicon&r=PG", "display_name": "Nanhydrin", "link": "https://stackoverflow.com/users/776176/nanhydrin"}, "edited": false, "score": 0, "creation_date": 1575464214, "post_id": 59176502, "comment_id": 104574461, "body": "What line does that error occur on?"}, {"owner": {"reputation": 1, "user_id": 11096510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43caeccb2604ba8d1e866c66f593b0f2?s=128&d=identicon&r=PG&f=1", "display_name": "Watthehell86", "link": "https://stackoverflow.com/users/11096510/watthehell86"}, "reply_to_user": {"reputation": 4022, "user_id": 776176, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/19c3520310696dce7052bd43c3d969af?s=128&d=identicon&r=PG", "display_name": "Nanhydrin", "link": "https://stackoverflow.com/users/776176/nanhydrin"}, "edited": false, "score": 0, "creation_date": 1575464369, "post_id": 59176502, "comment_id": 104574541, "body": "@Nanhydrin   at &quot;Dim pResponseParms As IntPtr = executeCustomCommand(CustPrt, StructPtr)&quot;"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1575466741, "post_id": 59176502, "comment_id": 104575924, "body": "please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, what is a <code>xrstring</code>, <code>xanydictionary_ptr</code>, what does <code>xanydictionary::create</code> do?"}, {"owner": {"reputation": 1, "user_id": 11096510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43caeccb2604ba8d1e866c66f593b0f2?s=128&d=identicon&r=PG&f=1", "display_name": "Watthehell86", "link": "https://stackoverflow.com/users/11096510/watthehell86"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1575466913, "post_id": 59176502, "comment_id": 104576035, "body": "@AlanBirtles  those are typedef inside the C++ API.  typedef xrchandle&lt;xanydictionary&gt;    \txanydictionary_ptr; typedef const char         \t*xrstring"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1575466955, "post_id": 59176502, "comment_id": 104576064, "body": "Edit your question to include those details, the next question would be what is <code>xrchandle</code> and <code>xanydictionary</code>"}], "owner": {"reputation": 1, "user_id": 11096510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43caeccb2604ba8d1e866c66f593b0f2?s=128&d=identicon&r=PG&f=1", "display_name": "Watthehell86", "link": "https://stackoverflow.com/users/11096510/watthehell86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575467534, "creation_date": 1575463946, "last_edit_date": 1575467534, "question_id": 59176502, "link": "https://stackoverflow.com/questions/59176502/system-accessviolationexception-when-loading-c-in-vb-net-application", "title": "System.AccessViolationException when loading C++ in vb.net application", "body": "<p>I am working on a .net application. I found an example for an API call that is written in CPP and I am having issues translating it to VB.net. </p>\n\n<p>The C++ example</p>\n\n<pre><code>    void InvokeClientMethord()\n    {\n      HINSTANCE adapter_dll_handle = loadLibraryA(\"dllName.dll\");\n\n     if(adapter_dll_handle != Null)\n     {\n       const char* functionName = \"CommandName\";\n       typedef xanydictionary_ptr (WINAPIV *FARPROC)(xrstring, xanydictionary_ptr);\n       FARPROC ExecuteWgmCustomCmd = (FARPROC)GetProcAddress((HMODULE)adapter_dll_handle,functionName);\n       if (ExecuteWgmCustomCmd != NUL)\n       {\n        xrstring cust_id = \"ThisIsSomeName\";\n        xanydictionary_ptr pInputParms, pResponseParms;\n        pInputParms = xanydictionary::create ();\n        pInputParms -&gt; set (xstring (\"testMessage\"), \"This is test message.\");\n        pResponseParms = ExecuteWgmCustomCmd(cust_id, pInputParms);\n        if (pResponseParms.isnull ())\n               return ;\n       }\n      }\n    }\n</code></pre>\n\n<p>In the above example,xanydictionary_ptr, xrstring are type definitions inside the c++ lib </p>\n\n<p>typedef const char *xrstring;\ntypedef xrchandle xanydictionary_ptr;</p>\n\n<p>in the above type definitions, xrchandle is a class specific to the API and xanydictionary is also specific to the api. it a dictionary specified in the xrchandle class.</p>\n\n<p>My VB Translation</p>\n\n<pre><code>   Public Class SomeClass\n    &lt;DllImport(\"dllName.dll\", ExactSpelling:=True, PreserveSig:=False, CharSet:=CharSet.Unicode, EntryPoint:=\"executeCustomCommand\")&gt;\n    Public Shared Function executeCustomCommand(cust_id As IntPtr, params As IntPtr) As IntPtr\n    End Function\n\n    Private Structure xanydictionary_ptr\n      Public VarName As IntPtr\n      Public varValue As IntPtr\n    End Structure\n\n    Public sub InvokeClientMethord()\n      Dim cust_id As String = \"ThisIsSomeName\"\n      Dim cust_id_ptr As IntPtr = Marshal.StringToHGlobalUni(cust_id)\n      Dim pInputParms As New xanydictionary_ptr With {\n        .VarName = Marshal.StringToHGlobalUni(\"testMessage\"),\n        .varValue = Marshal.StringToHGlobalUni(\"This is test message.\"))\n      }\n      Dim pInputParms_ptr As IntPtr = Marshal.AllocHGlobal(Marshal.SizeOf(pInputParms))\n      Marshal.StructureToPtr(inputStrct, pInputParms_ptr, True)\n      Dim pResponseParms As IntPtr = executeCustomCommand(CustPrt, StructPtr)\n    End Sub\n   End Class\n</code></pre>\n\n<p>When my subroutine is called it throws a System.AccessViolationException 'Attempted to read or write protected memory. this is often an indication that another memory is corrupt'.</p>\n"}, {"tags": ["c++", "multithreading", "mutex", "lock-free", "stdatomic"], "comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1575464342, "post_id": 59176459, "comment_id": 104574529, "body": "<a href=\"//stackoverflow.com/q/39393850\">Can num++ be atomic for &#39;int num&#39;?</a> explains how x86 asm / hardware implements atomic operations, specifically RMW operations, with links to more stuff.  Atomic operations are the building blocks that a mutex can be built from.  Also <a href=\"//stackoverflow.com/a/38465341\">Atomicity on x86</a> and <a href=\"//stackoverflow.com/q/36624881\">Why is integer assignment on a naturally aligned variable atomic on x86?</a>."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1575464593, "post_id": 59176459, "comment_id": 104574676, "body": "Some of those touch on other ISAs where the hardware primitive is <a href=\"https://en.wikipedia.org/wiki/Load-link/store-conditional\" rel=\"nofollow noreferrer\">LL/SC</a> instead of directly supporting atomic add/sub/CAS, but mostly they&#39;re about x86.  There are probably some other existing SO answers that cover other ISAs more generally."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1575464773, "post_id": 59176459, "comment_id": 104574772, "body": "<i>is implemented based on the memory model, which is introduced by C++11.</i> - not exactly.  Compilers have to implement the C++11 memory model semantics on top of <i>hardware</i> memory models, which have existed since way before C++11; OSes and hand-written asm mutexes for SMP systems need to be know the underlying memory model.  They are different on a per-ISA basis.  See <a href=\"https://www.cl.cam.ac.uk/~pes20/cpp/cpp0xmappings.html\" rel=\"nofollow noreferrer\">cl.cam.ac.uk/~pes20/cpp/cpp0xmappings.html</a>"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1575465179, "post_id": 59176459, "comment_id": 104575037, "body": "Related: <a href=\"https://preshing.com/20120930/weak-vs-strong-memory-models/\" rel=\"nofollow noreferrer\">preshing.com/20120930/weak-vs-strong-memory-models</a> talks about some different HW memory models, where you need more or less barriers to implement acq_rel.  Jeff Preshing&#39;s other articles are very good reading, too.  BTW, this question may be too broad; I could just post asm for how some C++ statements compile on various ISAs (or you could look yourself on <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">godbolt.org</a> with optimization enabled), but without explaining the HW memory models for those ISAs IDK if it would answer your question.  Really understanding lockless code is book-level amounts of info."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1575465797, "post_id": 59176459, "comment_id": 104575380, "body": "Have a read of <a href=\"https://stackoverflow.com/questions/6319146/c11-introduced-a-standardized-memory-model-what-does-it-mean-and-how-is-it-g\" title=\"c11 introduced a standardized memory model what does it mean and how is it g\">stackoverflow.com/questions/6319146/&hellip;</a>  (Is almost a duplicate but includes a lot of extra information)."}, {"owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1575507949, "post_id": 59176459, "comment_id": 104593662, "body": "@PeterCordes  Thanks a lot for your explanation, well, if <code>std::atomic</code> is implemented differently on different architectures, I think only one example based on some specific architecture is enough for me, for example, X86."}], "answers": [{"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1575514610, "post_id": 59187245, "comment_id": 104594970, "body": "I think your footnote is confusing at best.  If an operation isn&#39;t atomic from the POV of other threads, you can&#39;t use it to implement lock-free <code>std::atomic</code>.  e.g. ARM can use <code>ldp</code> to load an aligned pair of registers as the implementation for <code>atomic&lt;uint64&gt;::load(memory_order_relaxed)</code> <i>because</i> of documented guarantees that that&#39;s atomic for aligned loads on some microarchitectures.  It&#39;s not a special instruction that exists <i>only</i> for its atomicity, if that&#39;s what you meant. Or if you mean x86 <code>add [mem], reg</code> without a <code>lock</code> prefix on a uniprocessor, that&#39;s atomic wrt. context switch"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1575572633, "post_id": 59187245, "comment_id": 104621181, "body": "@PeterCordes - maybe &quot;non-atomic&quot; isn&#39;t the best terminology. I just mean &quot;plain&quot; operations like say loads and stores which sometimes implement sufficient atomicity to implement some <code>std::atomic</code> methods (at least for some memory orders) without being a special, slow atomic operation at the ISA level."}], "tags": [], "owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "is_accepted": false, "score": 3, "last_activity_date": 1592600153, "last_edit_date": 1592600153, "creation_date": 1575512207, "answer_id": 59187245, "question_id": 59176459, "link": "https://stackoverflow.com/questions/59176459/how-is-stdatomic-implemented/59187245#59187245", "title": "How is std::atomic implemented", "body": "<blockquote>\n  <p>what is the difference between <code>std::atomic</code> and mutex</p>\n</blockquote>\n\n<p>A mutex is a concurrency construct, independent from any user data, offering <code>lock</code> and <code>unlock</code> method allowing you to protect (enforce mutual exclusion within) a <em>region</em> of code. You can put whatever you want in that region.</p>\n\n<p><code>std::atomic&lt;T&gt;</code> is an adapter over a <em>single instance of a type T</em>, allowing atomic access on a <em>per operation basis</em> to that object.</p>\n\n<p>A mutex is more general in the sense that one possible implementation of <code>std::atomic</code> is to protect all access to the underlying object with a mutex.</p>\n\n<p><code>std::atomic</code> exists mostly because of the <em>other</em> common implementation: using an atomic instruction<sup>2</sup> to execute the operation directly without requiring a mutex. This is the implementation used when <code>std::atomic&lt;T&gt;::is_lock_free()</code> returns true. This is generally more efficient than the mutex approach, but is only applicable for objects small enough to be manipulated \"in one shot\" by atomic instructions. </p>\n\n<hr>\n\n<p><sup>2</sup> In some cases, the compiler is able to use <em>plain</em> instructions (rather than special concurrency related instructions) such as normal loads and stores if they offer the required guarantees on the platform in question.</p>\n\n<p>For example, on x86, <a href=\"https://godbolt.org/z/QNtGyX\" rel=\"nofollow noreferrer\">compilers implement</a> all <code>std::atomic</code> loads, for small-enough values with plain loads, and implement all stores weaker than <code>memory_order_seq_cst</code> with plain stores. <code>seq_cst</code> stores are implemented with special instructions, however - a trailing <code>mfence</code> after <code>mov</code> on GCC before 10.1, and (implicit <code>lock</code>) <code>xchg mem,reg</code> on clang, recent GCC, and other compilers.</p>\n\n<p>Note also the asymmetry between loads and stores is a compiler choice: they could have put the special handling on <code>seq_cst</code> loads instead, but because loads generally outnumber stores that's slower in most cases.  (And because cheap loads in fast paths are more valuable.)</p>\n"}, {"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1575523558, "post_id": 59188639, "comment_id": 104597113, "body": "I added some clarifications to this, specifically about &quot;cache locks&quot; which use the same word as software mutex/spinlock locking but are <i>very</i> different.  Related: <a href=\"//stackoverflow.com/q/39393850\">Can num++ be atomic for &#39;int num&#39;?</a>.  Also to broaden this: note that <a href=\"https://en.wikipedia.org/wiki/Load-link/store-conditional\" rel=\"nofollow noreferrer\">LL/SC machines</a> (almost all the major non-x86 ISAs) use a &quot;store conditional&quot; that <i>checks</i> if we maintained exclusive ownership, instead of taking a cache lock at the start.  Reducing worst-case latency for other cores at the cost of losing throughput to retries."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1575523639, "post_id": 59188639, "comment_id": 104597142, "body": "Also, this doesn&#39;t mention anything about how <code>std::atomic&lt;T&gt;</code> provides sequential-consistency (or optionally weaker ordering); that&#39;s an important part of what it does for pure-load and pure-store.  (And RMWs on non-x86)"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1575524002, "post_id": 59188639, "comment_id": 104597247, "body": "(But that&#39;s partly the question&#39;s fault for being too broad, I think.)"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 5, "last_activity_date": 1575523279, "last_edit_date": 1575523279, "creation_date": 1575522828, "answer_id": 59188639, "question_id": 59176459, "link": "https://stackoverflow.com/questions/59176459/how-is-stdatomic-implemented/59188639#59188639", "title": "How is std::atomic implemented", "body": "<p>If atomic operations are <code>lock_free</code>, they're probably implemented the same way the components of a mutex are implemented. After all, to lock a mutex, you really want some kind of atomic operation to ensure that one and only one thread locks the mutex.</p>\n\n<p>The difference is, atomic operations that are lock free don't have a \"locked\" state. Let's compare two possible ways to do an atomic increment of a variable:</p>\n\n<p>First, the mutex way. We lock a mutex, we read-increment-write the variable, then we unlock the mutex. If the thread gets interrupted during the read-increment-write, other threads that attempt to perform this same operation will block trying to lock the mutex.  (See <a href=\"https://stackoverflow.com/questions/50298358/where-is-the-lock-for-a-stdatomic\">Where is the lock for a std::atomic?</a> for how this works on some real implementations, for objects too large to be lock_free.)</p>\n\n<p>Second, the atomic way. The CPU \"locks\" just the cache line holding the variable we want to modify for the duration of a single read-increment-write instruction. (This means the CPU delays responding to MESI requests to invalidate or share the cache line, keeping exclusive access so no other CPU can look at it.  MESI cache coherency always requires exclusive ownership of a cache line before a core can modify it so this is cheap if we already owned the line). It is not possible for us to get interrupted during an instruction. Another thread that attempts to access this variable, at worst, has to wait for the cache coherency hardware to sort out who can modify the memory location.</p>\n\n<p>So how do we lock a mutex? Likely we perform an atomic compare-and-swap. So light atomic operations are the primitives from which heavy mutex operations are assembled.</p>\n\n<p>Of course this is all platform-specific. But this is what typical, modern platforms that you are likely to use do.</p>\n"}], "owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2970, "favorite_count": 3, "accepted_answer_id": 59188639, "answer_count": 2, "score": 4, "last_activity_date": 1592600153, "creation_date": 1575463776, "last_edit_date": 1575525215, "question_id": 59176459, "link": "https://stackoverflow.com/questions/59176459/how-is-stdatomic-implemented", "title": "How is std::atomic implemented", "body": "<p>I'm studying the difference between <code>mutex</code> and <code>atomic</code> in C++11.</p>\n\n<p>As my understanding, <code>mutex</code> is a kind of lock-mechanism, which is implemented based on the OS/kernel. For example, Linux offers a mechanism, which is <code>futex</code>. With the help of <code>futex</code>, we could implement <code>mutex</code> and <code>semaphore</code>. Furthermore, I've known that <code>futex</code> is implemented by the low-level atomic operation, such as <code>CompareAndSet</code>, <code>CompareAndSwap</code>.</p>\n\n<p>For <code>std::atomic</code>, I've known that it is implemented based on the memory model, which is introduced by C++11. However, I don't know how the memory model is implemented at the low level. If it is also implemented by the atomic operation like <code>CompareAndSet</code>, what is the difference between <code>std::atomic</code> and <code>mutex</code>?</p>\n\n<p>In a word, if <code>std::atomic::is_lock_free</code> gives me a <code>false</code>, well, I'm gonna say that <code>std::atomic</code> is the same with <code>mutex</code>. But if it gives me a <code>true</code>, how is it implemented at low level?</p>\n"}, {"tags": ["c++", "shell"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 1, "creation_date": 1575463530, "post_id": 59176342, "comment_id": 104574070, "body": "It very much depends on your OS and on the particular use case (why do you need that? how many variables are passed? What kind of variables do you need?)"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1575463822, "post_id": 59176342, "comment_id": 104574233, "body": "You can run <code>ip</code> from your C code directly. e.g. <code>system(&quot;ip rule add...&quot;);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 819, "user_id": 2704474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cdf51194ba138cbcdbf18576ea57ad9?s=128&d=identicon&r=PG&f=1", "display_name": "KOLEGA", "link": "https://stackoverflow.com/users/2704474/kolega"}, "is_accepted": false, "score": 0, "last_activity_date": 1575464304, "creation_date": 1575464304, "answer_id": 59176599, "question_id": 59176342, "link": "https://stackoverflow.com/questions/59176342/how-to-write-a-c-c-variable-to-shell-script/59176599#59176599", "title": "how to write a c/c++ variable to shell script?", "body": "<p>You can print the variable content on <code>stdout</code> and include it with using subcall <code>$()</code>. </p>\n\n<p>So if you program will be called <code>test</code>. Just call it like </p>\n\n<pre><code>ip rule add from $(test) lookup ... \n</code></pre>\n\n<p>If you need more complex output, make it a csv-like format and use it like this:</p>\n\n<pre><code>output=\"$(test)\"\nfirst=\"$(echo ${output}|cut -d ';' -f 1 )\"\nsecond=\"$(echo ${output}|cut -d ';' -f 2 )\"\nip rule add from \"${first}\" lookup \"${second}\"\n</code></pre>\n\n<p>Don't know if changing variables directly would make a bit of chaos. </p>\n"}], "owner": {"reputation": 11, "user_id": 12336507, "user_type": "registered", "profile_image": "https://graph.facebook.com/544577492777130/picture?type=large", "display_name": "run code", "link": "https://stackoverflow.com/users/12336507/run-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "closed_date": 1575464814, "answer_count": 1, "score": 0, "last_activity_date": 1575464304, "creation_date": 1575463430, "question_id": 59176342, "link": "https://stackoverflow.com/questions/59176342/how-to-write-a-c-c-variable-to-shell-script", "closed_reason": "Duplicate", "title": "how to write a c/c++ variable to shell script?", "body": "<p>I want to send the C/C++ variable into my shell script, but tried many ways on the Internet, seems not working, could you help me with my code?\nC++ code:</p>\n\n<pre><code>void test::addroute(){\nstring test1=ip_address;\n}\n</code></pre>\n\n<p>my shell script:</p>\n\n<pre><code>#!bin/sh\nip rule add from $test1 lookup $eth0_table\n</code></pre>\n\n<p>how to send the test1 to here?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1575463652, "post_id": 59176333, "comment_id": 104574137, "body": "did you use a debugger?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 6, "creation_date": 1575463680, "post_id": 59176333, "comment_id": 104574153, "body": "suggested reading: <a href=\"https://meta.stackoverflow.com/questions/326569/under-what-circumstances-may-i-add-urgent-or-other-similar-phrases-to-my-quest\" title=\"under what circumstances may i add urgent or other similar phrases to my quest\">meta.stackoverflow.com/questions/326569/&hellip;</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1575463873, "post_id": 59176333, "comment_id": 104574264, "body": "if you want help with debugging the code you need to inlcude input, output and expected output in the question."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1575463889, "post_id": 59176333, "comment_id": 104574273, "body": "@MaxLanghof VLAs in C++ -&gt; bad. <code>new</code> -&gt; bad. =&gt; VLAs == <code>new</code> (some kind of shortcut in my brain)."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 1, "creation_date": 1575463937, "post_id": 59176333, "comment_id": 104574294, "body": "Tip: What is the value of <code>S</code> when you start inner loop? You can print it before entering this loop (or use a debugger)."}, {"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1575464022, "post_id": 59176333, "comment_id": 104574347, "body": "Maybe for (int i=1; i&lt;n; ++i){ if (even) S += A[i-1]; A[i] = S; }"}, {"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1575464168, "post_id": 59176333, "comment_id": 104574428, "body": "you can do all of it in 1 loop"}, {"owner": {"reputation": 11, "user_id": 12388545, "user_type": "registered", "profile_image": "https://graph.facebook.com/2618518628240594/picture?type=large", "display_name": "Milosh", "link": "https://stackoverflow.com/users/12388545/milosh"}, "reply_to_user": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1575464298, "post_id": 59176333, "comment_id": 104574510, "body": "@MFnx how thought?"}, {"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1575467003, "post_id": 59176333, "comment_id": 104576089, "body": "what happens if the first element is even? you set A[0] = 0?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1575482589, "post_id": 59176333, "comment_id": 104585219, "body": "Please <a href=\"https://stackoverflow.com/posts/59176333/edit\">edit</a> your code to reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem.  Your current code includes much that is peripheral to your problem - a minimal sample normally looks similar to a good unit test: only performing one task, with input values specified for reproducibility."}], "answers": [{"tags": [], "owner": {"reputation": 666, "user_id": 12251738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ca8e413fe7089778a0dbb55a22592?s=128&d=identicon&r=PG&f=1", "display_name": "AlexGeorg", "link": "https://stackoverflow.com/users/12251738/alexgeorg"}, "is_accepted": false, "score": 0, "last_activity_date": 1575465454, "creation_date": 1575465454, "answer_id": 59176967, "question_id": 59176333, "link": "https://stackoverflow.com/questions/59176333/c-integer-array-transforms-and-manipulation/59176967#59176967", "title": "C++ integer array transforms and manipulation", "body": "<p>In your second-last loop you are changing every even number to their predecessors sum and then still iterate again over all numbers in the array. That means you are summing the sums!\nEither temporarily write the output to a new array, or better be smart and separately sum all numbers to the current point instead of re-looping once for every even number.</p>\n"}, {"tags": [], "owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "is_accepted": false, "score": 0, "last_activity_date": 1575468216, "last_edit_date": 1575468216, "creation_date": 1575465607, "answer_id": 59177025, "question_id": 59176333, "link": "https://stackoverflow.com/questions/59176333/c-integer-array-transforms-and-manipulation/59177025#59177025", "title": "C++ integer array transforms and manipulation", "body": "<p>You don't need a second loop to get <code>S</code>, you can do it in the first one. Also, don't forget deleting your array.</p>\n\n<p>Design with pencil and paper before coding.</p>\n\n<p>A solution to your problem could be something like this.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nconstexpr static size_t N = 10;\n\nint main()\n{  \n    int* A = new int[N];\n\n    /* fill array A */\n\n    int sum(0), k(0), S(0);\n    for (size_t i = 0; i &lt; N; ++i)\n    {\n        S += A[i];\n        if (A[i] % 2 == 0)\n        {\n            ++k;\n            sum += A[i];\n            if (i == 0) // nothing before index 0\n                A[i] = 0;\n            else\n                A[i] = S - A[i]; // here's the trick\n        } \n    }\n\n    delete[] A; // don't forget this!\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1575471097, "post_id": 59178598, "comment_id": 104578624, "body": "<code>const auto a = std::accumulate(v.begin(), v.end(), 0, [](auto acc, int e) { return acc + (isEven(e) ? e : 0); })</code>. And even with range-v3: <code>accumulate(v | views::filter(&amp;isEven), 0)</code> :-)"}, {"owner": {"reputation": 13848, "user_id": 276193, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3d9b60ead1b0c8420c03b203832e8d5f?s=128&d=identicon&r=PG", "display_name": "learnvst", "link": "https://stackoverflow.com/users/276193/learnvst"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1575471763, "post_id": 59178598, "comment_id": 104579046, "body": "@Jarod42 <code>views::filter</code> looks awesome \ud83e\udd2f\ud83e\udd2f\ud83e\udd2f\ud83e\udd2f\ud83e\udd2f\ud83e\udd2f"}, {"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1575535692, "post_id": 59178598, "comment_id": 104601619, "body": "Nice. Output is not correct though: it should be Transformed:  1 1 3 6 5 15"}, {"owner": {"reputation": 13848, "user_id": 276193, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3d9b60ead1b0c8420c03b203832e8d5f?s=128&d=identicon&r=PG", "display_name": "learnvst", "link": "https://stackoverflow.com/users/276193/learnvst"}, "reply_to_user": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1575535878, "post_id": 59178598, "comment_id": 104601702, "body": "@MFnx 1+1+3=5 the last time I checked \ud83d\ude05"}, {"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1575538573, "post_id": 59178598, "comment_id": 104602983, "body": "Check his example. He sums the elements of the original array. Not the modified one."}, {"owner": {"reputation": 13848, "user_id": 276193, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3d9b60ead1b0c8420c03b203832e8d5f?s=128&d=identicon&r=PG", "display_name": "learnvst", "link": "https://stackoverflow.com/users/276193/learnvst"}, "reply_to_user": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1575539426, "post_id": 59178598, "comment_id": 104603476, "body": "@MFnx ahhh ok. Done"}], "tags": [], "owner": {"reputation": 13848, "user_id": 276193, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3d9b60ead1b0c8420c03b203832e8d5f?s=128&d=identicon&r=PG", "display_name": "learnvst", "link": "https://stackoverflow.com/users/276193/learnvst"}, "is_accepted": false, "score": 1, "last_activity_date": 1575539304, "last_edit_date": 1575539304, "creation_date": 1575470572, "answer_id": 59178598, "question_id": 59176333, "link": "https://stackoverflow.com/questions/59176333/c-integer-array-transforms-and-manipulation/59178598#59178598", "title": "C++ integer array transforms and manipulation", "body": "<p>Well, you said, C++ and \"fun\", so here is a more C++ way to skin this cat . . </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include &lt;numeric&gt;\nusing namespace std;    \n\nint main() {\n    vector&lt;int&gt; v = {1,2,3,4,5,6};\n    const auto isEven = [](int x){return x%2==0;};\n    const auto print = [](const int&amp; n) { cout &lt;&lt; \" \" &lt;&lt; n; };\n\n    cout &lt;&lt; \"Before: \"; for_each(v.begin(), v.end(), print); cout &lt;&lt; endl;\n    cout &lt;&lt; \"Num Even: \" &lt;&lt; count_if(v.begin(), v.end(), isEven) &lt;&lt; endl;\n    cout &lt;&lt; \"Sum Even: \" &lt;&lt; accumulate(v.begin(), v.end(), 0, [isEven](auto acc, int e) { return acc + (isEven(e) ? e : 0); }) &lt;&lt; endl;\n    // I'm not guru enough for Jarod42s c++20 voodoo \ud83e\udd2fnor is IDEONE \ud83d\ude09\n    int b=0;\n    vector&lt;int&gt; v2;\n    for (auto&amp; x : v) {\n        isEven(x) ? v2.push_back(b) : v2.push_back(x);\n        b+=x;\n    }\n    cout &lt;&lt; \"Transformed: \"; for_each(v2.begin(), v2.end(), print); cout &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Try here <a href=\"https://ideone.com/jDjoeB\" rel=\"nofollow noreferrer\">https://ideone.com/jDjoeB</a></p>\n"}], "owner": {"reputation": 11, "user_id": 12388545, "user_type": "registered", "profile_image": "https://graph.facebook.com/2618518628240594/picture?type=large", "display_name": "Milosh", "link": "https://stackoverflow.com/users/12388545/milosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1575546847, "creation_date": 1575463411, "last_edit_date": 1575539390, "question_id": 59176333, "link": "https://stackoverflow.com/questions/59176333/c-integer-array-transforms-and-manipulation", "title": "C++ integer array transforms and manipulation", "body": "<p>So I have an assignment to</p>\n\n<ul>\n<li>input an array,</li>\n<li>count its even numbers (positive and negative),</li>\n<li>calculate the sum of all even #</li>\n<li>and after the program has to out put a transformed array, where each even # is changed into a sum of all numbers that stand before it (** in the original array **) : <code>arr[i] = 1, 2, 3, 4, 5, 6;</code> -> <code>array[i] = 1, 1, 3, 6, 5, 15</code></li>\n</ul>\n\n<p>so here's how I tried it, but it works up to the 5th element after which it starts outputting some odd looking #s. What do i have to do???</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;climits&gt;\n#include &lt;cmath&gt;\n#include &lt;cstdlib&gt;\n#include &lt;locale&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\nint main()\n{\n    srand((unsigned)time(NULL));\n    int n, i, k = 0;\n    int sum;\n    int S = 0;\n    cout &lt;&lt; \"What size array would you like:\" &lt;&lt; endl;\n    cout &lt;&lt; \"n = \";\n    cin &gt;&gt; n;\n    int* A = new int[n];\n    sum = 0;\n    cout &lt;&lt; \"Input elements: \";\n    for (i = 0; i &lt; n; i++) cin &gt;&gt; A[i];\n    for (int i = 0; i &lt; n; i++)\n    {\n        cout &lt;&lt; A[i] &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    for (int i = 0; i &lt; n; i++)\n    {\n        if (A[i] % 2 == 0) {\n            k = k + 1;\n            sum += A[i];\n        }\n    }\n    cout &lt;&lt; \"Ampount of even numbs: \" &lt;&lt; k &lt;&lt; endl &lt;&lt; endl;\n    cout &lt;&lt; \"Sum of even numbs: \" &lt;&lt; sum &lt;&lt; endl &lt;&lt; endl;\n    cout &lt;&lt; \"New array: \" &lt;&lt; endl;\n    for (int i = 0; i &lt; n; i++)\n    {\n        if (abs(A[i]) % 2 == 0)\n        {\n            for (int j = 0; j &lt; i; j++)\n            {\n                S += A[j];\n            }\n            A[i] = S;\n        }\n    }\n\n    for (int i = 0; i &lt; n; i++)\n    {\n        cout &lt;&lt; A[i] &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n    cout &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "sfinae"], "comments": [{"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 5, "creation_date": 1575462964, "post_id": 59176159, "comment_id": 104573761, "body": "If your C++ code is automatically generated can&#39;t you include this logic in the generator itself? I.e. generate call only if it can find function in C source."}, {"owner": {"reputation": 74, "user_id": 5746085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4b737331787537020369ee7f7d0f041?s=128&d=identicon&r=PG&f=1", "display_name": "hasi90", "link": "https://stackoverflow.com/users/5746085/hasi90"}, "edited": false, "score": 0, "creation_date": 1575463255, "post_id": 59176159, "comment_id": 104573908, "body": "You might find some tips ins this link: <a href=\"https://stackoverflow.com/questions/8814705/how-to-check-if-the-function-exists-in-c-c/8814869#8814869\">how-to-check-if-the-function-exists</a>"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 1, "creation_date": 1575463290, "post_id": 59176159, "comment_id": 104573933, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/257288/is-it-possible-to-write-a-template-to-check-for-a-functions-existence\">Is it possible to write a template to check for a function&#39;s existence?</a>"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1575463339, "post_id": 59176159, "comment_id": 104573964, "body": "If you have some structure indicator method/field then there are SFINAE approaches in the linked question."}, {"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1575463357, "post_id": 59176159, "comment_id": 104573978, "body": "@DanM. the generator does not know the c source. it uses a definition language that does not include this information"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1575472070, "post_id": 59176159, "comment_id": 104579217, "body": "Do you control generator? Do you have the C-Header?"}], "answers": [{"tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": false, "score": 0, "last_activity_date": 1575471649, "last_edit_date": 1575471649, "creation_date": 1575464372, "answer_id": 59176619, "question_id": 59176159, "link": "https://stackoverflow.com/questions/59176159/c-call-c-function-if-it-does-exist/59176619#59176619", "title": "c++ call c function if it does exist", "body": "<p>The question of whether there's a definition of some symbol with external linkage or not is inherently a question that can only be answered during linking. There is no way for the compiler to know during compilation of an individual C++ source file whether there is going to be a definition of some external function somewhere else. SFINAE can, in the best case, check for whether a certain function is <em>declared</em>. It is impossible for SFINAE to determine whether the linker will find a definition of that function later on.</p>\n\n<p>If the C library comes with headers that you can include in C++ and that declare the functions in question only if the particular version of the C library defines them, you can use an appraoch like the one described in Jarod42's answer.</p>\n\n<p>Otherwise, the best thing I can think of to do here would be to define default implementations of your functions as <a href=\"https://en.wikipedia.org/wiki/Weak_symbol\" rel=\"nofollow noreferrer\">weak symbols</a> that are always defined, e.g.:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct SomeStruct\n{\n    int indicatorMember;\n};\n\nextern \"C\" void someFun(SomeStruct* somePointer) __attribute__((weak))\n{\n    // do whatever this should do in case the C library does not define this function\n}\n</code></pre>\n\n<p>Weak symbols are no part of Standard C++, so the exact mechanism for doing this depends on your compiler and platform. The above would be an example for GCC. MSVC has an undocumented linker flag <code>/alternatename</code> that allows to provide default definitions for a symbol, see <a href=\"https://stackoverflow.com/a/11529277/2064761\">this answer</a>.</p>\n\n<p>During linking, if the linker finds a non-weak definition of the same symbol coming from your C library, it will pick that one, otherwise it will pick your default implementation\u2026</p>\n"}, {"comments": [{"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1575470454, "post_id": 59178483, "comment_id": 104578260, "body": "The problem with this is that it&#39;s still a question of what functions are declared and not of what functions have definitions. You would somehow have to make all declarations of the C library function disappear if the C library doesn&#39;t define the function\u2026"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1575472100, "post_id": 59178483, "comment_id": 104579233, "body": "Unsure of the &quot;input&quot; (Do we have c-header, does OP generates C++ code or not, ...)"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1575470259, "creation_date": 1575470259, "answer_id": 59178483, "question_id": 59176159, "link": "https://stackoverflow.com/questions/59176159/c-call-c-function-if-it-does-exist/59178483#59178483", "title": "c++ call c function if it does exist", "body": "<p>You might use overload with lower priority to solve your issue:</p>\n\n<pre><code>// \"C-Header\"\nstruct SomeStruct\n{\n  int indicatorMember;\n};\n\n// Present or not\nextern \"C\" void someFun(struct SomeStruct* somePointer){\n\n}\n\n// Fallback\nvoid someFun(...) { /*Empty*/ }\n\nvoid someCPPcode()\n{\n  SomeStruct s;\n  // do something\n\n  someFun(&amp;s);\n\n  // do something other\n}\n</code></pre>\n\n<blockquote>\n  <p>it would also be possible to decide if this function exists, if a certain member is part of a structure. so, if <code>indicatorMember</code> does exist, the function also exists.</p>\n</blockquote>\n\n<p>There are several ways to detect presence of member, such as use of <a href=\"https://en.cppreference.com/w/cpp/experimental/is_detected\" rel=\"nofollow noreferrer\"><code>std::experimental::is_detected</code></a>.</p>\n\n<p>but outside template, you still have issue:</p>\n\n<pre><code>decltype(auto) someFunIfExists([[maybe_unused]] SomeStruct* p)\n{\n    if constexpr (has_someFunc&lt;SomeStruct&gt;::value) {\n        return someFun(p); // Not discarded as you might expect -&gt; Error\n    }\n}\n</code></pre>\n\n<p>as <code>if constexpr (false) { static_assert(false); }</code> is invalid).</p>\n\n<p>So you have to wrap the function inside template:</p>\n\n<pre><code>template &lt;typename T&gt;\ndecltype(auto) someFunIfExists([[maybe_unused]] T* p)\n{\n    if constexpr (has_someFunc&lt;T&gt;::value) {\n        return someFun(p);\n    }\n}\n\nvoid someCPPcode(){\n  SomeStruct s;\n  // do something\n\n  someFunIfExists(&amp;s);\n\n  // do something other\n}\n</code></pre>\n"}], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 1, "accepted_answer_id": 59178483, "answer_count": 2, "score": 2, "last_activity_date": 1575471649, "creation_date": 1575462763, "last_edit_date": 1575463025, "question_id": 59176159, "link": "https://stackoverflow.com/questions/59176159/c-call-c-function-if-it-does-exist", "title": "c++ call c function if it does exist", "body": "<p>I have some C++ code that is automatically generated to wrap some C code.</p>\n\n<p>The C code has a predictable structure with the exception that it has/has not a certain function.</p>\n\n<p>Since the C++ code is derived from a description that does not have this information. I would like to use the template processor to decide if this function can be called.</p>\n\n<p>small example:</p>\n\n<pre><code>struct SomeStruct{\n  int indicatorMember;\n};\nextern \"C\" void someFun(struct SomeStruct* somePointer){\n}\n\n\n\nvoid someCPPcode(){\n  SomeStruct s;\n  // do something\n\n  someMechanismToCall_someFunIfExists(&amp;s);\n\n  // do something other\n}\n</code></pre>\n\n<p>How does <code>someMechanismToCall_someFunIfExists</code> have to look like, so that someCPPcode can be compiled/run in cases there <code>someFun</code> does exist and if it does not exist?</p>\n\n<p>Is this even possible?</p>\n\n<p>It would also be possible to decide if this function exists, if a certain member is part of a structure.\nso, if <code>indicatorMember</code> does exist, the function also exists.</p>\n"}]