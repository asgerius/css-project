[{"tags": ["c++", "lambda", "c++14", "c++17", "type-erasure"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1514420375, "post_id": 47999990, "comment_id": 82968793, "body": "@VittorioRomeo \u2022 seems this question may be in your court."}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 0, "creation_date": 1514421356, "post_id": 47999990, "comment_id": 82969021, "body": "Your lambda is captureless so you can use the implicit conversion to pass a function pointer instead of <code>std::function</code> to get rid of the allocation."}, {"owner": {"reputation": 475, "user_id": 361190, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/Alc9X.jpg?s=128&g=1", "display_name": "MGH", "link": "https://stackoverflow.com/users/361190/mgh"}, "reply_to_user": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 0, "creation_date": 1514422985, "post_id": 47999990, "comment_id": 82969322, "body": "@HenriMenke: Well in the real use, its not captureless. I just kept it simple of the example."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1514424647, "post_id": 47999990, "comment_id": 82969666, "body": "It sounds like you answered your own question in the question?"}], "answers": [{"comments": [{"owner": {"reputation": 475, "user_id": 361190, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/Alc9X.jpg?s=128&g=1", "display_name": "MGH", "link": "https://stackoverflow.com/users/361190/mgh"}, "edited": false, "score": 0, "creation_date": 1514429530, "post_id": 48000549, "comment_id": 82970582, "body": "This does not look correct. Cannot save the stack variable address in queue. Otherwise we will have to allocate the lambdaHolder in heap. In which case we can use std::function itself."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 475, "user_id": 361190, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/Alc9X.jpg?s=128&g=1", "display_name": "MGH", "link": "https://stackoverflow.com/users/361190/mgh"}, "edited": false, "score": 0, "creation_date": 1514457027, "post_id": 48000549, "comment_id": 82979834, "body": "You are right. This should however require less heap space to be allocated, especially if the lambda has state and the initial lambda object is kept alive until the queue has been used."}], "tags": [], "owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "is_accepted": false, "score": -1, "last_activity_date": 1514424520, "creation_date": 1514424520, "answer_id": 48000549, "question_id": 47999990, "link": "https://stackoverflow.com/questions/47999990/passing-lambda-to-a-lambda-callback-parameter/48000549#48000549", "title": "passing lambda to a lambda callback parameter", "body": "<p>Not sure if this is what you're looking for, but maybe it can be to some help.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;deque&gt;\n#include &lt;memory&gt;\n\nstruct lambdaHolderBase {\n    virtual int operator()() = 0;\n};\n\ntemplate &lt;typename T&gt;\nstruct lambdaHolder : lambdaHolderBase {\n    lambdaHolder(T tf) : t(tf) {}\n    T&amp; t;\n    int operator()() override { return t(); }\n};\n\ntemplate &lt;typename F&gt;\nvoid foo (F&amp;&amp; fun)\n{\n    auto l = []()-&gt;int\n    {\n        return 20;\n    };\n    lambdaHolder&lt;decltype(l)&gt; l2(l);\n\n    fun(l2);\n}\n\nint main ()\n{\n    auto l = [] (auto&amp; a)\n    {\n        static std::deque&lt;lambdaHolderBase*&gt; queue;\n        std::cout &lt;&lt; \"Hello function: \" &lt;&lt; a() &lt;&lt; std::endl;\n        queue.emplace_back( &amp;a );\n        // 'a' has to be copied to a queue optionally\n    };\n\n    foo(l);\n}\n</code></pre>\n"}], "owner": {"reputation": 475, "user_id": 361190, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/Alc9X.jpg?s=128&g=1", "display_name": "MGH", "link": "https://stackoverflow.com/users/361190/mgh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514424520, "creation_date": 1514419194, "question_id": 47999990, "link": "https://stackoverflow.com/questions/47999990/passing-lambda-to-a-lambda-callback-parameter", "title": "passing lambda to a lambda callback parameter", "body": "<p>I am using c++14 and I have a use case where I have to effectively do this:</p>\n\n<pre><code>template &lt;typename F&gt;\nvoid foo (F&amp;&amp; fun)\n{\n    auto l = []()-&gt;int\n    {\n        return 20;\n    };\n\n    fun(l);\n}\n\nint main ()\n{\n    auto l = [] (auto&amp; a)\n    {\n        std::cout &lt;&lt; \"Hello function: \" &lt;&lt; a() &lt;&lt; std::endl;\n        // 'a' has to be copied to a queue optionally\n    };\n\n    foo(l);\n}\n</code></pre>\n\n<p>But the <code>foo()</code> in-turn calls a million function - which uses the callback '<code>fun</code>'. I cannot put all the code in header file. The simplest way to keep the definition of <code>foo()</code> and the called functions in dot cpp file might be to change <code>foo()</code> to</p>\n\n<pre><code>void foo (std::function&lt; void(std::function&lt;int(void)&gt;) &gt; fun)\n</code></pre>\n\n<p>But this is too inefficient, I dont want any memory allocation. Here there will be many, one of the creating the '<code>fun</code>' and then for every call to '<code>fun(...)</code>'. Now the outer std::function can be optimized by using something like the function_ref mentioned here. \n<a href=\"https://vittorioromeo.info/index/blog/passing_functions_to_functions.html#fn_view_impl\" rel=\"nofollow noreferrer\">https://vittorioromeo.info/index/blog/passing_functions_to_functions.html#fn_view_impl</a></p>\n\n<p>But inner std::function, cannot be because it has to be 'optionally' copied to a queue. Now how can I make this work without a memory allocation - as close to the performance as using the template. [ One way is to have something like the std::function with a fixed internal storage.] But I have a feeling there exists a way by throwing more templates to achieve what I want. Or some way to change the interface to have more of less same effect.</p>\n"}, {"tags": ["c++", "c++11", "templates", "sfinae"], "comments": [{"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1514424218, "post_id": 47999952, "comment_id": 82969564, "body": "It compiles without error under VC++17 with the strictest standard-compliance settings. As to what to do... more static_cast?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1514433541, "post_id": 47999952, "comment_id": 82971301, "body": "<a href=\"http://rextester.com/XXB71770\" rel=\"nofollow noreferrer\">Compiles with clang</a>, too."}, {"owner": {"reputation": 11, "user_id": 9147139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec9d9487e89cf06f5280c170e25eca61?s=128&d=identicon&r=PG&f=1", "display_name": "Sameer Varyani", "link": "https://stackoverflow.com/users/9147139/sameer-varyani"}, "edited": false, "score": 0, "creation_date": 1514528952, "post_id": 47999952, "comment_id": 83005693, "body": "So is this a bug in g++? I will try to file one witt gnu.."}, {"owner": {"reputation": 11, "user_id": 9147139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec9d9487e89cf06f5280c170e25eca61?s=128&d=identicon&r=PG&f=1", "display_name": "Sameer Varyani", "link": "https://stackoverflow.com/users/9147139/sameer-varyani"}, "edited": false, "score": 0, "creation_date": 1516085367, "post_id": 47999952, "comment_id": 83534360, "body": "Filed a bug with gnu gcc, <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=83652\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=83652</a>"}], "owner": {"reputation": 11, "user_id": 9147139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec9d9487e89cf06f5280c170e25eca61?s=128&d=identicon&r=PG&f=1", "display_name": "Sameer Varyani", "link": "https://stackoverflow.com/users/9147139/sameer-varyani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1514418881, "creation_date": 1514418881, "question_id": 47999952, "link": "https://stackoverflow.com/questions/47999952/template-substitution-failure-with-sfinae", "title": "template substitution failure with sfinae", "body": "<p>The following code does not compiler with GCC 5.2 or later, have not tried older compiler. Amy idea on what I am doing wrong here.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename T&gt;\ntypename std::enable_if&lt;std::is_enum&lt;T&gt;::value, T&gt;::type\noperator^=(T &amp;lhs, const T &amp;rhs)\n{\n    lhs = static_cast&lt;T&gt;(\n                 static_cast&lt;typename std::underlying_type&lt;T&gt;::type&gt;(lhs) ^\n                 static_cast&lt;typename std::underlying_type&lt;T&gt;::type&gt;(rhs));\n    return lhs;\n}\n\ntemplate &lt;typename T, typename S&gt;\ntypename std::enable_if&lt;std::is_enum&lt;T&gt;::value &amp;&amp; std::is_integral&lt;S&gt;::value, T&gt;::type\noperator^=(T &amp;lhs, const S &amp;rhs)\n{\n    lhs = static_cast&lt;T&gt;(\n                 static_cast&lt;typename std::underlying_type&lt;T&gt;::type&gt;(lhs) ^\n                 static_cast&lt;typename std::underlying_type&lt;T&gt;::type&gt;(rhs));\n    return lhs;\n}\n\nenum Enum_t{\n    Red,\n    Blue,\n    Green,\n    Black\n} ;\n#define somedef 2\nint main(){\n    Enum_t b = Red;\n    b ^= somedef;\n\n    std::cout &lt;&lt; std::to_string(b) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I get the following error:</p>\n\n<p>g++ -std=gnu++11 main.cpp</p>\n\n<pre><code>main.cpp: In function \u2018int main()\u2019:\nmain.cpp:34:4: error: invalid conversion from \u2018int\u2019 to \u2018Enum_t\u2019 [-fpermissive]\nb ^= somedef;\n</code></pre>\n"}, {"tags": ["c++", "sockets", "ssl", "boost", "tcp"], "answers": [{"tags": [], "owner": {"reputation": 3808, "user_id": 2922611, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f26420ac1fcb58b3d0c0f63273eaf3f5?s=128&d=identicon&r=PG&f=1", "display_name": "kenba", "link": "https://stackoverflow.com/users/2922611/kenba"}, "is_accepted": true, "score": 1, "last_activity_date": 1514459435, "creation_date": 1514459435, "answer_id": 48006404, "question_id": 47999884, "link": "https://stackoverflow.com/questions/47999884/how-to-accept-boostasiosslstreamboostasioiptcpsocket-as-an-argum/48006404#48006404", "title": "How to accept boost::asio::ssl::stream&lt;boost::asio::ip::tcp::socket&gt; as an argument of type boost::asio::ip::tcp::socket", "body": "<p>Try using <a href=\"http://www.boost.org/doc/libs/1_66_0/doc/html/boost_asio/reference/ssl__stream/lowest_layer.html\" rel=\"nofollow noreferrer\">lowest_layer()</a> instead of next layer.</p>\n\n<p>For example, this asio <a href=\"https://github.com/kenba/via-httplib\" rel=\"nofollow noreferrer\">HTTP library</a> uses\"templates everywhere\" and connects an SSL socket with the following code:</p>\n\n<pre><code>void connect_socket(ConnectHandler connect_handler,\n                    ASIO::ip::tcp::resolver::iterator host_iterator)\n{ ASIO::async_connect(socket_.lowest_layer(), host_iterator, connect_handler); }\n</code></pre>\n\n<p>Where <code>socket_</code> is a <code>boost::asio::ssl::stream&lt;boost::asio::ip::tcp::socket&gt;</code>.</p>\n"}], "owner": {"reputation": 252, "user_id": 5708421, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/000fd5a6932535de79b59e563efad05c?s=128&d=identicon&r=PG&f=1", "display_name": "Paolo Celati", "link": "https://stackoverflow.com/users/5708421/paolo-celati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 48006404, "answer_count": 1, "score": 1, "last_activity_date": 1514459435, "creation_date": 1514418112, "last_edit_date": 1514451673, "question_id": 47999884, "link": "https://stackoverflow.com/questions/47999884/how-to-accept-boostasiosslstreamboostasioiptcpsocket-as-an-argum", "title": "How to accept boost::asio::ssl::stream&lt;boost::asio::ip::tcp::socket&gt; as an argument of type boost::asio::ip::tcp::socket", "body": "<p>I was trying to adapt the SSL server example in the Boost docs <a href=\"http://www.boost.org/doc/libs/1_66_0/doc/html/boost_asio/example/cpp03/ssl/server.cpp\" rel=\"nofollow noreferrer\">here</a> but I would like to make an application where you can use normal <code>boost::asio::ip::tcp::socket</code> or an SSL socket but I haven't found a good way to pass either to a function like <code>void do_something_with_socket(boost::asio::ip::tcp::socket&amp; sock)</code> because the SSL socket doesn't inherit from the raw TCP socket.  The only thing I can think of is to use templates everywhere but I was wondering if there is any better way to do this?  Thanks.</p>\n\n<p>Edit: I've looked through the members of <code>boost::asio::ssl::stream&lt;boost::asio::ip::tcp::socket&gt;</code> and I've found <code>next_layer()</code> is a <code>boost::asio::ip::tcp::socket</code> but I've tried it and it doesn't encrypt the data because I guess this is the raw socket the SSL stream uses?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1514416870, "post_id": 47999723, "comment_id": 82968033, "body": "I fail to understand what do you mean by &quot;<i>append a value from an array of char, into an Int variable</i>&quot;. Do you want to convert <code>char[]</code> containing only digits (and maybe leading <code>&#39;-&#39;</code>) to an <code>int</code> variable?"}, {"owner": {"reputation": 49, "user_id": 9147038, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Iol-PEdt494/AAAAAAAAAAI/AAAAAAAAAQw/N2pAz2mPfjk/photo.jpg?sz=128", "display_name": "Naufal Adi", "link": "https://stackoverflow.com/users/9147038/naufal-adi"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1514417284, "post_id": 47999723, "comment_id": 82968140, "body": "sorry about that i&#39;m still learning programming terms. basically, yeah, i want to convert my &quot;oddId&quot; (which is char) into an int variable, so i can use the &quot;%&quot; operator on it"}, {"owner": {"reputation": 2361, "user_id": 7410358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b241c8238988d25da76f83adf9071201?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Langholtz", "link": "https://stackoverflow.com/users/7410358/louis-langholtz"}, "edited": false, "score": 0, "creation_date": 1514417400, "post_id": 47999723, "comment_id": 82968166, "body": "Seems there&#39;s a disconnect at least terminologically in what you&#39;re asking. What does the code look like in Python to do what you want? Show that code and I suspect that&#39;ll make more sense of things for people to respond to. Thanks!"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1514417403, "post_id": 47999723, "comment_id": 82968168, "body": "You&#39;re not filling in some of the elements of <code>oddid</code>."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1514417415, "post_id": 47999723, "comment_id": 82968172, "body": "<code>stoi()</code> expects a <b>null-terminated</b> sequence of characters, aka <code>string</code>. Make your <code>char[]</code>s 1 character longer and add <code>&#39;\\0&#39;</code> as the last <code>char</code>"}, {"owner": {"reputation": 49, "user_id": 9147038, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Iol-PEdt494/AAAAAAAAAAI/AAAAAAAAAQw/N2pAz2mPfjk/photo.jpg?sz=128", "display_name": "Naufal Adi", "link": "https://stackoverflow.com/users/9147038/naufal-adi"}, "reply_to_user": {"reputation": 2361, "user_id": 7410358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b241c8238988d25da76f83adf9071201?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Langholtz", "link": "https://stackoverflow.com/users/7410358/louis-langholtz"}, "edited": false, "score": 0, "creation_date": 1514417690, "post_id": 47999723, "comment_id": 82968232, "body": "@LouisLangholtz i added the python version of this code, thank you for the suggestion !"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1514418836, "post_id": 47999723, "comment_id": 82968448, "body": "There doesn\u2019t exist a if loop."}], "answers": [{"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1514417505, "creation_date": 1514417505, "answer_id": 47999829, "question_id": 47999723, "link": "https://stackoverflow.com/questions/47999723/c-how-do-i-append-a-value-to-an-int-variable-with-for-and-if-loop/47999829#47999829", "title": "C++ /// How do i append a value to an int variable with for and if loop", "body": "<pre><code>int value = 0;\nfor(int ndx = 0; count != ndx; ++ndx)\n{\n  value *= 10;\n  value += str[ndx] - '0';\n}\n</code></pre>\n\n<p>Assumes  the length is already known and that all characters are between 0 and 9 inclusive.</p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 9147038, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Iol-PEdt494/AAAAAAAAAAI/AAAAAAAAAQw/N2pAz2mPfjk/photo.jpg?sz=128", "display_name": "Naufal Adi", "link": "https://stackoverflow.com/users/9147038/naufal-adi"}, "edited": false, "score": 0, "creation_date": 1514418573, "post_id": 47999845, "comment_id": 82968394, "body": "okay you probably meant to type &quot;indexin++&quot; in the for statement right ? i did just that and it worked! thank you so much! i didn&#39;t expect responses this fast ^^"}, {"owner": {"reputation": 49, "user_id": 9147038, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Iol-PEdt494/AAAAAAAAAAI/AAAAAAAAAQw/N2pAz2mPfjk/photo.jpg?sz=128", "display_name": "Naufal Adi", "link": "https://stackoverflow.com/users/9147038/naufal-adi"}, "edited": false, "score": 0, "creation_date": 1514418596, "post_id": 47999845, "comment_id": 82968402, "body": "i&#39;m still trying to understand how your code works though, i didn&#39;t even know i used this &quot;C-style string&quot;"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1514418677, "last_edit_date": 1514418677, "creation_date": 1514417724, "answer_id": 47999845, "question_id": 47999723, "link": "https://stackoverflow.com/questions/47999723/c-how-do-i-append-a-value-to-an-int-variable-with-for-and-if-loop/47999845#47999845", "title": "C++ /// How do i append a value to an int variable with for and if loop", "body": "<p>There are several problems with this part of the code:</p>\n\n<pre><code>char oddId[8];\nfor (int c = 0; c &lt; 8; c++)\n{\n    if (studentId[c] % 2 != 0)\n    {\n        oddId[c] = studentId[c];\n    }\n}\n</code></pre>\n\n<p>First, <code>oddId</code> isn't big enough. To hold an 8-digit string, you need 9 elements, because you need a null terminator.</p>\n\n<p>Second, you're using the same index <code>c</code> for the input array and the output array. This means that the elements of <code>oddId</code> that correspond to the even elements of <code>studentId</code> will never be filled in. That's why you see all those garbage characters in the middle of the output.</p>\n\n<p>Third, you never add a null terminator when you're done. That's why you see more garbage characters at the end of the output.</p>\n\n<p>Fourth, if the input string is less than 8 characters long, you'll read past the end of it. You need to use <code>strlen()</code> to get the limit. You should also use this in the earlier loop that prints all the even places, instead of <code>sizeof(studentId)</code>.</p>\n\n<p>Try this:</p>\n\n<pre><code>char oddId[9];\nint indexout = 0;\nint len = strlen(studentId);\nfor (int indexin = 0; indexin &lt; len; indexin++)\n{\n    if (studentId[indexin] % 2 != 0)\n    {\n        oddId[indexout++] = studentId[indexin];\n    }\n}\noddId[indexout] = '\\0';\n</code></pre>\n\n<p>BTW, things would be much easier if you used <code>std::string</code> instead of a C-style string, since it supports concatenation.</p>\n"}], "owner": {"reputation": 49, "user_id": 9147038, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Iol-PEdt494/AAAAAAAAAAI/AAAAAAAAAQw/N2pAz2mPfjk/photo.jpg?sz=128", "display_name": "Naufal Adi", "link": "https://stackoverflow.com/users/9147038/naufal-adi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 880, "favorite_count": 0, "accepted_answer_id": 47999845, "answer_count": 2, "score": -3, "last_activity_date": 1514418677, "creation_date": 1514416593, "last_edit_date": 1514417638, "question_id": 47999723, "link": "https://stackoverflow.com/questions/47999723/c-how-do-i-append-a-value-to-an-int-variable-with-for-and-if-loop", "title": "C++ /// How do i append a value to an int variable with for and if loop", "body": "<p>as the title says, i'm currently confused on how to append a value from an array of char, into an Int variable. i know how to get around this in python but i'm really new to c++ and I've been trying to look for a solution online but there just isn't any. </p>\n\n<p>so anyway here's my code</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\nusing namespace std;\n\n\nint main()\n{\n    char studentId[9];\n    cout &lt;&lt; \"Enter Student ID : \";\n    cin &gt;&gt; studentId\n\n    int n;\n    cout &lt;&lt; \"\\nYour special number is \";\n    for (n=1; n&lt;(sizeof(studentId)); n+=2)\n    {\n        cout &lt;&lt; studentId[n]; //this displays all numbers in even places, this one works\n    }\n\n\n    char oddId[8];\n    for (int c = 0; c &lt; 8; c++)\n    {\n        if (studentId[c] % 2 != 0)\n        {\n            oddId[c] = studentId[c];\n        }\n    }\n    cout &lt;&lt; \"\\nOdd numbers after the for loop : \" &lt;&lt; oddId;\n    int oddInt = stoi(oddId);\n    cout &lt;&lt; \"\\nOdd numbers after converted to Int : \" &lt;&lt; oddInt; // i need to convert the odd numbers to int so i can get the remainder\n    cout &lt;&lt; \"\\nYour lucky number is \" &lt;&lt; oddInt % 9 &lt;&lt; endl; //remainder of odd numbers when divided by 9\n\n\n    return 0;\n}\n</code></pre>\n\n<p>And this is the output</p>\n\n<p><a href=\"https://i.stack.imgur.com/3kmp9.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3kmp9.jpg\" alt=\"output\"></a></p>\n\n<p>Thank you so much in advance, been trying to figure this out for 3 days now.</p>\n\n<p>[Edit] </p>\n\n<p>This is what i did in python, might be a mess but it works how i want it to be :</p>\n\n<pre><code>def magic(num_list):\ns = ''.join(map(str, num_list))\nreturn(int(s))\n\nstd_id = input(\"Enter Student ID: \")\n\nid_list = []\nfor a in std_id:\n    id_list.append(a)\n\nid_no = list(map(int, id_list))\n\neven_list = id_no[1::2]\n\nodd_list = []\nfor x in id_no:\n    if x % 2 == 1:\n        odd_list.append(x)\n\noddodd = magic(odd_list)\neveneven = magic(even_list)\n\nprint(\"Your special number is\", eveneven)\nprint(\"Your lucky number is\", oddodd % 9)\n</code></pre>\n"}, {"tags": ["c++", "opengl", "sdl-2"], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 8993662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/olCh5.jpg?s=128&g=1", "display_name": "slugz", "link": "https://stackoverflow.com/users/8993662/slugz"}, "edited": false, "score": 0, "creation_date": 1514418535, "post_id": 47999806, "comment_id": 82968385, "body": "Thank you, this solved the issue and led me to learning something!"}], "tags": [], "owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "is_accepted": true, "score": 4, "last_activity_date": 1514417317, "creation_date": 1514417317, "answer_id": 47999806, "question_id": 47999649, "link": "https://stackoverflow.com/questions/47999649/modern-opengl-sdl2-triangle-not-showing-up/47999806#47999806", "title": "Modern OpenGL + SDL2 Triangle not showing up", "body": "<p>Your program is a valid GL program which should not generate any errors. It correctly draws the background color, and correctly does not draw any triangle.</p>\n\n<p>The default front face orientation in the GL is counter-clockwise (<code>GL_CCW</code>). The triangle which you define is oriented clockwise in clip space (and all following spaces NDC and window space). As a result,</p>\n\n<pre><code>glEnable(GL_CULL_FACE);\n</code></pre>\n\n<p>will have the effect of culling the triangle before rasterization. To see the triangle, either disable (just don't enable it, it is off by default) <code>GL_CULL_FACE</code>, OR set the front-face convention to clockwise via <code>glFrontFace(GL_CW)</code>, OR just set <code>glCullFace(GL_FRONT)</code> to let the GL cull the front faces instead, OR just swap any two vertices in your array.</p>\n"}], "owner": {"reputation": 97, "user_id": 8993662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/olCh5.jpg?s=128&g=1", "display_name": "slugz", "link": "https://stackoverflow.com/users/8993662/slugz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 788, "favorite_count": 1, "accepted_answer_id": 47999806, "answer_count": 1, "score": 1, "last_activity_date": 1514417317, "creation_date": 1514415935, "question_id": 47999649, "link": "https://stackoverflow.com/questions/47999649/modern-opengl-sdl2-triangle-not-showing-up", "title": "Modern OpenGL + SDL2 Triangle not showing up", "body": "<p>I am currently trying to learn how to use OpenGL in C++ after spending some time with just SDL2 and am struggling in getting my triangle to display on screen. I have been following a series of tutorials and trying to get a deep understanding of how everything works. I was successful in getting a simple solid colored triangle to show up on screen but when I try to give every vertex a different color nothing shows up except for the background.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n#include &lt;GL/glew.h&gt;\n#include &lt;GL/GLU.h&gt;\n#include &lt;SDL.h&gt;\n#include &lt;SDL_opengl.h&gt;\n\n//***************************************************************************\n// The Width of the screen\n//***************************************************************************\nconst GLuint SCREEN_WIDTH = 800;\n\n//***************************************************************************\n// The height of the screen\n//***************************************************************************\nconst GLuint SCREEN_HEIGHT = 600;\n\nbool success = GL_TRUE;\n\nconst GLchar* vertexShaderSource = \"#version 330 core\\n\"\n\"layout (location = 0) in vec3 position;\\n\"\n\"layout (location = 1) in vec3 color;\\n\"\n\"out vec3 ourColor;\\n\"\n\"void main()\\n\"\n\"{\\n\"\n\"gl_Position = vec4(position, 1.0);\\n\"\n\"ourColor = color;\\n\"\n\"}\\0\";\n\nconst GLchar* fragmentShaderSource = \"#version 330 core\\n\"\n\"in vec3 ourColor;\\n\"\n\"out vec4 color;\\n\"\n\"void main()\\n\"\n\"{\\n\"\n\"color = vec4(ourColor, 1.0f);\\n\"\n\"}\\n\\0\";\n\nbool quit;\n\nint main(int argc, char *argv[])\n{\n    //***********************************************************************\n    // Initialize SDL\n    //***********************************************************************\n    if (SDL_Init(SDL_INIT_EVERYTHING) &lt; 0)\n    {\n        std::cout &lt;&lt; \"SDL could not initialize!SDL Error :\" &lt;&lt;\n            std::string(SDL_GetError());\n\n        return EXIT_FAILURE;\n    }\n    else\n    {\n        SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);\n        SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 3);\n        SDL_GL_SetAttribute(SDL_GL_CONTEXT_PROFILE_MASK,\n            SDL_GL_CONTEXT_PROFILE_CORE);\n\n        SDL_GL_SetAttribute(SDL_GL_STENCIL_SIZE, 8);\n        SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);\n\n        //*******************************************************************\n        //The window we'll be rendering to\n        //*******************************************************************\n        SDL_Window *window = SDL_CreateWindow(\"Triangle\",\n            SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, SCREEN_WIDTH,\n            SCREEN_HEIGHT, SDL_WINDOW_SHOWN |\n            SDL_WINDOW_OPENGL | SDL_WINDOW_RESIZABLE);\n\n        if (window == NULL)\n        {\n            std::cout &lt;&lt; \"Window could not be created!SDL_Error: \" &lt;&lt;\n                std::string(SDL_GetError()) &lt;&lt; std::endl;\n\n            return EXIT_FAILURE;\n        }\n\n        //*******************************************************************\n        //OpenGL context\n        //*******************************************************************\n        SDL_GLContext context = SDL_GL_CreateContext(window);\n\n        //*******************************************************************\n        // Set the required callback functions\n        //*******************************************************************\n        SDL_Event windowEvent;\n\n        //*******************************************************************\n        //Use OpenGL 3.3\n        //*******************************************************************\n\n        //*******************************************************************\n        // Set this to true so GLEW knows to use a modern approach to \n        // retrieving function pointers and extensions\n        //*******************************************************************\n        glewExperimental = GL_TRUE;\n\n        //*******************************************************************\n        // Initialize GLEW to setup the OpenGL Function pointers\n        //*******************************************************************\n        GLenum glewError = glewInit();\n        if (GLEW_OK != glewError)\n        {\n            std::cout &lt;&lt; \"Failed to initialize GLEW: \" &lt;&lt; \n                glewGetErrorString(glewError) &lt;&lt; std::endl;\n\n            return EXIT_FAILURE;\n        }\n\n        glEnable(GL_CULL_FACE);\n        glEnable(GL_BLEND);\n        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n\n\n        //*******************************************************************\n        // Build and compile our shader program\n        // Vertex shader\n        //*******************************************************************\n        GLuint vertexShader = glCreateShader(GL_VERTEX_SHADER);\n        glShaderSource(vertexShader, 1, &amp;vertexShaderSource, NULL);\n        glCompileShader(vertexShader);\n\n        //*******************************************************************\n        // Check for compile time errors\n        //*******************************************************************\n        GLint success;\n        GLchar infoLog[512];\n        glGetShaderiv(vertexShader, GL_COMPILE_STATUS, &amp;success);\n        if (!success)\n        {\n            glGetShaderInfoLog(vertexShader, 512, NULL, infoLog);\n            std::cout &lt;&lt; \"ERROR::SHADER::VERTEX::COMPILATION_FAILED: \" &lt;&lt; \n                infoLog &lt;&lt; std::endl;\n        }\n\n        //*******************************************************************\n        // Fragment shader\n        //*******************************************************************\n        GLuint fragmentShader = glCreateShader(GL_FRAGMENT_SHADER);\n        glShaderSource(fragmentShader, 1, &amp;fragmentShaderSource, NULL);\n        glCompileShader(fragmentShader);\n\n        //*******************************************************************\n        // Check for compile time errors\n        //*******************************************************************\n        glGetShaderiv(fragmentShader, GL_COMPILE_STATUS, &amp;success);\n        if (!success)\n        {\n            glGetShaderInfoLog(fragmentShader, 512, NULL, infoLog);\n            std::cout &lt;&lt; \"ERROR::SHADER::FRAGMENT::COMPILATION_FAILED: \" &lt;&lt; \n                infoLog &lt;&lt; std::endl;\n        }\n\n        //*******************************************************************\n        // Link shaders\n        //*******************************************************************\n        GLuint shaderProgram = glCreateProgram();\n        glAttachShader(shaderProgram, vertexShader);\n        glAttachShader(shaderProgram, fragmentShader);\n        glLinkProgram(shaderProgram);\n\n        //*******************************************************************\n        // Check for linking errors\n        //*******************************************************************\n        glGetProgramiv(shaderProgram, GL_LINK_STATUS, &amp;success);\n        if (!success) {\n            glGetProgramInfoLog(shaderProgram, 512, NULL, infoLog);\n            std::cout &lt;&lt; \"ERROR::SHADER::PROGRAM::LINKING_FAILED: \" &lt;&lt; infoLog &lt;&lt; std::endl;\n        }\n        glDeleteShader(vertexShader);\n        glDeleteShader(fragmentShader);\n\n        //*******************************************************************\n        // Set up vertex data (and buffer(s)) and attribute pointers\n        //*******************************************************************\n        GLfloat vertices[] = {\n            // Positions            // Colors\n            0.5f, -0.5f, 0.0f,      1.0f, 0.0f, 0.0f,  // Bottom Right\n            -0.5f, -0.5f, 0.0f,     0.0f, 1.0f, 0.0f,  // Bottom Left\n            0.0f, 0.5f, 0.0f,       0.0f, 0.0f, 1.0f // Top\n        };\n\n        GLfloat colors[] = {\n            1.0f, 0.0f, 0.0f, 1.0f,\n            0.0f, 1.0f, 0.0f, 1.0f,\n            0.0f, 0.0f, 1.0f, 1.0f\n        };\n\n        GLuint VBO, VAO;\n        glGenVertexArrays(1, &amp;VAO);\n        glGenBuffers(1, &amp;VBO);\n\n        //*******************************************************************\n        // Bind the Vertex Array Object first, then bind and set vertex \n        // buffer(s) and attribute pointer(s).\n        //*******************************************************************\n        glBindVertexArray(VAO);\n\n        glBindBuffer(GL_ARRAY_BUFFER, VBO);\n        glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);\n\n        // Position attribute\n        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(GLfloat), (GLvoid *)0);\n        glEnableVertexAttribArray(0);\n        // Color attribute\n        glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(GLfloat), (GLvoid *)(3 * sizeof(GLfloat)));\n        glEnableVertexAttribArray(1);\n\n        //*******************************************************************\n        // Note that this is allowed, the call to glVertexAttribPointer \n        // registered VBO as the currently bound vertex buffer object so \n        // afterwards we can safely unbind\n        //*******************************************************************\n        glBindBuffer(GL_ARRAY_BUFFER, 0);\n\n        //*******************************************************************\n        // Unbind VAO (it's always a good thing to unbind any buffer/array to\n        // prevent strange bugs)\n        //*******************************************************************\n        glBindVertexArray(0);\n\n        //*******************************************************************\n        // DeltaTime variables\n        //*******************************************************************\n        GLdouble deltaTime = 0.0f;\n        Uint64 lastFrame = 0L;\n        Uint64 currentFrame = SDL_GetPerformanceCounter();\n\n        quit = false;\n\n        while (!quit)\n        {\n            //***************************************************************\n            // Calculate delta time\n            //***************************************************************\n            lastFrame = currentFrame;\n            currentFrame = SDL_GetPerformanceCounter();\n\n            deltaTime = ((currentFrame - lastFrame) * 1000 /\n                (GLdouble)SDL_GetPerformanceFrequency());\n\n            double tmpDeltaTime = deltaTime;\n\n            //std::cout &lt;&lt; \"Hello 1 - deltaTime: \" &lt;&lt; std::to_string(deltaTime) &lt;&lt;\n            //    std::endl;\n\n            if (SDL_PollEvent(&amp;windowEvent))\n            {\n                if (windowEvent.type == SDL_QUIT)\n                {\n                    quit = true;\n                }\n            }\n\n            //***************************************************************\n            // Clear the colorbuffer and render\n            //***************************************************************\n            glClearColor(0.2f, 0.3f, 0.3f, 1.0f);\n            glClear(GL_COLOR_BUFFER_BIT);\n\n            //***************************************************************\n            // Draw our first triangle\n            //***************************************************************\n            glUseProgram(shaderProgram);\n            glBindVertexArray(VAO);\n            glDrawArrays(GL_TRIANGLES, 0, 3);\n            glBindVertexArray(0);\n\n            //***************************************************************\n            // draw OpenGL: Swap the screen buffers\n            //***************************************************************\n            SDL_GL_SwapWindow(window);\n        }\n\n        //***************************************************************\n        // Properly de-allocate all resources once they've outlived their \n        // purpose\n        //***************************************************************\n        glDeleteVertexArrays(1, &amp;VAO);\n        glDeleteBuffers(1, &amp;VBO);\n        glDeleteProgram(shaderProgram);\n\n        SDL_GL_DeleteContext(context);\n        SDL_DestroyWindow(window);\n        SDL_Quit();\n    }\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>As you can tell I am trying to use both OpenGL and SDL2 in the same project. The console shows me no errors when I run this code and I get my greenish background but no triangle at all. I have rewatched several \"how shaders work\" videos to see if I missed anything but cannot seem to find the source of my problem. What did I miss?</p>\n"}, {"tags": ["c++", "qt", "lambda", "qt-signals", "qfilesystemwatcher"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1514416879, "post_id": 47999578, "comment_id": 82968036, "body": "<code>QFileSystemWatcher::QPrivateSignal</code> seems suspicious?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1514419167, "post_id": 47999578, "comment_id": 82968515, "body": "Change <code>QObject::connect(watcher, &amp;QFileSystemWatcher::directoryChanged,                      [] (const QString&amp;) { return 0; });</code> to <code>QObject::connect(&amp;watcher, &amp;QFileSystemWatcher::directoryChanged,                      [] (const QString&amp;) { return 0; });</code>"}], "answers": [{"comments": [{"owner": {"reputation": 425, "user_id": 1954275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0039be3fd1afcbfed53540039592b08?s=128&d=identicon&r=PG", "display_name": "shrpq", "link": "https://stackoverflow.com/users/1954275/shrpq"}, "edited": false, "score": 1, "creation_date": 1514417483, "post_id": 47999801, "comment_id": 82968185, "body": "Correct statement should be:  <code>QObject::connect(&amp;watcher, &amp;QFileSystemWatcher::directoryChanged,                      [] (const QString&amp;) { return 0; });</code>"}, {"owner": {"reputation": 177, "user_id": 3003552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ssq4k.png?s=128&g=1", "display_name": "JamesNZ", "link": "https://stackoverflow.com/users/3003552/jamesnz"}, "edited": false, "score": 0, "creation_date": 1514425160, "post_id": 47999801, "comment_id": 82969764, "body": "Gah, rookie mistake :P"}], "tags": [], "owner": {"reputation": 74, "user_id": 9147097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8cdca6fb6c09bbb3b5f46db5615b5fd?s=128&d=identicon&r=PG&f=1", "display_name": "sts", "link": "https://stackoverflow.com/users/9147097/sts"}, "is_accepted": true, "score": 0, "last_activity_date": 1514417277, "creation_date": 1514417277, "answer_id": 47999801, "question_id": 47999578, "link": "https://stackoverflow.com/questions/47999578/cannot-connect-qfilesystemwatcherdirectorychanged-to-a-lambda/47999801#47999801", "title": "Cannot connect QFileSystemWatcher::directoryChanged to a lambda", "body": "<p>Check the type of the first argument  the Qt 5.9 API  states that it has to be a pointer to a QObject derived Object.</p>\n\n<p>connect(const QObject *sender, PointerToMemberFunction signal, Functor functor) </p>\n"}], "owner": {"reputation": 177, "user_id": 3003552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ssq4k.png?s=128&g=1", "display_name": "JamesNZ", "link": "https://stackoverflow.com/users/3003552/jamesnz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 1, "accepted_answer_id": 47999801, "answer_count": 1, "score": 0, "last_activity_date": 1514417277, "creation_date": 1514415400, "question_id": 47999578, "link": "https://stackoverflow.com/questions/47999578/cannot-connect-qfilesystemwatcherdirectorychanged-to-a-lambda", "title": "Cannot connect QFileSystemWatcher::directoryChanged to a lambda", "body": "<p>As the title says, I'm trying to connect the <code>QFileSystemWatcher::directoryChanged(const QString&amp;)</code> signal to a lambda, but when I compile it with g++ (7.2.1), I get the following error (abbreviated since SO won't let me post too much code):</p>\n\n<pre><code>g++ -c -pipe -O2 -std=gnu++1y -Wall -W -D_REENTRANT -fPIC -DQT_DEPRECATED_WARNINGS -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -I. -I. -isystem /usr/include/qt5 -isystem /usr/include/qt5/QtGui -isystem /usr/include/qt5/QtCore -I. -isystem /usr/include/libdrm -I/usr/lib64/qt5/mkspecs/linux-g++ -o foo.o foo.cpp\nfoo.cpp: In function \u2018int main()\u2019:\nfoo.cpp:10:55: error: no matching function for call to \u2018QObject::connect(QFileSystemWatcher (&amp;)(), void (QFileSystemWatcher::*)(const QString&amp;, QFileSystemWatcher::QPrivateSignal), main()::&lt;lambda(const QString&amp;)&gt;)\u2019\n                      [] (const QString&amp;) { return 0; });\n</code></pre>\n\n<p>I'm compiling with Qt 5.9. Any ideas why this is happening? AFAICT the lambda I'm using is fine. This is my MWE:</p>\n\n<p>foo.cpp:</p>\n\n<pre><code>#include &lt;QObject&gt;\n#include &lt;QFileSystemWatcher&gt;\n\nint main()\n{\n    QFileSystemWatcher watcher();\n    QObject::connect(watcher, &amp;QFileSystemWatcher::directoryChanged,\n                     [] (const QString&amp;) { return 0; });\n}\n</code></pre>\n\n<p>foo.pro:</p>\n\n<pre><code>######################################################################\n# Automatically generated by qmake (3.1) Thu Dec 28 11:11:15 2017\n######################################################################\n\nTEMPLATE = app\nTARGET = foo\nINCLUDEPATH += .\nCONFIG += c++14\nDEFINES += QT_DEPRECATED_WARNINGS\n\n# Input\nSOURCES += foo.cpp\n</code></pre>\n"}, {"tags": ["c#", "c++", "distribute", "redistributable"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1514415943, "post_id": 47999567, "comment_id": 82967779, "body": "You are need to run the appropriate MS redist package to install the needed runtimes see: <a href=\"https://msdn.microsoft.com/en-us/library/ms235299.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ms235299.aspx</a>"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1514417280, "post_id": 47999567, "comment_id": 82968139, "body": "Deploy the correct DLLs.  If your program needs msvcr110.dll then the VS2017 runtime DLLs are as useful as a boomerang that doesn&#39;t come back.  Just copy them along with the rest of your executable files, stored in the same directory."}], "owner": {"reputation": 1, "user_id": 7746722, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155125372619469/picture?type=large", "display_name": "KaBor", "link": "https://stackoverflow.com/users/7746722/kabor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 399, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514415306, "creation_date": 1514415306, "question_id": 47999567, "link": "https://stackoverflow.com/questions/47999567/c-2017-redistributable-package-how-to-distribute", "title": "c++ 2017 Redistributable package - how to distribute", "body": "<p>I have problem with MS Visual Studio (VS) upgrading, the application need c++ redistribute package for program in c# with c++ libraries. </p>\n\n<p>Actual we use VS 2012, where I need 2 files (msvcp110.dll and msvcr110.dll) from its VS Redistributable package, but if I try to copy files from VS 2017 c++ package, the application starting process end by exception on the other PCs. </p>\n\n<p>Is it possible to move the application to other PCs (without VS) without installing c++ 2017 Redistributable package? It means only copy some files or some other actions without install process on the other PCs.</p>\n\n<p>I would like to avoid to run install process on the others PCs, because standard users in our organisations can not run install process.</p>\n\n<p>Examples:\nc#:</p>\n\n<pre><code>[DllImport(dllPath + \"main.dll\", CharSet = CharSet.Ansi, CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]\n        private static extern IntPtr Get_Default();\n</code></pre>\n\n<p>c++:</p>\n\n<pre><code>#define NAG_CALL extern \"C\" __declspec(dllexport) \nNAG_CALL const char *Get_Default(void)\n{\n  static char *value = NULL;\n\n  if (value)\n    free(value);\n\n  return value = get_Default(); \n}\n</code></pre>\n\n<p>Thanks\nKarel</p>\n"}, {"tags": ["c++", "json", "templates", "inheritance"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1514436640, "post_id": 47999508, "comment_id": 82971907, "body": "<i>&quot;I can&#39;t force a specific constructor signature on a derived class&quot;</i> Why not? What&#39;s stopping you? <i>&quot;I can&#39;t have static pure virtual methods&quot;</i> It doesn&#39;t need to be virtual, just a plain static member function would do."}, {"owner": {"reputation": 1017, "user_id": 2599537, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf6e2a137be7b8bd13d1f8efec703554?s=128&d=identicon&r=PG", "display_name": "devil0150", "link": "https://stackoverflow.com/users/2599537/devil0150"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1514462909, "post_id": 47999508, "comment_id": 82982632, "body": "I looked but I couldn&#39;t find a way to force a specific constructor signature on all derived classes of a base class. If I create a normal static member function that doesn&#39;t exist in the base class, the compiler wouldn&#39;t know to call it from a template argument. (since it only knows the methods from the base class)"}], "owner": {"reputation": 1017, "user_id": 2599537, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf6e2a137be7b8bd13d1f8efec703554?s=128&d=identicon&r=PG", "display_name": "devil0150", "link": "https://stackoverflow.com/users/2599537/devil0150"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514414808, "creation_date": 1514414808, "question_id": 47999508, "link": "https://stackoverflow.com/questions/47999508/serverobject-class-allow-all-derived-classes-to-be-constructed-from-json-messa", "title": "ServerObject class - Allow all derived classes to be constructed from JSON messages", "body": "<p>I have a <code>ServerCall</code> class that sends a request to the server and receives a JSON response. I want the response to be used to build an object whose type is defined by a template argument.</p>\n\n<pre><code>template&lt;typename RetType&gt;\nclass ServerCall\n{\n    const char *relative_uri;\npublic:\n    ServerCall(const char *relative_uri);\n    RetType doCall();\n};\n</code></pre>\n\n<p>The building logic should be implemented in each derived class. I thought of adding a <code>static_assert</code> stating that the template argument must be a derived class of a <code>ServerObject</code> class, and trying to force derived classes of <code>ServerObject</code> to allow construction based on a JSON message, but I can't figure out a way to do that.</p>\n\n<ul>\n<li>I can't force a specific constructor signature on a derived class, so the compiler can't be sure that the template arguments will have a <code>RetType(const char *jsonMessage)</code> constructor.</li>\n<li>I can't have static pure virtual methods, so derived classes can't be forced to implement a <code>static ServerObject *buildFromJson(const char *jsonMessage)</code> method and have the compiler choose which method to call based on the template type.</li>\n<li>Another idea I had was to use something I do in Java. Declare a <code>private final</code> data member in the base class, that is only initialized in the base class constructor, so derived classes are forced to call the base constructor to initialize the data member. And then the base constructor would call abstract methods implemented in the derived class.<br>\nBut I don't think that works in C++. Even if I could force derived class constructors to call the base class constructor (<a href=\"https://stackoverflow.com/questions/12783643/force-a-derived-class-to-use-the-constructor-of-the-base-class\">which doesn't seem possible</a>), base class constructors can't call pure virtual methods.</li>\n</ul>\n\n<p>I have no other ideas. Is there a good way of constructing an object of a template type from a JSON string in C++?</p>\n"}, {"tags": ["c++", "qt", "multiple-definition-error"], "comments": [{"owner": {"reputation": 3209, "user_id": 5794048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Egkox.jpg?s=128&g=1", "display_name": "Murphy", "link": "https://stackoverflow.com/users/5794048/murphy"}, "edited": false, "score": 0, "creation_date": 1514626979, "post_id": 47999249, "comment_id": 83035611, "body": "<a href=\"http://idownvotedbecau.se/imageofanexception/\" rel=\"nofollow noreferrer\">idownvotedbecau.se/imageofanexception</a>, and no pointer from you which line causes the error. Also <a href=\"http://idownvotedbecau.se/nomcve/\" rel=\"nofollow noreferrer\">idownvotedbecau.se/nomcve</a>"}], "answers": [{"tags": [], "owner": {"reputation": 396, "user_id": 3203817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f81efff47d429c32515d29ee4f11a02?s=128&d=identicon&r=PG", "display_name": "Immac", "link": "https://stackoverflow.com/users/3203817/immac"}, "is_accepted": false, "score": 1, "last_activity_date": 1514413572, "creation_date": 1514413572, "answer_id": 47999354, "question_id": 47999249, "link": "https://stackoverflow.com/questions/47999249/error-using-qt-creatormultiple-definition-first-defined-here/47999354#47999354", "title": "Error using Qt Creator:&quot;multiple definition&quot; &quot;first defined here&quot;", "body": "<p>You have defined a variable named \"estructura\" in several files, the error tells you that it was first defined in Struct.h being called #included in Logica.cpp,</p>\n\n<pre><code>struct Circulo estructura[30];\n</code></pre>\n\n<p>you have another definition the the file Defecto.h or a file included by Defecto.h</p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 9146946, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Tt6ZviyMMXI/AAAAAAAAAAI/AAAAAAAAEPE/NYDflkaxsHc/photo.jpg?sz=128", "display_name": "cristian sori", "link": "https://stackoverflow.com/users/9146946/cristian-sori"}, "edited": false, "score": 0, "creation_date": 1514416742, "post_id": 47999454, "comment_id": 82968001, "body": "Do you mean,put the estructura declaration in a .cpp file,and declare this declaration as extern??Thanks in advance"}, {"owner": {"reputation": 27, "user_id": 9146946, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Tt6ZviyMMXI/AAAAAAAAAAI/AAAAAAAAEPE/NYDflkaxsHc/photo.jpg?sz=128", "display_name": "cristian sori", "link": "https://stackoverflow.com/users/9146946/cristian-sori"}, "edited": false, "score": 0, "creation_date": 1514417132, "post_id": 47999454, "comment_id": 82968102, "body": "Already did that,so,now,do i have to declare estructura in all .cpp files?Thanks in advance"}, {"owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "reply_to_user": {"reputation": 27, "user_id": 9146946, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Tt6ZviyMMXI/AAAAAAAAAAI/AAAAAAAAEPE/NYDflkaxsHc/photo.jpg?sz=128", "display_name": "cristian sori", "link": "https://stackoverflow.com/users/9146946/cristian-sori"}, "edited": false, "score": 0, "creation_date": 1514449338, "post_id": 47999454, "comment_id": 82976060, "body": "I edited the answer to better explain what you have to do. Please read the answer in the link I provided to understand <b>why</b> you have to do so."}], "tags": [], "owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "is_accepted": false, "score": 1, "last_activity_date": 1514449116, "last_edit_date": 1514449116, "creation_date": 1514414350, "answer_id": 47999454, "question_id": 47999249, "link": "https://stackoverflow.com/questions/47999249/error-using-qt-creatormultiple-definition-first-defined-here/47999454#47999454", "title": "Error using Qt Creator:&quot;multiple definition&quot; &quot;first defined here&quot;", "body": "<p>Move the definition of <code>estructura</code> in a cpp file of your choice, then declare it as <code>extern</code> wherever you need it. And you can omit the <code>struct</code> keyword, in c++.</p>\n\n<p>In a struct.cpp file:</p>\n\n<pre><code>#include \"Struct.h\"\n\nCirculo estructura[30];\n</code></pre>\n\n<p>In your Logica.cpp and Interfaz.cpp files:</p>\n\n<pre><code>#include \"Struct.h\"\n\nextern Circulo estructura[30];\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/34614523/multiple-definition-error-c\">Here</a> is a long and detailed explanation of your issue.</p>\n"}], "owner": {"reputation": 27, "user_id": 9146946, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Tt6ZviyMMXI/AAAAAAAAAAI/AAAAAAAAEPE/NYDflkaxsHc/photo.jpg?sz=128", "display_name": "cristian sori", "link": "https://stackoverflow.com/users/9146946/cristian-sori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1250, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1537280601, "creation_date": 1514412807, "last_edit_date": 1537280601, "question_id": 47999249, "link": "https://stackoverflow.com/questions/47999249/error-using-qt-creatormultiple-definition-first-defined-here", "title": "Error using Qt Creator:&quot;multiple definition&quot; &quot;first defined here&quot;", "body": "<p>I have a problem. In my Qt project I'm having an error. Tt says:</p>\n\n<blockquote>\n  <p>multiple definition of estructura</p>\n</blockquote>\n\n<p>I think it is because I'm using too many \"#includes\", but I don't know how to fix it.</p>\n\n<p>This is my program:</p>\n\n<p><em>Struct.h</em></p>\n\n<pre><code> #ifndef STRUCT_H\n    #define STRUCT_H\n\n    #include &lt;stdio.h&gt;\n    #include &lt;string&gt;\n\n    struct Circulo{\n        std::string nombre;\n        int capacidad;\n        int statusMujer[4];\n        int hijos[4];\n    };\n\n    struct Circulo estructura[30];\n\n    #endif // STRUCT_H\n</code></pre>\n\n<p><em>Logica.h</em></p>\n\n<pre><code> #ifndef LOGICA_H\n #define LOGICA_H\n#include &lt;iostream&gt;\nvoid madresStatusCodificados(std::string , int , int[]);\nvoid ListadoDeCirculos(int, int , std::string []);\nstd::string CirculoMayorCapacidad(int );\nint NinnosEnCirculosconStatus(int , int );\nvoid Listado(int);\n#endif // LOGICA_H\n</code></pre>\n\n<p><em>interfaz.cpp</em></p>\n\n<pre><code>#include &lt;Interfaz/Interfaz.h&gt;\n#include &lt;Logica/Defecto.h&gt;\n#include &lt;Interfaz/Menu.h&gt;\n#include &lt;Logica/Struct.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n void Principal(){\n                  cin&gt;&gt;estructura[i].statusMujer[3];\n                  cout&lt;&lt;\"Escriba la cantidad de hijos con madres desconocidas\"&lt;&lt;endl;\n                  cin&gt;&gt;estructura[i].hijos[3];\n                  i++;\n              }else{\n                  break;\n              }\n }\n}\n</code></pre>\n\n<p><em>Logica.cpp</em></p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n//#include &lt;Logica/Logica.h&gt;\n#include &lt;Logica/Struct.h&gt;\n\nvoid madresStatusCodificados(string t,  int h , int k[]){\nfor(int i=0;i&lt;h;i++){\n    if(estructura[i].nombre==t){\n       k[0]=estructura[i].statusMujer[0];\n       k[1]=estructura[i].statusMujer[1];\n       k[2]=estructura[i].statusMujer[2];\n       k[3]=estructura[i].statusMujer[3];\n    }\n   }\n}\n\nvoid ListadoDeCirculos(int g,int u,string h[]){\n\n    for(int i=0;i&lt;u;i++){\n        if(estructura[i].statusMujer[g-1]!=0)\n        h[i]=estructura[i].nombre;\n    }\n    }\n\n\nstring CirculoMayorCapacidad(int k){\n    int n=-1;\n    string l;\n    for(int i=0;i&lt;k;i++){\n        if(estructura[i].capacidad&gt;n){\n            n=estructura[i].capacidad;\n            l=estructura[i].nombre;\n        }\n    }\n    return l;\n\n}\n\nint NinnosEnCirculosconStatus(int a,int b){\n    int h=0;\nfor(int i=0;i&lt;b;i++){\n\n    h=h+estructura[i].hijos[a-1];\n}\n\nreturn h;\n}\n\n\nvoid Listado(int y){\n    for(int i=0;i&lt;y;i++){\n        cout&lt;&lt;\"NOMBRE DEL CIRCULO    CAPACIDAD  Madres solteras Madres trabajadoras Madres caso social Madres desconocidas  \"&lt;&lt;endl;\n       cout&lt;&lt;estructura[i].nombre&lt;&lt;\"\"&lt;&lt;estructura[i].capacidad&lt;&lt;estructura[i].statusMujer[0]&lt;&lt;estructura[i].statusMujer[1]&lt;&lt;estructura[i].statusMujer[2]&lt;&lt;estructura[i].statusMujer[3]&lt;&lt;endl;\n    }\n}\n</code></pre>\n\n<p>I am getting this error:\n<a href=\"https://i.stack.imgur.com/a8HZT.png\" rel=\"nofollow noreferrer\">Errors</a></p>\n"}, {"tags": ["c++", "linux", "filesystems", "ncurses"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1514410959, "post_id": 47998956, "comment_id": 82966402, "body": "Easiest way to do this is to always use full (not relative) paths.  Then it just becomes an exercise in string manipulation."}, {"owner": {"reputation": 37, "user_id": 9133302, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uP1wNJ8rXEQ/AAAAAAAAAAI/AAAAAAAAAFY/GbN8EMoxaTg/photo.jpg?sz=128", "display_name": "Rodrigo Ord&#243;&#241;ez", "link": "https://stackoverflow.com/users/9133302/rodrigo-ord%c3%b3%c3%b1ez"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1514411395, "post_id": 47998956, "comment_id": 82966555, "body": "@Ron How to make that my program starts at &quot;path&quot; so that when I call getcwd() it returns &quot;path&quot; and not the actual path of the program."}, {"owner": {"reputation": 37, "user_id": 9133302, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uP1wNJ8rXEQ/AAAAAAAAAAI/AAAAAAAAAFY/GbN8EMoxaTg/photo.jpg?sz=128", "display_name": "Rodrigo Ord&#243;&#241;ez", "link": "https://stackoverflow.com/users/9133302/rodrigo-ord%c3%b3%c3%b1ez"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1514411938, "post_id": 47998956, "comment_id": 82966722, "body": "@Ron thanks for the help, sorry if I wasn&#39;t very clear"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 9133302, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uP1wNJ8rXEQ/AAAAAAAAAAI/AAAAAAAAAFY/GbN8EMoxaTg/photo.jpg?sz=128", "display_name": "Rodrigo Ord&#243;&#241;ez", "link": "https://stackoverflow.com/users/9133302/rodrigo-ord%c3%b3%c3%b1ez"}, "edited": false, "score": 0, "creation_date": 1514411710, "post_id": 47999058, "comment_id": 82966653, "body": "So apparently I was overthinking it... If I use chdir(&quot;/home&quot;) at the beginning of main would it remain as /home until another chdir() function was called? Would I get &quot;/home&quot; if I call the getcwd() function?"}, {"owner": {"reputation": 24, "user_id": 4509162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9304238e1b29bba0b4373ccb8ba6d495?s=128&d=identicon&r=PG&f=1", "display_name": "awahl", "link": "https://stackoverflow.com/users/4509162/awahl"}, "reply_to_user": {"reputation": 37, "user_id": 9133302, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uP1wNJ8rXEQ/AAAAAAAAAAI/AAAAAAAAAFY/GbN8EMoxaTg/photo.jpg?sz=128", "display_name": "Rodrigo Ord&#243;&#241;ez", "link": "https://stackoverflow.com/users/9133302/rodrigo-ord%c3%b3%c3%b1ez"}, "edited": false, "score": 0, "creation_date": 1514442551, "post_id": 47999058, "comment_id": 82973558, "body": "If you stay within your application. When your app exits it will return to the original wd"}], "tags": [], "owner": {"reputation": 24, "user_id": 4509162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9304238e1b29bba0b4373ccb8ba6d495?s=128&d=identicon&r=PG&f=1", "display_name": "awahl", "link": "https://stackoverflow.com/users/4509162/awahl"}, "is_accepted": true, "score": 0, "last_activity_date": 1514411408, "creation_date": 1514411408, "answer_id": 47999058, "question_id": 47998956, "link": "https://stackoverflow.com/questions/47998956/how-to-navigate-through-directories-using-c-to-create-a-file-explorer/47999058#47999058", "title": "How to navigate through directories using c++ to create a file explorer", "body": "<p>To change your current working directory use chdir\nIf you want to change your cwd to \"/home\"\nchdir(\"/home\");</p>\n"}, {"tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1514412923, "creation_date": 1514412923, "answer_id": 47999269, "question_id": 47998956, "link": "https://stackoverflow.com/questions/47998956/how-to-navigate-through-directories-using-c-to-create-a-file-explorer/47999269#47999269", "title": "How to navigate through directories using c++ to create a file explorer", "body": "<p>The chdir only persists within the program that did it (or subprocesses).  It won't cause the shell to change.  There's an application (<a href=\"https://waterlan.home.xs4all.nl/\" rel=\"nofollow noreferrer\">wcd</a>) which does something like what you're trying, which combines the navigation with a shell script.</p>\n"}], "owner": {"reputation": 37, "user_id": 9133302, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uP1wNJ8rXEQ/AAAAAAAAAAI/AAAAAAAAAFY/GbN8EMoxaTg/photo.jpg?sz=128", "display_name": "Rodrigo Ord&#243;&#241;ez", "link": "https://stackoverflow.com/users/9133302/rodrigo-ord%c3%b3%c3%b1ez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1743, "favorite_count": 0, "accepted_answer_id": 47999058, "answer_count": 2, "score": 2, "last_activity_date": 1514412923, "creation_date": 1514410741, "last_edit_date": 1514411879, "question_id": 47998956, "link": "https://stackoverflow.com/questions/47998956/how-to-navigate-through-directories-using-c-to-create-a-file-explorer", "title": "How to navigate through directories using c++ to create a file explorer", "body": "<p>I'm trying to create a file explorer in C++ using Ncurses for my class. Currently I'm trying to find a way to navigate through the file system and find out if 'x' is file/directory and act accordingly.</p>\n\n<p>The problem is I can't find a way to navigate through directories they way I'd like. For example, in the code below I start at \".\" and then read it while saving some info of said directory and its files. But I'd like to define the cwd to \"/home\" everytime  the program runs and then go from there exploring whatever the user wants like:</p>\n\n<blockquote>\n  <p>display /home -> user selects /folder1 -> display /folder1 -> user selects /documents -> ...</p>\n</blockquote>\n\n<p>I've read about scripts and tried to create a \"cd /home\" script but it doesn't work. Somewhere I read that the execve() function might work, but I don't understand it. I've got a feeling that I'm overthinking this, and frankly I'm stuck. </p>\n\n<p>edit: In essence I'd like to find: How to make it so that my program starts at \"path\" so that when I call getcwd() it returns \"path\" and not the actual path of the program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;dirent.h&gt;\n#include &lt;string.h&gt;\n#include &lt;linux/limits.h&gt;\n#include &lt;iostream&gt;\n#include \"contenido.cpp\"\nusing namespace std;\n\n//Inicia main\n\nint main(int argc, char const *argv[]) {\n  DIR *dir;                       //dir is directory to open\n  struct dirent *sd;\n  struct stat buf;                //buf will give us stat() atributes from 'x' file.\n  char currentpath[FILENAME_MAX]; //currentpath\n  contenido dcont;\n\n  //system (\". /home/rodrigo/Documentos/Atom/Ncurses/Proyecto/beta/prueba.sh\");\n\n  if((dir = opendir(\".\")) == NULL){ /*Opens directory*/\n    return errno;\n  }\n  if(getcwd(currentpath, FILENAME_MAX) == NULL){\n    return errno;\n  }\n\n  while ((sd= readdir(dir)) != NULL){ /*starts directory stream*/\n    if(strcmp(sd -&gt; d_name,\".\")==0 || strcmp(sd -&gt; d_name,\"..\") ==0){\n        continue;\n    }\n\n    //Gets cwd, then adds /filename to it and sends it to a linked list 'dcont'. Resets currentpath to cwd\n    //afterwards.\n    getcwd(currentpath, FILENAME_MAX);\n    strcat(currentpath, \"/\");\n    strcat(currentpath, sd-&gt;d_name);\n    string prueba(currentpath);\n    //std::cout &lt;&lt; currentpath &lt;&lt; '\\n';\n    dcont.crearnodo(prueba);\n    if(stat(currentpath, &amp;buf) == -1){\n      cout &lt;&lt; currentpath &lt;&lt; \"\\n\";\n      perror(\"hey\");\n      return errno;\n    }\n    getcwd(currentpath, FILENAME_MAX);\n\n    //Prints Files and Directories. If Directory prints \"it's directory\", else prints \"file info\".\n    if (S_ISDIR(buf.st_mode)) {\n      cout &lt;&lt; sd-&gt;d_name &lt;&lt; \"\\n\";\n      cout &lt;&lt; \"ES DIRECTORIO\\n\";\n    }else\n    cout &lt;&lt; sd-&gt;d_name &lt;&lt; \"\\n\";\n    cout &lt;&lt;\"Su tama\u00f1o es: \" &lt;&lt; (int)buf.st_size &lt;&lt; \"\\n\";\n    //system(\"ls\");\n\n  }\n\n\n  closedir(dir);\n  dcont.mostrardircont(); //prints contents of the linked list (position in list and path of file).\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "shellexecute"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1514410624, "post_id": 47998913, "comment_id": 82966273, "body": "Use <code>ShellExecuteA</code>.  <code>ShellExecute</code> is a macro that expands to <code>ShellExecuteA</code> or <code>ShellExecuteW</code> if you are building for Unicode.  You must be building with Unicode set.  See (at the bottom): <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1514410647, "post_id": 47998913, "comment_id": 82966284, "body": "Use wstring, wcout, wcin.  Or use ShellExecuteA().  <a href=\"https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/\" rel=\"nofollow noreferrer\">joelonsoftware.com/2003/10/08/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 8711913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df560a1c4540f41a0c384f7cca2669d9?s=128&d=identicon&r=PG&f=1", "display_name": "Shotgun", "link": "https://stackoverflow.com/users/8711913/shotgun"}, "edited": false, "score": 0, "creation_date": 1514426195, "post_id": 47998968, "comment_id": 82969922, "body": "okay thank you but what do i do to fix this? Severity\tCode\tDescription\tProject\tFile\tLine\tSuppression State Error\tC3867\t&#39;std::basic_string&lt;char,std::char_traits&lt;char&gt;,s&zwnj;&#8203;td::allocator&lt;char&gt;&gt;&zwnj;&#8203;::c_str"}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 1, "last_activity_date": 1514410811, "creation_date": 1514410811, "answer_id": 47998968, "question_id": 47998913, "link": "https://stackoverflow.com/questions/47998913/cannot-convert-argument-2-from-const-char-5-to-lpcwstr/47998968#47998968", "title": "cannot convert argument 2 from &#39;const char [5]&#39; to &#39;LPCWSTR&#39;", "body": "<p>Call ShellExecuteA instead of ShellExecute, the windows API has a huge number of macros that decide between ANSI and Unicode versions </p>\n"}], "owner": {"reputation": 29, "user_id": 8711913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df560a1c4540f41a0c384f7cca2669d9?s=128&d=identicon&r=PG&f=1", "display_name": "Shotgun", "link": "https://stackoverflow.com/users/8711913/shotgun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "closed_date": 1514415574, "answer_count": 1, "score": 0, "last_activity_date": 1514413666, "creation_date": 1514410444, "question_id": 47998913, "link": "https://stackoverflow.com/questions/47998913/cannot-convert-argument-2-from-const-char-5-to-lpcwstr", "closed_reason": "Duplicate", "title": "cannot convert argument 2 from &#39;const char [5]&#39; to &#39;LPCWSTR&#39;", "body": "<pre><code>int main() {\n\n    string url;\n    int a;\n    int b = 0;\n    cout &lt;&lt; \"Enter url: \";\n    cin &gt;&gt; url;\n    cout &lt;&lt; \"how many times do you want to open the url?: \";\n    cin &gt;&gt; a;\n    while (b&lt;a)\n    {\n        ShellExecute(NULL, \"open\", url.c_str, NULL, NULL, SW_SHOWNORMAL); \n        b++\n        }\n        cin &gt;&gt; a;\n        }\n</code></pre>\n\n<p>//the part that is giving me trouble \nis the \"open part says it cannot convert //itShellExecuteW(HWND,LPCWSTR,LPCWSTR,LPCWSTR,LPCWSTR,INT)': cannot convert //argument 2 from 'const char [5]' to 'LPCWSTR'   </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 3, "creation_date": 1514409816, "post_id": 47998765, "comment_id": 82965985, "body": "You&#39;re right, it&#39;s pointless."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1514411065, "post_id": 47998765, "comment_id": 82966440, "body": "@Barmar Oops, I misread the parens, I feel dumb. I&#39;ll delete that comment. Sorry/thanks!"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1514412328, "post_id": 47998765, "comment_id": 82966824, "body": "The parentheses around the return value are also pointless. The argument for these in the old days was that putting them in is symmetrical with <code>if</code>. The trouble with that, and the counter-argument, is that a <code>return</code> isn&#39;t an <code>if</code>."}], "answers": [{"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 3, "last_activity_date": 1514410144, "last_edit_date": 1514410144, "creation_date": 1514409948, "answer_id": 47998830, "question_id": 47998765, "link": "https://stackoverflow.com/questions/47998765/whats-behind-the-scenes-of-the-return-for-a-method/47998830#47998830", "title": "what&#39;s behind the scenes of the return for a method?", "body": "<p>If <code>origine</code> is a <code>TPoint</code> there is no difference. </p>\n\n<p>If <code>origine</code> is not a <code>TPoint</code> then it will invoke either an operator <code>TPoint</code> of whatever <code>origine</code> is or <code>TPoint::TPoint(&lt;whatever origne is&gt;)</code></p>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1514410317, "post_id": 47998847, "comment_id": 82966172, "body": "Some programmers like to be explicit instead of relying on implicit conversions."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1514410612, "post_id": 47998847, "comment_id": 82966267, "body": "@Barmar I tried to address this. If implicit conversions aren&#39;t wanted that should be expressed in the declaration."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1514410636, "post_id": 47998847, "comment_id": 82966280, "body": "@Barmar It isn&#39;t a conversion, it is a copy construction, and the compiler has to create one anyway, so this makes two, which is pointless."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1514410817, "post_id": 47998847, "comment_id": 82966345, "body": "I&#39;m not saying they don&#39;t want the conversion, they just want to express it explicitly in the code for clarity."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1514410882, "post_id": 47998847, "comment_id": 82966365, "body": "@Barmar And my point is to express that at the declaration of that interface as much as possible."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1514410938, "post_id": 47998847, "comment_id": 82966394, "body": "@Barmar And the compiler still has to do another one, so there are now two copy constructions. It is pointless. It also <i>lacks</i> clarity, as does any redundant syntax."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1514410989, "post_id": 47998847, "comment_id": 82966413, "body": "@EJP I thought it would elide the redundant one. If not, then it definitely is inappropriate."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1514411076, "post_id": 47998847, "comment_id": 82966446, "body": "@Barmar It might. It is pointless to write extra code, and it is pointless to rely on compiler optimisations that might not occur, and it is pointless to spell out what the compiler already has to do. And it still isn&#39;t a conversion."}], "tags": [], "owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "is_accepted": true, "score": 6, "last_activity_date": 1514413286, "last_edit_date": 1514413286, "creation_date": 1514410035, "answer_id": 47998847, "question_id": 47998765, "link": "https://stackoverflow.com/questions/47998765/whats-behind-the-scenes-of-the-return-for-a-method/47998847#47998847", "title": "what&#39;s behind the scenes of the return for a method?", "body": "<p>The cast in your teachers code is totally pointless</p>\n\n<blockquote>\n<pre><code>TPoint TObjetGraphique::getOrigine() const\n    {return (TPoint(origine));}\n          // ^^^^^^^       ^ You can just omit this as proposed\n</code></pre>\n</blockquote>\n\n<p>assumed that <code>origine</code> is of type <code>TPoint</code> as stated.</p>\n\n<hr>\n\n<p>If <code>origine</code>'s type can be converted to <code>TPoint</code> in any way the explicit cast is pointless either.</p>\n\n<p>If there's a reason for that syntax then that <code>TPoint</code> has constructor declarations like</p>\n\n<pre><code>struct SomethingElse {\n    int a_;\n    int b_;\n\n    explicit SomethingElse(int a, int b) : a_(a), b_(b) {}\n    SomethingElse() = default;\n};\n\nclass TPoint {\npublic:\n    explicit TPoint(SomethingElse rhs)  : x_(rhs.a_), y_(rhs.b_) {\n        std::cout &lt;&lt; \"TPoint::TPoint(const SomethingElse&amp; rhs)\" &lt;&lt; std::endl;\n    }\nprivate:\n    int x_;\n    int y_;\n};\n\nint main() {\n    SomethingElse something;\n    // TPoint pt1({2,3}); // &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; Fails\n    TPoint pt2(something);\n}\n</code></pre>\n\n<p>which looks quite unusual but finally works to prevent <code>TPoint</code> being instantiated from <code>SomethingElse</code> inadvertently (see the <a href=\"http://coliru.stacked-crooked.com/a/57df4eb495405db3\" rel=\"nofollow noreferrer\">Live Demo</a>). </p>\n"}], "owner": {"reputation": 516, "user_id": 7729614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHoMW.jpg?s=128&g=1", "display_name": "Soufiane Roui", "link": "https://stackoverflow.com/users/7729614/soufiane-roui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 47998847, "answer_count": 2, "score": 3, "last_activity_date": 1514413286, "creation_date": 1514409591, "last_edit_date": 1514409848, "question_id": 47998765, "link": "https://stackoverflow.com/questions/47998765/whats-behind-the-scenes-of-the-return-for-a-method", "title": "what&#39;s behind the scenes of the return for a method?", "body": "<p>I am studying c++ and my teacher write this code:</p>\n\n<blockquote>\n  <ul>\n  <li><code>Tpoint</code> and <code>TObjetGraphique</code> are two separated classes</li>\n  <li><p><code>origine</code> is an object of type <code>Tpoint</code> declared <code>private</code> within <code>TObjetGraphique</code>  </p>\n\n<pre><code> TPoint TObjetGraphique::getOrigine() const\n    {return (TPoint(origine));}\n</code></pre></li>\n  </ul>\n</blockquote>\n\n<p>I am wondering why we wouldn't just write:</p>\n\n<pre><code>TPoint TObjetGraphique::getOrigine() const\n   {return origine;}\n</code></pre>\n\n<p>Is there any difference ?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1514409811, "post_id": 47998760, "comment_id": 82965982, "body": "Explain what <b><i>it glitches out and I just end back up at square one!</i></b> means."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1514409899, "post_id": 47998760, "comment_id": 82966015, "body": "Why are you creating a new MainWindow from the dialog. That is certainly not what you want."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1514409956, "post_id": 47998760, "comment_id": 82966033, "body": "<code>MainWindow.show();</code> should be <code>MainWindow.hide();</code>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1514410002, "post_id": 47998760, "comment_id": 82966051, "body": "on_pushButton_clicked() should show your MainWindow. Something like qobject_cast&lt;QWidget*&gt;(parent())-&gt;show();"}, {"owner": {"reputation": 11, "user_id": 9142792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21171f510bcf389dee75168d07eec49b?s=128&d=identicon&r=PG&f=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/9142792/riley"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1514410086, "post_id": 47998760, "comment_id": 82966084, "body": "When I go from opening child to parent, then parent back to child, and if I try to get back to the parent again, it opens the parent dialog, then just creates a new child dialog on top of it and I can&#39;t access MainWindow again. And it saves every single window. As in, every time I click a button it makes an entirely new window"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1514410164, "post_id": 47998760, "comment_id": 82966113, "body": "<b><i>As in, every time I click a button it makes an entirely new window</i></b> That is why you just want to show the original window and not create new ones on clicking."}, {"owner": {"reputation": 11, "user_id": 9142792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21171f510bcf389dee75168d07eec49b?s=128&d=identicon&r=PG&f=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/9142792/riley"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1514412379, "post_id": 47998760, "comment_id": 82966833, "body": "Ok what should I change in that line? And I&#39;m not entirely sure where qobject_cast&lt;QWidget*&gt;(parent())-&gt;show(); should go"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1514417779, "post_id": 47998760, "comment_id": 82968241, "body": "<code>qobject_cast&lt;QWidget*&gt;(parent())-&gt;show();</code> should be in your on_pushButton_clicked(). Remove all your current lines before adding that."}], "owner": {"reputation": 11, "user_id": 9142792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21171f510bcf389dee75168d07eec49b?s=128&d=identicon&r=PG&f=1", "display_name": "Riley", "link": "https://stackoverflow.com/users/9142792/riley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537280640, "creation_date": 1514409556, "last_edit_date": 1537280640, "question_id": 47998760, "link": "https://stackoverflow.com/questions/47998760/qt-desktop-app-will-not-close-old-dialogs-and-will-not-allow-more-than-2-windows", "title": "Qt desktop app will not close old dialogs and will not allow more than 2 windows to be open at a time", "body": "<p>I am trying to open up my app with a child window first. I got some code that almost works, but I cannot for the life of me figure out what is wrong with it that won't let it delete old dialog windows, and when I click back into the child dialog I opened with, it glitches out and I just end back up at square one! What should I do to stop this problem?</p>\n\n<p>main.cpp file</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n#include \"yes.h\"\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n\n\n    QWidget MainWindow;\n    MainWindow.show();\n    yes popup(&amp;MainWindow);\n    popup.show();\n\n\n\n    return a.exec();\n}\n</code></pre>\n\n<p>.cpp file</p>\n\n<pre><code>#include \"yes.h\"\n#include \"ui_yes.h\"\n#include \"mainwindow.h\"\n\nyes::yes(QWidget *parent) :\n    QDialog(parent),\n    ui(new Ui::yes)\n{\n    ui-&gt;setupUi(this);\n\n    ui-&gt;label-&gt;setVisible(false);\n}\n\nyes::~yes()\n{\n    delete ui;\n}\n\nvoid yes::on_pushButton_clicked()\n{\n\n    auto no = new MainWindow();\n    no-&gt;show();\n    no-&gt;setAttribute(Qt::WA_DeleteOnClose);\n    no-&gt;show();\n\n}\n</code></pre>\n\n\n"}, {"tags": ["c++", "macos", "opencv", "homebrew"], "comments": [{"owner": {"reputation": 2089, "user_id": 4766168, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xrRVf1o5oQk/AAAAAAAAAAI/AAAAAAAAAEk/Uu9PgLhfHwA/photo.jpg?sz=128", "display_name": "Dmitrii Z.", "link": "https://stackoverflow.com/users/4766168/dmitrii-z"}, "edited": false, "score": 1, "creation_date": 1514412070, "post_id": 47998660, "comment_id": 82966756, "body": "By the look at that issue (<a href=\"https://github.com/opencv/opencv/issues/7606\" rel=\"nofollow noreferrer\">github.com/opencv/opencv/issues/7606</a>) opencv staff don&#39;t support older versions of os x. So I&#39;d say your best chances are either updating os x or trying to build older opencv version from sources"}], "owner": {"reputation": 141, "user_id": 8338079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc3271c49d431993b61a5be982e2b130?s=128&d=identicon&r=PG", "display_name": "HerthaBSC", "link": "https://stackoverflow.com/users/8338079/herthabsc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1514453949, "creation_date": 1514408855, "last_edit_date": 1514453949, "question_id": 47998660, "link": "https://stackoverflow.com/questions/47998660/opencv-installation-via-homebrew-fails-on-mac-os-10-9", "title": "opencv installation via homebrew fails on mac os 10.9", "body": "<p>I tried to install openCV lib on mac OS 10.9 (Mavericks) via homebrew: </p>\n\n<pre><code>brew install --env=std opencv\n</code></pre>\n\n<p>Doing so I end up with the following errors:</p>\n\n<pre><code>==&gt; Installing opencv\n==&gt; Downloading https://github.com/opencv/opencv/archive/3.4.0.tar.gz\n==&gt; Downloading from https://codeload.github.com/opencv/opencv/tar.gz/3.4.0\n######################################################################## 100.0%\n==&gt; Downloading https://github.com/opencv/opencv_contrib/archive/3.4.0.tar.gz\n==&gt; Downloading from https://codeload.github.com/opencv/opencv_contrib/tar.gz/3.\n######################################################################## 100.0%\n==&gt; cmake .. -DCMAKE_C_FLAGS_RELEASE=-DNDEBUG\n-DCMAKE_CXX_FLAGS_RELEASE=-DNDEBUG\n==&gt; make\nLast 15 lines from /Users/Username/Library/Logs/Homebrew/opencv/02.make:\n                 ^\n/tmp/opencv-20171227-56491-w05uzt/opencv-3.4.0/modules/imgproc/src/fixedpoint.inl.hpp:81:22: note: candidate function\nCV_ALWAYS_INLINE operator double() const { return (double)val / (1LL &lt;&lt; fixedShift); }\n                 ^\n/tmp/opencv-20171227-56491-w05uzt/opencv-3.4.0/modules/imgproc/src/fixedpoint.inl.hpp:82:22: note: candidate function\nCV_ALWAYS_INLINE operator float() const { return (float)val / (1LL &lt;&lt; fixedShift); }\n                 ^\n/tmp/opencv-20171227-56491-w05uzt/opencv-3.4.0/modules/imgproc/src/resize.cpp:579:16: error: assigning to 'int' from incompatible type 'typename fixedpoint64::WT' (aka '&lt;anonymous&gt;::fixedpoint64')\n    dst[i] = res;\n           ^ ~~~\n19 errors generated.\nmake[2]: *** [modules/imgproc/CMakeFiles/opencv_imgproc.dir/src/resize.cpp.o] Error 1\nmake[2]: *** Waiting for unfinished jobs....\nmake[1]: *** [modules/imgproc/CMakeFiles/opencv_imgproc.dir/all] Error 2\nmake: *** [all] Error 2\n</code></pre>\n\n<p>Until now I didn't found a solution for this problem. Any ideas how to fix it?</p>\n\n<p>Update:</p>\n\n<p>Building and installing openCV version 2.4 worked (see <a href=\"https://stackoverflow.com/questions/19671827/opencv-installation-on-mac-os-x\">OpenCV installation on Mac OS X</a>).</p>\n"}, {"tags": ["c++", "list", "vector"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1514407851, "post_id": 47998460, "comment_id": 82965314, "body": "std::list doesn&#39;t support random access via things like operator[]. This should be covered in your C++ textbook, or any C++ reference. std::list and std::vector are not generally interchangeable."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1514408884, "post_id": 47998460, "comment_id": 82965653, "body": "In addition to @Neil&#39;s comment: If your textbook doesn&#39;t cover that clearly, you can always lookup <a href=\"http://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow noreferrer\">here</a>, to ensure yourself which operations are available with standard classes."}], "answers": [{"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1514407949, "creation_date": 1514407949, "answer_id": 47998518, "question_id": 47998460, "link": "https://stackoverflow.com/questions/47998460/difference-between-indexing-of-lists-and-vectors/47998518#47998518", "title": "difference between indexing of lists and vectors", "body": "<p>lists do not have the [] operator, they are not random access containers.  </p>\n\n<p>You could use auto iter=std::advance(pins_.begin(), ndx); to get an iterator to the ndx'th element of a list.</p>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1514409813, "creation_date": 1514409813, "answer_id": 47998810, "question_id": 47998460, "link": "https://stackoverflow.com/questions/47998460/difference-between-indexing-of-lists-and-vectors/47998810#47998810", "title": "difference between indexing of lists and vectors", "body": "<pre><code>pins_.begin -&gt;set_as_output();\n</code></pre>\n\n<p><code>begin</code> is a member function; you have to call it. And just as you've done with <code>(*iter)-&gt;set_as_input()</code> you need to dereference the iterator to get a pointer:</p>\n\n<pre><code>(*pins_.begin())-&gt;set_as_output();\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8909841, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5c6b7f419f00aa02f95bcf648c56cb2?s=128&d=identicon&r=PG&f=1", "display_name": "aarifboy", "link": "https://stackoverflow.com/users/8909841/aarifboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1514409813, "creation_date": 1514407651, "question_id": 47998460, "link": "https://stackoverflow.com/questions/47998460/difference-between-indexing-of-lists-and-vectors", "title": "difference between indexing of lists and vectors", "body": "<p>While attempting to replace code using lists which was implemented with vectors and was working fine with vectors, I see error c2227 list of ->set_as_output' must point to class/struct/union/generic type.\nI have provide both implementations below</p>\n\n<pre><code>class pin {\n    friend class gate;\n    pin(){}\n    ~pin() {}\npublic:\n   void set_as_input();\n   void set_as_output();\n\n}; // class pin\n\n\nclass gate {\n\nprotected:\n    std::list&lt;pin *&gt; pins_;\n    //std::vector&lt;pin *&gt; pins_;\n    gate();\n    ~gate();\n    virtual bool validate_structural_semantics();\npublic:\n\n}; // class gate\n\nclass and_gate : public gate\n{\n     bool validate_structural_semantics();\npublic:\n}; // class and_gate\n\nbool and_gate::validate_structural_semantics()\n{\n    if (pins_.size() &lt; 3) return false;\n    //pins_[0]-&gt;set_as_output();//using vectors and works fine\n    pins_.begin -&gt;set_as_output();//error is here with lists\n    //for (size_t i = 1; i &lt; pins_.size(); ++i)\n    for (std::list&lt;pin *&gt;::iterator iter = pins_.begin();\n        iter != pins_.end(); ++iter)\n        //pins_[i]-&gt;set_as_input();\n        (*iter)-&gt;set_as_input();\n    return true;\n}\n</code></pre>\n\n<p>I wanted to learn what is difference between lists and vectors in implementation and what is missing in my code as far as lists are concerned to solve the issue.\nHow to solve it?</p>\n"}, {"tags": ["c++", "visual-studio-2017"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 2, "creation_date": 1514413242, "post_id": 47998373, "comment_id": 82967063, "body": "What happens if you type just <code>{</code> and Enter?"}, {"owner": {"reputation": 1006, "user_id": 2369597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yU383.jpg?s=128&g=1", "display_name": "Wad", "link": "https://stackoverflow.com/users/2369597/wad"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1514480142, "post_id": 47998373, "comment_id": 82991116, "body": "RustyX, in that case there is no change; I still get the problematic behaviour.  Joe&#39;s answer below was the solution."}, {"owner": {"reputation": 1006, "user_id": 2369597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yU383.jpg?s=128&g=1", "display_name": "Wad", "link": "https://stackoverflow.com/users/2369597/wad"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1514480162, "post_id": 47998373, "comment_id": 82991134, "body": "Also, why the downvote?"}], "answers": [{"tags": [], "owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "is_accepted": true, "score": 3, "last_activity_date": 1514416320, "creation_date": 1514416320, "answer_id": 47999689, "question_id": 47998373, "link": "https://stackoverflow.com/questions/47998373/vs2017-indenting-on-braces-in-c/47999689#47999689", "title": "VS2017 indenting on braces in C++", "body": "<p>Tools >> Options >> Text Editor >> C++ >> Formatting >> General</p>\n\n<p>Be sure that \"Automatically format braces when they are automatically completed\" is checked.</p>\n\n<p>That should give you what you want</p>\n"}], "owner": {"reputation": 1006, "user_id": 2369597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yU383.jpg?s=128&g=1", "display_name": "Wad", "link": "https://stackoverflow.com/users/2369597/wad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 0, "accepted_answer_id": 47999689, "answer_count": 1, "score": 0, "last_activity_date": 1537360104, "creation_date": 1514407162, "last_edit_date": 1514407315, "question_id": 47998373, "link": "https://stackoverflow.com/questions/47998373/vs2017-indenting-on-braces-in-c", "title": "VS2017 indenting on braces in C++", "body": "<p>I have watched several <code>C++</code> tutorials on <code>Pluralsight</code> using <code>VS2017</code> and whenever the author types a pair of braces and presses enter, the cursor always appears indented and on the middle line, ready for typing to commence (see <code>image 2</code>).  In my <code>VS2017</code> however, the cursor always appears in front of the closing brace (see <code>image 1</code>), so I have to press enter to create a blank line between the braces, move the cursor up and then type a tab before I can start typing.</p>\n\n<p>I have searched the settings in <code>VS2017</code> under <code>text editor/C++</code> but cannot find how to change this behaviour.  It's annoying and I'm thinking there must be a way to change it.</p>\n\n<p>Does anyone know how please?</p>\n\n<p><a href=\"https://i.stack.imgur.com/LPNHB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LPNHB.png\" alt=\"Braces\"></a></p>\n"}, {"tags": ["c++", "qt", "qt5", "qtestlib"], "answers": [{"comments": [{"owner": {"reputation": 430, "user_id": 1226831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ULsoj.jpg?s=128&g=1", "display_name": "Chu", "link": "https://stackoverflow.com/users/1226831/chu"}, "edited": false, "score": 1, "creation_date": 1514741882, "post_id": 47999872, "comment_id": 83060101, "body": "Thank you so much! I am able to test now :) I suggest to change <code>el</code> on <code>QSignalSpy</code> to <code>ws</code> because it has the signal"}], "tags": [], "owner": {"reputation": 425, "user_id": 1954275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0039be3fd1afcbfed53540039592b08?s=128&d=identicon&r=PG", "display_name": "shrpq", "link": "https://stackoverflow.com/users/1954275/shrpq"}, "is_accepted": true, "score": 1, "last_activity_date": 1514748964, "last_edit_date": 1514748964, "creation_date": 1514418040, "answer_id": 47999872, "question_id": 47998347, "link": "https://stackoverflow.com/questions/47998347/test-method-with-signals-and-slots/47999872#47999872", "title": "Test method with Signals and Slots", "body": "<p>That's exactly the purpose of <code>QSignalSpy</code>, it basically spins new <code>QEventLoop</code> that waits for signal to be executed. Your tests starts and asynchronous operation but it doesn't wait for it to finish so it will destruct objects while the operation is ongoing.</p>\n\n<p>Qt test also has some built-in timeouts that prevents tests to be stuck which are stopped when <code>QSignalSpy</code> is used. In your case you need to emit new signal from your class <code>Webservice</code> indicating that download is finished, e.g. (you can also pass arguments to the signal) if needed:</p>\n\n<pre><code>class Webservice : public QObject {\n     Q_OBJECT\n     // Constructors etc.\n     signals:\n     void finished();\n}\n</code></pre>\n\n<p>Then at the end of your <code>void Webservice::downloadCompleted(QNetworkReply *reply)</code>:</p>\n\n<pre><code>emit finished();\n</code></pre>\n\n<p>and in your test something like this:</p>\n\n<pre><code>PostElement el{\"file\", \"myPic.png\"};\n// Prepare spy\nQSignalSpy spy(&amp;ws, SIGNAL(finished));\nws.getFile(el);\n// Wait for result - by default this waits 5 seconds\nspy.wait();\n// Check if we had a timeout or actually signal was raised\nQCOMPARE(spy.count(), 1);\n</code></pre>\n"}], "owner": {"reputation": 430, "user_id": 1226831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ULsoj.jpg?s=128&g=1", "display_name": "Chu", "link": "https://stackoverflow.com/users/1226831/chu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1102, "favorite_count": 0, "accepted_answer_id": 47999872, "answer_count": 1, "score": 0, "last_activity_date": 1514748964, "creation_date": 1514407038, "last_edit_date": 1514409331, "question_id": 47998347, "link": "https://stackoverflow.com/questions/47998347/test-method-with-signals-and-slots", "title": "Test method with Signals and Slots", "body": "<p>I have the following two simple methods in a Qt Console Application:</p>\n\n<pre><code>void Webservice::getFile(PostElement el)\n{\n  parameter = &amp;el;\n  QUrl url(PATH);\n  QUrlQuery query;\n  query.addQueryItem(el.getParam(), el.getValue());\n  url.setQuery(query);\n  request.setUrl(url);\n  manager-&gt;get(request);\n  connect(manager, SIGNAL(finished(QNetworkReply*)), this,\n          SLOT(downloadCompleted(QNetworkReply*)));\n}\n\nvoid Webservice::downloadCompleted(QNetworkReply *reply)\n{\n  QByteArray b = reply-&gt;readAll();\n  qDebug() &lt;&lt; \"Download completed!\";\n  QFile file(\"/tmp/\" + parameter-&gt;getValue());\n  file.open(QIODevice::WriteOnly);\n  file.write(b);\n  file.close();\n  reply-&gt;deleteLater();\n}\n</code></pre>\n\n<p>I created a QTest project to test <code>getFile</code> method.</p>\n\n<pre><code>#include &lt;QtTest&gt;\n#include &lt;QCoreApplication&gt;\n\n// add necessary includes here\n#include \"webservice.h\"\n\nclass WebserviceTest : public QObject\n{\n  Q_OBJECT\n\npublic:\n  WebserviceTest();\n  ~WebserviceTest();\n\nprivate:\n  Webservice ws;\n\nprivate slots:\n  void initTestCase();\n  void cleanupTestCase();\n  void getFile();\n};\n\nWebserviceTest::WebserviceTest()\n{\n\n}\n\nWebserviceTest::~WebserviceTest()\n{\n\n}\n\nvoid WebserviceTest::initTestCase()\n{\n\n}\n\nvoid WebserviceTest::cleanupTestCase()\n{\n\n}\n\nvoid WebserviceTest::getFile()\n{\n  PostElement el{\"file\", \"myPic.png\"};\n  ws.getFile(el); // it should wait for the slot to be executed\n}\n\nQTEST_MAIN(WebserviceTest)\n\n#include \"tst_webservicetest.moc\"\n</code></pre>\n\n<p>As you can see, it has signals and slots. If I run that one on my original project, I see that <code>downloadCompleted</code> executes without issues (because it is using the Event Loop). But in the test project the slot is not called. I googled and found some examples using QSignalSpy, but at the moment I have not executed the slot successfully. </p>\n\n<p>How to tell my test to \"wait\" for the slot to be completed?</p>\n"}, {"tags": ["c++", "sfml"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1514406050, "post_id": 47998104, "comment_id": 82964645, "body": "Don&#39;t post commented out code. Either uncomment it, or remove it."}, {"owner": {"reputation": 106, "user_id": 5387755, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-VbH2KUurrk8/AAAAAAAAAAI/AAAAAAAAACw/m8nLCwpzhVg/photo.jpg?sz=128", "display_name": "electo", "link": "https://stackoverflow.com/users/5387755/electo"}, "edited": false, "score": 0, "creation_date": 1514406242, "post_id": 47998104, "comment_id": 82964713, "body": "I&#39;m very sorry for the 1 line commented code but actually it was here to show what other things i&#39;ve tried, i thought that maybe it could be useful"}, {"owner": {"reputation": 106, "user_id": 5387755, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-VbH2KUurrk8/AAAAAAAAAAI/AAAAAAAAACw/m8nLCwpzhVg/photo.jpg?sz=128", "display_name": "electo", "link": "https://stackoverflow.com/users/5387755/electo"}, "edited": false, "score": 0, "creation_date": 1514407074, "post_id": 47998104, "comment_id": 82965041, "body": "I changed the name to name.c_str() and it works, thanks to the guy who posted the comment and deleted it juste after."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1514407312, "post_id": 47998104, "comment_id": 82965121, "body": "I highly doubt that really fixed the error.  Unless you know exactly why such a &quot;do-nothing&quot; change to the code fixed the issue, all you did was move the bug to some other part of your code."}, {"owner": {"reputation": 33251, "user_id": 409744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b055a62302498782454622c61e44aa51?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/409744/mario"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1514453793, "post_id": 47998104, "comment_id": 82978083, "body": "@PaulMcKenzie @elcto Didn&#39;t read this note before, but it confirms my suspicion. It does indeed fix the issue, because using <code>std::string::c_str()</code> you&#39;re passing a raw pointer to the text rather than a complex object. When passing the <code>std::string</code>, the version of SFML being used obviously interprets the data wrong, causing the segmentation fault as a result."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1514451592, "post_id": 48004336, "comment_id": 82977061, "body": "Aaaah, constructors that don&#39;t construct. Joy for everyone."}, {"owner": {"reputation": 33251, "user_id": 409744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b055a62302498782454622c61e44aa51?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/409744/mario"}, "edited": false, "score": 0, "creation_date": 1514452850, "post_id": 48004336, "comment_id": 82977646, "body": "That still doesn&#39;t really explain the segfault, which shouldn&#39;t happen, even if the window isn&#39;t created yet. This might be a bug or something else."}, {"owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "edited": false, "score": 0, "creation_date": 1514453459, "post_id": 48004336, "comment_id": 82977914, "body": "I think it&#39;s an undefied behavior. There is no actions in Winfows default constructor. Maybe correct answer can be achieved by debugging SFML&#39;s sources."}, {"owner": {"reputation": 33251, "user_id": 409744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b055a62302498782454622c61e44aa51?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/409744/mario"}, "edited": false, "score": 0, "creation_date": 1514453681, "post_id": 48004336, "comment_id": 82978023, "body": "@GoverNator No need to. If a window isn&#39;t created, the internal pointer to the actual implementation isn&#39;t set (<code>m_impl</code> in the source), causing all member calls to essentially do nothing. As such the segmentation fault has to happen when copying/constructing the parameters passed (a STL string in this case)."}], "tags": [], "owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "is_accepted": false, "score": 1, "last_activity_date": 1514451894, "last_edit_date": 1514451894, "creation_date": 1514450875, "answer_id": 48004336, "question_id": 47998104, "link": "https://stackoverflow.com/questions/47998104/segfault-in-sfml/48004336#48004336", "title": "Segfault in SFML", "body": "<p>sf::Window's default constructor doesn't initializes the window. You need to do it manually with method create(), like:\n<code>this-&gt;_window.create(sf::VideoMode(width, height), name)</code>\nOr, which i better recommend to use, is initialize your window in constructor with member initializer list:</p>\n\n<pre><code>Graphics::Graphics(int width, int height, std::string name)\n    :    window(sf::RenderWindow(sf::VideoMode(width, height), name))\n{\n...\n}\n</code></pre>\n\n<p>Wider explanation on SFML-s docs <a href=\"https://www.sfml-dev.org/documentation/2.4.2/classsf_1_1Window.php#a5359122166b4dc492c3d25caf08ccfc4\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 33251, "user_id": 409744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b055a62302498782454622c61e44aa51?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/409744/mario"}, "is_accepted": false, "score": 1, "last_activity_date": 1514453702, "last_edit_date": 1514453702, "creation_date": 1514453240, "answer_id": 48004849, "question_id": 47998104, "link": "https://stackoverflow.com/questions/47998104/segfault-in-sfml/48004849#48004849", "title": "Segfault in SFML", "body": "<p>This seems to be some weird issue outside the code you're showing. Considering it happens when passing a STL object (<code>std::string</code>) is there any chance you're somehow mixing different runtime libraries (static vs. shared, debug vs. release)?</p>\n\n<p>Using a <code>sf::Window</code> or <code>sf::RenderWindow</code> without specifically creating them (either through the constructor with parameters or by calling the <code>create()</code> member) doesn't cause a segmentation fault or any other issue. It's supposed to fail silently (by doing nothing).</p>\n\n<p>Here's a short test program:</p>\n\n<pre><code>#include &lt;SFML/Graphics.hpp&gt;\n#include &lt;string&gt;\n\nint main(int argc, char **argv) {\n    sf::RenderWindow window;\n    std::string test(\"Hello World!\");\n    window.setTitle(test);\n    return 0;\n}\n</code></pre>\n\n<p>When executed, this program will just run for a moment and then end normally (returning <code>0</code>) without any errors or anything else. If this still crashes for you, it's most likely your environment.</p>\n\n<p>Since SFML accepts and returns STL objects, it's important that you're using the exact same version inside and outside of SFML (or any other library doing that). So ideally I'd suggest you just compile SFML yourself, which should fix the issue without lots of trial &amp; error.</p>\n\n<p><strong>Edit:</strong> Since the issue only appears when you're passing a <code>std::string</code> and not when passing <code>char*</code>, it's indeed the STL class obviously handled by different versions or implementations. Your compiled code passes the object built in some way, but the compiled version of SFML interprets this object in a different way, causing the problem. This will happen with any library. Most just avoid this by simply not allowing you to pass STL (or similar) objects.</p>\n"}], "owner": {"reputation": 106, "user_id": 5387755, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-VbH2KUurrk8/AAAAAAAAAAI/AAAAAAAAACw/m8nLCwpzhVg/photo.jpg?sz=128", "display_name": "electo", "link": "https://stackoverflow.com/users/5387755/electo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1514453702, "creation_date": 1514405654, "question_id": 47998104, "link": "https://stackoverflow.com/questions/47998104/segfault-in-sfml", "title": "Segfault in SFML", "body": "<p>I'm trying to make a very simple program using SFML but i keep getting a segfault.\nI'm just trying to make a window for now, it's working when i put everything in the main function but when i try to make a class it keeps segfaulting.</p>\n\n<p>Here is my code:</p>\n\n<p><strong><em>main.cpp</em></strong></p>\n\n<pre><code>int main()\n{\n    Graphics g(1000, 500, \"Window\");\n    return (0);\n}\n</code></pre>\n\n<p><strong><em>Graphics.h</em></strong></p>\n\n<pre><code>class Graphics\n{\npublic:\n    Graphics(int width, int height, std::string name);\n    ~Graphics();\n\nprivate:\n    sf::RenderWindow _window;\n    int _width;\n    int _height;\n};\n</code></pre>\n\n<p><strong><em>Graphics.cpp</em></strong></p>\n\n<pre><code>Graphics::Graphics(int width, int height, std::string name)\n{\n//  this-&gt;_window = new sf::RenderWindow(sf::VideoMode(width, height), name);\n    this-&gt;_window.setTitle(name);\n    this-&gt;_window.setSize(sf::Vector2u(width, height));\n    this-&gt;_width = width;\n    this-&gt;_height = height;\n}\n\nGraphics::~Graphics()\n{\n}\n</code></pre>\n\n<p>It makes the error at the first line of the constructor:</p>\n\n<pre><code>this-&gt;_window.setTitle(name);\n</code></pre>\n\n<p>I've also tried to make _window a pointer and to initialize it with a new sf::RenderWindow but it segfaults the same way.</p>\n\n<p>I've used SFML a lot before on Linux and never had this problem. It's my first time using it on Windows.</p>\n"}, {"tags": ["c++", "initialization", "overflow", "warnings", "long-long"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1514404923, "post_id": 47997909, "comment_id": 82964230, "body": "Use the correct literal type: <a href=\"http://en.cppreference.com/w/cpp/language/integer_literal\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/integer_literal</a>"}, {"owner": {"reputation": 103, "user_id": 9080432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f4d40021bd47b499f73fbc9687cc674?s=128&d=identicon&r=PG&f=1", "display_name": "Lifesaving Linen", "link": "https://stackoverflow.com/users/9080432/lifesaving-linen"}, "edited": false, "score": 0, "creation_date": 1514404973, "post_id": 47997909, "comment_id": 82964251, "body": "@NeilButterworth I tried that, but where should I put it...after the 60? after the 1? after the parenthesis?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1514409917, "post_id": 47997909, "comment_id": 82966020, "body": "Since you seem to be trying things more or less at random, note that there are <b>three</b> places you could add <code>ll</code> in <code>(1 &lt;&lt; 60)</code>; you only tried two of them."}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 3, "last_activity_date": 1514405122, "last_edit_date": 1514405122, "creation_date": 1514405055, "answer_id": 47997995, "question_id": 47997909, "link": "https://stackoverflow.com/questions/47997909/how-would-i-set-a-long-long-to-a-huge-number-without-a-warning/47997995#47997995", "title": "How would I set a long long to a huge number without a warning?", "body": "<p>It is a common mistake to expect for this expression:</p>\n\n<pre><code>long long x = 1 &lt;&lt; 60;\n</code></pre>\n\n<p>that type of left side would affect calculations on the right side. It is not, result of <code>1 &lt;&lt; 60</code> converted to type on the left, but it does not affect calculation of <code>1 &lt;&lt; 60</code> itself. So proper solution is to change type of <code>1</code>:</p>\n\n<pre><code>long long x = static_cast&lt;long long &gt;( 1 ) &lt;&lt; 60;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>long long x = 1LL &lt;&lt; 60;\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>auto x = 1LL &lt;&lt; 60;\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 9080432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f4d40021bd47b499f73fbc9687cc674?s=128&d=identicon&r=PG&f=1", "display_name": "Lifesaving Linen", "link": "https://stackoverflow.com/users/9080432/lifesaving-linen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 47997995, "answer_count": 1, "score": -1, "last_activity_date": 1514405122, "creation_date": 1514404484, "last_edit_date": 1514405063, "question_id": 47997909, "link": "https://stackoverflow.com/questions/47997909/how-would-i-set-a-long-long-to-a-huge-number-without-a-warning", "title": "How would I set a long long to a huge number without a warning?", "body": "<p>Right now, I have </p>\n\n<pre><code>long long x = 1 &lt;&lt; 60;\ncout &lt;&lt; x &lt;&lt; endl;\n</code></pre>\n\n<p>and I know that the range for long long can be all the way up to <code>2^64</code>, but for some reason when I execute the piece of code, it gives me a warning that says \"<code>left shift count &gt;= width of type [-Wshift-count-overflow].</code>\" </p>\n\n<p>In addition, <code>0</code> is printed to the screen, which is obviously not what I wanted.</p>\n\n<p>I tried putting the literal \"ll\" after it, but I don't know where I should put it:</p>\n\n<pre><code>long long x = (1 &lt;&lt; 60)ll;\nlong long x = (1 &lt;&lt; 60ll);\n</code></pre>\n\n<p>and none of them work</p>\n\n<p>Could anyone please tell me how to fix this? Thanks in advance!</p>\n"}, {"tags": ["android", "c++", "multithreading", "parallel-processing", "openmp"], "comments": [{"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1514410003, "post_id": 47997837, "comment_id": 82966052, "body": "What kind of worksharing do you use in the C++ library? The code is always best, but at least some description."}, {"owner": {"reputation": 61, "user_id": 5120173, "user_type": "registered", "profile_image": "https://graph.facebook.com/754320694665766/picture?type=large", "display_name": "Arthur Ara&#250;jo", "link": "https://stackoverflow.com/users/5120173/arthur-ara%c3%bajo"}, "reply_to_user": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1514464017, "post_id": 47997837, "comment_id": 82983206, "body": "@VladimirF I included the C++ test code in the question. Hopefully, that will clarify something."}, {"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1514485484, "post_id": 47997837, "comment_id": 82993536, "body": "Did you use <code>-fopenmp</code> at link time too. <code>-lgomp</code> isn&amp;#39;t enough IINM (and <code>-lgomp</code> is implied by <code>-fopemp</code>)"}, {"owner": {"reputation": 61, "user_id": 5120173, "user_type": "registered", "profile_image": "https://graph.facebook.com/754320694665766/picture?type=large", "display_name": "Arthur Ara&#250;jo", "link": "https://stackoverflow.com/users/5120173/arthur-ara%c3%bajo"}, "reply_to_user": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1514550571, "post_id": 47997837, "comment_id": 83014392, "body": "@Gilles I used <code>-fopenmp</code> only at compile time, and <code>-lgomp</code> at link time. I now removed the <code>-lgomp</code> flag and nothing changed, which makes sense according to what you said (<code>-lgomp</code> is already implied by <code>-fopenmp</code>). I&#39;m trying to add <code>-fopenmp</code> at link time too but it doesn&#39;t build, giving me the following error: <b>cannot find -lrt</b>"}, {"owner": {"reputation": 408, "user_id": 3419533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0d8e332628eb39667d8f75e7a3aa3f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Bataev", "link": "https://stackoverflow.com/users/3419533/alexey-bataev"}, "edited": false, "score": 0, "creation_date": 1514570445, "post_id": 47997837, "comment_id": 83022749, "body": "clang does not use <code>libgomp</code>, it uses its own <code>libomp</code>. Seems to me, that Android toolchain is not tweaked to support OpenMP in clang. But you can try to force it by using <code>-Xclang -fopenmp</code> instead of <code>-fopenmp</code>"}, {"owner": {"reputation": 61, "user_id": 5120173, "user_type": "registered", "profile_image": "https://graph.facebook.com/754320694665766/picture?type=large", "display_name": "Arthur Ara&#250;jo", "link": "https://stackoverflow.com/users/5120173/arthur-ara%c3%bajo"}, "reply_to_user": {"reputation": 408, "user_id": 3419533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0d8e332628eb39667d8f75e7a3aa3f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Bataev", "link": "https://stackoverflow.com/users/3419533/alexey-bataev"}, "edited": false, "score": 0, "creation_date": 1514574782, "post_id": 47997837, "comment_id": 83024353, "body": "@AlexeyBataev I added <code>-Xclang -fopenmp</code> on the Linking Command Line but I got the following warning: <code>argument unused during compilation: &#39;-Xclang -fopenmp&#39;</code>"}, {"owner": {"reputation": 408, "user_id": 3419533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0d8e332628eb39667d8f75e7a3aa3f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Bataev", "link": "https://stackoverflow.com/users/3419533/alexey-bataev"}, "edited": false, "score": 1, "creation_date": 1514923180, "post_id": 47997837, "comment_id": 83107444, "body": "This option is for the compiler, not for the linker. you need to provide it to clang itself. For the linker you should add something like <code>-lomp -L &lt;path to libomp.so&gt;</code>"}, {"owner": {"reputation": 511, "user_id": 841390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e62a701fbf5b03edc89364579f217d7b?s=128&d=identicon&r=PG", "display_name": "astraujums", "link": "https://stackoverflow.com/users/841390/astraujums"}, "reply_to_user": {"reputation": 408, "user_id": 3419533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0d8e332628eb39667d8f75e7a3aa3f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Bataev", "link": "https://stackoverflow.com/users/3419533/alexey-bataev"}, "edited": false, "score": 0, "creation_date": 1537434237, "post_id": 47997837, "comment_id": 91785717, "body": "@AlexeyBataev You should add your comment as the answer! Adding LOCAL_LDFLAGS += -lomp (besides the often cited LOCAL_CFLAGS += -fopenmp, LOCAL_CXXFLAGS += -fopenmp, and LOCAL_LDFLAGS += -fopenmp) to Android.mk made it link and work for me (NDK 18.0.5002713)."}], "owner": {"reputation": 61, "user_id": 5120173, "user_type": "registered", "profile_image": "https://graph.facebook.com/754320694665766/picture?type=large", "display_name": "Arthur Ara&#250;jo", "link": "https://stackoverflow.com/users/5120173/arthur-ara%c3%bajo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 668, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1514549547, "creation_date": 1514404125, "last_edit_date": 1514549547, "question_id": 47997837, "link": "https://stackoverflow.com/questions/47997837/openmp-creating-only-one-thread-on-android", "title": "OpenMP creating only one thread on Android", "body": "<p>I'm adding parallelism to a project with OpenMP and I already got it working on its Windows version (<em>with multiple threads running and time being saved</em>) but not on the Android one: OpenMP keeps using a single thread, instead of 4.  </p>\n\n<p>Let me put into context. I have a C++ project that is built to ARM using Clang 3.8, directly from the Visual Studio toolchain. The part of the project that uses OpenMP is the following method:</p>\n\n<pre><code>__inline static void func() {\n\n    int requested_threads = 4;\n\n    ofstream myfile;\n    myfile.open(\"/storage/emulated/0/test.txt\");\n\n    omp_set_nested(1);\n    omp_set_dynamic(0);\n    omp_set_num_threads(requested_threads);\n\n    #pragma omp parallel for num_threads(requested_threads)\n    for (int i = 0; i &lt; 4000; i++)\n    {\n        if (i == 0) {\n            myfile &lt;&lt; \"Number of threads = \" &lt;&lt; omp_get_num_threads() &lt;&lt; \"\\n\";\n            myfile &lt;&lt; \"Max threads allowed = \" &lt;&lt; omp_get_max_threads() &lt;&lt; \"\\n\";\n            myfile.close();\n        }\n        float x = pow(i, 10);\n    }\n}\n</code></pre>\n\n<p>To use OpenMP, I added <code>-fopenmp</code> in the C/C++ Command Line Additional Options and <code>-lgomp</code> in the Linker Command Line. I also included <code>libgomp.a</code> as an Additional Dependency. With that, the project is built successfully, generating a <code>.so</code> library. </p>\n\n<p>That library is then used on a Xamarin C# project. All the parallelism is managed by the native C++ library, by means of OpenMP. The C# project will simply call it. The problem is that it only uses <strong>1</strong> thread, even though I'm asking for <strong>4</strong>. I've printed out the return of a few OpenMP runtime routines, as follows:</p>\n\n<pre><code>omp_get_num_procs() ........ 4\nomp_get_dynamic() .......... 0\nomp_get_nested() ........... 1\nomp_get_max_threads ........ 4\nomp_get_num_threads ........ 1\n</code></pre>\n\n<p>Apparently, it recognizes all 4 available cores of the phone. When the app is running, it uses up to 25% of the phone's CPU maximum. </p>\n\n<p>I already did an extensive search but the closer I got was this <a href=\"https://stackoverflow.com/questions/26049965/openmp-creates-only-one-thread\">question</a>. I'm not sure why I can't get all cores running, maybe the OS is putting up some restriction or maybe I'm not referencing OpenMP correctly and it's not being used at all. </p>\n"}, {"tags": ["c++", "makefile", "android-ndk", "protocol-buffers", "grpc"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 1, "creation_date": 1515012573, "post_id": 47997740, "comment_id": 83144650, "body": "gRPC has a CMakeLists.txt. Glancing at it, I see nothing that should prevent it to be used to generate NDK targets,"}, {"owner": {"reputation": 3424, "user_id": 857731, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd8c2a2a0af66f77cb61d6e94f220c07?s=128&d=identicon&r=PG", "display_name": "Michael Litvin", "link": "https://stackoverflow.com/users/857731/michael-litvin"}, "edited": false, "score": 0, "creation_date": 1536223262, "post_id": 47997740, "comment_id": 91348883, "body": "Did you eventually make it?"}, {"owner": {"reputation": 2011, "user_id": 2757447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQg87.png?s=128&g=1", "display_name": "Taier", "link": "https://stackoverflow.com/users/2757447/taier"}, "reply_to_user": {"reputation": 1169, "user_id": 230825, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/274ee5a62543653734586319874daf57?s=128&d=identicon&r=PG", "display_name": "david", "link": "https://stackoverflow.com/users/230825/david"}, "edited": false, "score": 0, "creation_date": 1547795754, "post_id": 47997740, "comment_id": 95322610, "body": "@David how my question can be a duplicate, if it was asked more than a year ago and this one just a few days ago? Also my question is not only about compiling gRPC, but protobuf as well."}, {"owner": {"reputation": 1169, "user_id": 230825, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/274ee5a62543653734586319874daf57?s=128&d=identicon&r=PG", "display_name": "david", "link": "https://stackoverflow.com/users/230825/david"}, "edited": false, "score": 0, "creation_date": 1547818325, "post_id": 47997740, "comment_id": 95333966, "body": "@Taier Ok I mark this other question as duplicate of yours. And the other question has answers addressing grpc and protobuf compilation as grpc depends on protobuf package : building grpc leads to building protobuf"}], "answers": [{"tags": [], "owner": {"reputation": 17473, "user_id": 1103561, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0bdb2aec0e1fe8c1b56fd8e1e7b1e02e?s=128&d=identicon&r=PG&f=1", "display_name": "4ntoine", "link": "https://stackoverflow.com/users/1103561/4ntoine"}, "is_accepted": false, "score": 0, "last_activity_date": 1609135378, "creation_date": 1609135378, "answer_id": 65473571, "question_id": 47997740, "link": "https://stackoverflow.com/questions/47997740/compiling-c-grpc-for-android/65473571#65473571", "title": "Compiling C++ gRPC for Android", "body": "<p>I've done it <a href=\"https://github.com/4ntoine/JniBenchmarking/blob/master/rpc/CMakeLists.txt\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>In brief: git submodule gRPC C++, add &quot;CMakeLists.txt&quot; file to your project on how to build C++ gRPC (and your code that uses it), add a <code>externalNativeBuild/cmake</code> it to your &quot;build.gradle&quot; - voila!</p>\n"}], "owner": {"reputation": 2011, "user_id": 2757447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQg87.png?s=128&g=1", "display_name": "Taier", "link": "https://stackoverflow.com/users/2757447/taier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1091, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1609135378, "creation_date": 1514403609, "question_id": 47997740, "link": "https://stackoverflow.com/questions/47997740/compiling-c-grpc-for-android", "title": "Compiling C++ gRPC for Android", "body": "<p>How to compile C++ gRPC code for Android? I have seen several tutorials on how Protobuf itself can be compiled using the Android Native Development Kit, such as in the answer from <a href=\"https://stackoverflow.com/questions/42458739/how-to-integrate-install-latest-c-protobuf-3-2-with-android-ndk\">Swapnil: How to integrate/install latest c++ protobuf (3.2) with Android NDK?</a></p>\n\n<p>Or <a href=\"https://stackoverflow.com/questions/44773136/google-protobuf-and-android-ndk\">Google protobuf and Android NDK</a></p>\n\n<p>But how to How to compile C++ gRPC code that is using Protobuf as well for Android? Taking into account that there's 20K lines of <a href=\"https://github.com/grpc/grpc/blob/master/Makefile\" rel=\"noreferrer\">gRPC Makefile</a>.</p>\n"}, {"tags": ["c++", "if-statement", "shellexecute"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 9, "creation_date": 1514403366, "post_id": 47997689, "comment_id": 82963604, "body": "Don&#39;t tell us to ignore things that aren&#39;t relevant to the question, instead leave out any irrelevant details. That function isn&#39;t called, and putting it in there on purpose, then drawing special attention to it, is really absurd."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1514403404, "post_id": 47997689, "comment_id": 82963619, "body": "The only way that branch of the <code>if</code> will fire is if <code>a</code> is not equal to <code>65</code>, so it&#39;s redundant to have the opposite condition in there."}, {"owner": {"reputation": 25, "user_id": 9146575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37bef8eaf9dbed2de66fe771cb7a5faa?s=128&d=identicon&r=PG&f=1", "display_name": "smartonion", "link": "https://stackoverflow.com/users/9146575/smartonion"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1514403598, "post_id": 47997689, "comment_id": 82963696, "body": "So are you saying that I don&#39;t need the else if ?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1514403655, "post_id": 47997689, "comment_id": 82963717, "body": "You don&#39;t need the if part that is after the else."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1514403724, "post_id": 47997689, "comment_id": 82963746, "body": "Also <code>if (a != 65);</code> with the semicolon there is a complete statement. So despite your indention the block under it will execute for any value of <code>a</code>."}, {"owner": {"reputation": 25, "user_id": 9146575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37bef8eaf9dbed2de66fe771cb7a5faa?s=128&d=identicon&r=PG&f=1", "display_name": "smartonion", "link": "https://stackoverflow.com/users/9146575/smartonion"}, "edited": false, "score": 0, "creation_date": 1514403757, "post_id": 47997689, "comment_id": 82963768, "body": "Why?(I am sorry for not really understanding! like I said I am new to this)"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1514403824, "post_id": 47997689, "comment_id": 82963789, "body": "A debugger would help you see what is happening. I recommend using Visual Studio and single stepping through the code."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1514404208, "post_id": 47997689, "comment_id": 82963937, "body": "Related: <a href=\"https://stackoverflow.com/questions/42913798/searching-array-reports-not-found-even-though-its-found/42913882#42913882\" title=\"searching array reports not found even though its found\">stackoverflow.com/questions/42913798/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1514404292, "post_id": 47997689, "comment_id": 82963976, "body": "&quot;else if (a != 65);&quot; - you did not really mean that final &quot;;&quot; there.."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1514405158, "post_id": 47997689, "comment_id": 82964337, "body": "@smartonion Also relevaant: <a href=\"https://stackoverflow.com/questions/47959876/which-are-the-most-common-pitfalls-with-conditional-if-statements-in-c/47959897#47959897\" title=\"which are the most common pitfalls with conditional if statements in c\">stackoverflow.com/questions/47959876/&hellip;</a>"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1514408913, "post_id": 47997689, "comment_id": 82965663, "body": "So you want to start 98 devenv? 64 before mspaint and 34 after?"}], "answers": [{"tags": [], "owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "is_accepted": false, "score": 2, "last_activity_date": 1514403745, "creation_date": 1514403745, "answer_id": 47997763, "question_id": 47997689, "link": "https://stackoverflow.com/questions/47997689/why-else-if-a-65-is-not-executing/47997763#47997763", "title": "Why else if (a != 65) is not executing?", "body": "<p>If you want to know if all numbers in the loop are not 65, you need to remember whether you have seen 65 as you go through the loop:</p>\n\n<pre><code>auto found65 = false;\nfor (int a = 1; a &lt; 100; a += 3)\n{\n    cout &lt;&lt; \"The number is: \" &lt;&lt; a &lt;&lt; endl;\n    found65 = found65 || (a == 65);\n}\n\nif (found65)\n{\n\n    StartProgram(\"mspaint\");\n}\nelse\n{\n    StartProgram(\"devenv\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 4, "last_activity_date": 1514403797, "creation_date": 1514403797, "answer_id": 47997782, "question_id": 47997689, "link": "https://stackoverflow.com/questions/47997689/why-else-if-a-65-is-not-executing/47997782#47997782", "title": "Why else if (a != 65) is not executing?", "body": "<p>This code is wrong many ways:</p>\n\n<pre><code>    if (a == 65)\n    {\n        StartProgram(\"mspaint\");\n    }\n    else if (a != 65);\n    {\n        StartProgram(\"devenv\");\n    }\n</code></pre>\n\n<p>first of all semicolon after <code>if</code> makes it noop and terminates your <code>else</code> so that code is convoluted way to write:</p>\n\n<pre><code>    if (a == 65)\n    {\n        StartProgram(\"mspaint\");\n    }\n    StartProgram(\"devenv\");\n</code></pre>\n\n<p>just remove second <code>if</code> completely:</p>\n\n<pre><code>    if (a == 65)\n    {\n        StartProgram(\"mspaint\");\n    }\n    else \n    {\n        StartProgram(\"devenv\");\n    }\n</code></pre>\n\n<p>that to fix your code, to fix the logic of your program just use flag:</p>\n\n<pre><code>int main()\n{\n    bool found = false;\n    for (int a = 1; a &lt; 100; a += 3)\n    {\n        if (a == 65) found = true;\n    }\n\n    if( found ) \n        StartProgram(\"devenv\");\n    else\n        StartProgram(\"mspaint\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1514405411, "creation_date": 1514405411, "answer_id": 47998067, "question_id": 47997689, "link": "https://stackoverflow.com/questions/47997689/why-else-if-a-65-is-not-executing/47998067#47998067", "title": "Why else if (a != 65) is not executing?", "body": "<p>I assume that you have figured out the problems with your syntax, so I'll concentrate on high-level issues with the algorithm.</p>\n\n<p>You don't need a loop to determine if counting by 3 would print 65. This can be done with simple math: when you start counting from <code>a</code> to <code>z</code> by <code>x</code>, you would hit <code>n</code> if <code>(n-a)</code> produces no remainder when divided by <code>x</code>:</p>\n\n<pre><code>bool see65 = (65-1) % 3 == 0;\n</code></pre>\n\n<p>This assumes that numbers <code>a</code> and <code>z</code> are on the opposite sides of <code>n</code>.</p>\n\n<p>Since your conditional controls a single parameter, you can rewrite your call as a conditional expression:</p>\n\n<pre><code>StartProgram(see65  ? \"mspaint\" : \"devenv\");\n</code></pre>\n\n<p>Moreover, if you recall that <code>bool</code> in C++ is an integral type, you can eliminate conditional:</p>\n\n<pre><code>array&lt;string,2&gt; prog {\"mspaint\", \"devenv\"}\n...\nStartProgram(prog[see65]);\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 9146575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37bef8eaf9dbed2de66fe771cb7a5faa?s=128&d=identicon&r=PG&f=1", "display_name": "smartonion", "link": "https://stackoverflow.com/users/9146575/smartonion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 47997782, "answer_count": 3, "score": -4, "last_activity_date": 1514405498, "creation_date": 1514403317, "last_edit_date": 1514405498, "question_id": 47997689, "link": "https://stackoverflow.com/questions/47997689/why-else-if-a-65-is-not-executing", "title": "Why else if (a != 65) is not executing?", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\nusing namespace std;\n\nvoid noret()\n{\n\n    for (int i = 1; i &lt; 11; i++)\n    {\n        cout &lt;&lt; \"Line number : \" &lt;&lt; i &lt;&lt; endl;\n    }\n\n    system(\"pause\");\n}\n\nvoid StartProgram(string filename)\n{\n    ShellExecute(NULL, \"open\", filename.c_str(), NULL, NULL, SW_SHOWNORMAL);\n}\n\nint main()\n{\n    for (int a = 1; a &lt; 100; a += 3)\n    {\n        cout &lt;&lt; \"The number is: \" &lt;&lt; a &lt;&lt; endl;\n        if (a == 65)\n        {\n\n            StartProgram(\"mspaint\");\n        }\n        else if (a != 65);\n        {\n            StartProgram(\"devenv\");\n        }\n    }\n    system(\"pause\");\n    return 0;\n\n}\n</code></pre>\n\n<p>Here is the code I made(I am still new to programming). Please ignore the <code>void noret()</code> part. The code is Fully working, but in the part with <code>else if (a != 65)</code>, I want to make it open the program only if it isn't equal to 65.</p>\n\n<p>The program counts from 1-100. a = a+3 where \"a\" is equal to 1. While it counts to 100, if \"a\" is never equal to 65 it will open \"devenv\". But the way I did it it's made that \"devenv\" will open to very number that isn't equal to 65. How can I make it so that it will open ONCE if throughout the counting it never was 65... Does it make any sense?  </p>\n"}, {"tags": ["c++", "file", "for-loop", "if-statement", "fstream"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7722849, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1zCiFnwzgXU/AAAAAAAAAAI/AAAAAAAABxc/_mEO4x-7LSA/photo.jpg?sz=128", "display_name": "Vyctor661", "link": "https://stackoverflow.com/users/7722849/vyctor661"}, "edited": false, "score": 0, "creation_date": 1514402181, "post_id": 47997454, "comment_id": 82963123, "body": "didnt know that was a thing"}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": true, "score": 5, "last_activity_date": 1514402736, "last_edit_date": 1514402736, "creation_date": 1514402015, "answer_id": 47997454, "question_id": 47997397, "link": "https://stackoverflow.com/questions/47997397/if-statement-doesnt-work-in-for-loop/47997454#47997454", "title": "if statement doesn&#39;t work in for loop", "body": "<p>You have your assignments backwards:</p>\n\n<pre><code>if(minim &gt; x)x=minim;\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>if(minim &gt; x) minim=x;\n</code></pre>\n\n<p>What you had was assigning to x rather than saving the new minimum and maximums.</p>\n"}], "owner": {"reputation": 9, "user_id": 7722849, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1zCiFnwzgXU/AAAAAAAAAAI/AAAAAAAABxc/_mEO4x-7LSA/photo.jpg?sz=128", "display_name": "Vyctor661", "link": "https://stackoverflow.com/users/7722849/vyctor661"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "closed_date": 1514402420, "accepted_answer_id": 47997454, "answer_count": 1, "score": -2, "last_activity_date": 1514402736, "creation_date": 1514401694, "question_id": 47997397, "link": "https://stackoverflow.com/questions/47997397/if-statement-doesnt-work-in-for-loop", "closed_reason": "Not suitable for this site", "title": "if statement doesn&#39;t work in for loop", "body": "<p>Ok i have this problem: if doesn't want to work and i dont know why.</p>\n\n<p>The program is supposed to take from a file some numbers, first indicates the number of numbers on the second line and say what is the minimum and maximum on that line.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\n\nusing namespace std;\n\nint main()\n{\n ifstream f(\"file.in\");\n ofstream g(\"file.out\");\n int minim,x,maxim,i,n;\n\n f&gt;&gt;n;\n f&gt;&gt;maxim;\n minim=maxim;\n\n for(i=2;i&lt;=n;i++){\n    f&gt;&gt;x;\n    if(minim &gt; x)x=minim;\n    if(maxim &lt; x)x=maxim;\n }\n    g &lt;&lt; \"min=\" &lt;&lt; minim;\n    g &lt;&lt; \"\\n\" &lt;&lt; \"max=\" &lt;&lt; maxim;\n    f.close();\n    g.close();\n\nreturn 0;\n}\n</code></pre>\n\n<p>The problem is \"if\" doesn't work at all.</p>\n\n<p>srry for bad english</p>\n"}, {"tags": ["c++", "opencv", "android-ndk"], "comments": [{"owner": {"reputation": 763, "user_id": 5690771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jIp1y.jpg?s=128&g=1", "display_name": "hariprasad", "link": "https://stackoverflow.com/users/5690771/hariprasad"}, "edited": false, "score": 0, "creation_date": 1514435895, "post_id": 47997363, "comment_id": 82971753, "body": "you can put mat data into cpp array and then send it via jni array"}, {"owner": {"reputation": 79, "user_id": 8938792, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5001fbb3f1bed68e070c179ba38b0c64?s=128&d=identicon&r=PG&f=1", "display_name": "Ber12345", "link": "https://stackoverflow.com/users/8938792/ber12345"}, "reply_to_user": {"reputation": 763, "user_id": 5690771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jIp1y.jpg?s=128&g=1", "display_name": "hariprasad", "link": "https://stackoverflow.com/users/5690771/hariprasad"}, "edited": false, "score": 0, "creation_date": 1514454332, "post_id": 47997363, "comment_id": 82978360, "body": "How do I do this? I can&#39;t find any documentation for putting an OutputArray into a cpp array"}, {"owner": {"reputation": 763, "user_id": 5690771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jIp1y.jpg?s=128&g=1", "display_name": "hariprasad", "link": "https://stackoverflow.com/users/5690771/hariprasad"}, "edited": false, "score": 0, "creation_date": 1514455110, "post_id": 47997363, "comment_id": 82978801, "body": "<a href=\"https://stackoverflow.com/questions/1610045/how-to-return-an-array-from-jni-to-java\" title=\"how to return an array from jni to java\">stackoverflow.com/questions/1610045/&hellip;</a>. this may helps"}, {"owner": {"reputation": 79, "user_id": 8938792, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5001fbb3f1bed68e070c179ba38b0c64?s=128&d=identicon&r=PG&f=1", "display_name": "Ber12345", "link": "https://stackoverflow.com/users/8938792/ber12345"}, "reply_to_user": {"reputation": 763, "user_id": 5690771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jIp1y.jpg?s=128&g=1", "display_name": "hariprasad", "link": "https://stackoverflow.com/users/5690771/hariprasad"}, "edited": false, "score": 0, "creation_date": 1514465860, "post_id": 47997363, "comment_id": 82984040, "body": "This doesn&#39;t help I&#39;m afraid. Would you be able to give an example of what you said to do in your first answer?  How do I get the mat data into a cpp array?"}], "answers": [{"tags": [], "owner": {"reputation": 763, "user_id": 5690771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jIp1y.jpg?s=128&g=1", "display_name": "hariprasad", "link": "https://stackoverflow.com/users/5690771/hariprasad"}, "is_accepted": false, "score": 0, "last_activity_date": 1514528790, "creation_date": 1514528790, "answer_id": 48018390, "question_id": 47997363, "link": "https://stackoverflow.com/questions/47997363/accessing-a-returned-value-from-opencv-function-c-ndk/48018390#48018390", "title": "Accessing a returned value from openCV function C++ NDK", "body": "<p>If you want to copy the mat data into cpp array you can do like this.\nI assume the Mat data you want to return is of float type.</p>\n\n<pre><code>int size=response.rows*response.cols*resonse.channels();\nfloat* outArr=new float[size];\nstd::memcpy(outArr,response.data,size*sizeof(float));\n</code></pre>\n\n<p>you need to delete outArr after copying it to JNIArray.</p>\n"}], "owner": {"reputation": 79, "user_id": 8938792, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5001fbb3f1bed68e070c179ba38b0c64?s=128&d=identicon&r=PG&f=1", "display_name": "Ber12345", "link": "https://stackoverflow.com/users/8938792/ber12345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514528790, "creation_date": 1514401503, "question_id": 47997363, "link": "https://stackoverflow.com/questions/47997363/accessing-a-returned-value-from-opencv-function-c-ndk", "title": "Accessing a returned value from openCV function C++ NDK", "body": "<p>I am using the Knn findNearest function in OpenCV, which takes in the following parameters:</p>\n\n<pre><code>Mat response;\nMat dist;\n\nknn-&gt;findNearest(testFeature, K, noArray(), response, dist);\n</code></pre>\n\n<p>The output returned from response and dist is of type OutputArray. </p>\n\n<p>How do I access the results of response and dist in this format?\nIdeally I would like to convert to Mat int. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1514401230, "post_id": 47997290, "comment_id": 82962757, "body": "Because of the <code>do...while</code> condition, 1 &lt;= selection &lt;= 4 so the <code>default</code> will never be needed."}, {"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 1, "creation_date": 1514401236, "post_id": 47997290, "comment_id": 82962761, "body": "think of what would happen in your <code>do-while</code> condition for say, input 5"}, {"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1514401572, "post_id": 47997290, "comment_id": 82962881, "body": "@user0042 Sorry but i don&#39;t understand how this is a duplicate, <b>here</b> OP&#39;s issue concerns faulty <code>do-while</code> loop condition not a faulty <code>switch</code> block"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1514401639, "post_id": 47997290, "comment_id": 82962907, "body": "@AditiRawat Then the question title should probably changed."}, {"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1514401686, "post_id": 47997290, "comment_id": 82962929, "body": "@user0042 Yes the title <b>is</b> misguiding."}, {"owner": {"reputation": 1, "user_id": 9146485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a100a1a38050ee5fc51728e8032bae7f?s=128&d=identicon&r=PG&f=1", "display_name": "Aira", "link": "https://stackoverflow.com/users/9146485/aira"}, "reply_to_user": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1514402338, "post_id": 47997290, "comment_id": 82963189, "body": "@AditiRawat for 5, it just prints out again all the code ... do i need to change the while condition to include it?"}, {"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1514402478, "post_id": 47997290, "comment_id": 82963252, "body": "@Aira exactly, for any input other than  1,2,3,4 your do-while condition becomes true and again goes back into the do-while block. You need to change your condition accordingly."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1514402637, "post_id": 47997290, "comment_id": 82963307, "body": "@Aira Improve your question title as mentioned please. If the duplicate&#39;s  answers don&#39;t solve your problem, <a href=\"https://stackoverflow.com/posts/47997290/edit\">edit</a> your question and clearly state why not."}, {"owner": {"reputation": 1, "user_id": 9146485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a100a1a38050ee5fc51728e8032bae7f?s=128&d=identicon&r=PG&f=1", "display_name": "Aira", "link": "https://stackoverflow.com/users/9146485/aira"}, "reply_to_user": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1514402775, "post_id": 47997290, "comment_id": 82963373, "body": "@AditiRawat okay so i tried with simple while loop and it got even worse. Can you tell me how should i alter this while condition here?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1514402948, "post_id": 47997290, "comment_id": 82963435, "body": "@Aira the solution to your problem; learn C++ - start by reading <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">a few good books</a>."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1514402962, "post_id": 47997290, "comment_id": 82963443, "body": "@Aira You do not need a <code>default</code> as your <code>while</code> condition guarantees the input will be in the range [1-4]."}, {"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1514403036, "post_id": 47997290, "comment_id": 82963470, "body": "I think you should just follow @JohnnyMopp&#39;s comment!"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1514403168, "post_id": 47997290, "comment_id": 82963526, "body": "&quot;What should be the position of default&quot; - it doesn&#39;t matter."}, {"owner": {"reputation": 1, "user_id": 9146485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a100a1a38050ee5fc51728e8032bae7f?s=128&d=identicon&r=PG&f=1", "display_name": "Aira", "link": "https://stackoverflow.com/users/9146485/aira"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1514403169, "post_id": 47997290, "comment_id": 82963527, "body": "@JohnnyMopp thank you for making the point clear. much appreciated"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1514403174, "post_id": 47997290, "comment_id": 82963530, "body": "@Aira It&#39;s quite obvious you want to move that <code>default</code> statements into your <code>do .. while()</code> loop. I&#39;d recommend to catch the condition once in a <code>bool variable</code>, and use that one to decide if the user should be noticed about the invalid input and if the loop can be stopped."}, {"owner": {"reputation": 1, "user_id": 9146485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a100a1a38050ee5fc51728e8032bae7f?s=128&d=identicon&r=PG&f=1", "display_name": "Aira", "link": "https://stackoverflow.com/users/9146485/aira"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1514403614, "post_id": 47997290, "comment_id": 82963700, "body": "@user0042 got it. thanks"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8852937, "user_type": "registered", "profile_image": "https://graph.facebook.com/1888126094561636/picture?type=large", "display_name": "Marko \u0160enk", "link": "https://stackoverflow.com/users/8852937/marko-%c5%a0enk"}, "is_accepted": false, "score": 1, "last_activity_date": 1514404048, "creation_date": 1514404048, "answer_id": 47997822, "question_id": 47997290, "link": "https://stackoverflow.com/questions/47997290/what-should-be-the-position-of-default-in-switch-statement/47997822#47997822", "title": "What should be the position of default in switch statement?", "body": "<p>Your do while loop makes it impossible for the program to proceed with the value of \"selection\" different than 1,2,3 or 4. In that case your switch statement can only reach your 4 defined cases and cannot reach the default case. You could change your code by excluding the do while loop and just make the input possible only once. </p>\n"}], "owner": {"reputation": 1, "user_id": 9146485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a100a1a38050ee5fc51728e8032bae7f?s=128&d=identicon&r=PG&f=1", "display_name": "Aira", "link": "https://stackoverflow.com/users/9146485/aira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "closed_date": 1514405493, "answer_count": 1, "score": -2, "last_activity_date": 1514404048, "creation_date": 1514401104, "last_edit_date": 1514403217, "question_id": 47997290, "link": "https://stackoverflow.com/questions/47997290/what-should-be-the-position-of-default-in-switch-statement", "closed_reason": "Duplicate", "title": "What should be the position of default in switch statement?", "body": "<p>I always put <code>default</code> at the end of all cases and it works, however, today I ran this chunk of code and my default is not working. I put it in other possible locations to check if it would work but it didn't. It is running all fine except for when I take a user input that does not match the cases I made. Can anyone please tell me whats wrong with the code or how can I make default statement work?</p>\n\n<pre><code>int main(){      \n    int selection;\n\n    do\n    {\n        cout &lt;&lt; \"Please make a selection: \\n\";\n        cout &lt;&lt; \"1) Addition\\n\";\n        cout &lt;&lt; \"2) Subtraction\\n\";\n        cout &lt;&lt; \"3) Multiplication\\n\";\n        cout &lt;&lt; \"4) Division\\n\";\n        cin &gt;&gt; selection;\n    } while (selection != 1 &amp;&amp; selection != 2 &amp;&amp; selection != 3 &amp;&amp;\n        selection != 4);\n\n    switch (selection)\n    {\n    case 1:\n        cout &lt;&lt; \"you want addition\\n\";\n        break;\n    case 2:\n        cout &lt;&lt; \"you want subtraction\\n\";\n        break;\n    case 3:\n        cout &lt;&lt; \"you want multiplication\\n\";\n        break;\n    case 4:\n        cout &lt;&lt; \"you want division\\n\";\n        break;\n    default:\n        cout &lt;&lt; \"you entered wrong operation\\n\";\n        break;\n\n    }\n\n    cout &lt;&lt; \"You selected option #\" &lt;&lt; selection &lt;&lt; \"\\n\";\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "explicit-instantiation"], "answers": [{"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": true, "score": 3, "last_activity_date": 1514401712, "creation_date": 1514401712, "answer_id": 47997400, "question_id": 47997242, "link": "https://stackoverflow.com/questions/47997242/explicit-instantion-of-boost-multi-index-container/47997400#47997400", "title": "Explicit instantion of boost multi_index container", "body": "<p>If the type is part of a class' visible interface then any headers that class is dependent on have to be included, no way around that. If you really don't want it to be part of the visible interface consider using the pImpl idiom:</p>\n\n<p>Public header</p>\n\n<pre><code>#if !defined(MYCLASS_PUBLIC_H_)\n#define MYCLASS_PUBLIC_H_\n\nstruct MyClassImpl;\nclass MyClass {\n  MyClassImpl * pImpl;\npublic:\n  void SomeOperation();\n};\n#endif\n</code></pre>\n\n<p>Implementation header:</p>\n\n<pre><code>#if !defined(MYCLASS_IMPL_H_)\n#define MYCLASS_IMPL_H_\n#include &lt;private_type.h&gt;\n#include \"MyClass.h\"\nstruct MyClassImpl\n{\n  void Operation();\n\nprivate:\n  SomePrivateType member;\n};\n#endif\n</code></pre>\n\n<p>Implementation file:</p>\n\n<pre><code>#include \"MyClassImpl.h\"\nvoid MyClass::SomeOperation()\n{\n  pImpl-&gt;Operation();\n}\n\nvoid MyClassImpl::Operation()\n{\n  // do something with 'member'\n}\n</code></pre>\n\n<p>Code that only sees the public interface:</p>\n\n<pre><code>#include \"MyClass.h\"\nvoid foo()\n{\n  MyClass inst;\n  inst.SomeOperation();\n}\n</code></pre>\n"}], "owner": {"reputation": 921, "user_id": 2043980, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17e881e92b245bcb71fe579f34acb1b0?s=128&d=identicon&r=PG", "display_name": "Demaunt", "link": "https://stackoverflow.com/users/2043980/demaunt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 47997400, "answer_count": 1, "score": 1, "last_activity_date": 1514401712, "creation_date": 1514400774, "question_id": 47997242, "link": "https://stackoverflow.com/questions/47997242/explicit-instantion-of-boost-multi-index-container", "title": "Explicit instantion of boost multi_index container", "body": "<p>First I would like to show the working code and then explain, how i want to change things. This is simple boost multi_index example:</p>\n\n<pre><code>//main.cpp    \n    #include &lt;boost/multi_index_container.hpp&gt;\n    #include &lt;boost/multi_index/ordered_index.hpp&gt;\n    #include &lt;boost/multi_index/identity.hpp&gt;\n    #include &lt;boost/multi_index/member.hpp&gt;\n    #include &lt;string&gt;\n\n    struct employee\n    {\n        int         id;\n        std::string name;\n\n        employee(int id, const std::string&amp; name) :id(id), name(name){}\n\n        bool operator&lt;(const employee&amp; e)const{ return id&lt;e.id; }\n    };\n\n    typedef boost::multi_index::multi_index_container&lt;\n        employee,\n        boost::multi_index:: indexed_by&lt;\n        // sort by employee::operator&lt;\n        boost::multi_index:: ordered_unique&lt; boost::multi_index:: identity&lt;employee&gt; &gt;,\n\n        // sort by less&lt;string&gt; on name\n        boost::multi_index::ordered_non_unique&lt;boost::multi_index::member&lt;employee, std::string, &amp;employee::name&gt; &gt;\n        &gt;\n    &gt; employee_set;\n\n    int main()\n    {\n        employee_set es;\n        es.insert(employee(0, \"Bob\"));\n    }\n</code></pre>\n\n<p>Imagine if main.cpp is another module, without boost dependency. I want to udnerstand how to:</p>\n\n<p>include some header file with boost multiindex container class being forward declared into main.cpp\ndefine multiindex container of employees in additional .cpp file\nI have tried tons of variants, but none if this works. Is it possible to create something like this?</p>\n\n<pre><code>//notmain.cpp\n#include &lt;boost/multi_index_container.hpp&gt;\n#include &lt;boost/multi_index/ordered_index.hpp&gt;\n#include &lt;boost/multi_index/identity.hpp&gt;\n#include &lt;boost/multi_index/member.hpp&gt;\n#include \"notmain.h\"\n\ntypedef boost::multi_index::multi_index_container&lt;\n    employee,\n    boost::multi_index::indexed_by&lt;\n    // sort by employee::operator&lt;\n    boost::multi_index::ordered_unique&lt; boost::multi_index::identity&lt;employee&gt; &gt;,\n\n    // sort by less&lt;string&gt; on name\n    boost::multi_index::ordered_non_unique&lt;boost::multi_index::member&lt;employee, std::string, &amp;employee::name&gt; &gt;\n    &gt;\n&gt; employee_set;\n</code></pre>\n\n<p>Now comes h.file I need to fill with forward declaration (or explicit initiation) of container. I may be misunderstanding these terms, but I am new to c++ and boost.</p>\n\n<pre><code>//notmain.h\n\n#include &lt;string&gt;\n\n/*\n    Some how here I need forward declaration or explicit initiation of boost container \n    class employee_set ???\n\n*/\n\nstruct employee\n{\n    int         id;\n    std::string name;\n\n    employee(int id, const std::string&amp; name) :id(id), name(name){}\n\n    bool operator&lt;(const employee&amp; e)const{ return id&lt;e.id; }\n};\n</code></pre>\n\n<p>This is final goal. I want to remind that main.cpp is imagined to be .cpp of another module, without boost dependency.</p>\n\n<pre><code>//main.cpp\n#include \"notmain.h\"\n\nint main()\n{\n    employee_set es;\n    es.insert(employee(0, \"Bob\"));\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1514400634, "post_id": 47997195, "comment_id": 82962502, "body": "This <code>operator</code> returns a <code>const</code> reference, not an array. Please search for <b>operator overloading</b>"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 1, "creation_date": 1514400646, "post_id": 47997195, "comment_id": 82962512, "body": "This is a simple <a href=\"http://en.cppreference.com/w/cpp/language/operator_member_access\" rel=\"nofollow noreferrer\">overloaded subscript operator</a>."}, {"owner": {"reputation": 2916, "user_id": 3646096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KUofm.jpg?s=128&g=1", "display_name": "M&#225;rio Feroldi", "link": "https://stackoverflow.com/users/3646096/m%c3%a1rio-feroldi"}, "edited": false, "score": 0, "creation_date": 1514400697, "post_id": 47997195, "comment_id": 82962536, "body": "The trailing <code>const</code> means this method doesn&#39;t modify anything inside."}], "answers": [{"tags": [], "owner": {"reputation": 821, "user_id": 4791654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-f6OIWNb562I/AAAAAAAAAAI/AAAAAAAAACY/Kuh1tIUZLbk/photo.jpg?sz=128", "display_name": "Tyler Lewis", "link": "https://stackoverflow.com/users/4791654/tyler-lewis"}, "is_accepted": false, "score": 1, "last_activity_date": 1514400782, "creation_date": 1514400782, "answer_id": 47997244, "question_id": 47997195, "link": "https://stackoverflow.com/questions/47997195/what-is-being-returned-and-what-is-being-taken-in-the-function-described-by-this/47997244#47997244", "title": "What is being returned and what is being taken in the function described by this documentation?", "body": "<p>The trailing const means that the \"this\" parameter in the function is also const. The implication of this is that no class state can be mutated in this function, and that the function cannot call other non-const member functions.</p>\n\n<p>The function signature itself is overloading the [] operator. The return type for the function is \"const variable_value &amp;\". Overloading the [] operator allows you to index your class by whatever kind of indicies you'd like. Normally, [] is used by arrays to access elements (arr[1] == second element of array). With this overload, the class can be indexed with a string parameter (thatClass[\"SomeString\"]).</p>\n"}], "owner": {"reputation": 6312, "user_id": 546901, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a897e1dc1e5b960e8dd7dc8f8bfc9ab?s=128&d=identicon&r=PG", "display_name": "Brendan Weinstein", "link": "https://stackoverflow.com/users/546901/brendan-weinstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1514400782, "creation_date": 1514400497, "last_edit_date": 1514400765, "question_id": 47997195, "link": "https://stackoverflow.com/questions/47997195/what-is-being-returned-and-what-is-being-taken-in-the-function-described-by-this", "title": "What is being returned and what is being taken in the function described by this documentation?", "body": "<p>I am looking at this documentation from <a href=\"http://www.boost.org/doc/libs/1_54_0/doc/html/boost/program_options/variables_map.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_54_0/doc/html/boost/program_options/variables_map.html</a></p>\n\n<pre><code>const variable_value &amp; operator[](const std::string &amp; name) const;\n</code></pre>\n\n<p>I am looking at this to evaluate the logic of a c++ project. You cannot return an array from a function in c++, so I am confused about what the square brackets are for preceding the parameter list. I am also confused about why there is a const after the trailing list.</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1514400387, "post_id": 47997163, "comment_id": 82962410, "body": "If the interfaces you want to use are based on <code>char</code>, why would you use <code>std::byte</code>?"}, {"owner": {"reputation": 1025, "user_id": 5736791, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UiEMQ.png?s=128&g=1", "display_name": "Enn Michael", "link": "https://stackoverflow.com/users/5736791/enn-michael"}, "edited": false, "score": 0, "creation_date": 1514404229, "post_id": 47997163, "comment_id": 82963950, "body": "@NeilButterworth I thought explicitness was one of the reasons <code>std::byte</code> came to existence? I.e., saying &quot;this thing here is a <i>byte</i>, not a <i>character</i>.&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1514404523, "post_id": 47997163, "comment_id": 82964067, "body": "But in your case your interfaces seem to be  expecting characters, not bytes. If you think writing code that will require reinterpret_casts all over the place is a good idea, then I have to disagree, no matter how &quot;explicit&quot; it might be."}, {"owner": {"reputation": 1025, "user_id": 5736791, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UiEMQ.png?s=128&g=1", "display_name": "Enn Michael", "link": "https://stackoverflow.com/users/5736791/enn-michael"}, "edited": false, "score": 2, "creation_date": 1514407547, "post_id": 47997163, "comment_id": 82965210, "body": "No; the interfaces expect bytes, but given that they&#39;re legacy interfaces, they have no better way to express this than <code>char</code>. Do you seriously think that libpng functions expect the <i>characters</i> of an image rather than the <i>bytes</i> of an image? Also, I see nothing wrong with having a nice interface and (correct and well-defined) <code>reinterpret_cast</code>s in your implementation. I&#39;d probably have a function called <code>as_characters</code> or sth do the <code>reinterpret_cast</code>ing anyways, rather than spamming the ugly <code>reinterpret_cast</code> as is."}], "answers": [{"comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 1, "creation_date": 1514400832, "post_id": 47997246, "comment_id": 82962593, "body": "Note that this is only valid if the vector&#39;s size is non-zero."}, {"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 1, "creation_date": 1514400908, "post_id": 47997246, "comment_id": 82962630, "body": "Using C casts should be discouraged in modern C++ code. Use <code>reinterpret_cast</code> instead."}, {"owner": {"reputation": 1025, "user_id": 5736791, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UiEMQ.png?s=128&g=1", "display_name": "Enn Michael", "link": "https://stackoverflow.com/users/5736791/enn-michael"}, "edited": false, "score": 0, "creation_date": 1514401205, "post_id": 47997246, "comment_id": 82962747, "body": "Is this solution portable?"}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1514400790, "creation_date": 1514400790, "answer_id": 47997246, "question_id": 47997163, "link": "https://stackoverflow.com/questions/47997163/how-to-use-interfaces-that-expect-const-char-if-im-working-with-stdbytes/47997246#47997246", "title": "How to use interfaces that expect `const char*` if I&#39;m working with `std::byte`s", "body": "<p>If you insist on using std::byte you'll have to cast when passing to something that expects the elements to be char:</p>\n\n<pre><code>(char const *)&amp;myVec[0]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1514403643, "post_id": 47997677, "comment_id": 82963712, "body": "No style guide should ever suggest the double-cast."}], "tags": [], "owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "is_accepted": true, "score": 2, "last_activity_date": 1514403258, "creation_date": 1514403258, "answer_id": 47997677, "question_id": 47997163, "link": "https://stackoverflow.com/questions/47997163/how-to-use-interfaces-that-expect-const-char-if-im-working-with-stdbytes/47997677#47997677", "title": "How to use interfaces that expect `const char*` if I&#39;m working with `std::byte`s", "body": "<p>Given a contiguous buffer of <code>std::byte</code>s, a reinterpretation of a <code>std::byte*</code> to a <code>char*</code> is legal by design and doesn't violate the strict aliasing rule:</p>\n\n<p>(<a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0298r3.pdf\" rel=\"nofollow noreferrer\">wording from the most recent revision of the <code>std::byte</code> proposal</a>)</p>\n\n<blockquote>\n  <p>Lvalues and rvalues [basic.lval]</p>\n  \n  <ol start=\"8\">\n  <li><p>If a program attempts to access the stored value of an object through a glvalue of other than one of the following types the behavior is undefined:</p>\n  \n  <ul>\n  <li><p>[...]</p></li>\n  <li><p>(8.8) a <code>char</code>, <code>unsigned char</code>, or <code>std::byte</code> type.</p></li>\n  </ul></li>\n  </ol>\n</blockquote>\n\n<p>(note: the \"or <code>std::byte</code>\" is added by the proposal)</p>\n\n<p>So you can use <code>reinterpret_cast&lt;const char*&gt;(pointer_to_std_byte_buffer)</code> or <code>static_cast&lt;const char*&gt;(static_cast&lt;const void*&gt;(pointer_to_std_byte_buffer))</code> or <code>(const char*)pointer_to_std_byte_buffer</code>, depending on what your style guide says.</p>\n"}], "owner": {"reputation": 1025, "user_id": 5736791, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UiEMQ.png?s=128&g=1", "display_name": "Enn Michael", "link": "https://stackoverflow.com/users/5736791/enn-michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 47997677, "answer_count": 2, "score": 0, "last_activity_date": 1514403258, "creation_date": 1514400274, "question_id": 47997163, "link": "https://stackoverflow.com/questions/47997163/how-to-use-interfaces-that-expect-const-char-if-im-working-with-stdbytes", "title": "How to use interfaces that expect `const char*` if I&#39;m working with `std::byte`s", "body": "<p>With C++17 <code>std::byte</code> was added. However, all these legacy interfaces expect <code>const char*</code> for an array of bytes (for example, libpng does). If I'm representing bytes in my code as a container of <code>std::byte</code> objects (for example, <code>std::vector&lt;std::byte&gt;</code>), how do I make use of these interfaces?</p>\n"}, {"tags": ["c++", "gcc"], "answers": [{"comments": [{"owner": {"reputation": 4446, "user_id": 576448, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hVxvC.jpg?s=128&g=1", "display_name": "peterk", "link": "https://stackoverflow.com/users/576448/peterk"}, "edited": false, "score": 0, "creation_date": 1514400128, "post_id": 47997122, "comment_id": 82962311, "body": "meaning it will determine it is a library by looking at the suffix ?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 4446, "user_id": 576448, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hVxvC.jpg?s=128&g=1", "display_name": "peterk", "link": "https://stackoverflow.com/users/576448/peterk"}, "edited": false, "score": 0, "creation_date": 1514400216, "post_id": 47997122, "comment_id": 82962345, "body": "@peterk: No, Unix usually doesn&#39;t work with file suffices.  It will determine it is a library by looking at the structure of the file."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1514400649, "post_id": 47997122, "comment_id": 82962513, "body": "@MartinBonner Wouldn&#39;t GCC lookup the corresponding stub <code>.a</code> file automatically in turn?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1514407924, "post_id": 47997122, "comment_id": 82965333, "body": "@user0042 I don&#39;t think there is a stub .a file. It&#39;s not like .dll/.lib on Windows."}, {"owner": {"reputation": 4446, "user_id": 576448, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hVxvC.jpg?s=128&g=1", "display_name": "peterk", "link": "https://stackoverflow.com/users/576448/peterk"}, "edited": false, "score": 0, "creation_date": 1514424064, "post_id": 47997122, "comment_id": 82969541, "body": "passing an absolute path without the leading -l works fine.  BUT the files must have it&#39;s included &quot;lib&quot; prefix and &quot;a&quot; or &quot;so&quot; suffix.  I was unable to find any documented difference in the behavior of &quot;-lpath&quot; and just the path for absolute paths unless it is simply that -l does not take absolute paths and ignore the library search path in that case but this is not stated in the man page."}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 1, "last_activity_date": 1514400078, "creation_date": 1514400078, "answer_id": 47997122, "question_id": 47997060, "link": "https://stackoverflow.com/questions/47997060/what-is-gcc-behavior-for-specifying-libraries-with-absolute-paths/47997122#47997122", "title": "What is GCC behavior for specifying libraries with absolute paths", "body": "<p>I would say in this case don't use -l, just pass the full library path as part of the command:\n gcc (other options) /path/to/library.so</p>\n"}, {"tags": [], "owner": {"reputation": 4446, "user_id": 576448, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hVxvC.jpg?s=128&g=1", "display_name": "peterk", "link": "https://stackoverflow.com/users/576448/peterk"}, "is_accepted": false, "score": 0, "last_activity_date": 1514427020, "last_edit_date": 1514427020, "creation_date": 1514426696, "answer_id": 48000782, "question_id": 47997060, "link": "https://stackoverflow.com/questions/47997060/what-is-gcc-behavior-for-specifying-libraries-with-absolute-paths/48000782#48000782", "title": "What is GCC behavior for specifying libraries with absolute paths", "body": "<p>Note: this is with gcc (Raspbian 4.9.2-10) 4.9.2 I'm getting a library set built for it.</p>\n\n<p>Ok - much banging on it and testing different cases</p>\n\n<p>Using the full path as an argument to GCC apparently burns in hard coded absolute path to the library which is used at run time to resolve where it is.  This is not desired as the app is intended to be deployed with searchable shared libraries that might end up in different places.</p>\n\n<pre><code>-llibmyLib.so   does not work with a search path. \n-lmyLib         does work with a search path \n     ( with lib prefix and suffix removed - apparently \n       it tries all available suffi and prepends \"lib\" for it's \n       search by default )\n</code></pre>\n\n<p>-</p>\n\n<pre><code>-l:libmyLib.so   DOES work with a search path, \n               as ':' specifies the file name is not to be altered.\n\n-l:debug/libmyLib.so DOES work ( a  subdir under the search path )\n-l:release/libmyLib.so DOES work ( a subdir under the search path )\n</code></pre>\n\n<p>With this info - (apparently) knowing what it does I can now move forward !!</p>\n"}], "owner": {"reputation": 4446, "user_id": 576448, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hVxvC.jpg?s=128&g=1", "display_name": "peterk", "link": "https://stackoverflow.com/users/576448/peterk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1514427020, "creation_date": 1514399725, "last_edit_date": 1514424982, "question_id": 47997060, "link": "https://stackoverflow.com/questions/47997060/what-is-gcc-behavior-for-specifying-libraries-with-absolute-paths", "title": "What is GCC behavior for specifying libraries with absolute paths", "body": "<p>GCC (linking) was barfing that it could not find a library when specified with an absolute path.  Note the reason I want this is I have a build system that keeps all libraries resolved by absolute path so it can keep an ordered set of unique entries.</p>\n\n<pre><code>g++ (...) -l/path/to/library.so\n</code></pre>\n\n<p>I saw a bug report where some people thought it was a bug, and others thought the fact it ever worked was a bug, and it was fixed.</p>\n\n<p>There was some discussion that one had to precede the path with a ':'</p>\n\n<p>Anyway didn't make it work.</p>\n\n<p>So to test in the build system I put code in to truncate the absolute library path if it's \"prefix\" matched any of the library paths specified to GCC and truncate the absolute library path.</p>\n\n<pre><code>g++ (...) -L/path/to -llibrary.so\n</code></pre>\n\n<p>This worked.<br>\nI also tried this.</p>\n\n<pre><code>g++ (...) -L/path/to -l/path/to/library.so\n</code></pre>\n\n<p>and it worked. 9 (though investigating .. looks like this was an error in the build script )</p>\n\n<p>It seems possibly if any of the search paths specified for GCC are a \"prefix\" to a library specified with an absolute path it finds the library.  I would also assume it takes the first hit in the ordered list of library paths supplied.</p>\n\n<p>So my questions.</p>\n\n<ul>\n<li>Is this supported behavior?</li>\n<li>Is it better in this to truncate the absolute library path in the build script or pass in the absolute path.</li>\n</ul>\n\n<p>I notices some related issues brought up here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/207069/how-to-link-using-gcc-without-l-nor-hardcoding-path-for-a-library-that-does-not?rq=1\">How to link using GCC without -l nor hardcoding path for a library that does not follow the libNAME.so naming convention?</a></p>\n\n<p>This indicates a \"non searched\" full path is \"burned in\" to an executable thus overriding any runtime library path when it is executed?  Is this correct ?  If so it means specifying the library with the full path on the command line is not appropriate.  On deployment the built app and associated libraries would be installed in standard searchable locations.</p>\n"}, {"tags": ["c++", "arrays", "file"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 6, "creation_date": 1514398778, "post_id": 47996847, "comment_id": 82961759, "body": "Things like <code>int load[sizeLoad+1];</code> are not valid C++. Don&#39;t use an array, use a std::vector."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1514399490, "post_id": 47996847, "comment_id": 82962061, "body": "Highly recommended read: <a href=\"https://stackoverflow.com/questions/46991224/are-there-any-valid-use-cases-to-use-new-and-delete-raw-pointers-or-c-style-arr\" title=\"are there any valid use cases to use new and delete raw pointers or c style arr\">stackoverflow.com/questions/46991224/&hellip;</a> !"}, {"owner": {"reputation": 50669, "user_id": 1711796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6pRI7.png?s=128&g=1", "display_name": "Bernhard Barker", "link": "https://stackoverflow.com/users/1711796/bernhard-barker"}, "edited": false, "score": 0, "creation_date": 1514399706, "post_id": 47996847, "comment_id": 82962151, "body": "You should probably just use <code>&lt;&lt;</code> and <code>&gt;&gt;</code> to write to and read from file instead of treating the array as a <code>char*</code> - it&#39;s much simpler and less prone to error."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1514399979, "post_id": 47996847, "comment_id": 82962251, "body": "Note that <code>ofstream fileWrite; fileWrite.open (...);</code> can be written more simply as <code>ofstream fileWrite(...);</code>. That&#39;s what the constructor is for. Also, the destructor for <code>ofstream</code> closes the file, so calling <code>fileWrite.close()</code> is not necessary. Same for <code>fileRead</code>."}], "answers": [{"comments": [{"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "reply_to_user": {"reputation": 50669, "user_id": 1711796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6pRI7.png?s=128&g=1", "display_name": "Bernhard Barker", "link": "https://stackoverflow.com/users/1711796/bernhard-barker"}, "edited": false, "score": 0, "creation_date": 1514400626, "post_id": 47996934, "comment_id": 82962497, "body": "Every third code with tag c++ uses VLA on this page, but only I got downvote."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1514400748, "post_id": 47996934, "comment_id": 82962558, "body": "&quot;This appears to be correct&quot; - no, it appears to be incorrect (it&#39;s not C++) - hence the downvotes."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1514400846, "post_id": 47996934, "comment_id": 82962601, "body": "&quot;Every third code with tag c++ uses VLA on this page, but only I got downvote. &quot; - nonsense."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 50669, "user_id": 1711796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6pRI7.png?s=128&g=1", "display_name": "Bernhard Barker", "link": "https://stackoverflow.com/users/1711796/bernhard-barker"}, "edited": false, "score": 0, "creation_date": 1514401152, "post_id": 47996934, "comment_id": 82962720, "body": "@Duke You are &quot;allowed&quot; to use them if you want to limit your portability, but this question was tagged C++, not GCC."}], "tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": false, "score": -2, "last_activity_date": 1514399067, "creation_date": 1514399067, "answer_id": 47996934, "question_id": 47996847, "link": "https://stackoverflow.com/questions/47996847/how-to-save-an-array-into-a-file-in-c/47996934#47996934", "title": "How to save an array into a file in C++?", "body": "<p>You have read one element, </p>\n\n<pre><code>fileRead.read((char *) &amp;load, sizeof(int));   // load[0] was read\n</code></pre>\n\n<p>which was not printed</p>\n\n<pre><code>    for(int i = 1; i &lt;= sizeLoad; i++) cout &lt;&lt; \"Element \" &lt;&lt; i &lt;&lt; \": \" &lt;&lt; load[i] &lt;&lt; endl;\n</code></pre>\n\n<p>You should read full array using </p>\n\n<pre><code>int load[sizeLoad];  //creating the array\nfileRead.read((char *) &amp;load, sizeof(load));\n</code></pre>\n\n<p>and print all elements in this way </p>\n\n<pre><code>   for(int i = 0; i &lt; sizeLoad; i++) cout &lt;&lt; \"Element \" &lt;&lt; i &lt;&lt; \": \" &lt;&lt; load[i] &lt;&lt; endl;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 9146312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7eb8576dfb60d026a44ac6ad2832f10?s=128&d=identicon&r=PG&f=1", "display_name": "Cnoob", "link": "https://stackoverflow.com/users/9146312/cnoob"}, "edited": false, "score": 0, "creation_date": 1514402052, "post_id": 47997368, "comment_id": 82963068, "body": "Oh thanks! I don&#180;t really understand a few lines of your code but I will try to figure out wat they do."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1514402070, "post_id": 47997368, "comment_id": 82963072, "body": "This is not a complete answer. You need to explain what you changed and why you changed it. Also doesn&#39;t replicate the intent of the askers code correctly. It compiles and runs, but does something slightly different."}], "tags": [], "owner": {"reputation": 13, "user_id": 6258268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11ee230ce6d65cfca1ee096be381b9bd?s=128&d=identicon&r=PG&f=1", "display_name": "yenicead", "link": "https://stackoverflow.com/users/6258268/yenicead"}, "is_accepted": false, "score": -1, "last_activity_date": 1514411196, "last_edit_date": 1514411196, "creation_date": 1514401537, "answer_id": 47997368, "question_id": 47996847, "link": "https://stackoverflow.com/questions/47996847/how-to-save-an-array-into-a-file-in-c/47997368#47997368", "title": "How to save an array into a file in C++?", "body": "<p>I changed your code, and it works. Try following;</p>\n\n<pre><code>int saveSize = 5;   //size of the array\nint save[saveSize + 1] = {saveSize, 7, 1, 2 ,3, 4};  //creating an array which first element is his own size\nofstream fileWrite(\"File.dat\", ios::out | ios::binary | ios::trunc); \nfileWrite.write(reinterpret_cast&lt;char*&gt;(&amp;save), sizeof save );  //saves the array into the file\nfileWrite.close();\n\nint sizeLoad[saveSize+1];  //size of the array that will be loaded\nifstream fileRead(\"File.dat\", ios::in | ios::binary);\nfileRead.read(reinterpret_cast&lt;char*&gt;(&amp;sizeLoad), sizeof sizeLoad );  //it only reads the first element to know the size of the array\nfileRead.close();\n\n//showing the array\nfor(int i = 0; i &lt; (sizeof(sizeLoad)/sizeof(sizeLoad[0])); i++) \n    cout &lt;&lt; \"Element \" &lt;&lt; i + 1 &lt;&lt; \": \" &lt;&lt; sizeLoad[i] &lt;&lt; endl;\n\nreturn 0;\n</code></pre>\n\n<p><strong>Edit :</strong> I try to explain unclear parts. In the 3.line you created \".dat\" file and next line you put every number in the array to that file. \n<em>ofstream.write</em> function takes two parameters, the first parameters should be characters so I cast array to char, second parameter should be size of array (How many characters you will write). In your case your array contains 6 numbers and your array size is 24 (Each int value 4 byte). While writing array to console, you need to know your size of array so I simply divide the array size (24) to 1 array character (4). Sorry for my bad explanation and thanks for caution.</p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 9146312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7eb8576dfb60d026a44ac6ad2832f10?s=128&d=identicon&r=PG&f=1", "display_name": "Cnoob", "link": "https://stackoverflow.com/users/9146312/cnoob"}, "edited": false, "score": 0, "creation_date": 1515448628, "post_id": 48002160, "comment_id": 83296747, "body": "Wow, that is exactly what I was looking for, and much more simpler... Thanks! :D"}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": true, "score": 1, "last_activity_date": 1514440098, "last_edit_date": 1514440098, "creation_date": 1514439662, "answer_id": 48002160, "question_id": 47996847, "link": "https://stackoverflow.com/questions/47996847/how-to-save-an-array-into-a-file-in-c/48002160#48002160", "title": "How to save an array into a file in C++?", "body": "<pre><code>fileRead.read((char *) &amp;sizeLoad, sizeof(int))\nfileRead.read((char*)&amp;load, sizeof(int));\n</code></pre>\n\n<p>You read <code>sizeLoad</code> which is 5. </p>\n\n<p>In the second line you intend to read 5 integers, therefore it should be changed to </p>\n\n<pre><code>int load[sizeLoad];\nfileRead.read((char*)&amp;load, sizeLoad * sizeof(int));\n</code></pre>\n\n<p>You also need to change the loop, only go from <code>0</code> to <code>sizeLoad</code></p>\n\n<pre><code>for(int i = 0; i &lt; sizeLoad; i++) \n    cout &lt;&lt; \"Element \" &lt;&lt; i &lt;&lt; \": \" &lt;&lt; load[i] &lt;&lt; endl;\n</code></pre>\n\n<p>Alternatively you can use <code>std::vector</code>, then you don't have to save the number of items in advance. You can read integers one at a time and use <code>std::push_back</code> to add elements to the array. Example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n    std::vector&lt;int&gt; save = { 7, 1, 2, 3, 4 };\n    std::ofstream fileWrite(\"File.dat\", std::ios::binary | std::ios::trunc);\n    fileWrite.write((char*)save.data(), save.size() * sizeof(int));\n    fileWrite.close();\n\n    std::ifstream fileRead(\"File.dat\", std::ios::binary);\n    std::vector&lt;int&gt; load;\n    int temp;\n    while(fileRead.read((char*)&amp;temp, sizeof(int)))\n        load.push_back(temp);\n    fileRead.close();\n\n    for(int i = 0; i &lt; load.size(); i++) \n        std::cout &lt;&lt; \"Element \" &lt;&lt; i &lt;&lt; \": \" &lt;&lt; load[i] &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 9146312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7eb8576dfb60d026a44ac6ad2832f10?s=128&d=identicon&r=PG&f=1", "display_name": "Cnoob", "link": "https://stackoverflow.com/users/9146312/cnoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1420, "favorite_count": 0, "accepted_answer_id": 48002160, "answer_count": 3, "score": -2, "last_activity_date": 1514440098, "creation_date": 1514398617, "last_edit_date": 1514399013, "question_id": 47996847, "link": "https://stackoverflow.com/questions/47996847/how-to-save-an-array-into-a-file-in-c", "title": "How to save an array into a file in C++?", "body": "<p>I've created a program that saves an array into a file and then reads the file to show the array on the screen. This is the code</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nint main(void)\n{\n    int saveSize = 5;//size of the array\n    int save [saveSize + 1] = {saveSize, 7, 1, 2 ,3, 4};  //creating an array which first element is his own size\n    ofstream fileWrite; fileWrite.open (\"File.dat\", ios::out | ios::binary | ios::trunc);\n    fileWrite.write((char *) &amp;save, sizeof(save));  //saves the array into the file\n    fileWrite.close();\n\n    int sizeLoad;  //size of the array that will be loaded\n    ifstream fileRead; fileRead.open(\"File.dat\", ios::in | ios::binary);\n    fileRead.read((char *) &amp;sizeLoad, sizeof(int));  //it only reads the first element to know the size of the array\n    int load[sizeLoad+1];  //creating the array\n    fileRead.read((char *) &amp;load, sizeof(int));\n    fileRead.close();\n\n    //showing the array\n    for(int i = 1; i &lt;= sizeLoad; i++) cout &lt;&lt; \"Element \" &lt;&lt; i &lt;&lt; \": \" &lt;&lt; load[i] &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The problem is that when I run the program, that\u00b4s the result:</p>\n\n<p>Element 1: 2686224</p>\n\n<p>Element 2: 1878005308</p>\n\n<p>Element 3: 32</p>\n\n<p>Element 4: 2686232</p>\n\n<p>Element 5: 4199985</p>\n\n<p>Not even close. Somebody knows why it shows that?</p>\n"}, {"tags": ["c++", "windows", "unix"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1514397668, "post_id": 47996616, "comment_id": 82961331, "body": "Start using <code>CMake</code> to generate your projects. Don&#39;t use any OS functionality directly if possible. Use standard c++. If you need some OS functionality see if boost provides what you want. Use git for your code. Don&#39;t put any binaries or even generated files (like project files) in the repository only source code."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1514397844, "post_id": 47996616, "comment_id": 82961400, "body": "Yeah, use <code>cmake</code>.  It&#39;s supported by VS 2017 now, and will help with header differences without having to make things OS-specific.  When that&#39;s unavoidable, put that code into an OS abstraction layer."}, {"owner": {"reputation": 115, "user_id": 2614606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001002984303/picture?type=large", "display_name": "Polda18", "link": "https://stackoverflow.com/users/2614606/polda18"}, "edited": false, "score": 0, "creation_date": 1514401781, "post_id": 47996616, "comment_id": 82962964, "body": "I have VS 2015 Community Edition. Does it support CMake?"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 2614606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001002984303/picture?type=large", "display_name": "Polda18", "link": "https://stackoverflow.com/users/2614606/polda18"}, "edited": false, "score": 0, "creation_date": 1514402218, "post_id": 47996674, "comment_id": 82963139, "body": "Okay, thank you for your tips. Installed CMake 3.10.1 in my Windows machine and going to install it also in my Linux virtual machine..."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 115, "user_id": 2614606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001002984303/picture?type=large", "display_name": "Polda18", "link": "https://stackoverflow.com/users/2614606/polda18"}, "edited": false, "score": 0, "creation_date": 1514404454, "post_id": 47996674, "comment_id": 82964031, "body": "@Polda18 - Linux VM?  I&#39;d check out the <code>WSL</code> feature in Windows 10 if that&#39;s available to you.  It&#39;s...*extremely* convenient for development compared to a VM.  A VM is fine and will work, of course."}, {"owner": {"reputation": 115, "user_id": 2614606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001002984303/picture?type=large", "display_name": "Polda18", "link": "https://stackoverflow.com/users/2614606/polda18"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1514404994, "post_id": 47996674, "comment_id": 82964262, "body": "@zzxyz - Do you mean Ubuntu Shell feature? Mine install got corrupted and shuts down immediately after booting up. Doesn&#39;t even want to uninstall for fix..."}, {"owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "edited": false, "score": 1, "creation_date": 1514409647, "post_id": 47996674, "comment_id": 82965923, "body": "I would add: 7) Follow the C++ standard and avoid Undefined Behaviour constructs. An UB can compile just fine in one compiler/OS but go haywire in another. MSVC has pretty decent support for C++14, but C++17 is still in progress. At the moment Microsoft claims ~75% support of it."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 115, "user_id": 2614606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001002984303/picture?type=large", "display_name": "Polda18", "link": "https://stackoverflow.com/users/2614606/polda18"}, "edited": false, "score": 0, "creation_date": 1514411416, "post_id": 47996674, "comment_id": 82966562, "body": "@Polda18 yeah. That whole install sits in one Windows directory, so you can just clobber it. Worth a 2nd look. I\u2019m happy with it and not the only one."}, {"owner": {"reputation": 115, "user_id": 2614606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001002984303/picture?type=large", "display_name": "Polda18", "link": "https://stackoverflow.com/users/2614606/polda18"}, "edited": false, "score": 0, "creation_date": 1514463253, "post_id": 47996674, "comment_id": 82982823, "body": "Well, I do not own a CI server, and CI server host is pretty much expensive for me. I&#39;ll stay with manual tests. It&#39;s pretty small utility, more like terminal tool rather than command line utility. All it&#39;s supposed to do is just control a wikibot."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 115, "user_id": 2614606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001002984303/picture?type=large", "display_name": "Polda18", "link": "https://stackoverflow.com/users/2614606/polda18"}, "edited": false, "score": 0, "creation_date": 1514482713, "post_id": 47996674, "comment_id": 82992313, "body": "@Polda18 nothing is stopping you from running CI (like a Jenkins or BuildBot server) on your local workstation, with the build-slaves being Virtual Machines that are spun up on demand. A CI system is (IMHO) a must have, even if everything is running locally."}, {"owner": {"reputation": 115, "user_id": 2614606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001002984303/picture?type=large", "display_name": "Polda18", "link": "https://stackoverflow.com/users/2614606/polda18"}, "edited": false, "score": 0, "creation_date": 1514488478, "post_id": 47996674, "comment_id": 82994759, "body": "@JesperJuhl Well, I&#39;ve been searching through Google for pretty reasonable time and found nothing I can work with :( How can I set up personal CI localhost server?"}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 3, "last_activity_date": 1514398708, "last_edit_date": 1514398708, "creation_date": 1514397815, "answer_id": 47996674, "question_id": 47996616, "link": "https://stackoverflow.com/questions/47996616/microsoft-visual-studio-windows-and-unix-project-source-code-compatibility/47996674#47996674", "title": "Microsoft Visual Studio: Windows and Unix project source code compatibility", "body": "<p>Step 1) set up your continuous integration system to build the code on Windows and Unix every time from day one. Preferably with multiple compilers on each platform.</p>\n\n<p>Step 2) Use a cross-platform build system like <a href=\"http://scons.org\" rel=\"nofollow noreferrer\">scons</a> or <a href=\"https://cmake.org\" rel=\"nofollow noreferrer\">cmake</a>.</p>\n\n<p>Step 3) Don't use <em>any</em> platform specific code in your program at all - and when you <em>have</em> to, implement multiple versions under various <code>ifdef</code> guards. Prefer using cross-platform libraries instead.</p>\n\n<p>Step 4) make sure you have plenty of unit tests (<em>especially</em> for the bits where you had to implement something multiple times using platform specific code) and make sure your CI system runs <em>all</em> the tests for every commit.</p>\n\n<p>Step 5) Make sure all text is UTF-8 encoded from day one - conversion to other encodings <em>can</em> happen at the display layer, but keep everything UTF-8 clean internally.</p>\n\n<p>Step 6) Do extensive manual testing on all supported platforms.</p>\n\n<p>And make sure to tweak every compilers warning setting waaay up and make warnings errors (and fix all such errors). What's a warning with one compiler on one platform can often be silently miscompiled code with a different compiler on another platform.</p>\n"}, {"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1514397967, "creation_date": 1514397967, "answer_id": 47996709, "question_id": 47996616, "link": "https://stackoverflow.com/questions/47996616/microsoft-visual-studio-windows-and-unix-project-source-code-compatibility/47996709#47996709", "title": "Microsoft Visual Studio: Windows and Unix project source code compatibility", "body": "<p>First, the windows console can use utf-16 but not utf-8. Second, if you stick to the standard c++ library, possibly extended with boost (which will have to be installed both on windows and any *nix system you are going to build on) you really should not have any problems so long as you are talking about strictly accepting command line arguments performing work and printing results.</p>\n\n<p>If you are talking about terminal control (that is, printing on the screen somewhere other than the next character cell, in particular going backward) this is going to be quite a bit more difficult.</p>\n\n<p>I would, however, suggest that you use a cmake based project, Visual Studio normally uses the custom msbuild build manager and that is not going to help if you try building on a *nix system.</p>\n"}], "owner": {"reputation": 115, "user_id": 2614606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001002984303/picture?type=large", "display_name": "Polda18", "link": "https://stackoverflow.com/users/2614606/polda18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 1, "accepted_answer_id": 47996674, "answer_count": 2, "score": 2, "last_activity_date": 1514398708, "creation_date": 1514397407, "question_id": 47996616, "link": "https://stackoverflow.com/questions/47996616/microsoft-visual-studio-windows-and-unix-project-source-code-compatibility", "title": "Microsoft Visual Studio: Windows and Unix project source code compatibility", "body": "<p>I'm going to develop a command line tool for both Windows and Unix OS architectures. However I'm facing a struggle. How can I make the code effectively transferrable between Windows and Unix?</p>\n\n<p>Project is going to be made in C++ language using primarily MS Visual Studio. However I want my tool be cross-platform, so I can use it both in Windows and Unix systems. Since Unix doesn't support Visual Studio, I need to somewhat design the code structure to support both architectures (both being 32bit) and OS-specific headers need to be included for just the only one OS architecture the code is built in.</p>\n\n<p>So I am asking for your help. What is the most effective way to maintain pretty much the same code for both Windows and Unix, with all neccessary headers for that particular OS? So I can create program.exe file in Windows and program.run file in Unix? Some conditions to test current OS architecture (Windows or Unix) and include OS-dependent headers?</p>\n\n<p>What about encoding? Because Windows command line uses MS-DOS encoding (In Central Europe, it's DOS codepage 852), and Unix terminal uses UTF-8 encoding. My tool will be multilingual (with contributors, starting with English and Czech languages from my side).</p>\n\n<p>I need to keep the code structure as small as possible, and of course easily maintainable. The source code shall be available for clone/fork from GitHub repository.</p>\n\n<p>If this is not the kind of question apropriate for Stack Overflow, then just tell and I'll delete it. Just asking for help, nothing else.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1514397910, "post_id": 47996550, "comment_id": 82961421, "body": "which version of C++, 14 or 17?"}, {"owner": {"reputation": 609, "user_id": 2057542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e487d60098ccab80bf014ad524740612?s=128&d=identicon&r=PG", "display_name": "Ambarish Sridharanarayanan", "link": "https://stackoverflow.com/users/2057542/ambarish-sridharanarayanan"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1514398214, "post_id": 47996550, "comment_id": 82961542, "body": "This is for a personal project, so even c++2x is fine."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1514398262, "post_id": 47996550, "comment_id": 82961555, "body": "Had the same problem before, same solution applies. <a href=\"https://stackoverflow.com/questions/24468397/a-timer-for-arbitrary-functions\" title=\"a timer for arbitrary functions\">stackoverflow.com/questions/24468397/&hellip;</a> It&#39;s just C++11 though, could probably be modernized."}, {"owner": {"reputation": 982, "user_id": 5314692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772574311ed4da5b181c0134a99dda29?s=128&d=identicon&r=PG&f=1", "display_name": "Semyon Burov", "link": "https://stackoverflow.com/users/5314692/semyon-burov"}, "edited": false, "score": 0, "creation_date": 1514406758, "post_id": 47996550, "comment_id": 82964909, "body": "Have you looked into <code>std::invoke</code>? Looks like exactly that you need"}, {"owner": {"reputation": 609, "user_id": 2057542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e487d60098ccab80bf014ad524740612?s=128&d=identicon&r=PG", "display_name": "Ambarish Sridharanarayanan", "link": "https://stackoverflow.com/users/2057542/ambarish-sridharanarayanan"}, "reply_to_user": {"reputation": 982, "user_id": 5314692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772574311ed4da5b181c0134a99dda29?s=128&d=identicon&r=PG&f=1", "display_name": "Semyon Burov", "link": "https://stackoverflow.com/users/5314692/semyon-burov"}, "edited": false, "score": 1, "creation_date": 1514423064, "post_id": 47996550, "comment_id": 82969337, "body": "@SemyonBurov how will <code>std::invoke</code> help me here?"}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1514414738, "post_id": 47996691, "comment_id": 82967475, "body": "For RVO: I&#39;d misread a key part of the code. RVO should work fine."}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1514462704, "post_id": 47996691, "comment_id": 82982506, "body": "What is RVO...?"}, {"owner": {"reputation": 2916, "user_id": 3646096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KUofm.jpg?s=128&g=1", "display_name": "M&#225;rio Feroldi", "link": "https://stackoverflow.com/users/3646096/m%c3%a1rio-feroldi"}, "reply_to_user": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1514745138, "post_id": 47996691, "comment_id": 83060787, "body": "@PeterMortensen, Return Value Optimization."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1514480096, "last_edit_date": 1514480096, "creation_date": 1514397887, "answer_id": 47996691, "question_id": 47996550, "link": "https://stackoverflow.com/questions/47996550/handling-void-assignment-in-c-generic-programming/47996691#47996691", "title": "Handling void assignment in C++ generic programming", "body": "<p>This is pretty awkward and not extendable solution but very short and simple and it supports <a href=\"https://en.wikipedia.org/wiki/Copy_elision\" rel=\"nofollow noreferrer\">RVO</a> which could be significant for some return types:</p>\n\n<pre><code>template &lt;typename F&gt;\nauto wrapAndRun(F fn) -&gt; decltype(F()) {\n    // foo();\n    char c;\n    auto runner = std::unique_ptr&lt;char, decltype(bar)&gt;( &amp;c, bar );\n    try {\n        return fn();\n    }\n    catch( ... ) {\n        runner.release();\n        throw;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1514399212, "post_id": 47996782, "comment_id": 82961937, "body": "I like your solution better but are there some limitations on returned type based on fact it must be stored in your case?"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1514399782, "post_id": 47996782, "comment_id": 82962189, "body": "Sorry, what exactly is the limitation? It just needs to be movable (let me add a std::move)."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1514404292, "post_id": 47996782, "comment_id": 82963975, "body": "Maybe not limitations but differences, for example I am not sure destructor of <code>T</code> can be avoided in your case as RVO cannot be applied"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1514406621, "post_id": 47996782, "comment_id": 82964853, "body": "@Slava That&#39;s a good point. An alternative would be write a function instead, <code>callAndReturn</code>, that takes two lambdas, with two overloads. Call the first lambda, store the result if non-void type, then call the second. This scales well (better than other answers) if <code>bar()</code> is actually a standin for a few lines of code."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1514435933, "post_id": 47996782, "comment_id": 82971767, "body": "You can also use functions to do the type deduction without having to wait for type deduction for constructors"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1514472499, "post_id": 47996782, "comment_id": 82987335, "body": "@Curious Yeah, In that case though I&#39;d want to be sure it doesn&#39;t trigger any more un-elided moves of the return type. I&#39;ve already introduced one extra move here, definitely don&#39;t want to introduce another."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1514481141, "post_id": 47996782, "comment_id": 82991610, "body": "@NirFriedman you don&#39;t need any of that, even with C++14, <a href=\"https://wandbox.org/permlink/EaThZXFeddyi4oEv\" rel=\"nofollow noreferrer\">wandbox.org/permlink/EaThZXFeddyi4oEv</a> Also the <code>decltype(F())</code> could be improved for the same reason <code>result_of</code> is deprecated.  See how I get the return type in the linked code"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 1, "creation_date": 1514482569, "post_id": 47996782, "comment_id": 82992258, "body": "@Curious Nice trick, I agree that&#39;s strictly better. Feel free to edit the answer to include your improvements (and delete my comment about deduction guides)."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 1, "creation_date": 1514489509, "post_id": 47996782, "comment_id": 82995210, "body": "@Curious I added your improvements to my answer, thanks!"}], "tags": [], "owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "is_accepted": false, "score": 22, "last_activity_date": 1514491479, "last_edit_date": 1514491479, "creation_date": 1514398339, "answer_id": 47996782, "question_id": 47996550, "link": "https://stackoverflow.com/questions/47996550/handling-void-assignment-in-c-generic-programming/47996782#47996782", "title": "Handling void assignment in C++ generic programming", "body": "<p>You can write a simple wrapper class that handles this part of it:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct CallAndStore {\n    template &lt;class F&gt;\n    CallAndStore(F f) : t(f()) {}\n    T t;\n    T get() { return std::forward&lt;T&gt;(t); }\n};\n</code></pre>\n\n<p>And specialize:</p>\n\n<pre><code>template &lt;&gt;\nstruct CallAndStore&lt;void&gt; {\n    template &lt;class F&gt;\n    CallAndStore(F f) { f(); }\n    void get() {}\n};\n</code></pre>\n\n<p>You can improve usability with a small factory function:</p>\n\n<pre><code>template &lt;typename F&gt;\nauto makeCallAndStore(F&amp;&amp; f) -&gt; CallAndStore&lt;decltype(std::declval&lt;F&gt;()())&gt; {\n    return {std::forward&lt;F&gt;(f)};\n}\n</code></pre>\n\n<p>Then use it.</p>\n\n<pre><code>template &lt;typename F&gt;\nauto wrapAndRun(F fn) {\n    // foo();\n    auto&amp;&amp; result = makeCallAndStore(std::move(fn));\n    // bar();\n    return result.get();\n}\n</code></pre>\n\n<p>Edit: with the <code>std::forward</code> cast inside <code>get</code>, this also seems to handle returning a reference from a function correctly.</p>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1514398652, "post_id": 47996823, "comment_id": 82961712, "body": "I think OP wants to run <code>bar()</code> in case <code>fn()</code> return type is void"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1514398691, "post_id": 47996823, "comment_id": 82961733, "body": "Not sure why the top enable_if seems to have some repetition? I think in any case the answer would benefit from writing a separate <code>returns_void</code> trait. Though, the significant disadvantage here is that you have to repeat <code>foo</code> and <code>bar</code> in two places (and indeed one was already forgotten)."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1514398760, "post_id": 47996823, "comment_id": 82961750, "body": "Code repetition is ugly and I do not think that is a good solution if can be avoided."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1514457393, "post_id": 47996823, "comment_id": 82980027, "body": "@Nir Friedman - I have removed duplications. I think it looks quite nice now."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1514472951, "post_id": 47996823, "comment_id": 82987565, "body": "@marcinj Sorry to be a pedant, but I&#39;m a bit concerned that when the passed function returns void, the wrapper still returns <code>0</code>. This might be &quot;good enough&quot; for the OP but I feel like it&#39;s not optimal; could prevent catching a mistake at compile time."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1514478862, "post_id": 47996823, "comment_id": 82990475, "body": "@Nir Friedman I understand, I have updated answer - now it returns the same type as the wrapped function has."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1514480560, "post_id": 47996823, "comment_id": 82991350, "body": "If you are already using <code>if constexpr</code>, how about this: <a href=\"http://coliru.stacked-crooked.com/a/705050e725bc72e9\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/705050e725bc72e9</a>? Looks pretty good! Though this still doesn&#39;t handle functions returning reference types. Either way, have an upvote :-)."}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": false, "score": 4, "last_activity_date": 1514478792, "last_edit_date": 1514478792, "creation_date": 1514398522, "answer_id": 47996823, "question_id": 47996550, "link": "https://stackoverflow.com/questions/47996550/handling-void-assignment-in-c-generic-programming/47996823#47996823", "title": "Handling void assignment in C++ generic programming", "body": "<p>Solution with SFINAE, the idea is to make internally a void function actually return int - hopefully the compiler will optimize this away. On outside <code>wrapAndRun</code> will return the same type as a wrapped function.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/e84ff8f74b3b6051\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/e84ff8f74b3b6051</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename F&gt;\nauto wrapAndRun1(F fn) -&gt; std::enable_if_t&lt;!std::is_same_v&lt;std::result_of_t&lt;F()&gt;, void&gt;, std::result_of_t&lt;F()&gt;&gt; {\n    return fn();\n}\n\n\ntemplate &lt;typename F&gt;\nauto wrapAndRun1(F fn) -&gt; std::enable_if_t&lt;std::is_same_v&lt;std::result_of_t&lt;F()&gt;, void&gt;, int&gt; {\n    fn();\n    return 0;\n}\n\ntemplate &lt;typename F&gt;\nauto wrapAndRun(F fn) -&gt; std::result_of_t&lt;F()&gt; {\n    // foo();\n    [[maybe_unused]] auto result = wrapAndRun1(fn);    \n    // bar();        \n    if constexpr (std::is_void_v&lt;std::result_of_t&lt;F()&gt;&gt;)\n        return;\n    else\n        return result;\n}\n\nint main()\n{\n    wrapAndRun([] { std::cout &lt;&lt; \"with return \\n\"; return 0; });\n    wrapAndRun([] { std::cout &lt;&lt; \"no return \\n\"; });\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 1, "creation_date": 1514400743, "post_id": 47997149, "comment_id": 82962554, "body": "Can this be done without repeating the calls to <code>foo</code> and <code>bar</code>?"}, {"owner": {"reputation": 2916, "user_id": 3646096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KUofm.jpg?s=128&g=1", "display_name": "M&#225;rio Feroldi", "link": "https://stackoverflow.com/users/3646096/m%c3%a1rio-feroldi"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 1, "creation_date": 1514400913, "post_id": 47997149, "comment_id": 82962633, "body": "@NirFriedman Yes, but I have the opinion that the trade-off is not good. After all, this code isn&#39;t suffering because of repetition, and is simple enough."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 1, "creation_date": 1514402321, "post_id": 47997149, "comment_id": 82963179, "body": "Sorry, what&#39;s the trade-off exactly? Also, it&#39;s an assumption that there are literally two function calls. In the OP&#39;s case or in the general case, there may be more code there, that the user may or may not feel like factoring out into a function."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 1, "creation_date": 1514405704, "post_id": 47997149, "comment_id": 82964536, "body": "@NirFriedman: if there&#39;s more code there, he should probably refactor that out, into <code>foo()</code> and <code>bar()</code>"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1514406127, "post_id": 47997149, "comment_id": 82964677, "body": "@MooingDuck Err, why? Somewhere you have to have code, you know, it can&#39;t all be function calls. Such a factoring may be the right call, maybe even most of the time, but perhaps not all of the time. A solution that basically forces you to factor out into <code>foo</code> and <code>bar</code> is worse than one that doesn&#39;t (all other things being equal, of course)."}, {"owner": {"reputation": 2916, "user_id": 3646096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KUofm.jpg?s=128&g=1", "display_name": "M&#225;rio Feroldi", "link": "https://stackoverflow.com/users/3646096/m%c3%a1rio-feroldi"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1514412075, "post_id": 47997149, "comment_id": 82966758, "body": "@NirFriedman it could be refactored to lambdas inside the function template."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1514479830, "post_id": 47997149, "comment_id": 82990961, "body": "Main purpose of generic code is to avoid code duplicate. Write duplicated code in generic - what could be worse?"}], "tags": [], "owner": {"reputation": 2916, "user_id": 3646096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KUofm.jpg?s=128&g=1", "display_name": "M&#225;rio Feroldi", "link": "https://stackoverflow.com/users/3646096/m%c3%a1rio-feroldi"}, "is_accepted": false, "score": 14, "last_activity_date": 1514400212, "creation_date": 1514400212, "answer_id": 47997149, "question_id": 47996550, "link": "https://stackoverflow.com/questions/47996550/handling-void-assignment-in-c-generic-programming/47997149#47997149", "title": "Handling void assignment in C++ generic programming", "body": "<p>The new C++17 <code>if constexpr</code> addition may be helpful here. You can choose whether to return <code>fn()</code>'s result at compile-time:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;typename F&gt;\nauto wrapAndRun(F fn) -&gt; decltype(fn())\n{\n    if constexpr (std::is_same_v&lt;decltype(fn()), void&gt;)\n    {\n        foo();\n        fn();\n        bar();\n    }\n    else\n    {\n        foo();\n        auto result = fn();\n        bar();\n        return result;\n    }\n}\n</code></pre>\n\n<p>As you said C++2a is an option as well, you could also make use of concepts, putting a constraint on the function:</p>\n\n<pre><code>template &lt;typename F&gt;\n  requires requires (F fn) { { fn() } -&gt; void }\nvoid wrapAndRun(F fn)\n{\n    foo();\n    fn();\n    bar();\n}\n\ntemplate &lt;typename F&gt;\ndecltype(auto) wrapAndRun(F fn)\n{\n    foo();\n    auto result = fn();\n    bar();\n    return result;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 8, "creation_date": 1514413227, "post_id": 47998530, "comment_id": 82967060, "body": "@MassimilianoJanes Overloading the comma operator is one of those things that a decent chunk of the C++ community (self included) will just tell you never to do. Yes, I understood the idea, but this is 100%, dead on, the kind of black magic overloading that so, so many people and style guides have recommended against. If there was really, really no other way it might be worth considering but there&#39;s 4 solutions already here that are all preferable."}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 5, "creation_date": 1514414320, "post_id": 47998530, "comment_id": 82967377, "body": "@NirFriedman respectfully, I disagree; first, the comma operator <i>is</i> used in existing widely used libraries (boost, Eigen to cite the first that come to my mind), so claiming that <i>everybody</i> say to <i>never</i> use it, is simply false. Second, the reasons people should (rightfully) avoid overloading the comma operator do not apply here, you can easily make this safe."}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 5, "creation_date": 1514414375, "post_id": 47998530, "comment_id": 82967386, "body": "third, we don&#39;t know the final aim and scope of the OP code; he might just need a technical solution to a problem, buried in implementation details. This answer is a valid solution to the OP question, period. Afaik, downvoting it just because it &#39;feels&#39; bad to you goes against the meaning of voting."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 1, "creation_date": 1514414823, "post_id": 47998530, "comment_id": 82967496, "body": "You&#39;re entitled to disagree, and I&#39;m entitled to downvote. It&#39;s a solution I would never recommend to anyone who needs to ask for a solution to OP&#39;s problem in the first place, put it this way. I&#39;m allowed to downvote a solution I would never recommend, especially when there are multiple answers already up that I would recommend, aren&#39;t I?  I&#39;m obviously not the only one who feels this way about the comma operator: <a href=\"https://stackoverflow.com/questions/5602112/when-to-overload-the-comma-operator\" title=\"when to overload the comma operator\">stackoverflow.com/questions/5602112/&hellip;</a>."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 2, "creation_date": 1514415538, "post_id": 47998530, "comment_id": 82967689, "body": "Beyond that, it also doesn&#39;t correctly handle functions that return reference type (easily fixable), and it also doubly invalidates RVO, i.e. when I run this code there are 2 extraneous destructor calls, as opposed to either one or zero found in most other solutions here."}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 2, "creation_date": 1514415725, "post_id": 47998530, "comment_id": 82967739, "body": "@NirFriedman uhm, the very answer you linked to in your comment mentions that comma can be used as a metaprogramming technique (as is sometimes used indeed) among other legit uses. Frankly, I believe guidelines exist (or should exist) as a means to comunicate the <i>reasons</i> why something is bad, not to sell dogmas about one should always/never do. Regarding, the downvote issue, I think the voting mechanism already allow establishing a hierarchy of answers; if I read SO help and meta posts  correctly, downvotes should be reserved to non useful or wrong answers only."}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1514415796, "post_id": 47998530, "comment_id": 82967756, "body": "regarding the reference and RVO issue, these are solvable and have nothing to do with the answer idea ... anyway, it seems I triggered a vote war :) ...so I&#39;ll stop here"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 1, "creation_date": 1514415963, "post_id": 47998530, "comment_id": 82967785, "body": "@MassimilianoJanes If you solve both issues I&#39;ll remove the downvote, how&#39;s that as a peace offering :-)."}], "tags": [], "owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "is_accepted": true, "score": 5, "last_activity_date": 1514407995, "creation_date": 1514407995, "answer_id": 47998530, "question_id": 47996550, "link": "https://stackoverflow.com/questions/47996550/handling-void-assignment-in-c-generic-programming/47998530#47998530", "title": "Handling void assignment in C++ generic programming", "body": "<p>Another trick might be to exploit the comma operator, something like:</p>\n\n<pre><code>struct or_void {};\n\ntemplate&lt;typename T&gt;\nT&amp;&amp; operator,( T&amp;&amp; x, or_void ){ return std::forward&lt;T&gt;(x); }\n\ntemplate &lt;typename F&gt;\nauto wrapAndRun(F fn) -&gt; decltype(fn()) {\n    // foo();\n    auto result = ( fn(), or_void() );\n    // bar();\n    return decltype(fn())(result);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 1, "creation_date": 1514472763, "post_id": 47999656, "comment_id": 82987466, "body": "This is interesting. I didn&#39;t realize it was possible to write <code>uncaught_exceptions</code> (notice the s) prior to 17 in user space; this is a prerequisite for things like SCOPE_SUCCESS. Nice answer!"}], "tags": [], "owner": {"reputation": 463, "user_id": 2657179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/516fe6fe86e7f822cbcd6f670a6b06da?s=128&d=identicon&r=PG", "display_name": "Kilian", "link": "https://stackoverflow.com/users/2657179/kilian"}, "is_accepted": false, "score": 5, "last_activity_date": 1514416002, "creation_date": 1514416002, "answer_id": 47999656, "question_id": 47996550, "link": "https://stackoverflow.com/questions/47996550/handling-void-assignment-in-c-generic-programming/47999656#47999656", "title": "Handling void assignment in C++ generic programming", "body": "<p>You can have a look at the ScopeGuard by Alexandrescu: <a href=\"https://github.com/facebook/folly/blob/master/folly/ScopeGuard.h\" rel=\"noreferrer\">ScopeGuard.h</a> It executes code only when there was no exception.</p>\n\n<pre><code>template&lt;class Fn&gt;\ndecltype(auto) wrapAndRun(Fn&amp;&amp; f) {\n  foo();\n  SCOPE_SUCCESS{ bar(); }; //Only executed at scope exit when there are no exceptions.\n  return std::forward&lt;Fn&gt;(f)();\n}\n</code></pre>\n\n<p>So in case of no errors, the execution order is: 1. foo(), 2. f(), 3. bar(). And in case of an exception the order is: 1. foo(), 2. f()</p>\n"}], "owner": {"reputation": 609, "user_id": 2057542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e487d60098ccab80bf014ad524740612?s=128&d=identicon&r=PG", "display_name": "Ambarish Sridharanarayanan", "link": "https://stackoverflow.com/users/2057542/ambarish-sridharanarayanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2293, "favorite_count": 10, "accepted_answer_id": 47998530, "answer_count": 6, "score": 31, "last_activity_date": 1583906051, "creation_date": 1514397077, "last_edit_date": 1592644375, "question_id": 47996550, "link": "https://stackoverflow.com/questions/47996550/handling-void-assignment-in-c-generic-programming", "title": "Handling void assignment in C++ generic programming", "body": "<p>I have C++ code that wraps an arbitrary lambda and returns the result of the lambda.</p>\n<pre><code>template &lt;typename F&gt;\nauto wrapAndRun(F fn) -&gt; decltype(F()) {\n    // foo();\n    auto result = fn();\n    // bar();\n    return result;\n}\n</code></pre>\n<p>This works unless <code>F</code> returns <code>void</code> (<code>error: variable has incomplete type 'void'</code>). I thought of using a <code>ScopeGuard</code> to run <code>bar</code>, but I don't want <code>bar</code> to run if <code>fn</code> throws. Any ideas?</p>\n<p>P.S. I found out later there's <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0146r1.html\" rel=\"nofollow noreferrer\">a proposal to fix this inconsistency</a>.</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1514398848, "post_id": 47996808, "comment_id": 82961793, "body": "Recommend recommending that the asker establish some sort of communication protocol so they can easily tell when one bitmap ends and another bitmap begins."}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1514398483, "creation_date": 1514398483, "answer_id": 47996808, "question_id": 47996523, "link": "https://stackoverflow.com/questions/47996523/how-to-stream-bitmap-data-over-a-socket-in-cpp/47996808#47996808", "title": "how to stream bitmap data over a socket in cpp?", "body": "<p>Cast your buffers to char * and pass the size of the buffer in bytes as the length. Note that send() can only deal with whole bytes.</p>\n"}], "owner": {"reputation": 1, "user_id": 9146271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4497acf669c24383fa8fd58ed68131b?s=128&d=identicon&r=PG&f=1", "display_name": "Broom Monster", "link": "https://stackoverflow.com/users/9146271/broom-monster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1514398483, "creation_date": 1514396973, "question_id": 47996523, "link": "https://stackoverflow.com/questions/47996523/how-to-stream-bitmap-data-over-a-socket-in-cpp", "title": "how to stream bitmap data over a socket in cpp?", "body": "<p>I am working on a remote administration project in cpp that will stream graphic data- in bitmap object- over winsock. The winsock send and rcv function use only buffers of data type char*. How can I stream data from bitmap object over a socket? </p>\n"}, {"tags": ["c++", "exception", "memory", "memory-leaks", "valgrind"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 2, "creation_date": 1514397145, "post_id": 47996519, "comment_id": 82961099, "body": "Did you turn off optimization when compiling your examples, to make sure that things don&#39;t get optimized out unexpectedly?"}, {"owner": {"reputation": 169, "user_id": 8521177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f18fa0fb4c99aba839ce387057cfa1b?s=128&d=identicon&r=PG&f=1", "display_name": "TwITe", "link": "https://stackoverflow.com/users/8521177/twite"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1514397439, "post_id": 47996519, "comment_id": 82961239, "body": "I compiled my programs like this: g++ -std=c++11 -o driver example.cpp then had run Valgrind: valgrind --leak-check=full -v ./example"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1514397544, "post_id": 47996519, "comment_id": 82961280, "body": "Try adding <code>-O0</code> (uppercase &quot;O&quot; followed by zero) flag to <code>g++</code> line, then run <code>valgrind</code> again."}, {"owner": {"reputation": 169, "user_id": 8521177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f18fa0fb4c99aba839ce387057cfa1b?s=128&d=identicon&r=PG&f=1", "display_name": "TwITe", "link": "https://stackoverflow.com/users/8521177/twite"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1514397905, "post_id": 47996519, "comment_id": 82961419, "body": "i have the same result with this compiler option"}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 8521177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f18fa0fb4c99aba839ce387057cfa1b?s=128&d=identicon&r=PG&f=1", "display_name": "TwITe", "link": "https://stackoverflow.com/users/8521177/twite"}, "edited": false, "score": 0, "creation_date": 1514400397, "post_id": 47996981, "comment_id": 82962413, "body": "You said that when the program terminates the OS cleans up any memory it allocated. But what about this program: <a href=\"https://pastebin.com/3gkhXVYG\" rel=\"nofollow noreferrer\">pastebin.com/3gkhXVYG</a> Program terminates, but Valgrind shows a memory leak."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 169, "user_id": 8521177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f18fa0fb4c99aba839ce387057cfa1b?s=128&d=identicon&r=PG&f=1", "display_name": "TwITe", "link": "https://stackoverflow.com/users/8521177/twite"}, "edited": false, "score": 1, "creation_date": 1514401724, "post_id": 47996981, "comment_id": 82962942, "body": "@TwITe Valgrind shows a leak since you did not yourself release all memory - thus leaving it up to the OS to clean up. That is <i>technically</i> a leak, but it is an inconsequential one."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 1, "last_activity_date": 1514399291, "creation_date": 1514399291, "answer_id": 47996981, "question_id": 47996519, "link": "https://stackoverflow.com/questions/47996519/what-happens-with-the-memory-leak/47996981#47996981", "title": "What happens with the memory leak?", "body": "<p>When the program terminates the OS cleans up any memory it allocated - not usually a problem. Memory leaks at shutdown are rarely a problem (unless some critically important destructors didn't get a chance to run). Where memory leaks are a <em>real</em> problem is when they happen during runtime and causes your programs memory use to grow unbounded (eventually leading to resource exhaustion).</p>\n"}], "owner": {"reputation": 169, "user_id": 8521177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f18fa0fb4c99aba839ce387057cfa1b?s=128&d=identicon&r=PG&f=1", "display_name": "TwITe", "link": "https://stackoverflow.com/users/8521177/twite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1514400241, "creation_date": 1514396945, "last_edit_date": 1514399079, "question_id": 47996519, "link": "https://stackoverflow.com/questions/47996519/what-happens-with-the-memory-leak", "title": "What happens with the memory leak?", "body": "<p>I really don't understand what happens with allocated memory in a heap when exception occurs:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nclass Base {\nprivate:\n    int *a;\npublic:\n    Base() {\n        // a = new int[100];\n\n        throw runtime_error(\"err\");\n    }\n\n    ~Base() {\n        // delete[] a;\n    }\n};\n\nint main() {\n    std::vector&lt;Base&gt; bases;\n    Base base;\n    bases.push_back(base);\n\n    std::cout &lt;&lt; bases.size() &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Okay, now, it is just empty program that throws an exception.\nThe next program, that allocates memory in a heap:\n</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nclass Base {\nprivate:\n    int *a;\npublic:\n    Base() {\n        a = new int[100];\n\n        throw runtime_error(\"err\");\n    }\n\n    ~Base() {\n        // delete[] a;\n    }\n};\n\nint main() {\n    std::vector&lt;Base&gt; bases;\n    Base base;\n    bases.push_back(base);\n\n    std::cout &lt;&lt; bases.size() &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Program 1:</p>\n\n<pre><code>==14151== HEAP SUMMARY:\n==14151==     in use at exit: 72,876 bytes in 3 blocks\n==14151==   total heap usage: 4 allocs, 1 frees, 72,908 bytes allocated\n==14151== \n==14151== Searching for pointers to 3 not-freed blocks\n==14151== Checked 116,088 bytes\n==14151== \n==14151== 144 bytes in 1 blocks are possibly lost in loss record 2 of 3\n==14151==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==14151==    by 0x4EC641F: __cxa_allocate_exception (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.21)\n==14151==    by 0x400F44: Base::Base() (in /home/twite/CLionProjects/oop_learn/driver1)\n==14151==    by 0x400E25: main (in /home/twite/CLionProjects/oop_learn/driver1)\n==14151== \n==14151== LEAK SUMMARY:\n==14151==    definitely lost: 0 bytes in 0 blocks\n==14151==    indirectly lost: 0 bytes in 0 blocks\n==14151==      possibly lost: 144 bytes in 1 blocks\n==14151==    still reachable: 72,732 bytes in 2 blocks\n</code></pre>\n\n<p>Program 2:</p>\n\n<pre><code>==14171== HEAP SUMMARY:\n==14171==     in use at exit: 73,276 bytes in 4 blocks\n==14171==   total heap usage: 5 allocs, 1 frees, 73,308 bytes allocated\n==14171== \n==14171== Searching for pointers to 4 not-freed blocks\n==14171== Checked 116,096 bytes\n==14171== \n==14171== 144 bytes in 1 blocks are possibly lost in loss record 2 of 4\n==14171==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==14171==    by 0x4EC641F: __cxa_allocate_exception (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.21)\n==14171==    by 0x400F98: Base::Base() (in /home/twite/CLionProjects/oop_learn/driver2)\n==14171==    by 0x400E65: main (in /home/twite/CLionProjects/oop_learn/driver2)\n==14171== \n==14171== LEAK SUMMARY:\n==14171==    definitely lost: 0 bytes in 0 blocks\n==14171==    indirectly lost: 0 bytes in 0 blocks\n==14171==      possibly lost: 144 bytes in 1 blocks\n==14171==    still reachable: 73,132 bytes in 3 blocks\n</code></pre>\n\n<p>So, where's the memory leak? Valgrind doesn't tell me about the memory leak, but i see the one in second program.</p>\n"}, {"tags": ["c++", "raii"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1514402652, "post_id": 47996432, "comment_id": 82963313, "body": "Why don&#39;t you show your &quot;inelegant &#39;defer remove&#39; guard&quot;?  That sounds like the way I&#39;d approach it."}, {"owner": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1514402965, "post_id": 47996432, "comment_id": 82963444, "body": "Because I have it in my real code not this toy version and it is tied to the real structures which use variadic templates etc. That is in a sense the problem. I was trying to find a more generic solution not one that needs to know about the internals of ActionPlayer-like classes. Anyway, ill update the example when I get some time."}], "answers": [{"comments": [{"owner": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "edited": false, "score": 0, "creation_date": 1514400708, "post_id": 47997152, "comment_id": 82962537, "body": "hmmm ... copying is simple but I was hoping for something that doesnt allocate memory in run() in the majority of cases in which a self-referential remove does not happen.   I don&#39;t think just switching to an std::list fixes the problem"}, {"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "reply_to_user": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "edited": false, "score": 0, "creation_date": 1514401550, "post_id": 47997152, "comment_id": 82962867, "body": "Then you should go with adding a <code>bool</code> to store if an action is marked as removed and remove them at the end of <code>run</code>"}], "tags": [], "owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "is_accepted": false, "score": 1, "last_activity_date": 1514400233, "creation_date": 1514400233, "answer_id": 47997152, "question_id": 47996432, "link": "https://stackoverflow.com/questions/47996432/in-c-is-there-an-idiomatic-way-to-guard-against-the-situation-in-which-running/47997152#47997152", "title": "In C++ is there an idiomatic way to guard against the situation in which running a collection of actions causes the collection to be mutated?", "body": "<p>Usual way is to create a copy of the <code>vector</code>. But this may cause the removed actions to be run again. </p>\n\n<pre><code>void run()\n{\n    auto actions_copy{actions_};\n    for (auto&amp; item : actions_copy) {\n        item.second();\n    }\n}\n</code></pre>\n\n<p>Other options if running removed action is not allowed</p>\n\n<ol>\n<li>Add a bool to store if some action is removed</li>\n<li>Use shared/weak ptr</li>\n<li>use <code>std::list</code> if it is known that the current action will not be removed.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "edited": false, "score": 0, "creation_date": 1514405698, "post_id": 47997955, "comment_id": 82964531, "body": "if one of the actions throws you&#39;ll be left in an indeterminant state though."}, {"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "reply_to_user": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "edited": false, "score": 0, "creation_date": 1514557684, "post_id": 47997955, "comment_id": 83017259, "body": "@jwezorek: so put it in try/catch or use <code>unique_ptr&lt;T, function&lt;void&gt;&gt;</code> for automatic cleanup"}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 1, "last_activity_date": 1514404831, "creation_date": 1514404831, "answer_id": 47997955, "question_id": 47996432, "link": "https://stackoverflow.com/questions/47996432/in-c-is-there-an-idiomatic-way-to-guard-against-the-situation-in-which-running/47997955#47997955", "title": "In C++ is there an idiomatic way to guard against the situation in which running a collection of actions causes the collection to be mutated?", "body": "<p>Add a flag to <code>run</code> that says you're enumerating thru <code>actions_</code>.  Then if <code>removeAction</code> is called with that flag set, you store the <code>id</code> in a vector for later removal.  You might also need a separate vector to hold actions that are added while enumerating.  Once you're all done iterating thru <code>actions_</code>, you remove the ones that want removed and add the ones that got added.</p>\n\n<p>Something like</p>\n\n<pre><code>// within class ActionPlayer, add these private member variables\nprivate:\n    bool running = false;\n    std::vector&lt;int&gt; idsToDelete;\n\npublic:\n    void run() {\n        running = true;\n        for (auto&amp; item : actions_) {\n            item.second();\n        }\n        running = false;\n        for (d: idsToDelete)\n            removeAction(d);\n        idsToDelete.clear();\n    }\n\n    // ...\n</code></pre>\n\n<p>You can make a similar change for deferred <code>addAction</code> calls (which you'll need to do if any of the actions can add an action, since the add might cause the vector to allocate more storage, invalidating all iterators to the vector).</p>\n"}, {"tags": [], "owner": {"reputation": 1237, "user_id": 2809097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18071242822f897e03cde436113a4e85?s=128&d=identicon&r=PG&f=1", "display_name": "Jarra McIntyre", "link": "https://stackoverflow.com/users/2809097/jarra-mcintyre"}, "is_accepted": false, "score": 0, "last_activity_date": 1514411701, "creation_date": 1514411701, "answer_id": 47999094, "question_id": 47996432, "link": "https://stackoverflow.com/questions/47996432/in-c-is-there-an-idiomatic-way-to-guard-against-the-situation-in-which-running/47999094#47999094", "title": "In C++ is there an idiomatic way to guard against the situation in which running a collection of actions causes the collection to be mutated?", "body": "<p>I would modify the structure slightly. Instead of allowing <code>ActionPlayer</code> to be modified directly, I would force all modifications through an external modifier class. In this example I made it an abstract Modifier class which can have different concrete implementations (e.g. <code>DeferredModifier</code>, <code>InstantModifier</code>, <code>NullModifier</code>, <code>LoggedModifier</code>, <code>TestModifier</code> .etc.). Your actions now only need to take a reference to the abstract base class of a modifier and call any add/remove .etc. function on that as necessary.. This allows separation of modification policy from the action implementation, and injection of different modification policies into actions.</p>\n\n<p>This should also allow simpler support for concurrent modification, as you no longer need to toggle the run /  not running state to defer modifications.</p>\n\n<p>This example shows a simple way of replaying the actions in order (which is a property I assume you want to maintain). A more advanced implementation could scan the modification list backwards removing all add/remove pairs and then group modifications / removals to minimise copying when modifying the actions list.</p>\n\n<p>Something like:</p>\n\n<pre><code>class ActionPlayer {\nfriend class Modifier;\n...\n\n    void run(Modifier &amp;modifier) { }\nprivate:\n    void addAction(...) { ... }\n    void removeAction(...) { ... }\n}\n\nclass Modifier\n{\npublic:\n    virtual ~Modifier() {}\n    virtual addAction(...) = 0;\n    virtual removeAction(...) = 0;\n}\n\nclass DelayedModifier : public Modifier\n{\n    struct Modification { virtual void run(ActionPlayer&amp;) = 0; }\n\n    struct RemoveAction : public Modification\n    {\n        int id;\n\n        Removal(int _id) : id(_id) {} \n        virtual void run(ActionPlayer &amp;player) { player.removeAction(id); }\n    }\n\n    struct AddAction : public Modification\n    {\n        int id;\n        std::function&lt;void(Modifier&amp;)&gt;&gt; action;\n\n        AddAction(int _id, const std::function&lt;void(Modifier&amp;)&gt; &amp;_action) : id(_id), action(_action)  {}\n        virtual void run(ActionPlayer &amp;player) { player.addAction(id, action) };\n    }\n\n    ActionPlayer &amp;player;\n    std::vector&lt;Modification&gt; modifications;\n\npublic:\n    DelayedModifier(ActionPlayer &amp;_player) player(_player) {}\n    virtual ~DelayedModifier() { run(); }\n\n    virtual void addAction(int id, const std::function&lt;void(Modifier&amp;)&gt; &amp;action) { modifications.push_back(AddAction(id, action)); }\n    virtual void removeAction(int id) { modifications.push_back(RemoveAction(id)); }\n\n    void run()\n    {\n        for (auto &amp;modification : modifications)\n            modification.run(player);\n        modifications.clear();\n    }\n};\n</code></pre>\n\n<p>So you now write:</p>\n\n<pre><code>ActionPlayer player;\n\n{\n    DelayedModifier modifier(player);\n\n    modifier.addAction(...);\n    modifier.addAction(...);\n    modifier.run();\n    actions.run(modifier);\n}\n</code></pre>\n"}], "owner": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "answer_count": 3, "score": 7, "last_activity_date": 1514481724, "creation_date": 1514396509, "last_edit_date": 1514481724, "question_id": 47996432, "link": "https://stackoverflow.com/questions/47996432/in-c-is-there-an-idiomatic-way-to-guard-against-the-situation-in-which-running", "title": "In C++ is there an idiomatic way to guard against the situation in which running a collection of actions causes the collection to be mutated?", "body": "<p>Say you have a class <code>foo</code> that wraps a collection of some kind of callable objects. <code>foo</code> has a member function <code>run()</code> that iterates over the collection and calls each function object. <code>foo</code> also has a member <code>remove(...)</code> that will remove a callable object from the collection.</p>\n\n<p>Is there an idiomatic, RAII-style guard you can put in <code>foo.run()</code> and <code>foo.remove(...)</code> such that the removes that were driven by a call to <code>foo.run()</code> \n will be deferred until the guard's destructor fires? Can it be done with something in the standard library? Does this pattern have a name?</p>\n\n<p>My current code seems inelegant so am looking for a best practice type solution.</p>\n\n<p>Note: this is isnt about concurrency. A non thread-safe solution is fine. The issue is with re-entrancy and self-reference.</p>\n\n<p>Here is an example of the problem, sans the inelegant \"defer remove\" guard.</p>\n\n<pre><code>class ActionPlayer\n{\nprivate:\n    std::vector&lt;std::pair&lt;int, std::function&lt;void()&gt;&gt;&gt; actions_;\npublic:\n    void addAction(int id, const std::function&lt;void()&gt;&amp; action)\n    {\n        actions_.push_back({ id, action });\n    }\n\n    void removeAction(int id)\n    {\n        actions_.erase(\n            std::remove_if(\n                actions_.begin(),\n                actions_.end(),\n                [id](auto&amp; p) { return p.first == id; }\n            ),\n            actions_.end()\n        );\n    }\n\n    void run()\n    {\n        for (auto&amp; item : actions_) {\n            item.second();\n        }\n    }\n};\n</code></pre>\n\n<p>then elsewhere:</p>\n\n<pre><code>...\n\nActionPlayer player;\n\nplayer.addAction(1, []() {\n    std::cout &lt;&lt; \"Hello there\" &lt;&lt; std::endl;\n});\n\nplayer.addAction(42, [&amp;player]() {\n    std::cout &lt;&lt; \"foobar\" &lt;&lt; std::endl;\n    player.removeAction(1);\n});\n\nplayer.run(); // boom\n</code></pre>\n\n<p>Edit ... okay this is how I can see to do this via an RAII lock object. The following should handle actions throwing and re-entrant calls to run within run assuming the recursion eventually terminates (if not that is the user's fault). I used cached std::functions because in the real version of this code the equivalent of addAction and removeAction are template functions which cant just be stored in a vanilla homogeneously typed container.</p>\n\n<pre><code>class ActionPlayer\n{\nprivate:\n\n    std::vector&lt;std::pair&lt;int, std::function&lt;void()&gt;&gt;&gt; actions_;\n    int run_lock_count_;\n    std::vector&lt;std::function&lt;void()&gt;&gt; deferred_ops_;\n\n    class RunLock\n    {\n    private:\n        ActionPlayer* parent_;\n    public:\n        RunLock(ActionPlayer* parent) : parent_(parent) { (parent_-&gt;run_lock_count_)++; }\n        ~RunLock()\n        {\n            if (--parent_-&gt;run_lock_count_ == 0) {\n                while (!parent_-&gt;deferred_ops_.empty()) {\n                    auto do_deferred_op = parent_-&gt;deferred_ops_.back();\n                    parent_-&gt;deferred_ops_.pop_back();\n                    do_deferred_op();\n                }\n            }\n        }\n    };\n\n    bool isFiring() const\n    {\n        return run_lock_count_ &gt; 0;\n    }\n\npublic:\n    ActionPlayer() : run_lock_count_(0)\n    {\n    }\n\n    void addAction(int id, const std::function&lt;void()&gt;&amp; action)\n    {\n        if (!isFiring()) {\n            actions_.push_back({ id, action });\n        } else {\n            deferred_ops_.push_back(\n                [&amp;]() {\n                    addAction(id, action);\n                }\n            );\n        }\n    }\n\n    void removeAction(int id)\n    {\n        if (!isFiring()) {\n            actions_.erase(\n                std::remove_if(\n                    actions_.begin(),\n                    actions_.end(),\n                    [id](auto&amp; p) { return p.first == id; }\n                ),\n                actions_.end()\n            );\n        } else {\n            deferred_ops_.push_back(\n                [&amp;]() {\n                    removeAction(id); \n                }\n            );\n        }\n    }\n\n    void run()\n    {\n        RunLock lock(this);\n        for (auto&amp; item : actions_) {\n            item.second();\n        }\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "uml", "enterprise-architect"], "comments": [{"owner": {"reputation": 478, "user_id": 3277680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a517e9a983ae7ad44a27a2ac22338643?s=128&d=identicon&r=PG&f=1", "display_name": "wiesniak", "link": "https://stackoverflow.com/users/3277680/wiesniak"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1514397667, "post_id": 47996363, "comment_id": 82961330, "body": "Is it now more clear ?"}], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 3277680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a517e9a983ae7ad44a27a2ac22338643?s=128&d=identicon&r=PG&f=1", "display_name": "wiesniak", "link": "https://stackoverflow.com/users/3277680/wiesniak"}, "edited": false, "score": 1, "creation_date": 1514461620, "post_id": 48000456, "comment_id": 82981969, "body": "This is it.. Thank you !"}], "tags": [], "owner": {"reputation": 3801, "user_id": 6390798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NzT2K.jpg?s=128&g=1", "display_name": "Gholamali-Irani", "link": "https://stackoverflow.com/users/6390798/gholamali-irani"}, "is_accepted": false, "score": 3, "last_activity_date": 1514423515, "creation_date": 1514423515, "answer_id": 48000456, "question_id": 47996363, "link": "https://stackoverflow.com/questions/47996363/how-to-model-1-to-0-aggregation-in-uml/48000456#48000456", "title": "How to model 1 to 0..* aggregation in UML", "body": "<p>I think, your model is correct.</p>\n\n<p>If you want to have an <strong>instance</strong> of your <code>set</code> instead of a <strong>pointer</strong> to it: </p>\n\n<p>you should set your Aggregation containment to <code>Value</code> instead of <code>Reference</code>: </p>\n\n<p>In your Aggregation Relationship -> go to <strong>Properties</strong> -> <strong>Role(s)</strong> -> in <strong>Source</strong> section -> in the list at <strong>Advanced</strong> section -> set <strong>Containment</strong> to <code>Value</code>. </p>\n"}], "owner": {"reputation": 478, "user_id": 3277680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a517e9a983ae7ad44a27a2ac22338643?s=128&d=identicon&r=PG&f=1", "display_name": "wiesniak", "link": "https://stackoverflow.com/users/3277680/wiesniak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1514430065, "creation_date": 1514396156, "last_edit_date": 1514430065, "question_id": 47996363, "link": "https://stackoverflow.com/questions/47996363/how-to-model-1-to-0-aggregation-in-uml", "title": "How to model 1 to 0..* aggregation in UML", "body": "<p>I would like to model a <code>Hal_device_factory</code> class with container, that collects pointers to interfaces of type <code>IHal_subfactory</code>.</p>\n\n<p>I made such class diagram in Enterprise Architect:</p>\n\n<p><img src=\"https://i.stack.imgur.com/BldOG.png\" alt=\"enter image description here\"></p>\n\n<p>Then I generated source code for this diagram, this is what i've got:</p>\n\n<pre><code>std::set&lt;IHal_subfactory&gt;  *m_IHal_subfactory;\n</code></pre>\n\n<p>However I expected something like that :</p>\n\n<pre><code>std::set&lt;IHal_subfactory*&gt;  m_IHal_subfactory;\n</code></pre>\n\n<p>So my question is what I've done wrong ? \nModel is wrong or what ?</p>\n"}, {"tags": ["c++", "eigen", "levenberg-marquardt"], "answers": [{"tags": [], "owner": {"reputation": 780, "user_id": 3937811, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Zt1z6.png?s=128&g=1", "display_name": "Evan Gertis", "link": "https://stackoverflow.com/users/3937811/evan-gertis"}, "is_accepted": false, "score": 0, "last_activity_date": 1514404387, "creation_date": 1514404387, "answer_id": 47997885, "question_id": 47996100, "link": "https://stackoverflow.com/questions/47996100/how-to-set-eigen-desnsefunctor-input-and-value-sizes-for-use-in-eigen-levenberg/47997885#47997885", "title": "How to set Eigen DesnseFunctor input and value sizes for use in Eigen Levenberg Marquardt", "body": "<p><strong>Solution</strong>: I figured out my problem. I replaced:</p>\n\n<pre><code>const int m_inputs, m_values;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>int m_inputs, m_values;\n</code></pre>\n\n<p>in the \".h\" file this makes the member variable of the struct MyFunctorDense modifiable. So, then in the \".cpp\" below the line </p>\n\n<pre><code>std::cout &lt;&lt; \"tX: \" &lt;&lt; tX &lt;&lt; std::endl;\n</code></pre>\n\n<p>I added:</p>\n\n<pre><code> Eigen::VectorXd tF(60928);\n</code></pre>\n\n<p>because this is a test function vector of dimension 60928x1. Therefore, I could put in any arbitrary nx1 dimension. </p>\n\n<p>Then below the line:</p>\n\n<pre><code>MyFunctorDense myDenseFunctor; \n</code></pre>\n\n<p>I added:</p>\n\n<pre><code>  myDenseFunctor.m_inputs = tX.rows();\n  myDenseFunctor.m_values = tF.rows();\n</code></pre>\n\n<p>Now I get the result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JegvE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JegvE.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 780, "user_id": 3937811, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Zt1z6.png?s=128&g=1", "display_name": "Evan Gertis", "link": "https://stackoverflow.com/users/3937811/evan-gertis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 322, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514405115, "creation_date": 1514394810, "last_edit_date": 1514405115, "question_id": 47996100, "link": "https://stackoverflow.com/questions/47996100/how-to-set-eigen-desnsefunctor-input-and-value-sizes-for-use-in-eigen-levenberg", "title": "How to set Eigen DesnseFunctor input and value sizes for use in Eigen Levenberg Marquardt", "body": "<p><strong>Problem</strong>: I do not always know the exact size of the Jacobian or Function vector that I am going to use Levenberg Marquardt on. Therefore, I need to set the dimensions of them at compile time. </p>\n\n<p><strong>Expected</strong>: After I declare an instance of MyFunctorDense. I could set the \"InputsAtCompileTime\" to my input size and set \"ValuesAtCompileTime\" to my values size. Then my Jacobian ,aFjac, should have the dimensions tValues x tInputs, and my function vector, aH, should have the dimensions tValues x 1.</p>\n\n<p><strong>Observed</strong>: \n<a href=\"https://i.stack.imgur.com/eLrkR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eLrkR.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>.h file</strong></p>\n\n<pre><code> #pragma once\n\n #include \"stdafx.h\"\n #include &lt;iostream&gt;\n\n #include &lt;unsupported/Eigen/LevenbergMarquardt&gt;\n #include &lt;unsupported/Eigen/NumericalDiff&gt;\n\n\n //Generic functor\n template &lt;typename _Scalar, typename _Index&gt;\n struct MySparseFunctor\n {\n    typedef _Scalar Scalar;\n    typedef _Index Index;\n    typedef Eigen::Matrix&lt;Scalar,Eigen::Dynamic,1&gt; InputType;\n    typedef Eigen::Matrix&lt;Scalar,Eigen::Dynamic,1&gt; ValueType;\n    typedef Eigen::SparseMatrix&lt;Scalar, Eigen::ColMajor, Index&gt; \n  JacobianType;\n     typedef Eigen::SparseQR&lt;JacobianType, Eigen::COLAMDOrdering&lt;int&gt; &gt; \n  QRSolver;\n    enum {\n       InputsAtCompileTime = Eigen::Dynamic,\n       ValuesAtCompileTime = Eigen::Dynamic\n     };\n\n    MySparseFunctor(int inputs, int values) : m_inputs(inputs), \nm_values(values) {}\n\n    int inputs() const { return m_inputs; }\n    int values() const { return m_values; }\n\n    const int m_inputs, m_values;\n\n\n};\n\ntemplate &lt;typename _Scalar, int NX=Eigen::Dynamic, int NY=Eigen::Dynamic&gt;\nstruct MyDenseFunctor\n{\n  typedef _Scalar Scalar;\n  enum {\n    InputsAtCompileTime = NX,\n    ValuesAtCompileTime = NY\n  };\n  typedef Eigen::Matrix&lt;Scalar,InputsAtCompileTime,1&gt; InputType;\n  typedef Eigen::Matrix&lt;Scalar,ValuesAtCompileTime,1&gt; ValueType;\n  typedef Eigen::Matrix&lt;Scalar,ValuesAtCompileTime,InputsAtCompileTime&gt; \nJacobianType;\n   typedef Eigen::ColPivHouseholderQR&lt;JacobianType&gt; QRSolver;\n  const int m_inputs, m_values;\n\n   MyDenseFunctor() : m_inputs(InputsAtCompileTime), \n m_values(ValuesAtCompileTime) {}\n  MyDenseFunctor(int inputs, int values) : m_inputs(inputs), \nm_values(values) {}\n\n  int inputs() const { return m_inputs; }\n  int values() const { return m_values; }\n\n};\n\n\n struct MyFunctorSparse : MySparseFunctor&lt;double, int&gt;\n {\n    MyFunctorSparse(void) : MySparseFunctor&lt;double, int&gt;(2 , 2) {}\n\n   int operator()(const Eigen::VectorXd &amp;aX,  //Input \n              Eigen::VectorXd &amp;aF) const; //Output \n   int df(const InputType &amp;aF, JacobianType&amp; aFjac);\n};\n\n\nstruct MyFunctorDense : MyDenseFunctor&lt;double&gt;\n {\n   MyFunctorDense(void) : MyDenseFunctor&lt;double&gt;( Eigen::Dynamic , \nEigen::Dynamic) {}\n\n   int operator()(const InputType &amp;aX,  //Input \n              ValueType &amp;aF) const; //Output \n\n   int df(const InputType &amp;aX, JacobianType&amp; aFjac);\n };\n</code></pre>\n\n<p><strong>.cpp file</strong>\n   #pragma once\n   #include \"stdafx.h\"\n   #include \"Main.h\"</p>\n\n<pre><code>int MyFunctorSparse::operator()(const Eigen::VectorXd &amp;aX,        //Input \n                            Eigen::VectorXd &amp;aF) const        //Output \n{\n         //F = aX0^2 + aX1^2  \n     aF(0) = aX(0)*aX(0) +  aX(1)*aX(1);\n     aF(1) = 0;\n\n  return 0;\n }\n\nint MyFunctorDense::operator()(const InputType &amp;aX,        //Input \n                            ValueType &amp;aF) const       //Output \n {\n//F = aX0^2 + aX1^2\nfor (int i = 0; i &lt; aF.size(); i++)\n{\n  aF(i) = i*aX(0)*aX(0) + i*(aX(1)-1)*(aX(1)-1);\n}\n\n\n  return 0;\n}\n\n\n int MyFunctorSparse::df(const InputType &amp;aX, JacobianType&amp; aFjac)\n {\n   aFjac.coeffRef(0, 0) = 2*aX(0);\n   aFjac.coeffRef(0, 1) = 2*aX(1);\n   aFjac.coeffRef(1, 0) = 0.0;\n   aFjac.coeffRef(1, 1) = 0.0;\n\n   return 0;\n}\n\n int MyFunctorDense::df(const InputType &amp;aX, JacobianType&amp; aFjac)\n{\n   for(int i = 0; i&lt; aFjac.size(); i++)\n   {\n   aFjac(i, 0) = 2*i*aX(0);\n   aFjac(i, 1) = 2*i*(aX(1)-1);\n   }\n   return 0; \n}\n\nint main(int argc, char *argv[])\n{\n   int input;\n   std::cout &lt;&lt; \"Enter 1 to run LM with DenseFunctor, Enter 2 to run LM with \nSparseFunctor: \" &lt;&lt; std::endl;\nstd::cin &gt;&gt; input;\n\n   Eigen::VectorXd tX(2);\n   tX(0) = 10;\n   tX(1) = 0.5;\n   int tInputs = tX.rows();\n   int tValues = 60928;\n\n   std::cout &lt;&lt; \"tX: \" &lt;&lt; tX &lt;&lt; std::endl;\n\n   if (input == 1)\n   {\n  MyFunctorDense myDenseFunctor;\n  tInputs = myDenseFunctor.inputs();\n  tValues = myDenseFunctor.values();\n\n  std::cout &lt;&lt; \"tInputs  : \" &lt;&lt; tInputs &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"tValues  : \" &lt;&lt; tValues &lt;&lt; std::endl;\n\n  Eigen::LevenbergMarquardt&lt;MyFunctorDense&gt; lm(myDenseFunctor);\n  lm.setMaxfev(30);\n  lm.setXtol(1e-5);\n  lm.minimize(tX);\n   }\n\n  if (input == 2)\n  {\n  MyFunctorSparse myFunctorSparse;\n  //Eigen::NumericalDiff&lt;MyFunctor&gt; numDiff(myFunctor);\n  //Eigen::LevenbergMarquardt&lt;Eigen::NumericalDiff&lt;MyFunctor&gt;,double&gt; \n  lm(numDiff);\n\n  Eigen::LevenbergMarquardt&lt;MyFunctorSparse&gt; lm(myFunctorSparse);\n  lm.setMaxfev(2000);\n  lm.setXtol(1e-10);\n\n  lm.minimize(tX);\n  }\n\n   std::cout &lt;&lt; \"tX minimzed: \" &lt;&lt; tX &lt;&lt; std::endl;\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "owner": {"reputation": 11, "user_id": 7438737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e86647eeb0c50059ee6b5ece02a2028?s=128&d=identicon&r=PG&f=1", "display_name": "Liyang Xie", "link": "https://stackoverflow.com/users/7438737/liyang-xie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1514394208, "creation_date": 1514394208, "question_id": 47995979, "link": "https://stackoverflow.com/questions/47995979/error-while-installing-osm2pgrouting", "title": "Error while installing osm2pgrouting", "body": "<p>I follow the steps in this link <a href=\"https://github.com/pgRouting/osm2pgrouting\" rel=\"nofollow noreferrer\">https://github.com/pgRouting/osm2pgrouting</a> to install osm2pgrouting, after I install all prerequisites packages and then I execute \"cmake -H. -Bbuild\" and then \"cd build/\", but when I execute \"make\", I had the following error:</p>\n\n<p>Scanning dependencies of target osm2pgrouting\n[  3%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/osm_elements/Relation.cpp.o\n[  7%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/osm_elements/Way.cpp.o\n[ 11%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/osm_elements/OSMDocument.cpp.o\n[ 15%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/osm_elements/osm2pgrouting.cpp.o\n[ 19%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/osm_elements/osm_tag.cpp.o\n[ 23%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/osm_elements/Node.cpp.o\n[ 26%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/osm_elements/osm_element.cpp.o\n[ 30%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o\n[ 34%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/utilities/handle_pgpass.cpp.o\n[ 38%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/utilities/utilities.cpp.o\n[ 42%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/database/osm_nodes_config.cpp.o\n[ 46%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/database/table_management.cpp.o\n[ 50%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/database/ways_config.cpp.o\n[ 53%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/database/ways_vertices_pgr_config.cpp.o\n[ 57%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/database/pois_config.cpp.o\n[ 61%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/database/Export2DB.cpp.o\n[ 65%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/database/osm_relations_config.cpp.o\n[ 69%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/database/configuration_config.cpp.o\n[ 73%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/database/osm_ways_config.cpp.o\n[ 76%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/parser/ConfigurationParserCallback.cpp.o\n[ 80%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/parser/XMLParser.cpp.o\n[ 84%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/parser/OSMDocumentParserCallback.cpp.o\n[ 88%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/configuration/tag_value.cpp.o\n[ 92%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/configuration/configuration.cpp.o\n[ 96%] Building CXX object CMakeFiles/osm2pgrouting.dir/src/configuration/tag_key.cpp.o\n[100%] Linking CXX executable osm2pgrouting\nCMakeFiles/osm2pgrouting.dir/src/osm_elements/OSMDocument.cpp.o: In function <code>boost::program_options::variables_map::operator[](std::string const&amp;) const':\nOSMDocument.cpp:(.text._ZNK5boost15program_options13variables_mapixERKSs[_ZNK5boost15program_options13variables_mapixERKSs]+0x1f): undefined reference to</code>boost::program_options::abstract_variables_map::operator[](std::string const&amp;) const'\nCMakeFiles/osm2pgrouting.dir/src/osm_elements/osm2pgrouting.cpp.o: In function <code>main':\nosm2pgrouting.cpp:(.text+0x305): undefined reference to</code>boost::program_options::options_description::options_description(std::string const&amp;, unsigned int, unsigned int)'\nCMakeFiles/osm2pgrouting.dir/src/osm_elements/osm2pgrouting.cpp.o: In function <code>pqxx::connect_direct::connect_direct(std::string const&amp;)':\nosm2pgrouting.cpp:(.text._ZN4pqxx14connect_directC2ERKSs[_ZN4pqxx14connect_directC5ERKSs]+0x1f): undefined reference to</code>pqxx::connectionpolicy::connectionpolicy(std::string const&amp;)'\nCMakeFiles/osm2pgrouting.dir/src/osm_elements/osm2pgrouting.cpp.o: In function <code>boost::program_options::basic_command_line_parser&lt;char&gt;::basic_command_line_parser(int, char const* const*)':\nosm2pgrouting.cpp:(.text._ZN5boost15program_options25basic_command_line_parserIcEC2EiPKPKc[_ZN5boost15program_options25basic_command_line_parserIcEC5EiPKPKc]+0x76): undefined reference to</code>boost::program_options::detail::cmdline::cmdline(std::vector > const&amp;)'\nCMakeFiles/osm2pgrouting.dir/src/osm_elements/osm2pgrouting.cpp.o: In function <code>std::vector&lt;std::string, std::allocator&lt;std::string&gt; &gt; boost::program_options::to_internal&lt;std::string&gt;(std::vector&lt;std::string, std::allocator&lt;std::string&gt; &gt; const&amp;)':\nosm2pgrouting.cpp:(.text._ZN5boost15program_options11to_internalISsEESt6vectorISsSaISsEERKS2_IT_SaIS5_EE[_ZN5boost15program_options11to_internalISsEESt6vectorISsSaISsEERKS2_IT_SaIS5_EE]+0x46): undefined reference to</code>boost::program_options::to_internal(std::string const&amp;)'\nCMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o: In function <code>get_option_description(boost::program_options::options_description&amp;)':\nprog_options.cpp:(.text+0x6e): undefined reference to</code>boost::program_options::options_description::options_description(std::string const&amp;, unsigned int, unsigned int)'\nprog_options.cpp:(.text+0xe3): undefined reference to <code>boost::program_options::options_description::options_description(std::string const&amp;, unsigned int, unsigned int)'\nprog_options.cpp:(.text+0x158): undefined reference to</code>boost::program_options::options_description::options_description(std::string const&amp;, unsigned int, unsigned int)'\nprog_options.cpp:(.text+0x1cd): undefined reference to <code>boost::program_options::options_description::options_description(std::string const&amp;, unsigned int, unsigned int)'\nCMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o: In function</code>boost::program_options::validation_error::validation_error(boost::program_options::validation_error::kind_t, std::string const&amp;, std::string const&amp;, int)':\nprog_options.cpp:(.text._ZN5boost15program_options16validation_errorC2ENS1_6kind_tERKSsS4_i[_ZN5boost15program_options16validation_errorC5ENS1_6kind_tERKSsS4_i]+0x2e): undefined reference to <code>boost::program_options::validation_error::get_template(boost::program_options::validation_error::kind_t)'\nprog_options.cpp:(.text._ZN5boost15program_options16validation_errorC2ENS1_6kind_tERKSsS4_i[_ZN5boost15program_options16validation_errorC5ENS1_6kind_tERKSsS4_i]+0x4c): undefined reference to</code>boost::program_options::error_with_option_name::error_with_option_name(std::string const&amp;, std::string const&amp;, std::string const&amp;, int)'\nCMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o:(.rodata._ZTVN5boost15program_options11typed_valueIbcEE[_ZTVN5boost15program_options11typed_valueIbcEE]+0x38): undefined reference to <code>boost::program_options::value_semantic_codecvt_helper&lt;char&gt;::parse(boost::any&amp;, std::vector&lt;std::string, std::allocator&lt;std::string&gt; &gt; const&amp;, bool) const'\nCMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o:(.rodata._ZTVN5boost15program_options11typed_valueImcEE[_ZTVN5boost15program_options11typed_valueImcEE]+0x38): undefined reference to</code>boost::program_options::value_semantic_codecvt_helper::parse(boost::any&amp;, std::vector > const&amp;, bool) const'\nCMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o:(.rodata._ZTVN5boost15program_options11typed_valueISscEE[_ZTVN5boost15program_options11typed_valueISscEE]+0x38): undefined reference to <code>boost::program_options::value_semantic_codecvt_helper&lt;char&gt;::parse(boost::any&amp;, std::vector&lt;std::string, std::allocator&lt;std::string&gt; &gt; const&amp;, bool) const'\nCMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o:(.rodata._ZTVN5boost15program_options20invalid_option_valueE[_ZTVN5boost15program_options20invalid_option_valueE]+0x30): undefined reference to</code>boost::program_options::error_with_option_name::substitute_placeholders(std::string const&amp;) const'\nCMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o:(.rodata._ZTVN5boost15program_options16validation_errorE[_ZTVN5boost15program_options16validation_errorE]+0x30): undefined reference to <code>boost::program_options::error_with_option_name::substitute_placeholders(std::string const&amp;) const'\nCMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o: In function</code>boost::program_options::typed_value::name() const':\nprog_options.cpp:(.text._ZNK5boost15program_options11typed_valueIbcE4nameEv[_ZNK5boost15program_options11typed_valueIbcE4nameEv]+0x26): undefined reference to <code>boost::program_options::arg'\nCMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o: In function</code>boost::program_options::typed_value::xparse(boost::any&amp;, std::vector > const&amp;) const':\nprog_options.cpp:(.text._ZNK5boost15program_options11typed_valueIbcE6xparseERNS_3anyERKSt6vectorISsSaISsEE[_ZNK5boost15program_options11typed_valueIbcE6xparseERNS_3anyERKSt6vectorISsSaISsEE]+0x7a): undefined reference to <code>boost::program_options::validate(boost::any&amp;, std::vector&lt;std::string, std::allocator&lt;std::string&gt; &gt; const&amp;, bool*, int)'\nCMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o: In function</code>boost::program_options::typed_value::name() const':\nprog_options.cpp:(.text._ZNK5boost15program_options11typed_valueImcE4nameEv[_ZNK5boost15program_options11typed_valueImcE4nameEv]+0x26): undefined reference to <code>boost::program_options::arg'\nCMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o: In function</code>boost::program_options::typed_value::name() const':\nprog_options.cpp:(.text._ZNK5boost15program_options11typed_valueISscE4nameEv[_ZNK5boost15program_options11typed_valueISscE4nameEv]+0x26): undefined reference to <code>boost::program_options::arg'\nCMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o: In function</code>boost::program_options::typed_value::xparse(boost::any&amp;, std::vector > const&amp;) const':\nprog_options.cpp:(.text._ZNK5boost15program_options11typed_valueISscE6xparseERNS_3anyERKSt6vectorISsSaISsEE[_ZNK5boost15program_options11typed_valueISscE6xparseERNS_3anyERKSt6vectorISsSaISsEE]+0x7a): undefined reference to <code>boost::program_options::validate(boost::any&amp;, std::vector&lt;std::string, std::allocator&lt;std::string&gt; &gt; const&amp;, std::string*, int)'\nCMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o: In function</code>void boost::program_options::validate(boost::any&amp;, std::vector, std::allocator >, std::allocator, std::allocator > > > const&amp;, unsigned long*, long)':\nprog_options.cpp:(.text._ZN5boost15program_options8validateImcEEvRNS_3anyERKSt6vectorISbIT0_St11char_traitsIS5_ESaIS5_EESaIS9_EEPT_l[_ZN5boost15program_options8validateImcEEvRNS_3anyERKSt6vectorISbIT0_St11char_traitsIS5_ESaIS5_EESaIS9_EEPT_l]+0x11e): undefined reference to <code>boost::program_options::invalid_option_value::invalid_option_value(std::string const&amp;)'\nCMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o:(.rodata._ZTVN5boost16exception_detail10clone_implINS0_19error_info_injectorINS_15program_options16validation_errorEEEEE[_ZTVN5boost16exception_detail10clone_implINS0_19error_info_injectorINS_15program_options16validation_errorEEEEE]+0x38): undefined reference to</code>boost::program_options::error_with_option_name::substitute_placeholders(std::string const&amp;) const'\nCMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o:(.rodata._ZTVN5boost16exception_detail19error_info_injectorINS_15program_options16validation_errorEEE[_ZTVN5boost16exception_detail19error_info_injectorINS_15program_options16validation_errorEEE]+0x30): undefined reference to <code>boost::program_options::error_with_option_name::substitute_placeholders(std::string const&amp;) const'\nCMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o:(.rodata._ZTVN5boost16exception_detail10clone_implINS0_19error_info_injectorINS_15program_options20invalid_option_valueEEEEE[_ZTVN5boost16exception_detail10clone_implINS0_19error_info_injectorINS_15program_options20invalid_option_valueEEEEE]+0x38): undefined reference to</code>boost::program_options::error_with_option_name::substitute_placeholders(std::string const&amp;) const'\nCMakeFiles/osm2pgrouting.dir/src/utilities/prog_options.cpp.o:(.rodata._ZTVN5boost16exception_detail19error_info_injectorINS_15program_options20invalid_option_valueEEE[_ZTVN5boost16exception_detail19error_info_injectorINS_15program_options20invalid_option_valueEEE]+0x30): undefined reference to <code>boost::program_options::error_with_option_name::substitute_placeholders(std::string const&amp;) const'\nCMakeFiles/osm2pgrouting.dir/src/database/Export2DB.cpp.o: In function</code>osm2pgr::Export2DB::has_extension(std::string const&amp;) const':\nExport2DB.cpp:(.text+0x398): undefined reference to <code>pqxx::transaction_base::exec(std::string const&amp;, std::string const&amp;)'\nCMakeFiles/osm2pgrouting.dir/src/database/Export2DB.cpp.o: In function</code>osm2pgr::Export2DB::install_postGIS() const':\nExport2DB.cpp:(.text+0x5b7): undefined reference to <code>pqxx::transaction_base::exec(std::string const&amp;, std::string const&amp;)'\nExport2DB.cpp:(.text+0x650): undefined reference to</code>pqxx::transaction_base::exec(std::string const&amp;, std::string const&amp;)'\nCMakeFiles/osm2pgrouting.dir/src/database/Export2DB.cpp.o: In function <code>osm2pgr::Export2DB::exists(std::string const&amp;) const':\nExport2DB.cpp:(.text+0x8aa): undefined reference to</code>pqxx::transaction_base::exec(std::string const&amp;, std::string const&amp;)'\nCMakeFiles/osm2pgrouting.dir/src/database/Export2DB.cpp.o: In function <code>osm2pgr::Export2DB::createTables() const':\nExport2DB.cpp:(.text+0xbe9): undefined reference to</code>pqxx::transaction_base::exec(std::string const&amp;, std::string const&amp;)'\nCMakeFiles/osm2pgrouting.dir/src/database/Export2DB.cpp.o:Export2DB.cpp:(.text+0xd7e): more undefined references to <code>pqxx::transaction_base::exec(std::string const&amp;, std::string const&amp;)' follow\nCMakeFiles/osm2pgrouting.dir/src/database/Export2DB.cpp.o: In function</code>pqxx::string_traits::null()':\nExport2DB.cpp:(.text._ZN4pqxx13string_traitsIlE4nullEv[_ZN4pqxx13string_traitsIlE4nullEv]+0x38): undefined reference to <code>pqxx::internal::throw_null_conversion(std::string const&amp;)'\nCMakeFiles/osm2pgrouting.dir/src/database/Export2DB.cpp.o: In function</code>pqxx::transaction&lt;(pqxx::isolation_level)0, (pqxx::readwrite_policy)1>::transaction(pqxx::connection_base&amp;)':\nExport2DB.cpp:(.text._ZN4pqxx11transactionILNS_15isolation_levelE0ELNS_16readwrite_policyE1EEC1ERNS_15connection_baseE[_ZN4pqxx11transactionILNS_15isolation_levelE0ELNS_16readwrite_policyE1EEC1ERNS_15connection_baseE]+0x8d): undefined reference to <code>pqxx::dbtransaction::fullname(std::string const&amp;, std::string const&amp;)'\nExport2DB.cpp:(.text._ZN4pqxx11transactionILNS_15isolation_levelE0ELNS_16readwrite_policyE1EEC1ERNS_15connection_baseE[_ZN4pqxx11transactionILNS_15isolation_levelE0ELNS_16readwrite_policyE1EEC1ERNS_15connection_baseE]+0x142): undefined reference to</code>pqxx::basic_transaction::basic_transaction(pqxx::connection_base&amp;, std::string const&amp;, pqxx::readwrite_policy)'\ncollect2: error: ld returned 1 exit status\nCMakeFiles/osm2pgrouting.dir/build.make:722: recipe for target 'osm2pgrouting' failed\nmake[2]: <strong>* [osm2pgrouting] Error 1\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/osm2pgrouting.dir/all' failed\nmake[1]: *</strong> [CMakeFiles/osm2pgrouting.dir/all] Error 2\nMakefile:127: recipe for target 'all' failed\nmake: *** [all] Error 2</p>\n\n<p>Have no idea why this happened, can anyone help me? Thanks a lot!</p>\n"}, {"tags": ["c++", "variables", "numbers", "decimal", "division"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 4, "creation_date": 1514394229, "post_id": 47995926, "comment_id": 82959999, "body": "The number of <i>&quot;decimals&quot;</i> isn&#39;t fixed with <code>double</code> values."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 2, "creation_date": 1514394353, "post_id": 47995926, "comment_id": 82960053, "body": "Do you want to store 6 decimals? Or as many as there are in the exact solution? You could write a <code>Rational</code> class, that stores the numerator and denominator. What are you actually trying to do?"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1514395174, "post_id": 47995926, "comment_id": 82960390, "body": "Things get really strange when you realize you can&#39;t even accurately store the number <code>0.1</code> using type <code>double</code>. You should investigate floating point types theory in more details."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 381, "user_id": 972541, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/48xBa.png?s=128&g=1", "display_name": "verdery", "link": "https://stackoverflow.com/users/972541/verdery"}, "edited": false, "score": 0, "creation_date": 1514396250, "post_id": 47995926, "comment_id": 82960784, "body": "@verdery It depends on your implementation, mine has <code>sizeof(long) == 8</code> so <code>33732193487</code> will easily fit. You&#39;d probably get a compiler warning if <code>long</code> was not large enough to store your number."}, {"owner": {"reputation": 841, "user_id": 275780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9fda69904fe03f3c3937634042e4ef6?s=128&d=identicon&r=PG", "display_name": "xyious", "link": "https://stackoverflow.com/users/275780/xyious"}, "edited": false, "score": 1, "creation_date": 1514396414, "post_id": 47995926, "comment_id": 82960844, "body": "2 ways, 1) store the double and output 6 decimals. 2) store the result times 1,000,000 as an integer and then divide by 1,000,000 to output."}], "answers": [{"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1514398218, "creation_date": 1514398218, "answer_id": 47996754, "question_id": 47995926, "link": "https://stackoverflow.com/questions/47995926/how-to-set-number-format-to-show-all-decimal-digits-in-c/47996754#47996754", "title": "How to set number format to show all decimal digits in C++?", "body": "<p>Let me guess (a <strong>complete</strong> program would have been better): you're seeing six decimal places when you write the value to standard out:</p>\n\n<pre><code>std::cout &lt;&lt; c &lt;&lt; '\\n';\n</code></pre>\n\n<p>Those six decimal places are the default <strong>for output</strong>; they have nothing to do with the precision of the <strong>value</strong> of <code>c</code>, which is determined by the <strong>type</strong> of <code>c</code>. For <code>double</code> you typically have about fifteen digits. To see those digits in your output statement, use <code>std::setprecision</code>:</p>\n\n<pre><code>std::cout &lt;&lt; std::setprecision(15) &lt;&lt; c &lt;&lt; '\\n';\n</code></pre>\n\n<p>But beware: you can use values greater than 15 in the call to <code>setprecision</code> and the stream inserter will happily generate more digits, with nonsensical values.</p>\n"}], "owner": {"reputation": 21, "user_id": 9146016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5045cc4b510f800e69f1fcd84a7ac8df?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Pascual Sanchez", "link": "https://stackoverflow.com/users/9146016/carlos-pascual-sanchez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1324, "favorite_count": 1, "closed_date": 1514419181, "answer_count": 1, "score": -1, "last_activity_date": 1514401942, "creation_date": 1514393973, "last_edit_date": 1514401942, "question_id": 47995926, "link": "https://stackoverflow.com/questions/47995926/how-to-set-number-format-to-show-all-decimal-digits-in-c", "closed_reason": "Needs details or clarity", "title": "How to set number format to show all decimal digits in C++?", "body": "<p>I have a problem in c++, I have this code to do a division:</p>\n\n<pre><code>long a = 33732193487;\n\nint b = 1000000;\n\ndouble c = (double)a/(double)b;\n</code></pre>\n\n<p>Well, I would like to store the complete result in the variable c, I mean:</p>\n\n<pre><code>c = 33732.193487;\n</code></pre>\n\n<p>for later, for example, use this value to make a sum or substrac. But I only get to store the result with one decimal.</p>\n\n<p>Is there any option to store the 6 decimals with c++?</p>\n\n<p>Thank you in advance! Sorry if my question is too obvious.</p>\n"}, {"tags": ["c++", "c++11", "templates"], "comments": [{"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 2, "creation_date": 1514394901, "post_id": 47995881, "comment_id": 82960278, "body": "Which line is line 33? What is the type of <code>m_name</code>?"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1514395149, "post_id": 47995881, "comment_id": 82960374, "body": "What\u2019s the definition of the <code>CompactionFilter</code> class? If you weren\u2019t using <code>unique_ptr</code> and you were finished using the <code>CompactionFilter</code> you created this way, how would you get rid of it?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1514396134, "post_id": 47995881, "comment_id": 82960738, "body": "Please narrow the code down to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 75, "user_id": 9083836, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a470f97f60170c5ca20495ee3d430729?s=128&d=identicon&r=PG&f=1", "display_name": "Bianca Mattiolo", "link": "https://stackoverflow.com/users/9083836/bianca-mattiolo"}, "edited": false, "score": 0, "creation_date": 1514396593, "post_id": 47995881, "comment_id": 82960913, "body": "std::unique_ptr&lt;const char[]&gt; m_name;"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1514396191, "post_id": 47996240, "comment_id": 82960763, "body": "<code>const_cast</code> is very, <i>very</i> rarely the correct solution."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1514396611, "post_id": 47996240, "comment_id": 82960918, "body": "@JesperJuhl If you think about the <code>const_cast</code> here, it is adding constness, rather than removing it, which is perfectly safe and is an implicit conversion."}, {"owner": {"reputation": 75, "user_id": 9083836, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a470f97f60170c5ca20495ee3d430729?s=128&d=identicon&r=PG&f=1", "display_name": "Bianca Mattiolo", "link": "https://stackoverflow.com/users/9083836/bianca-mattiolo"}, "edited": false, "score": 0, "creation_date": 1514397092, "post_id": 47996240, "comment_id": 82961075, "body": "m_name.reset( const_cast&lt;char * const&gt;( JniUtil::copyString(env, jname, &amp;has_exception)));  // also releases jname ---&gt;java/rocksjni/compaction_filter_factory_jnicallback.cc:3&zwnj;&#8203;4:90: error: invalid const_cast from type \u2018std::unique_ptr&lt;char []&gt;\u2019 to type \u2018char* const\u2019    m_name.reset( const_cast&lt;char * const&gt;( JniUtil::copyString(env, jname, &amp;has_exception)));  // also releases jname"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 75, "user_id": 9083836, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a470f97f60170c5ca20495ee3d430729?s=128&d=identicon&r=PG&f=1", "display_name": "Bianca Mattiolo", "link": "https://stackoverflow.com/users/9083836/bianca-mattiolo"}, "edited": false, "score": 0, "creation_date": 1514397373, "post_id": 47996240, "comment_id": 82961208, "body": "@BiancaMattiolo Updated the answer for you, note <code>release</code> call in there."}, {"owner": {"reputation": 75, "user_id": 9083836, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a470f97f60170c5ca20495ee3d430729?s=128&d=identicon&r=PG&f=1", "display_name": "Bianca Mattiolo", "link": "https://stackoverflow.com/users/9083836/bianca-mattiolo"}, "edited": false, "score": 0, "creation_date": 1514398114, "post_id": 47996240, "comment_id": 82961491, "body": "static std::unique_ptr&lt;char[]&gt; copyString(JNIEnv* env, jstring js,         jboolean* has_exception) {"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 75, "user_id": 9083836, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a470f97f60170c5ca20495ee3d430729?s=128&d=identicon&r=PG&f=1", "display_name": "Bianca Mattiolo", "link": "https://stackoverflow.com/users/9083836/bianca-mattiolo"}, "edited": false, "score": 0, "creation_date": 1514398160, "post_id": 47996240, "comment_id": 82961520, "body": "@BiancaMattiolo That&#39;s what I suspected."}, {"owner": {"reputation": 75, "user_id": 9083836, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a470f97f60170c5ca20495ee3d430729?s=128&d=identicon&r=PG&f=1", "display_name": "Bianca Mattiolo", "link": "https://stackoverflow.com/users/9083836/bianca-mattiolo"}, "edited": false, "score": 0, "creation_date": 1514399140, "post_id": 47996240, "comment_id": 82961910, "body": "static std::unique_ptr&lt;char[]&gt; copyString(JNIEnv* env, jstring js,         jboolean* has_exception)  ... it seams be the right way ... thanks for the help. I began to understand how to read stack trace in c++ :) Anyway template usage in c++ it is a bit complex :) i have to make exercise a lot :)"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1514397336, "last_edit_date": 1514397336, "creation_date": 1514395547, "answer_id": 47996240, "question_id": 47995881, "link": "https://stackoverflow.com/questions/47995881/unique-ptr-c-usage/47996240#47996240", "title": "Unique_ptr c++ usage", "body": "<p>The error says that you have a <code>std::unique_ptr&lt;char const[]&gt;</code> object on which you try to call function <code>reset</code> passing <code>char*</code> as an argument.</p>\n\n<p>Well, that argument needs to be <code>char const*</code> for that to compile, which you can achieve with a <code>const_cast</code>, e.g.:</p>\n\n<pre><code>std::unique_ptr&lt;char const[]&gt; p;\nchar* q = new char[1]{};\np.reset(const_cast&lt;char const*&gt;(q));\n</code></pre>\n\n<hr>\n\n<p>Looks like <code>JniUtil::copyString</code> returns <code>std::unique_ptr&lt;char[]&gt;</code> and you assign it to <code>std::unique_ptr&lt;char const[]&gt;</code> which causes the error.</p>\n\n<p>One fix is to change the type of <code>m_name</code> to be <code>std::unique_ptr&lt;char[]&gt;</code>. </p>\n\n<p>Another is to manually add constness (adding constness is safe and is an implicit conversion, but is needed here to choose the correct overload of <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/reset\" rel=\"nofollow noreferrer\"><code>std::unique_ptr&lt;&gt;::reset</code></a>):</p>\n\n<pre><code>m_name.reset(const_cast&lt;char const*&gt;(JniUtil::copyString(...).release()));\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 9083836, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a470f97f60170c5ca20495ee3d430729?s=128&d=identicon&r=PG&f=1", "display_name": "Bianca Mattiolo", "link": "https://stackoverflow.com/users/9083836/bianca-mattiolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1514397336, "creation_date": 1514393774, "last_edit_date": 1514396011, "question_id": 47995881, "link": "https://stackoverflow.com/questions/47995881/unique-ptr-c-usage", "title": "Unique_ptr c++ usage", "body": "<p>Sincerelly i m not so expert with c++ RAII features. I never used before. Anyway i m begining to study about it (i m in \"kernel panic\").  Compiling a module i have the following error : </p>\n\n<pre><code>In file included from /usr/include/c++/6/memory:81:0,\n                 from ./java/./rocksjni/compaction_filter_factory_jnicallback.h:13,\n                 from java/rocksjni/compaction_filter_factory_jnicallback.cc:9:\n/usr/include/c++/6/bits/unique_ptr.h: In instantiation of \u2018void std::unique_ptr&lt;_Tp [], _Dp&gt;::reset(_Up) [with _Up = char*; &lt;template-parameter-2-2&gt; = void; _Tp = const char; _Dp = std::default_delete&lt;const char []&gt;]\u2019:\n/usr/include/c++/6/bits/unique_ptr.h:539:9:   required from \u2018typename std::enable_if&lt;std::__and_&lt;std::__and_&lt;std::is_array&lt;_Up&gt;, std::is_same&lt;typename std::unique_ptr&lt;_Tp [], _Dp&gt;::_Pointer::type, _Tp*&gt;, std::is_same&lt;typename std::unique_ptr&lt;_Up, _Ep&gt;::pointer, typename std::unique_ptr&lt;_Up, _Ep&gt;::element_type*&gt;, std::is_convertible&lt;typename std::unique_ptr&lt;_Up, _Ep&gt;::element_type (*)[], _Tp (*)[]&gt;, std::__or_&lt;std::__and_&lt;std::is_reference&lt;_Dp&gt;, std::is_same&lt;_T2, _U2&gt; &gt;, std::__and_&lt;std::__not_&lt;std::is_reference&lt;_Dp&gt; &gt;, std::is_convertible&lt;_Ep, _Dp&gt; &gt; &gt; &gt;, std::is_assignable&lt;_T2&amp;, _U2&amp;&amp;&gt; &gt;::value, std::unique_ptr&lt;_Tp [], _Dp&gt;&amp;&gt;::type std::unique_ptr&lt;_Tp [], _Dp&gt;::operator=(std::unique_ptr&lt;_Up, _Ep&gt;&amp;&amp;) [with _Up = char []; _Ep = std::default_delete&lt;char []&gt;; _Tp = const char; _Dp = std::default_delete&lt;const char []&gt;; typename std::enable_if&lt;std::__and_&lt;std::__and_&lt;std::is_array&lt;_Up&gt;, std::is_same&lt;typename std::unique_ptr&lt;_Tp [], _Dp&gt;::_Pointer::type, _Tp*&gt;, std::is_same&lt;typename std::unique_ptr&lt;_Up, _Ep&gt;::pointer, typename std::unique_ptr&lt;_Up, _Ep&gt;::element_type*&gt;, std::is_convertible&lt;typename std::unique_ptr&lt;_Up, _Ep&gt;::element_type (*)[], _Tp (*)[]&gt;, std::__or_&lt;std::__and_&lt;std::is_reference&lt;_Dp&gt;, std::is_same&lt;_T2, _U2&gt; &gt;, std::__and_&lt;std::__not_&lt;std::is_reference&lt;_Dp&gt; &gt;, std::is_convertible&lt;_Ep, _Dp&gt; &gt; &gt; &gt;, std::is_assignable&lt;_T2&amp;, _U2&amp;&amp;&gt; &gt;::value, std::unique_ptr&lt;_Tp [], _Dp&gt;&amp;&gt;::type = std::unique_ptr&lt;const char []&gt;&amp;]\u2019\njava/rocksjni/compaction_filter_factory_jnicallback.cc:33:58:   required from here\n/usr/include/c++/6/bits/unique_ptr.h:614:6: error: no matching function for call to \u2018swap(const char*&amp;, char*&amp;)\u2019\n  swap(std::get&lt;0&gt;(_M_t), __p);\n  ~~~~^~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /usr/include/c++/6/bits/stl_pair.h:59:0,\n                 from /usr/include/c++/6/bits/stl_algobase.h:64,\n                 from /usr/include/c++/6/memory:62,\n                 from ./java/./rocksjni/compaction_filter_factory_jnicallback.h:13,\n                 from java/rocksjni/compaction_filter_factory_jnicallback.cc:9:\n/usr/include/c++/6/bits/move.h:179:5: note: candidate: template&lt;class _Tp&gt; typename std::enable_if&lt;std::__and_&lt;std::is_move_constructible&lt;_Tp&gt;, std::is_move_assignable&lt;_Tp&gt; &gt;::value&gt;::type std::swap(_Tp&amp;, _Tp&amp;)\n     swap(_Tp&amp; __a, _Tp&amp; __b)\n     ^~~~\n/usr/include/c++/6/bits/move.h:179:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/6/memory:81:0,\n                 from ./java/./rocksjni/compaction_filter_factory_jnicallback.h:13,\n                 from java/rocksjni/compaction_filter_factory_jnicallback.cc:9:\n/usr/include/c++/6/bits/unique_ptr.h:614:6: note:   deduced conflicting types for parameter \u2018_Tp\u2019 (\u2018const char*\u2019 and \u2018char*\u2019)\n  swap(std::get&lt;0&gt;(_M_t), __p);\n  ~~~~^~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /usr/include/c++/6/bits/stl_pair.h:59:0,\n                 from /usr/include/c++/6/bits/stl_algobase.h:64,\n                 from /usr/include/c++/6/memory:62,\n                 from ./java/./rocksjni/compaction_filter_factory_jnicallback.h:13,\n                 from java/rocksjni/compaction_filter_factory_jnicallback.cc:9:\n/usr/include/c++/6/bits/move.h:202:5: note: candidate: template&lt;class _Tp, long unsigned int _Nm&gt; typename std::enable_if&lt;std::__is_swappable&lt;_Tp&gt;::value&gt;::type std::swap(_Tp (&amp;)[_Nm], _Tp (&amp;)[_Nm])\n     swap(_Tp (&amp;__a)[_Nm], _Tp (&amp;__b)[_Nm])\n     ^~~~\n/usr/include/c++/6/bits/move.h:202:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/6/memory:81:0,\n                 from ./java/./rocksjni/compaction_filter_factory_jnicallback.h:13,\n                 from java/rocksjni/compaction_filter_factory_jnicallback.cc:9:\n/usr/include/c++/6/bits/unique_ptr.h:614:6: note:   mismatched types \u2018_Tp [_Nm]\u2019 and \u2018std::__tuple_element_t&lt;0ul, std::tuple&lt;const char*, std::default_delete&lt;const char []&gt; &gt; &gt; {aka const char*}\u2019\n  swap(std::get&lt;0&gt;(_M_t), __p);\n  ~~~~^~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /usr/include/c++/6/bits/stl_algobase.h:64:0,\n                 from /usr/include/c++/6/memory:62,\n                 from ./java/./rocksjni/compaction_filter_factory_jnicallback.h:13,\n                 from java/rocksjni/compaction_filter_factory_jnicallback.cc:9:\n/usr/include/c++/6/bits/stl_pair.h:471:5: note: candidate: template&lt;class _T1, class _T2&gt; void std::swap(std::pair&lt;_T1, _T2&gt;&amp;, std::pair&lt;_T1, _T2&gt;&amp;)\n     swap(pair&lt;_T1, _T2&gt;&amp; __x, pair&lt;_T1, _T2&gt;&amp; __y)\n     ^~~~\n/usr/include/c++/6/bits/stl_pair.h:471:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/6/memory:81:0,\n                 from ./java/./rocksjni/compaction_filter_factory_jnicallback.h:13,\n                 from java/rocksjni/compaction_filter_factory_jnicallback.cc:9:\n/usr/include/c++/6/bits/unique_ptr.h:614:6: note:   mismatched types \u2018std::pair&lt;_T1, _T2&gt;\u2019 and \u2018std::__tuple_element_t&lt;0ul, std::tuple&lt;const char*, std::default_delete&lt;const char []&gt; &gt; &gt; {aka const char*}\u2019\n  swap(std::get&lt;0&gt;(_M_t), __p);\n  ~~~~^~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /usr/include/c++/6/string:52:0,\n                 from /usr/include/c++/6/stdexcept:39,\n                 from /usr/include/c++/6/array:39,\n                 from /usr/include/c++/6/tuple:39,\n                 from /usr/include/c++/6/functional:55,\n                 from /usr/include/c++/6/memory:79,\n                 from ./java/./rocksjni/compaction_filter_factory_jnicallback.h:13,\n                 from java/rocksjni/compaction_filter_factory_jnicallback.cc:9:\n/usr/include/c++/6/bits/basic_string.h:5287:5: note: candidate: template&lt;class _CharT, class _Traits, class _Alloc&gt; void std::swap(std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;, std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;)\n     swap(basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp; __lhs,\n     ^~~~\n/usr/include/c++/6/bits/basic_string.h:5287:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/6/memory:81:0,\n                 from ./java/./rocksjni/compaction_filter_factory_jnicallback.h:13,\n                 from java/rocksjni/compaction_filter_factory_jnicallback.cc:9:\n/usr/include/c++/6/bits/unique_ptr.h:614:6: note:   mismatched types \u2018std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;\u2019 and \u2018std::__tuple_element_t&lt;0ul, std::tuple&lt;const char*, std::default_delete&lt;const char []&gt; &gt; &gt; {aka const char*}\u2019\n  swap(std::get&lt;0&gt;(_M_t), __p);\n  ~~~~^~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /usr/include/c++/6/tuple:39:0,\n                 from /usr/include/c++/6/functional:55,\n                 from /usr/include/c++/6/memory:79,\n                 from ./java/./rocksjni/compaction_filter_factory_jnicallback.h:13,\n                 from java/rocksjni/compaction_filter_factory_jnicallback.cc:9:\n/usr/include/c++/6/array:275:5: note: candidate: template&lt;class _Tp, long unsigned int _Nm&gt; void std::swap(std::array&lt;_Tp, _Nm&gt;&amp;, std::array&lt;_Tp, _Nm&gt;&amp;)\n     swap(array&lt;_Tp, _Nm&gt;&amp; __one, array&lt;_Tp, _Nm&gt;&amp; __two)\n     ^~~~\n/usr/include/c++/6/array:275:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/6/memory:81:0,\n                 from ./java/./rocksjni/compaction_filter_factory_jnicallback.h:13,\n                 from java/rocksjni/compaction_filter_factory_jnicallback.cc:9:\n/usr/include/c++/6/bits/unique_ptr.h:614:6: note:   mismatched types \u2018std::array&lt;_Tp, _Nm&gt;\u2019 and \u2018std::__tuple_element_t&lt;0ul, std::tuple&lt;const char*, std::default_delete&lt;const char []&gt; &gt; &gt; {aka const char*}\u2019\n  swap(std::get&lt;0&gt;(_M_t), __p);\n  ~~~~^~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /usr/include/c++/6/functional:55:0,\n                 from /usr/include/c++/6/memory:79,\n                 from ./java/./rocksjni/compaction_filter_factory_jnicallback.h:13,\n                 from java/rocksjni/compaction_filter_factory_jnicallback.cc:9:\n/usr/include/c++/6/tuple:1546:5: note: candidate: template&lt;class ... _Elements&gt; void std::swap(std::tuple&lt;_Elements ...&gt;&amp;, std::tuple&lt;_Elements ...&gt;&amp;)\n     swap(tuple&lt;_Elements...&gt;&amp; __x, tuple&lt;_Elements...&gt;&amp; __y)\n     ^~~~\n/usr/include/c++/6/tuple:1546:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/6/memory:81:0,\n                 from ./java/./rocksjni/compaction_filter_factory_jnicallback.h:13,\n                 from java/rocksjni/compaction_filter_factory_jnicallback.cc:9:\n/usr/include/c++/6/bits/unique_ptr.h:614:6: note:   mismatched types \u2018std::tuple&lt;_Elements ...&gt;\u2019 and \u2018std::__tuple_element_t&lt;0ul, std::tuple&lt;const char*, std::default_delete&lt;const char []&gt; &gt; &gt; {aka const char*}\u2019\n  swap(std::get&lt;0&gt;(_M_t), __p);\n  ~~~~^~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /usr/include/c++/6/memory:79:0,\n                 from ./java/./rocksjni/compaction_filter_factory_jnicallback.h:13,\n                 from java/rocksjni/compaction_filter_factory_jnicallback.cc:9:\n/usr/include/c++/6/functional:2238:5: note: candidate: template&lt;class _Res, class ... _Args&gt; void std::swap(std::function&lt;_Res(_ArgTypes ...)&gt;&amp;, std::function&lt;_Res(_ArgTypes ...)&gt;&amp;)\n     swap(function&lt;_Res(_Args...)&gt;&amp; __x, function&lt;_Res(_Args...)&gt;&amp; __y)\n     ^~~~\n/usr/include/c++/6/functional:2238:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/6/memory:81:0,\n                 from ./java/./rocksjni/compaction_filter_factory_jnicallback.h:13,\n                 from java/rocksjni/compaction_filter_factory_jnicallback.cc:9:\n/usr/include/c++/6/bits/unique_ptr.h:614:6: note:   mismatched types \u2018std::function&lt;_Res(_ArgTypes ...)&gt;\u2019 and \u2018std::__tuple_element_t&lt;0ul, std::tuple&lt;const char*, std::default_delete&lt;const char []&gt; &gt; &gt; {aka const char*}\u2019\n  swap(std::get&lt;0&gt;(_M_t), __p);\n  ~~~~^~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /usr/include/c++/6/memory:81:0,\n                 from ./java/./rocksjni/comparatorjnicallback.h:13,\n                 from java/rocksjni/comparatorjnicallback.cc:9:\n/usr/include/c++/6/bits/unique_ptr.h: In instantiation of \u2018void std::unique_ptr&lt;_Tp [], _Dp&gt;::reset(_Up) [with _Up = char*; &lt;template-parameter-2-2&gt; = void; _Tp = const char; _Dp = std::default_delete&lt;const char []&gt;]\u2019:\n/usr/include/c++/6/bits/unique_ptr.h:539:9:   required from \u2018typename std::enable_if&lt;std::__and_&lt;std::__and_&lt;std::is_array&lt;_Up&gt;, std::is_same&lt;typename std::unique_ptr&lt;_Tp [], _Dp&gt;::_Pointer::type, _Tp*&gt;, std::is_same&lt;typename std::unique_ptr&lt;_Up, _Ep&gt;::pointer, typename std::unique_ptr&lt;_Up, _Ep&gt;::element_type*&gt;, std::is_convertible&lt;typename std::unique_ptr&lt;_Up, _Ep&gt;::element_type (*)[], _Tp (*)[]&gt;, std::__or_&lt;std::__and_&lt;std::is_reference&lt;_Dp&gt;, std::is_same&lt;_T2, _U2&gt; &gt;, std::__and_&lt;std::__not_&lt;std::is_reference&lt;_Dp&gt; &gt;, std::is_convertible&lt;_Ep, _Dp&gt; &gt; &gt; &gt;, std::is_assignable&lt;_T2&amp;, _U2&amp;&amp;&gt; &gt;::value, std::unique_ptr&lt;_Tp [], _Dp&gt;&amp;&gt;::type std::unique_ptr&lt;_Tp [], _Dp&gt;::operator=(std::unique_ptr&lt;_Up, _Ep&gt;&amp;&amp;) [with _Up = char []; _Ep = std::default_delete&lt;char []&gt;; _Tp = const char; _Dp = std::default_delete&lt;const char []&gt;; typename std::enable_if&lt;std::__and_&lt;std::__and_&lt;std::is_array&lt;_Up&gt;, std::is_same&lt;typename std::unique_ptr&lt;_Tp [], _Dp&gt;::_Pointer::type, _Tp*&gt;, std::is_same&lt;typename std::unique_ptr&lt;_Up, _Ep&gt;::pointer, typename std::unique_ptr&lt;_Up, _Ep&gt;::element_type*&gt;, std::is_convertible&lt;typename std::unique_ptr&lt;_Up, _Ep&gt;::element_type (*)[], _Tp (*)[]&gt;, std::__or_&lt;std::__and_&lt;std::is_reference&lt;_Dp&gt;, std::is_same&lt;_T2, _U2&gt; &gt;, std::__and_&lt;std::__not_&lt;std::is_reference&lt;_Dp&gt; &gt;, std::is_convertible&lt;_Ep, _Dp&gt; &gt; &gt; &gt;, std::is_assignable&lt;_T2&amp;, _U2&amp;&amp;&gt; &gt;::value, std::unique_ptr&lt;_Tp [], _Dp&gt;&amp;&gt;::type = std::unique_ptr&lt;const char []&gt;&amp;]\u2019\njava/rocksjni/comparatorjnicallback.cc:34:21:   required from here\n/usr/include/c++/6/bits/unique_ptr.h:614:6: error: no matching function for call to \u2018swap(const char*&amp;, char*&amp;)\u2019\n  swap(std::get&lt;0&gt;(_M_t), __p);\n  ~~~~^~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /usr/include/c++/6/bits/stl_pair.h:59:0,\n                 from /usr/include/c++/6/bits/stl_algobase.h:64,\n                 from /usr/include/c++/6/memory:62,\n                 from ./java/./rocksjni/comparatorjnicallback.h:13,\n                 from java/rocksjni/comparatorjnicallback.cc:9:\n/usr/include/c++/6/bits/move.h:179:5: note: candidate: template&lt;class _Tp&gt; typename std::enable_if&lt;std::__and_&lt;std::is_move_constructible&lt;_Tp&gt;, std::is_move_assignable&lt;_Tp&gt; &gt;::value&gt;::type std::swap(_Tp&amp;, _Tp&amp;)\n     swap(_Tp&amp; __a, _Tp&amp; __b)\n     ^~~~\n/usr/include/c++/6/bits/move.h:179:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/6/memory:81:0,\n                 from ./java/./rocksjni/comparatorjnicallback.h:13,\n                 from java/rocksjni/comparatorjnicallback.cc:9:\n/usr/include/c++/6/bits/unique_ptr.h:614:6: note:   deduced conflicting types for parameter \u2018_Tp\u2019 (\u2018const char*\u2019 and \u2018char*\u2019)\n  swap(std::get&lt;0&gt;(_M_t), __p);\n  ~~~~^~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /usr/include/c++/6/bits/stl_pair.h:59:0,\n                 from /usr/include/c++/6/bits/stl_algobase.h:64,\n                 from /usr/include/c++/6/memory:62,\n                 from ./java/./rocksjni/comparatorjnicallback.h:13,\n                 from java/rocksjni/comparatorjnicallback.cc:9:\n/usr/include/c++/6/bits/move.h:202:5: note: candidate: template&lt;class _Tp, long unsigned int _Nm&gt; typename std::enable_if&lt;std::__is_swappable&lt;_Tp&gt;::value&gt;::type std::swap(_Tp (&amp;)[_Nm], _Tp (&amp;)[_Nm])\n     swap(_Tp (&amp;__a)[_Nm], _Tp (&amp;__b)[_Nm])\n     ^~~~\n/usr/include/c++/6/bits/move.h:202:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/6/memory:81:0,\n                 from ./java/./rocksjni/comparatorjnicallback.h:13,\n                 from java/rocksjni/comparatorjnicallback.cc:9:\n/usr/include/c++/6/bits/unique_ptr.h:614:6: note:   mismatched types \u2018_Tp [_Nm]\u2019 and \u2018std::__tuple_element_t&lt;0ul, std::tuple&lt;const char*, std::default_delete&lt;const char []&gt; &gt; &gt; {aka const char*}\u2019\n  swap(std::get&lt;0&gt;(_M_t), __p);\n  ~~~~^~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /usr/include/c++/6/bits/stl_algobase.h:64:0,\n                 from /usr/include/c++/6/memory:62,\n                 from ./java/./rocksjni/comparatorjnicallback.h:13,\n                 from java/rocksjni/comparatorjnicallback.cc:9:\n/usr/include/c++/6/bits/stl_pair.h:471:5: note: candidate: template&lt;class _T1, class _T2&gt; void std::swap(std::pair&lt;_T1, _T2&gt;&amp;, std::pair&lt;_T1, _T2&gt;&amp;)\n     swap(pair&lt;_T1, _T2&gt;&amp; __x, pair&lt;_T1, _T2&gt;&amp; __y)\n     ^~~~\n/usr/include/c++/6/bits/stl_pair.h:471:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/6/memory:81:0,\n                 from ./java/./rocksjni/comparatorjnicallback.h:13,\n                 from java/rocksjni/comparatorjnicallback.cc:9:\n/usr/include/c++/6/bits/unique_ptr.h:614:6: note:   mismatched types \u2018std::pair&lt;_T1, _T2&gt;\u2019 and \u2018std::__tuple_element_t&lt;0ul, std::tuple&lt;const char*, std::default_delete&lt;const char []&gt; &gt; &gt; {aka const char*}\u2019\n  swap(std::get&lt;0&gt;(_M_t), __p);\n  ~~~~^~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /usr/include/c++/6/string:52:0,\n                 from /usr/include/c++/6/stdexcept:39,\n                 from /usr/include/c++/6/array:39,\n                 from /usr/include/c++/6/tuple:39,\n                 from /usr/include/c++/6/functional:55,\n                 from /usr/include/c++/6/memory:79,\n                 from ./java/./rocksjni/comparatorjnicallback.h:13,\n                 from java/rocksjni/comparatorjnicallback.cc:9:\n/usr/include/c++/6/bits/basic_string.h:5287:5: note: candidate: template&lt;class _CharT, class _Traits, class _Alloc&gt; void std::swap(std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;, std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;)\n     swap(basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp; __lhs,\n     ^~~~\n/usr/include/c++/6/bits/basic_string.h:5287:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/6/memory:81:0,\n                 from ./java/./rocksjni/comparatorjnicallback.h:13,\n                 from java/rocksjni/comparatorjnicallback.cc:9:\n/usr/include/c++/6/bits/unique_ptr.h:614:6: note:   mismatched types \u2018std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;\u2019 and \u2018std::__tuple_element_t&lt;0ul, std::tuple&lt;const char*, std::default_delete&lt;const char []&gt; &gt; &gt; {aka const char*}\u2019\n  swap(std::get&lt;0&gt;(_M_t), __p);\n  ~~~~^~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /usr/include/c++/6/tuple:39:0,\n                 from /usr/include/c++/6/functional:55,\n                 from /usr/include/c++/6/memory:79,\n                 from ./java/./rocksjni/comparatorjnicallback.h:13,\n                 from java/rocksjni/comparatorjnicallback.cc:9:\n/usr/include/c++/6/array:275:5: note: candidate: template&lt;class _Tp, long unsigned int _Nm&gt; void std::swap(std::array&lt;_Tp, _Nm&gt;&amp;, std::array&lt;_Tp, _Nm&gt;&amp;)\n     swap(array&lt;_Tp, _Nm&gt;&amp; __one, array&lt;_Tp, _Nm&gt;&amp; __two)\n     ^~~~\n/usr/include/c++/6/array:275:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/6/memory:81:0,\n                 from ./java/./rocksjni/comparatorjnicallback.h:13,\n                 from java/rocksjni/comparatorjnicallback.cc:9:\n/usr/include/c++/6/bits/unique_ptr.h:614:6: note:   mismatched types \u2018std::array&lt;_Tp, _Nm&gt;\u2019 and \u2018std::__tuple_element_t&lt;0ul, std::tuple&lt;const char*, std::default_delete&lt;const char []&gt; &gt; &gt; {aka const char*}\u2019\n  swap(std::get&lt;0&gt;(_M_t), __p);\n  ~~~~^~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /usr/include/c++/6/functional:55:0,\n                 from /usr/include/c++/6/memory:79,\n                 from ./java/./rocksjni/comparatorjnicallback.h:13,\n                 from java/rocksjni/comparatorjnicallback.cc:9:\n/usr/include/c++/6/tuple:1546:5: note: candidate: template&lt;class ... _Elements&gt; void std::swap(std::tuple&lt;_Elements ...&gt;&amp;, std::tuple&lt;_Elements ...&gt;&amp;)\n     swap(tuple&lt;_Elements...&gt;&amp; __x, tuple&lt;_Elements...&gt;&amp; __y)\n     ^~~~\n/usr/include/c++/6/tuple:1546:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/6/memory:81:0,\n                 from ./java/./rocksjni/comparatorjnicallback.h:13,\n                 from java/rocksjni/comparatorjnicallback.cc:9:\n/usr/include/c++/6/bits/unique_ptr.h:614:6: note:   mismatched types \u2018std::tuple&lt;_Elements ...&gt;\u2019 and \u2018std::__tuple_element_t&lt;0ul, std::tuple&lt;const char*, std::default_delete&lt;const char []&gt; &gt; &gt; {aka const char*}\u2019\n  swap(std::get&lt;0&gt;(_M_t), __p);\n  ~~~~^~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /usr/include/c++/6/memory:79:0,\n                 from ./java/./rocksjni/comparatorjnicallback.h:13,\n                 from java/rocksjni/comparatorjnicallback.cc:9:\n/usr/include/c++/6/functional:2238:5: note: candidate: template&lt;class _Res, class ... _Args&gt; void std::swap(std::function&lt;_Res(_ArgTypes ...)&gt;&amp;, std::function&lt;_Res(_ArgTypes ...)&gt;&amp;)\n     swap(function&lt;_Res(_Args...)&gt;&amp; __x, function&lt;_Res(_Args...)&gt;&amp; __y)\n     ^~~~\n/usr/include/c++/6/functional:2238:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/6/memory:81:0,\n                 from ./java/./rocksjni/comparatorjnicallback.h:13,\n                 from java/rocksjni/comparatorjnicallback.cc:9:\n/usr/include/c++/6/bits/unique_ptr.h:614:6: note:   mismatched types \u2018std::function&lt;_Res(_ArgTypes ...)&gt;\u2019 and \u2018std::__tuple_element_t&lt;0ul, std::tuple&lt;const char*, std::default_delete&lt;const char []&gt; &gt; &gt; {aka const char*}\u2019\n  swap(std::get&lt;0&gt;(_M_t), __p);\n</code></pre>\n\n<p>I m not sure to understand this stack trace but it seams there is a mismatch in the unique_ptr . Maybe const char* and char*.  </p>\n\n<p>the class where there is the bug is :</p>\n\n<pre><code>    CompactionFilterFactoryJniCallback::CompactionFilterFactoryJniCallback(\n    JNIEnv* env, jobject jcompaction_filter_factory)\n    : JniCallback(env, jcompaction_filter_factory) {\n\n  // Note: The name of a CompactionFilterFactory will not change during\n  // it's lifetime, so we cache it in a global var\n  jmethodID jname_method_id =\n      AbstractCompactionFilterFactoryJni::getNameMethodId(env);\n  if(jname_method_id == nullptr) {\n    // exception thrown: NoSuchMethodException or OutOfMemoryError\n    return;\n  }\n\n  jstring jname =\n      (jstring)env-&gt;CallObjectMethod(m_jcallback_obj, jname_method_id);\n  if(env-&gt;ExceptionCheck()) {\n    // exception thrown\n    return;\n  }\n  jboolean has_exception = JNI_FALSE;\n // line 33\n  m_name = JniUtil::copyString(env, jname, &amp;has_exception);  // also releases jname\n  if (has_exception == JNI_TRUE) {\n    // exception thrown\n    return;\n  }\n\n  m_jcreate_compaction_filter_methodid =\n      AbstractCompactionFilterFactoryJni::getCreateCompactionFilterMethodId(env);\n  if(m_jcreate_compaction_filter_methodid == nullptr) {\n    // exception thrown: NoSuchMethodException or OutOfMemoryError\n    return;\n  }\n}\n\nconst char* CompactionFilterFactoryJniCallback::Name() const {\n  return m_name.get();\n}\n\nstd::unique_ptr&lt;CompactionFilter&gt; CompactionFilterFactoryJniCallback::CreateCompactionFilter(\n    const CompactionFilter::Context&amp; context) {\n  jboolean attached_thread = JNI_FALSE;\n  JNIEnv* env = getJniEnv(&amp;attached_thread);\n  assert(env != nullptr);\n\n  jlong addr_compaction_filter = env-&gt;CallLongMethod(m_jcallback_obj,\n      m_jcreate_compaction_filter_methodid,\n      static_cast&lt;jboolean&gt;(context.is_full_compaction),\n      static_cast&lt;jboolean&gt;(context.is_manual_compaction));\n\n  if(env-&gt;ExceptionCheck()) {\n    // exception thrown from CallLongMethod\n    env-&gt;ExceptionDescribe();  // print out exception to stderr\n    releaseJniEnv(attached_thread);\n    return nullptr;\n  }\n\n  auto* const cff = reinterpret_cast&lt;CompactionFilter*&gt;(addr_compaction_filter);\n\n  releaseJniEnv(attached_thread);\n\n  return std::unique_ptr&lt;CompactionFilter&gt;(cff);\n}\n</code></pre>\n\n<p>It is not clear how to read this stack trace for identifying the problem. I would appreciate to receive a little suggestion for understand how fix the problem and read the stack trace.</p>\n"}, {"tags": ["c++", "winapi", "visual-c++", "gdi+", "graphicspath"], "comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 2, "creation_date": 1514395630, "post_id": 47995755, "comment_id": 82960576, "body": "You should create a <a href=\"https://docs.microsoft.com/en-us/dotnet/framework/winforms/advanced/how-to-use-clipping-with-a-region\" rel=\"nofollow noreferrer\">clipping region</a>, then call <code>Graphics::DrawEllipse()</code> to draw the ellipse normally."}, {"owner": {"reputation": 11, "user_id": 7464050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8fd0fb3229509b271bd08ed1fec9b3c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7464050/alex"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1514456185, "post_id": 47995755, "comment_id": 82979405, "body": "It solves my problem for the case I exposed as example, but it doesn&#39;t solve the opposite case, which is a possible case in my appalication : - The Ellipse is filled - The Rectangle is Unfilled - Then, what I expect to get is a plain Ellipse but with a part of the rectangle outline missing.  I can&#39;t use your method in this case, because the SetClips has to be done on a region which I would build from the ellipse (from a GraphicsPath). And so, I will point on the same initial problem, which is the fact that creating a Region from a GraphicPath automatically fill the region."}], "owner": {"reputation": 11, "user_id": 7464050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8fd0fb3229509b271bd08ed1fec9b3c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7464050/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 362, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1514422111, "creation_date": 1514393230, "last_edit_date": 1514422111, "question_id": 47995755, "link": "https://stackoverflow.com/questions/47995755/gdiplus-region-from-a-graphicpath-without-filling-it", "title": "GdiPlus : Region from a GraphicPath without filling it", "body": "<p>I need to get a Gdi+ Region from a GraphicPath without filling it, and I don't know how to do it.</p>\n\n<p>A draw is better than words, so here is what I want to do :</p>\n\n<p><a href=\"https://i.stack.imgur.com/m4Edo.png\" rel=\"nofollow noreferrer\">What I want to do</a></p>\n\n<ol>\n<li>I have an ellipse, than I want to be displayed unfilled (whith a known line width)</li>\n<li>I have a full rectangle, and I want it to substracte itself from the ellipse.</li>\n<li>Then, I want to get the ellipse, unfilled, with a substracted part</li>\n</ol>\n\n<p>So, here is my code :</p>\n\n<pre><code>// lGraphics and lBrush defined upper...\n\n// Graphic paths\nGraphicsPath lGraphicPathEllipse;\nGraphicsPath lGraphicPathRectangle;\n\n// Rectangles\nRect lRectEllipse(0, 0, 100, 100);\nRect lRectRectangle(10, -10, 100, 80);\n\n// Add the shapes to the graphic pathes\nlGraphicPathEllipse.AddEllipse(lRectEllipse);\nlGraphicPathRectangle.AddRectangle(lRectRectangle);\n\n// Create the regions\nRegion lRegionEllipse(&amp;lGraphicPathEllipse);\nRegion lRegionRectangle(&amp;lGraphicPathRectangle);\n\n// Exclude the rectangle from the ellipse\nlRegionEllipse.Exclude(&amp;lRegionRectangle);\n\n// Draw the ellipse region\nlGraphics-&gt;FillRegion(&amp;lBrush, &amp;lRegionEllipse);\n</code></pre>\n\n<p>The problem is that what I get is actually this :</p>\n\n<p><a href=\"https://i.stack.imgur.com/kKUkg.png\" rel=\"nofollow noreferrer\">What I get</a></p>\n\n<p>It seemes like creating a Region from a GraphicPath automatically fill the region.\nIs it possible to get a Region from a GraphicPath with only the outline? By giving a Pen or a line width for instance?</p>\n\n<p>I've read thing about the GraphicPath Widen function, but it doesn't really do what I want.</p>\n\n<p>It's strange to see that a simple thing like this can't be done.</p>\n\n<p>Or maybe I have miss something!</p>\n\n<p>Thanks for any help, and have a good day.</p>\n\n<p>Alex.</p>\n"}, {"tags": ["c++", "output", "fstream"], "comments": [{"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1514395364, "post_id": 47995743, "comment_id": 82960456, "body": "You want to write &quot;CASE B&quot; before &quot;0&quot;, but have it appear <i>after</i> &quot;0&quot; in the file, is that correct?"}], "answers": [{"comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1514394681, "post_id": 47995976, "comment_id": 82960196, "body": "This won&#39;t do what OP wants, since you don&#39;t know where in the file to start writing with <code>fout2</code> until you&#39;ve written out all the data to <code>fout1</code>."}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1514394199, "creation_date": 1514394199, "answer_id": 47995976, "question_id": 47995743, "link": "https://stackoverflow.com/questions/47995743/multiple-output-pointer-to-a-file-in-c/47995976#47995976", "title": "Multiple output pointer to a file in c++", "body": "<p>Using two streams to write to the same file is going to turn into a nightmare, you have to flush and resync wherever one stream changes in order to ensure that the other sees those changes. Much better to do away with this idea and approach the problem using a single output.</p>\n\n<p>If you are going to stick with the idea, each time you are going to switch to a different stream call:</p>\n\n<pre><code>firstStrm.flush();\nsecondStrm.tie(firstStrm);\nsecondStrm.seekp(firstStrm.tellp())\n</code></pre>\n\n<p>where firstStrm is the stream you are done writing with and secondStrm is the stream you want to start writing with.</p>\n"}, {"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 0, "last_activity_date": 1514394994, "creation_date": 1514394994, "answer_id": 47996137, "question_id": 47995743, "link": "https://stackoverflow.com/questions/47995743/multiple-output-pointer-to-a-file-in-c/47996137#47996137", "title": "Multiple output pointer to a file in c++", "body": "<p>The fundamental problem you have is that writes to <code>fout1</code> clobber previous writes to <code>fout2</code>.  Since you don't know where in the file you need to start writing out your \"CASE B\" data, you have to wait until all of the \"CASE A\" data is written before you start with \"CASE B\".</p>\n\n<p>You can either write the CASE B data to a different (temporary) file, then copy that data over when you're done with CASE A (and delete the temporary file), accumulate the data you would write into a string buffer, then write that out.</p>\n\n<p>Or do your choice 1, which is to save all the <code>a</code> values into a <code>vector</code>, then process those at the end.  This is likely the fastest way, although if you have large amounts of data memory could be a concern and you'd have to go with the two file approach.</p>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1514400194, "creation_date": 1514400194, "answer_id": 47997146, "question_id": 47995743, "link": "https://stackoverflow.com/questions/47995743/multiple-output-pointer-to-a-file-in-c/47997146#47997146", "title": "Multiple output pointer to a file in c++", "body": "<p>If you want two <em>pointers</em> to the same file, then create them:  </p>\n\n<pre><code>std::ofstream  fout(\"out.txt\");\nstd::ofstream * fout1(&amp;fout);\nstd::ofstream * fout2(&amp;fout);\n</code></pre>\n\n<p>The problem with having more than one pointer to an output stream is you can have data output in a random order, depending on the execution.  This is worse with multiple threads or multiple tasks.  </p>\n\n<p>Another solution is to pass the output stream, by reference, to constructors or functions.  A class can have a <em>copy</em> of the stream:  </p>\n\n<pre><code>class Hello\n{\n  public:  \n    Hello(std::ostream&amp; output)\n    : m_output(output)\n    { }\n  private:\n    std::ostream&amp; m_output;\n};\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 2620036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4923fef1cbbaba06cd1338191e2ed6ce?s=128&d=identicon&r=PG", "display_name": "Bismarck Gomes", "link": "https://stackoverflow.com/users/2620036/bismarck-gomes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1514400194, "creation_date": 1514393187, "question_id": 47995743, "link": "https://stackoverflow.com/questions/47995743/multiple-output-pointer-to-a-file-in-c", "title": "Multiple output pointer to a file in c++", "body": "<p>I want two pointers to a same file in C++. </p>\n\n<pre><code>#include &lt;fstream&gt;\n\nint main()\n{\n    double a;\n    std::ofstream fout1( \"out.txt\");\n    fout1 &lt;&lt; \"CASE A:\"&lt;&lt;std::endl;\n\n    std::ofstream fout2( \"out.txt\", std::fstream::app);\n    fout2 &lt;&lt; \"CASE B:\" &lt;&lt;std::endl;\n\n    for (int i=0; i &lt; 3; i++){\n        a = i*i;\n        fout1 &lt;&lt; a &lt;&lt; std::endl;\n        fout2 &lt;&lt; 10+a &lt;&lt;std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>This code give me:</p>\n\n<pre><code>CASE A:\n0\n1\n4\n\n\n11\n14\n</code></pre>\n\n<p>But I wanna:</p>\n\n<pre><code>CASE A:\n0\n1\n4\nCASE B:\n10\n11\n14\n</code></pre>\n\n<p>In my real code variable \"a\" is a huge calculation, so do a double for would not be a good solution. I thought of 2 solutions:</p>\n\n<ol>\n<li>Using double for saving \"a\" in a vector;</li>\n<li>Using two pointer to same file (current question);</li>\n</ol>\n\n<p>I think 2 is the best, so how can I use two pointer to the same file?</p>\n"}, {"tags": ["c++", "c++11", "cout"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 4, "creation_date": 1514392793, "post_id": 47995631, "comment_id": 82959301, "body": "My crystal ball says that it&#39;s because you don&#39;t flush before redirecting. Try <code>&lt;&lt; std::flush</code>."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1514392854, "post_id": 47995631, "comment_id": 82959341, "body": "The standard <code>iostreams</code>-based classes use buffering a lot internally. I don\u2019t know if flushing them is enough or if this will always be undefined, but it\u201ds where I\u2019d start."}], "answers": [{"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1514400135, "creation_date": 1514400135, "answer_id": 47997131, "question_id": 47995631, "link": "https://stackoverflow.com/questions/47995631/c-order-of-evaluation-between-cout-and-a-function-call/47997131#47997131", "title": "C++: Order of evaluation between cout and a function call", "body": "<p>In both cases, the answer is \"buffering\".  When you send output to <code>cout</code>, it isn't sent to file descriptor 1 until the buffer is full, or until you flush the output.</p>\n\n<p>The fix is to flush the output:</p>\n\n<pre><code>saved_fd = dup(STDOUT_FILENO);\nstd::cout &lt;&lt; \"Redirecting std out to /dev/null\" &lt;&lt; std::flush;\nredirect_stdout()\n&lt;do some stuff&gt;\nstd::cout &lt;&lt; \"Restoring std out back to standard output\" &lt;&lt; std::flush;\nrestore_stdout();\n</code></pre>\n\n<p>(Instead of <code>std::flush</code>, you could also use <code>std::endl</code> which outputs a newline and flushes the output.)</p>\n"}], "owner": {"reputation": 31, "user_id": 9145949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e056493084fc899f87c9c13273f1934?s=128&d=identicon&r=PG&f=1", "display_name": "Aris totle", "link": "https://stackoverflow.com/users/9145949/aris-totle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1514400135, "creation_date": 1514392671, "question_id": 47995631, "link": "https://stackoverflow.com/questions/47995631/c-order-of-evaluation-between-cout-and-a-function-call", "title": "C++: Order of evaluation between cout and a function call", "body": "<p>I went through few questions about std::cout evaluation order and I understand that there is no sequence point between the args of std::cout, however I am unable to understand how the following code works:</p>\n\n<pre><code>saved_fd = dup(STDOUT_FILENO);\nstd::cout &lt;&lt; \"Redirecting std out to /dev/null\";\nredirect_stdout()\n&lt;do some stuff&gt;\nstd::cout &lt;&lt; \"Restoring std out back to standard output\";\nrestore_stdout();\n</code></pre>\n\n<p>My functions redirect_stdout() and restore_stdout(), using the dup2 calls redirects standard output to /dev/null and restores it back later. I expect the only output to show up on screen is \"Redirecting std out to /dev/null\". But what I see is \"Restoring std out back to standard output\".</p>\n\n<p>It appears that redirect_stdout() is getting run before its previous statement.</p>\n\n<p>Just for completeness, here are the definitions of the two methods:</p>\n\n<pre><code>void redirect_stdout()\n{\n  dump_fd = open(\"/dev/null\", O_RDWR, 0777);\n  dup2(dump_fd, STDOUT_FILENO);\n  cout &lt;&lt; endl;\n}\n\nvoid restore_stdout()\n{\n  dup2(saved_fd, STDOUT_FILENO);\n  cout &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Why don't I see the first cout output?</p>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 1239, "user_id": 8887578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3nMBo.png?s=128&g=1", "display_name": "Do Say Lazy", "link": "https://stackoverflow.com/users/8887578/do-say-lazy"}, "edited": false, "score": 0, "creation_date": 1514392840, "post_id": 47995608, "comment_id": 82959331, "body": "Hi, welcome to Stack Overflow. Questions that give a programming problem and ask for a solution implementation aren&#39;t encouraged. Do you have example of code that you&#39;ve tried. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> for help asking good questions."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1514393485, "post_id": 47995608, "comment_id": 82959649, "body": "This is either theoretically impossible or too obvious (depends if you have a pointer to parent for example)."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1514394370, "post_id": 47995608, "comment_id": 82960059, "body": "@Slava I don&#39;t think the question is about checking whether the note is a root; in a sense, every node is a root of <i>some</i> tree. The thrust of the question is likely to check whether a tree hanging off a given node meets the requirements of a binary search tree - a typical beginner&#39;s programming exercise."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1514394437, "post_id": 47995608, "comment_id": 82960093, "body": "@IgorTandetnik I see, my misunderstanding"}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 0, "last_activity_date": 1514395004, "creation_date": 1514395004, "answer_id": 47996139, "question_id": 47995608, "link": "https://stackoverflow.com/questions/47995608/checks-if-node-is-the-root-of-a-binary-search-tree/47996139#47996139", "title": "checks if node is the root of a binary search tree.", "body": "<p>The algorithm needs to do in-order traversal and test whether the previous visited node is less-then-or-equal (or whatever the search tree predicate is) to the current node.</p>\n"}], "owner": {"reputation": 3, "user_id": 9146012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74bcfd051b2e980cf7de29ac49ff751e?s=128&d=identicon&r=PG&f=1", "display_name": "AhmadS", "link": "https://stackoverflow.com/users/9146012/ahmads"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 47996139, "answer_count": 1, "score": -2, "last_activity_date": 1514395004, "creation_date": 1514392579, "question_id": 47995608, "link": "https://stackoverflow.com/questions/47995608/checks-if-node-is-the-root-of-a-binary-search-tree", "title": "checks if node is the root of a binary search tree.", "body": "<p>i Need to Write a function that takes a Node and checks if this node is the root of a binary search tree  ,if any one have the code for this problem or at least the algorithm. </p>\n"}, {"tags": ["c++", "templates", "variadic-templates", "template-meta-programming"], "answers": [{"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 1, "last_activity_date": 1514392803, "creation_date": 1514392803, "answer_id": 47995664, "question_id": 47995472, "link": "https://stackoverflow.com/questions/47995472/type-alias-a-template-parameter-pack/47995664#47995664", "title": "Type alias a template parameter pack", "body": "<p>A parameter pack has to be just that, a list of several types. It is possible to forward a parameter pack (once you have one) by using the ... operator on it thus re-expanding it back into a list, but you have to have those types to begin with.</p>\n\n<p>And note that:\n    using MyType = std::tuple()::type;\nisn't going to work because tuple doesn't have a 'type' member. You can't even do (with or without the ...):\n    template\n    struct holder\n        {\n        typedef Types... type;\n    };\n    using my_type = holder::type;</p>\n"}, {"comments": [{"owner": {"reputation": 395, "user_id": 1595776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7406b78bf389cb29db977515ed6a7edc?s=128&d=identicon&r=PG", "display_name": "dzan", "link": "https://stackoverflow.com/users/1595776/dzan"}, "edited": false, "score": 0, "creation_date": 1514473943, "post_id": 47995686, "comment_id": 82988060, "body": "Thanks, this is a nice solution I just don&#39;t like the interface the functors require if they are not free standing functions but class members. You&#39;d have <code>object::fn()</code> instead of <code>object.fn()</code>."}], "tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": false, "score": 1, "last_activity_date": 1514393631, "last_edit_date": 1514393631, "creation_date": 1514392902, "answer_id": 47995686, "question_id": 47995472, "link": "https://stackoverflow.com/questions/47995472/type-alias-a-template-parameter-pack/47995686#47995686", "title": "Type alias a template parameter pack", "body": "<blockquote>\n  <p>In the sample below I'm trying to alias a template parameter pack\n  basically.</p>\n  \n  <p>It's not possible in the standard so I found people work around the\n  limitation with a tuple or empty templated struct.</p>\n</blockquote>\n\n<p><code>std::tuple&lt;...&gt;</code> is great for doing for aliasing <em>parameter packs</em>!</p>\n\n<blockquote>\n  <p>However my situation seems different because I don't have an argument\n  parameter type pack to match...</p>\n</blockquote>\n\n<p>Well, these a cases where you find out that <em>class-templates</em> are actually more powerful than <em>function-templates</em> - in this case, that we can have <em>partial template-specializations</em>; So if you decide to use a class template with an overloaded <code>operator ()</code>, I did say, its possible:</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/544a8cb18e2f468a\" rel=\"nofollow noreferrer\"><strong>Demo</strong></a>:</p>\n\n<pre><code>template&lt;typename... A&gt;\nstruct fn\n{\n    void operator () () const \n    { std::cout &lt;&lt; \"primary f()\" &lt;&lt; std::endl; }\n};\n\ntemplate&lt;typename... A&gt;\nstruct fn&lt;std::tuple&lt;A...&gt;&gt;\n{\n    void operator () () const \n    { std::cout &lt;&lt; \"specialized on unlimited params()\" &lt;&lt; std::endl; }\n};\n\ntemplate&lt;&gt;\nstruct fn&lt;std::tuple&lt;char, double*&gt;&gt;\n{\n    void operator () () const \n    { std::cout &lt;&lt; \"specialized on f&lt;char, double*&gt;()\" &lt;&lt; std::endl; }\n};\n\ntemplate&lt;typename A, typename B&gt;\nstruct fn&lt;std::tuple&lt;A, B&gt;&gt;\n{\n    void operator () () const\n    { std::cout &lt;&lt; \"specialized on two params f()\" &lt;&lt; std::endl; }\n};\n\n// Can't seem to define this correctly.\nusing MyType = std::tuple&lt;int, char&gt;;\nusing MyType2 = std::tuple&lt;char, double*&gt;;\nusing MyType3 = std::tuple&lt;int, char, double, void*&gt;;\n\nint main()\n{\n    fn&lt;int, char&gt;()();\n    fn&lt;MyType&gt;()();\n    fn&lt;MyType2&gt;()();\n    fn&lt;MyType3&gt;()();\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>primary f()\nspecialized on two params f()\nspecialized on f&lt;char, double*&gt;()\nspecialized on unlimited params()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "is_accepted": false, "score": 0, "last_activity_date": 1514398103, "creation_date": 1514398103, "answer_id": 47996734, "question_id": 47995472, "link": "https://stackoverflow.com/questions/47995472/type-alias-a-template-parameter-pack/47996734#47996734", "title": "Type alias a template parameter pack", "body": "<p>Since C++14, if you don't want to overload or rewrite your function, nor you want to write a functor class template, you can use a generic lambda to locally turn a type-list into a parameter-pack:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct quote{ using type = T; };\n\ntemplate&lt;typename T&gt;\nusing unpack = typename T::type;\n\ntemplate&lt;typename... T&gt;\nusing params = std::tuple&lt;quote&lt;T&gt;...&gt;;\n\n// to be used as\n\ntemplate&lt;typename A, typename B&gt;\nvoid foo();\n\nusing my_params = params&lt;int,char&gt;;\n\nint main()\n{\n  std::apply( []( auto... params ){ foo&lt; unpack&lt;decltype(params)&gt;... &gt;(); }, my_params{} );\n}\n</code></pre>\n\n<p><em>PS:</em> <code>std::apply</code> requires C++17, but can be implemented in >=C++11 as well...</p>\n\n<p><em>PPS:</em> in C++20, we may even write <code>[]&lt;typename... T&gt;(){ foo&lt;T...&gt;(); }</code> making the solution even cleaner ...</p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 3793695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d52cc90b1990ea08152babf6fb8e343d?s=128&d=identicon&r=PG&f=1", "display_name": "shubhdev", "link": "https://stackoverflow.com/users/3793695/shubhdev"}, "is_accepted": true, "score": 2, "last_activity_date": 1514473782, "creation_date": 1514473782, "answer_id": 48009829, "question_id": 47995472, "link": "https://stackoverflow.com/questions/47995472/type-alias-a-template-parameter-pack/48009829#48009829", "title": "Type alias a template parameter pack", "body": "<p>If we use a templated empty struct to alias the type pack, it is possible to use <em>SFINAE</em> on your original function so that when it is invoked for our special struct it simply forwards the encapsulated type pack to the original implementation.</p>\n\n<p>Here is how that would look in <strong>C++14</strong>:</p>\n\n<pre><code>template &lt;typename... Types&gt;\nstruct TypePack {};\n\n// Helper meta functions to determine\n// if the template param is a TypePack struct.\ntemplate &lt;typename... Ts&gt;\nstatic constexpr bool is_typepack_v = false;\n\ntemplate &lt;typename... Ts&gt;\nstatic constexpr bool is_typepack_v&lt;TypePack&lt;Ts...&gt;&gt; = true;\n\ntemplate &lt;typename... Ts&gt;\n// Enabled whenever template parameter is not a TypePack.\ntypename std::enable_if&lt;not is_typepack_v&lt;Ts...&gt;&gt;::type \nfn() {  // FN_A\n    std::cout &lt;&lt; \"Generic\\n\";\n}\n\ntemplate &lt;&gt;\n// Complete specialization, selected over generic fn for &lt;char,int&gt;\nvoid fn&lt;char,int&gt; () {  // FN_B\n    std::cout &lt;&lt; \"Specialized for char,int\\n\";\n}\n\ntemplate &lt;typename T&gt;\n// Enabled when template param is a TypePack.\ntypename std::enable_if&lt;is_typepack_v&lt;T&gt;&gt;::type\nfn() { // FN_C\n   forward_fn(T{}); \n}\n\n// forward_fn() extracts the types from a TypePack argument\n// and invokes fn with it.\ntemplate &lt;typename ...T&gt;\nvoid forward_fn(TypePack&lt;T...&gt; /*unused*/) {\n    std::cout &lt;&lt; \"Forwarding a pack alias\\n\";\n    fn&lt;T...&gt;();\n}\n\n// To alias a type pack use TypePack&lt;T1,T2..,Tn&gt;\nusing CharIntPack = TypePack&lt;char,int&gt;;\n\nint main() {\n    fn&lt;char,char&gt;(); // invokes FN_A\n    fn&lt;char,int&gt;(); //  invokes FN_B\n    fn&lt;CharIntPack&gt;(); // invokes FN_C which then invokes FN_B\n    return 0;\n}\n</code></pre>\n\n<p>This produces the following output:</p>\n\n<pre><code>Generic\nSpecialized for char,int\nForwarding a pack alias\nSpecialized for char,int\n</code></pre>\n\n<p>What I like about this method is that this \"<em>trick</em>\" is required only once when defining the functions, and the user can be completely ignorant of it.</p>\n"}], "owner": {"reputation": 395, "user_id": 1595776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7406b78bf389cb29db977515ed6a7edc?s=128&d=identicon&r=PG", "display_name": "dzan", "link": "https://stackoverflow.com/users/1595776/dzan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1259, "favorite_count": 0, "accepted_answer_id": 48009829, "answer_count": 4, "score": 1, "last_activity_date": 1514473782, "creation_date": 1514392012, "question_id": 47995472, "link": "https://stackoverflow.com/questions/47995472/type-alias-a-template-parameter-pack", "title": "Type alias a template parameter pack", "body": "<p>In the sample below I'm trying to alias a template parameter pack basically.</p>\n\n<p>It's not possible in the standard so I found people work around the limitation with a tuple or empty templated struct. However my situation seems different because <strong>I don't have an argument parameter type pack to match</strong>...</p>\n\n<p>(<em>I know this sample seems stupid but it's a minimal PoC. In the codebase the typelist gets a lot longer and this would really be useful.</em>)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;tuple&gt;\n\ntemplate&lt;typename T&gt;\nvoid f(T t)\n{\n    std::cout &lt;&lt; \"templated f()\" &lt;&lt; std::endl;\n\n}\ntemplate&lt;&gt;\nvoid f(int t)\n{\n    std::cout &lt;&lt; \"specialized f()\" &lt;&lt; std::endl;\n}\n\ntemplate&lt;typename A, typename B&gt;\nvoid fn()\n{\n    f(A());\n}\n\ntemplate&lt;int, char&gt;\nvoid fn()\n{\n    int a;\n    f(a);\n}\n\n// Can't seem to define this correctly.\n//using MyType = std::tuple&lt;int, char&gt;()::type;\n\nint\nmain(int, char**)\n{\n    fn&lt;char, char&gt;();\n\n    // I have\n    fn&lt;int, char&gt;();\n\n    // I want some alias;\n    //fn&lt;MyType&gt;();\n\n    return 0;\n}\n</code></pre>\n\n<p>references;</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/22968182/is-it-possible-to-typedef-a-parameter-pack\">Is it possible to typedef a parameter pack?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/46636219/using-template-parameter-pack-instead-of-macro\">Using template parameter pack instead of macro</a></li>\n<li><a href=\"https://stackoverflow.com/questions/47948747/aliasing-a-template-parameter-pack\">Aliasing a template parameter pack</a></li>\n</ul>\n"}, {"tags": ["c++", "qt", "uwp"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1514391840, "post_id": 47995323, "comment_id": 82958887, "body": "#include &lt;windows.devices.enumeration.h&gt;, Where have you seen this type of import used?"}, {"owner": {"reputation": 390, "user_id": 3731050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y3wvH.jpg?s=128&g=1", "display_name": "Cobra91151", "link": "https://stackoverflow.com/users/3731050/cobra91151"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1514392880, "post_id": 47995323, "comment_id": 82959351, "body": "@eyllanesc  It&#39;s just a test. So how to include it right? Thanks."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1514393043, "post_id": 47995323, "comment_id": 82959423, "body": "I&#39;m not an expert on windows, but that include does not meet the standard of import of C ++."}, {"owner": {"reputation": 390, "user_id": 3731050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y3wvH.jpg?s=128&g=1", "display_name": "Cobra91151", "link": "https://stackoverflow.com/users/3731050/cobra91151"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1514393567, "post_id": 47995323, "comment_id": 82959687, "body": "@eyllanesc  Yes, I agree but it found the header file. When adding the <code>using namespace Windows::Devices::Enumeration;</code> it throws error: <code>C2039: &#39;Devices&#39;: is not a member of &#39;Windows&#39;</code>. <code>UWP API</code> reference contains only namespaces."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1514408234, "post_id": 47995323, "comment_id": 82965434, "body": "You need Qt built for UWP. <a href=\"https://doc.qt.io/qt-5/supported-platforms-and-configurations.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/supported-platforms-and-configurations.html</a>"}, {"owner": {"reputation": 390, "user_id": 3731050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y3wvH.jpg?s=128&g=1", "display_name": "Cobra91151", "link": "https://stackoverflow.com/users/3731050/cobra91151"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1514408934, "post_id": 47995323, "comment_id": 82965675, "body": "@AlexanderVX  I have the Qt UWP kits installed and I can create empty <code>UWP</code> app. So I think the problem is with the wrong includes."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1514412462, "post_id": 47995323, "comment_id": 82966852, "body": "The problem is then likely with symbols needed to allow blocks of #ifdefs in those headers. As long as Visual Studio builds same project (?) there must be a local change enabling the symbol e.g. #define SYMBOL or /DSYMBOL."}, {"owner": {"reputation": 390, "user_id": 3731050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y3wvH.jpg?s=128&g=1", "display_name": "Cobra91151", "link": "https://stackoverflow.com/users/3731050/cobra91151"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1514415230, "post_id": 47995323, "comment_id": 82967606, "body": "@AlexanderVX  Ok. I will check it. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 390, "user_id": 3731050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y3wvH.jpg?s=128&g=1", "display_name": "Cobra91151", "link": "https://stackoverflow.com/users/3731050/cobra91151"}, "is_accepted": true, "score": 0, "last_activity_date": 1515149320, "creation_date": 1515149320, "answer_id": 48112005, "question_id": 47995323, "link": "https://stackoverflow.com/questions/47995323/using-uwp-api-with-qt/48112005#48112005", "title": "Using UWP API with Qt", "body": "<p>I have decided to develop native <code>UWP</code> app using <code>Visual Studio</code> even though I fixed the issue by installing <code>Qt</code> extension for <code>VS</code> and switching <code>Win SDK</code> kit to 16299.</p>\n"}], "owner": {"reputation": 390, "user_id": 3731050, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y3wvH.jpg?s=128&g=1", "display_name": "Cobra91151", "link": "https://stackoverflow.com/users/3731050/cobra91151"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 1, "accepted_answer_id": 48112005, "answer_count": 1, "score": 0, "last_activity_date": 1515149320, "creation_date": 1514391319, "last_edit_date": 1514495498, "question_id": 47995323, "link": "https://stackoverflow.com/questions/47995323/using-uwp-api-with-qt", "title": "Using UWP API with Qt", "body": "<p>In <code>Visual Studio</code> I included: <code>using namespace Windows::Devices::Enumeration;</code> and it works. When adding/including namespaces in <code>Qt</code> I get errors. Any documentation how to use <code>UWP API</code> with <code>Qt</code>? </p>\n\n<p><strong>For example:</strong></p>\n\n<pre><code>.h\n#include &lt;windows.devices.enumeration.h&gt;\n\n.cpp\nDeviceAccessInformation deviceInfo;\n</code></pre>\n\n<p>I get error: <code>C2065: 'DeviceAccessInformation': undeclared identifier</code></p>\n\n<p><strong>Update:</strong></p>\n\n<p>I have found some information related the issue. So I have added the <code>Win SDK</code> path (<code>INCLUDEPATH += \"C:/Program Files (x86)/Windows Kits/10/Include/10.0.16299.0\"</code>) to the <code>.pro</code> file. Also added the <code>#include \"winrt/windows.devices.enumeration.h\"</code> to the header file but it still can't find the <code>DeviceAccessInformation deviceInfo;</code>, throws error: <code>C2065: DeviceAccessInformation: undeclared identifier</code>.</p>\n\n<p>Also I have checked the samples, and add the namespace.\n<code>using namespace winrt;</code></p>\n\n<p>and it displays the error: <code>C2871: 'winrt': a namespace with this name does not exist</code></p>\n\n<p>Also I have noticed the warning: <code>-1: warning: winrt_manifest_install.path is not defined: install target not created</code></p>\n\n<p>I have included the <code>WindowsApp</code> library but the issue still exists.</p>\n\n<pre><code>contains(QMAKE_TARGET.arch, x86_64) {\n    LIBS += -L\"C:/Program Files (x86)/Windows Kits/10/Lib/10.0.16299.0/um/x64\" -lWindowsApp\n} else {\n    LIBS += -L\"C:/Program Files (x86)/Windows Kits/10/Lib/10.0.16299.0/um/x86\" -lWindowsApp\n}\n</code></pre>\n\n<p>I think the problem is with the wrong includes or I missing something.</p>\n\n<p><strong>Update 2:</strong></p>\n\n<p>Can anyone confirm that <code>Qt 5.9.3 UWP x32/x64</code> kits work with <code>UWP API</code>? Thanks in advance.</p>\n"}, {"tags": ["c++", "opengl", "glfw"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1514396565, "creation_date": 1514396565, "answer_id": 47996440, "question_id": 47995249, "link": "https://stackoverflow.com/questions/47995249/saving-opengl-physics-simulation-as-a-video/47996440#47996440", "title": "Saving OpenGL Physics Simulation as a Video", "body": "<p>A video is just a series of individual frames (possibly compressed in various ways to save space). So you could simply save each individual frame to disk (along with time information) and then subsequently transform those raw frames into a video format of your choice (tools exist for that).</p>\n\n<p>As far as I know, there is no support for saving directly to a video format in glfw or similar (but I could be wrong).</p>\n"}], "owner": {"reputation": 416, "user_id": 7766131, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfa5fab901435124564e46cb0c195b5f?s=128&d=identicon&r=PG&f=1", "display_name": "paper man", "link": "https://stackoverflow.com/users/7766131/paper-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "closed_date": 1514402930, "answer_count": 1, "score": 0, "last_activity_date": 1514396565, "creation_date": 1514391009, "question_id": 47995249, "link": "https://stackoverflow.com/questions/47995249/saving-opengl-physics-simulation-as-a-video", "closed_reason": "Duplicate", "title": "Saving OpenGL Physics Simulation as a Video", "body": "<p>Recently, I have been working on a 3D physics simulation using C++ and OpenGL/GLFW. In order to create a very accurate simulation I need to (among other things) make the timestep very small. The problem is that is makes the simulation run very slowly, so what I was thinking is stepping time several times (say twenty) and then rendering the result. The simulation is then more accurate, but there is a very low framerate. A solution would be to save each render as a frame of a video. Is there a way to do this built into GLFW or another library (without using something like nVidia Shadowplay and recording the window)?</p>\n"}, {"tags": ["c++", "string", "copy"], "comments": [{"owner": {"reputation": 1066, "user_id": 3359878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9WfKf.jpg?s=128&g=1", "display_name": "Amadeusz", "link": "https://stackoverflow.com/users/3359878/amadeusz"}, "edited": false, "score": 0, "creation_date": 1514390826, "post_id": 47995168, "comment_id": 82958413, "body": "&#39;m&#39; string length is 0 since you have never resized it to the length of string &#39;n&#39;"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1514390912, "post_id": 47995168, "comment_id": 82958455, "body": "You really should have used the <code>at()</code> function on <code>m</code>.  You would have instantly seen the error.  <code>m.at(s) = n.at(s);</code>"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1514390968, "post_id": 47995168, "comment_id": 82958483, "body": "To copy <code>n</code> to <code>m</code> you just have to do <code>m = n;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1239, "user_id": 8887578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3nMBo.png?s=128&g=1", "display_name": "Do Say Lazy", "link": "https://stackoverflow.com/users/8887578/do-say-lazy"}, "edited": false, "score": 0, "creation_date": 1514391285, "post_id": 47995224, "comment_id": 82958641, "body": "Psst, you need to put <code>std::</code> before <code>cin</code> (you did put it for <code>cout</code>). Sadly, I can&#39;t edit answers yet, so I can&#39;t add it for you."}, {"owner": {"reputation": 229, "user_id": 4691843, "user_type": "registered", "profile_image": "https://graph.facebook.com/669724423133099/picture?type=large", "display_name": "DNKpp", "link": "https://stackoverflow.com/users/4691843/dnkpp"}, "reply_to_user": {"reputation": 1239, "user_id": 8887578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3nMBo.png?s=128&g=1", "display_name": "Do Say Lazy", "link": "https://stackoverflow.com/users/8887578/do-say-lazy"}, "edited": false, "score": 0, "creation_date": 1514391515, "post_id": 47995224, "comment_id": 82958741, "body": "@TheAspiringHacker Thanks ;)"}], "tags": [], "owner": {"reputation": 229, "user_id": 4691843, "user_type": "registered", "profile_image": "https://graph.facebook.com/669724423133099/picture?type=large", "display_name": "DNKpp", "link": "https://stackoverflow.com/users/4691843/dnkpp"}, "is_accepted": false, "score": 3, "last_activity_date": 1514391496, "last_edit_date": 1514391496, "creation_date": 1514390903, "answer_id": 47995224, "question_id": 47995168, "link": "https://stackoverflow.com/questions/47995168/copying-string-to-another-string-in-c-and-printing-its-characters/47995224#47995224", "title": "Copying string to another string in C++ and printing its characters?", "body": "<p>Why so complicated?\nI assume you are using <code>std::string</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nstd::string n,m;\nint main(){\n    std::cin&gt;&gt;n;\n    n[0] = std::toupper(n.at(0));\n    m = n;\n    std::cout &lt;&lt; m &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The <code>at()</code> function performs a runtime check, if the index is out of bounds or not. The <code>operator[]</code> doesn't.</p>\n"}, {"tags": [], "owner": {"reputation": 1899, "user_id": 8854921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b76055b306b4dbab08ee558957f52e?s=128&d=identicon&r=PG&f=1", "display_name": "Bo R", "link": "https://stackoverflow.com/users/8854921/bo-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1514391518, "creation_date": 1514391518, "answer_id": 47995358, "question_id": 47995168, "link": "https://stackoverflow.com/questions/47995168/copying-string-to-another-string-in-c-and-printing-its-characters/47995358#47995358", "title": "Copying string to another string in C++ and printing its characters?", "body": "<p>The reason nothing is printed is that your <code>m</code>-string has the length zero. In the first loop you are basically writing to unallocated memory and not appending the new values to the end of <code>m</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 7451183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NPCmF.png?s=128&g=1", "display_name": "Paolo Panvini", "link": "https://stackoverflow.com/users/7451183/paolo-panvini"}, "is_accepted": false, "score": 0, "last_activity_date": 1514394307, "creation_date": 1514394307, "answer_id": 47995996, "question_id": 47995168, "link": "https://stackoverflow.com/questions/47995168/copying-string-to-another-string-in-c-and-printing-its-characters/47995996#47995996", "title": "Copying string to another string in C++ and printing its characters?", "body": "<p>The string \"m\" is built using the default constructor of std::string</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/string/basic_string/basic_string\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/string/basic_string/basic_string</a></p>\n\n<blockquote>\n  <p>Default constructor. Constructs empty string (zero size and unspecified capacity).</p>\n</blockquote>\n\n<p>The second loop is not processed by your program ( because m.length()=0 )</p>\n"}], "owner": {"reputation": 31, "user_id": 8215080, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0ea6d9cec85ea4a120f2a240c20ddc7b?s=128&d=identicon&r=PG&f=1", "display_name": "Y.Ivanov", "link": "https://stackoverflow.com/users/8215080/y-ivanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1514394307, "creation_date": 1514390648, "last_edit_date": 1514390877, "question_id": 47995168, "link": "https://stackoverflow.com/questions/47995168/copying-string-to-another-string-in-c-and-printing-its-characters", "title": "Copying string to another string in C++ and printing its characters?", "body": "<p>I have a small program, where I have declared two string variables. I convert the first letter of the entered string to a capital one and than I copy the content of the first string to the second. However, if I try to print its contents (of the m string), the program prints nothing. Can you tell me why that happens?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n\nstring n, m;\n\nint main()\n{\n    cin &gt;&gt; n;\n    char first_letter = n.at(0);\n    char f = toupper(first_letter);\n    n[0] = f;\n    for(int s = 0; s &lt; n.length(); s++) {\n        m[s] = n.at(s);\n    }\n    for(int p = 0; p &lt; m.length(); p++) {\n        cout &lt;&lt; m[p] &lt;&lt; endl;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "for-loop", "if-statement", "time"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1514390668, "post_id": 47995140, "comment_id": 82958336, "body": "Compare the generated assembly code for both. And run each variant a million time while measuring. And remember to build with optimizations enabled before comparing or benchmarking."}, {"owner": {"reputation": 83283, "user_id": 3937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e27f554e9ed800bca61642acaba29452?s=128&d=identicon&r=PG", "display_name": "Lou Franco", "link": "https://stackoverflow.com/users/3937/lou-franco"}, "edited": false, "score": 0, "creation_date": 1514390674, "post_id": 47995140, "comment_id": 82958340, "body": "If the optimizer can figure out that n definitely never changes and therefore <code>(9 + (n % 2 == 0))</code> is a constant for the loop, then it might be the same.  The only way to know is to check"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1514390676, "post_id": 47995140, "comment_id": 82958342, "body": "If you want to know about performance you need to measure it.  On todays modern CPU with speculative execution, out-of-order execution, instruction/data pre-fetch etc even examining the generated code will not help you.."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1514390678, "post_id": 47995140, "comment_id": 82958343, "body": "You will probably get the exact same assembly for both"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1514390810, "post_id": 47995140, "comment_id": 82958408, "body": "if there was a difference here the difference would be so small that it would be extremely difficult to measure with any accuracy."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1514391307, "post_id": 47995140, "comment_id": 82958652, "body": "@drescherjm it depends on how <code>n</code> defined and what loop does"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1514391398, "post_id": 47995140, "comment_id": 82958690, "body": "Specifically <code>n % 2</code> is the same as <code>n &amp; 1</code>, which is half a clock cycle on a PC. Why bother?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1514391506, "post_id": 47995140, "comment_id": 82958740, "body": "I assumed <code>n</code> was a constant inside the loop. Otherwise the if() version would not work."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1514392295, "post_id": 47995140, "comment_id": 82959092, "body": "@drescherjm you can assume but compiler cannot"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1514396442, "post_id": 47995140, "comment_id": 82960863, "body": "You are correct. Now I see what you are saying. If the compiler can not detect you will probably pay a few cycle penalty for the <code>9 + (n % 2 == 0)</code> calculation. If this loop was run inside of another loop that was executed millions of times the 1 to 3 clock cycles wasted * 9 or 10 could easily add up to a measurable difference."}], "answers": [{"comments": [{"owner": {"reputation": 428, "user_id": 7421020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6faa42c836c9cf455d50c86e033c44b?s=128&d=identicon&r=PG&f=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/7421020/federico"}, "edited": false, "score": 0, "creation_date": 1514393772, "post_id": 47995206, "comment_id": 82959781, "body": "maybe, you also want to substitute <code>auto limit = 9 + (n % 2 == 0);</code> with <code>auto limit = 10 - (n%2);</code>. IMHO is even clearer without that <code>==0</code>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 428, "user_id": 7421020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6faa42c836c9cf455d50c86e033c44b?s=128&d=identicon&r=PG&f=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/7421020/federico"}, "edited": false, "score": 1, "creation_date": 1514393992, "post_id": 47995206, "comment_id": 82959891, "body": "@Federico that&#39;s subjective, I just used style OP prefers and do not want to insist particular way when it does not change anything else."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 4, "last_activity_date": 1514391139, "last_edit_date": 1514391139, "creation_date": 1514390822, "answer_id": 47995206, "question_id": 47995140, "link": "https://stackoverflow.com/questions/47995140/if-statement-put-in-for-instruction/47995206#47995206", "title": "If-statement put in for instruction", "body": "<blockquote>\n  <p>Verifying every step if n is an even number (or just an additional condition) should run the program a bit slower, am I correct?</p>\n</blockquote>\n\n<p>In general case yes, in this particular case it depends if you can change <code>n</code> inside loop and what is <code>n</code> ie can compiler detect that <code>n</code> could be changed or not to optimize it. So you should make your intention clear for readers and compiler:</p>\n\n<pre><code>auto limit = 9 + (n % 2 == 0); \nfor(i = 1; i &lt;= limit; i++)\n      ... \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8635162, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WRR9yok9xlQ/AAAAAAAAAAI/AAAAAAAAANc/G1pw6yMgAZ0/photo.jpg?sz=128", "display_name": "Dascalu Cosmin", "link": "https://stackoverflow.com/users/8635162/dascalu-cosmin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514391883, "creation_date": 1514390517, "last_edit_date": 1514391883, "question_id": 47995140, "link": "https://stackoverflow.com/questions/47995140/if-statement-put-in-for-instruction", "title": "If-statement put in for instruction", "body": "<p>Edited: n is a constant. It doesn't change inside the loop.</p>\n\n<p>Given the 2 cases:</p>\n\n<p>1)</p>\n\n<pre><code>if (n % 2 == 0)\n    for(i = 1; i &lt;= 10; i++)\n             ...\nelse \n    for(i = 1; i &lt;= 9; i++)\n             ...\n</code></pre>\n\n<p>2)</p>\n\n<pre><code>for(i = 1; i &lt;= 9 + (n % 2 == 0); i++)\n          ... \n</code></pre>\n\n<p>Is there a difference in time between the 2 cases? (Case 2) Verifying every step if <code>n</code> is an even number (or just an additional condition) should run the program a bit slower, am I correct? </p>\n"}, {"tags": ["c++", "opengl", "glsl", "shader"], "comments": [{"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 4, "creation_date": 1514390914, "post_id": 47995032, "comment_id": 82958456, "body": "Note that <code>coord</code> is <i>not</i> a uniform, thus <code>glGetUniformLocation(gShaderProgram, &quot;coord&quot;)</code> will always return -1 -- even if <code>coord</code> is used."}], "answers": [{"tags": [], "owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "is_accepted": true, "score": 1, "last_activity_date": 1514390959, "creation_date": 1514390959, "answer_id": 47995234, "question_id": 47995032, "link": "https://stackoverflow.com/questions/47995032/glsl-removing-used-variables/47995234#47995234", "title": "GLSL removing used variables", "body": "<p>You are trying to query an <strong>attribute</strong> location with glGet<strong>Uniform</strong>Location. Use <code>glGetAttribLocation</code> instead.</p>\n"}], "owner": {"reputation": 5, "user_id": 2788548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483cc43ac49ec4b9ba9fd22d24239671?s=128&d=identicon&r=PG&f=1", "display_name": "Riilu", "link": "https://stackoverflow.com/users/2788548/riilu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 47995234, "answer_count": 1, "score": 0, "last_activity_date": 1514390959, "creation_date": 1514390088, "question_id": 47995032, "link": "https://stackoverflow.com/questions/47995032/glsl-removing-used-variables", "title": "GLSL removing used variables", "body": "<p>I have a quite weird issue in my code, having added the vec2 named \"coord\" for containing my texture coordinates, these are supposed to be passed into my vertex shader, passed through into the geometry shader, before finally being passed into the fragment shader where it will be used for the sake of texture mapping. But for some reason the GLSL compiler is optimizing away the vec2 input, using <code>glVertexAttribPointer</code> to assign to it nets no result, and double checking its location with <code>glGetUniformLocation(gShaderProgram, \"coord\");</code> returns -1 which would indicate it has been optimized out by the GLSL compiler, why is that? To my knowledge the compiler will only optimize values that do not contribute to the shader output, but its used as output in every shader stage. It's a uni assignment so this is mostly all new to me.</p>\n\n<p>Vertex shader </p>\n\n<pre><code>#version 440\n\nlayout(location = 0) in vec3 vertex_position;\nlayout(location = 1) in vec3 vertex_color;\nlayout(location = 2) in vec2 coord;\n\nlayout(location = 20) uniform vec4 test;\n\nlayout(binding = 3, std140) uniform uniformBlock\n{\n    float v1;\n    float v2;\n    float v3;\n    float v4;\n};\n\nuniform mat4 m;\nuniform mat4 p;\nuniform mat4 v;\n\nout vData\n{\n    mat4 m;\n    mat4 p;\n    mat4 v;\n    vec4 test;\n    vec4 color;\n    vec2 tex_coord;\n}vertices;\n\nvoid main() {\n    vertices.m = m;\n    vertices.p = p;\n    vertices.v = v;\n    vertices.test = test;\n    vertices.tex_coord = coord;\n    vertices.color = vec4(vertex_color, 1.0);\n    gl_Position = vec4(vertex_position, 1.0);\n}\n</code></pre>\n\n<p>Geometry shader</p>\n\n<pre><code>#version 400\nlayout (triangles) in;\nlayout (triangle_strip, max_vertices = 6) out;\n\nin vData\n{\n    mat4 m;\n    mat4 p;\n    mat4 v;\n    vec4 test;\n    vec4 color;\n    vec2 tex_coord;\n} vertices[];\n\nout fData\n{\n    vec3 normal;\n    vec4 color;\n    mat4 v;\n    vec2 tex_coord;\n} frag;\n\nvoid main()\n{\n    vec3 A = gl_in[2].gl_Position.xyz - gl_in[0].gl_Position.xyz;\n    vec3 B = gl_in[1].gl_Position.xyz - gl_in[0].gl_Position.xyz;\n    vec3 normal = normalize(cross(A,B));\n    int i;\n    for(i = 0;i &lt; gl_in.length();i++)\n    {\n        gl_Position = (vertices[i].p * vertices[i].v * vertices[i].m) * gl_in[i].gl_Position;\n        frag.normal = normalize(vec3(vertices[i].m * vec4(normal,0)));\n        frag.color = vertices[i].color;\n        frag.v = vertices[i].v;\n        frag.tex_coord = vertices[i].tex_coord;\n        EmitVertex();\n    }\n    EndPrimitive();\n\n    for(i = 0;i &lt; gl_in.length();i++)\n    {\n        gl_Position = vertices[i].p * vertices[i].v * vertices[i].m * (gl_in[i].gl_Position + vec4(normal,0));\n        frag.normal = normalize(vec3(vertices[i].m * vec4(normal,0)));\n        frag.color = vertices[i].color;\n        frag.v = vertices[i].v;\n        frag.tex_coord = vertices[i].tex_coord;\n        EmitVertex();\n    }\n    EndPrimitive();\n}\n</code></pre>\n\n<p>Fragment shader</p>\n\n<pre><code>#version 400\n\nout vec4 fragment_color;\nconst float PI = 3.14159265;\n\nuniform sampler2D texture0;\n\nin fData\n{\n    vec3 normal;\n    vec4 color;\n    mat4 v;\n    vec2 tex_coord;\n} frag;\n\n\n\nvoid main () {\n    vec3 n = normalize(frag.normal);\n    float intensity = min(max(dot(n, vec3(0,0,-1)), 0.0), 1.0);\n\n    //fragment_color = frag.color * intensity * frag.tex_coord.s;\n    fragment_color = texture2D(texture0, frag.tex_coord.st);\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;streambuf&gt;\n#include &lt;chrono&gt;\n#include &lt;gl/glew.h&gt;\n#include &lt;gl/GL.h&gt;\n# define M_PI           3.14159265358979323846\n#include \"glm\\glm.hpp\"\n#include \"glm\\gtc\\matrix_transform.hpp\"\n#include \"bth_image.h\"\n#pragma comment(lib, \"opengl32.lib\")\n#pragma comment(lib, \"glew32.lib\")\n\nusing namespace std;\nusing namespace glm;\nHWND InitWindow(HINSTANCE hInstance);\nLRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);\nHGLRC CreateOpenGLContext(HWND wndHandle);\n\nGLuint gVertexBuffer = 0;\nGLuint gVertexAttribute = 0;\nGLuint gShaderProgram = 0;\nGLuint textures[1];\nmat4x4 view;\nmat4x4 world;\nmat4x4 projection;\nfloat DT;\n\nstruct CPUvalues\n{\n    float v1;\n    float v2;\n    float v3;\n    float v4;\n};\n\nCPUvalues Gv = { 0.5, 0, 0, 0 };\n\nGLuint gu = 0;\n\n#define BUFFER_OFFSET(i) ((char *)nullptr + (i))\n\nvoid CreateShaders()\n{\n    GLuint vs = glCreateShader(GL_VERTEX_SHADER);\n    ifstream shaderFile(\"VertexShader.glsl\");\n    std::string shaderText((std::istreambuf_iterator&lt;char&gt;(shaderFile)), std::istreambuf_iterator&lt;char&gt;());\n    shaderFile.close();\n    const char* shaderTextPtr = shaderText.c_str();\n    glShaderSource(vs, 1, &amp;shaderTextPtr, nullptr);\n    glCompileShader(vs);\n\n    //create fragment shader | same process.\n    GLuint fs = glCreateShader(GL_FRAGMENT_SHADER);\n    shaderFile.open(\"Fragment.glsl\");\n    shaderText.assign((std::istreambuf_iterator&lt;char&gt;(shaderFile)), std::istreambuf_iterator&lt;char&gt;());\n    shaderFile.close();\n    shaderTextPtr = shaderText.c_str();\n    glShaderSource(fs, 1, &amp;shaderTextPtr, nullptr);\n    glCompileShader(fs);\n\n    GLuint gs = glCreateShader(GL_GEOMETRY_SHADER);\n    shaderFile.open(\"GMshader.glsl\");\n    shaderText.assign((std::istreambuf_iterator&lt;char&gt;(shaderFile)), std::istreambuf_iterator&lt;char&gt;());\n    shaderFile.close();\n    shaderTextPtr = shaderText.c_str();\n    glShaderSource(gs, 1, &amp;shaderTextPtr, nullptr);\n    glCompileShader(gs);\n\n\n    GLint success = 0;\n    glGetShaderiv(gs, GL_COMPILE_STATUS, &amp;success);\n    if (success == GL_FALSE)\n    {\n        GLint logSize = 0;\n        glGetShaderiv(gs, GL_INFO_LOG_LENGTH, &amp;logSize);\n        std::vector&lt;GLchar&gt; errorLog(logSize);\n        glGetShaderInfoLog(gs, logSize, &amp;logSize, &amp;errorLog[0]);\n        for (int i = 0; i &lt; errorLog.size(); i++)\n        {\n            cout &lt;&lt; errorLog.at(i);\n        }\n    }\n    //link shader program (connect vs and ps)\n    gShaderProgram = glCreateProgram();\n    glAttachShader(gShaderProgram, fs);\n    glAttachShader(gShaderProgram, gs);\n    glAttachShader(gShaderProgram, vs);\n\n    glBindAttribLocation(gShaderProgram, 1, \"vertices\");\n\n    glEnable(GL_TEXTURE_2D);\n    glGenTextures(1, textures);\n    glBindTexture(GL_TEXTURE_2D, textures[0]);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, BTH_IMAGE_WIDTH, BTH_IMAGE_HEIGHT, 0, GL_RGBA, GL_UNSIGNED_BYTE, (GLvoid*)BTH_IMAGE_DATA);\n\n\n    glLinkProgram(gShaderProgram);\n\n\n\n    GLint isLinked = 0;\n    glGetProgramiv(gShaderProgram, GL_LINK_STATUS, &amp;isLinked);\n    if (isLinked == GL_FALSE)\n    {\n        GLint maxLength = 0;\n        glGetProgramiv(gShaderProgram, GL_INFO_LOG_LENGTH, &amp;maxLength);\n        std::vector&lt;GLchar&gt; infoLog(maxLength);\n        glGetProgramInfoLog(gShaderProgram, maxLength, &amp;maxLength, &amp;infoLog[0]);\n        for (GLint i = 0; i &lt; maxLength; i++)\n        {\n            cout &lt;&lt; infoLog.at(i);\n        }\n    }\n}\n\nvoid CreateTriangleData()\n{\n    // this is how we will structure the input data for the vertex shader\n    // every six floats, is one vertex.\n\n    struct TriangleVertex\n    {\n        float x, y, z;\n        float r, g, b;\n        float s, t;\n    };\n    // create the actual data in plane Z = 0\n    TriangleVertex triangleVertices[6] = \n    {\n        // pos and color for each vertex\n        { -0.5f, 0.5f, 0.0f,    1.0f, 0.0f, 0.0f,   1.0f, 0.0f },\n        { 0.5f, -0.5f, 0.0f,    0.0f, 1.0f, 0.0f,   1.0f, 0.0f },\n        { -0.5f, -0.5f, 0.0f,   0.0f, 0.0f, 1.0f,   1.0f, 0.0f },\n\n        { 0.5f, 0.5f, 0.0f,     0.0f, 0.0f, 1.0f,   1.0f, 0.0f },\n        { 0.5f, -0.5f, 0.0f,    0.0f, 1.0f, 0.0f,   1.0f, 0.0f },\n        { -0.5f, 0.5f, 0.0f,    1.0f, 0.0f, 0.0f,   1.0f, 0.0f }\n\n\n    };\n    // Vertex Array Object (VAO) \n    glGenVertexArrays(1, &amp;gVertexAttribute);\n    // bind == enable\n    glBindVertexArray(gVertexAttribute);\n    // this activates the first and second attributes of this VAO\n    glEnableVertexAttribArray(0); \n    glEnableVertexAttribArray(1);\n\n    // create a vertex buffer object (VBO) id\n    glGenBuffers(1, &amp;gVertexBuffer);\n    // Bind the buffer ID as an ARRAY_BUFFER\n    glBindBuffer(GL_ARRAY_BUFFER, gVertexBuffer);\n    // This \"could\" imply copying to the GPU, depending on what the driver wants to do...\n    glBufferData(GL_ARRAY_BUFFER, sizeof(triangleVertices), triangleVertices, GL_STATIC_DRAW);\n\n    // query where which slot corresponds to the input vertex_position in the Vertex Shader \n    GLint vertexPos = glGetAttribLocation(gShaderProgram, \"vertex_position\");\n    // specify that: the vertex attribute \"vertexPos\", of 3 elements of type FLOAT, not normalized, with STRIDE != 0,\n    //               starts at offset 0 of the gVertexBuffer (it is implicitly bound!)\n    glVertexAttribPointer(vertexPos, 3,    GL_FLOAT, GL_FALSE,     sizeof(TriangleVertex), BUFFER_OFFSET(0));\n\n    // query where which slot corresponds to the input vertex_color in the Vertex Shader \n    GLint vertexColor = glGetAttribLocation(gShaderProgram, \"vertex_color\");\n    cout &lt;&lt; \"vertex pos \" &lt;&lt; vertexPos &lt;&lt; endl;\n    cout &lt;&lt; \"vertex color \" &lt;&lt; vertexColor &lt;&lt; endl;\n    // specify that: the vertex attribute \"vertex_color\", of 3 elements of type FLOAT, not normalized, with STRIDE != 0,\n    //               starts at offset (12 bytes) of the gVertexBuffer \n    glVertexAttribPointer(vertexColor, 3,    GL_FLOAT, GL_FALSE,     sizeof(TriangleVertex), BUFFER_OFFSET(sizeof(float)*3));\n    cout &lt;&lt; glGetError() &lt;&lt; endl;\n\n\n\n    GLint tex_coord = glGetUniformLocation(gShaderProgram, \"coord\");\n    cout &lt;&lt; \"coord \" &lt;&lt; tex_coord &lt;&lt; endl;\n    glVertexAttribPointer(tex_coord, 2, GL_FLOAT, GL_FALSE, sizeof(TriangleVertex), BUFFER_OFFSET(sizeof(float) * 6));\n    cout &lt;&lt; glGetError() &lt;&lt; endl;\n}\n\nvoid SetViewport()\n{\n    glViewport(0, 0, 640, 480);\n}\n\nvoid Render()\n{\n    // set the color TO BE used\n    glClearColor(0, 0, 0, 1);\n    // use the color to clear the color buffer\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n\n    glUseProgram(gShaderProgram);\n    glBindVertexArray(gVertexAttribute);\n\n    glGenBuffers(1, &amp;gu);\n    glBindBuffer(GL_UNIFORM_BUFFER, gu);\n\n\n\n    glBufferSubData(GL_UNIFORM_BUFFER, 0, sizeof(CPUvalues), &amp;Gv);\n\n    GLint OG_loc = glGetUniformLocation(gShaderProgram, \"test\");\n\n    GLint _p = glGetUniformLocation(gShaderProgram, \"p\");\n    GLint _m = glGetUniformLocation(gShaderProgram, \"m\");\n    GLint _v = glGetUniformLocation(gShaderProgram, \"v\");\n\n\n    GLuint unit = 0;\n    GLint texture0 = glGetUniformLocation(gShaderProgram, \"texture0\");\n    //cout &lt;&lt; glGetUniformLocation(gShaderProgram, \"coord\") &lt;&lt; endl;;\n    glActiveTexture(GL_TEXTURE0 + unit);\n    glBindTexture(GL_TEXTURE_2D, textures[0]);\n    glUniform1i(texture0, unit);\n    glUniformMatrix4fv(_p, 1, GL_FALSE, &amp;projection[0][0]);\n    glUniformMatrix4fv(_m, 1, GL_FALSE, &amp;world[0][0]);\n    glUniformMatrix4fv(_v, 1, GL_FALSE, &amp;view[0][0]);\n\n    glUniform4f(OG_loc, Gv.v1, Gv.v2, Gv.v3, Gv.v4);\n    // draw 3 vertices starting from index 0 in the vertex array currently bound (VAO), with current in-use shader\n    glEnable(GL_DEPTH_TEST);\n    glEnable(GL_CULL_FACE);\n\n    glFrontFace(GL_CW);\n    glCullFace(GL_BACK);\n    glDrawArrays(GL_TRIANGLES, 0, 6);\n\n}\n\nint WINAPI wWinMain( HINSTANCE hInstance, HINSTANCE hPrevInstance, LPWSTR lpCmdLine, int nCmdShow )\n{\n    AllocConsole();\n    freopen(\"CONOUT$\", \"w\", stdout);\n    DT = 0.016;\n    MSG msg = { 0 };\n    HWND wndHandle = InitWindow(hInstance); //1. Skapa f\u00f6nster\n    if (wndHandle)\n    {\n        HDC hDC = GetDC(wndHandle);\n\n        HGLRC hRC = CreateOpenGLContext(wndHandle); //2. Skapa och koppla OpenGL context\n\n        glewInit(); //3. Initiera The OpenGL Extension Wrangler Library (GLEW)\n\n        SetViewport(); //4. S\u00e4tt viewport\n\n        CreateShaders(); //5. Skapa vertex- och fragment-shaders\n\n        CreateTriangleData(); //6. Definiera triangelvertiser, 7. Skapa vertex buffer object (VBO), 8.Skapa vertex array object (VAO)\n\n        ShowWindow(wndHandle, nCmdShow);\n        view = lookAt(vec3(0, 0, -2), vec3(0, 0, 0), vec3(0, 1, 0));\n        mat4x4 sm;\n        sm = scale(sm, vec3(1, 1, 1));\n        mat4x4 tm;\n        tm = translate(tm, vec3(0, 0, 0));\n        mat4x4 rm;\n        rm = mat4x4(1);\n        projection = perspective&lt;float&gt;(M_PI*0.45, 640 / 480, 0.1, 20);\n\n\n        while (WM_QUIT != msg.message)\n        {\n            auto start_time = chrono::high_resolution_clock::now();\n            //Gv.v1 += 0.05 * DT;\n\n            Gv.v1 += 1 * DT;\n            world = tm * rotate(rm, Gv.v1, vec3(0, 1, 0)) * sm;\n\n\n            if (PeekMessage(&amp;msg, nullptr, 0, 0, PM_REMOVE))\n            {\n                TranslateMessage(&amp;msg);\n                DispatchMessage(&amp;msg);\n            }\n            else\n            {\n                Render(); //9. Rendera\n                SwapBuffers(hDC); //10. V\u00e4xla front- och back-buffer\n            }\n            auto final_time = chrono::high_resolution_clock::now() - start_time;\n            DT = chrono::duration_cast&lt;std::chrono::milliseconds&gt;(final_time).count() / (double)1000;\n        }\n\n        wglMakeCurrent(NULL, NULL);\n        ReleaseDC(wndHandle, hDC);\n        wglDeleteContext(hRC);\n        DestroyWindow(wndHandle);\n    }\n\n    return (int) msg.wParam;\n}\n\nHWND InitWindow(HINSTANCE hInstance)\n{\n    WNDCLASSEX wcex = { 0 };\n    wcex.cbSize = sizeof(WNDCLASSEX); \n    wcex.style          = CS_HREDRAW | CS_VREDRAW;\n    wcex.lpfnWndProc    = WndProc;\n    wcex.hInstance      = hInstance;\n    wcex.lpszClassName = L\"BTH_GL_DEMO\";\n    if( !RegisterClassEx(&amp;wcex) )\n        return false;\n\n    RECT rc = { 0, 0, 640, 480 };\n    AdjustWindowRect( &amp;rc, WS_OVERLAPPEDWINDOW, FALSE );\n\n    HWND handle = CreateWindow(\n        L\"BTH_GL_DEMO\",\n        L\"BTH OpenGL Demo\",\n        WS_OVERLAPPEDWINDOW,\n        CW_USEDEFAULT,\n        CW_USEDEFAULT,\n        rc.right - rc.left,\n        rc.bottom - rc.top,\n        nullptr,\n        nullptr,\n        hInstance,\n        nullptr);\n\n    return handle;\n}\n\nLRESULT CALLBACK WndProc( HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam )\n{\n    switch (message) \n    {\n    case WM_DESTROY:\n        PostQuitMessage(0);\n        break;      \n    }\n\n    return DefWindowProc(hWnd, message, wParam, lParam);\n}\n\nHGLRC CreateOpenGLContext(HWND wndHandle)\n{\n    //get handle to a device context (DC) for the client area\n    //of a specified window or for the entire screen\n    HDC hDC = GetDC(wndHandle);\n\n    //details: http://msdn.microsoft.com/en-us/library/windows/desktop/dd318286(v=vs.85).aspx\n    static  PIXELFORMATDESCRIPTOR pixelFormatDesc =\n    {\n        sizeof(PIXELFORMATDESCRIPTOR),    // size of this pfd  \n        1,                                // version number  \n        PFD_DRAW_TO_WINDOW |              // support window  \n        PFD_SUPPORT_OPENGL |              // support OpenGL  \n        PFD_DOUBLEBUFFER,                 // double buffered        \n        PFD_TYPE_RGBA,                    // RGBA type  \n        32,                               // 32-bit color depth  \n        0, 0, 0, 0, 0, 0,                 // color bits ignored  \n        0,                                // no alpha buffer  \n        0,                                // shift bit ignored  \n        0,                                // no accumulation buffer  \n        0, 0, 0, 0,                       // accum bits ignored  \n        0,                                // 0-bits for depth buffer &lt;-- modified by Stefan      \n        0,                                // no stencil buffer  \n        0,                                // no auxiliary buffer  \n        PFD_MAIN_PLANE,                   // main layer  \n        0,                                // reserved  \n        0, 0, 0                           // layer masks ignored  \n    };\n\n    //attempt to match an appropriate pixel format supported by a\n    //device context to a given pixel format specification.\n    int pixelFormat = ChoosePixelFormat(hDC, &amp;pixelFormatDesc);\n\n    //set the pixel format of the specified device context\n    //to the format specified by the iPixelFormat index.\n    SetPixelFormat(hDC, pixelFormat, &amp;pixelFormatDesc);\n\n    //create a new OpenGL rendering context, which is suitable for drawing\n    //on the device referenced by hdc. The rendering context has the same\n    //pixel format as the device context.\n    HGLRC hRC = wglCreateContext(hDC);\n\n    //makes a specified OpenGL rendering context the calling thread's current\n    //rendering context. All subsequent OpenGL calls made by the thread are\n    //drawn on the device identified by hdc. \n    wglMakeCurrent(hDC, hRC);\n\n    return hRC;\n}\n</code></pre>\n"}, {"tags": ["c++", "directx", "render"], "comments": [{"owner": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 0, "creation_date": 1514393321, "post_id": 47994717, "comment_id": 82959566, "body": "Post the relevant code here. Also, look at the remarks section from this page: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb174350(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 0, "creation_date": 1514432434, "post_id": 47994717, "comment_id": 82971091, "body": "Also remember, <code>BeginScene</code> and <code>EndScene</code> return <code>HRESULT</code> values so don&#39;t compare it with boolean values. Use <code>SUCCEEDED</code> and <code>FAILED</code> macros to check if those APIs succeeded or not"}], "owner": {"reputation": 3, "user_id": 7120875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d2d3d01e6f93ba9a5eacc64011e6ce2?s=128&d=identicon&r=PG&f=1", "display_name": "Trung Hua", "link": "https://stackoverflow.com/users/7120875/trung-hua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514434883, "creation_date": 1514388613, "last_edit_date": 1514434883, "question_id": 47994717, "link": "https://stackoverflow.com/questions/47994717/rendering-using-directx", "title": "Rendering using DirectX", "body": "<p>I'm a little new at programming in directX. So far, I have used this code block for rendering. This code is a sample code from my tutorial.</p>\n\n<p><img src=\"https://i.stack.imgur.com/tX7dL.png\" alt=\"enter image description here\"></p>\n\n<p>With this code, we will draw a sprite once after updating frame 2 times. Particularly, when a character stands at position A and in next frame, it will move to position B. But now with this code <code>_d3ddv-&gt;BeginScene()</code> will return false, then it will not draw anything. In next frame, it will move to position C then <code>_d3ddv-&gt;BeginScene()</code> will return true, so it will draw.</p>\n\n<p>With this process, I skip a frame with position B. So what should I do now?  Is it true or wrong?</p>\n"}, {"tags": ["c++", "performance", "opencv", "jpeg", "bmp"], "comments": [{"owner": {"reputation": 14220, "user_id": 3547485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xGJWo.png?s=128&g=1", "display_name": "Kinght \u91d1", "link": "https://stackoverflow.com/users/3547485/kinght-%e9%87%91"}, "edited": false, "score": 1, "creation_date": 1514388986, "post_id": 47994538, "comment_id": 82957616, "body": "JPG format uses compress algorithm to reduce the image size, while usually BMP does not."}, {"owner": {"reputation": 331, "user_id": 6393640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A1103.jpg?s=128&g=1", "display_name": "Tom Baires", "link": "https://stackoverflow.com/users/6393640/tom-baires"}, "reply_to_user": {"reputation": 14220, "user_id": 3547485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xGJWo.png?s=128&g=1", "display_name": "Kinght \u91d1", "link": "https://stackoverflow.com/users/3547485/kinght-%e9%87%91"}, "edited": false, "score": 0, "creation_date": 1514391201, "post_id": 47994538, "comment_id": 82958603, "body": "I know but 500% difference? And the similar problem in C# jpeg wins?"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1514392608, "post_id": 47994538, "comment_id": 82959215, "body": "Are you running a debug release? What optimisation options did you use for compiling?"}, {"owner": {"reputation": 331, "user_id": 6393640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A1103.jpg?s=128&g=1", "display_name": "Tom Baires", "link": "https://stackoverflow.com/users/6393640/tom-baires"}, "edited": false, "score": 0, "creation_date": 1514393243, "post_id": 47994538, "comment_id": 82959525, "body": "Its run in release mode, how i can check which optimisation are active? <code>&#47;Yu&quot;stdafx.h&quot; &#47;GS &#47;GL &#47;W3 &#47;Gy &#47;Zc:wchar_t &#47;I&quot;C:\\opencv\\opencv331\\opencv\\build\\include&quot; &#47;Zi &#47;Gm- &#47;O2 &#47;sdl &#47;Fd&quot;x64\\Release\\vc141.pdb&quot; &#47;Zc:inline &#47;fp:precise &#47;D &quot;NDEBUG&quot; &#47;D &quot;VIDEOMODULE_EXPORTS&quot; &#47;D &quot;_WINDOWS&quot; &#47;D &quot;_USRDLL&quot; &#47;D &quot;_WINDLL&quot; &#47;D &quot;_UNICODE&quot; &#47;D &quot;UNICODE&quot; &#47;errorReport:prompt &#47;WX- &#47;Zc:forScope &#47;Gd &#47;Oi &#47;MD &#47;Fa&quot;x64\\Release\\&quot; &#47;EHsc &#47;nologo &#47;Fo&quot;x64\\Release\\&quot; &#47;Fp&quot;x64\\Release\\VideoModule.pch&quot; &#47;diagnostics:classic </code>"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1514399232, "post_id": 47994538, "comment_id": 82961947, "body": "&quot;I know but 500% difference?&quot; <a href=\"https://en.wikipedia.org/wiki/JPEG#Decoding\" rel=\"nofollow noreferrer\">Decoding JPEG</a> is somewhat more involved than simply copying and shuffling the raw image data stored in BMP. The extra complexity is what you pay for needing only 0.5% of the space to store that image. | That said, I&#39;m rather puzzled as to why you encode/decode at all in the scenario you show us (not to mention JPEG being far from ideal format for the type of image you&#39;ve got)."}, {"owner": {"reputation": 820, "user_id": 1675589, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a35386e8014459e87a744f8a00b0f3c1?s=128&d=identicon&r=PG", "display_name": "Michel Rouzic", "link": "https://stackoverflow.com/users/1675589/michel-rouzic"}, "edited": false, "score": 0, "creation_date": 1522437931, "post_id": 47994538, "comment_id": 86168351, "body": "People may mistakenly believe that the slowest part of loading an image is reading from the disk. It generally isn&#39;t (although at times it can take much longer than usual), for a JPEG the disk reading part is maybe a tenth of the time it takes, the rest is decoding. In other words disk IO is generally fast enough that you should expect uncompressed images to load faster despite being larger on the disk."}], "answers": [{"tags": [], "owner": {"reputation": 331, "user_id": 6393640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A1103.jpg?s=128&g=1", "display_name": "Tom Baires", "link": "https://stackoverflow.com/users/6393640/tom-baires"}, "is_accepted": true, "score": 2, "last_activity_date": 1514392485, "last_edit_date": 1514392485, "creation_date": 1514392150, "answer_id": 47995511, "question_id": 47994538, "link": "https://stackoverflow.com/questions/47994538/c-opencv-imdecode-slow/47995511#47995511", "title": "C++ OpenCV imdecode slow", "body": "<p>You can use a other codec for example</p>\n\n<ul>\n<li><a href=\"https://github.com/libjpeg-turbo/libjpeg-turbo\" rel=\"nofollow noreferrer\">https://github.com/libjpeg-turbo/libjpeg-turbo</a></li>\n<li><a href=\"http://www.fastcompression.com/news/2013-cuda-jpeg-codec.htm\" rel=\"nofollow noreferrer\">http://www.fastcompression.com/news/2013-cuda-jpeg-codec.htm</a></li>\n<li><a href=\"https://software.intel.com/en-us/intel-ipp\" rel=\"nofollow noreferrer\">https://software.intel.com/en-us/intel-ipp</a></li>\n</ul>\n\n<p>An interesting article on this Topic<br>\n<a href=\"http://www.briancbecker.com/blog/2010/analysis-of-jpeg-decoding-speeds/\" rel=\"nofollow noreferrer\">http://www.briancbecker.com/blog/2010/analysis-of-jpeg-decoding-speeds/</a></p>\n\n<p>Build OpenCV 3.0.0 with libjpeg turbo?<br>\n<a href=\"http://answers.opencv.org/question/68681/how-to-build-opencv-300-with-libjpeg-turbo/\" rel=\"nofollow noreferrer\">http://answers.opencv.org/question/68681/how-to-build-opencv-300-with-libjpeg-turbo/</a></p>\n"}], "owner": {"reputation": 331, "user_id": 6393640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A1103.jpg?s=128&g=1", "display_name": "Tom Baires", "link": "https://stackoverflow.com/users/6393640/tom-baires"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4238, "favorite_count": 3, "accepted_answer_id": 47995511, "answer_count": 1, "score": 1, "last_activity_date": 1514447277, "creation_date": 1514387862, "last_edit_date": 1514447277, "question_id": 47994538, "link": "https://stackoverflow.com/questions/47994538/c-opencv-imdecode-slow", "title": "C++ OpenCV imdecode slow", "body": "<p>I send a byte array of an image from C# to a C++ Library. I decode the image with OpenCV (Version 3.3.1) BMP images are fast in decoding but JPEG images are slow.</p>\n\n<p>How i can speed up the decoding time for JPEG images? (Multithreading, GPU, ...?)</p>\n\n<p><strong>Performance of decode</strong></p>\n\n<pre><code>---------------------------------------------------------\n| Resolution | Format | Size  | Duration  |             |\n---------------------------------------------------------\n| 800x600    | BMP    | 2MB   | 0.7 ms    |             |\n---------------------------------------------------------\n| 800x600    | JPEG   | 10KB  | 4 ms      | 500% slower |\n---------------------------------------------------------\n</code></pre>\n\n<p><strong>OpenCV C++ Method</strong></p>\n\n<pre><code>VMAPI char* __stdcall SendImage(unsigned char* pArray, int nSize)\n{\n    cv::Mat buf(1, nSize, CV_8UC1, (void*)pArray);\n    auto start = std::chrono::high_resolution_clock::now();\n    //cv::Mat input = cv::imdecode(buf, CV_LOAD_IMAGE_COLOR);\n    cv::Mat input = cv::imdecode(buf, -1);\n    auto finish = std::chrono::high_resolution_clock::now();\n    std::chrono::duration&lt;double&gt; elapsed = finish - start;\n    std::string result = \"Test Version 1.0 - Elapsed time: \" + std::to_string(elapsed.count() * 1000) + \" s\\n\";\n\n    return _strdup(result.c_str());\n}\n</code></pre>\n\n<p><strong>C# Request</strong></p>\n\n<pre><code>[DllImport(\"VideoModule.dll\")]\npublic static extern string SendImage(IntPtr pArray, int nSize);\n\nstatic void ProcessImage()\n{\n    var bitmap = new Bitmap(800, 600);\n    using (var graphic = Graphics.FromImage(bitmap))\n    {\n        graphic.Clear(Color.White);\n        graphic.DrawRectangle(new Pen(Color.DarkBlue), 20, 20, 60, 60);\n        graphic.DrawRectangle(new Pen(Color.DarkGreen), 200, 200, 60, 60);\n        graphic.DrawRectangle(new Pen(Color.Red), 500, 400, 60, 60);\n    }\n\n    var memoryStream = new MemoryStream();\n    //Return an image in JPEG\n    bitmap.Save(memoryStream, ImageFormat.Jpeg);\n    //Return an image in BMP\n    //bitmap.Save(memoryStream, ImageFormat.Bmp);\n    var imageData = memoryStream.GetBuffer();\n\n    var size = Marshal.SizeOf(imageData[0]) * imageData.Length;\n    IntPtr pnt = Marshal.AllocHGlobal(size);\n\n    try\n    {\n        // Copy the array to unmanaged memory.\n        Marshal.Copy(imageData, 0, pnt, imageData.Length);\n    }\n    catch (Exception)\n    {\n    }\n\n    result = SendImage(pnt, imageData.Length);\n    Marshal.FreeHGlobal(pnt);\n    Console.WriteLine(result);\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "image-processing", "mat", "motion-detection"], "comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1514389567, "post_id": 47994535, "comment_id": 82957842, "body": "What actual question do you have? Are you asking why you are getting assertion errors?"}, {"owner": {"reputation": 61, "user_id": 8184640, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f7a0161d961f259c9b22f8439f23708b?s=128&d=identicon&r=PG&f=1", "display_name": "Spider Jerusalem", "link": "https://stackoverflow.com/users/8184640/spider-jerusalem"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1514389949, "post_id": 47994535, "comment_id": 82958025, "body": "sort of yeah, I know the issue  is with accumulateWeighted() due to these two pages I found when initially debugging this: [<a href=\"https://stackoverflow.com/questions/7059817/assertion-failed-with-accumulateweighted-in-opencv]\" title=\"assertion failed with accumulateweighted in opencv%5d\">stackoverflow.com/questions/7059817/&hellip;</a> and the one listed in the question below the error"}, {"owner": {"reputation": 61, "user_id": 8184640, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f7a0161d961f259c9b22f8439f23708b?s=128&d=identicon&r=PG&f=1", "display_name": "Spider Jerusalem", "link": "https://stackoverflow.com/users/8184640/spider-jerusalem"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1514390241, "post_id": 47994535, "comment_id": 82958172, "body": "I&#39;m trying to figure out the difference between Acc(created based off gray_frame&#39;s values and average(initialized as empy matrix but made as a float valued copy of grayframe. I need this method to work with average because I need to have a running average frame in order to figure out if anythings is moving in the frame."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 8184640, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f7a0161d961f259c9b22f8439f23708b?s=128&d=identicon&r=PG&f=1", "display_name": "Spider Jerusalem", "link": "https://stackoverflow.com/users/8184640/spider-jerusalem"}, "is_accepted": false, "score": 0, "last_activity_date": 1514394554, "creation_date": 1514394554, "answer_id": 47996049, "question_id": 47994535, "link": "https://stackoverflow.com/questions/47994535/debugging-a-method-for-finding-running-average-of-frames-from-video-for-motion-d/47996049#47996049", "title": "debugging a method for finding running average of frames from video for motion detection using OpenCV in C++", "body": "<p>The issue is when scaling average in convertScaleAbs() this changes the type of average to 0 or CV_8U. this was fixed by creating an empty Mat() and storing the results in there, as opposed to scaling average itself:</p>\n\n<pre><code>Mat set_delta(Mat &amp;average, Mat gray_frame)\n{\n    Mat delta_frame, scaled_average;\n    //delta_frame is the storage for the difference between the accumulated average\n    //and the current gray frame. scaled average is for storing the output of convertScaleAbs()\n    //otherwise the depth of global average is 0 and causes an error on the second loop\n    if (average.empty()==1)\n    {\n        gray_frame.convertTo(average, CV_32FC(gray_frame.channels()));\n    }\n\n    accumulateWeighted(gray_frame, average, .5);\n    convertScaleAbs(average, scaled_average);\n    absdiff(gray_frame,scaled_average,delta_frame);\n\n    return delta_frame;\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 8184640, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f7a0161d961f259c9b22f8439f23708b?s=128&d=identicon&r=PG&f=1", "display_name": "Spider Jerusalem", "link": "https://stackoverflow.com/users/8184640/spider-jerusalem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 509, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514396184, "creation_date": 1514387846, "last_edit_date": 1514396184, "question_id": 47994535, "link": "https://stackoverflow.com/questions/47994535/debugging-a-method-for-finding-running-average-of-frames-from-video-for-motion-d", "title": "debugging a method for finding running average of frames from video for motion detection using OpenCV in C++", "body": "<p>So to practice C++ I'm writing a motion detection program that uploads photos to <em>dropbox</em> using the OpenCV library, a project that I did last summer in pyton following this tutorial:  <a href=\"https://www.pyimagesearch.com/2015/05/25/basic-motion-detection-and-tracking-with-python-and-opencv/\" rel=\"nofollow noreferrer\">https://www.pyimagesearch.com/2015/05/25/basic-motion-detection-and-tracking-with-python-and-opencv/</a></p>\n\n<p>This section of code is running once, and then throwing an error on the second loop.</p>\n\n<p>This is the code:</p>\n\n<pre><code>Mat set_delta(Mat &amp;average, Mat gray_frame)\n{\n    Mat delta_frame;\n    if (average.empty()==1)\n    {\n        cout&lt;&lt;\"gray frame depth: \"&lt;&lt;gray_frame.depth();\n\n        gray_frame.convertTo(average, CV_32FC(gray_frame.channels()));\n        //Mat Acc(gray_frame.rows,    gray_frame.cols,CV_32FC(gray_frame.channels()));\n    }\n    //cout&lt;&lt;\"gray_frame average: \"&lt;&lt; get_average(gray_frame)&lt;&lt;\n    //      \"\\naverage_frame average: \"&lt;&lt;get_average(average);\n    Mat Acc(average.rows, average.cols,CV_32FC(average.channels()));\n\n    cout&lt;&lt;\"average depth: \"&lt;&lt;average.depth()&lt;&lt;\"\\nAcc depth: \"&lt;&lt;Acc.depth();\n\n    accumulateWeighted(gray_frame, average, .5);\n    convertScaleAbs(average, average);\n    absdiff(gray_frame,average,delta_frame);\n    return delta_frame;\n}\n</code></pre>\n\n<p>I'm getting this error:</p>\n\n<pre><code>OpenCV Error: Assertion failed (func != 0) in accumulateWeighted, file /build/opencv/src/opencv-3.3.1/modules/imgproc/src/accum.cpp, line 635\nterminate called after throwing an instance of 'cv::Exception'\nwhat():  /build/opencv/src/opencv-3.3.1/modules/imgproc/src/accum.cpp:635: error: (-215) func != 0 in function accumulateWeighted\n</code></pre>\n\n<p>the error is being generated by the accumulate Weighted function, which I tried to fix by creating a local array Acc after reading these pages:</p>\n\n<p><a href=\"http://answers.opencv.org/question/63781/accumulateweighted-problems/\" rel=\"nofollow noreferrer\">http://answers.opencv.org/question/63781/accumulateweighted-problems/</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/7059817/assertion-failed-with-accumulateweighted-in-opencv\">Assertion failed with accumulateWeighted in OpenCV</a></p>\n\n<p>I need to find out why this is terminating on the second loop. I think this is a symantic error. the code runs as written, but my instructions aren't actually what I intend/need it to do.</p>\n\n<p>some possibly useful information:</p>\n\n<p>Acc was originally based off gray_frame but I realized the design of this method depended on the global value average, causing the delta frame to have an outline of the original frame in all proceeding frames. So I'm trying to redesign it to stick to using global average.</p>\n\n<p>The channels for all 3 (gray_frame, average, and Acc) is one.\nThe depth of gray frame stays at 0.\nThe depth for average at first is 5(after the if statement), then 0, whereas the depth of Acc stays at 5. It seems as is the main loop executes once and then quits.</p>\n\n<p>a single average value of average before the accumulate weighted of the second loop is the same as the average of the first. around 97.89</p>\n\n<p>The entire C++ program (work in progress) can be found here: <a href=\"https://github.com/skewballfox/SauronsEye/blob/master/SauronsEye.cpp\" rel=\"nofollow noreferrer\">https://github.com/skewballfox/SauronsEye/blob/master/SauronsEye.cpp</a></p>\n\n<p>My work from last summer that I'm somewhat using as a guide (this was mainly for me to practice and never really was intended to be viewed so it's kinda messy):\n<a href=\"https://github.com/skewballfox/opencv-practice/blob/master/pi_surveillance.py\" rel=\"nofollow noreferrer\">https://github.com/skewballfox/opencv-practice/blob/master/pi_surveillance.py</a></p>\n"}, {"tags": ["c++", "linux", "eclipse"], "answers": [{"comments": [{"owner": {"reputation": 13579, "user_id": 1501700, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1394f16d55f1c0f4cc4bc5ce4336cf20?s=128&d=identicon&r=PG", "display_name": "vico", "link": "https://stackoverflow.com/users/1501700/vico"}, "edited": false, "score": 0, "creation_date": 1514389281, "post_id": 47994343, "comment_id": 82957718, "body": "Did as recommended, but still don&#39;t see LD_LIBRARY_PATH from my application. More details in UPD in question body."}, {"owner": {"reputation": 1470, "user_id": 9067523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd2afb70cfb93a16e7caa620799704eb?s=128&d=identicon&r=PG&f=1", "display_name": "mmlr", "link": "https://stackoverflow.com/users/9067523/mmlr"}, "reply_to_user": {"reputation": 13579, "user_id": 1501700, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1394f16d55f1c0f4cc4bc5ce4336cf20?s=128&d=identicon&r=PG", "display_name": "vico", "link": "https://stackoverflow.com/users/1501700/vico"}, "edited": false, "score": 0, "creation_date": 1514390909, "post_id": 47994343, "comment_id": 82958453, "body": "I&#39;ve updated my answer to include a section about the problematic exclamation points in your success case printf."}], "tags": [], "owner": {"reputation": 1470, "user_id": 9067523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd2afb70cfb93a16e7caa620799704eb?s=128&d=identicon&r=PG&f=1", "display_name": "mmlr", "link": "https://stackoverflow.com/users/9067523/mmlr"}, "is_accepted": true, "score": 3, "last_activity_date": 1514390752, "last_edit_date": 1514390752, "creation_date": 1514387008, "answer_id": 47994343, "question_id": 47994228, "link": "https://stackoverflow.com/questions/47994228/show-environment-variable-ld-library-path/47994343#47994343", "title": "Show environment variable LD_LIBRARY_PATH", "body": "<p>Depending on how you run the script, the env variable will only be added to the environment of the subshell running the script.</p>\n\n<p>If you run the script like this:</p>\n\n<pre><code>$ ./script.sh\n</code></pre>\n\n<p>This will spawn a new shell wherein the script is run. The parent shell, i.e. the one you started the script from, will not be affected by what the script does. Changes to the environment will therefore not be visible (changing the working directory or similar will also not work).</p>\n\n<p>If the script is intended to modify the environment of the current shell, the script needs to be sourced using the <code>.</code> or  <code>source</code> commands:</p>\n\n<pre><code>$ . ./script.sh\n$ source ./script.sh\n</code></pre>\n\n<p>From <code>help source</code> in bash:</p>\n\n<blockquote>\n  <p>Execute commands from a file in the current shell.</p>\n</blockquote>\n\n<p>Then there seems to be a problem with the code:</p>\n\n<p>As a commenter stated previousy, there are a lot of exclamation points in the success case <code>printf</code>. I presume these were meant to highlight the found variable name. Since they are outside of the opening quote of the format string, they are interpreted as logical not operators.</p>\n\n<p>The result is that the format string literal (a pointer) is negated, resulting in <code>false</code> due to the number of operators. This usually maps to 0, which would mean the format string becomes a null pointer. What happens when handing a null pointer to <code>printf</code> as the format string depends, as far as I can tell, on the implementation. If it doesn't crash, it most certainly will not print anything however.</p>\n\n<p>So the code may actually work, but there is no visible output due to that bug. To fix it, move the exclamation points into the format string, i.e. after the opening quote.</p>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 8014121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4fa3ca54136d5bc7c6f6238b9191852?s=128&d=identicon&r=PG&f=1", "display_name": "Gunnar Sigfusson", "link": "https://stackoverflow.com/users/8014121/gunnar-sigfusson"}, "is_accepted": false, "score": 0, "last_activity_date": 1514390961, "last_edit_date": 1514390961, "creation_date": 1514390236, "answer_id": 47995072, "question_id": 47994228, "link": "https://stackoverflow.com/questions/47994228/show-environment-variable-ld-library-path/47995072#47995072", "title": "Show environment variable LD_LIBRARY_PATH", "body": "<p>Look at the line <code>printf(!!!!!!!\"%s\\n\", thisEnv);</code>\nChange to <code>printf(\"!!!! %s\\n\", thisEnv);</code></p>\n"}, {"tags": [], "owner": {"reputation": 24, "user_id": 4509162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9304238e1b29bba0b4373ccb8ba6d495?s=128&d=identicon&r=PG&f=1", "display_name": "awahl", "link": "https://stackoverflow.com/users/4509162/awahl"}, "is_accepted": false, "score": 0, "last_activity_date": 1514392170, "creation_date": 1514392170, "answer_id": 47995516, "question_id": 47994228, "link": "https://stackoverflow.com/questions/47994228/show-environment-variable-ld-library-path/47995516#47995516", "title": "Show environment variable LD_LIBRARY_PATH", "body": "<p>It has nothing to do with your C/C++ application.\ntry the following:\n$ ./script.sh\n$ echo $LD_LIBRARY_PATH\nAnd you'll see that LD_LIBRARY_PATH is not set</p>\n\n<p>When you launch your script, bash creates a new process with its environment inherited from the original bash process. In that newly created process, you set the process environment variable LD_LIBRARY_PATH=xxxx\nWhen finalized your script.sh exits, and its environment dies with it.</p>\n\n<p>Meaning the LD_LIBRARY_PATH is not set in your original shell.</p>\n\n<p>As mentioned here above you need to run your script in the current shell\nEither with . or with source.</p>\n\n<p>I tested with your C/C++ and it works</p>\n"}], "owner": {"reputation": 13579, "user_id": 1501700, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1394f16d55f1c0f4cc4bc5ce4336cf20?s=128&d=identicon&r=PG", "display_name": "vico", "link": "https://stackoverflow.com/users/1501700/vico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2180, "favorite_count": 0, "accepted_answer_id": 47994343, "answer_count": 3, "score": 0, "last_activity_date": 1514392170, "creation_date": 1514386469, "last_edit_date": 1514390593, "question_id": 47994228, "link": "https://stackoverflow.com/questions/47994228/show-environment-variable-ld-library-path", "title": "Show environment variable LD_LIBRARY_PATH", "body": "<p>I have simple console application that prints environment variables:</p>\n\n<pre><code>int main(int argc, char **argv, char **envp)\n{\n\n  printf(\"Scanning for LD_LIB_PATH\\n\");\n  for (char **env = envp; *env != 0; env++)\n  {\n    char *thisEnv = *env;\n    std::string s= *env;\n    if (s.find(\"LD_LIBRARY_PATH\")!=std::string::npos)\n        {\n        printf(\"!!!!!!! %s\\n\", thisEnv);\n        }\n\n    printf(\"%s\\n\", thisEnv);\n  }\n\n}\n</code></pre>\n\n<p>Before run executable I run script that sets <code>LD_LIBRARY_PATH</code></p>\n\n<pre><code>export LD_LIBRARY_PATH=~/aaa/bbb/Debug:~/ccc/ddd/Debug\necho \"searching:\"\nexport | grep LD_LIBRARY\necho \"done\"\n</code></pre>\n\n<p>Script run fine with output:</p>\n\n<pre><code>exporting\nsearching:\ndeclare -x LD_LIBRARY_PATH=\"/home/vicp/aaa/bbb/Debug:/home/vico/ccc/ddd/Debug\"\ndone\n</code></pre>\n\n<p>I run executable and it finds many variables but no environment variable <code>LD_LIB_PATH</code>. Why?</p>\n\n<p>UPD</p>\n\n<p>As recommended I script <code>. ./script.sh</code> \nThen double check with command:</p>\n\n<pre><code>export |grep LD_LIBRARY_PATH\n</code></pre>\n\n<p>Got output:</p>\n\n<pre><code>declare -x LD_LIBRARY_PATH=\"/home/vicp/aaa/bbb/Debug:/home/vico/ccc/ddd/Debug\"\n</code></pre>\n\n<p>But still don't see <code>LD_LIBRARY_PATH</code> in my programm.</p>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1514388253, "post_id": 47994219, "comment_id": 82957275, "body": "Not an expert but I don&#39;t think this is possible because even if the inner structure of <code>myType2</code> is anonymous, it is still a structure, so you need to be able to address it, and thus it needs to be aligned to at least <code>sizeof(char)</code>."}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1514388304, "post_id": 47994219, "comment_id": 82957298, "body": "the nested strcuct is not a bitfield any longer and should follow the alignment requirements. So, i do not think that it is possible. BTW, you do not need the attribute on the nested strcuct."}, {"owner": {"reputation": 132, "user_id": 8396518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p3Wp4.jpg?s=128&g=1", "display_name": "Claudio Borges", "link": "https://stackoverflow.com/users/8396518/claudio-borges"}, "reply_to_user": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 1, "creation_date": 1514388643, "post_id": 47994219, "comment_id": 82957464, "body": "@Serge If I do not use <code>__attribute__( ( packed ) )</code> in the nested struct, the sizeof is 5 instead of 2."}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 1, "creation_date": 1514388931, "post_id": 47994219, "comment_id": 82957589, "body": "hmm, then gcc documentation is not correct :("}, {"owner": {"reputation": 8409, "user_id": 2001017, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/H0Z0x.jpg?s=128&g=1", "display_name": "Picaud Vincent", "link": "https://stackoverflow.com/users/2001017/picaud-vincent"}, "edited": false, "score": 0, "creation_date": 1514391432, "post_id": 47994219, "comment_id": 82958712, "body": "you can use -Wpadding to see what the compiler is doing (clang++ is more verbose than g++). With -Wpedantic compiler complains that anonymous struct is a GNUextension. A good reference on structure padding is <a href=\"http://www.catb.org/esr/structure-packing/\" rel=\"nofollow noreferrer\">catb.org/esr/structure-packing</a> . However, the described behavior is still a mystery for me."}], "answers": [{"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 0, "last_activity_date": 1514393151, "creation_date": 1514393151, "answer_id": 47995734, "question_id": 47994219, "link": "https://stackoverflow.com/questions/47994219/nested-struct-bitfield-alignment-in-gcc/47995734#47995734", "title": "Nested struct bitfield alignment in GCC", "body": "<p>The anonymous nested struct declares a new class object, so any bitfields within it will be independent of any bitfields in the outer class.  Within a class, bitfields are \"packed into some addressable allocation unit\".  This packing does not span distinct objects within a class.</p>\n\n<p>Then there's this from [class.bit] in the language spec:</p>\n\n<blockquote>\n  <p>Allocation of bit-fields within a class object is implementation-defined. Alignment of bit-fields is implementation-defined.</p>\n</blockquote>\n\n<p>which means the compiler is free to do with bitfields whatever it feels like (although this behavior does need to be documented).</p>\n"}], "owner": {"reputation": 132, "user_id": 8396518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p3Wp4.jpg?s=128&g=1", "display_name": "Claudio Borges", "link": "https://stackoverflow.com/users/8396518/claudio-borges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 347, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1514393151, "creation_date": 1514386430, "last_edit_date": 1514387303, "question_id": 47994219, "link": "https://stackoverflow.com/questions/47994219/nested-struct-bitfield-alignment-in-gcc", "title": "Nested struct bitfield alignment in GCC", "body": "<p>I'm using g++ (GCC) 4.7.2.20121109 and I'd like to have a nested struct aligned with bit boundary. Let me give an example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\ntypedef struct {\n   unsigned int a : 1;\n   unsigned int b : 7;\n} __attribute__( ( packed ) ) myType1;\n\ntypedef struct {\n   unsigned int a : 1;\n   struct {\n      unsigned int b : 7;\n   } __attribute__( ( packed ) );\n} __attribute__( ( packed ) ) myType2;\n\nint main(void)\n{\n   cout &lt;&lt; \"sizeof( myType1 ) = \" &lt;&lt; sizeof( myType1 ) &lt;&lt; endl;\n   cout &lt;&lt; \"sizeof( myType2 ) = \" &lt;&lt; sizeof( myType2 ) &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Compiling with <em>\"g++ filename.cpp -o output\"</em>, gives me:</p>\n\n<pre><code>sizeof( myType1 ) = 1\nsizeof( myType2 ) = 2\n</code></pre>\n\n<p>myType1 has the size that I'm expecting but myType2 hasn't. I'd like that sizeof( myType2 ) were 1 instead of 2. Is it possible?</p>\n"}, {"tags": ["c++", "matrix", "eigen"], "answers": [{"comments": [{"owner": {"reputation": 2608, "user_id": 3556110, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/8Lat5.jpg?s=128&g=1", "display_name": "thclark", "link": "https://stackoverflow.com/users/3556110/thclark"}, "edited": false, "score": 0, "creation_date": 1548094648, "post_id": 47994327, "comment_id": 95411794, "body": "For performance reasons I get it. But for developing, oh my lord that is SO nasty. THANKYOU."}], "tags": [], "owner": {"reputation": 245, "user_id": 5737534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfb70a29c8263371863815a2d750e557?s=128&d=identicon&r=PG&f=1", "display_name": "X.Arthur", "link": "https://stackoverflow.com/users/5737534/x-arthur"}, "is_accepted": false, "score": 5, "last_activity_date": 1514469088, "last_edit_date": 1514469088, "creation_date": 1514386907, "answer_id": 47994327, "question_id": 47994169, "link": "https://stackoverflow.com/questions/47994169/matrix-matrix-rowwise-reverse-eigen-rowwise-reverse-a-matrix-and-assign-it/47994327#47994327", "title": "Matrix = Matrix.rowwise().reverse() Eigen rowwise reverse a matrix and assign it back makes each row symmetric", "body": "<p>Well, I finally figured out.\nThis is because Eigen use lazy evaluation and we need to override the lazy evaluation of elementwise operation.</p>\n\n<p>So this works:</p>\n\n<pre><code>Ha = Ha.rowwise().reverse().eval();\n</code></pre>\n\n<p>This is called \"Aliasing\" in Eigen's wiki:</p>\n\n<p><a href=\"https://eigen.tuxfamily.org/dox/group__TopicAliasing.html\" rel=\"nofollow noreferrer\">https://eigen.tuxfamily.org/dox/group__TopicAliasing.html</a></p>\n"}], "owner": {"reputation": 245, "user_id": 5737534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfb70a29c8263371863815a2d750e557?s=128&d=identicon&r=PG&f=1", "display_name": "X.Arthur", "link": "https://stackoverflow.com/users/5737534/x-arthur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1514469088, "creation_date": 1514386137, "question_id": 47994169, "link": "https://stackoverflow.com/questions/47994169/matrix-matrix-rowwise-reverse-eigen-rowwise-reverse-a-matrix-and-assign-it", "title": "Matrix = Matrix.rowwise().reverse() Eigen rowwise reverse a matrix and assign it back makes each row symmetric", "body": "<p>Simple question, but cannot figure why:</p>\n\n<p><strong>Input</strong></p>\n\n<pre><code>Eigen::MatrixXd Ha(2, 3);\nHa &lt;&lt; 1, 2, 3, 4, 5, 6;\nstd::cout &lt;&lt; \"Ha: \" &lt;&lt; std::endl &lt;&lt; Ha &lt;&lt; std::endl;\n\nHa.rowwise().reverse();\nstd::cout &lt;&lt; \"Ha: \" &lt;&lt; std::endl &lt;&lt; Ha.rowwise().reverse() &lt;&lt; std::endl;\n\nHa = Ha.rowwise().reverse();\nstd::cout &lt;&lt; \"Ha: \" &lt;&lt; std::endl &lt;&lt; Ha.rowwise().reverse() &lt;&lt; std::endl;\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Ha:\n1 2 3\n4 5 6\nHa:\n3 2 1\n6 5 4\nHa:\n3 2 3\n6 5 6\n</code></pre>\n\n<p>For the last one, why is the case?</p>\n"}, {"tags": ["c++", "c++11", "std-function", "stdbind"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1514386288, "post_id": 47994127, "comment_id": 82956441, "body": "With <code>.</code> or <code>.*</code>, you can&#39;t. <code>-&gt;</code> would be unwieldy, but what about <code>-&gt;*</code>? You can wrap your functions in a class of your own and overload <code>operator -&gt;*</code> for that."}, {"owner": {"reputation": 27, "user_id": 9145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13c0e50b160e4fe184698705684996?s=128&d=identicon&r=PG&f=1", "display_name": "cheater", "link": "https://stackoverflow.com/users/9145601/cheater"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1514390641, "post_id": 47994127, "comment_id": 82958328, "body": "@Slava: You are basically suggesting to make all handlers static, then. This should work, but as it makes my whole handlers system to leave the world of pointers-to-members, I still render this as a last-resort solution in addition to making my own function-like class (@Quentin) or using templates. I still hope for a solution that allows me to create a PTMF; I have many needs for pointer-to-member generation beyond the provided basic example."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 9145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13c0e50b160e4fe184698705684996?s=128&d=identicon&r=PG&f=1", "display_name": "cheater", "link": "https://stackoverflow.com/users/9145601/cheater"}, "edited": false, "score": 0, "creation_date": 1514405046, "post_id": 47997327, "comment_id": 82964281, "body": "That is disappointing, given the fact that logically an object is not needed for binding. =( OK, thanks anyway."}, {"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "reply_to_user": {"reputation": 27, "user_id": 9145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13c0e50b160e4fe184698705684996?s=128&d=identicon&r=PG&f=1", "display_name": "cheater", "link": "https://stackoverflow.com/users/9145601/cheater"}, "edited": false, "score": 0, "creation_date": 1514405272, "post_id": 47997327, "comment_id": 82964374, "body": "@cheater. Member functions cannot be called without objects. If there is no state in the class, consider removing the class and just using namespace to group related functions."}, {"owner": {"reputation": 27, "user_id": 9145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13c0e50b160e4fe184698705684996?s=128&d=identicon&r=PG&f=1", "display_name": "cheater", "link": "https://stackoverflow.com/users/9145601/cheater"}, "edited": false, "score": 0, "creation_date": 1514406940, "post_id": 47997327, "comment_id": 82964990, "body": "I am speaking not about <i>calling</i> the handlers but about <i>declaring</i> them. For the state: unfortunately, the class has a state (simulated via member &quot;mm&quot; im my example)."}], "tags": [], "owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "is_accepted": false, "score": 2, "last_activity_date": 1514401321, "creation_date": 1514401321, "answer_id": 47997327, "question_id": 47994127, "link": "https://stackoverflow.com/questions/47994127/how-can-i-make-a-c-member-function-by-binding-the-arguments-of-another-member/47997327#47997327", "title": "How can I make a C++ member function by binding the arguments of another member function?", "body": "<p>For binding a pointer to non static member function, you need an object.</p>\n\n<pre><code>#include&lt;functional&gt;\n\nstruct A {\n    typedef std::function&lt;void(int)&gt; HandlerFn;\n    void mem(int);\n    void static static_mem(int);\n};\n\nvoid foo() {\n    A a;\n    A::HandlerFn h1 = A::static_mem;\n    //This captures a by ref\n    A::HandlerFn h2 = std::bind(&amp;A::mem, std::ref(a), std::placeholders::_1);\n    //This captures a by copy\n    A::HandlerFn h3 = std::bind(&amp;A::mem, a, std::placeholders::_1);\n    //Change to =a for copy\n    A::HandlerFn h4 = [&amp;a](int i){\n        a.mem(i);\n    };\n    h1(34);\n    h2(42);    \n}\n</code></pre>\n\n<p>Link:<a href=\"https://godbolt.org/g/Mddexq\" rel=\"nofollow noreferrer\">https://godbolt.org/g/Mddexq</a></p>\n"}], "owner": {"reputation": 27, "user_id": 9145601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13c0e50b160e4fe184698705684996?s=128&d=identicon&r=PG&f=1", "display_name": "cheater", "link": "https://stackoverflow.com/users/9145601/cheater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1016, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1514401321, "creation_date": 1514385947, "question_id": 47994127, "link": "https://stackoverflow.com/questions/47994127/how-can-i-make-a-c-member-function-by-binding-the-arguments-of-another-member", "title": "How can I make a C++ member function by binding the arguments of another member function?", "body": "<p>I am having problems with creating a variable of pointer-to-member-function (PTMF) type \"on the fly\" (that is, by pinning some arguments of an existing member function via std::bind). My question is if it is ever possible with C++11 or post-C++11 standard.</p>\n\n<p>Preambula: I have a class that stores a static const array of std::functions initialized from PTMFs, hereinafter referred to as \"handlers\". Originally, they were regular member functions with a name and implementation so I didn't ever use C++11 and std::function. Then, I decided that many of them are nearly similar, and decided to generate them with a \"generator function\". I would like to avoid using templates for the generation because the number of these nearly similar handlers is going to dramatically increase in future (around 200+) and templatizing will just lead to code bloat.</p>\n\n<p>If the PTMFs in question were static, I would have no problems with generating the handlers via std::bind. A simplified example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\n\nusing namespace std;\n\n\nstruct A {\n    typedef function&lt;void(int)&gt; HandlerFn;\n\n    static void parametrized_handler(int i, const char *param) {\n        cout &lt;&lt; \"parametrized handler: \" &lt;&lt; param &lt;&lt; endl;\n    }\n\n    static void handler(int i) { cout &lt;&lt; \"handler 1\" &lt;&lt; endl; }\n\n    int mm;\n};\n\nstatic const A::HandlerFn handler2 = [](int) { cout &lt;&lt; \"handler 2\" &lt;&lt; endl; };\n\nstatic const A::HandlerFn handler3 = bind(A::parametrized_handler,\n                                          placeholders::_1,\n                                          \"test_param\");\n\n\nint main()\n{\n    A::handler(42);\n    handler2(42);\n    handler3(42);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ ./a.out \nhandler 1\nhandler 2\nparametrized handler: test_param\n</code></pre>\n\n<p>The problem arises when I turn to non-static member functions. std::bind is not able to generate a function object that acts like a PTMF. I know that I can pass a real object as a first argument to bind and get a working function but that is not what I want: when I am initializing a static const array, there are no objects at all, and the result of bind will act as a regular non-member function anyway.</p>\n\n<p>An expected implementation for non-static member functions (with an imaginary std::bind_mem binder):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\n\nusing namespace std;\n\nstruct A;\n\n\nstruct A {\n    typedef function&lt;void(int)&gt; HandlerFn;\n\n    void parametrized_handler(int i, const char *param) {\n        mm;\n        cout &lt;&lt; \"parametrized handler: \" &lt;&lt; param &lt;&lt; endl;\n    }\n\n    void handler(int i) const { mm; cout &lt;&lt; \"handler 1\" &lt;&lt; endl; }\n\n    const HandlerFn handler2 = [this](int i) { mm; cout &lt;&lt; \"handler 2\" &lt;&lt; endl; };\n\n    int mm;\n};\n\n\n// An imaginary PTMF binder\n// static const A::HandlerFn handler3 = bind_mem(A::parametrized_handler,\n//                                               placeholders::_1,\n//                                               \"test_param\");\n\n\n\nint main()\n{\n    A a;\n\n    (a.handler)(42);\n    (a.handler2)(42);\n    //(a.handler3)(42);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ ./a.out \nhandler 1\nhandler 2\n</code></pre>\n\n<p>So is there a way to implement a PTMF argument binding?</p>\n"}, {"tags": ["c++", "cmake", "glew"], "answers": [{"tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": true, "score": 2, "last_activity_date": 1514388978, "last_edit_date": 1514388978, "creation_date": 1514386537, "answer_id": 47994236, "question_id": 47994121, "link": "https://stackoverflow.com/questions/47994121/cmake-link-glew-header-file/47994236#47994236", "title": "cmake link glew header file", "body": "<p>Effect of <code>include_directories</code> is <strong>not global</strong>: being performed from <code>libs/CMakeLists.txt</code>, it doesn't affect on <em>top-level</em> <code>CMakeLists.txt</code>.</p>\n\n<p>You may \"attach\" include directories to the library <em>target</em>:</p>\n\n<pre><code># In libs/CMakeLists.txt\ntarget_include_directories(GLEW_1130 PUBLIC glew-1.13.0/include/)\n</code></pre>\n\n<p>so futher linking with that library as <em>target</em>:</p>\n\n<pre><code># In CMakeLists.txt\ntarget_link_libraries(myproject GLEW_1130)\n</code></pre>\n\n<p>will automatically propagate its include directories to the executable.</p>\n"}, {"tags": [], "owner": {"reputation": 2916, "user_id": 3646096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KUofm.jpg?s=128&g=1", "display_name": "M&#225;rio Feroldi", "link": "https://stackoverflow.com/users/3646096/m%c3%a1rio-feroldi"}, "is_accepted": false, "score": 0, "last_activity_date": 1514386719, "creation_date": 1514386719, "answer_id": 47994282, "question_id": 47994121, "link": "https://stackoverflow.com/questions/47994121/cmake-link-glew-header-file/47994282#47994282", "title": "cmake link glew header file", "body": "<p>Don't <code>add_subdirectory</code> third party projects into your own build system, otherwise it will pollute your configurations. One reasonable approach here is to install GLEW on your system, and use <code>find_package</code> in order to include it as part of your project:</p>\n\n<pre><code>cmake_minimum_required (VERSION 2.6)\nproject (myproject)\nfind_package(glew 1.13.0)\nadd_executable(myproject main.cpp)\ntarget_link_libraries(myproject GLEW::glew)\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 6557347, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bf5777750fd1ea3661085e7764c9d582?s=128&d=identicon&r=PG&f=1", "display_name": "abdoe", "link": "https://stackoverflow.com/users/6557347/abdoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 791, "favorite_count": 0, "accepted_answer_id": 47994236, "answer_count": 2, "score": 1, "last_activity_date": 1514388978, "creation_date": 1514385898, "question_id": 47994121, "link": "https://stackoverflow.com/questions/47994121/cmake-link-glew-header-file", "title": "cmake link glew header file", "body": "<p>I'm trying to add an external library to my project using CMake (v 3.10.1)</p>\n\n<p>I want the libs to live in a specific directory because I like to keep it as clean as possible</p>\n\n<p>My project structure looks like that</p>\n\n<pre><code>Project\n   |\n   |-- main.cpp\n   |-- CMakeLists.txt (top lvl)\n   |\n   |-- libs/\n         |\n         | -- glew-1.13.0\n         | -- CMakeLists.txt (lib lvl)\n</code></pre>\n\n<p>Top lvl CMakeLists.txt</p>\n\n<pre><code>cmake_minimum_required (VERSION 2.6)\nproject (myproject)\nadd_executable(myproject main.cpp)\n\nadd_subdirectory (libs)\n</code></pre>\n\n<p>Lib lvl CMakeList.txt</p>\n\n<pre><code>### GLEW ###\n\ninclude_directories(\n    glew-1.13.0/include/\n)\n\nset(GLEW_SOURCE\n    glew-1.13.0/src/glew.c\n)\n\nset(GLEW_HEADERS\n)\n\nadd_library( GLEW_1130 STATIC\n    ${GLEW_SOURCE}\n    ${GLEW_INCLUDE}\n)\n\ntarget_link_libraries(GLEW_1130\n  ${OPENGL_LIBRARY}\n  ${EXTRA_LIBS}\n)\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;GL/glew.h&gt;\n\n\nint main() {\n\n    std::cout &lt;&lt; \"Hello World\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p><code>&lt;GL/glew.h&gt; headerfile not found</code> </p>\n\n<p>What am I' missing in my case so that I can use the glew header files?</p>\n"}, {"tags": ["python", "c++", "build", "bjoern"], "comments": [{"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1514386246, "post_id": 47994082, "comment_id": 82956419, "body": "Did you look at <a href=\"https://stackoverflow.com/questions/37534000/windows-10-and-unable-to-find-vcvarsall-bat\" title=\"windows 10 and unable to find vcvarsall bat\">stackoverflow.com/questions/37534000/&hellip;</a> ?"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1514388501, "post_id": 47994082, "comment_id": 82957392, "body": "Since different <i>Python</i> versions come with different compilers, pick one. Since <i>bjoem</i> is for <i>Py3</i>, the <i>Py27</i> attempt makes no sense. Second, <i>Py34</i> is compiled using <i>VStudio10</i>."}, {"owner": {"reputation": 359, "user_id": 2030424, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/0d8637c048ff755f6d454a0e11674e93?s=128&d=identicon&r=PG", "display_name": "Francisco", "link": "https://stackoverflow.com/users/2030424/francisco"}, "edited": false, "score": 0, "creation_date": 1514410106, "post_id": 47994082, "comment_id": 82966092, "body": "I have installed visual studio 10, but it throws me the error error: Unable to find vcvarsall.bat, I have looked at the path where visual studio 10 is installed but the file vcvarsall.bat does not exist, it should be in the folder /vc/"}], "owner": {"reputation": 359, "user_id": 2030424, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/0d8637c048ff755f6d454a0e11674e93?s=128&d=identicon&r=PG", "display_name": "Francisco", "link": "https://stackoverflow.com/users/2030424/francisco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514385755, "creation_date": 1514385755, "question_id": 47994082, "link": "https://stackoverflow.com/questions/47994082/python-3-bjoern-error-compiler-with-msvc-flag-cl-exe-failed-with-exit-status-2", "title": "python 3 bjoern error compiler with msvc flag cl.exe failed with exit status 2", "body": "<p>I can not compile bjoern for version 3 of python these are the versions I'm using</p>\n\n<p>windows 10\npython 3.4\nbjoern-py3 -> [<a href=\"https://github.com/isaiah/bjoern-py3][1][1]\" rel=\"nofollow noreferrer\">https://github.com/isaiah/bjoern-py3][1][1]</a>: <a href=\"https://github.com/isaiah/bjoern-py3\" rel=\"nofollow noreferrer\">https://github.com/isaiah/bjoern-py3</a>\nvisual c++ -> Visual C++ for Python-9.0</p>\n\n<p>this is the console output</p>\n\n<p>python 2.7\ncommand -> python setup.py build --compiler=msvc</p>\n\n<pre><code>running build\nrunning build_ext\nbuilding 'bjoern' extension\nC:\\Users\\franciskiko\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Bin\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -DWANT_SENDFILE=1 -DWANT_SIGINT_HANDLING=1 -Ihttp-parser -IC:\\Python34\\include -IC:\\Python34\\include /Tchttp-parser\\http_parser.c /Fobuild\\temp.win32-3.4\\Release\\http-parser\\http_parser.obj -std=c99 -fno-strict-aliasing -fcommon -fPIC -Wall -g\nhttp_parser.c\nhttp-parser\\http_parser.h(206) : warning C4214: nonstandard extension used : bit field types other than int\nhttp-parser\\http_parser.h(207) : warning C4214: nonstandard extension used : bit field types other than int\nhttp-parser\\http_parser.h(234) : warning C4820: 'http_parser' : '4' bytes padding added after data member 'data'\nhttp-parser\\http_parser.c(389) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(389) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(399) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(407) : error C2143: syntax error : missing ';' before 'const'\nhttp-parser\\http_parser.c(408) : error C2143: syntax error : missing ';' before 'const'\nhttp-parser\\http_parser.c(409) : error C2143: syntax error : missing ';' before 'const'\nhttp-parser\\http_parser.c(410) : error C2143: syntax error : missing ';' before 'const'\nhttp-parser\\http_parser.c(411) : error C2143: syntax error : missing ';' before 'const'\nhttp-parser\\http_parser.c(412) : error C2143: syntax error : missing ';' before 'const'\nhttp-parser\\http_parser.c(415) : error C2065: 'header_field_mark' : undeclared identifier\nhttp-parser\\http_parser.c(415) : warning C4047: '=' : 'int' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(417) : error C2065: 'header_value_mark' : undeclared identifier\nhttp-parser\\http_parser.c(417) : warning C4047: '=' : 'int' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(419) : error C2065: 'fragment_mark' : undeclared identifier\nhttp-parser\\http_parser.c(419) : warning C4047: '=' : 'int' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(421) : error C2065: 'query_string_mark' : undeclared identifier\nhttp-parser\\http_parser.c(421) : warning C4047: '=' : 'int' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(423) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(423) : warning C4047: '=' : 'int' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(429) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(429) : warning C4047: '=' : 'int' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(438) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(449) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(459) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(459) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(476) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(492) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(492) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(504) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(511) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(511) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(516) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(516) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(521) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(521) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(526) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(526) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(532) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(549) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(557) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(567) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(584) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(592) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(606) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(628) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(638) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(660) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(660) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(671) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(671) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(674) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(698) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(708) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(712) : error C2143: syntax error : missing ';' before 'const'\nhttp-parser\\http_parser.c(713) : error C2065: 'matcher' : undeclared identifier\nhttp-parser\\http_parser.c(713) : error C2109: subscript requires array or pointer type\nhttp-parser\\http_parser.c(715) : error C2065: 'matcher' : undeclared identifier\nhttp-parser\\http_parser.c(715) : error C2109: subscript requires array or pointer type\nhttp-parser\\http_parser.c(752) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(764) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(764) : warning C4047: '=' : 'int' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(764) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(765) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(765) : warning C4047: '=' : 'int' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(765) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(775) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(775) : warning C4047: '=' : 'int' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(775) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(780) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(793) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(798) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(798) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(803) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(803) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(815) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(815) : warning C4047: '=' : 'int' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(815) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(823) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(823) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(823) : warning C4047: 'function' : 'const char *' differs in levels of indirection from 'int'\nhttp-parser\\http_parser.c(823) : warning C4024: 'function through pointer' : different types for formal and actual parameter 2\nhttp-parser\\http_parser.c(823) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(823) : warning C4047: 'function' : 'size_t' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(823) : warning C4024: 'function through pointer' : different types for formal and actual parameter 3\nhttp-parser\\http_parser.c(823) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(823) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(823) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(823) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'\nhttp-parser\\http_parser.c(823) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(830) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(841) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(841) : warning C4047: '=' : 'int' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(841) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(849) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(849) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(849) : warning C4047: 'function' : 'const char *' differs in levels of indirection from 'int'\nhttp-parser\\http_parser.c(849) : warning C4024: 'function through pointer' : different types for formal and actual parameter 2\nhttp-parser\\http_parser.c(849) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(849) : warning C4047: 'function' : 'size_t' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(849) : warning C4024: 'function through pointer' : different types for formal and actual parameter 3\nhttp-parser\\http_parser.c(849) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(849) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(849) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(849) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'\nhttp-parser\\http_parser.c(849) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(856) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(868) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(868) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(868) : warning C4047: 'function' : 'const char *' differs in levels of indirection from 'int'\nhttp-parser\\http_parser.c(868) : warning C4024: 'function through pointer' : different types for formal and actual parameter 2\nhttp-parser\\http_parser.c(868) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(868) : warning C4047: 'function' : 'size_t' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(868) : warning C4024: 'function through pointer' : different types for formal and actual parameter 3\nhttp-parser\\http_parser.c(868) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(868) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(868) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(868) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'\nhttp-parser\\http_parser.c(868) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(869) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(869) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(869) : warning C4047: 'function' : 'const char *' differs in levels of indirection from 'int'\nhttp-parser\\http_parser.c(869) : warning C4024: 'function through pointer' : different types for formal and actual parameter 2\nhttp-parser\\http_parser.c(869) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(869) : warning C4047: 'function' : 'size_t' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(869) : warning C4024: 'function through pointer' : different types for formal and actual parameter 3\nhttp-parser\\http_parser.c(869) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(869) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(869) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(869) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'\nhttp-parser\\http_parser.c(869) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(873) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(873) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(873) : warning C4047: 'function' : 'const char *' differs in levels of indirection from 'int'\nhttp-parser\\http_parser.c(873) : warning C4024: 'function through pointer' : different types for formal and actual parameter 2\nhttp-parser\\http_parser.c(873) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(873) : warning C4047: 'function' : 'size_t' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(873) : warning C4024: 'function through pointer' : different types for formal and actual parameter 3\nhttp-parser\\http_parser.c(873) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(873) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(873) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(873) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'\nhttp-parser\\http_parser.c(873) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(874) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(874) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(874) : warning C4047: 'function' : 'const char *' differs in levels of indirection from 'int'\nhttp-parser\\http_parser.c(874) : warning C4024: 'function through pointer' : different types for formal and actual parameter 2\nhttp-parser\\http_parser.c(874) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(874) : warning C4047: 'function' : 'size_t' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(874) : warning C4024: 'function through pointer' : different types for formal and actual parameter 3\nhttp-parser\\http_parser.c(874) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(874) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(874) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(874) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'\nhttp-parser\\http_parser.c(874) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(880) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(880) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(880) : warning C4047: 'function' : 'const char *' differs in levels of indirection from 'int'\nhttp-parser\\http_parser.c(880) : warning C4024: 'function through pointer' : different types for formal and actual parameter 2\nhttp-parser\\http_parser.c(880) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(880) : warning C4047: 'function' : 'size_t' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(880) : warning C4024: 'function through pointer' : different types for formal and actual parameter 3\nhttp-parser\\http_parser.c(880) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(880) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(880) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(880) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'\nhttp-parser\\http_parser.c(880) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(881) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(881) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(881) : warning C4047: 'function' : 'const char *' differs in levels of indirection from 'int'\nhttp-parser\\http_parser.c(881) : warning C4024: 'function through pointer' : different types for formal and actual parameter 2\nhttp-parser\\http_parser.c(881) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(881) : warning C4047: 'function' : 'size_t' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(881) : warning C4024: 'function through pointer' : different types for formal and actual parameter 3\nhttp-parser\\http_parser.c(881) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(881) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(881) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(881) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'\nhttp-parser\\http_parser.c(881) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(887) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(887) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(887) : warning C4047: 'function' : 'const char *' differs in levels of indirection from 'int'\nhttp-parser\\http_parser.c(887) : warning C4024: 'function through pointer' : different types for formal and actual parameter 2\nhttp-parser\\http_parser.c(887) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(887) : warning C4047: 'function' : 'size_t' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(887) : warning C4024: 'function through pointer' : different types for formal and actual parameter 3\nhttp-parser\\http_parser.c(887) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(887) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(887) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(887) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'\nhttp-parser\\http_parser.c(887) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(891) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(891) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(891) : warning C4047: 'function' : 'const char *' differs in levels of indirection from 'int'\nhttp-parser\\http_parser.c(891) : warning C4024: 'function through pointer' : different types for formal and actual parameter 2\nhttp-parser\\http_parser.c(891) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(891) : warning C4047: 'function' : 'size_t' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(891) : warning C4024: 'function through pointer' : different types for formal and actual parameter 3\nhttp-parser\\http_parser.c(891) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(891) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(891) : error C2065: 'path_mark' : undeclared identifier\nhttp-parser\\http_parser.c(891) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'\nhttp-parser\\http_parser.c(891) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(895) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(904) : error C2065: 'query_string_mark' : undeclared identifier\nhttp-parser\\http_parser.c(904) : warning C4047: '=' : 'int' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(904) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(913) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(913) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(913) : warning C4047: 'function' : 'const char *' differs in levels of indirection from 'int'\nhttp-parser\\http_parser.c(913) : warning C4024: 'function through pointer' : different types for formal and actual parameter 2\nhttp-parser\\http_parser.c(913) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(913) : warning C4047: 'function' : 'size_t' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(913) : warning C4024: 'function through pointer' : different types for formal and actual parameter 3\nhttp-parser\\http_parser.c(913) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(913) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(913) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(913) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'\nhttp-parser\\http_parser.c(913) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(917) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(917) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(917) : warning C4047: 'function' : 'const char *' differs in levels of indirection from 'int'\nhttp-parser\\http_parser.c(917) : warning C4024: 'function through pointer' : different types for formal and actual parameter 2\nhttp-parser\\http_parser.c(917) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(917) : warning C4047: 'function' : 'size_t' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(917) : warning C4024: 'function through pointer' : different types for formal and actual parameter 3\nhttp-parser\\http_parser.c(917) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(917) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(917) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(917) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'\nhttp-parser\\http_parser.c(917) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(923) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(923) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(923) : warning C4047: 'function' : 'const char *' differs in levels of indirection from 'int'\nhttp-parser\\http_parser.c(923) : warning C4024: 'function through pointer' : different types for formal and actual parameter 2\nhttp-parser\\http_parser.c(923) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(923) : warning C4047: 'function' : 'size_t' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(923) : warning C4024: 'function through pointer' : different types for formal and actual parameter 3\nhttp-parser\\http_parser.c(923) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(923) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(923) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(923) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'\nhttp-parser\\http_parser.c(923) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(932) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(947) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(947) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(947) : warning C4047: 'function' : 'const char *' differs in levels of indirection from 'int'\nhttp-parser\\http_parser.c(947) : warning C4024: 'function through pointer' : different types for formal and actual parameter 2\nhttp-parser\\http_parser.c(947) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(947) : warning C4047: 'function' : 'size_t' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(947) : warning C4024: 'function through pointer' : different types for formal and actual parameter 3\nhttp-parser\\http_parser.c(947) : warning C4127: conditional expression is constant\n\nhttp-parser\\http_parser.c(953) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(953) : error C2065: 'query_string_mark' : undeclared identifier\nhttp-parser\\http_parser.c(953) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'\nhttp-parser\\http_parser.c(953) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(959) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(959) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(959) : warning C4047: 'function' : 'const char *' differs in levels of indirection from 'int'\nhttp-parser\\http_parser.c(959) : warning C4024: 'function through pointer' : different types for formal and actual parameter 2\nhttp-parser\\http_parser.c(959) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(959) : warning C4047: 'function' : 'size_t' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(959) : warning C4024: 'function through pointer' : different types for formal and actual parameter 3\nhttp-parser\\http_parser.c(959) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(959) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(959) : error C2065: 'url_mark' : undeclared identifier\nhttp-parser\\http_parser.c(959) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'\nhttp-parser\\http_parser.c(959) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(960) : error C2065: 'query_string_mark' : undeclared identifier\nhttp-parser\\http_parser.c(960) : error C2065: 'query_string_mark' : undeclared identifier\nhttp-parser\\http_parser.c(960) : warning C4047: 'function' : 'const char *' differs in levels of indirection from 'int'\nhttp-parser\\http_parser.c(960) : warning C4024: 'function through pointer' : different types for formal and actual parameter 2\nhttp-parser\\http_parser.c(960) : error C2065: 'query_string_mark' : undeclared identifier\nhttp-parser\\http_parser.c(960) : warning C4047: 'function' : 'size_t' differs in levels of indirection from 'const char *'\nhttp-parser\\http_parser.c(960) : warning C4024: 'function through pointer' : different types for formal and actual parameter 3\nhttp-parser\\http_parser.c(960) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(960) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(960) : error C2065: 'query_string_mark' : undeclared identifier\nhttp-parser\\http_parser.c(960) : warning C4047: '=' : 'int' differs in levels of indirection from 'void *'\nhttp-parser\\http_parser.c(960) : warning C4127: conditional expression is constant\nhttp-parser\\http_parser.c(966) : error C2065: 'query_string_mark' : undeclared identifier\nhttp-parser\\http_parser.c(966) : error C2065: 'query_string_mark' : undeclared identifier\nhttp-parser\\http_parser.c(966) : fatal error C1003: error count exceeds 100; stopping compilation\nerror: command 'C:\\\\Users\\\\franciskiko\\\\AppData\\\\Local\\\\Programs\\\\Common\\\\Microsoft\\\\Visual C++ for Python\\\\9.0\\\\VC\\\\Bin\\\\cl.exe' failed with exit status 2\n</code></pre>\n\n<p>python 3.4</p>\n\n<p>command -> python setup.py build --compiler=msvc</p>\n\n<pre><code>running build\nrunning build_ext\nbuilding 'bjoern' extension\nerror: Unable to find vcvarsall.bat\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer", "c++17"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1514386176, "post_id": 47994079, "comment_id": 82956393, "body": "Exactly for the same reason why <code>int&amp; a = 1;</code> fails to compile, but I don&#39;t know the standard enough to quote any specific paragraph."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1514386249, "post_id": 47994079, "comment_id": 82956421, "body": "@Rakete1111 Why is that? The conversion yields an lvalue in my case."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1514386284, "post_id": 47994079, "comment_id": 82956437, "body": "But the lvalue has type of <code>int**</code>, but you need <code>int *const*</code>, and so a conversion happens."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1514386324, "post_id": 47994079, "comment_id": 82956459, "body": "@Rakete1111 Do you suggest that a qualification conversion alters a value category? As per 16.3.3.1.1, paragraph 1 [over.ics.scs], <code>... the Qualification Adjustments do not change the value category or data representation of the type; ...</code>"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1514386449, "post_id": 47994079, "comment_id": 82956511, "body": "It depends on the conversion, but yes. <code>int a = 1; double d = a;</code>, the <code>a</code> is promoted to a prvalue <code>double</code>."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1514386518, "post_id": 47994079, "comment_id": 82956536, "body": "@Rakete1111 That&#39;s because of Lvalue-to-rvalue conversion, not Qualification Conversion."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1514386853, "post_id": 47994079, "comment_id": 82956680, "body": "It&#39;s integer conversion/promotion, and I don&#39;t think it qualifies as Qualification Conversion, because it doesn&#39;t involve the top level cv qualifiers, AFAIU. <a href=\"http://eel.is/c++draft/conv.qual#1.sentence-3\" rel=\"nofollow noreferrer\">conv.qual/p1#3</a> and <a href=\"http://eel.is/c++draft/conv.qual#3\" rel=\"nofollow noreferrer\">conv.qual/p3</a>"}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1514387078, "post_id": 47994079, "comment_id": 82956783, "body": "@Rakete1111 I agree that  your case does not involve a qualification conversion. However, I&#39;m pretty sure that the conversion from <code>int**</code> to <code>int*const*</code> in my case has nothing to do with other standard conversions except a qualification conversion."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1514387249, "post_id": 47994079, "comment_id": 82956865, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/162043/discussion-between-b1sub-and-rakete1111\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "edited": false, "score": 0, "creation_date": 1514387972, "post_id": 47994498, "comment_id": 82957150, "body": "I supposed that <b>the second standard conversion sequence of this user-defined conversion sequence</b> contains only a qualification conversion, so that an lvalue persists. Why is that impossible?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "edited": false, "score": 1, "creation_date": 1514388175, "post_id": 47994498, "comment_id": 82957237, "body": "@b1sub Those kinds of questions are always fundamentally unanswerable to the asker&#39;s satisfaction. The direct answer is that qualification conversion is defined in terms of <a href=\"http://eel.is/c++draft/conv#qual-3\" rel=\"nofollow noreferrer\">converting a prvalue</a>."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "edited": false, "score": 0, "creation_date": 1514388347, "post_id": 47994498, "comment_id": 82957320, "body": "Your comment suffices. I have overlooked the &quot;prvalue&quot; part as you mentioned."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 7, "last_activity_date": 1514387691, "last_edit_date": 1592644375, "creation_date": 1514387691, "answer_id": 47994498, "question_id": 47994079, "link": "https://stackoverflow.com/questions/47994079/why-is-this-reference-binding-ill-formed/47994498#47994498", "title": "Why is this reference binding ill-formed?", "body": "<p>The reference initialization rule we're looking for is <a href=\"http://eel.is/c++draft/dcl.init.ref#5\" rel=\"noreferrer\">[dcl.init.ref]</a>:</p>\n<blockquote>\n<p>A reference to type \u201c<em>cv1</em> <code>T1</code>\u201d is initialized by an expression of type \u201c<em>cv2</em> <code>T2</code>\u201d as follows:</p>\n</blockquote>\n<p>We have <em>cv1</em> <code>T1</code> as <code>int* const*</code> and <em>cv2</em> <code>T2</code> as <code>S</code>. We then go through the next sections carefully:</p>\n<blockquote>\n<p>If the reference is an lvalue reference and the initializer expression</p>\n<ul>\n<li>is an lvalue (but is not a bit-field), and \u201ccv1 T1\u201d is reference-compatible with \u201ccv2 T2\u201d, or</li>\n<li>has a class type (i.e., T2 is a class type), where T1 is not reference-related to T2, and can be converted to <strong>an lvalue</strong> of type \u201ccv3 T3\u201d, <strong>where \u201ccv1 T1\u201d is reference-compatible with \u201ccv3 T3\u201d</strong> (this conversion is selected by enumerating the applicable conversion functions ([over.match.ref]) and choosing the best one through overload resolution),</li>\n</ul>\n<p>then the reference is bound to the initializer expression lvalue in the first case and to the lvalue result of the conversion in the second case (or, in either case, to the appropriate base class subobject of the object).</p>\n</blockquote>\n<p>Our reference is an lvalue reference. The initializer expression is an lvalue but the two types are not <a href=\"http://eel.is/c++draft/dcl.init.ref#4\" rel=\"noreferrer\">reference-compatible</a>, so the first bullet does not apply.</p>\n<p>The initializer expression does have non-reference-related class type, but it cannot be converted to a reference-compatible type. The reference-compatible part is important. <code>int**</code> is <strong>not</strong> reference-compatible with <code>int* const*</code>, and while the former can be converted to the latter, the result would not be an lvalue - which is also required.</p>\n<p>So, this section doesn't apply, and we <a href=\"http://eel.is/c++draft/dcl.init.ref#5.2\" rel=\"noreferrer\">move on</a>.</p>\n<blockquote>\n<p>Otherwise, the reference shall be an lvalue reference to a non-volatile const type (i.e., cv1 shall be const), or the reference shall be an rvalue reference.</p>\n</blockquote>\n<p>Our reference meets neither of those criteria, so the initialization is ill-formed.</p>\n<hr />\n<p>A simpler version of this failure would be:</p>\n<pre><code>int* pi;\nint const*&amp; r = pi; // error\n</code></pre>\n<p>We can't go through a qualification conversion when we have an lvalue reference to non-const type.</p>\n"}], "owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 1, "accepted_answer_id": 47994498, "answer_count": 1, "score": 5, "last_activity_date": 1514387691, "creation_date": 1514385746, "last_edit_date": 1514387641, "question_id": 47994079, "link": "https://stackoverflow.com/questions/47994079/why-is-this-reference-binding-ill-formed", "title": "Why is this reference binding ill-formed?", "body": "<p>Consider this code:</p>\n\n<pre><code>int **p = 0;\n\nclass S {\npublic:\n    explicit operator int**&amp;() {\n        return p;\n    }\n};\n\nint main() {\n    S a;\n    int *const*&amp;b (a); // error in both g++-7 and clang-5.0 with \"-std=c++17\"\n    return 0;\n}\n</code></pre>\n\n<p>You will agree</p>\n\n<ul>\n<li>a qualification conversion from <code>int**</code> to <code>int*const*</code> is possible, and</li>\n<li><code>int *const*&amp;b (a)</code> is a <em>direct-initialization</em>.</li>\n</ul>\n\n<p>First, we refer to 11.6.3, paragraph 5 [dcl.init.ref] from <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4700.pdf\" rel=\"nofollow noreferrer\">n4700</a>.</p>\n\n<blockquote>\n  <p>A reference to type \u201c<em>cv1</em> <code>T1 (= int*const*)</code>\u201d is initialized by an expression of type \u201c<em>cv2</em> <code>T2 (= S)</code>\u201d as follows:</p>\n  \n  <ul>\n  <li>If <strong>the reference is an lvalue reference</strong> and the initializer expression\n  \n  <ul>\n  <li>...</li>\n  <li><strong>has a class type</strong> (i.e., <code>T2</code> is a class type), where <code>T1</code> is not reference-related to <code>T2</code>, and can be converted to an lvalue of type \u201c<em>cv3</em> <code>T3</code>\u201d, where \u201c<em>cv1</em> <code>T1</code>\u201d is reference-compatible with \u201c<em>cv3</em> <code>T3</code>\u201d (this conversion is selected <strong>by enumerating the applicable conversion functions (16.3.1.6)</strong> and choosing the best one through overload resolution (16.3)),</li>\n  </ul></li>\n  </ul>\n  \n  <p>then <strong>the reference is bound</strong> to the initializer expression lvalue in the first case and <strong>to the lvalue result of the conversion in the second case</strong>...</p>\n</blockquote>\n\n<p><strong>Here, we expect <code>T3</code> to be <code>int*const*</code>.</strong> As noted above, whether it's a possible conversion is determined as per 16.3.1.6, paragraph 1 [over.match.ref].</p>\n\n<blockquote>\n  <p>... Assuming that \u201creference to <em>cv1</em> <code>T</code>\u201d is the type of the reference being\n  initialized, and \u201c<em>cv</em> <code>S</code>\u201d is the type of the initializer expression, with <code>S</code> a class type, the candidate functions are selected as follows:</p>\n  \n  <ul>\n  <li>... For direct-initialization, <strong>those explicit conversion functions</strong> that\n  are not hidden within <code>S</code> and yield type \u201clvalue reference to <em>cv2</em> <code>T2</code>\u201d or \u201c<em>cv2</em> <code>T2</code>\u201d or \u201crvalue reference to <em>cv2</em> <code>T2</code>\u201d, respectively, where <code>T2</code> is the same type as <code>T</code> <strong>or can be converted to type <code>T</code> with a qualification conversion are also candidate functions</strong>.</li>\n  </ul>\n</blockquote>\n\n<p><strong>Here, <code>S::operator int**&amp;</code> yields \"lvalue reference to <code>T2 (= int**)</code>\", and it can be converted to <code>T (= int*const*)</code> by a qualification conversion.</strong> Here, we can say that the conversion is possible, but the program is not accepted in both g++-7 and clang-5.0. Why is that?</p>\n"}, {"tags": ["c++", "templates", "overloading", "template-argument-deduction"], "answers": [{"comments": [{"owner": {"reputation": 209, "user_id": 2510649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5781c6d9c059c227908b29f0be5bec7d?s=128&d=identicon&r=PG", "display_name": "Danny Diaz", "link": "https://stackoverflow.com/users/2510649/danny-diaz"}, "edited": false, "score": 0, "creation_date": 1514400082, "post_id": 47994266, "comment_id": 82962292, "body": "I tried variations of your idea, but it doesn&#39;t seem to fit quite right.  How would creating std::tuple&lt;Args...&gt; work if the function type is not known in the Call function?  Would I lose the ability to call OVariant::GetSafe (T0 t0 = args[0].GetSafe&lt;T0&gt;();)"}], "tags": [], "owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "is_accepted": false, "score": 1, "last_activity_date": 1514386655, "creation_date": 1514386655, "answer_id": 47994266, "question_id": 47993852, "link": "https://stackoverflow.com/questions/47993852/passing-overloaded-function-pointer-as-argument-to-overloaded-template-function/47994266#47994266", "title": "passing overloaded function pointer as argument to overloaded template function", "body": "<p>The compiler has no way of knowing what is stored inside your variant class. So the <code>?</code> could be deduced <em>only</em> from the function type (from its parameters). Hence, you will need some code to check that <code>args.size()</code> matches the number of function parameter. Try to do the following:</p>\n\n<ul>\n<li>Create <code>std::tuple&lt;Args...&gt;</code> where <code>Args...</code> are evaluated from the function type</li>\n<li>Check that <code>args.size()</code> is the same as number of elements in the  <code>std::tuple&lt;Args...&gt;</code></li>\n<li>Convert your <code>args</code> vector to the tuple.</li>\n<li>Use <code>std::apply</code> (or re-invent your own) to call your function with arguments from the tuple</li>\n</ul>\n"}], "owner": {"reputation": 209, "user_id": 2510649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5781c6d9c059c227908b29f0be5bec7d?s=128&d=identicon&r=PG", "display_name": "Danny Diaz", "link": "https://stackoverflow.com/users/2510649/danny-diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514386655, "creation_date": 1514384798, "question_id": 47993852, "link": "https://stackoverflow.com/questions/47993852/passing-overloaded-function-pointer-as-argument-to-overloaded-template-function", "title": "passing overloaded function pointer as argument to overloaded template function", "body": "<p>I'm trying to get the compiler to deduce the correct function template.\nGiven the following code, the correct templated function is deduced...</p>\n\n<pre><code>class TestBase{};\n\ntemplate &lt;typename c, typename RT, typename T0&gt;\ninline void CallF( RT( c::*M )(T0), TestBase* pObject, std::vector&lt;OVariant&gt; args )\n{\n    //safely convert variant (implementations external to class)\n    T0 t0 = args[0].GetSafe&lt;T0&gt;();\n\n    ((static_cast&lt;c*&gt;(pObject))-&gt;*M)(t0);\n}\n\ntemplate &lt;typename c, typename RT, typename T0, typename T1&gt;\ninline void CallF( RT( c::*M )(T0, T1), TestBase* pObject, std::vector&lt;OVariant&gt; args )\n{\n    //safely convert variant (implementations external to class)\n    T0 t0 = args[0].GetSafe&lt;T0&gt;();\n    T1 t1 = args[1].GetSafe&lt;T1&gt;();\n\n    ((static_cast&lt;c*&gt;(pObject))-&gt;*M)(t0, t1);\n}\n\nclass Test : public TestBase\n{\npublic:\n\n    void F( s32 one )\n    {\n        std::cout &lt;&lt; \"one\";\n    }\n\n    struct Wrapped_F\n    {\n        //OVariant is my typical variant class\n        static void Call( TestBase* pObject, std::vector&lt;OVariant&gt; args )\n        {\n            ::CallF&lt;Test&gt;( &amp;Test::F, pObject, args );\n        }\n    };\n};\n\nint main(int argc, char *argv[])\n{\n    Test t;\n    OVariant i( 13 );\n    std::vector&lt;OVariant&gt; args;\n    args.push_back( i );\n\n    t.Wrapped_F::Call( &amp;t, args );\n}\n</code></pre>\n\n<p>t.Wrapped_F::Call( &amp;t, args ) calls the correct F function.  However, if I add the overloaded F function to Test, then it (overload with 2 args) will be called (instead of the correct F with 1 arg)</p>\n\n<pre><code>void F( s32 one, s32 two )\n{\n    std::cout &lt;&lt; \"two\";\n}\n</code></pre>\n\n<p>I'm pretty sure this is due to the fact that the compiler does not have enough info to deduce.  How can I help the compiler deduce which overloaded template function to call?</p>\n\n<p>Something like the following pseudo code... (? to denote some arg of unknown type)</p>\n\n<pre><code>static void Call( TestBase* pObject, std::vector&lt;OVariant&gt; args )\n{\n    //Note: I won't know anything about the arguments to function F; I do know the size of the vector\n    switch ( args.size() )\n    {\n    case 1:::CallF&lt;Test,void,?&gt;( &amp;Test::F, pObject, args );\n    case 2:::CallF&lt;Test,void,?,?&gt;( &amp;Test::F, pObject, args );\n    }\n}\n</code></pre>\n\n<p>Is there a way to do this?</p>\n"}, {"tags": ["c++", "cuda", "gpu"], "answers": [{"tags": [], "owner": {"reputation": 4933, "user_id": 8217180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9621a549160f738b81303a4a008ddd50?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Ribizel", "link": "https://stackoverflow.com/users/8217180/tobias-ribizel"}, "is_accepted": false, "score": 2, "last_activity_date": 1514390931, "last_edit_date": 1514390931, "creation_date": 1514389507, "answer_id": 47994894, "question_id": 47993833, "link": "https://stackoverflow.com/questions/47993833/parallel-dimension-reduction-3d-to-2d-with-sum-using-cuda/47994894#47994894", "title": "Parallel dimension reduction (3D to 2D with sum) using Cuda", "body": "<p>This depends on which order your matrix is stored in and which dimension you want to reduce along.</p>\n\n<p>For the moment, I'll ignore the <em>D</em> dimension as the operation can be thought of as reducing a matrix containing <code>NxN</code> entries where every entry contains multiple floats.</p>\n\n<p>If your matrix is stored in <em>row-major</em> order and you want to reduce each row to its sum (or <em>column-major</em> and column reduction), the answer is simple:</p>\n\n<pre><code>const int row = blockIdx.x * blockDim.x + threadIdx.x;\nif (row &lt; N) { // necessary if N is not divisible by the thread block size\n    float sum = 0; // stores the partial sum in a register\n    for (int col = 0; col &lt; N; ++col) {\n        sum += devPtrIn[col + N * row];\n    }\n    devPtrOut[row] = sum; // no atomic operation necessary\n}\n</code></pre>\n\n<p>This way, every thread reads memory in a coalescent fashion (see <a href=\"https://devblogs.nvidia.com/parallelforall/how-access-global-memory-efficiently-cuda-c-kernels/\" rel=\"nofollow noreferrer\">NVIDIA's parallel forall blog</a> for a discussion of global memory access patterns) and needs no shared or global memory writes except for the final result.</p>\n\n<p>If you want to reduce along a minor dimension - let's say column reduction on a row-major matrix - the answer becomes a bit more difficult: Because of the large stride, memory access would more or less behaves like random access if we used only one entry of the column at a time.</p>\n\n<p>Thus it makes sense for every thread to reduce a small number of columns along the matrix in parallel and store the partial results in shared memory:</p>\n\n<pre><code>constexpr int numCols = ...;\n__shared__ float partial[numCols * blockDim.x];\nconst int threadId = blockIdx.x * blockDim.x + threadIdx.x;\nconst int begin_col = threadId * numCols;\nconst int end_col = min(N, (threadId + 1) * numCols);\n// initialize partial to 0\n...\nfor (int row = 0; row &lt; N; ++row) {\n    for (int col = begin_col; col &lt; end_col; ++col) {\n        partial[threadIdx.x * numCols + col] += devPtrIn[col + N * row];\n    }\n}\n// store partial to global memory\n...\n</code></pre>\n\n<p>Depending on the number of registers per thread your GPU has, it might also be possible to store the partial sums in registers by unrolling the inner loop and using local variables instead of an array, since <a href=\"https://stackoverflow.com/questions/10297067/in-a-cuda-kernel-how-do-i-store-an-array-in-local-thread-memory\">arrays are usually not stored in registers</a></p>\n\n<p>This way, we always read contiguous blocks of <code>numCols</code> floats from memory, which gives a much larger bandwidth than access with large strides.</p>\n\n<p>You'll probably have to experiment with an optimal value for <code>numCols</code>, but it should be large enough that at least the memory width of the GPU memory is used to load such a block, and at the same time small enough that all shared memory for a single thread block fits onto the GPU (again see <a href=\"https://devblogs.nvidia.com/parallelforall/using-shared-memory-cuda-cc/\" rel=\"nofollow noreferrer\">parallel forall</a> for details)</p>\n"}, {"comments": [{"owner": {"reputation": 2652, "user_id": 1085291, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a637f0938b1d4466e99b9df92d0ee6a7?s=128&d=identicon&r=PG&f=1", "display_name": "casparjespersen", "link": "https://stackoverflow.com/users/1085291/casparjespersen"}, "edited": false, "score": 0, "creation_date": 1514467506, "post_id": 47995908, "comment_id": 82984804, "body": "Hi Robert. Thank you for the response. Regarding your note 4, I found an error in my indexing <code>(d + D * n + N * m)</code> should be <code>(d + D * n + (N * D) * m)</code>. But other than that, I don&#39;t see the error you&#39;re mentioning?"}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "reply_to_user": {"reputation": 2652, "user_id": 1085291, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a637f0938b1d4466e99b9df92d0ee6a7?s=128&d=identicon&r=PG&f=1", "display_name": "casparjespersen", "link": "https://stackoverflow.com/users/1085291/casparjespersen"}, "edited": false, "score": 0, "creation_date": 1514471826, "post_id": 47995908, "comment_id": 82986947, "body": "No, that makes your indexing broken on the first page as well.  I&#39;ve added some additional text and a  modified code sample which makes it easy to decide if the results produced by your code or my code should be correct."}], "tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 3, "last_activity_date": 1514471769, "last_edit_date": 1514471769, "creation_date": 1514393881, "answer_id": 47995908, "question_id": 47993833, "link": "https://stackoverflow.com/questions/47993833/parallel-dimension-reduction-3d-to-2d-with-sum-using-cuda/47995908#47995908", "title": "Parallel dimension reduction (3D to 2D with sum) using Cuda", "body": "<p>The first two optimization priorities for any CUDA programmer are:</p>\n\n<ol>\n<li>Use lots of threads</li>\n<li>Use memory efficiently</li>\n</ol>\n\n<p>For your problem, you'll have no trouble with the first one - it readily decomposes into a set of problems that are independent and can be assigned to a lot of parallel threads.  The second priority is where you want to focus, then.  With respect to global memory, this means we should strive for coalesced access, whenever possible.  We should pay particular attention to the reads.</p>\n\n<p>I'll need to make some assumptions.  I'll assume that your organization of dimensions is ROW, COLUMN, DEPTH and that your data is stored in the usual C-style, i.e. row-major storage.  With those assumptions, then, the request (<em>summing over the entire first (or second) axis</em>) is effectively summing over the entire row or summing over the entire column.  If you do a bit of searching here on the <code>cuda</code> tag, you'll find worked examples for both (<a href=\"https://stackoverflow.com/questions/31706599/how-to-perform-reduction-on-a-huge-2d-matrix-along-the-row-direction-using-cuda/31757588#31757588\">here</a> is one such example).  Although they don't necessarily all cover the 3D case, they should provide a pretty good roadmap.  What you'll discover is that these two cases should be handled differently, with an eye towards <em>coalesced global memory access</em>, i.e. the optimization priority already mentioned.  The row-direction is also the coalescing direction, so if we need to sum rows, then we'll need to use a classical parallel reduction technique, so that we can read rows, and sum the elements together.  If we need to sum columns, the efficient kernel is much easier to write; each thread can be responsible for a column, and can just keep a running sum in a for-loop.</p>\n\n<p>In your case, you appear to be summing columns (but see note below).  What follows is a worked example, comparing your approach to the faster running-column-sum method, with coalesced access (adjacent threads reading adjacent elements in memory):</p>\n\n<pre><code>$ cat t1263.cu\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nconst int my_N = 10000;\nconst int my_D = 3;\nconst int my_blockSize = 768;\nconst int my_loopSize = my_N*my_N*my_D;\nconst int my_numBlocks = (my_loopSize + my_blockSize -1)/my_blockSize;\nconst int bsize = 512;\nconst float TOL = 0.1f;\n\n#define HANDLE_ERROR(x) x\n\n#define cudaCheckErrors(msg) \\\n    do { \\\n        cudaError_t __err = cudaGetLastError(); \\\n        if (__err != cudaSuccess) { \\\n            fprintf(stderr, \"Fatal error: %s (%s at %s:%d)\\n\", \\\n                msg, cudaGetErrorString(__err), \\\n                __FILE__, __LINE__); \\\n            fprintf(stderr, \"*** FAILED - ABORTING\\n\"); \\\n            exit(1); \\\n        } \\\n    } while (0)\n\n#include &lt;time.h&gt;\n#include &lt;sys/time.h&gt;\n#define USECPSEC 1000000ULL\n\nlong long dtime_usec(unsigned long long start){\n\n  timeval tv;\n  gettimeofday(&amp;tv, 0);\n  return ((tv.tv_sec*USECPSEC)+tv.tv_usec)-start;\n}\n\nnamespace kernel {\n    __global__ void sumNND(float* devPtrIn, float* devPtrOut, const int N, const int D) {\n        int index = blockIdx.x * blockDim.x + threadIdx.x;\n        int stride = blockDim.x * gridDim.x;\n\n        for (int id = index; id &lt; N * N * D; id += stride) {\n            const unsigned int d = id % D;\n            const unsigned int i = (id - d) / D;\n            const unsigned int n = i / N;\n            const unsigned int m = i % N;\n\n            atomicAdd(&amp;devPtrOut[d + D * n], devPtrIn[d + D * n + N * m]);\n        }\n    }\n}\n\nvoid sumNND(const int numBlocks, const int blockSize, float* devPtrIn, float* devPtrOut, const int N, const int D) {\n    HANDLE_ERROR(cudaMemset(devPtrOut, 0, N * D * sizeof(float)));\n    kernel::sumNND&lt;&lt;&lt;numBlocks, blockSize&gt;&gt;&gt;(devPtrIn, devPtrOut, N, D);\n    HANDLE_ERROR(cudaDeviceSynchronize());\n}\n\n// kernel assumes 1 block assigned per row, use block-striding methodology\n// assumes block size is a power of 2\n__global__ void sum_rows_NND(const float * __restrict__  devPtrIn, float * __restrict__  devPtrOut, const int N, const int D) {\n  __shared__ float sdata[bsize];\n  sdata[threadIdx.x] = 0;\n  for (int i = threadIdx.x; i &lt; N; i += blockDim.x) // block-stride\n    sdata[threadIdx.x] += devPtrIn[(blockIdx.x * N) + i];\n  __syncthreads();\n  for (int i = blockDim.x&gt;&gt;1; i &gt; 0; i&gt;&gt;=1){\n    if (threadIdx.x &lt; i) sdata[threadIdx.x] += sdata[threadIdx.x+i];\n    __syncthreads();}\n  if (!threadIdx.x) devPtrOut[blockIdx.x] = sdata[0];\n}\n\n\n\n// kernel assumes one thread assigned per column sum\n// launch N threads\n __global__ void sum_cols_NND(const float * __restrict__  devPtrIn, float * __restrict__  devPtrOut, const int N, const int D) {\n  int idx = threadIdx.x+blockDim.x*blockIdx.x;\n  int ido = idx;\n  if (idx &lt; N){\n    for (int j = 0; j &lt; D; j++){\n      float temp = 0;\n      for (int i = 0; i &lt; N; i++) temp += devPtrIn[idx + (i*N)];\n      devPtrOut[ido] = temp;\n      ido += N;\n      idx += N*N;}}\n}\n\nint main(){\n\n  float *h_data, *d_data, *h_res1, *h_res2, *d_res;\n\n  h_data = new float[my_loopSize];\n  cudaMalloc(&amp;d_data, my_loopSize*sizeof(d_data[0]));\n  h_res1 = new float[my_N*my_D];\n  h_res2 = new float[my_N*my_D];\n  cudaMalloc(&amp;d_res, my_N*my_D*sizeof(d_res[0]));\n  for (int i = 0; i &lt; my_loopSize; i++) h_data[i] = rand()/(float)RAND_MAX;\n  cudaCheckErrors(\"CUDA failure\");\n  cudaMemcpy(d_data, h_data, my_loopSize*sizeof(d_data[0]), cudaMemcpyHostToDevice);\n  // test original approach\n  cudaMemset(d_res, 0, my_N*my_D*sizeof(d_res[0]));\n  unsigned long long dt1 = dtime_usec(0);\n  kernel::sumNND&lt;&lt;&lt;my_numBlocks, my_blockSize&gt;&gt;&gt;(d_data, d_res, my_N, my_D);\n  cudaDeviceSynchronize();\n  dt1 = dtime_usec(dt1);\n  cudaMemcpy(h_res1, d_res, my_N*my_D*sizeof(d_res[0]), cudaMemcpyDeviceToHost);\n\n  //test columnwise reduction\n  unsigned long long dt2 = dtime_usec(0);\n  //sum_rows_NND&lt;&lt;&lt;my_N*my_D, bsize&gt;&gt;&gt;(d_data, d_res, my_N, my_D);\n  sum_cols_NND&lt;&lt;&lt;(my_N + bsize -1)/bsize, bsize&gt;&gt;&gt;(d_data, d_res, my_N, my_D);\n  cudaDeviceSynchronize();\n  dt2 = dtime_usec(dt2);\n  cudaMemcpy(h_res2, d_res, my_N*my_D*sizeof(d_res[0]), cudaMemcpyDeviceToHost);\n\n  // validate results\n  for (int i = 0; i &lt; my_N; i++)\n    if (fabsf(h_res1[i] - h_res2[i]) &gt; TOL) {printf(\"mismatch at %d, was %f, should be %f\\n\", i, h_res2[i], h_res1[i]); return -1;}\n  cudaCheckErrors(\"program error\");\n\n  printf(\"results match,  kernel 1 time: %fs, kernel 2 time: %fs\\n\", dt1/(float)USECPSEC, dt2/(float)USECPSEC);\n  // time row reduction kernel\n  unsigned long long dt3 = dtime_usec(0);\n  sum_rows_NND&lt;&lt;&lt;my_N*my_D, bsize&gt;&gt;&gt;(d_data, d_res, my_N, my_D);\n  cudaDeviceSynchronize();\n  dt3 = dtime_usec(dt3);\n  printf(\"row reduction kernel time: %fs\\n\", dt3/(float)USECPSEC);\n  cudaCheckErrors(\"program error\");\n}\n$ nvcc -arch=sm_52 -o t1263 t1263.cu\n$ ./t1263\nresults match,  kernel 1 time: 0.459971s, kernel 2 time: 0.013678s\nrow reduction kernel time: 0.013724s\n$\n</code></pre>\n\n<p>Notes:</p>\n\n<ol>\n<li><p>The optimized kernel is around 30x faster than your naive atomics kernel.  I suspect that a big chunk of this is not actually the use of atomics, but the uncoalesced access.  global atomics on newer GPUs can be pretty fast.</p></li>\n<li><p>The first \"page\" (NxN) of elements column sum match between my kernel and your kernel (i.e. the first N results match).  After the first page (first N results), our results differ.  I'm pretty sure my indexing is correct, but after spending a while trying to unravel your indexing, I gave up.  I suspect you have a bug in your kernel indexing, if you are trying to sum columns, and all the aforementioned assumptions are true.</p></li>\n<li><p>I also included a timing measurement of the row-summing kernel, which looks quite different, but produces almost the same timing.  This is to be expected, since optimal kernels for these types of problems will be limited by memory bandwidth, which is the same in both cases.  Optimal kernels will load all the data, once, in a coalesced fashion.  After that, the row-sum vs. column-sum mechanics have relatively little effect on the kernel time.</p></li>\n<li><p>With a small modification to the initialization of the data, I think it's fairly easy to prove that your kernel is not creating the correct indexing and therefore not producing the correct row-sums after the first \"page\" (i.e. after the first <code>N</code> results).  After a little more study of your indexing, I have some idea of what is going wrong.  One example problem is that for <code>N</code> not divisible by <code>D</code>, your kernel <code>d</code> variable will not reset to zero after the first \"page\", but this is not the only issue.</p></li>\n</ol>\n\n<p>Pursuant to item 4, here's a version of the code that has modified data initialization, and a full test of all <code>N</code>*<code>D</code> results.  The data initialization is such that the first column of the first page will be all zero, the next column all 1, the next column all 2, etc.  On the second page, we increment everything by 1, so the first column will be all 1, the second column will be all 2, etc.  Therefore it should be easy to agree on what the column sums should be.  For the first page, the column sums should be 0, 10000, 20000, etc.  For the second page they should be 10000, 20000, 30000, etc.  On the first column of the second page, my code produces 10000, your code produces 1.  With your changed indexing in the comments, I produce 0 for the first column of the first page, and your code produces 9999.  1 and 9999 cannot possibly be valid column sums according to the data initialization I described:</p>\n\n<pre><code>$ cat t1263.cu\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nconst int my_N = 10000;\nconst int my_D = 3;\nconst int my_blockSize = 768;\nconst int my_loopSize = my_N*my_N*my_D;\nconst int my_numBlocks = (my_loopSize + my_blockSize -1)/my_blockSize;\nconst int bsize = 512;\nconst float TOL = 0.1f;\n\n#define HANDLE_ERROR(x) x\n\n#define cudaCheckErrors(msg) \\\n    do { \\\n        cudaError_t __err = cudaGetLastError(); \\\n        if (__err != cudaSuccess) { \\\n            fprintf(stderr, \"Fatal error: %s (%s at %s:%d)\\n\", \\\n                msg, cudaGetErrorString(__err), \\\n                __FILE__, __LINE__); \\\n            fprintf(stderr, \"*** FAILED - ABORTING\\n\"); \\\n            exit(1); \\\n        } \\\n    } while (0)\n\n#include &lt;time.h&gt;\n#include &lt;sys/time.h&gt;\n#define USECPSEC 1000000ULL\n\nlong long dtime_usec(unsigned long long start){\n\n  timeval tv;\n  gettimeofday(&amp;tv, 0);\n  return ((tv.tv_sec*USECPSEC)+tv.tv_usec)-start;\n}\n\nnamespace kernel {\n    __global__ void sumNND(float* devPtrIn, float* devPtrOut, const int N, const int D) {\n        int index = blockIdx.x * blockDim.x + threadIdx.x;\n        int stride = blockDim.x * gridDim.x;\n\n        for (int id = index; id &lt; N * N * D; id += stride) {\n            const unsigned int d = id % D;       // 0 1 2 0 1 2 0 1 2\n            const unsigned int i = (id - d) / D; // 0 0 0 1 1 1 2 2 2\n            const unsigned int n = i / N;        // 0 0 0 0 0 0 0 0 0\n            const unsigned int m = i % N;        // 0 0 0 1 1 1 2 2 2\n\n            atomicAdd(&amp;devPtrOut[d + D * n],    //  0 1 2 0 1 2 0 1 2\n              devPtrIn[d + D * n + N * m]);     //  0 1 2 0+N 1+N 2+N 0+2N 1+2N 2+2N\n        }\n    }\n}\n\nvoid sumNND(const int numBlocks, const int blockSize, float* devPtrIn, float* devPtrOut, const int N, const int D) {\n    HANDLE_ERROR(cudaMemset(devPtrOut, 0, N * D * sizeof(float)));\n    kernel::sumNND&lt;&lt;&lt;numBlocks, blockSize&gt;&gt;&gt;(devPtrIn, devPtrOut, N, D);\n    HANDLE_ERROR(cudaDeviceSynchronize());\n}\n\n// kernel assumes 1 block assigned per row, use block-striding methodology\n// assumes block size is a power of 2\n__global__ void sum_rows_NND(const float * __restrict__  devPtrIn, float * __restrict__  devPtrOut, const int N, const int D) {\n  __shared__ float sdata[bsize];\n  sdata[threadIdx.x] = 0;\n  for (int i = threadIdx.x; i &lt; N; i += blockDim.x) // block-stride\n    sdata[threadIdx.x] += devPtrIn[(blockIdx.x * N) + i];\n  __syncthreads();\n  for (int i = blockDim.x&gt;&gt;1; i &gt; 0; i&gt;&gt;=1){\n    if (threadIdx.x &lt; i) sdata[threadIdx.x] += sdata[threadIdx.x+i];\n    __syncthreads();}\n  if (!threadIdx.x) devPtrOut[blockIdx.x] = sdata[0];\n}\n\n\n\n// kernel assumes one thread assigned per column sum\n// launch N threads\n __global__ void sum_cols_NND(const float * __restrict__  devPtrIn, float * __restrict__  devPtrOut, const int N, const int D) {\n  int idx = threadIdx.x+blockDim.x*blockIdx.x;\n  int ido = idx;\n  if (idx &lt; N){\n    for (int j = 0; j &lt; D; j++){\n      float temp = 0;\n      for (int i = 0; i &lt; N; i++) temp += devPtrIn[idx + (i*N)];\n      devPtrOut[ido] = temp;\n      ido += N;\n      idx += N*N;}}\n}\n\nint main(){\n\n  float *h_data, *d_data, *h_res1, *h_res2, *d_res;\n\n  h_data = new float[my_loopSize];\n  cudaMalloc(&amp;d_data, my_loopSize*sizeof(d_data[0]));\n  h_res1 = new float[my_N*my_D];\n  h_res2 = new float[my_N*my_D];\n  cudaMalloc(&amp;d_res, my_N*my_D*sizeof(d_res[0]));\n  for (int i = 0; i &lt; my_loopSize; i++) h_data[i] = i%my_N + i/(my_N*my_N); //rand()/(float)RAND_MAX;\n  cudaCheckErrors(\"CUDA failure\");\n  cudaMemcpy(d_data, h_data, my_loopSize*sizeof(d_data[0]), cudaMemcpyHostToDevice);\n  // test original approach\n  cudaMemset(d_res, 0, my_N*my_D*sizeof(d_res[0]));\n  unsigned long long dt1 = dtime_usec(0);\n  kernel::sumNND&lt;&lt;&lt;my_numBlocks, my_blockSize&gt;&gt;&gt;(d_data, d_res, my_N, my_D);\n  cudaDeviceSynchronize();\n  dt1 = dtime_usec(dt1);\n  cudaMemcpy(h_res1, d_res, my_N*my_D*sizeof(d_res[0]), cudaMemcpyDeviceToHost);\n\n  //test columnwise reduction\n  unsigned long long dt2 = dtime_usec(0);\n  //sum_rows_NND&lt;&lt;&lt;my_N*my_D, bsize&gt;&gt;&gt;(d_data, d_res, my_N, my_D);\n  sum_cols_NND&lt;&lt;&lt;(my_N + bsize -1)/bsize, bsize&gt;&gt;&gt;(d_data, d_res, my_N, my_D);\n  cudaDeviceSynchronize();\n  dt2 = dtime_usec(dt2);\n  cudaMemcpy(h_res2, d_res, my_N*my_D*sizeof(d_res[0]), cudaMemcpyDeviceToHost);\n\n  // validate results\n  for (int i = 0; i &lt; my_N*my_D; i++)\n    if (fabsf(h_res1[i] - h_res2[i]) &gt; TOL) {printf(\"mismatch at %d, was %f, should be %f\\n\", i, h_res2[i], h_res1[i]); return -1;}\n  cudaCheckErrors(\"program error\");\n\n  printf(\"results match,  kernel 1 time: %fs, kernel 2 time: %fs\\n\", dt1/(float)USECPSEC, dt2/(float)USECPSEC);\n  // time row reduction kernel\n  unsigned long long dt3 = dtime_usec(0);\n  sum_rows_NND&lt;&lt;&lt;my_N*my_D, bsize&gt;&gt;&gt;(d_data, d_res, my_N, my_D);\n  cudaDeviceSynchronize();\n  dt3 = dtime_usec(dt3);\n  printf(\"row reduction kernel time: %fs\\n\", dt3/(float)USECPSEC);\n  cudaCheckErrors(\"program error\");\n}\n$ nvcc -arch=sm_52 -o t1263 t1263.cu\n$ ./t1263\nmismatch at 10000, was 10000.000000, should be 1.000000\n$\n</code></pre>\n"}], "owner": {"reputation": 2652, "user_id": 1085291, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a637f0938b1d4466e99b9df92d0ee6a7?s=128&d=identicon&r=PG&f=1", "display_name": "casparjespersen", "link": "https://stackoverflow.com/users/1085291/casparjespersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 750, "favorite_count": 1, "accepted_answer_id": 47995908, "answer_count": 2, "score": 1, "last_activity_date": 1514471769, "creation_date": 1514384733, "question_id": 47993833, "link": "https://stackoverflow.com/questions/47993833/parallel-dimension-reduction-3d-to-2d-with-sum-using-cuda", "title": "Parallel dimension reduction (3D to 2D with sum) using Cuda", "body": "<p>In a CUDA application, I have an <code>N x N x D</code> matrix that I want to reduce to <code>N x D</code> by summing over the entire first (or second) axis. How do I do this most efficiently?</p>\n\n<p>Typically, N is greater than 10000 and D is 2 or 3.</p>\n\n<p>A quick and naive solution using atomicAdd would be the following:</p>\n\n<pre><code>namespace kernel {\n    __global__ void sumNND(float* devPtrIn, float* devPtrOut, const int N, const int D) {\n        int index = blockIdx.x * blockDim.x + threadIdx.x;\n        int stride = blockDim.x * gridDim.x;\n\n        for (int id = index; id &lt; N * N * D; id += stride) {\n            const unsigned int d = id % D;\n            const unsigned int i = (id - d) / D;\n            const unsigned int n = i / N;\n            const unsigned int m = i % N;\n\n            atomicAdd(&amp;devPtrOut[d + D * n], devPtrIn[d + D * n + N * m]);\n        }\n    }\n}\n\nvoid sumNND(const int numBlocks, const int blockSize, float* devPtrIn, float* devPtrOut, const int N, const int D) {\n    HANDLE_ERROR(cudaMemset(devPtrOut, 0, N * D * sizeof(float)));\n    kernel::sumNND&lt;&lt;&lt;numBlocks, blockSize&gt;&gt;&gt;(devPtrIn, devPtrOut, N, D);\n    HANDLE_ERROR(cudaDeviceSynchronize());\n}\n</code></pre>\n\n<p>where <code>sumNND</code> is being called with</p>\n\n<p><code>loopSize = N * N * D</code>,\n<code>blockSize = 768</code> and\n<code>numBlocks = (loopSize + blockSize - 1) / blockSize</code>.</p>\n\n<p>This is (not surprisingly) a bottleneck in my timeline, but I can't figure out how to effectively parallelize the dimension reduction. Any pointers?</p>\n"}, {"tags": ["c++", "opengl", "glut"], "comments": [{"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 2, "creation_date": 1514385408, "post_id": 47993767, "comment_id": 82956036, "body": "Is the line of sight direction (from <code>eye</code> to <code>origin</code>) almost the same as the up vector (0, 1, 0)? Ideally the up vectro should be normal to the line of sight. Vectors that form a very sharp angle (have almost the same direction) can lead to inaccuracies."}, {"owner": {"reputation": 20892, "user_id": 570339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/V9npa.jpg?s=128&g=1", "display_name": "Ramy Al Zuhouri", "link": "https://stackoverflow.com/users/570339/ramy-al-zuhouri"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1514564802, "post_id": 47993767, "comment_id": 83020375, "body": "@Rabbid76 I tried to use the cross product between the eye-object vector and the x axis versor as viewup vector, and the camera still flickers."}, {"owner": {"reputation": 1628, "user_id": 1230621, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a752347505880eb6aca2316744e7f474?s=128&d=identicon&r=PG", "display_name": "StarShine", "link": "https://stackoverflow.com/users/1230621/starshine"}, "edited": false, "score": 0, "creation_date": 1514577592, "post_id": 47993767, "comment_id": 83025456, "body": "You are using the car&#39;s position as a direction offset. This can&#39;t be right. You probably meant to use the car&#39;s direction instead."}], "owner": {"reputation": 20892, "user_id": 570339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/V9npa.jpg?s=128&g=1", "display_name": "Ramy Al Zuhouri", "link": "https://stackoverflow.com/users/570339/ramy-al-zuhouri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514384466, "creation_date": 1514384466, "question_id": 47993767, "link": "https://stackoverflow.com/questions/47993767/opengl-flickering-with-dynamic-camera", "title": "OpenGL - Flickering with dynamic camera", "body": "<p>I am trying to implement a dynamic camera that follow my <strong>Car</strong> object, rotating in a way that it always points towards the car's front. The car is constantly moving, and this means that its <em>origin</em> property changes at every frame.</p>\n\n<pre><code>struct Point\n{\n    float x, y, z;\n};  \n\nstruct Vector\n{\n    float dx, dy, dz;\npublic:\n    Vector normalized() const; // returns the normalized vector   \n    Point operator+(const Vector&amp;) const; // Adds up a vector \n}\n\n\nvoid draw() {\n\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    glClearColor (1.0, 1.0, 1,0);\n\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity ();\n    gluPerspective(60.0, 1.0, 1.0, 1000.0);\n\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n\n    Point origin = car.origin; // The car's origin changes at every frame, \n                               // becase the car is moving\n\n    // The direction vector points outwards the car'origin\n    Vector direction = Vector(-origin.x, -origin.y, -origin.z).normalized();\n    // The eye should be at a constant distance along the direction vector\n    Point eye = origin + direction * 125.0;\n    gluLookAt(eye.x, eye.y, eye.z, origin.x, origin.y, origin.z, 0, 1, 0);\n\n    car.draw(); // calls the primitives that actually draw the car on the screen\n    glutSwapBuffers();\n}\n</code></pre>\n\n<p>This causes a lot of flickering. If instead of pointing the camera towards the car's front, I make it look towards the -z axis and compute the eye Point this way:   </p>\n\n<pre><code>Point eye = origin + Vector(0,0,125);\n</code></pre>\n\n<p>The flickering goes away. What am I doing wrong in the above code?</p>\n"}, {"tags": ["c++", "qt", "qml", "model-view"], "comments": [{"owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1514389357, "post_id": 47993755, "comment_id": 82957753, "body": "It looks like <code>StackView</code>, not <code>TreeView</code>"}, {"owner": {"reputation": 1081, "user_id": 4859268, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/434108cc24f67b8f47c3032894e72423?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/4859268/mikhail"}, "reply_to_user": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1514389542, "post_id": 47993755, "comment_id": 82957833, "body": "@folibis yes you are correct. Any ideas how to delegate a <code>TreeModel</code> into a <code>StackView</code>?"}, {"owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1514397856, "post_id": 47993755, "comment_id": 82961402, "body": "What is TreeModel?"}, {"owner": {"reputation": 1081, "user_id": 4859268, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/434108cc24f67b8f47c3032894e72423?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/4859268/mikhail"}, "reply_to_user": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1514420520, "post_id": 47993755, "comment_id": 82968834, "body": "@folibis a model which represents a set of data like a tree with nodes and layers. Binary tree."}], "answers": [{"comments": [{"owner": {"reputation": 1081, "user_id": 4859268, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/434108cc24f67b8f47c3032894e72423?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/4859268/mikhail"}, "edited": false, "score": 0, "creation_date": 1514725111, "post_id": 48020503, "comment_id": 83055899, "body": "will try it out. seems like exactly what I was asking for"}], "tags": [], "owner": {"reputation": 4421, "user_id": 2846711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376e80e738e89334ce88d4afdce48afa?s=128&d=identicon&r=PG&f=1", "display_name": "Yoann Quenach de Quivillic", "link": "https://stackoverflow.com/users/2846711/yoann-quenach-de-quivillic"}, "is_accepted": false, "score": 2, "last_activity_date": 1514542213, "last_edit_date": 1514542213, "creation_date": 1514540727, "answer_id": 48020503, "question_id": 47993755, "link": "https://stackoverflow.com/questions/47993755/qml-treeview-display-nodes-by-levels-or-custom-delegate/48020503#48020503", "title": "QML TreeView display nodes by levels or custom delegate", "body": "<p>I recently implemented something similar, based on a <code>QFileSystemModel</code>, set as a qml contextProperty, named treeModel in the example below.</p>\n\n<p>The idea was to keep track of the current <code>QModelIndex</code>, and to use the <code>data()</code> &amp; <code>rowCount()</code> functions of the <code>QAbstractItemModel</code> to get the actual model data, and to use a recursive stack view for the navigation</p>\n\n<h2>General layout</h2>\n\n<pre><code>ApplicationWindow {\n    id: main\n    visible: true\n    width: 640\n    height: 480\n\n    ColumnLayout\n    {\n        anchors.fill: parent\n\n        // Breadcrumb\n        SEE BELOW\n\n        // View\n        StackView\n        {\n            id: stackView\n            Layout.fillHeight: true\n            Layout.fillWidth: true\n            initialItem: TreeSlide {}\n        }\n\n    }\n}\n</code></pre>\n\n<h2>TreeSlide</h2>\n\n<p>The view itself is pretty simple. I didn't used anything fancy here, and it displays only one role, but you could extend it without trouble. Note that the view's model is NOT your treeModel, but instead just the rowCount for the rootIndex. </p>\n\n<pre><code>ListView\n{\n    Layout.fillHeight: true\n    Layout.fillWidth: true\n    model: treeModel.rowCount(rootIndex)\n    clip: true\n    snapMode: ListView.SnapToItem\n\n    property var rootIndex\n\n    // I used a QFileSytemModel in my example, so I had to manually \n    // fetch data when the rootIndex changed. You may not need this though.\n    onRootIndexChanged: {\n        if(treeModel.canFetchMore(rootIndex))\n            treeModel.fetchMore(rootIndex)\n    }\n    Connections {\n        target: treeModel\n        onRowsInserted: {\n            rootIndexChanged()\n        }\n    }\n\n    delegate: ItemDelegate {\n        property var modelIndex: treeModel.index(index,0, rootIndex)\n        property bool hasChildren: treeModel.hasChildren(modelIndex)\n        width: parent.width\n        text: treeModel.data(modelIndex)\n        onClicked: {\n            if(hasChildren)\n            {\n                // Recursively add another TreeSlide, with a new rootIndex\n                stackView.push(\"TreeSlide.qml\", {rootIndex: modelIndex})\n            }\n        }\n    }\n}\n</code></pre>\n\n<h2>Breadcrumb</h2>\n\n<p>To navigate the model, instead of a simple back button, I used a kind of dynamic breadcrumb</p>\n\n<pre><code>// Breadcrumb\nRowLayout\n{\n    Repeater\n    {\n        id: repeat\n        model: {\n            var res = []\n            var temp = stackView.currentItem.rootIndex\n            while(treeModel.data(temp) != undefined)\n            {\n                res.unshift(treeModel.data(temp))\n                temp = temp.parent\n            }\n            res.unshift('.')\n            return res\n        }\n        ItemDelegate\n        {\n            text : modelData\n            onClicked: {\n                goUp(repeat.count - index-1)\n            }\n        }\n\n    }\n}\n</code></pre>\n\n<p>the goUp function simply goes up the stack by poping items</p>\n\n<pre><code>function goUp(n)\n{\n    for(var i=0; i&lt;n; i++)\n        stackView.pop()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1081, "user_id": 4859268, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/434108cc24f67b8f47c3032894e72423?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/4859268/mikhail"}, "is_accepted": true, "score": 1, "last_activity_date": 1519827031, "creation_date": 1519827031, "answer_id": 49031529, "question_id": 47993755, "link": "https://stackoverflow.com/questions/47993755/qml-treeview-display-nodes-by-levels-or-custom-delegate/49031529#49031529", "title": "QML TreeView display nodes by levels or custom delegate", "body": "<p>To to do it completely by guides we should use <code>DelegateModel</code> and <code>DelegateModel.rootIndex</code></p>\n\n<pre><code>   DelegateModel {\n        id: delegateSupportPropConfigModel\n\n        model: supportModel\n\n        delegate: SupportPropConfigListItem {\n            id: currentItem\n            width: scrollRect2.width - 60\n            fieldName: model.fieldName\n            fieldValue: model.value \n\n            onClick:{\n              delegateSupportPropConfigModel.rootIndex = supportPropConfigModel.index(0, 0, supportPropConfigModel)\n            }\n        }\n    }\n\n    Column {\n        id: columnSettings\n        spacing: 2\n\n        Repeater {\n            model: delegateSupportPropConfigModel\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 1081, "user_id": 4859268, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/434108cc24f67b8f47c3032894e72423?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/4859268/mikhail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1494, "favorite_count": 0, "accepted_answer_id": 49031529, "answer_count": 2, "score": 3, "last_activity_date": 1519827031, "creation_date": 1514384419, "question_id": 47993755, "link": "https://stackoverflow.com/questions/47993755/qml-treeview-display-nodes-by-levels-or-custom-delegate", "title": "QML TreeView display nodes by levels or custom delegate", "body": "<p>I have a tree model derived from a QAbstractItemModel. And I can display the data in a tree like way.</p>\n\n<p><a href=\"https://i.stack.imgur.com/b3aPq.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b3aPq.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>What I want is to display teh data by the layers. To display only one level of a layer at a time AND put each layer on a stack and navigate backwards by poping the layer from the stack. \n<a href=\"https://i.stack.imgur.com/pxDT5.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pxDT5.gif\" alt=\"enter image description here\"></a></p>\n\n<p>I guess I have to implement a custom delegate? Any advice would be highly appreciated. Thank you.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1514384250, "post_id": 47993680, "comment_id": 82955530, "body": "<b><i>should I replace vectors with arrays to make my code faster</i></b> No you need a dynamic array so use a vector."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 2, "creation_date": 1514384292, "post_id": 47993680, "comment_id": 82955552, "body": "<code>std::array</code>\u2019s speed advantage (and its size limitation for stack-based objects) come from the fact that <code>std::array</code>s size is known at compile-time and it can, thus, avoid allocation and, more importantly, an indirection. There may be a place for an <code>std::array</code>-like data structure which has a known upper size but a dynamic size up to this upper likit. However, there is no such data structure in the standard C++ library."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1514384419, "post_id": 47993680, "comment_id": 82955597, "body": "<code>int myArray[N];</code> is a VLA. This is not legal c++ but a compiler extension. I doubt it is any faster than vector anyways and it makes your code only work on compilers that support this non standard extension."}], "answers": [{"tags": [], "owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "is_accepted": true, "score": 2, "last_activity_date": 1514384926, "creation_date": 1514384926, "answer_id": 47993886, "question_id": 47993680, "link": "https://stackoverflow.com/questions/47993680/c-initializing-an-array-with-size-from-standard-input/47993886#47993886", "title": "C++ initializing an array with size from standard input", "body": "<p><code>N</code> should be known at compile time. So, if you want to use <code>array</code> for I/O operations you should specify maximum number of <code>int</code>s that is allowed to read. Also, you should track number of read integers on your own.</p>\n\n<blockquote>\n  <p>So should I replace vectors with arrays to make my code faster and if\n  so the how should I do it?</p>\n</blockquote>\n\n<p>No, because <code>operator&gt;&gt;</code> would be the bottleneck in your case. And working with <code>vector</code> when number of <code>int</code>s  is not known is just fine.</p>\n"}, {"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 3, "creation_date": 1514385246, "post_id": 47993912, "comment_id": 82955966, "body": "Everything else is good... but I downvoted for the last point, which is dangerously false. Does that even compile? It shouldn&#39;t, because that&#39;s not a valid implicit cast. Anyway, <code>std::vector</code> does not provide an overridden <code>operator&amp;</code> that would access its buffer, and nor should it. If such code <i>happened</i> to work on your compiler, then (A) I have no idea how and (B) you need to replace that code immediately, because it shouldn&#39;t work and may blow up horribly at any moment."}, {"owner": {"reputation": 229, "user_id": 4691843, "user_type": "registered", "profile_image": "https://graph.facebook.com/669724423133099/picture?type=large", "display_name": "DNKpp", "link": "https://stackoverflow.com/users/4691843/dnkpp"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1514386708, "post_id": 47993912, "comment_id": 82956619, "body": "@underscore_d I think he meant the <code>vector::data()</code> function. That would be, indeed, a pointer to the underlying data array. <a href=\"http://en.cppreference.com/w/cpp/container/vector/data\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/vector/data</a>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1514387583, "post_id": 47993912, "comment_id": 82957013, "body": "Right, and -1 removed. Of course, that underlying array is managed by the <code>vector</code>, so we can&#39;t substitute it into all cases where a raw array would be used, especially if they might try to <code>delete</code> it. I think it&#39;s best only to use <code>.data()</code> for passing to APIs that expect a raw pointer, and preferably a <code>const</code> one that they only read. Anything else is kind of asking for trouble and somewhat defeating the point of using <code>vector</code>. Still, there are cases where it can be convenient to use <code>.data()</code> and write, but I think they&#39;re best confined to whoever creates the <code>vector</code> &amp; maintains its size"}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 0, "creation_date": 1515088981, "post_id": 47993912, "comment_id": 83177221, "body": "Arrays are objects in C++. You probably meant to say they are not classes and so can&#39;t have member functions."}], "tags": [], "owner": {"reputation": 23, "user_id": 1948112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4499f040f4593e8be7746bf9692fd063?s=128&d=identicon&r=PG", "display_name": "Jaky Bo", "link": "https://stackoverflow.com/users/1948112/jaky-bo"}, "is_accepted": false, "score": 0, "last_activity_date": 1514387427, "last_edit_date": 1514387427, "creation_date": 1514385068, "answer_id": 47993912, "question_id": 47993680, "link": "https://stackoverflow.com/questions/47993680/c-initializing-an-array-with-size-from-standard-input/47993912#47993912", "title": "C++ initializing an array with size from standard input", "body": "<p>an array is not an object in c++ so there is no .size() function. You should instead have another variable holding it's size.</p>\n\n<pre><code>int* array = new int[size];\n</code></pre>\n\n<p>it's the way. But you should have solid reasons to do this as vector it's much more safer and easer to use.</p>\n\n<p>after using the array you must delete it:</p>\n\n<pre><code>delete [] array;\n</code></pre>\n\n<p>and remember you can always get an array from a vector just by using the vector::data() function</p>\n"}], "owner": {"reputation": 45, "user_id": 9136269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b2f35be6e98581b97cfabda864b5122?s=128&d=identicon&r=PG&f=1", "display_name": "Timo Loomets", "link": "https://stackoverflow.com/users/9136269/timo-loomets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 737, "favorite_count": 1, "accepted_answer_id": 47993886, "answer_count": 2, "score": 1, "last_activity_date": 1514387427, "creation_date": 1514384121, "question_id": 47993680, "link": "https://stackoverflow.com/questions/47993680/c-initializing-an-array-with-size-from-standard-input", "title": "C++ initializing an array with size from standard input", "body": "<p>When I need to store multiple values of same type in c++ I can use a vector or array. So far I have mainly only used vectors, but I have heard that arrays are faster to work with (read and write values). If this is true I would like to know how I could make an array with the size that I read from standard input. I currently use something like this:  </p>\n\n<pre><code>int N;\ncin &gt;&gt; N;\nvector&lt;int&gt; myVector(N);\n</code></pre>\n\n<p>I have tried:</p>\n\n<pre><code>int N;\ncin &gt;&gt; N;\narray&lt;int, N&gt; myArray;\n</code></pre>\n\n<p>but this gives me an error because:<br>\nerror: the value of 'N' is not usable in a constant expression<br>\nI have also tried:</p>\n\n<pre><code>int N;\ncin &gt;&gt; N;\nint myArray[N];\n</code></pre>\n\n<p>This will compile, but when I try to ask for the size of this array (<code>myArray.size()</code>) to iterate over it with a for loop then I get an error:<br>\nerror: request for member 'size' in 'myArray', which is of non-class type 'int [N]'  </p>\n\n<p><b>So should I replace vectors with arrays to make my code faster and if so the how should I do it?</b></p>\n"}, {"tags": ["c++", "list", "skybox"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1514383339, "post_id": 47993491, "comment_id": 82955119, "body": "Please post the full error messages not just the compiler&#39;s code numbers."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 3, "creation_date": 1514383487, "post_id": 47993491, "comment_id": 82955195, "body": "Anyway, you just didn&#39;t read the documentation for <code>std::list</code>. It&#39;s not a random-access container, so <code>operator[]</code> is not meaningful and hence does not exist. See e.g. <a href=\"http://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/list</a> where there is no <code>operator[]</code> to be found. You probably actually want <code>std::vector</code>, as do 99.9999% of people who want a container, and it <i>is</i> a random-access container with an <code>operator[]</code>. (You can get the item at a particular notional &#39;index&#39; in an <code>std::list</code> using iterators and <code>advance</code> or arithmetic or something, but you probably don&#39;t really want to.)"}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 1, "creation_date": 1514383631, "post_id": 47993491, "comment_id": 82955260, "body": "Please provide the error message as text (searchable) and not as png (not searchable). Thanks"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7201716"}, "edited": false, "score": 0, "creation_date": 1514383802, "post_id": 47993588, "comment_id": 82955332, "body": "Ah right! Thanks a lot, mate, ill have a bash at doing that then!"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1514383851, "post_id": 47993588, "comment_id": 82955351, "body": "Re <code>1)</code>, as I&#39;m sure you&#39;ll see in the documentation, <code>std::vector</code> has a constructor that lets you create it with a specific initial number of elements."}], "tags": [], "owner": {"reputation": 11, "user_id": 7133419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6DwCh.jpg?s=128&g=1", "display_name": "Nick Henriques", "link": "https://stackoverflow.com/users/7133419/nick-henriques"}, "is_accepted": false, "score": 1, "last_activity_date": 1514383678, "creation_date": 1514383678, "answer_id": 47993588, "question_id": 47993491, "link": "https://stackoverflow.com/questions/47993491/c-error-code-e0349-c2676/47993588#47993588", "title": "C++ Error Code E0349, C2676", "body": "<p>I think you misunderstood some things here.</p>\n\n<p>1) push_back only push one element into a container, for example: push_back(6) will push 6 into the container and not 6 elements as you need.</p>\n\n<p>2) std::list doens't have the [] operator defined, it's not meant for that. If you need to access each element, I recommend you to use std::vector instead which has a [] operator.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7201716"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1295, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1514383678, "creation_date": 1514383200, "last_edit_date": 1514383545, "question_id": 47993491, "link": "https://stackoverflow.com/questions/47993491/c-error-code-e0349-c2676", "title": "C++ Error Code E0349, C2676", "body": "<p>currently trying to make a skybox using the soil lib. However, I get these two errors and have no idea why or what to do to fix them... If anyone could offer any help or suggestions would be greatly appreciated!</p>\n\n<pre><code>GLuint textureCon;\n\nint widthX, heightY;\nunsigned char* imageInfo;\n\nstd::list&lt;int&gt; faces;\nfaces.push_back(6);\n\nglBindTexture(GL_TEXTURE_CUBE_MAP, textureCon);\n\nfor (GLuint i = 0; i &lt; faces.size(); i++)\n{\n    imageInfo = SOIL_load_image(faces[i], &amp;widthX, &amp;heightY, 0, SOIL_LOAD_RGB);\n    glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, GL_RGB, widthX, heightY, 0, GL_RGB, GL_UNSIGNED_BYTE, imageInfo);\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/R7LC7.png\" rel=\"nofollow noreferrer\">Error message</a></p>\n\n<p>Where I'm saying <code>faces[i]</code> that is where the E0349 error occurs saying that the square brackets don't match the operator? But I thought that's how to use lists?\nThanks again for any help! </p>\n"}, {"tags": ["c++", "c", "memory-management", "data-structures", "file-io"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 7, "creation_date": 1514383012, "post_id": 47993429, "comment_id": 82954972, "body": "C++ has <code>std::vector</code>, C has <code>realloc</code>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1514383158, "post_id": 47993429, "comment_id": 82955032, "body": "&quot;automatically&quot; Please define what it means. What kind of interface would qualify?"}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1514383180, "post_id": 47993429, "comment_id": 82955045, "body": "@Mat Right, rgr that \u2013 but how does one best track and algorithmically resize them in practice?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1514383319, "post_id": 47993429, "comment_id": 82955106, "body": "&quot;<i>how problematic is my workaround?</i> it isn&#39;t at all, at least if performance is not an issue."}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1514383399, "post_id": 47993429, "comment_id": 82955150, "body": "@n.m. I was thinking of how e.g. <code>funopen()</code> allows for the use of the <code>FILE*</code> opaque handle as the front-end interface for an arbitrary structure \u2013 in such a context, what are some algorithmic methods for handling initial allocation sizes <i>qua</i> subsequent reallocations"}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1514383510, "post_id": 47993429, "comment_id": 82955204, "body": "@n.m. \u2026 also, what is a good strategy for expanding the buffer in-place, in terms of doing the least amount of copying?"}, {"owner": {"reputation": 20670, "user_id": 26039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/15aacb48f4c894a6341e1013e9b5a42f?s=128&d=identicon&r=PG", "display_name": "eran", "link": "https://stackoverflow.com/users/26039/eran"}, "edited": false, "score": 2, "creation_date": 1514383593, "post_id": 47993429, "comment_id": 82955242, "body": "A simple linked list can provide the functionality you&#39;re looking for. Its memory layout is usually not what we&#39;d expect from a buffer, but so are files; they&#39;re just wrapped in an API that makes it look like a file is a single sequence of bytes. So basically you wanna separate the API, which should appear to manage a single buffer, from the implementation, which may manage multiple memory blocks. And using a file to store non-persistent data can be terribly slow."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 1, "creation_date": 1514383652, "post_id": 47993429, "comment_id": 82955269, "body": "Did you consider memory mapping?  That way you don&#39;t need to allocate any memory, the file becomes part of the paging system.  See <code>mmap</code>:  <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man2/mmap.2.html</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1514383771, "post_id": 47993429, "comment_id": 82955317, "body": "Ah OK so a stream-like interface. C++ has std::stringstream. Standard C has no such thing (funopen would qualify but it&#39;s not standard). You can wrap a realloc&#39;able buffer in a similar fashion that doesn&#39;t involve an actual FILE pointer."}, {"owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "edited": false, "score": 1, "creation_date": 1514383789, "post_id": 47993429, "comment_id": 82955324, "body": "How much data are you talking about? Do you need save the data on disk?"}, {"owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "edited": false, "score": 0, "creation_date": 1514383850, "post_id": 47993429, "comment_id": 82955349, "body": "What about C&#39;s <code>malloc()</code> and <code>realloc()</code>?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1514383884, "post_id": 47993429, "comment_id": 82955365, "body": "Double the capacity each time you reallocate."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 2, "creation_date": 1514384099, "post_id": 47993429, "comment_id": 82955457, "body": "Curious: how can one program in C <b>and</b> C++? I do get the &quot;or&quot;; you can add &quot;or Java or Python or ...&quot;"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 4, "creation_date": 1514384113, "post_id": 47993429, "comment_id": 82955464, "body": "An efficient strategy for a <i>contiguous</i> buffer is to increase the buffer size by a factor bigger than 1 when the buffer becomes full. The factor balances overallocation vs. effort copying the data: a small factor is expected to be more memory efficient but causes more copying. If you expect that the original size is about right you may want to choose a smaller factor (e.g., 1.5) while more uncertaintainty probably leads to a bigger value (e.g., 2). In either case, you\u2019d encapsulate the operation into an <code>insert()</code> operation (with C++ <code>std::vector</code> does just that)."}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1514385106, "post_id": 47993429, "comment_id": 82955892, "body": "@usr2564301 programming in \u201cC and C++\u201d is arguably possible due to the fact that C++ behaves much like a superset of C (although strictly speaking it isn\u2019t) \u2013 so, say, using the POSIX I/O C functions in a C++ program (like e.g. as I describe in my question) is something I could call \u201cC and C++ programming,\u201d if you will."}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1514385331, "post_id": 47993429, "comment_id": 82956001, "body": "@DietmarK&#252;hl thanks, these are exactly the kinds of implementation notes I am looking for. You don\u2019t suppose you have an example of this handy (one you\u2019d find exemplary)?"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1514391866, "post_id": 47993429, "comment_id": 82958897, "body": "@fish2000: as already noted, <code>std::vector</code> is an example. <code>std::string</code> is another example. Just look at one of the open source implementations, e.g., <a href=\"https://github.com/gcc-mirror/gcc/blob/master/libstdc%2B%2B-v3/include/bits/vector.tcc#L713\" rel=\"nofollow noreferrer\">libstdc++</a>."}], "answers": [{"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1514390120, "post_id": 47994191, "comment_id": 82958112, "body": "In C++, if strict contiguity is not a requirement, a <code>deque</code> might be a good choice."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1514390302, "post_id": 47994191, "comment_id": 82958196, "body": "@BenVoigt Strict contiguity is something I&#39;d assume when the OP is talking about image data. Otherwise, you&#39;re right."}, {"owner": {"reputation": 20670, "user_id": 26039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/15aacb48f4c894a6341e1013e9b5a42f?s=128&d=identicon&r=PG", "display_name": "eran", "link": "https://stackoverflow.com/users/26039/eran"}, "edited": false, "score": 1, "creation_date": 1514446397, "post_id": 47994191, "comment_id": 82975015, "body": "Are you sure that &quot;the solution that has most probably the best performance&quot;? If the file was fully cached, it&#39;d match an in-memory dynamic data structure, but that&#39;s not guaranteed. Worse, he&#39;s calling <code>fsync</code>, which is a blocking I/O operation. A file might be a convenient abstraction to work with, but in this case that&#39;s all it gives. Any memory-based alternative will most likely be much faster."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "reply_to_user": {"reputation": 20670, "user_id": 26039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/15aacb48f4c894a6341e1013e9b5a42f?s=128&d=identicon&r=PG", "display_name": "eran", "link": "https://stackoverflow.com/users/26039/eran"}, "edited": false, "score": 1, "creation_date": 1514456237, "post_id": 47994191, "comment_id": 82979440, "body": "@eran The comparison was  &quot;growing buffers&quot; vs. &quot;allocate all and load&quot;, i.e. the OP&#39;s algorithm vs. anything that uses dynamic buffers. <code>mmap</code> will indeed be a somewhat faster for the latter. On large blocks fully allocated and loaded in one go, <code>mmap</code> isn&#39;t significantly faster than traditional file-based operations. It plays its cards when random access to random portions in large files that don&#39;t fit in memory as a whole is required."}], "tags": [], "owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "is_accepted": true, "score": 2, "last_activity_date": 1514387172, "last_edit_date": 1514387172, "creation_date": 1514386318, "answer_id": 47994191, "question_id": 47993429, "link": "https://stackoverflow.com/questions/47993429/creating-and-managing-a-byte-buffer-in-memory-in-c-and-or-c-that-can-automat/47994191#47994191", "title": "Creating and managing a byte buffer in memory, in C and/or C++, that can automatically resize as needed", "body": "<p>Nothing wrong with your approach as long as you can make sure the file doesn't change size between steps 3 and 5. It is, actually, the solution that has most probably the best performance.</p>\n\n<p>In case you realize (by counting bytes read vs. buffer size) while <code>read</code>ing the file that there is more to read but you run out of buffer space, you can always use <code>realloc</code> to increase the buffer by an arbitrary amount. How much that \"arbitrary amount\" would be depends on the nature of your application and your expected memory situation. If memory is plenty, you might want to over-allocate by factor 1.5 and <code>realloc</code> to the actual size once you have read the complete file.</p>\n\n<p>Dynamically re-allocating the buffer has, however, a bit of a speed penalty and might not always be possible when you are working with huge buffers and are already tight on memory (most implementations of <code>realloc</code> will temporarily need to hold both the too-small and the re-sized buffer in memory). </p>\n\n<p>Depending on the buffer sizes, your program might also suffer from a performance penalty when resizing the buffer - after all, the contents you already read needs to be copied over to the new, re-sized, buffer.</p>\n\n<p>In C++, you would probably use a <code>vector</code> to do the same thing and may run into the very same problems.  </p>\n\n<p>One last method to load large files is memory mapping - But this also has the requirement that you need to know how much space you need.</p>\n"}], "owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 1, "accepted_answer_id": 47994191, "answer_count": 1, "score": 2, "last_activity_date": 1514400844, "creation_date": 1514382908, "last_edit_date": 1514400844, "question_id": 47993429, "link": "https://stackoverflow.com/questions/47993429/creating-and-managing-a-byte-buffer-in-memory-in-c-and-or-c-that-can-automat", "title": "Creating and managing a byte buffer in memory, in C and/or C++, that can automatically resize as needed", "body": "<p>When programming in C and/or C++, how does one set up byte-buffer in-memory structure, such that it can automatically resize as the situation warrants?</p>\n\n<p>Often, I will want to write some unknown quantity bytes to a buffer, without knowing how much space is needed. I feel like this is a fundamental I/O programming concern \u2013 and I don\u2019t know how to approach the problem, let alone solve it.</p>\n\n<p>Specifically, I\u2019m doing this I/O to process image data \u2013 the sizes can vary from a few kilobytes on up to hundreds of megabytes, depending on compression settings and (many!) other factors.</p>\n\n<p>My current workaround, in many cases, is to:</p>\n\n<ol>\n<li><code>open()</code> a write-mode descriptor on a temporary file, and <code>write()</code> my indeterminate quantity of bytes to this file;</li>\n<li>then call <code>fsync()</code> and subsequently <code>close()</code> the descriptor;</li>\n<li>use <code>stat()</code> to get the size of the file;</li>\n<li>re-<code>open()</code> the temporary file in read mode;</li>\n<li>and <em>then</em> finally <code>read()</code> the entire file back into a newly allocated, properly-sized buffer.</li>\n</ol>\n\n<p>My question, therefore, is a two-parter: one, how problematic is my workaround? and two: how can I accomplish this task using only in-memory structures?</p>\n"}, {"tags": ["c++", "vba", "excel", "dll", "sqlite"], "comments": [{"owner": {"reputation": 534, "user_id": 2398630, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/423e9611f4212cb6f66cd30c9da6410f?s=128&d=identicon&r=PG", "display_name": "Siyon DP", "link": "https://stackoverflow.com/users/2398630/siyon-dp"}, "edited": false, "score": 0, "creation_date": 1514385286, "post_id": 47993365, "comment_id": 82955984, "body": "Is your dll tested in the C++ environment?"}, {"owner": {"reputation": 7361, "user_id": 3607273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6cdb2fe7b9c6b5d10eaed35e2f16fa67?s=128&d=identicon&r=PG&f=1", "display_name": "S Meaden", "link": "https://stackoverflow.com/users/3607273/s-meaden"}, "edited": false, "score": 0, "creation_date": 1514385287, "post_id": 47993365, "comment_id": 82955985, "body": "Is the location of sqlite3.dll in your PATH environment variable, if not then consider adding it.  Alternatively, if you are controlling its install location then you could load it manually with LoadLibrary from the specific place."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1514392885, "post_id": 47993365, "comment_id": 82959357, "body": "Are you sure there isn&#39;t an architecture mismatch (32/64 bit) between your <i>.dll</i> and <i>sqlite3.dll</i>?"}, {"owner": {"reputation": 171, "user_id": 8079802, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/292fddeceee3f7a6f3f9ef0b34dba44b?s=128&d=identicon&r=PG&f=1", "display_name": "techie", "link": "https://stackoverflow.com/users/8079802/techie"}, "reply_to_user": {"reputation": 534, "user_id": 2398630, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/423e9611f4212cb6f66cd30c9da6410f?s=128&d=identicon&r=PG", "display_name": "Siyon DP", "link": "https://stackoverflow.com/users/2398630/siyon-dp"}, "edited": false, "score": 0, "creation_date": 1514438133, "post_id": 47993365, "comment_id": 82972279, "body": "@TSion.D.P Yes, it is working. I debugged code using VBA(Excel) and it is working fine."}, {"owner": {"reputation": 171, "user_id": 8079802, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/292fddeceee3f7a6f3f9ef0b34dba44b?s=128&d=identicon&r=PG&f=1", "display_name": "techie", "link": "https://stackoverflow.com/users/8079802/techie"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1514438695, "post_id": 47993365, "comment_id": 82972439, "body": "@CristiFati already checked.. there is no mismatch."}], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 8079802, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/292fddeceee3f7a6f3f9ef0b34dba44b?s=128&d=identicon&r=PG&f=1", "display_name": "techie", "link": "https://stackoverflow.com/users/8079802/techie"}, "is_accepted": false, "score": 0, "last_activity_date": 1514453024, "creation_date": 1514453024, "answer_id": 48004809, "question_id": 47993365, "link": "https://stackoverflow.com/questions/47993365/error-53-file-not-found-instead-all-dlls-are-present-in-path/48004809#48004809", "title": "Error 53 : File not found instead all DLL&#39;s are present in path", "body": "<p>The <code>cryptlib.lib</code> was missing on which <code>sqlite3.dll</code> was dependent. I have provided the .lib file and it worked.</p>\n"}], "owner": {"reputation": 171, "user_id": 8079802, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/292fddeceee3f7a6f3f9ef0b34dba44b?s=128&d=identicon&r=PG&f=1", "display_name": "techie", "link": "https://stackoverflow.com/users/8079802/techie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 409, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514453024, "creation_date": 1514382644, "last_edit_date": 1514382918, "question_id": 47993365, "link": "https://stackoverflow.com/questions/47993365/error-53-file-not-found-instead-all-dlls-are-present-in-path", "title": "Error 53 : File not found instead all DLL&#39;s are present in path", "body": "<p>I created a DLL(using C++) which is dependent on <code>sqlite3.dll</code>(for database access &amp; sqlcipher) and I am trying to access it using <code>VBA</code>. In <code>VBA</code> I am using following declaration  :</p>\n\n<pre><code>Declare Function GetData_VBA Lib \"xyz.dll\" (ByVal path As String, ByVal id As String, ByRef inputArr() As String, ByRef output() As String) As Boolean\n</code></pre>\n\n<p>Earlier when the DLL was not dependent on <code>sqlite3.dll</code> it was working fine, but when I introduced <code>sqlite3.dll</code> it started throwing error </p>\n\n<blockquote>\n  <p>Error 53 : xyz.dll not found</p>\n</blockquote>\n\n<p>I tried changing the declaration to </p>\n\n<pre><code> Declare Function GetData_VBA Lib \"C:\\documents\\user\\...\\projects\\xyz.dll\" (ByVal path As String, ByVal id As String, ByRef inputArr() As String, ByRef output() As String) As Boolean\n</code></pre>\n\n<p>but still its showing the same thing. I used <code>dependency walker</code> to check all the dependency on <code>xyz.dll</code>. I tried putting all <code>xyz.dll</code> &amp; <code>sqlite3.dll</code> in same location but still same error.</p>\n"}, {"tags": ["c++", "visual-c++", "struct", "iostream", "ifstream"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1514382916, "post_id": 47993296, "comment_id": 82954938, "body": "You are saving pointers in your file instead of the actual data."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1514383285, "post_id": 47993296, "comment_id": 82955087, "body": "The immediate problem is that you are passing the argument to the various fields by pointer. Remove the <code>&amp;</code>: the input opwrators take the values by reference. ... and, most importantly: you <b>always</b> need to check <i>*after</i> the read operation whether it was successful (if you just learn the last point you just made a huge leap forward)."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1514384238, "last_edit_date": 1514384238, "creation_date": 1514383103, "answer_id": 47993467, "question_id": 47993296, "link": "https://stackoverflow.com/questions/47993296/read-write-struct-from-text-file-in-c/47993467#47993467", "title": "read/write struct from text file in c++", "body": "<p>Read about <a href=\"https://en.wikipedia.org/wiki/File_format\" rel=\"nofollow noreferrer\">file formats</a>. You may need to specify yours (on paper....), then you could use some <a href=\"https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form\" rel=\"nofollow noreferrer\">EBNF</a> notation for that specification.</p>\n\n<p>Your current code is probably misusing the <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt2\" rel=\"nofollow noreferrer\"><code>operator &gt;&gt;</code></a> and the <a href=\"http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt\" rel=\"nofollow noreferrer\"><code>operator &lt;&lt;</code></a>. You don't want to write pointers on file (even if you technically could), because reading them again is meaningless (because of <a href=\"https://en.wikipedia.org/wiki/Address_space_layout_randomization\" rel=\"nofollow noreferrer\">ASLR</a>, and because addresses are not guaranteed to stay the same from one run to the next, or from one executable to your program slightly improved tomorrow).</p>\n\n<p>You might want to do some binary IO (but I don't recommend doing this). Then you would use some binary input function like <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/read\" rel=\"nofollow noreferrer\"><code>std::istream::read</code></a> to read a record (e.g. some <a href=\"https://en.wikipedia.org/wiki/Passive_data_structure\" rel=\"nofollow noreferrer\">POD</a> <code>struct</code>). But you cannot (meaningfully) do binary IO on complex classes, such as your <code>CustDetails</code>, containing non-POD data such as <code>std::string</code>-s.</p>\n\n<p>Actually, data is often more important than the software reading and writing it. So it makes sense to have some more flexible data format (e.g. you want to be able, in two years, to have an <em>improved</em> version of your code read some data written by some <em>old</em> version of your code).</p>\n\n<p>Hence, it is often preferable to use some textual format (and you need to define and document it). You could choose some existing ones, such as <a href=\"http://json.org/\" rel=\"nofollow noreferrer\">JSON</a>, <a href=\"http://yaml.org/\" rel=\"nofollow noreferrer\">YAML</a>, <a href=\"https://en.wikipedia.org/wiki/XML\" rel=\"nofollow noreferrer\">XML</a>, <a href=\"https://en.wikipedia.org/wiki/S-expression\" rel=\"nofollow noreferrer\">S-expressions</a>. You'll find many libraries to help you (e.g. <a href=\"https://github.com/open-source-parsers/jsoncpp\" rel=\"nofollow noreferrer\">jsoncpp</a> for JSON etc etc...). Or you could also use your own <a href=\"https://en.wikipedia.org/wiki/Parsing\" rel=\"nofollow noreferrer\">parsing</a> techniques.</p>\n\n<p>You could also consider some <a href=\"https://en.wikipedia.org/wiki/Database\" rel=\"nofollow noreferrer\">database</a>, perhaps as simple as <a href=\"http://sqlite.org/\" rel=\"nofollow noreferrer\">sqlite</a>.</p>\n\n<p>Read also about <a href=\"https://en.wikipedia.org/wiki/Serialization\" rel=\"nofollow noreferrer\">serialization</a>, <a href=\"https://en.wikipedia.org/wiki/Application_checkpointing\" rel=\"nofollow noreferrer\">application checkpointing</a>, <a href=\"https://en.wikipedia.org/wiki/Persistence_(computer_science)\" rel=\"nofollow noreferrer\">persistence</a>, and <a href=\"https://en.wikipedia.org/wiki/Software_portability\" rel=\"nofollow noreferrer\">portability</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 22, "user_id": 8091283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8b5705fce81cc4c85eb5188479b9d24?s=128&d=identicon&r=PG", "display_name": "deepjyoti30", "link": "https://stackoverflow.com/users/8091283/deepjyoti30"}, "is_accepted": true, "score": 0, "last_activity_date": 1514392576, "creation_date": 1514392576, "answer_id": 47995606, "question_id": 47993296, "link": "https://stackoverflow.com/questions/47993296/read-write-struct-from-text-file-in-c/47995606#47995606", "title": "read/write struct from text file in c++", "body": "<p>In loadDataFromFile() just before</p>\n\n<pre><code>cout&lt;&lt;\"\";\n</code></pre>\n\n<p>replace the '>>' with ';'.</p>\n\n<p>We cannot use >> operator with cout.</p>\n\n<p>Although there is a better and easier way to do what you are doing.\nfstream.h has functions to directly write and read objects of classes or structures.</p>\n\n<p>Here's the syntax:</p>\n\n<pre><code>&lt;stream name&gt;.read((char*)&lt;object name&gt;,sizeof(&lt;struct/class name&gt;));\n</code></pre>\n\n<p>So your loadDataFromFile can be simplified as:</p>\n\n<pre><code>CustDetails loadDataFromFile ()\n{\nCustDetails x;\nifstream  dimensionsInfile; \ndimensionsInfile.open (\"storage.txt\");                                                              \n     // write struct data from file  \n     dimensionsInfile.read((char*) CustDetails, sizeof(x));   \n     cout&lt;&lt;\"Data loaded\"&lt;&lt;endl;\n     return x;\n}\n</code></pre>\n\n<p>Similarly write definition of Write function. It will save you a lot of time and trouble.</p>\n"}], "owner": {"reputation": 3, "user_id": 9145335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5e63781e91056ce0539039e6c7ac480?s=128&d=identicon&r=PG&f=1", "display_name": "adam101", "link": "https://stackoverflow.com/users/9145335/adam101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6985, "favorite_count": 1, "accepted_answer_id": 47995606, "answer_count": 2, "score": 0, "last_activity_date": 1514392576, "creation_date": 1514382339, "question_id": 47993296, "link": "https://stackoverflow.com/questions/47993296/read-write-struct-from-text-file-in-c", "title": "read/write struct from text file in c++", "body": "<p>I have been stuck in the same place with this code for a while. And finally decided to ask it online. Any help would be appreciated. </p>\n\n<p>I have created a struct and I'm able to add data to the struct but still not sure whether I'm following the correct methodology. The main problem lies when I try to read the data from the text file. </p>\n\n<p>I seem to be getting an error saying :</p>\n\n<blockquote>\n  <p>error C2678: binary '>>' : no operator found which takes a left-hand\n  operand of type 'std::ifstream' (or there is no acceptable conversion)</p>\n</blockquote>\n\n<p>The Struct:</p>\n\n<pre><code>struct bankDetails              //structure for bank details\n{\n    int acc_number;\n    double acc_balance;\n    double deposit_amt;\n    double withdraw_amt;\n    double interest_rate;\n    //char acc_type;\n\n\n};\n\n\nstruct CustDetails                     //structure for account details\n{\n    string cust_name;\n    string cust_pass;\n    bankDetails bankAccounts[99];\n};\n</code></pre>\n\n<p>This is the code I wrote to read from the file.</p>\n\n<pre><code>CustDetails loadDataFromFile ()\n{\n    CustDetails x;\n    ifstream  dimensionsInfile; \n    dimensionsInfile.open (\"storage.txt\");\n    for (int i=0; i &lt; 2; i++)                                                               \n    {   // write struct data from file  \n        dimensionsInfile&gt;&gt;\n        &amp;x.bankAccounts[i].acc_balance&gt;&gt;\n        &amp;x.bankAccounts[i].acc_number&gt;&gt;\n        &amp;x.cust_nam&gt;&gt;\n        &amp;x.cust_pass&gt;&gt;\n        &amp;x.bankAccounts[i].withdraw_amt&gt;&gt;\n        &amp;x.bankAccounts[i].deposit_amt&gt;&gt;\n        &amp;x.bankAccounts[i].interest_rate&gt;&gt;\n        cout&lt;&lt;\"Data loaded\"&lt;&lt;endl;\n    } \n    return x;\n\n}\n</code></pre>\n\n<p>The code to write into the file:</p>\n\n<pre><code>void details_save(int num,CustDetails x)\n{\n\n    string  filePath = \"storage.txt\";                                                                               \n    ofstream  dimensionsOutfile;                                                                    \n\n    dimensionsOutfile.open (\"storage.txt\");                                             \n    if (!dimensionsOutfile)\n        {\n            cout&lt;&lt;\"Cannot load file\"&lt;&lt;endl;\n            return ;\n        }\n    else\n        {\n            for (int i=0; i &lt; num; i++)                                                             \n                {   // write struct data from file  \n                    dimensionsOutfile&lt;&lt;\n                    &amp;x.bankAccounts[i].acc_balance&lt;&lt;\n                    &amp;x.bankAccounts[i].acc_number&lt;&lt;\n                    &amp;x.cust_name&lt;&lt;\n                    &amp;x.cust_pass&lt;&lt;\n                    &amp;x.bankAccounts[i].withdraw_amt&lt;&lt;\n                    &amp;x.bankAccounts[i].deposit_amt&lt;&lt;\n                    &amp;x.bankAccounts[i].interest_rate&lt;&lt;\n                    cout&lt;&lt;\" Customer 1 stored\"&lt;&lt;endl;\n                }\n            cout &lt;&lt;\"All details have been successfully saved\"&lt;&lt;endl;\n            dimensionsOutfile.close();\n        }\n\n}\n</code></pre>\n\n<p>Part of the main function:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;string&gt;\n#include &lt;string.h&gt;\n#include &lt;ctime&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nint main()\n\n{\n    int maxNum;\n    CustDetails c;\n    c = loadDataFromFile(); //loads data from the file\n\n    {\n            //This part adds and changes values\n    }\n\n    details_save(maxNum, c); //saves data back to the file\n        return 0;\n}\n</code></pre>\n\n<p>I'm a beginner in C++ any help would be much appreciated.\nCheers!!</p>\n"}, {"tags": ["c++", "timer", "allegro"], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 9145266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc4f54a39775588886c9d789f136b42e?s=128&d=identicon&r=PG&f=1", "display_name": "BanditBloodwyn", "link": "https://stackoverflow.com/users/9145266/banditbloodwyn"}, "is_accepted": true, "score": 0, "last_activity_date": 1516190040, "creation_date": 1516190040, "answer_id": 48300545, "question_id": 47993289, "link": "https://stackoverflow.com/questions/47993289/using-multiple-timers-in-allegro-5/48300545#48300545", "title": "Using multiple timers in Allegro 5", "body": "<p>I accidentally initialized the timers instance twice, which created new timers with (of course) different adresses. But in the event queue the OLD ones were registered, because of my stupid organization. I fixed that by putting the queue registration to the InitTimer function and fixed the bug with the double timer initialization.\nNow everything works perfectly!</p>\n"}], "owner": {"reputation": 33, "user_id": 9145266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc4f54a39775588886c9d789f136b42e?s=128&d=identicon&r=PG&f=1", "display_name": "BanditBloodwyn", "link": "https://stackoverflow.com/users/9145266/banditbloodwyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 2, "accepted_answer_id": 48300545, "answer_count": 1, "score": 1, "last_activity_date": 1517147027, "creation_date": 1514382298, "last_edit_date": 1517147027, "question_id": 47993289, "link": "https://stackoverflow.com/questions/47993289/using-multiple-timers-in-allegro-5", "title": "Using multiple timers in Allegro 5", "body": "<p>I watched multiple tutorials about using multiple timers in Allegro, but that way of programming doesn't work for me. \nThe problem is that the source adress never matches to the timer adress i want to watch.</p>\n\n<p>I use multiple classes/instances to encapsulate my code, because it will be very complex in the future. The main loop of my game is located in the Game class/instance. The timers and the events are encapsulated in an Engine class/instance, that is a member of the Game instance.</p>\n\n<p><strong>Game.cpp:</strong></p>\n\n<pre><code>void Game::GameLoop() {   \n  al_wait_for_event(GameEngine.LoopTimerEvent_queue, &amp;GameEngine.LoopTimerEvent);\n\n  if (GameEngine.LoopTimerEvent.type == ALLEGRO_EVENT_TIMER)\n  {\n    // DEBUG: EVENT SOURCE ADRESSES DON'T MATCH TO THE TIMER ADRESSES\n    std::cout &lt;&lt; \"TimerEvent: \" &lt;&lt; GameEngine.LoopTimerEvent.timer.source &lt;&lt; \" \" &lt;&lt; GameEngine.VSyncTimer &lt;&lt; \" \" &lt;&lt; GameEngine.LoopTimer &lt;&lt; \" \" &lt;&lt; GameEngine.InGameTimer &lt;&lt; \"\\n\";\n\n    if (GameEngine.LoopTimerEvent.timer.source == GameEngine.InGameTimer) \n    { \n        std::cout &lt;&lt; \"InGameTimerEvent\"; \n    }\n    if (GameEngine.LoopTimerEvent.timer.source == GameEngine.VSyncTimer) \n    { \n        std::cout &lt;&lt; \"VSyncTimerEvent\"; \n    }\n    if (GameEngine.LoopTimerEvent.timer.source == GameEngine.LoopTimer) \n    { \n        std::cout &lt;&lt; \"LoopTimerEvent\"; \n    }\n  }  \n}\n</code></pre>\n\n<p><strong>Engine.cpp:</strong></p>\n\n<pre><code>Engine::Engine() {\n  if (al_init()) std::cout &lt;&lt; \"allegro initialized\\n\";\n  else std::cout &lt;&lt; \"failed to initialize allegro!\\n\";\n\n  if (InitTimer()) std::cout &lt;&lt; \"Timer initialized\\n\";\n  else std::cout &lt;&lt; \"failed to initialize timer!\\n\";\n\n  LoopTimerEvent_queue = al_create_event_queue();\n\n  al_register_event_source(LoopTimerEvent_queue, al_get_timer_event_source(LoopTimer));\n  al_register_event_source(LoopTimerEvent_queue, al_get_timer_event_source(VSyncTimer));\n  al_register_event_source(LoopTimerEvent_queue, al_get_timer_event_source(InGameTimer));\n  std::cout &lt;&lt; \"Event queues initialized\\n\"; \n}\n\n\nbool Engine::InitTimer() {\n  LoopTimer = al_create_timer(1.0);\n  if (!LoopTimer) \n  {\n    std::cout &lt;&lt; \"failed to initialize LoopTimer!\\n\";\n    return false;\n  }\n\n  InGameTimer = al_create_timer(1.0 / m_iTimeScale);\n  if (!InGameTimer)\n  {\n    std::cout &lt;&lt; \"failed to initialize InGameTimer!\\n\";\n    return false;\n  }\n\n  VSyncTimer = al_create_timer(1.0 / FPS);\n  if (!VSyncTimer)\n  {\n    std::cout &lt;&lt; \"failed to initialize VSyncTimer!\\n\";\n    return false;\n  }\n\n  al_start_timer(LoopTimer);\n  al_start_timer(VSyncTimer);\n  al_start_timer(InGameTimer);\n  std::cout &lt;&lt; \"Timers started\\n\";\n\n  return true;\n}\n</code></pre>\n\n<p><strong>Engine.h:</strong></p>\n\n<pre><code>class Engine {\npublic:\n  ALLEGRO_DISPLAY* pDisplay = NULL;\n  ALLEGRO_TIMER* VSyncTimer = NULL;\n  ALLEGRO_TIMER* LoopTimer = NULL;\n  ALLEGRO_TIMER* InGameTimer = NULL;\n  ALLEGRO_EVENT LoopTimerEvent;\n  ALLEGRO_EVENT_QUEUE* LoopTimerEvent_queue = NULL;\n\n  Logger EngineLogger;\n  EventHandler GameEvents;\n\n  private:\n  double m_iTimeScale = 2.0;\n\npublic:\n  Engine();\n  ~Engine();\n\n  bool InitEngine();\n  bool InitTimer();\n  bool InitDisplay();\n\n  void UpdateDisplay();\n\n  float GetTimeScale();\n  void SetTimeScale(float timescale);\n};\n</code></pre>\n\n<p><strong>Output</strong><br>\n<code>TimerEvent: 031A0D80 0326AF30 0326A380 0326B090</code></p>\n\n<p>\"TimerEvent: \" [actual event adress] [VSyncTimer adress] [LoopTimer adress] [InGameTimer adress]</p>\n\n<p>Where is the problem with these adresses?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 0, "creation_date": 1514382318, "post_id": 47993248, "comment_id": 82954636, "body": "That is a general error that indicates your program triggered some undefined behavior. It likely means you have a pointer error somewhere -- writing to memory it shouldn&#39;t. (Also, your program is incomplete.)"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1514382358, "post_id": 47993248, "comment_id": 82954658, "body": "<code>liste* table[100000];</code> and then <code>table[x]-&gt;createnode(word);</code>. Where do you allocate/initialize <code>table[x]</code>?"}, {"owner": {"reputation": 1, "user_id": 9145342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aec76db5ad16f757e0f3e6a68a3017f?s=128&d=identicon&r=PG&f=1", "display_name": "Redout", "link": "https://stackoverflow.com/users/9145342/redout"}, "edited": false, "score": 0, "creation_date": 1514382767, "post_id": 47993248, "comment_id": 82954856, "body": "oh, i didn&#39;t realized, i need to allocate/initialize it. all tutorials i watched didn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9145342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aec76db5ad16f757e0f3e6a68a3017f?s=128&d=identicon&r=PG&f=1", "display_name": "Redout", "link": "https://stackoverflow.com/users/9145342/redout"}, "edited": false, "score": 0, "creation_date": 1514383035, "post_id": 47993409, "comment_id": 82954978, "body": "it was my sorry excuse to initialize. As for the rest you are right."}], "tags": [], "owner": {"reputation": 405, "user_id": 1627996, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4RKS6.png?s=128&g=1", "display_name": "the_summer", "link": "https://stackoverflow.com/users/1627996/the-summer"}, "is_accepted": true, "score": 1, "last_activity_date": 1514382817, "creation_date": 1514382817, "answer_id": 47993409, "question_id": 47993248, "link": "https://stackoverflow.com/questions/47993248/linked-list-null-pointer-error-c/47993409#47993409", "title": "linked list null pointer error c++", "body": "<p>Here you create an array of 10000 liste-pointers</p>\n\n<pre><code>liste* table[100000];\n</code></pre>\n\n<p>but you never create any liste objects for them to point to. \nLater you want to call the member function </p>\n\n<pre><code>table[x]-&gt;createnode(word);\n</code></pre>\n\n<p>As your pointers in table are still not initialized your call crashes.</p>\n\n<p>My assumption is that you want to have <em>table</em> to be an array of liste objects</p>\n\n<pre><code>liste table[100000];\n</code></pre>\n\n<p>What I still don't get is why you call <em>liste()</em> (a constructor?) in your <em>createNode</em> function.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9145342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aec76db5ad16f757e0f3e6a68a3017f?s=128&d=identicon&r=PG&f=1", "display_name": "Redout", "link": "https://stackoverflow.com/users/9145342/redout"}, "is_accepted": false, "score": 0, "last_activity_date": 1514384021, "creation_date": 1514384021, "answer_id": 47993659, "question_id": 47993248, "link": "https://stackoverflow.com/questions/47993248/linked-list-null-pointer-error-c/47993659#47993659", "title": "linked list null pointer error c++", "body": "<p>apparently not initializing your class array causes this.adding this fixed it.</p>\n\n<pre><code>for ( i = 0; i &lt; 100000; i++)\n        {\n            table[i] = new liste;\n\n        }\n</code></pre>\n\n<p>note to self : do not watched tutorials about code implementation if they are telling on board. people might forget things.</p>\n"}], "owner": {"reputation": 1, "user_id": 9145342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aec76db5ad16f757e0f3e6a68a3017f?s=128&d=identicon&r=PG&f=1", "display_name": "Redout", "link": "https://stackoverflow.com/users/9145342/redout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 0, "accepted_answer_id": 47993409, "answer_count": 2, "score": -1, "last_activity_date": 1514384021, "creation_date": 1514382132, "question_id": 47993248, "link": "https://stackoverflow.com/questions/47993248/linked-list-null-pointer-error-c", "title": "linked list null pointer error c++", "body": "<p>i have a project to count from a file. Since it is a school project i am not allowed to use most libraries but basic ones. thus i decided to use hash map. but my linked list gives a null pointer exception. to be precise \"Exception thrown: read access violation.\n<strong>this</strong> was 0xCCCCCCCC. occurred\". i searched a lot to find a solution but i couldn't find anything. Thank you for your time.</p>\n\n<pre><code>public: liste() {\n        head = NULL;\n        tail = NULL;\n    }\n\n    void createnode(string value) {\n        liste();\n        node* temp = new node;\n        temp-&gt;data = value;\n        temp-&gt;next = NULL;\n\n        if (head == NULL) { // get error here!!!!\n\n            head = temp;\n            tail = temp;\n            temp = NULL;\n        }\n\n        else {\n            tail-&gt;next = temp;\n            temp = tail;\n        }\n    }\n\n        int main()\n    {   \n        struct site {\n            int count;\n            string name;\n        };  \n        unsigned long int i=0;\n        unsigned int x=0;\n        ifstream theFile(\"access_log\");\n        string word;\n        liste* table[100000];\n        site list[10];\n\n        while (theFile &gt;&gt; word) {   \n            if (word.find(\".\")!=-1) {\n                if (word.find(\"H\") == -1) {\n                    x=(int)hashG(word);\n                    if (x &lt; 100000) {                   \n                        table[x]-&gt;createnode(word);\n                    }\n                }\n            }\n\n        }\n        for (int i = 0; i &lt; 100000; i++) {\n            cout &lt;&lt; table[i]-&gt;length() &lt;&lt; \"   \" &lt;&lt; table[i]-&gt;getData() &lt;&lt; endl;\n        }   \n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c++", "linux", "qt"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1514382054, "post_id": 47993164, "comment_id": 82954526, "body": "According to the documentation tiff is supported: <a href=\"http://doc.qt.io/qt-5/qtimageformats-index.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qtimageformats-index.html</a>"}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1514383770, "post_id": 47993164, "comment_id": 82955315, "body": "It might be a case where qt is configured to use system tiff support but it is not present. Which is the reason I prefer custom qt builds that bundle image formats just to be on the safe side."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7907861"}, "edited": false, "score": 0, "creation_date": 1514385282, "post_id": 47993164, "comment_id": 82955982, "body": "I have read Qt documentation many times. But I do not to use it. What everything  I supposed to do if I want to use it on CentOS and Ubuntu?"}], "answers": [{"tags": [], "owner": {"reputation": 183, "user_id": 8027551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207196789775054/picture?type=large", "display_name": "Zharios", "link": "https://stackoverflow.com/users/8027551/zharios"}, "is_accepted": false, "score": 0, "last_activity_date": 1514386650, "creation_date": 1514386650, "answer_id": 47994264, "question_id": 47993164, "link": "https://stackoverflow.com/questions/47993164/how-to-convert-tiff-or-pnm-to-jpeg-in-qt/47994264#47994264", "title": "How to convert tiff or pnm to jpeg in Qt", "body": "<p>You could use <a href=\"http://www.gdal.org/index.html\" rel=\"nofollow noreferrer\">GDAL</a> to open tiff file, and them create a QImage. This QImage can be save in jpg format.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7907861"}, "edited": false, "score": 0, "creation_date": 1514407757, "post_id": 47994268, "comment_id": 82965280, "body": "I have to build my project with this option or I have to download Qt resources and build it wit this option?"}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1514413509, "post_id": 47994268, "comment_id": 82967156, "body": "@PeterPolak does <code>QImageReader::supportedImageFormats()</code> list tiff for you?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7907861"}, "edited": false, "score": 0, "creation_date": 1514440253, "post_id": 47994268, "comment_id": 82972806, "body": "I see there tiff. But, if I load data from QByteArray to QImage, QImage object holds invalid picture."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7907861"}, "edited": false, "score": 0, "creation_date": 1514446175, "post_id": 47994268, "comment_id": 82974934, "body": "The problem is not in converting tiff format to QImage but in loading QByteArray data into QImage object. If I will try QImage::fromFile(tiff file), it works."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1514453964, "post_id": 47994268, "comment_id": 82978159, "body": "@PeterPolak it is possible that the API cannot deduce the file format from the date alone, in which event it might be helpful to provide the specific format."}], "tags": [], "owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "is_accepted": false, "score": 0, "last_activity_date": 1514386677, "creation_date": 1514386677, "answer_id": 47994268, "question_id": 47993164, "link": "https://stackoverflow.com/questions/47993164/how-to-convert-tiff-or-pnm-to-jpeg-in-qt/47994268#47994268", "title": "How to convert tiff or pnm to jpeg in Qt", "body": "<p>Qt provides tiff support via libtiff.</p>\n\n<p>I think the default configuration option is that it uses whatever the system provides. Which means your system should have libtiff installed.</p>\n\n<p>You can also do a custom qt build where you provide the <code>-qt-libtiff</code> configuration flag, which will use the bundled lib to incorporate it into the qt binaries rather than use an external system library.</p>\n\n<p>Another consideration to make is that tiff support is not in the \"Qt Essentials\" modules, but part of \"Qt Add-Ons\" in the face of the <a href=\"http://doc.qt.io/qt-5/qtimageformats-index.html\" rel=\"nofollow noreferrer\">Qt Image Formats</a> module.</p>\n\n<p>Lastly, you can still resort to the option to scan to a file, then also convert the file to a supported format via an external tool.</p>\n"}, {"tags": [], "owner": {"reputation": 5, "user_id": 2834035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbe06d9dd7a0787d0fd9b0eaa4d0507a?s=128&d=identicon&r=PG", "display_name": "Totktonado", "link": "https://stackoverflow.com/users/2834035/totktonado"}, "is_accepted": false, "score": 0, "last_activity_date": 1514467888, "creation_date": 1514467888, "answer_id": 48008430, "question_id": 47993164, "link": "https://stackoverflow.com/questions/47993164/how-to-convert-tiff-or-pnm-to-jpeg-in-qt/48008430#48008430", "title": "How to convert tiff or pnm to jpeg in Qt", "body": "<p>qt knows tiff format. Following code works for me:</p>\n\n<pre><code>QFile f(\"Untitled.tiff\");\nif (!f.open(QIODevice::ReadOnly)) {\n    return;\n}\nQByteArray ar(f.size(), ' ');\nf.read(ar.data(), ar.size());\nQImage img;\n\nimg.loadFromData(ar);\nif (!img.isNull())\n{\n    QPixmap image = QPixmap::fromImage(img);\n    ui.tiffLabel-&gt;setFixedSize(img.size());\n    ui.tiffLabel-&gt;setPixmap(image);\n}\n</code></pre>\n\n<p>make sure you satisfy all the dll dependencies (I supect qtiff.dll)</p>\n\n<p>make sure your <code>QByteArray ba</code> contains image</p>\n\n<p>and, possible, is good idea to use <code>loadFromData</code> insted of <code>fromData</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7907861"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 587, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1514467888, "creation_date": 1514381772, "last_edit_date": 1514411241, "question_id": 47993164, "link": "https://stackoverflow.com/questions/47993164/how-to-convert-tiff-or-pnm-to-jpeg-in-qt", "title": "How to convert tiff or pnm to jpeg in Qt", "body": "<p>I use scanner. Ihe scanner output is in tiff or pnm format. But I cannot load these formats into QImage. </p>\n\n<pre><code>QProcess process;\nprocess.start(\"scanimage -d epjitsu --format=tiff\");\nprocess.waitForFinished(240000);\nQByteArray ba = process.readAllStandardOutput();\nQImage image;\nimage.fromData(ba);\n</code></pre>\n\n<p>image.fromData(ba) will fail, because Qt does not know tiff format. Only way, how to convert it, is to store bytearray to file and use linux utility convert to convert it. But I do not want to go by this way. I want to do it somehow in Qt.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1514381282, "post_id": 47993017, "comment_id": 82954164, "body": "Read the <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\">notes section</a>."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1514381329, "post_id": 47993017, "comment_id": 82954192, "body": "Did you search before posting? We&#39;ll probably find that equivalent questions have been asked many times over. See e.g. <a href=\"https://www.google.co.uk/search?q=stackoverflow+c%2B%2B+getline+only+one+site:stackoverflow.com\" rel=\"nofollow noreferrer\">google.co.uk/&hellip;</a>"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1514381433, "post_id": 47993017, "comment_id": 82954244, "body": "Easy solution, read all user input with getline, including <i>n</i> (then use for example stringstream to parse that)."}, {"owner": {"reputation": 179, "user_id": 6671115, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/afb31cad947f2eada3740c6a8c7c9b20?s=128&d=identicon&r=PG&f=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/6671115/abhi"}, "edited": false, "score": 0, "creation_date": 1514381923, "post_id": 47993017, "comment_id": 82954457, "body": "Actually want to use vector, particularly string vector to read this type of input and how to do that. I didn&#39;t find the same on duplicate question link"}], "owner": {"reputation": 179, "user_id": 6671115, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/afb31cad947f2eada3740c6a8c7c9b20?s=128&d=identicon&r=PG&f=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/6671115/abhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1514381354, "answer_count": 0, "score": 0, "last_activity_date": 1514381137, "creation_date": 1514381137, "question_id": 47993017, "link": "https://stackoverflow.com/questions/47993017/reading-vector-string", "closed_reason": "Duplicate", "title": "Reading Vector string", "body": "<p>I am new to C++ and learning vectors.\nWant to read input as below and using string vectors.</p>\n\n<pre><code>2\nstack\noverflow\n\n3\nstack\nheap\noverflow\n</code></pre>\n\n<p>Below is my code.Here, getting only 1 string as output.\nPlease point out where I am making mistake.</p>\n\n<pre><code>int main() {\nvector&lt;string&gt; my_strings;\nstring buf;\nint n;\n\ncin &gt;&gt; n;\nfor(int i=0;i&lt;n;i++){\n    getline(cin,buf);\n    my_strings.push_back(buf);\n}\nfor(int i=0;i&lt;n;i++){\n    cout &lt;&lt;  my_strings[i] &lt;&lt; endl;\n}\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "pure-virtual", "downcast", "upcasting"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1514380365, "post_id": 47992791, "comment_id": 82953756, "body": "User can only see <code>B</code> then the methods need to be pure virtual methods of <code>B</code> and implemented in <code>D</code>.  Look up <i>&quot;interface&quot;</i> classes for C++."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 3, "creation_date": 1514380424, "post_id": 47992791, "comment_id": 82953786, "body": "<i>&quot;I&#39;m confused about what happens when a user of my library attempts:&quot;</i> Why be confused, when you can just pretend to be such a user, and test/answer your questions for yourself? You would quickly find that calling methods of <code>D</code> on a <code>B</code> is a syntax error, if it wasn&#39;t already obvious. And if you wanted these to be <code>virtual</code> methods, the result would be obvious from the basic rules of how virtual functions (must) work. I don&#39;t feel this question demonstrates sufficient basic research to be useful."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1514380897, "post_id": 47992791, "comment_id": 82953990, "body": "If you don\u2019t allocate D on free store use a reference instead of a pointer a return value. If you allocate it on the free store use a unique_ptr."}, {"owner": {"reputation": 3491, "user_id": 659503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/kQXQL.png?s=128&g=1", "display_name": "TSG", "link": "https://stackoverflow.com/users/659503/tsg"}, "edited": false, "score": 0, "creation_date": 1514380906, "post_id": 47992791, "comment_id": 82953997, "body": "I was looking for a deeper discussion (not yes it compiles) - I&#39;ve rephrased"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1514380984, "post_id": 47992791, "comment_id": 82954027, "body": "<code>Is hiding the .h file for class D</code> why do you have a .h file?"}, {"owner": {"reputation": 3491, "user_id": 659503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/kQXQL.png?s=128&g=1", "display_name": "TSG", "link": "https://stackoverflow.com/users/659503/tsg"}, "edited": false, "score": 0, "creation_date": 1514381130, "post_id": 47992791, "comment_id": 82954101, "body": "mani66: How does a unique_ptr protect the complex methods of D?  I have a .h for D because it is one of the classes inside my library."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1514382917, "post_id": 47992791, "comment_id": 82954939, "body": "@TSG &quot;I was looking for a deeper discussion&quot; And, yet, SO is not a forum, so &quot;questions&quot; that asks for discussions are off-topic."}], "answers": [{"comments": [{"owner": {"reputation": 3491, "user_id": 659503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/kQXQL.png?s=128&g=1", "display_name": "TSG", "link": "https://stackoverflow.com/users/659503/tsg"}, "edited": false, "score": 0, "creation_date": 1514389169, "post_id": 47993555, "comment_id": 82957680, "body": "Very cool - I didn&#39;t know B could create a D.  Since the factory returns a D object is it automatically upcast to a B ?"}, {"owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "reply_to_user": {"reputation": 3491, "user_id": 659503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/kQXQL.png?s=128&g=1", "display_name": "TSG", "link": "https://stackoverflow.com/users/659503/tsg"}, "edited": false, "score": 0, "creation_date": 1514389260, "post_id": 47993555, "comment_id": 82957709, "body": "Yes it is. A pointer to B is all users can see, they know nothing about D (and don&#39;t want to know, trust me)."}], "tags": [], "owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "is_accepted": true, "score": 0, "last_activity_date": 1514383490, "creation_date": 1514383490, "answer_id": 47993555, "question_id": 47992791, "link": "https://stackoverflow.com/questions/47992791/upcast-downcasting-and-hiding-methods-in-c/47993555#47993555", "title": "Upcast, downcasting, and hiding methods in C++", "body": "<p>About question <strong>#1</strong>: yes, if you provide a factory method along with your 'simple' interface:</p>\n\n<pre><code>class B {\npublic:\n    static B * create();\n    virtual void simple() = 0;\n};\n</code></pre>\n\n<p>in B's implementation file (cpp):</p>\n\n<pre><code>B *B::create()\n{\n    return new D(); //or whatever 'hidden' implementation \n}\n</code></pre>\n\n<p>About your <strong>#2</strong>: hiding functionality means simplification in the first place, and is intended as a favour toward the library users, not a punishing constraint. So, hide the D class entirely and let the (good) users be happy with it.</p>\n"}], "owner": {"reputation": 3491, "user_id": 659503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/kQXQL.png?s=128&g=1", "display_name": "TSG", "link": "https://stackoverflow.com/users/659503/tsg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "closed_date": 1514389983, "accepted_answer_id": 47993555, "answer_count": 1, "score": -6, "last_activity_date": 1514383490, "creation_date": 1514380158, "last_edit_date": 1514381377, "question_id": 47992791, "link": "https://stackoverflow.com/questions/47992791/upcast-downcasting-and-hiding-methods-in-c", "closed_reason": "Needs details or clarity", "title": "Upcast, downcasting, and hiding methods in C++", "body": "<p>I'm writing a C++ library which needs to creates a complex object (D), but return to the user of my library a pointer to a simplified object (B) (hiding many of the methods of the complex object).  I have decided to implement this by returning a pointer to a simplified base class (B), and adding all of my complex functionality to a derived class (D) as follows:</p>\n\n<pre><code>class B {\n  virtual void simple() = 0;\n}\n\nclass D : public B {\n  void simple() { cout &lt;&lt; \"visible simple stuff\" ; }\n  void complex() { cout &lt;&lt; \"invisible complex stuff\" ; }\n}\n</code></pre>\n\n<p>Internally I create my object D, but I return an upcast pointer as follows:</p>\n\n<pre><code>D Derived;\nB *Bptr = &amp;Derived;\nreturn Bptr;\n</code></pre>\n\n<ol>\n<li><p>Is this the right way to hide functionality from the user, while making all of the additional functionality visible within the library?</p></li>\n<li><p>Is hiding the .h file for class D the only way to prevent my library users from accessing the D methods?  (Downcasting back to a D class)  I will be releaseing the library  as open source, so the user of the library could access the D class definition.</p></li>\n</ol>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 1, "creation_date": 1514381318, "post_id": 47992712, "comment_id": 82954187, "body": "According to <a href=\"http://en.cppreference.com/w/cpp/locale/locale/facet\" rel=\"nofollow noreferrer\">this</a>, <code>facet</code> contains reference counts that <code>std::locale</code> use to manage their lifetime. It would probably be a mess if you could pass a <code>facet</code> with automatic storage duration to a <code>std::locale</code>, e.g. <code>std::collate&lt;char&gt; c; std::locale(loc, c);</code>."}, {"owner": {"reputation": 691, "user_id": 9102144, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cca508351edb6d6fead84c96a336e56c?s=128&d=identicon&r=PG&f=1", "display_name": "SSteven", "link": "https://stackoverflow.com/users/9102144/ssteven"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1514443719, "post_id": 47992712, "comment_id": 82973976, "body": "No. In fact <code>collate&lt;char&gt; c</code> (if such an op were possible) would create a facet which must be managed by a locale, since the default ctor arg is 0,"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1514450794, "post_id": 47992712, "comment_id": 82976679, "body": "Yes but as soon as you pass it to <code>std::locale(loc, &amp;c)</code> (I forgot the <code>&amp;</code> in my previous comment), the <code>locale</code> will increment the reference counter and start sharing the ownership of the <code>collate</code>, which will cause you problem when the locale tries to delete the <code>collate</code> at the end of its lifetime. You should never add a facet with automatic storage duration to locale, which is probably why this destructor is protected. My point was that this prevents you from doing something wrong without knowing it, which is basically the answer you got on cplusplus.com."}, {"owner": {"reputation": 691, "user_id": 9102144, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cca508351edb6d6fead84c96a336e56c?s=128&d=identicon&r=PG&f=1", "display_name": "SSteven", "link": "https://stackoverflow.com/users/9102144/ssteven"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1514458619, "post_id": 47992712, "comment_id": 82980590, "body": "By &#39;automatic storage duration&#39;, I think you mean a facet created with the ctor arg refs = 0 (default value); ie, a facet whose lifetime is managed by a locale. As far as I am aware, for a facet to be added to a locale, the facet&#39;s lifetime <i>must</i> be managed by the locale, rather than manually. Why do you say this shouldn&#39;t be done?"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1514460941, "post_id": 47992712, "comment_id": 82981661, "body": "By <i>automatic storage duration</i>, I was referring to the <a href=\"http://en.cppreference.com/w/cpp/language/storage_duration\" rel=\"nofollow noreferrer\">storage duration</a> of the <code>collate</code>, i.e. it is a <code>std::collate</code> thas was not allocated using <code>new</code> (basically a local variable on the stack). If you have such a <code>std::collate</code> object, you cannot use it with a <code>std::locale</code> because the locale will try to <code>delete</code> it, which will cause UB since the <code>std::collate</code> was not allocated with <code>new</code>. I do understand the confusion since the <code>facet</code> are in a sense &quot;automatically&quot; managed, but I was not referring to the counter ;)"}, {"owner": {"reputation": 691, "user_id": 9102144, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cca508351edb6d6fead84c96a336e56c?s=128&d=identicon&r=PG&f=1", "display_name": "SSteven", "link": "https://stackoverflow.com/users/9102144/ssteven"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1514474724, "post_id": 47992712, "comment_id": 82988453, "body": "I see what you mean. Firstly, I get the point about the locale giving an error if it were to manage a facet created on the stack, and I agree that it would. However, it surprises me that I have written a few programs in which a locale does just that, and it gave no error! Secondly, however, what does this have to do with the original query - why should standard facets have a protected destructor, for this reason? Thirdly, this opens up another issue on the side - having to use a unique_ptr to store a dynamically-created facet, to prevent leaks."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1514475093, "post_id": 47992712, "comment_id": 82988602, "body": "Having a protected destructor prevent you from easily creating variable on the &quot;stack&quot;, you&#39;d have to inherit it as you did. You don&#39;t want to use a unique_ptr or only with a custom deleter because in all cases you want to let the locale manage the facet."}], "answers": [{"tags": [], "owner": {"reputation": 691, "user_id": 9102144, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cca508351edb6d6fead84c96a336e56c?s=128&d=identicon&r=PG&f=1", "display_name": "SSteven", "link": "https://stackoverflow.com/users/9102144/ssteven"}, "is_accepted": false, "score": 0, "last_activity_date": 1514444237, "creation_date": 1514444237, "answer_id": 48003015, "question_id": 47992712, "link": "https://stackoverflow.com/questions/47992712/inability-to-instantiate-a-standard-facet/48003015#48003015", "title": "Inability to instantiate a standard facet", "body": "<p>I had posted this query on <a href=\"http://www.cplusplus.com/forum/general/227484/\" rel=\"nofollow noreferrer\">another forum</a>.</p>\n\n<p>Based on the reply, it appears that this action was deliberate on the part of the C++ standard setters, to prevent novices from instantiating standard-library facets, such as collate.</p>\n\n<p>After all, as Stroustrup states [\"The C++ Programming Language\", 4th Ed, pg 1125],</p>\n\n<pre><code>It is essential for one to have a detailed knowledge of individual facets, \nto be able to successfully mix and match facets or add new versions of \nthe standard facets.\n</code></pre>\n"}], "owner": {"reputation": 691, "user_id": 9102144, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cca508351edb6d6fead84c96a336e56c?s=128&d=identicon&r=PG&f=1", "display_name": "SSteven", "link": "https://stackoverflow.com/users/9102144/ssteven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1514444237, "creation_date": 1514379832, "question_id": 47992712, "link": "https://stackoverflow.com/questions/47992712/inability-to-instantiate-a-standard-facet", "title": "Inability to instantiate a standard facet", "body": "<p>Naturally it isn't possible to instantiate a facet, since a facet doesn't encapsulate any specific functionality, instead leaving that to specific classes derived from facet, such as collate, etc.</p>\n\n<p>Ie, the facet class is designed to be a base class.</p>\n\n<p>For this reason, to prevent a facet being instantiated directly, its constructor is protected and destructor is virtual (to ensure proper destruction of derived-class objects):</p>\n\n<pre><code>class locale::facet\n{\nprotected:\n   explicit facet(size_t refs = 0);\n\n   virtual ~facet();\n\n   facet(const facet&amp;) = delete;\n   void operator=(const facet&amp;) = delete;\n};\n</code></pre>\n\n<p>However, now consider the standard facet collate, which is derived from facet:</p>\n\n<pre><code>template&lt;typename C&gt;\nclass collate : public locale::facet\n{\npublic:\n   /// ...\n\nprotected:\n   ~collate();      /// note: protected destructor\n\n   virtual int do_compare(\n                  const C* b, const C* e,\n                  const C* b2, const C* e2) const;\n\n   virtual string_type do_transform(\n                          const C* b,\n                          const C* e) const;\n\n   virtual long do_hash(const C* b,\n                        const C* e) const;\n};\n</code></pre>\n\n<p>Notice that here too, the destructor is protected. Therefore you won't be able to instantiate a collate. If you try to do so, you will get an error:</p>\n\n<pre><code>collate&lt;char&gt; colc;\n</code></pre>\n\n<p>The error is:</p>\n\n<pre><code>error: 'std::collate&lt;_CharT&gt;::~collate() [with _CharT = char]' is protected|\n</code></pre>\n\n<p>Yet, the collate template class's protected members (do_compare(), do_transform() and do_hash()) all contain encapsulated functionality and there was no need for the standard facet collate to have been declared with a protected dtor.</p>\n\n<p>For this reason, to create a collate, we need to first derive a class from collate, which can then be instantiated!</p>\n\n<pre><code>template&lt;typename C&gt;\nclass My_collate : public collate&lt;C&gt;\n{\npublic:\n    explicit My_collate(size_t r = 0) :\n        collate&lt;C&gt; {r}\n    {\n    }\n};\n\nMy_collate&lt;char&gt; mcolc;\n</code></pre>\n\n<p>This successfuly creates a My_collate (which is a collate by derivation).</p>\n\n<p>Just to prove that My_collate encapsulates inherited functionality, I have successfully tested it:</p>\n\n<pre><code>void print(const string&amp; s1, const string&amp; s2,\n           const int&amp; rslt)\n{\n    string srslt {};\n\n    switch(rslt)\n    {\n    case 0:\n        srslt = \"equal\";\n        break;\n\n    case 1:\n        srslt = \"s1 &gt; s2\";\n        break;\n\n\n    case -1:\n        srslt = \"s1 &lt; s2\";\n        break;\n    }\n\n    cout &lt;&lt; \"comparison of \" &lt;&lt; s1 &lt;&lt; \" and \" &lt;&lt; s2\n         &lt;&lt; \" using the mcolc facet : \"\n         &lt;&lt; srslt &lt;&lt; endl;\n}\n\n\nvoid test(const string&amp; s1, const string&amp; s2)\n{\n    /// since compare() operates on char[]s\n    const char* s1b = s1.data();        /// start of data\n    const char* s1e = s1b + s1.size();  /// end of data\n    const char* s2b = s2.data();        /// start of data\n    const char* s2e = s2b + s2.size();  /// end of data\n\n    int rslt = mcolc.compare(s1b, s1e, s2b, s2e);\n\n    /// display results\n    print(s1, s2, rslt);\n}\n\n\nint main()\n{\n    test(\"Hello\", \"Hello\");\n    test(\"Hello\", \"hello\");\n    test(\"hello\", \"Hello\");\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/D6zrbr\" rel=\"nofollow noreferrer\">https://ideone.com/D6zrbr</a></p>\n\n<p>Here's the output:</p>\n\n<pre><code>comparison of Hello and Hello using the mcolc facet : equal\ncomparison of Hello and hello using the mcolc facet : s1 &lt; s2\ncomparison of hello and Hello using the mcolc facet : s1 &gt; s2\n</code></pre>\n\n<p>So, my question is: Why do standard facets such as collate have a protected destructor, so as to prevent direct instantiation, when they already encapsulate the full required functionality?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "linked-list"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 2, "creation_date": 1514379173, "post_id": 47992522, "comment_id": 82953212, "body": "You&#39;re using <code>Point &amp;</code> for <code>a</code> and <code>b</code>, but <code>Point</code> for <code>nexti</code>. Do you understand what each of the constructs means? What made you select the parameter types the way you did?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 2, "creation_date": 1514379228, "post_id": 47992522, "comment_id": 82953240, "body": "BTW, if you&#39;re learning C++, a <a href=\"https://stackoverflow.com/q/388242/1782465\">good book</a> might come in handy."}, {"owner": {"reputation": 70, "user_id": 2767547, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c4c33ee3e7e83c37163480ddfffcd02b?s=128&d=identicon&r=PG&f=1", "display_name": "rugkei", "link": "https://stackoverflow.com/users/2767547/rugkei"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1514380448, "post_id": 47992522, "comment_id": 82953793, "body": "<code>Point &amp;</code> is the objects address so pass-by-reference and just <code>Point</code> is pass-by-value, right? Because I didn&#39;t want to copy the whole Point object I used <code>&amp;</code> in <code>dist()</code>. Because the <code>nextPoint()</code> wasn&#39;t working I changed them up a bit."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 2, "creation_date": 1514380604, "post_id": 47992522, "comment_id": 82953852, "body": "More or less (<code>Point&amp;</code> is a reference to a <code>Point</code>, not really an address). That was a leading question, though. Why are you passing into the <code>nextPoint</code> function by value?"}, {"owner": {"reputation": 70, "user_id": 2767547, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c4c33ee3e7e83c37163480ddfffcd02b?s=128&d=identicon&r=PG&f=1", "display_name": "rugkei", "link": "https://stackoverflow.com/users/2767547/rugkei"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1514380808, "post_id": 47992522, "comment_id": 82953956, "body": "In the beginning I also used &amp; but because it hasn&#39;t worked I changed it."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 2, "creation_date": 1514380952, "post_id": 47992522, "comment_id": 82954018, "body": "Randomly adding/removing pointers/references/dereferences/whatever by trial and error is not a way to learn programming, I&#39;m afraid (or at least to be any good at it)."}], "answers": [{"comments": [{"owner": {"reputation": 260, "user_id": 8564970, "user_type": "registered", "profile_image": "https://graph.facebook.com/613863685448920/picture?type=large", "display_name": "Shreyas Pimpalgaonkar", "link": "https://stackoverflow.com/users/8564970/shreyas-pimpalgaonkar"}, "edited": false, "score": 0, "creation_date": 1514380110, "post_id": 47992591, "comment_id": 82958081, "body": "I agree with Werner&#39;s answer, I would like to add something to your implementation A better implementation would be to name this class LinkedList and create a struct called Node for storing variables (x,y) and a Node* (a pointer pointing to the next element) Check <a href=\"https://www.geeksforgeeks.org/linked-list-set-1-introduction/\" rel=\"nofollow noreferrer\">this</a> implementation of LinkedList"}, {"owner": {"reputation": 70, "user_id": 2767547, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c4c33ee3e7e83c37163480ddfffcd02b?s=128&d=identicon&r=PG&f=1", "display_name": "rugkei", "link": "https://stackoverflow.com/users/2767547/rugkei"}, "edited": false, "score": 0, "creation_date": 1514380642, "post_id": 47992591, "comment_id": 82953876, "body": "For me, both of your solutions still give the result 0.   To compile I use <code>g++ file.cpp -o file</code>. Should I add the flag <code>-Wall</code> or should I even change compiler?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 2, "creation_date": 1514380662, "post_id": 47992591, "comment_id": 82953882, "body": "No, don&#39;t try to blame the compiler for this... It&#39;s almost never the compiler. And yes, you should turn on warnings; IMO, set <code>-Wall -Wextra -Wpedantic</code> and never look back."}, {"owner": {"reputation": 70, "user_id": 2767547, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c4c33ee3e7e83c37163480ddfffcd02b?s=128&d=identicon&r=PG&f=1", "display_name": "rugkei", "link": "https://stackoverflow.com/users/2767547/rugkei"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1514381681, "post_id": 47992591, "comment_id": 82954362, "body": "@underscore_d Okay, thank you. Because of my choice of points the result was always 0. Furthermore, my euclidean formula was wrong...."}], "tags": [], "owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "is_accepted": true, "score": 3, "last_activity_date": 1514383070, "last_edit_date": 1514383070, "creation_date": 1514379361, "answer_id": 47992591, "question_id": 47992522, "link": "https://stackoverflow.com/questions/47992522/unexpected-output-zero/47992591#47992591", "title": "Unexpected output zero", "body": "<p>Please turn on more compiler warnings and you'll probably get a warning that in <code>nextPoint</code> you are storing the address of a temporary variable (<code>nexti</code>) permanently (in <code>this-&gt;next</code>).</p>\n\n<p>You must either pass the address of or a reference to the point to add.</p>\n\n<pre><code>void nextPoint(Point *nexti) {\n    this-&gt;next = nexti;\n}\n\np1.nextPoint(&amp;p2);\np2.nextPoint(&amp;p3);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void nextPoint(Point &amp;nexti) {\n    this-&gt;next = &amp;nexti;\n}\n\np1.nextPoint(p2);\np2.nextPoint(p3);\n</code></pre>\n\n<p>Side note: please replace <code>NULL</code> with <code>nullptr</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1514382742, "post_id": 47993042, "comment_id": 82954844, "body": "Another reason the init-list is preferable, even if initialisation and assignment achieve the same end result, is that assigning to a member in the body means its default constructor is executed first, which is totally redundant as you then assign and replace what the default constructor did. This can cause non-trivial overhead for custom types. Using the init-list wherever possible is good practice because it avoids various kinds of pitfall and leads to more consistent/maintainable code even where no such pitfalls (currently) exist."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1514382838, "post_id": 47993042, "comment_id": 82954896, "body": "@underscore_d I actually consider (not) invoking the default constructor as &quot;substantially different.&quot;"}, {"owner": {"reputation": 70, "user_id": 2767547, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c4c33ee3e7e83c37163480ddfffcd02b?s=128&d=identicon&r=PG&f=1", "display_name": "rugkei", "link": "https://stackoverflow.com/users/2767547/rugkei"}, "edited": false, "score": 0, "creation_date": 1514384399, "post_id": 47993042, "comment_id": 82955588, "body": "@Angew Thank you for your detailed answer. I see that using <code>nullptr</code> is necessary because <code>NULL</code> is not type-safe. However, what benefits does it bring to use <code>const</code>?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 70, "user_id": 2767547, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c4c33ee3e7e83c37163480ddfffcd02b?s=128&d=identicon&r=PG&f=1", "display_name": "rugkei", "link": "https://stackoverflow.com/users/2767547/rugkei"}, "edited": false, "score": 0, "creation_date": 1514384579, "post_id": 47993042, "comment_id": 82955663, "body": "@rugkei Too big a question to handle in a comment; any decent C++ book will cover this, and even uncle Google should tell you something. One potential starting point is <a href=\"https://isocpp.org/wiki/faq/const-correctness\" rel=\"nofollow noreferrer\">the C++ FAQ</a>. Just one point to mention: temporaries can bind to <code>const T &amp;</code>, but not to <code>T &amp;</code>."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 3, "last_activity_date": 1514381684, "last_edit_date": 1514381684, "creation_date": 1514381278, "answer_id": 47993042, "question_id": 47992522, "link": "https://stackoverflow.com/questions/47992522/unexpected-output-zero/47993042#47993042", "title": "Unexpected output zero", "body": "<p>There are two problems with your code:</p>\n\n<ol>\n<li><p><code>nextPoint</code> takes its parameter by value, which means you're storing the address of that by-value parameter which becomes invalid as soon as the execution of <code>nextPoint</code> ends. Change it to accept <code>Point &amp;nexti</code>.</p></li>\n<li><p>Your distance computation function is wrong. You should be adding the squares, not subtracting them: <code>return sqrt(dx*dx + dy*dy);</code></p></li>\n</ol>\n\n<hr>\n\n<p>Unrelated to your question, but there are several ways in which you could improve your code:</p>\n\n<ul>\n<li><p>Use the mem-initialiser list in the constructor to <em>initialise</em> members instead of <em>assigning</em> to them. This is a good habit to get into, as it will come useful once you start dealing with things where initialisation and assignment are substantially different (references, classes, ...).</p>\n\n<pre><code>Point (double x, double y) : x(x), y(y), next(nullptr)\n{}\n</code></pre></li>\n<li><p>Use <code>nullptr</code> instead of <code>NULL</code>, since the latter is not type-safe.</p></li>\n<li><p><code>length</code> should be marked <code>const</code>, because it does not modify the object on which it's called. Note that <code>iter</code> has likewise been changed to <code>const Point *</code>:</p>\n\n<pre><code>double length() const {\n        const Point *iter = this;\n        double len = 0.0;\n        while (iter-&gt;next != NULL) {\n                len += dist(*iter, *iter-&gt;next);\n                iter = iter-&gt;next;\n        }\n        return len;\n}\n</code></pre></li>\n<li><p><code>dist</code> does not use <code>this</code> at all, and so it could (and should) be made a <code>static</code> member function. Also, it should take its parameters by <code>const &amp;</code>, because it doesn't modify them:</p>\n\n<pre><code>static double dist(const Point &amp;a, const Point &amp;b) {\n        double dx = a.x - b.x;\n        double dy = a.y - b.y;\n        return sqrt(dx*dx - dy*dy);\n}\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 70, "user_id": 2767547, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c4c33ee3e7e83c37163480ddfffcd02b?s=128&d=identicon&r=PG&f=1", "display_name": "rugkei", "link": "https://stackoverflow.com/users/2767547/rugkei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 47992591, "answer_count": 2, "score": 0, "last_activity_date": 1514383070, "creation_date": 1514379058, "question_id": 47992522, "link": "https://stackoverflow.com/questions/47992522/unexpected-output-zero", "title": "Unexpected output zero", "body": "<p>I'm new to C++ and currently practicing on a Singly Linked List. Somehow the output of the code below is always zero. I think the problem is the nextPoint Method but however I try to change the reference/dereference, it doesn't work.</p>\n\n<p>Where is the problem? Thank you in advance.</p>\n\n<pre><code>// Singly Linked List\n\n#include &lt;math.h&gt;\n#include &lt;iostream&gt;\n\nclass Point {\n\n        public:\n        double x, y;\n        Point* next;\n\n        // constructor\n        Point (double x, double y) {\n                this-&gt;x = x;\n                this-&gt;y = y;\n                this-&gt;next = NULL;\n        }\n\n        void nextPoint(Point nexti) {\n                this-&gt;next = &amp;nexti;\n        }\n\n        double dist(Point &amp;a, Point &amp;b) {\n                double dx = a.x - b.x;\n                double dy = a.y - b.y;\n                return sqrt(dx*dx - dy*dy);\n        }\n\n        double length() {\n                Point *iter = this;\n                double len = 0.0;\n                while (iter-&gt;next != NULL) {\n                        len += dist(*iter, *iter-&gt;next);\n                        iter = iter-&gt;next;\n                }\n                return len;\n        }\n\n};\n\nint main() {\n\n        Point p1(1,1);\n        Point p2(2,2);\n        Point p3(5,5);\n        p1.nextPoint(p2);\n        p2.nextPoint(p3);\n\n        std::cout &lt;&lt; p1.length() &lt;&lt; std::endl;\n\n        return 1;\n\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "clr", "unmanaged", "managed"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1514381634, "post_id": 47992491, "comment_id": 82954337, "body": "You are going to have to find somebody that <i>does</i> know C++ so you can test your library.  Some odds that this somebody will tell you &quot;Oh, just use the Unmanaged Exports utility&quot;."}, {"owner": {"reputation": 35, "user_id": 7203415, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YkPG1.jpg?s=128&g=1", "display_name": "Uzair Raza", "link": "https://stackoverflow.com/users/7203415/uzair-raza"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1514436790, "post_id": 47992491, "comment_id": 82971947, "body": "Please suggest me a way to solve this problem. I will be very grateful to you."}], "answers": [{"tags": [], "owner": {"reputation": 405, "user_id": 1809155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aed964515e7eab53aa8ae036749dc7b2?s=128&d=identicon&r=PG", "display_name": "Aurel Havetta", "link": "https://stackoverflow.com/users/1809155/aurel-havetta"}, "is_accepted": false, "score": 0, "last_activity_date": 1528988963, "last_edit_date": 1528988963, "creation_date": 1528985002, "answer_id": 50859391, "question_id": 47992491, "link": "https://stackoverflow.com/questions/47992491/showsum-declspecdllexport-cannot-be-applied-to-a-function-with-the-clrc/50859391#50859391", "title": "&#39;ShowSUM&#39;: __declspec(dllexport) cannot be applied to a function with the __clrcall calling convention", "body": "<p>Use wchar_t* as parameter type, and convert to String ^ using gcnew String() like this:</p>\n\n<pre><code>__declspec(dllexport) int ShowSUM(wchar_t * inValue1, wchar_t * inValue2)\n    {\n        String ^ value1 = gcnew String(inValue1);\n        String ^ value2 = gcnew String(inValue2);\n\n        CplusManaged::DoWork work;\n        return work.DoSum(value1, value2);\n    }\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7203415, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YkPG1.jpg?s=128&g=1", "display_name": "Uzair Raza", "link": "https://stackoverflow.com/users/7203415/uzair-raza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 413, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528988963, "creation_date": 1514378914, "last_edit_date": 1514381044, "question_id": 47992491, "link": "https://stackoverflow.com/questions/47992491/showsum-declspecdllexport-cannot-be-applied-to-a-function-with-the-clrc", "title": "&#39;ShowSUM&#39;: __declspec(dllexport) cannot be applied to a function with the __clrcall calling convention", "body": "<p>I have a C# DLL with the following code:</p>\n\n<pre><code>namespace Csharplib`{\n  public class Calculate\n  {\n      public static int Sum(String value1, String value2)\n      {\n          int res = int.Parse(value1) + int.Parse(value2);\n          return res;\n      }\n  }\n}`\n</code></pre>\n\n<p>I have a CLI/CLR C++ Application where I have added the reference of my C# DLL. Following is the code of my CLI/CLR C++ Application:</p>\n\n<pre><code>using namespace System;\nusing namespace System::Reflection;\n\nnamespace CplusManaged {\n  public ref class DoWork\n  {\n    public:int DoSum(System::String ^value1, System::String ^value2)\n    {\n      return Csharplib::Calculate::Sum(value1, value2);\n    }\n  };\n}\n\n__declspec(dllexport) int ShowSUM(System::String ^value1, System::String ^value2)`{\n  CplusManaged::DoWork work;\n  return work.DoSum(value1,value2);\n}`\n</code></pre>\n\n<p>When I build my application, I get the following error:</p>\n\n<pre><code>'ShowSUM': __declspec(dllexport) cannot be applied to a function with the __clrcall calling convention\n</code></pre>\n\n<p>I am a C# developer and I have no experience in C++ whatsoever. Is there any way I can solve this problem?</p>\n"}, {"tags": ["c++", "multithreading", "compiler-errors"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1514378988, "post_id": 47992458, "comment_id": 82953130, "body": "Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. What&#39;s <code>SQueue</code>? What&#39;s the signature of its <code>push</code> member? Etc."}, {"owner": {"reputation": 1038, "user_id": 7252179, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/bkNb0.jpg?s=128&g=1", "display_name": "Th&#233;o Champion", "link": "https://stackoverflow.com/users/7252179/th%c3%a9o-champion"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1514379751, "post_id": 47992458, "comment_id": 82953466, "body": "I added the source source ;)"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1514380075, "post_id": 47992458, "comment_id": 82953632, "body": "The code behind the link does not correspond to the error. Can you isolate a <i>minimal</i> reproducer and post that directly in the question?"}], "owner": {"reputation": 1038, "user_id": 7252179, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/bkNb0.jpg?s=128&g=1", "display_name": "Th&#233;o Champion", "link": "https://stackoverflow.com/users/7252179/th%c3%a9o-champion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514379376, "creation_date": 1514378771, "last_edit_date": 1514379376, "question_id": 47992458, "link": "https://stackoverflow.com/questions/47992458/cannot-bind-non-const-lvalue-reference-of-type-x-to-an-rvalue-of-type-x", "title": "cannot bind non-const lvalue reference of type &amp;X to an rvalue of type X", "body": "<p>I wanna modify this threadpool implementation <a href=\"http://roar11.com/2016/01/a-platform-independent-thread-pool-using-c14/\" rel=\"nofollow noreferrer\">http://roar11.com/2016/01/a-platform-independent-thread-pool-using-c14/</a> to remove future return. My functions does not need to return anything but I'm having trouble modifying the submit function to do that.</p>\n\n<pre><code>    template &lt;class Func, class... Args&gt;\n    void submit(Func &amp;&amp;func, Args &amp;&amp;... args)\n    {\n        auto boundTask = std::bind(std::forward&lt;Func&gt;(func), \n                         std::forward&lt;Args&gt;(args)...);\n        m_workQueue.push(std::make_unique&lt;ThreadTask&lt;decltype(boundTask)&gt;&gt;(std::move(boundTask)));\n    }\n</code></pre>\n\n<p>Which I use it like this</p>\n\n<pre><code>pool_.submit([](int i){std::cout &lt;&lt; i &lt;&lt; std::endl;}, 1);\n</code></pre>\n\n<p>But it give me the following error</p>\n\n<pre><code>./include/concurrency/ThreadPool.h: In instantiation of \u2018bool \n conc::ThreadPool::submit(Func&amp;&amp;, Args&amp;&amp; ...) [with Func = \n zia::ZiaServer::startService()::&lt;lambda(int)&gt;; Args = {int}]\u2019:\n src/ZiaServer.cpp:16:65:   required from here\n ./include/concurrency/ThreadPool.h:85:9: error: cannot bind non-const \n lvalue reference of type \u2018std::unique_ptr&lt;conc::IThreadTask&gt;&amp;\u2019 to an \n rvalue of type \u2018std::unique_ptr&lt;conc::IThreadTask&gt;\u2019\n     tasks_.push(std::make_unique&lt;ThreadTask&lt;decltype(boundTask)&gt;&gt;\n (std::move(boundTask)));\n</code></pre>\n\n<p>Any idea of what's going on ?</p>\n"}, {"tags": ["c++", "arrays", "visual-studio"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1514378704, "post_id": 47992392, "comment_id": 82953003, "body": "<code>stdafx.h</code> is a non-standard header. SO is not a do-my-homework service. Read <a href=\"http://en.cppreference.com/w/cpp\" rel=\"nofollow noreferrer\">more</a> about C++, use its standard <a href=\"http://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">containers</a>. Compile with all warnings and debug info, and use the debugger. The signature of <code>largerThanN</code> is wrong, that function should give a <code>bool</code> or maybe a <code>void</code> (and then it is badly named)"}, {"owner": {"reputation": 2010, "user_id": 602469, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/577ef2c1e38566f8d73a6fe3716dd4bc?s=128&d=identicon&r=PG&f=1", "display_name": "wKavey", "link": "https://stackoverflow.com/users/602469/wkavey"}, "edited": false, "score": 1, "creation_date": 1514379445, "post_id": 47992392, "comment_id": 82953336, "body": "@OP Why are you accepting user-input with <code>cin</code>? From the problem description the int[] array (which you have not named in <code>largerThanN</code>) should contain all values you are meant to test against"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 2, "creation_date": 1514379691, "post_id": 47992392, "comment_id": 82953436, "body": "You might want to grab a <a href=\"https://stackoverflow.com/q/388242/1782465\">good C++ book</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1514381589, "post_id": 47992392, "comment_id": 82954313, "body": "Maybe you should learn to read and understand a simple text before trying to implement it."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1514386624, "post_id": 47992392, "comment_id": 82956583, "body": "Rather than using a C-style array and having to pass the size, any sane person would instead use a <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">std::vector</a> (or a <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">std::array</a> if the size is known at compile time)."}, {"owner": {"reputation": 31, "user_id": 8853369, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wf5X-AGJKvY/AAAAAAAAAAI/AAAAAAAAByY/gsX6twQOu1g/photo.jpg?sz=128", "display_name": "Roosevelt Mendieta", "link": "https://stackoverflow.com/users/8853369/roosevelt-mendieta"}, "edited": false, "score": 0, "creation_date": 1514392020, "post_id": 47992392, "comment_id": 82958967, "body": "@manni66 i&#39;m fully coherent that I don&#39;t understand c++ fully yet, i dont understand why you have to be so toxic about it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1514394064, "post_id": 47992392, "comment_id": 82959923, "body": "You don\u2019t have a problem with C++, you have a problem with reading."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8853369, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wf5X-AGJKvY/AAAAAAAAAAI/AAAAAAAAByY/gsX6twQOu1g/photo.jpg?sz=128", "display_name": "Roosevelt Mendieta", "link": "https://stackoverflow.com/users/8853369/roosevelt-mendieta"}, "edited": false, "score": 0, "creation_date": 1514391875, "post_id": 47992654, "comment_id": 82958902, "body": "I hacked at it a little bit more and had the same exact thing for the function, but what you did in main() really helped me fully understand how to pass values to functions.  thank you @arnab"}], "tags": [], "owner": {"reputation": 629, "user_id": 9041122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd20367be61f202e1189c1ac99df6ee0?s=128&d=identicon&r=PG&f=1", "display_name": "Arnab Roy", "link": "https://stackoverflow.com/users/9041122/arnab-roy"}, "is_accepted": true, "score": 2, "last_activity_date": 1514379983, "last_edit_date": 1514379983, "creation_date": 1514379622, "answer_id": 47992654, "question_id": 47992392, "link": "https://stackoverflow.com/questions/47992392/how-to-implement-simple-c-function/47992654#47992654", "title": "How to implement simple C++ function", "body": "<p>You can do something like this-</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nvoid largerThanN(int[], int size, int n);\n\nint main()\n{\n    int size;\n    cin &gt;&gt; size;\n    int a[size];\n    for(int i=0; i &lt; size; i++)\n        cin &gt;&gt; a[i];\n    int n;\n    cin &gt;&gt; n;\n    largerThanN(a, size, n);\n    return 0;\n}\n\nvoid largerThanN(int a[], int size, int n)\n{\n    for(int i = 0; i &lt; size; i++)\n    {\n        if(a[i] &gt; n)\n            cout &lt;&lt; a[i] &lt;&lt; endl;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9133673"}, "is_accepted": false, "score": 0, "last_activity_date": 1514379721, "creation_date": 1514379721, "answer_id": 47992686, "question_id": 47992392, "link": "https://stackoverflow.com/questions/47992392/how-to-implement-simple-c-function/47992686#47992686", "title": "How to implement simple C++ function", "body": "<pre><code>#include \"stdafx.h\"\n#include &lt;iomanip&gt;\n#include &lt;iostream&gt; \nusing namespace std; \ndouble largerThanN(int[], int size, int n);\n\nint main() {\n    int arr_size;    // array size\n    cin &gt;&gt; arr_size;\n    vector&lt;int&gt; arr(n);\n    cout &lt;&lt; \"Enter values: \";\n    for (int i=0; i&lt;n; i++)\n        cin &gt;&gt; arr[i];\n    int n;\n    cin &gt;&gt; n;       // the no. to search for\n    largerThanN(arr, arr_size, n);\n    return 0; }\n\nvoid largerThanN(int[], int size, int n) {\n    int index;\n    for (index = 0; index &lt; size; index++) \n    {\n        if (values[index] &gt; n)\n            cout &lt;&lt; values[n] &lt;&lt; endl;\n    } }\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8853369, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wf5X-AGJKvY/AAAAAAAAAAI/AAAAAAAAByY/gsX6twQOu1g/photo.jpg?sz=128", "display_name": "Roosevelt Mendieta", "link": "https://stackoverflow.com/users/8853369/roosevelt-mendieta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 47992654, "answer_count": 2, "score": -3, "last_activity_date": 1514392355, "creation_date": 1514378465, "last_edit_date": 1514392355, "question_id": 47992392, "link": "https://stackoverflow.com/questions/47992392/how-to-implement-simple-c-function", "title": "How to implement simple C++ function", "body": "<p>The programming challenge I am trying to solve is states as: write a function that accepts three arguments: <strong>an array</strong>, the <strong>size of the\narray</strong>, and a <strong>number n</strong>. Assume that the array contains integers. The function should display all of the numbers in the array that are greater than the number n.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\nvoid largerThanN(int a[], int size, int n);\nint main()\n{\n    int size   = 3, \n    n      = 1, \n    arr[3] = { 0,5,6 };\n    largerThanN(arr, size, n);\n}\n\nvoid largerThanN(int a[], int size, int n) \n{\n    for (int i = 0; i &lt; size; i++) \n    {\n        if (a[i] &gt; n) \n        {\n            cout &lt;&lt; a[size] &lt;&lt; \" is greater than n \" &lt;&lt; endl;\n        }\n    }\n}\n</code></pre>\n\n<p>This is what I have convoluted so far but I don't know if this is even remotely close to solving the challenge, maybe some direction from pro C++ devs would help out.</p>\n\n<p>EDIT: I've figured it out with some help from you guys in the comments, thank you guys for helping a newbie out.  it means a lot. </p>\n"}, {"tags": ["c++", "boost", "boost-graph"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1514379724, "post_id": 47992354, "comment_id": 82953453, "body": "What code do you have. Also, this looks like a tree. Why not use a tree? Finally, why do you consistenly not mention B or B-E?"}, {"owner": {"reputation": 47, "user_id": 4929196, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/483bfd042d2470a48048c42d0f7a6c90?s=128&d=identicon&r=PG&f=1", "display_name": "Milan Dabhi", "link": "https://stackoverflow.com/users/4929196/milan-dabhi"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1514434514, "post_id": 47992354, "comment_id": 82971477, "body": "Just for graphical represent I draw like that, yes I also want to take out B-E.Here is the adjacency list  boost::adjacency_list&lt;boost::setS, boost::vecS, boost::directedS, GraphItem&gt;."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1514492430, "post_id": 47992354, "comment_id": 82996566, "body": "Edited the image to reflect the graph model as you commented. This code <a href=\"http://coliru.stacked-crooked.com/a/4ebc84d38071e75f\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/4ebc84d38071e75f</a> or this <a href=\"http://coliru.stacked-crooked.com/a/c30f1c72c752099d\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/c30f1c72c752099d</a> would generate this graph. It&#39;s rendered using dot (e.g. <a href=\"http://www.webgraphviz.com/\" rel=\"nofollow noreferrer\">webgraphviz.com</a>)"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1514494605, "post_id": 47992354, "comment_id": 82997438, "body": "Please describe what makes &quot;D,G&quot; an interesting sub graph, as opposed to e.g. &quot;B,D,G&quot;, or even &quot;B,D,G,E&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1514500787, "post_id": 48015171, "comment_id": 82999642, "body": "Simplified version of the topological-sort approach that doesn&#39;t require the BidirectionalGraph concept anymore: <a href=\"http://coliru.stacked-crooked.com/a/1f6664ba4d23cc65\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/1f6664ba4d23cc65</a>"}, {"owner": {"reputation": 47, "user_id": 4929196, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/483bfd042d2470a48048c42d0f7a6c90?s=128&d=identicon&r=PG&f=1", "display_name": "Milan Dabhi", "link": "https://stackoverflow.com/users/4929196/milan-dabhi"}, "edited": false, "score": 0, "creation_date": 1514528773, "post_id": 48015171, "comment_id": 83005635, "body": "Well I am really novice to boost but what I want is I have that directedS graph(I don&#39;t want to change to any other graph type) and If I want to get a subgraph from main graph how should I get it. for example,  1. If I pass B(root) I should get subgraph like (B,D,E,G) 2. If I pass C as root I should get subgraph like (C,F,H).  To pass which root should be my(user)&#39;s choice. Hope its clear for you :)."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 1, "last_activity_date": 1514500832, "last_edit_date": 1514500832, "creation_date": 1514500131, "answer_id": 48015171, "question_id": 47992354, "link": "https://stackoverflow.com/questions/47992354/make-sub-graph-from-boost-graph-using-particular-parent/48015171#48015171", "title": "make sub graph from boost graph using particular parent", "body": "<p>I struggled to make sense of the description. I think I've figured it out. Please consider specifying the requirements instead of merely giving one incomplete example next time.</p>\n\n<h2>Starting From The Root</h2>\n\n<p>First I thought that you meant to find the root (zero in-edges) and treat each child node as a subgraph.</p>\n\n<p>However, this results in:</p>\n\n<pre><code>// roots are nodes with a zero in-degree (no parents)\nVertices roots;\nboost::remove_copy_if(vertices(g), back_inserter(roots), [&amp;](Vertex v) { return boost::size(in_edges(v, g)); });\n\nstd::vector&lt;Graph&gt; subs;\nfor (Vertex root : roots) {\n    for (Vertex subroot : boost::make_iterator_range(adjacent_vertices(root, g))) {\n\n        std::set&lt;Vertex&gt; include;\n        std::vector&lt;boost::default_color_type&gt; colors(n);\n\n        boost::depth_first_visit(g, subroot, \n                boost::make_dfs_visitor(\n                        boost::write_property(\n                            boost::identity_property_map{},\n                            inserter(include, include.end()),\n                            boost::on_discover_vertex())\n                    ),\n                colors.data());\n\n        std::cout &lt;&lt; \"Root \" &lt;&lt; g[root].name &lt;&lt; \": Subtree rooted at \" &lt;&lt; g[subroot].name &lt;&lt; \" includes \" &lt;&lt; include.size() &lt;&lt; \" nodes\\n\";\n\n        Filtered fg(g, boost::keep_all{}, [&amp;](Vertex v) { return include.count(v); });\n        print_graph(fg, names);\n    }\n}\n</code></pre>\n\n<p>Printing <strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/8992e0bf10f557bf\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>Root A: Subtree rooted at B includes 4 nodes\nB --&gt; D E \nD --&gt; G \nE --&gt; \nG --&gt; \nRoot A: Subtree rooted at C includes 3 nodes\nC --&gt; F \nF --&gt; H \nH --&gt; \n</code></pre>\n\n<p>Indeed, <code>D</code> is obviously not a child of <code>A</code> so would not count.</p>\n\n<p>Back to the drawing board.</p>\n\n<h2>Starting From The Leafs</h2>\n\n<p>All sub-trees containing single-degree children or leaf nodes?</p>\n\n<p>This <em>would</em> indeed seem to describe the \"linear\" subgraphs given as an example. Obviously, the \"linear\" (vertical) layout is an arbitrary layout choice. All three of the representations below are exactly equivalent to the question graph:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CNyqE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CNyqE.png\" alt=\"enter image description here\"></a></p>\n\n<p>Looking at this the opposite way suddenly makes a lot more sense: you may want to list all the linear dependencies starting from each <em>leaf</em> node, until you reach a node that also participates in another branch.</p>\n\n<p>This naturally involves doing a topological search and listing each branch in the DAG from the leaf-node back:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/4561e48464e27a2b\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>Vertices reverse_topological;\nboost::topological_sort(g, back_inserter(reverse_topological));\n\nbool in_path = true;\nfor (auto v : reverse_topological) {\n    if (0 == out_degree(v, g)) { // is leaf?\n        in_path = true;\n        std::cout &lt;&lt; \"\\nLeaf:\";\n    }\n\n    in_path &amp;= (1 == in_degree(v, g));\n\n    if (in_path)\n        std::cout &lt;&lt; \" \" &lt;&lt; names[v];\n    else\n        std::cout &lt;&lt; \" [\" &lt;&lt; names[v] &lt;&lt; \"]\";\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>Leaf: G D\nLeaf: E B\nLeaf: H F C [A]\n</code></pre>\n\n<h2>Minor Variation:</h2>\n\n<p>You can indicate that <code>B</code> doubles in two paths, depending on your requirements:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/08817b3595b0861e\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>Vertices reverse_topological;\nboost::topological_sort(g, back_inserter(reverse_topological));\n\nbool in_path = true;\nfor (auto v : reverse_topological) {\n    switch (out_degree(v, g)) {\n        case 0:\n            // start a new path\n            in_path = true;\n            std::cout &lt;&lt; \"\\nLeaf:\";\n            break;\n        case 1: \n            break; // still single-degree\n        default: in_path = false;\n    }\n\n    if (in_path)\n        std::cout &lt;&lt; \" \" &lt;&lt; names[v];\n    else\n        std::cout &lt;&lt; \" [\" &lt;&lt; names[v] &lt;&lt; \"]\";\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>Leaf: G D\nLeaf: E [B]\nLeaf: H F C [A]\n</code></pre>\n\n<h2>Full Listings</h2>\n\n<p>To preserve against bitrot:</p>\n\n<ul>\n<li><p>Starting from the root (first assumption)</p>\n\n<pre><code>#include &lt;boost/graph/adjacency_list.hpp&gt;\n\nstruct GraphItem {\n    std::string name;\n};\n\nusing Graph = boost::adjacency_list&lt;boost::setS, boost::vecS, boost::bidirectionalS, GraphItem&gt;;\nusing Vertex = Graph::vertex_descriptor;\nusing Vertices = std::vector&lt;Vertex&gt;;\n\n#include &lt;boost/graph/filtered_graph.hpp&gt;\n#include &lt;boost/function.hpp&gt;\nusing Filtered = boost::filtered_graph&lt;Graph, boost::keep_all, boost::function&lt;bool(Vertex)&gt;&gt;;\n\n#include &lt;boost/graph/graphviz.hpp&gt;\n#include &lt;boost/range/algorithm.hpp&gt;\n#include &lt;boost/graph/depth_first_search.hpp&gt;\n#include &lt;boost/graph/graph_utility.hpp&gt;\n\nint main() {\n\n    Graph g;\n    auto names = get(&amp;GraphItem::name, g);\n\n    enum {A,B,C,D,E,F,G,H,n};\n    Vertices vs {\n        add_vertex({\"A\"}, g),\n        add_vertex({\"B\"}, g),\n        add_vertex({\"C\"}, g),\n        add_vertex({\"D\"}, g),\n        add_vertex({\"E\"}, g),\n        add_vertex({\"F\"}, g),\n        add_vertex({\"G\"}, g),\n        add_vertex({\"H\"}, g),\n    };\n\n    assert(num_vertices(g) == n); \n    add_edge(vs[A], vs[B], g);\n    add_edge(vs[A], vs[C], g);\n\n    add_edge(vs[B], vs[D], g);\n    add_edge(vs[B], vs[E], g);\n\n    add_edge(vs[D], vs[G], g);\n\n    add_edge(vs[C], vs[F], g);\n    add_edge(vs[F], vs[H], g);\n\n    // write_graphviz(std::cout, g, make_label_writer(names));\n\n    // roots are nodes with a zero in-degree (no parents)\n    Vertices roots;\n    boost::remove_copy_if(vertices(g), back_inserter(roots), [&amp;](Vertex v) { return boost::size(in_edges(v, g)); });\n\n    std::vector&lt;Graph&gt; subs;\n    for (Vertex root : roots) {\n        for (Vertex subroot : boost::make_iterator_range(adjacent_vertices(root, g))) {\n\n            std::set&lt;Vertex&gt; include;\n            std::vector&lt;boost::default_color_type&gt; colors(n);\n\n            boost::depth_first_visit(g, subroot, \n                    boost::make_dfs_visitor(\n                            boost::write_property(\n                                boost::identity_property_map{},\n                                inserter(include, include.end()),\n                                boost::on_discover_vertex())\n                        ),\n                    colors.data());\n\n            std::cout &lt;&lt; \"Root \" &lt;&lt; g[root].name &lt;&lt; \": Subtree rooted at \" &lt;&lt; g[subroot].name &lt;&lt; \" includes \" &lt;&lt; include.size() &lt;&lt; \" nodes\\n\";\n\n            Filtered fg(g, boost::keep_all{}, [&amp;](Vertex v) { return include.count(v); });\n            print_graph(fg, names);\n        }\n    }\n}\n</code></pre></li>\n<li><p>Starting from the leaves (second assumption, topological-sort)</p>\n\n<pre><code>#include &lt;boost/graph/adjacency_list.hpp&gt;\n\nstruct GraphItem {\n    std::string name;\n};\n\nusing Graph = boost::adjacency_list&lt;boost::setS, boost::vecS, boost::bidirectionalS, GraphItem&gt;;\nusing Vertex = Graph::vertex_descriptor;\nusing Vertices = std::vector&lt;Vertex&gt;;\n\n#include &lt;boost/graph/topological_sort.hpp&gt;\n#include &lt;iostream&gt;\n\nint main() {\n\n    Graph g;\n    auto names = get(&amp;GraphItem::name, g);\n\n    {\n        enum {A,B,C,D,E,F,G,H,n};\n        Vertices vs {\n            add_vertex({\"A\"}, g),\n            add_vertex({\"B\"}, g),\n            add_vertex({\"C\"}, g),\n            add_vertex({\"D\"}, g),\n            add_vertex({\"E\"}, g),\n            add_vertex({\"F\"}, g),\n            add_vertex({\"G\"}, g),\n            add_vertex({\"H\"}, g),\n        };\n\n        assert(num_vertices(g) == n); \n        add_edge(vs[A], vs[B], g);\n        add_edge(vs[A], vs[C], g);\n\n        add_edge(vs[B], vs[D], g);\n        add_edge(vs[B], vs[E], g);\n\n        add_edge(vs[D], vs[G], g);\n\n        add_edge(vs[C], vs[F], g);\n        add_edge(vs[F], vs[H], g);\n    }\n\n    Vertices reverse_topological;\n    boost::topological_sort(g, back_inserter(reverse_topological));\n\n    bool in_path = true;\n    for (auto v : reverse_topological) {\n        if (0 == out_degree(v, g)) { // is leaf?\n            in_path = true;\n            std::cout &lt;&lt; \"\\nLeaf:\";\n        }\n\n        in_path &amp;= (1 == in_degree(v, g));\n\n        if (in_path)\n            std::cout &lt;&lt; \" \" &lt;&lt; names[v];\n        else\n            std::cout &lt;&lt; \" [\" &lt;&lt; names[v] &lt;&lt; \"]\";\n    }\n}\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 47, "user_id": 4929196, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/483bfd042d2470a48048c42d0f7a6c90?s=128&d=identicon&r=PG&f=1", "display_name": "Milan Dabhi", "link": "https://stackoverflow.com/users/4929196/milan-dabhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1514500832, "creation_date": 1514378343, "last_edit_date": 1514491951, "question_id": 47992354, "link": "https://stackoverflow.com/questions/47992354/make-sub-graph-from-boost-graph-using-particular-parent", "title": "make sub graph from boost graph using particular parent", "body": "<p><a href=\"https://i.stack.imgur.com/w77x8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w77x8.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want sub graph like C, F, H and D, G using boost library.\nI have all the parents like in above example C and D. </p>\n"}, {"tags": ["c++", "textures", "sdl-2"], "comments": [{"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1514380021, "post_id": 47992128, "comment_id": 82953605, "body": "I&#39;d say no, and for good reasons. You can use <code>SDL_Surface</code> though, and convert to texture on target renderer."}], "answers": [{"tags": [], "owner": {"reputation": 275, "user_id": 7146868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KUdRy.jpg?s=128&g=1", "display_name": "Julien Vernay", "link": "https://stackoverflow.com/users/7146868/julien-vernay"}, "is_accepted": false, "score": 0, "last_activity_date": 1514390248, "creation_date": 1514390248, "answer_id": 47995076, "question_id": 47992128, "link": "https://stackoverflow.com/questions/47992128/can-i-transfer-sdl-textures-from-one-sdl-renderer-to-another/47995076#47995076", "title": "Can I transfer SDL_Textures from one SDL_Renderer to another?", "body": "<p>It seems it is indeed impossible, but for my case I finally find the function <code>SDL_SetRenderTarget</code> which permits to render directly on a texture linked to my main renderer, so I do not need to use <code>SDL_CreateSoftwareRenderer</code>, nor <code>SDL_Surface</code>.</p>\n"}], "owner": {"reputation": 275, "user_id": 7146868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KUdRy.jpg?s=128&g=1", "display_name": "Julien Vernay", "link": "https://stackoverflow.com/users/7146868/julien-vernay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514390248, "creation_date": 1514377338, "question_id": 47992128, "link": "https://stackoverflow.com/questions/47992128/can-i-transfer-sdl-textures-from-one-sdl-renderer-to-another", "title": "Can I transfer SDL_Textures from one SDL_Renderer to another?", "body": "<p>Is it possible to render textures binded to a SDL_Renderer to another SDL_Renderer ? For example :</p>\n\n<pre><code>SDL_Renderer* render1, render2;\n//initialization of renderers\nSDL_Texture* texture = /* ... */; //created from render1\nSDL_RenderCopy(render1, texture, NULL, NULL);\n//ChangeRenderer(texture, render2) or something like that\nSDL_RenderCopy(render2, teture, NULL, NULL);\n</code></pre>\n\n<p>Why I want to do this ? Because I have a <code>TextureManager</code> linked to my main <code>SDL_Renderer</code> (created from the window), but I want to use internally in a function another <code>SDL_Renderer</code> (from <code>SDL_CreateSoftwareRenderer(SDL_Surface*)</code>) in order to return a texture instead of drawing directly on the main renderer.</p>\n\n<p>So, is it possible ? Thank you for reading !</p>\n"}, {"tags": ["c++", "boost", "graph", "grammar", "a-star"], "comments": [{"owner": {"reputation": 1186, "user_id": 6523529, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/1725829190990519/picture?type=large", "display_name": "Ronnie Oosting", "link": "https://stackoverflow.com/users/6523529/ronnie-oosting"}, "edited": false, "score": 0, "creation_date": 1514378418, "post_id": 47992059, "comment_id": 82952903, "body": "Please show some example code you&#39;ve already tried."}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1514470733, "post_id": 47999653, "comment_id": 82986388, "body": "Relevant <a href=\"http://www.boost.org/doc/libs/1_66_0/libs/graph/doc/r_c_shortest_paths.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_66_0/libs/graph/doc/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 9144790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d29a49fcb89578b33bafdd4124e88cb?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Lehning", "link": "https://stackoverflow.com/users/9144790/michael-lehning"}, "edited": false, "score": 0, "creation_date": 1514492312, "post_id": 47999653, "comment_id": 82996504, "body": "Thanks a lot. Both answers are a great help of solving my problem."}, {"owner": {"reputation": 1, "user_id": 9144790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d29a49fcb89578b33bafdd4124e88cb?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Lehning", "link": "https://stackoverflow.com/users/9144790/michael-lehning"}, "edited": false, "score": 0, "creation_date": 1514492759, "post_id": 47999653, "comment_id": 82996684, "body": "I found an alternative way of solving the problem. I added in the visitor the following code snippet:     template &lt;class Vertex&gt; class astar_goal_visitor : public boost::default_astar_visitor { public: \tastar_goal_visitor(Vertex goal) : m_goal(goal) {} \ttemplate &lt;class Graph&gt; \tvoid examine_vertex(Vertex u, Graph&amp; g)  \t{ \t\tif (u == m_goal) \t\t{  \t\t\tint cnt = 0; \t\t\tlist&lt;Vertex&gt; shortest_path; \t\t\tfor (Vertex v = m_goal;; v = (*preDecessorMap)[v])  \t\t\t{ \t\t\t\tshortest_path.push_front(v); \t\t\t\tcnt++; \t\t\t\tif ((*preDecessorMap)[v] == v) \t\t\t\t\tbreak;  \t\t\t}"}, {"owner": {"reputation": 1, "user_id": 9144790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d29a49fcb89578b33bafdd4124e88cb?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Lehning", "link": "https://stackoverflow.com/users/9144790/michael-lehning"}, "edited": false, "score": 0, "creation_date": 1514493446, "post_id": 47999653, "comment_id": 82996954, "body": "I found an alternative way of solving the problem (see last comment). I added in the visitor a pointer to the preDecessorMap. After reaching a  (possible) goal I check in the first step the length of the path by using the preDecessorMap. If this check is OK I throw \t\t\t\t\tfound_goal() otherwise I continue the search. It is not so elegant like the proposed methods, but it does the job."}], "tags": [], "owner": {"reputation": 4933, "user_id": 8217180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9621a549160f738b81303a4a008ddd50?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Ribizel", "link": "https://stackoverflow.com/users/8217180/tobias-ribizel"}, "is_accepted": false, "score": 0, "last_activity_date": 1514474074, "last_edit_date": 1514474074, "creation_date": 1514415975, "answer_id": 47999653, "question_id": 47992059, "link": "https://stackoverflow.com/questions/47992059/boost-c-astar-with-restrictions/47999653#47999653", "title": "boost c++ Astar with restrictions", "body": "<h2>Short answer</h2>\n\n<p>You probably won't be able to integrate it into A* easily, but your problem has already been discussed in <a href=\"https://stackoverflow.com/questions/1690347/shortest-path-with-a-fixed-number-of-edges\">this question</a> </p>\n\n<p>EDIT: It seems there is already a <a href=\"http://www.boost.org/doc/libs/1_66_0/libs/graph/doc/r_c_shortest_paths.html\" rel=\"nofollow noreferrer\">shortest path algorithm with resource constraints</a> implemented in Boost, which is related to your problem, as <em>sehe</em> pointed out.</p>\n\n<h2>Longer answer:</h2>\n\n<p>I believe it is not possible to directly use variants of Dijkstra's algorithm (including A*) to restrict the path length in general, since for every node you reach, you would need to keep track of a shortest path for <em>every</em> distinct path length (in terms of the number of edges) leading there.</p>\n\n<p>What you are describing in your last paragraph is a simplified form of a <em>Language-constrained shortest path problem</em>, first investigated by <a href=\"http://epubs.siam.org/doi/abs/10.1137/S0097539798337716\" rel=\"nofollow noreferrer\">Barrett et al.</a>\nThe paper describes an algorithm that solves the general problem of shortest paths with constraints on the edge labels in polynomial time for regular expressions.\nHowever, you need some knowledge on formal languages and regular automata to understand it.</p>\n\n<p>The basic idea is to</p>\n\n<ul>\n<li>construct a non-deterministic automaton M(G) from your input graph G with special handling for the source s and target t</li>\n<li>construct a non-deterministic automaton M(R) for the regular language R describing the allowed paths and then</li>\n<li>construct the intersection between these two automata, which accepts exactly the paths from s to t which fulfill the constraints given by the regular language</li>\n</ul>\n\n<p>On this automaton you can then run a normal shortest path algorithm to find several candidates of which you take the shortest one.</p>\n"}], "owner": {"reputation": 1, "user_id": 9144790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d29a49fcb89578b33bafdd4124e88cb?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Lehning", "link": "https://stackoverflow.com/users/9144790/michael-lehning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514474074, "creation_date": 1514377048, "question_id": 47992059, "link": "https://stackoverflow.com/questions/47992059/boost-c-astar-with-restrictions", "title": "boost c++ Astar with restrictions", "body": "<p>I am using the astar algorithm of boost <a href=\"http://www.boost.org/doc/libs/1_66_0/libs/graph/doc/astar_search.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_66_0/libs/graph/doc/astar_search.html</a></p>\n\n<p>I would like to integrate a length condition for the path length from start node to the goal node. More specifically I try to find a chain of digits with exact length of 11 digits. One idea could be the integration into the visitor pattern of the boost A*-implementation. But until now I found no good solution.</p>\n\n<p>More general I am looking for a method to integrate a grammar check into the A*-algorithm. In my specific example the grammar could be expressed by a regular pattern like ^[1-9]\\d{10}$ Each node represents a character (here a digit).\nAny suggestion is appreciated.</p>\n"}, {"tags": ["c++", "compiler-errors", "stl"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1514376462, "post_id": 47991898, "comment_id": 82951994, "body": "Wack a <code>typedef</code> or two in there, for the sake of clarity."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1514379499, "post_id": 47991898, "comment_id": 82953366, "body": "You should not <a href=\"https://stackoverflow.com/q/31816095/1782465\">include bits/stdc++.h</a> in your code."}], "answers": [{"tags": [], "owner": {"reputation": 605, "user_id": 1688565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uYUDj.jpg?s=128&g=1", "display_name": "Abdulrahman Alhadhrami", "link": "https://stackoverflow.com/users/1688565/abdulrahman-alhadhrami"}, "is_accepted": true, "score": 2, "last_activity_date": 1514376632, "creation_date": 1514376632, "answer_id": 47991966, "question_id": 47991898, "link": "https://stackoverflow.com/questions/47991898/why-am-i-getting-missing-template-arguments-before-token-while-using-priorit/47991966#47991966", "title": "Why am i getting missing template arguments before \u2018(\u2019 token while using priority queue?", "body": "<p>You are not using proper syntax. Instead of writing</p>\n\n<pre><code>priority_queue(pair&lt;pair&lt;int,int&gt;,int&gt;,vector&lt;pair&lt;pair&lt;int,int&gt;,int&gt;&gt;,compare) q;\n</code></pre>\n\n<p>You should write</p>\n\n<pre><code>priority_queue&lt;pair&lt;pair&lt;int,int&gt;,int&gt;,vector&lt;pair&lt;pair&lt;int,int&gt;,int&gt;&gt;,compare&gt; q;\n</code></pre>\n\n<p>For more information, refer to this link: <a href=\"http://en.cppreference.com/w/cpp/container/priority_queue\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/container/priority_queue</a></p>\n"}, {"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1514376691, "creation_date": 1514376691, "answer_id": 47991988, "question_id": 47991898, "link": "https://stackoverflow.com/questions/47991898/why-am-i-getting-missing-template-arguments-before-token-while-using-priorit/47991988#47991988", "title": "Why am i getting missing template arguments before \u2018(\u2019 token while using priority queue?", "body": "<p>Change this:</p>\n\n<pre><code>priority_queue(pair&lt;pair&lt;int,int&gt;,int&gt;,vector&lt;pair&lt;pair&lt;int,int&gt;,int&gt;&gt;,compare) q;\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>priority_queue&lt;pair&lt;pair&lt;int,int&gt;,int&gt;,vector&lt;pair&lt;pair&lt;int,int&gt;,int&gt;&gt;,compare&gt; q;\n</code></pre>\n\n<p>and you will get this code compiled.</p>\n\n<p>However, this code is unreadable. Consider using a <code>typedef</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 8960244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/730d4fa22a1911df4997c664d6c32786?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Akut", "link": "https://stackoverflow.com/users/8960244/rohan-akut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 47991966, "answer_count": 2, "score": 1, "last_activity_date": 1514376782, "creation_date": 1514376328, "last_edit_date": 1514376782, "question_id": 47991898, "link": "https://stackoverflow.com/questions/47991898/why-am-i-getting-missing-template-arguments-before-token-while-using-priorit", "title": "Why am i getting missing template arguments before \u2018(\u2019 token while using priority queue?", "body": "<p>I was implementing an algorithm using priority queue.\nHere is my code </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include&lt;bits/stdc++.h&gt;\nusing namespace std;\nint first[2]={2,-2};\nint second[2]={1,-1};\nvector&lt;pair&lt;pair&lt;int,int&gt;,int&gt;&gt;vec;\nclass compare{\n    public:\n    bool operator()(pair&lt;pair&lt;int,int&gt;,int&gt;a,pair&lt;pair&lt;int,int&gt;,int&gt;b)\n    {\n        return a.second&gt;b.second;\n    }\n};\nint main() {\n    long long int a,b,c,d;\n    while(cin&gt;&gt;a&gt;&gt;b&gt;&gt;c&gt;&gt;d)\n    {\n        priority_queue(pair&lt;pair&lt;int,int&gt;,int&gt;,vector&lt;pair&lt;pair&lt;int,int&gt;,int&gt;&gt;,compare) q;\n        map&lt;pair&lt;int,int&gt;,bool&gt;visited;\n        map&lt;pair&lt;int,int&gt;,int&gt;dist;\n        map&lt;pair&lt;int,int&gt;,pair&lt;int,int&gt;&gt; parent;\n        for(int i=1;i&lt;=9;i++)\n        for(int j=1;j&lt;=9;j++)\n        {\n            dist[make_pair(i,j)]=INT_MAX;\n            visited[make_pair(i,j)]=false;\n        }\n        dist[make_pair(a,b)] = 0;\n        visited[make_pair(a,b)] = true;\n        q.push(make_pair(make_pair(a,b),0));\n        while(!q.empty())\n        {\n            pair&lt;int,int&gt; node = q.top().first;\n            int distance = q.top().second;\n            q.pop();\n            //followed by relaxation step \n        }\n    }\n    // your code goes here\n    return 0;\n}\n</code></pre>\n\n<p>The problem is I am getting the following errors:</p>\n\n<pre><code>rog.cpp: In function \u2018int main()\u2019:\nprog.cpp:39:17: error: missing template arguments before \u2018(\u2019 token\n   priority_queue(pair&lt;pair&lt;int,int&gt;,int&gt;,vector&lt;pair&lt;pair&lt;int,int&gt;,int&gt;&gt;,compare) q;\n                 ^\nprog.cpp:39:41: error: expected primary-expression before \u2018,\u2019 token\n   priority_queue(pair&lt;pair&lt;int,int&gt;,int&gt;,vector&lt;pair&lt;pair&lt;int,int&gt;,int&gt;&gt;,compare) q;\n                                         ^\nprog.cpp:39:73: error: expected primary-expression before \u2018,\u2019 token\n   priority_queue(pair&lt;pair&lt;int,int&gt;,int&gt;,vector&lt;pair&lt;pair&lt;int,int&gt;,int&gt;&gt;,compare) q;\n                                                                         ^\nprog.cpp:39:73: error: expected primary-expression before \u2018)\u2019 token\n   priority_queue(pair&lt;pair&lt;int,int&gt;,int&gt;,vector&lt;pair&lt;pair&lt;int,int&gt;,int&gt;&gt;,compare) q;\n</code></pre>\n\n<p>I am not able to understand what exactly is the meaning of the error.It wold be of great help if someone could clarify it for me.</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 33, "user_id": 9144852, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iNbAms09VDA/AAAAAAAAAAI/AAAAAAAAABU/TMCOO0kwWU4/photo.jpg?sz=128", "display_name": "Ravi Aherwar", "link": "https://stackoverflow.com/users/9144852/ravi-aherwar"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1514378892, "post_id": 47991848, "comment_id": 82953083, "body": "Thanks for the response.  I also tried hardcoding 12 and still the result was same."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 9144852, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iNbAms09VDA/AAAAAAAAAAI/AAAAAAAAABU/TMCOO0kwWU4/photo.jpg?sz=128", "display_name": "Ravi Aherwar", "link": "https://stackoverflow.com/users/9144852/ravi-aherwar"}, "edited": false, "score": 0, "creation_date": 1514381604, "post_id": 47992544, "comment_id": 82954322, "body": "Thanks a lot to address the problem causing issue. It works as expected after omitting the virtual keyword. ...I displayed the size with virtual keyword and it shows 16 and after omitting 12 :)."}, {"owner": {"reputation": 33, "user_id": 9144852, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iNbAms09VDA/AAAAAAAAAAI/AAAAAAAAABU/TMCOO0kwWU4/photo.jpg?sz=128", "display_name": "Ravi Aherwar", "link": "https://stackoverflow.com/users/9144852/ravi-aherwar"}, "edited": false, "score": 0, "creation_date": 1514382298, "post_id": 47992544, "comment_id": 82954629, "body": "Oh!..Sorry for that, It was my first post here, don&#39;t know much how it work here yet.. but will explore soon. Thanks Rabbid76."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 3, "last_activity_date": 1514381660, "last_edit_date": 1514381660, "creation_date": 1514379174, "answer_id": 47992544, "question_id": 47991848, "link": "https://stackoverflow.com/questions/47991848/opengl-c-code-doesnt-give-expected-result/47992544#47992544", "title": "opengl c++ code doesn&#39;t give expected result", "body": "<pre><code>class Vertex   \n{   \npublic:    \n    Vertex(float xx, float yy, float zz) : x(xx), y(yy), z(zz) { }    \n    virtual ~Vertex() {}    \nprivate:    \n    float x;   \n    float y;   \n    float z;    \n};\n</code></pre>\n\n<p><code>sizeof(Vertex)</code>is not 12 as you expected. It is probably 16 or 24 (depends on 32 or 64 bit system). This is because you have an <code>virtual</code> destructor. This causes that somewhere in the object has to be stored the pointer to the virtual function table. Finally the vertex coordinates in <code>std::vector&lt;Vertex&gt; quadVertexData</code> are not tightly packed.</p>\n\n<p>To do what you want, you should use a <code>struct</code></p>\n\n<pre><code>struct Vertex   \n{   \n    float x;   \n    float y;   \n    float z;    \n};\n</code></pre>\n\n<p>Of course your code will work if you omit the <code>virtual</code> keyword in <code>class Vertex</code>:</p>\n\n<pre><code>class Vertex   \n{   \npublic:    \n    Vertex(float xx, float yy, float zz) : x(xx), y(yy), z(zz) { }    \n    ~Vertex() {}    \nprivate:    \n    float x;   \n    float y;   \n    float z;    \n};\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9144852, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iNbAms09VDA/AAAAAAAAAAI/AAAAAAAAABU/TMCOO0kwWU4/photo.jpg?sz=128", "display_name": "Ravi Aherwar", "link": "https://stackoverflow.com/users/9144852/ravi-aherwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 47992544, "answer_count": 1, "score": 3, "last_activity_date": 1514386676, "creation_date": 1514376145, "last_edit_date": 1514386676, "question_id": 47991848, "link": "https://stackoverflow.com/questions/47991848/opengl-c-code-doesnt-give-expected-result", "title": "opengl c++ code doesn&#39;t give expected result", "body": "<pre><code> **//My 3D vertex data class**\nclass Vertex   \n{   \npublic:    \n    Vertex(float xx, float yy, float zz) : x(xx), y(yy), z(zz) { }    \n    virtual ~Vertex() {}    \n\nprivate:    \n    float x;   \n    float y;   \n    float z;    \n};\n\n**//My quad data.** \nstd::vector&lt;Vertex&gt; quadVertexData;    \nquadVertexData.push_back(Vertex(-0.5,  0.5, 0.0));     \nquadVertexData.push_back(Vertex(-0.5, -0.5, 0.0));   \nquadVertexData.push_back(Vertex( 0.5, -0.5, 0.0));     \nquadVertexData.push_back(Vertex( 0.5,  0.5, 0.0)); \n</code></pre>\n\n<p><strong>//This is how I make my render call.</strong>    </p>\n\n<pre><code>glGenVertexArrays(1, &amp;_vao);\nglBindVertexArray(_vao);\nglGenBuffers(1, &amp;_vbo);\nglGenBuffers(1, &amp;_ebo);\n\n\nvoid render(std::vector&lt;Vertex&gt;&amp; vertices, std::vector&lt;unsigned int&gt; indices)\n{\n glBindBuffer(GL_ARRAY_BUFFER, _vbo);    \n glBufferData(GL_ARRAY_BUFFER, sizeof(Vertex) * vertices.size(),  \n &amp;vertices[0], GL_STATIC_DRAW);     //tried with sizeof(vertices[0]) too.\n glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _ebo);       \n glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(unsigned int) * indices.size(),  \n &amp;indices[0], GL_STATIC_DRAW);    \n glEnableVertexAttribArray(0);     \n glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);       \n glDrawElements(GL_TRIANGLES, indices.size(), GL_UNSIGNED_INT, 0);     \n glDisableVertexAttribArray(0);     \n}  \n</code></pre>\n\n<p><strong>ISSUE</strong> : //Instead of quad, I get an unexpected triangle as show in pic.\nHow should I pass <code>bufferdata</code> to get desired results?<br/>\nSame code if I tried with <strong><code>glm::vec3</code></strong> then its works fine.</p>\n\n<p><strong>//Snapshots :</strong></p>\n\n<p>With My Vertex class\n<a href=\"https://i.stack.imgur.com/mALn3.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mALn3.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>With glm::vec3 \n<a href=\"https://i.stack.imgur.com/oHGws.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oHGws.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "visual-studio", "debugging", "command-line"], "comments": [{"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1514377776, "post_id": 47991831, "comment_id": 82952607, "body": "Please give the complete command line that you want to use (&quot;&lt;&quot;, nothing else? this works for me) and the visual Studio Version that you are using."}, {"owner": {"reputation": 1187, "user_id": 5712330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzKU4.png?s=128&g=1", "display_name": "Igor Akhmetov", "link": "https://stackoverflow.com/users/5712330/igor-akhmetov"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1514389795, "post_id": 47991831, "comment_id": 82957945, "body": "<code>&lt;</code> works because it&#39;s not an argument, it&#39;s a redirect operator. It won&#39;t actually pass an argument to your executable. As I stated in the question, I want to pass a single argument - the <code>&lt;</code> string."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1514449326, "post_id": 47991831, "comment_id": 82976058, "body": "As I said: it works for me. When I enter &quot;&lt;&quot; (with the double quotes), then the &quot;&lt;&quot; (without double quotes) is passed to my program. So as I asked for, please give more information."}, {"owner": {"reputation": 1187, "user_id": 5712330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzKU4.png?s=128&g=1", "display_name": "Igor Akhmetov", "link": "https://stackoverflow.com/users/5712330/igor-akhmetov"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1514461465, "post_id": 47991831, "comment_id": 82981915, "body": "Sorry, my bad. I figured this out, see my answer. Thanks!"}, {"owner": {"reputation": 1657, "user_id": 28312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8b55103cd7f0c0796bcdaefd1e75965?s=128&d=identicon&r=PG", "display_name": "Flash Sheridan", "link": "https://stackoverflow.com/users/28312/flash-sheridan"}, "edited": false, "score": 0, "creation_date": 1585349894, "post_id": 47991831, "comment_id": 107738019, "body": "For those brought here by a search engine, I think there is a genuine issue here: <a href=\"https://code.visualstudio.com/docs/cpp/launch-json-reference\" rel=\"nofollow noreferrer\">code.visualstudio.com/docs/cpp/launch-json-reference</a> says \u201cIf you are escaping characters, you will need to double escape them. For example, [&quot;{\\\\\\&quot;arg1\\\\\\&quot;: true}&quot;] will send {&quot;arg1&quot;: true} to your application.\u201d  But note that its example is either triple escaping (which I hadn\u2019t tried), or single escaping of both the backslash and quote.  Neither single, double, nor triple escaping worked for me."}], "answers": [{"comments": [{"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 1, "creation_date": 1514463390, "post_id": 48006894, "comment_id": 82982893, "body": "Very interesting. I can reproduce that here, but have no solution. It would be good to ask the question on the MS community site (and maybe re-post an answer here)."}, {"owner": {"reputation": 5606, "user_id": 6601554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d8e70907365c8fce9135ffe1e5868f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Zhai-MSFT", "link": "https://stackoverflow.com/users/6601554/jack-zhai-msft"}, "edited": false, "score": 1, "creation_date": 1514541044, "post_id": 48006894, "comment_id": 83010179, "body": "@Igor Akhmetov, Thanks for sharing your solution here, if possible, you could mark it as the answer. In addition, we also get the same result as yours using &quot;start without debugging(Ctrl+F5)&quot; and &quot;Start debugging(F5)&quot;. For this issue, like Werner Henze suggestion, you could report it to the community site: <a href=\"https://developercommunity.visualstudio.com/spaces/8/index.html\" rel=\"nofollow noreferrer\">developercommunity.visualstudio.com/spaces/8/index.html</a>. Thanks for sharing your solution again. Have a nice day:)"}], "tags": [], "owner": {"reputation": 1187, "user_id": 5712330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzKU4.png?s=128&g=1", "display_name": "Igor Akhmetov", "link": "https://stackoverflow.com/users/5712330/igor-akhmetov"}, "is_accepted": true, "score": 2, "last_activity_date": 1514461427, "creation_date": 1514461427, "answer_id": 48006894, "question_id": 47991831, "link": "https://stackoverflow.com/questions/47991831/escaping-in-visual-studio-debugging-command-arguments/48006894#48006894", "title": "Escaping in Visual Studio debugging command arguments", "body": "<p>Seems like passing <code>\"&lt;\"</code> works if \"Start debugging\" is used. I was using \"Start Without Debugging\", so the problem can be reproduced by passing <code>\"&lt;\"</code> to an empty console application and invoking \"Start Without Debugging\".</p>\n\n<p>\"Start Without Debugging\" seems to actually invoke cmd.exe, so command arguments are subject to command line interpretation rules. The question then turns out to be really how to escape <code>&lt;</code> in a command line. <code>&lt;</code> outside double quotes can be escaped by using <code>^&lt;</code>, but I still have no idea how to escape <code>&lt;</code> inside double quotes.  </p>\n\n<p>I must say it's somewhat surprising that interpretation of debugging command arguments is subject to different rules depending on how the program is started.</p>\n"}], "owner": {"reputation": 1187, "user_id": 5712330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzKU4.png?s=128&g=1", "display_name": "Igor Akhmetov", "link": "https://stackoverflow.com/users/5712330/igor-akhmetov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 958, "favorite_count": 0, "accepted_answer_id": 48006894, "answer_count": 1, "score": 1, "last_activity_date": 1514461427, "creation_date": 1514376064, "question_id": 47991831, "link": "https://stackoverflow.com/questions/47991831/escaping-in-visual-studio-debugging-command-arguments", "title": "Escaping in Visual Studio debugging command arguments", "body": "<p>I'm trying to pass a command-line argument <code>&lt;</code> (single angle bracket, without quotes) to a C++ program during a debugging session in Visual Studio. As described in <a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/project-settings-for-a-cpp-debug-configuration?f1url=https%3A%2F%2Fmsdn.microsoft.com%2Fquery%2Fdev15.query%3FappId%3DDev15IDEF1%26l%3DEN-US%26k%3Dk(VC.Project.IVCLocalDebugPageObject.CommandArguments)%26rd%3Dtrue\" rel=\"nofollow noreferrer\">Project settings for a C++ debug configuration</a>, <code>&lt;</code> has special meaning as a redirection operator, but it does not specify how to escape it. I've tried using <code>\"&lt;\"</code> and <code>^&lt;</code>, but none of them do what I want. Invoking the command from command line with the <code>\"&lt;\"</code> argument works as expected. </p>\n\n<p>So it looks like debugging command arguments are preprocessed first. Is there any way to escape a character from this preprocessing?</p>\n"}, {"tags": ["c++", "oop"], "answers": [{"tags": [], "owner": {"reputation": 26196, "user_id": 1841194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e65b668131c96399c25c6fae3fff8da5?s=128&d=identicon&r=PG&f=1", "display_name": "frogatto", "link": "https://stackoverflow.com/users/1841194/frogatto"}, "is_accepted": true, "score": 0, "last_activity_date": 1514376477, "creation_date": 1514376477, "answer_id": 47991925, "question_id": 47991585, "link": "https://stackoverflow.com/questions/47991585/c-read-object-from-file-with-array-attribute/47991925#47991925", "title": "c++ read object from file with array attribute", "body": "<p>If your <code>data</code> is fixed and always of length 4, you can repeat <code>%ld</code> (format specifier for <code>long</code>) four times in the <code>fscanf</code> pattern.</p>\n\n<pre><code>fscanf(file, \"%f%s%i%ld%ld%ld%ld\",\n    &amp;PretUtilitati, &amp;NumeUtilitati, &amp;Numarachizitii,\n    &amp;data[0], &amp;data[1], &amp;data[2], &amp;data[3]);\n</code></pre>\n\n<p>And if it's not fixed length, you should first read its length and then using a loop <code>fscanf</code> its entries.</p>\n"}], "owner": {"reputation": 3, "user_id": 9144939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52a39b22e794091a86d30e45e782beca?s=128&d=identicon&r=PG&f=1", "display_name": "JackDaniels", "link": "https://stackoverflow.com/users/9144939/jackdaniels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 47991925, "answer_count": 1, "score": -3, "last_activity_date": 1514376477, "creation_date": 1514375089, "question_id": 47991585, "link": "https://stackoverflow.com/questions/47991585/c-read-object-from-file-with-array-attribute", "title": "c++ read object from file with array attribute", "body": "<p>i have a Class and i want to read objects into an array of Objects but i have a problem with an attribute of my class (long data[4];). I don't know how can i read it. In Read Method i want to read all the attributes from file and also create a vector of data elements and append the constructor with that vector witch is read from file.</p>\n\n<pre><code>//Class:\nclass Utilitati{\n    const int id;\n    float PretUtilitati;\n    char * NumeUtilitati;\n    int Numarachizitii;\n    long data[4];  --This is the problem( I dont know how can i read it )\n\n\n//Constructor:\n    Utilitati(float PretUtilitati, char * NumeUtilitati, int Numarachizitii, long data[]) :id(3){\n        this-&gt;PretUtilitati = PretUtilitati;\n        this-&gt;NumeUtilitati = new char[strlen(NumeUtilitati) + 1];\n        strcpy(this-&gt;NumeUtilitati, NumeUtilitati);\n        this-&gt;Numarachizitii = Numarachizitii;\n        for (int i = 0; i &lt; Numarachizitii; i++)\n            this-&gt;data[i] = data[i];\n    }\n\nData must be a vector from file.\n//Read Method:\nvoid citireFisier(char *numeFisier, Utilitati ** vectUtilitati)\n{\n    FILE* file = fopen(numeFisier, \"r+\");\n    if (!file)\n        cout &lt;&lt; \"\\nEroare citire!\" &lt;&lt; endl;\n    else\n    {\n        int contor = 0;\n        float PretUtilitati;\n        char NumeUtilitati[20];\n        int Numarachizitii;\n        long data[4];\n\n        while (!feof(file))\n        {\n            fscanf(file, \"%f%s%i%l\", &amp;PretUtilitati, &amp;NumeUtilitati, &amp;Numarachizitii, &amp;data);\n            Utilitati* NewUtilitati = new Utilitati(PretUtilitati, NumeUtilitati, Numarachizitii,data);\n            vectUtilitati[contor++] = NewUtilitati;\n        }\n    }\n}\n</code></pre>\n\n<blockquote>\n<pre><code>   The file has the next format: \n    100   //float PretUtilitati\n    Gaze   //char * NumeUtilitati;\n    3      // int Numarachizitii;\n    20171012  //long data[0];\n    20151012   ////long data[2];\n    20011023   ///long data[Numarachizitii];\n</code></pre>\n</blockquote>\n"}, {"tags": ["c++", "sse"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1514375361, "post_id": 47991557, "comment_id": 82951493, "body": "Why don&#39;t you show the intermediate values of <code>a</code> and <code>b</code>?"}, {"owner": {"reputation": 553, "user_id": 7812289, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f80e9a8705db99023c5c7989bd2a793d?s=128&d=identicon&r=PG&f=1", "display_name": "Blue", "link": "https://stackoverflow.com/users/7812289/blue"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1514375505, "post_id": 47991557, "comment_id": 82951550, "body": "Check edit....."}], "answers": [{"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1514478452, "post_id": 47991839, "comment_id": 82990284, "body": "Or you could use SSE1 <code>andps</code> on integer data if you want.  (<a href=\"https://stackoverflow.com/questions/26942952/difference-between-the-avx-instructions-vxorpd-and-vpxor\">There are minor performance implications</a>).  It&#39;s still an AND, it doesn&#39;t care about the meaning of the bits until you use an actual FP instruction.  If you never do that, and just store the result, then you&#39;re fine."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1514454166, "last_edit_date": 1514454166, "creation_date": 1514376116, "answer_id": 47991839, "question_id": 47991557, "link": "https://stackoverflow.com/questions/47991557/sse-intrinsics-mm-and-ps-odd-behaviour/47991839#47991839", "title": "SSE intrinsics - _mm_and_ps odd behaviour", "body": "<p>The <a href=\"https://msdn.microsoft.com/en-us/library/73ck1xc5(v=vs.100).aspx\" rel=\"nofollow noreferrer\">documentation</a> I found says:</p>\n\n<blockquote>\n  <p>Computes the bitwise AND of the four <strong>single-precision, floating-point</strong> values of a and b.</p>\n</blockquote>\n\n<p>(my emphasis)</p>\n\n<p>2 and 4 will have the same mantissa (0, plus an implied leading 1 bit), and exponents of 128 and 129 respectively.  The bitwise and of those is a zero mantissa and an exponent of 128 (== 2.0).</p>\n\n<hr>\n\n<p><strong>Edit</strong></p>\n\n<p>If you want to do a bit-wise AND of non-negative integers, you can add an offset.  If you use an offset of 8388608 (== 1&lt;&lt;23), then you can do bitwise operations on 0..8388607 as you would expect.</p>\n\n<pre><code>const float offset=8388608;\n__m128 mm_offset = _mm_set1_ps();\n__m128 a   = _mm_setr_ps( 1, 2, 3, 4 );\na =_mm_add_ps(mm_offset,a);\n__m128 b   = _mm_set1_ps( 2+offset );\n__m128 res = _mm_and_ps( a, b );\nres = _mm_sub_ps(res,mm_offset);\n</code></pre>\n"}], "owner": {"reputation": 553, "user_id": 7812289, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f80e9a8705db99023c5c7989bd2a793d?s=128&d=identicon&r=PG&f=1", "display_name": "Blue", "link": "https://stackoverflow.com/users/7812289/blue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 47991839, "answer_count": 1, "score": 2, "last_activity_date": 1514454166, "creation_date": 1514374983, "last_edit_date": 1592644375, "question_id": 47991557, "link": "https://stackoverflow.com/questions/47991557/sse-intrinsics-mm-and-ps-odd-behaviour", "title": "SSE intrinsics - _mm_and_ps odd behaviour", "body": "<p>The following piece of code:</p>\n<pre><code>__m128 a   = _mm_setr_ps( 1, 2, 3, 4 );\n__m128 b   = _mm_set1_ps( 2 );\n__m128 res = _mm_and_ps( a, b );\ncout &lt;&lt; a[0] &lt;&lt; &quot; &quot; &lt;&lt; a[1] &lt;&lt; &quot; &quot; &lt;&lt; a[2] &lt;&lt; &quot; &quot; &lt;&lt; a[3] &lt;&lt; endl;\ncout &lt;&lt; b[0] &lt;&lt; &quot; &quot; &lt;&lt; b[1] &lt;&lt; &quot; &quot; &lt;&lt; b[2] &lt;&lt; &quot; &quot; &lt;&lt; b[3] &lt;&lt; endl;\ncout &lt;&lt; res[0] &lt;&lt; &quot; &quot; &lt;&lt; res[1] &lt;&lt; &quot; &quot; &lt;&lt; res[2] &lt;&lt; &quot; &quot; &lt;&lt; res[3] &lt;&lt; endl;\ncout&lt;&lt;endl;\ncout &lt;&lt; ( 1 &amp; 2 ) &lt;&lt; &quot; &quot; &lt;&lt; ( 2 &amp; 2 ) &lt;&lt; &quot; &quot; &lt;&lt; ( 3 &amp; 2 ) &lt;&lt; &quot; &quot; &lt;&lt; ( 4 &amp; 2 ) &lt;&lt; endl;\n</code></pre>\n<p>results in:</p>\n<pre><code>1 2 3 4\n2 2 2 2\n0 2 2 2\n\n0 2 2 0\n</code></pre>\n<p>Shouldn't the result of the SSE operation be <code>0 2 2 0</code> because <code>2 = 010, 4 = 100 =&gt; 2&amp;4 = 0</code>.<br />\nAccording to the documentation:</p>\n<blockquote>\n<p>__m128 _mm_and_ps(__m128 a, __m128 b)</p>\n<p>Computes the bitwise AND of the four SP FP values of a and b.</p>\n<p>R0 R1 R2 R3</p>\n<p>a0 &amp; b0 a1 &amp; b1 a2 &amp; b2 a3 &amp; b3</p>\n</blockquote>\n"}, {"tags": ["c++", "class", "templates", "template-specialization", "sfinae"], "comments": [{"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1514375027, "post_id": 47991321, "comment_id": 82951355, "body": "have you tried placing the &quot;Dim&gt;x&quot; checks as the last &amp;&amp; term ? I&#39;m not sure the compiler is right, or if it&#39;s just implementation defined, but it may shortcircuit the enable_if condition and consider its value non-dependent on VDim, hence giving a compiler error during member declaration instantiation (that is, at Mat&lt;2&gt; instantation point)"}, {"owner": {"reputation": 868, "user_id": 4051512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd3beb8e3334400c9d43118b2206a62?s=128&d=identicon&r=PG&f=1", "display_name": "papagaga", "link": "https://stackoverflow.com/users/4051512/papagaga"}, "edited": false, "score": 0, "creation_date": 1514375414, "post_id": 47991321, "comment_id": 82951514, "body": "There&#39;s something you&#39;re not showing us. Member functions of templated classes aren&#39;t instantiated if they&#39;re not used. Could you show us the calling site?"}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "reply_to_user": {"reputation": 868, "user_id": 4051512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd3beb8e3334400c9d43118b2206a62?s=128&d=identicon&r=PG&f=1", "display_name": "papagaga", "link": "https://stackoverflow.com/users/4051512/papagaga"}, "edited": false, "score": 4, "creation_date": 1514375760, "post_id": 47991321, "comment_id": 82951656, "body": "@papagaga that&#39;s not entirely correct, member function declarations (but not their definitions) are instantiated when the class template is. So, if the declaration contains an expressions that&#39;s value-dependent <i>only</i> on the class template parameter, and that expression results ill formed, an error will be raised even if the function is not &quot;used&quot;..."}, {"owner": {"reputation": 26196, "user_id": 1841194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e65b668131c96399c25c6fae3fff8da5?s=128&d=identicon&r=PG&f=1", "display_name": "frogatto", "link": "https://stackoverflow.com/users/1841194/frogatto"}, "edited": false, "score": 0, "creation_date": 1514375942, "post_id": 47991321, "comment_id": 82951749, "body": "Both of them compile fine. <a href=\"https://www.ideone.com/g4rRMu\" rel=\"nofollow noreferrer\">ideone.com/g4rRMu</a>"}, {"owner": {"reputation": 868, "user_id": 4051512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd3beb8e3334400c9d43118b2206a62?s=128&d=identicon&r=PG&f=1", "display_name": "papagaga", "link": "https://stackoverflow.com/users/4051512/papagaga"}, "reply_to_user": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1514376057, "post_id": 47991321, "comment_id": 82951787, "body": "@MassimilianoJanes: in this case <code>getVectorBegin</code> isn&#39;t value-dependent on the class template parameter only, is it? But thanks for the precision. / @Hi I&#39;m Frogatto: that&#39;s because there&#39;s something in the constructor invoking <code>getVectorBegin</code> we don&#39;t see in the snippet."}, {"owner": {"reputation": 16438, "user_id": 312896, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/57c5b6cdd1a94aef510d5dce28992494?s=128&d=identicon&r=PG", "display_name": "Yola", "link": "https://stackoverflow.com/users/312896/yola"}, "reply_to_user": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1514379748, "post_id": 47991321, "comment_id": 82953463, "body": "@MassimilianoJanes yes, it works this way. You can post it as an answer if you want. Also, some elaboration would be appreciated. Thanks! And thanks once more for your second comment!"}], "answers": [{"tags": [], "owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "is_accepted": true, "score": 2, "last_activity_date": 1514389939, "last_edit_date": 1514389939, "creation_date": 1514388037, "answer_id": 47994579, "question_id": 47991321, "link": "https://stackoverflow.com/questions/47991321/sfinae-on-template-member-overloading/47994579#47994579", "title": "SFINAE on template member overloading", "body": "<p>This is going to be tricky.</p>\n\n<p>I believe your code is ok for <code>Dim&gt;=2</code> but it's ill-formed when given a <code>Dim&lt;=1</code> argument, with no diagnostic required, but for a different reason your compiler is complaining about.</p>\n\n<hr>\n\n<p>For <code>Dim&gt;=2</code> it is correct, but your compiler (MSVC++ I guess) complains in the <code>Dim==2</code> case. Given the error description, I suppose the reason is that it's erroneously short-circuiting the &amp;&amp; expressions in the <code>enable_if</code> conditions, interpreting them as value-dependent <em>only</em> on the class template parameter when <code>Dim &gt; x</code> is false. The workaround is to move the <code>Dim &gt; x</code> checks as the last term of the &amp;&amp; expression.</p>\n\n<p>To elaborate, the situation is  conceptually similar to the following code snippet:</p>\n\n<pre><code>template &lt;size_t N&gt;\nclass foo\n{\n    template &lt;typename E = enable_if_t&lt;(N&gt;0)&gt;&gt;\n    void bar();\n};\n\nfoo&lt;1&gt; f1;\nfoo&lt;0&gt; f0; // fails\n</code></pre>\n\n<p>here, the instantation of <code>foo</code> triggers the instantiation of the declarations (but not the definitions) of its members (see <strong>[temp.inst]#1</strong>); but, only checks of names and expressions that <em>depend</em> on the <em>member</em> template parameters are postponed at their respective instantiation points. Here, the type name <code>enable_if_t&lt;(N&gt;0)&gt;</code> does <em>not</em> depend on any <code>bar()</code> template parameter (<code>N</code> belongs to <code>foo</code>'s template parameters list) hence is non-dependent, resulting in <code>enable_if&lt;false&gt;::type</code> when <code>N == 0</code>, so the error.</p>\n\n<hr>\n\n<p>Going back to your code, consider:</p>\n\n<blockquote>\n  <p><strong>[temp.dep.constexpr]#1</strong> Except as described below, a constant expression is value-dependent <strong>if any subexpression</strong> is value-dependent</p>\n</blockquote>\n\n<p>and nowhere shortcircuiting operators are mentioned as an exception. So, the expression, say, <code>Dim &gt; 1 &amp;&amp; VDim == 0</code> is value-dependent even if <code>Dim&lt;=1</code>; therefore, no error should occur until substitution of <code>VDim</code> (where SFINAE would apply). In fact, both gcc and clang <a href=\"https://godbolt.org/g/HAi8Cg\" rel=\"nofollow noreferrer\">agree</a> on accepting your code.</p>\n\n<p>That said, when <code>Dim&lt;=1</code> the first and third <code>getVectorBegin</code> overloads actually declare <em>functionally equivalent</em> member templates (see <strong>[temp.over.link]#6</strong>), so I believe it's ill-formed in that case.</p>\n"}], "owner": {"reputation": 16438, "user_id": 312896, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/57c5b6cdd1a94aef510d5dce28992494?s=128&d=identicon&r=PG", "display_name": "Yola", "link": "https://stackoverflow.com/users/312896/yola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 47994579, "answer_count": 1, "score": 2, "last_activity_date": 1514389939, "creation_date": 1514373862, "question_id": 47991321, "link": "https://stackoverflow.com/questions/47991321/sfinae-on-template-member-overloading", "title": "SFINAE on template member overloading", "body": "<p>I would like to specialize <code>getVector</code> member function, i'm trying to use SFINAE for this. But it works only if Dim is 3 or greater.</p>\n\n<pre><code>template &lt;size_t Dim&gt;\nclass Mat\n{\n    ...\n    template &lt;size_t VDim, typename enable_if&lt;(Dim &gt; 1 &amp;&amp; VDim == 0)&gt;::type* = nullptr&gt;\n        void getVectorBegin(const array&lt;size_t, Dim - 1&gt;&amp; indexAfter) const;\n\n    template &lt;size_t VDim, typename enable_if&lt;(Dim &gt; 2 &amp;&amp; 0 &lt; VDim &amp;&amp; VDim &lt; Dim-1)&gt;::type* = nullptr&gt;\n        void getVectorBegin(const array&lt;size_t, VDim&gt;&amp; indexBefore, const array&lt;size_t, Dim - VDim - 1&gt;&amp; indexAfter) const;\n\n    template &lt;size_t VDim, typename enable_if&lt;(Dim &gt; 1 &amp;&amp; VDim == Dim-1)&gt;::type* = nullptr&gt;\n        void getVectorBegin(const array&lt;size_t, Dim - 1&gt;&amp; indexBefore) const;\n};\n\nMat&lt;3&gt; m;\nMat&lt;2&gt; m; // error C2039: 'type': is not a member of 'std::enable_if&lt;false,_Ty&gt;'\n</code></pre>\n"}, {"tags": ["c++", "c++11", "default-constructor"], "comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1514373870, "post_id": 47991276, "comment_id": 82950860, "body": "If you change B, D will automatically do the-right-thing."}, {"owner": {"reputation": 2258, "user_id": 4223664, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-W4fi6U1Ff8I/AAAAAAAAAAI/AAAAAAAAAG8/H1w3xH-kWig/photo.jpg?sz=128", "display_name": "Adrien Leravat", "link": "https://stackoverflow.com/users/4223664/adrien-leravat"}, "edited": false, "score": 0, "creation_date": 1514374002, "post_id": 47991276, "comment_id": 82950917, "body": "What compiler are you using? Could that be because your struct is empty and does nothing, hence the compiler skips it entirely as defined with <code>= default</code>?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1514374232, "post_id": 47991276, "comment_id": 82951018, "body": "g++ 5.1.0 <code>note: &#39;D::D()&#39; is implicitly deleted because the default definition would be ill-formed:</code>  and  <code>error: no matching function for call to &#39;B::B()&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "is_accepted": true, "score": 12, "last_activity_date": 1514376760, "last_edit_date": 1514376760, "creation_date": 1514374200, "answer_id": 47991389, "question_id": 47991276, "link": "https://stackoverflow.com/questions/47991276/using-default-in-meaning-of-delete/47991389#47991389", "title": "Using =default in meaning of =delete", "body": "<p><code>g++</code> gives a nice explanation in the error:</p>\n\n<blockquote>\n  <p>bla.cpp:6:5: note: \u2018D::D()\u2019 is implicitly deleted because the default definition would be ill-formed:\n       D() = default;</p>\n</blockquote>\n\n<p>The default constructor will attempt to construct all parts of <code>D</code>. You have no fields, but it has an initial <code>B</code> - which has no empty constructor, only an <code>int</code> one.</p>\n\n<p>The default behavior makes sense - <code>D</code> shouldn't have an empty constructor unless it explicitly states which <code>int</code> to construct the <code>B</code> with, and the compiler doesn't want to guess. Otherwise you will have a <code>D</code> object, and depending on what happens in the <code>B</code> constructor <code>B</code> may contain junk, for example if initializing a field.</p>\n\n<p>I'm not sure if you meant your question literally when you ask why is this \"<strong>allowed</strong>\", as the <code>B</code> default constructor is deleted, but I can think of two reasons:</p>\n\n<ol>\n<li>This behavior is well defined, and there is no reason to disallow it. Detecting the error only when you attempt to construct something illegally is done anyway.</li>\n<li>It's more flexible - changing <code>B</code> to have a default constructor will automatically allow <code>D</code> to have one.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 4338, "user_id": 3240681, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4sQMO.jpg?s=128&g=1", "display_name": "\u03b1\u03bb\u03b5\u03c7\u03bf\u03bb\u03c5\u03c4", "link": "https://stackoverflow.com/users/3240681/%ce%b1%ce%bb%ce%b5%cf%87%ce%bf%ce%bb%cf%85%cf%84"}, "edited": false, "score": 0, "creation_date": 1514375431, "post_id": 47991399, "comment_id": 82951520, "body": "I know that <code>=delete</code> is not <code>=default</code>, but is there a diffirence in my particalar case? I&#39;m pretty sure that nothing changed semantically if I change <code>=default</code> to <code>=delete</code>. Am I wrong?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 4338, "user_id": 3240681, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4sQMO.jpg?s=128&g=1", "display_name": "\u03b1\u03bb\u03b5\u03c7\u03bf\u03bb\u03c5\u03c4", "link": "https://stackoverflow.com/users/3240681/%ce%b1%ce%bb%ce%b5%cf%87%ce%bf%ce%bb%cf%85%cf%84"}, "edited": false, "score": 2, "creation_date": 1514375711, "post_id": 47991399, "comment_id": 82951636, "body": "@alexolut - The function is deleted either way. The cause is different. If in the future <code>B</code> gets a default c&#39;tor, <code>D</code> would also. If you flat out delete it, it won&#39;t. Some would say it&#39;s a major semantic difference."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 6, "last_activity_date": 1514374221, "creation_date": 1514374221, "answer_id": 47991399, "question_id": 47991276, "link": "https://stackoverflow.com/questions/47991276/using-default-in-meaning-of-delete/47991399#47991399", "title": "Using =default in meaning of =delete", "body": "<blockquote>\n  <p>Is there any reason (use case) to allow = default for D's constructor, when it's actually works as = delete;?</p>\n</blockquote>\n\n<p>It doesn't work as <code>=delete</code>. It says just what it's supposed to say. That you explicitly want the compiler generated default implementation.</p>\n\n<p>It just so happens that the compiler generated one has to be defined deleted. Because the default constructor of <code>B</code> is implicitly deleted.</p>\n"}, {"tags": [], "owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "is_accepted": false, "score": 1, "last_activity_date": 1514374499, "creation_date": 1514374499, "answer_id": 47991459, "question_id": 47991276, "link": "https://stackoverflow.com/questions/47991276/using-default-in-meaning-of-delete/47991459#47991459", "title": "Using =default in meaning of =delete", "body": "<p><code>B</code> has a non-default constructor (its constructor takes an argument that does not have a default value).</p>\n\n<p>The derived <code>D</code> class therefore does not have a default constructor, its default constructor gets deleted (as the compiler can't generate a constructor for <code>D</code> that can call the <code>B(int)</code> constructor of its parent class.)</p>\n\n<p><code>D() = default;</code> just says that you want the default constructor for <code>D</code> , and as described above, the default constructor is deleted.</p>\n"}], "owner": {"reputation": 4338, "user_id": 3240681, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4sQMO.jpg?s=128&g=1", "display_name": "\u03b1\u03bb\u03b5\u03c7\u03bf\u03bb\u03c5\u03c4", "link": "https://stackoverflow.com/users/3240681/%ce%b1%ce%bb%ce%b5%cf%87%ce%bf%ce%bb%cf%85%cf%84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 47991389, "answer_count": 3, "score": 8, "last_activity_date": 1514588549, "creation_date": 1514373652, "last_edit_date": 1514588549, "question_id": 47991276, "link": "https://stackoverflow.com/questions/47991276/using-default-in-meaning-of-delete", "title": "Using =default in meaning of =delete", "body": "<p>The following code is well compiled:</p>\n\n<pre><code>struct B { \n    B(int) {} \n};\n\nstruct D : B {\n    D() = default;\n};\n</code></pre>\n\n<p>Until I have to create an instance of class <code>D</code>:</p>\n\n<pre><code>D d; // error: use of deleted function 'D::D()'\n</code></pre>\n\n<p>Is there any reason (use case) to allow <code>= default</code> for <code>D</code>'s constructor, when it's actually works as <code>= delete;</code>?</p>\n"}, {"tags": ["c++", "gtkmm"], "answers": [{"tags": [], "owner": {"reputation": 185, "user_id": 9126886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2aeb3d40eb9869bde7d8f3ef0d8d40da?s=128&d=identicon&r=PG&f=1", "display_name": "P.B.", "link": "https://stackoverflow.com/users/9126886/p-b"}, "is_accepted": true, "score": 0, "last_activity_date": 1518172445, "creation_date": 1518172445, "answer_id": 48703872, "question_id": 47991194, "link": "https://stackoverflow.com/questions/47991194/icon-size-in-gtkmm-3-18-0/48703872#48703872", "title": "Icon size in gtkmm 3.18.0", "body": "<p>I didn't find any way to change icon size in gtkmm 3.18 (or gtk 3.18). I managed to find the way to update the library though. Basically you can do it from source but for ubuntu 16.04 (and probably for older versions) gtkmm 3.2 doesn't work very well. The best solution is to update whole ubuntu distro to 17.10. Gtk/gtkmm is going to be update with distro and it will be working well.</p>\n\n<p>For me <a href=\"https://www.linuxbabe.com/ubuntu/upgrade-from-ubuntu-16-0417-04-to-ubuntu-17-10\" rel=\"nofollow noreferrer\">this update tutorial</a> worked well. </p>\n"}], "owner": {"reputation": 185, "user_id": 9126886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2aeb3d40eb9869bde7d8f3ef0d8d40da?s=128&d=identicon&r=PG&f=1", "display_name": "P.B.", "link": "https://stackoverflow.com/users/9126886/p-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 48703872, "answer_count": 1, "score": 0, "last_activity_date": 1518172445, "creation_date": 1514373337, "question_id": 47991194, "link": "https://stackoverflow.com/questions/47991194/icon-size-in-gtkmm-3-18-0", "title": "Icon size in gtkmm 3.18.0", "body": "<p>I'm writing application using C++ and gtkmm. I figured out how to set icon as StackSwitcher label but now i have a problem with icon size. The stackswitcher displays them in 16x16 size regardless image native size. </p>\n\n<p>I was trying to use the <code>Gtk::StackSwitcher::property_icon_size()</code> but it doesn't work beacuse of gtkmm version. This member function was introduced in gtkmm 3.20 and my version is 3.18. What is more i cannot update gtkmm. When i'm trying with apt-get (<code>sudo apt-get install --only-upgrade libgtkmm-3.0-dev</code>) it says that <code>libgtkmm-3.0-dev is already the newest version (3.18.0-1)</code>.\nI was also trying to update it manually. I was able to download and install needed libraries but then my code has stopped working (when i compiled whole application i get quite a lot of errors like this: <code>/usr/local/include/gtkmm-3.0/gtkmm/targetentry.h:48:24: error: expected \u2018;\u2019 at end of member declaration    virtual ~TargetEntry() noexcept</code>)</p>\n\n<p>So my question is: Is it any way to change icon size in gtkmm 3.18 or how to update gtkmm to newer version to use <code>property_icon_size()</code></p>\n"}, {"tags": ["c++", "ios", "objective-c", "delegates", "protocols"], "comments": [{"owner": {"reputation": 18926, "user_id": 6190582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xha3E.png?s=128&g=1", "display_name": "Reinier Melian", "link": "https://stackoverflow.com/users/6190582/reinier-melian"}, "edited": false, "score": 0, "creation_date": 1514373469, "post_id": 47991164, "comment_id": 82950653, "body": "can you post your <code>renderer</code> object declaration in your <code>ViewController</code>?"}, {"owner": {"reputation": 1389, "user_id": 7007326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9657d9c076ab0db7fe0f3f1486e66fd?s=128&d=identicon&r=PG&f=1", "display_name": "User511", "link": "https://stackoverflow.com/users/7007326/user511"}, "edited": false, "score": 1, "creation_date": 1514373557, "post_id": 47991164, "comment_id": 82950701, "body": "Try to replace this - weak with strong in myreneder.h"}, {"owner": {"reputation": 18926, "user_id": 6190582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xha3E.png?s=128&g=1", "display_name": "Reinier Melian", "link": "https://stackoverflow.com/users/6190582/reinier-melian"}, "reply_to_user": {"reputation": 1389, "user_id": 7007326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9657d9c076ab0db7fe0f3f1486e66fd?s=128&d=identicon&r=PG&f=1", "display_name": "User511", "link": "https://stackoverflow.com/users/7007326/user511"}, "edited": false, "score": 0, "creation_date": 1514373691, "post_id": 47991164, "comment_id": 82950770, "body": "@User511 the delegate should be weak and not strong, because if is strong  you are creating a retain cycle, and the delegate object will never be deallocated retaining also the viewController in memory"}, {"owner": {"reputation": 750, "user_id": 3308174, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/414b349c4bf9580d8482d099c9348dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Pratik Jamariya", "link": "https://stackoverflow.com/users/3308174/pratik-jamariya"}, "reply_to_user": {"reputation": 18926, "user_id": 6190582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xha3E.png?s=128&g=1", "display_name": "Reinier Melian", "link": "https://stackoverflow.com/users/6190582/reinier-melian"}, "edited": false, "score": 0, "creation_date": 1514373887, "post_id": 47991164, "comment_id": 82950870, "body": "@ReinierMelian i agree with you, but here it seems the <code>weak</code> reference gets deallocated."}, {"owner": {"reputation": 750, "user_id": 3308174, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/414b349c4bf9580d8482d099c9348dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Pratik Jamariya", "link": "https://stackoverflow.com/users/3308174/pratik-jamariya"}, "edited": false, "score": 0, "creation_date": 1514373947, "post_id": 47991164, "comment_id": 82950893, "body": "@Brain Scherady what attribute you set to your <code>renderer</code>?"}, {"owner": {"reputation": 18926, "user_id": 6190582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xha3E.png?s=128&g=1", "display_name": "Reinier Melian", "link": "https://stackoverflow.com/users/6190582/reinier-melian"}, "reply_to_user": {"reputation": 750, "user_id": 3308174, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/414b349c4bf9580d8482d099c9348dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Pratik Jamariya", "link": "https://stackoverflow.com/users/3308174/pratik-jamariya"}, "edited": false, "score": 1, "creation_date": 1514374016, "post_id": 47991164, "comment_id": 82950925, "body": "@PratikJamariya that seems to do with the fact that maybe the render declaration in the ViewController is weak or assign I am assuming that the render is begin deallocating after the viewDidLoad scope"}, {"owner": {"reputation": 18926, "user_id": 6190582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xha3E.png?s=128&g=1", "display_name": "Reinier Melian", "link": "https://stackoverflow.com/users/6190582/reinier-melian"}, "reply_to_user": {"reputation": 750, "user_id": 3308174, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/414b349c4bf9580d8482d099c9348dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Pratik Jamariya", "link": "https://stackoverflow.com/users/3308174/pratik-jamariya"}, "edited": false, "score": 0, "creation_date": 1514374078, "post_id": 47991164, "comment_id": 82950944, "body": "@PratikJamariya that is why I asked in my first comment about that declaration"}, {"owner": {"reputation": 750, "user_id": 3308174, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/414b349c4bf9580d8482d099c9348dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Pratik Jamariya", "link": "https://stackoverflow.com/users/3308174/pratik-jamariya"}, "edited": false, "score": 0, "creation_date": 1514374143, "post_id": 47991164, "comment_id": 82950976, "body": "oops, i missed that, my bad!"}, {"owner": {"reputation": 18926, "user_id": 6190582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xha3E.png?s=128&g=1", "display_name": "Reinier Melian", "link": "https://stackoverflow.com/users/6190582/reinier-melian"}, "reply_to_user": {"reputation": 750, "user_id": 3308174, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/414b349c4bf9580d8482d099c9348dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Pratik Jamariya", "link": "https://stackoverflow.com/users/3308174/pratik-jamariya"}, "edited": false, "score": 0, "creation_date": 1514374277, "post_id": 47991164, "comment_id": 82951037, "body": "@PratikJamariya not problem, anyway the OP is missing, we are discussing his issue and hi is missing lol"}, {"owner": {"reputation": 750, "user_id": 3308174, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/414b349c4bf9580d8482d099c9348dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Pratik Jamariya", "link": "https://stackoverflow.com/users/3308174/pratik-jamariya"}, "reply_to_user": {"reputation": 18926, "user_id": 6190582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xha3E.png?s=128&g=1", "display_name": "Reinier Melian", "link": "https://stackoverflow.com/users/6190582/reinier-melian"}, "edited": false, "score": 1, "creation_date": 1514374434, "post_id": 47991164, "comment_id": 82951112, "body": "Haha :D !! @ReinierMelian i think our discussion may help OP and he might solve his issue with our discussion :P"}, {"owner": {"reputation": 18926, "user_id": 6190582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xha3E.png?s=128&g=1", "display_name": "Reinier Melian", "link": "https://stackoverflow.com/users/6190582/reinier-melian"}, "edited": false, "score": 0, "creation_date": 1514374594, "post_id": 47991164, "comment_id": 82951190, "body": "@BrianScherady can you post your <code>renderer</code> object declaration in your <code>ViewController</code>?"}, {"owner": {"reputation": 61, "user_id": 3944725, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/af4e126816651be77c8dba07c42f7ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Scherady", "link": "https://stackoverflow.com/users/3944725/brian-scherady"}, "edited": false, "score": 0, "creation_date": 1514375508, "post_id": 47991164, "comment_id": 82951551, "body": "I am using simply: @implementation myViewController {     MyRenderer *renderer; }"}, {"owner": {"reputation": 750, "user_id": 3308174, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/414b349c4bf9580d8482d099c9348dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Pratik Jamariya", "link": "https://stackoverflow.com/users/3308174/pratik-jamariya"}, "reply_to_user": {"reputation": 18926, "user_id": 6190582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xha3E.png?s=128&g=1", "display_name": "Reinier Melian", "link": "https://stackoverflow.com/users/6190582/reinier-melian"}, "edited": false, "score": 0, "creation_date": 1514375797, "post_id": 47991164, "comment_id": 82951679, "body": "@ReinierMelian, OP is using iVar and the default reference of iVar is <code>__strong</code> if i&#39;m not wrong."}, {"owner": {"reputation": 18926, "user_id": 6190582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xha3E.png?s=128&g=1", "display_name": "Reinier Melian", "link": "https://stackoverflow.com/users/6190582/reinier-melian"}, "edited": false, "score": 0, "creation_date": 1514375906, "post_id": 47991164, "comment_id": 82951730, "body": "Its easy to check, @BrianScherady in the <code>viewDidAppear</code> check if <code>self.renderer</code> is <code>nil</code> please and let us know"}, {"owner": {"reputation": 1691, "user_id": 4831524, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/IUV3S.jpg?s=128&g=1", "display_name": "Antony Raphel", "link": "https://stackoverflow.com/users/4831524/antony-raphel"}, "edited": false, "score": 0, "creation_date": 1514376664, "post_id": 47991164, "comment_id": 82952088, "body": "when <code>sendObjects</code> method is called?"}, {"owner": {"reputation": 3626, "user_id": 3331527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q1AW0.jpg?s=128&g=1", "display_name": "karthikeyan", "link": "https://stackoverflow.com/users/3331527/karthikeyan"}, "edited": false, "score": 0, "creation_date": 1514377188, "post_id": 47991164, "comment_id": 82952322, "body": "Did you override initilize method to myrender class?  - (instancetype)init {     self = [super init];     if (self) {         // Initialize self     }     return self; }"}, {"owner": {"reputation": 61, "user_id": 3944725, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/af4e126816651be77c8dba07c42f7ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Scherady", "link": "https://stackoverflow.com/users/3944725/brian-scherady"}, "edited": false, "score": 0, "creation_date": 1514378361, "post_id": 47991164, "comment_id": 82952880, "body": "Setting a breakpoint just after:     renderer.myDelegate = self ;    in myVieController.m - I get renderer not nil and myDelegate also not nil."}, {"owner": {"reputation": 61, "user_id": 3944725, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/af4e126816651be77c8dba07c42f7ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Scherady", "link": "https://stackoverflow.com/users/3944725/brian-scherady"}, "edited": false, "score": 0, "creation_date": 1514379903, "post_id": 47991164, "comment_id": 82953548, "body": "YES ! I initilize myrender class? - In myRender.mm I have (instancetype)init { self = [super init]; if (self) { // Initialize self } return self; } - Does it reset myDelegate to nil? If yes what should I do?"}, {"owner": {"reputation": 61, "user_id": 3944725, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/af4e126816651be77c8dba07c42f7ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Scherady", "link": "https://stackoverflow.com/users/3944725/brian-scherady"}, "edited": false, "score": 0, "creation_date": 1514383630, "post_id": 47991164, "comment_id": 82955258, "body": "Mmmmm! (instancetype)init { ... does not seem to be the cause of the problem; I commented it out, but it did not help."}, {"owner": {"reputation": 11198, "user_id": 8798729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cimg2.jpg?s=128&g=1", "display_name": "trungduc", "link": "https://stackoverflow.com/users/8798729/trungduc"}, "edited": false, "score": 0, "creation_date": 1514390527, "post_id": 47991164, "comment_id": 82958289, "body": "@BrianScherady It&#39;s better if you can add full code of these 2 classes. The code in your question doesn&#39;t cause problem."}, {"owner": {"reputation": 50374, "user_id": 568283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/120ceee2dc40d539b9983265a2e0a2f8?s=128&d=identicon&r=PG", "display_name": "CRD", "link": "https://stackoverflow.com/users/568283/crd"}, "edited": false, "score": 0, "creation_date": 1514393005, "post_id": 47991164, "comment_id": 82959409, "body": "In <code>viewDidLoad</code> after setting it up could you <code>NSLog()</code> <code>renderer</code> using the <code>%p</code> (that shows the pointer value) format? Similarly in <code>sendObjects</code> log <code>self</code> using <code>%p</code>. Do both logs print the same of a different value? If the latter you have multiple <code>MyRender</code> instances."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 3944725, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/af4e126816651be77c8dba07c42f7ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Scherady", "link": "https://stackoverflow.com/users/3944725/brian-scherady"}, "is_accepted": true, "score": 0, "last_activity_date": 1514451869, "creation_date": 1514451869, "answer_id": 48004564, "question_id": 47991164, "link": "https://stackoverflow.com/questions/47991164/objective-c-protocol-delegate-not-working/48004564#48004564", "title": "Objective-C protocol delegate not working", "body": "<p>Solved!</p>\n\n<p>@CRD thank you for the hint!</p>\n\n<p>There was indeed multiple MyRender instances, reducing them to a single instance solved the problem. </p>\n"}], "owner": {"reputation": 61, "user_id": 3944725, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/af4e126816651be77c8dba07c42f7ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Scherady", "link": "https://stackoverflow.com/users/3944725/brian-scherady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 48004564, "answer_count": 1, "score": 1, "last_activity_date": 1514451869, "creation_date": 1514373211, "last_edit_date": 1514388923, "question_id": 47991164, "link": "https://stackoverflow.com/questions/47991164/objective-c-protocol-delegate-not-working", "title": "Objective-C protocol delegate not working", "body": "<p>I want to send back an array of objects to myViewController from myRenderer</p>\n\n<p>In myRenderer.h:</p>\n\n<pre><code>@protocol myProtocol;\n\n@interface myRenderer : NSObject\n     @property (weak) id &lt;myProtocol&gt; myDelegate;\n@end\n\n@protocol myProtocol &lt;NSObject&gt;\n     - (void)sendToMyViewController : (NSMutableArray *) objects;\n@end\n</code></pre>\n\n<p>In myRenderer.mm  (C++ / objective-c code):</p>\n\n<pre><code>@implementation myRenderer\n\n@synthesize myDelegate;\n.\n.\n.\n-(void) sendObjects  \n{\n    [myDelegate sendToMyViewController : objects];\n\n    Problem:\n    myDelegate is always &lt;nil&gt;; = (id) 0x0\n\n}\n.\n.\n.\n@end\n</code></pre>\n\n<p>in myViewController.h:</p>\n\n<pre><code>@interface myViewController : UIViewController &lt;myProtocol&gt;\n.\n.\n.\n@end\n</code></pre>\n\n<p>in myViewController.m:</p>\n\n<pre><code>@implementation myViewController\n.\n.\n.\n- (void)viewDidLoad\n{\n    renderer = [[MyRenderer alloc] init];   \n    renderer.myDelegate = self;\n}\n.\n.\n.\n\n-(void) sendToMyViewController : (NSMutableArray *) objects\n{\n    // do something with objects\n\n    Problem:\n    this method is never called !!!\n}\n.\n.\n.\n@end\n</code></pre>\n\n<p>Problem:\nmyDelegate is always nil; equal to (id) 0x0 and\nsendToMyViewController never called.</p>\n\n<p>Thank you for any help.</p>\n"}, {"tags": ["c++", "neural-network", "deep-learning", "caffe", "conv-neural-network"], "answers": [{"comments": [{"owner": {"reputation": 287, "user_id": 3126802, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/42842247faae695d25f63a3d4344e814?s=128&d=identicon&r=PG&f=1", "display_name": "user3126802", "link": "https://stackoverflow.com/users/3126802/user3126802"}, "edited": false, "score": 0, "creation_date": 1514376121, "post_id": 47991817, "comment_id": 82951821, "body": "Thank you for your reply. Would it make sense to try and read the blob data from a deconvolution layer and save that?"}, {"owner": {"reputation": 92303, "user_id": 1714410, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a254f486ab076ab1af26162a975e90f9?s=128&d=identicon&r=PG", "display_name": "Shai", "link": "https://stackoverflow.com/users/1714410/shai"}, "reply_to_user": {"reputation": 287, "user_id": 3126802, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/42842247faae695d25f63a3d4344e814?s=128&d=identicon&r=PG&f=1", "display_name": "user3126802", "link": "https://stackoverflow.com/users/3126802/user3126802"}, "edited": false, "score": 0, "creation_date": 1514376332, "post_id": 47991817, "comment_id": 82951923, "body": "@user3126802 I don&#39;t know what your are trying to do. As long as it makes sense to you - you are welcome to try and do it."}, {"owner": {"reputation": 287, "user_id": 3126802, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/42842247faae695d25f63a3d4344e814?s=128&d=identicon&r=PG&f=1", "display_name": "user3126802", "link": "https://stackoverflow.com/users/3126802/user3126802"}, "edited": false, "score": 0, "creation_date": 1514376382, "post_id": 47991817, "comment_id": 82951957, "body": "Thank you for your help!"}, {"owner": {"reputation": 287, "user_id": 3126802, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/42842247faae695d25f63a3d4344e814?s=128&d=identicon&r=PG&f=1", "display_name": "user3126802", "link": "https://stackoverflow.com/users/3126802/user3126802"}, "edited": false, "score": 0, "creation_date": 1514380745, "post_id": 47991817, "comment_id": 82953925, "body": "I was reading up about the HDFOutput layer. However a problem may arise, since it would try to create the same file for each iteration."}, {"owner": {"reputation": 92303, "user_id": 1714410, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a254f486ab076ab1af26162a975e90f9?s=128&d=identicon&r=PG", "display_name": "Shai", "link": "https://stackoverflow.com/users/1714410/shai"}, "reply_to_user": {"reputation": 287, "user_id": 3126802, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/42842247faae695d25f63a3d4344e814?s=128&d=identicon&r=PG&f=1", "display_name": "user3126802", "link": "https://stackoverflow.com/users/3126802/user3126802"}, "edited": false, "score": 0, "creation_date": 1514380849, "post_id": 47991817, "comment_id": 82953970, "body": "@user3126802 I&#39;m afraid I do not have any experience with <code>&quot;HDF5Output&quot;</code> layer, I did hear about issues people had using this layer. I suspect it would be easier to use a <code>&quot;Python&quot;</code> layer for this task."}], "tags": [], "owner": {"reputation": 92303, "user_id": 1714410, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a254f486ab076ab1af26162a975e90f9?s=128&d=identicon&r=PG", "display_name": "Shai", "link": "https://stackoverflow.com/users/1714410/shai"}, "is_accepted": false, "score": 1, "last_activity_date": 1514380859, "last_edit_date": 1514380859, "creation_date": 1514376010, "answer_id": 47991817, "question_id": 47991019, "link": "https://stackoverflow.com/questions/47991019/save-output-images-in-caffe/47991817#47991817", "title": "Save output images in Caffe", "body": "<p>Caffe doesn't have a \"save-to-image\" layer.<br>\nYou can try and see if <a href=\"http://caffe.help/manual/layers/hdf5output.html\" rel=\"nofollow noreferrer\"><code>\"HDF5Output\"</code></a> layer can work for you: you can save your output image as a floating-point ND array into hdf5 binary file and read it later with other applications.</p>\n\n<p>Alternatively, you can use a <a href=\"https://stackoverflow.com/q/41344168/1714410\"><code>\"Python\"</code></a> layer to save the images for you. Just write the save code in python (using <code>PIL.Image</code> package for example).</p>\n"}], "owner": {"reputation": 287, "user_id": 3126802, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/42842247faae695d25f63a3d4344e814?s=128&d=identicon&r=PG&f=1", "display_name": "user3126802", "link": "https://stackoverflow.com/users/3126802/user3126802"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1514380859, "creation_date": 1514372591, "last_edit_date": 1514373500, "question_id": 47991019, "link": "https://stackoverflow.com/questions/47991019/save-output-images-in-caffe", "title": "Save output images in Caffe", "body": "<p>I am very new to using the caffe framework. I have a network which works on images. It takes images as input and outputs images. Does caffe have a layer I have to include so as to save the output images?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "templates", "c++17", "specialization", "structured-bindings"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 2, "creation_date": 1514372641, "post_id": 47990899, "comment_id": 82950270, "body": "A struct needs a body <code>{ }</code> even if it is empty."}, {"owner": {"reputation": 93, "user_id": 5715244, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDxlB.jpg?s=128&g=1", "display_name": "FireFlyForLife", "link": "https://stackoverflow.com/users/5715244/fireflyforlife"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1514373196, "post_id": 47990899, "comment_id": 82950525, "body": "@BoPersson holy shit I can&#39;t believe I missed that! I was looking at this code for hours!"}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 5715244, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDxlB.jpg?s=128&g=1", "display_name": "FireFlyForLife", "link": "https://stackoverflow.com/users/5715244/fireflyforlife"}, "is_accepted": true, "score": 3, "last_activity_date": 1514373350, "creation_date": 1514373350, "answer_id": 47991197, "question_id": 47990899, "link": "https://stackoverflow.com/questions/47990899/allow-structured-bindings-for-templated-class/47991197#47991197", "title": "Allow structured bindings for templated class", "body": "<p>As it turns out, my <code>tuple_size</code> specialization needed to have a body which I overlooked.</p>\n\n<pre><code>template&lt;typename... Types&gt;\nstruct tuple_size&lt;CmpGroup&lt;Types...&gt;&gt; : public integral_constant&lt;size_t, sizeof...(Types)&gt;{};\n------------------------------------------------------------------------------------------^^\n</code></pre>\n\n<p>Thanks @BoPersson for pointing that out!</p>\n"}], "owner": {"reputation": 93, "user_id": 5715244, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDxlB.jpg?s=128&g=1", "display_name": "FireFlyForLife", "link": "https://stackoverflow.com/users/5715244/fireflyforlife"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 47991197, "answer_count": 1, "score": 1, "last_activity_date": 1514373350, "creation_date": 1514372018, "question_id": 47990899, "link": "https://stackoverflow.com/questions/47990899/allow-structured-bindings-for-templated-class", "title": "Allow structured bindings for templated class", "body": "<p>So I have a little class where I would like to add structured binding support.\nHowever I cannot figure out how to specialize <code>std::tuple_element</code> and <code>std::tuple_size</code> with my templated class.\nThis is my attempt:</p>\n\n<pre><code>template&lt;typename... Cmps&gt;\nstruct CmpGroup\n{\n    std::array&lt;void*, sizeof...(Cmps)&gt; cmps;\n\n    template&lt;typename C&gt;\n    C&amp; get()\n    {\n        constexpr int index = GetIndexInPack&lt;C, Cmps...&gt;::value;\n        static_assert(index != -1);\n        return *static_cast&lt;C*&gt;(index);\n    }\n\n    template&lt;size_t I&gt;\n    auto&amp; get()\n    {\n        static_assert(I &lt; sizeof...(Cmps));\n        using CmpType = typename GetTypeInPack&lt;I, Cmps...&gt;::type;\n        return *static_cast&lt;CmpType*&gt;(cmps[I]);\n    }\n};\n\nnamespace std\n{\n    template&lt;typename... Types&gt;\n    struct tuple_size&lt;CmpGroup&lt;Types...&gt;&gt; : public integral_constant&lt;size_t, sizeof...(Types)&gt;;\n\n    template&lt;std::size_t N, typename... Types&gt;\n    struct tuple_element&lt;N, CmpGroup&lt;Types...&gt;&gt; {\n        //got this from: https://blog.tartanllama.xyz/structured-bindings/\n        using type = decltype(std::declval&lt;CmpGroup&lt;Types...&gt;&gt;().template get&lt;N&gt;());\n    };\n}\n</code></pre>\n\n<p>(I have left out some implementation specific things for clarity, the full snippet can be found <a href=\"https://pastebin.com/8whYLdnR\" rel=\"nofollow noreferrer\">here</a> )</p>\n\n<p>However this causes the tuple_size specialization to give a compile error: <code>error C2143: syntax error: missing ',' before ';'</code></p>\n\n<p>Is it even possible to allow a templated class to have structured bindings or am I missing something?</p>\n"}, {"tags": ["c++", "arrays", "algorithm", "vector", "std"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1514371957, "post_id": 47990859, "comment_id": 82949953, "body": "There is no exponent operator in C++. Why are you guessing at syntax?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 4, "creation_date": 1514372023, "post_id": 47990859, "comment_id": 82949991, "body": "You need one or more of <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">these</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9144773"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1514372056, "post_id": 47990859, "comment_id": 82950002, "body": "@StoryTeller. Thank you sir for explaining. I will learn it definitely."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9144773"}, "edited": false, "score": 0, "creation_date": 1514372097, "post_id": 47990877, "comment_id": 82950022, "body": "thank you, it seems that you are right, I always wondered why <code>**</code> doesnt work for two constants"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1514372107, "post_id": 47990877, "comment_id": 82950028, "body": "This should join the exclusive club owned by the <code>--&gt;</code> &quot;operator&quot;."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1514373167, "post_id": 47990877, "comment_id": 82950508, "body": "@StoryTeller : Also the &quot;convert to bool&quot; operator: <code>!!</code>"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 7, "last_activity_date": 1514372159, "last_edit_date": 1514372159, "creation_date": 1514371949, "answer_id": 47990877, "question_id": 47990859, "link": "https://stackoverflow.com/questions/47990859/c-why-dont-print-all-elements-when-exponent/47990877#47990877", "title": "c++ why dont print all elements when exponent", "body": "<p><code>**</code> is <strong>not</strong> an exponentation operator. C++ is not Fortran.</p>\n\n<p>You have multiplied 2 by the first element of <code>arr</code>: your statement is equivalent to <code>int arr2 = 2 * arr1[0];</code>. What you have entered is perfectly legal C++ (consisting of multiplication and pointer dereference), and the use of <code>auto</code> is adding to the obfuscation.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1514373562, "creation_date": 1514373562, "answer_id": 47991250, "question_id": 47990859, "link": "https://stackoverflow.com/questions/47990859/c-why-dont-print-all-elements-when-exponent/47991250#47991250", "title": "c++ why dont print all elements when exponent", "body": "<p>This statement</p>\n\n<pre><code>auto arr2 = 2 ** arr1;\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>auto arr2 = 2 * *arr1;\n</code></pre>\n\n<p>Array designators in expressions are converted (with rare exceptions) to pointers to their first elements.</p>\n\n<p>So the above statement can be rewritten like</p>\n\n<pre><code>auto arr2 = 2 * *( &amp;arr1[0] );\n</code></pre>\n\n<p>As the first element of the array <code>arr1</code> is equal to 1 then you have</p>\n\n<pre><code>auto arr2 = 2 * 1;\n</code></pre>\n\n<p>The expression <code>2 * 1</code> has the type <code>int</code>.</p>\n\n<p>So as result the statement can be just rewritten like</p>\n\n<pre><code>int arr2 = 2;\n</code></pre>\n\n<p>There is no such operator as <code>**</code> in C++. Instead you have to use standard function <code>pow</code>.</p>\n\n<p>You can do the task either by writing an appropriate loop manually or using for example the standard algorithm <code>std::transform</code>.</p>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n\nint main()\n{\n    int arr1[] = { 1, 2, 3, 4, 5, 6, 7 };\n    int arr2[sizeof( arr1 ) / sizeof( *arr1 )];\n\n    std::transform(std::begin(arr1), std::end(arr1),\n        std::begin(arr2),\n        [](int x) { return pow( 2, x ); });\n\n    for (int x : arr1) std::cout &lt;&lt; x &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;\n    for (int x : arr2) std::cout &lt;&lt; x &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>1 2 3 4 5 6 7 \n2 4 8 16 32 64 128 \n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9144773"}, "edited": false, "score": 0, "creation_date": 1514445261, "post_id": 47991718, "comment_id": 82974562, "body": "yes thank you, other answers already explained very good, but your answer is also valid, so thank you."}], "tags": [], "owner": {"reputation": 22, "user_id": 8091283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8b5705fce81cc4c85eb5188479b9d24?s=128&d=identicon&r=PG", "display_name": "deepjyoti30", "link": "https://stackoverflow.com/users/8091283/deepjyoti30"}, "is_accepted": false, "score": 0, "last_activity_date": 1514375634, "creation_date": 1514375634, "answer_id": 47991718, "question_id": 47990859, "link": "https://stackoverflow.com/questions/47990859/c-why-dont-print-all-elements-when-exponent/47991718#47991718", "title": "c++ why dont print all elements when exponent", "body": "<p>The simplest way to do what you want can be something like this.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;math.h&gt;\nusing namespace std;\nint main(){\n      int arr1[7] = {1,2,3,4,5,6,7}, arr2[7];\n      for(int i = 0; i&lt;7; i++){\n          arr2[i] = pow(2, arr1[i]);    //arr2 will be created.\n          cout&lt;&lt;arr2[i]&lt;&lt;\" \";           //Show arr2.\n          }\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9144773"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 47991250, "answer_count": 3, "score": 2, "last_activity_date": 1514448339, "creation_date": 1514371873, "last_edit_date": 1514448339, "question_id": 47990859, "link": "https://stackoverflow.com/questions/47990859/c-why-dont-print-all-elements-when-exponent", "title": "c++ why dont print all elements when exponent", "body": "<p>I want to create an array and raise 2 to every element in that array and store it as new array arr2. Here is my code</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main(){\n  int arr1[7] = {1, 2, 3, 4, 5, 6, 7};\n\n  auto arr2 = 2 ** arr1;\n\n  cout &lt;&lt; arr2 &lt;&lt; endl;\n}\n</code></pre>\n\n<p>But, it prints only the first element, it does not print the whole array. Why? So, basicaly, what I did here is I created arr1 with elements {1,2,3,4,5,6,7} and then I want arr2 to be</p>\n\n<ul>\n<li>[2, 4, 8, 16, 32, 64, 128]</li>\n</ul>\n\n<p>but for some reason it prints only the first element of array, it prints 2, but I want it to print all elements. Notice that <code>2 ** arr1</code> is the line where I am raising 2 to power (using exponentiation operator, i think it is how you call it if I'm not wrong) and then it should store array at array2.</p>\n\n<p>What is wrong and why does it print only the first element instead all the elements?</p>\n"}, {"tags": ["c++", "linux", "gdb"], "comments": [{"owner": {"reputation": 159275, "user_id": 572644, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/afd0124e3eaa2f2dbe0eb6741aafcd03?s=128&d=identicon&r=PG", "display_name": "Daniel Hilgarth", "link": "https://stackoverflow.com/users/572644/daniel-hilgarth"}, "edited": false, "score": 0, "creation_date": 1514371652, "post_id": 47990794, "comment_id": 82949810, "body": "Is there an entry in the event viewer - assuming you are on windows?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1514371776, "post_id": 47990794, "comment_id": 82949866, "body": "Try setting a breakpoint at the function <code>abort</code>. I think there were some others like that. Once a breakpoint is hit you can look at the call stack."}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 0, "creation_date": 1514371807, "post_id": 47990794, "comment_id": 82949879, "body": "I am sorry for not mentioning this, its Linux. Abort also does not trigger the debugger to stop :("}, {"owner": {"reputation": 762, "user_id": 6173421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-ZisrYOW1RIE/AAAAAAAAAAI/AAAAAAAAF1M/ygxE5xuL5bE/photo.jpg?sz=128", "display_name": "kakurala", "link": "https://stackoverflow.com/users/6173421/kakurala"}, "edited": false, "score": 0, "creation_date": 1514371881, "post_id": 47990794, "comment_id": 82949916, "body": "enable crash dump, if it creates a dump file after crash then you can explore it with tools like mdb etc."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1514371942, "post_id": 47990794, "comment_id": 82949942, "body": "Set a breakpoint on exit()."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1514372084, "post_id": 47990794, "comment_id": 82950018, "body": "Start the program in a terminal. Do <code>echo $?</code> immediately after the program finished."}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 0, "creation_date": 1514372221, "post_id": 47990794, "comment_id": 82950075, "body": "Thats the problem: I cant. (the <code>echo $?</code>). The program gets forked by another program (and there is no way to start it properly any other way because it relys on conditions of the parent process)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1514372450, "post_id": 47990794, "comment_id": 82950177, "body": "Get the exit code in the parent process."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1514372898, "post_id": 47990794, "comment_id": 82950376, "body": "What is the output of gdb after the program disappears?"}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1514373258, "post_id": 47990794, "comment_id": 82950551, "body": "Look at <code>dmesg</code> output. Use <code>strace -f -p &lt;pid&gt;</code>. Also gdb should output the cause of crash (if it really happens). Are you attaching to a wrong pid number?"}], "answers": [{"tags": [], "owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "is_accepted": true, "score": 1, "last_activity_date": 1514390053, "last_edit_date": 1514390053, "creation_date": 1514389790, "answer_id": 47994956, "question_id": 47990794, "link": "https://stackoverflow.com/questions/47990794/what-could-be-the-cause-of-a-program-crashing-without-notice/47994956#47994956", "title": "What could be the cause of a program crashing without notice?", "body": "<p>It could be:</p>\n\n<ul>\n<li>A signal. By default, <em>gdb</em> stops on error signals, so no custom handler is needed.</li>\n<li><code>exit()</code> function and any other function from exit family (like <code>_exit</code>, <code>_Exit</code> , etc.). Use <code>b exit</code> to set a breakpoint.</li>\n<li>Since it's <em>c++</em>, and exception could be thrown. Use <code>catch throw</code> to stop when an exception is thrown.</li>\n<li>The last thread exit. <code>b pthread_exit</code>.</li>\n<li>Thread cancellation. <code>b pthread_cancel</code>.</li>\n<li><code>main</code> function normally reached its end. Use disassembly to set a breakpoint on address.</li>\n</ul>\n\n<p>If all of this doesn't help, attach to your application before the button is pressed, pause it with <kbd>Ctrl+c</kbd> in <em>gdb</em>. Then, press the button (while the window is unresponsive). A gtk application should normally dispatch the event from X11 queue even if it was paused. Do step by step assembly debugging with <code>ni</code> and <code>si</code>.</p>\n"}], "owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 47994956, "answer_count": 1, "score": 1, "last_activity_date": 1514390053, "creation_date": 1514371566, "last_edit_date": 1514372960, "question_id": 47990794, "link": "https://stackoverflow.com/questions/47990794/what-could-be-the-cause-of-a-program-crashing-without-notice", "title": "What could be the cause of a program crashing without notice?", "body": "<p>I have a C++ application that suddenly stops working when I do a certain action (clicking at a button in gtk). I tried debugging it, creating Signal Handlers for SIGTERM, SIGABORT, SIGILL, etc to write a backtrace with the gcc functions, tried to attach a debugger, etc. Nothing. I just do not get any output from anything, the program just vanishes from the memory.</p>\n\n<p>Are there any techniques I have not tried yet? I dont know how to debug this problem.</p>\n\n<p>I forgot to mention: This happens on a Linux system (tried debian and ubuntu). Both with X11 (not wayland)</p>\n"}, {"tags": ["c++", "opengl", "matrix", "glm-math", "coordinate-transformation"], "comments": [{"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 2, "creation_date": 1514372776, "post_id": 47990765, "comment_id": 82950324, "body": "<code>glm::translate</code> creates a translation matrix, which is tranlated by <code>V</code>. Then it multiplies <code>M</code> by the translation matrix and this is the result."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1514480632, "post_id": 47990765, "comment_id": 82991378, "body": "@Rabbid76 What happens if you want to have the choice of which order the matrices are multiplied? Like the difference between local translation or global translation. Does this function only allow you to multiply it in one particular way?"}], "answers": [{"comments": [{"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1514481338, "post_id": 48009493, "comment_id": 82991701, "body": "By postmultiplying the translation matrix it results in local translation right? I was just reading what you wrote about simplifying the multiplication, I&#39;m interested in this for optimisation, but I didn&#39;t quite get you. I know that if you want to translate in global coordinates and not local, you can just add the translation vector to the appropriate column/row, but if you want to translate locally, the equivalent of a post-multiply as done here, is there a way of optimising it?"}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1514484600, "post_id": 48009493, "comment_id": 82993178, "body": "I understand what you&#39;re saying, seeing as though the translation matrix is mostly 1 and 0 from the identity, there&#39;s a whole bunch of multiplications you can skip. This is a really neat trick for optimisation in my game engine."}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "reply_to_user": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 1, "creation_date": 1514485585, "post_id": 48009493, "comment_id": 82993588, "body": "@Zebrafish: There&#39;s another way to look at those things: Let T(v) be a translation matrix for translation vector v, and M be some generic transformation matrix. If you want to translate after M is applied, you can compose this to a single matrix T(v) * M, which is just v added to the rightmost column of M. If you want to translate first, you get M * T(v), which is the same as if you do the M transformation first, and afterwards translate by the <i>also transformed</i> vector v&#39; = M <i>v, so M * T(v) = T(M</i>v) * M, which means it is equal to just adding the vector v&#39;=M*v to the translation column of M."}], "tags": [], "owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "is_accepted": true, "score": 1, "last_activity_date": 1514472265, "creation_date": 1514472265, "answer_id": 48009493, "question_id": 47990765, "link": "https://stackoverflow.com/questions/47990765/glmtranslate-does-it-build-matrix-from-a-vector/48009493#48009493", "title": "glm::translate - does it build matrix from a vector?", "body": "<p>Not exactly What it conceptually does is two things:</p>\n\n<ol>\n<li><p>It creates a 4x4 homogenous translation matrix <strong>T</strong> which has the effect of offsetting every point by the vector <strong>V</strong>:</p>\n\n<pre><code>    / 1 0 0 Vx \\\nT = | 0 1 0 Vy |\n    | 0 0 1 Vz |\n    \\ 0 0 1 1  /\n</code></pre>\n\n<p>so that for every point <strong>p</strong>=(px,py,pz,1)  <strong>p'</strong> = <strong>T</strong> * <strong>p</strong> will result in <strong>p'</strong> = <strong>p</strong> + <strong>V</strong>:</p>\n\n<pre><code>/ 1 0 0 Vx \\      / px \\      / px * 1 + 1 * Vx \\\n| 0 1 0 Vy |   *  | py |  =   | py * 1 + 1 * Vy |\n| 0 0 1 Vz |      | pz |      | pz * 1 + 1 * Vz |\n\\ 0 0 1 1  /      \\ 1  /      \\        1        /\n</code></pre></li>\n<li><p>It post-multiplies <strong>T</strong> to <strong>M</strong> and returns the result: <strong>M'</strong> = <strong>M</strong> * <strong>T</strong></p>\n\n<p>This has the effect that applying <strong>M'</strong> to any point will first apply <strong>T</strong>, anfd then apply whatever was in <strong>M</strong> before:</p>\n\n<p><strong>p'</strong> = <strong>M'</strong> * <strong>p</strong> = <strong>M</strong> * <strong>T</strong> * <strong>p</strong> = <strong>M</strong> * (<strong>T</strong> * <strong>p</strong>)</p></li>\n</ol>\n\n<p>Note that the general matrix multiplication scheme can be simplified if one knows that one of the operands is a translation matrix. In the case of post-mulitplying <strong>T</strong>, this has the same effect of first transforming <strong>V</strong> by <strong>M</strong>, and than adding the resulting vector to the last column of <strong>M</strong>.</p>\n\n<pre><code>    / m00 m01 m02 m03 \\     / 1 0 0 Vx \\      / m00 m01 m02 (m03 + m00 * Vx + m01 * Vy + m02 * Vz) \\\n    | m10 m11 m12 m13 |  *  | 0 1 0 Vy |  =   | m10 m11 m12 (m13 + m10 * Vx + m11 * Vy + m12 * Vz) |\n    | m20 m21 m22 m23 |     | 0 0 1 Vz |      | m20 m21 m22 (m23 + m20 * Vx + m21 * Vy + m22 * Vz) |\n    \\ m30 m31 m32 m33 /     \\ 0 0 1 1  /      \\ m30 m31 m32 (m33 + m30 * Vx + m31 * Vy + m32 * Vz) /\n</code></pre>\n\n<p>So no, it does not return an identity matrix where the translation part is replaced by <strong>M</strong> * <strong>V</strong>, it returns <strong>M'</strong> where <strong>M</strong> * <strong>V</strong> was <em>added</em> to the translation part. </p>\n"}, {"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": false, "score": 1, "last_activity_date": 1514483158, "last_edit_date": 1514483158, "creation_date": 1514481763, "answer_id": 48011703, "question_id": 47990765, "link": "https://stackoverflow.com/questions/47990765/glmtranslate-does-it-build-matrix-from-a-vector/48011703#48011703", "title": "glm::translate - does it build matrix from a vector?", "body": "<p>See the <a href=\"https://glm.g-truc.net/0.9.8/api/a00169.html#gaee134ab77c6c5548a6ebf4e8e476c6ed\" rel=\"nofollow noreferrer\">glm 0.9.8 API Documentation for <code>glm::translate</code></a>:</p>\n\n<blockquote>\n  <p><strong><code>glm::translate</code></strong></p>\n\n<pre><code>GLM_FUNC_DECL tmat4x4&lt;T, P&gt; glm::translate( \n    tmat4x4&lt; T, P &gt; const &amp; m,\n    tvec3&lt; T, P &gt;   const &amp; v \n)   \n</code></pre>\n  \n  <p><strong>Builds a translation 4*4 matrix created from a vector of 3 components</strong>.</p>\n  \n  <p>Parameters:</p>\n  \n  <ul>\n  <li><code>m</code> <strong>Input matrix multiplied by this translation matrix</strong>.</li>\n  <li><code>v</code> Coordinates of a translation vector.</li>\n  </ul>\n</blockquote>\n\n<p><br/>\nThis means that a transformation matrix is formed by the vector <code>v</code></p>\n\n<pre><code>glm::vec3 v;\n\nglm::mat4 t(\n    1.0f, 0.0f, 0.0f, 0.0f,\n    0.0f, 1.0f, 0.0f, 0.0f,\n    0.0f, 0.0f, 1.0f, 0.0f,\n    v.x,  v.y,  v.z,  1.0f );\n</code></pre>\n\n<p>and the result is the multiplication of the input matrix <code>m</code> and the translation matrix <code>t</code>:</p>\n\n<pre><code>glm::mat4 m;\n\nglm::mat4 result = m * t;\n</code></pre>\n"}], "owner": {"reputation": 265, "user_id": 3604851, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/4EmZK.png?s=128&g=1", "display_name": "Martin Spasov", "link": "https://stackoverflow.com/users/3604851/martin-spasov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1609, "favorite_count": 0, "accepted_answer_id": 48009493, "answer_count": 2, "score": 1, "last_activity_date": 1570892859, "creation_date": 1514371437, "last_edit_date": 1570892859, "question_id": 47990765, "link": "https://stackoverflow.com/questions/47990765/glmtranslate-does-it-build-matrix-from-a-vector", "title": "glm::translate - does it build matrix from a vector?", "body": "<p>The function <code>glm::translate</code> takes 2 arguments (matrix <strong>M</strong> , vector <strong>V</strong>). Am I right in assuming the following : </p>\n\n<ol>\n<li>It multiplies the <strong>M</strong> with <strong>V</strong></li>\n<li>Makes a new Identity matrix</li>\n<li>Puts the elements of the vector in the correct spots in the identity matrix</li>\n<li>Returns the resulting matrix</li>\n</ol>\n"}, {"tags": ["c++", "android-studio-3.0"], "answers": [{"comments": [{"owner": {"reputation": 106, "user_id": 1267458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e60c48605aa30bdf5b2251d98a827b?s=128&d=identicon&r=PG", "display_name": "Jacek", "link": "https://stackoverflow.com/users/1267458/jacek"}, "edited": false, "score": 0, "creation_date": 1515576830, "post_id": 47992451, "comment_id": 83348157, "body": "Thanks, but I was rather hoping that it would work out of the box (with some easy tweaks)."}], "tags": [], "owner": {"reputation": 1832, "user_id": 3602072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0cfd32064c69064e62755e8fb47b8fb?s=128&d=identicon&r=PG", "display_name": "ezaquarii", "link": "https://stackoverflow.com/users/3602072/ezaquarii"}, "is_accepted": false, "score": 2, "last_activity_date": 1514378756, "creation_date": 1514378756, "answer_id": 47992451, "question_id": 47990608, "link": "https://stackoverflow.com/questions/47990608/how-to-run-a-c-scratch-file-in-android-studio/47992451#47992451", "title": "How to run a C++ scratch file in Android Studio", "body": "<p>It's not impossible (I'm doing it to run C++ tests), but it requires some custom plumbing in Gradle, that by default supports Android apps, not standalone C++ x86 apps.</p>\n\n<p>Since Android runtime is JVM, NDK is used to create libraries callable via JNI and the build systems experience is optimized for that.</p>\n\n<p>If you want to kickstart NDK project, I advice you to check out this Google sample:\n<a href=\"https://github.com/googlesamples/android-ndk/tree/master/hello-jni\" rel=\"nofollow noreferrer\">https://github.com/googlesamples/android-ndk/tree/master/hello-jni</a>  </p>\n\n<p>If you want to run standalone C++ binaries, I advice you to check <strong>CLion</strong> or write your app/lib as a custom CMake project not relying on NDK at all and then create a custom Gradle task to build it.</p>\n\n<p>You probably (I can only guess) want to check hello-jni sample and CLion first.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6185395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K9jN2.png?s=128&g=1", "display_name": "U N", "link": "https://stackoverflow.com/users/6185395/u-n"}, "is_accepted": false, "score": 0, "last_activity_date": 1608113748, "creation_date": 1608113748, "answer_id": 65321266, "question_id": 47990608, "link": "https://stackoverflow.com/questions/47990608/how-to-run-a-c-scratch-file-in-android-studio/65321266#65321266", "title": "How to run a C++ scratch file in Android Studio", "body": "<p>Yes u can run using terminal of android studio.\ncreate a shell script file. Add this command &lt;g++ testfile.cpp -o testfile &amp;&amp; testfile&gt; in that file and save edit the configuration by add the project path.\nAnd click the run button it will run in cmd of android studio.\nNote: Before that u need to set up the c++ environment(Ex: mingw and other toold need to install)\n<a href=\"https://i.stack.imgur.com/gFstM.png\" rel=\"nofollow noreferrer\">screenshot sample</a></p>\n"}], "owner": {"reputation": 106, "user_id": 1267458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e60c48605aa30bdf5b2251d98a827b?s=128&d=identicon&r=PG", "display_name": "Jacek", "link": "https://stackoverflow.com/users/1267458/jacek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1608113748, "creation_date": 1514370855, "question_id": 47990608, "link": "https://stackoverflow.com/questions/47990608/how-to-run-a-c-scratch-file-in-android-studio", "title": "How to run a C++ scratch file in Android Studio", "body": "<p>I can create a C++ scratch file in Android Studio.\nIs it possible to run it?</p>\n\n<p>I used this as an example scratch:</p>\n\n<pre><code>include &lt;iostream&gt;\nusing namespace std; \n\nint main()\n{\n    cout &lt;&lt; \"Trt\\n\";\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "struct"], "comments": [{"owner": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "edited": false, "score": 0, "creation_date": 1514370388, "post_id": 47990386, "comment_id": 82949185, "body": "where does <code>kat</code> come from?"}, {"owner": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "edited": false, "score": 0, "creation_date": 1514370580, "post_id": 47990386, "comment_id": 82949306, "body": "You can not access a member with its name as string :<code>aaa.(xx-&gt;objectName()).kat</code>."}, {"owner": {"reputation": 75, "user_id": 6368409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baeaea6bf434733c3d4129aa3088e6e5?s=128&d=identicon&r=PG&f=1", "display_name": "Kerem", "link": "https://stackoverflow.com/users/6368409/kerem"}, "reply_to_user": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "edited": false, "score": 0, "creation_date": 1514370606, "post_id": 47990386, "comment_id": 82949314, "body": "I&#39;m sorry I just make mistake. I just edited. It is not kat, it should be rev"}, {"owner": {"reputation": 75, "user_id": 6368409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baeaea6bf434733c3d4129aa3088e6e5?s=128&d=identicon&r=PG&f=1", "display_name": "Kerem", "link": "https://stackoverflow.com/users/6368409/kerem"}, "reply_to_user": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "edited": false, "score": 0, "creation_date": 1514371055, "post_id": 47990386, "comment_id": 82949536, "body": "Is there anyway to convert string to member type? @seleciii44"}, {"owner": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "edited": false, "score": 0, "creation_date": 1514371287, "post_id": 47990386, "comment_id": 82949654, "body": "you could use a map(std::map or QMap) but that requires all of your members to be the same type (or at least same polymorphic base)"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 6368409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baeaea6bf434733c3d4129aa3088e6e5?s=128&d=identicon&r=PG&f=1", "display_name": "Kerem", "link": "https://stackoverflow.com/users/6368409/kerem"}, "edited": false, "score": 0, "creation_date": 1514370920, "post_id": 47990518, "comment_id": 82949479, "body": "yes I can use the if statements but I will have more than 30 buttons I dont want to write other 30 different if statements so I have to access member with using object name of button."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 75, "user_id": 6368409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baeaea6bf434733c3d4129aa3088e6e5?s=128&d=identicon&r=PG&f=1", "display_name": "Kerem", "link": "https://stackoverflow.com/users/6368409/kerem"}, "edited": false, "score": 0, "creation_date": 1514371112, "post_id": 47990518, "comment_id": 82949572, "body": "You may add to allitems method which will return magazalar by name, like: <code>magazalar&amp; getData(QString name) { if (name == &quot;kfc&quot;) return kfc; ....  }</code>. C++ does not support (yet) reflection."}, {"owner": {"reputation": 75, "user_id": 6368409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baeaea6bf434733c3d4129aa3088e6e5?s=128&d=identicon&r=PG&f=1", "display_name": "Kerem", "link": "https://stackoverflow.com/users/6368409/kerem"}, "edited": false, "score": 0, "creation_date": 1514371450, "post_id": 47990518, "comment_id": 82949734, "body": "I will try your approach but I think my problem occurs because the invalid calling of member. I have to convert the QString (xx-&gt;objectName() ) to someting that I can access to struct member kfc.rev I dont know what should I need to convert to."}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": false, "score": 3, "last_activity_date": 1514370527, "creation_date": 1514370527, "answer_id": 47990518, "question_id": 47990386, "link": "https://stackoverflow.com/questions/47990386/calling-structure-object-with-qstring-or-string/47990518#47990518", "title": "Calling structure object with QString or string", "body": "<p>You cannot do like that:</p>\n\n<pre><code>qDebug()&lt;&lt;aaa.(xx-&gt;objectName()).kat;\n</code></pre>\n\n<p>it is not valid C++, this: <code>(xx-&gt;objectName())</code> must be known at compile time, not at runtime. If you want to make it work at runtime, you would need to use a map, or if statements:</p>\n\n<p>here you can use simple if-s:</p>\n\n<pre><code>if (xx-&gt;objectName() == \"kfc\")\n qDebug()&lt;&lt;aaa.kfc.kat;\n//else if (xx-&gt;objectName() == \"some_other_kfc\")\n// qDebug()&lt;&lt;aaa.some_other_kfc.kat;\n</code></pre>\n\n<p>but I dont think its best design, usually you associate with a button a click handler which knows which structure to modify - and it does not need to derive this knowledge from the button instance.</p>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1514400267, "creation_date": 1514400267, "answer_id": 47997158, "question_id": 47990386, "link": "https://stackoverflow.com/questions/47990386/calling-structure-object-with-qstring-or-string/47997158#47997158", "title": "Calling structure object with QString or string", "body": "<p>The use of <code>sender()</code> is bad code smell, usually, and indicates that you should be doing something else instead.</p>\n\n<p>In modern C++, you can easily generate the necessary code when you connect the buttons. Let's assume that <code>aaa</code> is a member of <code>MainWindow</code>:</p>\n\n<pre><code>MainWindow::MainWindow(QWidget * parent) : QMainWindow(parent) {\n  auto const clicked = &amp;QPushButton::clicked;\n  connect(ui-&gt;kfc, clicked, [this]{ qDebug() &lt;&lt; this-&gt;aaa.kfc.rev; });\n  //more connect statements here...\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 6368409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baeaea6bf434733c3d4129aa3088e6e5?s=128&d=identicon&r=PG&f=1", "display_name": "Kerem", "link": "https://stackoverflow.com/users/6368409/kerem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 47997158, "answer_count": 2, "score": 0, "last_activity_date": 1514400267, "creation_date": 1514370063, "last_edit_date": 1514371148, "question_id": 47990386, "link": "https://stackoverflow.com/questions/47990386/calling-structure-object-with-qstring-or-string", "title": "Calling structure object with QString or string", "body": "<p>I would like to take result from object of struct.</p>\n\n<p>allitems.h</p>\n\n<pre><code>#ifndef ALLITEMS_H\n#define ALLITEMS_H\n#include &lt;QString&gt;\nclass allitems\n{\npublic:\n    allitems();\n    struct magazalar{\n        QString rev;\n    }kfc;\n};\n#endif // ALLITEMS_H\n</code></pre>\n\n<p>item.cpp </p>\n\n<pre><code>#include \"allitems.h\"\nallitems::allitems()\n{\n    kfc.rev=\"2\";\n}\n</code></pre>\n\n<p>now I would like to take result of kfc.rev from another cpp file</p>\n\n<pre><code>void MainWindow::clicked(){\n    allitems aaa;\n    QPushButton *xx=(QPushButton *)sender();\n    //xx-&gt;objectName() returns \"kfc\"\n    qDebug()&lt;&lt;aaa.(xx-&gt;objectName()).rev;\n}\n</code></pre>\n\n<p>I would like to call kfc.rev with clicking button. when I clicked the button button objectname is kfc I can take as a result  but I couldnt achieve to call struct data from button objectnames</p>\n\n<p>Any idea to solve it?</p>\n"}, {"tags": ["c++", "function", "oop", "c++11", "struct"], "answers": [{"tags": [], "owner": {"reputation": 477, "user_id": 5184632, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh5.googleusercontent.com/-8Yjd0tO0B6Q/AAAAAAAAAAI/AAAAAAAAABQ/k4u8DnS-lIA/photo.jpg?sz=128", "display_name": "Yong Li", "link": "https://stackoverflow.com/users/5184632/yong-li"}, "is_accepted": false, "score": 2, "last_activity_date": 1514370743, "last_edit_date": 1514370743, "creation_date": 1514370077, "answer_id": 47990389, "question_id": 47990358, "link": "https://stackoverflow.com/questions/47990358/c-passing-a-structure-to-a-function-cannot-understand-syntax/47990389#47990389", "title": "C++: passing a structure to a function, cannot understand syntax", "body": "<p>That's <strong>initialization list</strong>.</p>\n\n<p>Basically that's the standard C++ syntax to initialize class members in constructions, and that part is executed before the body of constructor.</p>\n\n<p>What that does is to take the three member data of the passed <code>settings</code> argument to initialize the three member data of the <code>Network</code> class.</p>\n\n<hr>\n\n<p>That being said, I think your <code>class Network</code> is not complete as you show? The <code>Network</code> class you showed doesn't have that data member.\nI think the complete definition should look like this:</p>\n\n<pre><code>class Network{\n    public:\n       struct Settings\n       {\n           uint32_t                        m_numInputs;\n           uint32_t                        m_numHidden;\n           uint32_t                        m_numOutputs;\n       };\n       Network(Settings const&amp; settings);\n\n    private:\n        unit32_t m_numInputs,\n        unit32_t m_numOutputs,\n        unit32_t m_numOutputs\n};\n</code></pre>\n\n<hr>\n\n<p>Side Note: if the fact that data members of <code>Network</code> have the same name with the data members of <code>Settings</code> confuses you, this is really a design decision or purely coincidence, it doesn't have to.</p>\n\n<p>A more simplistic example to show how to use constructor arguments to initialize data members within initialization list.</p>\n\n<pre><code>class Foo {\nprivate:\n    int m_x,\n    int m_y,\n\npublic:\n    Foo(int dataA, int dataB);\n};\n\nFoo::Foo(int dataA, int dataB): m_x(dataA), m_y(dataB)\n{ }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 3, "last_activity_date": 1514370138, "creation_date": 1514370138, "answer_id": 47990409, "question_id": 47990358, "link": "https://stackoverflow.com/questions/47990358/c-passing-a-structure-to-a-function-cannot-understand-syntax/47990409#47990409", "title": "C++: passing a structure to a function, cannot understand syntax", "body": "<blockquote>\n  <p>What is its purpose?</p>\n</blockquote>\n\n<p>To <em>initialize</em> the data members of the class.</p>\n\n<p>This is called an <strong>initialization list</strong>.</p>\n\n<p>It is very common for a <em>constructor</em> to initialize the data members of its class in the initialization list, rather than in its body.</p>\n\n<p>Read more in <a href=\"https://stackoverflow.com/questions/926752/why-should-i-prefer-to-use-member-initialization-list\">Why should I prefer to use member initialization list?</a></p>\n\n<hr>\n\n<p>For example, this:</p>\n\n<pre><code>Network::Network(Settings const&amp; settings) : m_numInputs(settings.m_numInputs)\n</code></pre>\n\n<p>will set the data member <code>m_numInputs</code> to <code>settings.m_numInputs</code>. The same would happen with:</p>\n\n<pre><code>Network::Network(Settings const&amp; settings) {\n    m_numInputs = settings.m_numInputs;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 2, "creation_date": 1514370220, "post_id": 47990418, "comment_id": 82949089, "body": "It doesn&#39;t have the same effect as writing them in the body. In the body you are assigning to them, and in the initializer list, you are constructing them by calling the appropriate constructor (that&#39;s why it works for <code>const</code> members, you can construct them, but not assign to them)."}, {"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1514370465, "post_id": 47990418, "comment_id": 82949240, "body": "@Rakete1111 I was almost waiting for someone to point that out. I didn&#39;t want to confuse OP further as they are clearly a beginner. I added the word &quot;roughly&quot; to indicate that something more subtle is going on."}, {"owner": {"reputation": 41, "user_id": 7962244, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/059bca8b8e8553733981d7f5da7dce30?s=128&d=identicon&r=PG&f=1", "display_name": "lelli", "link": "https://stackoverflow.com/users/7962244/lelli"}, "edited": false, "score": 0, "creation_date": 1514371000, "post_id": 47990418, "comment_id": 82949513, "body": "@Thomas may I ask what is the difference? I am not familiar with C++ but I have coded for years, so it would really helpful for me to understand the subtle characteristics of the code I am reading. Thank you very much!!!"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 41, "user_id": 7962244, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/059bca8b8e8553733981d7f5da7dce30?s=128&d=identicon&r=PG&f=1", "display_name": "lelli", "link": "https://stackoverflow.com/users/7962244/lelli"}, "edited": false, "score": 2, "creation_date": 1514371163, "post_id": 47990418, "comment_id": 82949588, "body": "@lelli This <a href=\"https://stackoverflow.com/questions/926752/why-should-i-prefer-to-use-member-initialization-list\">Q</a> might help a bit explain the differences (essentially, it&#39;s construction vs assignment in the body)."}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 0, "creation_date": 1514371684, "post_id": 47990418, "comment_id": 82949830, "body": "Also references, for completeness sake."}], "tags": [], "owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "is_accepted": true, "score": 7, "last_activity_date": 1514372534, "last_edit_date": 1514372534, "creation_date": 1514370159, "answer_id": 47990418, "question_id": 47990358, "link": "https://stackoverflow.com/questions/47990358/c-passing-a-structure-to-a-function-cannot-understand-syntax/47990418#47990418", "title": "C++: passing a structure to a function, cannot understand syntax", "body": "<p>It's called an <em>initializer list</em>, and can only be used on constructors. It has roughly the same effect as writing</p>\n\n<pre><code>this-&gt;m_numInputs = settings.m_numInputs;\nthis-&gt;m_numHidden = settings.m_numHidden;\nthis-&gt;m_numOutputs = settings.m_numOutputs;\n</code></pre>\n\n<p>inside the constructor body.</p>\n\n<p>The most important difference is that the initializer list also works on <code>const</code> members and references (and is required in that case, because you can't assign to these in the usual way). This is because the initializer list invokes the constructor of members directly, rather than first default-constructing them and then invoking the assignment operator.</p>\n"}], "owner": {"reputation": 41, "user_id": 7962244, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/059bca8b8e8553733981d7f5da7dce30?s=128&d=identicon&r=PG&f=1", "display_name": "lelli", "link": "https://stackoverflow.com/users/7962244/lelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1514371382, "accepted_answer_id": 47990418, "answer_count": 3, "score": 1, "last_activity_date": 1514372534, "creation_date": 1514369936, "last_edit_date": 1514370348, "question_id": 47990358, "link": "https://stackoverflow.com/questions/47990358/c-passing-a-structure-to-a-function-cannot-understand-syntax", "closed_reason": "Duplicate", "title": "C++: passing a structure to a function, cannot understand syntax", "body": "<p>Sorry for the very bad title but I didn't really know what to write. </p>\n\n<p>I have the following library Neural_Network.h with the class Network in C++:</p>\n\n<pre><code>class Network{\n    public:\n       struct Settings\n       {\n           uint32_t                        m_numInputs;\n           uint32_t                        m_numHidden;\n           uint32_t                        m_numOutputs;\n       };\n       Network(Settings const&amp; settings);\n}\n</code></pre>\n\n<p>Then, in the Neural_Network.cpp file it is implemented in the following way:</p>\n\n<pre><code>Network::Network( Settings const&amp; settings )\n    : m_numInputs( settings.m_numInputs )\n    , m_numHidden( settings.m_numHidden )\n    , m_numOutputs( settings.m_numOutputs )\n{\n    assert( settings.m_numInputs &gt; 0 &amp;&amp; settings.m_numOutputs &gt; 0 &amp;&amp; settings.m_numHidden &gt; 0 );\n    InitializeNetwork();\n    InitializeWeights();\n}\n</code></pre>\n\n<p>I don't really understand why I do need the: :m_numInputs( settings.m_numInputs ), , m_numHidden( settings.m_numHidden )\n    , m_numOutputs( settings.m_numOutputs ) after the name of the function. What is its purpose? </p>\n"}, {"tags": ["c++", "linux", "eclipse", "eclipse-cdt"], "comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1514370071, "post_id": 47990295, "comment_id": 82948997, "body": "Is that helpful: <a href=\"https://stackoverflow.com/questions/11964469/how-to-get-back-a-file-that-was-excluded-from-a-build-configuration-in-eclipse-c?\">How to get back a file that was excluded from a build configuration in Eclipse CDT?</a>"}, {"owner": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "edited": false, "score": 0, "creation_date": 1514485291, "post_id": 47990295, "comment_id": 82993462, "body": "Another place to look is File Properties -&gt; C/C++ Build -&gt; &quot;Exclude resource from build&quot; checkbox."}], "owner": {"reputation": 13579, "user_id": 1501700, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1394f16d55f1c0f4cc4bc5ce4336cf20?s=128&d=identicon&r=PG", "display_name": "vico", "link": "https://stackoverflow.com/users/1501700/vico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514383754, "creation_date": 1514369730, "last_edit_date": 1514383754, "question_id": 47990295, "link": "https://stackoverflow.com/questions/47990295/remove-exclusion-in-c-project", "title": "Remove exclusion in C++ project", "body": "<p>I have C++ project in Eclipse. Several project files are located in sub directory that I'm trying to add to includes. Because of unknown reason directory is visible with strange icon that means \"excluded from build\". I did not set such parameter. How to disable \"exclusion\" on this folder?  </p>\n\n<p><a href=\"https://i.stack.imgur.com/AdFXa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AdFXa.png\" alt=\"enter image description here\"></a></p>\n"}]