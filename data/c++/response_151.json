[{"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1511999160, "post_id": 47563684, "comment_id": 82085391, "body": "If you want us to help you, you must provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 1, "user_id": 9028389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d3a6dd04c0eed65c3cfd416e7d0f50?s=128&d=identicon&r=PG&f=1", "display_name": "Jacksin 10", "link": "https://stackoverflow.com/users/9028389/jacksin-10"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1511999220, "post_id": 47563684, "comment_id": 82085408, "body": "What&#39;s not verifiable about that?"}, {"owner": {"reputation": 1, "user_id": 9028389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d3a6dd04c0eed65c3cfd416e7d0f50?s=128&d=identicon&r=PG&f=1", "display_name": "Jacksin 10", "link": "https://stackoverflow.com/users/9028389/jacksin-10"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1511999363, "post_id": 47563684, "comment_id": 82085444, "body": "It is verifiable."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1511999373, "post_id": 47563684, "comment_id": 82085449, "body": "verifiable implies that I can copy your code and reproduce your same error but your code is not."}], "answers": [{"tags": [], "owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1512004702, "creation_date": 1512004702, "answer_id": 47564434, "question_id": 47563684, "link": "https://stackoverflow.com/questions/47563684/qplaintextedit-setplaintext-keeps-crashing/47564434#47564434", "title": "QPlainTextEdit() -&gt;setPlainText() keeps crashing", "body": "<p>You are not allowed to do UI opeations like updating the text of a QTextEdit from outside the main thread. The solution to this is emitting a signal from the non-main thread, and have it connected to a slot in the main thread which does the UI work.</p>\n"}], "owner": {"reputation": 1, "user_id": 9028389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d3a6dd04c0eed65c3cfd416e7d0f50?s=128&d=identicon&r=PG&f=1", "display_name": "Jacksin 10", "link": "https://stackoverflow.com/users/9028389/jacksin-10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1512004702, "creation_date": 1511998840, "question_id": 47563684, "link": "https://stackoverflow.com/questions/47563684/qplaintextedit-setplaintext-keeps-crashing", "title": "QPlainTextEdit() -&gt;setPlainText() keeps crashing", "body": "<p>I'm trying to update a QPlainTextEdit() from either a button click, thread, etc. Somewhere from outside the MainThread and in Qt documentation it says it must used signals but I can't figure out how. If I try to do a CreateThread() or use a std::thread to update the </p>\n\n<pre><code>class MainWindow : public QMainWindow\n{\n    Q_OBJECT\n    ...\n\n    private slots:\n        handleButtonClick();\n        Thread();\n    ...\n    private:\n\n    QPlainTextEdit *TextView;\n}\n\n\n\nMainWindow::MainWindow(QWidget *parent) : QMainWindow(parent),             ui(new Ui::MainWindow)\n{\n    ...\n    TextView = new QPlainTextEdit();\n    TextView-&gt;setReadOnly(true);\n    TextView-&gt;setCursorWidth(0);\n\n    QPUshButton *UpdateButton = new QPushButton();\n\n\n            connect(UpdateButton, SIGNAL(released()), this, SLOT(handleButtonClick()));\n\n    ....\n}\n\n\nMainWindow::handleButtonClick()\n{\n    // eventually this will cause a crash, usually not imemdiately\n    TextView-&gt;insertPlainText(\"test\");  \n}\n\nMainWindow::Thread()\n{\n    TextView-&gt;insertPlainText(\"test\");  \n}\n</code></pre>\n\n<p>So as you can see, I want a way to update this QPlainTextEdit from outside the main thread without crashes. How can I do this? Thanks.</p>\n"}, {"tags": ["c++", "function", "if-statement", "boolean"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1511998483, "post_id": 47563580, "comment_id": 82085167, "body": "Your <code>if</code> condition always evaluates to true. What did you mean for that to do?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1511998506, "post_id": 47563580, "comment_id": 82085175, "body": "<code>if (bool calculateBool = true)</code> creates a new variable, <code>calculateBool</code>, and initializes it to true. Not what you want. I suspect what you want is more like <code>if (calculateBox(length, width, height, &amp;volume, &amp;surfaceArea)){ </code>, but this is just a suspicion."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1511998642, "post_id": 47563580, "comment_id": 82085221, "body": "unrelated: in <code>bool calculateBox(double length, double width, double height, double * volume, double * surfaceArea)</code> consider using references instead of pointers: <code>bool calculateBox(double length, double width, double height, double &amp; volume, double &amp; surfaceArea)</code> References are generally easier to work with and harder to screw up than pointers."}, {"owner": {"reputation": 13, "user_id": 6789624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Isr9W.jpg?s=128&g=1", "display_name": "Stuart B", "link": "https://stackoverflow.com/users/6789624/stuart-b"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1511998706, "post_id": 47563580, "comment_id": 82085240, "body": "@user4581301 My man, you are a genius. I had originally stated   if ((calculateBox(length, width, height, &amp;volume, &amp;surfaceArea)) = true){   But now I understand that the return value itself is actually true. This actually solved all my problems, thanks so much!"}, {"owner": {"reputation": 13, "user_id": 6789624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Isr9W.jpg?s=128&g=1", "display_name": "Stuart B", "link": "https://stackoverflow.com/users/6789624/stuart-b"}, "edited": false, "score": 0, "creation_date": 1511998802, "post_id": 47563580, "comment_id": 82085270, "body": "As for the second point, I agree that would be easier to work with but the current project outlines &quot;use of pointers for c++ solutions&quot;. Thanks for the heads up though!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1511999186, "post_id": 47563580, "comment_id": 82085401, "body": "<code>if ((calculateBox(length, width, height, &amp;volume, &amp;surfaceArea)) = true)</code> went wrong on you because <code>=</code> is used to assign, not test for equality. Use <code>==</code> to test. What you wrote tried to assign true to what the function returned. The compiler spits out an error message because that&#39;s not really meaningful. But read <a href=\"https://stackoverflow.com/questions/3601602/what-are-rvalues-lvalues-xvalues-glvalues-and-prvalues\">What are rvalues, lvalues, xvalues, glvalues, and prvalues?</a> to learn when it is useful."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1511999325, "post_id": 47563580, "comment_id": 82085438, "body": "Check with the instructor on what the goal of the lesson is, but that&#39;s not a good use for a pointer in C++. It is in C though."}, {"owner": {"reputation": 13, "user_id": 6789624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Isr9W.jpg?s=128&g=1", "display_name": "Stuart B", "link": "https://stackoverflow.com/users/6789624/stuart-b"}, "edited": false, "score": 0, "creation_date": 1511999826, "post_id": 47563580, "comment_id": 82085591, "body": "Ah I see, variable assignment vs. equality checking is something I missed when proofreading my code. I&#39;ll take a look at that article for sure! I&#39;ll send him an email for clarification then - I just saw the article  <a href=\"https://stackoverflow.com/questions/57483/what-are-the-differences-between-a-pointer-variable-and-a-reference-variable-in?rq=1\">reference vs pointer</a>. Thanks again man."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6789624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Isr9W.jpg?s=128&g=1", "display_name": "Stuart B", "link": "https://stackoverflow.com/users/6789624/stuart-b"}, "edited": false, "score": 0, "creation_date": 1512000006, "post_id": 47563726, "comment_id": 82085659, "body": "This is a much more in-depth solution to my problem. And it&#39;s really clear as to what I did wrong, I&#39;ll know to look out for that next time. Creating the local variable vs calling the function seems to have been my main problem. Really appreciate it, Christophe!"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 1, "last_activity_date": 1511999179, "creation_date": 1511999179, "answer_id": 47563726, "question_id": 47563580, "link": "https://stackoverflow.com/questions/47563580/c-boolean-function-operands/47563726#47563726", "title": "C++ Boolean Function Operands", "body": "<p>In the statement </p>\n\n<pre><code>if (bool calculateBool = true) \n</code></pre>\n\n<p>the <code>bool calculateBol</code> part will cause a local variable named <code>calculateBool</code> be defined as a bool.  The <code>= true</code>  part means to assign what's on the left of <code>=</code>to the value true.  The whole <code>bool calculateBool = true</code> will therefore be true so that that the else clause will never be executed.</p>\n\n<p>Note that the the occurence of a single <code>=</code> in a condition should always ring the bell that bad signs could happen.  Because comparing for equality is <code>==</code>. </p>\n\n<p>This being said,  you could write:  </p>\n\n<pre><code> if (calculateBox(length, width, height, &amp;volume, &amp;surfaceArea)) {\n</code></pre>\n\n<p>or if you need the value later on:  </p>\n\n<pre><code>bool calculateBool = calculateBox(length, width, height, &amp;volume, &amp;surfaceArea);\nif (calculateBool) {  // or calculateBool==true if you prefer\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6789624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Isr9W.jpg?s=128&g=1", "display_name": "Stuart B", "link": "https://stackoverflow.com/users/6789624/stuart-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1048, "favorite_count": 0, "accepted_answer_id": 47563726, "answer_count": 1, "score": 1, "last_activity_date": 1511999179, "creation_date": 1511998265, "question_id": 47563580, "link": "https://stackoverflow.com/questions/47563580/c-boolean-function-operands", "title": "C++ Boolean Function Operands", "body": "<p>So I've started working with c++ for my university classes and it's been going really well so far. There's a dilemma I'm having with a current question and I've got the basic code structure all figured out, there's just one problem with my output.</p>\n\n<p>What I'm looking for e.g; </p>\n\n<pre><code>if (bool variable = true){ \n\n  output\n\nelse\n  alternate output\n</code></pre>\n\n<p>I'm aware that this isn't a free debugging service place, but it would really help me in future projects as well and there aren't any <em>bugs</em>, it executes just fine. </p>\n\n<p>My code: </p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\n//function prototypes\nbool calculateBox(double, double, double, double *, double *);\n\nint main()\n{\n    //defining variables\n    double length, width, height, volume, surfaceArea;\n\n    cout &lt;&lt; \"Hello and welcome to the program.\\nPlease enter the dimensions for the box in [cm](l w h): \";\n    cin &gt;&gt; length &gt;&gt; width &gt;&gt; height;\n    calculateBox(length, width, height, &amp;volume, &amp;surfaceArea);\n\n    if (bool calculateBool = true) {\n        cout &lt;&lt; \"Volume: \" &lt;&lt; volume &lt;&lt; \"cm^3\" &lt;&lt; endl &lt;&lt; \"Surface Area: \" &lt;&lt; surfaceArea &lt;&lt; \"cm^2\" &lt;&lt; endl;\n    }\n    else\n        cout &lt;&lt; \"Error, value(s) must be greater than zero!\" &lt;&lt; endl;\n\n    system(\"pause\");\n    return 0;\n}\n\n//functions\nbool calculateBox(double length, double width, double height, double * volume, double * surfaceArea) {\n    if ((length &gt; 0) &amp;&amp; (width &gt; 0) &amp;&amp; (height &gt; 0)) {\n        *surfaceArea = length * width * 6;\n        *volume = length * width * height;\n        return true;\n    }\n    else\n        return false;\n}\n</code></pre>\n\n<p>*Key, if the values <strong>do not</strong> meet the requirements, the output displays not the error message, but a strange string for surfaceArea and volume. It appears to skip over the 'else' statement.</p>\n\n<p>My question - does my error lie within the return statements in the function? Or is it a logic problem with my 'if' statement in the main method?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 3, "creation_date": 1511998380, "post_id": 47563566, "comment_id": 82085121, "body": "It&#39;s not clear what you&#39;re asking. I recommend removing the assignment part because it&#39;s not relevant. You should <a href=\"https://stackoverflow.com/posts/47563566/edit\">edit</a> your question to describe clearly what you&#39;re trying to read (read numbers from a file, where the numbers come after a name) and store those number. You should describe what about your current code is not working. Is there a compiler error, or does it run and not store anything? Or does it store most things except one? You should also endeavour to fix any formatting issues with your code. There&#39;s no reason not to have properly formatted code, anything else scares people away"}, {"owner": {"reputation": 1, "user_id": 4905297, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-J6gSUI6VzdE/AAAAAAAAAAI/AAAAAAAAAME/bxCnl1kyhcA/photo.jpg?sz=128", "display_name": "c0debl00d", "link": "https://stackoverflow.com/users/4905297/c0debl00d"}, "reply_to_user": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1511998855, "post_id": 47563566, "comment_id": 82085291, "body": "Hey thank you. I have edited the question in accordance with your suggestions."}], "answers": [{"tags": [], "owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "is_accepted": false, "score": 0, "last_activity_date": 1515384529, "last_edit_date": 1515384529, "creation_date": 1512002332, "answer_id": 47564133, "question_id": 47563566, "link": "https://stackoverflow.com/questions/47563566/how-do-i-store-only-the-number-values-in-a-2d-array-from-a-given-input-file-no/47564133#47564133", "title": "How do I store only the number values in a 2d array from a given input file? (no pointers)", "body": "<p>When you call <code>store_payments</code>, <code>read</code> is already open and at the end of the file (assuming those are the only things in the file, I will assume they are). Your next read is invalid, because you're at the end of the file and there's nothing else to read. You should endeavour to check the state of the read afterwards, and you would see this:</p>\n\n<pre><code>read.ignore(7, '\\n');\nif (read.good())\n{\n    read &gt;&gt; payments[i][j];\n}\n</code></pre>\n\n<p>You could also see this behaviour by checking <code>eof()</code>:</p>\n\n<pre><code>void store_payments(double payment[10][3])\n{\n    read.open(\"Data.txt\");\n    if (read.eof())\n    {\n        read.clear(); // clear the eof flag\n        read.seekg(0, ios::beg); // return to top of the file\n    }\n}\n</code></pre>\n\n<p>Or you could just close the file at the end of <code>store_names</code>.</p>\n\n<p>When you call <code>read.ignore(7, '\\n')</code>, 7 characters will be ignored. This will work fine for the first two names, which are 7 characters long, but if you encounter a name that isn't, you'll attempt to read something that isn't a <code>double</code>. Again, you would've seen this if you were checking the state of <code>read</code> after each read:</p>\n\n<pre><code>read.ignore(7, '\\n');\nif (read.good())\n{\n}\n</code></pre>\n\n<p>Since your names can be variable length, you should read the entire line first, then sift through it. You can use <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline</code></a> to do this:</p>\n\n<pre><code>std::string line;\nstd::getline(read, line);\n</code></pre>\n\n<p>Now <code>line</code> will contain something like</p>\n\n<blockquote>\n  <p>Johnson 60 12.50</p>\n</blockquote>\n\n<p>You can just use <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code> functions</a> to remove the non-numeric parts, or look for whitespace. You could combine both functions together, and assume the name is everything to the first space, the <em>something</em> is everything to the next white space, and the <em>something else</em> is everything else.</p>\n\n<p>The reason you are seeing memory addresses in your print, is because you're printing memory addresses.</p>\n\n<pre><code>cout &lt;&lt; payment[j];\n</code></pre>\n\n<p><code>payment[j]</code> is essentially a pointer to the first element in <code>payment</code>. You likely meant to print <code>payment[i][j]</code> instead.</p>\n"}], "owner": {"reputation": 1, "user_id": 4905297, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-J6gSUI6VzdE/AAAAAAAAAAI/AAAAAAAAAME/bxCnl1kyhcA/photo.jpg?sz=128", "display_name": "c0debl00d", "link": "https://stackoverflow.com/users/4905297/c0debl00d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1515384529, "creation_date": 1511998143, "last_edit_date": 1512002660, "question_id": 47563566, "link": "https://stackoverflow.com/questions/47563566/how-do-i-store-only-the-number-values-in-a-2d-array-from-a-given-input-file-no", "title": "How do I store only the number values in a 2d array from a given input file? (no pointers)", "body": "<p>I am trying to read the following file using C++</p>\n\n<blockquote>\n  <p>Johnson 60 12.50<br>\n  Aniston 65 13.25<br>\n  Cooper 50 14.50<br>\n  Gupta 70 14.75<br>\n  Blair 55 10.50<br>\n  Clark 40 18.75<br>\n  Kennedy 45 20.50<br>\n  Bronson 60 20.00<br>\n  Sunny 65 18.75<br>\n  Smith 30 9.75 </p>\n</blockquote>\n\n<p>I can read the names fine, but I'm having trouble reading the rest of the line. As you can see, the names can be any length but the longest is 7 characters. Since I'm trying to read into a 2d array of doubles, I've remedied this by ignoring the first 7 characters of the line; however, when I print the contents of the array it appears to be printing memory addresses.</p>\n\n<p>I have no idea how to fix this issue with out the use of pointers. <code>store_names</code> works perfectly, and after it's ran the output window contains the correct names. The problem is where I have:</p>\n\n<pre><code>read.ignore(7, '\\n');\nread &gt;&gt; payment[i][j];\ncout &lt;&lt; payment[j];\n</code></pre>\n\n<p>It just prints memory addresses. How can I read the two numbers after the name into my <code>payment</code> array?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;array&gt;\n#include &lt;cstdlib&gt;\n#include &lt;fstream&gt;\nusing namespace std;\nifstream read;\nofstream write;\n\nvoid store_names(string a [10])\n{\n    string storage;\n    read.open(\"Data.txt\"); //open file\n    if (read.is_open()==true)// check to see if file is open\n    {\n        for (int i = 0; i &lt; 10; i++)\n        {\n            read &gt;&gt; a[i];\n            read.ignore(256, '\\n');//store file string into array\n            cout &lt;&lt; a[i] &lt;&lt; endl;\n        }\n    }\n}\n\nvoid store_payments(double payment [10][3])\n{\n    read.open(\"Data.txt\");\n    if (read.is_open() == true)\n    {\n        for (int i = 0; i &lt; 10; i++)\n        {\n            for (int j = 0; j &lt; 3; j++)\n            {\n                read.ignore(7, '\\n');\n                read &gt;&gt; payment[i][j];\n                cout &lt;&lt; payment[j];\n            }\n        }\n    }\n}\n\nint main()\n{\n    string name_array[10];\n    double payment[10][3];\n    store_names(name_array);\n    store_payments(payment);\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "boost", "boost-asio", "chrono"], "answers": [{"comments": [{"owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "edited": false, "score": 0, "creation_date": 1512029026, "post_id": 47563764, "comment_id": 82094514, "body": "thanks for such a detailed answer. do you mean <code>Clock::duration</code> or  <code>std::chrono::system_clock::duration</code> ?"}, {"owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "edited": false, "score": 0, "creation_date": 1512035787, "post_id": 47563764, "comment_id": 82098240, "body": "your answer is good. i get the point but not sure what you mean by <code>Clock::duration timeout = 2000ms;</code> . that doesn&#39;t compile. trying with <code>std::chrono::system_clock::duration timeout = 2000ms</code> gives some duration related compilation errors"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "edited": false, "score": 0, "creation_date": 1512037500, "post_id": 47563764, "comment_id": 82099343, "body": "<code>Clock</code> would be a typedef for <code>std::chrono::high_resolution_clock</code>"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 6, "last_activity_date": 1511999464, "creation_date": 1511999464, "answer_id": 47563764, "question_id": 47563212, "link": "https://stackoverflow.com/questions/47563212/how-to-cast-stdchronomilliseconds-to-boostposix-timemilliseconds/47563764#47563764", "title": "How to cast `std::chrono::milliseconds` to `boost::posix_time::milliseconds`", "body": "<p>Direct solution: <code>duration_cast&lt;&gt;</code>:</p>\n\n<pre><code>using namespace std::chrono;\nusing namespace std::chrono_literals; \n\nboost::posix_time::seconds(duration_cast&lt;milliseconds&gt;(2s).count());\n</code></pre>\n\n<p>Still not nice. But this is your key.</p>\n\n<h2>BETTER NEWS</h2>\n\n<p>In any c++11 or higher scenario, simply </p>\n\n<pre><code>#include &lt;boost/asio/high_resolution_timer.hpp&gt;\n</code></pre>\n\n<p>And enjoy a timer completely parameterized on <code>std::chrono</code> from bottom to top. No more impedance mismatch:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/b0f25db47cc7f230\" rel=\"noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/asio/high_resolution_timer.hpp&gt;\nusing namespace std::chrono_literals;\n\nint main() {\n    boost::asio::io_service svc;\n\n    boost::asio::high_resolution_timer tim(svc);\n\n    tim.expires_from_now(1s);\n    tim.expires_from_now(100ms);\n    tim.expires_from_now(3h);\n    tim.expires_from_now(15'000us);\n    tim.expires_from_now(15'000'000ns);\n}\n</code></pre>\n\n<p>Note this would change your </p>\n\n<pre><code>long time_out_millis = 2000;\n</code></pre>\n\n<p>Into something like</p>\n\n<pre><code>Clock::duration timeout = 2000ms;\n</code></pre>\n"}], "owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2061, "favorite_count": 0, "accepted_answer_id": 47563764, "answer_count": 1, "score": 4, "last_activity_date": 1511999464, "creation_date": 1511996031, "question_id": 47563212, "link": "https://stackoverflow.com/questions/47563212/how-to-cast-stdchronomilliseconds-to-boostposix-timemilliseconds", "title": "How to cast `std::chrono::milliseconds` to `boost::posix_time::milliseconds`", "body": "<p>I am using a boost::asio::deadline_timer like so to set some timeout before an <code>async_read</code> operation on a <em>tcp socket</em>. I am using <em>boost 1.61</em>.</p>\n\n<pre><code>long time_out_millis = 2000;\nboost::asio::deadline_timer theTimer(theSocket.get_io_service(), boost::posix_time::milliseconds(time_out_millis));\n</code></pre>\n\n<p><strong>Problem:</strong><br>\nOther parts of my code use <code>std::chrono::milliseconds</code>. I want use <code>std::chrono</code> instead of the <code>\"long time_out_millis\"</code> &amp; if possible use <code>std::chrono::milliseconds</code> instead of <code>boost::posix_time::milliseconds</code>. How can I do that?</p>\n\n<p><strong>Question:</strong><br>\nSo, how can I use <code>std::chrono::milliseconds</code> here ? Is there a way I cast from <code>std::chrono::milliseconds</code> to <code>boost::posix_time::milliseconds</code> ?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 3, "creation_date": 1511996081, "post_id": 47563155, "comment_id": 82084308, "body": "So how is <code>f3</code> declared?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1511996095, "post_id": 47563155, "comment_id": 82084315, "body": "Please make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 1, "creation_date": 1511996412, "post_id": 47563155, "comment_id": 82084445, "body": "I&#39;m going to take a wild stab and say that <code>DividedBy</code> should be <code>const</code> so that you can call it on <code>const fraction</code>s."}, {"owner": {"reputation": 131, "user_id": 5046087, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JCeTL9Z5x44/AAAAAAAAAAI/AAAAAAAANKg/-lH3sYzeT7g/photo.jpg?sz=128", "display_name": "Kronimiciad", "link": "https://stackoverflow.com/users/5046087/kronimiciad"}, "edited": false, "score": 0, "creation_date": 1512084483, "post_id": 47563155, "comment_id": 82126289, "body": "I see where my mistake was.  I was given code and told to write a class for it.  The code declared f3 as a constant without me realizing it.  I&#39;ll also try to be sure to give a more complete picture of the code in the future."}], "answers": [{"tags": [], "owner": {"reputation": 646, "user_id": 7251286, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e021813332cd736c36621f3a549487f?s=128&d=identicon&r=PG&f=1", "display_name": "florgeng", "link": "https://stackoverflow.com/users/7251286/florgeng"}, "is_accepted": false, "score": 1, "last_activity_date": 1511996407, "creation_date": 1511996407, "answer_id": 47563284, "question_id": 47563155, "link": "https://stackoverflow.com/questions/47563155/error-passing-xxx-as-this-argument-of-xxx-discards-qualifiers-fpermissi/47563284#47563284", "title": "error: passing &#39;xxx&#39; as &#39;this&#39; argument of &#39;xxx&#39; discards qualifiers [-fpermissive]", "body": "<p>Is f3 a const reference, if so DevidedBy must be declared as const. </p>\n"}, {"tags": [], "owner": {"reputation": 519, "user_id": 7304514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6e4ab7a095c59c76e18a1c8ed1e272c?s=128&d=identicon&r=PG&f=1", "display_name": "Ordoshsen", "link": "https://stackoverflow.com/users/7304514/ordoshsen"}, "is_accepted": true, "score": 2, "last_activity_date": 1512069615, "last_edit_date": 1512069615, "creation_date": 1511996811, "answer_id": 47563351, "question_id": 47563155, "link": "https://stackoverflow.com/questions/47563155/error-passing-xxx-as-this-argument-of-xxx-discards-qualifiers-fpermissi/47563351#47563351", "title": "error: passing &#39;xxx&#39; as &#39;this&#39; argument of &#39;xxx&#39; discards qualifiers [-fpermissive]", "body": "<p>It means you have declared f3 as type <code>const fraction</code>, meaning you cannot change it. Even though the method <code>DividedBy</code> does not change it, there is no guarantee about it so compiler assumes the method can change it somehow.</p>\n\n<p>The solution here is either not to have f3 constant or better make the method <code>DividedBy</code> constant by changing the declaration and definition to</p>\n\n<pre><code>fraction fraction::DividedBy(fraction operand) const   \n\nfraction fraction::DividedBy(fraction operand) const {\n...\n}\n</code></pre>\n\n<p>By the rule of thumb it is better to make constant anything that can be constant. You can for example make the operand of type <code>const fraction &amp;</code> which would prevent unnecessary copying of your classes around while still not preventing the code from compiling when you pass it constant fractions.</p>\n\n<p>The last part <code>[-fpermissive]</code> is just the compiler telling you how to suppress this warning and make it compile anyways (you would just pass this flag to the compiler). It's nice to know there is this option but you should never use it unless you are really sure what you're doing and why it can't be done the proper way.</p>\n"}], "owner": {"reputation": 131, "user_id": 5046087, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JCeTL9Z5x44/AAAAAAAAAAI/AAAAAAAANKg/-lH3sYzeT7g/photo.jpg?sz=128", "display_name": "Kronimiciad", "link": "https://stackoverflow.com/users/5046087/kronimiciad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 47563351, "answer_count": 2, "score": 0, "last_activity_date": 1512069615, "creation_date": 1511995728, "question_id": 47563155, "link": "https://stackoverflow.com/questions/47563155/error-passing-xxx-as-this-argument-of-xxx-discards-qualifiers-fpermissi", "title": "error: passing &#39;xxx&#39; as &#39;this&#39; argument of &#39;xxx&#39; discards qualifiers [-fpermissive]", "body": "<p>I'm writing a program for an introductory c++ class, and I'm getting an error message that I don't understand.  I have a class called fraction, with a member function called DividedBy.  DividedBy is initialized and defined as follows:</p>\n\n<pre><code>fraction fraction::DividedBy(fraction operand)      \n\nfraction fraction::DividedBy(fraction operand){\nint quotNum = num * operand.num;\nint quotDenom = denom * operand.denom;\n\nsimplify(quotNum, quotDenom);\n\nfraction quot = fraction(quotNum, quotDenom);\nreturn quot;}\n</code></pre>\n\n<p>I'm calling the function DividedBy like this:</p>\n\n<pre><code>result = f3.DividedBy(f4);\n</code></pre>\n\n<p>result, f3, and f4 are all fraction objects.  I'm getting this error message:</p>\n\n<p>passing 'const fraction' as 'this' argument of 'fraction fraction::DividedBy(fraction)' discards qualifiers [-fpermissive]</p>\n\n<p>What does this mean?  I've looked up this message and it seems to always involve someone trying to pass a constant argument, which I'm pretty sure I'm not doing here.  What are the qualifiers that I'm somehow discarding?</p>\n"}, {"tags": ["c++", "c++11", "sfinae"], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1511995892, "creation_date": 1511995892, "answer_id": 47563188, "question_id": 47563079, "link": "https://stackoverflow.com/questions/47563079/using-specialization-to-test-the-existence-of-a-value-within-a-class/47563188#47563188", "title": "Using specialization to test the existence of a value within a class", "body": "<p>When you write <code>test&lt;Color&gt;</code>, we first instantiate the primary specialization of <code>test</code>, which includes filling in the default template parameters. So we get <code>test&lt;Color, Color&gt;</code>.</p>\n\n<p>Next, we try to see if any of the specializations match. The one specialization is for <code>test&lt;Color, Color::&lt;unnamed&gt;&gt;</code>. This doesn't match, so we stick with the primary!</p>\n\n<p>This type mismatch is why <a href=\"https://stackoverflow.com/q/27687389/2069064\"><code>void_t</code></a> exists - so that our defaulted template parameter on the primary can match the specialization:</p>\n\n<pre><code>template &lt;typename T, typename U = void&gt;\n//                              ~~~~~~~\nstruct test\n{\n  static constexpr bool value = false;\n};\n\ntemplate &lt;typename T&gt;\nstruct test&lt;T, void_t&lt;decltype(T::unknown)&gt;&gt;\n//             ~~~~~~~                    ~\n{\n  static constexpr bool value = true;\n};\n</code></pre>\n\n<p>Also, prefer to just inherit from <code>false_type</code> and <code>true_type</code>, respectively. </p>\n"}], "owner": {"reputation": 454, "user_id": 682537, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0d9841d5c680d13c0dcd8d90098f2e63?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/682537/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 47563188, "answer_count": 1, "score": 1, "last_activity_date": 1511995892, "creation_date": 1511995371, "question_id": 47563079, "link": "https://stackoverflow.com/questions/47563079/using-specialization-to-test-the-existence-of-a-value-within-a-class", "title": "Using specialization to test the existence of a value within a class", "body": "<p>Lets say I have the following class:</p>\n\n<pre><code>struct Color\n{\n   enum {\n      blue,\n      red,\n      unknown\n   };\n};\n</code></pre>\n\n<p>I would like to test in compile time if the class Color has the unknown value.</p>\n\n<p>I thought the following could work but it is currently returning an incorrect result.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename T, typename U = T&gt;\nstruct test\n{\n  static constexpr bool value = false;\n};\n\ntemplate &lt;typename T&gt;\nstruct test&lt;T, decltype(T::unknown)&gt;\n{\n  static constexpr bool value = true;\n};\n\nint main()\n{\n  std::cout &lt;&lt; test&lt;Color&gt;::value &lt;&lt; std::endl; //prints 0\n}\n</code></pre>\n\n<p>Could you provide some insight on how I can accomplish the check?\nOr what is wrong with my example?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "class", "object"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 1, "creation_date": 1511994312, "post_id": 47562825, "comment_id": 82083580, "body": "And please remove all the excessive blank lines so we don&#39;t have to scroll as much."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1511994787, "post_id": 47562825, "comment_id": 82083795, "body": "This is an approach and sometimes it is the right approach. We need to see how you intend to use this. But... <code>vv.push_back(this);</code> can lead to pain. Both automatic and dynamic allocations may be added to <code>vv</code>. Who is responsible for cleaning this list and how do you plan to manage automatic allocations that go out of scope? Consider a factory that creates and adds and if you go that route, why not a manager class?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1511994821, "post_id": 47562825, "comment_id": 82083814, "body": "This forces the program to have only one master set of vehicles. That seems a bit restrictive. You could <i>also</i> have other external sets <i>in addition</i> to your internal static one but that seems duplicative to me. I would think this design would only suit very specific and likely obscure needs tbh."}, {"owner": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "edited": false, "score": 0, "creation_date": 1511995163, "post_id": 47562825, "comment_id": 82083944, "body": "It also couples the responsibility that the class is modelling together witht the responsibility to create objects and manage lifetimes. I think this violates the single responsibility principle, and e.g. limits reuse of the class in different contexts. It also puts knowledge about the number of objects into the class and not in the level it belongs to, similar to what a singleton does."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1511994840, "post_id": 47562947, "comment_id": 82083826, "body": "Isn\u2019t a manager class a code smell?"}, {"owner": {"reputation": 113, "user_id": 5903445, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/87a3901969e99bafcf133d9fa03ecb10?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/5903445/arash"}, "edited": false, "score": 0, "creation_date": 1511994946, "post_id": 47562947, "comment_id": 82083860, "body": "ok, i guess the better question is should a class manages its objects itself or should this be responsibility of a external manager class? which one is more readable and cleaner code? another related question that comes to my mind is that, how can the class or the manager class makes sure the references its storing are not due to temporary objects to avoid overhead?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1511994948, "post_id": 47562947, "comment_id": 82083861, "body": "@manni66 the problem is more with the name than the concept. Name it well and keep its scope tight and you&#39;re fine. What is a linked list but a node manager?"}, {"owner": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "edited": false, "score": 0, "creation_date": 1511994985, "post_id": 47562947, "comment_id": 82083875, "body": "@manni66 What if you call it a factory? Or move it to dependency injection? I would say that managing its instance creation is usually not the responsibility of a class."}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1511994986, "post_id": 47562947, "comment_id": 82083876, "body": "@manni66 I don&#39;t think so - you may be able to come up with a better name, but in this case you need something to keep track of all the vehicles and to ask questions like &quot;Which vehicle is closest to point x,y?&quot;"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "reply_to_user": {"reputation": 113, "user_id": 5903445, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/87a3901969e99bafcf133d9fa03ecb10?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/5903445/arash"}, "edited": false, "score": 0, "creation_date": 1511995173, "post_id": 47562947, "comment_id": 82083950, "body": "@Arash That is exactly the same question. The related question: No, C++ can&#39;t do magic. It can&#39;t know that the object is temporary. That is your job. I&#39;d say the existence of temporary vehicles may be a code smell..."}, {"owner": {"reputation": 113, "user_id": 5903445, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/87a3901969e99bafcf133d9fa03ecb10?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/5903445/arash"}, "edited": false, "score": 0, "creation_date": 1511995565, "post_id": 47562947, "comment_id": 82084097, "body": "thank you all for your input. so overall do you think it&#39;s ok or is it a terrible design?"}], "tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": true, "score": 4, "last_activity_date": 1511995830, "last_edit_date": 1511995830, "creation_date": 1511994684, "answer_id": 47562947, "question_id": 47562825, "link": "https://stackoverflow.com/questions/47562825/should-a-class-manage-its-instantiated-objects/47562947#47562947", "title": "should a class manage its instantiated objects?", "body": "<p>Put it into any of the typical OO scenarios used as examples:</p>\n\n<ul>\n<li>Does an animal know about every other animal?</li>\n<li>Does a car know about every other car?</li>\n<li>Does a color know about every other color?</li>\n</ul>\n\n<p>What you are asking is really opinion based, but I'm sure most people would say \"no\". You use some kind of manager class to control the instances.</p>\n\n<p>In your case I'd have a Vehicle which knows it's location and a VehicleManager which knows about all the Vehicles. If you want to know what color a Vehicle is you ask the Vehicle. If you want to know where all the Red Vehicles are - you ask the VehicleManager.</p>\n\n<p>Your solution has a combined Vehicle/VehicleManager which relies on a static collection of vehicles so you can only ever have one set. If you use two classes as I've described you can have multiple sets. e.g. Vehicles of different companies or trucks vs cars etc - sure there are other ways to do this as well, but your solution locks you in. Using 2 classes is much more flexible.</p>\n\n<p>So to answer your last comment: <code>do you think it's ok or is it a terrible design?</code> - It is terrible design.</p>\n"}], "owner": {"reputation": 113, "user_id": 5903445, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/87a3901969e99bafcf133d9fa03ecb10?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/5903445/arash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1511998176, "accepted_answer_id": 47562947, "answer_count": 1, "score": 0, "last_activity_date": 1511995830, "creation_date": 1511994125, "last_edit_date": 1511994498, "question_id": 47562825, "link": "https://stackoverflow.com/questions/47562825/should-a-class-manage-its-instantiated-objects", "closed_reason": "Opinion-based", "title": "should a class manage its instantiated objects?", "body": "<p>lets assume I have a number instance of a class vehicle instantiated. if  the vehicle object wants to query other existing vehicles for some reason ( for example finding the nearest vehicle), should the class manages the instantiated objects through static members and methods as in the code below?  is this a good design pattern? is this a common standard? is there any pitfall if i take this approach?</p>\n\n<pre><code>  #include &lt;vector&gt;\n  #include&lt;algorithm&gt;\n\n  struct Location {\n\n   double x, y, z;\n\n   Location(double xx, double yy, double zz) : x(xx), y(yy), z(zz) {}\n\n  };\n\n  class Vehicle {\n   private:\n\n       Location l;\n\n   public:\n\n       Vehicle (Location ll) : l(ll) {\n\n            vv.push_back(this);\n\n        }\n\n        static std::vector&lt;Vehicle*&gt; vv;\n\n       ~Vehicle() {\n           std::vector&lt;Vehicle*&gt;::iterator it;\n\n           // removing the Vehicle object from the list of existing vehicles\n\n           for (it = vv.begin(); it != vv.end(); it++){\n\n                if (*it == this) {\n\n                   vv.erase(std::remove(vv.begin(), vv.end(), this), vv.end());\n\n               }\n\n           }\n\n        }\n\n       Vehicle&amp; find_nearest_vehicle () {\n\n           // code to iterate through list of existing vehicles and find the nearest vehicle\u00a0\n\n       }\n\n\n  };\n\n  static std::vector&lt;Vehicle*&gt; vv;\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1511995176, "post_id": 47562793, "comment_id": 82083951, "body": "How do you add the item to the scene?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1511995343, "post_id": 47562793, "comment_id": 82084023, "body": "call the parent constructor: <code>Combat::Combat(const QString x):QGraphicsPixmapItem(){</code>"}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1512030842, "post_id": 47562793, "comment_id": 82095420, "body": "@eyllanesc, the default constructor of the parent class is implicitly called. I am not sure your proposal will change anything."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1512035800, "post_id": 47562793, "comment_id": 82098254, "body": "Are you sure the <code>QPixmap</code> you create is valid?  You should check using <a href=\"http://doc.qt.io/qt-5/qpixmap.html#isNull\" rel=\"nofollow noreferrer\"><code>QPixmap::isNull</code></a>."}, {"owner": {"reputation": 27, "user_id": 8967813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a542154bf82c95071965d26707dbe9f3?s=128&d=identicon&r=PG&f=1", "display_name": "jacob1342", "link": "https://stackoverflow.com/users/8967813/jacob1342"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1512079713, "post_id": 47562793, "comment_id": 82124461, "body": "@eyllanesc Im using Qt Creator so it shouldnt be added automatically?"}], "answers": [{"tags": [], "owner": {"reputation": 27, "user_id": 8967813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a542154bf82c95071965d26707dbe9f3?s=128&d=identicon&r=PG&f=1", "display_name": "jacob1342", "link": "https://stackoverflow.com/users/8967813/jacob1342"}, "is_accepted": true, "score": 0, "last_activity_date": 1512081406, "creation_date": 1512081406, "answer_id": 47583780, "question_id": 47562793, "link": "https://stackoverflow.com/questions/47562793/qpixmap-image-doesnt-appear/47583780#47583780", "title": "QPixmap Image doesnt appear", "body": "<p>I solved the problem by adding my graphics to resource file in Qt Creator...</p>\n"}], "owner": {"reputation": 27, "user_id": 8967813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a542154bf82c95071965d26707dbe9f3?s=128&d=identicon&r=PG&f=1", "display_name": "jacob1342", "link": "https://stackoverflow.com/users/8967813/jacob1342"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 47583780, "answer_count": 1, "score": 1, "last_activity_date": 1512081406, "creation_date": 1511993956, "question_id": 47562793, "link": "https://stackoverflow.com/questions/47562793/qpixmap-image-doesnt-appear", "title": "QPixmap Image doesnt appear", "body": "<p>Im new with Qt and im making a game in it. I want to display icon but after putting there some code i cant find it anywhere. Im confused because i dont get any errors, so im pretty sure that i just didnt add something. Help.</p>\n\n<p>Combat.h file</p>\n\n<pre><code>#ifndef COMBAT\n#define COMBAT\n\n#include &lt;QImage&gt;\n#include &lt;QGraphicsPixmapItem&gt;\n\nclass Combat: public QGraphicsPixmapItem{\npublic:\n// constructors\n//Combat(QPixmap *parent=NULL);\nCombat(const QString x);\n\n// setters/getters\nvoid getOwner(QString x);\n\nprivate:\nQString owner;\n};\n</code></pre>\n\n<p>Combat.cpp</p>\n\n<pre><code>#include \"Combat.h\"\n#include &lt;QGraphicsScene&gt;\n\n\nCombat::Combat(const QString x){\n     // draw graphics\n     setPixmap(QPixmap(x));\n}\n\nvoid Combat::getOwner(QString x){\n     owner = x;\n}\n\n#endif // COMBAT\n</code></pre>\n\n<p>Interface.h</p>\n\n<pre><code>#ifndef INTERFACE\n#define INTERFACE\n\n#include &lt;QList&gt;\n#include \"Hex.h\"\n#include \"Combat.h\"\n\nclass Interface{\npublic:\n    // constructors\n    Interface();\n\n    // getters/setters\n    QList&lt;Hex*&gt; getHexes();\n\n    void getOwner(int x);\n\n    // public methods\n    void placeHexes();\n    void placeCombat();\n\n\nprivate:\n     void createHexColumn(int x, int y, int numOfRows);\n     QList&lt;Hex*&gt; hexes;\n     void createCombatIcon(int x, int y, QString z);\n     int owner;\n};\n\n#endif // INTERFACE\n</code></pre>\n\n<p>Interface.cpp</p>\n\n<pre><code>#include \"Interface.h\"\n#include \"Game.h\"\n\nextern Game* game;\n\n\nInterface::Interface(){\n\n}\n\nQList&lt;Hex *&gt; Interface::getHexes(){\n    return hexes;\n}\n\nvoid Interface::placeHexes(){\n     createHexColumn(100,100,6);\n}\n\nvoid Interface::placeCombat()\n{\n     createCombatIcon(100,100,\":/grafika/atak_magiczny.png\");\n}\n\nvoid Interface::createCombatIcon(int x, int y, QString z)\n{\n    Combat* icon = new Combat(z);\n    icon-&gt;getOwner(\"player1\");\n    icon-&gt;setPos(x,y);\n    game-&gt;scene-&gt;addItem(icon);\n}\n</code></pre>\n\n<p>Im not sure where something is missing</p>\n"}, {"tags": ["c++", "templates", "inheritance", "implicit-conversion"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1511992927, "post_id": 47562514, "comment_id": 82082980, "body": "It isn&#39;t clear why you chose inheritance. It doesn&#39;t help at all. Instead, think about what the type of <code>c</code> should be."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1511993207, "post_id": 47562514, "comment_id": 82083115, "body": "Declaring std::complex as a friend affects what <i>it</i> can do, not what you can do to it."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1511993365, "post_id": 47562514, "comment_id": 82083172, "body": "Also, <code>operator+</code> is NOT an implicit conversion operator"}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1511999114, "post_id": 47562514, "comment_id": 82085377, "body": "@MSalters - So, what does 1 + 1.0 do then? ;-)"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1512004052, "post_id": 47562514, "comment_id": 82086709, "body": "@Omnifariouso: it creates a context in which that conversion is needed."}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1512024567, "post_id": 47562514, "comment_id": 82092369, "body": "@MSalters - The OP went silent, unfotunately, but I suspect he intended to ask the question I edited this into. It looks like type conversion, but it isn&#39;t really."}], "answers": [{"comments": [{"owner": {"reputation": 930, "user_id": 8951473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UTexO-HsNuo/AAAAAAAAAAI/AAAAAAAAAEg/tiZWCUU3W8w/photo.jpg?sz=128", "display_name": "oisyn", "link": "https://stackoverflow.com/users/8951473/oisyn"}, "edited": false, "score": 0, "creation_date": 1512079368, "post_id": 47563513, "comment_id": 82124298, "body": "I&#39;m sorry I meant to type something else and then I accidentally hit &lt;enter&gt; prematurely. But to answer your question, you don&#39;t need <code>std::enable_if</code>, because the standard <code>operator+</code> for <code>std::complex&lt;&gt;</code> is more specialized and will therefore take precedence in overload resolution."}, {"owner": {"reputation": 930, "user_id": 8951473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UTexO-HsNuo/AAAAAAAAAAI/AAAAAAAAAEg/tiZWCUU3W8w/photo.jpg?sz=128", "display_name": "oisyn", "link": "https://stackoverflow.com/users/8951473/oisyn"}, "edited": false, "score": 0, "creation_date": 1512080150, "post_id": 47563513, "comment_id": 82124656, "body": "So what I meant to say was that you didn&#39;t need the <code>enable_if</code> because I thought you were using it to see whether the types were implicitely addible, but that part of SFINEA automatically follows out of using <code>decltype</code> when declaring the return type. You <i>do</i> need to declare the return type, though, so you are correct in your assumption you can&#39;t use an auto-deduced type as then you won&#39;t be able to make use of SFINEA."}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "reply_to_user": {"reputation": 930, "user_id": 8951473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UTexO-HsNuo/AAAAAAAAAAI/AAAAAAAAAEg/tiZWCUU3W8w/photo.jpg?sz=128", "display_name": "oisyn", "link": "https://stackoverflow.com/users/8951473/oisyn"}, "edited": false, "score": 0, "creation_date": 1512080482, "post_id": 47563513, "comment_id": 82124793, "body": "@oisyn - I just figured that out. :-) I have a different solution that allows me to use deduced return types. I still don&#39;t understand why it didn&#39;t work. My guess is because it tries to expand the template for T = U even though it eventually decides it won&#39;t use it. And then it calls itself recursively, which it can&#39;t because it doesn&#39;t even know the return type yet. Which is really kind of a bizarre result. Anyway, I figured out a way around it that&#39;s likely a bad idea."}, {"owner": {"reputation": 91, "user_id": 9028058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/add85cc9edd30e33a3b0786461d02de3?s=128&d=identicon&r=PG&f=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/9028058/federico"}, "edited": false, "score": 0, "creation_date": 1512145295, "post_id": 47563513, "comment_id": 82152903, "body": "I thought that I had to use inheritance because I thought that the operator+ was implemented as a member function of the complex class but is not. Why the friend function doesn&#39;t provide implicit conversion as in the answer I linked? Do I have to repeat the same code with decltype for all the different operators (-,*,/)?"}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "reply_to_user": {"reputation": 91, "user_id": 9028058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/add85cc9edd30e33a3b0786461d02de3?s=128&d=identicon&r=PG&f=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/9028058/federico"}, "edited": false, "score": 0, "creation_date": 1512145613, "post_id": 47563513, "comment_id": 82153089, "body": "@Federico - I don&#39;t know why the standards committee made the choices they did. I do know that automatic type promotion is considered a C wart, a loosening of the type system that is convenient but creates a lot of weird cases, especially in C++. Of course, C doesn&#39;t hold a candle to Javascript or PHP in this regard. But then again, nobody would dream of suggesting C or C++ for what Javascript does."}], "tags": [], "owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "is_accepted": false, "score": 2, "last_activity_date": 1512080565, "last_edit_date": 1512080565, "creation_date": 1511997766, "answer_id": 47563513, "question_id": 47562514, "link": "https://stackoverflow.com/questions/47562514/simple-way-to-add-implicit-type-promotion-to-the-stdcomplex-class-operators/47563513#47563513", "title": "Simple way to add implicit type promotion to the std::complex class operators", "body": "<p>Here is probably what you want:</p>\n\n<pre><code>#include &lt;complex&gt;\n#include &lt;utility&gt; // declval\n\ntemplate &lt;typename T, typename U&gt;\nauto operator +(const ::std::complex&lt;T&gt; &amp;a, ::std::complex&lt;U&gt; &amp;b)\n{\n    typedef decltype(::std::declval&lt;T&gt;() + ::std::declval&lt;U&gt;()) comcomp_t;\n    typedef ::std::complex&lt;comcomp_t&gt; result_t;\n    return ::std::operator +(result_t{a}, result_t{b});\n}\n\nauto test()\n{\n    using ::std::complex;\n    complex&lt;double&gt; x{0, 0};\n    complex&lt;long double&gt; y{0, 0};\n    return x+y;\n}\n</code></pre>\n\n<p>This requires C++14 for the 'auto' (aka deduced) return type. For C++11 you'd basically have to repeat the <code>decltype</code> expression inside the operator for the return type.</p>\n"}], "owner": {"reputation": 91, "user_id": 9028058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/add85cc9edd30e33a3b0786461d02de3?s=128&d=identicon&r=PG&f=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/9028058/federico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512506816, "creation_date": 1511992538, "last_edit_date": 1512506816, "question_id": 47562514, "link": "https://stackoverflow.com/questions/47562514/simple-way-to-add-implicit-type-promotion-to-the-stdcomplex-class-operators", "title": "Simple way to add implicit type promotion to the std::complex class operators", "body": "<p>I would like to allow the implicit conversion when summing two complex numbers  </p>\n\n<pre><code>std::complex&lt;double&gt; a; std::complex&lt;long double&gt; b;\nauto c = a+b;\n</code></pre>\n\n<p>I tried to implement what was suggested here <a href=\"https://stackoverflow.com/questions/9787593/c-implicit-type-conversion-with-template\">C++ implicit type conversion with template</a></p>\n\n<p>I defined a derived class of std::complex and I added the friend function that should allow the implicit conversion. Here is my code: </p>\n\n<pre><code>template &lt;typename T&gt; class Complex : private std::complex&lt;T&gt; {  \nfriend Complex operator+ (Complex const &amp;lhs, Complex const &amp;rhs) return Complex(); };\n\nint main(){  \nComplex&lt;double&gt; C1; Complex&lt;long double&gt; C2;\n\nauto Sum = C1+C2;\nreturn(0); }\n</code></pre>\n\n<p>I don't understand if the problem is in the inheritance from std::complex or in the friend function. \nAny help would be highly appreciated, Thanks</p>\n\n<p>EDIT:<br>\nOmnifarious code works great when left and right arguments of operator+ are both std::complex. How could I allow  also the operation complex + int?<br>\nHere is my attempt:</p>\n\n<pre><code>template &lt;typename T, typename U&gt;  \nauto operator +(const ::std::complex&lt;T&gt; &amp;a,    std::enable_if_t&lt;std::is_arithmetic&lt;U&gt;::value, U&gt;  &amp;b) \n{\ntypedef decltype(::std::declval&lt;T&gt;() + ::std::declval&lt;U&gt;()) comcomp_t;\ntypedef ::std::complex&lt;comcomp_t&gt; result_t;\nreturn ::std::operator +(result_t{a}, result_t{b});\n}\n</code></pre>\n\n<p>But, when I try:</p>\n\n<pre><code>int i=1;\nauto sum = C1+i;\n</code></pre>\n\n<p>it doesn't compile. \"couldn't deduce template parameter \u2018U\u2019\"<br>\nWhy?</p>\n"}, {"tags": ["c++", "ppm"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1511992815, "post_id": 47562507, "comment_id": 82082925, "body": "You shouldn&#39;t write <code>sizeof(float)</code> bytes, because that&#39;s probably 4 bytes whereas you likely have 3 bytes - 1 red, 1 green and 1 blue."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1511993086, "post_id": 47562507, "comment_id": 82083056, "body": "<code>float</code> probably shouldn&#39;t appear anywhere in your program - PPM files are normally <code>unsigned char</code> or <code>unsigned short</code> throughout."}, {"owner": {"reputation": 13, "user_id": 9007285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b639b1ba8204bd6f20070c2521cd154?s=128&d=identicon&r=PG&f=1", "display_name": "Celestia12", "link": "https://stackoverflow.com/users/9007285/celestia12"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1511993086, "post_id": 47562507, "comment_id": 82083057, "body": "It is probably bad but I wrote instead of sizeof(float), 3 at least to check it and it is distorted differently now :("}, {"owner": {"reputation": 13, "user_id": 9007285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b639b1ba8204bd6f20070c2521cd154?s=128&d=identicon&r=PG&f=1", "display_name": "Celestia12", "link": "https://stackoverflow.com/users/9007285/celestia12"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1511993123, "post_id": 47562507, "comment_id": 82083077, "body": "It is required by the assignment to be float. The method declarations shouldnt be changed"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1511993289, "post_id": 47562507, "comment_id": 82083147, "body": "Mmm... I think you&#39;ll do better if you post a complete program."}, {"owner": {"reputation": 13, "user_id": 9007285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b639b1ba8204bd6f20070c2521cd154?s=128&d=identicon&r=PG&f=1", "display_name": "Celestia12", "link": "https://stackoverflow.com/users/9007285/celestia12"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1511993538, "post_id": 47562507, "comment_id": 82083241, "body": "I think it is too big.. there are many methods involved but none of them is required for this part"}, {"owner": {"reputation": 705, "user_id": 563940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1f032f602bdd0ffd7ba6f3306156fe57?s=128&d=identicon&r=PG", "display_name": "Pedro", "link": "https://stackoverflow.com/users/563940/pedro"}, "edited": false, "score": 0, "creation_date": 1511995292, "post_id": 47562507, "comment_id": 82084004, "body": "No, that&#39;s ok, but you are writing 4 bytes per pixel, which is definitely wrong. Without seeing your code for <code>ReadPPM</code>, one can only guess what&#39;s going on in detail."}, {"owner": {"reputation": 13, "user_id": 9007285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b639b1ba8204bd6f20070c2521cd154?s=128&d=identicon&r=PG&f=1", "display_name": "Celestia12", "link": "https://stackoverflow.com/users/9007285/celestia12"}, "edited": false, "score": 0, "creation_date": 1511995676, "post_id": 47562507, "comment_id": 82084130, "body": "I just edited and added the ReamPPM. I notice now that something is wrong there but I cannot fix it"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9007285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b639b1ba8204bd6f20070c2521cd154?s=128&d=identicon&r=PG&f=1", "display_name": "Celestia12", "link": "https://stackoverflow.com/users/9007285/celestia12"}, "edited": false, "score": 0, "creation_date": 1511998586, "post_id": 47563496, "comment_id": 82085202, "body": "Thank you for the answer. I tried it by making a ppm file without the modifications and it totally worked. With the modifications it doesnt but I&#39;ll look it up myself. Can you please explain what +0.5f is for?"}, {"owner": {"reputation": 705, "user_id": 563940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1f032f602bdd0ffd7ba6f3306156fe57?s=128&d=identicon&r=PG", "display_name": "Pedro", "link": "https://stackoverflow.com/users/563940/pedro"}, "reply_to_user": {"reputation": 13, "user_id": 9007285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b639b1ba8204bd6f20070c2521cd154?s=128&d=identicon&r=PG&f=1", "display_name": "Celestia12", "link": "https://stackoverflow.com/users/9007285/celestia12"}, "edited": false, "score": 0, "creation_date": 1511999030, "post_id": 47563496, "comment_id": 82085346, "body": "It achieves rounding (for positive values). Just to make sure."}], "tags": [], "owner": {"reputation": 705, "user_id": 563940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1f032f602bdd0ffd7ba6f3306156fe57?s=128&d=identicon&r=PG", "display_name": "Pedro", "link": "https://stackoverflow.com/users/563940/pedro"}, "is_accepted": true, "score": 1, "last_activity_date": 1511998326, "last_edit_date": 1511998326, "creation_date": 1511997597, "answer_id": 47563496, "question_id": 47562507, "link": "https://stackoverflow.com/questions/47562507/write-a-ppm-file-with-c-and-get-distorted-result/47563496#47563496", "title": "Write a PPM file with C++ and get distorted result", "body": "<p>If you really have to do convert to a float array, here is what you are doing wrong:</p>\n\n<p>Your loop in <code>WritePPM</code> is totally wrong. You forgot the 3, you forgot to scale back by multiplying with 255, and you can't write float values to a PPM. It should be something like:</p>\n\n<pre><code>for (int i = 0; i &lt; 3*w*h; i++) {\n    unsigned char c = (unsigned char) (255.0f * data[i] + 0.5f); \n    myfile.write((char*) &amp;c, sizeof(c));\n}\n</code></pre>\n\n<p>I didn't check all the other code, but you definitely still have some other bugs, such as closing the file after the return statement in <code>ReadPPM</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 9007285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b639b1ba8204bd6f20070c2521cd154?s=128&d=identicon&r=PG&f=1", "display_name": "Celestia12", "link": "https://stackoverflow.com/users/9007285/celestia12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1386, "favorite_count": 0, "accepted_answer_id": 47563496, "answer_count": 1, "score": 0, "last_activity_date": 1511998326, "creation_date": 1511992505, "last_edit_date": 1511995638, "question_id": 47562507, "link": "https://stackoverflow.com/questions/47562507/write-a-ppm-file-with-c-and-get-distorted-result", "title": "Write a PPM file with C++ and get distorted result", "body": "<p>I have to read, modify and write a PPM image. I tried to check if I got all the data of the PPM image in my array right by trying to write it to a new file. But the image i got looks like a broken TV:<a href=\"https://i.stack.imgur.com/Gn33Q.png\" rel=\"nofollow noreferrer\">a pattern of this:</a></p>\n\n<p>I have no idea what I did wrong, I'd like to know at least a way to check what could be wrong. These are my codes:\nMain:\n    Image instance;</p>\n\n<pre><code>string filename = \"Image03.ppm\";\nstring format = \"ppm\";\nbool fileWritten = false;\nif (instance.load(filename, format)) {\n    cout &lt;&lt; \"The file has been successfully loaded\" &lt;&lt; endl;\n\n    cout &lt;&lt; \"The dimensions of the image are:\" &lt;&lt; endl;\n    cout &lt;&lt; instance.getWidth() &lt;&lt; \"x\" &lt;&lt; instance.getHeight() &lt;&lt; endl;\n</code></pre>\n\n<p>...</p>\n\n<pre><code>bool imaging::Image::load(const string &amp; filename, const string &amp; format){\n        string extension = filename.substr(filename.find_last_of(\".\") + 1);\n        bool flag = false; // to stop the loop when a different letter is found.\n        bool result = false; // stores the return value\n        unsigned int sz = extension.size();\n        for (unsigned int i = 0; i &lt; sz; ++i) {\n            if (tolower(extension[i]) != tolower(format[i]) &amp;&amp; !flag) {\n                cout &lt;&lt; \"The extension of the file does not match the required format.\" &lt;&lt; endl;\n\n                flag = true;\n\n            }\n        }\n\n        if (!flag) {\n            string filename1 = filename;\n            const char *cstr = filename1.c_str();\n            int pw = 0;\n            int ph = 0;\n            float* buff = ReadPPM(cstr, &amp;pw, &amp;ph);\n            width = pw;\n            height = ph;\n            bool h = WritePPM(buff, width, height, \"kokoo.ppm\");\n</code></pre>\n\n<p>...</p>\n\n<pre><code>bool WritePPM(const float * data, int w, int h, const char * filename) {\n        ofstream myfile;\n        myfile.open(filename, ios::out | ios::binary);\n\n        myfile &lt;&lt; \"P6\\n\" &lt;&lt; w &lt;&lt; \"\\n\" &lt;&lt; h &lt;&lt; \"\\n255\\n\";\n        for (int i = 0; i &lt; w*h; i++) {\n            myfile.write((char*)&amp;data[i], sizeof(float));\n        }\n        myfile.close();\n        return 0;\n    }\n</code></pre>\n\n<p>...</p>\n\n<pre><code>float * ReadPPM(const char * filename, int* w, int* h) {\n        ifstream myfile;\n        myfile.open(filename,  ios::binary);\n        if (myfile.is_open())\n        {\n            int i = 0;\n            string letter;\n            cout &lt;&lt; \"File successfully open\" &lt;&lt; endl;\n\n            myfile.ignore(2, ' ');\n            int width;\n            int height;\n            myfile &gt;&gt; width;\n            myfile &gt;&gt; height;\n            myfile.ignore(4, ' ');\n\n            *w = width;\n            *h =  height;\n\n            int size = width*height * 3;\n            int k = myfile.peek();\n            while (k == 32) {                           //32 is ascii for whitespace.\n                myfile.ignore(256,' ');\n                k = myfile.peek();\n            }\n            unsigned char * temp = new unsigned char[size];\n            myfile.read((char*)temp, size);\n            float * buff = new float[size];\n\n\n\n            while (i &lt; size) {  \n                buff[i] = (float)temp[i]/255;\n                i++;\n                cout &lt;&lt; \"before\" &lt;&lt; buff[i] &lt;&lt; endl;\n                cin.get();\n            }\n\n            delete[] temp;\n            return buff;\n            myfile.close();\n        }\n        else\n        {\n            cout &lt;&lt; \"Error opening file\";\n            cin.get();\n            return 0;\n        }\n\n\n\n\n    }\n</code></pre>\n\n<p>Even if my code looks silly, it's why I'm new to this language and except if I did something terribly wrong, I like how it looks, it's an assignment anyway.</p>\n"}, {"tags": ["c++", "performance", "vector", "constructor", "placement-new"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 4, "creation_date": 1511992407, "post_id": 47562469, "comment_id": 82082710, "body": "You are looking for <code>emplace_back</code>, as in <code>vec.emplace_back(a, b, c);</code>"}, {"owner": {"reputation": 4761, "user_id": 55934, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/1d142fd41ea0a8b989f8a005e6532845?s=128&d=identicon&r=PG", "display_name": "Rocketmagnet", "link": "https://stackoverflow.com/users/55934/rocketmagnet"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1511992444, "post_id": 47562469, "comment_id": 82082741, "body": "@IgorTandetnik - Damn, I can&#39;t believe I didn&#39;t see that in the docs! Doh!  I might have to downvote my own question."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1511993558, "post_id": 47562469, "comment_id": 82083248, "body": "While the existing answer is correct, you should also implement a move constructor in <code>MyClass</code> if it&#39;s expensive to copy.  Keep in mind that <code>std::vector</code> will have to copy (or move, if available) its elements as it grows."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1511994395, "post_id": 47562469, "comment_id": 82083614, "body": "@MilesBudnek Maybe, but one must also consider whether making a type cheap to move might make it more expensive to use otherwise (e.g. extra dynamic allocations, indirection on access, etc.)"}, {"owner": {"reputation": 4761, "user_id": 55934, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/1d142fd41ea0a8b989f8a005e6532845?s=128&d=identicon&r=PG", "display_name": "Rocketmagnet", "link": "https://stackoverflow.com/users/55934/rocketmagnet"}, "reply_to_user": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1512078020, "post_id": 47562469, "comment_id": 82123672, "body": "@MilesBudnek - In this case I know ahead of time how many elements I need to add, so I can reserve enough space that it&#39;s guaranteed not to grow."}], "answers": [{"comments": [{"owner": {"reputation": 4761, "user_id": 55934, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/1d142fd41ea0a8b989f8a005e6532845?s=128&d=identicon&r=PG", "display_name": "Rocketmagnet", "link": "https://stackoverflow.com/users/55934/rocketmagnet"}, "edited": false, "score": 0, "creation_date": 1511992510, "post_id": 47562487, "comment_id": 82082771, "body": "You mean: &quot;Yes&quot;. Thanks, this is exactly what I wanted."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 4761, "user_id": 55934, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/1d142fd41ea0a8b989f8a005e6532845?s=128&d=identicon&r=PG", "display_name": "Rocketmagnet", "link": "https://stackoverflow.com/users/55934/rocketmagnet"}, "edited": false, "score": 0, "creation_date": 1511992654, "post_id": 47562487, "comment_id": 82082850, "body": "@Rocketmagnet I mean &quot;no, you can&#39;t add to a vector using placement new&quot;, at least not in the way you described. The vector may use placement new internally, but that is hidden in the implementation."}], "tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": true, "score": 5, "last_activity_date": 1511992428, "creation_date": 1511992428, "answer_id": 47562487, "question_id": 47562469, "link": "https://stackoverflow.com/questions/47562469/can-i-add-to-a-vector-using-placement-new/47562487#47562487", "title": "Can I add to a vector using placement new", "body": "<p>No, but you can use <code>emplace_back</code> to build the object in place:</p>\n\n<pre><code>vec.emplace_back(a,b,c);\n</code></pre>\n"}], "owner": {"reputation": 4761, "user_id": 55934, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/1d142fd41ea0a8b989f8a005e6532845?s=128&d=identicon&r=PG", "display_name": "Rocketmagnet", "link": "https://stackoverflow.com/users/55934/rocketmagnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 1, "accepted_answer_id": 47562487, "answer_count": 1, "score": 1, "last_activity_date": 1511992428, "creation_date": 1511992353, "question_id": 47562469, "link": "https://stackoverflow.com/questions/47562469/can-i-add-to-a-vector-using-placement-new", "title": "Can I add to a vector using placement new", "body": "<p>I have a vector of MyClass, where MyClass is a large class.  When I do:</p>\n\n<pre><code>vector&lt;MyClass&gt; vec;\nvec.push_back(MyClass(a,b,c));\n</code></pre>\n\n<p>this seems quite inefficient, as a temporary MyClass is created, copied into the vector, then destructed.</p>\n\n<p>Is there some way to use placement new to create the class directly inside the vector in the first place? I can't do it like this:</p>\n\n<pre><code>vector&lt;MyClass&gt; vec;\nvec.resize(1);\nnew(&amp;vec.data[0]) MyClass(a,b,c);\n</code></pre>\n\n<p>because vec.resize(1) calls the MyClass constructor.  Is there some way to resize a vector without it calling constructors for all the new items, or is it possible to construct MyClass directly into the vector in the next available place?</p>\n"}, {"tags": ["c++", "c++11", "random"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511992301, "post_id": 47562404, "comment_id": 82082657, "body": "You shouldn&#39;t extract values from a <code>seed_set</code> yourself. You&#39;re suppose to pass the entire vector of generated seeds to your random number generator, which will extract as many random seeds as it needs to optimally initialize itself."}, {"owner": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511992909, "post_id": 47562404, "comment_id": 82082975, "body": "@Fran&#231;oisAndrieux You are saying that I should have <code>std::mt19937 en3(seedseq);</code> and <code>std::mt19937 en4(seedseq);</code>? In that case, if you make both distributions the same (e.g., both <code>uniform_real_distribution</code>), the generated random number sequences are the same for both."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511993374, "post_id": 47562404, "comment_id": 82083178, "body": "What I meant to say is that a single <code>int</code> from <code>seed_seq</code> is not sufficient to properly seed a random number generator like <code>mt19937</code>. It has more possible initial internal states than can be represented by an <code>int</code>. The purpose of <code>seed_seq</code> is to expand small amounts of randomness into a larger amount of pseudo-randomness. You should generate a distinct <code>seed_seq</code> for each generator."}, {"owner": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511993897, "post_id": 47562404, "comment_id": 82083388, "body": "@Fran&#231;oisAndrieux Okay, that makes sense. I included (hopefully) corrected code in my question, so as to not distract from the main thrust of the question. I believe that it should be correct now? Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 1, "creation_date": 1511994126, "post_id": 47562662, "comment_id": 82083507, "body": "&quot;you can use a std::seed_seq to manually specify the entire state, using rd() to fill in each value, so that you can guarantee to a relative degree of confidence that the engine is properly seeded.&quot; To specify the entire state, do I need to include 624 unsigned ints? Or will it simply initialize the rest of the state? Is specifying three (as in my example) okay, or should I specify more -- perhaps 5 or 10? I edited my question with hopefully corrected code -- has it been fixed? Thank you!"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 0, "creation_date": 1511994404, "post_id": 47562662, "comment_id": 82083617, "body": "@PhysicsCodingEnthusiast <a href=\"http://en.cppreference.com/w/cpp/numeric/random/mersenne_twister_engine/mersenne_twister_engine\" rel=\"nofollow noreferrer\">This is the reference for the <code>std::mt19937</code> constructor</a>, which includes details on how it behaves when you&#39;re not using a Seed Sequence. If you&#39;re going to use a <code>std::seed_seq</code>, you need to fill out every value for the entire range of the state you intend to specify (in this case, 19937 bits, or 624 <code>unsigned int</code>s), or you&#39;ll either leave 0&#39;s in the state (bad) or repeat those 3-5 numbers over and over (also bad)."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 1, "creation_date": 1511994552, "post_id": 47562662, "comment_id": 82083684, "body": "@PhysicsCodingEnthusiast If you don&#39;t want to specify that whole range, then you either need to use a PRNG with a smaller state (<code>std::minstd_rand</code> comes to mind, which uses a single <code>uint32_t</code> as its state) or simply pass a single <code>uint32_t</code> as the seed instead of bothering with a Seed Sequence at all, which will at least be properly used to build a proper seed sequence in the constructor."}, {"owner": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 0, "creation_date": 1511995067, "post_id": 47562662, "comment_id": 82083899, "body": "Thanks for the responses. Just curious: in the answers given here: <a href=\"https://stackoverflow.com/questions/34490599/c11-how-to-set-seed-using-random\" title=\"c11 how to set seed using random\">stackoverflow.com/questions/34490599/&hellip;</a>, they do not seem to specify the entire range of the state. Am I missing something, or are they simply doing a poor implementation? It would be really helpful if you could illustrate an efficient way to specify the entire range in your answer. Isn&#39;t <code>random_device</code> not good for generating many random numbers?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 313, "user_id": 4059001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6dc4ca4a934730700e61b41289148d2?s=128&d=identicon&r=PG&f=1", "display_name": "user515430", "link": "https://stackoverflow.com/users/4059001/user515430"}, "edited": false, "score": 0, "creation_date": 1512030860, "post_id": 47562662, "comment_id": 82095434, "body": "@user515430 I explained that in the succeeding paragraph. For someone insistent that I need to &quot;Learn to Read&quot;, you really need to do a bit more of that yourself."}, {"owner": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 0, "creation_date": 1512060449, "post_id": 47562662, "comment_id": 82113976, "body": "@Xirema Would you be able to answer the question posed in my previous comment (with the link to another SO question)? Those are my remaining questions regarding this matter. Thank you very much!"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 0, "creation_date": 1512061739, "post_id": 47562662, "comment_id": 82114817, "body": "@PhysicsCodingEnthusiast I&#39;ve updated the post with more information."}, {"owner": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 0, "creation_date": 1512062292, "post_id": 47562662, "comment_id": 82115170, "body": "@Xirema Thanks for the additional information! So just to wrap up, I should view the answers given in <a href=\"https://stackoverflow.com/questions/34490599/c11-how-to-set-seed-using-random\" title=\"c11 how to set seed using random\">stackoverflow.com/questions/34490599/&hellip;</a> (in particular the answer by bames53) as unsatisfactory, given that they do not use 624 invocations of <code>rd()</code>?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 0, "creation_date": 1512062468, "post_id": 47562662, "comment_id": 82115279, "body": "@PhysicsCodingEnthusiast The accepted answer is fine, for the same reasons I already specified in my answer in the first section. The bames53 answer is definitely unacceptable because it defines a Seed Sequence that&#39;s too small for MT19937."}, {"owner": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 0, "creation_date": 1512062860, "post_id": 47562662, "comment_id": 82115498, "body": "@Xirema There is one thing I&#39;m still missing here. The code following &quot;If you have multiple sources of randomness you can actually do this (e.g. 2)&quot; in the accepted answer for that question uses only two invocations of random devices (<code>r1()</code> and <code>r2()</code>). Why is that okay there and not here? Is it assumed that those random devices yield more data/bits than <code>uint32_t</code>? (Sorry to keep asking questions, but I feel like I&#39;m overlooking something.) Thanks!"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 0, "creation_date": 1512063061, "post_id": 47562662, "comment_id": 82115616, "body": "@PhysicsCodingEnthusiast It&#39;s possible they&#39;re assuming that <code>std::default_random_engine</code> is an alias for one of the smaller engines like <code>std::minstd_rand</code> or <code>std::minstd_rand0</code> (which I think it is in GCC or some other environments), and thus a seed sequence with only one or two sources of randomness would be more than adequate."}, {"owner": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 0, "creation_date": 1512063320, "post_id": 47562662, "comment_id": 82115766, "body": "@Xirema Ah, that would make sense. Thank you for all the info -- it&#39;s been quite illuminating!"}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 5, "last_activity_date": 1512061728, "last_edit_date": 1592644375, "creation_date": 1511993296, "answer_id": 47562662, "question_id": 47562404, "link": "https://stackoverflow.com/questions/47562404/deciding-between-random-device-and-seed-seq-to-generate-seeds-for-multiple-rando/47562662#47562662", "title": "Deciding between random_device and seed_seq to generate seeds for multiple random number sequences", "body": "<p><code>std::seed_seq</code> is generally intended to be used if you don't trust the default implementation to properly initialize the state of the engine you're using.</p>\n<p>In many \u2265C++11 implementations, <code>std::default_random_engine</code> is an alias for <code>std::mt19937</code>, which is a specific variant of the Mersenne Twister Pseudorandom Number Generation algorithm. <a href=\"http://en.cppreference.com/w/cpp/numeric/random/mersenne_twister_engine\" rel=\"nofollow noreferrer\">Looking at the specification for <code>std::mt19937</code></a>, we see that it has a state of size 624 unsigned integers, which is enough to hold the 19937 bits of state it is intended to encompass (which is how it gets its name). Traditionally, if you seed it with only a single <code>uint32_t</code> value (which is what you would get from calling <code>rd()</code> once, if <code>rd</code> is a <code>std::random_device</code> object), then you're leaving the vast majority of its state uninitialized.</p>\n<p>Now, the good news for anyone about to panic about their poorly-seeded Mersenne Twister engines is that if you construct a <code>std::mt19937</code> with a single <code>uint32_t</code> value (like <code>std::default_random_engine engine{rd()};</code>), the implementation is required to initialize the rest of the state by permutating the original seed value, so while a single invocation of <code>rd()</code> yields a limited range of actual differing engine states, it's still sufficient to at least properly initialize the engine. This will yield a &quot;Good Quality&quot; random number generator.</p>\n<p>But if you're worried about the engine not being properly seeded, either for cryptographic reasons (though note that <code>std::mt19937</code> itself is NOT cryptographically secure!) or simply for statistical reasons, you can use a <code>std::seed_seq</code> to manually specify the entire state, using <code>rd()</code> to fill in each value, so that you can guarantee to a relative degree of confidence that the engine is properly seeded.</p>\n<p>For casual use, or scenarios where it's not strictly necessary to achieve high quality random numbers, simply initializing with a single call to <code>std::random_device::operator()</code> is fine.</p>\n<p>If you want to use a <code>std::seed_seq</code>, make sure you set it up correctly (the example in your original code is definitely not correct, at least for <code>std::mt19937</code>, and would actually yield much worse results than simply using <code>rd()</code>!). <a href=\"https://codereview.stackexchange.com/questions/109260/seed-stdmt19937-from-stdrandom-device\">This post on CodeReview</a> contains code which has been vetted properly.</p>\n<h3>Edit:</h3>\n<p>For the predefined templates of Mersenne Twister, the state size is always 19968 bits, which is slightly more than what it actually needs, but also the smallest value that can fully represent the range using <code>uint32_t</code> values. This works out to 624 <em>Words</em> of 32-bits each. So if you plan to use a Seed Sequence, you would correctly initialize it with 624 invocations to <code>rd()</code>:</p>\n<pre><code>//Code copied from https://codereview.stackexchange.com/questions/109260/seed-stdmt19937-from-stdrandom-device\nstd::vector&lt;uint32_t&gt; random_data(624);\nstd::random_device source;\nstd::generate(random_data.begin(), random_data.end(), std::ref(source));\nstd::seed_seq seeds(random_data.begin(), random_data.end());\nstd::mt19937 engine(seeds);\n//Or:\n//std::mt19937_64 engine(seeds);\n</code></pre>\n<p>If you're working with a non-standard instantiation of <code>std::mersenne_twister_engine</code>, the state size needed for that specific situation can be queried by multiplying its <code>state_size</code> by its <code>word_size</code> and then dividing by 32.</p>\n<pre><code>using mt_engine = std::mersenne_twister_engine&lt;/*...*/&gt;;\nconstexpr size_t state_size = mt_engine::state_size * mt_engine::word_size / 32;\nstd::vector&lt;uint32_t&gt; random_data(state_size);\nstd::random_device source;\nstd::generate(random_data.begin(), random_data.end(), std::ref(source));\nstd::seed_seq seeds(random_data.begin(), random_data.end());\nmt_engine engine (seeds);\n</code></pre>\n<p>For other engine types, you'll need to evaluate them on a case-by-case basis. <code>std::linear_congruential_engine</code> and its predefined variants use a single integer of its word size, so they only require a single invocation of <code>rd()</code> to initialize, and thus Seed Sequences are unnecessary. I'm not sure how <code>std::subtract_with_carry_engine</code> or its associated-by-use <code>std::discard_block_engine</code> work, but it <em>seems</em> like they also only contain a single <em>Word</em> of state.</p>\n"}], "owner": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1152, "favorite_count": 3, "accepted_answer_id": 47562662, "answer_count": 1, "score": 2, "last_activity_date": 1512061728, "creation_date": 1511992077, "last_edit_date": 1511993822, "question_id": 47562404, "link": "https://stackoverflow.com/questions/47562404/deciding-between-random-device-and-seed-seq-to-generate-seeds-for-multiple-rando", "title": "Deciding between random_device and seed_seq to generate seeds for multiple random number sequences", "body": "<p>When writing code that requires multiple independent random number distributions/sequences (example below with two), it seems that there are two typical ways to implement (pseudo-)random number generation. One is simply using a <code>random_device</code> object to generate two random seeds for the two independent engines:</p>\n\n<pre><code>std::random_device rd;\nstd::mt19937 en(rd());\nstd::mt19937 en2(rd());\nstd::uniform_real_distribution&lt;&gt; ureald{min,max};\nstd::uniform_int_distribution&lt;&gt; uintd{min,max};\n</code></pre>\n\n<p>The other involves using the <code>random_device</code> object to create a <code>seed_seq</code> object using multiple \"sources\" of randomness:</p>\n\n<pre><code>// NOTE: keeping this here for history, but a (hopefully) corrected version of\n// this implementation is posted below the edit\nstd::random_device rd;\nstd::seed_seq seedseq{rd(), rd(), rd()}; // is there an optimal number of rd() to use?\nstd::vector&lt;uint32_t&gt; seeds(5);\nseedseq.generate(seeds.begin(), seeds.end());\nstd::mt19937 en3(seeds[0]);\nstd::mt19937 en4(seeds[1]);\nstd::uniform_real_distribution&lt;&gt; ureald{min,max};\nstd::uniform_int_distribution&lt;&gt; uintd{min,max};\n</code></pre>\n\n<p>Out of these two, is there a preferred method? Why? If it is the latter, is there an optimal number of <code>random_device</code> \"sources\" to use in generating the <code>seed_seq</code> object?</p>\n\n<p>Are there better approaches to random number generation than either of these two implementations I've outlined above?</p>\n\n<p>Thank you!</p>\n\n<hr>\n\n<h1>Edit</h1>\n\n<p>(Hopefully) corrected version of <code>seed_seq</code> implementation for multiple distributions:</p>\n\n<pre><code>std::random_device rd;\nstd::seed_seq seedseq1{rd(), rd(), rd()}; // is there an optimal number of rd() to use?\nstd::seed_seq seedseq2{rd(), rd(), rd()};\nstd::mt19937 en3(seedseq1);\nstd::mt19937 en4(seedseq2);\nstd::uniform_real_distribution&lt;&gt; ureald{min,max};\nstd::uniform_int_distribution&lt;&gt; uintd{min,max};\n</code></pre>\n"}, {"tags": ["c++", "ffmpeg", "include"], "answers": [{"comments": [{"owner": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "edited": false, "score": 3, "creation_date": 1512032474, "post_id": 47562171, "comment_id": 82096224, "body": "Also in cpp files you need to encapsulate the ffmpeg includes in <code>extern &quot;C&quot; { }</code>"}], "tags": [], "owner": {"reputation": 889, "user_id": 7709727, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5aad459e897d2e3a8a4613be455ecb16?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Stdlib", "link": "https://stackoverflow.com/users/7709727/eric-stdlib"}, "is_accepted": false, "score": 0, "last_activity_date": 1511991087, "creation_date": 1511991087, "answer_id": 47562171, "question_id": 47562170, "link": "https://stackoverflow.com/questions/47562170/how-to-include-avcodec-h-in-c-in-fedora/47562171#47562171", "title": "How to include avcodec.h in C++ in Fedora", "body": "<p>Use <code>-I</code> in <code>g++</code> to add <code>/usr/include/ffmpeg/</code> in the include path solves the problem. </p>\n\n<p>The final program is </p>\n\n<pre><code>#include \"libavcodec/avcodec.h\"\n\nint main(int argc, char* argv[])\n{\n    return 0; \n}\n</code></pre>\n\n<p>The command to compile it is <code>g++ a.cpp -I /usr/include/ffmpeg</code></p>\n"}, {"tags": [], "owner": {"reputation": 1374, "user_id": 6385870, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WcPaBJ4dA7E/AAAAAAAAAAI/AAAAAAAAACU/GqGqqqVbT9E/photo.jpg?sz=128", "display_name": "the kamilz", "link": "https://stackoverflow.com/users/6385870/the-kamilz"}, "is_accepted": false, "score": 0, "last_activity_date": 1512044906, "creation_date": 1512044906, "answer_id": 47573517, "question_id": 47562170, "link": "https://stackoverflow.com/questions/47562170/how-to-include-avcodec-h-in-c-in-fedora/47573517#47573517", "title": "How to include avcodec.h in C++ in Fedora", "body": "<p>This <code>Makefile</code> is what I use in a project that makes a/v encoding with ffmpeg libraries. Extracted snipped is below :</p>\n\n<pre><code>LIBAV_PATH = /path/to/ffmpeg/lib/pkgconfig/\n\nCXXFLAGS += `PKG_CONFIG_PATH=$(LIBAV_PATH) pkg-config --cflags $(PKG_DEPS)`\nLDFLAGS  += `PKG_CONFIG_PATH=$(LIBAV_PATH) pkg-config --libs $(PKG_DEPS)`\n\n$(TARGET): $(OBJECTS_C) $(OBJECTS_CPP)\n    @echo \"LD\\t\" $@\n    $(CXX) -o $@ $^ $(WFLAGS) $(OFLAGS) $(CXXFLAGS) $(LDFLAGS)\n\n%.o: %.cpp\n    @echo \"CXX\\t\" $@\n    $(CXX) $(WFLAGS) $(OFLAGS) $(CXXFLAGS) -c $&lt; -o $@\n</code></pre>\n\n<p>Btw, you can use this format for includes:</p>\n\n<pre><code>#include &lt;libavformat/avformat.h&gt;\n</code></pre>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 889, "user_id": 7709727, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5aad459e897d2e3a8a4613be455ecb16?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Stdlib", "link": "https://stackoverflow.com/users/7709727/eric-stdlib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1453, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1512044906, "creation_date": 1511991087, "question_id": 47562170, "link": "https://stackoverflow.com/questions/47562170/how-to-include-avcodec-h-in-c-in-fedora", "title": "How to include avcodec.h in C++ in Fedora", "body": "<p>I have installed <code>ffmpeg-devel</code> using dnf, but when including <code>\"libavcodec/avcodec.h\"</code>, g++ tells me</p>\n\n<pre><code>a.cpp:1:10: fatal error: libavcodec/avcodec.h: No such file or directory\n #include \"libavcodec/avcodec.h\"\n          ^~~~~~~~~~~~~~~~~~~~~~\ncompilation terminated.\n</code></pre>\n\n<p>My source file is (a.cpp)</p>\n\n<pre><code>#include \"libavcodec/avcodec.h\"\n\nint main(int argc, char* argv[])\n{\n    return 0; \n}\n</code></pre>\n\n<p>I see <code>/usr/include/ffmpeg/libavcodec/avcodec.h</code>, so I changed the name to <code>ffmpeg/libavcodec/avcodec.h</code>, but then it says</p>\n\n<pre><code>/usr/include/ffmpeg/libavcodec/avcodec.h:31:10: fatal error: libavutil/samplefmt.h: No such file or directory\n #include \"libavutil/samplefmt.h\"\n          ^~~~~~~~~~~~~~~~~~~~~~~\ncompilation terminated.\n</code></pre>\n\n<p>What should I do to ensure that all the headers are included properly? </p>\n"}, {"tags": ["c++", "multithreading", "parallel-processing", "openmp"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1511992418, "post_id": 47562161, "comment_id": 82082723, "body": "The single instance of <code>forces</code> is shared by all threads and can be written to by multiple threads."}, {"owner": {"reputation": 113, "user_id": 3507510, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/9736e5c8bc1e540763b266e81de55497?s=128&d=identicon&r=PG&f=1", "display_name": "Sergiohernandez", "link": "https://stackoverflow.com/users/3507510/sergiohernandez"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1511992698, "post_id": 47562161, "comment_id": 82082868, "body": "@1201ProgramAlarm , but the thing is that line is where all the logic is. If I put a lock when a thread access to that variable, there is not going to be an usefull parallelization at all"}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 3507510, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/9736e5c8bc1e540763b266e81de55497?s=128&d=identicon&r=PG&f=1", "display_name": "Sergiohernandez", "link": "https://stackoverflow.com/users/3507510/sergiohernandez"}, "edited": false, "score": 0, "creation_date": 1511992430, "post_id": 47562316, "comment_id": 82082731, "body": "I get the double buffering, but, for have a control of the arrays, should be like this?: <code>#pragma omp parallel num_threads(4) public(asteroidsRead) private(asteroidsWrite)</code>"}, {"owner": {"reputation": 113, "user_id": 3507510, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/9736e5c8bc1e540763b266e81de55497?s=128&d=identicon&r=PG&f=1", "display_name": "Sergiohernandez", "link": "https://stackoverflow.com/users/3507510/sergiohernandez"}, "edited": false, "score": 0, "creation_date": 1511992479, "post_id": 47562316, "comment_id": 82082757, "body": "Invert force is simple, just change the symbol of the forces. PD: I didn&#39;t get the Simulation islands aproach"}], "tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": true, "score": 1, "last_activity_date": 1511992153, "last_edit_date": 1511992153, "creation_date": 1511991686, "answer_id": 47562316, "question_id": 47562161, "link": "https://stackoverflow.com/questions/47562161/segmentation-fault-openmp-in-loop-c/47562316#47562316", "title": "Segmentation fault Openmp in loop C++", "body": "<p>There are two ways to tackle this issue.</p>\n\n<h2>1. Double buffering:</h2>\n\n<p>Maintain two list of asteroids, one you read from, and one you write to. Many threads can safely read from the same asteroid, and you are guaranteed each thread writes to an area of memory the others don't have access to.</p>\n\n<p>Depdending on what <code>invertForze()</code> does, this might also give you the benefit of making the whole process order-independant.</p>\n\n<h2>2. Simulation islands:</h2>\n\n<p>Break up your asteroid field into sub-fields of interacting asteroids, and paralellize on a per-island basis, instead of on a per-asteroid basis.</p>\n\n<p>This is the approach most modern physics engine use, because they use the assumption that islands tend to remain the same frame after frame, but it is a lot more complicated to put into place compared to a simple double-buffered solution.</p>\n"}, {"tags": [], "owner": {"reputation": 198, "user_id": 6639989, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FH3gXjhHwGo/AAAAAAAAAAI/AAAAAAAAAHc/6NWjrnd-lkY/photo.jpg?sz=128", "display_name": "J&#225;nos Benjamin Antal", "link": "https://stackoverflow.com/users/6639989/j%c3%a1nos-benjamin-antal"}, "is_accepted": false, "score": 0, "last_activity_date": 1511993442, "last_edit_date": 1511993442, "creation_date": 1511992781, "answer_id": 47562574, "question_id": 47562161, "link": "https://stackoverflow.com/questions/47562161/segmentation-fault-openmp-in-loop-c/47562574#47562574", "title": "Segmentation fault Openmp in loop C++", "body": "<p>The problem is you write the forces vector from different threads at the same time. You can move it's declaration to the inner for loop, so concurrency will not be a problem. I also assume that, you shouldn't call the <code>invertForze</code> when you don't calculate <code>forces</code>.</p>\n\n<pre><code>for(unsigned long j=0; j&lt;asteroids.size(); j++){\n    {\n        #pragma omp parallel num_threads(4)\n        #pragma omp for\n        //I start in x instead of 0 to avoid redundance calculation\n        for(unsigned long x=j; x &lt;asteroids.size(); x++){\n\n            //Avoid calculations on itself\n            if(asteroids[j].getX() != asteroids[x].getX() &amp;&amp; asteroids[j].getY() != asteroids[x].getY()){            \n                vector&lt;double&gt; forces = asteroids[j].calculateAsteroidMov(asteroids[x], gravity, dmin);\n                asteroids[x].invertForze(forces[0], forces[1]);\n            }\n        }\n    }\n\n    for(unsigned long j=0; j&lt;asteroids.size(); j++){\n        asteroids[j].updatePosition(t, width, height);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 3507510, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/9736e5c8bc1e540763b266e81de55497?s=128&d=identicon&r=PG&f=1", "display_name": "Sergiohernandez", "link": "https://stackoverflow.com/users/3507510/sergiohernandez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "accepted_answer_id": 47562316, "answer_count": 2, "score": 2, "last_activity_date": 1511993442, "creation_date": 1511991046, "question_id": 47562161, "link": "https://stackoverflow.com/questions/47562161/segmentation-fault-openmp-in-loop-c", "title": "Segmentation fault Openmp in loop C++", "body": "<p>I'm trying to parallelize a for loop in C++. The idea is that given an array of asteroids, I calculate the gravity force the asteroids create between them. Each asteroid has its mass and position.</p>\n\n<p>I want to parallelize this loop, but the problem is that there is a segmentation fault when a thread want to access to any asteroid that is used by another thread to calculate the force.</p>\n\n<p>this is my code:</p>\n\n<pre><code>    //For each asteroid calculate forzes acting \n    for(unsigned long j=0; j&lt;asteroids.size(); j++){\n        vector&lt;double&gt;forces(2);\n        {\n        #pragma omp parallel num_threads(4)\n        #pragma omp for\n        //I start in x instead of 0 to avoid redundance calculation\n        for(unsigned long x=j; x &lt;asteroids.size(); x++){\n            //Avoid calculations on itself\n            if(asteroids[j].getX() != asteroids[x].getX() &amp;&amp; asteroids[j].getY() != asteroids[x].getY()){\n                forces = asteroids[j].calculateAsteroidMov(asteroids[x], gravity, dmin);\n            }\n            asteroids[x].invertForze(forces[0], forces[1]);\n        }\n        }\n\n        for(unsigned long j=0; j&lt;asteroids.size(); j++){\n            asteroids[j].updatePosition(t, width, height); \n        }\n    }\n</code></pre>\n\n<p>And here is the calculateAstoidMov is:</p>\n\n<pre><code>std::vector&lt;double&gt; Asteroid::calculateAsteroidMov(Asteroid neighbour, double gravity, double dmin){\n    //Distance between \n    double xdist = x - neighbour.getX();\n    double ydist = y - neighbour.getY();\n    double dist = sqrt( xdist*xdist + ydist*ydist );\n    double xforze = 0; \n    double yforze = 0;\n\n    if(dist &gt; dmin){\n        double slope = ydist / xdist;\n        if(slope &gt; 1 || slope &lt; -1){\n            slope -= trunc(slope);\n        }\n\n        double alfa = atan(slope);\n\n        xforze = ((gravity * mass * neighbour.getMass()) / (dist*dist));\n        yforze = ((gravity * mass * neighbour.getMass()) / (dist*dist));\n\n        if(xforze &gt; 200){\n            xforze = 200;\n        }else if(yforze &gt; 200){\n            yforze = 200;\n        }\n\n        xforze *= cos(alfa);\n        yforze *= sin(alfa);\n\n        sumxforze += xforze;\n        sumyforze += yforze;\n    }\n\n    std::vector&lt;double&gt; forces = {xforze, yforze};\n    return forces;\n}\n</code></pre>\n\n<p>And the updatePosition()</p>\n\n<pre><code>void Asteroid::updatePosition(double t,  double width, double height){\n    //Spped update\n    vx += (sumxforze/mass) * t;\n    vy += (sumyforze/mass) * t;\n\n    //Position update\n    x += vx * t;\n    y += vy * t; \n}\n</code></pre>\n\n<p>How I should parallelize the loop that calculate the force? \nI hope it is clear... </p>\n"}, {"tags": ["c++", "yocto"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1511993648, "post_id": 47561970, "comment_id": 82083294, "body": "Yocto is software; you&#39;ll  need a hardware ID for such things. If you forgot to design that and got unlucky in your component choice, you might be unable to come up with a solution. There are fancy schemes based off the value of uninitialized memory (!) But those require kernel drivers"}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1511999509, "post_id": 47561970, "comment_id": 82085486, "body": "@MSalters Thanks for you reply, Actually I did not design the embedded system. It is an Intel RTF. So, I understand from your comment that only the vendor can answer my question ?"}, {"owner": {"reputation": 3589, "user_id": 70603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7881f3cacd278fb65ca3342307e4275b?s=128&d=identicon&r=PG", "display_name": "jdizzle", "link": "https://stackoverflow.com/users/70603/jdizzle"}, "edited": false, "score": 2, "creation_date": 1512010813, "post_id": 47561970, "comment_id": 82088350, "body": "You may need to provision one for yourself in the device. A cheap way that my work okay is to generate and save a UUID to a persistent location on your device. That UUID can then be reported to a back-end service for accounting etc."}], "answers": [{"tags": [], "owner": {"reputation": 3077, "user_id": 5559775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/e75xB.png?s=128&g=1", "display_name": "Charles C.", "link": "https://stackoverflow.com/users/5559775/charles-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1512164705, "creation_date": 1512164705, "answer_id": 47601915, "question_id": 47561970, "link": "https://stackoverflow.com/questions/47561970/unique-id-of-an-embedded-system-running-yocto/47601915#47601915", "title": "Unique ID of an embedded system running Yocto", "body": "<p>try to ask Intel if they have space on the MCU, we usually store our MAC Address, Serial number, as well as ddr configuration there;  This can be a one time flash.</p>\n\n<p>After you have confirmed the address;  You could use smbus to write the serial number into that space and retrieve it later;</p>\n\n<p>This is a better way than UUID because the serial will always be there even after you have delete everything;</p>\n\n<hr>\n\n<p>By the way, if the MAC Address is random, it is most likely because there are no MAC Address flashed into the system.  </p>\n\n<p>Again, ask Intel on how to flash your own MAC Address into the system.  This might eliminate the need to create another serial number;</p>\n"}], "owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512164705, "creation_date": 1511990218, "last_edit_date": 1512001690, "question_id": 47561970, "link": "https://stackoverflow.com/questions/47561970/unique-id-of-an-embedded-system-running-yocto", "title": "Unique ID of an embedded system running Yocto", "body": "<p>I have an embedded system running Yocto. The MAC address is not stable (it is random one that changes at every restart). The CPU ID is the same for all devices of this embedded system model.</p>\n\n<p>What other options should I look for to use as unique ID of the system? I need a unique ID for licensing purposes. I should retrieve this ID from an C++ Application.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1511989821, "post_id": 47561807, "comment_id": 82081472, "body": "After you implement thus macro, make sure your compiler is not adding additional padding to the struct."}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1511990281, "post_id": 47561807, "comment_id": 82081704, "body": "Sounds like X-Y problem to me."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1511990376, "post_id": 47561807, "comment_id": 82081749, "body": "@Zereges: not necessarily. There are cases (typically some interop situations) where padding between members should be specified explicitly and not controlled by the compiler."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1511990306, "post_id": 47561924, "comment_id": 82081715, "body": "Also be sure to set the structure alignment to 1 byte so the compiler doesn&#39;t add its own padding between members."}, {"owner": {"reputation": 1041, "user_id": 1561140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f081353ed1e05558b888ea218e8d5a?s=128&d=identicon&r=PG", "display_name": "Marcin Sucharski", "link": "https://stackoverflow.com/users/1561140/marcin-sucharski"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511991266, "post_id": 47561924, "comment_id": 82082162, "body": "@Fran&#231;oisAndrieux My mistake, thanks! I&#39;ve fixed it."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1511991484, "post_id": 47561924, "comment_id": 82082243, "body": "I would recommend a mention that c++ sometimes adds unexpected padding. For example, due to alignment restrictions, <code>PADDING(1);</code> between two <code>int</code> would actually introduce more than 1 byte of padding on most implementations. There&#39;s also hard to tell sometimes what the compiler might do to <a href=\"http://en.cppreference.com/w/cpp/language/data_members#Standard_layout\" rel=\"nofollow noreferrer\">non-standard layouts</a>. See <a href=\"https://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member\">Why isn&#39;t sizeof for a struct equal to the sum of sizeof of each member?</a>."}, {"owner": {"reputation": 3, "user_id": 9027965, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-33snBXSTank/AAAAAAAAAAI/AAAAAAAAAms/et2NfGglAsI/photo.jpg?sz=128", "display_name": "Marco Spampinato", "link": "https://stackoverflow.com/users/9027965/marco-spampinato"}, "edited": false, "score": 0, "creation_date": 1512080273, "post_id": 47561924, "comment_id": 82124711, "body": "I&#39;ll use the pack method since I do not know if gcc pads by 8 on 64bit, but the struct I define always respect the 4 bytes pattern. Could you explain how the # and ##works?"}, {"owner": {"reputation": 1041, "user_id": 1561140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f081353ed1e05558b888ea218e8d5a?s=128&d=identicon&r=PG", "display_name": "Marcin Sucharski", "link": "https://stackoverflow.com/users/1561140/marcin-sucharski"}, "edited": false, "score": 0, "creation_date": 1512148125, "post_id": 47561924, "comment_id": 82154499, "body": "<code>##</code> merges two arguments on text-level (so padding_ ## 20 became padding_20 in resulting code). Additional levels of macros (TOKENPASTE and TOKENPASTE2) are needed because of the way the macros work (padding_ ## <b>LINE</b> would be expanded to padding__LINE__ otherwise). For details read this answer: <a href=\"https://stackoverflow.com/a/1597129/1561140\">stackoverflow.com/a/1597129/1561140</a>"}], "tags": [], "owner": {"reputation": 1041, "user_id": 1561140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f081353ed1e05558b888ea218e8d5a?s=128&d=identicon&r=PG", "display_name": "Marcin Sucharski", "link": "https://stackoverflow.com/users/1561140/marcin-sucharski"}, "is_accepted": true, "score": 1, "last_activity_date": 1511994012, "last_edit_date": 1511994012, "creation_date": 1511990036, "answer_id": 47561924, "question_id": 47561807, "link": "https://stackoverflow.com/questions/47561807/define-padding-member-in-c/47561924#47561924", "title": "Define padding member in C++", "body": "<p>You can define it like that:</p>\n\n<pre><code>#define TOKENPASTE(x, y) x ## y\n#define TOKENPASTE2(x, y) TOKENPASTE(x, y)\n#define PADDING(size) char TOKENPASTE2(padding_, __LINE__) [size]\n</code></pre>\n\n<p>Change field name prefix as you like it (preferably one that won't ever\ncollide with other possible members).</p>\n\n<p>Keep in mind (as mentioned by Remy Lebeau and Fran\u00e7ois Andrieux in comments) that compiler can sometimes add unexpected padding. For reference you can read:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member\">Why isn&#39;t sizeof for a struct equal to the sum of sizeof of each member?</a></li>\n<li><a href=\"http://en.cppreference.com/w/cpp/language/data_members#Standard_layout\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/data_members#Standard_layout</a></li>\n</ul>\n\n<p>EDIT: Sorry, initial code was incorrect (it was incorrectly using <code>__LINE__</code> expansion in macro). I fixed it using solution from: <a href=\"https://stackoverflow.com/a/1597129/1561140\">https://stackoverflow.com/a/1597129/1561140</a></p>\n"}], "owner": {"reputation": 3, "user_id": 9027965, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-33snBXSTank/AAAAAAAAAAI/AAAAAAAAAms/et2NfGglAsI/photo.jpg?sz=128", "display_name": "Marco Spampinato", "link": "https://stackoverflow.com/users/9027965/marco-spampinato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 47561924, "answer_count": 1, "score": -1, "last_activity_date": 1511994012, "creation_date": 1511989637, "last_edit_date": 1511989655, "question_id": 47561807, "link": "https://stackoverflow.com/questions/47561807/define-padding-member-in-c", "title": "Define padding member in C++", "body": "<p>Is there a way to use macro for padding inside structs, I mean like that:</p>\n\n<pre><code>struct Monument{\n    char name[32];\n    PADDING( 4 * sizeof(int));\n    int cityId;\n    PADDING( 4 * sizeof(int));\n    int age;\n\n}\n</code></pre>\n\n<p>where PADDING(s) macro just adds space.</p>\n"}, {"tags": ["c++", "replace"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511989685, "post_id": 47561739, "comment_id": 82081392, "body": "<code>&#39;\\\\\\\\&#39;</code> is a multibyte character and can&#39;t be represented by <code>char</code>. <code>&#39;\\\\\\\\&#39;</code> is different from <code>&quot;\\\\&quot;</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511989791, "post_id": 47561739, "comment_id": 82081450, "body": "Your question asks about changing / to // but your code uses \\ and \\\\."}, {"owner": {"reputation": 17, "user_id": 6927194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98a5f46fd3254090cd734be33d6ad407?s=128&d=identicon&r=PG&f=1", "display_name": "faham", "link": "https://stackoverflow.com/users/6927194/faham"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511989897, "post_id": 47561739, "comment_id": 82081508, "body": "thanks, what to do ?"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 17, "user_id": 6927194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98a5f46fd3254090cd734be33d6ad407?s=128&d=identicon&r=PG&f=1", "display_name": "faham", "link": "https://stackoverflow.com/users/6927194/faham"}, "edited": false, "score": 0, "creation_date": 1511992766, "post_id": 47562314, "comment_id": 82082903, "body": "not to replace all occurrences of a substring with another substring, no."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1511992856, "last_edit_date": 1511992856, "creation_date": 1511991674, "answer_id": 47562314, "question_id": 47561739, "link": "https://stackoverflow.com/questions/47561739/no-matching-function-for-call-to-replacestdbasic-stringchariterator-std/47562314#47562314", "title": "no matching function for call to &#39;replace(std::basic_string&lt;char&gt;::iterator, std::basic_string&lt;char&gt;::iterator, char, int)&#39;|", "body": "<p>You are using <a href=\"http://en.cppreference.com/w/cpp/algorithm/replace\" rel=\"nofollow noreferrer\"><code>std::replace()</code></a>, which replaces values within a range of iterators.  In this situation, you are using iterators from a <code>std::string</code>, so the value being searched for, and the value to replace it with, must both be single <code>char</code> values.  However, <code>'\\\\\\\\'</code> is a multi-byte character, and thus can't be used as a <code>char</code> value.  That is why you are getting the compiler error.</p>\n\n<p><code>std::string</code> has its own overloaded <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/replace\" rel=\"nofollow noreferrer\"><code>replace()</code></a> methods, several of which can replace portions of the <code>std::string</code> with multi-character strings.</p>\n\n<p>Try this instead, eg:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n    string str = \"C:\\\\user\\\\asd\";\n\n    string::size_type pos = 0;    \n    while ((pos = str.find('\\\\', pos)) != string::npos)\n    {\n        str.replace(pos, 1, \"\\\\\\\\\");\n        pos += 2;\n    }\n\n    cout &lt;&lt; str;\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/Dj7fih\" rel=\"nofollow noreferrer\">Live demo</a></p>\n\n<p>However, you say you \"want to make address to work with files\", which implies  to me that you want to create a <a href=\"https://en.wikipedia.org/wiki/File_URI_scheme\" rel=\"nofollow noreferrer\"><code>file:</code> URI</a>.  If so, then you need something more like this instead (this is a gross over-simplification, a <em>proper</em> URI generator would be more complex then this, as <a href=\"https://tools.ietf.org/html/rfc3986\" rel=\"nofollow noreferrer\">URIs have many rules to them</a>, but this will get you started):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nconst char* safe_chars = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~!$&amp;'()*+,;=:@/\";\n\nint main()\n{\n    string str = \"C:\\\\user\\\\ali baba\";\n\n    replace(str.begin(), str.end(), '\\\\', '/');\n\n    string::size_type pos = 0;\n    while ((pos = str.find_first_not_of(safe_chars, pos)) != string::npos)\n    {\n        ostringstream oss;\n        oss &lt;&lt; '%' &lt;&lt; hex &lt;&lt; noshowbase &lt;&lt; uppercase &lt;&lt; (int) str[pos];\n        string newvalue = oss.str();\n        str.replace(pos, 1, newvalue);\n        pos += newvalue.size();\n    }\n\n    str = \"file:///\" + str;\n\n    cout &lt;&lt; str;\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/QdKdG7\" rel=\"nofollow noreferrer\">Live demo</a></p>\n"}], "owner": {"reputation": 17, "user_id": 6927194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98a5f46fd3254090cd734be33d6ad407?s=128&d=identicon&r=PG&f=1", "display_name": "faham", "link": "https://stackoverflow.com/users/6927194/faham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4028, "favorite_count": 0, "accepted_answer_id": 47562314, "answer_count": 1, "score": 1, "last_activity_date": 1511992856, "creation_date": 1511989341, "last_edit_date": 1511990520, "question_id": 47561739, "link": "https://stackoverflow.com/questions/47561739/no-matching-function-for-call-to-replacestdbasic-stringchariterator-std", "title": "no matching function for call to &#39;replace(std::basic_string&lt;char&gt;::iterator, std::basic_string&lt;char&gt;::iterator, char, int)&#39;|", "body": "<p>How can I change all <code>\\</code> to <code>\\\\</code>?</p>\n\n<p>I want to make address to work with files:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\nint main()\n{\n    string str = \"C:\\\\user\\\\asd\";\n    replace(str.begin(), str.end(), '\\\\', '\\\\\\\\');\n    cout &lt;&lt; str;\n    return 0;\n}\n</code></pre>\n\n<p>I am getting an error:</p>\n\n<blockquote>\n  <p>F:\\c++\\tests\\regex\\main.cpp|8|error: no matching function for call to 'replace(std::basic_string&lt;char>::iterator, std::basic_string&lt;char>::iterator, char, int)'|</p>\n</blockquote>\n\n<p>How can I do this work with a <code>char</code> array in C++ (without a function)?</p>\n"}, {"tags": ["c++", "qt", "pyqt", "pyside"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1511989256, "post_id": 47561696, "comment_id": 82081168, "body": "What do you mean by a &quot;system file&quot;?"}, {"owner": {"reputation": 3970, "user_id": 2757925, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a6804067a1c00a041299978a7b580ace?s=128&d=identicon&r=PG&f=1", "display_name": "V.K.", "link": "https://stackoverflow.com/users/2757925/v-k"}, "edited": false, "score": 0, "creation_date": 1511989325, "post_id": 47561696, "comment_id": 82081201, "body": "I mean the file which are selected by <code>QDir::System</code> flag in <code>QDir::entryList()</code>. I am not sure what exactly it is as the documentation is very vague on this point."}], "answers": [{"tags": [], "owner": {"reputation": 3209, "user_id": 5794048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Egkox.jpg?s=128&g=1", "display_name": "Murphy", "link": "https://stackoverflow.com/users/5794048/murphy"}, "is_accepted": false, "score": 0, "last_activity_date": 1512037756, "creation_date": 1512037756, "answer_id": 47571181, "question_id": 47561696, "link": "https://stackoverflow.com/questions/47561696/how-to-check-that-a-file-or-dir-is-a-system-file-or-dir/47571181#47571181", "title": "how to check that a file or dir is a &#39;system&#39; file or dir", "body": "<p>Obviously there isn't. Your best chance is to use <code>QDir::entryList()</code> with <code>nameFilters</code> set to the path and the <code>filters</code> flags set to <code>QDir::System</code>. If the returned list is empty then that path isn't a system file as defined by <code>QDir::System</code>.</p>\n"}], "owner": {"reputation": 3970, "user_id": 2757925, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a6804067a1c00a041299978a7b580ace?s=128&d=identicon&r=PG&f=1", "display_name": "V.K.", "link": "https://stackoverflow.com/users/2757925/v-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512037756, "creation_date": 1511989132, "last_edit_date": 1511989281, "question_id": 47561696, "link": "https://stackoverflow.com/questions/47561696/how-to-check-that-a-file-or-dir-is-a-system-file-or-dir", "title": "how to check that a file or dir is a &#39;system&#39; file or dir", "body": "<p><code>QDir::entryList()</code> allows listing 'system' files and dirs using <code>QDir::System</code> and 'hidden' files and dirs using <code>QDir::Hidden</code> flag. If I already know file path, I can check if the file is hidden using <code>QFileInfo::isHidden()</code>. But is there something similar for 'system' files? Something like hypothetical <code>QFileInfo::isSystem()</code>? In other words, such a function should return <code>true</code> for items which are returned using <code>QDir::System</code> flag in <code>QDir::entryList()</code> and <code>false</code> otherwise.</p>\n"}, {"tags": ["c++", "c++11", "templates", "template-meta-programming"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1511990891, "post_id": 47561679, "comment_id": 82081987, "body": "What&#39;d you try? What doesn&#39;t work?"}, {"owner": {"reputation": 55, "user_id": 1786089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d5af4f836b78360d56c9441bd4df6c3?s=128&d=identicon&r=PG", "display_name": "user1786089", "link": "https://stackoverflow.com/users/1786089/user1786089"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1512022182, "post_id": 47561679, "comment_id": 82091445, "body": "@Barry i don&#39;t understand what i need to do, so i didn,&#39;t try so much."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 1786089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d5af4f836b78360d56c9441bd4df6c3?s=128&d=identicon&r=PG", "display_name": "user1786089", "link": "https://stackoverflow.com/users/1786089/user1786089"}, "edited": false, "score": 0, "creation_date": 1512022401, "post_id": 47561885, "comment_id": 82091536, "body": "thank you. Please, can you explain how first example works? I don&#39;t understand how  works this line:                               template &lt;int N, int ... Next&gt; struct Generate : public Generate&lt;N-1, N-1, Next...&gt;  { };"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 55, "user_id": 1786089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d5af4f836b78360d56c9441bd4df6c3?s=128&d=identicon&r=PG", "display_name": "user1786089", "link": "https://stackoverflow.com/users/1786089/user1786089"}, "edited": false, "score": 1, "creation_date": 1512046413, "post_id": 47561885, "comment_id": 82104635, "body": "@user1786089 - answer improved; hope this helps."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 1, "last_activity_date": 1512054457, "last_edit_date": 1512054457, "creation_date": 1511989881, "answer_id": 47561885, "question_id": 47561679, "link": "https://stackoverflow.com/questions/47561679/operations-over-list-of-ints-with-template-metaprogramming-c11/47561885#47561885", "title": "Operations over list of ints with template metaprogramming [C++11]", "body": "<p>Your <code>Generate</code> is very similar to <code>std::make_index_sequence</code>; maybe you can search an implementation.</p>\n\n<p>Just for fun, I propose the following linear approach (simple but not really efficient)</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;int ...&gt;\nstruct IntList\n { };\n\ntemplate &lt;int N, int ... Next&gt;\nstruct Generate : public Generate&lt;N-1, N-1, Next...&gt;\n { };\n\ntemplate &lt;int ... Next&gt;\nstruct Generate&lt;0, Next ... &gt;\n { using type = IntList&lt;Next ... &gt;; };\n\nint main()\n {\n   static_assert( std::is_same&lt;Generate&lt;5&gt;::type,\n                               IntList&lt;0, 1, 2, 3, 4&gt;&gt;{}, \"!\" );\n }\n</code></pre>\n\n<p>A better approach (but not so simple) can be the following (logarithmic)</p>\n\n<pre><code>template &lt;int...&gt;\nstruct IntList\n { };\n\ntemplate &lt;typename, typename&gt;\nstruct ConcatLists;\n\ntemplate &lt;int ... S1, int ... S2&gt;\nstruct ConcatLists&lt;IntList&lt;S1...&gt;, IntList&lt;S2...&gt;&gt;\n { using type = IntList&lt;S1..., (sizeof...(S1)+S2)...&gt;; };\n\ntemplate &lt;int N&gt;\nstruct Generate\n { using type = typename ConcatLists&lt;\n      typename Generate&lt;(N&gt;&gt;1)&gt;::type,\n      typename Generate&lt;N-(N&gt;&gt;1)&gt;::type&gt;::type; };\n\ntemplate&lt;&gt;\nstruct Generate&lt;0&gt;\n { using type = IntList&lt;&gt;; };\n\ntemplate&lt;&gt;\nstruct Generate&lt;1&gt;\n { using type = IntList&lt;0&gt;; };\n\nint main()\n {\n   static_assert( std::is_same&lt;Generate&lt;5&gt;::type,\n                               IntList&lt;0, 1, 2, 3, 4&gt;&gt;{}, \"!\" );    \n }\n</code></pre>\n\n<p><strong>-- EDIT --</strong></p>\n\n<p>The OP ask</p>\n\n<blockquote>\n  <p>thank you. Please, can you explain how first example works? I don't understand how works this line: <code>template &lt;int N, int ... Next&gt; struct Generate : public Generate&lt;N-1, N-1, Next...&gt; { };</code></p>\n</blockquote>\n\n<p>I think the best way to understand it is follows the chain that, from <code>Generate&lt;5&gt;</code>, bring to <code>Inlist&lt;0, 1, 2, 3, 4&gt;</code>.</p>\n\n<p><code>Generate&lt;5&gt;</code> (<code>5</code> is different from <code>0</code> so only the main version of <code>Generate</code> is applicable) inherit (<code>N</code> is <code>5</code>; <code>Next...</code> is empty) from <code>Generate&lt;4, 4&gt;</code>.</p>\n\n<p><code>Generate&lt;4, 4&gt;</code> (<code>4</code> is different from <code>0</code>) inherit (<code>N</code> is <code>5</code>; <code>Next...</code> is <code>4</code>) from <code>Generate&lt;3, 3, 4&gt;</code>.</p>\n\n<p>Now should be clear.</p>\n\n<p><code>Generate&lt;3, 3, 4&gt;</code> inherit from <code>Generate&lt;2, 2, 3, 4&gt;</code>.</p>\n\n<p><code>Generate&lt;2, 2, 3, 4&gt;</code> inherit from <code>Generate&lt;1, 1, 2, 3, 4&gt;</code>.</p>\n\n<p><code>Generate&lt;1, 1, 2, 3, 4&gt;</code> inherit from <code>Generate&lt;0, 0, 1, 2, 3, 4&gt;</code>.</p>\n\n<p>Now <code>N</code> is zero. So both versions of <code>Generate</code> match but the partial specialization (<code>struct Generate&lt;0, Next ... &gt;</code>) is more specialized and is the used one and (<code>Next...</code> is <code>0, 1, 2, 3, 4</code>) we have</p>\n\n<pre><code>struct Generate&lt;0, 0, 1, 2, 3, 4&gt;\n { using type = IntList&lt;0, 1, 2, 3, 4&gt;; };\n</code></pre>\n\n<p>Conclusion: <code>Generate&lt;5&gt;</code> inherit from <code>Generate&lt;0, 0, 1, 2, 3, 4&gt;</code> that contains <code>type</code> defined as <code>IntList&lt;0, 1, 2, 3, 4&gt;</code>.</p>\n"}], "owner": {"reputation": 55, "user_id": 1786089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d5af4f836b78360d56c9441bd4df6c3?s=128&d=identicon&r=PG", "display_name": "user1786089", "link": "https://stackoverflow.com/users/1786089/user1786089"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 47561885, "answer_count": 1, "score": 0, "last_activity_date": 1512177824, "creation_date": 1511989038, "last_edit_date": 1512177824, "question_id": 47561679, "link": "https://stackoverflow.com/questions/47561679/operations-over-list-of-ints-with-template-metaprogramming-c11", "title": "Operations over list of ints with template metaprogramming [C++11]", "body": "<p>I have implementation of list of ints with template:</p>\n\n<pre><code>template&lt;int ... Int&gt;\nstruct IntList;\n\ntemplate&lt;int H, int ... T&gt;\nstruct IntList&lt;H, T...&gt;{\n    static const int Head = H;\n    using Tail = IntList&lt;T...&gt;;\n};\ntemplate&lt;&gt;\nstruct IntList&lt;&gt;{};\n</code></pre>\n\n<p>I want to define metafunctions to work with <code>IntList</code>: <code>IntCons</code> that allows to increase list by one element, and <code>Generate</code> that allows to generate a list of length N with ints from 0 to N-1 (<em>Example of usage:</em> <code>using L = Generate&lt;5&gt;::type; // IntList&lt;0,1,2,3,4&gt;)</code>.\nI define <code>IntCons</code> this way:</p>\n\n<pre><code>template&lt;int H, typename IL&gt;\nstruct IntCons;\n\ntemplate&lt;int H, int... Tail&gt;\nstruct IntCons&lt;H, IntList&lt;Tail...&gt;&gt;{\n    using type = IntList&lt;H, Tail...&gt;;\n};\n</code></pre>\n\n<p>And i can't define metafunction <code>Generate</code> in such way that use function <code>IntCons</code> inside.\nHere's hint, according to i need use default parameter in <code>Generate</code>. </p>\n\n<pre><code>template&lt;int N /*, typename IL =  default parameter?*/ &gt;\nstruct Generate;\n\ntemplate&lt;int N /*, typename IL =  default parameter?*/ &gt;\nstruct Generate&lt;N&gt;{\n    using type = ......;\n};\n</code></pre>\n\n<p>What are the ways to define the meta-function Generate, how can i implement it?</p>\n"}, {"tags": ["c++", "c", "linux", "gcc"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1511988981, "post_id": 47561634, "comment_id": 82081029, "body": "What&#39;s <code>-xCC</code> ? Just remove it."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1511989521, "post_id": 47561634, "comment_id": 82081299, "body": "If you&#39;re migrating to 64-bit linux, you may also need to specify <code>-m32</code> which IIRC is what Oracle&#39;s compiler defaults to (if you were using the default)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1511989688, "post_id": 47561634, "comment_id": 82081396, "body": "GCC4.1 is <b>obsolete</b> and unmaintained so don&#39;t use it. Current GCC is <a href=\"https://gcc.gnu.org/gcc-7/\" rel=\"nofollow noreferrer\">GCC 7</a>, in november 2017 (a lot of progress made since GCC4.1). GCC 8 will be released in a few weeks. Read about <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html\" rel=\"nofollow noreferrer\">Invoking GCC</a>"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1511996468, "post_id": 47561634, "comment_id": 82084463, "body": "...and if you see any errors tagged with <code>-fpermissive</code> you&#39;ll want to add that as well.  Shouldn&#39;t be an issue with C, but with C++ it might be."}], "answers": [{"tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": false, "score": 3, "last_activity_date": 1511989776, "creation_date": 1511989776, "answer_id": 47561856, "question_id": 47561634, "link": "https://stackoverflow.com/questions/47561634/cc-language-cc-not-recognized/47561856#47561856", "title": "cc: language CC not recognized", "body": "<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Overall-Options.html#index-x\" rel=\"nofollow noreferrer\">The <code>-x</code> option selects the input language</a>, so <code>-xCC</code> attempts to use <code>CC</code>, which is not known to <code>gcc</code>.  With Solaris <code>cc</code>, <code>-xCC</code> enables C++-style comments, so you may have to use <code>-std=gnu99</code> instead of <code>-xCC</code> (but it is also possible that your build of GCC 4.1 supports such comments by default).</p>\n"}], "owner": {"reputation": 13, "user_id": 3658145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac106d7787d8c0f0dca5928e1370b42e?s=128&d=identicon&r=PG&f=1", "display_name": "user3658145", "link": "https://stackoverflow.com/users/3658145/user3658145"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1273, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511989776, "creation_date": 1511988853, "last_edit_date": 1511989580, "question_id": 47561634, "link": "https://stackoverflow.com/questions/47561634/cc-language-cc-not-recognized", "title": "cc: language CC not recognized", "body": "<p>When I'm migrating my app from Solaris C compiler sunstudio/v12/SUNWspro to Linux C compiler GCC version 4.1.2 20080704, I'm seeing a CC not recognized error.</p>\n\n<p>C Command: The same command is working in solaris but not working in Linux with Gcc 4.1.2.</p>\n\n<pre><code>CFLAGS          = -c -g -xCC -I. -I${ORACLE_INCLUDE}\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>cc: language CC not recognized\ncc: language CC not recognized\ncc: check*****maint.c: linker input file unused because linking not done\n</code></pre>\n\n<p>Do we need to change any parameters to be compatible with GCC 4.1.2 ?</p>\n"}, {"tags": ["c++", "c++17"], "answers": [{"tags": [], "owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "is_accepted": true, "score": 1, "last_activity_date": 1511989108, "creation_date": 1511989108, "answer_id": 47561691, "question_id": 47561630, "link": "https://stackoverflow.com/questions/47561630/obtaining-a-rough-upper-bound-of-the-size-of-stdstring/47561691#47561691", "title": "Obtaining a rough upper bound of the size of std::string", "body": "<p>Try this piece of code on the compiler explorer, and select various compilers:</p>\n\n<pre><code>#include &lt;string&gt;\n\nsize_t size()\n{\n  return sizeof(std::string);\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/g/NTWsuk\" rel=\"nofollow noreferrer\">https://godbolt.org/g/NTWsuk</a></p>\n\n<p>For example, a possible result is:</p>\n\n<pre><code>size():\n        mov     eax, 32\n        ret\n</code></pre>\n\n<p>Meaning the size of <code>std::string</code> is 32 bytes.</p>\n"}, {"comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 3, "creation_date": 1511992137, "post_id": 47561868, "comment_id": 82082570, "body": "You forget small-string optimization."}, {"owner": {"reputation": 7838, "user_id": 383045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72da00bd74a5744f9cb89d1a52a6d447?s=128&d=identicon&r=PG", "display_name": "yzt", "link": "https://stackoverflow.com/users/383045/yzt"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1512189211, "post_id": 47561868, "comment_id": 82167914, "body": "I know sometimes implementations increase their size to accommodate &quot;larger&quot; small strings, but other than that, I don&#39;t know what effect this has on string size."}], "tags": [], "owner": {"reputation": 7838, "user_id": 383045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72da00bd74a5744f9cb89d1a52a6d447?s=128&d=identicon&r=PG", "display_name": "yzt", "link": "https://stackoverflow.com/users/383045/yzt"}, "is_accepted": false, "score": 2, "last_activity_date": 1511991361, "last_edit_date": 1511991361, "creation_date": 1511989805, "answer_id": 47561868, "question_id": 47561630, "link": "https://stackoverflow.com/questions/47561630/obtaining-a-rough-upper-bound-of-the-size-of-stdstring/47561868#47561868", "title": "Obtaining a rough upper bound of the size of std::string", "body": "<p>The usual implementation for <code>std::string</code> has three pointer-sized objects in it, so it would be <em>12 bytes</em> on 32-bit architectures and <em>24 bytes</em> on 64.</p>\n\n<p>However, some implementations add debug features or things like that and are about 4 pointers in size. I haven't seen anything other than these two options on the common platform/compilers I work with (admittedly nothing exotic, though.)</p>\n"}], "owner": {"reputation": 3783, "user_id": 1731200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ee017760fb073022ed2dc2faaf506516?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1731200/matthias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 47561691, "answer_count": 2, "score": -1, "last_activity_date": 1511991361, "creation_date": 1511988831, "question_id": 47561630, "link": "https://stackoverflow.com/questions/47561630/obtaining-a-rough-upper-bound-of-the-size-of-stdstring", "title": "Obtaining a rough upper bound of the size of std::string", "body": "<p>I consider using C++17's <code>std::variant</code> with the following types:</p>\n\n<ul>\n<li>1 byte: <code>bool</code>;</li>\n<li>4 bytes: integer and floating value;</li>\n<li>2x 4 bytes: integer and floating value;</li>\n<li>3x 4 bytes: integer and floating value;</li>\n<li>4x 4 bytes: floating value;</li>\n<li><code>std::string</code>.</li>\n</ul>\n\n<p>The C++ standard, unfortunately, does not specify the implementation of <code>std::string</code>, but merely describes the interface and associated behavior of the class. Is it, however, possible to obtain a sort of rough upper bound of its size for the set of most commonly used compilers (MVC++, Clang, GCC, icc, etc.)? I am not really concerned with an exact upper bound, but I rather want to have an idea of the size compared to the already largest type of 16 bytes. I guess that a pointer could suffice to implement <code>std::string</code>, but due to the short string optimization, the size can be much larger?</p>\n"}, {"tags": ["c++", "templates", "member-function-pointers"], "answers": [{"comments": [{"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 0, "creation_date": 1511989224, "post_id": 47561701, "comment_id": 82081153, "body": "That is not the problem."}, {"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 0, "creation_date": 1511989297, "post_id": 47561701, "comment_id": 82081185, "body": "@ForeverLearning the only error is that Foo f is not const. Otherwise it is fine."}, {"owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "edited": false, "score": 0, "creation_date": 1511989526, "post_id": 47561701, "comment_id": 82081303, "body": "In <i>my</i> opinion, there is NONE! This rocks. Thanks Jodocus. I did know about <code>declval</code> and <code>decltype</code> but never thought of putting them together like you have!"}, {"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 0, "creation_date": 1511989540, "post_id": 47561701, "comment_id": 82081313, "body": "During testing I found that if you change C to not be const keyword it works fine."}], "tags": [], "owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "is_accepted": true, "score": 2, "last_activity_date": 1511989150, "creation_date": 1511989150, "answer_id": 47561701, "question_id": 47561562, "link": "https://stackoverflow.com/questions/47561562/default-value-for-template-with-member-function-pointer/47561701#47561701", "title": "Default value for template with member function pointer", "body": "<blockquote>\n  <p>How do I make <code>&amp;Foo::DoNothing()</code> the default for <code>Func(...)</code>?</p>\n</blockquote>\n\n<p>You basically just specify the required default arguments:</p>\n\n<pre><code>struct Foo { int DoNothing() const { } };\n\ntemplate&lt;\n  typename T, \n  typename C, \n  typename R = decltype(std::declval&lt;const C&gt;().DoNothing())\n&gt;\nT Func(C const* obj,\n       R (C::*mf)() const = &amp;C::DoNothing,\n       T* maybe_unused = nullptr)\n{\n    (obj-&gt;*mf)();\n    return T{};\n}\n</code></pre>\n\n<p>Note that you need to specify two different things: for one the default member function to call and additionally the default return value type, as it cannot be deduced from default arguments.</p>\n"}, {"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1511989665, "creation_date": 1511989665, "answer_id": 47561816, "question_id": 47561562, "link": "https://stackoverflow.com/questions/47561562/default-value-for-template-with-member-function-pointer/47561816#47561816", "title": "Default value for template with member function pointer", "body": "<p>Change Func to:</p>\n\n<pre><code>template&lt;typename T, typename R, typename C&gt;\nT Func(C const* obj, R (C::*mf)()=&amp;C::do_nothing, T* maybe_unused = nullptr)\n{\n...\n}\n</code></pre>\n\n<p>Note that because obj is const I actually had to change it to:</p>\n\n<pre><code>template&lt;typename T, typename R, typename C&gt;\nT Func(C const* obj, R (C::*mf)() const=&amp;C::do_nothing, T* maybe_unused = nullptr)\n{\n...\n}\n</code></pre>\n\n<p>and I changed do_nothing() to be const as well.</p>\n"}], "owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 47561701, "answer_count": 2, "score": 1, "last_activity_date": 1511989665, "creation_date": 1511988534, "question_id": 47561562, "link": "https://stackoverflow.com/questions/47561562/default-value-for-template-with-member-function-pointer", "title": "Default value for template with member function pointer", "body": "<p>So, I have something like this so far:</p>\n\n<pre><code>struct Foo { int DoNothing() { } };\n\ntemplate&lt;typename T, typename C, typename R&gt;\nT Func(C const* obj,\n       R (C::*mf)(),\n       T* maybe_unused = nullptr)\n{\n    (obj-&gt;*mf)();\n    return T{};\n}\n\nFoo f;\nint r = Func&lt;int&gt;(&amp;f, &amp;Foo::DoNothing); // works as expected\n</code></pre>\n\n<p>How do I make <code>&amp;Foo::DoNothing()</code> the default for <code>Func(...)</code>?\nIOW, I would like to pass some other member function of <code>Foo</code>\nat another time but for the most part, I want <code>DoNothing</code> to\nbe the default. We can safely assume all the member functions\nI am interested in take no arguments.</p>\n"}, {"tags": ["c++", "qt", "qdial"], "answers": [{"tags": [], "owner": {"reputation": 3638, "user_id": 5653461, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/yjvCY.png?s=128&g=1", "display_name": "IAmInPLS", "link": "https://stackoverflow.com/users/5653461/iaminpls"}, "is_accepted": true, "score": 1, "last_activity_date": 1512033641, "creation_date": 1512033641, "answer_id": 47569824, "question_id": 47561259, "link": "https://stackoverflow.com/questions/47561259/how-to-add-a-resource-image-on-qdial/47569824#47569824", "title": "How to add a resource image on QDial?", "body": "<p><a href=\"https://bugreports.qt.io/browse/QTBUG-61481\" rel=\"nofollow noreferrer\">QDial does not support stylesheets</a>, except the background color. However, here is how I am doing it.</p>\n\n<p><em>A warning, though: this is not complete at all, it just gives you an idea of how to do it.</em></p>\n\n<p>In your header, set a property for a QPixmap which will be your background image:</p>\n\n<pre><code>class QCustomDial : public QDial\n{\n    Q_OBJECT\n\n    Q_PROPERTY(QPixmap backgroundImage READ backgroundImage WRITE setBackgroundImage DESIGNABLE true)\n\n    QPixmap* m_background;\n\n public:\n    QPixmap backgroundImage()    { return *m_background; }\n\n    void setBackgroundImage(QPixmap pixmap) \n    { \n        *m_background = pixmap;\n        update(); \n    }\n\n private:\n    QPixmap* m_background;\n};\n</code></pre>\n\n<p>Then, in your paintEvent, you'll have to draw the pixmap:</p>\n\n<pre><code>void QCustomDial::paintEvent(QPaintEvent*)\n{\n    QPainter painter(this);\n    ...\n    QPoint start(0, 0); //whatever you want \n    painter.drawPixmap(start, *m_background);\n    ...\n}\n</code></pre>\n\n<p>Finally, the part you wanted in your question: the stylesheet. Now that you have defined a <code>Q_PROPERTY</code>, you can get it from the stylesheet:</p>\n\n<pre><code>QCustomDial {\n    qproperty-backgroundImage: url(:/resources/img/knob.png);\n}\n</code></pre>\n\n<p>I hope that it will help you. I also suggest you to read this blog about a custom QDial (<a href=\"http://thecodeinn.blogspot.fr/2015/02/customizing-qdials-in-qt-part-1.html\" rel=\"nofollow noreferrer\">part1</a> and <a href=\"http://thecodeinn.blogspot.fr/2015/03/customizing-qdials-in-qt-part-2.html\" rel=\"nofollow noreferrer\">part2</a>).</p>\n"}], "owner": {"reputation": 211, "user_id": 2337945, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/490d8becc8b4322c0552496af93dd85a?s=128&d=identicon&r=PG", "display_name": "Sonicpath", "link": "https://stackoverflow.com/users/2337945/sonicpath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 769, "favorite_count": 0, "accepted_answer_id": 47569824, "answer_count": 1, "score": 0, "last_activity_date": 1537281918, "creation_date": 1511987279, "last_edit_date": 1537281918, "question_id": 47561259, "link": "https://stackoverflow.com/questions/47561259/how-to-add-a-resource-image-on-qdial", "title": "How to add a resource image on QDial?", "body": "<p>How to add a resource image on QDial?</p>\n\n<p>I have already done a custom class for QDial but how can I include a stylesheet there, in order to add a resource image like I do for buttons? For example:</p>\n\n<pre><code>button1-&gt;setStyleSheet(\"border-image:url(:/resources/img/knob.png)\");\n</code></pre>\n"}, {"tags": ["c++", "vector", "stl"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1511988163, "post_id": 47561222, "comment_id": 82080603, "body": "<code>tempVector.insert(tempVector.end() inputs.end() - temp, inputs.begin()  + loopVar);</code> ? (assuming that <code>inputs.end() - temp &lt;= inputs.begin()  + loopVar</code>)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1511988361, "post_id": 47561222, "comment_id": 82080699, "body": "<code>insert()</code> expects an iterator in the 1st parameter.  <code>back()</code> returns (a reference to) the last element value, not an iterator to the last element. To get an iterator to the last element, use <code>end()-1</code> instead (assuming the <code>vector</code> is not empty). Then you can subtract from that iterator as needed."}], "answers": [{"tags": [], "owner": {"reputation": 1602, "user_id": 5285891, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/863f0d8e87256fcdf5209545922d20f9?s=128&d=identicon&r=PG&f=1", "display_name": "pzelasko", "link": "https://stackoverflow.com/users/5285891/pzelasko"}, "is_accepted": false, "score": 0, "last_activity_date": 1511988526, "creation_date": 1511988526, "answer_id": 47561561, "question_id": 47561222, "link": "https://stackoverflow.com/questions/47561222/can-we-perform-insert-on-a-vector-using-back-value-index-on-it/47561561#47561561", "title": "Can we perform insert on a vector using back()-value index on it?", "body": "<p>The <code>insert</code> method accepts an iterator as the first argument (e.g. see <a href=\"http://en.cppreference.com/w/cpp/container/vector/insert\" rel=\"nofollow noreferrer\">cppreference</a>). To insert an elemt at the back, you could try the following:</p>\n\n<pre><code>vec.insert(vec.end(), value);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": false, "score": 1, "last_activity_date": 1511990257, "last_edit_date": 1511990257, "creation_date": 1511989725, "answer_id": 47561829, "question_id": 47561222, "link": "https://stackoverflow.com/questions/47561222/can-we-perform-insert-on-a-vector-using-back-value-index-on-it/47561829#47561829", "title": "Can we perform insert on a vector using back()-value index on it?", "body": "<blockquote>\n  <p>... <em>insert values in a vector using a slice of other vector and put it at the back...</em></p>\n</blockquote>\n\n<p><strong>Solution 1:</strong></p>\n\n<p>There's a <a href=\"http://en.cppreference.com/w/cpp/container/vector/insert\" rel=\"nofollow noreferrer\"><code>std::vector::insert()</code></a> overload that has the form:</p>\n\n<pre><code>template&lt; class InputIt &gt;\nvoid insert( iterator pos, InputIt first, InputIt last);\n</code></pre>\n\n<p>So you can write:</p>\n\n<pre><code>  std::vector&lt;int&gt; a = { 1, 2, 3, 4, 5 };\n  std::vector&lt;int&gt; b = { 6, 7, 8, 9, 10 };\n\n  b.insert(b.end(), a.begin() + 2, a.begin() + 5);\n</code></pre>\n\n<p><strong>Solution 2:</strong></p>\n\n<p>Use the <code>std::copy</code> algorithm with a <a href=\"http://en.cppreference.com/w/cpp/iterator/back_inserter\" rel=\"nofollow noreferrer\"><code>std::back_insert_iterator</code></a>:</p>\n\n<pre><code>  std::vector&lt;int&gt; a = { 1, 2, 3, 4, 5 };\n  std::vector&lt;int&gt; b = { 6, 7, 8, 9, 10 };\n\n  std::copy(a.begin() + 2, a.begin() + 5, std::back_inserter(b));\n</code></pre>\n\n<p><strong>To test it:</strong></p>\n\n<pre><code>  for (auto&amp; x : b)\n    std::cout &lt;&lt; x &lt;&lt; ' ';\n</code></pre>\n\n<p>Will output: <code>6 7 8 9 10 3 4 5</code></p>\n"}], "owner": {"reputation": 693, "user_id": 3625742, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/20b041960902fcf55136d1ea41541fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Neha", "link": "https://stackoverflow.com/users/3625742/neha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1511990257, "creation_date": 1511987195, "question_id": 47561222, "link": "https://stackoverflow.com/questions/47561222/can-we-perform-insert-on-a-vector-using-back-value-index-on-it", "title": "Can we perform insert on a vector using back()-value index on it?", "body": "<p>Recently i came across a scenario where i had to insert values in a vector using a slice of other vector and put it at the back. I tried using vector.back()-value but it did not allow me to do so. Here is the code snippet</p>\n\n<pre><code>tempVector.insert(inputs.back()-temp,inputs[loopVar]);\n</code></pre>\n\n<p>And the error shown was</p>\n\n<blockquote>\n  <p>no instance of overloaded function \"std::vector&lt;_Ty, _Alloc>::insert [with _Ty=int, _Alloc=std::allocator]\" matches the argument list    </p>\n</blockquote>\n\n<p>I tried look for some example like this online could not find much on this. Can someone please tell me what am i doing wrong in here? I am new to STL and c++14</p>\n"}, {"tags": ["c++", "cuda", "sieve-of-eratosthenes"], "answers": [{"tags": [], "owner": {"reputation": 1122, "user_id": 3399825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f315e9ace1dacdd6a2bc24f598fa14c?s=128&d=identicon&r=PG&f=1", "display_name": "Addy", "link": "https://stackoverflow.com/users/3399825/addy"}, "is_accepted": false, "score": 1, "last_activity_date": 1512003658, "creation_date": 1512003658, "answer_id": 47564318, "question_id": 47561133, "link": "https://stackoverflow.com/questions/47561133/cuda-sieve-of-eratosthenes-error-when-larger-than-1000000/47564318#47564318", "title": "Cuda Sieve of Eratosthenes Error when larger than 1000000", "body": "<p>I see a couple of issues with your code. First of all, the line <code>double sieve_size = 4000000 / sizeof(long);</code> doesn't make sense, since that leads to allocating insufficient amount of memory on the GPU.</p>\n\n<p>Take an example of having 8 numbers, each 8 bytes long (which is the standard size of long afaik), so putting them into an array takes up 64 bytes of memory. that would mean that your <code>double sieve_size = 8/sizeof(long)</code> would hold value <code>1</code>. And then you are allocating <code>sieve_size*sizeof(long)</code> bytes of memory on GPU, which in this case means you're allocating 8 bytes, while you need 64 as in the initial array. So drop the division.</p>\n\n<p>Another thing is that I don't think it is a good idea to use <code>double</code> to represent some amount of memory even though it might not generate a compilation error, it might possibly lead to issues with precision rounding, when you allocate just a couple bytes too little and thus invoke a segmentation fault (if you need to represent discrete entities such as a size of a block of memory or length of an array, integer types are the logical choice). So I would change the line to:</p>\n\n<pre><code>long sieve_size = 4000000;\n</code></pre>\n\n<p>Now another thing is that there are limits on the size of a block that you can execute. It varies by architecture and you can find the specifics of your using command <code>cudaGetDeviceProperties</code>. As far as I know on most modern cards the limitations are <code>1024 max threads per block</code>. So you can execute either block of size <code>32x32x1</code> or <code>1024x1x1</code> etc. If you need to process more data you will have to use a bigger grid than just <code>1x1x1</code>.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 61, "user_id": 4122308, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25dc529169d9dc6449cea445a16be0e8?s=128&d=identicon&r=PG&f=1", "display_name": "brad119", "link": "https://stackoverflow.com/users/4122308/brad119"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1512003658, "creation_date": 1511986833, "question_id": 47561133, "link": "https://stackoverflow.com/questions/47561133/cuda-sieve-of-eratosthenes-error-when-larger-than-1000000", "title": "Cuda Sieve of Eratosthenes Error when larger than 1000000", "body": "<p>I am new to cuda and am trying to use it to carry out the Sieve of Eratosthenes. The code works for primes below 1000000. Above it i get an unknown kernal launch error. Now I understand this is because I am trying to launch a grid with too many blocks. However if I set the blocks to 1000 I do not get all the prime numbers. I think there may be an issue with the indexing in the kernal but not sure. </p>\n\n<pre><code>#include \"cuda_runtime.h\"\n#include \"device_launch_parameters.h\"\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std;\n\n__global__ static void Sieve(long * sieve, long sieve_size)\n{\nint idx = blockIdx.x * blockDim.x + threadIdx.x;\n\nif (idx &gt; 1) {\n    for (int i = idx+idx; i &lt; sieve_size; i += idx) {\n\n        sieve[i] = 1;\n    }\n}\n}\n\nint main()\n{\n\nlong  *device_sieve;\nlong *host_sieve = new long[4000000];\nofstream data(\"data.csv\", ofstream::out);\n\ndouble sieve_size = 4000000 / sizeof(long);\n\ncudaSetDevice(0);\ncudaDeviceSynchronize();\ncudaThreadSynchronize();\ncudaMalloc((void**)&amp;device_sieve, sizeof(long) * sieve_size);\n\ncudaError_t error1 = cudaGetLastError();\ncout &lt;&lt; \"1\" &lt;&lt; cudaGetErrorString(error1) &lt;&lt; endl;\n\nint block = sqrt(sieve_size);\n\nSieve &lt;&lt; &lt;1, block &gt;&gt; &gt;(device_sieve, sieve_size);\ncudaThreadSynchronize();\ncudaMemcpy(host_sieve, device_sieve, sizeof(long) * sieve_size, cudaMemcpyDeviceToHost);\n\ncudaError_t error = cudaGetLastError();\ncout &lt;&lt; \"2\" &lt;&lt; cudaGetErrorString(error) &lt;&lt; endl;\ncudaFree(device_sieve);\n\nfor (int i = 2; i &lt; sieve_size; ++i)\n    if (host_sieve[i] == 0)\n        data &lt;&lt; i &lt;&lt; endl;\n\ngetchar();\ncout &lt;&lt; \"DONE\" &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "fstream"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1511986122, "post_id": 47560824, "comment_id": 82079637, "body": "What happens if there are 4 consecutive days?  Are days 1,2, and 3, separate from 2,3, and 4?"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1511987682, "post_id": 47560899, "comment_id": 82080341, "body": "Don&#39;t &quot;subtract 1&quot; on a &#39;bad&#39; day.  Reset back to 0 instead. Otherwise, lets say <code>n</code> is 100, then a sequence like <code>101 101 98 102 101</code> would get incorrectly treated as 3 consecutive days."}, {"owner": {"reputation": 485, "user_id": 6333462, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KI35e.jpg?s=128&g=1", "display_name": "theBrainyGeek", "link": "https://stackoverflow.com/users/6333462/thebrainygeek"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1511988194, "post_id": 47560899, "comment_id": 82080616, "body": "Yeah! Missed that."}], "tags": [], "owner": {"reputation": 485, "user_id": 6333462, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KI35e.jpg?s=128&g=1", "display_name": "theBrainyGeek", "link": "https://stackoverflow.com/users/6333462/thebrainygeek"}, "is_accepted": false, "score": 0, "last_activity_date": 1511985953, "creation_date": 1511985953, "answer_id": 47560899, "question_id": 47560824, "link": "https://stackoverflow.com/questions/47560824/how-to-print-3-different-values-per-line-in-c/47560899#47560899", "title": "How to print 3 different values per line in C++", "body": "<p>Create an int variable to act as a flag. Every time you get a 'good' day, add 1 to that flag and subtract 1 if not. So, in the end, just add an if statement that checks if that flag variable is three, and then print the value.</p>\n\n<p>Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": false, "score": 1, "last_activity_date": 1511985962, "creation_date": 1511985962, "answer_id": 47560901, "question_id": 47560824, "link": "https://stackoverflow.com/questions/47560824/how-to-print-3-different-values-per-line-in-c/47560901#47560901", "title": "How to print 3 different values per line in C++", "body": "<p>I suggest you break this down into smaller parts. For example, you could do this in two broad steps:</p>\n\n<ol>\n<li>Read in all the data</li>\n<li>Find all sets of 3 days which are above the given temperature</li>\n</ol>\n\n<p>By doing each of these separately, you can focus on one piece at a time, rather than trying to do both.</p>\n\n<p>Note, that you only need <code>if(maximum[x] &gt; n)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 5632570, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5f57257fb874532f284505d41706fb38?s=128&d=identicon&r=PG&f=1", "display_name": "EJay", "link": "https://stackoverflow.com/users/5632570/ejay"}, "edited": false, "score": 0, "creation_date": 1511995874, "post_id": 47561099, "comment_id": 82084213, "body": "This worked, thank you. I&#39;m only used to breaks in java but I understand it now."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1511988026, "last_edit_date": 1511988026, "creation_date": 1511986704, "answer_id": 47561099, "question_id": 47560824, "link": "https://stackoverflow.com/questions/47560824/how-to-print-3-different-values-per-line-in-c/47561099#47561099", "title": "How to print 3 different values per line in C++", "body": "<p>Try something more like this:</p>\n\n<pre><code>cout &lt;&lt; \"Please enter a number to search: \";\ncin &gt;&gt; n;\n\nout &lt;&lt; endl;\nout &lt;&lt; \"Occasions during the year when there were three consecutive days where the temperature went above \" &lt;&lt; n &lt;&lt; \" are:\" &lt;&lt; endl;\n\nint firstday, numdays = 0;\n\nfor (int x = 0; x &lt; 366; ++x)\n{\n    in &gt;&gt; minimum[x];\n    in &gt;&gt; maximum[x];\n\n    if (maximum[x] &gt; n)\n    {\n        ++numdays;\n\n        if (numdays == 1)\n            firstday = x;\n        else if (numdays == 3)\n        {\n            out &lt;&lt; \"Days: \" &lt;&lt; firstday &lt;&lt; \", \" &lt;&lt; firstday+1 &lt;&lt; \", \" &lt;&lt; firstday+2 &lt;&lt; endl;\n            numdays = 0;\n        }\n    }\n    else\n        numdays = 0;\n}\n</code></pre>\n\n<p>Alternatively:</p>\n\n<pre><code>cout &lt;&lt; \"Please enter a number to search: \";\ncin &gt;&gt; n;\n\nout &lt;&lt; endl;\nout &lt;&lt; \"Occasions during the year when there were three consecutive days where the temperature went above \" &lt;&lt; n &lt;&lt; \" are:\" &lt;&lt; endl;\n\nfor (int x = 0; x &lt; 366; ++x)\n{\n    in &gt;&gt; minimum[x];\n    in &gt;&gt; maximum[x];\n}\n\nfor (int x = 0; x &lt; 366-2; ++x)\n{\n    if (maximum[x] &gt; n)\n    {\n        int firstday = x;\n        int numdays = 1;\n\n        for (int y = 1; y &lt; 3; ++y)\n        {\n            if (maximum[x+y] &gt; n)\n                ++numdays;\n            else\n                break;\n        } \n\n        if (numdays == 3)\n            out &lt;&lt; \"Days: \" &lt;&lt; firstday &lt;&lt; \", \" &lt;&lt; firstday+1 &lt;&lt; \", \" &lt;&lt; firstday+2 &lt;&lt; endl;\n\n        x += (numdays-1);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5632570, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5f57257fb874532f284505d41706fb38?s=128&d=identicon&r=PG&f=1", "display_name": "EJay", "link": "https://stackoverflow.com/users/5632570/ejay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 47561099, "answer_count": 3, "score": -5, "last_activity_date": 1511988026, "creation_date": 1511985677, "question_id": 47560824, "link": "https://stackoverflow.com/questions/47560824/how-to-print-3-different-values-per-line-in-c", "title": "How to print 3 different values per line in C++", "body": "<p>My program reads 366 lines of data from a file, each line has 2 values; minimum temperature and maximum temperature. I want to output when there were three consecutive days where the temperature went above a certain number n, that the user enters.\nThis is what I have:</p>\n\n<pre><code>cout&lt;&lt;\"Please enter a number to search: \";\ncin&gt;&gt;n;\nout&lt;&lt;endl;\nout&lt;&lt;\"Occasions during the year when there were three consecutive days \nwhere the temperature went above \"&lt;&lt;n&lt;&lt;\" are:\"&lt;&lt;endl;\nout&lt;&lt;\"Days: \";\nfor(int x=0; x&lt;366; x=x+1){\n            in&gt;&gt;minimum[x];\n            in&gt;&gt;maximum[x];\n\n\n             if(minimum[x]&gt;n){\n              day1=x;\n            }\n\n             if(maximum[x]&gt;n){\n                day1=x;\n            }\n            out&lt;&lt;\"Days: \"&lt;&lt;day1&lt;&lt;\", \"&lt;&lt;day2&lt;&lt;\", \"&lt;&lt;day3&lt;&lt;endl;\n            }\n\n}\n</code></pre>\n\n<p>I'm having trouble understanding how to update day 2 and day 3 to a different element of the array that satisfies the condition. When the condition is met, I want to store the days and print them like:</p>\n\n<p>Occasions during the year (if any) when there were three consecutive days where the temperature went above 34 are: </p>\n\n<p>Days:103, 104, 105</p>\n\n<p>Days:107, 108, 109</p>\n\n<p>Days:288, 289, 290</p>\n\n<p>the days are the locations in the array.</p>\n"}, {"tags": ["c++", "c++11", "inheritance", "types"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511984545, "post_id": 47560519, "comment_id": 82078819, "body": "Doesn&#39;t the answers to the question you link answer this question?"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1511984916, "post_id": 47560519, "comment_id": 82078995, "body": "Anything wrong with making <code>type_</code> protected, and having each derived class set it appropriately in the constructor??"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 1, "creation_date": 1511985422, "post_id": 47560519, "comment_id": 82079235, "body": "This looks a bit of a XY-problem. Why do you really need to have <i>distinct types</i> for specific instances of a <code>Fruit</code>? Specialized interfaces implemented in the common class? The latter would smell as a design flaw."}, {"owner": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1511985683, "post_id": 47560519, "comment_id": 82079373, "body": "@user0042 - it may well be XY-problem - I&#39;ve expanded my question to hint about use case"}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1511989417, "post_id": 47560519, "comment_id": 82081249, "body": "@Ilya Kobelevskiy I think you need to expand on this bit <code>then at some point if it is an Apple, further process it, restricting it type to an Apple from that point onwards.</code> How would you like that to look like in code? Because I think that might be your &quot;X&quot; and this enum is your &quot;Y&quot;."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1511989800, "post_id": 47560519, "comment_id": 82081456, "body": "@ChrisDrew What about <i>empty</i> tag interfaces? A <code>struct</code> with nothing else than a <code>virtual</code> destructor, that can be queried with a dynamic cast."}, {"owner": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "reply_to_user": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1511991622, "post_id": 47560519, "comment_id": 82082315, "body": "@ChrisDrew I updated question, once necessary, Fruit will be converted to Apple and will remain Apple from that point onward."}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1511984709, "post_id": 47560572, "comment_id": 82078893, "body": "This answer is pretty good, but <code>Apple</code> and <code>Banana</code> do not share a common base type, as was asked in the question."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511984755, "post_id": 47560572, "comment_id": 82078911, "body": "@Fran&#231;oisAndrieux Easy to solve using a CRTP and inheritance."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1511984771, "post_id": 47560572, "comment_id": 82078920, "body": "@user0042 You don&#39;t need CRTP, you just need <code>Fruit</code> to inherit from a common base class."}, {"owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "edited": false, "score": 1, "creation_date": 1511984798, "post_id": 47560572, "comment_id": 82078934, "body": "The question is what the real intent of the author is. In some sense, the general template might be the common base, and deviations from it may be implemented in terms of specialization."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511984824, "post_id": 47560572, "comment_id": 82078947, "body": "@Fran&#231;oisAndrieux I know, but that&#39;s the most natural case for me."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511984830, "post_id": 47560572, "comment_id": 82078950, "body": "@Jodocus Good point, I hadn&#39;t seen thought of that interpretation of the question."}, {"owner": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511985793, "post_id": 47560572, "comment_id": 82079436, "body": "@Fran&#231;oisAndrieux - I&#39;ve added some clarification to a question."}], "tags": [], "owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "is_accepted": false, "score": 3, "last_activity_date": 1511984933, "last_edit_date": 1511984933, "creation_date": 1511984602, "answer_id": 47560572, "question_id": 47560519, "link": "https://stackoverflow.com/questions/47560519/create-distinct-type-for-class-with-specific-member-variable-value/47560572#47560572", "title": "Create distinct type for class with specific member variable value", "body": "<blockquote>\n  <p>What would be the most efficient way to do that?</p>\n</blockquote>\n\n<p>You can make use of non-type template parameters:</p>\n\n<pre><code>enum class FruitType {\n   AppleType = 0,\n   OrangeType = 1,\n   BananaType = 2,\n};\n\ntemplate &lt;FruitType F&gt;\nclass Fruit {\n public:\n   FruitType fruit_type() const { return F; }\n};\n\nusing Apple = Fruit&lt;FruitType::AppleType&gt;;\nusing Banana = Fruit&lt;FruitType::BananaType&gt;;\n</code></pre>\n\n<p>Whether or not you need an actual base class is up to you. It may be also sufficient to provide template specializations for certain <code>FruitType</code>s.</p>\n"}, {"comments": [{"owner": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "edited": false, "score": 0, "creation_date": 1511985975, "post_id": 47560795, "comment_id": 82079546, "body": "+1. Thanks, that would work, but the problem is that Fruit is already a base class in my application, so that approach would lead to multiple inheritance which I would like to avoid."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "edited": false, "score": 3, "creation_date": 1511986089, "post_id": 47560795, "comment_id": 82079615, "body": "@IlyaKobelevskiy I don&#39;t see how this approach could lead to multiple inheritance. Can you share an example? In any case, if it&#39;s true for this solution, it seems like it would be true for any conceivable solution. Though maybe I didn&#39;t understand what you meant. To be clear, A inheriting from B and B inheriting from C is not multiple inheritance and is not usually a problem."}, {"owner": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511988587, "post_id": 47560795, "comment_id": 82080816, "body": "@Fran&#231;oisAndrieux The problem is that in my application there is also DriedFruit, which is derived from Fruit on concept orthogonal from FruitType. I need to process objects of type Fruit and DriedFruit, where DriedFruit is Fruit plus something else. With this solution Fruit becomes abstract, so DriedFruit becomes abstract as well - we now need to define DriedApple, DriedOrange and DriedBanana to be able to instantiate concrete instances of DriedFruit."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "edited": false, "score": 0, "creation_date": 1511988829, "post_id": 47560795, "comment_id": 82080947, "body": "@IlyaKobelevskiy Since it seems <code>DriedFruit</code> doesn&#39;t care about the specific type of fruit, you can introduce an intermediate type between <code>Fruit</code> and these specific fruit types. For example <code>Apple</code> and <code>Banada</code> can inherit from a new type <code>SpecificFruit</code> which inherits <code>Fruit</code>. Then <code>Fruit</code> and <code>DriedFruit</code> can remain unchanged. Alternatively you can implement <code>fruit_type</code> for <code>DriedFruit</code> such that it returns a distinct enum value for that type, just like all the other fruit types do."}, {"owner": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511989048, "post_id": 47560795, "comment_id": 82081055, "body": "@Fran&#231;oisAndrieux unfortunately it is exact same problem with DriedFruit as with Fruit - it sometimes cares about which fruit type it is and sometimes doesn&#39;t, just as Fruit. This solution would be perfect solution (and it is for the question as it is originally posted), but the fact that there is already something inheriting from Fruit complicates things."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "edited": false, "score": 0, "creation_date": 1511989291, "post_id": 47560795, "comment_id": 82081182, "body": "@IlyaKobelevskiy You should edit the question to express this, and provide a code snippet to illustrate it."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "edited": false, "score": 1, "creation_date": 1511989609, "post_id": 47560795, "comment_id": 82081350, "body": "@IlyaKobelevskiy: I&#39;m no expect in virtual inheritance, but it would handle this situation. If <code>DriedFruit</code> virtually inherits from <code>Fruit</code>, and <code>DriedApple</code> virtually inherits from both <code>Fruit</code> and <code>DriedFruit</code>, then <code>DriedApple</code> overriding an abstract method of <code>Fruit</code> would apply to both <code>Fruit</code> and <code>DriedFruit</code>. <a href=\"https://ideone.com/FFRzw2\" rel=\"nofollow noreferrer\">Live Demo</a>"}], "tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": false, "score": 2, "last_activity_date": 1511985590, "creation_date": 1511985590, "answer_id": 47560795, "question_id": 47560519, "link": "https://stackoverflow.com/questions/47560519/create-distinct-type-for-class-with-specific-member-variable-value/47560795#47560795", "title": "Create distinct type for class with specific member variable value", "body": "<p>Is this what you would like to do?</p>\n\n<pre><code>enum class FruitType \n{\n    AppleType = 0,\n    OrangeType = 1,\n    BananaType = 2,\n};\n\nclass Fruit \n{\npublic:\n\n    virtual FruitType fruit_type() const = 0;\n};\n\nclass Apple: public Fruit \n{\npublic:\n\n    FruitType fruit_type() const override { return FruitType::AppleType; }\n};\n\nclass Orange : public Fruit \n{\npublic:\n\n    FruitType fruit_type() const override { return FruitType::OrangeType; }\n};\n\nclass Banana : public Fruit \n{\npublic:\n\n    FruitType fruit_type() const override { return FruitType::BananaType; }\n};\n\nint main()\n{\n    Fruit *somefruit = new Apple;\n\n    std::cout &lt;&lt; \"Is Apple? \" &lt;&lt; std::boolalpha &lt;&lt; (somefruit-&gt;fruit_type() == FruitType::AppleType) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Is Orange? \" &lt;&lt; std::boolalpha &lt;&lt; (somefruit-&gt;fruit_type() == FruitType::OrangeType) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Is Banana? \" &lt;&lt; std::boolalpha &lt;&lt; (somefruit-&gt;fruit_type() == FruitType::BananaType) &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>Is Apple? true\nIs Orange? false\nIs Banana? false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "is_accepted": false, "score": 0, "last_activity_date": 1511996130, "last_edit_date": 1511996130, "creation_date": 1511995330, "answer_id": 47563069, "question_id": 47560519, "link": "https://stackoverflow.com/questions/47560519/create-distinct-type-for-class-with-specific-member-variable-value/47563069#47563069", "title": "Create distinct type for class with specific member variable value", "body": "<p>Your question is quite abstract regarding the requirements.</p>\n\n<p>Though your edited clarifications direct a way</p>\n\n<blockquote>\n  <p>The main use case is as follows - in my applications, there are certain methods that only expect Apple as an input, or only expect Orange as an input, and many methods that do not care which fruit it is.</p>\n</blockquote>\n\n<p>I'm thinking of a completely different system based on interfaces and <em>tag interfaces</em><br>\n(see the full <a href=\"http://coliru.stacked-crooked.com/a/465666dac5b34048\" rel=\"nofollow noreferrer\"><strong>Live Demo</strong></a>).</p>\n\n<p>Define a common interface for all fruits first:</p>\n\n<pre><code>// A basic interface common for all fruits\nstruct IFruit {\n  virtual ~IFruit() {}\n  virtual std::string category() const = 0;\n  virtual std::string common_name() const = 0;\n  virtual std::string botanical_name() const = 0;\n};\n\n// An overload for the output operator is just nifty\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const IFruit&amp; fruit) {\n    os &lt;&lt; \"Category       : \" &lt;&lt; fruit.category() &lt;&lt; std::endl;\n    os &lt;&lt; \"Common Name    : \" &lt;&lt; fruit.common_name() &lt;&lt; std::endl;\n    os &lt;&lt; \"Botanical Name : \" &lt;&lt; fruit.botanical_name() &lt;&lt; std::endl;\n    return os;\n}\n</code></pre>\n\n<p>Define <em>tag interfaces</em> to distinguish your particular types (Apples, Oranges):</p>\n\n<pre><code>// Tag interfaces to distinguish (not necessarily empty)\nstruct IApple : public IFruit {\n  virtual ~IApple() {}\n};\n\nstruct IOrange : public IFruit {\n  virtual ~IOrange () {}\n};\n</code></pre>\n\n<p>These should require to implement the <code>IFruit</code> interface implicitly.</p>\n\n<hr>\n\n<p>Now you can provide an abstract base class, which implements the <code>IFruit</code> interface.<br>\nThis base class is <em>abstract</em> in the sense the constructor function is hidden from the <code>public</code> scope, and needs to be called by an inheriting class constructor:</p>\n\n<pre><code>// Abstract base class implementation\ntemplate&lt;class TagInterface&gt;\nclass FruitBase : public TagInterface {\nprotected:\n      std::string category_;\n      std::string common_name_;\n      std::string botanical_name_;\n\n      FruitBase ( const std::string&amp; category\n                , const std::string&amp; common_name\n                , const std::string botanical_name) \n          : category_(category), common_name_(common_name)\n          , botanical_name_(botanical_name) \n      {}\n\npublic:\n      virtual ~FruitBase () {}\n      virtual std::string category() const { return category_; }\n      virtual std::string common_name() const { return common_name_; }\n      virtual std::string botanical_name() const { return botanical_name_; }\n};\n</code></pre>\n\n<hr>\n\n<p>Add additional <em>tag interfaces</em> as needed:</p>\n\n<pre><code> struct IDriedApple : public IApple {\n     virtual ~IDriedApple() {}\n     virtual int rest_humidity() const = 0;\n };\n</code></pre>\n\n<hr>\n\n<p>Now you can create your concrete implementations with quite narrow class defintions:</p>\n\n<pre><code>// Concrete apples\nstruct Boskop : public FruitBase&lt;IApple&gt; {\npublic:\n     Boskop() : FruitBase(\"Apples\",\"Boskop\",\"Malus domestica 'Belle de Boskoop'\") {}\n};\n\nstruct Braeburn : public FruitBase&lt;IApple&gt; {\npublic:\n     Braeburn() : FruitBase(\"Apples\",\"Braeburn\",\"Malus domestica\") {}\n};\n\n// Concrete oranges\nstruct Valencia : public FruitBase&lt;IOrange&gt; {\npublic:\n     Valencia() : FruitBase(\"Oranges\",\"Valencia\",\"Citrus \u00d7 sinensis\") {}\n};\n\nstruct Navel : public FruitBase&lt;IOrange&gt; {\npublic:\n     Navel() : FruitBase(\"Oranges\",\"Navel\",\"Citrus \u00d7 sinensis\") {}\n};\n</code></pre>\n\n<hr>\n\n<p>Here's what I assume is your function declarations specialized on taking <em>Apples</em> or <em>Oranges</em> only:</p>\n\n<pre><code>void aFunctionThatTakesOnlyApples(IApple&amp; anApple) {\n    std::cout &lt;&lt; \"This is an apple:\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; anApple;\n}\n\nvoid aFunctionThatTakesOnlyOranges(IOrange&amp; anOrange) {\n    std::cout &lt;&lt; \"This is an orange:\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; anOrange &lt;&lt; std::endl;\n}\n</code></pre>\n\n<hr>\n\n<p>This is a simple template function to query a known instance of <code>IFruit</code> for implementing a specific <em>tag interface</em>:\n    template \n    TagInterface* queryTagInterface(IFruit* fruit) {\n        return dynamic_cast(fruit);\n    }</p>\n\n<hr>\n\n<p>And this is how you use all of that in action:</p>\n\n<pre><code>int main() {\n    std::vector&lt;std::unique_ptr&lt;IFruit&gt;&gt; allFruits;\n    allFruits.push_back(std::make_unique&lt;Boskop&gt;());\n    allFruits.push_back(std::make_unique&lt;Braeburn&gt;());\n    allFruits.push_back(std::make_unique&lt;Valencia&gt;()); \n    allFruits.push_back(std::make_unique&lt;Navel&gt;());\n    for(auto&amp; fruit : allFruits) {\n        if(IApple* anApple = queryTagInterface&lt;IApple&gt;(fruit.get())) {\n            aFunctionThatTakesOnlyApples(*anApple);\n        }\n        if(IOrange* anOrange = queryTagInterface&lt;IOrange&gt;(fruit.get())) {\n            aFunctionThatTakesOnlyOranges(*anOrange);\n        }\n        std::cout &lt;&lt; \"-----------------------------------------------\" &lt;&lt; std::endl;\n    }    \n}\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>It feels unsafe/obscure to pass Fruit to method that only expects Apple, at the same time there are many methods that do not care which type it is so having 3 distinct types is not a good option either.</p>\n</blockquote>\n\n<p>I should note that I also still don't understand what makes <em>Apples</em> and <em>Oranges</em> that different <em>Fruits</em> that they really deserve their own types. But well, that might be appropriate for less abstract metaphors of polymorphic class design and useful for concrete class hierarchy designs.</p>\n"}], "owner": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1511996130, "creation_date": 1511984401, "last_edit_date": 1511990773, "question_id": 47560519, "link": "https://stackoverflow.com/questions/47560519/create-distinct-type-for-class-with-specific-member-variable-value", "title": "Create distinct type for class with specific member variable value", "body": "<p>Given a class that have some enum that defines a type of the class, like in following example:</p>\n\n<pre><code>class Fruit {\n public:\n\n   enum class FruitType {\n      AppleType = 0,\n      OrangeType = 1,\n      BananaType = 2,\n   };\n   Fruit(FruitType type) : type_(type) {}\n   FruitType fruit_type() const { return type_; }\n\n private:\n   FruitType type_;\n};\n</code></pre>\n\n<p>and a class derived from it that shares the same enum:</p>\n\n<pre><code>class DriedFruit : public Fruit {\n public:\n  // Some Dried specific methods.\n};\n</code></pre>\n\n<p>Would it be possible to somehow define a distinct types for Fruit and DriedFruit with each of the specific enum values:</p>\n\n<pre><code>class Apple   // Fruit with FruitType = AppleType\nclass Orange  // Fruit with FruitType = OrangeType\nclass Banana  // Fruit with FruitType = BananaType\nclass DriedApple   // DriedFruit with FruitType = AppleType\nclass DriedOrange  // DriedFruit with FruitType = OrangeType\nclass DriedBanana  // DriedFruit with FruitType = BananaType\n</code></pre>\n\n<p>so that 3 classes Apple, Orange and Banana are distinct types, and 3 classes DriedApple, DriedOrange, DriedBanana are distinct types.</p>\n\n<p>My question is somewhat similar to <a href=\"https://stackoverflow.com/questions/14232293/how-to-define-different-types-for-the-same-class-in-c\">How to define different types for the same class in C++</a>, except that I want to explicitly store information about class type as enum member variable in the class, and to have a common base class for all distinct types.</p>\n\n<p>What would be the most efficient way to do that?</p>\n\n<p>EDIT:\nThe main use case is as follows - in my applications, there are certain methods that only expect Apple as an input, or only expect Orange as an input, and many methods that do not care which fruit it is.</p>\n\n<p>It feels unsafe/obscure to pass Fruit to method that only expects Apple, at the same time there are many methods that do not care which type it is so having 3 distinct types is not a good option either.</p>\n\n<p>The main workflow is as follows:\nbuild a Fruit from some input parameters, then\npass it around and process it as a Fruit, then at some point\nif it is an Apple, convert from Fruit to concrete Apple type, and further process it, restricting it type to an Apple from that point onward.</p>\n"}, {"tags": ["c++", "openframeworks"], "answers": [{"tags": [], "owner": {"reputation": 2132, "user_id": 5224286, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b3b9910cbb2254c651fca2c71edd84af?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Lee", "link": "https://stackoverflow.com/users/5224286/zack-lee"}, "is_accepted": false, "score": 1, "last_activity_date": 1512025053, "last_edit_date": 1512025053, "creation_date": 1512024186, "answer_id": 47567370, "question_id": 47560438, "link": "https://stackoverflow.com/questions/47560438/ofsetcolor-does-not-change-color-when-drawing-to-an-offbo-using-openframeworks/47567370#47567370", "title": "ofSetColor does not change color when drawing to an ofFbo (using openFrameworks)", "body": "<p>I think it might be a bug.</p>\n\n<p>Maybe you can post this on <a href=\"https://github.com/openframeworks/openFrameworks/issues\" rel=\"nofollow noreferrer\">https://github.com/openframeworks/openFrameworks/issues</a></p>\n\n<p>However, calling <code>ofSetColor(255, 255, 255, 255);</code> before <code>fbo.draw(0, 0);</code> seems to fix the problem.</p>\n\n<p>I think calling ofSetColor affects the color of the FBO in a weird way. \nFor example if you call <code>ofSetColor(150, 0, 0, 255);</code> before <code>fbo.draw(0, 0);</code> the FBO draws a darker red square. </p>\n\n<p>The more you reduce the r value of the color, it will get darker. That's why calling <code>ofSetColor(0, 255, 0, 255);</code> made the square completely black.</p>\n\n<p>Maybe someone can explain better why this happens. But calling <code>ofSetColor(255, 255, 255, 255);</code> before <code>fbo.draw(0, 0);</code> seems to fix the problem anyway.</p>\n"}, {"tags": [], "owner": {"reputation": 904, "user_id": 1518329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f6ac7bc0f5c26b87269d442d5339206?s=128&d=identicon&r=PG", "display_name": "bakercp", "link": "https://stackoverflow.com/users/1518329/bakercp"}, "is_accepted": true, "score": 1, "last_activity_date": 1512101688, "last_edit_date": 1512101688, "creation_date": 1512049402, "answer_id": 47574936, "question_id": 47560438, "link": "https://stackoverflow.com/questions/47560438/ofsetcolor-does-not-change-color-when-drawing-to-an-offbo-using-openframeworks/47574936#47574936", "title": "ofSetColor does not change color when drawing to an ofFbo (using openFrameworks)", "body": "<p>You must call <code>ofSetColor(255, 255, 255, 255);</code> or <code>ofSetColor(255);</code> or <code>ofSetColor(ofColor::white);</code> (all the same) before drawing your fbo.</p>\n\n<p>It is currently drawing with the previous <code>ofSetColor(...);</code>.</p>\n\n<p>The same goes for drawing any texture in openFrameworks. For example, if you call</p>\n\n<pre><code>ofSetColor(255, 255, 0);\nmyTexture.draw(0, 0);\n</code></pre>\n\n<p>your texture will be drawn with a yellow tint. </p>\n"}], "owner": {"reputation": 1357, "user_id": 132444, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1f2a7b1b49ba57c11f478189bad814e7?s=128&d=identicon&r=PG", "display_name": "Alex Miller", "link": "https://stackoverflow.com/users/132444/alex-miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 586, "favorite_count": 0, "accepted_answer_id": 47574936, "answer_count": 2, "score": 0, "last_activity_date": 1512101688, "creation_date": 1511984091, "last_edit_date": 1511990927, "question_id": 47560438, "link": "https://stackoverflow.com/questions/47560438/ofsetcolor-does-not-change-color-when-drawing-to-an-offbo-using-openframeworks", "title": "ofSetColor does not change color when drawing to an ofFbo (using openFrameworks)", "body": "<p>First I'll give an example of code that does what I want it to do. Then I'll give a second example of a small change that causes a problem.</p>\n\n<h1>Working Example</h1>\n\n<p><code>ofApp.h</code>:</p>\n\n<pre><code>#pragma once\n\n#include \"ofMain.h\"\n\nclass ofApp : public ofBaseApp {\n  public:\n    void setup();\n    void draw();\n\n    ofFbo fbo;\n};\n</code></pre>\n\n<p><code>ofApp.cc</code>:</p>\n\n<pre><code>#include \"ofApp.h\"\n\nvoid ofApp::setup() {\n  fbo.allocate(200, 100, GL_RGBA);\n}\n\nvoid ofApp::draw() {\n  // Draw a red square to the FBO\n  fbo.begin();\n  ofClear(255,255,255, 0);\n  ofSetColor(255, 0, 0, 255);\n  ofDrawRectangle(100, 0, 100, 100);\n  fbo.end();\n\n  fbo.draw(0, 0);\n}\n</code></pre>\n\n<p>This results in the following red square being drawn to the screen:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Q6Tsv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q6Tsv.png\" alt=\"working example of red square\"></a></p>\n\n<h1>Broken Example</h1>\n\n<p>Now I add two lines to the top of the <code>draw</code> method, and I don't get what I expect. Here's the full code of <code>ofApp.cc</code>:</p>\n\n<pre><code>#include \"ofApp.h\"\n\nvoid ofApp::setup() {\n  fbo.allocate(200, 100, GL_RGBA);\n}\n\nvoid ofApp::draw() {\n  // Draw a blue square directly to screen\n  ofSetColor(0, 0, 255, 255);\n  ofDrawRectangle(0, 0, 100, 100);\n\n  // Draw a red square to the FBO\n  fbo.begin();\n  ofClear(255,255,255, 0);\n  ofSetColor(255, 0, 0, 255);\n  ofDrawRectangle(100, 0, 100, 100);\n  fbo.end();\n\n  fbo.draw(0, 0);\n}\n</code></pre>\n\n<p>I would expect to get both a blue square (drawn directly to the window) and a red square (drawn to the FBO). But the red square turns black:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VfE1o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VfE1o.png\" alt=\"broken example with blue and black square\"></a></p>\n\n<p>It seems that calling <code>ofSetColor</code> before drawing to the FBO causes everything drawn to the FBO to be black. What's going on here?</p>\n"}, {"tags": ["c++", "c++11", "static", "shared-ptr"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1511985972, "post_id": 47560360, "comment_id": 82079542, "body": "If by &quot;underlying object&quot; you mean a <code>Runtime</code> instance that <code>theRuntime__</code> points to, then it&#39;s allocated on the heap by <code>std::make_shared&lt;Runtime&gt;()</code> call."}, {"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 0, "creation_date": 1511986100, "post_id": 47560360, "comment_id": 82079622, "body": "Memory for object pointed by <i>shared_ptr</i> is taken from heap, but memory for <code>theRuntime__</code> object is allocated onto BSS segment - this is static object."}], "answers": [{"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 0, "last_activity_date": 1511986684, "creation_date": 1511986684, "answer_id": 47561093, "question_id": 47560360, "link": "https://stackoverflow.com/questions/47560360/where-does-the-memory-allocation-happens-for-an-underlying-object-of-a-static-sh/47561093#47561093", "title": "Where does the memory allocation happens for an underlying object of a static shared_ptr?", "body": "<p>The allocation managed by <code>theRuntime__</code> (FYI: you're not allowed to use identifiers with double-underscores; they are reserved for the implementation) is created by <code>std::make_shared</code>. This will dynamically allocate memory, regardless of where it is called.</p>\n\n<p>The storage for the <code>theRuntime__</code> object <em>itself</em> is static storage.</p>\n"}], "owner": {"reputation": 35, "user_id": 1448191, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/211f05056302fc103cae5dd2387b98ea?s=128&d=identicon&r=PG", "display_name": "sandy", "link": "https://stackoverflow.com/users/1448191/sandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 47561093, "answer_count": 1, "score": 0, "last_activity_date": 1511986684, "creation_date": 1511983787, "last_edit_date": 1511986199, "question_id": 47560360, "link": "https://stackoverflow.com/questions/47560360/where-does-the-memory-allocation-happens-for-an-underlying-object-of-a-static-sh", "title": "Where does the memory allocation happens for an underlying object of a static shared_ptr?", "body": "<p>I have come across a class called <code>Runtime</code> in GENIVI/capicxx-core-runtime. Part of the code specified below. </p>\n\n<pre><code>class Runtime {\n public:\n     COMMONAPI_EXPORT static std::shared_ptr&lt;Runtime&gt; get();\n     COMMONAPI_EXPORT Runtime();\n     COMMONAPI_EXPORT virtual ~Runtime()\n\n private:\n     static std::shared_ptr&lt;Runtime&gt; theRuntime__;\n};\n\nstd::shared_ptr&lt;Runtime&gt; Runtime::theRuntime__ = std::make_shared&lt;Runtime&gt;();\n\nstd::shared_ptr&lt;Runtime&gt; Runtime::get() {\n   return theRuntime__;\n}\n</code></pre>\n\n<p>My doubt is with the <code>theRuntime__</code> variable. Since <code>shared_ptr</code> does heap allocation, will the underlying object of <code>theRuntime__</code> variable be allocated on heap in this scenario or will it be allocated in BSS/DATA segment?</p>\n"}, {"tags": ["c++", "uart", "termios"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 1, "creation_date": 1511984517, "post_id": 47560359, "comment_id": 82078805, "body": "How i that question related to <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a>? Do you have any specific c++ code you already tried? Generally that kind of stuff is beyond the realm of standard c++ facilities."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1511985346, "post_id": 47560359, "comment_id": 82079206, "body": "ECU? Extreme Computation Unit?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1511985379, "post_id": 47560359, "comment_id": 82079222, "body": "Pardon me, but I don&#39;t recall the meaning of ECU.  What is meaning of ECU?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1511985608, "post_id": 47560359, "comment_id": 82079335, "body": "Some sort of control unit and it might be speaking modbus RTU or a related protocol. Typically the answer is no. UARTs are dumb as a post. They buffer and send and receive and buffer. That&#39;s all they do. Timing required for anything other than making sure the bits wind up in the right byte is usually handled by a higher level controller."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1511986041, "post_id": 47560359, "comment_id": 82079589, "body": "Typical solution if you don&#39;t have controller hardware: Place the sending inside another thread. When a complete message is sent, the thread blocks for at least one message break time, then looks to see if more messages have been queued. <a href=\"https://en.wikipedia.org/wiki/Event_loop\" rel=\"nofollow noreferrer\">I&#39;d use a message loop for this.</a>, but that might be the embedded C programmer in me talking."}, {"owner": {"reputation": 69, "user_id": 3234663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63fe7fa6e047976b6b0b480d3b772664?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/3234663/vivek"}, "edited": false, "score": 0, "creation_date": 1511987240, "post_id": 47560359, "comment_id": 82080129, "body": "Edited to give more info."}], "owner": {"reputation": 69, "user_id": 3234663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63fe7fa6e047976b6b0b480d3b772664?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/3234663/vivek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511987209, "creation_date": 1511983783, "last_edit_date": 1511987209, "question_id": 47560359, "link": "https://stackoverflow.com/questions/47560359/c-uart-idle-time-between-two-requests", "title": "C++ UART idle time between two requests", "body": "<p>I am using a linux environment and using termios.h function to communicate on UART with other ECU.(electronic control unit, consider it as a computer on other end of UART).</p>\n\n<p>The other ECU have put a condition that between the stop bit of last request(it can contain multiple frames in one request)and start bit of the new request there should be time difference of 1ms.</p>\n\n<p>So basically i want a 1ms time between two write call but i dont want to put unnecessary sleep after every write call.</p>\n\n<p>Is there any setting in UART to do this? I have added c++ as was thunking some type of flag needs to bet set while configuring UART through c++ code.</p>\n\n<p>What i have tried is lock a mutex then do the write after write completes start a timer,when timer expires unlock that mutex. But what i learned is the behaviour would be undefined as when timer expires then it would the logic on a separate thread which has never acquired the mutex lock.</p>\n\n<p>I cant put sleep after write beacause as soon as write finishes i need to inform the above layers by returning the function.</p>\n"}, {"tags": ["c++", "arrays", "file", "loops", "matrix"], "comments": [{"owner": {"reputation": 2967, "user_id": 8616205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3o2ct.png?s=128&g=1", "display_name": "frslm", "link": "https://stackoverflow.com/users/8616205/frslm"}, "edited": false, "score": 1, "creation_date": 1511983405, "post_id": 47560229, "comment_id": 82078179, "body": "<code>int proto_matrix[2 * dimension];</code> isn&#39;t standard C++; you&#39;ll have to dynamically allocate enough memory for <code>2 * dimension</code> <code>int</code>s."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1511983418, "post_id": 47560229, "comment_id": 82078187, "body": "Always make sure the file <code>is_open()</code> before reading."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1511983435, "post_id": 47560229, "comment_id": 82078199, "body": "give <code>while(matrix_file &gt;&gt; proto_matrix[i];)     {         i++;     }</code> a shot. You weren&#39;t incrementing <code>i</code> as you were reading so all of the values read, if any, went into the same slot in the array, and you want to test the read for success before counting it."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1511984448, "post_id": 47560229, "comment_id": 82078772, "body": "Use <code>std::vector&lt;int&gt; proto_matrix(2 * dimensions);</code> instead of the non-standard C++ syntax you&#39;re using."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1511985425, "post_id": 47560229, "comment_id": 82079236, "body": "BTW, the <code>main</code> function returns <code>int</code>.  Always."}], "answers": [{"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 0, "last_activity_date": 1511985470, "creation_date": 1511985470, "answer_id": 47560770, "question_id": 47560229, "link": "https://stackoverflow.com/questions/47560229/store-matrix-with-integer-from-a-text-file-into-an-array-in-c/47560770#47560770", "title": "Store Matrix with integer from a text file into an array in c++", "body": "<p>This:</p>\n\n<pre><code>int proto_matrix[2 * dimension];\n</code></pre>\n\n<p>is a Variable Length Array (VLA), which is not Standard C++, but is supported by some compiler extensions. If compile with <code>g++ -pedantic main.cpp</code>, you will surely get an error.</p>\n\n<p>That means that you need to dynamically allocate your memory, if you <em>had</em> to use an array.</p>\n\n<p>You really don't though, C++ offers <a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"nofollow noreferrer\"><code>std::vector</code></a>, which can achieve what you want relatively easily. I say relatively, because you have two matrices in one file, which makes parsing the file a bit tricky. Usually we put the one matrix in one file, and the other matrix to another file.</p>\n\n<ul>\n<li>A 2D array can be represented as a 2D vector.</li>\n<li>You want two matrices, thus two 2D vectors.</li>\n</ul>\n\n<p>For that reason, I will use an array of size 2 (fixed size!), where every element is going to be a 2D vector.</p>\n\n<p>Moreover, I will keep track of which matrix I am reading from the file right now (the first or the second), and how many rows I have read currently, in order to populate the correct cell of the matrix.</p>\n\n<p><code>index</code> is going to be equal to 0 or 1, to index the array.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;sstream&gt;\n\nusing namespace std;\n\nint main()\n{\n    int i = 0, j, k = 0, n, dimension;\n    cout &lt;&lt; \"Enter the dimension of square matrices (3 by 3 would be 3) \\n\";\n    cin &gt;&gt; n;\n    dimension = n * n;\n    vector&lt; vector&lt;int&gt; &gt; v[2];\n    v[0].resize(n);\n    v[1].resize(n);\n    // make array of two matrices combined, this will be split into two matrices\n    ifstream matrix_file(\"matrices.txt\");\n    string line;\n    int rows_read = 0, cols_read = 0, index = 0;\n    while (std::getline(matrix_file, line))\n    {\n        std::istringstream iss(line);\n        int a, b, c;\n        if (!(iss &gt;&gt; a &gt;&gt; b &gt;&gt; c)) { break; } // error\n        // process tuple (a, b, c)\n        if(index == 0 &amp;&amp; rows_read &gt;= n)\n        {\n            rows_read = 0;\n            index = 1;\n        }\n        //cout&lt;&lt;\"rows = \" &lt;&lt; rows_read &lt;&lt; \" \" &lt;&lt; index&lt;&lt;endl;\n\n        v[index][rows_read].push_back(a);\n        v[index][rows_read].push_back(b);\n        v[index][rows_read++].push_back(c);\n    }\n    matrix_file.close();\n\n    for(int i = 0; i &lt; 2; ++i)\n    {\n        cout &lt;&lt; \"Printing matrix \" &lt;&lt; i &lt;&lt; endl;\n        for(auto&amp; matrix: v[i])\n        {\n            for(auto&amp; number: matrix)\n                cout &lt;&lt; number &lt;&lt; \" \";\n            cout &lt;&lt; endl;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Printing matrix 0\n1 2 3 \n4 5 6 \n7 8 9 \nPrinting matrix 1\n1 2 3 \n4 5 6 \n7 8 9 \n</code></pre>\n\n<hr>\n\n<p>PS: Unrelated to your problem, but <a href=\"https://stackoverflow.com/questions/204476/what-should-main-return-in-c-and-c\">What should main() return in C and C++?</a> An <code>int</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 0, "last_activity_date": 1511986187, "creation_date": 1511986187, "answer_id": 47560964, "question_id": 47560229, "link": "https://stackoverflow.com/questions/47560229/store-matrix-with-integer-from-a-text-file-into-an-array-in-c/47560964#47560964", "title": "Store Matrix with integer from a text file into an array in c++", "body": "<p>Based on my <a href=\"https://stackoverflow.com/a/47560770/2411320\">answer</a>, I will post here a cleaner example, which achieves what your code tries to achieve: Read all the numbers in a 1D data structure (which will be split in two matrices somehow later).</p>\n\n<p>So for that case, the code boils down to just this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;sstream&gt;\n\nusing namespace std;\n\nint main()\n{\n    int i = 0, j, k = 0, n, dimension;\n    cout &lt;&lt; \"Enter the dimension of square matrices (3 by 3 would be 3) \\n\";\n    cin &gt;&gt; n;\n    dimension = n * n;\n    // make array of two matrices combined, this will be split into two matrices\n    vector&lt;int&gt; proto_matrix;\n    ifstream matrix_file(\"matrices.txt\");\n    string line;\n    while (std::getline(matrix_file, line))\n    {\n        std::istringstream iss(line);\n        int a, b, c;\n        if (!(iss &gt;&gt; a &gt;&gt; b &gt;&gt; c)) { break; } // error\n        proto_matrix.push_back(a);\n        proto_matrix.push_back(b);\n        proto_matrix.push_back(c);\n    }\n    matrix_file.close();\n\n    for(auto&amp; number: proto_matrix)\n        cout &lt;&lt; number &lt;&lt; \"\\n\";\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 705, "user_id": 563940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1f032f602bdd0ffd7ba6f3306156fe57?s=128&d=identicon&r=PG", "display_name": "Pedro", "link": "https://stackoverflow.com/users/563940/pedro"}, "is_accepted": false, "score": 0, "last_activity_date": 1512054911, "last_edit_date": 1512054911, "creation_date": 1511988995, "answer_id": 47561665, "question_id": 47560229, "link": "https://stackoverflow.com/questions/47560229/store-matrix-with-integer-from-a-text-file-into-an-array-in-c/47561665#47561665", "title": "Store Matrix with integer from a text file into an array in c++", "body": "<p>You don't increment <code>i</code>, thus always writing to the first element. It should be:</p>\n\n<pre><code>matrix_file &gt;&gt; proto_matrix[i++];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36542, "user_id": 104427, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e852d4a44a1d795a9f207bcd30920bc?s=128&d=identicon&r=PG&f=1", "display_name": "Escualo", "link": "https://stackoverflow.com/users/104427/escualo"}, "is_accepted": false, "score": 0, "last_activity_date": 1511993931, "creation_date": 1511993931, "answer_id": 47562785, "question_id": 47560229, "link": "https://stackoverflow.com/questions/47560229/store-matrix-with-integer-from-a-text-file-into-an-array-in-c/47562785#47562785", "title": "Store Matrix with integer from a text file into an array in c++", "body": "<p>You could just read all the values into a <em>flat</em> container (such as <code>std::vector</code>) and do the re-arrangement at a later point. The following code may give you an idea:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nint main() {\n  std::vector&lt;int&gt; values;\n\n  std::ifstream fp(\"matrices.txt\");\n\n  for (int value; fp &gt;&gt; value; ) {\n    values.emplace_back(value);\n  }\n\n  std::cout &lt;&lt; \"I read \" &lt;&lt; values.size() &lt;&lt; \" values:\\n\";\n\n  for (auto &amp;&amp; value : values) std::cout &lt;&lt; value &lt;&lt; \" \";\n\n  std::cout &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>$ clang++ matrixread.cpp -std=c++17\n$ ./a.out \nI read 18 values:\n1 2 3 4 5 6 7 8 9 1 2 3 4 5 6 7 8 9 \n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8754794, "user_type": "registered", "profile_image": "https://graph.facebook.com/1947438552196768/picture?type=large", "display_name": "Daniel Sunwoo Kim", "link": "https://stackoverflow.com/users/8754794/daniel-sunwoo-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 474, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1512054911, "creation_date": 1511983263, "last_edit_date": 1511985542, "question_id": 47560229, "link": "https://stackoverflow.com/questions/47560229/store-matrix-with-integer-from-a-text-file-into-an-array-in-c", "title": "Store Matrix with integer from a text file into an array in c++", "body": "<p>I have a file named matrices.txt that has two matrices that are 3 by 3.\nThey are:</p>\n\n<pre><code>1 2 3\n4 5 6\n7 8 9\n1 2 3 \n4 5 6 \n7 8 9\n</code></pre>\n\n<p>I'm trying the read from this file and store it into an array proto_matrix to later split that into two matrices.</p>\n\n<p>The problem I'm having is that I can't store the numbers in the array.</p>\n\n<p>My code is</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nvoid main()\n{\n    int i = 0, j, k = 0, n, dimension;\n    cout &lt;&lt; \"Enter the dimension of square matrices (3 by 3 would be 3) \\n\";\n    cin &gt;&gt; n;\n    dimension = n * n;\n    int proto_matrix[2 * dimension];\n\n    // make array of two matrices combined, this will be split into two matrices\n    ifstream matrix_file(\"matrices.txt\");\n\n    while(matrix_file)\n    {\n        matrix_file &gt;&gt; proto_matrix[i];\n    }\n    matrix_file.close();\n}\n</code></pre>\n\n<p>I tried debugging the code and it seems like the no integer is stored in the array, just random numbers.</p>\n"}, {"tags": ["c++", "c", "gcc", "linker", "elf"], "comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1511984277, "post_id": 47560152, "comment_id": 82078687, "body": "Is it possible that whatever is placing the C object files into the library archive is stripping symbols?"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1511985387, "post_id": 47560152, "comment_id": 82079225, "body": "@MichaelBurr no because to check the <code>.obj</code>s, I unzip the library archive but I think I know what is stripping the symbols; see my update shortly."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1511985740, "post_id": 47560152, "comment_id": 82079411, "body": "@MichaelBurr updated"}, {"owner": {"reputation": 3984, "user_id": 164344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c978ca7e1c3da231710b8c114009faa5?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/164344/tim"}, "edited": false, "score": 0, "creation_date": 1511989812, "post_id": 47560152, "comment_id": 82081465, "body": "I realize it may be difficult for an issue like this, but posting a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would help us to help you."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 3984, "user_id": 164344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c978ca7e1c3da231710b8c114009faa5?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/164344/tim"}, "edited": false, "score": 0, "creation_date": 1511989902, "post_id": 47560152, "comment_id": 82081510, "body": "@Tim I think I&#39;m doing the gruntwork. I just need help with knowledge of <code>gcc</code> like my update: <code>what&#39;s the input section I need to add to .dflash_code that contains the mixed source-assembly?</code>"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 3984, "user_id": 164344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c978ca7e1c3da231710b8c114009faa5?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/164344/tim"}, "edited": false, "score": 0, "creation_date": 1511989964, "post_id": 47560152, "comment_id": 82081545, "body": "@Tim it&#39;s obvious that the info is being stripped from the <code>.obj</code> when the <code>.elf</code> is created and the linking process is doing it which is controlled by linker file and <code>ld</code> command line options."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1512074295, "post_id": 47560152, "comment_id": 82121949, "body": "@MichaelBurr if you&#39;re interested, figured it out."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 3984, "user_id": 164344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c978ca7e1c3da231710b8c114009faa5?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/164344/tim"}, "edited": false, "score": 0, "creation_date": 1512074302, "post_id": 47560152, "comment_id": 82121952, "body": "@Tim if you&#39;re interested, figured it out."}], "answers": [{"comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 2, "creation_date": 1512157530, "post_id": 47582133, "comment_id": 82159394, "body": "Glad you found a solution - linker scripts are largely voodoo to me."}], "tags": [], "owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "is_accepted": true, "score": 2, "last_activity_date": 1512074037, "creation_date": 1512074037, "answer_id": 47582133, "question_id": 47560152, "link": "https://stackoverflow.com/questions/47560152/gcc-linker-obj-dump-has-mixed-source-assembly-but-not-when-linked-in-elf/47582133#47582133", "title": "gcc linker - .obj dump has mixed source-assembly but not when linked in .elf", "body": "<p>Finally figured out the reason but I still don't understand <strong>why</strong> this happens:</p>\n\n<p>In the linker file, if I place all sections with <code>.debug</code> in their name like <code>.debug_macro</code> in a different section:  </p>\n\n<pre><code>  .dflash_code :\n  {\n    *archive.dlb:*(.text.*)\n    *archive.dlb:*(.debug*)     \n  } &gt;dflash\n</code></pre>\n\n<p>Then in the ELF <code>.map</code> file I will get those sections placed in the <code>.elf</code> (no duh) including <code>.debug_line</code> which, in the <code>.obj</code>s, contains the entire source of the corresponding <code>.c</code>:</p>\n\n<p>app.elf.map:</p>\n\n<pre><code> .debug_line    0x1001841d      0x87e ..\\archive.dlb(main.doj)\n .debug_line    0x10026152      0x8fe ..\\archive.dlb(pyexec.doj)\n</code></pre>\n\n<p>However, if I run <code>objdump -Sxg app.elf</code>, I do NOT get the source intermixed with assembly:</p>\n\n<pre><code>Disassembly of section .dflash_code:\n10000000 &lt;micropython_main&gt;:\n10000000:   b580        push    {r7, lr}\n10000002:   b084        sub sp, #16\n10000004:   af00        add r7, sp, #0\n10000006:   6078        str r0, [r7, #4]\n10000008:   6039        str r1, [r7, #0]\n1000000a:   4b09        ldr r3, [pc, #36]   ; (10000030 &lt;micropython_main+0x30&gt;)\n1000000c:   f107 020c   add.w   r2, r7, #12\n10000010:   601a        str r2, [r3, #0]\n10000012:   f001 ff6d   bl  10001ef0 &lt;mp_init&gt;\n10000016:   4807        ldr r0, [pc, #28]   ; (10000034 &lt;micropython_main+0x34&gt;)\n10000018:   f006 f88e   bl  10006138 &lt;pyexec_frozen_module&gt;\n1000001c:   f001 ff94   bl  10001f48 &lt;mp_deinit&gt;\n10000020:   f04f 0300   mov.w   r3, #0\n10000024:   4618        mov r0, r3\n10000026:   f107 0710   add.w   r7, r7, #16\n1000002a:   46bd        mov sp, r7\n1000002c:   bd80        pop {r7, pc}\n1000002e:   bf00        nop\n10000030:   1fff34fc    .word   0x1fff34fc\n10000034:   100313bc    .word   0x100313bc\n</code></pre>\n\n<hr>\n\n<p>However, if I change the linker file such that the <code>.debug*</code> sections from <code>archive.dlb</code> are not placed in <code>.dflash_code</code> (and I reiterate this is the <strong>only</strong> change I make):</p>\n\n<pre><code>.dflash_code :\n  {\n    *archive.dlb:*(.text.*)\n\n  } &gt;dflash\n</code></pre>\n\n<p>Then in the ELF <code>.map</code> file, I still see those same <code>.debug_line</code> sections however they are placed in a different location because of some other statements later in the my linker file</p>\n\n<p>app.elf.map:</p>\n\n<pre><code> .debug_line    0x00082a32      0x87e ..\\archive.dlb(main.doj)\n .debug_line    0x000832b0      0x8fe ..\\archive.dlb(pyexec.doj)\n</code></pre>\n\n<p>and most importantly, running <code>objdump -Sxg app.elf</code> gives the intermixed source-assembly</p>\n\n<pre><code>int micropython_main(char * uP_heap, unsigned int heap_size)\n{\n10000000:   b580        push    {r7, lr}\n10000002:   b084        sub sp, #16\n10000004:   af00        add r7, sp, #0\n10000006:   6078        str r0, [r7, #4]\n10000008:   6039        str r1, [r7, #0]\n    int stack_dummy;\n    stack_top = (char*)&amp;stack_dummy;\n1000000a:   4b09        ldr r3, [pc, #36]   ; (10000030 &lt;micropython_main+0x30&gt;)\n1000000c:   f107 020c   add.w   r2, r7, #12\n10000010:   601a        str r2, [r3, #0]\n    #if MICROPY_ENABLE_GC\n        gc_init(uP_heap, uP_heap + heap_size);\n    #endif\n    mp_init();\n10000012:   f001 ff6d   bl  10001ef0 &lt;mp_init&gt;\n\n    pyexec_frozen_module(\"main.py\");\n10000016:   4807        ldr r0, [pc, #28]   ; (10000034 &lt;micropython_main+0x34&gt;)\n10000018:   f006 f88e   bl  10006138 &lt;pyexec_frozen_module&gt;\n\n    mp_deinit();\n1000001c:   f001 ff94   bl  10001f48 &lt;mp_deinit&gt;\n\n    return 0;\n10000020:   f04f 0300   mov.w   r3, #0\n}\n10000024:   4618        mov r0, r3\n10000026:   f107 0710   add.w   r7, r7, #16\n1000002a:   46bd        mov sp, r7\n1000002c:   bd80        pop {r7, pc}\n1000002e:   bf00        nop\n10000030:   1fff34fc    .word   0x1fff34fc\n10000034:   1001eaf4    .word   0x1001eaf4\n</code></pre>\n\n<p>So why does it matter where I put the sections <code>.debug*</code>? I don't think it technically does. The portion of my linker file that affects the placement of the DWARF symbols looks like this:</p>\n\n<pre><code>  .debug_info     0 : { *(.debug_info .gnu.linkonce.wi.*) }\n  .debug_abbrev   0 : { *(.debug_abbrev) }\n  .debug_line     0 : { *(.debug_line) }\n  .debug_frame    0 : { *(.debug_frame) }\n  .debug_str      0 : { *(.debug_str) }\n  .debug_loc      0 : { *(.debug_loc) }\n  .debug_macinfo  0 : { *(.debug_macinfo) }\n</code></pre>\n\n<p>I'm guessing the ordering somehow matters.</p>\n"}], "owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 47582133, "answer_count": 1, "score": 2, "last_activity_date": 1512074037, "creation_date": 1511982981, "last_edit_date": 1511990601, "question_id": 47560152, "link": "https://stackoverflow.com/questions/47560152/gcc-linker-obj-dump-has-mixed-source-assembly-but-not-when-linked-in-elf", "title": "gcc linker - .obj dump has mixed source-assembly but not when linked in .elf", "body": "<p><strong>BACKGROUND</strong></p>\n\n<p>I have a project using C-code and C++ code. The linking is not an issue: the C-functions are correctly called by the C++ code.</p>\n\n<p>All my <code>.cpp</code> files are compiled with <code>-g3</code> but only <code>main.c</code> and <code>pyexec.c</code> are <code>-g3</code>; rest have no debug info.</p>\n\n<p>The linking step consists of linking a few <code>.cpp</code> archives, <code>.cpp</code> objects and archive containing <code>.c</code> objects.</p>\n\n<p><strong>PROBLEM</strong></p>\n\n<p>When I do an <code>objdump</code> on my <code>.elf</code></p>\n\n<p><code>objdump APP.elf -dSsxsgetr  &gt; elf.dump</code></p>\n\n<p>I see the source of the <code>.cpp</code> files interspersed with the assembly but not for the two <code>.c</code> files compiled with <code>-g3</code>.</p>\n\n<p><strong>DOUBLE-CHECK</strong></p>\n\n<p>I am absolutely sure I compiled <code>main.c</code> and <code>pyexec.c</code> with <code>-g3</code>. When I did an <a href=\"https://sourceware.org/binutils/docs/binutils/objdump.html\" rel=\"nofollow noreferrer\"><code>objdump -dSsxsgetr</code></a><code>main.obj</code>, I see the source interspersed with the assembly in addition to debug symbols such as <code>.debug_line</code> that contains the entire source of my <code>.c</code> file.</p>\n\n<p>My link command is:</p>\n\n<p><code>arm-none-eabi-ld.exe HW_Interface.obj HW_Module.obj HeapMngr.obj C_archive.a Cpp_archive.a -nostartfiles --no-warn-mismatch --gc-sections --stats --cref -Map=APP.map -T \"APP.ld\" -o \"APP.elf\"</code></p>\n\n<p><strong>QUESTION</strong></p>\n\n<p>Why aren't the debug line numbers from the <code>.c</code> objects compiled with <code>-g3</code> getting into the <code>.elf</code>?</p>\n\n<p><strong>UPDATE 1</strong></p>\n\n<p>I think what's stripping the symbols is my linker-script statement combined with the <code>--gc-sections</code> option to the linker:</p>\n\n<pre><code>.dflash_code :\n  {\n    *ATI_micropython.dlb:*(.text.*) \n    *ATI_micropython.dlb:*(.debug*)\n\n  } &gt;dflash\n</code></pre>\n\n<p>This statement is \"correct\" but what is happening (I think) is that since I'm not explicitly specifying whatever input section contains the line-by-line info <strong>and</strong> because <code>--gc-sections</code> says <em>discard any \"unused\" sections</em>, that info is being stripped.</p>\n\n<p>So the real question is: what's the input section I need to add to <code>.dflash_code</code> that contains the mixed source-assembly? The <code>.debug_line</code> section is already included and that contains the entire source for a given file.</p>\n\n<p>In <code>.map</code>, there is a section called <code>Discarded input sections</code>. In this section, I see that only for my two <code>.c</code> debug files, there's a bunch of <code>.debug_macro</code> statements . . . which doesn't make sense because  <code>*ATI_micropython.dlb:*(.debug*)</code> should've caught all such sections (unless I'm misunderstanding their purpose).</p>\n\n<pre><code>.debug_macro   0x00000000       0x3a ..\\archive.dlb(main.doj)\n .debug_macro   0x00000000       0x35 ..\\archive.dlb(main.doj)\n .debug_macro   0x00000000       0x3a ..\\archive.dlb(main.doj)\n .debug_macro   0x00000000       0x52 ..\\archive.dlb(main.doj)\n .debug_macro   0x00000000       0x19 ..\\archive.dlb(main.doj)\n .debug_macro   0x00000000      0x189 ..\\archive.dlb(main.doj)\n .debug_macro   0x00000000       0x10 ..\\archive.dlb(main.doj)\n .debug_macro   0x00000000       0x22 ..\\archive.dlb(main.doj)\n .debug_macro   0x00000000       0x91 ..\\archive.dlb(main.doj)\n</code></pre>\n"}, {"tags": ["c++", "serialization"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4789772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63d9551fa8e3ccd3f0eb92ef8e2a9c0d?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Jackson", "link": "https://stackoverflow.com/users/4789772/tyler-jackson"}, "edited": false, "score": 0, "creation_date": 1511983820, "post_id": 47560079, "comment_id": 82078428, "body": "I don&#39;t believe this will work, since &quot;inData&quot; is a typename.  The problem is I can&#39;t write inData.Serialize() in the first place, as that causes a compiler error."}, {"owner": {"reputation": 179, "user_id": 8817900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uBuzb.jpg?s=128&g=1", "display_name": "Lucky", "link": "https://stackoverflow.com/users/8817900/lucky"}, "reply_to_user": {"reputation": 37, "user_id": 4789772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63d9551fa8e3ccd3f0eb92ef8e2a9c0d?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Jackson", "link": "https://stackoverflow.com/users/4789772/tyler-jackson"}, "edited": false, "score": 0, "creation_date": 1511984299, "post_id": 47560079, "comment_id": 82078692, "body": "Sorry, my mistake, I saw &quot;inData&quot; as an instance. Then you probably have to use SFINAE. Check out this question: <a href=\"https://stackoverflow.com/questions/257288/is-it-possible-to-write-a-template-to-check-for-a-functions-existence\" title=\"is it possible to write a template to check for a functions existence\">stackoverflow.com/questions/257288/&hellip;</a>"}], "tags": [], "owner": {"reputation": 179, "user_id": 8817900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uBuzb.jpg?s=128&g=1", "display_name": "Lucky", "link": "https://stackoverflow.com/users/8817900/lucky"}, "is_accepted": false, "score": 0, "last_activity_date": 1511983171, "last_edit_date": 1511983171, "creation_date": 1511982669, "answer_id": 47560079, "question_id": 47559950, "link": "https://stackoverflow.com/questions/47559950/sometimes-call-function-from-within-a-variadic-template-function/47560079#47560079", "title": "Sometimes call function from within a variadic template function", "body": "<p>You can use a try-catch statement to check if this function exists.</p>\n\n<pre><code>try{\n    inData.Serialize();\n}catch(&lt;You can specify the exception here, or just write \"...\" to catch any exception&gt;...){\n    &lt;What you want to do if the function does not exists&gt;\n}\n</code></pre>\n\n<p>If you want more detailed information about try-catch and exception handling:\n<a href=\"https://www.tutorialspoint.com/cplusplus/cpp_exceptions_handling.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/cplusplus/cpp_exceptions_handling.htm</a></p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 4789772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63d9551fa8e3ccd3f0eb92ef8e2a9c0d?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Jackson", "link": "https://stackoverflow.com/users/4789772/tyler-jackson"}, "edited": false, "score": 0, "creation_date": 1511983945, "post_id": 47560166, "comment_id": 82078497, "body": "Do you mean write a specialized LoadData/GetData for every struct I have defined in my program?  A possible solution I suppose, but I would really like to keep it generic."}, {"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "reply_to_user": {"reputation": 37, "user_id": 4789772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63d9551fa8e3ccd3f0eb92ef8e2a9c0d?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Jackson", "link": "https://stackoverflow.com/users/4789772/tyler-jackson"}, "edited": false, "score": 0, "creation_date": 1511993997, "post_id": 47560166, "comment_id": 82083445, "body": "No, I meant use std::enable_if and your member detection to choose a specialization that would use the member if it is present but have the not-present pair continue to use memcpy. It might turn out that both the present and not-present forms of LoadData and GetData would need an std::enable_if parameter (one where the condition is true the other where it is not). That way each LoadData/GetData has only the code appropriate to that code path."}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1511983031, "creation_date": 1511983031, "answer_id": 47560166, "question_id": 47559950, "link": "https://stackoverflow.com/questions/47559950/sometimes-call-function-from-within-a-variadic-template-function/47560166#47560166", "title": "Sometimes call function from within a variadic template function", "body": "<p>I would suggest that you write a LoadData/GetData pair that are specialized using std::enable_if, checking for the presence of the needed member. The specialized forms use those members while the generic forms continue to use memcpy</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 4789772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63d9551fa8e3ccd3f0eb92ef8e2a9c0d?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Jackson", "link": "https://stackoverflow.com/users/4789772/tyler-jackson"}, "edited": false, "score": 0, "creation_date": 1511987576, "post_id": 47560542, "comment_id": 82080284, "body": "Very nice, it even simplifies the detection step.  Any chance this could be done with only C++14?  If not, I&#39;ll go ahead and mark this as the answer, since it&#39;s both elegant and straightforward."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 37, "user_id": 4789772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63d9551fa8e3ccd3f0eb92ef8e2a9c0d?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Jackson", "link": "https://stackoverflow.com/users/4789772/tyler-jackson"}, "edited": false, "score": 0, "creation_date": 1511987895, "post_id": 47560542, "comment_id": 82080466, "body": "<code>std::experimental::detected</code> can be implemented with C++11. (link give possible implementation, dependencies as <code>std::void_t</code> can also be done in C++11)."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1511984862, "last_edit_date": 1511984862, "creation_date": 1511984504, "answer_id": 47560542, "question_id": 47559950, "link": "https://stackoverflow.com/questions/47559950/sometimes-call-function-from-within-a-variadic-template-function/47560542#47560542", "title": "Sometimes call function from within a variadic template function", "body": "<p>With <a href=\"http://en.cppreference.com/w/cpp/experimental/is_detected\" rel=\"nofollow noreferrer\"><code>std::experimental::isdetected</code></a>, you can create the traits:</p>\n\n<pre><code>template&lt;class T&gt;\nusing serialize_t = decltype(std::declval&lt;T&gt;().Serialize());\n\ntemplate &lt;typename T&gt;\nusing has_serialize = std::experimental::is_detected&lt;serialize_t, T&gt;;\n</code></pre>\n\n<p>and then, using SFINAE:</p>\n\n<pre><code>template&lt;typename writeDataType&gt;\nstd::enable_if_t&lt;has_serialize&lt;writeDataType&gt;::value&gt;\nLoadData(writeDataType &amp;inData)\n{\n    inData.Serialize(m_rawMessageData);\n}\n\ntemplate&lt;typename writeDataType&gt;\nstd::enable_if_t&lt;!has_serialize&lt;writeDataType&gt;::value&gt;\nLoadData(writeDataType &amp;inData)\n{\n    int dataSize = sizeof(writeDataType);\n    int currentSize = m_rawMessageData.size();\n\n    m_rawMessageData.resize(dataSize + m_rawMessageData.size());\n    std::memcpy(&amp;m_rawMessageData.at(currentSize), &amp;(inData), dataSize);\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4789772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63d9551fa8e3ccd3f0eb92ef8e2a9c0d?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Jackson", "link": "https://stackoverflow.com/users/4789772/tyler-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 47560542, "answer_count": 3, "score": -1, "last_activity_date": 1511984862, "creation_date": 1511982170, "question_id": 47559950, "link": "https://stackoverflow.com/questions/47559950/sometimes-call-function-from-within-a-variadic-template-function", "title": "Sometimes call function from within a variadic template function", "body": "<p>I have a basic message class that I am using to serialize data and then send that data through a socket:</p>\n\n<pre><code>std::vector&lt;char&gt; m_rawMessageData;\nint m_currentReadPosition = 0;\n\ntemplate&lt;typename writeDataType&gt;\nvoid LoadData(writeDataType &amp;inData)\n{\n    int dataSize = sizeof(writeDataType);\n    int currentSize = m_rawMessageData.size();\n\n    m_rawMessageData.resize(dataSize + m_rawMessageData.size());\n    std::memcpy(&amp;m_rawMessageData.at(currentSize), &amp;(inData), dataSize);\n}\n\ntemplate&lt;typename ReadDataType&gt;\nint GetData(ReadDataType &amp;outData)\n{\n    std::stringstream dataReader;\n\n    int dataSize = sizeof(ReadDataType);\n\n    if (m_currentReadPosition + dataSize &gt; m_rawMessageData.size())\n        return 0;\n\n    std::memcpy(&amp;outData, &amp;m_rawMessageData.at(m_currentReadPosition),\n        dataSize);  \n\n    m_currentReadPosition += dataSize;\n\n    return dataSize;\n}   \n</code></pre>\n\n<p>I know there are some possible bugs/errors in this code if these are called incorrectly, but I'm the only developer right now, and I need to get something working.  Also, I'm assuming that only basic types will be passed, and that endiness is the same on both ends.</p>\n\n<p>I want this message class to be able to handle structs.  My thought was this: in each of my structs I will write a \"Serialize/Deserialize\" function. Then, in my LoadData and GetData calls, I will check if there is a \"Serialize/Deserialize\" function and then call it instead of doing the generic memcpy.</p>\n\n<p>I was able to check if there is a serialize function using something similar to the code in this question:\n<a href=\"https://stackoverflow.com/questions/87372/check-if-a-class-has-a-member-function-of-a-given-signature\">Check if a class has a member function of a given signature</a></p>\n\n<p>But I'm not sure how I am suppose to call the \"Serialize\" function.  I can't simply use \"inData.Serialize()\", as that fails to compile.  </p>\n\n<p>So in short, I want my LoadData Function to look something like this:</p>\n\n<pre><code>template&lt;typename writeDataType&gt;\nvoid LoadData(writeDataType &amp;inData)\n{\n    //Check if writeDataType has Serialize Function. \n    if (serializeDoesExist)\n    {\n         inData.Serialize(m_rawMessageData);\n    }\n    else\n    {\n        int dataSize = sizeof(writeDataType);\n        int currentSize = m_rawMessageData.size();\n\n        m_rawMessageData.resize(dataSize + m_rawMessageData.size());\n        std::memcpy(&amp;m_rawMessageData.at(currentSize), &amp;(inData), dataSize);\n    }\n}\n</code></pre>\n\n<p>Any help would be much appreciated.</p>\n\n<p>NOTE:  My boss does not like to add external libraries to project unless absolutely necessary.  That's why I haven't gone with Protobuf or something similar.  </p>\n"}, {"tags": ["c++", "execvp"], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1511987405, "post_id": 47560198, "comment_id": 82080207, "body": "Minor note: You&#39;re quoting the wrong part of the docs. The part about casting <code>NULL</code> to <code>char*</code> only applies to the <code>execl*</code> family (which are varargs, and therefore don&#39;t impose a specific type on the variable arguments, causing problems if <code>NULL</code> is just <code>0</code>, and thus is <code>int</code>-width, not pointer width, or if pointer types aren&#39;t constant width for whatever reason). It doesn&#39;t apply to the <code>execv*</code> family (where a typed array is involved, so <code>NULL</code> would be seamlessly implicitly coerced to <code>char*</code>). Idiomatically, you want: <code>char *args[] = {&quot;sudo&quot;, &quot;ls&quot;, &quot;-l&quot;, NULL};</code>, no need for the cast."}, {"owner": {"reputation": 695, "user_id": 6700091, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041870249200978/picture?type=large", "display_name": "Kamil B\u0119ben", "link": "https://stackoverflow.com/users/6700091/kamil-b%c4%99ben"}, "edited": false, "score": 0, "creation_date": 1511988396, "post_id": 47560198, "comment_id": 82080715, "body": "Thank for your reply, probably tomorrow i will study the documentation again (more carefully this time).  And answering your question, i don&#39;t need  to use sudo with ls, it was just an example."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1511988764, "post_id": 47560198, "comment_id": 82080916, "body": "It could be the case you don&#39;t want <code>sudo</code>: <a href=\"https://stackoverflow.com/a/46782615/841108\">stackoverflow.com/a/46782615/841108</a>"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 1, "last_activity_date": 1511989435, "last_edit_date": 1511989435, "creation_date": 1511983143, "answer_id": 47560198, "question_id": 47559919, "link": "https://stackoverflow.com/questions/47559919/cant-exec-other-programs-in-a-proper-way/47560198#47560198", "title": "Can&#39;t exec other programs in a proper way", "body": "<p>Read <em>carefully</em> the documentation of <a href=\"http://man7.org/linux/man-pages/man3/execvp.3.html\" rel=\"nofollow noreferrer\">execvp(3)</a>. It says about <code>execl</code> etc...:</p>\n\n<blockquote>\n  <p>The first argument, by convention, should point to\n      the filename associated with the file being executed.  The list of\n         arguments <strong>must be terminated by a null pointer</strong>, and, since these are\n         variadic functions, this pointer must be cast <code>(char *) NULL</code>.</p>\n</blockquote>\n\n<p>and regarding <code>execvp</code>:</p>\n\n<blockquote>\n  <p><strong>The array of pointers must be terminated by a null pointer.</strong></p>\n</blockquote>\n\n<p>So you should code:</p>\n\n<pre><code>char* args[] = {  \"sudo\", \"ls\", \"-l\",  NULL };\nexecvp(\"sudo\", args);\n</code></pre>\n\n<p>BTW, <code>execvp</code> don't return at all, <em>except</em> on failure. No need to keep its result after the call.</p>\n\n<p>But you need, when  <code>execvp</code> returns (and this only happens on failure) to show some error message. I suggest:</p>\n\n<pre><code>perror(\"execvp\");\nexit(EXIT_FAILURE);\n</code></pre>\n\n<p>and you could find valid arguments to call, in that precise case, <a href=\"http://man7.org/linux/man-pages/man2/_exit.2.html\" rel=\"nofollow noreferrer\">_exit(2)</a> instead of <a href=\"http://man7.org/linux/man-pages/man3/exit.3.html\" rel=\"nofollow noreferrer\">exit(3)</a>. I still prefer <code>exit</code> (because it would flush the stdio buffers and run <a href=\"http://man7.org/linux/man-pages/man3/atexit.3.html\" rel=\"nofollow noreferrer\">atexit(3)</a>-registered handlers).</p>\n\n<blockquote>\n  <p>Can someone please explain to me, why <code>execvp</code> failed </p>\n</blockquote>\n\n<p>Yes, <a href=\"http://man7.org/linux/man-pages/man3/errno.3.html\" rel=\"nofollow noreferrer\">errno(3)</a>. Which is used by <a href=\"http://man7.org/linux/man-pages/man3/perror.3.html\" rel=\"nofollow noreferrer\">perror(3)</a>.</p>\n\n<p>Don't forget to read <em>carefully</em> the documentation of every used function. For system calls (listed in <a href=\"http://man7.org/linux/man-pages/man2/syscalls.2.html\" rel=\"nofollow noreferrer\">syscalls(2)</a>) and standard C library functions (see <a href=\"http://man7.org/linux/man-pages/man3/intro.3.html\" rel=\"nofollow noreferrer\">intro(3)</a>), you generally should handle the failure case (often using <code>errno</code>, at least thru <code>perror</code> then <code>exit</code>)</p>\n\n<p>I don't understand why you need <code>sudo</code> with <code>ls</code>. There are few occasions where that could be useful, since most of the time your <a href=\"https://en.wikipedia.org/wiki/Working_directory\" rel=\"nofollow noreferrer\">working directory</a> is listable (then <code>sudo</code> is useless), and in that case you could even use <a href=\"http://man7.org/linux/man-pages/man3/opendir.3.html\" rel=\"nofollow noreferrer\">opendir(3)</a>, <a href=\"http://man7.org/linux/man-pages/man3/readdir.3.html\" rel=\"nofollow noreferrer\">readdir(3)</a> with <a href=\"http://man7.org/linux/man-pages/man2/stat.2.html\" rel=\"nofollow noreferrer\">stat(2)</a> (so no need to <code>fork</code> then <code>execvp</code> the <code>/bin/ls</code> program).</p>\n\n<p>Read also about <a href=\"https://en.wikipedia.org/wiki/Setuid\" rel=\"nofollow noreferrer\">setuid</a> techniques in <a href=\"http://man7.org/linux/man-pages/man2/execve.2.html\" rel=\"nofollow noreferrer\">execve(2)</a> and <a href=\"http://man7.org/linux/man-pages/man7/credentials.7.html\" rel=\"nofollow noreferrer\">credentials(7)</a> (and <a href=\"http://man7.org/linux/man-pages/man2/setreuid.2.html\" rel=\"nofollow noreferrer\">setreuid(2)</a>). See <a href=\"https://stackoverflow.com/a/46782615/841108\">this</a> (you could avoid <code>sudo</code> with your own setuid program).</p>\n\n<p>BTW you should compile <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html\" rel=\"nofollow noreferrer\">with</a> all warnings and debug info (<code>g++ -Wall -Wextra -g</code>  with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>) and <a href=\"https://sourceware.org/gdb/onlinedocs/gdb/\" rel=\"nofollow noreferrer\">use the debugger <code>gdb</code></a> (and perhaps <a href=\"http://man7.org/linux/man-pages/man1/strace.1.html\" rel=\"nofollow noreferrer\">strace(1)</a> and <a href=\"http://man7.org/linux/man-pages/man1/valgrind.1.html\" rel=\"nofollow noreferrer\">valgrind(1)</a>).</p>\n"}], "owner": {"reputation": 695, "user_id": 6700091, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041870249200978/picture?type=large", "display_name": "Kamil B\u0119ben", "link": "https://stackoverflow.com/users/6700091/kamil-b%c4%99ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 47560198, "answer_count": 1, "score": 2, "last_activity_date": 1511989435, "creation_date": 1511982025, "question_id": 47559919, "link": "https://stackoverflow.com/questions/47559919/cant-exec-other-programs-in-a-proper-way", "title": "Can&#39;t exec other programs in a proper way", "body": "<p>I am trying to execute another program from within my own, but i don't understand a few things. So i wrote this code:</p>\n\n<pre><code>void run() {\n  cout &lt;&lt; \"##Run\" &lt;&lt; endl;\n  pid_t process_id = fork();\n\n  if (process_id == 0) {\n    char* args[] = {  \"sudo\", \"ls\", \"-l\" };\n    auto i = execvp(\"sudo\", args);\n    cout &lt;&lt; \"#Result: \" &lt;&lt; i &lt;&lt; endl;\n    return;\n  } else if (process_id &lt; 0) {\n    throw std::runtime_error(\"fork() failed\");\n  } else if (process_id &gt; 0) {\n    wait(&amp;process_id);\n  }\n  return;\n}\n\nvoid run_decorator() {\n  cout &lt;&lt; \"###Run decorator: \" &lt;&lt; endl;\n  run();\n}\n\nint main() {\n  run();\n  run_decorator();\n  return 0;\n}\n</code></pre>\n\n<p>And the output is</p>\n\n<pre><code>##Run\ntotal 88\n-rwxr-xr-x 1 bezik bezik 77560 Nov 29 19:53 colors\n-rwxr-xr-x 1 bezik bezik    63 Nov 26 21:45 compile\ndrwxr-xr-x 2 bezik bezik  4096 Nov 26 20:46 headers\ndrwxr-xr-x 2 bezik bezik  4096 Nov 23 00:48 sources\n###Run decorator:\n##Run\n#Result: -1\n</code></pre>\n\n<p>Can someone please explain to me, why execvp failed when called from run_decorator() function?</p>\n"}, {"tags": ["c++", "boost", "cmake", "mingw", "mingw-w64"], "answers": [{"tags": [], "owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "is_accepted": false, "score": 1, "last_activity_date": 1512056640, "creation_date": 1512056640, "answer_id": 47577250, "question_id": 47559732, "link": "https://stackoverflow.com/questions/47559732/error-conflicting-types-for-getsystemtimeasfiletime-while-building-cmakeboos/47577250#47577250", "title": "error: conflicting types for &#39;GetSystemTimeAsFileTime&#39; while building cmake+boost project on mingw64", "body": "<p>Turns out one has to define <code>BOOST_USE_WINDOWS_H</code>.</p>\n\n<p>Fix for CMake project:</p>\n\n<pre><code>if(WIN32)\n    add_definitions(-DBOOST_USE_WINDOWS_H)\nendif()\n</code></pre>\n"}], "owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 475, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1512056709, "creation_date": 1511981410, "last_edit_date": 1512056709, "question_id": 47559732, "link": "https://stackoverflow.com/questions/47559732/error-conflicting-types-for-getsystemtimeasfiletime-while-building-cmakeboos", "title": "error: conflicting types for &#39;GetSystemTimeAsFileTime&#39; while building cmake+boost project on mingw64", "body": "<p>Trying to build a C++ project based on CMake and Boost with Mingw64.\nI installed cmake and boost msys2-mingw64 packages.\nGet this error about conflicting types (<code>LPFILETIME</code> vs <code>FILETIME</code>) for <code>GetSystemTimeAsFileTime</code>.</p>\n\n<pre><code>$ cmake --build .\n[  1%] Building CXX object CMakeFiles/...\nIn file included from ....cpp:1:\nIn file included from C:/msys64/mingw64/include\\boost/thread.hpp:13:\nIn file included from C:/msys64/mingw64/include\\boost/thread/thread.hpp:12:\nIn file included from C:/msys64/mingw64/include\\boost/thread/thread_only.hpp:15:\nIn file included from C:/msys64/mingw64/include\\boost/thread/win32/thread_data.hpp:10:\nIn file included from C:/msys64/mingw64/include\\boost/thread/thread_time.hpp:10:\nIn file included from C:/msys64/mingw64/include\\boost/date_time/microsec_time_clock.hpp:23:\nC:/msys64/mingw64/include\\boost/date_time/filetime_functions.hpp:57:46: error: conflicting types for 'GetSystemTimeAsFileTime'\n        __declspec(dllimport) void __stdcall GetSystemTimeAsFileTime(FILETIME* lpFileTime);\n                                             ^\nC:\\msys64\\mingw64\\x86_64-w64-mingw32\\include\\sysinfoapi.h:38:26: note: previous declaration is here\n  WINBASEAPI VOID WINAPI GetSystemTimeAsFileTime (LPFILETIME lpSystemTimeAsFileTime);\n                         ^\n</code></pre>\n\n<p>and many other similar errors.</p>\n\n<p>Bug in mingw64 package? Missing definitions?</p>\n"}, {"tags": ["android", "c++", "android-ndk", "java-native-interface"], "answers": [{"comments": [{"owner": {"reputation": 914, "user_id": 1409408, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/q9qsP.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/1409408/david"}, "edited": false, "score": 0, "creation_date": 1512011678, "post_id": 47561422, "comment_id": 82088585, "body": "Thank you so much for the quick response. You say it appears twice in the linker. Is this a JNI thing or a standard c++ thing? I can put the same code in Visual Studio without any issue, but I know Visual Studio sometimes does things a little differently."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "reply_to_user": {"reputation": 914, "user_id": 1409408, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/q9qsP.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/1409408/david"}, "edited": false, "score": 1, "creation_date": 1512019140, "post_id": 47561422, "comment_id": 82090426, "body": "Right, the Microsoft compiler may resolve the duplicates in non-standard way"}], "tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": true, "score": 1, "last_activity_date": 1511987945, "creation_date": 1511987945, "answer_id": 47561422, "question_id": 47559720, "link": "https://stackoverflow.com/questions/47559720/android-jni-raw-function-fails-to-compile/47561422#47561422", "title": "Android JNI - &#39;raw&#39; function fails to compile", "body": "<p>Your <code>raw_function()</code> 'appears' twice for the linker: once, from file <strong>native-lib.cpp</strong>, and also, from <strong>header_test.cpp</strong>. To avoid the clash, you can declare it either <code>inline</code> or <code>static</code>. The result will be different: in the latter case, your <strong>native-lib</strong> will have two independent functions <code>raw_function()</code>, each visible from its own cpp file:</p>\n\n<pre><code>inline std::string raw_function() {\n    return \"Raw function\";\n}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>static std::string raw_function() {\n    return \"Raw function\";\n}\n</code></pre>\n"}], "owner": {"reputation": 914, "user_id": 1409408, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/q9qsP.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/1409408/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 1, "accepted_answer_id": 47561422, "answer_count": 1, "score": 1, "last_activity_date": 1511987945, "creation_date": 1511981365, "question_id": 47559720, "link": "https://stackoverflow.com/questions/47559720/android-jni-raw-function-fails-to-compile", "title": "Android JNI - &#39;raw&#39; function fails to compile", "body": "<p>I am trying to work out why the following code won't work under JNI / Android.</p>\n\n<p>If I uncomment the 'raw_function()' from the code below, the code fails to compile with the following message:</p>\n\n<blockquote>\n  <p>Error:error: linker command failed with exit code 1 (use -v to see\n  invocation)</p>\n</blockquote>\n\n<p>I have two problems:</p>\n\n<p>1) I have no idea how to use -v to see invocation - where would I do this?</p>\n\n<p>2) I have no idea why the code is not compiling when I uncomment that specific line. Moving that function into the class (Header_Test) also fixes the problem, but why?</p>\n\n<p>I have included pretty much everything from the project below. The only areas of interest should be header_test.h and native-lib.cpp.</p>\n\n<p>I realize that putting a function in the global namespace is bad practice. This code is purely for test purposes.</p>\n\n<h2><strong>Project Details:</strong></h2>\n\n<ul>\n<li>Android Studio 3.0.1 </li>\n<li>CMake 3.6.4111459 </li>\n<li>NDK 15.2.4203891 </li>\n<li>C++ 14 Standard</li>\n</ul>\n\n<p><strong>header_test.h</strong></p>\n\n<pre><code>#ifndef TESTCPLUSPLUSCHRONO_HEADER_TEST_H\n#define TESTCPLUSPLUSCHRONO_HEADER_TEST_H\n#include &lt;string&gt;\n\nclass Header_Test {\npublic:\n    static std::string get_name() {\n        return \"Header Test\";\n    }\n};\n\n/*std::string raw_function() {\n    return \"Raw function\";\n}\n\n#endif //TESTCPLUSPLUSCHRONO_HEADER_TEST_H\n</code></pre>\n\n<p><strong>native-lib.cpp</strong></p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;string&gt;\n#include \"header_test.h\"\n\nextern \"C\"\nJNIEXPORT jstring\n\nJNICALL\nJava_com_test_android_testrawfunctiontest_MainActivity_stringFromJNI(\n        JNIEnv *env,\n        jobject) {\n    std::string hello;\n    hello = Header_Test::get_name();\n\n    return env-&gt;NewStringUTF(hello.c_str());\n}\n</code></pre>\n\n<h2><strong>Extra Details (This shouldn't affect the main code):</strong></h2>\n\n<p><strong>header_test.cpp</strong></p>\n\n<pre><code>#include \"header_test.h\"\n</code></pre>\n\n<p><strong>MainActivity.java</strong></p>\n\n<pre><code>package com.test.android.testrawfunctiontest;\n\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.widget.TextView;\n\npublic class MainActivity extends AppCompatActivity {\n\n    static {\n        System.loadLibrary(\"native-lib\");\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        // Example of a call to a native method\n        TextView tv = (TextView) findViewById(R.id.sample_text);\n        String jniText = stringFromJNI();\n        tv.setText(jniText);\n        String filler = \"-------------------\";\n        System.out.println(filler);\n        System.out.println(\"Text from JNI: \" + jniText);\n        System.out.println(filler);\n    }\n\n    public native String stringFromJNI();\n}\n</code></pre>\n\n<p><strong>CMakeLists.txt</strong></p>\n\n<pre><code>cmake_minimum_required(VERSION 3.4.1)\n\nadd_library(native-lib SHARED\n             src/main/cpp/native-lib.cpp\n             src/main/cpp/header_test.cpp )\n\nfind_library(log-lib log )\n\ntarget_link_libraries(native-lib ${log-lib} \n</code></pre>\n\n<p>I am sure if I understood what exactly I was asking, I would be able to word this a lot better. I've run a lot of searches trying to find an answer for this, but I don't even know how to phrase the search.</p>\n\n<p>Any comments pointing me in the right direction for this would be appreciated.</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 9027373, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/03e66e155d796e76149c31a92f94bc55?s=128&d=identicon&r=PG&f=1", "display_name": "mystic.06", "link": "https://stackoverflow.com/users/9027373/mystic-06"}, "edited": false, "score": 0, "creation_date": 1512045027, "post_id": 47559918, "comment_id": 82103743, "body": "This loop gives me  <code>points:  QPolygonF(QPointF(0, 7.31297) QPointF(1, -33.6313) QPointF(3, -0.125985) QPointF(6, 40.1209) QPointF(10, 51.4032) POINTS:  QPolygonF(QPointF(0, 7.31297) QPointF(1, -33.6313) QPointF(3, -0.125985) QPointF(6, 40.1209) QPointF(10, 51.4032) )</code> So it does not continue"}, {"owner": {"reputation": 125, "user_id": 9027373, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/03e66e155d796e76149c31a92f94bc55?s=128&d=identicon&r=PG&f=1", "display_name": "mystic.06", "link": "https://stackoverflow.com/users/9027373/mystic-06"}, "edited": false, "score": 0, "creation_date": 1512045824, "post_id": 47559918, "comment_id": 82104267, "body": "It should be  indx++; and not  indx+=i;"}, {"owner": {"reputation": 134, "user_id": 8599142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fa460d1b8eb70cd862ac0dfdaff807a?s=128&d=identicon&r=PG&f=1", "display_name": "organicoman", "link": "https://stackoverflow.com/users/8599142/organicoman"}, "reply_to_user": {"reputation": 125, "user_id": 9027373, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/03e66e155d796e76149c31a92f94bc55?s=128&d=identicon&r=PG&f=1", "display_name": "mystic.06", "link": "https://stackoverflow.com/users/9027373/mystic-06"}, "edited": false, "score": 0, "creation_date": 1512162646, "post_id": 47559918, "comment_id": 82161752, "body": "great ... you get it now."}], "tags": [], "owner": {"reputation": 134, "user_id": 8599142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fa460d1b8eb70cd862ac0dfdaff807a?s=128&d=identicon&r=PG&f=1", "display_name": "organicoman", "link": "https://stackoverflow.com/users/8599142/organicoman"}, "is_accepted": true, "score": 0, "last_activity_date": 1511982025, "creation_date": 1511982025, "answer_id": 47559918, "question_id": 47559680, "link": "https://stackoverflow.com/questions/47559680/append-a-value-in-for-loop/47559918#47559918", "title": "Append a value in for-loop", "body": "<p>The program is doing exactly what you are asking it to do!, if you want a continuous increment do the following.</p>\n\n<pre><code>QPolygonF points;\nstatic int indx = 0;\nfor(int i= 0; i&lt; 5; ++i)\n{\n   double value= finalMat.at&lt;double&gt;(i);\n   indx += i;\n   points.push_back(QPointF((double)indx, value));\n}\nqDebug()&lt;&lt;\"points: \" &lt;&lt; points;\n\nemit updatePointsSignal(points);\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 9027373, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/03e66e155d796e76149c31a92f94bc55?s=128&d=identicon&r=PG&f=1", "display_name": "mystic.06", "link": "https://stackoverflow.com/users/9027373/mystic-06"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 47559918, "answer_count": 1, "score": -2, "last_activity_date": 1511982025, "creation_date": 1511981200, "question_id": 47559680, "link": "https://stackoverflow.com/questions/47559680/append-a-value-in-for-loop", "title": "Append a value in for-loop", "body": "<p>I have a problem with the append/incrementg of QPolygonF values: I push some points into it, which I get continuously and then send the points over signal to other class.  </p>\n\n<pre><code>...\nQPolygonF points;\nfor(int i= 0; i&lt; 5; ++i)\n{\n  double value= finalMat.at&lt;double&gt;(i);\n  points.push_back(QPointF((double)i, value));\n  //points &lt;&lt; QPointF((double)i, value);\n}\nqDebug()&lt;&lt;\"points: \" &lt;&lt; points;\n\nemit updatePointsSignal(points);\n</code></pre>\n\n<p>This code block above removes the old points after reaching the condition number and sends 5 new points with new index. The output is:</p>\n\n<pre><code>points: QPolygonF(0, pointValue) QPolygonF(1, pointValue) QPolygonF(2, pointValue) QPolygonF(3, pointValue) QPolygonF(4, pointValue) QPolygonF(0, newPointValue) QPolygonF(1, newPointValue)...\n</code></pre>\n\n<p>How can I increment my points and send them without deleting the old points, so that the output looks like?</p>\n\n<pre><code> points: QPolygonF(0, pointValue) QPolygonF(1, pointValue) QPolygonF(2, pointValue) QPolygonF(3, pointValue) QPolygonF(4, pointValue) QPolygonF(5, newPointValue) QPolygonF(6, newPointValue) QPolygonF(7, newPointValue) QPolygonF(8, newPointValue)...\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1511981257, "post_id": 47559651, "comment_id": 82077054, "body": "Look up &quot;memoization&quot;. If you memorize the call to your eval function, you can probably get a big speedup."}, {"owner": {"reputation": 43, "user_id": 4613634, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-HZe35_VtBZo/AAAAAAAAAAI/AAAAAAAAAGk/HaXw2Bg6evw/photo.jpg?sz=128", "display_name": "Alexander Tille", "link": "https://stackoverflow.com/users/4613634/alexander-tille"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1512030069, "post_id": 47559651, "comment_id": 82095054, "body": "Ok, I didn&#39;t know this technique but does it work, if my variables change. If I understood it correctly it will just memorize calculations that have been done and won&#39;t repeat the same calculation with the same values."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1512050166, "post_id": 47559651, "comment_id": 82107108, "body": "Ya, basically. Languages like Clojure have built-ins that you give a function to, and they automatically memoize the function. I don&#39;t think c++ had such a function, so you&#39;ll need to write your own."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1512050237, "post_id": 47559651, "comment_id": 82107147, "body": "Note though that you&#39;ll need a way of determining if the input is the same, which will likely require traversing the entire AST once to hash it or something. Make sure that that&#39;s still more efficient than just reevaluating it."}], "owner": {"reputation": 43, "user_id": 4613634, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-HZe35_VtBZo/AAAAAAAAAAI/AAAAAAAAAGk/HaXw2Bg6evw/photo.jpg?sz=128", "display_name": "Alexander Tille", "link": "https://stackoverflow.com/users/4613634/alexander-tille"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1511981083, "creation_date": 1511981083, "question_id": 47559651, "link": "https://stackoverflow.com/questions/47559651/evaluate-formula-given-by-ast-multiple-times", "title": "evaluate formula given by AST multiple times", "body": "<p>I want to evaluate a formula multiple times that is given by a AST node.\nfor example </p>\n\n<p>result = a<em>y - b</em>x</p>\n\n<p>a,b are constants and x,y are variables that change over time.</p>\n\n<pre><code>      &lt;math xmlns=\"http://www.w3.org/1998/Math/MathML\"&gt;\n        &lt;apply&gt;\n          &lt;minus/&gt;\n          &lt;apply&gt;\n            &lt;times/&gt;\n            &lt;ci&gt; a &lt;/ci&gt;\n            &lt;ci&gt; y &lt;/ci&gt;\n          &lt;/apply&gt;\n          &lt;apply&gt;\n            &lt;times/&gt;\n            &lt;ci&gt; b &lt;/ci&gt;\n            &lt;ci&gt; x &lt;/ci&gt;\n          &lt;/apply&gt;\n        &lt;/apply&gt;\n      &lt;/math&gt;\n</code></pre>\n\n<p>I've written a recursive function ( double evaluateAST(x,y) ), that reads the AST, substitutes the values of constants and variables and calculates the result.\nBUT as i want to evaluate the formula very often, this is a very slow solution.</p>\n\n<p>I would like to prefer a solution, where I evaluate the AST once and get a function like</p>\n\n<pre><code>double f(x,y){return VALUE_OF_a*y - VALUE_OF_b*x}\n</code></pre>\n\n<p>I'm new to C++ but I found the Lambda function. \nIs this a solution to my problem?</p>\n\n<pre><code>auto result  = [](double x, double y){return evaluateAST(x,y)}\n</code></pre>\n\n<p>I'm not sure if this solution works, because I'm afraid that I evaluate the function evaluateAST(x,y) as often as I call the lambda function.</p>\n\n<p>Did I missunderstood the lambda functions?\nAre there better solutions for my problem?</p>\n"}, {"tags": ["c++", "parsing", "haskell", "boost-spirit", "boost-spirit-qi"], "answers": [{"comments": [{"owner": {"reputation": 2970, "user_id": 1763955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3a7a94d762a9d702b88404f840e31d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Carbon", "link": "https://stackoverflow.com/users/1763955/carbon"}, "edited": false, "score": 0, "creation_date": 1511989492, "post_id": 47561646, "comment_id": 82081288, "body": "And <code>qi::double_ [ qi::_val += qi::_1 ] % &#39;,&#39;</code> interprets as a list of doubles, separated by commas, correct?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 2970, "user_id": 1763955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3a7a94d762a9d702b88404f840e31d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Carbon", "link": "https://stackoverflow.com/users/1763955/carbon"}, "edited": false, "score": 1, "creation_date": 1511989551, "post_id": 47561646, "comment_id": 82081319, "body": "Simplified by dropping the semantic action: <a href=\"http://www.boost.org/doc/libs/1_65_1/libs/spirit/doc/html/spirit/qi/reference/operator/list.html\" rel=\"nofollow noreferrer\"><code>double_ % &#39;,&#39;</code></a> does, yes."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 2970, "user_id": 1763955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3a7a94d762a9d702b88404f840e31d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Carbon", "link": "https://stackoverflow.com/users/1763955/carbon"}, "edited": false, "score": 0, "creation_date": 1511989818, "post_id": 47561646, "comment_id": 82081468, "body": "For fun: separating parsing from summing makes <i>everything</i> a lot simpler: <b><a href=\"http://coliru.stacked-crooked.com/a/e5d33ef9d196be20\" rel=\"nofollow noreferrer\">Live On Coliru</a></b>. I think you should do this, for small/bounded lists. (PSA: Coliru cannot usually compile these samples, I have backdoor access)"}, {"owner": {"reputation": 2970, "user_id": 1763955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3a7a94d762a9d702b88404f840e31d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Carbon", "link": "https://stackoverflow.com/users/1763955/carbon"}, "edited": false, "score": 1, "creation_date": 1511989954, "post_id": 47561646, "comment_id": 82081537, "body": "Yep, the point of this was to figure out how I can make complicated rules, as needed. I think I understand the val notation. I really like Spirit (to the extent one can like being that deep in the preprocessor) so far."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 2970, "user_id": 1763955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3a7a94d762a9d702b88404f840e31d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Carbon", "link": "https://stackoverflow.com/users/1763955/carbon"}, "edited": false, "score": 0, "creation_date": 1511990019, "post_id": 47561646, "comment_id": 82081579, "body": "I like Spirit, because (a) it enables rapid prototyping (b) it doesn&#39;t involve the preprocessor :) You obviously meant generic template instantiations."}, {"owner": {"reputation": 2970, "user_id": 1763955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3a7a94d762a9d702b88404f840e31d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Carbon", "link": "https://stackoverflow.com/users/1763955/carbon"}, "edited": false, "score": 0, "creation_date": 1511990221, "post_id": 47561646, "comment_id": 82081680, "body": "Oh - I just spent a bit of time fighting through the <code>boost::Fusion</code> bits for structs with too many elements to go through BOOST_FUSION_ADAPT_STRUCT - getting my head around that whole thing was interesting... I guess there isn&#39;t any preprocessor stuff in Spirit, it&#39;s an optional feature."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 2970, "user_id": 1763955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3a7a94d762a9d702b88404f840e31d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Carbon", "link": "https://stackoverflow.com/users/1763955/carbon"}, "edited": false, "score": 0, "creation_date": 1511990241, "post_id": 47561646, "comment_id": 82081686, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/160140/discussion-between-sehe-and-carbon\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 3, "last_activity_date": 1511989298, "last_edit_date": 1511989298, "creation_date": 1511988894, "answer_id": 47561646, "question_id": 47559631, "link": "https://stackoverflow.com/questions/47559631/applying-operations-on-parser-exposed-attributes-in-qi/47561646#47561646", "title": "Applying operations on parser exposed attributes in Qi", "body": "<h2>First the quick answer</h2>\n\n<blockquote>\n  <p>why am I getting 1 instead of 3?</p>\n</blockquote>\n\n<p>You're likely getting 1 because that's the exposed attribute.\u00b3 </p>\n\n<p>However, you can't reason about your code due to Undefined Behaviour.</p>\n\n<p>Your semantic actions </p>\n\n<ul>\n<li><p>invoke UB: you assign to <code>a</code> whose lifetime ends at the end of the parser constructor. That's random memory corruption</p></li>\n<li><p>has no effect: the action <code>[a+_1]</code> is an expression that results in a temporary that is the sum of <em><code>/whatever is at the memory location that used to hold the local variable</code>a<code>at the time of parser construction/</code></em> and the attribute exposed by the subject parser (<code>double_</code>). In this case it would be \"?+2.0\" but it doesn't matter at all because nothing is done with the result: it's merely discarded.</p></li>\n</ul>\n\n<h2>The normal answer</h2>\n\n<p>Taking the requirement to be <em>Just</em>:</p>\n\n<blockquote>\n  <p>Say I had two doubles separated by a comma to parse returning their\n  sum</p>\n</blockquote>\n\n<p>Here's how we'd do it:</p>\n\n<pre><code>double parseDoublesAndSum(std::istream&amp; is) {\n    double a, b; char comma;\n    if (is &gt;&gt; a &gt;&gt; comma &amp;&amp; comma == ',' &amp;&amp; is &gt;&gt; b)\n        return a + b;\n\n    is.setstate(std::ios::failbit);\n    return 0;\n}\n</code></pre>\n\n<p>See it <strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/044a543d1fd568f7\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong>.</p>\n\n<h2>Yeah, but using Spirit</h2>\n\n<p>I get it :)</p>\n\n<p>Well, firstly, we'd realize the exposed attribute is a double, not the list. </p>\n\n<p>Next step is to realize that the individual elements of the list aren't of interest. We can just initialize the result to 0 and use it to accumulate the elements\u00b9, e.g.:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/fa5b76b6f287658e\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/spirit/include/qi.hpp&gt;\n#include &lt;boost/spirit/include/phoenix.hpp&gt;\n\ndouble parseDoublesAndSum(std::string const&amp; source) {\n    double result = 0;\n\n    {\n        using namespace boost::spirit::qi;\n        namespace px = boost::phoenix;\n\n        bool ok = parse(source.begin(), source.end(), double_ [ px::ref(result) += _1 ] % ',');\n        if (!ok)\n            throw std::invalid_argument(\"source: expect comma delimited list of doubles\");\n    }\n\n    return result;\n}\n\nvoid test(std::string input) {\n    try {\n        std::cout &lt;&lt; \"'\" &lt;&lt; input &lt;&lt; \"' -&gt; \" &lt;&lt; parseDoublesAndSum(input) &lt;&lt; \"\\n\";\n    } catch (std::exception const&amp; e) {\n        std::cout &lt;&lt; \"'\" &lt;&lt; input &lt;&lt; \"' -&gt; \" &lt;&lt; e.what() &lt;&lt; \"\\n\";\n    }\n}\nint main() {\n    test(\"1,2\");\n    test(\"1,2,3\");\n    test(\"1,2,3\");\n    test(\"1,2,inf,4\");\n    test(\"1,2,-inf,4,5,+inf\");\n    test(\"1,2,-NaN\");\n    test(\"1,,\");\n    test(\"1\");\n    test(\"aaa,1\");\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>'1,2' -&gt; 3\n'1,2,3' -&gt; 6\n'1,2,3' -&gt; 6\n'1,2,inf,4' -&gt; inf\n'1,2,-inf,4,5,+inf' -&gt; -nan\n'1,2,-NaN' -&gt; -nan\n'1,,' -&gt; 1\n'1' -&gt; 1\n'aaa,1' -&gt; 'aaa,1' -&gt; source: expect comma delimited list of doubles\n</code></pre>\n\n<h2>Advanced things:</h2>\n\n<ol>\n<li><blockquote>\n  <p>woah, \"1,,\" shouldn't have parsed!</p>\n</blockquote>\n\n<p>It didn't :) We have formulated the parser not to expect the full input to be consumed, fix: append <code>&gt;&gt; eoi</code>:</p>\n\n<pre><code>bool ok = parse(source.begin(), source.end(), double_ [ px::ref(result) += _1 ] % ',' &gt;&gt; eoi);\n</code></pre>\n\n<p>Now the relevant test case prints</p>\n\n<pre><code>'1,,' -&gt; '1,,' -&gt; source: expect comma delimited list of doubles\n</code></pre>\n\n<p>What if we want the diagnostic to mention that the end of input (<code>eoi</code>) was expected? Make it <a href=\"http://www.boost.org/doc/libs/1_65_1/libs/spirit/doc/html/spirit/qi/reference/operator/expect.html\" rel=\"nofollow noreferrer\">an expectation point</a> <code>&gt; eoi</code>:</p>\n\n<pre><code>bool ok = parse(source.begin(), source.end(), double_ [ px::ref(result) += _1 ] % ',' &gt; eoi);\n</code></pre>\n\n<p>Now prints</p>\n\n<pre><code>'1,,' -&gt; '1,,' -&gt; boost::spirit::qi::expectation_failure\n</code></pre>\n\n<p>Which can be improved by handling that exception type:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/f10dfc67340363ba\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<p>Prints</p>\n\n<pre><code>'1,,' -&gt; Expecting &lt;eoi&gt; at ',,'\n</code></pre></li>\n<li><blockquote>\n  <p>How about accepting spaces?</p>\n</blockquote>\n\n<p>Just use <code>phrase_parse</code> which allows a skipper outside <code>lexeme</code>s.\u00b2:</p>\n\n<pre><code>bool ok = phrase_parse(source.begin(), source.end(), double_ [ px::ref(result) += _1 ] % ',' &gt; eoi, blank);\n</code></pre>\n\n<p>Now everything <code>blank</code> is ignored in between the primitives: </p>\n\n<pre><code>test(\"   1, 2   \");\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>'   1, 2   ' -&gt; 3\n</code></pre></li>\n<li><blockquote>\n  <p>How to package it up as <code>rule</code>?</p>\n</blockquote>\n\n<p>Like I mentioned, realize you can use the rule's exposed attribute as accumulator register:</p>\n\n<pre><code>namespace Parsers {\n    static const qi::rule&lt;iterator, double(), qi::blank_type&gt; product\n        = qi::eps [ qi::_val = 0 ] // initialize\n        &gt;&gt; qi::double_ [ qi::_val += qi::_1 ] % ','\n        ;\n}\n</code></pre>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/81a56144d2f14cf0\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<p>Printing the same results as before</p></li>\n</ol>\n\n<hr>\n\n<p>\u00b9 bear in mind that summation is an interesting subject, <a href=\"http://www.partow.net/programming/sumtk/index.html\" rel=\"nofollow noreferrer\">http://www.partow.net/programming/sumtk/index.html</a></p>\n\n<p>\u00b2 primitive parsers are implicitly lexemes, <code>lexeme[]</code> directives inhibit skipping and rules declared without a skipper are implicitly lexemes: <a href=\"https://stackoverflow.com/questions/17072987/boost-spirit-skipper-issues/17073965#17073965\">Boost spirit skipper issues</a></p>\n\n<p>\u00b3 PS. There's a subtlety at play here. Had you not written <code>%=</code> but just <code>=</code> the value would have been indeterminate: <a href=\"http://www.boost.org/doc/libs/1_65_1/libs/spirit/doc/html/spirit/qi/reference/nonterminal/rule.html#spirit.qi.reference.nonterminal.rule.expression_semantics\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_65_1/libs/spirit/doc/html/spirit/qi/reference/nonterminal/rule.html#spirit.qi.reference.nonterminal.rule.expression_semantics</a></p>\n"}], "owner": {"reputation": 2970, "user_id": 1763955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3a7a94d762a9d702b88404f840e31d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Carbon", "link": "https://stackoverflow.com/users/1763955/carbon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 47561646, "answer_count": 1, "score": 3, "last_activity_date": 1511990208, "creation_date": 1511981022, "last_edit_date": 1511990208, "question_id": 47559631, "link": "https://stackoverflow.com/questions/47559631/applying-operations-on-parser-exposed-attributes-in-qi", "title": "Applying operations on parser exposed attributes in Qi", "body": "<p>Say I had two doubles separated by a comma to parse returning their sum. I might do it as follows in Haskell:</p>\n\n<pre><code>import Data.Attoparsec.Text\nimport Data.Text (pack)\ndblParse = (\\a -&gt; fst a + snd a) &lt;$&gt; ((,) &lt;$&gt; double &lt;* char ',' &lt;*&gt; double)\nparseOnly dblParse $ pack \"1,2\"\n</code></pre>\n\n<p>The <code>parseOnly</code> statement will yield <code>(Right 3)::Either String Double</code> - where Either is how Haskell often handles errors.</p>\n\n<p>You can kind of get a sense how this works - <code>(,) &lt;$&gt; double &lt;*&gt; double</code> yields a <code>Parser (Double,Double)</code>, and applying <code>(\\a -&gt; fst a + snd a)</code> makes it a <code>Parser Double</code>.</p>\n\n<p>I'm trying to do the same thing in Qi, but when I expect to get back 3, I actually get back 1:</p>\n\n<pre><code>namespace qi = boost::spirit::qi;\nnamespace ascii = boost::spirit::ascii;\n\nnamespace phx = boost::phoenix;\n\nstruct cat\n{\n    double q;\n};\n\nBOOST_FUSION_ADAPT_STRUCT(cat, q)\nBOOST_FUSION_ADAPT_STRUCT(cat, q)\ntemplate &lt;typename Iterator&gt;\nstruct cat_parser : qi::grammar&lt;Iterator, cat()&gt;\n{\n    cat_parser() : cat_parser::base_type(start)\n    {\n        using qi::int_;\n        using qi::double_;\n        using qi::repeat;\n        using qi::eoi;\n        using qi::_1;\n        double a;\n        start %= double_[phx::ref(a) =_1] &gt;&gt; ',' &gt;&gt; double_[a + _1];\n    }\n    qi::rule&lt;Iterator, cat()&gt; start;\n};\n\nint main()\n    {\n\n        std::string wat(\"1,2\");\n        cat_parser&lt;std::string::const_iterator&gt; f;\n        cat example;\n        std::string::const_iterator st = wat.begin();\n        std::string::const_iterator en = wat.end();\n        std::cout &lt;&lt; parse(st, en, f, example) &lt;&lt; std::endl;\n        std::cout &lt;&lt; example.q &lt;&lt; std::endl;\n        return 0;\n}\n</code></pre>\n\n<p>My question is twofold: Is this the idiomatic way to do this with Spirit, and why am I getting 1 instead of 3?</p>\n"}, {"tags": ["c++", "ubuntu", "sfml"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1511985845, "post_id": 47559527, "comment_id": 82079468, "body": "&quot;What if two programs both tried to do this?&quot; ((C) Raymond Chen)"}, {"owner": {"reputation": 449, "user_id": 5440823, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ed95faf29a09a84094e9767ad6d69add?s=128&d=identicon&r=PG&f=1", "display_name": "dosvarog", "link": "https://stackoverflow.com/users/5440823/dosvarog"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1511986001, "post_id": 47559527, "comment_id": 82079562, "body": "@MSalters then we have a problem :D. But this is not for a real-world application, this is only for myself, to have some fun and to learn something."}], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 5440823, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ed95faf29a09a84094e9767ad6d69add?s=128&d=identicon&r=PG&f=1", "display_name": "dosvarog", "link": "https://stackoverflow.com/users/5440823/dosvarog"}, "edited": false, "score": 0, "creation_date": 1511992322, "post_id": 47559760, "comment_id": 82082667, "body": "I managed to do it, based on that code. Thank you very much. Just a note to someone who tries to use this code, I had to add <code>XFlush(display)</code> after a call to <code>set_always_on_top(true)</code> (that&#39;s how I renamed this function <code>setTopmost()</code>) for this to work because output buffer is not automatically flushed since I am not using <code>XNextEvent()</code> or similar functions that do it automatically."}, {"owner": {"reputation": 449, "user_id": 5440823, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ed95faf29a09a84094e9767ad6d69add?s=128&d=identicon&r=PG&f=1", "display_name": "dosvarog", "link": "https://stackoverflow.com/users/5440823/dosvarog"}, "edited": false, "score": 0, "creation_date": 1511993027, "post_id": 47559760, "comment_id": 82083020, "body": "Update: it works, but not for a fullscreen nor for a so called fullscreen windowed mode. Ah, well, back to the tinkering..."}], "tags": [], "owner": {"reputation": 33251, "user_id": 409744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b055a62302498782454622c61e44aa51?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/409744/mario"}, "is_accepted": true, "score": 1, "last_activity_date": 1511981490, "creation_date": 1511981490, "answer_id": 47559760, "question_id": 47559527, "link": "https://stackoverflow.com/questions/47559527/how-to-make-window-always-on-top-in-sfml/47559760#47559760", "title": "How to make window always on top in SFML?", "body": "<p>It's not possible with the current version of SFML, but since you only need it  for X so far, you can just implement it yourself using a <a href=\"https://github.com/SFML/SFML/pull/493/files#diff-fa317eaa9add8efac784c71bffc5a2ae\" rel=\"nofollow noreferrer\">snippet from this old/rejected pull request</a>.</p>\n\n<pre><code>void WindowImplX11::setTopmost(bool topmost)\n{\n    static Atom wmStateAbove = XInternAtom(m_display, \"_NET_WM_STATE_ABOVE\", 1);\n    static Atom wmNetWmState = XInternAtom(m_display, \"_NET_WM_STATE\", 1);\n\n    if (wmStateAbove)\n    {\n        XClientMessageEvent emsg;\n        memset(&amp;emsg, 0, sizeof(emsg));\n        emsg.type = ClientMessage;\n        emsg.window = m_window;\n        emsg.message_type = wmNetWmState;\n        emsg.format = 32;\n        emsg.data.l[0] = topmost;\n        emsg.data.l[1] = wmStateAbove;\n        XSendEvent(m_display, RootWindow(m_display, m_screen), false, SubstructureRedirectMask | SubstructureNotifyMask, (XEvent*)&amp;emsg);\n    }\n}\n</code></pre>\n\n<p>You'll have to retrieve <code>m_display</code>, <code>m_window</code> etc. on your own and/or reimplement the pull request into your source version.</p>\n"}], "owner": {"reputation": 449, "user_id": 5440823, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ed95faf29a09a84094e9767ad6d69add?s=128&d=identicon&r=PG&f=1", "display_name": "dosvarog", "link": "https://stackoverflow.com/users/5440823/dosvarog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 478, "favorite_count": 0, "accepted_answer_id": 47559760, "answer_count": 1, "score": 0, "last_activity_date": 1511981490, "creation_date": 1511980542, "question_id": 47559527, "link": "https://stackoverflow.com/questions/47559527/how-to-make-window-always-on-top-in-sfml", "title": "How to make window always on top in SFML?", "body": "<p>I am trying to make a program with SFML who's window stays always on top. How can I achieve that with SFML? I've searched all around but to no avail.</p>\n\n<p>\"Program\" is a small red dot in the middle of a screen that would imitate a crosshair and I need it to be on top of everything because a real game would be in the background (game does not have crosshair, only sighting).</p>\n\n<p>Only other idea I have, is to use SFML's method <code>getSystemHandle()</code> which would give me OS-specific handle of a window. I am using Ubuntu 16.04 with Gnome and X and I am not quite sure how to code that functionality after I obtain the handle.</p>\n"}, {"tags": ["c++", "qt", "qwidget"], "comments": [{"owner": {"reputation": 134, "user_id": 8599142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fa460d1b8eb70cd862ac0dfdaff807a?s=128&d=identicon&r=PG&f=1", "display_name": "organicoman", "link": "https://stackoverflow.com/users/8599142/organicoman"}, "edited": false, "score": 0, "creation_date": 1511981111, "post_id": 47559399, "comment_id": 82076988, "body": "first create the <code>mChart</code> object without a parent, set all its parameters, add data, then create the <code>mLayout</code> object, add <code>mChart</code> to it, then set it as the layout for the mainWindow."}, {"owner": {"reputation": 134, "user_id": 8599142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fa460d1b8eb70cd862ac0dfdaff807a?s=128&d=identicon&r=PG&f=1", "display_name": "organicoman", "link": "https://stackoverflow.com/users/8599142/organicoman"}, "edited": false, "score": 0, "creation_date": 1511981475, "post_id": 47559399, "comment_id": 82077141, "body": "or just use <code>QChartView</code> you don&#39;t need <code>QVBoxLayot</code> with it. read documentation."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1511981739, "post_id": 47559399, "comment_id": 82077286, "body": "You appear to be calling <code>setLayout</code> on a <code>QMainWindow</code>?  You shouldn&#39;t do that.  You are probably getting error messages along the lines of ``setLayout: Attempting to set QLayout &quot; on QMainWindow &quot;, which already has a layout&#39;&#39;."}], "answers": [{"tags": [], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "is_accepted": true, "score": 1, "last_activity_date": 1511982572, "last_edit_date": 1511982572, "creation_date": 1511981878, "answer_id": 47559876, "question_id": 47559399, "link": "https://stackoverflow.com/questions/47559399/widget-and-mainwindow/47559876#47559876", "title": "Widget and MainWindow", "body": "<ul>\n<li><p>Create a <code>QWidget</code> with parent as your mainwindow.</p></li>\n<li><p>Add chart widget to your vboxlayout. </p></li>\n<li><p>Set the vBoxLayout to dummy widget created in first step.</p></li>\n<li><p>Then assign dummy widget as central widget.</p></li>\n</ul>\n\n<p><strong>rough code below:</strong></p>\n\n<pre><code>mLayout = new QVBoxLayout;\n\nQWidget *vBox = new QWidget(this);\n\nmChart = new OpenChart(this);\n\nmLayout-&gt;addWidget(mChart);\n\nvBox-&gt;setLayout(mLayout);\n\nsetCentralWidget(vBox);\n</code></pre>\n\n<p>Do not call <code>setLayout</code> again, as the layout is already set to a <code>QWidget</code> (vbox).</p>\n"}], "owner": {"reputation": 123, "user_id": 8966543, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r9mCIh9TJ1E/AAAAAAAAAAI/AAAAAAAAAD8/TYT92LSI3_Q/photo.jpg?sz=128", "display_name": "Omar Krichen", "link": "https://stackoverflow.com/users/8966543/omar-krichen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 47559876, "answer_count": 1, "score": 0, "last_activity_date": 1511982572, "creation_date": 1511980023, "last_edit_date": 1511980219, "question_id": 47559399, "link": "https://stackoverflow.com/questions/47559399/widget-and-mainwindow", "title": "Widget and MainWindow", "body": "<p>this is my code:</p>\n\n<pre><code>mLayout = new QVBoxLayout;\nmChart = new OpenChart(this);\nsetCentralWidget(mChart);\nmLayout-&gt;addWidget(mChart);\nmLayout-&gt;setMargin(0);\nsetLayout(mLayout);\nQMap&lt;QString,double&gt; empleados;\nempleados[\"Ana\"]=5000.0;\nempleados[\"Juan\"]=6000.0;\nempleados[\"Luis\"]=7000.0;\nempleados[\"Jorge\"]=8000.0;\nempleados[\"Francisco\"]=100.0;\nempleados[\"Mario\"]=10000.0;\nmChart-&gt;setTitle(\"sueldos\");\nmChart-&gt;setTipo(OpenChart::Sectores_2D);\nmChart-&gt;setTipoleyenda(OpenChart::Circular);\nconst auto empleadosEnd=empleados.end();\nfor(auto i=empleados.begin();i!=empleadosEnd;++i)\n{mChart-&gt;addItem(i.key(),i.value());}\n</code></pre>\n\n<p>Output:\n<img src=\"https://i.stack.imgur.com/6WHS1.png\" alt=\"enter image description here\"></p>\n\n<p>I want the widget to display on the whole window of mainwindow  !! Help me Please !!!!!</p>\n"}, {"tags": ["c++", "chapel"], "answers": [{"comments": [{"owner": {"reputation": 2930, "user_id": 2035811, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9610ddf29620bd2cea4f69476e375471?s=128&d=identicon&r=PG", "display_name": "Brian Dolan", "link": "https://stackoverflow.com/users/2035811/brian-dolan"}, "edited": false, "score": 0, "creation_date": 1511996922, "post_id": 47560938, "comment_id": 82084626, "body": "It&#39;s true that I&#39;m mixing c &amp; c++, but the real issue is that <code>compileline</code> barfs when you include <code>c++</code> headers."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 2930, "user_id": 2035811, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9610ddf29620bd2cea4f69476e375471?s=128&d=identicon&r=PG", "display_name": "Brian Dolan", "link": "https://stackoverflow.com/users/2035811/brian-dolan"}, "edited": false, "score": 1, "creation_date": 1512004535, "post_id": 47560938, "comment_id": 82086832, "body": "Well, there&#39;s no viable way to use realistic C++ without C++ headers. Chapel itself claims the integration with C (not C++) is already fragile .It might be fair to say that it simply does not work with C++ today."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1511989593, "last_edit_date": 1511989593, "creation_date": 1511986100, "answer_id": 47560938, "question_id": 47559380, "link": "https://stackoverflow.com/questions/47559380/compiling-c-with-chapels-compileline/47560938#47560938", "title": "Compiling C++ with Chapel&#39;s &quot;compileline&quot;", "body": "<p>You're including <code>&lt;iostream&gt;</code> for <code>std::cout</code> but you're using <code>printf</code> from <code>&lt;cstdio&gt;</code>.</p>\n\n<p>Basically you're mixing not just C++ and chapel but also C++ and C.</p>\n"}, {"comments": [{"owner": {"reputation": 1705, "user_id": 5560486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xW1z4.png?s=128&g=1", "display_name": "mppf", "link": "https://stackoverflow.com/users/5560486/mppf"}, "edited": false, "score": 1, "creation_date": 1512064051, "post_id": 47579326, "comment_id": 82116235, "body": "The <code>--compile-c++</code> option is (briefly) discussed in the documentation here: <a href=\"https://chapel-lang.org/docs/master/technotes/libraries.html?highlight=compile-c++\" rel=\"nofollow noreferrer\">chapel-lang.org/docs/master/technotes/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1705, "user_id": 5560486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xW1z4.png?s=128&g=1", "display_name": "mppf", "link": "https://stackoverflow.com/users/5560486/mppf"}, "is_accepted": true, "score": 2, "last_activity_date": 1512063097, "creation_date": 1512063097, "answer_id": 47579326, "question_id": 47559380, "link": "https://stackoverflow.com/questions/47559380/compiling-c-with-chapels-compileline/47579326#47579326", "title": "Compiling C++ with Chapel&#39;s &quot;compileline&quot;", "body": "<p>Chapel 1.17 (not released yet, but you can try the pre-release master branch) adds <code>util/config/compileline --compile-c++</code> which works similarly but requests a C++ compiler instead of a C one.</p>\n"}], "owner": {"reputation": 2930, "user_id": 2035811, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9610ddf29620bd2cea4f69476e375471?s=128&d=identicon&r=PG", "display_name": "Brian Dolan", "link": "https://stackoverflow.com/users/2035811/brian-dolan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 1, "accepted_answer_id": 47579326, "answer_count": 2, "score": 2, "last_activity_date": 1512063097, "creation_date": 1511979931, "last_edit_date": 1511996862, "question_id": 47559380, "link": "https://stackoverflow.com/questions/47559380/compiling-c-with-chapels-compileline", "title": "Compiling C++ with Chapel&#39;s &quot;compileline&quot;", "body": "<p>I want to include some C++ code in my chapel libs, the first step is getting the Chapel compiler to compile cpp according to <a href=\"https://chapel-lang.org/docs/master/technotes/libraries.html\" rel=\"nofollow noreferrer\">this page</a>. However, I'm getting a strange error.  My <code>.cpp</code> is</p>\n\n<pre><code>/* Hello World program\n * `/Users/buddha/github/chapel/util/config/compileline --compile` hello.cpp\n * */\n\n//#include&lt;stdio.h&gt;   // just fine\n#include&lt;iostream&gt;  // gastro-intestinal distress...\n\nint main()\n{\n    printf(\"Hello World\\n\");\n}\n</code></pre>\n\n<p>But when I run <code>compileline</code> I get an error</p>\n\n<pre><code> `/Users/buddha/github/chapel/util/config/compileline --compile` hello.cpp \nIn file included from hello.cpp:6:\nIn file included from /Library/Developer/CommandLineTools/usr/include/c++/v1/iostream:38:\nIn file included from /Library/Developer/CommandLineTools/usr/include/c++/v1/ios:216:\nIn file included from /Library/Developer/CommandLineTools/usr/include/c++/v1/__locale:18:\nIn file included from /Library/Developer/CommandLineTools/usr/include/c++/v1/mutex:189:\nIn file included from /Library/Developer/CommandLineTools/usr/include/c++/v1/__mutex_base:17:\n/Library/Developer/CommandLineTools/usr/include/c++/v1/__threading_support:156:1: error: unknown type name 'mach_port_t'\nmach_port_t __libcpp_thread_get_port();\n^\n/Library/Developer/CommandLineTools/usr/include/c++/v1/__threading_support:300:1: error: unknown type name 'mach_port_t'\nmach_port_t __libcpp_thread_get_port() {\n^\n/Library/Developer/CommandLineTools/usr/include/c++/v1/__threading_support:301:12: error: use of undeclared identifier 'pthread_mach_thread_np'\n    return pthread_mach_thread_np(pthread_self());\n           ^\n3 errors generated.\n</code></pre>\n\n<p>I feel like I'm following the documentation, but I don't see what I'm missing.</p>\n"}, {"tags": ["java", "c++", "android-studio", "android-ndk", "java-native-interface"], "comments": [{"owner": {"reputation": 190, "user_id": 9016205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8be622071c9822a5e62bc69f54819ae6?s=128&d=identicon&r=PG&f=1", "display_name": "sebseb24", "link": "https://stackoverflow.com/users/9016205/sebseb24"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1511980686, "post_id": 47559161, "comment_id": 82076790, "body": "I removed the image, sorry about that !  It&#39;s my first question, any advices on how to behave are appreciated !"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1511980909, "post_id": 47559161, "comment_id": 82076891, "body": "You probably didn&#39;t understand: Instead of images of error messages or code post text instead please."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1511986744, "post_id": 47559161, "comment_id": 82079920, "body": "This could be bad installation of NDK. Try to download NDK zip from the <a href=\"https://developer.android.com/ndk/downloads/index.html\" rel=\"nofollow noreferrer\">official site</a>, unnpack it to <code>C:\\Users\\spomerleau\\NDK</code>, and edit file <b>local.properties</b> in your project to look there. Another possible trouble could be that the path to your project is really long. Try to move <code>android-tutorial-5</code> to a location that is shorter (and has no spaces in path)."}], "answers": [{"tags": [], "owner": {"reputation": 144, "user_id": 7368195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75a7203bbd0bdb1613a16b2b6aeee66d?s=128&d=identicon&r=PG&f=1", "display_name": "Valgrind1691", "link": "https://stackoverflow.com/users/7368195/valgrind1691"}, "is_accepted": false, "score": 0, "last_activity_date": 1512022912, "creation_date": 1512022912, "answer_id": 47567073, "question_id": 47559161, "link": "https://stackoverflow.com/questions/47559161/android-studio-jni-h-not-found/47567073#47567073", "title": "Android studio ; jni.h not found", "body": "<p>jni.h is a header file which is already present in the android ndk package. If it is not present you can either reinstall the package or you can search over the web for the source file which you can get very easily and place that file into the location your compiler is expecting it to be</p>\n"}, {"comments": [{"owner": {"reputation": 190, "user_id": 9016205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8be622071c9822a5e62bc69f54819ae6?s=128&d=identicon&r=PG&f=1", "display_name": "sebseb24", "link": "https://stackoverflow.com/users/9016205/sebseb24"}, "edited": false, "score": 0, "creation_date": 1513266598, "post_id": 47804728, "comment_id": 82596237, "body": "Do you know how I could fix it ?  I just tried updating my NDK to 16.1, but it didn&#39;t work."}, {"owner": {"reputation": 11350, "user_id": 1172714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b9325e81df235c9f3fbadd082ab651?s=128&d=identicon&r=PG", "display_name": "dsh", "link": "https://stackoverflow.com/users/1172714/dsh"}, "reply_to_user": {"reputation": 190, "user_id": 9016205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8be622071c9822a5e62bc69f54819ae6?s=128&d=identicon&r=PG&f=1", "display_name": "sebseb24", "link": "https://stackoverflow.com/users/9016205/sebseb24"}, "edited": false, "score": 1, "creation_date": 1515102466, "post_id": 47804728, "comment_id": 83183679, "body": "@sebseb24  You need to downgrade to NDK r15.  See this answer (and specifically the link in the comment to the list of releases):  <a href=\"https://stackoverflow.com/a/41989108/1172714\">stackoverflow.com/a/41989108/1172714</a>"}, {"owner": {"reputation": 111, "user_id": 12100652, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCm1OPYKPf3IeUhtn3AZc6O07XVAjdzkcdxPD-06A=k-s128", "display_name": "KARUNESH PALEKAR", "link": "https://stackoverflow.com/users/12100652/karunesh-palekar"}, "edited": false, "score": 0, "creation_date": 1598721586, "post_id": 47804728, "comment_id": 112553904, "body": "I have the above issue can anyone help me with this?"}], "tags": [], "owner": {"reputation": 205, "user_id": 9096461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff9ccc30365b98b6beccd7e1eb4890b?s=128&d=identicon&r=PG&f=1", "display_name": "ystreet00", "link": "https://stackoverflow.com/users/9096461/ystreet00"}, "is_accepted": true, "score": 6, "last_activity_date": 1513216017, "creation_date": 1513216017, "answer_id": 47804728, "question_id": 47559161, "link": "https://stackoverflow.com/questions/47559161/android-studio-jni-h-not-found/47804728#47804728", "title": "Android studio ; jni.h not found", "body": "<p>This is potentially a problem with the r16 changes in the Android NDK which are fixed upstream by the following <a href=\"https://cgit.freedesktop.org/gstreamer/cerbero/commit/?id=b6d1bdf6b7778fdcce921b4e0fd783ae289fb5b1\" rel=\"noreferrer\">commit</a></p>\n\n<p>The problem is that the NDK moved the header files around into a <a href=\"https://android.googlesource.com/platform/ndk/+/master/docs/UnifiedHeaders.md\" rel=\"noreferrer\">unified structure</a> and thus broke any user expecting headers in the old locations.</p>\n"}, {"comments": [{"owner": {"reputation": 604, "user_id": 3281180, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6NneQ.jpg?s=128&g=1", "display_name": "Questionmark", "link": "https://stackoverflow.com/users/3281180/questionmark"}, "edited": false, "score": 0, "creation_date": 1527879841, "post_id": 50636991, "comment_id": 88310075, "body": "I get that you can downgrade, but what about fixing your app/NDK installation so that you can use the current versions?"}, {"owner": {"reputation": 320, "user_id": 5213931, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TOiiUPVy_Ok/AAAAAAAAAAI/AAAAAAAAAFE/AbVsebLAEB0/photo.jpg?sz=128", "display_name": "Kartik Maheshwari", "link": "https://stackoverflow.com/users/5213931/kartik-maheshwari"}, "reply_to_user": {"reputation": 604, "user_id": 3281180, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6NneQ.jpg?s=128&g=1", "display_name": "Questionmark", "link": "https://stackoverflow.com/users/3281180/questionmark"}, "edited": false, "score": 0, "creation_date": 1527927955, "post_id": 50636991, "comment_id": 88320070, "body": "@Questionmark yes you are write but some time your system not  support newer version. <a href=\"https://android-developers.googleblog.com/2017/09/introducing-android-native-development.html\" rel=\"nofollow noreferrer\">Here</a> you can find requirement for v16 and map with your system ."}], "tags": [], "owner": {"reputation": 320, "user_id": 5213931, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TOiiUPVy_Ok/AAAAAAAAAAI/AAAAAAAAAFE/AbVsebLAEB0/photo.jpg?sz=128", "display_name": "Kartik Maheshwari", "link": "https://stackoverflow.com/users/5213931/kartik-maheshwari"}, "is_accepted": false, "score": 3, "last_activity_date": 1527833072, "creation_date": 1527833072, "answer_id": 50636991, "question_id": 47559161, "link": "https://stackoverflow.com/questions/47559161/android-studio-jni-h-not-found/50636991#50636991", "title": "Android studio ; jni.h not found", "body": "<p>This is due to Android Studio updating/installing to NDK_r16, which deprecated GCC support. Try reverting to NDK_r15c.</p>\n\n<p>Download r15c from <a href=\"https://developer.android.com/ndk/downloads/older_releases.html\" rel=\"nofollow noreferrer\">https://developer.android.com/ndk/downloads/older_releases.html</a>, then point the app's NDK Location to the extracted folder.</p>\n"}], "owner": {"reputation": 190, "user_id": 9016205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8be622071c9822a5e62bc69f54819ae6?s=128&d=identicon&r=PG&f=1", "display_name": "sebseb24", "link": "https://stackoverflow.com/users/9016205/sebseb24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5807, "favorite_count": 1, "accepted_answer_id": 47804728, "answer_count": 3, "score": 15, "last_activity_date": 1527833072, "creation_date": 1511979050, "last_edit_date": 1511981396, "question_id": 47559161, "link": "https://stackoverflow.com/questions/47559161/android-studio-jni-h-not-found", "title": "Android studio ; jni.h not found", "body": "<p>I'm trying to build a GStreamer app using Android Studio on windows using the tutorials on their website, but, as already mentioned in other questions, the tutorials are not up-to-date nor seems to work on Android Studio.  I've followed the tutorial proposed by <strong>Eduardo Fernando</strong> at :\n <a href=\"https://stackoverflow.com/questions/45044210/gstreamer-examples-in-android-studio/46223465#46223465\">Gstreamer examples in Android Studio</a>, but it won't build since I can't manage to fix the issue of the jni.h file not found.</p>\n\n<pre><code>&gt; Build command failed.\nError while executing process \nC:\\Users\\spomerleau\\AppData\\Local\\Android\\Sdk\\ndk-bundle\\ndk-build.cmd with \narguments {NDK_PROJECT_PATH=null \n\nAPP_BUILD_SCRIPT=C:\\Users\\spomerleau\\Desktop\\Android_GSTreamer\\Premade_Test_tut5\\android-tutorial-5\\app\\src\\main\\jni\\Android.mk NDK_APPLICATION_MK=C:\\Users\\spomerleau\\Desktop\\Android_GSTreamer\\Premade_Test_tut5\\android-tutorial-5\\app\\src\\main\\jni\\Application.mk APP_ABI=arm64-v8a NDK_ALL_ABIS=arm64-v8a NDK_DEBUG=1 APP_PLATFORM=android-21 NDK_OUT=C:/Users/spomerleau/Desktop/Android_GSTreamer/Premade_Test_tut5/android-tutorial-5/app/build/intermediates/ndkBuild/debug/obj NDK_LIBS_OUT=C:\\Users\\spomerleau\\Desktop\\Android_GSTreamer\\Premade_Test_tut5\\android-tutorial-5\\app\\build\\intermediates\\ndkBuild\\debug\\lib C:/Users/spomerleau/Desktop/Android_GSTreamer/Premade_Test_tut5/android-tutorial-5/app/build/intermediates/ndkBuild/debug/obj/local/arm64-v8a/libtutorial-5.so}\n  GStreamer      : [GEN] =&gt; gst-build-arm64-v8a/gstreamer_android.c\n  GStreamer      : [COMPILE] =&gt; gst-build-arm64-v8a/gstreamer_android.c\n  gst-build-arm64-v8a/gstreamer_android.c:1:10: fatal error: 'jni.h' file not found\n  #include &lt;jni.h&gt;\n           ^~~~~~~\n  1 error generated.\n  make: *** [gst-build-arm64-v8a/gstreamer_android.o] Error 1\n</code></pre>\n\n<p>I executed the javah command, but the generated  .h cannot find the #include  either.  </p>\n\n<p>I tried the ndk-build command, but it will stop saying the jni.h file is missing. </p>\n\n<p>Any advices on how I could link the jni.h file to the project?  </p>\n"}, {"tags": ["c++", "constructor", "language-lawyer", "destructor"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1511978688, "post_id": 47559033, "comment_id": 82075807, "body": "<i>&quot;What is context in default constructor for members destructor calling? c++ constructor destructor delete-operator &quot;</i> <code>Part part;</code> of course. And it&#39;s not really the context of the default constructor."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1511978814, "post_id": 47559033, "comment_id": 82075882, "body": "Why is <code>Part::~Part()</code> deleted?"}, {"owner": {"reputation": 2294, "user_id": 3514538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba20c696a992c58c4e7e5c1fe63b84e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3514538", "link": "https://stackoverflow.com/users/3514538/user3514538"}, "edited": false, "score": 0, "creation_date": 1511978934, "post_id": 47559033, "comment_id": 82075935, "body": "if I comment &quot;CL(){}&quot;, the code compiles fine. Apparently, this is the case in default ctor"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1511979042, "post_id": 47559033, "comment_id": 82075986, "body": "&quot;Apparently, this is the case in default ctor&quot; no it is not, it is called from <code>~CL()</code>"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1511979308, "post_id": 47559033, "comment_id": 82076121, "body": "Is this question about why the error is occurring at all or about why the compiler has this error about the <code>CL::CL()</code> definition?"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1511979371, "post_id": 47559033, "comment_id": 82076146, "body": "@Kevin <i>&quot;... or about why the compiler has this error ...&quot;</i> In that case the specific compiler should be mentioned in the question or the tags."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1511979399, "post_id": 47559033, "comment_id": 82076157, "body": "Is this related to the fact that constructors have to destroy the initialized members in case of exception?"}, {"owner": {"reputation": 2294, "user_id": 3514538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba20c696a992c58c4e7e5c1fe63b84e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3514538", "link": "https://stackoverflow.com/users/3514538/user3514538"}, "edited": false, "score": 0, "creation_date": 1511979420, "post_id": 47559033, "comment_id": 82076163, "body": "I has updated example, and the error happens without any local objects. P.S: This is simplified example, the real problem is more complex"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1511979522, "post_id": 47559033, "comment_id": 82076215, "body": "@user3514538 -- <i>real problem is more complex</i> -- Why would it be more complex?  Any compiler error can be duplicated with at most, a couple of dummy classes and a few lines of code."}, {"owner": {"reputation": 2294, "user_id": 3514538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba20c696a992c58c4e7e5c1fe63b84e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3514538", "link": "https://stackoverflow.com/users/3514538/user3514538"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1511979668, "post_id": 47559033, "comment_id": 82076284, "body": "@PaulMcKenzie, this is just that example with dummy classes :)"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1511979695, "post_id": 47559033, "comment_id": 82076292, "body": "Not any action the language allows you is logical."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511979823, "post_id": 47559033, "comment_id": 82076356, "body": "FWIW making the constructor <code>noexcept</code> has no effect while making it <code>= default</code> removes the error. Tested with gcc 7.2 and VS2015."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1511979828, "post_id": 47559033, "comment_id": 82076359, "body": "@user3514538 <a href=\"http://coliru.stacked-crooked.com/a/c9911ff72275c9c7\" rel=\"nofollow noreferrer\">Well, I see what you mean</a>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511979937, "post_id": 47559033, "comment_id": 82076412, "body": "Perhaps this question needs the language lawyer tag."}, {"owner": {"reputation": 2294, "user_id": 3514538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba20c696a992c58c4e7e5c1fe63b84e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3514538", "link": "https://stackoverflow.com/users/3514538/user3514538"}, "edited": false, "score": 0, "creation_date": 1511980306, "post_id": 47559033, "comment_id": 82076607, "body": "It seems that I know the reason of error: if constructor throws an exception, the destructors of all members must be called, so they (destructors) must be callable"}, {"owner": {"reputation": 134, "user_id": 8599142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fa460d1b8eb70cd862ac0dfdaff807a?s=128&d=identicon&r=PG&f=1", "display_name": "organicoman", "link": "https://stackoverflow.com/users/8599142/organicoman"}, "edited": false, "score": 0, "creation_date": 1511980432, "post_id": 47559033, "comment_id": 82076660, "body": "at class <code>CL</code> compile time, the compiler registers the constructors and destructors of the class member variables, and since <code>~Part()=delete</code> then it cannot create the class <code>CL</code> because it doesn&#39;t know how to destroy it, or more precisely <b>its destruction is incomplete</b>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511980509, "post_id": 47559033, "comment_id": 82076703, "body": "@user3514538 I mentioned that in an earlier comment. However, if that&#39;s actually the case, why does <code>CL() = default;</code> compile fine, even if you change <code>Part</code>&#39;s constructor to <code>Part() noexcept(false) {};</code>?"}, {"owner": {"reputation": 2294, "user_id": 3514538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba20c696a992c58c4e7e5c1fe63b84e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3514538", "link": "https://stackoverflow.com/users/3514538/user3514538"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511980703, "post_id": 47559033, "comment_id": 82076796, "body": "@Fran&#231;ois Andrieux, ops, I did not notice that, but anyway, the reason is not in exceptions, in this case"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511981395, "post_id": 47559033, "comment_id": 82077109, "body": "@user3514538 It looks like <code>CL() = default;</code> actually deletes <code>CL::CL</code>."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1512014598, "post_id": 47560249, "comment_id": 82089286, "body": "CL has a deleted constructor because of [special]/4: having a potentially constructed subobject with inaccessible/deleted destructor"}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 2, "last_activity_date": 1511983336, "creation_date": 1511983336, "answer_id": 47560249, "question_id": 47559033, "link": "https://stackoverflow.com/questions/47559033/members-destructor-calling-from-default-constructor/47560249#47560249", "title": "Member&#39;s destructor calling from default constructor", "body": "<p>Every constructor needs to have access to it's members' destructors. When a constructor throws an exception, it must be able to destroy every member that was initialized before the exception was thrown. You can verify that this is true for every constructor. If you try adding arbitrary arguments to the constructor, the error still occurs, even with copy and move constructors.</p>\n\n<p>As it was mentioned in the comments, <code>CL() = default;</code> doesn't produce the error. This is because <code>CL() = default;</code> simply causes the compiler to produce the implicit default constructor it would normally generate. In this case, it appears the CL has a <a href=\"http://en.cppreference.com/w/cpp/language/default_constructor#Deleted_implicitly-declared_default_constructor\" rel=\"nofollow noreferrer\">deleted implicitly-declared default constructor</a>, meaning the automatically generated implicit default constructor would be deleted. If you try the following, you see that the default constructor is not actually available :</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\nclass Part\n{\npublic:\n    ~Part() = delete;\n};\n\nclass CL\n{\npublic:\n    CL() = default;\n    ~CL();\n    Part part;\n};\n\n// This assert passes\nstatic_assert(std::is_default_constructible&lt;CL&gt;::value == false, \"\");\n</code></pre>\n\n<p>However, I can't explain precisely <em>why</em> CL has a deleted implicitly-declared default constructor, nor can I explain why <code>CL() noexcept {};</code> doesn't work.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1512014443, "post_id": 47565432, "comment_id": 82089241, "body": "Regarding the final paragraph, <i>potentially invoked</i> is a somewhat academic term, since there is no actual way that calling this particular constructor would invoke the destructor"}], "tags": [], "owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "is_accepted": false, "score": 1, "last_activity_date": 1512012608, "creation_date": 1512012608, "answer_id": 47565432, "question_id": 47559033, "link": "https://stackoverflow.com/questions/47559033/members-destructor-calling-from-default-constructor/47565432#47565432", "title": "Member&#39;s destructor calling from default constructor", "body": "<p>First, <code>Part</code> is a <em>potentially constructed subobject</em> of <code>CL</code> according to <a href=\"http://www.eel.is/c++draft/special#5\" rel=\"nofollow noreferrer\">[special]p5</a>.</p>\n\n<blockquote>\n  <p>For a class, its non-static data members, its non-virtual direct base classes, and, if the class is not abstract, its virtual base classes are called its <em>potentially constructed subobjects</em>.</p>\n</blockquote>\n\n<p>So the destructor for <code>Part</code> is <em>potentially invoked</em> according to <a href=\"http://www.eel.is/c++draft/special#class.base.init-12\" rel=\"nofollow noreferrer\">[class.base.init]p12</a>, regardless of the existence of <code>nonexcept</code> or not. </p>\n\n<blockquote>\n  <p>In a non-delegating constructor, the destructor for each potentially constructed subobject of class type is potentially invoked.</p>\n</blockquote>\n\n<p>Therefore the program is ill-formed according to <a href=\"http://www.eel.is/c++draft/class.dtor#12\" rel=\"nofollow noreferrer\">[class.dtor]p12</a>.</p>\n\n<blockquote>\n  <p>A program is ill-formed if a destructor that is potentially invoked is deleted or not accessible from the context of the invocation.</p>\n</blockquote>\n\n<p>Note even though the deleted destructor is not actually invoked, the program is ill-formed as long as the destructor is <strong>potentially</strong> invoked.</p>\n"}], "owner": {"reputation": 2294, "user_id": 3514538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba20c696a992c58c4e7e5c1fe63b84e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3514538", "link": "https://stackoverflow.com/users/3514538/user3514538"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 47560249, "answer_count": 2, "score": 1, "last_activity_date": 1512041495, "creation_date": 1511978610, "last_edit_date": 1511980794, "question_id": 47559033, "link": "https://stackoverflow.com/questions/47559033/members-destructor-calling-from-default-constructor", "title": "Member&#39;s destructor calling from default constructor", "body": "<pre><code>class Part\n{\npublic:\n    ~Part() = delete;\n};\n\nclass CL\n{\npublic:\n    CL(){} //error: deleted destructor call\n    ~CL();\n    Part part;\n};\n\nint main()\n{\n}\n</code></pre>\n\n<p>This code gives an error associated with a <code>Part</code>'s deleted destructor call. What is context in default constructor for members destructor calling?</p>\n\n<p>P.S: As I know, destructor for a <code>Part</code> member must be called in <code>~CL()</code>, but it is specially not defined for demonstrating, that default constructor forces it anywhere</p>\n"}, {"tags": ["c++", "windows", "dll"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1511978517, "post_id": 47558993, "comment_id": 82075713, "body": "Are you mixing debug and release? <code>&#47;MDd</code> is used for debug. <code>&#47;MD</code> for release. If you mix debug and release you will likely corrupt the heap since the debug heap is incompatible with the release heap."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1511979013, "post_id": 47558993, "comment_id": 82075969, "body": "The debug CRT uses a different allocator, it provides better diagnostics.  VS versions before 2012 created their own heap.  So sure, this is all supposed to not work well.  You do have the goody that avoids these problems strongly, you can create a solution in VS that has both projects.  Which trivially lets you build and test these projects with their settings in sync, easy peasy.  Not taking advantage of it is a big mistake."}], "answers": [{"comments": [{"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 0, "creation_date": 1511980147, "post_id": 47559159, "comment_id": 82076531, "body": "Or use an allocation pair like CoTaskMemAlloc/CoTaskMemFree that is specifically intended for cross-module use."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1511979047, "creation_date": 1511979047, "answer_id": 47559159, "question_id": 47558993, "link": "https://stackoverflow.com/questions/47558993/deleting-mdd-s-dll-memory-from-md-exe-file-causes-heap-corruption/47559159#47559159", "title": "deleting /MDd &#39;s DLL memory from /MD Exe file causes heap corruption", "body": "<blockquote>\n  <p>I want to delete exe's allocated memory from dll.</p>\n</blockquote>\n\n<p>That's not a good idea. It's better to leave the code memory allocation and the corresponding deallocation in either the EXE or the DLL.</p>\n\n<p>Even if the EXE and the DLL are both of the same build type (debug/release), you should not deallocate memory in one when it is allocated in the other.</p>\n\n<p>If you allocate and deallocate memory in the same unit, i.e. the EXE or the DLL, you should be able to mix debug and non-debug versions without running into the memory corruption issue.</p>\n"}], "owner": {"reputation": 97, "user_id": 1610926, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97e09a1aaafa3627a366c7ce1ef566c9?s=128&d=identicon&r=PG", "display_name": "nolleh", "link": "https://stackoverflow.com/users/1610926/nolleh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1511979047, "creation_date": 1511978440, "question_id": 47558993, "link": "https://stackoverflow.com/questions/47558993/deleting-mdd-s-dll-memory-from-md-exe-file-causes-heap-corruption", "title": "deleting /MDd &#39;s DLL memory from /MD Exe file causes heap corruption", "body": "<p>I want to delete exe's allocated memory from dll.</p>\n\n<p>when I test.. </p>\n\n<ol>\n<li>Exe : /MD , DLL : /MDd => HeapCorruption. </li>\n<li>Exe : /MD , DLL : /MD  => work's well, as long as when I see.</li>\n</ol>\n\n<p>even LocalAlloc makes same result...  </p>\n\n<p>as long as I know, multi-thread-dll crt is using same heap memory.\ncould you tell me why the case 1 test is always heap corrupt ?</p>\n\n<p>and, How Can I fix this?.</p>\n\n<p>-- addition.<br>\nofcourse It is best, restricting allocation / deallcation in same place. </p>\n\n<p>but my prob is.. \nthe size is first visible from exe file, but dll needs to using the memory by output parameter.\n- querying size / then getting buffer is not that I want (too complicate, for dll user.)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1809, "user_id": 770302, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6ph2.png?s=128&g=1", "display_name": "Daniel A. Thompson", "link": "https://stackoverflow.com/users/770302/daniel-a-thompson"}, "edited": false, "score": 0, "creation_date": 1511977968, "post_id": 47558823, "comment_id": 82075361, "body": "Please edit your post to include the contents of your <code>objects</code> and <code>robot</code> classes."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 2, "creation_date": 1511977979, "post_id": 47558823, "comment_id": 82075374, "body": "if <code>robot</code> derives from <code>objects</code> and only <code>objects</code> has <code>x</code> and <code>y</code>, the <code>robot</code> only has once instance of <code>x</code> and <code>y</code>. To answer the title question - it does not"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1511978315, "post_id": 47558823, "comment_id": 82075576, "body": "A base knows nothing about those that derive from it. Think about the non-causal behaviour that would require."}], "answers": [{"comments": [{"owner": {"reputation": 569, "user_id": 1838230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTckL.jpg?s=128&g=1", "display_name": "ZWang", "link": "https://stackoverflow.com/users/1838230/zwang"}, "edited": false, "score": 0, "creation_date": 1512153289, "post_id": 47560044, "comment_id": 82157337, "body": "Very useful! THank you"}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 1, "last_activity_date": 1511985147, "last_edit_date": 1592644375, "creation_date": 1511982525, "answer_id": 47560044, "question_id": 47558823, "link": "https://stackoverflow.com/questions/47558823/how-does-a-base-class-know-the-attributes-of-its-derived-class/47560044#47560044", "title": "How does a base class know the attributes of it&#39;s derived class", "body": "<p>A base class is an abstraction of the more more specialized classes that follow. As a result a base knows nothing, and has no need to know, about those that derive from it. All any class knows is itself and what the classes on which it is based make available to it.</p>\n<p>In addition, the C++ build process makes it impossible to know all possible permutations of future child classes. It would have to know about code that may not have been written yet or be in other modules that may or may not be linked in later or at runtime.</p>\n<p>To manipulate a base class's members through a subclass most of the time you don't have to do anything. For <code>public</code> and <code>protected</code> variables what's in the base class is accessible in the subclass. <code>private</code> data is off limits, as usual (but look up <code>friend</code>ship).</p>\n<p>If the base class has an <code>int x</code></p>\n<pre><code>x = 24;\n</code></pre>\n<p>will do the job for most cases.</p>\n<p>This only becomes a problem if both the base and the subclass have a variable of the same name.</p>\n<p>Time for some code:</p>\n<pre><code>#include &lt;iostream&gt;\nstruct object // using struct because it defaults to public access. \n              // This makes for a simpler example\n{\n    int x;\n    int y;\n};\n\nstruct robot:public object\n{\n    int x; // variable hides the x in object\n    int y;\n\n    void print()\n    {\n        std::cout &lt;&lt; &quot;robot: &quot; &lt;&lt; x &lt;&lt; ',' &lt;&lt; object::x &lt;&lt; '\\n'; \n        // to access object's x we must ask for it explicitly\n    }\n};\n\nstruct betterrobot:public object\n{\n    void print()\n    {\n        std::cout &lt;&lt; &quot;better robot: &quot; &lt;&lt; x &lt;&lt; ',' &lt;&lt; object::x &lt;&lt; '\\n';\n    }\n};\nint main() {\n\n    robot rob;\n    rob.x = 24; // set robot's x\n    rob.object::x = 42; // set object's x\n    rob.print();\n\n    betterrobot rob2;\n    rob2.x = 24;\n    rob2.print();\n\n    return 0;\n}\n</code></pre>\n<p>Output:</p>\n<blockquote>\n<p>robot: 24,42</p>\n<p>better robot: 24,24</p>\n</blockquote>\n<p><code>Object</code> and <code>robot</code> have their own <code>x</code> and <code>y</code>. <code>object</code>'s <code>x</code> can be reached through <code>robot</code> by explicitly requesting it</p>\n<pre><code>rob.object::x = 42;\n</code></pre>\n<p>In the output, printing <code>x</code> and <code>object::x</code> gave different answers. If you only</p>\n<pre><code>rob.x = 24;\n</code></pre>\n<p>a smart compiler will scream at you for not initializing <code>object::x</code> as soon as it sees the <code>robot::print</code> method. If it doesn't, happy debugging!</p>\n<p>This is something you rarely want to do because it wreaks havoc on the brain. You have two <code>x</code>s, and when you are working on polymprphic objects (Note: no polymorphic objects in example to keep things simple) it's really easy to screw up and set the wrong <code>x</code>. Don't do this unless there is no way to avoid it.</p>\n<p>It is almost always better to inherit and use the base class's variable to avoid confusion. This is what <code>betterrobot</code> does. <code>betterrobot</code> only has <code>object</code>'s <code>x</code> and <code>y</code>. There is no possibility for confusion.</p>\n<pre><code>rob2.x = 24;\n</code></pre>\n<p>is all there is. In the output, printing <code>x</code> and <code>object::x</code> gave the same answer.</p>\n<p>You can move <code>betterrobot</code> around like you can any other <code>object</code>. Functions in <code>object</code>, <code>move</code> for example can be used to move <code>betterrobot</code> around on the map. No special magic is required.</p>\n"}], "owner": {"reputation": 569, "user_id": 1838230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTckL.jpg?s=128&g=1", "display_name": "ZWang", "link": "https://stackoverflow.com/users/1838230/zwang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 1, "accepted_answer_id": 47560044, "answer_count": 1, "score": -4, "last_activity_date": 1548674627, "creation_date": 1511977878, "last_edit_date": 1548674627, "question_id": 47558823, "link": "https://stackoverflow.com/questions/47558823/how-does-a-base-class-know-the-attributes-of-its-derived-class", "title": "How does a base class know the attributes of it&#39;s derived class", "body": "<p>Hi I'm having trouble with this problem logically and need some help. What I have set up is a base class named 'objects' and a derived class named 'robot'. I've created an instance of the 'robot' in another class 'game', which includes 'robot' (through pointers). So the line of code I have for that is</p>\n\n<pre><code>robot* rob = new robot(int x, int y)\n</code></pre>\n\n<p>where position is an attribute of the class robot. In my 'objects' class I have Get and Set functions for the x and y coordinate, as the x and y coordinates are set as private.</p>\n\n<p>Now, I understand that class 'robot' can access and update it's own x and y coordinates. Is it possible to include and even change x and y in the 'objects' class? The way I was thinking on doing this was to create a member of 'game' in 'objects' and change the position of 'robot' in 'objects'. But as 'rob' is passed as a reference to 'objects', can it still change the x and y coordinates? Even after then, how does 'game' know the new position of 'rob'?</p>\n\n<p>EDIT: solved by user below</p>\n"}, {"tags": ["android", "c++", "opencv", "android-ndk", "java-native-interface"], "owner": {"reputation": 187, "user_id": 7644020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/92c10cbb8baf1eb57cd6ccb52c89c678?s=128&d=identicon&r=PG&f=1", "display_name": "poppy", "link": "https://stackoverflow.com/users/7644020/poppy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1511988393, "creation_date": 1511977853, "last_edit_date": 1511988393, "question_id": 47558811, "link": "https://stackoverflow.com/questions/47558811/c-opencv-android-ndk-failure-to-rotate-mat-in-place", "title": "C++, OpenCv, Android NDK, Failure to Rotate Mat in Place", "body": "<p>I am trying to use OpenCv's roate() function to rotate a 3:4 Mat in place. My function call is as follows....</p>\n\n<pre><code>extern \"C\"\nJNIEXPORT void JNICALL\nJava_com_company_example_camera_CaptureActivity_getResultMat\n        (JNIEnv *env,\n         jobject instance,\n         jlong mat, jint width,\n         jint height)\n{\n    Mat&amp; inputMat = *(Mat*) mat;\n    cv::rotate(inputMat, inputMat, 0);\n\n    //attemping to resize after rotate gives me a similar error...\n    //Mat outputMat(inputMat.rows, inputMat.cols, inputMat.type());\n    //cv::resize(inputMat, outputMat, outputMat.size());\n    //inputMat = outputMat;\n}\n</code></pre>\n\n<p>I call this function from the following overridden OpenCv function...</p>\n\n<pre><code>@Override\npublic Mat onCameraFrame(CameraBridgeViewBase.CvCameraViewFrame inputFrame) {\n    Mat mat = inputFrame.rgba();\n    getResultMat(mat.getNativeObjAddr(), 500, 500); \n    return mat;\n}\n</code></pre>\n\n<p>The resulting camera frame is completely black. When I look in the log, I see the following error...</p>\n\n<pre><code>com.company.example.camera E/cv::error(): OpenCV Error: Assertion failed (src.dims == 2 &amp;&amp; info.height == (uint32_t)src.rows &amp;&amp; info.width == (uint32_t)src.cols) in void Java_org_opencv_android_Utils_nMatToBitmap2(JNIEnv*, jclass, jlong, jobject, jboolean), file /build/master_pack-android/opencv/modules/java/generator/src/cpp/utils.cpp, line 97\n11-29 02:14:08.501 26116-26571/com.company.example.camera E/org.opencv.android.Utils: nMatToBitmap catched cv::Exception: /build/master_pack-android/opencv/modules/java/generator/src/cpp/utils.cpp:97: error: (-215) src.dims == 2 &amp;&amp; info.height == (uint32_t)src.rows &amp;&amp; info.width == (uint32_t)src.cols in function void Java_org_opencv_android_Utils_nMatToBitmap2(JNIEnv*, jclass, jlong, jobject, jboolean)\n11-29 02:14:08.501 26116-26571/com.company.example.camera E/CameraBridge: Mat type: Mat [ 960*720*CV_8UC4, isCont=true, isSubmat=false, nativeObj=0x7f7f659fc0, dataAddr=0x7f5aa80000 ]\n11-29 02:14:08.501 26116-26571/com.company.example.camera E/CameraBridge: Bitmap type: 960*720\n11-29 02:14:08.501 26116-26571/com.company.example.camera E/CameraBridge: Utils.matToBitmap() throws an exception: /build/master_pack-android/opencv/modules/java/generator/src/cpp/utils.cpp:97: error: (-215) src.dims == 2 &amp;&amp; info.height == (uint32_t)src.rows &amp;&amp; info.width == (uint32_t)src.cols in function void Java_org_opencv_android_Utils_nMatToBitmap2(JNIEnv*, jclass, jlong, jobject, jboolean)\n</code></pre>\n\n<p>and for resize...</p>\n\n<pre><code>E/cv::error(): OpenCV Error: Assertion failed (src.dims == 2 &amp;&amp; info.height == (uint32_t)src.rows &amp;&amp; info.width == (uint32_t)src.cols) in void Java_org_opencv_android_Utils_nMatToBitmap2(JNIEnv*, jclass, jlong, jobject, jboolean), file /build/master_pack-android/opencv/modules/java/generator/src/cpp/utils.cpp, line 97\n11-29 15:39:47.801 8916-9365/com.company.example.camera E/org.opencv.android.Utils: nMatToBitmap catched cv::Exception: /build/master_pack-android/opencv/modules/java/generator/src/cpp/utils.cpp:97: error: (-215) src.dims == 2 &amp;&amp; info.height == (uint32_t)src.rows &amp;&amp; info.width == (uint32_t)src.cols in function void Java_org_opencv_android_Utils_nMatToBitmap2(JNIEnv*, jclass, jlong, jobject, jboolean)\n11-29 15:39:47.801 8916-9365/com.company.example.camera E/CameraBridge: Mat type: Mat [ 500*500*CV_8UC4, isCont=true, isSubmat=false, nativeObj=0x7f6d591140, dataAddr=0x7f5cfc0000 ]\n11-29 15:39:47.801 8916-9365/com.company.example.camera E/CameraBridge: Bitmap type: 960*720\n11-29 15:39:47.801 8916-9365/com.company.example.camera E/CameraBridge: Utils.matToBitmap() throws an exception: /build/master_pack-android/opencv/modules/java/generator/src/cpp/utils.cpp:97: error: (-215) src.dims == 2 &amp;&amp; info.height == (uint32_t)src.rows &amp;&amp; info.width == (uint32_t)src.cols in function void Java_org_opencv_android_Utils_nMatToBitmap2(JNIEnv*, jclass, jlong, jobject, jboolean)\n</code></pre>\n\n<p>To me, this suggests that there is some sort of logic error, but I'm pretty sure that I have used the rotate and resize functions properly. Further, I know the input mat is being correctly passed to the native function - when I do direct pixel manipulation everything works as I expect it to. </p>\n"}, {"tags": ["c++", "objective-c", "nsmutabledictionary", "stdmap"], "answers": [{"tags": [], "owner": {"reputation": 11198, "user_id": 8798729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cimg2.jpg?s=128&g=1", "display_name": "trungduc", "link": "https://stackoverflow.com/users/8798729/trungduc"}, "is_accepted": true, "score": 1, "last_activity_date": 1511979674, "last_edit_date": 1511979674, "creation_date": 1511978153, "answer_id": 47558897, "question_id": 47558681, "link": "https://stackoverflow.com/questions/47558681/difference-between-access-operator-of-nsmutabledictionary-and-stdmap/47558897#47558897", "title": "Difference between access operator of NSMutableDictionary and std::map", "body": "<p>I think the answer is <strong>NO</strong>. You can check it by the below code.</p>\n\n<pre><code>int main(int argc, char * argv[]) {\n  @autoreleasepool {\n    NSMutableDictionary&lt;NSNumber *, NSString *&gt; *D = [NSMutableDictionary new];\n    D[@10] = @\"ten\";\n    NSLog(@\"%@\", D); // { 10 = ten; } logged\n    if (D[@1] == nil) // will it create an entry for D[@1]?\n      NSLog(@\"%@\", D); // { 10 = ten; } logged. @1 key doesn't exist\n  }\n}\n</code></pre>\n\n<p>Beside of it, you should take a look at Apple document for <a href=\"https://developer.apple.com/documentation/foundation/nsdictionary/1414347-objectforkey\" rel=\"nofollow noreferrer\">objectForKey:</a> method.</p>\n\n<blockquote>\n  <p>The value associated with aKey, or nil if no value is associated with aKey.</p>\n</blockquote>\n\n<p><code>D[@1]</code> is syntax sugar of <code>[D objectForKey:@1]</code>. So according to the document, it will return nil if no value is associated with key <code>1</code>. That's why <code>D[@1] == nil</code></p>\n"}], "owner": {"reputation": 26593, "user_id": 811335, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ca588e5bfb1ac0a5d8ec8acb422aa564?s=128&d=identicon&r=PG", "display_name": "A. K.", "link": "https://stackoverflow.com/users/811335/a-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 47558897, "answer_count": 1, "score": 0, "last_activity_date": 1511979674, "creation_date": 1511977388, "question_id": 47558681, "link": "https://stackoverflow.com/questions/47558681/difference-between-access-operator-of-nsmutabledictionary-and-stdmap", "title": "Difference between access operator of NSMutableDictionary and std::map", "body": "<p>Does objective-c create a new entry when the key is not in the dictionary but accessed? Like in std::map operator[].</p>\n\n<pre><code>int main(int argc, const char * argv[]) {\n    @autoreleasepool {\n        NSMutableDictionary&lt;NSNumber *, NSString *&gt; *D = [NSMutableDictionary new];\n        D[@10] = @\"ten\";\n        if (D[@1] == nil) // will it create an entry for D[@1]?\n          NSLog(@\"Found with nil\");\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-6"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1511977286, "post_id": 47558572, "comment_id": 82074932, "body": "<code>append</code>&#39;s 2 parameter version doesn&#39;t take a <code>string</code>. It expects a character array. Well, that or a repeat count and a single character or a couple iterators, but those are definitely not what you&#39;re after."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 2, "creation_date": 1511977353, "post_id": 47558572, "comment_id": 82074980, "body": "mst2.append(msg.c_str(), 1) should do the job."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1511977543, "post_id": 47558572, "comment_id": 82075085, "body": "I amend previous comment again: <code>msg2.append(msg.begin(), msg.begin()+1);</code> would also work so long as you make sure <code>msg</code> has at least one character. But it&#39;s nasty."}], "owner": {"reputation": 2647, "user_id": 110701, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Xk3Zw.jpg?s=128&g=1", "display_name": "codingguy3000", "link": "https://stackoverflow.com/users/110701/codingguy3000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511978389, "creation_date": 1511977038, "question_id": 47558572, "link": "https://stackoverflow.com/questions/47558572/c-append-function-with-two-arguments-not-working", "title": "C++ append function with two arguments not working", "body": "<p>I'm not a c++ developer but my current project is updating a legacy c++ application. </p>\n\n<p>All throughout the application I see append statements that take two arguments..</p>\n\n<pre><code>strTemp.append( cDollars, len );\n</code></pre>\n\n<p>I'm trying to understand the C++ language and how it is implemented in this legacy application. </p>\n\n<p>I'm stuck on the append function. </p>\n\n<p>I can get it to work with a three arguments..</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main(){\n\n   string msg = \"Hi There!\";\n   string msg2;\n\n   msg2.append(msg,0, 2);\n\n   cout &lt;&lt; msg2;\n   cout &lt;&lt; \"\\n\";\n   system(\"pause\");\n   return 0;\n}\n</code></pre>\n\n<p>This returns...</p>\n\n<pre><code>Hi\nPress any key to continue . . .\n</code></pre>\n\n<p>I can get append to work with a single argument..</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main(){\n\n   string msg = \"Hi There!\";\n   string msg2;\n\n   msg2.append(msg);\n\n   cout &lt;&lt; msg2;\n   cout &lt;&lt; \"\\n\";\n   system(\"pause\");\n   return 0;\n}\n</code></pre>\n\n<p>This returns...</p>\n\n<pre><code>Hi There!\nPress any key to continue . . .\n</code></pre>\n\n<p>The problem is that I can't get this to work with a two arguments...</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main(){\n\n   string msg = \"Hi There!\";\n   string msg2;\n\n   msg2.append(msg, 1);\n\n   cout &lt;&lt; msg2;\n   cout &lt;&lt; \"\\n\";\n   system(\"pause\");\n   return 0;\n}\n\n--------------------Configuration: Program - Win32 Debug--------------------\nCompiling...\nProgram.cpp\nC:\\USERS\\E1009028\\DOCUMENTS\\VISUAL STUDIO 6 PROJECTS\\SCRATCH\\Program\\Program.cpp(11) : error C2664: 'class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; &amp;__thiscall std::basic_string&lt;char,struct std::char_traits&lt;c\nhar&gt;,class std::allocator&lt;char&gt; &gt;::append(const char *,unsigned int)' : cannot convert parameter 1 from 'class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;' to 'const char *'\n        No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called\nError executing cl.exe.\n\nProgram.exe - 1 error(s), 0 warning(s)\n</code></pre>\n\n<p>This is Visual Studio 6 (did I mention the legacy application?). </p>\n\n<p>Can anyone tell me what I'm missing? </p>\n\n<p>Thanks,</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1511976370, "post_id": 47558290, "comment_id": 82074420, "body": "It&#39;s not &quot;dumb.&quot; Don&#39;t just add words, add actual details. Define &quot;does not work&quot; - what does it do and what did you want it to do? Please also read what constitutes a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"comments": [{"owner": {"reputation": 331, "user_id": 5196322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e166f992244e28fba8d31e1631e4e4?s=128&d=identicon&r=PG&f=1", "display_name": "Trampas", "link": "https://stackoverflow.com/users/5196322/trampas"}, "edited": false, "score": 0, "creation_date": 1512075454, "post_id": 47558843, "comment_id": 82122552, "body": "The weak_ptr did fix the code.   However I found that the smart pointers require a heap (new called internal to smart pointer implementation). I am now debating on if there is a better method for having shared pointers which does not require heap."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 331, "user_id": 5196322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e166f992244e28fba8d31e1631e4e4?s=128&d=identicon&r=PG&f=1", "display_name": "Trampas", "link": "https://stackoverflow.com/users/5196322/trampas"}, "edited": false, "score": 1, "creation_date": 1512120208, "post_id": 47558843, "comment_id": 82137378, "body": "@Trampas it sounds a little like you&#39;re worrying about things that you don&#39;t need to.  For starters, wanting your static variable to be deleted in the way you describe is rare - most people are happy with it being freed after main. Not wanting to use any heap space, is - well, you&#39;re not going to be able to do this create/destroy on demand without doing so."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1512164449, "post_id": 47558843, "comment_id": 82162469, "body": "You can do this by mixing in a <code>std::optional</code> and a custom deleter to the shared_ptr, though I&#39;m baffled as to why you think you want such a thing."}, {"owner": {"reputation": 331, "user_id": 5196322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e166f992244e28fba8d31e1631e4e4?s=128&d=identicon&r=PG&f=1", "display_name": "Trampas", "link": "https://stackoverflow.com/users/5196322/trampas"}, "edited": false, "score": 0, "creation_date": 1512214983, "post_id": 47558843, "comment_id": 82173431, "body": "So on embedded designs I often create a class for a driver, for example a UART.  With low power designs when the UART is enabled the power consumption goes up.  So I wanted to use shared_ptr such that when objects were done with UART it is deleted.   This worked great using shared_ptrs except for two things, first is that smart pointers need heap. Second is when I allocate the UART class I pass new a static address where to place object (again trying to avoid heap allocations).  The issue I have is when newlib deletes the object it sometimes (not all the time) causes a hard fault."}, {"owner": {"reputation": 331, "user_id": 5196322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e166f992244e28fba8d31e1631e4e4?s=128&d=identicon&r=PG&f=1", "display_name": "Trampas", "link": "https://stackoverflow.com/users/5196322/trampas"}, "edited": false, "score": 0, "creation_date": 1512215617, "post_id": 47558843, "comment_id": 82173588, "body": "I should also mention that most embedded designs have a heap, but no real memory management. For example most of my designs if you allocate from heap, it is never freed. That is heap can only grow.  However at the same time most all my designs never use heap as it keeps code deterministic, keep in mind this is code that runs for 20+ years with no reboots, so even a malloc/new of a few bytes will kill you over time, or you have to write a memory manager."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 331, "user_id": 5196322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e166f992244e28fba8d31e1631e4e4?s=128&d=identicon&r=PG&f=1", "display_name": "Trampas", "link": "https://stackoverflow.com/users/5196322/trampas"}, "edited": false, "score": 0, "creation_date": 1512250223, "post_id": 47558843, "comment_id": 82183842, "body": "@Trampas well, if you can&#39;t use the heap because it&#39;s buggy, then the next options you have are:  create your own memory manager so that you remove the memory leak; or 2, just use the stack.  If you&#39;re just using the stack, you can&#39;t just free memory any time you want; that&#39;s not the way it works.  If you want it a static variable, then you have to have it created as a static instance.  I&#39;d probably go with option 1 because not using heap is a fairly serious limitation."}], "tags": [], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "is_accepted": true, "score": 2, "last_activity_date": 1511977946, "creation_date": 1511977946, "answer_id": 47558843, "question_id": 47558290, "link": "https://stackoverflow.com/questions/47558290/singleton-class-with-smart-pointers-and-destructor-being-called/47558843#47558843", "title": "Singleton class with smart pointers and destructor being called", "body": "<p>A std::weak_ptr is what you're looking for.</p>\n\n<p>By changing the instance to be a weak_ptr, it does not count as an owner to the shared pointer; meaning that once all other references have been released the object is destroyed.  That said, it does make your \"Get\" function a little more complex, in that you must attempt to get a shared_ptr from the weak ptr, then on success return it, or on failure create a new one, re-assign instance to that ptr and return.</p>\n\n<p>You can find more <a href=\"http://en.cppreference.com/w/cpp/memory/weak_ptr\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>As a separate note, the destructor of your static member will be called, just not before main returns.  Most people accept this feature of a static since once main returns they don't really care what happens as long as the application doesn't crash   (although statics using other statics tends to result in exactly that)</p>\n"}], "owner": {"reputation": 331, "user_id": 5196322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22e166f992244e28fba8d31e1631e4e4?s=128&d=identicon&r=PG&f=1", "display_name": "Trampas", "link": "https://stackoverflow.com/users/5196322/trampas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4904, "favorite_count": 0, "accepted_answer_id": 47558843, "answer_count": 1, "score": 4, "last_activity_date": 1531494886, "creation_date": 1511975992, "last_edit_date": 1531494886, "question_id": 47558290, "link": "https://stackoverflow.com/questions/47558290/singleton-class-with-smart-pointers-and-destructor-being-called", "title": "Singleton class with smart pointers and destructor being called", "body": "<p>I want to create a singleton class such that when all pointers to the class go away the destructor is called.</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;iostream&gt;\n\nclass MyClass {\npublic:\n    uint8_t str[50]; //some random data\n    MyClass() {LOG(\"constructor Called\"); }\n    ~MyClass() {LOG(\"destructor Called\");}\n    static std::shared_ptr&lt;MyClass&gt; &amp;Get();\n\nprivate:\n    static std::shared_ptr&lt;MyClass&gt; instance;\n};\n\nstd::shared_ptr&lt;MyClass&gt; MyClass::instance=NULL;\n\n\nstd::shared_ptr&lt;MyClass&gt; &amp;MyClass::Get()\n{\n    if (instance == NULL)\n    {\n        instance= std::shared_ptr&lt;MyClass&gt;(new MyClass());\n        return instance;\n    }\n    return instance;\n}\n\nint main()\n{\n    std::shared_ptr&lt;MyClass&gt; &amp;p1 =MyClass::Get();\n\n    printf(\"We have %\" PRIu32, p1.use_count());\n    if (1)\n    {\n        std::shared_ptr&lt;MyClass&gt; &amp;p2 =MyClass::Get();//this should not  \n                                                     //  create a new class\n        printf(\"We have %\" PRIu32, p1.use_count());  //this should be two...\n        printf(\"We have %\" PRIu32, p2.use_count());  //this should be two...\n        //when p1 goes out of scope here it should not call destructor\n    }\n    printf(\"We have %\" PRIu32, p1.use_count());\n\n    //now destructor should be called\n    return 0;\n}\n</code></pre>\n\n<p>The above code does not work as the static instance is a smart pointer and never goes out of scope, hence the destructor is never called. </p>\n\n<p>What I would like to do is when the static instance is first created to return this instance of a smart pointer and then every call there after return a copy of this smart pointer.  </p>\n"}, {"tags": ["c++", "algorithm", "a-star"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1511976570, "post_id": 47558202, "comment_id": 82074529, "body": "&quot;and it is not working&quot;  how is it not working?"}, {"owner": {"reputation": 45, "user_id": 8472265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/037bef6a9e08aa8b46585fa61728b15a?s=128&d=identicon&r=PG&f=1", "display_name": "ailun0x0e", "link": "https://stackoverflow.com/users/8472265/ailun0x0e"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1511977016, "post_id": 47558202, "comment_id": 82074768, "body": "It keeps in an infinite loop, like the opennode is never empty or something"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1511977605, "post_id": 47558202, "comment_id": 82075121, "body": "&#39;like the opennode is never empty&#39; well, what did your debugger tell you?  Try putting a break point in your insert method and make a very simple test case - then you can see if it&#39;s adding the items you expect."}, {"owner": {"reputation": 45, "user_id": 8472265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/037bef6a9e08aa8b46585fa61728b15a?s=128&d=identicon&r=PG&f=1", "display_name": "ailun0x0e", "link": "https://stackoverflow.com/users/8472265/ailun0x0e"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1512053538, "post_id": 47558202, "comment_id": 82109378, "body": "in some cases I get a really strange path and in another ones the terminal keeps iterating in the loop without finishing"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 8472265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/037bef6a9e08aa8b46585fa61728b15a?s=128&d=identicon&r=PG&f=1", "display_name": "ailun0x0e", "link": "https://stackoverflow.com/users/8472265/ailun0x0e"}, "edited": false, "score": 0, "creation_date": 1512053938, "post_id": 47559635, "comment_id": 82109661, "body": "You re so right, I should have had a break statement here it was just an output message to debug. However my program stills fails. I don&#39;t see your point about direccio, I know that the last iteration is BOTTOM but each &quot;child&quot; (the next cell) is already set, isn&#39;t it?"}], "tags": [], "owner": {"reputation": 315, "user_id": 6789651, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211116379373630/picture?type=large", "display_name": "Matheus Ianzer", "link": "https://stackoverflow.com/users/6789651/matheus-ianzer"}, "is_accepted": false, "score": 0, "last_activity_date": 1511981031, "creation_date": 1511981031, "answer_id": 47559635, "question_id": 47558202, "link": "https://stackoverflow.com/questions/47558202/problems-implementing-a-star-search-c/47559635#47559635", "title": "Problems implementing A star search C++", "body": "<p>So, first:</p>\n\n<pre><code>if(current.pos == desti) cerr&lt;&lt;\"encontrao\";\n</code></pre>\n\n<p>Shouldn't there be a break statement here? the cerr function doesn't break your loop, just throws and error message to your stdout.</p>\n\n<p>And the for statement inside your while is always running up to 4, so direccio is always set to BOTTOM.\nOther than that, I think the heuristic is fine, the problem is within the code structure, I'd suggest debugging it and posting here your results.</p>\n"}], "owner": {"reputation": 45, "user_id": 8472265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/037bef6a9e08aa8b46585fa61728b15a?s=128&d=identicon&r=PG&f=1", "display_name": "ailun0x0e", "link": "https://stackoverflow.com/users/8472265/ailun0x0e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511981031, "creation_date": 1511975673, "last_edit_date": 1511975911, "question_id": 47558202, "link": "https://stackoverflow.com/questions/47558202/problems-implementing-a-star-search-c", "title": "Problems implementing A star search C++", "body": "<p>I am trying to implement an A star algorithm with C++ in a game that I am creating and it is not working, I don't really know if there's something I've missed about the code or the algorithm. I've used sets because they are sorted and the return value is a vector with the nodes I've got to visit. I've never used this algorithm before so probably I've got some kind of error.</p>\n\n<pre><code>struct node {\n    Pos pos;\n    int f; //the sum of the distance from the goal to succcessor\n    int g; // the sum of the cost of the current plus the one from the successor\n    int h; //distance from goal to successor\n\nfriend bool operator&lt; (node right, node left)  {\n      return (right.f &lt; left.f);\n    } };\n\n\n\nvector&lt;node&gt; search(Pos inicio,Pos desti){\n\n    set&lt;node&gt; opennodes;\n    vector&lt;node&gt; closednodes;\n    node inici;\n    node successor;\n    inici.pos = inicio;\n    inici.h = heuristic(inicio,desti);\n    inici.g = getcost(inicio); \n    inici.f = inici.g + inici.h;\n    opennodes.insert(inici);\n    closednodes.push_back(inici);\n    while(not opennodes.empty()){\n        node current = *(opennodes.begin());\n        opennodes.erase(opennodes.begin());\n        if(current.pos == desti) cerr&lt;&lt;\"encontrao\";\n        Dir direccio;\n        for(int i = 0; i &lt; 4;++i){\n            if(i==0){\n                    direccio = LEFT;\n\n            }\n            else if(i==1){\n                    direccio = RIGHT;\n            }\n            else if(i==2){\n                    direccio = TOP;\n            }\n            else {\n                    direccio = BOTTOM;\n            }\n\n                successor.pos = current.pos + direccio;\n                if(successor.pos == desti) return closednodes;\n                if(pos_ok(successor.pos)){\n                    successor.g = current.g + getcost(successor.pos);\n                    successor.h = heuristic(successor.pos,desti);\n                    successor.f = successor.g + successor.h;\n\n                    node n1 = checkposition(successor.pos, opennodes); //I had to create two checkposition just to know if there's the node in the set or in the vector\n                    node n2 = checkposition2(successor.pos, closednodes); \n\n                    if (n1.f != -1 and n1.f &lt; successor.f);\n                    else if (n2.f != -1 and n2.f &lt; successor.f);\n                    else opennodes.insert(successor);\n\n                }\n        }\n          closednodes.push_back(current); \n        }\n\n    return closednodes;\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 141, "user_id": 1863424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147d67fc0db43dcbaa9bbe03cd13d6c8?s=128&d=identicon&r=PG", "display_name": "Daniel Eberts", "link": "https://stackoverflow.com/users/1863424/daniel-eberts"}, "edited": false, "score": 0, "creation_date": 1511975560, "post_id": 47558074, "comment_id": 82073955, "body": "Do you use the same transformation matrix for all different objects? 5 different objects should have 5 different poses, expressed by different transformation matrices."}, {"owner": {"reputation": 23, "user_id": 8609638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44e24aea67fbac046ae21fc183aa6d6d?s=128&d=identicon&r=PG", "display_name": "Mahith Bhima", "link": "https://stackoverflow.com/users/8609638/mahith-bhima"}, "reply_to_user": {"reputation": 141, "user_id": 1863424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147d67fc0db43dcbaa9bbe03cd13d6c8?s=128&d=identicon&r=PG", "display_name": "Daniel Eberts", "link": "https://stackoverflow.com/users/1863424/daniel-eberts"}, "edited": false, "score": 0, "creation_date": 1511975679, "post_id": 47558074, "comment_id": 82074034, "body": "No sir,I used different transformation matrices for all the 5 objects.I am getting that problem only when I use glMultMatrixd() function."}, {"owner": {"reputation": 134, "user_id": 8599142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fa460d1b8eb70cd862ac0dfdaff807a?s=128&d=identicon&r=PG&f=1", "display_name": "organicoman", "link": "https://stackoverflow.com/users/8599142/organicoman"}, "edited": false, "score": 0, "creation_date": 1511975748, "post_id": 47558074, "comment_id": 82074065, "body": "depending on your current matrix, <code>Transformation</code> is a scaling matrix not a translation matrix."}, {"owner": {"reputation": 141, "user_id": 1863424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147d67fc0db43dcbaa9bbe03cd13d6c8?s=128&d=identicon&r=PG", "display_name": "Daniel Eberts", "link": "https://stackoverflow.com/users/1863424/daniel-eberts"}, "edited": false, "score": 0, "creation_date": 1511975779, "post_id": 47558074, "comment_id": 82074083, "body": "Hmm, hard to say, without some code, then. Any calls to <code>glPushMatrix()</code> or <code>glPopMatrix()</code> missing? If not, try calling <code>glLoadIdentity()</code> before <code>glMultMatrix()</code>"}, {"owner": {"reputation": 23, "user_id": 8609638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44e24aea67fbac046ae21fc183aa6d6d?s=128&d=identicon&r=PG", "display_name": "Mahith Bhima", "link": "https://stackoverflow.com/users/8609638/mahith-bhima"}, "edited": false, "score": 0, "creation_date": 1511976471, "post_id": 47558074, "comment_id": 82074476, "body": "Daniel Eberts I have check keeping glLoadIdentity(),it has given me picture like above."}, {"owner": {"reputation": 23, "user_id": 8609638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44e24aea67fbac046ae21fc183aa6d6d?s=128&d=identicon&r=PG", "display_name": "Mahith Bhima", "link": "https://stackoverflow.com/users/8609638/mahith-bhima"}, "edited": false, "score": 0, "creation_date": 1511976568, "post_id": 47558074, "comment_id": 82074527, "body": "organicoman could you please explain your answer in little more detail"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1512027038, "post_id": 47558074, "comment_id": 82093537, "body": "where is any <code>glMatrixMode</code> call? do you init your matrix with <code>glLoadIdentity</code> ?  <code>glMultMatrix</code> multiplies the matrix to currently selected matrix, if you multiply on per frame basis without even selecting or initing the matrix first you will get rounding errors pretty quickly and risk to multiply to the wrong stack.... Maybe you want to use <code>glLoadMatrix</code> instead ..."}], "owner": {"reputation": 23, "user_id": 8609638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44e24aea67fbac046ae21fc183aa6d6d?s=128&d=identicon&r=PG", "display_name": "Mahith Bhima", "link": "https://stackoverflow.com/users/8609638/mahith-bhima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 231, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511977404, "creation_date": 1511975195, "last_edit_date": 1511977404, "question_id": 47558074, "link": "https://stackoverflow.com/questions/47558074/glmultmatrix-not-working-properly-in-opengl", "title": "glMultMatrix() not working properly in openGL", "body": "<p>I have done rendering in two different ways,\nfirst with glTranslate,glRotate etc function which is giving a good output like this,</p>\n\n<p><a href=\"https://i.stack.imgur.com/cyRnE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cyRnE.png\" alt=\"enter image description here\"></a></p>\n\n<p>After that I wanted to do the same problem using 4X4 Transformation matrix(column-major).I have taken GLdouble array[16],\nname of the array is Transformation.</p>\n\n<p>In my case I have computed transformation matrices correctly for 5 objects,one of which is at origin(Identity Matrix).</p>\n\n<p>Whenever I use this in my code before rendering,</p>\n\n<pre><code>glMultMatrixd(Transformation);\n</code></pre>\n\n<p>only the first object is getting rendered correctly.The remaining objecting are getting redered flat as given in the picture.</p>\n\n<p><a href=\"https://i.stack.imgur.com/u4qZU.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u4qZU.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>This is not happening when I remove <code>glMultMatrix()</code> function,but all objects getting rendered at origin which is not I want.</p>\n\n<p>--------Edit---AddedCode-------</p>\n\n<pre><code>void View::Recur(SceneNode* S,GLdouble (&amp;M)[16]){\n    int n=S-&gt;getNumChildren();\n    glPushMatrix();\n    GLdouble Transformation[16]={};\n    GLdouble LocalMatrix[16]={};\n    GLdouble* Local=S-&gt;get_LocalTransform();\n    MatrixEquilizer(LocalMatrix,Local);\n    MultiplyMatricies(M,LocalMatrix,Transformation);\n\n    glMultMatrixd(Transformation);\n\n    Rendercall(S);\n    glPopMatrix();\n}\n</code></pre>\n\n<p>--------Edit---------------</p>\n\n<p>If add <code>glLoadIdentity()</code> before <code>glMultMatrixd(Transformation)</code> then it is giving me a more zoomed version of the same,as given in the picture below,</p>\n\n<p><a href=\"https://i.stack.imgur.com/rUkVP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rUkVP.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "doxygen"], "comments": [{"owner": {"reputation": 1975, "user_id": 6575139, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FwI5j.jpg?s=128&g=1", "display_name": "BobMorane", "link": "https://stackoverflow.com/users/6575139/bobmorane"}, "edited": false, "score": 0, "creation_date": 1511974270, "post_id": 47557760, "comment_id": 82073160, "body": "Not sure I understand the question fully. I understand that you want to document the &quot;expanded&quot; form of the methods and remove any Lua reference from the names?"}, {"owner": {"reputation": 601, "user_id": 8150130, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1629543837056783/picture?type=large", "display_name": "Treyten Carey", "link": "https://stackoverflow.com/users/8150130/treyten-carey"}, "reply_to_user": {"reputation": 1975, "user_id": 6575139, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FwI5j.jpg?s=128&g=1", "display_name": "BobMorane", "link": "https://stackoverflow.com/users/6575139/bobmorane"}, "edited": false, "score": 0, "creation_date": 1511974412, "post_id": 47557760, "comment_id": 82073254, "body": "Yeah. I need to document the lua-usage in the C++ code"}, {"owner": {"reputation": 1975, "user_id": 6575139, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FwI5j.jpg?s=128&g=1", "display_name": "BobMorane", "link": "https://stackoverflow.com/users/6575139/bobmorane"}, "edited": false, "score": 0, "creation_date": 1511974564, "post_id": 47557760, "comment_id": 82073359, "body": "Wouldn&#39;t it be clearer to wrap that Lua usage, and then comment the wrapper? Unless you can&#39;t modify the code..."}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 1, "creation_date": 1511974891, "post_id": 47557760, "comment_id": 82073562, "body": "Maybe you can use an <a href=\"https://www.stack.nl/~dimitri/doxygen/manual/config.html#cfg_input_filter\" rel=\"nofollow noreferrer\">input filter</a> to convert your files. You can use them to hook your own program that converts the source code before it is fed into doxygen."}, {"owner": {"reputation": 601, "user_id": 8150130, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1629543837056783/picture?type=large", "display_name": "Treyten Carey", "link": "https://stackoverflow.com/users/8150130/treyten-carey"}, "edited": false, "score": 0, "creation_date": 1511975227, "post_id": 47557760, "comment_id": 82073761, "body": "Thanks Karsten, I&#39;ll give that a try"}], "answers": [{"tags": [], "owner": {"reputation": 601, "user_id": 8150130, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1629543837056783/picture?type=large", "display_name": "Treyten Carey", "link": "https://stackoverflow.com/users/8150130/treyten-carey"}, "is_accepted": true, "score": 0, "last_activity_date": 1512061152, "creation_date": 1512061152, "answer_id": 47578721, "question_id": 47557760, "link": "https://stackoverflow.com/questions/47557760/manipulate-function-variables-in-doxygen/47578721#47578721", "title": "Manipulate Function Variables in Doxygen", "body": "<p>I decided just to make a very simple script that does the task I need.</p>\n\n<p>For anyone who might be looking for a similar solution, here is the source to the python file:</p>\n\n<pre><code>import os;\n\npath = \"include/\";\noutput = \"doxygen/src/\";\nmodOutput = False;\nsrcFiles = os.listdir(path);\n\ndef writeFile(fileName, cont):\n    f = open(fileName, \"w\");\n    f.write(cont);\n    f.close();\n\ndef readFile(fileName):\n    cont = open(fileName, \"r\");\n    return cont;\n\ndef readFileLines(fileName):\n    return readFile(fileName).readlines();\n\n#   creates the original files without the \\mod option.\ndef outputNormalSrc():\n    for srcFile in srcFiles:\n        fileLines = readFileLines(path + srcFile);\n        newFile = \"\";\n\n        # We want everything in the original src files except for \\mod lines.\n        for line in fileLines:\n            if line.find(\"\\mod\") &gt;= 0:\n                line = line[ : line.find(\"\\mod\")] + \"\\n\";\n\n            newFile += line;\n\n        writeFile(output + srcFile, newFile);\n\n#   creates the modded files for Lua doxygen output.\ndef outputModdedSrc():\n    for srcFile in srcFiles:\n        fileLines = readFileLines(path + srcFile);\n        newFile = \"\";\n\n        foundClass = \"\";\n        for line in fileLines:\n            if foundClass == \"\" and line.find(\"class\") &gt;= 0:\n                foundClass = line[line.find(\"class\")+6 : -1];\n                break;\n        if foundClass == \"\":\n            print \"WARNING: couldn't find class in src file \" + srcFile + \". Skipping.\";\n            continue;\n\n        newFile = \"class \" + foundClass + \"\\n{\\n\";\n\n        getLines = False;\n        writeBeforeClass = False;\n        inMod = False;\n        whiteSpaces = \"\";\n        for line in fileLines:\n            # We want everything in the block quote.\n            #   If the block quote is for the class, put it before the class definition.\n            if line.find(\"/**\") &gt;= 0:\n                getLines = True;\n                if line.find(\"class\") &gt;= 0:\n                    writeBeforeClass = \"\";\n\n            # Store the \\mod function name.\n            if line.find(\"\\mod\") &gt;= 0 and getLines:\n                inMod = line[line.find(\"\\mod\")+5 : -1];\n                line = line[ : line.find(\"\\mod\")] + \"\\n\";\n\n            # Here we start storing the necessary lines we need for the output.\n            if getLines or line.find(\"public:\") &gt;= 0 or line.find(\"private:\") &gt;= 0 or line.find(\"protected:\") &gt;= 0 or line.find(\"}\") &gt;= 0:\n                if writeBeforeClass != False:\n                    writeBeforeClass += line;\n                else:\n                    newFile += line;\n\n            # The end of the block quote.\n            if line.find(\"*/\") &gt;= 0 and getLines:\n                getLines = False;\n\n                # If we are writing the block quote before the class.\n                if writeBeforeClass != False:\n                    newFile = writeBeforeClass + newFile;\n                    writeBeforeClass = False;\n\n                # Add our modded function in place of the normal function.\n                if inMod != False:\n                    newFile += whiteSpaces + inMod + \";\\n\";\n                    inMod = False;\n\n            # Used to append whitespaces the beginning of modded functions\n            #   based on the previous line's whitespaces.\n            whiteSpaces = \"\";\n            for i in range(len(line)):\n                if line[i].isspace() == False:\n                    break;\n                whiteSpaces += line[i];\n\n        # Create the files.\n        writeFile(output + srcFile, newFile);\n\ndef main():\n    # Choice: Create the original output without the \\mod command,\n    #           or with the \\mod command to overwrite function definitions.\n    if modOutput:\n        outputModdedSrc();\n    else:\n        outputNormalSrc();\n\nmain();\n</code></pre>\n"}], "owner": {"reputation": 601, "user_id": 8150130, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1629543837056783/picture?type=large", "display_name": "Treyten Carey", "link": "https://stackoverflow.com/users/8150130/treyten-carey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 47578721, "answer_count": 1, "score": 0, "last_activity_date": 1512061152, "creation_date": 1511974001, "question_id": 47557760, "link": "https://stackoverflow.com/questions/47557760/manipulate-function-variables-in-doxygen", "title": "Manipulate Function Variables in Doxygen", "body": "<p>Is this possible?</p>\n\n<p>Take for example this code</p>\n\n<pre><code>class LuaCamera\n{\n    public:\n        LuaCamera(lua_State* L);\n        static bool defaultControls;\n        bool FPSCam;\n\n        int lookAt(lua_State* L);\n        int getRotation(lua_State* L);\n        int setRotation(lua_State* L);\n        // ...\n\n        virtual ~LuaCamera();\n        static const char className[];\n        static const Luna&lt;LuaCamera&gt;::RegType Register[];\n    protected:\n    private:\n};\n</code></pre>\n\n<p>As you can see, I'm using Lua, so I want to document the Lua-usage. \nInstead of getting <code>int setRotation(lua_State* L)</code> in the Doxygen output, I want to see <code>void setRotation(int x, int y, int z)</code>. Likewise, I want the class to be named <code>Camera</code> in the output instead of <code>LuaCamera</code>. </p>\n\n<p>I realize I could rename the class and create unused functions in order to do this, but my program has an extensive amount of Lua functions and that would be a poor approach. </p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "templates", "types"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 9026693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d49edbf81807e9ff5b54a192bb141611?s=128&d=identicon&r=PG&f=1", "display_name": "StargazingTux", "link": "https://stackoverflow.com/users/9026693/stargazingtux"}, "edited": false, "score": 0, "creation_date": 1511973908, "post_id": 47557584, "comment_id": 82072909, "body": "Wow. Thanks, this is a beautiful solution."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 3, "last_activity_date": 1511973394, "creation_date": 1511973394, "answer_id": 47557584, "question_id": 47557422, "link": "https://stackoverflow.com/questions/47557422/creating-a-pipe-that-can-morph-types-within-without-experimentalany/47557584#47557584", "title": "Creating a pipe that can morph types within without experimental::any", "body": "<p>Template can indeed remove the use of <code>any</code>, something like:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Pipe {\n    T data;\n\npublic:\n    Pipe (T data) : data(data) {}\n    const T&amp; unpack () const { return data; }\n    T&amp; unpack () { return data; }\n\n    template &lt;typename F&gt;\n    auto operator| (F reducer) -&gt; decltype(reducer(std::declval&lt;T&gt;()))\n    {\n        return Pipe&lt;decltype(reducer(data))&gt;(reducer(data));\n    }\n\n    Pipe operator|| (T&amp; destination) const\n    {\n        destination = unpack();\n        return *this;\n    }\n\n};\n\ntemplate &lt;typename T&gt;\nPipe&lt;T&gt; MakePipe(T data) {\n    return Pipe&lt;T&gt;(data);\n}\n</code></pre>\n\n<p>The usage would be</p>\n\n<pre><code>MakePipe(some_data) | do_something | do_something_else || unpacked;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 9026693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d49edbf81807e9ff5b54a192bb141611?s=128&d=identicon&r=PG&f=1", "display_name": "StargazingTux", "link": "https://stackoverflow.com/users/9026693/stargazingtux"}, "edited": false, "score": 0, "creation_date": 1511980745, "post_id": 47558924, "comment_id": 82076814, "body": "This deserves some appreciation. Thanks."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 69, "user_id": 9026693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d49edbf81807e9ff5b54a192bb141611?s=128&d=identicon&r=PG&f=1", "display_name": "StargazingTux", "link": "https://stackoverflow.com/users/9026693/stargazingtux"}, "edited": false, "score": 0, "creation_date": 1511995369, "post_id": 47558924, "comment_id": 82084030, "body": "@StargazingTux Typos fixed, live example added."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1512016220, "last_edit_date": 1512016220, "creation_date": 1511978264, "answer_id": 47558924, "question_id": 47557422, "link": "https://stackoverflow.com/questions/47557422/creating-a-pipe-that-can-morph-types-within-without-experimentalany/47558924#47558924", "title": "Creating a pipe that can morph types within without experimental::any", "body": "<p>So piping is about flow not about storing data.</p>\n\n<pre><code>namespace plumbing {\n  // tags to identify plumping components:\n  struct pipe_tag {};\n  struct src_tag{};\n  struct sink_tag{};\n\n  // this lets us tag function objects.  To handle function pointers,\n  // we need a specialization.\n  template&lt;class F, class Tag&gt;\n  struct tagged_f:F,Tag{\n    using F::F;\n    tagged_f(F&amp;&amp; f):F(std::move(f)){}\n  };\n  template&lt;class Tag, class F&gt;\n  tagged_f&lt;F,Tag&gt; tag(F f){ return {std::move(f)}; }\n  // detect various tags:\n  template&lt;class F&gt; using is_pipe = std::is_base_of&lt;pipe_tag, F&gt;;\n  template&lt;class F&gt; using is_src = std::is_base_of&lt;src_tag, F&gt;;\n  template&lt;class F&gt; using is_sink = std::is_base_of&lt;sink_tag, F&gt;;\n\n  // type erased versions of the plumbing components\n  // useful to store the end result of a plumbing job:\n  template&lt;class T&gt;\n  using gen_sink = tagged_f&lt;std::function&lt;void(T)&gt;, sink_tag&gt;;\n  template&lt;class T&gt;\n  using gen_src = tagged_f&lt;std::function&lt;void(gen_sink&lt;T&gt;)&gt;, src_tag&gt;;\n  template&lt;class In, class Out&gt;\n  using gen_pipe = tagged_f&lt;std::function&lt;void(gen_src&lt;In&gt;, gen_sink&lt;Out&gt;)&gt;, pipe_tag&gt;;\n\n  // SFINAE helper using the is_X templates above:    \n  template&lt;class T, template&lt;class...&gt;class Test&gt;\n  using check=std::enable_if_t&lt; Test&lt;T&gt;{}, bool &gt;;\n\n  // really simple source, pipe and sink helpers:\n  template&lt;class T&gt;\n  auto simple_src( T in ){\n    return tag&lt;src_tag&gt;([=](auto&amp;&amp; sink){ sink(in); });\n  }\n  template&lt;class F&gt;\n  auto simple_pipe( F f ){\n    return tag&lt;pipe_tag&gt;( [=](auto&amp;&amp; src, auto&amp;&amp; sink){\n      src([&amp;](auto&amp;&amp; in){sink(f(in));});         \n    });\n  }\n  template&lt;class V&gt;\n  auto vector_sink(V&amp; v){\n    return tag&lt;sink_tag&gt;([&amp;](auto&amp;&amp;t){ v.push_back(decltype(t)(t)); });\n  }\n\n  // operator| implementations:\n\n  // Src|Pipe is a Src:\n  template&lt;class Src, class Pipe,\n    check&lt;Src, is_src&gt; =true,\n    check&lt;Pipe, is_pipe&gt; =true\n  &gt;\n  auto operator|( Src src, Pipe pipe ){\n    return tag&lt;src_tag&gt;([=](auto&amp;&amp; sink){\n      pipe( src, sink );\n    });\n  }\n\n  // Pipe|Sink is a Sink:\n  template&lt;class Pipe, class Sink,\n    check&lt;Sink, is_sink&gt; =true,\n    check&lt;Pipe, is_pipe&gt; =true\n  &gt;\n  auto operator|( Pipe pipe, Sink sink ){\n    return tag&lt;sink_tag&gt;([=](auto&amp;&amp; t){\n      pipe( simple_src(t), sink );\n    });\n  }\n\n  // Pipe|Pipe is a Pipe:\n  template&lt;class PipeA, class PipeB,\n    check&lt;PipeA, is_pipe&gt; =true,\n    check&lt;PipeB, is_pipe&gt; =true\n  &gt;\n  auto operator|( PipeA a, PipeB b ){\n    return tag&lt;pipe_tag&gt;([=](auto&amp;&amp; src, auto&amp;&amp; sink){\n      b( src|a, sink );\n    });\n  }\n\n  // Src|Sink is a callable object on 0 arguments:\n  template&lt;class Src, class Sink,\n    check&lt;Src, is_src&gt; =true,\n    check&lt;Sink, is_sink&gt; =true\n  &gt;\n  auto operator|( Src src, Sink sink ){\n    return [=]{ src(sink); };\n  }\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/3610b103fdbaed45\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n\n<p>This lets you set up a stateless pipe chain, type erase it (using <code>gen_pipe&lt;In,Out&gt;</code>), have 1 chunk of data become zero or many, buffer and work on strings (if you add terminating symbols), etc.</p>\n\n<p>A sink of T is a function that consumes T.</p>\n\n<p>A source of T is a function that consumes sinks of T.  This permits them to produce more than 1.</p>\n\n<p>A pipe from T to U is a function that takes both a source of T and a sink of U.</p>\n\n<p>Data is not stored in the pipes but rather flows through them.</p>\n\n<pre><code>using namespace plumbing;\nstd::vector&lt;int&gt; v;\n// build pipe, don't run it:\nauto code = simple_src(7)|simple_pipe([](auto x){return x*2;})|vector_sink(v);\n// run pipe:\ncode(); // v contains {14}\n// print:\nfor (auto x:v)\n    std::cout &lt;&lt; x &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>These pipes are untyped, and check that the types match when you connect them.</p>\n\n<p>So you can have a sink like this:</p>\n\n<pre><code>auto print_sink = tag&lt;sink_tag&gt;( [](auto&amp;&amp; x){ std::cout &lt;&lt; x; } );\n</code></pre>\n\n<p>This same sink can be connected to multiple different types of data.</p>\n\n<pre><code>auto hello_world_src = tag&lt;src_tag&gt;( [](auto&amp;&amp; sink) {\n  for (char c : \"hello world\")\n    sink(c);\n});\n</code></pre>\n\n<p>then</p>\n\n<pre><code>(hello_world_src|print_sink)();\n</code></pre>\n\n<p>prints <code>\"hello world\"</code>.  Meanwhile</p>\n\n<pre><code>(simple_src(3.14)|print_sink)();\n</code></pre>\n\n<p>prints <code>3.14</code>.</p>\n\n<p>We can even get fancy:</p>\n\n<pre><code>auto foreach_src = [](auto&amp;&amp; c){\n  return tag&lt;src_tag&gt;([c=decltype(c)(c)](auto&amp;&amp; sink) {\n    for( auto&amp;&amp; x:c )\n      sink(decltype(x)(x));\n  });\n};\n</code></pre>\n\n<p>This is a function that takes a range and returns a source over the elements of the container.</p>\n\n<pre><code>auto foreach_pipe = tag&lt;pipe_tag&gt;([foreach_src]( auto&amp;&amp; src, auto&amp;&amp; sink ) {\n  src( [&amp;](auto&amp;&amp; c) {\n    foreach_src(c)(sink);\n  } );\n});\n</code></pre>\n\n<p>This is a pipe.  It takes a source of ranges, and a sink of elements, and connects them.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/2afb965d41fcecde\" rel=\"nofollow noreferrer\">With more examples</a></p>\n"}], "owner": {"reputation": 69, "user_id": 9026693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d49edbf81807e9ff5b54a192bb141611?s=128&d=identicon&r=PG&f=1", "display_name": "StargazingTux", "link": "https://stackoverflow.com/users/9026693/stargazingtux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 47557584, "answer_count": 2, "score": 2, "last_activity_date": 1512016220, "creation_date": 1511972863, "question_id": 47557422, "link": "https://stackoverflow.com/questions/47557422/creating-a-pipe-that-can-morph-types-within-without-experimentalany", "title": "Creating a pipe that can morph types within without experimental::any", "body": "<p>I am trying to create a pipe implementation that would expose an interface to chain multiple manipulations on some given data while maintaining immutability of the said data. The caveat here is that the manipulations (which are, obviously, just pure functions) should be able to morph the type of the data (e. g. a pipe that is created from an OpenCV mat that should pass through an OCR tool, which would result in a string output). That said, I made this implementation which utilizes std::experimental::any.</p>\n\n<pre><code>class Pipe {\n    any data;\n\npublic:\n    Pipe (any data) : data(data) {}\n    any unpack () {\n        return data;\n    }\n\n    Pipe operator| (function&lt;any(any)&gt; reducer) {\n        return Pipe(reducer(this-&gt;unpack()));\n    }\n\n    Pipe operator|| (any &amp; destination) {\n        destination = unpack();\n        return *this;\n    }\n\n    static Pipe from (any data) {\n        return Pipe(data);\n    }\n};\n</code></pre>\n\n<p>So the API for this pipe-thingy is as follows:</p>\n\n<pre><code>Pipe::from(some_data) | do_something | do_something_else || unpacked\n</code></pre>\n\n<p>Well, it works. The problem is that it is error-prone, since you have to use explicit <code>any_cast</code> any time you want to actually access the data concealed by <code>any</code>. That said, any reducer function has to guess what type it will receive, and if that doesn't match the reality, that's a runtime error, i.e. a lot of unnecessary try-catches or something in the code, as well as those additional lines for explicit typecasting.</p>\n\n<p>So I have two questions about this 'pipe thingy'.</p>\n\n<ol>\n<li>Is it possible to make this less error-prone?</li>\n<li>Is is possible to achieve the same effect without using <code>any</code>? Maybe some template classes, anything would do.</li>\n</ol>\n"}, {"tags": ["c++", "windows", "winapi", "filesystems", "usn"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1511973201, "post_id": 47557363, "comment_id": 82072496, "body": "but you not reset to 0 <code>m_next_usn_record_id</code>. as result and <code>ERROR_HANDLE_EOF</code>. in <code>process_entries()</code> function <code>mft_enum_data.StartFileReferenceNumber = 0;</code> must be before loop."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1511973344, "post_id": 47557363, "comment_id": 82072564, "body": "read the code again. the constructor sets this variable to zero. this is the first value that <code>process_entries</code> uses"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1511973944, "post_id": 47557363, "comment_id": 82072936, "body": "yes, it will be zero in first call <code>process_entries()</code> but if second time call <code>process_entries()</code> this already will be not 0 at begin. and unclear why this variable is member of class but not local variable of function ?currently it used only as local variable. move this variable in class exist sense only if <code>process_entries()</code> can break enumeration, and then start it again from the <code>m_next_usn_record_id</code> but not from 0"}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1511974051, "post_id": 47557363, "comment_id": 82073005, "body": "this is what I did in the beginning. it didn&#39;t help."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1511974189, "post_id": 47557363, "comment_id": 82073108, "body": "i not understand code for <code>refresh_jounral()</code> - <code>FSCTL_QUERY_USN_JOURNAL</code> - out buffer must be <code>USN_JOURNAL_DATA</code> - fixed size structure , but you what do here ?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1511974334, "post_id": 47557363, "comment_id": 82073200, "body": "why you not declare <code>USN_JOURNAL_DATA m_usn_journal_data;</code> (not as pointer) and simply not pass <code>&amp;m_usn_journal_data, sizeof(m_usn_journal_data)</code> to <code>FSCTL_QUERY_USN_JOURNAL</code> ? and what is output data ? <code>MaxUsn</code> is what ?"}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1511974357, "post_id": 47557363, "comment_id": 82073215, "body": "It doesn&#39;t really matter. the function expects a <code>void*</code> with some buffer big enough to hold that struct. it&#39;s a C api, so they both POD types."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1511974502, "post_id": 47557363, "comment_id": 82073322, "body": "yes, but for what do this ? when can be much more simply and effective ? and code be less and clear"}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1511974563, "post_id": 47557363, "comment_id": 82073358, "body": "sure, I agree, but it doesn&#39;t solve my problem."}, {"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1511974565, "post_id": 47557363, "comment_id": 82073362, "body": "Have you read these docs : <a href=\"https://www.microsoft.com/msj/0999/journal/journal.aspx\" rel=\"nofollow noreferrer\">microsoft.com/msj/0999/journal/journal.aspx</a> and <a href=\"https://www.microsoft.com/msj/1099/journal2/journal2.aspx\" rel=\"nofollow noreferrer\">microsoft.com/msj/1099/journal2/journal2.aspx</a> ?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1511974748, "post_id": 47557363, "comment_id": 82073486, "body": "are <code>MaxUsn</code> not 0 at begin ? jornal not empty ?"}], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1512053554, "creation_date": 1511972690, "last_edit_date": 1511973001, "question_id": 47557363, "link": "https://stackoverflow.com/questions/47557363/cant-read-usn-journal-non-stop", "title": "Can&#39;t read USN journal non-stop", "body": "<p><br/>\nMy goal is to read write operations from a chosen drive (usually C), using USN journal.\nIn the next code I've written, I made a small class that processes USN records by using <code>DeviceIoControl</code><br/>\nwith the <code>FSCTL_QUERY_USN_JOURNAL</code> and <code>FSCTL_ENUM_USN_DATA</code> codes.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;stdio.h&gt; \n#include &lt;assert.h&gt;\n#include &lt;vector&gt;\n#include &lt;system_error&gt;\n#include &lt;Windows.h&gt;\n\n[[noreturn]] void throw_system_error(int error_code) {\n    throw std::system_error(error_code, std::system_category());\n}\n\nclass usn_journal {\n\nprivate:\n    HANDLE m_drive_handle;\n    std::vector&lt;uint8_t&gt; m_buffer;\n    USN_JOURNAL_DATA* m_usn_journal_data;\n    USN m_next_usn_record_id;\n\npublic:\n    usn_journal(const wchar_t* driver_name) {\n        m_next_usn_record_id = 0;\n        m_drive_handle = ::CreateFileW(\n            driver_name,\n            GENERIC_READ,\n            FILE_SHARE_DELETE | FILE_SHARE_READ | FILE_SHARE_WRITE,\n            nullptr,\n            OPEN_ALWAYS,\n            FILE_FLAG_NO_BUFFERING,\n            nullptr);\n\n        if (m_drive_handle == INVALID_HANDLE_VALUE) {\n            throw_system_error(::GetLastError());\n        }\n\n        m_buffer.resize(1024 * 1024);\n    }\n\n    ~usn_journal() {\n        ::CloseHandle(m_drive_handle);\n    }\n\n    void refresh_jounral() {\n        assert(m_buffer.size() == 1024 * 1024);\n\n        DWORD buffer_count = 0;\n        if (!DeviceIoControl(\n            m_drive_handle,\n            FSCTL_QUERY_USN_JOURNAL,\n            nullptr,\n            0,\n            m_buffer.data(),\n            m_buffer.size(),\n            &amp;buffer_count,\n            nullptr)) {\n            throw_system_error(::GetLastError());\n        }\n\n        m_usn_journal_data =\n            reinterpret_cast&lt;decltype(m_usn_journal_data)&gt;(m_buffer.data());\n    }\n\n    void process_entries() {\n        DWORD bytes_read = 0;\n        MFT_ENUM_DATA_V0 mft_enum_data = {};\n        mft_enum_data.StartFileReferenceNumber = m_next_usn_record_id;\n        mft_enum_data.LowUsn = 0;\n        mft_enum_data.HighUsn = m_usn_journal_data-&gt;MaxUsn;\n\n        assert(m_buffer.size() == 1024 * 1024);\n\n        for (;;){       \n            auto buffer = m_buffer.data();\n            if (!DeviceIoControl(\n                m_drive_handle,\n                FSCTL_ENUM_USN_DATA,\n                &amp;mft_enum_data,\n                sizeof(mft_enum_data),\n                buffer,\n                m_buffer.size(),\n                &amp;bytes_read,\n                nullptr)){\n\n                auto error_code = ::GetLastError();\n                if (error_code == ERROR_HANDLE_EOF) {\n                    return;\n                }\n                else {\n                    throw_system_error(::GetLastError());\n                }\n            }\n\n            m_next_usn_record_id = *reinterpret_cast&lt;USN*&gt;(buffer); \n            auto buffer_real_begin = buffer + sizeof(USN);\n            auto usn_cursor = reinterpret_cast&lt;USN_RECORD*&gt;(buffer_real_begin);\n            int64_t total_usn_buffer_number = bytes_read - sizeof(USN);\n\n            while (total_usn_buffer_number &gt;= 0){\n                total_usn_buffer_number -= usn_cursor-&gt;RecordLength;\n                buffer = reinterpret_cast&lt;uint8_t*&gt;(usn_cursor) + usn_cursor-&gt;RecordLength;\n                usn_cursor = reinterpret_cast&lt;USN_RECORD*&gt;(usn_cursor);\n                if (usn_cursor-&gt;Reason != 0) {\n                    printf(\"%d\\n\", (int)usn_cursor-&gt;Reason);\n                }\n            }\n\n            mft_enum_data.StartFileReferenceNumber = m_next_usn_record_id;\n        }\n    }\n};\n\nint main(int argc, char ** argv){\n    usn_journal my_journal(L\"\\\\\\\\?\\\\c:\");\n    while (true) {\n        my_journal.refresh_jounral();\n        my_journal.process_entries();\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Here is my problem, after a while, the records are exhausted, and calling <code>DeviceIoControl</code> and <code>FSCTL_ENUM_USN_DATA</code>\n<code>DeviceIoControl</code> fails and the error code I get is <code>ERROR_HANDLE_EOF</code>, even if I refresh the journal, I get the same error.<br/>\nI want to be able to stream any new USN record, and handle write events. I know for sure it's possible as there are <br/>\nthird party tools which present USN records non-stop.<br/>\nhow can reproduce this state of non-stop streaming?</p>\n"}, {"tags": ["c++", "class", "constructor"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 5, "creation_date": 1511972080, "post_id": 47557152, "comment_id": 82071786, "body": "<code>date(x, y, 100);</code> Doesn&#39;t do what you think it does. It creates a new, temporary, <code>date</code>, that gets destroyed at the end of the statement. If you printed <code>this</code> in addition to the string, with <code>cout</code>, you would have noticed it."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1511972317, "post_id": 47557244, "comment_id": 82071924, "body": "Why is it contrary to the comment?"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1511972344, "post_id": 47557244, "comment_id": 82071935, "body": "@Slava because the comment was deleted"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511972391, "post_id": 47557244, "comment_id": 82071973, "body": "@UKMonkey That was my comment. I deleted it because it was redundant with the other comment. Constructors cannot be called directly. They are nameless. Delegate construction is strictly speaking distinct from calling a constructors, thought that&#39;s what it looks like."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511972528, "post_id": 47557244, "comment_id": 82072060, "body": "@Fran&#231;oisAndrieux You could call placement new on this ... but I think I&#39;m going to cry in a corner now"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511972647, "post_id": 47557244, "comment_id": 82072148, "body": "@UKMonkey It seems like you could, but it&#39;s technically undefined behavior unless you also directly call the destructor first. But then I don&#39;t think you can even do that, since I don&#39;t believe you can call a destructor before the constructor has finished."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1511972744, "post_id": 47557244, "comment_id": 82072215, "body": "Are you saying this wasn&#39;t valid until C++11? Before that you couldn&#39;t put another constructor of the same class in the initializer list?"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1511972829, "post_id": 47557244, "comment_id": 82072273, "body": "@MarkRansom That&#39;s what I&#39;m saying indeed.  It&#39;s something which C++ picked up from other languages.   This thread discusses it <a href=\"https://stackoverflow.com/questions/308276/can-i-call-a-constructor-from-another-constructor-do-constructor-chaining-in-c\" title=\"can i call a constructor from another constructor do constructor chaining in c\">stackoverflow.com/questions/308276/&hellip;</a>"}], "tags": [], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "is_accepted": false, "score": 4, "last_activity_date": 1511972412, "last_edit_date": 1511972412, "creation_date": 1511972264, "answer_id": 47557244, "question_id": 47557152, "link": "https://stackoverflow.com/questions/47557152/c-garbage-member-values-while-using-public-and-private-overloaded-constructors/47557244#47557244", "title": "c++ garbage member values while using public and private overloaded constructors", "body": "<p>As the other answers state, constructors can't be called directly normally; however they can CAN be directly called from other constructors (in c++11 onwards), but the syntax is very specific.</p>\n\n<pre><code>date::date(int x, int y):\n      date(x, y, 100)\n{\n    cout &lt;&lt; \"Hello you called me PUBLIC constructor\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>ie they must be called as part of the initialiser list.</p>\n\n<p>Note that this will call things in a different order than you have specified</p>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1511973751, "post_id": 47557256, "comment_id": 82072806, "body": "Note that output would be <code>&quot;Hello you called me PRIVATE constructor&quot;</code> followed by <code>&quot;Hello you called me PUBLIC constructor&quot;</code> (reversed order from expected output of OP)."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 8, "last_activity_date": 1511972304, "creation_date": 1511972304, "answer_id": 47557256, "question_id": 47557152, "link": "https://stackoverflow.com/questions/47557152/c-garbage-member-values-while-using-public-and-private-overloaded-constructors/47557256#47557256", "title": "c++ garbage member values while using public and private overloaded constructors", "body": "<p>Constructors have no names and can't be called. The expression <code>date(x, y, 100);</code> creates a temporary instance using the private constructor, which is immediately destroyed. You <em>can</em> delegate construction but you need to use proper <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list#Delegating_constructor\" rel=\"noreferrer\">constructor delegation syntax</a>. To delegate a constructor, you must do so in the initialization list. It must be the only element in the initialization list. For example :</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\nclass date {\n\npublic:\n    int month;\n    int day;\n    int year;\n\nprivate:\n    date(int x, int y, int z);\npublic:\n    date(int x, int y);\n};\n\ndate::date(int x, int y, int z) : month{ x }, day{ y }, year{ z } {\n\n    cout &lt;&lt; \"Hello you called me PRIVATE constructor\" &lt;&lt; endl;\n\n}\n\ndate::date(int x, int y) : date(x, y, 100) {\n    cout &lt;&lt; \"Hello you called me PUBLIC constructor\" &lt;&lt; endl;\n}\n\n\nint main() {\n\n    date x{ 11, 21 };\n\n    cout &lt;&lt; x.month &lt;&lt; endl;\n    cout &lt;&lt; x.day &lt;&lt; endl;\n    cout &lt;&lt; x.year &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 525, "user_id": 4418163, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/0bd3eaa3560a67a8b2117c7aa02c18ec?s=128&d=identicon&r=PG", "display_name": "Atul", "link": "https://stackoverflow.com/users/4418163/atul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 47557256, "answer_count": 2, "score": 3, "last_activity_date": 1511972412, "creation_date": 1511971925, "question_id": 47557152, "link": "https://stackoverflow.com/questions/47557152/c-garbage-member-values-while-using-public-and-private-overloaded-constructors", "title": "c++ garbage member values while using public and private overloaded constructors", "body": "<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\nclass date{\n\n    public:\n        int month;\n        int day;\n        int year;\n\n    private:\n        date(int x, int y, int z);\n    public:\n        date(int x, int y);\n};\n\ndate::date(int x, int y, int z): month{x}, day{y}, year{z} {\n\n    cout &lt;&lt; \"Hello you called me PRIVATE constructor\" &lt;&lt; endl;\n\n} \n\ndate::date(int x, int y){\n    cout &lt;&lt; \"Hello you called me PUBLIC constructor\" &lt;&lt; endl;\n    date(x, y, 100);\n}\n\n\nint main(){\n\n    date x{11, 21};\n\n    cout &lt;&lt; x.month &lt;&lt; endl;\n    cout &lt;&lt; x.day &lt;&lt; endl;\n    cout &lt;&lt; x.year &lt;&lt; endl;\n\n}\n</code></pre>\n\n<p>As you can see in above code i have two constructor and in main i create object x with two arguments.</p>\n\n<p>This should call the public constructor which in turn calls the private constructor and initialises the public member month day and year.</p>\n\n<p>But when i print members values out i don't get the desired results.</p>\n\n<pre><code>Hello you called me PUBLIC constructor\nHello you called me PRIVATE constructor\n392622664\n1\n0\n</code></pre>\n\n<p>whereas the output should be:</p>\n\n<pre><code>Hello you called me PUBLIC constructor\nHello you called me PRIVATE constructor\n11\n21\n100\n</code></pre>\n\n<p>I don't know where i did something wrong. Any help will be appreciated. Thank you.</p>\n"}, {"tags": ["c++", "c++17", "constexpr", "string-view"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1511971752, "post_id": 47556948, "comment_id": 82071534, "body": "You cannot concatenate <i>references</i>. And <code>string_view</code> is a reference type."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1511972332, "post_id": 47556948, "comment_id": 82071930, "body": "<code>char buffer[sv1.size()+sv2.size()]</code> is not standard C++. VLA is an extension. (function arguments are not constexpr)."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1511973744, "post_id": 47556948, "comment_id": 82072800, "body": "@Jarod42, actually, <code>std::string_view::size()</code> being constexpr means that as long as the function is called with constexpr arguments, this is actually fine. That should be enforced with a local constexpr variable,of course, but I believe his specific example is actually ok."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1511973959, "post_id": 47556948, "comment_id": 82072944, "body": "@Frank: <code>sv1</code> is not constexpr (and we don&#39;t have way to express that currently). so <code>sv1.size()</code> is not <code>constexpr</code>."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1511974057, "post_id": 47556948, "comment_id": 82073013, "body": "I stand corrected."}, {"owner": {"reputation": 1022, "user_id": 3139807, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/189Pk.jpg?s=128&g=1", "display_name": "Scindix", "link": "https://stackoverflow.com/users/3139807/scindix"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1511974210, "post_id": 47556948, "comment_id": 82073127, "body": "@Jarod42 But why does this compile then? I&#39;m using std=c++17 which shouldn&#39;t use gnu extensions."}, {"owner": {"reputation": 1022, "user_id": 3139807, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/189Pk.jpg?s=128&g=1", "display_name": "Scindix", "link": "https://stackoverflow.com/users/3139807/scindix"}, "edited": false, "score": 0, "creation_date": 1511974381, "post_id": 47556948, "comment_id": 82073227, "body": "Also the whole function is constexpr. The code shouldn&#39;t compile anyway if sv1.size() isn&#39;t constexpr, should it?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1511974731, "post_id": 47556948, "comment_id": 82073473, "body": "You got warning with correct flag: <a href=\"http://coliru.stacked-crooked.com/a/678722075ab41345\" rel=\"nofollow noreferrer\">Demo</a>. See also <a href=\"https://stackoverflow.com/questions/31710642/disable-variable-length-automatic-arrays-in-gcc\">disable-variable-length-automatic-arrays-in-gcc</a>"}, {"owner": {"reputation": 1022, "user_id": 3139807, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/189Pk.jpg?s=128&g=1", "display_name": "Scindix", "link": "https://stackoverflow.com/users/3139807/scindix"}, "edited": false, "score": 0, "creation_date": 1511974905, "post_id": 47556948, "comment_id": 82073570, "body": "Ah thanks. Didn&#39;t know that."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1511975561, "post_id": 47556948, "comment_id": 82073957, "body": "As its name implies <code>string_view</code> is not for holding and returning <i>data</i> it is for looking at someone else&#39;s data. So it has to be looking at data that actually exists. After your function exits the data that the <code>string_view</code> is looking at (a local array) gets destroyed."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10133158"}, "edited": false, "score": 0, "creation_date": 1540665851, "post_id": 47556998, "comment_id": 92952150, "body": "Ah it seems possible ... here is the design &#39;\t\ttemplate&lt;char...  str0, char...  str1&gt; \t\tinline \t\t\tconstexpr \t\t\tstring&lt;str0..., str1...&gt; \t\t\toperator+(string&lt;str0...&gt;, string&lt;str1...&gt;) \t\t{ \t\t\treturn {}; \t\t}&#39;  just please implement the string&lt;char ...&gt; and implement transforming from std::string_view into it :)"}], "tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": true, "score": 2, "last_activity_date": 1511971427, "creation_date": 1511971427, "answer_id": 47556998, "question_id": 47556948, "link": "https://stackoverflow.com/questions/47556948/concatenate-string-views-in-constexpr/47556998#47556998", "title": "concatenate string_views in constexpr", "body": "<p>Your task is fundamentally impossible, since <code>string_view</code>, by definition, needs to have continuous <strong>non-owning</strong> storage from start to finish. So it'll be impossible to manage the lifetime of the data.</p>\n\n<p>You need to create some kind of <code>concatenated_string&lt;&gt;</code> custom range as your return type if you want to do something like this.</p>\n\n<p>As to the specific reason your code is yielding weird results, it's simply because <code>buffer</code> does not exist anymore when the function exits.</p>\n"}, {"tags": [], "owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "is_accepted": false, "score": 2, "last_activity_date": 1511971549, "creation_date": 1511971549, "answer_id": 47557042, "question_id": 47556948, "link": "https://stackoverflow.com/questions/47556948/concatenate-string-views-in-constexpr/47557042#47557042", "title": "concatenate string_views in constexpr", "body": "<p>In <code>return std::string_view(buffer, sv1.size()+sv2.size());</code> the returned <code>string_view</code> views the <code>buffer</code> which goes out of scope, so you essentially have a dangling reference.</p>\n"}], "owner": {"reputation": 1022, "user_id": 3139807, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/189Pk.jpg?s=128&g=1", "display_name": "Scindix", "link": "https://stackoverflow.com/users/3139807/scindix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5610, "favorite_count": 0, "accepted_answer_id": 47556998, "answer_count": 2, "score": 2, "last_activity_date": 1511971549, "creation_date": 1511971278, "question_id": 47556948, "link": "https://stackoverflow.com/questions/47556948/concatenate-string-views-in-constexpr", "title": "concatenate string_views in constexpr", "body": "<p>I'm trying to concatenate <code>string_views</code> in a <code>constexpr</code>.\nThe following is a simplified version of my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string_view&gt;\n\nusing namespace std::string_view_literals;\n\n// concatenate two string_views by copying their bytes\n// into a newly created buffer\nconstexpr const std::string_view operator+\n    (const std::string_view&amp; sv1, const std::string_view&amp; sv2)\n{\n    char buffer[sv1.size()+sv2.size()] = {0};\n    for(size_t i = 0; i &lt; sv1.size(); i++)\n        buffer[i] = sv1[i];\n    for(size_t i = sv1.size(); i &lt; sv1.size()+sv2.size(); i++)\n        buffer[i] = sv2[i-sv1.size()];\n    return std::string_view(buffer, sv1.size()+sv2.size());\n}\n\nint main()\n{\n    const std::string_view sv1(\"test1;\");\n    const std::string_view sv2(\"test2;\");\n    std::cout &lt;&lt; sv1 &lt;&lt; \"|\" &lt;&lt; sv2 &lt;&lt; \": \" &lt;&lt; (sv1+sv2+sv1) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"test1;\"sv &lt;&lt; \"|\" &lt;&lt; \"test2;\"sv &lt;&lt; \": \" &lt;&lt;\n        (\"test1;\"sv+\"test2;\"sv) &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>However this code does not produce the result I expected. Instead of printing <code>test1;test2;test1</code> and <code>test1;test2;</code> it prints out correct characters mixed with random characters as if I'm accessing uninitialized memory.</p>\n\n<pre><code>test1;|test2;: F\ufffd\ufffd&lt;\ufffd\ufffditest;\ntest1;|test2;: est1;te`\ufffdi\n</code></pre>\n\n<p>However if I remove the <code>constexpr</code> specifier and replace the <code>string_views</code> with <code>strings</code> the above code prints the expected output.</p>\n\n<pre><code>test1;|test2;: test1;test2;test1;\ntest1;|test2;: test1;test2;\n</code></pre>\n\n<p>Either I'm missing some obvious mistake in my code or there is something about <code>constexpr</code> that I don't understand (yet). Is it the way I'm creating the buffer for the new <code>string_view</code>? What else could I do? Or is what I'm trying to do impossible? Maybe there is someone who can shed light to this for me.</p>\n"}, {"tags": ["c++", "class", "c++11", "dictionary", "set"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1511971298, "post_id": 47556890, "comment_id": 82071238, "body": "You describe types and members you use in your example, but a lot of information is missing. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 499, "user_id": 5325102, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iZeNv.jpg?s=128&g=1", "display_name": "Francisco Gallego Salido", "link": "https://stackoverflow.com/users/5325102/francisco-gallego-salido"}, "edited": false, "score": 0, "creation_date": 1511971331, "post_id": 47556890, "comment_id": 82071267, "body": "<code>id</code> from Trets is private, you can&#39;t access from other class"}, {"owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1511971764, "post_id": 47556890, "comment_id": 82071549, "body": "<code>insert</code> returns a <code>pair</code> so you&#39;ll have to modify that"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1511971949, "post_id": 47556890, "comment_id": 82071685, "body": "I think it would have been easier to simply create two dummy classes and showed us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of a few lines to duplicate the issue, instead of going through a description of a Trets game."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1511971960, "post_id": 47556890, "comment_id": 82071694, "body": "Purpose of <code>make_pair</code> is to not provide template arguments and let deduction happens."}], "answers": [{"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1511972445, "post_id": 47557077, "comment_id": 82072013, "body": "Even if this were to work, the code could be condensed into just calling <code>insert</code> and then use the return value from <code>insert</code> to update the id.  Thus there would be no need to call <code>find</code> and then test if the item&#39;s not found."}], "tags": [], "owner": {"reputation": 4944, "user_id": 4877767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RO6mn.png?s=128&g=1", "display_name": "marom", "link": "https://stackoverflow.com/users/4877767/marom"}, "is_accepted": true, "score": -1, "last_activity_date": 1511971669, "creation_date": 1511971669, "answer_id": 47557077, "question_id": 47556890, "link": "https://stackoverflow.com/questions/47556890/c-insert-a-value-in-a-set-of-values-from-a-class-in-a-map/47557077#47557077", "title": "C++ insert a value in a set of values from a class in a Map", "body": "<p>I think something like this should work:</p>\n\n<pre><code>void Cjt_Trets::afegir_tret(int id, string rasgo){    \n    auto it = mtrets.find(rasgo) ;  // is rasgo already ion the map?\n    if (it == mtrets.end())         // if not insert an empty Trets\n        it = mtrets.insert(make_pair(rasgo, Trets()).first ;\n    // Now insert the id in the Trets referring to this rasgo\n    // TODO it-&gt;second is of type Trets and id is private member\n    // this needs to be fixed\n    it-&gt;second.id.insert(id) ; \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 954, "user_id": 3104621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27f0df827e6c87c5738d9ab26f30ca3e?s=128&d=identicon&r=PG&f=1", "display_name": "Joald", "link": "https://stackoverflow.com/users/3104621/joald"}, "is_accepted": false, "score": 0, "last_activity_date": 1511971770, "creation_date": 1511971770, "answer_id": 47557119, "question_id": 47556890, "link": "https://stackoverflow.com/questions/47556890/c-insert-a-value-in-a-set-of-values-from-a-class-in-a-map/47557119#47557119", "title": "C++ insert a value in a set of values from a class in a Map", "body": "<p>Since you have a class <code>Trets</code>, you can't do <code>Trets.id</code>, as id is a non-static member of the class, and even if it were, you'd access it by calling <code>Trets::id</code>. However, to insert something into <code>std::map&lt;string, Trets&gt;</code>, you'd need and object of <code>Trets</code>, and <code>std::set::insert</code> returns <code>std::pair&lt;iterator, bool&gt;</code>, so you'd need to create or receive from somewhere an actual object of <code>Trets</code> to be able to insert it into the <code>std::map</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 8670144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9oMPf.jpg?s=128&g=1", "display_name": "Roger G.", "link": "https://stackoverflow.com/users/8670144/roger-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 47557077, "answer_count": 2, "score": 0, "last_activity_date": 1511973372, "creation_date": 1511971107, "last_edit_date": 1511973372, "question_id": 47556890, "link": "https://stackoverflow.com/questions/47556890/c-insert-a-value-in-a-set-of-values-from-a-class-in-a-map", "title": "C++ insert a value in a set of values from a class in a Map", "body": "<p>I have a map in my class <code>Cjt_Trets</code> that contains a string called <code>rasgo</code> and a class called <code>Trets</code>. In Trets I have a <code>set&lt;int&gt; id;</code> that will contain the <code>id</code>'s of the people containing that <code>rasgo</code>. My problem comes when I try to insert the <code>id</code> that the function receives, into that set. How am I supposed to do it?</p>\n\n<p>Here I leave part of the code that can help you understand my situation:</p>\n\n<p>Private of the class Cjt_Trets:</p>\n\n<pre><code>private:\n  map&lt;string, Trets&gt; mtrets;  \n};\n</code></pre>\n\n<p>Private of Trets:</p>\n\n<pre><code>private:\n  set&lt;int&gt; id;\n  string gen;  \n};\n</code></pre>\n\n<p>Actual part of the code I don't know how to do:</p>\n\n<pre><code>void Cjt_Trets::afegir_tret(int id, string rasgo){    \n  mtrets.insert( make_pair&lt;string, Trets&gt; (rasgo, Trets.id.insert(id)) );\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 6, "creation_date": 1511971183, "post_id": 47556869, "comment_id": 82071147, "body": "Do you know how <code>for</code> loops work? <code>n</code> gets assigned <code>0</code>, and then it is compared to <code>5</code>, since the result of such comparison is <code>false</code> (<code>0</code> is <b>not</b> equal to <code>5</code>) - the loop is not entered. Consider reading a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 3, "creation_date": 1511971195, "post_id": 47556869, "comment_id": 82071158, "body": "Yes, your debugger can tell you. <i>Fix-my-code</i> questions are off-topic here. BTW <code>&quot;stdafx.h&quot;</code> is not a standard C++ header (look on some <a href=\"http://en.cppreference.com/w/\" rel=\"nofollow noreferrer\">C++ reference</a> site). Next time, compile with all warnings and debug info (e.g. <code>g++ -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>...), improve the code to get no warnings, and <b>use the debugger</b> (e.g. <code>gdb</code>). For your next question on SO, please provide some <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1511971356, "post_id": 47556869, "comment_id": 82071280, "body": "You are just getting a preview of what your program will look like when you start it from a shortcut on your desktop.  Set a breakpoint at the end of main() so you can read the console before it closes."}], "answers": [{"tags": [], "owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "is_accepted": false, "score": 2, "last_activity_date": 1511974379, "last_edit_date": 1511974379, "creation_date": 1511971494, "answer_id": 47557025, "question_id": 47556869, "link": "https://stackoverflow.com/questions/47556869/my-c-programm-in-visual-studio-closes-without-reading-for-function/47557025#47557025", "title": "My c++ programm in Visual Studio closes without reading FOR function;", "body": "<pre><code>for ( n = 0; n == 5; n++)\n</code></pre>\n\n<p>Is not what you want. A <code>for</code>-loop is nothing but a <code>while</code>-loop using different syntax:</p>\n\n<pre><code>n = 0;\n\nwhile(n == 5)\n{\n   // you loop body here\n    n++;\n}\n</code></pre>\n\n<p>As you can see, it executes <em>while your condition is</em> <code>true</code>. In this case... not at all because it's not <code>true</code> to begin with. </p>\n\n<p>You probably meant </p>\n\n<pre><code>for ( n = 0; n &lt; 5; n++)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 495, "user_id": 5583881, "user_type": "registered", "profile_image": "https://graph.facebook.com/119342351764522/picture?type=large", "display_name": "Stoica Mircea", "link": "https://stackoverflow.com/users/5583881/stoica-mircea"}, "is_accepted": false, "score": 1, "last_activity_date": 1511971576, "creation_date": 1511971576, "answer_id": 47557053, "question_id": 47556869, "link": "https://stackoverflow.com/questions/47556869/my-c-programm-in-visual-studio-closes-without-reading-for-function/47557053#47557053", "title": "My c++ programm in Visual Studio closes without reading FOR function;", "body": "<p><code>n == 5</code> is the problem. When came to for function and makes the test to see if the block needs to run it get false because you initialize with <code>n = 0</code>; better than <code>n == 5</code> use <code>n!=5</code> but if you skip to make n = 5 you get an infinite loop. </p>\n\n<p>For the best case use <code>n &lt; 5</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 8088104, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bDHpbILaGfM/AAAAAAAAAAI/AAAAAAAAAhA/hf2pAcQ0wEw/photo.jpg?sz=128", "display_name": "Anonimcik", "link": "https://stackoverflow.com/users/8088104/anonimcik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1511975267, "answer_count": 2, "score": -9, "last_activity_date": 1511975129, "creation_date": 1511971067, "last_edit_date": 1511975129, "question_id": 47556869, "link": "https://stackoverflow.com/questions/47556869/my-c-programm-in-visual-studio-closes-without-reading-for-function", "closed_reason": "Not suitable for this site", "title": "My c++ programm in Visual Studio closes without reading FOR function;", "body": "<p>Can someone tell me why this programm gives only the cout text?</p>\n\n<pre><code>#include \"iostream\"\n#include \"stdafx.h\"\n#include &lt;iostream&gt;\n\nusing namespace std;\nint main()\n{\n    float x;\n    int y[50];\n    int n;\n    cout &lt;&lt; \"Dati notele despartindule prin Enter\";\n    for ( n = 0; n == 5; n++) {\n        cin &gt;&gt; y[n];\n        if (n &gt;= 1) {\n            y[n] = y[n - 1] + y[n];\n        }\n    }\n    x = y[n] / (n + 1);\n    cout &lt;&lt; x;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "sockets", "networking", "ip"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1511971652, "post_id": 47556777, "comment_id": 82071473, "body": "TCP cannot tell that address is unreachable without waiting for timeout. It is not clear what you want from it."}, {"owner": {"reputation": 51, "user_id": 7933121, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/260b94f2ab6d1203deafefbdea6258fb?s=128&d=identicon&r=PG&f=1", "display_name": "shaked nissanov", "link": "https://stackoverflow.com/users/7933121/shaked-nissanov"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1511971931, "post_id": 47556777, "comment_id": 82071676, "body": "I understand what you&#39;re saying, thanks for your answer. Then how can I check if a address is reachable or not?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1511972024, "post_id": 47556777, "comment_id": 82071737, "body": "It is not a trivial task. You can start with ICMP and ping. But if it is a remote host ICMP can be blocked by routers. Better use nmap program."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1511976514, "post_id": 47556777, "comment_id": 82074498, "body": "&#39; Then how can I check if a address is reachable or not?&#39; - try to connect to it.  There is no good alernative.  If the necessary TCP timeouts cause a problem, use an async/overlapped design or multiple threads."}], "answers": [{"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1511972531, "creation_date": 1511972531, "answer_id": 47557319, "question_id": 47556777, "link": "https://stackoverflow.com/questions/47556777/c-socket-connect-is-stuck-when-trying-to-connect-to-a-unreachable-computer/47557319#47557319", "title": "C++ socket Connect is stuck when trying to connect to a unreachable computer", "body": "<p>It times out after about a minute. You can reduce that by using non-blocking mode and <code>select()</code> for writeability, with your timeout, after doing the connect.</p>\n"}], "owner": {"reputation": 51, "user_id": 7933121, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/260b94f2ab6d1203deafefbdea6258fb?s=128&d=identicon&r=PG&f=1", "display_name": "shaked nissanov", "link": "https://stackoverflow.com/users/7933121/shaked-nissanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 605, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511972531, "creation_date": 1511970794, "question_id": 47556777, "link": "https://stackoverflow.com/questions/47556777/c-socket-connect-is-stuck-when-trying-to-connect-to-a-unreachable-computer", "title": "C++ socket Connect is stuck when trying to connect to a unreachable computer", "body": "<p>Source Code: </p>\n\n<pre><code>    bool Helper::connectToAComputer(char* destIpString, char* srcIpString)\n{\n    int iResult = 0;\n    u_long iMode = 1;\n    SOCKET ConnectSocket = INVALID_SOCKET;\n    ConnectSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n    if (ConnectSocket == INVALID_SOCKET) \n    {\n        wprintf(L\"socket function failed with error: %ld\\n\", WSAGetLastError());\n        //return NULL;\n    }\n\n    sockaddr_in clientService;\n    clientService.sin_family = AF_INET;\n    clientService.sin_addr.s_addr = inet_addr(destIpString);\n    clientService.sin_port = htons(22223);\n\n    iResult = connect(ConnectSocket, (SOCKADDR *)&amp; clientService, sizeof(clientService));\n    if (iResult == SOCKET_ERROR)\n    {\n        wprintf(L\"connect function failed with error: %ld\\n\", WSAGetLastError());\n    }\n\n    closesocket(ConnectSocket);\n    return false;\n}\n</code></pre>\n\n<p>I am writing a program that will check all local IP addresses to see which computers or devices are on the local network. I have written this function which connects to a socket.   </p>\n\n<p>The problem is that when the socket tries the connect to an IP that is not owned by any device, the program just stops and waits on the connect line. It can connect to IP's that are owned by a computer. I want the function to tell me whether the connect was not successful instead of just hanging and waiting.</p>\n"}, {"tags": ["python", "c++", "eigen", "tensor", "numpy-einsum"], "comments": [{"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 1, "creation_date": 1511971193, "post_id": 47556726, "comment_id": 82071156, "body": "I may be totally wrong here, but if you only specify the axes to contract then it&#39;s not clear which order the remaining axes should appear in. In the numpy example you completely specify this by  the first argument. Maybe Eigen keeps them in the order first tensor&#39;s surviving axes first, then second tensor&#39;s surviving axes?"}, {"owner": {"reputation": 13, "user_id": 7930415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qFj50.jpg?s=128&g=1", "display_name": "lelemmen", "link": "https://stackoverflow.com/users/7930415/lelemmen"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 1, "creation_date": 1511975081, "post_id": 47556726, "comment_id": 82073667, "body": "@PaulPanzer Thanks for giving that insightful answer. If we shuffle <code>M</code>&#39;s axes as <code>M.shuffle(Eigen::array&lt;int, 4&gt; {3, 0, 1, 2})</code>, then we get exactly <code>N</code> back, as can be verified by <code>(M_shuffled == N).all()</code> which leads to the value 1, meaning that they are element-wise equal. Could you provide your comment (maybe including this comment as well?) as an answer so that I can accept it?"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1511975241, "post_id": 47556726, "comment_id": 82073771, "body": "Will do, give me a few minutes."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7930415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qFj50.jpg?s=128&g=1", "display_name": "lelemmen", "link": "https://stackoverflow.com/users/7930415/lelemmen"}, "edited": false, "score": 0, "creation_date": 1512035432, "post_id": 47558349, "comment_id": 82098022, "body": "I took the liberty to create a Gist out of this, combining the question and this accepted answer: <a href=\"https://gist.github.com/lelemmen/d01a32387363376d00191d10208a5440\" rel=\"nofollow noreferrer\">gist.github.com/lelemmen/d01a32387363376d00191d10208a5440</a>."}], "tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 1, "last_activity_date": 1511976198, "creation_date": 1511976198, "answer_id": 47558349, "question_id": 47556726, "link": "https://stackoverflow.com/questions/47556726/what-causes-different-results-by-interchanging-the-tensors-in-an-eigentensor-c/47558349#47558349", "title": "What causes different results by interchanging the tensors in an Eigen::Tensor contraction?", "body": "<p>The <code>Eigen</code> interface appears to take only the contraction axes for specification. It therefore has to decide itself how to arrange the non-contracted axes. The obvious way would be to keep the original axes in order, first the first argument's then second's.</p>\n\n<p>To confirm this we can either </p>\n\n<ul>\n<li>use <code>np.einsum</code> specifying different output layouts and compare to the output of <code>Eigen</code>:</li>\n</ul>\n\n<p>.</p>\n\n<pre><code>import numpy as np\n\nT = np.arange(16).reshape(2, 2, 2, 2)\nA = np.arange(1, 5).reshape(2, 2)\n\nprint(np.einsum('ijkl,ia-&gt;ajkl', T, A))\n# [[[[24 28]\n#    [32 36]]\n\n#   [[40 44]\n#    [48 52]]]\n\n\n#  [[[32 38]\n#    [44 50]]\n\n#   [[56 62]\n#    [68 74]]]]\n\nprint(np.einsum('ijkl,ia-&gt;jkla', T, A))\n# [[[[24 32]\n#    [28 38]]\n\n#   [[32 44]\n#    [36 50]]]\n\n\n#  [[[40 56]\n#    [44 62]]\n\n#   [[48 68]\n#    [52 74]]]]\n</code></pre>\n\n<ul>\n<li>or shuffle directly in <code>Eigen</code> (thanks @lelemmen):</li>\n</ul>\n\n<p>.</p>\n\n<pre><code>M.shuffle(Eigen::array&lt;int, 4&gt; {3, 0, 1, 2})\n(M_shuffled == N).all()\n\n# 1\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7930415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qFj50.jpg?s=128&g=1", "display_name": "lelemmen", "link": "https://stackoverflow.com/users/7930415/lelemmen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 47558349, "answer_count": 1, "score": 1, "last_activity_date": 1511976198, "creation_date": 1511970601, "question_id": 47556726, "link": "https://stackoverflow.com/questions/47556726/what-causes-different-results-by-interchanging-the-tensors-in-an-eigentensor-c", "title": "What causes different results by interchanging the tensors in an Eigen::Tensor contraction?", "body": "<p>I am working on a C++ library that relies on tensor contractions. I won't post the full application here, but I've distilled it down to the following.</p>\n\n<p>We define a toy rank-4 tensor, which is nothing but (0, 1, ..., 15) reshaped: </p>\n\n<pre><code>Eigen::Tensor&lt;double, 4&gt; T (2, 2, 2, 2);\nfor (size_t i = 0; i &lt; 2; i++) {\n    for (size_t j = 0; j &lt; 2; j++) {\n        for (size_t k = 0; k &lt; 2; k++) {\n            for (size_t l = 0; l &lt; 2; l++) {\n                T(i, j, k, l) = l + 2 * k + 4 * j + 8 * i;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>and a rank-2 tensor to contract with, which is nothing but (1, 2, 3, 4) reshaped:</p>\n\n<pre><code>Eigen::Tensor&lt;double, 2&gt; A (2, 2);\nfor (size_t i = 0; i &lt; 2; i++) {\n    for (size_t j = 0; j &lt; 2; j++) {\n        A(i, j) = 1 + j + 2 * i;\n    }\n}\n</code></pre>\n\n<p>To contract two tensors in Eigen, we have to specify a contraction pair. Our goal is to contract the first two indices of the tensors, as in <code>T(ijkl)*A(ib)=M(bjkl)</code>. With my current understanding of the Tensor module in Eigen, we will write the contraction pair as</p>\n\n<pre><code>Eigen::array&lt;Eigen::IndexPair&lt;int&gt;, 1&gt; contraction_pair = {Eigen::IndexPair&lt;int&gt;(0, 0)};\n</code></pre>\n\n<p>However, I think it should be possible to use the exact same contraction pair to perform the contraction <code>A(ib)*T(ijkl)=N(bjkl)</code>. Unfortunately, this is not the case, and the elements of <code>M</code> are</p>\n\n<pre><code>0 0 0 0  24\n0 0 0 1  32\n0 0 1 0  28\n0 0 1 1  38\n0 1 0 0  32\n0 1 0 1  44\n0 1 1 0  36\n0 1 1 1  50\n1 0 0 0  40\n1 0 0 1  56\n1 0 1 0  44\n1 0 1 1  62\n1 1 0 0  48\n1 1 0 1  68\n1 1 1 0  52\n1 1 1 1  74\n</code></pre>\n\n<p>while these of <code>N</code> are</p>\n\n<pre><code>0 0 0 0  24\n0 0 0 1  28\n0 0 1 0  32\n0 0 1 1  36\n0 1 0 0  40\n0 1 0 1  44\n0 1 1 0  48\n0 1 1 1  52\n1 0 0 0  32\n1 0 0 1  38\n1 0 1 0  44\n1 0 1 1  50\n1 1 0 0  56\n1 1 0 1  62\n1 1 1 0  68\n1 1 1 1  74\n</code></pre>\n\n<p>I have tested the same toy tensors in numpy, using einsum:</p>\n\n<pre><code>T = np.arange(16).reshape(2, 2, 2, 2)\nA = np.arange(1, 5).reshape(2, 2)\n\ncontraction1 = np.einsum('ijkl,ia-&gt;ajkl', integrals, C)\ncontraction2 = np.einsum('ia,ijkl-&gt;ajkl', C, integrals)\n</code></pre>\n\n<p>and both <code>contraction1</code> and <code>contraction2</code> are</p>\n\n<pre><code>0   0   0   0   24\n0   0   0   1   28\n0   0   1   0   32\n0   0   1   1   36\n0   1   0   0   40\n0   1   0   1   44\n0   1   1   0   48\n0   1   1   1   52\n1   0   0   0   32\n1   0   0   1   38\n1   0   1   0   44\n1   0   1   1   50\n1   1   0   0   56\n1   1   0   1   62\n1   1   1   0   68\n1   1   1   1   74\n</code></pre>\n\n<p>which coincide with the case <code>A(ib)*T(ijkl)=N(bjkl)</code> in Eigen. What causes Eigen to not give the same result in both cases?</p>\n"}, {"tags": ["c++", "c++11", "gcc", "mingw"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1511969710, "post_id": 47556362, "comment_id": 82070079, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (a complete program and compilation command which reproduce the error)."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1511969887, "post_id": 47556362, "comment_id": 82070229, "body": "Because I cannot reproduce: <a href=\"https://godbolt.org/g/Ww9GpX\" rel=\"nofollow noreferrer\">godbolt.org/g/Ww9GpX</a>"}, {"owner": {"reputation": 1, "user_id": 9026493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28de8d4e46fe2584043ecad38d152bb2?s=128&d=identicon&r=PG&f=1", "display_name": "ftxj", "link": "https://stackoverflow.com/users/9026493/ftxj"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1511970395, "post_id": 47556362, "comment_id": 82070597, "body": "#include &lt;iostream&gt; int main(){   return 0; } just like this"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1511970439, "post_id": 47556362, "comment_id": 82070629, "body": "is it a gcc patched and compiled by Red Hat?"}, {"owner": {"reputation": 1, "user_id": 9026493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28de8d4e46fe2584043ecad38d152bb2?s=128&d=identicon&r=PG&f=1", "display_name": "ftxj", "link": "https://stackoverflow.com/users/9026493/ftxj"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1511970838, "post_id": 47556362, "comment_id": 82070928, "body": "I download it from mingw, and I don&#39;t know anymore infomation...very sorry"}, {"owner": {"reputation": 1, "user_id": 9026493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28de8d4e46fe2584043ecad38d152bb2?s=128&d=identicon&r=PG&f=1", "display_name": "ftxj", "link": "https://stackoverflow.com/users/9026493/ftxj"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1511971013, "post_id": 47556362, "comment_id": 82071045, "body": "maybe it is, because I find many .a files"}], "owner": {"reputation": 1, "user_id": 9026493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28de8d4e46fe2584043ecad38d152bb2?s=128&d=identicon&r=PG&f=1", "display_name": "ftxj", "link": "https://stackoverflow.com/users/9026493/ftxj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 272, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511970530, "creation_date": 1511969494, "last_edit_date": 1511970530, "question_id": 47556362, "link": "https://stackoverflow.com/questions/47556362/when-using-std-c98-to-compile-includeiostream-get-error", "title": "when using =std=C++98 to compile, #include&lt;iostream&gt; get error", "body": "<p>when I use -std=c++98 to compile, the error occur</p>\n\n<pre><code>In file included from c:\\mingw\\lib\\gcc\\mingw32\\5.3.0\\include\\c++\\bits\\locale_facets.h:39:0,\n                 from c:\\mingw\\lib\\gcc\\mingw32\\5.3.0\\include\\c++\\bits\\basic_ios.h:37,\n                 from c:\\mingw\\lib\\gcc\\mingw32\\5.3.0\\include\\c++\\ios:44,\n                 from c:\\mingw\\lib\\gcc\\mingw32\\5.3.0\\include\\c++\\ostream:38,\n                 from c:\\mingw\\lib\\gcc\\mingw32\\5.3.0\\include\\c++\\iostream:39,\n                 from 2299.cpp:4:\nc:\\mingw\\lib\\gcc\\mingw32\\5.3.0\\include\\c++\\cwctype:89:11: error: '::iswblank' has not been declared\n   using ::iswblank;\n</code></pre>\n\n<p>my g++ version is g++(GCC) 5.3.0.\nI want to know why......</p>\n"}, {"tags": ["c++", "c++11", "inheritance", "destructor"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1511969428, "post_id": 47556287, "comment_id": 82069839, "body": "The idiom for indicating that a class is not intended to be used as a base is to make that class final."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 7, "creation_date": 1511969435, "post_id": 47556287, "comment_id": 82069845, "body": "If you intend to indicate that a class is not suitable to be a inherited from, you can just mark the whole class <code>final</code>. <code>class Devired final : public Base</code>"}], "answers": [{"comments": [{"owner": {"reputation": 40055, "user_id": 545127, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RJgJM.png?s=128&g=1", "display_name": "Raedwald", "link": "https://stackoverflow.com/users/545127/raedwald"}, "edited": false, "score": 14, "creation_date": 1511971069, "post_id": 47556411, "comment_id": 82071082, "body": "&quot;...but you should just mark the class <code>final</code>&quot;. And <a href=\"https://stackoverflow.com/questions/43704769/is-the-final-function-specifier-redundant-when-using-the-final-class-specifier\">doing both would be redundant</a>."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 60, "last_activity_date": 1511969638, "creation_date": 1511969638, "answer_id": 47556411, "question_id": 47556287, "link": "https://stackoverflow.com/questions/47556287/may-a-destructor-be-final/47556411#47556411", "title": "May a destructor be final?", "body": "<blockquote>\n  <p>May a C++ destructor be declared as <code>final</code>?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>And if so, does that prevent declaration of a derived class:</p>\n</blockquote>\n\n<p>Yes, because the derived class would have to declare a destructor (either explicitly by you or implicitly by the compiler), and that destructor would be overriding a function declared <code>final</code>, which is ill-formed.</p>\n\n<p>The rule is <a href=\"http://eel.is/c++draft/class.derived#class.virtual-4.sentence-1\" rel=\"noreferrer\">[class.virtual]/4</a>:</p>\n\n<blockquote>\n  <p>If a virtual function <code>f</code> in some class B is marked with the <em>virt-specifier</em> <code>final</code> and in a class D derived from B a function <code>D\u200b::\u200bf</code> overrides <code>B\u200b::\u200bf</code>, the program is ill-formed.</p>\n</blockquote>\n\n<p>It's the derivation itself that is ill-formed, it doesn't have to be used. </p>\n\n<blockquote>\n  <p>Is declaring a destructor to be final a workable idiom for indicating that a class is not intended to be used as a base class?</p>\n</blockquote>\n\n<p>Effectively, but you should just mark the class <code>final</code>. It's quite a bit more explicit. </p>\n"}], "owner": {"reputation": 40055, "user_id": 545127, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RJgJM.png?s=128&g=1", "display_name": "Raedwald", "link": "https://stackoverflow.com/users/545127/raedwald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4462, "favorite_count": 6, "accepted_answer_id": 47556411, "answer_count": 1, "score": 40, "last_activity_date": 1511971348, "creation_date": 1511969231, "last_edit_date": 1511971348, "question_id": 47556287, "link": "https://stackoverflow.com/questions/47556287/may-a-destructor-be-final", "title": "May a destructor be final?", "body": "<p>Does the C++ standard allow a destructor to be declared as <code>final</code>? Like this:</p>\n\n<pre><code> class Derived: public Base\n {\n      ...\n      virtual ~Derived() final;\n }\n</code></pre>\n\n<p>And if so, does that prevent the declaration of a derived class:</p>\n\n<pre><code> class FurtherDerived: public Derived {// allowed?\n }\n</code></pre>\n\n<p>If it <em>is</em> allowed, is a compiler likely to issue a warning? Is declaring a destructor to be <code>final</code> a workable idiom for indicating that a class is not intended to be used as a base class?</p>\n\n<p>(There is <a href=\"https://stackoverflow.com/questions/11704406/whats-the-point-of-a-final-virtual-function\">no point in doing this in a ultimate base class</a>, only a derived class.)</p>\n"}, {"tags": ["c++", "rest", "authentication", "casablanca"], "comments": [{"owner": {"reputation": 147, "user_id": 3723217, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/100004368100835/picture?type=large", "display_name": "PKGrem", "link": "https://stackoverflow.com/users/3723217/pkgrem"}, "edited": false, "score": 0, "creation_date": 1516755250, "post_id": 47556223, "comment_id": 83816366, "body": "Hi man, did you ever get this working?"}, {"owner": {"reputation": 11, "user_id": 6200858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/052f6038e36bf652cfa006e2a571b51f?s=128&d=identicon&r=PG&f=1", "display_name": "Pboris", "link": "https://stackoverflow.com/users/6200858/pboris"}, "reply_to_user": {"reputation": 147, "user_id": 3723217, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/100004368100835/picture?type=large", "display_name": "PKGrem", "link": "https://stackoverflow.com/users/3723217/pkgrem"}, "edited": false, "score": 0, "creation_date": 1516879957, "post_id": 47556223, "comment_id": 83874820, "body": "Hi, no I didn&#39;t. I gave up and used a screen-scrape instead."}, {"owner": {"reputation": 147, "user_id": 3723217, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/100004368100835/picture?type=large", "display_name": "PKGrem", "link": "https://stackoverflow.com/users/3723217/pkgrem"}, "edited": false, "score": 0, "creation_date": 1516882556, "post_id": 47556223, "comment_id": 83876506, "body": "Hi man, the issue here is that it is a server side issue.  If you use the url: <a href=\"https://fantasy.premierleague.com/drf/entry/team_id/event/24/picks\" rel=\"nofollow noreferrer\">fantasy.premierleague.com/drf/entry/team_id/event/24/picks</a>  You can get most of the same data"}, {"owner": {"reputation": 11, "user_id": 6200858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/052f6038e36bf652cfa006e2a571b51f?s=128&d=identicon&r=PG&f=1", "display_name": "Pboris", "link": "https://stackoverflow.com/users/6200858/pboris"}, "reply_to_user": {"reputation": 147, "user_id": 3723217, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/100004368100835/picture?type=large", "display_name": "PKGrem", "link": "https://stackoverflow.com/users/3723217/pkgrem"}, "edited": false, "score": 0, "creation_date": 1517056075, "post_id": 47556223, "comment_id": 83944770, "body": "OK, thanks. What I can get with this link is &#39;public&#39; data on the team I submitted the previous week. That gives me most of the data, but not selling price which is one of the items I need."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6200858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/052f6038e36bf652cfa006e2a571b51f?s=128&d=identicon&r=PG&f=1", "display_name": "Pboris", "link": "https://stackoverflow.com/users/6200858/pboris"}, "edited": false, "score": 0, "creation_date": 1532779737, "post_id": 51529179, "comment_id": 90108386, "body": "I&#39;ve tried this code, but still getting the 403 error. Output is as follows:"}, {"owner": {"reputation": 11, "user_id": 6200858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/052f6038e36bf652cfa006e2a571b51f?s=128&d=identicon&r=PG&f=1", "display_name": "Pboris", "link": "https://stackoverflow.com/users/6200858/pboris"}, "edited": false, "score": 0, "creation_date": 1532779765, "post_id": 51529179, "comment_id": 90108403, "body": "Calling HTTPRequestCustomHeadersAsync... {&quot;detail&quot;:&quot;Authentication credentials were not provided.&quot;}"}, {"owner": {"reputation": 11, "user_id": 6200858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/052f6038e36bf652cfa006e2a571b51f?s=128&d=identicon&r=PG&f=1", "display_name": "Pboris", "link": "https://stackoverflow.com/users/6200858/pboris"}, "edited": false, "score": 0, "creation_date": 1532781419, "post_id": 51529179, "comment_id": 90108850, "body": "I&#39;ve edited the original question to use a new fantasy team I&#39;ve set up just for this question so that I can publish username and password if you want to try it out."}], "tags": [], "owner": {"reputation": 11, "user_id": 10136126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0441f1840fcfb389193f98536de8b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mahdy Abd El-monem", "link": "https://stackoverflow.com/users/10136126/mahdy-abd-el-monem"}, "is_accepted": false, "score": 0, "last_activity_date": 1532563982, "last_edit_date": 1532563982, "creation_date": 1532562639, "answer_id": 51529179, "question_id": 47556223, "link": "https://stackoverflow.com/questions/47556223/http-authentication-in-casablanca/51529179#51529179", "title": "HTTP Authentication in Casablanca", "body": "<p>You need to access your data using the Auth. method, you don't have to use the credential configuration at all, all you need is providing the custom header data and the client URL.</p>\n\n<p>This works as the following:   </p>\n\n<pre><code>pplx::task&lt;void&gt; HTTPRequestCustomHeadersAsync(){\nhttp_client client(L\"https://fantasy.premierleague.com/drf/my-team/1463628/\");\n// Manually build up an HTTP request with header and request URI.\nhttp_request request(methods::GET);\nrequest.headers().add(L\"Authorization\", L\"Basic am9obi5kb2VAZ21haWwuY29tOmFiYzEyMw==\");\n\npplx::task&lt;http_response&gt; responses = client.request(request);\npplx::task&lt;web::json::value&gt; jvalue = responses.get().extract_json();\nstd::wcout &lt;&lt; jvalue.get().serialize();\n\nreturn client.request(request).then([](http_response response)\n{\n    // Print the status code.\n    std::wostringstream ss;\n    ss &lt;&lt; L\"Server returned returned status code \" &lt;&lt; response.status_code() &lt;&lt; L\".\" \n&lt;&lt; std::endl;\n    std:: wcout &lt;&lt; ss.str();\n\n}\n\n);\n}\n\nint main(int argc, char *args[])\n\n{\nstd::wcout &lt;&lt; L\"Calling HTTPRequestCustomHeadersAsync...\" &lt;&lt; std::endl;\nHTTPRequestCustomHeadersAsync().wait();\n\nreturn 0;   \n}\n</code></pre>\n\n<p>Don't forget the include files.</p>\n"}], "owner": {"reputation": 11, "user_id": 6200858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/052f6038e36bf652cfa006e2a571b51f?s=128&d=identicon&r=PG&f=1", "display_name": "Pboris", "link": "https://stackoverflow.com/users/6200858/pboris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 796, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1532781300, "creation_date": 1511969052, "last_edit_date": 1532781300, "question_id": 47556223, "link": "https://stackoverflow.com/questions/47556223/http-authentication-in-casablanca", "title": "HTTP Authentication in Casablanca", "body": "<p>I have a problem accessing Fantasy Premier League data, URL <a href=\"https://fantasy.premierleague.com/drf/my-team/1447063/\" rel=\"nofollow noreferrer\">https://fantasy.premierleague.com/drf/my-team/1447063/</a></p>\n\n<p>The URL is specific to me, so requires authentication to access it. I have used the code in the answer to <a href=\"https://stackoverflow.com/questions/31371659/set-basic-http-authentication-in-casablanca\">Set Basic HTTP Authentication in Casablanca</a> changing the credentials, the base64 conversion of them, the URL to U(\"<a href=\"https://fantasy.premierleague.com\" rel=\"nofollow noreferrer\">https://fantasy.premierleague.com</a>\") and the URI to L\"/drf/my-team/1447063/\". </p>\n\n<p>I have set up a dummy fantasy team so that I can safely publish the userid and password so that people can try it out. I don't use this password for anything else.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;vector&gt;\n#include &lt;cpprest\\http_client.h&gt;\n\nint main()\n{\n    // These lines are just to show the conversion to base64\n    char sCredentials[] = \"robin@laddershakers.com:jrhf9YYal\";\n    std::vector&lt;unsigned char&gt; vCred;\n    for (int x = 0; x &lt; (sizeof(sCredentials) / sizeof(sCredentials[0])) - 1; x++)\n        vCred.push_back(sCredentials[x]); // There must be an easier way to do this\n    auto b64Credentials = utility::conversions::to_base64(vCred);\n\n    using namespace web::http::client;\n    using namespace web::http;\n    // Creating http_client\n    http_client_config config;\n    credentials cred(L\"robin@laddershakers.com\", L\"jrhf9YYal\");\n    config.set_credentials(cred);\n    http_client client(U(\"https://fantasy.premierleague.com/drf/my-team/1447063/\"), config);\n    // create header\n    http_request req(methods::GET);\n    // Add base64 result to header\n    req.headers().add(L\"Authorization\", L\"Basic cm9iaW5AbGFkZGVyc2hha2Vycy5jb206anJoZjlZWWFs\");\n    //  req.set_request_uri(L\"/drf/my-team/1447063/\");\n    pplx::task&lt;http_response&gt; responses = client.request(req);\n    pplx::task&lt;web::json::value&gt; jvalue = responses.get().extract_json();\n    std::wcout &lt;&lt; jvalue.get().serialize();\n\n    return 0;\n}\n</code></pre>\n\n<p>The output produced is </p>\n\n<p>{\"detail\":\"Authentication credentials were not provided.\"}</p>\n\n<p>The http_response has result 403 FORBIDDEN, which suggests the URL is not accessible even with credentials, but the output suggests that the credentials are not found. If I enter the full URL into Chrome when I am already logged in to the site, I get the json data I want. If I enter the URL into Edge where I have not logged on to the site, I get the same output as above (credentials not provided).</p>\n\n<p>Am I flogging a dead horse here, or is there a way to access the data?</p>\n\n<p>I wasn't sure whether to post this as a comment to the original answer, but anyway I don't have enough reputation to do that. Apologies for the duplication.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 42750, "user_id": 189134, "user_type": "moderator", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jFsyb.png?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/189134/andy"}, "edited": false, "score": 0, "creation_date": 1511975088, "post_id": 47556182, "comment_id": 82073670, "body": "Comments are not for extended discussion; this conversation has been <a href=\"http://chat.stackoverflow.com/rooms/160116/discussion-on-question-by-adarsh-m-declaring-a-structure-pointer-as-a-return-typ\">moved to chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "is_accepted": false, "score": 0, "last_activity_date": 1511970553, "creation_date": 1511970553, "answer_id": 47556709, "question_id": 47556182, "link": "https://stackoverflow.com/questions/47556182/declaring-a-structure-pointer-as-a-return-type-for-a-function/47556709#47556709", "title": "Declaring a structure pointer as a return type for a function", "body": "<p>Your main problem is you are declaring node and ptr inside main. Your function definition for enter and the rest of your functions will not see the declarations inside main(). You need to move </p>\n\n<pre><code>struct node {\n    int info;\n    node* next;\n} * ptr, *y, *save, *start;\n</code></pre>\n\n<p>to before int main() to fix this issue.</p>\n"}], "owner": {"reputation": 1, "user_id": 9026470, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--9mFIefTzDQ/AAAAAAAAAAI/AAAAAAAAAiY/UfNbYCy71aQ/photo.jpg?sz=128", "display_name": "Adarsh M", "link": "https://stackoverflow.com/users/9026470/adarsh-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1511970553, "creation_date": 1511968938, "last_edit_date": 1511969816, "question_id": 47556182, "link": "https://stackoverflow.com/questions/47556182/declaring-a-structure-pointer-as-a-return-type-for-a-function", "title": "Declaring a structure pointer as a return type for a function", "body": "<p>The following code gives an error-<strong>\"DECLARATION SYNTAX ERROR\"</strong>\nHere node is a structure(for a linked list)\n[Forgive me if this is a stupid question ,as I am new to programming]</p>\n\n<pre><code>node * enter(int n)\n{\nptr=new node;\nptr-&gt;info=n;\nptr-&gt;next=NULL;\nreturn ptr;\n}\n</code></pre>\n\n<p>FULL CODE-</p>\n\n<pre><code>#include &lt;iostream.h&gt;\n#include &lt;conio.h&gt;\nvoid main()\n{\n    clrscr();\n    struct node {\n        int info;\n        node* next;\n    } * ptr, *y, *save, *start;\n    void insert(node*);\n    node* enter(int);\n    void display(node*);\n    start = NULL;\n    int inf;\n    cout &lt;&lt; \"Enter INFO:\";\n    cin &gt;&gt; inf;\n    y = enter(inf);\n    insert(y);\n    cout &lt;&lt; \"display:\\n\";\n    display(start);\n    getch();\n}\n\nnode* enter(int n)\n{\n    ptr = new node;\n    ptr-&gt;info = n;\n    ptr-&gt;next = NULL;\n    return ptr;\n}\nvoid insert(int* m)\n{\n    if (start == NULL) {\n        start = m;\n    }\n    else {\n        save = start;\n        start = m;\n        m-&gt;next = save;\n    }\n}\n\nvoid display(node* l)\n{\n    while (l != NULL) {\n        cout &lt;&lt; l-&gt;info &lt;&lt; \"-&gt;\";\n        l = l-&gt;next;\n    }\n    cout &lt;&lt; \"\\nOVER\";\n}\n</code></pre>\n"}, {"tags": ["c++", "binary"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 5, "creation_date": 1511968657, "post_id": 47556024, "comment_id": 82069267, "body": "One question per question please."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1511968810, "post_id": 47556024, "comment_id": 82069386, "body": "@Scheff &quot;Just try it&quot; is not a good approach here. Signed integer overflow as probably happens in Q2 is undefined behavior, which is really difficult to draw conclusions from."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1511968863, "post_id": 47556024, "comment_id": 82069427, "body": "You are supposing that <code>int</code> is 32 bits, but that&#39;s not required. <code>int</code> is allowed to be as small as 16 bits. See <a href=\"http://en.cppreference.com/w/cpp/types/integer\" rel=\"nofollow noreferrer\"><code>&lt;cstdint&gt;</code></a> if you need specific sized integers."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511968957, "post_id": 47556024, "comment_id": 82069497, "body": "Typical platforms (and some parts of the standard I think) require <a href=\"https://en.wikipedia.org/wiki/Two&#39;s_complement\" rel=\"nofollow noreferrer\">2&#39;s complement</a> which does not use a sign bit."}], "answers": [{"comments": [{"owner": {"reputation": 409, "user_id": 8445442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ROq8B.jpg?s=128&g=1", "display_name": "Immersion", "link": "https://stackoverflow.com/users/8445442/immersion"}, "edited": false, "score": 0, "creation_date": 1511969709, "post_id": 47556329, "comment_id": 82070075, "body": "&quot;Undefined behavior&quot; \u2013 what this approximately mean about? Random number, crash or something?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511969979, "post_id": 47556329, "comment_id": 82070293, "body": "By my reading <i>&quot; if E1 has a signed type and non-negative value, and E1 &#215; 2E2 is representable in the corresponding unsigned type of the result type, then that value, converted to the result type, is the resulting value&quot;</i> + <a href=\"http://eel.is/c++draft/expr#pre-4\" rel=\"nofollow noreferrer\"><i>If during the evaluation of an expression, the result is not mathematically defined or not in the range of representable values for its type, the behavior is undefined</i></a> makes <code>a &lt;&lt;= 1</code> UB, not <code>-2</code>. What am I missing?"}, {"owner": {"reputation": 409, "user_id": 8445442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ROq8B.jpg?s=128&g=1", "display_name": "Immersion", "link": "https://stackoverflow.com/users/8445442/immersion"}, "edited": false, "score": 0, "creation_date": 1511970330, "post_id": 47556329, "comment_id": 82070552, "body": "@Barry I got it. Can you say something about the first question?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511970517, "post_id": 47556329, "comment_id": 82070688, "body": "@nwp Hmmmmm. I think you might be right. My interpretation wouldn&#39;t make much sense in retrospect?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511970674, "post_id": 47556329, "comment_id": 82070808, "body": "It makes sense with a certain reading of &quot;converted to the result type&quot;. The question is if a conversion includes a truncation and hence the value is in range or not. I don&#39;t know the answer to that."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511970811, "post_id": 47556329, "comment_id": 82070915, "body": "@nwp The text changed in C++14. Check out the <a href=\"http://en.cppreference.com/w/cpp/language/operator_arithmetic\" rel=\"nofollow noreferrer\">bitwise shift section</a>. Now I&#39;m really confused."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1511972152, "post_id": 47556329, "comment_id": 82071826, "body": "hmm, I think the result is implementation defined. Because converting UINT_MAX-1 to <code>int</code> is such. So the result is not necessarily -2. You must consult the compiler manual."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1511975521, "post_id": 47556329, "comment_id": 82073938, "body": "@Barry so the purpose was to allow it to be used in a constant expression. It wasn&#39;t the purpose to define a value for it. &quot;If the destination type is signed, the value is unchanged if it can be represented in the destination type; otherwise, the value is implementation-defined.&quot;"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1511971859, "last_edit_date": 1511971859, "creation_date": 1511969363, "answer_id": 47556329, "question_id": 47556024, "link": "https://stackoverflow.com/questions/47556024/how-many-bits-are-needed-for-signed-int-and-behavior-at-bitwise-shift-to-the-lef/47556329#47556329", "title": "How many bits are needed for signed int and behavior at bitwise shift to the left of a number that is a limit of his type", "body": "<p>The relevant rule here is <a href=\"http://eel.is/c++draft/expr.shift#2\" rel=\"nofollow noreferrer\">[expr.shift]/2</a>:</p>\n\n<blockquote>\n  <p>The value of <code>E1 &lt;&lt; E2</code> is <code>E1</code> left-shifted <code>E2</code> bit positions; vacated bits are zero-filled. If <code>E1</code> has an unsigned type, the value of the result is E1 \u00d7 2<sup>E2</sup>, reduced modulo one more than the maximum value representable in the result type. Otherwise, if <code>E1</code> has a signed type and non-negative value, and E1 \u00d7 2<sup>E2</sup> is representable in the corresponding unsigned type of the result type, then that value, converted to the result type, is the resulting value; otherwise, the behavior is undefined.</p>\n</blockquote>\n\n<p>So, assuming you're on a platform with 32-bit 2s complement <code>int</code>, this:</p>\n\n<pre><code>int a = 2147483647;\na &lt;&lt;= 1;\n</code></pre>\n\n<p><code>a</code> has a signed type and <code>2147483647 x 2</code> is representable in <code>unsigned int</code>, so we get <code>0xfffffffe</code> as an <code>int</code>, which is <code>-2</code>.</p>\n\n<p>And this:</p>\n\n<pre><code>unsigned int b = 4294967295;\nb &lt;&lt;= 1;\n</code></pre>\n\n<p>is just modular arithmetic. We start with <code>0xffffffff</code>. Shift by one would give you <code>0x1fffffffe</code>, but then modulo 2<sup>32</sup> and get back <code>0xfffffffe</code>, which is <code>4294967294</code>.</p>\n\n<p>Both are well-defined behavior. However, note that <code>a &lt;&lt; 2</code> would be undefined behavior because <code>2147483647 x 4</code> is not representable in <code>unsigned int</code>. </p>\n"}], "owner": {"reputation": 409, "user_id": 8445442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ROq8B.jpg?s=128&g=1", "display_name": "Immersion", "link": "https://stackoverflow.com/users/8445442/immersion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 47556329, "answer_count": 1, "score": 1, "last_activity_date": 1511971859, "creation_date": 1511968463, "question_id": 47556024, "link": "https://stackoverflow.com/questions/47556024/how-many-bits-are-needed-for-signed-int-and-behavior-at-bitwise-shift-to-the-lef", "title": "How many bits are needed for signed int and behavior at bitwise shift to the left of a number that is a limit of his type", "body": "<p><strong>Question \u2116 1:</strong>\n<em>how many bits are needed for <code>signed int</code>?</em></p>\n\n<p>I know that <code>int</code> requires 4 bytes or 32 bits (it depends on architecture, but usually it is so), and i also know that there one bit for sign of a number.</p>\n\n<p>2147483647 is only 31 bits, not 32. So, one bit for a sign?<br/>\n4294967295 is 32 bits. There no one bit for a sign (because <code>unsigned</code>).</p>\n\n<p>Why specify that <code>signed int</code> have 32 bits, when in fact its value can has only 31? Why not specify that one bit is given for a sign?</p>\n\n<p><br/>\n<strong>Question \u2116 2:</strong> \n<em>behavior at bitwise shift to the left of a number that is a limit of his type?</em></p>\n\n<p>What will be the value of a and b?</p>\n\n<pre><code>int a = 2147483647;\na &lt;&lt;= 1;\n\nunsigned int b = 4294967295;\nb &lt;&lt;= 1;\n</code></pre>\n\n<p>How does the value change when the number reached the limit of its type?<br/>\nSomewhere write that the behavior will be like a \u2116 1, and somewhere write, that the behavior will be like a \u2116 2.</p>\n\n<pre><code>1111111111111111111111111111111 &lt;&lt; 1 = 1111111111111111111111111111110; // \u2116 1.\n1111111111111111111111111111111 &lt;&lt; 1 = 10; // \u2116 2.\n</code></pre>\n"}, {"tags": ["c++", "qt", "rest", "drive"], "comments": [{"owner": {"reputation": 486, "user_id": 8016180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f-1ZzXKs7nk/AAAAAAAAAAI/AAAAAAAAAKQ/oy5pT4VpAMs/photo.jpg?sz=128", "display_name": "Rolf Winter", "link": "https://stackoverflow.com/users/8016180/rolf-winter"}, "edited": false, "score": 0, "creation_date": 1512119897, "post_id": 47556008, "comment_id": 82137227, "body": "Isn&#39;t &quot;files&quot; missing in the URL after v3?"}, {"owner": {"reputation": 1, "user_id": 9026184, "user_type": "registered", "profile_image": "https://graph.facebook.com/1137139139751284/picture?type=large", "display_name": "Roman  Nikishin", "link": "https://stackoverflow.com/users/9026184/roman-nikishin"}, "reply_to_user": {"reputation": 486, "user_id": 8016180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-f-1ZzXKs7nk/AAAAAAAAAAI/AAAAAAAAAKQ/oy5pT4VpAMs/photo.jpg?sz=128", "display_name": "Rolf Winter", "link": "https://stackoverflow.com/users/8016180/rolf-winter"}, "edited": false, "score": 0, "creation_date": 1512133884, "post_id": 47556008, "comment_id": 82145477, "body": "I add &quot;files&quot; in the URL after v3. Image uploaded.  But when you view this file, an error occurs: the file is corrupted.  It&#39;s strange that in the <a href=\"https://developers.google.com/drive/v3/web/simple-upload\" rel=\"nofollow noreferrer\">sample</a>  query there is no &quot;files&quot;"}], "owner": {"reputation": 1, "user_id": 9026184, "user_type": "registered", "profile_image": "https://graph.facebook.com/1137139139751284/picture?type=large", "display_name": "Roman  Nikishin", "link": "https://stackoverflow.com/users/9026184/roman-nikishin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511968373, "creation_date": 1511968373, "question_id": 47556008, "link": "https://stackoverflow.com/questions/47556008/could-not-load-image-into-google-drive-using-rest-api-v3simple-upload-and-qt5", "title": "Could not load image into Google drive using REST api v3(Simple Upload) and qt5.9", "body": "<p>I use the QT5.9 and the google REST API to work with google drive.\nI'm trying to download an image using \"simple upload\". I receive an error: \"Error transferring <a href=\"https://www.googleapis.com/upload/drive/v3?uploadType=media\" rel=\"nofollow noreferrer\">https://www.googleapis.com/upload/drive/v3?uploadType=media</a> - server replied: Not Found\"</p>\n\n<p>Using the Multipart Upload option, there are no problems. The image is loaded.</p>\n\n<p>Please help me to find the error when using \"simple upload\".</p>\n\n<p><strong><a href=\"https://developers.google.com/drive/v3/web/multipart-upload\" rel=\"nofollow noreferrer\">Multipart Upload</a> code(successfully)</strong></p>\n\n<pre><code>void MainWindow::upload()\n{\n    QUrl url(\"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart\");\n    QNetworkRequest request;\n    request.setUrl(url);\n\n    QString bound = \"foo_bar_baz\";\n    QByteArray data(QString(\"--\"+bound+\"\\r\\n\").toLatin1());\n    data.append(\"Content-Type: application/json; charset=UTF-8\\r\\n\\r\\n\");\n    data.append(\"{\\\"name\\\":\\\"1\\\"}\\r\\n\");\n    data.append(\"--\"+bound+\"\\r\\n\");\n    data.append(\"Content-Type: image/jpeg\\r\\n\\r\\n\");\n\n    QFile file(\"1.jpg\");\n    file.open(QIODevice::ReadOnly);\n    data.append(file.readAll());\n    data.append(\"\\r\\n\");\n    data.append(\"--\"+bound+\"--\\r\\n\");\n\n    request.setHeader(QNetworkRequest::ContentTypeHeader, QString(\"multipart/related;boundary=\"+bound).toLatin1());\n    request.setHeader(QNetworkRequest::ContentLengthHeader, \n    QString::number(data.length()).toLatin1());\n    QString bearer = \"Bearer \" + google.token();\n    request.setRawHeader(QString(\"Authorization\").toLatin1(),bearer.toLatin1());\n    QNetworkAccessManager *am = new QNetworkAccessManager;\n    am-&gt;post(request,data);\n}\n</code></pre>\n\n<p><strong><a href=\"https://developers.google.com/drive/v3/web/simple-upload\" rel=\"nofollow noreferrer\">Simple Upload</a></strong>(Error transferring  server replied: Not Found\")</p>\n\n<pre><code>void MainWindow::upload()\n{\n    QNetworkAccessManager *manager = new QNetworkAccessManager(this);\n\n\n    QString imagePath(\"1.jpg\");\n\n    QFile file(imagePath);\n    file.open(QIODevice::ReadOnly);\n\n    QByteArray data;\n    data.append(\"\\r\\n\\r\\n\");\n    data.append(file.readAll());\n    file.close();\n\n\n    QNetworkRequest request;\n    QUrl urlToUpload(\"https://www.googleapis.com/upload/drive/v3?uploadType=media\");\n    request.setUrl(urlToUpload);\n\n    QString bearer = \"Bearer \" + google.token();\n    qDebug() &lt;&lt;  bearer;\n    request.setHeader(QNetworkRequest::ContentTypeHeader,QString(\"image/jpeg\").toLatin1());\n    request.setHeader(QNetworkRequest::ContentLengthHeader,QString::number(data.length()).toLatin1());\n    request.setRawHeader(QString(\"Authorization\").toLatin1(), bearer.toLatin1());\n    QNetworkReply *reply   =  manager-&gt;post(request,data);\n}\n</code></pre>\n"}, {"tags": ["c++", "matrix"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 5, "creation_date": 1511968327, "post_id": 47555942, "comment_id": 82069031, "body": "Search the internet for &quot;C++ FAQ Matrix&quot;."}, {"owner": {"reputation": 627, "user_id": 4280848, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1fa047b13897004762a4c4675778d209?s=128&d=identicon&r=PG&f=1", "display_name": "pepperjack", "link": "https://stackoverflow.com/users/4280848/pepperjack"}, "edited": false, "score": 0, "creation_date": 1511968335, "post_id": 47555942, "comment_id": 82069038, "body": "Then overload the operator[] and return a row or column (depending on whether you want a math representation of it or a programming representation), then have another overloaded operator for that row/column."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511968335, "post_id": 47555942, "comment_id": 82069039, "body": "<a href=\"https://stackoverflow.com/questions/15762878/c-overload-operator\">Related</a>."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 5, "creation_date": 1511968412, "post_id": 47555942, "comment_id": 82069092, "body": "<code>int **mat;</code> -- this isn&#39;t going to end well. Use a <code>std::vector</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1511968519, "post_id": 47555942, "comment_id": 82069162, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15762878/c-overload-operator\">C++ overload operator &#91; &#93;&#91; &#93;</a>"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1511968599, "post_id": 47555942, "comment_id": 82069224, "body": "@Quentin attempting to answer the question before it&#39;s asked huh?  If only there was rep for upvoted comments then you&#39;d be rewarded for the prevention rather than cure policy."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1511970971, "post_id": 47555942, "comment_id": 82071019, "body": "You may find this: <a href=\"https://isocpp.org/wiki/faq/freestore-mgmt#multidim-arrays4\" rel=\"nofollow noreferrer\">isocpp.org/wiki/faq/freestore-mgmt#multidim-arrays4</a> helpful."}], "answers": [{"tags": [], "owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "is_accepted": false, "score": 0, "last_activity_date": 1511969844, "creation_date": 1511969844, "answer_id": 47556484, "question_id": 47555942, "link": "https://stackoverflow.com/questions/47555942/implement-matrix-as-a-class-in-c/47556484#47556484", "title": "Implement matrix as a class in C++", "body": "<p>Let's say we have <code>vector&lt;vector&lt;int&gt;&gt; x</code>The operator [][] is really (ignoring out of bounds) <code>vector&lt;int&gt; b = x[0]</code> then <code>int = b[0]</code> combined into one line. I.e accessing the first array then the subscript operator of the second.</p>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 1975, "user_id": 6575139, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FwI5j.jpg?s=128&g=1", "display_name": "BobMorane", "link": "https://stackoverflow.com/users/6575139/bobmorane"}, "is_accepted": false, "score": 1, "last_activity_date": 1511971535, "last_edit_date": 1511971535, "creation_date": 1511970405, "answer_id": 47556661, "question_id": 47555942, "link": "https://stackoverflow.com/questions/47555942/implement-matrix-as-a-class-in-c/47556661#47556661", "title": "Implement matrix as a class in C++", "body": "<p>Instead, you could overload the function call operator (<code>operator()()</code>), to get something like this:</p>\n\n<pre><code>int operator()(int p_row, int p_column);\n</code></pre>\n\n<p>which is legal and clean. I would allow you to write something like this:</p>\n\n<pre><code>// Create and fill in matrix called 'm'...\nint matrixElement = m(0, 0); // get element m[0][0]\n// ...\n</code></pre>\n\n<p>Here is an <a href=\"https://www.tutorialspoint.com/cplusplus/function_call_operator_overloading.htm\" rel=\"nofollow noreferrer\">example</a> of how to overload this operator.</p>\n"}, {"tags": [], "owner": {"reputation": 7192, "user_id": 175157, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c527c9a738c995e46e98f6a24884108f?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/175157/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1511970610, "creation_date": 1511970610, "answer_id": 47556729, "question_id": 47555942, "link": "https://stackoverflow.com/questions/47555942/implement-matrix-as-a-class-in-c/47556729#47556729", "title": "Implement matrix as a class in C++", "body": "<p>You can store the data in a continuous array using <code>std::vector</code> and then supply your own indexing operator which returns a pointer to the beginning of the row.</p>\n\n<pre><code>class Matrix\n{\n    int rows, columns;\n    std::vector&lt;int&gt; data;\npublic:\n    /*...*/\n\n    // The overloaded operator[] returns a pointer to the beginning\n    // of the requested row, which can then be indexed for the column\n    // without checking the boundaries.\n    int* operator[](int r){\n        return &amp;data[r*columns];\n    }\n};\n</code></pre>\n\n<p>Using a vector of vectors is less efficient because the data gets spread to different memory locations. If you need bounds checking you can wrap the pointer in your own class and overload its <code>operator[]</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 7447948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0b501c87683fe4d505de52033fbca92?s=128&d=identicon&r=PG&f=1", "display_name": "tsahib", "link": "https://stackoverflow.com/users/7447948/tsahib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1511971535, "creation_date": 1511968165, "last_edit_date": 1511968275, "question_id": 47555942, "link": "https://stackoverflow.com/questions/47555942/implement-matrix-as-a-class-in-c", "title": "Implement matrix as a class in C++", "body": "<p>I need to implement matrix as a class in C++.</p>\n\n<p>This is my class:</p>\n\n<pre><code>class {\nprivate:\n    int rows, columns;\n    int **mat;\n};\n</code></pre>\n\n<p>In the main, I need to start the matrix in the regular way. For example : <code>m[0][0]=1;</code></p>\n\n<p>I thought to overloading the <code>operator[][]</code> but it is forbidden. </p>\n\n<p>I would like to get some help. thanks.</p>\n"}, {"tags": ["c++", "gcc", "tbb"], "comments": [{"owner": {"reputation": 6891, "user_id": 2204581, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e49d077f4d914cfc9d81299a453fcd2?s=128&d=identicon&r=PG", "display_name": "mrks", "link": "https://stackoverflow.com/users/2204581/mrks"}, "edited": false, "score": 0, "creation_date": 1511981423, "post_id": 47555685, "comment_id": 82077124, "body": "Intel people say that this combination of OS and compiler is not supported. I&#39;d still love to find a fix for this, especially since the rest of TBB seems to work."}, {"owner": {"reputation": 517, "user_id": 2509467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/217d0f4c3e155e6b1723d7617f4bb6f2?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2509467/alex"}, "edited": false, "score": 0, "creation_date": 1512729146, "post_id": 47555685, "comment_id": 82384831, "body": "The problem is discussing on <a href=\"https://software.intel.com/en-us/comment/1916078\" rel=\"nofollow noreferrer\">the TBB fourm</a>"}], "owner": {"reputation": 6891, "user_id": 2204581, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e49d077f4d914cfc9d81299a453fcd2?s=128&d=identicon&r=PG", "display_name": "mrks", "link": "https://stackoverflow.com/users/2204581/mrks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1512030779, "creation_date": 1511967372, "last_edit_date": 1511968169, "question_id": 47555685, "link": "https://stackoverflow.com/questions/47555685/intel-tbb-causes-segfault-in-exception-handling-os-x-gcc-7-2", "title": "Intel TBB causes segfault in exception handling (OS X / gcc 7.2)", "body": "<p>This correct example causes a segfault in the <code>std::cout</code> line with specific compilation parameters:</p>\n\n<pre><code>#include &lt;exception&gt;\n#include &lt;iostream&gt;\n\nint main(int argc, char** argv) {\n  try {\n    throw std::runtime_error(\"BLA\");\n  } catch (const std::exception&amp; exception) {\n    std::cout &lt;&lt; exception.what() &lt;&lt; std::endl;\n  }\n}\n</code></pre>\n\n<p>It only occurs when compiling it on OS X with gcc-7.2 and Intel TBB:</p>\n\n<pre><code>g++-7 exception.cpp /usr/local/lib/libtbb.dylib\n</code></pre>\n\n<p>Since the OS X version of TBB is built with clang and linked against libc++, I tried building it with g++-7 from the repo. That does not change anything. Also, the order of arguments does not matter.</p>\n\n<p>On Ubuntu, everything is fine.</p>\n\n<p>This feels like a bug somewhere, but I am not sure where. Any ideas on how to work around this or where to file a bug? I also opened up a <a href=\"https://software.intel.com/en-us/forums/intel-threading-building-blocks/topic/749200\" rel=\"nofollow noreferrer\">thread</a> in the TBB forums.</p>\n\n<hr>\n\n<p>Some more information that might be helpful:</p>\n\n<p>Stacktrace</p>\n\n<pre><code>* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=EXC_I386_GPFLT)\n    frame #0: 0x0000000100000da1 a.out`main(argc=1, argv=0x00007fff5fbff880) at exception.cpp:8\n   5      try {\n   6        throw std::runtime_error(\"BLA\");\n   7      } catch (const std::exception&amp; exception) {\n-&gt; 8        std::cout &lt;&lt; exception.what() &lt;&lt; std::endl;\n   9      }\n   10   }\n</code></pre>\n\n<p>Versions</p>\n\n<pre><code>[:~/tmp] $ g++-7 --version\ng++-7 (Homebrew GCC 7.2.0) 7.2.0\n[:~/tmp] $ brew info tbb\ntbb: stable 2018_U1 (bottled)\n[:~/tmp] $ sw_vers -productVersion\n10.12.6\n</code></pre>\n\n<p>ASAN</p>\n\n<pre><code>ASAN:DEADLYSIGNAL\n=================================================================\n==9698==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000000 (pc 0x000104c03b22 bp 0x7fff5affc940 sp 0x7fff5affc900 T0)\n==9698==The signal is caused by a READ memory access.\n==9698==Hint: address points to the zero page.\n    #0 0x104c03b21 in main (/Users/markus/tmp/./a.out+0x100000b21)\n    #1 0x7fffa9734234 in start (/usr/lib/system/libdyld.dylib+0x5234)\n\nAddressSanitizer can not provide additional info.\nSUMMARY: AddressSanitizer: SEGV (/Users/markus/tmp/./a.out+0x100000b21) in main\n==9698==ABORTING\nAbort trap: 6\n</code></pre>\n"}, {"tags": ["c++", "c", "windows", "dll", "memory-leaks"], "comments": [{"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 3, "creation_date": 1511967440, "post_id": 47555600, "comment_id": 82068315, "body": "It will be hard to tell without looking into the code. Try simple things. Does leak if you don&#39;t call any method, just load the library? If so, yikes. If not, then find a method that causes tis. On WIdnows you might find it tnds to allocate things at the same place  and can set a break point programmatically when that memory address is allocated - you could then debug where the problem is. More simply, you may find the &quot;contract&quot; for the API is they allocate stuff but you are supoosed to free it. Are therre any docs/comments/developers to ask?"}, {"owner": {"reputation": 508, "user_id": 6885710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/D8MzG.jpg?s=128&g=1", "display_name": "rranjik", "link": "https://stackoverflow.com/users/6885710/rranjik"}, "reply_to_user": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1512020195, "post_id": 47555600, "comment_id": 82090752, "body": "@doctorlove thanks for your comment. Just loading and unloading does not crash my app. As you mentioned, I can find the specific function call after calling which this issue happens. But, why ? Why does a resource leak cause a crash here ? that too, at some completely innocent part of my app ? <code>int main { int* newInteger = new int; return 0;}</code> does not crash, in the same lines why does the leak here, cause failure ? Can you please explain what exactly is causing the crash here ? I will read through the API contracts, but, help me understand the issue. CRT linkage is same everywhere."}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1512035685, "post_id": 47555600, "comment_id": 82098178, "body": "I&#39;d need more details on the crash. Try to make a core dump and see what that tells you?"}], "owner": {"reputation": 508, "user_id": 6885710, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/D8MzG.jpg?s=128&g=1", "display_name": "rranjik", "link": "https://stackoverflow.com/users/6885710/rranjik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 315, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511967502, "creation_date": 1511967126, "question_id": 47555600, "link": "https://stackoverflow.com/questions/47555600/resource-leak-across-dll-boundaries", "title": "Resource leak across dll boundaries", "body": "<p>I have a third party (open-source) dll written in C, let's call it <code>library_c_style_0.2.dll</code>. In my C++ application I have to call methods from this dll. I will make calls to these methods from inside a dll, say <code>library0.1.dll</code>, loaded by my <code>application.exe</code>. After using the dll <code>library_c_style_0.2.dll</code>(which I load at run-time using LoadLibrary) I'm calling FreeLibrary. I can see App Verifier complaining that <code>A heap allocation was leaked.</code> I ignore this and continue and I see failures in some unrelated parts of my app starting to fail at, <code>HeapAlloc</code>. </p>\n\n<p>Thus to verify this I used crtdbg, and wrote a mini simulation of the scenario like the following. The export from <code>library_c_style_0.2.dll</code> is like so,</p>\n\n<pre><code>int hello_from_c_style_library(const char* string_to_print)\n{\n    _CrtMemState s1, s2, s3;\n    _CrtMemCheckpoint(&amp;s1); //create on checkpoint\n\n    int length = strlen(string_to_print);\n    char * c = malloc(length+1); //allocate memory for the sting\n    StringCchCopyA(c, length + 1, string_to_print);\n    printf(\"%s\", c);\n\n    //comment the folling lines if you pretend that you will foget to free\n    //free(c);\n\n    _CrtMemCheckpoint(&amp;s3); //one more after resource allocation\n    if (_CrtMemDifference(&amp;s2, &amp;s3, &amp;s1))//find the difference now\n    {\n        //returns 1 if memory is leaked; 0 otherwise\n        OutputDebugString(L\"Memory Leaked!!!\");\n        _CrtDumpMemoryLeaks();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>and my <code>library0.1.dll</code> that will load this at run-time would be like so,</p>\n\n<pre><code>HINSTANCE hinstLib = LoadLibrary(TEXT(\"library_c_style_0.2.dll\"));\nif (hinstLib != NULL)\n{\n    //GetProcAddress of hello_from_c_style_library\n    //call the funtion\n    //we are now done with the third party dll, free it\n\n    FreeLibrary(hinstLib);\n}\n</code></pre>\n\n<p>But, if I uncomment the <code>free(c)</code> all is well. (and there was no problem when I wrote the sample <code>library_c_style_0.2.dll</code> in C++ with operator <code>new</code>, though it leaked)</p>\n\n<p>As we can see <code>library_c_style_0.2.dll</code> leaks the memory that it allocated for <code>c</code> and I see the call to <code>FreeLibrary(hinstLib)</code> failing with the error <code>A heap allocation was leaked.</code> on AppVerifier.</p>\n\n<p>The output window dump from CRT is as follows,</p>\n\n<pre><code>Memory Leaked!!!Detected memory leaks!\nDumping objects -&gt;\nlibrary_c_style_0.2.c(23) : {69} normal block at 0x08B31FF0, 6 bytes long.\n Data: &lt;hello &gt; 68 65 6C 6C 6F 00 \nObject dump complete.\n</code></pre>\n\n<p>as we can see <code>hello</code>'s 6 bytes are leaked. </p>\n\n<p>This is just a simulation, the actual third party dll (for which library_c_style_0.2.dll is the placeholder here) is leaking some resource and is causing my app to crash.</p>\n\n<p>What can I do ? Is there a way I can deal with this without having to look into the third party C dll that leaks the resource ? If I ignore this, it crashes some unrelated part of my C++ app on <code>HeapAlloc</code>. </p>\n\n<p>Why does this happen ? Any pointers will be helpful. I'm new to the Windows environment. Does every dll have its own heap ?! Is the error thrown because, I try to free the library while it is holding a resource ?</p>\n\n<p>Is there a workaround to avoid looking into <code>library_c_style_0.2.dll</code>'s code ? Is there a problem with the way I link to the run-time ? I'm statically linking to it now. In production I use <code>Multi-threaded (/MT)</code>and I can see the leaky dll (which is a pretty huge code base) also uses the same.</p>\n\n<p>I would want to understand the basics. Why does resource leak cause a failure here ? Please explain the internals about, what exactly is going on here.</p>\n"}, {"tags": ["c++", "error-handling", "segmentation-fault"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1511966990, "post_id": 47555523, "comment_id": 82067943, "body": "Figure out how to run your program under a debugger. It should stop at the line that causes the crash and you should be able to look into variables to see the state of your program."}, {"owner": {"reputation": 791, "user_id": 7856349, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c4c717acb20448947a9b1eb6016f189e?s=128&d=identicon&r=PG&f=1", "display_name": "WDR", "link": "https://stackoverflow.com/users/7856349/wdr"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511967373, "post_id": 47555523, "comment_id": 82068259, "body": "@Fran&#231;oisAndrieux: Hi , if you read this line of my question <code>(putting all the code inside man()</code> the only difference is putting the out of main codes inside the main. just this."}], "answers": [{"comments": [{"owner": {"reputation": 791, "user_id": 7856349, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c4c717acb20448947a9b1eb6016f189e?s=128&d=identicon&r=PG&f=1", "display_name": "WDR", "link": "https://stackoverflow.com/users/7856349/wdr"}, "edited": false, "score": 0, "creation_date": 1511967664, "post_id": 47555748, "comment_id": 82068497, "body": "Can I initialize all of them to zero like these <code>espeak_POSITION_TYPE position_type=0;</code> or <code>espeak_AUDIO_OUTPUT output=0;</code>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 791, "user_id": 7856349, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c4c717acb20448947a9b1eb6016f189e?s=128&d=identicon&r=PG&f=1", "display_name": "WDR", "link": "https://stackoverflow.com/users/7856349/wdr"}, "edited": false, "score": 0, "creation_date": 1511967722, "post_id": 47555748, "comment_id": 82068557, "body": "I am not familiar with that library, but looks like they are structures not simple types, if this is the case then no."}, {"owner": {"reputation": 791, "user_id": 7856349, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c4c717acb20448947a9b1eb6016f189e?s=128&d=identicon&r=PG&f=1", "display_name": "WDR", "link": "https://stackoverflow.com/users/7856349/wdr"}, "edited": false, "score": 0, "creation_date": 1511967919, "post_id": 47555748, "comment_id": 82068730, "body": "So, if they are structures, I must set all their variable to zero one-by-one?"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 791, "user_id": 7856349, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c4c717acb20448947a9b1eb6016f189e?s=128&d=identicon&r=PG&f=1", "display_name": "WDR", "link": "https://stackoverflow.com/users/7856349/wdr"}, "edited": false, "score": 1, "creation_date": 1511967957, "post_id": 47555748, "comment_id": 82068759, "body": "@user145959 <code>espeak_AUDIO_OUTPUT output = {0};</code> will 0 the whole struct."}, {"owner": {"reputation": 791, "user_id": 7856349, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c4c717acb20448947a9b1eb6016f189e?s=128&d=identicon&r=PG&f=1", "display_name": "WDR", "link": "https://stackoverflow.com/users/7856349/wdr"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1511968103, "post_id": 47555748, "comment_id": 82068866, "body": "@UKMonkey: should I initialize <i>pointers to 0 too? for example `    void</i> user_data=0;`"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 791, "user_id": 7856349, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c4c717acb20448947a9b1eb6016f189e?s=128&d=identicon&r=PG&f=1", "display_name": "WDR", "link": "https://stackoverflow.com/users/7856349/wdr"}, "edited": false, "score": 1, "creation_date": 1511968365, "post_id": 47555748, "comment_id": 82069058, "body": "@user145959 the thing about initializing variables, is that it&#39;s something that you don&#39;t NEED to do at all as a rule of thumb.  The problem is that if you dont&#39; do it, you may be tempted to use it before it has a value; which leads to undefined behavior.  If you want to ensure that you never, ever use a variable uninitialised (a wise plan), then you should initialise everything; classes being an exception; as they have a constructor so can ensure that they themselves are correctly initialised"}, {"owner": {"reputation": 791, "user_id": 7856349, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c4c717acb20448947a9b1eb6016f189e?s=128&d=identicon&r=PG&f=1", "display_name": "WDR", "link": "https://stackoverflow.com/users/7856349/wdr"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1511968641, "post_id": 47555748, "comment_id": 82069252, "body": "@UKMonkey:  <code>app3.cpp: In function \u2018int main()\u2019: app3.cpp:7:30: error: invalid conversion from \u2018int\u2019 to \u2018espeak_AUDIO_OUTPUT\u2019 [-fpermissive]  espeak_AUDIO_OUTPUT output={0};</code>"}, {"owner": {"reputation": 791, "user_id": 7856349, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c4c717acb20448947a9b1eb6016f189e?s=128&d=identicon&r=PG&f=1", "display_name": "WDR", "link": "https://stackoverflow.com/users/7856349/wdr"}, "edited": false, "score": 0, "creation_date": 1511968772, "post_id": 47555748, "comment_id": 82069354, "body": "Also <code>app3.cpp: In function \u2018int main()\u2019: app3.cpp:6:36: error: invalid conversion from \u2018int\u2019 to \u2018espeak_POSITION_TYPE\u2019 [-fpermissive]  espeak_POSITION_TYPE position_type=0;                                     ^ app3.cpp:7:28: error: invalid conversion from \u2018int\u2019 to \u2018espeak_AUDIO_OUTPUT\u2019 [-fpermissive]  espeak_AUDIO_OUTPUT output=0;</code>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 791, "user_id": 7856349, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c4c717acb20448947a9b1eb6016f189e?s=128&d=identicon&r=PG&f=1", "display_name": "WDR", "link": "https://stackoverflow.com/users/7856349/wdr"}, "edited": false, "score": 1, "creation_date": 1511968943, "post_id": 47555748, "comment_id": 82069486, "body": "@user145959 looks like this is a C lib, and in their example they use <code>memset</code> already. Probably it would be easiest to initialize rest of them the same way. I already mentioned that in my answer."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 2, "last_activity_date": 1511967539, "creation_date": 1511967539, "answer_id": 47555748, "question_id": 47555523, "link": "https://stackoverflow.com/questions/47555523/why-it-gives-me-segmentation-fault-error-when-i-change-this-code/47555748#47555748", "title": "Why it gives me &quot;segmentation fault&quot; error when I change this code?", "body": "<p>Global variables are zero initialized in C++, local variables are not and it is Undefined Behavior to read from them. You have plenty of them in your code, for example:</p>\n\n<pre><code>espeak_POSITION_TYPE position_type;\nespeak_AUDIO_OUTPUT output;\n</code></pre>\n\n<p>you need to edit your code and make sure that all variables are properly initialized. For example with <code>memset</code> if they are POD, the same way as it is done to <code>voice</code>.</p>\n"}], "owner": {"reputation": 791, "user_id": 7856349, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c4c717acb20448947a9b1eb6016f189e?s=128&d=identicon&r=PG&f=1", "display_name": "WDR", "link": "https://stackoverflow.com/users/7856349/wdr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 47555748, "answer_count": 1, "score": -2, "last_activity_date": 1511967539, "creation_date": 1511966889, "last_edit_date": 1511967048, "question_id": 47555523, "link": "https://stackoverflow.com/questions/47555523/why-it-gives-me-segmentation-fault-error-when-i-change-this-code", "title": "Why it gives me &quot;segmentation fault&quot; error when I change this code?", "body": "<p>I can compile this code without any errors:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;espeak/speak_lib.h&gt;\n\n\n\nespeak_POSITION_TYPE position_type;\nespeak_AUDIO_OUTPUT output;\nchar *path=NULL;\nint Buflength = 500, Options=0;\nvoid* user_data;\nt_espeak_callback *SynthCallback;\nespeak_PARAMETER Parm;\n\n\n\nchar Voice[] = {\"English\"};\n\n\nchar text[30] = {\"this is a english test\"};\nunsigned int Size,position=0, end_position=0, flags=espeakCHARS_AUTO, *unique_identifier;\n\n\n\n\nint main(int argc, char* argv[] ) \n{\n    output = AUDIO_OUTPUT_PLAYBACK;\n    int I, Run = 1, L;    \n    espeak_Initialize(output, Buflength, path, Options ); \n    espeak_SetVoiceByName(Voice);\n    const char *langNativeString = \"en\"; //Default to US English\n    espeak_VOICE voice;\n    memset(&amp;voice, 0, sizeof(espeak_VOICE)); // Zero out the voice first\n    voice.languages = langNativeString;\n    voice.name = \"US\";\n    voice.variant = 2;\n    voice.gender = 1;\n//  espeak_SetVoiceByProperties(&amp;voice);\n    Size = strlen(text)+1;    \n\n    espeak_Synth( text, Size, position, position_type, end_position, flags,\n    unique_identifier, user_data );\n    espeak_Synchronize( );\n\n    return 0;\n}\n</code></pre>\n\n<p>But I get <code>segmentation fault</code> error when try to compile this code(putting all the code inside <code>man()</code>:</p>\n\n<pre><code>   #include &lt;string.h&gt;\n    #include &lt;malloc.h&gt;\n    #include &lt;espeak/speak_lib.h&gt;\n\n    int main(){\n    espeak_POSITION_TYPE position_type;\n    espeak_AUDIO_OUTPUT output;\n    char *path=NULL;\n    int Buflength = 500, Options=0;\n    void* user_data;\n    t_espeak_callback *SynthCallback;\n    espeak_PARAMETER Parm;\n    char Voice[] = {\"English\"};\n    unsigned int Size,position=0, end_position=0, flags=espeakCHARS_AUTO, *unique_identifier;\n\n        output = AUDIO_OUTPUT_PLAYBACK;\n        int I, Run = 1, L;    \n        espeak_Initialize(output, Buflength, path, Options ); \n        espeak_SetVoiceByName(Voice);\n        const char *langNativeString = \"en\"; //Default to US English\n        espeak_VOICE voice;\n            memset(&amp;voice, 0, sizeof(espeak_VOICE)); // Zero out the voice first\n            voice.languages = langNativeString;\n            voice.name = \"US\";\n            voice.variant = 2;\n            voice.gender = 1;\n            //espeak_SetVoiceByProperties(&amp;voice);\n\n        char tx[]=\"hi there, my name is Eliyaas, what's your name?\";\n        espeak_Synth( tx, strlen(tx)+1, position, position_type, end_position, flags,unique_identifier, user_data );\n        espeak_Synchronize( );\n\n\n\n    return 0;}\n</code></pre>\n\n<p>What is the difference and which line causes this error?\nIs it possible to put all of this program inside <code>main()</code> function? How?</p>\n\n<blockquote>\n  <p>(Add more text to pass add more information needed to post error) (Add\n  more text to pass add more information needed to post error) (Add more\n  text to pass add more information needed to post error) (Add more text\n  to pass add more information needed to post error)</p>\n</blockquote>\n"}, {"tags": ["c++", "data-structures", "merge", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 4, "creation_date": 1511966719, "post_id": 47555396, "comment_id": 82067709, "body": "I recommend using a debugger and drawing the lists as you single step through the code."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511966728, "post_id": 47555396, "comment_id": 82067716, "body": "You are the one who is supposed to figure out what is wrong with the code. Does it not compile? Does it not link? What is the error message? Does it crash? Which line? Does it produce incorrect results? Which results did it produce and which did you expect? How can we reproduce the issue?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1511966732, "post_id": 47555396, "comment_id": 82067719, "body": "Were you permitted to destroy the structure of the original lists?"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 1, "creation_date": 1511966738, "post_id": 47555396, "comment_id": 82067722, "body": "It&#39;s really unclear what a merge is in your context. What will the user of this do with the merge point?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1511966769, "post_id": 47555396, "comment_id": 82067753, "body": "Is this a merge or a merge sort?"}, {"owner": {"reputation": 3, "user_id": 7805998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cEnCg.jpg?s=128&g=1", "display_name": "Rishabh Saxena", "link": "https://stackoverflow.com/users/7805998/rishabh-saxena"}, "edited": false, "score": 0, "creation_date": 1511966998, "post_id": 47555396, "comment_id": 82067951, "body": "Merge here means these lists have point of intersection after that both have same nodes like a fork"}, {"owner": {"reputation": 3, "user_id": 7805998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cEnCg.jpg?s=128&g=1", "display_name": "Rishabh Saxena", "link": "https://stackoverflow.com/users/7805998/rishabh-saxena"}, "edited": false, "score": 0, "creation_date": 1511967192, "post_id": 47555396, "comment_id": 82068098, "body": "We have to find the point of intersection of these lists"}, {"owner": {"reputation": 3, "user_id": 7805998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cEnCg.jpg?s=128&g=1", "display_name": "Rishabh Saxena", "link": "https://stackoverflow.com/users/7805998/rishabh-saxena"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1511967306, "post_id": 47555396, "comment_id": 82068200, "body": "@nwp it compiled, but I am not getting the correct answer!!"}, {"owner": {"reputation": 3, "user_id": 7805998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cEnCg.jpg?s=128&g=1", "display_name": "Rishabh Saxena", "link": "https://stackoverflow.com/users/7805998/rishabh-saxena"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1511967389, "post_id": 47555396, "comment_id": 82068272, "body": "@drescherjm Yes we just have to find that intersection and that&#39;s it."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1511967607, "post_id": 47555396, "comment_id": 82068438, "body": "Which values did you give to the function? Which answer did it give? Which answer would have been correct?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1511967920, "post_id": 47555396, "comment_id": 82068731, "body": "It also would help to have a working minimal example. This will include an <code>int main()</code> that merges 2 lists and outputs the result. For simplicity you probably only want to have a few items in each list."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7805998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cEnCg.jpg?s=128&g=1", "display_name": "Rishabh Saxena", "link": "https://stackoverflow.com/users/7805998/rishabh-saxena"}, "edited": false, "score": 0, "creation_date": 1515788583, "post_id": 47558004, "comment_id": 83449473, "body": "or I can return PTRL-&gt;next-&gt;data"}], "tags": [], "owner": {"reputation": 1356, "user_id": 1361357, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/FkaM6.jpg?s=128&g=1", "display_name": "SALEH", "link": "https://stackoverflow.com/users/1361357/saleh"}, "is_accepted": true, "score": 1, "last_activity_date": 1511974901, "creation_date": 1511974901, "answer_id": 47558004, "question_id": 47555396, "link": "https://stackoverflow.com/questions/47555396/code-to-find-the-merge-point-of-two-linked-lists/47558004#47558004", "title": "Code to Find the Merge Point of Two linked Lists", "body": "<p>This code block at <code>FindMergeNode</code> is causing the problem</p>\n\n<pre><code>while(PTRL-&gt;next != PTRS-&gt;next) {\n    PTRL = PTRL-&gt;next;\n    PTRS = PTRS-&gt;next;\n}\n</code></pre>\n\n<p>Let's say, we have the following entries for <code>PTRL</code> and <code>PTRS</code></p>\n\n<pre><code>PTRL -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5 -&gt; 6 -&gt; 7 -&gt; 8\nPTRS -&gt; 17 -&gt; 6 -&gt; 7 -&gt; 8\n</code></pre>\n\n<p>Now, according to your implementation, <code>PTRL</code> will move ahead <strong>4 times</strong>\n (length of smaller linked list) and will point to <code>5</code>. Then, your logic checks whether <code>next</code> of <code>PTRL</code>(which points to 6) is equal to <code>next</code> of <code>PTRS</code>(which points to 6). If they are equal (which they are, because both points to 6), the method returns <code>data</code> of <code>PTRL</code>, which is <code>5</code> at that point.</p>\n\n<p>Change condition in while loop to <code>PTRL != PTRS</code> and I think this should solve your problem.</p>\n"}], "owner": {"reputation": 3, "user_id": 7805998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cEnCg.jpg?s=128&g=1", "display_name": "Rishabh Saxena", "link": "https://stackoverflow.com/users/7805998/rishabh-saxena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 47558004, "answer_count": 1, "score": -2, "last_activity_date": 1511974901, "creation_date": 1511966536, "last_edit_date": 1511966607, "question_id": 47555396, "link": "https://stackoverflow.com/questions/47555396/code-to-find-the-merge-point-of-two-linked-lists", "title": "Code to Find the Merge Point of Two linked Lists", "body": "<p>Forward Declaration of FindMergePoint()</p>\n\n<pre><code>int FindMergePoint(Node *Larger,int largeCount,Node *Smaller,int SmallCount);\n</code></pre>\n\n<p>Function which will count the length of both lists the according to the size passes the lists to FindMergePoint() which will return the node of intersection.</p>\n\n<pre><code>    int FindMergeNode(Node *headA, Node *headB)\n    {\n        Node *PTRA = headA;\n    Node *PTRB = headB;\n    int count1 = 0,count2 = 0;\n    //Count List One\n    while(PTRA != NULL){\n        count1++;\n        PTRA = PTRA-&gt;next;\n    }\n    //Count List Two\n    while(PTRB != NULL){\n        count2++;\n        PTRB = PTRB-&gt;next;\n    }\n    //If First list is greater\n    if(count1 &gt;= count2){\n        return FindMergePoint(headA,count1,headB,count2);\n    }\n    else{//Second is greater\n        return FindMergePoint(headB,count2,headA,count1);\n    }\n}\n</code></pre>\n\n<p>Function Which Takes Larger and Smaller Lists and Finds the merge Point</p>\n\n<pre><code> int FindMergePoint(Node *Larger,int largeCount,Node *Smaller,int SmallCount){\n    Node *PTRL = Larger;\n    //Now traversing till both lists have same length so then we can move \nparallely in both lists\n    while(largeCount != SmallCount){\n        PTRL = PTRL-&gt;next;\n        largeCount--; \n    }\n    Node *PTRS = Smaller;\n    //Now PTRL AND PTRS WERE SYNCHRONIZED\n    //Now,Find the merge point     \n    while(PTRL-&gt;next != PTRS-&gt;next){\n        PTRL = PTRL-&gt;next;\n        PTRS = PTRS-&gt;next;\n    }\n    return PTRL-&gt;data;\n}\n</code></pre>\n"}, {"tags": ["c++", "stl", "argument-dependent-lookup"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1511966260, "post_id": 47555289, "comment_id": 82067361, "body": "<code>std</code> is deduced from the arguments, who&#39;s types belong to <code>std</code>. See <a href=\"http://en.cppreference.com/w/cpp/language/adl\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/adl</a>"}, {"owner": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1511966337, "post_id": 47555289, "comment_id": 82067417, "body": "@Fran&#231;oisAndrieux: you should post answers as answers, not comments."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1511966511, "post_id": 47555289, "comment_id": 82067556, "body": "Btw <code>std::vector&lt;int&gt;::iterator</code> might simply be <code>int*</code> and so ADL won&#39;t apply and <code>std::</code> would be required."}, {"owner": {"reputation": 2369, "user_id": 4614680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9b36fb2c1d356a919916f77e74f1c3c?s=128&d=identicon&r=PG&f=1", "display_name": "Philipp Ludwig", "link": "https://stackoverflow.com/users/4614680/philipp-ludwig"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1512029989, "post_id": 47555289, "comment_id": 82095007, "body": "@Fran&#231;oisAndrieux Thanks for the explanation!"}], "owner": {"reputation": 2369, "user_id": 4614680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9b36fb2c1d356a919916f77e74f1c3c?s=128&d=identicon&r=PG&f=1", "display_name": "Philipp Ludwig", "link": "https://stackoverflow.com/users/4614680/philipp-ludwig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "closed_date": 1511966389, "answer_count": 0, "score": 1, "last_activity_date": 1511966413, "creation_date": 1511966177, "last_edit_date": 1511966413, "question_id": 47555289, "link": "https://stackoverflow.com/questions/47555289/why-can-i-call-max-element-without-std-and-without-using-namespace-std", "closed_reason": "Duplicate", "title": "Why can I call max_element without &quot;std::&quot; and without &quot;using namespace std&quot;?", "body": "<p>Consider the following code:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n\nint main() {\n        std::vector&lt;int&gt; v = {1,2,3};\n        max_element(v.begin(), v.end());\n        return 0;\n}       \n</code></pre>\n\n<p>This compiles fine with gcc 7.2.0 and clang++ 3.9.1. I'd expect that I need to write <code>std::max_element</code>, but it seems that at least some functions in <code>&lt;algorithm&gt;</code> are in the global namespace - opposed to the draft of the C++17 standard, which shows the functions living in namespace std.</p>\n\n<p>What is going on here?</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1511967542, "post_id": 47554628, "comment_id": 82068384, "body": "How do you tell if it isn&#39;t working?"}, {"owner": {"reputation": 313, "user_id": 1605843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/13e7d456826c8649bc49f92e36aae2e4?s=128&d=identicon&r=PG", "display_name": "Clones1201", "link": "https://stackoverflow.com/users/1605843/clones1201"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1511973021, "post_id": 47554628, "comment_id": 82072404, "body": "@NicolBolas because I have a post-process chain, which I enable GL_FRAMEBUFFER_SRGB for every stage, and input linear value into it. With multiple stage, it should do multiple linear-to-sRGB conversion but it didn\u2019t."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1511973787, "post_id": 47554628, "comment_id": 82072829, "body": "Right, but how you do know that it isn&#39;t working? What are you doing that verifies that you aren&#39;t getting linear-to-sRGB conversion?"}, {"owner": {"reputation": 313, "user_id": 1605843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/13e7d456826c8649bc49f92e36aae2e4?s=128&d=identicon&r=PG", "display_name": "Clones1201", "link": "https://stackoverflow.com/users/1605843/clones1201"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1512002526, "post_id": 47554628, "comment_id": 82086294, "body": "@NicolBolas I was doing the linear-to-sRGB conversion in shader before, now I remove the conversion from the shader, and the result image is darker than I expect. Also I tried enable and disable GL_FRAMEBUFFER_SRGB for the first stage of my post-process pipeline (I call the API before and after the actual DrawElements call), it didn\u2019t give different result as it should."}], "answers": [{"comments": [{"owner": {"reputation": 7977, "user_id": 1030527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/goMfp.jpg?s=128&g=1", "display_name": "bernie", "link": "https://stackoverflow.com/users/1030527/bernie"}, "edited": false, "score": 0, "creation_date": 1511973774, "post_id": 47555443, "comment_id": 82072820, "body": "Why the -1 vote? I mostly quoted relevant parts of the spec."}, {"owner": {"reputation": 7977, "user_id": 1030527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/goMfp.jpg?s=128&g=1", "display_name": "bernie", "link": "https://stackoverflow.com/users/1030527/bernie"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 1, "creation_date": 1520881111, "post_id": 47555443, "comment_id": 85488888, "body": "Added source (4.6 core) and adjusted paragraph numbers. The same text is present in previous versions of the spec as well in other paragraphs."}], "tags": [], "owner": {"reputation": 7977, "user_id": 1030527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/goMfp.jpg?s=128&g=1", "display_name": "bernie", "link": "https://stackoverflow.com/users/1030527/bernie"}, "is_accepted": false, "score": 1, "last_activity_date": 1520881106, "last_edit_date": 1520881106, "creation_date": 1511966669, "answer_id": 47555443, "question_id": 47554628, "link": "https://stackoverflow.com/questions/47554628/does-gl-framebuffer-srgb-only-work-for-front-back-buffer/47555443#47555443", "title": "Does GL_FRAMEBUFFER_SRGB only work for Front/Back Buffer?", "body": "<p>First what the <a href=\"https://www.khronos.org/registry/OpenGL/specs/gl/glspec46.core.pdf\" rel=\"nofollow noreferrer\">OpenGL 4.6 Core Profile</a> spec says (emphasis mine):</p>\n\n<blockquote>\n  <p>Section 17.3.6.1 Blend Equation</p>\n  \n  <p>If FRAMEBUFFER_SRGB is enabled and the value of FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING for the framebuffer attachment corresponding to the destination buffer is SRGB (see section 9.2.3), <strong>the R, G, and B destination color values (after conversion from fixed-point to floating-point) are considered to be encoded for the sRGB color space</strong> and hence must be linearized prior to their use in blending. Each R, G, and B component is converted in the same fashion described for sRGB texture components in section 8.24.</p>\n  \n  <p><strong>If FRAMEBUFFER_SRGB is disabled or the value of FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING is not SRGB, no linearization is performed.</strong></p>\n  \n  <p>The resulting linearized R, G, and B and unmodified A values are recombined as the destination color used in blending computations. Table 17.1 provides the corresponding per-component</p>\n  \n  <p>17.3.7 sRGB Conversion <strong>(occurs after blending)</strong></p>\n  \n  <p>If FRAMEBUFFER_SRGB is enabled and the value of FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING for the framebuffer attachment corresponding to the destination buffer is SRGB (see section 9.2.3), the R, G, and B values after blending are converted into the non-linear sRGB color space by computing [<code>cs = sRGB(cl)</code>] where cl is the R, G, or B element and cs is the result (effectively converted into an sRGB color space).</p>\n  \n  <p><strong>If FRAMEBUFFER_SRGB is disabled or the value of FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING is not SRGB, then <code>cs = cl</code></strong>. The resulting cs values for R, G, and B, and the unmodified A form a new RGBA color value.</p>\n</blockquote>\n\n<p>2 things stands out for me in relation to your case:</p>\n\n<ol>\n<li>Check the value of <code>GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING</code></li>\n<li>Part of the process only happens if blending is enabled.</li>\n</ol>\n\n<p>The main purpose of OpenGL's sRGB support is to be able to output sRGB colors and have them blend properly in a linear space.</p>\n"}, {"tags": [], "owner": {"reputation": 313, "user_id": 1605843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/13e7d456826c8649bc49f92e36aae2e4?s=128&d=identicon&r=PG", "display_name": "Clones1201", "link": "https://stackoverflow.com/users/1605843/clones1201"}, "is_accepted": false, "score": 0, "last_activity_date": 1512006740, "creation_date": 1512006740, "answer_id": 47564657, "question_id": 47554628, "link": "https://stackoverflow.com/questions/47554628/does-gl-framebuffer-srgb-only-work-for-front-back-buffer/47564657#47564657", "title": "Does GL_FRAMEBUFFER_SRGB only work for Front/Back Buffer?", "body": "<p>I tried GL_RGB8, GL_RGBA8, and GL_SRGB8_ALPHA8, but not GL_SRGB8, and the last one worked.</p>\n"}], "owner": {"reputation": 313, "user_id": 1605843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/13e7d456826c8649bc49f92e36aae2e4?s=128&d=identicon&r=PG", "display_name": "Clones1201", "link": "https://stackoverflow.com/users/1605843/clones1201"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520881106, "creation_date": 1511964182, "last_edit_date": 1512002640, "question_id": 47554628, "link": "https://stackoverflow.com/questions/47554628/does-gl-framebuffer-srgb-only-work-for-front-back-buffer", "title": "Does GL_FRAMEBUFFER_SRGB only work for Front/Back Buffer?", "body": "<p>I'm trying to use GL_FRAMEBUFFER_SRGB to write sRGB space values to a framebuffer, but I find the call of glEnable(GL_FRAMEBUFFER_SRGB) only work for Front/Back buffer, and not work for other framebuffers created from textures.</p>\n\n<p>my pipeline is like this:</p>\n\n<ol>\n<li>first is scene stage that renders the scene to a GL_RGB10_A2 buffer;</li>\n<li>then a post-process stage that renders to a GL_RGB8(0x8051) buffer,</li>\n<li>post-process chain that eventually renders to Front/Back buffer.</li>\n</ol>\n\n<p>I try to do glEnable(GL_FRAMEBUFFER_SRGB) for every stage. Since all render buffer is not sRGB format so the next stage will not automatic do any sRGB to linear conversion, and I don't do any conversion in the shader either, I should be expecting the final result becomes extremely bright because of multiple linear-to-sRGB conversions. but it only works for the last stage which is rendering to Front/Back buffer, so the final result doesn't get extremely bright.</p>\n\n<p>I tried few more format for render buffer(GL_RGB8, GL_RGBA8, GL_SRGB8_ALPHA8), still not work.</p>\n\n<p>Did I miss something from the spec? using GTX750 with the latest driver on win7.</p>\n"}, {"tags": ["c++", "windows", "boost"], "comments": [{"owner": {"reputation": 3661, "user_id": 1089715, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8f436794fc93079e12250b45e7eb78c1?s=128&d=identicon&r=PG", "display_name": "Vitalii", "link": "https://stackoverflow.com/users/1089715/vitalii"}, "edited": false, "score": 0, "creation_date": 1511966489, "post_id": 47554528, "comment_id": 82067539, "body": "I actually found fix already. The fix needs to edit one of boost hpp files. It is boost bug, I hope they will fix it officially soon."}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1511969120, "post_id": 47555499, "comment_id": 82069604, "body": "There&#39;s an existing issue for it (<a href=\"https://github.com/klemens-morgenstern/boost-process/issues/106\" rel=\"nofollow noreferrer\">#106</a>) and it has been fixed in develop."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1511970588, "post_id": 47555499, "comment_id": 82070750, "body": "Sadly, the fix is not released because the 1.65.1 tag is mistagged to be identical to 1.64.0"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1511972012, "post_id": 47555499, "comment_id": 82071730, "body": "<a href=\"https://github.com/klemens-morgenstern/boost-process/issues/127\" rel=\"nofollow noreferrer\">github.com/klemens-morgenstern/boost-process/issues/127</a> created a new issue about that"}], "tags": [], "owner": {"reputation": 3661, "user_id": 1089715, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8f436794fc93079e12250b45e7eb78c1?s=128&d=identicon&r=PG", "display_name": "Vitalii", "link": "https://stackoverflow.com/users/1089715/vitalii"}, "is_accepted": false, "score": 1, "last_activity_date": 1511968877, "last_edit_date": 1511968877, "creation_date": 1511966821, "answer_id": 47555499, "question_id": 47554528, "link": "https://stackoverflow.com/questions/47554528/why-does-boostprocess-crash-on-windows-when-stderr-is-redirected-to-a-pipe/47555499#47555499", "title": "Why does boost::process crash on Windows when stderr is redirected to a pipe?", "body": "<p>It is a bug in Boost Process. The crash appears at <code>include\\boost\\process\\detail\\windows\\async_out.hpp</code> The code that causes crash follows:</p>\n\n<pre><code>arg.resize(buffer-&gt;size());\nis.read(&amp;*arg.begin(), buffer-&gt;size());\n</code></pre>\n\n<p>It is not important whether we redirect <code>std_err</code> or <code>std_out</code>. The problem appears when stream doesn't generate any output. For <code>hostname.exe</code> it is <code>std_err</code>, however, if you will try to run <code>pyw.exe</code>, you'll get this error for <code>std_out</code> also.</p>\n\n<p>When progam generates no output, <code>buffer-&gt;size()</code> returns 0, so the vector becomes an empty one. And it looks like attempt to dereference an empty vector results in crash (debug assertion) at Visual C++.</p>\n\n<p>The fix follows:</p>\n\n<pre><code>auto bufferSize = buffer-&gt;size();\nif (bufferSize) {\n    arg.resize(buffer-&gt;size());\n    is.read(&amp;*arg.begin(), buffer-&gt;size());\n}\n</code></pre>\n\n<p>I didn't submit this bug report to boost, if anyone has time, lets he does it.</p>\n"}], "owner": {"reputation": 3661, "user_id": 1089715, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8f436794fc93079e12250b45e7eb78c1?s=128&d=identicon&r=PG", "display_name": "Vitalii", "link": "https://stackoverflow.com/users/1089715/vitalii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1511968877, "creation_date": 1511963868, "last_edit_date": 1511964551, "question_id": 47554528, "link": "https://stackoverflow.com/questions/47554528/why-does-boostprocess-crash-on-windows-when-stderr-is-redirected-to-a-pipe", "title": "Why does boost::process crash on Windows when stderr is redirected to a pipe?", "body": "<p>This code based on <code>boost::process</code> 1.65.1 samples with some spelling errors fixed:</p>\n\n<pre><code>#include &lt;boost/process.hpp&gt;\n\nint main(int argc, char *argv[])\n{\n    boost::asio::io_service ios;\n    std::future&lt;std::vector&lt;char&gt;&gt; output, error;\n    boost::process::child c(\"hostname.exe\",\n        boost::process::std_out &gt; output,\n        boost::process::std_err &gt; boost::process::null,\n        ios);\n    ios.run();\n    c.wait();\n    if (output.valid())\n    {\n        auto processOutput = output.get();\n        processOutput.push_back('\\0');\n        printf(processOutput.data());\n    }\n    if (error.valid())\n    {\n        auto processError = error.get();\n        processError.push_back('\\0');\n        printf(processError.data());\n    }\n    return 0;\n}\n</code></pre>\n\n<p>It works as expected. It runs <code>hostname.exe</code> and prints its output, i. e. your computer network name.</p>\n\n<p>You probably see that <code>error</code> variable is unused. It is logical to read also <code>stderr</code>, even <code>hostname.exe</code> doesn't use it usually, realistic child process may of course use it. It looks trivial to just replace <code>boost::process::std_err &gt; boost::process::null</code> with <code>boost::process::std_err &gt; error</code>. However, it results in crash. The error message follows: </p>\n\n<pre><code>vector iterator not dereferencable\n</code></pre>\n\n<p>Does anyone know the reason and how to bypass this bug?</p>\n"}, {"tags": ["c++", "unit-testing", "persistence", "googletest", "file-writing"], "comments": [{"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 1, "creation_date": 1511963753, "post_id": 47554446, "comment_id": 82065658, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Use the &quot;edit&quot; link to improve your <i>question</i> - do not add more information via comments. Thanks!"}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1511963795, "post_id": 47554446, "comment_id": 82065690, "body": "You just explain vaguely what you have implemented. It is very hard to say what is going on here. In that sense: try if you can condense a small (but working) example piece that contains all the relevant information of what you are doing."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1511964511, "post_id": 47554446, "comment_id": 82066182, "body": "This depends a lot on how you invoke the resulting executable. Is it the MSVC integration? CTest? Running it yourself?"}], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 3875310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/098711fa7188cf1bc5ed8959f0b4be09?s=128&d=identicon&r=PG&f=1", "display_name": "MattKelly", "link": "https://stackoverflow.com/users/3875310/mattkelly"}, "is_accepted": false, "score": 0, "last_activity_date": 1511966612, "creation_date": 1511966612, "answer_id": 47555420, "question_id": 47554446, "link": "https://stackoverflow.com/questions/47554446/google-unit-testing-in-c-how-to-write-a-persistent-data-file/47555420#47555420", "title": "Google unit testing in C++: how to write a persistent data file?", "body": "<p>One solution is to simply write to an absolute file path. The following code writes a file to the user's home directory from inside of a google unit test:</p>\n\n<pre><code>TEST(GUnitTestFileIo, Test_One)\n{\n  char const* tmp = getenv( \"HOME\" );\n  if ( tmp == NULL ) {\n    std::cout &lt;&lt; \"$(HOME) environment variable is not defined!\";\n  } else {\n    std::string home( tmp );  // string for the home directory\n    std::ofstream csvFile;  // write the file\n    csvFile.open(home + \"/helloWorldTestFile.csv\");\n    if (csvFile.is_open()) {\n      csvFile &lt;&lt; \"Hello, World, !\" &lt;&lt; std::endl;\n      csvFile.close();\n    } else {\n      std::cout &lt;&lt; \"Failed to open the file!\" &lt;&lt; std::endl;\n    }\n  }\n}\n\n// Run all the tests that were declared with TEST()\nint main(int argc, char **argv){\n  testing::InitGoogleTest(&amp;argc, argv);\n  return RUN_ALL_TESTS();\n}\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 3875310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/098711fa7188cf1bc5ed8959f0b4be09?s=128&d=identicon&r=PG&f=1", "display_name": "MattKelly", "link": "https://stackoverflow.com/users/3875310/mattkelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 901, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1511966792, "creation_date": 1511963578, "last_edit_date": 1511966792, "question_id": 47554446, "link": "https://stackoverflow.com/questions/47554446/google-unit-testing-in-c-how-to-write-a-persistent-data-file", "title": "Google unit testing in C++: how to write a persistent data file?", "body": "<p><strong>Questions:</strong> </p>\n\n<p>1) Where do files go that are created by a C++ Google unit test?</p>\n\n<p>2) Is there a way to write a persistent data file in a C++ Google unit test, such that the file is accessible after the test runs?</p>\n\n<p><strong>Code and desired behavior</strong></p>\n\n<p>I'm running the unit test on Ubuntu 14.04 with catkin_make. I would like the code to write a file somewhere that I can find it after the test runs. The following code writes a file, but I don't know where it goes, or if it persists after the unit tests complete.</p>\n\n<pre><code>TEST(GUnitTestFileIo, Test_One)\n{\n  std::ofstream csvFile;\n  csvFile.open(\"helloWorldTestFile.csv\");\n  if (csvFile.is_open()) {\n    csvFile &lt;&lt; \"Hello, World, !\" &lt;&lt; std::endl;\n    csvFile.close();\n  } else {\n    std::cout &lt;&lt; \"Failed to open the file!\" &lt;&lt; std::endl;\n  }\n}\n\nint main(int argc, char **argv){\n  testing::InitGoogleTest(&amp;argc, argv);\n  return RUN_ALL_TESTS();\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "logging", "format", "easylogging++"], "comments": [{"owner": {"reputation": 994, "user_id": 3593324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vupNw.jpg?s=128&g=1", "display_name": "mina sameh", "link": "https://stackoverflow.com/users/3593324/mina-sameh"}, "edited": false, "score": 0, "creation_date": 1511964632, "post_id": 47554301, "comment_id": 82066266, "body": "please try 1-cout &lt;&lt; QString::number(2)  2-cout &lt;&lt; Qstring(&quot;2&quot;) 3-LOG(INFO) &lt;&lt; &quot;2&quot; 4-LOG(INFO) &lt;&lt; QString::number(2) 5-LOG(INFO) &lt;&lt; QString(&quot;2&quot;)  just to make sure that the problem is specific to your case"}, {"owner": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "reply_to_user": {"reputation": 994, "user_id": 3593324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vupNw.jpg?s=128&g=1", "display_name": "mina sameh", "link": "https://stackoverflow.com/users/3593324/mina-sameh"}, "edited": false, "score": 0, "creation_date": 1511966620, "post_id": 47554301, "comment_id": 82067634, "body": "See @p-a-o-l-o &#39;s answer as well as my comment below his. The issue is strictly related to the logging mechanisms of easylogging++ from what I know so far."}], "answers": [{"comments": [{"owner": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "edited": false, "score": 0, "creation_date": 1511966557, "post_id": 47554790, "comment_id": 82067594, "body": "I found another solution but yours works too. In order to make the answer complete I added the one I found on my own. :)"}], "tags": [], "owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "is_accepted": true, "score": 0, "last_activity_date": 1511966509, "last_edit_date": 1511966509, "creation_date": 1511964687, "answer_id": 47554790, "question_id": 47554301, "link": "https://stackoverflow.com/questions/47554301/extra-space-inserted-when-logging-qstring-with-easylogging/47554790#47554790", "title": "Extra space inserted when logging QString with easylogging++", "body": "<p>According to this: <a href=\"https://github.com/muflihun/easyloggingpp/issues/179\" rel=\"nofollow noreferrer\">https://github.com/muflihun/easyloggingpp/issues/179</a>, a <code>LoggingFlag::AutoSpacing</code> flag is available.</p>\n\n<p>From documentation (at <a href=\"https://github.com/muflihun/easyloggingpp#logging-flags\" rel=\"nofollow noreferrer\">https://github.com/muflihun/easyloggingpp#logging-flags</a>):</p>\n\n<blockquote>\n  <p>You can set/unset these flags by using static el::Loggers::addFlag and\n  el::Loggers::removeFlag. You can check to see if certain flag is\n  available by using el::Loggers::hasFlag, all these functions take\n  strongly-typed enum el::LoggingFlag</p>\n</blockquote>\n\n<p>I think you should unset the above mentioned flag to avoid automatic spacing (i.e. to remove extra spaces from your log).</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>If not using the <code>&lt;&lt;</code> operator is something that is not a problem for you, you can always use concatenation:</p>\n\n<pre><code>LOG(INFO) &lt;&lt; QString(connectionsBOther.at(connectionIdx).line\n          + \" (\" + QString::number(connectionsBOther.at(connectionIdx).direction) + \") | \"\n          + connectionsBOther.at(connectionIdx).directionTarget\n          + \" \"\n          + QString::number(connectionsBOther.at(connectionIdx).departureRelative));\n</code></pre>\n"}], "owner": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 47554790, "answer_count": 1, "score": 1, "last_activity_date": 1511966509, "creation_date": 1511963091, "question_id": 47554301, "link": "https://stackoverflow.com/questions/47554301/extra-space-inserted-when-logging-qstring-with-easylogging", "title": "Extra space inserted when logging QString with easylogging++", "body": "<p>I have multiple lines of code where the logger is triggered (INFO mode):</p>\n\n<pre><code>LOG(INFO) &lt;&lt; connectionsBOther.at(connectionIdx).line\n          &lt;&lt; \" (\" &lt;&lt; QString::number(connectionsBOther.at(connectionIdx).direction) &lt;&lt; \") | \"\n          &lt;&lt; connectionsBOther.at(connectionIdx).directionTarget\n          &lt;&lt; \" \"\n          &lt;&lt; QString::number(connectionsBOther.at(connectionIdx).departureRelative);\n</code></pre>\n\n<p>An example for the output can be seen below:</p>\n\n<pre><code>2017-11-29 14:38:07,643 INFO  [default] M85 ( 2) |  Hello  1\n</code></pre>\n\n<p>The issue I'm having is the extra space that seems to be appended IN FRONT of the respective <code>QString::number()</code> call (spaces below are marked with # to mke them more visible):</p>\n\n<pre><code>2017-11-29 14:38:07,643 INFO  [default] M85#(#2)#|##Hello##1\n</code></pre>\n\n<p>I'm looking for the following output:</p>\n\n<pre><code>2017-11-29 14:38:07,643 INFO  [default] M85#(2)#|#Hello#1\n</code></pre>\n\n<p>I need to use INFO for this output. I'm used to <code>LOG(DEBUG)</code> putting extra spaces all over the place but wasn't expecting this for the <code>LOG(INFO)</code>.</p>\n"}, {"tags": ["c++", "compiler-construction", "llvm", "llvm-ir"], "answers": [{"tags": [], "owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1512004873, "creation_date": 1512004873, "answer_id": 47564459, "question_id": 47554187, "link": "https://stackoverflow.com/questions/47554187/llvm-how-to-convert-some-instruction-intrinsic-into-several-chained-instruction/47564459#47564459", "title": "LLVM: How to convert some instruction/intrinsic into several chained instructions?", "body": "<p>I've managed to do what I wanted by adding a special handling of intrinsic in MyTargetDAGtoDAG's <code>Select</code> method. I've replaced the given node by chained instruction nodes. But that solved the problem with code generation, I've yet to find the solution to the optimization problem.</p>\n"}], "owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512004873, "creation_date": 1511962684, "question_id": 47554187, "link": "https://stackoverflow.com/questions/47554187/llvm-how-to-convert-some-instruction-intrinsic-into-several-chained-instruction", "title": "LLVM: How to convert some instruction/intrinsic into several chained instructions?", "body": "<p>Basically, suppose I have 3 instructions: <code>load $src</code>, <code>store $dest</code> and <code>modify</code>.</p>\n\n<p>And I want to add an intrinsic/instruction <code>foo $x</code> that'd to something like</p>\n\n<pre><code>load $x\nmodify\nstore $x\n</code></pre>\n\n<p>Load and store just modify a special register that cannot be directly accessed.\nThe problem I'm facing is that for some reason the <code>Pattern&lt;...&gt;</code> in table gen that outputs multiple instructions doesn't compile and <code>Pat&lt;...&gt;</code> won't do since the instruction don't use each other result directly (i.e. the special register parameter is implicit), so I can't (or don't know how) create a single-node dag pattern from them.</p>\n\n<p>So how do I solve this? I thought about turning into a pseudo instruction and lowering it to multiple instructions, but I'm not sure that the compiler will be able to optimize two consecutive <code>foo $x</code> into</p>\n\n<pre><code>load $x\nmodify\nmodify\nstore $x\n</code></pre>\n\n<p>that way.</p>\n"}, {"tags": ["c++", "matrix", "transpose"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "edited": false, "score": 1, "creation_date": 1511962468, "post_id": 47554044, "comment_id": 82064752, "body": "<code>(matrix[(i*N) + j] != (j*N) + i + 42)</code> What is this supposed to do? You&#39;re comparing a value in the matrix to a value computed outside the matrix. Is that deliberate? Also just a side note, but an <code>assert</code> would probably serve your purposes more directly than <code>if (...) cout ...</code>"}, {"owner": {"reputation": 159, "user_id": 6006981, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfc554cb0e07e07cf8bc97aef653ae27?s=128&d=identicon&r=PG&f=1", "display_name": "Ponsietta", "link": "https://stackoverflow.com/users/6006981/ponsietta"}, "edited": false, "score": 0, "creation_date": 1511962611, "post_id": 47554044, "comment_id": 82064859, "body": "@Ike sorry my bad I&#39;ve just added the code I use to initiate the matrix to the question"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "edited": false, "score": 0, "creation_date": 1511963584, "post_id": 47554044, "comment_id": 82065559, "body": "Do you have to perform the algorithm in-place? If so, the basic way you are swapping won&#39;t work as far as I see it. If you create a new matrix to store the transposed output, it becomes a lot easier."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1511963599, "post_id": 47554044, "comment_id": 82065570, "body": "@Ponsietta You could have just done this: <code>std::vector&lt;int&gt; matrix(N*N); std::iota(matrix.begin(), matrix.end(), 42);</code>; and saved yourself the manual dynamic allocation and the <code>for</code> loops.  Also, you have <code>std::swap</code> instead of the code you have now to swap an element."}, {"owner": {"reputation": 159, "user_id": 6006981, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfc554cb0e07e07cf8bc97aef653ae27?s=128&d=identicon&r=PG&f=1", "display_name": "Ponsietta", "link": "https://stackoverflow.com/users/6006981/ponsietta"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1511964260, "post_id": 47554044, "comment_id": 82066009, "body": "@PaulMcKenzie the reason I&#39;m not using vector is that this is an assignment that requires us to code without using existing data structures"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1511964647, "post_id": 47554044, "comment_id": 82066277, "body": "@Ponsietta Then <code>std::iota(matrix, matrix + N, 42);</code>"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1511965028, "post_id": 47554044, "comment_id": 82066532, "body": "...Or if you cannot use <code>std::iota</code> too, <code>for(int k = 0; k&lt;N*N; ++k) { matrix[k] = k + 42; }</code>."}, {"owner": {"reputation": 159, "user_id": 6006981, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfc554cb0e07e07cf8bc97aef653ae27?s=128&d=identicon&r=PG&f=1", "display_name": "Ponsietta", "link": "https://stackoverflow.com/users/6006981/ponsietta"}, "edited": false, "score": 0, "creation_date": 1511966264, "post_id": 47554044, "comment_id": 82067363, "body": "That makes sense sure. I can update that thanks"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "edited": false, "score": 2, "creation_date": 1511974000, "post_id": 47557140, "comment_id": 82072974, "body": "+1 OMG, checking if <code>x &lt; y</code> prior to the swap is such a simple solution. I&#39;m embarrassed that I didn&#39;t see it. I was so focused on making the base case less granular."}, {"owner": {"reputation": 36, "user_id": 9026407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e514250bbc137ef0be709a6ad6f5932?s=128&d=identicon&r=PG&f=1", "display_name": "Mike2208", "link": "https://stackoverflow.com/users/9026407/mike2208"}, "edited": false, "score": 0, "creation_date": 1511986749, "post_id": 47557140, "comment_id": 82079924, "body": "@Ike Thanks. I think there might be a more optimal solution that avoids some recursion. The above version is very granular like you said, and it is possible to ignore half the cells."}], "tags": [], "owner": {"reputation": 36, "user_id": 9026407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e514250bbc137ef0be709a6ad6f5932?s=128&d=identicon&r=PG&f=1", "display_name": "Mike2208", "link": "https://stackoverflow.com/users/9026407/mike2208"}, "is_accepted": true, "score": 2, "last_activity_date": 1511971854, "creation_date": 1511971854, "answer_id": 47557140, "question_id": 47554044, "link": "https://stackoverflow.com/questions/47554044/cache-oblivious-matrix-transposition-implementation-in-c/47557140#47557140", "title": "Cache Oblivious Matrix Transposition Implementation in C++", "body": "<p>The above code will transpose your elements twice. For example, once CacheObliviousTransposition reaches the single element [0,1], it will transpose it with [1,0]. However, a separate recursion will later on reach [1,0], and transpose that with [0,1] again. Ultimately, all elements will be back in their original places. </p>\n\n<p>To ensure that elements are only transposed once, you could check that x is less than y before switching:</p>\n\n<pre><code>void CacheObliviousTransposition(int x, int delx, int y, int dely, int N, int* matrix) {\n    if ((delx == 1) &amp;&amp; (dely == 1)) {\n        if(x&lt;y)\n        {\n            int tmp = matrix[(N*y) + x];\n            matrix[(N*y) + x] = matrix[(N*x) + y];\n            matrix[(N*x) + y] = tmp;\n        }\n        return;\n    }\n\n    if (delx &gt;= dely) {\n        int xmid = delx / 2;\n        CacheObliviousTransposition(x, xmid, y, dely, N, matrix);\n        CacheObliviousTransposition(x + xmid, delx - xmid, y, dely, N, matrix);\n        return;\n    }\n\n    int ymid = dely / 2;\n    CacheObliviousTransposition(x, delx, y, ymid, N, matrix);\n    CacheObliviousTransposition(x, delx, y + ymid, dely - ymid, N, matrix);\n}\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 6006981, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfc554cb0e07e07cf8bc97aef653ae27?s=128&d=identicon&r=PG&f=1", "display_name": "Ponsietta", "link": "https://stackoverflow.com/users/6006981/ponsietta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1400, "favorite_count": 1, "accepted_answer_id": 47557140, "answer_count": 1, "score": 1, "last_activity_date": 1511971854, "creation_date": 1511962211, "last_edit_date": 1511962584, "question_id": 47554044, "link": "https://stackoverflow.com/questions/47554044/cache-oblivious-matrix-transposition-implementation-in-c", "title": "Cache Oblivious Matrix Transposition Implementation in C++", "body": "<p>I have implemented an in-place cache-oblivious matrix transposition algorithm in C++ as below:</p>\n\n<pre><code>void CacheObliviousTransposition(int x, int delx, int y, int dely, int N, int* matrix) {\n    if ((delx == 1) &amp;&amp; (dely == 1)) {\n        int tmp = matrix[(N*y) + x];\n        matrix[(N*y) + x] = matrix[(N*x) + y];\n        matrix[(N*x) + y] = tmp;\n        return;\n    }\n\n    if (delx &gt;= dely) {\n        int xmid = delx / 2;\n        CacheObliviousTransposition(x, xmid, y, dely, N, matrix);\n        CacheObliviousTransposition(x + xmid, delx - xmid, y, dely, N, matrix);\n        return;\n    }\n\n    int ymid = dely / 2;\n    CacheObliviousTransposition(x, delx, y, ymid, N, matrix);\n    CacheObliviousTransposition(x, delx, y + ymid, dely - ymid, N, matrix);\n}\n</code></pre>\n\n<p>However, when I called the below method after transposition to ensure that it worked correctly, the if loop is being entered so I'm assuming something must be wrong with the implementation.</p>\n\n<pre><code>void CheckTransposition(int N, int* matrix)\n{\n    for (int i = 0; i &lt; N; i++)\n    {\n        for (int j = 0; j &lt; N; j++)\n        {\n            if (matrix[(i*N) + j] != (j*N) + i + 42)\n            {\n                cout &lt;&lt; \"Transposition failed at i=\" &lt;&lt; i &lt;&lt; \", j=\" &lt;&lt; j &lt;&lt; \"\\n\";\n            } \n        }\n    }\n}\n</code></pre>\n\n<p>Can anyone help me identify what is wrong?</p>\n\n<p>Note: variable matrix is a dynamically assigned integer array as below, as matrix is stored row by row in N*N consecutive memory locations</p>\n\n<pre><code>int* MatrixInit(int N)\n{\n\n    int* matrix = new int[N*N];\n\n    for (int i = 0; i &lt; N; i++) {\n        for (int j = 0; j &lt; N; j++) {\n            matrix[(i*N) + j] = (i*N) + j + 42;\n        }\n    }\n\n    return matrix;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 1, "creation_date": 1511962435, "post_id": 47554028, "comment_id": 82064728, "body": "Check the stream <code>status()</code> after you read from it, I&#39;ll guess you&#39;ll get &quot;read past the end&quot; status."}, {"owner": {"reputation": 1632, "user_id": 7462657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/da6cde7de38cf0b6686e85193273b12f?s=128&d=identicon&r=PG&f=1", "display_name": "xander", "link": "https://stackoverflow.com/users/7462657/xander"}, "edited": false, "score": 1, "creation_date": 1511962446, "post_id": 47554028, "comment_id": 82064735, "body": "I guess the int your&#39;re using is 4 byte and you only put 2 bytes in the QByteArray!?"}, {"owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1511967743, "post_id": 47554028, "comment_id": 82068571, "body": "@Mat You are right. i did not pay attention to this point. After i added zeros according to Endianess, it works as expected. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "is_accepted": true, "score": 2, "last_activity_date": 1511963121, "creation_date": 1511963121, "answer_id": 47554307, "question_id": 47554028, "link": "https://stackoverflow.com/questions/47554028/qbytearray-to-int-conversion/47554307#47554307", "title": "QByteArray to Int conversion", "body": "<p>In this line:</p>\n\n<pre><code>stream &gt;&gt; val;\n</code></pre>\n\n<p>you'reading <code>sizeof(int)</code> bytes from the stream into the variable val.</p>\n\n<p>Given that <code>sizeof(int)</code> is 4, whatever byte array sized at least four bytes is ok to yeld some int value (the remaining bytes will be ignored).</p>\n"}], "owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1360, "favorite_count": 0, "accepted_answer_id": 47554307, "answer_count": 1, "score": 1, "last_activity_date": 1511964041, "creation_date": 1511962171, "last_edit_date": 1511964041, "question_id": 47554028, "link": "https://stackoverflow.com/questions/47554028/qbytearray-to-int-conversion", "title": "QByteArray to Int conversion", "body": "<p>I am trying to convert a <code>QByteArray</code> into an <code>int</code> with the following code :</p>\n\n<pre><code>int byteArrayToint(const QByteArray &amp;ba, QDataStream::ByteOrder byteOrder)\n{\n    int val = 0;\n    QDataStream stream(ba);\n    stream.setByteOrder(byteOrder);\n    stream &gt;&gt; val;\n    return val;\n}\n</code></pre>\n\n<p>Then in the main function :  </p>\n\n<pre><code>    ....\n    QByteArray ba;\n    ba[0]=0x20;\n    ba[1]=0x17;\n\n    for(int i(0); i &lt; ba.size(); i++)\n        qInfo() &lt;&lt; QString(\"0x%1\").arg((int)ba.at(i), 2, 16);\n\n    qInfo() &lt;&lt; \"date =\" &lt;&lt; byteArrayToint(ba, QDataStream::BigEndian);\n    ...\n</code></pre>\n\n<p>And the output is :</p>\n\n<pre><code>\"0x20\"\n\"0x17\"\ndate = 0\n</code></pre>\n\n<p>But if i use QByteArray(\"Hello\") instead of the preivous one it gives the expected result :</p>\n\n<pre><code>\"0x48\"\n\"0x65\"\n\"0x6c\"\n\"0x6c\"\n\"0x6f\"\ndate = 1214606444\n</code></pre>\n\n<p>I cannot find where the mistake is so far. I know methods using bits shifting work well but i would like to understand why i don't get the same result with Qt classes.</p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["python", "c++", "boost", "constants", "shared-ptr"], "comments": [{"owner": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "edited": false, "score": 0, "creation_date": 1511978876, "post_id": 47553964, "comment_id": 82075911, "body": "To whoever voted to close: the answer below based on boost 1.62 does not fix the issue. There is a commit <code>Add support for std::shared_ptr.</code> on Sep 23, 2016.  Boost 1.62 was released on Sep 1, and 1.62 on Nov 2. (<a href=\"https://github.com/boostorg/python/commit/97e4b34a15978ca9d7c296da2de89b78bba4e0d5\" rel=\"nofollow noreferrer\">github.com/boostorg/python/commit/&hellip;</a>). It&#39;s possible this commit broke something."}, {"owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "edited": false, "score": 0, "creation_date": 1561724484, "post_id": 47553964, "comment_id": 100167615, "body": "Please include namespaces, it&#39;s unclear if you&#39;re using std::shared_ptr or boost_shared_ptr"}], "answers": [{"comments": [{"owner": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "edited": false, "score": 0, "creation_date": 1511977047, "post_id": 47555170, "comment_id": 82074788, "body": "Interesting. Your C++ code generates the same error for me:      <code>Python argument types in         myLib.accept_shared_ptr(Foo) did not match C++ signature:     accept_shared_ptr(std::shared_ptr&lt;Foo const&gt;)</code>"}, {"owner": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "edited": false, "score": 0, "creation_date": 1511977201, "post_id": 47555170, "comment_id": 82074881, "body": "COuld i ask what compiler you are using? I&#39;m using g++ 6.4 and compiling with <code>-std=c++11</code>. Also are you including any headers that might allow more conversions?"}, {"owner": {"reputation": 3805, "user_id": 4165552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b32c5e142791fca01cbf252f663ac?s=128&d=identicon&r=PG&f=1", "display_name": "pptaszni", "link": "https://stackoverflow.com/users/4165552/pptaszni"}, "reply_to_user": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "edited": false, "score": 1, "creation_date": 1512029954, "post_id": 47555170, "comment_id": 82094985, "body": "<code>g++ (Debian 6.3.0-18) 6.3.0 20170516</code>, <code>-std=c++1y</code> (I know, it should be c++14), <code>cmake version 3.7.2</code>. From boost included just <code>#include &lt;boost&#47;python.hpp&gt;</code>, but actually I embedded the sample code in my other project that includes OpenCV dependencies. I see that problem is solved - good (even if maybe a little bit hacky)."}], "tags": [], "owner": {"reputation": 3805, "user_id": 4165552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b32c5e142791fca01cbf252f663ac?s=128&d=identicon&r=PG&f=1", "display_name": "pptaszni", "link": "https://stackoverflow.com/users/4165552/pptaszni"}, "is_accepted": false, "score": 2, "last_activity_date": 1511965809, "creation_date": 1511965809, "answer_id": 47555170, "question_id": 47553964, "link": "https://stackoverflow.com/questions/47553964/using-boost-python-with-shared-ptrconst-t/47555170#47555170", "title": "Using Boost Python with shared_ptr&lt;const T&gt;", "body": "<p>The issue must be in the definitions of your classes/methods. This code works for me (I have boost 1.62 and python 2.7.13):</p>\n\n<pre><code>class Foo {\npublic:\n    virtual ~Foo() = default;\n    virtual std::string xxx() = 0;\n};\n\nclass Bar: public Foo {\npublic:\n    ~Bar() override = default;\n    std::string xxx() override { return \"xxx\"; }\n};\n\nstd::shared_ptr&lt;const Foo&gt; create_shared_ptr() {\n    return std::shared_ptr&lt;const Foo&gt;(new Bar);\n}\n\nvoid accept_shared_ptr(const std::shared_ptr&lt;const Foo&gt;&amp; p) \n{\n    ; // do nothing\n}\n\nBOOST_PYTHON_MODULE(myLib)\n{\n    using namespace boost::python;\n    class_&lt;Foo, boost::noncopyable&gt;(\"Foo\", no_init);\n    register_ptr_to_python&lt; std::shared_ptr&lt;const Foo&gt; &gt;();\n    def(\"create_shared_ptr\", create_shared_ptr);\n    def(\"accept_shared_ptr\", accept_shared_ptr);\n}\n</code></pre>\n\n<p>Then, in python I can do:</p>\n\n<pre><code>$ python\nPython 2.7.13 (default, Jan 19 2017, 14:48:08) \n[GCC 6.3.0 20170118] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import myLib\n&gt;&gt;&gt; ptr = myLib.create_shared_ptr()\n&gt;&gt;&gt; ptr\n&lt;myLib.Foo object at 0x7f8b5fde0aa0&gt;\n&gt;&gt;&gt; myLib.accept_shared_ptr(ptr)\n</code></pre>\n\n<p>Most probably your function <code>create_shared_ptr</code> somehow returns a wrong value that is misunderstood by python.</p>\n"}, {"tags": [], "owner": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "is_accepted": false, "score": 2, "last_activity_date": 1511987796, "creation_date": 1511987796, "answer_id": 47561393, "question_id": 47553964, "link": "https://stackoverflow.com/questions/47553964/using-boost-python-with-shared-ptrconst-t/47561393#47561393", "title": "Using Boost Python with shared_ptr&lt;const T&gt;", "body": "<p>Adding </p>\n\n<pre><code>implicitly_convertible&lt;std::shared_ptr&lt;Foo&gt;,std::shared_ptr&lt;const Foo&gt;&gt;();\n</code></pre>\n\n<p>solves the problem.</p>\n"}], "owner": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1511987796, "creation_date": 1511962002, "last_edit_date": 1511978512, "question_id": 47553964, "link": "https://stackoverflow.com/questions/47553964/using-boost-python-with-shared-ptrconst-t", "title": "Using Boost Python with shared_ptr&lt;const T&gt;", "body": "<p>Boost Python 1.63 (python 2.7.13) works well with <code>shared_ptr&lt;T&gt;</code>; if I write this in C++:</p>\n\n<pre><code>shared_ptr&lt;Foo&gt; create_shared_ptr() { return shared_ptr{...}; }\nvoid accept_shared_ptr(const shared_ptr&lt;Foo&gt;&amp; p) { }\n\n...\n\nclass_&lt;Foo, boost::noncopyable&gt;(\"Foo\", no_init); //Expose abstract class\n\nregister_ptr_to_python&lt; shared_ptr&lt;Foo&gt; &gt;();\ndef(\"create_shared_ptr\", create_shared_ptr);\ndef(\"accept_shared_ptr\", accept_shared_ptr);\n</code></pre>\n\n<p>Then I can write this in Python and everything works:</p>\n\n<pre><code>accept_shared_ptr(create_shared_ptr())\n</code></pre>\n\n<p><strong>The problem comes when I try and wrap <code>shared_ptr&lt;const Foo&gt;</code>.</strong> (Which I need to do because I am wrapping a library that returns this.) If I modify the C++ functions as follows:</p>\n\n<pre><code>shared_ptr&lt;const Foo&gt; create_shared_ptr() { return shared_ptr{...}; }\nvoid accept_shared_ptr(const shared_ptr&lt;const Foo&gt;&amp; p) { }\n</code></pre>\n\n<p>Then I get the error:</p>\n\n<blockquote>\n<pre><code>Boost.Python.ArgumentError: Python argument types in\n    mod_python.accept_shared_ptr(Foo)\ndid not match C++ signature:\n    accept_shared_ptr(std::shared_ptr&lt;Foo const&gt;)\n</code></pre>\n</blockquote>\n\n<p>It seems the internals are implementing conversion from python <code>Foo</code> to C++ <code>shared_ptr&lt;Foo&gt;</code>, but not to C++ <code>shared_ptr&lt;const Foo&gt;</code>. Using</p>\n\n<pre><code>register_ptr_to_python&lt; shared_ptr&lt;const Foo&gt; &gt;();\n</code></pre>\n\n<p>doesn't help. How can I fix this?</p>\n"}, {"tags": ["c++", "visual-studio", "gcc"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1511961649, "post_id": 47553810, "comment_id": 82064220, "body": "Top level const is not part of the function type. Hang on, I&#39;ll look for a dupe. Edit: Lol,  too slow."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1511961723, "post_id": 47553810, "comment_id": 82064277, "body": "@StoryTeller Is there an hidden badge for fastest deduplicated question somewhere that you&#39;re chasing? Yee that was fast!"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1511961834, "post_id": 47553810, "comment_id": 82064367, "body": "@BaummitAugen - When you want to shoot, shoot. Don&#39;t type :P"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1511961945, "post_id": 47553810, "comment_id": 82064421, "body": "@StoryTeller The comment was to deter potentials answerers to prevent some more duplicate answers while I&#39;m searching, but it appears dividing the work like this works nicely, too. =D"}, {"owner": {"reputation": 44578, "user_id": 536086, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/75d228bb162b779392a94d9364969208?s=128&d=identicon&r=PG", "display_name": "Yochai Timmer", "link": "https://stackoverflow.com/users/536086/yochai-timmer"}, "edited": false, "score": 0, "creation_date": 1511962002, "post_id": 47553810, "comment_id": 82064453, "body": "That&#39;s not exactly a duplicate. In const int&amp;  the const IS considered as part of the signature. Which kinda contradicts what&#39;s written in the other answers"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1511962029, "post_id": 47553810, "comment_id": 82064474, "body": "Yochai, I&#39;m sorry there&#39;s no standard quote on the dupe. But the accepted answer is really good so I felt it was worth the closure. If a normative reference is still of import it&#39;s at <a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.fct#5\" rel=\"nofollow noreferrer\">&#91;dcl.fct&#93;/5</a>. But that answer is better at translating it."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1511962043, "post_id": 47553810, "comment_id": 82064484, "body": "@YochaiTimmer That&#39;s not a top level const. Read the answers more carefully."}, {"owner": {"reputation": 44578, "user_id": 536086, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/75d228bb162b779392a94d9364969208?s=128&d=identicon&r=PG", "display_name": "Yochai Timmer", "link": "https://stackoverflow.com/users/536086/yochai-timmer"}, "edited": false, "score": 0, "creation_date": 1511962192, "post_id": 47553810, "comment_id": 82064569, "body": "Right i missed that. Thanks"}], "owner": {"reputation": 44578, "user_id": 536086, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/75d228bb162b779392a94d9364969208?s=128&d=identicon&r=PG", "display_name": "Yochai Timmer", "link": "https://stackoverflow.com/users/536086/yochai-timmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "closed_date": 1511961609, "answer_count": 0, "score": 0, "last_activity_date": 1511961654, "creation_date": 1511961513, "last_edit_date": 1511961654, "question_id": 47553810, "link": "https://stackoverflow.com/questions/47553810/why-member-function-parameter-const-mismatch-allowed", "closed_reason": "Duplicate", "title": "Why member function parameter const mismatch allowed?", "body": "<p>Why does this compile? Even though the signature is different?</p>\n\n<pre><code>class A { void f(const int  a); };\nvoid A::f(int a) {} //compiles fine\n</code></pre>\n\n<p>I've also tried other signature types, and got mixed results:</p>\n\n<pre><code>//Doesn't Compile:\nclass A { void f(const int*  a); };\nvoid A::f(int* a) {}\n\nclass B { void f(const int&amp;  a); };\nvoid B::f(int&amp; a) {}\n\n//Compiles:\nclass C { void f(int* const  a); };\nvoid C::f(int* a) {}\n\nclass D { void f(int&amp; const  a); };\nvoid D::f(int&amp; a) {}\n</code></pre>\n\n<p>Why ?<br>\nWhere in the C++ specs/standard is it written that the const doesn't matter in these cases?</p>\n\n<p>I've checked on both Visual Studio and GCC. </p>\n"}, {"tags": ["c++", "arrays", "stack-overflow", "bitset"], "comments": [{"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1511961181, "post_id": 47553676, "comment_id": 82063940, "body": "<code>bitset&lt;Columns&gt;* data = new bitset&lt;Columns&gt;[Rows];</code>"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1511961210, "post_id": 47553676, "comment_id": 82063959, "body": "You may use <a href=\"http://en.cppreference.com/w/cpp/container/vector_bool\" rel=\"nofollow noreferrer\"><code>std::vector&lt;bool&gt;</code></a> instead. (It&#39;s specialized.)"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1511961227, "post_id": 47553676, "comment_id": 82063967, "body": "First of all <code>new bitset&lt;Columns&gt;()</code> allocates and default-constructs <i>one</i> <code>bitset</code> object. You probably want something like <code>bitset&lt;Columns&gt;* data = new bitset&lt;Columns&gt;[Rows];</code>. <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">Any good beginners book</a> would have told you that. With that said, you should really be using <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a>."}, {"owner": {"reputation": 19618, "user_id": 860585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YagL1.jpg?s=128&g=1", "display_name": "Rotem", "link": "https://stackoverflow.com/users/860585/rotem"}, "edited": false, "score": 1, "creation_date": 1511964337, "post_id": 47553676, "comment_id": 82066065, "body": "&quot;do I have to allocate hundreds of Megabytes to the Heap also?&quot; - well, <code>800,000 x 2,048 &#47; 8</code> <i>is</i> <code>204,800,000</code> bytes no matter which was you look at it."}, {"owner": {"reputation": 1751, "user_id": 1417053, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/fd080dbfb4fdd0a587281fcbd453beff?s=128&d=identicon&r=PG", "display_name": "Cypher", "link": "https://stackoverflow.com/users/1417053/cypher"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1511964353, "post_id": 47553676, "comment_id": 82066077, "body": "@Someprogrammerdude but I read elsewhere (in Stackoverflow) that the bitset&#39;s performance is superior to the std::vector. I come from a Java background would you please elaborate more on this?"}, {"owner": {"reputation": 1751, "user_id": 1417053, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/fd080dbfb4fdd0a587281fcbd453beff?s=128&d=identicon&r=PG", "display_name": "Cypher", "link": "https://stackoverflow.com/users/1417053/cypher"}, "reply_to_user": {"reputation": 19618, "user_id": 860585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YagL1.jpg?s=128&g=1", "display_name": "Rotem", "link": "https://stackoverflow.com/users/860585/rotem"}, "edited": false, "score": 0, "creation_date": 1511964444, "post_id": 47553676, "comment_id": 82066144, "body": "@Rotem Actually I meant manually changing the default Heap size opposed to C++ automatically extending it. By the way is this possible or should I always change the Heap size by hand just like the Stack size?"}, {"owner": {"reputation": 19618, "user_id": 860585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YagL1.jpg?s=128&g=1", "display_name": "Rotem", "link": "https://stackoverflow.com/users/860585/rotem"}, "edited": false, "score": 1, "creation_date": 1511964637, "post_id": 47553676, "comment_id": 82066268, "body": "@Cypher You don&#39;t mention the platform or compiler you&#39;re working with but normally the heap will allocate more memory as required."}, {"owner": {"reputation": 1751, "user_id": 1417053, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/fd080dbfb4fdd0a587281fcbd453beff?s=128&d=identicon&r=PG", "display_name": "Cypher", "link": "https://stackoverflow.com/users/1417053/cypher"}, "reply_to_user": {"reputation": 19618, "user_id": 860585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YagL1.jpg?s=128&g=1", "display_name": "Rotem", "link": "https://stackoverflow.com/users/860585/rotem"}, "edited": false, "score": 0, "creation_date": 1511964765, "post_id": 47553676, "comment_id": 82066363, "body": "@Rotem Thanks... I&#39;m using Visual C++ 2015 by the way."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1511964983, "post_id": 47553676, "comment_id": 82066503, "body": "I mean a vector <i>of</i> bitsets. Like <code>std::vector&lt;std::bitset&lt;Columns&gt;&gt; data(rows);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "is_accepted": false, "score": 2, "last_activity_date": 1511962214, "last_edit_date": 1511962214, "creation_date": 1511961812, "answer_id": 47553902, "question_id": 47553676, "link": "https://stackoverflow.com/questions/47553676/allocate-array-of-bitsetn-on-heap/47553902#47553902", "title": "Allocate Array of bitset&lt;N&gt; on heap", "body": "<pre><code>#include&lt;bitset&gt;\n#include&lt;vector&gt;\n\nconstexpr int Rows = 800000;\nconstexpr int Columns = 2048;\n\nint your_function() {\n  std::vector&lt;std::bitset&lt;Columns&gt; &gt; data (Rows);\n\n  // do something with data\n}\n</code></pre>\n\n<p>This will allocate the memory on the heap and it will still take whatever amount of memory it took before (plus a few bytes for bookkeeping). The heap however is not limited by a fixed size like the stack, but mainly limited by how much memory the system has, so on a reasonably modern PC you should be fine with a few hundred megabytes.</p>\n\n<p>I am not sure if that was your concern, but bitset's memory usage is not inefficient- <code>sizeof(std::bitset&lt;2048&gt;) == 256</code> on gcc so you do not waste a single bit there.</p>\n"}, {"comments": [{"owner": {"reputation": 16111, "user_id": 4386278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1I6qS.jpg?s=128&g=1", "display_name": "Asteroids With Wings", "link": "https://stackoverflow.com/users/4386278/asteroids-with-wings"}, "edited": false, "score": 0, "creation_date": 1590077385, "post_id": 61938753, "comment_id": 109549688, "body": "That&#39;s still a tremendous amount of data to put &quot;on the stack&quot;."}, {"owner": {"reputation": 98, "user_id": 7227724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU8py.png?s=128&g=1", "display_name": "magmine", "link": "https://stackoverflow.com/users/7227724/magmine"}, "reply_to_user": {"reputation": 16111, "user_id": 4386278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1I6qS.jpg?s=128&g=1", "display_name": "Asteroids With Wings", "link": "https://stackoverflow.com/users/4386278/asteroids-with-wings"}, "edited": false, "score": 0, "creation_date": 1590078282, "post_id": 61938753, "comment_id": 109550237, "body": "Yes indeed, but it makes sense to bring it out, since thinking about our data structures is fundamental when performance, timewise and memory wise is a real concern."}, {"owner": {"reputation": 16111, "user_id": 4386278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1I6qS.jpg?s=128&g=1", "display_name": "Asteroids With Wings", "link": "https://stackoverflow.com/users/4386278/asteroids-with-wings"}, "edited": false, "score": 0, "creation_date": 1590078668, "post_id": 61938753, "comment_id": 109550461, "body": "Well, exactly \ud83e\udd23 That&#39;s why you <i>wouldn&#39;t</i> do this ;)"}], "tags": [], "owner": {"reputation": 98, "user_id": 7227724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU8py.png?s=128&g=1", "display_name": "magmine", "link": "https://stackoverflow.com/users/7227724/magmine"}, "is_accepted": false, "score": 1, "last_activity_date": 1590077140, "creation_date": 1590077140, "answer_id": 61938753, "question_id": 47553676, "link": "https://stackoverflow.com/questions/47553676/allocate-array-of-bitsetn-on-heap/61938753#61938753", "title": "Allocate Array of bitset&lt;N&gt; on heap", "body": "<p>Storing this in the inverse way:</p>\n\n<pre><code>int Rows = 2048;\nint Columns = 800000;\n\nbitset&lt;Columns&gt; data[Rows];\n</code></pre>\n\n<p>Will save you almost 18Mb, and it is better for data locality.</p>\n\n<p>In the first method If you calculate how much memory you are using:</p>\n\n<pre><code>A = (24 * 800000) + 800000 * (2048/8) = 224x10^6 bytes\n</code></pre>\n\n<p>In the other hand, it you swap the row size with the column size the memory you will be using is:</p>\n\n<pre><code>B = (24 * 2048) + 2048 * (800000/8) = 204,849x10^6 bytes\n</code></pre>\n\n<p>where 24 is the fixed size in bytes of a vector object in C++ in most systems.\nSo in the second case you are reducing the memory usage by using less vectors.</p>\n\n<pre><code>A - B = 19150448 bytes = 18,26 Mb\n</code></pre>\n\n<p>This is not the answer but it can inderctly help you solve your problem.</p>\n"}], "owner": {"reputation": 1751, "user_id": 1417053, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/fd080dbfb4fdd0a587281fcbd453beff?s=128&d=identicon&r=PG", "display_name": "Cypher", "link": "https://stackoverflow.com/users/1417053/cypher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1590077400, "creation_date": 1511961038, "last_edit_date": 1590077400, "question_id": 47553676, "link": "https://stackoverflow.com/questions/47553676/allocate-array-of-bitsetn-on-heap", "title": "Allocate Array of bitset&lt;N&gt; on heap", "body": "<p>I'm creating an array of bitsets on the stack using this code:</p>\n\n<pre><code>int Rows = 800000;\nint Columns = 2048;\n\nbitset&lt;Columns&gt; data[Rows];\n</code></pre>\n\n<p>If I don't raise the stack size to hundreds of Megabytes, I get an stack overflow error.</p>\n\n<p>Is there any way to allocate this code on the heap? for example with a code like this (I'm not even sure if this code is right):</p>\n\n<pre><code>bitset&lt;Columns&gt;* data[Rows] = new bitset&lt;Columns&gt;();\n</code></pre>\n\n<p><strong>Edit:</strong> And more importantly, does this help memory usage or speed? Does it make any difference whether I use the Stack or the Heap for this? I really don't want to use any other libraries such as Boost too...</p>\n\n<p>I come from a Java background and some C++ syntax is new for me, Sorry if the question seems kind of wrong.</p>\n"}, {"tags": ["c++", "qt", "qt5"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1511961175, "post_id": 47553607, "comment_id": 82063932, "body": "I see it complicated since the calls to the slots are not sequential so maybe you could call the other slots, but those that are already running I think stopping them would be impossible. I think you are doing a problem unnecessarily because as a switch or a small logic you can do it"}, {"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1511961404, "post_id": 47553607, "comment_id": 82064058, "body": "@eyllanesc: It would be no problem if there are already some running, when they are not a <code>direct connection</code> because that can be easily handle by the <code>if</code>-clause. The <code>switch</code> has the downside, that I can&#39;t plug in and plug out as I seem fit, on run-time. The only way I can see would be using a map between the key and a functor (python-style). But as I am in the Qt framework, it would be <i>awsome</i> if there would be something already available."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1511962255, "post_id": 47553607, "comment_id": 82064609, "body": "Wouldn&#39;t it be easier to drop the signal slot idea and use something else e.g. <code>std::map&lt;int, void (*)()&gt;</code> instead? This would call exactly one function. You could/should even check whether the key is already in map before you do the call. (Of course, this might be extended to object/method pairs as well or even <code>std::function</code>.)"}, {"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1511962729, "post_id": 47553607, "comment_id": 82064962, "body": "@Scheff: That was an idea I also propsed 20 mins ago, and that I am investigating right now. I still think it would be awsome, if I could use something from the framework, instead of creating my own way. There might be some possibility with events maybe."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1511962981, "post_id": 47553607, "comment_id": 82065144, "body": "&quot;I could use something from the framework.&quot; Yeah, but it smells somehow like <i>abuse</i> considering all the function calls and if-s to provide something like an &quot;extendable switch&quot;..."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 3, "creation_date": 1511963036, "post_id": 47553607, "comment_id": 82065186, "body": "I would consider <code>std::map&lt;&gt;</code> and <code>std::function&lt;&gt;</code> the better &quot;framework&quot; for what you intend to do."}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1511963169, "post_id": 47553607, "comment_id": 82065276, "body": "@derM please elaborate after which condition do you need the slots to be executed again?"}, {"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1511963964, "post_id": 47553607, "comment_id": 82065811, "body": "@vahancho: Unconditionally when the signal is emitted the next time."}, {"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 1, "creation_date": 1511964756, "post_id": 47553607, "comment_id": 82066351, "body": "So, I have tried and implemented a quick and dirty proof of concept to <i>ab</i> use the QEvent-System. I will now try the <code>std::map&lt;&gt;</code> and <code>std::function&lt;&gt;</code> solution, that seems to be favored."}], "answers": [{"tags": [], "owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "is_accepted": false, "score": 0, "last_activity_date": 1511964679, "creation_date": 1511964679, "answer_id": 47554787, "question_id": 47553607, "link": "https://stackoverflow.com/questions/47553607/stop-slots-from-being-executed/47554787#47554787", "title": "Stop slots from being executed", "body": "<p>One way to do something like this, <em>(ab)</em> using the Qt framework would use the <code>QEvent</code>-system.</p>\n\n<p>The signal handler won't do more, than translating the signal in an <code>QEvent</code>.  Instead of all the separate slots, install <code>eventFilter</code>. If the <code>eventFilter</code> accepts the event, return <code>true</code> to stop the propagation to other (filter)objects.</p>\n\n<blockquote>\n  <p>The code is just a quick and dirty test and has no security precautions. It might easily crash hard.</p>\n</blockquote>\n\n<p><em>// testevent.h</em></p>\n\n<pre><code>#ifndef TESTEVENT_H\n#define TESTEVENT_H\n\n#include &lt;QObject&gt;\n#include &lt;QEvent&gt;\n\nclass TestEvent: public QEvent\n{\n    int m_x;\npublic:\n    TestEvent(int x = 0);\n    int x() { return m_x; }\n\n};\n\nclass TestEventFilter: public QObject\n{\n    Q_OBJECT\n    int m_fx;\npublic:\n    TestEventFilter(int fx, QObject* parent = nullptr);\n    bool eventFilter(QObject* obj, QEvent* event) Q_DECL_OVERRIDE;\n}; \nQ_DECLARE_METATYPE(TestEvent)\n\n#endif // TESTEVENT_H\n</code></pre>\n\n<p>// testevent.cpp</p>\n\n<pre><code>#include \"testevent.h\"\n#include &lt;QDebug&gt;\n\nTestEvent::TestEvent(int x)\n    : QEvent(QEvent::User)\n    , m_x(x)\n{\n}\n\nTestEventFilter::TestEventFilter(int fx, QObject *parent)\n    : QObject(parent)\n    , m_fx(fx)\n{\n}\n\nbool TestEventFilter::eventFilter(QObject *obj, QEvent *event)\n{\n    Q_UNUSED(obj);\n    TestEvent* e = static_cast&lt;TestEvent*&gt;(event);\n    qDebug() &lt;&lt; \"EventFilter for\" &lt;&lt; m_fx &lt;&lt; \"got\" &lt;&lt; e;\n    if (e-&gt;x() == m_fx) {\n        qDebug() &lt;&lt; \"accept that event!\";\n        event-&gt;accept();\n        return true;\n    }\n    event-&gt;ignore();\n    return false;\n}\n</code></pre>\n\n<p><em>// run</em></p>\n\n<pre><code>QObject o;\n\nTestEventFilter* f1 = new TestEventFilter(10);\nTestEventFilter* f2 = new TestEventFilter(5);\nTestEventFilter* f3 = new TestEventFilter(3);\nTestEventFilter* f4 = new TestEventFilter(7);\n\no.installEventFilter(f1);\no.installEventFilter(f2);\no.installEventFilter(f3);\no.installEventFilter(f4);\n\nqApp-&gt;sendEvent(&amp;o, new TestEvent(5));\nqApp-&gt;sendEvent(&amp;o, new TestEvent(3));\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>EventFilter for 7 got 0x369f2fe0<br>\n  EventFilter for 3 got 0x369f2fe0<br>\n  EventFilter for 5 got 0x369f2fe0<br>\n  accept that event!<br>\n  EventFilter for 7 got 0x369f3250<br>\n  EventFilter for 3 got 0x369f3250<br>\n  accept that event!  </p>\n</blockquote>\n"}], "owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512839489, "creation_date": 1511960795, "last_edit_date": 1512839489, "question_id": 47553607, "link": "https://stackoverflow.com/questions/47553607/stop-slots-from-being-executed", "title": "Stop slots from being executed", "body": "<p>In Qt, I can <code>emit</code> a signal, to which I have multiple slots connected, where in the case of direct connections, the connected slots are called on after another.</p>\n\n<p>Let <code>void mySignal(int x)</code> be the signal of the class <code>MyClass</code>.</p>\n\n<p>Depending on the value of <code>x</code> I want to perform a different action, and under the assumption, I want to do exactly one action, I can connect a slot, with a <code>switch-case</code> construct to execute the relevant action.</p>\n\n<p>This implies that I need to know beforehand what kind of values I can get, and what the actions are.</p>\n\n<p>I can also connect a slot for each of my actions, and guard the execution by a <code>if</code> clause. Now I can just connect whatever I want, whenever I want it. But under the assumption that I want to do exactly one action, it would be performance-wise beneficial if I could stop further execution of the slots, when I found the 'match'.</p>\n\n<pre><code>[...]\nQObject::connect(this, &amp;MyClass::mySignal, this, [this](int x) {\n    if (x == 0) {\n        qDebug() &lt;&lt; x; // Stop it now!;\n    }\n});\nQObject::connect(this, &amp;MyClass::mySignal, this, [this](int x) {\n    if (x == 4) {\n        qDebug() &lt;&lt; x; // Stop it now!;\n    }\n});\nQObject::connect(this, &amp;MyClass::mySignal, this, [this](int x) {\n    if (x == 109) {\n        qDebug() &lt;&lt; x; // Stop it now!; \n    }\n});\n</code></pre>\n\n<blockquote>\n  <p>Is there a way, to tell the signal, to not execute anymore slots, <strong>until the signal is emitted again</strong>?</p>\n</blockquote>\n"}, {"tags": ["c++", "windows", "qt"], "comments": [{"owner": {"reputation": 1306, "user_id": 3064877, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ffb5b88113560c98da7600da5dd3bc8f?s=128&d=identicon&r=PG", "display_name": "user2346536", "link": "https://stackoverflow.com/users/3064877/user2346536"}, "edited": false, "score": 1, "creation_date": 1511961493, "post_id": 47553575, "comment_id": 82064104, "body": "I&#39;ve had problem like that too. Some plugins are loaded dynamically from the plugin directory. By any chance:   <a href=\"http://doc.qt.io/qt-5/deployment-plugins.html#the-plugin-directory\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/deployment-plugins.html#the-plugin-directory</a>  Try to put the appropriate dll/lib/whatever in the plugin directory. I hope this helps you."}, {"owner": {"reputation": 70070, "user_id": 9611, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/749b73007119baf94fc077c50bcc58e8?s=128&d=identicon&r=PG", "display_name": "shoosh", "link": "https://stackoverflow.com/users/9611/shoosh"}, "reply_to_user": {"reputation": 1306, "user_id": 3064877, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ffb5b88113560c98da7600da5dd3bc8f?s=128&d=identicon&r=PG", "display_name": "user2346536", "link": "https://stackoverflow.com/users/3064877/user2346536"}, "edited": false, "score": 1, "creation_date": 1511990922, "post_id": 47553575, "comment_id": 82082004, "body": "@user2346536 the whole point of having a static build is that I won&#39;t need outside dlls from the plugins directory"}], "owner": {"reputation": 70070, "user_id": 9611, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/749b73007119baf94fc077c50bcc58e8?s=128&d=identicon&r=PG", "display_name": "shoosh", "link": "https://stackoverflow.com/users/9611/shoosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511969913, "creation_date": 1511960673, "last_edit_date": 1511969913, "question_id": 47553575, "link": "https://stackoverflow.com/questions/47553575/qt-static-build-missing-windows-plugin", "title": "Qt static build missing windows plugin", "body": "<p>I've compiled Qt 5.9.3 to static library using</p>\n\n<pre><code>configure -static -release -platform win32-msvc\n</code></pre>\n\n<p>I'm compiling my application and it compiles and links successfully but when I start it it fails with </p>\n\n<blockquote>\n  <p>This application failed to start because it could not find or load the Qt platform plugin \"windows\"</p>\n</blockquote>\n\n<p>The problem is clearly that it fails to find the qwindows plugin which is now a .lib and not a .dll<br>\nI tried adding qwindows.lib to the linker input files but that did not have any effect.<br>\nIs there a known fix for this issue?</p>\n"}, {"tags": ["android", "c++", "cocos2d-x", "assert"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1511960547, "post_id": 47553467, "comment_id": 82063550, "body": "Standard <code>assert</code> behavior is governed by the <code>NDEBUG</code> macro symbol. The standard provides special support for defining or undefining this symbol in code and including <code>&lt;assert.h&gt;</code> anew. Which is guaranteed to redefine <code>assert</code> correspondingly (unlike the behavior of other headers)."}, {"owner": {"reputation": 2885, "user_id": 1535428, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64ab20f64a8d6228c1177c044d0c11a0?s=128&d=identicon&r=PG", "display_name": "T M", "link": "https://stackoverflow.com/users/1535428/t-m"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1511960923, "post_id": 47553467, "comment_id": 82063755, "body": "@Cheersandhth.-Alf where I should define <code>NDEBUG</code> ?"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 1, "creation_date": 1511961759, "post_id": 47553467, "comment_id": 82064304, "body": "Please don&#39;t define NDEBUG.  rather define assert for the modules you want, or in the precompiler headerslist.  Use <code>#undef assert</code> <code>#define assert(cond) ....</code>.  You can exit the app from there, and even write to a log file, using the <b>FILE</b> and <b>LINE</b> macros inside your definition of assert() to write crash info to a file."}, {"owner": {"reputation": 2885, "user_id": 1535428, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64ab20f64a8d6228c1177c044d0c11a0?s=128&d=identicon&r=PG", "display_name": "T M", "link": "https://stackoverflow.com/users/1535428/t-m"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1511961975, "post_id": 47553467, "comment_id": 82064437, "body": "@Micha&#235;lRoy it is a big project I want to make all existed assertions to work in release build."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1511962175, "post_id": 47553467, "comment_id": 82064559, "body": "@TM: You can also change assert.h in your runtime headers to whatever you want ."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 1, "creation_date": 1511962369, "post_id": 47553467, "comment_id": 82064672, "body": "The reason I say that is that NDEBUG may cause changes to other parts of the code, like selecting some debug options in allocation and in stl containers.  Changing assert() at the source is the fastest way to get the closest binary to the actual release version as possible."}, {"owner": {"reputation": 2885, "user_id": 1535428, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64ab20f64a8d6228c1177c044d0c11a0?s=128&d=identicon&r=PG", "display_name": "T M", "link": "https://stackoverflow.com/users/1535428/t-m"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1511962514, "post_id": 47553467, "comment_id": 82064789, "body": "@Micha&#235;lRoy is android:debuggable=&quot;true&quot; to &lt; application &gt; tag in AndroidManifest.xml equivalent to  defining NDEBUG?"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 1, "creation_date": 1511962582, "post_id": 47553467, "comment_id": 82064842, "body": "No idea.  I&#39;m mostly in the Windows or embedded world."}, {"owner": {"reputation": 2885, "user_id": 1535428, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64ab20f64a8d6228c1177c044d0c11a0?s=128&d=identicon&r=PG", "display_name": "T M", "link": "https://stackoverflow.com/users/1535428/t-m"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1511962619, "post_id": 47553467, "comment_id": 82064865, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/160099/discussion-between-t-m-and-michael-roy\">continue this discussion in chat</a>."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 1, "creation_date": 1511983634, "post_id": 47553467, "comment_id": 82078303, "body": "@Micha&#235;lRoy: Defining or undefining a symbol from the standard library, other than where explicitly permitted, has Undefined Behavior (C++14 &#167;17.6.4.3.1/1 \u201cshall not\u201d). Your idea that using the standard functionality can wreak havoc, sounds very much like FUD."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 1, "creation_date": 1511984987, "post_id": 47553467, "comment_id": 82079024, "body": "Even when the goal is finding the source of a bug ?  That&#39;s the usual use case for enabling assertions and traces in a release build."}], "answers": [{"tags": [], "owner": {"reputation": 60, "user_id": 8790436, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rAM9LOGodDA/AAAAAAAAAAI/AAAAAAAAAC8/S3qMqD_itAs/photo.jpg?sz=128", "display_name": "formatC&#39;vt", "link": "https://stackoverflow.com/users/8790436/formatcvt"}, "is_accepted": false, "score": 1, "last_activity_date": 1515283469, "creation_date": 1515283469, "answer_id": 48133144, "question_id": 47553467, "link": "https://stackoverflow.com/questions/47553467/how-keep-asserts-active-for-release-build/48133144#48133144", "title": "How keep asserts active for release build", "body": "<p>assert for android in cocos2d-x is defined as <code>__android_log_print</code> nkd function (in <code>CCPlatformDefine-android.h</code>)\nyou can redefine it with <code>__android_log_assert</code></p>\n\n<pre><code>#include \"platform/CCPlatformConfig.h\"\n#if CC_TARGET_PLATFORM == CC_PLATFORM_ANDROID\n//Redefine CC_ASSERT for android with __android_log_assert\n\n#ifdef CC_ASSERT\n#undef CC_ASSERT\n#endif\n\n#ifdef CC_NO_MESSAGE_PSEUDOASSERT\n#undef CC_NO_MESSAGE_PSEUDOASSERT\n#endif\n\n#ifdef CC_MESSAGE_PSEUDOASSERT\n#undef CC_MESSAGE_PSEUDOASSERT\n#endif\n\n#include &lt;android/log.h&gt;\n\n#define CC_NO_MESSAGE_PSEUDOASSERT(cond)                        \\\n    if (!(cond)) {                                              \\\n        __android_log_assert(#cond,                              \\\n                            \"cocos2d-x assert\",                 \\\n                            \"%s function:%s line:%d\",           \\\n                            __FILE__, __FUNCTION__, __LINE__);  \\\n    }\n\n#define CC_MESSAGE_PSEUDOASSERT(cond, msg)                          \\\n    if (!(cond)) {                                                  \\\n        __android_log_assert(#cond,                                 \\\n                            \"cocos2d-x assert\",                     \\\n                            \"file:%s function:%s line:%d, %s\",      \\\n                            __FILE__, __FUNCTION__, __LINE__, msg); \\\n    }\n\n#define CC_ASSERT(cond) CC_NO_MESSAGE_PSEUDOASSERT(cond)\n\n#endif //CC_TARGET_PLATFORM == CC_PLATFORM_ANDROID\n</code></pre>\n"}], "owner": {"reputation": 2885, "user_id": 1535428, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64ab20f64a8d6228c1177c044d0c11a0?s=128&d=identicon&r=PG", "display_name": "T M", "link": "https://stackoverflow.com/users/1535428/t-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515283469, "creation_date": 1511960337, "question_id": 47553467, "link": "https://stackoverflow.com/questions/47553467/how-keep-asserts-active-for-release-build", "title": "How keep asserts active for release build", "body": "<p>I am developing android application with cocos2d-x using c++.\nI want to get asserts thrown for my release build.</p>\n\n<p>I have <a href=\"https://stackoverflow.com/questions/9140423/android-ndk-assert-h-problems\">read</a> that it is possible \nby adding</p>\n\n<ol>\n<li>android:debuggable=\"true\" to &lt; application > tag in AndroidManifest.xml</li>\n<li>APP_OPTIM := debug to Application.mk file</li>\n</ol>\n\n<p>But I want to achieve this without disabling optimizations, compile with debug symbols, or any other debugging or tracing facilities in the code. </p>\n\n<p>How I can keep asserts active for release build without any other debugging or tracing facilities in the code. How to make such a configuration?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 4, "creation_date": 1511960211, "post_id": 47553413, "comment_id": 82063357, "body": "You are using a reference so why are you returning it?"}, {"owner": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "edited": false, "score": 2, "creation_date": 1511960512, "post_id": 47553413, "comment_id": 82063532, "body": "What exactly is not working? Compiling error? Error in the result?"}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 1, "creation_date": 1511960930, "post_id": 47553413, "comment_id": 82063764, "body": "<code>return A</code> is inside the <code>while</code> loop, put it outside. Or better remove the return and change the return type of the function to <code>void</code>."}, {"owner": {"reputation": 1306, "user_id": 3064877, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ffb5b88113560c98da7600da5dd3bc8f?s=128&d=identicon&r=PG", "display_name": "user2346536", "link": "https://stackoverflow.com/users/3064877/user2346536"}, "edited": false, "score": 0, "creation_date": 1511960963, "post_id": 47553413, "comment_id": 82063787, "body": "You already have the value as it was past as a non-const reference.   You do not need to return it and in fact you should not return it the way you do since it copies the vector it is time consuming.   Also, your algorithms is O(k*n) [for k&lt;n] while an O(n) solution can easily be achieved."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1511962721, "post_id": 47553413, "comment_id": 82064954, "body": "<i>I am writing a program to shift the elements of a vector to the side by k number of times</i> -- You are reinventing the wheel.  The <code>std::rotate</code> function already does this."}, {"owner": {"reputation": 17, "user_id": 6072707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de8729504ade9775a7cc3ac8754eeaa3?s=128&d=identicon&r=PG&f=1", "display_name": "Usman", "link": "https://stackoverflow.com/users/6072707/usman"}, "reply_to_user": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "edited": false, "score": 0, "creation_date": 1511964479, "post_id": 47553413, "comment_id": 82066161, "body": "@Ventu I am using an online C++ compiler, no error message, it  just asks for the number of times i want the the elements to be shifted, after that it doesn&#39;t give the shifted vector output."}, {"owner": {"reputation": 17, "user_id": 6072707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de8729504ade9775a7cc3ac8754eeaa3?s=128&d=identicon&r=PG&f=1", "display_name": "Usman", "link": "https://stackoverflow.com/users/6072707/usman"}, "reply_to_user": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1511964523, "post_id": 47553413, "comment_id": 82066185, "body": "@KarstenKoop thanks for the observation that was a mistake, changed it but still didn&#39;t work. and I am following specifications given by by the online practice questions, which requires the function to be of a return type."}, {"owner": {"reputation": 17, "user_id": 6072707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de8729504ade9775a7cc3ac8754eeaa3?s=128&d=identicon&r=PG&f=1", "display_name": "Usman", "link": "https://stackoverflow.com/users/6072707/usman"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1511964548, "post_id": 47553413, "comment_id": 82066206, "body": "@PaulMckenzie It is a practice question, I am relatively new to programming, that&#39;s why i&#39;m trying to work it out myself I could use the rotate function. Thanks for the tip tho."}], "owner": {"reputation": 17, "user_id": 6072707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de8729504ade9775a7cc3ac8754eeaa3?s=128&d=identicon&r=PG&f=1", "display_name": "Usman", "link": "https://stackoverflow.com/users/6072707/usman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511960525, "creation_date": 1511960136, "last_edit_date": 1511960525, "question_id": 47553413, "link": "https://stackoverflow.com/questions/47553413/how-to-call-a-vector-function-and-return-a-vector-from-a-function", "title": "How to call a vector function and return a vector from a function", "body": "<p>I am writing a program to shift the elements of a vector to the side by <code>k</code> number of times. I have the code ready, however, I have problems calling and returning the function which is of type vector. Please take a look at my code and give me the correct guidance as to what to put where I have commented with question marks.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include&lt;vector&gt;\nusing namespace std;\nvector&lt;int&gt; solution(vector&lt;int&gt; &amp;A, int k);//function to shift the vector elements to the right k times\n\nint main()\n{\n    int no;// number of times to shift the vector\n\n    vector&lt;int&gt; arr;// array to be shifted\n\n    //initializing vectors\n    arr.push_back(1);\n    arr.push_back(2);\n    arr.push_back(3);\n    arr.push_back(4);\n    cout&lt;&lt;\"write the no of times to rotate elements: \"&lt;&lt;endl;\n    cin&gt;&gt;no;\n\n    solution(arr, no)//?????? dont know how to call the function\n\n    return 0;\n}\n\n\nvector&lt;int&gt; solution(vector&lt;int&gt; &amp;A, int k){\n\n    int times=(k%A.size());// number of times to be shifted \n\n    int count=0;\n\n\n    //while loop to shift times number of TIMES\n    while(count&lt;=times){\n\n        for(int i=0; i&lt;A.size();i++)// FOR LOOP TO SHIFT EACH ELEMENT TO THE SIDE ONCE\n        {\n            if(A[i]!=A[(A.size()-1)])\n                A[i]=A[i+1];\n            else\n                A[i]=A[i-(A.size()-1)];\n            count++;\n        }\n\n        return A; // ??? how do I return the value of the vector to the main program?\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "stl"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1511960052, "post_id": 47553338, "comment_id": 82063255, "body": "I think usually questions seeking feedback on working code should be posted on Code Review, not SO."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 2, "creation_date": 1511960594, "post_id": 47553338, "comment_id": 82063579, "body": "@underscore_d I can imagine this one being in scope for both, as it is asking a specific question about a language feature which doesn&#39;t work as expected (even if a workaround is present in the question)."}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 1, "creation_date": 1511960746, "post_id": 47553338, "comment_id": 82063650, "body": "you can use <code>std::bind(&amp;Elem::walk, std::placeholders::_1, f));</code> so you don&#39;t need <code>do_walk</code>"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1511962531, "post_id": 47553338, "comment_id": 82064804, "body": "@appleapple - not noticed; thanks."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1511964780, "post_id": 47553338, "comment_id": 82066371, "body": "for range (C++11) is a good alternative to <code>for_each</code> -&gt; <code>for (auto&amp; elem : children) { elem.walk(f); }</code>. It should be enabled in gcc 4.4.7"}, {"owner": {"reputation": 2333, "user_id": 6783775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d399a7e1545b42ae65bca9b4568099a?s=128&d=identicon&r=PG", "display_name": "rveerd", "link": "https://stackoverflow.com/users/6783775/rveerd"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1511970865, "post_id": 47553338, "comment_id": 82070945, "body": "@Jarod42 nope, I tested this and gcc 4.4.7 does not support range-based for loops. Introduced in 4.6 according to <a href=\"https://gcc.gnu.org/projects/cxx-status.html\" rel=\"nofollow noreferrer\">C++ Standards Support in GCC</a>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1511971821, "post_id": 47553338, "comment_id": 82071590, "body": ":/, so <code>for (auto it = children.begin(); it != children.end(); ++it) {it-&gt;walk(f);}</code>."}], "answers": [{"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 6, "last_activity_date": 1511961058, "creation_date": 1511961058, "answer_id": 47553682, "question_id": 47553338, "link": "https://stackoverflow.com/questions/47553338/tree-traversal-using-stdfor-each/47553682#47553682", "title": "Tree traversal using std::for_each", "body": "<ol>\n<li><p><code>std::bind</code> is capable of invoking member functions (passing the first argument to the implicit <code>this</code> parameter), so you can replace <code>do_walk</code> with this:</p>\n\n<pre><code>std::bind(&amp;Elem::walk, std::placeholders::_1, f)\n</code></pre></li>\n<li><p>The problem with making <code>walk</code> a template is that at the time of <code>bind</code>ing, it's not clear which instantiation should be used. You can disambiguate that by explicitly specifying the template argument:</p>\n\n<pre><code>std::bind(&amp;Elem::walk&lt;UnaryFunction&gt;, std::placeholders::_1, f)\n</code></pre></li>\n<li><p>I believe <code>std::for_each</code> is fine.</p></li>\n</ol>\n\n<p><a href=\"https://wandbox.org/permlink/rpaX86RoVqSTNqtG\" rel=\"noreferrer\">[Live example]</a> using gcc 4.4.7</p>\n"}, {"comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1511963002, "post_id": 47553818, "comment_id": 82065153, "body": "Note that <code>std::function</code> is not free, it has a runtime overhead on each call (because the call has to be <code>virtual</code>) and doesn&#39;t play too nicely with inlining. <code>std::function</code> is useful when you need to <i>store</i> an arbitrary callable, but shouldn&#39;t be necessary when you just need to <i>call</i> one."}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1511972766, "post_id": 47553818, "comment_id": 82072230, "body": "@Angew: Nit\u2026 it doesn&#39;t have to be virtual, but it will almost certainly be indirect (in C++ terms either a virtual call or a call through a function pointer). libstdc++&#39;s <code>std::function</code> is implemented in terms of two function pointers (an &quot;invoker&quot; that implements <code>operator()</code>, and a &quot;manager&quot; that is responsible for copying, destruction etc.), and an <code>_Any_data</code> that basically contains the functor&#39;s data, if small enough and nothrow-movable, or a heap pointer to it."}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1511973191, "post_id": 47553818, "comment_id": 82072490, "body": "Correction: It doesn&#39;t check for nothrow-movable, because <code>std::function</code> is not nothrow-movable. I consider this a standards defect. It&#39;s also inconsistent with <code>std::any</code>."}], "tags": [], "owner": {"reputation": 935, "user_id": 5033969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c48d36998d3454bf1c3a847b5938f9b7?s=128&d=identicon&r=PG&f=1", "display_name": "arturx64", "link": "https://stackoverflow.com/users/5033969/arturx64"}, "is_accepted": false, "score": 1, "last_activity_date": 1511962441, "last_edit_date": 1511962441, "creation_date": 1511961537, "answer_id": 47553818, "question_id": 47553338, "link": "https://stackoverflow.com/questions/47553338/tree-traversal-using-stdfor-each/47553818#47553818", "title": "Tree traversal using std::for_each", "body": "<p>You can use std::function instead to solve problem with template walk.\nLet's sumarryze:</p>\n\n<blockquote>\n  <p>I use a wrapper function do_walk and std::bind to call the member\n  function walk on each element. Is there a way to avoid the wrapper\n  function and directly call the member function?</p>\n</blockquote>\n\n<p>Yes. Use std::function</p>\n\n<blockquote>\n  <p>I use a typedef for the callback function UnaryFunction. I would\n  prefer to use a templated version of walk. However, when I change the\n  code to use a template I get the following compilation error: error:\n  no matching function for call to 'bind(, std::_Placeholder&lt;1>&amp;, void (*&amp;)(const Elem&amp;))'. Is it possible\n  to use templates in this context?</p>\n</blockquote>\n\n<p>Yes. Use std::function + variadic templates</p>\n\n<blockquote>\n  <p>Perhaps there is an alternative to std::for_each that is better suited\n  for this kind of tree traversal?</p>\n</blockquote>\n\n<p>I think std::for_each is OK for this purpose</p>\n\n<pre><code>#include &lt;list&gt;\n#include &lt;algorithm&gt;\n#include &lt;functional&gt;\n\n\nstruct Elem\n{\n   std::list&lt;Elem&gt; children; // Some container, std::list for now.\n\n                          //template&lt; class UnaryFunction &gt; // (2)\n   template&lt;typename ...TArgs&gt;\n   void walk( std::function&lt;TArgs...&gt; f ) const\n   {\n       // Walk all children.\n       std::for_each(\n           children.begin(),\n           children.end(),\n           f ); // (1) NO WRAPPER\n   }\n};\n\nvoid pretty_print( const Elem&amp; elem )\n{\n    // Pretty print element.\n}\n\nint main()\n{\n   Elem root;\n   Elem root1;\n   root.children.push_back( root1 );\n\n   // Create tree somehow.\n   root.walk&lt;void( const Elem&amp; )&gt;( pretty_print );\n   // or root.walk&lt;decltype( pretty_print )&gt;( pretty_print ); if you do not \n   // want to clarify type\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2333, "user_id": 6783775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d399a7e1545b42ae65bca9b4568099a?s=128&d=identicon&r=PG", "display_name": "rveerd", "link": "https://stackoverflow.com/users/6783775/rveerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 47553682, "answer_count": 2, "score": 4, "last_activity_date": 1511962441, "creation_date": 1511959880, "question_id": 47553338, "link": "https://stackoverflow.com/questions/47553338/tree-traversal-using-stdfor-each", "title": "Tree traversal using std::for_each", "body": "<p>I am fairly new to using <code>algorithm</code> and <code>functional</code> in C++. I need to do tree traversal and perform a function for each element. See the code below.</p>\n\n<p>This works but a I have few things I don't like and perhaps can do better. Note that I am limited to a fairly old version of g++ (4.4.7) and cannot use lambda functions.</p>\n\n<ol>\n<li><p>I use a wrapper function <code>do_walk</code> and <code>std::bind</code> to call the member function <code>walk</code> on each element. Is there a way to avoid the wrapper function and directly call the member function?</p></li>\n<li><p>I use a typedef for the callback function <code>UnaryFunction</code>. I would prefer to use a templated version of <code>walk</code>. However, when I change the code to use a template I get the following compilation error: <code>error: no matching function for call to 'bind(&lt;unresolved overloaded function type&gt;, std::_Placeholder&lt;1&gt;&amp;, void (*&amp;)(const Elem&amp;))'</code>. Is it possible to use templates in this context?</p></li>\n<li><p>Perhaps there is an alternative to <code>std::for_each</code> that is better suited for this kind of tree traversal?</p></li>\n</ol>\n\n<p>My code so far:</p>\n\n<pre><code>#include &lt;list&gt;\n#include &lt;algorithm&gt;\n#include &lt;functional&gt;\n\nstruct Elem;\ntypedef void (*UnaryFunction)(const Elem&amp;); // (2)\n\nstruct Elem\n{\n    std::list&lt;Elem&gt; children; // Some container, std::list for now.\n\n    //template&lt; class UnaryFunction &gt; // (2)\n    void walk(UnaryFunction f) const\n    {\n        // Walk all children.\n        std::for_each(\n            children.begin(),\n            children.end(),\n            std::bind(do_walk, std::placeholders::_1, f)); // (1)\n\n        // Walk this object.\n        f(*this);\n    }\n\n    //template&lt; class UnaryFunction &gt; // (2)\n    static void do_walk(const Elem&amp; elem, UnaryFunction f) // (1)\n    {\n        elem.walk(f);\n    }\n};\n\nvoid pretty_print(const Elem&amp; elem)\n{\n    // Pretty print element.\n}\n\nint main()\n{\n    Elem root;\n    // Create tree somehow.\n    root.walk(pretty_print);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++14"], "answers": [{"tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": false, "score": 1, "last_activity_date": 1511963091, "creation_date": 1511963091, "answer_id": 47554300, "question_id": 47553232, "link": "https://stackoverflow.com/questions/47553232/functions-vs-lambda-as-function-parameters/47554300#47554300", "title": "Functions vs lambda as function parameters", "body": "<p>First, <code>T::operator()</code> is not a valid syntax; to form a pointer-to-member, use <code>&amp;T::operator()</code>.</p>\n\n<p>Second, <code>argN</code> is specialized for regular functions, but not for pointers-to-member-function; the two are not the same thing. Add</p>\n\n<pre><code>template &lt;std::size_t N, typename T, typename R, typename ... As&gt;\nstruct argN&lt;N, R(T::*)(As...)&gt; { using type = typename typeN&lt;N, As...&gt;::type; };\n\ntemplate &lt;std::size_t N, typename T, typename R, typename ... As&gt;\nstruct argN&lt;N, R(T::*)(As...) const&gt; { using type = typename typeN&lt;N, As...&gt;::type; };\n</code></pre>\n\n<p>With these changes, <a href=\"http://rextester.com/ZJIQ26816\" rel=\"nofollow noreferrer\">your code compiles</a></p>\n"}], "owner": {"reputation": 56, "user_id": 292378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14ea992cf81100803eca07ed2d579f2?s=128&d=identicon&r=PG", "display_name": "DavideRizzi", "link": "https://stackoverflow.com/users/292378/daviderizzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511968790, "creation_date": 1511959536, "last_edit_date": 1511968790, "question_id": 47553232, "link": "https://stackoverflow.com/questions/47553232/functions-vs-lambda-as-function-parameters", "title": "Functions vs lambda as function parameters", "body": "<p>I am trying to make some practice with the new C++ standards, but I am having an hard time to diagnose what is happening here:</p>\n\n<p><a href=\"https://godbolt.org/g/x6mNmc\" rel=\"nofollow noreferrer\">https://godbolt.org/g/x6mNmc</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;std::size_t N, typename T0, typename ... Ts&gt;\nstruct typeN { using type = typename typeN&lt;N-1U, Ts...&gt;::type; };\n\ntemplate &lt;typename T0, typename ... Ts&gt;\nstruct typeN&lt;0U, T0, Ts...&gt; { using type = T0; };\n\ntemplate &lt;std::size_t, typename&gt;\nstruct argN;\n\ntemplate &lt;std::size_t N, typename R, typename ... As&gt;\nstruct argN&lt;N, R(As...)&gt; { using type = typename typeN&lt;N, As...&gt;::type; };\n\ntemplate &lt;typename&gt;\nstruct returnType;\n\ntemplate &lt;typename R, typename ... As&gt;\nstruct returnType&lt;R(As...)&gt; { using type = R; };\n\ntemplate&lt;std::size_t N, typename R&gt;\nusing arg_type = typename argN&lt;N,R&gt;::type;\n\n// Here\nstruct Dummy {\n    int x;\n};\n\nstruct A {\n    Dummy dummy;\n};\n\nvoid something(decltype(A::dummy)&amp;a, int32_t in) {\n    a.x = in;\n}\n\nauto something_l = [](decltype(A::dummy)&amp;a, int32_t in) -&gt; void {\n    a.x = in;\n};\n\ntemplate&lt;typename T&gt;\nauto get_something(A&amp; a, T&amp; f) {\n    return [&amp;](arg_type&lt;0, T&gt; s) {\n        f(a.dummy, 1);\n    };\n};\n\ntemplate&lt;typename T&gt;\nauto get_something_l(A&amp; a, T f) {\n    return [&amp;](arg_type&lt;0, decltype (T::operator())&gt; s) {\n        f(a.dummy, 1);\n    };\n};\n\nint main()\n{\n    A a;\n    auto ds = get_something(a, something);\n    //auto ds_l = get_something_l(a, something_l);\n    auto ds_l2 = get_something_l(a, [](decltype(A::dummy)&amp;a, int32_t in) -&gt; void {\n            a.x = in;\n        }\n    );\n\n}\n</code></pre>\n\n<p>The compiler (gcc 6.3.0 -std=c++1y) says me:</p>\n\n<pre><code>In instantiation of 'struct get_something_l(A&amp;, T) [with T = main()::&lt;lambda(Dummy&amp;, int32_t)&gt;]::&lt;lambda&gt;':\n52 : &lt;source&gt;:52:5:   required from 'auto get_something_l(A&amp;, T) [with T = main()::&lt;lambda(Dummy&amp;, int32_t)&gt;]'\n63 : &lt;source&gt;:63:5:   required from here\n50 : &lt;source&gt;:50:55: error: invalid use of non-static member function 'main()::&lt;lambda(Dummy&amp;, int32_t)&gt;'\n     return [&amp;](arg_type&lt;0, decltype (T::operator())&gt; s) {\n                                                       ^\n&lt;source&gt;: In instantiation of 'auto get_something_l(A&amp;, T) [with T = main()::&lt;lambda(Dummy&amp;, int32_t)&gt;]':\n63 : &lt;source&gt;:63:5:   required from here\n50 : &lt;source&gt;:50:12: error: member 'get_something_l(A&amp;, T) [with T = main()::&lt;lambda(Dummy&amp;, int32_t)&gt;]::&lt;lambda&gt;::&lt;f capture&gt;' is uninitialized reference\n     return [&amp;](arg_type&lt;0, decltype (T::operator())&gt; s) {\n            ^\n50 : &lt;source&gt;:50:12: error: member 'get_something_l(A&amp;, T) [with T = main()::&lt;lambda(Dummy&amp;, int32_t)&gt;]::&lt;lambda&gt;::&lt;a capture&gt;' is uninitialized reference\nCompiler exited with result code 1\n</code></pre>\n\n<p>I think I have an idea of what it is happening, even though I cannot find a solution, if there is any...</p>\n"}, {"tags": ["c++", "list", "priority-queue"], "comments": [{"owner": {"reputation": 46070, "user_id": 1410664, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/vGygm.gif?s=128&g=1", "display_name": "Caius Jard", "link": "https://stackoverflow.com/users/1410664/caius-jard"}, "edited": false, "score": 2, "creation_date": 1511959422, "post_id": 47553154, "comment_id": 82062856, "body": "Seems like an odd priority queue, if youre going to ignore FIFO on whatever you&#39;re prioritising and pull the highest 33% values from it. Why aren&#39;t you making the number the priority?"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1511959501, "post_id": 47553154, "comment_id": 82062915, "body": "Maybe I don&#39;t understand the question, but you can just pull 10 numbers from the priority queue and they will be sorted in descending order (assuming it&#39;s a max-queue)."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1511959803, "post_id": 47553154, "comment_id": 82063100, "body": "I have edited the question to change &quot;call&quot; to &quot;access&quot;.  Is that correct? (feel free to fix if not).  The problem is that you can&#39;t &quot;call&quot; a number in C++, you can only call functions (and things like functions)."}, {"owner": {"reputation": 33, "user_id": 8441726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wqVlLmoJUho/AAAAAAAAAAI/AAAAAAAADfU/0DzTynNuhz4/photo.jpg?sz=128", "display_name": "Syamil Fuad", "link": "https://stackoverflow.com/users/8441726/syamil-fuad"}, "reply_to_user": {"reputation": 46070, "user_id": 1410664, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/vGygm.gif?s=128&g=1", "display_name": "Caius Jard", "link": "https://stackoverflow.com/users/1410664/caius-jard"}, "edited": false, "score": 0, "creation_date": 1511959818, "post_id": 47553154, "comment_id": 82063112, "body": "@CaiusJard how do i do that? any codes to help"}, {"owner": {"reputation": 33, "user_id": 8441726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wqVlLmoJUho/AAAAAAAAAAI/AAAAAAAADfU/0DzTynNuhz4/photo.jpg?sz=128", "display_name": "Syamil Fuad", "link": "https://stackoverflow.com/users/8441726/syamil-fuad"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1511959904, "post_id": 47553154, "comment_id": 82063159, "body": "@MartinBonner actually i have to store them inside a list first, and then access them by using a priority queue in order to get top 10 largest numbers. So any idea how to do it?"}, {"owner": {"reputation": 33, "user_id": 8441726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wqVlLmoJUho/AAAAAAAAAAI/AAAAAAAADfU/0DzTynNuhz4/photo.jpg?sz=128", "display_name": "Syamil Fuad", "link": "https://stackoverflow.com/users/8441726/syamil-fuad"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1511959966, "post_id": 47553154, "comment_id": 82063196, "body": "sure @MartinBonner thanks for the edit my bad anyway"}, {"owner": {"reputation": 33, "user_id": 8441726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wqVlLmoJUho/AAAAAAAAAAI/AAAAAAAADfU/0DzTynNuhz4/photo.jpg?sz=128", "display_name": "Syamil Fuad", "link": "https://stackoverflow.com/users/8441726/syamil-fuad"}, "reply_to_user": {"reputation": 46070, "user_id": 1410664, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/vGygm.gif?s=128&g=1", "display_name": "Caius Jard", "link": "https://stackoverflow.com/users/1410664/caius-jard"}, "edited": false, "score": 0, "creation_date": 1511960488, "post_id": 47553154, "comment_id": 82063507, "body": "@CaiusJard please help. i have fixed the question"}, {"owner": {"reputation": 33, "user_id": 8441726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wqVlLmoJUho/AAAAAAAAAAI/AAAAAAAADfU/0DzTynNuhz4/photo.jpg?sz=128", "display_name": "Syamil Fuad", "link": "https://stackoverflow.com/users/8441726/syamil-fuad"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1511960509, "post_id": 47553154, "comment_id": 82063528, "body": "@MartinBonner i have fixed the question"}, {"owner": {"reputation": 33, "user_id": 8441726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wqVlLmoJUho/AAAAAAAAAAI/AAAAAAAADfU/0DzTynNuhz4/photo.jpg?sz=128", "display_name": "Syamil Fuad", "link": "https://stackoverflow.com/users/8441726/syamil-fuad"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1511960520, "post_id": 47553154, "comment_id": 82063538, "body": "@MartinBonner i have fixed the question"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1511966196, "post_id": 47553154, "comment_id": 82067312, "body": "<code>&#47;*remove duplicate numbers *&#47; mylist.unique();</code> It is actually not accurate, they still may have duplicate in list: <code>std::list::unique</code> only remove adjacent duplicates."}, {"owner": {"reputation": 33, "user_id": 8441726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wqVlLmoJUho/AAAAAAAAAAI/AAAAAAAADfU/0DzTynNuhz4/photo.jpg?sz=128", "display_name": "Syamil Fuad", "link": "https://stackoverflow.com/users/8441726/syamil-fuad"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1511966826, "post_id": 47553154, "comment_id": 82067803, "body": "@Jarod42 so how do i actually remove duplicates?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1511966901, "post_id": 47553154, "comment_id": 82067860, "body": "full sort allows to call unique to remove duplicates."}, {"owner": {"reputation": 33, "user_id": 8441726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wqVlLmoJUho/AAAAAAAAAAI/AAAAAAAADfU/0DzTynNuhz4/photo.jpg?sz=128", "display_name": "Syamil Fuad", "link": "https://stackoverflow.com/users/8441726/syamil-fuad"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1511966999, "post_id": 47553154, "comment_id": 82067952, "body": "how to do full sort? @Jarod42"}, {"owner": {"reputation": 33, "user_id": 8441726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wqVlLmoJUho/AAAAAAAAAAI/AAAAAAAADfU/0DzTynNuhz4/photo.jpg?sz=128", "display_name": "Syamil Fuad", "link": "https://stackoverflow.com/users/8441726/syamil-fuad"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1511967059, "post_id": 47553154, "comment_id": 82067996, "body": "a precise coding/syntax would help @Jarod42"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1511967061, "post_id": 47553154, "comment_id": 82067997, "body": "<code>mylist.sort(); mylist.unique();</code>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1511967119, "post_id": 47553154, "comment_id": 82068050, "body": "But then <code>priority_queue</code> is mostly useless."}, {"owner": {"reputation": 33, "user_id": 8441726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wqVlLmoJUho/AAAAAAAAAAI/AAAAAAAADfU/0DzTynNuhz4/photo.jpg?sz=128", "display_name": "Syamil Fuad", "link": "https://stackoverflow.com/users/8441726/syamil-fuad"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1511967131, "post_id": 47553154, "comment_id": 82068059, "body": "wow i just know that. may i know the reason(s) why if use unique wont work? @Jarod42"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1511967262, "post_id": 47553154, "comment_id": 82068159, "body": "unique removes <b>adjacent</b> duplicated, so for <code>{1, 2, 1}</code>, nothing is removed."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 8441726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wqVlLmoJUho/AAAAAAAAAAI/AAAAAAAADfU/0DzTynNuhz4/photo.jpg?sz=128", "display_name": "Syamil Fuad", "link": "https://stackoverflow.com/users/8441726/syamil-fuad"}, "edited": false, "score": 0, "creation_date": 1511965995, "post_id": 47553621, "comment_id": 82067185, "body": "no actually i need to get the 10 numbers from the priority queue, not from another list"}, {"owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "reply_to_user": {"reputation": 33, "user_id": 8441726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wqVlLmoJUho/AAAAAAAAAAI/AAAAAAAADfU/0DzTynNuhz4/photo.jpg?sz=128", "display_name": "Syamil Fuad", "link": "https://stackoverflow.com/users/8441726/syamil-fuad"}, "edited": false, "score": 0, "creation_date": 1511966268, "post_id": 47553621, "comment_id": 82067364, "body": "Once you access the top of the queue, you got the largest int back. To access the next, you have to pop (i.e. remove from queue) the top you just read, and read top again. Then pop, then read, and so on. In the end, you can&#39;t read elements you removed from queue, that&#39;s why I suggested to save them in a list while you read-and-pop them."}, {"owner": {"reputation": 33, "user_id": 8441726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wqVlLmoJUho/AAAAAAAAAAI/AAAAAAAADfU/0DzTynNuhz4/photo.jpg?sz=128", "display_name": "Syamil Fuad", "link": "https://stackoverflow.com/users/8441726/syamil-fuad"}, "edited": false, "score": 0, "creation_date": 1511966593, "post_id": 47553621, "comment_id": 82067615, "body": "but let say my question is this: Using priority queue, take out and print the top 10 largest number in the list. Print the list again after the five numbers have been taken out. how do i print the same list again, but without the 10 numbers that have been separated? it will print all elements right?"}], "tags": [], "owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "is_accepted": true, "score": 0, "last_activity_date": 1511966894, "last_edit_date": 1511966894, "creation_date": 1511960849, "answer_id": 47553621, "question_id": 47553154, "link": "https://stackoverflow.com/questions/47553154/how-to-access-10-largest-numbers-inside-my-priority-queue/47553621#47553621", "title": "How to access 10 largest numbers inside my priority queue", "body": "<p>So you push all random numbers into the queue: ok. Then you access the top numbers, and while you go, remove them from list:</p>\n\n<pre><code>const int desired_numbers = 10;\nfor(int i=0; i&lt;desired_numbers; i++)\n{\n    int t = mypq_decreasing.top();\n    mypq_decreasing.pop();\n\n    mylist.remove(t); //remove from original list\n}\n</code></pre>\n\n<p>After this, both the queue and the list contain all random numbers, but ten (because after every access to top, you popped the top out of the queue and removed the element from list).</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 8441726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wqVlLmoJUho/AAAAAAAAAAI/AAAAAAAADfU/0DzTynNuhz4/photo.jpg?sz=128", "display_name": "Syamil Fuad", "link": "https://stackoverflow.com/users/8441726/syamil-fuad"}, "edited": false, "score": 0, "creation_date": 1511966116, "post_id": 47553829, "comment_id": 82067264, "body": "how do i use your codes/parts of you codes with my original codes? i am sorry im a beginner"}, {"owner": {"reputation": 33, "user_id": 8441726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wqVlLmoJUho/AAAAAAAAAAI/AAAAAAAADfU/0DzTynNuhz4/photo.jpg?sz=128", "display_name": "Syamil Fuad", "link": "https://stackoverflow.com/users/8441726/syamil-fuad"}, "edited": false, "score": 0, "creation_date": 1511966136, "post_id": 47553829, "comment_id": 82067272, "body": "how do i use your codes/parts of you codes with my original codes? i am sorry im a beginner"}], "tags": [], "owner": {"reputation": 186, "user_id": 4597948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2960478033de3bd5b8416242a1f8dab4?s=128&d=identicon&r=PG&f=1", "display_name": "blazgrom", "link": "https://stackoverflow.com/users/4597948/blazgrom"}, "is_accepted": false, "score": 0, "last_activity_date": 1511961584, "creation_date": 1511961584, "answer_id": 47553829, "question_id": 47553154, "link": "https://stackoverflow.com/questions/47553154/how-to-access-10-largest-numbers-inside-my-priority-queue/47553829#47553829", "title": "How to access 10 largest numbers inside my priority queue", "body": "<p>If i understand your question correctly, you want to access the X largest numbers from a list of size 30 through a priority queue, you can do it like this.</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct my_less;\n//Specialization in order to dereference a pointer before doing the comparison\ntemplate&lt;typename T&gt;\nstruct my_less&lt;T*&gt;\n{\n  void operator (T* lhs, T* rhs){\n   return (*lhs)&lt;(*rhs);\n  }\n}\nusing lookupPriorityQueue=std::priority_queue&lt;int*,std::vector&lt;int*&gt;,my_less&lt;int*&gt;&gt;;\nlookupPriorityQueue p;\nfor(auto&amp; element: your_list_of_ints)\n{\n   p.push(&amp;element);\n}\nfor(auto i=0;i!=10;++i,p.pop())\n{\n  std::cout&lt;&lt;*(p.top())&lt;&lt;\"\\n\";\n}\n</code></pre>\n\n<p>Using this approach, you don't have to copy everything to the priority_queue in order to find out the top X elements. \nHowever you should be really careful because we are storing pointers to elements and if the priority_queue outlives the list we will be accessing  invalid memory</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 8441726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wqVlLmoJUho/AAAAAAAAAAI/AAAAAAAADfU/0DzTynNuhz4/photo.jpg?sz=128", "display_name": "Syamil Fuad", "link": "https://stackoverflow.com/users/8441726/syamil-fuad"}, "edited": false, "score": 0, "creation_date": 1511966199, "post_id": 47555237, "comment_id": 82067316, "body": "i am sorry but my task is: Create a list of size 30, and fill it up with random numbers in the range of 0 to 99. Remove all duplicate numbers, and print out the list of integers generated. Using priority queue, take out and print the top 10 largest number in the list. Print the list again after the five numbers have been taken out."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1511966040, "creation_date": 1511966040, "answer_id": 47555237, "question_id": 47553154, "link": "https://stackoverflow.com/questions/47553154/how-to-access-10-largest-numbers-inside-my-priority-queue/47555237#47555237", "title": "How to access 10 largest numbers inside my priority queue", "body": "<p>It seems you don't need <code>priority_queue</code>, just use algorithm:</p>\n\n<pre><code>std::vector&lt;int&gt; numbers /*= */;\n\nstd::partial_sort(numbers.begin(), numbers.begin() + 10, std::greater&lt;&gt;());\n\nfor (std::size_t i = 0; i != 10; ++i)\n{\n    std::cout &lt;&lt; numbers[i] &lt;&lt; \" \";\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8441726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wqVlLmoJUho/AAAAAAAAAAI/AAAAAAAADfU/0DzTynNuhz4/photo.jpg?sz=128", "display_name": "Syamil Fuad", "link": "https://stackoverflow.com/users/8441726/syamil-fuad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 716, "favorite_count": 0, "accepted_answer_id": 47553621, "answer_count": 3, "score": -2, "last_activity_date": 1515162471, "creation_date": 1511959293, "last_edit_date": 1515162471, "question_id": 47553154, "link": "https://stackoverflow.com/questions/47553154/how-to-access-10-largest-numbers-inside-my-priority-queue", "title": "How to access 10 largest numbers inside my priority queue", "body": "<p>Assuming I have 30 random numbers inside my priority queue, how do I access only a specific number of largest values after I sort them. For example I need to print the top 10 largest numbers inside my priority queue</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "edited": false, "score": 1, "creation_date": 1511959200, "post_id": 47553080, "comment_id": 82062708, "body": "This is C++ using the CRT!"}, {"owner": {"reputation": 25655, "user_id": 480937, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/448470e105833cd4179b24314714360e?s=128&d=identicon&r=PG", "display_name": "David Yaw", "link": "https://stackoverflow.com/users/480937/david-yaw"}, "edited": false, "score": 0, "creation_date": 1511977250, "post_id": 47553080, "comment_id": 82074907, "body": "I switched the tag from C++/CLI to just C++. I&#39;m assuming that this is not intended to target Microsoft&#39;s .Net runtime."}, {"owner": {"reputation": 993, "user_id": 1079347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWTfN.png?s=128&g=1", "display_name": "gast128", "link": "https://stackoverflow.com/users/1079347/gast128"}, "edited": false, "score": 0, "creation_date": 1511978593, "post_id": 47553080, "comment_id": 82075755, "body": "C++ supports a large set of C, so printf is supported as well (include &lt;stdio.h&gt;)"}], "answers": [{"tags": [], "owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "is_accepted": false, "score": 0, "last_activity_date": 1511959320, "creation_date": 1511959320, "answer_id": 47553169, "question_id": 47553080, "link": "https://stackoverflow.com/questions/47553080/how-can-i-translate-this-c-language-syntax-into-c/47553169#47553169", "title": "how can I translate this c language syntax into c++", "body": "<p>This is C++ using the CRT.</p>\n\n<p>But you can use cout...</p>\n\n<pre><code>int age = 19;\ncout &lt;&lt; \"my age is \" &lt;&lt; age &lt;&lt; \" years old\":\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 626, "user_id": 3354919, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/46b98b121d2ddc11fdc532c5229ef846?s=128&d=identicon&r=PG&f=1", "display_name": "Manish Dubey", "link": "https://stackoverflow.com/users/3354919/manish-dubey"}, "is_accepted": false, "score": 0, "last_activity_date": 1511959448, "creation_date": 1511959448, "answer_id": 47553212, "question_id": 47553080, "link": "https://stackoverflow.com/questions/47553080/how-can-i-translate-this-c-language-syntax-into-c/47553212#47553212", "title": "how can I translate this c language syntax into c++", "body": "<p>// first include header file</p>\n\n<pre><code>#include &lt;iostream&gt;\n</code></pre>\n\n<p>// then write your code</p>\n\n<pre><code>   cout &lt;&lt; \"my age is : \" &lt;&lt; str;\n   cout &lt;&lt; \"years old\" &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8415528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c86ebbcf39560975fea9805357aef2d1?s=128&d=identicon&r=PG&f=1", "display_name": "richard alonsagay", "link": "https://stackoverflow.com/users/8415528/richard-alonsagay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1511977164, "creation_date": 1511959066, "last_edit_date": 1511977164, "question_id": 47553080, "link": "https://stackoverflow.com/questions/47553080/how-can-i-translate-this-c-language-syntax-into-c", "title": "how can I translate this c language syntax into c++", "body": "<p>How can I translate this c language syntax into c++?</p>\n\n<pre><code>int age=19;\nprintf(\"my age is %d years old\", age); \n</code></pre>\n"}, {"tags": ["c++", "string", "stdstring"], "comments": [{"owner": {"reputation": 499, "user_id": 5325102, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iZeNv.jpg?s=128&g=1", "display_name": "Francisco Gallego Salido", "link": "https://stackoverflow.com/users/5325102/francisco-gallego-salido"}, "edited": false, "score": 2, "creation_date": 1511958829, "post_id": 47552935, "comment_id": 82062455, "body": "Which compiler are you using? Because in GCC 7.2 works. Also, the casting <code>(std::string)*strPtr</code> is not necessary."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1511958878, "post_id": 47552935, "comment_id": 82062492, "body": "<a href=\"https://ideone.com/HXNRqU\" rel=\"nofollow noreferrer\">I can&#39;t replicate your error</a>. The code in the question is not the code that cause the error."}, {"owner": {"reputation": 544, "user_id": 1039936, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/fO39L.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/1039936/jack"}, "edited": false, "score": 0, "creation_date": 1511958921, "post_id": 47552935, "comment_id": 82062520, "body": "I was using Visual studio 2008"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1512039961, "post_id": 47552935, "comment_id": 82100790, "body": "This is a complete duplicate of <a href=\"https://stackoverflow.com/questions/22724064/error-c2679-binary-no-operator-found-which-takes-a-right-hand-operand-of\" title=\"error c2679 binary no operator found which takes a right hand operand of\">stackoverflow.com/questions/22724064/&hellip;</a> but sadly I already used my flag on something else, if anyone wants to take over."}], "answers": [{"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1511959101, "post_id": 47553001, "comment_id": 82062646, "body": "What does <i>&quot;include #include&quot;</i> mean? Anyway, voting to close as caused by a simple typographic error."}, {"owner": {"reputation": 544, "user_id": 1039936, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/fO39L.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/1039936/jack"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1511959220, "post_id": 47553001, "comment_id": 82062727, "body": "Edited the answer...its string header file"}, {"owner": {"reputation": 544, "user_id": 1039936, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/fO39L.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/1039936/jack"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1511960133, "post_id": 47553001, "comment_id": 82063301, "body": "This question might help somebody committing silly mistake like me and wondering whats wrong."}], "tags": [], "owner": {"reputation": 544, "user_id": 1039936, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/fO39L.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/1039936/jack"}, "is_accepted": false, "score": 0, "last_activity_date": 1511959147, "last_edit_date": 1511959147, "creation_date": 1511958822, "answer_id": 47553001, "question_id": 47552935, "link": "https://stackoverflow.com/questions/47552935/error-printing-stdstring-using-stdstring-ptr/47553001#47553001", "title": "Error printing std::string using std::string ptr", "body": "<p>Got it... I didn't include <code>#include&lt;string&gt;</code>. My mistake. After adding the header file it worked.</p>\n"}], "owner": {"reputation": 544, "user_id": 1039936, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/fO39L.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/1039936/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1511959147, "creation_date": 1511958609, "last_edit_date": 1511958803, "question_id": 47552935, "link": "https://stackoverflow.com/questions/47552935/error-printing-stdstring-using-stdstring-ptr", "title": "Error printing std::string using std::string ptr", "body": "<p>I am trying to print a std::string using std::string ptr as below but getting error:</p>\n\n<pre><code>Error   1   error C2679: binary '&lt;&lt;' : no operator found which takes\n a right-hand operand of type 'std::basic_string&lt;_Elem,_Traits,_Ax&gt;'\n (or there is no acceptable conversion) \n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    std::string * strPtr = new std::string(\"Hello World!\\n\");\n    std::cout &lt;&lt; (std::string)*strPtr;\n\n    delete strPtr;\n\n    return 0;\n}\n</code></pre>\n\n<p>What wrong I could be doing here ?</p>\n"}, {"tags": ["c++", "boost-range", "boost-adaptors"], "comments": [{"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1511959237, "post_id": 47552522, "comment_id": 82062736, "body": "how about use <code>std::transform</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1511962759, "post_id": 47552862, "comment_id": 82064979, "body": "I think it would be nice to add a code sample to this answer to show how to use <code>combine</code> and the lambda to achieve OPs goal. <a href=\"https://wandbox.org/permlink/Ol8WpGGSvn8sB6Qc\" rel=\"nofollow noreferrer\">I made one here</a> if you want to just use that."}, {"owner": {"reputation": 253, "user_id": 7223665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6adc030370f20aa0114f5442e775c66?s=128&d=identicon&r=PG&f=1", "display_name": "Zen", "link": "https://stackoverflow.com/users/7223665/zen"}, "edited": false, "score": 0, "creation_date": 1511985955, "post_id": 47552862, "comment_id": 82079536, "body": "Thanks Sebastian. I thought of boost::combine but  was thinking it would require me to change my function input arguments into a tuple. It will be great if someone can show me some examples of using a tuple along with range adaptors so I dont have to change my function signatures."}, {"owner": {"reputation": 253, "user_id": 7223665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6adc030370f20aa0114f5442e775c66?s=128&d=identicon&r=PG&f=1", "display_name": "Zen", "link": "https://stackoverflow.com/users/7223665/zen"}, "edited": false, "score": 0, "creation_date": 1511986263, "post_id": 47552862, "comment_id": 82079691, "body": "Thanks Andy! Only saw your comments after asking for an example! That does exactly what I was hoping for!"}], "tags": [], "owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "is_accepted": false, "score": 1, "last_activity_date": 1511958391, "creation_date": 1511958391, "answer_id": 47552862, "question_id": 47552522, "link": "https://stackoverflow.com/questions/47552522/c-boost-range-adaptor-multiple-vectors/47552862#47552862", "title": "c++ boost range adaptor multiple vectors", "body": "<p>You can use <a href=\"http://www.boost.org/doc/libs/1_56_0/libs/range/doc/html/range/reference/utilities/combine.html\" rel=\"nofollow noreferrer\"><code>combine</code></a> to turn multiple ranges into a range of tuples.</p>\n\n<p>You need to adapt your function so that it can handle a tuple, but a lambda can do that.</p>\n"}], "owner": {"reputation": 253, "user_id": 7223665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6adc030370f20aa0114f5442e775c66?s=128&d=identicon&r=PG&f=1", "display_name": "Zen", "link": "https://stackoverflow.com/users/7223665/zen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511959078, "creation_date": 1511957347, "last_edit_date": 1511959078, "question_id": 47552522, "link": "https://stackoverflow.com/questions/47552522/c-boost-range-adaptor-multiple-vectors", "title": "c++ boost range adaptor multiple vectors", "body": "<p>I have just recently started using the range adaptor in boost when I had to perform a transform/function on a vector. Below is a snippet of one of the simplest example I came across when starting to use the range adaptor.</p>\n\n<pre><code>int multiplyByTwo(int n) { return n*2; }\nstd::vector&lt;int&gt; num = {1, 2, 3, 4, 5};\nauto result = num | boost::adaptors::transformed(multiplyByTwo);\n</code></pre>\n\n<p>What if my function requires two arguments instead of one, are there any ways I can pass in two vectors into the range adaptor? For example, in this situation:</p>\n\n<pre><code>int multiplyBoth(int n1, int n2) {return n1*n2; }\nstd::vector&lt;int&gt; num1 = {1, 2, 3, 4, 5};\nstd::vector&lt;int&gt; num2 = {1, 2, 3, 4, 5};\n</code></pre>\n\n<p>Will I still be able to pipe both vectors <code>num1</code> and <code>num2</code> into my function through a range adaptor? Perhaps something like this:</p>\n\n<pre><code>auto result = num1 | num2 | boost::adaptors::transformed(multiplyBoth);\n</code></pre>\n"}, {"tags": ["c++", "qt", "qfile"], "comments": [{"owner": {"reputation": 1380, "user_id": 1809260, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/5T88E.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/1809260/simon"}, "edited": false, "score": 0, "creation_date": 1511956883, "post_id": 47552342, "comment_id": 82061169, "body": "did you add <code>QT += core</code> to your pro file ?"}, {"owner": {"reputation": 3, "user_id": 8754726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d759463bb0db2463a4c51deb15416d?s=128&d=identicon&r=PG&f=1", "display_name": "Josh3248", "link": "https://stackoverflow.com/users/8754726/josh3248"}, "reply_to_user": {"reputation": 1380, "user_id": 1809260, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/5T88E.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/1809260/simon"}, "edited": false, "score": 0, "creation_date": 1511956989, "post_id": 47552342, "comment_id": 82061226, "body": "No, but I just tried that and I still get the same error"}, {"owner": {"reputation": 499, "user_id": 5325102, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iZeNv.jpg?s=128&g=1", "display_name": "Francisco Gallego Salido", "link": "https://stackoverflow.com/users/5325102/francisco-gallego-salido"}, "edited": false, "score": 3, "creation_date": 1511957319, "post_id": 47552342, "comment_id": 82061413, "body": "Maybe you forgot to include <code>&lt;QTextStream&gt;</code>?"}, {"owner": {"reputation": 3, "user_id": 8754726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d759463bb0db2463a4c51deb15416d?s=128&d=identicon&r=PG&f=1", "display_name": "Josh3248", "link": "https://stackoverflow.com/users/8754726/josh3248"}, "edited": false, "score": 0, "creation_date": 1511957604, "post_id": 47552342, "comment_id": 82061593, "body": "I&#39;ve only tried to create a <code>QFile</code> so far not using <code>QTextStream</code> yet"}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 2, "creation_date": 1511957614, "post_id": 47552342, "comment_id": 82061596, "body": "It looks as if you&#39;ve forward declared <code>QFile</code> from <i>within</i> the <code>SampleClass</code> definition.  So when you try to use <code>QFile</code> the in your code the compiler finds the nested identifier <code>SampleClass::QFile</code> rather than <code>::QFile</code>."}, {"owner": {"reputation": 786, "user_id": 5022365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec8cb396d26f840b7b772382d8e3ff70?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Patel", "link": "https://stackoverflow.com/users/5022365/sagar-patel"}, "edited": false, "score": 0, "creation_date": 1511957861, "post_id": 47552342, "comment_id": 82061772, "body": "Have you tried this : QFile filename(file.c_str()) ?"}], "answers": [{"tags": [], "owner": {"reputation": 705, "user_id": 563940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1f032f602bdd0ffd7ba6f3306156fe57?s=128&d=identicon&r=PG", "display_name": "Pedro", "link": "https://stackoverflow.com/users/563940/pedro"}, "is_accepted": true, "score": -2, "last_activity_date": 1511957786, "creation_date": 1511957786, "answer_id": 47552687, "question_id": 47552342, "link": "https://stackoverflow.com/questions/47552342/qfile-has-incomplete-type/47552687#47552687", "title": "QFile has incomplete type", "body": "<p>Your forward declaration is wrong. It should look like:</p>\n\n<pre><code>class QFile;\n</code></pre>\n\n<p>And it should be placed outside of any class or namespace.</p>\n"}], "owner": {"reputation": 3, "user_id": 8754726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d759463bb0db2463a4c51deb15416d?s=128&d=identicon&r=PG&f=1", "display_name": "Josh3248", "link": "https://stackoverflow.com/users/8754726/josh3248"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 637, "favorite_count": 0, "closed_date": 1511997228, "accepted_answer_id": 47552687, "answer_count": 1, "score": -1, "last_activity_date": 1511957786, "creation_date": 1511956780, "last_edit_date": 1511957357, "question_id": 47552342, "link": "https://stackoverflow.com/questions/47552342/qfile-has-incomplete-type", "closed_reason": "Not suitable for this site", "title": "QFile has incomplete type", "body": "<p>Trying to create a new QFile with </p>\n\n<pre><code>  QFile filename(file);\n</code></pre>\n\n<p>I keep getting the following error</p>\n\n<pre><code>error: variable has incomplete type 'SampleClass::QFile'\nnote: forward declaration of 'SampleClass::QFile class QFile;'\n</code></pre>\n\n<p>I looked it up and I have tried to fix it with <code>#include &lt;QFile&gt;</code> but I haven't managed to do that.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1511957926, "post_id": 47552663, "comment_id": 82061822, "body": "Well, simple <code>static_cast</code> also works. I&#39;m glad to read better answers, they show me I&#39;ve got so much yet to learn :)"}, {"owner": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "edited": false, "score": 0, "creation_date": 1511958140, "post_id": 47552663, "comment_id": 82061992, "body": "As I know <code>static_cast</code> - is dynamic polymorphism, but templates is static, it will not work."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "edited": false, "score": 3, "creation_date": 1511958210, "post_id": 47552663, "comment_id": 82062035, "body": "@KirillRud: This is the idiomatic way, unless I need a very large cup of coffee."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "edited": false, "score": 0, "creation_date": 1511958288, "post_id": 47552663, "comment_id": 82062080, "body": "@KirillRud - The static in the static cast kinda implies it&#39;s not dynamic. And frankly, you can give Bathsheba (who knows a fair few things about C++) the benefit of the doubt, and try."}, {"owner": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1511958898, "post_id": 47552663, "comment_id": 82062502, "body": "@StoryTeller Seriously, did you try to understand the problem before writing a comment? 1. This is a too limited solution, in this case it will work only with void functions. 2. This will not work, how can you pass a reference to <code>foo</code> if the compiler does not know which <code>foo</code> you mean?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "edited": false, "score": 1, "creation_date": 1511959025, "post_id": 47552663, "comment_id": 82062593, "body": "@KirillRud - I understand the problem you presented perfectly. As does everybody here who tried to help you. So far it is only you who flashes his ignorance on the subject with confidence. If you feel you presented your problem poorly, then by all means revise your question."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "edited": false, "score": 1, "creation_date": 1511959037, "post_id": 47552663, "comment_id": 82062599, "body": "@KirillRud and now you&#39;re annoying. No one can <i>guess</i> the limitation of your specific case <b>unless</b> you write an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. And I&#39;d like to emphasis <i>complete</i>!"}, {"owner": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1511960927, "post_id": 47552663, "comment_id": 82063758, "body": "@StoryTeller While he did not write a full example - it was extremely incomprehensible how to use all this. But I&#39;ll be frank, he did the best job, unlike you and unlike you YSC. It is impossible to know everything on this, so only you can be ignorant - without knowing the manners."}, {"owner": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1511961073, "post_id": 47552663, "comment_id": 82063866, "body": "@YSC Yes, no one knows, so they made comments, which could be corrected and clarified. Thank you for your absolutely important comment."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "edited": false, "score": 0, "creation_date": 1511961183, "post_id": 47552663, "comment_id": 82063943, "body": "@KirillRud - You are absolutely right. It&#39;s impossible to know everything about C++. Doesn&#39;t at all change your little presentation of ignorance however. Or your complete lack of civility."}, {"owner": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1511961234, "post_id": 47552663, "comment_id": 82063971, "body": "@StoryTeller Moreover, if already there was such a question - skinte the link, and do not just report it."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "edited": false, "score": 0, "creation_date": 1511961286, "post_id": 47552663, "comment_id": 82064001, "body": "@KirillRud - I suggest you visit the <a href=\"https://stackoverflow.com/help\">help center</a> and learn how the site works before advising anyone."}, {"owner": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1511962889, "post_id": 47552663, "comment_id": 82065077, "body": "@StoryTeller I see no reason to continue the conversation with you, please do not spam. P.S. Quote. &quot;marked as duplicate by StoryTeller c++ 1 hour ago  This question has been asked before and already has an answer. If  those answers do not fully address your question, please edit this question to explain how it is different or ask a new question.&quot; Proof <a href=\"http://paste.pics/2BRIJ\" rel=\"nofollow noreferrer\">paste.pics/2BRIJ</a>"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 3, "last_activity_date": 1511958337, "last_edit_date": 1511958337, "creation_date": 1511957742, "answer_id": 47552663, "question_id": 47552259, "link": "https://stackoverflow.com/questions/47552259/how-to-indicate-certain-overloaded-function/47552663#47552663", "title": "How to indicate certain overloaded function?", "body": "<pre><code>todo(iA, static_cast&lt;void (*)(int)&gt;(&amp;foo));\n</code></pre>\n\n<p>is one way, at the expense of readability at the call site.</p>\n\n<p>Test code (retaining your 2 character indentation - I am a Myrmidon):</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntemplate &lt;typename T, typename F&gt;\nvoid todo(const T&amp; param, const F&amp; function)\n{\n  function(param);\n}\nvoid foo(double a)\n{\n  cout &lt;&lt; \"double \" &lt;&lt; a &lt;&lt; endl;\n}\n\nvoid foo(int a)\n{\n  cout &lt;&lt; \"int \" &lt;&lt; a &lt;&lt; endl;\n}\n\nint main()\n{\n  int iA = 1051;\n\n  todo(iA, static_cast&lt;void (*)(int)&gt;(&amp;foo));\n  todo(iA, static_cast&lt;void (*)(double)&gt;(&amp;foo));\n\n  return 0;\n}\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>int 1051\ndouble 1051\n</code></pre>\n\n<p>See <a href=\"https://www.ideone.com/DEiLBE\" rel=\"nofollow noreferrer\">https://www.ideone.com/DEiLBE</a></p>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "edited": false, "score": 0, "creation_date": 1511958445, "post_id": 47552691, "comment_id": 82062183, "body": "Good idea, but it will not work in case if function return different type except void."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "edited": false, "score": 0, "creation_date": 1511958493, "post_id": 47552691, "comment_id": 82062215, "body": "@KirillRud - You&#39;ve made several comments already, so I feel I just must ask this: Where are you getting all of this from?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "edited": false, "score": 0, "creation_date": 1511958564, "post_id": 47552691, "comment_id": 82062259, "body": "@KirillRud of course, you need to explicitly use the type of the overload you wish to use. If you need to qualify <code>bool foo(int)</code>, you&#39;d need to define your type as <code>bool(*)(int)</code>, etc."}, {"owner": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "edited": false, "score": 0, "creation_date": 1511959236, "post_id": 47552691, "comment_id": 82062733, "body": "@YSC Suppose you have a large list of functions that you need to pass as arguments. Each of them returns different value types, but some are overloaded. In the latter case, the problem arises, because the use of the template requires an explicit transfer of parameters. So if you have overloaded functions, you need to specify them explicitly."}, {"owner": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "edited": false, "score": 0, "creation_date": 1511959303, "post_id": 47552691, "comment_id": 82062783, "body": "@YSC If you make your template for each return value, then creating a universal call function will not make sense."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 3, "last_activity_date": 1511957827, "creation_date": 1511957827, "answer_id": 47552691, "question_id": 47552259, "link": "https://stackoverflow.com/questions/47552259/how-to-indicate-certain-overloaded-function/47552691#47552691", "title": "How to indicate certain overloaded function?", "body": "<pre><code>auto identifier = type{value}\n</code></pre>\n\n<p>This is the syntax suggested by Sutter Mill in its <a href=\"https://herbsutter.com/2013/08/12/gotw-94-solution-aaa-style-almost-always-auto/\" rel=\"nofollow noreferrer\">AAA (Almost Always Auto) Guru of the Week #94</a> when one needs to commit to a specific type.</p>\n\n<p>It perfectly applies here:</p>\n\n<pre><code>int iA = 1051;\n\nusing foo_int_type = void(*)(int);\nauto non_ambiguous_int_foo = foo_int_type{foo};\ntodo(iA, non_ambiguous_int_foo);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/43bf5b42bfad5f30\" rel=\"nofollow noreferrer\">Live demo on coliru</a></p>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "edited": false, "score": 0, "creation_date": 1511958153, "post_id": 47552711, "comment_id": 82062000, "body": "As I know <code>static_cast</code> - is dynamic polymorphism, but templates is static, it will not work."}, {"owner": {"reputation": 656, "user_id": 5277022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7aa91dde8db1b879b0842a0a75ee62b?s=128&d=identicon&r=PG&f=1", "display_name": "navyblue", "link": "https://stackoverflow.com/users/5277022/navyblue"}, "reply_to_user": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "edited": false, "score": 0, "creation_date": 1511966850, "post_id": 47552711, "comment_id": 82067827, "body": "@Kirill Rud <code>static_cast</code> has several functions. The one I showed here is rarely used but it exists and is absolutely correct. Furthermore, as its name suggests it&#39;s purpose is to do &quot;things&quot; statically. The cases when it can be used to work with polymorphic classes are only those when all the information necessary to perform a cast is available at compile time that is there is no virtual inheritance. Also, YSC answered you with a different technique (also correct) wich under the hood involves a <code>static_cast</code>."}], "tags": [], "owner": {"reputation": 656, "user_id": 5277022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7aa91dde8db1b879b0842a0a75ee62b?s=128&d=identicon&r=PG&f=1", "display_name": "navyblue", "link": "https://stackoverflow.com/users/5277022/navyblue"}, "is_accepted": false, "score": 1, "last_activity_date": 1511957890, "creation_date": 1511957890, "answer_id": 47552711, "question_id": 47552259, "link": "https://stackoverflow.com/questions/47552259/how-to-indicate-certain-overloaded-function/47552711#47552711", "title": "How to indicate certain overloaded function?", "body": "<p>You can use <code>static_cast</code> to select the right function overload. For example: <code>todo(iA, static_cast&lt;void(&amp;)(double)&gt;(foo))</code></p>\n"}], "owner": {"reputation": 105, "user_id": 8197915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NNcCvxT5tkI/AAAAAAAAAAI/AAAAAAAAR4Q/wyQMDEMHe4U/photo.jpg?sz=128", "display_name": "Kirill Rud", "link": "https://stackoverflow.com/users/8197915/kirill-rud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "closed_date": 1511958011, "accepted_answer_id": 47552663, "answer_count": 3, "score": 1, "last_activity_date": 1511958337, "creation_date": 1511956482, "last_edit_date": 1511957389, "question_id": 47552259, "link": "https://stackoverflow.com/questions/47552259/how-to-indicate-certain-overloaded-function", "closed_reason": "Duplicate", "title": "How to indicate certain overloaded function?", "body": "<p>For example we have some c++ code where some function execute another function with some parameters.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntemplate &lt;typename T, typename F&gt;\nvoid todo(const T&amp; param, const F&amp; function)\n{\n  function(param);\n}\n\nvoid foo(int a)\n{\n  cout &lt;&lt; a &lt;&lt; endl;\n}\n\nint main()\n{\n  int iA = 1051;\n\n  todo(iA, foo);\n\n  return 0;\n}\n</code></pre>\n\n<p>But if we add one more function with name <code>foo</code></p>\n\n<pre><code>void foo(double a)\n{\n  cout &lt;&lt; a &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Then compiler don't know to which one function generate template.</p>\n\n<p><strong>!!! Important !!!</strong></p>\n\n<p><em>This isn't real code, it's just example. Problem concretely in pass reloaded function as argument.</em></p>\n\n<p><strong>Does anyone know how to indicate certain function explicitly?</strong></p>\n"}, {"tags": ["android", "c++", "android-studio", "boost", "cmake"], "answers": [{"tags": [], "owner": {"reputation": 4859, "user_id": 1000626, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/15e1f36f8333463810b19b7e397ccd76?s=128&d=identicon&r=PG", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/1000626/chris-watts"}, "is_accepted": false, "score": 2, "last_activity_date": 1511956421, "creation_date": 1511956421, "answer_id": 47552233, "question_id": 47552232, "link": "https://stackoverflow.com/questions/47552232/android-studio-cant-find-boost-headers/47552233#47552233", "title": "Android Studio can&#39;t find Boost headers", "body": "<p>This issue is down to CMake's cross-compilation safety features. CMake will not find paths that aren't in <code>CMAKE_FIND_ROOT_PATH</code>, which in the case of Android cross-compilation, will be set to the relevant SDK path.</p>\n\n<p>To use libraries from the host system (being careful that the library files are compatible with the target architecture), you must allow find to use both the system root and the find root path:</p>\n\n<pre><code>set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY BOTH)\nset(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE BOTH)\nset(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE BOTH)\n</code></pre>\n\n<p>In this case, only <code>CMAKE_FIND_ROOT_PATH_MODE_INCLUDE</code> is necessary.</p>\n"}], "owner": {"reputation": 4859, "user_id": 1000626, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/15e1f36f8333463810b19b7e397ccd76?s=128&d=identicon&r=PG", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/1000626/chris-watts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1511956421, "creation_date": 1511956421, "question_id": 47552232, "link": "https://stackoverflow.com/questions/47552232/android-studio-cant-find-boost-headers", "title": "Android Studio can&#39;t find Boost headers", "body": "<p>I have a C++ project to be included in an Android project. The project happily builds standalone, but when built with the Android SDK tools, it fails when trying to find Boost headers:</p>\n\n<pre><code>CMake Error at /usr/local/Android/SDK/cmake/3.6.4111459/share/cmake-3.6/Modules/FindBoost.cmake:1753 (message):\n  Unable to find the requested Boost libraries.\n  Unable to find the Boost header files.  Please set BOOST_ROOT to the root\n  directory containing Boost or BOOST_INCLUDEDIR to the directory containing\n  Boost's headers.\n</code></pre>\n\n<p>The following variables are set both as CMake cache entries and environment variables:</p>\n\n<pre><code>BOOST_ROOT = ~/manual-software/boost/target\nBOOST_INCLUDEDIR = ~/manual-software/boost\n</code></pre>\n\n<p>I've narrowed it down to the following lines in FindBoost.cmake:</p>\n\n<pre><code>  # Look for a standard boost header file.\n  find_path(Boost_INCLUDE_DIR\n    NAMES         boost/config.hpp\n    HINTS         ${_boost_INCLUDE_SEARCH_DIRS}\n    PATH_SUFFIXES ${_boost_PATH_SUFFIXES}\n    )\n</code></pre>\n\n<p>Now the strange part is that I used the exact same CMake binary to build a) from the Android Studio terminal, and b) from the Android Studio build tools, and got two different results. The former building correctly, and the latter failing. I added the following message just below the <code>find_path</code> excerpt above:</p>\n\n<pre><code>  message(FATAL_ERROR \"\n    Boost_INCLUDE_DIR = ${Boost_INCLUDE_DIR}\n    _boost_INCLUDE_SEARCH_DIRS = ${_boost_INCLUDE_SEARCH_DIRS}\n    _boost_PATH_SUFFIXES = ${_boost_PATH_SUFFIXES}\")\n</code></pre>\n\n<p>And now the output from a):</p>\n\n<pre><code>  Boost_INCLUDE_DIR = /home/chris/manual-software/boost\n  _boost_INCLUDE_SEARCH_DIRS = ~/manual-software/boost;~/manual-software/boost/target/include;~/manual-software/boost/target;PATHS;C:/boost/include;C:/boost;/sw/local/include\n  _boost_PATH_SUFFIXES = boost-1_61_0;boost_1_61_0;boost/boost-1_61_0;boost/boost_1_61_0;boost-1_61;boost_1_61;boost/boost-1_61;boost/boost_1_61;boost-1_60_0;boost_1_60_0;boost/boost-1_60_0;boost/boost_1_60_0;boost-1_60;boost_1_60;boost/boost-1_60;boost/boost_1_60;boost-1_59_0;boost_1_59_0;boost/boost-1_59_0;boost/boost_1_59_0;boost-1_59;boost_1_59;boost/boost-1_59;boost/boost_1_59;boost-1_58_0;boost_1_58_0;boost/boost-1_58_0;boost/boost_1_58_0;boost-1_58;boost_1_58;boost/boost-1_58;boost/boost_1_58;boost-1_57_0;boost_1_57_0;boost/boost-1_57_0;boost/boost_1_57_0;boost-1_57;boost_1_57;boost/boost-1_57;boost/boost_1_57;boost-1_56_0;boost_1_56_0;boost/boost-1_56_0;boost/boost_1_56_0;boost-1_56;boost_1_56;boost/boost-1_56;boost/boost_1_56;boost-1_55_0;boost_1_55_0;boost/boost-1_55_0;boost/boost_1_55_0;boost-1_55;boost_1_55;boost/boost-1_55;boost/boost_1_55;boost-1_54_0;boost_1_54_0;boost/boost-1_54_0;boost/boost_1_54_0;boost-1_54;boost_1_54;boost/boost-1_54;boost/boost_1_54;boost-1_53_0;boost_1_53_0;boost/boost-1_53_0;boost/boost_1_53_0;boost-1_53;boost_1_53;boost/boost-1_53;boost/boost_1_53;boost-1_52_0;boost_1_52_0;boost/boost-1_52_0;boost/boost_1_52_0;boost-1_52;boost_1_52;boost/boost-1_52;boost/boost_1_52;boost-1_51_0;boost_1_51_0;boost/boost-1_51_0;boost/boost_1_51_0;boost-1_51;boost_1_51;boost/boost-1_51;boost/boost_1_51;boost-1_50_0;boost_1_50_0;boost/boost-1_50_0;boost/boost_1_50_0;boost-1_50;boost_1_50;boost/boost-1_50;boost/boost_1_50;boost-1_49_0;boost_1_49_0;boost/boost-1_49_0;boost/boost_1_49_0;boost-1_49;boost_1_49;boost/boost-1_49;boost/boost_1_49;boost-1_48_0;boost_1_48_0;boost/boost-1_48_0;boost/boost_1_48_0;boost-1_48;boost_1_48;boost/boost-1_48;boost/boost_1_48\n</code></pre>\n\n<p>and b):</p>\n\n<pre><code>  Boost_INCLUDE_DIR = Boost_INCLUDE_DIR-NOTFOUND\n  _boost_INCLUDE_SEARCH_DIRS = ~/manual-software/boost;~/manual-software/boost/target/include;~/manual-software/boost/target;PATHS;C:/boost/include;C:/boost;/sw/local/include\n  _boost_PATH_SUFFIXES = boost-1_61_0;boost_1_61_0;boost/boost-1_61_0;boost/boost_1_61_0;boost-1_61;boost_1_61;boost/boost-1_61;boost/boost_1_61;boost-1_60_0;boost_1_60_0;boost/boost-1_60_0;boost/boost_1_60_0;boost-1_60;boost_1_60;boost/boost-1_60;boost/boost_1_60;boost-1_59_0;boost_1_59_0;boost/boost-1_59_0;boost/boost_1_59_0;boost-1_59;boost_1_59;boost/boost-1_59;boost/boost_1_59;boost-1_58_0;boost_1_58_0;boost/boost-1_58_0;boost/boost_1_58_0;boost-1_58;boost_1_58;boost/boost-1_58;boost/boost_1_58;boost-1_57_0;boost_1_57_0;boost/boost-1_57_0;boost/boost_1_57_0;boost-1_57;boost_1_57;boost/boost-1_57;boost/boost_1_57;boost-1_56_0;boost_1_56_0;boost/boost-1_56_0;boost/boost_1_56_0;boost-1_56;boost_1_56;boost/boost-1_56;boost/boost_1_56;boost-1_55_0;boost_1_55_0;boost/boost-1_55_0;boost/boost_1_55_0;boost-1_55;boost_1_55;boost/boost-1_55;boost/boost_1_55;boost-1_54_0;boost_1_54_0;boost/boost-1_54_0;boost/boost_1_54_0;boost-1_54;boost_1_54;boost/boost-1_54;boost/boost_1_54;boost-1_53_0;boost_1_53_0;boost/boost-1_53_0;boost/boost_1_53_0;boost-1_53;boost_1_53;boost/boost-1_53;boost/boost_1_53;boost-1_52_0;boost_1_52_0;boost/boost-1_52_0;boost/boost_1_52_0;boost-1_52;boost_1_52;boost/boost-1_52;boost/boost_1_52;boost-1_51_0;boost_1_51_0;boost/boost-1_51_0;boost/boost_1_51_0;boost-1_51;boost_1_51;boost/boost-1_51;boost/boost_1_51;boost-1_50_0;boost_1_50_0;boost/boost-1_50_0;boost/boost_1_50_0;boost-1_50;boost_1_50;boost/boost-1_50;boost/boost_1_50;boost-1_49_0;boost_1_49_0;boost/boost-1_49_0;boost/boost_1_49_0;boost-1_49;boost_1_49;boost/boost-1_49;boost/boost_1_49;boost-1_48_0;boost_1_48_0;boost/boost-1_48_0;boost/boost_1_48_0;boost-1_48;boost_1_48;boost/boost-1_48;b\noost/boost_1_48\n</code></pre>\n\n<p>Why is <code>find_path</code> acting differently?</p>\n"}, {"tags": ["c++", "gcc", "vim", "syntastic"], "comments": [{"owner": {"reputation": 499, "user_id": 5325102, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iZeNv.jpg?s=128&g=1", "display_name": "Francisco Gallego Salido", "link": "https://stackoverflow.com/users/5325102/francisco-gallego-salido"}, "edited": false, "score": 0, "creation_date": 1511955757, "post_id": 47551956, "comment_id": 82060479, "body": "With GCC you can use the option <code>-Imbed-os&#47;</code>. The <code>-I</code> option just tells the compiler where to look for included files"}, {"owner": {"reputation": 6293, "user_id": 907981, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/kOThB.jpg?s=128&g=1", "display_name": "GTF", "link": "https://stackoverflow.com/users/907981/gtf"}, "reply_to_user": {"reputation": 499, "user_id": 5325102, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iZeNv.jpg?s=128&g=1", "display_name": "Francisco Gallego Salido", "link": "https://stackoverflow.com/users/5325102/francisco-gallego-salido"}, "edited": false, "score": 0, "creation_date": 1511956538, "post_id": 47551956, "comment_id": 82060937, "body": "Thanks @FranciscoGallegoSalido - unfortunately this isn&#39;t recursive, so it&#39;s a bit painful (see update above)."}, {"owner": {"reputation": 302, "user_id": 3959671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIFSJ.png?s=128&g=1", "display_name": "tuna_fish", "link": "https://stackoverflow.com/users/3959671/tuna-fish"}, "edited": false, "score": 0, "creation_date": 1511956897, "post_id": 47551956, "comment_id": 82061175, "body": "I don&#39;t think there is a way beyond defining all the compiler flags/includes on a per project basis. You could write something to parse the includes from the Makefile and put it in a <code>syntatic_cpp_config</code> file. I moved away from doing this and instead compile and load errors into the quickfix list.  Btw, <a href=\"https://github.com/w0rp/ale#5xiv-how-can-i-configure-my-c-or-c-project\" rel=\"nofollow noreferrer\">Ale</a> is a much improved syntax checker as it runs asyncronously."}, {"owner": {"reputation": 499, "user_id": 5325102, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iZeNv.jpg?s=128&g=1", "display_name": "Francisco Gallego Salido", "link": "https://stackoverflow.com/users/5325102/francisco-gallego-salido"}, "edited": false, "score": 0, "creation_date": 1511956900, "post_id": 47551956, "comment_id": 82061176, "body": "@GTF I think all you can do is what you&#39;re now doing (searching every path that gives you errors) or use the full path when including you header files, so instead of <code>#include &quot;my_header.h&quot;</code>, do <code>#include &quot;path&#47;to&#47;header&#47;my_header.h&quot;</code>, so you explicitely give the path to the file. I can&#39;t think of other solution."}, {"owner": {"reputation": 6293, "user_id": 907981, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/kOThB.jpg?s=128&g=1", "display_name": "GTF", "link": "https://stackoverflow.com/users/907981/gtf"}, "reply_to_user": {"reputation": 302, "user_id": 3959671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIFSJ.png?s=128&g=1", "display_name": "tuna_fish", "link": "https://stackoverflow.com/users/3959671/tuna-fish"}, "edited": false, "score": 0, "creation_date": 1511958746, "post_id": 47551956, "comment_id": 82062394, "body": "@tuna_fish thanks for the recommendation for ALE, I&#39;ll check it out."}, {"owner": {"reputation": 6293, "user_id": 907981, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/kOThB.jpg?s=128&g=1", "display_name": "GTF", "link": "https://stackoverflow.com/users/907981/gtf"}, "reply_to_user": {"reputation": 499, "user_id": 5325102, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/iZeNv.jpg?s=128&g=1", "display_name": "Francisco Gallego Salido", "link": "https://stackoverflow.com/users/5325102/francisco-gallego-salido"}, "edited": false, "score": 0, "creation_date": 1511958752, "post_id": 47551956, "comment_id": 82062398, "body": "@FranciscoGallegoSalido: that&#39;s a shame, but I suppose I&#39;ll learn to live with it. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 2623034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1034519ea68c6e9379f695c18ad299f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ithinuel", "link": "https://stackoverflow.com/users/2623034/ithinuel"}, "is_accepted": false, "score": 0, "last_activity_date": 1513695347, "creation_date": 1513695347, "answer_id": 47889630, "question_id": 47551956, "link": "https://stackoverflow.com/questions/47551956/vim-syntastic-not-finding-header-files-when-developing-with-mbed/47889630#47889630", "title": "vim Syntastic not finding header files when developing with mbed", "body": "<p>You can get an exhaustive list of flags by generating the Makefile of your project with :<br>\n<code>mbed export -i make_gcc_arm -m K64F --profile mbed-os/tools/profiles/debug.json</code> </p>\n\n<p>cf: <a href=\"https://os.mbed.com/docs/v5.6/tools/debugging.html\" rel=\"nofollow noreferrer\">https://os.mbed.com/docs/v5.6/tools/debugging.html</a></p>\n"}], "owner": {"reputation": 6293, "user_id": 907981, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/kOThB.jpg?s=128&g=1", "display_name": "GTF", "link": "https://stackoverflow.com/users/907981/gtf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 812, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513695347, "creation_date": 1511955621, "last_edit_date": 1511956482, "question_id": 47551956, "link": "https://stackoverflow.com/questions/47551956/vim-syntastic-not-finding-header-files-when-developing-with-mbed", "title": "vim Syntastic not finding header files when developing with mbed", "body": "<p>I'm developing a prototype using ARM's mbed OS. I'm newish to C++ so having syntastic working would be ideal, but it gets hung up on the import of \"mbed.h\".</p>\n\n<p>The structure of the project is:</p>\n\n<ul>\n<li>/</li>\n<li>myfile.cpp</li>\n<li>mbed-os/\n\n<ul>\n<li>mbed.h</li>\n</ul></li>\n</ul>\n\n<p>Syntastic is saying <code>fatal error: 'mbed.h' file not found</code>.</p>\n\n<p>How can I get Syntastic / GCC (or whatever it's using) to find the header files?</p>\n\n<h2>UPDATE:</h2>\n\n<p>Looks like including a <code>.syntastic_cpp_config</code> file with the following in is helping (but involved an absurdly painful process of add a line, run Syntastic, find the next missing header file):</p>\n\n<pre><code>-Imbed-os\n-Imbed-os/cmsis\n-Imbed-os/cmsis/TARGET_CORTEX_M\n-Imbed-os/cmsis/TARGET_CORTEX_M/TOOLCHAIN_GCC\n-Imbed-os/drivers\n-Imbed-os/events\n-Imbed-os/features\n-Imbed-os/hal\n-Imbed-os/platform\n-Imbed-os/rtos\n-Imbed-os/targets\n-Imbed-os/targets/TARGET_NORDIC/TARGET_NRF5\n-Imbed-os/targets/TARGET_NORDIC/TARGET_NRF5/TARGET_MCU_NRF52832\n-Imbed-os/targets/TARGET_NORDIC/TARGET_NRF5/TARGET_MCU_NRF52832/TARGET_NRF52_DK\n-Imbed-os/targets/TARGET_NORDIC/TARGET_NRF5/TARGET_MCU_NRF52832/device\n-Imbed-os/targets/TARGET_NORDIC/TARGET_NRF5/TARGET_SDK11/device\n-Imbed-os/tools\n</code></pre>\n\n<p>This isn't a complete list at all, but I'd almost rather just hit compiler errors at this state and work with those rather than continue hunting for header files.</p>\n"}, {"tags": ["c++", "linux", "exception", "infinite-loop", "bad-alloc"], "comments": [{"owner": {"reputation": 668, "user_id": 803978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7PIsz.png?s=128&g=1", "display_name": "Code Gorilla", "link": "https://stackoverflow.com/users/803978/code-gorilla"}, "edited": false, "score": 0, "creation_date": 1511954634, "post_id": 47551534, "comment_id": 82059841, "body": "I really hope your code looks nothing like that.  Write some working code and then catch any exception thrown and test your code on the smallest stick you have access to."}, {"owner": {"reputation": 1936, "user_id": 4265714, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-GWz2zlyQ_u0/AAAAAAAAAAI/AAAAAAAADH4/GRNAzkeBFx8/photo.jpg?sz=128", "display_name": "miradham", "link": "https://stackoverflow.com/users/4265714/miradham"}, "edited": false, "score": 0, "creation_date": 1511954686, "post_id": 47551534, "comment_id": 82059874, "body": "possible duplication of <a href=\"https://stackoverflow.com/questions/40056884/disk-gets-full-during-file-write-how-can-i-get-notified-about-this\" title=\"disk gets full during file write how can i get notified about this\">stackoverflow.com/questions/40056884/&hellip;</a>"}, {"owner": {"reputation": 11984, "user_id": 113662, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c42518958b62e51887d9fa3a2bcbdb99?s=128&d=identicon&r=PG", "display_name": "Tadeusz Kopec", "link": "https://stackoverflow.com/users/113662/tadeusz-kopec"}, "edited": false, "score": 0, "creation_date": 1511958200, "post_id": 47551534, "comment_id": 82062026, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/40056884/disk-gets-full-during-file-write-how-can-i-get-notified-about-this\">Disk gets full during file write. How can I get notified about this?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 48881, "user_id": 3978, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d3dac9b66ba5f24a38c09e01830adab?s=128&d=identicon&r=PG", "display_name": "Douglas Leeder", "link": "https://stackoverflow.com/users/3978/douglas-leeder"}, "is_accepted": false, "score": 2, "last_activity_date": 1511954711, "creation_date": 1511954711, "answer_id": 47551686, "question_id": 47551534, "link": "https://stackoverflow.com/questions/47551534/catching-an-error-for-insufficient-memory-bad-alloc-in-an-infinite-loop-in-c/47551686#47551686", "title": "catching an error for insufficient memory bad_alloc() in an infinite loop in C++ on linux", "body": "<p>In this case the USB stick is being treated as a disk, so will fail with out of space errors, rather than as memory.</p>\n\n<p>fstream will throw std::ifstream::failure when it can't write anything more to the disk. (Controlled by the exception mask).</p>\n"}], "owner": {"reputation": 21, "user_id": 8724526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WFzts0VLCjc/AAAAAAAAAAI/AAAAAAAABZQ/QbZzpTCkXAc/photo.jpg?sz=128", "display_name": "Jody Arigi", "link": "https://stackoverflow.com/users/8724526/jody-arigi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511958096, "creation_date": 1511954242, "last_edit_date": 1511958096, "question_id": 47551534, "link": "https://stackoverflow.com/questions/47551534/catching-an-error-for-insufficient-memory-bad-alloc-in-an-infinite-loop-in-c", "title": "catching an error for insufficient memory bad_alloc() in an infinite loop in C++ on linux", "body": "<p>so i have an infinite loop with an fstream inside that looks more or less like this :</p>\n\n<pre><code>int main(){\n    while(1){\n    StringData() \n    //above is a function with fstream that writes data into a new file    \n    return 0;\n}\n</code></pre>\n\n<p>The CSV file is written on a USB stick. I want to foresee that the programm will exceed the memory capacity of the USB stick and catch an error that will occur. </p>\n\n<p>I read somewhere that it would throw <strong>bad_alloc()</strong> as it happens, and my idea is to add <strong>try()</strong> and <strong>catch()</strong> for the loop and exit the program totally as the error comes. </p>\n\n<p>Im not even sure if it's the exact error that would appear. Can someone help me with the catching exception?</p>\n\n<p>Thank you and have a good one! </p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "annotations", "static-analysis"], "comments": [{"owner": {"reputation": 4400, "user_id": 1531708, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ngDh7.png?s=128&g=1", "display_name": "PhilLab", "link": "https://stackoverflow.com/users/1531708/phillab"}, "edited": false, "score": 0, "creation_date": 1511963845, "post_id": 47551501, "comment_id": 82065725, "body": "<a href=\"https://lastsector.wordpress.com/2013/09/08/when-c-meets-sal-annotations/\" rel=\"nofollow noreferrer\">lastsector.wordpress.com/2013/09/08/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4400, "user_id": 1531708, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ngDh7.png?s=128&g=1", "display_name": "PhilLab", "link": "https://stackoverflow.com/users/1531708/phillab"}, "edited": false, "score": 0, "creation_date": 1511962489, "post_id": 47551622, "comment_id": 82064767, "body": "Thanks. What a pity as we switched to smart pointers some time ago to improve our code base and now it hinders us from static analysis. I am hesitating to write a wrapper around a wrapper for pointers, especially since the std smart pointer classes are much better tested than something we would write ourselves."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 4400, "user_id": 1531708, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ngDh7.png?s=128&g=1", "display_name": "PhilLab", "link": "https://stackoverflow.com/users/1531708/phillab"}, "edited": false, "score": 0, "creation_date": 1511964838, "post_id": 47551622, "comment_id": 82066420, "body": "@PhilLab This looks like a job for public implementation inheritance and <code>using parent::parent;</code> -- then you can hide <code>operator-&gt;</code> with your annotated one that simply forwards."}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 0, "last_activity_date": 1511954541, "creation_date": 1511954541, "answer_id": 47551622, "question_id": 47551501, "link": "https://stackoverflow.com/questions/47551501/sal-annotations-ret-maybenull-for-stdshared-ptr/47551622#47551622", "title": "SAL Annotations: _Ret_maybenull_ for std::shared_ptr", "body": "<p>Just like this warning says <code>_Ret_maybenull_</code> cannot be applied to smart pointers of any kind, only to primitive types. As an alternative the annotation for this function could be <code>_Check_return_</code> and the annotation for <code>operator -&gt;</code> of smart pointer (and other operators dereferencing stored pointer) <code>_Check_return_ _Ret_notnull_</code>. You may need to write your own wrappers for smart pointers to utilize this though.</p>\n"}], "owner": {"reputation": 4400, "user_id": 1531708, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ngDh7.png?s=128&g=1", "display_name": "PhilLab", "link": "https://stackoverflow.com/users/1531708/phillab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 384, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511954541, "creation_date": 1511954141, "question_id": 47551501, "link": "https://stackoverflow.com/questions/47551501/sal-annotations-ret-maybenull-for-stdshared-ptr", "title": "SAL Annotations: _Ret_maybenull_ for std::shared_ptr", "body": "<p>Is it possible to annotate my smart pointer-returning function with SAL?</p>\n\n<pre><code>_Ret_maybenull_ std::shared_ptr&lt;MyClass&gt; getMyObject();\n</code></pre>\n\n<p>Gives me the warning</p>\n\n<blockquote>\n  <p>warning C6504: Invalid annotation: 'Null' property may only be used on values of pointer, pointer-to-member, array, or reference type: Function 'getMyObject' return. Actual type 'class std::shared_ptr'.</p>\n</blockquote>\n\n<p>and not a single warning when writing this:</p>\n\n<pre><code>auto a = getMyObject();\na-&gt;foo();\n</code></pre>\n"}, {"tags": ["c++", "function", "c++11", "vector", "iterator"], "comments": [{"owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "edited": false, "score": 0, "creation_date": 1511957866, "post_id": 47551171, "comment_id": 82061773, "body": "Can you explain in more detail how your data are structured? I don&#39;t see the relation between <code>std::vector&lt;T&gt;</code> and <code>int r, c</code>. Do you have a vector of row objects where each row has a collection of column values or do you have a flat layout where all columns of a row come one-after-another within the vector?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 9025175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7eb328468fb17dfbf587d8114212757?s=128&d=identicon&r=PG&f=1", "display_name": "Jakob Loegstrup", "link": "https://stackoverflow.com/users/9025175/jakob-loegstrup"}, "edited": false, "score": 0, "creation_date": 1511955936, "post_id": 47551614, "comment_id": 82060584, "body": "I am implementing part of a code where my interfaces are fixed. Therefore, I need to be able to use it in the form it.nextrow(). Is this possible?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 19, "user_id": 9025175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7eb328468fb17dfbf587d8114212757?s=128&d=identicon&r=PG&f=1", "display_name": "Jakob Loegstrup", "link": "https://stackoverflow.com/users/9025175/jakob-loegstrup"}, "edited": false, "score": 0, "creation_date": 1511956513, "post_id": 47551614, "comment_id": 82060917, "body": "Yes, however you can&#39;t add members to <code>std::vector&lt;T&gt;::iterator</code>. You will have to write a wrapper. It will need the same data as the nextRow function."}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 2, "last_activity_date": 1511956942, "last_edit_date": 1511956942, "creation_date": 1511954518, "answer_id": 47551614, "question_id": 47551171, "link": "https://stackoverflow.com/questions/47551171/custom-iterator-function-for-c/47551614#47551614", "title": "Custom iterator function for c++", "body": "<p>Not everything has to be a member function. Would you accept a <code>iterator nextRow(iterator current, iterator begin, iterator end)</code> free function?</p>\n\n<pre><code>template&lt;typename Iterator&gt;\nIterator nextRow(Iterator needle, Iterator begin, Iterator end)\n{\n    return std::find_if(begin, end, [needle](const T &amp; elem) { return (elem.r == needle-&gt;r + 1) &amp;&amp; (elem.c == needle-&gt;c); });\n}\n</code></pre>\n\n<p>If your vector is always sorted, you don't need a separate begin, just use needle.</p>\n\n<p>If you do need this to be a part of a wrapper iterator, that type will need to contain a begin and end. </p>\n\n<pre><code>template &lt;typename Iterator&gt;\nclass SearchableIterator\n{\n    Iterator wrapped, begin, end;\npublic:\n    difference_type     Iterator::difference_type;\n    value_type          Iterator::value_type;\n    pointer             Iterator::pointer;\n    reference           Iterator::reference\n    iterator_category   Iterator::iterator_category\n\n    SearchableIterator(Iterator wrapped, Iterator begin, Iterator end)\n      : wrapped(wrapped), begin(begin), end(end) {}\n\n    // All the members, calling that member of wrapped (see std::reverse_iterator for guidance)\n\n    SearchableIterator nextRow()\n    {\n        return SearchableIterator(std::find_if(begin, end, [this](const T &amp; elem) { return (elem.r == wrapped-&gt;r + 1) &amp;&amp; (elem.c == wrapped-&gt;c); }), begin, end);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "is_accepted": false, "score": 0, "last_activity_date": 1511958637, "creation_date": 1511958637, "answer_id": 47552942, "question_id": 47551171, "link": "https://stackoverflow.com/questions/47551171/custom-iterator-function-for-c/47552942#47552942", "title": "Custom iterator function for c++", "body": "<p>Iterators are copyable. </p>\n\n<p>You can </p>\n\n<ul>\n<li>derive from the container's iterator for your container, </li>\n<li>add construction from the container's iterator, </li>\n<li>add your extra property members, </li>\n<li>and declare that begin(), end(), etc from your custom container return your derived iterator.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "is_accepted": false, "score": 0, "last_activity_date": 1511958764, "creation_date": 1511958764, "answer_id": 47552984, "question_id": 47551171, "link": "https://stackoverflow.com/questions/47551171/custom-iterator-function-for-c/47552984#47552984", "title": "Custom iterator function for c++", "body": "<p>Assuming your data are packed in a vector with consecutive items for all columns of a row followed by items of the next row, you would just need <code>*(iterator + column_count)</code> to access the next-row-same-column value (don't try this on an iterator that's already pointing into the last row of data)</p>\n\n<p>You can create a wrapper iterator similar to <a href=\"https://stackoverflow.com/a/26425066/5265292\">Implement custom iterator for c++ std container</a> and give it a specific column count as additional information:</p>\n\n<pre><code>template&lt;typename T, int colsize, typename TIterator = std::vector&lt;T&gt;::iterator&gt;\nclass MyRowIterator : public std::iterator&lt;std::forward_iterator_tag, T&gt;\n{\nprivate:\n    TIterator m_pter;\npublic:\n\n    MyRowIterator(TIterator&amp; value):  m_pter(value)\n    {\n    }\n    MyRowIterator(const MyRowIterator&amp; other_it): m_pter(other_it.m_pter)\n    {\n    }\n    MyRowIterator&amp; operator++()\n    {\n        ++m_pter;\n        return *this;\n    }\n    bool operator!=(const MyRowIterator&amp; rhs)\n    {\n        return m_pter != rhs.m_pter;\n    }\n    T&amp; operator*()\n    {\n        return (*m_pter);\n    }\n    // here it is\n    T&amp; nextrow()\n    {\n        return *(m_pter+colsize);\n    }\n};\n</code></pre>\n\n<p>Usage example:</p>\n\n<pre><code>void Test()\n{\n    std::vector&lt;int&gt; data;\n\n    // 2 rows each 10 columns\n    data.resize(20);\n    for (auto&amp; item : data)\n    {\n        item = 0;\n    }\n    data[2] = 1;\n    data[12] = 5;\n\n    // don't iterate the last line, else nextrow() will access out of bounds!\n    for (MyRowIterator&lt;int, 10&gt; iter = data.begin(); iter != (data.end()-10); iter++)\n    {\n        std::cout &lt;&lt; *iter &lt;&lt; \" # \" &lt;&lt; iter.nextrow() &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 9025175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7eb328468fb17dfbf587d8114212757?s=128&d=identicon&r=PG&f=1", "display_name": "Jakob Loegstrup", "link": "https://stackoverflow.com/users/9025175/jakob-loegstrup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1603, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1511958764, "creation_date": 1511953137, "last_edit_date": 1511954355, "question_id": 47551171, "link": "https://stackoverflow.com/questions/47551171/custom-iterator-function-for-c", "title": "Custom iterator function for c++", "body": "<p>I have a collection of object of type \"T\" that i want to iterate through. An object of type \"T\" has two important properties:</p>\n\n<pre><code>int r; // row number\nint c; // column number \n</code></pre>\n\n<p>I would like to define an iterator that allows me to iterate through all elements of the collection. </p>\n\n<p>This can be done using:</p>\n\n<pre><code>std::vector&lt;T&gt; v;\n\nfor(std::vector&lt;T&gt;::iterator it = v.begin(); it != v.end(); ++it) {\n    ....\n}\n</code></pre>\n\n<p>However, I would like the iterator to have one more property. I would like to be able to call </p>\n\n<pre><code>it.nextrow()\n</code></pre>\n\n<p>calling this function should return the element \"e\" of v where e.r + 1 = ec.r and e.c = ec.c, where ec is the current element pointed by the iterator. I.e. calling it.nextrow() should give me a pointer to the element where column is the same, but row is incremented by one. Hope it makes sense. </p>\n\n<p>I am not sure what I need to do in order for this to work, as I am fairly new to advanced c++ concepts. Can anybody help me?</p>\n"}]