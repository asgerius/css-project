[{"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 2, "last_activity_date": 1449705685, "creation_date": 1449705685, "answer_id": 34191371, "question_id": 34191331, "link": "https://stackoverflow.com/questions/34191331/compile-c-with-clang-newbie/34191371#34191371", "title": "compile c++ with clang - newbie", "body": "<p>Use <code>clang++ tutorial.cpp</code> - the <code>-x c++</code> is useful if you only want to compile the source file, using <code>-c</code>, but if you are also linking the application into an executable, you want <code>clang</code> to know that you are linking a C++ application, and add the c++ libraries to the link command (if you want to see what <code>clang</code> actually does, add the <code>-v</code> option. </p>\n"}], "owner": {"reputation": 24613, "user_id": 555222, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dcd4c7151c0b298d4fb46001df735f6b?s=128&d=identicon&r=PG", "display_name": "clarkk", "link": "https://stackoverflow.com/users/555222/clarkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 34191371, "answer_count": 1, "score": 3, "last_activity_date": 1449705685, "creation_date": 1449705428, "question_id": 34191331, "link": "https://stackoverflow.com/questions/34191331/compile-c-with-clang-newbie", "title": "compile c++ with clang - newbie", "body": "<p>I found this code in a tutorial</p>\n\n<p><a href=\"http://www.penguinprogrammer.co.uk/c-beginners-tutorial/introduction/\" rel=\"nofollow\">http://www.penguinprogrammer.co.uk/c-beginners-tutorial/introduction/</a></p>\n\n<pre><code>// This line is necessary to be able to output information to the screen\n#include &lt;iostream&gt;\n\n// The program starts here and carries on line by line\nint main(){\n    // Create two integers a and b containing 10 and 5\n    int a = 10;\n    int b = 5;\n\n    /* Add them together and store the result in another\n       integer called sum */\n    int sum = a + b;\n\n    // Output the sum to the screen\n    std::cout &lt;&lt; sum &lt;&lt; std::endl;\n\n    // End the program and send a value of 0 (success) back\n    // to the operating system\n    return 0;\n}\n</code></pre>\n\n<p>I want to compile it</p>\n\n<p>Have installed <code>clang</code> by doing</p>\n\n<pre><code>apt-get install clang\n</code></pre>\n\n<p>Compiling by doing</p>\n\n<pre><code>clang -x c++ tutorial.cpp\n</code></pre>\n\n<h1>error</h1>\n\n<pre><code>/tmp/tutorial-aa5f7a.o: In function `main':\ntutorial.cpp:(.text+0xa): undefined reference to `std::cout'\ntutorial.cpp:(.text+0x34): undefined reference to `std::ostream::operator&lt;&lt;(int)'\ntutorial.cpp:(.text+0x3a): undefined reference to `std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::endl&lt;char, std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;)'\ntutorial.cpp:(.text+0x46): undefined reference to `std::ostream::operator&lt;&lt;(std::ostream&amp; (*)(std::ostream&amp;))'\n/tmp/tutorial-aa5f7a.o: In function `__cxx_global_var_init':\ntutorial.cpp:(.text.startup+0x13): undefined reference to `std::ios_base::Init::Init()'\ntutorial.cpp:(.text.startup+0x19): undefined reference to `std::ios_base::Init::~Init()'\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n"}, {"tags": ["c++", "sse", "simd"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1449734930, "post_id": 34191228, "comment_id": 56138787, "body": "Note that if you happen to be using OS X then the Apple builds of gcc and clang have extensions to printf for printing SIMD vectors, which makes life a lot easier. Unfortunately I don&#39;t think these extensions have made it onto other platforms (yet ?)."}], "answers": [{"comments": [{"owner": {"reputation": 3014, "user_id": 1436187, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8eabfd906279f3fcbdc20098290372ae?s=128&d=identicon&r=PG&f=1", "display_name": "user1436187", "link": "https://stackoverflow.com/users/1436187/user1436187"}, "edited": false, "score": 0, "creation_date": 1449733305, "post_id": 34194694, "comment_id": 56138029, "body": "What is the header for _mm_storeu_si128?"}, {"owner": {"reputation": 3670, "user_id": 2831104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fM2Ds.jpg?s=128&g=1", "display_name": "ErmIg", "link": "https://stackoverflow.com/users/2831104/ermig"}, "reply_to_user": {"reputation": 3014, "user_id": 1436187, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8eabfd906279f3fcbdc20098290372ae?s=128&d=identicon&r=PG&f=1", "display_name": "user1436187", "link": "https://stackoverflow.com/users/1436187/user1436187"}, "edited": false, "score": 0, "creation_date": 1449733631, "post_id": 34194694, "comment_id": 56138203, "body": "#include &lt;emmintrin.h&gt;"}], "tags": [], "owner": {"reputation": 3670, "user_id": 2831104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fM2Ds.jpg?s=128&g=1", "display_name": "ErmIg", "link": "https://stackoverflow.com/users/2831104/ermig"}, "is_accepted": true, "score": 1, "last_activity_date": 1449733670, "last_edit_date": 1449733670, "creation_date": 1449726885, "answer_id": 34194694, "question_id": 34191228, "link": "https://stackoverflow.com/questions/34191228/printing-the-output-of-mm-cmpeq-epi8-m128i-type/34194694#34194694", "title": "Printing the output of _mm_cmpeq_epi8 (__m128i type)", "body": "<p>If you want print the content of __m128i vector to screen you might use something like this:</p>\n\n<pre><code>template&lt;class T&gt; inline void Log(const T * data, size_t size, const std::string &amp; name)\n{\n    std::cout &lt;&lt; name &lt;&lt; \" = { \";\n    for (int i = 0; i &lt; size; i++)\n    {\n        std::cout &lt;&lt; int(data[i]) &lt;&lt; \" \";\n    }\n    std::cout &lt;&lt; \"} \" &lt;&lt; std::endl;\n}\n\ninline void LogU8(const __m128i &amp; value, const std::string &amp; name)\n{\n    uint8_t buffer[16];\n    _mm_storeu_si128((__m128i*)buffer, value);\n    Log(buffer, 16, name);\n}\n</code></pre>\n"}], "owner": {"reputation": 3014, "user_id": 1436187, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8eabfd906279f3fcbdc20098290372ae?s=128&d=identicon&r=PG&f=1", "display_name": "user1436187", "link": "https://stackoverflow.com/users/1436187/user1436187"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "accepted_answer_id": 34194694, "answer_count": 1, "score": 1, "last_activity_date": 1449733670, "creation_date": 1449704915, "last_edit_date": 1495541716, "question_id": 34191228, "link": "https://stackoverflow.com/questions/34191228/printing-the-output-of-mm-cmpeq-epi8-m128i-type", "title": "Printing the output of _mm_cmpeq_epi8 (__m128i type)", "body": "<p><a href=\"https://stackoverflow.com/questions/15313646/fast-counting-the-number-of-equal-bytes-between-two-arrays\">Herein</a> a nice method for comparing two arrays of character is suggested (the accepted answer).</p>\n\n<p>The output of <code>vs</code>and <code>vt</code> can be printed to the screen with <a href=\"https://stackoverflow.com/questions/13257166/print-a-m128i-variable\">this</a> but results of comparisons <code>v</code> are weird (four zeros and random numbers). </p>\n"}, {"tags": ["c++", "algorithm", "graph", "dijkstra"], "comments": [{"owner": {"reputation": 3882, "user_id": 1040597, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c993933eeeb895833f1938b8c1308964?s=128&d=identicon&r=PG&f=1", "display_name": "Saeid", "link": "https://stackoverflow.com/users/1040597/saeid"}, "edited": false, "score": 0, "creation_date": 1449707835, "post_id": 34191136, "comment_id": 56129795, "body": "I have to say this is a very inefficient way of doing Dijkstra."}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 4700209, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/79cf1a8400b4f74f5f2f442a3245ecf6?s=128&d=identicon&r=PG&f=1", "display_name": "DrakeJacks", "link": "https://stackoverflow.com/users/4700209/drakejacks"}, "edited": false, "score": 0, "creation_date": 1449706040, "post_id": 34191366, "comment_id": 56129193, "body": "so when I do the calling of the <code>min()</code>  instead of <code>visitedSet(w) == false</code> add <code>adjacencyMatrix[visited[w]!= UINT_MAX</code>? with a logic and?"}, {"owner": {"reputation": 137, "user_id": 4700209, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/79cf1a8400b4f74f5f2f442a3245ecf6?s=128&d=identicon&r=PG&f=1", "display_name": "DrakeJacks", "link": "https://stackoverflow.com/users/4700209/drakejacks"}, "edited": false, "score": 0, "creation_date": 1449706251, "post_id": 34191366, "comment_id": 56129277, "body": "I did the thing you said and I am getting the same output."}, {"owner": {"reputation": 137, "user_id": 4700209, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/79cf1a8400b4f74f5f2f442a3245ecf6?s=128&d=identicon&r=PG&f=1", "display_name": "DrakeJacks", "link": "https://stackoverflow.com/users/4700209/drakejacks"}, "edited": false, "score": 0, "creation_date": 1449706995, "post_id": 34191366, "comment_id": 56129512, "body": "I tried doing it on both if statements and that didn&#39;t work at all."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 137, "user_id": 4700209, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/79cf1a8400b4f74f5f2f442a3245ecf6?s=128&d=identicon&r=PG&f=1", "display_name": "DrakeJacks", "link": "https://stackoverflow.com/users/4700209/drakejacks"}, "edited": false, "score": 0, "creation_date": 1449707621, "post_id": 34191366, "comment_id": 56129732, "body": "Here the corrected code as <a href=\"http://ideone.com/tgysgR\" rel=\"nofollow noreferrer\">online demo</a>. It works.  I&#39;ve removed your <code>do</code> loop as there was no <code>while</code> counterpart.  If you remove my correction, you&#39;ll get your wrong result."}, {"owner": {"reputation": 137, "user_id": 4700209, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/79cf1a8400b4f74f5f2f442a3245ecf6?s=128&d=identicon&r=PG&f=1", "display_name": "DrakeJacks", "link": "https://stackoverflow.com/users/4700209/drakejacks"}, "edited": false, "score": 0, "creation_date": 1449709679, "post_id": 34191366, "comment_id": 56130371, "body": "I tried a different data set with 5 and it was the incorrect answer. <a href=\"http://ideone.com/5gyj4T\" rel=\"nofollow noreferrer\">link</a> The 60 should be 50 and the 100 should be 50."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 137, "user_id": 4700209, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/79cf1a8400b4f74f5f2f442a3245ecf6?s=128&d=identicon&r=PG&f=1", "display_name": "DrakeJacks", "link": "https://stackoverflow.com/users/4700209/drakejacks"}, "edited": false, "score": 0, "creation_date": 1449729641, "post_id": 34191366, "comment_id": 56136353, "body": "Right:  the main problem has hidden a small initialisation issue.  I&#39;ve edited the post, and <a href=\"http://ideone.com/5t8eYi\" rel=\"nofollow noreferrer\">here</a> the updated demo"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 1, "last_activity_date": 1449729577, "last_edit_date": 1449729577, "creation_date": 1449705662, "answer_id": 34191366, "question_id": 34191136, "link": "https://stackoverflow.com/questions/34191136/dijkstra-algorithm-not-outputting-correctly/34191366#34191366", "title": "Dijkstra Algorithm not outputting correctly", "body": "<p>The problem here is again, the fact that you shall only consider edges which exist, that is <code>adjacencyMatrix[visited][w]!=UINT_MAX</code>. </p>\n\n<p>If you don't exclude these edges, <code>distanceArray[visited] + adjacencyMatrix[visited][w]</code> will overflow and the <code>min()</code> will not return the result that you expect.</p>\n\n<p>You can solve this by changing this line:  </p>\n\n<pre><code>if (visitedSet[w] == false &amp;&amp; adjacencyMatrix[visited][w]!=UINT_MAX ) \n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>There is indeed another problem hidden in your nested for loops.  The first inner for loop looks each time for the shortest subpath to expland.  Unfortuantely, you didn't reset <code>smallest</code>,  so that it starts with the smalest value of the previous iteration.  </p>\n\n<p>Update the looping as follows and you'll get your explected result: </p>\n\n<pre><code>for (int i = 0; i &lt; numberNodes - 1; i++)   \n{\n    smallest = UINT_MAX; // !!!!!!!!!!!!!!!!!!!!!!!\n    for (int v = 0; v &lt; numberNodes; v++) \n    {\n        ...\n    }\n    ...\n} \n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 4700209, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/79cf1a8400b4f74f5f2f442a3245ecf6?s=128&d=identicon&r=PG&f=1", "display_name": "DrakeJacks", "link": "https://stackoverflow.com/users/4700209/drakejacks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 34191366, "answer_count": 1, "score": 0, "last_activity_date": 1449729577, "creation_date": 1449704408, "last_edit_date": 1449706229, "question_id": 34191136, "link": "https://stackoverflow.com/questions/34191136/dijkstra-algorithm-not-outputting-correctly", "title": "Dijkstra Algorithm not outputting correctly", "body": "<p>I am having trouble with implementing Dijkstra algorithm. </p>\n\n<p>I have the following variables initialized :</p>\n\n<pre><code>enum GraphLimit300 {MAX_NODES = 50};\ntypedef unsigned int Element300;\nElement300 adjacencyMatrix[MAX_NODES][MAX_NODES];\nElement300 distanceArray[MAX_NODES];\nbool visitedSet[MAX_NODES];\nint numberNodes;\n</code></pre>\n\n<p>Here is my current implementation of the algorithm:\nint startNode;\n    int visited;</p>\n\n<pre><code>unsigned int smallest = UINT_MAX;\ndo\n{\n    startNode = getStartNode300();\n    setVisitedSet300();\n    smallest = UINT_MAX;\n    visitedSet[startNode] = true;\n    for (int i = 0; i &lt; numberNodes; i++)\n    {\n        distanceArray[i] = adjacencyMatrix[startNode][i];\n    }\n    for (int i = 0; i &lt; numberNodes - 1; i++)   \n    {\n        for (int v = 0; v &lt; numberNodes; v++)\n        {\n            if (visitedSet[v] == false)\n            {\n                if (distanceArray[v] &lt; smallest)\n                {\n                    smallest = distanceArray[v];\n                    visited = v;\n                }\n            }\n        }\n        visitedSet[visited] = true;\n        for (int w = 0; w &lt; numberNodes; w++)\n        {\n            if (visitedSet[w] == false)\n            {\n                distanceArray[w] = min(distanceArray[w], distanceArray[visited] + adjacencyMatrix[visited][w]);\n            }\n        }\n    }\n</code></pre>\n\n<p>On this particular for loop where it should do the certain math to find the min between values at a certain index where the nodes are false and store the min in that index. What I found is that after it chooses the smallest value in <code>distaceArray</code> and set it to true(which is 3 if I start at 1 using the data file below, Which is correct.).</p>\n\n<pre><code>    for (int w = 0; w &lt; numberNodes; w++)\n        {\n            if (visitedSet[w] == false)\n            {\n                distanceArray[w] = min(distanceArray[w], distanceArray[visited] + adjacencyMatrix[visited][w]);\n            }\n        }\n</code></pre>\n\n<p>It uses the nodes '0' and '2' as of this particular iteration is the nodes that are false. And does the math for times and stores them in the wrong array. </p>\n\n<p>I am using this data set that stores the numbers in <code>adjacencyMatrix</code> correctly.</p>\n\n<pre><code>0           5          10          4294967295\n4294967295  0          4294967295  3\n4294967295  7          0           4294967295\n4294967295  4294967295 4           0\n</code></pre>\n\n<p>The correct output is:</p>\n\n<pre><code>Distance[0] =4294967295\nDistance[1] =0 //Which is the node that I choose to start with\nDistance[2] =7\nDistance[3] =3\n</code></pre>\n\n<p>What I am getting is:</p>\n\n<pre><code>Distance[0] =3\nDistance[1] =0\nDistance[2] =3\nDistance[3] =3\n</code></pre>\n\n<p>I have done this process by hand to confirm that the correct output that I should be getting is true and it IS.</p>\n\n<p>Updated if:</p>\n\n<pre><code>if (visitedSet[w] == false &amp;&amp; adjacencyMatrix[visited][w] != UINT_MAX)\n                {\n                    distanceArray[w] = min(distanceArray[w], distanceArray[visited] + adjacencyMatrix[visited][w]);\n                }\n</code></pre>\n"}, {"tags": ["c++", "arrays", "memory", "struct"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5661606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a26b596d46ae8598769623e6881ba032?s=128&d=identicon&r=PG&f=1", "display_name": "Chad Johnson", "link": "https://stackoverflow.com/users/5661606/chad-johnson"}, "edited": false, "score": 0, "creation_date": 1449704813, "post_id": 34191173, "comment_id": 56128748, "body": "Thanks for the feedback"}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 1, "last_activity_date": 1449704654, "creation_date": 1449704654, "answer_id": 34191173, "question_id": 34191113, "link": "https://stackoverflow.com/questions/34191113/c-object-vs-struct-memory-overhead/34191173#34191173", "title": "C++ Object vs Struct Memory Overhead", "body": "<p>There is absolutely no difference between </p>\n\n<pre><code>class X\n{\n  public: \n     T1 x;\n     T2 y;\n     T3 z;\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>struct X\n{\n     T1 x;\n     T2 y;\n     T3 z;\n};\n</code></pre>\n\n<p>If you add virtual functions to the class, yes, it will add to the storage. But nothing else will make any difference between <code>class</code> and <code>struct</code> (in fact, it's possible to have virtual members in <code>struct</code> too - although it is typical to distinguish between <code>struct</code> and <code>class</code> by having member functions and (non-trivial) constructors only for classes).</p>\n"}], "owner": {"reputation": 1, "user_id": 5661606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a26b596d46ae8598769623e6881ba032?s=128&d=identicon&r=PG&f=1", "display_name": "Chad Johnson", "link": "https://stackoverflow.com/users/5661606/chad-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449704654, "creation_date": 1449704312, "question_id": 34191113, "link": "https://stackoverflow.com/questions/34191113/c-object-vs-struct-memory-overhead", "title": "C++ Object vs Struct Memory Overhead", "body": "<p>I need to create very large arrays of RGB values for image processing. The actual operations that will be performed on them are simple\u2014just orthogonal projection to see how similar two colors are\u2014but every bit counts with regards to memory. I am thinking about storing images as a double pointer to structs with 3 chars in them, which I thought would be the most memory efficent way, but I know it is usually recommended to use wrapper classes. By question is how trivial is the memory overhead for creating a class vs a struct and using some sort of wrapper vs using a double pointer. </p>\n"}, {"tags": ["c++", "c", "loops", "buffer", "fgets"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1449703136, "post_id": 34190835, "comment_id": 56128129, "body": "C or C ++, because c++ container classes are much easier to use than, say malloc/realloc and pointer arrays/realloc."}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1449704344, "post_id": 34190835, "comment_id": 56128580, "body": "You need to stop your for loop at the end of <code>buffer</code> or best when <code>buffer[i] == &#39;\\0&#39;</code> perhaps add a space between words and finally add the final <code>\\0</code> You can directly use <code>array + numberOfChars</code> in fgets"}], "answers": [{"comments": [{"owner": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "edited": false, "score": 1, "creation_date": 1449706272, "post_id": 34191388, "comment_id": 56129286, "body": "try to point out to where the error is  in the OP code and if you could add more explanation to benefit more folks in here..."}, {"owner": {"reputation": 33, "user_id": 5661545, "user_type": "registered", "profile_image": "https://graph.facebook.com/100008127580820/picture?type=large", "display_name": "Kostas Papageorge", "link": "https://stackoverflow.com/users/5661545/kostas-papageorge"}, "edited": false, "score": 0, "creation_date": 1449745770, "post_id": 34191388, "comment_id": 56145479, "body": "Thanks you @OlivierPellier-Cuit for your solution it works fine! But when I print array I am getting:&#39;first two&#39; one string in each line   instead of: &#39;first two&#39; all strings in one line  Is this a problem ?because I want count the words of the array"}, {"owner": {"reputation": 1204, "user_id": 5661651, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8mVBFGAZyDk/AAAAAAAAAAI/AAAAAAAC4XI/lU_L3VQlSug/photo.jpg?sz=128", "display_name": "Olivier Pellier-Cuit", "link": "https://stackoverflow.com/users/5661651/olivier-pellier-cuit"}, "edited": false, "score": 0, "creation_date": 1449755716, "post_id": 34191388, "comment_id": 56151770, "body": "It&#39;s because fgets add a end of line char. You could remove it but it will not be a problem if you just want to count the words"}, {"owner": {"reputation": 33, "user_id": 5661545, "user_type": "registered", "profile_image": "https://graph.facebook.com/100008127580820/picture?type=large", "display_name": "Kostas Papageorge", "link": "https://stackoverflow.com/users/5661545/kostas-papageorge"}, "edited": false, "score": 0, "creation_date": 1449756300, "post_id": 34191388, "comment_id": 56152210, "body": "Thank you very much for your help!"}], "tags": [], "owner": {"reputation": 1204, "user_id": 5661651, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8mVBFGAZyDk/AAAAAAAAAAI/AAAAAAAC4XI/lU_L3VQlSug/photo.jpg?sz=128", "display_name": "Olivier Pellier-Cuit", "link": "https://stackoverflow.com/users/5661651/olivier-pellier-cuit"}, "is_accepted": true, "score": 3, "last_activity_date": 1449709264, "last_edit_date": 1449709264, "creation_date": 1449705763, "answer_id": 34191388, "question_id": 34190835, "link": "https://stackoverflow.com/questions/34190835/how-to-add-a-string-from-a-buffer-to-another-array-and-print-this/34191388#34191388", "title": "How to add a string from a buffer to another array and print this?", "body": "<p>See comments in the code:</p>\n\n<pre><code>position=0;\nprintf(\"Enter a text: \\n\");\nwhile(fgets(buffer, 100 , stdin) != NULL){\n\n    /* because you want to add space between 'first' and 'two' */ \n    if (position != 0) {\n        array[position] = ' ';\n        position++;\n    }\n\n    /* you need to get the buffer len for THIS iteration */\n    numberOfChars=strlen(buffer);\n\n    for (i=position;i&lt;(position+numberOfChars);i++){\n        /* i is a valid indice for array but not for buffer[0..numberOfChars-1] */\n        /* array[i]=buffer[i]; */\n        array[i] = buffer[i-position];\n    }\n\n    /* adding one will not add a space char */\n    /* position=position+numberOfChars+1; */\n    position = position+numberOfChars;\n}\n\n/* finaly add the null char at the end of the string (string is null terminated) */\narray[position] = '\\0';\n</code></pre>\n\n<p>You may also try this:</p>\n\n<pre><code>printf(\"Enter a text: \\n\");\n\n/* set array as an empty string */\narray[0] = 0;\n\n/* read from stdin */\nwhile(fgets(buffer, 100, stdin) != NULL) {\n\n    /* append a space to array if it isn't empty */\n    if (array[0] != 0) \n        strcat(array, \" \");\n\n    /* append buffer to array */\n    strcat(array, buffer)\n}\n\n/* print resulting array */\nprintf(\"%s\\n\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8069, "user_id": 296923, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cb7b3af2d2d967711454dc8d9c21798f?s=128&d=identicon&r=PG", "display_name": "Ziffusion", "link": "https://stackoverflow.com/users/296923/ziffusion"}, "is_accepted": false, "score": 0, "last_activity_date": 1449714978, "creation_date": 1449714978, "answer_id": 34192773, "question_id": 34190835, "link": "https://stackoverflow.com/questions/34190835/how-to-add-a-string-from-a-buffer-to-another-array-and-print-this/34192773#34192773", "title": "How to add a string from a buffer to another array and print this?", "body": "<p>Note that fgets() stores the newline read from the stdin into the buffer as well. So, you want to get rid of it. <em>And</em> you want to put an extra space between the two words. Also, you are initializing numberOfChars too late. It should happen before it is used in the copy loop.</p>\n\n<p>Try this:</p>\n\n<pre><code>position = 0;\nprintf(\"Enter a text: \\n\");\nwhile(fgets(buffer, 100 , stdin) != NULL) {\n    numberOfChars = strlen(buffer);\n    buffer[numberOfChars - 1] = ' '; //this replaces newline with space\n    // note that i &lt;= in the condition; to copy the '\\0' over\n    for (i = position; i &lt;= (position + numberOfChars); i++) {\n        array[i] = buffer[i];\n    }        \n    position = position + numberOfChars;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5661545, "user_type": "registered", "profile_image": "https://graph.facebook.com/100008127580820/picture?type=large", "display_name": "Kostas Papageorge", "link": "https://stackoverflow.com/users/5661545/kostas-papageorge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 34191388, "answer_count": 2, "score": 0, "last_activity_date": 1449714978, "creation_date": 1449702887, "last_edit_date": 1449706415, "question_id": 34190835, "link": "https://stackoverflow.com/questions/34190835/how-to-add-a-string-from-a-buffer-to-another-array-and-print-this", "title": "How to add a string from a buffer to another array and print this?", "body": "<p>So basically I want to write a word, and when I press enter I want to store this string from buffer to array. As I write the first word it might work but when I want to add a second word it is getting tricky.</p>\n\n<pre><code>e.g.1st input is:first\\0\n    2nd input is:two\\0\n    then:Ctrl+Z(to get out of the loop)\n    Output I want:first two (actually printing the 'array' array.)\n</code></pre>\n\n<p>My Code is Here:</p>\n\n<pre><code>position=0;\nprintf(\"Enter a text: \\n\");\nwhile(fgets(buffer, 100 , stdin) != NULL){\n    for (i=position;i&lt;(position+numberOfChars);i++){\n        array[i]=buffer[i];\n    }\n    numberOfChars=strlen(buffer);\n    position=position+numberOfChars+1;\n}\n</code></pre>\n"}, {"tags": ["c++", "file", "count", "stream"], "comments": [{"owner": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "edited": false, "score": 2, "creation_date": 1449702951, "post_id": 34190833, "comment_id": 56128061, "body": "change it to <code>while(in &gt;&gt; word) { ++count; }</code>"}, {"owner": {"reputation": 285, "user_id": 2076774, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/4b689c5815e516793747dc5540380c83?s=128&d=identicon&r=PG", "display_name": "user2076774", "link": "https://stackoverflow.com/users/2076774/user2076774"}, "reply_to_user": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "edited": false, "score": 1, "creation_date": 1449703094, "post_id": 34190833, "comment_id": 56128114, "body": "Works but do you mind answering what While(in) was doing exactly and why I was getting &quot;chill&quot; twice?"}], "answers": [{"comments": [{"owner": {"reputation": 285, "user_id": 2076774, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/4b689c5815e516793747dc5540380c83?s=128&d=identicon&r=PG", "display_name": "user2076774", "link": "https://stackoverflow.com/users/2076774/user2076774"}, "edited": false, "score": 0, "creation_date": 1449703369, "post_id": 34190884, "comment_id": 56128210, "body": "So what exactly does &gt;&gt; do? I know it grabs a word but does it move some reference along the line, what constitutes a &quot;failure&quot; in my original solution where &gt;&gt; didn&#39;t work the third time and while(in) failed?"}], "tags": [], "owner": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "is_accepted": true, "score": 5, "last_activity_date": 1449704287, "last_edit_date": 1449704287, "creation_date": 1449703127, "answer_id": 34190884, "question_id": 34190833, "link": "https://stackoverflow.com/questions/34190833/number-of-words-in-a-file-c/34190884#34190884", "title": "Number of Words in a file, c++", "body": "<p><code>while (in)</code> checks if no error has occurred. It's the same as writing <code>while (!in.fail())</code></p>\n\n<p>After you call <code>in &gt;&gt; word</code> and get the first \"Chill\", <code>while (in)</code> still is true, until the next call to <code>in &gt;&gt; word</code>. When you hit <code>in &gt;&gt; word</code> again it fails because it's at the end of the file and doesn't write anything to <code>word</code>, but the <code>word</code> variable still has \"Chill\" in it from the last time, so you count it a second time. Then the <code>while (in)</code> finally fails on the next iteration.</p>\n\n<p>Calling <code>while (in &gt;&gt; word) { ++count; }</code> works because <code>in &gt;&gt; word</code> is actually the function <code>in.operator&gt;&gt;(word)</code> which happens to return an <code>istream&amp;</code>, and an <code>istream</code> has an <code>operator bool</code> method which allows you to use it in a condition instead of writing <code>!in.fail()</code>. Sort of roundabout, I know. Point is, it calls <code>in &gt;&gt; word</code>, <em>then</em> checks <code>if (in)</code> and if it passes <em>then</em> calls <code>++count;</code> and iterates again. Versus your original technique which counted the previous <code>word</code> even if <code>in &gt;&gt; word</code> failed.</p>\n\n<p>To make this clearer, it might help to know that changing your original code's <code>if</code> statement to <code>if (in)</code> would have also worked, but would be sort of bad code.</p>\n\n<p>As a final conclusion, the entire function could be written as:</p>\n\n<pre><code>int countWords(std::istream&amp; in) {\n    int count = 0;\n    for (std::string word; in &gt;&gt; word; ++count) {}\n    return count;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 285, "user_id": 2076774, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/4b689c5815e516793747dc5540380c83?s=128&d=identicon&r=PG", "display_name": "user2076774", "link": "https://stackoverflow.com/users/2076774/user2076774"}, "edited": false, "score": 0, "creation_date": 1449705088, "post_id": 34191170, "comment_id": 56128859, "body": "I don&#39;t know much about istream_iterators or distance so this is confusing to me but I will definitely look it up, thanks i appreciate it!"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 285, "user_id": 2076774, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/4b689c5815e516793747dc5540380c83?s=128&d=identicon&r=PG", "display_name": "user2076774", "link": "https://stackoverflow.com/users/2076774/user2076774"}, "edited": false, "score": 0, "creation_date": 1449705132, "post_id": 34191170, "comment_id": 56128879, "body": "@user2076774: Well worth learning about both (and the other iterators and algorithms)."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1449704641, "creation_date": 1449704641, "answer_id": 34191170, "question_id": 34190833, "link": "https://stackoverflow.com/questions/34190833/number-of-words-in-a-file-c/34191170#34191170", "title": "Number of Words in a file, c++", "body": "<p>I see you've already gotten one solution to the problem you posted. You might want to consider another possibility though:</p>\n\n<pre><code>int countWords(std::istream&amp; in){  \n    return std::distance(std::istream_iterator&lt;std::string&gt;(in),\n                         std::istream_iterator&lt;std::string&gt;());\n}\n</code></pre>\n\n<p>This doesn't actually <em>eliminate</em> the loop, but it hides it inside of <code>std::distance</code> where it's pretty difficult to mess things up.</p>\n"}], "owner": {"reputation": 285, "user_id": 2076774, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/4b689c5815e516793747dc5540380c83?s=128&d=identicon&r=PG", "display_name": "user2076774", "link": "https://stackoverflow.com/users/2076774/user2076774"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5601, "favorite_count": 0, "closed_date": 1449705413, "accepted_answer_id": 34190884, "answer_count": 2, "score": 2, "last_activity_date": 1449704641, "creation_date": 1449702884, "question_id": 34190833, "link": "https://stackoverflow.com/questions/34190833/number-of-words-in-a-file-c", "closed_reason": "Duplicate", "title": "Number of Words in a file, c++", "body": "<p>I am trying to count the number of words in a file, I know this question has been asked but I have tried some implementations I have seen but I keep getting an error.</p>\n\n<p>The line in the file I am reading is \"Super Chill\" but when I run the code I get a count 3, where >> gets Super the first time and then Chill twice. I have a couple questions regarding this method:</p>\n\n<p>1) what does While(in) look for? How does it know when to stop?</p>\n\n<p>2) Why is \"Chill\" getting stored twice with >>?</p>\n\n<p>Here is the code</p>\n\n<pre><code>int countWords(std::istream&amp; in){ // line in file is -&gt; Super Chill\n\n    int count = 0;\n    std::string word;\n    while (in) {\n        in &gt;&gt; word;\n        if (word != \"\") {\n            count+= 1;\n        }\n    }\n\n    return count;\n}\n</code></pre>\n"}, {"tags": ["c++", "macos", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 310, "user_id": 3896729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIUpi.png?s=128&g=1", "display_name": "Kantium", "link": "https://stackoverflow.com/users/3896729/kantium"}, "edited": false, "score": 0, "creation_date": 1449704031, "post_id": 34190842, "comment_id": 56128457, "body": "With the <code>info</code> I get <code>makefile: commands commence before first target.</code> error, but if I remove it, it seems to work great, and that solved the quotes issue."}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "reply_to_user": {"reputation": 310, "user_id": 3896729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIUpi.png?s=128&g=1", "display_name": "Kantium", "link": "https://stackoverflow.com/users/3896729/kantium"}, "edited": false, "score": 0, "creation_date": 1449740213, "post_id": 34190842, "comment_id": 56141850, "body": "Hum maybe that is some incompatibility in the MacOs make, as the info command normally works in GNU make. Or maybe if there is a tab instead of spaces in front of $(info that could be the issue as well (tabs are sometimes kind of special in the makefile). You can also try to put the info statement outside the ifeq (before the block) without any spaces/tabs before."}], "tags": [], "owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "is_accepted": true, "score": 4, "last_activity_date": 1449703235, "last_edit_date": 1449703235, "creation_date": 1449702909, "answer_id": 34190842, "question_id": 34190747, "link": "https://stackoverflow.com/questions/34190747/update-cflags-or-ldflags-in-makefile-depending-on-current-os/34190842#34190842", "title": "Update CFLAGS or LDFLAGS in makefile depending on current OS", "body": "<p>I think the ifeq block should not go into the make target, but just to the front of the makefile (before all:).</p>\n\n<p>I.e. like this:</p>\n\n<pre><code>OS:=$(shell uname)\nDST=hello\nSRC=$(wildcard *.cpp)\nOBJ=$(SRC:.cpp=.o)\nCFLAGS=\n\nifeq ($(OS),Darwin)\n    $(info OS is $(OS))\n    CC=g++\n    LDFLAGS=-lm -framework OpenCL\n    CFLAGS+=-O3\nendif\n\nifeq ($(OS),Linux)\n    #Coming soon...\nendif\n\nall: clean $(DST)\n\n...\n</code></pre>\n\n<p>(no \"DetectOS\" target, using info instead of echo)</p>\n"}], "owner": {"reputation": 310, "user_id": 3896729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIUpi.png?s=128&g=1", "display_name": "Kantium", "link": "https://stackoverflow.com/users/3896729/kantium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1574, "favorite_count": 1, "accepted_answer_id": 34190842, "answer_count": 1, "score": 5, "last_activity_date": 1449703235, "creation_date": 1449702455, "question_id": 34190747, "link": "https://stackoverflow.com/questions/34190747/update-cflags-or-ldflags-in-makefile-depending-on-current-os", "title": "Update CFLAGS or LDFLAGS in makefile depending on current OS", "body": "<p>I'm trying to create a makefile that will works on both OSX and Linux.</p>\n\n<p>My problem is I need to change <code>cflags</code> and <code>ldflags</code> depending on OS the makefile is executed but I can't make it work. That's my makefile :</p>\n\n<pre><code>OS:=$(shell uname)\nDST=hello\nSRC=$(wildcard *.cpp)\nOBJ=$(SRC:.cpp=.o)\nCFLAGS=\n\nall: clean DetectOS $(DST)\n\nDetectOS:\nifeq ($(OS),Darwin)\n    @echo OS : $(OS)\n    CC=g++\n    LDFLAGS=\"-lm -framework OpenCL\"\n    CFLAGS+=-O3\nendif\n\nifeq ($(OS),Linux)\n    #Coming soon...\nendif\n\n$(DST): $(OBJ)\n    $(CC) -o $@ $^ $(LDFLAGS)\n\n%.o: %.cpp\n    $(CC) -o $@ -c $&lt; $(CFLAGS)\n\nclean:\n    rm -rf *.o $(DST)\n</code></pre>\n\n<p>But when I run this code, neither <code>cflags</code>, <code>ldflags</code> or <code>CC</code> are updated in the <code>ifeq</code> conditional block. I get the following result :</p>\n\n<pre><code>$ make\nrm -rf *.o hello\nOS : Darwin\nCC=g++\nLDFLAGS=\"-lm -framework OpenCL\"\nCFLAGS+=-O3\ncc -o opencl.o -c opencl.cpp \ncc -o hello opencl.o \nUndefined symbols for architecture x86_64:....\n</code></pre>\n\n<p>As you can see, the OS is detected because we went in the <code>ifeq</code> conditional block, but <code>CC</code> isn't updated and keep a non-initialized value of <code>cc</code>. Finally the linker process fails because OpenCL is not referenced in <code>ldflags</code>.</p>\n\n<p>An other little point, if I don't put quotes in <code>LDFLAGS=\"-lm -framework OpenCL\"</code> I get the error :</p>\n\n<pre><code>LDFLAGS=-lm -framework OpenCL\n/bin/sh: -framework: command not found\nmake: *** [DetectOS] Error 127\n</code></pre>\n\n<p>And based on multiple exemples (here on stackoverflow) I should do it without quotes. </p>\n\n<p>I'm currently on Mac OS X Yosemite.</p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1449702579, "post_id": 34190695, "comment_id": 56127887, "body": "<code>Particle.publish(&quot;endGame&quot;, null, 60, PRIVATE);</code>"}, {"owner": {"reputation": 588, "user_id": 411284, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fccc3b3864c70d3adde9fb89ee5a04a0?s=128&d=identicon&r=PG", "display_name": "timelf123", "link": "https://stackoverflow.com/users/411284/timelf123"}, "reply_to_user": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1449702752, "post_id": 34190695, "comment_id": 56127966, "body": "Great catch, thank you"}], "answers": [{"comments": [{"owner": {"reputation": 588, "user_id": 411284, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fccc3b3864c70d3adde9fb89ee5a04a0?s=128&d=identicon&r=PG", "display_name": "timelf123", "link": "https://stackoverflow.com/users/411284/timelf123"}, "edited": false, "score": 0, "creation_date": 1449702781, "post_id": 34190788, "comment_id": 56127990, "body": "Very helpful, thanks for the explanation. Will mark as solved when the 5 minutes is up"}], "tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 1, "last_activity_date": 1449702622, "creation_date": 1449702622, "answer_id": 34190788, "question_id": 34190695, "link": "https://stackoverflow.com/questions/34190695/error-null-was-not-declared-in-this-scope-when-setting-integer-to-0-photon/34190788#34190788", "title": "error: &#39;null&#39; was not declared in this scope when setting integer to 0 - photon/arduino C++", "body": "<p>In this line</p>\n\n<pre><code>Particle.publish(\"endGame\", null, 60, PRIVATE);\n</code></pre>\n\n<p>you use something called <code>null</code>, and neither you nor the standard declares such a thing.</p>\n\n<p>If this is supposed to pass a Null-Pointer, use</p>\n\n<pre><code>Particle.publish(\"endGame\", nullptr, 60, PRIVATE);\n</code></pre>\n\n<p>or, if you are pre-C++11 and included an appropriate library,</p>\n\n<pre><code>Particle.publish(\"endGame\", NULL, 60, PRIVATE);\n</code></pre>\n\n<p>Note that case is important in C++.</p>\n"}], "owner": {"reputation": 588, "user_id": 411284, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fccc3b3864c70d3adde9fb89ee5a04a0?s=128&d=identicon&r=PG", "display_name": "timelf123", "link": "https://stackoverflow.com/users/411284/timelf123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1773, "favorite_count": 0, "accepted_answer_id": 34190788, "answer_count": 1, "score": 1, "last_activity_date": 1449706989, "creation_date": 1449702215, "last_edit_date": 1449706989, "question_id": 34190695, "link": "https://stackoverflow.com/questions/34190695/error-null-was-not-declared-in-this-scope-when-setting-integer-to-0-photon", "title": "error: &#39;null&#39; was not declared in this scope when setting integer to 0 - photon/arduino C++", "body": "<p>I have some simple code below that errors in compilation with:</p>\n\n<pre><code>scorer.cpp: In function 'void loop()':\nscorer.cpp:56:37: error: 'null' was not declared in this scope\n         feeler2ConsecutivePresses = 0;\n</code></pre>\n\n<p>I have tried setting it to <code>NULL</code> instead of 0, and including the standard libraries. What am I missing (C++ beginner here)</p>\n\n<pre><code>int feeler1 = D0;\nint feeler2 = D2;\nint batteryLowIndicator = D4;\nint pingFrequency = 5000;\nunsigned long lastPing = millis();\nbool batteryLow = false;\nbool sentOnlineMessage = false;\n\nint feeler1PreviousState;\nint feeler2PreviousState;\nint batteryLevelPreviousState;\n\nint feeler1ConsecutivePresses;\nint feeler2ConsecutivePresses;\nint consecutivePressThreshold = 30; // 3 seconds\n\nvoid setup() {\n    pinMode(feeler1, INPUT_PULLDOWN);\n    pinMode(feeler2, INPUT_PULLDOWN);\n    pinMode(batteryLowIndicator, INPUT_PULLUP);\n}\n\nvoid loop() {\n\n    int feeler1Pressed = digitalRead(feeler1);\n    int feeler2Pressed = digitalRead(feeler2);\n    int batteryLevel = digitalRead(batteryLowIndicator);\n\n    if (Particle.connected() &amp;&amp; !sentOnlineMessage) {\n        sentOnlineMessage = true;\n        Particle.publish(\"online\", \"1\", 60, PRIVATE);\n    }\n\n    if (feeler1Pressed == HIGH) {\n        if (feeler1PreviousState == HIGH) {\n            feeler1ConsecutivePresses += 1;\n        } else {\n            Particle.publish(\"scored\", \"1\", 60, PRIVATE);\n        }\n    } else {\n        feeler1ConsecutivePresses = 0;\n    }\n\n    if (feeler2Pressed == HIGH) {\n        if (feeler2PreviousState == HIGH) {\n            feeler2ConsecutivePresses += 1;\n        } else {\n            Particle.publish(\"scored\", \"2\", 60, PRIVATE);\n        }\n    } else {\n        feeler2ConsecutivePresses = 0;\n    }\n\n    if (feeler1ConsecutivePresses == consecutivePressThreshold\n            &amp;&amp; feeler2ConsecutivePresses == consecutivePressThreshold) {\n        Particle.publish(\"endGame\", null, 60, PRIVATE);\n    }\n\n    if (batteryLevel == LOW &amp;&amp; batteryLevel != batteryLevelPreviousState) {\n        Particle.publish(\"batteryLow\", \"1\", 60, PRIVATE);\n    }\n\n    // Ping server every x seconds\n    if (millis() - lastPing &gt; pingFrequency) {\n        Particle.publish(\"ping\", \"1\", 60, PRIVATE);\n        lastPing = millis();\n    }\n\n    feeler1PreviousState = feeler1Pressed;\n    feeler2PreviousState = feeler2Pressed;\n    batteryLevelPreviousState = batteryLevel;\n\n    delay(100);\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "iostream", "ifstream"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1449702204, "post_id": 34190649, "comment_id": 56127733, "body": "<code>1:0</code> is that a typo? Is that <code>:</code> supposed to be a space? If not, what does it mean?"}, {"owner": {"reputation": 2605, "user_id": 3958633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/817685ce6b5f625688fdbcd327e7afa6?s=128&d=identicon&r=PG", "display_name": "sifferman", "link": "https://stackoverflow.com/users/3958633/sifferman"}, "edited": false, "score": 0, "creation_date": 1449702208, "post_id": 34190649, "comment_id": 56127736, "body": "It appears that there is a space between each digit in your input.txt file, meaning that all of the numbers are in fact only one digit each. This would explain why atoi() only picks up the first digit."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1449702235, "post_id": 34190649, "comment_id": 56127750, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/194465/how-to-parse-a-string-to-an-int-in-c\">How to parse a string to an int in C++?</a>"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1449702321, "post_id": 34190649, "comment_id": 56127777, "body": "To be honest, I don&#39;t quite understand the question. Please <a href=\"https://stackoverflow.com/posts/34190649/edit\">edit</a> your post to include the actual and the desired behavior as well as a clear problem statement."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1449704927, "post_id": 34190649, "comment_id": 56128804, "body": "Why do you read the numbers as strings?  Try reading as numbers."}, {"owner": {"reputation": 27, "user_id": 5661369, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/071dff379b683e8677fa9ac74ebb5a62?s=128&d=identicon&r=PG&f=1", "display_name": "rakk92", "link": "https://stackoverflow.com/users/5661369/rakk92"}, "edited": false, "score": 0, "creation_date": 1449710115, "post_id": 34190649, "comment_id": 56130510, "body": "I have edited my post , hope my problem is clear :("}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1449705577, "post_id": 34190715, "comment_id": 56129040, "body": "Mostly right. Need to check that <code>ss &gt;&gt; val;</code> actually read something. Example: contents of <code>val</code> will be undefined with input of &quot;fubar&quot;. Recommend <code>stringstream ss(str);</code> in place of default constructor and then insertion of string."}], "tags": [], "owner": {"reputation": 6564, "user_id": 1317053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d7ccacd579b3749907c21e2a648b0ebe?s=128&d=identicon&r=PG", "display_name": "A\u1d0d\u026a\u0280", "link": "https://stackoverflow.com/users/1317053/a%e1%b4%8d%c9%aa%ca%80"}, "is_accepted": false, "score": 2, "last_activity_date": 1449702283, "creation_date": 1449702283, "answer_id": 34190715, "question_id": 34190649, "link": "https://stackoverflow.com/questions/34190649/convert-an-array-string-to-intger-c-beginner/34190715#34190715", "title": "convert an array string to intger c++ (beginner)", "body": "<p>You can use <code>atoi</code> but in <code>c++</code> you have better options.</p>\n\n<p>in <code>c++</code> you can easily use <code>stringstream</code> to convert these types.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\nusing namespace std;\n\nint convert_str_to_int(const string&amp; str) {\n    int val;\n    stringstream ss;\n    ss &lt;&lt; str;\n    ss &gt;&gt; val;\n    return val;\n}\n\nint main () {\n    string str = \"1024\";\n    int val = convert_str_to_int(str);\n    cout &lt;&lt; \"Val is: \" &lt;&lt; val &lt;&lt; \", val/2 is \" &lt;&lt; val/2 &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5661369, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/071dff379b683e8677fa9ac74ebb5a62?s=128&d=identicon&r=PG&f=1", "display_name": "rakk92", "link": "https://stackoverflow.com/users/5661369/rakk92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1449709962, "creation_date": 1449702016, "last_edit_date": 1592644375, "question_id": 34190649, "link": "https://stackoverflow.com/questions/34190649/convert-an-array-string-to-intger-c-beginner", "title": "convert an array string to intger c++ (beginner)", "body": "<p>I have a text file which that contains only <strong>numbers</strong> inside , and i have successfully pulled the numbers from the file and <strong>stored it inside  an array</strong>:</p>\n<p>my <strong>problem</strong> is that the array is &quot;<strong>string</strong>&quot; and i cant do mathematical operations on the array like <strong>Addition</strong> and <strong>Subtraction</strong>\nI have tried to use <code>atoi(array[i][j].c_str())</code> to convert it to intger\nbut it gives me only the first digit of a number!</p>\n<p>my program looks like this for now , its a mess I know :(</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt; \n#include &lt;string&gt;\n#include &lt;stdlib.h&gt;\nusing namespace std;\n\nint main()\n{\nifstream iFile(&quot;input.txt&quot;);      \nstring line;\nstring array[7][7];\nfor (int i=0;i&lt;7;i++){\n       for (int j=0;j&lt;6;j++){\n       getline(iFile,line);\n        if (!line.empty()){\n            array[i][j]=line;\n       }\n       else  {\n            break;\n       }\n   }\n}\ncout&lt;&lt;&quot;number of processes is:  &quot;&lt;&lt;array[0][0]&lt;&lt;endl;\ncout&lt;&lt;&quot;resource types:  &quot;&lt;&lt;array[1][0]&lt;&lt;endl&lt;&lt;endl;\ncout&lt;&lt;&quot;Allocation Matrix:&quot;&lt;&lt;endl;\ncout&lt;&lt;&quot;   A B C D&quot;&lt;&lt;endl;\ncout&lt;&lt;&quot;0: &quot;&lt;&lt;array[2][0]&lt;&lt;endl;\ncout&lt;&lt;&quot;1: &quot;&lt;&lt;array[2][1]&lt;&lt;endl;\ncout&lt;&lt;&quot;2: &quot;&lt;&lt;array[2][2]&lt;&lt;endl;\ncout&lt;&lt;&quot;3: &quot;&lt;&lt;array[2][3]&lt;&lt;endl;\ncout&lt;&lt;&quot;4: &quot;&lt;&lt;array[2][4]&lt;&lt;endl;\ncout&lt;&lt;&quot;Max Matrix:&quot;&lt;&lt;endl;\ncout&lt;&lt;&quot;   A B C D&quot;&lt;&lt;endl;\ncout&lt;&lt;&quot;0: &quot;&lt;&lt;array[3][0]&lt;&lt;endl;\ncout&lt;&lt;&quot;1: &quot;&lt;&lt;array[3][1]&lt;&lt;endl;\ncout&lt;&lt;&quot;2: &quot;&lt;&lt;array[3][2]&lt;&lt;endl;\ncout&lt;&lt;&quot;3: &quot;&lt;&lt;array[3][3]&lt;&lt;endl;\ncout&lt;&lt;&quot;4: &quot;&lt;&lt;array[3][4]&lt;&lt;endl;\ncout&lt;&lt;&quot;Need Matrix:&quot;&lt;&lt;endl;\ncout&lt;&lt;&quot;   A B C D&quot;&lt;&lt;endl;\n//cout&lt;&lt;&quot;0: &quot;&lt;&lt;array[3][1]+array[2][1]&lt;&lt;endl;\n//int c= atoi(array[3][1].c_str());\n//int c2= atoi(array[3][1].c_str());\n//cout&lt;&lt;c+c2&lt;&lt;endl;\n\n\n\n  return 0;\n}\n</code></pre>\n<p>my input.txt file looks like this:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>5\n\n4\n\n0 0 1 2\n1 0 0 0\n1 3 5 4\n0 6 3 2\n0 0 1 4\n\n0 0 1 2\n1 7 5 0\n2 3 5 6\n0 6 5 2\n0 6 5 6\n\n1 5 2 0\n\n1:0 4 2 0\n</code></pre>\n\n<h1>edit:</h1>\n<blockquote>\n<p>note:if there is an empty line &gt;&gt; stop!</p>\n</blockquote>\n<p>the program is based on banker algorithm which takes the first number from the input.txt as <strong>the numbers of of processes</strong></p>\n<p>then takes the second number as <strong>the numbers of of resource types</strong>\nthen takes the next numbers that there is no empty line between them as <strong>Allocation Matrix</strong></p>\n<p>then takes the next numbers that there is no empty line between them as <strong>max Matrix</strong></p>\n<p>and here is <strong>my problem</strong> when i want do <strong>Subtraction</strong> between <strong>Allocation Matrix and max Matrix</strong> because both are <strong>strings</strong> !</p>\n<p>as for <code>1:0 4 2 0</code> it means do some operations with process number 1</p>\n"}, {"tags": ["c++", "gdb"], "answers": [{"comments": [{"owner": {"reputation": 15365, "user_id": 52074, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dd14249e07e1f1d6a949bffa569377ad?s=128&d=identicon&r=PG", "display_name": "Trevor Boyd Smith", "link": "https://stackoverflow.com/users/52074/trevor-boyd-smith"}, "edited": false, "score": 0, "creation_date": 1551135346, "post_id": 34190653, "comment_id": 96521966, "body": "additionally you can save your breakpoints to your .gdbinit (in your cwd or your home) and then that will work for the next session."}], "tags": [], "owner": {"reputation": 3457, "user_id": 3108853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db3d997e8c35cb14623d4dc4de494801?s=128&d=identicon&r=PG&f=1", "display_name": "lsowen", "link": "https://stackoverflow.com/users/3108853/lsowen"}, "is_accepted": false, "score": 13, "last_activity_date": 1449702041, "creation_date": 1449702041, "answer_id": 34190653, "question_id": 34190596, "link": "https://stackoverflow.com/questions/34190596/setting-a-breakpoint-in-a-specific-line-inside-a-function-with-gdb/34190653#34190653", "title": "setting a breakpoint in a specific line inside a function with &#39;gdb&#39;", "body": "<p>You can create a breakpoint at an offset from the current stopped position with <code>gdb breakpoint +&lt;offset&gt;</code>.</p>\n\n<p>You can also create a breakpoint on a specific line number using either <code>gdb break &lt;linenumber&gt;</code> (for the current source file) or <code>gdb break &lt;filename&gt;:&lt;linenumber&gt;</code> (for a file other than the current file).</p>\n\n<p>More details in the <a href=\"http://www.delorie.com/gnu/docs/gdb/gdb_29.html\" rel=\"noreferrer\">docs</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "is_accepted": true, "score": 3, "last_activity_date": 1449721849, "creation_date": 1449721849, "answer_id": 34193713, "question_id": 34190596, "link": "https://stackoverflow.com/questions/34190596/setting-a-breakpoint-in-a-specific-line-inside-a-function-with-gdb/34193713#34193713", "title": "setting a breakpoint in a specific line inside a function with &#39;gdb&#39;", "body": "<p>There isn't a way to set a breakpoint relative to the start of a function such that it will retain its relative position if the source file is modified.  This would sometimes be useful; but it is just a feature that nobody has added to gdb.</p>\n\n<p>It could maybe be emulated from Python, though it couldn't work exactly the way that ordinary breakpoints work, because Python doesn't have access to the breakpoint resetting mechanism inside gdb.</p>\n\n<p>A one-shot solution can be done either as shown in the other answer or from Python.</p>\n\n<p>When I have needed this sort of functionality -- a breakpoint mid-function that is reasonably robust against source changes -- I have used \"SDT\" static probe points.  These let you name such spots in your source.</p>\n"}, {"tags": [], "owner": {"reputation": 300, "user_id": 5197544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b58e7ee7235c7226e28dc016135f5e19?s=128&d=identicon&r=PG&f=1", "display_name": "\u041a\u043e\u0435 \u041a\u0442\u043e", "link": "https://stackoverflow.com/users/5197544/%d0%9a%d0%be%d0%b5-%d0%9a%d1%82%d0%be"}, "is_accepted": false, "score": 2, "last_activity_date": 1486335697, "creation_date": 1486335697, "answer_id": 42058324, "question_id": 34190596, "link": "https://stackoverflow.com/questions/34190596/setting-a-breakpoint-in-a-specific-line-inside-a-function-with-gdb/42058324#42058324", "title": "setting a breakpoint in a specific line inside a function with &#39;gdb&#39;", "body": "<ol>\n<li><code>info fun  &lt;function name&gt;</code> \nor fully qualified <code>info functions  &lt;function name&gt;</code> \ngets functions and their source files</li>\n<li><code>list &lt;function name&gt;</code></li>\n</ol>\n\n<blockquote>\n  <p>Print lines centered around the beginning of function function. </p>\n</blockquote>\n\n<p>Will list all function's source code, with some code below.</p>\n\n<ol start=\"3\">\n<li>Choose line you want</li>\n<li><code>break &lt;filename:linenum&gt;</code></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5787022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ddb958f7f832b7d19450a47606a98f3?s=128&d=identicon&r=PG&f=1", "display_name": "sd1074", "link": "https://stackoverflow.com/users/5787022/sd1074"}, "is_accepted": false, "score": 1, "last_activity_date": 1509123931, "creation_date": 1509123931, "answer_id": 46980221, "question_id": 34190596, "link": "https://stackoverflow.com/questions/34190596/setting-a-breakpoint-in-a-specific-line-inside-a-function-with-gdb/46980221#46980221", "title": "setting a breakpoint in a specific line inside a function with &#39;gdb&#39;", "body": "<p>Here's how you can automate it with python scripts for GDB:</p>\n\n<pre><code>class RelativeFunctionBreakpoint (gdb.Breakpoint):\n    def __init__(self, functionName, lineOffset):\n        super().__init__(RelativeFunctionBreakpoint.calculate(functionName, lineOffset))\n\n    def calculate(functionName, lineOffset):\n        \"\"\"\n        Calculates an absolute breakpoint location (file:linenumber)\n        based on functionName and lineOffset\n        \"\"\"\n        # get info about the file and line number where the function is defined\n        info = gdb.execute(\"info line \"+functionName, to_string=True)\n        # extract file name and line number \n        m = re.match(r'Line[^\\d]+(\\d+)[^\"]+\"([^\"]+)', info)\n        if not m:\n            raise Exception('Failed to find function %s.' % functionName)\n        line = int(m.group(1))+lineOffset #add the lineOffset\n        fileName = m.group(2)\n        return \"%s:%d\" % (fileName, line)\n</code></pre>\n\n<p><strong>Basic usage:</strong></p>\n\n<pre><code>RelativeFunctionBreakpoint(\"yourFunctionName\", lineOffset=5)\n</code></pre>\n\n<p>You can also write a custom breakpoint. See more here:\n<a href=\"https://stackoverflow.com/a/46737659/5787022\">https://stackoverflow.com/a/46737659/5787022</a></p>\n\n<p>Using python to script GDB</p>\n\n<ul>\n<li>Official documentation:\n<a href=\"https://sourceware.org/gdb/onlinedocs/gdb/Python.html\" rel=\"nofollow noreferrer\">https://sourceware.org/gdb/onlinedocs/gdb/Python.html</a> </li>\n<li>Some exapmles: <a href=\"http://tromey.com/blog/?p=548\" rel=\"nofollow noreferrer\">http://tromey.com/blog/?p=548</a></li>\n</ul>\n"}], "owner": {"reputation": 1446, "user_id": 5411628, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1b3eebf82dacd8e7d2498c286631ce3e?s=128&d=identicon&r=PG&f=1", "display_name": "nadavgam", "link": "https://stackoverflow.com/users/5411628/nadavgam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16353, "favorite_count": 3, "accepted_answer_id": 34193713, "answer_count": 4, "score": 18, "last_activity_date": 1509123931, "creation_date": 1449701783, "last_edit_date": 1449721989, "question_id": 34190596, "link": "https://stackoverflow.com/questions/34190596/setting-a-breakpoint-in-a-specific-line-inside-a-function-with-gdb", "title": "setting a breakpoint in a specific line inside a function with &#39;gdb&#39;", "body": "<p>I am trying to set a breakpoint to the fifth line inside a member function of a class(a class that I created) with 'gdb'.</p>\n\n<p>From <a href=\"http://www.unknownroad.com/rtfm/gdbtut/gdbbreak.html#BCPPFUNC\" rel=\"noreferrer\">here</a> I understood just how to set a breakpoint at the <strong>begining</strong> of the the function,but I want to set it on a <strong>specific</strong> line inside the function, or a specific <strong>offset</strong> from the begining of this function.</p>\n\n<p>In general is there a way in 'gdb' to set a breakpoint to a line by setting an offset from another breakpoint I already have ?</p>\n\n<p>Thanks !</p>\n"}, {"tags": ["c++", "arrays", "string"], "comments": [{"owner": {"reputation": 1398, "user_id": 601409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9ec12784ac7ae1a91bd223ae176a5244?s=128&d=identicon&r=PG&f=1", "display_name": "EkcenierK", "link": "https://stackoverflow.com/users/601409/ekcenierk"}, "edited": false, "score": 0, "creation_date": 1449700631, "post_id": 34190314, "comment_id": 56127055, "body": "what do you mean by &quot;doesn&#39;t work? do you get error output? If so please update your question with the exact output you get."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1449700739, "post_id": 34190314, "comment_id": 56127102, "body": "This isn&#39;t the problem, but <code>strncpy</code> is an accident waiting to happen. Read its specification carefully: it&#39;s not a &quot;safe&quot; <code>strcpy</code>, because it will quietly leave you with an unterminated string if the input is too large."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449702144, "post_id": 34190314, "comment_id": 56127704, "body": "Think a moment, and have a chance for you to answer your own question:  -- <code>strncpy(&amp;asset[8][256], temp.c_str(), 256)</code>  --  You say you wrote a loop.  So how is calling the same, exact, line of code supposed to work inside the loop without something on that line varying in some way?"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5661473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nIYGk.jpg?s=128&g=1", "display_name": "harishchandra manchikanti", "link": "https://stackoverflow.com/users/5661473/harishchandra-manchikanti"}, "edited": false, "score": 0, "creation_date": 1449856185, "post_id": 34190827, "comment_id": 56202973, "body": "Ya ,thanks Paul for the Answer any how I got it resolved using snprintf function I was using snprintf(asset[assetIDCount],256,&quot;%s&quot;,temp.c_str()); where assetIDCount is incremental value less than 8.Thanks for the Help ."}, {"owner": {"reputation": 193, "user_id": 4145697, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee498f0a268c831fba7219571013383?s=128&d=identicon&r=PG&f=1", "display_name": "Ramy Sameh", "link": "https://stackoverflow.com/users/4145697/ramy-sameh"}, "edited": false, "score": 0, "creation_date": 1598289939, "post_id": 34190827, "comment_id": 112404465, "body": "Thank you for this answer."}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 1, "last_activity_date": 1449702853, "creation_date": 1449702853, "answer_id": 34190827, "question_id": 34190314, "link": "https://stackoverflow.com/questions/34190314/copy-string-to-two-dimensional-char-array-using-strncpy/34190827#34190827", "title": "Copy string to two dimensional char array using strncpy", "body": "<p>You say you wrote a loop, but how is that line of code you have supposed to work if you're writing to the same (illegal by the way) address each time?  </p>\n\n<p>The loop should look something like this:</p>\n\n<pre><code>for (int i = 0; i &lt; 8; ++i)\n{\n    //...\n    strcpy(&amp;asset[i][0], temp.c_str(), 256);\n    //...\n}\n</code></pre>\n\n<p>You want to write to <code>&amp;asset[0][0]</code>, <code>&amp;asset[1][0]</code>, <code>&amp;asset[2][0]</code>, etc.  Writing to <code>&amp;asset[8][256]</code> starts to write the string at that location <code>[8][256]</code>, which is out of bounds.</p>\n\n<p>Second, if you want a \"backup\" of the strings, why are you using arrays?  Why not a <code>std::vector&lt;std::string&gt;</code> and just <code>push_back</code> the value you want backed up?</p>\n\n<pre><code>#include &lt;vector&gt;\n//...\nstd::vector&lt;std::string&gt; asset;\nstd::string temp;\n//...\nasset.push_back(temp);  // backs up temp.\n</code></pre>\n\n<p>Not only is this much easier, you are not limited to 8 strings, and there is no chance of a buffer overflow.</p>\n"}], "owner": {"reputation": 39, "user_id": 5661473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nIYGk.jpg?s=128&g=1", "display_name": "harishchandra manchikanti", "link": "https://stackoverflow.com/users/5661473/harishchandra-manchikanti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1196, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449875207, "creation_date": 1449700514, "last_edit_date": 1449875207, "question_id": 34190314, "link": "https://stackoverflow.com/questions/34190314/copy-string-to-two-dimensional-char-array-using-strncpy", "title": "Copy string to two dimensional char array using strncpy", "body": "<p>I have a variable, the string <code>temp</code>;</p>\n\n<p><code>temp</code>'s value is some string, and it is in a loop and value keeps on changing.</p>\n\n<p>I need to have a backup for the strings present in the <code>temp</code> variable using the variable:</p>\n\n<pre><code>char asset[8][256]  \n</code></pre>\n\n<p>I tried using:</p>\n\n<pre><code>strncpy(&amp;asset[8][256], temp.c_str(), 256)\n</code></pre>\n\n<p>But it still doesn't work. What am I doing wrong?</p>\n"}, {"tags": ["c++", "scanf"], "comments": [{"owner": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "edited": false, "score": 1, "creation_date": 1449700591, "post_id": 34190294, "comment_id": 56127034, "body": "Show a complete example. We&#39;re having to guess what type <code>source</code> and <code>dest</code> are meant to be, and what <code>buffer</code> is."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1449700633, "post_id": 34190294, "comment_id": 56127056, "body": "The proper use in C++ is to remove it from your code and use the type-safe alternatives provided by the C++ Standard Library."}, {"owner": {"reputation": 41, "user_id": 4092317, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b424d85b9e0c4047b744768c0b459ef8?s=128&d=identicon&r=PG&f=1", "display_name": "tdwig", "link": "https://stackoverflow.com/users/4092317/tdwig"}, "edited": false, "score": 0, "creation_date": 1449701157, "post_id": 34190294, "comment_id": 56127285, "body": "Edited to be more complete,  I wasn&#39;t aware to not use sscanf?"}, {"owner": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "edited": false, "score": 0, "creation_date": 1449704153, "post_id": 34190294, "comment_id": 56128503, "body": "@tdwig <code>sscanf</code>comes from C rather than C++. It&#39;s rightly frowned on by many due to the lack of parameter type checking. But the &#39;good&#39; C++ alternatives are often awkward to use and inflexible, IMO."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1449701075, "creation_date": 1449701075, "answer_id": 34190421, "question_id": 34190294, "link": "https://stackoverflow.com/questions/34190294/proper-use-of-sscanf-to-parse-string-c/34190421#34190421", "title": "Proper use of sscanf to parse string c++", "body": "<p>I can't see anything wrong in your posted code. It will be better for you to add code to perform error checks. Then you can see where the problem is.</p>\n\n<pre><code>if ( fgets(buffer, sizeof(buffer), infile) )\n{\n   printf(\"%s\", buffer);\n   if ( sscanf(buffer, \"Source$%d\", &amp;start) == 1 )\n   {\n      printf(\"start: %d \\n\", start);\n   }\n   else\n   {\n      printf(\"Unable to read source from buffer\\n\");\n   }\n}\nelse\n{\n   printf(\"Unable to read the text for source\\n\");\n}\n\n\nif ( fgets(buffer, sizeof(buffer), infile) )\n{\n   printf(\"%s\", buffer);\n   if ( sscanf(buffer, \"Destination$%d\", &amp;dest) == 1 )\n   {\n      printf(\"destination: %d \\n\", dest);\n   }\n   else\n   {\n      printf(\"Unable to read destination from buffer\\n\");\n   }\n}\nelse\n{\n   printf(\"Unable to read the text for destination\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4092317, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b424d85b9e0c4047b744768c0b459ef8?s=128&d=identicon&r=PG&f=1", "display_name": "tdwig", "link": "https://stackoverflow.com/users/4092317/tdwig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1449701075, "creation_date": 1449700402, "last_edit_date": 1449700845, "question_id": 34190294, "link": "https://stackoverflow.com/questions/34190294/proper-use-of-sscanf-to-parse-string-c", "title": "Proper use of sscanf to parse string c++", "body": "<p>Text in buffer:</p>\n\n<pre><code>Source$1\nDestination$5\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>char buffer[50];\nint start = 0;\nint dest = 0;\nFILE * infile = fopen(argv[1], \"r\")\n\nfgets(buffer, sizeof(buffer), infile);\nsscanf(buffer, \"Source$%d\", &amp;start); \nprintf(\"start: %d \\n\", start);\nfgets(buffer, sizeof(buffer), infile);\nsscanf(buffer, \"Destination$%d\", &amp;dest);\nprintf(\"destination: %d \\n\", dest);\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>start: 0\ndestination: 5\n</code></pre>\n\n<p>Destination is getting the right number, start isn't.\nHow do I fix this?</p>\n"}, {"tags": ["c++", "multithreading", "atomic", "memory-fences"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 3, "creation_date": 1449700618, "post_id": 34190291, "comment_id": 56127047, "body": "Stop. Watch this video. Watch it again, and then accept that specifying memory ordering is a dangerous waste of your time: <a href=\"https://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Herb-Sutter-atomic-Weapons-1-of-2\" rel=\"nofollow noreferrer\">channel9.msdn.com/Shows/Going+Deep/&hellip;</a>"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1449700637, "post_id": 34190291, "comment_id": 56127058, "body": "The fences have nothing to do with the fact that unordered, concurrent access to non-atomic variables is UB according to the memory model. Fences afford synchronization on <i>correct</i> code, but they don&#39;t prevent the UB."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1449701843, "post_id": 34190291, "comment_id": 56127578, "body": "Honestly, the best answer to this question is probably, &quot;because that&#39;s what the rules say, and systems are free to break code that doesn&#39;t follow the rules&quot;."}, {"owner": {"reputation": 1346, "user_id": 3769877, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100001244560682/picture?type=large", "display_name": "GamefanA", "link": "https://stackoverflow.com/users/3769877/gamefana"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1449733221, "post_id": 34190291, "comment_id": 56137972, "body": "very nice video @RichardHodges. it helped explain a lot of acquire release semantics that i wasn&#39;t aware of. I normally don&#39;t ever specify memory ordering (I just role with the default sequential consistent model :) but i was just curious as to why such weird implementation is necessary for  the above code to not have a data race."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1449733317, "post_id": 34190291, "comment_id": 56138037, "body": "@user3769877 I really think that presentation should be mandatory viewing for anyone who is about to write multithreaded code."}], "answers": [{"tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": true, "score": 2, "last_activity_date": 1449729506, "last_edit_date": 1449729506, "creation_date": 1449704081, "answer_id": 34191061, "question_id": 34190291, "link": "https://stackoverflow.com/questions/34190291/how-do-fences-actually-work-in-c/34191061#34191061", "title": "How do fences actually work in c++", "body": "<p>No real data race is a problem for your second snippet. This snippet would be OK ... if the compiler would <strong>literally</strong> generate machine code from the one which is written.</p>\n\n<p>But the compiler is free to generate any machine code, which is equivalent to the original one in case of a <strong>single-threaded program</strong>.</p>\n\n<p>E.g., compiler can note, that the <code>y</code> variable doesn't changes within <code>while(!y)</code> loop, so it can load this variable once to register and use only that register in the next iterations. So, if initially <code>y=false</code>, you will get an infinite loop.</p>\n\n<p>Another optimization, which is possible, is just removing the <code>while(!y)</code> loop, as it doesn't contain accesses to <em>volatile</em> or <em>atomic</em> variables and doesn't use <em>synchronization</em> actions. (C++ Standard says that any correct program should <strong>eventually</strong> do one of the actions specified above, so the compiler may rely on that fact when optimizing the program).</p>\n\n<p>And so on.</p>\n\n<p>More generally, the C++ Standard specifies that <em>concurrent</em> access to any <em>non-atomic</em> variable lead to <em>Undefined Behavior</em>, which is like \"Warranty is cleared\". That is why you should use an <em>atomic</em> <code>y</code> variable.</p>\n\n<p>From the other side, variable <code>x</code> doesn't need to be atomic, as accesses to it are not concurrent because of the memory fences.</p>\n"}], "owner": {"reputation": 1346, "user_id": 3769877, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100001244560682/picture?type=large", "display_name": "GamefanA", "link": "https://stackoverflow.com/users/3769877/gamefana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 2, "accepted_answer_id": 34191061, "answer_count": 1, "score": 1, "last_activity_date": 1449729506, "creation_date": 1449700395, "last_edit_date": 1449702258, "question_id": 34190291, "link": "https://stackoverflow.com/questions/34190291/how-do-fences-actually-work-in-c", "title": "How do fences actually work in c++", "body": "<p>I've been struggling with understanding how fences actually force code to synchronize.</p>\n\n<p>for instance, say i have this code</p>\n\n<pre><code>bool x = false;\nstd::atomic&lt;bool&gt; y;\nstd::atomic&lt;int&gt; z;\nvoid write_x_then_y()\n{\n    x = true;\n    std::atomic_thread_fence(std::memory_order_release);\n    y.store(true, std::memory_order_relaxed);\n}\nvoid read_y_then_x()\n{\n    while (!y.load(std::memory_order_relaxed));\n    std::atomic_thread_fence(std::memory_order_acquire);\n    if (x)\n        ++z;\n}\nint main()\n{\n    x = false;\n    y = false;\n    z = 0;\n    std::thread a(write_x_then_y);\n    std::thread b(read_y_then_x);\n    a.join();\n    b.join();\n    assert(z.load() != 0);\n}\n</code></pre>\n\n<p>because the release fence is followed by an atomic store operation, and the acquire fence is preceded by an atomic load, everything synchronizes as it's supposed to and the assert won't fire</p>\n\n<p>but if y was not an atomic variable like this</p>\n\n<pre><code>bool x;\nbool y;\nstd::atomic&lt;int&gt; z;\nvoid write_x_then_y()\n{\n    x = true;\n    std::atomic_thread_fence(std::memory_order_release);\n    y = true;\n}\nvoid read_y_then_x()\n{\n    while (!y);\n    std::atomic_thread_fence(std::memory_order_acquire);\n    if (x)\n        ++z;\n}\n</code></pre>\n\n<p>then, I hear, there might be a data race. But why is that? \nWhy must release fences be followed by an atomic store, and acquire fences be preceded by an atomic load in order for the code to synchronize properly?</p>\n\n<p>I would also appreciate it if anyone could provide an execution scenario in which a data race causes the assert to fire</p>\n"}, {"tags": ["c++", "multithreading", "atomic", "control-flow", "stack-unwinding"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1449700495, "post_id": 34190248, "comment_id": 56126991, "body": "Make the public interface <code>bar() { foo1(); foo2(); }</code> and keep <code>foo1</code> private?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3995702"}, "edited": false, "score": 1, "creation_date": 1449701836, "post_id": 34190248, "comment_id": 56127576, "body": "If you are dealing with virtual functions (ie, if <code>foo1()</code> or <code>foo2()</code> are virtual) you should avoid calling them in constructors or destructors. The vtable might not be what you expect during either construction or destruction, and this can lead to nearly impossible to track errors. However, if you are not using virtuals, I can&#39;t see any major issues in single-threaded programs. You could always use a bool flag variable to make sure functions are run in the proper order/run at all."}, {"owner": {"reputation": 99, "user_id": 5236479, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1841276cf6b8f1ef33e16d6a5e899669?s=128&d=identicon&r=PG&f=1", "display_name": "dontarius", "link": "https://stackoverflow.com/users/5236479/dontarius"}, "edited": false, "score": 0, "creation_date": 1449702526, "post_id": 34190248, "comment_id": 56127856, "body": "Thanks for the comments.  I added a brief clarification to my question.  Neither function is virtual, but that&#39;s a good thing to look out for in the future."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 5236479, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1841276cf6b8f1ef33e16d6a5e899669?s=128&d=identicon&r=PG&f=1", "display_name": "dontarius", "link": "https://stackoverflow.com/users/5236479/dontarius"}, "edited": false, "score": 0, "creation_date": 1449712513, "post_id": 34191567, "comment_id": 56131152, "body": "Thanks for your response.  It turns out foo1() and foo2() are used to push changes to a database that does not support ACID transactions, so I guess the only way around this would be to store / log what was supposed to happen, and if things go south, compare the db&#39;s state with what was supposed to happen."}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 1, "last_activity_date": 1449706753, "creation_date": 1449706753, "answer_id": 34191567, "question_id": 34190248, "link": "https://stackoverflow.com/questions/34190248/place-critical-functions-in-destructor-to-enhance-atomicity/34191567#34191567", "title": "Place critical functions in destructor to &quot;enhance atomicity&quot;?", "body": "<p>If another thread crashes (without relevant signal handler -> the whole application exits), there is not much you can do to guarantee that your application does something - it's up to what the OS does. And there are ALWAYS cases where the system will kill your app without your actual knowledge (e.g. a bug that causes \"all\" memory being used by your app and the OS \"out of memory killer\" killing your process). </p>\n\n<p>The only time your destructor is guaranteed to be executed is if the object is constructed and a C++ exception is thrown. All signals and such, make no such guarantees, and contininuing to execute [in the same thread] after for example SIGSEGV or SIGBUS is well into the \"undefined\" parts of the world - nothing much you can do about that, since the SEGV typically means \"you tried to do something to memory that doesn't exist [or that you can't access in the way you tried, e.g. write to code-memory]\", and the processor would have aborted the current instruction. Attempting to continue where you were will either lead to the same instruction being executed again, or the instruction being skipped [if you continue at the next instruction - and I'm ignoring the trouble of determining where that is for now]. And of course, there are situations where it's IMPOSSIBLE to continue even if you wanted to - say for example the stack pointer has been corrupted [restored from memory that was overwritten, etc].</p>\n\n<p>In short, don't spend much time trying to come up with something that tries to avoid these sort of scenarios, because it's unlikely to work. Spend your time trying to come up with schemes where you don't need to know if you completed something or not [for example transaction based programming, or \"commit-based\" programming (not sure if that's the right term, but basically you do some steps, and then \"commit\" the stuff done so far, and then do some further steps, etc - only stuff that has been \"committed\" is sure to be complete, uncommitted work is discarded next time around) , where something is either completely done, or completely discarded, depending on if it completed or not].</p>\n\n<p>Separating \"sensitive\" and \"not sensitive\" parts of your application into separate processes can be another way to achieve some more safety.</p>\n"}], "owner": {"reputation": 99, "user_id": 5236479, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1841276cf6b8f1ef33e16d6a5e899669?s=128&d=identicon&r=PG&f=1", "display_name": "dontarius", "link": "https://stackoverflow.com/users/5236479/dontarius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 34191567, "answer_count": 1, "score": 0, "last_activity_date": 1449706753, "creation_date": 1449700211, "last_edit_date": 1449702373, "question_id": 34190248, "link": "https://stackoverflow.com/questions/34190248/place-critical-functions-in-destructor-to-enhance-atomicity", "title": "Place critical functions in destructor to &quot;enhance atomicity&quot;?", "body": "<p>Say I have two C++ functions foo1() and foo2(), and I want to minimize the likelihood that that foo1() starts execution but foo2() is not called due to some external event.  I don't mind if neither is called, but foo2() must execute if foo1() was called.  Both functions can be called consecutively and do not throw exceptions.</p>\n\n<p>Is there any benefit / drawback to wrapping the functions in an object and calling both in the destructor?  Would things change if the application was multi-threaded (say the parent thread crashes)?  Are there any other options for ensuring foo2() is called so long as foo1() is called?</p>\n\n<p>I thought having them in a destructor might help with e.g. SIGINT, though I learned SIGINT will stop execution immediately, even in the middle of the destructor.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>To clarify:  both foo1() and foo2() will be abstracted away, so I'm not concerned about someone else calling them in the wrong order.  My concern is solely related to crashes, exceptions, or other interruptions during the execution of the application (e.g. someone pressing SIGINT, another thread crashing, etc.).</p>\n"}, {"tags": ["c++", "opencv", "point-cloud-library"], "comments": [{"owner": {"reputation": 6788, "user_id": 298206, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2911c6ad709ff05272e49a21df247da2?s=128&d=identicon&r=PG", "display_name": "Valentin Heinitz", "link": "https://stackoverflow.com/users/298206/valentin-heinitz"}, "edited": false, "score": 0, "creation_date": 1449700660, "post_id": 34190247, "comment_id": 56127068, "body": "Try to describe line by line what you intend to do, and than you&#39;ll understand why it doesn&#39;t do what you intend. You create new cloud on each voxel and create/destroy viewer each time. Probably you should first add all voxels to a cloud, then display this cloud."}, {"owner": {"reputation": 1091, "user_id": 2362907, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c21fe794765cab0a25d30be979b6f36a?s=128&d=identicon&r=PG&f=1", "display_name": "Jeanne", "link": "https://stackoverflow.com/users/2362907/jeanne"}, "reply_to_user": {"reputation": 6788, "user_id": 298206, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2911c6ad709ff05272e49a21df247da2?s=128&d=identicon&r=PG", "display_name": "Valentin Heinitz", "link": "https://stackoverflow.com/users/298206/valentin-heinitz"}, "edited": false, "score": 0, "creation_date": 1449702548, "post_id": 34190247, "comment_id": 56127867, "body": "@ValentinHeinitz, I edited my question."}], "answers": [{"comments": [{"owner": {"reputation": 1091, "user_id": 2362907, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c21fe794765cab0a25d30be979b6f36a?s=128&d=identicon&r=PG&f=1", "display_name": "Jeanne", "link": "https://stackoverflow.com/users/2362907/jeanne"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1449704122, "post_id": 34190394, "comment_id": 56128492, "body": "@CaptainObvlious, I have edited this answer and I wait for peer reviewed."}, {"owner": {"reputation": 1091, "user_id": 2362907, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c21fe794765cab0a25d30be979b6f36a?s=128&d=identicon&r=PG&f=1", "display_name": "Jeanne", "link": "https://stackoverflow.com/users/2362907/jeanne"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1449704194, "post_id": 34190394, "comment_id": 56128519, "body": "@CaptainObvlious,  I get the same error <b>no matching member function for call to &#39;showCloud&#39;  viewer.showCloud (pt);</b> when using this answer"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "reply_to_user": {"reputation": 1091, "user_id": 2362907, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c21fe794765cab0a25d30be979b6f36a?s=128&d=identicon&r=PG&f=1", "display_name": "Jeanne", "link": "https://stackoverflow.com/users/2362907/jeanne"}, "edited": false, "score": 0, "creation_date": 1449705240, "post_id": 34190394, "comment_id": 56128931, "body": "@Jeanne That means <code>CloudViewer </code> does not have a member function named <code>showCloud</code>. Double check the documentation to make sure you&#39;re calling the correct function."}, {"owner": {"reputation": 1091, "user_id": 2362907, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c21fe794765cab0a25d30be979b6f36a?s=128&d=identicon&r=PG&f=1", "display_name": "Jeanne", "link": "https://stackoverflow.com/users/2362907/jeanne"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1449711697, "post_id": 34190394, "comment_id": 56130922, "body": "@CaptainObvlious, No, CloudViewer has a function showCloud. I think the problem is in the parameter pt in showCloud()!"}], "tags": [], "owner": {"reputation": 6788, "user_id": 298206, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2911c6ad709ff05272e49a21df247da2?s=128&d=identicon&r=PG", "display_name": "Valentin Heinitz", "link": "https://stackoverflow.com/users/298206/valentin-heinitz"}, "is_accepted": false, "score": 1, "last_activity_date": 1449705071, "last_edit_date": 1449705071, "creation_date": 1449700966, "answer_id": 34190394, "question_id": 34190247, "link": "https://stackoverflow.com/questions/34190247/how-can-visualize-3d-points-on-c/34190394#34190394", "title": "How can Visualize 3D points on C++", "body": "<p>Try to change like this:</p>\n\n<p>don't create cloud and viewer inside draw-function. Pass cloud as argument:    </p>\n\n<pre><code>void Voxel::drawVoxel( pcl::PointXYZ * pt )\n{\n    //pcl::PointXYZ pt;\n    pt-&gt;x=coordinates.x;\n    pt-&gt;y=coordinates.y;\n    pt-&gt;z=coordinates.z; \n}\n</code></pre>\n\n<p>Once cloud is created with all voxels, draw it:</p>\n\n<pre><code>pcl::PointXYZ  pt;\nVoxel v1(1,2,3);\nv.drawVoxel(&amp;pt);\npcl::visualization::CloudViewer viewer (\"draw voxel\");\nviewer.showCloud (pt);\n</code></pre>\n"}], "owner": {"reputation": 1091, "user_id": 2362907, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c21fe794765cab0a25d30be979b6f36a?s=128&d=identicon&r=PG&f=1", "display_name": "Jeanne", "link": "https://stackoverflow.com/users/2362907/jeanne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3237, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1449705071, "creation_date": 1449700209, "last_edit_date": 1449702534, "question_id": 34190247, "link": "https://stackoverflow.com/questions/34190247/how-can-visualize-3d-points-on-c", "title": "How can Visualize 3D points on C++", "body": "<p>I am developing a 3D reconstruction project using Opencv and PCL. In my code a voxel is represented by cv::Point3f coordinates</p>\n\n<p><strong>Voxel.hpp</strong></p>\n\n<pre><code>    class Voxel\n    {\n    private:\n//3D Coordinates of voxel\n        cv::Point3f coordinates;\n    public:\n//constructor of voxel\n        Voxel(float x, float y, float z);\n        void drawVoxel();\n    };\n</code></pre>\n\n<p><strong>Voxel.cpp</strong></p>\n\n<pre><code>//implement constructor\nVoxel::Voxel(float x, float y,float z)\n{\n    coordinates.x=x;\n    coordinates.y=y;\n    coordinates.z=z;\n\n}\n//draw one voxel (3D point).\nvoid Voxel::drawVoxel()\n {\n        pcl::PointXYZ pt;\n        pt.x=coordinates.x;\n        pt.y=coordinates.y;\n        pt.z=coordinates.z;\n        pcl::visualization::CloudViewer viewer (\"draw voxel\");\n        viewer.showCloud (pt);\n\n    }\n</code></pre>\n\n<p>I get an error in the last line in drawVoxel() function. How can i fix that?</p>\n"}, {"tags": ["c++", "templates", "c++11"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 3, "creation_date": 1449700276, "post_id": 34190242, "comment_id": 56126874, "body": "&quot;I&#39;m using VS2015 and GCC 4.9, so the std::bind and placeholders are in tr1.&quot; Wait, what?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1449700379, "post_id": 34190242, "comment_id": 56126937, "body": "And <code>bind( f, Args... args, &#47;*...*&#47;)</code> isn&#39;t valid syntax."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1449701147, "post_id": 34190242, "comment_id": 56127280, "body": "What is the purpose of writing a &quot;wrapper&quot;?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1449734542, "post_id": 34190242, "comment_id": 56138624, "body": "@Pete Becker:  The normal use case is that the callable the client application wishes to invoke has a small number of arguments they wish to bind (often just a &#39;this&#39; pointer), plus the arguments of the callback.  The real code actually has four arguments, and the explicit call to std::bind looks rather messy in the client code.  I think mybind(f,1) is less opaque than std::bind(f,1,std::placeholders::_1, std::placeholders::_2);"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1449756451, "post_id": 34190242, "comment_id": 56152322, "body": "Yes, thanks. I overlooked the placeholders in the forwarding call."}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1449702924, "post_id": 34190343, "comment_id": 56128045, "body": "You probably miss the forwarding references for <code>mybind(F&amp;&amp; f, Args&amp;&amp;... args)</code>, else just use <code>std::move</code>"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1449734814, "post_id": 34190343, "comment_id": 56138741, "body": "1.  The Args... was entirely bogus, and down to me posting from home without the code in front of me.  Sorry about that."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1449735090, "post_id": 34190343, "comment_id": 56138865, "body": "2.  VS2015 is quite happy with bind and placeholders in std ... and so is GCC.  The existing code has been using std::tr1 - I have no idea why."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1449735785, "post_id": 34190343, "comment_id": 56139241, "body": "I don&#39;t particularly want to use decltype because the whole point of this function is to simplify the generation of the argument to setcb (which takes a tCallback).  (The fact that not using the decltype reduces the noise is just an added bonus.)"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1449735800, "post_id": 34190343, "comment_id": 56139245, "body": "I am going to accept this answer because: a) it clarified the syntax for using std::forward for me (which I knew I really ought to do, but I just didn&#39;t quite know how).  b) Working through this found my actual problem."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1449735926, "post_id": 34190343, "comment_id": 56139307, "body": "You know I said I had typed this away from work?  If I had copy and pasted in my actual code, I suspect most people would have spotted that:    return std::tr1::bind( f, Args... args,          std::tr1::placeholders::_1, std::tr1::placeholders::_2, std::tr1::placeholders::_2 ); Looks rather suspicious.   Apologies for all the noise :-("}], "tags": [], "owner": {"reputation": 1261, "user_id": 2303378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ff8bb3b43552420897498876c08527d?s=128&d=identicon&r=PG", "display_name": "Denis Blank", "link": "https://stackoverflow.com/users/2303378/denis-blank"}, "is_accepted": true, "score": 0, "last_activity_date": 1449700659, "creation_date": 1449700659, "answer_id": 34190343, "question_id": 34190242, "link": "https://stackoverflow.com/questions/34190242/how-to-use-get-stdbind-like-behaviour/34190343#34190343", "title": "How to use get std::bind like behaviour", "body": "<p>You are getting errors because of the <code>Args... args</code> which should be just <code>args...</code> as mentioned in the comments already.</p>\n\n<p>Also consider to use <code>std::forward</code> to forward your parameters correctly and\nprefer to use <code>decltype</code> to determine the return type of your wrapper function\nwhich doesn't force convertion into a <code>std::function</code>:</p>\n\n<pre><code>#include &lt;functional&gt;\n\ntypedef std::function&lt;void(float, int)&gt; tCallback;\n\ntemplate&lt;typename F, typename... Args&gt;\nauto mybind(F f, Args... args)\n    -&gt; decltype(std::bind(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...,\n        std::placeholders::_1, std::placeholders::_2 ))\n//      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n{\n    return std::bind(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)..., \n//      ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^~~~~\n        std::placeholders::_1, std::placeholders::_2 );\n}\n\nstruct Foo {\n   tCallback m_cb;\n   void setcb(tCallback cb) {m_cb = cb;}\n};\n\nvoid f1(float f, int i) {}\nvoid f2(int j, float f, int i) {}\n\nint main()\n{\n    Foo foo;\n    foo.setcb( mybind( f1 ) );   // Fine.\n    foo.setcb( mybind( f2, 1 ) ); // Not fine.\n}\n</code></pre>\n\n<p><strong><a href=\"http://coliru.stacked-crooked.com/a/e744bf3d8f0ebfbd\" rel=\"nofollow\">Demo</a></strong></p>\n\n<hr>\n\n<p>Just a quick note about the note :-)</p>\n\n<blockquote>\n  <p>Note: I'm using VS2015 and GCC 4.9, so the std::bind and placeholders are in tr1.</p>\n</blockquote>\n\n<p><code>std::bind</code> was moved in the std namespace from Visual Studio 2013(2012) and\nshould be preffered over the tr1 namespace.</p>\n"}, {"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1449737789, "creation_date": 1449737789, "answer_id": 34197438, "question_id": 34190242, "link": "https://stackoverflow.com/questions/34190242/how-to-use-get-stdbind-like-behaviour/34197438#34197438", "title": "How to use get std::bind like behaviour", "body": "<p>So the actual problem was that</p>\n\n<pre><code>return std::tr1::bind( f, Args... args, \n    std::tr1::placeholders::_1, std::tr1::placeholders::_2 );\n</code></pre>\n\n<p>was actually:</p>\n\n<pre><code>return std::tr1::bind( f, args..., \n    std::tr1::placeholders::_1, \n    std::tr1::placeholders::_2, std::tr1::placeholders::_2 );\n</code></pre>\n\n<p>The \"Args... args\" vs \"args...\" was me misremembering my code.  The doubled _2 meant I was trying to call a function with the wrong number of arguments.  (I don't understand why it worked with zero bind args, but that's a different question!)</p>\n"}], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 34190343, "answer_count": 2, "score": 2, "last_activity_date": 1449737789, "creation_date": 1449700186, "question_id": 34190242, "link": "https://stackoverflow.com/questions/34190242/how-to-use-get-stdbind-like-behaviour", "title": "How to use get std::bind like behaviour", "body": "<p>I am trying to write a wrapper for std::bind.  My first attempt is:</p>\n\n<pre><code>typedef std::function&lt;void(float, int)&gt; tCallback;\n\ntemplate&lt;typename F, class... Args&gt;\ntCallback mybind(F f, Args... args)\n{\n    return std::tr1::bind( f, Args... args, \n        std::tr1::placeholders::_1, std::tr1::placeholders::_2 );\n}\n</code></pre>\n\n<p>Given something like:</p>\n\n<pre><code>struct Foo {\n   tCallback m__cb;\n   setcb(tCallback cb) {m_cb = cb;}\n   ....\n};\n\nvoid f1(float f, int i) {}\nvoid f2(int j, float f, int i) {}\n\nFoo foo;\nfoo.setcb( mybind( f1 ) );   // Fine.\nfoo.setcb( mybind( f2, 1 ) ); // Not fine.\n</code></pre>\n\n<p>What am I doing wrong?  On Visual Studio, the error refers to Args starting with \"int &amp;\" (which surprises me, but I may be down a few layers of error message).  On GCC the error refers to \"too many arguments\".  (I am not naive enough to expect helpful error messages from deeply templated code like this!)  </p>\n\n<p>Do I need to write versions of mybind for function pointers and member function pointers (and what do I do about functors)?</p>\n\n<p>Note: I'm using VS2015 and GCC 4.9, so the std::bind and placeholders are in tr1.</p>\n"}, {"tags": ["c++", "mpi", "topology", "cartesian"], "answers": [{"comments": [{"owner": {"reputation": 659, "user_id": 2463540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Rk0PU.jpg?s=128&g=1", "display_name": "Gaurav Saxena", "link": "https://stackoverflow.com/users/2463540/gaurav-saxena"}, "reply_to_user": {"reputation": 97, "user_id": 4367204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74515f1e6add07140a0e6a5979fd0063?s=128&d=identicon&r=PG&f=1", "display_name": "Vdovin", "link": "https://stackoverflow.com/users/4367204/vdovin"}, "edited": false, "score": 0, "creation_date": 1449730452, "post_id": 34194175, "comment_id": 56136714, "body": "Please check the process coordinates. They are NOT in accordance with the MPI cartesian coordinates."}], "tags": [], "owner": {"reputation": 659, "user_id": 2463540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Rk0PU.jpg?s=128&g=1", "display_name": "Gaurav Saxena", "link": "https://stackoverflow.com/users/2463540/gaurav-saxena"}, "is_accepted": false, "score": 0, "last_activity_date": 1449726668, "last_edit_date": 1449726668, "creation_date": 1449724488, "answer_id": 34194175, "question_id": 34190216, "link": "https://stackoverflow.com/questions/34190216/mpi-cart-shift-corner-neighborhood/34194175#34194175", "title": "MPI_Cart_Shift.Corner Neighborhood", "body": "<p>You forgot to label R5. There is not direct approach that I can think of. But here is an indirect way:</p>\n\n<p>(1) For any rank whose coordinates are <code>(A,y,z)</code> consider coordinates : <code>(A,y+1,z+1), (A,y-1,z-1), (A,y+1,z-1)</code> and <code>(A,y-1,z+1)</code> - these can be the 4 diagonal neighbours. Clearly, when considering a minus for e.g. <code>z-1</code>, it is clear that <code>z-1 &gt;= 0</code> and when considering a plus for e.g. <code>y+1 &lt;= (dimension_in_y - 1)</code>. For example consider R5 (which you forgot to label). <code>R5</code> according to MPI has coordinates <code>R5(0,1,0)</code>. It can have 4 diagonal neighbours : <code>(0,1+1,0+1), (0,1-1,0-1),(0,1+1,0-1),(0,1-1,0+1)</code> - out of which only the fourth one exists (which is clear as no neighbour can have <em>negative coordinates</em> and each coordinate must be <em>1 less</em> than dimension in that direction). Next simply query <code>MPI_coordinate_to_rank()</code>. </p>\n\n<p>(2) Another method is to query the <code>right</code> and <code>left</code> neighbours about their <code>front</code> and <code>back</code> neighbours (this will be bad performance-wise). </p>\n\n<p>(3) To generalise it to 8 neighbours - you'll need to vary the X coordinate as well - but your question is limited to the face of a cube. </p>\n"}, {"tags": [], "owner": {"reputation": 301, "user_id": 5497772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d10b174124b48a74506d9bb98d16c44?s=128&d=identicon&r=PG&f=1", "display_name": "macelee", "link": "https://stackoverflow.com/users/5497772/macelee"}, "is_accepted": true, "score": 3, "last_activity_date": 1449734892, "creation_date": 1449734892, "answer_id": 34196648, "question_id": 34190216, "link": "https://stackoverflow.com/questions/34190216/mpi-cart-shift-corner-neighborhood/34196648#34196648", "title": "MPI_Cart_Shift.Corner Neighborhood", "body": "<p>You can use <em>MPI_Cart_rank</em> to find the information you need. </p>\n\n<pre><code>int MPI_Cart_rank(MPI_Comm comm, const int coords[], int *rank)\n</code></pre>\n\n<p>Here <em>comm</em> is a communicator with Cartesian topology. <em>coords</em> is a integer array (the size of this array being the number of dimensions of the Cartesian topology) containing the coordinate of a process (in your case, 1,1,0 for R6). Then the output <em>rank</em> would return the global rank of that process you can use in subsequent communication.</p>\n\n<p>BTW, <em>MPI_Cart_coords</em> performs the opposite direction, i.e. from rank to coordinate.</p>\n"}, {"tags": [], "owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "is_accepted": false, "score": 1, "last_activity_date": 1449775457, "last_edit_date": 1449775457, "creation_date": 1449775035, "answer_id": 34209946, "question_id": 34190216, "link": "https://stackoverflow.com/questions/34190216/mpi-cart-shift-corner-neighborhood/34209946#34209946", "title": "MPI_Cart_Shift.Corner Neighborhood", "body": "<p><code>MPI_Cart_shift</code> can only find neighbours in any of the main directions, but not diagonally - you have to implement it on your own, which is not that hard to do. The Cartesian shift itself is nothing more than a convenience function that wraps calls to <code>MPI_Cart_coords</code> and <code>MPI_Cart_rank</code>:</p>\n\n<pre><code>//\n// The following is equivalent to\n// MPI_Cart_shift(cart_comm, i, disp, &amp;rank_source, &amp;rank_dest);\n//\n\n// Obtain the rank of the calling process and translate it into coordinates\nint rank, coords[ndims];\nMPI_Comm_rank(cart_comm, &amp;rank);\nMPI_Cart_coords(cart_comm, rank, ndims, coords);\n\nint mycoord_i = coords[i];\n\n// Compute the coordinates of the destination in direction i and convert them into rank\ncoords[i] = mycoord_i + disp;\n// Take care of non-periodic dimensions\nif (!periods[i] &amp;&amp; (coords[i] &gt;= dims[i] || coords[i] &lt; 0))\n   rank_dest = MPI_PROC_NULL;\nelse\n   MPI_Cart_rank(cart_comm, coords, &amp;rank_dest);\n\n// Compute the coordinates of the source in direction i and convert them into rank\ncoords[i] = mycoord_i - disp;\n// Take care of non-periodic dimensions\nif (!periods[i] &amp;&amp; (coords[i] &gt;= dims[i] || coords[i] &lt; 0))\n   rank_source = MPI_PROC_NULL;\nelse\n   MPI_Cart_rank(cart_comm, coords, &amp;rank_source);\n</code></pre>\n\n<p>Note how going out-of-bound should be explicitly handled for non-periodic dimensions. For periodic ones, <code>MPI_Cart_rank</code> itself does the folding of the coordinates. Your Cartesian topology is periodic, therefore the checks could be skipped (not recommended).</p>\n\n<p>You can easily adapt the code above to produce a shift in two or more dimensions, then use it to enumerate over all possible combinations of displacements and directions to find the ranks that lie on a given face. For example:</p>\n\n<pre><code>int rank, coords[ndims];\nMPI_Comm_rank(cart_comm, &amp;rank);\nMPI_Cart_coords(cart_comm, rank, ndims, coords);\nint my_coord1 = coords[1];\nint my_coord2 = coords[2];\ncoords[1] = my_coord1 + 1;\ncoords[2] = my_coord2 + 1;\nMPI_Cart_rank(cart_comm, coords, &amp;rank_dest);\ncoords[1] = my_coord1 - 1;\ncoords[2] = my_coord2 - 1;\nMPI_Cart_rank(cart_comm, coords, &amp;rank_source);\n</code></pre>\n\n<p>will give you the rank of R6 in <code>rank_dest</code> when executed by R0. If you extract the code in a separate routine and call it <code>MyMPI_Cart_shift2</code>:</p>\n\n<pre><code>MyMPI_Cart_shift2(cart_comm, 1, 1, 2, 1, &amp;rank_source, &amp;rank_dest);\n</code></pre>\n\n<p>Another option would be to use <code>MPI_Cart_sub</code> to split the Cartesian topology into slabs, parallel to the face. You can then directly perform communication involving only ranks in any given slab.</p>\n"}], "owner": {"reputation": 97, "user_id": 4367204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74515f1e6add07140a0e6a5979fd0063?s=128&d=identicon&r=PG&f=1", "display_name": "Vdovin", "link": "https://stackoverflow.com/users/4367204/vdovin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1251, "favorite_count": 1, "accepted_answer_id": 34196648, "answer_count": 3, "score": 6, "last_activity_date": 1503193076, "creation_date": 1449700075, "last_edit_date": 1503193076, "question_id": 34190216, "link": "https://stackoverflow.com/questions/34190216/mpi-cart-shift-corner-neighborhood", "title": "MPI_Cart_Shift.Corner Neighborhood", "body": "<p><a href=\"https://i.stack.imgur.com/WwAzC.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WwAzC.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I need to create a communicator with cube topology and then select face of the cube, using the MPI_Cart_Shift implemented messaging between processes that are on the brink. For example I am process with rank 0(R0) my neighborhoods are R2, R4, R6(lower face of cube). I can find R2 and R4, but I can't understand how to find R6. My code:</p>\n\n<pre><code>#include&lt;mpi.h&gt;\n#include&lt;stdio.h&gt;\n\nint main(int argc, char *argv[])\n{\nint rank, k;\nint size; \nint ndims = 3; \nint source, dest;\nint up,down,right,left,up3, down3;\n\nint edges[6][4] = {{0,1,5,4},\n                {4,5,7,6},\n                {2,3,1,0},\n                {6,7,3,2},\n                {1,3,7,5},\n                {0,2,6,7}};\n\nint t, incep=0;\nchar processor_name[MPI_MAX_PROCESSOR_NAME];\n\nMPI_Comm comm, comm3d;\nint dims[3]={0,0,0}, coords[3]={0,0,0},\n    periods[3]={1,1,1}, reorder = 0;\n\n\nMPI_Status status;\n\n\nint user_edge;\n\nMPI_Init(&amp;argc, &amp;argv);\n\nMPI_Comm_size(MPI_COMM_WORLD, &amp;size);\nMPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n\nMPI_Dims_create(size, ndims, dims);\n\n\n  MPI_Cart_create(MPI_COMM_WORLD, ndims, dims, periods, reorder, &amp;comm);\n\n\n  MPI_Cart_coords(comm, rank, 3, coords);\n\n fflush(stdout);\n     printf(\"Rank %d coordinates are %d %d %d\\n\", rank, coords[0], coords[1], coords[2]);\n MPI_Barrier(comm);\n\n    int leftrank, rightrank;\n    int downrank, uprank;\n\nMPI_Comm_rank(comm, &amp;rank);\n    MPI_Cart_coords(comm, rank, 2, coords);\nMPI_Cart_shift(comm, 0, -1, &amp;downrank, &amp;uprank); \nMPI_Sendrecv(buffer, 10, MPI_INT, downrank, 123, buffer2, 10, MPI_INT, uprank, 123, comm, &amp;status);\nMPI_Cart_shift(comm, 1, -1, &amp;rightrank, &amp;leftrank); \n    MPI_Sendrecv(buffer, 10, MPI_INT, leftrank, 123, buffer2, 10, MPI_INT, rightrank, 123, comm, &amp;status);\n\n\nprintf(\"P:%d My neighbors are rightRank: %d downRank:%d leftRank:%d upRank:%d diagonal:%d diagonalX:%d\\n\", rank,rightrank,downrank,leftrank,uprank,diagonal,diagonalX);\n\n\n\nMPI_Finalize();\n\nreturn 0;\n\n}\n</code></pre>\n\n<p>I will try add something like this MPI_Cart_shift(comm, 2, 1, &amp;diagonal, &amp;diagonalX); But for R0 it show me R1 and it i understand.... How can I get corner neighborhoods?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 5, "creation_date": 1449699813, "post_id": 34190133, "comment_id": 56126651, "body": "What do you think <code>sum</code> contains before you enter any numbers?"}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 1, "creation_date": 1449699862, "post_id": 34190133, "comment_id": 56126685, "body": "Learn to use a debugger"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1449700075, "post_id": 34190133, "comment_id": 56126774, "body": "Also remember you are working with integers and they always round down."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1449700738, "post_id": 34190301, "comment_id": 56127100, "body": "Better style (IMHO) to initialize the variables at the beginning of the loop, so you don&#39;t have to do it twice."}, {"owner": {"reputation": 3257, "user_id": 2572994, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kT0R5.jpg?s=128&g=1", "display_name": "Ivaylo Toskov", "link": "https://stackoverflow.com/users/2572994/ivaylo-toskov"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1449700942, "post_id": 34190301, "comment_id": 56127201, "body": "I agree on that. Fixed it."}, {"owner": {"reputation": 45, "user_id": 5606478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7517766bf9d116b3f87e95c83da106a1?s=128&d=identicon&r=PG", "display_name": "Goodwin Lu", "link": "https://stackoverflow.com/users/5606478/goodwin-lu"}, "edited": false, "score": 0, "creation_date": 1449701387, "post_id": 34190301, "comment_id": 56127397, "body": "wow, thanks man! I really do need to get my doubles and ints straight."}], "tags": [], "owner": {"reputation": 3257, "user_id": 2572994, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kT0R5.jpg?s=128&g=1", "display_name": "Ivaylo Toskov", "link": "https://stackoverflow.com/users/2572994/ivaylo-toskov"}, "is_accepted": true, "score": 6, "last_activity_date": 1450046568, "last_edit_date": 1450046568, "creation_date": 1449700461, "answer_id": 34190301, "question_id": 34190133, "link": "https://stackoverflow.com/questions/34190133/wrong-output-on-array-average-program/34190301#34190301", "title": "Wrong output on array-average program", "body": "<p>There are couple of issues with your code:</p>\n\n<ol>\n<li>You haven't initialized <code>sum</code> so the output of this program is not deterministic. I guess in your case the compiler simply sets it to <code>0</code> which is the intended behavior anyways, so this is why your result is close to the correct one. However, don't expect that this will always be the case and always make sure that you use initialized variables.</li>\n<li>In the end of the loop you need to reset the values of <code>numb</code> and <code>sum</code>.</li>\n<li><p>You work with integers which always rounds the result down. You can either use doubles or cast the variables where needed.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\nusing namespace std;\nint main() {\n  int a, b;\n  double average, sum;\n  int numb;\n  cin &gt;&gt; a;\n  for (int i = 0; i &lt; a; i++) {\n    sum = 0.0;\n    numb = 0;\n    do {\n      cin &gt;&gt; b;\n      sum = b+sum;\n      numb++;\n    } while (b != 0);\n    average = sum / (numb - 1);\n    cout &lt;&lt; round(average) &lt;&lt; \" \";\n  }\n}\n</code></pre></li>\n</ol>\n\n<p>Also note that if for same case you directly type in <code>0</code>, the program will crash because of division by 0.</p>\n"}], "owner": {"reputation": 45, "user_id": 5606478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7517766bf9d116b3f87e95c83da106a1?s=128&d=identicon&r=PG", "display_name": "Goodwin Lu", "link": "https://stackoverflow.com/users/5606478/goodwin-lu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 34190301, "answer_count": 1, "score": 2, "last_activity_date": 1450046568, "creation_date": 1449699704, "last_edit_date": 1449700482, "question_id": 34190133, "link": "https://stackoverflow.com/questions/34190133/wrong-output-on-array-average-program", "title": "Wrong output on array-average program", "body": "<p>I have encountered a problem where I must take the average value of the sum of a line of numbers, ending with a zero, which must not be counted in the equation. However, while my first value of output is quite near or sometimes correct, my other values are completely off. I'd be glad if anyone can figure out what I did wrong with my code.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\nusing namespace std;\nint main() {\n    int a, b, sum, average;\n    int numb = 0;\n    cin&gt;&gt;a;\n    for (int i=0;i&lt;a;i++) {\n        do {\n            cin&gt;&gt;b;\n            sum= b+sum;\n            numb++;\n        } while (b!=0);\n        average = sum/(numb-1);\n        cout&lt;&lt;round(average)&lt;&lt;\" \";\n    }\n}\n</code></pre>\n\n<p><strong>Input:</strong> </p>\n\n<blockquote>\n  <p>11<br>\n  780 1610 565 799 1664 431 0<br>\n  12848 10728 4091 12286 8035 0<br>\n  959 418 171 255 694 78 393 917 119 1016 929 761 363 0<br>\n  14930 11543 11508 3062 1545 8434 6504 2631 0<br>\n  418 359 477 157 224 170 124 433 255 0<br>\n  1175 1789 853 1411 1772 661 884 449 1324 713 0<br>\n  52 325 456 579 732 621 0<br>\n  6898 11736 13531 11906 2502 0<br>\n  16334 10736 7506 8493 3749 5434 0<br>\n  3221 4212 5720 6807 14802 11421 8939 4167 12245 14132 11460 5120 9445 5000 5379 0<br>\n  366 2435 3709 1616 3725 3449 1591 901 7202 5837 0  </p>\n</blockquote>\n\n<p><strong>Output:</strong></p>\n\n<blockquote>\n  <p>974 4486 2342 3459 2748 2405 2182 2667 3109 3895 3778  </p>\n</blockquote>\n\n<p><strong>Expected:</strong></p>\n\n<blockquote>\n  <p>975 9598 544 7520 291 1103 461 9315 8709 8138 3083  </p>\n</blockquote>\n\n<p>But what went wrong?</p>\n"}, {"tags": ["c#", "c++", "kinect", "kinect-sdk"], "comments": [{"owner": {"reputation": 3314, "user_id": 3214889, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/StoMh.png?s=128&g=1", "display_name": "Krythic", "link": "https://stackoverflow.com/users/3214889/krythic"}, "edited": false, "score": 0, "creation_date": 1449713788, "post_id": 34189980, "comment_id": 56131495, "body": "Show us what you have tried."}, {"owner": {"reputation": 5540, "user_id": 4814427, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XIE7P.jpg?s=128&g=1", "display_name": "Rafaf Tahsin", "link": "https://stackoverflow.com/users/4814427/rafaf-tahsin"}, "edited": false, "score": 0, "creation_date": 1449757086, "post_id": 34189980, "comment_id": 56152768, "body": "This may be helpful <a href=\"https://github.com/wieden-kennedy/Cinder-Kinect2/blob/master/src/Kinect2.cpp#L223\" rel=\"nofollow noreferrer\">github.com/wieden-kennedy/Cinder-Kinect2/blob/master/src/&hellip;</a>"}, {"owner": {"reputation": 276, "user_id": 4905645, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/47760f73bbc87016def7dee79baabf7b?s=128&d=identicon&r=PG&f=1", "display_name": "Pol", "link": "https://stackoverflow.com/users/4905645/pol"}, "edited": false, "score": 0, "creation_date": 1449773255, "post_id": 34189980, "comment_id": 56163147, "body": "Thanks Rafaf, it is the opposite operation that I need..."}, {"owner": {"reputation": 1240, "user_id": 4016626, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/seLmU.png?s=128&g=1", "display_name": "Shubham Batra", "link": "https://stackoverflow.com/users/4016626/shubham-batra"}, "edited": false, "score": 0, "creation_date": 1460623398, "post_id": 34189980, "comment_id": 60832224, "body": "@Pol I am also having the same problem. I want the depth of a particular coordinate in the color image. What I am doing is that I am tracking a ball in color image using opencv which gives me the center coordinates of ball in color frame, now I want to get the depth of the center coordinate of the ball.So far what I have done is, <code>MapColorFrameToDepthSpace()</code> and after that get the depth coordinate coressponding to the color coordinate of ball and then get the depth value from depth frame from the mapped coordinate. But the result that I am getting is somehow not Correct."}, {"owner": {"reputation": 1240, "user_id": 4016626, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/seLmU.png?s=128&g=1", "display_name": "Shubham Batra", "link": "https://stackoverflow.com/users/4016626/shubham-batra"}, "edited": false, "score": 0, "creation_date": 1460623533, "post_id": 34189980, "comment_id": 60832331, "body": "@Pol If you were able to get the thing done, can you post it here how you did it?"}, {"owner": {"reputation": 276, "user_id": 4905645, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/47760f73bbc87016def7dee79baabf7b?s=128&d=identicon&r=PG&f=1", "display_name": "Pol", "link": "https://stackoverflow.com/users/4905645/pol"}, "edited": false, "score": 0, "creation_date": 1461267859, "post_id": 34189980, "comment_id": 61134389, "body": "Not really, Shubham... Per the explanation given by HenningJ there is no real way to accomplish this. Sorry!"}], "answers": [{"comments": [{"owner": {"reputation": 5540, "user_id": 4814427, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XIE7P.jpg?s=128&g=1", "display_name": "Rafaf Tahsin", "link": "https://stackoverflow.com/users/4814427/rafaf-tahsin"}, "edited": false, "score": 1, "creation_date": 1449756558, "post_id": 34201938, "comment_id": 56152399, "body": "Please forgive me if I&#39;m wrong, but So far I know ... <code>ColorSpacePoint</code> and <code>DepthSpacePoint</code> are just 2D points in 2D plane. They just have different ratio at their Width and Height. If it&#39;s true, then, mapping those considering their ratio should be possible. Also, <a href=\"https://msdn.microsoft.com/en-us/library/windowspreview.kinect.depthspacepoint.aspx\" rel=\"nofollow noreferrer\"><code>DepthSpacePoint</code></a> and <a href=\"https://msdn.microsoft.com/en-us/library/windowspreview.kinect.cameraspacepoint.aspx\" rel=\"nofollow noreferrer\"><code>CameraSpacePoint</code></a> aren&#39;t same."}, {"owner": {"reputation": 2979, "user_id": 242679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/943180c2c20ad3cbedcf6d4b1ac02278?s=128&d=identicon&r=PG", "display_name": "HenningJ", "link": "https://stackoverflow.com/users/242679/henningj"}, "reply_to_user": {"reputation": 5540, "user_id": 4814427, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XIE7P.jpg?s=128&g=1", "display_name": "Rafaf Tahsin", "link": "https://stackoverflow.com/users/4814427/rafaf-tahsin"}, "edited": false, "score": 1, "creation_date": 1449758770, "post_id": 34201938, "comment_id": 56154047, "body": "Sure, just mapping between those ratios is not a problem. But mapping between depth and color space is not just a straight pixel mapping. Because of the different camera positions, the depth plays a role in the mapping and must be considered."}, {"owner": {"reputation": 2979, "user_id": 242679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/943180c2c20ad3cbedcf6d4b1ac02278?s=128&d=identicon&r=PG", "display_name": "HenningJ", "link": "https://stackoverflow.com/users/242679/henningj"}, "reply_to_user": {"reputation": 5540, "user_id": 4814427, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XIE7P.jpg?s=128&g=1", "display_name": "Rafaf Tahsin", "link": "https://stackoverflow.com/users/4814427/rafaf-tahsin"}, "edited": false, "score": 1, "creation_date": 1449759042, "post_id": 34201938, "comment_id": 56154228, "body": "And yes, <code>DepthSpacePoint</code> and <code>CameraSpacePoint</code> are different data structures. But they are directly related. For each DepthSpacePoint (and the corresponding depth value), you can directly calculated the matching CameraSpacePoint. They basically hold the same information, just in a different format."}, {"owner": {"reputation": 276, "user_id": 4905645, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/47760f73bbc87016def7dee79baabf7b?s=128&d=identicon&r=PG&f=1", "display_name": "Pol", "link": "https://stackoverflow.com/users/4905645/pol"}, "edited": false, "score": 0, "creation_date": 1449773353, "post_id": 34201938, "comment_id": 56163189, "body": "@HenningJ I understand that the two spaces are slightly misaligned because they come from different cameras. However if there is a way to map from DepthSpace to ColorSpace why can&#39;t there be a way to go in the opposite direction?"}, {"owner": {"reputation": 2979, "user_id": 242679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/943180c2c20ad3cbedcf6d4b1ac02278?s=128&d=identicon&r=PG", "display_name": "HenningJ", "link": "https://stackoverflow.com/users/242679/henningj"}, "edited": false, "score": 0, "creation_date": 1449831498, "post_id": 34201938, "comment_id": 56187688, "body": "Because the DepthSpace has 3D information, while the ColorSpace only has 2D information. And the 3D information is necessary for the correct mapping. I added an image to my answer, hopefully explaining it better."}, {"owner": {"reputation": 276, "user_id": 4905645, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/47760f73bbc87016def7dee79baabf7b?s=128&d=identicon&r=PG&f=1", "display_name": "Pol", "link": "https://stackoverflow.com/users/4905645/pol"}, "edited": false, "score": 0, "creation_date": 1449885060, "post_id": 34201938, "comment_id": 56214227, "body": "Thanks! That explains things :)"}], "tags": [], "owner": {"reputation": 2979, "user_id": 242679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/943180c2c20ad3cbedcf6d4b1ac02278?s=128&d=identicon&r=PG", "display_name": "HenningJ", "link": "https://stackoverflow.com/users/242679/henningj"}, "is_accepted": true, "score": 5, "last_activity_date": 1449831390, "last_edit_date": 1449831390, "creation_date": 1449750587, "answer_id": 34201938, "question_id": 34189980, "link": "https://stackoverflow.com/questions/34189980/colorspacepoint-to-depthspacepoint/34201938#34201938", "title": "ColorSpacePoint to DepthSpacePoint", "body": "<p>There is no method in the SDK that maps a single <code>ColorSpacePoint</code> to the <code>DepthSpace</code> (or to the <code>CameraSpace</code>). And there can't be! To get the correct mapping, you don't only need the pixel coordinates, but also the depth at that specific pixel. And in the RGB image, you don't have that information.</p>\n\n<p>To achieve a correct mapping from color space to depth or camera space, you first have to map the <em>complete</em> depth image to the color image, to get depth values for each color pixel. Then it would be easy map a single pixel from color to depth space. But by then you have the complete mapping anyway.</p>\n\n<p>So, if you really need to go in that direction, you need to map the whole image using <a href=\"https://msdn.microsoft.com/en-us/library/windowspreview.kinect.coordinatemapper.mapcolorframetocameraspace.aspx\" rel=\"nofollow noreferrer\"><code>CoordinateMapper.MapColorFrameToCameraSpace</code></a>.</p>\n\n<p>On the other hand, when you are in the depth or camera space, you already have all the information you need at each pixel, so mapping single pixels is easy. That's why those methods exist (e.g. <a href=\"https://msdn.microsoft.com/en-us/library/windowspreview.kinect.coordinatemapper.mapdepthpointtocameraspace.aspx\" rel=\"nofollow noreferrer\"><code>CoordinateMapper.MapDepthPointToCameraSpace</code></a>).</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I hope a little drawing can help explain why the depth is needed to get a correct mapping between color and depth space:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GDWCS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GDWCS.png\" alt=\"enter image description here\"></a></p>\n\n<p>One of the color camera's pixels is looking at the blue object (the solid blue arrow). This pixel is mapped to a specific pixel of the depth camera (solid red arrow).</p>\n\n<p>If the object wasn't there, the same pixel of the color camera would be looking at the background (dashed blue arrow), which would be mapped to a different pixel in the depth camera (dashed red arrow - different direction of the arrows means different pixels). </p>\n\n<p>But the color camera doesn't know if it's looking at the object or the background. It just knows which color is there. Not how far away that color is. That's why the color camera alone can't decide which is the correct pixel in the depth camera.</p>\n\n<p>The depth camera, on the other hand, knows the distance at each pixel, so it can figure out the corresponding pixel in the color camera.</p>\n"}], "owner": {"reputation": 276, "user_id": 4905645, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/47760f73bbc87016def7dee79baabf7b?s=128&d=identicon&r=PG&f=1", "display_name": "Pol", "link": "https://stackoverflow.com/users/4905645/pol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1054, "favorite_count": 5, "accepted_answer_id": 34201938, "answer_count": 1, "score": 2, "last_activity_date": 1449831390, "creation_date": 1449699173, "question_id": 34189980, "link": "https://stackoverflow.com/questions/34189980/colorspacepoint-to-depthspacepoint", "title": "ColorSpacePoint to DepthSpacePoint", "body": "<p>I am trying to map a single ColorSpacePoint to a DepthSpacePoint in the Kinect SDK 2.0.</p>\n\n<p>If understand the three types of coordinate systems Kinect provides, this should be a pretty easy mapping. Both ColorSpace and DepthSpace are 2 dimensional spaces they just have different resolutions and aspect ratios. </p>\n\n<p>However, I cannot figure out which function in CoordinateMapper would receive a specific ColorSpacePoint and return the associated DepthSpacePoint.</p>\n\n<p>Can anybody shed some light on this matter?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "multithreading", "mfc"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1449701015, "post_id": 34189871, "comment_id": 56127231, "body": "All UI operations must occur from the same thread, Windows isn&#39;t set up to work any other way. And any complex data structure, even something as simple as a CString, needs to be protected against simultaneous access between threads."}, {"owner": {"reputation": 73, "user_id": 5661346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b414dcb3adae6fad0e572d3bf6420c5?s=128&d=identicon&r=PG&f=1", "display_name": "bluebass44", "link": "https://stackoverflow.com/users/5661346/bluebass44"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1449703305, "post_id": 34189871, "comment_id": 56128186, "body": "I understand, I guess what I am really asking is if the UI is a parent thread or if it is just another child."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1449704016, "post_id": 34189871, "comment_id": 56128454, "body": "MFC will assume it&#39;s being run from the parent thread, and to avoid trouble it would be safest to stick to that."}, {"owner": {"reputation": 73, "user_id": 5661346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b414dcb3adae6fad0e572d3bf6420c5?s=128&d=identicon&r=PG&f=1", "display_name": "bluebass44", "link": "https://stackoverflow.com/users/5661346/bluebass44"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1449704629, "post_id": 34189871, "comment_id": 56128677, "body": "Makes sense.  Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5661346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b414dcb3adae6fad0e572d3bf6420c5?s=128&d=identicon&r=PG&f=1", "display_name": "bluebass44", "link": "https://stackoverflow.com/users/5661346/bluebass44"}, "edited": false, "score": 0, "creation_date": 1449700482, "post_id": 34190186, "comment_id": 56126986, "body": "Perhaps I have been ineffective at communicating my issue.  On the first execution cycle B is waiting for A.  But on the second and further cycle, A is collecting information, while B is analyzing the previous cycle from A.  They must both be working simultaneously because there is not enough time for both operations to complete sequentially."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 73, "user_id": 5661346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b414dcb3adae6fad0e572d3bf6420c5?s=128&d=identicon&r=PG&f=1", "display_name": "bluebass44", "link": "https://stackoverflow.com/users/5661346/bluebass44"}, "edited": false, "score": 0, "creation_date": 1449701669, "post_id": 34190186, "comment_id": 56127508, "body": "Then the code that collects information should dispatch the analysis of the information when it finishes collecting it. You shouldn&#39;t have a thread waiting around for something to happen so that it can tell another thread to do something."}, {"owner": {"reputation": 73, "user_id": 5661346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b414dcb3adae6fad0e572d3bf6420c5?s=128&d=identicon&r=PG&f=1", "display_name": "bluebass44", "link": "https://stackoverflow.com/users/5661346/bluebass44"}, "edited": false, "score": 0, "creation_date": 1449703189, "post_id": 34190186, "comment_id": 56128144, "body": "ok thank you.  That is helpful.  So basically, I interpret that answer as saying that as each thread completes its task it should be destroyed.  Then another should be created to do the same task a short time later.  Is that correct?  Also, is the overhead significant in terms of time to create threads and destroy them?  Keep in mind I will be racing against the clock.  FYI, a 168 byte chunk of information is coming in every 8ms."}, {"owner": {"reputation": 73, "user_id": 5661346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b414dcb3adae6fad0e572d3bf6420c5?s=128&d=identicon&r=PG&f=1", "display_name": "bluebass44", "link": "https://stackoverflow.com/users/5661346/bluebass44"}, "edited": false, "score": 0, "creation_date": 1449703610, "post_id": 34190186, "comment_id": 56128291, "body": "Those chunks will be collected for roughly 1 second and then sent onto the analyze portion.  Then repeat."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 73, "user_id": 5661346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b414dcb3adae6fad0e572d3bf6420c5?s=128&d=identicon&r=PG&f=1", "display_name": "bluebass44", "link": "https://stackoverflow.com/users/5661346/bluebass44"}, "edited": false, "score": 0, "creation_date": 1449705222, "post_id": 34190186, "comment_id": 56128918, "body": "@bluebass44 No, the thread should not be destroyed. The thread should go on to do the next thing that needs to be done. Why destroy a perfectly good thread?"}, {"owner": {"reputation": 73, "user_id": 5661346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b414dcb3adae6fad0e572d3bf6420c5?s=128&d=identicon&r=PG&f=1", "display_name": "bluebass44", "link": "https://stackoverflow.com/users/5661346/bluebass44"}, "edited": false, "score": 0, "creation_date": 1449705893, "post_id": 34190186, "comment_id": 56129139, "body": "ok lets try again in a different way...So if a thread does all 3 functions (collect, analyze and send).  In theory could I just have 2 threads doing the exact same thing just offset in time?  In other words  thread (T) 1 is collecting information and when it finishes collecting I fire off T2 that starts collecting while T1 analyzes and sends?  Then if T1 is complete sending when T2 finishes collecting, T1 begins collecting again and the cycle repeats?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 73, "user_id": 5661346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b414dcb3adae6fad0e572d3bf6420c5?s=128&d=identicon&r=PG&f=1", "display_name": "bluebass44", "link": "https://stackoverflow.com/users/5661346/bluebass44"}, "edited": false, "score": 0, "creation_date": 1449706126, "post_id": 34190186, "comment_id": 56129231, "body": "Sure. You can have a queue of work that needs to be done and a pool of threads that service that queue."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1449699915, "creation_date": 1449699915, "answer_id": 34190186, "question_id": 34189871, "link": "https://stackoverflow.com/questions/34189871/threading-the-fastest-way-to-handle-reoccuring-threads/34190186#34190186", "title": "Threading - The fastest way to handle reoccuring threads?", "body": "<p>Any threads you need should already be running, waiting for work. You should not create or join threads.</p>\n\n<p>If job A has to finish before job B can start, the completion of job A should trigger the start of job B. That is, when the thread doing job A finished doing job A, it should either do job B itself or trigger the dispatch of job B. There shouldn't need to be some other thread that's waiting for job A to finish so that it can start job B.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 1, "last_activity_date": 1449736921, "creation_date": 1449736921, "answer_id": 34197176, "question_id": 34189871, "link": "https://stackoverflow.com/questions/34189871/threading-the-fastest-way-to-handle-reoccuring-threads/34197176#34197176", "title": "Threading - The fastest way to handle reoccuring threads?", "body": "<p>Think about functionnal problem before thinking about implementation.</p>\n\n<p>So we have a continuous flow of data that need to be collected, analyzed and sent elsewhere, with a supervision point to be able to stop of pause the process.</p>\n\n<ul>\n<li>collection should be limited by the input flow</li>\n<li>analyze should only be cpu limited</li>\n<li>sending should be io bound</li>\n</ul>\n\n<p>You just need to make sure that the slowest part must be collection.</p>\n\n<p>That is a correct use case for threads. Implementation could use:</p>\n\n<ul>\n<li>a pool of <em>input buffers</em> that would be filled by collect task and used by analyze task</li>\n<li>one thread that continuously:\n\n<ul>\n<li>controls if it should exit (a dedicated variable)</li>\n<li>takes an input object from the pool</li>\n<li>fills it with data</li>\n<li>passes it to analyze task</li>\n</ul></li>\n<li><p>one thread that continuously</p>\n\n<ul>\n<li>waits for the first of an input object from collect task and a request to exit</li>\n<li>analyzes the object and prepares output</li>\n<li>send the output</li>\n</ul>\n\n<p>Optionnaly, you can have a separate thread for processing the output. In that case, the last lines becomes</p>\n\n<ul>\n<li>passes an output object to the sending task</li>\n</ul>\n\n<p>and we must add:</p></li>\n<li><p>one thread that continuously</p>\n\n<ul>\n<li>waits for the first of an output object from analze task and a request to exit</li>\n<li>send the output</li>\n</ul></li>\n</ul>\n\n<p>And you must provide a way to signal the request for pause or exit, either with a completely external program and a signalisation mechanism, or a GUI thread</p>\n"}], "owner": {"reputation": 73, "user_id": 5661346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b414dcb3adae6fad0e572d3bf6420c5?s=128&d=identicon&r=PG&f=1", "display_name": "bluebass44", "link": "https://stackoverflow.com/users/5661346/bluebass44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 34197176, "answer_count": 2, "score": 1, "last_activity_date": 1449736921, "creation_date": 1449698727, "last_edit_date": 1449733597, "question_id": 34189871, "link": "https://stackoverflow.com/questions/34189871/threading-the-fastest-way-to-handle-reoccuring-threads", "title": "Threading - The fastest way to handle reoccuring threads?", "body": "<p>I am writing my first threaded application for an industrial machine that has a very fast line speed.  I am using the MFC for the UI and once the user pushes the \"Start\" machine button, I need to be simultaneously executing three operations.  I need to collect data, process it and output results very quickly as well as checking to see if the user has turned the machine \"off\".  When I say very quickly, I expect the analyze portion of the execution to take the longest and it needs to happen in well under a second.  I am mostly concerned about overhead elimination associated with threads.  What is the fastest way to implement the loop below:</p>\n\n<pre><code>void Scanner(CString&amp; m_StartStop) {\n\n    std::thread Collect(CollectData);\n\n    while (m_StartStop == \"Start\") {\n\n         Collect.join();\n         std::thread Analyze(AnalyzeData);\n         std::thread Collect(CollectData);\n\n         Analyze.join();\n         std::thread Send(SendData);\n         Send.join();\n     }\n}\n</code></pre>\n\n<p>I realize this sample is likely way off base, but hopefully it gets the point across.  Should I be creating three threads and suspending them instead of creating and joining them over and over?  Also, I am a little unclear if the UI needs its own thread since the user needs to able to pause or stop the line at anytime.  </p>\n\n<p>In case anyone is wondering why this needs to be threaded as opposed to sequential, the answer is that the line speed of the machine will cause the need to be collecting data for the second part while the first part is being analyzed.  Every 1 second equates to 3 ft of linear part movement down this machine.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1449699193, "post_id": 34189711, "comment_id": 56126357, "body": "Are you in essence are asking how to implement <code>self_t</code>?"}, {"owner": {"reputation": 3092, "user_id": 701263, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f145997aeec8662800ea27abbe7e796a?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/701263/kyle"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1449699520, "post_id": 34189711, "comment_id": 56126525, "body": "Yes. Or a way to get this to work without each derived class having to create two classes."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1452283602, "post_id": 34189711, "comment_id": 57116717, "body": "I do not quite understand why to return <code>shared_ptr</code> instead of raw pointer?"}, {"owner": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1452284428, "post_id": 34189711, "comment_id": 57117154, "body": "@Slava, as long as you still using the object and there is a new pointer to it, you don&#39;t want reference count reaching 0."}], "answers": [{"comments": [{"owner": {"reputation": 3092, "user_id": 701263, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f145997aeec8662800ea27abbe7e796a?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/701263/kyle"}, "edited": false, "score": 2, "creation_date": 1452288213, "post_id": 34681814, "comment_id": 57119173, "body": "The idea is that <code>MyBase</code> would have only <code>addChild</code> and no <code>doSomething</code>, and <code>MyDerived1</code> would have the <code>doSomething</code> and inherit <code>addChild</code>, but the result of <code>addChild</code> would return a <code>std::shared_ptr&lt;MyDerived1&gt;</code>. I don&#39;t want to have to overload <code>addChild</code> in <code>MyDerived1</code>."}, {"owner": {"reputation": 1089, "user_id": 746845, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de7558eef3e153f0f69e99717932c8bc?s=128&d=identicon&r=PG", "display_name": "emsworth", "link": "https://stackoverflow.com/users/746845/emsworth"}, "reply_to_user": {"reputation": 3092, "user_id": 701263, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f145997aeec8662800ea27abbe7e796a?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/701263/kyle"}, "edited": false, "score": 0, "creation_date": 1452308019, "post_id": 34681814, "comment_id": 57124901, "body": "I see what you&#39;re saying, I just can&#39;t think of a good way to make it work exactly like you suggest.  In my very humble opinion, you might consider going back to the drawing board and rework your OO design.  But I&#39;ll be curious to see what others come up with.  Good luck!"}, {"owner": {"reputation": 3092, "user_id": 701263, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f145997aeec8662800ea27abbe7e796a?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/701263/kyle"}, "edited": false, "score": 0, "creation_date": 1452342421, "post_id": 34681814, "comment_id": 57132873, "body": "I&#39;m 100% open to suggestions on my design decision and if I find that it suits my purposes, I&#39;ll accept it as the answer."}], "tags": [], "owner": {"reputation": 1089, "user_id": 746845, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de7558eef3e153f0f69e99717932c8bc?s=128&d=identicon&r=PG", "display_name": "emsworth", "link": "https://stackoverflow.com/users/746845/emsworth"}, "is_accepted": false, "score": 0, "last_activity_date": 1452280075, "last_edit_date": 1452280075, "creation_date": 1452270901, "answer_id": 34681814, "question_id": 34189711, "link": "https://stackoverflow.com/questions/34189711/subclass-of-class-that-inherits-from-enable-shared-from-this-returning-shared-pt/34681814#34681814", "title": "Subclass of class that inherits from enable_shared_from_this returning shared_ptr of self", "body": "<p>Here is an example of what you may be trying to accomplish (though I'm not sure I 100% understood your requirements or reasoning for this design).  Hope it helps...</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;vector&gt;\n\nclass MyBase;\ntypedef std::shared_ptr&lt;MyBase&gt; MyBaseSharedPtr;\n\nclass MyBase : public std::enable_shared_from_this&lt;MyBase&gt; {\n        public:\n                MyBaseSharedPtr getPtr() { return shared_from_this(); }\n                virtual MyBaseSharedPtr doSomething() { return getPtr(); };\n                virtual MyBaseSharedPtr addChild(MyBaseSharedPtr child) { return getPtr(); };\n};\n\nclass MyDerived1 : public MyBase {\n        private:\n                std::vector&lt;MyBaseSharedPtr&gt; container;\n        public:\n                MyBaseSharedPtr addChild(MyBaseSharedPtr child) {\n                        container.push_back(child);\n                        std::cout &lt;&lt; \"class MyDerived1: adding child\\n\";\n                        return getPtr();\n                };\n\n                virtual MyBaseSharedPtr  doSomething() {\n                        std::cout &lt;&lt; \"class MyDerived1: doing something\\n\";\n                        return getPtr();\n                }\n};\n\nclass MyDerived2 : public MyDerived1 {\n        public:\n                MyBaseSharedPtr doSomething() {\n                        std::cout &lt;&lt; \"class MyDerived2: doing something\\n\";\n                        return getPtr();\n                }\n};\n\nint main(void ) {\n        MyBaseSharedPtr myBase = std::make_shared&lt;MyBase&gt;();\n        MyBaseSharedPtr myDerived2 = std::make_shared&lt;MyDerived2&gt;();\n        myDerived2-&gt;addChild(myBase)-&gt;doSomething();\n        return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3092, "user_id": 701263, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f145997aeec8662800ea27abbe7e796a?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/701263/kyle"}, "edited": false, "score": 1, "creation_date": 1452288283, "post_id": 34684991, "comment_id": 57119225, "body": "I don&#39;t understand your code or how this applies to my question, sorry. Can you show an example where a class extends from class <code>A</code> and <code>doSomething</code> would return a <code>shared_ptr</code> to the derived class without overriding <code>doSomething</code>?"}, {"owner": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "reply_to_user": {"reputation": 3092, "user_id": 701263, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f145997aeec8662800ea27abbe7e796a?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/701263/kyle"}, "edited": false, "score": 0, "creation_date": 1452290438, "post_id": 34684991, "comment_id": 57120261, "body": "@Kyle, I was showing how to implement something which can both use shared_ptr and allow for chaining of calls. There is no way to do what request after the edit. Simply because if B inherits from A, then shared_ptr&lt;B&gt; does not inherit from shared_ptr&lt;A&gt;. This is not a limitation of shared_ptr itself, but rather of templates. Here&#39;s why: return type is determined at compile time.  And you want the return type to match the run-time type. But at compile time the run-time type is not yet known. You can do something like this with a visitor, but visitor requires knowing all types ahead of time."}], "tags": [], "owner": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "is_accepted": false, "score": 0, "last_activity_date": 1452283232, "last_edit_date": 1452283232, "creation_date": 1452282712, "answer_id": 34684991, "question_id": 34189711, "link": "https://stackoverflow.com/questions/34189711/subclass-of-class-that-inherits-from-enable-shared-from-this-returning-shared-pt/34684991#34684991", "title": "Subclass of class that inherits from enable_shared_from_this returning shared_ptr of self", "body": "<pre><code>template&lt;typename _T&gt;\nshared_ptr&lt;_T&gt; allocate()\n{\n    shared_ptr&lt;_T&gt; ptr(new _T);\n    // this may need to be changed to \n    // something like (*typename ptr.get()).weak_this\n    // if the compiler won't accept a duck-typed _T::weak_this\n    ptr.get()-&gt;weak_this = weak_ptr&lt;_T&gt;(ptr);\n    return ptr;\n}\n\nclass A\n{\n    weak_ptr&lt;A&gt; weak_this;\n    friend shared_ptr&lt;A&gt; allocate&lt;A&gt;();\n\n    public:\n        shared_ptr&lt;A&gt; getPtr(){return weak_this.lock();}\n        shared_ptr&lt;A&gt; doSomething()\n        {\n            // do something\n            return getPtr();\n        }\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3092, "user_id": 701263, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f145997aeec8662800ea27abbe7e796a?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/701263/kyle"}, "edited": false, "score": 0, "creation_date": 1452526310, "post_id": 34713753, "comment_id": 57196178, "body": "I tried your sample code and was unable to compile it. <a href=\"http://pastebin.com/mNuMpSS5\" rel=\"nofollow noreferrer\">pastebin.com/mNuMpSS5</a> Am I missing something?"}, {"owner": {"reputation": 151, "user_id": 4225596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6bae47562fbf1187c9eb19933414e09?s=128&d=identicon&r=PG&f=1", "display_name": "Gamenotcore", "link": "https://stackoverflow.com/users/4225596/gamenotcore"}, "reply_to_user": {"reputation": 3092, "user_id": 701263, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f145997aeec8662800ea27abbe7e796a?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/701263/kyle"}, "edited": false, "score": 0, "creation_date": 1452546711, "post_id": 34713753, "comment_id": 57208471, "body": "My bad. I thought since the pre-processed file seemed correct syntax-wise it would work, it seems like there are some weird restrictions on trailing type deduction. The other option would be to just do away with the decltype and use shared_ptr&lt;current&gt; instead in the macro constructed function."}, {"owner": {"reputation": 3092, "user_id": 701263, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f145997aeec8662800ea27abbe7e796a?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/701263/kyle"}, "edited": false, "score": 0, "creation_date": 1452548524, "post_id": 34713753, "comment_id": 57209480, "body": "I dig it, thanks! Pending any other response between now and the next few days, I&#39;ll be accepting your answer for the bounty. Thanks again!"}, {"owner": {"reputation": 3092, "user_id": 701263, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f145997aeec8662800ea27abbe7e796a?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/701263/kyle"}, "edited": false, "score": 0, "creation_date": 1453225309, "post_id": 34713753, "comment_id": 57504682, "body": "I liked the first version better and implemented that one. I didn&#39;t want subclasses to have to separate their logic into two classes."}], "tags": [], "owner": {"reputation": 151, "user_id": 4225596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6bae47562fbf1187c9eb19933414e09?s=128&d=identicon&r=PG&f=1", "display_name": "Gamenotcore", "link": "https://stackoverflow.com/users/4225596/gamenotcore"}, "is_accepted": true, "score": 1, "last_activity_date": 1452641282, "last_edit_date": 1452641282, "creation_date": 1452482728, "answer_id": 34713753, "question_id": 34189711, "link": "https://stackoverflow.com/questions/34189711/subclass-of-class-that-inherits-from-enable-shared-from-this-returning-shared-pt/34713753#34713753", "title": "Subclass of class that inherits from enable_shared_from_this returning shared_ptr of self", "body": "<p>This kind of concept would be covered by extension methods which exist outside a class definition, do not violate the class permissions but can be called like a method... which exists in C# but not currently in C++. The code in C# looks like this:</p>\n\n<pre><code>// c# syntax\nnamespace MyBaseExtensions {\n    public static class MyBaseExt {\n        public static shared_ptr&lt;T&gt; getPtr&lt;T&gt;(this T self) where T : MyBase \n        {\n            return static_pointer_cast&lt;T&gt;(self.shared_from_this());\n        }\n    }\n}\n</code></pre>\n\n<p>This allows for operator chaining because each inheritance of a class line MyBase would have its own definition of the function because the function is not an inherited method but instead applied directly to each related type.</p>\n\n<p>The argument against is that extensions pollute the object with often unneeded functionality and that a standalone template function will do the same thing. The issue is that with that logic:</p>\n\n<pre><code>int main(){\n    A obja = new A();\n    C obj = new C();\n    obj-&gt;getPtr()-&gt;addChild(obja)-&gt;doSomething()\n}\n</code></pre>\n\n<p>ends up looking like</p>\n\n<pre><code>int main(){\n    A obja = new A();\n    C obj = new C();\n    doSomething(addChild(getPtr(obj),obja)); //eyeroll.\n}\n</code></pre>\n\n<p>and you would still be declaring the template functions such like</p>\n\n<pre><code>// C++ syntax\nnamespace MyBaseExtensions {\n    template&lt;typename T&gt; std::shared_ptr&lt;T&gt; getPtr&lt;T&gt;(T self)\n    {\n        return std::static_pointer_cast&lt;T&gt;(self-&gt;shared_from_this());\n    }\n}\n</code></pre>\n\n<p>As for a simple internal way of applying a template uniquely to each derived type, I am not sure of any. The reason for this is that the functionality you want is not method inheritance but that each future class inherits a template which it automatically specializes(and of which the resulting method is either not inherited or hidden.) For that purpose C++ classes would need to have non-inherited specialized public methods, which are not covered by the current access permissions public, private, and protected or template capabilities.</p>\n\n<p>I would be overjoyed to find a nice way to pull off operator chaining.</p>\n\n<p>And since I have gone and wasted your time I made an attempt at this:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;memory&gt;\n\n// 0 argument, creates an overload method (and hides parent class method)\n//           from template method func_name\n// template method specialization of a parent method does not work\n//      so we use C++11 automatic type deduction to figure the      \n//         template return type and return what the template returns\n#define FUNC_DEF_0(base, cur, func_name) \\\n    auto func_name() \\\n            -&gt; decltype(base().func_name&lt;cur&gt;()) { \\\n        return base::func_name&lt;cur&gt;(); \\\n    }\n\n// 1 argument\n#define FUNC_DEF_1(base, cur, func_name, arg1_t) \\\n    auto func_name(arg1_t param1) \\\n            -&gt; decltype(base().func_name&lt;cur&gt;(param1)) { \\\n        return base::func_name&lt;cur&gt;(param1); \\\n    }\n\n// class A\n// add to class to hide class A methods\n#define HIDE_A(current) \\\n    FUNC_DEF_0(A, current, getPtr)\n\nclass A : public std::enable_shared_from_this&lt;A&gt; {\npublic:\n    template&lt;typename _T = A&gt;\n    std::shared_ptr&lt;_T&gt; getPtr(){\n        return std::static_pointer_cast&lt;_T&gt;(shared_from_this());\n    }\n};\n\n\n// class B\n// add to class to hide class B methods with new methods\n#define HIDE_B(current) \\\n    HIDE_A(current) \\\n    FUNC_DEF_1(B, current, addChild, A)\n\nclass B : public A {\npublic:\n    std::vector&lt;A&gt; container;\n\n    template&lt;typename _T = B&gt;\n    std::shared_ptr&lt;_T&gt; addChild(A child){\n        container.push_back(child);\n        return A::getPtr&lt;_T&gt;();\n    }\n\n    HIDE_A(B); // hide A methods with B specialized methods\n\n    // Example method hiding\n    // auto getPtr() -&gt; decltype(A().getPtr&lt;B&gt;()) {\n    //     return base::getPtr&lt;B&gt;();\n    // }\n};\n\n\n// class C\n// add to class to hide class C methods\n#define HIDE_C(current) \\\n    HIDE_B(current) \\\n    FUNC_DEF_0(C, current, doSomething)\n\nclass C : public B {\npublic:\n    template&lt;typename _T = C&gt;\n    std::shared_ptr&lt;_T&gt; doSomething(){\n        // something\n        return A::getPtr&lt;_T&gt;();\n    }\n    HIDE_B(C); // hide B methods\n};\n\nint main() {\n    auto obja = std::make_shared&lt;A&gt;();\n    auto obj = std::make_shared&lt;C&gt;();\n    obj-&gt;addChild(*obja)-&gt;doSomething();\n}\n</code></pre>\n\n<p>Edit: Fixed attempt. Compiles for me.</p>\n\n<pre><code>class A;\n\nstruct virtual_enable_shared_from_this_base :\n    std::enable_shared_from_this&lt;virtual_enable_shared_from_this_base&gt; {\n    virtual ~virtual_enable_shared_from_this_base() {}\n};\n\n#define HIDE_AMix(type) \\\n    using type::getPtr;\n\ntemplate&lt;typename _T&gt;\nclass AMix : public virtual virtual_enable_shared_from_this_base {\npublic:\n    std::shared_ptr&lt;_T&gt; getPtr() {\n        auto sptr = shared_from_this();\n        return std::dynamic_pointer_cast&lt;_T&gt;(sptr);\n    }\n};\n\n#define HIDE_BMix(type) \\\n    HIDE_AMix(type) \\\n    using type::addChild;\n\ntemplate&lt;typename _T&gt;\nclass BMix : public AMix&lt;_T&gt;{\npublic:\n    std::vector&lt;std::shared_ptr&lt;A&gt;&gt; container;\n\n    std::shared_ptr&lt;_T&gt; addChild(A* child){\n        container.push_back(child-&gt;getPtr());\n        return getPtr();\n    }\n};\n\n#define HIDE_CMix(type) \\\n    HIDE_BMix(type) \\\n    using type::addChild;\n\ntemplate&lt;typename _T&gt;\nclass CMix : public BMix&lt;_T&gt;{\npublic:\n    std::shared_ptr&lt;_T&gt; doSomething(){\n        // something\n        return getPtr();\n    }\n};\n\n\nclass A : public AMix&lt;A&gt; {\npublic:\n\n};\n\nclass B : public A, public BMix&lt;B&gt; {\npublic:\n    HIDE_AMix(BMix&lt;B&gt;);\n    //using BMix&lt;B&gt;::getPtr;\n    //using BMix&lt;B&gt;::addChild;\n};\n\nclass C : public B, public CMix&lt;C&gt; {\npublic:\n    HIDE_BMix(CMix&lt;C&gt;);\n    //using CMix&lt;C&gt;::getPtr;\n    //using CMix&lt;C&gt;::addChild;\n    //using CMix&lt;C&gt;::doSomething;\n};\n\nint main() {\n    auto obja = std::make_shared&lt;B&gt;();\n    auto obj = std::make_shared&lt;C&gt;();\n    obja-&gt;getPtr();\n    obj-&gt;addChild(obja.get())-&gt;doSomething();\n}\n</code></pre>\n\n<p>Edit2: Here is another version from fiddling around with templates.</p>\n"}, {"tags": [], "owner": {"reputation": 344, "user_id": 1334719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kwbej.png?s=128&g=1", "display_name": "Matias SM", "link": "https://stackoverflow.com/users/1334719/matias-sm"}, "is_accepted": false, "score": 0, "last_activity_date": 1452550981, "creation_date": 1452550981, "answer_id": 34732247, "question_id": 34189711, "link": "https://stackoverflow.com/questions/34189711/subclass-of-class-that-inherits-from-enable-shared-from-this-returning-shared-pt/34732247#34732247", "title": "Subclass of class that inherits from enable_shared_from_this returning shared_ptr of self", "body": "<p>Based on your example, if what you really want is to be able to extend functionality without exploding multiple inheritance hierarchies and without overwriting each method everywhere, you could try composed functionality with templates. Something like this:</p>\n\n<pre><code>#include &lt;list&gt;\n#include &lt;iostream&gt;\n\nstruct Base {\n};\n\ntemplate &lt;class Parent&gt;\nstruct A : Parent {\n    std::list&lt;Parent*&gt; children;\n\n    A* addChild(Parent* child) {\n        children.push_back(child);\n        return this;\n    }\n};\n\ntemplate &lt;class Parent&gt;\nstruct B : Parent {\n    B* doSomething() {\n        std::cout &lt;&lt; \"Something\" &lt;&lt; std::endl;\n        return this;\n    }\n};\n\nint main(){\n    typedef A&lt; B&lt;Base&gt; &gt; Composed;\n    Composed a;\n    Composed b;\n    a.addChild(&amp;b)-&gt;doSomething();\n}\n</code></pre>\n\n<p>Note, however, that this has the restriction that forces a <strong>use order</strong> based on the order you compose the \"functionality\" (classes). \nThat is, in this example, you can't do:</p>\n\n<pre><code>a.doSomething()-&gt;addChild(&amp;b); //ERROR! B is not a A\n</code></pre>\n\n<p>But this would work if you declare:</p>\n\n<pre><code>typedef B&lt; A&lt;Base&gt; &gt; Composed; //Note the order of B and A\n</code></pre>\n\n<p>I don't know if it suits your needs.</p>\n\n<p>Hope this helps, at least, to enable you to think the problem in a different way.</p>\n"}], "owner": {"reputation": 3092, "user_id": 701263, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f145997aeec8662800ea27abbe7e796a?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/701263/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1034, "favorite_count": 0, "accepted_answer_id": 34713753, "answer_count": 4, "score": 4, "last_activity_date": 1452641282, "creation_date": 1449697981, "last_edit_date": 1452288415, "question_id": 34189711, "link": "https://stackoverflow.com/questions/34189711/subclass-of-class-that-inherits-from-enable-shared-from-this-returning-shared-pt", "title": "Subclass of class that inherits from enable_shared_from_this returning shared_ptr of self", "body": "<p>I'm wondering if there is anyway to do something like this pseudo code:</p>\n\n<pre><code>class A : public std::enable_shared_from_this&lt;A&gt; {\n    public:\n        std::shared_ptr&lt;self_t&gt; getPtr(){\n            return std::static_pointer_cast&lt;self_t&gt;(shared_from_this());\n        }\n};\n\nclass B : public A {\n    std::vector&lt;A&gt; container;\n\n    std::shared_ptr&lt;self_t&gt; addChild(A child){\n        container.push_back(child);\n        return getPtr();\n    }\n};\n\nclass C : public B {\n    public:\n        std::shared_ptr&lt;self_t&gt; doSomething(){\n            // something\n            return getPtr();\n        }\n};\n\nint main(){\n    A obja = new A();\n    C obj = new C();\n    obj-&gt;addChild(obja)-&gt;doSomething()\n}\n</code></pre>\n\n<p>My goal is that an object represents a view (as in the V in MVC), and for methods to be able to return itself for chained calling. Eg: <code>-&gt;setTop(0)-&gt;addChild(child1)-&gt;setBottom(0)</code>.</p>\n\n<p>I've read that it may be more approachable to do something like overloading the <code>&lt;&lt;</code> operator, but I don't see that working to well or looking very pretty.</p>\n\n<p>One thought I had was to make a macro called <code>VIEW(name,parent)</code> that would use templates to expand out, but I had issue with self-refferental default template arguments.</p>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p>-- edit --</p>\n\n<p>In a nut shell, I'm hoping to have a base class inherit from <code>enable_shared_from_this</code>. The base class would have a method such as <code>doSomething</code> that returns the shared pointer. When a derived class inherits from the base class, I want the <code>doSomething</code> method to return a shared pointer to the derived class. I want to be able to do this without overriding <code>doSomething</code> in the derived class.</p>\n"}, {"tags": ["c++", "algorithm", "graph", "dijkstra"], "comments": [{"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 1, "creation_date": 1449698678, "post_id": 34189700, "comment_id": 56126078, "body": "&quot;<i>is not working correctly</i>&quot; is not specific enough for us to help.  Please provide the information to be reproductible:  what input do you have, what output do you get, and what outpout do you expect ?"}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1449699407, "post_id": 34189700, "comment_id": 56126476, "body": "&#39;Sorry if my code spacing is weird. I always have it copy over weird&#39; There are a lot of editor out there that can format your code accordingly. As a sugestion, use it, it will be a lot easy to read."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 1, "creation_date": 1449700365, "post_id": 34189700, "comment_id": 56126927, "body": "could you tell the type of distanceArray[] and of adjacencyMatrix[][] ?"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1449702278, "post_id": 34189700, "comment_id": 56127759, "body": "Ok !  Now with your test data and usage of unsigned int, I could find the problem (see updated solution)"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 5641777, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/51425243a3c16ae3c7a76a22336ce06a?s=128&d=identicon&r=PG&f=1", "display_name": "Reaperr", "link": "https://stackoverflow.com/users/5641777/reaperr"}, "edited": false, "score": 0, "creation_date": 1449700344, "post_id": 34190074, "comment_id": 56126921, "body": "I updated it to unsigned int. The arrays are unsigned. However, it did not change my output."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 1, "last_activity_date": 1449701954, "last_edit_date": 1592644375, "creation_date": 1449699518, "answer_id": 34190074, "question_id": 34189700, "link": "https://stackoverflow.com/questions/34189700/dijkstras-algorithm-c/34190074#34190074", "title": "Dijkstra&#39;s Algorithm c++", "body": "<h2>First look:</h2>\n<p>It's difficult to be 100% sure to solve the issue, because you didn't show us the class member types nor a typical example of failure.  Nevertheless a confustion pops to the eye:  is the type of distanceArray[] <code>unsigned int</code> or <code>int</code> ?</p>\n<p>Here you assume it's unsigned:</p>\n<pre><code>distanceArray[i] = UINT_MAX;   \n</code></pre>\n<p>But later you compare this unsigned with a signed integer:</p>\n<pre><code>int min = INT_MAX, min_index;   // min is signed integer !\n\nfor (int v = 0; v &lt; numberNodes; v++)\n   if (... &amp;&amp; distanceArray[v] &lt;= min)  // when comparing signed and unsigned you might not get the expected result !!\n</code></pre>\n<p>Mismatches between signed and unsigned might lead to unexpected results in your comparison (see <a href=\"http://ideone.com/6gZarm\" rel=\"nofollow noreferrer\">online demo</a>).  To avoid this kind of issues, either you work only with unsigned values, or, change all your <code>UINT_MAX</code> to <code>INT_MAX</code>.</p>\n<h2>Solution</h2>\n<p>I could find out the problem with the additional data you provided, and switching all distances to unsigned int. You have to correct your <code>if</code>:</p>\n<pre><code>        if (!visitedSet[v] &amp;&amp; adjacencyMatrix[u][v] &amp;&amp; adjacencyMatrix[u][v] != UINT_MAX  \n            &amp;&amp; distanceArray[u] + adjacencyMatrix[u][v] &lt; distanceArray[v])\n</code></pre>\n<p>because you have to consider only existing edges (<code>adjacencyMatrix[u][v]!= UINT_MAX</code>).  In your code you made the comparison with <code>distanceArray</code>.</p>\n<p>I could run your code (outside of a class) and with your input obtain the expected output.  Here the <a href=\"http://ideone.com/sZJuYU\" rel=\"nofollow noreferrer\">online demo</a>.</p>\n"}], "owner": {"reputation": 67, "user_id": 5641777, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/51425243a3c16ae3c7a76a22336ce06a?s=128&d=identicon&r=PG&f=1", "display_name": "Reaperr", "link": "https://stackoverflow.com/users/5641777/reaperr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 0, "accepted_answer_id": 34190074, "answer_count": 1, "score": 1, "last_activity_date": 1449702955, "creation_date": 1449697940, "last_edit_date": 1449702955, "question_id": 34189700, "link": "https://stackoverflow.com/questions/34189700/dijkstras-algorithm-c", "title": "Dijkstra&#39;s Algorithm c++", "body": "<p>I am supposed to implement a Dijkstra's algorithm with an adjacency matrix and a distance array. These are implemented through the class <code>Graph300</code>. The program inputs a file with a weighted matrix and it is getting into the matrix fine. </p>\n\n<p>The distance array is outputted for the user. But my Dijkstras is not working correctly. I keep getting <code>UINT_MAX</code> for every vertex except the starting vertex (user specified) : </p>\n\n<pre><code>Input matrix (4x4):\n0           5           10           4294967295\n4294967295  0           4294967295   3\n4294967295  7           0            4294967295\n4294967295  4294967295  4            0\n\nMy distance array should output:\ndistance[0]=4294967295 -nopath\ndistance[1]=0  -startnode\ndistance[2]=7\ndistance[3]=3\n\nMy output now (that is wrong):\ndistance[0]=4294967295 -nopath\ndistance[1]=0  -startnode\ndistance[2]=4294967295\ndistance[3]=4294967295\n</code></pre>\n\n<p>Here is my algorithm; <code>numberNodes</code> is the the dimension of the vertex. <code>startNode</code> is user specified. The matrix array and distance array are of type <code>unsigned int</code>:</p>\n\n<pre><code>void Graph300::dijkstra300()\n{\n    int startNode=getStartNode300();\n\n    for (int i = 0; i &lt; numberNodes; i++)\n        distanceArray[i] = UINT_MAX;\n\n    distanceArray[startNode] = 0;\n\n    for (int count = 0; count &lt; numberNodes-1; count++)\n    {\n         unsigned int min = INT_MAX, min_index;\n\n         for (int v = 0; v &lt; numberNodes; v++)\n             if (visitedSet[v] == false &amp;&amp; distanceArray[v] &lt;= min)\n                 min = distanceArray[v], min_index = v;\n\n         int u = min_index;\n         visitedSet[u] = true;\n\n         for (int v = 0; v &lt; numberNodes; v++)\n             if (!visitedSet[v] &amp;&amp; adjacencyMatrix[u][v] &amp;&amp; distanceArray[u] != UINT_MAX\n                &amp;&amp; distanceArray[u]+adjacencyMatrix[u][v] &lt; distanceArray[v])\n                  distanceArray[v] = distanceArray[u] + adjacencyMatrix[u][v];\n    }\n    view300();  // display result\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "assembly", "mips"], "comments": [{"owner": {"reputation": 459, "user_id": 4892781, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a86bf40088979e591b1852b80d2df0c7?s=128&d=identicon&r=PG&f=1", "display_name": "Phoenix", "link": "https://stackoverflow.com/users/4892781/phoenix"}, "edited": false, "score": 1, "creation_date": 1449698333, "post_id": 34189688, "comment_id": 56125908, "body": "&gt; what the compiler do ?   check ur self"}, {"owner": {"reputation": 3124, "user_id": 631004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d8c9b1e28e202f4aea71129683fa681?s=128&d=identicon&r=PG", "display_name": "Tilo", "link": "https://stackoverflow.com/users/631004/tilo"}, "edited": false, "score": 1, "creation_date": 1449698753, "post_id": 34189688, "comment_id": 56126126, "body": "What the compiler does depends on other factors as well - such as optimization. If you compute a sum like <code>arr[1]+=arr[0]</code> but then do nothing with the result, the compiler can treat this as dead code and chose to not translate it at all. The same holds true for the compiler&#39;s decision to use registers and/or load the data from memory."}], "answers": [{"tags": [], "owner": {"reputation": 6641, "user_id": 3163618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bfab3078ba21206c78750d088cae76cf?s=128&d=identicon&r=PG&f=1", "display_name": "qwr", "link": "https://stackoverflow.com/users/3163618/qwr"}, "is_accepted": false, "score": 1, "last_activity_date": 1450296854, "creation_date": 1450296854, "answer_id": 34321237, "question_id": 34189688, "link": "https://stackoverflow.com/questions/34189688/c-to-mips-assembly/34321237#34321237", "title": "C++ to MIPS assembly", "body": "<p>There is no need to get the values from the addresses again if you have properly loaded the values into <code>$t0</code> and <code>$t1</code>. </p>\n\n<p>Compilers are very complex and what a compiler produces depends on many things, like optimization as Tilo mentioned. The best way to see is to compile it yourself and look at the code produced. </p>\n"}], "owner": {"reputation": 1, "user_id": 5490901, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208165265153867/picture?type=large", "display_name": "Ibrahim Mostafa", "link": "https://stackoverflow.com/users/5490901/ibrahim-mostafa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450296854, "creation_date": 1449697892, "last_edit_date": 1449698285, "question_id": 34189688, "link": "https://stackoverflow.com/questions/34189688/c-to-mips-assembly", "title": "C++ to MIPS assembly", "body": "<p>if i transfer this code to mips.</p>\n\n<pre><code>int arr[3];\n\ncin&gt;&gt;arr[0];\n\ncin&gt;&gt;arr[1];\n\narr[1]+=arr[0];\n\ncin&gt;&gt;arr[2];\n\narr[2]+=arr[1];\n</code></pre>\n\n<p>if i have value of arr[0] in $t0 ,arr[1] in $t1 and address of the arr in $s0.</p>\n\n<p>in this line </p>\n\n<pre><code>arr[1]+=arr[0];\n</code></pre>\n\n<p>what i should do from this ?\nuse $t1 and $t0 direct like this </p>\n\n<pre><code>add $t1,$t1,$t0\n</code></pre>\n\n<p>or i should get the value again from the memory in a registers and do the add instruction like this: </p>\n\n<pre><code>lw $s1,($S0)\n\nlw $s2,4($S0)\n\nadd $s2,$s2,$s1\n</code></pre>\n\n<p>what the compiler do ? </p>\n"}, {"tags": ["c++", "xcode", "undeclared-identifier"], "comments": [{"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 1, "creation_date": 1449697683, "post_id": 34189540, "comment_id": 56125576, "body": "All your headers are missing an <code>#endif</code>. Is this a copy error? Otherwise that might be the source..."}, {"owner": {"reputation": 123, "user_id": 5661225, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TN0IV.jpg?s=128&g=1", "display_name": "gsamerica", "link": "https://stackoverflow.com/users/5661225/gsamerica"}, "reply_to_user": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1449698936, "post_id": 34189540, "comment_id": 56126221, "body": "That is a copy error, I have those in my program."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1449700877, "post_id": 34189540, "comment_id": 56127170, "body": "This can happen if, for instance, &quot;NoSplit.hpp&quot; <code>#include</code>s &quot;StartStack.hpp&quot;. Remember that <code>#include</code> only means &quot;insert the contents of this file here&quot;, it is not cleverer than that."}, {"owner": {"reputation": 1, "user_id": 10732476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84ccc68b151641f92b7dff4286e7df6b?s=128&d=identicon&r=PG&f=1", "display_name": "jpmguitars", "link": "https://stackoverflow.com/users/10732476/jpmguitars"}, "edited": false, "score": 0, "creation_date": 1543686328, "post_id": 34189540, "comment_id": 94013207, "body": "This probably happens because you have circular references; I mean you can&#39;t reference a class that uses the class you&#39;re currently working on."}], "owner": {"reputation": 123, "user_id": 5661225, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TN0IV.jpg?s=128&g=1", "display_name": "gsamerica", "link": "https://stackoverflow.com/users/5661225/gsamerica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 916, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543686328, "creation_date": 1449697357, "last_edit_date": 1449698986, "question_id": 34189540, "link": "https://stackoverflow.com/questions/34189540/use-of-undeclared-identifier-when-the-file-is-included-in-xcode", "title": "&quot;Use of undeclared identifier&quot; when the file is #included in Xcode", "body": "<p>I am designing a card game program. </p>\n\n<p>In it, the StartStack is a \"deck\" of cards, StartCard is the card that begins on the bottom of the deck, and AnimalCard and ActionCard are types of cards that can be added to the deck. However, I am getting some very strange errors in Xcode.</p>\n\n<p>Here are my classes:</p>\n\n<p>StartStack.hpp:</p>\n\n<pre><code>#ifndef StartStack_hpp\n#define StartStack_hpp\n\n// Imports of other classes\n#include \"AnimalCard.h\"\n#include \"StartCard.hpp\"\nclass ActionCard;\n\n// Imports of frameworks\n#include &lt;deque&gt;\n#include &lt;stdio.h&gt;\n#include &lt;memory&gt;\n\nclass StartStack : public AnimalCard{\n\nprivate:\n\n    deque&lt;shared_ptr&lt;AnimalCard&gt; &gt; sstack;\n    StartCard scard;\n\npublic:\n\n    StartStack();\n    StartStack&amp; operator+= ( std::shared_ptr&lt;ActionCard&gt; );\n    StartStack&amp; operator-= ( std::shared_ptr&lt;ActionCard&gt; );\n    std::shared_ptr&lt;StartCard&gt; getStartCard();\n    char getAnimals(int);\n    std::shared_ptr&lt;ActionCard&gt; pop_front() { return sstack.pop_front(); }\n    std::shared_ptr&lt;ActionCard&gt; remove_front();\n};\n</code></pre>\n\n<p>Errors for this class:</p>\n\n<ul>\n<li>Line 29 (\"public:\") I am getting an \"unknown type name StartCard\" error</li>\n<li>Line 36 (\"std::shared_ptr pop_front() { return sstack.pop_front();\") I am getting a \"use of undeclared identifier StartCard error.\" </li>\n</ul>\n\n<p>StartCard.hpp:</p>\n\n<pre><code>#ifndef StartCard_hpp\n#define StartCard_hpp\n\n// Imports of other classes\n#include \"NoSplit.hpp\"\n\n// Imports of frameworks\n#include &lt;stdio.h&gt;\n#include &lt;deque&gt;\n\nclass StartCard : public NoSplit{\n\npublic:\n\n    StartCard();\n    char getAnimals(int index){return c;};\n};\n</code></pre>\n\n<p>ActionCard.h:</p>\n\n<pre><code>// Imports of other classes\n#include \"QueryResult.hpp\"\n#include \"Player.hpp\"\n#include \"NoSplit.hpp\"\n#include \"Table.hpp\"\n\nclass ActionCard : public NoSplit{\n\npublic:\n\n    virtual QueryResult query() = 0;\n    virtual void perform(Table&amp;, Player*, QueryResult ) = 0;\n};\n</code></pre>\n\n<p>Errors for this class:</p>\n\n<ul>\n<li>Line 21 (in between \"public:\" and \"virtual QueryResult query() = 0;\" - an empty line) I am getting \"unknown type name Table\"</li>\n</ul>\n\n<p>AnimalCard.h is a virtual class with a few methods relating to cards, and QueryResult, thus far, is empty with just a constructor that holds nothing. Player.hpp and NoSplit.hpp are compiling just fine as well.</p>\n\n<p>I have looked into related errors in Xcode and haven't come across anything related to the issues I'm having. If anyone could suggest something that might help it would be much appreciated.</p>\n"}, {"tags": ["c++", "templates", "c++11", "vector"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1449702177, "post_id": 34189482, "comment_id": 56127716, "body": "According to the examples in [temp.inst]/4, this declaration doesn&#39;t cause instantiation"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449702359, "post_id": 34190554, "comment_id": 56127792, "body": "I&#39;m not so sure that calling this requires instantiation if you still don&#39;t use anything in the class  , e.g. in your example if <code>i.f2</code> also accepted the vector by reference"}], "tags": [], "owner": {"reputation": 799, "user_id": 698679, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7d8e7ba1c6d9226662788db8a1ada2b5?s=128&d=identicon&r=PG", "display_name": "alangab", "link": "https://stackoverflow.com/users/698679/alangab"}, "is_accepted": true, "score": 2, "last_activity_date": 1449706740, "last_edit_date": 1449706740, "creation_date": 1449701619, "answer_id": 34190554, "question_id": 34189482, "link": "https://stackoverflow.com/questions/34189482/reference-or-pointer-to-stdvector-of-incomplete-type/34190554#34190554", "title": "Reference or pointer to std::vector of incomplete type", "body": "<p>The declaration is correct, so long as you don't call <code>f2</code>.</p>\n\n<p>The compiler doesn't need to know the internal of <code>Result</code> class if you don't call <code>f2</code>. There's no storage allocation in the declaration.</p>\n\n<p>If some compilation unit call <code>f2</code>, you need to supply the complete type for <code>Result</code> class, or you need another reference parameter to call <code>f2</code>:</p>\n\n<pre><code>void another_f(SomeAlgoInterface&amp; i, std::vector&lt;Result&gt;&amp; results)\n{\n    i.f2(results);  \n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 5661227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BhKIY.png?s=128&g=1", "display_name": "ykim", "link": "https://stackoverflow.com/users/5661227/ykim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 4, "accepted_answer_id": 34190554, "answer_count": 1, "score": 7, "last_activity_date": 1449706740, "creation_date": 1449697102, "last_edit_date": 1495541243, "question_id": 34189482, "link": "https://stackoverflow.com/questions/34189482/reference-or-pointer-to-stdvector-of-incomplete-type", "title": "Reference or pointer to std::vector of incomplete type", "body": "<p>As answered here: <a href=\"https://stackoverflow.com/questions/31345193/how-can-an-incomplete-type-be-used-as-a-template-parameter-to-vector-here\">How can an incomplete type be used as a template parameter to vector here?</a> usage of incomplete type as template argument when instantiating a template component can result in undefined behaviour. But does that rule hold true when we have only pointer/reference to template component with incomplete type as argument? Does the instatiation happen in this case too?</p>\n\n<p>For example: </p>\n\n<pre><code>// SomeAlgoInterface.hpp\n\n#include &lt;vector&gt; \n\nstruct Result; // forward declaration\n\nclass SomeAlgoInterface\n{\n  public:\n\n   virtual ~SomeAlgoInterface() = default; \n\n  public:\n\n    // the following line is definitely OK, ...\n    virtual void f1(const Result &amp; result) = 0; \n\n    // ... but I'm not quite sure about the following one\n    virtual void f2(const std::vector&lt;Result&gt; &amp; results) = 0; \n};\n</code></pre>\n\n<p>In other words, is the code above valid or not? </p>\n"}, {"tags": ["c++", "arrays", "for-loop", "crash"], "comments": [{"owner": {"reputation": 14254, "user_id": 1663383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3aaf8438a71124d393af5af486a7e78b?s=128&d=identicon&r=PG", "display_name": "Draco18s no longer trusts SE", "link": "https://stackoverflow.com/users/1663383/draco18s-no-longer-trusts-se"}, "edited": false, "score": 0, "creation_date": 1449697258, "post_id": 34189428, "comment_id": 56125353, "body": "Knowing what the crash is is important.  But I suspect it is because the program is trying to read input from cin (which is a string) and store it into a double (which it can&#39;t do implicitly)."}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 2, "creation_date": 1449697276, "post_id": 34189428, "comment_id": 56125363, "body": "<code>std::cout &lt;&lt; arrName[3]</code> leads to undefined behaviour (<code>arrNames</code> has only 3 elements, not 4)."}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1449697400, "post_id": 34189428, "comment_id": 56125413, "body": "Wait, why does &#180;return 0` even compile, when you have to return a <code>std::string</code>?"}, {"owner": {"reputation": 5, "user_id": 5444403, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uFZvz4Jwh0E/AAAAAAAAAAI/AAAAAAAAACA/Ssf3EeTN1dA/photo.jpg?sz=128", "display_name": "Jared Fisher", "link": "https://stackoverflow.com/users/5444403/jared-fisher"}, "reply_to_user": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1449697619, "post_id": 34189428, "comment_id": 56125543, "body": "Without the return 0, I get this error when I compile it &quot;not all control paths return a value&quot; @zeta"}, {"owner": {"reputation": 5, "user_id": 5444403, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uFZvz4Jwh0E/AAAAAAAAAAI/AAAAAAAAACA/Ssf3EeTN1dA/photo.jpg?sz=128", "display_name": "Jared Fisher", "link": "https://stackoverflow.com/users/5444403/jared-fisher"}, "edited": false, "score": 0, "creation_date": 1449697839, "post_id": 34189428, "comment_id": 56125668, "body": "Thank you for pointing that out @drescherjm I didn&#39;t catch that :D"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1449697853, "post_id": 34189428, "comment_id": 56125676, "body": "<code>cout &lt;&lt; arrNames[3];</code> besides the UB will not print the array."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1449697900, "post_id": 34189428, "comment_id": 56125710, "body": "@Zeta - <code>std::string</code> has a constructor taking <code>const char*</code> which sort of matches the <code>0</code>, but crashes when fed a null pointer."}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1449698291, "post_id": 34189428, "comment_id": 56125888, "body": "@BoPersson: Yeah, I remember that one, but for a second I thought it was an explicit one. Time to go offline for today."}], "answers": [{"tags": [], "owner": {"reputation": 139, "user_id": 5478222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VO1Da.jpg?s=128&g=1", "display_name": "Dao Xio", "link": "https://stackoverflow.com/users/5478222/dao-xio"}, "is_accepted": true, "score": 0, "last_activity_date": 1449717805, "last_edit_date": 1449717805, "creation_date": 1449717400, "answer_id": 34193113, "question_id": 34189428, "link": "https://stackoverflow.com/questions/34189428/why-is-my-program-crashing-when-im-trying-to-fill-up-an-array/34193113#34193113", "title": "Why is my program crashing when I&#39;m trying to fill up an array?", "body": "<p>Please remove the semi-colon in the <code>for (x; x &lt; 12; x++);</code></p>\n\n<p>You can make it like this,</p>\n\n<pre><code>int x = 0;\nfor (x; x &lt; 12; x++)\n{\n    if ((x &gt;= 0) &amp;&amp; ( x &lt;= 3)) // setup to ask question\n    {\n        person = arrNames[0];\n    }\n    else if ((x &gt;= 4) &amp;&amp; (x &lt;= 7))\n    {\n        person = arrNames[1];\n    }\n    else\n    {\n         person = arrNames[2];\n    }\n\n\n    arrSales[x] = readSales(person, x); // Successfully gathers all 12 quarters and stores them. Yay!\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 5444403, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uFZvz4Jwh0E/AAAAAAAAAAI/AAAAAAAAACA/Ssf3EeTN1dA/photo.jpg?sz=128", "display_name": "Jared Fisher", "link": "https://stackoverflow.com/users/5444403/jared-fisher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 34193113, "answer_count": 1, "score": 0, "last_activity_date": 1449717805, "creation_date": 1449696890, "question_id": 34189428, "link": "https://stackoverflow.com/questions/34189428/why-is-my-program-crashing-when-im-trying-to-fill-up-an-array", "title": "Why is my program crashing when I&#39;m trying to fill up an array?", "body": "<p>So with this program, basically, I ask for the names of three people, and store those strings in an array. That parts seems to work fine.</p>\n\n<p>After that, I ask for their quarterly reports. So each person gets 4, and it's ordered through the array so that: </p>\n\n<p>Index 0-3 goes to person A </p>\n\n<p>Index 4-7 goes to person B </p>\n\n<p>And index 8-11 goes to person C. </p>\n\n<p>In this second for-loop that processes this second array, I have a list of if/else if statements that determine the name of the person in question that I will be asking for. In the separate function itself, readSales(), I have a similar thing set up to determine which quarter to ask for. This is designed to loop 12 times in order to get all 12 indexes filled.</p>\n\n<p>For some reason, after I input the people's names, the program crashes. Any idea why?</p>\n\n<p>Also, I know \"using namespace std;\" isn't very popular, but that's how my professor wants it so that's how I have it.  </p>\n\n<pre><code>// In this program, I will\n// (1) Ask for the names of three salespeople.\n// (2) Accept sales for each quarter (for each person).\n// (3) Display their name and total sales amount.\n\n// I will use three functions:\n// (1) main\n// (2) readInfo \n// (3) displayInfo\n\n// No global variables, and I will pass data as parameters.\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n// In order to pass an array through a void function,\n// I must create it in the main function.\n\n// So...\n\nstring readNames(int); // Function that gathers data from user.\ndouble readSales(string, int);\nvoid displayInfo(); // Function that displays final result.\n\nint main() // Our main function\n{\n    // Create my variables for arrays and final result.\n    string arrNames[3];\n    double arrSales[12], result;\n\n    // I must call my first function now.\n    for (int i = 0; i &lt; 3; i++)\n    {\n        arrNames[i] = readNames(i); // Successfully gathers all 3 names and stores them in the array. Woo!\n    }\n\n\n\n    // Now I must gather the number data, using a double array.\n    string person = \"uninitialized\";\n\n    int x = 0;\n    for (x; x &lt; 12; x++);\n    {\n        if (x &lt; 4) // setup to ask question\n            person = arrNames[0];\n        if (x &lt; 8)\n            person = arrNames[1];\n        if (x &lt; 12)\n            person = arrNames[2];\n\n        arrSales[x] = readSales(person, x); // Successfully gathers all 12 quarters and stores them. Yay!\n    }\n\n    cout &lt;&lt; arrNames[3];\n\n\n} // end function main()\n\nstring readNames(int count)\n{\n    for (count; count &lt; 3;)\n    {\n        string i;\n\n        cout &lt;&lt; \"Please input salesperson \" &lt;&lt; count + 1 &lt;&lt; \"'s name: \";\n        cin &gt;&gt; i;\n        cout &lt;&lt; endl;\n\n        return i;\n    }\n\n    return 0;\n} // end function readNames()\n\ndouble readSales(string person, int count) // reading the sales\n{\n    double i; // variable I am returning at the end of function.\n    int quarter;\n\n    if (count == 0 || count == 4 || count == 8)\n    {\n        quarter = 1;\n    }\n\n    else if (count == 1 || count == 5 || count == 9)\n    {\n        quarter = 2;\n    }\n\n    else if (count == 2 || count == 6 || count == 10)\n    {\n        quarter = 3;\n    }\n\n    else if (count == 3 || count == 7 || count == 11)\n    {\n        quarter = 4;\n    }\n    else\n        return 0;\n\n    cout &lt;&lt; \"Please input salesperson \" &lt;&lt; person &lt;&lt; \"'s sales for Quarter \" &lt;&lt; quarter &lt;&lt; \" (Please round to the nearest cent): $\" &lt;&lt; endl;\n    cin &gt;&gt; i;\n\n    return i;\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "hook", "dll-injection", "detours"], "answers": [{"comments": [{"owner": {"reputation": 1376, "user_id": 1018256, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ap4lO.gif?s=128&g=1", "display_name": "Nerdtron", "link": "https://stackoverflow.com/users/1018256/nerdtron"}, "edited": false, "score": 0, "creation_date": 1449714983, "post_id": 34189595, "comment_id": 56131797, "body": "No, this is not a library being referenced by my application.  Its a completely independent third party product which, once installed on the system, will inject itself into running processes.  The goal is to prevent it from injecting into mine."}], "tags": [], "owner": {"reputation": 799, "user_id": 698679, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7d8e7ba1c6d9226662788db8a1ada2b5?s=128&d=identicon&r=PG", "display_name": "alangab", "link": "https://stackoverflow.com/users/698679/alangab"}, "is_accepted": false, "score": 1, "last_activity_date": 1449697515, "creation_date": 1449697515, "answer_id": 34189595, "question_id": 34189349, "link": "https://stackoverflow.com/questions/34189349/preventing-a-dll-file-from-loading-into-my-process-via-ms-detours/34189595#34189595", "title": "Preventing a DLL file from loading into my process via MS Detours", "body": "<p>Probably, your code is referencing some function / export of the third part library.<br>\nOne way you can try is to use /DELAYLOAD linker option to create stub function for the imported function. </p>\n\n<p>See <a href=\"https://msdn.microsoft.com/en-us/library/151kt790.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/151kt790.aspx</a> for an explanation and requirements.</p>\n\n<p>You can even provide an helper function to handle the loading of your dll, so you don't need retour.</p>\n"}, {"comments": [{"owner": {"reputation": 1376, "user_id": 1018256, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ap4lO.gif?s=128&g=1", "display_name": "Nerdtron", "link": "https://stackoverflow.com/users/1018256/nerdtron"}, "edited": false, "score": 0, "creation_date": 1449714937, "post_id": 34189597, "comment_id": 56131783, "body": "Our app is not statically linked to the target DLL, nor are any of the dependent DLLs.  This is a completely independent third party product which, once installed on the system, will inject itself into running processes.  I&#39;m looking to prevent it from being inject in mine."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1376, "user_id": 1018256, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ap4lO.gif?s=128&g=1", "display_name": "Nerdtron", "link": "https://stackoverflow.com/users/1018256/nerdtron"}, "edited": false, "score": 1, "creation_date": 1449717214, "post_id": 34189597, "comment_id": 56132324, "body": "The only ways I know of for a DLL to inject itself into a new process before it starts running code is if 1) the DLL is listed in the <code>AppInit_DLLs</code> Registry key, or 2) another process has registered the DLL as a global hook via <code>SetWindowsHookEx()</code>."}, {"owner": {"reputation": 1376, "user_id": 1018256, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ap4lO.gif?s=128&g=1", "display_name": "Nerdtron", "link": "https://stackoverflow.com/users/1018256/nerdtron"}, "edited": false, "score": 0, "creation_date": 1449759302, "post_id": 34189597, "comment_id": 56154413, "body": "right, there are multiple ways for it to happen; in my case its happening and I&#39;d like to figure out how to prevent it.  Using Detours as I described originally I think, might work, the problem I&#39;m having is I need to have my code execute early enough so I can get in there BEFORE the third party DLL is injected."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1376, "user_id": 1018256, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ap4lO.gif?s=128&g=1", "display_name": "Nerdtron", "link": "https://stackoverflow.com/users/1018256/nerdtron"}, "edited": false, "score": 1, "creation_date": 1449769172, "post_id": 34189597, "comment_id": 56161046, "body": "You can&#39;t prevent the injection if you don&#39;t know how it is happening. Track that down. There are multiple ways of injecting, but there are only so many ways, so use process of elimination. Check your dependencies. Check the Registry. Use SysInternals ProcessMonitor to see if another app is loading the DLL before your app does. My guess is another app may be using <code>SetWindowsHookEx()</code> to globally inject the DLL into all processes. If the DLL is injecting before your code starts running, the injection cannot be prevented/detoured in your code..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1376, "user_id": 1018256, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ap4lO.gif?s=128&g=1", "display_name": "Nerdtron", "link": "https://stackoverflow.com/users/1018256/nerdtron"}, "edited": false, "score": 1, "creation_date": 1449769179, "post_id": 34189597, "comment_id": 56161052, "body": "You may have to move/delete the DLL, or kill/uninstall the injecting app (if there is one), or hook the injecting app yourself to detour SetWindowsHookEx() from loading the DLL, etc."}, {"owner": {"reputation": 1376, "user_id": 1018256, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ap4lO.gif?s=128&g=1", "display_name": "Nerdtron", "link": "https://stackoverflow.com/users/1018256/nerdtron"}, "edited": false, "score": 0, "creation_date": 1449811240, "post_id": 34189597, "comment_id": 56177631, "body": "True, if the DLL is being injected before my process starts then Detours isn&#39;t going to do it.  However, I suspect its being injected after my process starts but before my MFC app class constructor gets called.  My hope is that I can figure out a way to get my code to execute much earlier in the process lifetime.  Unfortunately MFC takes over WinMain.  So I was hoping maybe someone else had run into this and figure out how to get code executing earlier."}, {"owner": {"reputation": 1376, "user_id": 1018256, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ap4lO.gif?s=128&g=1", "display_name": "Nerdtron", "link": "https://stackoverflow.com/users/1018256/nerdtron"}, "edited": false, "score": 0, "creation_date": 1449811297, "post_id": 34189597, "comment_id": 56177644, "body": "I don&#39;t think I can go that much on the offensive against this app.  I&#39;m hoping on a more defensive approach which lets this app do what it wants otherwise, but just doesn&#39;t load into my process."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1376, "user_id": 1018256, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ap4lO.gif?s=128&g=1", "display_name": "Nerdtron", "link": "https://stackoverflow.com/users/1018256/nerdtron"}, "edited": false, "score": 1, "creation_date": 1449816696, "post_id": 34189597, "comment_id": 56179637, "body": "What makes you think the injection is occurring after your app starts running code? <b>IF</b> that is true, you might try creating a static object in global memory and have its constructor install the detour. That will run before <code>WinMain()</code> is entered. But that is still no guarantee of catching the injection if it is really that early in the process lifetime."}, {"owner": {"reputation": 1376, "user_id": 1018256, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ap4lO.gif?s=128&g=1", "display_name": "Nerdtron", "link": "https://stackoverflow.com/users/1018256/nerdtron"}, "edited": false, "score": 0, "creation_date": 1449839241, "post_id": 34189597, "comment_id": 56192458, "body": "I know the injection occurs before my MFC app class constructor gets called.  I don&#39;t know for sure the injection occurs after my app starts running code.  So its possible even at the first code my app runs its too late, but its the next thing I want to try in hopes I can get to it before it injects.  To do that, though, I need code executing early enough to at least be able to try that approach.  I think your idea about the static object is a good one.  I hadn&#39;t thought of that.  I&#39;ll give that a try."}, {"owner": {"reputation": 1376, "user_id": 1018256, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ap4lO.gif?s=128&g=1", "display_name": "Nerdtron", "link": "https://stackoverflow.com/users/1018256/nerdtron"}, "edited": false, "score": 0, "creation_date": 1449845788, "post_id": 34189597, "comment_id": 56196594, "body": "I tried using static data init (which was a great idea btw, I had forgotten about how early that gets initialized), but this was too late.  The third party DLL was already injected.  So it must be injecting itself right as the process is created meaning Detours probably isn&#39;t going to do it for me."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1376, "user_id": 1018256, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ap4lO.gif?s=128&g=1", "display_name": "Nerdtron", "link": "https://stackoverflow.com/users/1018256/nerdtron"}, "edited": false, "score": 0, "creation_date": 1449855790, "post_id": 34189597, "comment_id": 56202786, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/97666/discussion-between-remy-lebeau-and-nerdtron\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 4, "last_activity_date": 1449717180, "last_edit_date": 1449717180, "creation_date": 1449697523, "answer_id": 34189597, "question_id": 34189349, "link": "https://stackoverflow.com/questions/34189349/preventing-a-dll-file-from-loading-into-my-process-via-ms-detours/34189597#34189597", "title": "Preventing a DLL file from loading into my process via MS Detours", "body": "<p>Sounds like either:</p>\n\n<ul>\n<li><p>your app is static linking to the target DLL directly</p></li>\n<li><p>one of your app's dependent DLLs is static linking to the target DLL, or otherwise loading it while itself is being loaded.</p></li>\n<li><p>the target DLL is listed in the <code>AppInit_DLLs</code> Registry key.</p></li>\n<li><p>another process has loaded the DLL as a global hook via <code>SetWindowsHookEx()</code>, using a hook type that injects the DLL into all running processes.</p></li>\n</ul>\n\n<p>Nothing you can do to intercept the target DLL if it is being loaded before your app's code starts running.  Statically linked DLLs are loaded by the OS before the EXE's code starts running.  So only dynamically loaded DLLs can be intercepted with a detour, and only if loaded after you have installed you detour.</p>\n\n<p>You need to find where the target DLL is actually being loaded from.</p>\n\n<p>If your EXE is static linking to it directly, load it dynamically instead, either explicitly via <code>LoadLibrary()</code> in your code, or via your linker's delay-load feature (if it has one), which uses <code>LoadLibrary()</code> internally.</p>\n\n<p>If another DLL is loading it, load that DLL dynamically instead of static linking to it.</p>\n"}], "owner": {"reputation": 1376, "user_id": 1018256, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Ap4lO.gif?s=128&g=1", "display_name": "Nerdtron", "link": "https://stackoverflow.com/users/1018256/nerdtron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1587, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1483392489, "creation_date": 1449696555, "last_edit_date": 1483392489, "question_id": 34189349, "link": "https://stackoverflow.com/questions/34189349/preventing-a-dll-file-from-loading-into-my-process-via-ms-detours", "title": "Preventing a DLL file from loading into my process via MS Detours", "body": "<p>I'd like to prevent a specific third-party DLL file from loading into my application's process at runtime.  My initial attempt at this was using the MS Detours product.</p>\n\n<p>I have a 32-bit <a href=\"http://en.wikipedia.org/wiki/Microsoft_Foundation_Class_Library\" rel=\"nofollow noreferrer\">MFC</a> application running on Windows 10 64-bit. I tested with the free MS Detours 3.0 version as a feasibility check.</p>\n\n<p>In my MFC application class constructor, I call Detours to intercept the \"load library\" APIs (LoadLibraryW, LoadLibraryExW, LoadLibraryA, and LoadLibraryExA). This lets me intercept library loading and currently I just log out the name of the library being loaded and then call the original API so it proceeds to load the library. The eventual plan would be to look for the specific third-party DLL file name and in that case just return failure, preventing the DLL file from loading.</p>\n\n<p>This sort of works. When I run my test application, close it, and then check the log I see a bunch of library load messages logged from my intercept functions.</p>\n\n<p>BUT, my code never sees the particular third-party DLL file I'm looking for.  What's happening is that the third-party DLL file is already loaded by the time I get to my application class constructor. So I'm too late!</p>\n\n<p>How can I get some code to execute EARLIER and so hopefully install the detours stuff BEFORE the third-party library gets injected?</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1449695613, "post_id": 34189043, "comment_id": 56124450, "body": "One example is in my answer here: <a href=\"http://stackoverflow.com/questions/33618480/vs2012-unsigned-negate\" title=\"vs2012 unsigned negate\">stackoverflow.com/questions/33618480/vs2012-unsigned-negate</a>"}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 3, "creation_date": 1449695688, "post_id": 34189043, "comment_id": 56124489, "body": "But more exactly your question <a href=\"http://stackoverflow.com/questions/7159348/disable-single-warning-error\" title=\"disable single warning error\">stackoverflow.com/questions/7159348/&hellip;</a>"}], "owner": {"reputation": 9766, "user_id": 1305891, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bca679c18291b3c88ee8ffae151d81a1?s=128&d=identicon&r=PG", "display_name": "Rajeshwar", "link": "https://stackoverflow.com/users/1305891/rajeshwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "closed_date": 1449695769, "answer_count": 0, "score": 0, "last_activity_date": 1449695425, "creation_date": 1449695425, "question_id": 34189043, "link": "https://stackoverflow.com/questions/34189043/is-it-possible-to-disable-warning-on-specific-statements-warnings-treated-as-e", "closed_reason": "Duplicate", "title": "Is it possible to disable warning on specific statements - Warnings treated as errors", "body": "<p>I added the following type to a header file</p>\n\n<pre><code>boost::function&lt;void()&gt; voidFunction;\n</code></pre>\n\n<p>and I get the following error</p>\n\n<pre><code>Error   291 error C2220: warning treated as error - no 'object' file generated  \nWarning 2   warning C4251: ....: class 'boost::function&lt;Signature&gt;' needs to have dll-interface to be used by clients of class ...\n</code></pre>\n\n<p>My question is if there is a way to disable the warning for this type only programatically without making changes to the project configuration. I am using visual studio 2006.Currently I have the option enabled for \"treat warning as errors\". I wanted to know if I can keep that setting there and add something programatically in code to ignore the warning introduced by adding the statement.</p>\n\n<pre><code>boost::function&lt;void()&gt; voidFunction;\n</code></pre>\n"}, {"tags": ["c++", "c++11", "language-lawyer", "c++14"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1449695457, "post_id": 34189023, "comment_id": 56124372, "body": "Suppose you had some RandomAccessIterators <code>a</code> and <code>b</code>; wouldn&#39;t <code>vector(a, b)</code> be ambiguous?"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1449695523, "post_id": 34189023, "comment_id": 56124405, "body": "@immibis I was assuming the rules would be the same as for partial specialization of templates, where the more specific version of the function would win."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1449695780, "post_id": 34189023, "comment_id": 56124530, "body": "Member functions are a bad example, the standard already allows implementations to alter their signatures to their hearts&#39; content as long as a plain call to a signature in the standard works as specified. It&#39;s more interesting with non-members, but implementations can always call overloaded <code>__helpers</code> instead of adding overloads directly, and without the concepts TS&#39;s overload resolution support they have to do it anyway."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1449695994, "post_id": 34189023, "comment_id": 56124644, "body": "@T.C. But you can&#39;t actually declare the constructor as <code>vector(RandomAccessIterator a, RandomAccessIterator b, ...)</code>, because concepts aren&#39;t actually a language feature, right? You have to do <code>template&lt;class T&gt; vector(T a, T b, ...)</code> and rely on SFINAE."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1449696130, "post_id": 34189023, "comment_id": 56124722, "body": "@immibis Correct. Or tag dispatch to an internal helper, which is more likely to happen. &quot;Specializing&quot; that constructor for forward-or-better iterators is required by the standard, in any event."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1449696153, "post_id": 34189023, "comment_id": 56124734, "body": "@T.C. Thank you. Are there any handy quotes from the standard, or is this more of a distributed affair? I tried looking in n4140, but I&#39;m not familiar enough with it to find any clause dealing with library concepts in general, which is where I&#39;m <i>assuming</i> such a quote would be. :\\"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1449696660, "post_id": 34189023, "comment_id": 56125047, "body": "libstdc++ takes advantage of random access iterators; have a look at their implementation. In standard C++ that&#39;s definitely allowed, and I haven&#39;t seen a new &quot;standard library&quot; yet that uses the Concepts TS."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1449696883, "post_id": 34189023, "comment_id": 56125162, "body": "So we&#39;re saying that the answer to this question is &quot;yes&quot;, right?"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1449697559, "post_id": 34189023, "comment_id": 56125503, "body": "@KerrekSB I didn&#39;t think to look at an open source library implementation. Something to do with my future questions before posting them, I suppose. Thank you."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1449697587, "post_id": 34189023, "comment_id": 56125523, "body": "@RichardHodges to me, it looks like &quot;yes&quot; with a side dish of &quot;doesn&#39;t need to be allowed because the implementation can specialize the implementation without altering the interface.&quot; I&#39;m mostly waiting for someone to post an answer with relevant quotes from the standard now."}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1449698163, "post_id": 34189023, "comment_id": 56125831, "body": "Are you looking for something like <code>std::distance</code>? <code>std::distance</code> is defined for <code>InputIt</code>, but has special semantics for <code>RandomIt</code> (e.g. it&#39;s <code>last - first</code> and not the number of <code>first++</code> till <code>first == last</code>). Implementation is done via <code>iterator_tag</code> dispatch, as far as I know, so no fancy concept overloading there (at least for now). See <code>[iterator.operatons]</code> (N3337)."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1449698477, "post_id": 34189023, "comment_id": 56125968, "body": "@Zeta sort of--I&#39;m more looking for language in the standard for the general case of validity of specialization for more detailed concepts, rather than any specific instance, though as mentioned above the point is somewhat moot since an implementation can just do something like tag dispatch to a set of helpers."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1460514484, "creation_date": 1460514484, "answer_id": 36587475, "question_id": 34189023, "link": "https://stackoverflow.com/questions/34189023/is-it-legal-for-a-standard-library-implementation-to-specialize-a-function-templ/36587475#36587475", "title": "Is it legal for a standard library implementation to specialize a function templated on a concept with a child concept?", "body": "<p>There is no way to determine externally which constructor you have invoked with a given signature in C++.</p>\n\n<p>So the exact details of the <code>vector</code> signature can be varied under the as-if rule so long as all constructors that are specified can be invoked, the behavior you get at satisfies the documented features, and any constructor arguments that would not have been valid remain invalid (as external code can do SFINAE testing to determine if a given set of arguments would construct a <code>std::vector</code>).</p>\n\n<p>As noted by the OP and comments, many standard library implementations just use tag dispatching to forward to more-efficient more-specialized versions.</p>\n\n<p>Of interest would be the answer <em>outside</em> of the context of a constructor, where you can detect functions having specific signatures (and not just compatibility), and you can distinguish between distinct functions.  I do not know the answer here, but I am under the (unvalidated) impression that functions that do not match the exact signatures described in the standard actually occur in <code>std</code> libraries sometimes.</p>\n"}], "owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 2, "answer_count": 1, "score": 7, "last_activity_date": 1460514484, "creation_date": 1449695354, "question_id": 34189023, "link": "https://stackoverflow.com/questions/34189023/is-it-legal-for-a-standard-library-implementation-to-specialize-a-function-templ", "title": "Is it legal for a standard library implementation to specialize a function templated on a concept with a child concept?", "body": "<p>With the c++11 and c++14 library concepts, may a valid implementation of the c++ standard library create a specialized version of a function templated on a concept to take advantage of the additional functionality of child concept for optimizations that would not be possible with the base concept alone, such as with the <code>InputIterator</code> constructor of <code>std::vector</code>, and iterators which fulfill the requirements of <code>RandomAccessIterator</code>?</p>\n\n<pre><code>// specified by standard\nvector(InputIt begin, InputIt end, const Allocator&amp; alloc = Allocator());\n// is this specialization allowed in an implementation if it provides the same functionality?\nvector(RandomAccessIt begin, RandomAccessIt end, const Allocator&amp; alloc = Allocator());\n</code></pre>\n\n<p>Here, <code>InputIt</code> is a type fulfilling the requirements of the <a href=\"http://en.cppreference.com/w/cpp/concept/InputIterator\"><code>InputIterator</code></a> concept, and <code>RandomAccessIt</code> fulfills the requirements of <a href=\"http://en.cppreference.com/w/cpp/concept/RandomAccessIterator\"><code>RandomAccessIterator</code></a>. Notably, this concept lacks a requirement for finding the difference between two iterators, while its great-grandchild concept <code>RandomAccessIterator</code> <em>does</em> require</p>\n\n<pre><code>It a,b;\nIt::difference_type c = a - b;\n</code></pre>\n\n<p>to be valid. Finding the difference between two iterators would be a help to the <code>InputIterator</code> constructor for <code>std::vector</code> in the cases where <code>RandomAccessIterator</code> is also a concept fulfilled by the supplied iterators, since it would allow an implementation to pre-allocate the space required by the final vector, rather than resizing it multiple times during construction.  </p>\n\n<p>I can see it being valid, because of the Standard's occasional use of as-if rules, such as with covariant return types for virtual functions in inheritance hierarchies. However, there are rather <em>distinct</em> differences between the situations, so I can also see that the logic behind covariant return types may not necessarily have transferred to this situation.</p>\n\n<hr>\n\n<p>To reiterate: may a valid implementation of the c++ standard library create a specialized version of a function templated on a concept to take advantage of the additional functionality of child concept for optimizations that would not be possible with the base concept alone?</p>\n\n<hr>\n\n<p><em>Note: I've not tagged this question with <a href=\"/questions/tagged/c%2b%2b-concepts\" class=\"post-tag\" title=\"show questions tagged &#39;c++-concepts&#39;\" rel=\"tag\">c++-concepts</a> because as far as I can tell that tag is for Concepts-Lite and the Concepts TS, and this question is about the library concepts in c++11 and c++14</em></p>\n"}, {"tags": ["c++", "templates", "inheritance"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 5590242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/417e6214e329ad8b783b8d2951a94741?s=128&d=identicon&r=PG&f=1", "display_name": "ZFect", "link": "https://stackoverflow.com/users/5590242/zfect"}, "edited": false, "score": 0, "creation_date": 1449696695, "post_id": 34189225, "comment_id": 56125071, "body": "Ah I see! Removing the unnecessary template worked perfectly for my code. Thanks for clearing that up!"}], "tags": [], "owner": {"reputation": 301, "user_id": 4349614, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rGQvLlUWH3o/AAAAAAAAAAI/AAAAAAAAABE/jIxaQ_wzPUA/photo.jpg?sz=128", "display_name": "Ternvein", "link": "https://stackoverflow.com/users/4349614/ternvein"}, "is_accepted": true, "score": 0, "last_activity_date": 1449696065, "creation_date": 1449696065, "answer_id": 34189225, "question_id": 34188985, "link": "https://stackoverflow.com/questions/34188985/passing-a-derived-class-of-a-base-template-class-as-its-base-template-class-to-a/34189225#34189225", "title": "Passing a derived class of a base template class as its base template class to a function", "body": "<p>Your list template <code>IntrusiveLinkedList</code> has a type <code>EventHandler*</code></p>\n\n<pre><code>IntrusiveLinkedList&lt;EventHandler*&gt; m_eventHandlers;\n</code></pre>\n\n<p>, so <code>Append</code> function expects <code>IntrusiveLink&lt;EventHandler*&gt;*</code>, not <code>IntrusiveLink&lt;EventHandler&gt;*</code>.\nBy the way, using templates is not necessary in your example (at least in the part you showed). Inheritance is quite enough.</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 5171036, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6cE8Ud4942Y/AAAAAAAAAAI/AAAAAAAAAOM/4VjdwEbrSuc/photo.jpg?sz=128", "display_name": "Filipe Olegario", "link": "https://stackoverflow.com/users/5171036/filipe-olegario"}, "is_accepted": false, "score": 0, "last_activity_date": 1449697260, "creation_date": 1449697260, "answer_id": 34189519, "question_id": 34188985, "link": "https://stackoverflow.com/questions/34188985/passing-a-derived-class-of-a-base-template-class-as-its-base-template-class-to-a/34189519#34189519", "title": "Passing a derived class of a base template class as its base template class to a function", "body": "<p>As far as I know, only pointer to base classes can point to derived instances. to cast from a derive class to a base class, you would have to create a conversion function with: operator baseClass(  );</p>\n\n<p>This is explained in <a href=\"http://en.cppreference.com/w/cpp/language/cast_operator\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/language/cast_operator</a></p>\n\n<p>Tough I supose you could make \" operator baseClass( baseClass obj ); \", I didnt find such an example, but you can aways test.</p>\n"}], "owner": {"reputation": 47, "user_id": 5590242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/417e6214e329ad8b783b8d2951a94741?s=128&d=identicon&r=PG&f=1", "display_name": "ZFect", "link": "https://stackoverflow.com/users/5590242/zfect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 34189225, "answer_count": 2, "score": 1, "last_activity_date": 1450105661, "creation_date": 1449695203, "last_edit_date": 1450105661, "question_id": 34188985, "link": "https://stackoverflow.com/questions/34188985/passing-a-derived-class-of-a-base-template-class-as-its-base-template-class-to-a", "title": "Passing a derived class of a base template class as its base template class to a function", "body": "<p>I am implementing an event system where added events are stored into a linked list that I have implemented. When subscribing an event to the event system, I am trying to pass the object of type <code>EventHandler*</code>, that is derived from the base template class <code>IntrusiveLink&lt;T&gt;</code>, to my linked list's method <code>void Append(IntrusiveLink&lt;T&gt;* pLink);</code> as an <code>EventHandler*</code>. </p>\n\n<p>I was expecting that it would be upcasted automatically from the 'is-a' relationship of inheritance, but I seem to be misunderstanding what might be actually going on here or I am incorrect in the syntax somehow.</p>\n\n<p>Here is the compiler error.</p>\n\n<blockquote>\n  <p>cannot convert argument 1 from 'EventHandler*' to 'IntrusiveLink&lt;T>'  with T=EventHandler *. Types pointed to are unrelated; conversion requires\n  reinterpret_cast, C-style cast or function-style cast</p>\n</blockquote>\n\n<p>Here is the base template class</p>\n\n<pre><code>template &lt;class T&gt; \nclass IntrusiveLink\n{\n    IntrusiveLink&lt;T&gt;* m_pPrev;\n    IntrusiveLink&lt;T&gt;* m_pNext;\n\nprotected:\n    IntrusiveLink()\n    : m_pPrev(nullptr), m_pNext(nullptr) {}\n\npublic:\n    virtual ~IntrusiveLink() {m_pPrev = nullptr; m_pNext = nullptr;}\n};\n</code></pre>\n\n<p>Snippet of the derived class of IntrusiveLink</p>\n\n<pre><code>class EventHandler : public IntrusiveLink&lt;EventHandler&gt;\n{\n    // ... other code\n};\n</code></pre>\n\n<p>Small snippet of the linked list</p>\n\n<pre><code>template &lt;class T&gt; \nclass IntrusiveLinkedList\n{\n    // ... other code\n\n    void Append          (IntrusiveLink&lt;T&gt;* pLink);\n};\n</code></pre>\n\n<p>Snippet of the event system header</p>\n\n<pre><code>class EventSystem\n{\n    IntrusiveLinkedList&lt;EventHandler*&gt; m_eventHandlers;\n\npublic:\n\n    void  Subscribe   (EventHandler* pEventHandler);\n\n    ... other code\n};\n</code></pre>\n\n<p>Finally, the snippet where the error happens</p>\n\n<pre><code>void EventSystem::Subscribe(EventHandler* pEventHandler)\n{\n        // ... other code\n\n        m_eventHandlers.Append(pEventHandler); // Compiler error\n}\n</code></pre>\n\n<p>I tried to keep the snippets relevant to the problem, but let me know if you need more information. Thanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1449697564, "post_id": 34188978, "comment_id": 56125506, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/10195343/copy-a-file-in-a-sane-safe-and-efficient-way\">Copy a file in a sane, safe and efficient way</a>"}], "answers": [{"tags": [], "owner": {"reputation": 386, "user_id": 3168708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bc9bdd047eb24a30a4ed1d7d3ac57d?s=128&d=identicon&r=PG&f=1", "display_name": "sapensadler", "link": "https://stackoverflow.com/users/3168708/sapensadler"}, "is_accepted": false, "score": 0, "last_activity_date": 1449696173, "last_edit_date": 1449696173, "creation_date": 1449695752, "answer_id": 34189127, "question_id": 34188978, "link": "https://stackoverflow.com/questions/34188978/copy-text-from-one-file-to-another/34189127#34189127", "title": "copy text from one file to another", "body": "<p><code>inFile.get(c1)</code> Reads one character and stores it to c1 if available. Otherwise, leaves ch unmodified and sets failbit and eofbit.</p>\n\n<p>You can use <code>inFile.eof()</code> to check whether the end of the file has been reached.</p>\n"}], "owner": {"reputation": 21, "user_id": 5592234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22709cfe590b070329591db9a1f1e463?s=128&d=identicon&r=PG&f=1", "display_name": "beefheart", "link": "https://stackoverflow.com/users/5592234/beefheart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449697357, "creation_date": 1449695168, "question_id": 34188978, "link": "https://stackoverflow.com/questions/34188978/copy-text-from-one-file-to-another", "title": "copy text from one file to another", "body": "<p>I have tried two different while loops.  I think they have a similar problem. Neither of them terminate or give any output. </p>\n\n<p>The task is to copy (byte for byte) one file into another.  The file does not have to have endlines, nor does it have to be a .txt file (it could be .exe...).</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\n\nint main(int argc, char *argv[])\n{\nchar c, c1, c2;\nifstream inFile;\nofstream outFile;\n\ninFile.open(\"blackbird.txt\");\n\nif (inFile.fail())\n{\n    cout &lt;&lt; \"\\nThe file was not successfully opened for reading.\"\n    &lt;&lt; \"\\nPlease check that the file currently exists.\\n\\n\";\n    exit(1);\n}\n\ncout &lt;&lt; \"\\nThe file has been successfully opened for reading.\\n\\n\";\n\n\noutFile.open(\"blackbird_copy.txt\");\n\nif (outFile.fail())\n{\n    cout &lt;&lt; \"The file was not successfully opened for writing\" &lt;&lt; endl;\n    exit(1);\n}\n\ncout &lt;&lt; \"The file has been successfully opened for writing.\\n\\n\";\n\n\n//outFile &lt;&lt; \"Hello\";\n\n// 1) this loop doesn't terminate. 2) the computer doesn't know what c1     is.\n/*\nwhile (inFile.get(c1))\n{\n    outFile &lt;&lt; c1;\n    cout &lt;&lt; c1;\n}\n*/\n\n\n\n// This one is no better\n/*\nwhile (inFile.good())\n{\n    inFile.get(c);\n    outFile &lt;&lt; c;\n}\n*/\n\n\ninFile.close();\noutFile.close();\n\n\n// read contents of blackbird_copy to check our work.\n\ninFile.open(\"blackbird_copy.txt\");\n\nwhile (inFile.get(c2))\n{\n    cout &lt;&lt; c2;\n}\n\ncout &lt;&lt; endl &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 1, "creation_date": 1449695634, "post_id": 34188974, "comment_id": 56124465, "body": "Are you running Avast anti-virus program?  What you describe matches the symptoms of a well known problem between Avast and VS.  See <a href=\"http://stackoverflow.com/questions/33690697/running-my-c-code-gives-me-a-blank-cmd\" title=\"running my c code gives me a blank cmd\">stackoverflow.com/questions/33690697/&hellip;</a>"}, {"owner": {"reputation": 87, "user_id": 5661131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc4f1afd1785f27f8dc69bc44dc0a69?s=128&d=identicon&r=PG&f=1", "display_name": "Lilia O.", "link": "https://stackoverflow.com/users/5661131/lilia-o"}, "reply_to_user": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1449695764, "post_id": 34188974, "comment_id": 56124524, "body": "Yes I am running Avast. Now that you mention it I remember that I&#39;ve only started running Avast recently, so that may be the issue. What can I do to deal with it?"}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1449695782, "post_id": 34188974, "comment_id": 56124532, "body": "See the link I added.  This question comes up frequently."}], "owner": {"reputation": 87, "user_id": 5661131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcc4f1afd1785f27f8dc69bc44dc0a69?s=128&d=identicon&r=PG&f=1", "display_name": "Lilia O.", "link": "https://stackoverflow.com/users/5661131/lilia-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "closed_date": 1449697154, "answer_count": 0, "score": 0, "last_activity_date": 1449695659, "creation_date": 1449695162, "last_edit_date": 1449695659, "question_id": 34188974, "link": "https://stackoverflow.com/questions/34188974/visual-studio-c-console-application-doesnt-run-any-code", "closed_reason": "Duplicate", "title": "Visual Studio C++ console application doesn&#39;t run any code", "body": "<p>I've been having great issues with Visual Studio 2015 for my computer science class. I use C++ and we have been working with console windows the whole semester. Recently every time that I have tried to run any program, the console window will appear but no code will run. I assume it must be an issue with Visual Studio since even the most basic code will not run;</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    cout &lt;&lt; \"Hello World\";\n\n    return 0;\n}\n</code></pre>\n\n<p>When I try to debug this (using ctrl + F5), this is all I get with every program:\n<a href=\"http://i.stack.imgur.com/3jWpN.jpg\" rel=\"nofollow\">Console Window with no code</a></p>\n\n<p>I uninstalled Visual Studio and then reinstalled it, but the same error keeps occurring. I'm quite new to Visual Studio so I tried to include as much information as I could, but I really don't understand what is happening. I'm not sure if there's something simple that I'm doing wrong or if there's a more complex issue. Does anyone know what I can do to run programs normally again?</p>\n"}, {"tags": ["c++", "function", "c++11", "function-pointers", "qualifiers"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1449695308, "post_id": 34188968, "comment_id": 56124318, "body": "Types are read right to left, inside out. <code>ftype_05</code> is a reference to a const volatile pointer to a function."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1449695571, "post_id": 34188968, "comment_id": 56124427, "body": "To declare a variable, insert a name before the first closing bracket, e.g. <code>int(*const volatile &amp;&amp; myfunc)(int) = ...;</code>"}, {"owner": {"reputation": 49861, "user_id": 882932, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/KdHtK.png?s=128&g=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/882932/vincent"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1449695714, "post_id": 34188968, "comment_id": 56124498, "body": "The problem is not declaring the variables. It&#39;s how to initialize them from a hypothetical function <code>int myfunction(int x) &#47;* qualifiers *&#47; {return x;}</code>."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 2, "creation_date": 1449696487, "post_id": 34188968, "comment_id": 56124932, "body": "Your original type <code>ftype_01</code> can be qualified because <i>member functions</i> can have these qualifiers, and <i>pointers-to-member-functions</i> can be decomposed into <code>ftype_01 C::*</code> as if they were <i>pointers-to-members</i>. The use of these qualified type is quite restricted, see [dcl.fct]p6 -- essentially you can use them directly, pass them as template-arguments, use them to declare member functions (as far as I understand it) and compose <i>pointer-to-member-function</i> types."}, {"owner": {"reputation": 49861, "user_id": 882932, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/KdHtK.png?s=128&g=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/882932/vincent"}, "edited": false, "score": 0, "creation_date": 1449696647, "post_id": 34188968, "comment_id": 56125036, "body": "How do you initialize a <code>ftype_01</code> variable?"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1449696704, "post_id": 34188968, "comment_id": 56125077, "body": "You cannot use this type to declare a variable; this is not one of the allowed usages."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1449696715, "post_id": 34188968, "comment_id": 56125085, "body": "There&#39;s no such thing as an <code>ftype_01</code> variable.  Its only valid use is as a function declaration, e.g. <code>class X { ftype_01 f; };</code>"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1449696767, "post_id": 34188968, "comment_id": 56125105, "body": "@aschepler Another valid use should be something like <code>ftype_01 (X::*p) = nullptr;</code> <a href=\"http://coliru.stacked-crooked.com/a/48f82fa5d7392bbf\" rel=\"nofollow noreferrer\">on coliru</a>"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1449697020, "post_id": 34188968, "comment_id": 56125235, "body": "<i>&quot;essentially you can use them directly&quot;</i> My wording is wrong. You can use them <i>as types</i> (pass around etc.), but not to compose other types but pointers-to-members nor create variables."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1449697837, "post_id": 34188968, "comment_id": 56125666, "body": "There are no qualified functions. Use <code>int myfunction(int x)</code>."}], "owner": {"reputation": 49861, "user_id": 882932, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/KdHtK.png?s=128&g=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/882932/vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1449695508, "creation_date": 1449695117, "last_edit_date": 1449695508, "question_id": 34188968, "link": "https://stackoverflow.com/questions/34188968/qualified-reference-and-pointers-to-function", "title": "Qualified reference and pointers to function", "body": "<p>In C++, it's possible to define qualified function types like:</p>\n\n<pre><code>using ftype_01 = int(int) const volatile &amp;&amp;; // OK\n</code></pre>\n\n<p>I am trying to understand the equivalent in terms of pointers:</p>\n\n<pre><code>using ftype_02 = int(**)(int); // OK\nusing ftype_03 = int(*&amp;&amp; const)(int); // Not compiling\nusing ftype_04 = int(const volatile &amp;&amp;*)(int); // Not compiling\nusing ftype_05 = int(*const volatile &amp;&amp;)(int); // OK\nusing ftype_06 = int(*&amp;)(int); // OK\nusing ftype_07 = int(*&amp;&amp;)(int); // OK\n</code></pre>\n\n<p>And in terms of references:</p>\n\n<pre><code>using ftype_08 = int(&amp;)(int); // OK\nusing ftype_09 = int(&amp;&amp;)(int); // OK\nusing ftype_10 = int(const &amp;)(int); // Not compiling\nusing ftype_11 = int(&amp; const)(int); // Not compiling\n</code></pre>\n\n<p>Here are my questions:</p>\n\n<ul>\n<li>What does the compiling types exactly refer to? (what do they mean)</li>\n<li>How to declare and initialize a variable <code>f</code> of these types (so that <code>decltype(f)</code> will produce these types)?</li>\n<li>Is <code>ftype_05</code> a pointer to a <code>const volatile &amp;&amp;</code> function?</li>\n</ul>\n"}, {"tags": ["c++", "unit-testing", "visual-studio-2013", "microsoft-cpp-unit-test"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1449698152, "post_id": 34188911, "comment_id": 56125827, "body": "What is <code>RETURN_WIDE_STRING</code>?"}, {"owner": {"reputation": 1094, "user_id": 5081265, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/989bdc7ec91fc4e2accea93f2d5bc78a?s=128&d=identicon&r=PG", "display_name": "ecain", "link": "https://stackoverflow.com/users/5081265/ecain"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1449763757, "post_id": 34188911, "comment_id": 56157583, "body": "I&#39;m actually not totally certain, I just found it on this link <a href=\"http://grenangen.se/node/76\" rel=\"nofollow noreferrer\">grenangen.se/node/76</a>"}], "owner": {"reputation": 1094, "user_id": 5081265, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/989bdc7ec91fc4e2accea93f2d5bc78a?s=128&d=identicon&r=PG", "display_name": "ecain", "link": "https://stackoverflow.com/users/5081265/ecain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1449698106, "creation_date": 1449694925, "last_edit_date": 1449698106, "question_id": 34188911, "link": "https://stackoverflow.com/questions/34188911/assertareequal-defining-specialization-for-systemclock", "title": "Assert::AreEqual defining specialization for system::clock", "body": "<p>I have this code in my unit test: </p>\n\n<pre><code>Assert::AreEqual(std::chrono::system_clock::now(), ntp.testntp);\n</code></pre>\n\n<p>and I get this error: </p>\n\n<pre><code>Error   1   error C2338: Test writer must define specialization of ToString&lt;const &gt;Q&amp; q&gt; for your class class std::basic_string&lt;wchar_t,struct &gt;std::char_traits&lt;wchar_t&gt;,class std::allocator&lt;wchar_t&gt; &gt; __cdecl &gt;Microsoft::VisualStudio::CppUnitTestFramework::ToString&lt;class &gt;std::chrono::time_point&lt;struct std::chrono::system_clock,class &gt;std::chrono::duration&lt;__int64,struct std::ratio&lt;1,10000000&gt; &gt; &gt;&gt;(const class &gt;std::chrono::time_point&lt;struct std::chrono::system_clock,class &gt;std::chrono::duration&lt;__int64,struct std::ratio&lt;1,10000000&gt; &gt; &gt; &amp;). \n</code></pre>\n\n<p>It's my understanding that you have to do something along these lines: </p>\n\n<pre><code>template&lt;&gt; static std::wstring ToString&lt;system_clock&gt;(const system_clock&amp; t) { RETURN_WIDE_STRING(t); }\n</code></pre>\n\n<p>The compilier doesn't like the <code>RETURN_WIDE_STRING(t)</code> part. \nHow do I properly do this?</p>\n"}, {"tags": ["c++", "mixins"], "comments": [{"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 0, "creation_date": 1449695627, "post_id": 34188850, "comment_id": 56124457, "body": "<a href=\"http://stackoverflow.com/questions/33789582/convert-a-program-that-uses-includes-to-one-using-templates\" title=\"convert a program that uses includes to one using templates\">stackoverflow.com/questions/33789582/&hellip;</a>. The answer to this question that references CRTP may help you. It will allow you to recast &#39;this&#39; and other arguments to test if they have the data you need, and write an operator = to perform the operation."}, {"owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "reply_to_user": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 0, "creation_date": 1449697028, "post_id": 34188850, "comment_id": 56125239, "body": "Hm, I&#39;m not sure I follow that. So here I would need to template Point? Then for which class would I write an operator=? Would each one just copy their own data (are they automatically called &quot;recursively&quot;?)?"}, {"owner": {"reputation": 1226, "user_id": 3137313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9hnmm.jpg?s=128&g=1", "display_name": "KorreyD", "link": "https://stackoverflow.com/users/3137313/korreyd"}, "edited": false, "score": 0, "creation_date": 1449704894, "post_id": 34188850, "comment_id": 56128784, "body": "hmm.. so lets say you had a class C : public Base with a member variable double a;  and then you did- A&lt;Point&gt; aPoint; C&lt;Point&gt; cPoint;  cPoint = aPoint  &lt;-- (in this case you&#39;d want to copy x,y,z and a?  because they both have a member named &#39;a&#39; of type double)"}, {"owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "reply_to_user": {"reputation": 1226, "user_id": 3137313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9hnmm.jpg?s=128&g=1", "display_name": "KorreyD", "link": "https://stackoverflow.com/users/3137313/korreyd"}, "edited": false, "score": 0, "creation_date": 1449722198, "post_id": 34188850, "comment_id": 56133648, "body": "@KorreyD Not quite - it&#39;s actually stronger than that. If I have an A&lt;C&lt;Point&gt;&gt; acPoint and an A&lt;Point&gt; aPoint, I want acPoint = aPoint to copy everything from the A class, because that&#39;s the only mixin they have in common. Likewise, acPoint = point would just copy the members of Point. It needs to scale though, so like A&lt;B&lt;C&lt;D&lt;Point&gt;&gt;&gt;&gt; abcdPoint; A&lt;C&lt;Point&gt;&gt; acPoint; abcdPoint = acPoint would only copy the members from A and C. See what I mean? I&#39;ve added this description to the question as this is really what I&#39;m going for."}], "answers": [{"comments": [{"owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "edited": false, "score": 0, "creation_date": 1449699564, "post_id": 34189685, "comment_id": 56126544, "body": "Before I try a more complex example, shouldn&#39;t this work? <a href=\"https://gist.github.com/daviddoria/4ea5d826684993b1e4ef\" rel=\"nofollow noreferrer\">gist.github.com/daviddoria/4ea5d826684993b1e4ef</a> I am getting &quot;Conversion from Point to non-scalar type A&lt;Point&gt; requested&quot; - isn&#39;t that what the templated assignment operator supposed to handle?"}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "reply_to_user": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "edited": false, "score": 0, "creation_date": 1449700509, "post_id": 34189685, "comment_id": 56126998, "body": "You need to copy a or b in your operator=. Since it won&#39;t compile unless a (or b) exists in the right hand side, it may work."}, {"owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "edited": false, "score": 0, "creation_date": 1449700664, "post_id": 34189685, "comment_id": 56127070, "body": "In that gist I am intentionally NOT copying &#39;a&#39; in operator= so that it would just copy in the data from Point. But it seems like the template operator= is not getting used, but rather the default operator=?"}, {"owner": {"reputation": 1226, "user_id": 3137313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9hnmm.jpg?s=128&g=1", "display_name": "KorreyD", "link": "https://stackoverflow.com/users/3137313/korreyd"}, "edited": false, "score": 0, "creation_date": 1449700908, "post_id": 34189685, "comment_id": 56127183, "body": "this code -&gt; A&lt;Point&gt; aPoint = point;  calls a copy constructor (since aPoint is being declared and assigned at the same time). what you have overridden in your code there is the copy assignment operator. so if you want it to hit that piece of code you want to do: A&lt;Point&gt; aPoint; aPoint=point;"}, {"owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "reply_to_user": {"reputation": 1226, "user_id": 3137313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9hnmm.jpg?s=128&g=1", "display_name": "KorreyD", "link": "https://stackoverflow.com/users/3137313/korreyd"}, "edited": false, "score": 0, "creation_date": 1449701775, "post_id": 34189685, "comment_id": 56127550, "body": "@KorreyD Ah, of course, thanks. Back to the harder case... haha"}, {"owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "edited": false, "score": 0, "creation_date": 1449702030, "post_id": 34189685, "comment_id": 56127660, "body": "@RobertJacobs So what happens if I try to copy a <code>A&lt;B&lt;Point&gt; &gt;</code> into a <code>A&lt;Point&gt;</code> (I would want x,y,z, and a to be copied, and b to be forgotten)? Even if the static_cast fails, there would be a compiler error trying to access <code>this-&gt;b</code>, you see what I mean? The goal is to copy all of the data that exists both in the source and the target."}], "tags": [], "owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1449698246, "last_edit_date": 1449698246, "creation_date": 1449697881, "answer_id": 34189685, "question_id": 34188850, "link": "https://stackoverflow.com/questions/34188850/copying-data-between-mixin-types/34189685#34189685", "title": "Copying data between mixin types", "body": "<p>In order to be able show what I think the answer to be without really testing to see if it works, I will call this an answer. </p>\n\n<pre><code>template&lt;class BASE&gt;\nclass A {\npublic:\n  A&lt;BASE&gt; operator=(const &amp;A&lt;BASE&gt; right) {\n    // does not block all errors, but catches some:\n    static_assert( std::is_base_of&lt; A, BASE &gt;::value, \"CRTP failure\" );\n    auto* dis = static_cast&lt;BASE*&gt;(this);\n    BASE::operator=(right);\n    dis-&gt;a = right.a;\n    return this;\n  }\n  double a;\n};\n\ntemplate&lt;class BASE&gt;\nclass B {\npublic:\n  B&lt;BASE&gt; operator=(const &amp;B&lt;BASE&gt; right) {\n    // does not block all errors, but catches some:\n    static_assert( std::is_base_of&lt; B, BASE &gt;::value, \"CRTP failure\" );\n    auto* dis = static_cast&lt;BASE*&gt;(this);\n    dis-&gt;b = right.b;\n    BASE::operator=(right);\n    return this;\n  }\n  double b;\n};\n\n\nclass aPoint: public A&lt;aPoint&gt;, Point {};\n\nclass bPoint: public B&lt;bPoint&gt;, Point {};\n\nclass abPoint: public B &lt; A&lt;abPoint&gt; &gt; {};\n\nclass baPoint: public A &lt; B&lt;baPoint&gt; &gt; {};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "edited": false, "score": 0, "creation_date": 1449848094, "post_id": 34226191, "comment_id": 56198039, "body": "weird, any idea why the normal assignment operator fails? So this fixes the ordering problem (AB vs BA), but it looks like it won&#39;t work if there is a different subset of mixins (e.g. AC vs AB) - that is AC will try to copy C from whatever is passed in (AB) which will fail, right?"}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "reply_to_user": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "edited": false, "score": 0, "creation_date": 1449848496, "post_id": 34226191, "comment_id": 56198295, "body": "The type of the rhs is wrong. My guess is if the rhs was cast to a point, the normal = would work."}], "tags": [], "owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1449845312, "creation_date": 1449845312, "answer_id": 34226191, "question_id": 34188850, "link": "https://stackoverflow.com/questions/34188850/copying-data-between-mixin-types/34226191#34226191", "title": "Copying data between mixin types", "body": "<p>I fleshed out your example the best I could. Copying a abPoint into a baPoint works.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Point\n{\npublic:\n    double x,y,z;\n};\n\n// A mixin to add an 'A' value to a point\ntemplate&lt;class Base&gt;\nclass A : public Base\n{\npublic:\n    A&amp; operator=( const Point&amp; rhs )\n    {\n        Point::operator=(rhs);\n        return *this;\n    }\n\n    template &lt;typename T_RHS&gt;\n    A&amp; operator=( const T_RHS&amp; rhs )\n    {\n        Base::operator=(rhs);\n        a = rhs.a;\n        return *this;\n    }\n\n    double a;\n};\n\n// A mixin to add an 'B' value to a point\ntemplate&lt;class Base&gt;\nclass B : public Base\n{\npublic:\n    B&amp; operator=( const Point&amp; rhs )\n    {\n        Point::operator=(rhs);\n        return *this;\n    }\n\n    template &lt;typename T_RHS&gt;\n    B&amp; operator=( const T_RHS&amp; rhs )\n    {\n        Base::operator=(rhs);\n        b = rhs.b;\n        return *this;\n    }\n\n    double b;\n};\n\nint main()\n{\n  Point point;\n\n  A&lt;Point&gt; aPoint;\n  aPoint = point;\n\n  B&lt;Point&gt; bPoint;\n  bPoint = point;\n\n  B&lt; A&lt;Point&gt; &gt; baPoint;\n  A&lt; B&lt;Point&gt; &gt; abPoint;\n  abPoint = baPoint;\n\n  // Fails\n  //aPoint = bPoint;\n  //bPoint = aPoint;\n\n  // This works\n  aPoint.Point::operator=(bPoint);\n  bPoint.Point::operator=(aPoint);\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1449845312, "creation_date": 1449694727, "last_edit_date": 1449718311, "question_id": 34188850, "link": "https://stackoverflow.com/questions/34188850/copying-data-between-mixin-types", "title": "Copying data between mixin types", "body": "<p>I have some different types of data that I want to be able to add to an object (here called \"A\" and \"B\"). If I add them in the same order for two different objects, copying one to the other works fine (e.g. <code>A&lt;B&lt;Point&gt; &gt; abPoint1; A&lt;B&lt;Point&gt; &gt; abPoint2 = abPoint1;</code>). However, if I add them in different orders (e.g. <code>A&lt;B&lt;Point&gt; &gt; abPoint; B&lt;A&lt;Point&gt; &gt; baPoint = abPoint; // compiler error</code>) because the type signature is not the same. Is there any way to do this without handling an exponential number of mixin combinations explicitly? </p>\n\n<p>Here is a MWE for testing:</p>\n\n<pre><code>// Standard point representation\nstruct Point\n{\n    double x,y,z;\n};\n\n// A mixin to add an 'A' value to a point\ntemplate&lt;class Base&gt;\nclass A : public Base\n{\npublic:\n\n    double a;\n};\n\n// A mixin to add an 'B' value to a point\ntemplate&lt;class Base&gt;\nclass B : public Base\n{\npublic:\n\n    double b;\n};\n\nint main()\n{\n  A&lt;Point&gt; aPoint;\n\n  B&lt;Point&gt; bPoint;\n\n  // A&lt;Point&gt; a2Point = bPoint; // obviously we can't do this\n\n  A&lt;B&lt;Point&gt; &gt; abPoint;\n  B&lt;A&lt;Point&gt; &gt; baPoint;\n\n  abPoint = baPoint; // Something like this seems like it should be possible\n\n  return 0;\n}\n</code></pre>\n\n<p>And even better, is there a way to only copy \"available\" pieces of the data? That is: </p>\n\n<pre><code>A&lt;B&lt;C&lt;D&lt;Point&gt;&gt;&gt;&gt; abcdPoint; \nA&lt;C&lt;Point&gt;&gt; acPoint; \nabcdPoint = acPoint;\n</code></pre>\n\n<p>would only copy the members from A and C.</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5650151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6457b39b138156f680ab5eaf2ddab6db?s=128&d=identicon&r=PG&f=1", "display_name": "Sunimir", "link": "https://stackoverflow.com/users/5650151/sunimir"}, "edited": false, "score": 0, "creation_date": 1449758194, "post_id": 34196621, "comment_id": 56153601, "body": "I am doing as you pointed out, but not to a qpixmap but instead a QImage. When the paintevent function is set, the image disappears. Do you know why it does that?"}, {"owner": {"reputation": 1121, "user_id": 3021018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6fhj.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3021018/aaron"}, "reply_to_user": {"reputation": 1, "user_id": 5650151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6457b39b138156f680ab5eaf2ddab6db?s=128&d=identicon&r=PG&f=1", "display_name": "Sunimir", "link": "https://stackoverflow.com/users/5650151/sunimir"}, "edited": false, "score": 0, "creation_date": 1449764673, "post_id": 34196621, "comment_id": 56158212, "body": "I can&#39;t see were you draw that image ... or what you do with that list of points. Where is the image ?"}, {"owner": {"reputation": 1, "user_id": 5650151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6457b39b138156f680ab5eaf2ddab6db?s=128&d=identicon&r=PG&f=1", "display_name": "Sunimir", "link": "https://stackoverflow.com/users/5650151/sunimir"}, "edited": false, "score": 0, "creation_date": 1449765428, "post_id": 34196621, "comment_id": 56158722, "body": "check again, I missed the header file and constructor, but now it should be there."}], "tags": [], "owner": {"reputation": 1121, "user_id": 3021018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6fhj.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3021018/aaron"}, "is_accepted": false, "score": 0, "last_activity_date": 1449735238, "last_edit_date": 1449735238, "creation_date": 1449734770, "answer_id": 34196621, "question_id": 34188811, "link": "https://stackoverflow.com/questions/34188811/need-to-store-multiple-rectangles-in-a-qlist-and-display-them-all-on-a-qpixmap/34196621#34196621", "title": "Need to store multiple rectangles in a qlist and display them all on a QPixmap", "body": "<p>A <code>paintEvent()</code> always starts over from a clean canvas and it seems you call <code>drawRect()</code> only once. To keep all the rectangles and just add another one, store all the rects in a list. In every <code>paintEvent()</code> you will have to iterate over the list and paint all of them again.</p>\n\n<p>With lots of rects this could cause performance issues. In this case, you can also choose to paint onto a <code>QPixmap</code> being a class variable. After drawing another rectangle to the pixmap you'd just have to draw the pixmap to <code>this</code> using <code>drawPixmap()</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5650151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6457b39b138156f680ab5eaf2ddab6db?s=128&d=identicon&r=PG&f=1", "display_name": "Sunimir", "link": "https://stackoverflow.com/users/5650151/sunimir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 292, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449765253, "creation_date": 1449694593, "last_edit_date": 1449765253, "question_id": 34188811, "link": "https://stackoverflow.com/questions/34188811/need-to-store-multiple-rectangles-in-a-qlist-and-display-them-all-on-a-qpixmap", "title": "Need to store multiple rectangles in a qlist and display them all on a QPixmap", "body": "<p>I have tried this for quite a while. I need to paint multiple rectangles on the Qlabel supporting the QRect, I tried storing QRectF but after the next event it replaces the rectangle and shows only one.\nMy code is as follows:\npenlayer.h\n class PictureLayer : public QLabel\n        {\n            Q_OBJECT\n            float adjustX;\n            float adjustY;</p>\n\n<pre><code>        int setRed;\n        int setGreen;\n        int setBlue;\n        int startPointX;\n        int finalPointX;\n        int startPointY;\n        int finalPointY;\n\n        QString imagePath;\n\n    public:\n        int x;\n        int y;\n        QPixmap showPicture;\n        QImage imageSource;\n        QPoint originPoint;\n        QPoint finalPoint;\n           QRectF rectColorFrame;\n\n        explicit PictureLayer(QWidget *parent = 0);\n        ~PictureLayer(){}\n\n        void leaveEvent(QEvent *);\n        void mousePressEvent(QMouseEvent *e);\n        void mouseReleaseEvent (QMouseEvent *e);\n        void mouseMoveEvent(QMouseEvent *e);\n        void imageManipulation(QPoint , QPoint);\n    //    void /*paintEvent*/(QPaintEvent *);\n\n    signals:\n            void mouse_pressed();\n            void mouse_release();\n            void mouse_pos();\n            void mouse_left();\n\n    private:\n\n    };\n</code></pre>\n\n<p>and...</p>\n\n<pre><code>    #include \"penlayer.h\"\n\n    PictureLayer::PictureLayer(QWidget *parent) :\n        QLabel (parent)\n    {\n        adjustX     = 0.0;\n        adjustY     = 0.0;\n        setRed      = 0;\n        setBlue     = 0;\n        setGreen    = 0;\n        startPointX = 0;\n        startPointY = 0;\n        finalPointY = 0;\n        finalPointX = 0;\n        x =0;\n        y =0;\n\n    //    Source_Path =\":/new/prefix1/testpic/just.jpg\";\n    //    Source_Path =\":/testpic/tst.jpg\";\n        imagePath =\":/testpic/sed.JPG\";\n\n        imageManipulation(QPoint (0,0), QPoint (0,0));\n    }\n    PenLayer::PenLayer(QWidget *parent) :\n        QLabel (parent)\n    {\n        x = 0;\n        y = 0;\n        rectIntNumber = 0;\n\n        storeRectanglePoints (QPoint (0,0) , QPoint (0,0), 0);\n\n    }//constructor\n\n    /********************Mouse Events********************/\n\n    void PenLayer::mouseMoveEvent (QMouseEvent *e)\n    {\n        this-&gt;x = e-&gt;x();\n        this-&gt;y = e-&gt;y();\n\n        emit mouse_pos(/*Look for an event to hold*/);\n    }///mouseMoveEvent\n\n    void PenLayer::mousePressEvent(QMouseEvent *e)\n    {\n        this-&gt; x = e-&gt;x ();\n        this-&gt; y = e-&gt;y ();\n        emit mouse_pressed ();\n\n    }///mousePressEvent\n\n    void PenLayer::mouseReleaseEvent (QMouseEvent *e)\n    {\n        this-&gt; x = e-&gt;x ();\n        this-&gt; y = e-&gt;y ();\n\n        emit mouse_release();\n    }///mouseReleaseEvent\n\n    void PenLayer::leaveEvent(QEvent *)\n    {\n        emit mouse_left();\n    }///leaveEvent\n\n\n    /*************************Setting  rectangle***************************/\n    void PenLayer::storeRectanglePoints (QPoint p1 , QPoint p2, int num)\n    {\n        rectIntNumber = num;\n        pressPoint = p1;\n        releasePoint = p2;\n\n        pressPair.first = pressPoint.rx ();\n        pressPair.second = pressPoint.ry ();\n        listOfPoints.insert (rectIntNumber, pressPair);\n\n        releasePair.first = releasePoint.rx ();\n        releasePair.second = releasePoint.ry ();\n        listOfPoints.insert (rectIntNumber, releasePair);\n\n\n    //   rect_storeRectanglePoints.setRect (pressPair.first, pressPair.second,\n    //                                       releasePair.first, releasePair.second);\n\n\n    //   rect.insert(rectIntNumber, &amp;rect_storeRectanglePoints);\n       qDebug()&lt;&lt;rect;\n\n\n    }///setRectanglePoints\n\n    /*************************PaintEvent  rectangle***************************/\n    void PenLayer::paintEvent(QPaintEvent *pa)\n    {\n        QPainter painter(this);\n\n        QRectF rectangle( pressPoint , releasePoint );\n\n    //    QPair to QPoint\n\n        if(pressPoint != QPoint(0,0))\n        {\n            painter.setPen(QPen(Qt::red, 3.0,\n                                Qt::DotLine,\n                                Qt::SquareCap,\n                                Qt::MiterJoin));\n            pa-&gt;accept ();\n        }\n        else\n        painter.setPen (QPen(Qt::transparent));\n    //    painter.drawRects(&amp;rectangle,rectIntNumber);\n        //Should draw many rectangles, but wont\n\n    //    qDebug()&lt;&lt;\"painter test: clickAction-&gt;\"&lt;&lt;clickAction;\n        painter.drawRect(/**rect.last ()*/rectangle);\n        //QPainter should be in the qlist\n\n    //    painter.end ();\n    //    onColorRect.insert (rectIntNumber, &amp;painter);\n    //    qDebug()&lt;&lt;onColorRect;\n\n    }///paintEvent\n</code></pre>\n\n<p>dialogfile</p>\n\n<pre><code>    #include \"dialog.h\"\n    #include \"uidialog.h\"\n    #include \"picturelayer.h\"\n    #include \"penlayer.h\"\n\n    Dialog::Dialog(QWidget *parent) :\n        QDialog(parent),\n        ui(new Ui::Dialog)\n    {\n\n        ui-&gt;setupUi(this);\n        rectangleNumber = 0;\n\n    /*************************CONNECT STATEMENTS***************************/\n        connect(ui-&gt; selectToolLabel,   SIGNAL(mouse_pos()),\n                                this,   SLOT(mouse_current_pos()));\n\n        connect(ui-&gt; selectToolLabel,   SIGNAL(mouse_pressed()),\n                                this,   SLOT(mouse_pressed()));\n\n        connect(ui-&gt; selectToolLabel,   SIGNAL(mouse_release()),\n                                this,   SLOT(mouse_release()));\n\n        connect(ui-&gt; selectToolLabel,   SIGNAL(mouse_left()),\n                                this,   SLOT(mouse_left()));\n\n        connect(ui-&gt;NewSelection,       SIGNAL(pressed()),\n                                this,   SLOT(Button_New()));\n\n        connect(ui-&gt;ClearSelection,     SIGNAL(pressed()),\n                                this,   SLOT(Button_clear()));\n\n    }\n\n    Dialog::~Dialog()\n    {\n        delete ui;\n    }//deCon\n\n    /*************************Action Buttons*******************************/\n    void Dialog::Button_New()\n    {\n        //- QList to store the paint obj\n        //-change pix color from p1 x p2 of rectangleNumber\n            //for loop to run a qlist\n\n\n        //-paint in rectangle\n\n    }\n\n    void Dialog::Button_clear()\n    {\n        //deletes all stored elements\n        //load originalpic\n\n        rectangleNumber = 0;\n\n        ui-&gt;selectToolLabel-&gt;storeRectanglePoints  ( QPoint (0,0) , QPoint(0,0) ,\n                                          rectangleNumber );\n\n        ui-&gt;pictureLabel-&gt;imageManipulation( QPoint (0,0) , QPoint(0,0) );\n\n        ui-&gt;selectToolLabel-&gt;listOfPoints.clear ();\n    }\n\n    /***********************Mouse Location********************************/\n\n    void Dialog::mouse_current_pos ()\n    {\n        p3.setX (ui-&gt;selectToolLabel-&gt;x);\n        p3.setY (ui-&gt;selectToolLabel-&gt;y);\n\n    //    ui-&gt;BoxSel-&gt;setRectanglePoints (p1,p3,Rectangle_Number);\n\n        ui-&gt;selectToolLabel-&gt;setCursor (Qt::CrossCursor);\n        ui-&gt;mouseCurrentPos-&gt;setText(QString\n                    (\" X = %1 , Y = %2\")\n                        .arg(p3.rx ())  //%1\n                        .arg(p3.ry ()));//%2\n        update();\n\n    }//mouse_current_pos()\n\n\n    void Dialog::mouse_pressed()\n    {\n\n        //this part should be in QList with a qpair\n        //store it in a value and start another array for the new set\n        p1.setX (ui-&gt;selectToolLabel-&gt;x);\n        p1.setY (ui-&gt;selectToolLabel-&gt;y);\n\n        //FIXME: supposed to Draw the temp rectangle\n\n        ui-&gt;mouseCurrentEvent-&gt;setText(QString\n                     (\"Mouse pressed at location %1 and %2!!!\")\n                        .arg(p1.rx ())  //%1\n                        .arg(p1.ry ()));//%2\n        update();\n\n                                         qDebug()&lt;&lt;\"\\n Mouse key pressed \\n@\"\n                                             &lt;&lt;p1.rx ()&lt;&lt;p1.ry ()&lt;&lt;rectangleNumber;\n    }//mouse_pressed()\n\n\n    void Dialog::mouse_release()\n    {\n            rectangleNumber++;\n        p2.setX (ui-&gt;selectToolLabel-&gt;x);\n        p2.setY (ui-&gt;selectToolLabel-&gt;y);\n\n        ui-&gt;selectToolLabel-&gt;storeRectanglePoints ( p1 , p2 , rectangleNumber );\n        //TODO:show rectangle p1 * p2, RectangleNumber++\n\n\n        ui-&gt;pictureLabel-&gt;imageManipulation ( p1 , p2);//button new\n        ui-&gt;mouseCurrentEvent-&gt;setText(QString\n                    (\"Mouse released at location %1 and %2!!!\")\n                        .arg(p2.rx ())   //%1\n                        .arg(p2.ry ())); //%2\n\n        //save and load save\n\n    //    update();\n                                            qDebug()&lt;&lt;\"test n = \"&lt;&lt;rectangleNumber;\n\n    }//mouse_release()\n\n\n    void Dialog::mouse_left()\n    {\n        ui-&gt;mouseCurrentEvent-&gt;setText(\"Mouse Left :( !!\");\n\n                                          qDebug()&lt;&lt;\"Mouse is off region \\n\";\n    }//mouse_left()\n</code></pre>\n"}, {"tags": ["c++", "linux", "opencv", "raspberry-pi"], "comments": [{"owner": {"reputation": 2059, "user_id": 2759368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03e2c110cced20e5bde6dc62146fcce?s=128&d=identicon&r=PG&f=1", "display_name": "nnn", "link": "https://stackoverflow.com/users/2759368/nnn"}, "edited": false, "score": 2, "creation_date": 1449694705, "post_id": 34188801, "comment_id": 56124013, "body": "<code>g++ filename.cpp</code> just compiles the program and generates the executable file <code>a.out</code>. To execute it, type: <code>.&#47;a.out</code>"}, {"owner": {"reputation": 9, "user_id": 5661163, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fJKJTqSM8dQ/AAAAAAAAAAI/AAAAAAAAACg/J03EkSnQ5cw/photo.jpg?sz=128", "display_name": "Anamaria Vanta", "link": "https://stackoverflow.com/users/5661163/anamaria-vanta"}, "reply_to_user": {"reputation": 2059, "user_id": 2759368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03e2c110cced20e5bde6dc62146fcce?s=128&d=identicon&r=PG&f=1", "display_name": "nnn", "link": "https://stackoverflow.com/users/2759368/nnn"}, "edited": false, "score": 0, "creation_date": 1449695435, "post_id": 34188801, "comment_id": 56124362, "body": "Thank you! I managed to do it in the end. I am trying to compile and run some samples from opencv/cpp. When I run the program using g++ facedetect.cpp for example, I have some errors: undefined referance to &#39;cv::VideoCapture::VideoCapture()&#39;. What can I do now?"}], "answers": [{"tags": [], "owner": {"reputation": 1343, "user_id": 5132595, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gq7MGS_sW1w/AAAAAAAAAAI/AAAAAAAAAXY/a1DOp0cWC5Q/photo.jpg?sz=128", "display_name": "s1hofmann", "link": "https://stackoverflow.com/users/5132595/s1hofmann"}, "is_accepted": false, "score": 1, "last_activity_date": 1449696132, "creation_date": 1449696132, "answer_id": 34189244, "question_id": 34188801, "link": "https://stackoverflow.com/questions/34188801/opencv-raspberry-pi-printf-not-displaying/34189244#34189244", "title": "OpenCV Raspberry Pi printf() not displaying", "body": "<p>In order to successfully compile your OpenCV project you'll have to link against OpenCV libraries.</p>\n\n<p>When compiling on the command-line I'm always using <a href=\"http://www.freedesktop.org/wiki/Software/pkg-config/\" rel=\"nofollow\">pkg-config</a> to link against needed libraries.</p>\n\n<p>With pkg-config installed, try:</p>\n\n<pre><code>g++ `pkg-config --libs --cflags opencv` -std=c++11 yourfile.cpp\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5661163, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fJKJTqSM8dQ/AAAAAAAAAAI/AAAAAAAAACg/J03EkSnQ5cw/photo.jpg?sz=128", "display_name": "Anamaria Vanta", "link": "https://stackoverflow.com/users/5661163/anamaria-vanta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449696132, "creation_date": 1449694550, "last_edit_date": 1449695151, "question_id": 34188801, "link": "https://stackoverflow.com/questions/34188801/opencv-raspberry-pi-printf-not-displaying", "title": "OpenCV Raspberry Pi printf() not displaying", "body": "<p>I am trying to make image processing using OpenCV on a Raspberry pi. I've installed the relevant packages and OpenCV but for some reason I cannot manage to compile not even a <code>printf();</code> </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std;\n\nint main(){\nprintf(\"hello world\");\nreturn 0;\n}\n</code></pre>\n\n<p>After I run this using g++ filename.cpp , the output on the console is empty, it does not print anything but asks for the next command.\nIs there anything I am missing?</p>\n"}, {"tags": ["c++", "c", "pointers"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1449694717, "post_id": 34188798, "comment_id": 56124016, "body": "Please format you code as code."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1449694735, "post_id": 34188798, "comment_id": 56124026, "body": "You can do <code>*(int*)x</code>, that is, tell the compiler to pretend that that integer value is a pointer, and dereference it."}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1449694855, "post_id": 34188798, "comment_id": 56124090, "body": "technically any number can be used as a pointer. after all, a pointer is really just a number representing a memory address. but you still have to tell the compiler to treat that number as a pointer, because &quot;2 as memory address&quot; and &quot;2 as integer&quot; as essentially indistinguishable. they&#39;re both just numbers. it&#39;s the CONTEXT in which you&#39;re using them that matters."}, {"owner": {"reputation": 301, "user_id": 4349614, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rGQvLlUWH3o/AAAAAAAAAAI/AAAAAAAAABE/jIxaQ_wzPUA/photo.jpg?sz=128", "display_name": "Ternvein", "link": "https://stackoverflow.com/users/4349614/ternvein"}, "edited": false, "score": 0, "creation_date": 1449695071, "post_id": 34188798, "comment_id": 56124194, "body": "And because pointers also have a type. You theoretically can dereference anything you want, even a 8-byte string interpreted as your <code>uint64_t</code>, but it may (and most likely will) lead you to many problems."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449695481, "post_id": 34188798, "comment_id": 56124381, "body": "If you access hardware or configure a CPU it&#39;s often done by accessing specific addresses which are hard coded numerical values in the program and then assigned to pointers, and then dereferenced through the pointers. I think that just casting is an equivalent conversion."}, {"owner": {"reputation": 1644, "user_id": 376507, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0251b66fdb998df69a7ab5f29a6b9552?s=128&d=identicon&r=PG&f=1", "display_name": "user376507", "link": "https://stackoverflow.com/users/376507/user376507"}, "edited": false, "score": 1, "creation_date": 1449695709, "post_id": 34188798, "comment_id": 56124496, "body": "I just realized that <i>(int</i>)x works when x is of type uint64_t. However if x is of type double and double also holds 8 bytes, I get compilation error saying &quot;error: operand of type &#39;double&#39; cannot be cast to a pointer type&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1449694852, "creation_date": 1449694852, "answer_id": 34188887, "question_id": 34188798, "link": "https://stackoverflow.com/questions/34188798/dereferencing-value-in-variable-as-pointer-address/34188887#34188887", "title": "Dereferencing value in variable as pointer address", "body": "<p>Because C++ is not assembly language. In assembly you can do whatever you want with the registers - you can 'dereference' them (use as indirect operands) or multiply. Chip could not care less.</p>\n\n<p>C++, as a high level language, aims to help developer. If you want something to be a dereferencable address, you type it as such, and C++ prevents you from accidentally doing something which you can't do with an address. This is a very big advantage.</p>\n"}, {"comments": [{"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 0, "creation_date": 1449695216, "post_id": 34188922, "comment_id": 56124268, "body": "<code>uintptr_t</code> is important.  Also, C++ is much, much more type safe than C.  This is by design."}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 4, "last_activity_date": 1449694966, "creation_date": 1449694966, "answer_id": 34188922, "question_id": 34188798, "link": "https://stackoverflow.com/questions/34188798/dereferencing-value-in-variable-as-pointer-address/34188922#34188922", "title": "Dereferencing value in variable as pointer address", "body": "<p>You <strong>can</strong> do <code>*(int*)x</code>, and it will fetch the <code>int</code> at memory location <code>x</code>. I don't think this is officially supported in the C standard, but in practice it <em>usually</em> works on <em>most</em> implementations.</p>\n\n<p>Part of the point of the type system is to stop you from making mistakes. <em>Usually</em> you don't want to dereference a <code>uint64_t</code>, so if you do it's probably because you made a mistake, and the compiler will point out the mistake for you.</p>\n\n<p>By the way, <code>uintptr_t</code> is an unsigned integer type that's the same size of a pointer. Don't rely on <code>uint64_t</code> being the same size as a pointer, if you ever want to be able to run your code on another CPU architecture.</p>\n"}], "owner": {"reputation": 1644, "user_id": 376507, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0251b66fdb998df69a7ab5f29a6b9552?s=128&d=identicon&r=PG&f=1", "display_name": "user376507", "link": "https://stackoverflow.com/users/376507/user376507"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 998, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1449694966, "creation_date": 1449694543, "last_edit_date": 1449694820, "question_id": 34188798, "link": "https://stackoverflow.com/questions/34188798/dereferencing-value-in-variable-as-pointer-address", "title": "Dereferencing value in variable as pointer address", "body": "<p>Why is it that only pointers can be dereferenced. When we have a character pointer, lets say \"p\" and we do a \"*p\" operation, it means go fetch the contents of the address location stored in p. In the end what we are asking here is to go and fetch the contents of a \"certain value\" by treating this value as address.</p>\n\n<p>Now assume that an integer pointer \"p\" that takes 8 bytes in certain architecture. Assume \"p\" holds the address of an integer variable \"a\"(int *p = &amp;a). Now if I have a variable \"x\" of size uint64_t, then essentially this variable can hold 8 bytes of data. i.e. \"memcpy(&amp;x, &amp;p, 8)\", I am copying the address location stored in \"p\" to \"x\". In c programming we can dereference a pointer using \"*p\" and we get the value of \"a\". Why is it that we cannot do something like *((int*)x) and get the value of \"a\".</p>\n"}, {"tags": ["c++", "sdl", "sdl-2", "lag"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5661049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcf350826f561d8f01bffd759198b58e?s=128&d=identicon&r=PG&f=1", "display_name": "Bezemkaas", "link": "https://stackoverflow.com/users/5661049/bezemkaas"}, "is_accepted": false, "score": 0, "last_activity_date": 1449857801, "creation_date": 1449857801, "answer_id": 34230004, "question_id": 34188714, "link": "https://stackoverflow.com/questions/34188714/sdl-renderpresent-updates-the-screen-irregularly/34230004#34230004", "title": "SDL_RenderPresent() updates the screen irregularly", "body": "<p>Calling SDL_Delay() seems to take about 15ms depending on circumstances. The renderer can be vertically synced by asigning the right flag: renderer = SDL_CreateRenderer(window, -1, SDL_RENDERER_ACCELERATED | SDL_RENDERER_PRESENTVSYNC);</p>\n"}], "owner": {"reputation": 1, "user_id": 5661049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcf350826f561d8f01bffd759198b58e?s=128&d=identicon&r=PG&f=1", "display_name": "Bezemkaas", "link": "https://stackoverflow.com/users/5661049/bezemkaas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 474, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449857801, "creation_date": 1449694268, "last_edit_date": 1449695199, "question_id": 34188714, "link": "https://stackoverflow.com/questions/34188714/sdl-renderpresent-updates-the-screen-irregularly", "title": "SDL_RenderPresent() updates the screen irregularly", "body": "<p>I have written a programme to bounce around a rectangle. I use SDL_RenderFillRect to draw a rectangle and SDL_RenderPresent to present that rectangle after which SDL_RenderClear clears the renderer to do it all over again. I use SDL_GetTicks and SDL_Delay to get it to update 60 times a second but somehow the speed of the rectangle is irregular instead of smooth. I have tried different things the past few days but nothing helped. Is there a specific way I should use SDL_RenderPresent to get my window to update regularly?</p>\n\n<pre><code>#include &lt;SDL.h&gt;\n#include &lt;math.h&gt;\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n\nconst int width = 1200;\nconst int height = 800;\nconst double PI = 3.141592653589793;\n\nvoid init();\nvoid quit();\n\ndouble x = width / 2;\ndouble y = height / 2;\ndouble r = 25;\ndouble vx = 1;\ndouble vy = 1;\ndouble s = 4;\ndouble tickStart = SDL_GetTicks();\ndouble tickEnd = 0;\ndouble tickDelta = 0;\ndouble frameTime = 1001.0 / 60.0;\ndouble delayTime = 0;\n\nint c = 0;\n\nSDL_Window* window;\nSDL_Renderer* renderer;\nSDL_Event *event;\nSDL_Rect rect;\n\nint main(int argc, char* argv[]) {\n    init();\n\n    // main loop\n    bool running = true;\n    while (running) {\n        event = new SDL_Event;\n\n        while (SDL_PollEvent(event) != 0) {\n            if (event-&gt;type == SDL_QUIT) {\n                running = false;\n                break;\n            }\n        }\n\n        //renderer\n        SDL_SetRenderDrawColor(renderer, 0, 0, 0, 255);\n        SDL_RenderClear(renderer);\n        SDL_SetRenderDrawColor(renderer, 0, 0, 255, 255);\n\n        // update position\n        x = x + vx*s;\n        y = y + vy*s;\n\n        // check wall collision\n        if (x - r &lt;= 0) {\n            vx = -vx;\n            x = r;\n        }\n        else if (x + r &gt;= width) {\n            vx = -vx;\n            x = width - r;\n        }\n\n        if (y - r &lt;= 0) {\n            vy = -vy;\n            y = r;\n        }\n        else if (y + r &gt;= height) {\n            vy = -vy;\n            y = height - r;\n        }\n\n        // rect     \n        rect.h = rect.w = 2 * r;\n        rect.x = x - r;\n        rect.y = y - r;\n        SDL_RenderFillRect(renderer, &amp;rect);\n\n        // present everything at the right time\n        tickEnd = SDL_GetTicks();\n        tickDelta = tickEnd - tickStart;\n        delayTime = frameTime - tickDelta;\n        std::cout &lt;&lt; tickDelta &lt;&lt; std::endl;\n\n        if (delayTime &gt; 0)\n            SDL_Delay(delayTime);\n\n        tickStart = SDL_GetTicks();\n        SDL_RenderPresent(renderer);\n\n        c++;\n    }\n\n    quit();\n    return 0;\n}\n\nvoid init()\n{\n    SDL_Init(SDL_INIT_EVERYTHING);\n    window = SDL_CreateWindow(\"test\", 200, 100, width, height, SDL_WINDOW_SHOWN);\n    renderer = SDL_CreateRenderer(window, -1, SDL_RENDERER_ACCELERATED);\n}\n\nvoid quit()\n{\n    SDL_DestroyRenderer(renderer);\n    SDL_DestroyWindow(window);\n    SDL_QUIT;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "struct"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1449694352, "post_id": 34188682, "comment_id": 56123841, "body": "Two pointers can point at the same thing but still be different pointers."}, {"owner": {"reputation": 301, "user_id": 4349614, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rGQvLlUWH3o/AAAAAAAAAAI/AAAAAAAAABE/jIxaQ_wzPUA/photo.jpg?sz=128", "display_name": "Ternvein", "link": "https://stackoverflow.com/users/4349614/ternvein"}, "edited": false, "score": 0, "creation_date": 1449694434, "post_id": 34188682, "comment_id": 56123885, "body": "<code>r1 = r;</code> <code>r1 = new node();</code> So... <code>r1</code> is a brand new node. The output is completely expected."}], "answers": [{"tags": [], "owner": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "is_accepted": false, "score": 0, "last_activity_date": 1449694444, "creation_date": 1449694444, "answer_id": 34188768, "question_id": 34188682, "link": "https://stackoverflow.com/questions/34188682/confusion-about-struct-pointer-c/34188768#34188768", "title": "confusion about struct pointer C++", "body": "<p>They cannot be the same. <code>r</code> and <code>r1</code> are two locations in the memory which can hold address to <code>node</code> (by definition in the code), so when you perform <code>r1 = r</code>, the value in those memory locations become the same (pointer value).</p>\n\n<p>But, when you later perform <code>r1 = new node;</code> then the <code>new</code> returns a pointer to the newly created object, which is only stored in <code>r1</code> memory location. Since address in <code>r</code> location in the memory does not change, hence you see the results.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1449694474, "creation_date": 1449694474, "answer_id": 34188778, "question_id": 34188682, "link": "https://stackoverflow.com/questions/34188682/confusion-about-struct-pointer-c/34188778#34188778", "title": "confusion about struct pointer C++", "body": "<blockquote>\n  <p>I have a question: in these two line:  <code>r1 = r;r1 = new node();</code> I think that when <code>r1</code> becomes a new empty node, <code>r</code> should also be a new empty node because <code>r1=r</code> is a pointer assignment</p>\n</blockquote>\n\n<p>Nope.  When you do <code>r1 = r;</code> all you are doing is setting the value of <code>r1</code> to the same value of <code>r</code>.  It does not link <code>r1</code> and <code>r</code> together and anything you change in <code>r1</code> to does nothing to <code>r</code>.</p>\n\n<p>You should also note that <code>r1 = r;</code> causes a memory leak as <code>r1</code> no longer points to the node you originally created and you did not <code>delete</code> it before the assignment.</p>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 3, "last_activity_date": 1449697054, "creation_date": 1449697054, "answer_id": 34189467, "question_id": 34188682, "link": "https://stackoverflow.com/questions/34188682/confusion-about-struct-pointer-c/34189467#34189467", "title": "confusion about struct pointer C++", "body": "<p>A pointer is exactly that, a pointer--it points (refers to) something else.</p>\n\n<p>I think in this case, it's probably easiest to understand things graphically. So, after you do:</p>\n\n<pre><code>node *r = new node();\nnode *r1 = new node();\nr-&gt;id = 100;\n</code></pre>\n\n<p>The situation is roughly like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JvCap.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JvCap.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then when you execute: <code>r1 = r;</code>, you get a situation like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/1Sr7z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1Sr7z.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note that you've leaked the <code>node</code> that <code>r1</code> was pointing to (i.e., you no longer have a pointer to it, so you can't delete it any more).</p>\n\n<p>Then when you do <code>r1 = new node();</code>: you get something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2ueJ6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2ueJ6.png\" alt=\"enter image description here\"></a></p>\n\n<p>Finally, after executing <code>r1-&gt;child = r;</code> you have something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FX7Tp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FX7Tp.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1449697089, "creation_date": 1449697089, "answer_id": 34189477, "question_id": 34188682, "link": "https://stackoverflow.com/questions/34188682/confusion-about-struct-pointer-c/34189477#34189477", "title": "confusion about struct pointer C++", "body": "<p>Marching through the code step by step may help explain what is happening.</p>\n\n<pre><code>    node *r = new node();\n</code></pre>\n\n<p>Create block of memory <strong>A</strong> and point <code>r</code> at <strong>A</strong></p>\n\n<pre><code>    node *r1 = new node();\n</code></pre>\n\n<p>Create block of memory <strong>B</strong> and point <code>r1</code> at <strong>B</strong></p>\n\n<pre><code>    r-&gt;id = 100;\n</code></pre>\n\n<p>Dereference <code>r</code> to locate <strong>A</strong>. <code>id</code> in <strong>A</strong> is set to 100</p>\n\n<pre><code>    r1 = r;\n</code></pre>\n\n<p>Point  <code>r1</code> at the same thing as <code>r</code>. <code>r1</code> now points to <strong>A</strong>. There is no linkage between <strong>A</strong> and <strong>B</strong>. Nothing is copied from <strong>A</strong> to <strong>B</strong>. <code>r1</code> is merely redirected to point <strong>A</strong> instead of <strong>B</strong>.</p>\n\n<p><strong>B</strong> no longer has any referrers and is lost. This is called a memory leak. <code>delete r1;</code> before reassigning to prevent this. Better, since <strong>B</strong> is never used, don't allocate it in the first place.</p>\n\n<pre><code>    r1 = new node();\n</code></pre>\n\n<p>Create block of memory <strong>C</strong> and point <code>r1</code> at <strong>C</strong>. As above, <code>r1</code> is directed to point at <strong>C</strong> instead of <strong>A</strong>. No copying or other side effects take place. There is no longer any association between <code>r1</code> and <strong>A</strong>. <strong>A</strong> is unchanged and <code>r</code> still points at <strong>A</strong>.</p>\n\n<pre><code>    r1-&gt;child = r;\n</code></pre>\n\n<p>Dereference <code>r1</code> to locate <strong>C</strong>. Point <code>child</code> in <strong>C</strong> at <strong>A</strong>.</p>\n\n<pre><code>    cout &lt;&lt; \"r1 \" &lt;&lt; r1-&gt;id &lt;&lt; endl;\n</code></pre>\n\n<p>Dereference <code>r1</code> to locate <strong>C</strong>. Print out <code>id</code> in <strong>C</strong>. <code>id</code> in <strong>C</strong> has never been assigned a value, so using it is undefined behaviour. Any value may be printed, nothing may be printed, or the program may cause the computer to grow legs and eat the neighbour's cat, though this is unlikely.</p>\n\n<pre><code>    cout &lt;&lt; \"r1 child \" &lt;&lt; (r1-&gt;child)-&gt;id &lt;&lt; endl;\n</code></pre>\n\n<p>Dereference <code>r1</code> to locate <strong>C</strong>. Dereference <code>child</code> in <strong>C</strong> to locate <strong>A</strong>. Print out <code>id</code> in <strong>A</strong>, 100.</p>\n"}], "owner": {"reputation": 1483, "user_id": 4681361, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d57037eeb328d680c80cfa28acb97b3b?s=128&d=identicon&r=PG&f=1", "display_name": "daydayup", "link": "https://stackoverflow.com/users/4681361/daydayup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 1, "accepted_answer_id": 34189467, "answer_count": 4, "score": 0, "last_activity_date": 1449697089, "creation_date": 1449694166, "last_edit_date": 1449695089, "question_id": 34188682, "link": "https://stackoverflow.com/questions/34188682/confusion-about-struct-pointer-c", "title": "confusion about struct pointer C++", "body": "<p>I wrote the following piece of code. I have a question: in these two line:  </p>\n\n<pre><code>r1 = r;\nr1 = new node(); \n</code></pre>\n\n<p>I think that when <code>r1</code> becomes a new empty node, <code>r</code> should also be a new empty node because <code>r1=r</code> is a pointer assignment, so <code>r1</code> and <code>r</code> represent the same address. However I must be wrong because the result shows that <code>r</code> here was not changed. Could anybody explain it to me why <code>r</code> is not changed? Thank you. </p>\n\n<pre><code>#include&lt;iostream&gt;\n\nusing namespace std;\n\nstruct node{\n    int id;\n    node *child;\n};\n\n\nint main()\n{\n    node *r = new node();\n    node *r1 = new node();\n    r-&gt;id = 100;\n\n    r1 = r;\n    r1 = new node();\n    r1-&gt;child = r;\n\n    cout &lt;&lt; \"r1 \" &lt;&lt; r1-&gt;id &lt;&lt; endl;\n    cout &lt;&lt; \"r1 child \" &lt;&lt; (r1-&gt;child)-&gt;id &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>r1 0\nr1 child 100\n</code></pre>\n"}, {"tags": ["python", "c++", "qt", "pyqt", "qlistview"], "answers": [{"comments": [{"owner": {"reputation": 6214, "user_id": 4865723, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a94d3ff9e3ae1ddf8c09b8511ba76f0?s=128&d=identicon&r=PG&f=1", "display_name": "buhtz says get vaccinated", "link": "https://stackoverflow.com/users/4865723/buhtz-says-get-vaccinated"}, "edited": false, "score": 0, "creation_date": 1449755938, "post_id": 34188907, "comment_id": 56151923, "body": "Setting the color doesn&#39;t work. <code>palette = QPalette(); palette.setColor(QPalette.AlternateBase, Qt.yellow); self.setPalette(palette); self.setAlternatingRowColors(True)</code>. Any idea?"}, {"owner": {"reputation": 6214, "user_id": 4865723, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a94d3ff9e3ae1ddf8c09b8511ba76f0?s=128&d=identicon&r=PG&f=1", "display_name": "buhtz says get vaccinated", "link": "https://stackoverflow.com/users/4865723/buhtz-says-get-vaccinated"}, "edited": false, "score": 0, "creation_date": 1449756282, "post_id": 34188907, "comment_id": 56152198, "body": "Mhm... Need to set <code>QPalette.Base</code>, too. Then it works. But I don&#39;t want to set this explicite. How can I get the current <code>QPalette.Base</code> color to set it."}], "tags": [], "owner": {"reputation": 5197, "user_id": 503888, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f998ce921f025f19bfea5d86032e9f94?s=128&d=identicon&r=PG", "display_name": "Achayan", "link": "https://stackoverflow.com/users/503888/achayan"}, "is_accepted": true, "score": 1, "last_activity_date": 1449694908, "creation_date": 1449694908, "answer_id": 34188907, "question_id": 34188594, "link": "https://stackoverflow.com/questions/34188594/qlistview-with-row-background-in-two-different-colors/34188907#34188907", "title": "QListView with row background in two different colors", "body": "<p>self. listWidget.setAlternatingRowColors(True) this will give you Alternate color for each row.</p>\n"}], "owner": {"reputation": 6214, "user_id": 4865723, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a94d3ff9e3ae1ddf8c09b8511ba76f0?s=128&d=identicon&r=PG&f=1", "display_name": "buhtz says get vaccinated", "link": "https://stackoverflow.com/users/4865723/buhtz-says-get-vaccinated"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 787, "favorite_count": 0, "accepted_answer_id": 34188907, "answer_count": 1, "score": 0, "last_activity_date": 1449694908, "creation_date": 1449693793, "question_id": 34188594, "link": "https://stackoverflow.com/questions/34188594/qlistview-with-row-background-in-two-different-colors", "title": "QListView with row background in two different colors", "body": "<p>I use <code>QListView</code> (in PyQt5) to display strings.\nI want to have the background color of each item in that list changing between two colors to make it easier to read.</p>\n\n<p>I tried <code>Qt.DecorationRole</code> but this only create an \"icon\" on the left side of each item.</p>\n"}, {"tags": ["c++", "mfc"], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1449694687, "post_id": 34188653, "comment_id": 56123999, "body": "Note to OP: Make sure you scope this carefully or you may find yourself breaking stuff."}], "tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": true, "score": 3, "last_activity_date": 1449694061, "creation_date": 1449694061, "answer_id": 34188653, "question_id": 34188584, "link": "https://stackoverflow.com/questions/34188584/is-it-possible-to-hide-or-undefine-a-typedef/34188653#34188653", "title": "Is it possible to hide (or undefine) a typedef?", "body": "<p>Yes it's possible with a precompiler directive like the example below:</p>\n\n<pre><code>typedef int foo;\n#define foo not_to_be_used\n\nint main() {\n  foo a = 1; // error: unknown type name 'not_to_be_used'\n}\n</code></pre>\n\n<p>Basically, this way you cancel the typedef. The code above will issue an error if <code>foo</code> is used below the pre-compiler definition.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/5d4ee6ab7a6a15ba\" rel=\"nofollow\"><strong>Live Demo</strong></a></p>\n"}], "owner": {"reputation": 3358, "user_id": 580041, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/tXAwG.png?s=128&g=1", "display_name": "Goldorak84", "link": "https://stackoverflow.com/users/580041/goldorak84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1572, "favorite_count": 0, "closed_date": 1449695095, "accepted_answer_id": 34188653, "answer_count": 1, "score": 3, "last_activity_date": 1449694061, "creation_date": 1449693768, "question_id": 34188584, "link": "https://stackoverflow.com/questions/34188584/is-it-possible-to-hide-or-undefine-a-typedef", "closed_reason": "Duplicate", "title": "Is it possible to hide (or undefine) a typedef?", "body": "<p>To avoid confusion and possible errors, is it possible to hide or undefine a typedef.</p>\n\n<p>I do a lot of c++ and java at the same time. In java, the boolean type is <code>boolean</code>, and in c++ it's <code>bool</code>. The problem is that somewhere in the windows c++ libraries, there is a : <code>typedef unsigned char boolean;</code> That means that, in my c++ code, I mistype the <code>bool</code> type as <code>boolean</code>, it will compile and it could cause unexpected error, because it's an unsigned char instead of a true <code>bool</code>.</p>\n\n<p>So what can I do to hide or undefine the boolean typedef in c++?</p>\n"}, {"tags": ["c++", "c", "linux", "shell"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1449693500, "post_id": 34188469, "comment_id": 56123359, "body": "use exec() instead of fork(), so the child process completely replaces the &quot;parent&quot;?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1449693553, "post_id": 34188469, "comment_id": 56123396, "body": "Slava, can&#39;t be a duplicate of this - the question is exactly the opposite, how one DOES NOT create a daemon :)"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1449693608, "post_id": 34188469, "comment_id": 56123428, "body": "I&#39;d say, do not exit from the parent until all it&#39;s children are done. Good manners anyway unless you are doing a daemon, which you obviously don&#39;"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1449693670, "post_id": 34188469, "comment_id": 56123470, "body": "@SergeyA hmm &quot;How should I change my program so that shell leaves the child in foreground?&quot; sounds like a daemon"}, {"owner": {"reputation": 1036, "user_id": 209289, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/U4uT5.gif?s=128&g=1", "display_name": "facetus", "link": "https://stackoverflow.com/users/209289/facetus"}, "edited": false, "score": 0, "creation_date": 1449693694, "post_id": 34188469, "comment_id": 56123486, "body": "In my real case scenario the child must wait for the parent to exit."}, {"owner": {"reputation": 1036, "user_id": 209289, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/U4uT5.gif?s=128&g=1", "display_name": "facetus", "link": "https://stackoverflow.com/users/209289/facetus"}, "edited": false, "score": 0, "creation_date": 1449693771, "post_id": 34188469, "comment_id": 56123528, "body": "It would sound like demon if I asked about background, not foreground."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1449693773, "post_id": 34188469, "comment_id": 56123530, "body": "@noxmetus your scenario is wrong, parent should wait for child to exit, not the way around"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1449693824, "post_id": 34188469, "comment_id": 56123547, "body": "@Slava, like I said - exactly the opposite of it. Daemons <b>are not</b> foreground processess."}, {"owner": {"reputation": 1036, "user_id": 209289, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/U4uT5.gif?s=128&g=1", "display_name": "facetus", "link": "https://stackoverflow.com/users/209289/facetus"}, "edited": false, "score": 0, "creation_date": 1449693841, "post_id": 34188469, "comment_id": 56123555, "body": "No, my scenario is not wrong."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1449693935, "post_id": 34188469, "comment_id": 56123603, "body": "@noxmetus yes it is, as it is against how system works. if parent terminates orphan becomes a child of PID 1, so that will not work"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1449693944, "post_id": 34188469, "comment_id": 56123611, "body": "@noxmetus, may be it is not wrong, but I doubt it is doable. In *unix parent-child relationship between processess are strict, as well as their responsibilities."}, {"owner": {"reputation": 1036, "user_id": 209289, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/U4uT5.gif?s=128&g=1", "display_name": "facetus", "link": "https://stackoverflow.com/users/209289/facetus"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1449694073, "post_id": 34188469, "comment_id": 56123670, "body": "@Slava it is not. It&#39;s not against how system works."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1449694157, "post_id": 34188469, "comment_id": 56123718, "body": "@noxmetus when parent exits PPID is changed to 1, not PID"}, {"owner": {"reputation": 1036, "user_id": 209289, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/U4uT5.gif?s=128&g=1", "display_name": "facetus", "link": "https://stackoverflow.com/users/209289/facetus"}, "edited": false, "score": 0, "creation_date": 1449694275, "post_id": 34188469, "comment_id": 56123791, "body": "I am fine with PPID = 1."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1449694383, "post_id": 34188469, "comment_id": 56123859, "body": "then parent is init not shell. and shell would not see your process as a child. why don&#39;t you use exec() btw as Marc suggested?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1449694789, "post_id": 34188469, "comment_id": 56124056, "body": "It&#39;s simply not possible for the child to move into the foreground when the parent exits. The foreground process has to be a child of the shell, and the process created by <code>fork</code> is the shell&#39;s grandchild."}, {"owner": {"reputation": 1036, "user_id": 209289, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/U4uT5.gif?s=128&g=1", "display_name": "facetus", "link": "https://stackoverflow.com/users/209289/facetus"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1449696327, "post_id": 34188469, "comment_id": 56124851, "body": "@Barmar I don&#39;t understand. &quot;has to be a child&quot; and &quot;is the shell&#39;s grandchild&quot; contradict each other, since child != grandchild.  How about tell the shell not to change the foreground process group ID. Is it possible or it won&#39;t help?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1449696553, "post_id": 34188469, "comment_id": 56124978, "body": "I&#39;m not contradicting myself. The shell creates a process to run the program, that process is a child of the shell. The program then calls <code>fork</code> to create a new process, that process is a child of the program, a grandchild of the shell."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1449696666, "post_id": 34188469, "comment_id": 56125053, "body": "Process groups are irrelevant. A process can only wait for its own children. Unix doesn&#39;t provide any way for a process to wait for a grandchild to exit, and there&#39;s no way for the grandchild to become a child."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1449697410, "post_id": 34188469, "comment_id": 56125418, "body": "Check if <code>SIGCONT</code> can bring the forked child process back to foreground. I don&#39;t think it will work but you can try."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1449697544, "post_id": 34188469, "comment_id": 56125493, "body": "@Barmar has a good point that the grandchild process will get adopted by <code>init</code> and shell will not be able to steal the grandchild which is now the child of <code>init</code>. If shell successfully steals the child, the kernel is broken."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1449698359, "post_id": 34188469, "comment_id": 56125920, "body": "Why do you need the client to wait for the parent?  What are you trying to accomplish by doing this?  Knowing this, we might be able to suggest a better approach."}, {"owner": {"reputation": 1036, "user_id": 209289, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/U4uT5.gif?s=128&g=1", "display_name": "facetus", "link": "https://stackoverflow.com/users/209289/facetus"}, "edited": false, "score": 0, "creation_date": 1449699271, "post_id": 34188469, "comment_id": 56126397, "body": "The scenario is the program tests HW. Under certain conditions we would like to restart the testing. Because of the reasons I can&#39;t control the program must gracefully exit before restart. Restart also has to happen transparently to the user, i.e. no shell scripts. So idea was to start a new process in the end, make the child wait for the parent to exit and then continue. It works, only the child continues in the background."}, {"owner": {"reputation": 1036, "user_id": 209289, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/U4uT5.gif?s=128&g=1", "display_name": "facetus", "link": "https://stackoverflow.com/users/209289/facetus"}, "edited": false, "score": 0, "creation_date": 1449700517, "post_id": 34188469, "comment_id": 56127004, "body": "I think I&#39;ll implement a single controller process that starts and restarts children."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1449720128, "post_id": 34188469, "comment_id": 56133039, "body": "killing the parent before the child exits (or is killed) is a good way to create <code>zombie</code> processes.  Such processes are very difficult to eliminate without rebooting the OS.   Why not have the parent perform a <code>waitpid()</code> on the child?"}, {"owner": {"reputation": 1036, "user_id": 209289, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/U4uT5.gif?s=128&g=1", "display_name": "facetus", "link": "https://stackoverflow.com/users/209289/facetus"}, "edited": false, "score": 0, "creation_date": 1449725198, "post_id": 34188469, "comment_id": 56134607, "body": "(i) I think zombie is created in the opposite situation: child exited, parent is alive, but didn&#39;t perform wait operation. When parent exits with alive child the child gets adopted by init. init does the reaping when the child exits. No zombies. (ii) Because it&#39;s not what I need."}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 1, "last_activity_date": 1506080915, "creation_date": 1506080915, "answer_id": 46364077, "question_id": 34188469, "link": "https://stackoverflow.com/questions/34188469/how-in-linux-leave-a-child-process-in-foreground-after-the-parent-dies/46364077#46364077", "title": "How in Linux leave a child process in foreground after the parent dies?", "body": "<blockquote>\n  <p>How should I change my program so that shell leaves the child in\n  foreground?</p>\n</blockquote>\n\n<p>Being <em>in foreground</em> means <em>belonging to the foreground process group on the controlling terminal</em>. Now, the shell changes the foreground process group with the execution of your program - when starting the program, the foreground process group is set to the program's process group, and after the parent's termination, the shell sets the foreground process group back to its own group.<br>\nThere is nothing the parent in your program could do to cause the shell to leave the child in the foreground after the parent's termination. Every change the parent would make to the foreground process group were undone by the shell immediately after the parent exits.<br>\nWhat's more, while the child could join the shell's process group and thereby become a member of the foreground process group after the parent's termination, this wouldn't achieve what you actually want (as opposed to what you asked for) - the shell would still issue its input prompt right after the parent exits, since it plainly waits only for the parent, not for the child.</p>\n"}], "owner": {"reputation": 1036, "user_id": 209289, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/U4uT5.gif?s=128&g=1", "display_name": "facetus", "link": "https://stackoverflow.com/users/209289/facetus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1506080915, "creation_date": 1449693277, "question_id": 34188469, "link": "https://stackoverflow.com/questions/34188469/how-in-linux-leave-a-child-process-in-foreground-after-the-parent-dies", "title": "How in Linux leave a child process in foreground after the parent dies?", "body": "<p>Let's say I have a Linux program that creates a child process then dies, the child continues. When I start this program the shell shows the prompt right after the parent exits. How should I change my program so that shell leaves the child in foreground?</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    switch (fork())\n    {\n    case -1:\n        perror(\"fork\");\n        return 1;\n    case 0: // child\n        sleep(seconds(5));\n        printf(\"%07u %s: Process group ID = %d\\n\", getpid(), currTime(\"%T\").c_str(), getpgrp());\n        printf(\"%07u %s: Foreground process group ID = %d\\n\", getpid(), currTime(\"%T\").c_str(), tcgetpgrp(STDIN_FILENO));\n        break;\n    default: // parent\n        printf(\"%07u %s: Process group ID = %d\\n\", getpid(), currTime(\"%T\").c_str(), getpgrp());\n        printf(\"%07u %s: Foreground process group ID = %d\\n\", getpid(), currTime(\"%T\").c_str(), tcgetpgrp(STDIN_FILENO));\n        break;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Here is how shell session looks like if I start the above:</p>\n\n<pre><code>$ ./test\n0007016 22:57.665929: Process group ID = 7016\n0007016 22:57.666362: Foreground process group ID = 7016\n$ 0007017 23:02.666229: Process group ID = 7016\n0007017 23:02.666703: Foreground process group ID = 27254\n</code></pre>\n\n<p>What I would like to have:</p>\n\n<pre><code>$ ./test\n0007016 22:57.665929: Process group ID = 7016\n0007016 22:57.666362: Foreground process group ID = 7016\n0007017 23:02.666229: Process group ID = 7016\n0007017 23:02.666703: Foreground process group ID = 7016\n\n$\n</code></pre>\n"}, {"tags": ["c++", "pthreads"], "answers": [{"tags": [], "owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "is_accepted": true, "score": 3, "last_activity_date": 1449694765, "creation_date": 1449694765, "answer_id": 34188863, "question_id": 34188395, "link": "https://stackoverflow.com/questions/34188395/returned-value-from-pthread-function-is-different-from-the-calculated-value-with/34188863#34188863", "title": "Returned value from pthread function is different from the calculated value within function", "body": "<p>You're getting this output because both threads are writing their result to the same place - <code>struct args a</code>.</p>\n\n<p>You need to allocate <em>two</em> <code>struct args</code> in the main function, and pass the address of one to the first thread, and the other to the second thread.</p>\n"}], "owner": {"reputation": 61, "user_id": 2487226, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QGmCf.jpg?s=128&g=1", "display_name": "KathyLee", "link": "https://stackoverflow.com/users/2487226/kathylee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 34188863, "answer_count": 1, "score": 0, "last_activity_date": 1449694765, "creation_date": 1449693034, "last_edit_date": 1449694699, "question_id": 34188395, "link": "https://stackoverflow.com/questions/34188395/returned-value-from-pthread-function-is-different-from-the-calculated-value-with", "title": "Returned value from pthread function is different from the calculated value within function", "body": "<p>Now I am trying to use pthread function return values. In the following code, the output I would like to get is either \"38 99\" or \"99 38\" but the program outputs \"99 99\" or \"38 38\". \nWhen I put \"cout\" inside the pthread function, the output is correct, but when I put \"cout\" in the main function, the output is wrong. Can anyone help me check where I did wrong ?</p>\n\n<pre><code>using namespace std;\n\n#define NTHREADS 2\npthread_mutex_t mutex1 = PTHREAD_MUTEX_INITIALIZER;\n\nstruct args{\n  int * numbers;\n  float result;\n};\n\nvoid *add(void* a){\n   struct args *number = (struct args *)a;\n   pthread_mutex_lock( &amp;mutex1 );\n   int *n = (int*) number-&gt;numbers;\n   float sum =0;\n   for(int i = 0; i &lt; 5; i++){\n     sum = sum + n[i] +5;\n   }\n   float av = sum/5;\n   number-&gt; result  = av;\n   //cout &lt;&lt; number-&gt;result &lt;&lt;endl;\n    pthread_mutex_unlock( &amp;mutex1 );\n   return number;  \n   }\n\nvoid *substract(void* a){\n struct args *number = (struct args *)a;\n pthread_mutex_lock( &amp;mutex1 );\n int *n = (int*) number-&gt;numbers;\n float sum =0;\n for(int i = 0; i &lt; 5; i++){\n    sum = sum + n[i] *3;\n }\n float av = sum/5;\n number-&gt; result  = av;\n //  cout &lt;&lt; number-&gt;result &lt;&lt;endl;\n pthread_mutex_unlock( &amp;mutex1 );\n\n return number;\n}\n\nmain(){\npthread_t thread_id[NTHREADS];\nint i, j;\n\nint *numbers = new int[5];\nnumbers[0] = 34; numbers[1] = 2; numbers[2]= 77; numbers[3] = 40; numbers[4] = 12;\n\nstruct args a;\na.numbers = numbers;\npthread_create( &amp;thread_id[0], NULL, add, (void*) &amp;a);\npthread_create( &amp;thread_id[1], NULL, substract, (void*) &amp;a );\nvoid *status1;\nvoid * status2;\n\npthread_join( thread_id[0], &amp;status1);\npthread_join( thread_id[1], &amp;status2);\nargs status = *(args*) status1;\nfloat ra = status.result;\ncout &lt;&lt; ra &lt;&lt; endl;\n\nargs statuss = *(args*) status2;\nfloat rb = statuss.result;\ncout &lt;&lt; rb &lt;&lt; endl;\n\n exit(EXIT_SUCCESS);\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 1, "creation_date": 1449693299, "post_id": 34188373, "comment_id": 56123261, "body": "The documentation for <code>Clojure</code>&#39;s partition clearly states that it&#39;s lazy: The actual call to partition does almost no work. In C++ you&#39;re doing ALL the work up front. This may not in fact be the C++ idiomatic way to solve your real problem."}, {"owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "reply_to_user": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1449693362, "post_id": 34188373, "comment_id": 56123290, "body": "@MarkB that&#39;s true, but in Clojure I can realize it fully in a few milliseconds. If I do not realize it, then there is no work done and it takes less than 1 millisecond, but I&#39;m referring to the full realization of the sequence."}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1449695266, "post_id": 34188373, "comment_id": 56124290, "body": "Well, I cannot reproduce this on my current system. <code>partition</code> seems fast, unless your example is far too minimal. You&#39;ve tried profiling your program already, right? That being said, your use of <code>std::move</code> isn&#39;t right."}, {"owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "reply_to_user": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1449696209, "post_id": 34188373, "comment_id": 56124774, "body": "@Zeta when you say it seems fast, how fast are you talking, for say 50K elements? The example I posted is only 30 elements but try changing that to 50K and tell me what it gives you."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1449696235, "post_id": 34188373, "comment_id": 56124791, "body": "You are likely creating lots of copies. Like Zeta said, you should absolutely not use <code>std::move</code> on function return values, they are rvalues already. But you should do <code>ret.push_back(std::move(temp));</code> to move that into the outer vector. I am also not sure if declaring <code>temp</code> outside the loop is a win, as that disables RVO."}, {"owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1449696307, "post_id": 34188373, "comment_id": 56124831, "body": "@BoPersson good idea on using move for the push_back. For the temp definition, there is a condition test that depends on it, hence why I declared it."}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1449696425, "post_id": 34188373, "comment_id": 56124905, "body": "@johnbakers: Yes, but you can write <code>auto temp = take(...)</code>, and the function would still work. This does not only reduce the scope of <code>temp</code> (which is usually a win), but also enables RVO."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1449696560, "post_id": 34188373, "comment_id": 56124984, "body": "Also, isn&#39;t the <code>drop</code> call just a complicated way of doing <code>remain.erase(remain.begin(), remain.begin() + sized)</code>?"}, {"owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "reply_to_user": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1449696684, "post_id": 34188373, "comment_id": 56125069, "body": "@Zeta i tried your <code>auto temp</code> idea to remove <code>temp</code> from the outer scope but it made no difference in the duration of the algorithm"}, {"owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1449696883, "post_id": 34188373, "comment_id": 56125160, "body": "@BoPersson awesome, thanks! that proved to increase the speed very dramatically!"}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1449696888, "post_id": 34188373, "comment_id": 56125164, "body": "Again, you&#39;ve profiled your program and you know where the bottlenecks are, right? (Am not at my machine anymore, so I cannot do this today). @BoPersson: Yes. But I guess OP wants to go the full &quot;functional style&quot;. Which is kind of nonsense. The &quot;fastest&quot; was would return a <code>std::vector&lt;vector_view&gt;</code> and not split the actual vector. Takes a lot less memory."}, {"owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "reply_to_user": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1449696946, "post_id": 34188373, "comment_id": 56125196, "body": "@Zeta i don&#39;t care if the implementation is not functional-like, just that the user of these tools can depend on their speed to write higher-level functional-like idioms. in this case, the drop as mentioned by two commenters proved to be a big bottleneck indeed"}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1449697055, "post_id": 34188373, "comment_id": 56125251, "body": "@johnbakers: If you&#39;re fully interested in speed, try to come up with a <code>class vector_view</code>, which provides an interface into a vector, but doesn&#39;t take additional memory (in terms of N, constant memory per <code>vector_view</code> is allowed). That&#39;s probably the memory-friendliest and one of fastest solutions. (If Clojure lists are anything like Haskell ones, there&#39;s a lot of sharing going on behind the scenes, so depending on <code>step</code> those languages might take a lot less memory than your current C++ variant)."}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1449697533, "post_id": 34188373, "comment_id": 56125486, "body": "@johnbakers: Err, if you replaced the <code>take</code> with an <code>erase</code>, didn&#39;t you accidentially change semantics?"}, {"owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "reply_to_user": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1449697900, "post_id": 34188373, "comment_id": 56125707, "body": "@Zeta all a take does is erase from an index all the way to the end"}], "answers": [{"comments": [{"owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "edited": false, "score": 0, "creation_date": 1449694502, "post_id": 34188705, "comment_id": 56123922, "body": "I have added example output of the function."}, {"owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "edited": false, "score": 0, "creation_date": 1449705052, "post_id": 34188705, "comment_id": 56128846, "body": "your edit with code sample is a good reminder of the techniques to keep in mind when moving to a language like c++ after working in a higher-level language. yours is much cleaner and simpler by working strictly on iterators without creating new values (copies) along the way"}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1449698721, "last_edit_date": 1449698721, "creation_date": 1449694233, "answer_id": 34188705, "question_id": 34188373, "link": "https://stackoverflow.com/questions/34188373/slow-performance-on-this-stdvector-partition/34188705#34188705", "title": "Slow performance on this std::vector partition", "body": "<p>The reason for the performance problem is that your <code>drop</code> function turns the algorithm into <code>O(n^2)</code> rather than linear time, because it has to keep making a new <code>remain</code> container with all the elements that haven't been partitioned out yet.</p>\n\n<p>I'm still trying to grok what the code is intended to do so I could provide a suggestion on how to fix/improve your version.</p>\n\n<p>Totally untested (tight on time right now) but I think this ought to be close:</p>\n\n<pre><code>std::vector&lt;std::vector&lt;T&gt;&gt; partition(int size, int step, const std::vector&lt;T&gt;&amp; coll, bool showPartialEnd=false)\n{\n    std::vector&lt;std::vector&lt;T&gt;&gt; ret;\n\n    if (size&lt;1||step&lt;1) return ret;\n\n    ret.reserve(coll.size() / step + 1);\n\n    std::vector&lt;T&gt;::const_iterator iter = coll.begin();\n    for(; ; iter += step)\n    {\n        // If you have enough elements left for an entire chunk, push it.\n        if((coll.end() - iter) &gt;= size)\n        {\n            ret.push_back(std::vector&lt;T&gt;(iter, iter + size));\n        }\n        else if(showPartialEnd)\n        {\n            ret.push_back(std::vector&lt;T&gt;(iter, coll.end()));\n            break;   // Remove if you want *all* partial ends instead of just the first one.\n        }\n        else break;\n    }\n\n    return ret;\n}\n</code></pre>\n"}], "owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 34188705, "answer_count": 1, "score": 0, "last_activity_date": 1449698721, "creation_date": 1449692985, "last_edit_date": 1449694487, "question_id": 34188373, "link": "https://stackoverflow.com/questions/34188373/slow-performance-on-this-stdvector-partition", "title": "Slow performance on this std::vector partition", "body": "<p>I've implemented a working <code>partition</code> function that behaves like the useful tool of the same name in Clojure. However, mine is very slow. While the Clojure function can partition a million elements completely in a few milliseconds, mine takes several seconds even with 50K elements. (Note: I am not comparing mine to the lazy function call available in Clojure as noted in the comments; I'm talking about the full realization where laziness does not apply).</p>\n\n<p>It and its helpers are:</p>\n\n<pre><code>template &lt;typename T&gt;\nstd::vector&lt;T&gt; take(int size, const std::vector&lt;T&gt;&amp; coll){\n    if (size&lt;0) return std::vector&lt;T&gt;();\n    auto sized = size &gt; coll.size() ? coll.size() : size;\n    typename std::vector&lt;T&gt;::const_iterator first = coll.begin();\n    typename std::vector&lt;T&gt;::const_iterator last = first + sized;\n    return std::vector&lt;T&gt;(first,last);\n}\n\ntemplate &lt;typename T&gt;\nstd::vector&lt;T&gt; drop(int size, const std::vector&lt;T&gt;&amp; coll){\n    if (size&lt;0) return std::vector&lt;T&gt;();\n    auto sized = size &gt; coll.size() ? coll.size() : size;\n    typename std::vector&lt;T&gt;::const_iterator first = coll.begin()+sized;\n    typename std::vector&lt;T&gt;::const_iterator last = coll.end();\n    return std::vector&lt;T&gt;(first,last);\n}\n\ntemplate &lt;typename T&gt;\nstd::vector&lt;std::vector&lt;T&gt;&gt; partition(int size, int step, const std::vector&lt;T&gt;&amp; coll, bool showPartialEnd=false){\n    std::vector&lt;std::vector&lt;T&gt;&gt; ret;\n    ret.reserve(coll.size());\n    if (size&lt;1||step&lt;1) return ret;\n    std::vector&lt;T&gt; temp;\n    std::vector&lt;T&gt; remain=coll;\n    auto building=true;\n        do {\n            temp=std::move(take(size, remain));\n            building=(showPartialEnd?(temp.size()&gt;0):(temp.size()==size));\n            if (building==true){\n                ret.push_back(temp);\n                remain=std::move(drop(step, remain));\n            }\n        } while (building==true);\n    return ret;\n}\n</code></pre>\n\n<p>I'd love some pointers about where I could optimize this so it behaves much more quickly. I tried reserving size so the <code>push_back</code> wouldn't have to allocate everytime, but this made no difference (and actually I've overallocated the size for most use cases). I also thought maybe the <code>showPartialEnd?</code> condition might be a roadblock since it doesn't really need to happen with every loop, but splitting into two loops with just one iteration of the condition to select the loop made no difference.</p>\n\n<p>Here is an example use:</p>\n\n<pre><code>void examples(){\n    auto x=range(30);\n    auto y=partition(3, 2, x);\n    std::for_each(y.begin(), y.end(), printVector&lt;int&gt;);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0 1 2 \n2 3 4 \n4 5 6 \n6 7 8 \n8 9 10 \n10 11 12 \n12 13 14 \n14 15 16 \n16 17 18 \n18 19 20 \n20 21 22 \n22 23 24 \n24 25 26 \n26 27 28 \n</code></pre>\n"}, {"tags": ["c++", "multithreading", "hashmap", "tbb"], "answers": [{"tags": [], "owner": {"reputation": 5833, "user_id": 2527797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83539ee8bca535eca6c4be5c856a738d?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/2527797/anton"}, "is_accepted": false, "score": 0, "last_activity_date": 1449729609, "last_edit_date": 1449729609, "creation_date": 1449702446, "answer_id": 34190745, "question_id": 34188365, "link": "https://stackoverflow.com/questions/34188365/tbbconcurrent-hash-map-how-to-return-if-key-entry-is-blocked-by-other-thread/34190745#34190745", "title": "tbb::concurrent_hash_map - how to return if key-entry is blocked by other thread", "body": "<p>Do you know that traversing <code>tbb::concurrent_hash_map</code> is not thread-safe? If your code is serial, there is nothing to protect then: so, you don't need to hold an accessor.</p>\n\n<p>In any case, locking an element for a long time is a bad idea because it hurts scalability and leads to deadlocks like yours, it should be released immediately when the update is done or data is read.</p>\n\n<p>General rule for concurrent_hash_map is: do not run any hash table operation on other acccessors while holding the first one.</p>\n\n<p>So, just release the accessor <code>acc</code> as soon you done with it: <code>acc.release()</code></p>\n"}], "owner": {"reputation": 11, "user_id": 3759473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beffc7940275f01d54d457f4e51d4369?s=128&d=identicon&r=PG&f=1", "display_name": "user3759473", "link": "https://stackoverflow.com/users/3759473/user3759473"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449729609, "creation_date": 1449692954, "question_id": 34188365, "link": "https://stackoverflow.com/questions/34188365/tbbconcurrent-hash-map-how-to-return-if-key-entry-is-blocked-by-other-thread", "title": "tbb::concurrent_hash_map - how to return if key-entry is blocked by other thread", "body": "<p>i'm writing a program, where are multiple threads add entries to an (tbb::concurrent_hash_map) hash map and at the same time other threads travers this map and manipulate the entries on the hash map. At each time one thread manipulat and work with one entry and blocks this entry with an accessor (so that there won't be a conflict and no other thread can access this entry). After manipulating the data, the thread insert the data and release the accessor.</p>\n\n<p>My problem now is that a thread how access a blocked entry is waiting till the accessor of this entry is released even if other entries on the hash map are not blocked. The goal i want to achieve is, that threads skipping blocked entries and go the the next nonblocked entry or return to my function. Is there a good solution for it?</p>\n\n<p>The following code snippet as short single thread example:</p>\n\n<pre><code>...\ntypdef tbb::concurrent_hash_map&lt;int,unsigned int&gt; typ_hash_map;\ntyp_hash_map hash_map;\ntyp_hash_map::accessor acc;\ntyp_hash_map::accessor acc2;\n//hash_map filled with 4 entries...\n\n//block second entry in hash map\ntyp_hash_map::iterator k = hash_map.begin();\nk++;\nconfig.hash_map.insert(acc,k-&gt;first);\n\n//travers all entries in hash_map\nfor(typ_hash_map::iterator j = hash_map.begin();j!=hash_map.end(); j++){\n           hash_map.find(acc2,j-&gt;first); // my problem: return if entry is blocked - at the moment its waiting till acc is released\n            /*\n            Do something with acc2-&gt;second if entry is not blocked, \n            else continue;\n            */\n          }\n...\n</code></pre>\n"}, {"tags": ["c++", "multidimensional-array", "compiler-errors"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1449693176, "post_id": 34188355, "comment_id": 56123181, "body": "Have you tried changing the function parameter type to <code>std::vector&lt;std::vector&lt;int&gt;&gt; &amp;imgArr</code> ?"}, {"owner": {"reputation": 1405, "user_id": 1362548, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/fYe3O.png?s=128&g=1", "display_name": "Bobazonski", "link": "https://stackoverflow.com/users/1362548/bobazonski"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1449693305, "post_id": 34188355, "comment_id": 56123264, "body": "I haven&#39;t worked with vectors before and wanted to use 2d arrays if possible. I also already wrote the function body using row-column (e.g. <code>imagearray[i][j]</code>) notation, can this be used with a vector?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1449693427, "post_id": 34188355, "comment_id": 56123319, "body": "You can refer to <a href=\"http://stackoverflow.com/questions/5329107/passing-a-pointer-representing-a-2d-array-to-a-function-in-c\">this</a>, it&#39;s C, you can use references instead, and possibly templates too, for the array sizes. Have better luck in searching next time."}, {"owner": {"reputation": 550, "user_id": 3545806, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4bd08c73006f268281c9e001da13e12f?s=128&d=identicon&r=PG&f=1", "display_name": "VladimirS", "link": "https://stackoverflow.com/users/3545806/vladimirs"}, "edited": false, "score": 0, "creation_date": 1449694272, "post_id": 34188355, "comment_id": 56123787, "body": "<a href=\"http://stackoverflow.com/questions/8767166/passing-a-2d-array-to-a-c-function\" title=\"passing a 2d array to a c function\">stackoverflow.com/questions/8767166/&hellip;</a>"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1449694700, "post_id": 34188355, "comment_id": 56124009, "body": "Think about how a function like <code>void haar2D(int** imgArr);</code> could determine the dimensions of the array it gets passed and you&#39;ll begin to understand why the array dimensions are important.  Because a 2-dimenstional array isn&#39;t physically the same as referencing data with a pointer to a pointer.  In the latter case, additional data is needed to determine the size of the data referenced."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1449694881, "post_id": 34188355, "comment_id": 56124109, "body": "Go to the whiteboard and write 100 times &quot;An array is not a pointer&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 7, "last_activity_date": 1449693933, "creation_date": 1449693933, "answer_id": 34188623, "question_id": 34188355, "link": "https://stackoverflow.com/questions/34188355/cannot-convert-int-size-to-int/34188623#34188623", "title": "Cannot convert &#39;int (*)[size]&#39; to &#39;int**&#39;", "body": "<p>The function parameter must be declared as the compiler says.</p>\n\n<p>So declare it either like</p>\n\n<pre><code>void haar2D( int imgArr[256][256] );\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void haar2D( int imgArr[][256] );\n</code></pre>\n\n<p>or like</p>\n\n<pre><code>void haar2D( int ( *imgArr )[256] );\n</code></pre>\n\n<p>Take into account that parameters declared like arrays are adjusted to pointers to their elements.</p>\n\n<p>Or your could declare the parameter as reference to array</p>\n\n<pre><code>void haar2D( int ( &amp; imgArr )[256][256] );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 72, "user_id": 7681792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc66b5eb8e7207c8e24c66c114545319?s=128&d=identicon&r=PG&f=1", "display_name": "Wei-Yuan Chen", "link": "https://stackoverflow.com/users/7681792/wei-yuan-chen"}, "is_accepted": false, "score": 2, "last_activity_date": 1489126597, "creation_date": 1489126597, "answer_id": 42711555, "question_id": 34188355, "link": "https://stackoverflow.com/questions/34188355/cannot-convert-int-size-to-int/42711555#42711555", "title": "Cannot convert &#39;int (*)[size]&#39; to &#39;int**&#39;", "body": "<p>If you don't want to change the function.</p>\n\n<pre><code>void haar2D(int** imgArr);\n</code></pre>\n\n<p>You can try to change the imageArray.</p>\n\n<pre><code>int **imageArray=new int*[256];\nfor (int i = 0; i &lt; 256; ++i)\n{\n    imageArray[i] = new int[256];\n}\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>haar2D(imageArray);\n</code></pre>\n"}], "owner": {"reputation": 1405, "user_id": 1362548, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/fYe3O.png?s=128&g=1", "display_name": "Bobazonski", "link": "https://stackoverflow.com/users/1362548/bobazonski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9973, "favorite_count": 1, "answer_count": 2, "score": 7, "last_activity_date": 1489126597, "creation_date": 1449692920, "question_id": 34188355, "link": "https://stackoverflow.com/questions/34188355/cannot-convert-int-size-to-int", "title": "Cannot convert &#39;int (*)[size]&#39; to &#39;int**&#39;", "body": "<p>I have a 256x256 2-dimensional array of floats that I am trying to pass into a function and g++ is giving me the error message: <code>Cannot convert 'int (*)[256]' to 'int**'</code>. How can I resolve this?</p>\n\n<pre><code>void haar2D(int** imgArr);\n\nint imageArray[256][256];\nhaar2D(imageArray);\n</code></pre>\n\n<p>I have tried changing the function parameter to types <code>int[256][256]</code> and <code>int*[256]</code> without successs.</p>\n"}, {"tags": ["c++", "c++11", "iterator"], "answers": [{"tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": false, "score": 1, "last_activity_date": 1449693673, "last_edit_date": 1449693673, "creation_date": 1449693127, "answer_id": 34188427, "question_id": 34188352, "link": "https://stackoverflow.com/questions/34188352/how-to-create-a-collection-with-template-iterator-values/34188427#34188427", "title": "How to create a collection with (template) iterator values?", "body": "<p><code>iterator</code> is a <a href=\"http://en.cppreference.com/w/cpp/language/dependent_name\" rel=\"nofollow\">dependent name</a>, you need to qualify it with the <code>typename</code> keyword:</p>\n\n<pre><code>std::list&lt;typename std::unordered_map&lt;int, T&gt;::iterator&gt; l;\n          ^^^^^^^^\nstd::unordered_map&lt;int, typename std::vector&lt;T&gt;::iterator&gt; um;\n                        ^^^^^^^^\nstd::vector&lt;typename std::list&lt;T&gt;::iterator&gt; v;\n            ^^^^^^^^\n</code></pre>\n"}], "owner": {"reputation": 3577, "user_id": 1814909, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/04ca8b6a14373e9cfe5aaea6096f4c01?s=128&d=identicon&r=PG", "display_name": "kaspersky", "link": "https://stackoverflow.com/users/1814909/kaspersky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449693673, "creation_date": 1449692915, "last_edit_date": 1449693643, "question_id": 34188352, "link": "https://stackoverflow.com/questions/34188352/how-to-create-a-collection-with-template-iterator-values", "title": "How to create a collection with (template) iterator values?", "body": "<p>I want to have a collection (list, vector, map etc.) of iterators, but the code doesn't work:</p>\n\n<pre><code>template &lt;class T&gt;\nclass A\n{\n    std::list&lt;std::unordered_map&lt;int, T&gt;::iterator&gt; l; //doesn't compile\n    std::unordered_map&lt;int, std::vector&lt;T&gt;::iterator&gt; um; //doesn't compile\n    std::vector&lt;std::list&lt;T&gt;::iterator&gt; v; //doesn't compile either\n};\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1449692993, "post_id": 34188290, "comment_id": 56123094, "body": "I suspect Windows may be opening / writing files in a virtualized folder instead..."}], "answers": [{"comments": [{"owner": {"reputation": 1028, "user_id": 1780102, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/R5aty.jpg?s=128&g=1", "display_name": "stukennedy", "link": "https://stackoverflow.com/users/1780102/stukennedy"}, "edited": false, "score": 0, "creation_date": 1449693046, "post_id": 34188380, "comment_id": 56123121, "body": "I am!! I have just figured it out after reading this <a href=\"http://stackoverflow.com/questions/4640730/qt-cannot-cannot-create-write-to-c\" title=\"qt cannot cannot create write to c\">stackoverflow.com/questions/4640730/&hellip;</a>"}], "tags": [], "owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "is_accepted": true, "score": 1, "last_activity_date": 1449693007, "creation_date": 1449693007, "answer_id": 34188380, "question_id": 34188290, "link": "https://stackoverflow.com/questions/34188290/qt-qfileinfoexists-returns-true-in-c-program-files/34188380#34188380", "title": "Qt QFileInfo::exists() returns true in C://Program Files", "body": "<p>You may be a victim of <a href=\"http://blogs.technet.com/b/mrsnrub/archive/2010/08/11/uac-virtualization-allowing-standard-users-to-update-a-system-protected-area.aspx\" rel=\"nofollow\">UAC Virtualization</a>. Check <code>%userprofile%\\AppData\\Local\\VirtualStore\\Program Files</code> to see whether your file is there.</p>\n"}], "owner": {"reputation": 1028, "user_id": 1780102, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/R5aty.jpg?s=128&g=1", "display_name": "stukennedy", "link": "https://stackoverflow.com/users/1780102/stukennedy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 34188380, "answer_count": 1, "score": 0, "last_activity_date": 1449693007, "creation_date": 1449692652, "question_id": 34188290, "link": "https://stackoverflow.com/questions/34188290/qt-qfileinfoexists-returns-true-in-c-program-files", "title": "Qt QFileInfo::exists() returns true in C://Program Files", "body": "<p>It seems that on Windows I can't write to the Program Files or Program Files (x86) directories or their sub-directories anymore.</p>\n\n<p>What I don't understand is how my app is letting that happen when I'm checking the following things</p>\n\n<pre><code>QFile newfile(\"C://Program Files/target.rar\");\nQFileInfo newfileInfo(\"C://Program Files/target.rar\");\n\nnewfile.exists(); //returns true\nnewfile.isWritable(); // returns true\nnewfileInfo.exists(); // returns true\nnewfileInfo.isWritable(); // returns true   \n</code></pre>\n\n<p>none of those should return true in Program Files.\nStrangely it actually proceeds to write to this non-existent file, even though nothing is there, and it produces no write errors. </p>\n"}, {"tags": ["c++", "c", "hash"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1449692887, "post_id": 34188281, "comment_id": 56123032, "body": "Have you run your program in a debugger to help you find the problem yourself? At the minimum it will tell you the line of code which causes the seg fault. If you really need help then please post a <a href=\"http://stackoverflow.com/help/mcve\">Minimal Complete and Verifiable Example</a>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1449693058, "post_id": 34188281, "comment_id": 56123130, "body": "With <code>char hkey[3]; sprintf(hkey, &quot;%d&quot;, n);</code> will <code>n</code> always be a 2-digit number? The <code>struct</code> field allows for an 8-digit number, you have <code>strcpy(new-&gt;ckey, hkey);</code> Should <code>hkey</code> be <code>ktype hkey</code> to match the <code>struct</code> field?"}, {"owner": {"reputation": 285, "user_id": 1536010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f56535dbaa6cec5a3bc7df07b08c84be?s=128&d=identicon&r=PG", "display_name": "skills", "link": "https://stackoverflow.com/users/1536010/skills"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1449693182, "post_id": 34188281, "comment_id": 56123189, "body": "@kaylum Thank you for the tip, i will post a minimal complete and verifiable example in the next 5 min."}, {"owner": {"reputation": 285, "user_id": 1536010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f56535dbaa6cec5a3bc7df07b08c84be?s=128&d=identicon&r=PG", "display_name": "skills", "link": "https://stackoverflow.com/users/1536010/skills"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1449693277, "post_id": 34188281, "comment_id": 56123249, "body": "@WeatherVane hkey corresponds to hashed key, in fact the size of the table is only 31 (academical purposes only, not real world implementation), so that string hkey[3] is enough."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1449693697, "post_id": 34188281, "comment_id": 56123489, "body": "Looing at the code link, don&#39;t you <code>#include</code> any library headers?"}, {"owner": {"reputation": 285, "user_id": 1536010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f56535dbaa6cec5a3bc7df07b08c84be?s=128&d=identicon&r=PG", "display_name": "skills", "link": "https://stackoverflow.com/users/1536010/skills"}, "edited": false, "score": 0, "creation_date": 1449693796, "post_id": 34188281, "comment_id": 56123537, "body": "I&#39;m really sorry, i&#39;m such a fool. Added now."}, {"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 0, "creation_date": 1449695074, "post_id": 34188281, "comment_id": 56124195, "body": "Use <code>new</code>, not <code>malloc</code> in C++ code.  It&#39;s less error-prone.  watch out for your pointer indirections."}], "answers": [{"tags": [], "owner": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "is_accepted": false, "score": 0, "last_activity_date": 1449694790, "creation_date": 1449694790, "answer_id": 34188869, "question_id": 34188281, "link": "https://stackoverflow.com/questions/34188281/hash-tables-closed-addressing-how-to-initialize-and-print/34188869#34188869", "title": "hash tables (Closed addressing). How to initialize and print?", "body": "<p>I think you want to both assign (in initialize) and then check (in print) the value of <code>h[i]</code> rather than <code>*h[i]</code>.</p>\n\n<p>As a side, your insert seems spotty, too.  If nothing else, almost all of C compilers are C++ compilers and <code>new</code> is a C++ keyword.  So it's a bad idea to name your C  variables by that name.</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1449694944, "creation_date": 1449694944, "answer_id": 34188915, "question_id": 34188281, "link": "https://stackoverflow.com/questions/34188281/hash-tables-closed-addressing-how-to-initialize-and-print/34188915#34188915", "title": "hash tables (Closed addressing). How to initialize and print?", "body": "<p>You have your pointers all wrong for function args and implementation. <code>Chashtable</code> is an array of <code>struct</code> pointers. I removed one level of indirection everywhere and the code now runs, perhaps not as you would like! BTW I had to patch in a <code>hash()</code> function. I hope you can take this on from here.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define HASHSIZE 31\n#define EMPTY   \" \"\n#define DELETED \"-\"\n\ntypedef char ktype[9];\ntypedef void *Infoc;\n\ntypedef struct entryc{\n    ktype ckey;\n    Infoc infoc;\n    struct entryc *next;\n} Entryc;\n\ntypedef Entryc *Chashtable[HASHSIZE];\n\nint hash(ktype k, int z) {\n   return rand() % HASHSIZE;\n}\n\nvoid initChain(Chashtable h){\n    int i;\n    for(i=0; i&lt;HASHSIZE; i++){\n        h[i] = NULL;\n    }\n}\n\nvoid printChain(Chashtable h){\n    int i;\n    for(i=0; i&lt;HASHSIZE; i++){\n        if((h[i])){\n        printf(\"-&gt; %s\\n\", (h[i])-&gt;ckey);\n        }\n    }\n}\n\nvoid insertChain(Chashtable h, ktype k, Infoc inf){\n    int n= hash(k, 0);\n    char hkey[3];\n    sprintf(hkey, \"%d\", n);\n    struct entryc *new = malloc (sizeof(struct entryc));\n    strcpy(new-&gt;ckey, hkey);\n    new-&gt;infoc = inf;\n    new-&gt;next = h[n];\n    h[n] = new;\n}\n\nint main(void) {\n    // system (\"tput clear\");\n\n    Chashtable j;\n    initChain(j);\n    printChain(j);\n    insertChain(j, \"myname\", \"single\");\n    printChain(j);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 285, "user_id": 1536010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f56535dbaa6cec5a3bc7df07b08c84be?s=128&d=identicon&r=PG", "display_name": "skills", "link": "https://stackoverflow.com/users/1536010/skills"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449694944, "creation_date": 1449692609, "last_edit_date": 1449693770, "question_id": 34188281, "link": "https://stackoverflow.com/questions/34188281/hash-tables-closed-addressing-how-to-initialize-and-print", "title": "hash tables (Closed addressing). How to initialize and print?", "body": "<p>How should i deal with a hash table for closed addressing?</p>\n\n<p>Data structure:</p>\n\n<pre><code>typedef char ktype[9];\ntypedef void *Infoc;\n\ntypedef struct entryc{\n    ktype ckey;\n    Infoc infoc;\n    struct entryc *next;\n} Entryc;\n\ntypedef Entryc *Chashtable[HASHSIZE];\n</code></pre>\n\n<p>I am declaring a pointer of an array of structs, initialized:</p>\n\n<pre><code>void initChain(Chashtable *h){\n    int i;\n    for(i=0; i&lt;HASHSIZE; i++){\n        *h[i] = NULL;\n    }\n}\n</code></pre>\n\n<p>This is the insertion code:</p>\n\n<pre><code>void insertChain(Chashtable *h, ktype k, Infoc inf){\n    int n= hash(k, 0);\n    char hkey[3];\n    sprintf(hkey, \"%d\", n);\n    struct entryc *new = malloc (sizeof(struct entryc));\n    strcpy(new-&gt;ckey, hkey);\n    new-&gt;infoc = inf;\n    new-&gt;next = *h[n];\n    *h[n] = new;\n}\n</code></pre>\n\n<p>And i would like to print out the hash table:</p>\n\n<pre><code>void printChain(Chashtable *h){\n    int i;\n    for(i=0; i&lt;HASHSIZE; i++){\n        if((*h[i])){\n        printf(\"-&gt; %s\\n\", (*h[i])-&gt;ckey);\n        }\n    }\n}\n</code></pre>\n\n<p>I get a segmentation fault while printing, why?</p>\n\n<p>Thank you.</p>\n\n<p>EDIT:</p>\n\n<p>Complete code with segmentation fault (No other errors in the debugger found):</p>\n\n<p>**</p>\n\n<blockquote>\n  <p>Full compilable code here:</p>\n</blockquote>\n\n<p>**\n<a href=\"http://pastebin.com/GHpfqmP3\" rel=\"nofollow\">http://pastebin.com/GHpfqmP3</a></p>\n"}, {"tags": ["c++", "matlab", "mex"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 3, "creation_date": 1449692947, "post_id": 34188229, "comment_id": 56123063, "body": "<code>mxSetM</code> does not allocate memory, the documentation says that clearly. You need to also <code>mxRealloc</code> and <code>mxSetPr</code> the new pointer when resizing."}, {"owner": {"reputation": 6469, "user_id": 45581, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/eb238726ab7c37281deb582f24afe3d5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/45581/alex"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1449693055, "post_id": 34188229, "comment_id": 56123126, "body": "I assume I need to memcpy the existing values then?"}, {"owner": {"reputation": 4301, "user_id": 5531001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101959778819333/picture?type=large", "display_name": "Matthew Gunn", "link": "https://stackoverflow.com/users/5531001/matthew-gunn"}, "edited": false, "score": 0, "creation_date": 1449693424, "post_id": 34188229, "comment_id": 56123318, "body": "@Alex Yeah, I think you&#39;ll need to: (1) allocate new memory (2) copy doubles from existing array to the new memory (3) assign the new memory to the mxArray (4) free the old memory."}, {"owner": {"reputation": 4301, "user_id": 5531001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101959778819333/picture?type=large", "display_name": "Matthew Gunn", "link": "https://stackoverflow.com/users/5531001/matthew-gunn"}, "edited": false, "score": 0, "creation_date": 1449693512, "post_id": 34188229, "comment_id": 56123368, "body": "@Alex note that memcpy will work fine for a one dimensional array, but if there are multiple columns and you are increasing the number of rows, memcpy will not work, you&#39;ll have to go element by element with appropriate indexing (Because MATLAB uses column major layout)."}, {"owner": {"reputation": 6469, "user_id": 45581, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/eb238726ab7c37281deb582f24afe3d5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/45581/alex"}, "reply_to_user": {"reputation": 4301, "user_id": 5531001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101959778819333/picture?type=large", "display_name": "Matthew Gunn", "link": "https://stackoverflow.com/users/5531001/matthew-gunn"}, "edited": false, "score": 0, "creation_date": 1449693577, "post_id": 34188229, "comment_id": 56123413, "body": "@MatthewGunn I assume this means that mxSetM basically only sets some concept of dimensionality, similar to std::vector.size() vs std::vector.capacity()?"}, {"owner": {"reputation": 6469, "user_id": 45581, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/eb238726ab7c37281deb582f24afe3d5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/45581/alex"}, "reply_to_user": {"reputation": 4301, "user_id": 5531001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101959778819333/picture?type=large", "display_name": "Matthew Gunn", "link": "https://stackoverflow.com/users/5531001/matthew-gunn"}, "edited": false, "score": 0, "creation_date": 1449693911, "post_id": 34188229, "comment_id": 56123588, "body": "@MatthewGunn Thanks for the help, gonna give this a shot, will report back."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 2, "creation_date": 1449694157, "post_id": 34188229, "comment_id": 56123721, "body": "The steps listed by MatthewGunn will work, but it&#39;s a bit easier to use <code>mxRealloc</code>. You <code>mxRealloc</code> new size, existing elements will be copied automatically and old array freed if necessary. <code>mxSetPr</code> the new pointer to your array, and then <code>mxSetM</code> to set the new rows."}, {"owner": {"reputation": 4301, "user_id": 5531001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101959778819333/picture?type=large", "display_name": "Matthew Gunn", "link": "https://stackoverflow.com/users/5531001/matthew-gunn"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1449694788, "post_id": 34188229, "comment_id": 56124053, "body": "@Praetorian I wasn&#39;t familiar with mxRealloc. That&#39;s clearly what should be used here!"}, {"owner": {"reputation": 4301, "user_id": 5531001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101959778819333/picture?type=large", "display_name": "Matthew Gunn", "link": "https://stackoverflow.com/users/5531001/matthew-gunn"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1449695139, "post_id": 34188229, "comment_id": 56124225, "body": "@Praetorian If he had more than 1 column though, I think he may have to use my original system? Using 0 indexing, the <code>i,j</code> element should be at <code>i + n_rows * j</code> index in the data array (in column major layout). If n_rows changes, the position of everything beyond the first column would have to change in the underlying data array. Or maybe you could do a realloc and some real slick copying working from the back so you didn&#39;t need a scratch space...?"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 4301, "user_id": 5531001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101959778819333/picture?type=large", "display_name": "Matthew Gunn", "link": "https://stackoverflow.com/users/5531001/matthew-gunn"}, "edited": false, "score": 0, "creation_date": 1449698061, "post_id": 34188229, "comment_id": 56125777, "body": "@MatthewGunn <code>mxRealloc</code> should be usable in the general n-dimensional case also. You&#39;d <code>mxRealloc</code> with a size that is product of all the new dimensions, and then <code>mxSetPr</code> and <code>mxSetDimensions</code> to update the <code>mxArray</code>. You do have to be careful about column-major indexing when filling in the empty locations in the new matrix."}, {"owner": {"reputation": 6469, "user_id": 45581, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/eb238726ab7c37281deb582f24afe3d5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/45581/alex"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1449699699, "post_id": 34188229, "comment_id": 56126595, "body": "@Praetorian  <code>mxSetPr(arrays[i], (double*)mxRealloc(arrays[i], new_row_count * sizeof(double)));         mxSetM(arrays[i], new_row_count);</code> Still causes the issue.  Perhaps because it mismatches with the way I create the array initially?"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1449700178, "post_id": 34188229, "comment_id": 56126824, "body": "You&#39;re passing an <code>mxArray*</code> to <code>mxRealloc</code> instead of a pointer to the real data array. Try <code>mxRealloc(mxGetPr(arrays[i]), new_row_count * sizeof(double))</code> instead"}, {"owner": {"reputation": 6469, "user_id": 45581, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/eb238726ab7c37281deb582f24afe3d5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/45581/alex"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1449700310, "post_id": 34188229, "comment_id": 56126900, "body": "@Praetorian Works perfectly, I didn&#39;t understand the level of indirection between the real array and the mxArray. Thanks for your help mate!"}, {"owner": {"reputation": 4301, "user_id": 5531001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101959778819333/picture?type=large", "display_name": "Matthew Gunn", "link": "https://stackoverflow.com/users/5531001/matthew-gunn"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1449701300, "post_id": 34188229, "comment_id": 56127355, "body": "@Praetorian Simple example: You have a 1 row, 3 col matrix whose data array is <code>[1, 2, 3]</code>. Imagine the goal is to grow to a 2 row, 3 col matrix (filling in other elements with zeros). Calling realloc to expand the array would get you <code>[1, 2, 3, 0, 0, 0]</code> (as I understand realloc) BUT the you still need to do a bunch of copying to get into the appropriate <a href=\"https://en.wikipedia.org/wiki/Row-major_order\" rel=\"nofollow noreferrer\">column major</a> form of <code>[1, 0, 2, 0, 3, 0]</code>. This is only an issue if the number of rows changes and the number of columns before hand is greater than 1."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 4301, "user_id": 5531001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101959778819333/picture?type=large", "display_name": "Matthew Gunn", "link": "https://stackoverflow.com/users/5531001/matthew-gunn"}, "edited": false, "score": 0, "creation_date": 1449710289, "post_id": 34188229, "comment_id": 56130561, "body": "@MatthewGunn Yes, good point, you will have to do a bunch of copying to get the data into the right format in that case"}], "owner": {"reputation": 6469, "user_id": 45581, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/eb238726ab7c37281deb582f24afe3d5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/45581/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 430, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1449692384, "creation_date": 1449692384, "question_id": 34188229, "link": "https://stackoverflow.com/questions/34188229/whats-the-correct-way-to-dynamically-resize-matrices-in-matlabs-mex", "title": "What&#39;s the correct way to dynamically resize matrices in Matlab&#39;s mex?", "body": "<p>I am trying to dynamically realloc some arrays in mex depending on dynamic size of input data.</p>\n\n<pre><code>   std::vector&lt;mxArray*&gt; arrays;\n   size_t row_size = 1;\n\n   for(size_t i = 0; i &lt; col_count; ++i) {\n     mxArray* output = mxCreateNumericMatrix(row_size, 1, mxDOUBLE_CLASS, mxREAL);\n     arrays.push_back(output);\n   }\n\n   void grow() {\n     size_t new_size = row_size * 2;\n     for(size_t i = 0; i &lt; col_count; ++i)\n       mxSetM(arrays[i], new_size);\n     row_size = new_size;\n   }\n\n   size_t current_row = 0;\n   while(...) {\n     if(current_row &gt;= row_size)\n       grow();\n\n     //do some assignment to the arrays\n     double* p = mxGetPr(arrays[col]);\n     p[current_row] = value;\n\n     ++current_row;\n   }\n</code></pre>\n\n<p>This works for awhile, but I am obviously corrupting memory somehow, as it bombs randomly with:</p>\n\n<pre><code>MATLAB: double free or corruption (out): 0x00007f9714314f50 ***\n</code></pre>\n\n<p>If I pre-allocate the \"matrix\" (<code>grow</code> is never called) everything runs without issue.</p>\n"}, {"tags": ["c++", "c", "file-handling"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1449692057, "post_id": 34188057, "comment_id": 56122530, "body": "The second reads character by character, the first one doesn&#39;t."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1449692197, "post_id": 34188057, "comment_id": 56122620, "body": "Please describe your problem in more detail. &quot;Doesn&#39;t work&quot; is never a good problem description. Describe the input, the expected behaviour and the actual behaviour."}, {"owner": {"reputation": 31, "user_id": 4283615, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/wYGF0.jpg?s=128&g=1", "display_name": "Ahsan Asif", "link": "https://stackoverflow.com/users/4283615/ahsan-asif"}, "edited": false, "score": 0, "creation_date": 1449693180, "post_id": 34188057, "comment_id": 56123186, "body": "It doesnt make a trie structure properly if use the c++ code while it works perfectly fine for the C code."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4283615, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/wYGF0.jpg?s=128&g=1", "display_name": "Ahsan Asif", "link": "https://stackoverflow.com/users/4283615/ahsan-asif"}, "edited": false, "score": 0, "creation_date": 1449693006, "post_id": 34188199, "comment_id": 56123099, "body": "Its character array not a string. Now what?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1449693465, "post_id": 34188199, "comment_id": 56123341, "body": "<code>word.c_str()</code> may help you there. You&#39;ll have to tweak <code>buildTrie</code> to take <code>const char *</code> if it doesn&#39;t already."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1449693542, "post_id": 34188199, "comment_id": 56123387, "body": "@user4581301: No. Tweak (or overload) <code>buildTrie</code> to take a <code>std::string const &amp;</code>."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1449692232, "creation_date": 1449692232, "answer_id": 34188199, "question_id": 34188057, "link": "https://stackoverflow.com/questions/34188057/filing-mistake-when-converting-from-c-to-c/34188199#34188199", "title": "Filing mistake when converting from c to c++", "body": "<p>If I were writing code like this in C++, I'd probably write something more like this:</p>\n\n<pre><code>std::string word;\n\nwhile (std::getline(infile, word))\n    buildTrie(temp, word);\n</code></pre>\n\n<p>In all honesty, I doubt I'd write code exactly like that either though--I'd probably wrap the <code>trie</code> up into a class, so the code would look more like:</p>\n\n<pre><code>Trie t;\nstd::string word;\n\nwhile std::getline(infile, word))\n    t.add(word);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 31, "user_id": 4283615, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/wYGF0.jpg?s=128&g=1", "display_name": "Ahsan Asif", "link": "https://stackoverflow.com/users/4283615/ahsan-asif"}, "edited": false, "score": 0, "creation_date": 1449693513, "post_id": 34188210, "comment_id": 56123370, "body": "Looking at your C code,  the part that you&#39;ve displayed should work as it should.  A simple verification would be to display word instead of calling buildTree():  the display should be the same.  I assume the problem is in buildTrie (or even newNode() if you&#39;ve kept some malloc() ).  You have to post more code to get more help."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 1, "last_activity_date": 1449692270, "creation_date": 1449692270, "answer_id": 34188210, "question_id": 34188057, "link": "https://stackoverflow.com/questions/34188057/filing-mistake-when-converting-from-c-to-c/34188210#34188210", "title": "Filing mistake when converting from c to c++", "body": "<p>If you want to keep using char arrays and c-strings use <a href=\"http://www.cplusplus.com/reference/istream/istream/getline/\" rel=\"nofollow\"><code>istream::getline()</code></a> to read as in your c programme: </p>\n\n<pre><code>infile.open(\"small.txt\");\nwhile(infile.getline(word, MAX_LINE) )\n{\n    temp = root;\n    buildTrie(temp, word);\n}\ninfile.close();\n</code></pre>\n\n<p>Be carefull to loop on the read operation.  </p>\n\n<p>Now depending on the rest of your code,  you could also consider to migrate from <code>char[]</code> to <code>string</code>.  This has lots of advantages and is more in the c++ philosophy.   You can then use <a href=\"http://www.cplusplus.com/reference/string/string/getline/?kw=getline\" rel=\"nofollow\"><code>std::getline()</code></a> as suggested by Jerry in his answer.  </p>\n"}], "owner": {"reputation": 31, "user_id": 4283615, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/wYGF0.jpg?s=128&g=1", "display_name": "Ahsan Asif", "link": "https://stackoverflow.com/users/4283615/ahsan-asif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1449692270, "creation_date": 1449691712, "question_id": 34188057, "link": "https://stackoverflow.com/questions/34188057/filing-mistake-when-converting-from-c-to-c", "title": "Filing mistake when converting from c to c++", "body": "<p>The problem im having is that i wrote a code in c for filing for my program and when i wrote the same code in c++ it wasn't working. Please help me find out the mistake i'm making while writing the code in c++.</p>\n\n<p>C Code :</p>\n\n<pre><code>FILE* dict = fopen(\"small.txt\", \"r\");\nchar word[MAX_LINE];\nNode* root = newNode(); // pointer to main root of Trie\nNode* temp;\nwhile (fgets(word, MAX_LINE, dict) != NULL) {\n      temp = root;\n    buildTrie(temp, word);\n}\nfclose(dict);\n</code></pre>\n\n<p>C++ Code :</p>\n\n<pre><code>ifstream infile;\nchar word[MAX_LINE];\nNode* root = newNode(); // pointer to main root of Trie\nNode* temp;\n\ninfile.open(\"small.txt\");\nwhile(infile)\n{\n  for(int i =0;i&lt;MAX_LINE;i++)\n  {\n      infile&gt;&gt;word[i];\n      temp = root;\n    buildTrie(temp, word);\n\n  }\n}\ninfile.close();\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1449692511, "post_id": 34188047, "comment_id": 56122805, "body": "Really? One function for each letter? Consider using a monochrome bitmap font and translate each bit to a space if 0 or asterisk if 1. Much easier to write, maintain, and modify."}, {"owner": {"reputation": 1, "user_id": 5402112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65433329f675ef7a6046f4cbabc17f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ardo", "link": "https://stackoverflow.com/users/5402112/ardo"}, "edited": false, "score": 0, "creation_date": 1449692642, "post_id": 34188047, "comment_id": 56122880, "body": "You&#39;re right Colonel Thirty Two, and I mentioned in the title but I did a mistake in text message."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5402112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65433329f675ef7a6046f4cbabc17f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ardo", "link": "https://stackoverflow.com/users/5402112/ardo"}, "edited": false, "score": 0, "creation_date": 1449693716, "post_id": 34188238, "comment_id": 56123502, "body": "Thanks Souss I tried it but it prints just the last char for example if you enter (JONE) it just prints (E), is the there any solution for this?"}, {"owner": {"reputation": 36, "user_id": 5650889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OqApK.jpg?s=128&g=1", "display_name": "Souss", "link": "https://stackoverflow.com/users/5650889/souss"}, "reply_to_user": {"reputation": 1, "user_id": 5402112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65433329f675ef7a6046f4cbabc17f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ardo", "link": "https://stackoverflow.com/users/5402112/ardo"}, "edited": false, "score": 0, "creation_date": 1449697425, "post_id": 34188238, "comment_id": 56125426, "body": "I&#39;ld say that you didn&#39;t print this character in the right place into your loops :)  You should print it before doing any other printing (here your you&#39;ll print before &#39;\\r&#39; and after each letters of JONE)"}], "tags": [], "owner": {"reputation": 36, "user_id": 5650889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OqApK.jpg?s=128&g=1", "display_name": "Souss", "link": "https://stackoverflow.com/users/5650889/souss"}, "is_accepted": false, "score": 0, "last_activity_date": 1449692439, "creation_date": 1449692439, "answer_id": 34188238, "question_id": 34188047, "link": "https://stackoverflow.com/questions/34188047/alphabet-to-star-shape-in-c-programming/34188238#34188238", "title": "Alphabet to Star shape in C++ programming", "body": "<p>If you take a look closer to the <code>man ascii</code> command in your terminal, you'll find the character <code>\\r</code> also known as \"carriage ret\". This might answer your problematic actually.</p>\n\n<p>By printing it, it brings your display cursor at the beginning of the current line without generating a new line.</p>\n\n<p>Just try</p>\n\n<pre><code>cout &lt;&lt; '\\r';\n</code></pre>\n\n<p>And avoid the</p>\n\n<pre><code>cout &lt;&lt; endl;\n</code></pre>\n\n<p>which brings a new line with it (Here an explanation of <a href=\"http://www.cplusplus.com/reference/ostream/endl/?kw=endl\" rel=\"nofollow\">endl</a>)</p>\n"}, {"comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1449692599, "post_id": 34188261, "comment_id": 56122851, "body": "<i>&quot;you can&#39;t go back to it anymore&quot;</i> - You [usually] can with a <i>backspace</i> and you definitely can with native or specialized API&#39;s."}, {"owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1449692672, "post_id": 34188261, "comment_id": 56122905, "body": "right, but the process would probably be painful for multiple character printing anyway."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1449692740, "post_id": 34188261, "comment_id": 56122949, "body": "Not painful just a little more effort and a far cry from <i>&quot;you can&#39;t go back to it anymore&quot;</i>."}], "tags": [], "owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "is_accepted": false, "score": 0, "last_activity_date": 1449692782, "last_edit_date": 1449692782, "creation_date": 1449692544, "answer_id": 34188261, "question_id": 34188047, "link": "https://stackoverflow.com/questions/34188047/alphabet-to-star-shape-in-c-programming/34188261#34188261", "title": "Alphabet to Star shape in C++ programming", "body": "<p>Unfortunately using a \"character by character\" approach here is difficult in the console. </p>\n\n<p>One cute and feasible way to accomplish your task in the console by having a list of std::string for each star \"character\", where every entry in the vector is a vertical slice of the output. </p>\n\n<p>you can define a class to represent partial \"star strings\" and you can keep appending new star characters to it by appending the appropriate lists. </p>\n\n<p>the best way to accomplish that is to create a class starChars and overload the + operator for appropriate concatenation. (in this case appending the lists one by one). note that you probably want all characters to have the same number of height.(even if you need to leave some empty) </p>\n\n<pre><code>class starChars\n{\n private std::list&lt;std::string&gt; content; \n...\n\nstarChars operator+(starChars &amp; newCharacter)...\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5402112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65433329f675ef7a6046f4cbabc17f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ardo", "link": "https://stackoverflow.com/users/5402112/ardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5837, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1449692782, "creation_date": 1449691658, "last_edit_date": 1449692739, "question_id": 34188047, "link": "https://stackoverflow.com/questions/34188047/alphabet-to-star-shape-in-c-programming", "title": "Alphabet to Star shape in C++ programming", "body": "<p>I have a code in C++ programming language, I want to change the entered characters (eg: JACK) into star shape. the program does it well, but the problem is that it prints each char in a new line but I want them to be printed in the same line. \nmany thanks in advance for your help</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n\nusing namespace std;\n\n\nvoid printA(){           // Functions\n\n    for (int i = 0; i&lt;5; i++)\n    {\n\n        for (int j = 0; j&lt;5; j++) // A\n        {\n\n            if (i == 0 || i == 2 || j == 0 || j == 4)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid printC(){\n\n    for (int i = 0; i&lt;5; i++)    // C\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (i == 0 || i == 4 || j == 0)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\n\nvoid printO(){\n    for (int i = 0; i&lt;5; i++)    // O\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if ((i == 0 || i == 4 || j == 0 || j == 4) &amp;&amp; i != j)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid printE(){\n    for (int i = 0; i&lt;5; i++)   // E\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (i == 0 || i == 4 || j == 0 || i == 2)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid printF(){\n    for (int i = 0; i&lt;5; i++)    // F\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (i == 0 || i == 2 || j == 0)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid printG(){\n    for (int i = 0; i&lt;5; i++)  // G\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (i == 0 || i == 4 || j == 0 || i == 2 &amp;&amp; j &gt;= 2 || j == 4 &amp;&amp; i &gt;= 2)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid printH(){\n\n    for (int i = 0; i&lt;5; i++)     // H\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (i == 2 || j == 4 || j == 0)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid printI(){\n    for (int i = 0; i&lt;5; i++)     // I\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (j == 2)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid printB(){\n    for (int i = 0; i&lt;5; i++)  // B\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (i == 0 || i == 4 || j == 0 || j == 4 || i == 2)\n            {\n                if (i != j){\n                    cout &lt;&lt; \"*\";\n                }\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid printL(){\n    for (int i = 0; i&lt;5; i++)  // L\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (i == 4 || j == 0)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid printD(){\n    for (int i = 0; i&lt;5; i++)   // D\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (i == 0 || i == 4 || j == 0 || j == 4)\n            {\n                if (!(i == j))\n                    cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid printT(){\n    for (int i = 0; i&lt;5; i++)   // T\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (i == 0 || j == 2)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid printU(){\n    for (int i = 0; i&lt;5; i++)  // U\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (j == 4 || i == 4 || j == 0)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid printY(){\n    for (int i = 0; i&lt;5; i++)   // Y\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (j == 0 &amp;&amp; i &lt;= 2 || i == 2 || j == 4)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\n\nvoid printJ(){\n    for (int i = 0; i&lt;5; i++)      // J\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (j == 4 || i == 4 || j == 0 &amp;&amp; i &gt;= 2)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\n\nvoid printN(){\n    for (int i = 0; i&lt;5; i++)  // N\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (i == j || j == 4 || j == 0)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid printP(){\n    for (int i = 0; i&lt;5; i++)  // P\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (i == 0 || i == 2 || j == 0 || j == 4 &amp;&amp; i &lt;= 2)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid printR(){\n\n    for (int i = 0; i&lt;5; i++)  // R\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (i == 0 || i == 2 || j == 0 || j == 4 &amp;&amp; i &lt;= 2 || i == j &amp;&amp; i &gt;= 2)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid printS(){\n    for (int i = 0; i&lt;5; i++)   // S\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (i == 0 || i == 4 || j == 0 &amp;&amp; i &lt;= 2 || i == 2 || j == 4 &amp;&amp; i &gt;= 2)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid printZ(){\n    for (int i = 0; i&lt;5; i++)  // Z\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (i == 0 || i == 4 || j == 4 - i)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nvoid printQ(){\n    for (int i = 0; i&lt;5; i++)  // Q\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (i == 0 &amp;&amp; j != 4 || i == 3 &amp;&amp; j != 4 || j == 0 &amp;&amp; i != 4 || j == 3 &amp;&amp; i != 4 || i == 4 &amp;&amp; j == 4)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\n\n\nvoid printW(){\n    for (int i = 0; i&lt;5; i++)  // W\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (j == 0 || j == 4 || j == i &amp;&amp; j &gt;= 2 || j == 4 - i &amp;&amp; j &lt;= 2)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\nvoid printX(){\n    for (int i = 0; i&lt;5; i++)  // x\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (i == j || j == 4 - i)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\nvoid printV(){\n    for (int i = 0; i&lt;5; i++)  // V\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (i == j &amp;&amp; j &lt;= 2 || j == 4 - i &amp;&amp; j &gt;= 2)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\nvoid printM(){\n    for (int i = 0; i&lt;7; i++)  // M\n    {\n\n        for (int j = 0; j&lt;7; j++)\n        {\n\n            if (i == j &amp;&amp; i &lt;= 3 || j == 6 - i &amp;&amp; i &lt;= 3 || j == 0 || j == 6)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\nvoid printK(){\n    for (int i = 0; i&lt;5; i++)  // K\n    {\n\n        for (int j = 0; j&lt;5; j++)\n        {\n\n            if (j == 0 || j == 4 - i &amp;&amp; i &lt;= 2 || i == j &amp;&amp; i &gt;= 2)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            else\n            {\n                cout &lt;&lt; \" \";\n            }\n\n        }\n\n        cout &lt;&lt; endl;\n    }\n\n}\n\nint main(){     // Main Function\n\n    char c[100]={};\n    bool b = true;\n    int l=1;\n\n        while (b){\n\n        cout &lt;&lt; \"Enter Alphabat to Print OR Exit Press 0 : \";\n        cin &gt;&gt; c;\n        l=strlen(c);\n            l--;\n            for (int i=0; i&lt;=l;i++)\n        switch (c[i]){\n        if (l&lt;0)\n        {\n            cout&lt;&lt;l; //&lt;&lt;endl;\n        }\n        else {\n        case 'A':\n            printA();\n            break;\n\n        case 'B':\n            printB();\n            break;\n\n        case 'C':\n            printC();\n            break;\n\n        case 'D':\n            printD();\n            break;\n\n        case 'E':\n            printE();\n            break;\n\n        case 'F':\n            printF();\n            break;\n\n        case 'G':\n            printG();\n            break;\n\n        case 'H':\n            printH();\n            break;\n\n        case 'I':\n            printI();\n            break;\n\n        case 'J':\n            printJ();\n            break;\n\n        case 'K':\n            printK();\n            break;\n\n        case 'L':\n            printL();\n            break;\n\n        case 'M':\n            printM();\n            break;\n\n        case 'N':\n            printN();\n            break;\n\n        case 'O':\n            printO();\n            break;\n\n        case 'P':\n            printP();\n            break;\n\n        case 'Q':\n            printQ();\n            break;\n\n        case 'R':\n            printR();\n            break;\n\n        case 'S':\n            printS();\n            break;\n\n        case 'T':\n            printT();\n            break;\n\n        case 'U':\n            printU();\n            break;\n\n        case 'V':\n            printV();\n            break;\n\n        case 'W':\n            printW();\n            break;\n\n        case 'X':\n            printX();\n            break;\n\n        case 'Y':\n            printY();\n            break;\n\n        case 'Z':\n            printZ();\n            break;\n\n\n\n        default:\n\n            b = false;\n\n            }\n        } // end switch\n    }\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "directx", "directx-11", "dxgi"], "comments": [{"owner": {"reputation": 2022, "user_id": 139855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/968e038475ef2b82c4e86022d208edd1?s=128&d=identicon&r=PG", "display_name": "legalize", "link": "https://stackoverflow.com/users/139855/legalize"}, "edited": false, "score": 0, "creation_date": 1449701892, "post_id": 34188016, "comment_id": 56127604, "body": "It&#39;s been a while since I dug into things at this level, but I don&#39;t think going fullscreen constitutes the removal of an adapter.  An adapter would be added or removed when a display is dynamically attached/removed to the computer (i.e. you just connected a 2nd monitor)."}, {"owner": {"reputation": 447, "user_id": 871108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fa4e44e8e4955461d145614e535f0389?s=128&d=identicon&r=PG", "display_name": "jossgray", "link": "https://stackoverflow.com/users/871108/jossgray"}, "reply_to_user": {"reputation": 2022, "user_id": 139855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/968e038475ef2b82c4e86022d208edd1?s=128&d=identicon&r=PG", "display_name": "legalize", "link": "https://stackoverflow.com/users/139855/legalize"}, "edited": false, "score": 0, "creation_date": 1449752421, "post_id": 34188016, "comment_id": 56149685, "body": "Yeah I thought so too, but IDXGIFactory1::isCurrent() returns TRUE before setting a swapchain fullscreen, and FALSE afterwards."}], "owner": {"reputation": 447, "user_id": 871108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fa4e44e8e4955461d145614e535f0389?s=128&d=identicon&r=PG", "display_name": "jossgray", "link": "https://stackoverflow.com/users/871108/jossgray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1449691568, "creation_date": 1449691568, "question_id": 34188016, "link": "https://stackoverflow.com/questions/34188016/idxgifactory1iscurrent-when-does-it-return-true", "title": "IDXGIFactory1::isCurrent(), when does it return TRUE?", "body": "<p>I'm using <code>IDXGIFactory1::isCurrent()</code> to detect when display topology has changed.</p>\n\n<p>The documentation says;</p>\n\n<blockquote>\n  <p>FALSE, if a new adapter is becoming available or the current adapter\n  is going away. TRUE, no adapter changes. IsCurrent returns FALSE to\n  inform the calling application to re-enumerate adapters.</p>\n</blockquote>\n\n<p>However it seems to return TRUE after an WM_DISPLAYCHANGE message, for example after entering fullscreen mode.</p>\n\n<p>Am I really expected to re-enumerate all DXGI topology after going fullscreen? Does anybody know how this works?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1449691814, "post_id": 34187984, "comment_id": 56122397, "body": "What operating system is running on the target device?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1449691900, "post_id": 34187984, "comment_id": 56122451, "body": "Please read some books (c++ thread and generally using &#39;&#39;new&#39;&#39;)"}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 3, "creation_date": 1449692274, "post_id": 34187984, "comment_id": 56122663, "body": "@DieterL&#252;cking No need to be nasty."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1449692361, "post_id": 34187984, "comment_id": 56122722, "body": "Why not just <code>std::thread thread (&amp;myCode, s);</code>? There might be a good reason why you can&#39;t do it this way, but if so, your question doesn&#39;t say any."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1449692955, "post_id": 34187984, "comment_id": 56123066, "body": "is startRecording() a static member function ?"}, {"owner": {"reputation": 335, "user_id": 3830784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e99c42399c833b0ace266cd1b49806e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3830784", "link": "https://stackoverflow.com/users/3830784/user3830784"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1449693532, "post_id": 34187984, "comment_id": 56123379, "body": "@Thomas Matthews - The program will be running on the intel edison (yocto linux)"}, {"owner": {"reputation": 335, "user_id": 3830784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e99c42399c833b0ace266cd1b49806e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3830784", "link": "https://stackoverflow.com/users/3830784/user3830784"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1449693977, "post_id": 34187984, "comment_id": 56123627, "body": "@David Schwartz - I am refactoring the code from something that was written for a different platform, and trying to make it easier to update and work with said code.  Originally, the code was written to say &#39;std::thread (func, arg).detach()&#39;.  Trying to run &#39;std::thread t(&amp;myCode, s);&#39; from the main loop game me compiler errors when I tried to do so.  It is possible that my implementation was incorrect, but that is what lead to the current implementation (which does compile)."}, {"owner": {"reputation": 335, "user_id": 3830784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e99c42399c833b0ace266cd1b49806e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3830784", "link": "https://stackoverflow.com/users/3830784/user3830784"}, "reply_to_user": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1449694049, "post_id": 34187984, "comment_id": 56123661, "body": "@Christophe - startRecording is not a static function, though changing that can be done if necessary."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1449698098, "post_id": 34187984, "comment_id": 56125800, "body": "it is not necessary, but if it&#39;s not static, you must provide the object on which it shall be applied as first argument (but in the meantime 865719 has shown this point)"}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1449702589, "post_id": 34188514, "comment_id": 56127891, "body": "You probably want just <code>this</code> as first argument or <code>std::ref(*this)</code>."}, {"owner": {"reputation": 3319, "user_id": 865719, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/CSVe2.png?s=128&g=1", "display_name": "maddouri", "link": "https://stackoverflow.com/users/865719/maddouri"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1449704743, "post_id": 34188514, "comment_id": 56128714, "body": "Yes. Thanks, it&#39;s fixed now."}], "tags": [], "owner": {"reputation": 3319, "user_id": 865719, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/CSVe2.png?s=128&g=1", "display_name": "maddouri", "link": "https://stackoverflow.com/users/865719/maddouri"}, "is_accepted": true, "score": 2, "last_activity_date": 1449704710, "last_edit_date": 1449704710, "creation_date": 1449693470, "answer_id": 34188514, "question_id": 34187984, "link": "https://stackoverflow.com/questions/34187984/running-a-thread/34188514#34188514", "title": "Running a thread", "body": "<p>I suggest that you make the thread as a <code>Processor</code> attribute.</p>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/9e1c597ac908dd22\" rel=\"nofollow\"><strong>Run It Online</strong></a></kbd></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;string&gt;\n#include &lt;thread&gt;\n\n//Processor.h\n\nclass Processor {\nprivate:\n  std::shared_ptr&lt;std::thread&gt; _th;\npublic:\n  Processor();\n  void startThread(std::string s);\n  void joinThread();\n  void myCode(std::string s);\n  void startRecording(std::string s);\n  //more stuff\n};\n\n//Processor.cpp\n\nProcessor::Processor() {\n}\n\nvoid Processor::startThread(std::string s) {\n  _th = std::make_shared&lt;std::thread&gt;(&amp;Processor::startRecording, this, s);  // \"this\" is the first argument ;)\n}\n\nvoid Processor::joinThread() {\n    _th-&gt;join();\n}\n\nvoid Processor::myCode(std::string s) {\n  //lots of code\n}\n\nvoid Processor::startRecording(std::string s) {\n  std::cout &lt;&lt; \"msg: \" &lt;&lt; s &lt;&lt; std::endl;\n}\n\n// main.cpp\n\nint main(){\n  //code\n  auto x = std::make_unique&lt;Processor&gt;();\n  //other code\n  x-&gt;startThread(\"hello\");\n  //more code which needs to be running seperately\n  x-&gt;joinThread();\n}\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 3830784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e99c42399c833b0ace266cd1b49806e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3830784", "link": "https://stackoverflow.com/users/3830784/user3830784"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 34188514, "answer_count": 1, "score": 1, "last_activity_date": 1449704710, "creation_date": 1449691477, "last_edit_date": 1449694118, "question_id": 34187984, "link": "https://stackoverflow.com/questions/34187984/running-a-thread", "title": "Running a thread", "body": "<p>I have a program which I am attempting to run a process in a separate thread.  Normally I would use Qt for this, but in this particular instance I can't (due to it going on to an embedded device).  My concern is whether or not my current implementation will run the thread correctly, or if it will destroy the thread before processing.  Below is my code:</p>\n\n<pre><code>int main(){\n  //code\n  Processor *x = new Processor;\n  //other code\n  x-&gt;startThread(s);\n  //more code which needs to be running seperately\n}\n</code></pre>\n\n<h1>Processor.h</h1>\n\n<pre><code>Class Processor {\npublic:\n  Processor();\n  void startThread(std::string s);\n  void myCode(std::string s);\n  //more stuff\n}\n</code></pre>\n\n<h1>Processor.cpp</h1>\n\n<pre><code>void Processor::startThread(std::string s){\n  std::thread(&amp;Processor::startRecording, s).detach();\n}\n\nvoid Processor::myCode(std::string s){\n  //lots of code\n}\n</code></pre>\n\n<p>Alternatively, if there is an easier way to start <code>myCode</code> from the <code>main</code> function rather than needing to have the class <code>startThread</code>, please let me know.</p>\n"}, {"tags": ["c++", "function", "sockets", "methods", "listen"], "comments": [{"owner": {"reputation": 8643, "user_id": 1718554, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n3jD1.jpg?s=128&g=1", "display_name": "Luke Joshua Park", "link": "https://stackoverflow.com/users/1718554/luke-joshua-park"}, "edited": false, "score": 0, "creation_date": 1449692935, "post_id": 34187983, "comment_id": 56123060, "body": "It&#39;s generally bad practice to do this if the already defined method is contained in global scope..."}], "answers": [{"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 5, "last_activity_date": 1449691644, "creation_date": 1449691644, "answer_id": 34188043, "question_id": 34187983, "link": "https://stackoverflow.com/questions/34187983/how-to-create-method-with-same-name-of-system-function/34188043#34188043", "title": "how to create method with same name of system function?", "body": "<p>Use the <code>::</code> operator to specify you want the <code>listen</code> name which is in the global scope, not in a class or namespace.</p>\n\n<pre><code>void CTCPBlockingSocket::listen() {\n     ::listen(server_socket,5); \n}\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 2853720, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0f864c8c82eb0a7c5b36c7d03dc4d45?s=128&d=identicon&r=PG&f=1", "display_name": "MohsenTi", "link": "https://stackoverflow.com/users/2853720/mohsenti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 34188043, "answer_count": 1, "score": 2, "last_activity_date": 1449691644, "creation_date": 1449691474, "question_id": 34187983, "link": "https://stackoverflow.com/questions/34187983/how-to-create-method-with-same-name-of-system-function", "title": "how to create method with same name of system function?", "body": "<p>I'm new to c++ and have to create class for handling sockets.\nThis class has a method named listen() and in this method need calling listen function to socket (for example see below) but method listen hiding listen function how to solve it ?</p>\n\n<pre><code>void CTCPBlockingSocket::listen() {\n     listen(server_socket,5); \n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qtstylesheets"], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 3892682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82000453eea3daa6a954e3a9e7c2912?s=128&d=identicon&r=PG&f=1", "display_name": "rlnunes", "link": "https://stackoverflow.com/users/3892682/rlnunes"}, "edited": false, "score": 0, "creation_date": 1452133643, "post_id": 34583125, "comment_id": 57038506, "body": "No, I want to color the entire item, like the attached image, by the way, I already solved this, I&#39;ll post the solution."}], "tags": [], "owner": {"reputation": 1, "user_id": 5741752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cr9E6.png?s=128&g=1", "display_name": "jengland390", "link": "https://stackoverflow.com/users/5741752/jengland390"}, "is_accepted": false, "score": 0, "last_activity_date": 1451866142, "creation_date": 1451866142, "answer_id": 34583125, "question_id": 34187874, "link": "https://stackoverflow.com/questions/34187874/setting-qtreeview-selected-item-style-in-qss/34583125#34583125", "title": "Setting QTreeView selected item style in qss", "body": "<p>You just want your branch selection color to match your item's?</p>\n\n<pre><code>QTreeView::branch:selected {\n  background:\n}\n\nQTreeView::branch:selected:active {\n  background:\n}\n\nQTreeView::branch:selected:!active {\n  background:\n}\n</code></pre>\n\n<p>etc...</p>\n"}, {"comments": [{"owner": {"reputation": 241, "user_id": 3892682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82000453eea3daa6a954e3a9e7c2912?s=128&d=identicon&r=PG&f=1", "display_name": "rlnunes", "link": "https://stackoverflow.com/users/3892682/rlnunes"}, "reply_to_user": {"reputation": 3127, "user_id": 266309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e67bba1d7db144687d2093e7fb201b4?s=128&d=identicon&r=PG", "display_name": "waldyrious", "link": "https://stackoverflow.com/users/266309/waldyrious"}, "edited": false, "score": 0, "creation_date": 1466773941, "post_id": 34646515, "comment_id": 63470792, "body": "ty, I forgot that :)"}], "tags": [], "owner": {"reputation": 241, "user_id": 3892682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82000453eea3daa6a954e3a9e7c2912?s=128&d=identicon&r=PG&f=1", "display_name": "rlnunes", "link": "https://stackoverflow.com/users/3892682/rlnunes"}, "is_accepted": true, "score": 9, "last_activity_date": 1565347073, "last_edit_date": 1565347073, "creation_date": 1452134312, "answer_id": 34646515, "question_id": 34187874, "link": "https://stackoverflow.com/questions/34187874/setting-qtreeview-selected-item-style-in-qss/34646515#34646515", "title": "Setting QTreeView selected item style in qss", "body": "<p>After some research, I got the answer in the Qt mailing list. The desired effect was done with the following QStylesheet:</p>\n\n<pre><code>QTreeView {\n    background-color: transparent;\n    selection-background-color: green; /* Used on Mac */\n    selection-color: white; /* Used on Mac */\n    show-decoration-selected: 1;\n}\n\nQTreeView::item:selected {\n    background-color: green; /* Used on Windows */\n    color: white;\n}\n</code></pre>\n\n<p>The Mac lines that change the style, even if I'm on Windows, I don't know if it is a bug in my windows version, or in this Qt version maybe.</p>\n"}], "owner": {"reputation": 241, "user_id": 3892682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82000453eea3daa6a954e3a9e7c2912?s=128&d=identicon&r=PG&f=1", "display_name": "rlnunes", "link": "https://stackoverflow.com/users/3892682/rlnunes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4420, "favorite_count": 2, "accepted_answer_id": 34646515, "answer_count": 2, "score": 3, "last_activity_date": 1565347073, "creation_date": 1449691044, "last_edit_date": 1495539930, "question_id": 34187874, "link": "https://stackoverflow.com/questions/34187874/setting-qtreeview-selected-item-style-in-qss", "title": "Setting QTreeView selected item style in qss", "body": "<p>I need to change the background color of the <em>selected item</em> on a QTreeView.\nI already tried using <a href=\"http://doc.qt.io/qt-4.8/stylesheet-examples.html#customizing-qtreeview\" rel=\"nofollow noreferrer\">this</a> example and <a href=\"https://stackoverflow.com/questions/13764727/qt-stylesheets-with-qtreeviewitem-only-applies-to-child-items\">this</a> Stack Overflow question.</p>\n\n<p>The style applied to the ::branch subcontrol works fine, but none of the commands in the ::item subcontrols works.</p>\n\n<p>The QSS applied to the QTreeView :</p>\n\n<pre><code>QTreeView {\n   show-decoration-selected: 1;\n}\n\nQTreeView::item {\n     border: 1px solid #d9d9d9;\n    border-top-color: transparent;\n    border-bottom-color: transparent;\n     background: rgb(255, 0,0);\n}\n\nQTreeView::item:hover {\n    background: qlineargradient(x1: 0, y1: 0, x2: 0, y2: 1, stop: 0 #e7effd, stop: 1 #cbdaf1);\n    border: 1px solid #bfcde4;\n}\n\nQTreeView::item:selected {\n    border: 1px solid #567dbc;\n}\n\nQTreeView::item:selected:active{\n    background: qlineargradient(x1: 0, y1: 0, x2: 0, y2: 1, stop: 0 #6ea1f1, stop: 1 #567dbc);\n}\n\nQTreeView::item:selected:!active {\n    background: qlineargradient(x1: 0, y1: 0, x2: 0, y2: 1, stop: 0 #6b9be8, stop: 1 #577fbf);\n}\n\nQTreeView::branch {\n        background: palette(base);\n}\n\nQTreeView::branch:has-siblings:!adjoins-item {\n        background: cyan;\n}\n\nQTreeView::branch:has-siblings:adjoins-item {\n        background: red;\n}\n\nQTreeView::branch:!has-children:!has-siblings:adjoins-item {\n        background: blue;\n}\n\nQTreeView::branch:closed:has-children:has-siblings {\n        background: pink;\n}\n\nQTreeView::branch:has-children:!has-siblings:closed {\n        background: gray;\n}\n\nQTreeView::branch:open:has-children:has-siblings {\n        background: magenta;\n}\n\nQTreeView::branch:open:has-children:!has-siblings {\n        background: green;\n}\n</code></pre>\n\n<p>And here my result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kQyGk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kQyGk.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want a result like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/TjucU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TjucU.png\" alt=\"enter image description here\"></a></p>\n\n<p>Can someone help me, thanks in advance.</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5659704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ef89458d04467548be23250c630e7f?s=128&d=identicon&r=PG&f=1", "display_name": "L Kaniewski", "link": "https://stackoverflow.com/users/5659704/l-kaniewski"}, "edited": false, "score": 0, "creation_date": 1449781855, "post_id": 34188202, "comment_id": 56167810, "body": "Thanks, but i&#39;m not sure if this solution will always help me. Basically in my example i have 2 iterators, because my multimap is a container of organisms with their respective initiatives with values from 0-10 range. When an organism is moving it can fight with another organism and if a fight occurs one of them will die - hence the second iterator. Your solution lets me iterate second loop, but what if i delete first iterator while in the &quot;usunOrganizm&quot; function?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 25, "user_id": 5659704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ef89458d04467548be23250c630e7f?s=128&d=identicon&r=PG&f=1", "display_name": "L Kaniewski", "link": "https://stackoverflow.com/users/5659704/l-kaniewski"}, "edited": false, "score": 0, "creation_date": 1449788478, "post_id": 34188202, "comment_id": 56171114, "body": "@LKaniewski: OK, added another possible solution."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 2, "last_activity_date": 1449788463, "last_edit_date": 1449788463, "creation_date": 1449692240, "answer_id": 34188202, "question_id": 34187829, "link": "https://stackoverflow.com/questions/34187829/c-map-set-iterator-not-incrementable-error-while-using-multimap/34188202#34188202", "title": "C++ map/set iterator not incrementable error while using multimap", "body": "<p>If you erase the element at <code>it2</code>, then you can no longer use <code>it2</code>. Incrementing it will no longer be possible.</p>\n\n<p>You can easily write an iteration loop which tolerates the erasure of the loop control itself:</p>\n\n<pre><code>iterator it = iterpair2.first;\nwhile (it != iterpair.second)\n{\n    iterator next_it = it;\n    ++next_it;\n    /* it's possible for it to be deleted here */\n    it = next_it;\n}\n</code></pre>\n\n<p>However, the above will fail if <code>next_it</code> is erased in the loop body. So if you wanted to be more general, you'd need an explicit comparison:</p>\n\n<pre><code>while (it != iterpair.second)\n{\n    iterator next_it = it;\n    ++next_it;\n    /* ... */\n    if (some_condition)\n    {\n        /* Need to erase it_to_erase */\n        if (it_to_erase == next_it) ++next_it;\n        theMap.erase(it_to_erase);\n    }\n    /* ... */\n    it = next_it;\n}\n</code></pre>\n\n<p>Even that requires that the code which iterates is also the code which erases the element. If the erasing code is unrelated (say, because it is in a function called in the iteration), then there is really no solution which allows for immediate erasure.</p>\n\n<p>So in that case, you'd need to implement some form of deferred erasure. In the particular case presented in the OP, where the map's <code>mapped_type</code> is a pointer whose value cannot be null, an easy form of deferred erasure is to simply set the mapped value of the element to be erased to 0.</p>\n\n<p>In the simple deferred erasure scheme below, I assume that the outer loop is itself free to erase elements; that is, it is not in a function called during an iteration. I use some C+11 features for simplicity.</p>\n\n<pre><code>/* Outer loop */\n\nfor (auto it = myMap.begin(), end = myMap.end();; ++i) {\n  /* Erase any previously marked elements */\n  while (it != end &amp;&amp; !it-&gt;second) it = myMap.erase(it);\n  if (it == end) break;\n\n  /* Do something with this element */\n  /* ... */\n  /* This function might \"delete\" arbitrary elements. See below */\n  secondProcess(myMap);\n  /* At this point, \"it\" might not be valid, so you would need to\n     check before trying to use it.\n   */\n}\n</code></pre>\n\n<p>And here's the inner function:</p>\n\n<pre><code>void secondProcess(MapType&amp; myMap) {\n  /* ... */\n  for (auto it2 = myMap.begin(), end = myMap.end(); it2 != end; ++it2) {\n    if (it2-&gt;second) { /* Make sure the element is not already marked */\n      /* ... */\n\n      /* Here we've decided to erase the element at \"it2\"\n       * The delete comes from the code in OP; it is only OK if the\n       * mapped value is the only pointer to the object it points to.\n       */\n         delete it2-&gt;second;\n         it2-&gt;second = 0;\n       /* Since we don't actually erase it2, no other adjustment\n        * is needed \n        */\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5659704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ef89458d04467548be23250c630e7f?s=128&d=identicon&r=PG&f=1", "display_name": "L Kaniewski", "link": "https://stackoverflow.com/users/5659704/l-kaniewski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 0, "accepted_answer_id": 34188202, "answer_count": 1, "score": 0, "last_activity_date": 1449788463, "creation_date": 1449690882, "question_id": 34187829, "link": "https://stackoverflow.com/questions/34187829/c-map-set-iterator-not-incrementable-error-while-using-multimap", "title": "C++ map/set iterator not incrementable error while using multimap", "body": "<p>I have a problem with the \"map/set iterator not incrementable\" error related to my multimap. I have tried googling for answers, but the answers did not help me. I'm assuming that the problem is because first part of my code executes the \"akcja\" command, which may (but doesn't have to) delete one of the components of multimap:</p>\n\n<pre><code>    while ((c = getch()) != 27)\n    {\n        if (c == 'n')\n        {\n            typedef multimap&lt;int, Organizm*&gt;::iterator iterator;\n            for (int i = 10; i&gt;= 0; i--)\n            {\n                std::pair&lt;iterator, iterator&gt; iterpair = kolejnoscRuchu.equal_range(i);\n                iterator it = iterpair.first;\n\n                for (; it != iterpair.second; ++it)\n                {\n                    if(it-&gt;second-&gt;inicjatywa !=0)\n                    {\n                    it-&gt;second-&gt;akcja();\n                    }\n                }\n            }\n</code></pre>\n\n<p>}</p>\n\n<p>If certain conditions are met the akcja() will trigger the command which removes the element:</p>\n\n<pre><code>void Swiat::usunOrganizm(Organizm *organizm)\n{\n    this-&gt;organizmy[organizm-&gt;pozycja.x][organizm-&gt;pozycja.y] = NULL;\n\n    typedef multimap&lt;int, Organizm*&gt;::iterator iterator;\n    std::pair&lt;iterator, iterator&gt; iterpair2 = this-&gt;kolejnoscRuchu.equal_range(organizm-&gt;inicjatywa);\n\n    iterator it2 = iterpair2.first;\n    for (; it2 != iterpair2.second; ++it2) \n    {\n        if (it2-&gt;second == organizm) \n        {\n            cout &lt;&lt; \"usuwam \" &lt;&lt; it2-&gt;second-&gt;rysowanie() &lt;&lt; endl;\n            kolejnoscRuchu.erase(it2);\n            delete organizm;\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>I've added a \"cout &lt;&lt; \"usuwam \" &lt;&lt; it2->second->rysowanie() &lt;&lt; endl;\" part to confirm if the error occurs after removing any elements from my multimap. I would appreciate any help</p>\n"}, {"tags": ["c++", "gcc", "cmake", "clion"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1449692016, "post_id": 34187770, "comment_id": 56122507, "body": "Probably, <code>foo2.so</code> and <code>foo3.so</code> have incorrect format for given platform, while <code>foo1.so</code> is good. You may use <code>file</code> command for each of them and compare output."}, {"owner": {"reputation": 803, "user_id": 3645029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4315688551320e0341bad5de3b597a33?s=128&d=identicon&r=PG&f=1", "display_name": "TryToSolveItSimple", "link": "https://stackoverflow.com/users/3645029/trytosolveitsimple"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1449693372, "post_id": 34187770, "comment_id": 56123296, "body": "Thanks for this advice (did not think about the <code>file</code> command...). But they <i>are</i> the same:   <code>foo3.so: ELF 64-bit LSB  shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=..., stripped</code>  <code>foo2.so: ELF 64-bit LSB  shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=..., stripped</code>  <code>foo1.so: ELF 64-bit LSB  shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=..., stripped</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3319, "user_id": 865719, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/CSVe2.png?s=128&g=1", "display_name": "maddouri", "link": "https://stackoverflow.com/users/865719/maddouri"}, "reply_to_user": {"reputation": 803, "user_id": 3645029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4315688551320e0341bad5de3b597a33?s=128&d=identicon&r=PG&f=1", "display_name": "TryToSolveItSimple", "link": "https://stackoverflow.com/users/3645029/trytosolveitsimple"}, "edited": false, "score": 0, "creation_date": 1449694185, "post_id": 34188028, "comment_id": 56123737, "body": "Check out the edit ;) Apart from using <code>fooX</code> to refer to <code>libfooX.so</code> or <code>libfooX.a</code>, these are (AFAIK) the 2 methods for linking external libs in CMake. I personally prefer the &quot;imported target&quot; approach because it more flexible (e.g. you can set the <code>IMPORTED_LOCATION</code> property for each platform without changing the <code>target_link_libraries()</code> call). It also requires less typing if you have multiple targets using the same external lib."}, {"owner": {"reputation": 803, "user_id": 3645029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4315688551320e0341bad5de3b597a33?s=128&d=identicon&r=PG&f=1", "display_name": "TryToSolveItSimple", "link": "https://stackoverflow.com/users/3645029/trytosolveitsimple"}, "edited": false, "score": 0, "creation_date": 1449694905, "post_id": 34188028, "comment_id": 56124119, "body": "i tried the <b>EDIT</b> method before writing here and this one worked neither. Only the <code>IMPORTED</code> way helped here - i can not understand why..."}], "tags": [], "owner": {"reputation": 3319, "user_id": 865719, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/CSVe2.png?s=128&g=1", "display_name": "maddouri", "link": "https://stackoverflow.com/users/865719/maddouri"}, "is_accepted": true, "score": 6, "last_activity_date": 1449694039, "last_edit_date": 1449694039, "creation_date": 1449691602, "answer_id": 34188028, "question_id": 34187770, "link": "https://stackoverflow.com/questions/34187770/cmake-target-link-libraries-cannot-find-lfoo-but-it-is-in-the-same-directory/34188028#34188028", "title": "CMake &quot;TARGET_LINK_LIBRARIES cannot find -lfoo&quot; but it is in the same directory as another library", "body": "<p>Not sure, but it seems to me that CMake is looking for <code>libfoo1.so</code> whereas the file is actually <code>foo1.so</code> (the same applies for <code>foo2</code> and <code>foo3</code>)</p>\n\n<p>Try <a href=\"https://cmake.org/cmake/help/v3.0/manual/cmake-buildsystem.7.html#imported-targets\" rel=\"noreferrer\">\"importing\"</a> the libs:</p>\n\n<pre><code>add_library(foo1 SHARED IMPORTED)\nset_property(TARGET foo1 PROPERTY IMPORTED_LOCATION \"/home/sources/lib/libfoo1.so\")\n# same thing for foo2 and foo3 ...\n\ntarget_link_libraries(MyProj foo1 foo2 foo3)\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>There's also the possibility to provide the full path to the library:</p>\n\n<pre><code>target_link_libraries(MyProj \"/home/sources/lib/libfoo1.so\"\n                             \"/home/sources/lib/libfoo2.so\"\n                             \"/home/sources/lib/libfoo3.so\")\n</code></pre>\n"}], "owner": {"reputation": 803, "user_id": 3645029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4315688551320e0341bad5de3b597a33?s=128&d=identicon&r=PG&f=1", "display_name": "TryToSolveItSimple", "link": "https://stackoverflow.com/users/3645029/trytosolveitsimple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17576, "favorite_count": 1, "accepted_answer_id": 34188028, "answer_count": 1, "score": 9, "last_activity_date": 1502337509, "creation_date": 1449690695, "question_id": 34187770, "link": "https://stackoverflow.com/questions/34187770/cmake-target-link-libraries-cannot-find-lfoo-but-it-is-in-the-same-directory", "title": "CMake &quot;TARGET_LINK_LIBRARIES cannot find -lfoo&quot; but it is in the same directory as another library", "body": "<p>As mentioned above i have problems with compiling my c++ project (using CMake) which uses some dynamic libraries (.so).\nThere are 3 libs in my directory (i.e. <code>home/sources/lib/</code>). When i only tell the compiler (in the CMake file) to use the first lib (<code>foo1.so</code>) it works (only this file, the order does not matter). But it does not work with any of the other libs (<code>foo2.so</code> and <code>foo2.so</code>). All 3 files have the .so extension.</p>\n\n<p><strong>Note:</strong> The directory and file names were changed but the structure is the same.\nThe libraries i am using were not compiled / created by me and are from a 3rd party. (it would not matter when they were broken, would it?)</p>\n\n<hr>\n\n<p>And this is how my CMake file looks like:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.3)\nproject(MyProj)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11 -pthread -m64\")\nINCLUDE_DIRECTORIES(\"/home/sources/include\")\nLINK_DIRECTORIES(\"/home/sources/lib\")\n\nset(SOURCE_FILES main.cpp)\nadd_executable(MyProj ${SOURCE_FILES})\n\nTARGET_LINK_LIBRARIES(MyProj foo1.so)\n</code></pre>\n\n<p>Changing the above line to this does not work anymore:</p>\n\n<pre><code>TARGET_LINK_LIBRARIES(MyProj foo1.so foo2.so foo3.so)\n</code></pre>\n\n<p>Just another way to write it (does not help)</p>\n\n<pre><code>TARGET_LINK_LIBRARIES(MyProj foo1.so)\nTARGET_LINK_LIBRARIES(MyProj foo2.so)\nTARGET_LINK_LIBRARIES(MyProj foo3.so)\n</code></pre>\n\n<p>And as mentioned above: ALL 3 libraries are in the SAME directory (which i refer to with <code>LINK_DIRECTORIES</code>)</p>\n\n<p>And this is the error i get when trying to compile with the other libs (as said only <code>foo1.so</code> works):</p>\n\n<pre><code>[ 50%] Linking CXX executable MyProj\n/usr/bin/ld: cannot find -lfoo2\n/usr/bin/ld: cannot find -lfoo3\ncollect2: error: ld returned 1 exit status\nmake[3]: *** [MyProj] Error 1\nmake[2]: *** [CMakeFiles/MyProj.dir/all] Error 2\nmake[1]: *** [CMakeFiles/MyProj.dir/rule] Error 2\nmake: *** [MyProj] Error 2\n</code></pre>\n\n<p>P.S.: I did some research before posting here but did not find any otherone with this \"strange\" problem. And for sure i wouldn't have come so far with my CMake file without some googling skills ^^</p>\n"}, {"tags": ["c++", "console", "ncurses"], "comments": [{"owner": {"reputation": 463, "user_id": 1078397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda55420361250d293bd206af8cf2c38?s=128&d=identicon&r=PG", "display_name": "Arne Kjetil Andersen", "link": "https://stackoverflow.com/users/1078397/arne-kjetil-andersen"}, "edited": false, "score": 0, "creation_date": 1449693115, "post_id": 34187766, "comment_id": 56123159, "body": "could you show how you link ncurses?"}, {"owner": {"reputation": 123, "user_id": 5591889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c141da4059fdacd7dfdf6ed01d6d8471?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kusachev", "link": "https://stackoverflow.com/users/5591889/andrew-kusachev"}, "reply_to_user": {"reputation": 463, "user_id": 1078397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda55420361250d293bd206af8cf2c38?s=128&d=identicon&r=PG", "display_name": "Arne Kjetil Andersen", "link": "https://stackoverflow.com/users/1078397/arne-kjetil-andersen"}, "edited": false, "score": 0, "creation_date": 1449693276, "post_id": 34187766, "comment_id": 56123247, "body": "@ArneKjetilAndersen <code>g++ main.cpp -lncurses</code>"}, {"owner": {"reputation": 463, "user_id": 1078397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda55420361250d293bd206af8cf2c38?s=128&d=identicon&r=PG", "display_name": "Arne Kjetil Andersen", "link": "https://stackoverflow.com/users/1078397/arne-kjetil-andersen"}, "edited": false, "score": 0, "creation_date": 1449693453, "post_id": 34187766, "comment_id": 56123337, "body": "I&#39;m not on ubuntu, but on arch linux i have the library ncursesw which is the one supporting utf8, check and see if you have that on your system, and then try linking against that."}, {"owner": {"reputation": 123, "user_id": 5591889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c141da4059fdacd7dfdf6ed01d6d8471?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kusachev", "link": "https://stackoverflow.com/users/5591889/andrew-kusachev"}, "reply_to_user": {"reputation": 463, "user_id": 1078397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda55420361250d293bd206af8cf2c38?s=128&d=identicon&r=PG", "display_name": "Arne Kjetil Andersen", "link": "https://stackoverflow.com/users/1078397/arne-kjetil-andersen"}, "edited": false, "score": 0, "creation_date": 1449693601, "post_id": 34187766, "comment_id": 56123427, "body": "@ArneKjetilAndersen yes, i found this library on another forums, but it didn&#39;t help me, same problems"}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1449752069, "post_id": 34187766, "comment_id": 56149445, "body": "The program worked as intended when compiled and linked with ncursesw; it is likely that you made an error."}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 5660949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966cfbd35ce07b0e3b69b34dcf191e1a?s=128&d=identicon&r=PG&f=1", "display_name": "sav_a", "link": "https://stackoverflow.com/users/5660949/sav-a"}, "is_accepted": true, "score": 0, "last_activity_date": 1455652506, "last_edit_date": 1455652506, "creation_date": 1449695971, "answer_id": 34189194, "question_id": 34187766, "link": "https://stackoverflow.com/questions/34187766/c-ncurses-encoding-utf-8-troubles/34189194#34189194", "title": "C++ ncurses encoding (UTF-8) troubles", "body": "<p>try to use </p>\n\n<pre><code>std::wstring c;\nstd::getline(std::wcin,c);\nstd::wcout &lt;&lt; c;\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>setlocale(LC_ALL, \"ru_RU.UTF-8\");\n</code></pre>\n\n<hr>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"ncurses.h\"\n\nusing namespace std;\n\nstd::string getstring()\n{\n    std::string input;\n    nocbreak();\n    echo();\n    int ch = getch();\n    while ( ch != '\\n' )\n    {\n        input.push_back( ch );\n        ch = getch();\n    }\n    return input;\n}\n\nint main() {\n    std::wstring c;\n    std::getline(std::wcin,c);\n    std::wcout &lt;&lt; c;\n    initscr();\n    getstring();\n    endwin();\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 5591889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c141da4059fdacd7dfdf6ed01d6d8471?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kusachev", "link": "https://stackoverflow.com/users/5591889/andrew-kusachev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "accepted_answer_id": 34189194, "answer_count": 1, "score": 1, "last_activity_date": 1455652506, "creation_date": 1449690688, "last_edit_date": 1449692450, "question_id": 34187766, "link": "https://stackoverflow.com/questions/34187766/c-ncurses-encoding-utf-8-troubles", "title": "C++ ncurses encoding (UTF-8) troubles", "body": "<p>When i'm running this code: \n</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"ncurses.h\"\n\nusing namespace std;\n\nstd::string getstring()\n{\n    std::string input;\n    nocbreak();\n    echo();\n    int ch = getch();\n    while ( ch != '\\n' )\n    {\n        input.push_back( ch );\n        ch = getch();\n    }\n    return input;\n}\n\nint main() {\n    setlocale(LC_ALL, \"ru_RU.UTF-8\");\n    initscr();\n    getstring();\n    endwin();\n    return 0;\n}\n</code></pre>\n\n<p>and typing <code>\u0424\u042b\u0412\u0424\u042b\u0412</code> (Russian) terminal shows me:</p>\n\n<p><code>M-Q~DM-Q~KM-PM-2M-Q~DM-Q~KM-PM-2</code>. This problem is only when i'm running ncurses, I mean if I run <code>std::cout &lt;&lt; \"\u0424\u042b\u0412\u0424\u042b\u0412\";</code> I will see: <code>\u0424\u042b\u0412\u0424\u042b\u0412</code></p>\n\n<p>My <code>locale</code> output:</p>\n\n<pre><code>LANG=ru_RU.UTF-8\nLANGUAGE=ru\nLC_CTYPE=\"en_US.UTF-8\"\nLC_NUMERIC=\"en_US.UTF-8\"\nLC_TIME=\"en_US.UTF-8\"\nLC_COLLATE=\"en_US.UTF-8\"\nLC_MONETARY=\"en_US.UTF-8\"\nLC_MESSAGES=\"en_US.UTF-8\"\nLC_PAPER=\"en_US.UTF-8\"\nLC_NAME=\"en_US.UTF-8\"\nLC_ADDRESS=\"en_US.UTF-8\"\nLC_TELEPHONE=\"en_US.UTF-8\"\nLC_MEASUREMENT=\"en_US.UTF-8\"\nLC_IDENTIFICATION=\"en_US.UTF-8\"\nLC_ALL=en_US.UTF-8\n</code></pre>\n\n<p>Ubuntu 15.04. </p>\n\n<p>How can I fix it?</p>\n"}, {"tags": ["c++", "templates"], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 2539473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wsQQ3.png?s=128&g=1", "display_name": "Feng Deng", "link": "https://stackoverflow.com/users/2539473/feng-deng"}, "edited": false, "score": 0, "creation_date": 1449691449, "post_id": 34187740, "comment_id": 56122186, "body": "Thanks, you are spot on. The &quot;typename&quot; is what I was missing."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1449697326, "post_id": 34187740, "comment_id": 56125388, "body": "Confirmed Feng Deng is correct; and this has helped me to understand templates even more when nesting other classes or structures within a class template."}], "tags": [], "owner": {"reputation": 36538, "user_id": 471164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/45d4a7ba0fb8e789356f5da87536444d?s=128&d=identicon&r=PG", "display_name": "vitaut", "link": "https://stackoverflow.com/users/471164/vitaut"}, "is_accepted": false, "score": 4, "last_activity_date": 1449690614, "creation_date": 1449690614, "answer_id": 34187740, "question_id": 34187696, "link": "https://stackoverflow.com/questions/34187696/c-template-in-class-struct/34187740#34187740", "title": "C++ Template - In-class Struct", "body": "<p>Since <code>B</code> is defined inside <code>A</code> you should qualify it with <code>A&lt;T&gt;::</code>:</p>\n\n<pre><code>template&lt;typename T&gt;\ntypename A&lt;T&gt;::B *A&lt;T&gt;::locate(const T&amp; val) const\n{\n    //logic\n}\n</code></pre>\n\n<p>Also note <code>typename</code> which is required because <code>B</code> is a dependent name.</p>\n"}], "owner": {"reputation": 133, "user_id": 2539473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wsQQ3.png?s=128&g=1", "display_name": "Feng Deng", "link": "https://stackoverflow.com/users/2539473/feng-deng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449690614, "creation_date": 1449690456, "question_id": 34187696, "link": "https://stackoverflow.com/questions/34187696/c-template-in-class-struct", "title": "C++ Template - In-class Struct", "body": "<p>For the following code, I got a compilation error at implementation line as:\n\"B does not define a type\". \nI am aware of solution of put the function definition inside of class declaration. Is it possible, though, to have the function definition out of the template class declaration? Thanks</p>\n\n<pre><code>template&lt;typename T&gt;\nclass A {\n    public:\n        // ctor, dtor and interface funcs etc\n\n   private:\n     struct B {\n          T value;\n          B *next;\n     }\n\n     B *locate(const T&amp; val) const;\n\n     // blah blah\n};\n\ntemplate&lt;typename T&gt;\nB *A&lt;T&gt;::locate(const T&amp; val) const\n{\n    //logic\n}\n</code></pre>\n"}, {"tags": ["c++", "reference"], "comments": [{"owner": {"reputation": 17, "user_id": 3259795, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002773945996/picture?type=large", "display_name": "user3259795", "link": "https://stackoverflow.com/users/3259795/user3259795"}, "edited": false, "score": 0, "creation_date": 1449690605, "post_id": 34187693, "comment_id": 56121694, "body": "Also how to call the function outside from the client side? Thanks"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1449690836, "post_id": 34187693, "comment_id": 56121810, "body": "Have you tried to use a <code>return</code> statement?"}, {"owner": {"reputation": 17, "user_id": 3259795, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002773945996/picture?type=large", "display_name": "user3259795", "link": "https://stackoverflow.com/users/3259795/user3259795"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1449691170, "post_id": 34187693, "comment_id": 56122021, "body": "Can you check my code above? not sure if it will return the reference or not."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1449691404, "post_id": 34187693, "comment_id": 56122163, "body": "You cannot have null references, so <code>return null</code> will not work. You have to find another way of reporting errors. Also <code>*i.getName()</code> is wrong, use <code>i-&gt;getName()</code>."}, {"owner": {"reputation": 17, "user_id": 3259795, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002773945996/picture?type=large", "display_name": "user3259795", "link": "https://stackoverflow.com/users/3259795/user3259795"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1449691732, "post_id": 34187693, "comment_id": 56122338, "body": "But the function require a User reference, what else should i return? Also how to call the function from the client side. Assume we declare a UserDB obejct userdb, is &quot;User&amp; usr = userdb.currentUser(&quot;Mike&quot;) the correct syntax? Thanks!"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1449692622, "post_id": 34187693, "comment_id": 56122865, "body": "If the loop finishes, you might <code>throw</code> an exception."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1449693179, "post_id": 34187693, "comment_id": 56123184, "body": "Is this a homework? Is there an explicit requirement to return a reference?"}, {"owner": {"reputation": 17, "user_id": 3259795, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002773945996/picture?type=large", "display_name": "user3259795", "link": "https://stackoverflow.com/users/3259795/user3259795"}, "edited": false, "score": 0, "creation_date": 1449696067, "post_id": 34187693, "comment_id": 56124685, "body": "Thanks for your help! it is not an explicit requirement to return a reference so i just return a pointer instead. I just start learning C++ so i am kind of afraid to use pointer"}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1449692804, "creation_date": 1449692804, "answer_id": 34188328, "question_id": 34187693, "link": "https://stackoverflow.com/questions/34187693/how-to-return-an-object-reference-from-a-function-in-c-and-how-to-call-the-fun/34188328#34188328", "title": "How to return an object reference from a function in C++ and how to call the function from the client side?", "body": "<p>If you want to <em>specifically</em> return a reference, the item you are referring to must have a lifetime after execution leaves the function.  </p>\n\n<p>There are several alternatives:  </p>\n\n<ol>\n<li>static local variable in function</li>\n<li>using dynamic memory</li>\n<li>variable declared outside function </li>\n<li>Pass by non-const reference</li>\n</ol>\n\n<p>Here is an example of #1:  </p>\n\n<pre><code>const std::string&amp; Get_Model_Name(void)\n{\n  static const std::string model_name = \"Accord\";\n  return model_name;\n}\n</code></pre>\n\n<p>Other alternatives are to return a variable by value (copy). This doesn't use references.  A copy is returned.<br>\nFor example:</p>\n\n<pre><code>std::string Get_Manufacturer_Name(void)\n{\n  return std::string(\"Honda\");\n}\n</code></pre>\n\n<p>You may also consider passing by parameter and modifying the parameter:  </p>\n\n<pre><code>void Get_Lunch_Special_Name(std::string&amp; entree_name)\n{\n  entree_name = std::string(\"Beef Wellington\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 0, "last_activity_date": 1449746033, "creation_date": 1449746033, "answer_id": 34200467, "question_id": 34187693, "link": "https://stackoverflow.com/questions/34187693/how-to-return-an-object-reference-from-a-function-in-c-and-how-to-call-the-fun/34200467#34200467", "title": "How to return an object reference from a function in C++ and how to call the function from the client side?", "body": "<p>there are a couple of ways to do this cleanly.</p>\n\n<p>You can of course return a pointer, but that will be surprising to people as it is more normal to return a reference or an object. pointers present object consumers with a number of problems, e.g.:</p>\n\n<ul>\n<li><p>what should I conclude if it's null?</p></li>\n<li><p>should I delete it?</p></li>\n</ul>\n\n<p>and so on.</p>\n\n<p>Returning a reference to something or a something removes these ambiguities.</p>\n\n<p>Having said that, references cannot be empty, so the function must return something. If it does not find the item it's looking for, it must indicate that to the caller. One way is an exception (i.e. it was logically incorrect to ask for that item). However, if the item not being there is a normal occurrence, then you don't want to force your consumers to handle exceptions - that's bad form too.</p>\n\n<p>So the answer is to return an object that encapsulates an optional reference.</p>\n\n<p>A good example of this is <code>boost::optional&lt;User&amp;&gt;</code> but if you don't want to include boost it's fairly simple to roll your own:</p>\n\n<pre><code>struct optional_user\n{\n  using element_type = User;\n  using reference_type = element_type&amp;;\n\n  optional_user() : _p(nullptr) {}\n\n  optional_user(reference_type r)\n  : _p(std::addressof(r))\n  {}\n\n  bool valid() const { return bool(_p); }\n\n  // compares to true if the user is present, false otherwise\n  operator bool() const { return valid(); }\n\n  reference_type value() const { \n    assert(_p);\n    return *_p;\n  }\n\n  // can be used anywhere a User&amp; is required\n  operator reference_type () const { \n    return value();\n  }\n\nprivate:\n  element_type* _p = nullptr;  \n};\n</code></pre>\n\n<p>now your function becomes:</p>\n\n<pre><code>optional_user UserDB::currentUser(string username)\n{\n  typedef list&lt;User&gt;::iterator Iter;\n  for(Iter i = userlists.begin(); i != userlists.end(); ++i)\n  {  \n    if(i-&gt;getName().compare(username)==0)\n    {\n      return optional_user(*i);\n    }\n  }\n  // return an indicator that the user is not present\n  return optional_user();\n}\n</code></pre>\n\n<p>and your call site becomes:</p>\n\n<pre><code>optional_user = users.currentUser(\"bob\");\nif (optional_user) {\n  do_something_with(optional_user /* .value() */);\n}\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 3259795, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002773945996/picture?type=large", "display_name": "user3259795", "link": "https://stackoverflow.com/users/3259795/user3259795"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 34200467, "answer_count": 2, "score": 1, "last_activity_date": 1449746033, "creation_date": 1449690453, "last_edit_date": 1449695921, "question_id": 34187693, "link": "https://stackoverflow.com/questions/34187693/how-to-return-an-object-reference-from-a-function-in-c-and-how-to-call-the-fun", "title": "How to return an object reference from a function in C++ and how to call the function from the client side?", "body": "<p>I am implementing a member function called CurrentUser. It will take a username as parameter and return the User instance object which matches the given username. Below is the code</p>\n\n<pre><code>User&amp; UserDB::currentUser(string username){\n      // userlists is a instance member which is list of user objects\n  for(list&lt;User&gt;::iterator i = userlists.begin(); i != userlists.end(); ++i)\n {  \n    if(*i.getName().compare(username)==0){\n          return *i;\n    }\n }\n return null;\n}\n</code></pre>\n\n<p>Not sure if it is the correct way to do so. Correct me if it is wrong. Thanks!</p>\n\n<p>Update:\nhey guys thanks for your advice, i figure out a way to do so by returning a User pointer. Here is the code.</p>\n\n<pre><code>User* UserDB::currentUser(string username){\nfor(list&lt;User&gt;::iterator i = userlists.begin(); i != userlists.end(); ++i)\n{     \n    if(i-&gt;getName().compare(username)==0){\n        return i;\n    }\n}\nreturn null;\n}\n</code></pre>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 2, "creation_date": 1449690541, "post_id": 34187640, "comment_id": 56121666, "body": "You&#39;re aware that <code>numList.size()</code> changes, and thus <code>i</code> and <code>j</code> might not be less than <code>numList.size()</code> anymore?"}, {"owner": {"reputation": 11, "user_id": 5653133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bedab84164c75ff719e9c86c88201e1?s=128&d=identicon&r=PG&f=1", "display_name": "LouieV1994", "link": "https://stackoverflow.com/users/5653133/louiev1994"}, "reply_to_user": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1449690781, "post_id": 34187640, "comment_id": 56121779, "body": "so as long as i compensate for the size of numList, this is still proper syntax?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1449690934, "post_id": 34187640, "comment_id": 56121872, "body": "Return a std::tuple of three vectors and do not alter the input vector"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5653133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bedab84164c75ff719e9c86c88201e1?s=128&d=identicon&r=PG&f=1", "display_name": "LouieV1994", "link": "https://stackoverflow.com/users/5653133/louiev1994"}, "edited": false, "score": 0, "creation_date": 1449691251, "post_id": 34187810, "comment_id": 56122077, "body": "ok slight confusion. What do you mean don&#39;t let them increment? Should i not have the erase inside of the loop? but that doesn&#39;t seem right in my head"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "reply_to_user": {"reputation": 11, "user_id": 5653133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bedab84164c75ff719e9c86c88201e1?s=128&d=identicon&r=PG&f=1", "display_name": "LouieV1994", "link": "https://stackoverflow.com/users/5653133/louiev1994"}, "edited": false, "score": 0, "creation_date": 1449691461, "post_id": 34187810, "comment_id": 56122189, "body": "No, it needs to be in the loop, but <code>erase</code> makes <code>i</code> and <code>j</code> already be index of the next element, if you increment it afterwards, you&#39;ll skip that elements."}, {"owner": {"reputation": 11, "user_id": 5653133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bedab84164c75ff719e9c86c88201e1?s=128&d=identicon&r=PG&f=1", "display_name": "LouieV1994", "link": "https://stackoverflow.com/users/5653133/louiev1994"}, "edited": false, "score": 0, "creation_date": 1449692017, "post_id": 34187810, "comment_id": 56122508, "body": "so are you saying i need to increment i and j BEFORE using erase? if so, how can you do that with erase being in the loop? i and j won&#39;t increment until a cycle is done right?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "reply_to_user": {"reputation": 11, "user_id": 5653133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bedab84164c75ff719e9c86c88201e1?s=128&d=identicon&r=PG&f=1", "display_name": "LouieV1994", "link": "https://stackoverflow.com/users/5653133/louiev1994"}, "edited": false, "score": 0, "creation_date": 1449692122, "post_id": 34187810, "comment_id": 56122571, "body": "<code>if(condition) { erase } else { increment }</code> and don&#39;t do <code>++i</code> and <code>++j</code> in the <code>for</code> &quot;increment&quot; section."}, {"owner": {"reputation": 11, "user_id": 5653133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bedab84164c75ff719e9c86c88201e1?s=128&d=identicon&r=PG&f=1", "display_name": "LouieV1994", "link": "https://stackoverflow.com/users/5653133/louiev1994"}, "edited": false, "score": 0, "creation_date": 1449692293, "post_id": 34187810, "comment_id": 56122674, "body": "ok i see...funny thing is i&#39;ve never done a for loop without i++ part so i was confused haha"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "reply_to_user": {"reputation": 11, "user_id": 5653133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bedab84164c75ff719e9c86c88201e1?s=128&d=identicon&r=PG&f=1", "display_name": "LouieV1994", "link": "https://stackoverflow.com/users/5653133/louiev1994"}, "edited": false, "score": 0, "creation_date": 1449692924, "post_id": 34187810, "comment_id": 56123053, "body": "And remember to do (1), then see how it goes. Maybe you&#39;ll also want the larger elements to end up in <code>v1</code> and smaller in <code>v2</code>."}], "tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": false, "score": 1, "last_activity_date": 1449692845, "last_edit_date": 1449692845, "creation_date": 1449690820, "answer_id": 34187810, "question_id": 34187640, "link": "https://stackoverflow.com/questions/34187640/remove-element-from-vector-and-adding-that-element-to-a-new-vector-c/34187810#34187810", "title": "remove element from vector and adding that element to a new vector c++", "body": "<p>You'll have to discard <code>listSize</code> and use <code>numList.size()</code>, that will give you the current size. You might as well delete the whole <code>remainder = numList[i] % numList[j];</code>, while we're at it. I guess you're not using <code>remainder</code> afterwards, remove it completely.</p>\n\n<p><strong>Important:</strong></p>\n\n<ol>\n<li>The element of larger index should be removed first, then the smaller.</li>\n<li>You shouldn't increment <code>i</code> and <code>j</code> in the cycle where erasing occurred - you don't want to skip any elements.</li>\n<li>There's <code>1</code> in among the elements that will pair up with anything. Fix the condition.</li>\n</ol>\n\n<p>To conclude, this is <strong>not cool</strong>:</p>\n\n<pre><code>int i; // just absurd\n// list of variable declarations that are not needed right now, or not needed at all\n\nfor(i = 0; i &lt; listSize; i++)\n</code></pre>\n\n<p>This is much better:</p>\n\n<pre><code>for(int i = 0; i &lt; numList.size(); i++)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1449691931, "creation_date": 1449691931, "answer_id": 34188120, "question_id": 34187640, "link": "https://stackoverflow.com/questions/34187640/remove-element-from-vector-and-adding-that-element-to-a-new-vector-c/34188120#34188120", "title": "remove element from vector and adding that element to a new vector c++", "body": "<p>I think you need something like the following</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n    std::vector&lt;int&gt; v = { 9, 6, 3, 3, 2, 1 };\n    std::vector&lt;int&gt; v1;\n    std::vector&lt;int&gt; v2;\n\n    for ( std::vector&lt;int&gt;::size_type i = 0; i &lt; v.size(); )\n    {\n        std::vector&lt;int&gt;::size_type j = i + 1;\n        while ( j &lt; v.size() &amp;&amp; v[i] % v[j] ) j++;\n        if ( j != v.size() )\n        {\n            v1.push_back( v[i] );\n            v2.push_back( v[j] );\n            v.erase( std::next( v.begin(), j ) );    \n            v.erase( std::next( v.begin(), i ) );    \n        }\n        else\n        {\n            i++;\n        }\n    }\n\n    for ( int x : v1 ) std::cout &lt;&lt; x &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;\n\n    for ( int x : v2 ) std::cout &lt;&lt; x &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The program output is </p>\n\n<pre><code>9 6 2 \n3 3 1 \n</code></pre>\n\n<p>Take into account that the index in the inner loop can not be less than the index in the outer loop for matching elements.</p>\n"}], "owner": {"reputation": 11, "user_id": 5653133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bedab84164c75ff719e9c86c88201e1?s=128&d=identicon&r=PG&f=1", "display_name": "LouieV1994", "link": "https://stackoverflow.com/users/5653133/louiev1994"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449692845, "creation_date": 1449690243, "last_edit_date": 1449692818, "question_id": 34187640, "link": "https://stackoverflow.com/questions/34187640/remove-element-from-vector-and-adding-that-element-to-a-new-vector-c", "title": "remove element from vector and adding that element to a new vector c++", "body": "<p>I have a <code>std::vector&lt;int&gt; numList</code> and it contains <code>{9,6,3,3,2,1}</code>. What I want, is during the loop, once we hit <code>9 % 3 == 0</code>, I want to put <code>9</code> into a new vector <code>v1</code> and <code>3</code> into <code>v2</code>, while erasing these numbers from the original list. And repeat the process every time the mod results in <code>0</code>.</p>\n\n<p>I have this but it crashes:</p>\n\n<pre><code>for(i = 0; i &lt; listSize; i++)\n{\n    for(j = 0; j &lt; listSize; j++)\n    {\n        if(i != j)\n        {\n            remainder = numList[i] % numList[j];\n\n            if(numList[i] % numList[j] == 0)\n            {\n                //cout&lt;&lt; numList[i] &lt;&lt; \" \" &lt;&lt; numList[j]&lt;&lt;endl;\n                v1.push_back(numList[i]);\n                v2.push_back(numList[j]);\n\n                numList.erase(numList.begin() + i);\n                numList.erase(numList.begin() + j);\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "matlab"], "comments": [{"owner": {"reputation": 11973, "user_id": 2748311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7578b7380f9af68b327f0ab26961cb83?s=128&d=identicon&r=PG", "display_name": "excaza", "link": "https://stackoverflow.com/users/2748311/excaza"}, "edited": false, "score": 1, "creation_date": 1449694148, "post_id": 34187559, "comment_id": 56123710, "body": "Have you read <a href=\"http://www.mathworks.com/help/simulink/ug/how-working-with-matlab-classes-is-different-for-code-generation.html\" rel=\"nofollow noreferrer\">the documentation</a>?"}, {"owner": {"reputation": 1814, "user_id": 3297440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b9a3c27ffed7a206aa03f34cde4bce?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Livingston", "link": "https://stackoverflow.com/users/3297440/ryan-livingston"}, "edited": false, "score": 0, "creation_date": 1451997632, "post_id": 34187559, "comment_id": 56968854, "body": "Classes cannot be passed directly to <code>codegen</code> or added as entry-points in the Coder App. Instead, write a function which uses your class(es) and use that function as your entry-point."}], "owner": {"reputation": 23, "user_id": 5558561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84ef02760c8c7b9055472f427cea2af?s=128&d=identicon&r=PG&f=1", "display_name": "ingyukoh", "link": "https://stackoverflow.com/users/5558561/ingyukoh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1449689928, "creation_date": 1449689928, "question_id": 34187559, "link": "https://stackoverflow.com/questions/34187559/matlab-coder-converting-from-classes-of-matlab-to-c-c", "title": "MATLAB Coder converting from classes of MATLAB to C/C++?", "body": "<p>MATLAB contains several classdef with properties and methods.  In converting to C/C++ from MATLAB through MATLAB Coder,  Coder gives error message \u201cAll entry-point files must be fun functions.  ABC.m is a class\u201d.</p>\n\n<p>Should I rewrite the classes in classdef into separate methods? Are there better approaches for converting from classes of MATLAB to C/C++?</p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1449689902, "post_id": 34187536, "comment_id": 56121315, "body": "No, did you try it out? It might compile, but <code>anArray[1,2]</code> simply discards the <code>1,</code>"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5182906, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gx7ruulkbCg/AAAAAAAAAAI/AAAAAAAABx0/ccQ5di-QM_c/photo.jpg?sz=128", "display_name": "Richard Hausman", "link": "https://stackoverflow.com/users/5182906/richard-hausman"}, "edited": false, "score": 0, "creation_date": 1449789038, "post_id": 34187564, "comment_id": 56171316, "body": "Thank you, knowledgeable Joachim. Yes, using 1,2 instead of 0,1 was careless. And consider this: the return from client.read() is a byte in size(but only containing 2 chars). I want to copy each char into a separate array element. How can I do this?"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1449689943, "creation_date": 1449689943, "answer_id": 34187564, "question_id": 34187536, "link": "https://stackoverflow.com/questions/34187536/accessing-two-array-indexes-at-once-arduino/34187564#34187564", "title": "Accessing two array indexes at once (Arduino)", "body": "<p>You can't, you need to assign to a temporary variable, and then use the temporary variable to assign the array elements:</p>\n\n<pre><code>char temp = client.read();\nanArray[0] = temp;\nanArray[1] = temp;\n</code></pre>\n\n<p>Also note that I changed the indexes, remember that array indexes are zero-based.</p>\n"}], "owner": {"reputation": 29, "user_id": 5182906, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gx7ruulkbCg/AAAAAAAAAAI/AAAAAAAABx0/ccQ5di-QM_c/photo.jpg?sz=128", "display_name": "Richard Hausman", "link": "https://stackoverflow.com/users/5182906/richard-hausman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 34187564, "answer_count": 1, "score": -2, "last_activity_date": 1449690202, "creation_date": 1449689825, "last_edit_date": 1449690202, "question_id": 34187536, "link": "https://stackoverflow.com/questions/34187536/accessing-two-array-indexes-at-once-arduino", "title": "Accessing two array indexes at once (Arduino)", "body": "<p>I am creating a little home automation system for myself using an arduino uno, wifi shield, and relay shield. I am still in the early stages, but right now I basically need to know if the following is possible/would work:</p>\n\n<pre><code>char anArray[2];\n...\n\nvoid loop()\n{\n   anArray[1,2] = client.read();\n}\n</code></pre>\n\n<p>In this scenario, I know for a fact that each client transmission will be exactly two characters long. The code above(along with a lot of other code I wrote, does compile, but I need to know if the method above would actually assign the characters of the client request to the array.\nFinally, I would really appreciate some knowlege of how to connect to the server I am creating with the Arduino using a computer or phone, allowing for remote control. Thank you in advance!</p>\n"}, {"tags": ["c++", "if-statement", "vector"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1449689960, "post_id": 34187512, "comment_id": 56121347, "body": "Both <code>i == k</code> and <code>j == k</code> imply <code>i == k &amp;&amp; k == j</code>, so the latter is redundant in your disjunction."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1449690032, "post_id": 34187512, "comment_id": 56121389, "body": "If you&#39;re trying to call a function called <code>earase()</code>, you&#39;re not."}, {"owner": {"reputation": 162, "user_id": 5347436, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/37a8ac846838c8b39e8b1b8ea49301bc?s=128&d=identicon&r=PG&f=1", "display_name": "MacGruber", "link": "https://stackoverflow.com/users/5347436/macgruber"}, "edited": false, "score": 0, "creation_date": 1449690298, "post_id": 34187512, "comment_id": 56121519, "body": "Doing a long time since i did c++, so i dont know if you can pass a vector in parameter with that syntax. BUT, im sure that the syntax for calling <code>earase</code> isnt good, you cannot put the type of variable when calling a function."}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1449690320, "post_id": 34187512, "comment_id": 56121530, "body": "You said &quot;not equal values&quot; but seem to have tried (and failed) to get &quot;not equal positions&quot;.  Getting not equal positions is much simpler.  But which do you want?"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1449690437, "post_id": 34187512, "comment_id": 56121594, "body": "You might want to consider adding a set of parenthesis to the if. The compiler usually throws a warning at you if you mix <code>||</code> and <code>&amp;&amp;</code> without parenthesis (Do you mean <code>A || (B &amp;&amp; C)</code> or <code>(A || B) &amp;&amp; C)</code>?) I can never remember which has higher precedence. It might not be doing what you want."}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1449690575, "post_id": 34187512, "comment_id": 56121678, "body": "Since <code>z</code> will be wrong, the ultimate call to <code>erase</code> would be wrong even if the call to <code>earase</code> were really a call.  It would be a lot simpler to make the push properly conditional rather than push things you didn&#39;t want and try to erase them"}, {"owner": {"reputation": 47, "user_id": 5660877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c21cc2f3b4a0df9cf584806f756810d?s=128&d=identicon&r=PG&f=1", "display_name": "MrArO", "link": "https://stackoverflow.com/users/5660877/mraro"}, "edited": false, "score": 0, "creation_date": 1449690607, "post_id": 34187512, "comment_id": 56121696, "body": "I&#39;m trying to get not equal positions. Sorry for my poor english."}, {"owner": {"reputation": 47, "user_id": 5660877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c21cc2f3b4a0df9cf584806f756810d?s=128&d=identicon&r=PG&f=1", "display_name": "MrArO", "link": "https://stackoverflow.com/users/5660877/mraro"}, "edited": false, "score": 0, "creation_date": 1449690699, "post_id": 34187512, "comment_id": 56121743, "body": "the program seems to work now, I deleted &#39;i == k &amp;&amp; k == j&#39; and &#39;z&#39;, and changed &#39;erase&#39; with &#39;.pop_back()&#39;"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1449691404, "post_id": 34187512, "comment_id": 56122164, "body": "Sorry, I didn&#39;t mean exactly what I said. I really meant that the current condition implies the condition <code>i == k || j == k</code> and that this condition implies the current one (i.e., the two conditions are equivalent)."}], "answers": [{"tags": [], "owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "is_accepted": false, "score": 0, "last_activity_date": 1449690314, "creation_date": 1449690314, "answer_id": 34187661, "question_id": 34187512, "link": "https://stackoverflow.com/questions/34187512/program-seems-to-skip-if-statement/34187661#34187661", "title": "Program seems to skip &#39;if&#39; statement", "body": "<p>The body of your <code>if</code> is actually something quite different than you expect:</p>\n\n<pre><code>if (i == j || i == k || j == k || (i == k ) &amp;&amp; k==j)\n{\n    void earase(vector&lt;int&gt; V2, unsigned int z); // &lt;&lt;&lt;&lt;&lt;&lt;&lt;\n}\n</code></pre>\n\n<p>You're not <strong>calling</strong> <code>earase</code>. Instead, you're <strong>declaring</strong> a function called <code>earase</code>. If you want to call the function, call it:</p>\n\n<pre><code>if (i == j || i == k || j == k || (i == k ) &amp;&amp; k==j)\n{\n    earase(V2, z);\n}\n</code></pre>\n\n<p>By the way you could have easily checked that with some debugging output (like <code>std::cout &lt;&lt; \"if entered\";</code> after/before <code>earase</code>). However, keep in mind that this won't actually change <code>V2</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "is_accepted": true, "score": 0, "last_activity_date": 1449690711, "creation_date": 1449690711, "answer_id": 34187776, "question_id": 34187512, "link": "https://stackoverflow.com/questions/34187512/program-seems-to-skip-if-statement/34187776#34187776", "title": "Program seems to skip &#39;if&#39; statement", "body": "<p>Non equal positions is trivial, no test required (assuming you want each combination only once):</p>\n\n<pre><code>for (unsigned int i = 0; i &lt; V1.size(); i++){\n    for (unsigned int j = 0; j &lt; i; j++){\n        for (unsigned int k = 0; k &lt; j; k++){\n            V2.push_back(V1[i] * V1[j] * V1[k]); } } }\n</code></pre>\n\n<p>If for some reason, you wanted all each combination multiple times (as if you had gone through all N cubed possibilities skipping only duplicate positions) just go through the above simple way and push each multiple times.</p>\n"}], "owner": {"reputation": 47, "user_id": 5660877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c21cc2f3b4a0df9cf584806f756810d?s=128&d=identicon&r=PG&f=1", "display_name": "MrArO", "link": "https://stackoverflow.com/users/5660877/mraro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 34187776, "answer_count": 2, "score": 1, "last_activity_date": 1449690711, "creation_date": 1449689757, "question_id": 34187512, "link": "https://stackoverflow.com/questions/34187512/program-seems-to-skip-if-statement", "title": "Program seems to skip &#39;if&#39; statement", "body": "<p>I'm attempting to create a program that will multiply 3 not equal values from vector 1 ('V1'), and write in vector 2 ('V2'). I'm using 3 'for' loops and an integer that counts vector 2's value's number. But program skips the 'if' statement.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include&lt;fstream&gt;\n#include&lt;iostream&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\nvoid earase(vector&lt;int&gt; V2, unsigned int z){\n    V2.erase(V2.begin() + z);\n}\n\nvoid main(){\nunsigned int N;\nunsigned int z = 0;\nvector&lt;int&gt; V1;\nvector&lt;int&gt; V2;\nint input;\nifstream file1;\nfile1.open(\"input.txt\");\nfile1 &gt;&gt; N;\n\nfor (unsigned int i = 0; i &lt; N; i++){\n    file1 &gt;&gt; input;\n    V1.push_back(input);\n}\nfile1.close();\n\nfor (unsigned int i = 0; i &lt; V1.size(); i++){\n    for (unsigned int j = 0; j &lt; V1.size(); j++){\n        for (unsigned int k = 0; k &lt; V1.size(); k++){\n            V2.push_back(V1[i] * V1[j] * V1[k]);\n            if (i == j || i == k || j == k || (i == k ) &amp;&amp; k==j)\n            {\n                void earase(vector&lt;int&gt; V2, unsigned int z);\n            }\n            z++;\n        }\n    }\n}\n\nsort(V2.begin(), V2.end());\n\nofstream file2;\nfile2.open(\"output.txt\");\nfile2 &lt;&lt; V2.back();\nfile2.close();\n}\n</code></pre>\n\n<p>Here is the input.txt file</p>\n\n<pre><code>4\n1 2 3 4\n</code></pre>\n\n<p>After finishing the program sorts the vector 2 and writes the last number in vector 2 in 'output.txt' but it writes values that will come only if multiply the same value from vector 1, 3 times.</p>\n\n<p>I think the problem is in 'if' statement, and 'z' integer, is there any more efficient way to do this?</p>\n"}, {"tags": ["c++", "qt", "pointers", "segmentation-fault", "cross-platform"], "comments": [{"owner": {"reputation": 157, "user_id": 2163085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5abe112154f5e1f223ea516e311a30?s=128&d=identicon&r=PG", "display_name": "Ninjammer", "link": "https://stackoverflow.com/users/2163085/ninjammer"}, "edited": false, "score": 1, "creation_date": 1449699945, "post_id": 34187475, "comment_id": 56126716, "body": "When is setMainColorView() being called?  Are you certain test is initialized at that point?  If you&#39;re using Qt Creator, run the debugger with breakpoints on where you initialise test and where you use it.  make sure it&#39;s initialised first, and when it hits the breakpoint on using it, examine it ot make sure it&#39;s a valid object."}, {"owner": {"reputation": 41, "user_id": 3145639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1514476265/picture?type=large", "display_name": "NimazSheik", "link": "https://stackoverflow.com/users/3145639/nimazsheik"}, "reply_to_user": {"reputation": 157, "user_id": 2163085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5abe112154f5e1f223ea516e311a30?s=128&d=identicon&r=PG", "display_name": "Ninjammer", "link": "https://stackoverflow.com/users/2163085/ninjammer"}, "edited": false, "score": 0, "creation_date": 1449716719, "post_id": 34187475, "comment_id": 56132208, "body": "@Ninjammer setMainColorView() is called from another class. I am trying to use the existing test Object that is created in setToolbar, instead of creating another object"}, {"owner": {"reputation": 157, "user_id": 2163085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5abe112154f5e1f223ea516e311a30?s=128&d=identicon&r=PG", "display_name": "Ninjammer", "link": "https://stackoverflow.com/users/2163085/ninjammer"}, "edited": false, "score": 1, "creation_date": 1449716913, "post_id": 34187475, "comment_id": 56132250, "body": "I know what you&#39;re trying to do, and that&#39;s why I suggested using the debugger with breakpoints so you can check that things are happening in the order you expect, and examine the object you&#39;re trying to use.  Even without breakpoints, if you run it through the debugger and it segfaults on using the test object, you can see at that point if test is null, or if something in testMethod() is going wrong."}, {"owner": {"reputation": 41, "user_id": 3145639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1514476265/picture?type=large", "display_name": "NimazSheik", "link": "https://stackoverflow.com/users/3145639/nimazsheik"}, "reply_to_user": {"reputation": 157, "user_id": 2163085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5abe112154f5e1f223ea516e311a30?s=128&d=identicon&r=PG", "display_name": "Ninjammer", "link": "https://stackoverflow.com/users/2163085/ninjammer"}, "edited": false, "score": 0, "creation_date": 1449717573, "post_id": 34187475, "comment_id": 56132409, "body": "@Ninjammer got it, ill check it again and get back to you."}, {"owner": {"reputation": 41, "user_id": 3145639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1514476265/picture?type=large", "display_name": "NimazSheik", "link": "https://stackoverflow.com/users/3145639/nimazsheik"}, "reply_to_user": {"reputation": 157, "user_id": 2163085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5abe112154f5e1f223ea516e311a30?s=128&d=identicon&r=PG", "display_name": "Ninjammer", "link": "https://stackoverflow.com/users/2163085/ninjammer"}, "edited": false, "score": 0, "creation_date": 1449718154, "post_id": 34187475, "comment_id": 56132539, "body": "@Ninjammer okay i checked it, and the program works in the proper order, until I come to test-&gt;testMethod(); It&#39;s where I get the segmentation error. What I am trying to do is access the test object that is already created in setToolbar(), without passing the object into setMainColorView().   Like is there a way to make the test object accessible to all the methods in the Toolbar class."}, {"owner": {"reputation": 157, "user_id": 2163085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5abe112154f5e1f223ea516e311a30?s=128&d=identicon&r=PG", "display_name": "Ninjammer", "link": "https://stackoverflow.com/users/2163085/ninjammer"}, "edited": false, "score": 1, "creation_date": 1449718524, "post_id": 34187475, "comment_id": 56132624, "body": "It&#39;s public, so it should be.  What does the debugger tell you about test?  does it have a value of 0?  It implies that at runtime there&#39;s something wrong with the test object.  If it was an issue with the testMethod() not being accessible, you&#39;d find that out at compile time."}, {"owner": {"reputation": 41, "user_id": 3145639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1514476265/picture?type=large", "display_name": "NimazSheik", "link": "https://stackoverflow.com/users/3145639/nimazsheik"}, "reply_to_user": {"reputation": 157, "user_id": 2163085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5abe112154f5e1f223ea516e311a30?s=128&d=identicon&r=PG", "display_name": "Ninjammer", "link": "https://stackoverflow.com/users/2163085/ninjammer"}, "edited": false, "score": 0, "creation_date": 1449721188, "post_id": 34187475, "comment_id": 56133333, "body": "@Ninjammer Sorry for the late reply, so far what I have tried is. I moved the test = new ColorButton(QColor(&quot;#8C001A&quot;)); to setMainColorView() and I still seem to be getting the same problem, I also added the setMainColorView in the header file, in the code above, i forgot to add it before."}, {"owner": {"reputation": 41, "user_id": 3145639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1514476265/picture?type=large", "display_name": "NimazSheik", "link": "https://stackoverflow.com/users/3145639/nimazsheik"}, "reply_to_user": {"reputation": 157, "user_id": 2163085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5abe112154f5e1f223ea516e311a30?s=128&d=identicon&r=PG", "display_name": "Ninjammer", "link": "https://stackoverflow.com/users/2163085/ninjammer"}, "edited": false, "score": 0, "creation_date": 1449731372, "post_id": 34187475, "comment_id": 56137101, "body": "@Ninjammer thanks for all your help. I am sorry it was my fault. I was looking at the wrong place the entire time. I solved this by passing my toolbar object into the class i was calling setMainColorView() from. In that class i made a local variable of the toolbar object, assigned this. And then it worked."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 3145639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1514476265/picture?type=large", "display_name": "NimazSheik", "link": "https://stackoverflow.com/users/3145639/nimazsheik"}, "is_accepted": false, "score": 1, "last_activity_date": 1449731771, "creation_date": 1449731771, "answer_id": 34195818, "question_id": 34187475, "link": "https://stackoverflow.com/questions/34187475/c-qt-segmentation-fault-when-trying-to-access-method-of-an-object/34195818#34195818", "title": "C++ Qt Segmentation fault when trying to access method of an object", "body": "<p>I was looking at the wrong place the entire time. I solved this by passing my toolbar object into the class i was calling setMainColorView() from. In that class i made a local variable of the toolbar object, assigned this. And then it worked.</p>\n"}], "owner": {"reputation": 41, "user_id": 3145639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1514476265/picture?type=large", "display_name": "NimazSheik", "link": "https://stackoverflow.com/users/3145639/nimazsheik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 677, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449731771, "creation_date": 1449689575, "last_edit_date": 1449721297, "question_id": 34187475, "link": "https://stackoverflow.com/questions/34187475/c-qt-segmentation-fault-when-trying-to-access-method-of-an-object", "title": "C++ Qt Segmentation fault when trying to access method of an object", "body": "<p>I am learning Qt, and I have come up with a problem. I would like some help, here as I tried changing variables and debugging it, but haven't come up with a solution. I'll provide some code to understand the problem i have</p>\n\n<p>In my ColorButton.h class file</p>\n\n<pre><code>class ColorButton : public QToolButton\n{\n    Q_OBJECT\n public:\n   explicit ColorButton(const QColor &amp;color, QWidget *parent = 0);\n   void testMethod();\n};\n</code></pre>\n\n<p>My ColorButton.cpp file is like this</p>\n\n<pre><code>ColorButton::ColorButton(const QColor &amp;color, QWidget *parent)\n{\n    //some code\n}\n\nvoid ColorButton::testMethod()\n{\n   //This is\n   //a test method\n}\n</code></pre>\n\n<p>I am trying to access this testMethod() from another class.</p>\n\n<p>From this class, header file is Toolbar.h</p>\n\n<pre><code>class ToolBar : public QToolBar\n{\n    Q_OBJECT\npublic:\n    explicit ToolBar(const QMap&lt;ToolsEnum, QAction*&gt; &amp;actionMap, QWidget *parent = 0);\n\nprivate:\n    void setToolbar(); //initialize items\n    ColorButton *test; //-----\n\npublic slots:\n    void setMainColorView();\n}\n</code></pre>\n\n<p>The Toolbar.cpp file is like this</p>\n\n<pre><code>ToolBar::ToolBar(const QMap&lt;ToolsEnum, QAction *&gt; &amp;actionMap, QWidget *parent) :\nQToolBar(tr(\"Tools\"),parent), actionMapVar(actionMap)\n{\n    setToolbar();\n}\n\nvoid ToolBar::setToolbar()\n{\n  test = new ColorButton(QColor(\"#8C001A\"));\n}\n\nvoid ToolBar::setMainColorView()\n{\n test-&gt;testMethod();\n}\n}\n</code></pre>\n\n<p>The program works when i put test->testMethod(); into setToolbar() , but I want <strong>to create the object in setToolbar()</strong> and call the <strong>method in setMainColorView().</strong></p>\n\n<p>So far I have tried making the Color button variable public, \nI have also tried initializing the object called test in the constructor, but both don't work.</p>\n\n<p>Right now, with this code the error I get is\n\"The inferior stopped because it received a signal from the operating system.\nSignal name: SIGSEGV\nSignal meaning: Segmentation fault\" \nwith an arrow pointing at test->testMethod(). I have no clue how to solve it, any help would be appreciated</p>\n"}, {"tags": ["c++", "r", "class", "oop"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1449689788, "post_id": 34187451, "comment_id": 56121241, "body": "C does not have classes."}, {"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "edited": false, "score": 0, "creation_date": 1449690946, "post_id": 34187451, "comment_id": 56121880, "body": "Could you possibly demonstrate what you are trying to do with a (small) example in C?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1449720493, "post_id": 34187451, "comment_id": 56133141, "body": "this does not seem to be about C programming (maybe about C++ programming) suggest removing the &#39;c&#39; tag"}, {"owner": {"reputation": 71, "user_id": 5577783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11401ce6bd7cc6c63d9485211d164344?s=128&d=identicon&r=PG&f=1", "display_name": "tzuica", "link": "https://stackoverflow.com/users/5577783/tzuica"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1449764574, "post_id": 34187451, "comment_id": 56158145, "body": "@WeatherVane, You are right, sorry. I was used to just say C instead of C++"}], "answers": [{"tags": [], "owner": {"reputation": 1009, "user_id": 4941645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nxh5k.png?s=128&g=1", "display_name": "Cliff AB", "link": "https://stackoverflow.com/users/4941645/cliff-ab"}, "is_accepted": true, "score": 0, "last_activity_date": 1451279841, "creation_date": 1451279841, "answer_id": 34488019, "question_id": 34187451, "link": "https://stackoverflow.com/questions/34187451/reference-to-other-object-as-reference-class-field/34488019#34488019", "title": "Reference to other object as reference class field", "body": "<p>It appears you are using reference classes in R. If so, you can simply define </p>\n\n<pre><code>foo &lt;- setRefClass('foo', \n       fields = list(anotherObject = 'ANY'))\n</code></pre>\n\n<p>As I'm sure you can guess, this does <strong>not</strong> enforce that <code>anotherObject</code> is of class <code>foo</code>, but there's no reason you cannot set this value to be an object of class <code>foo</code>. In fact, doing so will speed up performance (otherwise, your object will check the class of anotherObject <em>every</em> time your object is altered). So your desired reference behavior (without class enforcement) could be implemented by </p>\n\n<pre><code>myObj1 &lt;- new('foo')\nmyObj2 &lt;- new('foo')\nmyObj1$anotherObject &lt;- myObj2\n</code></pre>\n\n<p>To illustrate the reference behavior, consider</p>\n\n<pre><code>myObj1$anotherObject$anotherObject &lt;- 1\nmyObj2$anotherObject\n[1] 2\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 5577783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11401ce6bd7cc6c63d9485211d164344?s=128&d=identicon&r=PG&f=1", "display_name": "tzuica", "link": "https://stackoverflow.com/users/5577783/tzuica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 34488019, "answer_count": 1, "score": 1, "last_activity_date": 1451279841, "creation_date": 1449689511, "last_edit_date": 1450526263, "question_id": 34187451, "link": "https://stackoverflow.com/questions/34187451/reference-to-other-object-as-reference-class-field", "title": "Reference to other object as reference class field", "body": "<p>I come from a C++ background and I'm trying to learn R. When I wanted an object to keep track of another already existing object using C++ classes, I would just add a pointer member. I know R does not support pointers by default, but I need to add that functionality to my reference classes.</p>\n\n<p>In C++ I would do something like</p>\n\n<pre><code>class foo\n{\npublic:\n    foo *pAnotherFoo;\n}\n</code></pre>\n\n<p>If I try to do something like\n<code>foo &lt;- setRefClass( \"foo\", fields = list(another = \"foo\") )</code>\nI obviously get <code>Error: evaluation nested too deeply: infinite recursion....</code>, as R tries to instantiate the object, that will instantiate another one and so on (I think?).</p>\n\n<p>I wonder if there is some way to tell R that I don't want that field to get instantiated and I will assign a value to it later.</p>\n"}, {"tags": ["c++", "arrays", "stl", "visual-studio-2015"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1449689571, "post_id": 34187248, "comment_id": 56121118, "body": "I answered what is the cause of the problem. On a side note, your second version (one with delegating constructor) is actually nicer."}, {"owner": {"reputation": 87, "user_id": 4112078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nd8WW.png?s=128&g=1", "display_name": "AlexeiBarnes", "link": "https://stackoverflow.com/users/4112078/alexeibarnes"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1449694336, "post_id": 34187248, "comment_id": 56123834, "body": "@SergeyA Yea I take your point. Nice to know where the misunderstanding came from however!"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1449690190, "post_id": 34187372, "comment_id": 56121461, "body": "Or they could rename the parameter so it is not the same as the class member and then use the parameter instead of the member."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1449691222, "post_id": 34187372, "comment_id": 56122061, "body": "@NathanOliver, this is obviously another option."}, {"owner": {"reputation": 87, "user_id": 4112078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nd8WW.png?s=128&g=1", "display_name": "AlexeiBarnes", "link": "https://stackoverflow.com/users/4112078/alexeibarnes"}, "edited": false, "score": 0, "creation_date": 1449693758, "post_id": 34187372, "comment_id": 56123521, "body": "Thanks! I should have figured it out from the step through, now that I think about it the step through went to initialise data first, then size, but never got to size due to throwing an exception. So I was still reading the uninitialised size."}, {"owner": {"reputation": 87, "user_id": 4112078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nd8WW.png?s=128&g=1", "display_name": "AlexeiBarnes", "link": "https://stackoverflow.com/users/4112078/alexeibarnes"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1449694052, "post_id": 34187372, "comment_id": 56123662, "body": "@NathanOliver Good thinking, as per SergeyA&#39;s suggestion, I&#39;m going with the delegating constructor due to it being a better way to design the constructor, but I&#39;ll keep that in mind."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 3, "last_activity_date": 1449693280, "last_edit_date": 1449693280, "creation_date": 1449689300, "answer_id": 34187372, "question_id": 34187248, "link": "https://stackoverflow.com/questions/34187248/using-stddistance-to-initialise-const-members-goes-awry-sometimes/34187372#34187372", "title": "Using std::distance to initialise const members goes awry sometimes", "body": "<p>Wow! It the first time in my life when I actually see a point in notorious gcc warning regarding order of initializion.</p>\n\n<p>In particular, class members are initialized in the order they are defined in your class, not in the order they are listed in constructor initialization list. Since your <code>Ty* data;</code> is defined before <code>size</code>, it is initialized (allocated) before size is set to the actual value - with the random value from uninitialized size.</p>\n\n<p>To fix the issue, make sure you define size before data in the class.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1449689475, "post_id": 34187410, "comment_id": 56121066, "body": "MSVC doesn&#39;t have this warning."}, {"owner": {"reputation": 6009, "user_id": 642681, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ac392dc9da2b8185ca0bdfb3c8b7501d?s=128&d=identicon&r=PG&f=1", "display_name": "unexpectedvalue", "link": "https://stackoverflow.com/users/642681/unexpectedvalue"}, "edited": false, "score": 0, "creation_date": 1449689736, "post_id": 34187410, "comment_id": 56121212, "body": "GCC and Intel C++ Compiler do, as should be."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1449690019, "post_id": 34187410, "comment_id": 56121378, "body": "My personal problem with this warning is that it is too generic. Just changing the order is most often harmless. Compiler it least should do a decent attempt to figure out if the order matters - it is fully equipped to do so."}, {"owner": {"reputation": 87, "user_id": 4112078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nd8WW.png?s=128&g=1", "display_name": "AlexeiBarnes", "link": "https://stackoverflow.com/users/4112078/alexeibarnes"}, "edited": false, "score": 0, "creation_date": 1449693675, "post_id": 34187410, "comment_id": 56123474, "body": "Interesting, odd that MSVC doesn&#39;t warn you about this, thanks!"}], "tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 1, "last_activity_date": 1449689481, "last_edit_date": 1449689481, "creation_date": 1449689409, "answer_id": 34187410, "question_id": 34187248, "link": "https://stackoverflow.com/questions/34187248/using-stddistance-to-initialise-const-members-goes-awry-sometimes/34187410#34187410", "title": "Using std::distance to initialise const members goes awry sometimes", "body": "<pre><code>struct Simple_Array\n{\n    Ty* data;            // (1)\n    const size_t size;   // (2)\n\n    Simple_Array(size_t size) :\n        size(size),         // (2)\n        data(new Ty[size])  // (1)\n    {\n    }\n</code></pre>\n\n<p>The member variables are initialized in the order they are declared in the struct, <strong>not</strong> in the order you write them in the constructor initializer list.</p>\n\n<p>The compiler ought to warn you about this.</p>\n"}], "owner": {"reputation": 87, "user_id": 4112078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nd8WW.png?s=128&g=1", "display_name": "AlexeiBarnes", "link": "https://stackoverflow.com/users/4112078/alexeibarnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 34187372, "answer_count": 2, "score": 1, "last_activity_date": 1449693280, "creation_date": 1449688900, "question_id": 34187248, "link": "https://stackoverflow.com/questions/34187248/using-stddistance-to-initialise-const-members-goes-awry-sometimes", "title": "Using std::distance to initialise const members goes awry sometimes", "body": "<p>I'm a bit confused by an error I just ran into. I'm using Visual Studio 2015 and I am running into inconsistent behaviour. I've cut out the code from the project it was in and recreated the behaviour, allow me to walk you through the code:</p>\n\n<pre><code>template &lt;typename Ty&gt;\nstruct Simple_Array\n{\n    Ty* data;\n    const size_t size;\n\n    Simple_Array(size_t size) :\n        size(size),\n        data(new Ty[size])\n    {\n    }\n\n    virtual ~Simple_Array() {\n        delete[] data;\n    }\n};\n</code></pre>\n\n<p>As you can see I'm using a simple wrapper for a c array in my code, I wanted to use a c array for the purpose of self teaching, hence not using something like std::vector or std::array. While using this I found need for a constructor that takes a first and last iterator over any other container, so I decided to use std::distance(first, last) to calculate the size.</p>\n\n<pre><code>    template &lt;class It&gt;\n    Simple_Array(It first, It last) :\n        size(std::distance(first, last)),\n        data(new Ty[size])\n    {\n        for (int i = 0; first != last; ++first, ++i)\n            data[i] = *first;\n    }\n</code></pre>\n\n<p>Now, when I use this constructor size is initialised to crazy large values such as 3435973836. Why? This is particularly confusing because the following code works just fine:</p>\n\n<pre><code>    template &lt;class It&gt;\n    Simple_Array(It first, It last) :\n        Simple_Array(std::distance(first, last))\n    {\n        for (int i = 0; first != last; ++first, ++i)\n            data[i] = *first;\n    }\n</code></pre>\n\n<p>To test this I wrote the following main function:</p>\n\n<pre><code>int main() {\n    auto list = { 1, 2, 3, 4 };\n\n    try {\n        Simple_Array&lt;int&gt;(list.begin(), list.end());\n    }\n    catch (...) {\n        std::cout &lt;&lt; \"Failed.\" &lt;&lt; std::endl;\n    }\n\n    std::cin.get();\n\n    return 0;\n}\n</code></pre>\n\n<p>I took a peek at the disassembly but I haven't figured out what the issue is. The good news is because I have a workaround I don't need an answer to this to keep working on my project, but I'd still really like to know what is going wrong here.</p>\n\n<p>I pastedbin'd the whole file here: <a href=\"http://pastebin.com/ebNrsLaB\" rel=\"nofollow\">pastebin.com/ebNrsLaB</a></p>\n"}, {"tags": ["c++", "qt", "user-interface", "qt5"], "comments": [{"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1449689484, "post_id": 34187080, "comment_id": 56121071, "body": "Did you try not using the <code>parent</code>, e.g. <code>QFileDialog::getOpenFileName(nullptr, tr(&quot;Open File&quot;), &quot;&#47;home&quot;);</code>?"}, {"owner": {"reputation": 813, "user_id": 229311, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8cf722b33b147611a23d0db61a7d129d?s=128&d=identicon&r=PG", "display_name": "t2k32316", "link": "https://stackoverflow.com/users/229311/t2k32316"}, "reply_to_user": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1449689553, "post_id": 34187080, "comment_id": 56121107, "body": "@Zeta, I had not tried that, but trying it now, it doesn&#39;t work. Still the same problem."}], "answers": [{"tags": [], "owner": {"reputation": 813, "user_id": 229311, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8cf722b33b147611a23d0db61a7d129d?s=128&d=identicon&r=PG", "display_name": "t2k32316", "link": "https://stackoverflow.com/users/229311/t2k32316"}, "is_accepted": true, "score": 0, "last_activity_date": 1449692643, "creation_date": 1449692643, "answer_id": 34188288, "question_id": 34187080, "link": "https://stackoverflow.com/questions/34187080/qmainwindow-open-file-dialog-cut-off-and-doesnt-respond/34188288#34188288", "title": "QMainWindow Open File dialog cut off and doesn&#39;t respond", "body": "<p>It seems that the way to solve this is to use an <a href=\"http://doc.qt.io/qt-5/qopenglwidget.html\" rel=\"nofollow\">QOpenGLWidget</a> (per <a href=\"https://blog.qt.io/blog/2014/09/10/qt-weekly-19-qopenglwidget/\" rel=\"nofollow\">https://blog.qt.io/blog/2014/09/10/qt-weekly-19-qopenglwidget/</a>). The QWindow approach to using OpenGL doesn't seem to mix well with other QWidgets. I successfully transferred my application to use a QOpenGLWidget now and it works!</p>\n"}], "owner": {"reputation": 813, "user_id": 229311, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8cf722b33b147611a23d0db61a7d129d?s=128&d=identicon&r=PG", "display_name": "t2k32316", "link": "https://stackoverflow.com/users/229311/t2k32316"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 34188288, "answer_count": 1, "score": 0, "last_activity_date": 1449692643, "creation_date": 1449688338, "question_id": 34187080, "link": "https://stackoverflow.com/questions/34187080/qmainwindow-open-file-dialog-cut-off-and-doesnt-respond", "title": "QMainWindow Open File dialog cut off and doesn&#39;t respond", "body": "<p>My open file dialog in Qt5 is being cut off and it doesn't respond to any mouse clicks. I'm using an OpenGLWindow (per <a href=\"http://doc.qt.io/qt-5/qtgui-openglwindow-example.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qtgui-openglwindow-example.html</a>) inside the central widget of the QMainWindow (per <a href=\"http://blog.qt.io/blog/2013/02/19/introducing-qwidgetcreatewindowcontainer/\" rel=\"nofollow noreferrer\">http://blog.qt.io/blog/2013/02/19/introducing-qwidgetcreatewindowcontainer/</a>). If I don't set the central widget to my OpenGLWindow, then the open file dialog works, but once I use the OpenGLWindow in the central widget, then this problem occurs. See the screenshot below. Any ideas on how to fix this or debug it?</p>\n\n<p>main.cpp:</p>\n\n<pre><code>    ...\n    QApplication app(argc, argv);\n    QSurfaceFormat format;\n    format.setSamples(16);\n    MainWindow mainWin;\n    MyOpenGLWindow window();\n    window.setFormat(format);\n    window.setAnimating(true);\n\n    QWidget *container = QWidget::createWindowContainer(&amp;window);\n    mainWin.setCentralWidget(container);\n\n#if defined(Q_OS_SYMBIAN)\n    mainWin.showMaximized();\n#else\n    mainWin.show();\n#endif\n....\n</code></pre>\n\n<p>mainwindow.cpp:</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n#include &lt;QFileDialog&gt;\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n\nvoid MainWindow::on_actionOpen_File_triggered()\n{\n    QString fileName = QFileDialog::getOpenFileName(this, tr(\"Open File\"), \"/home\");\n}\n</code></pre>\n\n<p>mainwindow.h:</p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n\nnamespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit MainWindow(QWidget *parent = 0);\n    ~MainWindow();\n\nprivate:\n    Ui::MainWindow *ui;\nprivate slots:\n    void on_actionOpen_File_triggered();\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>mainwindow.ui:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ui version=\"4.0\"&gt;\n &lt;class&gt;MainWindow&lt;/class&gt;\n &lt;widget class=\"QMainWindow\" name=\"MainWindow\"&gt;\n  &lt;property name=\"geometry\"&gt;\n   &lt;rect&gt;\n    &lt;x&gt;0&lt;/x&gt;\n    &lt;y&gt;0&lt;/y&gt;\n    &lt;width&gt;800&lt;/width&gt;\n    &lt;height&gt;600&lt;/height&gt;\n   &lt;/rect&gt;\n  &lt;/property&gt;\n  &lt;property name=\"windowTitle\"&gt;\n   &lt;string&gt;MainWindow&lt;/string&gt;\n  &lt;/property&gt;\n  &lt;widget class=\"QWidget\" name=\"centralwidget\"/&gt;\n  &lt;widget class=\"QMenuBar\" name=\"menubar\"&gt;\n   &lt;property name=\"geometry\"&gt;\n    &lt;rect&gt;\n     &lt;x&gt;0&lt;/x&gt;\n     &lt;y&gt;0&lt;/y&gt;\n     &lt;width&gt;800&lt;/width&gt;\n     &lt;height&gt;25&lt;/height&gt;\n    &lt;/rect&gt;\n   &lt;/property&gt;\n   &lt;widget class=\"QMenu\" name=\"menuTest_Window\"&gt;\n    &lt;property name=\"title\"&gt;\n     &lt;string&gt;File&lt;/string&gt;\n    &lt;/property&gt;\n    &lt;addaction name=\"actionOpen_File\"/&gt;\n   &lt;/widget&gt;\n   &lt;addaction name=\"menuTest_Window\"/&gt;\n  &lt;/widget&gt;\n  &lt;widget class=\"QStatusBar\" name=\"statusbar\"/&gt;\n  &lt;action name=\"actionOpen_File\"&gt;\n   &lt;property name=\"text\"&gt;\n    &lt;string&gt;Open File&lt;/string&gt;\n   &lt;/property&gt;\n  &lt;/action&gt;\n &lt;/widget&gt;\n &lt;resources/&gt;\n &lt;connections/&gt;\n&lt;/ui&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Fk018.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Fk018.png\" alt=\"Open File dialog cut off\"></a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1449687401, "post_id": 34186728, "comment_id": 56119936, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/cast_operator\" rel=\"nofollow noreferrer\">operator int() const</a>"}], "answers": [{"comments": [{"owner": {"reputation": 112, "user_id": 5224991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32f140c6fea77f01a340f1442440507d?s=128&d=identicon&r=PG&f=1", "display_name": "d4r3llo5", "link": "https://stackoverflow.com/users/5224991/d4r3llo5"}, "edited": false, "score": 1, "creation_date": 1449687829, "post_id": 34186823, "comment_id": 56120175, "body": "Thank you, I did not realize you could do that. I would also not advise doing this either, as it was a pain to read the python code that was essentially doing this (albeit with more complex calls happening in the background)."}], "tags": [], "owner": {"reputation": 36538, "user_id": 471164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/45d4a7ba0fb8e789356f5da87536444d?s=128&d=identicon&r=PG", "display_name": "vitaut", "link": "https://stackoverflow.com/users/471164/vitaut"}, "is_accepted": true, "score": 3, "last_activity_date": 1449687412, "creation_date": 1449687412, "answer_id": 34186823, "question_id": 34186728, "link": "https://stackoverflow.com/questions/34186728/overload-operator-with-non-class-types/34186823#34186823", "title": "overload operator= with non class types", "body": "<p>You can define a conversion operator to make <code>int i = my_id</code> work:</p>\n\n<pre><code>class IDCard {\n    int id;\npublic:\n    operator int() const { return id; }\n};\n</code></pre>\n\n<p>However I'd strongly advise against it and recommend using a normal accessor method instead:</p>\n\n<pre><code>class IDCard {\nprivate:\n    int id_;\npublic:\n    int id() const { return id_; }\n};\n</code></pre>\n"}], "owner": {"reputation": 112, "user_id": 5224991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32f140c6fea77f01a340f1442440507d?s=128&d=identicon&r=PG&f=1", "display_name": "d4r3llo5", "link": "https://stackoverflow.com/users/5224991/d4r3llo5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 34186823, "answer_count": 1, "score": 1, "last_activity_date": 1449687412, "creation_date": 1449687061, "question_id": 34186728, "link": "https://stackoverflow.com/questions/34186728/overload-operator-with-non-class-types", "title": "overload operator= with non class types", "body": "<p>Sorry for the probably daft question. I would like to overwrite the default mutator/accesor for a class variable (using the <code>=</code> operator instead of the usual <code>set/get</code> nomenclature though. I'd like some guidance in the possibility. The closest resource I found to my problem was <a href=\"http://en.cppreference.com/w/cpp/language/operators\" rel=\"nofollow\">this</a>, which gives me 50% of what I need. </p>\n\n<p>Let us assume I have this class (this code isn't my actual need, but a more trivial example of what I am asking).</p>\n\n<pre><code>class IDCard {\n    int id;\n    int operator=(const int&amp; n_id);    // This works for copying\n};\n\n/*\n * copy value of id out (no same value check)\n */\nint&amp; IDCard::operator=(const int&amp; n_id) {\n    id = n_id;\n    return id;\n}\n</code></pre>\n\n<p>Given <code>IDCard my_id</code>, I can do this: <code>my_id</code> = 10, but I would like to do this too: int i = <code>my_id</code>.</p>\n\n<p>For this, am I able to overload something in the IDCard class to return a primitive on the <code>=</code> operator or will that only work for setting the class object?</p>\n\n<p>I can't see many cases in which this could be useful as it will make code more ambiguous, but I was converting some python code which had overwritten their mutators and accessors so I wondered if C++ had a similar capability.</p>\n"}, {"tags": ["c++", "arrays", "c++11", "variadic-templates"], "comments": [{"owner": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "edited": false, "score": 0, "creation_date": 1449687779, "post_id": 34186717, "comment_id": 56120149, "body": "Iterate across the row first, and then iterate across columns."}, {"owner": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "edited": false, "score": 0, "creation_date": 1449687862, "post_id": 34186717, "comment_id": 56120190, "body": "I am absolutely horrible, but the way it&#39;s written right now is &quot;ambiguous.&quot; The structure is nested, but it doesn&#39;t have nested template iteration. So maybe try have the type specified for the top level struct and then make another one with the second level strict still with a variadic list. Then instantiate a specific case with the top level instantiated case."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1449687994, "post_id": 34186717, "comment_id": 56120258, "body": "Do you really need a 2d array? You just found the solution for a 1d array"}, {"owner": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "edited": false, "score": 0, "creation_date": 1449688213, "post_id": 34186717, "comment_id": 56120374, "body": "To clarify, if you don&#39;t nest the template level, the compiler will iterate through the rows and the columns simultaneously. But the way you want is, <b>for each row, for each column, calculate a value</b>. So for each row, specify an array of column values. Provide a fixed type instantiation for the row and leave an &quot;open&quot; variadic list for the columns."}, {"owner": {"reputation": 18087, "user_id": 261217, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6a20a7f940e6ba33cde991a80d5b6a43?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/261217/mikhail"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1449688223, "post_id": 34186717, "comment_id": 56120383, "body": "@Bob__ Yes, as you can see, I am ok with hard-coded values, so I have <i>some</i> solution to my task. 1D-array would be a worse solution than hard-coded 2D-array, so I am not interested in it."}, {"owner": {"reputation": 18087, "user_id": 261217, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6a20a7f940e6ba33cde991a80d5b6a43?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/261217/mikhail"}, "reply_to_user": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "edited": false, "score": 0, "creation_date": 1449688251, "post_id": 34186717, "comment_id": 56120404, "body": "@VermillionAzure I would be happy to see the code :)"}, {"owner": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "edited": false, "score": 0, "creation_date": 1449688289, "post_id": 34186717, "comment_id": 56120423, "body": "@Mikhail For some implementations, &quot;2D-arrays&quot; are equivalent to packed 1D-arrays in series. And I&#39;m on the bus on mobile :("}, {"owner": {"reputation": 18087, "user_id": 261217, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6a20a7f940e6ba33cde991a80d5b6a43?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/261217/mikhail"}, "reply_to_user": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "edited": false, "score": 0, "creation_date": 1449920855, "post_id": 34186717, "comment_id": 56221158, "body": "@VermillionAzure If you are not on the bus already, would you please share some code with your idea? :)"}, {"owner": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "edited": false, "score": 0, "creation_date": 1449953129, "post_id": 34186717, "comment_id": 56231365, "body": "@Mikhail Alright, let me try a dive..."}, {"owner": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "edited": false, "score": 0, "creation_date": 1450328922, "post_id": 34186717, "comment_id": 56395771, "body": "@Mikhail Yeah this is hard."}, {"owner": {"reputation": 18087, "user_id": 261217, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6a20a7f940e6ba33cde991a80d5b6a43?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/261217/mikhail"}, "reply_to_user": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "edited": false, "score": 0, "creation_date": 1450338269, "post_id": 34186717, "comment_id": 56399728, "body": "@VermillionAzure Thank you for your time :)"}, {"owner": {"reputation": 987, "user_id": 2627487, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/17454b0724fc732d0a1e9a708fc1f49b?s=128&d=identicon&r=PG", "display_name": "MrPisarik", "link": "https://stackoverflow.com/users/2627487/mrpisarik"}, "edited": false, "score": 0, "creation_date": 1453135511, "post_id": 34186717, "comment_id": 57458945, "body": "I am not very expirienced in metaprogramming, but I decided to try to do it in <i>compile-time</i>. It seems like we have to use a preprocessor macroses (because built-in array cannot be initialized in other way except explicitly defining in { }) in order to make all possible combinations of x and y and then expand them simultaneously. But I didn&#39;t find out how we can do it."}, {"owner": {"reputation": 987, "user_id": 2627487, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/17454b0724fc732d0a1e9a708fc1f49b?s=128&d=identicon&r=PG", "display_name": "MrPisarik", "link": "https://stackoverflow.com/users/2627487/mrpisarik"}, "edited": false, "score": 0, "creation_date": 1453136455, "post_id": 34186717, "comment_id": 57459539, "body": "If it hadn&#39;t been a question of curiosity then I&#39;d have kept this computed matrix in binary file rather than made up tricky code. Because it&#39;s can unnecessarily increase size of executable file. And I think this way more flexible, because you can just substitute files with different matrices."}, {"owner": {"reputation": 18087, "user_id": 261217, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6a20a7f940e6ba33cde991a80d5b6a43?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/261217/mikhail"}, "reply_to_user": {"reputation": 987, "user_id": 2627487, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/17454b0724fc732d0a1e9a708fc1f49b?s=128&d=identicon&r=PG", "display_name": "MrPisarik", "link": "https://stackoverflow.com/users/2627487/mrpisarik"}, "edited": false, "score": 1, "creation_date": 1453137962, "post_id": 34186717, "comment_id": 57460457, "body": "@MrPisarik Agree. But it is indeed a question of curiosity."}], "answers": [{"comments": [{"owner": {"reputation": 18087, "user_id": 261217, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6a20a7f940e6ba33cde991a80d5b6a43?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/261217/mikhail"}, "edited": false, "score": 0, "creation_date": 1496411111, "post_id": 44251326, "comment_id": 75664922, "body": "Thanks for the answer, but it only works in C++14, not in C++11, while I already have a solution for C++14."}], "tags": [], "owner": {"reputation": 111, "user_id": 8079773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fe6f6003d2ed22aa0ba3dde4b7d79b7?s=128&d=identicon&r=PG&f=1", "display_name": "Diego91b", "link": "https://stackoverflow.com/users/8079773/diego91b"}, "is_accepted": false, "score": 1, "last_activity_date": 1496099991, "creation_date": 1496099991, "answer_id": 44251326, "question_id": 34186717, "link": "https://stackoverflow.com/questions/34186717/initialize-plain-2d-array-with-a-given-function-on-compile-time/44251326#44251326", "title": "Initialize plain 2D array with a given function on compile time", "body": "<p>The only way I found it is to separate the parameter packs by commas and expand one of them, and then to expand the other from the outside:</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;utility&gt;\n\nusing namespace std;\n\ntemplate&lt;class T, T Y, T... Xs&gt;\nconstexpr array&lt;T, sizeof...(Xs)&gt; a1{10*Y+Xs...};\n\ntemplate&lt;class T, T... Xs, T... Ys&gt;\nconstexpr auto a2(integer_sequence&lt;T, Xs...&gt;, integer_sequence&lt;T, Ys...&gt;) {\n    return array&lt;array&lt;T, sizeof...(Xs)&gt;, sizeof...(Ys)&gt;{a1&lt;T, Ys, Xs...&gt;...};\n}\n\narray&lt;array&lt;int, 3&gt;, 3&gt; table(a2(\n    integer_sequence&lt;int, 1, 2, 3&gt;(),\n    integer_sequence&lt;int, 4, 5, 6&gt;()\n));\n</code></pre>\n\n<p>The asm result is this:</p>\n\n<pre><code>table:\n        .long   41\n        .long   42\n        .long   43\n        .long   51\n        .long   52\n        .long   53\n        .long   61\n        .long   62\n        .long   63\n</code></pre>\n\n<p><a href=\"https://gcc.godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,source:&#39;%23include+%3Carray%3E%0A%23include+%3Cutility%3E%0A%0Ausing+namespace+std%3B%0A%0Atemplate%3Cclass+T,+T+Y,+T...+Xs%3E%0Aconstexpr+array%3CT,+sizeof...(Xs)%3E+a1%7B10*Y%2BXs...%7D%3B%0A%0Atemplate%3Cclass+T,+T...+Xs,+T...+Ys%3E%0Aconstexpr+auto+a2(integer_sequence%3CT,+Xs...%3E,+integer_sequence%3CT,+Ys...%3E)+%7B%0A++++return+array%3Carray%3CT,+sizeof...(Xs)%3E,+sizeof...(Ys)%3E%7Ba1%3CT,+Ys,+Xs...%3E...%7D%3B%0A%7D%0A%0Aarray%3Carray%3Cint,+3%3E,+3%3E+table(a2(%0A++++integer_sequence%3Cint,+1,+2,+3%3E(),%0A++++integer_sequence%3Cint,+4,+5,+6%3E()%0A))%3B&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:50,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:g63,filters:(b:&#39;0&#39;,commentOnly:&#39;0&#39;,directives:&#39;0&#39;,intel:&#39;0&#39;),options:&#39;&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+gcc+6.3+(Editor+%231,+Compiler+%231)&#39;,t:&#39;0&#39;)),k:50,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">Code in Compiler Explorer</a></p>\n"}], "owner": {"reputation": 18087, "user_id": 261217, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6a20a7f940e6ba33cde991a80d5b6a43?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/261217/mikhail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1010, "favorite_count": 2, "answer_count": 1, "score": 6, "last_activity_date": 1496099991, "creation_date": 1449687027, "last_edit_date": 1495542366, "question_id": 34186717, "link": "https://stackoverflow.com/questions/34186717/initialize-plain-2d-array-with-a-given-function-on-compile-time", "title": "Initialize plain 2D array with a given function on compile time", "body": "<p>I want to create a 2D-array populated by some known function with <em>no runtime overhead</em>.</p>\n\n<p>To have an example, suppose a function <code>f(x, y) = 10 * y + x</code>, let <code>x</code> be in <code>{1, 2, 3}</code> and <code>y</code> in <code>{4, 5, 6}</code>. I want to create a 2D array with content</p>\n\n<pre><code>41 42 43\n51 52 53\n61 62 63\n</code></pre>\n\n<p>Now, the easiest way to go is just hard-code the values directly in my sources. And it is indeed appropriate for my task, so the question is just out of curiosity. </p>\n\n<p>I would like to create a metafunc and a struct possessed with some kind of black magic, which allows me to define an array out of given sets of values for <code>x</code> and <code>y</code>. Like this:</p>\n\n<pre><code>template&lt;int X&gt; struct Func {\n  template&lt;int Y&gt; struct over {\n    static const int value = 10 * Y + X;  // f(x, y)\n  };\n};\n\ntemplate&lt;int... args1&gt; struct Rows {\n  template&lt;int... args2&gt; struct Cols {\n    static const int data[sizeof...(args1)][sizeof...(args2)];\n  };\n};\n\ntemplate&lt;int... args1&gt;\ntemplate&lt;int... args2&gt;\nconst int Rows&lt;args1...&gt;::Cols&lt;args2...&gt;::data[sizeof...(args1)][sizeof...(args2)] = {\n  { Func&lt;args1&gt;::over&lt;args2&gt;::value... }  // This does not do what I want :(\n                                          // Need some black magic here\n};\n\n// Here is my precious table\nconst auto&amp; table = Rows&lt;1, 2, 3&gt;::Cols&lt;4, 5, 6&gt;::data;\n</code></pre>\n\n<p>If I print values from the table, I have this:</p>\n\n<pre><code>41 52 63\n 0  0  0\n 0  0  0\n</code></pre>\n\n<p>I understand what's happening, the term <code>Func&lt;args1&gt;::over&lt;args2&gt;::value</code> has two parameter packs in it, <code>args1</code> and <code>args2</code>, so applying <code>...</code> on it expand them simultaneously, and I only have 3 members instead of 9.</p>\n\n<p>If you've reached so far, you've already understood what I want. So the question is, how do I do it? How do I apply ellipsis separately to both parameter packs so I can have cartesian combination in the initializer? Or maybe there are some other ways to do it?</p>\n\n<p>I am aware of <a href=\"https://stackoverflow.com/a/20614036/261217\">this answer</a> and <a href=\"https://stackoverflow.com/a/20359971/261217\">that answer</a>. They use <code>std::array</code> instead of plain array, so they first construct 1D-arrays, and then initialize 2D-array with a number of 1D-array. But if I understood correctly, this initialization has to be done <em>in runtime</em>. I want to avoid that. However, I have no objections against <code>std::array</code>. I suppose that with a proper compiler they are just as fast as plain arrays.</p>\n\n<p>By the way, here is my <a href=\"https://stackoverflow.com/q/34199774/261217\">possible solution</a> using generalized <code>constexpr</code> from C++14 and a question about it. Any ideas on how to solve the task with <code>constexpr</code> from C++11 are also welcomed.</p>\n"}, {"tags": ["c++", "templates", "c++11", "metaprogramming", "template-specialization"], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1449705676, "post_id": 34186688, "comment_id": 56129075, "body": "Caveat: That breaks for overloaded or templated <code>operator()</code>&#39;s."}], "tags": [], "owner": {"reputation": 137021, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "is_accepted": true, "score": 2, "last_activity_date": 1449686939, "last_edit_date": 1495542654, "creation_date": 1449686939, "answer_id": 34186688, "question_id": 34186479, "link": "https://stackoverflow.com/questions/34186479/structure-specialization-when-the-class-has-an-operator/34186688#34186688", "title": "Structure specialization when the class has an operator()", "body": "<p>This would be an appropriate use of the <a href=\"http://en.cppreference.com/w/cpp/types/void_t\" rel=\"nofollow noreferrer\"><code>void_t</code></a> technique:</p>\n\n<pre><code>template &lt;class, class = std::void_t&lt;&gt;&gt;\nstruct mystruct: std::false_type {};\n\ntemplate &lt;class C&gt; \nstruct mystruct&lt;C, std::void_t&lt;decltype(&amp;C::operator())&gt;&gt;: std::true_type {};\n</code></pre>\n\n<p>Although <code>void_t</code> is only in the library since C++17, it is easy to add to your own utility library.</p>\n\n<p>For the bonus question, see <a href=\"https://stackoverflow.com/questions/32566579/detect-existence-of-private-member\">Detect existence of private member</a>.</p>\n"}], "owner": {"reputation": 49861, "user_id": 882932, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/KdHtK.png?s=128&g=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/882932/vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 1, "accepted_answer_id": 34186688, "answer_count": 1, "score": 1, "last_activity_date": 1449689237, "creation_date": 1449686174, "last_edit_date": 1449689237, "question_id": 34186479, "link": "https://stackoverflow.com/questions/34186479/structure-specialization-when-the-class-has-an-operator", "title": "Structure specialization when the class has an operator()", "body": "<p>I would like to specialize a structure when the passed type has an <code>operator()</code> (a functor or a lambda function). For the moment, I have this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;class...&gt;\nstruct mystruct: std::false_type {};\n\ntemplate &lt;class C&gt; \nstruct mystruct&lt;C, decltype(&amp;C::operator())&gt;: std::true_type {};\n\nint main() {\n    int n = 42;\n    auto lambda = [&amp;n](int i){return i + n;};\n\n    // Should return false: OK\n    std::cout&lt;&lt;mystruct&lt;decltype(x)&gt;::value&lt;&lt;std::endl;\n\n    // Should return true: problem\n    std::cout&lt;&lt;mystruct&lt;decltype(lambda)&gt;::value&lt;&lt;std::endl; \n\n    return 0;\n}\n</code></pre>\n\n<p>How to make it work?</p>\n\n<p>Bonus question: how to make it work even when the <code>operator()</code> is protected or private?</p>\n"}, {"tags": ["c++", "c++11", "asynchronous", "future"], "answers": [{"comments": [{"owner": {"reputation": 836, "user_id": 1145239, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/42da999e76e511ef976a7b3f1e2ce376?s=128&d=identicon&r=PG", "display_name": "JIghtuse", "link": "https://stackoverflow.com/users/1145239/jightuse"}, "edited": false, "score": 0, "creation_date": 1449736380, "post_id": 34186924, "comment_id": 56139545, "body": "Thanks, it really works! I understand almost all the magic behind future of future and promise of future. Here is a working version of code: <a href=\"https://gist.github.com/JIghtuse/25960e886d97ac885f67\" rel=\"nofollow noreferrer\">gist.github.com/JIghtuse/25960e886d97ac885f67</a>"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 836, "user_id": 1145239, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/42da999e76e511ef976a7b3f1e2ce376?s=128&d=identicon&r=PG", "display_name": "JIghtuse", "link": "https://stackoverflow.com/users/1145239/jightuse"}, "edited": false, "score": 0, "creation_date": 1449762209, "post_id": 34186924, "comment_id": 56156427, "body": "@JIghtuse Added a live example.  I&#39;m not sure if I can eliminate the future-future issue; maybe by explicitly storing a <code>std::function</code> in the <code>problem</code> to be set later, and then creating <code>std::shared_future</code> that invokes that function on a deferred basis?  Hmm, I think that will work, actually.  Things could get hairy if there are cycles, however."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 1, "last_activity_date": 1449762058, "last_edit_date": 1449762058, "creation_date": 1449687778, "answer_id": 34186924, "question_id": 34186409, "link": "https://stackoverflow.com/questions/34186409/dependency-solver-using-stdfuture-and-stdasync/34186924#34186924", "title": "Dependency solver using std::future and std::async", "body": "<p>Use promises.  And maybe future futures.</p>\n\n<pre><code>template&lt;class T&gt;\nstruct problem {\n  std::promise&lt;std::shared_future&lt;T&gt;&gt; p;\n  std::shared_future&lt;std::shared_future&lt;T&gt;&gt; f;\n  problem():f(p.get_future()){}\n  template&lt;class W, class...Args&gt;\n  void set(W&amp;&amp;work, Args&amp;&amp;...args){\n    p.set_value(std::async(std::launch::deferred, std::forward&lt;W&gt;(work), std::forward&lt;Args&gt;(args)...));\n  }\n  T get(){\n    return f.get().get();\n  }\n};\n\nint adder(problem&lt;int&gt;&amp; a, problem&lt;int&gt;&amp; b) {\n  return a.get() + b.get();\n}\nint main() {\n  std::map&lt;char, problem&lt;int&gt;&gt; scheme;\n\n  scheme['c'].set([] { return 1;} );\n  scheme['a'].set(adder, std::ref(scheme['b']), std::ref(scheme['c']));\n  scheme['b'].set([] { return 3;} );\n\n  std::cout &lt;&lt; scheme['a'].get() &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>There are probably easier ways.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/ce6ed65dab373f84\" rel=\"nofollow\">live example</a>.</p>\n"}], "owner": {"reputation": 836, "user_id": 1145239, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/42da999e76e511ef976a7b3f1e2ce376?s=128&d=identicon&r=PG", "display_name": "JIghtuse", "link": "https://stackoverflow.com/users/1145239/jightuse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 34186924, "answer_count": 1, "score": 0, "last_activity_date": 1449762058, "creation_date": 1449685870, "question_id": 34186409, "link": "https://stackoverflow.com/questions/34186409/dependency-solver-using-stdfuture-and-stdasync", "title": "Dependency solver using std::future and std::async", "body": "<p>I am trying to implement a simple dependency solver using <code>std::future</code> and <code>std::async</code>. Currenty I fail to understand is it even possible to do this. Question is, can we pass (not yet available) <code>future</code> to <code>async</code> call? If not, what actually can be done to have a chain of functions with some <strong>not yet ready</strong> input calling each other? Maybe, it is possible to override value passed to deferred async?</p>\n\n<p>Probably my description is incomprehensible, so here is an example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;future&gt;\n#include &lt;map&gt;\n\nusing namespace std;\n\nint adder(future&lt;int&gt; a, future&lt;int&gt; b) {\n    return a.get() + b.get();\n}\n\nint main() {\n    map&lt;char, future&lt;int&gt;&gt; scheme;\n\n    scheme['c'] = future&lt;int&gt;(async(launch::deferred, [] { return 1;}));\n    scheme['a'] = future&lt;int&gt;(async(launch::deferred, adder, move(scheme['b']), move(scheme['c'])));\n    scheme['b'] = future&lt;int&gt;(async(launch::deferred, [] { return 3;}));\n\n    cout &lt;&lt; scheme['a'].get() &lt;&lt; endl;\n}\n</code></pre>\n\n<p>We should have a scheme like this:</p>\n\n<pre><code>c\n  \\\n    a ----- result\n  /\nb\n</code></pre>\n\n<p>And a result of <code>4</code>.\nThis code fails: <code>move</code> just takes an empty <code>future</code> and pass it to <code>adder</code>. If we swap lines with <code>'a'</code> and <code>'b'</code> it will work fine, but this way we already should know dependencies.</p>\n"}, {"tags": ["c++", "stl", "istream"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1449686536, "post_id": 34186389, "comment_id": 56119391, "body": "<code>std::xstream</code> classes have the functionality of <code>QTextStream</code>, <i>not</i> <code>QDataStream</code>. There&#39;s nothing in C++ standard library that resembles <code>QDataStream</code>. Generally speaking, <code>std::istream</code> will be useless for your purpose. Reimplementing <code>QDataStream</code> is <a href=\"http://stackoverflow.com/a/31687943/1329652\">not hard at all</a>."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1449686678, "post_id": 34186389, "comment_id": 56119482, "body": "Once the invalid assumptions are corrected, this is possibly a duplicate of <a href=\"http://stackoverflow.com/q/31686553/1329652\">this question</a>."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1449686826, "post_id": 34186389, "comment_id": 56119576, "body": "@KubaOber: given that the request was to do something like that using standard streams, question you pointed to (and even more so the answer) are clearly <i>not</i> the answer..."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 1, "creation_date": 1449686885, "post_id": 34186389, "comment_id": 56119615, "body": "@DietmarK&#252;hl Standard streams are a drop-in replacement for most of <code>QTextStream</code>. There&#39;s no point to them if all you want is binary serialization, and <code>QDataStream</code> does binary serialization. The question is based on an invalid assumption. Just because <code>QDataStream</code> and <code>std::istream</code> contain &quot;stream&quot; in their name, doesn&#39;t make one the replacement of the other."}], "answers": [{"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1449686789, "post_id": 34186516, "comment_id": 56119550, "body": "<code>QDataStream</code> has nothing to do with text conversions, though... It&#39;s a binary stream used for binary serialization, not text serialization."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1449686924, "post_id": 34186516, "comment_id": 56119643, "body": "@KubaOber: the request is to read from an <code>std::istream</code> using <code>str &gt;&gt; d</code>. That is clearly reading text formatted data."}, {"owner": {"reputation": 1337, "user_id": 1213270, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fcbc1e6864d0d3f2a6de4934d51a289c?s=128&d=identicon&r=PG", "display_name": "Jeka", "link": "https://stackoverflow.com/users/1213270/jeka"}, "edited": false, "score": 0, "creation_date": 1449687401, "post_id": 34186516, "comment_id": 56119935, "body": "Kuba Ober is rigth I don&#39;t need to read and opearte on strings, I need binary deserialization."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 1337, "user_id": 1213270, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fcbc1e6864d0d3f2a6de4934d51a289c?s=128&d=identicon&r=PG", "display_name": "Jeka", "link": "https://stackoverflow.com/users/1213270/jeka"}, "edited": false, "score": 0, "creation_date": 1449687503, "post_id": 34186516, "comment_id": 56119986, "body": "@Jeka: <code>std::istream</code>&#39;s <code>operator&gt;&gt;()</code> are for converting text into values. You need a different tool in that case. The standard C++ library doesn&#39;t have any tools for converting from binary data to values."}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 2, "last_activity_date": 1449686738, "last_edit_date": 1449686738, "creation_date": 1449686337, "answer_id": 34186516, "question_id": 34186389, "link": "https://stackoverflow.com/questions/34186389/istream-for-char-buffer/34186516#34186516", "title": "istream for char buffer", "body": "<p>Assuming you have a fixed sized data buffer and its size it is trivial to implement by creating a suitable stream buffer:</p>\n\n<pre><code>struct membuf: std::streambuf {\n     membuf(char* begin, char* end) {\n         this-&gt;setg(begin, begin, end);\n     }\n};\n</code></pre>\n\n<p>This simple stream buffer just sets up the stream buffers \"get-area\" to be the range <code>[begin, end)</code> (<code>begin</code> is used twice as it is possible to set up a \"put-back area\" which in this case is empty). When there are no more characters to read the stream will try to call <code>underflow()</code> whose default implementation indicates failure. If you want to read more characters you'd overwrite <code>underflow()</code> to provide more characters in a newly set up buffer.</p>\n\n<p>With that you can create a stream using this memory backed stream buffer:</p>\n\n<pre><code>membuf       sbuf(begin, end);\nstd::istream in(&amp;sbuf);\ndouble d = 0;\nif (in &gt;&gt; d) { // always check conversions from string to a value...\n    // ...\n}\n</code></pre>\n\n<p>For a bit of extra convenience, the creation of the stream buffer and the stream can also be bundled into a class. There is a small trick in that the stream buffer should be created reasonably earlier but it is doable:</p>\n\n<pre><code>class imemstream: private virtual membuf, public std::istream {\npublic:\n    imemstream(char* begin, char* end)\n        : membuf(begin, end)\n        , std::ios(static_cast&lt;std::streambuf*&gt;(this))\n        , std::istream(static_cast&lt;std::streambuf*&gt;(this)) {\n    }\n};\n</code></pre>\n\n<p>Just a warning, though: creating a stream is more expensive than copying quite a bit of data. That is, if you want to use that stream in a loop you probably want to provide functionality to reset the buffer (probably combined with clearing state flags).</p>\n"}], "owner": {"reputation": 1337, "user_id": 1213270, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fcbc1e6864d0d3f2a6de4934d51a289c?s=128&d=identicon&r=PG", "display_name": "Jeka", "link": "https://stackoverflow.com/users/1213270/jeka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1879, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1449686738, "creation_date": 1449685810, "question_id": 34186389, "link": "https://stackoverflow.com/questions/34186389/istream-for-char-buffer", "title": "istream for char buffer", "body": "<p>In Qt library there QByteArray and QDataStream classes, which allow me to read and write variables to memmory buffer with very easy to use syntax:</p>\n\n<pre><code>QByteArray data = getData();\nQDataStream stream( data );\ndouble d = 0;\nint i = 0;\nstream &gt;&gt; d &gt;&gt; i;\n</code></pre>\n\n<p>How to implement simmilar behavior with only stl stream classes?\nFor example I have a const char* data and size of it, so I want to construct std::istream and read varibles from that data:</p>\n\n<pre><code>const char* data = getData();\nsize_t size = getSize();\n\nmembuffer buf( data, data + size );\nstd::istream str( buf );\ndouble d = 0;\nstr &gt;&gt; d;\n</code></pre>\n\n<p>Note that data should not be copied!</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 2, "creation_date": 1449685962, "post_id": 34186365, "comment_id": 56119062, "body": "How about <code>run_method(f, std::is_same&lt;decltype(F::f()), bool&gt;{});</code>, with a suitably overloaded <code>run_method</code>, of course. This is known as type tag dispatching."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1449688433, "post_id": 34186365, "comment_id": 56120493, "body": "Once you get the code to work, there&#39;ll be no branching on any modern compiler. <code>std::is_same&lt;&gt;::value</code> is a compile-time constant. Since you worry about branching - an issue that&#39;s present in assembly output - you can&#39;t ask how to avoid it without first looking at said assembly output."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1449689133, "post_id": 34186365, "comment_id": 56120854, "body": "You may consider a namespace instead of a struct and tag dispatching"}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1449698754, "post_id": 34186365, "comment_id": 56126127, "body": "@DieterL&#252;cking How does namespace help here? Could you please try to make an answer based on your suggestion?"}], "answers": [{"comments": [{"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1449686689, "post_id": 34186469, "comment_id": 56119489, "body": "This means that I need to factor out all the other stuff from the <code>run</code> function to avoid duplication of code, which is awkward, will necessitate more argument passing and may preclude compiler optimizations if things are not inlined back in... Is there a way to get away without having two different <code>run</code> functions?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1449686893, "post_id": 34186469, "comment_id": 56119621, "body": "Do not repeat yourself, that&#39;s for sure. The compiler will be able to optimize the additionnal function call, especially if you use perfect forwarding for your arguments."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1449687236, "post_id": 34186469, "comment_id": 56119844, "body": "Edited the answer, it should better suit your code now"}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1449687345, "post_id": 34186469, "comment_id": 56119898, "body": "This does not perform the enhancement: the last part of the <code>run</code> function is executed even when <code>F::f()</code> returns <code>true</code>."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1449688060, "post_id": 34186469, "comment_id": 56120293, "body": "@AlwaysLearning: If you&#39;re worried about an extra function call, then you might need to put the functionality for your pre and post-processing into a macro, and then use that macro in your specializations."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1449688216, "post_id": 34186469, "comment_id": 56120376, "body": "I changed where the <code>...</code> so it removes the need of always excuting the last part. I also added a comment that you can also remove the if altogether if you always return when the return type is bool"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1449688683, "post_id": 34186469, "comment_id": 56120618, "body": "@AlwaysLearning: What you are asking for is precisely the subject of the <a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2015/p0128r0.html\" rel=\"nofollow noreferrer\">C++17 proposal for <code>constexpr_if</code></a>. So it&#39;s not possible to do it exactly as you want in C++14. For now, you have to use the SFINAE method."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1449692631, "post_id": 34186469, "comment_id": 56122871, "body": "@GuillaumeRacicot Oh, I see. Wouldn&#39;t it be simpler to do tag dispatch on <code>&lt;std::is_same&lt;decltype(F::f()), bool&gt;::value</code>? (i.e. <code>doRun</code> would be a non-template function with a tag parameter)"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1449693057, "post_id": 34186469, "comment_id": 56123128, "body": "Depend on what you want to do. tag dispatching is indeed convenient but require that both function are compatible with the bool AND the void return type, because the compiler will compile both expression on template initialization. That&#39;s why I usually go for sfinae"}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1449693934, "post_id": 34186469, "comment_id": 56123602, "body": "@GuillaumeRacicot Not sure I understand. I meant a solution as in my answer: <a href=\"http://stackoverflow.com/a/34188605/2725810\">stackoverflow.com/a/34188605/2725810</a>"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1449694425, "post_id": 34186469, "comment_id": 56123882, "body": "@AlwaysLearning The compiler will have to compile both method for each template initializations. Sometimes, that&#39;s not something you want. Both answers are equally good with the informations and goals you given in this question."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1449696735, "post_id": 34186469, "comment_id": 56125093, "body": "@GuillaumeRacicot The compiler compiles only the methods of the template class that get called -- the other methods don&#39;t ever get instantiated, do they?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1449696946, "post_id": 34186469, "comment_id": 56125195, "body": "I think you&#39;re right on this one indeed. Sorry if I momentarily misleading you."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 2, "last_activity_date": 1449688086, "last_edit_date": 1449688086, "creation_date": 1449686127, "answer_id": 34186469, "question_id": 34186365, "link": "https://stackoverflow.com/questions/34186365/avoiding-branching-based-on-the-return-value-of-the-function-that-is-a-template/34186469#34186469", "title": "Avoiding branching based on the return value of the function that is a template argument", "body": "<p>You should use SFINAE instead of branching at runtime.</p>\n\n<p>You function run should look like this:</p>\n\n<pre><code>template &lt;typename F&gt;\nstruct Algorithm {\n\n    void run() {\n        ... // some computation here\n\n        doRun();\n    }\n\n    template&lt;std::enable_if_t&lt;std::is_same&lt;decltype(F::f()), bool&gt;::value, int&gt; = 0&gt;\n    void doRun() {\n        if (F::f()) {\n            // do some more computations if needed or simply remove the if and return\n        }\n    }\n\n    template&lt;std::enable_if_t&lt;!std::is_same&lt;decltype(F::f()), bool&gt;::value, int&gt; = 0&gt;\n    void doRun() {\n        F::f();\n\n        ... // more computation, unless F::f() got rid of it\n    }\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1449688440, "post_id": 34187026, "comment_id": 56120495, "body": "With tag dispatching it might be easier to call a helper function to simplify the template constraining. For example: <a href=\"http://coliru.stacked-crooked.com/a/03a86e336355c50e\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/03a86e336355c50e</a>  However this approach always branches, which is the problem the OP is trying to solve. Good point about the optimizer, though."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1449692763, "post_id": 34187026, "comment_id": 56122961, "body": "This is what I wanted to do originally. See my earlier post: <a href=\"http://stackoverflow.com/q/34185286/2725810\">stackoverflow.com/q/34185286/2725810</a>"}], "tags": [], "owner": {"reputation": 1208, "user_id": 859211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab48bb85e0b9154ea91a4f7e66a8706?s=128&d=identicon&r=PG", "display_name": "m3tikn0b", "link": "https://stackoverflow.com/users/859211/m3tikn0b"}, "is_accepted": false, "score": 0, "last_activity_date": 1449688144, "last_edit_date": 1495541039, "creation_date": 1449688144, "answer_id": 34187026, "question_id": 34186365, "link": "https://stackoverflow.com/questions/34186365/avoiding-branching-based-on-the-return-value-of-the-function-that-is-a-template/34187026#34187026", "title": "Avoiding branching based on the return value of the function that is a template argument", "body": "<p>A variation of Guillaume Racicot's <a href=\"https://stackoverflow.com/a/34186469/859211\" title=\"answer\">answer</a>: </p>\n\n<pre><code>template &lt;typename F&gt;\nstruct Algorithm {\n\n    void run() {\n        ... // some computation here\n\n        if(doRun())\n            return;\n\n        ... // more computation, unless F::f() got rid of it\n    }\n\n    template&lt;std::enable_if_t&lt;std::is_same&lt;decltype(F::f()), bool&gt;::value, int&gt; = 0&gt;\n    bool doRun() {\n        return F::f();\n    }\n\n    template&lt;std::enable_if_t&lt;!std::is_same&lt;decltype(F::f()), bool&gt;::value, int&gt; = 0&gt;\n    bool doRun() {\n        F::f();\n        return false;\n    }\n};\n</code></pre>\n\n<p>The type of <code>F</code> is known at compile time. So in case of <code>VoidF</code> the compiler knows that <code>doRun</code> will always return <code>false</code> and thus should remove all branching code during optimization.</p>\n\n<p><strong>Update</strong>: So you're not guaranteed that there will be no branch. But it should be a pretty easy case for the optimizer.</p>\n"}, {"comments": [{"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 1, "creation_date": 1449982255, "post_id": 34188605, "comment_id": 56237887, "body": "you could flip it and use <code>is_void</code> to shorten it a bit."}], "tags": [], "owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "is_accepted": false, "score": 3, "last_activity_date": 1449693853, "creation_date": 1449693853, "answer_id": 34188605, "question_id": 34186365, "link": "https://stackoverflow.com/questions/34186365/avoiding-branching-based-on-the-return-value-of-the-function-that-is-a-template/34188605#34188605", "title": "Avoiding branching based on the return value of the function that is a template argument", "body": "<p>Here is my own attempt to do it without SFINAE:</p>\n\n<pre><code>template &lt;typename F&gt;\nstruct Algorithm {\n    void run() {\n        ... // some computation here\n\n        myRun(std::integral_constant&lt;\n              bool, std::is_same&lt;decltype(F::f()), bool&gt;::value&gt;());\n    }\n\nprivate:\n    void myRun(std::true_type) {\n        if (F::f()) return;\n        moreComputation();\n    }\n\n    void myRun(std::false_type) {\n        F::f();\n        moreComputation();\n    }\n\n    void moreComputation() { ... }\n};\n</code></pre>\n"}], "owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 34186469, "answer_count": 3, "score": 6, "last_activity_date": 1449982059, "creation_date": 1449685722, "last_edit_date": 1449982059, "question_id": 34186365, "link": "https://stackoverflow.com/questions/34186365/avoiding-branching-based-on-the-return-value-of-the-function-that-is-a-template", "title": "Avoiding branching based on the return value of the function that is a template argument", "body": "<p>Suppose the following policy classes that take care of one aspect of an algorithm:</p>\n\n<pre><code>struct VoidF {\n    static void f() {\n        ... // some code that has side effects\n    }\n};\n\nstruct BoolF {\n    static bool f() {\n        bool res = ...; // some computation\n        return res;\n    }\n};\n</code></pre>\n\n<p>The <code>BoolF</code> policy is \"enhancement-aware\": when BoolF::f() returns <code>true</code>, the algorithm can exit. <code>VoidF</code> is \"enhancement-unaware\", hence it returns <code>void</code> (I don't want to force the user of my library to return <code>bool</code> when it does not mean anything to him).</p>\n\n<p>The algorithm is currently written like this:</p>\n\n<pre><code>template &lt;typename F&gt;\nstruct Algorithm {\n    void run() {\n        ... // some computation here\n\n        if (std::is_same&lt;decltype(F::f()), bool&gt;::value) {\n            if (F::f()) return;\n        } else\n            F::f(); // If F is VoidF, there should be no branching and some\n                    // compiler optimizations will be enabled\n\n        ... // more computation, unless F::f() got rid of it\n    }\n};\n</code></pre>\n\n<p>Of course, this does not work if <code>Algorithm</code> is instantiated with <code>VoidF</code>. Is there a way to fix this in a way that there should be no branching in <code>Algorithm&lt;VoidF&gt;::run()</code> as indicated by the comment? </p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1449685771, "post_id": 34186324, "comment_id": 56118932, "body": "Does your version even work? The compiler doesn&#39;t define that version on its own, so deleting it shouldn&#39;t have any effect."}, {"owner": {"reputation": 10759, "user_id": 343443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2dcf7b64ff07a02fbd78c27f50ce9631?s=128&d=identicon&r=PG", "display_name": "Abyx", "link": "https://stackoverflow.com/users/343443/abyx"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1449685826, "post_id": 34186324, "comment_id": 56118974, "body": "@MarkRansom you can delete whatever you want. It&#39;s not <code>=default</code>"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 2, "creation_date": 1449685876, "post_id": 34186324, "comment_id": 56119000, "body": "Why do you need to delete both the copy and move assignment operators in the first example? <code>X&amp; operator=(const X&amp;) = delete;</code> alone should be enough, no? A move assignment operator will not be implicitly declared due to the presence of your user declared copy assignment operator."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1449686194, "post_id": 34186324, "comment_id": 56119198, "body": "@MarkRansom Seems to work in a simple example: <a href=\"http://ideone.com/DAuDFH\" rel=\"nofollow noreferrer\">ideone.com/DAuDFH</a>."}, {"owner": {"reputation": 10759, "user_id": 343443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2dcf7b64ff07a02fbd78c27f50ce9631?s=128&d=identicon&r=PG", "display_name": "Abyx", "link": "https://stackoverflow.com/users/343443/abyx"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1449686363, "post_id": 34186324, "comment_id": 56119297, "body": "@Praetorian, I don&#39;t really need it. I just I want to explicitly say that <code>X</code> is not assignable in any way."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1449686673, "post_id": 34186324, "comment_id": 56119475, "body": "@Ben so the same statement both declares and deletes the function? Fascinating. P.S. using <code>struct</code> instead of <code>class</code> for a quick example will prevent the errors regarding private members."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1449687086, "post_id": 34186324, "comment_id": 56119748, "body": "If you want to be explicit about it, use the first version. Otherwise the second version <code>void operator=(X) = delete;</code> should also achieve the same effect, as far as I can tell."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 4, "creation_date": 1449687203, "post_id": 34186324, "comment_id": 56119814, "body": "As a guideline, never delete the special move members.  If you do so, the best you can hope for is that you&#39;ve created redundant noise.  At worst, it won&#39;t do what you were hoping for.  <code>X&amp; operator=(const X&amp;) = delete;</code> is sufficient, and succinct."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1449688209, "post_id": 34186324, "comment_id": 56120371, "body": "@HowardHinnant: <code>X&amp; operator=(X) = delete;</code> seems to be even more succinct and should also be sufficient."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 2, "creation_date": 1449689165, "post_id": 34186324, "comment_id": 56120874, "body": "@DietmarK&#252;hl:  Yes, identical in functionality.  Not more succinct though (both one liners).  And questionable on readability because the <code>X&amp; operator=(const X&amp;) = delete;</code> is more common/familiar and so your reader has to stop and figure out why the unusual signature.  Ultimately this boils down to a style issue, and I&#39;m recommending <code>X&amp; operator=(const X&amp;) = delete;</code>."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 2, "creation_date": 1449689390, "post_id": 34186324, "comment_id": 56121015, "body": "Tape this above your monitor until you have it memorized: <a href=\"http://stackoverflow.com/a/24512883/576911\">stackoverflow.com/a/24512883/576911</a> :-)"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 1, "creation_date": 1449689518, "post_id": 34186324, "comment_id": 56121094, "body": "And unit test all 6 special member whether you have them or not like this:  <a href=\"https://github.com/HowardHinnant/date/blob/master/test/date_test/day.pass.cpp#L62-L67\" rel=\"nofollow noreferrer\">github.com/HowardHinnant/date/blob/master/test/date_test/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 562, "user_id": 1922722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39fbebb5bebce94df3a38e3e44649f57?s=128&d=identicon&r=PG", "display_name": "nwn", "link": "https://stackoverflow.com/users/1922722/nwn"}, "is_accepted": true, "score": 6, "last_activity_date": 1450113096, "last_edit_date": 1450113096, "creation_date": 1449780183, "answer_id": 34211359, "question_id": 34186324, "link": "https://stackoverflow.com/questions/34186324/how-to-forbid-assignment/34211359#34211359", "title": "How to forbid assignment", "body": "<p><strong>No, there is no technical reason to use the canonical copy assignment operator signature.</strong></p>\n\n<p>As seen in the standard, [dcl.fct.def.delete] \u00a78.4.3:</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>A program that refers to a deleted function implicitly or explicitly, other than to declare it, is ill-formed.\n  [ Note: This includes calling the function implicitly or explicitly and forming a pointer or pointer-to-member\n  to the function. It applies even for references in expressions that are not potentially-evaluated. <strong>If a function\n  is overloaded, it is referenced only if the function is selected by overload resolution.</strong> \u2014 end note ]</li>\n  </ol>\n</blockquote>\n\n<p>Therefore a deleted function's name, in this case <code>operator=</code>, may only be used if the compiler finds a preferable overload resolution. However, such an overload cannot exist, as <code>X</code> and <code>const X&amp;</code> are indistinguishable as parameters ([over.ics.rank] \u00a713.3.3.2) and the return value is ignored.</p>\n\n<p><strong>That being said</strong>, there <em>is</em> a stylistic reason to use the canonical signature. The mere fact that this question exists shows that anyone reading your code may <em>not</em> know the meaning and assume it is doing something special. For readability's sake, I would recommend you use the familiar <code>X&amp; operator=(const X&amp;) = delete;</code>.</p>\n"}], "owner": {"reputation": 10759, "user_id": 343443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2dcf7b64ff07a02fbd78c27f50ce9631?s=128&d=identicon&r=PG", "display_name": "Abyx", "link": "https://stackoverflow.com/users/343443/abyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 34211359, "answer_count": 1, "score": 11, "last_activity_date": 1450113096, "creation_date": 1449685599, "last_edit_date": 1449686799, "question_id": 34186324, "link": "https://stackoverflow.com/questions/34186324/how-to-forbid-assignment", "title": "How to forbid assignment", "body": "<p>Is there a reason to use the \u201ccanonical\u201d signatures for <code>operator=</code></p>\n\n<pre><code>class X {\n  X&amp; operator=(const X&amp;) = delete;\n  X&amp; operator=(X&amp;&amp;) = delete;\n};\n</code></pre>\n\n<p>instead of just</p>\n\n<pre><code>class X {\n  void operator=(X) = delete;\n};\n</code></pre>\n\n<p>when all you want to do is <code>delete</code> it?</p>\n\n<p><strong>Upd:</strong><br>\nAlso, consider a situation when <code>X</code> has an explicitly declared move or copy constructor.</p>\n\n<pre><code>class X {\npublic:\n  X(X&amp;&amp;);\n};\n</code></pre>\n\n<p>In that case <code>op=(X&amp;&amp;)</code> and <code>op=(const X&amp;)</code> are implicitly deleted, but I want to explicitly express that assignment is not allowed.</p>\n"}, {"tags": ["c++", "memory-leaks", "valgrind", "dynamic-memory-allocation", "delete-operator"], "comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 6, "creation_date": 1449685071, "post_id": 34186064, "comment_id": 56118496, "body": "This is the compiler screaming in pain, trying to tell you to use <code>std::string</code>."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1449685095, "post_id": 34186064, "comment_id": 56118515, "body": "Haha. Probably. Unfortunately its a school assignment and I don&#39;t get to be shwifty like that heh."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1449685170, "post_id": 34186064, "comment_id": 56118563, "body": "If you can&#39;t use <code>std::string</code>, write a (minimal) imitation of it, and use that. Simple test: if you have <code>new [xxx]</code> or <code>delete [] foo;</code> if your code, you&#39;re doing something wrong."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1449685275, "post_id": 34186064, "comment_id": 56118630, "body": "It&#39;s school: They make you do things ancient-style to make sure you understand the concept. If you don&#39;t know /how/ to use it without string, that&#39;s not a good thing."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1449685388, "post_id": 34186064, "comment_id": 56118697, "body": "The problem is that this is teaching you the <i>wrong</i> concepts--ones you&#39;ll need to un-learn before you can write code decently at all."}, {"owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1449685403, "post_id": 34186064, "comment_id": 56118705, "body": "wherea are you freeing memory for Item::_name"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1449685473, "post_id": 34186064, "comment_id": 56118745, "body": "@IIIIIIIIIIIIIIIIIIIIIIII I believe it is the first line of the method <code>Item::name</code>"}, {"owner": {"reputation": 1596, "user_id": 5483583, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/58e00258c68a02aeb27dd3bb73728821?s=128&d=identicon&r=PG&f=1", "display_name": "Fabian Schmitthenner", "link": "https://stackoverflow.com/users/5483583/fabian-schmitthenner"}, "edited": false, "score": 2, "creation_date": 1449685540, "post_id": 34186064, "comment_id": 56118789, "body": "where is _name defined? Also, the <code>delete [] _name</code> looks scary, especially when you use it afterwards (possible double frees etc.). The `_name == &#39;\\0&#39; looks verry wrong also (should this be == nullptr? or _name[0] == &#39;\\0&#39;? Which would clearly be undefined behaviour after delete...)"}, {"owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1449685546, "post_id": 34186064, "comment_id": 56118792, "body": "@AlgirdasPreid\u017eius, no, that is a delete for a _name that maybe has not even been allocated. the fact is after this new, that has to be a function to free the memory, it could be the destructor for Item"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449685646, "post_id": 34186064, "comment_id": 56118853, "body": "@bigcodeszzer If these institutions insist on teaching you &quot;the concepts&quot;, then why not have you write a string class and be done with it?.  This one-off manipulation of <code>new char []</code> honestly doesn&#39;t teach anything except how to write bad code.  Writing a real string class, yes, may not be necessary in the real world, but at the very least, teaches you something beneficial."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1449685648, "post_id": 34186064, "comment_id": 56118856, "body": "@AlgirdasPreid\u017eius I&#39;ll print the destructor... just a sec. But I&#39;ve been looking at it and I think it is the x+1, the math doesn&#39;t add up right, I think there is an extra index."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449685705, "post_id": 34186064, "comment_id": 56118894, "body": "@PaulMcKenzie Well, society won&#39;t give me the /chance/ to write good code without a degree. So don&#39;t look at me."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1449685783, "post_id": 34186064, "comment_id": 56118945, "body": "Ok, what I see here is that after you freed <code>_name</code>, it isn&#39;t reset to <code>nullptr</code>, and holds its old value. So when you are checking for <code>_name == &#39;\\0&#39;</code>, it wouldn&#39;t be true, and you would not allocate the new buffer for your string (if it was set to something different, before calling <code>Item::name</code>, that is). Not sure how is that related to losing memory, though."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449685786, "post_id": 34186064, "comment_id": 56118948, "body": "@bigcodeszzer That doesn&#39;t stop you from writing a string class.  If you did that, and used it in your Item class, you wouldn&#39;t have the issues you have now.  Be a little ambitious -- it takes a half hour, maybe an hour, if you know what a copy constructor, assignment operator and destructor are."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1449685796, "post_id": 34186064, "comment_id": 56118957, "body": "@AlgirdasPreid\u017eius The destructor is actually virtual. That could be my problem, it should be in the derived class."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449685835, "post_id": 34186064, "comment_id": 56118975, "body": "@PaulMcKenzie I have to use their format. It&#39;s part of the assignment specs."}, {"owner": {"reputation": 30577, "user_id": 476496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85197b0087c5bee323d2690c977878f8?s=128&d=identicon&r=PG", "display_name": "Vincent Savard", "link": "https://stackoverflow.com/users/476496/vincent-savard"}, "edited": false, "score": 0, "creation_date": 1449685951, "post_id": 34186064, "comment_id": 56119052, "body": "@bigcodeszzer: Your professor doesn&#39;t understand modern C++ at all if that&#39;s the sort of code he considers right. Looks like he&#39;s trying to write C."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1449685981, "post_id": 34186064, "comment_id": 56119078, "body": "@bigcodeszzer I bet there is no restriction on you creating your own class, using the same rules given to you.  You wouldn&#39;t be using the <code>std::string</code> class, and you&#39;re still using <code>new []</code> and <code>delete []</code> only in a different part of the code.  Again, if you were taught what a copy constructor is, what an assignment operator, and what a destructor does, you can still play by the rules and write the code correctly."}, {"owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1449686032, "post_id": 34186064, "comment_id": 56119115, "body": "@bigcodeszzer I can&#39;t imagine any mature and seasoned programmer &quot;hating&quot; a langugage for a fanboy reason. Bjarne stroustrup who is the creator of C++ mentiones in his book &quot;The C++ programming language&quot; that is was comfortable with 25 languages before he embarked on his journey that would become C++"}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1449686333, "post_id": 34186064, "comment_id": 56119278, "body": "@AlgirdasPreid\u017eius edit: the destructor is now at the bottom"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1449686911, "post_id": 34186064, "comment_id": 56119635, "body": "&quot;Well, society won&#39;t give me the /chance/ to write good code without a degree.&quot; Doable, but I admit it&#39;s freaking hard to get in the door without a ticket. Wrote embedded systems for five years before getting a degree. Good investment, though. Wage tripled for the same work. I recommend a software engineering degree over computer science if you want to write good code."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1449687058, "post_id": 34186064, "comment_id": 56119728, "body": "@bigcodeszzer If you are copying or assigning <code>Item</code> objects, then your code will not work correctly without a user-defined copy constructor and assignment operator.  You need to show us in what context you&#39;re using the Item objects..  And it doesn&#39;t matter what the teacher says, your code <i>cannot</i> work correctly if you&#39;re doing any of these operations (assignment, copy construction).  So if you were not taught these operations, then complain.  I can easily cause a leak with your class doing basically very little (again, if you don&#39;t have the required operations coded)."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1449687145, "post_id": 34186064, "comment_id": 56119779, "body": "Yep. Recommend a read: <a href=\"http://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">What is the Rule of Three?</a>"}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1449687435, "post_id": 34186064, "comment_id": 56119953, "body": "Not using copy or assignment in the main, but I&#39;m pretty sure I have them. One sec."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449687646, "post_id": 34186064, "comment_id": 56120061, "body": "@PaulMcKenzie Added. I assure you, neither are being called from main. The issue here is valgrind telling me I have indirect mem loss. It&#39;s probably pointer related."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449687661, "post_id": 34186064, "comment_id": 56120078, "body": "@bigcodeszzer The compiler can also copy / assign.  For example, returning or passing <code>Item</code> objects by value."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1449687682, "post_id": 34186064, "comment_id": 56120097, "body": "The kicker is it&#39;s really easy to do a copy or assignment without meaning to. Call a function and don&#39;t use a pointer or reference, that&#39;s a copy (and almost always fatal because the copy&#39;s destructor will be called when the function exits) . Stuff the object in an array, that&#39;s an assignment. Put it into a vector, that&#39;s usually a copy or an assignment, depending on how you did it."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1449687775, "post_id": 34186064, "comment_id": 56120146, "body": "Item is just the polymorphic pointer in my case, I&#39;m using derived classes Perishable and NonPerishable which have virtual destructors. And... no copy constructors or assignment operators I don&#39;t think."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449687932, "post_id": 34186064, "comment_id": 56120222, "body": "Your assignment operator is incorrect.  Simple question -- what happened to the old string in <code>this</code> in the assignment operator?  From what I see, it was never <code>delete</code>d.  Also, your class is not exception safe -- if those calls to <code>new</code> fail in your assignment operator or in <code>name</code>,  your object is messed up."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1449687939, "post_id": 34186064, "comment_id": 56120226, "body": "Your copy constructor won&#39;t work. It will copy the pointer to <code>_name</code>, not the data at <code>_name</code>, leaving you with two objects pointing to one memory allocation. When one is destroyed both <code>_name</code>&#39;s data will go with it.. What it will do is allow you to place a breakpoint or a  print statement so you can see if it ever is called."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1449688164, "post_id": 34186064, "comment_id": 56120348, "body": "@user4581301 Doing that now."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1449688176, "post_id": 34186064, "comment_id": 56120356, "body": "Are you creating <code>Items</code> with <code>new</code>?"}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1449688254, "post_id": 34186064, "comment_id": 56120406, "body": "Its not being called."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1449688263, "post_id": 34186064, "comment_id": 56120409, "body": "Checking the whole program for that though still."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1449688301, "post_id": 34186064, "comment_id": 56120431, "body": "Also, I will point out: This program does not crash. It is fully functional. I put it through valgrind to see what&#39;s up there.... now I&#39;m getting small memory losses. A lot of the problems you are suggesting would crash at runtime."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449688408, "post_id": 34186064, "comment_id": 56120478, "body": "@bigcodeszzer -- <i>This program does not crash.</i>  In C++, -- There is no guarantee how a program will run with the types of bugs we&#39;re pointing out to you.  Your code invokes undefined behavior.  Saying that &quot;it would crash at runtime&quot; is incorrect."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1449688627, "post_id": 34186064, "comment_id": 56120586, "body": "In <code>Item::init</code>: <code>obj._name = new char[length+1]</code> occurs without checking to ensure <code>_name</code> is not occupied. May be your leak. Instead of an init function, use a constructor. <a href=\"https://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization\" rel=\"nofollow noreferrer\">Practice RAII</a> and save the init functions for rare occasions. RAII can save a lot of debugging time."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1449689023, "post_id": 34186064, "comment_id": 56120799, "body": "Non-crashing example: Say you overrun an array and write over a variable outside the array that you aren&#39;t using. It&#39;s good memory, so no crash and you dodged a bullet... until days later you enter a case where the overwritten variable matters. So a bug that manifested long in the past results in odd behaviour. Those are really really fun to trace."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1449689818, "post_id": 34186064, "comment_id": 56121267, "body": "I got one of those with valgrind also. Said invalid write of size 4. I&#39;ve managed to decrease that to 1 so far."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1449690670, "post_id": 34186064, "comment_id": 56121722, "body": "@bigcodeszzer -- The other issue with your assignment operator is that it assigns a <code>quantity</code> of 0 when it should be assigning whatever the <code>quantity</code> is of the object that is being assigned from.  I also don&#39;t get why your <code>init</code> function is this complex.  Just <code>strcpy</code> whatever is passed to you.  Take it or leave it, here is a better implementation of all of the functions you&#39;re having trouble with: <a href=\"http://ideone.com/mvGEGx\" rel=\"nofollow noreferrer\">ideone.com/mvGEGx</a>"}], "answers": [{"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1449685778, "creation_date": 1449685778, "answer_id": 34186382, "question_id": 34186064, "link": "https://stackoverflow.com/questions/34186064/c-memory-leak-valgrind/34186382#34186382", "title": "C++ memory leak (valgrind)", "body": "<p>If you really must use <code>new</code> and bare pointers (hint: almost nobody does), then you need to ensure that the owner of <code>_name</code> releases it when it's no longer needed.</p>\n\n<p>The right place for that is <em>probably</em> the <code>~Item()</code> destructor, but it's hard to be sure without the rest of your code.</p>\n"}, {"comments": [{"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1449690342, "post_id": 34187546, "comment_id": 56121542, "body": "Checking for what specifically?"}, {"owner": {"reputation": 78, "user_id": 4650372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5G069.png?s=128&g=1", "display_name": "AlexB", "link": "https://stackoverflow.com/users/4650372/alexb"}, "reply_to_user": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1449690744, "post_id": 34187546, "comment_id": 56121768, "body": "I edited the answer. If it&#39;s not null and you new it up, you&#39;re not deallocating that old block before allocating new space in the free store. I found <a href=\"http://stackoverflow.com/questions/9979776/does-calling-new-twice-on-the-same-pointer-without-calling-delete-in-betwe\">this</a> that I think is relevant."}], "tags": [], "owner": {"reputation": 78, "user_id": 4650372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5G069.png?s=128&g=1", "display_name": "AlexB", "link": "https://stackoverflow.com/users/4650372/alexb"}, "is_accepted": true, "score": 0, "last_activity_date": 1449690497, "last_edit_date": 1449690497, "creation_date": 1449689864, "answer_id": 34187546, "question_id": 34186064, "link": "https://stackoverflow.com/questions/34186064/c-memory-leak-valgrind/34187546#34187546", "title": "C++ memory leak (valgrind)", "body": "<p>I only see:</p>\n\n<pre><code>Item::~Item() {\n    std::cout &lt;&lt; \"called destructor\";\n    delete[] _name;\n    // Don't reassign\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>void Item::init(Item &amp;obj, char const sku[], char const name[], double priced, bool taxed) {\n    // ...\n    if (obj._name == nullptr /* 0 */) {\n        obj._name = new char[length+1]; \n        // What if it's not null?\n    } else {\n        // Do you want to delete and new up a char?\n    }\n}\n</code></pre>\n\n<p>Also, using a non-const reference is scary, to me. I see the new-ing up of obj._name in init to be the biggest problem, without any pre-emptive checks.</p>\n"}], "owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 34187546, "answer_count": 2, "score": 0, "last_activity_date": 1449690497, "creation_date": 1449684852, "last_edit_date": 1449687596, "question_id": 34186064, "link": "https://stackoverflow.com/questions/34186064/c-memory-leak-valgrind", "title": "C++ memory leak (valgrind)", "body": "<p>Valgrind claims I'm indirectly losing memory; what vexes me, is I have no idea why that would be the case.</p>\n\n<p>Not sure if this is a false positive or if I just don't understand some pointer assignment or something.</p>\n\n<p>Am I losing memory here? If so, why?</p>\n\n<p>Valgrind report:</p>\n\n<pre><code>==24392== 21 bytes in 2 blocks are indirectly lost in loss record 1 of 3\n==24392==    at 0x4028699: operator new[](unsigned int) (in        /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)\n==24392==    by 0x804B41D: Perishable::load(std::basic_fstream&lt;char,        std::char_traits&lt;char&gt; &gt;&amp;) (Perishable.cpp:42)\n==24392==    by 0x804C504: sict::PosApp::loadRecs() (PosApp.cpp:139)\n==24392==    by 0x804D58E: sict::PosApp::run() (PosApp.cpp:393)\n==24392==    by 0x8049337: main (milestone4.cpp:8)\n</code></pre>\n\n<p>Here is the line 42:</p>\n\n<pre><code>std::fstream&amp; Perishable::load(std::fstream&amp; stream) {\n    char    mysku[MAX_SKU_LEN + 1];\n    char    mynam[100];\n    bool    mytax;\n    double  myprice;\n    int     myqty;\n    int     date[5]; \n\n    stream.getline(mysku, 100, ',');\n    sku(mysku);\n    stream.getline(mynam, 100, ',');\n\n    name(mynam);//bytes indirectly lost\n</code></pre>\n\n<p>Here is name() [fully commented]</p>\n\n<pre><code>void Item::name(char *name){\n    delete[] _name; //..............Just in case it points to something.\n                    //..............Note: How could I possibly be losing memory with this line here??\n    int x = strlen(name); //........Grab the length of the new input\n\n    if (_name == '\\0') {//..........If it was empty, ie. its the first assignment\n        _name = new char[x + 1];//..Allocate the space, +1 for null char\n    }\n\n    for (int i = 0; i &lt; x; i++) {//.Copy\n        _name[i] = name[i];\n    }\n\n    _name[x]   = '\\0';//............Yeah, its manual termination. I should maybe use strcpy\n}\n</code></pre>\n\n<p>Edit>>> here is the destructor</p>\n\n<pre><code>Item::~Item() {\n    std::cout &lt;&lt; \"called destructor\";\n    delete[] _name;\n    _name = '\\0';\n}\n</code></pre>\n\n<p>Edit>> copy constructor and assignment operator</p>\n\n<pre><code>//Copy Constructor\nItem::Item(const Item&amp; copyfrom){\n    (*this) = copyfrom;\n\n}\n\n//Member operators\nItem&amp; Item::operator=(const Item &amp;myitem) {\n    if (!myitem.isEmpty()){\n        init((*this), myitem._sku, myitem._name, myitem._price, myitem._taxed);\n        this-&gt;_quantity = myitem._quantity;\n\n    }\n    return (*this);\n}\n\nvoid Item::init(Item &amp;obj, char const sku[], char const name[], double priced, bool taxed) {\n\n    int length = strlen(name);\n    int skulength = strlen(sku);\n\n    obj._price = priced;\n    obj._taxed = taxed;\n    obj._quantity = 0;\n    obj._name = new char[length+1]; //+1 for the null which wasn't counted. Huge pain debugging that.\n\n\n    for (int i = 0; i &lt; length; i++) {\n\n        obj._name[i] = name[i];\n\n        if (i &lt; skulength) {//redundanc\n\n\n            obj._sku[i] = sku[i];\n        }\n    }\n\n    obj._name[length]   = '\\0';\n    obj._sku[skulength] = '\\0';\n\n}\n</code></pre>\n"}, {"tags": ["c++", "vector"], "answers": [{"tags": [], "owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "is_accepted": false, "score": 2, "last_activity_date": 1449684597, "creation_date": 1449684597, "answer_id": 34185969, "question_id": 34185934, "link": "https://stackoverflow.com/questions/34185934/operations-within-one-vector-c/34185969#34185969", "title": "Operations within one Vector C++", "body": "<pre><code>     for(i=0; i&lt;listSize; i++)\n      {\n          for(j=0; j&lt;listSize; j++)\n          {\n\n              if(i != j)\n              {\n                 remainder = numList[i] % numList[j];\n\n                  if( numList[i] % numList[j] == 0)\n                  {\n                      cout&lt;&lt; numList[i] &lt;&lt; \" \" &lt;&lt; numList[j]&lt;&lt;endl;\n                  }\n              }\n          }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6218, "user_id": 821497, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/956003d5607ba6be2dd3f37427980e2c?s=128&d=identicon&r=PG", "display_name": "ciamej", "link": "https://stackoverflow.com/users/821497/ciamej"}, "is_accepted": false, "score": 0, "last_activity_date": 1449684892, "creation_date": 1449684892, "answer_id": 34186074, "question_id": 34185934, "link": "https://stackoverflow.com/questions/34185934/operations-within-one-vector-c/34186074#34186074", "title": "Operations within one Vector C++", "body": "<p>If the numbers in <code>numList</code> are not unique, you need to check if two elements of the list with a different index have the same value. Otherwise, you'd get a division by zero.</p>\n\n<pre><code>for(i=0; i&lt;listSize; i++)\n{\n    for(j=0; j&lt;listSize; j++)\n    {\n        if(numList[i] != numList[j])\n        {\n            remainder = numList[i] % numList[j];\n            if(remainder == 0)\n            {\n                cout&lt;&lt; numList[i] &lt;&lt; \" \" &lt;&lt; numList[j]&lt;&lt;endl;\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5653133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bedab84164c75ff719e9c86c88201e1?s=128&d=identicon&r=PG&f=1", "display_name": "LouieV1994", "link": "https://stackoverflow.com/users/5653133/louiev1994"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1449692791, "creation_date": 1449684487, "last_edit_date": 1449692791, "question_id": 34185934, "link": "https://stackoverflow.com/questions/34185934/operations-within-one-vector-c", "title": "Operations within one Vector C++", "body": "<p>Ok, so I have this bit of code: </p>\n\n<pre><code> for(i=0; i&lt;listSize; i++)\n {\n      for(j=0; j&lt;listSize; j++)\n      {\n\n              if(i != j)\n              {\n                 remainder = numList[i] % numList[j];\n              }\n              if( numList[i] % numList[j] == 0)\n              {\n                  cout&lt;&lt; numList[i] &lt;&lt; \" \" &lt;&lt; numList[j]&lt;&lt;endl;\n              }\n      }\n}\n</code></pre>\n\n<p>How can I perform a modulus comparison without comparing an element against itself? The 1st if statement is not achieving this.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1449685324, "post_id": 34185931, "comment_id": 56118659, "body": "You should avoid being a <a href=\"http://c2.com/cgi/wiki?ThreeStarProgrammer\" rel=\"nofollow noreferrer\">three star programmer</a>"}, {"owner": {"reputation": 2579, "user_id": 4167500, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cmstn.png?s=128&g=1", "display_name": "JKostikiadis", "link": "https://stackoverflow.com/users/4167500/jkostikiadis"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1449686593, "post_id": 34185931, "comment_id": 56119428, "body": "Thanks for the advice"}], "answers": [{"comments": [{"owner": {"reputation": 2579, "user_id": 4167500, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cmstn.png?s=128&g=1", "display_name": "JKostikiadis", "link": "https://stackoverflow.com/users/4167500/jkostikiadis"}, "edited": false, "score": 0, "creation_date": 1449686572, "post_id": 34186483, "comment_id": 56119414, "body": "I was looking more in file reading and not at array initialization .. -_- thanks for the help and for the advices.."}], "tags": [], "owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "is_accepted": true, "score": 4, "last_activity_date": 1449686189, "creation_date": 1449686189, "answer_id": 34186483, "question_id": 34185931, "link": "https://stackoverflow.com/questions/34185931/c-corrupted-double-linked-list/34186483#34186483", "title": "C++ corrupted double-linked list", "body": "<p>You are going out of bounds:</p>\n\n<pre><code>stages = new string**[num_of_stages];\n    for(int i = 0 ; i &lt; N ; i ++) {\n        stages[i] = new string*[N];\n</code></pre>\n\n<p>If <code>num_of_stages &lt; N</code> you are accessing past the array.</p>\n\n<p>You should use a <code>std::vector</code> instead of dealing with raw pointers and using <code>new/delete</code> yourself. It has an <code>at</code> function that does bounds checking.</p>\n"}], "owner": {"reputation": 2579, "user_id": 4167500, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cmstn.png?s=128&g=1", "display_name": "JKostikiadis", "link": "https://stackoverflow.com/users/4167500/jkostikiadis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2679, "favorite_count": 0, "accepted_answer_id": 34186483, "answer_count": 1, "score": 0, "last_activity_date": 1449686189, "creation_date": 1449684471, "question_id": 34185931, "link": "https://stackoverflow.com/questions/34185931/c-corrupted-double-linked-list", "title": "C++ corrupted double-linked list", "body": "<p>I am new in c++ coming from Java and I am facing a problem with c++ I/O. I have made a small program to illustrate me problem. The main idea is to have 3-dimensional array and initialize it's values by reading a text file with specific text format. The file contains the number of Levels (L) which is the first dimension and the size of rows and columns (N) which is the second and the third dimensions ( array[L][N][N] ).</p>\n\n<p>Edit : to execute my program i use <code>g++ -std=c++0x program.cpp</code></p>\n\n<p>Here is the program : </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint num_of_stages;\nint N ;\nstring ***stages;\n\nvoid readFile(string file_name){\n    string line;\n    int pos;\n\n    ifstream file (file_name);\n\n    if (file.is_open()){\n\n        getline (file,line);                    // L=XXX\n        pos = line.find(\"=\");\n        line = line.substr(pos+1);\n        num_of_stages = atoi(line.c_str());\n        cout &lt;&lt; \"L=\" &lt;&lt; num_of_stages &lt;&lt; endl;\n\n        getline (file,line);                    // N=XXX\n        pos = line.find(\"=\");\n        line = line.substr(pos+1);\n        N = atoi(line.c_str());\n        cout &lt;&lt; \"N=\" &lt;&lt; N &lt;&lt; endl;      \n\n        // setting the stages array with dimensions stages[L][N][N]\n        stages = new string**[num_of_stages];\n        for(int i = 0 ; i &lt; N ; i ++){\n            stages[i] = new string*[N];\n            for(int j = 0 ; j &lt; N ; j++){\n                stages[i][j] = new string[N];\n            }\n        }\n\n        for(int i = 0 ; i &lt; num_of_stages ; i++){\n            getline (file,line);                // Level comment\n            cout &lt;&lt; \"Level \" &lt;&lt; line &lt;&lt; endl; \n            for(int j = 0 ; j &lt; N ; j++){\n                for(int k = 0 ; k &lt; N ; k++){\n                    string currentValue ;\n                    file &gt;&gt; currentValue;\n                    stages[i][j][k] = currentValue;\n                    cout &lt;&lt; currentValue &lt;&lt; \" \" ;\n                }\n                cout &lt;&lt; endl;\n            }\n            cout &lt;&lt; endl &lt;&lt; endl;\n            // I am guessing that this getLine() \n            // is necessary to read the end of the line\n            // if I try remove it everything goes wrong\n            // everytime I print the line's values is ' ' (empty)\n            getline (file,line);\n            // remove any string value to detect end of file        \n            // so the if statement below will be true\n            line.clear();\n        }\n        getline (file,line);                    // END OF MAZE comment\n        cout &lt;&lt; line &lt;&lt; endl;\n        if(line != \"END OF MAZE\"){\n            cout &lt;&lt; \"Wrong file format\" &lt;&lt; endl;\n            file.close();\n            exit(0);\n        }\n        file.close();\n    }else{\n        cout &lt;&lt; \"Missing file with name : \" &lt;&lt; file_name &lt;&lt; endl;\n        exit(0);\n    }\n    // program never reach that point\n    cout &lt;&lt; \"Bla bla bla\" &lt;&lt; endl;\n}\n\nint main(){\n    readFile(\"file1.maz\");\n    return 0;\n}\n</code></pre>\n\n<p>My File has this text format :</p>\n\n<pre><code>L=5\nN=16\nLEVEL 1\nT2 T3 T1 T2 E E T1 E E T2 T2 T1 T2 T1 T2 T1 \nT1 T1 T2 T1 T2 T3 T2 T3 T2 T2 T3 T3 T1 E T3 T1 \nT2 E T1 T1 T3 T2 T1 T3 E T3 T3 E T1 E T1 T1 \nT1 T3 T2 E T1 T1 T2 E T2 T2 T2 T1 T3 T3 T1 T3 \nE E T1 T3 T1 T3 T1 T2 T2 T1 T1 E T2 T1 T1 T3 \nT2 T1 T1 T3 T3 E T2 T3 T3 T2 T1 E T3 T2 T1 T2 \nT2 T1 T3 T2 T2 E T2 E E E T3 T3 T2 T3 T3 T1 \nE E E T2 E E T3 E T1 T2 T1 T2 T1 T3 T3 E \nT3 T2 T1 T3 E T1 E T2 T3 T1 T2 T2 T3 T2 E T1 \nT2 T3 E E T2 T2 E T3 E E T3 T1 T3 T1 E T3 \nT1 T1 E T1 T1 T3 T3 T1 E T2 T3 T1 T3 T3 T3 E \nT3 T1 T1 T1 T2 T2 T3 T1 T3 T2 E T2 T1 E T1 E \nT3 E T2 E T1 T1 T3 T2 T3 T2 T3 E T3 T3 T2 T2 \nT1 T1 E T3 T1 E T2 T1 T3 T1 T1 T2 T2 T2 T1 T2 \nT3 E T3 T3 T3 T2 T1 T1 E E E T2 T1 T2 E T3 \nT1 E T3 T2 E E T3 E E E T3 T1 E T2 T2 E \nLEVEL 2\nT2 T2 T3 T2 T1 T1 T3 T3 T1 E T1 T2 T3 T2 E T1 \nT1 T3 T2 E T2 E T2 T2 T3 T1 T3 T1 E T3 T3 T3 \nT3 T3 T3 E T3 T3 E T3 T1 T1 T1 T2 T2 T3 T2 T1 \nT2 T3 T1 T2 T1 E E T2 T1 T1 T3 T2 E T1 T2 T3 \nT2 T2 T3 E T3 T3 T1 T1 E T3 T3 T2 T3 E T1 E \nT2 T3 T3 T2 E E E T2 T1 T3 E T2 T1 T3 E T1 \nT3 T3 E T1 E T3 T1 T1 T3 T3 E T3 E T3 T1 T2 \nT2 E T1 E T1 T3 T1 T3 E T3 T1 E T1 T3 T1 E \nT3 E E T1 T3 T2 T2 E T3 T2 T2 T1 E T1 T2 T2 \nT3 T3 E E T2 T1 T3 T1 E T3 E E E E T1 E \nT3 E E T2 E E T2 T1 T2 T1 T1 T2 T3 T2 T3 T1 \nT3 E T2 T3 T1 T3 T3 T2 E T1 T2 T2 T2 T2 T1 E \nT2 T3 T1 T3 T2 T3 T2 T3 T1 T1 T3 T3 T2 T2 E T3 \nT3 T3 T2 T3 T1 T3 T1 T1 T2 E E T3 E T1 T2 T2 \nT1 T2 T2 T2 T1 T1 T1 E T1 T2 T2 E T1 T3 T1 T3 \nE T2 E E T3 T3 E T1 T1 T2 E T1 T3 E T3 T3 \nLEVEL 3\nT3 E T1 T3 T3 T3 T2 T3 T1 E T1 T1 T1 T2 E T1 \nT1 E E T2 T1 T3 T1 E T1 T3 T3 T3 T3 T2 T1 T1 \nT2 T3 T1 T2 T3 E T3 T1 T3 E T1 T3 T1 T2 E T3 \nT1 T2 T1 E T2 T1 T1 T3 T2 T2 T2 T2 T3 T3 E T1 \nT3 T2 T3 E T3 T1 T1 T2 E T2 E T3 T1 T1 E T1 \nT3 E T2 T3 T2 E E T2 T1 E T1 E T2 E T3 T3 \nE T2 T1 T3 E T1 E E T3 T1 T1 T3 T2 T1 E E \nT1 T3 T2 T3 T1 T2 T1 E T2 T3 T3 T1 T3 T2 T3 T2 \nE T2 T1 T1 E T1 T2 T3 E T2 T1 T3 E T3 E T2 \nT3 E T1 T3 T2 E T1 T1 E T2 T3 T3 T3 T2 E E \nT2 E E T2 T3 T3 T1 T2 T1 T2 T1 T3 T2 T2 T2 T2 \nT1 E T2 T3 T2 E T2 T2 T1 T2 T1 E T2 E T2 T3 \nT2 E T1 E E T1 T3 T1 E T1 E T1 T1 E T2 T2 \nT2 T3 T3 T1 E T1 T1 E T1 T3 T3 T3 E T2 T2 E \nT2 T1 T1 T1 T2 E T1 T3 T3 T3 T2 E T3 E T2 E \nE T2 T1 T2 E T1 T3 T1 T3 T1 T3 T2 T1 T1 E T3 \nLEVEL 4\nE E E T1 T2 T1 T1 E T1 T3 T2 E E T1 T3 T2 \nT2 T2 E T3 T3 E E T1 T3 E E T1 T2 T3 T2 E \nT2 T3 T3 T3 T3 E T2 T2 T1 T1 T1 T2 T3 E T2 T1 \nT2 T1 E T2 T3 T3 T3 E T1 T3 T2 T2 T2 T1 E T3 \nT3 T2 T3 E T2 E T2 E T2 T1 T1 T3 E T2 E T2 \nE T1 T1 T1 E E E T2 T1 T1 T3 T1 T2 E T3 T3 \nE T3 E T1 E T2 T2 T1 T2 E T3 T3 T3 T1 T3 T3 \nE T2 T1 T1 T2 T2 T3 E E T1 T3 T3 T3 T1 T2 E \nT3 T3 T2 E T3 T2 E T1 T2 E E T2 T2 T1 E E \nT3 E E T2 T3 T2 T1 T2 T3 T1 E T1 T3 T2 T1 T2 \nE T2 T1 T2 T3 T2 E T3 T3 T1 E T3 T3 T3 T3 T1 \nE T2 T1 T1 T1 T3 E T2 E T3 T1 T1 T2 T2 E E \nT3 T3 T3 T2 E T1 T1 T3 T3 T3 E T3 T3 T3 T1 T1 \nT2 T1 T1 T2 E E E T3 T1 T3 T3 T1 E E T1 T2 \nT1 T2 T2 E T2 T1 T3 T3 T1 T1 T2 T3 T3 T1 T2 T1 \nT1 T2 T1 E T1 T3 T2 T1 T1 T2 E E T1 E T3 T1 \nLEVEL 5\nT1 T1 T3 T1 T2 T3 E T2 T2 T1 T3 T2 T2 E T1 T1 \nT3 E T3 E T2 T1 T1 T3 T2 T3 T1 T1 T3 T2 T3 T1 \nT2 T3 T1 T2 T2 E T1 T3 E T2 T2 T2 T3 T3 T2 T2 \nT1 E T1 T1 T2 T1 T3 E T3 E T1 T1 T3 T3 T1 T3 \nT1 T1 T3 T2 T2 E E E E T2 E T1 T1 T2 E T2 \nE T2 E E T3 E T1 E E T1 T3 T2 E E T2 E \nT2 T3 T3 E T3 T2 T2 T3 T1 E E E T3 T2 T3 T2 \nT1 T1 T1 T1 E T2 E E T1 T3 T2 T1 T3 E E E \nT1 T1 E T1 T3 E E E T1 T1 T1 T3 T1 T2 T3 T3 \nT2 T2 T3 T3 E T2 T1 T3 T2 T1 T3 T1 T1 T2 T3 E \nT3 T1 T3 T3 T3 E T1 T1 E T3 T2 E T2 T2 E T1 \nT1 T3 E T1 T2 T2 T2 T2 T3 T3 E E T3 T1 T1 T2 \nT1 E E T3 T2 T2 T1 T2 T2 T2 T2 T1 T3 T3 T3 E \nT3 E E T2 T1 T3 T1 T2 E E T3 E T3 T2 T1 E \nT1 T3 T1 T3 T2 E E T2 T2 T2 E T1 T2 E T1 T1 \nT2 T3 T1 T3 T1 T1 T2 T2 E T1 T2 T1 T2 E E T1 \nEND OF MAZE\n</code></pre>\n\n<p>When I execute my program with the above file example I am getting this error : </p>\n\n<pre><code>Error in `./a.out': corrupted double-linked list: 0x0000000001174280 ***\n</code></pre>\n\n<p>Here is the gdb backtrace:</p>\n\n<pre><code>(gdb) backtrace\n#0  0x00007ffff7531cc9 in __GI_raise (sig=sig@entry=6)\n    at ../nptl/sysdeps/unix/sysv/linux/raise.c:56\n#1  0x00007ffff75350d8 in __GI_abort () at abort.c:89\n#2  0x00007ffff756e394 in __libc_message (do_abort=do_abort@entry=1, \n    fmt=fmt@entry=0x7ffff767cb28 \"*** Error in `%s': %s: 0x%s ***\\n\")\n    at ../sysdeps/posix/libc_fatal.c:175\n#3  0x00007ffff75790f7 in malloc_printerr (action=&lt;optimized out&gt;, \n    str=0x7ffff7678bfc \"corrupted double-linked list\", ptr=&lt;optimized out&gt;)\n    at malloc.c:4996\n#4  0x00007ffff757a7a7 in _int_free (av=0x7ffff78b9760 &lt;main_arena&gt;, p=&lt;optimized out&gt;, \n    have_lock=0) at malloc.c:3996\n#5  0x00007ffff7b898be in std::basic_filebuf&lt;char, std::char_traits&lt;char&gt; &gt;::_M_destroy_internal_buffer() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#6  0x00007ffff7b89d47 in std::basic_filebuf&lt;char, std::char_traits&lt;char&gt; &gt;::close() ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#7  0x00007ffff7b8b3ad in std::basic_ifstream&lt;char, std::char_traits&lt;char&gt; &gt;::close() ()\n   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#8  0x00000000004018b9 in readFile(std::string) ()\n#9  0x0000000000401a3d in main ()\n</code></pre>\n\n<p>I have see other post about this current of problem and some of them was about getting out of array indexes but I have test everything and I am always inside bounds. So is something wrong about the way I am reading the file?.\nI hope this is not a silly question.\nThanks in advance.</p>\n"}, {"tags": ["c++", "templates", "c++11", "lambda", "variadic-templates"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1449684730, "post_id": 34185923, "comment_id": 56118261, "body": "If I&#39;m reading this correctly, you only accept captureless non-generic lambdas, is that correct?"}, {"owner": {"reputation": 93, "user_id": 4151697, "user_type": "registered", "profile_image": "https://graph.facebook.com/578663399/picture?type=large", "display_name": "George Davison", "link": "https://stackoverflow.com/users/4151697/george-davison"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1449685166, "post_id": 34185923, "comment_id": 56118560, "body": "Correct. They are all converted into a struct containing a __cdecl function pointer, a list of arguments and a size under the hood. Captures would make this much more complicated, and would not be safe for deferred execution anyway. Once the arguments are known the lambda can be cast to the __cdecl pointer and stored with one mov."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1459411285, "post_id": 34185923, "comment_id": 60277409, "body": "Have you measured the performance of std::function? It has optimisations for when the function object is &quot;small&quot;. I&#39;d be surprised if you can outperform it."}, {"owner": {"reputation": 93, "user_id": 4151697, "user_type": "registered", "profile_image": "https://graph.facebook.com/578663399/picture?type=large", "display_name": "George Davison", "link": "https://stackoverflow.com/users/4151697/george-davison"}, "edited": false, "score": 0, "creation_date": 1475098113, "post_id": 34185923, "comment_id": 66811943, "body": "Richard, Yes I have evaluated the speed of std::function (which would require bind in this case, very non-lightweight). Using std::function even for very small or empty enclosures with void arguments doubles the overhead time from around 150 microseconds per thread job start to around 400. And that includes queueng and interthread communication. For most applications that would be fine but for larger functions it becomes 2 orders of magnitude more expensive due to the memory management."}, {"owner": {"reputation": 3110, "user_id": 877542, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/T5IVp.jpg?s=128&g=1", "display_name": "karliwson", "link": "https://stackoverflow.com/users/877542/karliwson"}, "edited": false, "score": 0, "creation_date": 1511716889, "post_id": 34185923, "comment_id": 81952964, "body": "Can you share a link to your library?"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 4151697, "user_type": "registered", "profile_image": "https://graph.facebook.com/578663399/picture?type=large", "display_name": "George Davison", "link": "https://stackoverflow.com/users/4151697/george-davison"}, "edited": false, "score": 0, "creation_date": 1449686395, "post_id": 34186290, "comment_id": 56119320, "body": "This fails to compile when lambdas are passed. It cannot deduce the arguments of the lambda.  1&gt;ParLLTest.cpp(53): error C2672: &#39;ParLL::CreateFunctor&#39;: no matching overloaded function found 1&gt;ParLLTest.cpp(53): error C2893: Failed to specialize function template &#39;unknown-type ParLL::CreateFunctor(F,Arguments...)&#39; 1&gt;  ParLLTest.cpp(53): note: With the following template arguments: 1&gt;  ParLLTest.cpp(53): note: &#39;F=main::&lt;lambda_98950424653672320647a33040bb3c2f&gt;&#39; 1&gt;  ParLLTest.cpp(53): note: &#39;Arguments={}&#39;"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 93, "user_id": 4151697, "user_type": "registered", "profile_image": "https://graph.facebook.com/578663399/picture?type=large", "display_name": "George Davison", "link": "https://stackoverflow.com/users/4151697/george-davison"}, "edited": false, "score": 0, "creation_date": 1449695323, "post_id": 34186290, "comment_id": 56124322, "body": "@GeorgeDavison <a href=\"http://coliru.stacked-crooked.com/a/493061718cf57403\" rel=\"nofollow noreferrer\">Works for me with GCC and clang</a>. I wonder what MSVC is hallucinating here... Edit: Great, nonstandard calling conventions. /sigh"}, {"owner": {"reputation": 93, "user_id": 4151697, "user_type": "registered", "profile_image": "https://graph.facebook.com/578663399/picture?type=large", "display_name": "George Davison", "link": "https://stackoverflow.com/users/4151697/george-davison"}, "edited": false, "score": 0, "creation_date": 1449697079, "post_id": 34186290, "comment_id": 56125259, "body": "Did you mean MSVC uses nonstandard calling convention or Clang and GCC?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 93, "user_id": 4151697, "user_type": "registered", "profile_image": "https://graph.facebook.com/578663399/picture?type=large", "display_name": "George Davison", "link": "https://stackoverflow.com/users/4151697/george-davison"}, "edited": false, "score": 0, "creation_date": 1449697146, "post_id": 34186290, "comment_id": 56125295, "body": "@GeorgeDavison MSVC. Its lambdas have four separate conversion functions to function pointers."}, {"owner": {"reputation": 93, "user_id": 4151697, "user_type": "registered", "profile_image": "https://graph.facebook.com/578663399/picture?type=large", "display_name": "George Davison", "link": "https://stackoverflow.com/users/4151697/george-davison"}, "edited": false, "score": 0, "creation_date": 1449697395, "post_id": 34186290, "comment_id": 56125412, "body": "Yeah, I noticed that from the warning messages in earlier attempts to fix this. It&#39;s a chicken and egg problem, i can&#39;t get the right conversion operator without knowing the arguments. Then I found the example I used for deduce_lambda_arguments in another SO question. Maybe If I knew why that worked I could think of a more general purpose way of writing it."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 93, "user_id": 4151697, "user_type": "registered", "profile_image": "https://graph.facebook.com/578663399/picture?type=large", "display_name": "George Davison", "link": "https://stackoverflow.com/users/4151697/george-davison"}, "edited": false, "score": 0, "creation_date": 1449697739, "post_id": 34186290, "comment_id": 56125608, "body": "@GeorgeDavison Oh, I know how to do it, was just too lazy."}, {"owner": {"reputation": 93, "user_id": 4151697, "user_type": "registered", "profile_image": "https://graph.facebook.com/578663399/picture?type=large", "display_name": "George Davison", "link": "https://stackoverflow.com/users/4151697/george-davison"}, "edited": false, "score": 0, "creation_date": 1449699897, "post_id": 34186290, "comment_id": 56126698, "body": "New version works great thanks! And I think the first version will be helpful to a lot of people too. Only one caveat, the template now converts arguments passed as untyped NULL to ints in the signature of CreateFunctor (but not Functor&lt;&gt;). But we can live with explicit typing, or force a cast in the template."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 1, "last_activity_date": 1449697933, "last_edit_date": 1449697933, "creation_date": 1449685523, "answer_id": 34186290, "question_id": 34185923, "link": "https://stackoverflow.com/questions/34185923/template-function-that-can-take-lambda-or-function-pointer-and-deduce-arguments/34186290#34186290", "title": "Template function that can take lambda or function pointer and deduce arguments for passing to another template", "body": "<p>The trick is to ensure that you never evaluate <code>&amp;T::operator()</code> for things-that-you-want-to-support-but-are-not-lambdas. One way to do this is adding an extra template parameter and specializing on that:</p>\n\n<pre><code>template &lt;class T, bool = std::is_class&lt;T&gt;::value&gt;\nstruct compute_functor_type\n    : public compute_functor_type&lt;decltype(&amp;T::operator())&gt;\n{};\n\ntemplate &lt;class ClassType, typename... Args&gt;\nstruct compute_functor_type&lt;void(ClassType::*)(Args...) const, false&gt;\n{\n    typedef void(*pointer_cast_type)(Args...);\n    typedef Functor&lt;Args...&gt; functor_type;\n};\n\ntemplate &lt;class ClassType, typename... Args&gt;\nstruct compute_functor_type&lt;void(ClassType::*)(Args...), false&gt;\n{\n    typedef void(*pointer_cast_type)(Args...);\n    typedef Functor&lt;Args...&gt; functor_type;\n};\n\ntemplate &lt;typename... Args&gt;\nstruct compute_functor_type&lt;void(*)(Args...), false&gt;\n{\n    typedef void(*pointer_cast_type)(Args...);\n    typedef Functor&lt;Args...&gt; functor_type;\n};\n\n\ntemplate &lt;typename F, typename... Args&gt;\ninline auto CreateFunctor(F f, Args... arg) \n         -&gt; typename compute_functor_type&lt;F&gt;::functor_type\n{\n    typename compute_functor_type&lt;F&gt;::functor_type ret((typename compute_functor_type&lt;F&gt;::pointer_cast_type) f);\n    ret.Set(arg...);\n    return ret;\n};\n\ntemplate &lt;typename F&gt;\ninline auto CreateFunctor(F f) -&gt; typename compute_functor_type&lt;F&gt;::functor_type\n{\n    return typename compute_functor_type&lt;F&gt;::functor_type((typename compute_functor_type&lt;F&gt;::pointer_cast_type) f);\n};\n</code></pre>\n\n<hr>\n\n<p>Saving the (way shorter) original approach here for people who don't have to use MSVC:</p>\n\n<p>Since you only care about captureless non-generic lambdas and convert them to function pointers anyway, this is easy.</p>\n\n<p>Create a matching <code>Functor</code> type from a function pointer:</p>\n\n<pre><code>template&lt;class... Args&gt;\nFunctor&lt;Args...&gt; make_functor(void (*f)(Args...)) { return {f}; }\n</code></pre>\n\n<p>And force conversion to function pointer via the unary <code>+</code> operator:</p>\n\n<pre><code>template &lt;class F&gt;\ninline auto CreateFunctor(F f) -&gt; decltype(make_functor(+f))\n{\n    return make_functor(+f);\n}\n\ntemplate &lt;class F, typename... Arguments&gt;\ninline auto CreateFunctor(F f, Arguments ... arg) -&gt; decltype(make_functor(+f))\n{\n    auto ret = make_functor(+f);\n    ret.Set(arg...);\n    return ret;\n}\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 4151697, "user_type": "registered", "profile_image": "https://graph.facebook.com/578663399/picture?type=large", "display_name": "George Davison", "link": "https://stackoverflow.com/users/4151697/george-davison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 838, "favorite_count": 1, "accepted_answer_id": 34186290, "answer_count": 1, "score": 0, "last_activity_date": 1449697933, "creation_date": 1449684421, "question_id": 34185923, "link": "https://stackoverflow.com/questions/34185923/template-function-that-can-take-lambda-or-function-pointer-and-deduce-arguments", "title": "Template function that can take lambda or function pointer and deduce arguments for passing to another template", "body": "<p>I maintain an open-source lockless threading library designed for high speed parallel loop unrolling which is used in a couple commercial video games. It has incredibly low-overhead, around 8 clocks for creating a message and around 500 (per thread, including latency) for the entire dispatch and remote execute overhead. I say this first to explain why I don't simply use use std::function and bind. </p>\n\n<p>The library packages a function call and the arguments to the function call in a message (of type Functor&lt;>). Then calls it remotely with copies of the arguments.</p>\n\n<p>I have recently rewritten the library to package remote calls using STL style template meta programming rather than the dated C style macros it originally used. Amazingly this only increased the overhead by two ticks but I cannot figure out how to create a packaging function that takes both lambdas and function pointers.</p>\n\n<p>Desired Usage:</p>\n\n<pre><code>CreateFunctor([](int a, int b){doSomething(a, b)}, 1, 2);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>CreateFunctor(&amp;doSomething, 1, 2);\n</code></pre>\n\n<p>Currently I have to divide these cases into two separate functions, (CreateFunctor and CreateFunctorLambda). If I could combine them I would be able to merge my packaging and dispatching stages into one neat function call and simplify the API.</p>\n\n<p>The problem is that the code for deducing the arguments of a lambda cannot seem to share a template override with the code for deducing the arguments of a function. I've tried using enable_if and it still executes the ::* portion of the lambda version and causes compiler errors with function pointers. </p>\n\n<p>Relevant Snippet:</p>\n\n<pre><code>template &lt;typename... Arguments&gt;\ninline Functor&lt;Arguments...&gt; CreateFunctor(void(*func)(Arguments...))\n{\n    return Functor&lt;Arguments...&gt;(func);\n};\n\ntemplate &lt;typename... Arguments&gt;\ninline Functor&lt;Arguments...&gt; CreateFunctor(void(*func)(Arguments...), Arguments ... arg)\n{\n    Functor&lt;Arguments...&gt; ret(func);\n    ret.Set(arg...);\n    return ret;\n};\n\n// template to grab function type that lambda can be cast to\n// from http://stackoverflow.com/questions/7943525/is-it-possible-to-figure-out-the-parameter-type-and-return-type-of-a-lambda\ntemplate &lt;class T&gt;\nstruct deduce_lambda_arguments\n    : public deduce_lambda_arguments&lt;typename std::enable_if&lt;std::is_class&lt;T&gt;::value, decltype(&amp;T::operator())&gt;::type&gt;\n{};\n\ntemplate &lt;class ClassType, typename... Args&gt;\nstruct deduce_lambda_arguments&lt;void(ClassType::*)(Args...) const&gt;\n    // we specialize for pointers to member function\n{\n    typedef void(*pointer_cast_type)(Args...);\n    typedef Functor&lt;Args...&gt; functor_type;\n};\n\ntemplate &lt;typename F, typename... Args&gt;\ninline auto CreateFunctorLambda(F f, Args... arg) -&gt; typename deduce_lambda_arguments&lt;F&gt;::functor_type\n{\n    deduce_lambda_arguments&lt;F&gt;::functor_type ret((deduce_lambda_arguments&lt;F&gt;::pointer_cast_type) f);\n    ret.Set(arg...);\n    return ret;\n};\n\ntemplate &lt;typename F&gt;\ninline auto CreateFunctorLambda(F f) -&gt; typename deduce_lambda_arguments&lt;F&gt;::functor_type\n{\n    return deduce_lambda_arguments&lt;F&gt;::functor_type((deduce_lambda_arguments&lt;F&gt;::pointer_cast_type) f);\n};\n</code></pre>\n"}, {"tags": ["c++", "sockets", "tcp"], "comments": [{"owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 2, "creation_date": 1449684173, "post_id": 34185833, "comment_id": 56117918, "body": "TLDR. Try to make your question/code example as minimal as possible."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1449689181, "post_id": 34185833, "comment_id": 56120880, "body": "Clearly your second observation is the direct result of the first. You need to debug the client and check what prevents it from shutting down gracefully."}], "owner": {"reputation": 1671, "user_id": 4238547, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/bbda94ccbe6fa0b5b23b243ec63e5737?s=128&d=identicon&r=PG&f=1", "display_name": "takahashi", "link": "https://stackoverflow.com/users/4238547/takahashi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1018, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1449684448, "creation_date": 1449684085, "last_edit_date": 1449684448, "question_id": 34185833, "link": "https://stackoverflow.com/questions/34185833/c-reconnect-tcp-server-to-client-after-client-restart", "title": "C++ Reconnect TCP Server to Client after Client restart", "body": "<p>I want to implement a 'flexible' TCP connection where I can randomly shutdown and restart both the Server and the Client. The other one should then automatically detect the shutdown and enter try to reconnect. I successfully implemented this s.t. I can shutdown and restart the server. The client discovers the shutdown (via <code>recv(...) == 0</code>) and then closes the connection (it therefore closes the sockets <code>close(this-&gt;sockfd_)</code> and <code>close(this-&gt;newsockfd_)</code>).</p>\n\n<p>Unfortunately I am not able to get this working the other way around. I initialize the server (using the class constructor) the following way:</p>\n\n<pre><code>tcpServer::tcpServer(int _port) {\n  this-&gt;sockfd_ = -1;\n  this-&gt;port_ = _port;\n  this-&gt;connected_ = false;\n  if ((this-&gt;sockfd_ = socket(AF_INET, SOCK_STREAM, 0)) &lt; 0)\n    this-&gt;dieWithError(\"ERROR opening Socket\");\n  else\n    printf(\"-&gt; Port %d: Socket opened\\n\", this-&gt;port_);\n  // get rid of \"address already in use\" error message\n  int yes = 1;\n  setsockopt(this-&gt;sockfd_, SOL_SOCKET, SO_REUSEADDR, &amp;yes, sizeof(int));\n  /* assign values to the fields of struct sockaddr_in */\n  bzero((char *) &amp;this-&gt;serv_addr_, sizeof(this-&gt;serv_addr_));\n  this-&gt;serv_addr_.sin_family = AF_INET;\n  this-&gt;serv_addr_.sin_port = htons(this-&gt;port_);\n  this-&gt;serv_addr_.sin_addr.s_addr = INADDR_ANY;\n  /* bind the socket to an address */\n  if (bind(this-&gt;sockfd_, (struct sockaddr *) &amp;this-&gt;serv_addr_, sizeof(this-&gt;serv_addr_)) &lt; 0) {\n    printf(\"-&gt; Port %d:\", this-&gt;port_);\n    this-&gt;dieWithError(\"ERROR on binding\");\n  }\n  printf(\"-&gt; Binding successful. Start TCP client in new terminal\\n\");\n  fflush(stdout);\n  /* listen for connections and accept a connection */\n  listen(this-&gt;sockfd_, 5);\n  this-&gt;clilen_ = sizeof(this-&gt;cli_addr_);\n  if ((this-&gt;newsockfd_ = accept(this-&gt;sockfd_, (struct sockaddr *) &amp;this-&gt;cli_addr_, &amp;this-&gt;clilen_)) &lt; 0)\n    this-&gt;dieWithError(\"Error on accept\");\n  else {\n    printf(\"-&gt; Connection established\\n\");\n    this-&gt;connected_ = true;\n  }\n}\n</code></pre>\n\n<p>So once the server detects that the connection is closed, it enters a loop where it tries to reconnect using the following code:</p>\n\n<pre><code>void tcpServer::connect() {\n  if (this-&gt;sockfd_ == -1) {\n    /* create socket */\n    if ((this-&gt;sockfd_ = socket(AF_INET, SOCK_STREAM, 0)) &lt; 0)\n        this-&gt;dieWithError(\"ERROR opening Socket\");\n    else\n        printf(\"-&gt; Port %d: Socket opened\\n\", this-&gt;port_);\n    // get rid of \"address already in use\" error message\n    int reuse_address = 1;\n    setsockopt(this-&gt;sockfd_, SOL_SOCKET, SO_REUSEADDR, &amp;reuse_address, sizeof(int));\n    /* listen for connections and accept a connection */\n    listen(this-&gt;sockfd_, 5);\n    this-&gt;clilen_ = sizeof(this-&gt;cli_addr_);\n    if ((this-&gt;newsockfd_ = accept(this-&gt;sockfd_, (struct sockaddr *) &amp;this-&gt;cli_addr_, &amp;this-&gt;clilen_)) &lt; 0)\n        this-&gt;dieWithError(\"Error on accept\");\n    else {\n        printf(\"-&gt; Connection established\\n\");\n        this-&gt;connected_ = true;\n    }\n  }\n}\n</code></pre>\n\n<p>Some simple debugging output tells me that in the reconnect-mode, the server gets stuck in the \n<code>accept(this-&gt;sockfd_, (struct sockaddr *) &amp;this-&gt;cli_addr_, &amp;this-&gt;clilen_)</code> call. Another observation I made is that the client does not shut down properly (via <code>ctrl-c</code>), i.e., it gets stuck in a loop somewhere and does not properly close the connection.</p>\n\n<p>Since I am a total beginner with the TCP stuff, I would be very happy if someone could point me to the right direction. Thank you.</p>\n"}, {"tags": ["c++", "floating-point", "absolute-value"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1449684314, "post_id": 34185822, "comment_id": 56118006, "body": "Also <a href=\"http://stackoverflow.com/questions/33738509/whats-the-difference-between-abs-vs-fabs-in-c\" title=\"whats the difference between abs vs fabs in c\">stackoverflow.com/questions/33738509/&hellip;</a>"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1449691399, "post_id": 34185822, "comment_id": 56122162, "body": "I don&#39;t know how you cannot see it. <code>std::abs</code> and <code>std::fabs</code> have identical behaviour."}], "answers": [{"tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": false, "score": 0, "last_activity_date": 1449691710, "last_edit_date": 1449691710, "creation_date": 1449691615, "answer_id": 34188034, "question_id": 34185822, "link": "https://stackoverflow.com/questions/34185822/is-there-any-difference-between-stdabs-and-stdfabs-when-applied-to-floating/34188034#34188034", "title": "Is there any difference between std::abs and std::fabs when applied to floating point values?", "body": "<blockquote>\n  <p>Is there any difference at all between std::abs and std::fabs when applied to floating point values?</p>\n</blockquote>\n\n<p>No there is not. Nor is there a difference for integral types.</p>\n\n<p>It is idiomatic to use <code>std::abs()</code> because it is closest to the commonly used mathematical nomenclature. </p>\n"}, {"tags": [], "owner": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "is_accepted": true, "score": 5, "last_activity_date": 1449722786, "creation_date": 1449722786, "answer_id": 34193863, "question_id": 34185822, "link": "https://stackoverflow.com/questions/34185822/is-there-any-difference-between-stdabs-and-stdfabs-when-applied-to-floating/34193863#34193863", "title": "Is there any difference between std::abs and std::fabs when applied to floating point values?", "body": "<p>In standard-conforming code that has included <code>cmath</code> and only calls <code>std::abs</code> on <code>float</code>s, <code>double</code>s, and <code>long double</code>s, there is no difference.  However, it is instructive to look at the types returned by <code>std::abs</code> on various types when you call it with various sets of header files included.</p>\n\n<p>On my system, <code>std::abs(-42)</code> is a <code>double</code> if I've included <code>cmath</code> but not <code>cstdlib</code>, an <code>int</code> if I've included <code>cstdlib</code>, and it produces a compilation error if I've included neither.  Conversely, <code>std::abs(-42.0)</code> produces a compilation error (ambiguous overload) if I've included <code>cstdlib</code> but I haven't included <code>cmath</code> or a different compilation error (never heard of <code>std::abs</code>) if I've included neither.</p>\n\n<p>On my platform, <code>std::abs('x')</code> gives me a <code>double</code> if I've included <code>cmath</code> or an <code>int</code> if I've included <code>cstdlib</code> but not <code>cmath</code>.  Similar for a <code>short int</code>.  Signedness does not appear to matter.</p>\n\n<p>On my platform, the <code>complex</code> header apparently causes both the integral and the floating-point overloads of <code>std::abs</code> to be declared.  I'm not certain this is mandated; perhaps you can find an otherwise reasonable platform on which <code>std::abs(1e222)</code> returns infinity with the wrong set of standard headers included.</p>\n\n<hr>\n\n<p>The usual consequence of \"you forgot a header in your program\" is a compilation failure complaining of an undefined symbol, not a silent change in behaviour.  With <code>std::abs</code>, however, the result can be <code>std::abs(42)</code> returning a <code>double</code> if you forgot <code>cstdlib</code> or <code>std::abs('x')</code> returning an <code>int</code> if you didn't.  (Or perhaps you expected <code>std::abs</code> to give you an integral type when you pass it a <code>short</code>?  Then, assuming my compiler got its promotion and overload resolution right, you had better make sure you don't include <code>cmath</code>.)</p>\n\n<p>I have also spent too much time in the past trying to work out why code like <code>double precise_sine = std::sin(myfloat)</code> gives imprecise results.  Because I don't like wasting my time on these sorts of surprises, I tend to avoid the overloaded variants of standard C functions in <code>namespace std</code>.  That is, I use <code>::fabs</code> when I want a <code>double</code> to be returned, <code>::fabsf</code> when I want a <code>float</code> out, and <code>::fabsl</code> when I want a <code>long double</code> out.  Similarly for <code>::abs</code> when I want an <code>int</code>, <code>::absl</code> when I want a <code>long</code>, and <code>::absll</code> when I want a <code>long long</code>.</p>\n"}], "owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4971, "favorite_count": 2, "accepted_answer_id": 34193863, "answer_count": 2, "score": 3, "last_activity_date": 1487887529, "creation_date": 1449684046, "last_edit_date": 1495540430, "question_id": 34185822, "link": "https://stackoverflow.com/questions/34185822/is-there-any-difference-between-stdabs-and-stdfabs-when-applied-to-floating", "title": "Is there any difference between std::abs and std::fabs when applied to floating point values?", "body": "<p>There is a <a href=\"https://stackoverflow.com/questions/3118165/when-do-i-use-fabs-and-when-is-it-sufficient-to-use-stdabs\">related question</a> but I believe it doesn't answer this question.</p>\n\n<p>Looking at <a href=\"http://en.cppreference.com/w/cpp/numeric/math/fabs\" rel=\"nofollow noreferrer\"><code>std::abs</code> and <code>std::fabs</code> documentation</a> they seems to have exactly the same behaviour. As a personal note, it appears to me that <code>std::fabs</code> is preferable because it mitigates the ambiguity with the <code>std::abs(int)</code> definition in <code>&lt;cstdlib&gt;</code>(See <a href=\"http://en.cppreference.com/w/cpp/numeric/math/fabs#Notes\" rel=\"nofollow noreferrer\">note</a>).</p>\n\n<p>So my question is: besides the <code>std::abs(int)</code> potential ambiguity, is there any difference at all between <code>std::abs</code> and <code>std::fabs</code> when applied to floating point values?</p>\n"}, {"tags": ["c++", "templates", "allocator"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1449683784, "post_id": 34185712, "comment_id": 56117692, "body": "Can you use C++11? You can get away with about 10% of the code in C++11."}, {"owner": {"reputation": 20017, "user_id": 2282011, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/p8sXJ.jpg?s=128&g=1", "display_name": "Devolus", "link": "https://stackoverflow.com/users/2282011/devolus"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1449683840, "post_id": 34185712, "comment_id": 56117722, "body": "C++11 is fine for me. Using Visual Studio 2010 for now, so maybe not everything."}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1449683901, "post_id": 34185712, "comment_id": 56117755, "body": "I believe C++11 was first supported in VS2012."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1449683906, "post_id": 34185712, "comment_id": 56117758, "body": "MSVS 2010 has very limited C++11 support: <a href=\"https://msdn.microsoft.com/en-us/library/hh567368.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/hh567368.aspx</a>"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1449683953, "post_id": 34185712, "comment_id": 56117784, "body": "@Devolus VS2010 has poor support for C++11, for what I believe are obvious reasons. Is there any specific reason why you can&#39;t switch to VS2015 Community?"}, {"owner": {"reputation": 20017, "user_id": 2282011, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/p8sXJ.jpg?s=128&g=1", "display_name": "Devolus", "link": "https://stackoverflow.com/users/2282011/devolus"}, "edited": false, "score": 0, "creation_date": 1449683955, "post_id": 34185712, "comment_id": 56117789, "body": "For a proof of concept I can use VS2015, but for the final code I&#39;d have to downgrade it to VS2010.Anyway, a working example would already be a step forward. :)"}], "answers": [{"comments": [{"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 2153, "user_id": 4764736, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1423363884633192/picture?type=large", "display_name": "DawidPi", "link": "https://stackoverflow.com/users/4764736/dawidpi"}, "edited": false, "score": 1, "creation_date": 1449684704, "post_id": 34185873, "comment_id": 56118243, "body": "@DawidPi: <a href=\"https://github.com/bloomberg/bde/wiki/BDE-Allocator-Model\" rel=\"nofollow noreferrer\">this</a> page is somewhat specific to the BDE (which is a superset of BSL) allocators. The standard allocators are informed by the BDE allocators (mostly the C++11 model is developed by people who worked on BDE). The documentation still isn&#39;t complete. I don&#39;t know how a good, comprehensive resource on allocators."}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 2, "last_activity_date": 1449684205, "creation_date": 1449684205, "answer_id": 34185873, "question_id": 34185712, "link": "https://stackoverflow.com/questions/34185712/writing-a-custom-allocator/34185873#34185873", "title": "Writing a custom allocator", "body": "<p>When you pass an allocator to <code>std::set&lt;T, C A&gt;</code> it is meant to have an <code>allocate()</code> function allcoating space for <code>T</code> objects. However, the <code>std::set&lt;T, C, A&gt;</code> will <em>not</em> allocate any <code>T</code> object. It will, instead, allocate <code>_Node&lt;T&gt;</code> objects where <code>_Node</code> is some tree node representation capable of holding <code>T</code> objects but also containing suitable pointers to other nodes.</p>\n\n<p>To allocate an object of <code>_Node&lt;T&gt;</code> an allocator based on <code>A</code> is needed. This allocator's type is obtained from <code>A::rebind&lt;_Node&lt;T&gt;&gt;::other</code> and initialized appropriately by passing the original allocator object (or an object created from that) as constructor argument.</p>\n\n<p>Of course, using stateful allocators does assume that you use the C++11 allocator model. Prior to C++11 allocators did not appropriately construct other allocators and they were essentially stateless. In case you need to use code prior to C++11 but want to deal with allocators, you might want to use the containers from <a href=\"https://github.com/bloomberg/bde/tree/master/groups/bsl/bslstl\" rel=\"nofollow\">BSL</a>: these are allocator aware and do compile with C++03 compilers.</p>\n"}], "owner": {"reputation": 20017, "user_id": 2282011, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/p8sXJ.jpg?s=128&g=1", "display_name": "Devolus", "link": "https://stackoverflow.com/users/2282011/devolus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2687, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1449684205, "creation_date": 1449683708, "last_edit_date": 1449683785, "question_id": 34185712, "link": "https://stackoverflow.com/questions/34185712/writing-a-custom-allocator", "title": "Writing a custom allocator", "body": "<p>I'm trying to write a custom allocator, which preallocates space for a fixed number of elements. However, I have some problems with understanding the requirements.</p>\n\n<h2>allocator.h</h2>\n\n<pre><code>#pragma once\n#ifndef _ALLOCATOR_H\n#define _ALLOCATOR_H\n\ntemplate&lt;typename T&gt;\nclass Allocator\n{\npublic:\n    //    typedefs\n    typedef T value_type;\n    typedef value_type* pointer;\n    typedef const value_type* const_pointer;\n    typedef value_type&amp; reference;\n    typedef const value_type&amp; const_reference;\n    typedef std::size_t size_type;\n    typedef std::ptrdiff_t difference_type;\n\npublic:\n    //    convert an allocator&lt;T&gt; to allocator&lt;U&gt;\n    template&lt;typename U&gt;\n    struct rebind\n    {\n        typedef Allocator&lt;U&gt; other;\n    };\n\npublic:\n    explicit Allocator(void)\n    {\n        mCurElement = 0;\n        mMaxElements = 650000000;\n        mBase = reinterpret_cast&lt;pointer&gt;(::operator new(mMaxElements * sizeof(T)));\n    }\n\n    virtual ~Allocator(void)\n    {\n        ::operator delete(mBase);\n    }\n\n    explicit Allocator(Allocator const &amp;oOther)\n    {\n        mCurElement = oOther.mCurElement;\n        mMaxElements = oOther.mMaxElements;\n        mBase = oOther.mBase;\n    }\n\n    template&lt;typename U&gt;\n    explicit Allocator(Allocator&lt;U&gt; const &amp;oOther)\n    {\n        mCurElement = 0;\n        mMaxElements = 650000000;\n        mBase = oOther.mBase;\n    }\n\n    //    address\n    pointer address(reference r) { return &amp;r; }\n    const_pointer address(const_reference r) { return &amp;r; }\n\n    //    memory allocation\n    pointer allocate(size_type nElements, typename std::allocator&lt;void&gt;::const_pointer = 0)\n    {\n        if (mCurElement &gt; mMaxElements)\n            return NULL;\n\n        //pointer p = reinterpret_cast&lt;pointer&gt;(::operator new(cnt * sizeof(T)));\n        pointer p = &amp;mBase[mCurElement];\n        mCurElement += nElements;\n        return p;\n    }\n    void deallocate(pointer pAddress, size_type)\n    {\n        //::operator delete(pAddress);\n        mCurElement--;\n    }\n\n    //    size\n    size_type max_size() const\n    {\n        return std::numeric_limits&lt;size_type&gt;::max() / sizeof(T);\n    }\n\n    //    construction/destruction\n    void construct(pointer pAddress, const T&amp; oObject)\n    {\n        new(pAddress) T(oObject);\n    }\n    void destroy(pointer pAddress)\n    {\n        pAddress-&gt;~T();\n    }\n\n    bool operator==(Allocator const&amp;) { return true; }\n    bool operator!=(Allocator const&amp; oAllocator) { return !operator==(oAllocator); }\n\npublic:\n    T *getBase(void) const { return mBase; }\n\nprivate:\n    static usize_t mId;\n    T *mBase;\n    usize_t mMaxElements;\n    usize_t mCurElement;\n};\n\n\n#endif // _ALLOCATOR_H\n</code></pre>\n\n<h2>allocator.cpp</h2>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;set&gt;\n#include &lt;ctime&gt;\n\n#include \"allocator.h\"\n\ntypedef unsigned int uint_t;\ntypedef unsigned long long usize_t;\nusize_t Allocator&lt;usize_t&gt;::mId;\n\nvoid testStdAllocator(usize_t nIterations, usize_t nMaxValue)\n{\n    std::set&lt;usize_t, std::less&lt;usize_t&gt;, Allocator&lt;usize_t&gt;&gt; st;\n    std::string id = \"Standard Set\";\n\n    clock_t start = clock();\n    for (usize_t i = 0; i &lt; nIterations; i++)\n    {\n        usize_t val = (usize_t)(rand() % nMaxValue) + 1;\n        if (i % 1000000 == 0)\n            std::cout &lt;&lt; id &lt;&lt; \" testing ... \" &lt;&lt; i &lt;&lt; \"/\" &lt;&lt; nIterations &lt;&lt; \"\\r\";\n\n        st.insert(val);\n    }\n\n    std::cout &lt;&lt; id &lt;&lt; \" Elapsed: \" &lt;&lt; clock() - start &lt;&lt; std::endl;\n}\n\nint main(int argc, char *argv[])\n{\n    usize_t iterations =    650000000;\n    usize_t val =           6500000;\n\n    std::cout &lt;&lt; \"Allocator\" &lt;&lt; std::endl;\n\n    testStdAllocator(iterations, val);\n\n    return 0;\n}\n</code></pre>\n\n<p>The problem I have is:</p>\n\n<p>Why do I need the <code>template &lt;typename U&gt; ...</code>? (I found an example and adpated it)</p>\n\n<p>When I made it compilable and tested it the <code>std::set</code> apparently creates copies of the allocator, so I would have to pass around the pointer. I can use an <code>std::shared_ptr</code> for that, but I don't really see why this should be needed in the first place.</p>\n\n<p>Apparently there is something about proxied containers where the <code>template &lt;typename U&gt;</code> is needed for, but this again creates the additional problem of passing the pointer around for an (apparently) different allocator type.</p>\n\n<p>So I would appreciate some pointers where I'm going wrong.</p>\n"}, {"tags": ["c++", "gcc", "openmpi", "petsc"], "answers": [{"comments": [{"owner": {"reputation": 5353, "user_id": 1128551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1b2e64745ac36bf554b976e3625a4ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Shibli", "link": "https://stackoverflow.com/users/1128551/shibli"}, "edited": false, "score": 0, "creation_date": 1449684544, "post_id": 34185902, "comment_id": 56118152, "body": "my code is written in c++ and petsc is in c. Would it be a problem if I use mpicxx only?"}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "reply_to_user": {"reputation": 5353, "user_id": 1128551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1b2e64745ac36bf554b976e3625a4ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Shibli", "link": "https://stackoverflow.com/users/1128551/shibli"}, "edited": false, "score": 0, "creation_date": 1449684636, "post_id": 34185902, "comment_id": 56118206, "body": "How are you currently compiling petsc (I&#39;ve never used it before)? If you are using g++ to compile petsc, use mpicxx; the behavior will be identical. If you are using gcc to compile petsc, use mpicc."}], "tags": [], "owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "is_accepted": true, "score": 1, "last_activity_date": 1449684335, "creation_date": 1449684335, "answer_id": 34185902, "question_id": 34185600, "link": "https://stackoverflow.com/questions/34185600/location-of-mpi-h/34185902#34185902", "title": "Location of mpi.h", "body": "<p>Typically, you should use <code>mpicc</code> (or <code>mpicxx</code> for C++) to compile instead of <code>gcc</code> (or <code>g++</code> for C++). These commands are simple wrappers around <code>gcc</code> and <code>g++</code> that simply add in the appropriate <code>-I/path/to/mpi/includes</code> and <code>-L/path/to/mpi/libs</code> automatically and should be included with your <code>openmpi</code> install. In the absence of that, simply add <code>-I/path/to/mpi/includes</code> in your command to compile the appropriate files. This tells the compiler where to look for the appropriate header files.</p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1527198348, "post_id": 50518474, "comment_id": 88049812, "body": "Specifying the full path in the <code>#include</code> directive seems like a bad idea. You should be able to use <code>#include &lt;mpi.h&gt;</code>, and the compiler or wrapper should figure it out. If you&#39;re using an editor that warns you about headers it can&#39;t find, you&#39;ll be better off figuring out how to tell the editor where to find <code>mpi.h</code> rather than modifying your code."}], "tags": [], "owner": {"reputation": 7, "user_id": 4271957, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lHgb-e_j8jo/AAAAAAAAAAI/AAAAAAAAAX4/9VJVupLX3Ng/photo.jpg?sz=128", "display_name": "DaveWR", "link": "https://stackoverflow.com/users/4271957/davewr"}, "is_accepted": false, "score": -2, "last_activity_date": 1527197942, "last_edit_date": 1527197942, "creation_date": 1527197609, "answer_id": 50518474, "question_id": 34185600, "link": "https://stackoverflow.com/questions/34185600/location-of-mpi-h/50518474#50518474", "title": "Location of mpi.h", "body": "<p>To answer the question. To prevent a C/C++ editor from showing errors as you tyoe in the \"special code\" just use:</p>\n\n<pre><code>#include &lt;/usr/include/mpi/mpi.h&gt;\n</code></pre>\n\n<p>which seems to be a link -- but doing that turns off the errors in Netbeans editor so I can code without distraction.\nNote: Using Ubuntu 18.04 Desktop as editing machine -- and testing run machine -- but I compile manually using mpic as noted previously.</p>\n\n<pre><code>sudo mpicc c_pi.c -o c_pi\n\nand then...\nmpiexec ./c_pi\n</code></pre>\n\n<p>hth</p>\n"}], "owner": {"reputation": 5353, "user_id": 1128551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1b2e64745ac36bf554b976e3625a4ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Shibli", "link": "https://stackoverflow.com/users/1128551/shibli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10329, "favorite_count": 0, "accepted_answer_id": 34185902, "answer_count": 2, "score": 3, "last_activity_date": 1527197942, "creation_date": 1449683371, "question_id": 34185600, "link": "https://stackoverflow.com/questions/34185600/location-of-mpi-h", "title": "Location of mpi.h", "body": "<p>I have a code on my computer uses <code>Petsc</code> which depends on <code>mpi</code>. On my computer it works well. I put it on cluster, exported paths of <code>gcc</code>, <code>Petsc</code> and <code>openmpi</code> (although I was using <code>mpich</code> on my computer I hope <code>openmpi</code> will also work) to <code>LD_LIBRARY_PATH</code> and <code>PATH</code>. I also changed paths in makefile. Petsc, gcc, openmpi were all available on cluster so I did not configure anything. When I did <code>make</code>, compiler gave error:</p>\n\n<p><code>fatal error: mpi.h: No such file or directory</code></p>\n\n<p>I know I did not give complete information but I can tell more if needed. How can I make the <code>Petsc</code> to know where is <code>mpi.h</code>?</p>\n"}, {"tags": ["c++", "opencv", "xlib"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 3, "creation_date": 1449683743, "post_id": 34185472, "comment_id": 56117667, "body": "no idea about the X stuff but for the openCV mat: you dont even need to release. once it goes out of scope and wasnt referenced by another variable its .data memory will be released automatically. openCV mat data uses reference counting!"}, {"owner": {"reputation": 1235, "user_id": 1904755, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/68879b1c8cb87f19c86a3b48ad573d1c?s=128&d=identicon&r=PG", "display_name": "&#233;tale-cohomology", "link": "https://stackoverflow.com/users/1904755/%c3%a9tale-cohomology"}, "edited": false, "score": 0, "creation_date": 1469538798, "post_id": 34185472, "comment_id": 64570007, "body": "I noticed that you&#39;re returning <code>cv::Mat scene</code> by value. Would&#39;t it be better to allocate memory once (outside of the function) and then return it by pointer?"}, {"owner": {"reputation": 41, "user_id": 4125991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44a551c28212ab611eb17353be22b08c?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Smith", "link": "https://stackoverflow.com/users/4125991/daniel-smith"}, "edited": false, "score": 0, "creation_date": 1469630655, "post_id": 34185472, "comment_id": 64618548, "body": "That&#39;s a good point. I&#39;m an amateur C++ programmer, so thanks for the advice."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 4125991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44a551c28212ab611eb17353be22b08c?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Smith", "link": "https://stackoverflow.com/users/4125991/daniel-smith"}, "is_accepted": true, "score": 3, "last_activity_date": 1460898995, "last_edit_date": 1495540289, "creation_date": 1449798091, "answer_id": 34214856, "question_id": 34185472, "link": "https://stackoverflow.com/questions/34185472/how-do-i-deallocate-the-memory-create-in-this-function/34214856#34214856", "title": "How do I deallocate the memory create in this function?", "body": "<p><a href=\"https://stackoverflow.com/a/30985586/65863\">Found a comment</a> in the same place where I found the original code, pointing out the memory leak. Totally fixed my program.</p>\n\n<blockquote>\n  <p>... I wanted to say that the answer provided by Brandon leaks memory. <strong>Use XDestroyImage(img); instead of XFree(img); in the function ImageFromDisplay</strong></p>\n</blockquote>\n"}], "owner": {"reputation": 41, "user_id": 4125991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44a551c28212ab611eb17353be22b08c?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Smith", "link": "https://stackoverflow.com/users/4125991/daniel-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 1, "accepted_answer_id": 34214856, "answer_count": 1, "score": 1, "last_activity_date": 1460898995, "creation_date": 1449682983, "question_id": 34185472, "link": "https://stackoverflow.com/questions/34185472/how-do-i-deallocate-the-memory-create-in-this-function", "title": "How do I deallocate the memory create in this function?", "body": "<p>I've done a lot of searching on google, and I'm still not sure about this.</p>\n\n<pre><code>cv::Mat ImageFromDisplay(int Width, int Height, int x, int y)\n{\n    Display* display = XOpenDisplay(NULL);\n    Window root = DefaultRootWindow(display);\n    XWindowAttributes attributes = {0};\n    XGetWindowAttributes(display, root, &amp;attributes);\n    XImage* img = XGetImage(display, root, x, y, Width, Height, AllPlanes, ZPixmap);\n    if (!img-&gt;data) {\n        cout &lt;&lt; \"No image data\";\n        throw(\"No image data\");\n    }\n    cv::Mat scene = cv::Mat(Height, Width, img-&gt;bits_per_pixel &gt; 24 ? CV_8UC4 : CV_8UC3, img-&gt;data);\n    if (!scene.data) {\n        cout &lt;&lt; \"Error reading scene\";\n        throw(\"Error reading scene\");\n    }\n    cvtColor(scene, scene, CV_BGRA2BGR);\n    XFree(img);\n    XCloseDisplay(display);\n    return scene;\n}\n</code></pre>\n\n<p>Whenever I use this function, I later use cv::Mat->release on the object that is returned, like so:</p>\n\n<pre><code>cv::Mat sceneImg = ImageFromDisplay(SCENE_WIDTH, SCENE_HEIGHT);\nsceneImg.release();\n</code></pre>\n\n<p>Will all the memory allocated by this function be cleaned up once sceneImg goes out of scope?</p>\n\n<p>I know that I call free on the img within ImageFromDisplay, and I call XCloseDisplay on display from ImageFromDisplay, so I'm assuming the memory for those data structures gets cleaned up. Do I need to delete sceneImg.data after sceneImg.release has been called?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1449682939, "post_id": 34185408, "comment_id": 56117125, "body": "You should read much more about C++. Use <code>std::string</code>. Have your own constructors and detructors. Know about the <a href=\"https://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29\" rel=\"nofollow noreferrer\">rule of five</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1449683001, "post_id": 34185408, "comment_id": 56117161, "body": "Also, compile with all warnings &amp; debug info (<code>g++ -std=c++11 -Wall -Wextra -g</code>) and <b>use the debugger</b> (<code>gdb</code>) &amp; <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1449683104, "post_id": 34185408, "comment_id": 56117225, "body": "If you cannot change the <code>struct</code> you&#39;ll better zero (with <code>memset</code>) it before using it. At least you&#39;ll get more reproducible behavior"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1449683162, "post_id": 34185408, "comment_id": 56117263, "body": "initialize all fields of myStruct. Otherwise, no differene in your example between the local version and the data member version"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1449683219, "post_id": 34185408, "comment_id": 56117304, "body": "If <code>ExClass</code> goes out of scope, the members also go out of scope.  You didn&#39;t show where you instantiated an <code>ExClass</code> object and how it&#39;s used."}, {"owner": {"reputation": 227, "user_id": 1405687, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0e3ad3b10f4241905b8c332af4afc219?s=128&d=identicon&r=PG", "display_name": "karlkar", "link": "https://stackoverflow.com/users/1405687/karlkar"}, "edited": false, "score": 0, "creation_date": 1449683444, "post_id": 34185408, "comment_id": 56117465, "body": "We can assume that ExClass object doesn&#39;t go out of scope. It&#39;s just simple one threaded application. And sorry - I cannot modify the struct members."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1449683581, "post_id": 34185408, "comment_id": 56117571, "body": "@user1405687 <i>We can assume that ExClass object doesn&#39;t go out of scope.</i> -- Why should we assume this?  You have an issue of a function not working, you didn&#39;t post anything other than a class.  We don&#39;t know what your code consists of."}, {"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 1, "creation_date": 1449688223, "post_id": 34185408, "comment_id": 56120382, "body": "What does this third party globalFunction do exactly?  you need to supply more information."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449703532, "post_id": 34185408, "comment_id": 56128261, "body": "The other members of <code>myStruct</code> are uninitialized in your example. Change to <code>sExample myStruct {};</code>.  Could you show some more code about how you are using the struct, and describe if the global function saves the pointer to the struct?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449703547, "post_id": 34185408, "comment_id": 56128268, "body": "To get a good answer straight away, post a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>"}], "answers": [{"comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1449697376, "post_id": 34185587, "comment_id": 56125408, "body": "Usually <code>b-&gt;fun()</code> would fail regardless of any <code>B</code> implementation details. Wouldn&#39;t it?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449697537, "post_id": 34185587, "comment_id": 56125488, "body": "&lt;Looking at the ideone example&gt; Hm. :-)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1449703633, "post_id": 34185587, "comment_id": 56128300, "body": "@PeterA.Schneider it causes undefined behaviour, meaning anything can happen. Typically the compiler will just generate the same code for <code>b-&gt;fun</code> regardless of whether <code>b</code> is initialized or not, and in this example it so happens that the address pointed to by <code>b</code> was not used in the code generated by the compiler."}, {"owner": {"reputation": 24913, "user_id": 1300910, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/se92W.jpg?s=128&g=1", "display_name": "huysentruitw", "link": "https://stackoverflow.com/users/1300910/huysentruitw"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449727163, "post_id": 34185587, "comment_id": 56135299, "body": "@M.M <i>typically</i>? The compiler will just generate one <code>fun</code> proc and call it while passing along the <code>b</code> instance. When that proc doesn&#39;t use anything from that instance, nothing will fail. Adding an extra check would only slow down the code."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1449728653, "post_id": 34185587, "comment_id": 56135913, "body": "I haven&#39;t surveyed all possible past and future compilers, and the C++ Standard doesn&#39;t mandate the behaviour you described. Another possibility would be that an optimization pass removes this entire section of code, because it knows that using <code>-&gt;</code> on an uninitialized pointer causes undefined behaviour."}], "tags": [], "owner": {"reputation": 24913, "user_id": 1300910, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/se92W.jpg?s=128&g=1", "display_name": "huysentruitw", "link": "https://stackoverflow.com/users/1300910/huysentruitw"}, "is_accepted": false, "score": 2, "last_activity_date": 1449687902, "last_edit_date": 1449687902, "creation_date": 1449683332, "answer_id": 34185587, "question_id": 34185408, "link": "https://stackoverflow.com/questions/34185408/struct-creation-issue/34185587#34185587", "title": "Struct creation issue", "body": "<p>If that is your only change, then your issue is that you're calling <code>fun()</code> on a invalid instance of <code>ExClass</code>. Or you forgot to new the class or it already is deleted/went out of scope.</p>\n\n<p>F.e. this <a href=\"http://ideone.com/H5zJ3j\" rel=\"nofollow\">Ideone</a> example works perfectly, because <code>A a</code> is created on stack inside <code>fun()</code>. But once you move the declaration of <code>a</code> to class level, you will get an exception because <code>*b</code> is not instantiated.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nstruct A {\n    int data;\n    A() : data(123) { }\n};\n\nclass B {\npublic:\n    void fun() {\n        A a;\n        cout &lt;&lt; a.data;\n    }\n};\n\nint main() {\n    B* b; // b points to random memory, thus is an invalid instance\n    b-&gt;fun(); // this still works because fun doesn't access any member of B\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 227, "user_id": 1405687, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0e3ad3b10f4241905b8c332af4afc219?s=128&d=identicon&r=PG", "display_name": "karlkar", "link": "https://stackoverflow.com/users/1405687/karlkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1449697114, "creation_date": 1449682818, "last_edit_date": 1449697114, "question_id": 34185408, "link": "https://stackoverflow.com/questions/34185408/struct-creation-issue", "title": "Struct creation issue", "body": "<p>I have a struct declared like this:</p>\n\n<pre><code>struct sExample {\n  int something;\n  char somethingElse[32];\n  bool another;\n  // many other fields\n};\n</code></pre>\n\n<p>It has more of <code>int</code>, <code>char[]</code> and <code>bool</code>. Now let's face the problem. First of all I created a class which uses temporary variable of type <code>sExample</code>.</p>\n\n<pre><code>class ExClass {\n  void fun() {\n    sExample myStruct;\n    // Initialize some of the struct fields (just some of them!)\n    strcpy(myStruct.somethingElse, \"TEXT\");\n    // Use struct in function that may read or modify it\n    globalFunction(&amp;myStruct);\n  }\n}\n</code></pre>\n\n<p>It worked just fine, but later I decided that <code>myStruct</code> should be available longer then just in function fun, so I moved it to class members:</p>\n\n<pre><code>class ExClass {\n  sExample myStruct;\n  void fun() {\n    // Same code as above\n    // Initialize some of the struct fields (just some of them!)\n    strcpy(myStruct.somethingElse, \"TEXT\");\n    // Use struct in function that may read or modify it\n    globalFunction(&amp;myStruct);\n  }\n}\n</code></pre>\n\n<p>And here is the problem. Call to <code>globalFunction</code> causes segfault (this is a function from an external 3rd party library, so I can't identify where exactly the problem is).\nI've also tried initializing struct with use of <code>= {0}</code>, but it didn't help. What can be wrong?\nI'm using Gcc 4.9, C++11.\nAnybody can explain what is the problem here?</p>\n"}, {"tags": ["c++", "undefined", "extern"], "answers": [{"comments": [{"owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "edited": false, "score": 0, "creation_date": 1449683544, "post_id": 34185627, "comment_id": 56117536, "body": "Oh, million thanks. It does indeed fix it! I though all non-static variables where externable by default. I think I should read the spec again."}], "tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": false, "score": 1, "last_activity_date": 1449684029, "last_edit_date": 1449684029, "creation_date": 1449683449, "answer_id": 34185627, "question_id": 34185401, "link": "https://stackoverflow.com/questions/34185401/extern-variable-undefined/34185627#34185627", "title": "Extern variable undefined", "body": "<p><code>SystemA</code> and <code>SystemB</code> should be defined with <code>extern</code> keyword, too:</p>\n\n<pre><code>extern const System SystemA = {\"A\", 1, 2 ...}; //In A.cpp\nextern const System SystemB = {\"B\", 1, 2 ...}; //In B.cpp\n</code></pre>\n\n<p>Or you could make a header e.g. <code>Globals.h</code>, declare them:</p>\n\n<pre><code>extern const System SystemA;\nextern const System SystemB;\n</code></pre>\n\n<p>This way it's guaranteed they'll have same linkage across all compilation units that include the header. Later, you can define them without <code>extern</code> keyword, since the <code>extern</code> declaration is already visible:</p>\n\n<p><strong>A.cpp</strong></p>\n\n<pre><code>#include \"Globals.h\"\n\nconst System SystemA = {\"A\", 1, 2 ...};\n</code></pre>\n\n<p><strong>B.cpp</strong></p>\n\n<pre><code>#include \"Globals.h\"\n\nconst System SystemB = {\"B\", 1, 2 ...};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "edited": false, "score": 0, "creation_date": 1449688009, "post_id": 34185641, "comment_id": 56120269, "body": "I mark this as the answer because it actually does explain that C, and C++ are nott the same. C defaults to extern, while C++ defaults to static on const variables."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 1, "last_activity_date": 1449691754, "last_edit_date": 1449691754, "creation_date": 1449683485, "answer_id": 34185641, "question_id": 34185401, "link": "https://stackoverflow.com/questions/34185401/extern-variable-undefined/34185641#34185641", "title": "Extern variable undefined", "body": "<p>In C++, <code>const</code> objects at global scope are by default also <code>static</code>, i.e., they are not visible outside the source file. To fix that, add <code>extern</code> to each of the definitions.</p>\n"}], "owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 34185641, "answer_count": 2, "score": 0, "last_activity_date": 1449691754, "creation_date": 1449682788, "question_id": 34185401, "link": "https://stackoverflow.com/questions/34185401/extern-variable-undefined", "title": "Extern variable undefined", "body": "<p>I am facing a problem with extern variable declaration. I have a bunch of .cpp files containing definitions of structs:</p>\n\n<pre><code>const System SystemA = {\"A\", 1, 2 ...}; //In A.cpp\nconst System SystemB = {\"B\", 1, 2 ...}; //In B.cpp\n...\n</code></pre>\n\n<p>These Cpp files are just to server as a simple way to add new structs, and to look for one specific struct definition easily. (since I may have 100 definitions, and each of them is multiple [50] lines of code).</p>\n\n<p>When I try to use them in another compilation unit (.cpp):</p>\n\n<pre><code>extern const System SystemA;\nextern const System SystemB;\n...\n\nvoid InitStructs(){\n    SystemA.Init();\n    SystemB.Init();\n    ...\n}\n</code></pre>\n\n<p>I just get <code>undefined reference to SystemA</code> <code>undefined reference to SystemB</code>, and so on.\nI am doing this unified initialization, because I was doing the initialization as a static dynamic initialization in each system.cpp. But that is risky since the order of initialization is not ensured (static initialization order fiasco). Therefore I was getting segmentation faults depending on the cpp compilation order.</p>\n\n<p>I moved towards this approach, but now it doesn even compile....\nAny help?</p>\n"}, {"tags": ["c++", "json", "string"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1449683219, "post_id": 34185396, "comment_id": 56117305, "body": "Your best bet, for all but the most trivial examples, is to use a <code>json</code> library."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1449684021, "post_id": 34185396, "comment_id": 56117825, "body": "Even for the trivial examples, use a json library."}], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 5521259, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6cabf84bbde38e55c83f1df35d517335?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Amaro", "link": "https://stackoverflow.com/users/5521259/jo%c3%a3o-amaro"}, "edited": false, "score": 0, "creation_date": 1449760145, "post_id": 34185585, "comment_id": 56154972, "body": "It says &quot;error: &#39;quoted&#39; was not declared in this scope...&quot;. How do I solve this?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 195, "user_id": 5521259, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6cabf84bbde38e55c83f1df35d517335?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Amaro", "link": "https://stackoverflow.com/users/5521259/jo%c3%a3o-amaro"}, "edited": false, "score": 0, "creation_date": 1449760540, "post_id": 34185585, "comment_id": 56155253, "body": "@Jo&#227;oAmaro add --std=c++1y or --std=c++14 to your command line options. <a href=\"http://en.cppreference.com/w/cpp/io/manip/quoted\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/manip/quoted</a>"}, {"owner": {"reputation": 195, "user_id": 5521259, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6cabf84bbde38e55c83f1df35d517335?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Amaro", "link": "https://stackoverflow.com/users/5521259/jo%c3%a3o-amaro"}, "edited": false, "score": 0, "creation_date": 1449761478, "post_id": 34185585, "comment_id": 56155889, "body": "Thank you, it worked. But now it can&#39;t read spi. Says &quot;taking address of array of runtime bound retVal = ioctl (this-&gt;spifd, SPI_IOC_MESSAGE(length), &amp;spi;"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 195, "user_id": 5521259, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6cabf84bbde38e55c83f1df35d517335?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Amaro", "link": "https://stackoverflow.com/users/5521259/jo%c3%a3o-amaro"}, "edited": false, "score": 0, "creation_date": 1449761820, "post_id": 34185585, "comment_id": 56156132, "body": "@Jo&#227;oAmaro what is your compiler version? In any case I have provided another demo that will work with c++11, just in case you have a faulty installation."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1449761520, "last_edit_date": 1449761520, "creation_date": 1449683323, "answer_id": 34185585, "question_id": 34185396, "link": "https://stackoverflow.com/questions/34185396/how-to-convert-a-string-to-json-format-in-c/34185585#34185585", "title": "How to convert a string to json format in c++?", "body": "<p>this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\n#include &lt;vector&gt;\n\nvoid print_values(std::ostream&amp; os, const std::vector&lt;int&gt;&amp; v)\n{\n    using namespace std;\n\n    os &lt;&lt; \"{\\n\";\n    os &lt;&lt; \"\\t\\\"values\\\" : [\";\n    auto sep = \" \";\n    for (const auto&amp; i : v) {\n        os &lt;&lt; sep &lt;&lt; quoted(to_string(i));\n        sep = \", \";\n    }\n    os &lt;&lt; \" ]\\n\";\n    os &lt;&lt; \"}\\n\";\n}\n\nauto main() -&gt; int\n{\n    print_values(std::cout, {1,2,3,4,5,6});\n\n    return 0;\n}\n</code></pre>\n\n<p>results in:</p>\n\n<pre><code>{\n    \"values\" : [ \"1\", \"2\", \"3\", \"4\", \"5\", \"6\" ]\n}\n</code></pre>\n\n<p>update:</p>\n\n<p>this version will behave correctly with a c++11 compiler (and highlights some 'new' features of c++14 - but let's not live in the stone age too long eh?)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\n#include &lt;vector&gt;\n\n#if __cplusplus &gt;= 201402L\n#else\nstd::string quoted(const std::string&amp; s) {\n    using namespace std;\n    return string(1, '\"') + s + '\"';\n}\n#endif\n\nvoid print_values(std::ostream&amp; os, const std::vector&lt;int&gt;&amp; v)\n{\n    using namespace std;\n\n    os &lt;&lt; \"{\\n\";\n    os &lt;&lt; \"\\t\\\"values\\\" : [\";\n    auto sep = \" \";\n    for (const auto&amp; i : v) {\n        os &lt;&lt; sep &lt;&lt; quoted(to_string(i));\n        sep = \", \";\n    }\n    os &lt;&lt; \" ]\\n\";\n    os &lt;&lt; \"}\\n\";\n}\n\n\nauto main() -&gt; int\n{\n    using namespace std;\n\n    print_values(cout,\n#if __cplusplus &gt;= 201402L\n                 {1,2,3,4,5,6}\n#else\n                 []() -&gt; vector&lt;int&gt; {\n                     vector&lt;int&gt; v;\n                     for (int i = 1 ; i &lt; 7 ; ++i )\n                         v.push_back(i);\n                     return v;\n                 }()\n#endif\n                 );\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 192, "user_id": 4999407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2e3f8bb510a9d4f6a9accc8e9d9b6d16?s=128&d=identicon&r=PG", "display_name": "eldruin", "link": "https://stackoverflow.com/users/4999407/eldruin"}, "is_accepted": false, "score": 0, "last_activity_date": 1449683851, "creation_date": 1449683851, "answer_id": 34185759, "question_id": 34185396, "link": "https://stackoverflow.com/questions/34185396/how-to-convert-a-string-to-json-format-in-c/34185759#34185759", "title": "How to convert a string to json format in c++?", "body": "<p>As you appear to be using C++ and the STL in an embedded system, I would recommend you using <a href=\"https://github.com/kazuho/picojson/\" rel=\"nofollow\">picojson</a>. It is just a 1-header library and would be better than implementing the serialization yourself with some string manipulation. If you do so, it will get uglier later on if you extend your json output.</p>\n"}], "owner": {"reputation": 195, "user_id": 5521259, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6cabf84bbde38e55c83f1df35d517335?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Amaro", "link": "https://stackoverflow.com/users/5521259/jo%c3%a3o-amaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1328, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1449761520, "creation_date": 1449682769, "question_id": 34185396, "link": "https://stackoverflow.com/questions/34185396/how-to-convert-a-string-to-json-format-in-c", "title": "How to convert a string to json format in c++?", "body": "<p>So I'm reading some values from a sensor via SPI. I already converted those values to a string (don't know if I should but I was trying something). Now I can't convert them to json format.\nHere is my code:</p>\n\n<pre><code>#include \"ad7490Spi.h\"\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n\nusing namespace std;\n\nstring IntToString (int a2dVal) \n{\n    ostringstream oss;  \n    oss &lt;&lt; a2dVal;  \n    return oss.str();\n}\n\nint main(void)\n{\n    ad7490Spi a2d(\"/dev/spidev0.0\", SPI_MODE_0, 1000000, 16);\n    int i = 5;\n    int a2dVal = 0; \n    int a2dChannel = 0;\n    unsigned char data[3];      \n\n    while(i &gt; 0)\n    {\n        data[0] = 1;  //  first byte transmitted -&gt; start bit\n        data[1] = 0b1000000000000000 |( ((a2dChannel &amp; 15) &lt;&lt; 4)); // second byte transmitted -&gt; (SGL/DIF = 1, D2=D1=D0=0)\n        data[2] = 0; // third byte transmitted....don't care\n\n        a2d.spiWriteRead(data, sizeof(data) );\n\n        a2dVal = 0;\n                a2dVal = (data[1]&lt;&lt; 8) &amp; 0b1100000000; //merge data[1] &amp; data[2] to get result\n                a2dVal |=  (data[2] &amp; 0xff);\n        sleep(1);\n\n        i--;        \n\n    string result = IntToString (a2dVal);\n    cout &lt;&lt; \" \" + result + \" \";\n\n    }\n\nreturn 0;\n}\n</code></pre>\n\n<p>This is the result: </p>\n\n<pre><code>1023 1023 1023 1023 1023\n</code></pre>\n\n<p>I want the result to be this way: </p>\n\n<pre><code>{\n  \"values\": [ \"1023\", \"1023\", \"1023\", \"1023\", \"1023\" ]\n}\n</code></pre>\n\n<p>Can you guys help me with this?</p>\n"}, {"tags": ["c++", "coupling"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1449683564, "post_id": 34185392, "comment_id": 56117553, "body": "These are not standard terms in C++. You need to ask whoever used them."}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1449683584, "post_id": 34185392, "comment_id": 56117574, "body": "It&#39;s not 100% clear how those concepts map to C++."}], "owner": {"reputation": 127, "user_id": 5185425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c8fa2b2b244d76f4892a8f0050c3736c?s=128&d=identicon&r=PG&f=1", "display_name": "Black Dragon", "link": "https://stackoverflow.com/users/5185425/black-dragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1449682753, "creation_date": 1449682753, "question_id": 34185392, "link": "https://stackoverflow.com/questions/34185392/difference-between-hidden-scattered-and-specified-coupling", "title": "Difference between hidden, scattered and specified coupling?", "body": "<p>What is the difference between these types of component coupling and when should one prefer a specific type over the others?</p>\n"}, {"tags": ["c++", "dictionary", "keyvaluepair"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1449682831, "post_id": 34185385, "comment_id": 56117071, "body": "Why not use a <code>std::sting</code> instead of a <code>char *</code>.  If you use a <code>std::string</code> the built in comparison operator should work."}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1449682974, "post_id": 34185385, "comment_id": 56117136, "body": "<code>std::pair</code> does not take a comparison operator.  They are already defined in terms of the pair&#39;s components."}, {"owner": {"reputation": 1575, "user_id": 1673206, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/19382512e78f5e497f0dfbd170a09837?s=128&d=identicon&r=PG", "display_name": "user1673206", "link": "https://stackoverflow.com/users/1673206/user1673206"}, "edited": false, "score": 0, "creation_date": 1449686394, "post_id": 34185385, "comment_id": 56119319, "body": "I cant use string because all the data I get is char *, and I can&#39;t be sure that the the char * will not contain any &#39;0&#39; that will interrupt the comparison of strings- if I will convert the char * to string"}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1449696209, "post_id": 34185385, "comment_id": 56124773, "body": "In this case, how about using a <code>std::vector&lt;unsigned char&gt;</code>?  You can compare vectors for equality, less than and greater than (it compares its elements lexicographically, like a string does) and won&#39;t care about having <code>&#39;\\0&#39;</code> in the middle."}], "answers": [{"comments": [{"owner": {"reputation": 1575, "user_id": 1673206, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/19382512e78f5e497f0dfbd170a09837?s=128&d=identicon&r=PG", "display_name": "user1673206", "link": "https://stackoverflow.com/users/1673206/user1673206"}, "edited": false, "score": 0, "creation_date": 1449686159, "post_id": 34185543, "comment_id": 56119181, "body": "so how can I be sure that the <code>pair_t data (someCharArr, someIntVector);</code> will find the correct key?"}], "tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 1, "last_activity_date": 1449684187, "last_edit_date": 1449684187, "creation_date": 1449683235, "answer_id": 34185543, "question_id": 34185385, "link": "https://stackoverflow.com/questions/34185385/compare-function-for-pair/34185543#34185543", "title": "Compare function for pair", "body": "<p><code>std::pair</code> is just a struct with two members, It have no comparison object built in.</p>\n\n<p>You may be confused for a comparison object given for <code>std::map</code> (which in its turn, holds sequence of std::pair).</p>\n"}, {"tags": [], "owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "is_accepted": false, "score": 2, "last_activity_date": 1449696670, "creation_date": 1449696670, "answer_id": 34189377, "question_id": 34185385, "link": "https://stackoverflow.com/questions/34185385/compare-function-for-pair/34189377#34189377", "title": "Compare function for pair", "body": "<p>You seem to be confused about responsibilities of different classes.  It's not the <code>std::pair</code> that needs to worry about how to compare pairs together, it's the <code>std::map</code> who needs to worry about how to sort its keys.</p>\n\n<pre><code>    typedef std::map&lt;unsigned char*, std::vector&lt;int&gt;, myCmp&gt; map_t;\n</code></pre>\n\n<p>From how you implement the comparison function and your comment on why you can't use strings, I actually recommend using a <code>std::array</code> instead of a <code>unsigned char *</code>.  Your code then looks more like:</p>\n\n<pre><code>    typedef std::map&lt;std::array&lt;unsigned char, 10&gt;, std::vector&lt;int&gt; &gt; map_t;\n</code></pre>\n\n<p>This works because <code>std::array</code> implements <a href=\"http://en.cppreference.com/w/cpp/container/array/operator_cmp\" rel=\"nofollow\">all the comparison operators</a> allowing you to use them as keys in a map.</p>\n\n<p>This is going off of the fact that you seem to know the length of your array at compile time, and that it is always 10.  If you don't actually know the length of your arrays at compile time, then you would use a <code>std::vector&lt;unsigned char&gt;</code> instead of the <code>std::array</code>.</p>\n"}], "owner": {"reputation": 1575, "user_id": 1673206, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/19382512e78f5e497f0dfbd170a09837?s=128&d=identicon&r=PG", "display_name": "user1673206", "link": "https://stackoverflow.com/users/1673206/user1673206"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1102, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1535791112, "creation_date": 1449682717, "last_edit_date": 1535791112, "question_id": 34185385, "link": "https://stackoverflow.com/questions/34185385/compare-function-for-pair", "title": "Compare function for pair", "body": "<p>I have a pair: <code>typdef pair &lt;unsigned char *, vector&lt;int&gt;&gt; pair_t</code></p>\n\n<p>I need to implement my own comparison function for that map, so I tried :</p>\n\n<pre><code>struct myCmp\n{\n   int operator()(unsigned char arr_1[10], unsigned char arr_2[10])\n   {\n    return memcmp(arr_1, arr_2, 10);\n   }\n};\n\ntypdef pair &lt;unsigned char *, vector&lt;int&gt;, **myCmp**&gt; pair_t;\npair_t data(someCharArr, someIntVector);\n</code></pre>\n\n<p>The error message I get is:</p>\n\n<blockquote>\n  <p>wrong number of template argument (3 should be 2)</p>\n</blockquote>\n\n<p>I did the same thing with <code>map</code> and it was fine.</p>\n\n<p>How can create my own compare function for pair?</p>\n\n<p>How can I be sure that the pair_t data(someCharArr, someIntVector); will find the correct key (in case of char * as key)?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 8, "creation_date": 1449682670, "post_id": 34185286, "comment_id": 56116968, "body": "What would <i>you</i> expect from calling a function with some side effect (producing output in this case) during a compile-time evaluation?"}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1449682777, "post_id": 34185286, "comment_id": 56117042, "body": "@5gon12eder When I write <code>if (f()) {...}</code>, I would like the compiler to get rid of that branch during the optimization phase, since f() is guaranteed at compile-time to return <code>true</code>."}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1449682851, "post_id": 34185286, "comment_id": 56117079, "body": "@AlwaysLearning So you want the compiler to execute the side effects of <code>g</code> but eliminate the branch?"}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1449682911, "post_id": 34185286, "comment_id": 56117110, "body": "@interjay True, but this restriction was lifted in C++14 while the conceptual problem remains."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "reply_to_user": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1449683063, "post_id": 34185286, "comment_id": 56117198, "body": "@MarkB What&#39;s wrong with that? Isn&#39;t it known at compile-time that f() returns <code>true</code>? So, if the client writes <code>if (!f())</code>, can&#39;t the compiler know that the condition will not be satisfied?"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1449683063, "post_id": 34185286, "comment_id": 56117199, "body": "@5gon12eder My comment refers to the fact that the function had two different return types specified."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1449683214, "post_id": 34185286, "comment_id": 56117302, "body": "@5gon12eder The function referred to in the title refers to <code>g</code>, which does return <code>void</code>."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1449684593, "post_id": 34185286, "comment_id": 56118180, "body": "Note, you may get <a href=\"http://stackoverflow.com/q/22176777/1708801\">gcc to accept non-constexpr function</a> that have builtins but it is still ill-formed and not portable."}], "answers": [{"comments": [{"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1449683577, "post_id": 34185591, "comment_id": 56117566, "body": "In my case, <code>g</code> is a template argument. I wanted to allow <code>g</code> to return either <code>void</code> or <code>bool</code>. I tag-dispatch on the return type of <code>g</code>. The code I showed is for the case when <code>g</code> returns <code>void</code>. When <code>g</code> returns <code>bool</code>, I return <code>g()</code>, which is then used in a conditional statement. I wanted to avoid branching in the case when <code>g</code> returns <code>void</code>."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1449684225, "post_id": 34185591, "comment_id": 56117953, "body": "The reply does answer the question as it was asked, so accepting it. I will ask another question that will provide all the relevant details."}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": true, "score": 3, "last_activity_date": 1449683350, "creation_date": 1449683350, "answer_id": 34185591, "question_id": 34185286, "link": "https://stackoverflow.com/questions/34185286/can-a-constexpr-function-call-a-function-that-returns-void/34185591#34185591", "title": "Can a constexpr function call a function that returns void?", "body": "<p>The point of constexpr is that it can be fully expanded at compile-time. There is no possible way that the compiler can put runtime side effects (using <code>cout</code>) into what is effectively a more complex compile-time constant. Put another way: No actual function call will be made at runtime for <code>constexpr</code> functions!</p>\n\n<p>Luckily the solution is easy!</p>\n\n<p>Change <code>f</code> to <code>constexpr bool f() { return true;}</code></p>\n\n<p>and your conditional to:</p>\n\n<pre><code>g();\nif(f())\n{\n    // ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "is_accepted": false, "score": 1, "last_activity_date": 1449684193, "creation_date": 1449684193, "answer_id": 34185868, "question_id": 34185286, "link": "https://stackoverflow.com/questions/34185286/can-a-constexpr-function-call-a-function-that-returns-void/34185868#34185868", "title": "Can a constexpr function call a function that returns void?", "body": "<p>Any evaluation of a function called during the evaluation of a constant expression must not have any side effects. In C++11, the rules are actually much stricter, allowing only a single <code>return</code> statement as function body but that's not relevant to this question.</p>\n\n<p>The compiler is not entitled to remove any code from a <code>constexpr</code> function in order to make it comply. It is your responsibility to not write such code in the first place.</p>\n\n<p>However, it is okay to have code with side effects inside a <code>constexpr</code> function if the control flow during static evaluation never passes through it.</p>\n\n<p>This is valid C++11.</p>\n\n<pre><code>void g() { std::cout &lt;&lt; \"hello, world\" &lt;&lt; std::endl; }\nconstexpr bool f(const bool p = false) { return p ? (g(), false) : true; }\n</code></pre>\n\n<p>And you may call <code>f</code> like this.</p>\n\n<pre><code>constexpr auto x = f();  // ok\n</code></pre>\n\n<p>Because <code>p</code> is <code>false</code> at compile-time, the compiler need not evaluate the call to <code>g</code>. At run-time, you may call <code>f</code> with either argument just as if it were not a <code>constexpr</code> function.</p>\n\n<pre><code>f(false);  // ok\nf(true);   // ok, produces output at run-time \n</code></pre>\n\n<p>What you cannot do is evaluate it in a constant expression with the parameter set to <code>true</code>.</p>\n\n<pre><code>constexpr auto x = f(true);  // compile-time error\n</code></pre>\n\n<p>Of course, this example is contrived beyond any restrictions and you should simply write</p>\n\n<pre><code>constexpr bool f() noexcept { return true; }\n</code></pre>\n\n<p>or use a variable</p>\n\n<pre><code>constexpr auto toggle = true;\n</code></pre>\n\n<p>if this is all you need.</p>\n"}], "owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 0, "accepted_answer_id": 34185591, "answer_count": 2, "score": 0, "last_activity_date": 1449684193, "creation_date": 1449682418, "last_edit_date": 1449682798, "question_id": 34185286, "link": "https://stackoverflow.com/questions/34185286/can-a-constexpr-function-call-a-function-that-returns-void", "title": "Can a constexpr function call a function that returns void?", "body": "<p>This is what I would like to do:</p>\n\n<pre><code>void g() {\n    std::cout &lt;&lt; \"smth1\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"smth2\" &lt;&lt; std::endl;\n}\n\nconstexpr bool f() {return g(), true;}\n</code></pre>\n\n<p>The compiler (<code>gcc</code> version 4.8.2) is not happy with this, since <code>g</code> is not <code>constexpr</code>. Is it possible to get around this problem?</p>\n"}, {"tags": ["c++", "makefile"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1449682697, "post_id": 34185263, "comment_id": 56116984, "body": "I belived <code>$(LISTS)-before:</code> is being expanded to <code>toto titi tutu-before:</code> which is probably not what you want.."}, {"owner": {"reputation": 97, "user_id": 4256397, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7ffa0d298beec7978c1d95d029c39a03?s=128&d=identicon&r=PG&f=1", "display_name": "r2d2leboss", "link": "https://stackoverflow.com/users/4256397/r2d2leboss"}, "reply_to_user": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1449686113, "post_id": 34185263, "comment_id": 56119158, "body": "Yes it&#39;s not what I want, I would like <code>toto-before titi-before tutu-before</code>. In this case, why it works with only one target ?"}], "answers": [{"tags": [], "owner": {"reputation": 97, "user_id": 4256397, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7ffa0d298beec7978c1d95d029c39a03?s=128&d=identicon&r=PG&f=1", "display_name": "r2d2leboss", "link": "https://stackoverflow.com/users/4256397/r2d2leboss"}, "is_accepted": true, "score": 0, "last_activity_date": 1449686744, "creation_date": 1449686744, "answer_id": 34186630, "question_id": 34185263, "link": "https://stackoverflow.com/questions/34185263/makefile-target-conflict/34186630#34186630", "title": "Makefile target conflict", "body": "<p>Thanks to @anon-mail</p>\n\n<p>The issue was suffix. A working solution is </p>\n\n<pre><code>LISTS = toto titi tutu\n\nbefore: $(LISTS:=-before)\nbuild: $(LISTS:=-build)\n\n$(LISTS:=-before):\n    $(MAKE) -C $(subst -before,,$@) before\n\n$(LISTS:=-build):\n    $(MAKE) -C $(subst -before,,$@) build\n\n.PHONY:$(LISTS:=-before) $(LISTS:=-build)\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 4256397, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7ffa0d298beec7978c1d95d029c39a03?s=128&d=identicon&r=PG&f=1", "display_name": "r2d2leboss", "link": "https://stackoverflow.com/users/4256397/r2d2leboss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 34186630, "answer_count": 1, "score": 0, "last_activity_date": 1449686744, "creation_date": 1449682363, "question_id": 34185263, "link": "https://stackoverflow.com/questions/34185263/makefile-target-conflict", "title": "Makefile target conflict", "body": "<p>I get conflicts with my Makefile when there are more than 2 targets. I guess the issue is the name of the targets.\nSo, I have 3 folders, each one containing a Makefile. I want to call all of them. I defined a list (LISTS) containing the list of folders. When I run </p>\n\n<pre><code>make before\n</code></pre>\n\n<p>I want that (top level) Makefile runs \"make before\" in all folders. This code works fine, it does the job</p>\n\n<pre><code>LISTS = toto titi tutu\n\nbefore: $(LISTS)-before\nbuild: $(LISTS)-build\n\n$(LISTS)-before:\n    $(MAKE) -C $(subst -before,,$@) before\n\n.PHONY:$(LISTS)-before\n</code></pre>\n\n<p>Now, when I add a new target, it's bugged, for example :</p>\n\n<pre><code>LISTS = toto titi tutu\n\nbefore: $(LISTS)-before\nbuild: $(LISTS)-build\n\n$(LISTS)-before:\n    $(MAKE) -C $(subst -before,,$@) before\n\n$(LISTS)-build:\n    $(MAKE) -C $(subst -before,,$@) build\n\n.PHONY:$(LISTS)-before $(LISTS)-build\n</code></pre>\n\n<p>When I call still the same command as before (the result should be the same)</p>\n\n<pre><code>make before\n</code></pre>\n\n<p>I get : </p>\n\n<pre><code>warning: overriding recipe for target `toto'\nwarning: ignoring old recipe for target `toto'\n</code></pre>\n\n<p>and I can see it runs </p>\n\n<pre><code>make build\n</code></pre>\n\n<p>I don't get why it try to run second target, I never called it. Thanks for your help.</p>\n"}, {"tags": ["c++", "templates", "inheritance", "vector"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1449682194, "post_id": 34185134, "comment_id": 56116684, "body": "forward declarations are your friend."}, {"owner": {"reputation": 93, "user_id": 5616598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2xEyDy6nEyw/AAAAAAAAAAI/AAAAAAAAALI/6gLfZwoO86c/photo.jpg?sz=128", "display_name": "DefinitelyNotMe", "link": "https://stackoverflow.com/users/5616598/definitelynotme"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1449682336, "post_id": 34185134, "comment_id": 56116781, "body": "@RichardHodges You mean declaring before defining? Yes they are indeed. I am sorry if I come off as dense, but does that help me for the conversion?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1449682564, "post_id": 34185134, "comment_id": 56116916, "body": "added a complete compilable example as an answer."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5616598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2xEyDy6nEyw/AAAAAAAAAAI/AAAAAAAAALI/6gLfZwoO86c/photo.jpg?sz=128", "display_name": "DefinitelyNotMe", "link": "https://stackoverflow.com/users/5616598/definitelynotme"}, "edited": false, "score": 0, "creation_date": 1449682657, "post_id": 34185325, "comment_id": 56116959, "body": "Thank you very much! That is indeed quite different than what I tried to do."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 93, "user_id": 5616598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2xEyDy6nEyw/AAAAAAAAAAI/AAAAAAAAALI/6gLfZwoO86c/photo.jpg?sz=128", "display_name": "DefinitelyNotMe", "link": "https://stackoverflow.com/users/5616598/definitelynotme"}, "edited": false, "score": 0, "creation_date": 1449682821, "post_id": 34185325, "comment_id": 56117062, "body": "@DefinitelyNotMe just one last thing... don&#39;t do this. You are essentially duplicating the role of const and mutable which already exist as keywords. This is un-necessary. a &quot;fixed_vector&quot; is just a &quot;const variable_vector&quot;."}, {"owner": {"reputation": 93, "user_id": 5616598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2xEyDy6nEyw/AAAAAAAAAAI/AAAAAAAAALI/6gLfZwoO86c/photo.jpg?sz=128", "display_name": "DefinitelyNotMe", "link": "https://stackoverflow.com/users/5616598/definitelynotme"}, "edited": false, "score": 0, "creation_date": 1449683055, "post_id": 34185325, "comment_id": 56117187, "body": "Well, that&#39;s pretty much what I thought at first, but I don&#39;t have much of a choice since this is part of a greater project, and apparently both are needed. The future holds the answers I suppose."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 93, "user_id": 5616598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2xEyDy6nEyw/AAAAAAAAAAI/AAAAAAAAALI/6gLfZwoO86c/photo.jpg?sz=128", "display_name": "DefinitelyNotMe", "link": "https://stackoverflow.com/users/5616598/definitelynotme"}, "edited": false, "score": 0, "creation_date": 1449683386, "post_id": 34185325, "comment_id": 56117420, "body": "Tell your lead developer that I wish him luck :-)"}, {"owner": {"reputation": 93, "user_id": 5616598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2xEyDy6nEyw/AAAAAAAAAAI/AAAAAAAAALI/6gLfZwoO86c/photo.jpg?sz=128", "display_name": "DefinitelyNotMe", "link": "https://stackoverflow.com/users/5616598/definitelynotme"}, "edited": false, "score": 0, "creation_date": 1449683416, "post_id": 34185325, "comment_id": 56117442, "body": "I am sorry, just a small question. In your implementation, both the fixed and variable classes use the same template, but in my case one of the templates has an additional argument (that defines the fixed vector&#39;s size), and that argument comes as not declared when I&#39;m trying to declare the constructor. Is there a way to fix that?  edit- He is my teacher :D I will add that somewhere in my comments then"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 93, "user_id": 5616598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2xEyDy6nEyw/AAAAAAAAAAI/AAAAAAAAALI/6gLfZwoO86c/photo.jpg?sz=128", "display_name": "DefinitelyNotMe", "link": "https://stackoverflow.com/users/5616598/definitelynotme"}, "edited": false, "score": 0, "creation_date": 1449683471, "post_id": 34185325, "comment_id": 56117491, "body": "yes, what I am showing you is how to lay out the declarations. I will modify the example code to include a size on the fixed one. One moment."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 93, "user_id": 5616598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2xEyDy6nEyw/AAAAAAAAAAI/AAAAAAAAALI/6gLfZwoO86c/photo.jpg?sz=128", "display_name": "DefinitelyNotMe", "link": "https://stackoverflow.com/users/5616598/definitelynotme"}, "edited": false, "score": 0, "creation_date": 1449684018, "post_id": 34185325, "comment_id": 56117822, "body": "@DefinitelyNotMe updated. now includes size in fixed template type, and shows you how to lay out the binary operators."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 0, "last_activity_date": 1449683977, "last_edit_date": 1449683977, "creation_date": 1449682520, "answer_id": 34185325, "question_id": 34185134, "link": "https://stackoverflow.com/questions/34185134/converting-from-one-template-class-to-another-both-derived-from-the-same-base-c/34185325#34185325", "title": "Converting from one template class to another (both derived from the same base class)", "body": "<p>Forward declaration, possibly two levels of it are required:</p>\n\n<pre><code>#include &lt;cstdint&gt;\n\ntemplate&lt;class Elem&gt;\nstruct base\n{\n\n};\n\n// forward declare classes\ntemplate&lt;class Elem&gt; struct variable;\ntemplate&lt;class Elem, size_t N&gt; struct fixed;\n\n//forward declare members\ntemplate&lt;class Elem&gt; struct variable : base&lt;Elem&gt;\n{\n    variable() = default;\n    template&lt;size_t N&gt; variable(const fixed&lt;Elem, N&gt;&amp; r);\n\n    variable&amp; operator += (const variable&amp; r);\n\n    template&lt;size_t N&gt;\n    variable&amp; operator += (const fixed&lt;Elem, N&gt;&amp; r);\n\n};\n\ntemplate&lt;class Elem, size_t N&gt; struct fixed : base&lt;Elem&gt;\n{\n    fixed() = default;\n\n};\n\n// define members\n\ntemplate&lt;class Elem&gt;\ntemplate&lt;size_t N&gt;\nvariable&lt;Elem&gt;::variable(const fixed&lt;Elem, N&gt;&amp; r)\n{\n    // implementation here\n}\n\ntemplate&lt;class Elem&gt;\nauto variable&lt;Elem&gt;::operator += (const variable&amp; r) -&gt; variable&amp;\n{\n    // implementation here\n    return *this;\n}\n\ntemplate&lt;class Elem&gt;\ntemplate&lt;size_t N&gt;\nauto  variable&lt;Elem&gt;::operator += (const fixed&lt;Elem, N&gt;&amp; r) -&gt; variable&amp;\n{\n    // implementation here\n    return *this;\n}\n\n\nusing namespace std;\n\nauto main() -&gt; int\n{\n    fixed&lt;double, 10&gt; fd;\n    variable&lt;double&gt; vd(fd);\n\n    vd += fd;\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 5616598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2xEyDy6nEyw/AAAAAAAAAAI/AAAAAAAAALI/6gLfZwoO86c/photo.jpg?sz=128", "display_name": "DefinitelyNotMe", "link": "https://stackoverflow.com/users/5616598/definitelynotme"}, "edited": false, "score": 0, "creation_date": 1449683798, "post_id": 34185334, "comment_id": 56117702, "body": "Perhaps I don&#39;t understand templates well enough, but wouldn&#39;t it be similiar to creating an object with different template parameters? The size of the fixed vector can be changed, it just is part of the parameters one has to give when creating an object using the template. Wouldn&#39;t that be the same when using conversion? Just giving to the template the variable vector&#39;s size as parameter."}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": false, "score": 0, "last_activity_date": 1449682572, "creation_date": 1449682572, "answer_id": 34185334, "question_id": 34185134, "link": "https://stackoverflow.com/questions/34185134/converting-from-one-template-class-to-another-both-derived-from-the-same-base-c/34185334#34185334", "title": "Converting from one template class to another (both derived from the same base class)", "body": "<p>I don't see a way to convert from a <code>Vect_variable</code> to a <code>Vect_fixe</code>, the latter requires the size to be a template argument (so constant at compile time), but the only way to obtain the size of a <code>Vect_variable</code> is at runtime.</p>\n\n<p>But I don't see any particular problems in converting from <code>Vect_fixe</code> to <code>Vect_variable</code>:</p>\n\n<pre><code>template&lt;std::size_t size&gt; Vect_variable(const Vect_fixe&lt;elem,size&gt;&amp; other) : Vect_variable(size)\n{ \n  for (int i = 0; i &lt; size; ++i)\n  {\n    (*this)[i] = other[i];\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 5616598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2xEyDy6nEyw/AAAAAAAAAAI/AAAAAAAAALI/6gLfZwoO86c/photo.jpg?sz=128", "display_name": "DefinitelyNotMe", "link": "https://stackoverflow.com/users/5616598/definitelynotme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 34185325, "answer_count": 2, "score": 0, "last_activity_date": 1449683977, "creation_date": 1449681957, "question_id": 34185134, "link": "https://stackoverflow.com/questions/34185134/converting-from-one-template-class-to-another-both-derived-from-the-same-base-c", "title": "Converting from one template class to another (both derived from the same base class)", "body": "<p>I've searched around but couldn't find an answer to my question. I've been trying for some time now to make a conversion constructor to work in my derived classes, but I can't make it work no matter what I do.</p>\n\n<p>To make it simple, I've got an abstract base class and two (soon more) derived classes that both use templates (they are vectors so they use templates to accept more than one type of element). One is a vector whose size is determined by a template parameter, and the other's size depends on the parameter used to create the object.</p>\n\n<p>I want to be able to convert from one to the other using a conversion constructor. Here are the declarations for both classes. I think I should skip the implementation of the functions, since they are long and in my opinion irrelevant to the question, but if you think it's necessary, I will add it to the rest.</p>\n\n<p><strong>This is the dynamic vector class</strong></p>\n\n<pre><code>template &lt;class elem&gt;\nclass Vect_variable : public Vect&lt;elem&gt;\n{\n    template &lt;class T&gt;\n        friend std::ostream&amp; operator&lt;&lt; (std::ostream&amp;, const Vect_variable&lt;T&gt;&amp;);\n\n    template &lt;class T&gt;\n        friend Vect_variable&lt;T&gt;&amp; operator+ (T, const Vect_variable&lt;T&gt;&amp;);\n        // Pour les operations x+vecteur et pas vecteur+x avec int x\n\n    template &lt;class T&gt;\n        friend Vect_variable&lt;T&gt;&amp; operator- (T, const Vect_variable&lt;T&gt;&amp;);\n        // Pour les operations x+vecteur et pas vecteur+x avec int x\n\n    template &lt;class T&gt;\n        friend Vect_variable&lt;T&gt;&amp; operator* (T, const Vect_variable&lt;T&gt;&amp;);\n        // Pour les operations x+vecteur et pas vecteur+x avec int x\n\n    public:\n        Vect_variable(std::size_t sz = 0): taille(sz), vecteur(new elem[sz]) {};\n        Vect_variable(std::size_t, const elem&amp;);\n        Vect_variable(const Vect_variable&amp;);\n        Vect_variable(Vect_variable&amp;&amp;);\n        Vect_variable&amp; operator=(const Vect_variable&amp;);\n        virtual elem&amp; operator[] (std::ptrdiff_t nIndex);\n        virtual const elem&amp; operator[] (std::ptrdiff_t nIndex) const;\n        virtual Vect_variable&amp; operator+(); // + unaire\n        virtual Vect_variable&amp; operator-(); // - unaire\n        virtual Vect_variable&amp; operator+(const elem&amp;); // + compos. par compos.\n        virtual Vect_variable&amp; operator-(const elem&amp;); // - compos. par compos.\n        virtual Vect_variable&amp; operator*(const elem&amp;); // * compos. par compos.\n        virtual Vect_variable&amp; operator+=(const elem&amp;); // + compos. par compos.\n        virtual Vect_variable&amp; operator-=(const elem&amp;); // - compos. par compos.\n        virtual Vect_variable&amp; operator*=(const elem&amp;); // * compos. par compos.\n        Vect_variable&amp; operator+(const Vect_variable&amp;); // + vect dynam.\n        Vect_variable&amp; operator-(const Vect_variable&amp;); // - vect dynam.\n        Vect_variable&amp; operator*(const Vect_variable&amp;); // * vect dynam.\n        Vect_variable&amp; operator+=(const Vect_variable&amp;); // + vect dynam.\n        Vect_variable&amp; operator-=(const Vect_variable&amp;); // - vect dynam.\n        Vect_variable&amp; operator*=(const Vect_variable&amp;); // * vect dynam.\n        ~Vect_variable () {delete[] vecteur ;}\n\n    private:\n        elem* vecteur;\n        std::size_t taille;\n};\n</code></pre>\n\n<p><strong>And here is the vector whose size is fixed by a template parameter</strong></p>\n\n<pre><code>template &lt;class elem, std::size_t taille=10&gt;\n\nclass Vect_fixe: public Vect&lt;elem&gt;\n{\n    template &lt;class T, std::size_t D&gt;\n        friend std::ostream&amp; operator&lt;&lt; (std::ostream&amp;, const Vect_fixe&lt;T, D&gt;&amp;);\n\n    template &lt;class T, std::size_t D&gt;\n        friend Vect_fixe&lt;T,D&gt;&amp; operator+ (T, const Vect_fixe&lt;T, D&gt;&amp;);\n        // Pour les operations x+vecteur et pas vecteur+x avec int x\n\n    template &lt;class T, std::size_t D&gt;\n        friend Vect_fixe&lt;T,D&gt;&amp; operator- (T, const Vect_fixe&lt;T, D&gt;&amp;);\n        // Pour les operations x+vecteur et pas vecteur+x avec int x\n\n    template &lt;class T, std::size_t D&gt;\n        friend Vect_fixe&lt;T,D&gt;&amp; operator* (T, const Vect_fixe&lt;T, D&gt;&amp;);\n        // Pour les operations x+vecteur et pas vecteur+x avec int x\n\n\n    public:\n        Vect_fixe() = default;\n        Vect_fixe(const elem&amp;);\n        virtual elem&amp; operator[] (std::ptrdiff_t nIndex);\n        virtual const elem&amp; operator[] (std::ptrdiff_t nIndex) const;\n        virtual Vect_fixe&amp; operator+() ; // + unaire\n        virtual Vect_fixe&amp; operator-(); // - unaire\n        virtual Vect_fixe&amp; operator+(const elem&amp;); // + compos. par compos.\n        virtual Vect_fixe&amp; operator-(const elem&amp;); // - compos. par compos.\n        virtual Vect_fixe&amp; operator*(const elem&amp;); // * compos. par compos.\n        virtual Vect_fixe&amp; operator+=(const elem&amp;); // + compos. par compos.\n        virtual Vect_fixe&amp; operator-=(const elem&amp;); // - compos. par compos.\n        virtual Vect_fixe&amp; operator*=(const elem&amp;); // * compos. par compos.\n        Vect_fixe&amp; operator+(const Vect_fixe&amp;); // + vecteur meme taille\n        Vect_fixe&amp; operator-(const Vect_fixe&amp;); // - vecteur meme taille\n        Vect_fixe&amp; operator*(const Vect_fixe&amp;); // * vecteur meme taille\n        Vect_fixe&amp; operator+=(const Vect_fixe&amp;); // + vecteur meme taille\n        Vect_fixe&amp; operator-=(const Vect_fixe&amp;); // - vecteur meme taille\n        Vect_fixe&amp; operator*=(const Vect_fixe&amp;); // * vecteur meme taille\n\n        std::size_t get_size();\n        elem get_vecteur();\n\n    private:\n        elem vecteur[taille] = {0};\n        std::size_t size = taille;\n\n};\n</code></pre>\n\n<p>So I tried using a constructor that takes a parameter of the other class' type, however that doesn't seem to work because some of the template arguments from the other class are not declared (?), and if I declare them it just keeps saying invalid template parameter. I've toyed around a lot but I couldn't figure out the right way to do it. The vast knowledge of the internet was lacking (or perhaps my own researching ability was lacking), but I'm stuck.</p>\n\n<p>Anyway, the general idea behind this is to use something of the sort:</p>\n\n<pre><code>Vect_variable(Vect_fixe&lt;elem, taille&gt;)\n</code></pre>\n\n<p>Or eventually any other way to convert from one type to the other.</p>\n"}, {"tags": ["c++", "matlab", "opencv", "svm"], "comments": [{"owner": {"reputation": 337, "user_id": 3865073, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/199c82999c9ebdbb0b47206354b39153?s=128&d=identicon&r=PG&f=1", "display_name": "Knipser", "link": "https://stackoverflow.com/users/3865073/knipser"}, "edited": false, "score": 0, "creation_date": 1449731539, "post_id": 34184828, "comment_id": 56137178, "body": "You use the default settings for <code>train_auto</code> with a RBF-Kernel. Do you use the default settings for <code>fitcsvm</code> as well?  Because <a href=\"http://de.mathworks.com/help/stats/fitcsvm.html?requestedDomain=www.mathworks.com\" rel=\"nofollow noreferrer\">matlab</a> uses a linear Kernel by default... (Input Arguments -&gt; KernelFunction) Maybe that is the difference."}, {"owner": {"reputation": 31, "user_id": 5660195, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClWp3.jpg?s=128&g=1", "display_name": "Alium", "link": "https://stackoverflow.com/users/5660195/alium"}, "reply_to_user": {"reputation": 337, "user_id": 3865073, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/199c82999c9ebdbb0b47206354b39153?s=128&d=identicon&r=PG&f=1", "display_name": "Knipser", "link": "https://stackoverflow.com/users/3865073/knipser"}, "edited": false, "score": 0, "creation_date": 1449742409, "post_id": 34184828, "comment_id": 56143292, "body": "Thanks for your comment, sir. I agree with you, but even when I specify the type of kernel in Matlab by typing <code>fitcsvm(Data(:,[1:16]),Targets(ind), &#39;KernelFunction&#39;,&#39;rbf&#39;, ...)</code>, I still get much better results than in OpenCV, with a misclassification rate of only 16%. Moreover, training OpenCV&#39;s SVM using a linear kernel still outputs very poor results."}], "owner": {"reputation": 31, "user_id": 5660195, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClWp3.jpg?s=128&g=1", "display_name": "Alium", "link": "https://stackoverflow.com/users/5660195/alium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 447, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1449697775, "creation_date": 1449681010, "last_edit_date": 1449697775, "question_id": 34184828, "link": "https://stackoverflow.com/questions/34184828/opencvs-svm-outputs-a-high-misclassification-rate-when-matlab-does-classifies", "title": "OpenCV&#39;s SVM outputs a high misclassification rate, when Matlab does classifies data correctly", "body": "<p>I am currently working on a project which partly relies on OpenCV's Support Vector Machines (SVMs).</p>\n\n<p>In this project, I consider a train database of 454 images, equally divided into two classes : blurred, or sharp. My aim is to determine whether an input image is blurred, according to a set of 16 descriptors adapted from the academic literature.</p>\n\n<p>These descriptors are computed for all the images of the database. Then, I train a SVM with the obtained data to predict the blurredness of an image, using OpenCV's <code>train_auto</code> function. Besides, in order to check the relevance of the classification, I perform an algorithm of cross-validation on the train database : 80 % of the images are randomly picked up to train the SVM while the remaining 20 % are used to test it. Again, both train and test images are equally split into blurred and non blurred images.</p>\n\n<p>Now, it happens that this SVM is not correctly trained. Indeed, the same label is attributed to all the images, leading to a misclassification rate of 50 %. I am now trying to find and unterstand the cause of this phenomenon, which is all the more surprising that, if I use the <code>fitcsvm</code> function with the same dataset in Matlab, this misclassification ratio drops to 10.05 %. So, a priori, the data <em>can</em> actually be separated by the SVM : but, for some reason, OpenCV cannot find the right parameters to tune and train the SVM.</p>\n\n<p>My implementation is below :</p>\n\n<pre><code>int main() {\n    // Reads descriptors\n    // A [0 .. 226] : examples of descriptors for images of class 0 (blurred)\n    // A [227 .. 453] : examples of descriptors for images of class 1 (sharp)\n    Mat A = readData(\"data_train_16.txt\");\n    // Shuffles the indices\n    std::vector&lt;int&gt; t;\n    t.reserve(227);\n    for (int i = 0 ; i &lt; 227 ; i++) t.push_back(i);\n    FisherYatesShuffle(t);\n    // Selects 80 % of the indices to train a SVM\n    int n = 0.8 * 227;\n    trainData = Mat(2 * n, 16, CV_32F);\n    for (int i = 0 ; i &lt; n ; i++) {\n        A.row(t[i]).copyTo(trainData.row(i));\n        A.row(227 + t[i]).copyTo(trainData.row(i + n));\n    }\n    // So we have :\n    // trainData [0 .. n - 1] : examples of descriptors for images of class 0\n    // trainData [n .. 2 * n] : examples of descriptors for images of class 1\n    labels = Mat(2 * n, 1, CV_32S, Scalar::all(0));\n    labels.rowRange(0, n).setTo(0);\n    labels.rowRange(n, 2 * n).setTo(1);\n    // Trains the SVM\n    CvSVM svm;\n    svm.train_auto(trainData, labels, Mat(), Mat(), CvSVMParams());\n    // Tests the SVM on the remaining 20% images\n    int ok_0 = 0, ok_1 = 0;\n    int terms = t.size() - n;\n    for (int i = n ; i &lt; t.size() ; i++) {\n        Mat D;\n        int answer;\n        // Tests if a blurred image is marked as 'blurred' by the SVM\n        A.row(t[i]).copyTo(D);\n        answer = int(svm.predict(D));\n        if (answer == 0) ok_0++;\n        // Tests if a sharp image is marked as 'sharp' by the SVM\n        A.row(227 + t[i]).copyTo(D);\n        answer = int(svm.predict(D));\n        if (answer == 1) ok_1++;\n    }\n    // Outputs some info\n    CvSVMParams params = svm.get_params();\n    std::cout &lt;&lt; \"SVM type : \" &lt;&lt; params.svm_type &lt;&lt; \", kernel : \" &lt;&lt; params.kernel_type &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"C : \" &lt;&lt; params.C &lt;&lt; \", nu : \" &lt;&lt; params.nu &lt;&lt; \", deg : \" &lt;&lt; params.degree &lt;&lt; \", gamma : \" &lt;&lt; params.gamma &lt;&lt; \", coef0 : \" &lt;&lt; params.coef0 &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Class 0 : \" &lt;&lt; ok_0 &lt;&lt; \"/\" &lt;&lt; terms &lt;&lt; \" (\" &lt;&lt; 100.0f * float(ok_0) / float(terms) &lt;&lt; \" %), \";\n    std::cout &lt;&lt; \"Class 1 : \" &lt;&lt; ok_1 &lt;&lt; \"/\" &lt;&lt; terms &lt;&lt; \" (\" &lt;&lt; 100.0f * float(ok_1) / float(terms) &lt;&lt; \" %)\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Total : \" &lt;&lt; 100.0f * float(ok_0 + ok_1) / float(2 * terms) &lt;&lt; \" %\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Output :</p>\n\n<pre><code>SVM type : 100 [i.e. C_SVM], kernel : 2 [i.e. RBF]\nC : 2.5, nu : 0, deg : 0, gamma : 0.50625, coef0 : 0\nClass 0 : 0/46 (0 %), Class 1 : 46/46 (100 %)\n</code></pre>\n\n<p>Such a ratio leads me to think that, to be labelled as 0, a point should be very close to the existing points already marked as 0. So, instead of having a <a href=\"http://i.stack.imgur.com/Toj92.png\" rel=\"nofollow\">well-trained SVM like this</a>, I suspect the current situation to be similar to <a href=\"http://i.stack.imgur.com/jc2tk.jpg\" rel=\"nofollow\">that one</a>. The two figures represent 2D SVMs trained with the same dataset (approximately, I just outputted them at different times). Blue dots represent points of the class 0, red dots, points of the class 1. In the second figure, you can see that, due to bad parameters for the SVM's kernel, we'll have the following situation : even if a point of class 0 (i.e. a blue point) falls near many other blue points, let's say in the bottom left corner of the figure, that point will be misclassified anyway since it will fall in the red zone, corresponding to class 1. This is not the case in the first figure, where the margins are correctly computed.</p>\n\n<p>I think it's the same problem here. And it doesn't tell me why Matlab's <code>fitcsvm</code> succeeds in classifying the data, when OpenCV's <code>train_auto</code> doesn't.</p>\n\n<p>I tried to :</p>\n\n<ul>\n<li>check the contents of the <code>trainData</code> and <code>labels</code> matrices : everything is normal</li>\n<li>normalize the data for each variable : no changes</li>\n<li>use <code>CvParamGrid</code> structures in the <code>train_auto</code> function, and set some parameters to fixed values by setting the parameter <code>step</code> to 0 : no changes</li>\n<li>change <code>params.term_crit</code> in <code>train_auto</code> and increase the number of iterations for OpenCV's optimization problem solver : no changes</li>\n<li>decrease the dimensionality of the data and use only 2 components : the algorithm works with a misclassification rate of approximately 16 or 17 % (I obtained a similar value with Matlab).</li>\n</ul>\n\n<p>Do you have any advices, any trails to explain this strange behavior of my code ? Thanks you in advance !</p>\n\n<p>_</p>\n\n<p>[Edit] Minor changes (fixed some grammatical errors, added some extra explanations).</p>\n"}, {"tags": ["c++", "git"], "comments": [{"owner": {"reputation": 7268, "user_id": 2303202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/iT9aU.png?s=128&g=1", "display_name": "max630", "link": "https://stackoverflow.com/users/2303202/max630"}, "edited": false, "score": 0, "creation_date": 1449940143, "post_id": 34184660, "comment_id": 56226928, "body": "For most production scenarios I&#39;d choose running git binary through system and popen as most reliable way."}, {"owner": {"reputation": 255, "user_id": 5371582, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/SMmMG.png?s=128&g=1", "display_name": "Laurent Claessens", "link": "https://stackoverflow.com/users/5371582/laurent-claessens"}, "reply_to_user": {"reputation": 7268, "user_id": 2303202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/iT9aU.png?s=128&g=1", "display_name": "max630", "link": "https://stackoverflow.com/users/2303202/max630"}, "edited": false, "score": 0, "creation_date": 1450033911, "post_id": 34184660, "comment_id": 56251899, "body": "That&#39;s what I ended to do, but it does not seem very clean. For example, in order to get the list of untracked files, I have to perform some ugly string manipulations on the output of &quot;git status&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "is_accepted": false, "score": 0, "last_activity_date": 1449681028, "creation_date": 1449681028, "answer_id": 34184835, "question_id": 34184660, "link": "https://stackoverflow.com/questions/34184660/using-git-inside-c-rpogram-gitlib2-qt/34184835#34184835", "title": "Using git inside C++ rpogram (gitlib2 ? QT ?)", "body": "<p>It looks like <code>gitqlib2</code> is a wrapper for <a href=\"https://libgit2.github.com/\" rel=\"nofollow\">https://libgit2.github.com/</a>.  Depending on your needs, you can use <code>libgit2</code> directly since it's a C library.</p>\n\n<p>I see that <code>gitqlib2</code> does have a <code>Doxygen.in</code> file, so running <code>Doxygen</code> on the source code may produce some documentation if you want to use the C++ wrapper.</p>\n"}], "owner": {"reputation": 255, "user_id": 5371582, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/SMmMG.png?s=128&g=1", "display_name": "Laurent Claessens", "link": "https://stackoverflow.com/users/5371582/laurent-claessens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1449685920, "creation_date": 1449680543, "last_edit_date": 1449685920, "question_id": 34184660, "link": "https://stackoverflow.com/questions/34184660/using-git-inside-c-rpogram-gitlib2-qt", "title": "Using git inside C++ rpogram (gitlib2 ? QT ?)", "body": "<p>I need to do basic 'git' manipulations inside a C++ program (git add, commit, status ...)</p>\n\n<p>I heard about <a href=\"https://projects.kde.org/projects/playground/libs/libqgit2/\" rel=\"nofollow\">gitqlib2</a> but I did not found any documentation or examples.</p>\n\n<p>What is the best way of using git inside a c++ program ?</p>\n\n<p>I'm ok to use QT and Boost libraries. If not, I can code a wrapper over 'popen', but it should be a pity.</p>\n\n<p><strong>EDIT</strong> : Since it is for a course project, the only external libraries that I'm allowed to use are the boost ones.</p>\n"}, {"tags": ["c++", "templates", "nested"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1449680499, "post_id": 34184565, "comment_id": 56115501, "body": "<code>r</code> will have to publish <code>Ts...</code>. It&#39;s a non-deduced context otherwise."}], "answers": [{"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1449683296, "creation_date": 1449683296, "answer_id": 34185571, "question_id": 34184565, "link": "https://stackoverflow.com/questions/34184565/templated-class-whose-argument-must-be-another-templated-class/34185571#34185571", "title": "Templated class whose argument must be another templated class", "body": "<p>First, there's no way to deduce <code>Ts...</code> from a specialization of <code>r</code> without its cooperation. So let's publish the type:</p>\n\n<pre><code>template&lt;typename...Ts&gt; struct s\n{\n    template&lt;int...Is&gt; struct r\n    {\n        using outer_type = s;\n    };\n};\n</code></pre>\n\n<p>Then extract with partial specialization</p>\n\n<pre><code>template&lt;class T, class = typename T::outer_type, class = T&gt;\nstruct q;\n\ntemplate&lt;template &lt;int...&gt; class R, class...Ts, int...Is&gt;\nstruct q&lt;R&lt;Is...&gt;, s&lt;Ts...&gt;, typename s&lt;Ts...&gt;::template r&lt;Is...&gt;&gt;{\n};\n</code></pre>\n"}], "owner": {"reputation": 6365, "user_id": 4385532, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0573709d0b88e4b50af0e28c3e96873b?s=128&d=identicon&r=PG&f=1", "display_name": "gaazkam", "link": "https://stackoverflow.com/users/4385532/gaazkam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1449683296, "creation_date": 1449680244, "question_id": 34184565, "link": "https://stackoverflow.com/questions/34184565/templated-class-whose-argument-must-be-another-templated-class", "title": "Templated class whose argument must be another templated class", "body": "<p>Well, this is what I'm trying to achieve. I have a struct like this:</p>\n\n<pre><code>template&lt;typename...Ts&gt; struct s\n{\n    template&lt;int...Is&gt; struct r\n    {\n        // whatever\n    };\n};\n</code></pre>\n\n<p>Now I'd like to write one more templated structure:</p>\n\n<pre><code>template&lt;typename r&gt; struct q\n{\n    //\n};\n</code></pre>\n\n<p>The template should accept specialisations of <code>struct r</code> and I'd like to have access to template arguments of this instantiation.</p>\n\n<p>To make myself more clear: I'd like to be able to write something like this:</p>\n\n<pre><code>using some_specialisation_of_q = q&lt; s&lt;T1,T2,T3&gt;::r&lt;5,6,7&gt; &gt;;\nsome_specialisation_of_q varname;\n</code></pre>\n\n<p>AND I'd like to be able to have access to <code>T1,T2,T3</code>, <code>5,6,7</code> (or any other template arguments passed to specialize <code>s</code> and <code>r</code>) in the definition of <code>q</code>.</p>\n\n<p>My first attempt was something like that:</p>\n\n<pre><code>template&lt;template&lt;typename...Ts&gt; template&lt;int...Is&gt; typename R, typename= typename std::enable_if&lt;std::is_same&lt;R, s&lt;Ts...&gt;::r&lt;Is...&gt;&gt;::value&gt;::type&gt;\nstruct q\n{\n    //\n}\n</code></pre>\n\n<p>But unfortunately this produces compiler errors.</p>\n\n<p>How can this be achieved?</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1449681835, "post_id": 34184519, "comment_id": 56116434, "body": "is sobeled a 8 bit single channel image? If it is really a sobel output, then probably it is floating point or 16 bit signed matrix."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 2, "creation_date": 1449682307, "post_id": 34184519, "comment_id": 56116756, "body": "You&#39;re probably using debug libs in release, or viceversa. Or libs built with another compiler. Have you rebuilt opencv with vc14?"}, {"owner": {"reputation": 33, "user_id": 4776256, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/895ff4ad4d4af40155a1a55b21d068ef?s=128&d=identicon&r=PG&f=1", "display_name": "Varg Nord", "link": "https://stackoverflow.com/users/4776256/varg-nord"}, "edited": false, "score": 0, "creation_date": 1449688232, "post_id": 34184519, "comment_id": 56120388, "body": "I checked and found I did use release libs in debug.Thanks a lot!"}], "owner": {"reputation": 33, "user_id": 4776256, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/895ff4ad4d4af40155a1a55b21d068ef?s=128&d=identicon&r=PG&f=1", "display_name": "Varg Nord", "link": "https://stackoverflow.com/users/4776256/varg-nord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 405, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1449680100, "creation_date": 1449680100, "question_id": 34184519, "link": "https://stackoverflow.com/questions/34184519/heap-corruption-in-opencv-using-findcontours", "title": "&quot;heap corruption&quot; in OpenCV using findContours()", "body": "<p>I am going to find text region of an image using OpenCV(C++ in VS 2015). But when running my debugger throws \"Access violation reading location\". I located where occurs error:</p>\n\n<pre><code>std::vector&lt;std::vector&lt;cv::Point&gt; &gt; contours;\ncv::findContours(sobeled, contours, CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE);\n</code></pre>\n\n<p><code>cv::Mat sobeled</code> is a processed grayscale image, which displays well in imshow() function.</p>\n\n<p>Also I checked call stack, it was \"ntdll.dll!_RtlFreeHeap@12()\" on the top.</p>\n\n<p>So I wonder how to deal with this problem. Thanks for help!</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1449680172, "post_id": 34184319, "comment_id": 56115288, "body": "so you want to subtract only the inner part of the image from itself? and that inner part goes from pixel location (50,50) to (250,250)?"}], "answers": [{"comments": [{"owner": {"reputation": 5543, "user_id": 583464, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d523405d41e973a5aeef1c378f8f19f1?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/583464/george"}, "edited": false, "score": 0, "creation_date": 1449682091, "post_id": 34184654, "comment_id": 56116618, "body": ":Great,thanks!( the 2nd version I wasn&#39;t able to run it because it gave me <code>Mat\u2019 has no member named \u2018inRange\u2019</code>)"}, {"owner": {"reputation": 5543, "user_id": 583464, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d523405d41e973a5aeef1c378f8f19f1?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/583464/george"}, "edited": false, "score": 0, "creation_date": 1449682790, "post_id": 34184654, "comment_id": 56117049, "body": ":Ok, it&#39;s working now ,thanks.I wanted to ask , in the first version ,can we fill the whiteArea <code>setTo(Scalar(0,0,0));</code> with garbage values?Nan values or something?And still have an image where I can do computations?( I  am just asking now! :) )"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "reply_to_user": {"reputation": 5543, "user_id": 583464, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d523405d41e973a5aeef1c378f8f19f1?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/583464/george"}, "edited": false, "score": 0, "creation_date": 1449683433, "post_id": 34184654, "comment_id": 56117456, "body": "nan is only defined for floating point values. integer types dont know sth. like that. So either convert to float/double and set to nan or remember where you know garbage to be (e.g. a mask) and give that information to following processing steps (then it might be more  convenient to mask not the garbage but the &quot;good&quot; pixel)"}], "tags": [], "owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "is_accepted": true, "score": 2, "last_activity_date": 1449682302, "last_edit_date": 1449682302, "creation_date": 1449680534, "answer_id": 34184654, "question_id": 34184319, "link": "https://stackoverflow.com/questions/34184319/substract-region-from-image-and-keep-the-borders/34184654#34184654", "title": "substract region from image and keep the borders", "body": "<p>try to use subimages or use a mask:</p>\n\n<pre><code>// use a roi (nice if your target area is rectangular and you know the position)\nRect whiteArea = Rect(50,50, 200,200); // creates a roi of the inner rect\n\nMat FinalImage = ImageInitial.clone();\n// now set the roi area to zero:\nFinalImage (whiteArea).setTo(Scalar(0,0,0));\n// or FinalImage(whiteArea) = FinalImage(whiteArea) - FinalImage(whiteArea);\n\nimshow(\"version 1 with subimage\", FinalImage);\nwaitkey(0);\n\n\n// or use a mask (nice if that region can has arbitrary shape etc and you have to extract it first):\nScalar lowerColorBound = Scalar(x,y,z); //some BGR values to find the color you want to eliminate\nScalar upperColorBound = Scalar(a,b,c); //some BGR values to find the color you want to eliminate\nMat mask;\ninRange(ImageInitial, lowerColorBound, upperColorBound  mask)\n// use the mask for subtraction:\nsubtract(ImageInitial, ImageInitial, FinalImage , mask);\n\nimshow(\"version 2 with mask\", FinalImage);\nwaitkey(0);\n</code></pre>\n"}], "owner": {"reputation": 5543, "user_id": 583464, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d523405d41e973a5aeef1c378f8f19f1?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/583464/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 34184654, "answer_count": 1, "score": 2, "last_activity_date": 1449682302, "creation_date": 1449679629, "question_id": 34184319, "link": "https://stackoverflow.com/questions/34184319/substract-region-from-image-and-keep-the-borders", "title": "substract region from image and keep the borders", "body": "<p>I have a 200x200 pixels image and I want to keep only the data for a certain region inside it.\nCheck the following image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dxzNY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dxzNY.png\" alt=\"Image\"></a></p>\n\n<p>The whole out square is 200x200 pixels.I want to remove from it the smaller square(white).So ,keep only the information that is included in the blue area.But , I want to keep the 200x200 dimensions.</p>\n\n<p>I tried:</p>\n\n<pre><code>    Mat whiteArea;\n    whiteArea = ImageInitial( Range(50,200) , Range(50,200) );\n\n    Size size(200,200);\n    Mat dst;\n    resize(whiteArea,dst,size);\n\n    Mat FinalImage;\n    subtract(ImageInitial,dst,FinalImage); \n</code></pre>\n\n<p>I am resizing the white area because I want to substract it from the initial image.\nMy problem is that it gives me the initial image.</p>\n\n<p>Maybe the resize is the problem .but then how to substract 2 different sized images?</p>\n"}, {"tags": ["c++", "c++11", "gzip", "poco", "poco-libraries"], "comments": [{"owner": {"reputation": 31, "user_id": 1308193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae5153b3dd6d8edd20b05ff54932279d?s=128&d=identicon&r=PG", "display_name": "User12344", "link": "https://stackoverflow.com/users/1308193/user12344"}, "edited": false, "score": 0, "creation_date": 1449767200, "post_id": 34184302, "comment_id": 56159843, "body": "Hellooo can someone help me to solve the above issue"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 1308193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae5153b3dd6d8edd20b05ff54932279d?s=128&d=identicon&r=PG", "display_name": "User12344", "link": "https://stackoverflow.com/users/1308193/user12344"}, "edited": false, "score": 0, "creation_date": 1450025517, "post_id": 34233945, "comment_id": 56248832, "body": "Is there any method like truncate to erase the data using the position in deflating stream as well ?"}], "tags": [], "owner": {"reputation": 4504, "user_id": 205386, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/870668e636ef0dee2a380bfa4efccfc0?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/205386/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1449874809, "creation_date": 1449874809, "answer_id": 34233945, "question_id": 34184302, "link": "https://stackoverflow.com/questions/34184302/how-to-find-the-index-in-pocodeflatingoutputstream/34233945#34233945", "title": "How to find the index in Poco::DeflatingOutputStream", "body": "<p>You can use any standard C++ stream functions with Poco streams. </p>\n\n<p><code>streampos pos = ofstr-&gt;tellp()</code></p>\n"}], "owner": {"reputation": 31, "user_id": 1308193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae5153b3dd6d8edd20b05ff54932279d?s=128&d=identicon&r=PG", "display_name": "User12344", "link": "https://stackoverflow.com/users/1308193/user12344"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449874809, "creation_date": 1449679564, "last_edit_date": 1449848670, "question_id": 34184302, "link": "https://stackoverflow.com/questions/34184302/how-to-find-the-index-in-pocodeflatingoutputstream", "title": "How to find the index in Poco::DeflatingOutputStream", "body": "<p>Hi I am new to usage of Poco , can you please help me to find a way to get the index/position during the writing into deflating stream so that I can truncate the invalid data and make sure my file contains only valid data.</p>\n\n<pre><code>    #include &lt;stdexcept&gt;\n    #include &lt;stdarg.h&gt;\n    #include &lt;map&gt;\n    #include &lt;iostream&gt;\n    #include &lt;cstring&gt;\n    #include &lt;fstream&gt;\n    #include &lt;Poco/DeflatingStream.h&gt;\n    #include &lt;stdio.h&gt;\n    #include &lt;limits&gt;\n    #include &lt;stdio.h&gt;\n    #include &lt;unistd.h&gt;\n    using namespace std;\n\n        std::ofstream* ostr;\n        Poco::DeflatingOutputStream* ofstr;\n        string fileName=\"/home/lamb/Cpp/simple.gzip\";\n        bool written = false;\n        // int lastsucessfulwrite;\n\n    compress(){\n        *ofstr &lt;&lt; \"\\t&lt;xyz&gt;\\n\";\n        *ofstr &lt;&lt; \"\\t&lt;/xyz&gt;\\n\";\n        *ofstr &lt;&lt; \" who=\\\"\";\n        *ofstr &lt;&lt; \"/&gt;\\n\";\n    written = true;\n    /* \"lastsucessfulwrite\" How to store the index of ofstr , in case of normal files we use ftell but in DeflatingOutputStream how to get index so that I can erase it later based on this value */\n    }\n\n    timer(){\n    sleep(2);\n    // 2 second \n    written = false ;\n    }\n\n    close(){\n        ofstr-&gt;close();\n        delete ofstr;\n        ofstr = NULL;\n        ostr-&gt;close();\n        delete ostr;\n        ostr = NULL;\n    }\n\n\n    int main(){\n\n        ostr = new std::ofstream;\n        ostr-&gt;exceptions(std::ofstream::failbit|std::ofstream::badbit);\n        ostr-&gt;open(_fileName.c_str(), std::ios::binary | std::ios::app);\n        ofstr = new Poco::DeflatingOutputStream(*_ostr,         \n        Poco::DeflatingStreamBuf::STREAM_GZIP);\n        ofstr-&gt;precision(std::numeric_limits&lt;double&gt;::digits10);\n        string data1 = \"hello';\n        string data2 = \"hello';\n        string data3 = \"hello';\n    written = false ;\n    timer()//start\n    compress(data1);\n    if(written)\n    {\n    compress(data2);\n    }\n\n    if(written)\n    {\n    compress(data2);\n    }\n\n    if(written)\n    {\n    compress(data3);// timeup and time() is inovked and part of compress() is executed \n    }\n    // Now I would like to use lastsucessfulwrite as the key and truncate the paritally witten data3\n    // In case of normal file we use \"truncate\" system call\n\n     close();\n    }\n</code></pre>\n"}]