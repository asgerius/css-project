[{"tags": ["c++", "x86", "sse", "simd", "avx"], "answers": [{"comments": [{"owner": {"reputation": 5328, "user_id": 1525061, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/b671721393d55dd00c01daaec6efd13e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1525061/thomas"}, "edited": false, "score": 0, "creation_date": 1468457194, "post_id": 38363677, "comment_id": 64139946, "body": "the blend method is actually probably the fastest cause although it&#39;s 12 ops it may be less than 12 cycles with throughput, more simple than what i thought of too. I thought briefly about this and just kind of forgot about it cause I like to see if the more intricate things are faster i guess"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 5328, "user_id": 1525061, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/b671721393d55dd00c01daaec6efd13e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1525061/thomas"}, "edited": false, "score": 1, "creation_date": 1468461299, "post_id": 38363677, "comment_id": 64140787, "body": "@Volatile: 12 uops?  The brute-force way I described was only 7 uops (AND after merging), with 6c latency on pre-Skylake.  I came up with a better way that&#39;s only 5 uops.  It has better latency on pre-Skylake (5c), and still 5c latency on SKL."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 5328, "user_id": 1525061, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/b671721393d55dd00c01daaec6efd13e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1525061/thomas"}, "edited": false, "score": 1, "creation_date": 1468463248, "post_id": 38363677, "comment_id": 64141196, "body": "@Volatile: I looked at the mul version: it&#39;s only 2 uops on SnB/IvB, and avoids the AND if you take advantage of the shifting to knock off the bits we want to get rid of.  Worth considering, esp. if you can make a separate AVX2 version so you don&#39;t need to run it on Haswell and later."}, {"owner": {"reputation": 5328, "user_id": 1525061, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/b671721393d55dd00c01daaec6efd13e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1525061/thomas"}, "edited": false, "score": 0, "creation_date": 1468467584, "post_id": 38363677, "comment_id": 64142076, "body": "You&#39;re totally right it was 7uops, I realized that too when I went to implement. Your new 5uops way is very clever, I like it. Although the mul version is 2 ops, I don&#39;t think I care as much for throughput/codesize than I do for latency right now. Very well thought-out answer. I might consider AVX2 in future, but to my target audience which is basically steam users <a href=\"http://store.steampowered.com/hwsurvey\" rel=\"nofollow noreferrer\">store.steampowered.com/hwsurvey</a>). Most of em have AVX, but since AVX512 came out recently I&#39;m guessing most don&#39;t have it (steam survey does not a flag for avx512 support unfortunately)."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 5328, "user_id": 1525061, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/b671721393d55dd00c01daaec6efd13e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1525061/thomas"}, "edited": false, "score": 3, "creation_date": 1468467797, "post_id": 38363677, "comment_id": 64142133, "body": "@Volatile: If you have to do runtime CPU dispatching anyway (for users without AVX), there&#39;s no extra overhead for also having an AVX2 version.  (Of course it&#39;s more code that you have to debug).  re: AVX512: Nobody has AVX512 on their desktop CPU.  The only hardware with it ATM is 2nd-gen Xeon Phi cards (Knight&#39;s Landing).  The first &quot;regular&quot; CPUs with it will be Skylake-E (many-core Xeon, not the current quad-core Xeons that use the same silicon as regular Skylake)."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 1, "creation_date": 1468609940, "post_id": 38363677, "comment_id": 64215375, "body": "@PeterCordes The Knights Landing chips may be &quot;out&quot;, but interestingly I can&#39;t find any place to buy one aside from Intel&#39;s Ninja developer platform. IOW, probably not yet available to consumers."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "reply_to_user": {"reputation": 5328, "user_id": 1525061, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/b671721393d55dd00c01daaec6efd13e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1525061/thomas"}, "edited": false, "score": 1, "creation_date": 1468610831, "post_id": 38363677, "comment_id": 64215816, "body": "@Volatile I&#39;m not sure how relevant this is since the population of hardware enthusiasts is very low. But a good number of people (namely overclockers) explicitly disable AVX for thermal reasons. This could become more prevalent with AVX512 if the power-gap between no-AVX and AVX512 widens."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1468611386, "post_id": 38363677, "comment_id": 64216099, "body": "@Mysticial: Does this actually improve FPS in games?  Or is this just a GHz bragging-contest thing?  I guess most games will still have well-optimized SSE4 versions of things, but this may change in the future and CPUs without AVX might only get a not-very-good fallback.  It really annoys me that even Skylake Celeron/Pentium CPUs don&#39;t have AVX or BMI enabled (probably they disable VEX decoding).  Intel is doing a terrible job at making new extensions ubiquitous in the future.  (Also, thanks for the info on KNL.  I wasn&#39;t planning to buy one, so hadn&#39;t kept track of its status.)"}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1468611661, "post_id": 38363677, "comment_id": 64216251, "body": "@PeterCordes I don&#39;t know actually since I&#39;m not one of them. But based on what I&#39;m hearing, AVX is still a little-used extension in games since not everybody has it. So there could be a bit of a cat-and-mouse thing going on where game developers (who don&#39;t want to multi-version) will skip AVX because not everybody has it, and people don&#39;t have AVX because they either disable to get 10-20% higher overclock or like you said, Intel disables them in the lower end chips."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1468611831, "post_id": 38363677, "comment_id": 64216349, "body": "On the topic of Intel disabling AVX, I don&#39;t see that coming to an end. The AVX units probably take up a sizable portion of the chip&#39;s area. So there&#39;s going to be a lot of chips that have defects in the AVX units but not elsewhere. And economics dictates that Intel tries to profit from those as well."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1468612862, "post_id": 38363677, "comment_id": 64216841, "body": "@Mysticial: Yeah, silicon defects in the AVX units is what I suspected too, as the motivation.  It doesn&#39;t make it any less annoying, especially for BMI instructions like <code>andn</code> that aren&#39;t worth runtime dispatching for, and are mostly <a href=\"http://www.realworldtech.com/forum/?threadid=152533&amp;curpostid=152696\" rel=\"nofollow noreferrer\">only useful if they&#39;re part of the baseline</a>.  (Linus Torvalds agreed with me :)"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1468876431, "post_id": 38363677, "comment_id": 64297529, "body": "Can Intel (or anyone) really detect, disable and bin chips with errors in logic portions (eg portions of the chip implementing AVX?). Well really I&#39;m asking about the &quot;detect&quot; part.  I know such detection is common for cache slices, but those can be exhaustively tested because their logical structure is simple. Exhaustively testing execution units, however, runs into an combinatorial explosion of possibilities - even without SIMD: try the testing even a 32x32 to 64bit multiply for example.   Perhaps you can rely on implementation regularies avoid explosion to, but I dunno (IANAEE)."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 1, "creation_date": 1468880095, "post_id": 38363677, "comment_id": 64298984, "body": "@BeeOnRope:  They design tests that cover every transistor, I assume.  Not every combination of signal on distant transistors.  This is probably made easier by testing via internal debug pins (so they can test all duplicated functionality in execution units on different ports.)"}, {"owner": {"reputation": 93, "user_id": 5895988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0zft5.png?s=128&g=1", "display_name": "Veldaeven", "link": "https://stackoverflow.com/users/5895988/veldaeven"}, "edited": false, "score": 0, "creation_date": 1615915710, "post_id": 38363677, "comment_id": 117838405, "body": "@PeterCordes You made the statement, &quot;Can you unroll and interleave so two vectors are in flight at once?&quot; What is magical about Two here? Is it the reciprocal throughput of so many arithmetic instructions is 0.5? Extrapolating, were the pipeline heavily laden with 1/3 recip.thruput instructions, would &quot;two&quot; become &quot;three&quot; for that specific case?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 93, "user_id": 5895988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0zft5.png?s=128&g=1", "display_name": "Veldaeven", "link": "https://stackoverflow.com/users/5895988/veldaeven"}, "edited": false, "score": 1, "creation_date": 1615935191, "post_id": 38363677, "comment_id": 117845794, "body": "@Veldaeven: Nothing magical, just twice as good, and sometimes a power-of-2 unroll is more convenient to calculate sizes for.  It also depends how much ILP the CPU can see within one chain, but if there&#39;s none or not much, you want more dep chains than CPU parallelism so scheduling imperfections don&#39;t lose cycles.  See <a href=\"//stackoverflow.com/q/45113527\">Why does mulss take only 3 cycles on Haswell, different from Agner&#39;s instruction tables? (Unrolling FP loops with multiple accumulators)</a> for a case with VFMA... dep chains: more than 8 is better, even though that&#39;s the latency-bandwidth product."}], "tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 11, "last_activity_date": 1565568969, "last_edit_date": 1565568969, "creation_date": 1468455624, "answer_id": 38363677, "question_id": 38363423, "link": "https://stackoverflow.com/questions/38363423/shifting-4-integers-right-by-different-values-simd/38363677#38363677", "title": "Shifting 4 integers right by different values SIMD", "body": "<p><strong>If AVX2 is available</strong>, this only takes a single efficient instruction.  e.g. <a href=\"https://software.intel.com/sites/landingpage/IntrinsicsGuide/#techs=SSE,SSE2,SSE3,SSSE3,SSE4_1,SSE4_2,AVX,AVX2,SVML,Other&amp;expand=1276,5146,5146,5146&amp;text=vps*vd\" rel=\"nofollow noreferrer\"><code>__m128i _mm_srlv_epi32 (__m128i a, __m128i count)</code></a> (<a href=\"http://felixcloutier.com/x86/VPSRLVW:VPSRLVD:VPSRLVQ.html\" rel=\"nofollow noreferrer\"><code>vpsrlvd</code></a>), and the 256-bit versions. Variable-shifts of 32-bit and 64-bit elements by corresponding count elements are available in left, right-arithmetic, and right-logical.  (Arithmetic right-shift isn't available with 64-bit element size.)</p>\n\n<p><strong>AVX512BW adds 16-bit variable-shifts</strong>.</p>\n\n<p><strong>AVX512VBMI has <a href=\"https://www.felixcloutier.com/x86/vpmultishiftqb\" rel=\"nofollow noreferrer\"><code>vpmultishiftqb</code></a> bitfield-extract within each qword</strong>.  There's an example of using it for <a href=\"https://stackoverflow.com/questions/53823756/how-to-convert-a-number-to-hex\">unpacking 8 nibbles into 8 bytes for int->hex</a>.  For this you'd follow it with an AND mask because it grabs data in 8-bit chunks (but from source positions that don't have to be aligned to byte boundaries).</p>\n\n<hr>\n\n<p><strong>Emulating it without AVX2:</strong></p>\n\n<p>What kind of dependency chain is this part of?  Can you unroll and interleave so two vectors are in flight at once?  Two long dep chains in parallel is much better than one long dep chain, if it's so long that the out-of-order window can't see next dep chain in the next loop iteration.</p>\n\n<hr>\n\n<p>It could be worth making a separate AVX2 version of your function for use on Haswell and later CPUs (where you can use <a href=\"http://www.felixcloutier.com/x86/VPSRLVD:VPSRLVQ.html\" rel=\"nofollow noreferrer\">a variable-shift</a>).  If you do that, your function will only use <code>pmulld</code> (<code>mullo_epi32</code>) on CPUs where it's most efficient.  (i.e. you avoid SSE4.1 <code>mullo_epi32</code> on AVX2 CPUs, because it turns out those CPUs made that instruction slower.)</p>\n\n<p><code>pmulld</code> looks like the best we can do for throughput and fused-domain uop count even on Haswell.</p>\n\n<p>On SnB/IvB where it's a single uop for the vector-integer multiply unit, the whole function is only 2 uops / 6 cycle latency / one per 1c throughput.  (Which is worse than I managed with shift/blend, so you'd only want to use <code>pmulld</code> if throughput/code-size matters at all, and you aren't bottlenecked purely on latency.  e.g. after unrolling.)</p>\n\n<p><strong>If your shift-counts are constants, and you have spare bits at the top of your register, you can multiply by powers of 2 and then use a fixed right-shift</strong>.  <a href=\"https://stackoverflow.com/questions/50108396/shift-right-every-dw-in-a-m128i-by-a-different-amount\">Shift right every DW in a __m128i by a different amount</a>.  Knocking off high bits isn't a problem for your bit-field extract because you're ANDing to keep only the low few bits anyway.</p>\n\n<pre><code>// See the godbolt link below for a version of this with more comments\n// SnB/IvB: 6c latency, 2 fused-domain uops.\n__m128i isolate_successive_6bits_mul (__m128i input)\n{\n  // We can avoid the AND if we shift the elements all the way to the left to knock off the high garbage bits.\n  // 32 - 6 - 18 = 8 extra bits to left shift\n    __m128i mul_constant = _mm_set_epi32(1&lt;&lt;(0+8), 1&lt;&lt;(6+8), 1&lt;&lt;(12+8), 1&lt;&lt;(18+8));\n    __m128i left_vshift = _mm_mullo_epi32(input, mul_constant);\n    __m128i rightshifted = _mm_srli_epi32(left_vshift, (18+8));\n    return rightshifted;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>A smart way with blends:</strong></p>\n\n<p>(Unfortunately we don't have AVX2 <code>vpblendd</code> for efficient dword blends that can run on any port.  <code>pblendw</code> is limited to port 5 on Intel CPUs.  <code>blendps</code> could be good for throughput (runs on any port) but can introduce bypass delays between integer instructions.)</p>\n\n<p><strong>Shift and blend so each element ends up with the right total shift count.</strong></p>\n\n<p>AND-mask the low 6 bits after combining everything into one vector.</p>\n\n<p>Same latency as the brute-force way (see below) on Intel CPUs, and better throughput (because of fewer uops).  Only two immediate-blends tying up port5 is nice.  (AVX2 <code>vpblendd</code> can run on any port, but then we'd just use <code>vpsrlvd</code>.)</p>\n\n<pre><code>// seems to be optimal for Intel CPUs.\n__m128i isolate_successive_6bits (__m128i input)\n{ // input =   [ D      C      B     A ]\n  // output =  [ D&gt;&gt;18  C&gt;&gt;12  B&gt;&gt;6  A ] &amp; set1(0b111111)\n    __m128i right12 = _mm_srli_epi32(input, 12);\n    __m128i merged = _mm_blend_epi16(input, right12, 0xF0);  // copy upper half, like `movhps` (but don't use that because of extra bypass delay)\n    // merged = [ D&gt;&gt;12  C&gt;&gt;12  B&gt;&gt;0  A&gt;&gt;0 ]\n    __m128i right6 = _mm_srli_epi32(merged, 6);\n    merged = _mm_blend_epi16(merged, right6, 0b11001100);    // blend in the odd elements\n    // merged = [ D&gt;&gt;(12+6)  C&gt;&gt;12  B&gt;&gt;(0+6)  A&gt;&gt;0 ]        \n    return _mm_and_si128(merged, _mm_set1_epi32(0b111111));  // keep only the low 6 bits\n}\n</code></pre>\n\n<p>I put <a href=\"http://gcc.godbolt.org/#compilers:!((compiler:g530,options:&#39;-xc+-std%3Dgnu11+-Wall+-Wextra+-O3+-fno-verbose-asm+-march%3Divybridge&#39;,sourcez:MQSwdgxgNgrgJgUwAQB4QFt3gC4CdwB0AFgHwBQZA9JUgOa4ICG2S2RuA9jLUQA4wtGYOKw7ZGUJADMYAZwRwAtHA7pG4JDA69ZAGiS8OHXEijMEkAJ5IOYJAAlGsgO4IokoSLPYEuMgH1/dABGACYADhAkEFkObwR/WRgICARZWRAANwSANgAjEGxZIJhJAApAkIio8H5sAEoyAG8kamiwOqQAXiRegG0kABFekaQAYVHegCFJgEEkAF0yXraubE6epAHBkhJg8N6x3bDp3Zze%2BYWkADIkeWxgsoAGPOC398be5daaTMZ8Rh5KDIYFSbCKWREEBgzQZMC0JCMJDoUrYEC8KCWfRsCxIfA8FiQ6HYb5tADqyAgQkRmQ4IBEOKQswAcsNoUhXHcoTDGW4EOgLEVEe5WERkM5GNZsBxRSCEGDdKSaLFZXiQASucTREg8vh4bL0NrGXkxNLDVIQO5ZMLJIyYLxeL4dYVrc5CkQkAAvXwcCgrGgAZlCSEUSHOof23SQBwQAA88EiCkLpaZ5YTuSTRpUwpFkaV/BBbLJxGAWD0guhEghsP4ELwQEGysEUChngBqcL1fTN1s5DtdpA9puhfvdltN8L9%2BoAbm%2BvWz1VTYP8mSJMPLmBK7g4tfrjdqAn0KKgBaLJYas6zQRzUXxRCKGYUUYriVwUBAu4boTKoJrq4z%2BgTlOl4jAw2AwLgdh3g%2BxIKCB/pgRBdgvp4iQgDmZTQWuPhwPoL73MEn6Ni87wfDO/pIAA1ggdY2GAmKqlAHDOGGzpFGQAC%2BFABNei4xHE5iJMkqTpFkuRJtaFS8bmB4NM0PztBsIzbJM4yqTMoyXEqNgCEpWxDMcBzjMcwZIFMZwXIsNx3NWjwkaRwSfCMC65tBJwbpWshvh%2BdZfmUsndqEM5zkgLlRAKuC0E%2BHn%2BECFhwJ%2BwQ5P5HSHmqBJhPoTyxgAYk85EKYWvDWPajomEQEhSPo77UUgAAG6AcJkfCyHVSBlHkAhICoYAAOQsHIyBsMwOoIFSg02FISBxgmOqWLwTjWogZiWE5FERVFIg9NsJmHLtZm7E8FyHYsIVhel97nDFXnvkR34bQo%2Bg5MFowPVtoWbnFwiJclb36NBORZa8wRPE8bygwVFFfSIGiMhwcAiHyAqlrIIVtG9UY7SQw5ts9e17KZ5nY08uP1MdJBHVcqlICFiGQR9laoRkGF/QzVYPHdzzA6R9QFW01G0bYDGMkxLHnBJnHced/HxEJKRpBk2T%2BPkLr%2BAtuASMC5TS6lcktG0slRv0QyqRMkwaSMWkUWselY5GxkE6cJDnEyVm3ARXMOY5Z3Sbe6qXc%2Bm43T5e7fgFYYvc5vsXQ8wbXd5nPh2EkfztHbkHPHt2%2Bfuuvdp2IE%2B1UuYPUxgeVtDP0pXU/3%2B9ggNIC8oOg%2BD%2BXwaF0cPVCZexcC32%2BUlmG15lMf7EDLdN633yFzeyK%2BJt3cV/3v1z24HBHivUJZblk%2B09WSFs0z6ERGUrP4bZnP2TzfM0ALvB0cLYqmMxrES1xVA0NoaJYN6IhSMYg4GCdNADgEBKKah5OwLgPBOhqGwBAKE%2Bpoaik4NwPgAgeJFxqLEWWSR5aiSVirIoat/iazcMGKSmDFICEaPrGghtNj6WGJMM2owLaWSWNbXSXVNh2yMkcR2B1nbsOsh7S%2BHxp6LgBt3YOidc4RzbudB6V02aL3rAPcOAMgYTxbindulC3JxzZjI7OYc5HJwUR3Fe7kVG9wSkvE%2BK964GK0WDEGTddHnXTtIhOJiq5pX2B4yxkUECRhiqo9Cy9gnD3TmPNxE9gq73AvTFC31mbHweqPIx59fFiLeLzacFFb73ylI/UWL8XSSyAAA%3D)),filterAsm:(commentOnly:!t,directives:!t,intel:!t,labels:!t),version:3\" rel=\"nofollow noreferrer\">both versions on the Godbolt compiler explorer</a>.</p>\n\n<p>This version is only 5 uops, compiled with gcc 5.3 <code>-O3 -march=ivybridge</code>:</p>\n\n<pre><code>    # input in xmm0, result in xmm0\nisolate_successive_6bits:\n    vpsrld          xmm1, xmm0, 12                # starts on cycle 0, result ready for the start of cycle 1\n    vpblendw        xmm0, xmm0, xmm1, 240         # cycle 1\n    vpsrld          xmm1, xmm0, 6                 # cycle 2\n    vpblendw        xmm0, xmm0, xmm1, 204         # cycle 3\n    vpand           xmm0, xmm0, XMMWORD PTR .LC0[rip] # cycle 4, result ready on cycle 5\n    ret\n</code></pre>\n\n<p>Every instruction is dependent on the previous, so it has 5c latency.  SnB/IvB/HSW/BDW CPUs only have one shift port, so they can't take advantage of the parallelism available in the more brute-force version (which does three shifts with different shift counts).  Skylake can, but then the two cycles of blending afterwards eat up the improvement.</p>\n\n<hr>\n\n<p><strong>The \"brute force\" way</strong>:</p>\n\n<p>Do three shifts the three different shift counts, and use three immediate blends (<code>pblendw</code>) to combine the four vectors into one that has each desired element.</p>\n\n<pre><code>// same latency as the previous version on Skylake\n// slower on previous Intel SnB-family CPUs.\nisolate_successive_6bits_parallel:\n    vpsrld          xmm1, xmm0, 6            # cycle 0.   SKL: c0\n    vpsrld          xmm2, xmm0, 12           # cycle 1 (resource conflict on pre-Skylake).  SKL: c0\n    vpblendw        xmm1, xmm0, xmm1, 12     # cycle 2 (input dep).  SKL: c1\n    vpsrld          xmm3, xmm0, 18           # cycle 2.  SKL: c1\n    vpblendw        xmm0, xmm2, xmm3, 192    # cycle 3 (input dep). SKL: c2\n    vpblendw        xmm0, xmm1, xmm0, 240    # cycle 4 (input dep). SKL: c3\n    vpand           xmm0, xmm0, XMMWORD PTR .LC0[rip]  # cycle 5 (input dep). SKL: c4.\n    ret\n</code></pre>\n\n<p>Doing the merging with a linear dependency chain instead of a tree means merging can finish sooner after the last shift result is ready:</p>\n\n<pre><code>isolate_successive_6bits_parallel2:\n    vpsrld          xmm1, xmm0, 6          # c0.  SKL:c0\n    vpsrld          xmm2, xmm0, 12         # c1.  SKL:c0\n    vpblendw        xmm1, xmm0, xmm1, 12   # c2.  SKL:c1\n    vpblendw        xmm1, xmm1, xmm2, 48   # c3.  SKL:c2\n    vpsrld          xmm0, xmm0, 18         # c2.  SKL:c1\n    vpblendw        xmm0, xmm1, xmm0, 192  # c4.  SKL:c3 (dep on xmm1)\n    vpand           xmm0, xmm0, XMMWORD PTR .LC0[rip] # c5.  SKL:c4\n    ret\n</code></pre>\n\n<p>Hmm, nope, doesn't help.  No gain in latency for SnB to BDW, or for SKL.  The first merge can happen after only one shift because the un-shifted input is what we need for one element.  If element 0 needed a non-zero shift count, this way would have an advantage for pre-SKL, and maybe a disadvantage for SKL.</p>\n"}], "owner": {"reputation": 5328, "user_id": 1525061, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/b671721393d55dd00c01daaec6efd13e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1525061/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1816, "favorite_count": 1, "accepted_answer_id": 38363677, "answer_count": 1, "score": 6, "last_activity_date": 1565568969, "creation_date": 1468453463, "last_edit_date": 1468455565, "question_id": 38363423, "link": "https://stackoverflow.com/questions/38363423/shifting-4-integers-right-by-different-values-simd", "title": "Shifting 4 integers right by different values SIMD", "body": "<p>SSE does not provide a way of shifting packed integers by a variable amount (I can use any instructions AVX and older). You can only do uniform shifts. The result I'm trying to achieve for each integer in the vector is this.</p>\n\n<pre><code>i[0] = i[0] &amp; 0b111111;\ni[1] = (i[1]&gt;&gt;6) &amp; 0b111111;\ni[2] = (i[2]&gt;&gt;12) &amp; 0b111111;\ni[3] = (i[3]&gt;&gt;18) &amp; 0b111111;\n</code></pre>\n\n<p>Essentially trying to isolate a different group of 6 bits in each integer.</p>\n\n<p>So what is the optimal solution? </p>\n\n<p>Things I thought about:\nYou can simulate a variable right shift, with a variable left shift and a uniform right shift. I thought about multiplying the packed integers by a different amount each (therefore simulating a left shift). Then with the result, you can do a uniform right shift get the answer. The problem with this the specific op I would use for the multiplication would be <code>_mm_mullo_epi32</code>, which has disappointing latency (10 cycles for haswell), and given my program it would have to wait for the result cause this particular result is a dependency for the next instructions. Overall that method I think would only be a little faster than the brute force method, which is unpack, shift using scalar instructions, and then repack the vector, which would take about 20 cycles I think.</p>\n"}, {"tags": ["c++", "winapi", "serial-port", "timeout", "readfile"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1468452630, "post_id": 38363301, "comment_id": 64138928, "body": "Did it transfer any bytes?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1468452809, "post_id": 38363301, "comment_id": 64138980, "body": "<i>When ReadFile returns true but the dwRead parameter says 0 [...] I conclude that the ReadFile function must have timed out</i> - for a serial port handle, I believe this is a safe conclusion.  If there were any <i>other</i> reason, the call would have failed."}, {"owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "edited": false, "score": 0, "creation_date": 1468453009, "post_id": 38363301, "comment_id": 64139028, "body": "OK, I will use that in my program. At this time I have only the USB-UART converter connected to my laptop, there is no device on the other end of the coverter so data is being read in."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1468456217, "post_id": 38363301, "comment_id": 64139736, "body": "the best way use ZwReadFile. and check iosb.Status - final status of operation. and work with asynchronous handles, without blocking wait"}, {"owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "edited": false, "score": 0, "creation_date": 1468457618, "post_id": 38363301, "comment_id": 64140026, "body": "how are asynchronous handles supposed to help here? basically, PC sends a &quot;serial command&quot; to device I am designing and expects a response within some 100s of ms. If no response comes PC says &quot;error: please check connection to device&quot;. I need to know how to check timeout condition for this reason."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1468458265, "post_id": 38363301, "comment_id": 64140160, "body": "main - in this case you never becomes blocking. ZwReadFile return STATUS_PENDING. when operation completed - looking for iosb.Information (number of bytes readed) and iosb.Status - final status of operation. in case timeout Information will be 0 and Status != 0"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1468464227, "post_id": 38363301, "comment_id": 64141417, "body": "@RbMm: there are some situations in which using the kernel API from user mode is excusable.  This isn&#39;t one of them.  The Win32 API supports asynchronous I/O perfectly well."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1468478320, "post_id": 38363301, "comment_id": 64145617, "body": "ZwReadFile - this is both user and kernel mode API, and better in use then ReadFileEx"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1468532406, "post_id": 38363301, "comment_id": 64179276, "body": "@RbMm: using ZwReadFile from a Win32 application is unsupported.  Just because you prefer the unsupported API doesn&#39;t make it an appropriate choice."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1468533097, "post_id": 38363301, "comment_id": 64179526, "body": "using ZwReadFile from a Win32 application is fully supported, ntdll.dll is only dll in user mode like kernel32,etc. and in case ZwReadFile - all what we need check for STATUS_TIMEOUT. when ReadFile - lost this status."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1468535910, "post_id": 38363301, "comment_id": 64180519, "body": "@RbMm: OK then, please point to the Microsoft documentation stating that this is &quot;fully supported&quot;."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1468536319, "post_id": 38363301, "comment_id": 64180659, "body": "@HarryJohnston are supported and work only what in documentation ? for example i remember time when in documentation written then divers can be written only on c (but not on c++) and build only with make files (but not in VS). really we can free use ntdll.dll export like from any another dll. what you say - only religious taboo - nothing more. unsupported you say - but in what problem use it ?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1468537144, "post_id": 38363301, "comment_id": 64180922, "body": "@HarryJohnston when i post self answer i really at begin very good understand then got only minus for this. but however done from principle and because sure that this solution is the best. this situation very good show advantage of NT api over win32 api - NT return correct code for timeout - STATUS_TIMEOUT and no any problem here at all. but win32 api - lost this status(It does not distinguish it from the 0). and as result confusion and problems. so i describe root of problem and native solution. but of course almost nobody will be use this in self coding"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1468537843, "post_id": 38363301, "comment_id": 64181134, "body": "@RbMm: the unnecessary use of unsupported APIs is cowboy programming, it&#39;s just a very bad idea.  What if the API changes or goes away in a future release of Windows?   All your code will stop working.  If you want to do it this way yourself, nobody&#39;s going to stop you.  But you&#39;re giving out bad advice.  (Nobody&#39;s going to stop you doing that, either, but that doesn&#39;t mean we can&#39;t point out to everybody else that it&#39;s bad advice.)"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1468538308, "post_id": 38363301, "comment_id": 64181252, "body": "@HarryJohnston  if the API changes or goes away in a future release of Windows - api like ZwReadFile very well documented in MSDN and one of the &#39;root&#39; in windows. it not go away or changed. in this case same can say and about ReadFile. but main my goal - describe root of problem - why in using ReadFile hard determinate timeout - because this api LOST information returned from ZwReadFile (and this is common case for win32 API). and many tools may be you know (like for example Sysinternals utilities) wide used NT api and prefect work. all this worked how minimum from win2000 up to latest win10"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1468538805, "post_id": 38363301, "comment_id": 64181400, "body": "@HarryJohnston I think it makes no sense to conduct a philosophical discussion here. from a purely technical point of view - you understand what I wrote (about STATUS_TIMEOUT and LOST it in ReadFile api) and have an objection ?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1468539013, "post_id": 38363301, "comment_id": 64181450, "body": "@RbMm: from a purely technical point of view, no useful information has been lost.  Remy&#39;s answer addresses this already.  You simply don&#39;t <i>need</i> to see the STATUS_TIMEOUT.  It&#39;s an implementation detail, the programmer doesn&#39;t need to know about it, so it is not a sensible answer to this question.  (It might be a sensible answer to a question about the internal implementation.)"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1468539277, "post_id": 38363301, "comment_id": 64181521, "body": "@HarryJohnston - lost. and we need see STATUS_TIMEOUT. this is not internal and undocumented details. however how i view disscussion have no sense. sorry"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1468539451, "post_id": 38363301, "comment_id": 64181558, "body": "@RbMm: I don&#39;t understand why you feel that we need to see the STATUS_TIMEOUT.  The OP seems perfectly happy with Remy&#39;s answer.  But I agree that there is no point in debating it any further."}], "answers": [{"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1468459554, "post_id": 38364013, "comment_id": 64140411, "body": "Very good. Strange design, <i>nicht war</i>? Compare <code>read()</code>: it blocks until at least one byte is transferred or end of stream or an error occured, including a timeout. No nonsense about timeouts <i>between</i> bytes, which makes the timeout value very difficult to establish usefully."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1468460301, "post_id": 38364013, "comment_id": 64140582, "body": "<code>read()</code> can deal with timeouts between bytes, setting a reading timeout can cause it to fail with an <code>ETIMEDOUT</code> error code, same with a blocking <code>recv()</code>. I think an alternative design for <code>ReadFile()</code> would have been for it to fail with an <code>ERROR_TIMEOUT</code> error code."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1468461508, "post_id": 38364013, "comment_id": 64140832, "body": "<code>read()</code> cannot deal with timeouts between bytes, as it will have returned the first bytes received before the timeout. The timeout can only occur <i>before</i> receiving any bytes."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1468498355, "post_id": 38364013, "comment_id": 64158126, "body": "but if use NT api, like NtReadFile - you will got iosb.Status == STATUS_TIMEOUT on timeout - and this is simplest and  most accurate way"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1468458610, "creation_date": 1468458610, "answer_id": 38364013, "question_id": 38363301, "link": "https://stackoverflow.com/questions/38363301/how-do-i-find-out-that-readfile-function-timed-out/38364013#38364013", "title": "How do I find out that ReadFile function timed-out?", "body": "<p>When using <code>SetCommTimeouts()</code> with <code>ReadFile()</code>, the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363190.aspx\" rel=\"nofollow\"><code>COMMTIMEOUTS</code></a> documentation says:</p>\n\n<blockquote>\n  <p><em>ReadIntervalTimeout</em><br>\n  The maximum time allowed to elapse before the arrival of the next byte on the communications line, in milliseconds. <strong>If the interval between the arrival of any two bytes exceeds this amount, the <code>ReadFile</code> operation is completed and any buffered data is returned</strong>. A value of zero indicates that interval time-outs are not used.</p>\n</blockquote>\n\n<p>If a timeout occurs, the read is complete (<code>ReadFile()</code> returns TRUE), and the number of bytes that had been buffered before the timeout elapsed is reflected in your <code>dwRead</code> variable. So, you will know if a timeout occurred if <code>dwRead</code> is <em>less than</em> the number of bytes you asked <code>ReadFile()</code> to read.  If there was no buffered data, <code>dwRead</code> will be 0.  If <code>dwRead</code> is <em>equal to</em> the number of bytes you asked for, there was no timeout since <code>ReadFile()</code> exited when the last requested byte was read.</p>\n"}, {"comments": [{"owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "edited": false, "score": 0, "creation_date": 1468846064, "post_id": 38374191, "comment_id": 64279726, "body": "There sure are a lot of ways of doing things here"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "edited": false, "score": 0, "creation_date": 1468846513, "post_id": 38374191, "comment_id": 64280085, "body": "@quantum231 use native api most accurate way - simply need check final NTSTATUS of operation. in your case - this will be STATUS_TIMEOUT. not need check byte count, GetLastError, etc"}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": false, "score": -4, "last_activity_date": 1468501407, "last_edit_date": 1468501407, "creation_date": 1468499284, "answer_id": 38374191, "question_id": 38363301, "link": "https://stackoverflow.com/questions/38363301/how-do-i-find-out-that-readfile-function-timed-out/38374191#38374191", "title": "How do I find out that ReadFile function timed-out?", "body": "<p>most simplest and accurate way use NT api NtReadFile and check final status of operation. timeout &lt;=> iosb.Status == STATUS_TIMEOUT. kernel32 api ReadFile - lost info for this status(STATUS_TIMEOUT), because it check only for STATUS_PENDING and 0 > status</p>\n\n<p>for synchronous work, can use code like this:</p>\n\n<pre><code>void SyncTest(POBJECT_ATTRIBUTES poa)\n{\n    HANDLE hFile;\n    IO_STATUS_BLOCK iosb;\n    NTSTATUS status = NtOpenFile(&amp;hFile, FILE_ALL_ACCESS, poa, &amp;iosb, FILE_SHARE_VALID_FLAGS, FILE_SYNCHRONOUS_IO_NONALERT);\n    if (0 &lt;= status)\n    {\n        SERIAL_TIMEOUTS st = { 4000, 1, 0, 1, 0 };\n        status = NtDeviceIoControlFile(hFile, 0, 0, 0, &amp;iosb, IOCTL_SERIAL_SET_TIMEOUTS, &amp;st, sizeof(st), 0, 0);\n        DbgPrint(\"time %x[%x,%p]\\n\", status, iosb.Status, iosb.Information);\n        if (0 &lt;= status)\n        {\n            UCHAR buf[256];\n            status = NtReadFile(hFile, 0, 0, 0, &amp;iosb, buf, sizeof(buf), 0, 0);\n            DbgPrint(\"read %x [%x,%p]\\n\", status, iosb.Status, iosb.Information);\n            //assert(status == iosb.Status);\n            if (status == STATUS_TIMEOUT)\n            {\n                DbgPrint(\"timeout\\n\");\n            }\n        }\n        NtClose(hFile);\n    }\n}\n</code></pre>\n\n<p>for asynchronous:</p>\n\n<pre><code>class __declspec(novtable) IoObject \n{\n    friend class UserIrp;\nprotected:\n    HANDLE _hFile;\nprivate:\n    LONG _dwRef;\n\nprotected:\n    virtual ~IoObject()\n    {\n        if (_hFile) NtClose(_hFile);\n    }\n    virtual void OnIoComplete(NTSTATUS status, ULONG_PTR Information, ULONG code, PVOID pv) = 0;\npublic:\n\n    NTSTATUS BindIoCompletion();\n\n    void AddRef()\n    {\n        InterlockedIncrement(&amp;_dwRef);\n    }\n\n    void Release()\n    {\n        if (!InterlockedDecrement(&amp;_dwRef)) delete this;\n    }\n\n    IoObject()\n    {\n        _hFile = 0;\n        _dwRef = 1;\n    }\n};\n\nclass UserIrp : public IO_STATUS_BLOCK\n{\n    friend IoObject;\n\n    IoObject* _pObj;\n    PVOID _pv;\n    LONG _dwRef;\n    ULONG _code;\n\n    static VOID WINAPI OnComplete(NTSTATUS Status, ULONG_PTR Information, UserIrp* This)\n    {\n        This-&gt;_pObj-&gt;OnIoComplete(Status, Information, This-&gt;_code, This-&gt;_pv);\n        This-&gt;Release();\n    }\n\n    ~UserIrp()\n    {\n        _pObj-&gt;Release();\n    }\n\npublic:\n\n    NTSTATUS CheckStatus(NTSTATUS status)\n    {\n        if (NT_ERROR(status))\n        {\n            OnComplete(status, Information, this);\n        }\n\n        return status;\n    }\n\n    void AddRef()\n    {\n        InterlockedIncrement(&amp;_dwRef);\n    }\n\n    void Release()\n    {\n        if (!InterlockedDecrement(&amp;_dwRef)) delete this;\n    }\n\n    UserIrp(IoObject* pObj, ULONG code, PVOID pv) : _pObj(pObj), _dwRef(1), _code(code), _pv(pv)\n    {\n        pObj-&gt;AddRef();\n    }\n};\n\nNTSTATUS IoObject::BindIoCompletion()\n{\n    return RtlSetIoCompletionCallback(_hFile, (LPOVERLAPPED_COMPLETION_ROUTINE)UserIrp::OnComplete, 0);\n}\n\nclass MySerial : public IoObject\n{\n    void OnIoComplete(NTSTATUS status, ULONG_PTR Information, ULONG code, PVOID pv)\n    {\n        DbgPrint(\"OnIoComplete(%x, %p, %.4s, %p)\\n\", status, Information, &amp;code, pv);\n\n        switch (code)\n        {\n        case 'time':\n            if (0 &lt;= status)\n            {\n                if (PUCHAR buf = new UCHAR[256])\n                {\n                    if (UserIrp* Irp = new UserIrp(this, 'read', buf))\n                    {\n                        static LARGE_INTEGER ByteOffset;\n                        status = Irp-&gt;CheckStatus(NtReadFile(_hFile, 0, 0, Irp, Irp, buf, 256, &amp;ByteOffset, 0));\n                        DbgPrint(\"read begin = %x\\n\", status);\n                        return ;\n                    }\n                    delete buf;\n                }\n            }\n            break;\n        case 'read':\n            DbgPrint(\"read end(%x, %p)\\n\", status, Information);\n            if (status == STATUS_TIMEOUT)\n            {\n                DbgPrint(\"timeout\\n\");\n            }\n            delete pv;\n            break;\n        }\n    }\n\n    virtual ~MySerial()\n    {\n        DbgPrint(\"--MySerial&lt;%p&gt;\\n\", this);\n    }\n\npublic:\n\n    MySerial()\n    {\n        DbgPrint(\"++MySerial&lt;%p&gt;\\n\", this);\n    }\n\n    NTSTATUS Open(POBJECT_ATTRIBUTES poa)\n    {\n        IO_STATUS_BLOCK iosb;\n        return NtOpenFile(&amp;_hFile, FILE_ALL_ACCESS, poa, &amp;iosb, FILE_SHARE_VALID_FLAGS, 0);\n    }\n\n    NTSTATUS SetTimeouts(ULONG ms)\n    {\n        if (UserIrp* Irp = new UserIrp(this, 'time', 0))\n        {\n            SERIAL_TIMEOUTS st = { ms, 1, 0, 1, 0 };\n            return Irp-&gt;CheckStatus(ZwDeviceIoControlFile(_hFile, 0, 0, Irp, Irp, IOCTL_SERIAL_SET_TIMEOUTS, &amp;st, sizeof(st), 0, 0));\n        }\n\n        return STATUS_INSUFFICIENT_RESOURCES;\n    }\n};\n\nvoid AsyncTest(POBJECT_ATTRIBUTES poa)\n{\n    if (MySerial* p = new MySerial)\n    {\n        if (0 &lt;= p-&gt;Open(poa) &amp;&amp; 0 &lt;= p-&gt;BindIoCompletion())\n        {\n            NTSTATUS status = p-&gt;SetTimeouts(4000);\n            DbgPrint(\"set timeout=%x\\n\", status);\n        }\n        p-&gt;Release();\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1816, "favorite_count": 1, "accepted_answer_id": 38364013, "answer_count": 2, "score": 0, "last_activity_date": 1468501407, "creation_date": 1468452373, "question_id": 38363301, "link": "https://stackoverflow.com/questions/38363301/how-do-i-find-out-that-readfile-function-timed-out", "title": "How do I find out that ReadFile function timed-out?", "body": "<p>When I do not set timeout settings via GetTimeout &amp; SetTimeout after I connect my USB-UART converter to my laptop, the ReadFile becomes blocking. However, once I set them via SetTimeOut, the ReadFile is not blocking anymore and returns true even if the given number of bytes were not read.</p>\n\n<p>When ReadFile returns true but the dwRead parameter says 0 since no data was going into my PC via serial port, I conclude that the ReadFile function must have timed out. However, using GetLastError returns 0. How can I be verify in my C++ program that the ReadFile has actually timedout?</p>\n"}, {"tags": ["c++", "curl", "libcurl"], "comments": [{"owner": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "edited": false, "score": 0, "creation_date": 1468455487, "post_id": 38363151, "comment_id": 64139585, "body": "Are you asking about setting a <a href=\"https://curl.haxx.se/libcurl/c/CURLOPT_TCP_KEEPINTVL.html\" rel=\"nofollow noreferrer\">keepalive</a> option because of a long operation?"}, {"owner": {"reputation": 338, "user_id": 1164170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6805e7f90ad712fb6439644de41c7a71?s=128&d=identicon&r=PG", "display_name": "ktb92677", "link": "https://stackoverflow.com/users/1164170/ktb92677"}, "reply_to_user": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "edited": false, "score": 0, "creation_date": 1468515724, "post_id": 38363151, "comment_id": 64170112, "body": "I really don&#39;t know, will that solve the problem at hand?"}], "owner": {"reputation": 338, "user_id": 1164170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6805e7f90ad712fb6439644de41c7a71?s=128&d=identicon&r=PG", "display_name": "ktb92677", "link": "https://stackoverflow.com/users/1164170/ktb92677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1468451404, "creation_date": 1468451404, "question_id": 38363151, "link": "https://stackoverflow.com/questions/38363151/having-trouble-keeping-libcurl-keep-connection-alive", "title": "Having trouble keeping libcurl keep connection alive", "body": "<p>so I just wanted to make a simple program that checks an IMAP server for new emails infinitely and I have the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;curl/curl.h&gt;\n\nint main(void)\n{\n  CURL *curl;\n  CURLcode res = CURLE_OK;\n\n  curl = curl_easy_init();\n  if(curl) {\n    curl_easy_setopt(curl, CURLOPT_USERNAME, \"foo@yahoo.com\");\n    curl_easy_setopt(curl, CURLOPT_PASSWORD, \"foobar\");\n\n    curl_easy_setopt(curl, CURLOPT_URL, \"imaps://imap.mail.yahoo.com/INBOX\");\n\n    curl_easy_setopt(curl, CURLOPT_CUSTOMREQUEST, \"SEARCH NEW\");\n    while (true) {\n       res = curl_easy_perform(curl);\n\n       if(res != CURLE_OK)\n         fprintf(stderr, \"curl_easy_perform() failed: %s\\n\",\n       curl_easy_strerror(res));\n    }\n    curl_easy_cleanup(curl);\n  }\n\n  return (int)res;\n}\n</code></pre>\n\n<p>The weird thing is though that the results are not being updated automatically. I know this will work if I close the connection and re-open it but I would prefer to use the same exact curl handle if possible. Any help would be greatly appreciated!</p>\n"}, {"tags": ["c++", "dynamic", "polymorphism", "instantiation", "decltype"], "comments": [{"owner": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "edited": false, "score": 0, "creation_date": 1468455619, "post_id": 38363089, "comment_id": 64139613, "body": "Instead of &quot;trying to use polymorphism&quot; (read as: this is your class assignment, and the professor insisted on polymorphism), why not use those mechanisms that are helpful and natural to you?"}, {"owner": {"reputation": 412, "user_id": 5020482, "user_type": "registered", "profile_image": "https://graph.facebook.com/982893125094841/picture?type=large", "display_name": "Enigma22134", "link": "https://stackoverflow.com/users/5020482/enigma22134"}, "reply_to_user": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "edited": false, "score": 0, "creation_date": 1468456483, "post_id": 38363089, "comment_id": 64139785, "body": "I&#39;m not in a class. I&#39;m learning cpp coming from a java background, so polymorphism is pretty natural to me. ;)  I don&#39;t need to use polymorphism, but I thought that might be the right direction; just getting a type and instantiating a new object based on that type is fine with me."}], "answers": [{"comments": [{"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1468453151, "post_id": 38363134, "comment_id": 64139059, "body": "Why does the return type need to be covariant? Couldn&#39;t they all just return <code>std::unique_ptr&lt;Base&gt;</code>?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1468453415, "post_id": 38363134, "comment_id": 64139118, "body": "@BenjaminLindley: Technically they could all return <code>std::unique_ptr&lt;Base</code>. But it would require a <code>static_cast</code> every place the statically known class is a derived one and one needs to work with that derived class&#39; functionality."}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 4, "last_activity_date": 1468456807, "last_edit_date": 1468456807, "creation_date": 1468451277, "answer_id": 38363134, "question_id": 38363089, "link": "https://stackoverflow.com/questions/38363089/how-to-dynamically-instantiate-a-new-instance-from-type-of-another-instance-c/38363134#38363134", "title": "How to dynamically instantiate a new instance from type of another instance? c++", "body": "<p>This (if I understand the question correctly) is known as \u00b9<strong>cloning</strong>. Just add a virtual <code>clone</code> member function in the base class. Override it in every concrete derived class.</p>\n\n<hr>\n\n<p>Example of the core functionality:</p>\n\n<pre><code>class Base\n{\nprivate:\n    // Whatever\npublic:\n    virtual auto clone() const\n        -&gt; Base*\n    { return new Base( *this ); }\n\n    virtual ~Base() {}\n};\n\nclass Derived_A\n    : public Base\n{\npublic:\n    auto clone() const\n        -&gt; Derived_A*        // OK, covariant return type.\n        override\n    { return new Derived_A( *this ); }\n};\n\n#include &lt;assert.h&gt;\n#include &lt;typeinfo&gt;\nauto main()\n    -&gt; int\n{\n    Base const&amp; o = Derived_A{};\n    auto p = o.clone();\n    assert( typeid( *p ) == typeid( Derived_A ) );\n    delete p;       // \u2190 Manual cleanup is a problem with basic cloning.\n}\n</code></pre>\n\n<p>Overriding the <code>clone</code> function with a function that returns <code>Derived_A*</code> instead of general <code>Base*</code> is OK because it's a raw pointer and the result type is covariant (more specific in the more specific class, i.e. varies in <em>the same way as</em> the class specificity). It would also work nicely also for a raw reference. But C++ does not directly support this for class type function results, and that includes smart pointers as <code>clone</code> function results.</p>\n\n<p>As the comment indicates, one problem with the direct, simple cloning is that the cleanup responsibility is unclear. It would be better to have that automated and guaranteed, but then one runs into the no-support-for-covariant-smart-pointers problem. Happily that covariance can be implemented &ldquo;manually&rdquo;, by making the virtual <code>clone</code> function non-<code>public</code>, and providing a class-specific smart pointer result wrapper function in every class.</p>\n\n<hr>\n\n<p>Example of cloning with covariant smart pointer result:</p>\n\n<pre><code>#include &lt;memory&gt;       // std::unique_ptr\n\nclass Base\n{\nprivate:\n    // Whatever, and\n    virtual auto virtual_clone() const\n        -&gt; Base*\n    { return new Base( *this ); }\n\npublic:\n    auto clone() const\n    { return std::unique_ptr&lt;Base&gt;( virtual_clone() ); }\n\n    virtual ~Base() {}\n};\n\nclass Derived_A\n    : public Base\n{\nprivate:\n    auto virtual_clone() const\n        -&gt; Derived_A*        // OK, covariant return type.\n        override\n    { return new Derived_A( *this ); }\n\npublic:\n    auto clone() const\n    { return std::unique_ptr&lt;Derived_A&gt;( virtual_clone() ); }\n};\n\n#include &lt;assert.h&gt;\n#include &lt;typeinfo&gt;\nauto main()\n    -&gt; int\n{\n    Base const&amp; o = Derived_A{};\n    auto p = o.clone();\n    assert( typeid( *p ) == typeid( Derived_A ) );\n    // Automatic cleanup.\n}\n</code></pre>\n\n<hr>\n\n<p>Here is one way to automatically generate the cloning support machinery in <code>Base</code> and <code>Derived_A</code>, based on the notion of <em>middle-man inheritance</em>:</p>\n\n<pre><code>#include &lt;memory&gt;       // std::unique_ptr\n#include &lt;utility&gt;      // std::forward\n\n// Machinery:\ntemplate&lt; class Derived_t &gt;\nclass With_base_cloning_\n{\nprivate:\n    auto virtual virtual_clone() const\n        -&gt; Derived_t*\n    { return new Derived_t( *static_cast&lt;Derived_t const*&gt;( this ) ); }\n\npublic:\n    auto clone() const\n    { return std::unique_ptr&lt;Derived_t&gt;( virtual_clone() ); }\n\n    virtual ~With_base_cloning_() {}\n};\n\ntemplate&lt; class Derived_t, class Base_t &gt;\nclass With_cloning_\n    : public Base_t\n{\nprivate:\n    auto virtual_clone() const\n        -&gt; Base_t*          // Ungood type because Derived_t is incomplete here.\n        override\n    { return new Derived_t( *static_cast&lt;Derived_t const*&gt;( this ) ); }\n\npublic:\n    auto clone() const\n    { return std::unique_ptr&lt;Derived_t&gt;( static_cast&lt;Derived_t*&gt;( virtual_clone() ) ); }\n\n    template&lt; class... Args &gt;\n    With_cloning_( Args... args )\n        : Base_t( std::forward&lt;Args&gt;( args )... )\n    {}\n};\n</code></pre>\n\n<p>And you'd use it like this:</p>\n\n<pre><code>// Usage example:\n\nclass My_base\n    : public With_base_cloning_&lt;My_base&gt;\n{};\n\nclass Derived_A\n    : public With_cloning_&lt;Derived_A, My_base&gt;\n{};\n\n#include &lt;assert.h&gt;\n#include &lt;typeinfo&gt;\nauto main()\n    -&gt; int\n{\n    My_base const&amp; o = Derived_A{};\n    auto p = o.clone();\n    assert( typeid( *p ) == typeid( Derived_A ) );\n    // Automatic cleanup.\n}\n</code></pre>\n\n<p>The return type of the (private) <code>virtual_clone</code> function in <code>With_cloning_</code> is not directly what one desires, not ideal, because the derived class is not yet complete at the point where the template is instantiated, so the compiler doesn't yet know that it's derived from the template instantiation.</p>\n\n<p>Alternatives to this middle-man inheritance solution, include a simple code generation macro, and (complex) dominance in a virtual inheritance hierarchy.</p>\n\n<hr>\n\n<p><sup>\n\u00b9 A <code>clone</code> function, at bottom invoking the most derived class' copy constructor, is one special case of the <a href=\"https://isocpp.org/wiki/faq/virtual-functions#virtual-ctors\" rel=\"nofollow\"><strong>virtual constructor</strong> idiom</a>. Another special case is a <code>create</code> function, which at bottom invokes the most derived class' default constructor.\n</sup></p>\n"}], "owner": {"reputation": 412, "user_id": 5020482, "user_type": "registered", "profile_image": "https://graph.facebook.com/982893125094841/picture?type=large", "display_name": "Enigma22134", "link": "https://stackoverflow.com/users/5020482/enigma22134"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 983, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1468456807, "creation_date": 1468450920, "last_edit_date": 1495540736, "question_id": 38363089, "link": "https://stackoverflow.com/questions/38363089/how-to-dynamically-instantiate-a-new-instance-from-type-of-another-instance-c", "title": "How to dynamically instantiate a new instance from type of another instance? c++", "body": "<p>I would like to create a new object on the heap based off another object that's type can only be known at runtime.</p>\n\n<p>For a hypothetical example, say we have a game where the user picks a character which is either a wizard, warrior, or healer. The computer would create a matching non-player character to fight against the player. that is, if the player chose a warrior, the computer would generate another warrior instance. </p>\n\n<p>I am trying to use polymorphism. Say wizard, warrior, and healer all inherit from the class \"Combattype\"</p>\n\n<p>what I would like to do is something like the psuedocode:</p>\n\n<pre><code>    combattype* player = new (chosen at runtimetype)();//player\n    combattype* baseptr = new typeid(*player);   // computer - this doesn't work\n</code></pre>\n\n<p>I know I may be able to write an if statment using something like </p>\n\n<pre><code>if(typeid(player).name(*player) == typeid.name(warrior)) { // make warrior}\n</code></pre>\n\n<p>but this would get complex very quickly with hundreds of types. I feel like there is a better way, but I cannot come up with it conceptually. </p>\n\n<p>I'm trying to do something similar to this question, but in c++: <a href=\"https://stackoverflow.com/questions/578495/dynamically-create-an-object-of-type\">Dynamically create an object of &lt;Type&gt;</a>\nThanks for any help.</p>\n"}, {"tags": ["c++", "arrays", "loops"], "comments": [{"owner": {"reputation": 838, "user_id": 5391191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-U8c9fH2K_MQ/AAAAAAAAAAI/AAAAAAAAAEo/uSAxoPsAvvs/photo.jpg?sz=128", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/5391191/jacob-h"}, "edited": false, "score": 0, "creation_date": 1468450603, "post_id": 38363026, "comment_id": 64138407, "body": "You never wrote any data to the array. You wrote it to the temporary variable i."}, {"owner": {"reputation": 227, "user_id": 5128743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b9d92714fd136bbc31c59e8091c578?s=128&d=identicon&r=PG&f=1", "display_name": "Bettorun", "link": "https://stackoverflow.com/users/5128743/bettorun"}, "edited": false, "score": 0, "creation_date": 1468450663, "post_id": 38363026, "comment_id": 64138426, "body": "If you don&#39;t understand what jacob said, try reading about scopes : <a href=\"http://en.cppreference.com/w/cpp/language/scope\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/scope</a>"}, {"owner": {"reputation": 1449, "user_id": 5361456, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4b6a9a3c7b529ca94380acfeac705aee?s=128&d=identicon&r=PG&f=1", "display_name": "Archie Gertsman", "link": "https://stackoverflow.com/users/5361456/archie-gertsman"}, "edited": false, "score": 0, "creation_date": 1468451111, "post_id": 38363026, "comment_id": 64138527, "body": "is <code>int x[length];</code> working for you? I thought that would give an error."}], "answers": [{"tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": false, "score": 2, "last_activity_date": 1468452243, "last_edit_date": 1495540286, "creation_date": 1468450645, "answer_id": 38363046, "question_id": 38363026, "link": "https://stackoverflow.com/questions/38363026/c-for-each-loop-printing-an-array/38363046#38363046", "title": "C++ For Each Loop Printing an Array", "body": "<p>Your first loop copies each element of <code>x</code> into <code>i</code>, and you are streaming into that copy <code>i</code> each time:</p>\n\n<blockquote>\n<pre><code>for (int i : x){\n      cin &gt;&gt; i;\n}\n</code></pre>\n</blockquote>\n\n<p>To stream into the array, take each element by reference:</p>\n\n<pre><code>for (int&amp; i : x){\n            cin &gt;&gt; i;\n}\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/a/17032314/1621391\">this answer</a></p>\n\n<p>Again, you are making use of <a href=\"https://stackoverflow.com/questions/8593643/does-c-support-variable-length-arrays\">VLA</a>'s which isn't standard C++</p>\n"}], "owner": {"reputation": 222, "user_id": 1332748, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/TzLek.png?s=128&g=1", "display_name": "jack klompus", "link": "https://stackoverflow.com/users/1332748/jack-klompus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1468456720, "creation_date": 1468450504, "question_id": 38363026, "link": "https://stackoverflow.com/questions/38363026/c-for-each-loop-printing-an-array", "title": "C++ For Each Loop Printing an Array", "body": "<p>I'm currently learning programming and learning C++. I'm trying to use the for each loop to print out an array but I'm getting some weird outputs. Here's my code.</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main(){\n        int length;\n        cin &gt;&gt; length;\n        cout &lt;&lt; \"Enter \" &lt;&lt; length &lt;&lt; \" numbers!\\n\";\n        int x[length];  \n        for (int i : x){\n                cin &gt;&gt; i;\n        }\n        for (int i : x){\n                cout &lt;&lt; i &lt;&lt; endl;\n        }      \n        return 0;\n}\n</code></pre>\n\n<p>I ran a test and here's my input and output</p>\n\n<pre><code>5\nEnter 5 numbers!\n1\n2\n3\n4\n5\n78344035\n1\n2031166200\n32767\n1528080880\n</code></pre>\n\n<p>If someone could tell me what I did wrong I'd really appreciate it. Thanks</p>\n"}, {"tags": ["c++", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1468452764, "post_id": 38363187, "comment_id": 64138971, "body": "The reason why I&#39;m using types rather than value is that I&#39;m using type traits from the std library.  This sort of works, but if X1 is a template, it doesn&#39;t work.  I get a &#39;is not deductible in partial specialization` error if I try and add the template arguments to the list."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 2, "creation_date": 1468458416, "post_id": 38363187, "comment_id": 64140187, "body": "@Adrian: You have to <i>&quot;fix&quot;</i> your traits if <code>Y</code> is template: <a href=\"http://coliru.stacked-crooked.com/a/46f9d20bc37a27bd\" rel=\"nofollow noreferrer\">Demo</a>."}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1468855573, "post_id": 38363187, "comment_id": 64286771, "body": "That&#39;s excellent.  Post that to the answer and I&#39;ll mark it as done. :)"}], "tags": [], "owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "is_accepted": false, "score": 1, "last_activity_date": 1468451931, "last_edit_date": 1468451931, "creation_date": 1468451605, "answer_id": 38363187, "question_id": 38362987, "link": "https://stackoverflow.com/questions/38362987/is-it-possible-to-traverse-a-class-to-see-if-a-class-or-any-of-its-bases-have-a/38363187#38363187", "title": "Is it possible to traverse a class to see if a class or any of it&#39;s bases have a particular trait?", "body": "<p>You want to specialize <code>has_trait&lt;&gt;</code> for the descendants as well, not just for the base:</p>\n\n<pre><code>#include&lt;type_traits&gt;\n\nstruct Y       {};\nstruct X1 : Y  {};\nstruct X2      {};\nstruct Z_trait {};\n\ntemplate &lt;typename Container, typename = void&gt;\nstruct has_trait;\n\ntemplate &lt;typename T&gt; \nstruct has_trait&lt;T, typename std::enable_if&lt; std::is_base_of&lt;X2, T&gt;::value &gt;::type &gt;\n{\n  typedef Z_trait type;\n};\n\ntemplate &lt;typename T&gt; \nstruct has_trait&lt;T, typename std::enable_if&lt; std::is_base_of&lt;Y, T&gt;::value &gt;::type &gt;\n{\n  typedef Z_trait type;\n};\n\ntemplate &lt;typename Container&gt;\nvoid fn(Container&amp; container)\n{\n  static_assert(std::is_same&lt;typename has_trait&lt;Container&gt;::type, Z_trait&gt;::value\n    , \"must have Z_trait\");\n  Container* x = &amp;container;\n  ++x;\n}\n\nint main()\n{\n  X1 x1;\n  X2 x2;\n  Y y;\n\n  fn(x1);\n  fn(x2);\n  fn(y);\n\n  return 0;\n}\n</code></pre>\n\n<p>Also, you might consider a <code>static constexpr const bool has_z_trait = true;</code> or a <code>static bool hasTrait(const ZTrait&amp;) { return true; }</code>, it makes the static assert simpler imho.</p>\n"}], "owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491315722, "creation_date": 1468450211, "last_edit_date": 1491315722, "question_id": 38362987, "link": "https://stackoverflow.com/questions/38362987/is-it-possible-to-traverse-a-class-to-see-if-a-class-or-any-of-its-bases-have-a", "title": "Is it possible to traverse a class to see if a class or any of it&#39;s bases have a particular trait?", "body": "<p>Say I have a class <code>X1</code>, which derives from <code>Y</code> and another class <code>X2</code>.  <code>Y</code> and <code>X2</code> have a particular trait <code>Z_trait</code>.</p>\n\n<p>Now I have a template function and I want to check that the parameter has a particular trait.</p>\n\n<p>This is what I have:</p>\n\n<pre><code>#include&lt;type_traits&gt;\n\ntemplate &lt;typename T&gt;\nstruct Y       {};\nstruct X1 : Y&lt;int&gt;  {};\nstruct X2      {};\nstruct Z_trait {};\n\ntemplate &lt;typename Container&gt;\nstruct has_trait;\n\ntemplate &lt;&gt;\nstruct has_trait&lt;X2&gt;\n{\n  typedef Z_trait type;\n};\n\ntemplate &lt;typename T&gt;\nstruct has_trait&lt;Y&lt;T&gt;&gt;\n{\n  typedef Z_trait type;\n};\n\ntemplate &lt;typename Container&gt;\nvoid fn(Container&amp; container)\n{\n  static_assert(std::is_same&lt;typename has_trait&lt;Container&gt;::type, Z_trait&gt;::value\n    , \"must have Z_trait\");\n  Container* x = &amp;container;\n  ++x;\n}\n\nint main()\n{\n  X1 x1;\n  X2 x2;\n  Y&lt;char&gt; y;\n\n  fn(x1);\n  fn(x2);\n  fn(y);\n\n  return 0;\n}\n</code></pre>\n\n<p><kbd>demo</kbd></p>\n\n<p>I want it so that <code>has_trait</code> will give the <code>Z_trait</code> for all three types.  How would I do this?  Is there a way of iterating over all base classes, or is there some easier method to test for a trait?</p>\n\n<p>NOTE that I am not using a using template.  The reason for this is that VS2013 doesn't support this fully.</p>\n\n<p>Oh, and FYI, I don't want to change the implementation of <code>X1</code>, <code>X2</code> or <code>Y</code>.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 227, "user_id": 5128743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b9d92714fd136bbc31c59e8091c578?s=128&d=identicon&r=PG&f=1", "display_name": "Bettorun", "link": "https://stackoverflow.com/users/5128743/bettorun"}, "edited": false, "score": 0, "creation_date": 1468450480, "post_id": 38362954, "comment_id": 64138364, "body": "I&#39;d recommend taking a look into a tutorial or a book along the lines of introduction to coding. Some basic concept might have their potential use here become obvious."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 2, "creation_date": 1468450557, "post_id": 38362954, "comment_id": 64138389, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/16867944/counting-occurrences-of-each-word-in-a-text-file\">Counting Occurrences of Each Word in a Text File</a>"}], "answers": [{"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1468450661, "post_id": 38363029, "comment_id": 64138425, "body": "Its number of words with a length, so i think <code>std::map&lt;int, int&gt;</code> and <code>map[word.length]++</code> would be sufficient."}], "tags": [], "owner": {"reputation": 1449, "user_id": 5361456, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4b6a9a3c7b529ca94380acfeac705aee?s=128&d=identicon&r=PG&f=1", "display_name": "Archie Gertsman", "link": "https://stackoverflow.com/users/5361456/archie-gertsman"}, "is_accepted": false, "score": 0, "last_activity_date": 1468450926, "last_edit_date": 1468450926, "creation_date": 1468450532, "answer_id": 38363029, "question_id": 38362954, "link": "https://stackoverflow.com/questions/38362954/how-can-i-find-the-number-of-words-in-a-list/38363029#38363029", "title": "How can I find the number of words in a list?", "body": "<p>You can make an <code>std::map</code> which stores two <code>int</code>s and do this:</p>\n\n<pre><code>std::map&lt;int, int&gt; map;\n\nwhile (inStream) {\n    map[word.length()]++; // increment number of words for given length\n}\n</code></pre>\n\n<p>then to print all the words of each length, you can make a <code>for</code> loop:</p>\n\n<pre><code>for (auto i = 0; i &lt; MAX_LENGTH; ++i) {\n    std::cout &lt;&lt; \"words of length \" &lt;&lt; i &lt;&lt; \": \" &lt;&lt; map[i] &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>I haven't tested it but this is just an idea.</p>\n\n<p>P.S. Edits made thanks to Ben who cleared up the question's purpose.</p>\n"}], "owner": {"reputation": 9, "user_id": 6558120, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210506075074899/picture?type=large", "display_name": "Alex Ghossein", "link": "https://stackoverflow.com/users/6558120/alex-ghossein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1468450926, "creation_date": 1468449927, "last_edit_date": 1468450446, "question_id": 38362954, "link": "https://stackoverflow.com/questions/38362954/how-can-i-find-the-number-of-words-in-a-list", "title": "How can I find the number of words in a list?", "body": "<p>Hey guys I have this assignment I'm working on and I need some help with this question. I was given a text document with thousands of words and I have to find the number of words of every possible length and print how many there are in a table. This is what I got so far</p>\n\n<pre><code>inStream.open(\"EnglishWords.txt\", ifstream::in);\n\nstring word; \n//int number of letters;\n//int number of words;\n\nwhile (inStream) {\n\n    inStream &gt;&gt; word;\n    if (word.length() == //Something..)\n        //print &lt;&lt; number of letters &lt;&lt; number of words;\n\n}\n</code></pre>\n\n<p>So I basically have nothing. Any of you guys able to help me out here? or give me direction of how i should start? </p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1468449931, "post_id": 38362926, "comment_id": 64138183, "body": "will check after i get back home."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1468449942, "post_id": 38362926, "comment_id": 64138191, "body": "<code>assert(sizeof(char) == 1);</code> That is true by definition."}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1468449992, "post_id": 38362926, "comment_id": 64138204, "body": "great. i can get rid of that. it is for intel cpu anyway."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1468450013, "post_id": 38362926, "comment_id": 64138211, "body": "@juanchopanza Maybe they hunt for buggy compilers =]."}], "owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 820, "favorite_count": 0, "closed_date": 1468449964, "answer_count": 0, "score": 1, "last_activity_date": 1468449830, "creation_date": 1468449830, "question_id": 38362926, "link": "https://stackoverflow.com/questions/38362926/stdvector-resize-without-initializing", "closed_reason": "Duplicate", "title": "std::vector resize without initializing", "body": "<p>Is it possible to resize without initializing (just like reserve, but also set the size of the vector).</p>\n\n<p>The following code reads a binary file and put it in a uint32_t vector.. The code uses reserve and use the capacity (instead of size) to store the number of elements in the vector. This seems awkward.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;fstream&gt;\n#include &lt;byteswap.h&gt;\n#include &lt;iterator&gt;\n#include &lt;cassert&gt;\n\nusing namespace std;\n\n//typedef unsigned char BYTE;\n//typedef double BYTE;\ntemplate &lt;typename T&gt;\nstd::vector&lt;T&gt; readFile(const char* filename){\n    assert(sizeof(char) == 1);\n    // open the file:\n    std::ifstream file(filename, std::ios::binary);\n\n    // Stop eating new lines in binary mode!!!\n    file.unsetf(std::ios::skipws);\n\n    // get its size:\n    std::streampos fileSize;\n\n    file.seekg(0, std::ios::end);\n    fileSize = file.tellg();\n    file.seekg(0, std::ios::beg);\n\n    // reserve capacity\n\n    std::vector&lt;T&gt; vec;\n    cout &lt;&lt; \"reserved: \" &lt;&lt; fileSize*sizeof(unsigned char)/sizeof(T) &lt;&lt; endl;\n    vec.reserve(fileSize*sizeof(unsigned char)/sizeof(T));\n    unsigned char* ptr_vec = (unsigned char*) vec.data();\n\n    typedef std::istream_iterator&lt;unsigned char&gt; streamiter;\n    int i = 0;\n    cout &lt;&lt; \"data in vector1: \" &lt;&lt; endl;\n    for (streamiter it = streamiter(file); it != streamiter(); it++) {\n        ptr_vec[i] =  *(it);\n        cout &lt;&lt; int(ptr_vec[i]) &lt;&lt; ' ';\n        ++i;\n    }\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"data in vector; \" &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    for (i=0;i&lt;vec.capacity();i++){\n        cout &lt;&lt; int(vec[i]) &lt;&lt; ' ';\n    }\n\n    return vec;\n}\n\n\nint main(void){\n    std::vector&lt;uint32_t&gt; arr = readFile&lt;uint32_t&gt;(\"test.bin\");\n}  \n</code></pre>\n"}, {"tags": ["c++", "string", "memory-management", "str-replace"], "comments": [{"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 1, "creation_date": 1468449555, "post_id": 38362837, "comment_id": 64138021, "body": "Indexing (and setting) an arbitrary location in a string doesn&#39;t automagically grow the string to that length.  After that I stopped looking.  Oh well, I did read the question about <code>* 3</code>.  For each replacement you&#39;re subtracting one character - the original space - and adding 3.  Thus ..."}, {"owner": {"reputation": 659, "user_id": 5586607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff0fc36c36588aa40cf838aff759f8a9?s=128&d=identicon&r=PG&f=1", "display_name": "ShuberFu", "link": "https://stackoverflow.com/users/5586607/shuberfu"}, "edited": false, "score": 0, "creation_date": 1468449663, "post_id": 38362837, "comment_id": 64138071, "body": "<code>str[newLength]</code> will access memory location beyond the memory space allocated for <code>str</code>. What you want to do is to create a brand new string with the new size, copy the old string over while replacing the whitespace with &quot;%20&quot;"}, {"owner": {"reputation": 658, "user_id": 6177689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/o5C91.jpg?s=128&g=1", "display_name": "Ingenioushax", "link": "https://stackoverflow.com/users/6177689/ingenioushax"}, "edited": false, "score": 0, "creation_date": 1468449709, "post_id": 38362837, "comment_id": 64138089, "body": "The easiest approach would be to use <code>strtok()</code> to tokenize your string (split at spaces and create string tokens). Then, just iterate through the tokens and put a %20 between each token... <code>char *tokens = strtok(my_string, &quot; &quot;); while(tokens) { cout &lt;&lt; token &lt;&lt; &quot;%20&quot;; tokens = strtok(NULL, &quot; &quot;); }</code>"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1468449732, "post_id": 38362837, "comment_id": 64138097, "body": "Google &quot;c++ urlencode&quot;."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 658, "user_id": 6177689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/o5C91.jpg?s=128&g=1", "display_name": "Ingenioushax", "link": "https://stackoverflow.com/users/6177689/ingenioushax"}, "edited": false, "score": 1, "creation_date": 1468450355, "post_id": 38362837, "comment_id": 64138325, "body": "@Ingenioushax - <code>strtok</code> doesn&#39;t work with <code>std::string</code>. And it&#39;s rarely the right answer."}, {"owner": {"reputation": 658, "user_id": 6177689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/o5C91.jpg?s=128&g=1", "display_name": "Ingenioushax", "link": "https://stackoverflow.com/users/6177689/ingenioushax"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1468506373, "post_id": 38362837, "comment_id": 64163840, "body": "@PeteBecker: I can&#39;t understand why strtok() is often the incorrect answer. Does it have some weird behavior if you&#39;re not careful? Sure. As for not working on strings, +1. Didn&#39;t pay attention to the string datatype. He could always use a stringstream to wrap the string in, beginning and end iterator, a vector, and an ostream_iterator wrapped in a std::copy. <code>std::copy(myStrVec.begin(), myStrVec.end(), std::ostream_iterator&lt;std::string&gt;(std::cout, &#39;\\n&#39;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 6433076, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d867ac1f38d3025649e69b64b691b5?s=128&d=identicon&r=PG&f=1", "display_name": "jellyxbean", "link": "https://stackoverflow.com/users/6433076/jellyxbean"}, "edited": false, "score": 1, "creation_date": 1468449975, "post_id": 38362912, "comment_id": 64138199, "body": "This suddenly just clicked, I feel pretty silly for not understanding it before, thank you!"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 83, "user_id": 6433076, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d867ac1f38d3025649e69b64b691b5?s=128&d=identicon&r=PG&f=1", "display_name": "jellyxbean", "link": "https://stackoverflow.com/users/6433076/jellyxbean"}, "edited": false, "score": 0, "creation_date": 1468450059, "post_id": 38362912, "comment_id": 64138223, "body": "Don&#39;t be @jellyxbean, everybody has experienced something like that before! Glad I helped! :)"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 83, "user_id": 6433076, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d867ac1f38d3025649e69b64b691b5?s=128&d=identicon&r=PG&f=1", "display_name": "jellyxbean", "link": "https://stackoverflow.com/users/6433076/jellyxbean"}, "edited": false, "score": 0, "creation_date": 1468463532, "post_id": 38362912, "comment_id": 64141249, "body": "@jellyxbean, is there any reason for not accepting my answer? :)"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1468450024, "last_edit_date": 1495539860, "creation_date": 1468449733, "answer_id": 38362912, "question_id": 38362837, "link": "https://stackoverflow.com/questions/38362837/replacing-all-spaces-in-a-string-with-20-c/38362912#38362912", "title": "Replacing all spaces in a string with &#39;%20&#39; (C++)", "body": "<pre><code>int newLength = strLen + count * 2;\n</code></pre>\n\n<p>says to allocate space (later), equal to the length of the string, plus the number of whitespaces found multiplied by two, which makes sense.</p>\n\n<p>For example: <code>so glad to help</code>, should use the slots that the whitespaces live into for the <code>%</code> and they will need two more slots each, for the <code>20</code> part of the replacement that will come into play.</p>\n\n<hr>\n\n<p>This is <em>WRONG</em>:</p>\n\n<pre><code>str[newLength] = '\\0';\n</code></pre>\n\n<p>can't you see? You access memory out of the bounds of your string. You act like you actually allocated space equal to the <code>newLength</code>, but you haven't that anywhere in the code yet.</p>\n\n<p>Out of bounds accessing result in <strong>Undefined Behavior</strong> and that's bad.</p>\n\n<hr>\n\n<p>The else statement is just for copying non-whitespace characters, but you should already given up on that code (if it's not yours) and start from scratch or/and take a sneak peak at: <a href=\"https://stackoverflow.com/questions/154536/encode-decode-urls-in-c\">Encode/Decode URLs in C++</a>.</p>\n\n<hr>\n\n<p>As for the wrong result, you should know by reaching that point of that answer, that this is expected.</p>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1468450269, "creation_date": 1468450269, "answer_id": 38362998, "question_id": 38362837, "link": "https://stackoverflow.com/questions/38362837/replacing-all-spaces-in-a-string-with-20-c/38362998#38362998", "title": "Replacing all spaces in a string with &#39;%20&#39; (C++)", "body": "<p>Trying to do the modification in place is tricky. It's much easier to create a new string:</p>\n\n<pre><code>std::string new_string;\nfor (int i = 0; i &lt; str.length(); ++i) {\n    if (str[i] == ' ')\n        new_string += \"%20\";\n    else\n        new_string += str[i];\n}\nreturn new_string;\n</code></pre>\n\n<p>or, if you like range-for:</p>\n\n<pre><code>std::string new_string;\nfor (char ch : str) {\n    if (ch == ' ')\n        new_string += \"%20\";\n    else\n        new_string += ch;\n}\nreturn new_string;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 6433076, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d867ac1f38d3025649e69b64b691b5?s=128&d=identicon&r=PG&f=1", "display_name": "jellyxbean", "link": "https://stackoverflow.com/users/6433076/jellyxbean"}, "edited": false, "score": 0, "creation_date": 1468553271, "post_id": 38363069, "comment_id": 64184264, "body": "I added the line <code>str.resize(newLength);</code> before this line <code>str[newLength] = &#39;\\0&#39;;</code>. From my understanding, <code>str.resize</code> will allocate the new string length, but when I try executing it the output is very jumbled. Could you provide some more insight on this?"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 83, "user_id": 6433076, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d867ac1f38d3025649e69b64b691b5?s=128&d=identicon&r=PG&f=1", "display_name": "jellyxbean", "link": "https://stackoverflow.com/users/6433076/jellyxbean"}, "edited": false, "score": 0, "creation_date": 1470072968, "post_id": 38363069, "comment_id": 64787397, "body": "@jellyxbean, as Chris already mentioned, <code>str[newLenght]</code> is wrong. I had mentioned that too in my answer, which you unaccepted, which is OK of course, but I feel that you just jumped to this answer without understanding it either."}, {"owner": {"reputation": 83, "user_id": 6433076, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d867ac1f38d3025649e69b64b691b5?s=128&d=identicon&r=PG&f=1", "display_name": "jellyxbean", "link": "https://stackoverflow.com/users/6433076/jellyxbean"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1470073251, "post_id": 38363069, "comment_id": 64787586, "body": "@gsamaras I actually figured it out using the str.resize() function which is why I ended up accepting this answer instead! It makes sense now; I am allocating space for the string with a size of new length and then setting the last index to &#39;\\0&#39;."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 83, "user_id": 6433076, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d867ac1f38d3025649e69b64b691b5?s=128&d=identicon&r=PG&f=1", "display_name": "jellyxbean", "link": "https://stackoverflow.com/users/6433076/jellyxbean"}, "edited": false, "score": 0, "creation_date": 1470073654, "post_id": 38363069, "comment_id": 64787819, "body": "@jellyxbean but as Chris correctly said, the <code>std::string</code> objects maintain the NULL terminator internally. I don&#39;t get your point, but anyway, the comment&#39;s section is not for chatting. If you found the solution good. If not, please post a new question (and share the link if you like)."}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": true, "score": 2, "last_activity_date": 1468450799, "creation_date": 1468450799, "answer_id": 38363069, "question_id": 38362837, "link": "https://stackoverflow.com/questions/38362837/replacing-all-spaces-in-a-string-with-20-c/38363069#38363069", "title": "Replacing all spaces in a string with &#39;%20&#39; (C++)", "body": "<p>This is wrong:</p>\n\n<pre><code>str[newLength] = '\\0';\n</code></pre>\n\n<p><code>std::string</code> objects maintain their NUL terminator internally based on their size.  You want</p>\n\n<pre><code>str.resize(newLength);\n</code></pre>\n\n<p>instead.</p>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1468452646, "post_id": 38363070, "comment_id": 64138934, "body": "Modifying in place is very inefficient. Every call to <code>insert()</code> has to copy all the remaining characters in the string, so this is <code>O(m*n)</code> where <code>m</code> is the number of spaces and <code>n</code> is the size of the string."}], "tags": [], "owner": {"reputation": 1, "user_id": 6347675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/950c2dcb136ea002b3ef3815722136c7?s=128&d=identicon&r=PG&f=1", "display_name": "adoooo", "link": "https://stackoverflow.com/users/6347675/adoooo"}, "is_accepted": false, "score": 0, "last_activity_date": 1468451724, "last_edit_date": 1468451724, "creation_date": 1468450801, "answer_id": 38363070, "question_id": 38362837, "link": "https://stackoverflow.com/questions/38362837/replacing-all-spaces-in-a-string-with-20-c/38363070#38363070", "title": "Replacing all spaces in a string with &#39;%20&#39; (C++)", "body": "<p>You can change that string argument in function to reference, then there wont be any need for new string, at other part of the code, you can use insert function to add '2' and '0', and you only need to convert space to '&amp;'.</p>\n\n<pre><code>void replaceSpaces(string &amp;str) {\n        size_t strLen = str.length();\n        for (int i = 0; i &lt; strLen; i++) {\n            if (str[i] == ' ') {\n                str[i] = '%';\n                str.insert(str.begin() + i + 1, '2');\n                str.insert(str.begin() + i + 2, '0');\n                strLen += 2;\n            }\n        }\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 475, "user_id": 5256963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3b4896ad04a1ce99d5a3e60d34e9993?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/5256963/charlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1468458746, "last_edit_date": 1468458746, "creation_date": 1468451741, "answer_id": 38363209, "question_id": 38362837, "link": "https://stackoverflow.com/questions/38362837/replacing-all-spaces-in-a-string-with-20-c/38363209#38363209", "title": "Replacing all spaces in a string with &#39;%20&#39; (C++)", "body": "<p>This is easy; replace <code>examplestring</code> with your string in the code, and use  as you would:</p>\n\n<pre><code>#include &lt;iostream&gt; //debug output\n#include &lt;string&gt;\n\nusing std::string;\nusing std::cout;\nusing std::endl;\n\n//the string to convert\nstring examplestring = \"this is the example string for spaces into %20\";\n\nint main()\n{\n    int countspaces = 0; //its faster to fill a known size\n    for (auto &amp;x : examplestring)if (x == ' ')countspaces++; //counts spaces\n\n    string newstring; //declare new string\n    newstring.resize(examplestring.size() + (countspaces*3)); //pre-set size to make it run faster\n\n    int newstringiterator = 0; //keep track of new string location\n\n    //if ' '(space), place %20 in newstring and add 3 to iteration\n    //else just place the letter and iterate\n\n    for (int i=0;i&lt;examplestring.size();i++)\n    {\n        if (examplestring[i] == ' ') \n        { \n            newstring.insert(newstringiterator, \"%20\");\n            newstringiterator += 3;\n        }\n        else newstring[newstringiterator++] = examplestring[i];\n    }\n\n  //final newstring is the original with %20 instead of spaces. \n  cout &lt;&lt; newstring &lt;&lt; endl;\n\n  system(\"PAUSE\"); //to read console output\n  return 0; //return to zero\n}\n</code></pre>\n\n<p>This will output <code>newstring</code>, which is the old string with '%20' instead of spaces.</p>\n"}], "owner": {"reputation": 83, "user_id": 6433076, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71d867ac1f38d3025649e69b64b691b5?s=128&d=identicon&r=PG&f=1", "display_name": "jellyxbean", "link": "https://stackoverflow.com/users/6433076/jellyxbean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1419, "favorite_count": 0, "accepted_answer_id": 38363069, "answer_count": 5, "score": 0, "last_activity_date": 1468458746, "creation_date": 1468449384, "last_edit_date": 1468450094, "question_id": 38362837, "link": "https://stackoverflow.com/questions/38362837/replacing-all-spaces-in-a-string-with-20-c", "title": "Replacing all spaces in a string with &#39;%20&#39; (C++)", "body": "<p>Having some trouble understanding parts of the code; the output I am getting is also wrong. The problem is to replace all spaces in a string with '%20'. The full code is shown below; it compiles but doesn't run exactly as it should. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nvoid replaceSpaces(string str){\n\n    //Getting the length of the string, counting the number of spaces \n    int strLen = str.length();\n    int i, count = 0;\n    for (i = 0; i &lt;= strLen; i++) {\n        if(str[i]==' ')\n        count++;\n    }\n\n    //Determining the new length needed to allocate for replacement characters '%20'\n    int newLength = strLen + count * 2;\n\n    str[newLength] = '\\0';\n    for (i = strLen - 1; i &gt;= 0; i--) {\n        if (str[i] == ' ') {\n            str[newLength - 1] = '0';\n            str[newLength - 2] = '2';\n            str[newLength - 3] = '%';\n            newLength = newLength - 3;\n        }\n\n        else {\n            str[newLength - 1] = str[i];\n            newLength = newLength -1;\n        }\n    }\n    cout &lt;&lt; str &lt;&lt;endl;\n\n}\n\nint main() {\n\n    string str = \"hello jellybean hello\";\n    replaceSpaces(str);\n\n    return 0;\n\n}\n</code></pre>\n\n<hr>\n\n<p>I am probably missing something obvious, but when allocating for the new string length in this line: </p>\n\n<p><code>int newLength = strLen + count * 2;</code></p>\n\n<p>Here we are multiplying the number of spaces by 2, but if we are trying to replace all spaces with '%20', why not multiply it by 3? </p>\n\n<hr>\n\n<p><code>str[newLength] = '\\0';</code></p>\n\n<p>Does this line indicate that the position past the last character in the string is assigned a null space? </p>\n\n<hr>\n\n<p>Am also confused about the <code>else</code> statement. </p>\n\n<pre><code> else {\n        str[newLength - 1] = str[i];\n        newLength = newLength -1;\n    }\n</code></pre>\n\n<p>Not sure if I completely understand the circumstance when this would be executed. </p>\n\n<hr>\n\n<p>When the functions are compiled and run, if </p>\n\n<p><code>string str = \"hello jellybean hello\";</code></p>\n\n<p>the expected output would be <strong>hello%20jellybean%20hello</strong>, except the output I am getting is <strong>hello%20jellybean%20h</strong>. </p>\n\n<p>In terms of time complexity, since there are two independent <code>for</code> loops, would the time complexity be <em>O(n)</em>? </p>\n\n<p>I know I'm asking a lot of different questions, many thanks in advance for any answers! </p>\n"}, {"tags": ["c++", "linker", "linker-errors", "lnk2019"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1468449504, "post_id": 38362656, "comment_id": 64138005, "body": "I believe the first problem is in the Scene source file (which you do not show). Did you implement <code>Scene::getCamera()</code>?"}, {"owner": {"reputation": 766, "user_id": 6454737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2b31cb0648643d79e7da5edfbb03521?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Menon", "link": "https://stackoverflow.com/users/6454737/rahul-menon"}, "edited": false, "score": 0, "creation_date": 1468454184, "post_id": 38362656, "comment_id": 64139282, "body": "what is your command line you are using to run the compile , have you included both the .cpp files renderer.cpp and scene.cpp in it and if so like  drescherjm asked have you implemented both getCamera and getShapes functions."}], "owner": {"reputation": 1, "user_id": 6586669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6178446cc25ff7d1e13badb848ee8c36?s=128&d=identicon&r=PG&f=1", "display_name": "Lunacrescens", "link": "https://stackoverflow.com/users/6586669/lunacrescens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513953862, "creation_date": 1468448391, "last_edit_date": 1513953862, "question_id": 38362656, "link": "https://stackoverflow.com/questions/38362656/error-lnk2019-external", "title": "Error LNK2019 external", "body": "<p>I can't quite make sense of the errors i get when trying to get my project to work. \nCan someone maybe point me in the right direction? I am fairly new to C++, so I might be doing something crucially wrong here without being aware of it. \nThe errormessages I get are as following: </p>\n\n<pre><code>Fehler  6   error LNK2019: Verweis auf nicht aufgel\u00f6stes externes Symbol        \"\"public: struct Camera __thiscall Scene::getCamera(void)\" (?    getCamera@Scene@@QAE?AUCamera@@XZ)\" in Funktion \"\"public: void __thiscall     Renderer::render(void)\" (?render@Renderer@@QAEXXZ)\". ...\\source\\renderer.obj     raytracer\n\nFehler  4   error LNK2019: Verweis auf nicht aufgel\u00f6stes externes Symbol \"\"public: class std::vector&lt;class std::shared_ptr&lt;class Shape&gt;,class std::allocator&lt;class std::shared_ptr&lt;class Shape&gt; &gt; &gt; __thiscall Scene::getShapes(void)const \" (?getShapes@Scene@@QBE?AV?$vector@V?$shared_ptr@VShape@@@std@@V?$allocator@V?$shared_ptr@VShape@@@std@@@2@@std@@XZ)\" in Funktion \"\"public: void __thiscall Renderer::render(void)\" (?render@Renderer@@QAEXXZ)\".    ...source\\renderer.obj  raytracer\n</code></pre>\n\n<p>Here is my code: </p>\n\n<pre><code>#include \"color.hpp\"\n#include \"pixel.hpp\"\n#include \"ppmwriter.hpp\"\n#include &lt;string&gt;\n#include &lt;glm/glm.hpp&gt;\n#include &lt;map&gt;\n#include &lt;shape.h&gt;\n#include \"sdfloader.h\"\n#include &lt;optional_hit.h&gt;\n#include &lt;scene.h&gt;\n\nRenderer::Renderer(Scene const&amp; scene, unsigned w, unsigned h, std::string const&amp; file)\n: width_(w)\n, height_(h)\n, colorbuffer_(w*h, Color(0.0, 0.0, 0.0))\n, filename_(file)\n, ppm_(width_, height_)\n, scene_(scene)\n{}\n\nvoid Renderer::render() {\n\ncamera_ = scene_.getCamera();\nshapes_ = scene_.getShapes();\nlights_ = scene_.getLights();\n\ncamera_.position = glm::vec3(0, 0, tan((90.0 - camera_.opening_angle / 2.0) * M_PI / 180.0) * (double(width_) / 2.0));\ntestOutput();\n\nRay first_ray;\nfor (unsigned y = 0; y &lt; height_; ++y) {\n    for (unsigned x = 0; x &lt; width_; ++x) {\n        Pixel p(x, y);\n\n        //first ray is created here\n        glm::vec3 poip = glm::vec3(double(x) - double(width_) / 2.0, double(y) - double(height_) / 2.0, 0);\n        first_ray.origin = camera_.position;\n        first_ray.direction = poip - camera_.position;\n\n        double delta = -1;\n        Shape *closest_obj;\n        for (unsigned int i = 0; i &lt; shapes_.size(); ++i) {\n            double d = shapes_[i]-&gt;intersect(first_ray);\n            if (d &gt; 1.0 &amp;&amp; (d &lt; delta || delta == -1)) {\n                delta = d;\n                closest_obj = shapes_[i].get();\n            }\n        }\n\n        if (delta == -1) {\n            p.color = Color(0.0, 0.0, 0.0);\n        } else {\n            glm::vec3 hit_point = first_ray.origin + (float) delta * first_ray.direction;\n            p.color = calculateColor(closest_obj, hit_point, first_ray);\n        }\n\n        // draw pixel\n        write(p);\n    }\n}\nppm_.save(filename_);\n}\n\nvoid Renderer::write(Pixel const&amp; p)\n{\n // flip pixels, because of opengl glDrawPixels\nsize_t buf_pos = (width_*p.y + p.x);\nif (buf_pos &gt;= colorbuffer_.size() || (int)buf_pos &lt; 0) {\nstd::cerr &lt;&lt; \"Fatal Error Renderer::write(Pixel p) : \"\n  &lt;&lt; \"pixel out of ppm_ : \"\n  &lt;&lt; (int)p.x &lt;&lt; \",\" &lt;&lt; (int)p.y\n  &lt;&lt; std::endl;\n} else {\n colorbuffer_[buf_pos] = p.color;\n }\n\nppm_.write(p);\n}\n\n/*Optional_hit Renderer::intersect(Ray const&amp; ray) const{\nOptional_hit o;\n    Optional_hit temp;\n    std::vector&lt;float&gt; hits;*/\n\n  void Renderer::testOutput() {\n    std::cout &lt;&lt; \"Objects in scene:\" &lt;&lt; std::endl;\n    for (unsigned int i = 0; i &lt; shapes_.size(); ++i) {\n    std::cout &lt;&lt; \"Object names: \" &lt;&lt; shapes_[i]-&gt;getName() &lt;&lt; std::endl;\n    }\n    for (unsigned int i = 0; i &lt; lights_.size(); ++i) {\n    std::cout &lt;&lt; \"Lightsource: \" &lt;&lt; lights_[i].getName() &lt;&lt; std::endl;\n    }\n    std::cout &lt;&lt; \"Camera used: \" &lt;&lt; camera_.name &lt;&lt; \" | Focal Length: \" &lt;&lt;      camera_.position.z &lt;&lt; std::endl;\n}\nColor Renderer::calculateColor(const Shape* hit_obj, glm::vec3 const&amp;     hit_point, Ray const&amp; first_ray) {\nColor final_color = Color(0.0, 0.0, 0.0);\n\nfor (unsigned int i = 0; i &lt; lights_.size(); ++i) {\n\n    glm::vec3 n = hit_obj-&gt;getNormalAt(hit_point);\n    glm::vec3 l = lights_[i].getPosition() - hit_point;\n\n    Ray sec_ray = Ray(hit_point, l);\n\n    Color diffuse_light;\n    Color specular_light;\n    if (!Shadow(sec_ray) &amp;&amp; glm::dot(glm::normalize(n), glm::normalize(l)) &gt; 0) {\n\n        Color Ip = lights_[i].getLD();\n        Color kd = hit_obj-&gt;getMaterial().getKD();\n        diffuse_light = (Ip * kd * glm::dot(glm::normalize(n), glm::normalize(l)));\n\n        glm::vec3 r = 2 * glm::dot(glm::normalize(n), glm::normalize(l)) * glm::normalize(n) - glm::normalize(l);\n        glm::vec3 v = glm::normalize(first_ray.direction);\n        v *= -1;\n        if (glm::dot(r, v) &gt; 0) {\n            double m = hit_obj-&gt;getMaterial().getM();\n            Color ks = hit_obj-&gt;getMaterial().getKS();\n            specular_light = ks * pow(glm::dot(r, v), m);\n        } else {\n            specular_light = Color(0.0, 0.0, 0.0);\n        }\n    } else {\n\n        diffuse_light = Color(0.0, 0.0, 0.0);\n        specular_light = Color(0.0, 0.0, 0.0);\n    }\n    final_color += diffuse_light + specular_light;\n} \nColor Ia = lights_[0].getLA();\nColor ka = hit_obj-&gt;getMaterial().getKA();\nColor ambient_light = Ia * ka;\nfinal_color += ambient_light;\n\nreturn final_color;\n</code></pre>\n\n<p>}</p>\n\n<p>the scene header file: </p>\n\n<pre><code>#define SCENE_HPP\n#include &lt;vector&gt;\n#include &lt;memory&gt;\n#include &lt;material.h&gt;\n#include &lt;camera.h&gt;\n#include &lt;light.h&gt;\n#include &lt;shape.h&gt;\n#include &lt;map&gt;\n\nstruct Scene {\n\nScene();\n\nvoid render() const;\nvoid add(std::shared_ptr&lt;Material&gt; material);\nvoid add(std::shared_ptr&lt;Shape&gt; shape);\nvoid add(std::shared_ptr&lt;Light&gt; light);\nvoid add(std::shared_ptr&lt;Camera&gt; camera);\n\nstd::vector&lt;std::shared_ptr&lt;Shape&gt;&gt; const&amp; shapes() const;\nstd::vector&lt;std::shared_ptr&lt;Material&gt;&gt; const&amp; materials() const;\nstd::vector&lt;std::shared_ptr&lt;Light&gt;&gt; const&amp; lights() const;\nstd::vector&lt;std::shared_ptr&lt;Camera&gt;&gt; const&amp; cameras() const;\n\n\nvoid readFile(std::string file);\nstd::map&lt;std::string, std::shared_ptr&lt;Material&gt;&gt; getMaterials() const;\nstd::vector&lt;std::shared_ptr&lt;Shape&gt;&gt; getShapes() const;\nstd::vector&lt;Light&gt; getLights() const;\n//std::vector&lt;Camera&gt; getCamera();\nCamera getCamera();\nMaterial checkMaterialName(std::string name);\n\n\nstd::vector&lt;std::shared_ptr&lt;Shape&gt;&gt; shapes_;\nstd::map&lt;std::string, Material&gt; materials_;\nstd::vector&lt;std::shared_ptr&lt;Light&gt;&gt; lights_;\nstd::vector&lt;std::shared_ptr&lt;Camera&gt;&gt; camera_;\n\nunsigned width = 600; \nunsigned height = 600; \n};\n#endif\n</code></pre>\n\n<p>and the renderer header:</p>\n\n<pre><code>#include \"color.hpp\"\n#include \"pixel.hpp\"\n#include \"ppmwriter.hpp\"\n#include &lt;string&gt;\n#include &lt;glm/glm.hpp&gt;\n#include &lt;map&gt;\n#include &lt;shape.h&gt;\n#include \"sdfloader.h\"\n#include &lt;optional_hit.h&gt;\n#include &lt;scene.h&gt;\n\nclass Renderer {\npublic:\n    Renderer(Scene const&amp; scene, unsigned w, unsigned h, std::string const&amp;     file);\n\n  void render();\n  void write(Pixel const&amp; p);\n\n  void testOutput();\n\n  Color calculateColor(const Shape* hit_obj, glm::vec3 const&amp; hit_point, Ray     const&amp; prim_ray);\n\n  bool Shadow(Ray sec_ray);\n\n  inline std::vector&lt;Color&gt; const&amp; colorbuffer() const {\n   return colorbuffer_;\n  }\n\n  unsigned get_width() const;\n  unsigned get_height() const;\n  std::string get_filename() const;\n  Scene get_scene() const;\n  std::vector&lt;std::shared_ptr&lt;Shape&gt;&gt; const&amp; shapes() const;\n\n // OptionalHit intersect(Ray const&amp; ray) const;\n\n  //void render_scene(std::string file);      \n\n\nprivate:\n  unsigned width_;\n  unsigned height_;\n  std::vector&lt;Color&gt; colorbuffer_;\n  std::string filename_;\n  PpmWriter ppm_;\n\n  Scene scene_;\n  Camera camera_;\n\n  std::vector&lt;Light&gt; lights_;\n  std::vector&lt;std::shared_ptr&lt;Shape&gt;&gt; shapes_;\n\n};\n</code></pre>\n\n<p>If anyone can make any sense of this, any help is really appreciated!</p>\n"}, {"tags": ["c++", "pointers", "avx2"], "comments": [{"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 2, "creation_date": 1468448672, "post_id": 38362528, "comment_id": 64137737, "body": "What compiler is this? I believe this is one of those corner cases in GCC where a strict-aliasing violation will actually cause problems even though they&#39;re not supposed to. (SIMD types are declared <code>__may_alias__</code>.) Have you tried disabling strict-aliasing? Does <code>-Wstrict-aliasing</code> make it complain?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 1, "creation_date": 1468452650, "post_id": 38362528, "comment_id": 64138937, "body": "@Mysticial: Perhaps the compiler gives up on keeping the variables coherent because the program has undefined behaviour?  <code>ptr[m]</code> for m=4..9 accesses outside <code>__m256i R_A0to3</code>.  In any case, this is a silly way to use vectors.  Don&#39;t do this.  If you really want to store to a buffer and modify a vector, write code that does that and reloads the vector afterwards.  Or possibly use a union.  Type-punning with pointer-casts is not a good idiom."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1468453283, "post_id": 38362528, "comment_id": 64139083, "body": "@PeterCordes Aha, you&#39;re right! I didn&#39;t see it was going out-of-bounds."}, {"owner": {"reputation": 37, "user_id": 6404750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bccc1860f5f85071be4f75aa48721ad2?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Patel", "link": "https://stackoverflow.com/users/6404750/ravi-patel"}, "edited": false, "score": 0, "creation_date": 1468487166, "post_id": 38362528, "comment_id": 64150830, "body": "Sorry, I removed a bunch of code to make it readable here on stack but I guess i introduced a bug.  In reality, m is never greater than 3. I&#39;ll edit the post for clarity.  The compiler is g++ (Ubuntu 5.3.1-14ubuntu2.1) 5.3.1 20160413. I added -Wstrict-aliasing."}, {"owner": {"reputation": 37, "user_id": 6404750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bccc1860f5f85071be4f75aa48721ad2?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Patel", "link": "https://stackoverflow.com/users/6404750/ravi-patel"}, "edited": false, "score": 0, "creation_date": 1468487499, "post_id": 38362528, "comment_id": 64151091, "body": "So I figured out the problem, kinda. I was compiling with -O3 and -O2. Compiling with -O1 however, makes the problem go away.   Any insight into what could be causing the problem?"}, {"owner": {"reputation": 37, "user_id": 6404750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bccc1860f5f85071be4f75aa48721ad2?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Patel", "link": "https://stackoverflow.com/users/6404750/ravi-patel"}, "edited": false, "score": 1, "creation_date": 1468488134, "post_id": 38362528, "comment_id": 64151541, "body": "@Mystical. After some googling of unions I found out about this intrinsic function _mm256_insert_epi64 (__m256i a, __int64 i, const int index) which pretty much avoids this pointer casting. Thanks"}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1468488254, "post_id": 38362528, "comment_id": 64151623, "body": "The -O1/-O2 difference could point at -fstrict-aliasing indeed. But really, without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, this is useless."}], "answers": [{"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1469512739, "post_id": 38575836, "comment_id": 64552741, "body": "If you need all elements as separate scalars, storing to a local array is not a bad option.  You&#39;ll probably get better code than with extracts.  Or use a union for type-punning instead of pointer-casting, since IIRC, GNU C guarantees that union-based type-punning works.  (I think it&#39;s safe on other x86 compilers that don&#39;t support the GNU C extensions, too.)"}, {"owner": {"reputation": 3157, "user_id": 73007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b736113aa1557b9a110b5123d81d5f6?s=128&d=identicon&r=PG", "display_name": "Daniel Lemire", "link": "https://stackoverflow.com/users/73007/daniel-lemire"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1470142789, "post_id": 38575836, "comment_id": 64818374, "body": "&quot;Or use a union for type-punning instead of pointer-casting, since IIRC, GNU C guarantees that union-based type-punning works. (I think it&#39;s safe on other x86 compilers that don&#39;t support the GNU C extensions, too.)&quot; In this case, I think you have little idea how the compiler will implement it... probably with stores and loads though I could be wrong. That may or may not be what you want."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1470148971, "post_id": 38575836, "comment_id": 64823147, "body": "<a href=\"https://godbolt.org/g/oqFjDE\" rel=\"nofollow noreferrer\">gcc stores/reloads, clang uses extract instructions</a>.  That&#39;s just a missed-optimization from gcc; but IDK how soon it&#39;ll be fixed.  Obviously either way is pretty low performance (esp. store/modify/reload store-forwarding failure), so should mainly be used for things like debug-prints.  I hadn&#39;t realized <code>_mm256_extract_epi64</code> existed / worked on upper elements, because <a href=\"http://www.felixcloutier.com/x86/PEXTRB:PEXTRD:PEXTRQ.html\" rel=\"nofollow noreferrer\"><code>vpextrq</code></a> doesn&#39;t, so that&#39;s handy.  Also, <code>_mm256_lddqu_si256</code> is pointless; just use <code>loadu</code>.  (or <code>load</code> if aligned, I guess)."}, {"owner": {"reputation": 3157, "user_id": 73007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b736113aa1557b9a110b5123d81d5f6?s=128&d=identicon&r=PG", "display_name": "Daniel Lemire", "link": "https://stackoverflow.com/users/73007/daniel-lemire"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1470756620, "post_id": 38575836, "comment_id": 65073896, "body": "&quot; Also, _mm256_lddqu_si256 is pointless; just use loadu. (or load if aligned, I guess).&quot; I have not come across a case where load as opposed to loadu or lddq was faster. I also unaware of any performance difference between lddqu and loadu, but the two exists and Intel says lddqu can be faster (something I have never observed but I keep the faith)."}], "tags": [], "owner": {"reputation": 3157, "user_id": 73007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b736113aa1557b9a110b5123d81d5f6?s=128&d=identicon&r=PG", "display_name": "Daniel Lemire", "link": "https://stackoverflow.com/users/73007/daniel-lemire"}, "is_accepted": true, "score": 2, "last_activity_date": 1470142754, "last_edit_date": 1470142754, "creation_date": 1469474461, "answer_id": 38575836, "question_id": 38362528, "link": "https://stackoverflow.com/questions/38362528/int64-t-pointer-cast-to-avx2-intrinsic-m256i/38575836#38575836", "title": "int64_t pointer cast to AVX2 intrinsic _m256i", "body": "<p>I suggest using the <code>_mm256_extract_epi64</code> and <code>_mm256_insert_epi64</code> intrinsics when you need occasional access to individual elements. If you need to access all elements from the vector, consider using <code>_mm256_store_si256</code> and <code>_mm256_lddqu_si256</code> to store and load it. These intrinsics are less likely to rely on undefined behavior and they are transparent as to the machine instructions being generated (and thus as to the performance).</p>\n"}], "owner": {"reputation": 37, "user_id": 6404750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bccc1860f5f85071be4f75aa48721ad2?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Patel", "link": "https://stackoverflow.com/users/6404750/ravi-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 1, "accepted_answer_id": 38575836, "answer_count": 1, "score": 3, "last_activity_date": 1470142754, "creation_date": 1468447742, "last_edit_date": 1468487249, "question_id": 38362528, "link": "https://stackoverflow.com/questions/38362528/int64-t-pointer-cast-to-avx2-intrinsic-m256i", "title": "int64_t pointer cast to AVX2 intrinsic _m256i", "body": "<p>Hello I have a strange problem with AVX2 intrinsics. I create a pointer to a _m256i vector with a int64_t* cast. I then assign a value by dereferencing the pointer. The strange thing is that the value isn't observed in the vector variable, unless i run a few cout statements after it. The pointer and the vector have the same memory address and dereferencing the pointer produces the correct value, but the vector does not.  What am I missing?</p>\n\n<pre><code>// Vector Variable \n__m256i R_A0to3 = _mm256_set1_epi32(0xFFFFFFFF);\n\nint64_t *ptr = NULL;\nfor(int m=0; m&lt;4; m++){\n    // Cast pointer to vector type\n    ptr = (int64_t*)&amp;R_A0to3;\n\n    cout&lt;&lt;\"ptr_ADDRESS:      \"&lt;&lt;ptr&lt;&lt;endl;\n    cout&lt;&lt;\"&amp;R_A0to3_ADDRESS: \"&lt;&lt;&amp;R_A0to3&lt;&lt;endl;\n\n    // access\n    ptr[m] = (int64_t) m_array[m];\n\n    // generic function that prints out register\n    print_mm256_reg&lt;int64_t&gt;(R_A0to3, \"R_A0to3\");\n    cout&lt;&lt;\"m_array: \"&lt;&lt; m_array[m]&lt;&lt;std::ends;\n\n    // Additional print statements\n    cout&lt;&lt;\"ptr[m]: \"&lt;&lt; ptr[m]&lt;&lt;std::endl;\n    cout&lt;&lt;\"ptr[0]: \"&lt;&lt; ptr[0]&lt;&lt;std::endl;\n    cout&lt;&lt;\"ptr[1]: \"&lt;&lt; ptr[1]&lt;&lt;std::endl;\n    cout&lt;&lt;\"ptr[2]: \"&lt;&lt; ptr[2]&lt;&lt;std::endl;\n    cout&lt;&lt;\"ptr[3]: \"&lt;&lt; ptr[3]&lt;&lt;std::endl;\n    print_mm256_reg&lt;int64_t&gt;(R_A0to3, \"R_A0to3\");\n}\n</code></pre>\n\n<hr>\n\n<pre><code>Output:\n ptr_ADDRESS      0x7ffd9313e880\n &amp;R_A0to3_ADDRESS 0x7ffd9313e880\n m_array: 8\n printing reg -    R_C0to3    -1|  -1|  -1|  -1|\n printing reg -    R_D0to3    -1|  -1|  -1|  -1|\n\nOutput with Additional print statements:\nptr_ADDRESS      0x7ffd36359e20\n&amp;R_A0to3_ADDRESS 0x7ffd36359e20\nprinting reg -    R_A0to3     -1|  -1|  -1|  -1|\nm_array: 8\n\nptr[0]: 8\nptr[1]: -1\nptr[2]: -1\nptr[3]: -1\nprinting reg -    R_A0to3      8|  -1|  -1|  -1|\n</code></pre>\n"}, {"tags": ["c++", "windbg"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1468450532, "post_id": 38362274, "comment_id": 64138382, "body": "You can&#39;t trust it at all, of course. Strange question."}, {"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1468507027, "post_id": 38362274, "comment_id": 64164294, "body": "@EJP why is it strange question? I am trying to get any leads if I can from mismatched pdb files when I don&#39;t have the originals but I do have the original version of code or at least very close to it."}], "answers": [{"tags": [], "owner": {"reputation": 6563, "user_id": 1020072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ARs87.jpg?s=128&g=1", "display_name": "Sean Cline", "link": "https://stackoverflow.com/users/1020072/sean-cline"}, "is_accepted": false, "score": 3, "last_activity_date": 1468494058, "creation_date": 1468494058, "answer_id": 38372448, "question_id": 38362274, "link": "https://stackoverflow.com/questions/38362274/is-mismatched-symbols-complete-show-stopper-or-i-can-trust-them-partially-to-ext/38372448#38372448", "title": "Is mismatched symbols complete show stopper or I can trust them partially to extract leads?", "body": "<p>I've had to do this same trick numerous times for releases that shipped without pdb files.</p>\n\n<p>The closer your build environment is to the one used to build the binary, the better luck you'll have. Making sure you have the exact source code, compiler version, and compiler/linker flags used to build the binary will make your life a lot easier. Sometimes you'll get lucky and the symbols will be so close you won't even notice anything strange.</p>\n\n<blockquote>\n  <p>Should I be reasonably sure that at least the crash is in the Db module?</p>\n</blockquote>\n\n<p>That is about the only thing you can be sure of. You actually have that information without symbols.\n(Without symbols, it tends to show an exported symbol with a big offset, like <code>Db!DllMain+0x123456</code>. In that case, you can still trust that the module is correct.)</p>\n\n<blockquote>\n  <p>Can I also trust that the crash is in the same filename (abc.cpp) that it says it is?</p>\n</blockquote>\n\n<p>Nope. Your job is now to verify <em>everything</em> you see.</p>\n\n<p>Things to verify:</p>\n\n<ul>\n<li><p>When looking at the callstack, does the source code show the function calling the next frame somewhere in that function's body? If so, there's a good chance it is correct. If not, it still might be correct if a function call was inlined.</p></li>\n<li><p>At the top frame, does the disassembly at the <code>ExceptionAddress</code> look like something that the compiler should have generated for the source code the symbols point to? (For example: I'd expect <code>CDbaAdoRecordset</code>'s constructor to be calling methods related to <code>RecordSets</code> like <code>CoCreateInstance(/*...*/, __uuidof(Recordset), /*...*/);</code>.</p></li>\n</ul>\n\n<p>The fact that you know what things come out of the symbol file (function names, line numbers, etc...) should give you an idea of what you're looking at and what might be wrong.</p>\n\n<hr>\n\n<p>Your best bet is to start where you would normally start debugging even if you had matching symbols... <code>Attempt to read from address 00000004</code>\nIt's probably trying to access the offset 4 on an object that's null. What's that object? Godspeed!</p>\n"}, {"comments": [{"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1468507628, "post_id": 38372756, "comment_id": 64164703, "body": "Thanks and there has been no obvious change to the code like module name, file name or class name change, I will add that to OP."}], "tags": [], "owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "is_accepted": false, "score": 3, "last_activity_date": 1468565174, "last_edit_date": 1468565174, "creation_date": 1468495011, "answer_id": 38372756, "question_id": 38362274, "link": "https://stackoverflow.com/questions/38362274/is-mismatched-symbols-complete-show-stopper-or-i-can-trust-them-partially-to-ext/38372756#38372756", "title": "Is mismatched symbols complete show stopper or I can trust them partially to extract leads?", "body": "<p>Most things in an exception record are not related to PDBs, it will only be tried to resolve the exception address to a call stack.</p>\n\n<p>I'm not exactly sure whether WinDbg would load a PDB for a DLL where the module name does not match. Also, it's unlikely you rename a DLL, I'd say.</p>\n\n<p>So, things you can trust from an exception record with mismatched PDBs are:</p>\n\n<pre><code>ExceptionAddress: 020b1143 (Db!\n   ExceptionCode: c0000005 (Access violation)\n  ExceptionFlags: 00000000\nNumberParameters: 2\n   Parameter[0]: 00000000\n   Parameter[1]: 00000004\nAttempt to read from address 00000004\n</code></pre>\n\n<p>Things you can't trust:</p>\n\n<pre><code>!CDbaAdoRecordset::CDbaAdoRecordset+0x00000073) [abc.cpp @80]\n</code></pre>\n\n<blockquote>\n  <p>Is it more likely the call stack is correct when it shows the actual functions that I can actually see in code [including function names]?</p>\n</blockquote>\n\n<p>No. This may be accidental.</p>\n\n<blockquote>\n  <p>what is it that the crash dump files contribute in all this connections which I can probably use to narrow down the problem? </p>\n</blockquote>\n\n<p>Nothing. You can only draw conclusions from your developer knowledge: what is the time difference of the mismatched PDB and the DLL and how many changes have you made in which files. Use a version control diff to find that out.</p>\n\n<h2>If you have made changes to the source code</h2>\n\n<p>This matching can go wrong, because</p>\n\n<ul>\n<li>you have renamed the method in the meanwhile. Then the method name does not match</li>\n<li>you have inserted lines, e.g. comments. Then the line number does not match</li>\n<li>you have renamed the source file. Then the source file does not match.</li>\n<li>you have added a class. This may change the address at which the compiler generates the method in question, because it has e.g. inserted the new class before.</li>\n</ul>\n\n<h2>If you have not made changes to the source code</h2>\n\n<p>This matching can still go wrong, because</p>\n\n<ul>\n<li>your compiler environment has changed, e.g. due to an update or hotfix in the compiler, it now generates different assembly instructions.</li>\n<li>you compile with different compiler settings (hopefully your compiler settings are stored along with the source code in a version control system, so you don't have this issue)</li>\n<li>the compiler needn't compile the exact same way in another run. While there's no particular reason to compile it differently, compilers nowadays can compile in parallel (multi-threaded). Due to thread scheduling, some classes might be compiled in a different order, which may or may not result in a different DLL + PDB (depending on the implementation of the compiler or linker).</li>\n</ul>\n"}], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1468565174, "creation_date": 1468446500, "last_edit_date": 1468508281, "question_id": 38362274, "link": "https://stackoverflow.com/questions/38362274/is-mismatched-symbols-complete-show-stopper-or-i-can-trust-them-partially-to-ext", "title": "Is mismatched symbols complete show stopper or I can trust them partially to extract leads?", "body": "<p>I don't have the correct symbol files (Pdbs) so I am using <code>.reload /f /i</code> to load what I have regenerated ignoring the time stamp. My project has many modules and this does load some of them but not others, I don't know why not all.</p>\n\n<p>However I want to know how much can I trust the mismatch symbol file if anything at all. This the exception information from crash dump file</p>\n\n<pre><code>0:000&gt; .exr -1\nExceptionAddress: 020b1143 (Db!CDbaAdoRecordset::CDbaAdoRecordset+0x00000073) [abc.cpp @80]\n   ExceptionCode: c0000005 (Access violation)\n  ExceptionFlags: 00000000\nNumberParameters: 2\n   Parameter[0]: 00000000\n   Parameter[1]: 00000004\nAttempt to read from address 00000004\n</code></pre>\n\n<p>Should I be reasonably sure that at least the crash is in the Db module? Can I also trust that the crash is in the same fil ename (abc.cpp) that it says it is? Is it more likely the call stack is correct when it shows the actual functions that I can actually see in code [including function names]?</p>\n\n<p>I know the symbols and line numbers come from the pdb files so it's probably under question but what is it that the crash dump files contribute in all this connections which I can probably use to narrow down the problem? </p>\n\n<p>I am trying to extract any leads or useful information that I can from mismatched symbol files.</p>\n\n<p><strong>Update</strong></p>\n\n<p>I am debugging the same version of code which produced the dump crash. Things like if modules, class names or file names could have been reamed can be completely ruled out since we don't do that. In theory the version I am debugging is exact match of the crashed version since its version controlled.</p>\n"}, {"tags": ["c++", "eigen"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 6575951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afd16c3bd44d1cbad8cb1d7cf3d27c73?s=128&d=identicon&r=PG&f=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/6575951/yang"}, "edited": false, "score": 0, "creation_date": 1468511469, "post_id": 38366959, "comment_id": 64167634, "body": "I tried this and got &quot; <code>error: bad array initializer</code> &quot;. Could that be a compiler issue? I use g++ 4.4.7 with the flag <code>-std=c++0x</code>."}, {"owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "reply_to_user": {"reputation": 35, "user_id": 6575951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afd16c3bd44d1cbad8cb1d7cf3d27c73?s=128&d=identicon&r=PG&f=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/6575951/yang"}, "edited": false, "score": 0, "creation_date": 1468511607, "post_id": 38366959, "comment_id": 64167722, "body": "it is too old. try at least 4.9"}, {"owner": {"reputation": 35, "user_id": 6575951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afd16c3bd44d1cbad8cb1d7cf3d27c73?s=128&d=identicon&r=PG&f=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/6575951/yang"}, "edited": false, "score": 0, "creation_date": 1468517346, "post_id": 38366959, "comment_id": 64170960, "body": "thanks, I will try it once our computer system administrative make the newer version of <code>gcc</code> available today. A follow up question would be, what if I want the number of matrices to be <code>nmat</code> instead of <code>2</code>? Is there a way to introduce a <code>for</code> loop in the initializer list?"}, {"owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "reply_to_user": {"reputation": 35, "user_id": 6575951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afd16c3bd44d1cbad8cb1d7cf3d27c73?s=128&d=identicon&r=PG&f=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/6575951/yang"}, "edited": false, "score": 0, "creation_date": 1468517605, "post_id": 38366959, "comment_id": 64171107, "body": "No way. Constructing Map on the fly will be better."}, {"owner": {"reputation": 35, "user_id": 6575951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afd16c3bd44d1cbad8cb1d7cf3d27c73?s=128&d=identicon&r=PG&f=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/6575951/yang"}, "edited": false, "score": 0, "creation_date": 1468595981, "post_id": 38366959, "comment_id": 64207749, "body": "I have tested it using gcc 4.9.2 and it is working. Thanks!"}], "tags": [], "owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "is_accepted": true, "score": 1, "last_activity_date": 1468478234, "last_edit_date": 1468478234, "creation_date": 1468477688, "answer_id": 38366959, "question_id": 38362194, "link": "https://stackoverflow.com/questions/38362194/in-eigen-how-to-combine-multiple-mapped-matrices-as-an-array-of-matrices/38366959#38366959", "title": "In Eigen, how to combine multiple mapped matrices as an array of matrices", "body": "<p>With C++11 you can do this</p>\n\n<pre><code>class MyClass {\npublic:\n  MyClass(int* arr, int nrow, int ncol, int nmat) :\n      mat { { arr, nrow, ncol, Stride&lt;Dynamic, Dynamic&gt;(nrow * nmat, nmat) },\n            { arr + 1, nrow, ncol, Stride&lt;Dynamic, Dynamic&gt;(nrow * nmat, nmat) } } {\n    std::cout &lt;&lt; mat[1].data() - arr &lt;&lt; std::endl;\n    std::cout &lt;&lt; mat[1].rows() &lt;&lt; std::endl;\n    std::cout &lt;&lt; mat[1].cols() &lt;&lt; std::endl;\n    std::cout &lt;&lt; mat[1].innerStride() &lt;&lt; std::endl;\n    std::cout &lt;&lt; mat[1].outerStride() &lt;&lt; std::endl;\n  }\n\n  Map&lt;MatrixXi, 0, Stride&lt;Dynamic, Dynamic&gt; &gt; mat[2];\n};\n</code></pre>\n\n<p>It should be case 5 of the list initialization in the following link.</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/language/list_initialization</a></p>\n\n<p>On the other hand, <code>Eigen::Map</code> is just a light-weight wrapper to the raw pointers and dimensions. You may want to put <code>arr</code>, <code>nrow</code>, <code>ncol</code> and <code>nmat</code> as class members and construct <code>Eigen::Map</code> on the fly.</p>\n"}], "owner": {"reputation": 35, "user_id": 6575951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afd16c3bd44d1cbad8cb1d7cf3d27c73?s=128&d=identicon&r=PG&f=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/6575951/yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 38366959, "answer_count": 1, "score": 1, "last_activity_date": 1468478234, "creation_date": 1468446163, "question_id": 38362194, "link": "https://stackoverflow.com/questions/38362194/in-eigen-how-to-combine-multiple-mapped-matrices-as-an-array-of-matrices", "title": "In Eigen, how to combine multiple mapped matrices as an array of matrices", "body": "<p>I have a class that has multiple mapped matrices as members. The code is shown below:</p>\n\n<pre><code>class MyClass {\npublic:\n  MyClass(int nrow, int ncol, int nmat) : \n    arr(new int [nmat*nrow*ncol]),\n    mat1(arr, nrow, ncol, Stride&lt;Dynamic, Dynamic&gt;(nrow * nmat, nmat)),\n    mat2(arr + 1, nrow, ncol, Stride&lt;Dynamic, Dynamic&gt;(nrow * nmat, nmat)) {}\n\n  int *arr;\n  Map&lt;MatrixXi, 0, Stride&lt;Dynamic, Dynamic&gt; &gt; mat1;\n  Map&lt;MatrixXi, 0, Stride&lt;Dynamic, Dynamic&gt; &gt; mat2;\n};\n\nint main()\n{\n  int nmat = 2;        // number of matrices\n  int nrow = 3;        // number of rows for each matrix\n  int ncol = 4;        // number of columns for each matrix\n  int arr_size = nmat*nrow*ncol; // size of the array.\n\n  MyClass A (nrow, ncol, nmat);\n  for (int i=0; i&lt;arr_size; i++) {\n    A.arr[i] = i+1;\n  }\n\n  cout &lt;&lt;\"mat1 = \\n\"&lt;&lt;A.mat1&lt;&lt;endl;\n  cout &lt;&lt;\"mat2 = \\n\"&lt;&lt;A.mat2&lt;&lt;endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>Now I want to make <code>mat1</code> and <code>mat2</code> be an array of two matrics, as <code>mat[0]</code> and <code>mat[1]</code>. I was trying to do something like this:</p>\n\n<pre><code>class MyClass {\npublic:\n  MyClass(int nrow, int ncol, int nmat) : \n    arr(new int [nmat*nrow*ncol]),\n    mat[0](arr, nrow, ncol, Stride&lt;Dynamic, Dynamic&gt;(nrow * nmat, nmat)),\n    mat[1](arr + 1, nrow, ncol, Stride&lt;Dynamic, Dynamic&gt;(nrow * nmat, nmat)) {}\n\n  int *arr;\n  Map&lt;MatrixXi, 0, Stride&lt;Dynamic, Dynamic&gt; &gt; mat[2];\n};\n</code></pre>\n\n<p>It obviously doesn't work, since I cant do this in the initializer list. But to do this kind of mapping with stride, I have to use initializer list. Anyone has an idea on how to implement this?</p>\n"}, {"tags": ["c++", "matlab", "console"], "comments": [{"owner": {"reputation": 8479, "user_id": 4363864, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/G8BOV.jpg?s=128&g=1", "display_name": "obchardon", "link": "https://stackoverflow.com/users/4363864/obchardon"}, "edited": false, "score": 1, "creation_date": 1468446312, "post_id": 38362089, "comment_id": 64136825, "body": "what did you get if you try something like <code>system(&#39;ping google.com&#39;)</code> ? Did you also get everything at the end of the ping test ? If it&#39;s not a problem for you, you should perhaps print a new line each time..."}, {"owner": {"reputation": 142, "user_id": 3757276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/j4bnG.jpg?s=128&g=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/3757276/jim"}, "reply_to_user": {"reputation": 8479, "user_id": 4363864, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/G8BOV.jpg?s=128&g=1", "display_name": "obchardon", "link": "https://stackoverflow.com/users/4363864/obchardon"}, "edited": false, "score": 0, "creation_date": 1468446708, "post_id": 38362089, "comment_id": 64136990, "body": "@obchardon I do not, actually; it outputs to the console sequentially.  As far as I can tell, <code>system(&#39;ping google.com&#39;)</code> behaves exactly as <code>ping google.com</code> does in the Windows console."}, {"owner": {"reputation": 142, "user_id": 3757276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/j4bnG.jpg?s=128&g=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/3757276/jim"}, "reply_to_user": {"reputation": 8479, "user_id": 4363864, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/G8BOV.jpg?s=128&g=1", "display_name": "obchardon", "link": "https://stackoverflow.com/users/4363864/obchardon"}, "edited": false, "score": 0, "creation_date": 1468446887, "post_id": 38362089, "comment_id": 64137060, "body": "@obchardon printing the completion information as a new line (including the <code>\\n</code> character) doesn&#39;t help - all the lines are printed at the executable&#39;s termination."}, {"owner": {"reputation": 106322, "user_id": 2586922, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/rFMSx.png?s=128&g=1", "display_name": "Luis Mendo", "link": "https://stackoverflow.com/users/2586922/luis-mendo"}, "edited": false, "score": 1, "creation_date": 1468446975, "post_id": 38362089, "comment_id": 64137094, "body": "Is it any use to add <code>&amp;</code> at the end? <code>exe_status = system(&#39;MySimulation.exe &amp;&#39;);</code>"}, {"owner": {"reputation": 1006, "user_id": 1627585, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/71e0036ad69d81de092d2b1aa528e684?s=128&d=identicon&r=PG", "display_name": "Matthias W.", "link": "https://stackoverflow.com/users/1627585/matthias-w"}, "edited": false, "score": 1, "creation_date": 1468447108, "post_id": 38362089, "comment_id": 64137148, "body": "Check out <a href=\"http://stackoverflow.com/questions/31306845/matlab-display-dos-command-output-to-static-text\">this</a> thread and <a href=\"http://de.mathworks.com/matlabcentral/answers/71078-command-window-output-to-gui\" rel=\"nofollow noreferrer\">this one</a>. It&#39;s a bit hacky, but may work."}, {"owner": {"reputation": 849, "user_id": 5848375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kliTJ.png?s=128&g=1", "display_name": "mhopeng", "link": "https://stackoverflow.com/users/5848375/mhopeng"}, "edited": false, "score": 1, "creation_date": 1468474474, "post_id": 38362089, "comment_id": 64143991, "body": "You need a second output parameter: [status,results] = system(&#39;comp&#39;, &#39;-echo&#39;);"}, {"owner": {"reputation": 142, "user_id": 3757276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/j4bnG.jpg?s=128&g=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/3757276/jim"}, "reply_to_user": {"reputation": 106322, "user_id": 2586922, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/rFMSx.png?s=128&g=1", "display_name": "Luis Mendo", "link": "https://stackoverflow.com/users/2586922/luis-mendo"}, "edited": false, "score": 0, "creation_date": 1468504896, "post_id": 38362089, "comment_id": 64162862, "body": "@LuisMendo adding <code>&amp;</code> to the command allows the executable to run in the background, i.e. it opens up a Windows console.  Unfortunately, it also means that the MATLAB script continues onwards.  Since the rest of the script analyzes data files built by the executable, this isn&#39;t a workable solution."}, {"owner": {"reputation": 142, "user_id": 3757276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/j4bnG.jpg?s=128&g=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/3757276/jim"}, "reply_to_user": {"reputation": 849, "user_id": 5848375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kliTJ.png?s=128&g=1", "display_name": "mhopeng", "link": "https://stackoverflow.com/users/5848375/mhopeng"}, "edited": false, "score": 0, "creation_date": 1468505286, "post_id": 38362089, "comment_id": 64163104, "body": "@mhopeng adding a second output parameter doesn&#39;t change the behavior."}, {"owner": {"reputation": 849, "user_id": 5848375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kliTJ.png?s=128&g=1", "display_name": "mhopeng", "link": "https://stackoverflow.com/users/5848375/mhopeng"}, "edited": false, "score": 0, "creation_date": 1468615579, "post_id": 38362089, "comment_id": 64218050, "body": "Can you show us the print statement from your C++ exe?"}], "answers": [{"comments": [{"owner": {"reputation": 142, "user_id": 3757276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/j4bnG.jpg?s=128&g=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/3757276/jim"}, "edited": false, "score": 0, "creation_date": 1468857523, "post_id": 38405097, "comment_id": 64287982, "body": "Well, I can rule out the overprint as the source of the issue.  I disabled the updating &quot;completion&quot; line and it didn&#39;t affect the MATLAB console behavior.  I have print statements both before and after the simulation, which takes about a minute to run.  Both statements still appear simultaneously, about a minute after initiating the executable.  Thanks for the details, though - I&#39;ll try to replicate the steps you took to try and narrow down the issue.  For the record, I&#39;m running on Windows 7."}], "tags": [], "owner": {"reputation": 849, "user_id": 5848375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kliTJ.png?s=128&g=1", "display_name": "mhopeng", "link": "https://stackoverflow.com/users/5848375/mhopeng"}, "is_accepted": false, "score": 1, "last_activity_date": 1468617166, "creation_date": 1468617166, "answer_id": 38405097, "question_id": 38362089, "link": "https://stackoverflow.com/questions/38362089/how-can-i-get-matlabs-system-or-dos-to-show-the-console-output-in-real-time/38405097#38405097", "title": "How can I get MATLAB&#39;s system() or dos() to show the console output in real time?", "body": "<p>I got curious so I tried a few things. I tried a bash script, a c executable, and a python script, and all of them display their output the Matlab command window in \"real time\", which is the desired behavior for the question. I could not re-create the situation described in the question.</p>\n\n<p>So I suspect either:</p>\n\n<p>a) that whatever method you are using to overprint the same line is the problem. It may not be the use of <code>\\r</code>, it might be related to the specific print method you are using in your C++ executable. I would try not using an overprint, and just print the status on a new line with the simplest print statement you can think of.</p>\n\n<p>or,</p>\n\n<p>b) the problem is OS-specific.</p>\n\n<p>For completeness, here are the details about what I tried and the results (environment and print statement):</p>\n\n<ol>\n<li>bash script; <code>echo \"\"</code></li>\n<li>compiled c code; <code>printf(\"\\n\")</code></li>\n<li>python 2.7 script; <code>print(\"\".format() )</code></li>\n<li>os built-in <strong>ping</strong> program (as described in comments)</li>\n</ol>\n\n<p>I ran this in Matlab, using the <code>system</code> command, for example <code>system('./timer_out');</code>. In all cases:</p>\n\n<p>-Printed output appeared \"in real time\" if there was no second output variable, regardless of using the '-echo' flag or trailing semicolon, e.g.:</p>\n\n<pre><code>tic; system('./timer_out'); toc\n</code></pre>\n\n<p>-Printed output was suppressed if an output variable was given, e.g.:</p>\n\n<pre><code>tic; [s,r]=system('./timer_out'); toc\n</code></pre>\n\n<p>-Printed output appeared in real time if an output variable was given <em>and</em> the '-echo' flag was used, e.g.:</p>\n\n<pre><code>tic; [s,r]=system('./timer_out','-echo'); toc\n</code></pre>\n\n<p>This behavior is in accordance with the documentation. These tests used Matlab R2015b on OS X.</p>\n"}, {"tags": [], "owner": {"reputation": 142, "user_id": 3757276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/j4bnG.jpg?s=128&g=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/3757276/jim"}, "is_accepted": true, "score": 1, "last_activity_date": 1469655108, "creation_date": 1469655108, "answer_id": 38623523, "question_id": 38362089, "link": "https://stackoverflow.com/questions/38362089/how-can-i-get-matlabs-system-or-dos-to-show-the-console-output-in-real-time/38623523#38623523", "title": "How can I get MATLAB&#39;s system() or dos() to show the console output in real time?", "body": "<p>I suppose my original question was worded too literally - I found a solution by tinkering with the C++ code instead of the MATLAB code.  Specifically, I added <code>std::endl</code> or <code>std::flush</code> to the ends of console print commands, like so:</p>\n\n<pre><code>std::cout &lt;&lt; \"Simulation #B01 initiated...\" &lt;&lt; std::endl;\n</code></pre>\n\n<p>My guess is that flushing the stream prompts MATLAB to display contents of the stream to the console in \"real time\" (more or less), which is something the Windows console does not require on my particular computer with my particular operating system, etc.  I'm sure there's a life lesson about portability here somewhere, but I don't know nearly enough about what I'm doing to frame it properly.</p>\n\n<p>As a side note, I've noticed that <a href=\"https://www.mathworks.com/matlabcentral/answers/99958-why-does-r-carriage-return-also-create-a-new-line-when-printing-to-the-command-window\" rel=\"nofollow\">MATLAB does not properly recognize the carriage return character <code>\\r</code> in the console</a>.  In order to prevent my executable from spamming the console with potentially thousands of lines of updated status, I've replaced my old updating line function</p>\n\n<pre><code>void time_remaining( ... ) {\n\n    std::string completion_update = ( ... );\n\n    std::cout &lt;&lt; completion_update &lt;&lt; \"\\r\";\n\n}\n</code></pre>\n\n<p>with a slightly more complex one</p>\n\n<pre><code>int time_remaining( string_length, ... ) {\n\n    for(i = 0; i &lt; string_length; i++) std::cout &lt;&lt; \"\\b\";\n\n    std::string completion_update = ( ... );\n\n    std::cout &lt;&lt; completion_update &lt;&lt; std::flush;\n\n    string_length = completion_update.length();\n\n    return string_length;\n\n}\n</code></pre>\n\n<p>which relies on the backspace character <code>\\b</code> and the character length of the previous iteration of the string <code>completion_update</code>.</p>\n"}], "owner": {"reputation": 142, "user_id": 3757276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/j4bnG.jpg?s=128&g=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/3757276/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 1, "accepted_answer_id": 38623523, "answer_count": 2, "score": 4, "last_activity_date": 1469655108, "creation_date": 1468445679, "question_id": 38362089, "link": "https://stackoverflow.com/questions/38362089/how-can-i-get-matlabs-system-or-dos-to-show-the-console-output-in-real-time", "title": "How can I get MATLAB&#39;s system() or dos() to show the console output in real time?", "body": "<p>I have a MATLAB script that calls an executable (written in C++) using the <code>system()</code> command, like so:</p>\n\n<pre><code>exe_status = system('MySimulation.exe', arguments);\n</code></pre>\n\n<p>Since the executable can take quite a long time to run (up to several hours), I including a function within it that estimates the time remaining and outputs that to the console.  If I run the executable outside of MATLAB, the Windows console looks roughly like this:</p>\n\n<pre><code>Simulation #B01 initiated...\nCompletion: 0.57%    Time remaining: 183 m 2 s\n</code></pre>\n\n<p>Using the <code>\\r</code> character, the \"completion\" line rewrites itself every second.  This works really well, and lets me know when to come back to analyze the data.</p>\n\n<p>Unfortunately, calling the executable from the MATLAB console does not have the same effect.  MATLAB waits until the executable has terminated before showing any console output at all, rendering my timer moot.</p>\n\n<p>I've tried the following commands, but they all have the same behavior:</p>\n\n<pre><code>exe_status = system('MySimulation.exe', arguments);\nexe_status = system('MySimulation.exe', arguments, '-echo');\nexe_status = dos('MySimulation.exe', arguments);\nexe_status = dos('MySimulation.exe', arguments, '-echo');\n</code></pre>\n\n<p>Unless I'm reading incorrectly, it seems that the <a href=\"https://www.mathworks.com/help/matlab/ref/dos.html#btf_cc1\" rel=\"nofollow\">MATLAB documentation</a> suggests that <code>'-echo'</code> can be used to echo the command output while the executable is still running, but it has no effect on my particular program.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 1, "creation_date": 1468446285, "post_id": 38362076, "comment_id": 64136814, "body": "This works because the object pointed at by <code>b</code> isn&#39;t <code>const</code> itself. But had you tried the following: <code>*(b+1) = &#39;E&#39;;</code> instead,  you would have gotten a compiler error message, such as: <code>error: read-only variable is not assignable</code> (clang). You can access it, but can&#39;t modify it through <code>b</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1468447001, "post_id": 38362076, "comment_id": 64137102, "body": "I don&#39;t see what the issue is here.  You declared <code>b</code> as const, not <code>a</code>, and you&#39;re accessing the array using <code>a</code>, not <code>b</code>."}], "answers": [{"tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": true, "score": 6, "last_activity_date": 1468445801, "creation_date": 1468445801, "answer_id": 38362118, "question_id": 38362076, "link": "https://stackoverflow.com/questions/38362076/const-char-pointing-to-an-array-of-char-on-the-stack/38362118#38362118", "title": "const char* pointing to an array of char on the stack", "body": "<p><code>const char* b</code> means that you cannot modify the thing <code>b</code> points to <em>through</em> <code>b</code>. But you can modify it through some other means, provided the thing isn't <code>const</code> in the first place<sup>*</sup>.</p>\n\n<p>Here is a simplified example:</p>\n\n<pre><code>int a = 0;\nconst int* p = &amp;a;\na = 42;  // OK! a is not const.\n*p = 43; // ERROR! Cannot modify a through p.\n\nconst int b = 0;\np = &amp;b;\nb = 43;  // ERROR! b is const.\n</code></pre>\n\n<hr>\n\n<p><sup>* This holds for C++. The details may be slightly different in C</sup></p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1468445809, "creation_date": 1468445809, "answer_id": 38362121, "question_id": 38362076, "link": "https://stackoverflow.com/questions/38362076/const-char-pointing-to-an-array-of-char-on-the-stack/38362121#38362121", "title": "const char* pointing to an array of char on the stack", "body": "<p>Declaration of <code>b</code> with type <code>const char *</code> means that you cannot modify data using pointer <code>b</code> itself, it does not affect memory <code>b</code> points to in any sense.</p>\n"}, {"tags": [], "owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "is_accepted": false, "score": 1, "last_activity_date": 1468445883, "creation_date": 1468445883, "answer_id": 38362132, "question_id": 38362076, "link": "https://stackoverflow.com/questions/38362076/const-char-pointing-to-an-array-of-char-on-the-stack/38362132#38362132", "title": "const char* pointing to an array of char on the stack", "body": "<p><code>const char * b</code> just means that you cannot modify what <code>b</code> points to ... through <code>b</code>.  The place it points to is an ordinary memory location, though, and can be modified by anything else that points to it.</p>\n\n<p>The contract represented by <code>const</code> is only valid with respect to the variable or method the const is attached to.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1468446243, "creation_date": 1468446243, "answer_id": 38362213, "question_id": 38362076, "link": "https://stackoverflow.com/questions/38362076/const-char-pointing-to-an-array-of-char-on-the-stack/38362213#38362213", "title": "const char* pointing to an array of char on the stack", "body": "<blockquote>\n  <p>How am I able to access the memory pointed by <code>'const char* b'</code> and modify it ? </p>\n</blockquote>\n\n<p>You are able to access memory pointed to by <code>b</code> regardless of whether it is declared as</p>\n\n<pre><code>const char* b;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char* b;\n</code></pre>\n\n<p>You won't be able to modify the value through <code>b</code>. The following is an error:</p>\n\n<pre><code>b[1] = 'E';\n</code></pre>\n\n<blockquote>\n  <p>Does it mean that for a shared memory const definition does not matter ?</p>\n</blockquote>\n\n<p>The <code>const</code> qualifier matters -- whether it is shared memory or not. Had you used:</p>\n\n<pre><code>const char a[] = \"ABCD\";\nconst char* b = a;\n</code></pre>\n\n<p>the following will be an error too.</p>\n\n<pre><code>a[1] = 'E';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "is_accepted": false, "score": 2, "last_activity_date": 1468447823, "last_edit_date": 1468447823, "creation_date": 1468447172, "answer_id": 38362406, "question_id": 38362076, "link": "https://stackoverflow.com/questions/38362076/const-char-pointing-to-an-array-of-char-on-the-stack/38362406#38362406", "title": "const char* pointing to an array of char on the stack", "body": "<p><code>char * p</code><br>\n<code>p</code> is a non-constant pointing to a non-constant character. We can change the character value using <code>p</code>, and change <code>p</code> to point at another character.</p>\n\n<p><code>char const * p</code><br>\n<code>const char * p</code><br>\n<code>p</code> is a non-constant pointer to a constant character. We can't change the character value using <code>p</code>, but can change <code>p</code> to point at another character.</p>\n\n<p><code>char * const p</code><br>\n<code>p</code> is a constant pointer to a non-constant character. We can change the character value using <code>p</code>, but can't change <code>p</code> to point at another character.</p>\n\n<p><code>char const * const p</code><br>\n<code>const char * const p</code><br>\n<code>p</code> is a constant pointer to a constant character. We can't change the character value using <code>p</code>, or change <code>p</code> to point at another character.</p>\n\n<p>In your question, <code>a</code> and <code>b</code> point at the same memory. <code>b</code> is declared as <code>const char *</code>, so it is a non-constant pointer to a constant character. That doesn't mean that anybody else can't modify the character. Only that you can't modify the character using <code>b</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 6586608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f7073406bd73030dc2779b989ab6f8?s=128&d=identicon&r=PG&f=1", "display_name": "anandkumarcr", "link": "https://stackoverflow.com/users/6586608/anandkumarcr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 38362118, "answer_count": 5, "score": 1, "last_activity_date": 1468447823, "creation_date": 1468445623, "question_id": 38362076, "link": "https://stackoverflow.com/questions/38362076/const-char-pointing-to-an-array-of-char-on-the-stack", "title": "const char* pointing to an array of char on the stack", "body": "<p>I wrote this piece of code</p>\n\n<pre><code>int main()\n{\n    char a[] = \"ABCD\";\n    const char* b = a;\n    a[1] = 'E';\n    printf(\"%s %s\", a, b);\n    getchar();\n}\n</code></pre>\n\n<p>The code compiled and ran successfully. </p>\n\n<p>How am I able to access the memory pointed by 'const char* b' and modify it ? Does it mean that for a shared memory const definition does not matter ? </p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "type-conversion", "precision"], "comments": [{"owner": {"reputation": 847, "user_id": 1302745, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8debbb66e700fbf086da321417bbb0a5?s=128&d=identicon&r=PG", "display_name": "akaltar", "link": "https://stackoverflow.com/users/1302745/akaltar"}, "reply_to_user": {"reputation": 239269, "user_id": 464709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab3363d257d780bd4c1f0c844b020a2?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Hamidi", "link": "https://stackoverflow.com/users/464709/fr%c3%a9d%c3%a9ric-hamidi"}, "edited": false, "score": 0, "creation_date": 1468446059, "post_id": 38362073, "comment_id": 64136726, "body": "@Fr&#233;d&#233;ricHamidi Sorry for unclear question, see edit."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1468446080, "post_id": 38362073, "comment_id": 64136736, "body": "What do you mean by &quot;without losses&quot;?"}, {"owner": {"reputation": 239269, "user_id": 464709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab3363d257d780bd4c1f0c844b020a2?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Hamidi", "link": "https://stackoverflow.com/users/464709/fr%c3%a9d%c3%a9ric-hamidi"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468446188, "post_id": 38362073, "comment_id": 64136777, "body": "To elaborate on @Slava&#39;s comment, doubles come with loss -- that&#39;s by design, if you don&#39;t want that, use alternate fixed-point types."}, {"owner": {"reputation": 847, "user_id": 1302745, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8debbb66e700fbf086da321417bbb0a5?s=128&d=identicon&r=PG", "display_name": "akaltar", "link": "https://stackoverflow.com/users/1302745/akaltar"}, "edited": false, "score": 0, "creation_date": 1468446196, "post_id": 38362073, "comment_id": 64136779, "body": "I assume that converting a large integer (perhaps even larger than my example) to a floating point type results in a larger conversion error than some other method as the floating point types are most accurate near 1."}, {"owner": {"reputation": 239269, "user_id": 464709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab3363d257d780bd4c1f0c844b020a2?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Hamidi", "link": "https://stackoverflow.com/users/464709/fr%c3%a9d%c3%a9ric-hamidi"}, "edited": false, "score": 0, "creation_date": 1468446350, "post_id": 38362073, "comment_id": 64136847, "body": "@akaltar, nope, the range of (even 64 or 128-bits wide) integers versus floating point is ridiculous. Floating-point is fast but can yield imprecise results, fixed-point is far slower but yields accurate results. Pick your poison."}, {"owner": {"reputation": 847, "user_id": 1302745, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8debbb66e700fbf086da321417bbb0a5?s=128&d=identicon&r=PG", "display_name": "akaltar", "link": "https://stackoverflow.com/users/1302745/akaltar"}, "edited": false, "score": 0, "creation_date": 1468446444, "post_id": 38362073, "comment_id": 64136889, "body": "I have decided I am using double for storage as its faster to use, but the data I am getting comes from <code>int32_t</code>. I want to convert it to double with minimal error."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1468446566, "post_id": 38362073, "comment_id": 64136942, "body": "I think <code>double</code> mantissa should be big enough to represent <code>int32_t</code> adequately. Of course you need to properly round your double when you output. And why do you need <code>boost::numeric_cast</code>? <code>myint&#47;1E6</code> should be enough"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 4, "creation_date": 1468446576, "post_id": 38362073, "comment_id": 64136947, "body": "The least lossy method of converting it is not converting it at all."}, {"owner": {"reputation": 847, "user_id": 1302745, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8debbb66e700fbf086da321417bbb0a5?s=128&d=identicon&r=PG", "display_name": "akaltar", "link": "https://stackoverflow.com/users/1302745/akaltar"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468446914, "post_id": 38362073, "comment_id": 64137072, "body": "@Slava I think that should be an answer then."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1468447308, "post_id": 38362073, "comment_id": 64137237, "body": "I agree with @tobi303. Your problem statement &#39;I want to convert it to double without losses&#39; embodies a contradiction in terms. I would store it as is."}, {"owner": {"reputation": 847, "user_id": 1302745, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8debbb66e700fbf086da321417bbb0a5?s=128&d=identicon&r=PG", "display_name": "akaltar", "link": "https://stackoverflow.com/users/1302745/akaltar"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1468447408, "post_id": 38362073, "comment_id": 64137269, "body": "@EJP You&#39;re right. I used wrong wording. I meant with minimal conversion error."}, {"owner": {"reputation": 9602, "user_id": 323547, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f51bc514b2b5b32625104d8ba190028?s=128&d=identicon&r=PG", "display_name": "log0", "link": "https://stackoverflow.com/users/323547/log0"}, "edited": false, "score": 1, "creation_date": 1468447462, "post_id": 38362073, "comment_id": 64137289, "body": "You say you want the result as a double. In this case, doing myint / 1000000.0, the compiler will do its job and set res to the double value the closest to the actual result. If you don&#39;t necessarily want the result as a double, why not just keeping an int ? it will be a lossless representation."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1468451218, "post_id": 38362073, "comment_id": 64138555, "body": "I&#39;m not sure your test is valid (while log0 answer is correct). First, if you are using <code>int64_t</code> you should compare with <code>long double</code>s and second, using <code>round(a * divi) != x</code> instead of truncating to int would drop your percentages to 0."}], "answers": [{"comments": [{"owner": {"reputation": 847, "user_id": 1302745, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8debbb66e700fbf086da321417bbb0a5?s=128&d=identicon&r=PG", "display_name": "akaltar", "link": "https://stackoverflow.com/users/1302745/akaltar"}, "edited": false, "score": 0, "creation_date": 1468449979, "post_id": 38362559, "comment_id": 64138201, "body": "I confirmed your answer with a test. It is the best method I guess."}], "tags": [], "owner": {"reputation": 9602, "user_id": 323547, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f51bc514b2b5b32625104d8ba190028?s=128&d=identicon&r=PG", "display_name": "log0", "link": "https://stackoverflow.com/users/323547/log0"}, "is_accepted": true, "score": 3, "last_activity_date": 1468447879, "creation_date": 1468447879, "answer_id": 38362559, "question_id": 38362073, "link": "https://stackoverflow.com/questions/38362073/what-is-the-correct-way-to-convert-an-int-with-representing-a-decimal-to-a-doubl/38362559#38362559", "title": "What is the correct way to convert an int with representing a decimal to a double", "body": "<blockquote>\n  <p>double res = myint / 1000000.0;</p>\n</blockquote>\n\n<p>That's the job of the compiler to set res to the closest representable value of the result.</p>\n"}, {"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 1, "last_activity_date": 1468449027, "creation_date": 1468449027, "answer_id": 38362774, "question_id": 38362073, "link": "https://stackoverflow.com/questions/38362073/what-is-the-correct-way-to-convert-an-int-with-representing-a-decimal-to-a-doubl/38362774#38362774", "title": "What is the correct way to convert an int with representing a decimal to a double", "body": "<p>Note that there is always a difference between what a numerical value means for you and what representation available from the language you use in your code. Most of the time it is just not as obvious as in this case. What I want to say is: If you have an <code>int</code> whose value is <code>12123456</code> then this is already a representation of the actual value <code>12.123456</code>. The only reason I could imagine to convert it to a <code>double</code> is to use floating point arithmetics (especially division) otherwise I would just stay with the <code>int</code>. </p>\n\n<p>TL;DR: If possible I would try to avoid the conversion. If you really want to do it, imho log0's answer is perfectly valid.</p>\n"}], "owner": {"reputation": 847, "user_id": 1302745, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8debbb66e700fbf086da321417bbb0a5?s=128&d=identicon&r=PG", "display_name": "akaltar", "link": "https://stackoverflow.com/users/1302745/akaltar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 38362559, "answer_count": 2, "score": 1, "last_activity_date": 1468449902, "creation_date": 1468445607, "last_edit_date": 1468449902, "question_id": 38362073, "link": "https://stackoverflow.com/questions/38362073/what-is-the-correct-way-to-convert-an-int-with-representing-a-decimal-to-a-doubl", "title": "What is the correct way to convert an int with representing a decimal to a double", "body": "<p>What is the correct way to convert an int with representing a decimal to a double?</p>\n\n<p>I have an int representing for example 12,123456 as 12123456. This comes from a network device that I cannot change.</p>\n\n<p>I want to convert it to double with minimal error.</p>\n\n<p>The naive solution would be:\n<code>double res = boost::numeric_cast&lt;double&gt;(myint) / 1000000.0;</code></p>\n\n<p>I think that converting myint(a huge number) to a double is more lossy than some other method because the resulting value is near 1 where dobule has more precision.</p>\n\n<p>I am looking for what the least lossy method of doing this conversion is.</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>I didn't believe log0's answer was right.\n<em>TL;DR</em> He is.</p>\n\n<p>The test I used:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;limits&gt;\n\n#include &lt;boost/random.hpp&gt;\n\n\ninline double DecimalToDouble( int64_t value, int64_t divisor )\n{\n    int64_t first =  value / divisor;\n    int64_t second = value % divisor;\n\n    return (double)first + (double)second / (double)divisor;\n}\n\nint main()\n{\n    boost::mt19937 rng;\n    boost::uniform_int&lt;int&gt; distr( std::numeric_limits&lt;int&gt;::min(),\n        std::numeric_limits&lt;int&gt;::max() );\n    boost::variate_generator&lt; boost::mt19937, boost::uniform_int&lt;&gt; &gt; dice( rng, distr );\n\n    int erra = 0;\n    int errb = 0;\n    std::cout.precision( std::numeric_limits&lt;double&gt;::max_digits10 );\n\n    int iterations = 1000000;\n    for( int i = 0; i &lt; iterations; ++i )\n    {\n        int x = dice();\n\n        double divi = 10000000.0;\n\n        double a = x / divi;\n        double b = DecimalToDouble( x, 10000000 );\n\n        if( (int)(a * divi) != x )\n        {\n\n            //std::cout &lt;&lt; \"ERROR AT A:\" &lt;&lt; x &lt;&lt; '\\t' &lt;&lt; a &lt;&lt; '\\t' &lt;&lt; b &lt;&lt; std::endl;\n            erra++;\n        }\n\n        if( (int)(b * divi) != x )\n        {\n            //std::cout &lt;&lt; \"ERROR AT B:\" &lt;&lt; x &lt;&lt; '\\t'  &lt;&lt; a &lt;&lt; '\\t' &lt;&lt; b &lt;&lt; std::endl;\n            errb++;\n        }\n    }\n\n    std::cout.precision( 10 );\n    std::cout &lt;&lt; \"A:\" &lt;&lt; (erra / (double)iterations) * 100.0 &lt;&lt; \"% B:\"\n            &lt;&lt; (errb / (double)iterations) * 100.0 &lt;&lt; \"%\" &lt;&lt; std::endl;\n\n\n    char stop;\n    std::cin &gt;&gt; stop;\n}\n</code></pre>\n\n<p>Result on Win7x64 VS2010: A:6.4997% B:6.5188%</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 6, "last_activity_date": 1468446002, "creation_date": 1468446002, "answer_id": 38362156, "question_id": 38362065, "link": "https://stackoverflow.com/questions/38362065/does-not-name-a-type-error-while-separating-class-into-a-h-and-cpp-file/38362156#38362156", "title": "&#39;Does not name a type&#39; error while separating class into a .h and .cpp file", "body": "<p>You can't just put random code in a file (outside of any function). At the top level you can only declare/define stuff. An expression like <code>message1.display()</code> needs to be part of a function.</p>\n"}], "owner": {"reputation": 11, "user_id": 6586596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb2f9380a2d2188c12e5fd9cf185fea9?s=128&d=identicon&r=PG&f=1", "display_name": "Sambeet Panigrahi", "link": "https://stackoverflow.com/users/6586596/sambeet-panigrahi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1468532831, "creation_date": 1468445585, "last_edit_date": 1468532831, "question_id": 38362065, "link": "https://stackoverflow.com/questions/38362065/does-not-name-a-type-error-while-separating-class-into-a-h-and-cpp-file", "title": "&#39;Does not name a type&#39; error while separating class into a .h and .cpp file", "body": "<p>I have created three simple c++ files as follows:\nrtt_hello.hpp</p>\n\n<pre><code>#ifndef RTT_HELLO_HPP\n#define RTT_HELLO_HPP\n\n#include&lt;iostream&gt;\n\nclass displayer\n{\n    public:\n        void display();\n};\n\n#endif\n</code></pre>\n\n<p>Then the class implementation displayer.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"rtt_hello.hpp\"\nvoid displayer::display()\n{\n    std::cout&lt;&lt;\"Hello\";\n}\n</code></pre>\n\n<p>And finally the main program rtt_hello.cpp.I don't have main because I want to use the object in a different application.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include \"rtt_hello.hpp\"\n\ndisplayer message1;\nmessage1.display();\n</code></pre>\n\n<p>Now when I compile this I get the error</p>\n\n<pre><code>sambeet@Holmes ~/NewRockPort/x86/Build/rock/rtt_test $ /home/sambeet/NewRockPort/x86/Install/rtems/4.11.0-rc3/bin/i386-rtems4.11-g++ rtt_hello.cpp displayer.cpp -Ihome/sambeet/NewRockPort/x86/Build/rock/rtt_test/ \nrtt_hello.cpp:5:1: error: 'message1' does not name a type\n message1.display();\n ^\n</code></pre>\n\n<p>I created the headers and also included it,Then why does this this error happen ?</p>\n"}, {"tags": ["c++", "xcode"], "comments": [{"owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "edited": false, "score": 3, "creation_date": 1468445643, "post_id": 38362056, "comment_id": 64136538, "body": "Missing semicolon after <code>noDuplicates</code> declaration."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1468446785, "post_id": 38362056, "comment_id": 64137018, "body": "Since you don&#39;t have a semicolon there, it looks like the beginning of a function definition, not a declaration. That&#39;s why it complains that the body is missing."}, {"owner": {"reputation": 9, "user_id": 6586604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f610e5f91f9c67d583b6deca284b52d?s=128&d=identicon&r=PG&f=1", "display_name": "saucin&#39;", "link": "https://stackoverflow.com/users/6586604/saucin"}, "edited": false, "score": 0, "creation_date": 1468458498, "post_id": 38362056, "comment_id": 64140202, "body": "Thank you so much, very stupid error haha."}], "answers": [{"tags": [], "owner": {"reputation": 4802, "user_id": 921070, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f584b200a79f438d9092d7f76da7ede6?s=128&d=identicon&r=PG", "display_name": "Dean Seo", "link": "https://stackoverflow.com/users/921070/dean-seo"}, "is_accepted": false, "score": 0, "last_activity_date": 1468458564, "creation_date": 1468458564, "answer_id": 38364006, "question_id": 38362056, "link": "https://stackoverflow.com/questions/38362056/include-statement-casuing-expected-function-body-error/38364006#38364006", "title": "include statement casuing expected function body error", "body": "<p>That compile error comes from here:</p>\n\n<pre><code>bool noDuplicates(int picks[], int input) // ';' or body expected\n</code></pre>\n\n<p>Without <code>;</code>, your compiler expects a function body <code>{ /* code */ }</code> to come, which you do not provide.</p>\n\n<p>You have two options, one of which is to provide a proper function body as follows:</p>\n\n<pre><code>bool noDuplicates(int picks[], int input)\n{\n    // Code\n}\n</code></pre>\n\n<p>the other of which is to <em>declare</em> as follows:</p>\n\n<pre><code>bool noDuplicates(int picks[], int input); // note that ';' is used.\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6586604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f610e5f91f9c67d583b6deca284b52d?s=128&d=identicon&r=PG&f=1", "display_name": "saucin&#39;", "link": "https://stackoverflow.com/users/6586604/saucin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 647, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468458564, "creation_date": 1468445536, "question_id": 38362056, "link": "https://stackoverflow.com/questions/38362056/include-statement-casuing-expected-function-body-error", "title": "include statement casuing expected function body error", "body": "<p>Im coding C++ in xcode and the following code is causing an \"expected function body after after function delarator\" error:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include \"Implementation.hpp\"\nusing namespace std;\n</code></pre>\n\n<p>the error is popping up after implementation.hpp</p>\n\n<p>here is my implementation.hpp file:</p>\n\n<pre><code>    #ifndef Implementation_hpp\n#define Implementation_hpp\n\nusing namespace std;\n\n\n\n#include &lt;stdio.h&gt;\n\nint* getLottoPicks(int picks[]);\nint genWinNums();\nbool noDuplicates(int picks[], int input)\n\n#endif /* Implementation_hpp */\n</code></pre>\n\n<p>if anyone could find the issue i would greatly appreciate it! Thanks in advance.</p>\n"}, {"tags": ["c++", "qt", "synchronization"], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1468595690, "last_edit_date": 1468595690, "creation_date": 1468445504, "answer_id": 38362045, "question_id": 38362044, "link": "https://stackoverflow.com/questions/38362044/how-to-implement-a-countdown-latch-in-qt/38362045#38362045", "title": "How to implement a countdown latch in Qt?", "body": "<p>Here's an implementation that leverages <code>QSemaphore</code>:</p>\n\n<pre><code>// https://github.com/KubaO/stackoverflown/tree/master/questions/countdown-latch-38362044\n#include &lt;climits&gt;\n#include &lt;QSemaphore&gt;\n\nclass CountDownLatch {\n  Q_DISABLE_COPY(CountDownLatch)\n  QSemaphore m_sem{INT_MAX};\npublic:\n  CountDownLatch() {}\n  ~CountDownLatch() {\n     m_sem.acquire(INT_MAX);\n     m_sem.release(INT_MAX);\n  }\n  class Locker {\n    CountDownLatch * sem;\n  public:\n    Locker(const Locker &amp; other) : sem{other.sem} { sem-&gt;m_sem.acquire(); }\n    Locker(Locker &amp;&amp; other) : sem{other.sem} { other.sem = nullptr; }\n    Locker(CountDownLatch * sem) : sem{sem} { sem-&gt;m_sem.acquire(); }\n    ~Locker() { if (sem) sem-&gt;m_sem.release(); }\n  };\n  Locker lock() { return Locker{this}; }\n};\n</code></pre>\n\n<p>To use, keep an instance of <code>CountdownLatch::Locker</code> while you want the latch to stay blocked. The latch's destructor will block until all locker's are destroyed.</p>\n\n<pre><code>#include &lt;QtConcurrent&gt;\n\nstruct MyClass {\n  CountDownLatch m_latch;\n  MyClass() {\n    auto lock = m_latch.lock(); // must be taken here\n    QtConcurrent::run([this, lock]{\n      // DON'T lock here, you'll have a race!\n      QThread::sleep(10);\n    });\n  }\n};\n\nint main() {\n  MyClass a;\n}\n</code></pre>\n\n<p>The instance <code>a</code> will stay around until the concurrent worker is done, i.e. for 10 seconds.</p>\n"}], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 347, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1468595690, "creation_date": 1468445504, "question_id": 38362044, "link": "https://stackoverflow.com/questions/38362044/how-to-implement-a-countdown-latch-in-qt", "title": "How to implement a countdown latch in Qt?", "body": "<p>A countdown latch (a.k.a. <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"nofollow\">CountDownLatch</a>) is a synchronization primitive that ensures that all of the used resources are released before the primitive is destroyed. It is like a <code>QSemaphore</code>, but working in reverse: we want to block not to acquire a resource, but to ensure that all of them have been released.</p>\n\n<p>What would be an easy way to implement it in Qt?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1468445462, "post_id": 38362014, "comment_id": 64136446, "body": "You really should use a <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code></a> if you are working with strings."}, {"owner": {"reputation": 147, "user_id": 6570872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c627b987e9fb1baab70ffc8b6d7f05bf?s=128&d=identicon&r=PG&f=1", "display_name": "Marek", "link": "https://stackoverflow.com/users/6570872/marek"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1468445949, "post_id": 38362014, "comment_id": 64136680, "body": "But if I use string so I do not know how to edit the text"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1468447188, "post_id": 38362014, "comment_id": 64137179, "body": "If you use a string, you can just append to the string with <code>MoveDirect += File[i];</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1468447404, "post_id": 38362014, "comment_id": 64137266, "body": "Why don&#39;t you just use <code>strcat(MoveDirect, &amp;File[i])</code>?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1468448304, "post_id": 38362014, "comment_id": 64137608, "body": "What is the actual problem? Why are you parsing strings manually like this at all? There are plenty of functions available for parsing/generating filesystem paths into/from their constituent components. And why are you doubling the slashes in the string data? You should not be doing that at all! Double-slashes are only meant to be used for string literals, not the actual runtime data."}, {"owner": {"reputation": 147, "user_id": 6570872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c627b987e9fb1baab70ffc8b6d7f05bf?s=128&d=identicon&r=PG&f=1", "display_name": "Marek", "link": "https://stackoverflow.com/users/6570872/marek"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1468450164, "post_id": 38362014, "comment_id": 64138253, "body": "@RemyLebeau I removed almost everything. I bad understand how it works therefore it was difficult. My problem is that: I do not know how i can on end MoveDirect add program name because without it I do not can move it with command MoveFile"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1468457479, "post_id": 38362014, "comment_id": 64140001, "body": "If I am reading your code right, it looks like you are trying to move the calling program&#39;s file (<code>ConsoleApplication1.exe</code>) to the `C:\\Program Files` folder. Is that right? It does not really make sense to move the calling program&#39;s file while it is still running, so what are you REALLY trying to accomplish?"}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 6570872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c627b987e9fb1baab70ffc8b6d7f05bf?s=128&d=identicon&r=PG&f=1", "display_name": "Marek", "link": "https://stackoverflow.com/users/6570872/marek"}, "edited": false, "score": 0, "creation_date": 1468484397, "post_id": 38363956, "comment_id": 64148992, "body": "This exactly I needed. Thanks for help"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1468458082, "creation_date": 1468458082, "answer_id": 38363956, "question_id": 38362014, "link": "https://stackoverflow.com/questions/38362014/c-save-file-address-to-char/38363956#38363956", "title": "c++ save file address to char[]", "body": "<p>If I am reading your code right, it looks like you are trying to extract the calling program's filename (<code>ConsoleApplication1.exe</code>), append it to the end of the <code>MoveDirect</code> buffer (<code>C:\\Program Files</code>), and then move the program's file to that new filename (<code>C:\\Program Files\\ConsoleApplication1.exe</code>).</p>\n\n<p>If so, then your first loop can be replaced with the Win32 API <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb773589.aspx\" rel=\"nofollow\"><code>PathFindFileName()</code></a> function, and the second loop can be replaced with the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb773565.aspx\" rel=\"nofollow\"><code>PathAppend()</code></a> function.</p>\n\n<pre><code>#include &lt;Shlwapi.h&gt;\n#pragma comment(lib, \"Shlwapi.lib\")\n\nchar File[MAX_PATH];\nchar MoveDirect[MAX_PATH] = \"C:\\\\Program Files\\\\\";\n\nGetModuleFileNameA(NULL, File, MAX_PATH);\nPathAppendA(MoveDirect, PathFindFileNameA(File));\nMoveFileA(File, MoveDirect);\n\ncout &lt;&lt; File &lt;&lt; \"\\n\";\ncout &lt;&lt; MoveDirect &lt;&lt; \"\\n\";\n\ncin.get();\nreturn 0;\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 6570872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c627b987e9fb1baab70ffc8b6d7f05bf?s=128&d=identicon&r=PG&f=1", "display_name": "Marek", "link": "https://stackoverflow.com/users/6570872/marek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 38363956, "answer_count": 1, "score": 0, "last_activity_date": 1468458082, "creation_date": 1468445352, "last_edit_date": 1468448115, "question_id": 38362014, "link": "https://stackoverflow.com/questions/38362014/c-save-file-address-to-char", "title": "c++ save file address to char[]", "body": "<p>I have a problem that if I want to save </p>\n\n<pre><code>char FileDirect[] = \"C:\\\\Program Files\\\\\"\n</code></pre>\n\n<p>so using the <code>cout</code> print me this</p>\n\n<blockquote>\n  <p>C:\\Program Files\\</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/lWloO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lWloO.png\" alt=\"image\"></a></p>\n\n<p>and edit this text also does not work</p>\n\n<pre><code>char File[MAX_PATH], FileEdit[MAX_PATH], MoveDirect[MAX_PATH] = \"C:\\\\Program Files\\\\\";\nshort Seartch = 0, Slash = 0, MoveDirectChar = strlen(MoveDirect);\ncout &lt;&lt; MoveDirect &lt;&lt; \"\\n\";\nGetModuleFileName(NULL, File, MAX_PATH);\nfor (int i = 0; i &lt; 260; i++)\n{\n    if (File[i] == '\\\\')\n    {\n        FileEdit[i + Slash] = '\\\\';\n        ++Slash;\n        ++Seartch;\n        FileEdit[i + Seartch] = File[i];\n    }\n    else\n    {\n        FileEdit[i + Seartch] = File[i];\n    }\n}\nfor (int i = 260; i &gt; 0; i--)\n{\n    if (File[i] == '\\\\')\n    {\n        for (int b = 0; i &lt; 260; b++)\n        {\n            ++i;\n            ++MoveDirectChar;\n            MoveDirect[MoveDirectChar] = File[i];\n        }\n        break;\n    }\n}\nMoveFile(FileEdit, MoveDirect);\ncout &lt;&lt; File &lt;&lt; \"\\n\";\ncout &lt;&lt; FileEdit &lt;&lt; \"\\n\";\ncout &lt;&lt; MoveDirect &lt;&lt; \"\\n\";\ncin.get();\nreturn 0;\n</code></pre>\n"}, {"tags": ["c++", "qt", "makefile", "gnu-make", "qmake"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1468451550, "post_id": 38361942, "comment_id": 64138652, "body": "Looks like a qmake bug."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1468452539, "post_id": 38361942, "comment_id": 64138903, "body": "@KubaOber I was thinking that but is it possible that this bug is actually a lack of optimization? It could be that in the general case, the recipes for each of those targets <i>could</i> depend on the &quot;previous&quot; targets."}], "owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1468445061, "creation_date": 1468445061, "question_id": 38361942, "link": "https://stackoverflow.com/questions/38361942/qmake-generates-unnecessary-dependency-chains-in-generated-makefile", "title": "qmake generates unnecessary dependency chains in generated makefile", "body": "<p>I have the following command involving <code>qmake</code>:</p>\n\n<pre><code>cd HmiLogging/ &amp;&amp; ( test -e Makefile ||\\\nc:/Users/mureadr/Desktop/A/HMI_FORGF/qt5host/win32/x86/bin/qmake.exe\\\nC:/Users/mureadr/Desktop/A/HMI_FORGF/src/HmiLogging/HmiLogging.pro\\\ntop_builddir=C:/Users/mureadr/Desktop/A/HMI_FORGF/src/../lib/armle-v7/release/\\\ntop_srcdir=C:/Users/mureadr/Desktop/A/HMI_FORGF/ -Wall CONFIG+=release\\\nCONFIG+=qnx_build_release_with_symbols CONFIG+=rtc_build -o Makefile ) &amp;&amp;\\\nC:/Users/mureadr/Downloads/make-4.2.1/Release/make_msvc.net2003 -f Makefile \n</code></pre>\n\n<p><code>qmake</code>generates the file <code>Makefile</code> and then regular <code>make</code> is called on that makefile.</p>\n\n<p>The <code>qmake</code>-generated makefile has some entries like so:</p>\n\n<pre><code>deploy_al2hmi-mappings: deploy_fonts\n    @echo Copying application data... &amp;&amp; $(MKDIR)\\\n    \"C:/Users/mureadr/Desktop/A/HMI_FORGF/src/../lib/armle-v7/release/al2hmi-mappings\"\\\n    &amp;&amp; $(COPY_DIR) $(wildcard C:/Users/mureadr/Desktop/A/HMI_FORGF/src/fordhmi/al2hmi-mappings/*)\\\n    \"C:/Users/mureadr/Desktop/A/HMI_FORGF/src/../lib/armle-v7/release/al2hmi-mappings\"\n\ndeploy_data: deploy_al2hmi-mappings\n    @echo Copying application data... &amp;&amp; $(MKDIR)\\\n    \"C:/Users/mureadr/Desktop/A/HMI_FORGF/src/../lib/armle-v7/release/data\"\\\n    &amp;&amp; $(COPY_DIR) $(wildcard C:/Users/mureadr/Desktop/A/HMI_FORGF/src/fordhmi/data/*)\\\n    \"C:/Users/mureadr/Desktop/A/HMI_FORGF/src/../lib/armle-v7/release/data\"\n\ndeploy_qml: deploy_data\n    @echo Copying application data... &amp;&amp; $(MKDIR)\\\n    \"C:/Users/mureadr/Desktop/A/HMI_FORGF/src/../lib/armle-v7/release/qml\" &amp;&amp;\\\n    $(COPY_DIR) $(wildcard C:/Users/mureadr/Desktop/A/HMI_FORGF/src/fordhmi/qml/*)\\\n    \"C:/Users/mureadr/Desktop/A/HMI_FORGF/src/../lib/armle-v7/release/qml\"\n</code></pre>\n\n<p>You can see that each target depends on the one above it <strong>however</strong>, examining the recipes you'll also see that the directories created and used are unique to each target!</p>\n\n<p><strong>QUESTION</strong><br/>\nThe generated makefile is chaining those targets, as dependencies, when none actually exists and making it unable to do them in parallel! Why?</p>\n\n<p>I've grep-ed all <code>*.pro</code> and <code>*.pri</code> files - the files that <code>qmake</code> uses to generate makefiles - but <code>deploy_qml</code> doesn't appear in any of them so I'm guessing that these are tasks \"internal\" to <code>qmake</code>.</p>\n\n<p>Is there any way to tell <code>qmake</code> to NOT dependency-chain them when there is no good reason?</p>\n"}, {"tags": ["c++", "opencv", "image-processing", "face-detection", "face-recognition"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1468444792, "post_id": 38361853, "comment_id": 64136105, "body": "Do you have a nondescript face?"}, {"owner": {"reputation": 69, "user_id": 5696350, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/92a6f215ea394e03b3f7bb680cd5aafa?s=128&d=identicon&r=PG&f=1", "display_name": "Abdulrahman Azmy", "link": "https://stackoverflow.com/users/5696350/abdulrahman-azmy"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1468444930, "post_id": 38361853, "comment_id": 64136171, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 what do you mean ? .."}], "owner": {"reputation": 69, "user_id": 5696350, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/92a6f215ea394e03b3f7bb680cd5aafa?s=128&d=identicon&r=PG&f=1", "display_name": "Abdulrahman Azmy", "link": "https://stackoverflow.com/users/5696350/abdulrahman-azmy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1468445033, "creation_date": 1468444677, "last_edit_date": 1468445033, "question_id": 38361853, "link": "https://stackoverflow.com/questions/38361853/face-recognition-using-webcam", "title": "Face Recognition using webcam", "body": "<p>I have been using OpenCv Libraries for awhile , used and understood a code that detects [Only one face] and recognize it the main functions are there ..\nthis is the function of recognition</p>\n\n<pre><code>// Find the most likely person based on a detection. Returns the index, and stores the confidence value into pConfidence.\nint findNearestNeighbor(float * projectedTestFace, float *pConfidence)\n{\ndouble leastDistSq = DBL_MAX;\nint i, iTrain, iNearest = 0;\n\nfor(iTrain=0; iTrain&lt;nTrainFaces; iTrain++)\n{\n    double distSq=0;\n\n    for(i=0; i&lt;nEigens; i++)\n    {\n        float d_i = projectedTestFace[i] - projectedTrainFaceMat-&gt;data.fl[iTrain*nEigens + i];\n#ifdef USE_MAHALANOBIS_DISTANCE\n        distSq += d_i*d_i / eigenValMat-&gt;data.fl[i];  // Mahalanobis distance (might give better results than Eucalidean distance)\n#else\n        distSq += d_i*d_i; // Euclidean distance.\n#endif\n    }\n\n    if(distSq &lt; leastDistSq)\n    {\n        leastDistSq = distSq;\n        iNearest = iTrain;\n    }\n}\n\n// Return the confidence level based on the Euclidean distance,\n// so that similar images should give a confidence between 0.5 to 1.0,\n// and very different images should give a confidence between 0.0 to 0.5.\n*pConfidence = 1.0f - sqrt( leastDistSq / (float)(nTrainFaces * nEigens) ) / 255.0f;\n\n// Return the found index.\nreturn iNearest; \n}\n</code></pre>\n\n<p>after that it would return the value of iNearest to the follow code </p>\n\n<pre><code>        // Check which person it is most likely to be.\n            iNearest = findNearestNeighbor(projectedTestFace, &amp;confidence);\n            nearest  = trainPersonNumMat-&gt;data.i[iNearest];\n\n            printf(\"Most likely person in camera: '%s' (confidence=%f).\\n\", personNames[nearest-1].c_str(), confidence);\n</code></pre>\n\n<p>how can I let it recognize the unknown person as unknown and stop comparing to with the faces in my db ?</p>\n\n<p>also how can i detect multi-faces at once?.</p>\n"}, {"tags": ["c++", "dictionary", "stdmap", "std-pair"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1468444427, "post_id": 38361782, "comment_id": 64135944, "body": "Please edit your question to contain a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1468444466, "post_id": 38361782, "comment_id": 64135958, "body": "Since you are not showing what <code>hasAge</code> is I doubt anyone can help much. I guess <code>hasAge</code> is actually a copy of what you wish to modify."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1468444609, "post_id": 38361782, "comment_id": 64136017, "body": "@NathanOliver do you have auto tag for MCVE, if yes how can I import it?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468444765, "post_id": 38361782, "comment_id": 64136086, "body": "@Slava if you use <code>[mcve]</code> in the comment(do not use the code markup) it will auto expand to <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  I also use <a href=\"http://stackapps.com/questions/2116/autoreviewcomments-pro-forma-comments-for-se\">AutoReviewComments</a> to make better longer comments"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468444888, "post_id": 38361782, "comment_id": 64136152, "body": "Yes I am asking how to import this comment into AutoReviewComment, I installed it but by default it has only useless comments like &quot;me too&quot;"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468444979, "post_id": 38361782, "comment_id": 64136200, "body": "@Slava I am.  I just am at a different pc so I used the <code>[mcve]</code> shortcut."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468445101, "post_id": 38361782, "comment_id": 64136278, "body": "@Slava Oh.  Click on auto then import/export at the bottom in the middle.  There you can type in your own.  You actually have to type it in it wont auto import. You can also use <a href=\"https://github.com/SO-Close-Vote-Reviewers/auto-comments\" rel=\"nofollow noreferrer\">these</a>"}, {"owner": {"reputation": 21, "user_id": 5102596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b7cdbdcc9d4dac45e2d508a61b9ba5d?s=128&d=identicon&r=PG&f=1", "display_name": "Simeon Godinyachki", "link": "https://stackoverflow.com/users/5102596/simeon-godinyachki"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1468445171, "post_id": 38361782, "comment_id": 64136313, "body": "@nwp added the whole function"}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "edited": false, "score": 0, "creation_date": 1468445322, "post_id": 38361782, "comment_id": 64136381, "body": "Are you using C++11?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5102596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b7cdbdcc9d4dac45e2d508a61b9ba5d?s=128&d=identicon&r=PG&f=1", "display_name": "Simeon Godinyachki", "link": "https://stackoverflow.com/users/5102596/simeon-godinyachki"}, "edited": false, "score": 0, "creation_date": 1468446773, "post_id": 38362187, "comment_id": 64137012, "body": "Yes that fixed it. Seems like the coffee wasnt enough :/ Thank you very much!!"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468446905, "post_id": 38362187, "comment_id": 64137069, "body": "you do not need condition to check if element is there already, but you should use <code>std::map::operator[]</code> instead: <code>auto &amp;pair = ageVoters[age]; if( vote == &quot;leave&quot; ) ++pair.first; ...</code>"}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468447016, "post_id": 38362187, "comment_id": 64137108, "body": "@Slava Careful, that has completely different semantics from <code>insert</code>. Using the brackets operator when there isn&#39;t an existing element will <b>first default construct an element, then assign the operand to that default-constructed element</b>. That&#39;ll almost surely have some performance impact for user defined types."}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468447110, "post_id": 38362187, "comment_id": 64137150, "body": "@Slava Hmm, I see you let that happen intentionally. Then if the OP wants to use it he can."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468447238, "post_id": 38362187, "comment_id": 64137204, "body": "@ZizhengTai readability is more important than microoptimization, and this way you remove code duplication and I doubt that you can measure speed difference if any."}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468447422, "post_id": 38362187, "comment_id": 64137273, "body": "@Slava Readability is definitely important, but if <code>Voter</code> is some non-trivial class I doubt this is &quot;micro-optimization&quot;. Anyway, since we don&#39;t know much about the type, let&#39;s let the OP decide."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468447670, "post_id": 38362187, "comment_id": 64137365, "body": "What do you mean we do not know? It is <code>std::pair&lt;int,int&gt;</code>."}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468447872, "post_id": 38362187, "comment_id": 64137435, "body": "@Slava Oops, somehow I kept thinking it was <code>Voter</code>. Didn&#39;t think straight. You are right."}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "reply_to_user": {"reputation": 21, "user_id": 5102596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b7cdbdcc9d4dac45e2d508a61b9ba5d?s=128&d=identicon&r=PG&f=1", "display_name": "Simeon Godinyachki", "link": "https://stackoverflow.com/users/5102596/simeon-godinyachki"}, "edited": false, "score": 0, "creation_date": 1468500868, "post_id": 38362187, "comment_id": 64159896, "body": "@SimeonGodinyachki Does my answer solves the problem? If yes, you can accept it."}], "tags": [], "owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "is_accepted": true, "score": 1, "last_activity_date": 1468447047, "last_edit_date": 1468447047, "creation_date": 1468446147, "answer_id": 38362187, "question_id": 38361782, "link": "https://stackoverflow.com/questions/38361782/modifying-value-of-map-pair/38362187#38362187", "title": "Modifying value of map pair", "body": "<p>From what I see, your code does not work because your <code>hasAge</code> is pointing to, I don't know, somewhere you probably don't mean to. You want to assign to it the result of <code>std::map::find</code>.</p>\n\n<p>Assuming you are using C++11, the code can also be simplified:</p>\n\n<pre><code>void VoteCollector::resultsBasedOnAge(const std::vector&lt;Voter&gt;&amp; voters)\n{\n    std::map&lt;int, std::pair&lt;int, int&gt;&gt; ageVoters;\n\n    for (const auto&amp; v: voters)\n    {\n        int age = v.getAge();\n        const auto&amp; vote = v.getVote();\n\n        auto it = ageVoters.find(age);\n        if (it != ageVoters.cend())\n        {\n            if (vote == \"leave\")\n            {\n                ++it-&gt;second.first;\n            }\n            else if (vote == \"stay\")\n            {\n                ++it-&gt;second.second;\n            }\n        }\n        else\n        {\n            if (vote == \"leave\")\n            {\n                ageVoters.insert(std::make_pair(age, std::make_pair(1, 0)));\n            }\n            else if (vote == \"stay\")\n            {\n                ageVoters.insert(std::make_pair(age, std::make_pair(0, 1)));\n            }\n        }\n    }\n\n    for (const auto&amp; v: voters)\n    {\n        std::cout &lt;&lt; v.first &lt;&lt; \" years -- \"\n                  &lt;&lt; v.second.first &lt;&lt; \" leave.\\t\"\n                  &lt;&lt; v.second.second &lt;&lt; \" stay\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5102596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b7cdbdcc9d4dac45e2d508a61b9ba5d?s=128&d=identicon&r=PG&f=1", "display_name": "Simeon Godinyachki", "link": "https://stackoverflow.com/users/5102596/simeon-godinyachki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 38362187, "answer_count": 1, "score": 0, "last_activity_date": 1551712222, "creation_date": 1468444246, "last_edit_date": 1551712222, "question_id": 38361782, "link": "https://stackoverflow.com/questions/38361782/modifying-value-of-map-pair", "title": "Modifying value of map pair", "body": "<p>Can somebody explain why whenever I try to increment the pair nothing happens? I tried debugging it and although it goes to the incrementing line nothing happens.</p>\n\n<p>EDIT: Here's the whole function</p>\n\n<pre><code>void VoteCollector::resultsBasedOnAge(std::vector&lt;Voter&gt;&amp; voters)\n{\n    std::map&lt;int,std::pair&lt;int,int&gt;&gt; ageVoters;\n    std::map&lt;int,std::pair&lt;int,int&gt;&gt;::iterator hasAge = ageVoters.begin();\n\n\n    for(unsigned i = 0; i &lt; voters.size(); i++)\n    {\n        if(ageVoters.find( voters.at(i).getAge() ) != ageVoters.end() )\n        {\n            if(voters.at(i).getVote() == \"leave\")\n            {\n                hasAge-&gt;second.first++;\n            }\n            else if(voters.at(i).getVote() == \"stay\")\n            {\n                hasAge-&gt;second.second++;\n            }\n            hasAge++;\n        }\n        else\n        {\n            if(voters.at(i).getVote() == \"leave\")\n            {\n                ageVoters.insert(std::make_pair(voters.at(i).getAge(),std::make_pair(1,0)));\n            }\n            else if(voters.at(i).getVote() == \"stay\")\n            {\n                ageVoters.insert(std::make_pair(voters.at(i).getAge(),std::make_pair(0,1)));\n            }\n            hasAge++;\n        }\n    }\n\n    for(std::map&lt;int,std::pair&lt;int,int&gt;&gt;::iterator it = ageVoters.begin(); it != ageVoters.end(); it++)\n    {\n        std::cout &lt;&lt; it-&gt;first &lt;&lt; \" years -- \" &lt;&lt; it-&gt;second.first &lt;&lt; \" leave.\\t\" &lt;&lt; it-&gt;second.second &lt;&lt; \" stay\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1468444311, "post_id": 38361774, "comment_id": 64135889, "body": "Can you show what have you tried so far?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1468444709, "post_id": 38361774, "comment_id": 64136052, "body": "Use a flag and set it to false.  Go through the vector element by element.  Once you find a non 0 and the flag is false set the flag to true and increment a counter.  Once you hit a zero set the flag back to false. keep going until you find another non 0 and do the same process."}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1468444795, "post_id": 38361774, "comment_id": 64136106, "body": "<a href=\"http://en.cppreference.com/w/cpp/algorithm/adjacent_find\" rel=\"nofollow noreferrer\">std::adjacent_find</a> can be used for finding group borders."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6317562, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/471d9f6f2e2ab44c6a5a6557395017b4?s=128&d=identicon&r=PG&f=1", "display_name": "HumbleMan", "link": "https://stackoverflow.com/users/6317562/humbleman"}, "edited": false, "score": 0, "creation_date": 1468447508, "post_id": 38362091, "comment_id": 64137311, "body": "Many many THANKS! Wish I could buy you a beer :)"}, {"owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "reply_to_user": {"reputation": 53, "user_id": 6317562, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/471d9f6f2e2ab44c6a5a6557395017b4?s=128&d=identicon&r=PG&f=1", "display_name": "HumbleMan", "link": "https://stackoverflow.com/users/6317562/humbleman"}, "edited": false, "score": 0, "creation_date": 1468447577, "post_id": 38362091, "comment_id": 64137338, "body": "Thanks HumbleMan :)"}], "tags": [], "owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "is_accepted": true, "score": 1, "last_activity_date": 1468445684, "creation_date": 1468445684, "answer_id": 38362091, "question_id": 38361774, "link": "https://stackoverflow.com/questions/38361774/specific-counting-once-vector-is-filled-with-zero-int-and-positive-int/38362091#38362091", "title": "Specific counting once vector is filled with zero int and positive int", "body": "<p>You have to loop through the elements in the vector and count the group if the previous value is zero as below.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint countGroups(vector&lt;int&gt; intVec)\n{\n    int count = 0;\n    int vec_size = intVec.size();\n\n    bool lastelemzero = true;\n\n    for(int i = 0; i &lt; vec_size; i++)\n    {\n        if((intVec[i]) &amp;&amp; (lastelemzero))\n        {\n            count++;\n            lastelemzero = false;\n        }\n\n        if(intVec[i] == 0)\n            lastelemzero = true;\n    }\n\n    return count;\n}\n\nint main()\n{\n    vector&lt;int&gt; count;\n\n    count.push_back(0);\n    count.push_back(0);\n    count.push_back(1);\n    count.push_back(2);\n    count.push_back(3);\n    count.push_back(0);\n    count.push_back(0);\n    count.push_back(0);\n    count.push_back(10);\n    count.push_back(20);\n    count.push_back(0);\n    count.push_back(0);\n    count.push_back(1);\n    count.push_back(2);\n    count.push_back(3);\n    count.push_back(0);\n    count.push_back(0);\n\n    cout &lt;&lt; \"number of groups : \" &lt;&lt; countGroups(count) &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6317562, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/471d9f6f2e2ab44c6a5a6557395017b4?s=128&d=identicon&r=PG&f=1", "display_name": "HumbleMan", "link": "https://stackoverflow.com/users/6317562/humbleman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1468489292, "accepted_answer_id": 38362091, "answer_count": 1, "score": -3, "last_activity_date": 1468445684, "creation_date": 1468444225, "last_edit_date": 1468444753, "question_id": 38361774, "link": "https://stackoverflow.com/questions/38361774/specific-counting-once-vector-is-filled-with-zero-int-and-positive-int", "closed_reason": "Needs details or clarity", "title": "Specific counting once vector is filled with zero int and positive int", "body": "<p>I have a <code>vector&lt;int&gt; count</code> which i <code>push_back</code> integers to, it is filled like this:</p>\n\n<p>0,0,0,0,0,0,0,<strong>1,2,3,4,5</strong>,0,0,0,0,0,0,0,0,<strong>6,7,8</strong>,0,0,0,0,<strong>9,10</strong>,0,0,0</p>\n\n<p>I want to go trough this vector and it should give <code>int counts = 3</code>, basically count how many positive integers there are between the zeros and count it as 1 per group.</p>\n\n<p>Tried to loop trough all the elements the whole day and try different approaches but now I am giving up, therefore help would be appreciated!</p>\n\n<p><a href=\"https://i.stack.imgur.com/MJYpy.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MJYpy.jpg\" alt=\"vector\"></a></p>\n"}, {"tags": ["python", "c++", "numpy", "fstream"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 5, "creation_date": 1468444269, "post_id": 38361698, "comment_id": 64135873, "body": "<code>ifstream f(&quot;test.bin&quot;);</code> That&#39;s text mode. Read the <a href=\"http://en.cppreference.com/w/cpp/io/basic_ifstream\" rel=\"nofollow noreferrer\">docs</a>."}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1468444476, "post_id": 38361698, "comment_id": 64135963, "body": "Thanks. didn&#39;t know that."}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1468445163, "post_id": 38361698, "comment_id": 64136304, "body": "tried binary mode. <code>fstream f;f.open(&quot;test.bin&quot;, ios::in | ios::binary);</code> and updated question. still can&#39;t see 9,10,11,12,13."}], "owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1216, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1468510894, "creation_date": 1468443932, "last_edit_date": 1495542757, "question_id": 38361698, "link": "https://stackoverflow.com/questions/38361698/read-uint32-t-from-binary-file-from-numpy", "title": "Read uint32_t from binary file from numpy", "body": "<p>The tofile() method of numpy array was used to write a unsigned 32bit integer array as a binary file (test.bin). Then, c++ was used to read uint32_t from the file. The problem is the c++ program didn't read the correct value. How to fix that?</p>\n\n<p>Hex editor shows the test.bin is correct because the value increases one by one, as expected.</p>\n\n<p>fileio.py:</p>\n\n<pre><code>import numpy as np\nx = np.arange(20)+65536\ny = x.astype(np.uint32)\nprint(y)\nwith open(\"test.bin\", \"wb+\") as f:\n    y.tofile(f)\n</code></pre>\n\n<p>output of fileio.py:</p>\n\n<pre><code>[65536 65537 65538 65539 65540 65541 65542 65543 65544 65545 65546 65547\n 65548 65549 65550 65551 65552 65553 65554 65555]\n</code></pre>\n\n<p>test.bin: (in hex editor. vim with %!xxd command)</p>\n\n<pre><code>0000000: 0000 0100 0100 0100 0200 0100 0300 0100  ................\n0000010: 0400 0100 0500 0100 0600 0100 0700 0100  ................\n0000020: 0800 0100 0900 0100 0a00 0100 0b00 0100  ................\n0000030: 0c00 0100 0d00 0100 0e00 0100 0f00 0100  ................\n0000040: 1000 0100 1100 0100 1200 0100 1300 0100  ................\n0000050: 0a                                       .   \n</code></pre>\n\n<p>fileio.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;byteswap.h&gt;\n\nusing namespace std;\n\nint main(void){\n    vector&lt;char&gt; arr;\n    char n;\n    int i;\n    int num_char=0;\n    //ifstream f(\"test.bin\");\n    fstream f;\n    f.open(\"test.bin\", ios::in | ios::binary);\n\n    while(f&gt;&gt;n){\n        cout &lt;&lt; int(n) &lt;&lt; ' ';\n        arr.push_back(n);\n        num_char++;\n    }\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"number of characters: \" &lt;&lt; num_char &lt;&lt; endl;\n    size_t uint32t_size = arr.size() * sizeof(char) / sizeof(uint32_t);\n    uint32_t* ptr_arr0 = (uint32_t*)arr.data();\n\n    cout &lt;&lt; \"uint32_t size: \" &lt;&lt; uint32t_size &lt;&lt; endl;\n    cout &lt;&lt; \"uint32_t interpretatin:\" &lt;&lt; endl;\n    for (i = 0; i &lt; uint32t_size; i++){\n        cout &lt;&lt; ptr_arr0[i] &lt;&lt; ' ';\n    }\n    cout &lt;&lt; endl;\n\n    cout &lt;&lt; \"32bit byteswap: \" &lt;&lt; endl;\n    for (i=0; i &lt; uint32t_size; i++){\n        ptr_arr0[i] = bswap_32(ptr_arr0[i]);\n        cout &lt;&lt; ptr_arr0[i] &lt;&lt; ' ';\n    }\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"characters after byte swap: \" &lt;&lt; endl;\n    for (i=0; i &lt; num_char; i++){\n        cout &lt;&lt; int(arr[i]) &lt;&lt; ' ';\n    }\n    cout &lt;&lt; endl;\n\n}   \n</code></pre>\n\n<p>output of fileio.cpp:</p>\n\n<pre><code>0 0 1 0 1 0 1 0 2 0 1 0 3 0 1 0 4 0 1 0 5 0 1 0 6 0 1 0 7 0 1 0 8 0 1 0 0 1 0 0 1 0 0 1 0 0 1 0 0 1 0 14 0 1 0 15 0 1 0 16 0 1 0 17 0 1 0 18 0 1 0 19 0 1 0 \nnumber of characters: 75\nuint32_t size: 18\nuint32_t interpretatin:\n65536 65537 65538 65539 65540 65541 65542 65543 65544 256 16777217 65536 234881280 251658496 268435712 285212928 301990144 318767360 \n32bit byteswap: \n256 16777472 33554688 50331904 67109120 83886336 100663552 117440768 134217984 65536 16777217 256 65550 65551 65552 65553 65554 65555 \ncharacters after byte swap: \n0 1 0 0 0 1 0 1 0 1 0 2 0 1 0 3 0 1 0 4 0 1 0 5 0 1 0 6 0 1 0 7 0 1 0 8 0 0 1 0 1 0 0 1 0 1 0 0 14 0 1 0 15 0 1 0 16 0 1 0 17 0 1 0 18 0 1 0 19 0 1 0 0 1 0 \n</code></pre>\n\n<p>It seems that byte swapping is not the only problem. The c++ program didn't even read all the 8bit integers correctly, as in:</p>\n\n<pre><code>... 1 0 8 0 1 0 0 1 0 0 1 0 0 1 0 0 1 0 0 1 0 14 ...\n</code></pre>\n\n<p>There is no number 9,10,11,12,13, despite these numbers exist in hex editor view of test.bin.</p>\n\n<p>Possibly related questions:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/19787186/reading-an-uint32-t-from-a-byte-stream\">Reading an uint32_t from a byte stream</a> </li>\n<li><a href=\"https://stackoverflow.com/questions/23418818/read-uint32-t-values-from-file\">Read uint32_t values from file</a></li>\n<li><a href=\"https://stackoverflow.com/questions/23831422/what-endianness-does-python-use-to-write-into-files\">What endianness does Python use to write into files?</a></li>\n</ul>\n\n<p>Update:</p>\n\n<p>readbinary.cpp\nIt is from <a href=\"https://stackoverflow.com/questions/15138353/reading-the-binary-file-into-the-vector-of-unsigned-chars\">reading the binary file into the vector of unsigned chars</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;byteswap.h&gt;\n#include &lt;iterator&gt;\nusing namespace std;\n\ntypedef unsigned char BYTE;\nstd::vector&lt;BYTE&gt; readFile(const char* filename)\n{\n    // open the file:\n    std::ifstream file(filename, std::ios::binary);\n\n    // Stop eating new lines in binary mode!!!\n    file.unsetf(std::ios::skipws);\n\n    // get its size:\n    std::streampos fileSize;\n\n    file.seekg(0, std::ios::end);\n    fileSize = file.tellg();\n    file.seekg(0, std::ios::beg);\n\n    // reserve capacity\n    std::vector&lt;BYTE&gt; vec;\n    vec.reserve(fileSize);\n\n    // read the data:\n    vec.insert(vec.begin(),\n               std::istream_iterator&lt;BYTE&gt;(file),\n               std::istream_iterator&lt;BYTE&gt;());\n\n    return vec;\n}\n\n\nint main(void){\n    std::vector&lt;BYTE&gt;  arr = readFile(\"test.bin\");\n    int i;\n    for (i=0;i&lt;arr.size();i++){\n        cout &lt;&lt; int(arr[i]) &lt;&lt; ' ';\n    }\n} \n</code></pre>\n\n<p>output of readbinary.cpp (it has 9,10,11,12).</p>\n\n<pre><code>0 0 1 0 1 0 1 0 2 0 1 0 3 0 1 0 4 0 1 0 5 0 1 0 6 0 1 0 7 0 1 0 8 0 1 0 9 0 1 0 10 0 1 0 11 0 1 0 12 0 1 0 13 0 1 0 14 0 1 0 15 0 1 0 16 0 1 0 17 0 1 0 18 0 1 0 19 0 1 0\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2015", "path"], "answers": [{"tags": [], "owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "is_accepted": true, "score": 2, "last_activity_date": 1468445559, "creation_date": 1468445559, "answer_id": 38362060, "question_id": 38361684, "link": "https://stackoverflow.com/questions/38361684/clarification-about-path-in-windows-and-including-files-in-visual-studio/38362060#38362060", "title": "Clarification about path in windows and including files in Visual Studio", "body": "<p>$(foo) is a macro for a folder name. Look at project properties... VC++ Directories... Include Directories... &lt; Edit > from the drop list... Macros button.  This provides you a list of all defined macros. </p>\n\n<p>$(ProjectDir)include will point to a project specific include folder.</p>\n\n<p>Macros that end in 'Dir' usually end with a path separator so $(foo)subdir works fine.  No need for extra path separator as in: $(foo)\\subdir.</p>\n"}], "owner": {"reputation": 132, "user_id": 6268910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/02debee3d74e0bc619cdfcb0bbc92f9b?s=128&d=identicon&r=PG&f=1", "display_name": "DSDS", "link": "https://stackoverflow.com/users/6268910/dsds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 38362060, "answer_count": 1, "score": 1, "last_activity_date": 1468445559, "creation_date": 1468443868, "question_id": 38361684, "link": "https://stackoverflow.com/questions/38361684/clarification-about-path-in-windows-and-including-files-in-visual-studio", "title": "Clarification about path in windows and including files in Visual Studio", "body": "<p>I don't understand what does the dollar sign mean in a path in Windows 7 for example:</p>\n\n<pre><code>$(dir5)\\include;\n</code></pre>\n\n<p>And also if I want to specify the location of some header files that I want to include inside my c++ project in Visual Studio. And the include folder is in my project folder. Should I write the path like:</p>\n\n<pre><code>\\include\\  or   \\include    or    include\\\n</code></pre>\n\n<p>And also if I'm using a third part dll file should I add its path in the environment variable?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 5, "creation_date": 1468443657, "post_id": 38361554, "comment_id": 64135594, "body": "I&#39;d ask if it makes sense for it to be a class at all."}, {"owner": {"reputation": 1113, "user_id": 4183920, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/373d5add81b78be87653a7987bf06fde?s=128&d=identicon&r=PG&f=1", "display_name": "PerryC", "link": "https://stackoverflow.com/users/4183920/perryc"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1468443712, "post_id": 38361554, "comment_id": 64135621, "body": "No arguments there, it&#39;s really more of a function. Specifically, it&#39;s a factory class."}, {"owner": {"reputation": 5460, "user_id": 73657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gzkFl.png?s=128&g=1", "display_name": "Dutow", "link": "https://stackoverflow.com/users/73657/dutow"}, "edited": false, "score": 2, "creation_date": 1468443913, "post_id": 38361554, "comment_id": 64135719, "body": "I can&#39;t see the reason for this being a class, but if you really want one, you could just disable the constructor. If you can&#39;t construct it, you won&#39;t be able to copy it."}, {"owner": {"reputation": 5460, "user_id": 73657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gzkFl.png?s=128&g=1", "display_name": "Dutow", "link": "https://stackoverflow.com/users/73657/dutow"}, "edited": false, "score": 0, "creation_date": 1468444126, "post_id": 38361554, "comment_id": 64135809, "body": "Is the private static part a member variable, or just the methods you moved? Do you have static data anywhere in this class?"}, {"owner": {"reputation": 1457, "user_id": 2981588, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f4f2945d6e635729ef90306b3fc473d?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/2981588/tim"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1468444351, "post_id": 38361554, "comment_id": 64135905, "body": "Because you have deleted the copy constructor and copy assignment operator, users can&#39;t create a default-constructed instance of <code>MyClass</code> so it&#39;s not an issue. That said, I agree with @juanchopanza in that this isn&#39;t much of a class at all. What you really want is a module..."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1468444372, "post_id": 38361554, "comment_id": 64135913, "body": "I&#39;d say make it a non-member function and then you don&#39;t even have to worry about copy/assignment etc."}, {"owner": {"reputation": 1113, "user_id": 4183920, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/373d5add81b78be87653a7987bf06fde?s=128&d=identicon&r=PG&f=1", "display_name": "PerryC", "link": "https://stackoverflow.com/users/4183920/perryc"}, "reply_to_user": {"reputation": 5460, "user_id": 73657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gzkFl.png?s=128&g=1", "display_name": "Dutow", "link": "https://stackoverflow.com/users/73657/dutow"}, "edited": false, "score": 1, "creation_date": 1468444402, "post_id": 38361554, "comment_id": 64135931, "body": "@Dutow It was just methods. No variables. Really this was made a class simply to organize it in our code. It&#39;s essentially a namespace. I&#39;ve spoken with a few co-workers about this and we came to the conclusion that this class really exists for organizational purposes and isn&#39;t really (even though we&#39;re treating it like it is) a class."}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1468445225, "post_id": 38361554, "comment_id": 64136335, "body": "@juanchopanza: Yes it does. You can later on specialize a template on a static class; to my knowledge, you cannot do that on a namespace."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1468445272, "post_id": 38361554, "comment_id": 64136359, "body": "@lorro Who said this was a class template?"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1468447045, "post_id": 38361554, "comment_id": 64137117, "body": "Following others&#39; suggestions about not being constructible will match up with <a href=\"https://msdn.microsoft.com/en-us/library/79b3xss3.aspx\" rel=\"nofollow noreferrer\">C# static classes</a>"}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1468449556, "post_id": 38361554, "comment_id": 64138022, "body": "@juanchopanza: not this.. Any other. A template class that takes <i>this</i> class as the template parameter."}], "answers": [{"tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 1, "last_activity_date": 1468444496, "creation_date": 1468444496, "answer_id": 38361821, "question_id": 38361554, "link": "https://stackoverflow.com/questions/38361554/does-it-make-any-sense-to-delete-copy-assignment-operators-on-a-purely-static-pu/38361821#38361821", "title": "Does it make any sense to delete copy/assignment operators on a purely static public interface in C++?", "body": "<p>It cant hurt to <code>delete</code> them, this way a default one wont be created for you by the compiler. You should however <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow\">follow the rule of 3</a> and explicitly declare the destructor (not that it matters).</p>\n\n<p>This class is then pretty pointless though. It seems like you should instead declare non-member functions as part of a namespace:</p>\n\n<pre><code>namespace myFactoryPattern {\n    MyReturnType* CreateSomeMock(const myType input);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1468446849, "post_id": 38361830, "comment_id": 64137047, "body": "there isn&#39;t a good analogy for a <code>protected</code> <code>static</code> member function in a namespace."}], "tags": [], "owner": {"reputation": 5460, "user_id": 73657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gzkFl.png?s=128&g=1", "display_name": "Dutow", "link": "https://stackoverflow.com/users/73657/dutow"}, "is_accepted": true, "score": 1, "last_activity_date": 1468444970, "last_edit_date": 1468444970, "creation_date": 1468444534, "answer_id": 38361830, "question_id": 38361554, "link": "https://stackoverflow.com/questions/38361554/does-it-make-any-sense-to-delete-copy-assignment-operators-on-a-purely-static-pu/38361830#38361830", "title": "Does it make any sense to delete copy/assignment operators on a purely static public interface in C++?", "body": "<p>The only difference between a class with one (or more) static functions, and a few functions within namespaces is when you use templates: you can use the class as a template parameter, but not a namespace.</p>\n\n<p>Alternatively, you could use the static method as the template parameter, but that won't scale when you add more method to your class or namespace.</p>\n\n<p>E.g. if you have:</p>\n\n<pre><code>class X {\npublic:\n  static void a();\n  static void b();\n};\n</code></pre>\n\n<p>You can use it in a template as <code>some_template&lt;X&gt;</code>, and your templates could call a and b on the template parameter:</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid some_template() { T::a(); T::b(); }\n</code></pre>\n\n<p>But if <code>X</code> is a namespace, you would need two template parameters\n: <code>some_template&lt;X::a, X::b&gt;</code></p>\n\n<p>If this is a valid use case, so you really do need a static class, you probably want to avoid accidentally creating an instance of it.</p>\n\n<p>A practical reason for that is that in C++, every object requires a size bigger than zero: when somebody accidentally creates an instance of this class, it will have a cost, even if minimal.</p>\n"}, {"tags": [], "owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "is_accepted": false, "score": 1, "last_activity_date": 1468446631, "creation_date": 1468446631, "answer_id": 38362308, "question_id": 38361554, "link": "https://stackoverflow.com/questions/38361554/does-it-make-any-sense-to-delete-copy-assignment-operators-on-a-purely-static-pu/38362308#38362308", "title": "Does it make any sense to delete copy/assignment operators on a purely static public interface in C++?", "body": "<p>This pattern is called static class. It differs from a namespace (which you might consider as an alternative) in that a template can be specialized over it. It's expected, but not required that you delete: (either in the class, or a base class)</p>\n\n<ul>\n<li>Default, copy and move constructors</li>\n<li>Copy and move assignment</li>\n</ul>\n\n<p>Or, alternatively you might delete:</p>\n\n<ul>\n<li>Destructor (disallowing non-pointers and <code>delete</code>)</li>\n<li><code>operator new(size_t)</code> and <code>operator new[](size_t)</code> (disallowing <code>new</code> to a naked pointer that's never deleted)</li>\n</ul>\n\n<p>The latter has the fun factor of surprising everyone and stealing hours from their time to understand what's going on and why they cannot create and instance.</p>\n\n<p>Or - you might just allow instances. It really hurts no-one, experienced programmers won't create any; but you might still pass it to template functions that expect a member to be passed given your static methods fulfil the interface required. </p>\n"}], "owner": {"reputation": 1113, "user_id": 4183920, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/373d5add81b78be87653a7987bf06fde?s=128&d=identicon&r=PG&f=1", "display_name": "PerryC", "link": "https://stackoverflow.com/users/4183920/perryc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 38361830, "answer_count": 3, "score": 1, "last_activity_date": 1468446631, "creation_date": 1468443390, "last_edit_date": 1468444780, "question_id": 38361554, "link": "https://stackoverflow.com/questions/38361554/does-it-make-any-sense-to-delete-copy-assignment-operators-on-a-purely-static-pu", "title": "Does it make any sense to delete copy/assignment operators on a purely static public interface in C++?", "body": "<p>I'm writing a class that has one public static method and a few private methods in C++. Does it make any sense to explicitly delete (see code below) the copy and assignment operators in this case?</p>\n\n<pre><code>public:\n    static MyReturnType* CreateSomeMock(const myType input);\n\n    MyClass(const MyClass&amp;) = delete;\n    MyClass&amp; operator=(const MyClass&amp;) = delete;\n\nprivate:\n    static ...\n</code></pre>\n\n<p>I'm inclined to say that I shouldn't worry about someone trying to copy or assign to a default constructed class with no instance variables. I'm just not 100% and am curious what the community thinks is a best practice.</p>\n\n<p><strong>UPDATE 1</strong></p>\n\n<p>I've moved the private methods to just be non-member functions defined in the .cpp file. The header still contains the public member function <code>CreateSomeMock</code> and I'm still curious about the assignment/copy-construction =).</p>\n\n<p><strong>UPDATE 2</strong></p>\n\n<p>This \"class\" is essentially a namespace. I appreciate all the answers around this point and also want to keep this on topic of the <code>= delete</code> part of the question in this case (which I agree at this point should really be avoided...but I'm case-in-point that it happens sometimes).</p>\n"}, {"tags": ["c++", "c", "eclipse", "path"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1468443637, "post_id": 38361477, "comment_id": 64135586, "body": "The error log does not tell you that PATH is empty, it says that g++ and gcc are not found.  Notice that every slash in your PATH above is a backslash except those for java - edit your PATH to the bare minimum.  Note too that you don&#39;t have <code>&quot;</code> around your space embedded PATH variables (maybe it should be &quot;c:/program files/java\\......&quot; not c:/program files/java/....)"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 1, "creation_date": 1468443894, "post_id": 38361477, "comment_id": 64135708, "body": "See <a href=\"http://stackoverflow.com/questions/11703432/eclipse-c-program-g-not-found-in-path\" title=\"eclipse c program g not found in path\">stackoverflow.com/questions/11703432/&hellip;</a>"}, {"owner": {"reputation": 35, "user_id": 6557656, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206851026180651/picture?type=large", "display_name": "Justin", "link": "https://stackoverflow.com/users/6557656/justin"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1468447585, "post_id": 38361477, "comment_id": 64137341, "body": "@KevinDTimm I changed all the &#39;/&#39; to &#39;\\&#39; and that didn&#39;t work. I followed the link you provided, but none of the solutions there seemed to work. Do you think it might be a MinGW problem? Also, can you elaborate on &#39; Note too that you don&#39;t have &quot; around your space embedded PATH variables &#39;. Don&#39;t quite understand that part."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1468506230, "post_id": 38361477, "comment_id": 64163739, "body": "Embedded spaces in your path can screw things up, so instead of having <code>...;c:&#47;program files&#47;java&#47;jre1.8.0_91&#47;bin&#47;server;...</code> you would have <code>...;&quot;c:&#47;program files&#47;java&#47;jre1.8.0_91&#47;bin&#47;server&quot;;...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 6557656, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206851026180651/picture?type=large", "display_name": "Justin", "link": "https://stackoverflow.com/users/6557656/justin"}, "is_accepted": false, "score": 0, "last_activity_date": 1468450647, "creation_date": 1468450647, "answer_id": 38363048, "question_id": 38361477, "link": "https://stackoverflow.com/questions/38361477/eclipse-4-4-luna-windows-7-program-gcc-not-found-in-path/38363048#38363048", "title": "Eclipse 4.4 Luna Windows 7 &#39;Program &quot;gcc&quot; not found in PATH&#39;", "body": "<p>I got the approval from my company to uninstall Eclipse and install the latest version, and everything worked flawlessly. May have had something to do with the way Eclipse was set up. </p>\n"}], "owner": {"reputation": 35, "user_id": 6557656, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206851026180651/picture?type=large", "display_name": "Justin", "link": "https://stackoverflow.com/users/6557656/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468450647, "creation_date": 1468443158, "question_id": 38361477, "link": "https://stackoverflow.com/questions/38361477/eclipse-4-4-luna-windows-7-program-gcc-not-found-in-path", "title": "Eclipse 4.4 Luna Windows 7 &#39;Program &quot;gcc&quot; not found in PATH&#39;", "body": "<p>Eclipse keeps telling me 'Program g++/gcc not found in PATH'. I've done at least an hour of internet research to try to fix the problem, from modifying my system path to include C:\\MinGW\\bin (where it's confirmed gcc and g++ exist) to Restoring default settings in several different preference menus, all to no avail. In Project Settings > C/C++ Build > Environemnt, my PATH variable looks like:</p>\n\n<pre><code>C:\\MinGW\\bin;${MSYS_HOME}\\bin;C:/Program Files/Java/jre1.8.0_91/bin/server;C:/Program Files/Java/jre1.8.0_91/bin;C:/Program Files/Java/jre1.8.0_91/lib/amd64;C:\\MinGW\\bin\\;C:\\ProgramData\\Oracle\\Java\\javapath;C:\\apache-tomcat-7.0.21/bin;C:\\org.apache.ant_1.7.0.v200706080842\\bin;C:\\jdk6\\bin;C:\\Microsemi\\Libero_v8.5\\Model\\win32acoem;C:\\Microsemi\\Libero_v8.5\\Designer\\bin;C:\\Microsemi\\Libero_v9.1\\Model\\win32acoem;C:\\Microsemi\\Libero_v9.1\\Designer\\bin;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\TortoiseSVN\\bin;C:\\Program Files\\Hewlett-Packard\\SimplePass\\;C:\\Microsemi\\Libero_v8.5\\WFL/bin;C:\\Program Files\\Amazon\\AWSCLI\\;C:\\Eclipse\\eclipse-cpp-luna-R-win32-x86_64\\eclipse;C:\\MinGW\\bin\n</code></pre>\n\n<p>C:\\MinGW\\bin is at the beginning, although the \n<a href=\"http://i.stack.imgur.com/IZV7w.png\" rel=\"nofollow\">error log</a></p>\n\n<p>tells me that my PATH is empty. Any idea what could be going wrong?</p>\n"}, {"tags": ["c++", "python-3.x", "cython"], "answers": [{"comments": [{"owner": {"reputation": 805, "user_id": 4641969, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/scRBS.jpg?s=128&g=1", "display_name": "Trekkie", "link": "https://stackoverflow.com/users/4641969/trekkie"}, "edited": false, "score": 0, "creation_date": 1468446647, "post_id": 38361889, "comment_id": 64136967, "body": "Good idea, will try it tomorrow and let you know."}], "tags": [], "owner": {"reputation": 5662, "user_id": 5781248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712de4f2f811d1a400d3311c9cdd5836?s=128&d=identicon&r=PG&f=1", "display_name": "J.J. Hakala", "link": "https://stackoverflow.com/users/5781248/j-j-hakala"}, "is_accepted": true, "score": 4, "last_activity_date": 1468444823, "creation_date": 1468444823, "answer_id": 38361889, "question_id": 38361302, "link": "https://stackoverflow.com/questions/38361302/wrapping-a-c-struct-in-cython/38361889#38361889", "title": "Wrapping a C++ struct in Cython", "body": "<p>A simple cast might be sufficient,</p>\n\n<pre><code>def foo(np.ndarray[np.complex64_t, ndim=1] arr, int arr_sz):\n    return cmylib.foo(&lt;cmylib.cmplx64 *&gt;&amp;arr[0], arr_sz)\n</code></pre>\n"}], "owner": {"reputation": 805, "user_id": 4641969, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/scRBS.jpg?s=128&g=1", "display_name": "Trekkie", "link": "https://stackoverflow.com/users/4641969/trekkie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 582, "favorite_count": 0, "accepted_answer_id": 38361889, "answer_count": 1, "score": 3, "last_activity_date": 1468444823, "creation_date": 1468442427, "question_id": 38361302, "link": "https://stackoverflow.com/questions/38361302/wrapping-a-c-struct-in-cython", "title": "Wrapping a C++ struct in Cython", "body": "<p>I am trying to Cython-wrap a dll written in C++ with the following header file:</p>\n\n<pre><code>#define EXTERN_DLL_EXPORT extern \"C\" __declspec(dllexport)\n\nstruct cmplx64\n{\n    float re;\n    float im;\n};\n\nEXTERN_DLL_EXPORT int foo(cmplx64 *arr, int arr_sz);\n</code></pre>\n\n<p>The PXD file:</p>\n\n<pre><code>cdef extern from \"mylib.h\":\n\n    cdef struct cmplx64:\n        np.float64_t re\n        np.float64_t im\n\n    int foo(cmplx64 *arr, int arr_sz) except +\n</code></pre>\n\n<p>The PYX file:</p>\n\n<pre><code>cimport cmylib\nimport numpy as np\ncimport numpy as np\nimport cython\n\ndef foo(np.ndarray[np.complex64_t, ndim=1] arr, int arr_sz):\n\n    return cmylib.foo(&amp;arr[0], arr_sz)\n</code></pre>\n\n<p>The problem does not appear with my setup file.</p>\n\n<p>In lieu of the <code>struct</code> definition, I have tried building a <code>cppclass</code> per a suggestion I found, but I did not get as far with that as this current method.</p>\n\n<p>The error message I am getting is:</p>\n\n<pre><code>Cannot assign type 'float complex *' to 'complexFloatStruct *'\n</code></pre>\n\n<p>My problem is caused by the fact that the author of the library I'm using defined a complex type with a struct rather than simply using the built in complex type in the C++ <code>std</code> library. If that were the case, I would have no issue. </p>\n\n<p>However, it seems perfectly reasonable that I should be able to wrap a C++ class or struct with Cython. I have been over the documentation and have pretty much failed. Thanks for your help!</p>\n"}, {"tags": ["c++", "templates", "inheritance"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1468442012, "post_id": 38361075, "comment_id": 64134797, "body": "<code>B&lt;ADerived&gt;</code> and <code>B&lt;A&lt;POD&gt;&gt;</code> are completely different types, it does not matter if <code>ADerived</code> is inherited from <code>A&lt;POD&gt;</code> or not. Your design does not look right, but it is difficult to suggest anything, there is not enough info"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1468442210, "post_id": 38361075, "comment_id": 64134906, "body": "Suggestion, quite often it is easier to implement what you need for specific type without template and then generalize it."}, {"owner": {"reputation": 356, "user_id": 1827360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e11ea4b5d604a4e093de7194cbb62482?s=128&d=identicon&r=PG", "display_name": "Timtro", "link": "https://stackoverflow.com/users/1827360/timtro"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468513085, "post_id": 38361075, "comment_id": 64168604, "body": "Thanks @Slava. Believe it or not, this is an attempt to <i>lift</i> from an algorithm I already coded for specific types. I am trying to generalize my API to a library/framework. It is difficult to get right, and I&#39;m quite sure I&#39;m not. But I guess we all learn somehow."}], "answers": [{"comments": [{"owner": {"reputation": 356, "user_id": 1827360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e11ea4b5d604a4e093de7194cbb62482?s=128&d=identicon&r=PG", "display_name": "Timtro", "link": "https://stackoverflow.com/users/1827360/timtro"}, "edited": false, "score": 1, "creation_date": 1468512865, "post_id": 38361347, "comment_id": 64168485, "body": "Thanks. You inspired me to the answer I need. I will take the types of the derived classes as template arguments and use <code>auto</code> and <code>decltype(.)</code> to get the information about return types as I need it. That way, only the original <code>A</code> needs to know about the POD types."}], "tags": [], "owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "is_accepted": true, "score": 2, "last_activity_date": 1468442658, "creation_date": 1468442658, "answer_id": 38361347, "question_id": 38361075, "link": "https://stackoverflow.com/questions/38361075/failure-of-polymorphism-due-to-inability-to-resolve-template-arguments/38361347#38361347", "title": "Failure of polymorphism due to inability to resolve template arguments?", "body": "<p>Template arguments are resolved statically and to exact type. Thus <code>B&lt;ADerived&gt;</code> won't decay to <code>B&lt;A&lt;POD&gt;&gt;</code> even if <code>ADerived</code> is a descendant of <code>A&lt;POD&gt;</code>. You might work around this by:</p>\n\n<ul>\n<li>Taking one more template parameter, <code>T</code>, in <code>Aggregator</code>, and optionally ensuring (using <code>std::enable_if&lt;&gt;</code> and <code>std::is_base&lt;&gt;</code>) that <code>A&lt;POD&gt;</code> is a base of <code>T</code>, or</li>\n<li>Exposing <code>T</code> in <code>B</code> using a <code>typedef</code>, then taking <code>T</code> in <code>Aggregator</code> and storing <code>T</code> and <code>A&lt;B::T&gt;</code> in <code>Aggregator</code>.</li>\n</ul>\n"}], "owner": {"reputation": 356, "user_id": 1827360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e11ea4b5d604a4e093de7194cbb62482?s=128&d=identicon&r=PG", "display_name": "Timtro", "link": "https://stackoverflow.com/users/1827360/timtro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 38361347, "answer_count": 1, "score": 0, "last_activity_date": 1468442658, "creation_date": 1468441443, "question_id": 38361075, "link": "https://stackoverflow.com/questions/38361075/failure-of-polymorphism-due-to-inability-to-resolve-template-arguments", "title": "Failure of polymorphism due to inability to resolve template arguments?", "body": "<p>I know this seems convoluted, but I hope somebody may point out my mistake here. I'm sure the design will leave a bad taste in some of your mouths, and I'm happy to hear design alternatives. But the form comes from modeling in the problem domain.</p>\n\n<p>I'm sure I'm being silly, but there is something about the way templates couple with inheritance that is confusing me. Here is some pared down code with a description to follow:</p>\n\n<pre><code>// main.cpp\n\n#include &lt;cstdio&gt;\n\ntemplate &lt;typename POD&gt;\nclass A {\n public:\n  POD data;\n  POD get_a() { return data; }\n};\n\ntemplate &lt;typename T&gt;\nclass B {\n public:\n  virtual void do_something_with_an_A_child(const T&amp;) = 0;\n};\n\nclass ADerived : public A&lt;float&gt; {\n public:\n  ADerived(float a) { data = a; }\n};\n\nclass BDerived : public B&lt;ADerived&gt; {\n public:\n  virtual void do_something_with_an_A_child(const ADerived&amp; someA) {\n    printf(\"A bit of A-type's data: %f\\n\", someA.data);\n  }\n};\n\ntemplate &lt;typename POD&gt;\nclass Aggregator {\n public:\n  A&lt;POD&gt;* instanceOfA;\n  B&lt;A&lt;POD&gt;&gt;* instanceOfB;\n  Aggregator(A&lt;POD&gt;* anA, B&lt;A&lt;POD&gt;&gt;* aB) : instanceOfA(anA), instanceOfB(aB) {}\n};\n\nint main() {\n  ADerived myADerived(3.14159f);\n  BDerived myBDerived;\n\n  Aggregator&lt;float&gt; myAggregator(&amp;myADerived, &amp;myBDerived);\n\n  return 1;\n}\n</code></pre>\n\n<p>So <code>A</code> is a class template that's signature is just some built-in type(s). (In my particular case, <code>A</code> has methods which operate on its internal data.) The class <code>B</code> is meant to promise an interface to some operations that are meant for a specific instance of an <code>A&lt;.&gt;</code>. So, in the code above, you see I define <code>A</code> and <code>B</code> as template classes and then create classes which inherit from those template classes, giving <code>ADerived</code> and <code>BDerived</code>.</p>\n\n<p>(In the real case, <code>A</code> represents a mathematical model and some data, and <code>B</code> is an interface to perform a mathematical optimization on a model.)</p>\n\n<p>Now, an class which should have links to instances of an <code>ADerivded</code> and <code>BDerived</code> (for the purposes of creating a generic algorithm based on their interfaces) I have called <code>Aggregator</code>, which simply takes some pointers in the constructor. I only want <code>Aggregator</code> to need to know about the <code>POD</code> types, since it is meant only to manipulate the interfaces and not worry too much about what the objects contain.</p>\n\n<p>I get the following compiler error from <code>clang++</code> with <code>-std=c++14</code>:</p>\n\n<pre><code>main.cpp:42:21: error: no matching constructor for initialization of 'Aggregator&lt;float&gt;'\n  Aggregator&lt;float&gt; myAggregator(&amp;myADerived, &amp;myBDerived);\n                    ^            ~~~~~~~~~~~~~~~~~~~~~~~~\nmain.cpp:35:3: note: candidate constructor not viable: no known conversion from 'BDerived *' to 'B&lt;A&lt;float&gt; &gt; *' for 2nd argument\n  Aggregator(A&lt;POD&gt;* anA, B&lt;A&lt;POD&gt;&gt;* aB) : instanceOfA(anA), instanceOfB(aB) {}\n  ^\n</code></pre>\n\n<p>The meaning is clear, but I'm not sure why it can't see that a <code>BDerived</code> is a <code>B&lt;A&lt;float&gt;&gt;</code>. I mean, it is specifically a <code>B&lt;ADerived&gt;</code>, but <code>ADerived</code> is an <code>A&lt;float&gt;</code>, and therefore a <code>BDerived</code> should be seen as a <code>B&lt;A&lt;float&gt;&gt;</code>. This obviously isn't the case, so either I'm doing something stupid and hope to have someone point it out, or this isn't possible in C++, and I need some alternative design suggestions.</p>\n"}, {"tags": ["c++", "opencv", "ubuntu-12.04", "opencv3.1", "v4l"], "comments": [{"owner": {"reputation": 3752, "user_id": 1318479, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/536ad7679a0ea8581f8be5a7dae93b73?s=128&d=identicon&r=PG", "display_name": "cb4", "link": "https://stackoverflow.com/users/1318479/cb4"}, "edited": false, "score": 0, "creation_date": 1468441768, "post_id": 38361048, "comment_id": 64134662, "body": "Help the community give you help by posting your code and the error message output referencing which line is throwing the error."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1261273"}, "edited": false, "score": 0, "creation_date": 1505141428, "post_id": 38361048, "comment_id": 79279002, "body": "I have a loop in python reading a video frame every few minutes and I get the same error."}, {"owner": {"reputation": 31, "user_id": 6586378, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Sr01usdW4-k/AAAAAAAAAAI/AAAAAAAAABg/nFME0Z1-X8A/photo.jpg?sz=128", "display_name": "Jason Pitt", "link": "https://stackoverflow.com/users/6586378/jason-pitt"}, "reply_to_user": {"reputation": 3752, "user_id": 1318479, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/536ad7679a0ea8581f8be5a7dae93b73?s=128&d=identicon&r=PG", "display_name": "cb4", "link": "https://stackoverflow.com/users/1318479/cb4"}, "edited": false, "score": 0, "creation_date": 1528317609, "post_id": 38361048, "comment_id": 88466264, "body": "@cb4 code added"}], "owner": {"reputation": 31, "user_id": 6586378, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Sr01usdW4-k/AAAAAAAAAAI/AAAAAAAAABg/nFME0Z1-X8A/photo.jpg?sz=128", "display_name": "Jason Pitt", "link": "https://stackoverflow.com/users/6586378/jason-pitt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1983, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1528317556, "creation_date": 1468441337, "last_edit_date": 1528317556, "question_id": 38361048, "link": "https://stackoverflow.com/questions/38361048/opencv-3-1-videoio-error-v4l-device-dev-video-unable-to-query-number-of-chann", "title": "OPENCV 3.1 videoio error: v4l: device /dev/video unable to query number of channels", "body": "<p>I have a C++ program written with opencv 3.1 on a workstation running ubuntu 12.04.  The program captures a frame from a USB camera (/dev/video2) every 5 minutes, does a bit of stuff, and saves the frame to disk.  For some reason the program is throwing this runtime error, but the code seems to be working fine, ie. it's capturing and saving frames, even when running for days...I'm just wondering what the runtime error means and why it's being thrown, and if I need to worry about it? \nVIDEOIO ERROR: V4L: device /dev/video2: Unable to query number of channels</p>\n\n<p>here's the relevant capture code:</p>\n\n<pre><code>    int capture_frame(int doAlign){\n\n    try{\n\n    vector&lt;int&gt; compression_params;\n            compression_params.push_back(CV_IMWRITE_PNG_COMPRESSION);//(CV_IMWRITE_PXM_BINARY);\n            compression_params.push_back(0);\n\n\n\n\n\n        VideoCapture cap(cameranum); // open the default camera\n\n\n        long\n        c=0;\n        while(!cap.isOpened()){ // check if we succeeded\n           if (!cap.isOpened() &amp;&amp; c &lt; 3){\n               sleep(1);\n           }\n           if (!cap.isOpened() &amp;&amp; c &gt;=3) return -1;\n           c++;\n        }//end while not opened\n\n        cap.set(CV_CAP_PROP_FRAME_WIDTH, 1920);\n\n        cap.set(CV_CAP_PROP_FRAME_HEIGHT, 1080);\n\n\n        Mat frame;\n        Mat frame_gray;\n\n\n        while(frame.empty()){\n            for (int i=0; i &lt; 10; i++) {cap &gt;&gt; frame;} // get a new frame from camera\n        }\n\n\n\n        cvtColor(frame, frame_gray, CV_BGR2GRAY); //make it gray\n\n\n\n        Mat lastframe;\n        Mat im2_aligned;\n\n\n\n        stringstream filename;\n        stringstream lastfilename;\n        stringstream number;\n        number &lt;&lt; setfill('0') &lt;&lt; setw(6) &lt;&lt; currentframe;\n        filename &lt;&lt; directory &lt;&lt; \"frame\" &lt;&lt; number.str() &lt;&lt; \".png\";\n        if (currentframe &lt;1 || doAlign == 0) {\n\n            imwrite(filename.str(), frame_gray, compression_params ); //frame vs frame_gray\n            //cout &lt;&lt; \"contrast: \" &lt;&lt; cvGetCaptureProperty(cap,11) &lt;&lt; endl;\n        }else{\n            number.str(\"\");\n            number &lt;&lt; setfill('0') &lt;&lt; setw(6) &lt;&lt; currentframe-1;\n            lastfilename &lt;&lt; directory &lt;&lt; \"/frame\" &lt;&lt; number.str() &lt;&lt; \".pgm\";\n            Mat im1= imread(lastfilename.str());\n            Mat im1_gray;\n            cvtColor(im1, im1_gray, CV_BGR2GRAY);\n\n            // Define the motion model\n            const int warp_mode = MOTION_TRANSLATION;\n\n            // Set a 2x3 warp matrix\n            Mat warp_matrix;\n             warp_matrix = Mat::eye(2, 3, CV_32F);\n             // Specify the number of iterations.\n             int number_of_iterations = 5000;\n\n             // Specify the threshold of the increment\n             // in the correlation coefficient between two iterations\n             double termination_eps = 1e-10;\n\n             // Define termination criteria\n             TermCriteria criteria (TermCriteria::COUNT+TermCriteria::EPS, number_of_iterations, termination_eps);\n\n             // Run the ECC algorithm. The results are stored in warp_matrix.\n             findTransformECC(im1_gray,frame_gray,warp_matrix,warp_mode,criteria);\n             warpAffine(frame, im2_aligned, warp_matrix, im1.size(), INTER_LINEAR + WARP_INVERSE_MAP);\n             Mat im2_aligned_gray;\n             cvtColor(im2_aligned, im2_aligned_gray, CV_BGR2GRAY);\n             imwrite(filename.str(), im2_aligned_gray, compression_params );\n             cap.release();\n\n\n\n\n        }//end if not first frame\n\n\n\n\n\n        currentframe++;\n        cap.release();\n    }catch (cv::Exception ex){\n        cout &lt;&lt; \" frame was bad! try again\" &lt;&lt; endl;\n        return (0);\n     }//end caught exception trying to load\n\n        return (1);\n\n}//end capture frame\n</code></pre>\n"}, {"tags": ["c++", "return"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1468441403, "post_id": 38361045, "comment_id": 64134452, "body": "Please indent your code.  It is hard to read with everything flushed to the left margin.  Also, why <code>#include &lt;Windows.h&gt;</code>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1468441507, "post_id": 38361045, "comment_id": 64134507, "body": "<i>would returning the result of the BMI calculation be the source of the problem?</i> -- You should have unit tested your function first with known data.  If it works properly when unit tested, then the function isn&#39;t the problem."}, {"owner": {"reputation": 64, "user_id": 5403162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MAWq1.jpg?s=128&g=1", "display_name": "Enthused Binary", "link": "https://stackoverflow.com/users/5403162/enthused-binary"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1468441761, "post_id": 38361045, "comment_id": 64134654, "body": "Note taken. With your question, &lt;Window.h&gt;, it&#39;s simple used for personal visual representation (SetConsoleTitle) ."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1468441880, "post_id": 38361045, "comment_id": 64134725, "body": "Here is an <a href=\"http://ideone.com/zx6KoR\" rel=\"nofollow noreferrer\">example of unit testing</a>.  As you can see, there is something wrong with the function calculation.  Once you fix that, <i>then</i> you use it in your larger application."}], "answers": [{"tags": [], "owner": {"reputation": 2020, "user_id": 1433712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2be98543dfefb8fbc4c9560de093c34c?s=128&d=identicon&r=PG", "display_name": "Alden", "link": "https://stackoverflow.com/users/1433712/alden"}, "is_accepted": true, "score": 5, "last_activity_date": 1468441656, "creation_date": 1468441656, "answer_id": 38361122, "question_id": 38361045, "link": "https://stackoverflow.com/questions/38361045/c-bmi-calculation-unexpected/38361122#38361122", "title": "C++ - BMI calculation unexpected", "body": "<p>BMI is calculated with weight over height squared. Your program calculates the inverse.</p>\n"}, {"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1468441838, "creation_date": 1468441838, "answer_id": 38361156, "question_id": 38361045, "link": "https://stackoverflow.com/questions/38361045/c-bmi-calculation-unexpected/38361156#38361156", "title": "C++ - BMI calculation unexpected", "body": "<p>Your formula for BMI is wrong. 72*72/210*703 (six foot tall, 15 stone) gives about 17,000.  You need weight divided by height squared.</p>\n"}], "owner": {"reputation": 64, "user_id": 5403162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MAWq1.jpg?s=128&g=1", "display_name": "Enthused Binary", "link": "https://stackoverflow.com/users/5403162/enthused-binary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 38361122, "answer_count": 2, "score": 0, "last_activity_date": 1468441838, "creation_date": 1468441331, "last_edit_date": 1468441601, "question_id": 38361045, "link": "https://stackoverflow.com/questions/38361045/c-bmi-calculation-unexpected", "title": "C++ - BMI calculation unexpected", "body": "<p>In my recent project, simple at short, I am calculating BMI.</p>\n\n<p>I am using a single dimension array for the weight and height (double types)</p>\n\n<p>To calculate the BMI, I use a function with the equation as a return value.</p>\n\n<p>The problem is the result which is far beyond the value of a BMI (example: 20456)</p>\n\n<p>If an acceptable question, would returning the result of the BMI calculation be the source of the problem?</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;Windows.h&gt;\n#include&lt;string&gt;\n\ndouble BMI(double height, double weight);\n\nint main()\n{\n    SetConsoleTitle(\"Body Mass Index\");\n\n    double BMIinput [2];\n    std::string Name;\n\n    std::cout &lt;&lt; \"Enter your height (inches): \"; \n    std::cin &gt;&gt; BMIinput[0]; \n    system(\"CLS\");\n    std::cin.ignore();\n\n    std::cout &lt;&lt; \"Enter your weight (pounds): \"; \n    std::cin &gt;&gt; BMIinput[1]; \n    system(\"CLS\");\n    std::cin.ignore();\n\n    std::cout &lt;&lt; \"Enter your name: \";  \n    std::getline(std::cin, Name); \n    system(\"CLS\");\n\n    std::cout &lt;&lt; \"Name: \" &lt;&lt; Name &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"BMI: \" &lt;&lt; BMI(BMIinput[0], BMIinput[1]) &lt;&lt; std::endl;\n    system(\"PAUSE\");\n    system(\"CLS\");\n\n    return 0;\n}\n\ndouble BMI(double height, double weight)\n{\n    return (height * height / weight) * 703;\n}\n</code></pre>\n"}, {"tags": ["c++", "vector", "random", "2d"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1468441241, "post_id": 38360868, "comment_id": 64134371, "body": "WTH is <code>tydle::Vector</code>??"}, {"owner": {"reputation": 1, "user_id": 4360682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6079835b9dead62032055e15372c1d?s=128&d=identicon&r=PG&f=1", "display_name": "simfrek", "link": "https://stackoverflow.com/users/4360682/simfrek"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1468441308, "post_id": 38360868, "comment_id": 64134405, "body": "tydle is a class, sorry, should have mentioned that, tydle::Vector is a 2d coordinate system"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1468441346, "post_id": 38360868, "comment_id": 64134428, "body": "Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating your problem please."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4360682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6079835b9dead62032055e15372c1d?s=128&d=identicon&r=PG&f=1", "display_name": "simfrek", "link": "https://stackoverflow.com/users/4360682/simfrek"}, "edited": false, "score": 0, "creation_date": 1468441482, "post_id": 38361038, "comment_id": 64134492, "body": "it does but in a odd way it is just a long list from 0 to 512*512 in a single dimention array, i tried that and it did not work, map is the vector of bools"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "reply_to_user": {"reputation": 1, "user_id": 4360682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6079835b9dead62032055e15372c1d?s=128&d=identicon&r=PG&f=1", "display_name": "simfrek", "link": "https://stackoverflow.com/users/4360682/simfrek"}, "edited": false, "score": 0, "creation_date": 1468441806, "post_id": 38361038, "comment_id": 64134682, "body": "@simfrek have you done the same array index calculation throughout your project? There might be more to fix"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "reply_to_user": {"reputation": 1, "user_id": 4360682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6079835b9dead62032055e15372c1d?s=128&d=identicon&r=PG&f=1", "display_name": "simfrek", "link": "https://stackoverflow.com/users/4360682/simfrek"}, "edited": false, "score": 0, "creation_date": 1468442038, "post_id": 38361038, "comment_id": 64134811, "body": "@simfrek I don&#39;t understand what you&#39;re trying to do with <code>(tempx % 512) * tempy</code>. For example, if you have tempx = 3 and tempy = 2, it&#39;ll calculate the same index as tempx = 2 and tempy = 3, thus causing a collision and not giving a unique index for each x and y"}, {"owner": {"reputation": 1, "user_id": 4360682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6079835b9dead62032055e15372c1d?s=128&d=identicon&r=PG&f=1", "display_name": "simfrek", "link": "https://stackoverflow.com/users/4360682/simfrek"}, "edited": false, "score": 0, "creation_date": 1468442151, "post_id": 38361038, "comment_id": 64134877, "body": "that is why i am only using the remainder of 512 of x, (start.x % 512), sorry the tempx and tempy are used instead of directly accessing start.x and start.y as wanted to make sure that wasnt the issue as had to cast as int before"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "reply_to_user": {"reputation": 1, "user_id": 4360682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6079835b9dead62032055e15372c1d?s=128&d=identicon&r=PG&f=1", "display_name": "simfrek", "link": "https://stackoverflow.com/users/4360682/simfrek"}, "edited": false, "score": 0, "creation_date": 1468442440, "post_id": 38361038, "comment_id": 64135007, "body": "@simfrek If you&#39;re using % to prevent exceeding bounds and wrap around, then try this: <code>((tempy % 512) * 512) + (tempx % 512)</code> Otherwise, your array indices are broken and it may be time to hit the books"}, {"owner": {"reputation": 1, "user_id": 4360682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6079835b9dead62032055e15372c1d?s=128&d=identicon&r=PG&f=1", "display_name": "simfrek", "link": "https://stackoverflow.com/users/4360682/simfrek"}, "edited": false, "score": 0, "creation_date": 1468443340, "post_id": 38361038, "comment_id": 64135431, "body": "that is a valid option although it does not solve my problem"}], "tags": [], "owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "is_accepted": false, "score": 0, "last_activity_date": 1468441284, "creation_date": 1468441284, "answer_id": 38361038, "question_id": 38360868, "link": "https://stackoverflow.com/questions/38360868/how-can-i-detect-when-tile-is-traversable/38361038#38361038", "title": "how can i detect when tile is traversable", "body": "<p>I would wager the problem comes from the way that you're calculating array indices:</p>\n\n<blockquote>\n  <p><code>int Coord = (tempx % 512) * tempy;</code></p>\n</blockquote>\n\n<p>If <code>map</code> represents a rectangular array of <code>bool</code>, of size <code>width * height</code>, then you should access your array like</p>\n\n<pre><code>array[(y * width) + x]\n</code></pre>\n\n<p>so that an increase of one in your <code>y</code> position shifts the index by <code>width</code> locations, or one row (since elements are stored contiguously) and an increase of one in your <code>x</code> position shifts exactly one index.</p>\n"}], "owner": {"reputation": 1, "user_id": 4360682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6079835b9dead62032055e15372c1d?s=128&d=identicon&r=PG&f=1", "display_name": "simfrek", "link": "https://stackoverflow.com/users/4360682/simfrek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1468441994, "creation_date": 1468440636, "last_edit_date": 1468441994, "question_id": 38360868, "link": "https://stackoverflow.com/questions/38360868/how-can-i-detect-when-tile-is-traversable", "title": "how can i detect when tile is traversable", "body": "<p>I am trying to detect if \"start\" and \"end\" and in a traversable location using a vector of bools called \"map\" but when I run the program both start and end sometimes appear in a location that is non-traversable. I have included a small section of my code which deals with initializing the locations of start, end uses the same code.</p>\n\n<pre><code>start = tydle::Vector(rand() % 512, rand() % 512);\nend = tydle::Vector(rand() % 512, rand() % 512);\nnodes.resize(0);\nint tempx = start.x;\nint tempy = start.y;\nint Coord = (tempx % 512) * tempy;\nwhile (!map[Coord]){\n    start.x = rand() % 512;\n    start.y = rand() % 512;\n    tempx = start.x;\n    tempy = start.y;\n    Coord = (tempx % 512) * tempy;\n}\n</code></pre>\n\n<p>below is a section of code used elswhere that uses the same while loop and works fine:</p>\n\n<pre><code>    for (int i = 0; i &lt; numNodes; i++){\n        tempNodes[i].resize(2);\n        tempNodes[i][0] = rand() % 512;\n        tempNodes[i][1] = rand() % 512;\n        int mapCood = (tempNodes[i][0] % 512) * tempNodes[i][1];\n        while (!map[mapCood]){\n            tempNodes[i][0] = rand() % 512;\n            tempNodes[i][1] = rand() % 512;\n            mapCood = (tempNodes[i][0] % 512) * tempNodes[i][1];\n        }\n    }\n</code></pre>\n"}, {"tags": ["c++", "templates", "boost", "boost-phoenix", "boost-proto"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1468441390, "post_id": 38360329, "comment_id": 64134444, "body": "I&#39;m not convinced the end result is any better than manual mapping (just generate the code if you have something to generate from). Also, I find the concept of &quot;converting a Car to a Wheel&quot; (whereby you loose all the other information implicitly) dubious. At the very least, It&#39;s badly named."}, {"owner": {"reputation": 485, "user_id": 3727403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c48c98cbf163e150b1b3acf853e4cc2?s=128&d=identicon&r=PG&f=1", "display_name": "Grisby_2133", "link": "https://stackoverflow.com/users/3727403/grisby-2133"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1468467743, "post_id": 38360329, "comment_id": 64142110, "body": "Maybe poorly named. But everyone has faced this situation: two APIs, similar, but perhaps at differing levels of abstraction. I&#39;m faced with it now, in fact!  Writing a bunch of boilerplate code is just taxing, if not downright depressing. There has got to be an automated way."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1468480829, "post_id": 38360329, "comment_id": 64146991, "body": "There might be. But in the absence of language reflection I would not spend too much time trying to shoe horn it into TMP. Been there. Done that. Look at popular libraries like AutoMapper for naming inspiration and concepts by the way. Good luck!"}, {"owner": {"reputation": 485, "user_id": 3727403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c48c98cbf163e150b1b3acf853e4cc2?s=128&d=identicon&r=PG&f=1", "display_name": "Grisby_2133", "link": "https://stackoverflow.com/users/3727403/grisby-2133"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1468526894, "post_id": 38360329, "comment_id": 64176608, "body": "I suspect the C++ compiler cannot synthesize method call names at compile-time, but the solution would still be of tremendous benefit even if we have to explicitly specify the getter/setter member functions.  The question then becomes, how to synthesize the methods needed to perform the actual conversion..."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1468528636, "post_id": 38360329, "comment_id": 64177532, "body": "Google &quot;preprocessor token pasting&quot;. Together with Boost.PP you should get somewhere. I&#39;m not sure what it brings you over just scripting that in a scripting language"}], "owner": {"reputation": 485, "user_id": 3727403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c48c98cbf163e150b1b3acf853e4cc2?s=128&d=identicon&r=PG&f=1", "display_name": "Grisby_2133", "link": "https://stackoverflow.com/users/3727403/grisby-2133"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1468438790, "creation_date": 1468438790, "question_id": 38360329, "link": "https://stackoverflow.com/questions/38360329/can-boost-proto-adapt-structures-to-a-getter-setter-type-api", "title": "Can Boost Proto adapt structures to a getter setter type API", "body": "<p>This seems like a common problem.  I've got two massive sets of code that need to be glued together: one that uses simple structs to hold data, the other has APIs that only expose getter/setter methods.</p>\n\n<p>Is it possible to use Boost.Proto to define a mapping that could then be used to auto-generate the code that invokes the getters/setters?  Conceptually, the piece that seems most difficult is the synthesis of the function names to call, as that would involve compile-time string concatenation.  Other challenges involve mapping enum types from one to the other and custom initialization or conversion code.</p>\n\n<p>Having a drop-in-place Proto-based solution that solves this problem would be a huge benefit to a wide variety of people.</p>\n\n<p>E.g., I have an API with types such as this:</p>\n\n<pre><code>// These classes use getters/setters.\nclass Wheel\n{\n    int number_of_lugnuts_;\npublic:\n    void initialize_wheel(bool);\n    void set_number_of_lugnuts(int);\n    int get_number_of_lugnuts();\n};\n\nclass Engine\n{\npublic:\n    enum Gas_type_t {\n        Unleaded,\n        Premium\n    };\nprivate:\n    Gas_type_t gas_type_;\npublic:\n    void initialize_engine(bool);\n    void set_gas_type(Gas_type_t);\n    Gas_type_t get_gas_type();\n};\n</code></pre>\n\n<p>While I also have millions of lines of code with the same data in simple directly-accessed structs:</p>\n\n<pre><code>// This code has simple data structures.\nstruct Car\n{\n    // These POD members are used by a large body of existing code.\n    int lugnut_count;\n    enum FUEL_TYPES {\n        NORMAL_FUEL,\n        HI_OCTANE\n    };\n    FUEL_TYPES fuelType;\n};\n</code></pre>\n\n<p>Now the old-fashioned way is to add a lot of converters:</p>\n\n<pre><code>// The manual way to accomplish this for only the Wheel API.\n// This has to be repeated similarly for the Engine API.\nvoid convert_to_wheel(Wheel&amp; w)\n{\n    w.initialize_wheel(true); // how can initialization be handled?\n    w.set_number_of_lugnuts(lugnut_count);\n}\n\nvoid convert_from_wheel(Wheel&amp; w)\n{\n    lugnut_count = w.get_number_of_lugnuts();\n}\n</code></pre>\n\n<p>But, in the style of Boost.Spirit, I would like to use Proto to create an EDSL allowing me to specify the mapping, and have the compiler generate the repetitive code for me.</p>\n\n<p>I can define enough Proto terminals to get this constructor to compile:</p>\n\n<pre><code>Car()\n{\n    // So can we define an API mapping like this?\n    // Would strings be the only way to accomplish this?\n    // This appears structurally similar to how Spirit grammars are defined.\n    // This is a very rough attempt because it's unclear if this is possible.\n    define_api_mapping&lt;Wheel&gt;\n        (initialization_code((_dest_ -&gt;* &amp;Wheel::initialize_wheel)(true)))\n        (map_member(lugnut_count) = map_getset(\"number_of_lugnuts\"))\n    ;\n    define_api_mapping&lt;Engine&gt;\n        (initialization_code((_dest_ -&gt;* &amp;Engine::initialize_engine)(true)))\n        (map_member(fuelType) = map_getset(\"gas_type\"))\n    ;\n    define_enum_mapping&lt;FUEL_TYPES&gt;\n        (enum_value(NORMAL_FUEL) = enum_value(Engine::Unleaded))\n        (enum_value(HI_OCTANE) = enum_value(Engine::Premium))\n    ;\n}\n</code></pre>\n\n<p>Conversion could conceptually be a simple function call:</p>\n\n<pre><code>// Declare some objects.\nCar c;\nEngine e;\nWheel w1, w2;\n\n// Set some values.\nc.lugnut_count = 20;\n\n// Convert the old fashioned way.\nc.convert_to_wheel(w1);\n\n// Convert the new way.\nconvert(c, w2);\n</code></pre>\n\n<p>It's an ugly start, but I'm now baffled by how to mangle the names to generate the calls to the getters and setters.</p>\n\n<p>Is this possible?  What would the solution look like?</p>\n"}, {"tags": ["c++", "ios", "sockets", "ipv6"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1468459819, "post_id": 38360309, "comment_id": 64140475, "body": "What EXACTLY are you having a problem with? You say there are errors, but you don&#39;t say what the errors actually are, or which line of code is reporting the errors. In any case, your <code>gethostbyname()</code> code was broken to begin with. You were not checking the <code>hostinfo-&gt;h_addrtype</code> field to make sure the IP address(es) (yes, plural) are the same type you are expecting, and you were not looping though the entire list. <code>gethostbyname()</code> could return <i>either</i> IPv4 or IPv6 addresses, and you have no control over which type is reports. <code>getaddrinfo()</code> provides that control, so yes, do use it."}, {"owner": {"reputation": 506, "user_id": 4422622, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/22e49797837acd40aa1be0811ce8d7f7?s=128&d=identicon&r=PG&f=1", "display_name": "3rdeye7", "link": "https://stackoverflow.com/users/4422622/3rdeye7"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1468469321, "post_id": 38360309, "comment_id": 64142520, "body": "@RemyLebeau when i use getaddrinfo() and loop through the list and connect using the connect function in socket.h(networking lib). The connect function is returning -1 which means it did not connect. To clarify, I am trying to do the same as socketsender.cpp for ipv6 but it is not connecting."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1468470426, "post_id": 38360309, "comment_id": 64142801, "body": "Did you try checking <code>errno</code> yet? It will tell you why <code>connect()</code> fails. Did you try logging the IP addresses that <code>getaddrinfo()</code> reports? Is your device connected to a network that can reach those IP addresses?"}, {"owner": {"reputation": 28466, "user_id": 102008, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/eeae0562ab53da4f56ed31d1d5650bde?s=128&d=identicon&r=PG", "display_name": "user102008", "link": "https://stackoverflow.com/users/102008/user102008"}, "edited": false, "score": 1, "creation_date": 1468519954, "post_id": 38360309, "comment_id": 64172511, "body": "@3rdeye7: If you are having trouble connecting using the addresses returned by <code>getaddrinfo</code>, and you are passing an IPv4 literal and an numeric port to <code>getaddrinfo</code>, you might be running into <a href=\"https://forums.developer.apple.com/thread/47312\" rel=\"nofollow noreferrer\">this bug</a>, where it returns structures with 0 ports; you have to manually set the ports to the right number after you get the structures, to work around this bug."}, {"owner": {"reputation": 506, "user_id": 4422622, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/22e49797837acd40aa1be0811ce8d7f7?s=128&d=identicon&r=PG&f=1", "display_name": "3rdeye7", "link": "https://stackoverflow.com/users/4422622/3rdeye7"}, "reply_to_user": {"reputation": 28466, "user_id": 102008, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/eeae0562ab53da4f56ed31d1d5650bde?s=128&d=identicon&r=PG", "display_name": "user102008", "link": "https://stackoverflow.com/users/102008/user102008"}, "edited": false, "score": 0, "creation_date": 1468615197, "post_id": 38360309, "comment_id": 64217894, "body": "@user102008 Thanks alot  this was exactly it, finally got it to work. Cant believe i didn&#39;t come across that on the developers forum. I added an answer for reference to anyone experience the same/similar issues."}], "answers": [{"comments": [{"owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "edited": false, "score": 0, "creation_date": 1469140263, "post_id": 38404599, "comment_id": 64427659, "body": "Many mobile networks are IPv6 only. All of the rest of them are dual stack. All networks perform some NAT translation, sometimes more than once, in order to make IPv4 traffic work. You will see reduced latency and better performance if you support IPv6 at both ends of your connection."}], "tags": [], "owner": {"reputation": 506, "user_id": 4422622, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/22e49797837acd40aa1be0811ce8d7f7?s=128&d=identicon&r=PG&f=1", "display_name": "3rdeye7", "link": "https://stackoverflow.com/users/4422622/3rdeye7"}, "is_accepted": true, "score": 3, "last_activity_date": 1468626496, "last_edit_date": 1468626496, "creation_date": 1468614735, "answer_id": 38404599, "question_id": 38360309, "link": "https://stackoverflow.com/questions/38360309/ios-sockets-ipv6-support/38404599#38404599", "title": "iOS sockets IPv6 Support", "body": "<p>So after two weeks of testing out different approaches and familiarizing myself with networking (POSIX) I finally got this to work mainly due to @user102008 suggestion. </p>\n\n<p><strong>This is relevant to Client-Server applications</strong>.My application is a client application that connects to a IPv4 server/system at a remote location. We have yet to support IPv6 for our products which include clients(iOS,android,windows,unix) and servers (windows &amp; unix), but will support upon future releases. The reason for this support was solely due to Apple changing their apple review process environment.</p>\n\n<p><strong>Approach, Tips and Issues</strong></p>\n\n<ol>\n<li>Apple has provided a way to test IPv6 compatibility with your app. This is sharing your connection from your Ethernet using NAT64/DNS64. This failed many times for me. After researching and resetting my SMC, I came across <a href=\"https://support.apple.com/en-us/HT203819\" rel=\"nofollow\">this article</a> and realized i may have been messing with the configuration too much. So I reset my SMC, restarted and created the internet sharing host. Always remember to turn off WiFi before making any changes to internet sharing.  </li>\n<li>Users were required to connect to the server with a IPv4 IP address. The Application ran perfectly on an IPv4 networking but failed in an IPv6 network. This was due to the app not resolving the IP address literal. The networking library my application uses was a cpp library that was included as a preprocess macro. One of the biggest annoyance was trying to debug, because you cant debug compile time code. So what I did was move over my cpp files with their headers to the project (luckily it was only 3 files).</li>\n<li><p><strong>IMPORTANT TO AYONE PASSING PORT NUMBERS.</strong> This is tied to #2 and resolving the IPv4 literal. I used apples exact implementation on the networking overview (listing 10-1). Every time i tested, the connect function was returning -1, meaning it did not connect. Thanks to @user102008 providing me with <a href=\"https://forums.developer.apple.com/thread/47312\" rel=\"nofollow\">this article</a>, I realized apple implementation of getaddrinfo was broken when trying to pass a string literal for the port. Yes, they ask for a constant char, even when trying c_str() it would still return port number of 0. For this reason, an apple developer who Ive noticed answer and addresses countless networking problems provided a work around. This fixed my issue of the port continuously returning 0, code is posted below as well. What i did, was simply add this into my networking class (SocketSender.cpp) and instead of calling getaddrinfo in Connect, i called get getaddrinfo_compat. This allowed me to connect perfectly in IPv4 and IPv6 networks.</p>\n\n<pre><code>static int getaddrinfo_compat(  \nconst char * hostname,  \nconst char * servname,  \nconst struct addrinfo * hints,  \nstruct addrinfo ** res  \n) {  \n   int    err;  \n   int    numericPort;  \n\n    // If we're given a service name and it's a numeric string, set `numericPort` to that,  \n   // otherwise it ends up as 0.  \n\n   numericPort = servname != NULL ? atoi(servname) : 0;  \n\n   // Call `getaddrinfo` with our input parameters.  \n\n   err = getaddrinfo(hostname, servname, hints, res);  \n\n  // Post-process the results of `getaddrinfo` to work around   &lt;rdar://problem/26365575&gt;.  \n\nif ( (err == 0) &amp;&amp; (numericPort != 0) ) {  \nfor (const struct addrinfo * addr = *res; addr != NULL; addr = addr-&gt;ai_next) {  \n    in_port_t *    portPtr;  \n\n    switch (addr-&gt;ai_family) {  \n        case AF_INET: {  \n            portPtr = &amp;((struct sockaddr_in *) addr-&gt;ai_addr)-&gt;sin_port;  \n        } break;  \n        case AF_INET6: {  \n            portPtr = &amp;((struct sockaddr_in6 *) addr-&gt;ai_addr)-&gt;sin6_port;  \n        } break;  \n        default: {  \n            portPtr = NULL;  \n        } break;  \n    }  \n    if ( (portPtr != NULL) &amp;&amp; (*portPtr == 0) ) {  \n        *portPtr = htons(numericPort);  \n    }  \n}  \n}  \nreturn err;  \n} \n</code></pre></li>\n<li><p>I actually save IP (address.sin_addr.s_addr) in a long data type that is a private variable, m_nIP. problem was i didnt need the IPv6 as our entire product groups use IPv4. Solved this using the code is below. </p>\n\n<pre><code>const uint8_t *bytes = ((const struct sockaddr_in6 *)addrPtr)-&gt;sin6_addr.s6_addr;\nbytes += 12;\nstruct in_addr addr = { *(const in_addr_t *)bytes };\nm_nIP = ntohl(addr.s_addr);\n</code></pre></li>\n<li><p><strong>RELEVANT GUIDES</strong> <a href=\"http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html\" rel=\"nofollow\">Beej's Guide to Network Programming</a>, <a href=\"https://www.akkadia.org/drepper/userapi-ipv6.html\" rel=\"nofollow\">UserLevel IPv6 Intro</a>, <a href=\"http://long.ccaba.upc.edu/long/045Guidelines/eva/ipv6.html\" rel=\"nofollow\">Porting Applications to IPv6</a> </p></li>\n</ol>\n"}], "owner": {"reputation": 506, "user_id": 4422622, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/22e49797837acd40aa1be0811ce8d7f7?s=128&d=identicon&r=PG&f=1", "display_name": "3rdeye7", "link": "https://stackoverflow.com/users/4422622/3rdeye7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1882, "favorite_count": 1, "accepted_answer_id": 38404599, "answer_count": 1, "score": 0, "last_activity_date": 1468626496, "creation_date": 1468438722, "last_edit_date": 1468468949, "question_id": 38360309, "link": "https://stackoverflow.com/questions/38360309/ios-sockets-ipv6-support", "title": "iOS sockets IPv6 Support", "body": "<p>I am getting an error when I try to connect to my ipv4 server. Currently the ios app users are required to enter their sever's an IP address, port, and account information. </p>\n\n<p>The ios app then calls Connect on the SocketSender class (included in the header search path) which in turns calls the connect function of Socket.h and then checks the results.</p>\n\n<p>Connect - SocketSender.cpp </p>\n\n<pre><code>bool SocketSender::Connect (const char *host, int port, CApiError &amp;err)\n{\n\nerrno = 0;\nstruct hostent *hostinfo;\n\nhostinfo = gethostbyname (host);\n\nif (!hostinfo) {\n#ifdef PLATFORM_WIN32\n m_nLastErrorNo = SOCKET_ERRNO();\n err.SetSystemError(m_nLastErrorNo);\n#else\n/* Linux stores the gethostbyname error in h_errno.  */\nm_nLastErrorNo = EINVAL; // h_errno value is incompatible with the \"normal\" error codes\nerr.SetError(FIX_SN(h_errno, hstrerror(h_errno)), CATEGORY_SYSTEM | ERR_TYPE_ERROR);\n#endif\nreturn false;\n}\n\nsocket_fd = socket (AF_INET, SOCK_STREAM, 0);\n\n if (socket_fd == -1) {\n  m_nLastErrorNo = SOCKET_ERRNO();\n  err.SetSystemError(m_nLastErrorNo);\n  return false;\n }\n\n struct sockaddr_in address;\n\n address.sin_family = AF_INET;\n address.sin_port = htons (port);\n address.sin_addr = *(struct in_addr *) *hostinfo-&gt;h_addr_list;\n\n int result;\n\n SetSocketOptions();\n\n result = connect (socket_fd, (struct sockaddr *) &amp;address, sizeof (address));\n\n if (result == -1) {\n if (IS_IN_PROGRESS()) {\n  fd_set f1,f2,f3;\n  struct timeval tv;\n\n  /* configure the sets  */\n  FD_ZERO(&amp;f1);\n  FD_ZERO(&amp;f2);\n  FD_ZERO(&amp;f3);\n  FD_SET(socket_fd, &amp;f2);\n  FD_SET(socket_fd, &amp;f3);\n\n  /* we will have a timeout period */\n  tv.tv_sec  = 5;\n  tv.tv_usec = 0;\n\n  int selrez = select(socket_fd + 1,&amp;f1,&amp;f2,&amp;f3,&amp;tv);\n\n  if (selrez == -1) { // socket error\n    m_nLastErrorNo = SOCKET_ERRNO();\n    Disconnect(true);\n    err.SetSystemError(m_nLastErrorNo);\n    return false;\n  }\n\n  if (FD_ISSET(socket_fd, &amp;f3)) { // failed to connect ..\n    int sockerr = 0;\n#ifdef PLATFORM_WIN32\n    int sockerr_len = sizeof(sockerr);\n#else\n    socklen_t sockerr_len = sizeof(sockerr);\n#endif\n    getsockopt(socket_fd, SOL_SOCKET, SO_ERROR, (char *)&amp;sockerr, &amp;sockerr_len);\n    if (sockerr != 0) {\n      m_nLastErrorNo = sockerr;\n    } else {\n#ifdef PLATFORM_WIN32\n      m_nLastErrorNo = ERROR_TIMEOUT;  // windows actually does not specify the error .. is this ok?\n#else\n      m_nLastErrorNo = ETIMEDOUT;\n#endif\n    }\n    Disconnect(true);\n    err.SetSystemError(m_nLastErrorNo);\n    return false;\n  }\n\n  if (!FD_ISSET(socket_fd, &amp;f2)) { // cannot read, so some (unknown) error occured (probably time-out)\n    int sockerr = 0;\n#ifdef PLATFORM_WIN32\n    int sockerr_len = sizeof(sockerr);\n#else\n    socklen_t sockerr_len = sizeof(sockerr);\n#endif\n    getsockopt(socket_fd, SOL_SOCKET, SO_ERROR, (char *)&amp;sockerr, &amp;sockerr_len);\n    if (sockerr != 0) {\n      m_nLastErrorNo = sockerr;\n    } else {\n#ifdef PLATFORM_WIN32\n      m_nLastErrorNo = ERROR_TIMEOUT;  // windows actually does not specify the error .. is this ok?\n#else\n      m_nLastErrorNo = ETIMEDOUT;\n#endif\n    }\n    Disconnect(true);\n    err.SetSystemError(m_nLastErrorNo);\n    return false;\n  }\n#ifndef PLATFORM_WIN32 // FIXME: is the same needed for windows ?\n\n  // unix always marks socket as \"success\", however error code has to be double-checked\n  int error = 0;\n  socklen_t len = sizeof(error);\n  if (getsockopt(socket_fd, SOL_SOCKET, SO_ERROR, &amp;error, &amp;len) &lt; 0) {\n    err.SetSystemError();\n    return false;\n  }\n  if(error != 0) {\n    m_nLastErrorNo = error;\n    Disconnect(true);\n    err.SetSystemError(m_nLastErrorNo);\n    return false;\n  }\n#endif\n} else {\n  m_nLastErrorNo = SOCKET_ERRNO();\n  Disconnect(true);\n  err.SetSystemError(m_nLastErrorNo);\n  return false;\n}\n}\n\nm_nIP = ntohl(address.sin_addr.s_addr);\n\nm_bServerSocket = false;\nreturn true;\n}\n</code></pre>\n\n<p>That is the original version that worked without any problems. When i changed the above to use AF_INET6 and in_addr6->sin6_addr, i kept getting errors and the application failed to connect. I tried using getaddrinfo but this still did not connect.</p>\n\n<pre><code>struct addrinfo hints, *res, *res0;\nint error;\nconst char *cause = NULL;\n\nmemset(&amp;hints, 0, sizeof(hints));\nhints.ai_family = PF_UNSPEC;\nhints.ai_socktype = SOCK_STREAM;\nhints.ai_flags = AI_DEFAULT;\nerror = getaddrinfo(host, \"PORT\", &amp;hints, &amp;res0);\nif (error) {\n    errx(1, \"%s\", gai_strerror(error));\n    /*NOTREACHED*/\n}\nsocket_fd = -1;\nprintf(\"IP addresses for %s:\\n\\n\", host);\nint result;\nvoid *addr;\nchar *ipver;\nfor (res = res0; res!=NULL; res = res-&gt;ai_next) {\n    socket_fd = socket(res-&gt;ai_family, res-&gt;ai_socktype,\n               res-&gt;ai_protocol);\n    if (socket_fd &lt; 0) {\n        cause = \"socket\";\n        continue;\n    }\n\n    if ((result = connect(socket_fd, res-&gt;ai_addr, res-&gt;ai_addrlen)) &lt; 0) {\n        cause = \"connect\";\n        close(socket_fd);\n        socket_fd = -1;\n        continue;\n    }\n    // get the pointer to the address itself,\n    // different fields in IPv4 and IPv6:\n    if (res-&gt;ai_family == AF_INET) { // IPv4\n        struct sockaddr_in *ipv4 = (struct sockaddr_in *)res-&gt;ai_addr;\n        addr = &amp;(ipv4-&gt;sin_addr);\n        ipver = \"IPv4\";\n    } else { // IPv6\n        struct sockaddr_in6 *ipv6 = (struct sockaddr_in6 *)res-&gt;ai_addr;\n        addr = &amp;(ipv6-&gt;sin6_addr);\n        ipver = \"IPv6\";\n    }\n    SetSocketOptions();\n    break;  /* okay we got one */\n}\n</code></pre>\n\n<p>I need to make it backwards compatible with ipv6 and ipv4. Any help would be much appreciated as i have been stuck testing this for the past week. Also if anyone knows how to debug the SocketSender.cpp on XCode that would be alot of help. </p>\n"}, {"tags": ["c++", "linux", "qt"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1468438204, "post_id": 38360089, "comment_id": 64132772, "body": "See <a href=\"http://stackoverflow.com/q/22803469/1329652\">this question</a> or <a href=\"http://stackoverflow.com/q/23146915/1329652\">that question</a>. The <code>uevent</code> interface is what you need, I&#39;d think."}, {"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 1, "creation_date": 1468438282, "post_id": 38360089, "comment_id": 64132822, "body": "<code>QFileSystemWatcher</code> relies on inotify on Linux, which <a href=\"http://comments.gmane.org/gmane.linux.file-systems/83641\" rel=\"nofollow noreferrer\">is not supported for <code>sysfs</code> and <code>procfs</code></a>. You&#39;d need to <code>select</code> or <code>poll</code> on the appropriate files to get the behaviour you want."}, {"owner": {"reputation": 444, "user_id": 5007100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pg6In.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/5007100/adam"}, "edited": false, "score": 0, "creation_date": 1468438550, "post_id": 38360089, "comment_id": 64132944, "body": "You could also take a look at D-Bus, there is a lot of messages in it - maybe it will help you."}, {"owner": {"reputation": 1827, "user_id": 785691, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/COsAp.jpg?s=128&g=1", "display_name": "ramtheconqueror", "link": "https://stackoverflow.com/users/785691/ramtheconqueror"}, "reply_to_user": {"reputation": 444, "user_id": 5007100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pg6In.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/5007100/adam"}, "edited": false, "score": 0, "creation_date": 1468442909, "post_id": 38360089, "comment_id": 64135230, "body": "@Adam Thanks, could you please show some examples? Quick googling didn&#39;t show anything useful."}], "answers": [{"comments": [{"owner": {"reputation": 966, "user_id": 129753, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2ae494caa2dae0a5f67cc5d4594cb54a?s=128&d=identicon&r=PG", "display_name": "Tozar", "link": "https://stackoverflow.com/users/129753/tozar"}, "edited": false, "score": 0, "creation_date": 1517612916, "post_id": 38369689, "comment_id": 84181571, "body": "It seems like signals are not emitted for the battery or line power objects. This got me 90% of the way there, but in the end, you still have to poll on a timer, meaning it is no better than checking the files as the question asker described."}], "tags": [], "owner": {"reputation": 444, "user_id": 5007100, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pg6In.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/5007100/adam"}, "is_accepted": false, "score": 2, "last_activity_date": 1468486404, "creation_date": 1468486404, "answer_id": 38369689, "question_id": 38360089, "link": "https://stackoverflow.com/questions/38360089/monitor-battery-status-on-linux/38369689#38369689", "title": "Monitor battery status on Linux", "body": "<p>You could also take a look at D-Bus as I have said in comment.</p>\n\n<p>Specially you should look at:</p>\n\n<ul>\n<li>signal Changed() - it will notify you when something change [3]</li>\n</ul>\n\n<p>and properties [2]</p>\n\n<ul>\n<li>Energy</li>\n<li>EnergyEmpty</li>\n<li>EnergyFull</li>\n</ul>\n\n<p>QT5 supports D-Bus [4] [5].</p>\n\n<p>Shell command  to test:</p>\n\n<pre><code>dbus-send --print-reply \\\n          --system \\\n          --dest=org.freedesktop.UPower \\\n          /org/freedesktop/UPower/devices/battery_BAT0 \\ # change BAT0 to proper value - you can check it with d-feet [6]\n          org.freedesktop.DBus.Properties.GetAll \\\n          string:org.freedesktop.UPower.Device\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/kdTE5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kdTE5.png\" alt=\"d-feet\"></a></p>\n\n<ol>\n<li><a href=\"https://upower.freedesktop.org/docs/UPower.html\" rel=\"nofollow noreferrer\">https://upower.freedesktop.org/docs/UPower.html</a></li>\n<li><a href=\"https://upower.freedesktop.org/docs/Device.html\" rel=\"nofollow noreferrer\">https://upower.freedesktop.org/docs/Device.html</a></li>\n<li><a href=\"https://upower.freedesktop.org/docs/Device.html#Device::Changed\" rel=\"nofollow noreferrer\">https://upower.freedesktop.org/docs/Device.html#Device::Changed</a></li>\n<li><a href=\"http://doc.qt.io/qt-5/qtdbus-index.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qtdbus-index.html</a></li>\n<li><a href=\"http://doc.qt.io/qt-5/examples-dbus.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/examples-dbus.html</a></li>\n<li><a href=\"https://wiki.gnome.org/action/show/Apps/DFeet?action=show&amp;redirect=DFeet\" rel=\"nofollow noreferrer\">https://wiki.gnome.org/action/show/Apps/DFeet?action=show&amp;redirect=DFeet</a></li>\n</ol>\n"}], "owner": {"reputation": 1827, "user_id": 785691, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/COsAp.jpg?s=128&g=1", "display_name": "ramtheconqueror", "link": "https://stackoverflow.com/users/785691/ramtheconqueror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1676, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1468486404, "creation_date": 1468437839, "question_id": 38360089, "link": "https://stackoverflow.com/questions/38360089/monitor-battery-status-on-linux", "title": "Monitor battery status on Linux", "body": "<p>I'm working on a <code>Qt</code> application and would like to monitor the battery status (charging, percentage etc). There are files like <code>status</code>, <code>uevent</code> in <code>/sys/class/power_supply/battery</code> directory which have all the information I need. These files are getting updated on connecting / disconnecting the charger. I tried using <code>QFileSystemWatcher</code> class which didn't work as those files' timestamps are not changing with their content. Any other way of monitoring the battery status?</p>\n\n<p>I could use a timer / separate thread to do this but would like to explore other options available through the OS (<code>Debian</code> on <code>Arm</code>). </p>\n"}, {"tags": ["c++", "string", "substr"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1468437266, "post_id": 38359862, "comment_id": 64132325, "body": "It makes it easy to say &quot;substring from <code>pos</code> to the end&quot;, which isn&#39;t an uncommon operation. Think of the second argument as a cap on the number of characters in the returned substring."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1468437474, "post_id": 38359862, "comment_id": 64132442, "body": "This question is probably too opinion based. You present an interesting view of a string being like an infinitely sized virtual character buffer from which you can select a slice, even from outside the physical range. I think, though, more subtle errors would go undetected. By throwing a range exception you at least trap some badly calculated position values. Maybe that&#39;s the reason?"}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 1, "creation_date": 1468437613, "post_id": 38359862, "comment_id": 64132523, "body": "I&#39;ve always said it, throwing an exception on contract violation (the pre-condition here) is bad design, even if the exception is part of your contract. What is the caller gonna do, catch the exception and call the function in a loop with <code>pos&#47;=2</code> until it stops throwing? Better to just assert-fail with a useful message (ex: &quot;Sanitize your input!&quot;). But, STL was written many, many years ago, and maybe people didn&#39;t know better back then. Now, we have to live with that behavior."}, {"owner": {"reputation": 811, "user_id": 4614700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d40769c31a4629895c3d93278cc8ef?s=128&d=identicon&r=PG&f=1", "display_name": "tglas", "link": "https://stackoverflow.com/users/4614700/tglas"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1468437734, "post_id": 38359862, "comment_id": 64132572, "body": "@Galik The first (and main) question is indeed opinion-based. The others are not. I see the point of undetected errors, but doesn&#39;t that also apply to the end position? We simply got used to the fact that it can exceed the size, but that&#39;s not particularly safe. I am happy with checking both ends, that&#39;s a consistent alternative."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1468438472, "post_id": 38359862, "comment_id": 64132908, "body": "Where do you get that <code>substr</code> throws is <code>pos &gt; length + 1</code>?  The standard says <i>Throws:</i> <b>out_of_range</b> if <code>pos &gt; size()</code>."}, {"owner": {"reputation": 301, "user_id": 4349614, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rGQvLlUWH3o/AAAAAAAAAAI/AAAAAAAAABE/jIxaQ_wzPUA/photo.jpg?sz=128", "display_name": "Ternvein", "link": "https://stackoverflow.com/users/4349614/ternvein"}, "edited": false, "score": 0, "creation_date": 1468439001, "post_id": 38359862, "comment_id": 64133168, "body": "Why do you think that <code>std::string</code> is <i>not</i> null-terminated in it&#39;s implementation?"}, {"owner": {"reputation": 811, "user_id": 4614700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d40769c31a4629895c3d93278cc8ef?s=128&d=identicon&r=PG&f=1", "display_name": "tglas", "link": "https://stackoverflow.com/users/4614700/tglas"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1468439594, "post_id": 38359862, "comment_id": 64133478, "body": "@NathanOliver Sorry, my formulation was unclear. It throws if <code>pos &gt;= length + 1</code>, which is the same as <code>pos &gt; length</code>. My point is that it throws at all."}, {"owner": {"reputation": 811, "user_id": 4614700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d40769c31a4629895c3d93278cc8ef?s=128&d=identicon&r=PG&f=1", "display_name": "tglas", "link": "https://stackoverflow.com/users/4614700/tglas"}, "reply_to_user": {"reputation": 301, "user_id": 4349614, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rGQvLlUWH3o/AAAAAAAAAAI/AAAAAAAAABE/jIxaQ_wzPUA/photo.jpg?sz=128", "display_name": "Ternvein", "link": "https://stackoverflow.com/users/4349614/ternvein"}, "edited": false, "score": 0, "creation_date": 1468439790, "post_id": 38359862, "comment_id": 64133603, "body": "@Ternvein I know that it is null-terminated in the implementation to make <code>c_str</code> work without copying, but I think that at least in C++03 you cannot rely on that. The real point is that <code>&#39;\\0&#39;</code> is a legal character in a <code>std::string</code> since the length is <i>not</i> determined by null-termination. Therefore I think that an interface that relies on null-termination is unnatural for <code>std::string</code>."}], "answers": [{"comments": [{"owner": {"reputation": 811, "user_id": 4614700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d40769c31a4629895c3d93278cc8ef?s=128&d=identicon&r=PG&f=1", "display_name": "tglas", "link": "https://stackoverflow.com/users/4614700/tglas"}, "edited": false, "score": 0, "creation_date": 1468442109, "post_id": 38360772, "comment_id": 64134856, "body": "Thanks for the answer. I find it debatable whether starting beyond the end is a more basic sanity check than ending beyond the end, but as you say, this simply comes from having gotten used to strncmp and friends (including <code>std::string::substr</code>). My favorite example <code>size_t pos = s.find(&#39; &#39;); string cmd = s.substr(0, pos); string args = s.substr(pos+1)</code> is a reasonable use case where I would prefer an empty string over an exception, without having missed an &quot;elementary&quot; sanity check (no arg is okay). Using the buffer size for <code>len</code> is convenient, here the same would apply to <code>pos</code>."}, {"owner": {"reputation": 301, "user_id": 4349614, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rGQvLlUWH3o/AAAAAAAAAAI/AAAAAAAAABE/jIxaQ_wzPUA/photo.jpg?sz=128", "display_name": "Ternvein", "link": "https://stackoverflow.com/users/4349614/ternvein"}, "reply_to_user": {"reputation": 811, "user_id": 4614700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d40769c31a4629895c3d93278cc8ef?s=128&d=identicon&r=PG&f=1", "display_name": "tglas", "link": "https://stackoverflow.com/users/4614700/tglas"}, "edited": false, "score": 0, "creation_date": 1468443134, "post_id": 38360772, "comment_id": 64135340, "body": "Well, you can always write some class around <code>std::string</code> and make it work like you want it to."}, {"owner": {"reputation": 811, "user_id": 4614700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d40769c31a4629895c3d93278cc8ef?s=128&d=identicon&r=PG&f=1", "display_name": "tglas", "link": "https://stackoverflow.com/users/4614700/tglas"}, "edited": false, "score": 0, "creation_date": 1468443671, "post_id": 38360772, "comment_id": 64135605, "body": "Actually that&#39;s what I do (a simple free function), but it annoys me :)"}], "tags": [], "owner": {"reputation": 301, "user_id": 4349614, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rGQvLlUWH3o/AAAAAAAAAAI/AAAAAAAAABE/jIxaQ_wzPUA/photo.jpg?sz=128", "display_name": "Ternvein", "link": "https://stackoverflow.com/users/4349614/ternvein"}, "is_accepted": true, "score": 3, "last_activity_date": 1468440352, "creation_date": 1468440352, "answer_id": 38360772, "question_id": 38359862, "link": "https://stackoverflow.com/questions/38359862/why-does-stdstringsubstr-throw-an-exception-instead-of-returning-an-empty-st/38360772#38360772", "title": "Why does std::string::substr throw an exception instead of returning an empty string?", "body": "<p>This question really too opinion-based, but I will try to answer it point by point.</p>\n\n<ul>\n<li><em>Does this design appear logical to you? Sensible?</em> It seems logical to me. Maybe such opinion came from <code>strncmp</code>-styled functions, but with such design you can just pass your buffer length for <code>len</code> parameter and it will work fine. But, if you're trying to access substring that is located outside your string boundaries, then you probably missed some simple sanity checks. And internal implementation of <code>std::string</code> doesn't matter.</li>\n<li><em>Is there an advantage in terms of performance?</em> I think that's not the reason.</li>\n<li><em>Am I overlooking an advantage in terms of usability?</em> Maybe, look at point 1.</li>\n<li><em>Is there any way to change the behavior of substr in the future?</em> Throwing exception on <code>pos</code> exceeding <code>size()</code> is defined in standard, so most likely no.</li>\n</ul>\n\n<p>My point is: this exception (though I prefer to never use those) allowes you to take notice of the code that missing some elementary sanity checks, like accessing the buffer outside it's boundaries. The same design is used in <code>at()</code>-like functions and many other.</p>\n"}], "owner": {"reputation": 811, "user_id": 4614700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d40769c31a4629895c3d93278cc8ef?s=128&d=identicon&r=PG&f=1", "display_name": "tglas", "link": "https://stackoverflow.com/users/4614700/tglas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1835, "favorite_count": 1, "closed_date": 1468442626, "accepted_answer_id": 38360772, "answer_count": 1, "score": 6, "last_activity_date": 1468440352, "creation_date": 1468437011, "question_id": 38359862, "link": "https://stackoverflow.com/questions/38359862/why-does-stdstringsubstr-throw-an-exception-instead-of-returning-an-empty-st", "closed_reason": "Opinion-based", "title": "Why does std::string::substr throw an exception instead of returning an empty string?", "body": "<p>I have been wondering about the rationale behind the design of <code>std::string</code>'s <code>substr(pos, len)</code> method for a while now. It still does not make sense to me, so I decided to ask the experts. The function throws a <code>std::out_of_range</code> exception if the <code>pos</code> argument exceeds the string length plus one. This can be inconvenient (even annoying) at times, but my real concern is consistency and the principle of least surprise. It turns out that the \"end\" position <code>pos+len</code> of the substring is allowed to exceed the string length plus one. Disallowing this for the beginning but not for the end feels inconsistent to me. Allowing it for the end to me hints at the interpretation</p>\n\n<p><strong>return all characters at positions <code>pos &lt;= i &lt; pos+len</code></strong></p>\n\n<p>however, then I would expect the function to return an empty string for values of <code>pos</code> exceeding the string length, instead of throwing an exception. As a side note, with this interpretation it would even be sensible to allow for negative values of <code>pos</code> (provided it had a signed type).</p>\n\n<p>This leaves me with the following questions:</p>\n\n<ul>\n<li>Does this design appear logical to you? Sensible? Do you have a satisfactory way to resolve the inconsistency?\nThe only possible explanation I can come up with is compatibility with null-terminated strings. With null termination it does not matter if the specified length exceeds the end, while starting beyond the null character is a memory bug. However, <code>std::string</code> is <em>not</em> null-terminated and instead keeps track of the length of the string. If that's the true reason then personally I'd call that a very bad one.</li>\n<li>Is there an advantage in terms of performance? I would actually be surprised.</li>\n<li>Am I overlooking an advantage in terms of usability? Maybe a standard idiom or use case in conjunction with other functions, like find? Also here my impression is that returning an empty string had the potential to simplify some code.</li>\n<li>Is there any way to change the behavior of <code>substr</code> in the future? I guess no, since silently breaking existing code is must worse than living with this twist...?</li>\n</ul>\n"}, {"tags": ["c++", "windows", "qt", "dll"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1468437296, "post_id": 38359850, "comment_id": 64132345, "body": "Since you never explained, where you copied the DLLs from, I&#39;m going to assume that you have a bitness mismatch, either in those DLLs or one of it&#39;s dependencies."}, {"owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1468437848, "post_id": 38359850, "comment_id": 64132616, "body": "@IInspectable I added some info to the question. thanks for calling it out!"}, {"owner": {"reputation": 3705, "user_id": 2531178, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/93522fe839d5fa749adabca6086303b2?s=128&d=identicon&r=PG", "display_name": "Sebastian Lange", "link": "https://stackoverflow.com/users/2531178/sebastian-lange"}, "edited": false, "score": 3, "creation_date": 1468474292, "post_id": 38359850, "comment_id": 64143940, "body": "Instead of copying all dlls you can find, just place your .exe in an empty folder and open the Qt5.* command line. Then run: <code>windeployqt yourfile.exe</code>. This will copy the required dlls from the Qt distribution"}, {"owner": {"reputation": 5555, "user_id": 2927205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/luWrX.jpg?s=128&g=1", "display_name": "Mailerdaimon", "link": "https://stackoverflow.com/users/2927205/mailerdaimon"}, "edited": false, "score": 1, "creation_date": 1468486133, "post_id": 38359850, "comment_id": 64150112, "body": "Using <code>windeployqt</code> is definitly the way to go here!"}, {"owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "edited": false, "score": 0, "creation_date": 1468517031, "post_id": 38359850, "comment_id": 64170785, "body": "What do you mean by &quot;Qt5* command line&quot;?"}, {"owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "reply_to_user": {"reputation": 3705, "user_id": 2531178, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/93522fe839d5fa749adabca6086303b2?s=128&d=identicon&r=PG", "display_name": "Sebastian Lange", "link": "https://stackoverflow.com/users/2531178/sebastian-lange"}, "edited": false, "score": 0, "creation_date": 1468518208, "post_id": 38359850, "comment_id": 64171488, "body": "@SebastianLange wow.... thats new to me. I didn&#39;t even knew QT had a commad line (never found it on the directory). About <code>windeployqt</code>.... it worked! Thanks friend"}, {"owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "reply_to_user": {"reputation": 3705, "user_id": 2531178, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/93522fe839d5fa749adabca6086303b2?s=128&d=identicon&r=PG", "display_name": "Sebastian Lange", "link": "https://stackoverflow.com/users/2531178/sebastian-lange"}, "edited": false, "score": 0, "creation_date": 1468520829, "post_id": 38359850, "comment_id": 64172986, "body": "@SebastianLange Also... does <code>windeployqt</code> only work for windows? is there another command for MAC or linux?"}, {"owner": {"reputation": 3705, "user_id": 2531178, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/93522fe839d5fa749adabca6086303b2?s=128&d=identicon&r=PG", "display_name": "Sebastian Lange", "link": "https://stackoverflow.com/users/2531178/sebastian-lange"}, "edited": false, "score": 1, "creation_date": 1468560819, "post_id": 38359850, "comment_id": 64186206, "body": "@andseg There is. See your <code>$QTDIR&#47;$QTVERSION&#47;$COMPILER</code> directory. There should be a <code>macdeployqt</code>. I am not sure about linux, since linux by default uses system wide shared libraries not being built into a single package"}], "answers": [{"comments": [{"owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "edited": false, "score": 0, "creation_date": 1468438546, "post_id": 38360162, "comment_id": 64132940, "body": "that is the case. When I copied the folders from <code>C:\\Qt\\5.7\\mingw53_32\\plugins</code>, the <code>platforms</code> folder came along. It worked in my first two attempts (Win7 and WinXP)"}], "tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 5, "last_activity_date": 1468438075, "creation_date": 1468438075, "answer_id": 38360162, "question_id": 38359850, "link": "https://stackoverflow.com/questions/38359850/qt-5-7-0-could-not-find-or-load-the-qt-platform-plugin-windows/38360162#38360162", "title": "(Qt 5.7.0) Could not find or load the qt platform plugin &quot;windows&quot;", "body": "<p>Sounds like your program's directory structure isn't quite correct.  For a Windows Qt5 app, you should have a folder named \"platforms\" in the same directory as your .exe file, and inside that platforms folder should be the file qwindows.dll</p>\n"}, {"tags": [], "owner": {"reputation": 491, "user_id": 6459465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f3caef11221aa2af131a6d9a493ac9?s=128&d=identicon&r=PG", "display_name": "Alexander Saprykin", "link": "https://stackoverflow.com/users/6459465/alexander-saprykin"}, "is_accepted": false, "score": 0, "last_activity_date": 1468483373, "creation_date": 1468483373, "answer_id": 38368682, "question_id": 38359850, "link": "https://stackoverflow.com/questions/38359850/qt-5-7-0-could-not-find-or-load-the-qt-platform-plugin-windows/38368682#38368682", "title": "(Qt 5.7.0) Could not find or load the qt platform plugin &quot;windows&quot;", "body": "<p>You have said that app was compiled with Qt 5.6.1, and you have also copied all .dll files from Qt 5.7.0. But you should use .dll from the same version that was used for app compilation (5.6.1). It seems that it couldn't load plugin due to a version mismatch.</p>\n"}, {"tags": [], "owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "is_accepted": true, "score": 10, "last_activity_date": 1492553673, "last_edit_date": 1492553673, "creation_date": 1468519268, "answer_id": 38381141, "question_id": 38359850, "link": "https://stackoverflow.com/questions/38359850/qt-5-7-0-could-not-find-or-load-the-qt-platform-plugin-windows/38381141#38381141", "title": "(Qt 5.7.0) Could not find or load the qt platform plugin &quot;windows&quot;", "body": "<h2>WHY THE PROBLEM OCCURRED</h2>\n\n<p>Honestly, I don't know. But it very much seems like \"Alexander Saprykin\" answer is correct. During the process of testing, i had to update my Qt so it could fairly well be only a version mismatch.</p>\n\n<p>Also, the fact that when I redid my build using only Qt 5.7.0 it worked, implies that it was indeed only a mismatch case.</p>\n\n<h2>HOW I FIXED IT</h2>\n\n<p>As told by \"Sebastian Lange\" in the comments, using <code>windeplyqt.exe</code> did the job. I just deleted everything but the <code>.exe</code> in my build folder, opened Qt5.7 command line, chaged directory to the same as my <code>.exe</code> and ran the command <code>windeployqt .</code> or <code>windeployqt [name_of_exe].exe</code></p>\n\n<p>Thanks to everyone!</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 1181278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e912ae3dd6457bc550edcbcd359f9493?s=128&d=identicon&r=PG", "display_name": "rsood", "link": "https://stackoverflow.com/users/1181278/rsood"}, "is_accepted": false, "score": 1, "last_activity_date": 1504332854, "creation_date": 1504332854, "answer_id": 46011026, "question_id": 38359850, "link": "https://stackoverflow.com/questions/38359850/qt-5-7-0-could-not-find-or-load-the-qt-platform-plugin-windows/46011026#46011026", "title": "(Qt 5.7.0) Could not find or load the qt platform plugin &quot;windows&quot;", "body": "<p>The answer that says you need a \"platforms\" directory that contains qwindows.dll inside the directory that contains your application is correct.  Importantly, it must be directly inside your application directory, i.e. ./platforms/qwindows.dll, not inside another directory within your application directory, such as ./plugins/platforms/qwindows.dll</p>\n\n<p>This is documented in the Qt 5.7 documentation; in Qt Creator, go to help and look up \"deployment\".  There is also some discussion here about how to change the place your application will look for this and other libraries.</p>\n\n<p>I was having this same problem; I have verified this solution works by putting my app and the DLLs it depends on, as well as a folder named platforms containing qwindows.dll, in a directory on a flash drive and opening the app on a computer that did not have Qt installed.  The app opened fine.</p>\n"}], "owner": {"reputation": 618, "user_id": 6226568, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/fbb661af0d87a6cbdd91e95f67e18552?s=128&d=identicon&r=PG&f=1", "display_name": "andseg", "link": "https://stackoverflow.com/users/6226568/andseg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8347, "favorite_count": 2, "accepted_answer_id": 38381141, "answer_count": 4, "score": 4, "last_activity_date": 1504332854, "creation_date": 1468436980, "last_edit_date": 1468437793, "question_id": 38359850, "link": "https://stackoverflow.com/questions/38359850/qt-5-7-0-could-not-find-or-load-the-qt-platform-plugin-windows", "title": "(Qt 5.7.0) Could not find or load the qt platform plugin &quot;windows&quot;", "body": "<p>Bear in mind that all of this is with <strong>Qt Creator (5.6.1 and 5.7)</strong>:</p>\n\n<p>I have a project made in my work machine (Win7, 64bits, compiled with MinGW 5.3.0 32bits in Qt 5.6.1). It works perfectly both in debug and release mode.</p>\n\n<p>Soon after, I decided to test my program in another machine (WinXp, 32bits). I just passed the executable and the .dll. Still working like a charm.</p>\n\n<p>Later, i tested the SAME version of my program in my gaming machine (Win10, 64bits). Weirdly, it didn't work at all. I received the following error:</p>\n\n<hr>\n\n<p>\"could not find or load the qt platform plugin \"windows\"\".</p>\n\n<hr>\n\n<p>I remembered that if there is a .dll missing, this error occurs. So I passed all the .dll from Qt folder to my program folder (with the intension of deleting the unwanted latter). Much to my surprise, it still didn't work. But the error was diferent:</p>\n\n<hr>\n\n<p>\"could not find or load the qt platform plugin \"windows\"... Available platform plugins are: minimal, offscreen, windows, minimal, offscreen, windows.\"</p>\n\n<hr>\n\n<p>It very clearly found the platform plugin windows (either qwindows or qwindowsd... or both in that matter), but it could not load it. Any ideias why?</p>\n\n<hr>\n\n<p>EDIT: All <strong>.dll</strong> in <code>C:\\Qt\\5.7\\mingw53_32\\bin</code> was copied and pasted to the folder with the executable.</p>\n\n<p>All <strong>folders</strong> in <code>C:\\Qt\\5.7\\mingw53_32\\plugins</code> were copied and pasted to the folder with the executable.</p>\n\n<p>Thats pretty much all the .dll I added!</p>\n"}, {"tags": ["c++", "linker", "cmake", "linker-flags"], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 2259187, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/dyxzh.jpg?s=128&g=1", "display_name": "Valmir", "link": "https://stackoverflow.com/users/2259187/valmir"}, "edited": false, "score": 0, "creation_date": 1468440534, "post_id": 38360088, "comment_id": 64134021, "body": "Thanks for your reply @Florian. This way the the check step works, but when I try to link my application the &quot;--list &lt;TARGET_BASE&gt;.map&quot; still here (ignoring the override of the CMAKE_CXX_LINK_EXECUTABLE variable) ."}, {"owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "reply_to_user": {"reputation": 389, "user_id": 2259187, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/dyxzh.jpg?s=128&g=1", "display_name": "Valmir", "link": "https://stackoverflow.com/users/2259187/valmir"}, "edited": false, "score": 1, "creation_date": 1468441532, "post_id": 38360088, "comment_id": 64134522, "body": "@Valmir The toolchain is loaded before everything else (see <a href=\"http://stackoverflow.com/questions/30503631\">here</a>). If you want to change normal variables after the CMake compiler detection you need another script to be given via <a href=\"https://cmake.org/cmake/help/latest/variable/CMAKE_USER_MAKE_RULES_OVERRIDE.html\" rel=\"nofollow noreferrer\"><code>CMAKE_USER_MAKE_RULES_OVERRIDE</code></a> (see <a href=\"http://stackoverflow.com/questions/28732209\">here</a>). You shouldn&#39;t normally need to move your <code>CMAKE_CXX_LINK_EXECUTABLE</code> settings from your toolchain to such a separate file. I consider those variables being none-cached a bug in the ARMCC support."}, {"owner": {"reputation": 389, "user_id": 2259187, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/dyxzh.jpg?s=128&g=1", "display_name": "Valmir", "link": "https://stackoverflow.com/users/2259187/valmir"}, "edited": false, "score": 0, "creation_date": 1468502508, "post_id": 38360088, "comment_id": 64161140, "body": "Thanks again @Florian. Unfortunately I will keep my change in ARMCC.cmake in order to keep my project working."}], "tags": [], "owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "is_accepted": false, "score": 5, "last_activity_date": 1468526115, "last_edit_date": 1495542722, "creation_date": 1468437836, "answer_id": 38360088, "question_id": 38359796, "link": "https://stackoverflow.com/questions/38359796/cmake-amrcc-custom-linker/38360088#38360088", "title": "CMake AMRCC + custom linker", "body": "<p>That's exactly the use case of a relatively new (<a href=\"https://cmake.org/cmake/help/v3.6/release/3.6.html#id5\" rel=\"nofollow noreferrer\">version 3.6</a>) global CMake variable named <a href=\"https://cmake.org/cmake/help/latest/variable/CMAKE_TRY_COMPILE_TARGET_TYPE.html\" rel=\"nofollow noreferrer\"><code>CMAKE_TRY_COMPILE_TARGET_TYPE</code></a>. So just add the following to your toolchain file:</p>\n\n<pre><code>set(CMAKE_TRY_COMPILE_TARGET_TYPE STATIC_LIBRARY)\n</code></pre>\n\n<hr>\n\n<p><strong>Edit</strong>: If your custom linker also gives you trouble outside the compiler check, simply split your toolchain into 2 files (<code>toolchain.cmake</code> to be read before and <code>makerules.cmake</code> after the CMake's compiler detection):</p>\n\n<p><strong>toolchain.cmake</strong></p>\n\n<pre><code>[...]\nset (CMAKE_USER_MAKE_RULES_OVERRIDE \"${CMAKE_CURRENT_LIST_FILE}/makerules.cmake\")\n</code></pre>\n\n<p><strong>makerules.cmake</strong></p>\n\n<pre><code>set (CMAKE_C_LINK_EXECUTABLE \"&lt;CMAKE_LINKER&gt; &lt;CMAKE_EXE_LINKER_FLAGS&gt; &lt;OBJECTS&gt; &lt;LINK_LIBRARIES&gt; -o &lt;TARGET&gt;\")\nset (CMAKE_CXX_LINK_EXECUTABLE \"&lt;CMAKE_LINKER&gt; &lt;CMAKE_EXE_LINKER_FLAGS&gt; &lt;OBJECTS&gt; &lt;LINK_LIBRARIES&gt; -o &lt;TARGET&gt;\")\n</code></pre>\n\n<hr>\n\n<p><strong>Refrences</strong></p>\n\n<ul>\n<li><a href=\"https://cmake.org/cmake/help/latest/manual/cmake-toolchains.7.html\" rel=\"nofollow noreferrer\"><code>CMAKE_USER_MAKE_RULES_OVERRIDE</code></a></li>\n<li><a href=\"https://stackoverflow.com/questions/28732209/change-default-value-of-cmake-cxx-flags-debug-and-friends-in-cmake\">Change default value of CMAKE_CXX_FLAGS_DEBUG and friends in CMake</a></li>\n<li><a href=\"https://stackoverflow.com/questions/30503631/cmake-in-which-order-are-files-parsed-cache-toolchain\">CMake: In which Order are Files parsed (Cache, Toolchain, \u2026)?</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 389, "user_id": 2259187, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/dyxzh.jpg?s=128&g=1", "display_name": "Valmir", "link": "https://stackoverflow.com/users/2259187/valmir"}, "is_accepted": true, "score": 0, "last_activity_date": 1472154552, "creation_date": 1472154552, "answer_id": 39153626, "question_id": 38359796, "link": "https://stackoverflow.com/questions/38359796/cmake-amrcc-custom-linker/39153626#39153626", "title": "CMake AMRCC + custom linker", "body": "<p>Apparently this is a bug in the cmake's armcc support, so I will keep my change in the ARMCC.cmake file.</p>\n"}], "owner": {"reputation": 389, "user_id": 2259187, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/dyxzh.jpg?s=128&g=1", "display_name": "Valmir", "link": "https://stackoverflow.com/users/2259187/valmir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1441, "favorite_count": 1, "accepted_answer_id": 39153626, "answer_count": 2, "score": 4, "last_activity_date": 1472154552, "creation_date": 1468436781, "last_edit_date": 1468502838, "question_id": 38359796, "link": "https://stackoverflow.com/questions/38359796/cmake-amrcc-custom-linker", "title": "CMake AMRCC + custom linker", "body": "<p>I'm trying to use <code>cmake</code> in a project which is compiled using <code>armcc</code>, but use a custom proprietary linker (not <code>armlink</code>).<br/><br/></p>\n\n<p>I've changed the variables in the <code>toolchain.cmake</code> file as following:</p>\n\n<pre><code>unset (CMAKE_LINKER CACHE)\nset (CMAKE_LINKER \"my_linker\" CACHE STRING \"\" FORCE)\n\nunset (CMAKE_ARMCC_LINKER CACHE)\nset (CMAKE_ARMCC_LINKER \"my_linker\" CACHE STRING \"\" FORCE)\n\nunset (CMAKE_EXE_LINKER_FLAGS CACHE )\nset (CMAKE_EXE_LINKER_FLAGS \"-flag1 -flag2\" CACHE STRING \"\" FORCE)\n\nunset (CMAKE_C_LINK_EXECUTABLE)\nset (CMAKE_C_LINK_EXECUTABLE \"&lt;CMAKE_LINKER&gt; &lt;CMAKE_EXE_LINKER_FLAGS&gt; &lt;OBJECTS&gt; &lt;LINK_LIBRARIES&gt; -o &lt;TARGET&gt;\")\n\nunset (CMAKE_CXX_LINK_EXECUTABLE)\nset (CMAKE_CXX_LINK_EXECUTABLE \"&lt;CMAKE_LINKER&gt; &lt;CMAKE_EXE_LINKER_FLAGS&gt; &lt;OBJECTS&gt; &lt;LINK_LIBRARIES&gt; -o &lt;TARGET&gt;\")\n</code></pre>\n\n<p>But when <code>cmake</code> tries to check my compiler suite, it fails in the linking step:</p>\n\n<pre><code>-- Check for working C compiler: armcc.exe -- broken\nCMake Error at C:/Program Files (x86)/CMake/share/cmake-3.6/Modules/CMakeTestCCompiler.cmake:61 (message):\n  The C compiler \"armcc.exe\" is not able to compile a simple test program.\n\n... (compiling commands that worked hidden here)\n\nLinking C executable cmTC_c08ef.elf\n\n\"C:\\Program Files (x86)\\CMake\\bin\\cmake.exe\" -E cmake_link_script CMakeFiles\\cmTC_c08ef.dir\\link.txt --verbose=1\n\nmy_linker -flag1 -flag2 CMakeFiles/cmTC_c08ef.dir/testCCompiler.o -o cmTC_c08ef.elf --list cmTC_c08ef.map\n</code></pre>\n\n<p>The problem is the <code>--list cmTC_c08ef.map</code> at the end of command line (which does not exist in the <code>toolchain.cmake</code> file).</p>\n\n<p>In order to make it work, I need to change the file <code>&lt;cmake_install_dir&gt;\\Modules\\Compiler\\ARMCC.cmake</code> as following:</p>\n\n<pre><code>  set(CMAKE_${lang}_LINK_EXECUTABLE      \"&lt;CMAKE_LINKER&gt; &lt;CMAKE_${lang}_LINK_FLAGS&gt; &lt;LINK_FLAGS&gt; &lt;LINK_LIBRARIES&gt; &lt;OBJECTS&gt; -o &lt;TARGET&gt; --list &lt;TARGET_BASE&gt;.map\")\n#  set(CMAKE_${lang}_LINK_EXECUTABLE      \"&lt;CMAKE_LINKER&gt; &lt;CMAKE_${lang}_LINK_FLAGS&gt; &lt;LINK_FLAGS&gt; &lt;LINK_LIBRARIES&gt; &lt;OBJECTS&gt; -o &lt;TARGET&gt;\")\n</code></pre>\n\n<p>There is a better approach to solve this issue or it is the only way?</p>\n\n<p>Edit: Apparently this is a bug in the cmake's armcc support, so I will keep my change in the ARMCC.cmake file.</p>\n"}, {"tags": ["c++", "qt", "debugging", "qt-creator", "windbg"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1468451655, "post_id": 38359643, "comment_id": 64138670, "body": "The other question was for mingw32+gdb, the suggestions there sure won&#39;t work for cdb."}, {"owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1468483469, "post_id": 38359643, "comment_id": 64148441, "body": "Yes, I know, I just wanted to make it clear that this is not a duplicate."}, {"owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1468511878, "post_id": 38359643, "comment_id": 64167904, "body": "I&#39;ve created <a href=\"https://bugreports.qt.io/browse/QTCREATORBUG-16603\" rel=\"nofollow noreferrer\">bugreports.qt.io/browse/QTCREATORBUG-16603</a>."}], "answers": [{"tags": [], "owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "is_accepted": true, "score": 1, "last_activity_date": 1468566408, "creation_date": 1468566408, "answer_id": 38389870, "question_id": 38359643, "link": "https://stackoverflow.com/questions/38359643/breaking-on-assertions-with-cdb-in-qt-creator/38389870#38389870", "title": "Breaking on assertions with CDB in Qt Creator", "body": "<p>As discovered in the <a href=\"https://bugreports.qt.io/browse/QTBUG-54779\" rel=\"nofollow\">bug report</a>, this is due to testlib's <a href=\"http://%20http://code.qt.io/cgit/qt/qtbase.git/tree/src/testlib/qtestcase.cpp#n1679\" rel=\"nofollow\">use</a> of a <a href=\"http://code.qt.io/cgit/qt/qtbase.git/tree/src/testlib/qtestcase.cpp#n1545\" rel=\"nofollow\">crash handler</a> that disables the error dialog that usually occurs with assertions. Passing the following application argument to the auto test solves the issue:</p>\n\n<pre><code>-nocrashhandler\n</code></pre>\n\n<p><a href=\"https://codereview.qt-project.org/#/c/165241/\" rel=\"nofollow\">This</a> change improves the documentation for this feature.</p>\n"}], "owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 0, "accepted_answer_id": 38389870, "answer_count": 1, "score": 1, "last_activity_date": 1473714089, "creation_date": 1468436207, "last_edit_date": 1495540304, "question_id": 38359643, "link": "https://stackoverflow.com/questions/38359643/breaking-on-assertions-with-cdb-in-qt-creator", "title": "Breaking on assertions with CDB in Qt Creator", "body": "<p>Every now and then I get an assertion in <a href=\"http://code.qt.io/cgit/qt/qtbase.git/tree/src/corelib/tools/qvector.h#n429\" rel=\"nofollow noreferrer\"><code>QVector::operator</code>[]</a>. I'm unable to break on this assertion.</p>\n\n<p>I've tried all of the suggestions in <a href=\"https://stackoverflow.com/questions/2108000/debugging-asserts-in-qt-creator\">this</a> answer, and they either don't work, or are not what I'm after:</p>\n\n<blockquote>\n  <p>You can install a handler for the messages/warnings that Qt emits, and do your own processing of them.</p>\n</blockquote>\n\n<p>I would rather not have to do this each time it happens.</p>\n\n<blockquote>\n  <p>in qt Creator go to Tools -> Options -> Debugger -> GDB and select \"Stop when a qFatal is issued\"</p>\n</blockquote>\n\n<p>This option doesn't exist for CDB.</p>\n\n<blockquote>\n  <p>I have coded a BreakInDebugger function by hand and an assert macro that calls the function.</p>\n</blockquote>\n\n<p>I don't want to have to touch Qt code. Besides, I could also just edit <code>qvector.h</code> and add a line that I can actually break on:</p>\n\n<pre><code>if (i &gt;= 0 &amp;&amp; i &lt; d-&gt;size)\n    qDebug() &lt;&lt; \"oops\";\n</code></pre>\n\n<p>Is this possible using only Creator?</p>\n\n<hr>\n\n<p>Update: It seems to be related to where the assertion is triggered from. An example like this works:</p>\n\n<pre><code>#include &lt;QGuiApplication&gt;\n#include &lt;QtQuick&gt;\n\nint main(int argc, char *argv[])\n{\n    QGuiApplication app(argc, argv);\n\n    QVector&lt;int&gt; i;\n    i[0] = 0;\n\n    QQmlApplicationEngine engine;\n    engine.load(QUrl(QStringLiteral(\"qrc:/main.qml\")));\n\n    return app.exec();\n}\n</code></pre>\n\n<p>That is, I get the typical error dialog with options to debug the assertion:</p>\n\n<pre><code>---------------------------\nMicrosoft Visual C++ Runtime Library\n---------------------------\nDebug Error!\n\nProgram: C:\\dev\\qt5-dev-debug\\qtbase\\lib\\Qt5Cored.dll\nModule: 5.8.0\nFile: C:\\dev\\qt5-dev\\qtbase\\src\\corelib\\global\\qglobal.cpp\nLine: 3045\n\nASSERT failure in QVector&lt;T&gt;::operator[]: \"index out of range\", file c:\\dev\\qt5-dev-debug\\qtbase\\include\\qtcore\\../../../../qt5-dev/qtbase/src/corelib/tools/qvector.h, line 433\n\n(Press Retry to debug the application)\n\n---------------------------\nAbort   Retry   Ignore   \n---------------------------\n</code></pre>\n\n<p>However, with a unit test project, I don't get any dialog:</p>\n\n<pre><code>#include &lt;QString&gt;\n#include &lt;QtTest&gt;\n\nclass Untitled3Test : public QObject\n{\n    Q_OBJECT\n\npublic:\n    Untitled3Test();\n\nprivate Q_SLOTS:\n    void testCase1();\n};\n\nUntitled3Test::Untitled3Test()\n{\n}\n\nvoid Untitled3Test::testCase1()\n{\n    QVector&lt;int&gt; i;\n    i[0] = 0;\n}\n\nQTEST_APPLESS_MAIN(Untitled3Test)\n\n#include \"tst_untitled3test.moc\"\n</code></pre>\n"}, {"tags": ["c++", "pointers", "struct", "segmentation-fault"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1468436282, "post_id": 38359634, "comment_id": 64131825, "body": "Doesn&#39;t even compile."}, {"owner": {"reputation": 56, "user_id": 6538420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83dda28ee33a3aeec6055d5e981f410?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Crowe", "link": "https://stackoverflow.com/users/6538420/christopher-crowe"}, "edited": false, "score": 1, "creation_date": 1468436356, "post_id": 38359634, "comment_id": 64131870, "body": "You are returning the address of new_obj which ceases to exist after the call to Insert()"}, {"owner": {"reputation": 13, "user_id": 6586075, "user_type": "registered", "profile_image": "https://graph.facebook.com/1324439157586217/picture?type=large", "display_name": "Jay Parekh", "link": "https://stackoverflow.com/users/6586075/jay-parekh"}, "edited": false, "score": 0, "creation_date": 1468436995, "post_id": 38359634, "comment_id": 64132195, "body": "Thanks. But how do I return the new address? Because creating a new object seems the only way if the list is empty."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1468437165, "post_id": 38359634, "comment_id": 64132275, "body": "C and C++ are different languages, and the possible solutions to your problem depend on which you are using.  Apparently that is C++.  Edit your tags."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6586075, "user_type": "registered", "profile_image": "https://graph.facebook.com/1324439157586217/picture?type=large", "display_name": "Jay Parekh", "link": "https://stackoverflow.com/users/6586075/jay-parekh"}, "edited": false, "score": 0, "creation_date": 1468436626, "post_id": 38359683, "comment_id": 64131998, "body": "That was so dumb of me. I completely overlooked that part. Thanks a lot. But, if I want to return the address of the new node created, how can I do that? Also, this is just half the program just for the empty list case."}, {"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 1, "creation_date": 1468437559, "post_id": 38359683, "comment_id": 64132487, "body": "@JayParkeh, in that case be so kind to do the following: (1) accept the answer. (2) edit your question&#39;s code so it can compile. Thanks"}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "reply_to_user": {"reputation": 13, "user_id": 6586075, "user_type": "registered", "profile_image": "https://graph.facebook.com/1324439157586217/picture?type=large", "display_name": "Jay Parekh", "link": "https://stackoverflow.com/users/6586075/jay-parekh"}, "edited": false, "score": 0, "creation_date": 1468438215, "post_id": 38359683, "comment_id": 64132781, "body": "@JayParekh Glad to help!  Answer edited per your comment.  If this answer solved your problem, would you please hit the checkmark to accept it, as user3078414 noted?  See the <a href=\"https://stackoverflow.com/tour\">tour</a> for more about the flow here.  When you accept, the question will be removed from the &quot;unanswered&quot; lists, and we will both get reputation points :)"}, {"owner": {"reputation": 13, "user_id": 6586075, "user_type": "registered", "profile_image": "https://graph.facebook.com/1324439157586217/picture?type=large", "display_name": "Jay Parekh", "link": "https://stackoverflow.com/users/6586075/jay-parekh"}, "edited": false, "score": 0, "creation_date": 1468439602, "post_id": 38359683, "comment_id": 64133484, "body": "Hi! Accepted your answer. So about the segfault, instead of creating a new object, I did an malloc for temp and returned it. It worked. And thanks for the help about the loop but like I said, it was just a part of the entire program. Sorry this was my first day at SE and I&#39;ll definitely see the tour. Thanks again."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "reply_to_user": {"reputation": 13, "user_id": 6586075, "user_type": "registered", "profile_image": "https://graph.facebook.com/1324439157586217/picture?type=large", "display_name": "Jay Parekh", "link": "https://stackoverflow.com/users/6586075/jay-parekh"}, "edited": false, "score": 0, "creation_date": 1468439833, "post_id": 38359683, "comment_id": 64133638, "body": "@JayParekh <code>malloc</code> will work.  However, since you are working in C++, please allow me to <b>strongly</b> recommend switching to <code>new</code> and <code>delete</code> instead of <code>malloc</code> and <code>free</code>.  Using <code>new</code>/<code>delete</code> means you don&#39;t have to typecast and the compiler can find more bugs for you.  Plus, you can&#39;t <code>malloc</code> a class,[1] so learning <code>new</code>/<code>delete</code> now will pave the way for when you start using object-oriented programming.          [Note 1] yes, C++ experts, I am ignoring placement <code>new</code> for purposes of this comment. Wouldn&#39;t you in my place? ;)"}], "tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": true, "score": 3, "last_activity_date": 1468438139, "last_edit_date": 1468438139, "creation_date": 1468436332, "answer_id": 38359683, "question_id": 38359634, "link": "https://stackoverflow.com/questions/38359634/segmentation-fault-while-returning-a-pointer/38359683#38359683", "title": "Segmentation fault while returning a pointer", "body": "<p><code>Node new_obj</code> makes an object on the stack, not the heap.  That object ceases to exist when <code>Insert</code> exits.  You want <code>temp = new Node;</code> rather than <code>temp=&amp;new_obj;</code>.</p>\n\n<p><strong>Edit</strong> Also, if the list is nonempty, your <code>while</code> loop will leave <code>temp</code> pointing to the non-NULL last node of the list.  Therefore, you won't actually allocate a new node because the <code>if(temp==NULL)</code> check will fail!</p>\n\n<p><strong>Edit 2</strong> The <code>return temp;</code> is fine just the way it is.  To fix the segfault, only the creation of the new node needs to change.  For the <code>while</code> bug, there are lots of ways to fix it.  One option is to look up information about \"header nodes\" for lists.  Another is to test for <code>head==NULL</code> first and handle that separately.</p>\n"}], "owner": {"reputation": 13, "user_id": 6586075, "user_type": "registered", "profile_image": "https://graph.facebook.com/1324439157586217/picture?type=large", "display_name": "Jay Parekh", "link": "https://stackoverflow.com/users/6586075/jay-parekh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "closed_date": 1468442394, "accepted_answer_id": 38359683, "answer_count": 1, "score": 0, "last_activity_date": 1468438476, "creation_date": 1468436176, "last_edit_date": 1468438476, "question_id": 38359634, "link": "https://stackoverflow.com/questions/38359634/segmentation-fault-while-returning-a-pointer", "closed_reason": "Not suitable for this site", "title": "Segmentation fault while returning a pointer", "body": "<p>So this is code for inserting a new element into a linked list. It takes the address of the first node and the integer data to be inserted. But I'm getting Segfault when I return the address of the first node back. I've read other similar questions but there the OP was returning a pointer to a local variable. Here, I'm actually returning a local pointer.</p>\n\n<pre><code> struct Node\n {\n    int data;\n    struct Node *next;\n }\n Node* Insert(Node *head,int data)\n {   \n    Node* temp=head;\n    Node* return_value=temp;\n    cout&lt;&lt;head&lt;&lt;\"  \";\n    while(temp!=NULL &amp;&amp; temp-&gt;next!=NULL)\n    {\n        temp=temp-&gt;next;\n    }\n    Node new_obj;\n    if(temp==NULL)\n    {\n        temp=&amp;new_obj;\n        temp-&gt;data=data;\n        cout&lt;&lt;temp&lt;&lt;\" \"&lt;&lt;temp-&gt;data&lt;&lt;\" \";\n        return(temp);\n    }\n</code></pre>\n"}, {"tags": ["c++", "matrix", "allocation", "adjacency-matrix"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1468436328, "post_id": 38359625, "comment_id": 64131851, "body": "Have you tried measuring it? Run the whole allocate/deallocate a few thousand times in a loop, and measure how long it takes, as well as measure the average. Then check if that time will be noticeable when done a couple of time a minute. My guess is that it won&#39;t be big enough to worry about, the processing you do will be the part where you need to think about possible optimizations <i>after</i> you measure and profile. Don&#39;t do premature optimization."}, {"owner": {"reputation": 143, "user_id": 4116114, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf207e8ec838131604c5274c8e68fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Bronze", "link": "https://stackoverflow.com/users/4116114/bronze"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1468436652, "post_id": 38359625, "comment_id": 64132010, "body": "I&#39;m definitely going to measure this. In fact I submitted this question mostly to get opinions from people smarter than I am. As far as I can tell I may not be able to significantly improve the processing done to the data, due to organizational politics and what-not."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1468477522, "post_id": 38359625, "comment_id": 64145250, "body": "Just FYI: Allocating a chunk of memory is O(1). Allocating memory doesn&#39;t process the memory in any way (unless you ask it to with e.g. the old C <code>calloc</code> function) so the allocation itself is very quick. If you dynamically allocate an array of pointers (i.e. <code>int**</code>) then you need a loop to allocate the inner array leading to O(n). The complexity also depends on <i>what</i> you allocate, since you&#39;re programming in C++ if you allocate objects there may be constructors and things that are called. Same with deallocating (but then destructors are called of course)."}], "owner": {"reputation": 143, "user_id": 4116114, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf207e8ec838131604c5274c8e68fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Bronze", "link": "https://stackoverflow.com/users/4116114/bronze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1468436148, "creation_date": 1468436148, "question_id": 38359625, "link": "https://stackoverflow.com/questions/38359625/allocation-time-of-square-matrices", "title": "Allocation time of square matrices", "body": "<p>I'm working on a project in C++ that needs to perform some pathfinding on a medium-sized adjacency matrix. These calculations will happen roughly once or twice a minute, and the typical values for V could be as large as 10,000. </p>\n\n<p>Computation time performance is my main concern, not memory performance.</p>\n\n<p>The graph here will always be symmetric, so I know some space can be saved by only using one triangle of the matrix, but still my question:</p>\n\n<p>How can I know at what point it will become speedier to retain this large array in memory and just zero all cells than to continually allocate, use, and deallocate the array? Are there mitigating factors here that I'm not aware of?</p>\n"}, {"tags": ["c++", "visual-c++", "linker"], "comments": [{"owner": {"reputation": 301, "user_id": 4349614, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rGQvLlUWH3o/AAAAAAAAAAI/AAAAAAAAABE/jIxaQ_wzPUA/photo.jpg?sz=128", "display_name": "Ternvein", "link": "https://stackoverflow.com/users/4349614/ternvein"}, "edited": false, "score": 0, "creation_date": 1468435829, "post_id": 38359469, "comment_id": 64131551, "body": "You marked this function as <code>inline</code>, which means that it should be inserted in the code &quot;as is&quot;, not called normally. Refer this: <a href=\"http://en.cppreference.com/w/cpp/language/inline\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/inline</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1468435835, "post_id": 38359469, "comment_id": 64131554, "body": "Highly related: <a href=\"http://stackoverflow.com/questions/3992980/c-inline-member-function-in-cpp-file\" title=\"c inline member function in cpp file\">stackoverflow.com/questions/3992980/&hellip;</a>"}, {"owner": {"reputation": 109, "user_id": 6421087, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209349210716995/picture?type=large", "display_name": "Ezra Goss", "link": "https://stackoverflow.com/users/6421087/ezra-goss"}, "edited": false, "score": 0, "creation_date": 1468436417, "post_id": 38359469, "comment_id": 64131900, "body": "Right I understand the inline issue, I had tried that before asking and just forgot to remove it before submitting the question but thank you that&#39;s totally my fault for not clarifying"}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 2, "creation_date": 1468436738, "post_id": 38359469, "comment_id": 64132055, "body": "What is the linker error?"}, {"owner": {"reputation": 301, "user_id": 4349614, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rGQvLlUWH3o/AAAAAAAAAAI/AAAAAAAAABE/jIxaQ_wzPUA/photo.jpg?sz=128", "display_name": "Ternvein", "link": "https://stackoverflow.com/users/4349614/ternvein"}, "edited": false, "score": 0, "creation_date": 1468437026, "post_id": 38359469, "comment_id": 64132213, "body": "We need more info, it seems. Code of header file (including class definition) and linker error would be helpful."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1468437346, "post_id": 38359469, "comment_id": 64132366, "body": "Your edit isn&#39;t really helpful. Moving targets are hard to answer concisely, neither invalidating existing answers is respectful or useful. If you have a different question ask another one."}, {"owner": {"reputation": 109, "user_id": 6421087, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209349210716995/picture?type=large", "display_name": "Ezra Goss", "link": "https://stackoverflow.com/users/6421087/ezra-goss"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1468437451, "post_id": 38359469, "comment_id": 64132432, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I respect that, but if the info is wrong shouldn&#39;t I edit it to not confuse people as advised by other answerers?"}, {"owner": {"reputation": 109, "user_id": 6421087, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209349210716995/picture?type=large", "display_name": "Ezra Goss", "link": "https://stackoverflow.com/users/6421087/ezra-goss"}, "reply_to_user": {"reputation": 301, "user_id": 4349614, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rGQvLlUWH3o/AAAAAAAAAAI/AAAAAAAAABE/jIxaQ_wzPUA/photo.jpg?sz=128", "display_name": "Ternvein", "link": "https://stackoverflow.com/users/4349614/ternvein"}, "edited": false, "score": 0, "creation_date": 1468437473, "post_id": 38359469, "comment_id": 64132440, "body": "@Ternvein just updated with the full code"}, {"owner": {"reputation": 109, "user_id": 6421087, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209349210716995/picture?type=large", "display_name": "Ezra Goss", "link": "https://stackoverflow.com/users/6421087/ezra-goss"}, "edited": false, "score": 0, "creation_date": 1468437778, "post_id": 38359469, "comment_id": 64132591, "body": "Alright listen guys I&#39;m just trying to find out if I&#39;m missing something and I appreciate those of you that helped but the last couple times I&#39;ve tried to ask a question and listen to the advice of members I&#39;ve been berated with unhelpful and unnecessary answers. This isn&#39;t really that inviting to someone who is just trying to get the help of the community in getting off the ground. I&#39;ll chalk this up to an inline issue and figure it out by myself if it happens again."}, {"owner": {"reputation": 109, "user_id": 6421087, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209349210716995/picture?type=large", "display_name": "Ezra Goss", "link": "https://stackoverflow.com/users/6421087/ezra-goss"}, "edited": false, "score": 0, "creation_date": 1468437826, "post_id": 38359469, "comment_id": 64132611, "body": "And by unhelpful and unnecessary I just mean rude and condescending, not the questions that pointed out my mistakes, which were valid"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1468438113, "post_id": 38359469, "comment_id": 64132737, "body": "@EzraGoss <i>&quot;but the last couple times I&#39;ve tried to ask a question and listen to the advice of members I&#39;ve been berated with unhelpful and unnecessary answers&quot;</i> It&#39;s not our fault actually, but yours. Learn how to <a href=\"http://stackoverflow.com/help/how-to-ask\">write appropriate questions</a> here, and when asking for compiler or runtime errors <b>always!!</b> provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your code. Thank you for following our guidelines in future."}, {"owner": {"reputation": 109, "user_id": 6421087, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209349210716995/picture?type=large", "display_name": "Ezra Goss", "link": "https://stackoverflow.com/users/6421087/ezra-goss"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1468438216, "post_id": 38359469, "comment_id": 64132783, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I understand that and took your advice from last time to not just dump code, so now I understand the other end of that and will thoroughly check my code beforehand. I&#39;m leaving this as is, and when I come  back for another question I&#39;ll make sure to be more prepared"}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 6421087, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209349210716995/picture?type=large", "display_name": "Ezra Goss", "link": "https://stackoverflow.com/users/6421087/ezra-goss"}, "edited": false, "score": 0, "creation_date": 1468435965, "post_id": 38359556, "comment_id": 64131634, "body": "yeah I considered doing that for the sake of continuing the program, however removing the inline didn&#39;t help the issue and so I&#39;m more concerned with what is causing it"}, {"owner": {"reputation": 109, "user_id": 6421087, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209349210716995/picture?type=large", "display_name": "Ezra Goss", "link": "https://stackoverflow.com/users/6421087/ezra-goss"}, "edited": false, "score": 0, "creation_date": 1468435996, "post_id": 38359556, "comment_id": 64131662, "body": "To be clear I also understand that that would be more efficient, I&#39;m just now curious as to what is going on"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 109, "user_id": 6421087, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209349210716995/picture?type=large", "display_name": "Ezra Goss", "link": "https://stackoverflow.com/users/6421087/ezra-goss"}, "edited": false, "score": 0, "creation_date": 1468436028, "post_id": 38359556, "comment_id": 64131678, "body": "Is the <code>.cpp</code> actually part of the project? If not, we&#39;re again going with the dupe."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1468436099, "post_id": 38359556, "comment_id": 64131725, "body": "Functions defined within a class definition are automatically inlined making this use of <code>inline </code> superfluous."}, {"owner": {"reputation": 109, "user_id": 6421087, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209349210716995/picture?type=large", "display_name": "Ezra Goss", "link": "https://stackoverflow.com/users/6421087/ezra-goss"}, "edited": false, "score": 0, "creation_date": 1468436216, "post_id": 38359556, "comment_id": 64131784, "body": "I&#39;m sorry can you clarify your question @\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6? The .cpp is actually included in the project files if that is what you&#39;re asking"}, {"owner": {"reputation": 301, "user_id": 4349614, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rGQvLlUWH3o/AAAAAAAAAAI/AAAAAAAAABE/jIxaQ_wzPUA/photo.jpg?sz=128", "display_name": "Ternvein", "link": "https://stackoverflow.com/users/4349614/ternvein"}, "edited": false, "score": 0, "creation_date": 1468436821, "post_id": 38359556, "comment_id": 64132101, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 , <code>despite the rest of the functions defined in the class .cpp working fine</code> That&#39;s not the problem, it seems."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 0, "last_activity_date": 1468437221, "last_edit_date": 1468437221, "creation_date": 1468435840, "answer_id": 38359556, "question_id": 38359469, "link": "https://stackoverflow.com/questions/38359469/is-there-something-wrong-with-this-function-being-defined-outside-the-header-fil/38359556#38359556", "title": "Is there something wrong with this function being defined outside the header file? (Visual Studio 2015, C++)", "body": "<p>If you provide <code>inline</code>, why aren't you actually <em>inline</em> your definition? Since this is what's expected by the compiler.</p>\n\n<p>There's no point to move <code>inline</code> definitions to a separate translation unit, since each translation unit want's to see the definition <code>inline</code>.</p>\n\n<hr>\n\n<p>Replace</p>\n\n<pre><code>inline Screen &amp;move(pos r, pos c);\n</code></pre>\n\n<p>with </p>\n\n<pre><code>inline Screen &amp;move(pos r, pos c) {\n   pos row = r * width;\n   cursor = row + c;\n   return *this;    \n}\n</code></pre>\n\n<p>and remove the definition from the <code>.cpp</code> file.</p>\n\n<hr>\n\n<p>If you want to have a forward declaration you can do it in your header file like this:</p>\n\n<pre><code> class Screen {\n      // ...\n      Screen &amp;move(pos r, pos c);\n };\n\n inline Screen &amp;Screen::move(pos r, pos c) {\n   pos row = r * width;\n   cursor = row + c;\n   return *this;    \n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 109, "user_id": 6421087, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209349210716995/picture?type=large", "display_name": "Ezra Goss", "link": "https://stackoverflow.com/users/6421087/ezra-goss"}, "edited": false, "score": 0, "creation_date": 1468435917, "post_id": 38359557, "comment_id": 64131603, "body": "I tried removing the inline before asking the question, I should have said that but it&#39;s still not working"}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "reply_to_user": {"reputation": 109, "user_id": 6421087, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209349210716995/picture?type=large", "display_name": "Ezra Goss", "link": "https://stackoverflow.com/users/6421087/ezra-goss"}, "edited": false, "score": 0, "creation_date": 1468436049, "post_id": 38359557, "comment_id": 64131689, "body": "@EzraGoss: in that case, I suggest you edit the post and remove it there as well, because that&#39;s what everyone thinks about first."}, {"owner": {"reputation": 301, "user_id": 4349614, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rGQvLlUWH3o/AAAAAAAAAAI/AAAAAAAAABE/jIxaQ_wzPUA/photo.jpg?sz=128", "display_name": "Ternvein", "link": "https://stackoverflow.com/users/4349614/ternvein"}, "edited": false, "score": 0, "creation_date": 1468436050, "post_id": 38359557, "comment_id": 64131691, "body": "Show us the code which is not working without the <code>inline</code> specifier then."}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": false, "score": 0, "last_activity_date": 1468435843, "creation_date": 1468435843, "answer_id": 38359557, "question_id": 38359469, "link": "https://stackoverflow.com/questions/38359469/is-there-something-wrong-with-this-function-being-defined-outside-the-header-fil/38359557#38359557", "title": "Is there something wrong with this function being defined outside the header file? (Visual Studio 2015, C++)", "body": "<p>When you put the <code>inline</code> keyword on a function declaration, that means a promise to the compiler that the function definition will be seen in every translation unit where it is used.  That is, the function definition should be in the header file, not a source file.</p>\n\n<p>Either put the function definition in the header or get rid of the <code>inline</code> marker.</p>\n"}, {"comments": [{"owner": {"reputation": 109, "user_id": 6421087, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209349210716995/picture?type=large", "display_name": "Ezra Goss", "link": "https://stackoverflow.com/users/6421087/ezra-goss"}, "edited": false, "score": 0, "creation_date": 1468436998, "post_id": 38359778, "comment_id": 64132200, "body": "I should have made it more explicit that the forward declaration was in the class body"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 109, "user_id": 6421087, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209349210716995/picture?type=large", "display_name": "Ezra Goss", "link": "https://stackoverflow.com/users/6421087/ezra-goss"}, "edited": false, "score": 0, "creation_date": 1468437083, "post_id": 38359778, "comment_id": 64132245, "body": "A declaration inside a class definition is <b>not</b> a forward declaration. Yes, you should have said that this wasn&#39;t a declaration, but was part of a class definition."}, {"owner": {"reputation": 109, "user_id": 6421087, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209349210716995/picture?type=large", "display_name": "Ezra Goss", "link": "https://stackoverflow.com/users/6421087/ezra-goss"}, "edited": false, "score": 0, "creation_date": 1468437240, "post_id": 38359778, "comment_id": 64132316, "body": "My mistake, sorry about that"}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1468436749, "creation_date": 1468436749, "answer_id": 38359778, "question_id": 38359469, "link": "https://stackoverflow.com/questions/38359469/is-there-something-wrong-with-this-function-being-defined-outside-the-header-fil/38359778#38359778", "title": "Is there something wrong with this function being defined outside the header file? (Visual Studio 2015, C++)", "body": "<p>The definition is for a <strong>member function</strong> <code>Screen::move</code>. The declaration is for a <strong>free function</strong> named <code>move</code>. There is no definition shown for the free function, so unless there's more code that hasn't been disclosed, calling the free function <code>move</code> will produce a linker error.</p>\n"}], "owner": {"reputation": 109, "user_id": 6421087, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209349210716995/picture?type=large", "display_name": "Ezra Goss", "link": "https://stackoverflow.com/users/6421087/ezra-goss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 38359556, "answer_count": 3, "score": -4, "last_activity_date": 1468438131, "creation_date": 1468435487, "last_edit_date": 1468438131, "question_id": 38359469, "link": "https://stackoverflow.com/questions/38359469/is-there-something-wrong-with-this-function-being-defined-outside-the-header-fil", "title": "Is there something wrong with this function being defined outside the header file? (Visual Studio 2015, C++)", "body": "<p>EDIT: Thank you to everyone who answered, I'm sure whatever it is it was anomalistic and it won't kill my program. Even if you're killing it on the forums reputation wise, that doesn't give you the right to condescend people who are just trying to enter the community, so please remember to be duly respectful if you're going to take the time to help. Otherwise who what's the use?</p>\n\n<p>Once, again thank you to everyone who contributed thoughtfully</p>\n\n<p>EDIT: The original code had an inline declaration, which seemed like it was the issue but the linker error still persists after removing it.</p>\n\n<p>As the title suggests, I'm having an issue with a specific function. I keep getting a linking error when calling it from main, despite the rest of the functions defined in the class .cpp working fine. I moved the function to the header file to check if it was just an issue with the function itself but it was not, since it compiled fine then. I'm new to c++ but feel like I understand separating source code between files pretty well. However, I'm completely lost with this one.</p>\n\n<p>Here it is forward declared in the header:</p>\n\n<pre><code>Screen &amp;move(pos r, pos c);\n</code></pre>\n\n<p>Here it is defined in the associated .cpp:</p>\n\n<pre><code>Screen&amp; Screen::move(pos r, pos c) {\n\n   pos row = r * width;\n   cursor = row + c;\n   return *this;\n\n}\n</code></pre>\n\n<p>Both the main source and the associated source files #include the header file, and as I said, the other functions seem to be working fine. </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "visual-studio-2015", "stl"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1468436755, "post_id": 38359449, "comment_id": 64132063, "body": "So take the project.  Eliminate half of it.  Does the problem still occur?  Yes?  Repeat until you have something absolutely minimal.  No?  Eliminate a the other half.  This wilk take effort, but should get you at least <i>somewhere</i> towarsa a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 2247, "user_id": 776237, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b684c1a575668cbb58a1df21e1962b8e?s=128&d=identicon&r=PG", "display_name": "dom_beau", "link": "https://stackoverflow.com/users/776237/dom-beau"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1468437274, "post_id": 38359449, "comment_id": 64132331, "body": "@Yakk I just wanted to know if someone faced the same problem. Of course, I&#39;ll have to use the dichotomy method..."}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 2, "creation_date": 1468438258, "post_id": 38359449, "comment_id": 64132805, "body": "Are you linking modules compiled with different versions of MSVC by any chance?"}, {"owner": {"reputation": 2247, "user_id": 776237, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b684c1a575668cbb58a1df21e1962b8e?s=128&d=identicon&r=PG", "display_name": "dom_beau", "link": "https://stackoverflow.com/users/776237/dom-beau"}, "reply_to_user": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 0, "creation_date": 1468440850, "post_id": 38359449, "comment_id": 64134196, "body": "@dxiv No. I rebuilt from a clean workspace. I suspect I miss a link to Intel libraries since I did not reinstall ICC but I kept the old installation. The error occurs when a C++/CLI compiled with MSVC tries to link to a .lib compiled with ICC. I guess I will have to reinstall ICC to make sure all the setup with VS2015 is correct."}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 0, "creation_date": 1468443526, "post_id": 38359449, "comment_id": 64135535, "body": "I don&#39;t see VC++ 2015 listed as an option for <a href=\"https://software.intel.com/en-us/node/513301\" rel=\"nofollow noreferrer\"><code>&#47;Qvc</code></a> even for Intel C++ 14, so it may not be available for v13 either."}, {"owner": {"reputation": 2247, "user_id": 776237, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b684c1a575668cbb58a1df21e1962b8e?s=128&d=identicon&r=PG", "display_name": "dom_beau", "link": "https://stackoverflow.com/users/776237/dom-beau"}, "edited": false, "score": 0, "creation_date": 1468509105, "post_id": 38359449, "comment_id": 64165873, "body": "Yep... Maybe my problem is there. Does someone know if one can link ICC 13.0 lib with VS2015/MSVC 14 dll/assemblies?"}], "answers": [{"tags": [], "owner": {"reputation": 220, "user_id": 3740794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nwT7k.jpg?s=128&g=1", "display_name": "Jayesh Vaghasiya", "link": "https://stackoverflow.com/users/3740794/jayesh-vaghasiya"}, "is_accepted": false, "score": 0, "last_activity_date": 1468495893, "creation_date": 1468495893, "answer_id": 38373059, "question_id": 38359449, "link": "https://stackoverflow.com/questions/38359449/vc-2015-doesnt-link-but-vc-2012-did/38373059#38373059", "title": "VC++ 2015 doesn&#39;t link but VC++ 2012 did", "body": "<p>Install Windows 10 SDK and and then re target your solution to use this latest SDK. Also make sure you code should be properly migrated to VS 2015 and dependencies are you using with your project should be of VS 2015 other wise it would give another error. </p>\n"}], "owner": {"reputation": 2247, "user_id": 776237, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b684c1a575668cbb58a1df21e1962b8e?s=128&d=identicon&r=PG", "display_name": "dom_beau", "link": "https://stackoverflow.com/users/776237/dom-beau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1468495893, "creation_date": 1468435419, "question_id": 38359449, "link": "https://stackoverflow.com/questions/38359449/vc-2015-doesnt-link-but-vc-2012-did", "title": "VC++ 2015 doesn&#39;t link but VC++ 2012 did", "body": "<p>I'm experiencing a strange error while moving our projects from VS2012 update 4 to VS2015 update 3. In the solution, half of the projects compile using VC++ (MSVC 14.0) and half of the projects compile using Intel C++ 13.0.</p>\n\n<p><strong><em>Everything compiles correctly.</em></strong></p>\n\n<p>The problem occurs when it's time to link. I get errors like this one that seems to be in the <code>std</code> files...</p>\n\n<pre><code>Error   LNK2019 \n\nunresolved external symbol \n\n\"public: virtual void __cdecl std::basic_istream&lt;wchar_t,struct\nstd::char_traits&lt;wchar_t&gt; &gt;::_Add_vtordisp1(void)\"\n(?_Add_vtordisp1@?$basic_istream@_WU?$char_traits@_W@std@@@std@@UEAAXXZ) \n\nreferenced in function \n\n\"[thunk]:public: virtual void __cdecl std::basic_istream&lt;wchar_t,struct\nstd::char_traits&lt;wchar_t&gt; &gt;::_Add_vtordisp1`vtordisp{4294967292,128}'\n(void)\" (?_Add_vtordisp1@?$basic_istream@_WU?$char_traits@_W@std@@@std@@$4PPPPPPPM@IA@EAAXXZ)\n</code></pre>\n\n<p>I can neither reproduce the bug with a spike solution nor give you a piece of code where the bug occurs because it seems to be in <code>std</code>.</p>\n\n<p>When I look in file <code>istream</code>, I find something like <code>#pragma vtordisp(push,2) //compiler bug workaroung</code> but I cannot figure what bug it is or how to fix it.</p>\n\n<p>Any clue/hint would be appreciate.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c#", "c++", "visual-studio", "visual-studio-2015"], "comments": [{"owner": {"reputation": 7505, "user_id": 945456, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cd711ee0ecdbc3428ff301a7961b1003?s=128&d=identicon&r=PG", "display_name": "Jeff B", "link": "https://stackoverflow.com/users/945456/jeff-b"}, "edited": false, "score": 0, "creation_date": 1468435402, "post_id": 38359432, "comment_id": 64131307, "body": "Any reason this is tagged <code>c#</code> <b>AND</b> <code>c++</code>?"}, {"owner": {"reputation": 1049, "user_id": 6580990, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/kZNPw.jpg?s=128&g=1", "display_name": "stimulate", "link": "https://stackoverflow.com/users/6580990/stimulate"}, "reply_to_user": {"reputation": 7505, "user_id": 945456, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cd711ee0ecdbc3428ff301a7961b1003?s=128&d=identicon&r=PG", "display_name": "Jeff B", "link": "https://stackoverflow.com/users/945456/jeff-b"}, "edited": false, "score": 0, "creation_date": 1468435589, "post_id": 38359432, "comment_id": 64131415, "body": "yes because my crash occurs with both these languages in the program."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1468435738, "post_id": 38359432, "comment_id": 64131501, "body": "You seem to have <i>different</i> problems with C# and C++. One is something taking a very long time (possibly forever), while the other seems to be a crash.. The two problems <i>may</i> be related, but it&#39;s impossible to say without more information (and no I don&#39;t know what information is really needed, haven&#39;t used Visual Studio in many years)."}, {"owner": {"reputation": 1659, "user_id": 5095502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e54dcf3ba6b94fd63bb61af1704ce1?s=128&d=identicon&r=PG", "display_name": "Quantic", "link": "https://stackoverflow.com/users/5095502/quantic"}, "edited": false, "score": 0, "creation_date": 1468435858, "post_id": 38359432, "comment_id": 64131567, "body": "What version of Visual Studio 2015 is it? What does the error say on the crash window? Windows event viewer should also show you the text of the crash."}, {"owner": {"reputation": 1049, "user_id": 6580990, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/kZNPw.jpg?s=128&g=1", "display_name": "stimulate", "link": "https://stackoverflow.com/users/6580990/stimulate"}, "edited": false, "score": 0, "creation_date": 1468436411, "post_id": 38359432, "comment_id": 64131898, "body": "so.. when trying to check the windows event viewer i got an error with the &quot;snap-in&quot;. it recommended to remove and quit the snap-in and then the computer manager crashed..  VS15 also crashes when i try to open the toolbar on the left with the error: &quot;The exeption &quot;unknown software error&quot; (0xe0434352) occured in the application at the position 0x7639c42d.&quot; (my native language is german so it might not be 1:1 what it typically would say)"}, {"owner": {"reputation": 1049, "user_id": 6580990, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/kZNPw.jpg?s=128&g=1", "display_name": "stimulate", "link": "https://stackoverflow.com/users/6580990/stimulate"}, "edited": false, "score": 0, "creation_date": 1468438279, "post_id": 38359432, "comment_id": 64132821, "body": "th version is Visual Studio Community 2015 Version 14.0.25422.01 Update 3"}, {"owner": {"reputation": 1659, "user_id": 5095502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e54dcf3ba6b94fd63bb61af1704ce1?s=128&d=identicon&r=PG", "display_name": "Quantic", "link": "https://stackoverflow.com/users/5095502/quantic"}, "edited": false, "score": 0, "creation_date": 1468443629, "post_id": 38359432, "comment_id": 64135580, "body": "You probably have a dying hard drive or a stick of memory going bad in that case. Event viewer errors and the computer management window crashing is very unusual aside from hardware problems. You can go to the hard drive manufacturers website and find a tool that will test it for you, and back in the day I used <a href=\"http://www.ultimatebootcd.com/\" rel=\"nofollow noreferrer\">UBCD</a> to test memory. There could be other hardware issues causing the same problems too; it&#39;s just very unlikely that ~core windows components start showing errors on a system unless it&#39;s hardware going bad. And it explains your VS issues too."}], "answers": [{"comments": [{"owner": {"reputation": 1049, "user_id": 6580990, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/kZNPw.jpg?s=128&g=1", "display_name": "stimulate", "link": "https://stackoverflow.com/users/6580990/stimulate"}, "edited": false, "score": 0, "creation_date": 1468436661, "post_id": 38359667, "comment_id": 64132016, "body": "I cant even create any c# template project.  when i create a c++ console application project it crashes as soon as i try to type in the main function or in any way interact with any function (clicking the line)"}, {"owner": {"reputation": 1049, "user_id": 6580990, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/kZNPw.jpg?s=128&g=1", "display_name": "stimulate", "link": "https://stackoverflow.com/users/6580990/stimulate"}, "edited": false, "score": 0, "creation_date": 1468437484, "post_id": 38359667, "comment_id": 64132449, "body": "i know this is not a lot of information but that all i have. It crashes as soon as i do anything! i cant write a single line of code or even create certain projects"}, {"owner": {"reputation": 125, "user_id": 655698, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/DLg3c.jpg?s=128&g=1", "display_name": "rochastuff", "link": "https://stackoverflow.com/users/655698/rochastuff"}, "reply_to_user": {"reputation": 1049, "user_id": 6580990, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/kZNPw.jpg?s=128&g=1", "display_name": "stimulate", "link": "https://stackoverflow.com/users/6580990/stimulate"}, "edited": false, "score": 0, "creation_date": 1468437739, "post_id": 38359667, "comment_id": 64132575, "body": "mmm it looks like it is a problem not of Visual Studio. Which version are you using? Try to use another different version, try the Community, or unistall completely VS and do a fresh install"}, {"owner": {"reputation": 1049, "user_id": 6580990, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/kZNPw.jpg?s=128&g=1", "display_name": "stimulate", "link": "https://stackoverflow.com/users/6580990/stimulate"}, "edited": false, "score": 0, "creation_date": 1468438362, "post_id": 38359667, "comment_id": 64132862, "body": "the version is Visual Studio Community 2015 Version 14.0.25422.01 Update 3  i have already uninstalled and reinstalled it.. my windows 7 should be up to date (recently updated)"}, {"owner": {"reputation": 125, "user_id": 655698, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/DLg3c.jpg?s=128&g=1", "display_name": "rochastuff", "link": "https://stackoverflow.com/users/655698/rochastuff"}, "reply_to_user": {"reputation": 1049, "user_id": 6580990, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/kZNPw.jpg?s=128&g=1", "display_name": "stimulate", "link": "https://stackoverflow.com/users/6580990/stimulate"}, "edited": false, "score": 0, "creation_date": 1468439518, "post_id": 38359667, "comment_id": 64133434, "body": "did you do an absolutely clean installation? if so, then try with another version, as I said, it is difficult to know which the problem is. You will have to try to detect from where the problem comes :/"}], "tags": [], "owner": {"reputation": 125, "user_id": 655698, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/DLg3c.jpg?s=128&g=1", "display_name": "rochastuff", "link": "https://stackoverflow.com/users/655698/rochastuff"}, "is_accepted": false, "score": 0, "last_activity_date": 1468436276, "creation_date": 1468436276, "answer_id": 38359667, "question_id": 38359432, "link": "https://stackoverflow.com/questions/38359432/visual-studio-2015-crashes-when-creating-a-function/38359667#38359667", "title": "Visual Studio 2015 crashes when creating a function", "body": "<p>As you don't say which template project are you trying to create, try creating a <strong>Console Application</strong> project:\nFile -> New -> Project</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZRG92.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZRG92.png\" alt=\"enter image description here\"></a></p>\n\n<p>It will create the following starting code:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Threading.Tasks;\n\nnamespace ConsoleApplication1\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n        }\n    }\n}\n</code></pre>\n\n<p>Just add the following lines into the Main function and run it.</p>\n\n<pre><code>Console.WriteLine(\"Hello World!\");\nConsole.ReadKey();\n</code></pre>\n\n<p>Hope you get this done, if not, there could be a lot of reasons why your Visual Studio crashes in that way, please share more information/screenshots if you can't do this and most important, which template are you trying to use.</p>\n"}], "owner": {"reputation": 1049, "user_id": 6580990, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/kZNPw.jpg?s=128&g=1", "display_name": "stimulate", "link": "https://stackoverflow.com/users/6580990/stimulate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1468436276, "creation_date": 1468435335, "question_id": 38359432, "link": "https://stackoverflow.com/questions/38359432/visual-studio-2015-crashes-when-creating-a-function", "title": "Visual Studio 2015 crashes when creating a function", "body": "<p>i am just getting into programming and i have already reinstalled Visual Studio 2015 once, because it crashes everytime i create a template project and click in the line of the main function. when i create an empty project it crashes with any function as soon as i type the {} brakets. </p>\n\n<p>It also wont create a c# project file. it just says \"creating project x\" forever. </p>\n\n<p>what could cause this?</p>\n\n<p>the installation took about 4 hours both times which seemed odd to me. ist that normal?</p>\n\n<p>thanks for the help in advance!</p>\n"}, {"tags": ["c++", "simulation", "ros"], "comments": [{"owner": {"reputation": 3661, "user_id": 2095383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jGGVr.png?s=128&g=1", "display_name": "luator", "link": "https://stackoverflow.com/users/2095383/luator"}, "edited": false, "score": 0, "creation_date": 1468565434, "post_id": 38359329, "comment_id": 64188056, "body": "What exactly do you mean by &quot;the program does not work&quot;? Do you get any error message or does the subscriber just never get any messages? In the latter case, did you verify with <code>rostopic echo &#47;topic_name</code> that the messages are indeed published?"}, {"owner": {"reputation": 3661, "user_id": 2095383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jGGVr.png?s=128&g=1", "display_name": "luator", "link": "https://stackoverflow.com/users/2095383/luator"}, "edited": false, "score": 0, "creation_date": 1468565468, "post_id": 38359329, "comment_id": 64188079, "body": "Ah and another question: How exactly do you start gazebo? Is it running from a terminal?"}, {"owner": {"reputation": 431, "user_id": 3271700, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c9d6e80a762e962de924bd6f1efc3ee0?s=128&d=identicon&r=PG&f=1", "display_name": "errolflynn", "link": "https://stackoverflow.com/users/3271700/errolflynn"}, "reply_to_user": {"reputation": 3661, "user_id": 2095383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jGGVr.png?s=128&g=1", "display_name": "luator", "link": "https://stackoverflow.com/users/2095383/luator"}, "edited": false, "score": 0, "creation_date": 1468861412, "post_id": 38359329, "comment_id": 64290103, "body": "I start gazebo with &#39;gazebo ~/.gazebo/worlds/velodyne.world&#39; from the bash terminal, which is where my world containing the object that I intend to communicate with ros is placed."}, {"owner": {"reputation": 431, "user_id": 3271700, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c9d6e80a762e962de924bd6f1efc3ee0?s=128&d=identicon&r=PG&f=1", "display_name": "errolflynn", "link": "https://stackoverflow.com/users/3271700/errolflynn"}, "reply_to_user": {"reputation": 3661, "user_id": 2095383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jGGVr.png?s=128&g=1", "display_name": "luator", "link": "https://stackoverflow.com/users/2095383/luator"}, "edited": false, "score": 0, "creation_date": 1468861510, "post_id": 38359329, "comment_id": 64290149, "body": "By &quot;the program does not work&quot;, I mean that rosmaster/roscore is not initialized/started. When I try to run &#39;rostopic list&#39;, I receive the output: &quot;ERROR: Unable to communicate with master&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 3271700, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c9d6e80a762e962de924bd6f1efc3ee0?s=128&d=identicon&r=PG&f=1", "display_name": "errolflynn", "link": "https://stackoverflow.com/users/3271700/errolflynn"}, "edited": false, "score": 0, "creation_date": 1468514969, "post_id": 38367883, "comment_id": 64169685, "body": "This is an interesting point. I had assumed that ros::init() would start roscore. I have actually tried to manually start roscore so that I can communicate with rosmaster. In a seperate terminal, &#39;rostopic list&#39; shows only /rosout and /rosout_agg as available topics. A call to &#39;rostopic pub /{my_topic} /{my_msg_type}&#39; outputs &#39;publishing and latching message.&#39;This leads me to believe that this process is hanging.&#39; In conclusion, I believe that starting roscore is not the issue. I will continue to research. Thanks! Let me know what you think!"}, {"owner": {"reputation": 3661, "user_id": 2095383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jGGVr.png?s=128&g=1", "display_name": "luator", "link": "https://stackoverflow.com/users/2095383/luator"}, "reply_to_user": {"reputation": 431, "user_id": 3271700, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c9d6e80a762e962de924bd6f1efc3ee0?s=128&d=identicon&r=PG&f=1", "display_name": "errolflynn", "link": "https://stackoverflow.com/users/3271700/errolflynn"}, "edited": false, "score": 0, "creation_date": 1468565278, "post_id": 38367883, "comment_id": 64187969, "body": "@errolflynn: I can&#39;t verify it right now (no ROS installed), but I think the message you get from <code>rostopic pub</code> is okay (so this is working as expected)."}, {"owner": {"reputation": 431, "user_id": 3271700, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c9d6e80a762e962de924bd6f1efc3ee0?s=128&d=identicon&r=PG&f=1", "display_name": "errolflynn", "link": "https://stackoverflow.com/users/3271700/errolflynn"}, "edited": false, "score": 0, "creation_date": 1468861558, "post_id": 38367883, "comment_id": 64290177, "body": "This message is fine, however it should publish a message that then translates into a command sent to my ROS-compatible object. When I publish this message with &#39;rostopic pub&#39;, The published message is not received or does not do anything to the ROS-compatible object."}, {"owner": {"reputation": 3661, "user_id": 2095383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jGGVr.png?s=128&g=1", "display_name": "luator", "link": "https://stackoverflow.com/users/2095383/luator"}, "reply_to_user": {"reputation": 431, "user_id": 3271700, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c9d6e80a762e962de924bd6f1efc3ee0?s=128&d=identicon&r=PG&f=1", "display_name": "errolflynn", "link": "https://stackoverflow.com/users/3271700/errolflynn"}, "edited": false, "score": 0, "creation_date": 1469438876, "post_id": 38367883, "comment_id": 64518438, "body": "@errolflynn When you run <code>rostopic echo &#47;topic_name</code> in one terminal and then publish a message with <code>rostopic pub</code> in another terminal, does the echo-command receive the message?"}, {"owner": {"reputation": 431, "user_id": 3271700, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c9d6e80a762e962de924bd6f1efc3ee0?s=128&d=identicon&r=PG&f=1", "display_name": "errolflynn", "link": "https://stackoverflow.com/users/3271700/errolflynn"}, "edited": false, "score": 0, "creation_date": 1469486132, "post_id": 38367883, "comment_id": 64545886, "body": "Yes, the echo command receives the data. And a call to &#39;rostopic list&#39; shows the command that I am publishing."}, {"owner": {"reputation": 3661, "user_id": 2095383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jGGVr.png?s=128&g=1", "display_name": "luator", "link": "https://stackoverflow.com/users/2095383/luator"}, "reply_to_user": {"reputation": 431, "user_id": 3271700, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c9d6e80a762e962de924bd6f1efc3ee0?s=128&d=identicon&r=PG&f=1", "display_name": "errolflynn", "link": "https://stackoverflow.com/users/3271700/errolflynn"}, "edited": false, "score": 0, "creation_date": 1469521381, "post_id": 38367883, "comment_id": 64557623, "body": "Okay, so it seems that ROS is okay and it is only an issue with the gazebo node. Did you double-check that you are subscribing to the correct topic? If you run <code>rosnode list</code> while your gazebo node is running, is gazebo_client listed in the output?"}], "tags": [], "owner": {"reputation": 3661, "user_id": 2095383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jGGVr.png?s=128&g=1", "display_name": "luator", "link": "https://stackoverflow.com/users/2095383/luator"}, "is_accepted": false, "score": 3, "last_activity_date": 1525254286, "last_edit_date": 1525254286, "creation_date": 1468480689, "answer_id": 38367883, "question_id": 38359329, "link": "https://stackoverflow.com/questions/38359329/why-wont-gazebo-start-ros/38367883#38367883", "title": "Why won&#39;t Gazebo start ROS?", "body": "<p>It sounds to me like <code>roscore</code> is not running. You have to run <code>roscore</code> manually before you can start any ROS node.</p>\n\n<p>You can imagine <code>roscore</code> as a server to which all nodes connect and that manages the communication between these nodes. It won't start automatically, so you always have to start <code>roscore</code> as a first step, before you can use any ROS nodes.</p>\n\n<p>An exception to this is, if you are using launch-files. <code>roslaunch</code> will indeed automatically start <code>roscore</code> if it is not already running.</p>\n"}, {"tags": [], "owner": {"reputation": 534, "user_id": 7350738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf3aa1e3f328cf0531207393badababe?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Ali", "link": "https://stackoverflow.com/users/7350738/mohammad-ali"}, "is_accepted": false, "score": -1, "last_activity_date": 1550695367, "last_edit_date": 1550695367, "creation_date": 1525125930, "answer_id": 50108854, "question_id": 38359329, "link": "https://stackoverflow.com/questions/38359329/why-wont-gazebo-start-ros/50108854#50108854", "title": "Why won&#39;t Gazebo start ROS?", "body": "<p>The problem is indeed <code>roscore</code> but after that you can check the node ur started with <code>rosnode info nodename</code> to check the sub and publisher status or do <code>roswtf</code> to check for error in general.</p>\n\n<p>You can check realtime debug log setting ros debug level with rqt logger level(easiest way) to know if your node is getting data or not</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9568412, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7_WUHSa6AQE/AAAAAAAAAAI/AAAAAAAAAAc/YL6obH7pi2E/photo.jpg?sz=128", "display_name": "tahsin kose", "link": "https://stackoverflow.com/users/9568412/tahsin-kose"}, "is_accepted": false, "score": 0, "last_activity_date": 1563272035, "creation_date": 1563272035, "answer_id": 57054965, "question_id": 38359329, "link": "https://stackoverflow.com/questions/38359329/why-wont-gazebo-start-ros/57054965#57054965", "title": "Why won&#39;t Gazebo start ROS?", "body": "<p>The problem is solved via running <code>roscore</code> beforehand you start Gazebo server. I must accept that the tutorial does, indeed, follows a Gazebo-first pipeline. Nonetheless, I believe it's a deprecated method to make the bridge between ROS and Gazebo. You should inspect the code in <a href=\"https://github.com/ros-simulation/gazebo_ros_pkgs/tree/kinetic-devel/gazebo_plugins\" rel=\"nofollow noreferrer\">gazebo-ros-pkgs</a> for a much easier method.</p>\n\n<p>A Gazebo plugin is a run-time component -shared library in technical terms- that is attached to a specific object or directly to the <a href=\"https://osrf-distributions.s3.amazonaws.com/gazebo/api/dev/classgazebo_1_1physics_1_1World.html\" rel=\"nofollow noreferrer\">World</a> instance via SDF/URDF files. A world instance can be simulated through the command <code>gzserver &lt;world_file&gt;</code>. If you are using Gazebo in conjunction with ROS <em>(I highly recommend that if you are going to use ROS at some point)</em>, what you need is <strong>gazebo-ros</strong> node. Again in the above link, there are several examples of how it is done.</p>\n\n<p>In ROS universe, all the processes are represented as ROS nodes and Gazebo simulator is not different. When you use <code>gazebo_ros</code> package (which makes the ROS-Gazebo connection in one-line) Gazebo simulator is initialized as <code>/gazebo</code> node with the specified world file and all the attached Gazebo plugins do operate as components within this node. The first issue resides in here. You should not call <code>ros::init()</code> in a Gazebo plugin since it has already an initialized node. Second problem is in your assumption, such that <code>ros::init()</code> call does not start the <code>roscore</code> node. It only initializes your executable in a way that it can communicate with other ROS nodes under the same master. So, what you need is only a <a href=\"http://docs.ros.org/melodic/api/roscpp/html/classros_1_1NodeHandle.html\" rel=\"nofollow noreferrer\">ros::NodeHandle</a>. </p>\n\n<p>I don't know why OSRF hasn't updated the tutorials. Perhaps, they are strictly trying to offer a Gazebo-first aspect in Gazebo website and treat ROS as a secondary component. However I find it rather problematic, especially when one wants to use ROS as primary component. Since <code>roslaunch</code> only launches ROS nodes, which makes <code>gzserver &lt;world_file&gt;</code> command disfunctional, this tutorial would be invalid and even contradicting with the mainstream usage.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13343167, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hGH1kyuCwaY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcCmGQrv8YH3iymgLWA3xoI0JG3yg/photo.jpg?sz=128", "display_name": "shimin pan", "link": "https://stackoverflow.com/users/13343167/shimin-pan"}, "is_accepted": false, "score": 0, "last_activity_date": 1587160436, "creation_date": 1587160436, "answer_id": 61281347, "question_id": 38359329, "link": "https://stackoverflow.com/questions/38359329/why-wont-gazebo-start-ros/61281347#61281347", "title": "Why won&#39;t Gazebo start ROS?", "body": "<p>To my understanding, Gazebo is not part of ROS, so it makes sense if it doesn't start <code>roscore</code>. </p>\n\n<p>If you want to start <code>roscore</code> simultaneously as this node starts, try to use <code>roslaunch</code> command instead of rosrun.</p>\n"}], "owner": {"reputation": 431, "user_id": 3271700, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c9d6e80a762e962de924bd6f1efc3ee0?s=128&d=identicon&r=PG&f=1", "display_name": "errolflynn", "link": "https://stackoverflow.com/users/3271700/errolflynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1540, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1587160436, "creation_date": 1468434897, "question_id": 38359329, "link": "https://stackoverflow.com/questions/38359329/why-wont-gazebo-start-ros", "title": "Why won&#39;t Gazebo start ROS?", "body": "<p>I am working through the Gazebo tutorial to connect a Gazebo sensor to ROS and pass messages. <a href=\"http://gazebosim.org/tutorials?cat=guided_i&amp;tut=guided_i6\" rel=\"nofollow\">http://gazebosim.org/tutorials?cat=guided_i&amp;tut=guided_i6</a></p>\n\n<p>This program builds a Gazebo ModelPlugin object, and initializes ROS from within this object. Then, it creates a ROS node, subscriber, queue, and a standard thread to run the ROS queue. This program works using Gazebo's transport objects, but when I try to add in ROS transport objects (as noted previously), the program does not work. My issue stems from the fact that the roscore nodes (including rosmaster) do not initialize.</p>\n\n<p>My code for the sensor plugin is below. ROS integration begins on line 70:</p>\n\n<pre><code>#ifndef _VELODYNE_PLUGIN_HH_\n#define _VELODYNE_PLUGIN_HH_\n\n#include &lt;gazebo/gazebo.hh&gt;\n#include &lt;gazebo/msgs/msgs.hh&gt;\n#include &lt;gazebo/physics/physics.hh&gt;\n#include &lt;gazebo/transport/transport.hh&gt;\n#include &lt;ros/ros.h&gt;\n#include &lt;ros/callback_queue.h&gt;\n#include &lt;ros/subscribe_options.h&gt;\n#include &lt;thread&gt;\n#include &lt;std_msgs/Float32.h&gt;\n\nnamespace gazebo\n{\n  /// \\brief A plugin to control a Velodyne sensor.\n  class VelodynePlugin : public ModelPlugin\n  {\n    /// \\brief Constructor\n    public: VelodynePlugin() {}\n\n    /// \\brief The load function is called by Gazebo when the plugin is\n    /// inserted into simulation\n    /// \\param[in] _model A pointer to the model that this plugin is\n    /// attached to.\n    /// \\param[in] _sdf A pointer to the plugin's SDF element.\n    public: virtual void Load(physics::ModelPtr _model, sdf::ElementPtr _sdf) {\n            gzwarn &lt;&lt; \"HERE\";\n      if (_model-&gt;GetJointCount() == 0) {\n        std::cerr &lt;&lt;\n          \"Invalid joint count, Velodyne plugin not loaded\\n\";\n      }\n\n      // Store the model pointer for convenience.\n      this-&gt;model = _model;\n\n      // Get the first joint. We are making an assumption about the\n      // model having one joint that is the rotational joint.\n      this-&gt;joint = _model-&gt;GetJoints()[0];\n\n      // Setup a P-controller with a gain of 0.1.\n      this-&gt;pid=common::PID(0.1,0,0);\n\n      // Apply the P-controller to the joint.\n      this-&gt;model-&gt;GetJointController()-&gt;SetVelocityPID(\n          this-&gt;joint-&gt;GetScopedName(), this-&gt;pid);\n\n      // Default to zero velocity\n      double velocity=0;\n\n      // Check that the velocity element exists, then read the value\n      if (_sdf-&gt;HasElement(\"velocity\"))\n        velocity=_sdf-&gt;Get&lt;double&gt;(\"velocity\");\n\n      this-&gt;SetVelocity(velocity);\n\n      // Create the node\n      this-&gt;node = transport::NodePtr(new transport::Node());\n      this-&gt;node-&gt;Init(this-&gt;model-&gt;GetWorld()-&gt;GetName());\n\n      // Create a topic name\n      std::string topicName = \"~/\" + this-&gt;model-&gt;GetName() +\n        \"/vel_cmd\";\n\n      // Subscribe to the topic, and register a callback.\n      this-&gt;sub = this-&gt;node-&gt;Subscribe(topicName,\n          &amp;VelodynePlugin::OnMsg, this);\n\n            // Initialize ros, if it has not already been initialized.\n            if (!ros::isInitialized()) {\n                std::cout &lt;&lt; \"initializing ros\" &lt;&lt; std::endl;\n                int argc = 0;\n                char **argv=NULL;\n                ros::init(argc,argv,\"gazebo_client\",\n                    ros::init_options::NoSigintHandler);\n            } else { std::cout &lt;&lt; \"NOT initializing ros\" &lt;&lt; std::endl; }\n\n            // Create our ROS node. This acts in a similar manner to the\n            // Gazebo node.\n            this-&gt;rosNode.reset(new ros::NodeHandle(\"gazebo_client\"));\n\n      // Create a named topic, and subscribe to it.\n      ros::SubscribeOptions so =\n        ros::SubscribeOptions::create&lt;std_msgs::Float32&gt;(\n            \"/\"+this-&gt;model-&gt;GetName()+\"/vel_cmd\",\n            1,\n            boost::bind(&amp;VelodynePlugin::OnRosMsg, this, _1),\n            ros::VoidPtr(), &amp;this-&gt;rosQueue);\n\n      this-&gt;rosSub = this-&gt;rosNode-&gt;subscribe(so);\n\n      // Spin up the queue helper thread\n      this-&gt;rosQueueThread = \n        std::thread(std::bind(&amp;VelodynePlugin::QueueThread,this));\n    }\n\n    /// \\brief Set the velocity of the Velodyne\n    /// \\param[in] _vel New target velocity\n    public: void SetVelocity(const double &amp;_vel) {\n      // Set the joint's target velocity.\n      this-&gt;model-&gt;GetJointController()-&gt;SetVelocityTarget(\n          this-&gt;joint-&gt;GetScopedName(), _vel);\n    }\n\n    /// \\brief Handle incoming message\n    /// \\param[in] _msg Repurpose a vector3 message. This function will\n    /// only use the x component.\n    private: void OnMsg(ConstVector3dPtr &amp;_msg) {\n      this-&gt;SetVelocity(_msg-&gt;x());\n    }\n\n    /// \\brief Handle an incoming message from ROS\n    /// \\param[in] _msg A float value that is used to set the velocity\n    /// of the Velodyne.\n    public: void OnRosMsg(const std_msgs::Float32ConstPtr &amp;_msg) {\n      this-&gt;SetVelocity(_msg-&gt;data);\n    }\n\n    /// \\brief ROS helper function that processes messages\n    private: void QueueThread() {\n      static const double timeout = .01;\n      while (this-&gt;rosNode-&gt;ok()) {\n        this-&gt;rosQueue.callAvailable(ros::WallDuration(timeout));\n      }\n    }\n\n\n    /// \\brief Pointer to the model;\n    private: physics::ModelPtr model;\n\n    /// \\brief Control surfaces joints.\n    private: physics::JointPtr joint;\n\n    /// \\brief Velocity PID for the propeller.\n    private: common::PID pid;\n\n    /// \\brief A node used for transport\n    private: transport::NodePtr node;\n\n    /// \\brief A subscriber to a named topic.\n    private: transport::SubscriberPtr sub;\n\n    /// \\brief A node used for ROS transport\n    private: std::unique_ptr&lt;ros::NodeHandle&gt; rosNode;\n\n    /// \\brief A ROS subscriber\n    private: ros::Subscriber rosSub;\n\n    /// \\brief A ROS callbackqueue that helps process messages\n    private: ros::CallbackQueue rosQueue;\n\n    /// \\brief A thread that keeps running the rosQueue\n    private: std::thread rosQueueThread;\n\n  };\n\n  // Tell Gazebo about this plugin, so that Gazebo can call Load on this plugin.\n  GZ_REGISTER_MODEL_PLUGIN(VelodynePlugin)\n}\n#endif\n</code></pre>\n\n<p>Let me know how I can be more specific about this question. The first problem is definitely that ROS is not initialized. I can tell this because a call in a different terminal to <code>rostopic list</code> outputs:</p>\n\n<pre><code>ERROR: Unable to communicate with master\n</code></pre>\n"}, {"tags": ["c++", "sdl-2"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1468435890, "post_id": 38359208, "comment_id": 64131589, "body": "Your code works for me (after I added the relevant initialization code). Can you post a minimal, complete (compilable) example that reproduces the error?"}, {"owner": {"reputation": 141, "user_id": 4451275, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-KX-TeUSVdow/AAAAAAAAAAI/AAAAAAAABjQ/KpKOM3enHzU/photo.jpg?sz=128", "display_name": "Michael Bethke", "link": "https://stackoverflow.com/users/4451275/michael-bethke"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1468436225, "post_id": 38359208, "comment_id": 64131787, "body": "Thank you for testing this, @Galik ! I&#39;m happy to provide a link to my project, however I&#39;m using a 3rd party GUI toolkit, so it may be a little confusing. It should build and run without issue, though, so long as you have SDL2, SDL2_Image, and SDL2_TTF installed. The project may be found here: <a href=\"https://github.com/2CatStudios/LightYear/tree/retina-support/Project/Universal/LightYear\" rel=\"nofollow noreferrer\">github.com/2CatStudios/LightYear/tree/retina-support/Project&zwnj;&#8203;/&hellip;</a> The relevant code is in RenderingManager.cpp at line 14 <a href=\"https://github.com/2CatStudios/LightYear/blob/retina-support/Project/Universal/LightYear/src/RenderingManager.cpp\" rel=\"nofollow noreferrer\">github.com/2CatStudios/LightYear/blob/retina-support/Project&zwnj;&#8203;/&hellip;</a>"}, {"owner": {"reputation": 141, "user_id": 4451275, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-KX-TeUSVdow/AAAAAAAAAAI/AAAAAAAABjQ/KpKOM3enHzU/photo.jpg?sz=128", "display_name": "Michael Bethke", "link": "https://stackoverflow.com/users/4451275/michael-bethke"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1468436458, "post_id": 38359208, "comment_id": 64131921, "body": "@Galik What OS are you using? I suppose it is possible that this is an issue with the Cocoa implementation of the <code>SDL_GetDisplayDPI</code> function."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1468436467, "post_id": 38359208, "comment_id": 64131925, "body": "Do you ever call the library initialization function: <code>SDL_Init(SDL_INIT_VIDEO);</code>?"}, {"owner": {"reputation": 141, "user_id": 4451275, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-KX-TeUSVdow/AAAAAAAAAAI/AAAAAAAABjQ/KpKOM3enHzU/photo.jpg?sz=128", "display_name": "Michael Bethke", "link": "https://stackoverflow.com/users/4451275/michael-bethke"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1468436512, "post_id": 38359208, "comment_id": 64131949, "body": "In kiss_draw.c ( <a href=\"https://github.com/2CatStudios/LightYear/blob/retina-support/Project/Universal/LightYear/lib/kiss_sdl-1.0.12/kiss_draw.c\" rel=\"nofollow noreferrer\">github.com/2CatStudios/LightYear/blob/retina-support/Project&zwnj;&#8203;/&hellip;</a> ) , at line 200 <code>SDL_Init(SDL_INIT_EVERYTHING);</code> is called."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1468436709, "post_id": 38359208, "comment_id": 64132045, "body": "I&#39;m using <code>Linux</code>. All I can think of is make sure the library initialization function is called before the code in question."}, {"owner": {"reputation": 141, "user_id": 4451275, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-KX-TeUSVdow/AAAAAAAAAAI/AAAAAAAABjQ/KpKOM3enHzU/photo.jpg?sz=128", "display_name": "Michael Bethke", "link": "https://stackoverflow.com/users/4451275/michael-bethke"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1468436730, "post_id": 38359208, "comment_id": 64132054, "body": "I think it&#39;s worth noting that I did test the above code in a pure SDL example project from Will Usher ( <a href=\"http://www.willusher.io/pages/sdl2/\" rel=\"nofollow noreferrer\">willusher.io/pages/sdl2</a> ), and I saw the same error."}, {"owner": {"reputation": 141, "user_id": 4451275, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-KX-TeUSVdow/AAAAAAAAAAI/AAAAAAAABjQ/KpKOM3enHzU/photo.jpg?sz=128", "display_name": "Michael Bethke", "link": "https://stackoverflow.com/users/4451275/michael-bethke"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1468436859, "post_id": 38359208, "comment_id": 64132114, "body": "@Galik I just moved the code elsewhere (later), but the results are the same. Thank you for taking a look at this, though, I appreciate the help!"}], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 4451275, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-KX-TeUSVdow/AAAAAAAAAAI/AAAAAAAABjQ/KpKOM3enHzU/photo.jpg?sz=128", "display_name": "Michael Bethke", "link": "https://stackoverflow.com/users/4451275/michael-bethke"}, "is_accepted": true, "score": 0, "last_activity_date": 1470539167, "last_edit_date": 1470539167, "creation_date": 1470517156, "answer_id": 38808654, "question_id": 38359208, "link": "https://stackoverflow.com/questions/38359208/sdl-detect-high-dpi-retina-display/38808654#38808654", "title": "SDL Detect High DPI/Retina Display", "body": "<p>I was using a .framework installation of SDL when I encountered this issue. For an unrelated reason, I trashed the .framework SDL files (image and ttf as well), and built SDL from source (thus transitioning to a \"unix-style\" SDL-installation). To my surprise, <code>SDL_GetDisplayDPI ()</code> is now returning 0, setting the values of DDPI, HDPI, and VDPI, to 109 on a non-retina iMac, and 113.5 on a retina MacBook Pro. I'm not certain that these are correct/accurate, but it is consistent between launches, so I'll work with it.</p>\n\n<p>At this point, I'm not sure if it was a bug, which has been fixed in the repo, or was an issue with my .framework files. On a somewhat unrelated note, <code>SDL_GetBasePath ()</code> and <code>SDL_GetPrefPath ()</code>, which also weren't working, now return the expected values. If you're also experiencing any of these problems on macOS, try compiling and installing SDL from source (<a href=\"https://hg.libsdl.org/SDL\" rel=\"nofollow\">https://hg.libsdl.org/SDL</a>).</p>\n\n<p>Thanks for your input, everyone!</p>\n"}, {"tags": [], "owner": {"reputation": 1681, "user_id": 1394731, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/18e7f1db4c9cd9109baef63567e26f51?s=128&d=identicon&r=PG", "display_name": "theicfire", "link": "https://stackoverflow.com/users/1394731/theicfire"}, "is_accepted": false, "score": 1, "last_activity_date": 1572643987, "creation_date": 1572643987, "answer_id": 58666167, "question_id": 38359208, "link": "https://stackoverflow.com/questions/38359208/sdl-detect-high-dpi-retina-display/58666167#58666167", "title": "SDL Detect High DPI/Retina Display", "body": "<p>I know I'm not answering your question directly, and want to reiterate one thing you tried.</p>\n\n<p>On a Macbook pro, when an SDL window is on an external display, <code>SDL_GetWindowSize</code> and <code>SDL_GL_GetDrawableSize</code> return the same values. If the window is on a Retina screen, they're different. Specifically, the drawable size is 2x larger in each dimension.</p>\n"}], "owner": {"reputation": 141, "user_id": 4451275, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-KX-TeUSVdow/AAAAAAAAAAI/AAAAAAAABjQ/KpKOM3enHzU/photo.jpg?sz=128", "display_name": "Michael Bethke", "link": "https://stackoverflow.com/users/4451275/michael-bethke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1932, "favorite_count": 0, "accepted_answer_id": 38808654, "answer_count": 2, "score": 0, "last_activity_date": 1573147746, "creation_date": 1468434447, "last_edit_date": 1573147746, "question_id": 38359208, "link": "https://stackoverflow.com/questions/38359208/sdl-detect-high-dpi-retina-display", "title": "SDL Detect High DPI/Retina Display", "body": "<p>I'm wondering what the best way to detect a high DPI display is. Currently I'm trying to use <code>SDL_GetDisplayDPI (int, *float, *float, *float)</code>, however this has only returned errors on the two different computers I tested with (MacBook Pro running OS X 10.11.5 and iMac running macOS 10.12 Beta (16A238m)). For reference, my code is bellow.</p>\n\n<pre><code>float diagDPI = -1;\nfloat horiDPI = -1;\nfloat vertDPI = -1;\n\nint dpiReturn = SDL_GetDisplayDPI (0, &amp;diagDPI, &amp;horiDPI, &amp;vertDPI);\nstd::cout &lt;&lt; \"GetDisplayDPI() returned \" &lt;&lt; dpiReturn &lt;&lt; std::endl;\n\nif (dpiReturn != 0)\n{\n\n    std::cout &lt;&lt; \"Error: \" &lt;&lt; SDL_GetError () &lt;&lt; std::endl;\n}\n\nstd::cout &lt;&lt; \"DDPI: \" &lt;&lt; diagDPI &lt;&lt; std::endl &lt;&lt; \"HDPI: \" &lt;&lt; horiDPI &lt;&lt; std::endl &lt;&lt; \"VDPI: \" &lt;&lt; vertDPI &lt;&lt; std::endl;\n</code></pre>\n\n<p>Unfortunately, this is only giving me something like this:</p>\n\n<pre><code>/* Output */\nGetDisplayDPI() returned -1\nError: \nDDPI: -1\nHDPI: -1\nVDPI: -1\nNot Retina\n</code></pre>\n\n<p>I also tried comparing the OpenGL drawable size with the SDL window size, but <code>SDL_GetWindowSize (SDL_Window, *int, *int)</code> is returning 0s, too. That code is bellow, followed by the output.</p>\n\n<pre><code>int gl_w;\nint gl_h;\n\nSDL_GL_GetDrawableSize (window, &amp;gl_w, &amp;gl_h);\nstd::cout &lt;&lt; \"GL_W: \" &lt;&lt; gl_w &lt;&lt; std::endl &lt;&lt; \"GL_H: \" &lt;&lt; gl_h &lt;&lt; std::endl;\n\n\nint sdl_w;\nint sdl_h;\n\nSDL_GetWindowSize (window, &amp;sdl_w, &amp;sdl_h);\nstd::cout &lt;&lt; \"SDL_W: \" &lt;&lt; sdl_w &lt;&lt; std::endl &lt;&lt; \"SDL_H: \" &lt;&lt; sdl_h &lt;&lt; std::endl;\n\n/* Output */\nGL_W: 1280\nGL_H: 720\nSDL_W: 0\nSDL_H: 0\n</code></pre>\n\n<p>It's entirely possible that I'm doing something wrong here, or making these calls in the wrong place, but I think more likely is that I'm on the wrong track entirely. There's a hint to disallow high-dpi canvases, so there's probably a simple bool somewhere, or something that I'm missing. I have certainly looked through the wiki, and checked Google, but I can't really find any help for this. Any suggestions or feedback are welcome!</p>\n\n<p>Thank you for your time!</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 1405, "user_id": 646710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad96b8b96de851fe2308338910a2f31e?s=128&d=identicon&r=PG", "display_name": "Sumit", "link": "https://stackoverflow.com/users/646710/sumit"}, "edited": false, "score": 0, "creation_date": 1468471675, "post_id": 38359438, "comment_id": 64143156, "body": "Added more details about my problem, could you please help in that particular scenario."}], "tags": [], "owner": {"reputation": 7393, "user_id": 1690777, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/18ef5bab4c70735313d86c7240e4abed?s=128&d=identicon&r=PG", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1690777/sergey"}, "is_accepted": false, "score": 2, "last_activity_date": 1468484851, "last_edit_date": 1495535330, "creation_date": 1468435363, "answer_id": 38359438, "question_id": 38359119, "link": "https://stackoverflow.com/questions/38359119/in-qt-why-cachekey-differs-for-same-icon/38359438#38359438", "title": "In Qt why cacheKey differs for same icon", "body": "<p>That's because two icons are not <a href=\"http://doc.qt.io/qt-5/qcache.html\" rel=\"nofollow noreferrer\">cached</a> in the same cache and/or not copied from the same object. Look at item 2 of <a href=\"https://stackoverflow.com/a/615767/1690777\">this</a> answer and <a href=\"http://doc.qt.io/qt-5/qicon.html#cacheKey\" rel=\"nofollow noreferrer\">cacheKey</a> documentation.</p>\n\n<p>To get the same cacheKey for different icons you should create an icon object in constructor of your window and call <code>setIcon</code> on it for both CommandLinkButtons.</p>\n\n<p>Update:\nTo compare the icon with a bitmap from file by hash, you need some data-based hashing. Fortunately, Qt provides a bunch of <code>qHash</code> functions and <a href=\"http://doc.qt.io/qt-5/qhash.html#qHashBits\" rel=\"nofollow noreferrer\">qHashBits</a> function for continuous memory blocks. You may compare your images hashes like this:</p>\n\n<pre><code>// assume image and icon object are declared as in your question\nQImage imImage = image.toImage();\nQImage imIcon = ui-&gt;PushButton-&gt;icon().pixmap(QSize(1024,1024)).toImage();\nauto hbImage = qHashBits(imImage.constBits(), imImage.byteCount());\nauto hbIcon = qHashBits(imIcon.constBits(), imIcon.byteCount());\nif(hbImage == hbIcon) {.......}\n</code></pre>\n\n<p>Here we get image raw data in a very clumsy and unnatural way and then compute hashes of it. It's probably not what you want. Hashes returned by qHashBits are not the values returned by cacheKey. Furthermore, these hashes may differ as <code>image</code> is loaded directly from file, while <code>QIcon</code> may perform some processing on it's image during construction. <code>qHashBits</code> comes from Qt's hash table implementation, so it implies that minor changes of input data yield significant changes of returned hash. To compensate possible difference, you may construct <code>QIcon</code> object from <code>image</code> with options same as in the interface, and then obtain icon's data.</p>\n\n<p>And it's not clear from your example, what for to take hashes before comparison? Hashing requires whole data traversal, so it will not be faster that just <code>std::equals</code> on data until you compare thousands of images to one image.</p>\n"}], "owner": {"reputation": 1405, "user_id": 646710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad96b8b96de851fe2308338910a2f31e?s=128&d=identicon&r=PG", "display_name": "Sumit", "link": "https://stackoverflow.com/users/646710/sumit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1468484851, "creation_date": 1468434084, "last_edit_date": 1468471572, "question_id": 38359119, "link": "https://stackoverflow.com/questions/38359119/in-qt-why-cachekey-differs-for-same-icon", "title": "In Qt why cacheKey differs for same icon", "body": "<ul>\n<li>Take a form</li>\n<li>Place two CommandLinkButton(s) on the form</li>\n<li>Place a PushButton on the form</li>\n<li>Right click PushButton-> Go to slot...</li>\n<li>Choose clicked()</li>\n<li>Write following code:</li>\n</ul>\n\n\n\n<pre><code>std::cout &lt;&lt; ui-&gt;commandLinkButton-&gt;icon().cacheKey() &lt;&lt; std::endl;\nstd::cout &lt;&lt; ui-&gt;commandLinkButton_2-&gt;icon().cacheKey() &lt;&lt; std::endl;\n</code></pre>\n\n<p>Why does that code print two different values for the cachekey?\nWe did not change the icon of any CommandLinkButton so both have the same default icon!</p>\n\n<p>My problem is like this:\nI have a push button with an icon on it, which is coming from resources.\nI want to verify in test code that it has the same required icon on it.</p>\n\n<p>To do that I compare the cachekey of image on the push button and cachekey of QPixmap object having same image like this:</p>\n\n\n\n<pre><code>const QPixmap image(\":/MyProject/Images/Yellow_Icon_40x40.png\");\nif(image.cacheKey() == ui-&gt;PushButton-&gt;icon().cacheKey()) \n{\n    cout&lt;&lt;\"OK\";\n}\n</code></pre>\n\n<p>But that test fails because cacheKey turns out to be different.\nSo what is the best way to do that check?\nBasically like calculating hash of image and match that hash, which should always be same for any instance of same image.</p>\n"}, {"tags": ["c++", "xcode", "random", "output"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "edited": false, "score": 0, "creation_date": 1468441515, "post_id": 38359194, "comment_id": 64134509, "body": "Makes sense when you break it down like that! Thank you so much!"}], "tags": [], "owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "is_accepted": true, "score": 1, "last_activity_date": 1468435059, "last_edit_date": 1468435059, "creation_date": 1468434388, "answer_id": 38359194, "question_id": 38359002, "link": "https://stackoverflow.com/questions/38359002/xcode-c-program-result-not-displaying-correct-answer/38359194#38359194", "title": "Xcode C++ Program result not displaying correct answer", "body": "<p>You're outputting <code>symbol</code> after <code>N2</code>, from this line:</p>\n\n<pre><code>cout &lt;&lt; setw(3) &lt;&lt; N2 &lt;&lt; symbol &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>Therefore the actual calculation isn't <code>950 + 921</code> it's <code>950 + 92</code> which <em>is</em> <code>1042</code>.</p>\n\n<p>To fix this, don't output <code>symbol</code>, like so:</p>\n\n<pre><code>cout &lt;&lt; setw(3) &lt;&lt; N2 &lt;&lt; \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 38359194, "answer_count": 1, "score": 2, "last_activity_date": 1468435059, "creation_date": 1468433675, "question_id": 38359002, "link": "https://stackoverflow.com/questions/38359002/xcode-c-program-result-not-displaying-correct-answer", "title": "Xcode C++ Program result not displaying correct answer", "body": "<p>I have a program here that runs addition or subtraction randomly using two randomly generated numbers. The user then has to input the answer and if it right it says \"Correct\" and if it is wrong it says \"Incorrect\" and displays the correct answer. It seems when I run my code that it does not display the correct answer, rather an incorrect answer that it thinks is correct. For example, I ran the code and the problem I got was 950 + 921. The answer should be 1871 but it told me I was incorrect and the right answer, to the program, was 1042. I am not sure where the error is in my code but here it is if you want to take a look:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;ctime&gt;\nusing namespace std;\n\nint main()\n\n{\n    srand(static_cast&lt;unsigned int&gt;(time(NULL)));\n\n    cout &lt;&lt; \"Welcome to the Math Tutor!\" &lt;&lt; endl;\n\n    int N1 = rand() % 999;\n    int N2 = rand() % 100;\n    int symbol = rand() % 2;\n    int Result;\n    int Answer;\n\n    cout &lt;&lt; setw(5) &lt;&lt; N1 &lt;&lt; endl;\n\n    if(symbol == 1)\n    {\n        cout &lt;&lt; \"+\";\n        Result = N1 + N2;\n    }\n\n    else\n    {\n        cout &lt;&lt; \"-\";\n        Result = N1 - N2;\n    }\n\n\n    cout &lt;&lt; setw(3) &lt;&lt; N2 &lt;&lt; symbol &lt;&lt; \"\\n\";\n    cout &lt;&lt; setw(5) &lt;&lt; \"------\\n\\n\";\n\n    cout &lt;&lt; \"Enter your answer: \";\n    cin &gt;&gt; Answer;\n\n    if(Answer == Result)\n    {\n        cout &lt;&lt; \"You are correct!\\n\\n\";\n    }\n\n    else\n    {\n        cout &lt;&lt; \"You are incorrect, the correct answer is: \" &lt;&lt; Result &lt;&lt; \"\\n\\n\";\n    }\n\n    cin.ignore(1);\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1468433348, "post_id": 38358830, "comment_id": 64130089, "body": "But you know that there are some things relevant to whole files, &quot;interactions&quot; between source files, and whole programs too, in the standard? Parts of source code files do not exist in their own vacuum."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1468433403, "post_id": 38358830, "comment_id": 64130122, "body": "What is the point of it?"}, {"owner": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1468433651, "post_id": 38358830, "comment_id": 64130272, "body": "@EugeneSh. -- the idea is to use the compiler to enforce standard compliance.  Even if it&#39;s not feasible to overhaul all of the file&#39;s dependencies to conform to C90 now, it would be useful to be able to assert that the source file under development doesn&#39;t use language constructs unsupported by the old standard."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1468434762, "post_id": 38358830, "comment_id": 64130930, "body": "If you require C90 compliance then it is in your best interest to get there completely and as soon as possible.  The headers used by a given source file are not a separable piece whose compliance you can ignore -- they affect the interpretation and possibly the language conformance of the rest of the file.  The sooner you bite the bullet and make everything conform, the less work that task will take."}, {"owner": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1468434978, "post_id": 38358830, "comment_id": 64131059, "body": "Wouldn&#39;t source that is C99 compliant automagically be C90 compliant?"}, {"owner": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "reply_to_user": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1468435073, "post_id": 38358830, "comment_id": 64131103, "body": "@Great.And.Powerful.Oz -- I think you&#39;ve got that the other way around.  Code that&#39;s C99 compliant may use language constructs and features that aren&#39;t present or allowed in C90."}, {"owner": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1468435168, "post_id": 38358830, "comment_id": 64131159, "body": "@JackO&#39;Reilly, of course. ahh, wait, durrrr. Of course. Got it."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1468436936, "post_id": 38358830, "comment_id": 64132162, "body": "Pay no attention to the man behind the curtain.  @Great.And.Powerful.Oz."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1468440747, "post_id": 38358830, "comment_id": 64134137, "body": "@Great.And.Powerful.Oz: There are incompatibilities, resp. clarifications in  C99 compared to mideval C (more for ancient C). And there might be problems arising from passing C99 constructs to the older version. Briefly: that cannot be answered without a full review."}], "answers": [{"comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1468433544, "post_id": 38358901, "comment_id": 64130204, "body": "An alternative solution would be to ensure all code compiles with the older language standard, and just use that.   That means converting the headers to avoid C99 features."}, {"owner": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "edited": false, "score": 0, "creation_date": 1468433562, "post_id": 38358901, "comment_id": 64130216, "body": "Thanks for the answer.  I considered splitting the file into two, but won&#39;t the file with the stricter compliance still need to include the same headers and run into the same problem?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1468433688, "post_id": 38358901, "comment_id": 64130304, "body": "@Peter Sure, but if you have to edit the code to comply with either older or newer standard it seems counterproductive going forward to aim for the older."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "edited": false, "score": 0, "creation_date": 1468433839, "post_id": 38358901, "comment_id": 64130393, "body": "@Jack O&#39;Reilly Maybe. That depends on what headers are needed by either of the new files. I&#39;d say that going for making all the code compile with the same language standard is the most sane way forward that will cause the fewest headaches going forward. Including fixing your headers if you insist on the older standard."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1468433863, "post_id": 38358901, "comment_id": 64130404, "body": "@Jesper - if the requirement is to build compilation units as C90 (e.g. to maintain backward compatibility so it is possible to build on a system with no C99 compiler) then the requirement becomes &quot;avoid C99 features&quot;, not &quot;update to newer language standard&quot;."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1468434059, "post_id": 38358901, "comment_id": 64130511, "body": "@Peter Right. But C90 is 26 years old by now, so maybe OP should reconsider that requirement and go for C99 (or even C11) instead ;-)"}, {"owner": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "edited": false, "score": 0, "creation_date": 1468434379, "post_id": 38358901, "comment_id": 64130704, "body": "@JesperJuhl if only!  This requirement wasn&#39;t my idea."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1468434462, "post_id": 38358901, "comment_id": 64130768, "body": "@Jesper - The OP has said he needs to maintain C90 compliance.   We don&#39;t know if that requirement is an arbitrary choice on his part, or something that is beyond his control.   If it is beyond his control, a suggestion to update to C99 is useless, and options to maintain C90 compatibility are needed."}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1468434604, "post_id": 38358901, "comment_id": 64130843, "body": "The problem with splitting is when it comes to header files with class/method templates for which one cannot create separate compilation units..."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 3, "last_activity_date": 1468434696, "last_edit_date": 1468434696, "creation_date": 1468433350, "answer_id": 38358901, "question_id": 38358830, "link": "https://stackoverflow.com/questions/38358830/apply-language-standard-to-just-part-of-a-source-file/38358901#38358901", "title": "Apply language standard to just part of a source file?", "body": "<p>No. You cannot build a file (compilation unit) as partly one language standard and partly another.</p>\n\n<p>What you <em>can</em> do however is split the file into two files and compile each of them using different language standards (just be sure that it is then still well defined to link both object files afterwards).</p>\n\n<p>A better solution would be to ensure that <em>all</em> the code complies with the newer or older language standard and then just use that.</p>\n"}, {"comments": [{"owner": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "edited": false, "score": 0, "creation_date": 1468436635, "post_id": 38359353, "comment_id": 64132001, "body": "Marked this as accepted since it solves my problem directly (to warn / error on compatibility issues for arbitrary sections of code).  Apologies to Jesper Juhl, whose answer technically addresses the question as asked more directly."}, {"owner": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "edited": false, "score": 0, "creation_date": 1468436881, "post_id": 38359353, "comment_id": 64132128, "body": "An additional note: ironically, this only theoretically solves my problem, as the warning flag noted here is only present for GCC 5 and beyond -- sadly unavailable on my platform.  Still, one could enable the warning and assert compliance by testing a compile with a newer GCC."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "edited": false, "score": 0, "creation_date": 1468438312, "post_id": 38359353, "comment_id": 64132838, "body": "@JackO&#39;Reilly: GCC 5 will probably arrive on your platform pretty soon."}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": true, "score": 3, "last_activity_date": 1468434987, "creation_date": 1468434987, "answer_id": 38359353, "question_id": 38358830, "link": "https://stackoverflow.com/questions/38358830/apply-language-standard-to-just-part-of-a-source-file/38359353#38359353", "title": "Apply language standard to just part of a source file?", "body": "<p>If you want to make sure your code is C90 compatible while still relying on headers that use C99, you can enable the GCC warning flag <code>-Wc90-c99-compat</code>.  This allows you to use C99 features, but emits a warning wherever you use features not available in C90.  To avoid generating these warnings in your header files (which are presumably correct), enable the warning using a pragma, after you include the files.</p>\n\n<p>This will basically achieve what you want.  The warnings will only be emitted for the code you specify.</p>\n\n<pre><code>#include \"myheader.h\"\n\n#pragma GCC diagnostic warning \"-Wc90-c99-compat\"\n\nvoid func(void) { ... }\n</code></pre>\n\n<p>A stricter version would be to use:</p>\n\n<pre><code>#pragma GCC diagnostic error \"-Wc90-c99-compat\"\n</code></pre>\n\n<p>As far as I know, Clang is mostly compatible, but MSVC doesn't really support C99 that well to begin with so you're on your own.</p>\n"}], "owner": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 38359353, "answer_count": 2, "score": 1, "last_activity_date": 1468434987, "creation_date": 1468433079, "question_id": 38358830, "link": "https://stackoverflow.com/questions/38358830/apply-language-standard-to-just-part-of-a-source-file", "title": "Apply language standard to just part of a source file?", "body": "<p>Is it possible to enforce a C or C++ language standard for just part of a source file?  I want to ensure that my source file is C90 compliant, but it depends on some headers that require C99.  The compliance of those headers isn't important to me right now (I can compile with C99 for the time being), but I want to minimize effort required to port my code to a more restrictive platform in the future.</p>\n\n<p>In short, I want a language standard to apply to the entire file except for the included headers.  Given how header inclusion works in C and C++, I figure that the general problem is to apply a language standard to an arbitrary portion of a given source file.</p>\n\n<p>I'm working with GCC in particular, but I'm also curious if this is possible with other compilers (msvc, clang).</p>\n"}, {"tags": ["c++", "mysql", "linux", "memory-management", "debian"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1468432820, "post_id": 38358669, "comment_id": 64129765, "body": "You&#39;re leaking memory somehow. Also <code>!= NULL</code> is not necessary."}, {"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1468433038, "post_id": 38358669, "comment_id": 64129902, "body": "Eliminate suspect lines until the leak goes away."}, {"owner": {"reputation": 15207, "user_id": 4104224, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1UvuxsNkn9w/AAAAAAAAAAI/AAAAAAAAA10/vjzWlg3BR-U/photo.jpg?sz=128", "display_name": "Uueerdo", "link": "https://stackoverflow.com/users/4104224/uueerdo"}, "edited": false, "score": 0, "creation_date": 1468433222, "post_id": 38358669, "comment_id": 64130027, "body": "I&#39;ve only relatively recently started to re-hone my C++ skills after a long stint in VBA, and shorter more recent one in C#, so I may be guessing completely wrong, but... do <code>error_exit()</code> and <code>mysql_close()</code> free up the memory used by the connection instances initialized &quot;twice a second&quot;?"}, {"owner": {"reputation": 3, "user_id": 6585782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06558c5beb56064fdb4c5d88877791e?s=128&d=identicon&r=PG&f=1", "display_name": "Bardai", "link": "https://stackoverflow.com/users/6585782/bardai"}, "edited": false, "score": 0, "creation_date": 1468435528, "post_id": 38358669, "comment_id": 64131376, "body": "i think so, but i may be wrong here. <a href=\"http://dev.mysql.com/doc/refman/5.7/en/mysql-close.html\" rel=\"nofollow noreferrer\">Documentation of mysql_close</a>  also the <a href=\"http://dev.mysql.com/doc/refman/5.7/en/mysql-init.html\" rel=\"nofollow noreferrer\">Documentation of mysql_init</a> says &quot;If mysql_init() allocates a new object, it is freed when mysql_close() is called to close the connection.&quot;  error_exit uses mysql_close()."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6585782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06558c5beb56064fdb4c5d88877791e?s=128&d=identicon&r=PG&f=1", "display_name": "Bardai", "link": "https://stackoverflow.com/users/6585782/bardai"}, "edited": false, "score": 0, "creation_date": 1468435023, "post_id": 38358865, "comment_id": 64131081, "body": "thank you! that was very helpfull. I am going to test this tomorrow, but that seems to be at least one issue."}], "tags": [], "owner": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "is_accepted": true, "score": 3, "last_activity_date": 1468433231, "creation_date": 1468433231, "answer_id": 38358865, "question_id": 38358669, "link": "https://stackoverflow.com/questions/38358669/memory-usage-of-c-program-grows-shown-in-debians-top-until-it-crashes/38358865#38358865", "title": "Memory usage of C++ program grows, (shown in Debian&#39;s &quot;top&quot;), until it crashes", "body": "<p>At least mysql_store_result is leaking. From <a href=\"http://dev.mysql.com/doc/refman/5.7/en/mysql-store-result.html\" rel=\"nofollow\">documentation</a>:</p>\n\n<blockquote>\n  <p>After invoking mysql_query() or mysql_real_query(), you must call mysql_store_result() or mysql_use_result() for every statement that successfully produces a result set (SELECT, SHOW, DESCRIBE, EXPLAIN, CHECK TABLE, and so forth). <strong>You must also call mysql_free_result() after you are done with the result set.</strong> </p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 22991, "user_id": 1169096, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b4d93e08b2830786a7992e8af35514c6?s=128&d=identicon&r=PG", "display_name": "uml&#228;ute", "link": "https://stackoverflow.com/users/1169096/uml%c3%a4ute"}, "is_accepted": false, "score": 0, "last_activity_date": 1468481361, "creation_date": 1468481361, "answer_id": 38368081, "question_id": 38358669, "link": "https://stackoverflow.com/questions/38358669/memory-usage-of-c-program-grows-shown-in-debians-top-until-it-crashes/38368081#38368081", "title": "Memory usage of C++ program grows, (shown in Debian&#39;s &quot;top&quot;), until it crashes", "body": "<p>If your program continuously consumes memory (without ever releasing it), then you have a <em>memory leak</em>.</p>\n\n<p>A good way to detect memory leaks, is to run it through a memory debugger, e.g. <code>valgrind</code>:</p>\n\n<pre><code>$ valgrind /path/to/my/program\n</code></pre>\n\n<p>Once your program started eating memory, stop it and valgrind will give you a nice summary about where your program allocated memory that was never freed. </p>\n\n<p>There is no need to let the system run out of memory and crash; just wait until it has eaten <em>some</em> memory that has not been freed. Then fix your code. Then repeat until no more memory errors can be detected.</p>\n\n<p>Also note that valgrind intercepts your systems memory management. This usually results in a (<em>severe</em>) performance penalty.</p>\n"}], "owner": {"reputation": 3, "user_id": 6585782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06558c5beb56064fdb4c5d88877791e?s=128&d=identicon&r=PG&f=1", "display_name": "Bardai", "link": "https://stackoverflow.com/users/6585782/bardai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 38358865, "answer_count": 2, "score": 0, "last_activity_date": 1468481361, "creation_date": 1468432569, "last_edit_date": 1468462245, "question_id": 38358669, "link": "https://stackoverflow.com/questions/38358669/memory-usage-of-c-program-grows-shown-in-debians-top-until-it-crashes", "title": "Memory usage of C++ program grows, (shown in Debian&#39;s &quot;top&quot;), until it crashes", "body": "<p>I'm working on a <em>C++</em> program that should be able to run for several days, so it is a bit of a hassle that its memory consumption seems to grow really fast. </p>\n\n<p>The full code of the program is a little long, so I'll post just the related things. The structure is the following:</p>\n\n<pre><code>int main (void){\n//initialization of the global variables\nerror = 0;\nstate = 0;\ncycle = 0;\nexportcycle = 0;\nstatus = 0;\ncounter_temp_ctrl = 0;\nstart = 0;\nstop = 0;\n\n\ninittimer();\nmysql_del (\"TempMeas\");\nmysql_del (\"TempMeasHist\");\nmysql_del (\"MyControl\");\nmysql_del (\"MyStatus\");\ninitmysql();\n\n\n\nwhile(1){\n\n    statemachine();\n\n    pause();\n\n    }\n\n}\n</code></pre>\n\n<p>The timer function that is initialized above is the following:</p>\n\n<pre><code>void catch_alarm (int sig)\n{\n//Set the statemachine to state 1 (reading in new values)\n\n    start = readmysql(\"MyStatus\", \"Start\", 0);\n    stop = readmysql(\"MyStatus\", \"Stop\", 0);\n\n       if (start == 1){\n            state = 1;\n      }\n      if (stop == 1){\n            state = 5;\n      }\n\n\n  //printf(\"Alarm event\\n\");\n  signal (sig, catch_alarm);\n\n  return void();\n}\n</code></pre>\n\n<p>So basically, since I'm not setting the start bit in the webinterface that modifies the MyStatus Tab the program just calls the <em>readmysql</em> function twice every second (the timer's interval). The <em>readmysql</em> function is given below:</p>\n\n<pre><code>float readmysql(string table, string row, int lastvalue){\nfloat readdata = 0;\n\n// Initialize a connection to MySQL\nMYSQL_RES *mysql_res;\nMYSQL_ROW mysqlrow;\nMYSQL *con = mysql_init(NULL);\nif(con == NULL)\n{\nerror_exit(con);\n}\n\n\nif (mysql_real_connect(con, \"localhost\", \"user1\", \"user1\", \"TempDB\", 0, NULL, 0) == NULL)\n{\nerror_exit(con);\n}\n\nif (lastvalue == 1){\n    string qu = \"Select \"+ row +\" from \"+ table +\" AS a where MeasTime=(select MAX(MeasTime) from \"+ table;\n    error = mysql_query(con, qu.c_str());\n}\nelse{\n    string qu = \"Select \"+ row +\" from \"+ table;\n    error = mysql_query(con, qu.c_str());\n}\n\n\nmysql_res = mysql_store_result(con);\n\nwhile((mysqlrow = mysql_fetch_row(mysql_res)) != NULL)\n{\n    readdata = atoi(mysqlrow[0]);\n}\n\n//cout &lt;&lt; \"readdata \"+table+ \" \"+row+\" = \" &lt;&lt; readdata &lt;&lt; endl;\n\n// Close the MySQL connection\nmysql_close(con);\n\n//delete mysql_res;\n//delete mysqlrow;\n\n\nreturn readdata;\n}\n</code></pre>\n\n<p>I thought that the variables in this function are stored on the stack and are freed automaticaly when leaving the function. However it seems that some part of the memory is not freed, because it just grows after all. As you can see I have tried to use the delete function on two of the variables. Seems to have no effect. What am i doing wrong in terms of memory-management and so on?</p>\n\n<p>Thanks for your help!</p>\n\n<p>Greetings Oliver.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 4, "creation_date": 1468432773, "post_id": 38358583, "comment_id": 64129729, "body": "Since you essentially want a folder picker dialog, use the <code>Directory</code> <a href=\"http://doc.qt.io/qt-5/qfiledialog.html#FileMode-enum\" rel=\"nofollow noreferrer\">QFileDialog::FileMode</a>."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1468432787, "post_id": 38358583, "comment_id": 64129742, "body": "You&#39;ll have to make a custom dialog to do that. But I&#39;d suggest <i>not</i> presenting the dialog. what are you trying to allow them to do with the dialog if you won;t let them change the name."}, {"owner": {"reputation": 792, "user_id": 3183610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98f2b0aff981925dc8c789fa9cfe1134?s=128&d=identicon&r=PG&f=1", "display_name": "m. c.", "link": "https://stackoverflow.com/users/3183610/m-c"}, "edited": false, "score": 0, "creation_date": 1468449486, "post_id": 38358583, "comment_id": 64138002, "body": "If name is not changeable, why not just use a message box, asking user if they want to save to the file, if they click YES, then save the file."}], "answers": [{"tags": [], "owner": {"reputation": 566, "user_id": 5998466, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LJotP.jpg?s=128&g=1", "display_name": "Bearded Beaver", "link": "https://stackoverflow.com/users/5998466/bearded-beaver"}, "is_accepted": false, "score": 0, "last_activity_date": 1468473297, "creation_date": 1468473297, "answer_id": 38365974, "question_id": 38358583, "link": "https://stackoverflow.com/questions/38358583/qfiledialog-saving-a-file-with-specified-file-name/38365974#38365974", "title": "QFileDialog - Saving a file with specified file name", "body": "<p>If you want to choose the folder to save commands.txt use <code>QFileDialog::getExistingDirectory</code> and save the file into the specified folder. Don't forget to check returned string <code>isEmpty()</code>, this means that user clicked \"cancel\".</p>\n\n<p>If you want to let user decide to save commands.txt or not use <code>QMessageBox</code> with Yes and No buttons.</p>\n"}], "owner": {"reputation": 43, "user_id": 6539328, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ed9a01458d9b8a38db80ca5cddcb3882?s=128&d=identicon&r=PG&f=1", "display_name": "xcyl40", "link": "https://stackoverflow.com/users/6539328/xcyl40"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 784, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468473297, "creation_date": 1468432324, "question_id": 38358583, "link": "https://stackoverflow.com/questions/38358583/qfiledialog-saving-a-file-with-specified-file-name", "title": "QFileDialog - Saving a file with specified file name", "body": "<p>How can I let the user save a file using QFileDialog without allowing the user to change the file name?</p>\n\n<p>I have been using this code:</p>\n\n<pre><code>QString fileName = QFileDialog::getSaveFileName(this, tr(\"Save File\"),\"commands.txt\", tr(\"TXT files (*.txt)\"));\n</code></pre>\n\n<p>However, it allows the user to change the file name. I want it so that the user can't change the file name and can only save the file under \"commands.txt\".</p>\n"}, {"tags": ["c++", "try-catch"], "comments": [{"owner": {"reputation": 14761, "user_id": 290072, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ITEsv.png?s=128&g=1", "display_name": "Almo", "link": "https://stackoverflow.com/users/290072/almo"}, "edited": false, "score": 3, "creation_date": 1468432200, "post_id": 38358534, "comment_id": 64129339, "body": "Use a profiler to figure it out. I find it highly unlikely any performance hit would be noticable."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1468432286, "post_id": 38358534, "comment_id": 64129395, "body": "Ten seconds on how many iterations?"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "reply_to_user": {"reputation": 14761, "user_id": 290072, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ITEsv.png?s=128&g=1", "display_name": "Almo", "link": "https://stackoverflow.com/users/290072/almo"}, "edited": false, "score": 0, "creation_date": 1468432295, "post_id": 38358534, "comment_id": 64129401, "body": "Does enabling try/catch affect performance?  A little yes.  10 seconds?  Maybe if you were running it for a few days.  @Almo is correct - profile and see where the issue really is."}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 1, "creation_date": 1468432624, "post_id": 38358534, "comment_id": 64129611, "body": "It depends on your platform, and even with Visual Studio, it depends on whether you target x86, x86_64 or ARM. C++ exceptions on Windows use SEH. Setting up an exception handler has a cost, but it should be almost negligible; it should certainly not take 10 seconds."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1468432897, "post_id": 38358534, "comment_id": 64129808, "body": "Did you turn on optimizations (which is sort of the same as doing a Release build)?"}, {"owner": {"reputation": 51, "user_id": 6585806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/695d43577eda9044b90cbf10fca01e70?s=128&d=identicon&r=PG&f=1", "display_name": "Man Kun", "link": "https://stackoverflow.com/users/6585806/man-kun"}, "edited": false, "score": 0, "creation_date": 1468433028, "post_id": 38358534, "comment_id": 64129896, "body": "Optimizations are off. Its a debug build. 10 seconds difference is in V- tune for foo after running an application that hits foo() 100+ times."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 7, "creation_date": 1468435291, "post_id": 38358534, "comment_id": 64131232, "body": "Profiling a debug build without optimization is pointless. Lots of extra (expensive) sanity checking code that affects performance is generated in addition to your code not being optimized. Test an optimized build and I&#39;m sure the compiler will remove all the overhead you are seeing."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1468451714, "post_id": 38358534, "comment_id": 64138693, "body": "Suggest adding a tag for the particular compiler versiou you are using"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1468486610, "post_id": 38358534, "comment_id": 64150429, "body": "With optimizations, any compiler worth its salt will produce byte-for-byte identical object code for the two cases. Even profiling without optimization (a totally useless waste of time) there&#39;s no reason whatsoever for the second program to be faster by such a huge amount  --- if anything, it should be a little bit slower. You are probably not measuring what you think you are measuring."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1468451789, "post_id": 38361106, "comment_id": 64138712, "body": "well, this is not true in general - for dwarf2 there is no penalty for <code>try</code> blocks that do not actually throw."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1468484382, "post_id": 38361106, "comment_id": 64148979, "body": "That would be your browser&#39;s built-in spell checker flagging &quot;derogatively.&quot; Stack Overflow doesn&#39;t have a spell-check feature, nor does it have a dirty word filter (at least, not for answers...it does for certain words in question titles)."}], "tags": [], "owner": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "is_accepted": false, "score": 0, "last_activity_date": 1468441586, "creation_date": 1468441586, "answer_id": 38361106, "question_id": 38358534, "link": "https://stackoverflow.com/questions/38358534/does-try-catch-in-c-affect-performance-when-not-hit/38361106#38361106", "title": "Does try catch in C++ affect performance when not hit", "body": "<p>All of the above comments seem to converge toward a useful point or two.  Extra apparatus always engages more CPU cycles and thus derogatively affects performance (I can't believe this editing box flagged \"derogatively\").  Many iterations over many instances are required. </p>\n"}, {"comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1468484124, "post_id": 38368611, "comment_id": 64148816, "body": "The difference with Microsoft&#39;s compiler is not the version you&#39;re using, but whether you are targeting x86-32 or x86-64. All versions will use the frame-based approach for 32-bit builds, whereas all versions will use the table-based approach for 64-bit builds (and for <i>all</i> other architectures, like Itanium, Alpha, PowerPC etc.). It is just x86-32 that is the odd man out, using the frame-based approach for exception handling as it does, and this will be true even on the latest version of the compiler. They can&#39;t change it now for backwards compatibility reasons."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1468484300, "post_id": 38368611, "comment_id": 64148918, "body": "More specifically, for the frame-based implementation on x86-32, active exception handlers are stored in a singly-linked list, and a pointer to this list is stored in the Thread Environment Block (TEB). When an exception occurs, the OS walks through that list, looking for a suitable handler. If it finds one, it executes it and unwinds the stack. If not, it invokes the unhandled exception handler. On x86-64 and all other table-based implementations, the compiler emits the tables in the code. This is faster at run-time, but bloats the size of the binary."}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1468484769, "post_id": 38368611, "comment_id": 64149269, "body": "@CodyGray Aren&#39;t you mixing here SEH used by Windows itself and its API (Pascal-rooted) with C++ language exceptions implemented by <code>try</code>/<code>catch</code> blocks? AFAIK they are not exactly the same things."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1468484829, "post_id": 38368611, "comment_id": 64149311, "body": "Microsoft&#39;s compiler implements C++ exceptions using SEH. I&#39;m not sure if that&#39;s true for <i>all</i> compilers (e.g., GCC, Clang, etc.), but it certainly is true for Visual C++."}], "tags": [], "owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "is_accepted": false, "score": 2, "last_activity_date": 1468483135, "creation_date": 1468483135, "answer_id": 38368611, "question_id": 38358534, "link": "https://stackoverflow.com/questions/38358534/does-try-catch-in-c-affect-performance-when-not-hit/38368611#38368611", "title": "Does try catch in C++ affect performance when not hit", "body": "<p>There are 2 major policies used in exception mechanism implementation. One is so-called \"frame based\", or \"dynamic\" and another one is \"table based\". Other schemes are variations of those two. You can read more about them <a href=\"https://en.wikipedia.org/wiki/Exception_handling#Exception_handling_implementation\" rel=\"nofollow\">here</a>  </p>\n\n<p>In essence, \"frame-based\" dynamic implementation does spend resources on each entry into and exit from <code>try</code> block at run-time. The \"table based\" mechanism does not involve any extra work if exception is not thrown but it uses much more memory.</p>\n\n<p>I am not 100% sure but as far as I know Microsoft compiler up till VS2008 used \"frame-based\" approach and starting from VS2010 it implements \"table-based\" approach. (Maybe there are some compiler switches that can control it - I don't know because I personally prefer not to use exceptions until forced by existing code or 3rd party libraries). I think you can find this information in your compiler documentation.</p>\n\n<p>You could also produce assembler code from your c++ source to see what is going on with your <code>try</code> block  </p>\n"}], "owner": {"reputation": 51, "user_id": 6585806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/695d43577eda9044b90cbf10fca01e70?s=128&d=identicon&r=PG&f=1", "display_name": "Man Kun", "link": "https://stackoverflow.com/users/6585806/man-kun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1829, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1468483135, "creation_date": 1468432155, "question_id": 38358534, "link": "https://stackoverflow.com/questions/38358534/does-try-catch-in-c-affect-performance-when-not-hit", "title": "Does try catch in C++ affect performance when not hit", "body": "<p>I have code where there is a try catch in a function and the function gets hit. 100+ times. The code return early everytime without actually hitting the try catch. Does this affect performance in Visual Studio. I am seeing a performance impact. </p>\n\n<p>My code was :</p>\n\n<pre><code>void foo(int a) {\n if (a &gt; value) {\n    return;\n }\n try {\n    possibleErrorFunction();\n } catch {\n }\n}\n</code></pre>\n\n<p>I changed it to:</p>\n\n<pre><code>void foo(int a) {\nif (a &gt; value) {\n    return;\n}\nbar();\n}\n\nvoid bar() {\ntry {\n    possibleErrorFunction();\n} catch {\n}\n}\n</code></pre>\n\n<p>The second code seems about 10 sec faster. Is there any resaonable explanation for this?</p>\n"}, {"tags": ["c++", "parallel-processing", "mpi"], "comments": [{"owner": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "edited": false, "score": 2, "creation_date": 1468499203, "post_id": 38358520, "comment_id": 64158708, "body": "That last paragraph looks as if it should carry attribution."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 2, "creation_date": 1468515419, "post_id": 38358520, "comment_id": 64169936, "body": ".... and is completely superfluous to the question. Smells like copied from an assignment which was in turn copied from Wikipedia. Obviously the same for the code."}], "owner": {"reputation": 1, "user_id": 6558162, "user_type": "registered", "profile_image": "https://graph.facebook.com/919494441493241/picture?type=large", "display_name": "Hiel Oliveira", "link": "https://stackoverflow.com/users/6558162/hiel-oliveira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 819, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1468432105, "creation_date": 1468432105, "question_id": 38358520, "link": "https://stackoverflow.com/questions/38358520/how-to-parallel-prim-s-algorithm-using-mpi-in-c", "title": "How to Parallel Prim\u2019s Algorithm using MPI in C?", "body": "<p>The code in sequencial</p>\n\n<p><strong>Now i need to parellel using MPI (Message Passing Interface)</strong></p>\n\n<pre><code> // A C / C++ program for Prim's Minimum Spanning Tree (MST) algorithm.\n// The program is for adjacency matrix representation of the graph\n\n#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\n\n// Number of vertices in the graph\n#define V 5\n\n// A utility function to find the vertex with minimum key value, from\n// the set of vertices not yet included in MST\nint minKey(int key[], bool mstSet[])\n{\n   // Initialize min value\n   int min = INT_MAX, min_index;\n\n   for (int v = 0; v &lt; V; v++)\n     if (mstSet[v] == false &amp;&amp; key[v] &lt; min)\n         min = key[v], min_index = v;\n\n   return min_index;\n}\n\n// A utility function to print the constructed MST stored in parent[]\nint printMST(int parent[], int n, int graph[V][V])\n{\n   printf(\"Edge   Weight\\n\");\n\n   for (int i = 1; i &lt; V; i++)\n      printf(\"Threads %d - %d - %d    %d \\n\", parent[i], i, graph[i][parent[i]]);\n}\n\n// Function to construct and print MST for a graph represented using adjacency\n// matrix representation\nvoid primMST(int graph[V][V])\n{\n     int parent[V]; // Array to store constructed MST\n     int key[V];   // Key values used to pick minimum weight edge in cut\n     bool mstSet[V];  // To represent set of vertices not yet included in MST\n\n     // Initialize all keys as INFINITE\n\n     for (int i = 0; i &lt; V; i++)\n        key[i] = INT_MAX, mstSet[i] = false;\n\n     // Always include first 1st vertex in MST.\n     key[0] = 0;     // Make key 0 so that this vertex is picked as first vertex\n     parent[0] = -1; // First node is always root of MST\n\n     // The MST will have V vertices\n\n     for (int count = 0; count &lt; V-1; count++)\n     {\n        // Pick thd minimum key vertex from the set of vertices\n        // not yet included in MST\n        int u = minKey(key, mstSet);\n\n        // Add the picked vertex to the MST Set\n        mstSet[u] = true;\n\n        // Update key value and parent index of the adjacent vertices of\n        // the picked vertex. Consider only those vertices which are not yet\n        // included in MST\n\n        for (int v = 0; v &lt; V; v++)\n\n           // graph[u][v] is non zero only for adjacent vertices of m\n           // mstSet[v] is false for vertices not yet included in MST\n           // Update the key only if graph[u][v] is smaller than key[v]\n          if (graph[u][v] &amp;&amp; mstSet[v] == false &amp;&amp; graph[u][v] &lt;  key[v])\n             parent[v]  = u, key[v] = graph[u][v];\n     }\n\n     // print the constructed MST\n     printMST(parent, V, graph);\n}\n\n\n// driver program to test above function\nint main()\n{\n   /* Let us create the following graph\n          2    3\n      (0)--(1)--(2)\n       |   / \\   |\n      6| 8/   \\5 |7\n       | /     \\ |\n      (3)-------(4)\n            9          */\n   int graph[V][V] = {{0, 2, 0, 6, 0},\n                      {2, 0, 3, 8, 5},\n                      {0, 3, 0, 0, 7},\n                      {6, 8, 0, 0, 9},\n                      {0, 5, 7, 9, 0},\n                     };\n\n    // Print the solution\n    primMST(graph);\n\n    return 0;\n}\n</code></pre>\n\n<p>Message Passing Interface (MPI) is a standardized and portable message-passing system designed by a group of researchers from academia and industry to function on a wide variety of parallel computers. The standard defines the syntax and semantics of a core of library routines useful to a wide range of users writing portable message-passing programs in C, C++, and Fortran. There are several well-tested and efficient implementations of MPI, many of which are open-source or in the public domain. These fostered the development of a parallel software industry, and encouraged development of portable and scalable large-scale parallel applications.</p>\n"}, {"tags": ["c++", "regex", "c++11"], "comments": [{"owner": {"reputation": 658, "user_id": 6177689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/o5C91.jpg?s=128&g=1", "display_name": "Ingenioushax", "link": "https://stackoverflow.com/users/6177689/ingenioushax"}, "edited": false, "score": 0, "creation_date": 1468432021, "post_id": 38358390, "comment_id": 64129235, "body": "That regular expression basically results in the following: Find something that starts with an &#39;o&#39;. The next character can be any number of &#39;o&#39;s as long as it ends or has a single alphabetic character. But I think what you want, is a <b>lookahead</b> or a <b>Lookbehind</b> I think. If you want to match inside the match <a href=\"http://www.regular-expressions.info/lookaround.html\" rel=\"nofollow noreferrer\">Regular-Expressions.info</a>. If you just want the entire string as long as it starts with an &#39;o&#39;, just add a <code>*</code> to the <code>[a-z]</code> so it&#39;s <code>[a-z]*</code>"}, {"owner": {"reputation": 89, "user_id": 6395305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca1347f5f12dc9464833d543867e4fe?s=128&d=identicon&r=PG&f=1", "display_name": "lissachen", "link": "https://stackoverflow.com/users/6395305/lissachen"}, "reply_to_user": {"reputation": 658, "user_id": 6177689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/o5C91.jpg?s=128&g=1", "display_name": "Ingenioushax", "link": "https://stackoverflow.com/users/6177689/ingenioushax"}, "edited": false, "score": 0, "creation_date": 1468432731, "post_id": 38358390, "comment_id": 64129702, "body": "Thanks. I&#39;m reading into the reference but it&#39;s quite difficult for me to understand.  Any chance you could provide a code sample on how I would use a <b>lookaround</b>?"}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1468433213, "post_id": 38358715, "comment_id": 64130022, "body": "Use <code>o+</code> not <code>oo*</code>."}, {"owner": {"reputation": 89, "user_id": 6395305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca1347f5f12dc9464833d543867e4fe?s=128&d=identicon&r=PG&f=1", "display_name": "lissachen", "link": "https://stackoverflow.com/users/6395305/lissachen"}, "edited": false, "score": 0, "creation_date": 1468433636, "post_id": 38358715, "comment_id": 64130263, "body": "I tried replacing my regex pattern string <code>&quot;o+[a-z]&quot;</code> with <code>&quot;(?=(o+[a-z]))&quot;</code>. Now my code just runs printing empty newlines indefinitely.  Not sure what I&#39;m doing wrong but the lookforward looks very helpful indeed and I&#39;m just trying to figure how to incorporate it into my original code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 89, "user_id": 6395305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca1347f5f12dc9464833d543867e4fe?s=128&d=identicon&r=PG&f=1", "display_name": "lissachen", "link": "https://stackoverflow.com/users/6395305/lissachen"}, "edited": false, "score": 0, "creation_date": 1468433814, "post_id": 38358715, "comment_id": 64130377, "body": "@lissachen - The whole idea is that even though there was a <i>match</i>, capture group 0 (the overall match) is empty. You won&#39;t be able to see that. However, you can access the sub-match, i.e. group 1 <code>$1</code> and print that out. Change the iterator syntax, not sure but it could be <code>it-&gt;[1].str()</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1468434289, "post_id": 38358715, "comment_id": 64130643, "body": "Or, it&#39;s something like <code>cout &lt;&lt; (*it)[1].first &lt;&lt; endl;</code> where <code>[1]</code> is sub-match 1 (group 1)."}, {"owner": {"reputation": 89, "user_id": 6395305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca1347f5f12dc9464833d543867e4fe?s=128&d=identicon&r=PG&f=1", "display_name": "lissachen", "link": "https://stackoverflow.com/users/6395305/lissachen"}, "edited": false, "score": 0, "creation_date": 1468434989, "post_id": 38358715, "comment_id": 64131069, "body": "Hmm... <code>it-&gt;size()</code> is returning 2 and I&#39;m printing <code>oook</code> and an empty string with <code>for (int i = 0; i &lt; it-&gt;size(); i++) cout &lt;&lt; it-&gt;str(i) &lt;&lt; endl; </code>. Getting closer but still have to figure out how to adjust my <code>sregex_iterator</code>s as I&#39;m printing <code>oook</code> and the empty string in an infinite loop."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 89, "user_id": 6395305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca1347f5f12dc9464833d543867e4fe?s=128&d=identicon&r=PG&f=1", "display_name": "lissachen", "link": "https://stackoverflow.com/users/6395305/lissachen"}, "edited": false, "score": 0, "creation_date": 1468436036, "post_id": 38358715, "comment_id": 64131684, "body": "@lissachen - If it won&#39;t bump along by itself, do it manually <code>(?=(o+[a-z]))o</code>  But, C++::regex gets it&#39;s origins from <i>boost::regex</i>  which does bump along. Engines that <i>don&#39;t</i> do that are susceptible to crashing as it enters into infinite loops, which is undesirable."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1468436204, "post_id": 38358715, "comment_id": 64131777, "body": "I guess there is always <code>string str((*it)[1].first, (*it)[1].second)</code> if you need to make a string out of it. <code>(*it)[1].first</code> is just a (char*) which cout should know what to do with. Remember that <code>dereferencing a regex_iterator object it yields a const reference to a match_results</code> but, you still have to <i>index</i> the sub-expressions."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1468436781, "post_id": 38358715, "comment_id": 64132081, "body": "And, might want to change <code>it++;</code> to <code>++it;</code> not sure why but it shows that way in some boost examples."}, {"owner": {"reputation": 89, "user_id": 6395305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca1347f5f12dc9464833d543867e4fe?s=128&d=identicon&r=PG&f=1", "display_name": "lissachen", "link": "https://stackoverflow.com/users/6395305/lissachen"}, "edited": false, "score": 0, "creation_date": 1468438091, "post_id": 38358715, "comment_id": 64132731, "body": "<code>++it</code> over <code>it++</code> usually matters if you are removing from an iterated set."}, {"owner": {"reputation": 89, "user_id": 6395305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca1347f5f12dc9464833d543867e4fe?s=128&d=identicon&r=PG&f=1", "display_name": "lissachen", "link": "https://stackoverflow.com/users/6395305/lissachen"}, "edited": false, "score": 0, "creation_date": 1468438193, "post_id": 38358715, "comment_id": 64132768, "body": "@sln can you explain how the <code>o</code> at the back of <code>(?=(o+[a-z]))o</code> manually bumps along the regex?  I couldn&#39;t find documentation saying C++ does not bump automatically or documentation on how to bump a regex along.  And why is it the character <code>o</code>?"}, {"owner": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "edited": false, "score": 0, "creation_date": 1468440630, "post_id": 38358715, "comment_id": 64134071, "body": "&quot;Matches within matches&quot; are but sequential matches.  Suppose a pattern matches at positions 3 through 7, 3 through 11, and 8 through 14.  The second is clearly &quot;within&quot; the first, but that doesn&#39;t matter: just based upon their starting offsets and lengths, they can procedurally be iterated across sequentially."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "edited": false, "score": 0, "creation_date": 1468477456, "post_id": 38358715, "comment_id": 64145225, "body": "@BruceDavidWilner - Though that doesn&#39;t mean sequential capture groups correspond to sequential string positions.  Consider something like this <code>(?:.*?(?:(?(1)(?!))\\b(\\d{4}-\\d\\d-\\d\\d)\\b|(?(2)(?!))with (\\w+))){2}</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 89, "user_id": 6395305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca1347f5f12dc9464833d543867e4fe?s=128&d=identicon&r=PG&f=1", "display_name": "lissachen", "link": "https://stackoverflow.com/users/6395305/lissachen"}, "edited": false, "score": 0, "creation_date": 1468477941, "post_id": 38358715, "comment_id": 64145430, "body": "@lissachen - Matching something that advances the current position is probably better than the phrase <i>manually bumps the current</i> position. Assertions don&#39;t advance the current position because externally, they return true/false, that&#39;s their function. So we just match the <code>o</code> which <i>consumes</i> a character and advances the current position by 1. Internal to assertions, expressions are just like any other&#39;s. So we just capture some stuff. The result is we advanced the position by 1 but captured more than 1. The <i>match</i> however, the thing that IS the match, group 0, only matched one character."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 2, "last_activity_date": 1468435809, "last_edit_date": 1468435809, "creation_date": 1468432742, "answer_id": 38358715, "question_id": 38358390, "link": "https://stackoverflow.com/questions/38358390/c11-regex-matches-within-matches/38358715#38358715", "title": "C++11 regex matches within matches", "body": "<p>Match it all, but consume nothing.<br>\nEngines will bump up the position by 1 on each match that does not<br>\nconsume a character.  </p>\n\n<p>To see the match, wrap it into a capture group.  </p>\n\n<p><code>(?=(o+[a-z]))</code></p>\n\n<p>Expanded  </p>\n\n<pre><code> (?=\n      ( o+ [a-z] )                  # (1)\n )\n</code></pre>\n\n<p>If the engine <em>doesn't</em> bump it along, then you can always manually consume 1.<br>\nTo match it all but consume 1 use:  </p>\n\n<p><code>(?=(o+[a-z]))o</code>  </p>\n\n<p>Expanded  </p>\n\n<pre><code> (?=\n      ( o+ [a-z] )                  # (1)\n )\n o\n</code></pre>\n\n<p>Both are equivalent. Get the results from capture group 1.</p>\n\n<p>Matches  </p>\n\n<pre><code> **  Grp 0 -  ( pos 0 , len 0 )  EMPTY \n **  Grp 1 -  ( pos 0 , len 4 ) \noook  \n\n--------------------\n\n **  Grp 0 -  ( pos 1 , len 0 )  EMPTY \n **  Grp 1 -  ( pos 1 , len 3 ) \nook  \n\n--------------------\n\n **  Grp 0 -  ( pos 2 , len 0 )  EMPTY \n **  Grp 1 -  ( pos 2 , len 2 ) \nok  \n\n--------------------\n\n **  Grp 0 -  ( pos 5 , len 0 )  EMPTY \n **  Grp 1 -  ( pos 5 , len 2 ) \nou  \n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1468476901, "post_id": 38359840, "comment_id": 64144928, "body": "It&#39;s always better to use <i>regex_search</i> than regex_iterator. The iterator encapsulates the target string, smatch and the basic_regex. Through overload <code>++</code> it just sets the &#39;s&#39;  target string pointer to m[0].second which becomes the start of the next search. Also, the overload <code>*it</code> just returns a reference to smatch, (&#39;m&#39; in your example). Stay away from using <i>suffix</i> or <i>prefix</i> stuff, stick to using smatch indexing to access values. Change it to <code>s = m[0].second;</code> Try to use boost::regex instead of C++11, even though the TR1 came from boost, it&#39;s crippled using EcmaScript."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1468477176, "post_id": 38359840, "comment_id": 64145078, "body": "Where as boost::regex has Perl as well. boost::regex is also modifiable since the source code is available. And, you can include the sparse regex source into your project, compile it under <i>your</i> settings and not have to load/include their huge library."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1468478059, "post_id": 38359840, "comment_id": 64145485, "body": "For a better understanding of <i>regex_iterator</i> see it&#39;s section here <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/regex/doc/html/index.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_61_0/libs/regex/doc/html/index.html</a>."}], "tags": [], "owner": {"reputation": 89, "user_id": 6395305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca1347f5f12dc9464833d543867e4fe?s=128&d=identicon&r=PG&f=1", "display_name": "lissachen", "link": "https://stackoverflow.com/users/6395305/lissachen"}, "is_accepted": false, "score": 0, "last_activity_date": 1468436936, "creation_date": 1468436936, "answer_id": 38359840, "question_id": 38358390, "link": "https://stackoverflow.com/questions/38358390/c11-regex-matches-within-matches/38359840#38359840", "title": "C++11 regex matches within matches", "body": "<p>Got it!</p>\n\n<pre><code>int main() {\n    string s = \"oook outside\";\n    smatch m;\n    regex e(\"(?=(o+[a-z]))o\");  // \"o+[a-z]\";\n\n    while (regex_search(s, m, e)) {\n        cout &lt;&lt; m[1] &lt;&lt; endl;\n        s = m.suffix();\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Thanks everybody!</p>\n"}], "owner": {"reputation": 89, "user_id": 6395305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca1347f5f12dc9464833d543867e4fe?s=128&d=identicon&r=PG&f=1", "display_name": "lissachen", "link": "https://stackoverflow.com/users/6395305/lissachen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1468436936, "creation_date": 1468431631, "last_edit_date": 1468433514, "question_id": 38358390, "link": "https://stackoverflow.com/questions/38358390/c11-regex-matches-within-matches", "title": "C++11 regex matches within matches", "body": "<p>Is it possible to iterate through all matches including those within matches?</p>\n\n<p>I'm trying to extract from my string <code>oook outside</code> substrings starting with <code>o</code> that end with a different character: i.e. <code>oook</code>, <code>ook</code>, <code>ok</code> and <code>ou</code>.</p>\n\n<p>I would think the following code would do it:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;regex&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main() {\n    string s = \"oook outside\";\n    regex e(\"o+[a-z]\");\n\n    sregex_iterator it(s.begin(), s.end(), e);\n    sregex_iterator it_end;\n\n    while (it != it_end) {\n        cout &lt;&lt; it-&gt;str() &lt;&lt; endl;\n        it++;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Instead, it prints just <code>oook</code> and <code>ou</code>.</p>\n"}, {"tags": ["c++", "handle", "loadlibrary"], "comments": [{"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 0, "creation_date": 1468431270, "post_id": 38358268, "comment_id": 64128789, "body": "This is a relative path. So... relative to what?"}, {"owner": {"reputation": 35, "user_id": 4130721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e500cdbc79eba301cb3f5ec5032d1d?s=128&d=identicon&r=PG&f=1", "display_name": "lilbean", "link": "https://stackoverflow.com/users/4130721/lilbean"}, "reply_to_user": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 0, "creation_date": 1468431366, "post_id": 38358268, "comment_id": 64128841, "body": "This is a relative path to the project I&#39;m working in. I have tested this relative path to work with filenames without any multiple periods"}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 2, "creation_date": 1468431368, "post_id": 38358268, "comment_id": 64128844, "body": "BTW... <b>Never</b> ship code like this. Always compute fully-qualified path and pass that to LoadLibrary().  Reason: security vulnerability."}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 0, "creation_date": 1468431469, "post_id": 38358268, "comment_id": 64128904, "body": "You&#39;ll notice that the referenced article&#39;s solution is to compute the fully qualified path. :)"}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 0, "creation_date": 1468431495, "post_id": 38358268, "comment_id": 64128924, "body": "<i>&quot;This is a relative path to the project I&#39;m working in&quot;</i> But current folder during your program execution is most likely different so <code>LoadLibrary</code> cannot find that file. As @DavidThomas wrote - always calculate full path"}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 1, "creation_date": 1468431673, "post_id": 38358268, "comment_id": 64129031, "body": "Also, check out <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684179(v=vs.85).aspx\" rel=\"nofollow noreferrer\">LoadLibraryEx</a> for more info., If you notice the length of the article and number of options it takes, you can sense the number of ways developers have shot themselves using LoadLibrary..."}, {"owner": {"reputation": 35, "user_id": 4130721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e500cdbc79eba301cb3f5ec5032d1d?s=128&d=identicon&r=PG&f=1", "display_name": "lilbean", "link": "https://stackoverflow.com/users/4130721/lilbean"}, "edited": false, "score": 1, "creation_date": 1468431963, "post_id": 38358268, "comment_id": 64129197, "body": "Thank you everyone for your responses, the full path did work! I probably didn&#39;t write out the relative path correctly."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4130721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e500cdbc79eba301cb3f5ec5032d1d?s=128&d=identicon&r=PG&f=1", "display_name": "lilbean", "link": "https://stackoverflow.com/users/4130721/lilbean"}, "edited": false, "score": 1, "creation_date": 1468432292, "post_id": 38358491, "comment_id": 64129399, "body": "Thank you again David. Unfortunately, I think I&#39;ll have to figure out a different approach to my other problem that LoadLibrary helped tackle (another story for another time) since this is a shared project that requires relative paths. But this answers my question!"}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "reply_to_user": {"reputation": 35, "user_id": 4130721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e500cdbc79eba301cb3f5ec5032d1d?s=128&d=identicon&r=PG&f=1", "display_name": "lilbean", "link": "https://stackoverflow.com/users/4130721/lilbean"}, "edited": false, "score": 0, "creation_date": 1468432983, "post_id": 38358491, "comment_id": 64129868, "body": "GetFullPathName() may solve your problem.  Tread carefully. Defend your customers."}], "tags": [], "owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "is_accepted": true, "score": 3, "last_activity_date": 1468431977, "creation_date": 1468431977, "answer_id": 38358491, "question_id": 38358268, "link": "https://stackoverflow.com/questions/38358268/loadlibrary-file-path/38358491#38358491", "title": "LoadLibrary() file path", "body": "<p>As suggested in the referenced article, always compute fully-qualified path and pass that to <code>LoadLibrary</code>/<code>LoadLibraryEx()</code>. Not only does this work around the dot defect, it prevents a security vulnerability. Highjacking the current directory for your application can cause your app to run arbitrary code.</p>\n\n<p>See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684179(v=vs.85).aspx\" rel=\"nofollow\">MSDN on LoadLibraryEx</a> for a better understanding of the complexities of using LoadLibrary.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 4130721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e500cdbc79eba301cb3f5ec5032d1d?s=128&d=identicon&r=PG&f=1", "display_name": "lilbean", "link": "https://stackoverflow.com/users/4130721/lilbean"}, "edited": false, "score": 0, "creation_date": 1468440386, "post_id": 38360613, "comment_id": 64133937, "body": "that was my issue yes. As David mentioned, a fully qualified path will resolve this issue. Thanks for the suggestion for the mangled filename! (also *gentlewoman haha not man)"}], "tags": [], "owner": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "is_accepted": false, "score": 1, "last_activity_date": 1468447013, "last_edit_date": 1468447013, "creation_date": 1468439782, "answer_id": 38360613, "question_id": 38358268, "link": "https://stackoverflow.com/questions/38358268/loadlibrary-file-path/38360613#38360613", "title": "LoadLibrary() file path", "body": "<p>It seems to me that the gentleman's problem stems from multiple dots WITHIN A BASENAME, as in:</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;<strong>c:\\users\\joe\\elephant.doc.old</strong></p>\n\n<p>There is, of course, the concomitant \"mangled filename\" convention that maps this into something like:</p>\n\n<p>&nbsp;&nbsp;&nbsp;&nbsp;<strong>c:\\users\\joe\\elepha~2.old</strong></p>\n\n<p>If you use the mangled filenames--which are visible from within a DOS window--you should have no trouble, my young friend.</p>\n"}], "owner": {"reputation": 35, "user_id": 4130721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e500cdbc79eba301cb3f5ec5032d1d?s=128&d=identicon&r=PG&f=1", "display_name": "lilbean", "link": "https://stackoverflow.com/users/4130721/lilbean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1902, "favorite_count": 0, "accepted_answer_id": 38358491, "answer_count": 2, "score": 2, "last_activity_date": 1468447013, "creation_date": 1468431163, "question_id": 38358268, "link": "https://stackoverflow.com/questions/38358268/loadlibrary-file-path", "title": "LoadLibrary() file path", "body": "<p>I'm trying to use the function LoadLibrary(...) which takes in a string to a filename (.dll or .exe) or a filepath. The issue I'm having is when the filename itself has multiple periods/dots. </p>\n\n<p>Example:</p>\n\n<pre><code>HINSTANCE hInst = LoadLibrary(_T(\"..\\\\folder\\\\file.name.dots.exe\"));\n</code></pre>\n\n<p>The handle is always null and I cannot simply change the filename in this case. Microsoft mentioned multiple periods in <a href=\"https://support.microsoft.com/en-ca/kb/324468\" rel=\"nofollow\">https://support.microsoft.com/en-ca/kb/324468</a> but I don't believe it works for the filename. Any ideas?</p>\n"}, {"tags": ["c++", "c++11", "for-loop", "macros"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1468431091, "post_id": 38358226, "comment_id": 64128686, "body": "Using <code>cout &lt;&lt; i</code> requires less typing than a <code>printf</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1468431130, "post_id": 38358226, "comment_id": 64128709, "body": "Prefer inline functions to macros.  Macros are evil."}, {"owner": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1468431200, "post_id": 38358226, "comment_id": 64128747, "body": "I dont need to write code to be readable, its just for me :)"}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1468431258, "post_id": 38358226, "comment_id": 64128781, "body": "You could create your own function which takes three parameters - the two indexes to iterate between, and a function object to execute for each. Your function could determine whether it need to count up or down and perform the proper thing. This will have overhead, though... And the syntax may not be as short and sweet as you like."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1468431583, "post_id": 38358226, "comment_id": 64128980, "body": "Do you really want to use <code>fr</code> instead of <code>for</code>?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1468432553, "post_id": 38358226, "comment_id": 64129565, "body": "Really, ranges can already do this well: <code>for (int i : range(0, 3))</code>, <code>for(int i : range(8, 3))</code>, <code>for (int i : lrange(3, 6))</code>, <code>for (int i : lrange(5, 1))</code>, for appropriate <code>range</code> and <code>lrange</code> functions."}, {"owner": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1468435336, "post_id": 38358226, "comment_id": 64131257, "body": "@chris how can i do this in c++ ?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1468437447, "post_id": 38358226, "comment_id": 64132430, "body": "@Daniel, There are existing range libraries that incorporate this kind of syntax. Take a look into them."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 2, "creation_date": 1468439828, "post_id": 38358226, "comment_id": 64133632, "body": "I didn&#39;t expect that from myself, but I&#39;ve written a whole header-only library for you that does almost what you want and probably even more: <a href=\"https://github.com/ForceBru/Ranges\" rel=\"nofollow noreferrer\">Ranges on GitHub</a>."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1468515167, "post_id": 38358226, "comment_id": 64169802, "body": "@ForceBru, Interesting syntax you&#39;ve got going on there, but the obvious solution is <a href=\"http://coliru.stacked-crooked.com/a/5180ec4ddd9f29a9\" rel=\"nofollow noreferrer\"><code>for (int i : 0.3_r)</code></a> :p"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1468515389, "post_id": 38358226, "comment_id": 64169920, "body": "@chris, I was also thinking about using <code>double</code>s (and overloading <code>operator.</code>, which, sadly, is impossible), but this immediately leads to problems with negative numbers: for example, how can you loop from <code>-9</code> to <code>-1</code> with this trick?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1468516111, "post_id": 38358226, "comment_id": 64170310, "body": "@ForceBru, New operator literal, of course! Honestly, I don&#39;t recommend the syntax at all."}], "answers": [{"comments": [{"owner": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "edited": false, "score": 0, "creation_date": 1468435024, "post_id": 38358352, "comment_id": 64131082, "body": "I had already thought of this but the problem is the = statement..."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "edited": false, "score": 0, "creation_date": 1468441202, "post_id": 38358352, "comment_id": 64134357, "body": "@Daniel: I don&#39;t see why the <code>=</code> statement is a problem... I&#39;ve tried and it works... Or do you mean when you use the macro? Then just do not write it."}], "tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": true, "score": 0, "last_activity_date": 1468441269, "last_edit_date": 1468441269, "creation_date": 1468431512, "answer_id": 38358352, "question_id": 38358226, "link": "https://stackoverflow.com/questions/38358226/c-for-loop-short-syntax/38358352#38358352", "title": "C++ for loop short syntax", "body": "<p>If you assume that all values are integers, something like this might just work:</p>\n\n<pre><code>#define MYFOR(i,a,b) for (int i = (a); i != (b); i = (a)&lt;(b)? i+1 : i-1)\n</code></pre>\n\n<p>Then use is this way:</p>\n\n<pre><code>MYFOR(i, 0, 10) printf(\"%d \", i);\nMYFOR(i, 5, 0) printf(\"%d \", i);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "edited": false, "score": 0, "creation_date": 1468435169, "post_id": 38358481, "comment_id": 64131161, "body": "nice solution, only the = missing... is there a way to insert it ? (i always use for with int so type is not necessary)"}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "reply_to_user": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "edited": false, "score": 0, "creation_date": 1468436956, "post_id": 38358481, "comment_id": 64132177, "body": "@Daniel : that&#39;d most probably need taking the body of the loop as a function parameter, something you won&#39;t really like I think. (The problem is, you need to know the loop index name. It cannot just be <code>i</code> as you might want nested loops.) Either that, or you&#39;ll introduce a type with an overloaded <code>operator=()</code> which does not do what you think."}], "tags": [], "owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "is_accepted": false, "score": 1, "last_activity_date": 1468431946, "creation_date": 1468431946, "answer_id": 38358481, "question_id": 38358226, "link": "https://stackoverflow.com/questions/38358226/c-for-loop-short-syntax/38358481#38358481", "title": "C++ for loop short syntax", "body": "<p>This is quite close to what you expected:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n\n#define LT -1 +\n#define GT 1 +\n#define FR(type, var, from, to) for(type dir = (from &lt; to)? 1: -1, i = from; i != to + dir; i += dir)\n\nint main() {\n    FR(int, i, 0, 3) std::cout &lt;&lt; i &lt;&lt; \" \";\n    std::cout &lt;&lt; std::endl;\n\n    FR(int, i, 8, 3) std::cout &lt;&lt; i &lt;&lt; \" \";\n    std::cout &lt;&lt; std::endl;\n\n    FR(int, i, 3, LT 6) std::cout &lt;&lt; i &lt;&lt; \" \";\n    std::cout &lt;&lt; std::endl;\n\n    FR(int, i, 5, GT 1) std::cout &lt;&lt; i &lt;&lt; \" \";\n    std::cout &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1470, "favorite_count": 1, "closed_date": 1468431477, "accepted_answer_id": 38358352, "answer_count": 2, "score": -3, "last_activity_date": 1468441269, "creation_date": 1468431034, "last_edit_date": 1468432044, "question_id": 38358226, "link": "https://stackoverflow.com/questions/38358226/c-for-loop-short-syntax", "closed_reason": "Duplicate", "title": "C++ for loop short syntax", "body": "<p>I'd like to write a short for-loop (with or without macro) that works by guessing if the start point is smaller or bigger (or equal) to the end point, something like this:</p>\n\n<pre><code>fr(i = 0 .. 3) printf(\"%d \", i)\n    output: 0 1 2 3\n\nfr(i = 8 .. 3) printf(\"%d \", i)\n    ouput: 8 7 6 5 4 3\n\nfr(i = 3 ..&lt; 6) printf(\"%d \", i)\n    output: 3 4 5\n\nfr(i = 5 ..&gt; 1) printf(\"%d \", i)\n    output: 5 4 3 2\n</code></pre>\n\n<p>In a nutshell, I'd like to write a powerful for in a short way... Is this possible?</p>\n\n<p>If it isn't, is there another way?</p>\n"}, {"tags": ["c++", "qt", "memory", "crash", "heap"], "comments": [{"owner": {"reputation": 3839, "user_id": 2164788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67fe81c74a9d59c63214ab00fb9698c9?s=128&d=identicon&r=PG", "display_name": "evilruff", "link": "https://stackoverflow.com/users/2164788/evilruff"}, "edited": false, "score": 0, "creation_date": 1468431263, "post_id": 38358208, "comment_id": 64128783, "body": "To be honest i dont think it has something to do with QList.. i would suggest you post some more code"}, {"owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "reply_to_user": {"reputation": 3839, "user_id": 2164788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67fe81c74a9d59c63214ab00fb9698c9?s=128&d=identicon&r=PG", "display_name": "evilruff", "link": "https://stackoverflow.com/users/2164788/evilruff"}, "edited": false, "score": 0, "creation_date": 1468431407, "post_id": 38358208, "comment_id": 64128870, "body": "That&#39;s all the code I have to post! In the second block, if i change <code>myClass *mc = new mc(NULL)</code> with <code>myClass *mc = new mc(this)</code> then things work. I beliebe it has something to do with the deletion of the QList, because the error thrown on the crash is <code>HEAP CORRUPTION DETECTED</code>"}, {"owner": {"reputation": 3839, "user_id": 2164788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67fe81c74a9d59c63214ab00fb9698c9?s=128&d=identicon&r=PG", "display_name": "evilruff", "link": "https://stackoverflow.com/users/2164788/evilruff"}, "edited": false, "score": 0, "creation_date": 1468431483, "post_id": 38358208, "comment_id": 64128914, "body": "Well i would suggest then to trace constructor.."}, {"owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "reply_to_user": {"reputation": 3839, "user_id": 2164788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67fe81c74a9d59c63214ab00fb9698c9?s=128&d=identicon&r=PG", "display_name": "evilruff", "link": "https://stackoverflow.com/users/2164788/evilruff"}, "edited": false, "score": 0, "creation_date": 1468431546, "post_id": 38358208, "comment_id": 64128958, "body": "Sorry, I&#39;m unfamiliar with that terminology. What do you mean to trace constructor?"}, {"owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "reply_to_user": {"reputation": 3839, "user_id": 2164788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67fe81c74a9d59c63214ab00fb9698c9?s=128&d=identicon&r=PG", "display_name": "evilruff", "link": "https://stackoverflow.com/users/2164788/evilruff"}, "edited": false, "score": 0, "creation_date": 1468432578, "post_id": 38358208, "comment_id": 64129577, "body": "Re-ran qmake and it works now."}], "answers": [{"tags": [], "owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "is_accepted": true, "score": 1, "last_activity_date": 1468432556, "creation_date": 1468432556, "answer_id": 38358662, "question_id": 38358208, "link": "https://stackoverflow.com/questions/38358208/qt-two-qlist-member-variables-causes-crash/38358662#38358662", "title": "Qt two QList member variables causes crash", "body": "<p>I'm using Qt Creator. I just re-ran QMake and now it works. Definitely was some sort of bug within Qt/Qt Creator.</p>\n"}, {"comments": [{"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1470341935, "post_id": 38361540, "comment_id": 64924861, "body": "I agree with you that there is indeed the problem that you described (I am facing it myself almost every day and doing exactly what you suggest here) but I am still wondering how Visual Studio (or msbuild) manages to to instantly catch all dependencies and correctly build very large projects in the same situations. Any ideas? Thanks!"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1470342081, "post_id": 38361540, "comment_id": 64924942, "body": "It does so because it doesn&#39;t use qmake. Qmake isn&#39;t really a tool designed for incremental use. Cmake would be a better choice. qbs is probably the best choice: it doesn&#39;t suffer from such problems."}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1470342376, "post_id": 38361540, "comment_id": 64925073, "body": "Thank you for answering! I&#39;ll try to learn this subject better (I need to design a custom automated build system and I hope this will help)."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1468443341, "creation_date": 1468443341, "answer_id": 38361540, "question_id": 38358208, "link": "https://stackoverflow.com/questions/38358208/qt-two-qlist-member-variables-causes-crash/38361540#38361540", "title": "Qt two QList member variables causes crash", "body": "<p>This is not a bug of any sort. It's a classic binary incompatibility problem: you've had some code that depended on the layout of some of your classes, but the outdated Makefiles did not capture that dependency. Thus when you changed the layout of the class, the dependent code didn't get recompiled. It would be way too expensive for <code>qmake</code> to rescan the entire project looking for such dependencies every time you build it. It's on you to re-run <code>qmake</code> when you change the code to introduce such binary incompatibilities.</p>\n\n<p>For small projects, you may simply wish to <em>always</em> rebuild the code, forcing a qmake re-run.</p>\n"}], "owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 38358662, "answer_count": 2, "score": 0, "last_activity_date": 1468443341, "creation_date": 1468430987, "question_id": 38358208, "link": "https://stackoverflow.com/questions/38358208/qt-two-qlist-member-variables-causes-crash", "title": "Qt two QList member variables causes crash", "body": "<p>so I'm not sure if this is a bug in Qt or if I just don't understand something, but i have this class:</p>\n\n<pre><code>class myClass : public QDialog, private Ui::myClass\n{\n    Q_OBJECT\n\npublic:\n    explicit myClass(QWidget *parent = 0);\n\nprivate:\n    QList&lt;ushort&gt; list1;\n    QList&lt;ushort&gt; list2;\n}\n</code></pre>\n\n<p>I create this window by clicking on an action in another window: </p>\n\n<pre><code>void mainWindow::on_myClassAction_triggered()\n{\n    myClass *mc = new mc(NULL);\n    mc-&gt;show();\n}\n</code></pre>\n\n<p>So now things get weird. Even if i don't use list1 and list2 anywhere in myClass, the program will crash when i close or sometimes open myClass. If i comment out one, or both of them, it works. What is going on here??</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 1, "creation_date": 1468431818, "post_id": 38358138, "comment_id": 64129113, "body": "Does Build&gt;Clean Solution and recompiling change anything?"}, {"owner": {"reputation": 1015, "user_id": 4725112, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZrWJ0.png?s=128&g=1", "display_name": "shady", "link": "https://stackoverflow.com/users/4725112/shady"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1468432062, "post_id": 38358138, "comment_id": 64129256, "body": "nope it doesn&#39;t seem to make a difference."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1468432316, "post_id": 38358138, "comment_id": 64129414, "body": "There are a lot of Visual C++ programmers that don&#39;t realize they are using the C++/CLI extension.  VS2015 is no longer compatible, you have to use Tools &gt; Options &gt; Debugging &gt; General &gt; tick the &quot;Use Managed Compatibility Mode&quot; checkbox."}], "answers": [{"comments": [{"owner": {"reputation": 7887, "user_id": 124061, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/af8836ed67d630ad5c2255b224a84934?s=128&d=identicon&r=PG", "display_name": "Benny", "link": "https://stackoverflow.com/users/124061/benny"}, "edited": false, "score": 0, "creation_date": 1476774099, "post_id": 38363694, "comment_id": 67475054, "body": "where is the setting, I can&#39;t find it"}, {"owner": {"reputation": 1015, "user_id": 4725112, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZrWJ0.png?s=128&g=1", "display_name": "shady", "link": "https://stackoverflow.com/users/4725112/shady"}, "reply_to_user": {"reputation": 7887, "user_id": 124061, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/af8836ed67d630ad5c2255b224a84934?s=128&d=identicon&r=PG", "display_name": "Benny", "link": "https://stackoverflow.com/users/124061/benny"}, "edited": false, "score": 0, "creation_date": 1476793204, "post_id": 38363694, "comment_id": 67487372, "body": "i was debugging a c++ library through a c# app. I had to go to the c#&#39;s project settings &gt; Debug."}], "tags": [], "owner": {"reputation": 1015, "user_id": 4725112, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZrWJ0.png?s=128&g=1", "display_name": "shady", "link": "https://stackoverflow.com/users/4725112/shady"}, "is_accepted": false, "score": 6, "last_activity_date": 1468455761, "creation_date": 1468455761, "answer_id": 38363694, "question_id": 38358138, "link": "https://stackoverflow.com/questions/38358138/visual-studio-2015-c-breakpoint-will-not-be-hit/38363694#38363694", "title": "Visual Studio 2015 c++ breakpoint will not be hit", "body": "<p>I had use managed compatibility mode and use native compatibility mode both checked. Unchecking use native compatibility mode fixed it.</p>\n"}], "owner": {"reputation": 1015, "user_id": 4725112, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZrWJ0.png?s=128&g=1", "display_name": "shady", "link": "https://stackoverflow.com/users/4725112/shady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1794, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1468455761, "creation_date": 1468430782, "question_id": 38358138, "link": "https://stackoverflow.com/questions/38358138/visual-studio-2015-c-breakpoint-will-not-be-hit", "title": "Visual Studio 2015 c++ breakpoint will not be hit", "body": "<p>Hi I have a c++ app in visual studio 2015. My .exe's pdb wont work and it cant hit breakpoints. when I open the modules window, the status says Symbol format not supported. my debug file flag is /ZI in the projects settings. I've tried deleting the object and bin folders. When I create a new project, it hits the breakpoint. Any ideas?</p>\n"}, {"tags": ["c++", "compilation", "undefined-reference", "gsl", "linker-errors"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1468432742, "post_id": 38358121, "comment_id": 64129712, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/45135/why-does-the-order-in-which-libraries-are-linked-sometimes-cause-errors-in-gcc\">Why does the order in which libraries are linked sometimes cause errors in GCC?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "is_accepted": false, "score": 2, "last_activity_date": 1468432890, "last_edit_date": 1468432890, "creation_date": 1468432454, "answer_id": 38358632, "question_id": 38358121, "link": "https://stackoverflow.com/questions/38358121/undefined-reference-to-gsl-vector-free/38358632#38358632", "title": "undefined reference to `gsl_vector_free&#39;", "body": "<p>The long story short: the library <code>-lgsl</code> must be after your cpps in the command line, i.e.:</p>\n\n<pre><code>g++ -Wall -I/usr/include/libxml2   main.cpp YUNucNet.cpp src/*.cpp -lxml2 -lgsl -lm\n</code></pre>\n\n<p>You can call g++ with option <code>-v</code> to see what happens under the hood, than you will see, that the linker is called with <code>-lgsl</code> prior to your compiled object files. Thus the <code>-lgsl</code> library will be proceeded by linker prior to the object files and the linker will discard all functions from the library because up to this point it doesn't know they are needed. Only later, by working through your object files it will know, that the functions from the library are indeed needed, but than it is already too late.</p>\n"}], "owner": {"reputation": 7, "user_id": 5547948, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ef690cad1b09baf6d4454574748fcb5?s=128&d=identicon&r=PG&f=1", "display_name": "M.Talafha", "link": "https://stackoverflow.com/users/5547948/m-talafha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1273, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1468432890, "creation_date": 1468430741, "question_id": 38358121, "link": "https://stackoverflow.com/questions/38358121/undefined-reference-to-gsl-vector-free", "title": "undefined reference to `gsl_vector_free&#39;", "body": "<p>I'm Trying to compile some c++ files using g++ , the problem that these files depends on both libxml2 and gsl libraries , whene i give the compilation command<br>\n<code>g++ -Wall -I/usr/include/libxml2  -lgsl main.cpp YUNucNet.cpp src/*.cpp -lxml2  -lm</code></p>\n\n<p>it alaways give me many linking error of undefined reference for gsl</p>\n\n<pre><code>'/tmp/ccCJrl0t.o: In function `WnSparseSolve__Phi__solve:\nWnSparseSolve.cpp:(.text+0x24bc): undefined reference to `gsl_vector_calloc'\nWnSparseSolve.cpp:(.text+0x24cc): undefined reference to `gsl_vector_calloc'\nWnSparseSolve.cpp:(.text+0x24e9): undefined reference to `gsl_vector_calloc'\nWnSparseSolve.cpp:(.text+0x24ff): undefined reference to `gsl_vector_alloc'\nWnSparseSolve.cpp:(.text+0x250f): undefined reference to `gsl_vector_calloc\n....etc\n</code></pre>\n\n<p>what is the problem here ??</p>\n"}, {"tags": ["c++", "multithreading", "winapi", "console", "windows-console"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1468430665, "post_id": 38358035, "comment_id": 64128438, "body": "If you don&#39;t want to block the interaction with the console then you&#39;ll have to use another thread to create the window(s)."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1468430710, "post_id": 38358035, "comment_id": 64128465, "body": "You create a thread and block waiting for it. What is the point of the thread of you block on it. The window appears to be created in the main thread. You use the terms window and thread interchangeably but they are not."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1468430809, "post_id": 38358035, "comment_id": 64128532, "body": "Starting a thread immediately followed by a wait on the thread handle is a convoluted multithreaded implementation, that has none of the downsides of multithreading (synchronization), but also none of the benefits (concurrency). Doesn&#39;t look like you know enough to enter multithreading yet. You need to get a couple of decent books on the subject. Besides, it is not safe to wait on the return value of <code>_beginthread</code>. It&#39;s not yours. If you want to get ownership of the handle, call <code>_beingthreadex</code> instead."}, {"owner": {"reputation": 1141, "user_id": 1017063, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5729e85036a5b40460bcd9f4670fe804?s=128&d=identicon&r=PG", "display_name": "nomaam", "link": "https://stackoverflow.com/users/1017063/nomaam"}, "edited": false, "score": 0, "creation_date": 1468431509, "post_id": 38358035, "comment_id": 64128932, "body": "Thank you for the reply&#39;s. I am just learning C++ and am having some difficulties. Could you provide some examples of the solutions your suggesting? Thanks."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1468434822, "post_id": 38358035, "comment_id": 64130966, "body": "You want us to tell you how to buy a book. That&#39;s the solution. You aren&#39;t in any position to write this code because your grasp of what is involved is so tenuous."}], "answers": [{"tags": [], "owner": {"reputation": 1141, "user_id": 1017063, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5729e85036a5b40460bcd9f4670fe804?s=128&d=identicon&r=PG", "display_name": "nomaam", "link": "https://stackoverflow.com/users/1017063/nomaam"}, "is_accepted": true, "score": 1, "last_activity_date": 1468700380, "creation_date": 1468700380, "answer_id": 38415257, "question_id": 38358035, "link": "https://stackoverflow.com/questions/38358035/c-create-new-window-from-console-in-new-thread-win32/38415257#38415257", "title": "C++ Create New Window From Console in New Thread (Win32)", "body": "<p>Got this working, thought I would post it to help out others who are also starting out and having difficulties</p>\n\n<p><strong>In your main start the thread</strong></p>\n\n<pre><code>HANDLE myhandle;\n\nmyhandle = (HANDLE)_beginthreadex(0, 0, &amp;mythread, 0, 0, 0);\n</code></pre>\n\n<p>If your console runs in a loop then you don't need to call WaitForSingleObject, if it doesn't you will need to call it so the console doesn't close. </p>\n\n<p><strong>Outside the main</strong></p>\n\n<p>create the thread, and inside the thread you will create your window</p>\n\n<pre><code>unsigned int __stdcall mythread(void* data)\n{\n\ncout &lt;&lt; \"/n created monitor window /n\";\n\nconst char* const myclass = \"myclass\";\n\nWNDCLASSEX wndclass = { sizeof(WNDCLASSEX), CS_DBLCLKS, WindowProcedure,\n    0, 0, GetModuleHandle(0), LoadIcon(0,IDI_APPLICATION),\n    LoadCursor(0,IDC_ARROW), HBRUSH(COLOR_WINDOW + 1),\n    0, myclass, LoadIcon(0,IDI_APPLICATION) };\n\nif (RegisterClassEx(&amp;wndclass))\n{\n    HWND window = CreateWindowEx(0, myclass, \"title\",\n        WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT,\n        CW_USEDEFAULT, CW_USEDEFAULT, 0, 0, GetModuleHandle(0), 0);\n    if (window)\n    {\n        ShowWindow(window, SW_SHOWDEFAULT);\n        MSG msg;\n        while (GetMessage(&amp;msg, 0, 0, 0)) DispatchMessage(&amp;msg);\n    }\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p><strong>also outside the main, the new window</strong></p>\n\n<pre><code>long __stdcall WindowProcedure(HWND window, unsigned int msg, WPARAM wp, LPARAM lp)\n{ \nswitch (msg)\n{\n\ncase checksomethinghere: { \n\n}\ndefault: // fall thru \n\n    return DefWindowProc(window, msg, wp, lp);\n}\n}\n</code></pre>\n\n<p>Now you can have your monitor window working in conjunction with your console, without blocking the console activity. </p>\n\n<p>Tested, and working well. </p>\n\n<p>From what I've read, you don't have to worry about calling CloseHandle for the created thread, because when the console is closed it will kill the thread and the window you created. </p>\n\n<p>In my scenario the window and thread remain alive for the entire time the console app is running.  </p>\n"}], "owner": {"reputation": 1141, "user_id": 1017063, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5729e85036a5b40460bcd9f4670fe804?s=128&d=identicon&r=PG", "display_name": "nomaam", "link": "https://stackoverflow.com/users/1017063/nomaam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1480, "favorite_count": 0, "accepted_answer_id": 38415257, "answer_count": 1, "score": -2, "last_activity_date": 1468700455, "creation_date": 1468430438, "last_edit_date": 1468700455, "question_id": 38358035, "link": "https://stackoverflow.com/questions/38358035/c-create-new-window-from-console-in-new-thread-win32", "title": "C++ Create New Window From Console in New Thread (Win32)", "body": "<p><strong>Working environment:</strong></p>\n\n<p>I am working in VS 2015, and a win32 console. </p>\n\n<p><strong>Overview:</strong></p>\n\n<p>I am creating a new window to act as a worker thread to perform some functions that cannot be completed in the console. </p>\n\n<p>The code to create the new window and complete the tasks works well. However it freezes the console. </p>\n\n<p>I have code to create a thread from the console and complete tasks while the console is not frozen. This also works well. </p>\n\n<p><strong>Problem:</strong></p>\n\n<p>I am unable to join the two pieces of code, I want to run the new window in the thread so it doesn't block the console. </p>\n\n<p><strong>Code:</strong></p>\n\n<p>=============== <strong>int main</strong> ======================</p>\n\n<p>Start thread</p>\n\n<pre><code>x = 0;\nhPrintMutex = CreateMutex(NULL, false, NULL);\n\nHANDLE hThread1 = (HANDLE)_beginthread(printNumber, 0, &amp;x);\nWaitForSingleObject(hThread1, INFINITE);\n</code></pre>\n\n<p>Make new window</p>\n\n<pre><code>WNDCLASSEX wndclass = { sizeof(WNDCLASSEX), CS_DBLCLKS, WindowProcedure,\n0, 0, GetModuleHandle(0), LoadIcon(0,IDI_APPLICATION),\nLoadCursor(0,IDC_ARROW), HBRUSH(COLOR_WINDOW + 1),\n0, myclass, LoadIcon(0,IDI_APPLICATION) };\n\nif (RegisterClassEx(&amp;wndclass))\n{\n    HWND window = CreateWindowEx(0, myclass, \"title\",\n        WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT,\n        CW_USEDEFAULT, CW_USEDEFAULT, 0, 0, GetModuleHandle(0), 0);\n    if (window)\n    {\n        ShowWindow(window, SW_SHOWDEFAULT);\n        MSG msg;\n        while (GetMessage(&amp;msg, 0, 0, 0)) DispatchMessage(&amp;msg);\n    }\n}\n</code></pre>\n\n<p>======== <strong>outside main</strong> =======================================</p>\n\n<p>code to do something in the new thread </p>\n\n<p>( * The actual contents are just an example, they will be erased and replaced with the window code * )</p>\n\n<pre><code>void printNumber(void* pInt)\n{\n\nint* xp = (int*)pInt;\nwhile (*xp&lt;100)\n{\n    WaitForSingleObject(hPrintMutex, INFINITE);\n\n    ++*xp;\n    cout &lt;&lt; *xp &lt;&lt; endl;\n\n    ReleaseMutex(hPrintMutex);\n    Sleep(10);\n}\n\n\n}\n</code></pre>\n\n<p>code to create new window and do something</p>\n\n<pre><code>long __stdcall WindowProcedure(HWND window, unsigned int msg, WPARAM wp, LPARAM lp)\n{\nswitch (msg)\n{\n\ncase something: { \n\n}\ndefault: \n\n    return DefWindowProc(window, msg, wp, lp);\n}\n}\n</code></pre>\n\n<p>Any thoughts? Thanks.</p>\n\n<p>***** SOLUTION *****</p>\n\n<p>See my posted solution below, tested and working. </p>\n\n<hr>\n"}, {"tags": ["java", "c++", "inheritance", "swig"], "comments": [{"owner": {"reputation": 41, "user_id": 6585525, "user_type": "registered", "profile_image": "https://graph.facebook.com/1068060126592409/picture?type=large", "display_name": "Bernardo Frankenfeld", "link": "https://stackoverflow.com/users/6585525/bernardo-frankenfeld"}, "edited": false, "score": 0, "creation_date": 1468445541, "post_id": 38358017, "comment_id": 64136477, "body": "If I remove the &quot;= 0&quot; for pure virtual and remove the declaration of method1 in Derived, it does work. But for my project, i cannot change the &quot;.h&quot;s. <code>namespace Space {   class Base1 {       public:     virtual void Method1();    };   class Base2 {     public:     virtual void Method2();   };   class Derived : public Base1, public Base2 {   }; }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6585525, "user_type": "registered", "profile_image": "https://graph.facebook.com/1068060126592409/picture?type=large", "display_name": "Bernardo Frankenfeld", "link": "https://stackoverflow.com/users/6585525/bernardo-frankenfeld"}, "edited": false, "score": 0, "creation_date": 1468445032, "post_id": 38360886, "comment_id": 64136234, "body": "Thank you for the help, but i try with your .i and your .h and it gives the same error. I downloaded swig 3.0.2 and it gives the error     &quot;Warning 813: Warning for Space::Derived proxy: Base Space::Base2 ignored. Multiple inheritance is not supported in Java.&quot;  How do you call swig on the command line? I use: swig.exe -package teste.sourcepackage -small -v  -outdir temp -c++ -java -o temp/SOURCEJAVA_wrap.cxx Source.i"}, {"owner": {"reputation": 41, "user_id": 6585525, "user_type": "registered", "profile_image": "https://graph.facebook.com/1068060126592409/picture?type=large", "display_name": "Bernardo Frankenfeld", "link": "https://stackoverflow.com/users/6585525/bernardo-frankenfeld"}, "edited": false, "score": 0, "creation_date": 1468445216, "post_id": 38360886, "comment_id": 64136330, "body": "I run on windows (download the precompiled windows distribution)"}, {"owner": {"reputation": 41, "user_id": 6585525, "user_type": "registered", "profile_image": "https://graph.facebook.com/1068060126592409/picture?type=large", "display_name": "Bernardo Frankenfeld", "link": "https://stackoverflow.com/users/6585525/bernardo-frankenfeld"}, "edited": false, "score": 0, "creation_date": 1468446888, "post_id": 38360886, "comment_id": 64137062, "body": "Found the Problem.... its the &quot;-small&quot; command... I used it because my wrapper became big and I read somewhere that it compacted the generated wrapper... but it does more than that &quot; -small          - Compile in virtual elimination &amp; compact mode&quot; I guess the &quot;virtual elimination&quot; part is ignoring the pure virtual methods...  I changed &quot;-small&quot; to &quot;-fcompact&quot; and it seams to be working now!!!"}, {"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "reply_to_user": {"reputation": 41, "user_id": 6585525, "user_type": "registered", "profile_image": "https://graph.facebook.com/1068060126592409/picture?type=large", "display_name": "Bernardo Frankenfeld", "link": "https://stackoverflow.com/users/6585525/bernardo-frankenfeld"}, "edited": false, "score": 0, "creation_date": 1468465730, "post_id": 38360886, "comment_id": 64141722, "body": "@BernardoFrankenfeld Glad you found the error. I run <code>swig -java -c++ Source.i</code>"}], "tags": [], "owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "is_accepted": true, "score": 1, "last_activity_date": 1468465830, "last_edit_date": 1468465830, "creation_date": 1468440711, "answer_id": 38360886, "question_id": 38358017, "link": "https://stackoverflow.com/questions/38358017/swig-java-how-to-wrap-c-multiple-inheritance-with-interface-and-pure-virtual/38360886#38360886", "title": "SWIG JAVA how to wrap C++ multiple inheritance with %interface and pure virtual methods", "body": "<p>I am using swig 3.0.2 and it works perfect for me. I do not have the file <code>swiginterface.i</code>. My Java installation is a little screwed up so I tried with Python and Ruby. For both languages, I have made a slightly different interface file.</p>\n\n<pre><code>%module example\n%{\n  #define SWIG_FILE_WITH_INIT\n  #include \"Source.h\"\n%}\n\n%interface_impl(Space::Base1);\n\n%include \"Source.h\"\n</code></pre>\n\n<p>The header file I have equipped with default'ed virtual destructors.</p>\n\n<pre><code>namespace Space {\n  class Base1 {\n  public:\n    virtual void Method1() = 0;\n    virtual ~Base1() = default;\n   };\n  class Base2 {\n    public:\n    virtual void Method2();\n    virtual ~Base2() = default;\n  };\n  class Derived : public Base1, public Base2 {\n    public:\n    virtual void Method1();\n  };\n}\n</code></pre>\n\n<p>I just tried it with Java and I do get a method inside Derived</p>\n\n<pre><code> public void Method1() {\n     exampleJNI.Derived_Method1(swigCPtr, this);\n }\n</code></pre>\n\n<p>I compile the above as follows</p>\n\n<pre><code>swig -java -c++ Source.i\ng++ -std=c++11 -fPIC -c Source.cpp Source_wrap.cxx -I/usr/lib/jvm/java-7-openjdk-amd64/include/\ng++ -std=c++11 -fPIC -shared Source.o  Source_wrap.o -o libShared.so\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6585525, "user_type": "registered", "profile_image": "https://graph.facebook.com/1068060126592409/picture?type=large", "display_name": "Bernardo Frankenfeld", "link": "https://stackoverflow.com/users/6585525/bernardo-frankenfeld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1710, "favorite_count": 0, "accepted_answer_id": 38360886, "answer_count": 1, "score": 3, "last_activity_date": 1468465830, "creation_date": 1468430391, "question_id": 38358017, "link": "https://stackoverflow.com/questions/38358017/swig-java-how-to-wrap-c-multiple-inheritance-with-interface-and-pure-virtual", "title": "SWIG JAVA how to wrap C++ multiple inheritance with %interface and pure virtual methods", "body": "<p>I'm having a problem while wrapping a huge C++ code to JAVA using SWIG.</p>\n\n<p>What I'm trying to do is wrap a Derived class that extends 2 other classes in C++, but one of the classes (Base1 on the example bellow), should be wrapped as an interface. (To account for Java not having multiple inheritance).</p>\n\n<p>I've found the problem and created a simple c++ code that demonstrate the problem:</p>\n\n<pre><code>namespace Space {\n  class Base1 {\n      public:\n    virtual void Method1() = 0;\n   };\n  class Base2 {\n    public:\n    virtual void Method2();\n  };\n  class Derived : public Base1, public Base2 {\n    public:\n    virtual void Method1();\n  };\n}\n</code></pre>\n\n<p>The code above represents what I want to wrap in JAVA.</p>\n\n<p>When I run Swig on the above example, it creates Base1 as an Interface (as it should)</p>\n\n<pre><code>public interface Base1 {\n  long Base1_GetInterfaceCPtr();\n  void Method1();\n}\n</code></pre>\n\n<p>And declares (in JAVA) the derived class extending Base2 and implementing Base1 (as it also should), <strong>BUT</strong> , it DOES NOT create a java method inside the Derived class that implements the interface Base1 ( Method1 inside Derived) the full Derived Java class generated is as follows:</p>\n\n<pre><code>public class Derived extends Base2 implements Base1 {\n  private transient long swigCPtr;\n\n  protected Derived(long cPtr, boolean cMemoryOwn) {\n    super(SOURCEIJNI.Derived_SWIGUpcast(cPtr), cMemoryOwn);\n    swigCPtr = cPtr;\n  }\n\n  protected static long getCPtr(Derived obj) {\n    return (obj == null) ? 0 : obj.swigCPtr;\n  }\n\n  protected void finalize() {\n    delete();\n  }\n\n  public synchronized void delete() {\n    if (swigCPtr != 0) {\n      if (swigCMemOwn) {\n        swigCMemOwn = false;\n        SOURCEIJNI.delete_Derived(swigCPtr);\n      }\n      swigCPtr = 0;\n    }\n    super.delete();\n  }\n\n  public long Base1_GetInterfaceCPtr() {\n    return SOURCEIJNI.Derived_Base1_GetInterfaceCPtr(swigCPtr);\n  }\n\n  public Derived() {\n    this(SOURCEIJNI.new_Derived(), true);\n  }\n}\n</code></pre>\n\n<p>And so, Im stuck with a Java compilation error of a SWIG generated class (Derived) that does not implement all methods of its interface (Base1)</p>\n\n<p>What am I missing? I've read the documentation and should work...</p>\n\n<p>My \".i\" file: (using swig 3.0.10)</p>\n\n<pre><code>%module SOURCEI\n\n%include &lt;swiginterface.i&gt;\n%interface_impl(Space::Base1);\n\n%{\n#include \"Source.h\"\n%}\n%include \"Source.h\"\n</code></pre>\n"}, {"tags": ["c++", "boost"], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 1, "last_activity_date": 1468430257, "creation_date": 1468430257, "answer_id": 38357983, "question_id": 38357903, "link": "https://stackoverflow.com/questions/38357903/use-boost-function-as-a-class-data-member-for-calling-different-member-functions/38357983#38357983", "title": "Use Boost Function as a Class Data Member for Calling Different Member Functions", "body": "<p>You're confusing the initialization syntax in the member-initializer-list of a constructor and normal assignment. This:</p>\n\n<pre><code>m_function ( boost::bind(&amp;SillyClass::sillyFunc1, this) );\n</code></pre>\n\n<p>is <em>invoking</em> <code>m_function</code> with a single argument. But <code>m_function</code>'s <code>operator()</code> doesn't take any arguments, hence the error (no match for <strong>call</strong> to <code>boost::function&lt;void()&gt;</code>, candidate expects <strong>0 arguments</strong>). You instead want to assign it:</p>\n\n<pre><code>m_function = boost::bind(&amp;SillyClass::sillyFunc1, this);\n</code></pre>\n\n<p>which should work fine. </p>\n"}], "owner": {"reputation": 431, "user_id": 3171600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fe36b39f0133cdbe53b7f303625ab10c?s=128&d=identicon&r=PG&f=1", "display_name": "joshu", "link": "https://stackoverflow.com/users/3171600/joshu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 38357983, "answer_count": 1, "score": 1, "last_activity_date": 1468430291, "creation_date": 1468429979, "last_edit_date": 1468430291, "question_id": 38357903, "link": "https://stackoverflow.com/questions/38357903/use-boost-function-as-a-class-data-member-for-calling-different-member-functions", "title": "Use Boost Function as a Class Data Member for Calling Different Member Functions", "body": "<p>This is a toy example from a larger piece of code. the gist is, I am trying to make a boost function based on some input parameter. However, the following fails to compile, with an error message, <code>no match for call to boost::function&lt;void()&gt; candidate expects 0 arguments, 1 provided.</code> </p>\n\n<p>hpp:</p>\n\n<pre><code>class SillyClass\n{\npublic:\n    SillyClass();\n    void sillyFunc1();\n    void sillyFunc2();    \n    void setUp(bool );\n\nprivate:\n    boost::function&lt;void ()&gt; m_function;\n};\n</code></pre>\n\n<p>cpp</p>\n\n<pre><code>SillyClass::SillyClass() : m_function()\n{\n}\n\nvoid SillyClass::setUp(bool p_in)\n{\n    if (p_in)\n    {\n        m_function ( boost::bind(&amp;SillyClass::sillyFunc1, this) );\n    }\n    else\n    {\n        m_function ( boost::bind(&amp;SillyClass::sillyFunc2, this) );\n    }\n}\n\nvoid SillyClass::sillyFunc1()\n{\n    std::cout &lt;&lt; \"Silly\" &lt;&lt; std::endl;\n}\n\nvoid SillyClass::sillyFunc2()\n{\n    std::cout &lt;&lt; \"Not Silly\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I know the <code>this</code> is needed for this to even have a chance of working. If I change the line assigning the function to:</p>\n\n<pre><code>boost::function&lt;void ()&gt; f(boost::bind(&amp;SillyClass::sillyFunc2, this));\nm_function = f;\n</code></pre>\n\n<p>This compiles just fine. This is the first time I am trying to use boost function for this sort of thing, so I am sure I must be overlooking something. However, the documentation doesn't seem to mention why this fails to compile. Can someone point out to me what I am missing? </p>\n"}, {"tags": ["c++", "sdk"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1468429983, "post_id": 38357853, "comment_id": 64128037, "body": "It&#39;s a C style type cast, telling the compiler that it should treat the right hand side as if it is of type <code>RECOG_OBJECTS*</code>."}, {"owner": {"reputation": 1852, "user_id": 369604, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG", "display_name": "Loduwijk", "link": "https://stackoverflow.com/users/369604/loduwijk"}, "edited": false, "score": 2, "creation_date": 1468430437, "post_id": 38357853, "comment_id": 64128289, "body": "Downvoter: I know SO rules are basically &quot;vote whatever you feel is appropriate,&quot; but please rethink it in cases like this. People who are just starting out may not even know what they are looking at, and they are forced to ask very un-pointed questions just to get their foot in the door. If you don&#39;t know what you don&#39;t know, you can&#39;t ask the appropriate question. Don&#39;t make this person feel like they shouldn&#39;t get help."}], "answers": [{"tags": [], "owner": {"reputation": 1852, "user_id": 369604, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG", "display_name": "Loduwijk", "link": "https://stackoverflow.com/users/369604/loduwijk"}, "is_accepted": false, "score": 1, "last_activity_date": 1468429999, "creation_date": 1468429999, "answer_id": 38357915, "question_id": 38357853, "link": "https://stackoverflow.com/questions/38357853/c-please-can-someone-explain-this-line-of-code/38357915#38357915", "title": "C++ Please can someone explain this line of code?", "body": "<p>It is using a cast to cause the compiler to reinterpret pEvtInst as a pointer to RECOG_OBJECTS. Perhaps, at that point in the code, pEvtInst is defined as some other type of variable. Casts allow you to tell the compiler to treat variables as if they were variables of a different type.</p>\n\n<pre><code>int x = 0x48692100;\nprintf(\"Message: %s\\n\", (char*)&amp;x);\n</code></pre>\n\n<p>In the above example, even though <code>x</code> is an integer, I have \"casted\" it as a <code>(char*)</code> so that it is treated as if it were a pointer to a character string instead of the integer it really is. In this specific case, if I chose the number correctly, it should print \"Hi!\".</p>\n"}, {"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1468432610, "creation_date": 1468432610, "answer_id": 38358679, "question_id": 38357853, "link": "https://stackoverflow.com/questions/38357853/c-please-can-someone-explain-this-line-of-code/38358679#38358679", "title": "C++ Please can someone explain this line of code?", "body": "<p>It defines <code>pRecogObjects</code> as a pointer to <code>RECOG_OBJECTS</code> and initialises that pointer to the value <code>(RECOG_OBJECTS*)pEvtInst</code>.</p>\n\n<p><code>(RECOG_OBJECTS*)pEvtInst</code> converts the value of <code>pEvtInst</code> into a pointer to <code>RECOG_OBJECTS</code>.    This is a explicit type conversion (sometimes called a typecast) from C.</p>\n\n<p>The effect depends on what <code>pEvtInst</code> actually is (e.g. if it is a pointer, what does it point to).</p>\n\n<p>BTW:  using explicit type conversions (aka typecasts) is often not a hallmark of advanced C++.   More often than not, advanced C++ involves using techniques in order to avoid doing such conversions.</p>\n"}], "owner": {"reputation": 21, "user_id": 6585676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7566d8f39bea9b169715332f542c79c5?s=128&d=identicon&r=PG&f=1", "display_name": "RedPanda", "link": "https://stackoverflow.com/users/6585676/redpanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1468432610, "creation_date": 1468429807, "last_edit_date": 1468429853, "question_id": 38357853, "link": "https://stackoverflow.com/questions/38357853/c-please-can-someone-explain-this-line-of-code", "title": "C++ Please can someone explain this line of code?", "body": "<p>code line: <code>RECOG_OBJECTS *pRecogObjects = (RECOG_OBJECTS*)pEvtInst;</code></p>\n\n<p>I'm currently working with an SDK while also learning advanced C++. The right hand side in particular is currently hard for me to interpret. </p>\n"}, {"tags": ["c++", "linux"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1468429745, "post_id": 38357780, "comment_id": 64127873, "body": "<code>std::cout &lt;&lt; OPENSSL_VERSION_NUMBER &lt;&lt; &#39;\\n&#39;;</code>?"}, {"owner": {"reputation": 658, "user_id": 6177689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/o5C91.jpg?s=128&g=1", "display_name": "Ingenioushax", "link": "https://stackoverflow.com/users/6177689/ingenioushax"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1468429897, "post_id": 38357780, "comment_id": 64127970, "body": "@Galik is there any specific reason you&#39;re mixing C and C++? Why not use <code>std::endl</code>? If you want to use <code>\\n</code> it should just be a <code>printf</code>, if you&#39;re going to use <code>std::cout</code> then that should be the standard held for all statements and should continue to use the standard library."}, {"owner": {"reputation": 11522, "user_id": 335355, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b2c0c81ce05b45c2dbb554138daf1e47?s=128&d=identicon&r=PG", "display_name": "Blub", "link": "https://stackoverflow.com/users/335355/blub"}, "edited": false, "score": 0, "creation_date": 1468430124, "post_id": 38357780, "comment_id": 64128118, "body": "Galik, it&#39;s a library"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 658, "user_id": 6177689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/o5C91.jpg?s=128&g=1", "display_name": "Ingenioushax", "link": "https://stackoverflow.com/users/6177689/ingenioushax"}, "edited": false, "score": 3, "creation_date": 1468430223, "post_id": 38357780, "comment_id": 64128177, "body": "@Ingenioushax: What are you talking about? <code>&#39;\\n&#39;</code> is a perfectly valid C++ character literal."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 658, "user_id": 6177689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/o5C91.jpg?s=128&g=1", "display_name": "Ingenioushax", "link": "https://stackoverflow.com/users/6177689/ingenioushax"}, "edited": false, "score": 3, "creation_date": 1468430239, "post_id": 38357780, "comment_id": 64128184, "body": "@Ingenioushax <code>\\n</code> adds a newline. <code>std::endl</code> adds a newline <i>and</i> flushes the stream. Two different things. <code>\\n</code> is perfectly fine (and preferable) when you just want the newline and not the flush."}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "reply_to_user": {"reputation": 658, "user_id": 6177689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/o5C91.jpg?s=128&g=1", "display_name": "Ingenioushax", "link": "https://stackoverflow.com/users/6177689/ingenioushax"}, "edited": false, "score": 1, "creation_date": 1468430290, "post_id": 38357780, "comment_id": 64128206, "body": "@Ingenioushax Using <code>&#39;\\n&#39;</code> is not &quot;mixing C and C++&quot; - ending a line with <code>&#39;\\n&#39;</code> is perfectly valid C++. The only real difference between the two is that <code>std::endl</code> <a href=\"http://stackoverflow.com/a/213977/1600898\">also flushes the buffer</a>."}, {"owner": {"reputation": 658, "user_id": 6177689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/o5C91.jpg?s=128&g=1", "display_name": "Ingenioushax", "link": "https://stackoverflow.com/users/6177689/ingenioushax"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1468430917, "post_id": 38357780, "comment_id": 64128588, "body": "@BenjaminLindley, I know it&#39;s <i>valid</i> C++. So is <code>int *myInt = (int*)malloc(500 * sizeof(int));</code>. Is it valid? Yes. Does it work? Sure. Is it conforming to the standards? No. While <code>\\n</code> is a perfectly valid escape sequence, <i>I</i> wouldn&#39;t put it as the preferred method for a line ending in C++."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 658, "user_id": 6177689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/o5C91.jpg?s=128&g=1", "display_name": "Ingenioushax", "link": "https://stackoverflow.com/users/6177689/ingenioushax"}, "edited": false, "score": 0, "creation_date": 1468431035, "post_id": 38357780, "comment_id": 64128650, "body": "@Ingenioushax: But <i>why</i> wouldn&#39;t you? And what&#39;s it have to do with &quot;mixing C and C++&quot;?"}, {"owner": {"reputation": 658, "user_id": 6177689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/o5C91.jpg?s=128&g=1", "display_name": "Ingenioushax", "link": "https://stackoverflow.com/users/6177689/ingenioushax"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1468431296, "post_id": 38357780, "comment_id": 64128802, "body": "@BenjaminLindley, <b>A</b>) I think it&#39;s laziness unless embeeded in a string (errr). The following is perfectly fine in my book, but still falls in the lazy category <code>cout &lt;&lt; &quot;This is a string\\n&quot;;</code>. <b>B</b>) It&#39;s much harder to find &#39;<code>\\n</code>&#39; than it is <code>&lt;&lt; endl</code> if you need to hunt a bug or implement a feature change. <b>C</b>) A decent number of developers don&#39;t <i>know</i> that there is a STDOUT and STDIN buffer."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 658, "user_id": 6177689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/o5C91.jpg?s=128&g=1", "display_name": "Ingenioushax", "link": "https://stackoverflow.com/users/6177689/ingenioushax"}, "edited": false, "score": 0, "creation_date": 1468431514, "post_id": 38357780, "comment_id": 64128937, "body": "@Ingenioushax We&#39;ll have to agree to differ. I would say that ending a line with <code>\\n</code> should be the recommended method over <code>std::endl</code> which can be less efficient. Also its easier for maintenance if its sent as a separate character and not embedded in the string literal."}, {"owner": {"reputation": 658, "user_id": 6177689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/o5C91.jpg?s=128&g=1", "display_name": "Ingenioushax", "link": "https://stackoverflow.com/users/6177689/ingenioushax"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1468431613, "post_id": 38357780, "comment_id": 64128998, "body": "@Galik: I can see that point, and I don&#39;t necessarily disagree with the statement. I suppose that&#39;s why coding standards for grander issues are for the greater good of humanity. :D"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1468431752, "post_id": 38357780, "comment_id": 64129077, "body": "@Blub oopsie, of course. You could try <code>$ strings &#47;path&#47;to&#47;library.so</code>"}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 658, "user_id": 6177689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/o5C91.jpg?s=128&g=1", "display_name": "Ingenioushax", "link": "https://stackoverflow.com/users/6177689/ingenioushax"}, "edited": false, "score": 0, "creation_date": 1468433681, "post_id": 38357780, "comment_id": 64130297, "body": "@Ingenioushax Both <code>\\n</code> and <code>std::endl</code> are entirely valid ways of sending a newline in C++, and each has its uses.  If you&#39;re only outputting a single line, go with <code>endl</code> to flush the buffer afterwards.  If you&#39;re outputting multiple lines, use <code>\\n</code> between each line, and <code>endl</code> after the final line.  You&#39;ll generally get more efficient results that way.  The main benefit of <code>endl</code>, after all, is that it both sends <code>\\n</code> and flushes the buffer for you at the same time, so you don&#39;t have to do both operations separately."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1468430121, "creation_date": 1468430121, "answer_id": 38357941, "question_id": 38357780, "link": "https://stackoverflow.com/questions/38357780/how-do-i-check-which-define-was-compiled-into-binary/38357941#38357941", "title": "How do I check which #define was compiled into binary?", "body": "<p>As the comment by @Galik mentions, you can print out the value of the macro if you can edit the source.</p>\n\n<p>If all you have is a binary then it gets hard, since the preprocessor will have replaced the macro name with its value before the compiler ever sees the source. So the binary does not contain any \"link\" back to the original macro name.</p>\n\n<p>Some compilers (in my experience clang does it best) <em>can</em> embed such information in the binary when building with debug symbols enabled so it can print better error messages and make debugging more effective. \nBut in an optimized binary without debug symbols you are close to being out of luck. That is, unless you start digging through a disassembly of the binary around where you know the macro is used and you know potential values it might take. Then you <em>might</em> be able to dig it out.</p>\n"}], "owner": {"reputation": 11522, "user_id": 335355, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b2c0c81ce05b45c2dbb554138daf1e47?s=128&d=identicon&r=PG", "display_name": "Blub", "link": "https://stackoverflow.com/users/335355/blub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1468430121, "creation_date": 1468429540, "question_id": 38357780, "link": "https://stackoverflow.com/questions/38357780/how-do-i-check-which-define-was-compiled-into-binary", "title": "How do I check which #define was compiled into binary?", "body": "<p>for some reason the wrong opensslv.h header is being included via cmake, or so I think. I would like to be sure and print out which value for \"OPENSSL_VERSION_NUMBER\" was compiled into my binary. \nHow do I do that?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 3, "creation_date": 1468429202, "post_id": 38357630, "comment_id": 64127544, "body": "What about children of Z and the classes of the objects it creates? Can those access F? What&#39;s preventing Z from simply constructing a proxy to access F? This seems like it might be an XY problem."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1468429792, "post_id": 38357630, "comment_id": 64127907, "body": "If some classes shouldn&#39;t have access to a function, it should be protected/private, and it should <code>friend</code> the classes that need access.  That&#39;s what the feature exists for."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1468430070, "post_id": 38357630, "comment_id": 64128086, "body": "@MooingDuck There actually are ways to refactor the <code>friend</code> relationship. Have a look at my (linked) answer."}, {"owner": {"reputation": 39, "user_id": 6188535, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fee797e02fdbb9db6efdc3576fef9102?s=128&d=identicon&r=PG&f=1", "display_name": "Erkam D", "link": "https://stackoverflow.com/users/6188535/erkam-d"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1468932510, "post_id": 38357630, "comment_id": 64322240, "body": "@jaggedSpire Derived classes of Z is not so important for my case. Why do I want to construct proxy access to F function, I want to prevent accessing F function from Z class."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1468937473, "post_id": 38357630, "comment_id": 64326157, "body": "@wArtist my point is even if there was a simple, elegant way to prevent access from a <i>single</i> class, it would be incredibly easy to circumvent and therefore offer no reliable guarantees regarding access protection within the class. Preventing access to a single class would be a show more than anything else--it wouldn&#39;t prevent anything from getting called in <code>Z</code>&#39;s member functions. If you want to prevent access to some subset of public functions, make an accessing wrapper class that only provides access to the relevant functions, and pass <i>that</i> in to the revelvant function instead."}, {"owner": {"reputation": 39, "user_id": 6188535, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fee797e02fdbb9db6efdc3576fef9102?s=128&d=identicon&r=PG&f=1", "display_name": "Erkam D", "link": "https://stackoverflow.com/users/6188535/erkam-d"}, "edited": false, "score": 0, "creation_date": 1469805972, "post_id": 38357630, "comment_id": 64705741, "body": "@jaggedSprite Hmm, I think I have forgotten to say that the 30 classes already have numerous calls on F function. I don&#39;t want to change codes in them. I simply want to prevent access of Z class on funtion F without changing other classes&#39; way of call F function."}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1468430285, "post_id": 38357793, "comment_id": 64128202, "body": "<code>ClassAAccessor</code> defines but does not declare <code>setInternalInterfaceRef</code>, which is wierd."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1468431727, "last_edit_date": 1495542178, "creation_date": 1468429572, "answer_id": 38357793, "question_id": 38357630, "link": "https://stackoverflow.com/questions/38357630/is-there-a-way-to-prevent-a-public-function-being-used-from-another-class-withou/38357793#38357793", "title": "Is there a way to prevent a public function being used from another class without using Friend classes (C++)", "body": "<p>As mentioned in the other answers, there's no way to kind of <code>unfriend</code> or <code>exclude</code> a particular class from your public interface.</p>\n\n<hr>\n\n<p>Though you can use the same principle I to have <code>protected</code> interfaces, as have described in this Q&amp;A:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/27492132/how-can-i-remove-refactor-a-friend-dependency-declaration-properly\"><strong>How can I remove/refactor a \u00abfriend\u00bb dependency declaration properly?</strong></a>.</p>\n\n<p>This would require a client to implement a specific interface to call a function from the class that provides the <code>protected</code> interface:</p>\n\n<blockquote>\n  <p>Here's the C++ implementation:</p>\n\n<pre><code>class ClassAAccessor {\npublic:\n    ClassAAccessor(ClassA&amp; classA);\n    void setInternalInterfaceRef(InternalInterface &amp; newValue) {\n        internalInterfaceRef = &amp;newValue;\n    }\nprivate:  \n    InternalInterface* internalInterfaceRef;\n};\n</code></pre>\n  \n  <p>This one is actually called, when the also newly introduced method <code>ClassA::attachAccessor()</code> method is called:</p>\n\n<pre><code>class ClassA : protected InternalInterface {\npublic:\n    // ...\n    attachAccessor(ClassAAccessor &amp; accessor);\n    // ...\n};\n\nClassA::attachAccessor(ClassAAccessor &amp; accessor) {\n    accessor.setInternalInterfaceRef(*this); // The internal interface can be handed\n                                             // out here only, since it's inherited \n                                             // in the protected scope.\n}\n</code></pre>\n  \n  <p>Thus the constructor of <code>ClassAAccessor</code> can be rewritten in the following way:</p>\n\n<pre><code>ClassAAccessor::ClassAAccessor(ClassA&amp; classA)\n: internalInterfaceRef(0) {\n    classA.attachAccessor(*this);\n}\n</code></pre>\n</blockquote>\n\n<hr>\n\n<p><sub>I don't want to mark your question as duplicate, because the answer I link was more about UML design, but contains a c++ sample.</sub></p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 6188535, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fee797e02fdbb9db6efdc3576fef9102?s=128&d=identicon&r=PG&f=1", "display_name": "Erkam D", "link": "https://stackoverflow.com/users/6188535/erkam-d"}, "edited": false, "score": 0, "creation_date": 1468445223, "post_id": 38357818, "comment_id": 64136334, "body": "Problem is as I said, function must be public because it is being using from many other classes. Making these classes friend is long story. So I want a shortcut to the problem."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 4, "last_activity_date": 1468429672, "creation_date": 1468429672, "answer_id": 38357818, "question_id": 38357630, "link": "https://stackoverflow.com/questions/38357630/is-there-a-way-to-prevent-a-public-function-being-used-from-another-class-withou/38357818#38357818", "title": "Is there a way to prevent a public function being used from another class without using Friend classes (C++)", "body": "<p>If the function is public you cannot prevent others from calling it.</p>\n\n<p>You can make it so that the function is not exported by the linker outside the library where it is implemented, but that's about it.</p>\n\n<p>What problem are you <em>actually</em> trying to solve?</p>\n"}, {"comments": [{"owner": {"reputation": 1852, "user_id": 369604, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG", "display_name": "Loduwijk", "link": "https://stackoverflow.com/users/369604/loduwijk"}, "edited": false, "score": 0, "creation_date": 1468429829, "post_id": 38357824, "comment_id": 64127927, "body": "If panta&#39;s (sorry, poor Greek support on this system) answer is getting at what you want, then I must be misunderstanding what you want. We could use some clarification about which route you are looking for."}], "tags": [], "owner": {"reputation": 1852, "user_id": 369604, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG", "display_name": "Loduwijk", "link": "https://stackoverflow.com/users/369604/loduwijk"}, "is_accepted": false, "score": 0, "last_activity_date": 1468429694, "creation_date": 1468429694, "answer_id": 38357824, "question_id": 38357630, "link": "https://stackoverflow.com/questions/38357630/is-there-a-way-to-prevent-a-public-function-being-used-from-another-class-withou/38357824#38357824", "title": "Is there a way to prevent a public function being used from another class without using Friend classes (C++)", "body": "<p>Off the top of my head, I don't think that's possible. You want Z calls to A::F to generate a compile error? I'm not sure how you would even add that feature to a language. If such a feature did exist, then either you would have to create a list in Class A which contains all of the targets which can or cannot use function F, or you would need to specify in other classes that they are not allowing themselves to use A::F.</p>\n\n<p>So you want something like</p>\n\n<pre><code>class Z {\n    denied A::F;\n}\n</code></pre>\n\n<p>That would probably be the best/easiest way to add such a feature, with some keyword meant to be used like above.</p>\n\n<p>I don't think it exists. Features like friend exist because it is often very useful to <em>add</em> accessibility to something which normally you could not access. It is rarely necessary to specifically <em>remove</em> accessibility to something you normally can access, and the answer from compiler engineers would probably be \"Just don't use A::F in Z.\"</p>\n\n<p>Not saying the idea is dumb or that it's useless, just that it's not useful enough to be a feature, which is why I don't think it is one.</p>\n"}], "owner": {"reputation": 39, "user_id": 6188535, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fee797e02fdbb9db6efdc3576fef9102?s=128&d=identicon&r=PG&f=1", "display_name": "Erkam D", "link": "https://stackoverflow.com/users/6188535/erkam-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1468431727, "creation_date": 1468429037, "question_id": 38357630, "link": "https://stackoverflow.com/questions/38357630/is-there-a-way-to-prevent-a-public-function-being-used-from-another-class-withou", "title": "Is there a way to prevent a public function being used from another class without using Friend classes (C++)", "body": "<p>I know friend classes and I want exactly opposite of it.</p>\n\n<p>Ex: Class A has a public function named F. While other 30 classes have access to F function, Class Z cannot access to F function.</p>\n"}, {"tags": ["c++", "text", "encoding", "non-ascii-characters", "istream"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1468429159, "post_id": 38357542, "comment_id": 64127519, "body": "There are many ways of encoding the characters in a text file, ASCII, MBCS, UTF-8, UTF-16BE, UTF-16LE, etc.  What&#39;s the encoding of the file you are trying to read?  If it is one of the Unicode formats does it include a BOM (byte order mark)?"}, {"owner": {"reputation": 458, "user_id": 6344097, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b2ebf3bff8daa46caade2388685c8413?s=128&d=identicon&r=PG&f=1", "display_name": "Noam Rodrik", "link": "https://stackoverflow.com/users/6344097/noam-rodrik"}, "edited": false, "score": 0, "creation_date": 1468429576, "post_id": 38357542, "comment_id": 64127758, "body": "But when you read a text file, you will get them, just as a char array it won&#39;t always visualize the characters. Your code is alright in that sense."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1468429713, "post_id": 38357542, "comment_id": 64127851, "body": "There is no &quot;ANSI&quot; character set.  There is 7-bit ASCII, and then there are Windows code pages.  For a text file, you have to know the character encoding in order to make sense of it."}, {"owner": {"reputation": 1202, "user_id": 673679, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ac5b75f2ba59f84ac69e71018275702b?s=128&d=identicon&r=PG", "display_name": "user673679", "link": "https://stackoverflow.com/users/673679/user673679"}, "edited": false, "score": 0, "creation_date": 1468430069, "post_id": 38357542, "comment_id": 64128083, "body": "try posting code for the comparison..."}], "owner": {"reputation": 1083, "user_id": 2117589, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IE1qb.png?s=128&g=1", "display_name": "Lord Rixuel", "link": "https://stackoverflow.com/users/2117589/lord-rixuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 982, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1468465148, "creation_date": 1468428762, "last_edit_date": 1468429866, "question_id": 38357542, "link": "https://stackoverflow.com/questions/38357542/c-how-to-read-accent-characters-from-a-text-file", "title": "C++ How to read accent characters from a text file?", "body": "<p>I have a text file (ANSI) that contains accent characters, for example:</p>\n\n<pre><code>A\n\u00e0\u00e0\n\u00e9\u00e9c\n</code></pre>\n\n<p>I'm unable get the accent characters to show and to manipulate with.</p>\n\n<p>This is my code:</p>\n\n<pre><code>ifstream readfile(argv[1]); // to read a text file\nstring output;\n\nwhile (!readfile.eof())\n{\n    getline(readfile, output);\n    const char *p = output.c_str(); \n\n    while (*p != '\\0')\n    {\n        //Some of my codes here for manipulation, comparison...\n        cout &lt;&lt; *p++;\n    }\n    cout &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I did some research and I also tried wcout, wifstream, wstring, wchar_t, but they don't seem to work... I also notice the \"getline\" is unable to read accent characters.</p>\n\n<p>With a text file without any accent characters, my current code works perfectly.</p>\n\n<p>When there is an accent character, it shows a strange character instead and because of that, I'm unable to do some manipulation.</p>\n\n<p>EDIT:</p>\n\n<p>With const char *p, I'm unable to assign the accent characters to do comparisons in the program itself.</p>\n\n<p>What I'm really trying to do is getting the accent characters from the text file, and then do some comparison inside the program/code, and when the comparison is over, it writes the correct output in a new text file. </p>\n\n<p>The input and output text files show the correct accent characters.\nThe real issue is I want to compare the accent characters in the program/code itself.</p>\n\n<p>EDIT2:</p>\n\n<p>For example,</p>\n\n<p>My input for the const char *p is \"\u00e0\".\nIn my program, I use the p (which is \"\u00e0\", but it shows \u2592 instead) to compare \"\u00e0\", the result is suppose to be true, but it gives me false.</p>\n\n<p>\"\u00e0\" compare with \"\u00e0\" should be true.</p>\n\n<p>but in my program, instead, it's</p>\n\n<p>\"\u2592\" compare with \"\u00e0\", and it's false.</p>\n"}, {"tags": ["c++", "matlab", "mex"], "comments": [{"owner": {"reputation": 620, "user_id": 4750105, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/717120f6863dcca04e190d6b7eac04aa?s=128&d=identicon&r=PG&f=1", "display_name": "SemtexB", "link": "https://stackoverflow.com/users/4750105/semtexb"}, "reply_to_user": {"reputation": 18546, "user_id": 5698672, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PIdQn.jpg?s=128&g=1", "display_name": "Sardar Usama", "link": "https://stackoverflow.com/users/5698672/sardar-usama"}, "edited": false, "score": 0, "creation_date": 1468430863, "post_id": 38357392, "comment_id": 64128558, "body": "I&#39;m writing this in matlab, but it&#39;s a c++ file, I did it accoringly to this tutorial: <a href=\"http://de.mathworks.com/help/matlab/matlab_external/standalone-example.html\" rel=\"nofollow noreferrer\">de.mathworks.com/help/matlab/matlab_external/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 620, "user_id": 4750105, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/717120f6863dcca04e190d6b7eac04aa?s=128&d=identicon&r=PG&f=1", "display_name": "SemtexB", "link": "https://stackoverflow.com/users/4750105/semtexb"}, "edited": false, "score": 0, "creation_date": 1468437247, "post_id": 38359729, "comment_id": 64132320, "body": "As far as I understand <code>ndim</code> and <code>dims</code> represent the size of, in this case, <code>rowvec</code>, right? But what if I don&#39;t know the size of rowvec at that time? Actually <code>*nnz</code> is an <code>int</code> scalar and represents the length of the three vectors <code>rowvec</code>, <code>colvec</code> and <code>valvec</code>."}, {"owner": {"reputation": 191, "user_id": 6547788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26299c91d1c3a36b9ee668e644dc5af8?s=128&d=identicon&r=PG&f=1", "display_name": "TWhelan", "link": "https://stackoverflow.com/users/6547788/twhelan"}, "reply_to_user": {"reputation": 620, "user_id": 4750105, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/717120f6863dcca04e190d6b7eac04aa?s=128&d=identicon&r=PG&f=1", "display_name": "SemtexB", "link": "https://stackoverflow.com/users/4750105/semtexb"}, "edited": false, "score": 0, "creation_date": 1468438047, "post_id": 38359729, "comment_id": 64132711, "body": "Did you miss my edit?   If the func interface is set, do the mxArray creation after and copy the data."}, {"owner": {"reputation": 620, "user_id": 4750105, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/717120f6863dcca04e190d6b7eac04aa?s=128&d=identicon&r=PG&f=1", "display_name": "SemtexB", "link": "https://stackoverflow.com/users/4750105/semtexb"}, "edited": false, "score": 0, "creation_date": 1468438209, "post_id": 38359729, "comment_id": 64132775, "body": "Ok, if there is no other possibility I&#39;ll copy it. Thank you!"}, {"owner": {"reputation": 620, "user_id": 4750105, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/717120f6863dcca04e190d6b7eac04aa?s=128&d=identicon&r=PG&f=1", "display_name": "SemtexB", "link": "https://stackoverflow.com/users/4750105/semtexb"}, "edited": false, "score": 0, "creation_date": 1468490397, "post_id": 38359729, "comment_id": 64152991, "body": "Another problem arised: the arrays <code>rowvec</code>, etc. will be filled in <code>func</code>, and they are filled correctly (I double checked), but as soon as I leave <code>func</code> the arrays are filled with 0&#39;s, i.e. a for loop over <code>rowvec</code> within <code>mexFunction</code> prints 0&#39;s?! Why do I loose the values?"}, {"owner": {"reputation": 620, "user_id": 4750105, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/717120f6863dcca04e190d6b7eac04aa?s=128&d=identicon&r=PG&f=1", "display_name": "SemtexB", "link": "https://stackoverflow.com/users/4750105/semtexb"}, "edited": false, "score": 0, "creation_date": 1468506511, "post_id": 38359729, "comment_id": 64163932, "body": "It&#39;s ok. I could fix it already. Thank you very much for your help!"}], "tags": [], "owner": {"reputation": 191, "user_id": 6547788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26299c91d1c3a36b9ee668e644dc5af8?s=128&d=identicon&r=PG&f=1", "display_name": "TWhelan", "link": "https://stackoverflow.com/users/6547788/twhelan"}, "is_accepted": true, "score": 1, "last_activity_date": 1468436545, "creation_date": 1468436545, "answer_id": 38359729, "question_id": 38357392, "link": "https://stackoverflow.com/questions/38357392/assign-float-or-int-to-mxarray/38359729#38359729", "title": "Assign float * or int * to mxArray", "body": "<p>You missed a step. </p>\n\n<p>You need to use <a href=\"http://www.mathworks.com/help/matlab/apiref/mxcreatenumericarray.html?searchHighlight=mxcreatenumericarray\" rel=\"nofollow\">mxCreateNumericArray</a> and assign that to your output arguments. </p>\n\n<p>Then use mxGetData on the created arrays and set your int/float pointers to that.</p>\n\n<p>Then call func to fill the outputs.</p>\n\n<pre><code>plhs[0] = mxCreateNumericArray(ndim, *dims, classid, ComplexFlag);\n...\nrowvec=(int*)mxGetData(plhs[0]);\n...\nfunc(rowvec, colvec, valvec, nnz);\n</code></pre>\n\n<p>If you can change the interface, you might want to consider func(plhs) instead. You will need to know the size of the output arrays before you can use the pointers. </p>\n"}], "owner": {"reputation": 620, "user_id": 4750105, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/717120f6863dcca04e190d6b7eac04aa?s=128&d=identicon&r=PG&f=1", "display_name": "SemtexB", "link": "https://stackoverflow.com/users/4750105/semtexb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 868, "favorite_count": 0, "accepted_answer_id": 38359729, "answer_count": 1, "score": 1, "last_activity_date": 1468437492, "creation_date": 1468428266, "last_edit_date": 1468437492, "question_id": 38357392, "link": "https://stackoverflow.com/questions/38357392/assign-float-or-int-to-mxarray", "title": "Assign float * or int * to mxArray", "body": "<p>I got a typical cpp function in matlab using mex</p>\n\n<pre><code>#include \"mex.h\"\n\nvoid func (int * rowvec, int * colvec, float * valvec, int * nnz){/*fill arguments*/}\n\n\n\nvoid mexFunction(int nlhs, mxArray *plhs[],\n                 int nrhs, const mxArray *prhs[])\n</code></pre>\n\n<p>where I check that in I have enough output variables available</p>\n\n<pre><code>if(nlhs != 4) {\n  mexErrMsgIdAndTxt(\"MyToolbox:arrayProduct:nlhs\",\n                  \"Four outputs required.\");\n}\n</code></pre>\n\n<p>Furthermore, in this function I declare four variables:</p>\n\n<pre><code>int *rowvec;        /* 1st output array */\nint *colvec;        /* 2nd output array */\nfloat *valvec;      /* 3rd output array */\nint *nnz;           /* 4th output scalar */\n</code></pre>\n\n<p>They will be defined/filled in a function:</p>\n\n<pre><code>func(rowvec, colvec, valvec, nnz) //arguments get filled with values\n</code></pre>\n\n<p>Now I want to do something like that:</p>\n\n<pre><code>plhs[0] = rowvec;\nplhs[1] = colvec;\nplhs[2] = valvec;\nplhs[3] = nnz;\n</code></pre>\n\n<p>It unfortunately throws four understandable errors, because those are two different data types. The errors are like this:</p>\n\n<pre><code>cannot convert \u2018int*\u2019 to \u2018mxArray* {aka mxArray_tag*}\u2019 in assignment plhs[0] = rowvec;\n</code></pre>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["c++", "xcode", "random", "time"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1468428827, "post_id": 38357290, "comment_id": 64127323, "body": "Not related to your problem, but the value of <code>O</code> will always be the same, since you generate it, prior to initializing the random number generator. EDIT: your code seems to compile fine on <a href=\"https://ideone.com/HB7EdK\" rel=\"nofollow noreferrer\">ideone</a>."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1468436996, "post_id": 38357290, "comment_id": 64132198, "body": "Please don&#39;t use &#39;O&#39; as the name of a variable. It looks too much like &#39;0&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "edited": false, "score": 0, "creation_date": 1468428776, "post_id": 38357515, "comment_id": 64127290, "body": "Thank you Bo! This got rid of the error, but it brought me to another error. I now get one that starts at my if(O == 2) statement that reads thread 1: breakpoint 1.1"}], "tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 1, "last_activity_date": 1468428684, "creation_date": 1468428684, "answer_id": 38357515, "question_id": 38357290, "link": "https://stackoverflow.com/questions/38357290/xcode-c-errors-preventing-further-output-past-srand/38357515#38357515", "title": "Xcode C++ Errors preventing further output past srand()", "body": "<p><code>time(0)</code> returns a value of type <code>time_t</code>, which apparently is a <code>long</code> on your machine.</p>\n\n<p>When you pass this <code>long</code> to <code>srand()</code>, expecting an <code>unsigned int</code>, not all values of a <code>long</code> will fit in an <code>unsigned int</code>. You can shoehorn it in by using a cast to tell the compiler that you don't care much about this.</p>\n\n<pre><code>srand(static_cast&lt;unsigned int&gt;(time(0))); \n</code></pre>\n\n<p>As you look for some, more or less, random numbers, the loss of precision is not important in this case.</p>\n"}], "owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1468428684, "creation_date": 1468427906, "question_id": 38357290, "link": "https://stackoverflow.com/questions/38357290/xcode-c-errors-preventing-further-output-past-srand", "title": "Xcode C++ Errors preventing further output past srand()", "body": "<p>I am working on a program that generates two random numbers and an if statement that generates either a \"+\" for addition or a \"-\" for subtraction. I currently cannot check and see what my putput is so I can correct any mistakes because the program runs my opening \"Welcome\" statement then displays in blue parentheses (lldb) and the code stops there. I noticed next to my srand(time(0)) function that it turned green and says \"thread 1: breakpoint 1.1\" and under it reads \"Implicit conversion loses integer precision: 'time_t' (aka 'long') to 'unsigned int'\". Is there a way to workaround these or get the errors to go away? My code is below. Any help or insight would be appreciated, thanks!</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;ctime&gt;\nusing namespace std;\n\nint main()\n\n{\n    cout &lt;&lt; \"Welcome to the Math Tutor!\" &lt;&lt; endl;\n\n    int N1, N2;\n    int O = rand() % 2;\n    int Result;\n    int Answer;\n\n    srand(time(0));\n\n    if(O == 2)\n    {\n        cout &lt;&lt; \"+\";\n    }\n\n    else\n    {\n        cout &lt;&lt; \"-\";\n    }\n\n    N1 = 100 + rand() % 999;\n    N2 = 100 + rand() % 999;\n    Result = N1 + O + N2;\n\n    cout &lt;&lt; setw(10) &lt;&lt; N1 &lt;&lt; endl;\n    cout &lt;&lt; setw(10) &lt;&lt; N2 &lt;&lt; O &lt;&lt; \"\\n\";\n    cout &lt;&lt; setw(10) &lt;&lt; \"------\\n\\n\";\n\n    cout &lt;&lt; \"Enter your answer: \";\n    cin &gt;&gt; Answer;\n\n    if(Answer == Result)\n    {\n        cout &lt;&lt; \"You are correct!\\n\\n\";\n    }\n\n    else\n    {\n        cout &lt;&lt; \"You are incorrect, the correct answer is: \" &lt;&lt; Result &lt;&lt; \"\\n\\n\";\n    }\n\n    cin.ignore(1);\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "protocol-buffers"], "answers": [{"tags": [], "owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "is_accepted": false, "score": 1, "last_activity_date": 1468446620, "creation_date": 1468446620, "answer_id": 38362304, "question_id": 38357265, "link": "https://stackoverflow.com/questions/38357265/qt-5-7-google-protobuf-file-not-found-include-path-error/38362304#38362304", "title": "QT 5.7 - google/protobuf file not found - include PATH error", "body": "<p>Using Protobuf 2.4 with Qt 5.7 in Windows/Linux/Mac. Download and compile Protobuf 2.4 with the compiler you are using, (Im using MSVC/MinGW on Windows, gcc in Linux, clan on Mac OS). And edit your .pro file. My .pro configuration using this steps:</p>\n\n<p>Load the compiled library for debug/release mode:</p>\n\n<pre><code>    #For Windows\n    win32 {\n        CONFIG(debug, release|debug) {\n            win32:LIBS += -llibprotobuf-debug\n        } else {\n            win32:LIBS += -llibprotobuf\n        }\n    }\n    #For linux\n    !win32:LIBS += -lprotobuf\n</code></pre>\n\n<p>Include the path with all protobuf source code:</p>\n\n<pre><code>win32:INCLUDEPATH += \"..\\\\...\\\\directoty_protobuf\\\\src\"\n</code></pre>\n\n<p>Its working fine for me.</p>\n"}], "owner": {"reputation": 33, "user_id": 3817082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c59202bd15bc420775da2f5f62a24de?s=128&d=identicon&r=PG&f=1", "display_name": "NeutralA", "link": "https://stackoverflow.com/users/3817082/neutrala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1522, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1468446620, "creation_date": 1468427839, "last_edit_date": 1468439341, "question_id": 38357265, "link": "https://stackoverflow.com/questions/38357265/qt-5-7-google-protobuf-file-not-found-include-path-error", "title": "QT 5.7 - google/protobuf file not found - include PATH error", "body": "<p>I am trying to use google protobuf 2.6 in QT 5.7 (clang 7.0) with QT creator 4.0.3 on OSX without much luck.</p>\n\n<p>The .pro file has</p>\n\n<pre><code>LIBS += `pkg-config --cflags -- libs protobuf`\n</code></pre>\n\n<p>to include the protobuf library.</p>\n\n<p>In the header file I generated using my proto file contains the line</p>\n\n<pre><code>#include &lt;google/protobuf/stubs/common.h&gt;\n</code></pre>\n\n<p>this produces a compiler error of</p>\n\n<pre><code>error: 'google/protobuf/stubs/common.h' file not found\n</code></pre>\n\n<p>The protobuf package is found by QT with the LIBS += command in the pro file and I have the unfound header files in </p>\n\n<pre><code>/Users/&lt;username&gt;/Qt/5.7/Src/qtwebengine/src/3rdparty/chromium/third_party/protobuf/src/google/protobuf/stubs\n</code></pre>\n\n<p>and </p>\n\n<pre><code>/usr/local/include/google/protobuf/stubs/common.h\n</code></pre>\n\n<p>I installed protobuf using macports.</p>\n\n<p>The header file autocompletes so QT knows where it is so I am not sure how to deal with the file not found error.</p>\n\n<p>Any help much appreciated.</p>\n\n<p>Thanks,\na.</p>\n\n<p>edit:</p>\n\n<p>I think the problem is /usr/local/ not being included is qt path, thus I can find the protobuf package but not any of the header files (even though it autocompletes?). How do I add to PATH in QT with el capitain?</p>\n\n<p>edit 2:\nProject file</p>\n\n<pre><code>#-------------------------------------------------\n#\n# Project created by QtCreator 2016-07-13T12:13:47\n#\n#-------------------------------------------------\n\nQT       += core gui\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\nTARGET = testexample\nTEMPLATE = app\n\nSOURCES += main.cpp\\\n        mainwindow.cpp \\\n    ../../../protobuf/message.pb.cc\n\nQT_CONFIG -= no-pkg-config\n\nHEADERS  += mainwindow.h \\\n    ../../../protobuf/message.pb.h\n\nFORMS    += mainwindow.ui\n\nRESOURCES += \\\n    resources.qrc\n\nLIBS += `pkg-config --cflags -- libs protobuf`\n</code></pre>\n"}, {"tags": ["c++", "random", "mersenne-twister"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1468427940, "post_id": 38357169, "comment_id": 64126817, "body": "<code>mt19937 randomGenerator(time_t);</code> is a function declaration and I guess it may not be what you want."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6584981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bc3e6b7f0450cad16495ee8f98cc065?s=128&d=identicon&r=PG&f=1", "display_name": "jcales", "link": "https://stackoverflow.com/users/6584981/jcales"}, "edited": false, "score": 0, "creation_date": 1468498324, "post_id": 38357733, "comment_id": 64158097, "body": "I&#39;ll work on these possible solutions and get back to everyone with a comment. I really appreciate the assistance!"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1468429383, "last_edit_date": 1495541292, "creation_date": 1468429383, "answer_id": 38357733, "question_id": 38357169, "link": "https://stackoverflow.com/questions/38357169/mersenne-twister-receiving-semantic-issue-in-the-algorithm-h/38357733#38357733", "title": "Mersenne Twister &amp; receiving Semantic Issue in the algorithm.h", "body": "<p>Your problem is that</p>\n\n<pre><code>mt19937 randomGenerator(time_t);\n</code></pre>\n\n<p>Is not creating a random numnber generator.  It declares a function named <code>randomGenerator</code> that takes a <code>time_t</code> and returns a <code>mt19937</code>.</p>\n\n<p>What you need to do is use something like</p>\n\n<pre><code>std::random_device rd\nstd::mt19937 randomGenerator{rd()};\n</code></pre>\n\n<p>This will create the PRNG and seed it with the initial value from <code>rd</code>.  If you want a better seed then you can use</p>\n\n<pre><code>std::random_device rd;\nstd::seed_seq seed{rd(), rd(), rd(), rd(), rd(), rd(), rd(), rd()};\nstd::mt19937 randomGenerator(seed);\n</code></pre>\n\n<p>The above technique comes from <a href=\"https://stackoverflow.com/users/365496/bames53\">bames53</a> in <a href=\"https://stackoverflow.com/a/15509942/4342498\">this answer</a></p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 6584981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bc3e6b7f0450cad16495ee8f98cc065?s=128&d=identicon&r=PG&f=1", "display_name": "jcales", "link": "https://stackoverflow.com/users/6584981/jcales"}, "edited": false, "score": 0, "creation_date": 1468589240, "post_id": 38397324, "comment_id": 64202980, "body": "<b>URL&#39;s to other implementations for Die simulations</b> <i>(for those who stumble across this answer)</i>  Phill&#39;s Projects <a href=\"http://philipwashy.blogspot.com/2016/06/ive-been-working-on-building-video-game.html\" rel=\"nofollow noreferrer\">philipwashy.blogspot.com/2016/06/&hellip;</a>  Red Blob Games: <a href=\"http://www.redblobgames.com/articles/probability/damage-rolls.html\" rel=\"nofollow noreferrer\">redblobgames.com/articles/probability/damage-rolls.html</a>  <a href=\"https://isocpp.org/files/papers/n3551.pdf\" rel=\"nofollow noreferrer\">isocpp.org/files/papers/n3551.pdf</a>"}], "tags": [], "owner": {"reputation": 3, "user_id": 6584981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bc3e6b7f0450cad16495ee8f98cc065?s=128&d=identicon&r=PG&f=1", "display_name": "jcales", "link": "https://stackoverflow.com/users/6584981/jcales"}, "is_accepted": false, "score": 0, "last_activity_date": 1468589228, "last_edit_date": 1495541292, "creation_date": 1468589228, "answer_id": 38397324, "question_id": 38357169, "link": "https://stackoverflow.com/questions/38357169/mersenne-twister-receiving-semantic-issue-in-the-algorithm-h/38397324#38397324", "title": "Mersenne Twister &amp; receiving Semantic Issue in the algorithm.h", "body": "<p>Thank you Nathan! This actually helped quite a bit. Once I entered the first option I received new errors, below will be an explanation of the errors and how I resolved them. Of course I suspect more seasoned programmers would see it as obvious. :P</p>\n\n<p><strong>Error</strong>\n<em>use of class template uniform_int_distribution requires template arguments</em></p>\n\n<p><strong>Resolved with Code:</strong></p>\n\n<pre><code>uniform_int_distribution&lt;int&gt; Skeletons (randomGenerator);\n</code></pre>\n\n<p><strong>Error</strong> </p>\n\n<p><em>no matching constructor for initialization of uniform_int_distribution\n use of undeclared identifier Skeletons</em></p>\n\n<p><strong>Resolved with Code:</strong></p>\n\n<pre><code>uniform_int_distribution&lt;int&gt; Skeletons (1, 3000);\n</code></pre>\n\n<p><em>Additional help came from:</em> <a href=\"http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution\" rel=\"nofollow noreferrer\">cppreference.com</a></p>\n\n<p><strong>Final Working Code Snippets:</strong></p>\n\n<pre><code>std::random_device rd;\nstd::seed_seq seed{rd(), rd(), rd(), rd(), rd(), rd(), rd(), rd()};\nstd::mt19937 randomGenerator(seed);\n</code></pre>\n\n<p>and in use</p>\n\n<pre><code>//Random number of Skeletons!\nuniform_int_distribution&lt;int&gt; Skeletons (1, 3000);\n\n//Random number of Available Warriors!\nuniform_int_distribution&lt;int&gt; WarriorsAvailable (1, 3000);\n\n//Invalid MySoldier Selection\nuniform_int_distribution&lt;int&gt; TooManySoldiers (1, 5);\n\n//Random number of Skeletons!\nuniform_int_distribution&lt;int&gt; RightNumSoldiers (6, 10);\n\n//Random number of Skeletons!\nuniform_int_distribution&lt;int&gt; ATadMoreSoldiers (11, 15);\n</code></pre>\n\n<p>============= The Reliability of the Messner-Twister =====================\nThis is why the rd() is use so much in the above code.</p>\n\n<p>Are there better, more accurate methods? Here's a 'warning' about the\nMessner-Twister and how it is predictable until it is seeded better.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15509270/does-stdmt19937-require-warmup/15509942#15509942\">Stack Overflow</a></p>\n\n<p>====================== Indirectly related =================================</p>\n\n<p>From the above posted code from my question, I thought I would link where my Dice Functions came from.</p>\n\n<p><a href=\"http://www.cplusplus.com/forum/beginner/138382/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/forum/beginner/138382/</a></p>\n\n<p>void d4(){//function prints a randomly generated number\n    uniform_int_distribution d4Die (1, 4);\n    int d4Roll = d4Die(randomGenerator); //the generated number is then set equal to an integer for functionality\n    cout &lt;&lt; d4Roll; //finally, the integer is printed to the screen\n}</p>\n\n<p>======================= Footnotes =====================================</p>\n\n<p>Thank you both for your help. I hope this answer can help others who are new to the language overcome this or similar issues for PRGN. Whether it is for a combat system or Role Playing Game (RPG), may it be useful.</p>\n"}], "owner": {"reputation": 3, "user_id": 6584981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bc3e6b7f0450cad16495ee8f98cc065?s=128&d=identicon&r=PG&f=1", "display_name": "jcales", "link": "https://stackoverflow.com/users/6584981/jcales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 38357733, "answer_count": 2, "score": 0, "last_activity_date": 1468589228, "creation_date": 1468427544, "last_edit_date": 1495539851, "question_id": 38357169, "link": "https://stackoverflow.com/questions/38357169/mersenne-twister-receiving-semantic-issue-in-the-algorithm-h", "title": "Mersenne Twister &amp; receiving Semantic Issue in the algorithm.h", "body": "<p>I\u2019m very new to programming, and hope this question isn't burdensome. As a part of a video tutorial series I am using via YouTube that uses a series of challenges for students to use the portions of the language up to that point to solve a predefined problem. In this case, its making a simple Humans Vs Skeleton \u201c1D Combat Simulator\u201d (LINK: <a href=\"https://youtu.be/TH7plF4UT_E?list=PLSPw4ASQYyynKPY0I-QFHK0iJTjnvNUys\" rel=\"nofollow noreferrer\">https://youtu.be/TH7plF4UT_E?list=PLSPw4ASQYyynKPY0I-QFHK0iJTjnvNUys</a>)</p>\n\n<p>The tutor, Ben, originally uses default_random_engine, but in his annoyed note of the video states that this is a bad implementation and mt19937 is a better choice. (LINK: <a href=\"https://youtu.be/JGwSEbnJGR0?list=PLSPw4ASQYyynKPY0I-QFHK0iJTjnvNUys&amp;t=138\" rel=\"nofollow noreferrer\">https://youtu.be/JGwSEbnJGR0?list=PLSPw4ASQYyynKPY0I-QFHK0iJTjnvNUys&amp;t=138</a>).</p>\n\n<p>I have searched through Stack Overflow as well as cplusplus.com, and other sites, etc.</p>\n\n<p>I could not find helpful hints in either of these. Most Mersenne Twister questions seemed to be issues with it\u2019s use, not with problems in any header or library files.\n: <a href=\"https://stackoverflow.com/questions/20527043/issues-with-c-11-mersenne-twister-engine-class\">Issues with c++ 11 mersenne_twister_engine class</a>\n: <a href=\"https://stackoverflow.com/questions/27759891/how-to-run-mersenne-twister-inside-a-function\">How to run Mersenne Twister inside a function?</a>\n: <a href=\"https://stackoverflow.com/questions/27372137/mt19937-and-uniform-real-distribution\">mt19937 and uniform_real_distribution</a>\n: <a href=\"https://stackoverflow.com/questions/18880654/why-do-i-get-the-same-sequence-for-every-run-with-stdrandom-device-with-mingw\">Why do I get the same sequence for every run with std::random_device with mingw gcc4.8.1?</a></p>\n\n<p>I decided to go the rout of mt19937 for a more accurate random generation with more entropy, as I understand it. It may be overkill for the small project I am working on, and am open to better solutions.</p>\n\n<p>I often become bored with most C++ tutorials (videos or books) as they teach the syntax &amp; vocabulary, but rarely teach problem solving with the language. So, I skip around and toy with things, even when I don\u2019t understand them, so that I can try to understand them better. My understanding of functions, in terms of their anatomy and best use, is weak. The same goes with classes. Nonetheless, I have implemented met19937 into a function so I could create various polyhedral die simulations. (d4, d6, d8, d10). </p>\n\n<p>My source code doesn\u2019t have any errors, however, the algorithm.h file has two errors of the same type, as follows.</p>\n\n<p><strong><em>Type \u2018std::__1::mersenne_twister_engine (long)\u2019 cannot be used prior to \u2018::\u2019 because it has no members</em></strong></p>\n\n<p>When I go into the algorithm.h file (as if I knew what I were doing), these are the lines of code that the errors are found in.</p>\n\n<pre><code>private:\ntypedef typename _Engine::result_type _Engine_result_type;\ntypedef typename conditional\n    &lt;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>tatic _LIBCPP_CONSTEXPR const _Working_result_type _Rp = _Engine::max() - _Engine::min()\n                                                  + _Working_result_type(1);\n</code></pre>\n\n<p>(respectively on lines 2844 &amp; 2866 of the file.)</p>\n\n<p>This is my source code, I have commented out a lot of items, as I am trying to get one thing working before toying around with the rest:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;random&gt;\n//#include &lt;chrono&gt;\n//#include &lt;ctime&gt;\n\nusing namespace std;\n\n/*\n  // Simple Attack and Defense Attributes.\n int Agility = 40;\n int Attack =52;\n\n int MyAgility = 45;\n int MyAttack = 64;\n*/\n\n//Globals\nmt19937 randomGenerator(time_t);\n//default_random_engine randomGenerator(time_t);\n\n//Function Protypes\nvoid d4();\nvoid d6();\nvoid d8();\nvoid d10();\nvoid SuccessCheck();\n\n\nint main()\n{\n\n    //Variables\n    int MyWarriors;\n    //int WarriorsAvailable = NULL;\n    //int Skeletons = NULL;\n    //int CharacterCount;\n\n    /*\n    int Attack;\n    int Defense;\n    int AxeDMG = 1;\n    int SwordDMG = 2;\n    int ShieldDEF = 1;\n\n    //String Variables\n    //Too Many Soldiers Requested\n    char str1[150] = \"I'm sorry Sire, we just don't have that many troops available.\";\n    char str2[150] = \"No sir! We just can't manage that.\";\n    char str3[150] = \"Oh! Our woes would not be so terrible, should we only have that many in our guard.\";\n    char str4[150] = \"Have you been listening to my counsel? We just can't raise an army that size in such a short time.\";\n    char str5[150] = \"Very well Sir, I suppose we'll perish until you can't give me a real answer.\";\n\n    //A Valid Amount of Soldiers Requested\n    char str6[150] = \"Great! I'll send them through the gates immediately!\";\n    char str7[150] = \"YES! Through the forest, they'll ut down our foes!\";\n    char str8[150] = \"By the Lord Almighty, they shall be vanquished!\";\n    char str9[150] = \"They won't stand a chance!\";\n    char str10[150] = \"No man or beast will rise against you again!\";\n\n    //Maybe Not Enough Soldiers Requested\n    char str11[150] = \"You may need a tad more men, Sire.\";\n    char str12[150] = \"Perhaps, you'd like to join your men, just in case they need help?\";\n    char str13[150] = \"I think we have a few more men you could send, Sire.\";\n    char str14[150] = \"Oh yea, you'll have them quaking in their boots. Much like kittens and babies would. Perhaps you could spare a few more?\";\n    char str15[150] = \"You can't say that I didn't warn you. Maybe send a few more men.\";\n    */\n\n\n    //Random number of Skeletons!\n    uniform_int_distribution&lt;int&gt; Skeletons (1, 3000);\n\n    //Random number of Skeletons!\n    uniform_int_distribution&lt;int&gt; WarriorsAvailable (1, 3000);\n\n    //Invalid MySoldier Selection\n    uniform_int_distribution&lt;int&gt; TooManySoldiers (1, 5);\n\n    //Random number of Skeletons!\n    uniform_int_distribution&lt;int&gt; RightNumSoldiers (6, 10);\n\n    //Random number of Skeletons!\n    uniform_int_distribution&lt;int&gt; ATadMoreSoldiers (11, 15);\n\n    cout &lt;&lt; \"Sire! There are \" &lt;&lt; Skeletons(randomGenerator) &lt;&lt; \" marching toward the castle!\" &lt;&lt; endl &lt;&lt; \"We should send out our troops!\" &lt;&lt; endl;\n    cout &lt;&lt; \"Our registry indicates that we have \" &lt;&lt; WarriorsAvailable &lt;&lt; \" who are combat ready!\";\n    cout &lt;&lt; \"How many warriors do wich to send out to battle?\" &lt;&lt; endl;\n    cin &gt;&gt; MyWarriors;\n\n\n    /*\n    do {\n        &lt;#statements#&gt;\n    } while (&lt;#condition#&gt;); (MyWarriors &gt; WarriorsAvailable)\n        cout &lt;&lt;  &lt;&lt; endl &lt;&lt; \"How many warriors woudl you like to send in to combat?\";\n\n\n    cout &lt;&lt; \"Yes, Sire! I will rally \" &lt;&lt; MyWarriors &lt;&lt; \" to do battle with our enemy, at once!\" &lt;&lt; endl &lt;&lt; endl;\n\n\n    */\n\n    return 0;\n\n}\n\n\n//Dice Functions: Many of these functions cam from a Stack Overflow answer I found weeks prior to joining\nvoid d4(){//function prints a randomly generated number\n    //mt19937 randomGenerator(time_t);\n    //auto seed = chrono::high_resolution_clock::now().time_since_epoch().count();\n    uniform_int_distribution&lt;int&gt; d4Die (1, 4);\n    int d4Roll = d4Die(randomGenerator); //the generated number is then set equal to an integer for functionality\n    cout &lt;&lt; d4Roll; //finally, the integer is printed to the screen\n}\n\n\nvoid d6(){//function prints a randomly generated number\n    //mt19937 randomGenerator(time_t);\n    uniform_int_distribution&lt;int&gt; d6Die (1, 6);\n    int d6Roll = d6Die(randomGenerator); //the generated number is then set equal to an integer for functionality\n    cout &lt;&lt; d6Roll; //finally, the integer is printed to the screen\n}\n\nvoid d8(){//function prints a randomly generated number\n    //mt19937 randomGenerator(time_t);\n    uniform_int_distribution&lt;int&gt; d8Die (1, 8);\n//the generated number is then set equal to an integer for functionality\n    int d8Roll = d8Die(randomGenerator);\n    cout &lt;&lt; d8Roll; //finally, the integer is printed to the screen\n}\n\nvoid d10(){//function prints a randomly generated number\n    //mt19937 randomGenerator(time_t);\n    uniform_int_distribution&lt;int&gt; d10Die (1, 10);\n    //the generated number is then set  equal to an integer for functionality\n    int d10Roll = d10Die(randomGenerator); \n    cout &lt;&lt; d10Roll; //finally, the integer is printed to the screen\n}\n\nvoid SuccessCheck(){//function prints a randomly generated number\n    //mt19937 randomGenerator(time_t);\n     //Success Check based on a percentile roll of (2d10) yielding a 1 - 100%\n    uniform_int_distribution&lt;int&gt; SCDie (1, 100);\n    //the generated number is then set equal to an integer for functionality\n    int SCRoll = SCDie(randomGenerator); \n    cout &lt;&lt; SCRoll; //finally, the integer is printed to the screen\n\n}\n\n//Combat Skill Modifier\nuniform_int_distribution&lt;int&gt; CmbSklMod (1, 3);\n\n//uniform_real_distribution&lt;float&gt; SucessCheck(0.0f, 1.0f);\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++11"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1537297353, "post_id": 38357159, "comment_id": 91731198, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/34825552/passing-function-objects-into-std-algorithms-by-reference\">Passing function objects into std algorithms by reference</a>"}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 12, "last_activity_date": 1468428787, "creation_date": 1468428787, "answer_id": 38357559, "question_id": 38357159, "link": "https://stackoverflow.com/questions/38357159/why-is-templated-functor-passed-as-value-and-not-forwarding-reference/38357559#38357559", "title": "Why is templated functor passed as value and not forwarding reference", "body": "<blockquote>\n  <p>why are templated functors not passed as r-value references in functions from STL?</p>\n</blockquote>\n\n<p>First of all, they'd be <em>forwarding</em> references, not rvalue references. </p>\n\n<p>That said, as with many \"why\" questions about language design in general, the answer can simply be: because nobody has proposed this change yet (see <a href=\"https://isocpp.org/std/submit-a-proposal\">how to submit a proposal</a>). I suspect a great deal of function objects passed into the standard library algorithms are either lambdas, stateless, or extremely cheaply copyable. Moreover, if you have such an expensive object you can always turn in it into a cheaply copyable one for the purposes of the algorithm:</p>\n\n<pre><code>call_me(std::ref(huge_object));\n</code></pre>\n\n<p>Lastly, some of these algorithms rely upon passing these functions objects around to other helpers. If the algorithm simply assumes that the function object is \"free\" to copy, this makes it easy to code. If we introduce the possibility of rvalues here, this adds another layer of questions that need to be dealt with - do we just pass in the reference around? What about function objects with ref-qualified <code>operator()</code>?  </p>\n\n<p>Some combination of the above probably explains why, e.g., it's still:</p>\n\n<pre><code>template &lt;class InputIt, class UnaryPredicate&gt;\nInputIt find_if(InputIt, InputIt, UnaryPredicate );\n</code></pre>\n\n<p>and not</p>\n\n<pre><code>template &lt;class InputIt, class UnaryPredicate&gt;\nInputIt find_if(InputIt, InputIt, UnaryPredicate&amp;&amp; );\n</code></pre>\n"}], "owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 0, "accepted_answer_id": 38357559, "answer_count": 1, "score": 13, "last_activity_date": 1468436122, "creation_date": 1468427516, "last_edit_date": 1495540433, "question_id": 38357159, "link": "https://stackoverflow.com/questions/38357159/why-is-templated-functor-passed-as-value-and-not-forwarding-reference", "title": "Why is templated functor passed as value and not forwarding reference", "body": "<p>In discussion we had <a href=\"https://stackoverflow.com/questions/38333699/template-deduction-fails-for-known-argument#comment64107381_38334105\">here</a> I was playing around with passing functors. C++ STL passes functors as values (seen in <code>std::for_each</code>, <code>std::find_if</code>, <code>std::transform</code>)</p>\n\n<p>So declaring mine would be like this.</p>\n\n<pre><code>template&lt;typename F&gt;\nvoid call_me(F f)\n{\n    f();\n}\n</code></pre>\n\n<p>Now, calling <code>call_me(ftor{})</code> could probably invoke <code>ftor</code>'s copy constructor (it will most likely be copy elided, so not the case). But <code>ftor f{}; call_me(f);</code> will result in copying. If <code>ftor</code> has large data, it might be an issue.</p>\n\n<p>We'll improve it by passing it as const reference (<code>void call_me(const F&amp; f)</code>) to get rid of unneeded copy. This is fine as long as <code>ftor::operator()</code> is <code>const</code>. If it is not, the call to <code>call_me</code> would result in compilation error (losing <code>const</code> qualifiers).</p>\n\n<p>So, why to bother with const reference, use just reference (<code>void call_me(F&amp; f)</code>). This is fine, but it would not work for first case being <code>call_me(ftor{})</code> since binsing r-value to (non-const) l-value reference is not valid.</p>\n\n<p>Declaring <code>f</code> as forwarding reference (<code>void call_me(F&amp;&amp; f)</code>) seems to work in all cases. I believe, that this works thanks to reference collapsing.</p>\n\n<p>So, why are templated functors not passed as forwarding references in functions from STL?</p>\n"}, {"tags": ["c++", "opencv", "image-processing", "hough-transform"], "comments": [{"owner": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1468428841, "post_id": 38357141, "comment_id": 64127335, "body": "Actually, I think this might be easier to detect in BGR rather than HSV. Have you tried looking at the ratio of the Green component to the Red (or Blue) component of the detected discs?"}, {"owner": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "reply_to_user": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 0, "creation_date": 1468433401, "post_id": 38357141, "comment_id": 64130121, "body": "@beaker, that&#39;s utter nonsense.  The BGR &lt;-&gt; HSV transformation is fully bijective."}, {"owner": {"reputation": 1214, "user_id": 5740834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aaaaba0c043b131a3234fb02fc9c2feb?s=128&d=identicon&r=PG&f=1", "display_name": "Dainius \u0160altenis", "link": "https://stackoverflow.com/users/5740834/dainius-%c5%a0altenis"}, "edited": false, "score": 0, "creation_date": 1468449436, "post_id": 38357141, "comment_id": 64137989, "body": "I&#39;ve solved your issue with code and examples and edited the answer. Make sure to check out!"}], "answers": [{"comments": [{"owner": {"reputation": 3476, "user_id": 3857918, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/MopCN.jpg?s=128&g=1", "display_name": "Utkarsh Dixit", "link": "https://stackoverflow.com/users/3857918/utkarsh-dixit"}, "edited": false, "score": 0, "creation_date": 1468485444, "post_id": 38357999, "comment_id": 64149683, "body": "I knew about the inrange function before but i was not able to find the values for that.... Can you help me finding the perfect values..... Or can you suggest any way i can do that."}, {"owner": {"reputation": 1214, "user_id": 5740834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aaaaba0c043b131a3234fb02fc9c2feb?s=128&d=identicon&r=PG&f=1", "display_name": "Dainius \u0160altenis", "link": "https://stackoverflow.com/users/5740834/dainius-%c5%a0altenis"}, "reply_to_user": {"reputation": 3476, "user_id": 3857918, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/MopCN.jpg?s=128&g=1", "display_name": "Utkarsh Dixit", "link": "https://stackoverflow.com/users/3857918/utkarsh-dixit"}, "edited": false, "score": 0, "creation_date": 1468499085, "post_id": 38357999, "comment_id": 64158627, "body": "Actually I have a very minimal experience with this function. I&#39;d suggest you to find a HSV color picker in the internet and try to find approximate range of your desired color. It could take a few times to find a balance, but that is the only way I can think of."}], "tags": [], "owner": {"reputation": 1214, "user_id": 5740834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aaaaba0c043b131a3234fb02fc9c2feb?s=128&d=identicon&r=PG&f=1", "display_name": "Dainius \u0160altenis", "link": "https://stackoverflow.com/users/5740834/dainius-%c5%a0altenis"}, "is_accepted": true, "score": 1, "last_activity_date": 1468449289, "last_edit_date": 1495542153, "creation_date": 1468430316, "answer_id": 38357999, "question_id": 38357141, "link": "https://stackoverflow.com/questions/38357141/identifying-green-circles-from-this-image/38357999#38357999", "title": "Identifying green circles from this image", "body": "<p>OpenCV has a function called <code>InRange</code> (in C++ it would be <code>cv2.InRange</code>, Java- <code>Core.InRange</code>). In that function you provide two <code>Scalar</code> objects: one is starting BGR color of the range of colors, the other is the ending. It will return you a mask of white pixels: white color is in range, black is not. More information <a href=\"http://docs.opencv.org/master/df/d9d/tutorial_py_colorspaces.html#gsc.tab=0\" rel=\"nofollow noreferrer\">HERE</a>. I'd recommend you to call <code>InRange</code> before <code>HoughCircles</code>, it would be easier to determine which objects of green ones are circles, rather than which circles are green.</p>\n\n<p>I've tried out this method for solving your issue:</p>\n\n<ul>\n<li>First, I perform InRange function with starting HSV values <code>Scalar(37, 38, 70)</code> and ending <code>Scalar(85, 255, 200)</code>. Note that you are putting not RGB or BGR values in Scalar, it is HSV color (ranges from H (0-180), S(0-255), V(0-255), as written in <a href=\"https://stackoverflow.com/a/10951189/5740834\">THIS</a> answer):</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/oVM3X.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oVM3X.jpg\" alt=\"enter image description here\"></a></p>\n\n<ul>\n<li>Secondly, I perform a HoughCircles algorythm as you do in your code:</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/lGoVx.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lGoVx.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>As you see, there is one circle where it should not be, also the circles may be different in size on both pictures. I would highly suggest you to play with values of InRange function to improve color selection, making circles rounder and more perfect, and HoughCircles to avoid random and unnecessary circles as I got one in the middle of the last picture. Also, I would offer you to experiment with Canny algorythm (Canny edge detector) to clear centers of those objects, maybe your results will improve then. </p>\n\n<p>The code is in Java, but you should easily understand it as your concern is mainly InRange function:</p>\n\n<pre><code>Mat src = new Mat();\nMat circles = new Mat();\nMat result;\n\nUtils.bitmapToMat(Image, src);\nImgproc.cvtColor(src, src, Imgproc.COLOR_BGR2HSV);\n\nCore.inRange(src, new Scalar(37, 38, 70), new Scalar(85, 255, 200), src);\nImgproc.HoughCircles(src, circles, Imgproc.CV_HOUGH_GRADIENT, 2, 30, 100, 22, 10, 17);\n\nresult = new Mat(src.rows(), src.cols(), CvType.CV_8UC1, new Scalar(0,0,0));\nfor (int i = 0; i &lt; circles.cols(); i++)\n{\n    double[] circle = circles.get(0, i);\n    if (circle == null) break;\n    Point center = new Point(Math.round(circle[0]), Math.round(circle[1]));\n    int radius = (int)Math.round(circle[2]);\n    Imgproc.circle(result, center, radius, new Scalar(255, 0, 0));\n}\nreturn result;\n</code></pre>\n\n<p>At last, this algorythm even with the right values may not be perfect. I think it is possible to produce a really great or perfect results with the proper values (I sadly did not had much time to find out them, so I leave it to you), but if you need perfect result I would suggest you to experiment in a wider spectre. For example, calling Canny function on coloured image (like you provided) may give you very accurate contours of circles and other objects. Then, for example, you could perform a HoughCircles function on those contours and having data of them, clear all the pixels outside of circles. Then with InRange you could check the colours of circles and sort out them... But this is just theoretical. Try everything what comes to your mind. This experimenting may provide you with result more correct that the updated current one. Good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 175, "user_id": 6537015, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kOoWx8D4XMo/AAAAAAAAAAI/AAAAAAAAABk/F3tTZpfrMAM/photo.jpg?sz=128", "display_name": "Shashwat Verma", "link": "https://stackoverflow.com/users/6537015/shashwat-verma"}, "is_accepted": false, "score": 1, "last_activity_date": 1468430822, "creation_date": 1468430822, "answer_id": 38358152, "question_id": 38357141, "link": "https://stackoverflow.com/questions/38357141/identifying-green-circles-from-this-image/38358152#38358152", "title": "Identifying green circles from this image", "body": "<p>Okay, I just tried with the HSV approach and with little trial and error I was able to find the range for which only the green region will appear. Once you obtain the image with white pixels showing the green circle's position you can call HoughCircles. </p>\n\n<p>The range for HSV is (32,22,0) to (103,142,160)</p>\n\n<p>I hope this solves the issues. :)</p>\n"}], "owner": {"reputation": 3476, "user_id": 3857918, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/MopCN.jpg?s=128&g=1", "display_name": "Utkarsh Dixit", "link": "https://stackoverflow.com/users/3857918/utkarsh-dixit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1794, "favorite_count": 0, "accepted_answer_id": 38357999, "answer_count": 2, "score": 3, "last_activity_date": 1468449289, "creation_date": 1468427459, "question_id": 38357141, "link": "https://stackoverflow.com/questions/38357141/identifying-green-circles-from-this-image", "title": "Identifying green circles from this image", "body": "<p>I have currently made an image that consists of black and green dots..... I made a print of it and then clicked it with my camera..... After that i made a program to scan this image in opencv. Here is the image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ciM9A.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ciM9A.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>This is the code</p>\n\n<pre><code>    image = imread(\"ImageTryse.jpg\", 1); // Read the image\ncv::resize(image, image, Size(800, 800), 0, 0, cv::INTER_CUBIC);\nMat image_gray = IncreaseContrast(image);\ncvtColor(image_gray, image_gray, CV_BGR2GRAY);\nvector&lt;vec3f&gt; circles1;\nHoughCircles(image_gray, circles1, CV_HOUGH_GRADIENT, 2, 10, 100, 22, 10, 17);\n</code></pre>\n\n<p>I am able to scan circles with this code and run a loop through each of them.... But now i want to know weather the circle is green or black.... I don't know how i can do that.... I tried converting it to hsv but it was showing different colors on the side having light..... Please help me to solve this problem....</p>\n"}, {"tags": ["c++", "windows", "bash", "cmake", "mingw"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1468427757, "post_id": 38357098, "comment_id": 64126714, "body": "If your project requires another project to be installed, then my recommendation is that you <i>document</i> this requirement, and have the user install that dependency himself. Then it&#39;s up to the user to install from a package manager or from source. Just about the only time you need to distribute and build dependencies, at leas that I can think of, is if you&#39;re developing a proprietary system that depends on specific versions of some library."}, {"owner": {"reputation": 102, "user_id": 1973207, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/557d7fa74d7ec23c6726f1c16986b032?s=128&d=identicon&r=PG", "display_name": "DuckQueen", "link": "https://stackoverflow.com/users/1973207/duckqueen"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1468428259, "post_id": 38357098, "comment_id": 64126998, "body": "@JoachimPileborg: Only to document is a way to make life of windows developer even harder..."}], "owner": {"reputation": 102, "user_id": 1973207, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/557d7fa74d7ec23c6726f1c16986b032?s=128&d=identicon&r=PG", "display_name": "DuckQueen", "link": "https://stackoverflow.com/users/1973207/duckqueen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1468432164, "creation_date": 1468427304, "last_edit_date": 1468432164, "question_id": 38357098, "link": "https://stackoverflow.com/questions/38357098/how-to-call-mingw-not-msys-commands-from-cmake-externalproject-add", "title": "How to call MinGW (not MSYS) commands from CMake ExternalProject_add?", "body": "<p>I want to allow building of my project under MinGW. My project requieres <a href=\"http://www.fftw.org/install/windows.html\" rel=\"nofollow\">FFTW build</a>. My dependency does not use CMake to generate make files. To build it I need to be able to call bash:</p>\n\n<pre><code>./configure\nmake\nmake install\n</code></pre>\n\n<p>In cmake <a href=\"https://cmake.org/cmake/help/v3.0/module/ExternalProject.html\" rel=\"nofollow\">ExternalProject_add</a> I can add <code>CONFIGURE_COMMAND</code>, <code>BUILD_COMMAND</code> and <code>INSTALL_COMMAND</code>. I wonder how to specify it to run MinGW bash console to run this commands?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 6, "creation_date": 1468442956, "post_id": 38357089, "comment_id": 64135259, "body": "I wonder if the people who write style guides really think this code would be clearer if the author had written <code>static_cast&lt;void&gt;(++__result)</code>..."}], "answers": [{"comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 27, "creation_date": 1468427555, "post_id": 38357152, "comment_id": 64126610, "body": "Wow. This would never have occured to me."}, {"owner": {"reputation": 13479, "user_id": 1830736, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/gwUf7.jpg?s=128&g=1", "display_name": "George Hilliard", "link": "https://stackoverflow.com/users/1830736/george-hilliard"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 11, "creation_date": 1468430316, "post_id": 38357152, "comment_id": 64128225, "body": "@Angew there are lots of these.  For more fun, read <a href=\"https://www.reddit.com/r/cpp/comments/1tedni/notsocommon_pitfalls_of_c_xpost_rcplusplus/ce7bqnu\" rel=\"nofollow noreferrer\">this post</a> by STL, a Microsoft compiler engineer."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 7, "creation_date": 1468435748, "post_id": 38357152, "comment_id": 64131506, "body": "In a similar vein, you&#39;ll see copious use of <code>addressof</code> or equivalent in the standard library instead of unary <code>&amp;</code>."}, {"owner": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "edited": false, "score": 2, "creation_date": 1468444785, "post_id": 38357152, "comment_id": 64136100, "body": "So is it possible to have a class provide an <code>operator void()</code> ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "edited": false, "score": 4, "creation_date": 1468445375, "post_id": 38357152, "comment_id": 64136408, "body": "@JD\u0142ugosz Ha. Yeah, a class can provide that, but it won&#39;t be used. A conversion to <code>void</code> will always just discard the value without looking at which conversion operators are available. The only way to call such an operator is with an explicit <code>expr.operator void()</code> call."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1468447714, "post_id": 38357152, "comment_id": 64137381, "body": "@T.C. perhaps a macro  <code>STD_SEQUENCE(++__first, ++__result)</code> could act as a readible form, much like <code>std::addressof</code>?"}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1468447878, "post_id": 38357152, "comment_id": 64137441, "body": "@T.C. grep..? Bikeshed the name"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 18, "creation_date": 1468451210, "post_id": 38357152, "comment_id": 64138553, "body": "or <code>std::who_made_comma_overloadable</code>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": false, "score": 105, "last_activity_date": 1468427497, "creation_date": 1468427497, "answer_id": 38357152, "question_id": 38357089, "link": "https://stackoverflow.com/questions/38357089/why-does-stdtransform-and-similar-cast-the-for-loop-increment-to-void/38357152#38357152", "title": "Why does std::transform and similar cast the &#39;for&#39; loop increment to (void)?", "body": "<p>It is possible to overload <code>operator,</code>. Casting either operand to <code>void</code> prevents any overloaded operator from being called, since overloaded operators cannot take <code>void</code> parameters.</p>\n"}, {"tags": [], "owner": {"reputation": 10759, "user_id": 343443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2dcf7b64ff07a02fbd78c27f50ce9631?s=128&d=identicon&r=PG", "display_name": "Abyx", "link": "https://stackoverflow.com/users/343443/abyx"}, "is_accepted": false, "score": 7, "last_activity_date": 1468506186, "creation_date": 1468506186, "answer_id": 38376793, "question_id": 38357089, "link": "https://stackoverflow.com/questions/38357089/why-does-stdtransform-and-similar-cast-the-for-loop-increment-to-void/38376793#38376793", "title": "Why does std::transform and similar cast the &#39;for&#39; loop increment to (void)?", "body": "<p>It avoids call of overloaded <code>operator,</code> if there is any. Because the type <code>void</code> can't be an argument of a function (operator).</p>\n\n<p>Another approach would be inserting <code>void()</code> in the middle:</p>\n\n<pre><code>++__first, void(), ++__result\n</code></pre>\n"}], "owner": {"reputation": 901, "user_id": 2949123, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/gG8FQ.png?s=128&g=1", "display_name": "wes", "link": "https://stackoverflow.com/users/2949123/wes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2173, "favorite_count": 11, "answer_count": 2, "score": 78, "last_activity_date": 1468506186, "creation_date": 1468427273, "last_edit_date": 1468447906, "question_id": 38357089, "link": "https://stackoverflow.com/questions/38357089/why-does-stdtransform-and-similar-cast-the-for-loop-increment-to-void", "title": "Why does std::transform and similar cast the &#39;for&#39; loop increment to (void)?", "body": "<p>What is the purpose of <code>(void) ++__result</code> in the code below?</p>\n\n<p>Implementation for std::transform:</p>\n\n<pre><code>// std::transform\ntemplate &lt;class _InputIterator, class _OutputIterator, class _UnaryOperation&gt;\ninline _LIBCPP_INLINE_VISIBILITY\n_OutputIterator\ntransform(_InputIterator __first, _InputIterator __last, _OutputIterator __result, _UnaryOperation __op)\n{\n    for (; __first != __last; ++__first, (void) ++__result)\n        *__result = __op(*__first);\n    return __result;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "inheritance"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1468426949, "post_id": 38356931, "comment_id": 64126256, "body": "Instead of describing your code in words, do it in <i>code</i>. It&#39;s much easier to understand what&#39;s happening if you take some time to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 3, "creation_date": 1468426971, "post_id": 38356931, "comment_id": 64126277, "body": "Name hiding, see <a href=\"https://isocpp.org/wiki/faq/strange-inheritance#hiding-rule\" rel=\"nofollow noreferrer\">isocpp.org/wiki/faq/strange-inheritance#hiding-rule</a>"}], "answers": [{"comments": [{"owner": {"reputation": 963, "user_id": 822830, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bb3101a4a8b25029bccef1f1851d7ba8?s=128&d=identicon&r=PG", "display_name": "mike", "link": "https://stackoverflow.com/users/822830/mike"}, "edited": false, "score": 0, "creation_date": 1468426956, "post_id": 38356979, "comment_id": 64126267, "body": "well there you go. first time I&#39;ve stumbled upon it in..erm.. dare I say how long.."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 963, "user_id": 822830, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bb3101a4a8b25029bccef1f1851d7ba8?s=128&d=identicon&r=PG", "display_name": "mike", "link": "https://stackoverflow.com/users/822830/mike"}, "edited": false, "score": 1, "creation_date": 1468427072, "post_id": 38356979, "comment_id": 64126331, "body": "I will confess I&#39;ve never really understood <i>why</i> C++ works this way."}, {"owner": {"reputation": 963, "user_id": 822830, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bb3101a4a8b25029bccef1f1851d7ba8?s=128&d=identicon&r=PG", "display_name": "mike", "link": "https://stackoverflow.com/users/822830/mike"}, "edited": false, "score": 0, "creation_date": 1468427105, "post_id": 38356979, "comment_id": 64126358, "body": "does this only apply to overloaded functions? or is it the fact that it&#39;s virtual?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 963, "user_id": 822830, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bb3101a4a8b25029bccef1f1851d7ba8?s=128&d=identicon&r=PG", "display_name": "mike", "link": "https://stackoverflow.com/users/822830/mike"}, "edited": false, "score": 2, "creation_date": 1468427225, "post_id": 38356979, "comment_id": 64126417, "body": "The second comment under the question explains it well."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 1, "last_activity_date": 1468426872, "creation_date": 1468426872, "answer_id": 38356979, "question_id": 38356931, "link": "https://stackoverflow.com/questions/38356931/why-are-my-overloaded-functions-not-seen-by-a-subclass/38356979#38356979", "title": "Why are my overloaded functions not seen by a subclass", "body": "<p>Unless you write <code>using Base::load;</code> somewhere in the declaration of the child class, that child class will not be able to see the other <code>load</code> functions declared in the base class.</p>\n\n<p>It's one of those parts of C++ that appears odd at first.</p>\n"}], "owner": {"reputation": 963, "user_id": 822830, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bb3101a4a8b25029bccef1f1851d7ba8?s=128&d=identicon&r=PG", "display_name": "mike", "link": "https://stackoverflow.com/users/822830/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 38356979, "answer_count": 1, "score": 0, "last_activity_date": 1468426872, "creation_date": 1468426718, "question_id": 38356931, "link": "https://stackoverflow.com/questions/38356931/why-are-my-overloaded-functions-not-seen-by-a-subclass", "title": "Why are my overloaded functions not seen by a subclass", "body": "<p>I have a base class Base which provides a series of load functions, which read saved settings from a file. For example</p>\n\n<pre><code>void Base::load(QWidget *w);\nvirtual void Base::load(QTableWidget *t); // note this is declared virtual\nvoid Base::load(QLineEdit *le);\n</code></pre>\n\n<p>Where Base::load(QWidget *w) will typically be called by a subclass on a high level widget. That routine will find the child widgets of the input widget (by type), and call the appropriate load routine on those. The overloading works as expected. \nSo in a subclass OkSubClass, I typically do a load like this:</p>\n\n<pre><code>void OkSubClass::load(void)\n{\n load(myMainWidget);\n load(myOtherHighLevelWidget);\n}\n</code></pre>\n\n<p>All is good - anything that is a child of either widget gets loaded.</p>\n\n<p>Now I have a subclass of Base which needs to load things for a table slightly differently. It declares </p>\n\n<pre><code>virtual void ProblemSubClass::load(QTableWidget *t) ;\n</code></pre>\n\n<p>I also have some widgets used by this class that inherit a form class; e.g. </p>\n\n<pre><code>class myWidget: public QWidget, public MyForm { ... };\n</code></pre>\n\n<p>and ProblemSubClass has a member variable</p>\n\n<pre><code>myWidget *_myMainWidget;\n</code></pre>\n\n<p>now in the routine ProblemSubClass::load(void), I try to do the following:</p>\n\n<pre><code>ProblemSubClass::load(void)\n{\n  load(_myMainWidget);\n}\n</code></pre>\n\n<p>it complains that it can't convert _myMainWidget to a QTableWidget <em>. Which surprises me, because I thought that ProblemSubClass should be able to see the load(QWidget</em>) member function.\nIf I directly call the base class function, it works. </p>\n\n<pre><code>ProblemSubClass::load(void)\n    {\n      Base::load(_myMainWidget);\n    }\n</code></pre>\n\n<p>But I don't understand why it doesn't if I don't. Please enlighten me!</p>\n"}, {"tags": ["c++", "loops", "erase", "erase-remove-idiom"], "comments": [{"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 2, "creation_date": 1468426675, "post_id": 38356875, "comment_id": 64126069, "body": "It might help to know what <code>container</code> is."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1468426736, "post_id": 38356875, "comment_id": 64126115, "body": "I believe you are looking for the <a href=\"https://en.wikipedia.org/wiki/Erase%E2%80%93remove_idiom\" rel=\"nofollow noreferrer\">Erase-remove idiom</a>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468427002, "post_id": 38356875, "comment_id": 64126293, "body": "I wonder why such algo is not in standard lib as it is more generic than erase-remove idiom"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1468427135, "post_id": 38356875, "comment_id": 64126370, "body": "@Slava Like an <code>erase_if</code> function?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 1, "creation_date": 1468427247, "post_id": 38356875, "comment_id": 64126434, "body": "if container is a vector, this algorithm will be horribly inefficient."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1468427278, "post_id": 38356875, "comment_id": 64126450, "body": "@NathanOliver right, I know it will be less efficient on a <code>std::vector</code> than erase-remove but will work on most containers"}, {"owner": {"reputation": 1053, "user_id": 4573388, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/96d071c19a97ba184cbf5e4a75ae014b?s=128&d=identicon&r=PG&f=1", "display_name": "Fractale", "link": "https://stackoverflow.com/users/4573388/fractale"}, "edited": false, "score": 0, "creation_date": 1468427299, "post_id": 38356875, "comment_id": 64126458, "body": "in my case it&#39;s a std::map but if you have a generic solution, it&#39;s cool :p"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1468427369, "post_id": 38356875, "comment_id": 64126503, "body": "@RichardHodges I believe it can be specialized for vector and others which may have more efficient way"}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468428013, "post_id": 38356875, "comment_id": 64126864, "body": "@Slava <a href=\"https://rawgit.com/cplusplus/fundamentals-ts/v2/fundamentals-ts.html#container.erasure.erase_if\" rel=\"nofollow noreferrer\"><code>std::experimental::erase_if</code></a> in library fundamentals TS v2?"}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1468428171, "post_id": 38356875, "comment_id": 64126959, "body": "this is considered idiomatic for associative containers"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1468428775, "post_id": 38356875, "comment_id": 64127287, "body": "@cpplearner C++ really needs ranges, otherwise you have to create a new algo for any sneeze"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468445075, "post_id": 38356875, "comment_id": 64136259, "body": "@Slava: Alternatively, just use the ones built in: <code>remove_if</code> + <code>erase</code>."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468427453, "post_id": 38357127, "comment_id": 64126550, "body": "That&#39;s erase-remove idiom, but will not work on <code>std::map</code> which OP seems to be using"}, {"owner": {"reputation": 702, "user_id": 4175394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UgM8O.png?s=128&g=1", "display_name": "stryku", "link": "https://stackoverflow.com/users/4175394/stryku"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468427572, "post_id": 38357127, "comment_id": 64126619, "body": "Sorry, didn&#39;t saw the comment. I think I won&#39;t delete my answer. Maybe in comments some discussion will start and OP will get his answer"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468427651, "post_id": 38357127, "comment_id": 64126651, "body": "@Slava Why does it not work?  <code>remove_if</code> requires a forward iterator(map has bidirectional) and <code>map</code> has an appropriate overload for erase."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1468427811, "post_id": 38357127, "comment_id": 64126748, "body": "@NathanOliver <code>std::remove_if</code> moves elements, <code>std::map</code> does not allow that"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1468428057, "post_id": 38357127, "comment_id": 64126892, "body": "@Slava Durp.  Forgot about that.  Also I found a <code>erase_if</code>: <a href=\"http://stackoverflow.com/questions/800955/remove-if-equivalent-for-stdmap\" title=\"remove if equivalent for stdmap\">stackoverflow.com/questions/800955/&hellip;</a>"}], "tags": [], "owner": {"reputation": 702, "user_id": 4175394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UgM8O.png?s=128&g=1", "display_name": "stryku", "link": "https://stackoverflow.com/users/4175394/stryku"}, "is_accepted": true, "score": 3, "last_activity_date": 1469277184, "last_edit_date": 1469277184, "creation_date": 1468427401, "answer_id": 38357127, "question_id": 38356875, "link": "https://stackoverflow.com/questions/38356875/erase-in-a-loop-with-a-condition-in-c/38357127#38357127", "title": "Erase in a loop with a condition in C++", "body": "<p>Use <code>erase</code> + <code>remove_if</code>:</p>\n\n<pre><code>auto pred = /* lambda or something*/\ncontainer.erase(std::remove_if(container.begin(),\n                               container.end(),\n                               pred)\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 1, "creation_date": 1468441705, "post_id": 38359684, "comment_id": 64134624, "body": "This is missing the point: when <code>another_condition( i )</code> is true, and <code>i = erase( i )</code> is called (note: you dropped the assignment, but shouldn&#39;t have), it&#39;s important <i>not</i> to increment <code>i</code>. That&#39;s because <code>i</code> has already been updated to point to the next element."}], "tags": [], "owner": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "is_accepted": false, "score": -2, "last_activity_date": 1468436333, "creation_date": 1468436333, "answer_id": 38359684, "question_id": 38356875, "link": "https://stackoverflow.com/questions/38356875/erase-in-a-loop-with-a-condition-in-c/38359684#38359684", "title": "Erase in a loop with a condition in C++", "body": "<p>All of these questions and comments are quaint, but they don't address the original question.</p>\n\n<p>What was asked is, how does one tighten up the following:</p>\n\n<blockquote>\n  <p>for( i = ...; some_condition( i ); ) {<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;if( another_condition( i ) ) {<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erase( i );<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;}<br>\n   &nbsp;&nbsp;&nbsp;&nbsp;i++;<br>\n   }</p>\n</blockquote>\n\n<p>And the answer is:</p>\n\n<blockquote>\n  <p>for( i = ...; some_condition( i ); i++ ) {<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;if( another_condition( i ) ) {<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erase( i );<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;}<br>\n  }</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1469277474, "last_edit_date": 1469277474, "creation_date": 1468444927, "answer_id": 38361911, "question_id": 38356875, "link": "https://stackoverflow.com/questions/38356875/erase-in-a-loop-with-a-condition-in-c/38361911#38361911", "title": "Erase in a loop with a condition in C++", "body": "<blockquote>\n  <p>Is there a better way to...?</p>\n</blockquote>\n\n<p>It is always subjective, but one way is a traits-based template function suite with a consistent interface, using tag-dispatching to choose the most optimal algorithm depending on the container type...</p>\n\n<p>The interface function could look like this:</p>\n\n<pre><code>template&lt;class Range, class Pred&gt;\nRange&amp; erase_if(Range&amp; range, Pred&amp;&amp; pred)\n{\n    erase_if(typename detail::range_traits&lt;std::decay_t&lt;Range&gt;&gt;::idiom_type(),\n             range, std::forward&lt;Pred&gt;(pred));\n    return range;\n}\n</code></pre>\n\n<p>which defers to the correct idiom for the container type...</p>\n\n<pre><code>void erase_if(erase_remove_idiom, Vector&amp; vec, Pred pred)\n{\n    vec.erase(std::remove_if(std::begin(vec), std::end(vec),\n                             std::forward&lt;Pred&gt;(pred)),\n              std::end(vec));\n}\n\ntemplate&lt;class Maplike, class Pred&gt;\nvoid erase_if(equal_range_idiom, Maplike&amp; map, Pred pred)\n{\n    auto first = std::begin(map);\n    auto last = std::end(map);\n    while (first != last) {\n        auto&amp; item = *first;\n        auto&amp; key = get_key(item);\n        auto range = map.equal_range(key);\n        if (pred(key)) {\n            map.erase(range.first, range.second);\n        }\n        first = range.second;\n    }\n}\n\ntemplate&lt;class Maplike, class Pred&gt;\nvoid erase_if(map_crawl_idiom, Maplike&amp; map, Pred pred)\n{\n    for (auto i = map.begin(); i != map.end();)\n    {\n        i = pred(*i) ? map.erase(i) : std::next(i);\n    }\n}\n</code></pre>\n\n<p>Here's the complete code and some tests.</p>\n\n<p>Writing code like this always makes me feel admiration for std-library maintainers. So many corner cases...</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n#include &lt;set&gt;\n#include &lt;unordered_set&gt;\n#include &lt;map&gt;\n\nnamespace detail {\n\n    // The general concept of range_traits\n    template&lt;class Range&gt;\n    struct range_traits\n    {\n    };\n\n    // Tag for performing erase-remove on vector-like containers\n    struct erase_remove_idiom {};\n\n    // Using equal-range to skip redundant comparisons in multiset-like-containers\n    struct equal_range_idiom {};\n\n    // Crawling through maps...\n    struct map_crawl_idiom {};\n\n    template&lt;class V, class A&gt;\n    struct range_traits&lt;std::vector&lt;V, A&gt;&gt; {\n        using idiom_type = erase_remove_idiom;\n    };\n\n    template&lt;class V, class C, class A&gt;\n    struct range_traits&lt;std::multiset&lt;V, C, A&gt;&gt; {\n        using idiom_type = equal_range_idiom;\n    };\n\n    template&lt;class V, class C, class A&gt;\n    struct range_traits&lt;std::set&lt;V, C, A&gt;&gt; {\n        using idiom_type = map_crawl_idiom;\n    };\n\n    template&lt;class V, class C, class H, class A&gt;\n    struct range_traits&lt;std::unordered_set&lt;V, C, H, A&gt;&gt; {\n        using idiom_type = map_crawl_idiom;\n    };\n\n    template&lt;class V, class C, class H, class A&gt;\n    struct range_traits&lt;std::unordered_multiset&lt;V, C, H, A&gt;&gt; {\n        using idiom_type = equal_range_idiom;\n    };\n\n    template&lt;class K, class V, class C, class A&gt;\n    struct range_traits&lt;std::multimap&lt;K, V, C, A&gt;&gt; {\n        using idiom_type = map_crawl_idiom;\n    };\n\n    template&lt;class K, class V, class C, class A&gt;\n    struct range_traits&lt;std::map&lt;K, V, C, A&gt;&gt; {\n        using idiom_type = map_crawl_idiom;\n    };\n}\n\n\nnamespace detail {\n    template&lt;class Vector, class Pred&gt;\n    void erase_if(erase_remove_idiom, Vector&amp; vec, Pred pred)\n    {\n        vec.erase(std::remove_if(std::begin(vec), std::end(vec),\n                                 std::forward&lt;Pred&gt;(pred)),\n                  std::end(vec));\n    }\n\n    // Generalised key-getter for sets\n    template&lt;class V&gt;\n    V&amp; get_key(V&amp; v) {\n        return v;\n    }\n\n    // Specialised key-getter for maps\n    template&lt;class K, class V&gt;\n    const K&amp; get_key(std::pair&lt;const K, V&gt;&amp; p) {\n        return p.first;\n    }\n\n    template&lt;class Maplike, class Pred&gt;\n    void erase_if(equal_range_idiom, Maplike&amp; map, Pred pred)\n    {\n        auto first = std::begin(map);\n        auto last = std::end(map);\n        while (first != last) {\n            auto&amp; item = *first;\n            auto&amp; key = get_key(item);\n            auto range = map.equal_range(key);\n            if (pred(key)) {\n                map.erase(range.first, range.second);\n            }\n            first = range.second;\n        }\n    }\n\n    template&lt;class Maplike, class Pred&gt;\n    void erase_if(map_crawl_idiom, Maplike&amp; map, Pred pred)\n    {\n        for (auto i = map.begin(); i != map.end();)\n        {\n            i = pred(*i) ? map.erase(i) : std::next(i);\n        }\n    }\n}\n\n\n//\n// The interface function\n//\ntemplate&lt;class Range, class Pred&gt;\nRange&amp; erase_if(Range&amp; range, Pred&amp;&amp; pred)\n{\n    erase_if(typename detail::range_traits&lt;std::decay_t&lt;Range&gt;&gt;::idiom_type(),\n             range, std::forward&lt;Pred&gt;(pred));\n    return range;\n}\n\ntemplate&lt;class T&gt;\nstruct emitter\n{\n    void operator()(std::ostream&amp; os, const T&amp; t) const {\n        os &lt;&lt; t;\n    }\n};\n\ntemplate&lt;class K, class V&gt;\nstruct emitter&lt;std::pair&lt;const K, V&gt;&gt;\n{\n    void operator()(std::ostream&amp; os, const std::pair&lt;const K, V&gt;&amp; p) const {\n        os &lt;&lt; \"(\" &lt;&lt; p.first &lt;&lt; \", \" &lt;&lt; p.second &lt;&lt; \")\";\n    }\n};\n\ntemplate&lt;class Range&gt;\nvoid dump(Range&amp; range)\n{\n    auto sep = \"\";\n    auto e = emitter&lt;typename std::decay_t&lt;Range&gt;::value_type&gt; {};\n    for (auto&amp; item : range) {\n        std::cout &lt;&lt; sep;\n        e(std::cout, item);\n        sep = \", \";\n    }\n    std::cout &lt;&lt; std::endl;\n}\n\n//\n// Test on various containers\n//\nint main()\n{\n    std::vector&lt;int&gt; some { 1,0,1,0,1,0,1,0 };\n    std::multiset&lt;int&gt; some_mset { 1,0,1,0,1,0,1,0 };\n    std::unordered_multiset&lt;int&gt; some_umset { some_mset.begin(), some_mset.end() };\n    std::map&lt;int, std::string&gt; some_map {\n        { 1, \"mouse\" },\n        { 2, \"house\" },\n        { 3, \"mouth\" }\n    };\n    std::multimap&lt;int, std::string&gt; some_mmap(some_map.begin(), some_map.end());\n    some_mmap.insert(some_map.begin(), some_map.end());\n\n    std::set&lt;int&gt; some_set { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 };\n\n\n    auto is_one = [](auto&amp; x) { return x == 1; };\n    auto is_even = [](auto&amp;x) { return (x % 2) == 0; };\n    auto value_starts_with_m = [](auto&amp; item) { return item.second.substr(0,1) == \"m\"; };\n\n    dump(erase_if(some, is_one));\n    dump(erase_if(some_mset, is_one));\n    dump(erase_if(some_umset, is_one));\n    dump(erase_if(some_map, value_starts_with_m));\n    dump(erase_if(some_mmap, value_starts_with_m));\n    dump(erase_if(some_set, is_even));\n}\n</code></pre>\n\n<p>Expected results:</p>\n\n<pre><code>0, 0, 0, 0\n0, 0, 0, 0\n0, 0, 0, 0\n(2, house)\n(2, house), (2, house)\n1, 3, 5, 7, 9\n</code></pre>\n"}], "owner": {"reputation": 1053, "user_id": 4573388, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/96d071c19a97ba184cbf5e4a75ae014b?s=128&d=identicon&r=PG&f=1", "display_name": "Fractale", "link": "https://stackoverflow.com/users/4573388/fractale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 0, "accepted_answer_id": 38357127, "answer_count": 3, "score": 3, "last_activity_date": 1469277492, "creation_date": 1468426548, "last_edit_date": 1469277492, "question_id": 38356875, "link": "https://stackoverflow.com/questions/38356875/erase-in-a-loop-with-a-condition-in-c", "title": "Erase in a loop with a condition in C++", "body": "<p>Is there a better way to write:</p>\n\n<pre><code>for (auto i = container.begin(); i != container.end();)\n{\n    if (condition(i))\n    {\n       i = container.erase(i);\n       continue;\n    }\n    ++i;\n}\n</code></pre>\n\n<p>This code does what I want, but it feels like bad style.</p>\n\n<p>How can I improve it?</p>\n\n<p>My container is <code>std::map</code>, but a generic solution would be cool.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1468426201, "post_id": 38356730, "comment_id": 64125784, "body": "Please post a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. Possible duplicate (but too low possibility to vote) of <a href=\"http://stackoverflow.com/questions/21567291/why-does-stdgetline-skip-input-after-a-formatted-extraction\">c++ - Why does std::getline() skip input after a formatted extraction? - Stack Overflow</a>"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 7, "creation_date": 1468426309, "post_id": 38356730, "comment_id": 64125836, "body": "Please explain <i>the code doesn&#39;t work</i>."}, {"owner": {"reputation": 2688, "user_id": 774359, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/5c6949c7206b4ea23db8e8c208eb385b?s=128&d=identicon&r=PG", "display_name": "Jake", "link": "https://stackoverflow.com/users/774359/jake"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1468426420, "post_id": 38356730, "comment_id": 64125907, "body": "Although this isn&#39;t related to your question (for which I agree with @MikeCAT), the way that you&#39;re handling the conversion of a number to its letter in the alphabet leaves a lot to be desired, and makes your code very annoying to read. See this question for a better strategy: <a href=\"http://stackoverflow.com/questions/9259140/converting-numbers-into-alphabets-in-c\" title=\"converting numbers into alphabets in c\">stackoverflow.com/questions/9259140/&hellip;</a>"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1468426424, "post_id": 38356730, "comment_id": 64125910, "body": "What happens if every comparison in the first set is false? What happens if the first character in the string isn&#39;t an upper case letter? Also, any time you find you&#39;re writing a chunk of &quot;cut&amp;paste&quot; code, stop and see if you can replace the bulky redundant code with an algorithm. (Also, why use 1-26 rather than 0-25, which would allow you to use modulus.)"}, {"owner": {"reputation": 1, "user_id": 6582000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e381c43c64ee24e9fecfed22a95fa52e?s=128&d=identicon&r=PG&f=1", "display_name": "xSoloDrop", "link": "https://stackoverflow.com/users/6582000/xsolodrop"}, "edited": false, "score": 0, "creation_date": 1468426547, "post_id": 38356730, "comment_id": 64125979, "body": "When I try to run the code with getline() it ends instantly. I can&#39;t write anything."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468426650, "post_id": 38356730, "comment_id": 64126044, "body": "@xSoloDrop do you have another input in your program before that line?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1468426656, "post_id": 38356730, "comment_id": 64126046, "body": "@xSoloDrop That&#39;s almost certainly because of prior code that you haven&#39;t shown us. For example, if you have <code>cin &gt;&gt; x; getline(cin,msg);</code> you&#39;ll get an empty line because <code>cin &gt;&gt; x;</code> doesn&#39;t read the newline, leaving an empty line for <code>getline</code> to read. If someone types <code>foo&lt;enter&gt;bar</code> and you read just the <code>foo</code>, you then have an empty line followed by <code>bar</code>. You need some code to read that newline or <code>getline</code> will get it."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1468426658, "post_id": 38356730, "comment_id": 64126048, "body": "You havent even shown how you use <code>getline</code>, how can we help you?"}], "answers": [{"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1468429070, "post_id": 38357117, "comment_id": 64127465, "body": "...providing your host character set encodes alphabetic characters sequentially (ASCII-like codes do; ECBDIC codes don&#39;t; C++ doesn&#39;t guarantee anything)."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1468432366, "post_id": 38357117, "comment_id": 64129440, "body": "@TobySpeight It&#39;s true there is nothing guaranteed about <code>char</code>s being ASCII or UTF-8, but then I guess there&#39;s nothing guaranteed about there being 26 characters in the alphabet either :/ Anyway I&#39;ve fixed it so that the a <code>char</code> won&#39;t be overflowed. (But I haven&#39;t fixed the 26 it&#39;s just example code after all.)"}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 1, "last_activity_date": 1468432157, "last_edit_date": 1468432157, "creation_date": 1468427353, "answer_id": 38357117, "question_id": 38356730, "link": "https://stackoverflow.com/questions/38356730/getline-isnt-working-in-code/38357117#38357117", "title": "getline() isn&#39;t working in code", "body": "<p>So your code works fine: <a href=\"http://ideone.com/lBhD78\" rel=\"nofollow\">http://ideone.com/lBhD78</a></p>\n\n<p>If you're trying to accept more than 1 word the simple extraction operator will not work however. Which is probably what you're asking about. In this case you will want to use <code>getline</code>. Like this for instance:</p>\n\n<pre><code>getline(cin, msg, '\\n');\n</code></pre>\n\n<p>So I'm not certain what you're complaining about, however this could be much improved by:</p>\n\n<ol>\n<li>Being case-insensitive</li>\n<li>Only modifying alpha-characters</li>\n</ol>\n\n<p>You could accomplish this by doing something like:</p>\n\n<pre><code>transform(cbegin(msg), cend(msg), ostream_iterator&lt;char&gt;(cout), [&amp;](unsigned char i){\n    if(isalpha(i)) {\n        const auto a = islower(i) ? 'a' : 'A';\n\n        i = (i - a + key_value) % 26 + a;\n    }\n    return i; });\n</code></pre>\n\n<p>I've written a <a href=\"http://ideone.com/vjBs9C\" rel=\"nofollow\">Live Example</a> complete with <code>getline</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 831, "user_id": 6578349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e3785191b7c34a0e69418797e10fae?s=128&d=identicon&r=PG&f=1", "display_name": "EFenix", "link": "https://stackoverflow.com/users/6578349/efenix"}, "is_accepted": false, "score": 0, "last_activity_date": 1468428943, "last_edit_date": 1468428943, "creation_date": 1468427875, "answer_id": 38357277, "question_id": 38356730, "link": "https://stackoverflow.com/questions/38356730/getline-isnt-working-in-code/38357277#38357277", "title": "getline() isn&#39;t working in code", "body": "<p>You have to be carefull to write questions.\nBUT, without being clear what you mean, the answer is:</p>\n\n<ul>\n<li>When you read cin>>s, by default, you are considering the data are separated by \"white spaces\". So, it skips spaces and read the string until a new space or end of input.</li>\n<li>If you have problems with getline, probably the problem is before the code you are shown. If you read a value with, for example, cin>>integer, you push newline key at the end of the input, but this character is still in the stream. If the following line in your code es getline, probably you will read an empty line.</li>\n</ul>\n\n<p>In the first item you find why you current code works, in the second one, why your getline-version doesn't.</p>\n"}], "owner": {"reputation": 1, "user_id": 6582000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e381c43c64ee24e9fecfed22a95fa52e?s=128&d=identicon&r=PG&f=1", "display_name": "xSoloDrop", "link": "https://stackoverflow.com/users/6582000/xsolodrop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1468432157, "creation_date": 1468426087, "last_edit_date": 1468426220, "question_id": 38356730, "link": "https://stackoverflow.com/questions/38356730/getline-isnt-working-in-code", "title": "getline() isn&#39;t working in code", "body": "<p>Yesterday I started developing a encrypting machine, that works like a Caesar cipher. You put a message (e.g., HELLO), choose a key value (e.g., 3) and the result is KHOOR (3 letters forward). <br>\nThe problem is that, if I use \"cin >> msg;\" I can only codify one word. If I use \"getline (cin, msg);\", the code doesn't work. Maybe it's a simple problem, but I can't solve it... :(</p>\n\n<pre><code>string msg;\nint a, b, i, key_value;\nchar c;\n\ncout &lt;&lt; \"WRITE YOUR MESSAGE:\" &lt;&lt; endl;\ncin &gt;&gt; msg;                         //HERE IS THE PROBLEM!!!\n\nsystem (\"cls\");\n\ncout &lt;&lt; \"PUT A KEY VALUE:\" &lt;&lt; endl;\ncin &gt;&gt; key_value;\n\nsystem (\"cls\");\n\ncout &lt;&lt; \"THE CODIFIED MESSAGE IS:\" &lt;&lt; endl;\n\nfor (i=0; i &lt; msg.length(); i++) {\n\n    if (msg[i] == 'A') a = 1;\n    if (msg[i] == 'B') a = 2;\n    if (msg[i] == 'C') a = 3;\n    if (msg[i] == 'D') a = 4;\n    if (msg[i] == 'E') a = 5;\n    if (msg[i] == 'F') a = 6;\n    if (msg[i] == 'G') a = 7;\n    if (msg[i] == 'H') a = 8;\n    if (msg[i] == 'I') a = 9;\n    if (msg[i] == 'J') a = 10;\n    if (msg[i] == 'K') a = 11;\n    if (msg[i] == 'L') a = 12;\n    if (msg[i] == 'M') a = 13;\n    if (msg[i] == 'N') a = 14;\n    if (msg[i] == 'O') a = 15;\n    if (msg[i] == 'P') a = 16;\n    if (msg[i] == 'Q') a = 17;\n    if (msg[i] == 'R') a = 18;\n    if (msg[i] == 'S') a = 19;\n    if (msg[i] == 'T') a = 20;\n    if (msg[i] == 'U') a = 21;\n    if (msg[i] == 'V') a = 22;\n    if (msg[i] == 'W') a = 23;\n    if (msg[i] == 'X') a = 24;\n    if (msg[i] == 'Y') a = 25;\n    if (msg[i] == 'Z') a = 26;\n\n    b = a + key_value;\n\n    if (b &gt; 26) b -= 26;\n\n    if (b == 1) c = 'A';\n    if (b == 2) c = 'B';\n    if (b == 3) c = 'C';\n    if (b == 4) c = 'D';\n    if (b == 5) c = 'E';\n    if (b == 6) c = 'F';\n    if (b == 7) c = 'G';\n    if (b == 8) c = 'H';\n    if (b == 9) c = 'I';\n    if (b == 10) c = 'J';\n    if (b == 11) c = 'K';\n    if (b == 12) c = 'L';\n    if (b == 13) c = 'M';\n    if (b == 14) c = 'N';\n    if (b == 15) c = 'O';\n    if (b == 16) c = 'P';\n    if (b == 17) c = 'Q';\n    if (b == 18) c = 'R';\n    if (b == 19) c = 'S';\n    if (b == 20) c = 'T';\n    if (b == 21) c = 'U';\n    if (b == 22) c = 'V';\n    if (b == 23) c = 'W';\n    if (b == 24) c = 'X';\n    if (b == 25) c = 'Y';\n    if (b == 26) c = 'Z';\n\n    cout &lt;&lt; c;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm"], "answers": [{"tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 0, "last_activity_date": 1468426796, "creation_date": 1468426796, "answer_id": 38356954, "question_id": 38356693, "link": "https://stackoverflow.com/questions/38356693/google-apac-2017-round-a-incorrect/38356954#38356954", "title": "Google APAC 2017 Round A - incorrect", "body": "<p>You missed the condition</p>\n\n<blockquote>\n  <p>If there is a tie, the person whose name comes earliest in alphabetical order is the leader.</p>\n</blockquote>\n\n<p>Try using</p>\n\n<pre><code>if(leader.empty() || letters.size() &gt; leaderLetterNum ||\n(letters.size() == leaderLetterNum &amp;&amp; cur &lt; leader))\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>if(leader.empty() || letters.size() &gt; leaderLetterNum)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6585384, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9D0BFzaOxF8/AAAAAAAAAAI/AAAAAAAABNI/rSyuBb6i3og/photo.jpg?sz=128", "display_name": "NinoDui", "link": "https://stackoverflow.com/users/6585384/ninodui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1468426796, "creation_date": 1468425981, "question_id": 38356693, "link": "https://stackoverflow.com/questions/38356693/google-apac-2017-round-a-incorrect", "title": "Google APAC 2017 Round A - incorrect", "body": "<p>I was wondering whether anyone could offer some help reviewing the code below? I tried the Google APAC 2017 Round A but was traped by the FIRST question, whose link is <a href=\"https://code.google.com/codejam/contest/11274486/dashboard\" rel=\"nofollow\">https://code.google.com/codejam/contest/11274486/dashboard</a>.</p>\n\n<p>In fact, I had some outputs and they all seem to be correct, while the online judge not saying so. It would be highly appreciated if anyone is willing to scan through the code and have some discussion. Thanks!</p>\n\n<pre><code>string A()\n{\n    int N;\n    cin &gt;&gt; N;\n    cin.get();\n    string leader, cur;\n    int i = 0, j = 0, L = 0, leaderLetterNum = 0;\n    set&lt;char&gt; letters;\n    for(i = 0; i &lt; N; i++)\n    {\n        getline(cin, cur);\n        L = cur.empty() ? 0 : cur.length();\n        for(j = 0; j &lt; L; ++j)\n        {\n            if(cur[j] &gt;= 'A' &amp;&amp; cur[j] &lt;= 'Z') letters.insert(cur[j]);\n        }\n        if(leader.empty() || letters.size() &gt; leaderLetterNum)\n        {\n            leader.clear();\n            leader = cur;\n            leaderLetterNum = letters.size();\n        }\n        cur.clear();\n        letters.clear();\n    }\n    return leader;\n}\n\nvoid multiTest()\n{\n    int T;\n    cin &gt;&gt; T;\n    int caseCount = 0;\n    while(caseCount++ &lt; T)\n    {\n        cout &lt;&lt; \"Case #\" &lt;&lt; caseCount &lt;&lt; \": \" &lt;&lt; A() &lt;&lt; endl;\n    }\n    return;\n}\n\nint main(void)\n{\n    multiTest();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1468426122, "post_id": 38356687, "comment_id": 64125734, "body": "I guess (just guessing) the default flags is &quot;indeterminate&quot; because <code>sf</code> is default-initialized."}, {"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1468426215, "post_id": 38356687, "comment_id": 64125789, "body": "Why are you null terminating your strings and then calling <code>c_str()</code>?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1468426218, "post_id": 38356687, "comment_id": 64125790, "body": "The error relates to <code>ERROR_CANCELLED</code> which means the operation was cancelled?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1468426265, "post_id": 38356687, "comment_id": 64125809, "body": "Many Windows structs require zero-initialization before use.  You did not do that with your declaration of <code>sf</code>."}, {"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 1, "creation_date": 1468426554, "post_id": 38356687, "comment_id": 64125986, "body": "Not an effort at solving the current problem - however, did you see that the function was replaced back about 10 years ago with a COM interface? <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb775771(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 692, "user_id": 2962342, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2XDDc.png?s=128&g=1", "display_name": "arie", "link": "https://stackoverflow.com/users/2962342/arie"}, "reply_to_user": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1468426664, "post_id": 38356687, "comment_id": 64126057, "body": "@JonnyHenly If I don&#39;t null terminate the strings I get ERROR_FILE_NOT_FOUND, and without c_str() it will not compile with error &quot;cannot convert from &#39;std::string&#39; to &#39;PCZZSTR&#39;. How do you suggest doing it?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1468426942, "post_id": 38356687, "comment_id": 64126250, "body": "@SeverusSnape <i>If I don&#39;t null terminate the strings I get ERROR_FILE_NOT_FOUND</i> -- The <code>c_str()</code> gives you a null-terminated string, so what is the reason to null-terminate something that is already going to be null-terminated?  Second, did you look at my comment?  You should zero-initialize the struct and see if that solves the issue."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1468427375, "post_id": 38356687, "comment_id": 64126511, "body": "@SeverusSnape -- For example, <code>ZeroMemory(sf, 0, sizeof(sf));</code> or <code>SHFILEOPSTRUCTA sf = {};</code> before you start setting individual members."}, {"owner": {"reputation": 692, "user_id": 2962342, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2XDDc.png?s=128&g=1", "display_name": "arie", "link": "https://stackoverflow.com/users/2962342/arie"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1468435921, "post_id": 38356687, "comment_id": 64131607, "body": "@PaulMcKenzie I added the initialization of the struct and getting the same result. About the null termination, that&#39;s odd though because if I don&#39;t add the &#39;\\0&#39; and use c_str() alone I still get the file not found error."}, {"owner": {"reputation": 692, "user_id": 2962342, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2XDDc.png?s=128&g=1", "display_name": "arie", "link": "https://stackoverflow.com/users/2962342/arie"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1468437539, "post_id": 38356687, "comment_id": 64132472, "body": "@PaulMcKenzie Ah, looking at the link posted by enhzflep it says, &quot;SHFileOperation required path and destination strings to terminate in two null characters rather than the standard single null character...&quot;, so I guess that explains why I need to null terminate the string."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1468490285, "post_id": 38356687, "comment_id": 64152905, "body": "My comment on <code>ZeroMemory</code> should be <code>ZeroMemory(&amp;sf, 0, sizeof(sf));</code> -- forgot the <code>&amp;</code>."}, {"owner": {"reputation": 692, "user_id": 2962342, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2XDDc.png?s=128&g=1", "display_name": "arie", "link": "https://stackoverflow.com/users/2962342/arie"}, "edited": false, "score": 0, "creation_date": 1468531243, "post_id": 38356687, "comment_id": 64178818, "body": "So far I managed to solve this by adding *.* at the end of the source path and also added FOF_FILESONLY to the flags. Still would love to know why I get that error when setting the flags, but it works when I don&#39;t set any flags!"}], "owner": {"reputation": 692, "user_id": 2962342, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2XDDc.png?s=128&g=1", "display_name": "arie", "link": "https://stackoverflow.com/users/2962342/arie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 448, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1468436123, "creation_date": 1468425967, "last_edit_date": 1468436123, "question_id": 38356687, "link": "https://stackoverflow.com/questions/38356687/copying-folder-with-shfileoperation-error", "title": "Copying Folder with SHFileOperation error", "body": "<p>I am trying to use SHFileOperation to copy the files in a folder (only files, no recursion) to a sub-folder. I have the following piece of code which is failing, SHFileOperation returns 1223 and I get a window with only a Cancel button saying: </p>\n\n<blockquote>\n  <p>\"The destination folder is a subfolder of the source folder.\"</p>\n</blockquote>\n\n<pre><code>bool CopyFolder(std::string source, std::string destination)\n{\n            SHFILEOPSTRUCTA sf;\n\n            source.append(1, '\\0');\n            destination.append(1, '\\0');\n\n            sf.hwnd = GetDesktopWindow(); //Temporary just so I can see any messages\n            sf.pFrom = source.c_str();\n            sf.pTo = destination.c_str();\n            sf.wFunc = FO_COPY;\n            sf.fFlags = FOF_NORECURSION | FOF_NOCONFIRMATION | FOF_NOCONFIRMMKDIR | FOF_SILENT;\n\n            int result = SHFileOperation(&amp;sf);\n\n            if (result == 0)\n            {\n                return true;\n            }\n\n            std::cout &lt;&lt; \"Error: \" &lt;&lt; result &lt;&lt; std::endl;\n\n            return false;\n}\n</code></pre>\n\n<p>Now if I comment the line where I am setting the fFlags, it runs successfully and all the files/folders are copied to the sub-folder. Does anyone know that are the default flags it uses when you don't set them, or how can I avoid this error while setting the flags I want i.e. copy files only?</p>\n"}, {"tags": ["c++", "qt", "visual-studio-2010", "msbuild"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1468426078, "post_id": 38356619, "comment_id": 64125715, "body": "The most logical conclusion is that you forgot to <i>create</i> the &quot;Generated Files&quot; directory."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1468427997, "post_id": 38356619, "comment_id": 64126852, "body": "<b><i>&quot;moc_GPSTransformerNode.cxx&quot; in it. When I try to click on it, it cannot be open.</i></b> Problem with your antivirus software? Wrong Permissions? I would investigate why you can&#39;t open this file since this would likely cause a build failure."}, {"owner": {"reputation": 11, "user_id": 4306610, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002879457286/picture?type=large", "display_name": "Xingyu  Wei", "link": "https://stackoverflow.com/users/4306610/xingyu-wei"}, "edited": false, "score": 0, "creation_date": 1468502199, "post_id": 38356619, "comment_id": 64160909, "body": "Maybe I haven&#39;t explained clearly. The &quot;moc_GPSTransformerNode.cxx&quot; exists in the &quot;Solution Explorer&quot; list in the folder &quot;Generated Files&quot;. When i click it , it says &quot;The document cannot be opened, It has been renamed, removed or deleted &quot;. Then I go to E: drive where the project exists, the folder &#39;Generated Files&quot; exists but nothing is inside."}], "owner": {"reputation": 11, "user_id": 4306610, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002879457286/picture?type=large", "display_name": "Xingyu  Wei", "link": "https://stackoverflow.com/users/4306610/xingyu-wei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1688, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1468425856, "creation_date": 1468425761, "last_edit_date": 1468425856, "question_id": 38356619, "link": "https://stackoverflow.com/questions/38356619/c-program-files-x86-msbuild-microsoft-cpp-v4-0-microsoft-cppcommon-targets15", "title": "C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\Microsoft.CppCommon.targets(151,5): error MSB6006: &quot;cmd.exe&quot; exited with code 3", "body": "<p>when I use CMake to generate projects in visual studio and build it, I met the problem as the title says. \nIn the Cmake I have integrated QT libraries. See the following lines:</p>\n\n<pre><code>INCLUDE_DIRECTORIES(\n  ${TOOLS_SOURCE_DIR}/../extern/qt5/include\n  ${TOOLS_SOURCE_DIR}/../extern/qt5/include/QtCore\n  ${CMAKE_CURRENT_BINARY_DIR}/Generated_Files\n)\n\nSET(GPS_TRANSFORMER_SRC\n  GPSTransformerNode.cxx\n)\nSET(GPS_TRANSFORMER_MOC_H\n  GPSTransformerNode.h\n)\nSET(GPS_TRANSFORMER_UI\n)\n\nQT_WRAP_CPP(GPS_TRANSFORMER_MOC_CXX ${GPS_TRANSFORMER_MOC_H})\nQT_WRAP_UI(GPS_TRANSFORMER_UI_H ${GPS_TRANSFORMER_UI})\nSOURCE_GROUP(\"Generated Files\" FILES ${GPS_TRANSFORMER_MOC_CXX} ${GPS_TRANSFORMER_UI_H})\n</code></pre>\n\n<p>In visual studio, after building it,it comes to this error. Following are details.</p>\n\n<pre><code>1&gt;_PrepareForClean:\n1&gt;  Deleting file \"RosGpsTransformer.dir\\Release\\RosGpsTransformer.lastbuildstate\".\n1&gt;InitializeBuildStatus:\n1&gt;  Touching \"RosGpsTransformer.dir\\Release\\RosGpsTransformer.unsuccessfulbuild\".\n1&gt;CustomBuild:\n1&gt;  Building Custom Rule E:/Projects/MyRosPacage/NODES/src/RosGpsTransformer/CMakeLists.txt\n1&gt;  CMake does not need to re-run because E:\\Projects\\MyRosPacage\\NODES\\win32\\RosGpsTransformer\\CMakeFiles\\generate.stamp is up-to-date.\n1&gt;  Generating Generated_Files/moc_GPSTransformerNode.cxx\n1&gt;  The system cannot find the path specified.\n1&gt;C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\Microsoft.CppCommon.targets(151,5): error MSB6006: \"cmd.exe\" exited with code 3.\n1&gt;\n1&gt;Build FAILED.\n</code></pre>\n\n<p>Then I noticed that in the project there is a folder called \"Generated Files\" and a file called \"moc_GPSTransformerNode.cxx\" in it. When I try to click on it, it cannot be open. </p>\n\n<p>Does anybody know how I solve this problem?</p>\n"}, {"tags": ["c++", "gcc", "g++"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1468425764, "post_id": 38356599, "comment_id": 64125504, "body": "What is the target architecutre? Are you sure it supports the instruction <code>pushad</code>?"}, {"owner": {"reputation": 256, "user_id": 4376737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5NOrP.jpg?s=128&g=1", "display_name": "ar1a", "link": "https://stackoverflow.com/users/4376737/ar1a"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1468425816, "post_id": 38356599, "comment_id": 64125538, "body": "I&#39;m running in VMWare, but its ia32 lol"}, {"owner": {"reputation": 256, "user_id": 4376737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5NOrP.jpg?s=128&g=1", "display_name": "ar1a", "link": "https://stackoverflow.com/users/4376737/ar1a"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1468425828, "post_id": 38356599, "comment_id": 64125544, "body": "works fine on my windows host using msvc"}], "answers": [{"comments": [{"owner": {"reputation": 256, "user_id": 4376737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5NOrP.jpg?s=128&g=1", "display_name": "ar1a", "link": "https://stackoverflow.com/users/4376737/ar1a"}, "reply_to_user": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "edited": false, "score": 0, "creation_date": 1468475940, "post_id": 38357015, "comment_id": 64144487, "body": "This was an answer. I should use pusha instead of pushad. I couldn&#39;t mark as answer for two days."}], "tags": [], "owner": {"reputation": 256, "user_id": 4376737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5NOrP.jpg?s=128&g=1", "display_name": "ar1a", "link": "https://stackoverflow.com/users/4376737/ar1a"}, "is_accepted": true, "score": 0, "last_activity_date": 1468426973, "creation_date": 1468426973, "answer_id": 38357015, "question_id": 38356599, "link": "https://stackoverflow.com/questions/38356599/g-is-throwing-an-error-on-some-basic-inline-asm/38357015#38357015", "title": "G++ is throwing an error on some basic inline asm", "body": "<p>G++ uses the 16bit version, <code>pusha</code></p>\n"}], "owner": {"reputation": 256, "user_id": 4376737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5NOrP.jpg?s=128&g=1", "display_name": "ar1a", "link": "https://stackoverflow.com/users/4376737/ar1a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "closed_date": 1468429505, "accepted_answer_id": 38357015, "answer_count": 1, "score": 0, "last_activity_date": 1468426973, "creation_date": 1468425705, "question_id": 38356599, "link": "https://stackoverflow.com/questions/38356599/g-is-throwing-an-error-on-some-basic-inline-asm", "closed_reason": "Duplicate", "title": "G++ is throwing an error on some basic inline asm", "body": "<p>I'm trying to execute\n<code>asm(\"pushad\");</code> yet it's throwing an error saying \"invalid instruction mnemonic \"pushad\" and then shows the line. I couldn't find anything on google and it SHOULD work. I've also tried __pushad, _pushad and PUSHAD.</p>\n"}, {"tags": ["c++", "clang"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1468426034, "post_id": 38356485, "comment_id": 64125677, "body": "I&#39;m not too sure as I am just experimenting with clang myself but you could try: <code>auto&amp; lang_opts = ci.getLangOpts(); lang_opts.CPlusPlus14 = 1;</code>."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1468426735, "post_id": 38356485, "comment_id": 64126113, "body": "<code>clang++ filename.cpp</code> maybe? Or with <code>clang++ -std=c++11 ...</code> maybe? Or name your source file to end with <code>.cpp</code> maybe?"}, {"owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1468427119, "post_id": 38356485, "comment_id": 64126361, "body": "@Galik Already tried that unfortuantely."}, {"owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1468427140, "post_id": 38356485, "comment_id": 64126373, "body": "@MarkSetchell I am not using <code>clang</code> or <code>clang++</code> the command-line tools."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1468427863, "post_id": 38356485, "comment_id": 64126777, "body": "FrontEndFile.InputKind looks promising, distinguishes between IK_C, IK_CXX, IK_ObjC, etcetera."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 1, "creation_date": 1468428310, "post_id": 38356485, "comment_id": 64127042, "body": "what <code>-std=</code> is being targeted? Is <code>-ansi</code> turned on? Is this approach the same as using <code>clang -cc1</code> option <a href=\"http://stackoverflow.com/questions/8991662/what-does-the-clang-cc1-option-do\">What does the clang -cc1 option do?</a>?"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 3, "creation_date": 1468436309, "post_id": 38356485, "comment_id": 64131840, "body": "take a look at <a href=\"http://stackoverflow.com/questions/25580877/unable-to-force-a-clang-compilerinstance-object-to-parse-a-header-as-c-file\">Unable to force a clang CompilerInstance object to parse a header as C++ file</a> which seems to be a similar problem."}], "answers": [{"comments": [{"owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "edited": false, "score": 0, "creation_date": 1468945549, "post_id": 38445919, "comment_id": 64331666, "body": "Please could you expand on this?"}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "reply_to_user": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "edited": false, "score": 2, "creation_date": 1469024811, "post_id": 38445919, "comment_id": 64370246, "body": "@sdgfsdh: you should specify the changes so that Heyji can revise his example so that it <i>works unchanged</i>"}, {"owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "reply_to_user": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 1, "creation_date": 1469025506, "post_id": 38445919, "comment_id": 64370764, "body": "@IraBaxter I have added it to the end of his answer. Pending peer review..."}], "tags": [], "owner": {"reputation": 1051, "user_id": 2093195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d3c2c0866e1e1d5935b70f59fcf7fbc?s=128&d=identicon&r=PG", "display_name": "Heyji", "link": "https://stackoverflow.com/users/2093195/heyji"}, "is_accepted": true, "score": 4, "last_activity_date": 1469008764, "last_edit_date": 1469008764, "creation_date": 1468875652, "answer_id": 38445919, "question_id": 38356485, "link": "https://stackoverflow.com/questions/38356485/how-do-i-put-clang-into-c-mode/38445919#38445919", "title": "How do I put Clang into C++ mode?", "body": "<p>Before executing the compiler, you have to check/set the <code>CompilerInvocation</code> structure with the <code>getInvocation()</code> / <code>setInvocation()</code> methods. This structure defines the language options (calling convention, garbage collection, ...), the language kind (C, CXX, Asm, ObjC, ...), the target triple, the preprocessor options and the language standard. It is set with the method <code>setLangDefaults()</code>.</p>\n\n<p>This is the <code>InputKind</code> class that holds which language you want to parse.</p>\n\n<p>As written in the documentation, the <code>setLangDefaults()</code> API </p>\n\n<blockquote>\n  <p>sets some properties which depend solely on the input kind</p>\n</blockquote>\n\n<p>by inspecting the source code, you can see the following constructors call hierarchy: </p>\n\n<ul>\n<li><code>CompilerInstance()</code> </li>\n<li><code>CompilerInvocation()</code></li>\n<li><code>CompilerInvocationBase()</code></li>\n<li><code>LangOptions()</code></li>\n</ul>\n\n<p>In the <code>LangOptions()</code> constructor, you can see that no specific/default language is set (<a href=\"https://github.com/llvm-mirror/clang/blob/master/include/clang/Basic/LangOptions.def\" rel=\"nofollow\">LangOptions.def</a>). Hence the need to go through the setLangDefaults() specific API. </p>\n\n<p>you should thus go like:</p>\n\n<pre><code>std::string transform(std::string fileName) {\n\n  CompilerInstance compilerInstance;\n  compilerInstance.createDiagnostics();\n\n  CompilerInvocation &amp; invocation = compilerInstance.getInvocation();\n\n  // Initialize target info with the default triple for our platform.\n  auto TO = std::make_shared&lt;TargetOptions&gt;();\n  TO-&gt;Triple = llvm::sys::getDefaultTargetTriple();\n  TargetInfo* targetInfo =\n      TargetInfo::CreateTargetInfo(compilerInstance.getDiagnostics(), TO);\n  compilerInstance.setTarget(targetInfo);\n\n  compilerInstance.createFileManager();\n  auto&amp; fileManager = compilerInstance.getFileManager();\n\n  compilerInstance.createSourceManager(fileManager);\n  auto&amp; sourceManager = compilerInstance.getSourceManager();\n\n  LangOptions langOpts; \n  langOpts.GNUMode = 1;  \n  langOpts.CXXExceptions = 1;  \n  langOpts.RTTI = 1;  \n  langOpts.Bool = 1;   // &lt;-- Note the Bool option here !\n  langOpts.CPlusPlus = 1;  \n  PreprocessorOptions &amp;PPOpts = compilerInstance.getPreprocessorOpts();\n\n  invocation.setLangDefaults(langOpts, \n                             clang::IK_CXX,\n                             TO-&gt;Triple, \n                             PPOpts,\n                             clang::LangStandard::lang_cxx0x); \n\n\n  compilerInstance.createPreprocessor(TU_Module);\n  compilerInstance.createASTContext();\n\n  // A Rewriter helps us manage the code rewriting task.\n  auto rewriter = clang::Rewriter(sourceManager, compilerInstance.getLangOpts());\n\n  // Set the main file handled by the source manager to the input file.\n  const FileEntry* inputFile = fileManager.getFile(fileName);\n  sourceManager.setMainFileID(\n      sourceManager.createFileID(inputFile, SourceLocation(), SrcMgr::C_User));\n  compilerInstance.getDiagnosticClient().BeginSourceFile(\n      compilerInstance.getLangOpts(), &amp;compilerInstance.getPreprocessor());\n\n  // Create an AST consumer instance which is going to get called by\n  // ParseAST.\n  MyASTConsumer consumer(rewriter);\n\n  // Parse the file to AST, registering our consumer as the AST consumer.\n  clang::ParseAST(\n    compilerInstance.getPreprocessor(), \n    &amp;consumer, \n    compilerInstance.getASTContext());\n\n  // At this point the rewriter's buffer should be full with the rewritten\n  // file contents.\n  const RewriteBuffer* buffer = rewriter.getRewriteBufferFor(sourceManager.getMainFileID());\n\n  return std::string(buffer-&gt;begin(), buffer-&gt;end());\n}\n</code></pre>\n\n<p>Reference taken in the clang tutorial <a href=\"https://github.com/loarabia/Clang-tutorial/blob/master/CIrewriter.cpp\" rel=\"nofollow\">CIRewriter.cpp</a>, and which seems also a bit outdated.</p>\n"}], "owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1734, "favorite_count": 3, "accepted_answer_id": 38445919, "answer_count": 1, "score": 5, "last_activity_date": 1469008764, "creation_date": 1468425315, "last_edit_date": 1468945593, "question_id": 38356485, "link": "https://stackoverflow.com/questions/38356485/how-do-i-put-clang-into-c-mode", "title": "How do I put Clang into C++ mode?", "body": "<p>I am working on an AST transformer using Clang. It is supposed to take a file-name as input, perform some transformations to the code in that file, and return the transformed code. It is based on <a href=\"https://github.com/eliben/llvm-clang-samples/blob/master/src_clang/rewritersample.cpp\" rel=\"nofollow\">a helpful example from Eli Bendersky</a>. </p>\n\n<p>Here is the code: </p>\n\n<pre><code>std::string transform(std::string fileName) {\n\n  // CompilerInstance will hold the instance of the Clang compiler for us,\n  // managing the various objects needed to run the compiler.\n  CompilerInstance compilerInstance;\n\n  compilerInstance.createDiagnostics();\n\n  auto&amp; langOpts = compilerInstance.getLangOpts();\n  langOpts.CPlusPlus = true;\n\n  // Initialize target info with the default triple for our platform.\n  auto TO = std::make_shared&lt;TargetOptions&gt;();\n  TO-&gt;Triple = llvm::sys::getDefaultTargetTriple();\n  TargetInfo* targetInfo =\n      TargetInfo::CreateTargetInfo(compilerInstance.getDiagnostics(), TO);\n  compilerInstance.setTarget(targetInfo);\n\n  compilerInstance.createFileManager();\n  auto&amp; fileManager = compilerInstance.getFileManager();\n\n  compilerInstance.createSourceManager(fileManager);\n  auto&amp; sourceManager = compilerInstance.getSourceManager();\n\n  compilerInstance.createPreprocessor(TU_Module);\n  compilerInstance.createASTContext();\n\n  // A Rewriter helps us manage the code rewriting task.\n  auto rewriter = clang::Rewriter(sourceManager, compilerInstance.getLangOpts());\n\n  // Set the main file handled by the source manager to the input file.\n  const FileEntry* inputFile = fileManager.getFile(fileName);\n  sourceManager.setMainFileID(\n      sourceManager.createFileID(inputFile, SourceLocation(), SrcMgr::C_User));\n  compilerInstance.getDiagnosticClient().BeginSourceFile(\n      compilerInstance.getLangOpts(), &amp;compilerInstance.getPreprocessor());\n\n  // Create an AST consumer instance which is going to get called by\n  // ParseAST.\n  MyASTConsumer consumer(rewriter);\n\n  // Parse the file to AST, registering our consumer as the AST consumer.\n  clang::ParseAST(\n    compilerInstance.getPreprocessor(), \n    &amp;consumer, \n    compilerInstance.getASTContext());\n\n  // At this point the rewriter's buffer should be full with the rewritten\n  // file contents.\n  const RewriteBuffer* buffer = rewriter.getRewriteBufferFor(sourceManager.getMainFileID());\n\n  return std::string(buffer-&gt;begin(), buffer-&gt;end());\n}\n</code></pre>\n\n<p>Here is my input program, <code>negate.cpp</code>: </p>\n\n<pre><code>bool negate(bool b) {\n    if (b) {\n        return false;\n    } else {\n        return true;\n    }\n}\n</code></pre>\n\n<p>When I run <code>transform</code> on this code I get the following error: </p>\n\n<pre><code>negate.cpp:1:1: error: unknown type name 'bool'\nbool negate(bool b) {\n^\n</code></pre>\n\n<p>This suggests to me that it is working in C mode, not C++ mode. To confirm, I replaced <code>bool</code> with <code>int</code>, <code>true</code> with <code>1</code> and <code>false</code> with <code>0</code>: </p>\n\n<pre><code>int negate(int b) {\n    if (b) {\n        return 0;\n    } else {\n        return 1;\n    }\n}\n</code></pre>\n\n<p>This worked, so my question is: </p>\n\n<p>How do I put a Clang <code>CompilerInstance</code> into C++ mode? </p>\n\n<hr>\n\n<p>Update: </p>\n\n<p>I tried changing the invocation, but no luck: </p>\n\n<pre><code>  auto&amp; langOpts = compilerInstance.getLangOpts();\n  langOpts.CPlusPlus = true;\n  langOpts.CPlusPlus11 = true;\n\n  auto* compilerInvocation = new CompilerInvocation();\n\n  compilerInvocation-&gt;setLangDefaults(\n    langOpts, \n    clang::InputKind::IK_CXX, \n    LangStandard::lang_gnu11);\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-asio"], "comments": [{"owner": {"reputation": 4376, "user_id": 1351465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17845023034a9b3ad336f2883ed79149?s=128&d=identicon&r=PG", "display_name": "JuanR", "link": "https://stackoverflow.com/users/1351465/juanr"}, "edited": false, "score": 0, "creation_date": 1468425364, "post_id": 38356404, "comment_id": 64125230, "body": "How many threads does your ioservice have? Do you have a worker attached to it in order to prevent it from stopping?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 3, "creation_date": 1468425976, "post_id": 38356404, "comment_id": 64125646, "body": "frankly I would drop this approach immediately. follow the guidelines in the documentation. create a wait object, call io_service::run in as many threads as you need and then call io_service::stop() followed by joining the threads. You don&#39;t need a thread-per-client in an async model. 1 thread per core is more like it."}, {"owner": {"reputation": 3808, "user_id": 2922611, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f26420ac1fcb58b3d0c0f63273eaf3f5?s=128&d=identicon&r=PG&f=1", "display_name": "kenba", "link": "https://stackoverflow.com/users/2922611/kenba"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1468477988, "post_id": 38356404, "comment_id": 64145454, "body": "I completely agree with @RichardHodges .You can also take a look at the <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/boost_asio/examples/cpp03_examples.html\" rel=\"nofollow noreferrer\">boost asio HTTP Server 2, 3, and 4 examples</a> for better ways to do it."}], "owner": {"reputation": 1, "user_id": 5664556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d80d72941adefa25df267abf8204ea8?s=128&d=identicon&r=PG&f=1", "display_name": "hop", "link": "https://stackoverflow.com/users/5664556/hop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 361, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1468425113, "creation_date": 1468425113, "question_id": 38356404, "link": "https://stackoverflow.com/questions/38356404/boost-async-wait-return-handler-never-gets-called", "title": "boost async_wait return handler never gets called", "body": "<p>I am working with the <code>boost::asio tcp</code>, version 1.57, creating a custom server/client, roughly following this example: <a href=\"http://www.boost.org/doc/libs/1_45_0/doc/html/boost_asio/example/timeouts/async_tcp_client.cpp\" rel=\"nofollow\">Async_Tcp_Client</a> , but I'm running the io_service run() in it's own thread per server/client. Also, there can be multiple server/clients per application. </p>\n\n<p>Following the example I put my <code>await_output</code> function to sleep when I DON'T want to send a Message, and waking it up when I do want to send one (via <code>async_write</code>). After a varying amount of send-operations (sometimes less then 10, sometimes several thousand) I run into strange behaviour of my <code>await_output</code> Deadline (a boost deadline timer).<br>\nAt some point, the <code>async_wait</code> against the timer just \"disappears\" and doesn't return when I cancel the deadline to send a message. </p>\n\n<p>The <code>transmit</code> function, that is called by the Application owning the Client/Server (only by the application though, I guess it is not very threadsafe);<br>\nThe <code>await_output</code> function that is waiting on the <code>mOutputQueueDeadline</code>;<br>\nAnd the <code>handle_write</code> function:  </p>\n\n<pre><code>void SocketTcp::transmit(std::string pMsg) {\n    if (mStopped)\n    { return; }\n\n    mOutputQueue.push(pMsg); // a global queue\n\n    // Signal that the output queue contains messages. Modifying the expiry\n    // will wake the output actor, if it is waiting on the timer.\n    size_t quits = mOutputQueueDeadline.expires_at(boost::posix_time::neg_infin);\n//this returns '0' when the error occurs\n}\n\n\nvoid SocketTcp::await_output(const boost::system::error_code&amp; ec)\n{\n    if (mStopped)\n    { return; }\n\n    if (mOutputQueue.empty())\n    {\n        size_t quits = mOutputQueueDeadline.expires_at(boost::posix_time::pos_infin);\n\n        mOutputQueueDeadline.async_wait(boost::bind(&amp;SocketTcp::await_output, this, _1)); \n        //this async_wait starts a wait on the deadline, that sometimes never returns!\n    }\n    else\n    {\n        boost::asio::async_write(mSocket, \n                            boost::asio::buffer(mOutputQueue.front()), \n                            boost::bind(&amp;SocketTcp::handle_write, this, _1));\n    }\n}\n\n\nvoid SocketTcp::handle_write(const boost::system::error_code&amp; ec)\n{\n    if (mStopped)\n    { return; }\n\n    if(!ec)\n    {\n        mOutputQueue.pop(); //remove sent element from queue\n        boost::system::error_code errcode;\n        await_output(errcode); //start the waiting actor for outgoing messages\n    }\n    else\n    {\n        mConnected = false; //update the connection status\n        this-&gt;stop();\n    }\n}\n</code></pre>\n\n<p>I tried implementing a workaround, restarting the <code>await_output</code> in <code>transmit()</code> when <code>expire_at</code> returns 0, but that leads to TWO actors beeing awakened the next time I send a message, and then running into a crash (<code>String iterator not dereferencable</code> - the design doesn't allow for parallel send OP, much less trying to send the same message...)</p>\n\n<p>I tried debugging with the <code>BOOST_ASIO_ENABLE_HANDLER_TRACKING</code> option, and found the error here:</p>\n\n<pre><code>@asio|1468415460.456019|0|deadline_timer@000000000050AB88.cancel //transmit cancels the timer\n@asio|1468415460.456019|&gt;474|ec=system:995 //await_output is called\n@asio|1468415460.456019|474*479|socket@000000000050A9D8.async_send //starts the async send\n@asio|1468415460.457019|&lt;474|\n@asio|1468415460.457019|&gt;479|ec=system:0,bytes_transferred=102 //async send returns to it's handler\n@asio|1468415460.457019|479|deadline_timer@000000000050AB88.cancel\n    //this cancel op is the only difference to the 'normal' order,\n    //not sure where it originates though!!\n@asio|1468415460.457019|479*480|deadline_timer@000000000050AB88.async_wait //the handler starts the new async wait\n    //handler 480 never gets called when the deadline is canceled the next time\n@asio|1468415460.457019|&lt;479|\n</code></pre>\n\n<p>I'm pretty new to c++ as well as the stackoverflow (even though it has already safed me multiple times!) so please tell me if I can improve my question somehow!</p>\n"}, {"tags": ["c++", "c++11", "shared-ptr"], "comments": [{"owner": {"reputation": 2717, "user_id": 611901, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5f811c06e5a3b361c60bb3f191ea3e46?s=128&d=identicon&r=PG", "display_name": "Makers_F", "link": "https://stackoverflow.com/users/611901/makers-f"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1468426429, "post_id": 38356334, "comment_id": 64125916, "body": "It&#39;s indeed a duplicate. I couldn&#39;t find that question when searching on SO"}], "answers": [{"comments": [{"owner": {"reputation": 2717, "user_id": 611901, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5f811c06e5a3b361c60bb3f191ea3e46?s=128&d=identicon&r=PG", "display_name": "Makers_F", "link": "https://stackoverflow.com/users/611901/makers-f"}, "edited": false, "score": 0, "creation_date": 1468426388, "post_id": 38356466, "comment_id": 64125887, "body": "Someone needs to read how the library is implemented and infer that it&#39;s needed to be public.. Not the clearest of the approaches. Moreover it&#39;s just a &#39;common&#39; way, not the only way"}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "reply_to_user": {"reputation": 2717, "user_id": 611901, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5f811c06e5a3b361c60bb3f191ea3e46?s=128&d=identicon&r=PG", "display_name": "Makers_F", "link": "https://stackoverflow.com/users/611901/makers-f"}, "edited": false, "score": 0, "creation_date": 1468426652, "post_id": 38356466, "comment_id": 64126045, "body": "@Makers_F : From C++17, it&#39;s the only way. Also, how would you do this differently in O(1), i.e., without global <code>std::map&lt;&gt;</code> lookup? <code>enable_shared_from_this</code> is indeed intrusive, which means you might as well use reference-counted ptrs..."}, {"owner": {"reputation": 2717, "user_id": 611901, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5f811c06e5a3b361c60bb3f191ea3e46?s=128&d=identicon&r=PG", "display_name": "Makers_F", "link": "https://stackoverflow.com/users/611901/makers-f"}, "edited": false, "score": 0, "creation_date": 1468427259, "post_id": 38356466, "comment_id": 64126439, "body": "The question is marked C++11. I&#39;m sure an experienced developer would not make the same mistake I made and could easily infer what you explained. But why, if the only way to use it is to make it public, that&#39;s not stated explicitly in the documentation or enforced at compile time (is that even possible? I&#39;m still studying templates)"}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "reply_to_user": {"reputation": 2717, "user_id": 611901, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5f811c06e5a3b361c60bb3f191ea3e46?s=128&d=identicon&r=PG", "display_name": "Makers_F", "link": "https://stackoverflow.com/users/611901/makers-f"}, "edited": false, "score": 1, "creation_date": 1468430301, "post_id": 38356466, "comment_id": 64128216, "body": "@Makers_F: In general it&#39;s impossible, but for CRTP (i.e., when you pass the descendant as a template parameter) you might just verify if <code>(Base*)(Descendant*)nullptr</code> is valid or something... I also can&#39;t see why this verification is not done. You might bring it up to WG21..."}], "tags": [], "owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "is_accepted": true, "score": 1, "last_activity_date": 1468425273, "creation_date": 1468425273, "answer_id": 38356466, "question_id": 38356334, "link": "https://stackoverflow.com/questions/38356334/why-enable-shared-from-this-must-be-publicly-inherited/38356466#38356466", "title": "Why enable_shared_from_this must be publicly inherited?", "body": "<p>This is from cppreference: 'A common (until C++17)standard (since C++17) implementation for enable_shared_from_this is to hold a weak reference (such as std::weak_ptr) to this. The constructors of std::shared_ptr detect the presence of an enable_shared_from_this base and assign the newly created std::shared_ptr to the internally stored weak reference.' That is, <code>std::shared_ptr&lt;&gt;</code> needs write access to this field, not just your class.</p>\n"}], "owner": {"reputation": 2717, "user_id": 611901, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5f811c06e5a3b361c60bb3f191ea3e46?s=128&d=identicon&r=PG", "display_name": "Makers_F", "link": "https://stackoverflow.com/users/611901/makers-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "closed_date": 1468427130, "accepted_answer_id": 38356466, "answer_count": 1, "score": 0, "last_activity_date": 1468425273, "creation_date": 1468424904, "question_id": 38356334, "link": "https://stackoverflow.com/questions/38356334/why-enable-shared-from-this-must-be-publicly-inherited", "closed_reason": "Duplicate", "title": "Why enable_shared_from_this must be publicly inherited?", "body": "<p>I just had an hard time understanding why this code was throwing.\nAll the other solutions on SO said you need to have a shared_ptr instance in order to use shared_from_this(), and I had it!\nBut nonetheless, the code was still crashing like all the other questions were describing.</p>\n\n<p>Here is a simplified version of the code</p>\n\n<p>main.cpp</p>\n\n<pre><code>uint16_t port = 9876;\nauto inout = cms::MultiTcpInOut::create(port);\ninout-&gt;start_accept();\n</code></pre>\n\n<p>MultiTcpInOut.h</p>\n\n<pre><code>#ifndef MULTITCPINOUT_H\n#define MULTITCPINOUT_H\n\n#include &lt;memory&gt;\n#include &lt;utility&gt;\n\nnamespace cms {\n\n    using namespace std;\n\n    class MultiTcpInOut : private enable_shared_from_this&lt;MultiTcpInOut&gt;\n    {\n        public:\n            static shared_ptr&lt;MultiTcpInOut&gt; create(uint16_t port)\n            {\n                return shared_ptr&lt;MultiTcpInOut&gt;(new MultiTcpInOut(port));\n            }\n\n            virtual ~MultiTcpInOut();\n\n            // start_accept() can not be called from the constructor because it uses shared_from_this(), and\n            // make_shared&lt;&gt;() haven't finished yet when it is called. Let the instantiating code call it\n            void start_accept();\n\n        protected:\n            MultiTcpInOut(uint16_t port);\n    };\n}\n#endif // MULTITCPINOUT_H\n</code></pre>\n\n<p>MultiTcpInOut.cpp</p>\n\n<pre><code>void MultiTcpInOut::start_accept()\n{\n    LOG(INFO) &lt;&lt; \"Starting accept\";\n    auto socket = make_shared&lt;tcp::socket&gt;(io_service);\n    auto shrd_this = shared_from_this();\n    acceptor-&gt;async_accept(*socket.get(), bind(&amp;MultiTcpInOut::handle_accept, shrd_this, socket, std::placeholders::_1));\n}\n</code></pre>\n\n<hr>\n\n<p>Changing the <code>private enable_shared_from_this&lt;MultiTcpInOut&gt;</code> to <code>public enable_shared_from_this&lt;MultiTcpInOut&gt;</code> fixed the problem.</p>\n\n<p>Nowhere it says it must be inherited publicly (<a href=\"http://en.cppreference.com/w/cpp/memory/enable_shared_from_this\" rel=\"nofollow\">at least reading the reference</a>), and I don't understand why it has not, since I was calling it from a class method!</p>\n\n<p>So, why does it have to be public?\nIs it so clear that it's not mentioned in the spec?</p>\n\n<p>To help someone which might have my same problem</p>\n\n<h2><strong><em>ENABLE_SHARED_FROM_THIS MUST BE INHERITED AS PUBLIC!!!</em></strong></h2>\n"}, {"tags": ["c++", "function", "pointers", "position", "cursor-position"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1468424786, "post_id": 38356132, "comment_id": 64124787, "body": "I&#39;d suspect you&#39;ve met some stack corruption or so. Rearanging the code can easily hide the errorneous behavior, or expose it."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468424802, "post_id": 38356132, "comment_id": 64124800, "body": "In code shown program should not crash any way, looks like problem is somewhere else"}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1468425030, "post_id": 38356132, "comment_id": 64124962, "body": "That will crash of course, because hwnd is undefined."}, {"owner": {"reputation": 962, "user_id": 6492540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yQDfs.jpg?s=128&g=1", "display_name": "buld0zzr", "link": "https://stackoverflow.com/users/6492540/buld0zzr"}, "edited": false, "score": 0, "creation_date": 1468425649, "post_id": 38356132, "comment_id": 64125425, "body": "<code>hwnd</code> is undefined, are you sure this is complete code?"}, {"owner": {"reputation": 1832, "user_id": 4441547, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-_a7aQ1gNiFY/AAAAAAAAAAI/AAAAAAAAABw/2usMjLqKwgI/photo.jpg?sz=128", "display_name": "Aaron Franke", "link": "https://stackoverflow.com/users/4441547/aaron-franke"}, "edited": false, "score": 0, "creation_date": 1468426917, "post_id": 38356132, "comment_id": 64126230, "body": "No, I&#39;m not sure at all. Defining a HWND wasn&#39;t even shown in the answer I linked, but I placed that there and it compiles."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1468428393, "post_id": 38356132, "comment_id": 64127088, "body": "@AaronFranke The <code>HwND hwnd;</code> is uninitialized. As I guessed you have undefined behavior."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1468424580, "post_id": 38356175, "comment_id": 64124648, "body": "How does this answer why <code>if (GetCursorPos(&amp;p) &amp;&amp; ScreenToClient(hwnd, &amp;p))</code> crashes when it does not if it is two separate if blocks?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1468425158, "post_id": 38356175, "comment_id": 64125054, "body": "@NathanOliver there are many questions in the question. This appears to be an answer to another of the questions, than you refer to."}], "tags": [], "owner": {"reputation": 120111, "user_id": 469935, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/14lYV.jpg?s=128&g=1", "display_name": "Armen Tsirunyan", "link": "https://stackoverflow.com/users/469935/armen-tsirunyan"}, "is_accepted": false, "score": 4, "last_activity_date": 1468424470, "creation_date": 1468424470, "answer_id": 38356175, "question_id": 38356132, "link": "https://stackoverflow.com/questions/38356132/c-why-must-some-functions-be-placed-in-if-statements/38356175#38356175", "title": "C++: Why must some functions be placed in if statements?", "body": "<p>It doesn't change how the functions run. Many functions return a boolean value indicating whether the operation succeeded or not. By enclosing the function call in an if, you're automatically checking if the operation succeeded.</p>\n\n<pre><code>   if(functionReturningSuccess(params))\n   {\n      //assume the operation succeeded\n   }\n   else\n   {\n      //report error\n   }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 962, "user_id": 6492540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yQDfs.jpg?s=128&g=1", "display_name": "buld0zzr", "link": "https://stackoverflow.com/users/6492540/buld0zzr"}, "edited": false, "score": 0, "creation_date": 1468425346, "post_id": 38356251, "comment_id": 64125211, "body": "However, as OP says, <code>if (GetCursorPos(&amp;p) &amp;&amp; ScreenToClient(hwnd, &amp;p))</code> still crashes when he clicks the window"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 3, "last_activity_date": 1468425493, "last_edit_date": 1468425493, "creation_date": 1468424667, "answer_id": 38356251, "question_id": 38356132, "link": "https://stackoverflow.com/questions/38356132/c-why-must-some-functions-be-placed-in-if-statements/38356251#38356251", "title": "C++: Why must some functions be placed in if statements?", "body": "<p><code>if (GetCursorPos(&amp;p) &amp;&amp; ScreenToClient(hwnd, &amp;p))</code> is quite pernicious, but strangely elegant.</p>\n\n<p>Due to the <em>short-circutting</em> nature of the <code>&amp;&amp;</code> operator, <code>ScreenToClient(hwnd, &amp;p)</code> will only be called if <code>GetCursorPos(&amp;p)</code> runs successfully (i.e. returns something that converts to <code>true</code>). The latter, if successful, also happens to set <code>p</code> to something valid for the subsequent <code>ScreenToClient</code> call.</p>\n\n<p>The enclosing <code>if</code> block is only ran if <em>both</em> functions are successful.</p>\n\n<p>Your crash could well be due to your <code>hwnd</code> being uninitialised.</p>\n"}], "owner": {"reputation": 1832, "user_id": 4441547, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-_a7aQ1gNiFY/AAAAAAAAAAI/AAAAAAAAABw/2usMjLqKwgI/photo.jpg?sz=128", "display_name": "Aaron Franke", "link": "https://stackoverflow.com/users/4441547/aaron-franke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 38356251, "answer_count": 2, "score": -1, "last_activity_date": 1468436021, "creation_date": 1468424352, "last_edit_date": 1468425435, "question_id": 38356132, "link": "https://stackoverflow.com/questions/38356132/c-why-must-some-functions-be-placed-in-if-statements", "title": "C++: Why must some functions be placed in if statements?", "body": "<p>I'll be referencing this answer: <a href=\"https://stackoverflow.com/questions/6423729/get-current-cursor-position/6423739#6423739\">Get current cursor position</a></p>\n\n<p>The working code:</p>\n\n<pre><code>    HWND hwnd;\n    POINT p;\n    if (GetCursorPos(&amp;p))\n    {\n        //cursor position now in p.x and p.y\n\n    }\n    if (ScreenToClient(hwnd, &amp;p))\n    {\n        //p.x and p.y are now relative to hwnd's client area\n        cout &lt;&lt; p.x &lt;&lt; p.y;\n    }\n</code></pre>\n\n<p>This compiles but crashes when I click in the window:</p>\n\n<pre><code>    HWND hwnd;\n    POINT p;\n    if (GetCursorPos(&amp;p) &amp;&amp; ScreenToClient(hwnd, &amp;p))\n    {\n        //cursor position now in p.x and p.y\n        cout &lt;&lt; p.x &lt;&lt; p.y;\n    }\n</code></pre>\n\n<p>This also compiles but crashes when I click in the window:</p>\n\n<pre><code>    HWND hwnd;\n    POINT p;\n    GetCursorPos(&amp;p);\n    if (ScreenToClient(hwnd, &amp;p))\n    {\n        //cursor position now in p.x and p.y\n        cout &lt;&lt; p.x &lt;&lt; p.y;\n    }\n</code></pre>\n\n<p>Why? Are these functions unusual in any way? </p>\n\n<p>Does it have something to do with the fact that pointers are involved? </p>\n\n<p>How does placing these functions in <code>if</code> statements change how they run?</p>\n"}, {"tags": ["c++", "operator-overloading", "implicit-conversion", "overload-resolution"], "comments": [{"owner": {"reputation": 2236, "user_id": 2503039, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Rtjzk.jpg?s=128&g=1", "display_name": "Davidbrcz", "link": "https://stackoverflow.com/users/2503039/davidbrcz"}, "edited": false, "score": 0, "creation_date": 1468424625, "post_id": 38356069, "comment_id": 64124671, "body": "just use std::string"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 2236, "user_id": 2503039, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Rtjzk.jpg?s=128&g=1", "display_name": "Davidbrcz", "link": "https://stackoverflow.com/users/2503039/davidbrcz"}, "edited": false, "score": 0, "creation_date": 1468424683, "post_id": 38356069, "comment_id": 64124711, "body": "@Davidbrcz That&#39;s not what this question is about at all."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1468424993, "post_id": 38356069, "comment_id": 64124943, "body": "I thought <code>friend</code> makes the function <b>non</b>-member (i.e., global)."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1468425366, "post_id": 38356069, "comment_id": 64125233, "body": "I edited the title, changing &quot;implicit cast&quot; to &quot;implicit conversion&quot;. There is no such thing as an implicit cast. A cast is an explicit conversion operator."}, {"owner": {"reputation": 2236, "user_id": 2503039, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Rtjzk.jpg?s=128&g=1", "display_name": "Davidbrcz", "link": "https://stackoverflow.com/users/2503039/davidbrcz"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1468428341, "post_id": 38356069, "comment_id": 64127063, "body": "@Gill Bates, <i>It is</i>. Using a <code>std::string</code> would nullify his original request, because even if <code>operator==</code> for <code>std::strings</code> were to be picked from <code>A-&gt;std::string</code> conversion, It would work flawlessly. Here, symmetry is broken, which is nasty source of bug especially because 2 string literals may or may not have the same address. It is completely left to the implementation... Classical XY problem !"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 2236, "user_id": 2503039, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Rtjzk.jpg?s=128&g=1", "display_name": "Davidbrcz", "link": "https://stackoverflow.com/users/2503039/davidbrcz"}, "edited": false, "score": 0, "creation_date": 1468428553, "post_id": 38356069, "comment_id": 64127181, "body": "@Davidbrcz You&#39;re changing the question, he asked &quot;What in the standard states that (and why isn&#39;t the A implicitly converted to const char <i>?)&quot; Not &quot;Should I use std::string rather than const char</i>?&quot;. Your explanation is the same as someone asking why an array does x instead of y and you answer &quot;just use a std::vector&quot;. It doesn&#39;t answer the question at all."}, {"owner": {"reputation": 2236, "user_id": 2503039, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Rtjzk.jpg?s=128&g=1", "display_name": "Davidbrcz", "link": "https://stackoverflow.com/users/2503039/davidbrcz"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1468428744, "post_id": 38356069, "comment_id": 64127275, "body": "@Gill Bates He is asking the wrong question because he is writing some bad code. Giving him the good solution to his <i>actual</i> problem is always the good thing to do."}, {"owner": {"reputation": 354, "user_id": 2390010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/808cb687632993ea798a2d8c2a801493?s=128&d=identicon&r=PG", "display_name": "Olivetree", "link": "https://stackoverflow.com/users/2390010/olivetree"}, "reply_to_user": {"reputation": 2236, "user_id": 2503039, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Rtjzk.jpg?s=128&g=1", "display_name": "Davidbrcz", "link": "https://stackoverflow.com/users/2503039/davidbrcz"}, "edited": false, "score": 0, "creation_date": 1468431405, "post_id": 38356069, "comment_id": 64128866, "body": "@Davidbrcz I understand what you&#39;re trying to say/do, but this isn&#39;t the case. I&#39;m bound by the <a href=\"https://root.cern.ch/doc/master/classTString.html\" rel=\"nofollow noreferrer\">library</a>. Consider it as an academic question then. And please don&#39;t say to convert to and from <code>std::string</code>, as that would also be disastrous, in my case."}, {"owner": {"reputation": 354, "user_id": 2390010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/808cb687632993ea798a2d8c2a801493?s=128&d=identicon&r=PG", "display_name": "Olivetree", "link": "https://stackoverflow.com/users/2390010/olivetree"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1468431540, "post_id": 38356069, "comment_id": 64128954, "body": "@barakmanos It does (at least I&#39;m counting on that). But it doesn&#39;t mean you can&#39;t write it in-class. My g++ compiled similar code just fine. Note the 2 arguments, and also that you can&#39;t add <code>static</code> to declaration."}], "answers": [{"comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1468424639, "post_id": 38356176, "comment_id": 64124678, "body": "I think OP was after the relevant part in the standard that decided what and why it happens here."}, {"owner": {"reputation": 354, "user_id": 2390010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/808cb687632993ea798a2d8c2a801493?s=128&d=identicon&r=PG", "display_name": "Olivetree", "link": "https://stackoverflow.com/users/2390010/olivetree"}, "edited": false, "score": 0, "creation_date": 1468424900, "post_id": 38356176, "comment_id": 64124872, "body": "Just to be clear: in second case, if I had <code>A::A(const char *s) {}</code>, then effectively <code>A(&quot;test&quot;) == A{&quot;hello&quot;}</code> would be called? or is it required to be implicit conversion?"}, {"owner": {"reputation": 354, "user_id": 2390010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/808cb687632993ea798a2d8c2a801493?s=128&d=identicon&r=PG", "display_name": "Olivetree", "link": "https://stackoverflow.com/users/2390010/olivetree"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1468425018, "post_id": 38356176, "comment_id": 64124955, "body": "@GillBates Yes I was, so I could know all the other cases I didn&#39;t think of just now. I think they would in the same set of rules. Maybe I should clarify question?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1468425081, "post_id": 38356176, "comment_id": 64125000, "body": "@GillBates Sure, though there are a lot of relevant parts in the standard."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 354, "user_id": 2390010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/808cb687632993ea798a2d8c2a801493?s=128&d=identicon&r=PG", "display_name": "Olivetree", "link": "https://stackoverflow.com/users/2390010/olivetree"}, "edited": false, "score": 0, "creation_date": 1468425123, "post_id": 38356176, "comment_id": 64125026, "body": "@Olivetree I don&#39;t know what you&#39;re asking with regards to the constructor."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1468425149, "post_id": 38356176, "comment_id": 64125044, "body": "@Barry As for myself, is there some list in the standard that lists the best -&gt; worst &quot;kind of conversions&quot;?"}, {"owner": {"reputation": 354, "user_id": 2390010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/808cb687632993ea798a2d8c2a801493?s=128&d=identicon&r=PG", "display_name": "Olivetree", "link": "https://stackoverflow.com/users/2390010/olivetree"}, "edited": false, "score": 0, "creation_date": 1468425320, "post_id": 38356176, "comment_id": 64125190, "body": "@Barry you stated &quot;there is no implicit conversion from <code>const char*</code> to <code>A const&amp;</code>&quot;. I was asking if having the <code>A::A(const char *s) {}</code> constructor would qualify as such implicit conversion."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 2, "creation_date": 1468425364, "post_id": 38356176, "comment_id": 64125229, "body": "@GillBates <a href=\"http://eel.is/c++draft/over.ics.rank\" rel=\"nofollow noreferrer\">&#91;over.ics.rank&#93;</a>, though you&#39;ll also want to look at <a href=\"http://eel.is/c++draft/over.best.ics\" rel=\"nofollow noreferrer\">&#91;over.best.ics&#93;</a>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 354, "user_id": 2390010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/808cb687632993ea798a2d8c2a801493?s=128&d=identicon&r=PG", "display_name": "Olivetree", "link": "https://stackoverflow.com/users/2390010/olivetree"}, "edited": false, "score": 0, "creation_date": 1468425516, "post_id": 38356176, "comment_id": 64125326, "body": "@Olivetree Yes, it would. That constructor would make <code>operator==(A const&amp;, const char* )</code> <i>viable</i> for <code>&quot;hi&quot; == A{&quot;hello&quot;}</code>... but the builtin would still be a better match."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 5, "last_activity_date": 1468425194, "last_edit_date": 1468425194, "creation_date": 1468424471, "answer_id": 38356176, "question_id": 38356069, "link": "https://stackoverflow.com/questions/38356069/c-operator-and-implicit-conversion-resolution/38356176#38356176", "title": "C++ operator == and implicit conversion resolution", "body": "<p>When you do</p>\n\n<pre><code>A{\"hello\"} == \"test2\"\n</code></pre>\n\n<p>we perform overload resolution on <code>operator==</code>. First, we find the viable candidates ([over.match.viable]), via name lookup:</p>\n\n<pre><code>operator==(A const&amp;, const char*);    // yours\noperator==(const char*, const char*); // built-in\n</code></pre>\n\n<p>Next, we determine which candidate has the best implicit conversion sequence. This is the first tiebreaker in [over.match.best]:</p>\n\n<blockquote>\n  <p>Given these definitions, a viable function <code>F1</code> is defined to be a <em>better</em> function than another viable function <code>F2</code> if for all arguments <em>i</em>, ICS<sub>i</sub>(F1) is not a worse conversion sequence than ICS<sub>i</sub>(F2), and then<br>\n  (1.3) \u2014 for some argument <em>j</em>, ICS<sub>j</sub>(F1) is a better conversion sequence than ICS<sub>j</sub>(F2), or, if not that, [...]</p>\n</blockquote>\n\n<p>Both operators are Exact Match on the 2nd argument. On the first argument, your <code>operator==</code> is an Exact Match whereas the built-in requires a user-defined conversion. Exact Match is the best kind of conversion, and user-defined is the worst - hence, yours has the better conversion sequence and becomes the best viable function. </p>\n\n<p>In broader terms, the <code>A</code> isn't implicitly converted to a <code>const char*</code> because there's a better option where it doesn't have to be. </p>\n\n<hr />\n\n<p>When you do:</p>\n\n<pre><code>\"test2\" == A{\"hello\"};\n</code></pre>\n\n<p>Your candidate isn't viable - there is no implicit conversion from <code>const char*</code> to <code>A const&amp;</code> (first argument), so the only viable candidate is the built-in comparison for <code>const char*</code>, which requires the user-defined conversion from <code>A</code> to <code>const char*</code>.</p>\n\n<p>If you'd like your <code>A::operator==</code> to be invoked, you'd have to add a new overload for <code>operator==(const char*, A const&amp;)</code>. </p>\n"}], "owner": {"reputation": 354, "user_id": 2390010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/808cb687632993ea798a2d8c2a801493?s=128&d=identicon&r=PG", "display_name": "Olivetree", "link": "https://stackoverflow.com/users/2390010/olivetree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "accepted_answer_id": 38356176, "answer_count": 1, "score": 4, "last_activity_date": 1468425668, "creation_date": 1468424148, "last_edit_date": 1468425668, "question_id": 38356069, "link": "https://stackoverflow.com/questions/38356069/c-operator-and-implicit-conversion-resolution", "title": "C++ operator == and implicit conversion resolution", "body": "<p>If I have a <code>struct A</code> defined as:</p>\n\n<pre><code>struct A {\n    const char *data;\n    operator const char * () const { return data; }\n    friend bool operator== (const A &amp;s1, const char *s2)\n    { return /* typical string comparison result */; }\n};\n</code></pre>\n\n<p>And I write <code>A{\"hello\"} == \"test2\"</code>, is <code>A::operator==</code> called? What in the standard states that (and why isn't the <code>A</code> implicitly converted to <code>const char *</code>?)</p>\n\n<p>What about <code>\"test2\" == A{\"hello\"}</code>? Is the <code>A</code> converted in this case?</p>\n\n<p><strong>EDIT</strong>: What about if <code>struct A</code> also has member:</p>\n\n<pre><code>friend bool operator== (const char *s1, const A &amp;s2)\n</code></pre>\n"}, {"tags": ["c++", "github", "boost", "open-source", "ripple"], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 6474859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68534f8f466c641ac5414904c3614bfa?s=128&d=identicon&r=PG&f=1", "display_name": "superNovice92", "link": "https://stackoverflow.com/users/6474859/supernovice92"}, "edited": false, "score": 0, "creation_date": 1468425659, "post_id": 38356280, "comment_id": 64125437, "body": "Thank you that is what I was looking for."}, {"owner": {"reputation": 211, "user_id": 6474859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68534f8f466c641ac5414904c3614bfa?s=128&d=identicon&r=PG&f=1", "display_name": "superNovice92", "link": "https://stackoverflow.com/users/6474859/supernovice92"}, "edited": false, "score": 0, "creation_date": 1468426050, "post_id": 38356280, "comment_id": 64125688, "body": "I am also seeking to  learn how to search more that to learn how to use these libraries . How did you know it were on &quot;stellar&quot; deposit and specially the PlatformConfig.h file (there are a lot of include of headers at the beginning of each file I look at)."}, {"owner": {"reputation": 962, "user_id": 6492540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yQDfs.jpg?s=128&g=1", "display_name": "buld0zzr", "link": "https://stackoverflow.com/users/6492540/buld0zzr"}, "reply_to_user": {"reputation": 211, "user_id": 6474859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68534f8f466c641ac5414904c3614bfa?s=128&d=identicon&r=PG&f=1", "display_name": "superNovice92", "link": "https://stackoverflow.com/users/6474859/supernovice92"}, "edited": false, "score": 0, "creation_date": 1468428135, "post_id": 38356280, "comment_id": 64126934, "body": "I searched <code>stellar</code> repo for &quot;BEAST_LINUX&quot;, then did Ctrl+F and searched for &quot;#define&quot;, then clicked through results until I saw the definition. I don&#39;t think you will find any good docs on 2013 version of Beast, but you might have luck in contacting the author and asking for it."}, {"owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "edited": false, "score": 2, "creation_date": 1468430680, "post_id": 38356280, "comment_id": 64128448, "body": "So, you linked to Stellar&#39;s copy of Beat which is out of date. The newest version of Beast is here: <a href=\"https://github.com/vinniefalco/Beast/\" rel=\"nofollow noreferrer\">github.com/vinniefalco/Beast</a> Note, I am the author."}, {"owner": {"reputation": 962, "user_id": 6492540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yQDfs.jpg?s=128&g=1", "display_name": "buld0zzr", "link": "https://stackoverflow.com/users/6492540/buld0zzr"}, "reply_to_user": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "edited": false, "score": 0, "creation_date": 1468430921, "post_id": 38356280, "comment_id": 64128594, "body": "@VinnieFalco i did provide a link to your current repository :) Should have made it more obvious, though"}, {"owner": {"reputation": 962, "user_id": 6492540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yQDfs.jpg?s=128&g=1", "display_name": "buld0zzr", "link": "https://stackoverflow.com/users/6492540/buld0zzr"}, "edited": false, "score": 0, "creation_date": 1468442542, "post_id": 38356280, "comment_id": 64135059, "body": "Can&#39;t understand why the downvotes, since OP said that my answer is what he was looking for. At least provide the reason of the downvote, since I can&#39;t improve without reasonable feedback"}], "tags": [], "owner": {"reputation": 962, "user_id": 6492540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yQDfs.jpg?s=128&g=1", "display_name": "buld0zzr", "link": "https://stackoverflow.com/users/6492540/buld0zzr"}, "is_accepted": false, "score": 0, "last_activity_date": 1468431374, "last_edit_date": 1495535328, "creation_date": 1468424737, "answer_id": 38356280, "question_id": 38356008, "link": "https://stackoverflow.com/questions/38356008/analysis-of-rippled-code-on-github-need-help-lack-of-documentations-special/38356280#38356280", "title": "Analysis of rippled Code on Github ? Need help, lack of documentations ( specially define and macros)", "body": "<p>This seems to be a macro</p>\n\n<pre><code>#if (defined (_WIN32) || defined (_WIN64))\n  #define       BEAST_WIN32 1\n  #define       BEAST_WINDOWS 1\n#elif defined (BEAST_ANDROID)\n  #undef        BEAST_ANDROID\n  #define       BEAST_ANDROID 1\n#elif defined (LINUX) || defined (__linux__)\n#define BEAST_LINUX 1\n</code></pre>\n\n<p>defined in this source <a href=\"https://github.com/stellar/stellard/tree/master/src/beast\" rel=\"nofollow noreferrer\">Beast: An amazing cross platform library</a> in this file <a href=\"https://github.com/stellar/stellard/blob/67eabb2217bdfa9a6ea317f62338fb6bca458c90/src/beast/beast/config/PlatformConfig.h\" rel=\"nofollow noreferrer\">PlatformConfig.h</a>. This is an old source however, the new library doesn't contain this define anymore. This new library is located here <a href=\"https://github.com/vinniefalco/Beast\" rel=\"nofollow noreferrer\">Beast</a>, also submitted to Boost.</p>\n\n<p>You can search specific repository for code by using Github search, however, it only works on latest file versions. To do a search for all file versions you'll need to do it from command line, as explained here <a href=\"https://stackoverflow.com/questions/4705517/github-searching-through-older-versions-of-files\">GitHub: searching through older versions of files</a>. There's no fast way to search for variable or macro definition, except if your IDE supports go to definition functionality.</p>\n"}, {"tags": [], "owner": {"reputation": 10212, "user_id": 970543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wq9T6.jpg?s=128&g=1", "display_name": "Nik Bougalis", "link": "https://stackoverflow.com/users/970543/nik-bougalis"}, "is_accepted": false, "score": 3, "last_activity_date": 1468947071, "last_edit_date": 1468947071, "creation_date": 1468431006, "answer_id": 38358217, "question_id": 38356008, "link": "https://stackoverflow.com/questions/38356008/analysis-of-rippled-code-on-github-need-help-lack-of-documentations-special/38358217#38358217", "title": "Analysis of rippled Code on Github ? Need help, lack of documentations ( specially define and macros)", "body": "<p>I'm one of the developers of <code>rippled</code>. As the other answer alludes, this is a macro that is set to a non-zero value when the code is being compiled on a Linux platform; if it is, then it causes the preprocessor to include the specific header.</p>\n\n<p>This define was, originally, in a library named Beast. Large parts of that library were moved out of Beast and into the Ripple source, to help facilitate inclusion of Beast's awesome websocket and http routines into Boost.</p>\n\n<p>If you are working under Windows, there is a Visual Studio project which, when loaded, makes discovering symbols and code call graphs pretty easy using the tools built-in to Visual Studio.</p>\n\n<p>I also have a Doxygen build, which produces nice documentation of classes and comments, along with a cross-reference. I'll see about making it available publicly over the web.</p>\n"}, {"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 4, "last_activity_date": 1468432486, "creation_date": 1468432486, "answer_id": 38358645, "question_id": 38356008, "link": "https://stackoverflow.com/questions/38356008/analysis-of-rippled-code-on-github-need-help-lack-of-documentations-special/38358645#38358645", "title": "Analysis of rippled Code on Github ? Need help, lack of documentations ( specially define and macros)", "body": "<pre><code>#if defined(BEAST_LINUX) || defined(BEAST_MAC) || defined(BEAST_BSD)\n#include &lt;sys/resource.h&gt;\n#endif\n</code></pre>\n\n<p>Let me walk you through how I would reason about this code:</p>\n\n<p>First, I see that it's going to sometimes include <code>sys/resource.h</code> and sometimes not include it. The <code>&lt;&gt;</code> tells me that it's a system header. So this is code to decide whether or not to include a particular system header.</p>\n\n<p>Second, I see that the test is for macros that differ in that one says <code>LINUX</code>, one <code>MAC</code>, and one <code>BSD</code>. I know these are platforms. And the test is an or.</p>\n\n<p>So, now I can conclude that if a define associated with one of three platforms is set, then we include a particular system header.</p>\n\n<p>Punching <code>sys/resource.h</code> into my favorite search engine, I find that it's part of the <a href=\"http://pubs.opengroup.org/onlinepubs/7908799/xsh/sysresource.h.html\" rel=\"nofollow\">Single UNIX Specification</a>. And I notice that all three platforms mentioned in the macro have a UNIX heritage.</p>\n\n<p>So, in conclusion, the code appears to include a SUS header on those platforms that are expected to have that particular header. In particular, not on Windows which isn't going to have it.</p>\n\n<p>By the way, I'd suggest cloning the git repository onto your own machine so you can use local search tools on it. If you're going to be analyzing a lot of code, it's worth setting up an environment that can hold code and let you compile and analyze it and then learn how to use its search and navigation tools to get around the code quickly.</p>\n"}], "owner": {"reputation": 211, "user_id": 6474859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68534f8f466c641ac5414904c3614bfa?s=128&d=identicon&r=PG&f=1", "display_name": "superNovice92", "link": "https://stackoverflow.com/users/6474859/supernovice92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1468947071, "creation_date": 1468423962, "last_edit_date": 1468858254, "question_id": 38356008, "link": "https://stackoverflow.com/questions/38356008/analysis-of-rippled-code-on-github-need-help-lack-of-documentations-special", "title": "Analysis of rippled Code on Github ? Need help, lack of documentations ( specially define and macros)", "body": "<p>I am working on code produced by a company called Ripple that provides cross-currency payment solutions.</p>\n\n<p>I am currently analyzing the code of their daemon server <a href=\"https://github.com/ripple/rippled\" rel=\"nofollow\">available on Github</a>.</p>\n\n<p>I might not be the first to arrive to this conclusion, but it is extremely difficult to not get lost working on someone else's large project. Although a documentation is provided, the code still does not seems understandable to me if you aren't one of the creators.</p>\n\n<p>One main difficulty is that the code refers to external libraries and sometimes it feels impossible to know where to look to learn what a function does or which value a variable contains.</p>\n\n<hr>\n\n<p>Simple example from my question of the moment: </p>\n\n<hr>\n\n<p>I'm starting with the main.cpp file (because I assume that is what is launched when the program starts) and I have these lines: </p>\n\n<pre><code>#if defined(BEAST_LINUX) || defined(BEAST_MAC) || defined(BEAST_BSD)\n#include &lt;sys/resource.h&gt;\n#endif\n</code></pre>\n\n<p>I searched for a week now but I can't find what <code>BEAST_LINUX</code> is for. </p>\n\n<p>(It is a redundant problem where macros and preprocessos instructions are called very frequently which refers to <code>#define</code> that refers to <code>#define</code> and so on, and documentation can rarely be found on the net).</p>\n\n<p>Additionally, is there a quick way to discover where a variable is declared in a GitHub repository, especially when it is declared in another file ?</p>\n"}, {"tags": ["c++", "matlab", "opencv", "matrix"], "answers": [{"tags": [], "owner": {"reputation": 5530, "user_id": 2955997, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1253a92230fbcbda896e74fb138d619e?s=128&d=identicon&r=PG&f=1", "display_name": "ibezito", "link": "https://stackoverflow.com/users/2955997/ibezito"}, "is_accepted": true, "score": 1, "last_activity_date": 1468425896, "last_edit_date": 1468425896, "creation_date": 1468425572, "answer_id": 38356556, "question_id": 38355806, "link": "https://stackoverflow.com/questions/38355806/matrix-manipulation-on-matlab-to-c-or-opencv/38356556#38356556", "title": "Matrix manipulation on MATLAB to C++ or OpenCV", "body": "<p><strong>Solution 1</strong></p>\n\n<p>You can use colRange function:</p>\n\n<pre><code>mat.colRange(0, 2).copyTo(mat.colRange(w, 2 + w)); \n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>//initilizes data\nfloat data[2][4] = { { 1, 2, 3, 4}, { 5, 6, 7, 8 } };\nMat mat(2, 4, CV_32FC1, &amp;data);\nint w = 2; //w is equivelant to Width in your script, in this case I chose it to be 2\n\nstd::cout &lt;&lt; \"mat before: \\n\" &lt;&lt; mat &lt;&lt; std::endl;\n\nmat.colRange(0, 2).copyTo(mat.colRange(w, 2 + w)); \n\nstd::cout &lt;&lt; \"mat after: \\n\" &lt;&lt; mat &lt;&lt; std::endl;\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>mat before:\n[1, 2, 3, 4;\n 5, 6, 7, 8]\nmat after:\n[1, 2, 1, 2;\n 5, 6, 5, 6]\n</code></pre>\n\n<p><strong>Solution 2</strong></p>\n\n<p>Alternatively, use cv::Rect object, as follows:</p>\n\n<pre><code>cv::Mat roi = mat(cv::Rect(w, 0, 2, mat.rows));\nmat(cv::Rect(0, 0, 2, mat.rows)).copyTo(roi);\n</code></pre>\n\n<p>There are several way to initialize a Rect, in my case I chose the following c-tor:</p>\n\n<pre><code>cv::Rect(int x, int y, int width, int height);\n</code></pre>\n\n<p>The result are the same as an in Solution 1.</p>\n"}, {"tags": [], "owner": {"reputation": 709, "user_id": 1763680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a875236b743b70b41a016d9b14528f83?s=128&d=identicon&r=PG", "display_name": "niosus", "link": "https://stackoverflow.com/users/1763680/niosus"}, "is_accepted": false, "score": -2, "last_activity_date": 1468425608, "creation_date": 1468425608, "answer_id": 38356570, "question_id": 38355806, "link": "https://stackoverflow.com/questions/38355806/matrix-manipulation-on-matlab-to-c-or-opencv/38356570#38356570", "title": "Matrix manipulation on MATLAB to C++ or OpenCV", "body": "<p>Maybe you could also use Eigen that can serve the need. It has <a href=\"https://eigen.tuxfamily.org/dox/group__TutorialBlockOperations.html\" rel=\"nofollow\">Block operations</a></p>\n\n<p>Adapting the example provided under link you would need smth like:</p>\n\n<pre><code>Eigen::MatrixXf m(4, 4);\nm &lt;&lt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16;\ncout &lt;&lt;\"original matrix \\n\" &lt;&lt; m &lt;&lt; endl;\nm.block&lt;2, 2&gt;(1, 1) = m.block&lt;2, 2&gt;(2, 2);\ncout &lt;&lt;\"modified matrix \\n\" &lt;&lt; m &lt;&lt; endl;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>original matrix \n1  2  3  4\n5  6  7  8\n9 10 11 12\n13 14 15 16\n\nmodified matrix \n1  2  3  4\n5 11 12  8\n9 15 16 12\n13 14 15 16\n</code></pre>\n"}], "owner": {"reputation": 767, "user_id": 1212320, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9195f72bf77345e1c920eefaa014d73?s=128&d=identicon&r=PG&f=1", "display_name": "MasterWizard", "link": "https://stackoverflow.com/users/1212320/masterwizard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 38356556, "answer_count": 2, "score": 1, "last_activity_date": 1485685381, "creation_date": 1468423438, "last_edit_date": 1485685381, "question_id": 38355806, "link": "https://stackoverflow.com/questions/38355806/matrix-manipulation-on-matlab-to-c-or-opencv", "title": "Matrix manipulation on MATLAB to C++ or OpenCV", "body": "<p>I'm trying to do this operation in C++, but I cant wrap my head around it.\nI tried looking in <a href=\"http://mathworks.com/help/matlab/ref/image.html\" rel=\"nofollow noreferrer\">http://mathworks.com/help/matlab/ref/image.html</a> but I still don't get it.</p>\n\n<p><strong>im</strong> is a matrix in Matlab. Width is 640</p>\n\n<pre><code>im(:,Width+(1:2),:) = im(:,1:2,:);\n</code></pre>\n\n<p>Is there anything similar to this operation in <code>OpenCV</code> Matrix or <code>C++</code></p>\n"}, {"tags": ["c++", "boost", "std"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1468423414, "post_id": 38355640, "comment_id": 64123858, "body": "Cannot reproduce your behavior, looks like it is a bug for particular boost or stdc++ version, provide that info"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468423716, "post_id": 38355640, "comment_id": 64124067, "body": "you should include <code>&lt;iostream&gt;</code> and <code>&lt;string&gt;</code> not <code>&lt;stdio.h&gt;</code> and <code>main</code> must return <code>int</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1468423799, "post_id": 38355640, "comment_id": 64124120, "body": "I&#39;m sorry, your usage seems to be correct, my bad."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1468424013, "post_id": 38355640, "comment_id": 64124261, "body": "I too cannot reproduce this behaviour."}, {"owner": {"reputation": 33331, "user_id": 1898563, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d99204bcce923f40f5c72b7f80121644?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1898563/michael"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1468424215, "post_id": 38355640, "comment_id": 64124411, "body": "@Slava I&#39;ve added boost version to the question: 1.46.1"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1468424412, "post_id": 38355640, "comment_id": 64124532, "body": "If you can upgrade to 1.47.0 it appears to work: <a href=\"http://melpon.org/wandbox/permlink/ceOHPaYXbJ4iKBPF\" rel=\"nofollow noreferrer\">melpon.org/wandbox/permlink/ceOHPaYXbJ4iKBPF</a>"}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1468424345, "creation_date": 1468424345, "answer_id": 38356128, "question_id": 38355640, "link": "https://stackoverflow.com/questions/38355640/why-does-std-boostformat-cause-this-c-str-behaviour/38356128#38356128", "title": "Why does std / boost::format cause this c_str() behaviour?", "body": "<p>With proper includes your program works fine: <a href=\"http://ideone.com/xVbxdO\" rel=\"nofollow\">ideone</a></p>\n\n<pre><code>#include &lt;boost/format.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    const std::string my_str = \"echo '/%1%/ some other stuff'\";\n    boost::format fmtr(my_str);\n    fmtr % \"sleep 3\";   // should read: echo '/sleep 3/ some other stuff'\n\n    std::cout &lt;&lt; \"1: \" &lt;&lt; fmtr.str() &lt;&lt; \"\\n\";          // 1. echo '/sleep 3/ some other stuff'  (OK)\n    std::cout &lt;&lt; \"2: \" &lt;&lt; fmtr.str().c_str() &lt;&lt; \"\\n\";  // 2. echo '/sleep 3                     (BAD)\n\n    // Try the c_str of a string not created through boost::format\n    const std::string finished = \"echo '/sleep 3/ some other stuff'\";\n    std::cout &lt;&lt; \"3: \" &lt;&lt; finished.c_str() &lt;&lt; \"\\n\";    // 3. echo '/sleep 3/ some other stuff'  (OK)\n\n    // Try copying the string from format to see if that makes any difference (it doesn't)\n    std::string copy = fmtr.str();\n    std::cout &lt;&lt; \"4: \" &lt;&lt; copy.c_str() &lt;&lt; \"\\n\";        // 4. echo '/sleep 3                     (BAD)\n}\n</code></pre>\n\n<p>You should fix includes and return type of main and try again. If wrong behavior persist most probably you have broken version of c++ and/or boost library.</p>\n"}], "owner": {"reputation": 33331, "user_id": 1898563, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d99204bcce923f40f5c72b7f80121644?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1898563/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 464, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1468424345, "creation_date": 1468422924, "last_edit_date": 1468424164, "question_id": 38355640, "link": "https://stackoverflow.com/questions/38355640/why-does-std-boostformat-cause-this-c-str-behaviour", "title": "Why does std / boost::format cause this c_str() behaviour?", "body": "<p>I'm using <code>boost::format</code> (not <code>std::</code> as I'm using c++98) to format a string that I'm passing to a <code>system()</code> call.</p>\n\n<p>When getting the <code>c_str()</code> of the string created by <code>format</code>, it seems to terminate halfway along the string. The same sting created with the literal value does not have the same problem. What's going on here?</p>\n\n<p>Using Boost <strong>1.46.1</strong> according to <code>BOOST_VERSION</code>.</p>\n\n<pre><code>#include &lt;boost/format.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main(int argc, char** argv)\n{\n    const std::string my_str = \"echo '/%1%/ some other stuff'\";\n    boost::format fmtr(my_str);\n    fmtr % \"sleep 3\";   // should read: echo '/sleep 3/ some other stuff'\n\n    std::cout &lt;&lt; \"1: \" &lt;&lt; fmtr.str() &lt;&lt; \"\\n\";          // 1. echo '/sleep 3/ some other stuff'  (OK)\n    std::cout &lt;&lt; \"2: \" &lt;&lt; fmtr.str().c_str() &lt;&lt; \"\\n\";  // 2. echo '/sleep 3                     (BAD)\n\n    // Try the c_str of a string not created through boost::format\n    const std::string finished = \"echo '/sleep 3/ some other stuff'\";\n    std::cout &lt;&lt; \"3: \" &lt;&lt; finished.c_str() &lt;&lt; \"\\n\";    // 3. echo '/sleep 3/ some other stuff'  (OK)\n\n    // Try copying the string from format to see if that makes any difference (it doesn't)\n    std::string copy = fmtr.str();\n    std::cout &lt;&lt; \"4: \" &lt;&lt; copy.c_str() &lt;&lt; \"\\n\";        // 4. echo '/sleep 3                     (BAD)\n    return 0;\n}\n</code></pre>\n\n<p>Passing the <code>c_str()</code> to my <code>system()</code> call is resulting in the error:</p>\n\n<pre><code>sh -c: line 0: unexpected EOF while looking for matching `''\n</code></pre>\n\n<p>Presumably because it is finishing halfway along the string as well.</p>\n"}, {"tags": ["c++", "delphi"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1468422911, "post_id": 38355560, "comment_id": 64123476, "body": "You cannot add pointer to pointer, that does not make any sense, it is not clear what that code does in delphi"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1468423069, "post_id": 38355560, "comment_id": 64123599, "body": "A pointer contains the location of an address in memory, much like an envelope contains a postal address.  Adding postal addresses don&#39;t make sense just as adding pointers doesn&#39;t make sense.  You can add an <i>offset</i> to a pointer."}, {"owner": {"reputation": 70991, "user_id": 650492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/FY7Qc.png?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/650492/johan"}, "edited": false, "score": 4, "creation_date": 1468423107, "post_id": 38355560, "comment_id": 64123627, "body": "Please do not put pictures of code in your question. Just paste the code as text."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1468423269, "post_id": 38355560, "comment_id": 64123748, "body": "<code>ADDR_ONat</code> and <code>ZeroOFS</code> look to be offsets. Just add them to the pointer and don&#39;t use *reinterpret_cast&lt;PDWORD *&gt;() for these. I would have calculated the address and put it in a PDWORD variable before the if ()."}, {"owner": {"reputation": 35, "user_id": 5387977, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7ff7b1df45fa37d926ebc486ba4aa55?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel Z.", "link": "https://stackoverflow.com/users/5387977/pavel-z"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1468424185, "post_id": 38355560, "comment_id": 64124389, "body": "@drescherjm you are right, I posted the right code, Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1468432077, "post_id": 38355632, "comment_id": 64129264, "body": "Dear downvoter, care to explain what&#39;s wrong with the answer? I&#39;d be happy to improve it."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": -1, "last_activity_date": 1468422904, "creation_date": 1468422904, "answer_id": 38355632, "question_id": 38355560, "link": "https://stackoverflow.com/questions/38355560/cannot-add-2-pointers/38355632#38355632", "title": "Cannot add 2 pointers", "body": "<p><code>PDWORD</code> is an alias name for a <strong>P</strong>ointer to <strong>DWORD</strong>. You're casting <code>ADDR_cabalbase</code> (whatever its type is) to a <em>pointer to a <code>PDWORD</code>,</em> that is, to a pointer to a pointer to a <code>DWORD</code>. You then dereference that, obtaining a <code>PDWORD</code>, that is, a pointer to a <code>DWORD</code>. Then you try to add these together.</p>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1468425810, "post_id": 38356070, "comment_id": 64125533, "body": "This code is NOT the same logic as in the Delphi code. The Delphi code dereferences the <code>WORD</code> (not <code>DWORD</code>!) value located at the <code>cabalbase</code> address, THEN adds zero to that value, then casts the result to <code>PDWORD</code> and dereferences it to obtain a <code>DWORD</code> value, adds <code>ONat</code> to that value, casts the result and dereferences a <code>DWORD</code> value from it. Your code above is doing something difference. You are adding zero to <code>cabalbase</code> itself, not the <code>WORD</code> it points to. And you are not casting+dereferencing the <code>DWORD</code> value located at the address obtained after adding <code>ONat</code>."}], "tags": [], "owner": {"reputation": 35, "user_id": 5387977, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7ff7b1df45fa37d926ebc486ba4aa55?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel Z.", "link": "https://stackoverflow.com/users/5387977/pavel-z"}, "is_accepted": false, "score": -1, "last_activity_date": 1468424149, "creation_date": 1468424149, "answer_id": 38356070, "question_id": 38355560, "link": "https://stackoverflow.com/questions/38355560/cannot-add-2-pointers/38356070#38356070", "title": "Cannot add 2 pointers", "body": "<p>Thanks to @drescherjm comment the solution is:</p>\n\n<pre><code>if (*reinterpret_cast&lt;DWORD *&gt;(ADDR_cabalbase+ZeroOFS\n        + ADDR_ONat)\n        == 0){\n\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 3, "last_activity_date": 1468426685, "creation_date": 1468426685, "answer_id": 38356918, "question_id": 38355560, "link": "https://stackoverflow.com/questions/38355560/cannot-add-2-pointers/38356918#38356918", "title": "Cannot add 2 pointers", "body": "<blockquote>\n  <p>I just want to re-write a Delphi function in C++</p>\n</blockquote>\n\n<p>The Delphi code is casting numeric values to <code>PWORD</code> (pointer to <code>WORD</code>) and <code>PDWORD</code> (pointer to <code>DWORD</code>), but you are casting everything to <code>PDWORD*</code> (pointer to pointer to <code>DWORD</code>) instead.  You need to drop the <code>*</code> since <code>PDWORD</code> is already a pointer.  And the first cast of <code>cabalbase</code> is to a <code>PWORD</code>, not a <code>PDWORD</code>.  Dereferencing a <code>PWORD</code> reads 2 bytes, whereas dereferencing a <code>PDWORD</code> reads 4 bytes instead.  That makes a BIG difference.  </p>\n\n<p>This is the <em>correct</em> translation of the Delphi code:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n\n#define ADDR_cabalbase 0x01083A90\n#define ADDR_ONat 0x35c \n#define ZeroOFS 0x0\n\nint main()\n{\n    if (*reinterpret_cast&lt;PDWORD&gt;(*reinterpret_cast&lt;PDWORD&gt;(*reinterpret_cast&lt;PWORD&gt;(ADDR_cabalbase) + ZeroOFS) + ADDR_ONat) == 3) {\n        // ...\n    }\n}\n</code></pre>\n\n<p>I would suggest using some local variables to make it easier to read (and debug):</p>\n\n<pre><code>int main()\n{\n    WORD w_cabalbase = *reinterpret_cast&lt;PWORD&gt;(ADDR_cabalbase);\n\n    DWORD dw_cabalbase_ofs = *reinterpret_cast&lt;PDWORD&gt;(w_cabalbase + ZeroOFS);\n\n    DWORD dw_onat = *reinterpret_cast&lt;PDWORD&gt;(dw_cabalbase_ofs + ADDR_ONat);\n\n    if (dw_onat == 3) {\n        // ...\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 5387977, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7ff7b1df45fa37d926ebc486ba4aa55?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel Z.", "link": "https://stackoverflow.com/users/5387977/pavel-z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1468426685, "creation_date": 1468422709, "last_edit_date": 1468423494, "question_id": 38355560, "link": "https://stackoverflow.com/questions/38355560/cannot-add-2-pointers", "title": "Cannot add 2 pointers", "body": "<p>My code is straightforward and seemed to be very easy like</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;windows.h&gt;\n#define ADDR_cabalbase 0x01083A90\n#define ADDR_ONat 0x35c \n#define ZeroOFS 0x0\nint main()\n{\n\n\n    if ((*reinterpret_cast&lt;PDWORD *&gt;(ADDR_cabalbase)+*reinterpret_cast&lt;PDWORD *&gt;(ZeroOFS))\n        + *reinterpret_cast&lt;PDWORD *&gt;(ADDR_ONat)\n        == 3){\n        ExitProcess(0);\n    }\n}\n</code></pre>\n\n<p>But it gives an error:</p>\n\n<pre><code>Error   1   error C2110: '+' : cannot add two pointers  \n</code></pre>\n\n<p>Can somebody tell me what I'm doing wrong. I just want to re-write a Delphi function in C++</p>\n\n<pre><code>procedure TWanda.Timer5Timer(Sender: TObject);\nbegin\n  try\n    if PDWORD(PDWORD(PWORD(cabalbase)^+$0)^+ONat)^ = 3 then\n    begin\n      timer9.Enabled:= true;\n    end;\n  except {ignore errors} end;\nend;\n</code></pre>\n"}, {"tags": ["c++", "c++11", "c++14", "variadic-templates", "c++17"], "comments": [{"owner": {"reputation": 7393, "user_id": 1690777, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/18ef5bab4c70735313d86c7240e4abed?s=128&d=identicon&r=PG", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1690777/sergey"}, "edited": false, "score": 0, "creation_date": 1468422977, "post_id": 38355525, "comment_id": 64123530, "body": "What for? Compiler always static_asserts all your code for compilability. I suppose, your guess about <code>system()</code> is a right way to go."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1468430619, "post_id": 38355525, "comment_id": 64128415, "body": "This kind of thing is normally done by the build system; almost all build systems have some <code>try_compile</code> which sets a variable depending on the success of compilation."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1468432152, "post_id": 38355525, "comment_id": 64129313, "body": "@zrb - semplified my answer: no need of <code>bar</code> struct, more flexibility in use of parameters. But I don&#39;t know to avoid the use of <code>FooF</code> and <code>FooG</code> structs (that is: I don&#39;t know how to check <code>f()</code> and <code>g()</code> directly)"}, {"owner": {"reputation": 2131, "user_id": 3726169, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ad0f33269912ab7a2fb9f30df6f2d392?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Chesterfield", "link": "https://stackoverflow.com/users/3726169/jon-chesterfield"}, "edited": false, "score": 0, "creation_date": 1468452728, "post_id": 38355525, "comment_id": 64138960, "body": "Would invoking an instance of clang that you&#39;ve linked into your program suffice?  The boilerplate would be bad, but it&#39;&#39;s probably viable for a form of unit test"}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 2, "last_activity_date": 1468432440, "last_edit_date": 1468432440, "creation_date": 1468429359, "answer_id": 38357727, "question_id": 38355525, "link": "https://stackoverflow.com/questions/38355525/how-to-static-assert-that-a-given-function-call-expression-would-compile-or-not/38357727#38357727", "title": "How to static_assert that a given function call expression would compile or not?", "body": "<p>I suppose it's possible in a simpler way, but...</p>\n\n<p>If you can insert your functions in a struct (<code>fooF</code> for <code>f()</code> and <code>fooG</code> for <code>g()</code>, in the following example) as <code>constexpr</code> (and <code>const</code>) members with the same name (<code>Func()</code>), if you can they return a type different from <code>void</code> (or the <code>constexpr</code> part isn't working (at least with my clang++)), then you can create a couple of <code>constexpr</code> <code>checkCompile()</code> functions; then you can use <code>checkCompile()</code> in a <code>static_assert</code></p>\n\n<p>The following example work with both g++ 4.9.2 and clang++ 3.5</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nstruct fooF\n {\n   template &lt; typename... Args &gt;\n      constexpr int func (Args &amp;&amp; ... args, bool) const\n       { return 0; }\n };\n\nstruct fooG\n {\n   template &lt; typename... Args &gt;\n      constexpr int func (Args &amp;&amp; ... args) const\n       { return 0; }\n };\n\ntemplate &lt;typename C, typename ... Args&gt;\n   static constexpr auto checkCompile (C const &amp; c, Args ... args)\n   -&gt; decltype( c.func(args...), int() )\n    { return 1; }\n\ntemplate &lt;typename ...&gt;\n   static constexpr auto checkCompile (...) -&gt; int\n    { return 0; }\n\nint main()\n {\n   std::cout &lt;&lt; checkCompile(fooF(), 1, 2.0, \"hello\", false) &lt;&lt; '\\n';\n   std::cout &lt;&lt; checkCompile(fooG(), 1, 2.0, \"hello\", false) &lt;&lt; '\\n';\n\n   static_assert(0 == checkCompile(fooF(), 1, 2.0, \"hello\", false), \"!\");\n   static_assert(1 == checkCompile(fooG(), 1, 2.0, \"hello\", false), \"!\");\n\n   return 0;\n }\n</code></pre>\n\n<p>p.s.: should work with C++11 too.</p>\n\n<p>p.s.2: sorry for my bad English.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 4, "last_activity_date": 1468450356, "last_edit_date": 1468450356, "creation_date": 1468437373, "answer_id": 38359951, "question_id": 38355525, "link": "https://stackoverflow.com/questions/38355525/how-to-static-assert-that-a-given-function-call-expression-would-compile-or-not/38359951#38359951", "title": "How to static_assert that a given function call expression would compile or not?", "body": "<p>First wrap the call result into a type:</p>\n\n<pre><code>template&lt;class...Args&gt;\nusing f_r=decltype(f(std::declval&lt;Args&gt;()...));\n</code></pre>\n\n<p>Now <code>f_r&lt;int&gt;</code> is the type of calling <code>f</code> with an <code>int</code> rvalue.</p>\n\n<p>Next write this:</p>\n\n<pre><code>namespace details{\n  template&lt;template&lt;class...&gt;class Z, class, class...Ts&gt;\n  struct can_apply:std::false_type{};\n  template&lt;template&lt;class...&gt;class Z, class...Ts&gt;\n  struct can_apply&lt;Z,std::void_t&lt;Z&lt;Ts...&gt;&gt;,Ts...&gt;:std::true_type{};\n}\ntemplate&lt;template&lt;class...&gt;class Z, class...Ts&gt;\nstruct can_apply:details::can_apply&lt;Z,void,Ts...&gt;;\n</code></pre>\n\n<p>Now use it:</p>\n\n<pre><code>template&lt;class...Args&gt;\nusing can_f = can_apply&lt;f_r, Args...&gt;;\n</code></pre>\n\n<p>Which gives us:</p>\n\n<pre><code>static_assert(!can_f&lt;int, double, decltype(\"hello\"), bool&gt;{}, \"As expected\");\n</code></pre>\n\n<p>This only checks for <em>early</em> errors, basically the ones that get caught before the body is parsed. (SFINAE \"errors\")  Later errors are permitted to be fatal and uncheckable.</p>\n"}], "owner": {"reputation": 683, "user_id": 4532037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fa63fb651e5f51bf9ca69ced852139ba?s=128&d=identicon&r=PG&f=1", "display_name": "zrb", "link": "https://stackoverflow.com/users/4532037/zrb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 922, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1474939906, "creation_date": 1468422617, "last_edit_date": 1474939906, "question_id": 38355525, "link": "https://stackoverflow.com/questions/38355525/how-to-static-assert-that-a-given-function-call-expression-would-compile-or-not", "title": "How to static_assert that a given function call expression would compile or not?", "body": "<p>Is there a way to check if a function call expression would compile at compile and static_assert on it?  Or should I just invoke the compiler thru <code>system()</code> and check for exit code?</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt; typename... Args &gt;\nvoid f(Args &amp;&amp; ... args, bool);\n\ntemplate &lt; typename... Args &gt;\nvoid g(Args &amp;&amp; ... args);\n\nint main()\n{\n    g(1, 2.0, \"hello\", false);  //  compiles\n    f(1, 2.0, \"hello\", false);  //  doesn't compile\n    //  How do I do this?\n    //  static_assert(!does_this_compile(f(1, 2.0, \"hello\", false)), \"As expected\");\n}\n</code></pre>\n"}, {"tags": ["c++", "recursion", "linked-list", "destructor"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1468422804, "post_id": 38355475, "comment_id": 64123392, "body": "Too deep recursion. Do you need to be using this homemade and probably-not-the-right-data-structure for your program?"}, {"owner": {"reputation": 1845, "user_id": 2110463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b779a811409123e565a558dd66f65ae3?s=128&d=identicon&r=PG&f=1", "display_name": "PinkFloyd", "link": "https://stackoverflow.com/users/2110463/pinkfloyd"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1468422914, "post_id": 38355475, "comment_id": 64123478, "body": "I guessed so... Yes, it is part of a large code that can&#39;t really be changed... I can upgrade the destructor but the overall class can&#39;t be changed."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1468423591, "post_id": 38355475, "comment_id": 64123987, "body": "You are going to have a to switch to an iterative destruction in the list destructor instead of using recursion in the nodes.  Recursion does not scale well as you can consume all of the stack space with all of the function calls."}, {"owner": {"reputation": 1845, "user_id": 2110463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b779a811409123e565a558dd66f65ae3?s=128&d=identicon&r=PG&f=1", "display_name": "PinkFloyd", "link": "https://stackoverflow.com/users/2110463/pinkfloyd"}, "edited": false, "score": 0, "creation_date": 1468424210, "post_id": 38355475, "comment_id": 64124406, "body": "It was an elegant solution... But I will change it... I just wanted to make sure that this was a possible problem. If someone tells me that this can&#39;t be problematic, I would be stuck because I don&#39;t know what else could cause my segfault... thx"}], "answers": [{"tags": [], "owner": {"reputation": 14144, "user_id": 6579744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a4ohI.png?s=128&g=1", "display_name": "rahnema1", "link": "https://stackoverflow.com/users/6579744/rahnema1"}, "is_accepted": false, "score": 0, "last_activity_date": 1468442085, "creation_date": 1468442085, "answer_id": 38361229, "question_id": 38355475, "link": "https://stackoverflow.com/questions/38355475/list-with-nodes-destructor/38361229#38361229", "title": "List with nodes destructor", "body": "<p>this way recursion can be avoided:</p>\n\n<pre><code>~Node(){\n    while(next_)\n    {\n        Node* temp = next_-&gt;next_;\n        next_-&gt;next_ = NULL;\n        delete next_;\n        next_ = temp;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1845, "user_id": 2110463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b779a811409123e565a558dd66f65ae3?s=128&d=identicon&r=PG&f=1", "display_name": "PinkFloyd", "link": "https://stackoverflow.com/users/2110463/pinkfloyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 328, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468442085, "creation_date": 1468422490, "last_edit_date": 1495540736, "question_id": 38355475, "link": "https://stackoverflow.com/questions/38355475/list-with-nodes-destructor", "title": "List with nodes destructor", "body": "<p>Before asking my question, I'm aware of <a href=\"https://stackoverflow.com/questions/2265967/writing-a-linkedlist-destructor\">this</a> and <a href=\"https://stackoverflow.com/questions/15672812/destructor-for-a-linked-list\">this</a> questions.</p>\n\n<p>I have a chained List where each node points to the next node. Basically :</p>\n\n<pre><code>class List{\n    class Node{\n        Node():next_(NULL){}\n        ~Node(){\n            if(next_){\n                delete next_; \n                next_ = NULL;\n            }\n        }\n\n        Node* next_;\n    }\n\n    List():head_(NULL),tail_(NULL){}\n\n    void add_node(){\n        tail_-&gt;next_ = new Node(); \n        tail_ = tail_-&gt;next_;\n    }\n\n    Node* head_;\n    Node* tail_;\n} \n</code></pre>\n\n<p>I removed all the useless information but the piece of code given above is\nenough to get the idea (at least I hope, I'll update it on request).</p>\n\n<p>What concerns me is the destruction part. Assume I have a <code>List</code> where I have\nadded many node with <code>add_node()</code>. When the <code>List</code> destructor is called, it\nrecursively calls the destructor of each <code>Node</code> until it reaches the last node\nwhich has <code>next_==NULL</code>. The <code>List</code> is therefore destructed from the end.</p>\n\n<p>I have never had any issue with this until today where I had a list with\n~180000 elements (quite a large memory usage but definitely not overwhelming\nthe RAM) which returns a segfault... </p>\n\n<p>If I do a while loop destroying the last elements (no recursive call of the\ndestructor) everything works fine.</p>\n\n<p>Is there a limiting number of recursive call of a destructor ? Did I miss\nanything else ?</p>\n"}, {"tags": ["c++", "multithreading", "arduino", "network-programming"], "comments": [{"owner": {"reputation": 8777, "user_id": 3102264, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G69VV.jpg?s=128&g=1", "display_name": "mpromonet", "link": "https://stackoverflow.com/users/3102264/mpromonet"}, "edited": false, "score": 1, "creation_date": 1468436032, "post_id": 38355405, "comment_id": 64131681, "body": "Did you look to <a href=\"https://github.com/ivanseidel/ArduinoThread\" rel=\"nofollow noreferrer\">ArduinoThread</a> ?"}], "answers": [{"tags": [], "owner": {"reputation": 48, "user_id": 6581918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c416ce900c0b938f250c4efa96fc9fd?s=128&d=identicon&r=PG&f=1", "display_name": "Saransh Malik", "link": "https://stackoverflow.com/users/6581918/saransh-malik"}, "is_accepted": false, "score": 0, "last_activity_date": 1468438428, "last_edit_date": 1468438428, "creation_date": 1468426225, "answer_id": 38356776, "question_id": 38355405, "link": "https://stackoverflow.com/questions/38355405/how-to-use-arduino-multi-thread/38356776#38356776", "title": "how to use arduino multi Thread", "body": "<p>Quite honestly, i have been trying for a while by I have found no work-arounds. Although, you can proto thread. It's not nearly as efficient, but can work</p>\n\n<p>Good luck</p>\n"}, {"tags": [], "owner": {"reputation": 5339, "user_id": 1714692, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bd72cbc200eb7c9aa507624f154b21a7?s=128&d=identicon&r=PG", "display_name": "Francesco Boi", "link": "https://stackoverflow.com/users/1714692/francesco-boi"}, "is_accepted": false, "score": 0, "last_activity_date": 1529490555, "creation_date": 1529490555, "answer_id": 50946044, "question_id": 38355405, "link": "https://stackoverflow.com/questions/38355405/how-to-use-arduino-multi-thread/50946044#50946044", "title": "how to use arduino multi Thread", "body": "<p>Arduino does not support multithread programming. </p>\n\n<p>However there have been some workarounds, for example the one in <a href=\"https://github.com/ivanseidel/ArduinoThread\" rel=\"nofollow noreferrer\">this project</a> (you can install it also from the Arduino IDE). </p>\n\n<p>I think it can be suitable for your project, although it seems you have to define the schedule time yourself while in a real multithread environment it is the OS that decides when to execute tasks. </p>\n\n<p>Let me know if it works for your project.</p>\n"}], "owner": {"reputation": 73, "user_id": 6435014, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4a231697235d1d14ac82f18c45ab2e75?s=128&d=identicon&r=PG&f=1", "display_name": "K. Ms", "link": "https://stackoverflow.com/users/6435014/k-ms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 741, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1529502532, "creation_date": 1468422306, "last_edit_date": 1529502532, "question_id": 38355405, "link": "https://stackoverflow.com/questions/38355405/how-to-use-arduino-multi-thread", "title": "how to use arduino multi Thread", "body": "<p>I have Arduino with ESP8266 module.</p>\n\n<p>I thought \"How about making arduino echo(?) client?\".</p>\n\n<p>So, I made <strong>multithread server</strong> that have read &amp; write functions.</p>\n\n<p>Now, I have to make arduino client using multithread, with one thread sending data to the server and another receiving data.</p>\n\n<p>But, Arduino can't use thread.</p>\n\n<p>Is there a way to use the Thread?</p>\n"}, {"tags": ["c++", "gcc", "visual-c++", "clang", "c-preprocessor"], "answers": [{"tags": [], "owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "is_accepted": true, "score": 8, "last_activity_date": 1546794611, "last_edit_date": 1546794611, "creation_date": 1468423113, "answer_id": 38355718, "question_id": 38355289, "link": "https://stackoverflow.com/questions/38355289/definedvariable-not-evaluated-correctly-by-msvc/38355718#38355718", "title": "defined(VARIABLE) not evaluated correctly by MSVC?", "body": "<p>This is undefined behavior according to the standard.</p>\n\n<p><a href=\"https://timsong-cpp.github.io/cppwp/n4659/cpp.cond#8\" rel=\"nofollow noreferrer\">[cpp.cond]</a>, emphasis mine</p>\n\n<blockquote>\n  <p>Prior to evaluation, macro invocations in the list of preprocessing tokens that will become the controlling constant expression are replaced (except for those macro names modified by the <code>defined</code> unary operator), just as in normal text. <strong>If the token <code>defined</code> is generated as a result of this replacement process</strong> or use of the <code>defined</code> unary operator does not match one of the two specified forms prior to macro replacement, <strong>the behavior is undefined</strong>.</p>\n</blockquote>\n"}], "owner": {"reputation": 8115, "user_id": 369009, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/001cc37902a582ddb930a1ab817517bc?s=128&d=identicon&r=PG", "display_name": "Jan R&#252;egg", "link": "https://stackoverflow.com/users/369009/jan-r%c3%bcegg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 38355718, "answer_count": 1, "score": 6, "last_activity_date": 1546794611, "creation_date": 1468422003, "last_edit_date": 1546794219, "question_id": 38355289, "link": "https://stackoverflow.com/questions/38355289/definedvariable-not-evaluated-correctly-by-msvc", "title": "defined(VARIABLE) not evaluated correctly by MSVC?", "body": "<p>Running the following code</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#define FOO\n#define BAR defined(FOO)\n\nint main() {\n#if BAR\n    std::cout &lt;&lt; \"BAR enabled!\" &lt;&lt; std::endl;\n#else\n    std::cout &lt;&lt; \"BAR disabled!\" &lt;&lt; std::endl;\n#endif\n    return 0;\n}\n</code></pre>\n\n<p>in <a href=\"http://rextester.com/CJR20765\">Visual Studio</a> displays <code>Bar disabled!</code>, while running the same code in <a href=\"http://rextester.com/UGB49419\">gcc</a> or <a href=\"http://rextester.com/PSZH59857\">clang</a> displays <code>Bar enabled!</code>.</p>\n\n<p><strong>Is this a bug in the Microsoft compiler? What is correct according to the standard?</strong></p>\n"}, {"tags": ["c++", "c++11", "lambda"], "answers": [{"tags": [], "owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "is_accepted": false, "score": 2, "last_activity_date": 1468421377, "creation_date": 1468421377, "answer_id": 38355019, "question_id": 38354923, "link": "https://stackoverflow.com/questions/38354923/when-is-this-captured-in-a-lambda/38355019#38355019", "title": "When is &#39;this&#39; captured in a lambda?", "body": "<p>Indeed, the value of the capture is set when the lambda is defined, not when its called. Because you're setting a static variable to the expression that defines the lambda, this only happens the very first time the function <code>call_print</code> is called (by the rules governing static variables). Thus all <code>call_print</code> calls thereafter in fact get the same lambda, the one whose <code>this</code> is set to <code>&amp;a</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 11, "creation_date": 1468421486, "post_id": 38355029, "comment_id": 64122399, "body": "It might be worth adding that this actually represents a very dangerous programming style, since if <code>a</code> gets deleted, future calls to <code>call_print</code> will invoke undefined behavior and very likely crash."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1468421593, "post_id": 38355029, "comment_id": 64122494, "body": "@Xirema That&#39;s very true, but I don&#39;t think that this is the behavior he&#39;s trying to get."}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 0, "creation_date": 1468422690, "post_id": 38355029, "comment_id": 64123317, "body": "I understand the semantics of <code>static</code>, what I am trying to figure out is if the lambda &quot;promises&quot; to capture <code>this</code> <i>later</i>, or if it&#39;s captured <i>right then</i>. You did address this in your response, though. I wanted the container for the lambda to be static, but not the captures. I was hoping they were separated between definition &amp; invocation."}, {"owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "reply_to_user": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 0, "creation_date": 1468422929, "post_id": 38355029, "comment_id": 64123492, "body": "@void.pointer, captures are captured at the point of the lambda definition, so it&#39;s <i>right then</i>"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 2, "creation_date": 1468422949, "post_id": 38355029, "comment_id": 64123507, "body": "@void.pointer: How could a lambda capture <i>anything</i> at some point after its generation? Lambdas aren&#39;t magic; they&#39;re just a fancy way of declaring types."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "reply_to_user": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 1, "creation_date": 1468423296, "post_id": 38355029, "comment_id": 64123770, "body": "@void.pointer <i>&quot;I wanted the container for the lambda to be static, but not the captures.&quot;</i> That would be like <code>struct S { int i; }; static const S s { 42 };</code> and expect <code>s.i</code> to be different every time."}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 1, "creation_date": 1468424003, "post_id": 38355029, "comment_id": 64124253, "body": "I realize what I&#39;m asking doesn&#39;t make sense in the context of reference and by-value captures, I guess I for some reason was thinking <code>this</code> capture would be a special case. But seeing as how the invocation can actually occur outside of the class itself, it&#39;s not possible to capture <code>this</code> later. Thanks for clarifying with examples."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 0, "creation_date": 1468443339, "post_id": 38355029, "comment_id": 64135430, "body": "@void.pointer You may not understand the semantics of <code>static</code> as well as you think if you thought that <i>anything</i> in the expression that initializes the static value would be evaluated multiple times or in different ways (the fact that it&#39;s a lambda is pretty much irrelevant). Also, the scope of the invocation has nothing to do with anything; as other commenters have pointed out, captures <i>always</i> happen <i>when the lambda is initialized</i>. This is <b>the entire point of a &quot;capture&quot;.</b>. It is what &quot;capture&quot; <b>means</b>."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 0, "creation_date": 1468509348, "post_id": 38355029, "comment_id": 64166032, "body": "@void.pointer: I think the condescension comes from thinking about your question. It is <b><i>impossible</i></b> for C++ to define that <code>this</code> is captured at the site of the first call, because that site may not be inside of where <code>this</code> came from (just like any other capture). If you pass a <code>this</code>-capturing-lambda to <code>std::sort</code>, how could <code>this</code> penetrate that function call and get captured inside of <code>sort</code>? From that perspective, your question could be rephrased as, &quot;Do lambdas do something that is fundamentally impossible?&quot;"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 1, "creation_date": 1468509413, "post_id": 38355029, "comment_id": 64166102, "body": "@void.pointer:  That&#39;s why everyone assumed that your problem was understanding the behavior of <code>static</code>. Because there&#39;s no way that lambdas could ever magically capture the way you seemed to think they were."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1468519465, "post_id": 38355029, "comment_id": 64172254, "body": "@NicolBolas &quot;I think the condescension comes from thinking about your question&quot; -- yes, that&#39;s it exactly, plus the fact that OP continued to express confusion while insisting that they understand the issue. Nevertheless, I did not <i>intend</i> to come across as condescending or insulting, though I can see now that that&#39;s precisely how I came across."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 0, "creation_date": 1468519695, "post_id": 38355029, "comment_id": 64172381, "body": "@void.pointer I apologize for the phrasing of my first comment, in particular &quot;you may not understand...as well as you think.&quot; The point remains, however, that I am concerned that you really are revealing your &quot;unknown unknowns&quot; in this discussion: that is, the way you are talking about <code>static</code> and captures still does not seem to indicate that you&#39;ve absorbed the explanations above. I don&#39;t mean this to be insulting: again, SO is for explaining these types of technical concepts, and uncovering and addressing misunderstandings is a large part of this."}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 0, "creation_date": 1468522635, "post_id": 38355029, "comment_id": 64174124, "body": "Maybe the minds here are not simple enough to take my question with a grain of salt. It feels like everyone is over-analyzing my questions and proposing a lot of &quot;would-have-should-have&quot; scenarios. Hindsight is 20/20. I just got confused. Great answers here have help to put my mind back on track, and other than feeling a little silly about my question now, I walk away with the answers I need. If I knew all the problems with my question ahead of time I wouldn&#39;t have asked it or been confused in the first place."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 36, "last_activity_date": 1468421898, "last_edit_date": 1468421898, "creation_date": 1468421401, "answer_id": 38355029, "question_id": 38354923, "link": "https://stackoverflow.com/questions/38354923/when-is-this-captured-in-a-lambda/38355029#38355029", "title": "When is &#39;this&#39; captured in a lambda?", "body": "<p>This has nothing to do with the semantics of lambda capture. It's simply how <code>static</code> works.</p>\n\n<p>A <code>static</code> function-scoped variable is initialized <em>exactly once</em>. There is only ever one such object in your entire program. It will be initialized the first time the function is called (more specifically, the first time the <code>static</code> statement is executed). And therefore, the expression used to initialize the <code>static</code> variable is only ever invoked once.</p>\n\n<p>So if a <code>static</code> function-scoped variable is initialized with data that's based on one of the function's parameters (like <code>this</code>), then it will only get the parameters from the first invocation of that function.</p>\n\n<p>Your code creates a single lambda. It does not create different lambdas on each invocation of the function.</p>\n\n<p>The behavior you seem to want is not a function-local <code>static</code> variable, but an object member. So just put a <code>std::function</code> object in the class itself, and have <code>call_print</code> initialize it if it is empty.</p>\n"}, {"tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": false, "score": 12, "last_activity_date": 1468421428, "creation_date": 1468421428, "answer_id": 38355039, "question_id": 38354923, "link": "https://stackoverflow.com/questions/38354923/when-is-this-captured-in-a-lambda/38355039#38355039", "title": "When is &#39;this&#39; captured in a lambda?", "body": "<p>The lambda is instantiated the first time the enclosing function <code>A::call_print()</code> is called. Since the first time you call it on an <code>A</code> object, the <code>this</code> of that object is captured. If you reversed the order of invocation, you'd see a different result:</p>\n\n<pre><code>b.call_print();\na.call_print();\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>B::print()\nB::print()\n</code></pre>\n\n<p>It more to do with the semantics of initialization of function-local static objects than those of lambda capture.</p>\n"}, {"tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 8, "last_activity_date": 1468421459, "creation_date": 1468421459, "answer_id": 38355052, "question_id": 38354923, "link": "https://stackoverflow.com/questions/38354923/when-is-this-captured-in-a-lambda/38355052#38355052", "title": "When is &#39;this&#39; captured in a lambda?", "body": "<p>Static local variables are initialized the first time their declaration is executed.</p>\n\n<p>In this case, you:</p>\n\n<ol>\n<li>Create a lambda, capturing &amp;A as this, that calls A.print();</li>\n<li>Assign that lambda to <code>print_func</code></li>\n<li>Call that lambda (through <code>print_func</code>)</li>\n<li>Call that lambda again.</li>\n</ol>\n\n<p>Captured values are always captured when the lambda is created - which in this case is during the first call to <code>call_print</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "is_accepted": false, "score": 4, "last_activity_date": 1468478913, "last_edit_date": 1468478913, "creation_date": 1468421459, "answer_id": 38355054, "question_id": 38354923, "link": "https://stackoverflow.com/questions/38354923/when-is-this-captured-in-a-lambda/38355054#38355054", "title": "When is &#39;this&#39; captured in a lambda?", "body": "<p>I don't think the capture is the problem here but the <code>static</code> keyword.\nThink about your code as this:</p>\n\n<pre><code>class A\n{\npublic:\n    void call_print()\n    {\n        static A* ptr = this;\n\n        ptr-&gt;print();\n    };\n\n    virtual void print()\n    {\n        std::cout &lt;&lt; \"A::print()\\n\";\n    }\n};\n\nclass B : public A\n{\npublic:\n    virtual void print() override\n    {\n        std::cout &lt;&lt; \"B::print()\\n\";\n    }\n};\n</code></pre>\n\n<p>This is pretty much the same without a lambda.</p>\n\n<p>If you look at the code it becomes pretty clear that your call <code>a.call_print();</code> initializes <code>ptr</code> with a pointer to the object <code>a</code> which is then used further on.</p>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 3, "last_activity_date": 1468421761, "creation_date": 1468421761, "answer_id": 38355192, "question_id": 38354923, "link": "https://stackoverflow.com/questions/38354923/when-is-this-captured-in-a-lambda/38355192#38355192", "title": "When is &#39;this&#39; captured in a lambda?", "body": "<p>This question is not so much about the behaviour of lambdas, but about the behaviour of static variables in functions.</p>\n\n<p>The variable is created the first time code flows over it, using whatever variables are available at that time. </p>\n\n<p>example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint foo(int v)\n{\n  static int value = v;\n  return v;\n};\n\nint main()\n{\n  std::cout &lt;&lt; foo(10) &lt;&lt; std::endl;\n  std::cout &lt;&lt; foo(11) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>expected:</p>\n\n<pre><code>10\n10\n</code></pre>\n\n<p>Because it's equivalent to:</p>\n\n<pre><code>foo::value = 10;\nstd::cout &lt;&lt; foo::value &lt;&lt; std::endl;\n// foo::value = 11; (does not happen)\nstd::cout &lt;&lt; foo::value &lt;&lt; std::endl;\n</code></pre>\n"}], "owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3113, "favorite_count": 0, "accepted_answer_id": 38355029, "answer_count": 6, "score": 24, "last_activity_date": 1468478913, "creation_date": 1468421122, "question_id": 38354923, "link": "https://stackoverflow.com/questions/38354923/when-is-this-captured-in-a-lambda", "title": "When is &#39;this&#39; captured in a lambda?", "body": "<p>I have a function in a class that defines a lambda and stores it in a local static variable:</p>\n\n<pre><code>class A\n{\npublic:\n    void call_print()\n    {\n        static auto const print_func = [this] {\n            print();\n        };\n\n        print_func();\n    };\n\n    virtual void print()\n    {\n        std::cout &lt;&lt; \"A::print()\\n\";\n    }\n};\n\nclass B : public A\n{\npublic:\n    virtual void print() override\n    {\n        std::cout &lt;&lt; \"B::print()\\n\";\n    }\n};\n</code></pre>\n\n<p>I also execute the following test:</p>\n\n<pre><code>int main()\n{\n    A a;\n    B b;\n\n    a.call_print();\n    b.call_print();\n}\n</code></pre>\n\n<p>(<a href=\"http://coliru.stacked-crooked.com/a/2fe9b4702bb01d02\">Live Sample</a>)</p>\n\n<p>What I expect to be printed is:</p>\n\n<pre><code>A::print()\nB::print()\n</code></pre>\n\n<p>But what I really get is:</p>\n\n<pre><code>A::print()\nA::print()\n</code></pre>\n\n<p>(Same object address is also printed with each)</p>\n\n<p>I suspect this is due to the <code>this</code> capture. I assumed that it would capture the value of <code>this</code> when it is called, however it seems to be captured the moment the lambda is defined.</p>\n\n<p>Could someone explain the semantics of lambda captures? When do they actually get provided to the function? Is it the same for all capture types, or is <code>this</code> a special case? Removing <code>static</code> fixes the problem, however in my production code I'm actually storing the lambda in a slightly-heavier object which represents a slot to which I insert into a signal later.</p>\n"}, {"tags": ["c++", "windows", "win-universal-app", "video-processing", "ms-media-foundation"], "answers": [{"comments": [{"owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "edited": false, "score": 2, "creation_date": 1468430427, "post_id": 38354858, "comment_id": 64128286, "body": "This is good for most cases but is not an accurate copy. A copy is always a simple sample, while original sample might be backed by Direct3D texture etc."}, {"owner": {"reputation": 1425, "user_id": 739731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MesSJ.jpg?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/739731/sergey"}, "reply_to_user": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "edited": false, "score": 0, "creation_date": 1468483001, "post_id": 38354858, "comment_id": 64148198, "body": "What do you mean by &quot;not accurate&quot;? What sample aspect is lost? (except buffer sizes are decreased to their actual (non-maximum) size)."}, {"owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "edited": false, "score": 2, "creation_date": 1468484726, "post_id": 38354858, "comment_id": 64149236, "body": "By &quot;accurate&quot; I mean exact copy, which duplicates all the capabilities. I gave one example above. Also, this is exactly the reason why sample duplication API does not exist: Media Foundation is simply unable to produce an exact copy because in general sample is implementation specific, even though adheres to generic interface set."}], "tags": [], "owner": {"reputation": 1425, "user_id": 739731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MesSJ.jpg?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/739731/sergey"}, "is_accepted": false, "score": 1, "last_activity_date": 1468420966, "creation_date": 1468420966, "answer_id": 38354858, "question_id": 38354857, "link": "https://stackoverflow.com/questions/38354857/how-to-duplicate-imfsample-object/38354858#38354858", "title": "How to duplicate IMFSample object", "body": "<p>Here is a sample code:</p>\n\n<pre><code>#define MmfThrowIfError(hrVal) \\\n{ \\\n    HRESULT hrMmfTraceInternal = (hrVal); \\\n    if (FAILED(hrMmfTraceInternal)) \\\n    { \\\n        /* LOG_F(LS_ERROR)&lt;&lt;\"MMF hr: 0x\"&lt;&lt;std::hex&lt;&lt;hrMmfTraceInternal; */ \\\n        throw ref new ::Platform::Exception(hrMmfTraceInternal); \\\n    } \\\n}\n\nMFComPtr&lt;IMFMediaBuffer&gt; DuplicateBuffer(const MFComPtr&lt;IMFMediaBuffer&gt;&amp; srcBuf)\n{\n    byte* srcByteBuffer = nullptr;\n    DWORD srcBuffMaxLen = 0;\n    DWORD srcBuffCurrLen = 0;\n    MmfThrowIfError(srcBuf-&gt;Lock(&amp;srcByteBuffer, &amp;srcBuffMaxLen, &amp;srcBuffCurrLen));\n\n    MFComPtr&lt;IMFMediaBuffer&gt; destBuf = nullptr;\n    MmfThrowIfError(MFCreateMemoryBuffer(srcBuffCurrLen, &amp;destBuf));\n\n    byte* destByteBuffer = nullptr;\n    MmfThrowIfError(destBuf-&gt;Lock(&amp;destByteBuffer, nullptr, nullptr));\n    memcpy(destByteBuffer, srcByteBuffer, srcBuffCurrLen);\n    MmfThrowIfError(destBuf-&gt;Unlock());\n    MmfThrowIfError(srcBuf-&gt;Unlock());\n\n    MmfThrowIfError(destBuf-&gt;SetCurrentLength(srcBuffCurrLen));\n    return destBuf;\n}\n\nSampleComPtr DuplicateSample(const SampleComPtr&amp; sample)\n{\n    if (!sample)\n        return nullptr;\n\n    DWORD sampleFlags = 0;\n    LONGLONG llVideoTimeStamp = 0;\n    LONGLONG llSampleDuration = 0;\n    MmfThrowIfError(sample-&gt;GetSampleFlags(&amp;sampleFlags));\n    MmfThrowIfError(sample-&gt;GetSampleTime(&amp;llVideoTimeStamp));\n    MmfThrowIfError(sample-&gt;GetSampleDuration(&amp;llSampleDuration));\n\n    SampleComPtr outSample;\n    MFCreateSample(&amp;outSample);\n    MmfThrowIfError(outSample-&gt;SetSampleFlags(sampleFlags));\n    MmfThrowIfError(outSample-&gt;SetSampleTime(llVideoTimeStamp));\n    MmfThrowIfError(outSample-&gt;SetSampleDuration(llSampleDuration));\n\n    DWORD bufferCount = 0;\n    MmfThrowIfError(sample-&gt;GetBufferCount(&amp;bufferCount));\n\n    for (DWORD index = 0; index &lt; bufferCount; ++index)\n    {\n        MFComPtr&lt;IMFMediaBuffer&gt; srcBuf = nullptr;\n        MmfThrowIfError(sample-&gt;GetBufferByIndex(index, &amp;srcBuf));\n\n        MFComPtr&lt;IMFMediaBuffer&gt; reConstructedBuffer = DuplicateBuffer(srcBuf);\n        srcBuf = nullptr;\n        MmfThrowIfError(outSample-&gt;AddBuffer(reConstructedBuffer.Get()));\n    }\n\n    return outSample;\n}\n</code></pre>\n"}], "owner": {"reputation": 1425, "user_id": 739731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MesSJ.jpg?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/739731/sergey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1468603288, "creation_date": 1468420966, "last_edit_date": 1468603288, "question_id": 38354857, "link": "https://stackoverflow.com/questions/38354857/how-to-duplicate-imfsample-object", "title": "How to duplicate IMFSample object", "body": "<p>I need to duplicate <code>IMFSample</code> object so that I will have separate independent objects.\nMicrosoft API does not provide easy way to duplicate <code>IMFSample</code> video frame.</p>\n"}, {"tags": ["c++", "function", "user-interface", "pointers", "std-function"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1468420784, "post_id": 38354559, "comment_id": 64121852, "body": "<code>button-&gt;subscribeEvent([this](){nonGlobal();});</code>"}], "answers": [{"tags": [], "owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "is_accepted": false, "score": 1, "last_activity_date": 1468420719, "creation_date": 1468420719, "answer_id": 38354761, "question_id": 38354559, "link": "https://stackoverflow.com/questions/38354559/c-how-to-pass-a-function-from-any-class-as-a-parameter/38354761#38354761", "title": "C++: How to pass a function from any class as a parameter", "body": "<p>Your code would work if you made the function <code>MainGame::nonGlobal</code> static:</p>\n\n<pre><code>class MainGame\n{\npublic:\n    void Init();\n    static void nonGlobal();\n\nprivate:\n    std::vector&lt;GUI*&gt; _guis;\n};\n</code></pre>\n\n<p>The reason you can't pass a non-static member function is because member functions have an implicit first parameter (<code>this</code>), in your case of type <code>MainGame*</code>. So in effect the function you're currently trying to pass has the signature <code>void(MainGame*)</code> instead of <code>void()</code>.</p>\n\n<p>Alternatively, you can bind the <code>this</code> parameter by using a lambda instead of passing the function directly:</p>\n\n<pre><code>button-&gt;subscribeEvent([this](){nonGlobal();});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 6381243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5668a085cdb688310ee5ccc870cb9e02?s=128&d=identicon&r=PG&f=1", "display_name": "Connor", "link": "https://stackoverflow.com/users/6381243/connor"}, "edited": false, "score": 0, "creation_date": 1473697120, "post_id": 38354794, "comment_id": 66230638, "body": "Great thanks! I went ahead an implemented the std::bind functionality into the subscribeEvent function so I could call &amp;MainGame::nonGlobal without std::bind in the MainGame code.  I also made it generic so I could include functions with arguments:                                    std::function&lt;void()&gt; callback() const { return eventCallback; } \ttemplate&lt;typename T, typename F, typename... Args&gt; \tvoid subscribeEvent(T instance, F func, Args... args) \t{ \t\tcall temp = { std::bind(func, instance, args...) }; \t\teventCallback = temp; \t}"}], "tags": [], "owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "is_accepted": false, "score": 0, "last_activity_date": 1468420800, "creation_date": 1468420800, "answer_id": 38354794, "question_id": 38354559, "link": "https://stackoverflow.com/questions/38354559/c-how-to-pass-a-function-from-any-class-as-a-parameter/38354794#38354794", "title": "C++: How to pass a function from any class as a parameter", "body": "<p>Change this:</p>\n\n<pre><code>button-&gt;subscribeEvent(MainGame::nonGlobal); //&lt; This does not work saying something like \u201cvoid(MainGame) is not of type void()\u201d\n</code></pre>\n\n<p>to</p>\n\n<pre><code>button-&gt;subscribeEvent(std::bind(&amp;MainGame::nonGlobal, this)); \n</code></pre>\n\n<p>With this change you have another problem of lifetime management of <code>this</code> though.</p>\n"}], "owner": {"reputation": 19, "user_id": 6381243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5668a085cdb688310ee5ccc870cb9e02?s=128&d=identicon&r=PG&f=1", "display_name": "Connor", "link": "https://stackoverflow.com/users/6381243/connor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1468420800, "creation_date": 1468420230, "question_id": 38354559, "link": "https://stackoverflow.com/questions/38354559/c-how-to-pass-a-function-from-any-class-as-a-parameter", "title": "C++: How to pass a function from any class as a parameter", "body": "<p>I began implementing my GUI system for my game last night and I decided to try using function pointers to handle gui events.  I haven\u2019t used them before, but was able to get a basic implementation in.  However, I want to extend the usability and \u2018genericness\u2019 of the GUI system.  Currently I have a function pointer in the GUI superclass under the protected modifier.  I also have a getter (callback) and a setter (subscribeEvent) in the class to assign the gui an event.  It currently looks a little something like this:</p>\n\n<pre><code>class GUI\n{\npublic:\n    \u2026\u2026.\n    \u2026\u2026\n    std::function&lt;void()&gt; callback() const { return eventCallback; }\n    void subscribeEvent(const std::function&lt;void()&gt;&amp; callback)\n    { \n        eventCallback = callback; \n    }\n\nprotected:\n    std::function&lt;void()&gt; eventCallback;\n};\n</code></pre>\n\n<p>To set a function callback, you pass in a void function to subscribeEvent which works fine.  However you cannot use a scope resolution modifier with any function, the function passed in has to be a global function like so.</p>\n\n<pre><code>(MainGame.h):\n\nvoid global();\n\nclass MainGame\n{\npublic:\n    void Init();\n    void nonGlobal();\n\nprivate:\n    std::vector&lt;GUI*&gt; _guis;\n};\n\n(MainGame.cpp):\n\nvoid MainGame::Init()\n{\n    Button* button  = new Button(\u2026\u2026); //&lt; Button is a subclass of GUI\n    button-&gt;subscribeEvent(global); //&lt; This works fine\n    button-&gt;subscribeEvent(MainGame::nonGlobal); //&lt; This does not work saying something like \u201cvoid(MainGame) is not of type void()\u201d\n    _guis.pushBack(button);\n}\n\nvoid MainGame::nonGlobal()\n{\n\u2026\u2026\n}\n\nvoid global()\n{\n\u2026\u2026\n}\n</code></pre>\n\n<p>Does anyone know how to modify the parameter to allow any function in the scope of any class to be passed in.  This would be helpful because I could have a button event come from a player, enemy, item, etc class and not have every handler function be global.  I\u2019ve seen high level gui systems pass in events such as \u2018event(handlerFunction, classtype)\u2019 so you can pass in the handler function and then an object that the handler function resides in.  This is an approach I would like to take. </p>\n"}, {"tags": ["c++", "gcc", "g++", "clang++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1468421096, "post_id": 38354521, "comment_id": 64122099, "body": "Using <a href=\"http://melpon.org/wandbox\" rel=\"nofollow noreferrer\">melpon.org/wandbox</a> it appears the behavior changes from 4.9.3 to 5.1."}, {"owner": {"reputation": 2029, "user_id": 213057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d8465ac78b6e3c051a2dab05d8ff6ae?s=128&d=identicon&r=PG", "display_name": "DoDo", "link": "https://stackoverflow.com/users/213057/dodo"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1468425719, "post_id": 38354521, "comment_id": 64125476, "body": "Unfortunately, in my codebase I&#39;ve also managed to reproduce similar issue (but with uint32_t) even on GCC 4.9.3, however it works when put in minimal example. I am investigating..."}], "answers": [{"comments": [{"owner": {"reputation": 2029, "user_id": 213057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d8465ac78b6e3c051a2dab05d8ff6ae?s=128&d=identicon&r=PG", "display_name": "DoDo", "link": "https://stackoverflow.com/users/213057/dodo"}, "edited": false, "score": 0, "creation_date": 1468439443, "post_id": 38357010, "comment_id": 64133398, "body": "Thank you for your answer. Jonathan was first so I accepted his answer, but your is also very informative. Too bad SO doesn&#39;t let you accept multiple answers :-)."}], "tags": [], "owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "is_accepted": false, "score": 3, "last_activity_date": 1468428261, "last_edit_date": 1495535325, "creation_date": 1468426956, "answer_id": 38357010, "question_id": 38354521, "link": "https://stackoverflow.com/questions/38354521/why-does-gcc-optimization-not-work-with-valarrays/38357010#38357010", "title": "Why does GCC optimization not work with valarrays?", "body": "<p>It's the result of careless implementation of <code>operator/ (const T&amp; val, const std::valarray&lt;T&gt;&amp; rhs)</code> (and most probably other operators over valarrays) using lazy evaluation:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;valarray&gt;\n\nint main() {\n    using ratios_t = std::valarray&lt;float&gt;;\n\n    ratios_t a{0.5, 1, 2};\n    float x = 256;\n    const auto&amp; res ( x / a );\n    // x = 512;  //  &lt;-- uncommenting this line affects the output\n    for(const auto&amp; r : ratios_t{res})\n        std::cout &lt;&lt; r &lt;&lt; \" \";\n    return 0;\n}\n</code></pre>\n\n<p>With the \"<code>x = 512</code>\" line commented out, the output is</p>\n\n<pre><code>512 256 128 \n</code></pre>\n\n<p>Uncomment that line and the output changes to</p>\n\n<pre><code>1024 512 256 \n</code></pre>\n\n<p>Since in your example the left-hand side argument of the division operator is a temporary, the result is undefined.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>As <a href=\"https://stackoverflow.com/users/981959/jonathan-wakely\">Jonathan Wakely</a> correctly <a href=\"https://stackoverflow.com/a/38357100/6394138\">pointed out</a>, the lazy-evaluation based implementation becomes a problem in this example due to the usage of <code>auto</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2029, "user_id": 213057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d8465ac78b6e3c051a2dab05d8ff6ae?s=128&d=identicon&r=PG", "display_name": "DoDo", "link": "https://stackoverflow.com/users/213057/dodo"}, "edited": false, "score": 0, "creation_date": 1468438746, "post_id": 38357100, "comment_id": 64133035, "body": "Thank you for detailed answer. I will accept it. I would just like to note that even if I write <code>auto res (ratios_t::value_type(256)&#47;a)</code>, I still get the same result with optimisations turned on. However, your suggestion works (i.e. not using <code>auto</code>). With both clang and msvc original code worked correctly."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 2029, "user_id": 213057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d8465ac78b6e3c051a2dab05d8ff6ae?s=128&d=identicon&r=PG", "display_name": "DoDo", "link": "https://stackoverflow.com/users/213057/dodo"}, "edited": false, "score": 0, "creation_date": 1468439812, "post_id": 38357100, "comment_id": 64133620, "body": "Yes, because <code>auto</code> deduces the type of the expression template that contains a reference to the expired temporary. You need to explicitly create a <code>valarray</code>, to force the evaluation to happen before the temporary goes away. As I said, <code>auto</code> and <code>valarray</code> don&#39;t mix well."}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 6, "last_activity_date": 1525279847, "last_edit_date": 1525279847, "creation_date": 1468427306, "answer_id": 38357100, "question_id": 38354521, "link": "https://stackoverflow.com/questions/38354521/why-does-gcc-optimization-not-work-with-valarrays/38357100#38357100", "title": "Why does GCC optimization not work with valarrays?", "body": "<p><code>valarray</code> and <code>auto</code> do not mix well.</p>\n\n<p>This creates a temporary object, then applies <code>operator/</code> to it:</p>\n\n<pre><code>const auto&amp; res ( ratios_t::value_type(256) / a );\n</code></pre>\n\n<p>The libstdc++ <code>valarray</code> uses expression templates so that <code>operator/</code> returns a lightweight object that refers to the original arguments and evaluates them lazily.  You use <code>const auto&amp;</code> which causes the expression template to be bound to the reference, but doesn't extend the lifetime of the temporary that the expression template refers to, so when the evaluation happens the temporary has gone out of scope, and its memory has been reused.</p>\n\n<p>It will work fine if you do:</p>\n\n<pre><code>ratios_t res = ratios_t::value_type(256) / a;\n</code></pre>\n\n<p><strong>Update:</strong> as of today, GCC trunk will give the expected result for this example. I've modified our <code>valarray</code> expression templates to be a bit less error-prone, so that it's harder (but still not impossible) to create dangling references. The new implementation should be included in GCC 9 next year.</p>\n"}], "owner": {"reputation": 2029, "user_id": 213057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d8465ac78b6e3c051a2dab05d8ff6ae?s=128&d=identicon&r=PG", "display_name": "DoDo", "link": "https://stackoverflow.com/users/213057/dodo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 3, "accepted_answer_id": 38357100, "answer_count": 2, "score": 11, "last_activity_date": 1525279847, "creation_date": 1468420135, "last_edit_date": 1468420488, "question_id": 38354521, "link": "https://stackoverflow.com/questions/38354521/why-does-gcc-optimization-not-work-with-valarrays", "title": "Why does GCC optimization not work with valarrays?", "body": "<p>This is a simple c++ program using valarrays:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;valarray&gt;\n\nint main() {\n    using ratios_t = std::valarray&lt;float&gt;;\n\n    ratios_t a{0.5, 1, 2};\n    const auto&amp; res ( ratios_t::value_type(256) / a );\n    for(const auto&amp; r : ratios_t{res})\n        std::cout &lt;&lt; r &lt;&lt; \" \" &lt;&lt; std::endl;\n    return 0;  \n}\n</code></pre>\n\n<p>If I compile and run it like this:</p>\n\n<pre><code>g++ -O0 main.cpp &amp;&amp; ./a.out\n</code></pre>\n\n<p>The output is as expected:</p>\n\n<pre><code>512 256 128 \n</code></pre>\n\n<p>However, if I compile and run it like this:</p>\n\n<pre><code>g++ -O3 main.cpp &amp;&amp; ./a.out\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>0 0 0 \n</code></pre>\n\n<p>Same happens if I use <code>-O1</code> optimization parameter.</p>\n\n<p>GCC version is (latest in Archlinux):</p>\n\n<pre><code>$ g++ --version\ng++ (GCC) 6.1.1 20160707\n</code></pre>\n\n<p>However, if I try with clang, both</p>\n\n<pre><code>clang++ -std=gnu++14 -O0 main.cpp &amp;&amp; ./a.out\n</code></pre>\n\n<p>and</p>\n\n<pre><code>clang++ -std=gnu++14 -O3 main.cpp &amp;&amp; ./a.out\n</code></pre>\n\n<p>produce the same correct result:</p>\n\n<pre><code>512 256 128 \n</code></pre>\n\n<p>Clang version is:</p>\n\n<pre><code>$ clang++ --version\nclang version 3.8.0 (tags/RELEASE_380/final)\n</code></pre>\n\n<p>I've also tried with GCC 4.9.2 on Debian, where executable produces the correct result.</p>\n\n<p>Is this a possible bug in GCC or am I doing something wrong? Can anyone reproduce this?</p>\n\n<p>EDIT: I managed to reproduce the issue also on Homebrew version of GCC 6 on Mac OS.</p>\n"}, {"tags": ["c++", "linker", "binary", "openssl", "ldd"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1468420535, "post_id": 38354453, "comment_id": 64121637, "body": "<code>ls</code> should show <code>&#47;lib&#47;libcrypto.so.1.0</code> is the real file; while <code>libcrypto.so</code> and <code>libcrypto.so.1.0.0</code> are symlinks."}, {"owner": {"reputation": 2550, "user_id": 1540482, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5934b46f20758804d91d4f7570282daa?s=128&d=identicon&r=PG", "display_name": "15412s", "link": "https://stackoverflow.com/users/1540482/15412s"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1468420635, "post_id": 38354453, "comment_id": 64121716, "body": "I have this file twice on my system, is should use /server/lib/libcrypto.so.1.0.0"}, {"owner": {"reputation": 2550, "user_id": 1540482, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5934b46f20758804d91d4f7570282daa?s=128&d=identicon&r=PG", "display_name": "15412s", "link": "https://stackoverflow.com/users/1540482/15412s"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1468420726, "post_id": 38354453, "comment_id": 64121799, "body": "why does it shows libcrypto.so.1.0.0 file twice? like the pointer(libcrypto.so.1.0.0) is beeing set twice"}], "owner": {"reputation": 2550, "user_id": 1540482, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5934b46f20758804d91d4f7570282daa?s=128&d=identicon&r=PG", "display_name": "15412s", "link": "https://stackoverflow.com/users/1540482/15412s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 277, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1468421194, "creation_date": 1468419967, "last_edit_date": 1468421194, "question_id": 38354453, "link": "https://stackoverflow.com/questions/38354453/how-come-ldd-reference-appears-twice-for-openssl-binary", "title": "How come ldd reference appears twice for openssl binary?", "body": "<p>For some reason reference to libcrypto appears twice while executing \"ldd\".\nWhy? does the binary selects the second instance of libcrypto?</p>\n\n<pre><code>root# ldd openssl | grep libcrypto\n        libcrypto.so.1.0.0 =&gt;    /server/lib/libcrypto.so.1.0.0\n        libcrypto.so.1.0.0 =&gt;    /lib/libcrypto.so.1.0.0\n</code></pre>\n"}]