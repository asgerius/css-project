[{"tags": ["c++", "macos", "c++11", "compilation", "clang"], "answers": [{"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1423700851, "post_id": 28467015, "comment_id": 45259907, "body": "Well, if <code>&lt;iostream&gt;</code> includes <code>&lt;time.h&gt;</code>, it&#39;s non-conformant. The same for including <code>&lt;ctime&gt;</code>."}, {"owner": {"reputation": 368, "user_id": 1565006, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/351e38d5e67d0630671af21311ce7f5e?s=128&d=identicon&r=PG", "display_name": "aliak", "link": "https://stackoverflow.com/users/1565006/aliak"}, "edited": false, "score": 0, "creation_date": 1423700933, "post_id": 28467015, "comment_id": 45259931, "body": "Yeah I ended up doing the namespace thing. And aww man you&#39;re right about ctime actually including time.h. I still can&#39;t understand why though, I thought cname headers were exact copies of name.h headers but in the std namespace. If C code includes time.h it shouldn&#39;t be a problem for C++ compilers, but if C++ code wants to use ctime, it should get what it&#39;s after."}, {"owner": {"reputation": 368, "user_id": 1565006, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/351e38d5e67d0630671af21311ce7f5e?s=128&d=identicon&r=PG", "display_name": "aliak", "link": "https://stackoverflow.com/users/1565006/aliak"}, "edited": false, "score": 0, "creation_date": 1423701061, "post_id": 28467015, "comment_id": 45259963, "body": "Seems like pthread.h is the culprit with the iostream. You can pass in -H to the compiler and it&#39;ll print out the include tree"}, {"owner": {"reputation": 368, "user_id": 1565006, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/351e38d5e67d0630671af21311ce7f5e?s=128&d=identicon&r=PG", "display_name": "aliak", "link": "https://stackoverflow.com/users/1565006/aliak"}, "edited": false, "score": 0, "creation_date": 1423701157, "post_id": 28467015, "comment_id": 45260007, "body": "Oh look at this lovely extract: &quot;In the C++ standard library, however, the declarations (except for names which are defined as macros in C) are within namespace scope (3.3.6) of the namespace std. <b>It is unspecified whether these names are first declared within the global namespace scope and are then injected into namespace std by explicit using-declarations</b>&quot; :("}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 368, "user_id": 1565006, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/351e38d5e67d0630671af21311ce7f5e?s=128&d=identicon&r=PG", "display_name": "aliak", "link": "https://stackoverflow.com/users/1565006/aliak"}, "edited": false, "score": 0, "creation_date": 1423701534, "post_id": 28467015, "comment_id": 45260104, "body": "@aliak: What about it? No C header (or C++ header for C standard-library facilities) may be included by any C++ standard header. Though I agree it would be nice if the former guaranteed only to add to global scope and the latter to only add to namespace std..."}, {"owner": {"reputation": 368, "user_id": 1565006, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/351e38d5e67d0630671af21311ce7f5e?s=128&d=identicon&r=PG", "display_name": "aliak", "link": "https://stackoverflow.com/users/1565006/aliak"}, "edited": false, "score": 0, "creation_date": 1423701969, "post_id": 28467015, "comment_id": 45260210, "body": "@duplicator: I guess for library implementors as long as the C++ header is conformant, it doesn&#39;t matter how it&#39;s made. Including a C header or some other random file that does exactly what that C header would&#39;ve done anyway is irrelevant no?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1423709013, "post_id": 28467015, "comment_id": 45262086, "body": "[extern.names]/p3 says that &quot;Each name from the Standard C library declared with external linkage is reserved to the implementation for use as a name with extern &quot;C&quot; linkage, both in namespace std and in the global namespace.&quot; @Deduplicator What&#39;s non-conforming? [res.on.headers]/p1 says that &quot;A C++ header may include other C++ headers.&quot; <code>&lt;ctime&gt;</code> is a C++ header."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1423711042, "post_id": 28467015, "comment_id": 45262580, "body": "@T.C.: Take a look at [res.on.headers]: &quot;1 A C++ header may include other C++ headers. [...] 2 Certain types and macros are defined in more than one header. Every such entity shall be defined such that any header that defines it may be included after any other header that also defines it (3.2). 3 The C standard headers (D.5) shall include only their corresponding C++ standard header, as described in 17.6.1.2.&quot; If those headers for C standard library facilities were allowed to be included, paragraph 3 were nonsensical. And your quote does not touch upon which definitions are provided in headers"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1423712868, "post_id": 28467015, "comment_id": 45263016, "body": "@Deduplicator The alternative reading is just as nonsensical; it implies that, for instance, no C++ header may include <code>&lt;cstddef&gt;</code> for <code>nullptr_t</code> or <code>size_t</code>. I&#39;m not aware of any implementation that follows that reading."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1423714138, "post_id": 28467015, "comment_id": 45263345, "body": "@T.C.: Implementations ignoring the stadard in this regard would not make it nonsensical. And anyway, this seems not to be the case in e.g. libstdc++."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1423714594, "post_id": 28467015, "comment_id": 45263461, "body": "@Deduplicator libstdc++&#39;s <code>&lt;regex&gt;</code>, for instance, includes <code>&lt;cstring&gt;</code>; its <code>&lt;chrono&gt;</code> includes <code>&lt;ctime&gt;</code>."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1423714740, "post_id": 28467015, "comment_id": 45263495, "body": "@T.C.: Seems I looked in the wrong corner for non-conformancy then, as the headers I checked were ok."}, {"owner": {"reputation": 368, "user_id": 1565006, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/351e38d5e67d0630671af21311ce7f5e?s=128&d=identicon&r=PG", "display_name": "aliak", "link": "https://stackoverflow.com/users/1565006/aliak"}, "edited": false, "score": 0, "creation_date": 1423733157, "post_id": 28467015, "comment_id": 45271119, "body": "@Duplicator: &quot;3 The C standard headers (D.5) shall include only their corresponding C++ standard header, as described in 17.6.1.2.&quot; And 17.6.1.2 goes back to the other thing, so it does seem like a correction somewhere is needed. See this too: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html</a> (specifically, defect 456)"}], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 5, "last_activity_date": 1423699910, "last_edit_date": 1423699910, "creation_date": 1423699486, "answer_id": 28467015, "question_id": 28466909, "link": "https://stackoverflow.com/questions/28466909/c-redefinition-of-variable-global-namespace-polluted-and-i-dont-know-why/28467015#28467015", "title": "C++ redefinition of variable, global namespace polluted and I don&#39;t know why", "body": "<p><code>time()</code> is a function in standard C, which means that it's living outside a namespace so that \"old\" C code can be compiled with C++ compilers without having lots of <code>using namespace std</code> thrown in all over the place.</p>\n\n<p>The header <code>time.h</code> is apparently included when you include <code>&lt;iostream&gt;</code>, which is why you get a reference to that. </p>\n\n<p>Either don't use that name, or add <code>namespace MyName { int time; };</code> and then use <code>MyName::time</code> when you want to refer to your variable. </p>\n\n<p>[I don't know the exact place, but I beleive the C++ standard states that \"existing standard library functions may or may not exist outside of the <code>std::</code> namespace when you include for example <code>&lt;ctime&gt;</code> - the actual implementation of <code>&lt;ctime&gt;</code> does almost certainly include regular <code>&lt;time.h&gt;</code> somewhere.]</p>\n\n<p>For example in the g++ 4.9.2 headers on my linux box:</p>\n\n<pre><code>....\n#pragma GCC system_header\n\n#include &lt;bits/c++config.h&gt;\n#include &lt;time.h&gt;\n\n#ifndef _GLIBCXX_CTIME\n#define _GLIBCXX_CTIME 1\n\n ...     \nnamespace std\n{\n  ...\n  using ::time;\n  ...\n} // namespace\n</code></pre>\n\n<p>The one in libcxx looks almost identical.</p>\n"}], "owner": {"reputation": 368, "user_id": 1565006, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/351e38d5e67d0630671af21311ce7f5e?s=128&d=identicon&r=PG", "display_name": "aliak", "link": "https://stackoverflow.com/users/1565006/aliak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 704, "favorite_count": 0, "accepted_answer_id": 28467015, "answer_count": 1, "score": 6, "last_activity_date": 1423701335, "creation_date": 1423698906, "last_edit_date": 1423701335, "question_id": 28466909, "link": "https://stackoverflow.com/questions/28466909/c-redefinition-of-variable-global-namespace-polluted-and-i-dont-know-why", "title": "C++ redefinition of variable, global namespace polluted and I don&#39;t know why", "body": "<p>so I think I've done something really stupid and I just can't figure this out. The following program is causing me a lot of pain:</p>\n\n<pre><code>#include &lt;iostream&gt;\nint time = 0;\nint main(int argc, char **argv) {\n    std::cout &lt;&lt; \"hi\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>My compile string is: <code>clang++ -std=c++1y --verbose -stdlib=libc++ main.cpp -o main</code>. The redefinition error is <code>/usr/include/time.h:116:8: note: previous definition is here</code> and the <code>--verbose</code> shows me this as the include path order:</p>\n\n<pre><code>Apple LLVM version 6.0 (clang-600.0.56) (based on LLVM 3.5svn)\nTarget: x86_64-apple-darwin14.1.0\nThread model: posix\n \"/Library/Developer/CommandLineTools/usr/bin/clang\" -cc1 -triple x86_64-apple-macosx10.10.0 -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -main-file-name main.cpp -mrelocation-model pic -pic-level 2 -mdisable-fp-elim -masm-verbose -munwind-tables -target-cpu core2 -target-linker-version 241.9 -v -resource-dir /Library/Developer/CommandLineTools/usr/bin/../lib/clang/6.0 -stdlib=libc++ -std=c++1y -fdeprecated-macro -fdebug-compilation-dir /Users/aliak/dev/atom/sim -ferror-limit 19 -fmessage-length 0 -stack-protector 1 -mstackrealign -fblocks -fobjc-runtime=macosx-10.10.0 -fencode-extended-block-signature -fcxx-exceptions -fexceptions -fdiagnostics-show-option -vectorize-slp -o /var/folders/r_/pmd7rtcd4h35dqsf496nyzsh0000gn/T/main-d500bd.o -x c++ /Users/aliak/dev/atom/sim/main.cpp\nclang -cc1 version 6.0 based upon LLVM 3.5svn default target x86_64-apple-darwin14.1.0\nignoring nonexistent directory \"/usr/include/c++/v1\"\n#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n /Library/Developer/CommandLineTools/usr/bin/../include/c++/v1\n /usr/local/include\n /Library/Developer/CommandLineTools/usr/bin/../lib/clang/6.0/include\n /Library/Developer/CommandLineTools/usr/include\n /usr/include\n /System/Library/Frameworks (framework directory)\n /Library/Frameworks (framework directory)\n</code></pre>\n\n<p>I just can't figure out what's wrong. If I add in <code>-nostdinc++</code> to the command line args to clang and then remove the iostream include, but keep the time var, it's all ok. Which I guess means the iostream is including time.h. But I am quite confused, should it not include ctime instead of time.h, which would wrap everything in the std namespace?</p>\n\n<p>I've tried deleting xcode and reinstalling as well. </p>\n\n<p><strong>Update:</strong></p>\n\n<p>The comment from Mats made me do a little bit more snooping. So passing in -H to clang++ prints out the header tree. And it turns out that pthread.h is the one actually including time.h. But ctime also actually includes time.h. And this seems according to the standard because: \"In the C++ standard library, however, the declarations (except for names which are defined as macros in C) are within namespace scope (3.3.6) of the namespace std. <strong>It is unspecified whether these names are first declared within the global namespace scope and are then injected into namespace std by explicit using-declarations</strong>\"</p>\n"}, {"tags": ["c++", "enums"], "answers": [{"comments": [{"owner": {"reputation": 17406, "user_id": 1613983, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lAhj3.png?s=128&g=1", "display_name": "quant", "link": "https://stackoverflow.com/users/1613983/quant"}, "edited": false, "score": 0, "creation_date": 1423699099, "post_id": 28466942, "comment_id": 45259374, "body": "But how can I use a function to return a type?"}, {"owner": {"reputation": 15322, "user_id": 291737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/432bda8139dee981e1411f40cab0a13e?s=128&d=identicon&r=PG", "display_name": "StilesCrisis", "link": "https://stackoverflow.com/users/291737/stilescrisis"}, "reply_to_user": {"reputation": 17406, "user_id": 1613983, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lAhj3.png?s=128&g=1", "display_name": "quant", "link": "https://stackoverflow.com/users/1613983/quant"}, "edited": false, "score": 0, "creation_date": 1423699208, "post_id": 28466942, "comment_id": 45259418, "body": "Well, there&#39;s always <code>decltype</code>."}, {"owner": {"reputation": 17406, "user_id": 1613983, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lAhj3.png?s=128&g=1", "display_name": "quant", "link": "https://stackoverflow.com/users/1613983/quant"}, "edited": false, "score": 0, "creation_date": 1423699320, "post_id": 28466942, "comment_id": 45259450, "body": "I can&#39;t hide that from the user though, I&#39;d essentially be asking the user to decltype a function that can never be called, it&#39;s messy but I guess it would work. I was hoping to avoid exposing implementation details like this, so the user would just see a simple metafunction."}, {"owner": {"reputation": 15322, "user_id": 291737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/432bda8139dee981e1411f40cab0a13e?s=128&d=identicon&r=PG", "display_name": "StilesCrisis", "link": "https://stackoverflow.com/users/291737/stilescrisis"}, "reply_to_user": {"reputation": 17406, "user_id": 1613983, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lAhj3.png?s=128&g=1", "display_name": "quant", "link": "https://stackoverflow.com/users/1613983/quant"}, "edited": false, "score": 0, "creation_date": 1423714203, "post_id": 28466942, "comment_id": 45263361, "body": "Well, <code>Convert&lt;Enum::VALUE&gt;::type</code> is slightly cleaner than <code>decltype(Convert&lt;Enum::VALUE&gt;())</code> but it&#39;s not as if either one is amazingly elegant and beautiful."}], "owner": {"reputation": 15322, "user_id": 291737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/432bda8139dee981e1411f40cab0a13e?s=128&d=identicon&r=PG", "display_name": "StilesCrisis", "link": "https://stackoverflow.com/users/291737/stilescrisis"}, "is_accepted": false, "score": 2, "last_activity_date": 1423718781, "last_edit_date": 1423718781, "creation_date": 1423699062, "answer_id": 28466942, "question_id": 28466892, "link": "https://stackoverflow.com/questions/28466892/can-i-template-the-type-of-a-template-value-parameter/28466942#28466942", "title": "Can I template the type of a template value parameter?", "body": "<p>Functions can deduce template parameters; classes cannot. That's why std has functions like <code>make_pair</code> as a complement to the <code>pair</code> class.</p>\n\n<p>You can use a similar strategy.</p>\n\n<p>For instance, you can declare a templated <code>Convert</code> function and then extract its return type via <code>decltype(Convert&lt;Enum::VALUE&gt;())</code>.</p>\n"}], "owner": {"reputation": 17406, "user_id": 1613983, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lAhj3.png?s=128&g=1", "display_name": "quant", "link": "https://stackoverflow.com/users/1613983/quant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423718781, "creation_date": 1423698796, "question_id": 28466892, "link": "https://stackoverflow.com/questions/28466892/can-i-template-the-type-of-a-template-value-parameter", "title": "Can I template the type of a template value parameter?", "body": "<p>Suppose I want to create a struct that converts the value of an enum to a meta int, such as <code>boost::mpl::int_</code>. I could do something like this:</p>\n\n<pre><code>template &lt;typename Enum, Enum value&gt;\nstruct Convert\n{\n  using type = boost::mpl::int_&lt;static_cast&lt;int&gt;(value)&gt;;\n};\n</code></pre>\n\n<p>This would work fine, but to call it I'd have to write <code>Convert&lt;Enum, Enum::VALUE&gt;::type</code>. Is it possible to write a class so I simply have to write <code>Convert&lt;Enum::VALUE&gt;::type</code> to have <code>Convert</code> <em>deduce</em> the type of <code>Enum</code>?</p>\n\n<p>I don't know the type of <code>Enum</code>, so <code>Convert</code> should be able to take <em>any</em> enum. I'd like to avoid macros.</p>\n"}, {"tags": ["c++", "overloading"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 3, "creation_date": 1423698971, "post_id": 28466864, "comment_id": 45259323, "body": "<code>F2</code> defines <code>jVector * double</code>, not <code>double * jVector</code>.  C++ doesn&#39;t assume those two operations have the same meaning."}], "answers": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1423699003, "creation_date": 1423699003, "answer_id": 28466935, "question_id": 28466864, "link": "https://stackoverflow.com/questions/28466864/overloading-multiplication-operator-twice-as-a-member-function/28466935#28466935", "title": "Overloading * multiplication operator twice as a member function?", "body": "<p>For member function operator overloads, the <strong>first operand</strong> must be an object of the class.  The parameter of the overloaded function is the second operand. So:</p>\n\n<pre><code>double operator* (double f){\n</code></pre>\n\n<p>only applies to the case where you are doing <code>a_vector * a_double</code>, and not to <code>a_double * a_vector</code>.</p>\n\n<p>For this reason (and others) it's generally better to use non-member functions for overloaded operators.  The way I would suggest doing it is:</p>\n\n<pre><code>// member function\njVector &amp; jVector::operator*=( double f )\n{\n    x *= f;\n    y *= f;\n    return *this;\n}\n\n// free functions\njVector operator* (double f, jVector V) { return V *= f; }\njVector operator* (jVector V, double f) { return V *= f; }\n</code></pre>\n"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 2, "last_activity_date": 1423699091, "creation_date": 1423699091, "answer_id": 28466947, "question_id": 28466864, "link": "https://stackoverflow.com/questions/28466864/overloading-multiplication-operator-twice-as-a-member-function/28466947#28466947", "title": "Overloading * multiplication operator twice as a member function?", "body": "<p>It doesn't work as a member function because your F2 alternative takes a <code>jVector</code> as the first operand ALWAYS (it is a member function, so you don't have a choice of what the first argument is - it is <code>jVector *this</code> [hidden by the language]). The compiler could in theory allow the two operands to swap place (it could for <code>x * 2.0</code> convert to <code>2.0 * x</code> for regular math operations, but since operator overloads aren't made to be \"swapped around\", that wouldn't be very good if the compiler DID re-arrange them) </p>\n\n<p>For the first operand to be <code>double</code>, you need a freestanding function.</p>\n"}], "owner": {"reputation": 313, "user_id": 4333939, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Yact1.jpg?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/4333939/johan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2796, "favorite_count": 0, "accepted_answer_id": 28466947, "answer_count": 2, "score": 1, "last_activity_date": 1423700082, "creation_date": 1423698702, "last_edit_date": 1495542440, "question_id": 28466864, "link": "https://stackoverflow.com/questions/28466864/overloading-multiplication-operator-twice-as-a-member-function", "title": "Overloading * multiplication operator twice as a member function?", "body": "<p>Scroll down for TL:DR.</p>\n\n<p>This question is similar to <a href=\"https://stackoverflow.com/questions/23260910/overload-an-operator-twice\">this</a> one, but has some differences. It concerns overloading the <code>*</code> operator twice for a class called <code>jVector</code>, which simply represents a two-dimensional cartesian vector.</p>\n\n<p>The first type of multiplication is <code>jVector * jVector</code>, or a <a href=\"http://en.wikipedia.org/wiki/Dot_product\" rel=\"nofollow noreferrer\">dot product</a>. The second type is multiplication by a real number, <code>double * jVector</code>. This simply returns a vector with its entries multiplied by the double.</p>\n\n<p>Here is some code to illustrate what I'm trying to do:</p>\n\n<pre><code>class jVector{\n    public:\n        double x, y;\n\n        jVector(double x_val = 0., double y_val = 0.){\n            x = x_val;\n            y = y_val;\n        }\n\n        //Operator overload functions\n        //[...]\n\n        //F1: Dot product (WORKS)\n        double operator* (jVector&amp; factor){\n            double result;\n            result = x * factor.x;\n            result += y * factor.y;\n            return result;\n        }\n\n        //F2: Real number multiplication (DOES NOT WORK)\n        jVector operator* (double f){\n            jVector result;\n            result.x = x * f;\n            result.y = y * f;\n            return result;\n        }\n\n        //[...]\n}\n\n//F3: As a non-member (WORKS)\njVector operator* (double f, jVector V){\n    jVector result;\n    result.x = V.x * f;\n    result.y = V.y * f;\n    return result;\n}\n</code></pre>\n\n<p>The three relevant functions are marked <code>F1</code>, <code>F2</code> and <code>F3</code>. The functions <code>F2</code> and <code>F3</code> are never defined at the same time (I comment out one of them to test the other).</p>\n\n<p>Here is the result of trying to express something like <code>2.0 * Foo</code>, where <code>Foo</code> is a vector of type <code>jVector</code>. The operation works as expected when using <code>F3</code>, the function which is defined outside the class. However, when using only <code>F2</code>, the member function, an error is raised which says <code>no match for 'operator*' in '2 * Foo'</code>.</p>\n\n<p>This is the same type of error which you get if you don't overload an operator at all, suggesting that I didn't define <code>F2</code> properly, or <code>F2</code> is conflicting with <code>F1</code>.</p>\n\n<p>I'm fairly certain my problem is different from the one in the <a href=\"https://stackoverflow.com/questions/23260910/overload-an-operator-twice\">question I mentioned</a> earlier, since <code>F1</code> and <code>F2</code> have different return types <strong>and</strong> argument types.</p>\n\n<p><strong>TL:DR</strong></p>\n\n<p>So here's my question: why am I able to overload <code>*</code> twice, only as long as one of them is defined as a non-member function? Why can't both overload functions be members of the class?</p>\n"}, {"tags": ["c++", "object", "enums"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4557067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd11cfe0fbcb5ebc53fa68cec4e7a27d?s=128&d=identicon&r=PG&f=1", "display_name": "SkAshe", "link": "https://stackoverflow.com/users/4557067/skashe"}, "edited": false, "score": 0, "creation_date": 1423699020, "post_id": 28466890, "comment_id": 45259344, "body": "Thanks for your answer!  Oops, I don&#39;t know what happened, but the #endif is in my .h file.  I specified the class like this &quot;Valeur const Carte::lireValeur()&quot; but now it says &quot;Multiple markers at this line \t- Type &#39;Valeur&#39; could not be resolved \t- Member declaration not found \t- \u2018Valeur\u2019 does not name a type&quot;"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1423699222, "post_id": 28466890, "comment_id": 45259423, "body": "@StenSoft Also the <code>enum</code> type needs to be qualified with scope, when used as a return value, as you&#39;ve clarified in your sample (an explaining sentence would be nice)."}, {"owner": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "edited": false, "score": 0, "creation_date": 1423699701, "post_id": 28466890, "comment_id": 45259582, "body": "Added explanation and fixed wrong position of <code>const</code> qualifier"}, {"owner": {"reputation": 3, "user_id": 4557067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd11cfe0fbcb5ebc53fa68cec4e7a27d?s=128&d=identicon&r=PG&f=1", "display_name": "SkAshe", "link": "https://stackoverflow.com/users/4557067/skashe"}, "edited": false, "score": 0, "creation_date": 1423700298, "post_id": 28466890, "comment_id": 45259771, "body": "Okay now it seems to work in the .cpp file, I added as you said the &quot;Carte::Valeur Carte::lireValeur() const&quot; and there&#39;s no more error, however, now it created another error in my .h file which I don&#39;t understand. Since I changed the method definition, I changed it in the header file too like that: &quot;Carte::Valeur  Carte::lireValeur() const;&quot; but now it says &quot;extra qualification \u2018Carte::\u2019 on member \u2018lireValeur\u2019 [-fpermissive]&quot;. Do you know what I did wrong this time? Thanks a lot to both of you!"}, {"owner": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "edited": false, "score": 0, "creation_date": 1423700913, "post_id": 28466890, "comment_id": 45259927, "body": "Don&#39;t change it in the h file, this definition matches the declaration you had there."}, {"owner": {"reputation": 3, "user_id": 4557067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd11cfe0fbcb5ebc53fa68cec4e7a27d?s=128&d=identicon&r=PG&f=1", "display_name": "SkAshe", "link": "https://stackoverflow.com/users/4557067/skashe"}, "edited": false, "score": 0, "creation_date": 1423701081, "post_id": 28466890, "comment_id": 45259973, "body": "Yeah I just found why it doesn&#39;t work, I feel a bit dumb now. :P  It works, thanks a lot for your help :)"}], "owner": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "is_accepted": false, "score": 2, "last_activity_date": 1423699679, "last_edit_date": 1423699679, "creation_date": 1423698786, "answer_id": 28466890, "question_id": 28466851, "link": "https://stackoverflow.com/questions/28466851/read-an-enum-from-a-header-file-in-a-cpp-file-c/28466890#28466890", "title": "Read an enum from a header file in a .cpp file (C++)", "body": "<p>The methods in the <code>cpp</code> file are not specified as methods of a class. You need to specify the class name in their definition, e.g.:</p>\n\n<pre><code>Carte::Valeur Carte::lireValeur() const\n</code></pre>\n\n<p>Some of the returned enum types are not qualified with the class name either, eg. the one fixed in this example was not. Returned types need to be fully qualified becuase the scope of the method (the class they are in) is not yet known; or you can use the alternative function syntax where the return type is specified after the method name so the scope is known:</p>\n\n<pre><code>auto Carte::lireValeur() const -&gt; Valeur\n</code></pre>\n\n<p>Also fixed in my example is that the <code>const</code> qualifier is for the method (so it comes after the method name), not the return type.</p>\n"}], "owner": {"reputation": 3, "user_id": 4557067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd11cfe0fbcb5ebc53fa68cec4e7a27d?s=128&d=identicon&r=PG&f=1", "display_name": "SkAshe", "link": "https://stackoverflow.com/users/4557067/skashe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423699679, "creation_date": 1423698628, "question_id": 28466851, "link": "https://stackoverflow.com/questions/28466851/read-an-enum-from-a-header-file-in-a-cpp-file-c", "title": "Read an enum from a header file in a .cpp file (C++)", "body": "<p>First off, sorry for my English, I'm a French Canadian.</p>\n\n<p>I have a homework to do: a solitaire game. The problem is that I'm stuck at the obligatory enum step. I need to use an enum for my cards.</p>\n\n<p>Here's the code:</p>\n\n<p>Carte.h:</p>\n\n<pre><code>#ifndef CARTE_H_\n#define CARTE_H_\n\nclass Carte\n{\npublic:\n\n    enum Sorte\n    {\n        coeur, pique, carreau, trefle\n    };\n\n    enum Valeur\n    {\n        as, valet, dame, roi\n    };\n\n                  Carte             (Sorte&amp; pSorte, Valeur&amp; pValeur);\n    Sorte         lireSorte         () const;\n    Valeur        lireValeur        () const;\n    bool          ecrireSorte       (Sorte&amp; pSorte);\n    bool          ecrireValeur      (Valeur&amp; pValeur);\n    static bool   validerSorte      (const Sorte&amp; pSorte);\n    static bool   validerValeur     (const Valeur&amp; pValeur);\n\nprivate:\n\n    Sorte  m_sorte;\n    Valeur m_valeur;\n};\n#endif /* CARTE_H_ */\n</code></pre>\n\n<p>And here's the Carte.cpp:</p>\n\n<pre><code>#include \"Carte.h\"\n\nusing namespace std;\n\nCarte::Carte(Sorte&amp; pSorte, Valeur&amp; pValeur)\n{\n    m_sorte = pSorte;\n    m_valeur = pValeur;\n};\n\nCarte::Sorte const lireSorte()\n{\n    return m_sorte;\n};\n\nValeur const lireValeur()\n{\n    return m_valeur;\n};\n\nbool ecrireSorte(Carte::Sorte&amp; pSorte)\n{\n    bool donneeValide = validerSorte(pSorte);\n\n    if (donneeValide)\n    {\n        m_sorte = pSorte;\n    }\n\n    return donneeValide;\n};\n\nbool ecrireValeur(Valeur&amp; pValeur)\n{\n    bool donneeValide = validerValeur(pValeur);\n\n    if (donneeValide)\n    {\n        m_valeur = pValeur;\n    }\n\n    return m_valeur;\n};\n\nstatic bool validerSorte(const Sorte&amp; pSorte)\n{\n    return (pSorte == coeur || pSorte == pique || carreau || trefle);\n};\n\nstatic bool validerValeur(const Valeur&amp; pValeur)\n{\n    return ((pValeur &gt;= 2 &amp;&amp; pValeur &lt;= 10) || (pValeur == as || pValeur == valet || pValeur == dame || pValeur == roi));\n};\n\n#endif /* CARTE_H_ */\n</code></pre>\n\n<p>Everytime that I want to access the private enum(Sorte m_sorte and Valeur m_valeur) in my Carte.cpp, it gives me the following error: </p>\n\n<blockquote>\n  <p>Symbol 'm_valeur' could not be resolved</p>\n</blockquote>\n\n<p>or </p>\n\n<blockquote>\n  <p>\u2018carte\u2019 was not declared in this scope</p>\n</blockquote>\n\n<p>I have really no idea why it's telling me this, I included the .h file so isn't it supposed to know and be able to use my enum? I searched a lot on the internet, and I found people saying that I need to create an object. However, since my Carte.h and Carte.cpp are an object class, how can I create a Carte object my Carte class doesn't even compile?</p>\n\n<p>Thanks and sorry again if I'm unclear!</p>\n"}, {"tags": ["c++", "opengl", "freetype"], "answers": [{"owner": {"reputation": 378, "user_id": 2080170, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/80c2e1e5d54419a69369fd1730592bd0?s=128&d=identicon&r=PG", "display_name": "Rebirth", "link": "https://stackoverflow.com/users/2080170/rebirth"}, "is_accepted": false, "score": 0, "last_activity_date": 1423717140, "last_edit_date": 1423717140, "creation_date": 1423716730, "answer_id": 28469538, "question_id": 28466833, "link": "https://stackoverflow.com/questions/28466833/weird-transformation-when-transforming-glyphs-on-freetype/28469538#28469538", "title": "Weird transformation when transforming glyphs on freetype", "body": "<p>I think it's because you aren't using the metric data properly to render each glyph. In this case I think you would need to get the 'baseline' which is taken from each glyph's bounding box.</p>\n\n<p>Something like this should get it:</p>\n\n<pre><code>FT_GlyphSlot slot = ftFace-&gt;glyph;\nFT_Glyph glyph;\nFT_Get_Glyph(slot, &amp;glyph);\nFT_BBox bbox;\n//get dimensions in pixels\nFT_Glyph_Get_CBox(glyph, FT_GLYPH_BBOX_TRUNCATE, &amp;bbox);\nint baseLine = (int)bbox.yMin;\n</code></pre>\n\n<p>Oh, and add that baseline to your Y position.</p>\n"}, {"owner": {"reputation": 35, "user_id": 3239398, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06b36b2ba047565c1daf35b2a3c1c584?s=128&d=identicon&r=PG&f=1", "display_name": "blastxu", "link": "https://stackoverflow.com/users/3239398/blastxu"}, "is_accepted": true, "score": 0, "last_activity_date": 1423779803, "creation_date": 1423779803, "answer_id": 28489015, "question_id": 28466833, "link": "https://stackoverflow.com/questions/28466833/weird-transformation-when-transforming-glyphs-on-freetype/28489015#28489015", "title": "Weird transformation when transforming glyphs on freetype", "body": "<p>I found out what was wrong, turns out I was understanding the tutorial on the wrong way and that this part:</p>\n\n<pre><code>float x2 = x + g-&gt;bitmap_left * sx;\nfloat y2 = -y - g-&gt;bitmap_top * sy;\nfloat w = g-&gt;bitmap.width * sx;\nfloat h = g-&gt;bitmap.rows * sy;\n\nGLfloat box[4][4] = {\n    {x2,     -y2    , 0, 0},\n    {x2 + w, -y2    , 1, 0},\n    {x2,     -y2 - h, 0, 1},\n    {x2 + w, -y2 - h, 1, 1},\n};\n</code></pre>\n\n<p>Its not a transformation its really vertex information and its bound out like this:</p>\n\n<pre><code>glBufferData(GL_ARRAY_BUFFER, sizeof box, box, GL_DYNAMIC_DRAW);\n</code></pre>\n\n<p>That way you can get every glyph on the screen without the need of a transformation on the shader.</p>\n"}], "owner": {"reputation": 35, "user_id": 3239398, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06b36b2ba047565c1daf35b2a3c1c584?s=128&d=identicon&r=PG&f=1", "display_name": "blastxu", "link": "https://stackoverflow.com/users/3239398/blastxu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 28489015, "answer_count": 2, "score": 0, "last_activity_date": 1423779803, "creation_date": 1423698544, "last_edit_date": 1423779253, "question_id": 28466833, "link": "https://stackoverflow.com/questions/28466833/weird-transformation-when-transforming-glyphs-on-freetype", "title": "Weird transformation when transforming glyphs on freetype", "body": "<p>I am trying to do a simple text rendering engine for a small game I am working on. I tried to follow various tutorials but I never got  the position right on the Y coordinate. </p>\n\n<p>Now I am following this tutorial:\n<a href=\"http://en.wikibooks.org/wiki/OpenGL_Programming/Modern_OpenGL_Tutorial_Text_Rendering_01\" rel=\"nofollow noreferrer\">http://en.wikibooks.org/wiki/OpenGL_Programming/Modern_OpenGL_Tutorial_Text_Rendering_01</a></p>\n\n<p>I know that the glyphs are being loaded properly because I checked by them manually. \nThe problem is that the glyphs look now like this:\n<img src=\"https://i.stack.imgur.com/STVeL.png\" alt=\"enter image description here\"> </p>\n\n<p>The white things are supposed to be the glyphs I am trying to draw, but the appear highly distorted.</p>\n\n<p>I think the problem is in the transformation, which looks like this:</p>\n\n<pre><code>float x2 = x + g-&gt;bitmap_left * sx;\nfloat y2 = -y - g-&gt;bitmap_top * sy;\nfloat w = g-&gt;bitmap.width * sx;\nfloat h = g-&gt;bitmap.rows * sy;\n\nGLfloat box[4][4] = {\n    {x2,     -y2    , 0, 0},\n    {x2 + w, -y2    , 1, 0},\n    {x2,     -y2 - h, 0, 1},\n    {x2 + w, -y2 - h, 1, 1},\n};\n</code></pre>\n\n<p>Because it doesn't really look like an transformation without rotation, I think its rotating the glyphs and scaling them on weird ways.</p>\n\n<p>But if I try to use glm like this</p>\n\n<pre><code>glm::mat4 MVP(glm::scale(glm::rotate(glm::translate(glm::mat4(1.0f), glm::vec3(x2, y2, 0.0f)), 0.0f, glm::vec3(0.0f, 0.0f, 1.0f)), glm::vec3(w, h, 0.0f)));\n</code></pre>\n\n<p>The string looks almost correct but it doesn't have the correct Y position.</p>\n\n<p>Can you please point me in the right direction?</p>\n\n<p><img src=\"https://i.stack.imgur.com/KDPMP.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c++", "file", "directx", "shader"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 1499595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8022c1fc654eca50892988c8b137a8e?s=128&d=identicon&r=PG", "display_name": "Bryce Rolles", "link": "https://stackoverflow.com/users/1499595/bryce-rolles"}, "edited": false, "score": 0, "creation_date": 1423703321, "post_id": 28467464, "comment_id": 45260584, "body": "Passing in bytes by reference fixed the issue. Thanks!"}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1423760211, "post_id": 28467464, "comment_id": 45288547, "body": "Be sure to also use the&quot;rb&quot; option."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1423760287, "post_id": 28467464, "comment_id": 45288601, "body": "You might find the &quot;ReadData.h&quot; helper in the <a href=\"https://directxtk.codeplex.com/wikipage?title=Writing%20custom%20shaders&amp;referringTitle=Getting%20Started\" rel=\"nofollow noreferrer\">DirectX Tool KIt tutorials</a> useful."}, {"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 0, "creation_date": 1423775212, "post_id": 28467464, "comment_id": 45297258, "body": "Wow, that took me a second, but I recognized Walbourn from somewhere.  Your work is wonderful Chuck!"}], "owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "is_accepted": true, "score": 0, "last_activity_date": 1423702689, "creation_date": 1423702689, "answer_id": 28467464, "question_id": 28466722, "link": "https://stackoverflow.com/questions/28466722/unable-to-load-vertex-shader-from-cso-file-directx-c/28467464#28467464", "title": "Unable to load Vertex Shader from .cso file (DirectX, c++)", "body": "<p>Just few things I noticed could cause some problems.</p>\n\n<pre><code>long readFileBytes(const char *name, char* bytes)\n\nlong readFileBytes(const char *name, char*&amp; bytes) //pass in bytes by reference\n\nfopen_s(&amp;fl, name, \"r\");\n\nfopen_s(&amp;fl, name, \"rb\"); //open file in binary mode\n</code></pre>\n\n<p>Finally don't forget to free bytes after you created the shader.</p>\n\n<pre><code>free(bytes);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 1499595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8022c1fc654eca50892988c8b137a8e?s=128&d=identicon&r=PG", "display_name": "Bryce Rolles", "link": "https://stackoverflow.com/users/1499595/bryce-rolles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1075, "favorite_count": 0, "accepted_answer_id": 28467464, "answer_count": 1, "score": 0, "last_activity_date": 1423702689, "creation_date": 1423697970, "question_id": 28466722, "link": "https://stackoverflow.com/questions/28466722/unable-to-load-vertex-shader-from-cso-file-directx-c", "title": "Unable to load Vertex Shader from .cso file (DirectX, c++)", "body": "<p>I am trying to load a vertex shader from .cso file that I compiled earlier.</p>\n\n<p>The code that I am using to do it is:</p>\n\n<pre><code>char* bytes = { 0 };\nsize_t fSize = readFileBytes(\"vsTex.cso\", bytes);\n\nhr = d3d11Device-&gt;CreateVertexShader((void*)bytes, fSize, NULL, &amp;TexVertexShader);\nif (hr != S_OK){\n    MessageBox(NULL, \"FAIL\", \"ERROR\", NULL);\n}\n</code></pre>\n\n<p>readFileBytes:</p>\n\n<pre><code>  long readFileBytes(const char *name, char* bytes)\n    {\n        FILE *fl; \n        fopen_s(&amp;fl, name, \"r\");\n        fseek(fl, 0, SEEK_END);\n        long len = ftell(fl);\n        bytes = (char*)malloc(len);\n        fseek(fl, 0, SEEK_SET);\n        fread(bytes, 1, len, fl);\n        fclose(fl);\n        return len;\n    }\n</code></pre>\n\n<p>d3d11Device is a pointer to an ID3D11Device. I had been using D3D11CompileFromFile() to create my vertex shaders witout any errors so there isnt anything wrong with the shader itself as far as I know. </p>\n\n<p>Im not sure if I'm just reading the file incorrectly or if there is something else I have to do to it before giving the function the bytes.</p>\n"}, {"tags": ["c++", "inheritance", "operator-overloading"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1423697425, "post_id": 28466572, "comment_id": 45258778, "body": "Please, show in your question, the definitions of Teacher and Employee."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1423697445, "post_id": 28466572, "comment_id": 45258788, "body": "Any relevant code to this that you could post? A COMPLETE example would be REALLY nice, but at least the code that sets <code>accessEmploye_</code> to  different values would be a start..."}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1423718669, "post_id": 28466627, "comment_id": 45264644, "body": "Hate when that happens =("}], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1423698724, "last_edit_date": 1423698724, "creation_date": 1423697416, "answer_id": 28466627, "question_id": 28466572, "link": "https://stackoverflow.com/questions/28466572/overriding-of-operator-in-c/28466627#28466627", "title": "Overriding of operator&lt;&lt; in c++", "body": "<p>You can use a cast:</p>\n\n<pre><code>os &lt;&lt; static_cast&lt;const Employe &amp;&gt;(pTeacher);\n</code></pre>\n\n<p>The <code>&amp;</code> is important. </p>\n\n<p>To make the call to the member function call <code>Teacher::getLevelAccess()</code> from an <code>Employe</code> reference, you have to make that function virtual. (Do this in <code>teacher.h</code>).  <code>getClass()</code> should be <code>virtual</code> also.</p>\n\n<hr>\n\n<p>NB. You keep saying things like \"Override of <code>operator&lt;&lt;</code> in Employe :\" , however you do not have overloaded <code>operator&lt;&lt;</code> in Employe . You have a free function which takes <code>Employe</code> as argument.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 4556976, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-x6H7FfYItK0/AAAAAAAAAAI/AAAAAAAAAAs/d0Nky5EWV4w/photo.jpg?sz=128", "display_name": "Aymeric", "link": "https://stackoverflow.com/users/4556976/aymeric"}, "edited": false, "score": 0, "creation_date": 1423699524, "post_id": 28466862, "comment_id": 45259517, "body": "It&#39;s a good idea but my teacher says :  &quot;In Teacher, use a friend function operator &lt;&lt; to print all the attributes of Teacher (Think to use the operator&lt;&lt; of Employe)&quot;.  And I can&#39;t create an other function (I have a paper that says all the function that I have to create)."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 21, "user_id": 4556976, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-x6H7FfYItK0/AAAAAAAAAAI/AAAAAAAAAAs/d0Nky5EWV4w/photo.jpg?sz=128", "display_name": "Aymeric", "link": "https://stackoverflow.com/users/4556976/aymeric"}, "edited": false, "score": 0, "creation_date": 1423699572, "post_id": 28466862, "comment_id": 45259535, "body": "@Aymeric, ok, then use Matt&#39;s suggestion with the casting."}], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": false, "score": 2, "last_activity_date": 1423699191, "last_edit_date": 1423699191, "creation_date": 1423698702, "answer_id": 28466862, "question_id": 28466572, "link": "https://stackoverflow.com/questions/28466572/overriding-of-operator-in-c/28466862#28466862", "title": "Overriding of operator&lt;&lt; in c++", "body": "<p>What I'd do is the following: define only one </p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream&amp; os, const Employe&amp; pEmploye)\n{\n    return pEmploye.display(os);\n}\n</code></pre>\n\n<p>for the base of the hierarchy,\nin which you call a protected member function <code>virtual display()</code> that is overridden by each derived class and to which the display is being delegated. This is sometime call the NVI (non-virtual interface) idiom. It works like this:</p>\n\n<pre><code>class Employee\n{\n    // ...\n    friend ostream&amp; operator&lt;&lt;(ostream&amp; os, const Employee&amp; pEmployee)\n    {\n        return pEmployee.display(os);\n    }\nprotected:\n    virtual ostream&amp; display(ostream&amp; os) const\n    {\n        // implement it here\n        return os;\n    }\n};\n\nclass Teacher: public Employee\n{\n    // ....\nprotected:\n    ostream&amp; display(ostream&amp; os) const override\n    {\n        // implement it here\n        return os;\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4556976, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-x6H7FfYItK0/AAAAAAAAAAI/AAAAAAAAAAs/d0Nky5EWV4w/photo.jpg?sz=128", "display_name": "Aymeric", "link": "https://stackoverflow.com/users/4556976/aymeric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1423699191, "creation_date": 1423697199, "last_edit_date": 1423698383, "question_id": 28466572, "link": "https://stackoverflow.com/questions/28466572/overriding-of-operator-in-c", "title": "Overriding of operator&lt;&lt; in c++", "body": "<p>I'm working on a project for my school in C++</p>\n\n<p>I have 2 class : Employe and Teacher.\nTeacher derived from Employe and has overrides of his functions.</p>\n\n<p>We override the operator <code>&lt;&lt;</code> to print some information of the Employes or Teachers.\nEach class has a <code>const int attribute LevelAcces_</code>.\nFor <strong>Employe</strong>, it's <strong>5</strong> and for <strong>Teacher</strong> it's <strong>20</strong>.</p>\n\n<p>when I create an Teacher in my main.cpp, I call the override of operator&lt;&lt; of Teacher to print his information.\nSo this function is called :</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream&amp; os, const Teacher&amp; pTeacher){\n    os &lt;&lt; (pTeacher);\n    return os;\n}\n</code></pre>\n\n<p>But, the <strong>function calls itself</strong> with the line <code>\"os &lt;&lt; (pTeacher);\"</code> and <strong>does a loop that causes a stack overflow</strong>.</p>\n\n<p><strong>I want that the line <code>\"os &lt;&lt; (pTeacher)\"</code> calls the operator&lt;&lt; of my class Employe and not of my class Teacher.</strong></p>\n\n<p>Override of operator&lt;&lt; in Employe :</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream&amp; os, const Employe&amp; pEmploye){\n    os &lt;&lt; \"Name: \" &lt;&lt; pEmploye.name_ &lt;&lt; endl;\n    os &lt;&lt; \"Class: \" &lt;&lt; pEmploye.getClass() &lt;&lt; endl;\n    os &lt;&lt; \"LevelAcces: \" &lt;&lt; pEmploye.getLevelAccess() &lt;&lt; endl;\n    return os;\n}\n</code></pre>\n\n<p>I tried to cast my Teacher into Employe but when it prints the message, LevelAcces is 5 (and I want 20, because my Employe is a Teacher).</p>\n\n<p>I also tried to use Employe::operator&lt;&lt; but operator&lt;&lt; is not a member of Employe so it doesn't work...</p>\n\n<p>So, here is my question :</p>\n\n<p><strong>How can I do to use my operator&lt;&lt; of Employe in my operator&lt;&lt; of Teacher and print the right information (LevelAccess = 20 and not 5) ?</strong></p>\n\n<p><em>I was also thinking of \"virtual\" but our professor tells us that there is not need to use this word.</em></p>\n\n<p>Thanks in advance :)</p>\n\n<p>Here is a more complete code :</p>\n\n<p>main.cpp:</p>\n\n<pre><code>Teacher Garry(\"Garry\");\ncout &lt;&lt; Garry &lt;&lt; endl;\n</code></pre>\n\n<p>Employe.cpp :</p>\n\n<pre><code>#include \"Employe.h\"\n\nusing namespace std;\n\nEmploye::Employe(){\n    name_ = \"\";\n}\n\nEmploye::Employe(string pName){\n    name_ = pName;\n}\n\nstring Employe::getName() const{\n    return name_;\n}\n\nunsigned int Employe::getLevelAccess() const{\n    return levelAccess_;\n}\n\nstring Employe::getClass() const{\n    return typeid(*this).name();\n}\n\nostream&amp; operator&lt;&lt;(ostream&amp; os, const Employe&amp; pEmploye){\n    os &lt;&lt; \"Name: \" &lt;&lt; pEmploye.name_ &lt;&lt; endl;\n    os &lt;&lt; \"Class: \" &lt;&lt; pEmploye.getClass() &lt;&lt; endl;\n    os &lt;&lt; \"LevelAcces: \" &lt;&lt; pEmploye.getLevelAccess() &lt;&lt; endl;\n    return os;\n}\n</code></pre>\n\n<p>With this in Employe.h :</p>\n\n<pre><code>private:\n    static const unsigned int LevelAccess_ = 5;\n</code></pre>\n\n<p>Teacher.cpp :</p>\n\n<pre><code>#include \"teacher.h\"\nusing namespace std;\n\nTeacher::Teacher(string pName){\n    nom_ = pName;\n}\n\nunsigned int Teacher::getLevelAccess() const{\n    return(Employe::getLevelAccess() + accessTeacher_); \n}\nstring Teacher::getClass() const{\n    return typeid(*this).name();\n}\n\nostream&amp; operator&lt;&lt;(ostream&amp; os, const Teacher&amp; pTeacher){\n        os &lt;&lt; (pTeacher);\n        return os;\n}\n</code></pre>\n\n<p>With this is Teacher.h :</p>\n\n<pre><code>static const unsigned int accesTeacher_ = 15;\n</code></pre>\n"}, {"tags": ["c++", "dll", "visual-c++-2010"], "comments": [{"owner": {"reputation": 851, "user_id": 260261, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/iAXqh.png?s=128&g=1", "display_name": "mbadawi23", "link": "https://stackoverflow.com/users/260261/mbadawi23"}, "edited": false, "score": 0, "creation_date": 1423698268, "post_id": 28466486, "comment_id": 45259097, "body": "If you are looking to use a class library, DLLs are usually loaded automatically at run time. You just need make *.h available at link time. And your *.dll files available in the build path. Maybe you could add more details in your question about what is exactly you are trying to accomplish."}], "answers": [{"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "is_accepted": false, "score": 1, "last_activity_date": 1423697462, "last_edit_date": 1495540170, "creation_date": 1423697140, "answer_id": 28466564, "question_id": 28466486, "link": "https://stackoverflow.com/questions/28466486/how-do-i-load-2-different-dlls-in-c/28466564#28466564", "title": "How do I load 2 different dll&#39;s in c++", "body": "<p>That \"Environment\" box doesn't really control which DLLs your program loads.  It's for setting environment variables:\n<a href=\"https://stackoverflow.com/questions/100543/how-do-i-set-specific-environment-variables-when-debugging-in-visual-studio\">How do I set specific environment variables when debugging in Visual Studio?</a></p>\n\n<p>You could specify the PATH variable in there, in which case that would have an effect on <em>where</em> DLLs are loaded from, but it still doesn't specify <em>which</em> DLLs to load (unless you have a very strange program which explicitly uses an environment variable setting to determine the name of a DLL to load with LoadLibrary).</p>\n\n<p>If you want to load a DLL, you either need to (a) make the DLL project a dependency of your executable's project, (b) link to its stub library, or (c) call LoadLibrary().  If you want to load more than one DLL, then just do one of those things again for each DLL.</p>\n"}], "owner": {"reputation": 11, "user_id": 4535346, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QkQw0NuVJ9o/AAAAAAAAAAI/AAAAAAAAAFw/-gkBl3pK7lU/photo.jpg?sz=128", "display_name": "fritzcat12", "link": "https://stackoverflow.com/users/4535346/fritzcat12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1423697462, "creation_date": 1423696777, "question_id": 28466486, "link": "https://stackoverflow.com/questions/28466486/how-do-i-load-2-different-dlls-in-c", "title": "How do I load 2 different dll&#39;s in c++", "body": "<p>How do i load 2 different dll's in visual c++ 2010? I already loaded one, but i dont know how to load another one. I am trying to add them in the 'Environent' area listed under 'Debugging' in my project properties. plz help</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1309, "user_id": 3495829, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39b722b155ba7bb1288a84c00e11e888?s=128&d=identicon&r=PG&f=1", "display_name": "qeadz", "link": "https://stackoverflow.com/users/3495829/qeadz"}, "edited": false, "score": 1, "creation_date": 1423695935, "post_id": 28466271, "comment_id": 45258211, "body": "If you are calling &#39;new&#39;, you&#39;ll need to have a matching &#39;delete&#39; somewhere or they will never be free&#39;d up (ie: they will still be sitting on the heap when the app terminates. the OS will reclaim the memory though)."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1423696523, "post_id": 28466271, "comment_id": 45258436, "body": "Perhaps you&#39;ve forgotten to call <code>initVehicles</code>. Generally, you should instead use constructors to initialize objects: then the compiler guarantees the call for you, and it also guarantees that you don&#39;t get multiple calls."}, {"owner": {"reputation": 105, "user_id": 1285792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7b92b0c5baf1a969bb3d8397680330?s=128&d=identicon&r=PG", "display_name": "jernejl", "link": "https://stackoverflow.com/users/1285792/jernejl"}, "edited": false, "score": 0, "creation_date": 1423751713, "post_id": 28466271, "comment_id": 45282644, "body": "The PaintWidget.cpp I posted wasn&#39;t complete but the initVehicles is called in its constructor."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 1285792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7b92b0c5baf1a969bb3d8397680330?s=128&d=identicon&r=PG", "display_name": "jernejl", "link": "https://stackoverflow.com/users/1285792/jernejl"}, "edited": false, "score": 0, "creation_date": 1423751941, "post_id": 28466421, "comment_id": 45282828, "body": "As you can see I did in fact print out the coordinates, width and height in paintEvent. I got this: 32934224 0 50 20, 31850080 0 50 20, which is completely different from what I expected."}], "owner": {"reputation": 2108, "user_id": 2159051, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G5pGZ.png?s=128&g=1", "display_name": "BWG", "link": "https://stackoverflow.com/users/2159051/bwg"}, "is_accepted": false, "score": 0, "last_activity_date": 1423696517, "creation_date": 1423696517, "answer_id": 28466421, "question_id": 28466271, "link": "https://stackoverflow.com/questions/28466271/static-variable-and-object-life-span-in-c/28466421#28466421", "title": "Static variable and object life span in C++", "body": "<p>You will never have a problem with object life span if you don't use pointers or references. It simply isn't possible for that to occur. The whole concept of \"RAII\" is that if the variable is accessible in code, it is valid.</p>\n\n<p>To test this, also print out the coordinates and size of your vehicle. If that prints a valid result, you know that your issue lies in the paint function itself.</p>\n\n<p>So just don't pass a pointer of the object unless you need to modify it, and even then return a reference instead of a pointer. Just make sure not to return a reference of a temporary, as that CAN lead to life span issues.</p>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 1285792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7b92b0c5baf1a969bb3d8397680330?s=128&d=identicon&r=PG", "display_name": "jernejl", "link": "https://stackoverflow.com/users/1285792/jernejl"}, "edited": false, "score": 0, "creation_date": 1423752279, "post_id": 28466435, "comment_id": 45283069, "body": "You are right. When I deleted this constructor it worked as expected. This constructor was auto generated by netbeans and I completely missed it trying to figure auto where my objects got destroyed."}], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": true, "score": 2, "last_activity_date": 1423696573, "creation_date": 1423696573, "answer_id": 28466435, "question_id": 28466271, "link": "https://stackoverflow.com/questions/28466271/static-variable-and-object-life-span-in-c/28466435#28466435", "title": "Static variable and object life span in C++", "body": "<p>I think your main problem is you have defined an empty copy constructor:</p>\n\n<pre><code>Vehicle::Vehicle(const Vehicle&amp; orig)\n{\n}\n</code></pre>\n\n<p>This means that when you add a <code>Vehicle</code> to a container, a copy is made that doesn't actually copy anything. You should delete your own constructor and let the compiler do the work for you.</p>\n"}], "owner": {"reputation": 105, "user_id": 1285792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7b92b0c5baf1a969bb3d8397680330?s=128&d=identicon&r=PG", "display_name": "jernejl", "link": "https://stackoverflow.com/users/1285792/jernejl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 28466435, "answer_count": 2, "score": -1, "last_activity_date": 1423696676, "creation_date": 1423695761, "last_edit_date": 1423696676, "question_id": 28466271, "link": "https://stackoverflow.com/questions/28466271/static-variable-and-object-life-span-in-c", "title": "Static variable and object life span in C++", "body": "<p>I'm a beginner in C++ and I understand  basic concepts of \"pass-by-value or reference\", object scope and object instantiation with and without use of the keyword \"new\" in simple examples. The problem is that when the problems that I'm trying to solve become more complicated, I don't know how is this theory I know from simple examples applied in problems that consists of multiple classes.</p>\n\n<p>I have a PaintWidget.cpp which is responsible for painting all the Vehicles.</p>\n\n<pre><code>void PaintWidget::paintEvent(QPaintEvent *) {\n   if (!Vehicle::GetVehicles()-&gt;empty()) {\n    cout &lt;&lt; \"not null\" &lt;&lt; endl;\n\n    QPainter painter(this);\n\n    QPen pen1(Qt::red);\n    pen1.setWidth(2);\n\n    std::vector&lt;Vehicle&gt;::iterator it;\n    for (it = Vehicle::GetVehicles()-&gt;begin(); it != Vehicle::GetVehicles()-&gt;end(); it++) {\n        cout &lt;&lt; \"draaaaw\" &lt;&lt; endl;\n        QRect rect(it-&gt;GetXcord(), it-&gt;GetYcord(), it-&gt;GetWidth(), it-&gt;GetHeight());\n        cout &lt;&lt; std::to_string(it-&gt;GetXcord()) + \" \" + std::to_string(it-&gt;GetYcord()) + \" \" + std::to_string(it-&gt;GetWidth()) + \" \" + std::to_string(it-&gt;GetHeight()) + \" \" &lt;&lt; endl;\n        painter.setPen(pen1);\n        painter.drawRect(rect);\n    }\n} else {\n    cout &lt;&lt; \"is null\" &lt;&lt; endl;\n}\n}\n</code></pre>\n\n<p>And then I have Vehicle.h</p>\n\n<pre><code>#ifndef VEHICLE_H\n#define VEHICLE_H\n\n#include &lt;vector&gt;\n#include &lt;map&gt;\n\nclass Vehicle {\npublic:\n    Vehicle();\n    Vehicle(const Vehicle&amp; orig);\n    virtual ~Vehicle();\n\n    void initVehicles();\n\n    Vehicle createVehicle();\n\n    static std::map&lt;Road, int&gt; &amp;GetVeh_num() {\n        return veh_num;\n    }\n\n    static std::vector&lt;Vehicle&gt; *GetVehicles() {\n        return &amp;vehicles;\n    }\n\n\nprivate:\n    int xcord;\n    int ycord;\n    int height = 20;\n    int width = 50;\n    static std::vector&lt;Vehicle&gt; vehicles;\n    static std::map&lt;Road, int&gt; veh_num;\n};\n\n#endif  /* VEHICLE_H */\n</code></pre>\n\n<p>Vehicle.cpp</p>\n\n<pre><code>#include \"Vehicle.h\"\n#include &lt;vector&gt;\n\nstd::vector&lt;Vehicle&gt; Vehicle::vehicles;\nstd::map&lt;Vehicle::Road, int&gt; Vehicle::veh_num = {\n    {Vehicle::Top, 0},\n    {Vehicle::Right, 0},\n    {Vehicle::Bottom, 0},\n    {Vehicle::Left, 0}\n};\n\nVehicle::Vehicle() {\n}\n\nVehicle::Vehicle(const Vehicle&amp; orig) {\n}\n\nVehicle::~Vehicle() {\n}\n\n\nint Vehicle::GetXcord() const {\n    return xcord;\n}\n\nint Vehicle::GetYcord() const {\n    return ycord;\n}\n\nvoid Vehicle::SetXcord(int xcord) {\n    this-&gt;xcord = xcord;\n}\n\nvoid Vehicle::SetYcord(int ycord) {\n    this-&gt;ycord = ycord;\n}\n\nint Vehicle::GetHeight() const {\n    return height;\n}\n\nint Vehicle::GetWidth() const {\n    return width;\n}\n\nvoid Vehicle::initVehicles() {\n    for (int i = 0; i &lt; 5; i++) {\n        Vehicle::vehicles.push_back(this-&gt;createVehicle());\n    }\n}\n\nVehicle Vehicle::createVehicle() {\n    std::map&lt;Vehicle::Road, int&gt;::iterator it;\n    Vehicle v;\n    for (it = Vehicle::veh_num.begin(); it != Vehicle::veh_num.end(); it++) {\n        int &amp;vehnum = it-&gt;second;\n        if (it-&gt;first == Vehicle::Road::Right) {\n            int xc = 520 + vehnum * this-&gt;GetWidth() + vehnum * 5;\n            int yc = 220;\n            v.SetXcord(xc);\n            v.SetYcord(yc);\n            v.SetRoad(Vehicle::Right);\n        }\n    }\n    return v;\n}\n</code></pre>\n\n<p>As you can see, createVehicle returns copy of a new Vehicle which is then inserted in the static variable Vehicles. GetVehicles returns pointer to vector of inserted vehicles because I don't want to return a copy. When I run this code, nothing gets painted although there are 5 objects in the static variable (paintEvent gets called and string \"draaaaw\" is printed 5 times). I suspected that I have a problem with object life span, so I changed</p>\n\n<pre><code>static std::vector&lt;Vehicle&gt; vehicles;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>static std::vector&lt;Vehicle*&gt; vehicles;\n</code></pre>\n\n<p>and of course instantiation of Vehicle from</p>\n\n<pre><code>Vehicle v;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>Vehicle *v = new Vehicle();\n</code></pre>\n\n<p>which creates an object on the heap if I understand correctly. After all required changes in methods, my code works (all objects are painted). What I don't understand is when these objects get destroyed and why, if I'm returning a copy every single time. How come vector vehicles is not empty (I still have 5 \"ghost\" objects that do not contain any values I set earlier). As far as I understand creating objects with new is not recommended, so the second option are smart pointers?</p>\n\n<p>Thanks :)</p>\n\n<p>Edit\nI purposely left out setters and getters in .h and .cpp file so that the code is as short as possible with only relevant information.</p>\n"}, {"tags": ["c++", "arrays", "performance", "vector"], "answers": [{"owner": {"reputation": 18603, "user_id": 4526187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YP5so.jpg?s=128&g=1", "display_name": "JuniorCompressor", "link": "https://stackoverflow.com/users/4526187/juniorcompressor"}, "is_accepted": false, "score": 1, "last_activity_date": 1423695671, "creation_date": 1423695671, "answer_id": 28466243, "question_id": 28466177, "link": "https://stackoverflow.com/questions/28466177/does-a-vector-use-one-more-dereference-to-access-elements-than-stdarray/28466243#28466243", "title": "Does a vector use one more dereference to access elements than std::array?", "body": "<p>I believe so. Vector's underlying array can be reallocated because it needs to expand on successive push backs. So the pointer to this array may change.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1423704685, "post_id": 28466278, "comment_id": 45260977, "body": "<a href=\"http://goo.gl/qSFbuo\" rel=\"nofollow noreferrer\">gcc -O2</a> has the same main loop for <code>vector</code> and <code>int</code>, but it doesn&#39;t realize that it doesn&#39;t need to zero-initialize the vector.  Change -O2 to -O3 and I have no idea what is going on..:)"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1423728146, "post_id": 28466278, "comment_id": 45268487, "body": "I bet -O3 does vectorisaton, so you end up a load of complicated code to deal with SSE/AVX register generation and the fact that 100 doesn&#39;t divide evenly in 4 SSE registers, or whatever?"}], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 1, "last_activity_date": 1423695789, "creation_date": 1423695789, "answer_id": 28466278, "question_id": 28466177, "link": "https://stackoverflow.com/questions/28466177/does-a-vector-use-one-more-dereference-to-access-elements-than-stdarray/28466278#28466278", "title": "Does a vector use one more dereference to access elements than std::array?", "body": "<p>Maybe, sometimes. It largely depends on the circumstances, and how you use it. </p>\n\n<p>Quite often, the overhead can be optimised out, e.g. </p>\n\n<pre><code>vector&lt;int&gt; v(100);\n\nfor(i = 0; i &lt; 100; i++)\n{\n   v[i] = i;\n}\n</code></pre>\n\n<p>should, in a decent compiler, only have ONE extra load instruction to get the internal buffer of the <code>vector</code> before the loop, and then just use that value throughout the loop.</p>\n"}, {"owner": {"reputation": 2214, "user_id": 426625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/752c2878af40a1907e4981b155a51369?s=128&d=identicon&r=PG", "display_name": "Gretchen", "link": "https://stackoverflow.com/users/426625/gretchen"}, "is_accepted": false, "score": 1, "last_activity_date": 1423697695, "creation_date": 1423697695, "answer_id": 28466675, "question_id": 28466177, "link": "https://stackoverflow.com/questions/28466177/does-a-vector-use-one-more-dereference-to-access-elements-than-stdarray/28466675#28466675", "title": "Does a vector use one more dereference to access elements than std::array?", "body": "<p>It is up to the compiler, as Mats said. If we look at a simple example:</p>\n\n<pre><code>#include &lt;vector&gt;\n\nint vector_function(std::vector&lt;int&gt; &amp; v){\n    v[3] = v[1];\n    v[2] = v[4];\n    return v[1];\n}\n\nint array_function(int *a){\n    a[3] = a[1];\n    a[2] = a[4];\n    return a[1];\n}\n</code></pre>\n\n<p>Then compile with gcc -c -O2, and run objdump -S on the .o file, we get:</p>\n\n<pre><code>for vector_function:\n   0:   48 8b 17                mov    (%rdi),%rdx\n   3:   8b 42 04                mov    0x4(%rdx),%eax\n   6:   8b 4a 10                mov    0x10(%rdx),%ecx\n   9:   89 42 0c                mov    %eax,0xc(%rdx)\n   c:   89 4a 08                mov    %ecx,0x8(%rdx)\n   f:   c3                      retq   \n\nfor array_function:\n  10:   8b 47 04                mov    0x4(%rdi),%eax\n  13:   8b 57 10                mov    0x10(%rdi),%edx\n  16:   89 47 0c                mov    %eax,0xc(%rdi)\n  19:   89 57 08                mov    %edx,0x8(%rdi)\n  1c:   c3                      retq   \n</code></pre>\n\n<p>we see that indeed there was only one extra instruction in the vector case (the <code>mov (%rdi),%rdx</code>, which loads the vector's internal pointer)</p>\n\n<p>Note that this only works with optimization (and in particular, with inlining on) - otherwise the disassembly for vector_function is a complete mess (making function calls for each access)</p>\n"}], "owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1423697695, "creation_date": 1423695397, "question_id": 28466177, "link": "https://stackoverflow.com/questions/28466177/does-a-vector-use-one-more-dereference-to-access-elements-than-stdarray", "title": "Does a vector use one more dereference to access elements than std::array?", "body": "<p>To access elements of a std::vector the start of the vector has to be located via dereferencing a vector data member pointer. Does this pointer de-rerefence happen every time a vector element is accessed, or just once?</p>\n"}, {"tags": ["c++", "c++11", "gcc4.9", "gcc5"], "comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1423695421, "post_id": 28466069, "comment_id": 45257999, "body": "@MattMcNabb even if this is the case, then still g++5 should emit at least a warning when compiling without -std=c++11 And the fact that confused me is that even on Stroustroup page, <a href=\"http://www.stroustrup.com/C++11FAQ.html#narrowing\" rel=\"nofollow noreferrer\">stroustrup.com/C++11FAQ.html#narrowing</a>  he talks about &quot;how to prevent narrowing&quot;. IMO, just emitting a warning is not preventing anything."}, {"owner": {"reputation": 5071, "user_id": 1124744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2f7980bcb4c6b1c604cd0f3424f06f84?s=128&d=identicon&r=PG", "display_name": "paulm", "link": "https://stackoverflow.com/users/1124744/paulm"}, "edited": false, "score": 0, "creation_date": 1423695748, "post_id": 28466069, "comment_id": 45258147, "body": "this is teh same as int foo = 1.0f, it compiles everywhere but will generate a warning if the level is high enough (lvl 4 on msvc)"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 5071, "user_id": 1124744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2f7980bcb4c6b1c604cd0f3424f06f84?s=128&d=identicon&r=PG", "display_name": "paulm", "link": "https://stackoverflow.com/users/1124744/paulm"}, "edited": false, "score": 0, "creation_date": 1423695997, "post_id": 28466069, "comment_id": 45258236, "body": "@paulm it is not really the same. One of the &quot;qualities&quot; of brace initialization was this one, preventing narrowing. But it looks like the compiler is just required to emit a warning. On the link above, B. Stroustroup even says: &quot;However, in C++11, {} initialization doesn&#39;t narrow: ...&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1423695911, "post_id": 28466236, "comment_id": 45258201, "body": "Thanks. The fact that confused me is that if you look in the standard, you see the narrowing declarations marked with an <code>&#47;&#47; error</code> comment, same as e.g. <code>int&amp; r; &#47;&#47; error</code>. Now, common sense tells me that when you comment something with <code>error</code>, it should not be compilable. I have to admit that I did not know that &quot;ill-formed programs&quot; are just required to emit a diagnostic and not a compile time error."}, {"owner": {"reputation": 19441, "user_id": 1381108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a55e1b257487441cd435f66bfb413f1?s=128&d=identicon&r=PG", "display_name": "Rapptz", "link": "https://stackoverflow.com/users/1381108/rapptz"}, "edited": false, "score": 0, "creation_date": 1423696110, "post_id": 28466236, "comment_id": 45258277, "body": "This answer would be more complete by stating where in the standard it says this."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1423696163, "post_id": 28466236, "comment_id": 45258298, "body": "@vsoftco   It&#39;s up to gcc/g++&#39;s developers to decide the default setting for whether a particular condition is reported as &quot;error&quot; or &quot;warning&quot;. I presume they try to go with what their userbase would complain about the least"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1423696615, "post_id": 28466236, "comment_id": 45258474, "body": "@MattMcNabb thanks for the effort, I certainly didn&#39;t know this."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1423696897, "post_id": 28466236, "comment_id": 45258591, "body": "Pradhan also makes a good point that the compiler would typically use &quot;warning&quot; for conditions where it has an extension in place"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1423707265, "post_id": 28466236, "comment_id": 45261654, "body": "The C++ standard doesn&#39;t even say <code>#error</code> should not compile, unlike C. See <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#745\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#745</a>"}], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 6, "last_activity_date": 1423707382, "last_edit_date": 1592644375, "creation_date": 1423695644, "answer_id": 28466236, "question_id": 28466069, "link": "https://stackoverflow.com/questions/28466069/g4-9-and-g5-different-behaviour-when-narrowing-in-initializing-list/28466236#28466236", "title": "g++4.9 and g++5 different behaviour when narrowing in initializing list", "body": "<p>The standard never says anything &quot;should not compile&quot;  <STRIKE>(except for <code>#error</code>)</STRIKE>. Certain ill-formed programs must <em>emit a diagnostic</em> and issuing a warning satisfies that.</p>\n<p>You can cause gcc to stop compilation on all diagnostics by using the switch <code>-Werror</code>. It can be narrowed to specific warnings, e.g. <code>-Werror=narrowing</code>.</p>\n<p>If you are compiling in GNU++ or whatever the default mode is instead of C++11 then the compiler can do whatever it likes, including accepting narrowing conversions without complaint.</p>\n<p>Reference: N3936 [intro.compliance]/2</p>\n<blockquote>\n<ul>\n<li><p>If a program contains a violation of any diagnosable rule [...], a conforming implementation shall issue at least one diagnostic message.</p>\n</li>\n<li><p>If a program contains a violation of a rule for which no diagnostic is required, this International Standard places no requirement on implementations with respect to that program.</p>\n</li>\n</ul>\n</blockquote>\n<p>[defns.diagnostic]</p>\n<blockquote>\n<p><strong>diagnostic message</strong></p>\n<p>message belonging to an implementation-defined subset of the implementation\u2019s output messages</p>\n</blockquote>\n<p>Note also from the first bullet point that it is not required that the number or content of messages corresponds to the number or content of the violations.</p>\n<p>The standard leaves it completely up to the compiler to decide how to organize its errors and/or warnings, with the proviso that for certain violations it can't silently ignore it.</p>\n"}, {"owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "is_accepted": false, "score": 2, "last_activity_date": 1423696657, "creation_date": 1423696657, "answer_id": 28466464, "question_id": 28466069, "link": "https://stackoverflow.com/questions/28466069/g4-9-and-g5-different-behaviour-when-narrowing-in-initializing-list/28466464#28466464", "title": "g++4.9 and g++5 different behaviour when narrowing in initializing list", "body": "<p>Quoting from <code>1.4 [intro.compliance]</code></p>\n\n<blockquote>\n  <p>A conforming implementation may have extensions (including additional\n  library functions), provided they do not alter the behavior of any\n  well-formed program. Implementations are required to diagnose programs\n  that use such extensions that are ill-formed according to this\n  International Standard. Having done so, however, they can compile and\n  execute such programs.</p>\n</blockquote>\n\n<p>The applicable section for your initialization example is <code>8.5.4 [dcl.init.list]</code>. In particular,</p>\n\n<blockquote>\n  <p>Otherwise, if the initializer list has a single element of type <strong>E</strong> and\n  either <strong>T</strong> is not a reference type or its referenced type is\n  reference-related to <strong>E</strong> , the object or reference is initialized from\n  that element; if a narrowing conversion (see below) is required to\n  convert the element to <strong>T</strong> , the program is <em>ill-formed</em>.</p>\n</blockquote>\n\n<p>accompanied by the example</p>\n\n<pre><code>int x1 {2}; // OK\nint x2 {2.0}; // error: narrowing\n</code></pre>\n\n<p>Since the exact nature of the diagnostic is implementation specified, both sets of behaviours observed are standard compliant.</p>\n"}, {"comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1423697661, "post_id": 28466553, "comment_id": 45258877, "body": "Just to make sure I understand, the calling of <code>f&lt;int&gt;()</code> will become ambiguous in g++49, right, due to conversion being allowed? Whereas in g++5 the second is rejected due to SFINAE. You probably meant <code>f()</code> in the first line."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1423697788, "post_id": 28466553, "comment_id": 45258917, "body": "@vsoftco Yes, GCC 4.9 reports it as ambiguous. I did mean <code>...</code>, hoping to trick it into preferring the second declaration (which would mean it generates wrong code instead of just rejecting valid code), but forgot that <code>...</code> doesn&#39;t work for that. I&#39;ll edit it with a better example, where GCC 4.9 does generate wrong code, when I&#39;ve got one. :)"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1423698019, "post_id": 28466553, "comment_id": 45259000, "body": "I think I have one example, do you mind if I added it to your answer?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1423698073, "post_id": 28466553, "comment_id": 45259027, "body": "@vsoftco Thanks for the offer. I had just edited one in seconds after your comment. Is yours similar to mine?"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1423698101, "post_id": 28466553, "comment_id": 45259034, "body": "<code>#include &lt;iostream&gt;  template &lt;typename T, typename... U&gt; void f(U...) {     std::cout &lt;&lt; &quot;first&quot; &lt;&lt; std::endl; } template &lt; typename T, typename = decltype(T {10.1}) &gt; void f() {     std::cout &lt;&lt; &quot;second&quot; &lt;&lt; std::endl; };  int main() {     f&lt;int&gt;(); }</code>  So it is similar in flavour. Your remark about generating wrong code is excellent, the problem becomes serious in such situations."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1423698324, "post_id": 28466553, "comment_id": 45259117, "body": "@vsoftco Ah, yeah, I guess that works too, although IIRC that&#39;s an area of the standard that has been changed quite a bit after C++11 was published, and where compiler support varies depending on which DR resolutions have been implemented."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1495070336, "post_id": 28466553, "comment_id": 75100792, "body": "The warning/error classification and SFINAE isn&#39;t linked. Newer versions of GCC issues an error for constant initializers, and a warning for non-constants, but both should SFINAE."}], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": false, "score": 9, "last_activity_date": 1423698023, "last_edit_date": 1423698023, "creation_date": 1423697102, "answer_id": 28466553, "question_id": 28466069, "link": "https://stackoverflow.com/questions/28466069/g4-9-and-g5-different-behaviour-when-narrowing-in-initializing-list/28466553#28466553", "title": "g++4.9 and g++5 different behaviour when narrowing in initializing list", "body": "<p>The reason that the narrowing conversion inside <code>{}</code> are only an error in C++11 mode is simple: it isn't an error in C++03. Now, <code>T var{value};</code> is new C++11 syntax, but <code>T var = {value};</code> was already valid C++03 syntax, and <em>did</em> allow narrowing conversions.</p>\n\n<pre><code>int i = { 10.1 }; // valid C++03, invalid C++11\n</code></pre>\n\n<p>It makes it easier for the GCC developers to treat narrowing conversions the same in <code>T var{value};</code> and <code>T var={value};</code> initialisations. This is useful because it avoids two separate code paths for the warning in the compiler.</p>\n\n<p>It makes it easier for the GCC developers to accept even the <code>T var{value};</code> syntax in C++03 mode, merely warning about it. Several other C++11 syntax extensions are also enabled in C++03 mode. This is useful because several C++11 syntax extensions are used in GCC's implementation of the standard library (where warnings about it are suppressed).</p>\n\n<p>The reason that <code>int i{10.1};</code> <em>isn't</em> an error in GCC 4.9 in C++11 mode, but was made an error in GCC 5, is because not treating it as an error caused valid code to be rejected. The C++ standard requires treating it as an error in SFINAE contexts, and here is a valid C++11 program that runs incorrectly because of this with GCC 4.9:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\ntemplate &lt;typename T&gt; void f(double) { puts(\"ok\"); }\ntemplate &lt;typename T, typename = decltype(T{10.1})&gt; void f(int) { puts(\"error\"); }\nint main() { f&lt;int&gt;(1); }\n</code></pre>\n\n<p>This is supposed to print \"ok\". The second overload is supposed to be discarded.</p>\n\n<p>With GCC 4.9, it prints \"error\", because the second overload isn't discarded, and <code>int</code> is a better match than <code>double</code>.</p>\n"}], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "accepted_answer_id": 28466236, "answer_count": 3, "score": 3, "last_activity_date": 1495044560, "creation_date": 1423694927, "last_edit_date": 1495044560, "question_id": 28466069, "link": "https://stackoverflow.com/questions/28466069/g4-9-and-g5-different-behaviour-when-narrowing-in-initializing-list", "title": "g++4.9 and g++5 different behaviour when narrowing in initializing list", "body": "<p>Consider this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    int i{10.1}; // narrowing, should not compile\n    std::cout &lt;&lt; i &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>According to the C++11 standard, it should not compile (narrowing in brace initialization is forbidden.)</p>\n\n<p>Now, compiling with <code>g++4.9.2 -std=c++11</code> only emits a warning</p>\n\n<pre><code>warning: narrowing conversion of '1.01e+1' from 'double' to 'int' inside { } [-Wnarrowing]\n</code></pre>\n\n<p>Removing the <code>-std=c++11</code> flag results in a warning regarding the brace init, but not any narrowing:</p>\n\n<pre><code>warning: extended initializer lists only available with -std=c++11 or -std=gnu++11\n</code></pre>\n\n<p>On the other hand, g++5 <strong>doesn't compile it</strong>, provided you compile with <code>g++5 -std=c++11</code>. However, if <code>-std=c++11</code> is omitted, then even <code>g++5</code> happily compiles it, giving just a warning related to the brace init, not to the narrowing:</p>\n\n<pre><code>warning: extended initializer lists only available with -std=c++11 or -std=gnu++11\n</code></pre>\n\n<p>The above behaviour seems buggy, <code>g++4.9</code> should not compile the code, and it is more than weird that <code>g++5</code> compiles it if you forget to specify <code>-std=c++11</code>. Is this a known problem?</p>\n"}, {"tags": ["c++", "arrays", "function", "variables", "for-loop"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 4, "creation_date": 1423694871, "post_id": 28466016, "comment_id": 45257753, "body": "You want <code>int Total_vot = 0;</code>"}, {"owner": {"reputation": 11, "user_id": 4556934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cc8158ca98c64e5fb367be3ee850333?s=128&d=identicon&r=PG&f=1", "display_name": "Darkaura", "link": "https://stackoverflow.com/users/4556934/darkaura"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1423694953, "post_id": 28466016, "comment_id": 45257777, "body": "yes but when i do that the total is always 0 then the program divides 0 by 100 breaking my program. the for loop with the += should add the total vot to around 3000 then give me a percent but it doesn&#39;t"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1423695038, "post_id": 28466016, "comment_id": 45257812, "body": "@Darkaura You really do need <code>int Total_vot = 0;</code> . There are other problems as well. The loop doesn&#39;t add the votes anyway, you are just seeing garbage results when you do not have this line."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1423695039, "post_id": 28466016, "comment_id": 45257814, "body": "Please use <code>std::vector&lt;double&gt;</code> rather than creating an array of doubles."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1423695058, "post_id": 28466016, "comment_id": 45257826, "body": "What you describe depends entirely on the values in <code>ppl</code> and <code>vote</code>, which you are not showing us."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1423695093, "post_id": 28466016, "comment_id": 45257840, "body": "change <code>POV[i] = vote[i] &#47; Total_vot * 100;</code> to <code>POV[i] = 1.0 * vote[i] &#47; Total_vot * 100;</code>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1423695128, "post_id": 28466016, "comment_id": 45257852, "body": "You may want to multipy by 100 before dividing.  And that should be 100.0 (with decimal point), to indicate the number is double precision instead of integer."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1423695176, "post_id": 28466016, "comment_id": 45257885, "body": "Or to stick with integer math, <code>POV[i] = vote[i] * 100 &#47; Total_vot;</code>"}, {"owner": {"reputation": 11, "user_id": 4556934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cc8158ca98c64e5fb367be3ee850333?s=128&d=identicon&r=PG&f=1", "display_name": "Darkaura", "link": "https://stackoverflow.com/users/4556934/darkaura"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1423695298, "post_id": 28466016, "comment_id": 45257941, "body": "@MattMcNabb hey that was the answer thanks i&#39;m surprised that worked my program works beautifully."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1423696531, "post_id": 28466016, "comment_id": 45258438, "body": "@Darkaura Cool. Barmar&#39;s answer says much the same thing so you can accept that :)"}], "answers": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 4, "last_activity_date": 1423695419, "creation_date": 1423695419, "answer_id": 28466181, "question_id": 28466016, "link": "https://stackoverflow.com/questions/28466016/my-variables-will-not-take-any-value/28466181#28466181", "title": "My variables will not take any value", "body": "<p>First, you need to initialize <code>Total_vot</code>:</p>\n\n<pre><code>int Total_vot = 0;\n</code></pre>\n\n<p>That will get rid of the warning about the uninitialized variable, and the total will be correct.</p>\n\n<p>Second, the assignment</p>\n\n<pre><code>POV[i] = vote[i] / Total_vot * 100;\n</code></pre>\n\n<p>is performing integer arithmetic because all the operands are integers. When it divides <code>vote[i]</code> by <code>Total_vot</code> this will be a fraction, and will be rounded down to <code>0</code>. It doesn't matter that you're assigning to a <code>double</code>; first it calculates the result of the expression, then it converts that result to <code>double</code> for the assignment.</p>\n\n<p>You need to cast at least one of the operands to <code>double</code> before doing the division:</p>\n\n<pre><code>POV[i] = vote[i] / (double) Total_vot * 100;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4556934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cc8158ca98c64e5fb367be3ee850333?s=128&d=identicon&r=PG&f=1", "display_name": "Darkaura", "link": "https://stackoverflow.com/users/4556934/darkaura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 28466181, "answer_count": 1, "score": 0, "last_activity_date": 1423695419, "creation_date": 1423694725, "question_id": 28466016, "link": "https://stackoverflow.com/questions/28466016/my-variables-will-not-take-any-value", "title": "My variables will not take any value", "body": "<p>Hello I am having trouble with this variable <code>Total_vot</code> I do not know why but the value that i want the total votes from vote[i] to add up and that value will become Total_vot. But it it says that the variable is uninitialized which means that i didn't put a zero at the time i created the variable. I want the value to be all the added up votes. but it doesn't work why?</p>\n\n<p>I'm a slight beginner so please be kind :)</p>\n\n<pre><code>int Total_vot;\n\n    double *POV = new double[ppl];  \n    cout &lt;&lt; \"this is the percentage of votes each candidate got!\" &lt;&lt; endl;\n\n    for (int i = 0; i &lt; ppl; i++)\n    { \n        Total_vot  += vote[i];\n    } \n    cout &lt;&lt; Total_vot &lt;&lt; endl;\n    for (int i = 0; i &lt; ppl; i++)\n    {\n        POV[i] = vote[i] / Total_vot * 100;\n    }\n    for (int i = 0; i &lt; ppl; i++)\n    {\n\n        cout &lt;&lt; cans[i]; cout &lt;&lt; \"     \" &lt;&lt; vote[i]; cout &lt;&lt; \"     \" &lt;&lt; POV[i]; cout&lt;&lt;\"%\" &lt;&lt; endl &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "templates", "implicit-conversion", "explicit-conversion"], "comments": [{"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 3, "creation_date": 1423694878, "post_id": 28465894, "comment_id": 45257758, "body": "Your link &quot;described here&quot; gives a one line answer to your question.  What don&#39;t you like about that answer?"}, {"owner": {"reputation": 35319, "user_id": 871910, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f073f5ca74b61813e689bbda8d12ba2b?s=128&d=identicon&r=PG", "display_name": "zmbq", "link": "https://stackoverflow.com/users/871910/zmbq"}, "reply_to_user": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1423695889, "post_id": 28465894, "comment_id": 45258196, "body": "This one line makes me describe <i>how</i> to make the conversion in my code, not simply that I want to make the conversion. It&#39;s too verbose."}], "answers": [{"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "is_accepted": false, "score": 2, "last_activity_date": 1423695032, "creation_date": 1423695032, "answer_id": 28466093, "question_id": 28465894, "link": "https://stackoverflow.com/questions/28465894/converting-between-vectors/28466093#28466093", "title": "Converting between vectors", "body": "<p>Generally you shouldn't do that, because <code>vector&lt;A&gt;</code> and <code>vector&lt;B&gt;</code> have different implementation (especially if vector is a template specialization like <code>vector&lt;bool&gt;</code>). </p>\n\n<p>If you do not like copying vector, take a look from other perspective: you need that <code>vector&lt;A&gt;</code> will behave <code>vector&lt;B&gt;</code>: you need to convert <em>interfaces</em> not <em>implementation</em>.  Implementing adapter for <code>vector&lt;A&gt;</code> with overloaded <code>operator*</code> and <code>operator-&gt;</code> which would act like B is what you need.</p>\n"}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "is_accepted": false, "score": 1, "last_activity_date": 1423695382, "creation_date": 1423695382, "answer_id": 28466174, "question_id": 28465894, "link": "https://stackoverflow.com/questions/28465894/converting-between-vectors/28466174#28466174", "title": "Converting between vectors", "body": "<p>Indirectly, there is. It might not be what you are looking for,<br>\nbut you could have your functions be templates that accept <br>\niterator pairs as argument:</p>\n\n<pre><code>void doSomething( const B&amp; );\n\ntemplate&lt;typename Itr&gt;\nvoid foo1( Itr beg, Itr end )\n{\n    while( beg != end )\n        doSomething(*beg++);\n}\n\nvoid foo2()\n{\n    vector&lt;A&gt; vec;\n    foo1( vec.begin(), vec.end() );\n}\n</code></pre>\n"}, {"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "is_accepted": false, "score": 1, "last_activity_date": 1423704149, "creation_date": 1423704149, "answer_id": 28467690, "question_id": 28465894, "link": "https://stackoverflow.com/questions/28465894/converting-between-vectors/28467690#28467690", "title": "Converting between vectors", "body": "<p>One class that inherits vector&lt; A > and another class that inherits vector&lt; B > and implement constructor that takes the other class as a parameter.</p>\n"}, {"owner": {"reputation": 35319, "user_id": 871910, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f073f5ca74b61813e689bbda8d12ba2b?s=128&d=identicon&r=PG", "display_name": "zmbq", "link": "https://stackoverflow.com/users/871910/zmbq"}, "is_accepted": false, "score": 0, "last_activity_date": 1423722751, "creation_date": 1423722751, "answer_id": 28470858, "question_id": 28465894, "link": "https://stackoverflow.com/questions/28465894/converting-between-vectors/28470858#28470858", "title": "Converting between vectors", "body": "<p>I was hoping for a trick along the line of C#'s  along with C++'s template specialization. Something like this:</p>\n\n<pre><code>template&lt;&gt;                                                     // C++ specialization\nvector&lt;B&gt;::operator vector&lt;A&gt;(this const vector&lt;A&gt; &amp;vec) const // c# extension method\n{\n    return vector&lt;C&gt;(vec.begin(), vec.end());\n}\n</code></pre>\n\n<p>Which would then allow me to simply state:</p>\n\n<pre><code>vector&lt;A&gt; va;\nvector&lt;B&gt; vb = va;\n</code></pre>\n\n<p>Alas, this is not possible in C++, so I'll just add a global function:</p>\n\n<pre><code>vector&lt;B&gt; ConvertToB(const vector&lt;A&gt; &amp;vec);\n</code></pre>\n\n<p>Thanks, everybody.</p>\n"}], "owner": {"reputation": 35319, "user_id": 871910, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f073f5ca74b61813e689bbda8d12ba2b?s=128&d=identicon&r=PG", "display_name": "zmbq", "link": "https://stackoverflow.com/users/871910/zmbq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1423722751, "creation_date": 1423694195, "last_edit_date": 1495541559, "question_id": 28465894, "link": "https://stackoverflow.com/questions/28465894/converting-between-vectors", "title": "Converting between vectors", "body": "<p>I have two classes: <code>A</code> and <code>B</code>, and an implicit conversion from <code>A</code>s to <code>B</code>s. I also have a <code>vector&lt;A&gt;</code>, and I want to convert it to <code>vector&lt;B&gt;</code>. Is it possible to add a conversion that would allow me to implicitly or explicitly convert <code>vector&lt;A&gt;</code> to <code>vector&lt;B&gt;</code>?</p>\n\n<p>I know I can use the technique <a href=\"https://stackoverflow.com/a/6399098/871910\">described here</a>, but is there some way to enable an implicit conversion between the two? Or an explicit conversion?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 77, "user_id": 4434172, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8e8d18b51d520bc61a89ae7850f03c53?s=128&d=identicon&r=PG&f=1", "display_name": "nsejxT nsejxT", "link": "https://stackoverflow.com/users/4434172/nsejxt-nsejxt"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1423694319, "post_id": 28465862, "comment_id": 45257503, "body": "@hyde, sorry, it was a typo."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 4434172, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8e8d18b51d520bc61a89ae7850f03c53?s=128&d=identicon&r=PG&f=1", "display_name": "nsejxT nsejxT", "link": "https://stackoverflow.com/users/4434172/nsejxt-nsejxt"}, "edited": false, "score": 0, "creation_date": 1423694553, "post_id": 28465930, "comment_id": 45257609, "body": "It returns another error: no matches converting function &#39;activated&#39; to type &#39;void (class QComboBox::*)(class QString)&#39;"}, {"owner": {"reputation": 759, "user_id": 4524862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DwQeLaM9ZoM/AAAAAAAAAAI/AAAAAAAAAk8/H54y0WxDtZw/photo.jpg?sz=128", "display_name": "ftynse", "link": "https://stackoverflow.com/users/4524862/ftynse"}, "reply_to_user": {"reputation": 77, "user_id": 4434172, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8e8d18b51d520bc61a89ae7850f03c53?s=128&d=identicon&r=PG&f=1", "display_name": "nsejxT nsejxT", "link": "https://stackoverflow.com/users/4434172/nsejxt-nsejxt"}, "edited": false, "score": 1, "creation_date": 1423694652, "post_id": 28465930, "comment_id": 45257665, "body": "yep, because it should be <code>const QString &amp;</code> instead of <code>QString</code>.  (edited answer)"}, {"owner": {"reputation": 759, "user_id": 4524862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DwQeLaM9ZoM/AAAAAAAAAAI/AAAAAAAAAk8/H54y0WxDtZw/photo.jpg?sz=128", "display_name": "ftynse", "link": "https://stackoverflow.com/users/4524862/ftynse"}, "reply_to_user": {"reputation": 77, "user_id": 4434172, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8e8d18b51d520bc61a89ae7850f03c53?s=128&d=identicon&r=PG&f=1", "display_name": "nsejxT nsejxT", "link": "https://stackoverflow.com/users/4434172/nsejxt-nsejxt"}, "edited": false, "score": 0, "creation_date": 1423694725, "post_id": 28465930, "comment_id": 45257696, "body": "The problem is, as described in the first message, that the compiler cannot resolve which of the overloaded functions to take.  So <code>static_cast</code> needed to tell explicitly."}, {"owner": {"reputation": 77, "user_id": 4434172, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8e8d18b51d520bc61a89ae7850f03c53?s=128&d=identicon&r=PG&f=1", "display_name": "nsejxT nsejxT", "link": "https://stackoverflow.com/users/4434172/nsejxt-nsejxt"}, "edited": false, "score": 0, "creation_date": 1423695027, "post_id": 28465930, "comment_id": 45257807, "body": "Thanks for the explanaton, I guess I understand the problem."}, {"owner": {"reputation": 77, "user_id": 4434172, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8e8d18b51d520bc61a89ae7850f03c53?s=128&d=identicon&r=PG&f=1", "display_name": "nsejxT nsejxT", "link": "https://stackoverflow.com/users/4434172/nsejxt-nsejxt"}, "edited": false, "score": 0, "creation_date": 1423750319, "post_id": 28465930, "comment_id": 45281619, "body": "Let&#39;s say I want to link an int signal with a QString slot, Is it possible to link diferent types?"}, {"owner": {"reputation": 759, "user_id": 4524862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DwQeLaM9ZoM/AAAAAAAAAAI/AAAAAAAAAk8/H54y0WxDtZw/photo.jpg?sz=128", "display_name": "ftynse", "link": "https://stackoverflow.com/users/4524862/ftynse"}, "reply_to_user": {"reputation": 77, "user_id": 4434172, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8e8d18b51d520bc61a89ae7850f03c53?s=128&d=identicon&r=PG&f=1", "display_name": "nsejxT nsejxT", "link": "https://stackoverflow.com/users/4434172/nsejxt-nsejxt"}, "edited": false, "score": 0, "creation_date": 1423751960, "post_id": 28465930, "comment_id": 45282838, "body": "I assume it will work if an implicit conversion sequence exists between types.  Thus connecting an <code>int</code> signal to a <code>double</code> slot will work, but not to the <code>QString</code> slot since there is no implicit conversion."}], "owner": {"reputation": 759, "user_id": 4524862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DwQeLaM9ZoM/AAAAAAAAAAI/AAAAAAAAAk8/H54y0WxDtZw/photo.jpg?sz=128", "display_name": "ftynse", "link": "https://stackoverflow.com/users/4524862/ftynse"}, "is_accepted": false, "score": 9, "last_activity_date": 1574711434, "last_edit_date": 1574711434, "creation_date": 1423694342, "answer_id": 28465930, "question_id": 28465862, "link": "https://stackoverflow.com/questions/28465862/qt-signals-slots-cast-type-in-new-notation/28465930#28465930", "title": "Qt signals slots, cast type in new notation", "body": "<p>This should work</p>\n\n<pre><code>connect(ui-&gt;comboBox, \n        static_cast&lt;void (QComboBox::*)(const QString &amp;)&gt;(&amp;QComboBox::activated),\n        ps,\n        &amp;PlotSystem::requestPlotsAvailable);\n</code></pre>\n\n<p>Qt 5.7 introduces <a href=\"https://doc.qt.io/qt-5/qtglobal.html#qOverload\" rel=\"nofollow noreferrer\"><code>qOverload</code> (or QOverload for C++11)</a> for convenience/readability:</p>\n\n<pre><code>connect(ui-&gt;comboBox, \n        qOverload&lt;const QString &amp;&gt;(&amp;QComboBox::activated),\n        ps,\n        &amp;PlotSystem::requestPlotsAvailable);\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/questions/17874489/disambiguate-overloaded-member-function-pointer-being-passed-as-template-paramet\">this</a> question about pointers to overloaded functions </p>\n"}], "owner": {"reputation": 77, "user_id": 4434172, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8e8d18b51d520bc61a89ae7850f03c53?s=128&d=identicon&r=PG&f=1", "display_name": "nsejxT nsejxT", "link": "https://stackoverflow.com/users/4434172/nsejxt-nsejxt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4446, "favorite_count": 2, "closed_date": 1519921487, "answer_count": 1, "score": 5, "last_activity_date": 1574711434, "creation_date": 1423694056, "question_id": 28465862, "link": "https://stackoverflow.com/questions/28465862/qt-signals-slots-cast-type-in-new-notation", "closed_reason": "Duplicate", "title": "Qt signals slots, cast type in new notation", "body": "<p>Given the following two:</p>\n\n<pre><code>connect(ui-&gt;comboBox, SIGNAL(activated(QString)), ps, SLOT(requestPlotsAvailable(QString)));\nconnect(ui-&gt;comboBox, &amp;QComboBox::activated, ps, &amp;PlotSystem::requestPlotsAvailable);\n</code></pre>\n\n<p>The first uses the old notation, which works. The second uses the new notation and gives the error</p>\n\n<pre><code>error: no matching function for call to 'PlotSystemGui::connect(QComboBox*&amp;, &lt;unresolved overloaded function type&gt;)'\n</code></pre>\n\n<p>How to avoid the error using the new notation?</p>\n"}, {"tags": ["c++", "fstream"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1423693896, "post_id": 28465759, "comment_id": 45257339, "body": "There are many simple ways that you could do this.   Since you are trying, you could show that attempt directly in this question to make it a little more focused."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 2, "creation_date": 1423693898, "post_id": 28465759, "comment_id": 45257342, "body": "Please post a small sample of what you want to do with your code HERE, not on github. When someone else wants to have the same answer in 6 months time, that code could be VERY different, and thus the answer given here makes no sense to the code posted."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1423697019, "post_id": 28465759, "comment_id": 45258638, "body": "Smells like you need a database.  There are various size databases from SQLite to MySql and others.  The database will handle the management of your data so you don&#39;t have to."}], "answers": [{"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 0, "last_activity_date": 1423694298, "creation_date": 1423694298, "answer_id": 28465923, "question_id": 28465759, "link": "https://stackoverflow.com/questions/28465759/databasing-in-c-using-fstream-library/28465923#28465923", "title": "Databasing in C++ using fstream library", "body": "<p>You are looking for serializing all your application's object and save/load them to/from a file.  </p>\n\n<p>The easiest way is certainly to use the poweverful <a href=\"http://www.boost.org/doc/libs/1_57_0/libs/serialization/doc/index.html\" rel=\"nofollow\">boost serialization library</a>.  It's very easy to use, as shown in its tutorial : it needs just a selialisation function in each object (ok and some gym for collections).  </p>\n"}], "owner": {"reputation": 1, "user_id": 4552993, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jq1Qhn2NCaI/AAAAAAAAAAI/AAAAAAAAALI/Tsgte2MwPXs/photo.jpg?sz=128", "display_name": "Logan Schorr", "link": "https://stackoverflow.com/users/4552993/logan-schorr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1423694298, "creation_date": 1423693599, "question_id": 28465759, "link": "https://stackoverflow.com/questions/28465759/databasing-in-c-using-fstream-library", "title": "Databasing in C++ using fstream library", "body": "<p>I am making a game, and I am trying to make it write all of the variables to a file, then be able to read it again when you open up the program, therefore saving your progress. Is there any simple way that I could do this? And if it helps, the code can be found at <a href=\"https://github.com/DualSwords/Dual-Swords/blob/dual-swords-post-beta/Dual%20Swords:%20Beta%201.9\" rel=\"nofollow\">https://github.com/DualSwords/Dual-Swords/blob/dual-swords-post-beta/Dual%20Swords:%20Beta%201.9</a> Thanks for any assistance you can offer me!</p>\n"}, {"tags": ["c++", "inheritance", "private"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1423695150, "post_id": 28465756, "comment_id": 45257868, "body": "Err, no, because nobody else can call them."}], "answers": [{"comments": [{"owner": {"reputation": 553, "user_id": 2679852, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/90fad1303d497662fd41336eea8a3901?s=128&d=identicon&r=PG&f=1", "display_name": "SimaGuanxing", "link": "https://stackoverflow.com/users/2679852/simaguanxing"}, "edited": false, "score": 0, "creation_date": 1423695393, "post_id": 28466122, "comment_id": 45257987, "body": "Thanks for the correction. So there is no way to access private data if both data and function are private? I have been asked this question in an interview and I said no way to do that. But judging from the interviewer&#39;s response, I guess there are some tricky methods to realize it."}, {"owner": {"reputation": 4775, "user_id": 970247, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/16ecabff67e069a281676fbee172071b?s=128&d=identicon&r=PG", "display_name": "Laurent Jalbert Simard", "link": "https://stackoverflow.com/users/970247/laurent-jalbert-simard"}, "reply_to_user": {"reputation": 553, "user_id": 2679852, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/90fad1303d497662fd41336eea8a3901?s=128&d=identicon&r=PG&f=1", "display_name": "SimaGuanxing", "link": "https://stackoverflow.com/users/2679852/simaguanxing"}, "edited": false, "score": 0, "creation_date": 1423695756, "post_id": 28466122, "comment_id": 45258154, "body": "If it&#39;s was a &quot;trick question&quot; though there IS a way to do it by adding <code>friend class derive;</code> in the Base class definition, but it&#39;s pure evil."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1423695811, "post_id": 28466122, "comment_id": 45258169, "body": "And interviewers shouldn&#39;t ask &#39;trick questions&#39;. But if he didn&#39;t like your answer you should ask him for his, and evalute it. He could be wrong."}, {"owner": {"reputation": 553, "user_id": 2679852, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/90fad1303d497662fd41336eea8a3901?s=128&d=identicon&r=PG&f=1", "display_name": "SimaGuanxing", "link": "https://stackoverflow.com/users/2679852/simaguanxing"}, "edited": false, "score": 0, "creation_date": 1423695937, "post_id": 28466122, "comment_id": 45258212, "body": "I never thought using friend class derive. Thanks!"}], "owner": {"reputation": 4775, "user_id": 970247, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/16ecabff67e069a281676fbee172071b?s=128&d=identicon&r=PG", "display_name": "Laurent Jalbert Simard", "link": "https://stackoverflow.com/users/970247/laurent-jalbert-simard"}, "is_accepted": true, "score": 2, "last_activity_date": 1423695165, "creation_date": 1423695165, "answer_id": 28466122, "question_id": 28465756, "link": "https://stackoverflow.com/questions/28465756/access-private-data-type-in-base-class-if-only-private-function-exist/28466122#28466122", "title": "Access private data type in base class if only private function exist", "body": "<p>\"we can access private data of base class if the function in base are protected by using inheritance\", no you're not really accessing private data. You're invoking a setter in the base class that does it for you. And no you won't be able to call the private methods of your base class.</p>\n"}, {"owner": {"reputation": 817, "user_id": 2392394, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/856badcdd1ae019a41eb20028d7633e5?s=128&d=identicon&r=PG", "display_name": "Darvish Kamalia", "link": "https://stackoverflow.com/users/2392394/darvish-kamalia"}, "is_accepted": false, "score": 0, "last_activity_date": 1423695304, "creation_date": 1423695304, "answer_id": 28466157, "question_id": 28465756, "link": "https://stackoverflow.com/questions/28465756/access-private-data-type-in-base-class-if-only-private-function-exist/28466157#28466157", "title": "Access private data type in base class if only private function exist", "body": "<p>Setting the members to private in the base class will make it private for all children as well. You can define new public functions to change these members in the children.</p>\n"}, {"owner": {"reputation": 41, "user_id": 2087229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08d2ac343e52eab58c8b071ea73df209?s=128&d=identicon&r=PG", "display_name": "JustAnotherCCppXXDummy", "link": "https://stackoverflow.com/users/2087229/justanotherccppxxdummy"}, "is_accepted": false, "score": 0, "last_activity_date": 1423697766, "last_edit_date": 1495541560, "creation_date": 1423697766, "answer_id": 28466686, "question_id": 28465756, "link": "https://stackoverflow.com/questions/28465756/access-private-data-type-in-base-class-if-only-private-function-exist/28466686#28466686", "title": "Access private data type in base class if only private function exist", "body": "<p>By using <code>friend</code>\nMaking the derive class the friend of Base</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class derive;//forward declaration\nclass Base\n{\nint i;\n\nprivate:\n  void set(int data){\n      i = data;\n  }\nprotected:\n  int get(){\n      return i;\n  }\npublic:\n  friend class derive;\n};\n\nclass derive : public Base{\npublic:\n    void change(int x){\n        set(x);\n        cout&lt;&lt;get()&lt;&lt;endl;\n    }\n};\n</code></pre>\n\n<p>You should be aware of public/protected inheritance. <code>class a : public/protected b</code></p>\n\n<p>Do not use access specifier overloading/overriding:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/5753833/c-overriding-public-private-inheritance\">C++: overriding public\\private inheritance</a></li>\n<li><a href=\"http://www.learncpp.com/cpp-tutorial/116-adding-changing-and-hiding-members-in-a-derived-class/\" rel=\"nofollow noreferrer\">http://www.learncpp.com/cpp-tutorial/116-adding-changing-and-hiding-members-in-a-derived-class/</a></li>\n</ul>\n\n<p>Now I show how to redeclare the access specifier of an inherited member:</p>\n\n<pre><code>class derive : public Base{\npublic:\n    Base::set;//this is valid redeclaration within public scope. Now anybody could use derive::set(x)\n    void change(int x){\n        set(x);\n        cout&lt;&lt;get()&lt;&lt;endl;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 553, "user_id": 2679852, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/90fad1303d497662fd41336eea8a3901?s=128&d=identicon&r=PG&f=1", "display_name": "SimaGuanxing", "link": "https://stackoverflow.com/users/2679852/simaguanxing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "accepted_answer_id": 28466122, "answer_count": 3, "score": 0, "last_activity_date": 1423697766, "creation_date": 1423693593, "last_edit_date": 1423694926, "question_id": 28465756, "link": "https://stackoverflow.com/questions/28465756/access-private-data-type-in-base-class-if-only-private-function-exist", "title": "Access private data type in base class if only private function exist", "body": "<p>Given the code below, we can access private data of base class if the function in base are protected by using inheritance. My question is, is there any way we can access private data if all methods in base class are also set to private?</p>\n\n<pre><code>class Base\n\n{\nint i;\n\nprotected:\n  void set(int data){\n      i = data;\n  }\n  int get(){\n      return i;\n  }\n};\n\nclass derive: Base{\npublic:\n    void change(int x){\n        set(x);\n        cout&lt;&lt;get()&lt;&lt;endl;\n    }\n};\n\nint main()\n{\n   derive b;\n   b.change(3);\n   return 0;    \n}\n</code></pre>\n"}, {"tags": ["c++", "fstream", "ifstream"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1423693399, "post_id": 28465601, "comment_id": 45257097, "body": "What about reading line by line into a line string (getline) and parse arguments with istringstream (using the current line string)?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1423695617, "post_id": 28465601, "comment_id": 45258086, "body": "And if the syntax of your input lines is indeed as shown, <code>trans</code> is <i>not</i> &quot;junk&quot;. A line <i>not</i> starting with it cannot be a transition and the loop reading transitions should terminate."}, {"owner": {"reputation": 1457, "user_id": 2868510, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/069f0736011a9f950163f69bfc45b8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy K", "link": "https://stackoverflow.com/users/2868510/tommy-k"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1423768044, "post_id": 28465601, "comment_id": 45293264, "body": "@WhozCraig the input is very controlled, there will be no errors in the text file. if this was production code or something I would totally agree, but I know that the format will always be correct in this case"}], "answers": [{"comments": [{"owner": {"reputation": 1457, "user_id": 2868510, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/069f0736011a9f950163f69bfc45b8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy K", "link": "https://stackoverflow.com/users/2868510/tommy-k"}, "edited": false, "score": 0, "creation_date": 1423693428, "post_id": 28465695, "comment_id": 45257120, "body": "well I need to loop with junk, stateNum, and designation to go around 3 times, so I could write it out 9 times but its nice to have it in a loop, especially since inside the loop I have 3 <code>if</code> statements depending on the designation"}, {"owner": {"reputation": 523, "user_id": 667798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad6a9f7791b77c45e907fa28d485fb8c?s=128&d=identicon&r=PG", "display_name": "Partha Lal", "link": "https://stackoverflow.com/users/667798/partha-lal"}, "reply_to_user": {"reputation": 1457, "user_id": 2868510, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/069f0736011a9f950163f69bfc45b8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy K", "link": "https://stackoverflow.com/users/2868510/tommy-k"}, "edited": false, "score": 0, "creation_date": 1423693651, "post_id": 28465695, "comment_id": 45257233, "body": "Ah, ok, I didn&#39;t read your question closely enough - that for loop kind of makes sense then (but using getline three times and parsing the line would be neater).  Once the loop for the three state lines is done you&#39;ll need a while loop for the transitions."}], "owner": {"reputation": 523, "user_id": 667798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad6a9f7791b77c45e907fa28d485fb8c?s=128&d=identicon&r=PG", "display_name": "Partha Lal", "link": "https://stackoverflow.com/users/667798/partha-lal"}, "is_accepted": false, "score": 0, "last_activity_date": 1423693315, "creation_date": 1423693315, "answer_id": 28465695, "question_id": 28465601, "link": "https://stackoverflow.com/questions/28465601/reading-in-file-and-parsing-the-input/28465695#28465695", "title": "reading in file and parsing the input", "body": "<p>Try placing </p>\n\n<pre><code>myFile &gt;&gt; junk;\nmyFile &gt;&gt; stateNum;\nmyFile &gt;&gt; designation;\n</code></pre>\n\n<p>before the loop and then reading each transition inside a loop, a while loop since you don't know how many there'll be.  </p>\n"}, {"owner": {"reputation": 817, "user_id": 2392394, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/856badcdd1ae019a41eb20028d7633e5?s=128&d=identicon&r=PG", "display_name": "Darvish Kamalia", "link": "https://stackoverflow.com/users/2392394/darvish-kamalia"}, "is_accepted": false, "score": 0, "last_activity_date": 1423696562, "creation_date": 1423696562, "answer_id": 28466429, "question_id": 28465601, "link": "https://stackoverflow.com/questions/28465601/reading-in-file-and-parsing-the-input/28466429#28466429", "title": "reading in file and parsing the input", "body": "<p>As Dieter said, you should use a stringstream and getline</p>\n\n<pre><code>string line;\n\nwhile (getline (myFile, line)){\n//this will loop until the end of the file\n  stringstream line_stream(line); \n  string word; \n  while (line &gt;&gt; word){\n  //this will loop until there are words (transitions) on the line)\n  //(your code)\n}\n</code></pre>\n"}], "owner": {"reputation": 1457, "user_id": 2868510, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/069f0736011a9f950163f69bfc45b8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy K", "link": "https://stackoverflow.com/users/2868510/tommy-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1423696562, "creation_date": 1423692979, "question_id": 28465601, "link": "https://stackoverflow.com/questions/28465601/reading-in-file-and-parsing-the-input", "title": "reading in file and parsing the input", "body": "<p>So I have a file in which the first 3 lines will always refer to \"states\" and the remainder will refer to \"transitions\" I know the first 3 lines will always be in the same format, and tabs between inputs on the same line, but the number of \"transitions\" is unknown, but will always start on line 4.</p>\n\n<p>So I handled the \"states\" by </p>\n\n<pre><code>for(int i = 0; i &lt; 3; i++){\n    myFile &gt;&gt; junk;\n    myFile &gt;&gt; stateNum;\n    myFile &gt;&gt; designation;\n    //make object and put in container\n}\n</code></pre>\n\n<p>And now I need to handle the \"transitions\", so if my input file looks like </p>\n\n<pre><code>state 1 a\nstate 2 b\nstate 3 c\ntrans a b c d &amp;\ntrans d s i &amp; 3\n...\ntrans 4 e &amp; d g\n</code></pre>\n\n<p>where all the whitespace on the same line is a tab, state/trans go into <code>junk</code> because they're not needed since I know 1-3 is state and the remainder is transition. how do I now start from the <strong>beginning of line 4</strong> and continue til the end of the file? Basically, what <code>if</code> condition do I use to make this work</p>\n\n<pre><code>if(???){\n    myFile &gt;&gt; junk;\n    myFile &gt;&gt; one;\n    myFile &gt;&gt; two;\n    ...\n    myFile &gt;&gt; five;\n    //create object and place in container\n}\n</code></pre>\n\n<p>where one, two,.. five are declared earlier and one,..., five correspond to the 5 entries after \"trans\"</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 5331, "user_id": 3777428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJ6pq.png?s=128&g=1", "display_name": "eigenchris", "link": "https://stackoverflow.com/users/3777428/eigenchris"}, "edited": false, "score": 0, "creation_date": 1423691383, "post_id": 28465139, "comment_id": 45256025, "body": "That is correct. You can print the values with <code>cout</code> and check for yourself. :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1423692291, "post_id": 28465139, "comment_id": 45256491, "body": "Sure, references and pointers are similar. However, you are obfuscating the original pointer p (being allocated) with the reference n. That is trouble, if the original  is not deallocated."}, {"owner": {"reputation": 706, "user_id": 2640937, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2bdde9ada4ed0bf5df04bad03a51642d?s=128&d=identicon&r=PG", "display_name": "Vaelus", "link": "https://stackoverflow.com/users/2640937/vaelus"}, "edited": false, "score": 1, "creation_date": 1423692562, "post_id": 28465139, "comment_id": 45256649, "body": "I did think of that, and I figured, even if the pointer p got lost, I could deallocate the memory with <code>delete &amp;n</code>. I can&#39;t really think of any situations where this would actually help though."}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 1, "creation_date": 1423693884, "post_id": 28465139, "comment_id": 45257333, "body": "An example where this might be useful is std::unique_ptr&lt;SomeClass&gt; p(new SomeClass); SomeClass &amp;n = *p;   The unique pointer manages the lifetime of the allocated memory while &#39;n&#39; lets you talk about the object without constantly prefixing it with *."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1423695043, "post_id": 28465139, "comment_id": 45257817, "body": "That&#39;s why * is officially called &quot;indirection&quot; instead of &quot;dereference&quot;. Same thing happens when you do &quot;*ptr=1&quot;: you are writing into where &quot;ptr&quot; is pointing to, instead of writing to an temporary object created by a dereference operation."}], "answers": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 4, "last_activity_date": 1423691378, "creation_date": 1423691378, "answer_id": 28465201, "question_id": 28465139, "link": "https://stackoverflow.com/questions/28465139/reference-to-a-derefrenced-pointer/28465201#28465201", "title": "Reference to a derefrenced pointer", "body": "<p>The given code</p>\n\n<pre><code>int *p;\np = new int;\n\nint &amp;n = *p;\nn = 5;\n</code></pre>\n\n<p>is valid.</p>\n\n<p>I'd write just \u201cyep\u201d as an answer but SO rules \u2013 and the sometimes very rule-based users \u2013 won't admit such a brief answer.</p>\n"}], "owner": {"reputation": 706, "user_id": 2640937, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2bdde9ada4ed0bf5df04bad03a51642d?s=128&d=identicon&r=PG", "display_name": "Vaelus", "link": "https://stackoverflow.com/users/2640937/vaelus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 28465201, "answer_count": 1, "score": 2, "last_activity_date": 1423691378, "creation_date": 1423691185, "question_id": 28465139, "link": "https://stackoverflow.com/questions/28465139/reference-to-a-derefrenced-pointer", "title": "Reference to a derefrenced pointer", "body": "<p>Is the following standards compliant c++ code?</p>\n\n<pre><code>int *p;\np = new int;\n\nint &amp;n = *p;\nn = 5;\n</code></pre>\n\n<p>Furthermore, am I right in thinking that this code would essentially allocate memory for an int, then give a name, specifically n, to that memory location that could be used like a normal int type variable?</p>\n"}, {"tags": ["c++", "language-lawyer", "undefined-behavior", "c++03", "sequence-points"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1423691775, "post_id": 28465121, "comment_id": 45256230, "body": "In that answer the very knowledgeable &quot;Johannes Schaub - litb&quot; comments that he thinks it&#39;s an untrue statement.  And gets no response."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 2, "creation_date": 1423691821, "post_id": 28465121, "comment_id": 45256257, "body": "@DrewDormann James Kanze is also very knowledgeable"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 2, "creation_date": 1423692259, "post_id": 28465121, "comment_id": 45256468, "body": "<code>*&amp;i</code> would be perfectly valid, and <code>++i</code> returns a reference to <code>i</code> so I don&#39;t see the problem myself..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3920237"}, "edited": false, "score": 3, "creation_date": 1423692435, "post_id": 28465121, "comment_id": 45256578, "body": "Wouldn&#39;t the undefined behavior concern be in <code>i = *&amp;++i</code> or just <code>*&amp;++i</code> by itself?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1423692938, "post_id": 28465121, "comment_id": 45256851, "body": "@JonathanPotter: It&#39;s not undefined behavior, but it <i>does</i> evaluate to an undefined value.  They&#39;re both right, they&#39;re just talking about subtly different things."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1423694745, "post_id": 28465121, "comment_id": 45257705, "body": "@remyabel my reading of James&#39; post (and Johannes Schaub&#39;s reading too) was that when James said &quot;the expression <code>*&amp;++i</code> was undefined behavior;&quot; he literally meant what he said ; but perhaps he did intend to write <code>i = *&amp;++i;</code> and also later in the same sentence <code>i = ++i</code>"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1423699883, "post_id": 28465121, "comment_id": 45259648, "body": "You might want to be explicit what you mean by <i>use</i>, like initializing a reference, using the value (lvalue-to-rvalue-conversion), or what."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1423699985, "post_id": 28465121, "comment_id": 45259673, "body": "@Deduplicator the original quote just said <i>use</i>. I&#39;m struggling to see how it could be UB in any case that doesn&#39;t involve it being part of a larger expression containing <code>i</code>"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1423700764, "post_id": 28465121, "comment_id": 45259886, "body": "Well, iff <code>++++i</code> well-defined in C++03, then using the value of (do lvalue-to-rvalue-conversion) on <code>*&amp;++i</code> is too. But I cannot see that..."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1423701100, "post_id": 28465121, "comment_id": 45259980, "body": "@Deduplicator ok let&#39;s start with a concrete example like <code>int x = *&amp;++i;</code>"}], "answers": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 0, "last_activity_date": 1423694127, "creation_date": 1423694127, "answer_id": 28465878, "question_id": 28465121, "link": "https://stackoverflow.com/questions/28465121/does-i-cause-undefined-behaviour-in-c03/28465878#28465878", "title": "Does *&amp;++i cause undefined behaviour in C++03?", "body": "<p>I think the question only makes sense if we deal with the expression:</p>\n\n<pre><code>i = *&amp;++i;\n</code></pre>\n\n<p>The relevant quote in the C++03 standard would be [expr]/4:</p>\n\n<blockquote>\n  <p>Except where noted, the order of evaluation of operands of individual operators and subexpressions of individual\n  expressions, and the order in which side effects take place, is unspecified. Between the previous\n  and next sequence point a scalar object shall have its stored value modified at most once by the evaluation\n  of an expression. Furthermore, the prior value shall be accessed only to determine the value to be stored.\n  The requirements of this paragraph shall be met for each allowable ordering of the subexpressions of a full\n  expression; otherwise the behavior is undefined.</p>\n\n<pre><code>i = ++i + 1; // the behavior is unspecified\n</code></pre>\n</blockquote>\n\n<p>We can just compare the sequencing of <code>i = *&amp;++i</code> vs <code>i = ++i + 1</code> to determine that the same rule causes both to be unspecified. They are both statements of the form:</p>\n\n<pre><code>i = f(++i);\n</code></pre>\n\n<p>For any function <code>f</code>, the reading of <code>i</code> on the left-hand side and the side-effect of the <code>++i</code> on the right-hand side are not sequenced relative with each other. Hence, undefined behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1423695441, "post_id": 28465893, "comment_id": 45258015, "body": "AFAICS <code>i = ++i</code> was well-defined in C++03, as correctly shown by the accepted answer in the linked Q/A."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 1, "creation_date": 1423695841, "post_id": 28465893, "comment_id": 45258181, "body": "@Columbo: If you would be so kind as to summarize or quote, I will endeavour to refute the claim you&#39;ve seen. I&#39;m unable to find it, sorry. However, since this was very simple in C++03, just absolutely never modify twice or more between sequence points, it may be that you don&#39;t need more than that? C++03 &#167;5/4 in [expr]: \u201cBetween the previous and next sequence point a scalar object shall have its stored value modified at most once by the evaluation of an expression.\u201d"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1423697498, "post_id": 28465893, "comment_id": 45258809, "body": "Apparently I misunderstood the notion of sequence points entirely. I thought that the paragraphs quoted by this <a href=\"http://stackoverflow.com/a/17403467/3647361\">answer</a> would suffice to prove the well-definedness of that expression. But nowhere is anything said about sequence points there (I thought their existence is <i>implied</i>, but that seems wrong in hindsight). In fact, it seems that as they occur so rarely they define a lot of conceptually fine code to invoke UB. Fortunately that  was fixed in C++11."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1423698038, "post_id": 28465893, "comment_id": 45259008, "body": "@Columbo: Oh. C++03 sequence points were, essentially, the points between statements (but considering function calls it gets more complicated). C++03 &#167;1.9/7 \u201cAt certain specified points in the execution sequence called <i>sequence points</i>, all side effects of previous evaluations shall be complete and no side effects of subsequent evaluations shall have taken place.\u201d and &#167;1.9/16 \u201cThere is a sequence point at the completion of evaluation of each full-expression\u201d, plus a bit more about function calls in &#167;1.9/17. AFAICS the answer you link to doesn&#39;t mention sequence points or C++03."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1423741311, "post_id": 28465893, "comment_id": 45276098, "body": "I do understand what sequence points are. I just didn&#39;t know that their existence must be explicitly stated, i.e. there is no sequence point between the evaluation of the operands of the assignment operator and the assignment itself because it isn&#39;t noted anywhere."}], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 7, "last_activity_date": 1423694195, "creation_date": 1423694195, "answer_id": 28465893, "question_id": 28465121, "link": "https://stackoverflow.com/questions/28465121/does-i-cause-undefined-behaviour-in-c03/28465893#28465893", "title": "Does *&amp;++i cause undefined behaviour in C++03?", "body": "<p>It makes little sense to ask whether <code>*&amp;++i</code> in itself has UB. The deferencing doesn't necessarily access the stored value (prior or new) of <code>i</code>, as you can see by using this as an initializer expression for a reference. Only if an rvalue conversion is involved (usage in such context) is there any question to discuss at all. And then, since we can use the value of <code>++i</code>, we can use the value of <code>*&amp;++i</code> with exactly the same caveats as for <code>++i</code>.</p>\n\n<p>The original question concerned essentially <code>i = ++i</code>, which is the same as <code>i = *&amp;++i</code>. That was undefined behavior in C++03, due to <code>i</code> being modified twice between sequence points, and is well-defined in C++11, due to the side-effects of the assignment operator being sequenced after the value computations of the left and right hand sides.</p>\n\n<p>It is perhaps relevant to note that the non-normative <em>examples</em> in the C++98 and C++03 standards, were incorrect, describing some cases of formally Undefined Behavior as merely unspecified behavior. Thus, the intent has not been entirely clear, all the way back. A good rule of thumb is to simply not rely on such obscure corner cases of the language, to avoid them: one should not need to be a language lawyer in order to make sense of the code&hellip;</p>\n"}], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 2, "answer_count": 2, "score": 21, "last_activity_date": 1423702561, "creation_date": 1423691107, "last_edit_date": 1495542293, "question_id": 28465121, "link": "https://stackoverflow.com/questions/28465121/does-i-cause-undefined-behaviour-in-c03", "title": "Does *&amp;++i cause undefined behaviour in C++03?", "body": "<p>In <a href=\"https://stackoverflow.com/a/17400329/1505939\">another answer</a> it was stated that prior to C++11, where <code>i</code> is an <code>int</code>, then use of the expression:</p>\n\n<pre><code>*&amp;++i\n</code></pre>\n\n<p>caused undefined behaviour. Is this true?</p>\n\n<p>On the other answer there was a little discussion in comments but it seems unconvincing.</p>\n"}, {"tags": ["c++", "css", "qt", "qt5"], "answers": [{"owner": {"reputation": 8275, "user_id": 1465625, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5294e4ecf2875e565ad0c6e2950e4042?s=128&d=identicon&r=PG", "display_name": "hank", "link": "https://stackoverflow.com/users/1465625/hank"}, "is_accepted": true, "score": 1, "last_activity_date": 1423727565, "creation_date": 1423727565, "answer_id": 28472081, "question_id": 28465039, "link": "https://stackoverflow.com/questions/28465039/how-do-i-highlight-specific-letters-in-the-text-of-a-qlistwidgetitem/28472081#28472081", "title": "How do I highlight specific letters in the text of a QListWidgetItem?", "body": "<p>Usually you have to create a custom delegate that paints the text the way you want. You can read about it <a href=\"http://www.qtcentre.org/threads/27777-Customize-QListWidgetItem-how-to\" rel=\"nofollow\">here</a>.</p>\n\n<p>But if you want to customize a <code>QListWidget</code> you can simply use the <code>QListWidget::setItemWidget</code> method:</p>\n\n<pre><code>QListWidget *list = new QListWidget;\n\nQListWidgetItem *item = new QListWidgetItem(list);\n\nQLabel *label = new QLabel(\"my &lt;span style=\\\"color: red\\\"&gt;red&lt;/span&gt; text\");\nlist-&gt;setItemWidget(item, label);\n</code></pre>\n"}], "owner": {"reputation": 267, "user_id": 1888139, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6332688364a4d2a4347d315dbb4d5071?s=128&d=identicon&r=PG", "display_name": "Joey Kleingers", "link": "https://stackoverflow.com/users/1888139/joey-kleingers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 28472081, "answer_count": 1, "score": 1, "last_activity_date": 1423727565, "creation_date": 1423690843, "question_id": 28465039, "link": "https://stackoverflow.com/questions/28465039/how-do-i-highlight-specific-letters-in-the-text-of-a-qlistwidgetitem", "title": "How do I highlight specific letters in the text of a QListWidgetItem?", "body": "<p>I am writing a search algorithm that searches a QListWidget and returns relevant matches based on what the user types in the search bar.  I would like any matches to be highlighted in a yellowish color.</p>\n\n<p>For example:</p>\n\n<p>If the user types \"ilt\" into the search bar, I would like to highlight the corresponding letters that are in the QListWidgetItem with the text \"Write F<strong>ilt</strong>er\" (bolded, for convenience).</p>\n\n<p>Assuming that I have access to both phrases and can programmatically identify which letters in the QListWidgetItem text that I need to highlight, is there an API or algorithm that I can use to do this?</p>\n"}, {"tags": ["c++", "lapack", "armadillo"], "comments": [{"owner": {"reputation": 4123, "user_id": 3378179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mmbS.png?s=128&g=1", "display_name": "Caduchon", "link": "https://stackoverflow.com/users/3378179/caduchon"}, "edited": false, "score": 0, "creation_date": 1424281875, "post_id": 28465000, "comment_id": 45487375, "body": "What&#39;s the version of lapack you use ?"}], "owner": {"reputation": 41, "user_id": 1968901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/537b6f456d88cd2e7130ebf3c1ee9c3c?s=128&d=identicon&r=PG", "display_name": "Hao", "link": "https://stackoverflow.com/users/1968901/hao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1423690704, "creation_date": 1423690704, "question_id": 28465000, "link": "https://stackoverflow.com/questions/28465000/c-armadillo-error-parameter-3-to-routine-dgebal-was-incorrect", "title": "C++ Armadillo, error: Parameter 3 to routine DGEBAL was incorrect", "body": "<p>I am using C++ armadillo library to do some statistical computation involving matrices. What the computation does is trying to find a best model with different parameterizations by looping through all the possible combinations of the parameter values. </p>\n\n<p>However, I am getting random error: Parameter 3 to routine DGEBAL was incorrect, where DGEBAL seems to be a lapack routine. If I pick the parameter combination that causes the error and re-run a single computation with that parameter combination, everything is OK.</p>\n\n<p>So, I am confused. Does anyone know what was wrong? Is it because the lapack library I am using is too old? Thanks.</p>\n"}, {"tags": ["c++", "clang", "abstract-syntax-tree"], "comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1423690777, "post_id": 28464978, "comment_id": 45255694, "body": "Can you post a complete piece of C++ that actually compiles? Also, which version of clang are you using?"}, {"owner": {"reputation": 1636, "user_id": 2487403, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/03c6ffd3ce47eb0a0d3707436013a90a?s=128&d=identicon&r=PG", "display_name": "Everv0id", "link": "https://stackoverflow.com/users/2487403/everv0id"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1423691031, "post_id": 28464978, "comment_id": 45255831, "body": "@MatsPetersson updated my question. Cpp file is guaranteed to be compilable."}], "answers": [{"owner": {"reputation": 759, "user_id": 4524862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DwQeLaM9ZoM/AAAAAAAAAAI/AAAAAAAAAk8/H54y0WxDtZw/photo.jpg?sz=128", "display_name": "ftynse", "link": "https://stackoverflow.com/users/4524862/ftynse"}, "is_accepted": false, "score": 0, "last_activity_date": 1423692131, "last_edit_date": 1423692131, "creation_date": 1423691255, "answer_id": 28465162, "question_id": 28464978, "link": "https://stackoverflow.com/questions/28464978/clang-ast-dump-doesnt-show-some-global-variables/28465162#28465162", "title": "Clang ast-dump doesn&#39;t show some global variables", "body": "<p>It appears that clang cannot figure out types for all declarators in your declaration <code>size_t N,M</code> and create <code>VarDecl</code> for all of them but first.  Pay attention to \"invalid\" following these declarations.</p>\n\n<p>With full example, there is</p>\n\n<pre><code>|-VarDecl 0x102bf5d60 &lt;blah.cpp:4:1, col:8&gt; N 'size_t':'unsigned long'\n|-VarDecl 0x102bf5dd0 &lt;col:1, col:10&gt; M 'size_t':'unsigned long'\n</code></pre>\n\n<p>etc.  All of them.</p>\n\n<p>Once I remove includes that define <code>size_t</code> and <code>std::vector</code>, clang starts complaining about undefined types and does not generate <code>VarDecl</code> since it did not create a <code>Type</code> before.</p>\n"}, {"comments": [{"owner": {"reputation": 1636, "user_id": 2487403, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/03c6ffd3ce47eb0a0d3707436013a90a?s=128&d=identicon&r=PG", "display_name": "Everv0id", "link": "https://stackoverflow.com/users/2487403/everv0id"}, "edited": false, "score": 0, "creation_date": 1423696898, "post_id": 28465435, "comment_id": 45258592, "body": "Thanks a lot for your answer! Yes, I used <code>-Xclang</code> option earlier, but it produces non-grepable text which looks like this: <code>[0;34m[0m[0;1;32mTranslationUnitDecl[0m[0;33m 0x2f8b3c0[0m &lt;[0;33m&lt;invalid sloc&gt;[0m&gt; [0;34m|-[0m[0;1;32mTypedefDecl[0m[0;33m 0x2f8b900[0m &lt;[0;33m&lt;invalid sloc&gt;[0m&gt;[0;1;36m __int128_t[0m [0;32m&#39;__int128&#39;[0m [0;34m|-[0m[0;1;32mTypedefDecl[0m[0;33m 0x2f8b960[0m &lt;[0;33m&lt;invalid sloc&gt;[0m&gt;[0;1;36m __uint128_t[0m [0;32m&#39;unsigned __int128&#39;[0m</code> etc. How could i convert it to grepable plain text?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 1636, "user_id": 2487403, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/03c6ffd3ce47eb0a0d3707436013a90a?s=128&d=identicon&r=PG", "display_name": "Everv0id", "link": "https://stackoverflow.com/users/2487403/everv0id"}, "edited": false, "score": 0, "creation_date": 1423697238, "post_id": 28465435, "comment_id": 45258721, "body": "@Everv0id: Obvously: -fno-color-diagnostic - but I guess you didn&#39;t remember that option ;) [No, I didn&#39;t know that either, but it was the only thing in <code>clang -help | grep color</code> that came up, so I tried, and it works]"}, {"owner": {"reputation": 1636, "user_id": 2487403, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/03c6ffd3ce47eb0a0d3707436013a90a?s=128&d=identicon&r=PG", "display_name": "Everv0id", "link": "https://stackoverflow.com/users/2487403/everv0id"}, "edited": false, "score": 0, "creation_date": 1423697631, "post_id": 28465435, "comment_id": 45258863, "body": "So, this is the final version of script: <code>clang -c -Xclang -ast-dump -fno-color-diagnostics filename.cpp | grep &#39;^|-VarDecl&#39;</code> and it prints all lines with global variables declaration. Very thanks!"}], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 1, "last_activity_date": 1423692306, "creation_date": 1423692306, "answer_id": 28465435, "question_id": 28464978, "link": "https://stackoverflow.com/questions/28464978/clang-ast-dump-doesnt-show-some-global-variables/28465435#28465435", "title": "Clang ast-dump doesn&#39;t show some global variables", "body": "<p>You are using <code>clang++ -cc1 -ast-dump</code> which presumes that the input is preprocessed. When I do that, I get errors, because it can't find <code>std::vector</code>, <code>std::pair</code>, <code>size_t</code>, and this is why it says invalid in lines like this one:</p>\n\n<pre><code>|-VarDecl 0x3149810 &lt;testing.cpp:19:1, col:8&gt; col:8 invalid N 'int'\n|-VarDecl 0x3149880 &lt;line:20:1, col:14&gt; col:14 invalid MAXN 'const int'\n</code></pre>\n\n<p>Note the \"invalid\" in those lines - it means that it's \"not a valid declaration\".</p>\n\n<p>Part of the compilers error recovery in situations like this is to \"assume there is only one variable in each declaration and skip to the next semicolon\". </p>\n\n<p>I modified your code to be like this:</p>\n\n<pre><code>namespace std\n{\n    template &lt;typename T&gt;\n    class vector\n    {\n    };\n\n    template &lt;typename T1, typename T2&gt;\n    class pair\n    {\n    };\n};\n\ntypedef int size_t;\n\nsize_t N,M;\nconst size_t MAXN = 40000;\nstd::vector&lt;std::pair&lt;size_t,size_t&gt; &gt; graph[MAXN],query[MAXN],qr;\nsize_t p[MAXN], ancestor[MAXN];\nbool u[MAXN];\nsize_t ansv[MAXN];\nsize_t cost[MAXN];\n\nsize_t find_set(size_t x){\n    //not important for my problem\n    return 0;\n}\n\nvoid unite(size_t a, size_t b, size_t new_ancestor){\n    //not important for my problem\n}\n\nvoid dfs(size_t v,size_t ct){\n    //not important for my problem\n}\n\nint main(int argc, char* argv[]){\n    //not important for my problem\n}\n</code></pre>\n\n<p>at which point I get:</p>\n\n<pre><code>TranslationUnitDecl 0x4916de0 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt;\n|-TypedefDecl 0x4917320 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __int128_t '__int128'\n|-TypedefDecl 0x4917380 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __uint128_t 'unsigned __int128'\n|-TypedefDecl 0x4917780 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __builtin_va_list '__va_list_tag [1]'\n|-NamespaceDecl 0x49177d0 &lt;testing.cpp:1:1, line:12:1&gt; line:1:11 std\n| |-ClassTemplateDecl 0x4917970 &lt;line:3:5, line:6:5&gt; line:4:11 vector\n| | |-TemplateTypeParmDecl 0x4917830 &lt;line:3:15, col:24&gt; col:24 typename T\n| | |-CXXRecordDecl 0x49178e0 &lt;line:4:5, line:6:5&gt; line:4:11 class vector definition\n| | | `-CXXRecordDecl 0x49588f0 &lt;col:5, col:11&gt; col:11 implicit class vector\n| | `-ClassTemplateSpecializationDecl 0x49593b0 &lt;line:3:5, line:6:5&gt; line:4:11 class vector definition\n| |   |-TemplateArgument type 'class std::pair&lt;int, int&gt;'\n| |   |-CXXRecordDecl 0x4959750 prev 0x49593b0 &lt;col:5, col:11&gt; col:11 implicit class vector\n| |   |-CXXConstructorDecl 0x495ff30 &lt;col:11&gt; col:11 implicit used vector 'void (void) throw()' inline\n| |   | `-CompoundStmt 0x4960260 &lt;col:11&gt;\n| |   `-CXXConstructorDecl 0x4960090 &lt;col:11&gt; col:11 implicit vector 'void (const class std::vector&lt;class std::pair&lt;int, int&gt; &gt; &amp;)' inline noexcept-unevaluated 0x4960090\n| |     `-ParmVarDecl 0x49601d0 &lt;col:11&gt; col:11 'const class std::vector&lt;class std::pair&lt;int, int&gt; &gt; &amp;'\n| `-ClassTemplateDecl 0x4958b40 &lt;line:8:5, line:11:5&gt; line:9:11 pair\n|   |-TemplateTypeParmDecl 0x4958980 &lt;line:8:15, col:24&gt; col:24 typename T1\n|   |-TemplateTypeParmDecl 0x49589f0 &lt;col:28, col:37&gt; col:37 typename T2\n|   |-CXXRecordDecl 0x4958ab0 &lt;line:9:5, line:11:5&gt; line:9:11 class pair definition\n|   | `-CXXRecordDecl 0x4958de0 &lt;col:5, col:11&gt; col:11 implicit class pair\n|   `-ClassTemplateSpecializationDecl 0x4959140 &lt;line:8:5, line:11:5&gt; line:9:11 class pair\n|     |-TemplateArgument type 'int'\n|     `-TemplateArgument type 'int'\n|-EmptyDecl 0x4958e70 &lt;line:12:2&gt; col:2\n|-TypedefDecl 0x4958ea0 &lt;line:14:1, col:13&gt; col:13 referenced size_t 'int'\n|-VarDecl 0x4958f20 &lt;line:17:1, col:8&gt; col:8 N 'size_t':'int'\n|-VarDecl 0x4958f90 &lt;col:1, col:10&gt; col:10 M 'size_t':'int'\n|-VarDecl 0x4959010 &lt;line:18:1, col:21&gt; col:14 referenced MAXN 'const size_t':'const int' cinit\n| `-IntegerLiteral 0x4959068 &lt;col:21&gt; 'int' 40000\n|-VarDecl 0x4959690 &lt;line:19:1, col:50&gt; col:40 graph 'std::vector&lt;std::pair&lt;size_t, size_t&gt; &gt; [40000]' callinit\n| `-CXXConstructExpr 0x4960278 &lt;col:40&gt; 'std::vector&lt;std::pair&lt;size_t, size_t&gt; &gt; [40000]' 'void (void) throw()'\n|-VarDecl 0x49603f0 &lt;col:1, col:62&gt; col:52 query 'std::vector&lt;std::pair&lt;size_t, size_t&gt; &gt; [40000]' callinit\n| `-CXXConstructExpr 0x4960448 &lt;col:52&gt; 'std::vector&lt;std::pair&lt;size_t, size_t&gt; &gt; [40000]' 'void (void) throw()'\n|-VarDecl 0x49604c0 &lt;col:1, col:64&gt; col:64 qr 'std::vector&lt;std::pair&lt;size_t, size_t&gt; &gt;':'class std::vector&lt;class std::pair&lt;int, int&gt; &gt;' callinit\n| `-CXXConstructExpr 0x4960518 &lt;col:64&gt; 'std::vector&lt;std::pair&lt;size_t, size_t&gt; &gt;':'class std::vector&lt;class std::pair&lt;int, int&gt; &gt;' 'void (void) throw()'\n|-VarDecl 0x4960650 &lt;line:20:1, col:14&gt; col:8 p 'size_t [40000]'\n|-VarDecl 0x4960710 &lt;col:1, col:30&gt; col:17 ancestor 'size_t [40000]'\n|-VarDecl 0x4960820 &lt;line:21:1, col:12&gt; col:6 u '_Bool [40000]'\n|-VarDecl 0x49608e0 &lt;line:22:1, col:17&gt; col:8 ansv 'size_t [40000]'\n|-VarDecl 0x49609a0 &lt;line:23:1, col:17&gt; col:8 cost 'size_t [40000]'\n|-FunctionDecl 0x4960b10 &lt;line:25:1, line:28:1&gt; line:25:8 find_set 'size_t (size_t)'\n| |-ParmVarDecl 0x4960a10 &lt;col:17, col:24&gt; col:24 x 'size_t':'int'\n| `-CompoundStmt 0x4960bf8 &lt;col:26, line:28:1&gt;\n|   `-ReturnStmt 0x4960bd8 &lt;line:27:5, col:12&gt;\n|     `-IntegerLiteral 0x4960bb8 &lt;col:12&gt; 'int' 0\n|-FunctionDecl 0x4960e40 &lt;line:30:1, line:32:1&gt; line:30:6 unite 'void (size_t, size_t, size_t)'\n| |-ParmVarDecl 0x4960c30 &lt;col:12, col:19&gt; col:19 a 'size_t':'int'\n| |-ParmVarDecl 0x4960ca0 &lt;col:22, col:29&gt; col:29 b 'size_t':'int'\n| |-ParmVarDecl 0x4960d10 &lt;col:32, col:39&gt; col:39 new_ancestor 'size_t':'int'\n| `-CompoundStmt 0x4960ef8 &lt;col:52, line:32:1&gt;\n|-FunctionDecl 0x49618d0 &lt;line:34:1, line:36:1&gt; line:34:6 dfs 'void (size_t, size_t)'\n| |-ParmVarDecl 0x4961750 &lt;col:10, col:17&gt; col:17 v 'size_t':'int'\n| |-ParmVarDecl 0x49617c0 &lt;col:19, col:26&gt; col:26 ct 'size_t':'int'\n| `-CompoundStmt 0x4961980 &lt;col:29, line:36:1&gt;\n`-FunctionDecl 0x4961c00 &lt;line:38:1, line:40:1&gt; line:38:5 main 'int (int, char **)'\n  |-ParmVarDecl 0x49619b0 &lt;col:10, col:14&gt; col:14 argc 'int'\n  |-ParmVarDecl 0x4961af0 &lt;col:20, col:31&gt; col:26 argv 'char **':'char **'\n  `-CompoundStmt 0x4961cb0 &lt;col:33, line:40:1&gt;\n</code></pre>\n\n<p>The correct solution is of course to not use <code>-cc1</code>, and just use the original file with <code>-c -Xclang -ast-dump</code>, but that produces a rather large amount of text (all the member functions of vector, pair, iostream, etc, etc). So if you are interested in a particular section, perhaps cut out required parts out of headers and only process the bits you actually need - all depends on what you are actually trying to achieve, of course.</p>\n"}], "owner": {"reputation": 1636, "user_id": 2487403, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/03c6ffd3ce47eb0a0d3707436013a90a?s=128&d=identicon&r=PG", "display_name": "Everv0id", "link": "https://stackoverflow.com/users/2487403/everv0id"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1377, "favorite_count": 1, "accepted_answer_id": 28465435, "answer_count": 2, "score": 1, "last_activity_date": 1423692306, "creation_date": 1423690587, "last_edit_date": 1423690938, "question_id": 28464978, "link": "https://stackoverflow.com/questions/28464978/clang-ast-dump-doesnt-show-some-global-variables", "title": "Clang ast-dump doesn&#39;t show some global variables", "body": "<p>I have a CPP file and I'm using clang to print all variables in global scope. The problem is following: command <code>clang -cc1 -ast-dump filename.cpp</code> doesn't show some global  variables:</p>\n\n<blockquote>\n  <p>|-VarDecl 0x2094370  N 'int' invalid</p>\n  \n  <p>|-VarDecl 0x20943e0  MAXN 'const int' invalid</p>\n  \n  <p>|-VarDecl 0x2094470  p 'int' invalid</p>\n  \n  <p>|-VarDecl 0x20944e0  u '_Bool' invalid</p>\n  \n  <p>|-VarDecl 0x2094550  ansv 'int' invalid</p>\n  \n  <p>|-VarDecl 0x20945c0  cost 'int' invalid</p>\n</blockquote>\n\n<p>My cpp file has following global variables: </p>\n\n<pre><code>size_t N,M;\nconst size_t MAXN = 40000;\nstd::vector&lt;std::pair&lt;size_t,size_t&gt; &gt; graph[MAXN],query[MAXN],qr;\nsize_t p[MAXN], ancestor[MAXN];\nbool u[MAXN];\nsize_t ansv[MAXN];\nsize_t cost[MAXN];\n</code></pre>\n\n<p>One can see that ast-dump didn't print some of global variables (for example, all <code>std::vector</code> variables have been missed). What am i doing wrong?</p>\n\n<p>UPD: full cpp file:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\n#include&lt;algorithm&gt;\n\nsize_t N,M;\nconst size_t MAXN = 40000;\nstd::vector&lt;std::pair&lt;size_t,size_t&gt; &gt; graph[MAXN],query[MAXN],qr;\nsize_t p[MAXN], ancestor[MAXN];\nbool u[MAXN];\nsize_t ansv[MAXN];\nsize_t cost[MAXN];\n\nsize_t find_set(size_t x){\n    //not important for my problem\n}\n\nvoid unite(size_t a, size_t b, size_t new_ancestor){\n    //not important for my problem\n}\n\nvoid dfs(size_t v,size_t ct){\n    //not important for my problem\n}\n\nint main(int argc, char* argv[]){\n    //not important for my problem\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "stl", "emscripten"], "answers": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 5, "last_activity_date": 1423690393, "creation_date": 1423690393, "answer_id": 28464932, "question_id": 28464713, "link": "https://stackoverflow.com/questions/28464713/emscripten-and-conversion-from-stdbind-to-stdfunction/28464932#28464932", "title": "Emscripten and conversion from std::bind to std::function", "body": "<p>You have a type mismatch. If you look at the compile error, <code>AnimatedSprite::beforeRenderCB</code> is of type:</p>\n\n<pre><code>void (AnimatedSprite::*)(MatrixStack &amp;, float)\n</code></pre>\n\n<p>But you're trying to convert it to a <code>std::function</code> with signature:</p>\n\n<pre><code>void(MatrixStack, float)\n</code></pre>\n\n<p>If you change your collection type to:</p>\n\n<pre><code>CBCollection&lt;void, MatrixStack&amp;, float&gt; BeforeRenderCBs;\n//                            ^\n</code></pre>\n\n<p>It should work.</p>\n"}], "owner": {"reputation": 23, "user_id": 4556489, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mZlIWoNllew/AAAAAAAAAAI/AAAAAAAAAQw/HbxTm5OXa7E/photo.jpg?sz=128", "display_name": "Marcell Horv&#225;th", "link": "https://stackoverflow.com/users/4556489/marcell-horv%c3%a1th"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 0, "accepted_answer_id": 28464932, "answer_count": 1, "score": 2, "last_activity_date": 1423690393, "creation_date": 1423689577, "question_id": 28464713, "link": "https://stackoverflow.com/questions/28464713/emscripten-and-conversion-from-stdbind-to-stdfunction", "title": "Emscripten and conversion from std::bind to std::function", "body": "<p>I'm trying to compile my project with emscripten.\nNatively in Visual Studio 2013 everything is ok.</p>\n\n<p>I store functions in this:</p>\n\n<pre><code>template&lt;typename Return, typename ...Arguments&gt;\nusing CBFunction = std::function&lt;Return(Arguments...)&gt;;\n\ntypedef unsigned int CBID;\n\ntemplate&lt;typename Return, typename ...Arguments&gt;\nclass CBCollection\n{\n    std::map&lt;CBID, CBFunction&lt;Return, Arguments...&gt;&gt; cbs;\npublic:\n    CBID addCB(CBFunction&lt;Return, Arguments...&gt; cb)\n    {\n        CBID id = findFreeID();\n        cbs[id] = cb;\n        return id;\n    }\n\n    ...\n}\n</code></pre>\n\n<p>Later I can add simple and member functions:</p>\n\n<pre><code>CBCollection&lt;void, MatrixStack, float&gt; BeforeRenderCBs;\n...\nAnimatedSprite::AnimatedSprite()\n{\n    using namespace placeholders;\n    BeforeRenderCBs.addCB(bind(&amp;AnimatedSprite::beforeRenderCB, this, _1, _2));\n}\n</code></pre>\n\n<p>with emscripten this is the result:</p>\n\n<pre><code>&lt;scratch space&gt;:624:1: note: expanded from here\n\"C:/Development/LexUnitEngine/Engine/include/Buffer.h\"\n^\nC:\\Development\\LexUnitEngine\\Engine\\source\\AnimatedSprite.cpp:76:24: error: no viable conversion from '__bind&lt;void (AnimatedSprite::*)(MatrixStack &amp;, float), AnimatedSprite *, std::__1::placeholders::__ph&lt;1&gt; &amp;, std::__1::placeholders::__ph&lt;2&gt; &amp;&gt;' to 'CBFunction&lt;void, MatrixStack, float&gt;'\n      (aka 'std::__1::function&lt;void (MatrixStack, float)&gt;')\n        BeforeRenderCBs.addCB(bind(&amp;AnimatedSprite::beforeRenderCB, this, _1, _2));\n                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nC:\\PROGRA~1\\EMSCRI~1\\EMSCRI~1\\129~1.0\\system\\include\\libcxx\\functional:1448:5: note: candidate constructor not viable: no known conversion from '__bind&lt;void (AnimatedSprite::*)(MatrixStack &amp;, float), AnimatedSprite *, std::__1::placeholders::__ph&lt;1&gt; &amp;, std::__1::placeholders::__ph&lt;2&gt; &amp;&gt;' to\n      'nullptr_t' for 1st argument\n    function(nullptr_t) _NOEXCEPT : __f_(0) {}\n    ^\nC:\\PROGRA~1\\EMSCRI~1\\EMSCRI~1\\129~1.0\\system\\include\\libcxx\\functional:1449:5: note: candidate constructor not viable: no known conversion from '__bind&lt;void (AnimatedSprite::*)(MatrixStack &amp;, float), AnimatedSprite *, std::__1::placeholders::__ph&lt;1&gt; &amp;, std::__1::placeholders::__ph&lt;2&gt; &amp;&gt;' to\n      'const std::__1::function&lt;void (MatrixStack, float)&gt; &amp;' for 1st argument\n    function(const function&amp;);\n    ^\nC:\\PROGRA~1\\EMSCRI~1\\EMSCRI~1\\129~1.0\\system\\include\\libcxx\\functional:1450:5: note: candidate constructor not viable: no known conversion from '__bind&lt;void (AnimatedSprite::*)(MatrixStack &amp;, float), AnimatedSprite *, std::__1::placeholders::__ph&lt;1&gt; &amp;, std::__1::placeholders::__ph&lt;2&gt; &amp;&gt;' to\n      'std::__1::function&lt;void (MatrixStack, float)&gt; &amp;&amp;' for 1st argument\n    function(function&amp;&amp;) _NOEXCEPT;\n    ^\nC:\\PROGRA~1\\EMSCRI~1\\EMSCRI~1\\129~1.0\\system\\include\\libcxx\\functional:1454:41: note: candidate template ignored: disabled by 'enable_if' [with _Fp = std::__1::__bind&lt;void (AnimatedSprite::*)(MatrixStack &amp;, float), AnimatedSprite *, std::__1::placeholders::__ph&lt;1&gt; &amp;, std::__1::placeholders::__ph&lt;2&gt;\n      &amp;&gt;]\n                                        __callable&lt;_Fp&gt;::value &amp;&amp;\n                                        ^\nC:/Development/LexUnitEngine/Engine/include/CallbackCollection.h:49:46: note: passing argument to parameter 'cb' here\n        CBID addCB(CBFunction&lt;Return, Arguments...&gt; cb)\n                                                    ^\n</code></pre>\n\n<p>I tried to switch the CBFunction to </p>\n\n<pre><code>std::function&lt;Return(Arguments...)\n</code></pre>\n\n<p>everywhere but it didn't solve the problem and I need the CBFunction other places.</p>\n\n<p>emscripten version is 1.29.0, clang 3.4</p>\n"}, {"tags": ["c#", "c++", ".net", "winapi", "windows-services"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1423693079, "post_id": 28464698, "comment_id": 45256922, "body": "Services run in session 0 which is a non interactive session"}, {"owner": {"reputation": 4487, "user_id": 1071834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dabd6a9127b355f6faad878258e4adac?s=128&d=identicon&r=PG", "display_name": "dodexahedron", "link": "https://stackoverflow.com/users/1071834/dodexahedron"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1423693214, "post_id": 28464698, "comment_id": 45256999, "body": "This isn&#39;t an interactive application and is launched with CREATE_NO_WINDOW.  Besides, as I mentioned, it works fine when I call a win32 application.  The problem only occurs when the child application is .Net."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1423693593, "post_id": 28464698, "comment_id": 45257206, "body": "Likely to be a session 0 issue. Some more debugging needed."}, {"owner": {"reputation": 4487, "user_id": 1071834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dabd6a9127b355f6faad878258e4adac?s=128&d=identicon&r=PG", "display_name": "dodexahedron", "link": "https://stackoverflow.com/users/1071834/dodexahedron"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1423694001, "post_id": 28464698, "comment_id": 45257376, "body": "Can you elaborate a bit?  I&#39;m not even sure what can be &quot;debugged&quot; in this situation. The .Net application fails to run at all. I can&#39;t even get it to write to a test output file.  I&#39;ll agree it&#39;s likely a session 0-related issue, since that&#39;s the most glaring difference between the two methods of execution (console vs service). But I already know/suspect that. I just don&#39;t know how to proceed."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1423694504, "post_id": 28464698, "comment_id": 45257581, "body": "Create a do nothing app and see if that works. Then make more complex."}, {"owner": {"reputation": 4487, "user_id": 1071834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dabd6a9127b355f6faad878258e4adac?s=128&d=identicon&r=PG", "display_name": "dodexahedron", "link": "https://stackoverflow.com/users/1071834/dodexahedron"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1423694695, "post_id": 28464698, "comment_id": 45257688, "body": "I&#39;ve already done this with a hello world application.  But, on your suggestion, I just gave it a shot with an application with an empty main().  Same behavior."}], "owner": {"reputation": 4487, "user_id": 1071834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dabd6a9127b355f6faad878258e4adac?s=128&d=identicon&r=PG", "display_name": "dodexahedron", "link": "https://stackoverflow.com/users/1071834/dodexahedron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1423694787, "creation_date": 1423689522, "last_edit_date": 1423694787, "question_id": 28464698, "link": "https://stackoverflow.com/questions/28464698/redirect-console-from-net-application-to-c-application-launched-by-a-service", "title": "Redirect console from .Net application to C++ application launched by a service", "body": "<p>I have a win32 application (call it wrapper) which, as part of its duties, launches another application (.net - call it child) and captures its output by redirecting the stdout of child to its own stdout.</p>\n\n<p>This works fine from the console.</p>\n\n<p>However, if wrapper is launched periodically by a .net windows service, wrapper runs just fine but child fails to run.  There is no .Net stack trace in the windows event viewer and the process exit code returned from child is 0xC06D007E, which equates to \"Unknown Software Exception.\"</p>\n\n<p>If I replace child with a win32 application, it launches, but there seems to be an encoding mismatch because the output gets turned into a bunch of missing glyphs.  But at least the application runs and returns exit code 0 in that case.</p>\n\n<p>So I have two problems, here:</p>\n\n<ol>\n<li>Why can't I launch child (.net) from wrapper (win32), when called from a service (.net)?</li>\n<li>If child is a win32 application, why is the character encoding messed up when wrapper is called through the service but not when called directly on the console?</li>\n</ol>\n\n<p>Here's a link to the wrapper application source code:\n<a href=\"http://pastebin.com/akgaR090\" rel=\"nofollow\">http://pastebin.com/akgaR090</a></p>\n\n<p>The source code of child is irrelevant, as a hello world application is sufficient to demonstrate the behavior.</p>\n\n<p>The .net service is calling the wrapper application with this code:\n<a href=\"http://pastebin.com/k0DYMB1f\" rel=\"nofollow\">http://pastebin.com/k0DYMB1f</a></p>\n\n<p>Child source code sufficient to replicate the issue:</p>\n\n<pre><code>public class Child\n{\n    public int Main(string[] args)\n    {\n\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "ascii"], "comments": [{"owner": {"reputation": 394243, "user_id": 50079, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ud1xq.png?s=128&g=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/50079/jon"}, "edited": false, "score": 2, "creation_date": 1423689607, "post_id": 28464687, "comment_id": 45255080, "body": "You do the exact same thing, changing what&#39;s inside the quotes."}, {"owner": {"reputation": 30567, "user_id": 151019, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ab97924548209ed725801c0a08c40d1e?s=128&d=identicon&r=PG", "display_name": "mmmmmm", "link": "https://stackoverflow.com/users/151019/mmmmmm"}, "edited": false, "score": 0, "creation_date": 1423689634, "post_id": 28464687, "comment_id": 45255093, "body": "In your firs sentence you show the numbers as char what happens if you use them as char e.g. char a = &#39;8&#39;;"}, {"owner": {"reputation": 97, "user_id": 4556672, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-lNF0L1fcAOE/AAAAAAAAAAI/AAAAAAAAEIY/bSKxTdjYDDw/photo.jpg?sz=128", "display_name": "Fl&#225;vio Mendes", "link": "https://stackoverflow.com/users/4556672/fl%c3%a1vio-mendes"}, "edited": false, "score": 0, "creation_date": 1423690521, "post_id": 28464687, "comment_id": 45255563, "body": "This worked for me. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 4, "creation_date": 1423690332, "post_id": 28464774, "comment_id": 45255470, "body": "That works because the C++ standard guarantees that the values of the characters <code>&#39;0&#39;</code>, <code>&#39;1&#39;</code>, etc. are contiguous, so for example <code>&#39;0&#39; + 9 == &#39;9&#39;</code>, even if the system doesn&#39;t use an ASCII-based character set. There is no similar guarantee for letters. For example, on an EBCDIC-based system, <code>&#39;a&#39; + 25 != &#39;z&#39;</code>."}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1423689765, "creation_date": 1423689765, "answer_id": 28464774, "question_id": 28464687, "link": "https://stackoverflow.com/questions/28464687/how-to-print-the-ascii-value-of-a-int-in-c/28464774#28464774", "title": "How to print the ASCII value of a int in C++?", "body": "<blockquote>\n  <p>For example, if I have the int 2, I want to get the ASCII value of 2, that it's 48.</p>\n</blockquote>\n\n<pre><code>std::cout &lt;&lt; (2 + '0'); \n</code></pre>\n\n<p>will print the ASCII value of <code>2</code>.</p>\n\n<p>If a variable <code>a</code> is known to be <code>0</code> - <code>9</code>, you can use:</p>\n\n<pre><code>std::cout &lt;&lt; (a + '0'); \n</code></pre>\n\n<p>to print the ASCII value corresponding to <code>a</code>.</p>\n"}], "owner": {"reputation": 97, "user_id": 4556672, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-lNF0L1fcAOE/AAAAAAAAAAI/AAAAAAAAEIY/bSKxTdjYDDw/photo.jpg?sz=128", "display_name": "Fl&#225;vio Mendes", "link": "https://stackoverflow.com/users/4556672/fl%c3%a1vio-mendes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8775, "favorite_count": 0, "accepted_answer_id": 28464774, "answer_count": 1, "score": 1, "last_activity_date": 1423689765, "creation_date": 1423689480, "last_edit_date": 1423689565, "question_id": 28464687, "link": "https://stackoverflow.com/questions/28464687/how-to-print-the-ascii-value-of-a-int-in-c", "title": "How to print the ASCII value of a int in C++?", "body": "<p>I'm beginner in c++ and I want to write a program that prints the ASCII value of the alphabet ('a', 'b',.... 'z') and of the numbers ('0'...'9').</p>\n\n<p>I'm able to print the ASCII value of the alphabet using the \"int()\" function.</p>\n\n<p>Example:</p>\n\n<pre><code>char a = 'a';\n\nstd::cout&lt;&lt;int(a);\n</code></pre>\n\n<p>The result of the code above was \"97\", as I expected.</p>\n\n<p>But, I don't know how to print the ASCII value of the numbers. For example, if I have the int 2, I want to get the ASCII value of 2, that it's 48.</p>\n\n<p>I've tried to use the function \"int()\" but the result it's the int value, not the ASCII value.</p>\n"}, {"tags": ["c++", "function", "variables", "dynamic"], "comments": [{"owner": {"reputation": 2424, "user_id": 1732865, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6pYGz.png?s=128&g=1", "display_name": "Conduit", "link": "https://stackoverflow.com/users/1732865/conduit"}, "edited": false, "score": 0, "creation_date": 1423688953, "post_id": 28464496, "comment_id": 45254725, "body": "Look into return values and reference variables. <a href=\"http://www.learncpp.com/\" rel=\"nofollow noreferrer\">This site should help a lot while you&#39;re learning!</a>"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1423688955, "post_id": 28464496, "comment_id": 45254726, "body": "You should look at how to pass <b>arguments</b> to functions and use <b>return</b> values."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 0, "creation_date": 1423689049, "post_id": 28464496, "comment_id": 45254772, "body": "<code>void candidates(int &amp;ppl)</code> and <code>void votes(int const ppl)</code>"}], "answers": [{"owner": {"reputation": 873, "user_id": 2278438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6445978d48253edb913792a2c2036927?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2278438/michael"}, "is_accepted": false, "score": 0, "last_activity_date": 1423689472, "creation_date": 1423689472, "answer_id": 28464683, "question_id": 28464496, "link": "https://stackoverflow.com/questions/28464496/how-do-i-bring-a-variables-value-from-one-function-to-another/28464683#28464683", "title": "How do I bring a variable&#39;s value from one function to another?", "body": "<p>Use <code>return</code>:  </p>\n\n<pre><code>int candidates()\n{\n    int ppl;\n    std::cin &gt;&gt; ppl;\n    ...\n    return ppl;\n}\n</code></pre>\n\n<p>Function candidates() now receives an <code>int</code> so now you can do this:</p>\n\n<pre><code>void votes()\n{\n    int *vote = new int[candidates()];\n}\n</code></pre>\n\n<p>You can also use global variables, or pass the variable <code>ppl</code> as <code>int&amp;</code> to function <code>candidates()</code> as argument, so <code>ppl</code> had to be created out of the function (let's say in main function), therefore it's available for every function you need.</p>\n"}, {"comments": [{"owner": {"reputation": 24988, "user_id": 435129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JA1hK.jpg?s=128&g=1", "display_name": "P i", "link": "https://stackoverflow.com/users/435129/p-i"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1423690803, "post_id": 28464780, "comment_id": 45255708, "body": "@juanchopanza: fixed. The main point I&#39;m trying to address is that whatever the answer is, it will be of little value. There is a more immediate problem than <i>&quot;not understanding parameters&quot;</i>, namely <i>&quot;lack of a structured approach to learning&quot;</i>."}], "owner": {"reputation": 24988, "user_id": 435129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JA1hK.jpg?s=128&g=1", "display_name": "P i", "link": "https://stackoverflow.com/users/435129/p-i"}, "is_accepted": false, "score": 1, "last_activity_date": 1423690616, "last_edit_date": 1495541141, "creation_date": 1423689795, "answer_id": 28464780, "question_id": 28464496, "link": "https://stackoverflow.com/questions/28464496/how-do-i-bring-a-variables-value-from-one-function-to-another/28464780#28464780", "title": "How do I bring a variable&#39;s value from one function to another?", "body": "<p>The pattern you want is probably:</p>\n\n<pre><code>std::vector&lt;string&gt; gather_data() {...}\n\nvoid use_data( std::vector&lt;string&gt; data ) { ... }\n</code></pre>\n\n<p>And then you can do:</p>\n\n<pre><code>auto data = gather_data();\nuse_data( data );\n</code></pre>\n\n<p>It would be better practice to make sure that use_data can't modify its argument, and that this argument is passed by reference.  So:</p>\n\n<pre><code>void use_data( const std::vector&lt;string&gt;&amp; data ) { ... }\n</code></pre>\n\n<p>A more advanced pattern would be to use a class:</p>\n\n<pre><code>class Foo {\n    std::vector&lt;string&gt; data;\npublic:\n    void gather() {...}\n    void use() {...}\n}\n\nFoo myFoo;\nmyFoo.gather();\nmyFoo.use();\n</code></pre>\n\n<p>In this case you can see that <code>Foo</code>'s instance methods have access to its <code>data</code>.</p>\n\n<p>You certainly don't want to be using global variables without very good reason.</p>\n\n<p>However, if you're asking a question at this basic level, it means you need to <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">read a book</a>.</p>\n\n<p>You will find it is impractical to try learning what is one of the most difficult languages around just by asking questions. Each answer will raise 10 more questions.</p>\n"}], "owner": {"reputation": 15, "user_id": 4119641, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3826e43476402499e6cfe9200831d106?s=128&d=identicon&r=PG&f=1", "display_name": "Legacy Wink", "link": "https://stackoverflow.com/users/4119641/legacy-wink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1423690616, "creation_date": 1423688816, "last_edit_date": 1423689960, "question_id": 28464496, "link": "https://stackoverflow.com/questions/28464496/how-do-i-bring-a-variables-value-from-one-function-to-another", "title": "How do I bring a variable&#39;s value from one function to another?", "body": "<p>Could someone please explain how to bring a value from a variable in one function to another function. I know that as soon as the function ends that variable's value in the function is cleaned out. But how do I tell it not to do that.</p>\n\n<p>I am trying to bring the <code>int ppl;</code> value from the candidates function into the votes function. But as you can see it won't do it on its own.</p>\n\n<pre><code>void candidates()\n{           \n    int ppl;\n    cout &lt;&lt; \"Hello please how many candidates are there?: \";\n    std::cin &gt;&gt; ppl;\n    string *cans = new string[ppl];\n    for (int i = 0; i &lt; ppl; i++)\n    {\n        cout &lt;&lt; \"Please type in the last name of candidate number: \" &lt;&lt; i + 1 &lt;&lt; endl;\n        cin &gt;&gt; cans[i];cout  &lt;&lt; endl &lt;&lt; endl;\n    }\n\n    for (int a = 0; a &lt; ppl; a++)\n    {\n        cout &lt;&lt; cans[a] &lt;&lt; endl &lt;&lt; endl;\n    }\n}\n\nvoid votes()\n{               \n    int *vote = new int[ppl];\n\n    // ...\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc", "sfml"], "answers": [{"comments": [{"owner": {"reputation": 1461, "user_id": 4279830, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000678071733/picture?type=large", "display_name": "Alexis Peters", "link": "https://stackoverflow.com/users/4279830/alexis-peters"}, "edited": false, "score": 0, "creation_date": 1423689032, "post_id": 28464462, "comment_id": 45254754, "body": "that&#39;s it, you&#39;re my hero :)"}], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1423688713, "creation_date": 1423688713, "answer_id": 28464462, "question_id": 28464430, "link": "https://stackoverflow.com/questions/28464430/error-member-in-class-class-does-not-name-a-type-c/28464462#28464462", "title": "error: `MEMBER` in `class CLASS` does not name a type; C++", "body": "<p>As the error states you need to have the type information in the deceleration.  You need to have:</p>\n\n<pre><code>float Config::cubeLength = 10.f;\nsf::Color Config::cellColor = sf::Color::Magenta;\n</code></pre>\n"}, {"owner": {"reputation": 193, "user_id": 1966904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaffbead10d196649a3d05fe4c4d54ac?s=128&d=identicon&r=PG", "display_name": "Th30n", "link": "https://stackoverflow.com/users/1966904/th30n"}, "is_accepted": false, "score": 1, "last_activity_date": 1423688813, "creation_date": 1423688813, "answer_id": 28464495, "question_id": 28464430, "link": "https://stackoverflow.com/questions/28464430/error-member-in-class-class-does-not-name-a-type-c/28464495#28464495", "title": "error: `MEMBER` in `class CLASS` does not name a type; C++", "body": "<p>The type information of those variables is missing when you do the assignment.</p>\n\n<p>This should fix it:</p>\n\n<pre><code>static float Config::cubeLength = 10.f;\nstatic sf::Color Config::cellColor = sf::Color::Magenta;\n</code></pre>\n"}], "owner": {"reputation": 1461, "user_id": 4279830, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000678071733/picture?type=large", "display_name": "Alexis Peters", "link": "https://stackoverflow.com/users/4279830/alexis-peters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 28464462, "answer_count": 2, "score": 1, "last_activity_date": 1423688813, "creation_date": 1423688585, "last_edit_date": 1592644375, "question_id": 28464430, "link": "https://stackoverflow.com/questions/28464430/error-member-in-class-class-does-not-name-a-type-c", "title": "error: `MEMBER` in `class CLASS` does not name a type; C++", "body": "<p>Hey there i have constructed a class to store some Information as static Members of the class.\nAt Compile-time i got the error:</p>\n<blockquote>\n<p>error: \u2018cubeLength\u2019 in \u2018class Config\u2019 does not name a type</p>\n<p>error: \u2018cellColor\u2019 in \u2018class Config\u2019 does not name a type</p>\n</blockquote>\n<p>Content of Config.h</p>\n<pre><code>#ifndef CONFIG_H\n#define CONFIG_H\n\n#include &lt;SFML/Graphics.hpp&gt;\n\nclass Config {\npublic: \n    static float     cubeLength ;\n    static sf::Color cellColor;\nprivate:\n    Config();\n    Config(const Config&amp; orig);\n};\n\nConfig::cubeLength = 10.f; //error thrown here\nConfig::cellColor  = sf::Color::Magenta;  //error thrown here\n\n\n#endif  /* CONFIG_H */\n</code></pre>\n<p>I am using GNU Compiler on Linux.\nPlease help me Out</p>\n"}, {"tags": ["c++", "matrix", "cuda"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1423718012, "post_id": 28464418, "comment_id": 45264456, "body": "A dense float matrix of 6 million by 8 million elements would require approx. 192 TB of storage (double would be twice that.) If one thread were assigned per element, it would require &quot;only&quot; approx. 48 trillion threads -- ~35 bits of addressing. CUDA grid dims on cc3.0+ devices provide (theoretically) ~63 bits of <i>block</i> address space, not to mention the availability of 1024 threads per block (so over 70 bits of addressable thread-space.) This question seems to be based on false premises: &quot;something arbitrarily large for which there cannot be a proper Grid and Block size for any modern GPU.&quot;"}], "answers": [{"owner": {"reputation": 61, "user_id": 4518289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2a00ce1288c8c65970889b2d148ebd?s=128&d=identicon&r=PG&f=1", "display_name": "MehrZ", "link": "https://stackoverflow.com/users/4518289/mehrz"}, "is_accepted": false, "score": 2, "last_activity_date": 1423691833, "last_edit_date": 1423691833, "creation_date": 1423691293, "answer_id": 28465176, "question_id": 28464418, "link": "https://stackoverflow.com/questions/28464418/calculating-very-large-matrix-products-with-cuda/28465176#28465176", "title": "Calculating (very) large matrix products with CUDA", "body": "<p>The main problem with very large matrix is  not the number of blocks or number of threads. The main problem is that you cannot fit the whole matrix in GPU's DRAM memory. So for doing the multiplication, you need to manually use tiling to divide the input matrix into tiles that you can fit in the GPU's memory. Then,  you need to run matrix multiplication on that tile on GPU with as many threads as you need and then return the tile result back to the host (CPU).</p>\n\n<p>When you are working on these big tiles on the GPU, you need to launch 1000s of threads to get the performance that you need. launching only one thread does not help you in any way.</p>\n\n<p>for more information you can look at this paper:</p>\n\n<blockquote>\n  <p>CUDA Based Fast Implementation of Very Large Matrix Computation</p>\n</blockquote>\n\n<p>I just found it by googling \"large matrix multiplication CUDA\"</p>\n"}], "owner": {"reputation": 4406, "user_id": 890610, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/eddf21571b25e3b31d7aeb62a749519c?s=128&d=identicon&r=PG", "display_name": "drjrm3", "link": "https://stackoverflow.com/users/890610/drjrm3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1198, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423691833, "creation_date": 1423688514, "last_edit_date": 1495542247, "question_id": 28464418, "link": "https://stackoverflow.com/questions/28464418/calculating-very-large-matrix-products-with-cuda", "title": "Calculating (very) large matrix products with CUDA", "body": "<p>I am just beginning to learn some <code>cuda</code> programming and I am interested how to handle calculation of large matrices which surpass the Block/thread sizes.</p>\n\n<p>For example, I have <a href=\"https://stackoverflow.com/questions/18815489/cuda-tiled-matrix-matrix-multiplication-with-shared-memory-and-matrix-size-whic\">seen code</a> which shows how to perform tiled matrix multiplication but it fails with the Block size and grid size are too small. In the mentioned code, if the Block size and Grid size are each set to <code>1</code>, then only the first element of the final matrix will be computed.</p>\n\n<p>The answer is simple: call the kernel with larger block and grid sizes, but what happens when I want to perform a matrix multiplication with 8 million rows and 6 million columns - something arbitrarily large for which there cannot be a proper Grid and Block size for any modern GPU?</p>\n\n<p>Where can I find example code or an algorithm for how to work with this sort of thing? I believe that the simple case should be a matrix multiplication algorithm which works if called with <code>&lt;&lt;&lt;1,1&gt;&gt;&gt;</code> and any algorithm which can account for this call should be able to account for any larger matrix.</p>\n"}, {"tags": ["c++", "c", "memory", "libraries"], "answers": [{"comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1423688743, "post_id": 28464411, "comment_id": 45254632, "body": "@pm100 it&#39;s perfectly well-defined. All what&#39;s required by the standards is what&#39;s written here. On Stack Overflow, we don&#39;t provide &quot;of course it just works&quot; answers. Asserting that is actually very rude."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1423688891, "post_id": 28464411, "comment_id": 45254698, "body": "so some part of the c++ standard say the the result of new is identical to the result of malloc (apart from the constructor invokation side-effect)"}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1423688962, "post_id": 28464411, "comment_id": 45254728, "body": "@pm100: In a way, yes. It&#39;s in the same memory space (as proven by the fact that both <code>new</code> and <code>malloc</code> can create pointers of type <code>T*</code>)."}], "owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "is_accepted": true, "score": 10, "last_activity_date": 1423689117, "last_edit_date": 1423689117, "creation_date": 1423688469, "answer_id": 28464411, "question_id": 28464397, "link": "https://stackoverflow.com/questions/28464397/is-it-safe-to-pass-memory-allocated-using-new-to-c-libraries/28464411#28464411", "title": "Is it safe to pass memory allocated using &quot;new&quot; to C libraries?", "body": "<p>Memory is memory, and it does not matter how it was allocated.</p>\n\n<p>As long as you're matching <code>new</code> with <code>delete</code>, <code>new[]</code> with <code>delete[]</code> and <code>malloc</code>/<code>calloc</code> with <code>free</code> (also <code>realloc</code>), you're okay.</p>\n\n<p>If you think about it, even C allocates memory in different places, and it works fine --- if a library expects an <code>int</code>, you can allocate it either on the stack, or on the heap (or in some global storage):</p>\n\n<pre><code>int a;\nint* b = malloc(sizeof(int));\nstatic int c;\n\nsome_func(&amp;a);\nsome_func(b);\nsome_func(&amp;c);\n</code></pre>\n"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 7, "last_activity_date": 1423688531, "creation_date": 1423688531, "answer_id": 28464419, "question_id": 28464397, "link": "https://stackoverflow.com/questions/28464397/is-it-safe-to-pass-memory-allocated-using-new-to-c-libraries/28464419#28464419", "title": "Is it safe to pass memory allocated using &quot;new&quot; to C libraries?", "body": "<blockquote>\n  <p>Does that mean that I should avoid using new for memory that will be used by a C library?</p>\n</blockquote>\n\n<p>Not at all. The memory is the same, so if you provide a safe way to deallocate the memory, you can definitely pass that memory to a C library.</p>\n\n<pre><code>int *p = new int(42);\nlib_func(p);\ndelete p;\n</code></pre>\n\n<p>Here is another example:</p>\n\n<pre><code>extern \"C\" {\n    int* make_buffer(size_t sz) {\n        return new int[sz];\n    }\n    void use_buffer(int* buf) {\n        ... // do something\n    }\n    void free_buffer(int* buf) {\n        delete[] buf;\n    }\n}\n</code></pre>\n\n<p>The code above lets your C code request dynamically allocated memory from your C++ library.</p>\n"}, {"owner": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "is_accepted": false, "score": 4, "last_activity_date": 1423688561, "creation_date": 1423688561, "answer_id": 28464423, "question_id": 28464397, "link": "https://stackoverflow.com/questions/28464397/is-it-safe-to-pass-memory-allocated-using-new-to-c-libraries/28464423#28464423", "title": "Is it safe to pass memory allocated using &quot;new&quot; to C libraries?", "body": "<p>It is memory as any other so it is safe as long as the C library does not <code>free</code> it.</p>\n\n<p>Note that in your example, you can also use memory on stack which has no allocation or deallocation functions:</p>\n\n<pre><code>void func()\n{\n    int p;\n    lib_func(&amp;p);\n}\n</code></pre>\n"}], "owner": {"reputation": 3512, "user_id": 3787875, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/90a3200499665173ac6fad85869443ba?s=128&d=identicon&r=PG&f=1", "display_name": "wefwefa3", "link": "https://stackoverflow.com/users/3787875/wefwefa3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "accepted_answer_id": 28464411, "answer_count": 3, "score": 4, "last_activity_date": 1423689117, "creation_date": 1423688408, "question_id": 28464397, "link": "https://stackoverflow.com/questions/28464397/is-it-safe-to-pass-memory-allocated-using-new-to-c-libraries", "title": "Is it safe to pass memory allocated using &quot;new&quot; to C libraries?", "body": "<p>I know that <code>new</code> <code>delete</code> are incombatible with <code>malloc</code> <code>free</code>.</p>\n\n<p>Does that mean that I should avoid using <code>new</code> for memory that will be used by a C library?</p>\n\n<p>What are things that can go wrong when using <code>new</code> instead of <code>malloc</code> when I will pass the memory to a C library?</p>\n\n<pre><code>void func()\n{\n    int *p = new int(42);\n\n    // Should I insist on using malloc for p if this function is a part\n    // of a C library?\n    lib_func(p);\n}\n</code></pre>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1423688608, "post_id": 28464367, "comment_id": 45254580, "body": "If you search for something starting at the position where you already found it, it will just give you the same position again."}], "answers": [{"comments": [{"owner": {"reputation": 587, "user_id": 4407315, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1d26c3fc1a90c274566fd1c7912228fc?s=128&d=identicon&r=PG&f=1", "display_name": "tanz", "link": "https://stackoverflow.com/users/4407315/tanz"}, "edited": false, "score": 0, "creation_date": 1423689255, "post_id": 28464470, "comment_id": 45254884, "body": "I get squiggly at <code>iss</code> &quot;which says incomplete type not allowed&quot;."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 587, "user_id": 4407315, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1d26c3fc1a90c274566fd1c7912228fc?s=128&d=identicon&r=PG&f=1", "display_name": "tanz", "link": "https://stackoverflow.com/users/4407315/tanz"}, "edited": false, "score": 0, "creation_date": 1423689280, "post_id": 28464470, "comment_id": 45254896, "body": "@tanz Add <code>#include &lt;sstream&gt;</code>"}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 1, "last_activity_date": 1423688747, "creation_date": 1423688747, "answer_id": 28464470, "question_id": 28464367, "link": "https://stackoverflow.com/questions/28464367/regarding-manipulation-in-string/28464470#28464470", "title": "Regarding Manipulation in String", "body": "<p>Your loop doesn't make any sense. Your logic is done one time for each character in <code>b</code>, but the logic itself doesn't depend on <code>i</code>. So whatever it is the body of your loop does will just add the same string <code>b.length()</code> times to <code>patternVector</code>.</p>\n\n<p>What you want to do instead is take advantage of what you know about <code>b</code>: it's a bunch of words, space-separated, some of which start with <code>\"*.\"</code>. So let's do it that way:</p>\n\n<pre><code>void FileMgr::parseCmdLineForTextSearch(const std::string&amp; b)\n//                   don't need a copy  ^^^^^^^^^^^^^^^^^^\n{\n    std::istringstream iss(b);\n    std::string word;\n    while (iss &gt;&gt; word) {                  // for each word in b\n        if (word.find(\"*.\") == 0) {        // if it starts with *.\n            patternVector.push_back(word); // add it\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 587, "user_id": 4407315, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1d26c3fc1a90c274566fd1c7912228fc?s=128&d=identicon&r=PG&f=1", "display_name": "tanz", "link": "https://stackoverflow.com/users/4407315/tanz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 28464470, "answer_count": 1, "score": 0, "last_activity_date": 1423689460, "creation_date": 1423688268, "last_edit_date": 1423688633, "question_id": 28464367, "link": "https://stackoverflow.com/questions/28464367/regarding-manipulation-in-string", "title": "Regarding Manipulation in String", "body": "<p>I have a string as <code>\"Bla bla *.h *.cpp *.png\"</code> . Now I want to put all the file names in vector. So my vector will have </p>\n\n<pre><code>vec[0] = \"*.h\";\nvec[1] = \"*.cpp\";\nvec[2] = \"*.png\";\n</code></pre>\n\n<p>So below is what I wrote.</p>\n\n<pre><code>void FileMgr::parseCmdLineForTextSearch(std::string b)\n{\n    for (int i = 0; i &lt; b.length(); i++)\n    {\n        std::size_t pos = b.find(\" *.\");\n\n        std::cout &lt;&lt; \"pos:\" &lt;&lt; pos &lt;&lt; \"\\n\";\n        std::size_t pos_ = b.find(pos, \" \"); // this line does not\n               // work, but I want to somehow get the position where\n               // the blank space again started so that I can get the\n               // the substring from **pos** to just before that blank space\n               //thus giving me the exact end point of *.cpp or *.h  \n        std::string str2 = b.substr(pos, pos_);\n                                         //^^ this pos_ will help //                     \n               //me to get the required substring i.e, *.cpp or *.h\n        patternVector.push_back(str); \n\n    }\n}\n</code></pre>\n\n<p>P.S: there might be other better way to implement it. But I somehow want to do it the way I mentioned above. Also I need to make sure that even if I am finding the end point of blank space it should always be after the whole text. I dont want to end up finding the blank space which is present in between the text <code>bla bla</code>.Is it possible? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 36599, "user_id": 359284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3260a8f331e6869fbf075666eb3b387a?s=128&d=identicon&r=PG", "display_name": "Kevin Brown", "link": "https://stackoverflow.com/users/359284/kevin-brown"}, "edited": false, "score": 1, "creation_date": 1423688458, "post_id": 28464293, "comment_id": 45254501, "body": "I&#39;m pretty sure the UAC <i>is designed to not allow this</i>."}, {"owner": {"reputation": 937, "user_id": 3574813, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/57beee0cfcfac94f2f607a76c5a65ff9?s=128&d=identicon&r=PG", "display_name": "cindywmiao", "link": "https://stackoverflow.com/users/3574813/cindywmiao"}, "reply_to_user": {"reputation": 36599, "user_id": 359284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3260a8f331e6869fbf075666eb3b387a?s=128&d=identicon&r=PG", "display_name": "Kevin Brown", "link": "https://stackoverflow.com/users/359284/kevin-brown"}, "edited": false, "score": 0, "creation_date": 1423688674, "post_id": 28464293, "comment_id": 45254601, "body": "@KevinBrown Why there is C# code could do this??"}, {"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 3, "creation_date": 1423688857, "post_id": 28464293, "comment_id": 45254683, "body": "So your question really is, &quot;How can I set a registry value using C++&quot;..."}], "answers": [{"comments": [{"owner": {"reputation": 937, "user_id": 3574813, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/57beee0cfcfac94f2f607a76c5a65ff9?s=128&d=identicon&r=PG", "display_name": "cindywmiao", "link": "https://stackoverflow.com/users/3574813/cindywmiao"}, "edited": false, "score": 0, "creation_date": 1423690646, "post_id": 28464505, "comment_id": 45255628, "body": "I updated my questions and use RegOpenKeyEx and RegSetValueExW. But it does not work..."}], "owner": {"reputation": 2255, "user_id": 670358, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Q6DjA.png?s=128&g=1", "display_name": "Kaslai", "link": "https://stackoverflow.com/users/670358/kaslai"}, "is_accepted": false, "score": 3, "last_activity_date": 1423688865, "creation_date": 1423688865, "answer_id": 28464505, "question_id": 28464293, "link": "https://stackoverflow.com/questions/28464293/in-c-how-to-disable-windows-uac-control-by-program/28464505#28464505", "title": "In c++, how to disable windows UAC control by program?", "body": "<p>To answer your stated question, you can set registry keys with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724921(v=vs.85).aspx\" rel=\"nofollow\"><code>RegSetKeyValue</code></a>, however you have to get past UAC in order to change the registry. To answer your implicit question, yes you could probably disable UAC programatically for malicious purposes, however you have to get past UAC in the first place to do so. Once you're on the other side of the airtight hatchway, you can do whatever you want of course. However you still have to get past the UAC hurdle.</p>\n\n<p>Furthermore, I highly recommend you do a cursory google search before posting a question like this. The Windows C API is documented very well on MSDN.</p>\n"}, {"owner": {"reputation": 128, "user_id": 2519355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tbBza.jpg?s=128&g=1", "display_name": "zgrw", "link": "https://stackoverflow.com/users/2519355/zgrw"}, "is_accepted": false, "score": 0, "last_activity_date": 1468497802, "creation_date": 1468497802, "answer_id": 38373723, "question_id": 28464293, "link": "https://stackoverflow.com/questions/28464293/in-c-how-to-disable-windows-uac-control-by-program/38373723#38373723", "title": "In c++, how to disable windows UAC control by program?", "body": "<p>Your code is actually very close;</p>\n\n<pre><code>DWORD val = 0;\nHKEY uaKey;\nRegOpenKeyEx(HKEY_LOCAL_MACHINE,\"SOFTWARE\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Policies\\\\System\", 0, KEY_WRITE , &amp;uaKey);\nif(uaKey == NULL)\n{\n    //Handle error message here\n}\nelse\n{\n    if (RegSetValueEx (uaKey, \"EnableLUA\", 0, REG_DWORD, (const BYTE *)&amp;val, sizeof(val)) != ERROR_SUCCESS)\n    {\n        //Error\n    }\n    else\n    {\n        //Success\n    }\n    RegCloseKey(uaKey);\n}\n</code></pre>\n"}], "owner": {"reputation": 937, "user_id": 3574813, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/57beee0cfcfac94f2f607a76c5a65ff9?s=128&d=identicon&r=PG", "display_name": "cindywmiao", "link": "https://stackoverflow.com/users/3574813/cindywmiao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1046, "favorite_count": 1, "answer_count": 2, "score": -3, "last_activity_date": 1468497802, "creation_date": 1423688023, "last_edit_date": 1423690807, "question_id": 28464293, "link": "https://stackoverflow.com/questions/28464293/in-c-how-to-disable-windows-uac-control-by-program", "title": "In c++, how to disable windows UAC control by program?", "body": "<p>In program C++, how to change the windows UAC to always notify or never notify.\nManually, I should change like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/smZYE.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/JJFgB.png\" alt=\"enter image description here\"></p>\n\n<p>I found C# code from Internet:</p>\n\n<pre><code>const string UACkey = @\"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\";\nconst string Subkey = \"EnableLUA\";\nRegistryUtilities.SetValue(UACkey, Subkey, **1**, Microsoft.Win32.RegistryValueKind.DWord, RegistryUtilities.WOW64Key.Key64);\n</code></pre>\n\n<p>Does somebody know how to change into c++ code?</p>\n\n<p>I tried to change the Registry with c++\uff0c but it does not work.</p>\n\n<pre><code>HKEY hKey = NULL;\nLONG lResult = 0;\nBOOL fSuccess = TRUE;\nDWORD dwSize;\n\nconst size_t count = MAX_PATH*2;\nwchar_t szValue[count] = {};\n\nlResult = RegOpenKeyExW(HKEY_CURRENT_USER, L\"HKEY_LOCAL_MACHINE\\\\SOFTWARE\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Policies\\\\System\",  0, (KEY_WRITE | KEY_READ),  &amp;hKey);\n\n\nfSuccess = (lResult == 0);\n\nif (fSuccess)\n{\n    dwSize = (wcslen(szValue)+1)*2;\n    lResult = RegSetValueExW(hKey, L\"EnableLUA\", 0, REG_SZ, (BYTE*)szValue, dwSize);\n    fSuccess = (lResult == 0);\n}\n\nif (hKey != NULL)\n{\n    RegCloseKey(hKey);\n    hKey = NULL;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 6, "creation_date": 1423688007, "post_id": 28464259, "comment_id": 45254276, "body": "The first one has an irrecoverable memory leak. The second one has a potential memory leak but the caller can still de-allocate. I suggest spending some time learning C++ from some good books. It will take you 300 years to learn one trivial question at a time."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1423688279, "post_id": 28464259, "comment_id": 45254408, "body": "Why don&#39;t you try it? Smells like homework to me..."}, {"owner": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "edited": false, "score": 0, "creation_date": 1423688365, "post_id": 28464259, "comment_id": 45254449, "body": "Please explain what is going on in the second function. Is it equivalent to returning a pointer?"}, {"owner": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "edited": false, "score": 0, "creation_date": 1423688429, "post_id": 28464259, "comment_id": 45254483, "body": "Well, I did and finished my homework just fine. I just started thinking beyond it. If you&#39;re going to chastise me for that, then I&#39;ll stop learning C++ and learn Java instead. That will be bad, bad for C++."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1423688438, "post_id": 28464259, "comment_id": 45254489, "body": "Which part is unclear to you? Which parts are clear? If you tried to run that code, what did you find out?"}, {"owner": {"reputation": 1950, "user_id": 3893186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a95a98901f66226fa034ad0edb1caae4?s=128&d=identicon&r=PG&f=1", "display_name": "mfuchs", "link": "https://stackoverflow.com/users/3893186/mfuchs"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1423688861, "post_id": 28464259, "comment_id": 45254685, "body": "No big loss when you are so easily turned off of C++. As @juanchopanza mentioned getting a book is the way to go. Otherwise you&#39;ll always have misconceptions how C++ works and as a result will create bad code."}, {"owner": {"reputation": 597, "user_id": 3780453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb497d2db4258621936c283d2fa22e67?s=128&d=identicon&r=PG&f=1", "display_name": "Slyps", "link": "https://stackoverflow.com/users/3780453/slyps"}, "edited": false, "score": 0, "creation_date": 1423689037, "post_id": 28464259, "comment_id": 45254761, "body": "Have a look at <a href=\"http://stackoverflow.com/questions/57483/what-are-the-differences-between-a-pointer-variable-and-a-reference-variable-in\">this</a>, it should answer alot of your future questions about pointers/references."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 2, "creation_date": 1423689178, "post_id": 28464259, "comment_id": 45254844, "body": "@AnonymousAndy: Manual resource management can be complex and error prone. I suggest you stop using <code>new</code> until you know the language better. There are reasons why we have <code>std::string</code> and containers like <code>std::vector</code>, they manage memory and hide this complexity so you can get on with your actual programming logic."}], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "edited": false, "score": 0, "creation_date": 1423688527, "post_id": 28464338, "comment_id": 45254533, "body": "Ok, so is the second function equivalent to returning a pointer?"}], "owner": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "is_accepted": false, "score": 0, "last_activity_date": 1423688171, "creation_date": 1423688171, "answer_id": 28464338, "question_id": 28464259, "link": "https://stackoverflow.com/questions/28464259/c-is-there-anything-wrong-with-this-code-it-compiles-fine-but-people-tell/28464338#28464338", "title": "C++ :: Is there anything wrong with this code? It compiles fine but people tell me there will be a memory leak", "body": "<p>When you declare <code>new</code> variables in c++ they are allocated on the heap.  When the variables go out of scope (like when the program ends), the memory stays allocated, unless you explicitly <code>delete</code> them in your code.</p>\n\n<p>You should read <a href=\"http://www.cplusplus.com/doc/tutorial/dynamic/\" rel=\"nofollow\">this</a></p>\n"}, {"comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "edited": false, "score": 0, "creation_date": 1423688546, "post_id": 28464344, "comment_id": 45254545, "body": "@AnonymousAndy The second function returns a <i>reference</i> (<code>&amp;</code> syntax) to the newly allocated object. It&#39;s almost equivalent to returning a pointer, except that the variable is not a memory address and without the pointer dereference syntax hassle, and <code>nullptr</code> is not possible using references."}], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 6, "last_activity_date": 1423688361, "last_edit_date": 1423688361, "creation_date": 1423688187, "answer_id": 28464344, "question_id": 28464259, "link": "https://stackoverflow.com/questions/28464259/c-is-there-anything-wrong-with-this-code-it-compiles-fine-but-people-tell/28464344#28464344", "title": "C++ :: Is there anything wrong with this code? It compiles fine but people tell me there will be a memory leak", "body": "<p>Yes, there certainly is something wrong.</p>\n\n<p><code>someFunc1()</code> will definitely cause a memory leak, because the memory address of the allocated object is lost.</p>\n\n<p><code>someFunc2()</code> will cause a risk for a memory leak, because the user of the function has to remember to delete the returned object with a weird syntax (<code>delete &amp;object</code>).</p>\n\n<p>Neither of them is good C++. A correct version would be:</p>\n\n<pre><code>Student someFunc3() {\n    return Student(\"John\",25); \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 759, "user_id": 4524862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DwQeLaM9ZoM/AAAAAAAAAAI/AAAAAAAAAk8/H54y0WxDtZw/photo.jpg?sz=128", "display_name": "ftynse", "link": "https://stackoverflow.com/users/4524862/ftynse"}, "edited": false, "score": 0, "creation_date": 1423690047, "post_id": 28464348, "comment_id": 45255314, "body": "An optimizing compiler may however apply copy elision in the first case.  But there is no guarantee it will."}], "owner": {"reputation": 759, "user_id": 4524862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DwQeLaM9ZoM/AAAAAAAAAAI/AAAAAAAAAk8/H54y0WxDtZw/photo.jpg?sz=128", "display_name": "ftynse", "link": "https://stackoverflow.com/users/4524862/ftynse"}, "is_accepted": false, "score": 3, "last_activity_date": 1423688198, "creation_date": 1423688198, "answer_id": 28464348, "question_id": 28464259, "link": "https://stackoverflow.com/questions/28464259/c-is-there-anything-wrong-with-this-code-it-compiles-fine-but-people-tell/28464348#28464348", "title": "C++ :: Is there anything wrong with this code? It compiles fine but people tell me there will be a memory leak", "body": "<p>The first function allocates an object, that dereferences it and returns.  By default, return does a <em>copy</em> of object.  Thus the originally allocated object still exists, but is not accessible anymore.  Which is a memory leak by definition.</p>\n\n<p>In the second case, however, the reference to the allocated object is returned rather than a copy.  This way, the caller may still take an address of the object and delete it.</p>\n"}], "owner": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1423688361, "creation_date": 1423687937, "question_id": 28464259, "link": "https://stackoverflow.com/questions/28464259/c-is-there-anything-wrong-with-this-code-it-compiles-fine-but-people-tell", "title": "C++ :: Is there anything wrong with this code? It compiles fine but people tell me there will be a memory leak", "body": "<p>Assume that there is a user defined class <code>Student</code>. Consider the following two functions:</p>\n\n<pre><code>Student someFunc1() {\n    return *(new Student(\"John\",25)); \n}\n\nStudent&amp; someFunc2() {\n    return *(new Student(\"John\",25)); \n}\n</code></pre>\n\n<p>Without going into the details as to why they have been implemented the way they have been, are they both correct? Somebody told me that there would be a memory leak but how come?</p>\n"}, {"tags": ["c++", "macos", "qt", "opencv"], "comments": [{"owner": {"reputation": 8289, "user_id": 2013738, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e411bdd253abc6ef58624ff72fd2b369?s=128&d=identicon&r=PG", "display_name": "Simon Warta", "link": "https://stackoverflow.com/users/2013738/simon-warta"}, "edited": false, "score": 0, "creation_date": 1423687676, "post_id": 28464162, "comment_id": 45254061, "body": "Did you entirely remove your build directories?"}, {"owner": {"reputation": 5439, "user_id": 824624, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9ad3e55c48b6ac8ad2127001421a34ef?s=128&d=identicon&r=PG", "display_name": "user824624", "link": "https://stackoverflow.com/users/824624/user824624"}, "reply_to_user": {"reputation": 8289, "user_id": 2013738, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e411bdd253abc6ef58624ff72fd2b369?s=128&d=identicon&r=PG", "display_name": "Simon Warta", "link": "https://stackoverflow.com/users/2013738/simon-warta"}, "edited": false, "score": 0, "creation_date": 1423688619, "post_id": 28464162, "comment_id": 45254583, "body": "Hi,Simon, I tried to remove the folder and rebuild again, but still not working. So far I only changed the qmake.conf in the macx-clang, which the clang64bit compiler for QT. but I am not sure whether I am truly using clang compiler or g++ compiler, it could be a issue, what do you think, I am trying out on this"}, {"owner": {"reputation": 5439, "user_id": 824624, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9ad3e55c48b6ac8ad2127001421a34ef?s=128&d=identicon&r=PG", "display_name": "user824624", "link": "https://stackoverflow.com/users/824624/user824624"}, "reply_to_user": {"reputation": 8289, "user_id": 2013738, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e411bdd253abc6ef58624ff72fd2b369?s=128&d=identicon&r=PG", "display_name": "Simon Warta", "link": "https://stackoverflow.com/users/2013738/simon-warta"}, "edited": false, "score": 0, "creation_date": 1423688792, "post_id": 28464162, "comment_id": 45254651, "body": "when I go to QT preference compilers section, I can see gcc 32bit , gcc 64 bit, clang 32 bit, clang 64bit auto detected, but which one I am using exactly,how do I check which compiler I am using"}, {"owner": {"reputation": 8289, "user_id": 2013738, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e411bdd253abc6ef58624ff72fd2b369?s=128&d=identicon&r=PG", "display_name": "Simon Warta", "link": "https://stackoverflow.com/users/2013738/simon-warta"}, "edited": false, "score": 0, "creation_date": 1423688943, "post_id": 28464162, "comment_id": 45254718, "body": "Are you using Qt Creator? You can check which compiler is used in the tab &quot;[4] Compile&quot;. You might need to add <a href=\"https://gist.github.com/webmaster128/d26e2bc1b8ef4d91a459\" rel=\"nofollow noreferrer\">gist.github.com/webmaster128/d26e2bc1b8ef4d91a459</a> in your .pro file too"}, {"owner": {"reputation": 5439, "user_id": 824624, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9ad3e55c48b6ac8ad2127001421a34ef?s=128&d=identicon&r=PG", "display_name": "user824624", "link": "https://stackoverflow.com/users/824624/user824624"}, "reply_to_user": {"reputation": 8289, "user_id": 2013738, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e411bdd253abc6ef58624ff72fd2b369?s=128&d=identicon&r=PG", "display_name": "Simon Warta", "link": "https://stackoverflow.com/users/2013738/simon-warta"}, "edited": false, "score": 0, "creation_date": 1423690059, "post_id": 28464162, "comment_id": 45255321, "body": "I am using QT creator,  I shared the snapshot of my config to you, <a href=\"https://www.dropbox.com/s/sits5nkqyga0ahc/Screenshot%202015-02-11%2021.22.35.png?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/sits5nkqyga0ahc/&hellip;</a>, it seems to me that the compiler is g++, so I changed the macx-clang-32/qmake.conf, QMAKE_MACOSX_DEPLOYMENT_TARGET = 10.9, removed the old build , added the things you mentoned in the .pro. but still not working"}, {"owner": {"reputation": 8289, "user_id": 2013738, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e411bdd253abc6ef58624ff72fd2b369?s=128&d=identicon&r=PG", "display_name": "Simon Warta", "link": "https://stackoverflow.com/users/2013738/simon-warta"}, "edited": false, "score": 0, "creation_date": 1423691365, "post_id": 28464162, "comment_id": 45256019, "body": "Well, you cannot use clang Qt libraries with g++. Which compiler version of Qt did you install?"}, {"owner": {"reputation": 5439, "user_id": 824624, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9ad3e55c48b6ac8ad2127001421a34ef?s=128&d=identicon&r=PG", "display_name": "user824624", "link": "https://stackoverflow.com/users/824624/user824624"}, "reply_to_user": {"reputation": 8289, "user_id": 2013738, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e411bdd253abc6ef58624ff72fd2b369?s=128&d=identicon&r=PG", "display_name": "Simon Warta", "link": "https://stackoverflow.com/users/2013738/simon-warta"}, "edited": false, "score": 0, "creation_date": 1423691937, "post_id": 28464162, "comment_id": 45256316, "body": "here is the snapshot of QT version and available compiler, <a href=\"https://www.dropbox.com/s/rfnjmqswu60a3d0/Screenshot%202015-02-11%2021.55.15.png?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/rfnjmqswu60a3d0/&hellip;</a>, <a href=\"https://www.dropbox.com/s/6po11quhggo2w4l/Screenshot%202015-02-11%2021.55.06.png?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/6po11quhggo2w4l/&hellip;</a>, but I don&#39;t know how to set the compiler in my project setting"}, {"owner": {"reputation": 8289, "user_id": 2013738, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e411bdd253abc6ef58624ff72fd2b369?s=128&d=identicon&r=PG", "display_name": "Simon Warta", "link": "https://stackoverflow.com/users/2013738/simon-warta"}, "edited": false, "score": 0, "creation_date": 1423693704, "post_id": 28464162, "comment_id": 45257255, "body": "You connect a Qt installation and a compiler together in a kit. See the &quot;Kits&quot; tab."}], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 3985857, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1e4f4184a362ab8407a4a777799b8c47?s=128&d=identicon&r=PG&f=1", "display_name": "covernal", "link": "https://stackoverflow.com/users/3985857/covernal"}, "edited": false, "score": 3, "creation_date": 1423749135, "post_id": 28474220, "comment_id": 45280852, "body": "Click &#39;O&#39; on the &#39;Undefined symbols for ...&#39; issue in the Issue list of Qt Creator, then you can see compiler output. It will help you what is wrong."}], "owner": {"reputation": 329, "user_id": 3985857, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1e4f4184a362ab8407a4a777799b8c47?s=128&d=identicon&r=PG&f=1", "display_name": "covernal", "link": "https://stackoverflow.com/users/3985857/covernal"}, "is_accepted": false, "score": 5, "last_activity_date": 1423734595, "creation_date": 1423734595, "answer_id": 28474220, "question_id": 28464162, "link": "https://stackoverflow.com/questions/28464162/qt-5-2-mac-10-10-1-undefined-symbols-for-architecture-x86-64/28474220#28474220", "title": "Qt 5.2 Mac 10.10.1 Undefined symbols for architecture x86_64", "body": "<pre><code>Undefined symbols for architecture x86_64\n</code></pre>\n\n<p>This means that compiler couldn't solve address for symbols.</p>\n\n<p>So you have a need to add libraries for that symbols in your pro. file.</p>\n\n<p>For example, </p>\n\n<pre><code>LIBS += -framework AppKit\nLIBS += -framework CoreAudio\nLIBS += -framework AudioToolbox\n</code></pre>\n\n<p>Check your project configure for libraries.</p>\n"}], "owner": {"reputation": 5439, "user_id": 824624, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9ad3e55c48b6ac8ad2127001421a34ef?s=128&d=identicon&r=PG", "display_name": "user824624", "link": "https://stackoverflow.com/users/824624/user824624"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10471, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1423796367, "creation_date": 1423687581, "last_edit_date": 1495540416, "question_id": 28464162, "link": "https://stackoverflow.com/questions/28464162/qt-5-2-mac-10-10-1-undefined-symbols-for-architecture-x86-64", "title": "Qt 5.2 Mac 10.10.1 Undefined symbols for architecture x86_64", "body": "<p>I am working on opencv, Qt application on my mac computer, however, the compiling gives me the error like </p>\n\n<pre><code>Undefined symbols for architecture x86_64\n</code></pre>\n\n<p>I founder the solution from here, <a href=\"https://stackoverflow.com/questions/20342896/qt5-1-qt5-2-mac-os-10-9-mavericks-xcode-5-0-2-undefined-symbols-for-archi\">Qt5.1/Qt5.2 + Mac OS 10.9 (Mavericks) + XCode 5.0.2, Undefined symbols for architecture x86_64</a></p>\n\n<p>that I changed /usr/local/Cellar/qt5/5.3.2/mkspecs/macx-clang/qmake.conf</p>\n\n<p>from</p>\n\n<pre><code>QMAKE_MACOSX_DEPLOYMENT_TARGET = 10.6\n</code></pre>\n\n<p>to</p>\n\n<pre><code>QMAKE_MACOSX_DEPLOYMENT_TARGET = 10.9\n</code></pre>\n\n<p>after cleaning the project, it doesn't work, I wonder any other to change ?    </p>\n\n<p>///// update ////</p>\n\n<p>previously i found my default kit used the g++ as the compiler and now I changed to clang as the default compiler, you can see my config here\n<a href=\"https://www.dropbox.com/s/93viwvf1a70s347/Screenshot%202015-02-13%2002.43.23.png?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/93viwvf1a70s347/Screenshot%202015-02-13%2002.43.23.png?dl=0</a></p>\n\n<p>but what is getting wired, the error 'Undefined symbols for architecture x86_64' still exist and also there is another error saying:  error: linker command failed with exit code 1 (use -v to see invocation)</p>\n\n<p>what is wrong??</p>\n\n<p>/// update  ////</p>\n\n<pre><code>#-------------------------------------------------\n#\n# Project created by QtCreator 2014-06-08T01:54:11\n#\n#-------------------------------------------------\n\nQT       += core gui\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets webkitwidgets\n\nTARGET = particle_filter\nTEMPLATE = app\nQT += network\n\nSOURCES += main.cpp\\\n\nHEADERS  += \\\n\n\nFORMS    += \\\n    parkingapp.ui \\\n\n#-------------------------------------------------\n\nINCLUDEPATH += /usr/local/Cellar/opencv/2.4.9/include\n\nLIBS += -L/usr/local/Cellar/opencv/2.4.9/lib \\\n-lopencv_core \\\n-lopencv_highgui \\\n-lopencv_imgproc \\\n-lopencv_video \\\n-lopencv_objdetect \\\n-lopencv_ml \\\n-lopencv_features2d\n#-------------------------------------------------\n</code></pre>\n\n<p>later i found this <a href=\"http://qt-project.org/forums/viewthread/24551/P15\" rel=\"nofollow noreferrer\">http://qt-project.org/forums/viewthread/24551/P15</a>, so I added this to the end of my .pro</p>\n\n<pre><code>LIBS += -stdlib=libc++\n\nQMAKE_CXXFLAGS += -stdlib=libc++\nQMAKE_CXXFLAGS += -std=c++11\nQMAKE_CXXFLAGS += -mmacosx-version-min=10.9\nQMAKE_LFLAGS += -mmacosx-version-min=10.9\n</code></pre>\n\n<p>but still don't work .... :(</p>\n"}, {"tags": ["c++", "audio", "window", "sdl", "vst"], "answers": [{"owner": {"reputation": 2320, "user_id": 178897, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WUaNU.jpg?s=128&g=1", "display_name": "obiwanjacobi", "link": "https://stackoverflow.com/users/178897/obiwanjacobi"}, "is_accepted": true, "score": 0, "last_activity_date": 1423725740, "creation_date": 1423725740, "answer_id": 28471573, "question_id": 28464113, "link": "https://stackoverflow.com/questions/28464113/how-can-i-create-a-child-window-in-vst-2-4/28471573#28471573", "title": "How can I create a child window in VST 2.4?", "body": "<p>Assuming Windows: In open(), cast the void* ptr to a HWND. That is the window handle to the (host-provided) parent frame window. When using any library use this handle as a parent handle when creating the child plugin window. The child window you create must have the WS_CHILD flag set.</p>\n"}], "owner": {"reputation": 3, "user_id": 4556558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a0a414cf7b88fa64720b13a70836f39?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/4556558/sergey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 28471573, "answer_count": 1, "score": 0, "last_activity_date": 1423725740, "creation_date": 1423687417, "question_id": 28464113, "link": "https://stackoverflow.com/questions/28464113/how-can-i-create-a-child-window-in-vst-2-4", "title": "How can I create a child window in VST 2.4?", "body": "<p>I create ExampleEditor.h and ExampleEditor.cpp</p>\n\n<pre><code>ExampleEditor::ExampleEditor(AudioEffect *effect)\n{           \n    effect-&gt;setEditor(this);\n};\n\nbool ExampleEditor::open(void *ptr)\n{\n\n    //This is it?\n\nreturn true;\n};\n</code></pre>\n\n<p>VST plugin file constructor i write</p>\n\n<pre><code>VstPlugin::VstPlugin(audioMasterCallback audioMaster) : AudioEffectX(audioMaster, 1, 1)\n{\n    editor = new ExampleEditor(this);\n}\n</code></pre>\n\n<p>In what point do I need to create a window? The main window has already been created in the VST?\nCan I use any library or to create a window? SDL2 ? Can anyone give a very simple example?</p>\n"}, {"tags": ["c++", "opengl", "projection", "vertices", "glu"], "comments": [{"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1423690590, "post_id": 28464025, "comment_id": 45255591, "body": "What are you using this ray for? You already read the depth buffer back (this stores window-space Z), so you can UnProject your mouse coordinate and get an exact position in object-space."}, {"owner": {"reputation": 827, "user_id": 2896746, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bb750e2a097cfd14e93f812dfbb7a5f0?s=128&d=identicon&r=PG", "display_name": "Yattabyte", "link": "https://stackoverflow.com/users/2896746/yattabyte"}, "reply_to_user": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1423690916, "post_id": 28464025, "comment_id": 45255778, "body": "line-plane/triangle intersection. My ray&#39;s points only seem to lie on screen space, as the returned values are between 0-1 (like 0.003x, -0.5y, 0z). My objects on the other hand have vertices that aren&#39;t limited like this."}, {"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1423691146, "post_id": 28464025, "comment_id": 45255883, "body": "Coordinates in the range [0-1] don&#39;t really describe screen space (this is a coordinate space where 1 unit is equal in size to 1 pixel). It is not often that you draw into a 1x1 viewport ;) Those coordinates are more along the lines of Normalized Device Coordinates (which has a range [-1,1]). This suggests to me that you are not properly applying the viewport transform, I do not know why though."}, {"owner": {"reputation": 827, "user_id": 2896746, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bb750e2a097cfd14e93f812dfbb7a5f0?s=128&d=identicon&r=PG", "display_name": "Yattabyte", "link": "https://stackoverflow.com/users/2896746/yattabyte"}, "reply_to_user": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1423691484, "post_id": 28464025, "comment_id": 45256083, "body": "@AndonM.Coleman I have a hunch that the method that I control my &quot;viewport&quot; within my render function may be antiquated or obsolete, and not being used appropriately by functions like gluUnproject().Would you be able to take a quick look at my render functions? This is such a stubborn bug and I would really like to understand the reason behind all of this suffering"}, {"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1423783028, "post_id": 28464025, "comment_id": 45300765, "body": "I looked through your code and the only unusual thing I see is that you are duplicating the <code>LookAt</code> work in your matrix class and using GLU, but the perspective projection matrix is only setup in <code>pMatrix</code>. What this means is that when you query the projection matrix from GL it is probably going to be an identity matrix. Instead of querying the matrices, have you considered using <code>vMatrix * mMatrix</code> and <code>pMatrix</code>? I think you might need to compensate for <code>float</code> vs. <code>double</code>, but this is the more practical approach."}], "answers": [{"comments": [{"owner": {"reputation": 827, "user_id": 2896746, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bb750e2a097cfd14e93f812dfbb7a5f0?s=128&d=identicon&r=PG", "display_name": "Yattabyte", "link": "https://stackoverflow.com/users/2896746/yattabyte"}, "edited": false, "score": 0, "creation_date": 1423718677, "post_id": 28469882, "comment_id": 45264646, "body": "the 2 depths (and 2 unprojections) are because I&#39;m supposed to (as the other methods have depicted) get 2 points in space at the near and far planes of the projection, in order to draw a line between them which would then be used for line-plane/triangle intersection (&quot;Ray-picking)"}, {"owner": {"reputation": 378, "user_id": 2080170, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/80c2e1e5d54419a69369fd1730592bd0?s=128&d=identicon&r=PG", "display_name": "Rebirth", "link": "https://stackoverflow.com/users/2080170/rebirth"}, "reply_to_user": {"reputation": 827, "user_id": 2896746, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bb750e2a097cfd14e93f812dfbb7a5f0?s=128&d=identicon&r=PG", "display_name": "Yattabyte", "link": "https://stackoverflow.com/users/2896746/yattabyte"}, "edited": false, "score": 0, "creation_date": 1423719450, "post_id": 28469882, "comment_id": 45264872, "body": "But you aren&#39;t using the result (float) from glReadPixels."}], "owner": {"reputation": 378, "user_id": 2080170, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/80c2e1e5d54419a69369fd1730592bd0?s=128&d=identicon&r=PG", "display_name": "Rebirth", "link": "https://stackoverflow.com/users/2080170/rebirth"}, "is_accepted": false, "score": 0, "last_activity_date": 1423718396, "creation_date": 1423718396, "answer_id": 28469882, "question_id": 28464025, "link": "https://stackoverflow.com/questions/28464025/unprojected-mouse-coordinates-are-between-0-1/28469882#28469882", "title": "UnProjected mouse coordinates are between 0-1", "body": "<p>glReadPixels takes integers (x and y) and you don't seem to be using winZ for some reason in gluUnProject.</p>\n\n<p>Try it like this:</p>\n\n<pre><code>gluUnProject(winX, winY, winZ, glView, glProjection, viewport, &amp;posX, &amp;posY, &amp;posZ);\n</code></pre>\n\n<p>Also, if you want the ray to stop when it meets something in the depth buffer then don't clear the depth buffer after rendering.  If you do a glClear(GL_DEPTH_BUFFER_BIT) then the ray should go as far as the far clip you set in your projection matrix.</p>\n\n<p>I also have no idea why you need to call it more than once.  The last three floats will be the target vector and you can just use your camera position as the source of the ray (depending on what you are doing).</p>\n"}, {"owner": {"reputation": 827, "user_id": 2896746, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bb750e2a097cfd14e93f812dfbb7a5f0?s=128&d=identicon&r=PG", "display_name": "Yattabyte", "link": "https://stackoverflow.com/users/2896746/yattabyte"}, "is_accepted": true, "score": 0, "last_activity_date": 1424018206, "last_edit_date": 1610973356, "creation_date": 1424018206, "answer_id": 28528350, "question_id": 28464025, "link": "https://stackoverflow.com/questions/28464025/unprojected-mouse-coordinates-are-between-0-1/28528350#28528350", "title": "UnProjected mouse coordinates are between 0-1", "body": "<p>Part of my problem here was poorly describing it. I accidentally left residual code from frantically testing, resulting in bits of &quot;read Pixel&quot; functions and related nonsense which wasn't useful for solving the problem.</p>\n<p>The rest of my problem was due to inconsistent data types for the matrices, and trying to pull matrices from OpenGL when it never had them stored in the first place.</p>\n<p>The problem was solved by:</p>\n<ul>\n<li><a href=\"http://glm.g-truc.net/0.9.6/index.html\" rel=\"nofollow noreferrer\">Using GLM to hold all my matrices</a></li>\n<li>performing the calculations myself (inverse view matrix * inverse model matrix * inverse projection matrix) * vector holding NDC converted screen space coordinates (range of -1 to 1: x or y divided by width or height, * 2 - 1), which also has a z of -1 or 1 for the far or near planes, and a w of 1.</li>\n<li>Divide result by the fourth spot of the vector.</li>\n</ul>\n<p>I still do not know why unprojecting doesn't work for me, as I got the wrong results with GLU as well as GLM's unproject function, but doing it manually worked for me.</p>\n<p>Since my problem extended over quite a great length of time, and took up several questions, I owe credit to a few individuals who helped me along the way:</p>\n<ul>\n<li><a href=\"http://facepunch.com/member.php?u=674814\" rel=\"nofollow noreferrer\">srobins of facepunch</a>, in <a href=\"http://facepunch.com/showthread.php?t=1450824\" rel=\"nofollow noreferrer\">this thread</a></li>\n<li><a href=\"https://stackoverflow.com/users/2327517/derhass\">derhass from here</a>, <a href=\"https://stackoverflow.com/questions/28518139/3d-scene-transformations-not-quite-working\">in this question</a>, and this <a href=\"https://chat.stackoverflow.com/rooms/70929/discussion-between-yattabyte-and-derhass\">discussion</a></li>\n</ul>\n"}], "owner": {"reputation": 827, "user_id": 2896746, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bb750e2a097cfd14e93f812dfbb7a5f0?s=128&d=identicon&r=PG", "display_name": "Yattabyte", "link": "https://stackoverflow.com/users/2896746/yattabyte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 28528350, "answer_count": 2, "score": 0, "last_activity_date": 1424018206, "creation_date": 1423687059, "last_edit_date": 1423691736, "question_id": 28464025, "link": "https://stackoverflow.com/questions/28464025/unprojected-mouse-coordinates-are-between-0-1", "title": "UnProjected mouse coordinates are between 0-1", "body": "<p>I'm trying to create a ray from my mouse location out into 3D space, and apparently in order to do that I need to \"UnProject()\" it. </p>\n\n<p>Doing so will give me a value between 0 &amp; 1 for each axis.</p>\n\n<p>This <strong>can't be right</strong> for drawing a \"Ray\" or a line from the viewport, can it? All this is, is a percentage essentially of my mouse to viewport size.</p>\n\n<p><strong>If this is actually right, then I don't understand the following:</strong></p>\n\n<ul>\n<li>I draw triangles that have vertices that <strong>are not</strong> constrained from 0-1, rather they are coordinates like (0,100,0), (100,100,0), (100,0,0), <strong>And these draw perfectly fine</strong></li>\n<li>But also, drawing the vertices that are unprojected from my mouse coordinates as lines/points <strong>also draw perfectly fine</strong>.</li>\n<li>How the heck would I then compare my mouse coordinates to the coordinates of my objects?</li>\n</ul>\n\n<p><strong>If this is actually wrong, then what can cause such an error?</strong>\nI tried unprojecting my own object's vertices, and those aren't constrained from 0-1.\nI don't know whether or not the way I handle my \"projections\" when rendering is even compatible with gluUnproject. I've been just doing it the way these tutorials here show it (near bottom): <a href=\"http://qt-project.org/wiki/Developer-Guides#28810c65dd0f273a567b83a48839d275\" rel=\"nofollow\">http://qt-project.org/wiki/Developer-Guides#28810c65dd0f273a567b83a48839d275</a></p>\n\n<p>This is the way I try to get my mouse coordinates:</p>\n\n<pre><code>GLdouble modelViewMatrix[16];\nGLdouble projectionMatrix[16];\nGLint viewport[4];\nGLfloat winX, winY, winZ;\nglGetDoublev(GL_MODELVIEW_MATRIX, modelViewMatrix);\nglGetDoublev(GL_PROJECTION_MATRIX, projectionMatrix);\nglGetIntegerv(GL_VIEWPORT, viewport);\n\nwinX = (float)x;\nwinY = (float)viewport[3] - (float)y;\nglReadPixels( winX, winY, 1, 1, GL_DEPTH_COMPONENT, GL_FLOAT, &amp;winZ );\n\nGLdouble nearPlaneLocation[3];\ngluUnProject(winX, winY, 0, modelViewMatrix, projectionMatrix,\n             viewport, &amp;nearPlaneLocation[0], &amp;nearPlaneLocation[1],\n        &amp;nearPlaneLocation[2]);\n\nGLdouble farPlaneLocation[3];\ngluUnProject(winX, winY, 1, modelViewMatrix, projectionMatrix,\n             viewport, &amp;farPlaneLocation[0], &amp;farPlaneLocation[1],\n        &amp;farPlaneLocation[2]);\n\nQVector3D nearP = QVector3D(nearPlaneLocation[0], nearPlaneLocation[1],\n        nearPlaneLocation[2]);\nQVector3D farP = QVector3D(farPlaneLocation[0], farPlaneLocation[1],\n        farPlaneLocation[2]);\n</code></pre>\n\n<p>Perhaps my actual projections are off?</p>\n\n<pre><code>void oglWidget::paintGL()\n{\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    QMatrix4x4 mMatrix;\n    QMatrix4x4 vMatrix;\n\n    QMatrix4x4 cameraTransformation;\n    cameraTransformation.rotate(alpha, 0, 1, 0);\n    cameraTransformation.rotate(beta, 1, 0, 0);\n\n    QVector3D cameraPosition = cameraTransformation * QVector3D(camX, camY, distance);\n    QVector3D cameraUpDirection = cameraTransformation * QVector3D(0, 1, 0);\n    vMatrix.lookAt(cameraPosition, QVector3D(camX, camY, 0), cameraUpDirection);\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n    gluLookAt(cameraPosition.x(), cameraPosition.y(), cameraPosition.z(), camX, camY, 0, cameraUpDirection.x(), cameraUpDirection.y(), cameraUpDirection.z());\n    shaderProgram.bind();\n    shaderProgram.setUniformValue(\"mvpMatrix\", pMatrix * vMatrix * mMatrix);\n    shaderProgram.setUniformValue(\"texture\", 0);\n\n\n    for (int x = 0; x &lt; tileCount; x++)\n    {\n        shaderProgram.setAttributeArray(\"vertex\", tiles[x]-&gt;vertices.constData());\n        shaderProgram.enableAttributeArray(\"vertex\");\n        shaderProgram.setAttributeArray(\"textureCoordinate\", textureCoordinates.constData());\n        shaderProgram.enableAttributeArray(\"textureCoordinate\");\n\n        //Triangle Drawing\n        glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, tiles[x]-&gt;image.width(), tiles[x]-&gt;image.height(), 0, GL_RGBA, GL_UNSIGNED_BYTE, tiles[x]-&gt;image.bits());\n        glDrawArrays(GL_TRIANGLES, 0, tiles[x]-&gt;vertices.size());\n    }    \n\n    shaderProgram.release();\n\n}\n</code></pre>\n\n<p>Where as, pMatrix is a 4x4 matrix, controlled during resize events like:</p>\n\n<pre><code> pMatrix.setToIdentity();\n pMatrix.perspective(fov, (float) width / (float) height, 0.001, 10000);\n glViewport(0, 0, width, height);\n</code></pre>\n\n<p>and my vertex shader is set up like this:</p>\n\n<pre><code>uniform mat4 mvpMatrix;\n\nin vec4 vertex;\nin vec2 textureCoordinate;\n\nout vec2 varyingTextureCoordinate;\n\nvoid main(void)\n{\n    varyingTextureCoordinate = textureCoordinate;\n    gl_Position = mvpMatrix * vertex;\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "class"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 6, "creation_date": 1423686520, "post_id": 28463838, "comment_id": 45253427, "body": "<a href=\"http://dev-jungle.blogspot.de/2015/02/i-have-dream-im-dreaming-of-so-called-c.html\" rel=\"nofollow noreferrer\">I have a dream!</a>"}, {"owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "edited": false, "score": 5, "creation_date": 1423686647, "post_id": 28463838, "comment_id": 45253498, "body": "Did you try to read a bit about C++ first? It&#39;s a language where trying to learning by experimenting is a terrible idea for a few reasons..."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1423687016, "post_id": 28463838, "comment_id": 45253695, "body": "I think you might need to start with the basics by finding a good tutorial, book, or course on C++."}, {"owner": {"reputation": 18780, "user_id": 683218, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7Vy7c.png?s=128&g=1", "display_name": "tinlyx", "link": "https://stackoverflow.com/users/683218/tinlyx"}, "edited": false, "score": 0, "creation_date": 1423687579, "post_id": 28463838, "comment_id": 45253996, "body": "&quot;Did you try to read a bit about C++ first? It&#39;s a language where trying to learning by experimenting is a terrible idea for a few reasons... \u2013  6502&quot; -- Indeed, and it&#39;s unfortunate because it&#39;s becoming a language that you cannot reason about any more. Instead of trying to write your own code, it&#39;s probably easier to copy and adapt from idiomatic examples, if you can."}], "answers": [{"owner": {"reputation": 759, "user_id": 4524862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DwQeLaM9ZoM/AAAAAAAAAAI/AAAAAAAAAk8/H54y0WxDtZw/photo.jpg?sz=128", "display_name": "ftynse", "link": "https://stackoverflow.com/users/4524862/ftynse"}, "is_accepted": false, "score": 2, "last_activity_date": 1423687714, "creation_date": 1423687714, "answer_id": 28464204, "question_id": 28463838, "link": "https://stackoverflow.com/questions/28463838/creating-a-simple-c-string-class/28464204#28464204", "title": "creating a simple C++ string class", "body": "<p>In almost all functions, you do something with the <em>argument of the function</em>, <code>_String</code>, and not with the member field <code>characters</code> that is supposed to hold the string internally.  So your functions <em>do not</em> change the string at all, but rather try to mess with something you passed them.</p>\n\n<p>An example</p>\n\n<pre><code>struct Foo {\n  char internal[42];\n  void bar(char *external) { external[0] = 'X'; }\n  void qux(char *external) { internal[0] = 'Z'; }\n};\nint main() {\n  Foo foo;\n  char something[6] = \"Hello\";\n  foo.qux(something);  // Did something to the member variable foo.internal; variable something is unchanged.\n  foo.bar(something);  // Now something reads \"Xello\", foo.internal was not changed.\n}\n</code></pre>\n\n<p>Your code does almost as the function <code>bar</code> while it should work like <code>qux</code>.</p>\n\n<p>There is indeed too much to fix in this code.</p>\n\n<p>Just in case you were mistaken... Unlike some other languages, say Python or Smalltalk, C++ passes a pointer to the current object <em>implicitly</em> via <code>this</code>.  </p>\n"}], "owner": {"reputation": 9, "user_id": 4552717, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q75vmQcgbjw/AAAAAAAAAAI/AAAAAAAAEaI/DBEUc32fLlg/photo.jpg?sz=128", "display_name": "DexFenik", "link": "https://stackoverflow.com/users/4552717/dexfenik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1310, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1525177614, "creation_date": 1423686419, "last_edit_date": 1525177614, "question_id": 28463838, "link": "https://stackoverflow.com/questions/28463838/creating-a-simple-c-string-class", "title": "creating a simple C++ string class", "body": "<p>I'm writing a program where I create my own string class. The program is supposed to instruct the user to write a sentence, copy the input, and then display how many characters it contains.</p>\n\n<p>Although it did build and compile (using Visual Studio Express 2013), it would copy the sentence the user is instructed to write down, not display the amount of characters, and then crash.</p>\n\n<p>I'm guessing is has something to do with how the memory is dynamically allocated or how *character and _String is passed between functions. But some help on how to fix this or improve my code would be very helpful.</p>\n\n<p>Header: String.h</p>\n\n<pre><code>class String\n{\nprivate:\n    char *characters[50]; // 50 is just a placeholder to get it to work\n    int size;\npublic:\n    // Constructors and Destructors\n    String();\n    String(char*);\n    ~String();\n\n    // Other functions\n    void stringAssign(char*);\n    void printString(char*);\n    int stringSize(char*) const;\n};\n</code></pre>\n\n<p>Implementation: String.ccp</p>\n\n<pre><code>#include \"String.h\"\n#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n\nString::String()\n{\n    size = 0;\n    * characters = 0;\n}\n\nString::String(char* _String)\n{\n    size = stringSize(*characters + 1);\n    _String = new char[size];\n}\n\nString::~String()\n{\n    delete [] *characters;\n}\n\nvoid String::stringAssign(char* _String)\n{\n    _String = characters[size];\n}\n\nvoid String::printString(char* _String)\n{\n    for (int i = 0; _String[i] != '\\0'; i++)\n        std::cout &lt;&lt; _String[i];\n}\n\nint String::stringSize(char* _String) const\n{\n    int size;\n    size = strlen(*characters);\n    return size;\n}\n</code></pre>\n\n<p>Test: Main.ccp</p>\n\n<pre><code>#include \"String.h\"\n#include &lt;iostream&gt;\n\nint main()\n{\n    char string[50];\n    String s;\n\n    std::cout &lt;&lt; \"Enter a sentence that is less than 50 characters\\n\\n\";\n    std::cin.getline(string, 50);\n\n    s.printString(string);\n    std::cout &lt;&lt; s.stringSize(string);\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Solved:</strong></p>\n\n<p>I got the program working. Literally all I did was replace the two <code>*character</code> arguments with <code>_String</code> in the implementation. I knew it had something to do with function passing, and I did get a little help for that. But one person gave no helpful input (and practically insulted me) and both said that there were \"too many things to fix\". Some elaboration on the \"so many things\" I had to fix would be nice.</p>\n"}, {"tags": ["c++", "iterator", "stdvector"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1423686711, "post_id": 28463862, "comment_id": 45253534, "body": "Note: You do not need the if. erase is valid for the range [begin(), end()]"}, {"owner": {"reputation": 21, "user_id": 4379976, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b5b6e6c518177b3d7d23342358d15350?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4379976/will"}, "edited": false, "score": 0, "creation_date": 1423686947, "post_id": 28463862, "comment_id": 45253663, "body": "it worked thanks, only thing im confused about it why use auto instead of not writing it at all?"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 3, "creation_date": 1423687176, "post_id": 28463862, "comment_id": 45253768, "body": "@DieterL&#252;cking Actually, for the single argument form of <code>erase</code> the check is necessary because the argument is required to be dereferenceable, and <code>end()</code> isn&#39;t. It&#39;s mentioned somewhere in the table for sequence container requirements. The requirement is <a href=\"http://en.cppreference.com/w/cpp/container/vector/erase\" rel=\"nofollow noreferrer\">listed on cppreference</a> also."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1423687883, "post_id": 28463862, "comment_id": 45254209, "body": "Thanks @Praetorian: Looking at 23.2.3 Sequence containers makes my note wrong"}], "owner": {"reputation": 10220, "user_id": 2720372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/olQxk.jpg?s=128&g=1", "display_name": "w.b", "link": "https://stackoverflow.com/users/2720372/w-b"}, "is_accepted": true, "score": 4, "last_activity_date": 1423687995, "last_edit_date": 1423687995, "creation_date": 1423686493, "answer_id": 28463862, "question_id": 28463795, "link": "https://stackoverflow.com/questions/28463795/c-iterate-through-a-vector-and-delete-a-matching-string/28463862#28463862", "title": "C++ Iterate through a vector and delete a matching string", "body": "<p>You can use <code>std::find</code> to get the iterator matching the item you want to remove, then call <code>vector::erase(iter)</code></p>\n\n<pre><code>auto iter = std::find(gameList.begin(), gameList.end(), removeFromList);\nif (iter != gameList.end())\n{\n    gameList.erase(iter);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1423688397, "post_id": 28464037, "comment_id": 45254464, "body": "I&#39;d prefer the <a href=\"https://en.wikipedia.org/wiki/Erase%E2%80%93remove_idiom\" rel=\"nofollow noreferrer\">erase-remove</a> idiom. See <a href=\"http://stackoverflow.com/q/22860119/10077\">stackoverflow.com/q/22860119/10077</a>"}, {"owner": {"reputation": 876, "user_id": 4537511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb4bbc2836b3dcb6564ce5f4b3f4f2c?s=128&d=identicon&r=PG", "display_name": "Adam Sosnowski", "link": "https://stackoverflow.com/users/4537511/adam-sosnowski"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1423699246, "post_id": 28464037, "comment_id": 45259434, "body": "@FredLarson: Right. Thanks."}], "owner": {"reputation": 876, "user_id": 4537511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb4bbc2836b3dcb6564ce5f4b3f4f2c?s=128&d=identicon&r=PG", "display_name": "Adam Sosnowski", "link": "https://stackoverflow.com/users/4537511/adam-sosnowski"}, "is_accepted": false, "score": 1, "last_activity_date": 1423699218, "last_edit_date": 1423699218, "creation_date": 1423687102, "answer_id": 28464037, "question_id": 28463795, "link": "https://stackoverflow.com/questions/28463795/c-iterate-through-a-vector-and-delete-a-matching-string/28464037#28464037", "title": "C++ Iterate through a vector and delete a matching string", "body": "<p>Take a look at <code>remove</code>. It moves all matching elements at the end of the sequence, you may then truncate it:</p>\n\n<pre><code>input.erase(\n    remove(input.begin(), input.end(), s)\n  , input.end());\n</code></pre>\n\n<p>Edit: incorporated suggestion from Fred's comment.</p>\n"}], "owner": {"reputation": 21, "user_id": 4379976, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b5b6e6c518177b3d7d23342358d15350?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4379976/will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 715, "favorite_count": 0, "accepted_answer_id": 28463862, "answer_count": 2, "score": 0, "last_activity_date": 1423699218, "creation_date": 1423686280, "question_id": 28463795, "link": "https://stackoverflow.com/questions/28463795/c-iterate-through-a-vector-and-delete-a-matching-string", "title": "C++ Iterate through a vector and delete a matching string", "body": "<p>I am trying to code a list of strings. The user can add to the list or remove from the list as well as display the current list.</p>\n\n<p>The displaying list and adding to list is working fine, but I can't figure out how to remove the user's string by iterating through the list to find a match.</p>\n\n<p>How would I change my code to fix this?\n<strong><em>Look at if(answer == 3)</em></strong></p>\n\n<pre><code>// InClassAssignment-FavouriteGameList.cpp : Defines the entry point for the console application.\n//\n\n#include \"stdafx.h\"\n#include &lt;string&gt;\n#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;ctime&gt;\n#include &lt;cctype&gt;\n\nusing namespace std;\n\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    vector &lt;string&gt;  gameList;\n    int answer = 0;\n    bool cont = true;\n    int size = 0;\n    vector&lt;string&gt;::iterator iter;\n    string addToList;\n    string removeFromList;\n\n    cout &lt;&lt; \"\\tGame List\" &lt;&lt; endl;\n\n    while (cont)\n    {\n        cout &lt;&lt; \"--------------------------------------------\" &lt;&lt; endl;\n        cout &lt;&lt; \"\\nWhat do you want to do?\";\n        cout &lt;&lt; \"\\n1 - Display List\";\n        cout &lt;&lt; \"\\n2 - Add to List\";\n        cout &lt;&lt; \"\\n3 - Remove from List\";\n        cout &lt;&lt; \"\\n4 - End program\" &lt;&lt; endl &lt;&lt; \"Selection: \";\n        cin &gt;&gt; answer;\n\n        cout &lt;&lt; endl;\n\n        if (answer == 1)\n        {\n            cout &lt;&lt; \"List: \";\n            for (iter = gameList.begin(); iter != gameList.end(); ++iter)\n            {\n                if (iter != gameList.end() - 1)\n                    cout &lt;&lt; *iter &lt;&lt; \", \";\n                else\n                    cout &lt;&lt; *iter &lt;&lt; endl;\n            }\n        }\n\n        else if (answer == 2)\n        {\n            cout &lt;&lt; \"Type in a game to add: \";\n            cin &gt;&gt; addToList;\n            gameList.push_back(addToList);\n            cout &lt;&lt; \"\\nAdded (\" &lt;&lt; addToList &lt;&lt; \") to your list.\" &lt;&lt; endl;\n        }\n\n        else if (answer == 3)\n        {\n            //display list\n            cout &lt;&lt; \"List: \";\n            for (iter = gameList.begin(); iter != gameList.end(); ++iter)\n            {\n                if (iter != gameList.end() - 1)\n                    cout &lt;&lt; *iter &lt;&lt; \", \";\n                else\n                    cout &lt;&lt; *iter &lt;&lt; \"\\n\" &lt;&lt; endl;\n            }\n\n            //ask which one to remove\n            cout &lt;&lt; \"Which game should be removed?: \";\n            cin &gt;&gt; removeFromList;\n\n            //loop/iterate through the list to find a match and erase it\n            for (iter = gameList.begin(); iter != gameList.end(); ++iter)\n            {\n                if ()\n                    cout &lt;&lt; \"\\nRemoved (\" &lt;&lt; removeFromList &lt;&lt; \")\" &lt;&lt; endl;\n                else\n                    cout &lt;&lt; \"\\nGame not found\" &lt;&lt; endl;\n            }\n\n        }\n\n        else\n        {\n            cont = false;\n        }\n\n    }\n\n    cout &lt;&lt; \"\\nThanks for using the program!\\n\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "hash"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1423686769, "post_id": 28463794, "comment_id": 45253560, "body": "Try it with <code>long long</code> for <code>A</code> as well."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1423687335, "post_id": 28463794, "comment_id": 45253865, "body": "Example calls with output?"}], "answers": [{"owner": {"reputation": 496, "user_id": 2023582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a8593592d2458d18df29425370f801?s=128&d=identicon&r=PG", "display_name": "vijayalakshmi d", "link": "https://stackoverflow.com/users/2023582/vijayalakshmi-d"}, "is_accepted": true, "score": 0, "last_activity_date": 1423720703, "creation_date": 1423720703, "answer_id": 28470356, "question_id": 28463794, "link": "https://stackoverflow.com/questions/28463794/knuths-multiplication-hash-function-via-bit-shifting/28470356#28470356", "title": "Knuth&#39;s multiplication hash function via bit shifting", "body": "<p>Below function has the advanced hash logic that is equal to mult_hash_simple function. </p>\n\n<pre><code>template&lt;int max_key_power, int p&gt;\nint mult_hash_advanced(int key)\n{\n//  const int w = 32;\n    const long long w_bit = 4294967295; // Integer representation of binary value that has last 32 ( which is w value )  bits as 1\n    const int A = 2654435769; \n    long long r0 = key*A;\n\n\n    return (( r0 &amp; w_bit ) &gt;&gt; ( 32 - p ) ) ;\n}\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 4556519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e9286f62b9997e9153c43aef197acb?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Ehreshi", "link": "https://stackoverflow.com/users/4556519/ivan-ehreshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3203, "favorite_count": 1, "accepted_answer_id": 28470356, "answer_count": 1, "score": 1, "last_activity_date": 1423720703, "creation_date": 1423686275, "last_edit_date": 1423689283, "question_id": 28463794, "link": "https://stackoverflow.com/questions/28463794/knuths-multiplication-hash-function-via-bit-shifting", "title": "Knuth&#39;s multiplication hash function via bit shifting", "body": "<p>I tried to implement Knuth's multiplication algorithm via bit shifting with A = 2654435769\nand hash size of 2^p elements\nBut the non-shifting and shifting algorithms give different result</p>\n\n<p>There is how I tried to implement this two alg:</p>\n\n<pre>\n\n\n    template\n    int mult_hash_simple(int key)\n    {\n        double A = 0.61803398863412439823150634765625;\n        double exp = A*key;\n        return max_key*(exp - (int) exp);\n    }\n\n    template\n    int mult_hash_advanced(int key)\n    {\n    //  const int w = 32;\n        const unsigned long long A = 2654435769;\n        unsigned long long r0 = key*A;\n\n        return r0 & (  (1 \n</pre>\n\n<p>UPD: updated some var types. The problem still exist</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 3991386, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d4a52d7d8cdcb4c53cb31fbddb88f0f?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Taylor", "link": "https://stackoverflow.com/users/3991386/jordan-taylor"}, "edited": false, "score": 0, "creation_date": 1423685783, "post_id": 28463546, "comment_id": 45253029, "body": "Thank you.  And yes, my pop method is not removing the top element.  I will fix this."}, {"owner": {"reputation": 546, "user_id": 3219193, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8a0e6b554acaa9ccd450bba461976b63?s=128&d=identicon&r=PG&f=1", "display_name": "Doonyx", "link": "https://stackoverflow.com/users/3219193/doonyx"}, "reply_to_user": {"reputation": 147, "user_id": 3991386, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d4a52d7d8cdcb4c53cb31fbddb88f0f?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Taylor", "link": "https://stackoverflow.com/users/3991386/jordan-taylor"}, "edited": false, "score": 0, "creation_date": 1423694148, "post_id": 28463546, "comment_id": 45257428, "body": "@JordanTaylor IMO before writing any new data structure, it&#39;s better have 5 minute look on existing data structures. If you are with C++, I&#39;d say you SHOULD look at std library data structures first. Then you can grab, what commonly used terms are. What is pop what is top likewise."}], "owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "is_accepted": true, "score": 5, "last_activity_date": 1423685367, "creation_date": 1423685367, "answer_id": 28463546, "question_id": 28463465, "link": "https://stackoverflow.com/questions/28463465/will-function-store-value-if-implemented-in-if-statement/28463546#28463546", "title": "Will function store value if implemented in if statement?", "body": "<p>Your <code>if</code> is evaluated from left to right, so for </p>\n\n<p><code>if (!stack.pop(a) || !stack.pop(b)) {</code></p>\n\n<p><code>a</code> is set first, then <code>b</code>.</p>\n\n<p>Note also for your <code>pop</code> method that you never actually pop the stack -  you only return the top-most value.</p>\n"}, {"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "is_accepted": false, "score": 3, "last_activity_date": 1423685384, "creation_date": 1423685384, "answer_id": 28463550, "question_id": 28463465, "link": "https://stackoverflow.com/questions/28463465/will-function-store-value-if-implemented-in-if-statement/28463550#28463550", "title": "Will function store value if implemented in if statement?", "body": "<p>What you have is fine. The logical or operator (<code>||</code>) short-circuits meaning the right side is only executed if the left side evaluates to false. In the case where the first pop succeeds, the left side is <code>false</code>, and therefore the right side will also be evaluated, and store the appropriate value if the stack is not empty.</p>\n"}, {"owner": {"reputation": 170, "user_id": 4556491, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0e0b7fe4a75cd3579c1a9ec0a1cea9e8?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitriy Kozyatinskiy", "link": "https://stackoverflow.com/users/4556491/dmitriy-kozyatinskiy"}, "is_accepted": false, "score": 1, "last_activity_date": 1423685395, "creation_date": 1423685395, "answer_id": 28463555, "question_id": 28463465, "link": "https://stackoverflow.com/questions/28463465/will-function-store-value-if-implemented-in-if-statement/28463555#28463555", "title": "Will function store value if implemented in if statement?", "body": "<p>Yes, pop function will be normally executed inside the if statement, so the value will be stored.</p>\n"}, {"owner": {"reputation": 201, "user_id": 4548299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ulKeb.png?s=128&g=1", "display_name": "Philip Wardlaw", "link": "https://stackoverflow.com/users/4548299/philip-wardlaw"}, "is_accepted": false, "score": 2, "last_activity_date": 1423685690, "creation_date": 1423685690, "answer_id": 28463649, "question_id": 28463465, "link": "https://stackoverflow.com/questions/28463465/will-function-store-value-if-implemented-in-if-statement/28463649#28463649", "title": "Will function store value if implemented in if statement?", "body": "<p>The value will be stored in both a and b. </p>\n\n<p><strong>Note</strong> a pop function traditionally removes the last element of a list and returns it to the caller. What you are doing is not a pop.</p>\n"}], "owner": {"reputation": 147, "user_id": 3991386, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d4a52d7d8cdcb4c53cb31fbddb88f0f?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Taylor", "link": "https://stackoverflow.com/users/3991386/jordan-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 28463546, "answer_count": 4, "score": 0, "last_activity_date": 1423685690, "creation_date": 1423685122, "question_id": 28463465, "link": "https://stackoverflow.com/questions/28463465/will-function-store-value-if-implemented-in-if-statement", "title": "Will function store value if implemented in if statement?", "body": "<p>I am writing a c++ code to perform Reverse Polish Notation math.  For this, I have a stack class that has a boolean method <strong>pop(value)</strong></p>\n\n<pre><code>bool pop(int &amp;value) {\n    if (isEmpty()) {\n        return false;\n    } else {\n        value = stack[topIndex];\n        return true;\n    }\n};\n</code></pre>\n\n<p>where the top value on the stack is stored in <strong>value</strong> and then is deleted off of the stack.  If the stack is empty, this pop method returns <strong>false</strong>, otherwise it returns <strong>true</strong>.</p>\n\n<p>My question is, if I use the <strong>pop</strong> method like this:</p>\n\n<pre><code>int a, b;\n\nif (!stack.pop(a) || !stack.pop(b)) {\n    cout &lt;&lt; \"Error: stack is empty: &lt;&lt; endl;\n}\n</code></pre>\n\n<p>where both times it returns <strong>true</strong>, will the top value of the stack for each case be stored in <strong>a</strong> and <strong>b</strong> or do I need to implement the method outside of the <strong>if</strong> statement?</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1423685161, "post_id": 28463390, "comment_id": 45252711, "body": "What is <code>IDR_APPL</code> and how does it in any way relate to <code>IDR_APPLICATION1</code> ? And stop casting, let MS do that for you via <code>MAKEINTRESOURCE</code>. Finally, <code>&quot;Application&quot;</code> is your resource type. That is going to come in to this picture eventually."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1423685586, "post_id": 28463390, "comment_id": 45252929, "body": "Iow, <code>FindResource(NULL, MAKEINTRESOURCE(IDR_APPLICATION1), _T(&quot;Application&quot;));</code> is probably what you&#39;re looking for. You declared a custom resource type in the resource script; that type has to be called out by-name in your search. What you have will work if the resource script had <code>IDR_APPLICATION1 RCDATA &quot;embed.exe&quot;</code>, assuming you fixed the id as-shown."}, {"owner": {"reputation": 49, "user_id": 4385764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62f8da4703fbf75c869a24f5e3678592?s=128&d=identicon&r=PG&f=1", "display_name": "Coding_King", "link": "https://stackoverflow.com/users/4385764/coding-king"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1423757530, "post_id": 28463390, "comment_id": 45286679, "body": "@WhozCraig Thank you for checking out the edits made to the question"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1423761289, "post_id": 28463390, "comment_id": 45289313, "body": "When you pass <code>NULL</code> as the first parameter you&#39;re searching the .exe, not the DLL. See <a href=\"http://stackoverflow.com/questions/2396328/get-hmodule-from-inside-a-dll\" title=\"get hmodule from inside a dll\">stackoverflow.com/questions/2396328/&hellip;</a>"}, {"owner": {"reputation": 49, "user_id": 4385764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62f8da4703fbf75c869a24f5e3678592?s=128&d=identicon&r=PG&f=1", "display_name": "Coding_King", "link": "https://stackoverflow.com/users/4385764/coding-king"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1423764014, "post_id": 28463390, "comment_id": 45290991, "body": "@MarkRansom It works now, you should have posted an answer"}], "owner": {"reputation": 49, "user_id": 4385764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62f8da4703fbf75c869a24f5e3678592?s=128&d=identicon&r=PG&f=1", "display_name": "Coding_King", "link": "https://stackoverflow.com/users/4385764/coding-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1732, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1423758355, "creation_date": 1423684865, "last_edit_date": 1423758355, "question_id": 28463390, "link": "https://stackoverflow.com/questions/28463390/how-to-extract-a-resource-file-from-a-dll-visual-studio-2013", "title": "How to extract a resource file from a .dll - Visual Studio 2013", "body": "<p>I'm using visual studio 2013 and i'm making a dll file that extracts an executable file embed in it to a directory. First I imported the .exe file as a resource and changed the type to \"Application\". I can see in solution explorer that embed.exe is located under \"Source Files\". 2 new files have been created automaticly: Project.rc and resource.h. The .rc file includes this line:</p>\n\n<pre><code>IDR_APPLICATION1        Application             \"embed.exe\"\n</code></pre>\n\n<p>And the .h includes:</p>\n\n<pre><code>#define IDR_APPLICATION1                101\n</code></pre>\n\n<p>The problem is the following function fails</p>\n\n<pre><code>hrsrc = FindResource(NULL, (LPCWSTR)IDR_APPLICATION1, RT_RCDATA);\n</code></pre>\n\n<p>And GetLastError() returns 1813 which means, according to previous threads I visited, that the type (RT_RCDATA) is invalid. I've seen many threads but nothing helpful. I also tried to list resources but I ended up with a too complicated code where I couldn't find the problem.</p>\n\n<p>Thanks in advance.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I tried each of these lines individually but none of them worked and each time GetLastError() returned 1813.</p>\n\n<pre><code>hrsrc = FindResource(NULL, (LPCWSTR)IDR_APPLICATION1, (LPCWSTR)L\"Application\");\nhrsrc = FindResource(NULL, MAKEINTRESOURCE(IDR_APPLICATION1), _T(\"Application\"));\nhrsrc = FindResource(NULL, (LPCWSTR)IDR_APPLICATION1, _T(\"Application\")); //mix of both\n</code></pre>\n\n<p>Here are 3 possible issues:  </p>\n\n<p>1 - The first parameter (argument) of FindResource() is the instance of the application, but I'm coding a DLL file, so I set it to NULL. The .exe file running the application has no resource of type \"Application\", but the .dll file does.  </p>\n\n<p>2 - The resource named \"embed.exe\" was automaticly added to the \"Sources\" filter/folder, maybe it should be in the \"Resources\" filter/folder?</p>\n\n<p>3 - When I right click \"embed.exe\" from Solution Explorer, the properties have not been changed, and here they are:</p>\n\n<p>Excluded from build: <em>(empty)</em><br>\nContent: <em>(empty)</em><br>\nItem type: Does not participate in build</p>\n"}, {"tags": ["c++", "bmp"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1423685180, "post_id": 28463363, "comment_id": 45252716, "body": "Please take some time to lean how to use your compiler&#39;s debugger.  That&#39;s what it is for."}], "answers": [{"comments": [{"owner": {"reputation": 360, "user_id": 4546568, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-atkaSw3Aj9E/AAAAAAAAAAI/AAAAAAAAABE/iOBlLm1o2qw/photo.jpg?sz=128", "display_name": "Ali Bahrami", "link": "https://stackoverflow.com/users/4546568/ali-bahrami"}, "edited": false, "score": 0, "creation_date": 1423687561, "post_id": 28463692, "comment_id": 45253982, "body": "There is no cout message, and if you comment it, the abort happens again."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 360, "user_id": 4546568, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-atkaSw3Aj9E/AAAAAAAAAAI/AAAAAAAAABE/iOBlLm1o2qw/photo.jpg?sz=128", "display_name": "Ali Bahrami", "link": "https://stackoverflow.com/users/4546568/ali-bahrami"}, "edited": false, "score": 0, "creation_date": 1423690576, "post_id": 28463692, "comment_id": 45255583, "body": "@Ali: You are sending <code>cout</code> to your <code>out.bmp</code> file.  Plus, any data in the buffer when <code>abort()</code> is called may never appear.  That&#39;s why you need to use <code>cerr</code>."}, {"owner": {"reputation": 360, "user_id": 4546568, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-atkaSw3Aj9E/AAAAAAAAAAI/AAAAAAAAABE/iOBlLm1o2qw/photo.jpg?sz=128", "display_name": "Ali Bahrami", "link": "https://stackoverflow.com/users/4546568/ali-bahrami"}, "edited": false, "score": 0, "creation_date": 1423725967, "post_id": 28463692, "comment_id": 45267422, "body": "I think I should use fstream header file to read data from input as a bmp image. I should give the output as a image file, so cerr is not solving the problem by itself."}, {"owner": {"reputation": 360, "user_id": 4546568, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-atkaSw3Aj9E/AAAAAAAAAAI/AAAAAAAAABE/iOBlLm1o2qw/photo.jpg?sz=128", "display_name": "Ali Bahrami", "link": "https://stackoverflow.com/users/4546568/ali-bahrami"}, "edited": false, "score": 0, "creation_date": 1423728207, "post_id": 28463692, "comment_id": 45268511, "body": "I try to handle the problem with fsteam header, but the thing i can read is &quot;BMvq6(\ufffd,&quot;. why this should happen?"}], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 1, "last_activity_date": 1423690677, "last_edit_date": 1423690677, "creation_date": 1423685848, "answer_id": 28463692, "question_id": 28463363, "link": "https://stackoverflow.com/questions/28463363/aborting-when-trying-to-reading-and-writing-bmp-files-c/28463692#28463692", "title": "Aborting when trying to reading and writing bmp files c++", "body": "<p>You're getting an abort error because you asked for one.</p>\n\n<pre><code>if(!TypeIsTrue(a[0])){\n    cout&lt;&lt;\"The file is not bmp\\nRerun program\"&lt;&lt;endl;\n    abort();\n}\n</code></pre>\n\n<p>If your program is designed to have its output redirected, it is very important to send error messages to <code>stderr</code> (and <code>std::cerr</code> or <code>std::clog</code>) and not <code>stdout</code>.</p>\n\n<p>BTW, the type test is failing because BMP files are not text, it makes no sense to read them using <code>cin &gt;&gt; variable</code>.</p>\n\n<p>In addition, there's no guarantee that <code>a[0]</code> even exists.  You need to test <code>a.size()</code> first.</p>\n\n<pre><code>if(a.size() &lt; 1 || !TypeIsTrue(a[0])){\n    cerr &lt;&lt; \"The file is not bmp\\nRerun program\\n\";\n    abort();\n}\n</code></pre>\n"}], "owner": {"reputation": 360, "user_id": 4546568, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-atkaSw3Aj9E/AAAAAAAAAAI/AAAAAAAAABE/iOBlLm1o2qw/photo.jpg?sz=128", "display_name": "Ali Bahrami", "link": "https://stackoverflow.com/users/4546568/ali-bahrami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 28463692, "answer_count": 1, "score": 1, "last_activity_date": 1423690677, "creation_date": 1423684788, "question_id": 28463363, "link": "https://stackoverflow.com/questions/28463363/aborting-when-trying-to-reading-and-writing-bmp-files-c", "title": "Aborting when trying to reading and writing bmp files c++", "body": "<p>this is my first post in stackoverflow.\nI write a program that should take a bmp file in input, and black and white it and then write it into the out.bmp.\nwhen I started to write the code, i delete the bmp file format at the end of the name of input and then open it with text editor, then write the code, and the output style is like the input.\nwhen I type <code>./a.out &lt;in.bmp&gt;out.bmp</code> in terminal, I get an Abort error (<code>Aborted (core dumped)</code>) and when I give the <code>./a.out &lt; in &gt; out.bmp</code> gimp say to me it is not a bmp file.\nhere is the code:</p>\n\n<pre><code>// In the Name of God\n\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;cstdlib&gt;\n#include &lt;algorithm&gt;\n#include &lt;math.h&gt;\n#include &lt;sstream&gt;\n\nusing namespace std;\n\nbool TypeIsTrue (string type){\n    if (type == \"424d\")\n        return true;\n    return false;\n}\nint GrayIt (int b , int g , int r){\n\n\n    return (b + g + r) / 3 ;\n}\nint ConvertToDec(string hex){\n    long int dec = 0;\n    reverse(hex.begin(), hex.end());\n    for (int i = 0 ; i &lt;hex.size();i++){\n        if (hex[i] == 'a')\n            dec = dec + 10 *(pow(16,i));\n        else if (hex[i] == 'b')\n            dec = dec + 11 *(pow(16,i));\n        else if (hex[i] == 'c')\n            dec = dec + 12 *(pow(16,i));\n        else if (hex[i] == 'd')\n            dec = dec + 13 *(pow(16,i));\n        else if (hex[i] == 'e')\n            dec = dec + 14 *(pow(16,i));\n        else if (hex[i] == 'f')\n            dec = dec + 15 *(pow(16,i));\n        else\n            dec = dec + ((hex[i] - '0')*(pow(16,i)));\n    }\n    return dec;\n}\nstring ConvertToHex(int dec){\n    string hex;\n    int reminded,Divided;\n    reminded = dec % 16 ;\n    Divided = dec / 16;\n    if (Divided == 10){\n        hex = \"a\";\n    }\n    else if (Divided == 11){\n        hex = \"b\";\n    }\n    else if (Divided == 12){\n        hex = \"c\";\n    }\n    else if (Divided == 13){\n        hex = \"d\";\n    }\n    else if (Divided == 14){\n        hex = \"e\";\n    }\n    else if (Divided == 15){\n        hex = \"f\";\n    }\n    else if (Divided == 0){\n        hex = \"0\";\n    }\n    else if (Divided == 1){\n        hex = \"1\";\n    }\n    else if (Divided == 2){\n        hex = \"2\";\n    }\n    else if (Divided == 3){\n        hex = \"3\";\n    }\n    else if (Divided == 4){\n        hex = \"4\";\n    }\n    else if (Divided == 5){\n        hex = \"5\";\n    }\n    else if (Divided == 6){\n        hex = \"6\";\n    }\n    else if (Divided == 7){\n        hex = \"7\";\n    }\n    else if (Divided == 8){\n        hex = \"8\";\n    }\n    else if (Divided == 9){\n        hex = \"9\";\n    }\n    if (reminded == 10){\n        hex = hex+\"a\";\n    }\n    else if (reminded == 11){\n        hex = hex+\"b\";\n    }\n    else if (reminded == 12){\n        hex = hex+\"c\";\n    }\n    else if (reminded == 13){\n        hex = hex+\"d\";\n    }\n    else if (reminded == 14){\n        hex = hex+\"e\";\n    }\n    else if (reminded == 15){\n        hex = hex+\"f\";\n    }\n    else if (reminded == 0){\n        hex = hex+\"0\";\n    }\n    else if (reminded == 1){\n        hex = hex+\"1\";\n    }\n    else if (reminded == 2){\n        hex = hex+\"2\";\n    }\n    else if (reminded == 3){\n        hex = hex+\"3\";\n    }\n    else if (reminded == 4){\n        hex = hex+\"4\";\n    }\n    else if (reminded == 5){\n        hex = hex+\"5\";\n    }\n    else if (reminded == 6){\n        hex = hex+\"6\";\n    }\n    else if (reminded == 7){\n        hex = hex+\"7\";\n    }\n    else if (reminded == 8){\n        hex = hex+\"8\";\n    }\n    else if (reminded == 9){\n        hex = hex+\"9\";\n    }\n    return hex;\n}\nint main (){\n    vector &lt;string&gt; a;\n    vector &lt;string&gt; r;\n    vector &lt;string&gt; g;\n    vector &lt;string&gt; b;\n    vector &lt;string&gt; out;\n    string temp;\n    int red,green,blue;\n    while(cin &gt;&gt; temp){\n        a.push_back (temp);\n    }\n    if(!TypeIsTrue(a[0])){\n        cout&lt;&lt;\"The file is not bmp\\nRerun program\"&lt;&lt;endl;\n        abort();\n    }   \n    int phase = 1;\n    for (int i = 27 ; i &lt; a.size(); i++){ //int i = 27\n\n        string first;\n        string last;\n        first = a[i].substr(0,2);\n        last = a[i].substr(2,3);\n        if(phase == 4)\n            phase = 1;\n        if(phase == 1){\n            b.push_back(first);\n            g.push_back(last);\n            phase ++;\n            // cout&lt;&lt;\"push_backed\"&lt;&lt;endl;   \n        }\n        else if(phase == 2){\n            r.push_back(first);\n            b.push_back(last);\n            phase ++;\n            // cout&lt;&lt;\"push_backed\"&lt;&lt;endl;\n        }\n        else if(phase == 3){\n            g.push_back(first);\n            r.push_back(last);\n            phase ++;\n            // cout&lt;&lt;\"push_backed\"&lt;&lt;endl;\n        }\n\n    }\n    for (int i = 0 ; i &lt;27 ; i++){\n        out.push_back(a[i]);\n    }\n    for(int i = 27 ; i&lt;b.size() ; i++){\n        blue = ConvertToDec(b[i]);  \n        green = ConvertToDec(g[i]);\n        red = ConvertToDec(r[i]);\n        out.push_back ( ConvertToHex( GrayIt (blue , green , red)));\n        out.push_back ( ConvertToHex( GrayIt (blue , green , red)));\n        out.push_back ( ConvertToHex( GrayIt (blue , green , red)));\n    }\n    int j = 1 ;\n    for (int i = 0 ; i &lt; 27 ; i++){\n        cout&lt;&lt; out[i] &lt;&lt; \" \";\n        if (j == 8){\n            cout&lt;&lt;endl;\n            j = 0;\n        }\n        j++;\n    } \n    j=1;\n    bool space = false;\n    for (int i = 27 ; i &lt; out.size(); i++){\n        if( i == 27 + 10){\n            cout&lt;&lt;endl;\n            j = 1;\n\n        }\n        cout&lt;&lt;out[i];\n        if (space)\n            cout&lt;&lt;\" \";\n        j++;\n        if(j == 17){\n            cout&lt;&lt;endl;\n            j = 1 ;\n        }\n        space=!space;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "makefile", "mingw"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1423685432, "post_id": 28463358, "comment_id": 45252843, "body": "Do you have a tab at the start of the <code>$(CC) $(CFLAGS)</code> or some number of spaces? I&#39;m betting you have a tab."}], "answers": [{"comments": [{"owner": {"reputation": 257, "user_id": 4171979, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/08173de560397475dd3391f4d39fd9da?s=128&d=identicon&r=PG&f=1", "display_name": "SUB", "link": "https://stackoverflow.com/users/4171979/sub"}, "edited": false, "score": 0, "creation_date": 1423689418, "post_id": 28463564, "comment_id": 45254984, "body": "Hi MadScientist, Thank you for the answer. I was too tired and forgot that I have set my vim to insert spaces everywhere I add a tab."}], "owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "is_accepted": true, "score": 2, "last_activity_date": 1423685438, "creation_date": 1423685438, "answer_id": 28463564, "question_id": 28463358, "link": "https://stackoverflow.com/questions/28463358/opencv-mingw-make32-makefile12-multiple-target-patterns-stop/28463564#28463564", "title": "OpenCV mingw-make32 Makefile:12: *** multiple target patterns. Stop", "body": "<p>Line 12 is the recipe line.  I believe you haven't started that line with a TAB character.  Make requires a real TAB, not just spaces.  Make sure your editor is capable of inserting a TAB character and doesn't \"helpfully\" convert it to spaces for you when you save.</p>\n"}], "owner": {"reputation": 257, "user_id": 4171979, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/08173de560397475dd3391f4d39fd9da?s=128&d=identicon&r=PG&f=1", "display_name": "SUB", "link": "https://stackoverflow.com/users/4171979/sub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 940, "favorite_count": 0, "accepted_answer_id": 28463564, "answer_count": 1, "score": 1, "last_activity_date": 1423685438, "creation_date": 1423684778, "question_id": 28463358, "link": "https://stackoverflow.com/questions/28463358/opencv-mingw-make32-makefile12-multiple-target-patterns-stop", "title": "OpenCV mingw-make32 Makefile:12: *** multiple target patterns. Stop", "body": "<p>I installed mingw gcc, g++ compiler. I downloaded the opencv source for 2.4.10. Then I used the following commands to compile the source:</p>\n\n<pre><code>cmake -G \"MinGW Makefiles\" -D CMAKE_CXX_COMPILER=mingw32-g++.exe -D CMAKE_MAKE_PROGRAM=mingw32-make.exe ..\n\nmingw32-make\n\nmingw32-make install\n</code></pre>\n\n<p>Then I added the lib to my windows PATH. I use the following Makefile to compile the code but I get an error(using windows cmd):</p>\n\n<pre><code>CC = gcc\nCFLAGS = -g -Wall\n\nSRCS = main.cpp input_main.cpp image_manuplation.cpp track_object.cpp\nPROG = main.exe\n\nOPENCV = -I\"C:\\Users\\Username\\Documents\\opencv\\sources\\release\\install\\include\" -I. -L\"C:\\Users\\Username\\Documents\\opencv\\sources\\release\\install\\x86\\mingw\\lib\" -lopencv_calib3d2410 -lopencv_contrib2410 -lopencv_core2410 -lopencv_features2d2410 --lopencv_flann2410 -lopencv_gpu2410 -lopencv_highgui2410 -lopencv_imgproc2410 -lopencv_legacy2410 -lopencv_ml2410 -lopepncv_nonfree2410 -lopencv_objdetect2410 -lopencv_ocl2410 -lopencv_photo2410 -lopencv_stitching2410 -lopencv_superres2410 -lopencv_ts2410 -lopencv_video2410 -lopencv_videostab2410\n\nall : $(PROG)\n\n$(PROG) : $(SRCS)\n    $(CC) $(CFLAGS) -o $(PROG) $(SRCS) $(OPENCV)\n\nclean:\n    @del $(PROG)\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>Makefile:12: *** multiple target patterns.  Stop.\n</code></pre>\n\n<p>Would someone know how to fix the error? I did similar thing on Ubuntu and it works.\nThank you</p>\n"}, {"tags": ["c++", "select", "infinite-loop", "eintr"], "comments": [{"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 1, "creation_date": 1423685558, "post_id": 28463350, "comment_id": 45252915, "body": "Are you on Linux? Have you tried looking at <a href=\"http://linux.die.net/man/3/explain_select\" rel=\"nofollow noreferrer\"><code>explain_errno_select</code></a>?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 2, "creation_date": 1423685565, "post_id": 28463350, "comment_id": 45252917, "body": "Have you done anything fancy regarding signals/signal handlers anywhere in the code ?  If you can reproduce it, how does the output look like if you attach the <code>strace</code> tool (use strace -p pid_of_your_program)"}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1423686873, "post_id": 28463350, "comment_id": 45253616, "body": "You should really look into the strace of your application for spammed signals. Maybe there&#39;s a third party library spamming SIGALRM (or something similarly subtle) for some reason you don&#39;t know or expect."}, {"owner": {"reputation": 36033, "user_id": 115751, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/FkIiK.png?s=128&g=1", "display_name": "WilliamKF", "link": "https://stackoverflow.com/users/115751/williamkf"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1423689531, "post_id": 28463350, "comment_id": 45255041, "body": "@nos Thus far it is not reproducible, so I&#39;m going to add a limit on retries."}, {"owner": {"reputation": 30076, "user_id": 1828637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/46b5428a878306d5af0a87fc7b2db499?s=128&d=identicon&r=PG", "display_name": "Noitidart", "link": "https://stackoverflow.com/users/1828637/noitidart"}, "edited": false, "score": 0, "creation_date": 1468926652, "post_id": 28463350, "comment_id": 64317698, "body": "Did you ever figure out why you got this <code>EINTR</code>? I am getting the same issue - <a href=\"http://stackoverflow.com/questions/38456803/poll2-on-result-of-pipe2-is-mutating-fd\" title=\"poll2 on result of pipe2 is mutating fd\">stackoverflow.com/questions/38456803/&hellip;</a>"}, {"owner": {"reputation": 36033, "user_id": 115751, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/FkIiK.png?s=128&g=1", "display_name": "WilliamKF", "link": "https://stackoverflow.com/users/115751/williamkf"}, "reply_to_user": {"reputation": 30076, "user_id": 1828637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/46b5428a878306d5af0a87fc7b2db499?s=128&d=identicon&r=PG", "display_name": "Noitidart", "link": "https://stackoverflow.com/users/1828637/noitidart"}, "edited": false, "score": 1, "creation_date": 1468966083, "post_id": 28463350, "comment_id": 64342712, "body": "@Noitidart No, I just added code to handle the <code>EINTR</code> by counting the retries and after several thousand, inserting a 1000 uSec sleep between tries, and then finally after several thousand more throwing an error to let the higher level code reconnect as an alternate means of recovery."}, {"owner": {"reputation": 30076, "user_id": 1828637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/46b5428a878306d5af0a87fc7b2db499?s=128&d=identicon&r=PG", "display_name": "Noitidart", "link": "https://stackoverflow.com/users/1828637/noitidart"}, "edited": false, "score": 0, "creation_date": 1468971745, "post_id": 28463350, "comment_id": 64344256, "body": "Thanks very much for sharing that input!"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1423684952, "post_id": 28463389, "comment_id": 45252599, "body": "How does this cause the <code>EINTR</code> behavior that he&#39;s seeing?"}, {"owner": {"reputation": 36033, "user_id": 115751, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/FkIiK.png?s=128&g=1", "display_name": "WilliamKF", "link": "https://stackoverflow.com/users/115751/williamkf"}, "edited": false, "score": 0, "creation_date": 1423684997, "post_id": 28463389, "comment_id": 45252622, "body": "But I don&#39;t want the clock to start over again, hence I let Linux modify the timeout to reflect time already waited, however, in this case, the timeout was zero seconds."}, {"owner": {"reputation": 36033, "user_id": 115751, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/FkIiK.png?s=128&g=1", "display_name": "WilliamKF", "link": "https://stackoverflow.com/users/115751/williamkf"}, "edited": false, "score": 0, "creation_date": 1423685104, "post_id": 28463389, "comment_id": 45252681, "body": "In this case, caller set timeout to zero to begin with."}], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1423685223, "last_edit_date": 1423685223, "creation_date": 1423684857, "answer_id": 28463389, "question_id": 28463350, "link": "https://stackoverflow.com/questions/28463350/why-does-select-keep-failing-with-eintr-errno/28463389#28463389", "title": "Why does select() keep failing with EINTR errno?", "body": "<p>On Linux, <a href=\"http://man7.org/linux/man-pages/man2/select.2.html\" rel=\"nofollow\">select(2)</a> may modify the <em>timeout</em> argument (passed by address). So you should copy it after the call.</p>\n\n<pre><code>retry:\nstruct timeout timeoutcopy = timeout;\nconst int selectReturn\n  = ::select(fdMaxPlus1, readFDset, writeFDset, NULL, &amp;timeoutcopy);\n</code></pre>\n\n<p>(in your code, your <code>timeout</code> is probably zero or very small after a few or even the first iterations)</p>\n\n<p>BTW, I suggest rather using <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"nofollow\">poll(2)</a> instead of <code>select</code> (since <code>poll</code> is is more C10K problem friendly)</p>\n\n<p>BTW, <code>EINTR</code> happens on any signal (see <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow\">signal(7)</a>), even without a registered signal handler.</p>\n\n<p>You might use <code>strace</code> to understand the overall behavior of your program.</p>\n"}], "owner": {"reputation": 36033, "user_id": 115751, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/FkIiK.png?s=128&g=1", "display_name": "WilliamKF", "link": "https://stackoverflow.com/users/115751/williamkf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5104, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1423685223, "creation_date": 1423684748, "last_edit_date": 1423685129, "question_id": 28463350, "link": "https://stackoverflow.com/questions/28463350/why-does-select-keep-failing-with-eintr-errno", "title": "Why does select() keep failing with EINTR errno?", "body": "<p>I have a C++ application that includes this function:</p>\n\n<pre><code>int\nmySelect(const int fdMaxPlus1,\n         fd_set *readFDset,\n         fd_set *writeFDset,\n         struct timeval *timeout)\n{\n retry:\n  const int selectReturn\n    = ::select(fdMaxPlus1, readFDset, writeFDset, NULL, timeout);\n\n  if (selectReturn &lt; 0 &amp;&amp; EINTR == errno) {\n    // Interrupted system call, such as for profiling signal, try again.\n    goto retry;\n  }\n\n  return selectReturn;\n}\n</code></pre>\n\n<p>Normally, this code work just fine, however, in one instance, I saw it get into an infinite loop where <code>select()</code> keeps failing with the <code>EINTR</code> <code>errno</code> code.  In this case, the caller had set the timeout to zero seconds and zero microseconds, meaning don't wait and return the <code>select()</code> result immediately.  I thought that <code>EINTR</code> only occurs when a signal handler occurred, why would I keep getting a signal handler over and over again (for over 12 hours)? This is Centos 5.  Once I put this into the debugger to see what was happening, the code returned without EINTR after a couple iterations. Note that the fd being checked is a socket.</p>\n\n<p>I could add a retry limit to the above code, but I'd like to understand what is going on first.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1423684898, "post_id": 28463349, "comment_id": 45252556, "body": "&quot;For example: if I enter &quot;a e o i u&quot; it says that I entered 5 words started by consonants.&quot; -- That&#39;s not what&#39;s happening for me. Are you sure you recompiled your program after your last change, that you accurately copied the source code, and that you didn&#39;t make mistakes in entering the input?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1423684928, "post_id": 28463349, "comment_id": 45252580, "body": "It says &quot;5 words beginning with vowels&quot;: <a href=\"http://ideone.com/Z8Ef0k\" rel=\"nofollow noreferrer\">link</a>."}, {"owner": {"reputation": 61, "user_id": 4512474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b05369495a04b454ddd720d2bf7daf5?s=128&d=identicon&r=PG&f=1", "display_name": "Jerzy Tuszy\u0144ski", "link": "https://stackoverflow.com/users/4512474/jerzy-tuszy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1423685075, "post_id": 28463349, "comment_id": 45252659, "body": "Ohh, sorry guys, I have no idea what was wrong, but now it does good. Well, I was using this code, and it was wrong, I think... Thanks anyway. :)"}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 0, "creation_date": 1423685101, "post_id": 28463349, "comment_id": 45252676, "body": "Works fine here - one vowel, two consonants, as expected: <a href=\"https://ideone.com/ASi56x\" rel=\"nofollow noreferrer\">ideone.com/ASi56x</a>"}, {"owner": {"reputation": 1950, "user_id": 3893186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a95a98901f66226fa034ad0edb1caae4?s=128&d=identicon&r=PG&f=1", "display_name": "mfuchs", "link": "https://stackoverflow.com/users/3893186/mfuchs"}, "edited": false, "score": 0, "creation_date": 1423685152, "post_id": 28463349, "comment_id": 45252707, "body": "In any case you might add your own isvowel function. This will make the code easier to reason about and also easier to test."}, {"owner": {"reputation": 1950, "user_id": 3893186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a95a98901f66226fa034ad0edb1caae4?s=128&d=identicon&r=PG&f=1", "display_name": "mfuchs", "link": "https://stackoverflow.com/users/3893186/mfuchs"}, "edited": false, "score": 0, "creation_date": 1423685321, "post_id": 28463349, "comment_id": 45252786, "body": "Another thing: In most cases it is better to avoid fixed buffers. Overwise you might run into buffer overflows. Therefore you should probably change <code>word</code> into a <code>std::string</code>."}, {"owner": {"reputation": 61, "user_id": 4512474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b05369495a04b454ddd720d2bf7daf5?s=128&d=identicon&r=PG&f=1", "display_name": "Jerzy Tuszy\u0144ski", "link": "https://stackoverflow.com/users/4512474/jerzy-tuszy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1423685630, "post_id": 28463349, "comment_id": 45252949, "body": "Thanks for advice. I don&#39;t understand the term &quot;fixed buffers&quot;, what do you mean? Do you mean that I overwrite word?"}, {"owner": {"reputation": 1950, "user_id": 3893186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a95a98901f66226fa034ad0edb1caae4?s=128&d=identicon&r=PG&f=1", "display_name": "mfuchs", "link": "https://stackoverflow.com/users/3893186/mfuchs"}, "edited": false, "score": 0, "creation_date": 1423686020, "post_id": 28463349, "comment_id": 45253153, "body": "<code>std::cin</code> does not know that <code>word</code> can only take 19 characters + a terminating <code>\\0</code> character. Yet it still will read in words with more than 19 characters overwritting whatever is stored in the memory before <code>word</code>. This is called a buffer overflow and is one of the most common security issues found in C and C++ program which often allows attackers to take over the computer. This can&#39;t happen if you use a <code>std::string</code> since that resizes automatically if more space is needed."}, {"owner": {"reputation": 61, "user_id": 4512474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b05369495a04b454ddd720d2bf7daf5?s=128&d=identicon&r=PG&f=1", "display_name": "Jerzy Tuszy\u0144ski", "link": "https://stackoverflow.com/users/4512474/jerzy-tuszy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1423686342, "post_id": 28463349, "comment_id": 45253335, "body": "Thanks for advice again, now I understand. I have never thought about that this way."}, {"owner": {"reputation": 1950, "user_id": 3893186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a95a98901f66226fa034ad0edb1caae4?s=128&d=identicon&r=PG&f=1", "display_name": "mfuchs", "link": "https://stackoverflow.com/users/3893186/mfuchs"}, "edited": false, "score": 0, "creation_date": 1423686911, "post_id": 28463349, "comment_id": 45253640, "body": "Yeah it is something that can easily bite newcomers as well as experienced programmers. Therefore it is better to avoid such issues. I just thought of another issue when using an array. You did not initialise <code>word</code> via e.g. <code>char word[20] = {&#39;\\0&#39;};</code> therefore its value is undefined. If you are on linux press <code>CTRL+D</code> when entering a word. This results in <code>EOF</code> and <code>std::cin</code> not reading in anything and keeping <code>word</code> unchanged. Now even though you did not read anything in you will most still likely enter the while-loop. <code>std::string</code> combined with an <code>std::string::empty</code> check avoids this."}], "answers": [{"owner": {"reputation": 546, "user_id": 3219193, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8a0e6b554acaa9ccd450bba461976b63?s=128&d=identicon&r=PG&f=1", "display_name": "Doonyx", "link": "https://stackoverflow.com/users/3219193/doonyx"}, "is_accepted": false, "score": 0, "last_activity_date": 1423695130, "creation_date": 1423695130, "answer_id": 28466114, "question_id": 28463349, "link": "https://stackoverflow.com/questions/28463349/c-primer-mistake-in-counting/28466114#28466114", "title": "C++ Primer Mistake in counting", "body": "<p>The reason here is when you type a e i o u 'they' fed in to std::cin as 5 different words. Because, cin in this situation takes space as the word separator, you will be prompted to enter new words after 5 iterations. So it's correct. If you enter a e i o u q then you will not be prompted again to enter any input since 6th word is q which is supposed to exit from your loop. So the behaviour is correct. </p>\n\n<p>If you debug the program you can understand what's really going on. </p>\n"}], "owner": {"reputation": 61, "user_id": 4512474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b05369495a04b454ddd720d2bf7daf5?s=128&d=identicon&r=PG&f=1", "display_name": "Jerzy Tuszy\u0144ski", "link": "https://stackoverflow.com/users/4512474/jerzy-tuszy%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1423695130, "creation_date": 1423684729, "last_edit_date": 1423686220, "question_id": 28463349, "link": "https://stackoverflow.com/questions/28463349/c-primer-mistake-in-counting", "title": "C++ Primer Mistake in counting", "body": "<p>I've got some problem with 7th exercise of 6th chapter from C++ Primer Plus book. Well, I think I made this exercise well, but my compiler think otherwise. The program should count number of vowels, consonants and other characters that start the word. The problem is that it counts vowels instead of consonants and consonants instead of vowels.</p>\n\n<p>For example: if I enter \"<strong>a e o i u</strong>\" it says that I entered 5 words started by consonants.</p>\n\n<p>Thanks in advance for explanation. </p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n\nchar word[20];\n\nint others=0;\nint vowels=0;\nint consonants=0;\n\nint main()\n{\n    std::cout&lt;&lt;\"Enter words (q to quit):\";\n    std::cin&gt;&gt;word;\n\n    while(strcmp(word,\"q\"))\n    {\n        word[0]=tolower(word[0]);\n        if(!isalpha(word[0]))\n            others++;\n        else if(word[0]!='a'&amp;&amp;word[0]!='e'&amp;&amp;word[0]!='i'&amp;&amp;word[0]!='o'&amp;&amp;word[0]!='u')\n            consonants++;\n        else vowels++;\n\n        std::cin&gt;&gt;word;\n    }\n    std::cout&lt;&lt;vowels&lt;&lt;\" words beginning with vowels\\n\";\n    std::cout&lt;&lt;consonants&lt;&lt;\" words beginning with consonants\\n\";\n    std::cout&lt;&lt;others&lt;&lt;\" others\";\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "stdvector", "allocation", "doubly-linked-list", "stdlist"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1423684759, "post_id": 28463343, "comment_id": 45252481, "body": "<code>std::list</code> doesn&#39;t provide pointer arithmetic for iteration."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 1, "creation_date": 1423684783, "post_id": 28463343, "comment_id": 45252496, "body": "Can you provide an example of what you think <code>std::list</code> allows?"}, {"owner": {"reputation": 307, "user_id": 668180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12f3241ea33a5817f8ad86fb4e161479?s=128&d=identicon&r=PG&f=1", "display_name": "tuk", "link": "https://stackoverflow.com/users/668180/tuk"}, "edited": false, "score": 0, "creation_date": 1423684921, "post_id": 28463343, "comment_id": 45252575, "body": "begin() returns an iter, so I&#39;m assuming I can use operators like iter++ <a href=\"http://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/list</a>"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1423685046, "post_id": 28463343, "comment_id": 45252647, "body": "An <code>std::list</code>&#39;s iterators can only be incremented or decremented in single steps. You cannot say <code>it += 5</code> or <code>it + 42</code>. That is what I meant in my first comment, which I realise wasn&#39;t completely clear. But neither is your question."}, {"owner": {"reputation": 307, "user_id": 668180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12f3241ea33a5817f8ad86fb4e161479?s=128&d=identicon&r=PG&f=1", "display_name": "tuk", "link": "https://stackoverflow.com/users/668180/tuk"}, "edited": false, "score": 0, "creation_date": 1423685338, "post_id": 28463343, "comment_id": 45252799, "body": "Is std::list not using pointer arithmetic when incrementing++ or decrementing-- its iterator in single steps?"}, {"owner": {"reputation": 759, "user_id": 4524862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DwQeLaM9ZoM/AAAAAAAAAAI/AAAAAAAAAk8/H54y0WxDtZw/photo.jpg?sz=128", "display_name": "ftynse", "link": "https://stackoverflow.com/users/4524862/ftynse"}, "edited": false, "score": 1, "creation_date": 1423685383, "post_id": 28463343, "comment_id": 45252816, "body": "Elements of <code>std::list</code> have pointers to the previous and to the next element.  An operator increment <code>it++</code> moves it to the next element by using those pointers.  It is just a pointer assignment, no arithmetic is actually happening."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1423685387, "post_id": 28463343, "comment_id": 45252820, "body": "std::list iterators have a std::bidirectional_iterator_tag, hence no arithmetic, just increment/derement"}, {"owner": {"reputation": 546, "user_id": 3219193, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8a0e6b554acaa9ccd450bba461976b63?s=128&d=identicon&r=PG&f=1", "display_name": "Doonyx", "link": "https://stackoverflow.com/users/3219193/doonyx"}, "edited": false, "score": 1, "creation_date": 1423693425, "post_id": 28463343, "comment_id": 45257118, "body": "IMO. Just try to write down a simple list class and have an iterator for it. Then you can realize when implementing ++ operators you actually to something like pointer assignment. Pointer arithmetic works in situations where you can access memory as a contiguous  block. In a list you have buckets allocated with operation system specific memory allocation algorithm (not necessary to be contiguous ) in your program memory segment."}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 307, "user_id": 668180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12f3241ea33a5817f8ad86fb4e161479?s=128&d=identicon&r=PG&f=1", "display_name": "tuk", "link": "https://stackoverflow.com/users/668180/tuk"}, "edited": false, "score": 0, "creation_date": 1423686408, "post_id": 28463633, "comment_id": 45253367, "body": "@tuk It isn&#39;t a pointer. What is the point is assuming it is?"}, {"owner": {"reputation": 307, "user_id": 668180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12f3241ea33a5817f8ad86fb4e161479?s=128&d=identicon&r=PG&f=1", "display_name": "tuk", "link": "https://stackoverflow.com/users/668180/tuk"}, "edited": false, "score": 0, "creation_date": 1423686530, "post_id": 28463633, "comment_id": 45253434, "body": "I tried to implement my own version of std::list to do what you describe, however when I attempt to  increment the iterator using: iter++ it ignores my special list operator++ function and instead tries to use pointer arithmetic....because iterator is a pointer.  The only way I can get it working is by incrementing the list object itself so my operator++ function gets called."}, {"owner": {"reputation": 759, "user_id": 4524862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DwQeLaM9ZoM/AAAAAAAAAAI/AAAAAAAAAk8/H54y0WxDtZw/photo.jpg?sz=128", "display_name": "ftynse", "link": "https://stackoverflow.com/users/4524862/ftynse"}, "edited": false, "score": 1, "creation_date": 1423686836, "post_id": 28463633, "comment_id": 45253595, "body": "Iterator is <i>not</i> a pointer.  In my example, iterator is a structure and you have to override <code>operator++</code> for it as described.  Operator is redefined for the <i>iterator</i>, not for the list or list element."}, {"owner": {"reputation": 759, "user_id": 4524862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DwQeLaM9ZoM/AAAAAAAAAAI/AAAAAAAAAk8/H54y0WxDtZw/photo.jpg?sz=128", "display_name": "ftynse", "link": "https://stackoverflow.com/users/4524862/ftynse"}, "edited": false, "score": 1, "creation_date": 1423686995, "post_id": 28463633, "comment_id": 45253685, "body": "I created a structure <code>iterator</code> that encapsulates a pointer intentionally.  Because I needed different behavior for <code>operator++</code> as default behavior for primitive types may not be changed."}, {"owner": {"reputation": 546, "user_id": 3219193, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8a0e6b554acaa9ccd450bba461976b63?s=128&d=identicon&r=PG&f=1", "display_name": "Doonyx", "link": "https://stackoverflow.com/users/3219193/doonyx"}, "reply_to_user": {"reputation": 307, "user_id": 668180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12f3241ea33a5817f8ad86fb4e161479?s=128&d=identicon&r=PG&f=1", "display_name": "tuk", "link": "https://stackoverflow.com/users/668180/tuk"}, "edited": false, "score": 0, "creation_date": 1423693772, "post_id": 28463633, "comment_id": 45257286, "body": "@tuk  I agree with ftynse. Iterator is NOT a pointer. It&#39;s a placeholder to an element of your data structure object. iterator for a vector and list have internal implementation differentiation. Internally they may use pointers (specially in case of a list). But iterator itself is not a pointer. It&#39;s an other object with special purpose. It&#39;s better show your implementation, we you can have more fruitful comments."}, {"owner": {"reputation": 307, "user_id": 668180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12f3241ea33a5817f8ad86fb4e161479?s=128&d=identicon&r=PG&f=1", "display_name": "tuk", "link": "https://stackoverflow.com/users/668180/tuk"}, "edited": false, "score": 0, "creation_date": 1423855633, "post_id": 28463633, "comment_id": 45333529, "body": "Following on from ftynse&#39;s suggestions, how to resolve the dereferencing of the *iterator ? As a struct can&#39;t return a value!"}, {"owner": {"reputation": 759, "user_id": 4524862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DwQeLaM9ZoM/AAAAAAAAAAI/AAAAAAAAAk8/H54y0WxDtZw/photo.jpg?sz=128", "display_name": "ftynse", "link": "https://stackoverflow.com/users/4524862/ftynse"}, "reply_to_user": {"reputation": 307, "user_id": 668180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12f3241ea33a5817f8ad86fb4e161479?s=128&d=identicon&r=PG&f=1", "display_name": "tuk", "link": "https://stackoverflow.com/users/668180/tuk"}, "edited": false, "score": 1, "creation_date": 1423866853, "post_id": 28463633, "comment_id": 45338838, "body": "@tuk, you may overload <code>operator *()</code>"}], "owner": {"reputation": 759, "user_id": 4524862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DwQeLaM9ZoM/AAAAAAAAAAI/AAAAAAAAAk8/H54y0WxDtZw/photo.jpg?sz=128", "display_name": "ftynse", "link": "https://stackoverflow.com/users/4524862/ftynse"}, "is_accepted": true, "score": 3, "last_activity_date": 1423685650, "creation_date": 1423685650, "answer_id": 28463633, "question_id": 28463343, "link": "https://stackoverflow.com/questions/28463343/stdlist-implementation-pointer-arithemetic/28463633#28463633", "title": "std::list implementation &amp; pointer arithemetic.", "body": "<p>Roughly speaking, you can assume an <code>std::list::iterator</code> to be a container for pointer to a list element <code>struct iterator { list::element *current };</code>.  And an element has pointers to the next and previous, like <code>struct element { list::element *next, *previous };</code> When you increment that iterator, it just reassigns this pointer to point to the next element.  Like <code>it-&gt;current = it-&gt;current-&gt;next</code> in linked lists.  No pointer arithmetics involved.</p>\n"}], "owner": {"reputation": 307, "user_id": 668180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12f3241ea33a5817f8ad86fb4e161479?s=128&d=identicon&r=PG&f=1", "display_name": "tuk", "link": "https://stackoverflow.com/users/668180/tuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 440, "favorite_count": 0, "accepted_answer_id": 28463633, "answer_count": 1, "score": 0, "last_activity_date": 1423685650, "creation_date": 1423684712, "question_id": 28463343, "link": "https://stackoverflow.com/questions/28463343/stdlist-implementation-pointer-arithemetic", "title": "std::list implementation &amp; pointer arithemetic.", "body": "<p>As I understand it, std::vector allocates/de-allocates all the memory it requires each time it's elements grows or shrinks, therefore pointer arithmetic can be used to iterate the vector elements.  </p>\n\n<p>std::list on the other hand uses a double linked list, with each element pointing to the next and previous element.</p>\n\n<p>Assuming(possibly wrongly) that std::list allocates it's memory dynamically, so memory is allocated, if and when required, incrementally.  How is  std::list still able to offer pointer arithmetic as a means to iterate it's elements?.</p>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1423684915, "post_id": 28463287, "comment_id": 45252569, "body": "Your concept (made up in your mind) is wrong. Please look up istream/ostream operators (maybe manipulators, too). A proper design would not use any cin/cout inside the class <code>stu</code>."}, {"owner": {"reputation": 1, "user_id": 4254267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd4fa204d41243a6b328a752ed73b9b5?s=128&d=identicon&r=PG&f=1", "display_name": "A.m", "link": "https://stackoverflow.com/users/4254267/a-m"}, "edited": false, "score": 0, "creation_date": 1423685408, "post_id": 28463287, "comment_id": 45252832, "body": "@DieterL&#252;cking My teacher said you have to write <code>cout&#47;cin</code> with the function.. I doubt that too :\\"}, {"owner": {"reputation": 5485, "user_id": 95976, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057b53dec34e734f69d166d89d3fbe4d?s=128&d=identicon&r=PG", "display_name": "tofi9", "link": "https://stackoverflow.com/users/95976/tofi9"}, "edited": false, "score": 0, "creation_date": 1423685548, "post_id": 28463287, "comment_id": 45252908, "body": "And get rid of the method <code>add(...)</code>. It&#39;s wrong and not used ;)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4254267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd4fa204d41243a6b328a752ed73b9b5?s=128&d=identicon&r=PG&f=1", "display_name": "A.m", "link": "https://stackoverflow.com/users/4254267/a-m"}, "edited": false, "score": 0, "creation_date": 1423685014, "post_id": 28463370, "comment_id": 45252631, "body": "it works!! I doubt that because my teacher said you have to write &#39;cout&#39; !! again thank you!"}], "owner": {"reputation": 115119, "user_id": 1053, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3f38c0e0cc4a1ca4656bfd8c78a581f2?s=128&d=identicon&r=PG", "display_name": "Ed S.", "link": "https://stackoverflow.com/users/1053/ed-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1423684808, "creation_date": 1423684808, "answer_id": 28463370, "question_id": 28463287, "link": "https://stackoverflow.com/questions/28463287/cout-with-function-of-a-class/28463370#28463370", "title": "cout with function of a class", "body": "<p><code>print</code> doesn't return anything, hence the <code>void</code> part of the signature.  Your function prints; it doesn't provide anything <em>to</em> print.  So... just call it:</p>\n\n<pre><code>stu1.print(x);\n</code></pre>\n"}, {"owner": {"reputation": 499, "user_id": 692064, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rCz62.png?s=128&g=1", "display_name": "tunc", "link": "https://stackoverflow.com/users/692064/tunc"}, "is_accepted": false, "score": 0, "last_activity_date": 1423684958, "creation_date": 1423684958, "answer_id": 28463422, "question_id": 28463287, "link": "https://stackoverflow.com/questions/28463287/cout-with-function-of-a-class/28463422#28463422", "title": "cout with function of a class", "body": "<p>Since stu::print method has a return value of void it's return type cannot be used with cout.</p>\n\n<p>You should either use </p>\n\n<pre><code>stu1.print(x);\n</code></pre>\n\n<p>or </p>\n\n<pre><code>cout &lt;&lt; stu1.getId();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7638, "user_id": 2986116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2f1444d1687fdda5fc2f039ccb0c4c?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/2986116/j%c3%a9r%c3%b4me"}, "reply_to_user": {"reputation": 1, "user_id": 4254267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd4fa204d41243a6b328a752ed73b9b5?s=128&d=identicon&r=PG&f=1", "display_name": "A.m", "link": "https://stackoverflow.com/users/4254267/a-m"}, "edited": false, "score": 0, "creation_date": 1423710135, "post_id": 28463436, "comment_id": 45262359, "body": "@A.m If this solves your issue, please accept the answer. Thanks :)"}], "owner": {"reputation": 7638, "user_id": 2986116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2f1444d1687fdda5fc2f039ccb0c4c?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/2986116/j%c3%a9r%c3%b4me"}, "is_accepted": false, "score": 3, "last_activity_date": 1423689387, "last_edit_date": 1423689387, "creation_date": 1423685012, "answer_id": 28463436, "question_id": 28463287, "link": "https://stackoverflow.com/questions/28463287/cout-with-function-of-a-class/28463436#28463436", "title": "cout with function of a class", "body": "<p>You need to either:</p>\n\n<ol>\n<li><p>change your <code>print()</code> function to return the <code>std::string</code> value that you want <code>main()</code> to write to <code>cout</code>:</p>\n\n<pre><code>#include &lt;sstream&gt;\n\nstring print(int id){\n    ostringstream oss;\n    oss &lt;&lt; name &lt;&lt; id;\n    return oss.str();\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>cout &lt;&lt; stu1.print(x);\n</code></pre></li>\n<li><p>leave <code>print()</code> returning a <code>void</code> and writing to <code>cout</code> directly, and then remove the <code>cout</code> from main():</p>\n\n<pre><code>void print(int id){\n    cout &lt;&lt; name &lt;&lt; id;\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>stu1.print(x);\n</code></pre></li>\n</ol>\n\n<p>With that said, your <code>print()</code> method doesn't need to have an input parameter since you should display the class variable <code>id</code> which has been set previously:</p>\n\n<pre><code>string print(){\n    ostringstream oss;\n    oss &lt;&lt; name &lt;&lt; id;\n    return oss.str();\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>void print(){\n    cout &lt;&lt; name &lt;&lt; id;\n}\n</code></pre>\n"}, {"owner": {"reputation": 368, "user_id": 3677659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gTchG.png?s=128&g=1", "display_name": "Akimoto", "link": "https://stackoverflow.com/users/3677659/akimoto"}, "is_accepted": false, "score": 1, "last_activity_date": 1423688842, "last_edit_date": 1423688842, "creation_date": 1423685759, "answer_id": 28463664, "question_id": 28463287, "link": "https://stackoverflow.com/questions/28463287/cout-with-function-of-a-class/28463664#28463664", "title": "cout with function of a class", "body": "<p>You can use ostream. First add this function out of your class : </p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream &amp;os, stu const &amp; s)\n{\n  s.print(os);\n  return os;\n}\n</code></pre>\n\n<p>Then modify the print method : </p>\n\n<pre><code>  void print(std::ostream &amp;os) const\n  {\n    os &lt;&lt; id &lt;&lt; name;\n  }\n</code></pre>\n\n<p>Finally you can just do :</p>\n\n<pre><code> cout &lt;&lt; stu1;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4254267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd4fa204d41243a6b328a752ed73b9b5?s=128&d=identicon&r=PG&f=1", "display_name": "A.m", "link": "https://stackoverflow.com/users/4254267/a-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1423689387, "creation_date": 1423684515, "last_edit_date": 1423689007, "question_id": 28463287, "link": "https://stackoverflow.com/questions/28463287/cout-with-function-of-a-class", "title": "cout with function of a class", "body": "<p>I just took class in 'classes' and when I try to practice and to run it... there's an error! apparently it's correct but it says <code>\"no operating \"&lt;&lt;\" matches these operands\"</code>. </p>\n\n<p>Also, I tried <code>cin &gt;&gt; stu1.add(x);</code> but it happens to be also an error! I can't do this?</p>\n\n<p>here's the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass stu{\n    private:\n        string name;\n        int id;\n    public:\n        // constructor\n        stu(){\n            id=0;\n        }\n        void add(int id){\n            cin &gt;&gt; name &gt;&gt; id;\n        }\n        void setname(string N){\n            name=N;\n        }\n        void setid(int I){\n            id=I;\n        }\n        string getname(){\n            return name;\n        }\n        int getid(){\n            return id;\n        }\n        void print(int id){\n            cout &lt;&lt; name &lt;&lt; id;\n        }\n};\n\n\nint main(){\n    stu stu1;\n    int x;\n    string y;\n    cout &lt;&lt; \"enter name then id:\";\n    cin &gt;&gt; y;\n    stu1.setname(y);\n    cin &gt;&gt; x;\n    stu1.setid(x);\n    cout &lt;&lt; stu1.print(x);\n\n    //cout &lt;&lt; \"name: \" &lt;&lt; stu1.getname() &lt;&lt; endl;\n    //cout &lt;&lt; \"id: \" &lt;&lt; stu1.getid() &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "answers": [{"owner": {"reputation": 1070, "user_id": 2797506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4448da481ba2f82e865c7ccba064a34e?s=128&d=identicon&r=PG", "display_name": "Smasho", "link": "https://stackoverflow.com/users/2797506/smasho"}, "is_accepted": false, "score": 11, "last_activity_date": 1522724434, "last_edit_date": 1522724434, "creation_date": 1423684158, "answer_id": 28463194, "question_id": 28463090, "link": "https://stackoverflow.com/questions/28463090/how-to-iterate-through-only-certain-type-of-files-using-qdiriterator/28463194#28463194", "title": "How to iterate through only certain type of files using QDirIterator", "body": "<p>One of the <a href=\"http://qt-project.org/doc/qt-4.8/qdiriterator.html#QDirIterator-4\" rel=\"nofollow noreferrer\">constructors of QDirIterator</a> allows a nameFilters argument:</p>\n\n<pre><code>QDirIterator::QDirIterator ( const QString &amp; path, const QStringList &amp; nameFilters, QDir::Filters filters = QDir::NoFilter, IteratorFlags flags = NoIteratorFlags )\n</code></pre>\n\n<blockquote>\n  <p>Constructs a QDirIterator that can iterate over path, using\n  nameFilters and filters.</p>\n</blockquote>\n\n<p>The <code>nameFilters</code> argument is not properly documented, but there is a good chance it works like in <a href=\"http://doc.qt.io/qt-5/qdir.html#setNameFilters\" rel=\"nofollow noreferrer\">QDir::setNameFilters</a>.</p>\n\n<pre><code>QDirIterator it(rootdir, QStringList() &lt;&lt; \"*.xml\", QDir::Files, QDirIterator::Subdirectories);\nwhile (it.hasNext()) {\n    qDebug() &lt;&lt; it.next();\n}\n</code></pre>\n"}], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8545, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1522724434, "creation_date": 1423683784, "last_edit_date": 1474933144, "question_id": 28463090, "link": "https://stackoverflow.com/questions/28463090/how-to-iterate-through-only-certain-type-of-files-using-qdiriterator", "title": "How to iterate through only certain type of files using QDirIterator", "body": "<p>I want to iterate through only .xml files (all files under selected folder and its sub-directories), is that possible with <code>QDirIterator</code>?</p>\n\n<pre><code>QDirIterator iter( rootDir, QDir::Files | QDir::Dirs | QDir::NoDotAndDotDot);\n\nQString fileName;\n\nwhile(iter.hasNext() )\n{\n   qDebug() &lt;&lt; iter.next();\n\n   fileName = iter.fileName();\n\n   // now I have to check if fileName is indeed a .xml extension\n}\n</code></pre>\n\n<p>As can be seen in code above, if my iterator can jump to .xml files only than I don't have to check for file extension in the loop..is it possible?</p>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 2384, "user_id": 2459730, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4eKoE.jpg?s=128&g=1", "display_name": "Andrew_CS", "link": "https://stackoverflow.com/users/2459730/andrew-cs"}, "edited": false, "score": 3, "creation_date": 1423683295, "post_id": 28462889, "comment_id": 45251675, "body": "So <code>array</code> is an array of <code>int</code>.  On line 36 you do <code>*array[surveyed]</code>.  This accesses the array array (bad naming here) at index surveyed.  This gives an int which then the * tries to de-reference.  An int is a primitive type, which isn&#39;t a pointer so can&#39;t be de-referenced."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1423683455, "post_id": 28462889, "comment_id": 45251768, "body": "iow, change <code>*array[surveyed]</code> to <code>array</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1423683459, "post_id": 28462889, "comment_id": 45251772, "body": "<code>So im still pretty new to C++ and have been doing a program for a while now</code>  So you&#39;re saying that you couldn&#39;t find one of the literally hundreds of thousands of examples showing you the proper way to pass an array and how to declare the function properly?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1423683555, "post_id": 28462889, "comment_id": 45251831, "body": "My advice, do not use new, delete, pointers (T*), c-arrays (T[]) , eof  and read some books."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 4556358, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/27bac5568cf32bbd2fa4d1e98bf9ee27?s=128&d=identicon&r=PG&f=1", "display_name": "exo316", "link": "https://stackoverflow.com/users/4556358/exo316"}, "edited": false, "score": 0, "creation_date": 1423683902, "post_id": 28463008, "comment_id": 45252034, "body": "Thank you SO much for this. Also realized i had forgotten a return at the end of the function so after adding a good ol return 0; i was able to get it to run. Time to move onto the next function. =)"}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1423683470, "creation_date": 1423683470, "answer_id": 28463008, "question_id": 28462889, "link": "https://stackoverflow.com/questions/28462889/getting-an-error-when-calling-a-function-using-pointer/28463008#28463008", "title": "Getting an error when calling a function using pointer", "body": "<p>Problems:</p>\n\n<ol>\n<li><p>The expression <code>*array[surveyed]</code> used in the following line:</p>\n\n<pre><code>median(*array[surveyed], surveyed);\n</code></pre>\n\n<p>is not right. <code>array[surveyed]</code> is the <code>surveyed</code>-th element of the array. It is not a pointer. It doesn't make sense to dereference it.</p></li>\n<li><p>The type of the first argument of <code>median</code> used in the declaration is different than the type used in the definition. The declaration seems to be right one. Change the implementation to:</p>\n\n<pre><code>double median(int *array, int num)\n</code></pre></li>\n<li><p>Fix the way you call <code>median</code>. Instead of</p>\n\n<pre><code>median(*array[surveyed], surveyed);\n</code></pre>\n\n<p>use</p>\n\n<pre><code>median(array, surveyed);\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 19, "user_id": 4556358, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/27bac5568cf32bbd2fa4d1e98bf9ee27?s=128&d=identicon&r=PG&f=1", "display_name": "exo316", "link": "https://stackoverflow.com/users/4556358/exo316"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423683470, "creation_date": 1423683015, "question_id": 28462889, "link": "https://stackoverflow.com/questions/28462889/getting-an-error-when-calling-a-function-using-pointer", "title": "Getting an error when calling a function using pointer", "body": "<p>So im still pretty new to C++ and have been doing a program for a while now. I think I am slowly getting it but keep getting an error \"Intellisense: operand of '*' must be a pointer.\" on line 36 column 10. What do I need to do to fix this error? Im going to get to the other functions as i finish each one so sorry for the extra function declaration</p>\n\n<pre><code>// This program will take input from the user and calculate the \n// average, median, and mode of the number of movies students see in a month.\n\n#include &lt;iostream&gt;\nusing namespace std;\n\n// Function prototypes\ndouble median(int *, int);\nint mode(int *, int);\nint *makeArray(int);\nvoid getMovieData(int *, int);\nvoid selectionSort(int[], int);\ndouble average(int *, int);\n\n// variables\nint surveyed;\n\n\n\nint main()\n{\n    cout &lt;&lt; \"This program will give the average, median, and mode of the number of movies students see in a month\" &lt;&lt; endl;\n    cout &lt;&lt; \"How many students were surveyed?\" &lt;&lt; endl;\n    cin &gt;&gt; surveyed;\n\n    int *array = new int[surveyed];\n\n    for (int i = 0; i &lt; surveyed; ++i)\n    {\n        cout &lt;&lt; \"How many movies did student \" &lt;&lt; i + 1 &lt;&lt; \" see?\" &lt;&lt; endl;\n        cin &gt;&gt; array[i];\n    }\n\n\n\n    median(*array[surveyed], surveyed);\n\n}\n\n\ndouble median(int *array[], int num)\n{\n    if (num % 2 != 0)\n    {\n        int temp = ((num + 1) / 2) - 1;\n        cout &lt;&lt; \"The median of the number of movies seen by the students is \" &lt;&lt; array[temp] &lt;&lt; endl;\n    }\n    else\n    {\n        cout &lt;&lt; \"The median of the number of movies seen by the students is \" &lt;&lt; array[(num / 2) - 1] &lt;&lt; \" and \" &lt;&lt; array[num / 2] &lt;&lt; endl;\n    }\n\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "boost", "iterator", "boost-python"], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 1256847, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9eba5bf75520e7d5ed83e3f264ddfe6b?s=128&d=identicon&r=PG", "display_name": "kpx1894", "link": "https://stackoverflow.com/users/1256847/kpx1894"}, "edited": false, "score": 0, "creation_date": 1423694082, "post_id": 28463986, "comment_id": 45257401, "body": "Thanks. If somebody was interested why post increment (not pre increment) is here - it is required by boost::python iterator wrapper."}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1423686920, "creation_date": 1423686920, "answer_id": 28463986, "question_id": 28462804, "link": "https://stackoverflow.com/questions/28462804/why-boostpython-iterator-skips-first-element/28463986#28463986", "title": "why boost::python iterator skips first element?", "body": "<p>You have a bug in your post-increment operator. Specifically, what you implemented is <strong>pre</strong>-increment, not <strong>post</strong>-increment:</p>\n\n<pre><code>iterator operator++(int)\n{\n    ++pos_;\n    return *this;  // return value *after* having incremented it\n}\n</code></pre>\n\n<p>The correct implementation would be:</p>\n\n<pre><code>iterator operator++(int)\n{\n    iterator tmp(*this);\n    ++pos_;\n    return tmp; // return saved tmp *before* having incremented it\n}\n</code></pre>\n\n<p>After that fix:</p>\n\n<pre><code>&gt;&gt;&gt; list(pythonIterator.Foo())\n... snip lots of output ...\n[0, 1, 2]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1423692214, "post_id": 28465138, "comment_id": 45256446, "body": "And here it is <b><a href=\"http://coliru.stacked-crooked.com/a/29827dfd0a5731d1\" rel=\"nofollow noreferrer\">Live On The Glorious Coliru</a></b>"}, {"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1423692968, "post_id": 28465138, "comment_id": 45256865, "body": "Curses!  Another tag for you to conquest. (;  Thanks for the Boost.Python Coliru example!  I had not tried using it in my Boost.Python answers."}, {"owner": {"reputation": 381, "user_id": 1256847, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9eba5bf75520e7d5ed83e3f264ddfe6b?s=128&d=identicon&r=PG", "display_name": "kpx1894", "link": "https://stackoverflow.com/users/1256847/kpx1894"}, "edited": false, "score": 0, "creation_date": 1423694385, "post_id": 28465138, "comment_id": 45257528, "body": "Another day in my life when I discover something new in Boost. :-) Thanks."}], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 3, "last_activity_date": 1423694425, "last_edit_date": 1423694425, "creation_date": 1423691180, "answer_id": 28465138, "question_id": 28462804, "link": "https://stackoverflow.com/questions/28462804/why-boostpython-iterator-skips-first-element/28465138#28465138", "title": "why boost::python iterator skips first element?", "body": "<p>Oh wow. Thanks for finally showing me the first self-contained Boost Python example.</p>\n\n<p>So, let me repay you the service by suggesting to use Boost Iterator to handle the iterator complexity for you:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/29827dfd0a5731d1\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;boost/python.hpp&gt;\n#include &lt;boost/iterator/iterator_facade.hpp&gt;\n\nclass Foo\n{\npublic:\n    struct iterator : boost::iterator_facade&lt;iterator, int, boost::single_pass_traversal_tag, int&gt;\n    {\n        iterator(int i) : current_(i) {}\n\n        bool equal(iterator const&amp; other) const { return current_ == other.current_; }\n        int dereference() const { return current_; }\n        void increment() { ++current_; }\n    private:\n        int current_;\n    };\n\n    iterator begin() { return 0; }\n    iterator end()   { return 3; }\n};\n\nBOOST_PYTHON_MODULE(pythonIterator)\n{\n    boost::python::class_&lt;Foo, boost::noncopyable&gt;(\"Foo\", boost::python::init&lt;&gt;())\n        .def(\"__iter__\", boost::python::iterator&lt;Foo, boost::python::return_value_policy&lt;boost::python::return_by_value&gt;&gt;{});\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>$ ./test.py \n0\n1\n2\n</code></pre>\n\n<p>Of course, the choice to make the iterator return copies was inspired by the absense of a source range. (Obviously <code>iterator_facade</code> is fully geared towards lvalue-refs if you need them)</p>\n"}], "owner": {"reputation": 381, "user_id": 1256847, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9eba5bf75520e7d5ed83e3f264ddfe6b?s=128&d=identicon&r=PG", "display_name": "kpx1894", "link": "https://stackoverflow.com/users/1256847/kpx1894"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 2, "accepted_answer_id": 28463986, "answer_count": 2, "score": 4, "last_activity_date": 1423694425, "creation_date": 1423682739, "last_edit_date": 1423687902, "question_id": 28462804, "link": "https://stackoverflow.com/questions/28462804/why-boostpython-iterator-skips-first-element", "title": "why boost::python iterator skips first element?", "body": "<p>I have encountered a strange problem when I have attempted to implement iterable object for Python in C++ (using boost::python). Python seems to always dereference one element ahead, so, in result it skips first element and also dereferences \"end\" element. I am also not confident if my return value policy is selected properly, but it is the only one that seems to work correctly if I replace int with std::string as an element type. The iterator tag has been chosen purposely - I intend to implement iterable object to access resource that can be traversed only once.</p>\n\n<p>C++ code:</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;boost/python.hpp&gt;\n\n#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n\nint nextInstance{0};\n\nclass Foo\n{\npublic:\n    class iterator : public std::iterator&lt;std::input_iterator_tag, int&gt;\n    {\n    public:\n        iterator() = delete;\n        iterator&amp; operator=(const iterator&amp;) = delete;\n\n        iterator(const iterator&amp; other)\n        :\n            instance_(nextInstance++),\n            pos_(other.pos_)\n        {\n            std::cout &lt;&lt; instance_ &lt;&lt; \" copy ctor \" &lt;&lt; other.instance_ &lt;&lt; \" (\" &lt;&lt; pos_ &lt;&lt; \")\\n\";\n        }\n\n        explicit iterator(int pos)\n        :\n            instance_(nextInstance++),\n            pos_(pos)\n        {\n            std::cout &lt;&lt; instance_ &lt;&lt; \" ctor (\" &lt;&lt; pos_ &lt;&lt; \")\\n\";\n        }\n\n        bool operator==(iterator&amp; other)\n        {\n            std::cout &lt;&lt; instance_ &lt;&lt; \" operator== \" &lt;&lt; other.instance_ &lt;&lt; \" (\" &lt;&lt; pos_ &lt;&lt; \", \" &lt;&lt; other.pos_ &lt;&lt; \")\\n\";\n\n            return pos_ == other.pos_;\n        }\n\n        int&amp; operator*()\n        {\n            std::cout &lt;&lt; instance_ &lt;&lt; \" operator* (\" &lt;&lt; pos_ &lt;&lt; \")\\n\";\n\n            return pos_;\n        }\n\n        iterator operator++(int)\n        {\n            ++pos_;\n\n            std::cout &lt;&lt; instance_ &lt;&lt; \" operator++ (\" &lt;&lt; pos_ &lt;&lt; \")\\n\";\n\n            return *this;\n        }\n\n        ~iterator()\n        {\n            std::cout &lt;&lt; instance_ &lt;&lt; \" dtor\\n\";\n        }\n\n    private:\n        const int instance_;\n        int       pos_{0};\n\n    };\n\n    iterator begin()\n    {\n        std::cout &lt;&lt; \"begin()\\n\";\n\n        return iterator(0);\n    }\n\n    iterator end()\n    {\n        std::cout &lt;&lt; \"end()\\n\";\n\n        return iterator(3);\n    }\n};\n\nBOOST_PYTHON_MODULE(pythonIterator)\n{\n    boost::python::class_&lt;Foo, boost::noncopyable&gt;(\"Foo\", boost::python::init&lt;&gt;())\n        .def(\"__iter__\", boost::python::iterator&lt;Foo, boost::python::return_value_policy&lt;boost::python::copy_non_const_reference&gt;&gt;{});\n}\n</code></pre>\n\n<p>Python code: </p>\n\n<pre><code>#!/usr/bin/python\n\nimport pythonIterator\n\nfoo = pythonIterator.Foo()\n\nfor i in foo:\n    print i\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>end()\n0 ctor (3)\nbegin()\n1 ctor (0)\n2 copy ctor 1 (0)\n3 copy ctor 0 (3)\n1 dtor\n0 dtor\n4 copy ctor 2 (0)\n5 copy ctor 3 (3)\n3 dtor\n2 dtor\n4 operator== 5 (0, 3)\n4 operator++ (1)\n6 copy ctor 4 (1)\n6 operator* (1)\n6 dtor\n1\n4 operator== 5 (1, 3)\n4 operator++ (2)\n7 copy ctor 4 (2)\n7 operator* (2)\n7 dtor\n2\n4 operator== 5 (2, 3)\n4 operator++ (3)\n8 copy ctor 4 (3)\n8 operator* (3)\n8 dtor\n3\n4 operator== 5 (3, 3)\n5 dtor\n4 dtor\n</code></pre>\n"}, {"tags": ["c++", "clang", "compiler-optimization", "avx2"], "comments": [{"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1423684696, "post_id": 28462707, "comment_id": 45252441, "body": "Looks like massive fail on the compiler part. There&#39;s no reason it should be using <code>xmm</code> registers at all when the code is entirely 256-bit. (callee-save registers aside)"}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1423684859, "post_id": 28462707, "comment_id": 45252541, "body": "Unless it&#39;s strict-aliasing that&#39;s getting in the way. But every modern compiler treats SIMD registers as aggregates, so this shouldn&#39;t apply."}, {"owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1423685559, "post_id": 28462707, "comment_id": 45252916, "body": "Thanks for the input. For what it&#39;s worth, I&#39;ve tried invoking clang with <code>-fno-strict-aliasing</code>, but it doesn&#39;t affect the generated code."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1423692437, "post_id": 28462707, "comment_id": 45256580, "body": "FWIW with <code>Apple LLVM version 6.0 (clang-600.0.56) (based on LLVM 3.5svn)</code> this passes with <code>-O1</code>, but fails with <code>-O0</code>, <code>-O2</code> and <code>-O3</code>, which is something I&#39;ve never seen before."}, {"owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1423693774, "post_id": 28462707, "comment_id": 45257288, "body": "@PaulR: Yeah, it&#39;s definitely strange. Having gotten responses from some of the most experienced SSE/AVX gurus on SO, I&#39;m leaning toward it being a bug. Now I just have to figure out how to report it (the instructions provided by LLVM on collecting a test case seem pretty arcane to me)."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1423694991, "post_id": 28462707, "comment_id": 45257792, "body": "It might be worth filing a bug report with <a href=\"http://bugreporter.apple.com\" rel=\"nofollow noreferrer\">Apple</a> too - I&#39;ll do this if you&#39;re happy for me to pass your test case code on to them ?"}, {"owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "edited": false, "score": 0, "creation_date": 1423695143, "post_id": 28462707, "comment_id": 45257862, "body": "That would be great. If their tracker is public and you could add a link to the report here that would be most broadly helpful. Thanks!"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1423695816, "post_id": 28462707, "comment_id": 45258172, "body": "No problem - this is now filed with Apple as RADAR #19803695 - you need a developer account (or at least an Apple ID - free to set up either way) to access <a href=\"http://bugreport.apple.com\" rel=\"nofollow noreferrer\">bugreport.apple.com</a> - I&#39;m not sure if you can see the status of other people&#39;s bug reports though."}, {"owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "edited": false, "score": 0, "creation_date": 1423744984, "post_id": 28462707, "comment_id": 45278191, "body": "Thanks Paul. For what it&#39;s worth to others who may see this, you need to be a registered Apple developer to access bugreport.apple.com (which I&#39;m not). I did open a similar report with LLVM directly, so we will see what happens."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1433928674, "post_id": 28462707, "comment_id": 49558741, "body": "@JasonR: update on this - the bug finally seems to be fixed in the latest Xcode 7 beta released by Apple during WWDC this week. The test case now passes with <code>Apple LLVM version 7.0.0 (clang-700.0.53)</code> on all optimisation levels."}, {"owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1433940425, "post_id": 28462707, "comment_id": 49566600, "body": "@PaulR: Thanks for the update!"}], "answers": [{"comments": [{"owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "edited": false, "score": 1, "creation_date": 1423844612, "post_id": 28503851, "comment_id": 45327110, "body": "Indeed this is a dark corner of the ABI. I&#39;m very impressed at the speed at which the bug was diagnosed and a fix proposed. They currently have a patch in code review, hopefully to be available before the upcoming clang 3.6 release."}, {"owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "edited": false, "score": 1, "creation_date": 1424316842, "post_id": 28503851, "comment_id": 45502644, "body": "The fix for the bug has been merged now, so it looks like it will make it into clang 3.6."}], "owner": {"reputation": 178, "user_id": 544269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/142b663fc6ebcc9fab21166af8a4a835?s=128&d=identicon&r=PG", "display_name": "biscuits", "link": "https://stackoverflow.com/users/544269/biscuits"}, "is_accepted": true, "score": 5, "last_activity_date": 1423843905, "creation_date": 1423843905, "answer_id": 28503851, "question_id": 28462707, "link": "https://stackoverflow.com/questions/28462707/is-this-incorrect-code-generation-with-arrays-of-m256-values-a-clang-bug/28503851#28503851", "title": "Is this incorrect code generation with arrays of __m256 values a clang bug?", "body": "<p>This is a bug in clang. The fact that it happened at -O0 is a good clue that the bug is in the front-end, and in this case, it's a dark corner of the x86-64 ABI implementation related to handling of a struct that contains a vector array of exactly size 1!</p>\n\n<p>The bug has been present for years, but this is the first time that anyone has hit it, noticed it, and reported it. Thanks!</p>\n\n<p><a href=\"http://llvm.org/bugs/show_bug.cgi?id=22563\">http://llvm.org/bugs/show_bug.cgi?id=22563</a></p>\n"}], "owner": {"reputation": 10060, "user_id": 919747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/291c33625deabed28aea713a55208c3f?s=128&d=identicon&r=PG", "display_name": "Jason R", "link": "https://stackoverflow.com/users/919747/jason-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 643, "favorite_count": 0, "accepted_answer_id": 28503851, "answer_count": 1, "score": 11, "last_activity_date": 1427212440, "creation_date": 1423682450, "last_edit_date": 1427212440, "question_id": 28462707, "link": "https://stackoverflow.com/questions/28462707/is-this-incorrect-code-generation-with-arrays-of-m256-values-a-clang-bug", "title": "Is this incorrect code generation with arrays of __m256 values a clang bug?", "body": "<p>I'm encountering what appears to be a bug causing incorrect code generation with clang 3.4, 3.5, and 3.6 trunk. The source that actually triggered the problem is quite complicated, but I've been able to reduce it to this self-contained example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;immintrin.h&gt;\n#include &lt;string.h&gt;\n\nstruct simd_pack\n{\n    enum { num_vectors = 1 };\n    __m256i _val[num_vectors];\n};\n\nsimd_pack load_broken(int8_t *p)\n{\n    simd_pack pack;\n    for (int i = 0; i &lt; simd_pack::num_vectors; ++i) pack._val[i] = _mm256_loadu_si256(reinterpret_cast&lt;__m256i *&gt;(p + i * 32));\n    return pack;\n}\n\nvoid store_broken(int8_t *p, simd_pack pack)\n{\n    for (int i = 0; i &lt; simd_pack::num_vectors; ++i) _mm256_storeu_si256(reinterpret_cast&lt;__m256i *&gt;(p + i * 32), pack._val[i]);    \n}\n\nvoid test_broken(int8_t *out, int8_t *in1, size_t n)\n{\n    size_t i = 0;\n    for (; i + 31 &lt; n; i += 32)\n    {\n        simd_pack p1 = load_broken(in1 + i);\n        store_broken(out + i, p1);\n    }   \n}\n\nint main()\n{\n    int8_t in_buf[256];\n    int8_t out_buf[256];\n    for (size_t i = 0; i &lt; 256; ++i) in_buf[i] = i;\n\n    test_broken(out_buf, in_buf, 256);\n    if (memcmp(in_buf, out_buf, 256)) std::cout &lt;&lt; \"test_broken() failed!\" &lt;&lt; std::endl;    \n\n    return 0;\n}\n</code></pre>\n\n<p>A summary of the above: I have a simple type called <code>simd_pack</code> that contains one member, an array of one <code>__m256i</code> value. In my application, there are operators and functions that take these types, but the problem can be illustrated by the above example. Specifically, <code>test_broken()</code> should read from the <code>in1</code> array and then just copy its value over to the <code>out</code> array. Therefore, the call to <code>memcmp()</code> in <code>main()</code> should return zero. I compile the above using the following:</p>\n\n<pre><code>clang++-3.6 bug_test.cc -o bug_test -mavx -O3\n</code></pre>\n\n<p>I find that on optimization levels <code>-O0</code> and <code>-O1</code>, the test passes, while on levels <code>-O2</code> and <code>-O3</code>, the test fails. I've tried compiling the same file with gcc 4.4, 4.6, 4.7, and 4.8, as well as Intel C++ 13.0, and the test passes on all optimization levels.</p>\n\n<p>Taking a closer look at the generated code, here's the assembly generated on optimization level <code>-O3</code>:</p>\n\n<pre><code>0000000000400a40 &lt;test_broken(signed char*, signed char*, unsigned long)&gt;:\n  400a40:       55                      push   %rbp\n  400a41:       48 89 e5                mov    %rsp,%rbp\n  400a44:       48 81 e4 e0 ff ff ff    and    $0xffffffffffffffe0,%rsp\n  400a4b:       48 83 ec 40             sub    $0x40,%rsp\n  400a4f:       48 83 fa 20             cmp    $0x20,%rdx\n  400a53:       72 2f                   jb     400a84 &lt;test_broken(signed char*, signed char*, unsigned long)+0x44&gt;\n  400a55:       31 c0                   xor    %eax,%eax\n  400a57:       66 0f 1f 84 00 00 00    nopw   0x0(%rax,%rax,1)\n  400a5e:       00 00 \n  400a60:       c5 fc 10 04 06          vmovups (%rsi,%rax,1),%ymm0\n  400a65:       c5 f8 29 04 24          vmovaps %xmm0,(%rsp)\n  400a6a:       c5 fc 28 04 24          vmovaps (%rsp),%ymm0\n  400a6f:       c5 fc 11 04 07          vmovups %ymm0,(%rdi,%rax,1)\n  400a74:       48 8d 48 20             lea    0x20(%rax),%rcx\n  400a78:       48 83 c0 3f             add    $0x3f,%rax\n  400a7c:       48 39 d0                cmp    %rdx,%rax\n  400a7f:       48 89 c8                mov    %rcx,%rax\n  400a82:       72 dc                   jb     400a60 &lt;test_broken(signed char*, signed char*, unsigned long)+0x20&gt;\n  400a84:       48 89 ec                mov    %rbp,%rsp\n  400a87:       5d                      pop    %rbp\n  400a88:       c5 f8 77                vzeroupper \n  400a8b:       c3                      retq   \n  400a8c:       0f 1f 40 00             nopl   0x0(%rax)\n</code></pre>\n\n<p>I'll reproduce the key part for emphasis:</p>\n\n<pre><code>  400a60:       c5 fc 10 04 06          vmovups (%rsi,%rax,1),%ymm0\n  400a65:       c5 f8 29 04 24          vmovaps %xmm0,(%rsp)\n  400a6a:       c5 fc 28 04 24          vmovaps (%rsp),%ymm0\n  400a6f:       c5 fc 11 04 07          vmovups %ymm0,(%rdi,%rax,1)\n</code></pre>\n\n<p>This is kind of head-scratching. It first loads 256 bits into <code>ymm0</code> using the unaligned move that I asked for, then it stores <code>xmm0</code> (which only contains the lower 128 bits of the data that was read) to the stack, then immediately reads 256 bits into <code>ymm0</code> from the stack location that was just written to. The effect is that <code>ymm0</code>'s upper 128 bits (which get written to the output buffer) are garbage, causing the test to fail.</p>\n\n<p>Is there some good reason why this could be happening, other than just a compiler bug? Am I violating some rule by having the <code>simd_pack</code> type hold an array of <code>__m256i</code> values? It certainly seems to be related to that; if I change <code>_val</code> to be a single value instead of an array, then the generated code works as intended. However, my application requires <code>_val</code> to be an array (its length is dependent upon a C++ template parameter).</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "mysql", "exception", "schema", "connector"], "comments": [{"owner": {"reputation": 526, "user_id": 836698, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/foBeV.png?s=128&g=1", "display_name": "paghdv", "link": "https://stackoverflow.com/users/836698/paghdv"}, "edited": false, "score": 0, "creation_date": 1423687950, "post_id": 28462633, "comment_id": 45254243, "body": "Same problem here but running on Ubuntu. It was working before but now it gives the same error. Removing the setSchema works some times but sometimes I get &quot;No database selected&quot;. It&#39;s driving me crazy!"}, {"owner": {"reputation": 506, "user_id": 1445531, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/H2WrL.jpg?s=128&g=1", "display_name": "jerorx", "link": "https://stackoverflow.com/users/1445531/jerorx"}, "edited": false, "score": 0, "creation_date": 1424689209, "post_id": 28462633, "comment_id": 45637867, "body": "Did you find a solution by any chance? I have the same problem!"}], "answers": [{"owner": {"reputation": 41, "user_id": 3798151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54b15ab5a368235763f62d969daa65f3?s=128&d=identicon&r=PG&f=1", "display_name": "bakhansen", "link": "https://stackoverflow.com/users/3798151/bakhansen"}, "is_accepted": false, "score": 0, "last_activity_date": 1424871997, "creation_date": 1424871997, "answer_id": 28720638, "question_id": 28462633, "link": "https://stackoverflow.com/questions/28462633/mysql-connector-for-c-mysql-connectionsetreadonly-exception-on-setschema/28720638#28720638", "title": "MySQL Connector for C++ | MySQL_Connection::setReadOnly() exception on setSchema", "body": "<p>I had a similar problem, though on Debian Wheezy, with <strong>version 1.1.0-4+b1</strong>:</p>\n\n<p>Example of usage:</p>\n\n<pre><code>sql::Connection *con; \ncon-&gt;setSchema(mysql_schema);\n</code></pre>\n\n<p>Which throws: </p>\n\n<blockquote>\n  <p>MySQL_Connection::setReadOnly()</p>\n</blockquote>\n\n<p>By replacing Connector/C++ 1.1.0-4+b1 with 1.1.5, it no longer throws this error.</p>\n"}, {"owner": {"reputation": 1478, "user_id": 5557309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1621133335/picture?type=large", "display_name": "James Picone", "link": "https://stackoverflow.com/users/5557309/james-picone"}, "is_accepted": false, "score": 0, "last_activity_date": 1449799607, "creation_date": 1449799607, "answer_id": 34215031, "question_id": 28462633, "link": "https://stackoverflow.com/questions/28462633/mysql-connector-for-c-mysql-connectionsetreadonly-exception-on-setschema/34215031#34215031", "title": "MySQL Connector for C++ | MySQL_Connection::setReadOnly() exception on setSchema", "body": "<p>I've had the same problem; it turned out to be because I was linking the 64-bit version of Connector/C++ to my compiled-as-32-bit program.</p>\n"}, {"owner": {"reputation": 11, "user_id": 5685202, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/5de5d30e6bd84515ef25a6798eed33ed?s=128&d=identicon&r=PG", "display_name": "user5685202", "link": "https://stackoverflow.com/users/5685202/user5685202"}, "is_accepted": false, "score": 0, "last_activity_date": 1450334775, "creation_date": 1450334775, "answer_id": 34328262, "question_id": 28462633, "link": "https://stackoverflow.com/questions/28462633/mysql-connector-for-c-mysql-connectionsetreadonly-exception-on-setschema/34328262#34328262", "title": "MySQL Connector for C++ | MySQL_Connection::setReadOnly() exception on setSchema", "body": "<p>yes\uff0cplease use v1.1.5. the version of 1.16 has bug.</p>\n\n<pre><code>tar -xf mysql-connector-c++-1.1.5.tar.gz\ncd mysql-connector-c++-1.1.5\ncmake . -DMYSQL_CONFIG_EXECUTABLE=/usr/local/mysql/bin/mysql_config \\\n  -DMYSQL_LIB=/usr/local/mysql/lib/libmysqlclient.so\nmake\nsudo make install\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4556281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5taG.jpg?s=128&g=1", "display_name": "Xeno", "link": "https://stackoverflow.com/users/4556281/xeno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1868, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1450334775, "creation_date": 1423682242, "question_id": 28462633, "link": "https://stackoverflow.com/questions/28462633/mysql-connector-for-c-mysql-connectionsetreadonly-exception-on-setschema", "title": "MySQL Connector for C++ | MySQL_Connection::setReadOnly() exception on setSchema", "body": "<p>I am writing a server-emu software for a not-so-popular mmorpg game, and I'm using mysql connector for c++ to connect with my database. After I reinstalled Windows (and my whole dev environment) I've got a weird mysql connector exception.</p>\n\n<p>The code I use to connect with the database looks like this:</p>\n\n<pre><code>try\n{\n        this-&gt;driver = get_driver_instance();\n        std::cout &lt;&lt; \"SQL Driver Name: \" &lt;&lt; this-&gt;driver-&gt;getName() &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"Connecting as \" &lt;&lt; user &lt;&lt; \"@\" &lt;&lt; host &lt;&lt; \" using password \" &lt;&lt; password &lt;&lt; std::endl;\n        this-&gt;connection = this-&gt;driver-&gt;connect(host, user, password);\n        std::cout &lt;&lt; \"Setting schema to \" &lt;&lt; schema &lt;&lt; std::endl;\n        this-&gt;connection-&gt;setSchema(schema);\n\n} catch(sql::SQLException &amp;e)\n{\n        std::cout &lt;&lt; \"# ERR: SQLException in \" &lt;&lt; __FILE__;\n        std::cout &lt;&lt; \"(\" &lt;&lt; __FUNCTION__ &lt;&lt; \") on line \" &lt;&lt; __LINE__ &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"# ERR: \" &lt;&lt; e.what();\n        std::cout &lt;&lt; \" (MySQL error code: \" &lt;&lt; e.getErrorCode();\n        std::cout &lt;&lt; \", SQLState: \" &lt;&lt; e.getSQLState() &lt;&lt; \" )\" &lt;&lt; std::endl;\n        return 1;\n}\n</code></pre>\n\n<p>(all variables like user, password etc. are std::strings)</p>\n\n<p>This was working before, but now it prints in the console this:</p>\n\n<pre><code>SQL Driver Name: MySQL Connector C++ (libmysql)\nConnecting as root@tcp://localhost:3306 using password testpassword\nSetting schema to testschema\nERR: SQLException in c:\\whatever\\db.cpp on line 22\nERR: MySQL_Connection::setReadOnly() (MySQL error code: 0, SQLState:  )\n</code></pre>\n\n<p>Without this line:</p>\n\n<pre><code>this-&gt;connection-&gt;setSchema(schema);\n</code></pre>\n\n<p>everything works fine.</p>\n\n<p>I don't have any ideas how to fix this and why is this happening. Please help.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 4, "creation_date": 1423682062, "post_id": 28462541, "comment_id": 45250889, "body": "It is 100% safe because <code>inverse_version2</code> will prevent the code from compiling."}, {"owner": {"reputation": 4184, "user_id": 3987536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/327abb72f81fec541e936876b90d25d2?s=128&d=identicon&r=PG", "display_name": "Lawrence Aiello", "link": "https://stackoverflow.com/users/3987536/lawrence-aiello"}, "edited": false, "score": 1, "creation_date": 1423682064, "post_id": 28462541, "comment_id": 45250890, "body": "Does this even compile?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1423682179, "post_id": 28462541, "comment_id": 45250953, "body": "Why not simply return by value?  That&#39;s 100% safe, 100% works, 100% fast, and 100% leak-free."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1423682234, "post_id": 28462541, "comment_id": 45250979, "body": "It is 100% bad practice to return something new(d) (unless it is an allocator)."}, {"owner": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "edited": false, "score": 0, "creation_date": 1423682255, "post_id": 28462541, "comment_id": 45250994, "body": "Ok, you get my intention. How do I implement it?"}, {"owner": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "edited": false, "score": 0, "creation_date": 1423682287, "post_id": 28462541, "comment_id": 45251008, "body": "Returning by value involves creating copies and I want to avoid that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1423682315, "post_id": 28462541, "comment_id": 45251024, "body": "A simple return by value for this tiny structure (even big structures might not suffer), maybe?"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 2, "creation_date": 1423682333, "post_id": 28462541, "comment_id": 45251033, "body": "@AnonymousAndy: No, returning by value does not involve creaing copies. There is RVO and NRVO."}, {"owner": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "edited": false, "score": 0, "creation_date": 1423682419, "post_id": 28462541, "comment_id": 45251097, "body": "Deduplicator: What???????? I was taught that it involves creating a temporary object."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1423682622, "post_id": 28462541, "comment_id": 45251235, "body": "You&#39;re asking a lot of questions on C++ today. Do you have a C++ book?"}, {"owner": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "edited": false, "score": 0, "creation_date": 1423683544, "post_id": 28462541, "comment_id": 45251827, "body": "Yes, I read this book called C++ How to Program 8th Edition. I get a lot of doubts when I do my assignments. This was my first and only question today."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1423683960, "post_id": 28462541, "comment_id": 45252066, "body": "The author seeks information by asking questions"}], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "edited": false, "score": 0, "creation_date": 1423682739, "post_id": 28462640, "comment_id": 45251312, "body": "My brother, let&#39;s just forget what would be better for a while and please teach me how to return a reference to a dynamically created object that I intended to do in <code>inverse_version2</code>"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "edited": false, "score": 0, "creation_date": 1423682892, "post_id": 28462640, "comment_id": 45251403, "body": "You <i>can</i> do so by dereferencing the result from <code>new</code>: <code>return *new fraction...</code>. That is an extremely bad idea though, as it runs counter to convention that you must not delete any object unless you get a pointer (which should be a smart-pointer)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "reply_to_user": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "edited": false, "score": 1, "creation_date": 1423683044, "post_id": 28462640, "comment_id": 45251513, "body": "@AnonymousAndy are you playing a stubborn  idiot, that is a memory leak."}, {"owner": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "edited": false, "score": 0, "creation_date": 1423683707, "post_id": 28462640, "comment_id": 45251924, "body": "Thank you Deduplicator. But, that gave me an error (compilation) when I tried doing the same."}, {"owner": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "edited": false, "score": 0, "creation_date": 1423683829, "post_id": 28462640, "comment_id": 45251995, "body": "Dieter Lucking, what memory leak?"}, {"owner": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "edited": false, "score": 0, "creation_date": 1423683952, "post_id": 28462640, "comment_id": 45252064, "body": "Also, Deduplicator, your <code>inverse_v1</code> is just the conventional way, right? We haven&#39;t done anything different to eliminate temporaries."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "edited": false, "score": 0, "creation_date": 1423684015, "post_id": 28462640, "comment_id": 45252098, "body": "@AnonymousAndy: Yes, it is the conventional one."}, {"owner": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "edited": false, "score": 0, "creation_date": 1423688107, "post_id": 28462640, "comment_id": 45254322, "body": "So, the conventional return statement always makes copies , right? So, how are we avoiding that?"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "edited": false, "score": 1, "creation_date": 1423690170, "post_id": 28462640, "comment_id": 45255380, "body": "@AnonymousAndy: Return statements don&#39;t always make copies. Compilers have the capability to elide copies in many cases and they&#39;ve been doing it for years. There are even terms for this; RVO (Return Value Optimization) and NRVO (Named Return Value Optimization). Even if a copy was made, have you run your code in a profiler to prove this cases an actual performance bottleneck in your program?"}], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": false, "score": 1, "last_activity_date": 1423682590, "last_edit_date": 1423682590, "creation_date": 1423682261, "answer_id": 28462640, "question_id": 28462541, "link": "https://stackoverflow.com/questions/28462541/is-returning-a-reference-to-the-newly-created-object-this-way-a-safe-practice/28462640#28462640", "title": "Is returning a reference to the newly created object this way, a safe practice?", "body": "<ol>\n<li><p>You are returning a reference to a temporary, you are toast:</p>\n\n<pre><code>const fraction&amp; inverse (const fraction&amp; f) {\n    return fraction(f.den,f.num);\n}\n</code></pre></li>\n<li><p>Are you returning a pointer or a reference to a dynamically allocated object? Decide, and correct the code!<br>\nAnyway, neither is really a good idea.</p>\n\n<pre><code>const fraction&amp; inverse_version2 (const fraction&amp; f) {\n    return new fraction(f.den,f.num); \n}\n</code></pre></li>\n</ol>\n\n<p>What you should do instead is just returning by value (and relying on RVO / NRVO to eliminate copies/moves), or eliminating any chance of a copy.<br>\nOr, if the object is really that big, by <code>std::unique_ptr</code>.</p>\n\n<pre><code>fraction inverse_v1(const fraction&amp; f) { // Uses RVO / NRVO to eliminate temporaries\n    return fraction(f.den, f.num);\n}\nfraction inverse_v2(const fraction&amp; f) { // no temporaries at all\n    return {f.den, f.num};\n}\nstd::unique_ptr&lt;fraction&gt; inverse_v3(const fraction&amp; f) { // smart-pointer\n    return {new fraction(f.den, f.num)};\n}\n</code></pre>\n"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1423683098, "last_edit_date": 1423683098, "creation_date": 1423682511, "answer_id": 28462723, "question_id": 28462541, "link": "https://stackoverflow.com/questions/28462541/is-returning-a-reference-to-the-newly-created-object-this-way-a-safe-practice/28462723#28462723", "title": "Is returning a reference to the newly created object this way, a safe practice?", "body": "<p>Both versions are wrong. In the first case you get UB as returning reference to local object, which is destroyed, in the second it would not even compile. If you try to fix second function naive way, as dereferencing the pointer, you will get memory leak. So 100% safe variant is this:</p>\n\n<pre><code>     fraction inverse (const fraction&amp; f) {\n          return fraction(f.den,f.num);\n     }\n</code></pre>\n\n<p>PS if you want to return a pointer to dynamically allocated object return a smart pointer:</p>\n\n<pre><code>     std::unique_ptr&lt;fraction&gt; inverse_ptr( const fraction&amp; f) {\n          return std::make_unique&lt;fraction&gt;(f.den,f.num);\n     }\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 4544098, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-C4eam7tOnqM/AAAAAAAAAAI/AAAAAAAAABI/T-588a130u8/photo.jpg?sz=128", "display_name": "abcde", "link": "https://stackoverflow.com/users/4544098/abcde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1423683098, "creation_date": 1423681963, "last_edit_date": 1423682582, "question_id": 28462541, "link": "https://stackoverflow.com/questions/28462541/is-returning-a-reference-to-the-newly-created-object-this-way-a-safe-practice", "title": "Is returning a reference to the newly created object this way, a safe practice?", "body": "<p>I'm talking about the public member functions <code>invert</code> and <code>invert_version2</code>, that take a fraction object as a parameter and return a new fraction object that is an inverse of the argument object. </p>\n\n<pre><code>class fraction {\n\n     public:\n         fraction(long l1, long l2) {\n             num = l1;\n             den = l2;\n         }\n\n         const fraction&amp; inverse (const fraction&amp; f) {\n              return fraction(f.den,f.num);\n         }\n\n         const fraction&amp; inverse_version2 (const fraction&amp; f) {\n              return new fraction(f.den,f.num); \n         }\n\n     private:\n          long num;\n          long den;\n\n};\n</code></pre>\n\n<p>Is this a 100% safe practice? \n<strong>This is what I think and please correct me if I'm wrong:</strong> \nThe function <code>inverse</code> creates a new fraction object on stack and even though the reference is returned, once the program execution control(any better term?) exits the function, the values in memory holding the newly created fraction object data members are lost and replaced by garbage values (or are they not???).</p>\n\n<p>However the function <code>inverse_version2</code> creates the fraction object dynamically` and thus, is 101% safe.</p>\n\n<p>Please clarify if the values are indeed lost in the former case (fraction object created on stack).  </p>\n"}, {"tags": ["c++", "text", "fonts", "stack", "sfml"], "comments": [{"owner": {"reputation": 1034, "user_id": 2215331, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/lrto1.jpg?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/2215331/leo"}, "edited": false, "score": 0, "creation_date": 1423758616, "post_id": 28462502, "comment_id": 45287443, "body": "Does the message show up correctly?"}, {"owner": {"reputation": 175, "user_id": 3036952, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/4e8454eade032b9406054222ce8e183c?s=128&d=identicon&r=PG", "display_name": "mentor93", "link": "https://stackoverflow.com/users/3036952/mentor93"}, "reply_to_user": {"reputation": 1034, "user_id": 2215331, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/lrto1.jpg?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/2215331/leo"}, "edited": false, "score": 0, "creation_date": 1423838123, "post_id": 28462502, "comment_id": 45322957, "body": "Yes, the message shows up correctly."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1423905683, "post_id": 28462502, "comment_id": 45346172, "body": "Instead of stuffing a lot of code in main(), refactor to little worker functions that get the job done.  Now you localize the bug and with some luck don&#39;t have to wait until program exit before you get the warning."}], "answers": [{"owner": {"reputation": 1034, "user_id": 2215331, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/lrto1.jpg?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/2215331/leo"}, "is_accepted": false, "score": 0, "last_activity_date": 1423839045, "creation_date": 1423839045, "answer_id": 28502184, "question_id": 28462502, "link": "https://stackoverflow.com/questions/28462502/stack-around-variable-data-was-corrupted/28502184#28502184", "title": "Stack around variable &#39;data&#39; was corrupted", "body": "<p>Change this line:</p>\n\n<pre><code>if (Keyboard::isKeyPressed(Keyboard::Key::Escape)) win.close();\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>if (Keyboard::isKeyPressed(Keyboard::Key::Escape)){\n   win.close();\n   break;\n}\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 3036952, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/4e8454eade032b9406054222ce8e183c?s=128&d=identicon&r=PG", "display_name": "mentor93", "link": "https://stackoverflow.com/users/3036952/mentor93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423904245, "creation_date": 1423681825, "last_edit_date": 1423904245, "question_id": 28462502, "link": "https://stackoverflow.com/questions/28462502/stack-around-variable-data-was-corrupted", "title": "Stack around variable &#39;data&#39; was corrupted", "body": "<p>I'm using SFML. I'm trying to write some text on the screen. Whenever I close the application I get \"Stack around variable 'data' was corrupted\" error, but I don't see anything wrong with the code.</p>\n\n<pre><code>#include &lt;SFML\\Graphics.hpp&gt;\n\nusing namespace sf;\n\nint main() {\n    RenderWindow win(VideoMode(640, 480), \"\", Style::None);\n\n    Font lucida;\n    lucida.loadFromFile(\"lucon.ttf\");\n    Text data;\n    data.setCharacterSize(12);\n    data.setColor(Color(180, 180, 180));\n    data.setFont(lucida);\n    data.setPosition(Vector2f(10, 10));\n    data.setStyle(Text::Bold);\n    data.setString(\"test\");\n\n    Event evt;\n\n    double dt = 0.f;\n    Clock clock;\n    double dwticks = clock.getElapsedTime().asSeconds();\n    double dwnewticks = 0.f;\n\n    while (win.isOpen()) {\n        if (win.pollEvent(evt)) {\n            if (Keyboard::isKeyPressed(Keyboard::Key::Escape)) win.close();\n        }\n        else {\n            dwnewticks = clock.getElapsedTime().asSeconds();\n            dt = dwnewticks &gt; dwticks ? (dwnewticks - dwticks) / 4000.f : 0.f;\n            dwticks = dwnewticks;\n\n            win.clear(Color(0, 0, 0));\n            win.draw(data);\n            win.display();\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "ubuntu", "codeblocks", "sfml", "code-completion"], "comments": [{"owner": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "edited": false, "score": 0, "creation_date": 1423681580, "post_id": 28462399, "comment_id": 45250611, "body": "This is more of a problem with Codeblocks in general since its autocomplete stuff has always been dodgy for me as well."}, {"owner": {"reputation": 555, "user_id": 3563094, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/GTBiY.jpg?s=128&g=1", "display_name": "ChemiCalChems", "link": "https://stackoverflow.com/users/3563094/chemicalchems"}, "reply_to_user": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "edited": false, "score": 0, "creation_date": 1423681672, "post_id": 28462399, "comment_id": 45250666, "body": "@Poriferous I know, I have also heard installing a nightly build would help me, but I wanna see if there is something a bit user friendlier to do. On Windows, SFML code completion works out of the box, but here on Linux it seems to be failing... Going back to Windows is not an option by now."}, {"owner": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "edited": false, "score": 0, "creation_date": 1423681804, "post_id": 28462399, "comment_id": 45250749, "body": "You could always use Qt Creator or Kdevelop. Both provide good support for auto-completion. WIth the latter you have to use CMake, and on the former qmake which is a Qt abstraction of CMake."}, {"owner": {"reputation": 555, "user_id": 3563094, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/GTBiY.jpg?s=128&g=1", "display_name": "ChemiCalChems", "link": "https://stackoverflow.com/users/3563094/chemicalchems"}, "reply_to_user": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "edited": false, "score": 0, "creation_date": 1423681962, "post_id": 28462399, "comment_id": 45250826, "body": "@Poriferous I&#39;m working on a team, and well, we are all using C::B by now. Is there a way of me using the .cbp files on Kdevelop?"}, {"owner": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "edited": false, "score": 0, "creation_date": 1423682493, "post_id": 28462399, "comment_id": 45251144, "body": "No. Kdevelop uses its own format for reading projects. I&#39;m also CodeBlocks 13.12 and SFML parses fine when I type sf::. I&#39;m on Ubuntu 14.04."}, {"owner": {"reputation": 555, "user_id": 3563094, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/GTBiY.jpg?s=128&g=1", "display_name": "ChemiCalChems", "link": "https://stackoverflow.com/users/3563094/chemicalchems"}, "reply_to_user": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "edited": false, "score": 0, "creation_date": 1423682531, "post_id": 28462399, "comment_id": 45251171, "body": "@Poriferous Strange, it&#39;s not working on KDevelop either."}], "answers": [{"comments": [{"owner": {"reputation": 3038, "user_id": 2174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Zk1tH.png?s=128&g=1", "display_name": "Dusty Campbell", "link": "https://stackoverflow.com/users/2174/dusty-campbell"}, "edited": false, "score": 0, "creation_date": 1423687899, "post_id": 28462950, "comment_id": 45254218, "body": "This does not provide an answer to the question. To critique or request clarification from an author, leave a comment below their post."}, {"owner": {"reputation": 555, "user_id": 3563094, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/GTBiY.jpg?s=128&g=1", "display_name": "ChemiCalChems", "link": "https://stackoverflow.com/users/3563094/chemicalchems"}, "reply_to_user": {"reputation": 3038, "user_id": 2174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Zk1tH.png?s=128&g=1", "display_name": "Dusty Campbell", "link": "https://stackoverflow.com/users/2174/dusty-campbell"}, "edited": false, "score": 0, "creation_date": 1423690485, "post_id": 28462950, "comment_id": 45255540, "body": "I am actually the author. That&#39;s the answer to my problem."}, {"owner": {"reputation": 10936, "user_id": 3961546, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/h74ga.jpg?s=128&g=1", "display_name": "Ethaan", "link": "https://stackoverflow.com/users/3961546/ethaan"}, "edited": false, "score": 0, "creation_date": 1423702635, "post_id": 28462950, "comment_id": 45260390, "body": "@ChemiCalChems if this is the answer to your own question &quot;accept&quot; you own answer, or just make an <b>update</b> inside the question, just to keep everything inline"}, {"owner": {"reputation": 555, "user_id": 3563094, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/GTBiY.jpg?s=128&g=1", "display_name": "ChemiCalChems", "link": "https://stackoverflow.com/users/3563094/chemicalchems"}, "reply_to_user": {"reputation": 10936, "user_id": 3961546, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/h74ga.jpg?s=128&g=1", "display_name": "Ethaan", "link": "https://stackoverflow.com/users/3961546/ethaan"}, "edited": false, "score": 0, "creation_date": 1423768506, "post_id": 28462950, "comment_id": 45293546, "body": "@Ethaan Takes two days for me to be able to accept the question."}, {"owner": {"reputation": 10936, "user_id": 3961546, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/h74ga.jpg?s=128&g=1", "display_name": "Ethaan", "link": "https://stackoverflow.com/users/3961546/ethaan"}, "edited": false, "score": 0, "creation_date": 1423768566, "post_id": 28462950, "comment_id": 45293571, "body": "@ChemiCalChems roger thath"}], "owner": {"reputation": 555, "user_id": 3563094, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/GTBiY.jpg?s=128&g=1", "display_name": "ChemiCalChems", "link": "https://stackoverflow.com/users/3563094/chemicalchems"}, "is_accepted": true, "score": 0, "last_activity_date": 1423683246, "creation_date": 1423683246, "answer_id": 28462950, "question_id": 28462399, "link": "https://stackoverflow.com/questions/28462399/sfml-code-completion-not-working-for-codeblocks-13-12-on-ubuntu-14-04/28462950#28462950", "title": "SFML code completion not working for Code::Blocks 13.12 on Ubuntu 14.04", "body": "<p>libsfml-dev reinstall was enough.</p>\n"}, {"owner": {"reputation": 2180, "user_id": 570940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/v7dPR.png?s=128&g=1", "display_name": "Arman Hayots", "link": "https://stackoverflow.com/users/570940/arman-hayots"}, "is_accepted": false, "score": 0, "last_activity_date": 1465341448, "creation_date": 1465341448, "answer_id": 37690952, "question_id": 28462399, "link": "https://stackoverflow.com/questions/28462399/sfml-code-completion-not-working-for-codeblocks-13-12-on-ubuntu-14-04/37690952#37690952", "title": "SFML code completion not working for Code::Blocks 13.12 on Ubuntu 14.04", "body": "<p>In Code::Blocks try right click on project \u2014 \u00abReparse this project\u00bb. \nThat helped me \u2014 maybe it'll help you too.</p>\n"}], "owner": {"reputation": 555, "user_id": 3563094, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/GTBiY.jpg?s=128&g=1", "display_name": "ChemiCalChems", "link": "https://stackoverflow.com/users/3563094/chemicalchems"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1524, "favorite_count": 0, "accepted_answer_id": 28462950, "answer_count": 2, "score": 0, "last_activity_date": 1465341448, "creation_date": 1423681427, "last_edit_date": 1423682627, "question_id": 28462399, "link": "https://stackoverflow.com/questions/28462399/sfml-code-completion-not-working-for-codeblocks-13-12-on-ubuntu-14-04", "title": "SFML code completion not working for Code::Blocks 13.12 on Ubuntu 14.04", "body": "<p>EDIT: NOT WORKING ON ANY IDE, SEEMS TO BE A GENERAL MISCONFIG</p>\n\n<p>So hello guys. It's taking a bit longer to set my Ubuntu system to code with SFML and C++ than expected. This should be one of the last problems really.</p>\n\n<p>So my C::B 13.12 install via apt-get on Ubuntu 14.04 will auto-complete all of my code perfectly, standard libs and personal .h files included. But it seems to be failing at auto-completing SFML. At least the .hpp files are found and C::B will give me some suggestions, like with any other .h files, but not the same thing happens with the classes and structs. To be concrete, this happens. Whenever I include the SFML files to a program, and try get code suggestions from the sf namespace, this happens. </p>\n\n<p><img src=\"https://i.stack.imgur.com/mDjSS.png\" alt=\"As you can see, only some trivial types appear, not the SFML classes.\"></p>\n\n<p>Sorry for that image, but on screen shot the suggestions close. The types suggested are Int16, Int32, Int64, Int8, and their Uint types. </p>\n\n<p>So well, I can't really think of anything else to do. These are my Search paths for my GNU GCC Compiler on C::B. </p>\n\n<p><img src=\"https://i.stack.imgur.com/c9Yio.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/BHVjN.png\" alt=\"enter image description here\"></p>\n\n<p>Thanks a lot guys! \nPeace.</p>\n"}, {"tags": ["c++", "kinect", "point-cloud-library", "openkinect"], "comments": [{"owner": {"reputation": 4898, "user_id": 1348388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y17NZ.png?s=128&g=1", "display_name": "Kornel", "link": "https://stackoverflow.com/users/1348388/kornel"}, "edited": false, "score": 0, "creation_date": 1423742983, "post_id": 28462034, "comment_id": 45277071, "body": "I&#39;m not sure, but not all procedures (for normal estimation) need organized point clouds. It may work <a href=\"http://www.pointclouds.org/documentation/tutorials/normal_estimation.php#normal-estimation\" rel=\"nofollow noreferrer\">pointclouds.org/documentation/tutorials/&hellip;</a>"}, {"owner": {"reputation": 525, "user_id": 1349663, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JNohQ.jpg?s=128&g=1", "display_name": "user1349663", "link": "https://stackoverflow.com/users/1349663/user1349663"}, "reply_to_user": {"reputation": 4898, "user_id": 1348388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y17NZ.png?s=128&g=1", "display_name": "Kornel", "link": "https://stackoverflow.com/users/1348388/kornel"}, "edited": false, "score": 0, "creation_date": 1423761569, "post_id": 28462034, "comment_id": 45289484, "body": "@Kornel This was the tutorial I used and the setInputCloud() function needs an organised point cloud."}, {"owner": {"reputation": 4898, "user_id": 1348388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y17NZ.png?s=128&g=1", "display_name": "Kornel", "link": "https://stackoverflow.com/users/1348388/kornel"}, "edited": false, "score": 0, "creation_date": 1423831483, "post_id": 28462034, "comment_id": 45319050, "body": "are you sure? <a href=\"http://docs.pointclouds.org/trunk/features_2include_2pcl_2features_2normal__3d_8h_source.html#l00286\" rel=\"nofollow noreferrer\">here</a> isn&#39;t any restriction for the ordered/unordered nature. Only the OMP version needs to have organized clouds."}], "answers": [{"owner": {"reputation": 548, "user_id": 4400024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPGCU.png?s=128&g=1", "display_name": "Ardiya", "link": "https://stackoverflow.com/users/4400024/ardiya"}, "is_accepted": false, "score": 1, "last_activity_date": 1558950590, "creation_date": 1558950590, "answer_id": 56323611, "question_id": 28462034, "link": "https://stackoverflow.com/questions/28462034/copy-pcl-point-cloud-while-preserving-organization-or-ransac-surface-normal-ca/56323611#56323611", "title": "Copy PCL Point Cloud while preserving organization or Ransac + Surface Normal Calculation", "body": "<p>I think this answer is too late and API might changes from 2015.. but I'll answer it.</p>\n\n<p>The normal estimation will work with both organized cloud and unorganized cloud.</p>\n\n<h2>Unorganized Cloud</h2>\n\n<p>I'm copying the code from <a href=\"http://pointclouds.org/documentation/tutorials/normal_estimation.php\" rel=\"nofollow noreferrer\">http://pointclouds.org/documentation/tutorials/normal_estimation.php</a>\nIn this code, the KdTree will be used to estimate the neighbours.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;pcl/point_types.h&gt;\n#include &lt;pcl/features/normal_3d.h&gt;\n\n{\n  pcl::PointCloud&lt;pcl::PointXYZ&gt;::Ptr cloud (new pcl::PointCloud&lt;pcl::PointXYZ&gt;);\n\n  ... read, pass in or create a point cloud ...\n\n  // Create the normal estimation class, and pass the input dataset to it\n  pcl::NormalEstimation&lt;pcl::PointXYZ, pcl::Normal&gt; ne;\n  ne.setInputCloud (cloud);\n\n  // Create an empty kdtree representation, and pass it to the normal estimation object.\n  // Its content will be filled inside the object, based on the given input dataset (as no other search surface is given).\n  pcl::search::KdTree&lt;pcl::PointXYZ&gt;::Ptr tree (new pcl::search::KdTree&lt;pcl::PointXYZ&gt; ());\n  ne.setSearchMethod (tree);\n\n  // Output datasets\n  pcl::PointCloud&lt;pcl::Normal&gt;::Ptr cloud_normals (new pcl::PointCloud&lt;pcl::Normal&gt;);\n\n  // Use all neighbors in a sphere of radius 3cm\n  ne.setRadiusSearch (0.03);\n\n  // Compute the features\n  ne.compute (*cloud_normals);\n\n  // cloud_normals-&gt;points.size () should have the same size as the input cloud-&gt;points.size ()*\n}\n</code></pre>\n\n<h2>Organized Cloud</h2>\n\n<p>I am copying the code from <a href=\"http://www.pointclouds.org/documentation/tutorials/normal_estimation_using_integral_images.php#normal-estimation-using-integral-images\" rel=\"nofollow noreferrer\">http://www.pointclouds.org/documentation/tutorials/normal_estimation_using_integral_images.php#normal-estimation-using-integral-images</a></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// load point cloud\npcl::PointCloud&lt;pcl::PointXYZ&gt;::Ptr cloud (new pcl::PointCloud&lt;pcl::PointXYZ&gt;);\npcl::io::loadPCDFile (\"table_scene_mug_stereo_textured.pcd\", *cloud);\n\n// estimate normals\npcl::PointCloud&lt;pcl::Normal&gt;::Ptr normals (new pcl::PointCloud&lt;pcl::Normal&gt;);\n\npcl::IntegralImageNormalEstimation&lt;pcl::PointXYZ, pcl::Normal&gt; ne;\nne.setNormalEstimationMethod (ne.AVERAGE_3D_GRADIENT);\nne.setMaxDepthChangeFactor(0.02f);\nne.setNormalSmoothingSize(10.0f);\nne.setInputCloud(cloud);\nne.compute(*normals);\n</code></pre>\n"}], "owner": {"reputation": 525, "user_id": 1349663, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JNohQ.jpg?s=128&g=1", "display_name": "user1349663", "link": "https://stackoverflow.com/users/1349663/user1349663"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2171, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1558950590, "creation_date": 1423680304, "question_id": 28462034, "link": "https://stackoverflow.com/questions/28462034/copy-pcl-point-cloud-while-preserving-organization-or-ransac-surface-normal-ca", "title": "Copy PCL Point Cloud while preserving organization or Ransac + Surface Normal Calculation", "body": "<p>I have a point cloud </p>\n\n<pre><code>pcl::PointCloud&lt;pcl::PointXYZRGBA&gt;::Ptr cloud (new pcl::PointCloud&lt;pcl::PointXYZRGBA&gt;);\n</code></pre>\n\n<p>that I want to copy into </p>\n\n<pre><code>pcl::PointCloud&lt;pcl::PointXYZRGBA&gt;::Ptr finalcloud (new pcl::PointCloud&lt;pcl::PointXYZRGBA&gt;);\n</code></pre>\n\n<p>while filtering based on some inliers calculated using ransac. </p>\n\n<pre><code>std::vector&lt;int&gt; inliers;\n</code></pre>\n\n<p>I am currently doing this as </p>\n\n<pre><code>pcl::copyPointCloud&lt;pcl::PointXYZRGBA&gt;(*cloud, inliers, *finalcloud);\n</code></pre>\n\n<p><strong>Problem</strong>:</p>\n\n<p>Since I want to find the normals for this cloud, I need the organization to be maintained. The copyPointCloud function makes the new point cloud height = 1 (see line 188 of <a href=\"http://docs.pointclouds.org/1.7.0/common_2include_2pcl_2common_2impl_2io_8hpp_source.html\" rel=\"nofollow\">PCL io.hpp</a> ).</p>\n\n<p>Has anyone been able to find normals after performing ransac on a pcl?</p>\n"}, {"tags": ["c++", "arrays", "struct", "char"], "comments": [{"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 2, "creation_date": 1423680292, "post_id": 28461998, "comment_id": 45249844, "body": "It&#39;s certainly possible that you are doing something incorrect with memory management. But without a fully compilable test case, we won&#39;t be able to accurately point at anything as a wrong line of code."}, {"owner": {"reputation": 33, "user_id": 3974016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/585ae1968db3dd9f54ede92ce9ce4a07?s=128&d=identicon&r=PG&f=1", "display_name": "Patricia Aydin", "link": "https://stackoverflow.com/users/3974016/patricia-aydin"}, "reply_to_user": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1423680362, "post_id": 28461998, "comment_id": 45249881, "body": "What would you like me to add?"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 2, "creation_date": 1423680508, "post_id": 28461998, "comment_id": 45249970, "body": "<a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> In particular, note <b>complete</b>. I&#39;d like to be able to take your code and throw it at a compiler and see your error appear myself. I also imagine that you could reduce the code causing this issue down to 100 lines or so."}, {"owner": {"reputation": 33, "user_id": 3974016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/585ae1968db3dd9f54ede92ce9ce4a07?s=128&d=identicon&r=PG&f=1", "display_name": "Patricia Aydin", "link": "https://stackoverflow.com/users/3974016/patricia-aydin"}, "reply_to_user": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1423681109, "post_id": 28461998, "comment_id": 45250343, "body": "I&#39;m a bit unsure about posting the entire code up on here.. code i privately show the code? Or is that not an option.."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 2, "creation_date": 1423681163, "post_id": 28461998, "comment_id": 45250387, "body": "You&#39;ll need to post the code directly into the question. If you are unwilling to do that, it&#39;s unlikely that anyone will be able to help you. We don&#39;t support the idea of people posting the code off-site, and generally speaking, people will then copy that code directly into your question for you if you did that."}, {"owner": {"reputation": 33, "user_id": 3974016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/585ae1968db3dd9f54ede92ce9ce4a07?s=128&d=identicon&r=PG&f=1", "display_name": "Patricia Aydin", "link": "https://stackoverflow.com/users/3974016/patricia-aydin"}, "reply_to_user": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1423681550, "post_id": 28461998, "comment_id": 45250594, "body": "Ok i&#39;ll add some extra code that might help."}, {"owner": {"reputation": 33, "user_id": 3974016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/585ae1968db3dd9f54ede92ce9ce4a07?s=128&d=identicon&r=PG&f=1", "display_name": "Patricia Aydin", "link": "https://stackoverflow.com/users/3974016/patricia-aydin"}, "reply_to_user": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1423681757, "post_id": 28461998, "comment_id": 45250722, "body": "I added quite a bit of code. I don&#39;t think any more is necessary and it&#39;s easily compilable."}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1423681969, "post_id": 28461998, "comment_id": 45250834, "body": "I think the point that previous commenters are making is that you need just enough code to reproduce your problem. Currently your code lacks of a <code>main</code> function so nobody can run your code to reproduce your problem."}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1423682008, "post_id": 28461998, "comment_id": 45250854, "body": "It is often the case that when you are trying to create this minimum working example, you&#39;ll discover your own problem."}], "answers": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 0, "last_activity_date": 1423682396, "creation_date": 1423682396, "answer_id": 28462689, "question_id": 28461998, "link": "https://stackoverflow.com/questions/28461998/char-array-in-a-struct-not-renewing/28462689#28462689", "title": "Char array in a struct - not renewing?", "body": "<p>I don't see any initialisation here. You're seeing whatever happened to be at that place in memory before, which for you, today, happens to be the previous contents of those data members.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 3974016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/585ae1968db3dd9f54ede92ce9ce4a07?s=128&d=identicon&r=PG&f=1", "display_name": "Patricia Aydin", "link": "https://stackoverflow.com/users/3974016/patricia-aydin"}, "edited": false, "score": 1, "creation_date": 1423683209, "post_id": 28462724, "comment_id": 45251610, "body": "Thanks alot man, i&#39;m really glad you made me do that (i actually did the same thing by just creating a new project in VS). Only difference was i had SDeviceRecordDetails sRecord = { &quot;&quot;, &quot;&quot; }; Essentially i think your way is the more &quot;correct&quot; way. Cant&#39; believe i didn&#39;t know that :(. I&#39;m glad I learnt something and I&#39;m glad I wasn&#39;t too scared to create a quick test for it! Thanks so much for all the effort! Definitely learnt my lesson about mcve and initializing a struct properly!"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "reply_to_user": {"reputation": 33, "user_id": 3974016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/585ae1968db3dd9f54ede92ce9ce4a07?s=128&d=identicon&r=PG&f=1", "display_name": "Patricia Aydin", "link": "https://stackoverflow.com/users/3974016/patricia-aydin"}, "edited": false, "score": 1, "creation_date": 1423683377, "post_id": 28462724, "comment_id": 45251722, "body": "No problem. I glossed over one other issue with the code which is that if your string was actually <code>MAX_HOSTNAME_BUFFER</code> or <code>MAX_ILA_BUFFER</code> length, then you won&#39;t have room for the null terminator of the string and then when you print it, you&#39;ll have undefined behavior because you should print non null terminated strings. <code>snprintf()</code> fixes this because it always null terminates the buffer that it writes to."}, {"owner": {"reputation": 33, "user_id": 3974016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/585ae1968db3dd9f54ede92ce9ce4a07?s=128&d=identicon&r=PG&f=1", "display_name": "Patricia Aydin", "link": "https://stackoverflow.com/users/3974016/patricia-aydin"}, "edited": false, "score": 0, "creation_date": 1423684151, "post_id": 28462724, "comment_id": 45252164, "body": "I usually use snprintf or snprintf_s if i can, but that&#39;s a very good point - thanks a lot you&#39;re a star!"}], "owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "is_accepted": true, "score": 2, "last_activity_date": 1423682820, "last_edit_date": 1423682820, "creation_date": 1423682513, "answer_id": 28462724, "question_id": 28461998, "link": "https://stackoverflow.com/questions/28461998/char-array-in-a-struct-not-renewing/28462724#28462724", "title": "Char array in a struct - not renewing?", "body": "<p>So. I appreciate that you tried to get closer to a better question. So I'm going to take some next steps with you.</p>\n\n<h3>What you posted wasn't really a mcve.</h3>\n\n<p>Here's a mcve for your problem:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdint&gt;\n#include &lt;map&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n\nnamespace Constants\n{\n    static const int64_t MAX_HOSTNAME_BUFFER              = 64;\n    static const int64_t MAX_ILA_BUFFER                   = 64;\n};\n\nstruct SDeviceRecordDetails\n{\n    char m_strHostname[Constants::MAX_HOSTNAME_BUFFER];\n    char m_strILA[Constants::MAX_ILA_BUFFER];\n};  \n\nbool GenerateDeviceCacheRecord(std::string strHostname, std::string strILA, SDeviceRecordDetails&amp; sRecord)\n{\n    // Convert strings to char arrays to store in the authentication cache manager records\n    if (strHostname.length() &gt; Constants::MAX_HOSTNAME_BUFFER)\n        return false;\n    if (strILA.length() &gt; Constants::MAX_ILA_BUFFER)\n        return false;\n\n    std::copy(strHostname.begin(), strHostname.end(), sRecord.m_strHostname);\n    std::copy(strILA.begin(), strILA.end(), sRecord.m_strILA);\n    return true;\n}\n\nstd::map&lt;std::string, std::string&gt; m_mDevices;\n\nint main() {\n    m_mDevices[\"hello\"] = \"foo\";\n    m_mDevices[\"buzz\"] = \"bear\";\n\n    for (std::map&lt;std::string, std::string&gt;::iterator iter = m_mDevices.begin(); iter != m_mDevices.end(); ++iter) {\n        SDeviceRecordDetails sRecord;\n        const bool result = GenerateDeviceCacheRecord(iter-&gt;first, iter-&gt;second, sRecord);\n\n        if (result == false)\n            std::cout &lt;&lt; \"Failed\\n\";\n        else\n            std::cout &lt;&lt; sRecord.m_strHostname &lt;&lt; \" \" &lt;&lt; sRecord.m_strILA &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>Things to note:</p>\n\n<ol>\n<li>I can take this as is (instead of two code blocks in your question) and throw it at a compiler.</li>\n<li>I included the proper <code>#include</code> lines.</li>\n<li>There were namespaces in your type names that weren't represented in your code.</li>\n<li><code>m_mDevicesAuthenticated</code> != <code>m_mDevices</code>.</li>\n<li>You didn't include anything that actually had any output.</li>\n<li>What is actually in <code>m_mDevices</code>? This is really important to include!</li>\n<li>Among other small corrections I had to apply to the code to get it to build.</li>\n</ol>\n\n<h3>What did this code do?</h3>\n\n<p>This code almost produces the <em>correct</em> output. It has an error, in that the strings that are written to <code>sRecord</code> are not null terminated.</p>\n\n<p>Because of how compilers generate code, and that you don't explicitly clear <code>sRecord</code> each loop, it's likely that this is the root cause of your problem.</p>\n\n<h3>Let's fix that:</h3>\n\n<p>Instead of:</p>\n\n<pre><code>std::copy(strHostname.begin(), strHostname.end(), sRecord.m_strHostname);\nstd::copy(strILA.begin(), strILA.end(), sRecord.m_strILA);\n</code></pre>\n\n<p>Let'd do:</p>\n\n<pre><code>snprintf(sRecord.m_strHostname, Constants::MAX_HOSTNAME_BUFFER, \"%s\", strHostname.c_str());\nsnprintf(sRecord.m_strILA, Constants::MAX_ILA_BUFFER, \"%s\", strILA.c_str());\n</code></pre>\n\n<h3>Or perhaps you are concerned about what <code>sRecord</code> starts each loop with:</h3>\n\n<p>In this case, <code>sRecord</code> is not initialized at the beginning of each loop. The compiler is free to have junk data in the struct for optimization purposes.</p>\n\n<p>It happens that most compilers will place each iteration of the struct in that exact same spot in memory. This means that the junk data in the struct could be the data from the previous iteration. Or some other junk depending on how the compiler optimizations function.</p>\n\n<p>You could fix this by initializing the struct to contain explicit data:</p>\n\n<pre><code>SDeviceRecordDetails sRecord = {};\n</code></pre>\n\n<h3>What does all of this look like:</h3>\n\n<p>The finished code, with all the bug fixes looks like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdint&gt;\n#include &lt;map&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n\nnamespace Constants\n{\n    static const int64_t MAX_HOSTNAME_BUFFER              = 64;\n    static const int64_t MAX_ILA_BUFFER                   = 64;\n};\n\nstruct SDeviceRecordDetails\n{\n    char m_strHostname[Constants::MAX_HOSTNAME_BUFFER];\n    char m_strILA[Constants::MAX_ILA_BUFFER];\n};  \n\nbool GenerateDeviceCacheRecord(std::string strHostname, std::string strILA, SDeviceRecordDetails&amp; sRecord)\n{\n    // Convert strings to char arrays to store in the authentication cache manager records\n    if (strHostname.length() &gt; Constants::MAX_HOSTNAME_BUFFER)\n        return false;\n    if (strILA.length() &gt; Constants::MAX_ILA_BUFFER)\n        return false;\n\n    snprintf(sRecord.m_strHostname, Constants::MAX_HOSTNAME_BUFFER, \"%s\", strHostname.c_str());\n    snprintf(sRecord.m_strILA, Constants::MAX_ILA_BUFFER, \"%s\", strILA.c_str());\n    return true;\n}\n\nstd::map&lt;std::string, std::string&gt; m_mDevices;\n\nint main() {\n    m_mDevices[\"hello\"] = \"foo\";\n    m_mDevices[\"buzz\"] = \"bear\";\n    m_mDevices[\"zed\"] = \"zoo\";\n\n    for (std::map&lt;std::string, std::string&gt;::iterator iter = m_mDevices.begin(); iter != m_mDevices.end(); ++iter) {\n        SDeviceRecordDetails sRecord = {};\n        const bool result = GenerateDeviceCacheRecord(iter-&gt;first, iter-&gt;second, sRecord);\n\n        if (result == false)\n            std::cout &lt;&lt; \"Failed\\n\";\n        else\n            std::cout &lt;&lt; sRecord.m_strHostname &lt;&lt; \" \" &lt;&lt; sRecord.m_strILA &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>And outputs:</p>\n\n<pre><code>buzz bear\nhello foo\nzed zoo\n</code></pre>\n\n<p>Which looks correct to my eyes.</p>\n"}], "owner": {"reputation": 33, "user_id": 3974016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/585ae1968db3dd9f54ede92ce9ce4a07?s=128&d=identicon&r=PG&f=1", "display_name": "Patricia Aydin", "link": "https://stackoverflow.com/users/3974016/patricia-aydin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 28462724, "answer_count": 2, "score": 0, "last_activity_date": 1423682820, "creation_date": 1423680182, "last_edit_date": 1423681717, "question_id": 28461998, "link": "https://stackoverflow.com/questions/28461998/char-array-in-a-struct-not-renewing", "title": "Char array in a struct - not renewing?", "body": "<p>I have a for-loop and i'm creating a new instance of a struct on the stack each time. This struct just contains 2 variables - 2 char arrays of 64 bytes.</p>\n\n<p>The code is below:</p>\n\n<pre><code>        for (std::map&lt;std::string, std::string&gt;::iterator iter = m_mDevices.begin(); iter != m_mDevices.end(); ++iter)\n        {\n            Structs::SDeviceDetails sRecord;\n            if (false == GenerateDeviceCacheRecord(iter-&gt;first, iter-&gt;second, sRecord)) // could just pass iter in?\n            {\n                // Failed to create cache record\n                return false;\n            }   \n        }\n</code></pre>\n\n<p>The really strange thing i am seeing in the debugger, is everytime i loop round, i am seeing the same value in sRecord's buffers. i.e. sRecord.m_strUsername and sRecord.m_strPassword is getting \"written over\" as opposed to being a newly created struct.</p>\n\n<p>If sRecord.m_strUsername was \"abc\" on the first loop round, then after the GenerateDeviceCacheRecord function (which just modifies sRecord), sRecord.m_strUsername might be \"HIc\", where c is the character off the first loop! I'm obviously expecting \"abc\" and \"HI\", not \"abc\" and \"HIc\". Does anyone know what might be going on here?</p>\n\n<p>Thanks</p>\n\n<p>Extra code:</p>\n\n<pre><code>namespace Constants\n{\n    static const int64 MAX_HOSTNAME_BUFFER              = 64;\n    static const int64 MAX_ILA_BUFFER                   = 64;\n};\n\n    struct SDeviceRecordDetails\n    {\n        char        m_strHostname[Constants::MAX_HOSTNAME_BUFFER];\n        char        m_strILA[Constants::MAX_ILA_BUFFER];\n    };  \n\nbool GenerateDeviceCacheRecord(std::string strHostname, std::string strILA, Structs::SDeviceRecordDetails&amp; sRecord)\n{\n    // Convert strings to char arrays to store in the authentication cache manager records\n    if (strHostname.length() &gt; Constants::MAX_HOSTNAME_BUFFER)\n        return false;\n    if (strILA.length() &gt; Constants::MAX_ILA_BUFFER)\n        return false;\n\n    std::copy(strHostname.begin(), strHostname.end(), sRecord.m_strHostname);\n    std::copy(strILA.begin(), strILA.end(), sRecord.m_strILA);\n    return true;\n}\n\n    //! @brief Devices retrieved from XML file\n    std::map&lt;std::string, std::string&gt; m_mDevicesAuthenticated;\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt-creator", "readfile", "getline"], "comments": [{"owner": {"reputation": 8289, "user_id": 2013738, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e411bdd253abc6ef58624ff72fd2b369?s=128&d=identicon&r=PG", "display_name": "Simon Warta", "link": "https://stackoverflow.com/users/2013738/simon-warta"}, "edited": false, "score": 1, "creation_date": 1423680969, "post_id": 28461967, "comment_id": 45250256, "body": "Could you change the line to the following and try again? <code>cout &lt;&lt; &quot;Trying to close&quot; &lt;&lt; endl;</code> The text might be written but not be flushed."}, {"owner": {"reputation": 16742, "user_id": 999943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4c3b5820f4f39c2bbe57a8823dd0ad?s=128&d=identicon&r=PG", "display_name": "phyatt", "link": "https://stackoverflow.com/users/999943/phyatt"}, "edited": false, "score": 1, "creation_date": 1423682128, "post_id": 28461967, "comment_id": 45250927, "body": "Also Qt Creator can be configured to use the same compiler as Visual Studio, so the behavior of the code may just be a difference between MingW and MSVC&#39;s implementation of <code>cout</code> with <code>flush</code>.  Also I would switch to using <code>qDebug()</code> instead of <code>cout</code>.  It adds spaces and endlines for you automatically."}, {"owner": {"reputation": 23728, "user_id": 299399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1907f4968c4c5b5fedb8f7cba422a032?s=128&d=identicon&r=PG", "display_name": "Frank Osterfeld", "link": "https://stackoverflow.com/users/299399/frank-osterfeld"}, "edited": false, "score": 0, "creation_date": 1423687107, "post_id": 28461967, "comment_id": 45253732, "body": "qDebug() is for printing debug output (and might not happen at all in release builds), not for output you rely on. So it&#39;s not a good replacement for std::cout, in general."}, {"owner": {"reputation": 759, "user_id": 4524862, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DwQeLaM9ZoM/AAAAAAAAAAI/AAAAAAAAAk8/H54y0WxDtZw/photo.jpg?sz=128", "display_name": "ftynse", "link": "https://stackoverflow.com/users/4524862/ftynse"}, "edited": false, "score": 0, "creation_date": 1423690899, "post_id": 28461967, "comment_id": 45255766, "body": "Do you have more code in your <code>main</code> function?  Qt Widgets application normally starts an event processing loop, which is infinite, using something like <code>app.exec();</code>."}, {"owner": {"reputation": 1, "user_id": 3365092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c58991e63596fbb4861c09d8026005ab?s=128&d=identicon&r=PG&f=1", "display_name": "TheElk", "link": "https://stackoverflow.com/users/3365092/theelk"}, "reply_to_user": {"reputation": 8289, "user_id": 2013738, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e411bdd253abc6ef58624ff72fd2b369?s=128&d=identicon&r=PG", "display_name": "Simon Warta", "link": "https://stackoverflow.com/users/2013738/simon-warta"}, "edited": false, "score": 0, "creation_date": 1424072390, "post_id": 28461967, "comment_id": 45387257, "body": "This code is called within its own function. @SimonWarta: thank you, this solved the problem!"}], "owner": {"reputation": 1, "user_id": 3365092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c58991e63596fbb4861c09d8026005ab?s=128&d=identicon&r=PG&f=1", "display_name": "TheElk", "link": "https://stackoverflow.com/users/3365092/theelk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460561423, "creation_date": 1423680120, "last_edit_date": 1460561423, "question_id": 28461967, "link": "https://stackoverflow.com/questions/28461967/reading-file-with-qt-creator-does-not-terminate", "title": "Reading File With Qt Creator does not terminate", "body": "<p>I have the following simple Code:</p>\n\n<pre><code>ifstream f; \nstring line;\nf.open(\"path\", ios::in); \nwhile (getline(f, line))\n{\n    cout &lt;&lt; line &lt;&lt; endl;\n}\ncout &lt;&lt; \"Trying to close\\n\";\nf.close();  \n</code></pre>\n\n<p>This code runs fine in Visual Studio 2012 but when I try to execute it in Qt Creator, the whole file is read but then it just stops, which means \"Trying to close\" is not printed. The while loop only exits when I close the program, then \"Trying to close\" is displayed.</p>\n\n<p>Can anyone tell me what is wrong with my simple code, or is this some speciality of Qt Creator which I'm not aware of?</p>\n"}, {"tags": ["c++", "class", "data-members"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1423680429, "post_id": 28461943, "comment_id": 45249919, "body": "Yes, <code>static</code> member variables are possible, and they are accessible without an object instance.  Why you would want them is a pretty broad topic though."}], "answers": [{"owner": {"reputation": 32156, "user_id": 783510, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/fgbAM.png?s=128&g=1", "display_name": "Philipp Cla&#223;en", "link": "https://stackoverflow.com/users/783510/philipp-cla%c3%9fen"}, "is_accepted": false, "score": 0, "last_activity_date": 1423680455, "creation_date": 1423680455, "answer_id": 28462081, "question_id": 28461943, "link": "https://stackoverflow.com/questions/28461943/why-when-would-i-want-to-use-a-class-data-member-without-defining-an-object-of-t/28462081#28462081", "title": "Why/When would I want to use a class data member without defining an object of the class?", "body": "<p>It is similar to a global variable, only that it is not defined at the global namespace.</p>\n\n<p>You find it in C++ code that was written before namespaces were introduced, or in template meta programming were it is more useful.</p>\n\n<p>In general, I would not recommend to use it as in your example and would prefer to avoid global state as much as possible. Otherwise, you end up with code that is difficult to test.</p>\n"}, {"comments": [{"owner": {"reputation": 1660, "user_id": 3551661, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dbde0d2418bd6946dbc397411975ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "A_Matar", "link": "https://stackoverflow.com/users/3551661/a-matar"}, "edited": false, "score": 0, "creation_date": 1423680985, "post_id": 28462119, "comment_id": 45250265, "body": "useful, but still &quot;why would someone want to use a data member of a class without defining an object of that class and how is such thing done?&quot;"}, {"owner": {"reputation": 10586, "user_id": 170383, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4d9f7a30948dca1bbd05eaf27f277ae6?s=128&d=identicon&r=PG", "display_name": "David R Tribble", "link": "https://stackoverflow.com/users/170383/david-r-tribble"}, "reply_to_user": {"reputation": 1660, "user_id": 3551661, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dbde0d2418bd6946dbc397411975ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "A_Matar", "link": "https://stackoverflow.com/users/3551661/a-matar"}, "edited": false, "score": 0, "creation_date": 1423681326, "post_id": 28462119, "comment_id": 45250480, "body": "Because the class member might be of some other type, and be used for a purpose different from (but related to) objects of the class type itself."}], "owner": {"reputation": 10586, "user_id": 170383, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4d9f7a30948dca1bbd05eaf27f277ae6?s=128&d=identicon&r=PG", "display_name": "David R Tribble", "link": "https://stackoverflow.com/users/170383/david-r-tribble"}, "is_accepted": false, "score": 2, "last_activity_date": 1425335312, "last_edit_date": 1425335312, "creation_date": 1423680571, "answer_id": 28462119, "question_id": 28461943, "link": "https://stackoverflow.com/questions/28461943/why-when-would-i-want-to-use-a-class-data-member-without-defining-an-object-of-t/28462119#28462119", "title": "Why/When would I want to use a class data member without defining an object of the class?", "body": "<p>Declaring a class member variable as <code>static</code> essentially makes it a singleton object that is shared by all of the instances of that class. This is useful for things like counters, semaphores and locks, and other  types of data that need to be shared by the other class members.</p>\n\n<p>Declaring it <code>public</code> makes it accessible to all users of that class. It's generally a bad idea to allow class variables to be modifiable by functions outside the class, though.</p>\n\n<p>Declaring it <code>const</code>, on the other hand, is the usual way to provide publicly readable constants for the class.</p>\n\n<p><strong>Example</strong></p>\n\n<p>Your library class:</p>\n\n<pre><code>class Foo\n{\npublic:\n    // Version number of this code\n    static const int    VERSION = 1;\n\nprivate:\n    // Counts the number of active Foo objects\n    static int          counter = 0;\n\npublic:\n    // Constructor\n    Foo()\n    {\n        counter++;     // Bump the instance counter\n        ...\n    }\n\n    // Destructor\n    ~Foo()\n    {\n        counter--;     // Adjust the counter\n        ...\n    }\n};\n</code></pre>\n\n<p>Some client of your library:</p>\n\n<pre><code>class Bar\n{\npublic:\n    // Constructor\n    Bar()\n    {\n        // Check the Foo library version\n        if (Foo::VERSION &gt; 1)\n            std::cerr &lt;&lt; \"Wrong version of class Foo, need version 1\";\n        ...\n    }\n};\n</code></pre>\n\n<p>In this example, <code>VERSION</code> is a static constant of the class, which in this case informs the outside world what version of the code is contained in the class. It's accessed by the syntax <code>Foo::VERSION</code>.</p>\n\n<p>The static <code>counter</code> variable, on the other hand, is private to the class, so only member functions of <code>Foo</code> can access it. In this case, it's being used as a counter for the number of active <code>Foo</code> objects.</p>\n"}, {"owner": {"reputation": 2931, "user_id": 2505186, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DV6Bx.jpg?s=128&g=1", "display_name": "Tobias Knauss", "link": "https://stackoverflow.com/users/2505186/tobias-knauss"}, "is_accepted": false, "score": 1, "last_activity_date": 1423680582, "creation_date": 1423680582, "answer_id": 28462127, "question_id": 28461943, "link": "https://stackoverflow.com/questions/28461943/why-when-would-i-want-to-use-a-class-data-member-without-defining-an-object-of-t/28462127#28462127", "title": "Why/When would I want to use a class data member without defining an object of the class?", "body": "<p>I am not familiar with the c++ syntax for statics at the moment. But in c++-cli (.net, Visual C++) the <code>::</code> is correct.<br>\nFor the purpose of statics:<br>\nThere are many cases where it makes sense to use them. In general, when you want to store information that belong to the class itself (meaning to all objects of the class) and not to a single object/instance. </p>\n"}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "is_accepted": false, "score": 1, "last_activity_date": 1423681285, "creation_date": 1423681285, "answer_id": 28462364, "question_id": 28461943, "link": "https://stackoverflow.com/questions/28461943/why-when-would-i-want-to-use-a-class-data-member-without-defining-an-object-of-t/28462364#28462364", "title": "Why/When would I want to use a class data member without defining an object of the class?", "body": "<p>Even though not originally invented for this purpose, <code>static</code> <code>constexpr</code> data members of <code>structs</code> are a backbone of template meta-programming.  Just check out the <a href=\"http://en.cppreference.com/w/cpp/types/numeric_limits\" rel=\"nofollow\"><code>limits</code></a> standard library header as a simple example.</p>\n\n<p>For example, we can define a wrapper around the builtin <code>sizeof</code> operator.  While rather useless in itself, it hopefully gives the right idea.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt;\nstruct Calipers\n{\n  static constexpr auto size = sizeof(T);\n};\n\nint\nmain()\n{\n  std::cout &lt;&lt; \"short:   \" &lt;&lt; Calipers&lt;short&gt;::size   &lt;&lt; \"\\n\";\n  std::cout &lt;&lt; \"int:     \" &lt;&lt; Calipers&lt;int&gt;::size     &lt;&lt; \"\\n\";\n  std::cout &lt;&lt; \"long:    \" &lt;&lt; Calipers&lt;long&gt;::size    &lt;&lt; \"\\n\";\n  std::cout &lt;&lt; \"float:   \" &lt;&lt; Calipers&lt;float&gt;::size   &lt;&lt; \"\\n\";\n  std::cout &lt;&lt; \"double:  \" &lt;&lt; Calipers&lt;double&gt;::size  &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Possible output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>short:   2\nint:     4\nlong:    8\nfloat:   4\ndouble:  8\n</code></pre>\n"}, {"owner": {"reputation": 1228, "user_id": 995959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXPWG.png?s=128&g=1", "display_name": "gibertoni", "link": "https://stackoverflow.com/users/995959/gibertoni"}, "is_accepted": true, "score": 1, "last_activity_date": 1423681736, "creation_date": 1423681736, "answer_id": 28462483, "question_id": 28461943, "link": "https://stackoverflow.com/questions/28461943/why-when-would-i-want-to-use-a-class-data-member-without-defining-an-object-of-t/28462483#28462483", "title": "Why/When would I want to use a class data member without defining an object of the class?", "body": "<p>As cited before, static member variables work as 'global' variables, but within the class namespace.\nSo it is useful for counters or shared resources between objects.</p>\n\n<p>In the case of 'public static' modifier, it is easy to see its use within libraries to provide access to constants and general-purpose functionality (static methods).</p>\n\n<p>For example, an input library might have:</p>\n\n<pre><code>class KeyEvent\n{\n    public:\n      static const int KEY_DOWN = 111;\n      static const int KEY_UP = 112;\n      ...\n}\n\n//And then in your code\n#include &lt;KeyEvent&gt;\n\nvoid poolEvent(Key *key)\n{\n    if(key-&gt;type() == KeyEvent::KEY_DOWN)\n      ...\n}\n</code></pre>\n"}], "owner": {"reputation": 1660, "user_id": 3551661, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dbde0d2418bd6946dbc397411975ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "A_Matar", "link": "https://stackoverflow.com/users/3551661/a-matar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 28462483, "answer_count": 5, "score": 1, "last_activity_date": 1425335312, "creation_date": 1423680024, "question_id": 28461943, "link": "https://stackoverflow.com/questions/28461943/why-when-would-i-want-to-use-a-class-data-member-without-defining-an-object-of-t", "title": "Why/When would I want to use a class data member without defining an object of the class?", "body": "<p>It is possible in C++ to use a data member of a class without defining an object of that class, by defining that data member in the public section as a <code>static</code> variable, as in the code sample below. The question is, why/when would I want to do this? and how can I do it?</p>\n\n<pre><code>class ttime{\npublic:\n    ttime(int h=0, int m=0, int s=0):hour(h), minute(m), second(s){}   //constructor with default intialization\n    int&amp; warning(){return hour;}\n    void display()const{cout&lt;&lt;hour&lt;&lt;\"\\t\";}\n    static int hello; \n    ~ttime(){}\n\nprivate:\n    int hour;\n    int minute;\n    int second;\n};\n\n\nmain()\n{\n    ttime:: hello=11310; //Is this the way to use hello without creating an object of the class?\n    cout &lt;&lt; ttime:: hello;\n\n    ttime hi(9); \n    hi.display();\n    hi.warning()++;//the user is able to modify your class's private data, which is really bad! You should not be doing this!\n    hi.display();\n}\n</code></pre>\n"}, {"tags": ["c++", "filter", "real-time", "spike"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1423694754, "post_id": 28461571, "comment_id": 45257709, "body": "Research &quot;exponential filter c++&quot;.  We are using a kind of exponential filter for filtering voltage spikes."}], "answers": [{"owner": {"reputation": 487, "user_id": 2766387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b93034102fea1e1d793b2fef66e69b?s=128&d=identicon&r=PG", "display_name": "Oleg Mazurov", "link": "https://stackoverflow.com/users/2766387/oleg-mazurov"}, "is_accepted": false, "score": 0, "last_activity_date": 1423680732, "creation_date": 1423680732, "answer_id": 28462176, "question_id": 28461571, "link": "https://stackoverflow.com/questions/28461571/spike-filtering-in-real-time-c/28462176#28462176", "title": "Spike Filtering in Real time C++", "body": "<p>If your torque isn't changing very fast the easiest way to filter spikes is so-called \"slew rate limiter\". The operation is trivial and can easily be implemented in any language. You need to store last good value. When you get a reading compare it with the last and if it's larger then increment last one, if it's smaller then decrement the last one.</p>\n"}], "owner": {"reputation": 21, "user_id": 4556083, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FiCaUpRzX9k/AAAAAAAAAAI/AAAAAAAAAL0/E00FG5NNwGQ/photo.jpg?sz=128", "display_name": "Saadia Razvi", "link": "https://stackoverflow.com/users/4556083/saadia-razvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 536, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1423680732, "creation_date": 1423678872, "question_id": 28461571, "link": "https://stackoverflow.com/questions/28461571/spike-filtering-in-real-time-c", "title": "Spike Filtering in Real time C++", "body": "<p>I'm trying to implement a spike filter on some torque that I'm reading in from an SEA in real time. As of now, we're using a moving average to replace the spike values that cross a certain threshold. (We're getting spikes b/c the actuator sometimes messes up and gives a sudden spike). </p>\n\n<p>I am trying to figure out a better, more accurate way to filter the spikes, so that it more accurately predicts what the torque would have been instead of the spike. </p>\n\n<p>BTW, this is a c++ program.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 3, "creation_date": 1423678881, "post_id": 28461548, "comment_id": 45249009, "body": "First, no need for <code>new</code> and <code>delete</code>; use a <code>std::vector</code> or something. Second, no need to reinvent the wheel; use <code>std::minmax_element</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1423679094, "post_id": 28461548, "comment_id": 45249127, "body": "You need to be comparing against your min and max variables not against the next value in the array."}, {"owner": {"reputation": 3, "user_id": 4556021, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d91b82b43ebeb5282097e212b913965?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/4556021/john"}, "edited": false, "score": 0, "creation_date": 1423679357, "post_id": 28461548, "comment_id": 45249275, "body": "Thank you for your repond  Chris, well, I would write it differently, if I was allowed but this is an assignment and I have to create dynamic array, use pointer to loop (not allowed to index) and at the end of the run my pointers should point to max and min."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1423679558, "post_id": 28461548, "comment_id": 45249383, "body": "@john: It is almost always wrong to use a dynamic array like this. Whoever gave you this assignment teaches a very questionable kind of C++, unless the purpose is to teach you the horrors and uselessness of manual memory management with <code>new[]</code> and <code>delete[]</code> :)"}, {"owner": {"reputation": 311858, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1423679686, "post_id": 28461548, "comment_id": 45249452, "body": "@ChristianHackl I think you&#39;re overstating the case here, there&#39;s plenty of valid reasons to use <code>new[]</code>"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 311858, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1423679795, "post_id": 28461548, "comment_id": 45249519, "body": "@Alnitak: Such as? I cannot think of any reason not to use <code>std::vector</code>, <code>std::array</code> or, in a few cases, static raw arrays. <code>new[]</code> is pretty much a broken feature of C++ (it&#39;s not even used inside <code>std::vector</code> implementations)."}], "answers": [{"comments": [{"owner": {"reputation": 311858, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1423679721, "post_id": 28461786, "comment_id": 45249473, "body": "two separate answers?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 311858, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1423680151, "post_id": 28461786, "comment_id": 45249767, "body": "@Alnitak has issue with internet, that was not intentional"}], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1423679869, "last_edit_date": 1423679869, "creation_date": 1423679550, "answer_id": 28461786, "question_id": 28461548, "link": "https://stackoverflow.com/questions/28461548/program-finds-the-max-and-min-correctly-at-first-run-but-if-i-run-it-again-it/28461786#28461786", "title": "Program finds the max and min correctly at first run, but if I run it again, it would give me wrong answer", "body": "<p>Your conditions are wrong (all three of them), you should compare value pointed by <code>counter</code> (pretty bad name btw) to max and min:</p>\n\n<pre><code>for (int *counter = pRnd + 1; counter &lt; (pRnd + ArraySize); counter++) {\n\n    if (*counter&gt; *pMax )\n        pMax = counter;\n\n    if (*counter &lt; *pMin )\n        pMin = counter;\n }\n</code></pre>\n\n<p>You can still have int <code>counter = pRnd</code> but you will do one additional comparison that is not necessary, as <code>pMax</code> and <code>pMin</code> already point to the first element.</p>\n"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 0, "last_activity_date": 1423679645, "creation_date": 1423679645, "answer_id": 28461822, "question_id": 28461548, "link": "https://stackoverflow.com/questions/28461548/program-finds-the-max-and-min-correctly-at-first-run-but-if-i-run-it-again-it/28461822#28461822", "title": "Program finds the max and min correctly at first run, but if I run it again, it would give me wrong answer", "body": "<p>The logic used to track the max and min values is not right. </p>\n\n<pre><code>    if (*counter&gt; *(counter + 1))\n</code></pre>\n\n<p>doesn't tell you whether <code>*counter</code> is greater than the previous max value. Same problem with the line</p>\n\n<pre><code>    if (*counter&lt; *(counter + 1))\n</code></pre>\n\n<p>It doesn't tell you whether <code>*counter</code> is less than the previous min value.</p>\n\n<p>Assuming <code>pMaxElementValue</code> and <code>pMinElementValue</code> are values, not pointers, the core logic can be simplified to:</p>\n\n<pre><code>pMaxElementValue = *pRnd;\npMinElementValue = *pRnd;\n\nfor (int *counter = pRnd; counter &lt; (pRnd + ArraySize); counter++)\n{\n   if (*counter&gt; pMaxElementValue )\n      pMaxElementValue = *counter;\n\n   if (*counter &lt; pMinElementValue)\n      pMinElementValue = *counter;\n}\n</code></pre>\n\n<p>If you want to use pointers for the elements containing max and min, you need to use:</p>\n\n<pre><code>pMax = pRnd;\npMin = pRnd;\n\nfor (int *counter = pRnd; counter &lt; (pRnd + ArraySize); counter++)\n{\n   if (*counter&gt; *pMax )\n      pMax = counter;\n\n   if (*counter &lt; *pMin)\n      pMin = counter;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4556021, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d91b82b43ebeb5282097e212b913965?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/4556021/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 28461822, "answer_count": 2, "score": 0, "last_activity_date": 1423679869, "creation_date": 1423678775, "last_edit_date": 1423678992, "question_id": 28461548, "link": "https://stackoverflow.com/questions/28461548/program-finds-the-max-and-min-correctly-at-first-run-but-if-i-run-it-again-it", "title": "Program finds the max and min correctly at first run, but if I run it again, it would give me wrong answer", "body": "<p>I can not figure out where the problem is: When I run the program first time, everything is ok but after that always wrong answer. I am guessing it maybe some kind of memory leak, but I can not figure it out. </p>\n\n<pre><code>//user has already defined ArraySize;\n\nint *pRnd= new signed int[ArraySize];\n\nint *pMin; \n\nint *pMax;\n\npMin = &amp;pRnd[0];\n\npMax = &amp;pRnd[0];\n\n//pRnd is already filled with random numbers.\n\nfor (int *counter = pRnd; counter &lt; (pRnd + ArraySize); counter++){\n\n    if (counter != (pRnd + (ArraySize-1)))\n    {\n\n        if (*counter&gt; *(counter + 1))\n            pMaxElementValue = counter;\n\n        if (*counter &lt; *(counter + 1))\n            pMinElementValue = counter;\n    }\n\n}\n\n\ncout &lt;&lt; setw(5) &lt;&lt; \"Max array element:\" &lt;&lt; setw(20) &lt;&lt; *pMax &lt;&lt; endl;\ncout &lt;&lt; setw(5) &lt;&lt; \"Min array element:\" &lt;&lt; setw(20) &lt;&lt; *pMin &lt;&lt; endl;\n\ndelete []pRnd; // clear the memory\n</code></pre>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 2200, "user_id": 1519323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zUWVH.png?s=128&g=1", "display_name": "davepmiller", "link": "https://stackoverflow.com/users/1519323/davepmiller"}, "edited": false, "score": 3, "creation_date": 1423678964, "post_id": 28461537, "comment_id": 45249055, "body": "Are you familiar with std::string?"}, {"owner": {"reputation": 7490, "user_id": 4417613, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/leKlt.jpg?s=128&g=1", "display_name": "m0bi5", "link": "https://stackoverflow.com/users/4417613/m0bi5"}, "edited": false, "score": 0, "creation_date": 1423679087, "post_id": 28461537, "comment_id": 45249121, "body": "by two vocals u mean vowels right?"}, {"owner": {"reputation": 199, "user_id": 4389543, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1351846580/picture?type=large", "display_name": "Costi Ivan", "link": "https://stackoverflow.com/users/4389543/costi-ivan"}, "edited": false, "score": 0, "creation_date": 1423679169, "post_id": 28461537, "comment_id": 45249162, "body": "@lazer_wizard not really"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1423679271, "post_id": 28461537, "comment_id": 45249222, "body": "Add an example output to show that it&#39;s wrong?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1423679672, "post_id": 28461537, "comment_id": 45249446, "body": "and what did the debugger show was happening"}], "answers": [{"owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "is_accepted": false, "score": 3, "last_activity_date": 1423679917, "creation_date": 1423679917, "answer_id": 28461909, "question_id": 28461537, "link": "https://stackoverflow.com/questions/28461537/duplicate-vowels-in-a-string/28461909#28461909", "title": "Duplicate vowels in a string", "body": "<p>You are using <code>strcpy</code> wrong here.</p>\n\n<p>The method is not safe to use on overlapping buffers.  You're writing to memory before you read it, causing weird behavior.</p>\n\n<p>You need to either use <code>memmove</code>, write your own loop to copy the characters, or use two different character buffers for input and result instead of just p.</p>\n"}, {"owner": {"reputation": 1066, "user_id": 1628038, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1eee0c4c8933f5bcaa46b81ea1abd94c?s=128&d=identicon&r=PG", "display_name": "LeeNeverGup", "link": "https://stackoverflow.com/users/1628038/leenevergup"}, "is_accepted": false, "score": 0, "last_activity_date": 1423679992, "creation_date": 1423679992, "answer_id": 28461933, "question_id": 28461537, "link": "https://stackoverflow.com/questions/28461537/duplicate-vowels-in-a-string/28461933#28461933", "title": "Duplicate vowels in a string", "body": "<p>Your problem is with <code>strcpy</code>. It copies values onr by one, so after <code>p[i]</code> is copied into <code>p[i+1]</code>, the new value of <code>p[i+1]</code> is copied into <code>p[i+2]</code>, and so on. So the string will then contain only the <code>p[i]</code>.</p>\n\n<p>You may want to use another array for destination string, and copy one character each time. This will also avoid many <code>strcpy</code> calls, hence save time.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\nusing namespace std;\n\nint main()\n{\n    char p[100] = {0};\n    char dest[200] = {0};\n    cin.get(p, 100);\n    int i = 0, j = 0;\n    while(p[i]){\n        if (strchr(\"aeiou\",p[i])) {\n            dest[j++] = p[i];\n        }\n        dest[j++] = p[i++];\n    }\n    cout &lt;&lt; dest;\n    return 0;\n}\n</code></pre>\n"}, {"owner": {"reputation": 201, "user_id": 4548299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ulKeb.png?s=128&g=1", "display_name": "Philip Wardlaw", "link": "https://stackoverflow.com/users/4548299/philip-wardlaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1423684906, "creation_date": 1423684906, "answer_id": 28463402, "question_id": 28461537, "link": "https://stackoverflow.com/questions/28461537/duplicate-vowels-in-a-string/28463402#28463402", "title": "Duplicate vowels in a string", "body": "<p>I would recommend that you take advantage of C++ std objects, your code looks more C. std::string provides access and modification methods which are easier to use than c arrays, same for std::vectors.</p>\n\n<p>A quick example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nstd::string editStr = \"qweertadoi\";\nstd::vector&lt;char&gt; vowels{'i', 'o', 'u', 'e', 'a'};\n\nint main() {\n\n    for(unsigned int i = 0; i&lt;editStr.size(); i++){\n        for(char c: vowels){\n            if(editStr.at(i) == c){\n                editStr.insert(i++,1, c);\n                break;\n            }\n        }\n    }\n\n    std::cout &lt;&lt; editStr &lt;&lt; std::endl; \n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 4389543, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1351846580/picture?type=large", "display_name": "Costi Ivan", "link": "https://stackoverflow.com/users/4389543/costi-ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1423684906, "creation_date": 1423678752, "last_edit_date": 1423679177, "question_id": 28461537, "link": "https://stackoverflow.com/questions/28461537/duplicate-vowels-in-a-string", "title": "Duplicate vowels in a string", "body": "<p>I have a string of 100 elements and I have to duplicate every vowel whenever I find one and add it to the next position in the string . The problem is if there are two vowels on two consecutive position in the string it won't work.</p>\n\n<p>This is what I've tried :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\nusing namespace std;\n\nint main()\n{\n    char p[200];\n    int i=0,n;\n    cin.get(p,200);\n    while(i&lt;strlen(p)){\n        if(strchr(\"aeiou\",p[i])) {\n            strcpy(p+i+2,p+i+1);\n            p[i+1]=p[i];\n            i=i+2;\n\n        }\n        else i++;\n    }\n    cout&lt;&lt;p;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "enums", "googletest"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1423679104, "post_id": 28461516, "comment_id": 45249131, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1-\u1fe5\u03b5\u1fd6 How is that a duplicate? Can you explain the logic I don&#39;t see it."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1423679107, "post_id": 28461516, "comment_id": 45249133, "body": "<i>@OP</i> You&#39;re actually hitting undefined behavior when doing <code>return temp.c_str(); </code>. That&#39;s why the little kittens meow."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1423679174, "post_id": 28461516, "comment_id": 45249167, "body": "@ShafikYaghmour I&#39;ve just added a comment for the OP."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1423679180, "post_id": 28461516, "comment_id": 45249170, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 The bahavior of static_cast on an out of range enum is unspecified, there may be other issues but that is the issue the OP is asking about"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1423679222, "post_id": 28461516, "comment_id": 45249192, "body": "@ShafikYaghmour Yup, even more UB."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1423679234, "post_id": 28461516, "comment_id": 45249198, "body": "IT is not UB is is unspecified"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1423679353, "post_id": 28461516, "comment_id": 45249268, "body": "@ShafikYaghmour OK, but anyway the <code>ASSERT_EQ(&quot;Unknown value: -1&quot;, printSomething(-1));</code> can&#39;t pass reliably, because of the UB in the <code>printSomething()</code> function."}, {"owner": {"reputation": 3183, "user_id": 3025453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecaade2979d70e6fa61d1f8bca6f27e1?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Karcher", "link": "https://stackoverflow.com/users/3025453/michael-karcher"}, "edited": false, "score": 0, "creation_date": 1423686893, "post_id": 28461516, "comment_id": 45253631, "body": "You are completely right that this example exhibits undefined behaviour, as it uses a pointer to memory formerly owned by a destructed local object. Nevertheless, this example has a high likelyhood to &quot;accidentally work&quot;, if the string comparison in Google Test was not messed up. <code>ASSERT_EQ</code> compares pointers, so it would even fail if the buffer were still life. To compare ASCII strings represented by pointers to the first character, you need to use <code>ASSERT_STREQ</code>"}], "owner": {"reputation": 1, "user_id": 2767801, "user_type": "registered", "profile_image": "https://graph.facebook.com/1761792095/picture?type=large", "display_name": "Jethro Juego Zaldua", "link": "https://stackoverflow.com/users/2767801/jethro-juego-zaldua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "closed_date": 1423679017, "answer_count": 0, "score": 0, "last_activity_date": 1423678817, "creation_date": 1423678688, "last_edit_date": 1423678817, "question_id": 28461516, "link": "https://stackoverflow.com/questions/28461516/c-enum-as-argument", "closed_reason": "Duplicate", "title": "c++ enum as argument", "body": "<p>Help this is my first time asking so please be gentle to me</p>\n\n<p>Lets say I have an enum</p>\n\n<pre><code>typedef enum Fruits  \n{  \n    Apple = 1,  \n    Banana,  \n    Cat  \n};\n</code></pre>\n\n<p>and has a function</p>\n\n<pre><code>const char* printSomething(const Fruits myFruityFruit)  \n{  \n    switch (myFruityFruit)  \n    {  \n        case Apple:\n            return \"This is Apple!\";  \n        case Banana:  \n            return \"This is Banana!\";  \n        case Cat:  \n            return \"This is Cat ... ?\";  \n        default:  \n            std::stringstream ss;  \n            ss &lt;&lt; \"Unknown value: \" &lt;&lt; myFruityFruit;  \n            auto temp = ss.str();\n            return temp.c_str(); \n    }  \n}\n</code></pre>\n\n<p>and a test case that looks like this</p>\n\n<pre><code>TEST(myTest, myFruityTest)  \n{  \n    ASSERT_EQ(\"This is Apple!\", printSomething(Apple));  \n    ASSERT_EQ(\"This is Banana!\", printSomething(Banana));  \n    ASSERT_EQ(\"This is Cat ... ?\", printSomething(Cat));  \n    Fruits unknownFruit = static_cast&lt;Fruits&gt;(-1);  \n    std::stringstream ss;  \n    ss &lt;&lt; \"Unknown value: \" &lt;&lt; unknownFruit;  \n    auto temp = ss.str();  \n    ASSERT_EQ(temp.c_str(), printSomething(unknownFruit));  \n}\n</code></pre>\n\n<p>The last <code>ASSERT_EQ</code> is always failing, I want to see what is the value of <code>myFruit</code> if it goes to <code>default</code> in the <code>switch case</code>. </p>\n\n<p>I am assuming that in the  </p>\n\n<pre><code>ASSERT_EQ(temp.c_str(), printSomething(unknownFruit));\n</code></pre>\n\n<p>it will look like this</p>\n\n<pre><code>ASSERT_EQ(\"Unknown value: -1\", printSomething(-1));\n</code></pre>\n\n<p>But <code>Fruits</code> doesn't have a -1 so <code>myFruityFruit</code> will be <code>null</code>? and that is why the last <code>ASSERT_EQ</code> is failing?</p>\n\n<p>What really happen in this scenario? What can I do to make it pass?</p>\n\n<p>Also I'm trying to avoid any valgrind errors like memory leak or others.</p>\n"}, {"tags": ["c++", "point-cloud-library"], "comments": [{"owner": {"reputation": 1101, "user_id": 1525865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71694cac93edcd9f6757139a9af32939?s=128&d=identicon&r=PG", "display_name": "taketwo", "link": "https://stackoverflow.com/users/1525865/taketwo"}, "edited": false, "score": 0, "creation_date": 1423754080, "post_id": 28461443, "comment_id": 45284360, "body": "The code is correct, though setting a color handler is superfluous in this case. It should be sufficient to add the point cloud to the visualizer with <code>viewer-&gt;addPointCloud (cloud, &quot;sample cloud&quot;);</code>"}, {"owner": {"reputation": 108, "user_id": 2981361, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NmJ5J.jpg?s=128&g=1", "display_name": "RoboticsNovice", "link": "https://stackoverflow.com/users/2981361/roboticsnovice"}, "reply_to_user": {"reputation": 1101, "user_id": 1525865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71694cac93edcd9f6757139a9af32939?s=128&d=identicon&r=PG", "display_name": "taketwo", "link": "https://stackoverflow.com/users/1525865/taketwo"}, "edited": false, "score": 0, "creation_date": 1424087835, "post_id": 28461443, "comment_id": 45395310, "body": "The cloud color is just white if i take out color handler."}], "answers": [{"comments": [{"owner": {"reputation": 1101, "user_id": 1525865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71694cac93edcd9f6757139a9af32939?s=128&d=identicon&r=PG", "display_name": "taketwo", "link": "https://stackoverflow.com/users/1525865/taketwo"}, "edited": false, "score": 0, "creation_date": 1423754184, "post_id": 28476893, "comment_id": 45284441, "body": "It&#39;s possible to access color channels individually: <code>point.r = 255; point.g = 15; point.b = 15;</code>, thereby avoiding explicit shifts and cast."}, {"owner": {"reputation": 4898, "user_id": 1348388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y17NZ.png?s=128&g=1", "display_name": "Kornel", "link": "https://stackoverflow.com/users/1348388/kornel"}, "reply_to_user": {"reputation": 1101, "user_id": 1525865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71694cac93edcd9f6757139a9af32939?s=128&d=identicon&r=PG", "display_name": "taketwo", "link": "https://stackoverflow.com/users/1525865/taketwo"}, "edited": false, "score": 0, "creation_date": 1423754559, "post_id": 28476893, "comment_id": 45284687, "body": "which PCL version? what is the range of r/g/b? have you tried with the shift/cast method?"}, {"owner": {"reputation": 1101, "user_id": 1525865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71694cac93edcd9f6757139a9af32939?s=128&d=identicon&r=PG", "display_name": "taketwo", "link": "https://stackoverflow.com/users/1525865/taketwo"}, "edited": false, "score": 0, "creation_date": 1423755829, "post_id": 28476893, "comment_id": 45285506, "body": "Unfortunately I can not tell you in which version this was introduced, but it was long ago. I remember using <code>r</code>, <code>g</code>, and <code>b</code> back in summer 2012. The range is <code>[0..255]</code>."}, {"owner": {"reputation": 1101, "user_id": 1525865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71694cac93edcd9f6757139a9af32939?s=128&d=identicon&r=PG", "display_name": "taketwo", "link": "https://stackoverflow.com/users/1525865/taketwo"}, "edited": false, "score": 0, "creation_date": 1423756009, "post_id": 28476893, "comment_id": 45285627, "body": "If you are interested, <a href=\"https://github.com/PointCloudLibrary/pcl/blob/master/common/include/pcl/impl/point_types.hpp#L219-L233\" rel=\"nofollow noreferrer\">have a look</a> at how the <code>RGBA</code> part of point cloud structures is implemented."}, {"owner": {"reputation": 4898, "user_id": 1348388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y17NZ.png?s=128&g=1", "display_name": "Kornel", "link": "https://stackoverflow.com/users/1348388/kornel"}, "reply_to_user": {"reputation": 1101, "user_id": 1525865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71694cac93edcd9f6757139a9af32939?s=128&d=identicon&r=PG", "display_name": "taketwo", "link": "https://stackoverflow.com/users/1525865/taketwo"}, "edited": false, "score": 0, "creation_date": 1423830946, "post_id": 28476893, "comment_id": 45318744, "body": "that&#39;s right but if you see the reference of  <a href=\"http://docs.pointclouds.org/trunk/classpcl_1_1visualization_1_1_point_cloud_color_handler_r_g_b_field_3_01pcl_1_1_p_c_l_point_cloud2_01_4.html\" rel=\"nofollow noreferrer\">PointCloudColorHandlerRGBField</a> it clarifies &quot;Uses the data present in the <code>rgb</code> or <code>rgba</code> fields as the color at each point&quot;. I&#39;m not sure in updating <code>r</code>, <code>g</code> and <code>b</code> fields will have an impact of <code>rgb</code> or <code>rgba</code> fields."}, {"owner": {"reputation": 1101, "user_id": 1525865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71694cac93edcd9f6757139a9af32939?s=128&d=identicon&r=PG", "display_name": "taketwo", "link": "https://stackoverflow.com/users/1525865/taketwo"}, "edited": false, "score": 1, "creation_date": 1423834577, "post_id": 28476893, "comment_id": 45320920, "body": "<code>r</code>, <code>g</code>, <code>b</code>, <code>rgb</code>, and <code>rgba</code> all point to the same physical memory location because they are in <a href=\"http://en.wikibooks.org/wiki/C%2B%2B_Programming/Unions\" rel=\"nofollow noreferrer\">union</a>."}, {"owner": {"reputation": 108, "user_id": 2981361, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NmJ5J.jpg?s=128&g=1", "display_name": "RoboticsNovice", "link": "https://stackoverflow.com/users/2981361/roboticsnovice"}, "edited": false, "score": 0, "creation_date": 1424539845, "post_id": 28476893, "comment_id": 45595173, "body": "how do I use visualizer class to show the original color of an object?."}], "owner": {"reputation": 4898, "user_id": 1348388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y17NZ.png?s=128&g=1", "display_name": "Kornel", "link": "https://stackoverflow.com/users/1348388/kornel"}, "is_accepted": true, "score": 0, "last_activity_date": 1423742359, "creation_date": 1423742359, "answer_id": 28476893, "question_id": 28461443, "link": "https://stackoverflow.com/questions/28461443/how-to-obtain-color-information-from-a-point-cloud-and-display-it/28476893#28476893", "title": "how to obtain color information from a point cloud and display it?", "body": "<p>Your code seems to me okay, how do you set the color of the cloud?</p>\n\n<pre><code>pcl::PointCloud&lt;pcl::PointXYZRGB&gt;::Ptr point_cloud_ptr (new pcl::PointCloud&lt;pcl::PointXYZRGB&gt;);\n\npcl::PointXYZRGB point;\n\n// ...\n\nuint32_t rgb = (static_cast&lt;uint32_t&gt;(255) &lt;&lt; 16 |\n                static_cast&lt;uint32_t&gt;(15) &lt;&lt; 8 | \n                static_cast&lt;uint32_t&gt;(15));\n\npoint.rgb = *reinterpret_cast&lt;float*&gt;(&amp;rgb);\n\npoint_cloud_ptr-&gt;points.push_back(point);\n</code></pre>\n"}], "owner": {"reputation": 108, "user_id": 2981361, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NmJ5J.jpg?s=128&g=1", "display_name": "RoboticsNovice", "link": "https://stackoverflow.com/users/2981361/roboticsnovice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2609, "favorite_count": 0, "accepted_answer_id": 28476893, "answer_count": 1, "score": 0, "last_activity_date": 1423742359, "creation_date": 1423678480, "last_edit_date": 1423678772, "question_id": 28461443, "link": "https://stackoverflow.com/questions/28461443/how-to-obtain-color-information-from-a-point-cloud-and-display-it", "title": "how to obtain color information from a point cloud and display it?", "body": "<p>I have to access the color property of a point in the point cloud using point cloud library. Any help is appreciated.</p>\n\n<p>currently I am using this to display the cloud.But it is displaying only red blue green and not the actual color of the object.</p>\n\n<pre><code>boost::shared_ptr&lt;pcl::visualization::PCLVisualizer&gt; viewer (\n    new pcl::visualization::PCLVisualizer (\"3D Viewer\")\n);\n\nviewer-&gt;setBackgroundColor (0, 0, 0);\npcl::visualization::PointCloudColorHandlerRGBField&lt;pcl::PointXYZRGB&gt; rgb(cloud);\nviewer-&gt;addPointCloud&lt;pcl::PointXYZRGB&gt; (cloud, rgb, \"sample cloud\");\nviewer-&gt;setPointCloudRenderingProperties (\n      pcl::visualization::PCL_VISUALIZER_POINT_SIZE\n    , 3\n    , \"sample cloud\"\n);\n\nviewer-&gt;addCoordinateSystem (1.0);\nviewer-&gt;initCameraParameters ();\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++11", "variadic-templates"], "comments": [{"owner": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 3, "creation_date": 1423678220, "post_id": 28461300, "comment_id": 45248642, "body": "<code>Now, I&#39;ve solved this exercise and tested it, but my solution is very long and would like to hear some more elegant ideas.</code> Then I think CodeReview may be a better fit."}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "reply_to_user": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1423678296, "post_id": 28461300, "comment_id": 45248677, "body": "But I&#39;m not asking anyone to review my solution, but suggest a new method altogether.  I want to hear of a better plan and then take it on myself.  Seeing some pseudocode showing their ideas would help even better.  I just know that there is a better way than above.  I only posted my idea (and solution) so that people can think of a better idea."}], "answers": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 6, "last_activity_date": 1423679366, "creation_date": 1423679366, "answer_id": 28461717, "question_id": 28461300, "link": "https://stackoverflow.com/questions/28461300/obtaining-all-subpacks-from-a-pack/28461717#28461717", "title": "Obtaining all subpacks from a pack", "body": "<p>The key is to establish a recurrence relation:</p>\n\n<pre><code>PowerSet of {A, B, C}\n== (PowerSet of {B,C}) U (PowerSet of {B,C} w/ A)\n</code></pre>\n\n<p>where the <code>w/ A</code> part simply refers to adding <code>A</code> into every subset. Given that, we need three metafunctions: <code>Plus</code>, to take the union of two <code>Pack</code>s, <code>Prefix</code>, to add a type to every element in a <code>Pack</code>, and lastly, <code>PowerSet</code>. The Three <code>P</code>s, if you will. </p>\n\n<p>In increasing order of complexity. <code>Plus</code> just jams the packs together:</p>\n\n<pre><code>template &lt;typename A, typename B&gt; struct Plus;\n\ntemplate &lt;typename... A, typename... B&gt;\nstruct Plus&lt;Pack&lt;A...&gt;, Pack&lt;B...&gt;&gt; {\n    using type = Pack&lt;A..., B...&gt;;\n};\n</code></pre>\n\n<p>Prefix just uses <code>Plus</code> to add <code>Pack&lt;A&gt;</code> to everything:</p>\n\n<pre><code>template &lt;typename A, typename P&gt; struct Prefix;\n\ntemplate &lt;typename A, typename... P&gt;\nstruct Prefix&lt;A, Pack&lt;P...&gt; &gt;\n{\n    using type = Pack&lt;typename Plus&lt;Pack&lt;A&gt;, P&gt;::type...&gt;;\n};\n</code></pre>\n\n<p>And then <code>PowerSet</code> is a direct translation of the recurrence:</p>\n\n<pre><code>template &lt;typename P&gt; struct PowerSet;\n\ntemplate &lt;typename T0, typename... T&gt;\nstruct PowerSet&lt;Pack&lt;T0, T...&gt;&gt;\n{\n    using rest = typename PowerSet&lt;Pack&lt;T...&gt;&gt;::type;\n    using type = typename Plus&lt;rest,\n                               typename Prefix&lt;T0, rest&gt;::type\n                               &gt;::type;\n};\n\ntemplate &lt;&gt;\nstruct PowerSet&lt;Pack&lt;&gt;&gt;\n{\n    using type = Pack&lt;Pack&lt;&gt;&gt;;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 2, "creation_date": 1423680320, "post_id": 28461960, "comment_id": 45249865, "body": "That&#39;s a <i>lot</i> shorter than my solution, kudos. Wonder about performances."}], "owner": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "is_accepted": true, "score": 8, "last_activity_date": 1423681031, "last_edit_date": 1423681031, "creation_date": 1423680096, "answer_id": 28461960, "question_id": 28461300, "link": "https://stackoverflow.com/questions/28461300/obtaining-all-subpacks-from-a-pack/28461960#28461960", "title": "Obtaining all subpacks from a pack", "body": "<p>Here's my attempt:</p>\n\n<pre><code>template&lt;typename,typename&gt; struct Append;\n\ntemplate&lt;typename...Ts,typename T&gt;\nstruct Append&lt;Pack&lt;Ts...&gt;,T&gt;\n{\n    using type = Pack&lt;Ts...,T&gt;;\n};\n\ntemplate&lt;typename,typename T=Pack&lt;Pack&lt;&gt;&gt;&gt;\nstruct PowerPack\n{\n    using type = T;\n};\n\ntemplate&lt;typename T,typename...Ts,typename...Us&gt;\nstruct PowerPack&lt;Pack&lt;T,Ts...&gt;,Pack&lt;Us...&gt;&gt;\n    : PowerPack&lt;Pack&lt;Ts...&gt;,Pack&lt;Us...,typename Append&lt;Us,T&gt;::type...&gt;&gt;\n{\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/25a68ab0ccce643f\"><strong>Live example</strong></a></p>\n"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1423686997, "last_edit_date": 1423686997, "creation_date": 1423681251, "answer_id": 28462357, "question_id": 28461300, "link": "https://stackoverflow.com/questions/28461300/obtaining-all-subpacks-from-a-pack/28462357#28462357", "title": "Obtaining all subpacks from a pack", "body": "<p>The goal here is to create some generally useful tools, then solve <code>pow</code> in as few lines.  The generally useful type tools aren't all that bulky either.</p>\n\n<p>So, first a library for type list manipulation.</p>\n\n<pre><code>template&lt;class...&gt;struct types{using type=types;};\n</code></pre>\n\n<p>Concat two type lists:</p>\n\n<pre><code>template&lt;class types1,class types2&gt;struct concat;\ntemplate&lt;class...types1,class...types2&gt;struct concat&lt;\n  types&lt;types1...&gt;,\n  types&lt;types2...&gt;\n&gt;:types&lt;types1...,types2...&gt;{};\ntemplate&lt;class A,class B&gt;using concat_t=typename concat&lt;A,B&gt;::type;\n</code></pre>\n\n<p>Apply type function Z to each element of a list:</p>\n\n<pre><code>template&lt;template&lt;class...&gt;class Z, class types&gt; struct apply;\ntemplate&lt;template&lt;class...&gt;class Z, class...Ts&gt;\nstruct apply&lt;Z,types&lt;Ts...&gt;&gt;:\n  types&lt; Z&lt;Ts&gt;... &gt;\n{};\ntemplate&lt;template&lt;class...&gt;class Z, class types&gt;\nusing apply_t=typename apply&lt;Z,types&gt;::type;\n</code></pre>\n\n<p>partial template application:</p>\n\n<pre><code>template&lt;template&lt;class...&gt;class Z, class T&gt;\nstruct partial {\n  template&lt;class... Ts&gt;\n  struct apply:Z&lt;T,Ts...&gt; {};\n  template&lt;class... Ts&gt;\n  using apply_t=typename apply&lt;Ts...&gt;::type;\n};\n</code></pre>\n\n<p>take lhs, and apply <code>Z&lt;lhs, *&gt;</code> on rhs:</p>\n\n<pre><code>template&lt;template&lt;class, class...&gt;class Z, class lhs, class types&gt;\nusing expand_t=apply_t&lt;partial&lt;Z,lhs&gt;::template apply_t, types&gt;;\n</code></pre>\n\n<p>solve the problem:</p>\n\n<pre><code>template&lt;class T&gt;struct pow; // fail if not given a package\ntemplate&lt;&gt;struct pow&lt;types&lt;&gt;&gt;:types&lt;types&lt;&gt;&gt;{};\ntemplate&lt;class T&gt;using pow_t=typename pow&lt;T&gt;::type;\ntemplate&lt;class T0,class...Ts&gt;struct pow&lt;types&lt;T0,Ts...&gt;&gt;:\n  concat_t&lt;\n    expand_t&lt; concat_t, types&lt;T0&gt;, pow_t&lt;types&lt;Ts...&gt;&gt; &gt;,\n    pow_t&lt;types&lt;Ts...&gt;&gt;\n  &gt;\n{};\n</code></pre>\n\n<p>you may notice only one non-empty struct body.  This is because <code>types</code> has a <code>using type=types;</code> body, and everyone else just steals it.</p>\n\n<p><code>pow</code> is defined recursively to be the pow of the tail, union {{head} union each tail element}.  The terminating case handles the empty power set element.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/7c454b4d97fbb431\" rel=\"nofollow\">live example</a></p>\n\n<p><code>concat_t</code> is overly powerful, as we only need to append 1 element at a time.</p>\n\n<p><code>apply_t</code> only applies unary functions, because that is cleaner.  But it does mean that <code>expand_t</code> has to be written.  You can write an <code>apply_t</code> that is about as short that includes <code>expand_t</code>, but partial function application in functional programming is a good habit to get into.</p>\n\n<p>I had to make <code>partial</code> about 3x as large as I liked, as clang seems to explode if I don't first unpack in a <code>struct</code> then do a <code>using</code>.</p>\n\n<p>One version of this did not depend on using a particular package for types.  It blew up at a few points.</p>\n\n<p>I wish there was a <code>using</code> syntax that returned a <code>template</code>.  It would make <code>expand_t</code> not useful, as <code>partial_z&lt;concat_t, T0&gt;</code> could be a <code>template</code> that prepends <code>T0</code> to its argument, instead of <code>partial&lt;concat_t, T0&gt;::template apply_t</code> which is ugly.</p>\n"}, {"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "is_accepted": false, "score": 2, "last_activity_date": 1423688162, "creation_date": 1423688162, "answer_id": 28464333, "question_id": 28461300, "link": "https://stackoverflow.com/questions/28461300/obtaining-all-subpacks-from-a-pack/28464333#28464333", "title": "Obtaining all subpacks from a pack", "body": "<p>Cheating by using <a href=\"https://github.com/ericniebler/meta\" rel=\"nofollow\">Eric Niebler's Tiny Meta-Programming Library</a> (<a href=\"http://coliru.stacked-crooked.com/a/2044899b8662c7f3\" rel=\"nofollow\"><strong>DEMO</strong></a>):</p>\n\n<pre><code>template &lt;typename...Ts&gt;\nusing Pack = meta::list&lt;Ts...&gt;;\n\ntemplate &lt;typename Sets, typename Element&gt;\nusing f = meta::concat&lt;\n  Sets,\n  meta::transform&lt;\n    Sets,\n    meta::bind_back&lt;meta::quote&lt;meta::push_front&gt;, Element&gt;\n&gt;&gt;;\n\ntemplate &lt;typename List&gt;\nusing PowerSet = meta::foldr&lt;List, Pack&lt;Pack&lt;&gt;&gt;, meta::quote&lt;f&gt;&gt;;\n</code></pre>\n\n<p><code>f</code> takes a list of lists and a single type and produces a list containing each of the input lists and each of the input lists with the given type prepended. Computing the powerset is then simply a <a href=\"http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29\" rel=\"nofollow\">right fold</a> of <code>f</code> over the original input list.</p>\n"}], "owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 3, "accepted_answer_id": 28461960, "answer_count": 4, "score": 6, "last_activity_date": 1423701459, "creation_date": 1423678028, "last_edit_date": 1423701459, "question_id": 28461300, "link": "https://stackoverflow.com/questions/28461300/obtaining-all-subpacks-from-a-pack", "title": "Obtaining all subpacks from a pack", "body": "<p><code>PowerSet&lt;Pack&lt;Types...&gt;&gt;::type</code> is to give a pack consisting of packs formed by all subsets of <code>Types...</code> (for now assume the static assertion that every type in <code>Types...</code> are distinct).  For example,</p>\n\n<pre><code>PowerSet&lt;Pack&lt;int, char, double&gt;&gt;::type\n</code></pre>\n\n<p>is to be</p>\n\n<pre><code>Pack&lt;Pack&lt;&gt;, Pack&lt;int&gt;, Pack&lt;char&gt;, Pack&lt;double&gt;, Pack&lt;int, char&gt;, Pack&lt;int, double&gt;, Pack&lt;char, double&gt;, Pack&lt;int, char, double&gt;&gt;\n</code></pre>\n\n<p>Now, I've solved this exercise and tested it, but my solution is very long and would like to hear some more elegant ideas.  I'm not asking anyone to review my solution, but suggest a new method altogether, perhaps sketch their idea with some pseudocode.</p>\n\n<p>In case you wanted to know, this is what I did:  First, I recalled from high school that a set of N elements has 2^N subsets.  Each subset corresponds to\nan N-digit binary number, e.g. 001010...01 (N digits long), where 0 means that the element is in the subset and 1 means that\nthe element is not in the subset.  Thus 000...0 would represent the empty subset, and 111...1 would represent the entire set itself.\nSo using the (template) sequence 0,1,2,3,...2^N-1, I formed 2^N index_sequence's, each corresponding to the binary representation of the\nintegers in that sequence, e.g. index_sequence&lt;1,1,0,1> would correspond to 13 from that sequence.  Then each of those 2^N index_sequence's\nwill be converted to the desired 2^N subsets of <code>Pack&lt;Types...&gt;</code>.</p>\n\n<p>My solution below is quite long, and I know that there is a more elegant method than the very mechanical one described above.\nIf you've thought of a better plan (perhaps shorter too because it is more recursive or whatever), please post your idea so that I can take on\nyour better plan, hoping to write out a shorter solution.  I don't expect you to write out your solution in full if you think it will probably take\nsome time (unless you want to).  But currently, I can't think of another way than what I've done.  Here is my current longish solution in case you want to read it:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;typeinfo&gt;\n\n// SubsetFromBinaryDigits&lt;P&lt;Types...&gt;, Is...&gt;::type gives the sub-pack of P&lt;Types...&gt; where 1 takes the type and 0 does not take the type.  The size of the two packs must be the same.\n// For example, SubsetFromBinaryDigits&lt;Pack&lt;int, double, char&gt;, 1,0,1&gt;::type gives Pack&lt;int, char&gt;.\n\ntemplate &lt;typename, typename, int...&gt; struct SubsetFromBinaryDigitsHelper;\n\ntemplate &lt;template &lt;typename...&gt; class P, typename... Accumulated, int... Is&gt;\nstruct SubsetFromBinaryDigitsHelper&lt;P&lt;&gt;, P&lt;Accumulated...&gt;, Is...&gt; {\n    using type = P&lt;Accumulated...&gt;;\n};\n\ntemplate &lt;template &lt;typename...&gt; class P, typename First, typename... Rest, typename... Accumulated, int FirstInt, int... RestInt&gt;\nstruct SubsetFromBinaryDigitsHelper&lt;P&lt;First, Rest...&gt;, P&lt;Accumulated...&gt;, FirstInt, RestInt...&gt; :\n    std::conditional&lt;FirstInt == 0,\n        SubsetFromBinaryDigitsHelper&lt;P&lt;Rest...&gt;, P&lt;Accumulated...&gt;, RestInt...&gt;,\n        SubsetFromBinaryDigitsHelper&lt;P&lt;Rest...&gt;, P&lt;Accumulated..., First&gt;, RestInt...&gt;\n    &gt;::type {};\n\ntemplate &lt;typename, int...&gt; struct SubsetFromBinaryDigits;\n\ntemplate &lt;template &lt;typename...&gt; class P, typename... Types, int... Is&gt;\nstruct SubsetFromBinaryDigits&lt;P&lt;Types...&gt;, Is...&gt; : SubsetFromBinaryDigitsHelper&lt;P&lt;Types...&gt;, P&lt;&gt;, Is...&gt; {};\n\n// struct NSubsets&lt;P&lt;Types...&gt;, IntPacks...&gt;::type is a pack of packs, with each inner pack being the subset formed by the IntPacks.\n// For example, NSubsets&lt; Pack&lt;int, char, long, Object, float, double, Blob, short&gt;, index_sequence&lt;0,1,1,0,1,0,1,1&gt;, index_sequence&lt;0,1,1,0,1,0,1,0&gt;, index_sequence&lt;1,1,1,0,1,0,1,0&gt; &gt;::type will give\n// Pack&lt; Pack&lt;char, long, float, Blob, short&gt;, Pack&lt;char, long, float, Blob&gt;, Pack&lt;int, char, long, float, Blob&gt; &gt;\n\ntemplate &lt;typename, typename, typename...&gt; struct NSubsetsHelper;\n\ntemplate &lt;template &lt;typename...&gt; class P, typename... Types, typename... Accumulated&gt;\nstruct NSubsetsHelper&lt;P&lt;Types...&gt;, P&lt;Accumulated...&gt;&gt; {\n    using type = P&lt;Accumulated...&gt;;\n};\n\ntemplate &lt;template &lt;typename...&gt; class P, typename... Types, typename... Accumulated, template &lt;int...&gt; class Z, int... Is, typename... Rest&gt;\nstruct NSubsetsHelper&lt;P&lt;Types...&gt;, P&lt;Accumulated...&gt;, Z&lt;Is...&gt;, Rest...&gt; :\n    NSubsetsHelper&lt;P&lt;Types...&gt;, P&lt;Accumulated..., typename SubsetFromBinaryDigits&lt;P&lt;Types...&gt;, Is...&gt;::type&gt;, Rest...&gt; {};\n\ntemplate &lt;typename, typename...&gt; struct NSubsets;\n\ntemplate &lt;template &lt;typename...&gt; class P, typename... Types, typename... IntPacks&gt;\nstruct NSubsets&lt;P&lt;Types...&gt;, IntPacks...&gt; : NSubsetsHelper&lt;P&lt;Types...&gt;, P&lt;&gt;, IntPacks...&gt; {};\n\n// Now, given a pack with N types, we transform index_sequence&lt;0,1,2,...,2^N&gt; to a pack of 2^N index_sequence packs, with the 0's and 1's of each\n// index_sequence pack forming the binary representation of the integer.  For example, if N = 2, then we have\n// Pack&lt;index_sequence&lt;0,0&gt;, index_sequence&lt;0,1&gt;, index_sequence&lt;1,0&gt;, index_sequence&lt;1,1&gt;&gt;.  From these, we can get the\n// power set, i.e. the set of all subsets of the original pack.\n\ntemplate &lt;int N, int Exponent, int PowerOfTwo&gt;\nstruct LargestPowerOfTwoUpToHelper {\n    using type = typename std::conditional&lt;(PowerOfTwo &gt; N),\n        std::integral_constant&lt;int, Exponent&gt;,\n        LargestPowerOfTwoUpToHelper&lt;N, Exponent + 1, 2 * PowerOfTwo&gt;\n    &gt;::type;\n    static const int value = type::value;\n};\n\ntemplate &lt;int N&gt;\nstruct LargestPowerOfTwoUpTo : std::integral_constant&lt;int, LargestPowerOfTwoUpToHelper&lt;N, -1, 1&gt;::value&gt; {};\n\nconstexpr int power (int base, int exponent) {\n    return std::pow (base, exponent);\n}\n\ntemplate &lt;int...&gt; struct index_sequence {};\n\n// For example, PreBinaryIndexSequence&lt;13&gt;::type is to be index_sequence&lt;0,2,3&gt;, since 13 = 2^3 + 2^2 + 2^0.\ntemplate &lt;int N, int... Accumulated&gt;\nstruct PreBinaryIndexSequence {  // Could use another helper, since LargestPowerOfTwoUpToHelper&lt;N, -1, 1&gt;::value is being used twice.\n    using type = typename PreBinaryIndexSequence&lt;N - power(2, LargestPowerOfTwoUpToHelper&lt;N, -1, 1&gt;::value), LargestPowerOfTwoUpToHelper&lt;N, -1, 1&gt;::value, Accumulated...&gt;::type;\n};\n\ntemplate &lt;int... Accumulated&gt;\nstruct PreBinaryIndexSequence&lt;0, Accumulated...&gt; {\n    using type = index_sequence&lt;Accumulated...&gt;;\n};\n\n// For example, BinaryIndexSequenceHelper&lt;index_sequence&lt;&gt;, index_sequence&lt;0,2,3&gt;, 0, 7&gt;::type is to be index_sequence&lt;1,0,1,1,0,0,0,0&gt; (the first index with position 0, and the last index is position 7).\ntemplate &lt;typename, typename, int, int&gt; struct BinaryIndexSequenceHelper;\n\ntemplate &lt;template &lt;int...&gt; class Z, int... Accumulated, int First, int... Rest, int Count, int MaxCount&gt;\nstruct BinaryIndexSequenceHelper&lt;Z&lt;Accumulated...&gt;, Z&lt;First, Rest...&gt;, Count, MaxCount&gt; : std::conditional&lt;First == Count,\n        BinaryIndexSequenceHelper&lt;Z&lt;Accumulated..., 1&gt;, Z&lt;Rest...&gt;, Count + 1, MaxCount&gt;,\n        BinaryIndexSequenceHelper&lt;Z&lt;Accumulated..., 0&gt;, Z&lt;First, Rest...&gt;, Count + 1, MaxCount&gt;\n    &gt;::type {};\n\n// When the input pack is emptied, but Count is still less than MaxCount, fill the rest of the acccumator pack with 0's.\ntemplate &lt;template &lt;int...&gt; class Z, int... Accumulated, int Count, int MaxCount&gt;\nstruct BinaryIndexSequenceHelper&lt;Z&lt;Accumulated...&gt;, Z&lt;&gt;, Count, MaxCount&gt; : BinaryIndexSequenceHelper&lt;Z&lt;Accumulated..., 0&gt;, Z&lt;&gt;, Count + 1, MaxCount&gt; {};\n\ntemplate &lt;template &lt;int...&gt; class Z, int... Accumulated, int MaxCount&gt;\nstruct BinaryIndexSequenceHelper&lt;Z&lt;Accumulated...&gt;, Z&lt;&gt;, MaxCount, MaxCount&gt; {\n    using type = Z&lt;Accumulated...&gt;;\n};\n\n// At last, BinaryIndexSequence&lt;N&gt; is the binary representation of N using index_sequence, e.g. BinaryIndexSequence&lt;13,7&gt; is index_sequence&lt;1,0,1,1,0,0,0&gt;.\ntemplate &lt;int N, int NumDigits&gt;\nusing BinaryIndexSequence = typename BinaryIndexSequenceHelper&lt;index_sequence&lt;&gt;, typename PreBinaryIndexSequence&lt;N&gt;::type, 0, NumDigits&gt;::type;\n\n// Now define make_index_sequence&lt;N&gt; to be index_sequence&lt;0,1,2,...,N-1&gt;.\ntemplate &lt;int N, int... Is&gt;\nstruct make_index_sequence_helper : make_index_sequence_helper&lt;N-1, N-1, Is...&gt; {};  // make_index_sequence_helper&lt;N-1, N-1, Is...&gt; is derived from make_index_sequence_helper&lt;N-2, N-2, N-1, Is...&gt;, which is derived from make_index_sequence_helper&lt;N-3, N-3, N-2, N-1, Is...&gt;, which is derived from ... which is derived from make_index_sequence_helper&lt;0, 0, 1, 2, ..., N-2, N-1, Is...&gt;\n\ntemplate &lt;int... Is&gt;\nstruct make_index_sequence_helper&lt;0, Is...&gt; {\n    using type = index_sequence&lt;Is...&gt;;\n};\n\ntemplate &lt;int N&gt;\nusing make_index_sequence = typename make_index_sequence_helper&lt;N&gt;::type;\n\n// Finally, ready to define PowerSet itself.\ntemplate &lt;typename, typename&gt; struct PowerSetHelper;\n\ntemplate &lt;template &lt;typename...&gt; class P, typename... Types, template &lt;int...&gt; class Z, int... Is&gt;\nstruct PowerSetHelper&lt;P&lt;Types...&gt;, Z&lt;Is...&gt;&gt; : NSubsets&lt; P&lt;Types...&gt;, BinaryIndexSequence&lt;Is, sizeof...(Types)&gt;... &gt; {};\n\ntemplate &lt;typename&gt; struct PowerSet;\n\ntemplate &lt;template &lt;typename...&gt; class P, typename... Types&gt;\nstruct PowerSet&lt;P&lt;Types...&gt;&gt; : PowerSetHelper&lt;P&lt;Types...&gt;, make_index_sequence&lt;power(2, sizeof...(Types))&gt;&gt; {};\n\n// -----------------------------------------------------------------------------------------------------------------------------------------------\n// Testing\n\ntemplate &lt;typename...&gt; struct Pack {};\n\ntemplate &lt;typename Last&gt;\nstruct Pack&lt;Last&gt; {\n    static void print() {std::cout &lt;&lt; typeid(Last).name() &lt;&lt; std::endl;}\n};\n\ntemplate &lt;typename First, typename ... Rest&gt;\nstruct Pack&lt;First, Rest...&gt; {\n    static void print() {std::cout &lt;&lt; typeid(First).name() &lt;&lt; ' ';  Pack&lt;Rest...&gt;::print();}\n};\n\ntemplate &lt;int Last&gt;\nstruct index_sequence&lt;Last&gt; {\n    static void print() {std::cout &lt;&lt; Last &lt;&lt; std::endl;}\n};\n\ntemplate &lt;int First, int ... Rest&gt;\nstruct index_sequence&lt;First, Rest...&gt; {\n    static void print() {std::cout &lt;&lt; First &lt;&lt; ' ';  index_sequence&lt;Rest...&gt;::print();}\n};\n\nint main() {\n    PowerSet&lt;Pack&lt;int, char, double&gt;&gt;::type powerSet;\n    powerSet.print();\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linker", "namespaces", "name-mangling"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1423678015, "post_id": 28461212, "comment_id": 45248549, "body": "No, either you have an <code>extern &quot;C&quot; foo_bar</code> forwarding to <code>foo::bar</code> or drop the bar from the namespace foo and just <code>extern &quot;C&quot; foo_bar</code> (implementing the function)"}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423678386, "post_id": 28461212, "comment_id": 45248741, "body": "What do you mean by &quot;forwarding&quot;?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1423678705, "post_id": 28461212, "comment_id": 45248910, "body": "Forwarding: <code>extern &quot;C&quot; int foo_bar(int x) { return foo::bar(x); }</code>"}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423680287, "post_id": 28461212, "comment_id": 45249840, "body": "@DieterL&#252;cking: That&#39;s the opposite of what I&#39;m trying to do. I think you meant <code>extern &quot;C&quot; int foo_bar(int);</code> and <code>namespace foo { int bar(int x) { return foo_bar(x); } }</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1423681026, "post_id": 28461212, "comment_id": 45250295, "body": "Matt: It depends, the first implementation (either C or C++) stays, the other forwards to the existing."}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423682116, "post_id": 28461212, "comment_id": 45250918, "body": "@DieterL&#252;cking: There is no existing implementation. It&#39;s supposed to be implemented in <code>foo.c</code>."}], "answers": [{"comments": [{"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423678477, "post_id": 28461271, "comment_id": 45248792, "body": "That&#39;s the opposite of what I&#39;m trying to do. But anyway, a wrapper would be my backup plan."}, {"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "reply_to_user": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 1, "creation_date": 1423679839, "post_id": 28461271, "comment_id": 45249558, "body": "Got it.  I know you&#39;re hoping for something cleaner and I&#39;m watching the thread myself to what you come up with (fingers crossed)."}], "owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "is_accepted": false, "score": 1, "last_activity_date": 1423677918, "creation_date": 1423677918, "answer_id": 28461271, "question_id": 28461212, "link": "https://stackoverflow.com/questions/28461212/how-can-i-implement-in-c-a-function-declared-in-a-c-namespace/28461271#28461271", "title": "How can I implement in C a function declared in a C++ namespace?", "body": "<p>Would a wrapper be acceptable?</p>\n\n<pre><code>namespace foo {\n    int bar(int);\n    }\nextern \"C\" int callable_from_c(int f) {\n    return foo::bar(f);\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423678323, "post_id": 28461276, "comment_id": 45248696, "body": "That&#39;s what I meant when I said &quot;it needs to only be accessible from the namespace <code>foo</code>&quot;. There shouldn&#39;t be any global name <code>bar</code>, which may even conflict with other names in C. The whole point of the namespace is to prevent the name conflicts."}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "reply_to_user": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423678369, "post_id": 28461276, "comment_id": 45248726, "body": "@Matt: In that case, no --- you&#39;ll need a wrapper function. See user590028&#39;s answer for that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1423678437, "post_id": 28461276, "comment_id": 45248771, "body": "That is just a forward declaration of a function with &quot;C&quot; linkage - I doubt it will work as expected"}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1423678462, "post_id": 28461276, "comment_id": 45248784, "body": "@DieterL&#252;cking: What do you mean? Why wouldn&#39;t it work?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1423678561, "post_id": 28461276, "comment_id": 45248830, "body": "@Tim\u010cas Have you tried it (building a library and an application) using that design?"}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1423680383, "post_id": 28461276, "comment_id": 45249891, "body": "@DieterL&#252;cking: Yup. Works fine. I basically have a <code>namespace siege { namespace c { #include ... } }</code> in C++ wrapper for a C lib; there are certain issues if those C files include other (in particular stdlib) headers that I haven&#39;t gotten around to fixing --- but those are completely unrelated to any issues with function declarations."}], "owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "is_accepted": false, "score": 3, "last_activity_date": 1423677941, "creation_date": 1423677941, "answer_id": 28461276, "question_id": 28461212, "link": "https://stackoverflow.com/questions/28461212/how-can-i-implement-in-c-a-function-declared-in-a-c-namespace/28461276#28461276", "title": "How can I implement in C a function declared in a C++ namespace?", "body": "<p><code>extern \"C\"</code> can be nested (in fact, that's how headers like <code>&lt;cstdio&gt;</code> typically work!), so you can just do the following:</p>\n\n<pre><code>/* C++ code */\nnamespace foo {\n    extern \"C\" {\n        int bar(int);\n    }\n}\n</code></pre>\n\n<p>After that, you just implement it in C as usual:</p>\n\n<pre><code>/* C code */\nint bar(int x) {\n    return -x; /* or whatever */\n}\n</code></pre>\n\n<p>Unfortunately, if there's a naming conflict (say, if you have both <code>foo::bar</code> <em>and</em> <code>baz::bar</code>), you won't be able to have them both, unless they're the same function.</p>\n"}, {"comments": [{"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423850915, "post_id": 28505561, "comment_id": 45330982, "body": "That&#39;s not a &quot;reason&quot;, it&#39;s just an explanation of the problem."}], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1423850285, "last_edit_date": 1423850285, "creation_date": 1423849551, "answer_id": 28505561, "question_id": 28461212, "link": "https://stackoverflow.com/questions/28461212/how-can-i-implement-in-c-a-function-declared-in-a-c-namespace/28505561#28505561", "title": "How can I implement in C a function declared in a C++ namespace?", "body": "<p>You <strong>are</strong> forced to your backup plan (to use a wrapper function) for the following reason: C++ supports overloading of functions, and by that reason you can have different implementations of <code>bar</code> (with different fingerprints, even compatible) while you can have only one implementation in C.  Which of the C++ possibilities would be matched for <code>bar</code> in case you call them from C?  What if you have <code>bar(int)</code> and <code>bar(long)</code> in C++ and you want to call <code>bar(3)</code> from C?</p>\n\n<p>The solution is to have one wrapper <code>extern \"C\"</code> function that calls the appropiate non-C function.  This function can be called from C and you'll get the desired results.</p>\n\n<p>If you look, for example, at the identifier names that the linker manages, you'll see how the compiler mangles identifiers to cope at linking time with overloading.  That does not happen if you declare a function <code>extern \"C\"</code> in C++.</p>\n\n<p>Another reason is that you don't have namespaces in C.  The C function version must be visible at the global namespace level.  You are not able to hide a C calling convention inside a namespace because it is callable from all the C code or you'll be violating the C calling conventions.</p>\n"}], "owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 2, "answer_count": 3, "score": 2, "last_activity_date": 1423850285, "creation_date": 1423677693, "question_id": 28461212, "link": "https://stackoverflow.com/questions/28461212/how-can-i-implement-in-c-a-function-declared-in-a-c-namespace", "title": "How can I implement in C a function declared in a C++ namespace?", "body": "<p>Let's say I have a C++ header file <code>foo.hpp</code>:</p>\n\n<pre><code>namespace foo {\n    int bar(int);\n}\n</code></pre>\n\n<p>I cannot use <code>extern \"C\"</code> because it needs to only be accessible from the namespace <code>foo</code>.</p>\n\n<p>Is there a portable (or relatively portable) way to declare <code>foo::bar</code> in a C file <code>foo.c</code> so that it will link with anyone using <code>foo::bar</code> from C++?</p>\n\n<p>I know that on a particular system with a particular compiler, I can just find out how <code>foo::bar</code> is mangled and do something like this in <code>foo.c</code>:</p>\n\n<pre><code>int ZN3foo3barEi(int x) { /* ... */ }\n</code></pre>\n\n<p>But this is neither portable nor readable.</p>\n"}, {"tags": ["c++", "xcode", "sfml"], "answers": [{"comments": [{"owner": {"reputation": 4327, "user_id": 3549629, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/3aopq.png?s=128&g=1", "display_name": "iProgram", "link": "https://stackoverflow.com/users/3549629/iprogram"}, "edited": false, "score": 0, "creation_date": 1423737460, "post_id": 28463484, "comment_id": 45273815, "body": "Tried this and it does not work. Do you know what else could cause the issue?"}], "owner": {"reputation": 11, "user_id": 4553054, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OCyn2.jpg?s=128&g=1", "display_name": "Emilio Montiel", "link": "https://stackoverflow.com/users/4553054/emilio-montiel"}, "is_accepted": false, "score": -1, "last_activity_date": 1423685174, "creation_date": 1423685174, "answer_id": 28463484, "question_id": 28461176, "link": "https://stackoverflow.com/questions/28461176/c-sfml-receives-close-event-just-after-window-opens/28463484#28463484", "title": "C++ sfml receives close event just after window opens", "body": "<p>Your problem is that you declared the variable Event Event type, you have to change the name of the variable to lowercase.</p>\n\n<p>in this way</p>\n\n<pre><code>#include &lt;SFML/Graphics.hpp&gt;\n#include &lt;iostream&gt;\n\n// Here is a small helper for you ! Have a look.\n#include \"ResourcePath.hpp\"\n\nint main()\n{\nsf::RenderWindow Window(sf::VideoMode(500,400),\"SFML tutorial\");\n/* Or we can do this\n* sf::RenderWindow Window\n* Window.create (sf::VideoMode(800,600),\"SFML tutorial\");\n*/\n\n//Game loop\nwhile(Window.isOpen())\n{\nsf::Event event;\nwhile(Window.pollEvent(event));\n{\n    if(event.type == sf::Event::Closed)\n    {\n        Window.close();\n        std::cout &lt;&lt; \"Close\" &lt;&lt; std::endl;\n\n    }\n}\n} \n\nreturn 0;\n</code></pre>\n\n<p>that way you will not have any problems</p>\n"}, {"comments": [{"owner": {"reputation": 4327, "user_id": 3549629, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/3aopq.png?s=128&g=1", "display_name": "iProgram", "link": "https://stackoverflow.com/users/3549629/iprogram"}, "edited": false, "score": 0, "creation_date": 1423922310, "post_id": 28504237, "comment_id": 45349923, "body": "The tutorial I am using has now said to use switch statements. They probably used if statements so it was easy for us to get used to. I also prefer leaning via videos because if I am reading the docs I tend to get distracted and board. Thanks for the tip though!"}, {"owner": {"reputation": 28, "user_id": 3877674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e46618865c94db502f33e43c2a0e044?s=128&d=identicon&r=PG&f=1", "display_name": "Gor1999", "link": "https://stackoverflow.com/users/3877674/gor1999"}, "reply_to_user": {"reputation": 4327, "user_id": 3549629, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/3aopq.png?s=128&g=1", "display_name": "iProgram", "link": "https://stackoverflow.com/users/3549629/iprogram"}, "edited": false, "score": 1, "creation_date": 1424708846, "post_id": 28504237, "comment_id": 45649880, "body": "@aPyDeveloper Im in the same boat as you. Learning from videos is what i prefer. But if you ever wanna be successful, you will need to read source and documentation. They way i did this is to go into full screen and every time you feel distracted try and refocus your self. Give your self some sort of motivation as well."}, {"owner": {"reputation": 4327, "user_id": 3549629, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/3aopq.png?s=128&g=1", "display_name": "iProgram", "link": "https://stackoverflow.com/users/3549629/iprogram"}, "edited": false, "score": 0, "creation_date": 1424720742, "post_id": 28504237, "comment_id": 45657006, "body": "Thanks for the tip. Will try next time."}], "owner": {"reputation": 28, "user_id": 3877674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e46618865c94db502f33e43c2a0e044?s=128&d=identicon&r=PG&f=1", "display_name": "Gor1999", "link": "https://stackoverflow.com/users/3877674/gor1999"}, "is_accepted": true, "score": 1, "last_activity_date": 1423845067, "creation_date": 1423845067, "answer_id": 28504237, "question_id": 28461176, "link": "https://stackoverflow.com/questions/28461176/c-sfml-receives-close-event-just-after-window-opens/28504237#28504237", "title": "C++ sfml receives close event just after window opens", "body": "<p>From what i have seen, do not use an if statement for checking events, use a switch statement. Also Use a <code>while(window.isOpen())</code> when trying to poll events</p>\n\n<p>Have you read through the tutorials on <a href=\"http://www.sfml-dev.org\" rel=\"nofollow\">http://www.sfml-dev.org</a> ? Because i can guarantee that it is the best source for learning sfml. Use it before using another source.</p>\n"}], "owner": {"reputation": 4327, "user_id": 3549629, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/3aopq.png?s=128&g=1", "display_name": "iProgram", "link": "https://stackoverflow.com/users/3549629/iprogram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 925, "favorite_count": 0, "accepted_answer_id": 28504237, "answer_count": 2, "score": 1, "last_activity_date": 1424265420, "creation_date": 1423677565, "last_edit_date": 1424265420, "question_id": 28461176, "link": "https://stackoverflow.com/questions/28461176/c-sfml-receives-close-event-just-after-window-opens", "title": "C++ sfml receives close event just after window opens", "body": "<p>I am trying to follow a SFML tutorial from this <a href=\"https://www.youtube.com/watch?v=kAbkFY6lwAY\" rel=\"nofollow\">link</a>, however, for some reason my application seems to be caling the close event as soon as my program enters into the event loop.</p>\n\n<p>Here is my code.</p>\n\n<pre><code>#include &lt;SFML/Graphics.hpp&gt;\n#include &lt;iostream&gt;\n\n// Here is a small helper for you ! Have a look.\n#include \"ResourcePath.hpp\"\n\nint main()\n{\nsf::RenderWindow Window(sf::VideoMode(500,400),\"SFML tutorial\");\n/* Or we can do this\n * sf::RenderWindow Window\n * Window.create (sf::VideoMode(800,600),\"SFML tutorial\");\n */\n\n//Game loop\nwhile(Window.isOpen())\n{\n    sf::Event Event;\n    while(Window.pollEvent(Event));\n    {\n        if(Event.type == sf::Event::Closed)\n        {\n            Window.close();\n            std::cout &lt;&lt; \"Close\" &lt;&lt; std::endl;\n\n        }\n    }\n}\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>For some reason as soon as my program enters the event loop it receives a sf::Event::Closed event. I have done some research and this is not because the window is too big for my screen. <br>\nTo fix my issue I have had to ad a int variable <code>canClose</code> to 0 then modify the event loop to this.</p>\n\n<pre><code>if(Event.type == sf::Event::Closed)\n{\n    if(canClose == 1)\n    {\n        Window.close();\n    } else {\n        canClose = 1;\n    }\n}\n</code></pre>\n\n<p>After I do this the window now opens and runs as expected.</p>\n\n<p>P.S this is made using xcode and the SFML template.</p>\n\n<p><strong>Edit:</strong> <br>\n<strong>Just made a new xcode SFML project and removed some code in it to make a empty window and it seems to whork. Code looks exactly the same. This seams strange because it is exactly the same code.</strong></p>\n"}, {"tags": ["c++", "linux", "fifo"], "comments": [{"owner": {"reputation": 4670, "user_id": 731240, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BZhQx.jpg?s=128&g=1", "display_name": "dg99", "link": "https://stackoverflow.com/users/731240/dg99"}, "edited": false, "score": 0, "creation_date": 1423678394, "post_id": 28461135, "comment_id": 45248744, "body": "This is too much code to look through.  See the <a href=\"http://stackoverflow.com/help/mcve\">Help pages</a> for tips on writing a good question."}], "answers": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": true, "score": 3, "last_activity_date": 1423678618, "last_edit_date": 1423678618, "creation_date": 1423677639, "answer_id": 28461195, "question_id": 28461135, "link": "https://stackoverflow.com/questions/28461135/how-send-a-structure-through-fifo/28461195#28461195", "title": "How send a structure through fifo", "body": "<p>you cannot just send memory structures from one program to another. You have to do whats called 'serialization' ie convert the struct into a byte stream that represents the structure. There are many, many serialization techniques: ASN1/ Ber, XML, JSON, Google protocol buffs, roll your own.</p>\n\n<p>Just so you know why this is. The field message in your struct is actually a pointer, when you send this pointer to another program it points to the same address but in the receiver prgram not the sender. That address likely doesnt exist and certainly does not contain the string you had in the sender program.</p>\n"}], "owner": {"reputation": 31, "user_id": 4555930, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46f928156cf9e96529e2ba4b504c88c9?s=128&d=identicon&r=PG&f=1", "display_name": "pucek7", "link": "https://stackoverflow.com/users/4555930/pucek7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 901, "favorite_count": 0, "accepted_answer_id": 28461195, "answer_count": 1, "score": 0, "last_activity_date": 1423678618, "creation_date": 1423677407, "question_id": 28461135, "link": "https://stackoverflow.com/questions/28461135/how-send-a-structure-through-fifo", "title": "How send a structure through fifo", "body": "HI!\n\n<p><p>I am trying to pass whole structure from one program and read it in another using fifo. \nI'm using read and write functions. </p>I had a problem with putting my structure into this functions. When I did it and tried to send and receive I get an error (core dump) or I recived some trash. I dont know exactly, where my problem take place (in receiver or sender). How can I send/receive my structure, or what i have wrong in my code.<p>Here is my code...</p>Receiver</p>\n\n<pre><code>struct data\n{\n    char* message;\n    int size;\n    vector &lt;times&gt; prog;\n};\n\nint if_fifo(char* name)\n{\n    struct stat info;\n    int score = stat(name,&amp;info);\n    if(S_ISFIFO(info.st_mode))\n    {\n        return 1;\n    }\n    else\n    {\n        return 0;\n    }\n}\n\nint fifo_in(char* name)\n{\n    data msg;\n    int pip;\n    pip = open(name, O_RDONLY | O_NONBLOCK);\n    while(1)\n    {\n        int hr = read(pip,&amp;msg,sizeof(msg));\n        if(hr != 0)\n        {\n            cout &lt;&lt; \"Message:   \" &lt;&lt; msg.message &lt;&lt; endl;\n        }\n    }\n    cout &lt;&lt; \"O.K.\" &lt;&lt; endl;\n    return 0;\n}\n\nint main(int argc, char** argv) {\nint c, status_in, status_out;\nchar* input;\nchar* output;\nfloat del;\n\nif(argc &lt; 5)\n{\n    cout &lt;&lt; \"Za malo podanych parametrow\" &lt;&lt; endl;\n    return 1;\n}\nelse\n{\n    while ((c = getopt(argc, argv, \"iod:\")) != -1)\n    {\n        switch (c)\n        {\n        case 'i':\n            input = argv[2];\n            status_in = if_fifo(input);\n            break;\n        case 'o':\n            output = argv[3];\n            status_out = if_fifo(output);\n            break;\n        case 'd':\n            del = atof(argv[4]);\n            break;\n        case '?':\n            printf(\"UKNOWN\");\n        }\n    }\n}\n\nif(status_in == 1)\n{\n    return fifo_in(input);\n}\nelse\n{\n    cout &lt;&lt; \"It isnt fifo!!\" &lt;&lt; endl;\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>And sender:</p>\n\n<pre><code>struct data\n{\n    char* message;\n    int size;\n    vector &lt;times&gt; prog;\n}msg;\n\nint if_fifo(char* name)\n{\n    struct stat info;\n    int score = stat(name,&amp;info);\n    if(S_ISFIFO(info.st_mode))\n    {\n        return 1;\n    }\n    else\n    {\n        return 0;\n    }\n}\n\nint fifo_out(char* name)\n{\n    msg.message = \"To jest to!!\";\n    msg.size = sizeof(msg.message);\n    int pip;\n    pip = open(name, O_WRONLY);\n    if(  pip == -1 )\n    {\n        perror(\"Error: open( ): \");\n        return 1;\n    }\n    write(pip,&amp;msg,sizeof(msg));\n    return 0;\n}\n\nint main(int argc, char** argv) {\n    int c, status_out;\n    char* output;\n\n    if(argc &lt; 3)\n    {\n        cout &lt;&lt; \"Za malo podanych parametrow\" &lt;&lt; endl;\n        return 1;\n    }\n    else\n    {\n        while ((c = getopt(argc, argv, \"o:\")) != -1)\n        {\n            switch (c)\n            {\n                case 'o':\n                    output = argv[2];\n                    status_out = if_fifo(output);\n                    break;\n                case '?':\n                    printf(\"UKNOWN\");\n            }\n        }\n    }\n\n    if(status_out == 1)\n    {\n        return fifo_out(output);\n    }   \n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1423677339, "post_id": 28461022, "comment_id": 45248163, "body": "I don&#39;t have an answer to your question, but note that <code>a = b + complex{1, 2};</code> works as a workaround"}, {"owner": {"reputation": 50917, "user_id": 947836, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9addee65c2a92be93004ad689a7a415?s=128&d=identicon&r=PG&f=1", "display_name": "jrok", "link": "https://stackoverflow.com/users/947836/jrok"}, "edited": false, "score": 1, "creation_date": 1423677555, "post_id": 28461022, "comment_id": 45248301, "body": "It would be nice to include the eror message."}, {"owner": {"reputation": 1309, "user_id": 3495829, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39b722b155ba7bb1288a84c00e11e888?s=128&d=identicon&r=PG&f=1", "display_name": "qeadz", "link": "https://stackoverflow.com/users/3495829/qeadz"}, "edited": false, "score": 0, "creation_date": 1423677575, "post_id": 28461022, "comment_id": 45248317, "body": "look at <a href=\"http://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/list_initialization</a> which shows the contexts in which braced initialization can be used."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1423677803, "post_id": 28461022, "comment_id": 45248438, "body": "The question needs to be asked the other way around. One can argue that nothing is supported unless the standard says it is supported. If you find something in the standard that says it should be supported but the compiler doesn&#39;t support it, then you have to ask why."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1423677891, "post_id": 28461022, "comment_id": 45248483, "body": "I assume that you already know this, but in case that you would like a workaround, here it is: <code>a = b + (complex){1, 2};</code>"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1423678344, "post_id": 28461022, "comment_id": 45248710, "body": "Since I&#39;m not feeling like using my dupehammer to reopen this - the answer is that the grammar for <i>assignment-expression</i> (<i>logical-or-expression assignment-operator initializer-clause</i>) allows for a <i>braced-init-list</i> on the RHS (<i>initializer-clause</i> is either an <i>assignment-expression</i> or a <i>braced-init-list</i>); the grammar for <i>additive-expression</i>s don&#39;t. Compare the grammar productions in [expr.add] and [expr.ass]; <i>initializer-clause</i> is defined in [dcl.init]."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1423678521, "post_id": 28461022, "comment_id": 45248819, "body": "@dasblinkenlight That&#39;s a C99 compound literal, not C++."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1423678606, "post_id": 28461022, "comment_id": 45248852, "body": "@T.C. <a href=\"http://ideone.com/CuOOOF\" rel=\"nofollow noreferrer\">It does the trick in C++, though</a>"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1423678675, "post_id": 28461022, "comment_id": 45248893, "body": "@dasblinkenlight <a href=\"http://coliru.stacked-crooked.com/a/bc2baeb369be6231\" rel=\"nofollow noreferrer\">Not with a sufficiently pedantic compiler</a> :)"}, {"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1423679147, "post_id": 28461022, "comment_id": 45249147, "body": "@T.C. Your comment above was perfect. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 4, "creation_date": 1423677617, "post_id": 28461182, "comment_id": 45248342, "body": "Not being listed in a non-normative note is not normative."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1423677702, "post_id": 28461182, "comment_id": 45248397, "body": "@T.C., Unfortunately, it&#39;s the best I have. I think the more correct answer would be that it is not allowed within any of those individual referenced sections."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1423677725, "post_id": 28461182, "comment_id": 45248409, "body": "@chris The duplicate post answers the OP&#39;s question quite comprehensively IMHO"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1423677765, "post_id": 28461182, "comment_id": 45248422, "body": "@Cyber, Oh snap, I didn&#39;t even see that."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1423677936, "post_id": 28461182, "comment_id": 45248506, "body": "@Cyber I disagree. That question still doesn&#39;t cite anything normative."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1423678005, "post_id": 28461182, "comment_id": 45248542, "body": "@T.C. No, but really the crux of the issue comes down to the grammar, and how to handle parsing commutative operations like this, which is what the answer explains."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1423678201, "post_id": 28461182, "comment_id": 45248628, "body": "@Cyber Yes, the answer to OP&#39;s question is &quot;it&#39;s the grammar&quot;, and so the answer should be quoting the relevant parts of the grammar."}, {"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1423678299, "post_id": 28461182, "comment_id": 45248680, "body": "@T.C. Would you mind to explain what you said above?"}], "owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "is_accepted": true, "score": 2, "last_activity_date": 1423677579, "creation_date": 1423677579, "answer_id": 28461182, "question_id": 28461022, "link": "https://stackoverflow.com/questions/28461022/where-in-the-c-standard-is-a-b-1-2-disallowed-in-the-snippet-below/28461182#28461182", "title": "Where in the C++ Standard is `a = b + {1, 2}` disallowed in the snippet below?", "body": "<p>It is disallowed by not being listed in N3797 \u00a78.5.4 [dcl.init.list]/1 (emphasis mine):</p>\n\n<blockquote>\n  <p>Note: List-initialization\n  can be used  </p>\n  \n  <ul>\n  <li>as the initializer in a variable definition (8.5)</li>\n  <li>as the initializer in a new expression (5.3.4)</li>\n  <li>in a return statement (6.6.3)</li>\n  <li>as a for-range-initializer (6.5)</li>\n  <li>as a function argument (5.2.2)</li>\n  <li>as a subscript (5.2.1)</li>\n  <li>as an argument to a constructor invocation (8.5, 5.2.3)</li>\n  <li>as an initializer for a non-static data member (9.2)</li>\n  <li>in a mem-initializer (12.6.2)</li>\n  <li><strong>on the right-hand side of an assignment (5.17)</strong></li>\n  </ul>\n</blockquote>\n\n<p>The emphasized bullet point corresponds to your <code>a += {1, 3};</code>. There is no point that fits an addition argument.</p>\n"}], "owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "closed_date": 1423677584, "accepted_answer_id": 28461182, "answer_count": 1, "score": 5, "last_activity_date": 1423677579, "creation_date": 1423677088, "question_id": 28461022, "link": "https://stackoverflow.com/questions/28461022/where-in-the-c-standard-is-a-b-1-2-disallowed-in-the-snippet-below", "closed_reason": "Duplicate", "title": "Where in the C++ Standard is `a = b + {1, 2}` disallowed in the snippet below?", "body": "<p>Where in the Standard is <code>a = b + {1, 2}</code> disallowed below?</p>\n\n<pre><code>class complex {\n    double re, im;\npublic:\n    complex(double r, double i) : re{ r }, im{ i } {}\n    complex&amp; operator+=(const complex&amp; other) { re += other.re; im += other.im; return *this; }\n};\n\ninline complex operator+(complex lhs, const complex&amp; rhs)\n{\n    lhs += rhs;\n    return lhs;\n}\n\nint main()\n{\n    complex a{ 1, 1 };\n    complex b{ 2, -3 };\n    a += {1, 3};          // Ok\n    a = b + {1, 2};       // doesn't compile\n}\n</code></pre>\n"}, {"tags": ["c++", "sockets", "octave"], "comments": [{"owner": {"reputation": 1228, "user_id": 995959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXPWG.png?s=128&g=1", "display_name": "gibertoni", "link": "https://stackoverflow.com/users/995959/gibertoni"}, "edited": false, "score": 2, "creation_date": 1423678018, "post_id": 28460982, "comment_id": 45248551, "body": "Octave seems like the &quot;server&quot; which is always listening and waiting for connections. Your code snippet (from &#39;b = accept(s)&#39; to &#39;disconnect(b)&#39; should be in a loop of some sort so that it can keep accepting connections.  Looks like it is executing your script once and then finishing execution."}, {"owner": {"reputation": 532, "user_id": 1125868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea68b48580e664f10518f86293b74f9?s=128&d=identicon&r=PG", "display_name": "sanjayk79", "link": "https://stackoverflow.com/users/1125868/sanjayk79"}, "edited": false, "score": 0, "creation_date": 1423713411, "post_id": 28460982, "comment_id": 45263149, "body": "connection refused is a clear indication that the other end (server here) is not listening. You can verify the same by the following command netstat -an| grep &lt;your port no&gt;"}, {"owner": {"reputation": 7449, "user_id": 3811887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88dcea89bc4be8736da3b890f368a788?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3811887/andy"}, "edited": false, "score": 0, "creation_date": 1423995301, "post_id": 28460982, "comment_id": 45365980, "body": "Does the problem disappear if you wait some minutes and then try to rerun the Octave server side and the clinet? Then thi scould be a problem that SO_REUSEADDR is missing."}, {"owner": {"reputation": 11, "user_id": 4555943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/203a80b27b3b6632cca3de545574ec2f?s=128&d=identicon&r=PG&f=1", "display_name": "Henning86", "link": "https://stackoverflow.com/users/4555943/henning86"}, "edited": false, "score": 0, "creation_date": 1424702050, "post_id": 28460982, "comment_id": 45645515, "body": "the problem is in the bind command of octave. So SO_REUSEADDR should fix it. But where can i add this option?"}], "answers": [{"owner": {"reputation": 7449, "user_id": 3811887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88dcea89bc4be8736da3b890f368a788?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3811887/andy"}, "is_accepted": false, "score": 0, "last_activity_date": 1428844896, "creation_date": 1428844896, "answer_id": 29589947, "question_id": 28460982, "link": "https://stackoverflow.com/questions/28460982/send-data-between-octave-and-c-programm-via-sockets/29589947#29589947", "title": "send data between octave and c++ programm via sockets", "body": "<p>It looks like you fail to bind because the address is already in use. You haven't answered my question but I guess you'll be able to connect if you wait some minutes (check the state with netstat!)</p>\n\n<p>There is a for of octave-sockets <a href=\"https://github.com/octave-de/octave-sockets-enh\" rel=\"nofollow\">https://github.com/octave-de/octave-sockets-enh</a> which adds SOL_SOCKET, SO_DEBUG and SO_REUSEADDR</p>\n"}], "owner": {"reputation": 11, "user_id": 4555943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/203a80b27b3b6632cca3de545574ec2f?s=128&d=identicon&r=PG&f=1", "display_name": "Henning86", "link": "https://stackoverflow.com/users/4555943/henning86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1778, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1428844896, "creation_date": 1423676954, "last_edit_date": 1423678009, "question_id": 28460982, "link": "https://stackoverflow.com/questions/28460982/send-data-between-octave-and-c-programm-via-sockets", "title": "send data between octave and c++ programm via sockets", "body": "<p>I am trying to recv data with octave and send data back to a c++ client. It works for the first time.</p>\n\n<p>But if I execute the script in the same octave session again. The client cannot connect to octave. client outputs: connections refused</p>\n\n<p>Octave script:</p>\n\n<pre><code>s=socket();\nbind(s,12345);\na=listen(s,5)\nb=accept(s)\nlen=255;\ndata=recv(b,len)\nzahl = 10+str2double(char(data))\nsendDATEN = \"Daten sind da\"\nsend(b,sendDATEN,MSG_WAITALL)\ndisconnect(b)\n</code></pre>\n\n<p>The client:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    int sockfd, portno, n;\n    struct sockaddr_in serv_addr;\n    struct hostent *server;\n\n    char buffer[256];\n    if (argc &lt; 3) {\n       fprintf(stderr,\"usage %s hostname port\\n\", argv[0]);\n       exit(0);\n    }\n    portno = atoi(argv[2]);\n    sockfd = socket(AF_INET, SOCK_STREAM, 0);\n    if (sockfd &lt; 0) \n        error(\"ERROR opening socket\");\n    server = gethostbyname(argv[1]);\n    if (server == NULL) {\n        fprintf(stderr,\"ERROR, no such host\\n\");\n        exit(0);\n    }\n    bzero((char *) &amp;serv_addr, sizeof(serv_addr));\n    serv_addr.sin_family = AF_INET;\n    bcopy((char *)server-&gt;h_addr, \n         (char *)&amp;serv_addr.sin_addr.s_addr,\n         server-&gt;h_length);\n    serv_addr.sin_port = htons(portno);\n    if (connect(sockfd,(struct sockaddr *) &amp;serv_addr,sizeof(serv_addr)) &lt; 0) \n        error(\"ERROR connecting\");\n    n = write(sockfd,\"1.11231231\",strlen(\"1.11231231\"));\n    if (n &lt; 0) \n         error(\"ERROR writing to socket\");\n    bzero(buffer,256);\n    n = read(sockfd,buffer,100);\n    if (n &lt; 0) \n         error(\"ERROR reading from socket\");\n    printf(\"%s\\n\",buffer);\n    close(sockfd);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "segmentation-fault"], "comments": [{"owner": {"reputation": 1370, "user_id": 2797066, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/n7U7h.jpg?s=128&g=1", "display_name": "enedil", "link": "https://stackoverflow.com/users/2797066/enedil"}, "edited": false, "score": 1, "creation_date": 1423676853, "post_id": 28460904, "comment_id": 45247889, "body": "Did you try to debug?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1423676898, "post_id": 28460904, "comment_id": 45247921, "body": "What&#39;s <code>dijkstra_pq()</code>?"}, {"owner": {"reputation": 109, "user_id": 4334098, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-uxN94j26zWc/AAAAAAAAAAI/AAAAAAAAANc/Ya-Ce9l6nqM/photo.jpg?sz=128", "display_name": "Schweigerama", "link": "https://stackoverflow.com/users/4334098/schweigerama"}, "edited": false, "score": 0, "creation_date": 1423677199, "post_id": 28460904, "comment_id": 45248091, "body": "just a function i call before the routine to init prio and pred"}, {"owner": {"reputation": 4733, "user_id": 1068497, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c20ce344a5b5edf654c9bdfb61b947?s=128&d=identicon&r=PG", "display_name": "swang", "link": "https://stackoverflow.com/users/1068497/swang"}, "edited": false, "score": 0, "creation_date": 1423677282, "post_id": 28460904, "comment_id": 45248130, "body": "if(d != prio[u]), are you sure u is not out of bound?"}, {"owner": {"reputation": 109, "user_id": 4334098, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-uxN94j26zWc/AAAAAAAAAAI/AAAAAAAAANc/Ya-Ce9l6nqM/photo.jpg?sz=128", "display_name": "Schweigerama", "link": "https://stackoverflow.com/users/4334098/schweigerama"}, "reply_to_user": {"reputation": 4733, "user_id": 1068497, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c20ce344a5b5edf654c9bdfb61b947?s=128&d=identicon&r=PG", "display_name": "swang", "link": "https://stackoverflow.com/users/1068497/swang"}, "edited": false, "score": 0, "creation_date": 1423677560, "post_id": 28460904, "comment_id": 45248308, "body": "@swang yes i am. if i cout u and prio.size() this comes out : -prio.size() : 2 u : 0 prio[u] : 0 -prio.size() : 2 u : 1 prio[u] : 1 -prio.size() : 2 u : 1"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1423678350, "post_id": 28460904, "comment_id": 45248713, "body": "Change every vector <code>operator[]</code> use to <code>vec.at()</code> and run again. You&#39;ll find out in short order where the kitten is getting run-over."}, {"owner": {"reputation": 4733, "user_id": 1068497, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c20ce344a5b5edf654c9bdfb61b947?s=128&d=identicon&r=PG", "display_name": "swang", "link": "https://stackoverflow.com/users/1068497/swang"}, "edited": false, "score": 0, "creation_date": 1423678745, "post_id": 28460904, "comment_id": 45248933, "body": "@Schweigerama: is that all the sequence before it crashes?"}, {"owner": {"reputation": 109, "user_id": 4334098, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-uxN94j26zWc/AAAAAAAAAAI/AAAAAAAAANc/Ya-Ce9l6nqM/photo.jpg?sz=128", "display_name": "Schweigerama", "link": "https://stackoverflow.com/users/4334098/schweigerama"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1423679015, "post_id": 28460904, "comment_id": 45249083, "body": "@WhozCraig i done it, but i dont understand why i should see more... can you give me another hint?"}, {"owner": {"reputation": 109, "user_id": 4334098, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-uxN94j26zWc/AAAAAAAAAAI/AAAAAAAAANc/Ya-Ce9l6nqM/photo.jpg?sz=128", "display_name": "Schweigerama", "link": "https://stackoverflow.com/users/4334098/schweigerama"}, "reply_to_user": {"reputation": 4733, "user_id": 1068497, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c20ce344a5b5edf654c9bdfb61b947?s=128&d=identicon&r=PG", "display_name": "swang", "link": "https://stackoverflow.com/users/1068497/swang"}, "edited": false, "score": 0, "creation_date": 1423679063, "post_id": 28460904, "comment_id": 45249110, "body": "@swang yes, i just use a little graph with 2 vertexes and 2 Edges."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1423682516, "post_id": 28460904, "comment_id": 45251159, "body": "@Schweigerama if your undefined behavior were due to overreaching vector boundaries, either for read or write, that will expose it without relying on a crash to do so."}, {"owner": {"reputation": 109, "user_id": 4334098, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-uxN94j26zWc/AAAAAAAAAAI/AAAAAAAAANc/Ya-Ce9l6nqM/photo.jpg?sz=128", "display_name": "Schweigerama", "link": "https://stackoverflow.com/users/4334098/schweigerama"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1423690470, "post_id": 28460904, "comment_id": 45255535, "body": "@WhozCraig if i run it with vec.at() i get the same errors, what does that mean then?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1423694573, "post_id": 28460904, "comment_id": 45257628, "body": "@Schweigerama same <i>errors</i> (plural) ? The defect describes <i>one</i> error; a segmentation fault at runtime. If the same segmentation fault happens with <code>.at()</code> replacing <b>all</b> unchecked vector <code>operator[]</code> invokes, <i>and</i> you built in debug-bits, then your crash isn&#39;t related to a vector overrun and its something else (algorithm perhaps)."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1423694876, "post_id": 28460904, "comment_id": 45257755, "body": "I wish I had your <code>dijkstra_pq</code> that eventually invokes the function above. Then I could just run it myself and see what gives."}, {"owner": {"reputation": 109, "user_id": 4334098, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-uxN94j26zWc/AAAAAAAAAAI/AAAAAAAAANc/Ya-Ce9l6nqM/photo.jpg?sz=128", "display_name": "Schweigerama", "link": "https://stackoverflow.com/users/4334098/schweigerama"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1423727388, "post_id": 28460904, "comment_id": 45268104, "body": "@WhozCraig its just that: void dijkstra_pq(Graph &amp;g) {     vector&lt;int&gt; prio;     vector&lt;int&gt; pred;      dijkstra_pq_routine(g,0,prio,pred); } and it was singular, sorry"}, {"owner": {"reputation": 109, "user_id": 4334098, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-uxN94j26zWc/AAAAAAAAAAI/AAAAAAAAANc/Ya-Ce9l6nqM/photo.jpg?sz=128", "display_name": "Schweigerama", "link": "https://stackoverflow.com/users/4334098/schweigerama"}, "reply_to_user": {"reputation": 1370, "user_id": 2797066, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/n7U7h.jpg?s=128&g=1", "display_name": "enedil", "link": "https://stackoverflow.com/users/2797066/enedil"}, "edited": false, "score": 0, "creation_date": 1423728902, "post_id": 28460904, "comment_id": 45268838, "body": "@enedil yes i tried, but failed to create a executable that gdb takes, because make dumps the exe after the segment fault pops up!"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1423730982, "post_id": 28460904, "comment_id": 45269891, "body": "<a href=\"http://ideone.com/kev039\" rel=\"nofollow noreferrer\">Cannot Reproduce</a>. Every line of code in that CNR is fro this question (I did add the &quot;finished&quot; output at the end of the suspect function just to exhibit no early exit), so i don&#39;t know what to tell you."}], "owner": {"reputation": 109, "user_id": 4334098, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-uxN94j26zWc/AAAAAAAAAAI/AAAAAAAAANc/Ya-Ce9l6nqM/photo.jpg?sz=128", "display_name": "Schweigerama", "link": "https://stackoverflow.com/users/4334098/schweigerama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423676669, "creation_date": 1423676669, "question_id": 28460904, "link": "https://stackoverflow.com/questions/28460904/dijkstra-with-priority-queue-segmentation-fault", "title": "Dijkstra with Priority Queue, Segmentation fault", "body": "<p>I'm trying to implement Dijkstra with a Priority Queue, but i keep getting this segmentation fault.</p>\n\n<p>My implementation looks like this:</p>\n\n<pre><code>void dijkstra_pq_routine(Graph &amp;g, int s, vector&lt;int&gt; &amp;prio,vector&lt;int&gt; &amp;pred)\n{\n   std::cout &lt;&lt; \"init\" &lt;&lt; std::endl;\n   int n = g.size();\n   prio.assign(n,INT_MAX);\n   prio[s] = 0;\n   pred.assign(n,-1);\n   priority_queue&lt;pii,vector&lt;pii&gt;, greater&lt;pii&gt; &gt; q;\n\n   q.push(make_pair(0,s));\n\n   while(!q.empty())\n   {\n       std::cout &lt;&lt; \"while\" &lt;&lt; std::endl;\n       int d = q.top().first;\n       int u = q.top().second;\n       q.pop();\n       if(d != prio[u])\n       {\n           std::cout &lt;&lt; \"if\" &lt;&lt; std::endl;\n           //continue;\n       }\n       std::cout &lt;&lt; \"before for\" &lt;&lt; std::endl;\n       for(int i = 0;i &lt; (int) g[u].size(); i++)\n       {\n           std::cout &lt;&lt; \"for\" &lt;&lt; std::endl;\n           int v = g[u][i].first;\n           int nprio = prio[u] + g[u][i].second;\n           if(prio[v] &gt; nprio)\n           {\n               prio[v] = nprio;\n               pred[v] = u;\n               q.push(make_pair(nprio,v));\n           }\n      }\n   }\n\n   //int len = returnPathLength(prio,(int)g.size()-1);\n   //return len;\n</code></pre>\n\n<p>}</p>\n\n<p>the Graph I use looks like this:</p>\n\n<pre><code> typedef pair&lt;int, int&gt; pii;\n typedef vector&lt;vector&lt;pii&gt; &gt; Graph;\n</code></pre>\n\n<p>this produces the error:</p>\n\n<pre><code>int main()\n{\n     Graph g(2);\n     g[0].push_back(make_pair(1, 3));\n     g[0].push_back(make_pair(1, 1));\n     dijkstra_pq(g);\n}\n</code></pre>\n\n<p>it seems like the Segmentation Fault occurs before the For loop.\nI hope someone can help me.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "makefile"], "comments": [{"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1423676529, "post_id": 28460836, "comment_id": 45247696, "body": "Isn&#39;t it coming from Qt/qmake world?"}, {"owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1423676727, "post_id": 28460836, "comment_id": 45247823, "body": "I&#39;ve seen it in projects that don&#39;t use anything but g++ and make."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1423677115, "post_id": 28460836, "comment_id": 45248054, "body": "I&#39;ll take qmake back. Looks like it might come from tmake, which was qmake ancestor, and it was generic meta-make tool (like cmake or qmake) a while ago"}, {"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1423681323, "post_id": 28460836, "comment_id": 45250477, "body": "Because they chose to call it that. You could call it &quot;FRED&quot; for all <code>make</code> cares, as long as your compiling rule then also looked like <code>$(FRED) $(FREDFLAGS) -o .....</code>..."}, {"owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "reply_to_user": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1423693271, "post_id": 28460836, "comment_id": 45257035, "body": "@twalberg I know I could \u2014 but in this particular case it&#39;s too widespread and specific to be a coincidence"}], "owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423676751, "creation_date": 1423676408, "last_edit_date": 1423676751, "question_id": 28460836, "link": "https://stackoverflow.com/questions/28460836/why-is-compiler-constant-sometimes-named-sysconf-link-in-c-makefiles", "title": "Why is compiler constant sometimes named &quot;SYSCONF_LINK&quot; in C++ Makefiles?", "body": "<p>I'm just curious what \"SYSCONF_LINK\" means and why people use this constant name instead of \"COMPILER\", \"CC\" or something else like that.</p>\n"}, {"tags": ["c++", "multithreading", "winapi", "mergesort"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1423676378, "post_id": 28460769, "comment_id": 45247606, "body": "I think <a href=\"http://stackoverflow.com/questions/24130307/performance-problems-in-parallel-mergesort-c/24134200#24134200\">reading this</a> may open a few doors and ideas. seriously. take the time."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1423682871, "post_id": 28460769, "comment_id": 45251393, "body": "Apart from the fact that it doesn&#39;t improve performance, there are serious issues with your code. Firstly, it is not indented, doesn&#39;t check for errors, is littered with magic numbers, uses C-style casts unnecessarily. That&#39;s what makes the code nasty to work with. Then, there is no synchronization between threads, which is inviting race conditions. Lastly, you are passing addresses of local variables to other threads and then exit the function, which is probably what&#39;s killing you. BTW: Consider using std::thread, if your compiler supports it!"}], "owner": {"reputation": 1, "user_id": 4093219, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ShJgGhStPNk/AAAAAAAAAAI/AAAAAAAAI0g/SPfSInpp90M/photo.jpg?sz=128", "display_name": "Rickey", "link": "https://stackoverflow.com/users/4093219/rickey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 311, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423676152, "creation_date": 1423676152, "question_id": 28460769, "link": "https://stackoverflow.com/questions/28460769/parallel-merge-sort-useing-beginthreadex-windows-api-in-c", "title": "Parallel merge sort useing _beginthreadex windows API in C++", "body": "<p>I'm trying to implement merge sort using win32 _beginthreadex multiple threads in c++. basically it uses _beginthreadex instead of function call to make recursion in each thread. so it will has as many threads as possible. the while loop after the two _beginthreadex call is to check if the children threads finish there job. But when the program access the array a and b, it gives an error that unable to read the memory, I can't find what the problem is. It seems that in the sorting section in children threads the program try to access invalid memory address that info->b goes to the address 0xcccccccc {???} \nThank you</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;process.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;array&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std;\n\n\nstruct ThreadInfo\n{\n    int* a;\n    int* b;\n    int low;\n    int high;\n    bool run;\n};\n\n\n\n\n\nunsigned __stdcall mergesort(void* x) {\n\nThreadInfo* info = (ThreadInfo*)x;\n\nif ((info-&gt;low) &lt; (info-&gt;high))\n{\n    int pivot = ((info-&gt;low)+(info-&gt;high))/2;\n    ThreadInfo lowInfo;\n    ThreadInfo highInfo;\n    lowInfo.a=info-&gt;a;\n    lowInfo.low=info-&gt;low;\n    lowInfo.high=pivot;\n    lowInfo.run=true;\n    highInfo.b=info-&gt;b;\n    highInfo.low=pivot+1;\n    highInfo.high=info-&gt;high;\n    highInfo.run=true;\n    //HANDLE myhandlerUp, myhandlerDown;\n\n\n    //creat sub-thread\n    _beginthreadex(NULL, 0, mergesort, &amp;lowInfo, 0, 0);\n    //WaitForSingleObject(myhandlerUp,INFINITE);\n    _beginthreadex(NULL, 0, mergesort, &amp;highInfo, 0, 0);\n    //WaitForSingleObject(myhandlerDown,INFINITE);\n    //check if any child threads are working \n\n\n\n    bool anyRun = true;\n    while (anyRun)\n    {\n        anyRun = false;\n        anyRun = lowInfo.run || highInfo.run;\n\n    }\n\n    //doing merge sort\n    int h,i,j,k,low, high;\n    low = info-&gt;low;\n    high = info-&gt;high;\n    h=low;\n    i=low;\n    j=pivot+1;\n    while((h&lt;=pivot)&amp;&amp;(j&lt;=high))\n     {\n\n         if(info-&gt;a[h]&lt;=info-&gt;a[j])\n         {\n             info-&gt;b[i]=info-&gt;a[h];\n             h++;\n         }\n         else\n         {\n             info-&gt;b[i]=info-&gt;a[j];\n             j++;\n          }\n          i++;\n     }\n\n\n    if(h&gt;pivot)\n    {\n        for(k=j; k&lt;=high; k++)\n        {\n            info-&gt;b[i]=info-&gt;a[k];\n            i++;\n        }\n     }\n\n\n    else\n    {\n        for(k=h; k&lt;=pivot; k++)\n           {\n               info-&gt;b[i]=info-&gt;a[k];\n               i++;\n           }\n    }\n\n        for(k=low; k&lt;=high; k++) info-&gt;a[k]=info-&gt;b[k];\n\n    }\n\n\n    info-&gt;run = false;\n    return 0;\n\n}\n\nvoid main()\n{\n\nThreadInfo info;\nint inputArr[12] = {12,10,43,23,-78,45,123,56,98,41,90,24};\n\n\nint copiedArr[12]={0,0,0,0,0,0,0,0,0,0,0,0};\ninfo.a=inputArr;\ninfo.b=copiedArr;\n\nfor(int i=0; i&lt;12; i++)\ncout&lt;&lt;info.a[i]&lt;&lt;\" \";\ncout&lt;&lt;endl;\n\n\ninfo.low=0;\ninfo.high=(11);\ninfo.run=true;\n_beginthreadex(NULL, 0, mergesort, &amp;info, 0, 0);\n\n\n\nbool finish = info.run;\nwhile(finish){\n    cout&lt;&lt;\"Running....\"&lt;&lt;endl;\n    Sleep(1000);\n}\n\n\n\ncout&lt;&lt;\"After run the result is \"&lt;&lt;endl;\nfor(int i=0; i&lt;12; i++)\n    cout&lt;&lt;inputArr[i]&lt;&lt;\" \";\ncout&lt;&lt;endl;\n\ngetchar();\n\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1423676370, "post_id": 28460759, "comment_id": 45247600, "body": "Likely, you need no copy constructor or assignment operator for your iterator (If so, you might have a questionable design). You might provide an example."}, {"owner": {"reputation": 328, "user_id": 2205245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4af95bb9b7fef044a7ab9b87c3f6ef43?s=128&d=identicon&r=PG", "display_name": "Tristan Bourvon", "link": "https://stackoverflow.com/users/2205245/tristan-bourvon"}, "edited": false, "score": 0, "creation_date": 1423677870, "post_id": 28460759, "comment_id": 45248468, "body": "@DieterL&#252;cking I actually don&#39;t need one it seems, thank you for the remark."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1423676501, "post_id": 28460799, "comment_id": 45247682, "body": "@DieterL&#252;cking <code>foobar()</code> is a function not a constructor."}], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1423676259, "creation_date": 1423676259, "answer_id": 28460799, "question_id": 28460759, "link": "https://stackoverflow.com/questions/28460759/implementing-an-iterator-copy-constructor/28460799#28460799", "title": "Implementing an iterator copy constructor", "body": "<p>All member functions of a class have access to the data members of the class.  This also applies to different objects of the same type.</p>\n\n<pre><code>class Foo()\n{\nprivate: \n    int bar;\npublic:\n    void foobar(Foo &amp; different) { bar = different.bar; }\n};\n</code></pre>\n"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1423676283, "creation_date": 1423676283, "answer_id": 28460808, "question_id": 28460759, "link": "https://stackoverflow.com/questions/28460759/implementing-an-iterator-copy-constructor/28460808#28460808", "title": "Implementing an iterator copy constructor", "body": "<p>Since you define a copy constructor for an iterator inside the implementation of the iterator itself, there is no need to make the hidden pointer accessible, with or without an accessor: the copy constructor will have access to it even if it is private, so there's nothing to worry about:</p>\n\n<pre><code>template &lt;class T&gt;\nclass MyIter {\n    T *private_ptr;\npublic:\n    MyIter(const MyIter&lt;T&gt; &amp;other) : private_ptr(other.private_ptr) {}\n    ... // More constructors and member functions\n};\n</code></pre>\n"}], "owner": {"reputation": 328, "user_id": 2205245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4af95bb9b7fef044a7ab9b87c3f6ef43?s=128&d=identicon&r=PG", "display_name": "Tristan Bourvon", "link": "https://stackoverflow.com/users/2205245/tristan-bourvon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2405, "favorite_count": 0, "accepted_answer_id": 28460808, "answer_count": 2, "score": 1, "last_activity_date": 1423676283, "creation_date": 1423676095, "question_id": 28460759, "link": "https://stackoverflow.com/questions/28460759/implementing-an-iterator-copy-constructor", "title": "Implementing an iterator copy constructor", "body": "<p>How can I properly implement a copy constructor for my iterator, knowing that the pointer to the data object is private? Do I need to create an accessor for this pointer? Isn't this a bad thing?</p>\n"}, {"tags": ["c++", "c++11", "gcc", "gcc4.7"], "comments": [{"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 1, "creation_date": 1423675909, "post_id": 28460671, "comment_id": 45247319, "body": "<a href=\"http://coliru.stacked-crooked.com/a/4453e743f0912a40\" rel=\"nofollow noreferrer\">Works fine with a newer GCC</a>, why are you still using 4.7?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 3, "creation_date": 1423676003, "post_id": 28460671, "comment_id": 45247382, "body": "Not sure what to say other than &quot;gcc 4.7 has limited C++11 support&quot;?"}, {"owner": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 2, "creation_date": 1423676136, "post_id": 28460671, "comment_id": 45247453, "body": "<code>Not on the below test example, but on a more complicated problem</code>: so what&#39;s the point of the example?"}, {"owner": {"reputation": 53, "user_id": 1983956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e038a68798a4f2ef2d5d04001afa656?s=128&d=identicon&r=PG", "display_name": "jeebee", "link": "https://stackoverflow.com/users/1983956/jeebee"}, "edited": false, "score": 0, "creation_date": 1423676152, "post_id": 28460671, "comment_id": 45247466, "body": "That&#39;s a machine not under my control. On my machine I have 4.9.2 which seems to work fine indeed. Note the example program worked on 4.7.2 as well, I failed to provide a good example, but hoped somebody could figure it out, e.g., from the compile error above."}, {"owner": {"reputation": 53, "user_id": 1983956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e038a68798a4f2ef2d5d04001afa656?s=128&d=identicon&r=PG", "display_name": "jeebee", "link": "https://stackoverflow.com/users/1983956/jeebee"}, "reply_to_user": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1423676199, "post_id": 28460671, "comment_id": 45247495, "body": "@AndyProwl it&#39;s the closest thing I could come up with."}, {"owner": {"reputation": 2850, "user_id": 42059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39356a03a418d3e4c53aafcfe11a7cab?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/42059/sam"}, "edited": false, "score": 0, "creation_date": 1423676250, "post_id": 28460671, "comment_id": 45247528, "body": "I up-voted this because knowing /why/ there is a failure is important, even if the solution may be, &quot;upgrade.&quot;"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1423676254, "post_id": 28460671, "comment_id": 45247532, "body": "@jeebee Figure <i>what</i> out, exactly?  You&#39;re saying that a machine not under your control has no compiler with good C++11 support.  I&#39;m not sure how we can help."}, {"owner": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 2, "creation_date": 1423676385, "post_id": 28460671, "comment_id": 45247612, "body": "Voted to close. Without seeing the code that actually causes the problem, giving answers is hardly possible; the best we can do is to formulate conjectures."}, {"owner": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "edited": false, "score": 0, "creation_date": 1423676427, "post_id": 28460671, "comment_id": 45247638, "body": "Additionally, this works with GCC 4.7.2 (Debian 4.7.2-5)..."}, {"owner": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1423676725, "post_id": 28460671, "comment_id": 45247818, "body": "@jeebee: Does the original code involve templates? In particular, is <code>test</code> a class template?"}, {"owner": {"reputation": 53, "user_id": 1983956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e038a68798a4f2ef2d5d04001afa656?s=128&d=identicon&r=PG", "display_name": "jeebee", "link": "https://stackoverflow.com/users/1983956/jeebee"}, "reply_to_user": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1423676913, "post_id": 28460671, "comment_id": 45247934, "body": "@AndyProwl: yes, test is a class template. I didn&#39;t see why that would be important, but I hope you&#39;ll tell me?"}, {"owner": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1423677066, "post_id": 28460671, "comment_id": 45248028, "body": "@jeebee: My wild guess is that you have an issue with dependent names and 2-phase lookup - although that would not explain why the exact same code compiles on 4.9.2, since 4.7.2 does implement 2-phase look correctly. In the real code, is <code>v</code> a data member of some class <code>test</code> inherits from, rather than a member of <code>test</code> itself?"}, {"owner": {"reputation": 53, "user_id": 1983956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e038a68798a4f2ef2d5d04001afa656?s=128&d=identicon&r=PG", "display_name": "jeebee", "link": "https://stackoverflow.com/users/1983956/jeebee"}, "reply_to_user": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1423677110, "post_id": 28460671, "comment_id": 45248053, "body": "@AndyProwl: wow, thanks! changing class test to template&lt;typename T&gt; class test and using something like test&lt;int&gt; indeed reproduces my issue!"}, {"owner": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "edited": false, "score": 0, "creation_date": 1423677141, "post_id": 28460671, "comment_id": 45248065, "body": "@jeebee I can&#39;t reproduce this (even with gcc 4.6.3) it works for me. Could you try annotating the lamba as mutable: <code>[this] (aggregate&amp; a) mutable { ... }</code>?"}, {"owner": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1423677451, "post_id": 28460671, "comment_id": 45248222, "body": "@jeebee: If you&#39;re referring to the example you posted in the question, that change should not be enough to reproduce the problem."}, {"owner": {"reputation": 53, "user_id": 1983956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e038a68798a4f2ef2d5d04001afa656?s=128&d=identicon&r=PG", "display_name": "jeebee", "link": "https://stackoverflow.com/users/1983956/jeebee"}, "reply_to_user": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1423677715, "post_id": 28460671, "comment_id": 45248402, "body": "@AndyProwl: well, my updated example above gives the exact compile error shown below it. And making the suggested change makes it compile... Maybe something else is relevant in my environment, not sure about that."}, {"owner": {"reputation": 53, "user_id": 1983956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e038a68798a4f2ef2d5d04001afa656?s=128&d=identicon&r=PG", "display_name": "jeebee", "link": "https://stackoverflow.com/users/1983956/jeebee"}, "reply_to_user": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "edited": false, "score": 0, "creation_date": 1423677796, "post_id": 28460671, "comment_id": 45248435, "body": "@jepio: Changing the lambda to be mutable also makes it compile without any warnings or errors (without having to insert the this-&gt;)"}, {"owner": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1423677979, "post_id": 28460671, "comment_id": 45248526, "body": "@jeebee: The latest example you posted compiles for me on 4.7.3 as well as on 4.6.4. There&#39;s no reason to believe it wouldn&#39;t compile on 4.7.2. There&#39;s definitely something you are not showing."}, {"owner": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1423678071, "post_id": 28460671, "comment_id": 45248570, "body": "In particular, the error message shows that the compiler is expecting to find a <code>&#39;std::vector::push_back(aggregate&amp;) const</code> member function, which means you are calling <code>push_back</code> on a <code>const</code> vector. I assume the vector is <code>const</code> because this happens inside a <code>const</code> member function, but in your example, that&#39;s not the case (it happens in the constructor)."}, {"owner": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "edited": false, "score": 0, "creation_date": 1423678334, "post_id": 28460671, "comment_id": 45248706, "body": "@jeebee So the explanation would be that <code>v</code> accessed through a <code>const test *</code>  (as <code>this</code> could be in the lambda) becomes <code>const</code> itself and hence can&#39;t be converted to <code>vector&lt;aggregate&gt;</code>. Changing lambda to mutable removes the <code>const</code> from <code>this</code> and makes it work. No clue why this depends on gcc version. You really <b>should</b> post a working (erroneous) example! There&#39;s no excuse for not posting one, especially not <i>i&#39;m not allowed</i>. Extract what&#39;s important to reproduce and post."}, {"owner": {"reputation": 53, "user_id": 1983956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e038a68798a4f2ef2d5d04001afa656?s=128&d=identicon&r=PG", "display_name": "jeebee", "link": "https://stackoverflow.com/users/1983956/jeebee"}, "reply_to_user": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1423678437, "post_id": 28460671, "comment_id": 45248772, "body": "@AndyProwl: I promise I&#39;m showing you all the code in the update example above ... there&#39;s nothing else ..."}, {"owner": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1423678589, "post_id": 28460671, "comment_id": 45248843, "body": "@jeebee: As I wrote, I took your example, gave it to GCC 4.6.4 and 4.7.3, and it compiles without problems. It&#39;s hard for me to believe GCC 4.7.2 rejects it. The error, in particular, shows you&#39;re trying to call <code>push_back()</code> on a constant vector. That happens nowhere in the code you posted."}, {"owner": {"reputation": 53, "user_id": 1983956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e038a68798a4f2ef2d5d04001afa656?s=128&d=identicon&r=PG", "display_name": "jeebee", "link": "https://stackoverflow.com/users/1983956/jeebee"}, "reply_to_user": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1423678781, "post_id": 28460671, "comment_id": 45248950, "body": "@AndyProwl: This is my compiler:     $ g++ --version     g++ (GCC) 4.7.2 20120921 (Red Hat 4.7.2-2) Copyright (C) 2012 Free Software Foundation, Inc. This is free software; see the source for copying conditions.  There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."}, {"owner": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1423678841, "post_id": 28460671, "comment_id": 45248981, "body": "@jeebee: Focus on this: &quot;<i>The error, in particular, shows you&#39;re trying to call <code>push_back()</code> on a constant vector. That happens nowhere in the code you posted.</i>&quot;"}, {"owner": {"reputation": 53, "user_id": 1983956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e038a68798a4f2ef2d5d04001afa656?s=128&d=identicon&r=PG", "display_name": "jeebee", "link": "https://stackoverflow.com/users/1983956/jeebee"}, "reply_to_user": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1423678933, "post_id": 28460671, "comment_id": 45249037, "body": "@AndyProwl: Yes, that seems to be the missing part :)"}, {"owner": {"reputation": 114176, "user_id": 1932150, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bgNyH.jpg?s=128&g=1", "display_name": "Andy Prowl", "link": "https://stackoverflow.com/users/1932150/andy-prowl"}, "edited": false, "score": 0, "creation_date": 1423679147, "post_id": 28460671, "comment_id": 45249148, "body": "@jeebee: Well, how about providing that part then? :P"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1423684445, "post_id": 28460671, "comment_id": 45252318, "body": "<i>&quot;I get a compilation error. Not on the below test example, but on a more complicated problem. I&#39;m, however, not allowed to post that here, and unable to see what exactly is different.&quot;</i> How would <i>we</i> be able to, then??"}, {"owner": {"reputation": 53, "user_id": 1983956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e038a68798a4f2ef2d5d04001afa656?s=128&d=identicon&r=PG", "display_name": "jeebee", "link": "https://stackoverflow.com/users/1983956/jeebee"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1423685372, "post_id": 28460671, "comment_id": 45252815, "body": "@LightnessRacesinOrbit: as you could have read further on, later somebody enabled me to construct an example that does yield the compilation error. Now only we need somebody to confirm this gcc (Red Hat 4.7.2-2). I searched a few nice online c++ compile sites, but none of them included my gcc version."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1423736047, "post_id": 28460671, "comment_id": 45272907, "body": "I&#39;m trying to point out a flaw in your logic that hopefully will aid you in posting next time :)"}], "answers": [{"comments": [{"owner": {"reputation": 2850, "user_id": 42059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39356a03a418d3e4c53aafcfe11a7cab?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/42059/sam"}, "reply_to_user": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 1, "creation_date": 1423676291, "post_id": 28460756, "comment_id": 45247561, "body": "It&#39;s explicit in the error message from the compiler. It&#39;s implied by the variable&#39;s use in the code as part of the lambda."}, {"owner": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "edited": false, "score": 0, "creation_date": 1423676491, "post_id": 28460756, "comment_id": 45247675, "body": "On the cxx0x status page you link to it says that rvalue references are supported."}, {"owner": {"reputation": 2850, "user_id": 42059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39356a03a418d3e4c53aafcfe11a7cab?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/42059/sam"}, "edited": false, "score": 0, "creation_date": 1423676507, "post_id": 28460756, "comment_id": 45247687, "body": "So educate instead of blind downvoting."}, {"owner": {"reputation": 53, "user_id": 1983956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e038a68798a4f2ef2d5d04001afa656?s=128&d=identicon&r=PG", "display_name": "jeebee", "link": "https://stackoverflow.com/users/1983956/jeebee"}, "edited": false, "score": 0, "creation_date": 1423676616, "post_id": 28460756, "comment_id": 45247753, "body": "Aaah, thanks, that was very helpful. I&#39;m going to try to update the example above."}, {"owner": {"reputation": 2850, "user_id": 42059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39356a03a418d3e4c53aafcfe11a7cab?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/42059/sam"}, "edited": false, "score": 0, "creation_date": 1423676727, "post_id": 28460756, "comment_id": 45247824, "body": "You may want to consider posting as a different question. The downvote fairies seem to like everything on this post."}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 1, "creation_date": 1423677071, "post_id": 28460756, "comment_id": 45248031, "body": "There&#39;s nothing to elucidate, just read the error... <code>no known conversion for implicit &#39;this&#39; parameter from &#39;const std::vector&lt;aggregate&gt;*&#39; to &#39;std::vector&lt;aggregate&gt;*&#39;</code>. Errors following that are irrelevant, and error converting <code>T</code> to <code>T&amp;&amp;</code> is nonsensical to begin with."}, {"owner": {"reputation": 2850, "user_id": 42059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39356a03a418d3e4c53aafcfe11a7cab?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/42059/sam"}, "edited": false, "score": 0, "creation_date": 1423686644, "post_id": 28460756, "comment_id": 45253496, "body": "T&amp;&amp; is not &quot;nonsensical&quot; in a C++11 codebase, though. (For reference: <a href=\"http://en.cppreference.com/w/cpp/language/move_operator\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/move_operator</a>). If GCC 4.7 does have weaknesses in Rvalues, that seems a pretty reasonable reading of the error message. If I&#39;ve missed something, by all means, post."}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 1, "creation_date": 1423688725, "post_id": 28460756, "comment_id": 45254623, "body": "I didn&#39;t say <code>T&amp;&amp;</code> was nonsensical, I said getting an error converting a <code>T</code> to a <code>T&amp;&amp;</code> is nonsensical (when there&#39;s another overload taking a <code>T const&amp;</code>."}, {"owner": {"reputation": 2850, "user_id": 42059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39356a03a418d3e4c53aafcfe11a7cab?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/42059/sam"}, "edited": false, "score": 0, "creation_date": 1423699163, "post_id": 28460756, "comment_id": 45259402, "body": "T was not a const, so a T&amp; const is not applicable. I think we should drop this."}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1423775439, "post_id": 28460756, "comment_id": 45297380, "body": "<code>const&amp;</code> can bind to <i>any</i> non-<code>volatile</code> object, rvalue or lvalue, const or non-const. Dropping it is not helpful for readers who may be misled by your incorrect answer."}, {"owner": {"reputation": 2850, "user_id": 42059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39356a03a418d3e4c53aafcfe11a7cab?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/42059/sam"}, "reply_to_user": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1423808970, "post_id": 28460756, "comment_id": 45307722, "body": "<a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=54277\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=54277</a>  Against my better judgement, I&#39;m going to continue this. The above bug may be the cause.  I do not appreciate that you, @ildjarn, have only contributed by taking shots. I would appreciate a modicum of professionalism and some effort to give answers."}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1423809597, "post_id": 28460756, "comment_id": 45307931, "body": "Based on our relative reputation scores, I don&#39;t know what would you to believe I don&#39;t give answers. However <i>you</i> do not take constructive criticism at all, choosing to deflect instead of taking an opportunity to learn \u2013 your loss."}, {"owner": {"reputation": 53, "user_id": 1983956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e038a68798a4f2ef2d5d04001afa656?s=128&d=identicon&r=PG", "display_name": "jeebee", "link": "https://stackoverflow.com/users/1983956/jeebee"}, "edited": false, "score": 0, "creation_date": 1423835505, "post_id": 28460756, "comment_id": 45321389, "body": "Hmm, thanks @sam, as far as I -- as quite a c++ beginner -- can understand, this seems to explain what I&#39;m seeing. Would you mind posting this as an answer so that I can accept it?"}], "owner": {"reputation": 2850, "user_id": 42059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39356a03a418d3e4c53aafcfe11a7cab?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/42059/sam"}, "is_accepted": false, "score": -3, "last_activity_date": 1423676082, "creation_date": 1423676082, "answer_id": 28460756, "question_id": 28460671, "link": "https://stackoverflow.com/questions/28460671/gcc-4-7-2-compile-error-on-a-lambda-capturing-this/28460756#28460756", "title": "gcc 4.7.2 compile error on a lambda capturing this", "body": "<p>I'll bet it's the RValue reference to <code>aggregate</code>. Notice it is of type <code>aggregate&amp;&amp;</code> not <code>aggregate&amp;</code> and that is not supported in gcc 4.7.</p>\n\n<p><a href=\"https://gcc.gnu.org/gcc-4.7/cxx0x_status.html\" rel=\"nofollow\">https://gcc.gnu.org/gcc-4.7/cxx0x_status.html</a></p>\n\n<pre><code> note: no known conversion for argument 1 from \n'aggregate' to 'std::vector::value_type&amp;&amp; {aka aggregate&amp;&amp;}'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 1983956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e038a68798a4f2ef2d5d04001afa656?s=128&d=identicon&r=PG", "display_name": "jeebee", "link": "https://stackoverflow.com/users/1983956/jeebee"}, "edited": false, "score": 0, "creation_date": 1424000817, "post_id": 28501710, "comment_id": 45367186, "body": "Thanks sam, and also the others for all insights, I did learn something here. There was quite some criticism for posting here without a concrete example, but in the end (thanks to @andyprowl for the template suggestion) I couldn&#39;t have figured this out without all of you."}], "owner": {"reputation": 2850, "user_id": 42059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39356a03a418d3e4c53aafcfe11a7cab?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/42059/sam"}, "is_accepted": true, "score": 1, "last_activity_date": 1423837432, "creation_date": 1423837432, "answer_id": 28501710, "question_id": 28460671, "link": "https://stackoverflow.com/questions/28460671/gcc-4-7-2-compile-error-on-a-lambda-capturing-this/28501710#28501710", "title": "gcc 4.7.2 compile error on a lambda capturing this", "body": "<p>Might the above be a manifestation of this bug in GCC 4.7.2?</p>\n\n<p><a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=54277\" rel=\"nofollow\">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=54277</a></p>\n\n<blockquote>\n  <p>Bug 54277 - [4.7/4.8 regression] Template class member referred to with implicit this inside lambda is incorrectly const-qualified </p>\n</blockquote>\n\n<p>This answer was reached in a comment thread and is being pulled up here for consideration as a possible answer. If nothing else, it's the closest I've found that explains what's going on and why this doesn't occur in the newer compilers.</p>\n"}], "owner": {"reputation": 53, "user_id": 1983956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e038a68798a4f2ef2d5d04001afa656?s=128&d=identicon&r=PG", "display_name": "jeebee", "link": "https://stackoverflow.com/users/1983956/jeebee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 834, "favorite_count": 0, "accepted_answer_id": 28501710, "answer_count": 2, "score": -4, "last_activity_date": 1423837432, "creation_date": 1423675796, "last_edit_date": 1423684399, "question_id": 28460671, "link": "https://stackoverflow.com/questions/28460671/gcc-4-7-2-compile-error-on-a-lambda-capturing-this", "title": "gcc 4.7.2 compile error on a lambda capturing this", "body": "<p>I have kind of a weird issue and while trying to create a small example to post here on stackoverflow, I failed to reproduce. Hopefully, this will still ring a bell to somebody, or somebody has a good idea to dig further...</p>\n\n<p>On my Mac, the below code compiles fine with gcc 4.9.2. I'm using <code>g++ -std=c++11 test.cpp</code>. On some other Linux/Fedora machine with gcc 4.7.2, I get a compilation error. Not on the below test example, but on a more complicated problem. I'm, however, not allowed to post that here, and unable to see what exactly is different.</p>\n\n<p>I did, however, find a way to make it compile, by simply trying lots of things. I hope somebody might see what is wrong from that hint.\nThe way I could get my program to compile was to change the lambda body from <code>v.push_back...</code> into <code>this-&gt;v.push_back...</code></p>\n\n<p>Any idea why that could be??</p>\n\n<p>The compilation error I'm seeing is:</p>\n\n<blockquote>\n  <p>/usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_vector.h:881:7:\n  note: <code>void std::vector&lt;_Tp, _Alloc&gt;::push_back(const value_type&amp;)</code>\n  [with <code>_Tp</code> = <code>aggregate</code>; <code>_Alloc = std::allocator&lt;aggregate&gt;</code>;\n  <code>std::vector&lt;_Tp, _Alloc&gt;::value_type</code> = <code>aggregate</code>] &lt;near match&gt;<br>\n  /usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_vector.h:881:7:\n  note:   no known conversion for implicit <code>'this'</code> parameter from <code>'const std::vector&lt;aggregate&gt;*'</code> to <code>'std::vector&lt;aggregate&gt;*'</code><br>\n  /usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_vector.h:899:7:\n  note: <code>void std::vector&lt;_Tp, _Alloc&gt;::push_back(std::vector&lt;_Tp,\n  _Alloc&gt;::value_type&amp;&amp;</code>) [with <code>_Tp</code> = <code>aggregate</code>; <code>_Alloc</code> = <code>std::allocator&lt;aggregate&gt;</code>; <code>std::vector&lt;_Tp, _Alloc&gt;::value_type</code> =\n  <code>aggregate</code>] &lt;near match&gt;<br>\n  /usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_vector.h:899:7:\n  note:   no known conversion for argument 1 from <code>'aggregate'</code> to\n  <code>'std::vector&lt;aggregate&gt;::value_type&amp;&amp;</code> {aka <code>aggregate&amp;&amp;</code>}'</p>\n</blockquote>\n\n<p>The following fails to compile on the Linux machine with gcc 4.7.2:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nstruct aggregate {\n    int foo;\n    char bar[2];\n};\n\ntemplate&lt;typename T&gt;\nclass test {\nprivate:\n    std::vector&lt;aggregate&gt; v;\n    std::function&lt;void(aggregate&amp;)&gt; lambda;\npublic:\n    test() :\n        lambda([this] (aggregate&amp; a) { v.push_back(a); })\n    {\n        v.reserve(8);\n    }\n\n    void execute() {\n        aggregate a{1, \"x\"};\n        lambda(a);\n    }\n};\n\nint main() {\n    test&lt;int&gt; t;\n    t.execute();\n}\n</code></pre>\n\n<blockquote>\n  <p>$ g++ -std=c++11 test.cpp test.cpp<br>\n  In lambda function:<br>\n  test.cpp:17:53: error: no matching function for call to\n  <code>'std::vector&lt;aggregate&gt;::push_back(aggregate&amp;) const'</code><br>\n  test.cpp:17:53: note: candidates are:<br>\n  In file included from /usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/vector:65:0,\n                   from test.cpp:1:<br>\n  /usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_vector.h:881:7:\n  note: <code>void std::vector&lt;_Tp, _Alloc&gt;::push_back(const value_type&amp;)</code>\n  [with <code>_Tp</code> = <code>aggregate</code>; <code>_Alloc</code> = <code>std::allocator&lt;aggregate&gt;</code>;\n  <code>std::vector&lt;_Tp, _Alloc&gt;::value_type</code> = <code>aggregate</code>] &lt;near match&gt;<br>\n  /usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_vector.h:881:7:\n  note:   no known conversion for implicit <code>'this'</code> parameter from <code>'const std::vector&lt;aggregate&gt;*'</code> to <code>'std::vector&lt;aggregate&gt;*'</code><br>\n  /usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_vector.h:899:7:\n  note: <code>void std::vector&lt;_Tp, _Alloc&gt;::push_back(std::vector&lt;_Tp, _Alloc&gt;::value_type&amp;&amp;)</code> [with <code>_Tp</code> = <code>aggregate</code>; <code>_Alloc</code> = <code>std::allocator&lt;aggregate&gt;</code>; <code>std::vector&lt;_Tp, _Alloc&gt;::value_type</code> = <code>aggregate</code>] &lt;near match&gt;<br>\n  /usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../../include/c++/4.7.2/bits/stl_vector.h:899:7:\n  note:   no known conversion for argument 1 from <code>'aggregate'</code> to <code>'std::vector&lt;aggregate&gt;::value_type&amp;&amp;</code> {aka <code>aggregate&amp;&amp;</code>}'</p>\n</blockquote>\n\n<p>But works fine after changing <code>v.push_back...</code> into <code>this-&gt;v.push_back...</code></p>\n"}, {"tags": ["c++", "compiler-errors", "codeblocks", "memory-address", "void-pointers"], "comments": [{"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 1, "creation_date": 1423675296, "post_id": 28460449, "comment_id": 45246948, "body": "For the same reason that <code>void y; y = 32;</code> doesn&#39;t compile: the compiler doesn&#39;t know how to store something into the incomplete type <code>void</code>.  What if <code>x</code> pointed to a <code>short</code> or a <code>long long</code>?"}, {"owner": {"reputation": 458, "user_id": 2871478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076a7e35328360385bd9dc150bb49972?s=128&d=identicon&r=PG&f=1", "display_name": "chrizke", "link": "https://stackoverflow.com/users/2871478/chrizke"}, "edited": false, "score": 0, "creation_date": 1423675933, "post_id": 28460449, "comment_id": 45247337, "body": "This also depends on your compiler. int* x = 42; yields an error with LLVM."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 458, "user_id": 2871478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076a7e35328360385bd9dc150bb49972?s=128&d=identicon&r=PG&f=1", "display_name": "chrizke", "link": "https://stackoverflow.com/users/2871478/chrizke"}, "edited": false, "score": 0, "creation_date": 1423676566, "post_id": 28460449, "comment_id": 45247717, "body": "@chrizke how is your code related to the question?"}, {"owner": {"reputation": 458, "user_id": 2871478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076a7e35328360385bd9dc150bb49972?s=128&d=identicon&r=PG&f=1", "display_name": "chrizke", "link": "https://stackoverflow.com/users/2871478/chrizke"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1423678779, "post_id": 28460449, "comment_id": 45248948, "body": "@Slava, you&#39;re right. I missed the * left to the x in *x=23;."}], "answers": [{"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1423675577, "post_id": 28460503, "comment_id": 45247117, "body": "Slightly more restrictive, the address of an object or <code>NULL</code>, not of a function."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1423676701, "post_id": 28460503, "comment_id": 45247801, "body": "@Deduplicator: Or a function, if the compiler allows that conditionally-supported conversion."}], "owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "is_accepted": true, "score": 9, "last_activity_date": 1423675297, "creation_date": 1423675297, "answer_id": 28460503, "question_id": 28460449, "link": "https://stackoverflow.com/questions/28460449/in-c-im-getting-a-message-error-void-is-not-a-pointer-to-object-type/28460503#28460503", "title": "In C++, I&#39;m getting a message &quot;error: &#39;void*&#39; is not a pointer-to-object type&quot;", "body": "<p>As the compiler message says, <code>void*</code> is not a pointer to object type. What this means is that you cannot do <em>anything</em> with <code>void*</code>, besides explicitly converting it back to another pointer type. A <code>void*</code> represents an address, but it doesn\u2019t specify the type of things it points to, and at a consequence you cannot operate on it.</p>\n"}, {"owner": {"reputation": 1, "user_id": 4467800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec173dbddcfc5f8673af855e2747e67?s=128&d=identicon&r=PG&f=1", "display_name": "Bull Bullz", "link": "https://stackoverflow.com/users/4467800/bull-bullz"}, "is_accepted": false, "score": 0, "last_activity_date": 1423677171, "creation_date": 1423677171, "answer_id": 28461048, "question_id": 28460449, "link": "https://stackoverflow.com/questions/28460449/in-c-im-getting-a-message-error-void-is-not-a-pointer-to-object-type/28461048#28461048", "title": "In C++, I&#39;m getting a message &quot;error: &#39;void*&#39; is not a pointer-to-object type&quot;", "body": "<p>The compiler needs the type of the variable to to dereference the pointer.</p>\n\n<p>only example no malloc:\n*int myPtnr = 0x12345;</p>\n\n<p>When you write</p>\n\n<p>*myPtr = NUMBER:</p>\n\n<p>The compiler looks at the type and say .. okay here we have a int ... the Information i need are in the next 4 bytes starting with the adress of the pointer. </p>\n\n<p>Thats the reason why you have to tell the compiler the type. When you use void the compiler dont know how much bytes he has to use for dereference. </p>\n"}, {"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "is_accepted": false, "score": 0, "last_activity_date": 1502988758, "creation_date": 1502988758, "answer_id": 45740948, "question_id": 28460449, "link": "https://stackoverflow.com/questions/28460449/in-c-im-getting-a-message-error-void-is-not-a-pointer-to-object-type/45740948#45740948", "title": "In C++, I&#39;m getting a message &quot;error: &#39;void*&#39; is not a pointer-to-object type&quot;", "body": "<p>you cant derefrence void*, and that is what the coder is doing.</p>\n\n<pre><code>*x = 23; // this cant be done with void*\n</code></pre>\n\n<p>instead :</p>\n\n<pre><code>x = &amp;arr[index] ; // this is correct\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 4456775, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1581b6cb9744f403f0040a3095a6ed1e?s=128&d=identicon&r=PG&f=1", "display_name": "droman07", "link": "https://stackoverflow.com/users/4456775/droman07"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5784, "favorite_count": 0, "accepted_answer_id": 28460503, "answer_count": 3, "score": 1, "last_activity_date": 1502988758, "creation_date": 1423675136, "question_id": 28460449, "link": "https://stackoverflow.com/questions/28460449/in-c-im-getting-a-message-error-void-is-not-a-pointer-to-object-type", "title": "In C++, I&#39;m getting a message &quot;error: &#39;void*&#39; is not a pointer-to-object type&quot;", "body": "<p>Here's my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n   void *x;\n   int arr[10];\n   x = arr;\n   *x = 23; //This is where I get the error\n}\n</code></pre>\n\n<p>As you can see, the code is very simple. It just creates a void pointer x which points to the memory address of the array 'arr' and puts the integer 23 into that memory address. But when I compile it, I get the error message \"'void*' is not a pointer-to-object type\". When I use an 'int' pointer instead of a void pointer and then compile it, I don't get any errors or warnings. I wanna know why I get this error.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "templates", "clone"], "comments": [{"owner": {"reputation": 1649, "user_id": 3133604, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/354805cc57c4ff2d7d88f95d791fef12?s=128&d=identicon&r=PG&f=1", "display_name": "undermind", "link": "https://stackoverflow.com/users/3133604/undermind"}, "edited": false, "score": 0, "creation_date": 1423675261, "post_id": 28460418, "comment_id": 45246933, "body": "first, it seems to me that you initialize a reference with a pointer, don&#39;t you?"}, {"owner": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 1, "creation_date": 1423675307, "post_id": 28460418, "comment_id": 45246957, "body": "The function is delcared to return a LinkedList&lt;T&gt;&amp;, but your code returns a LinkedList&lt;T&gt;*.  There&#39;s a type mismatch, so the compiler barfs at you about it."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 3336894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b1deeeaaf0bf471b4ad93771bfc13f6?s=128&d=identicon&r=PG&f=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/3336894/mat"}, "edited": false, "score": 0, "creation_date": 1423675534, "post_id": 28460515, "comment_id": 45247092, "body": "Thanks. The thing is just, we may not alter the header file (so we may not change the function prototype)"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 45, "user_id": 3336894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b1deeeaaf0bf471b4ad93771bfc13f6?s=128&d=identicon&r=PG&f=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/3336894/mat"}, "edited": false, "score": 0, "creation_date": 1423675931, "post_id": 28460515, "comment_id": 45247335, "body": "@Mat The thing is.. that thing isn&#39;t relevant. This is the correct fix (barring smart pointers and RAII modeling, which is really the <i>right</i> way to do this). The instructor that provided that header to you leaves but-one option for properly cleaning up that dynamic allocation (<code>delete &amp;refvar;</code>) and that option leaves open a massive whole of a memory leak if used incorrectly, which would be an easy mistake. Maybe the author of that header should be sitting on the other side off the classroom."}, {"owner": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 1, "creation_date": 1423676035, "post_id": 28460515, "comment_id": 45247398, "body": "Whoever wrote that header is an idiot.  <a href=\"http://stackoverflow.com/questions/752658/is-the-practice-of-returning-a-c-reference-variable-evil\" title=\"is the practice of returning a c reference variable evil\">stackoverflow.com/questions/752658/&hellip;</a>"}], "owner": {"reputation": 5747, "user_id": 631599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fc6b2cf893347e70c0a965f39a67209?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/631599/matt"}, "is_accepted": true, "score": 2, "last_activity_date": 1423675322, "creation_date": 1423675322, "answer_id": 28460515, "question_id": 28460418, "link": "https://stackoverflow.com/questions/28460418/invalid-initialization-of-non-const-reference-of-type-error-in-clone-func/28460515#28460515", "title": "&quot;invalid initialization of non-const reference of type...&quot; Error in clone() function", "body": "<p>You can change your clone function to:</p>\n\n<pre><code>template&lt;class T&gt;\nLinkedList&lt;T&gt;* LinkedList&lt;T&gt;::clone()\n{\n    return new LinkedList&lt;T&gt;(*this);\n}\n</code></pre>\n\n<p>Remember to free the memory after calling the clone function.</p>\n"}], "owner": {"reputation": 45, "user_id": 3336894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b1deeeaaf0bf471b4ad93771bfc13f6?s=128&d=identicon&r=PG&f=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/3336894/mat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 28460515, "answer_count": 1, "score": 0, "last_activity_date": 1423675322, "creation_date": 1423675059, "question_id": 28460418, "link": "https://stackoverflow.com/questions/28460418/invalid-initialization-of-non-const-reference-of-type-error-in-clone-func", "title": "&quot;invalid initialization of non-const reference of type...&quot; Error in clone() function", "body": "<p>Good day</p>\n\n<p>I am busy to implement linear data structure in c++. I am struggeling with my clone() function. The one line code seems in order for me, but maybe the error is in the copy constructor.\nThe error I am getting:\nlinkedList.C:22:32: error: invalid initialization of non-const reference of type \u2018LinkedList&amp;\u2019 from an rvalue of type \u2018LinkedList*\u2019\n  return new LinkedList(*this);</p>\n\n<pre><code>template&lt;class T&gt;\nLinkedList&lt;T&gt;&amp; LinkedList&lt;T&gt;::clone()\n{\n    return new LinkedList&lt;T&gt;(*this);\n}\n\ntemplate&lt;class T&gt;\nLinkedList&lt;T&gt;::LinkedList(const LinkedList&lt;T&gt;&amp; other)\n{\n\n    Node&lt;T&gt;* newNode;\n    Node&lt;T&gt;* current;\n    Node&lt;T&gt;* trailCurrent;\n\n    if(head != NULL)\n        clear();\n    if(other.head == NULL)\n        head = NULL;\n    else\n    {\n        current = other.head;\n        head = new Node&lt;T&gt;(current-&gt;element);\n        head-&gt;next = NULL;\n\n        trailCurrent = head;\n        current = current-&gt;next;\n\n        while(current != NULL)\n        {\n            newNode = new Node&lt;T&gt;(current-&gt;element);\n            trailCurrent-&gt;next = newNode;\n\n            trailCurrent = current;\n            current = current-&gt;next;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "unix", "printf"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1423675174, "post_id": 28460415, "comment_id": 45246883, "body": "Your C++ code looks a lot like C. If you&#39;d use C++&#39;s classes for strings, streams, files, etc. you probably wouldn&#39;t have this problem. Nor any of the host of problems you&#39;re bound to run into."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1423675345, "post_id": 28460415, "comment_id": 45246977, "body": "No need to put <code>\\0</code> at the end of your strings, the compiler adds it automatically."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1423675555, "post_id": 28460415, "comment_id": 45247104, "body": "You&#39;re mixing line-buffered and non-line-buffered I/O."}, {"owner": {"reputation": 89, "user_id": 3057914, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/32bd89728888992e699b422f34cee2bc?s=128&d=identicon&r=PG&f=1", "display_name": "fedden", "link": "https://stackoverflow.com/users/3057914/fedden"}, "edited": false, "score": 0, "creation_date": 1423675646, "post_id": 28460415, "comment_id": 45247156, "body": "Problem not in &#39;\\0&#39;. Can I print to pipe using c++ ?  Paul can you explain ?)"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1423677225, "post_id": 28460415, "comment_id": 45248099, "body": "The <code>\\0</code> comment had nothing to do with the problem, I was just pointing out that it&#39;s redundant. I&#39;m not sure I understand the exact nature of your problem, I can&#39;t see how your code would produce incorrect output unless <code>buf</code> was too short."}, {"owner": {"reputation": 89, "user_id": 3057914, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/32bd89728888992e699b422f34cee2bc?s=128&d=identicon&r=PG&f=1", "display_name": "fedden", "link": "https://stackoverflow.com/users/3057914/fedden"}, "edited": false, "score": 0, "creation_date": 1423677569, "post_id": 28460415, "comment_id": 45248311, "body": "I have outputs like &quot;woword=1&quot; , so no, this is not too short buffer :( Maybe you can advise another way to print results to pipe in this style  ?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1423697314, "post_id": 28460415, "comment_id": 45258746, "body": "That means something <i>before</i> this is printing <code>&quot;wo&quot;</code>."}, {"owner": {"reputation": 89, "user_id": 3057914, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/32bd89728888992e699b422f34cee2bc?s=128&d=identicon&r=PG&f=1", "display_name": "fedden", "link": "https://stackoverflow.com/users/3057914/fedden"}, "edited": false, "score": 0, "creation_date": 1423762297, "post_id": 28460415, "comment_id": 45289979, "body": "yes, you are right ! I had write( id_result, buf, length ); with wrong length in another place, thanks :)"}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1423675927, "post_id": 28460602, "comment_id": 45247333, "body": "Hmm. I thought <code>stdout</code> and <code>stderr</code> usually use the same buffer, and  stay sync&#39;ed."}, {"owner": {"reputation": 89, "user_id": 3057914, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/32bd89728888992e699b422f34cee2bc?s=128&d=identicon&r=PG&f=1", "display_name": "fedden", "link": "https://stackoverflow.com/users/3057914/fedden"}, "edited": false, "score": 0, "creation_date": 1423676302, "post_id": 28460602, "comment_id": 45247567, "body": "But I was added fprintf to debug error :/ Without fprintf I&#39;m still have same error"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1423676422, "post_id": 28460602, "comment_id": 45247636, "body": "@RSahu how could that be? They might be redirected to different places."}], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 3, "last_activity_date": 1423675556, "creation_date": 1423675556, "answer_id": 28460602, "question_id": 28460415, "link": "https://stackoverflow.com/questions/28460415/different-results-with-printf-and-fprintf/28460602#28460602", "title": "different results with printf and fprintf", "body": "<p>If you are interspersing calls to <code>printf</code> (or <code>write</code>) and <code>fprintf(stderr, ...)</code> the output won't necessarily come out in order. There is buffering going on, and the actual output probably won't switch at the end-of-line character.</p>\n"}], "owner": {"reputation": 89, "user_id": 3057914, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/32bd89728888992e699b422f34cee2bc?s=128&d=identicon&r=PG&f=1", "display_name": "fedden", "link": "https://stackoverflow.com/users/3057914/fedden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423676869, "creation_date": 1423675046, "last_edit_date": 1423676869, "question_id": 28460415, "link": "https://stackoverflow.com/questions/28460415/different-results-with-printf-and-fprintf", "title": "different results with printf and fprintf", "body": "<p>I need function that prints \"word=n\" (where n in [0..10]) to stream using linux function <code>ssize_t write(int fd, const void *buf, size_t count);</code>. Trying to use fprintf, but it's give strange results : program prints in ~1% of calls \"woword=n\", and <code>length</code> for example \"woword=7\" are 7. Printf print all right. I'm doing something wrong or this is the bag ? </p>\n\n<pre><code>if ((id_result = open( out , O_WRONLY)) &lt;= 0) {\n        fprintf(stderr, \"%s : %s\\n\", currentDateTime().c_str(), \"could not open output\\0\");\n        ret = P_STREAMS_LOAD_ERROR;\n    } \n\n    void printProbability( int probability ){\n      char buf[50];\n      memset( buf, '\\0', 50 );\n      int length = sprintf( buf, \"word=%i\\n\\0\", probability );\n      fprintf(stderr, \"debug : word=%i len = %i\\n\\0\", probability, length );\n      int result = write( id_result, buf, length );\n      if( result == -1){\n        fprintf(stderr, \"%s : %s\\n\", currentDateTime().c_str(), \"error \\n\"); \n      }\n    }\n</code></pre>\n\n<p>EDITED:</p>\n\n<p>how I understand, we have 2 theorys :\n1) mixing printf and write\n2) using '\\0' and '\\n' in fprintf </p>\n\n<pre><code>int length = sprintf( buf, \"word=%i\", probability );\nint result = write( id_result, buf, length );\nwrite( id_result, \"\\n\", 1 );\n</code></pre>\n\n<p>with this code I still have same errors </p>\n\n<p>aa help me :))</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1424031364, "post_id": 28469255, "comment_id": 45376252, "body": "While this works, it&#39;s an excessive brute-force approach. You&#39;ve missed the real problem."}], "owner": {"reputation": 304, "user_id": 1270467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38cfedec78f37d9739225a901e57d3f9?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1270467/serge"}, "is_accepted": true, "score": 0, "last_activity_date": 1423715017, "creation_date": 1423715017, "answer_id": 28469255, "question_id": 28460332, "link": "https://stackoverflow.com/questions/28460332/painting-qpolygonf-on-a-scene-manually-causes-rendering-issues-when-updating/28469255#28469255", "title": "Painting QPolygonF on a scene manually causes rendering issues when updating", "body": "<p>Here's the trick:</p>\n\n<p>Add</p>\n\n<pre><code>ui-&gt;graphicsView-&gt;setViewportUpdateMode(QGraphicsView::FullViewportUpdate);\n</code></pre>\n\n<p>to your constructor of <code>MainWindow</code>.</p>\n\n<p>Use this flag will force <code>QGraphicsView</code> to update entire viewport.</p>\n"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1424033148, "creation_date": 1424033148, "answer_id": 28530964, "question_id": 28460332, "link": "https://stackoverflow.com/questions/28460332/painting-qpolygonf-on-a-scene-manually-causes-rendering-issues-when-updating/28530964#28530964", "title": "Painting QPolygonF on a scene manually causes rendering issues when updating", "body": "<p>You're not providing the correct bounding rectangle of your edge item. You derive <code>EdgeGraphicsItem</code> from <code>QGraphicsLineItem</code>, but you didn't override <a href=\"http://doc.qt.io/qt-5/qgraphicsitem.html#boundingRect\" rel=\"nofollow\"><code>boundingRect</code></a>. Make sure that you follow the documentation, and don't miss calling <code>prepareGeometryChange</code> as necessary.</p>\n"}], "owner": {"reputation": 79487, "user_id": 72583, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/16a5eec5eca4550033c0e19dba3b32b8?s=128&d=identicon&r=PG", "display_name": "Jakub Arnold", "link": "https://stackoverflow.com/users/72583/jakub-arnold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 28469255, "answer_count": 2, "score": 1, "last_activity_date": 1424033148, "creation_date": 1423674773, "question_id": 28460332, "link": "https://stackoverflow.com/questions/28460332/painting-qpolygonf-on-a-scene-manually-causes-rendering-issues-when-updating", "title": "Painting QPolygonF on a scene manually causes rendering issues when updating", "body": "<p>I have a quite simple code for painting arrows between graph vertices, inspired by the Qt diagrams sample app, but I have a problem with render artifacts. When I paint a triangle polygon onto the scene using the following code</p>\n\n<pre><code>QPolygonF arrowHead;\n... some setup\npainter-&gt;drawPolygon(arrowHead);\n</code></pre>\n\n<p>and then I move around the vertex to which the triangle (<code>arrowHead</code> polygon) was pointing, it does get repainted, but the old triangle still stays rendered on the screen</p>\n\n<p><img src=\"https://i.imgur.com/WE3ffMq.png\" alt=\"render error\"></p>\n\n<p>Any update on the <code>scene</code> fixes the issue however (dragging on the background, or calling <code>update/invalidate</code> from another place).</p>\n\n<p><img src=\"https://i.imgur.com/fr0NklY.png\" alt=\"render ok\"></p>\n\n<p>The problem is that I don't know where to force the update, or how to tell Qt to invalidate the whole area around the vertex that's being dragged.</p>\n\n<p>I've tried calling <code>scene()-&gt;invalidate()</code> (also update) from the <code>itemChange</code> event on the vertex as it's being dragged, but that causes the whole application to crash, so I assume I'm not allowed to call update from there. I also can't call <code>update</code> directly from the <code>paint</code> method of the arrow, since that would infinitely recurse in its own <code>paint</code> method.</p>\n\n<p>Am I rendering this incorrectly, or do I need to manually update the scene somehow? <a href=\"https://github.com/darthdeus/graphite-gui/blob/dcfaec1c8599b87fc42a91029571b1eead66f966/gui/edge_graphics_item.cpp#L31-L62\" rel=\"nofollow noreferrer\">Here's a link to the whole rendering source code</a>, though I guess I'm probably doing some elementary mistake with regards to the painting.</p>\n"}, {"tags": ["c++", "pointers", "reference", "overloading"], "comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 7, "creation_date": 1423674646, "post_id": 28460253, "comment_id": 45246577, "body": "You shouldn&#39;t have any <i>tecnhical</i> problem, but I would certainly be puzzled seeing an API like this."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 3, "creation_date": 1423674695, "post_id": 28460253, "comment_id": 45246603, "body": "If one function just calls the other, what benefit would an inconsistent interface provide?"}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1423674740, "post_id": 28460253, "comment_id": 45246626, "body": "@MatteoItalia: Well I mean things like inducing human error."}, {"owner": {"reputation": 14069, "user_id": 1769720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5815db653a13a7122066f811caa020a7?s=128&d=identicon&r=PG", "display_name": "didierc", "link": "https://stackoverflow.com/users/1769720/didierc"}, "edited": false, "score": 0, "creation_date": 1423675013, "post_id": 28460253, "comment_id": 45246787, "body": "Oh, I didn&#39;t see that <code>const</code> keyword...^-^;"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 6, "creation_date": 1423675143, "post_id": 28460253, "comment_id": 45246860, "body": "If you&#39;re reserving the option of passing <code>nullptr</code>, a pointer version is warranted and the reference version is add-complexity for the convenience of some client author avoiding typing an ampersand <code>&amp;</code>. If NULL is not an option then the reference version is the right approach and the pointer version is similar added-complexity, this time to avoid typing an asterisk <code>*</code>. In either case there is no <i>tangible</i> benefit and both are done at the expense of added complexity. Just because you <i>can</i> doesn&#39;t mean you <i>should</i>. Pick the appropriate model and tell the clients &quot;this is your interface.&quot;"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1423675191, "post_id": 28460253, "comment_id": 45246892, "body": "@zenith that&#39;s the clearest answer so far.  You should promote it to a proper answer."}, {"owner": {"reputation": 14069, "user_id": 1769720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5815db653a13a7122066f811caa020a7?s=128&d=identicon&r=PG", "display_name": "didierc", "link": "https://stackoverflow.com/users/1769720/didierc"}, "edited": false, "score": 2, "creation_date": 1423675252, "post_id": 28460253, "comment_id": 45246927, "body": "OK, it&#39;s not bad practice if you&#39;re in the process of migrating your coding convention to use references instead of <code>const *</code> (or the opposite, but that doesn&#39;t make much sense to me)."}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1423675437, "post_id": 28460253, "comment_id": 45247030, "body": "@WhozCraig: You should make that comment into an answer."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1423675512, "post_id": 28460253, "comment_id": 45247081, "body": "@Matt zenith&#39;s is sufficient (and uptick accordingly). And I should have mentioned, if <code>nullptr</code> is <i>not</i> an option providing a mechanism for someone to do so <i>at all</i> is a terrible idea; further furnace embers this idea should be squelched."}, {"owner": {"reputation": 21641, "user_id": 96780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PPilI.jpg?s=128&g=1", "display_name": "Daniel Daranas", "link": "https://stackoverflow.com/users/96780/daniel-daranas"}, "edited": false, "score": 0, "creation_date": 1423677137, "post_id": 28460253, "comment_id": 45248063, "body": "I prefer to avoid <i>any</i> kind of syntactic overloading, so imagine what I think about this one."}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "reply_to_user": {"reputation": 21641, "user_id": 96780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PPilI.jpg?s=128&g=1", "display_name": "Daniel Daranas", "link": "https://stackoverflow.com/users/96780/daniel-daranas"}, "edited": false, "score": 0, "creation_date": 1423677733, "post_id": 28460253, "comment_id": 45248412, "body": "@DanielDaranas: Do you also avoid default arguments?"}, {"owner": {"reputation": 21641, "user_id": 96780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PPilI.jpg?s=128&g=1", "display_name": "Daniel Daranas", "link": "https://stackoverflow.com/users/96780/daniel-daranas"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1423678140, "post_id": 28460253, "comment_id": 45248599, "body": "@Matt Yes, I do, but with a bit less of emphasys."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1423677074, "post_id": 28460544, "comment_id": 45248035, "body": "One could say, &quot;if the object must exist, pass by reference&quot;, this means that the function doesn&#39;t have to worry about invalid pointer values and testing of them."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1423686221, "post_id": 28460544, "comment_id": 45253268, "body": "Also, a <code>nullptr</code> should have a meaning to your function. For example: if you get <code>nullptr</code> and <code>throw invalid_argument</code>, it&#39;s meaningless. Imposing a reference is much better in this case."}], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 21, "last_activity_date": 1423685651, "last_edit_date": 1495540233, "creation_date": 1423675393, "answer_id": 28460544, "question_id": 28460253, "link": "https://stackoverflow.com/questions/28460253/is-it-bad-practice-to-overload-a-function-to-take-both-a-pointer-or-a-reference/28460544#28460544", "title": "Is it bad practice to overload a function to take both a pointer or a reference?", "body": "<p>There should be only one way to do a specific thing. This will make the code clearer for its users. Therefore, you should pick only one, depending on the semantics:</p>\n\n<ul>\n<li><p>If a <code>nullptr</code> is a meaningful value to be passed to <code>createFoo</code>, then declare the function to take a pointer.</p></li>\n<li><p>If a <code>nullptr</code> shouldn't be passed to <code>createFoo</code>, then declare the parameter a reference to make the compiler yell at people who try pass in a <code>nullptr</code>.</p></li>\n</ul>\n\n<p>Now the users of your code will go \"Ah, I can pass a null to that function, cool!\" or \"Okay this function needs an actual object to work properly\".</p>\n\n<p>Stick to this convention throughout a project to make the interface of the code more coherent.</p>\n\n<p>Or as <a href=\"https://stackoverflow.com/users/1322972/whozcraig\">WhozCraig</a> put it,</p>\n\n<blockquote>\n  <p>Pick the appropriate model and tell the clients \"this is your interface.\"</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423675957, "post_id": 28460600, "comment_id": 45247357, "body": "So you would say that an interface should not be designed this way from the start?"}, {"owner": {"reputation": 14069, "user_id": 1769720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5815db653a13a7122066f811caa020a7?s=128&d=identicon&r=PG", "display_name": "didierc", "link": "https://stackoverflow.com/users/1769720/didierc"}, "reply_to_user": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1423676191, "post_id": 28460600, "comment_id": 45247490, "body": "@Matt It probably should not, but I&#39;m sure someone would eventually come up with a good reason for doing so. Do you know a good reason for it?"}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 1, "creation_date": 1423676363, "post_id": 28460600, "comment_id": 45247595, "body": "As @WhozCraig put it in his comment, my reasons were simply avoiding typing an extra <code>&amp;</code> or <code>*</code>. I guess that&#39;s not really a &quot;good&quot; reason."}, {"owner": {"reputation": 14069, "user_id": 1769720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5815db653a13a7122066f811caa020a7?s=128&d=identicon&r=PG", "display_name": "didierc", "link": "https://stackoverflow.com/users/1769720/didierc"}, "reply_to_user": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 2, "creation_date": 1423676578, "post_id": 28460600, "comment_id": 45247727, "body": "Don&#39;t favor conciseness over clarity (though I admit I don&#39;t follow it enough myself)."}], "owner": {"reputation": 14069, "user_id": 1769720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5815db653a13a7122066f811caa020a7?s=128&d=identicon&r=PG", "display_name": "didierc", "link": "https://stackoverflow.com/users/1769720/didierc"}, "is_accepted": false, "score": 3, "last_activity_date": 1423676927, "last_edit_date": 1423676927, "creation_date": 1423675550, "answer_id": 28460600, "question_id": 28460253, "link": "https://stackoverflow.com/questions/28460253/is-it-bad-practice-to-overload-a-function-to-take-both-a-pointer-or-a-reference/28460600#28460600", "title": "Is it bad practice to overload a function to take both a pointer or a reference?", "body": "<p>A software codebase is not a static object, it evolves<sup>\u2020</sup> with the needs of those who use it. If a confusing interface is \"bad practice\" (I would rather say a silly thing to do), a codebase may end up in such situation as it evolves from refactoring and code improvement.</p>\n\n<p>In this instance, it's not bad practice if you're in the process of migrating your coding conventions to use references instead of const pointers (or the opposite, but that doesn't make much sense to me). The bad practice here would probably to make these evolutions and not document it, with other people not knowing that one of these methods is deprecated, or simply which one to use.</p>\n\n<p>There's also the possibility of passing a <code>nullptr_t</code> (or <code>NULL</code> pointers for old timers like me) With const pointers. I am not sure of the benefit of this, given that you can overload methods on their arguments, but again in the context of a changing API it makes sense.</p>\n\n<hr>\n\n<p><sup>\u2020 it's alive!!!</sup></p>\n"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 5, "last_activity_date": 1423676273, "creation_date": 1423676273, "answer_id": 28460805, "question_id": 28460253, "link": "https://stackoverflow.com/questions/28460253/is-it-bad-practice-to-overload-a-function-to-take-both-a-pointer-or-a-reference/28460805#28460805", "title": "Is it bad practice to overload a function to take both a pointer or a reference?", "body": "<p>I can think of one marginally useful reason to do this.</p>\n\n<p>The <code>Foo*</code> version can check for null, handle that case, and if not use the reference case.</p>\n\n<p>The <code>Foo&amp;</code> can then not check for null.</p>\n\n<p>This lets callers say \"I know this is not null because I checked\", saving a branch within the function.</p>\n\n<p>However this benefit (saving a branch) is pointless once the cost of the method passes a very low threshhold.</p>\n"}], "owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1856, "favorite_count": 2, "accepted_answer_id": 28460544, "answer_count": 3, "score": 19, "last_activity_date": 1423685651, "creation_date": 1423674561, "question_id": 28460253, "link": "https://stackoverflow.com/questions/28460253/is-it-bad-practice-to-overload-a-function-to-take-both-a-pointer-or-a-reference", "title": "Is it bad practice to overload a function to take both a pointer or a reference?", "body": "<p>For example, if I had a struct <code>FooSpec</code>:</p>\n\n<pre><code>struct FooSpec { /* lots of data */ };\n</code></pre>\n\n<p>Is it bad practice to provide <em>both</em> of the following as overloaded functions? Or should I just choose one and stick with it?</p>\n\n<pre><code>Foo *createFoo(const FooSpec *spec) { /* ... */ }\nFoo *createFoo(const FooSpec &amp;spec) { return createFoo(&amp;spec); }\n</code></pre>\n\n<p>Could having both cause unexpected problems?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1423674603, "post_id": 28460217, "comment_id": 45246547, "body": "For one thing your loop logic is broken - you test <code>*buffer</code> before you&#39;ve read anything into it. Another thing: you fail to check whether <code>file.read()</code> is successful."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1423674664, "post_id": 28460217, "comment_id": 45246586, "body": "For another, something wrong with <code>std::getline</code> ? And is <code>text</code> just sight-seeing or is it supposed to be involved in this somehow ?"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1423674781, "post_id": 28460217, "comment_id": 45246653, "body": "Can&#39;t reproduce: <a href=\"https://gist.github.com/sharth/9252aff3e6eea4e10cd9\" rel=\"nofollow noreferrer\">gist.github.com/sharth/9252aff3e6eea4e10cd9</a>"}, {"owner": {"reputation": 503, "user_id": 1280961, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/mtA9d.jpg?s=128&g=1", "display_name": "wonko realtime", "link": "https://stackoverflow.com/users/1280961/wonko-realtime"}, "edited": false, "score": 0, "creation_date": 1423675959, "post_id": 28460217, "comment_id": 45247358, "body": "Can&#39;t reproduce either.. Did you check whether opening the file was successful? You can just put your file var in an if for that; see an example <a href=\"http://www.cplusplus.com/reference/istream/istream/read/\" rel=\"nofollow noreferrer\">here</a> and <a href=\"http://pastebin.com/kgTkEiAk\" rel=\"nofollow noreferrer\">running testcode including safety checks here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1423677941, "post_id": 28461162, "comment_id": 45248509, "body": "Thanks for the correction.  I thought the <code>read</code> method was passing by reference."}, {"owner": {"reputation": 15, "user_id": 4520506, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004440960420/picture?type=large", "display_name": "Geeh", "link": "https://stackoverflow.com/users/4520506/geeh"}, "edited": false, "score": 0, "creation_date": 1423680525, "post_id": 28461162, "comment_id": 45249987, "body": "The problem is that the file still keeps reading, even though there clearly is a new line in the .txt"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 15, "user_id": 4520506, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004440960420/picture?type=large", "display_name": "Geeh", "link": "https://stackoverflow.com/users/4520506/geeh"}, "edited": false, "score": 0, "creation_date": 1423682126, "post_id": 28461162, "comment_id": 45250922, "body": "When you used the debugger, what was the character read at the end of the line?  Was it &lt;CR&gt;?  Was it &lt;LF&gt;? Was it &lt;CR&gt;&lt;LF&gt;?"}, {"owner": {"reputation": 15, "user_id": 4520506, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004440960420/picture?type=large", "display_name": "Geeh", "link": "https://stackoverflow.com/users/4520506/geeh"}, "edited": false, "score": 0, "creation_date": 1423683486, "post_id": 28461162, "comment_id": 45251780, "body": "The character was &#39;\\n&#39;. I just forgot I called the function multiple times. Thank you so much!"}, {"owner": {"reputation": 15, "user_id": 4520506, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004440960420/picture?type=large", "display_name": "Geeh", "link": "https://stackoverflow.com/users/4520506/geeh"}, "edited": false, "score": 0, "creation_date": 1423683542, "post_id": 28461162, "comment_id": 45251824, "body": "I&#39;ve only used the buffer because I thought it was the best way to do this, I&#39;m new into C++, so I&#39;m still learning. Thank you so much. :)"}], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": -1, "last_activity_date": 1423677828, "last_edit_date": 1423677828, "creation_date": 1423677504, "answer_id": 28461162, "question_id": 28460217, "link": "https://stackoverflow.com/questions/28460217/comparing-a-buffer-with-a-char-does-not-work/28461162#28461162", "title": "Comparing a buffer with a char does not work", "body": "<p>I don't understand why you are creating a array of 1 character from dynamic memory.  You should use a <code>char</code> variable:  </p>\n\n<pre><code>void string_push(ifstream&amp; file,  \n                 string    text,\n                 int       time,\n                 int       tm)\n{\n    char b = '\\0';\n    while (b  != '\\n')\n    {\n        file.read(&amp;b,1);\n        cout &lt;&lt; b;\n        Sleep(tm);\n    }\n    Sleep(time);\n}\n</code></pre>\n\n<p>By using a temporary <code>char</code> variable, you eliminate memory fragmentation and the problems or memory management (allocation and deallocation).  Also, it eliminates the need to a call to the memory manager, thus making your program more efficient (the process can probably fit a character in a register and not use memory).  </p>\n"}], "owner": {"reputation": 15, "user_id": 4520506, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004440960420/picture?type=large", "display_name": "Geeh", "link": "https://stackoverflow.com/users/4520506/geeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 28461162, "answer_count": 1, "score": 0, "last_activity_date": 1423677828, "creation_date": 1423674445, "question_id": 28460217, "link": "https://stackoverflow.com/questions/28460217/comparing-a-buffer-with-a-char-does-not-work", "title": "Comparing a buffer with a char does not work", "body": "<p>I'm making a function to print a whole line from a .txt file, until the end of the line is reached, however it doesn't seem to work, as it prints out the whole text (And yes, the Sleep() function actually works in the while)</p>\n\n<pre><code>void string_push(ifstream&amp; file, string text, int time,int tm){\n    char * buffer = new char [1];\n    while (*buffer != '\\n'){\n        file.read(buffer,1);\n        cout &lt;&lt; *buffer;\n        Sleep(tm);\n    }\n    Sleep(time);\n}\n</code></pre>\n\n<p>I've tried inserting an 'y' at the end of the line, and replacing >'\\n' with >'y', but it still doesn't work. What's wrong with it?</p>\n"}, {"tags": ["c++", "delphi", "struct"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 1, "creation_date": 1423674478, "post_id": 28459948, "comment_id": 45246479, "body": "Try with <code>Cardinal(hdr) + sizeof...</code>."}, {"owner": {"reputation": 12006, "user_id": 593144, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a745d80a7031bdd56c5a3f5b04fd790f?s=128&d=identicon&r=PG", "display_name": "Abelisto", "link": "https://stackoverflow.com/users/593144/abelisto"}, "edited": false, "score": 0, "creation_date": 1423674513, "post_id": 28459948, "comment_id": 45246502, "body": "Since Pascal is a strong typed language you have to explicit convert <code>ptr</code> to <code>Cardinal</code> type (or to <code>UIntPtr</code> type for more convenience): <code>Result := PExt4_ExtEnt(UIntPtr(hdr) + sizeof(ext4_extent_header));</code>"}, {"owner": {"reputation": 12006, "user_id": 593144, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a745d80a7031bdd56c5a3f5b04fd790f?s=128&d=identicon&r=PG", "display_name": "Abelisto", "link": "https://stackoverflow.com/users/593144/abelisto"}, "edited": false, "score": 0, "creation_date": 1423674898, "post_id": 28459948, "comment_id": 45246732, "body": "Also you have to use <code>packed record</code> instead of <code>record</code> because <code>__packed__</code> directive in the source C code."}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 1, "creation_date": 1423675142, "post_id": 28459948, "comment_id": 45246859, "body": "<a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> or <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a>? Please use the appropriate tag for the language, and remove the other. C != C++."}], "answers": [{"comments": [{"owner": {"reputation": 12006, "user_id": 593144, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a745d80a7031bdd56c5a3f5b04fd790f?s=128&d=identicon&r=PG", "display_name": "Abelisto", "link": "https://stackoverflow.com/users/593144/abelisto"}, "edited": false, "score": 0, "creation_date": 1423675802, "post_id": 28460366, "comment_id": 45247249, "body": "Not sure that is converting pointer to the some more complex type then <code>Cardinal</code> is a right way just because <code>SizeOf</code> returns size in bytes but increasing pointer PType(p) increases it to TType size (just try to change <code>PAnsiChar</code> to <code>PWideChar</code> in your example and compare results)."}, {"owner": {"reputation": 860, "user_id": 2113026, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/400a0a9ac1dd70a914af6ea0a3d31821?s=128&d=identicon&r=PG", "display_name": "Jake Evans", "link": "https://stackoverflow.com/users/2113026/jake-evans"}, "edited": false, "score": 0, "creation_date": 1423675818, "post_id": 28460366, "comment_id": 45247256, "body": "Whilst your suggestion now enabled my code to compile, I am getting different results in the <code>Result</code> compared to the C++ code. Actually the memory in the <code>Result</code> is completely wrong."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 12006, "user_id": 593144, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a745d80a7031bdd56c5a3f5b04fd790f?s=128&d=identicon&r=PG", "display_name": "Abelisto", "link": "https://stackoverflow.com/users/593144/abelisto"}, "edited": false, "score": 0, "creation_date": 1423675996, "post_id": 28460366, "comment_id": 45247378, "body": "@Abelisto PAnsiChar is traditionally the type that has pointer arithmetic available. It&#39;s a reasonably well know idiom. You could use NativeUInt if you prefer. PWideChar would be a mistake. Don&#39;t do that. Also, I don&#39;t convert to cardinal at all."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 860, "user_id": 2113026, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/400a0a9ac1dd70a914af6ea0a3d31821?s=128&d=identicon&r=PG", "display_name": "Jake Evans", "link": "https://stackoverflow.com/users/2113026/jake-evans"}, "edited": false, "score": 0, "creation_date": 1423676038, "post_id": 28460366, "comment_id": 45247402, "body": "@Jake I&#39;m guessing you haven&#39;t packed the records."}, {"owner": {"reputation": 860, "user_id": 2113026, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/400a0a9ac1dd70a914af6ea0a3d31821?s=128&d=identicon&r=PG", "display_name": "Jake Evans", "link": "https://stackoverflow.com/users/2113026/jake-evans"}, "edited": false, "score": 0, "creation_date": 1423676083, "post_id": 28460366, "comment_id": 45247422, "body": "@DavidHeffernan - I have indeed packed the records, after you suggested it in your answer."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1423676358, "post_id": 28460366, "comment_id": 45247592, "body": "So do some debugging next. Call the macro and the delphi function passing NULL and nil respectively. Answers should be the same. Check sizeof matches for both records in the two languages. Once it all agrees your defect is elsewhere."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1423677117, "post_id": 28460366, "comment_id": 45248056, "body": "See my latest update. If hdr is what you claim it is, the macro would not be needed. So I think your problems are now elsewhere."}, {"owner": {"reputation": 860, "user_id": 2113026, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/400a0a9ac1dd70a914af6ea0a3d31821?s=128&d=identicon&r=PG", "display_name": "Jake Evans", "link": "https://stackoverflow.com/users/2113026/jake-evans"}, "edited": false, "score": 0, "creation_date": 1423677259, "post_id": 28460366, "comment_id": 45248118, "body": "I&#39;ve just updated the question again. <code>hdr = ext4_extent_header</code>"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1423677511, "post_id": 28460366, "comment_id": 45248268, "body": "I rolled back. Please can we stick to the question that was asked and answered. Please do the debugging that I described. Finally I don&#39;t mean the type of hdr in the pascal code. I mean in the C++ code. If it really was pointer to extent header no macro would be needed. All the same let&#39;s concentrate on the question please."}, {"owner": {"reputation": 860, "user_id": 2113026, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/400a0a9ac1dd70a914af6ea0a3d31821?s=128&d=identicon&r=PG", "display_name": "Jake Evans", "link": "https://stackoverflow.com/users/2113026/jake-evans"}, "edited": false, "score": 0, "creation_date": 1423677928, "post_id": 28460366, "comment_id": 45248501, "body": "I fixed it. You were right. I wasn&#39;t passing <code>header</code> as a pointer, but rather as an unreferenced pointer. Thanks."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1423678985, "post_id": 28460366, "comment_id": 45249066, "body": "The real trick when facing such a problem is to break it down into small parts. Keep proving each part works. As you do so you narrow down where the fault can be."}], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": true, "score": 1, "last_activity_date": 1423676829, "last_edit_date": 1423676829, "creation_date": 1423674867, "answer_id": 28460366, "question_id": 28459948, "link": "https://stackoverflow.com/questions/28459948/c-to-delphi-struct-and-pointer-addition/28460366#28460366", "title": "C++ to Delphi - Struct and pointer addition", "body": "<p>Cast <code>hdr</code> the same way the C++ code does. It casts to pointer to octet so that the pointer arithmetic treats the offset as an octet value. In Delphi:</p>\n\n<pre><code>Result := PExt4_ExtEnt(PAnsiChar(hdr) + sizeof(ext4_extent_header));\n</code></pre>\n\n<p>You could enable pointer arithmetic and make it even simpler:</p>\n\n<pre><code>{$POINTERMATH ON}\n....\nResult := hdr + 1;\n</code></pre>\n\n<p>There is probably another problem in your code. If <code>hdr</code> really was a <code>PExt4_ExtEnt</code> then the C++ would not need a macro. It could just write <code>hdr + 1</code>. So I suspect that you need to dig deeper into the C++ code to find out what <code>hdr</code> really is. </p>\n\n<hr>\n\n<p>Note also that the C++ code specifies that these records are packed. Use <code>packed record</code> in your Delphi code to match. </p>\n"}, {"owner": {"reputation": 12006, "user_id": 593144, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a745d80a7031bdd56c5a3f5b04fd790f?s=128&d=identicon&r=PG", "display_name": "Abelisto", "link": "https://stackoverflow.com/users/593144/abelisto"}, "is_accepted": false, "score": 1, "last_activity_date": 1423676637, "creation_date": 1423676637, "answer_id": 28460896, "question_id": 28459948, "link": "https://stackoverflow.com/questions/28459948/c-to-delphi-struct-and-pointer-addition/28460896#28460896", "title": "C++ to Delphi - Struct and pointer addition", "body": "<p>1) Change your function to</p>\n\n<pre><code>function Ext2Partition.EXT_First_Extent(hdr: PExt4_extent_header):PExt4_ExtEnt;\nbegin\n  Inc(hdr, 1); // It will increase _local copy_ of the hdr parameter to size of Ext4_extent_header, not to 1 byte. Keep in mind such behavior \n  Result := hdr;\nend;\n</code></pre>\n\n<p>2) Where Result will point after that? What is located immediately after <code>hdr</code>? </p>\n"}], "owner": {"reputation": 860, "user_id": 2113026, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/400a0a9ac1dd70a914af6ea0a3d31821?s=128&d=identicon&r=PG", "display_name": "Jake Evans", "link": "https://stackoverflow.com/users/2113026/jake-evans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 663, "favorite_count": 0, "accepted_answer_id": 28460366, "answer_count": 2, "score": 1, "last_activity_date": 1423677360, "creation_date": 1423673636, "last_edit_date": 1423677360, "question_id": 28459948, "link": "https://stackoverflow.com/questions/28459948/c-to-delphi-struct-and-pointer-addition", "title": "C++ to Delphi - Struct and pointer addition", "body": "<p>I have this macro defined in C++;</p>\n\n<pre><code>    #define EXT_FIRST_EXTENT(__hdr__) \\\n((struct ext4_extent *) (((char *) (__hdr__)) +         \\\n                         sizeof(struct ext4_extent_header)))\n</code></pre>\n\n<p>Where <code>ext4_extent_header</code> is a struct;</p>\n\n<pre><code>    typedef struct ext4_extent_header {\n    uint16_t  eh_magic;       /* probably will support different formats */\n    uint16_t  eh_entries;     /* number of valid entries */\n    uint16_t  eh_max;         /* capacity of store in entries */\n    uint16_t  eh_depth;       /* has tree real underlying blocks? */\n    uint32_t  eh_generation;  /* generation of the tree */\n}__attribute__ ((__packed__)) EXT4_EXTENT_HEADER;\n</code></pre>\n\n<p>And ext4_extent is also a struct;</p>\n\n<pre><code>typedef struct ext4_extent {\n    uint32_t ee_block; /* first logical block extent covers */\n    uint16_t ee_len; /* number of blocks covered by extent */\n    uint16_t ee_start_hi; /* high 16 bits of physical block */\n    uint32_t ee_start_lo; /* low 32 bits of physical block */\n} __attribute__ ((__packed__)) EXT4_EXTENT;\n</code></pre>\n\n<p>This is my attempt at writing it in Delphi;</p>\n\n<pre><code>function Ext2Partition.EXT_First_Extent(hdr: PExt4_extent_header):PExt4_ExtEnt;\nbegin\n  Result := PExt4_ExtEnt(hdr + sizeof(ext4_extent_header));\nend;\n</code></pre>\n\n<p>However the compiler tells me that the Operator not applicable to this operand type.</p>\n\n<p>Here is my converted c++ struct to Delphi record's for both <code>ext4_extent_header</code> and <code>ext4_extent</code>;</p>\n\n<pre><code>Type\n  PExt4_extent_header = ^Ext4_extent_header;\n  Ext4_extent_header = REcord\n    eh_magic : Word;\n    eh_entries : Word;\n    eh_max : Word;\n    eh_depth : Word;\n    eh_generation : Cardinal;\n  End;\n\nType\n  PExt4_ExtEnt = ^Ext4_ExtEnt;\n  Ext4_ExtEnt = Record\n    ee_block : Cardinal;\n    ee_len : Word;\n    ee_start_hi : Word;\n    ee_start_low : Cardinal;\n  End;\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "class", "runtime"], "comments": [{"owner": {"reputation": 1066, "user_id": 1628038, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1eee0c4c8933f5bcaa46b81ea1abd94c?s=128&d=identicon&r=PG", "display_name": "LeeNeverGup", "link": "https://stackoverflow.com/users/1628038/leenevergup"}, "edited": false, "score": 1, "creation_date": 1423673977, "post_id": 28459944, "comment_id": 45246182, "body": "You can use an array pointers to <code>CTurrent</code>"}, {"owner": {"reputation": 201, "user_id": 3046336, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oLMEP.gif?s=128&g=1", "display_name": "SharkBytes", "link": "https://stackoverflow.com/users/3046336/sharkbytes"}, "reply_to_user": {"reputation": 1066, "user_id": 1628038, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1eee0c4c8933f5bcaa46b81ea1abd94c?s=128&d=identicon&r=PG", "display_name": "LeeNeverGup", "link": "https://stackoverflow.com/users/1628038/leenevergup"}, "edited": false, "score": 0, "creation_date": 1423674462, "post_id": 28459944, "comment_id": 45246469, "body": "Ah ok, I&#39;ve done that for entities in general. I did not think I could do that for <code>CTurret</code>. I assume to switch out the types I&#39;d use <code>new</code> and the class?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1423674660, "post_id": 28459944, "comment_id": 45246584, "body": "Yes you would use <code>new DerviedClassName()</code>.  Don&#39;t forget you will have to delete it when you are done with it.  Also if you are using virtual function make sure that destructor is marked as virtual as well."}, {"owner": {"reputation": 201, "user_id": 3046336, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oLMEP.gif?s=128&g=1", "display_name": "SharkBytes", "link": "https://stackoverflow.com/users/3046336/sharkbytes"}, "edited": false, "score": 0, "creation_date": 1423674897, "post_id": 28459944, "comment_id": 45246731, "body": "OK, that makes sense. Thank you guys."}], "answers": [{"comments": [{"owner": {"reputation": 201, "user_id": 3046336, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oLMEP.gif?s=128&g=1", "display_name": "SharkBytes", "link": "https://stackoverflow.com/users/3046336/sharkbytes"}, "edited": false, "score": 0, "creation_date": 1423677005, "post_id": 28460691, "comment_id": 45247990, "body": "Thank you for the excellent explanation, this has made things a lot clearer."}], "owner": {"reputation": 1818, "user_id": 4491408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb320866c604eaa67685a61e799719f2?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4491408/rob"}, "is_accepted": true, "score": 1, "last_activity_date": 1423675855, "creation_date": 1423675855, "answer_id": 28460691, "question_id": 28459944, "link": "https://stackoverflow.com/questions/28459944/c-runtime-class-switching-relying-on-base-class-inheritance/28460691#28460691", "title": "C++ Runtime class switching, relying on base class inheritance", "body": "<p>You need to decide what the difference is between turret types.</p>\n\n<p>The general choices are a polymorphic base class (with the derived classes overriding inherited virtual functions to specialise behaviour) or a single class with state (e.g. an enumerated type to describe operating modes, a float to describe speed, etc).</p>\n\n<p>An array of smart pointers can be used if you decide on a polymorphic base.   Simply pick which pointer (or index into the array) to use.   The pointers (and objects they point to) will be in memory anyway.</p>\n\n<p>With a single object, just change its state as required.  So change values like height, width, operating mode, etc.   This is the better option if you're really worried about memory usage (only one object in memory needed, although there is nothing stopping you having an array of objects, where each element has different state).</p>\n\n<p>The placement new trick you linked to has a few gotchas that have been glossed over, and the particular example of morphing an object with data into an object that doesn't is problematical (e.g. causing the caller to exhibit undefined behaviour).</p>\n"}], "owner": {"reputation": 201, "user_id": 3046336, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oLMEP.gif?s=128&g=1", "display_name": "SharkBytes", "link": "https://stackoverflow.com/users/3046336/sharkbytes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 28460691, "answer_count": 1, "score": 0, "last_activity_date": 1423675855, "creation_date": 1423673633, "question_id": 28459944, "link": "https://stackoverflow.com/questions/28459944/c-runtime-class-switching-relying-on-base-class-inheritance", "title": "C++ Runtime class switching, relying on base class inheritance", "body": "<p>I am not fully versed in C++ and with the current project I am working on, have hit a small snag. I have come across this: <a href=\"http://www.terrainformatica.com/2010/08/cpp-how-to-change-class-of-object-in-runtime/\" rel=\"nofollow\">http://www.terrainformatica.com/2010/08/cpp-how-to-change-class-of-object-in-runtime/</a> but I am unsure if this is the solution I am looking for or if there are any better alternatives.</p>\n\n<p>My intentions is to switch turret types stored in memory, despite them being different instantiations of base <code>CTurret</code>. And with as little performance impact as possible since this is going to be implemented in a simple game.</p>\n\n<p>Basically I have a base class <code>CTurret</code> of base class <code>CEntity</code>. Now I have several Turrets (Basic, Fast, Harmless). Each turret uses the base class <code>CTurret</code> I want to reserve some memory to hold generic turrets which can then be simply swapped out for an actual turret type. Better visual below:</p>\n\n<pre><code>class CEntity...\nclass CTurret : public CEntity...\nclass CBasicTurret : public CTurret...\nclass CFastTurret : public CTurret...\n</code></pre>\n\n<p>Memory (5 generic turrets)<br>\nArray[CTurret, CTurret, CTurret, CTurret, CTurret] // Can not use generic!</p>\n\n<p>User wants a basic turret, populate an available generic turret:<br>\nArray[CBasicTurret, CTurret, CTurret, CTurret, CTurret] // Ah, a basic turret I'll use that.</p>\n\n<p>When no longer needed:<br>\nArray[CTurret, CTurret, CTurret, CTurret, CTurret] // Back to original.</p>\n\n<p>So far I can see only two options to achieve what I want:<br>\n1) I could put all the turret types in the basic class and change it form the base to... an actual class. But this would get messy fast.<br>\n2) I could reserve memory for each turret type which would not be an ideal situation since memory is precious and should not be wasted as such. Also the user may request more than is already reserve which could pose future problems.</p>\n"}, {"tags": ["c++", "visual-studio-2012", "disassembly"], "comments": [{"owner": {"reputation": 5747, "user_id": 631599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fc6b2cf893347e70c0a965f39a67209?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/631599/matt"}, "edited": false, "score": 0, "creation_date": 1423673776, "post_id": 28459895, "comment_id": 45246040, "body": "are you debugging your code?"}, {"owner": {"reputation": 1237, "user_id": 3301577, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/38f74e15567181820ab8849253d6c7d2?s=128&d=identicon&r=PG&f=1", "display_name": "Pedrumj", "link": "https://stackoverflow.com/users/3301577/pedrumj"}, "reply_to_user": {"reputation": 5747, "user_id": 631599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fc6b2cf893347e70c0a965f39a67209?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/631599/matt"}, "edited": false, "score": 0, "creation_date": 1423673793, "post_id": 28459895, "comment_id": 45246060, "body": "yep, its in debug mode. A win32 debug project."}, {"owner": {"reputation": 427, "user_id": 4439756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c29ecf1a1641720880d5d04b3f85bd94?s=128&d=identicon&r=PG&f=1", "display_name": "rpress", "link": "https://stackoverflow.com/users/4439756/rpress"}, "edited": false, "score": 0, "creation_date": 1423679747, "post_id": 28459895, "comment_id": 45249491, "body": "Debug -&gt; Windows -&gt; Disassembly"}, {"owner": {"reputation": 1237, "user_id": 3301577, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/38f74e15567181820ab8849253d6c7d2?s=128&d=identicon&r=PG&f=1", "display_name": "Pedrumj", "link": "https://stackoverflow.com/users/3301577/pedrumj"}, "reply_to_user": {"reputation": 427, "user_id": 4439756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c29ecf1a1641720880d5d04b3f85bd94?s=128&d=identicon&r=PG&f=1", "display_name": "rpress", "link": "https://stackoverflow.com/users/4439756/rpress"}, "edited": false, "score": 0, "creation_date": 1423680140, "post_id": 28459895, "comment_id": 45249757, "body": "@rpress its not there either"}], "answers": [{"comments": [{"owner": {"reputation": 1237, "user_id": 3301577, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/38f74e15567181820ab8849253d6c7d2?s=128&d=identicon&r=PG&f=1", "display_name": "Pedrumj", "link": "https://stackoverflow.com/users/3301577/pedrumj"}, "edited": false, "score": 0, "creation_date": 1423680284, "post_id": 28461907, "comment_id": 45249838, "body": "ah, brilliant thanks :). It was the second one. I&#39;m using VS Ultimate."}], "owner": {"reputation": 251, "user_id": 4540043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9a1a8a566c5fadc525d39e284bd8d6?s=128&d=identicon&r=PG&f=1", "display_name": "petrovich", "link": "https://stackoverflow.com/users/4540043/petrovich"}, "is_accepted": true, "score": 1, "last_activity_date": 1423679910, "creation_date": 1423679910, "answer_id": 28461907, "question_id": 28459895, "link": "https://stackoverflow.com/questions/28459895/c-visual-studio-disassembly-not-availble/28461907#28461907", "title": "C++, Visual Studio Disassembly Not Availble", "body": "<p>I use MS Visual Studio 2012 and I see option \"Go to disassembly\" when debugging code. I suppose that such features can depend on Visual Studio edition. So see your version and refer to <a href=\"http://www.visualstudio.com/en-us/products/compare-visual-studio-products-vs.aspx\" rel=\"nofollow\">http://www.visualstudio.com/en-us/products/compare-visual-studio-products-vs.aspx</a></p>\n\n<p>Also, maybe some options of IDE switch this option, see <a href=\"http://http.developer.nvidia.com/NsightVisualStudio/3.2/Documentation/UserGuide/HTML/Content/PTX_SASS_Assembly_Debugging.htm\" rel=\"nofollow\">http://http.developer.nvidia.com/NsightVisualStudio/3.2/Documentation/UserGuide/HTML/Content/PTX_SASS_Assembly_Debugging.htm</a></p>\n"}], "owner": {"reputation": 1237, "user_id": 3301577, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/38f74e15567181820ab8849253d6c7d2?s=128&d=identicon&r=PG&f=1", "display_name": "Pedrumj", "link": "https://stackoverflow.com/users/3301577/pedrumj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 28461907, "answer_count": 1, "score": 0, "last_activity_date": 1423679910, "creation_date": 1423673467, "last_edit_date": 1592644375, "question_id": 28459895, "link": "https://stackoverflow.com/questions/28459895/c-visual-studio-disassembly-not-availble", "title": "C++, Visual Studio Disassembly Not Availble", "body": "<p>I'm trying to view the disassembly of my code as explained in the article below:</p>\n<p><a href=\"https://stackoverflow.com/questions/1020498/how-to-view-the-assembly-behind-the-code-using-visual-c\">How to view the assembly behind the code using Visual C++?</a></p>\n<p>But I can't seem to find the disassmebly option:\n<img src=\"https://i.stack.imgur.com/P0mvh.png\" alt=\"enter image description here\" /></p>\n<p>Any help on this issue would be most appreciated.</p>\n<p>Additional Notes: It is a win32 debug project in C++.</p>\n"}, {"tags": ["c++", "constructor", "assignment-operator"], "answers": [{"comments": [{"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 15, "user_id": 4331996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa668bacc92049c2dcefbcaf71854895?s=128&d=identicon&r=PG", "display_name": "paddy", "link": "https://stackoverflow.com/users/4331996/paddy"}, "edited": false, "score": 0, "creation_date": 1423674715, "post_id": 28459921, "comment_id": 45246609, "body": "@paddy: The default assignment operator is for copy-assignment from another <code>Test</code>, not from arbitrary types."}], "owner": {"reputation": 3993, "user_id": 125405, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/71e57d309c0a11cc78732e82e3486f3e?s=128&d=identicon&r=PG", "display_name": "wolfPack88", "link": "https://stackoverflow.com/users/125405/wolfpack88"}, "is_accepted": false, "score": 1, "last_activity_date": 1423673552, "creation_date": 1423673552, "answer_id": 28459921, "question_id": 28459826, "link": "https://stackoverflow.com/questions/28459826/conversion-constructor-clarification/28459921#28459921", "title": "Conversion constructor clarification", "body": "<p>When you write <code>t = 30</code>, your compiler creates a temporary <code>Test</code> variable, which it creates using the conversion constructor. After setting <code>t</code> equal to this temporary variable, the temporary variable is then destroyed, calling the destructor.</p>\n"}, {"owner": {"reputation": 1066, "user_id": 1628038, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1eee0c4c8933f5bcaa46b81ea1abd94c?s=128&d=identicon&r=PG", "display_name": "LeeNeverGup", "link": "https://stackoverflow.com/users/1628038/leenevergup"}, "is_accepted": false, "score": 1, "last_activity_date": 1423673558, "creation_date": 1423673558, "answer_id": 28459923, "question_id": 28459826, "link": "https://stackoverflow.com/questions/28459826/conversion-constructor-clarification/28459923#28459923", "title": "Conversion constructor clarification", "body": "<p>Because <code>t</code> is already defined, it cannot be initialized throug the convertion contructor.</p>\n\n<p>Instead, it creates a temporay <code>Test</code> object, calls the operator=, then delete it.</p>\n"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1423673564, "creation_date": 1423673564, "answer_id": 28459926, "question_id": 28459826, "link": "https://stackoverflow.com/questions/28459826/conversion-constructor-clarification/28459926#28459926", "title": "Conversion constructor clarification", "body": "<blockquote>\n  <p><em>\"why it is calling constructor and destructor?\"</em></p>\n</blockquote>\n\n<p>Because there's a (implicit) temporary instance of <code>Test</code> constructed, assigned to <code>t</code> and destructed after assignment.</p>\n"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": false, "score": 3, "last_activity_date": 1423674131, "creation_date": 1423674131, "answer_id": 28460114, "question_id": 28459826, "link": "https://stackoverflow.com/questions/28459826/conversion-constructor-clarification/28460114#28460114", "title": "Conversion constructor clarification", "body": "<p>There is no overload of <code>=</code> that can be used to assign directly from an <code>int</code> value. Your conversion constructor allows <code>30</code> to be converted to a <code>Test</code> object, which can then be assigned using the implicitly-generated copy constructor (which copies each member). So your assignment is equivalent to</p>\n\n<pre><code>t = Test(30);\n</code></pre>\n\n<p>creating and destroying a temporary object to assign from.</p>\n\n<p>You could avoid this by providing an assignment operator:</p>\n\n<pre><code>Test &amp; operator=(int i) {x = i;}\n</code></pre>\n\n<p>in which case the assignment could use this directly, equivalent to</p>\n\n<pre><code>t.operator=(30);\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4331996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa668bacc92049c2dcefbcaf71854895?s=128&d=identicon&r=PG", "display_name": "paddy", "link": "https://stackoverflow.com/users/4331996/paddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "answer_count": 4, "score": 2, "last_activity_date": 1423680173, "creation_date": 1423673269, "last_edit_date": 1423673444, "question_id": 28459826, "link": "https://stackoverflow.com/questions/28459826/conversion-constructor-clarification", "title": "Conversion constructor clarification", "body": "<pre><code>#include&lt;iostream&gt;\n\nusing namespace std;\n\nclass Test \n{\n private:\n   int x;\n public:\n    Test(int i) \n    {\n        cout&lt;&lt;\"Conversion constructor called...\"&lt;&lt;endl;\n        x = i;\n    }\n    ~Test()\n    {\n        cout&lt;&lt;\"Destructor called...\"&lt;&lt;endl;\n    }\n    void show() \n    { \n        cout&lt;&lt;\" x = \"&lt;&lt;x&lt;&lt;endl; \n    }\n};\n\nint main()\n{\n  Test t(20);\n  t.show();\n  t = 30; \n  t.show();\n\n  return 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Conversion constructor called...\n x = 20\nConversion constructor called...\nDestructor called...\n x = 30\nDestructor called...\n</code></pre>\n\n<p>When i am doing t = 30 why it is calling constructor and destructor?\nPlease explain.Many thanks in advance.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2013", "header-files", "stdafx.h"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1423674301, "post_id": 28459682, "comment_id": 45246380, "body": "You&#39;ll have to change the /Yc and /Yu compile options on every file.  This is unpractical, just use plain &quot;stdafx.h&quot; so the compile options are good.  And either move the .h file or use the compiler&#39;s Additional Include Directories setting."}], "answers": [{"comments": [{"owner": {"reputation": 1589, "user_id": 5652483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bJiX1.jpg?s=128&g=1", "display_name": "Scott Hutchinson", "link": "https://stackoverflow.com/users/5652483/scott-hutchinson"}, "edited": false, "score": 0, "creation_date": 1527096809, "post_id": 28460176, "comment_id": 88001426, "body": "This did not help in VS 2015. I added $(ProjectDir) to the &quot;Include Directories&quot; under VC++ Directories in the project properties, but I still get the same error for #include &quot;..\\..\\stdafx.h&quot;. I guess the only workaround is to use filters instead of subfolders for C++ code files."}], "owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "is_accepted": true, "score": 5, "last_activity_date": 1423674293, "creation_date": 1423674293, "answer_id": 28460176, "question_id": 28459682, "link": "https://stackoverflow.com/questions/28459682/error-c1010-unexpected-end-of-file-while-looking-for-precompiled-header-did-yo/28460176#28460176", "title": "error C1010: unexpected end of file while looking for precompiled header. Did you forget to add &#39;#include &quot;stdafx.h&quot;&#39; to your source?", "body": "<p>This is a confusion between intellisense and the compiler.</p>\n\n<p>You should be able to work around it by adding <code>$(ProjectDir)</code> to the <code>Additional Include Directories</code> option for the application and replacing the <code>\"..\\StdAfx.h\"</code> with <code>\"StdAfx.h\"</code> as intellisense should now start picking up the path.</p>\n"}], "owner": {"reputation": 148, "user_id": 4555457, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HmXoM8ETIQc/AAAAAAAAAAI/AAAAAAAAAE0/Z96TfGi6l94/photo.jpg?sz=128", "display_name": "Dar&#243;s", "link": "https://stackoverflow.com/users/4555457/dar%c3%b3s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7583, "favorite_count": 0, "accepted_answer_id": 28460176, "answer_count": 1, "score": 1, "last_activity_date": 1423674293, "creation_date": 1423672915, "question_id": 28459682, "link": "https://stackoverflow.com/questions/28459682/error-c1010-unexpected-end-of-file-while-looking-for-precompiled-header-did-yo", "title": "error C1010: unexpected end of file while looking for precompiled header. Did you forget to add &#39;#include &quot;stdafx.h&quot;&#39; to your source?", "body": "<p>I have a project, originally developed on Microsoft Visual C++ . NET, Version 7.0.9466 and it works very well. I tried to use MS 2013 to run my project, and when I try to build the project, I have this error menssage:</p>\n\n<blockquote>\n  <p>error C1010: unexpected end of file while looking for precompiled header. Did you forget to add '#include \"stdafx.h\"' to your source? </p>\n</blockquote>\n\n<p>Some actions that I already did:</p>\n\n<ul>\n<li>I Selected the option \"Use(/Yu)\" on Precompiled Header in <em>PropertyPages-> C/C++ -> Precompiled Header</em></li>\n<li>I Set the Precompiled Header File to <em>stdafx.h</em></li>\n<li>I put <code>#include \"stdafx.h\"</code> at the beginning of the .cpp file</li>\n<li>I had to change <code>#include \"stdafx.h\"</code> to <code>#include \"../stdafx.h\"</code> because I had this error message:</li>\n</ul>\n\n<blockquote>\n  <p>IntelliSense: cannot open source file \"stdafx.h\"</p>\n</blockquote>\n\n<p>Here is the .cpp file where I have this message error</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>#include \"../stdafx.h\"\r\n#include \"timedmsgbox.h\"\r\n\r\n/////////////////////////////////////////////////////////////////////////\r\n//\r\n// CDlgTimedMessageBox\r\n//\r\n/////////////////////////////////////////////////////////////////////////\r\n\r\nCMapPtrToPtr\t\tCDlgTimedMessageBox::m_mapTimerIdToClassMe;\r\nCCriticalSection\tCDlgTimedMessageBox::m_sectMap;\r\nextern BOOL AFXAPI AfxIsDescendant(HWND hWndParent, HWND hWndChild);\r\n\r\n// the static one to call the messagebox with one line\r\nUINT CDlgTimedMessageBox::TimedMessageBox(UINT flags, LPCTSTR ptszMessage, LPCTSTR ptszTitle, \r\n\t\t\t\t\t\tDWORD dwTimeout, UINT dDefaultReturn,\r\n\t\t\t\t\t\tLPCTSTR ptszMessageTimer, HWND hwndParent, BOOL *pbStoppedByUser)\r\n{\r\n\tCDlgTimedMessageBox\t\tmsgBox(flags, ptszMessage, ptszTitle, \r\n\t\t\t\t\t\t\t\t\tdwTimeout, dDefaultReturn, \r\n\t\t\t\t\t\t\t\t\tptszMessageTimer, hwndParent);\r\n\r\n\treturn msgBox.ShowMessageBox(pbStoppedByUser);\r\n}\r\n\r\nCDlgTimedMessageBox::CDlgTimedMessageBox(UINT flags, \r\n\t\t\t\t\t\t\t\tLPCTSTR ptszMessage, LPCTSTR ptszTitle, \r\n\t\t\t\t\t\t\t\tDWORD dwTimeout, UINT dDefaultReturn,\r\n\t\t\t\t\t\t\t\tLPCTSTR ptszMessageTimer, \r\n\t\t\t\t\t\t\t\tHWND hwndParent)\r\n{\r\n\tm_hParent\t\t\t= hwndParent;\r\n\tm_Message\t\t\t= ptszMessage;\r\n\tm_Title\t\t\t\t= ptszTitle;\r\n\tm_flags\t\t\t\t= flags;\r\n\tm_dwTimeout\t\t\t= dwTimeout-1;\r\n\tm_MessageTimer\t\t= ptszMessageTimer;\r\n\tm_DefaultReturn\t\t= dDefaultReturn;\r\n\t\r\n\tm_hMsgBox\t\t\t= NULL;\r\n\tm_hStaticText\t\t= NULL;\r\n\tm_hDefaultButton\t= NULL;\r\n\tm_bRunning\t\t\t= FALSE;\r\n\tm_bStoppedByTimer\t= FALSE;\r\n\r\n\tif( !m_hParent )\r\n\t{\r\n\t\tCWnd *m_pParent = AfxGetApp()-&gt;GetMainWnd();\r\n\t\tm_hParent = m_pParent-&gt;m_hWnd;\r\n\t}\r\n}\r\n\r\nCDlgTimedMessageBox::~CDlgTimedMessageBox()\r\n{\r\n}\r\n\r\n#pragma warning( push)\r\n#pragma warning (disable : 4312) // conversion to type of greater size\r\nUINT CDlgTimedMessageBox::ShowMessageBox(BOOL *pbStoppedByUser)\r\n{\r\n\t// start timer \r\n\tCDlgTimedMessageBox::m_sectMap.Lock();\r\n\t{\r\n\t\tm_idTimer = (UINT)::SetTimer(NULL, 0, 1000, (TIMERPROC) CDlgTimedMessageBox::GlobalTimerProc);\r\n\t\tCDlgTimedMessageBox::m_mapTimerIdToClassMe.SetAt((void*)m_idTimer, this);\r\n\t}\r\n\tCDlgTimedMessageBox::m_sectMap.Unlock();\r\n\t\r\n\t// show MessageBox\r\n\tm_bRunning = TRUE;\r\n\tm_dwStarted = ::GetTickCount();\r\n\t\r\n\tm_CurrentMessage = m_Message;\r\n\tif( !m_MessageTimer.IsEmpty() )\r\n\t{\r\n\t\tCString\tsecond;\r\n\t\tsecond.Format(m_MessageTimer, (m_dwTimeout+1)/1000);\r\n\t\tm_CurrentMessage.Format(\"%s%s\", m_Message, second);\r\n\t}\r\n\tUINT erg = ::MessageBox(m_hParent, m_CurrentMessage, m_Title, m_flags);\r\n\tm_bRunning = FALSE;\r\n\r\n\tCDlgTimedMessageBox::m_sectMap.Lock();\r\n\t{\r\n\t\t::KillTimer(NULL, m_idTimer);\r\n\t\tm_idTimer = 0;\r\n\t\tCDlgTimedMessageBox::m_mapTimerIdToClassMe.RemoveKey((void*)m_idTimer);\r\n\t}\r\n\tCDlgTimedMessageBox::m_sectMap.Unlock();\r\n\r\n\tif( pbStoppedByUser )\r\n\t\t*pbStoppedByUser = !m_bStoppedByTimer;\r\n\t\r\n\treturn erg;\r\n}\r\n#pragma warning( pop )\r\n\r\nvoid CALLBACK CDlgTimedMessageBox::GlobalTimerProc(HWND hwnd, UINT uiMsg, UINT_PTR idEvent, DWORD dwTime)\r\n{\r\n\t//TRACE(\"Global timer with id=%u\\n\", idEvent);\r\n\t\r\n\tCDlgTimedMessageBox\t*pMe = NULL;\r\n\t\r\n\t// Find the corresponding class by the timer-id\r\n\tCDlgTimedMessageBox::m_sectMap.Lock();\r\n\t{\r\n\t\tCDlgTimedMessageBox::m_mapTimerIdToClassMe.Lookup((void*)idEvent, (void *&amp;) pMe);\r\n\t}\t\r\n\tCDlgTimedMessageBox::m_sectMap.Unlock();\r\n\t\r\n\tif( pMe!=NULL )\r\n\t\tpMe-&gt;LocalTimerProc();\r\n}\r\n\r\nvoid CDlgTimedMessageBox::LocalTimerProc(void)\r\n{\r\n\t//TRACE(\"Local timer with id=%u (%s)\\n\", m_idTimer, m_Title);\r\n\r\n\tif( !m_bRunning )\r\n\t\treturn;\r\n\r\n\t// lookup the handles \r\n\tGetWindowHandles();\r\n\r\n\r\n\tif( !m_hStaticText || !m_hMsgBox )\r\n\t\treturn;\r\n\r\n\tDWORD now = GetTickCount()-m_dwStarted;\r\n\t\r\n\tif( now &gt;= (m_dwTimeout) )\r\n\t{\r\n\t\t// done with the box\r\n\t\tm_bStoppedByTimer = TRUE;\r\n\t\t::PostMessage(m_hMsgBox, WM_COMMAND, (WPARAM) m_DefaultReturn, (LPARAM) m_hDefaultButton);\r\n\t}\r\n\telse\r\n\t{\r\n\t\tm_CurrentMessage = m_Message;\r\n\t\r\n\t\t// not done: set text again\r\n\t\tif( !m_MessageTimer.IsEmpty() )\r\n\t\t{\r\n\t\t\tCString\tsecond;\r\n\t\t\tsecond.Format(m_MessageTimer, (100+m_dwTimeout-now)/1000);\r\n\t\t\tm_CurrentMessage.Format(\"%s%s\", m_Message, second);\r\n\t\t}\r\n\t\t::SetWindowText(m_hStaticText, m_CurrentMessage);\r\n\t}\t\r\n}\r\n\r\nvoid CDlgTimedMessageBox::GetWindowHandles(void)\r\n{\r\n\tHWND\t\thWnd;\r\n\tCWnd\t\t*pWnd;\r\n\tCString\t\ttitle;\r\n\tCPtrList\tallButtons;\r\n\r\n\t//\r\n\t// Handle of the messageBox\r\n\t//\r\n\tif( !m_hMsgBox )\r\n\t{\r\n\t\thWnd = ::GetWindow(::GetDesktopWindow(), GW_CHILD);\r\n\t\twhile( (hWnd!=NULL) &amp;&amp; (m_hMsgBox==NULL) )\r\n\t\t{\r\n\t\t\tpWnd = CWnd::FromHandle(hWnd);\r\n\t\t\tpWnd-&gt;GetWindowText(title);\r\n\r\n\t\t\tif( AfxIsDescendant(m_hParent, hWnd) &amp;&amp; ::IsWindowVisible(hWnd) &amp;&amp; (m_Title.CompareNoCase(title)==0) )\r\n\t\t\t{\r\n\t\t\t\tm_hMsgBox = hWnd;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\thWnd = ::GetWindow(hWnd, GW_HWNDNEXT);\r\n\t\t}\r\n\t}\r\n\r\n\t//\r\n\t// Handle of the static text\r\n\t// TODO only if text-replace is needed\r\n\t//\r\n\tif( m_hMsgBox &amp;&amp; !m_hStaticText )\r\n\t{\r\n\t\t// not sure if this will work always\r\n\t\t// under Win2000 it did\r\n\t\t//m_hStaticText = ::GetDlgItem(m_hMsgBox, 0xFFFF);\r\n\r\n\t\t// not sure, so lets find it dynamically!\r\n\r\n\t\tchar\t\tclassName[_MAX_PATH];\r\n\t\tCString\t\tclassNameOk(\"STATIC\");\r\n\t\tLONG\t\tid;\r\n\r\n\t\thWnd = ::GetWindow(m_hMsgBox, GW_CHILD);\r\n\t\twhile( (hWnd!=NULL) &amp;&amp; (m_hStaticText==NULL) )\r\n\t\t{\r\n\t\t\tid = ::GetWindowLong(hWnd, GWL_ID);\r\n\t\t\t\r\n\t\t\t// small ids only for buttons\r\n\t\t\tif( id &gt; IDHELP )\r\n\t\t\t{\r\n\t\t\t\tif( ::GetClassName(hWnd, className, _MAX_PATH) )\r\n\t\t\t\t{\r\n\r\n\t\t\t\t\t// looking only for a static \r\n\t\t\t\t\tif( classNameOk.CompareNoCase(className) == 0 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// not check the text\r\n\t\t\t\t\t\tpWnd = CWnd::FromHandle(hWnd);\r\n\t\t\t\t\t\tpWnd-&gt;GetWindowText(title);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif( m_CurrentMessage.CompareNoCase(title) == 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tm_hStaticText = hWnd;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tallButtons.AddTail(hWnd);\r\n\t\t\t}\r\n\r\n\t\t\thWnd = ::GetWindow(hWnd, GW_HWNDNEXT);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\t// Handle of the default button\r\n\t//\r\n\tif( m_hMsgBox &amp;&amp; !m_hDefaultButton )\r\n\t{\r\n\t\tm_hDefaultButton = ::GetDlgItem(m_hMsgBox, m_DefaultReturn);\r\n\t\t\r\n\t\t// Problem: \r\n\t\t// if generated with MB_OK the button has NOT IDOK, but IDCANCEL !!\r\n\t\t// then lets take the first button we find !\r\n\t\t// (with and IDCANCEL this works, because it is the only button\r\n\t\t// if this problem encounters also with 2 buttons, I have no chance \r\n\t\t// to find out which one is the better one!)\r\n\t\twhile( allButtons.GetCount()&gt;0 &amp;&amp; !m_hDefaultButton )\r\n\t\t{\r\n\t\t\tm_hDefaultButton = (HWND) allButtons.GetHead();\r\n\t\t\tallButtons.RemoveHead();\r\n\t\t\t\r\n\t\t\tif( m_hDefaultButton )\r\n\t\t\t\tm_DefaultReturn = ::GetWindowLong(m_hDefaultButton, GWL_ID);\r\n\t\t}\r\n\t}\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>and here is the stdafx.h file</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>// stdafx.h : include file for standard system include files,\r\n// or project specific include files that are used frequently,\r\n// but are changed infrequently\r\n\r\n#pragma once\r\n\r\n#ifndef VC_EXTRALEAN\r\n#define VC_EXTRALEAN\t\t// Exclude rarely-used stuff from Windows headers\r\n#endif\r\n\r\n// Modify the following defines if you have to target a platform prior to the ones specified below.\r\n// Refer to MSDN for the latest info on corresponding values for different platforms.\r\n#ifndef WINVER\t\t\t\t// Allow use of features specific to Windows 95 and Windows NT 4 or later.\r\n//#define WINVER 0x0400\t\t// Change this to the appropriate value to target Windows 98 and Windows 2000 or later.\r\n#define WINVER 0x0602       // SMS2014XXXX altera\u00e7\u00e3o para funcionar windows 8\r\n#endif\r\n\r\n#ifndef _WIN32_WINNT\t\t// Allow use of features specific to Windows NT 4 or later.\r\n//#define _WIN32_WINNT 0x0400\t\t// Change this to the appropriate value to target Windows 98 and Windows 2000 or later.\r\n#define _WIN32_WINNT 0x0602       // SMS2014XXXX altera\u00e7\u00e3o para funcionar windows 8\r\n#endif\t\t\t\t\t\t\r\n\r\n#ifndef _WIN32_WINDOWS\t\t// Allow use of features specific to Windows 98 or later.\r\n#define _WIN32_WINDOWS 0x0410 // Change this to the appropriate value to target Windows Me or later.\r\n#endif\r\n\r\n#ifndef _WIN32_IE\t\t\t// Allow use of features specific to IE 4.0 or later.\r\n#define _WIN32_IE 0x0400\t// Change this to the appropriate value to target IE 5.0 or later.\r\n#endif\r\n\r\n#define _ATL_CSTRING_EXPLICIT_CONSTRUCTORS\t// some CString constructors will be explicit\r\n\r\n// turns off MFC's hiding of some common and often safely ignored warning messages\r\n#define _AFX_ALL_WARNINGS\r\n\r\n#include &lt;afxwin.h&gt;         // MFC core and standard components\r\n#include &lt;afxext.h&gt;         // MFC extensions\r\n#include &lt;afxdisp.h&gt;        // MFC Automation classes\r\n#include &lt;afxdtctl.h&gt;\t\t// MFC support for Internet Explorer 4 Common Controls\r\n\r\n#ifndef _AFX_NO_AFXCMN_SUPPORT\r\n#include &lt;afxcmn.h&gt;\t\t\t// MFC support for Windows Common Controls\r\n#endif // _AFX_NO_AFXCMN_SUPPORT\r\n\r\n#include &lt;afxdhtml.h&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I am new on visual studio and I have no ideia what's is wrong on all of this. Someone could help me with it?</p>\n"}, {"tags": ["c++", "file"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1423673042, "post_id": 28459621, "comment_id": 45245590, "body": "You might want to look at <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\">std::unordered_map</a> to store the file positions against the keys. You can use <a href=\"http://en.cppreference.com/w/cpp/io/basic_ifstream\" rel=\"nofollow noreferrer\">std::ifstream</a> and its <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/seekg\" rel=\"nofollow noreferrer\">seekg();</a> member function to locate the line in the file."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1423673081, "post_id": 28459621, "comment_id": 45245610, "body": "No - unless the lines have constant width."}, {"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 0, "creation_date": 1423673408, "post_id": 28459621, "comment_id": 45245831, "body": "What do you want to do in O(1)? Searching a key/value pair or seeking file to read it?"}, {"owner": {"reputation": 5485, "user_id": 95976, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057b53dec34e734f69d166d89d3fbe4d?s=128&d=identicon&r=PG", "display_name": "tofi9", "link": "https://stackoverflow.com/users/95976/tofi9"}, "edited": false, "score": 0, "creation_date": 1423673616, "post_id": 28459621, "comment_id": 45245942, "body": "Assuming your file is read-only and the position of your value never changes, store the <code>long offset</code> that points to the first character of your value (for <code>seek()</code>) and <code>long size</code> that indicates how long your value string is (for <code>read()</code>). There is no hard guarantee of O(1) constant time, as files can be fragmented over the disk and can be cached."}, {"owner": {"reputation": 95, "user_id": 2970271, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e6313b680f85c949a7d696d29c07a73?s=128&d=identicon&r=PG&f=1", "display_name": "kira_111", "link": "https://stackoverflow.com/users/2970271/kira-111"}, "reply_to_user": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 0, "creation_date": 1423675646, "post_id": 28459621, "comment_id": 45247157, "body": "@AdrianoRepetti - Seeking the file, but Marcus has already answered that. Thanks though."}, {"owner": {"reputation": 95, "user_id": 2970271, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e6313b680f85c949a7d696d29c07a73?s=128&d=identicon&r=PG&f=1", "display_name": "kira_111", "link": "https://stackoverflow.com/users/2970271/kira-111"}, "reply_to_user": {"reputation": 5485, "user_id": 95976, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057b53dec34e734f69d166d89d3fbe4d?s=128&d=identicon&r=PG", "display_name": "tofi9", "link": "https://stackoverflow.com/users/95976/tofi9"}, "edited": false, "score": 0, "creation_date": 1423675675, "post_id": 28459621, "comment_id": 45247177, "body": "@taoufik - Thanks. Makes sense.  Thanks to Galik as well."}], "answers": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": true, "score": 4, "last_activity_date": 1423673051, "creation_date": 1423673051, "answer_id": 28459743, "question_id": 28459621, "link": "https://stackoverflow.com/questions/28459621/how-to-acces-a-line-in-a-file-in-o1-by-preprocessing-the-file/28459743#28459743", "title": "How to acces a line in a file in O(1) by preprocessing the file?", "body": "<p><code>fseek()</code> is simply the system call to move your read/write pointer in your file; the complexity of that is completely up to your OS and your file system, and of course your storage device (eg. on an SSD, <code>fseek(x)</code> will have a time that is invariant of the last and the new position, whilst on a tape drive, things will be depend on relative distances. Unless your OS starts caching file contents in RAM, which it will stop doing once you run out of free RAM).</p>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 2970271, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e6313b680f85c949a7d696d29c07a73?s=128&d=identicon&r=PG&f=1", "display_name": "kira_111", "link": "https://stackoverflow.com/users/2970271/kira-111"}, "edited": false, "score": 0, "creation_date": 1423675477, "post_id": 28460099, "comment_id": 45247051, "body": "Thanks for the reply."}], "owner": {"reputation": 985, "user_id": 1015143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pEBlC.jpg?s=128&g=1", "display_name": "Timothy Johns", "link": "https://stackoverflow.com/users/1015143/timothy-johns"}, "is_accepted": false, "score": 3, "last_activity_date": 1423674104, "creation_date": 1423674104, "answer_id": 28460099, "question_id": 28459621, "link": "https://stackoverflow.com/questions/28459621/how-to-acces-a-line-in-a-file-in-o1-by-preprocessing-the-file/28460099#28460099", "title": "How to acces a line in a file in O(1) by preprocessing the file?", "body": "<p>In lieu of rolling your own indexing of the file as you described, you might consider loading it into one of the many open source C/C++ databases out there, especially since your data is organized as key-value-pairs, presumably with small keys and large or arbitrary values.</p>\n\n<p>One suggestion is Google's LevelDB, but there are several other great options as well, depending on your other criteria beyond performance.  </p>\n\n<p><a href=\"http://google-opensource.blogspot.com/2011/07/leveldb-fast-persistent-key-value-store.html\" rel=\"nofollow\">http://google-opensource.blogspot.com/2011/07/leveldb-fast-persistent-key-value-store.html</a></p>\n\n<p>Most should be configurable for constant time access (or at least nearly enough to constant time for all practical purposes).</p>\n"}], "owner": {"reputation": 95, "user_id": 2970271, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e6313b680f85c949a7d696d29c07a73?s=128&d=identicon&r=PG&f=1", "display_name": "kira_111", "link": "https://stackoverflow.com/users/2970271/kira-111"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 28459743, "answer_count": 2, "score": 2, "last_activity_date": 1423674104, "creation_date": 1423672746, "question_id": 28459621, "link": "https://stackoverflow.com/questions/28459621/how-to-acces-a-line-in-a-file-in-o1-by-preprocessing-the-file", "title": "How to acces a line in a file in O(1) by preprocessing the file?", "body": "<p>In C++, I would like to access a line in a file. The line holds a key, value pair. I don't have enough in program memory to store this in a map because the value size is too large.</p>\n\n<p>I would like to store the positions of the keys in the file in a map. Then access their values when a query comes in. Is it possible to do this in O(1)? If so, what should I use in C++ i.e. fseek(),etc? Also, what needs to stored in terms of position of the key?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "class", "object", "crash", "delete-operator"], "comments": [{"owner": {"reputation": 7313, "user_id": 109960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f6830f73ecf9a6bda6d1fe61f2655cf0?s=128&d=identicon&r=PG", "display_name": "Eric Fortin", "link": "https://stackoverflow.com/users/109960/eric-fortin"}, "edited": false, "score": 0, "creation_date": 1423672612, "post_id": 28459526, "comment_id": 45245304, "body": "How is <code>ob2</code> allocated ?"}, {"owner": {"reputation": 1066, "user_id": 1628038, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1eee0c4c8933f5bcaa46b81ea1abd94c?s=128&d=identicon&r=PG", "display_name": "LeeNeverGup", "link": "https://stackoverflow.com/users/1628038/leenevergup"}, "edited": false, "score": 3, "creation_date": 1423672626, "post_id": 28459526, "comment_id": 45245313, "body": "Why do you delete ob1 in te destructor?"}], "answers": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 7, "last_activity_date": 1423673209, "last_edit_date": 1423673209, "creation_date": 1423672678, "answer_id": 28459597, "question_id": 28459526, "link": "https://stackoverflow.com/questions/28459526/c-delete-object-causes-crash/28459597#28459597", "title": "C++ delete [] object causes crash", "body": "<p>You can only call <code>delete[]</code> on pointers returned by <code>new[]</code>, and you must do this exactly once. The same applies for <code>delete</code> and <code>new</code>.</p>\n\n<p>Particularly, you cannot <code>delete[] obj1</code> because it is a built in array, not a pointer, and <code>obj2</code> only if it points to not-freed memory allocated with <code>new[]</code>. </p>\n"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": false, "score": 6, "last_activity_date": 1423672783, "last_edit_date": 1495540278, "creation_date": 1423672783, "answer_id": 28459634, "question_id": 28459526, "link": "https://stackoverflow.com/questions/28459526/c-delete-object-causes-crash/28459634#28459634", "title": "C++ delete [] object causes crash", "body": "<pre><code>delete [] ob1;\n</code></pre>\n\n<p>You didn't <code>new obj1</code>; it's an array contained in the object. Deleting anything that wasn't allocated with <code>new</code> gives undefined behaviour, which might well be a crash.</p>\n\n<p>If you're going to juggle pointers like this, then you'll need to learn about the <a href=\"https://stackoverflow.com/questions/4172722\">Rule of Three</a> to avoid the next deathtrap you'll encounter. Then learn about <a href=\"https://stackoverflow.com/questions/395123\">RAII and smart pointers</a>, and forget about this dangerous nonsense.</p>\n"}], "owner": {"reputation": 245, "user_id": 4555670, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b5dc55a1c06c2816060f034afe52460c?s=128&d=identicon&r=PG&f=1", "display_name": "hakeris1010", "link": "https://stackoverflow.com/users/4555670/hakeris1010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8422, "favorite_count": 0, "accepted_answer_id": 28459597, "answer_count": 2, "score": 4, "last_activity_date": 1436105599, "creation_date": 1423672502, "last_edit_date": 1436105599, "question_id": 28459526, "link": "https://stackoverflow.com/questions/28459526/c-delete-object-causes-crash", "title": "C++ delete [] object causes crash", "body": "<p>I made a dynamic array of objects. When I call delete[] , program crashes and stops responding. But it does strange behavior: calls all destructors and crashes. look at this code and output. All the memory for all arrays is allocated.</p>\n\n<pre><code>//main file\n#include \"myobject.h\"\n\nint size;\nmyObject *foo;\n\n//some operations to estimate size\n\nfoo = new myObject[size];\n\n//some operations with myObject\n\nstd::cout&lt;&lt;\"size: \"&lt;&lt;size&lt;&lt;\"\\n\";\nstd::cout&lt;&lt;\"Deleting object\\n\";\n\nsize=0;\ndelete [] foo;\n</code></pre>\n\n<p>Next file:</p>\n\n<pre><code>//myobject.h\n\nclass myObject\n{\n    public:\n    int number;\n\n    Object1 ob1[64]\n    Object2 *ob2;\n\n    myObject(){ };\n    ~myObject()\n    {\n        std::cout&lt;&lt;\"delete \"&lt;&lt;number&lt;&lt;\"\\n\";\n\n        delete [] ob1;\n        delete [] ob2;\n    };\n}\n</code></pre>\n\n<p>And the output:</p>\n\n<pre><code>size: 11\n\nDeleting object\n\ndelete 10\n\ndelete 9\n\ndelete 8\n\ndelete 7\n\ndelete 6\n\ndelete 5\n\ndelete 4\n\ndelete 3\n\ndelete 2\n\ndelete 1\n\ndelete 0\n</code></pre>\n\n<p>And then it crashes and stops responding. </p>\n"}, {"tags": ["c++", "qt", "progress-bar"], "answers": [{"comments": [{"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1423673988, "post_id": 28459815, "comment_id": 45246191, "body": "Thanks, I think this could solve other issues I faced, like my internet connection was down the other day and the application wouldn&#39;t start for long long time because it was not able to find the mapped drive."}], "owner": {"reputation": 28669, "user_id": 3049264, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MNMWc.jpg?s=128&g=1", "display_name": "Nejat", "link": "https://stackoverflow.com/users/3049264/nejat"}, "is_accepted": false, "score": 1, "last_activity_date": 1423673215, "creation_date": 1423673215, "answer_id": 28459815, "question_id": 28459518, "link": "https://stackoverflow.com/questions/28459518/how-to-show-progress-bar-from-a-function-in-model/28459815#28459815", "title": "How to show progress bar from a function in model?", "body": "<p>You should move <code>dirModel</code> to a new thread in order to prevent <code>export()</code> from blocking main thread and the UI. This can be done like:</p>\n\n<pre><code>QThread * th = new QThread();\ndirModel-&gt;moveToThread(th);\n\nQObject::connect(th,SIGNAL(started()),dirModel,SLOT(OnStarted()));\nQObject::connect(th,SIGNAL(finished()),dirModel,SLOT(OnFinished()));\n\nth-&gt;start();\n</code></pre>\n\n<p>Your initialization and termination tasks in <code>dirModel</code> should be done in <code>OnStarted()</code> and <code>OnFinished()</code> slots respectively.</p>\n\n<p>You should use a signal in your class to notify the progress bar in the user interface of the value for the progress. In your <code>export()</code> function you should emit the signal with the appropriate value. The signal is like:</p>\n\n<pre><code>void progressChanged(int val);\n</code></pre>\n\n<p>You should also connect the <code>progressChanged(int)</code> signal to the <code>setValue(int value)</code> slot of the <code>QProgressBar</code>.</p>\n\n<p>And the last point is that you should not call <code>export()</code> directly when it is in an other thread. The correct way is defining <code>export()</code> as a slot and connecting a signal to that slot and emitting the signal when you want to call <code>export()</code>.</p>\n"}], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1432550525, "creation_date": 1423672475, "last_edit_date": 1432550525, "question_id": 28459518, "link": "https://stackoverflow.com/questions/28459518/how-to-show-progress-bar-from-a-function-in-model", "title": "How to show progress bar from a function in model?", "body": "<p>I have function, <code>export()</code> in my <code>QFileSystemModel</code> derived class. Now I want to show progress bar as this function does it work. I obvioulsy don't want to popup <code>QProgressDialog</code>from there since GUI should be seperate.</p>\n\n<pre><code>void MainWindow::on_pushButtonConvert_clicked()\n{\n    QString rootPath = ui-&gt;lineEditSourceFolder-&gt;text();\n\n    QString destPath = ui-&gt;lineEditDestFolder-&gt;text();\n\n    dirModel-&gt;convert(rootPath, destPath); // dirModel is QFileSystemModel derived member variable\n}\n</code></pre>\n\n<p>Before moving <code>convert()</code> to model, it was in my <code>MainWindow</code> class. This function itself was creating <code>QProgressDialog</code> but now after moving to mode, it should be prohibited from creating it so where do I create the progress?</p>\n\n<p>I got a hint from another post that I should be using signal and slots but how here?</p>\n"}, {"tags": ["c++", "interprocess"], "comments": [{"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 1, "creation_date": 1423672995, "post_id": 28459471, "comment_id": 45245551, "body": "What&#39;s the problem ? Here you use <code>CreateProcess</code>, then wait for it to finish with <code>WaitForSingleObject</code>. Just remove the wait and it will not wait."}, {"owner": {"reputation": 3421, "user_id": 1206800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9d34e72e6421ad14761ca7c28c9d26f4?s=128&d=identicon&r=PG", "display_name": "Anthea", "link": "https://stackoverflow.com/users/1206800/anthea"}, "reply_to_user": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1423673918, "post_id": 28459471, "comment_id": 45246151, "body": "awww, moments when it&#39;s time to stop working and go home :D Thanks alot!"}], "answers": [{"owner": {"reputation": 4071, "user_id": 971443, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0398dc962d5dabe7e10ce56bc6aeb672?s=128&d=identicon&r=PG", "display_name": "Zac", "link": "https://stackoverflow.com/users/971443/zac"}, "is_accepted": false, "score": 0, "last_activity_date": 1602000217, "creation_date": 1602000217, "answer_id": 64229625, "question_id": 28459471, "link": "https://stackoverflow.com/questions/28459471/createprocess-not-in-primary-thread/64229625#64229625", "title": "CreateProcess not in primary thread", "body": "<p><em>Transforming the comment by ElderBug in a reply</em></p>\n<p>The problem in your code is the presence of an infinite wait after the <code>CreateProcess</code> call:</p>\n<blockquote>\n<p>WaitForSingleObject( pi.hProcess, INFINITE );</p>\n</blockquote>\n<p>Just comment it and the program execution will not stop.</p>\n<p>I also did this same error and I stumbled in this SO question; the fact is that many of us get the code from the MSDN example <a href=\"https://docs.microsoft.com/it-it/windows/win32/procthread/creating-processes\" rel=\"nofollow noreferrer\">here</a> (without much attention), which has in fact this infinite wait.</p>\n"}], "owner": {"reputation": 3421, "user_id": 1206800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9d34e72e6421ad14761ca7c28c9d26f4?s=128&d=identicon&r=PG", "display_name": "Anthea", "link": "https://stackoverflow.com/users/1206800/anthea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1029, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1602000217, "creation_date": 1423672358, "question_id": 28459471, "link": "https://stackoverflow.com/questions/28459471/createprocess-not-in-primary-thread", "title": "CreateProcess not in primary thread", "body": "<p>I use CreateProcess() to start a other programm from my C++ code. \nThe <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx\" rel=\"nofollow\">helppage</a> says that it</p>\n\n<blockquote>\n  <p>Creates a new process and its primary thread. The new process runs in the security context of the calling process.</p>\n</blockquote>\n\n<p>I would like to have it in his own thread, so the application would keep on going. Is there any simple way to do so? I am not familar with boost and Co.</p>\n\n<p>My code: </p>\n\n<pre><code>bool startup(LPWSTR lpApplicationName)\n{\n   STARTUPINFO si;\n    PROCESS_INFORMATION pi;\n\n    ZeroMemory( &amp;si, sizeof(si) );\n    si.cb = sizeof(si);\n    ZeroMemory( &amp;pi, sizeof(pi) );\n\n    // Start the child process. \n    if( !CreateProcess( NULL,   // No module name (use command line)\n        lpApplicationName,        // Command line\n        NULL,           // Process handle not inheritable\n        NULL,           // Thread handle not inheritable\n        FALSE,          // Set handle inheritance to FALSE\n        0,              // No creation flags\n        NULL,           // Use parent's environment block\n        NULL,           // Use parent's starting directory \n        &amp;si,            // Pointer to STARTUPINFO structure\n        &amp;pi )           // Pointer to PROCESS_INFORMATION structure\n    ) \n    {\n        printf( \"CreateProcess failed (%d).\\n\", GetLastError() );\n        return false;\n    }\n\n    // Wait until child process exits.\n    WaitForSingleObject( pi.hProcess, INFINITE );\n\n    // Close process and thread handles. \n    CloseHandle( pi.hProcess );\n    CloseHandle( pi.hThread );\n    return true;\n}\n</code></pre>\n\n<p>and how to call the function: </p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[])\n{\nwchar_t path[] = L\"C:\\\\path\\\\to\\\\paridise.exe\";\nstartup(path);\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "multithreading", "timeout", "client-server"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1423672075, "post_id": 28459189, "comment_id": 45244922, "body": "Note that &#39;pthread_create( &amp;thread_id , NULL ,  connection_handler , (void*) &amp;new_socket), is dangerous, even though the first thing you do in the client-server thread is dereference it and store the sock locally.  If two clients connect in quick succession, &#39;new_socket&#39; may be overwritten by a second accept() return before the client-server thread can get at it."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1423672261, "post_id": 28459189, "comment_id": 45245055, "body": "Set the SO_RCVTIMEO option in the sock received in the client-server thread, (see other comment !!)?"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 3389896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e59a7dddb8ff0734eed8e22f20673bd?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian B", "link": "https://stackoverflow.com/users/3389896/sebastian-b"}, "edited": false, "score": 0, "creation_date": 1423683052, "post_id": 28460378, "comment_id": 45251517, "body": "Ok it almost works, anyway I still can&#39;t cout a msg with time."}, {"owner": {"reputation": 532, "user_id": 1125868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea68b48580e664f10518f86293b74f9?s=128&d=identicon&r=PG", "display_name": "sanjayk79", "link": "https://stackoverflow.com/users/1125868/sanjayk79"}, "reply_to_user": {"reputation": 55, "user_id": 3389896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e59a7dddb8ff0734eed8e22f20673bd?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian B", "link": "https://stackoverflow.com/users/3389896/sebastian-b"}, "edited": false, "score": 0, "creation_date": 1423710040, "post_id": 28460378, "comment_id": 45262336, "body": "You mean can&#39;t cout when recv times out?"}, {"owner": {"reputation": 55, "user_id": 3389896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e59a7dddb8ff0734eed8e22f20673bd?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian B", "link": "https://stackoverflow.com/users/3389896/sebastian-b"}, "edited": false, "score": 0, "creation_date": 1423995039, "post_id": 28460378, "comment_id": 45365926, "body": "I mean, cant print when that delay is over. So if it checks for messages for 20sec and it didn&#39;t get any of them, then put msg to user and loop for messages again. So it&#39;s like infinity loop, but if noone use that port for 20sec it tells it with message but still waiting for new messages."}, {"owner": {"reputation": 532, "user_id": 1125868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea68b48580e664f10518f86293b74f9?s=128&d=identicon&r=PG", "display_name": "sanjayk79", "link": "https://stackoverflow.com/users/1125868/sanjayk79"}, "reply_to_user": {"reputation": 55, "user_id": 3389896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e59a7dddb8ff0734eed8e22f20673bd?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian B", "link": "https://stackoverflow.com/users/3389896/sebastian-b"}, "edited": false, "score": 0, "creation_date": 1424073949, "post_id": 28460378, "comment_id": 45387890, "body": "Could not follow your question fully. When you set the socket with SO_RCVTIMEO option, your read will timeout after every specified time (20s here). When you put this read in infinite loop, you&#39;ll check for errno only for timeouts (EAGAINA/EWOULDBLOCK) else break for other error."}], "owner": {"reputation": 532, "user_id": 1125868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea68b48580e664f10518f86293b74f9?s=128&d=identicon&r=PG", "display_name": "sanjayk79", "link": "https://stackoverflow.com/users/1125868/sanjayk79"}, "is_accepted": true, "score": 0, "last_activity_date": 1423674892, "creation_date": 1423674892, "answer_id": 28460378, "question_id": 28459189, "link": "https://stackoverflow.com/questions/28459189/how-to-print-datetime-every-20sec-if-i-didnt-get-message-from-client/28460378#28460378", "title": "How to print datetime every 20sec if I didn&#39;t get message from client", "body": "<p>You need to set socket option to SO_RCVTIMEO. Refer the following link for more info on this socket option.</p>\n\n<p><a href=\"http://linux.die.net/man/3/setsockopt\" rel=\"nofollow\">http://linux.die.net/man/3/setsockopt</a></p>\n\n<p>your code in connection_handler should set this option as below</p>\n\n<pre><code>struct timeval tv; \ntv.tv_sec = 20;  /* 20 Secs Timeout */\n\nsetsockopt(sock, SOL_SOCKET, SO_RCVTIMEO,(struct timeval *)&amp;tv,sizeof(struct timeval));\n\n/*Now you should read*/\n</code></pre>\n\n<p>Your read method would unblock after specified time of 20 seconds with errno set to EAGAIN EWOULDBLOCK. You could handle this errno in the loop condition to get the desired functionality.</p>\n"}], "owner": {"reputation": 55, "user_id": 3389896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e59a7dddb8ff0734eed8e22f20673bd?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian B", "link": "https://stackoverflow.com/users/3389896/sebastian-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 28460378, "answer_count": 1, "score": 1, "last_activity_date": 1423674892, "creation_date": 1423671518, "question_id": 28459189, "link": "https://stackoverflow.com/questions/28459189/how-to-print-datetime-every-20sec-if-i-didnt-get-message-from-client", "title": "How to print datetime every 20sec if I didn&#39;t get message from client", "body": "<p>I've just created client - server communication via multithreading.\nMy problem is that I want to display a message after every 20 seconds when no message has been received. </p>\n\n<p>Here's my code:</p>\n\n<pre><code>int main(int argc , char *argv[])\n{\n    int socket_desc , new_socket , c;\n    struct sockaddr_in server , address;\n\n    socket_desc = socket(AF_INET , SOCK_STREAM , 0);\n    if (socket_desc == -1)\n    {\n        perror(\"socket failed\");\n        exit(EXIT_FAILURE);\n    }\n\n    struct timeval timeout;\n    timeout.tv_sec = 3;\n    timeout.tv_usec = 0;\n\n//  if (setsockopt (socket_desc, SOL_SOCKET, SO_RCVTIMEO, (char *)&amp;timeout, sizeof(timeout)) &lt; 0)\n//      perror(\"setsockopt failed\\n\");\n\n//  if (setsockopt (socket_desc, SOL_SOCKET, SO_SNDTIMEO, (char *)&amp;timeout, sizeof(timeout)) &lt; 0)\n//      perror(\"setsockopt failed\\n\");\n\n    server.sin_family = AF_INET;\n    server.sin_addr.s_addr = INADDR_ANY;\n    server.sin_port = htons( PORT );\n\n    if( bind(socket_desc,(struct sockaddr *)&amp;server , sizeof(server)) &lt; 0)\n    {\n        perror(\"bind failed\");\n        exit(EXIT_FAILURE);\n    }\n\n    listen(socket_desc , 3);\n\n    puts(\"Oczekiwanie na po\u0142\u0105czenia ...\");\n    c = sizeof(struct sockaddr_in);\n    pthread_t thread_id;\n\n    while( (new_socket = accept(socket_desc, (struct sockaddr *)&amp;address, (socklen_t*)&amp;c)) )\n    {\n        printf(\"Po\u0142\u0105czono z nowym klientem, socket fd: %d , ip: %s , port: %d \\n\" , new_socket , inet_ntoa(address.sin_addr) , ntohs(address.sin_port));\n\n        if( pthread_create( &amp;thread_id , NULL ,  connection_handler , (void*) &amp;new_socket) &lt; 0)\n        {\n            perror(\"ERROR: nie mo\u017cna utworzy\u0107 w\u0105tku\");\n            exit(EXIT_FAILURE);\n        }\n    }\n\n    if (new_socket &lt; 0)\n    {\n        perror(\"accept failed\");\n        exit(EXIT_FAILURE);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>and handler function:</p>\n\n<pre><code>void *connection_handler(void *socket_desc)\n{\n    int sock = *(int*)socket_desc;\n    int read_size;\n    char *message , client_message[2000];\n\n    message = \"Nazwi\u0105zano po\u0142\u0105czenie z serwerem \\r\\n\";\n    write(sock , message , strlen(message));\n\n    //przetwarzanie wiadomosci\n    while( (read_size = recv(sock , client_message , 2000 , 0)) &gt; 0 )\n    {\n        client_message[read_size] = '\\0';\n\n        printf(\"%s\", client_message);\n\n        memset(client_message, 0, 2000);\n    }\n\n    if(read_size == 0)\n    {\n        printf(\"Po\u0142\u0105czenie z klientem zosta\u0142o przerwane\\n\");\n        fflush(stdout);\n    }\n    else if(read_size == -1)\n    {\n        perror(\"recv failed\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I would like get the same result as Select here:</p>\n\n<pre><code>struct timeval tv;\ntv.tv_sec = 20;\ntv.tv_usec = 0;\n\nactivity = select( max_sd + 1 , &amp;readfds , NULL , NULL , &amp;tv);\n\n    if (activity == -1)\n       perror(\"select() failed\");\n    else if (activity){\n        tv.tv_sec = delay;\n    }\n    else{\n        time_t t = time(0);\n        cout &lt;&lt; \"DELAY MESSAGE: \" &lt;&lt; currentDateTime() &lt;&lt; endl;\n        tv.tv_sec += delay;\n    }\n</code></pre>\n\n<p>Any suggestions? Thanks a lot for any help!</p>\n"}, {"tags": ["c++", "visual-studio-2013"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1423675015, "post_id": 28458964, "comment_id": 45246788, "body": "Works fine.  You, somehow, didn&#39;t get the Linker &gt; Input &gt; Additional Dependencies set correctly.  Try <code>#pragma comment(lib, &quot;htmlhelp.lib&quot;)</code> instead."}, {"owner": {"reputation": 307, "user_id": 4541524, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d05e667a0169a64081a18238d45d82ad?s=128&d=identicon&r=PG&f=1", "display_name": "Shrek", "link": "https://stackoverflow.com/users/4541524/shrek"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1423838613, "post_id": 28458964, "comment_id": 45323241, "body": "I have now tried that but still get the same errors."}], "owner": {"reputation": 307, "user_id": 4541524, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d05e667a0169a64081a18238d45d82ad?s=128&d=identicon&r=PG&f=1", "display_name": "Shrek", "link": "https://stackoverflow.com/users/4541524/shrek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 842, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1423671457, "creation_date": 1423670887, "last_edit_date": 1423671457, "question_id": 28458964, "link": "https://stackoverflow.com/questions/28458964/adding-htmlhelp-to-project", "title": "Adding htmlhelp to project", "body": "<p>I'm trying, without much luck, to add chm options to an existing project.</p>\n\n<p><code>Main.cpp</code> has this:</p>\n\n<pre><code>#include \"HtmlHelp.h\"\n\nint OpenHelp(LPTSTR arg1)\n{\n  HWND _Hhdl = HtmlHelp(GetDesktopWindow(), arg1, HH_DISPLAY_TOPIC, NULL);\n  return 1;\n}\n</code></pre>\n\n<p><code>htmlhelp.lib</code> is set in <code>Linker/Input/additional Dependencies</code>.</p>\n\n<p>The error I'm getting is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>main.obj : error LNK2019: unresolved external symbol _HtmlHelpW@16 referenced in function \"int __cdecl OpenHelp(wchar_t *)\" (?OpenHelp@@YAHPA_W@Z)\n</code></pre>\n\n<p>I'm new to C++ so I'm assuming my function is at fault somehow. </p>\n\n<p>The idea was the function would be passed a sting in the <code>\"C:\\Help.chm\\::/Topic.html\"</code> format.</p>\n"}, {"tags": ["c++", "opengl", "matrix", "glm-math"], "comments": [{"owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "edited": false, "score": 0, "creation_date": 1423671046, "post_id": 28458951, "comment_id": 45244275, "body": "did you try the normal scaling matrix?"}], "answers": [{"owner": {"reputation": 68, "user_id": 4543947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3232b65d4e35c41e1b6b10259c5675a9?s=128&d=identicon&r=PG&f=1", "display_name": "theoemms", "link": "https://stackoverflow.com/users/4543947/theoemms"}, "is_accepted": false, "score": 0, "last_activity_date": 1423672725, "last_edit_date": 1423672725, "creation_date": 1423671886, "answer_id": 28459309, "question_id": 28458951, "link": "https://stackoverflow.com/questions/28458951/how-to-scale-a-matrix-obtained-with-glmlookat/28459309#28459309", "title": "How to scale a matrix obtained with glm::lookat()?", "body": "<p>In terms of matrix transformations, you can start with a scale and apply the <code>glm::lookAt()</code> matrix afterwards. I'm not familiar with glm, but I have used GLUT before. You should be able to do a matrix multiplication like this (I'm assuming that you've already transformed everything into scene space, defined all the variables etc.)</p>\n\n<pre><code>\n    TransformedVector = glm::lookAt(cameraPosition,\n                                    cameraTarget,  \n                                    upVector) * \n                        glm::scale(scalingFactor, \n                                  scalingFactor, \n                                  scalingFactor) * \n                        OriginalVector;\n</code></pre>\n\n<p>If this behaves peculiarly try swapping the <code>glm::lookAt()</code> and <code>glm::scale()</code> order.</p>\n"}], "owner": {"reputation": 10784, "user_id": 620863, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-Mqgo9PO_taA/AAAAAAAAAAI/AAAAAAAAABM/8h3wY8pcFbg/photo.jpg?sz=128", "display_name": "Anne Quinn", "link": "https://stackoverflow.com/users/620863/anne-quinn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 366, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495319483, "creation_date": 1423670812, "last_edit_date": 1495319483, "question_id": 28458951, "link": "https://stackoverflow.com/questions/28458951/how-to-scale-a-matrix-obtained-with-glmlookat", "title": "How to scale a matrix obtained with glm::lookat()?", "body": "<p>I am trying to create an orthographic view (separate from the final perspective view).  I know the view's scale, position, it's up vector, and the point it's looking at.  So it seems easiest to simply use <code>glm::lookAt()</code> to create the view matrix, except there's no way to specify scale.</p>\n\n<p>Is there a way to introduce scaling with <code>glm::lookAt()</code>?  I don't think it's possible to scale the matrix made by lookAt, since scaling needs to happen first to get the 'expected' result (objects appearing larger or smaller, like zooming a camera in or out).  I may be wrong there though.</p>\n\n<p>If it's not possible while using lookAt, is there a series of glm functions that would be equivalent?</p>\n"}, {"tags": ["android", "c++", "android-ndk"], "comments": [{"owner": {"reputation": 5485, "user_id": 95976, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057b53dec34e734f69d166d89d3fbe4d?s=128&d=identicon&r=PG", "display_name": "tofi9", "link": "https://stackoverflow.com/users/95976/tofi9"}, "edited": false, "score": 0, "creation_date": 1423670810, "post_id": 28458721, "comment_id": 45244126, "body": "May be you&#39;d like to share some of those errors with us?"}, {"owner": {"reputation": 3496, "user_id": 1564652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5cBHJ.jpg?s=128&g=1", "display_name": "TooManyEduardos", "link": "https://stackoverflow.com/users/1564652/toomanyeduardos"}, "reply_to_user": {"reputation": 5485, "user_id": 95976, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057b53dec34e734f69d166d89d3fbe4d?s=128&d=identicon&r=PG", "display_name": "tofi9", "link": "https://stackoverflow.com/users/95976/tofi9"}, "edited": false, "score": 0, "creation_date": 1423671863, "post_id": 28458721, "comment_id": 45244776, "body": "I just made an edit that includes a short list of the errors I get"}, {"owner": {"reputation": 5485, "user_id": 95976, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057b53dec34e734f69d166d89d3fbe4d?s=128&d=identicon&r=PG", "display_name": "tofi9", "link": "https://stackoverflow.com/users/95976/tofi9"}, "edited": false, "score": 0, "creation_date": 1423672980, "post_id": 28458721, "comment_id": 45245540, "body": "1) the error seems to be related to some <code>.cpp</code> files missing in your Application.mk (for example, the file that implements <code>InteractionManager::OnInteractionUpdate(...)</code>). 2) You can use llvm&#39;s libc by setting the value <a href=\"http://mobilepearls.com/labs/native-android-api/ndk/docs/CPLUSPLUS-SUPPORT.html\" rel=\"nofollow noreferrer\"><code>APP_STL := c++_shared</code></a>. Further, llvm-libc++ is <i>probably</i> only supported in combination with the clang compiler"}, {"owner": {"reputation": 3496, "user_id": 1564652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5cBHJ.jpg?s=128&g=1", "display_name": "TooManyEduardos", "link": "https://stackoverflow.com/users/1564652/toomanyeduardos"}, "reply_to_user": {"reputation": 5485, "user_id": 95976, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057b53dec34e734f69d166d89d3fbe4d?s=128&d=identicon&r=PG", "display_name": "tofi9", "link": "https://stackoverflow.com/users/95976/tofi9"}, "edited": false, "score": 0, "creation_date": 1423673176, "post_id": 28458721, "comment_id": 45245680, "body": "I&#39;m trying to add the .cpp files into the manifest file, but it seems to be having issues linking almost every .cpp file, and I have over 3000 files.  How do I use the clang compiler? Just like this: NDK_TOOLCHAIN_VERSION:=clang?"}, {"owner": {"reputation": 5485, "user_id": 95976, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057b53dec34e734f69d166d89d3fbe4d?s=128&d=identicon&r=PG", "display_name": "tofi9", "link": "https://stackoverflow.com/users/95976/tofi9"}, "edited": false, "score": 0, "creation_date": 1423673827, "post_id": 28458721, "comment_id": 45246084, "body": "Toolchain: yes, if that doesn&#39;t work, try with an explicit version number behind it... <code>clang-1.2</code>. There is no way to help fixing your linker errors if we don&#39;t get to see them"}, {"owner": {"reputation": 3496, "user_id": 1564652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5cBHJ.jpg?s=128&g=1", "display_name": "TooManyEduardos", "link": "https://stackoverflow.com/users/1564652/toomanyeduardos"}, "reply_to_user": {"reputation": 5485, "user_id": 95976, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057b53dec34e734f69d166d89d3fbe4d?s=128&d=identicon&r=PG", "display_name": "tofi9", "link": "https://stackoverflow.com/users/95976/tofi9"}, "edited": false, "score": 0, "creation_date": 1423674028, "post_id": 28458721, "comment_id": 45246214, "body": "NDK_TOOLCHAIN_VERSION:=clang-1.2. This throws a command not found"}], "answers": [{"owner": {"reputation": 4257, "user_id": 551986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2dbd10b926229854198fbbedfe8c8b?s=128&d=identicon&r=PG", "display_name": "thakis", "link": "https://stackoverflow.com/users/551986/thakis"}, "is_accepted": false, "score": 0, "last_activity_date": 1439235698, "creation_date": 1439235698, "answer_id": 31927800, "question_id": 28458721, "link": "https://stackoverflow.com/questions/28458721/android-ndk-use-llvm-libc-for-app-stl/31927800#31927800", "title": "Android NDK use llvm-libc++ for APP_STL", "body": "<p>I think you need</p>\n\n<pre><code>APP_STL := c++_static\n</code></pre>\n"}], "owner": {"reputation": 3496, "user_id": 1564652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5cBHJ.jpg?s=128&g=1", "display_name": "TooManyEduardos", "link": "https://stackoverflow.com/users/1564652/toomanyeduardos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2928, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439235698, "creation_date": 1423670191, "last_edit_date": 1423671843, "question_id": 28458721, "link": "https://stackoverflow.com/questions/28458721/android-ndk-use-llvm-libc-for-app-stl", "title": "Android NDK use llvm-libc++ for APP_STL", "body": "<p>I'm trying to compile a C/C++ code that compiles on Mac using LLVM 6 (just the default of xcode) with a single c=99 flag, but in the NDK this doesn't want to compile (I get a ton of 'undefined reference to' errors).</p>\n\n<p>In my Application.mk I have the APP_STL to be this:</p>\n\n<pre><code>APP_STL := gnustl_shared\n</code></pre>\n\n<p>At compile time, this calls this library:</p>\n\n<pre><code>[armeabi] Prebuilt       : libgnustl_shared.so &lt;= &lt;NDK&gt;/sources/cxx-stl/gnu-libstdc++/4.8/libs/armeabi/thumb/\n</code></pre>\n\n<p>In theory (according to the docs) this APP_STL := gnustl_shared should trigger the LLVM library, which doesn't seem to be doing. </p>\n\n<p>However, in the same NDK installation folder I have other libraries, which are labeled LLVM:</p>\n\n<p><img src=\"https://i.stack.imgur.com/t1k2J.png\" alt=\"enter image description here\"></p>\n\n<p>How can I force the APP_STL statement to use the llvm-libc++ or llvm-libc++abi library?</p>\n\n<p>Edit: as requested, here's also a list of the errors I get when compiling:</p>\n\n<p><img src=\"https://i.stack.imgur.com/X3JPH.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c++", "pointers", "visual-c++"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1423670401, "post_id": 28458652, "comment_id": 45243833, "body": "You have a good answer below, but why are you using pointers here in the first place ?"}, {"owner": {"reputation": 5345, "user_id": 2768350, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/a05c59ff1a1b667e80986ec143fcbf40?s=128&d=identicon&r=PG", "display_name": "jramm", "link": "https://stackoverflow.com/users/2768350/jramm"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1423670693, "post_id": 28458652, "comment_id": 45244052, "body": "pointers are because in the full code there is a function which on each call will return the next &#39;chunk&#39; of an array. The xOff and yOff pointers will point to the ints which are keeping track of where it is in the array."}, {"owner": {"reputation": 5485, "user_id": 95976, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057b53dec34e734f69d166d89d3fbe4d?s=128&d=identicon&r=PG", "display_name": "tofi9", "link": "https://stackoverflow.com/users/95976/tofi9"}, "edited": false, "score": 2, "creation_date": 1423671108, "post_id": 28458652, "comment_id": 45244306, "body": "So xOff and yOff are indexers for some array? You could just define them as ints and use them as <code>myXArray[xOffset]</code>"}], "answers": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 7, "last_activity_date": 1423670114, "creation_date": 1423670114, "answer_id": 28458693, "question_id": 28458652, "link": "https://stackoverflow.com/questions/28458652/declare-pointer-as-class-member-c/28458693#28458693", "title": "Declare pointer as class member C++", "body": "<p>You need to declare memory somewhere for your pointers</p>\n\n<pre><code>Chunker::Chunker(int cx, int cy)\n  :  chunkSizeX{cx}, \n     chunkSizeY{cy}\n{\n    xOff = new int(0);\n    yOff = new int(0);\n}\n</code></pre>\n\n<p>Otherwise you are assigning a value to a pointer that does not yet have an address.</p>\n\n<p>Obviously if your class is the one that allocates the memory, you need to clean it up too</p>\n\n<pre><code>Chunker::~Chunker()\n{\n    delete xOff;\n    delete yOff;\n}\n</code></pre>\n\n<p>If your class is the one allocating memory, you also might want to consider having the members be</p>\n\n<pre><code>std::unique_ptr&lt;int&gt; xOff;\nstd::unique_ptr&lt;int&gt; yOff;\n</code></pre>\n"}, {"owner": {"reputation": 5485, "user_id": 95976, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057b53dec34e734f69d166d89d3fbe4d?s=128&d=identicon&r=PG", "display_name": "tofi9", "link": "https://stackoverflow.com/users/95976/tofi9"}, "is_accepted": false, "score": 2, "last_activity_date": 1423671215, "last_edit_date": 1423671215, "creation_date": 1423670690, "answer_id": 28458913, "question_id": 28458652, "link": "https://stackoverflow.com/questions/28458652/declare-pointer-as-class-member-c/28458913#28458913", "title": "Declare pointer as class member C++", "body": "<p>Alternative to @Cuber's reply is to replace <code>*xOff = 0;</code> by <code>xOff = nullptr;</code> (without the <code>*</code>). But why pointers?</p>\n\n<pre><code>Chunker::Chunker(int cx, int cy)\n  :  chunkSizeX{cx}, \n     chunkSizeY{cy}\n{\n    xOff = nullptr;\n    yOff = nullptr;\n}\n\n...\n\nChunker::~Chunker()\n{\n    delete xOff;\n    delete yOff;\n}\n</code></pre>\n"}], "owner": {"reputation": 5345, "user_id": 2768350, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/a05c59ff1a1b667e80986ec143fcbf40?s=128&d=identicon&r=PG", "display_name": "jramm", "link": "https://stackoverflow.com/users/2768350/jramm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 28458693, "answer_count": 2, "score": 1, "last_activity_date": 1423671215, "creation_date": 1423670014, "question_id": 28458652, "link": "https://stackoverflow.com/questions/28458652/declare-pointer-as-class-member-c", "title": "Declare pointer as class member C++", "body": "<p>I'm trying to write a C++ class with a couple of pointers to ints as private members. \nI get this exception when trying to assign a value to the pointer address:</p>\n\n<pre><code>Unhandled exception at 0x000B140A in test.exe: 0xC0000005: Access violation      writing location 0x00000000.\n</code></pre>\n\n<p>Here is the minimum amount of code that will reproduce the problem on my machine</p>\n\n<pre><code>#include \"stdafx.h\"\n\nclass Chunker {\n  public:\n    Chunker(int cx, int cy);\n\n  private:\n    int chunkSizeX, chunkSizeY;\n    int *yOff, *xOff;\n  };\n\nChunker::Chunker(int cx, int cy){\n  chunkSizeX = cx;\n  chunkSizeY = cy;\n  *xOff = 0;\n  *yOff = 0;\n}; \n\nint main(int argc, char *argv)\n{\n  Chunker chunker(12, 12);\n  return 0;\n}\n</code></pre>\n\n<p>I just can't figure out what is wrong here?</p>\n"}, {"tags": ["c++", "forms", "qt", "show"], "answers": [{"comments": [{"owner": {"reputation": 1520, "user_id": 706147, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/761a372bbc701a03b3eccb949199cbfc?s=128&d=identicon&r=PG", "display_name": "Michael Vincent", "link": "https://stackoverflow.com/users/706147/michael-vincent"}, "edited": false, "score": 0, "creation_date": 1423672975, "post_id": 28459563, "comment_id": 45245531, "body": "Thank you Nejat.  Reading the docs (here: <a href=\"http://qt-project.org/doc/qt-4.8/qwidget.html#showEvent\" rel=\"nofollow noreferrer\">qt-project.org/doc/qt-4.8/qwidget.html#showEvent</a> ) it seems like the event willl happen before the window is (first) shown.  Am I right?   I&#39;m looking to do work after the window is first shown."}, {"owner": {"reputation": 28669, "user_id": 3049264, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MNMWc.jpg?s=128&g=1", "display_name": "Nejat", "link": "https://stackoverflow.com/users/3049264/nejat"}, "reply_to_user": {"reputation": 1520, "user_id": 706147, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/761a372bbc701a03b3eccb949199cbfc?s=128&d=identicon&r=PG", "display_name": "Michael Vincent", "link": "https://stackoverflow.com/users/706147/michael-vincent"}, "edited": false, "score": 0, "creation_date": 1423674779, "post_id": 28459563, "comment_id": 45246652, "body": "Yeah it will be called before the window is shown. You can use a single shot timer to call a function after the widget is shown. I have updated the answer."}, {"owner": {"reputation": 28669, "user_id": 3049264, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MNMWc.jpg?s=128&g=1", "display_name": "Nejat", "link": "https://stackoverflow.com/users/3049264/nejat"}, "reply_to_user": {"reputation": 1520, "user_id": 706147, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/761a372bbc701a03b3eccb949199cbfc?s=128&d=identicon&r=PG", "display_name": "Michael Vincent", "link": "https://stackoverflow.com/users/706147/michael-vincent"}, "edited": false, "score": 0, "creation_date": 1423675252, "post_id": 28459563, "comment_id": 45246928, "body": "Indeed non-spontaneous events are delivered before the widget is shown. That&#39;s for example when you call <code>show</code> pragmatically."}, {"owner": {"reputation": 1520, "user_id": 706147, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/761a372bbc701a03b3eccb949199cbfc?s=128&d=identicon&r=PG", "display_name": "Michael Vincent", "link": "https://stackoverflow.com/users/706147/michael-vincent"}, "edited": false, "score": 0, "creation_date": 1423677116, "post_id": 28459563, "comment_id": 45248055, "body": "That works, even with very small interval value.  Thank you.  It seems wrong to use a timer for something like this, though. But it is the only way I&#39;ve found that works so far."}, {"owner": {"reputation": 4602, "user_id": 2202101, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/c1L7d.png?s=128&g=1", "display_name": "Neurotransmitter", "link": "https://stackoverflow.com/users/2202101/neurotransmitter"}, "edited": false, "score": 1, "creation_date": 1473283037, "post_id": 28459563, "comment_id": 66086216, "body": "I&#39;ve also tried to find how to achieve exactly the same goal, but among all of solutions I&#39;ve tried only this <code>QTimer</code> hack works. If anyone is aware how to do this <i>proper</i> way, it will be much appreciated."}], "owner": {"reputation": 28669, "user_id": 3049264, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MNMWc.jpg?s=128&g=1", "display_name": "Nejat", "link": "https://stackoverflow.com/users/3049264/nejat"}, "is_accepted": true, "score": 9, "last_activity_date": 1423674711, "last_edit_date": 1423674711, "creation_date": 1423672601, "answer_id": 28459563, "question_id": 28458639, "link": "https://stackoverflow.com/questions/28458639/take-action-after-the-main-form-is-shown-in-a-qt-desktop-application/28459563#28459563", "title": "Take action after the main form is shown in a Qt desktop application", "body": "<p>You can override <code>showEvent()</code> of the window and call the function you want to be called with a single shot timer :</p>\n\n<pre><code>void MyWidget::showEvent(QShowEvent *)\n{\n    QTimer::singleShot(50, this, SLOT(doWork());\n}\n</code></pre>\n\n<p>This way when the windows is about to be shown, <code>showEvent</code> is triggered and the <code>doWork</code> slot would be called within a small time after it is shown.</p>\n\n<p>You can also override the <code>eventFilter</code> in your widget and check for <code>QEvent::Show</code> event :</p>\n\n<pre><code>bool MyWidget::eventFilter(QObject * obj, QEvent * event)\n{\n    if(obj == this &amp;&amp; event-&gt;type() == QEvent::Show)\n    {\n        QTimer::singleShot(50, this, SLOT(doWork());\n    }\n\n    return false;\n}\n</code></pre>\n\n<p>When using event filter approach, you should also install the event filter in the constructor by:</p>\n\n<pre><code>this-&gt;installEventFilter(this);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1520, "user_id": 706147, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/761a372bbc701a03b3eccb949199cbfc?s=128&d=identicon&r=PG", "display_name": "Michael Vincent", "link": "https://stackoverflow.com/users/706147/michael-vincent"}, "edited": false, "score": 0, "creation_date": 1476178661, "post_id": 39731946, "comment_id": 67227719, "body": "Cunning.  Thanks."}], "owner": {"reputation": 517, "user_id": 921804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb3e9daeca2bab592e0d3a0a00e200e?s=128&d=identicon&r=PG", "display_name": "RuslanK", "link": "https://stackoverflow.com/users/921804/ruslank"}, "is_accepted": false, "score": 1, "last_activity_date": 1475001155, "creation_date": 1475001155, "answer_id": 39731946, "question_id": 28458639, "link": "https://stackoverflow.com/questions/28458639/take-action-after-the-main-form-is-shown-in-a-qt-desktop-application/39731946#39731946", "title": "Take action after the main form is shown in a Qt desktop application", "body": "<p>I solved it without a timer using Paint event. Works for me at least on Windows.</p>\n\n<pre><code>// MainWindow.h\nclass MainWindow : public QMainWindow\n{\n    ...\n    bool event(QEvent *event) override;\n    void functionAfterShown();\n    ...\n    bool functionAfterShownCalled = false;\n    ...\n}\n\n// MainWindow.cpp\nbool MainWindow::event(QEvent *event)\n{\n    const bool ret_val = QMainWindow::event(event);\n    if(!functionAfterShownCalled &amp;&amp; event-&gt;type() == QEvent::Paint)\n    {\n        functionAfterShown();\n        functionAfterShownCalled = true;\n    }\n    return ret_val;\n}\n</code></pre>\n"}], "owner": {"reputation": 1520, "user_id": 706147, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/761a372bbc701a03b3eccb949199cbfc?s=128&d=identicon&r=PG", "display_name": "Michael Vincent", "link": "https://stackoverflow.com/users/706147/michael-vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2765, "favorite_count": 1, "accepted_answer_id": 28459563, "answer_count": 2, "score": 3, "last_activity_date": 1475001155, "creation_date": 1423669957, "last_edit_date": 1430625128, "question_id": 28458639, "link": "https://stackoverflow.com/questions/28458639/take-action-after-the-main-form-is-shown-in-a-qt-desktop-application", "title": "Take action after the main form is shown in a Qt desktop application", "body": "<p>In Delphi I often made an <code>OnAfterShow</code> event for the main form.  The standard <code>OnShow()</code> for the form would have little but a <code>postmessage()</code> which would cause the <code>OnafterShow</code> method to be executed.</p>\n\n<p>I did this so that sometimes lengthy data loading or initializations would not stop the normal loading and showing of the main form.</p>\n\n<p>I'd like to do something similar in a Qt application that will run on a desktop computer either Linux or Windows.</p>\n\n<p>What ways are available to me to do this?</p>\n"}, {"tags": ["c++", "c", "visual-studio-2010", "android-ndk"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1423678164, "post_id": 28458629, "comment_id": 45248612, "body": "Use <code>snprintf</code> so you don&#39;t overflow the <code>szBuf</code>."}], "answers": [{"owner": {"reputation": 1649, "user_id": 3133604, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/354805cc57c4ff2d7d88f95d791fef12?s=128&d=identicon&r=PG&f=1", "display_name": "undermind", "link": "https://stackoverflow.com/users/3133604/undermind"}, "is_accepted": false, "score": 2, "last_activity_date": 1423675555, "creation_date": 1423675555, "answer_id": 28460601, "question_id": 28458629, "link": "https://stackoverflow.com/questions/28458629/visualgdb-expression-must-have-pointer-type/28460601#28460601", "title": "VisualGDB. Expression must have pointer type", "body": "<p>Maybe, you should replace</p>\n\n<pre><code>jstring str = (*env)-&gt;NewStringUTF(env, szBuf);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>jstring str = env-&gt;NewStringUTF(env, szBuf);\n</code></pre>\n\n<p>or with</p>\n\n<pre><code>jstring str = (*env).NewStringUTF(env, szBuf);\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 3631468, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/u9X95.jpg?s=128&g=1", "display_name": "farissyariati", "link": "https://stackoverflow.com/users/3631468/farissyariati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423675555, "creation_date": 1423669931, "question_id": 28458629, "link": "https://stackoverflow.com/questions/28458629/visualgdb-expression-must-have-pointer-type", "title": "VisualGDB. Expression must have pointer type", "body": "<p>I have just started using visualgdb</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;jni.h&gt;\n#include &lt;stdio.h&gt;\n\nint s_ButtonPressCounter = 0;\n\njstring\nJava_com_visualgdb_example_AndroidProject1_AndroidProject1_stringFromJNI( JNIEnv* env,\n                                                  jobject thiz )\n{\n    char szBuf[512];\n    sprintf(szBuf, \"You have pressed this huge button %d times\", s_ButtonPressCounter++);\n    jstring str = (*env)-&gt;NewStringUTF(env, szBuf);\n    return str;\n}\n</code></pre>\n\n<p>I have my intelissense show error log \nExpression must have pointer type.</p>\n\n<p>I tried to change it to env.NewStringUTF(szBuf) but the build comes to error.</p>\n"}, {"tags": ["c++", "c++11", "rvalue-reference"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1423682730, "post_id": 28458616, "comment_id": 45251307, "body": "with rvalue references :P Which means you did not search :("}, {"owner": {"reputation": 469, "user_id": 3816764, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b0186345e573ed7e14119054caea8e81?s=128&d=identicon&r=PG&f=1", "display_name": "user3816764", "link": "https://stackoverflow.com/users/3816764/user3816764"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1423690792, "post_id": 28458616, "comment_id": 45255704, "body": "Of course, why hadn&#39;t I thought of that?"}], "answers": [{"comments": [{"owner": {"reputation": 469, "user_id": 3816764, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b0186345e573ed7e14119054caea8e81?s=128&d=identicon&r=PG&f=1", "display_name": "user3816764", "link": "https://stackoverflow.com/users/3816764/user3816764"}, "edited": false, "score": 0, "creation_date": 1423671178, "post_id": 28459018, "comment_id": 45244351, "body": "Right, I know that std::move and std::forward are basically like &quot;Take an L value, <i>treat it</i> as an r-value&quot;. But is it possible to actually get the address of a &#39;pure&#39; r-value? Like auto x = &amp;(i + 3); I guess.  Is <i>that</i> possible? I&#39;d still think not, right?  edit: And you&#39;ve answered my original question. I should put in the main question that I also am curious about getting an r-value reference without std::move/ std::forward"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 0, "creation_date": 1423671814, "post_id": 28459018, "comment_id": 45244741, "body": "&quot;is it possible to actually get the address of a &#39;pure&#39; r-value?&quot; Yes, by creating a temporary object to hold the value. That object has an address. The language doesn&#39;t allow you to directly take the address with <code>&amp;</code>, but you can bind it to various types of reference. To get an <i>rvalue</i> reference to an <i>lvalue</i> without <code>move</code>, you need a cast (which is all that <code>move</code> does)."}], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1423671046, "creation_date": 1423671046, "answer_id": 28459018, "question_id": 28458616, "link": "https://stackoverflow.com/questions/28458616/how-is-it-possible-to-get-a-reference-to-an-rvalue/28459018#28459018", "title": "How is it possible to get a reference to an rvalue?", "body": "<p>Basically, compiler magic. The Standard describes the rules, the compiler maker just has to figure out how to implement the rules.</p>\n\n<p>In practice, references are either optimized out or implemented as pointer on CPU level.</p>\n\n<p><code>std::move</code> isn't really special in that sense. It has a lvalue reference as input, and an rvalue reference as output. The compiler just has to apply the rvalue reference rules to the input. </p>\n\n<p>Similarly, the goal of <code>std::forward&lt;T&gt;</code> is just to tell the compiler to apply a different set of rules to the argument, rules which happen to be defined so that perfect forwarding works. The function itself does nothing.</p>\n"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": false, "score": 9, "last_activity_date": 1423671857, "last_edit_date": 1423671857, "creation_date": 1423671279, "answer_id": 28459095, "question_id": 28458616, "link": "https://stackoverflow.com/questions/28458616/how-is-it-possible-to-get-a-reference-to-an-rvalue/28459095#28459095", "title": "How is it possible to get a reference to an rvalue?", "body": "<blockquote>\n  <p>How is it possible to get a reference to an <em>rvalue</em>?</p>\n</blockquote>\n\n<p>Conceptually, an <em>rvalue</em> expression creates a temporary object, or sometimes denotes an existing object. That can be bound to a reference like any other object; but, to avoid confusion, the language only allows that for <em>rvalue</em> and <code>const</code> <em>lvalue</em> references.</p>\n\n<blockquote>\n  <p>I have used std::move and std::forward in C++. My issue is how this is actually implemented by the compiler?</p>\n</blockquote>\n\n<p><code>move</code> simply returns an <em>rvalue</em> reference to its argument, equivalent to</p>\n\n<pre><code>static_cast&lt;typename remove_reference&lt;T&gt;::type&amp;&amp;&gt;(t)\n</code></pre>\n\n<p>The result of the function call is an <em>rvalue</em> (specifically, an <em>xvalue</em>), so it can be bound to an <em>rvalue</em> reference where the function argument couldn't. This allows you to explicitly move from an <em>lvalue</em>, using <code>move</code> to convert it to an <em>rvalue</em>, while not allowing you to accidentally move from it.</p>\n\n<p><code>forward</code> is similar, but overloaded to return an <em>rvalue</em> reference to an <em>rvalue</em> or <em>rvalue</em> reference, and an <em>lvalue</em> reference to anything else.</p>\n\n<blockquote>\n  <p>If an l-value is something you can get the address of</p>\n</blockquote>\n\n<p>That's more or less correct. The official definition is that the expression \"designates a function or an object\", and those are things that have addresses.</p>\n\n<blockquote>\n  <p>and an r-value is exclusively not an l-value</p>\n</blockquote>\n\n<p>Not really. Simplifying slightly, an expression is either a <em>lvalue</em> or an <em>rvalue</em>, but can be converted from one to the other. An <em>lvalue</em> can be implicitly converted to an <em>rvalue</em>; converting the other way can be done with a cast, as <code>move</code> does.</p>\n\n<blockquote>\n  <p>how can you actually implement these references?</p>\n</blockquote>\n\n<p>Just like any other reference - as an alias for, or a pointer to, the object it's bound to. The only difference is which kinds of expression can be used to denote (and possibly create) the object that's bound to the reference.</p>\n\n<blockquote>\n  <p>Do these new facilities allow for something like <code>auto x = &amp;(3);</code></p>\n</blockquote>\n\n<p>That attempts to take the address of an <em>rvalue</em> directly, which isn't allowed. Since the question is about references, not pointers, the following are allowed, binding a reference to a temporary object (whose lifetime is extended to match the reference):</p>\n\n<pre><code>auto &amp;&amp; rvalue = 3;\nauto const &amp; const_lvalue = 3;\n</code></pre>\n\n<p>while it's not allowed to bind it to a non-const <em>lvalue</em> reference</p>\n\n<pre><code>auto &amp; lvalue = 3;  // ERROR\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 469, "user_id": 3816764, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b0186345e573ed7e14119054caea8e81?s=128&d=identicon&r=PG&f=1", "display_name": "user3816764", "link": "https://stackoverflow.com/users/3816764/user3816764"}, "edited": false, "score": 0, "creation_date": 1423671792, "post_id": 28459180, "comment_id": 45244721, "body": "This definitely answers all of my questions. Thank you. edit: And thanks for the link, I&#39;ll have a look."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1423679693, "post_id": 28459180, "comment_id": 45249459, "body": "<i>&quot;Furthermore, internally to <code>foo</code> I can get the address of the r-value:&quot;</i> I disagree: Rvalues, or expressions in general, don&#39;t have addresses - objects have addresses. Hence, <code>&amp;bar</code> does not give you the address of an rvalue. You&#39;ll get the address of an object that is referred to by the expression <code>bar</code> (a subexpression of <code>&amp;bar</code>), and this expression <code>bar</code> is an lvalue."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1423680263, "post_id": 28459180, "comment_id": 45249827, "body": "@dyp OK, I agree with what you are saying... Would you feel comfortable with this edit: &quot;Furthermore, internally to <code>foo</code> I can get the address of the object passed in by an r-value reference.&quot;"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1423680477, "post_id": 28459180, "comment_id": 45249947, "body": "Well, I don&#39;t think that&#39;s incorrect or imprecise. But it may not cover the essence of how you achieve it to get the address of the object: You&#39;ll need an lvalue referring to the object to get its address, hence you <i>change the value category of the expression</i>, or rather <i>create a new lvalue expression referring to the same object</i>. For example, the anti-move <code>template&lt;class T&gt; T&amp; as_lvalue(T&amp;&amp; t) { return t; }</code>"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1423682923, "post_id": 28459180, "comment_id": 45251431, "body": "@dyp Your &quot;anti-move&quot; is very interesting. I&#39;ve never thought about doing that. I&#39;ve made a first pass edit... but help me out here, when you say: &quot;You&#39;ll need an lvalue referring to the object to get its address.&quot; Are you saying that <code>bar</code> is in fact an l-value internally to <code>foo</code>?"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1423684471, "post_id": 28459180, "comment_id": 45252330, "body": "Yes, the <i>id-expression</i> <code>bar</code> (i.e., the <i>name</i> <code>bar</code>) is an lvalue, even though it refers to a variable that has type <i>rvalue reference to string</i>. I currently have no simple rule to classify lvalues. The best I have is &quot;all names but enumerators are lvalue-expressions&quot;, followed by &quot;since the rvalue reference allows you to access the bound object multiple times, using the name of the rvalue reference must be an lvalue-expression to not trigger multiple moves&quot;."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1423760204, "post_id": 28459180, "comment_id": 45288537, "body": "@dyp I appreciate you taking the time to explain all this to me, but since we&#39;ve totally left the scope of the original question, I decided to start a new question here: <a href=\"http://stackoverflow.com/q/28483250/2642059\">stackoverflow.com/q/28483250/2642059</a> If you have time to bestow some of your understanding upon me there I&#39;d be grateful."}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": true, "score": 5, "last_activity_date": 1423682767, "last_edit_date": 1423682767, "creation_date": 1423671502, "answer_id": 28459180, "question_id": 28458616, "link": "https://stackoverflow.com/questions/28458616/how-is-it-possible-to-get-a-reference-to-an-rvalue/28459180#28459180", "title": "How is it possible to get a reference to an rvalue?", "body": "<p>I cannot call a function: <code>void foo(string* bar)</code> like this: <code>foo(&amp;string(\"Hello World!\"))</code> or I get an error:</p>\n\n<blockquote>\n  <p>error: taking address of temporary</p>\n</blockquote>\n\n<p>I also cannot call a function: <code>void foo(string&amp; bar)</code> like this: <code>foo(string(\"Hello World!\"))</code> or I get an error:</p>\n\n<blockquote>\n  <p>error: invalid initialization of non-const reference of type 'std::string&amp; {aka std::basic_string&amp;}' from an rvalue of type 'std::string {aka std::basic_string}'</p>\n</blockquote>\n\n<p>What C++11 has provided me the ability to do is to make an rvalue reference, so I <em>can</em> call a function: <code>void foo(string&amp;&amp; bar)</code> like this: <code>foo(string(\"Hello World!\"));</code></p>\n\n<p>Furthermore, internally to <code>foo</code> I <em>can</em> get the address of the object passed in by an rvalue reference:</p>\n\n<pre><code>void foo(string&amp;&amp; bar){\n    string* temp = &amp;bar;\n\n    cout &lt;&lt; *temp &lt;&lt; \" @:\" &lt;&lt; temp &lt;&lt; endl;\n}\n</code></pre>\n\n<p>It seems like the OP has a really good grip on rvalues. But <a href=\"http://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html\" rel=\"nofollow\">this explanation of them</a> was helpful to me, and may be to others. It goes into a bit of detail about why C++03 allowed constant references to rvalues, versus C++11's rvalue references.</p>\n"}], "owner": {"reputation": 469, "user_id": 3816764, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b0186345e573ed7e14119054caea8e81?s=128&d=identicon&r=PG&f=1", "display_name": "user3816764", "link": "https://stackoverflow.com/users/3816764/user3816764"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3190, "favorite_count": 4, "accepted_answer_id": 28459180, "answer_count": 3, "score": 9, "last_activity_date": 1423682767, "creation_date": 1423669885, "last_edit_date": 1423672730, "question_id": 28458616, "link": "https://stackoverflow.com/questions/28458616/how-is-it-possible-to-get-a-reference-to-an-rvalue", "title": "How is it possible to get a reference to an rvalue?", "body": "<p>I have used <code>std::move</code> and <code>std::forward</code> in C++. My question is: how are these functions actually implemented by the standard library?</p>\n\n<p>If an lvalue is something you can get the address of, and an rvalue is exclusively not an lvalue, how can you actually implement these references?</p>\n\n<p>Do these new facilities allow for something like:</p>\n\n<pre><code>auto x = &amp;(3); \n</code></pre>\n\n<p>or something like that? Can you get a reference to an rvalue that isn't just a <code>std::move</code>/<code>forward</code> returned lvalue?</p>\n\n<p>Hopefully these questions make sense. I couldn't find good information on Google, just tutorials on perfect forwarding, etc.</p>\n"}, {"tags": ["c++", "static-members"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 5, "creation_date": 1423669371, "post_id": 28458403, "comment_id": 45243154, "body": "No. Why don&#39;t you try compiling it?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1423669426, "post_id": 28458403, "comment_id": 45243186, "body": "<code>I remove other part of code for simplicity</code>  So how are we to know if the parts of the code you removed are required?"}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1423669523, "post_id": 28458403, "comment_id": 45243262, "body": "@juanchopanza VS intelisense doesn&#39;t give me any error, so I think it has no compilation error."}, {"owner": {"reputation": 6383, "user_id": 4371276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02ce728cefdf7fcbcff17ee06ad463db?s=128&d=identicon&r=PG&f=1", "display_name": "dmg", "link": "https://stackoverflow.com/users/4371276/dmg"}, "edited": false, "score": 1, "creation_date": 1423669585, "post_id": 28458403, "comment_id": 45243317, "body": "@mans What exactly are we supposed to do?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1423669597, "post_id": 28458403, "comment_id": 45243323, "body": "Oh that&#39;s alright then."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1423669632, "post_id": 28458403, "comment_id": 45243354, "body": "@mans Don&#39;t trust intellisense! Compile it."}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "reply_to_user": {"reputation": 6383, "user_id": 4371276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02ce728cefdf7fcbcff17ee06ad463db?s=128&d=identicon&r=PG&f=1", "display_name": "dmg", "link": "https://stackoverflow.com/users/4371276/dmg"}, "edited": false, "score": 0, "creation_date": 1423669661, "post_id": 28458403, "comment_id": 45243381, "body": "@dmg Creating a singleton that implemented in a header file (no CPP).Getting idea from here: <a href=\"http://stackoverflow.com/questions/23690416/c-template-singleton-static-pointer-initialization-in-header-file\" title=\"c template singleton static pointer initialization in header file\">stackoverflow.com/questions/23690416/&hellip;</a>"}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1423669731, "post_id": 28458403, "comment_id": 45243419, "body": "@Biffen Ok, I need to add other part of code and then compile it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user146043"}, "edited": false, "score": 2, "creation_date": 1423669801, "post_id": 28458403, "comment_id": 45243456, "body": "There comes a time in every VS C++ developer&#39;s life when they turn off intellisense because it just doesn&#39;t work!"}, {"owner": {"reputation": 26037, "user_id": 542190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3bb1f122c476561bb9a98a1523e8b5e?s=128&d=identicon&r=PG", "display_name": "filmor", "link": "https://stackoverflow.com/users/542190/filmor"}, "edited": false, "score": 1, "creation_date": 1423669886, "post_id": 28458403, "comment_id": 45243508, "body": "@mans Having the singleton definition (i.e. the <code>m_instance = nullptr</code> line) in the header will fail as soon as you have more than one compilation unit including this header. EDIT: Sorry, sure, by using templates you circumvent this issue."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1423669995, "post_id": 28458403, "comment_id": 45243579, "body": "@mans Does <code>m_instance</code> have to be a pointer? And since you set it to <code>nullptr</code>, who will initialise it?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1423669998, "post_id": 28458403, "comment_id": 45243581, "body": "I believe <a href=\"http://jalf.dk/blog/2010/03/singletons-solving-problems-you-didnt-know-you-never-had-since-1995/\" rel=\"nofollow noreferrer\">singletons should be avoided</a> anyway."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1423679431, "post_id": 28458403, "comment_id": 45249319, "body": "I do not turn off intellisense. I just know that it will have a certain percentage of false positives. Although I do not understand why (by default) Microsoft shows intellisense errors in the same list of real compiler errors. This just confuses people who do not have experience."}], "answers": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 2, "last_activity_date": 1423670037, "creation_date": 1423670037, "answer_id": 28458664, "question_id": 28458403, "link": "https://stackoverflow.com/questions/28458403/is-this-correct-in-c/28458664#28458664", "title": "Is this correct in c++", "body": "<p>Why don't you compile it to see? Btw that code will not compile.</p>\n\n<ul>\n<li><p>You would have to move the first line after the class definition.</p></li>\n<li><p>Also, you're defining <code>m_instance</code> as two different kinds of symbols. You must either remove the redundant template specifier, or declare the <code>m_instance</code> member variable as a template variable in the class definition as well.</p></li>\n<li><p>If you decided to keep it as a template variable, your template parameter <code>T</code> is still missing a type. Add <code>typename</code> or <code>class</code> before it to fix this.</p></li>\n</ul>\n\n<p>Then it will compile.</p>\n"}, {"comments": [{"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "edited": false, "score": 0, "creation_date": 1423670149, "post_id": 28458678, "comment_id": 45243682, "body": "That is the reason that I used template, as templates can be defined in a header file."}, {"owner": {"reputation": 1609, "user_id": 657412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/axctP.png?s=128&g=1", "display_name": "Ethouris", "link": "https://stackoverflow.com/users/657412/ethouris"}, "reply_to_user": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "edited": false, "score": 1, "creation_date": 1423670537, "post_id": 28458678, "comment_id": 45243930, "body": "There&#39;s no such rule as &#39;templates can be defined in a header file&#39; - in a header file only such things may be defined, which <b>are not &quot;physical&quot;</b> (class, integer constant), or - if they are - they either <b>do not undergo linkage</b> (static functions or variables) or <b>undergo vague linkage</b> (inline functions, which may result in out-of-line versions, or various C++-generated objects like virtual tables or RTTI objects). The special thing about templates is that they <b>must</b> be defined in the header file (no <i>export</i>), that is, it must be a class or inline function (nothing else can be tpl)"}], "owner": {"reputation": 1609, "user_id": 657412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/axctP.png?s=128&g=1", "display_name": "Ethouris", "link": "https://stackoverflow.com/users/657412/ethouris"}, "is_accepted": false, "score": 0, "last_activity_date": 1423670072, "creation_date": 1423670072, "answer_id": 28458678, "question_id": 28458403, "link": "https://stackoverflow.com/questions/28458403/is-this-correct-in-c/28458678#28458678", "title": "Is this correct in c++", "body": "<p>With the fix that the class definition should go first, it's correct, as long as you include this header file only in one *.cpp file.</p>\n\n<p>Implementing static field in the header file (meaning: you'll potentially be including it in multiple *.cpp files): <strong>NOT POSSIBLE</strong>. You can't even declare it as static.</p>\n\n<p>I guess the reason is that in C++ you can potentially initialize the variable by a result of a function call, so this would carry a risk that an object is doubly-initialized and lead to undefined behavior (because theoretically it could undergo vague linkage).</p>\n"}], "owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1423670549, "creation_date": 1423669302, "last_edit_date": 1423670549, "question_id": 28458403, "link": "https://stackoverflow.com/questions/28458403/is-this-correct-in-c", "title": "Is this correct in c++", "body": "<p>Is the following code is correct if I have it in a header file?</p>\n\n<pre><code>template &lt;T&gt; Stopwatch *Stopwatch::m_instance = nullptr;\nclass Stopwatch\n{\n   std::clock_t m_lastStep;\n   std::clock_t m_start;\n   static Stopwatch *m_instance; \n\n};\n</code></pre>\n\n<p>ok With the help of everybody, I could manage to compile it as follow:</p>\n\n<p>The idea is to have the class definition and static member initialization on the one header file. Please note that I use template but never used its type.</p>\n\n<p>I remove other part of code for simplicity.</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Stopwatch\n{\n   std::clock_t m_lastStep;\n   std::clock_t m_start;\n   static Stopwatch *m_instance; \n\n};\n\ntemplate &lt;typename T&gt;\nStopwatch&lt;T&gt; *Stopwatch&lt;T&gt;::m_instance = nullptr;\n</code></pre>\n\n<p>Now I need to see if it really works!</p>\n"}, {"tags": ["c++", "caching"], "comments": [{"owner": {"reputation": 531, "user_id": 3547110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50243980b4476b06d528030460e8933a?s=128&d=identicon&r=PG&f=1", "display_name": "Blob", "link": "https://stackoverflow.com/users/3547110/blob"}, "edited": false, "score": 0, "creation_date": 1423669828, "post_id": 28458343, "comment_id": 45243472, "body": "<a href=\"https://www.kernel.org/doc/Documentation/sysctl/vm.txt\" rel=\"nofollow noreferrer\">kernel.org/doc/Documentation/sysctl/vm.txt</a> The documentation says syncing before drop_cache will minimize the number of dirty caches and more memory will be cleared. There doesn&#39;t seem to be a reason to sync twice (before and after write), though."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1423670731, "post_id": 28458343, "comment_id": 45244074, "body": "As an aside, mention your OS: I assume linux, but you never state it.  A suggestion that probably won&#39;t work: Restart the program from scratch?  You could still run into problems where the executable is mapped from disk to memory in an OS-aware way (don&#39;t know if linux does this), and the second run uses the same physical ram, and that is in the caches -- so maybe compress the executable into an archive.  Each run unzip it and run it.  Still leaves the possibility that libraries the code uses are in the cache.  So maybe not."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 1, "creation_date": 1423672665, "post_id": 28458343, "comment_id": 45245330, "body": "Assuming this is Linux, see <a href=\"https://www.kernel.org/doc/Documentation/cachetlb.txt\" rel=\"nofollow noreferrer\">kernel.org/doc/Documentation/cachetlb.txt</a> for how to flush the CPU cache from the kernel. I don&#39;t think you can do it in a user program. Your code flushes the kernel caches, not the CPU caches, which is why it&#39;s so slow, and why it won&#39;t do you any good."}, {"owner": {"reputation": 1789, "user_id": 4038196, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/071217da03754ce35d099a0e889f95c2?s=128&d=identicon&r=PG&f=1", "display_name": "jsguy", "link": "https://stackoverflow.com/users/4038196/jsguy"}, "edited": false, "score": 0, "creation_date": 1423674822, "post_id": 28458343, "comment_id": 45246675, "body": "my cpu is Intel(R) Core(TM) i5-3470 CPU @ 3.20GH and I run my program on Arch. I will research your suggestions, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 1789, "user_id": 4038196, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/071217da03754ce35d099a0e889f95c2?s=128&d=identicon&r=PG&f=1", "display_name": "jsguy", "link": "https://stackoverflow.com/users/4038196/jsguy"}, "edited": false, "score": 0, "creation_date": 1423674759, "post_id": 28459129, "comment_id": 45246634, "body": "my CPU is Intel(R) Core(TM) i5-3470 CPU @ 3.20GH"}], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 3, "last_activity_date": 1423671377, "creation_date": 1423671377, "answer_id": 28459129, "question_id": 28458343, "link": "https://stackoverflow.com/questions/28458343/what-would-be-the-most-correct-way-to-clear-l1-l2-and-l3-caches-in-c/28459129#28459129", "title": "What would be the most correct way to clear L1,L2 and L3 caches in C++?", "body": "<p><code>sync</code> flushes outstanding file writes. It doesn't affect cached file reads, though. The <code>drop_caches</code> method you found online does clear the disk cache, so any future read will also hit the disk.</p>\n\n<p>All this is <strong>unrelated</strong> to L1/2/3 CPU caches. Couldn't be, even. The <code>sync</code> function itself will be in L1 cache!</p>\n\n<p>You need assembly code to flush the cache, but you forgot to state which CPU you have.</p>\n"}], "owner": {"reputation": 1789, "user_id": 4038196, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/071217da03754ce35d099a0e889f95c2?s=128&d=identicon&r=PG&f=1", "display_name": "jsguy", "link": "https://stackoverflow.com/users/4038196/jsguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 763, "favorite_count": 0, "accepted_answer_id": 28459129, "answer_count": 1, "score": 1, "last_activity_date": 1423671377, "creation_date": 1423669141, "question_id": 28458343, "link": "https://stackoverflow.com/questions/28458343/what-would-be-the-most-correct-way-to-clear-l1-l2-and-l3-caches-in-c", "title": "What would be the most correct way to clear L1,L2 and L3 caches in C++?", "body": "<p>I want to run some experiments on an algorithm in order to see how cache efficient it is.</p>\n\n<p>I run the main code of the algorithm on one input several times (iterations), get the values of different counters (branch mispredictions, L2, L3 cache accesses, misses etc) and then after all the iterations are finished I find the average of each counter and return it as an output.</p>\n\n<p>In order for the experiment to be precise, I need to clear the cache before every new iteration.</p>\n\n<p>So the code is looking something like this:</p>\n\n<pre><code>main()\n   for (it = 0; it &lt; iterations; it++)\n        clear_cache();\n        run algorithm\n        update counters\n   return average of all counters\n</code></pre>\n\n<p>Everything is working as expected but I am not very sure about how to do the clearing of the cache properly.</p>\n\n<p>I have found the following method online:</p>\n\n<pre><code>void clear_cache(){\n   sync();\n   std::ofstream ofs(\"/proc/sys/vm/drop_caches\");\n   ofs &lt;&lt; \"3\" &lt;&lt; std::endl;\n   sync();\n}\n</code></pre>\n\n<p>However if the total amount of iterations is large, this method takes a lot of time to execute. On the other hand if I completely remove <code>sync();</code> the clearing process becomes much faster.</p>\n\n<p>But I have no idea what <code>sync();</code> does in practice. Why does everything becomes faster without <code>sync();</code>? Do I need this call in order to be sure that all L1,L2 and L3 caches will be clear before each new iteration?</p>\n\n<p>thank you in advance</p>\n"}, {"tags": ["c++", "cmake", "vtk", "tbb"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1423670979, "post_id": 28458300, "comment_id": 45244230, "body": "When this happens to me I look at the source code of the .cmake file that is supposed to find the package to determine why it can not find it."}, {"owner": {"reputation": 5833, "user_id": 2527797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83539ee8bca535eca6c4be5c856a738d?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/2527797/anton"}, "edited": false, "score": 0, "creation_date": 1423672156, "post_id": 28458300, "comment_id": 45244976, "body": "Obviously, the environment points to the TBB location (`TBBROOT=C:\\Program Files\\Intel\\TBB\\tbb43_20150209oss\\bin`) but FindTBB.cmake does not take it into account but should - it&#39;s a bug."}, {"owner": {"reputation": 176, "user_id": 4555418, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203523255831894/picture?type=large", "display_name": "Geronimo", "link": "https://stackoverflow.com/users/4555418/geronimo"}, "edited": false, "score": 0, "creation_date": 1431911913, "post_id": 28458300, "comment_id": 48684081, "body": "I gave up. It&#39;s a bug it seems. Will try on Linux."}], "owner": {"reputation": 176, "user_id": 4555418, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203523255831894/picture?type=large", "display_name": "Geronimo", "link": "https://stackoverflow.com/users/4555418/geronimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 818, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423669039, "creation_date": 1423669039, "question_id": 28458300, "link": "https://stackoverflow.com/questions/28458300/building-vtk-and-thread-building-blocks-using-cmake", "title": "Building VTK and Thread Building Blocks using Cmake", "body": "<p>I'm failing to use TBB with VTK. VTK has an option to set which smp to use. When I set it to TBB Cmake can't find where my TBB is:</p>\n\n<pre><code>Looked for Threading Building Blocks in C:/Program Files/Intel/TBB;C:/Program Files (x86)/Intel/TBB\nCMake Error at CMake/FindTBB.cmake:272 (message):\n  Could NOT find TBB library.\nCall Stack (most recent call first):\n  Common/Core/CMakeLists.txt:42 (find_package)\n</code></pre>\n\n<p>My environment vars are:</p>\n\n<pre><code>ALLUSERSPROFILE=C:\\ProgramData\nAPPDATA=C:\\Users\\geronimo\\AppData\\Roaming\nCommonProgramFiles=C:\\Program Files\\Common Files\nCommonProgramFiles(x86)=C:\\Program Files (x86)\\Common Files\nCommonProgramW6432=C:\\Program Files\\Common Files\nCOMPUTERNAME=GEROMIN-WIN8\nComSpec=C:\\Windows\\system32\\cmd.exe\nCPATH=C:\\Program Files\\Intel\\TBB\\tbb43_20150209oss\\bin\\..\\include;\nFP_NO_HOST_CHECK=NO\nHOMEDRIVE=C:\nHOMEPATH=\\Users\\geronimo\nINCLUDE=C:\\Program Files\\Intel\\TBB\\tbb43_20150209oss\\bin\\..\\include;\nLIB=C:\\Program Files\\Intel\\TBB\\tbb43_20150209oss\\bin\\..\\lib\\intel64\\vc11;\nLOCALAPPDATA=C:\\Users\\geronimo\\AppData\\Local\nLOGONSERVER=\\\\GEROMIN-WIN8\nMIC_LD_LIBRARY_PATH=C:\\Program Files\\Intel\\TBB\\tbb43_20150209oss\\bin\\..\\lib\\mic;\nMIC_LIBRARY_PATH=C:\\Program Files\\Intel\\TBB\\tbb43_20150209oss\\bin\\..\\lib\\mic;\nNUMBER_OF_PROCESSORS=8\nOS=Windows_NT\nPath=C:\\Program Files\\Intel\\TBB\\tbb43_20150209oss\\bin\\\\intel64\\vc11;C:\\Borland\\Delphi7\\Bin;C:\\Borland\\Delphi7\\Projects\\Bpl\\;C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files (x86)\\Intel\\iCLS Client\\;C:\\Program Files\\Intel\\iCLS Client\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\DAL;C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\IPT;C:\\nodejs\\;C:\\Program Files (x86)\\CMake\\bin;C:\\Program Files\\Microsoft\\Web Platform Installer\\;C:\\Program Files (x86)\\Microsoft ASP.NET\\ASP.NET Web Pages\\v1.0\\;C:\\Program Files (x86)\\Windows Kits\\8.0\\Windows Performance Toolkit\\;C:\\Program Files\\Microsoft SQL Server\\110\\Tools\\Binn\\;C:\\Program Files\\TortoiseGit\\bin;C:\\Program Files\\Mercurial\\;C:\\Program Files\\TortoiseHg\\;C:\\Program Files\\TortoiseSVN\\bin;C:\\Users\\geronimo\\AppData\\Roaming\\npm\nPATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC\nPROCESSOR_ARCHITECTURE=AMD64\nPROCESSOR_IDENTIFIER=Intel64 Family 6 Model 58 Stepping 9, GenuineIntel\nPROCESSOR_LEVEL=6\nPROCESSOR_REVISION=3a09\nProgramData=C:\\ProgramData\nProgramFiles=C:\\Program Files\nProgramFiles(x86)=C:\\Program Files (x86)\nProgramW6432=C:\\Program Files\nPROMPT=$P$G\nPSModulePath=C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules\\\nPUBLIC=C:\\Users\\Public\nSCRIPT_NAME=tbbvars.bat\nSystemDrive=C:\nSystemRoot=C:\\Windows\nTBBROOT=C:\\Program Files\\Intel\\TBB\\tbb43_20150209oss\\bin\\..\nTBB_ARCH_PLATFORM=intel64\\vc11\nTBB_BIN_DIR=C:\\Program Files\\Intel\\TBB\\tbb43_20150209oss\\bin\\\nTBB_TARGET_ARCH=intel64\nTBB_TARGET_VS=vc11\nTEMP=C:\\Users\\geronimo\\AppData\\Local\\Temp\nTMP=C:\\Users\\geronimo\\AppData\\Local\\Temp\nUSERDOMAIN=geromin-win8\nUSERDOMAIN_ROAMINGPROFILE=geromin-win8\nUSERNAME=geronimo\nUSERPROFILE=C:\\Users\\geronimo\nVS110COMNTOOLS=C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\Common7\\Tools\\\nwindir=C:\\Windows\n</code></pre>\n\n<p>My tbb is in 'C:\\Program Files\\Intel\\TBB\\tbb43_20150209oss' and was downloaded from the Thread Building Blocks site. My SO is Windows 8.1 64 bits and my Visual Studio is 2012. I have tried to set a cmake var TBB_INSTALL_DIR pointing to the directory above but to no avail.</p>\n\n<p>Any help on how to use tbb with vtk?</p>\n"}]