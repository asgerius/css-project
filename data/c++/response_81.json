[{"tags": ["c++", "function", "pointers", "wxwidgets"], "comments": [{"owner": {"reputation": 6610, "user_id": 6541659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9f448206061d0711752562bfaf0546?s=128&d=identicon&r=PG&f=1", "display_name": "aichao", "link": "https://stackoverflow.com/users/6541659/aichao"}, "edited": false, "score": 1, "creation_date": 1469662764, "post_id": 38624825, "comment_id": 64635158, "body": "To make it one line, you need to create it on the heap and make it a shared_ptr. Otherwise, temp variable goes out of scope."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1469662908, "post_id": 38624825, "comment_id": 64635200, "body": "<code>wxImage::AddHandler(&amp;wxBMPHandler());</code> should fail to compile, unless that class has overloaded <code>operator&amp;</code> for rvalues"}, {"owner": {"reputation": 5790, "user_id": 3258851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fUPld.jpg?s=128&g=1", "display_name": "Marc.2377", "link": "https://stackoverflow.com/users/3258851/marc-2377"}, "reply_to_user": {"reputation": 6610, "user_id": 6541659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9f448206061d0711752562bfaf0546?s=128&d=identicon&r=PG&f=1", "display_name": "aichao", "link": "https://stackoverflow.com/users/6541659/aichao"}, "edited": false, "score": 0, "creation_date": 1469683875, "post_id": 38624825, "comment_id": 64639963, "body": "@aichao Could you specify how? I tried <code>wxImage::AddHandler(shared_ptr&lt;wxBMPHandler&gt;(new wxBMPHandler()).get());</code> - it didn&#39;t work as well."}, {"owner": {"reputation": 5790, "user_id": 3258851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fUPld.jpg?s=128&g=1", "display_name": "Marc.2377", "link": "https://stackoverflow.com/users/3258851/marc-2377"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1469686595, "post_id": 38624825, "comment_id": 64641131, "body": "@M.M hmm, I&#39;m not sure about that. See my update to the question body."}, {"owner": {"reputation": 6610, "user_id": 6541659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9f448206061d0711752562bfaf0546?s=128&d=identicon&r=PG&f=1", "display_name": "aichao", "link": "https://stackoverflow.com/users/6541659/aichao"}, "edited": false, "score": 0, "creation_date": 1469699946, "post_id": 38624825, "comment_id": 64649535, "body": "@Marc.2377 sorry, I forgot to add that wxImage::AddHandler itself needs to be modified to have the shared_ptr as input, which is not possible."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1469700303, "post_id": 38624825, "comment_id": 64649814, "body": "@Marc.2377 the code you posted <a href=\"https://godbolt.org/g/VZnHEx\" rel=\"nofollow noreferrer\">has an error</a>, if your compiler is not detecting it then something&#39;s wrong"}, {"owner": {"reputation": 6610, "user_id": 6541659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9f448206061d0711752562bfaf0546?s=128&d=identicon&r=PG&f=1", "display_name": "aichao", "link": "https://stackoverflow.com/users/6541659/aichao"}, "edited": false, "score": 0, "creation_date": 1469702521, "post_id": 38624825, "comment_id": 64651355, "body": "@Marc.2377 my first comment was not meant to be an answer. Otherwise, I would have answered. My points (if you are to make it a one-liner, which I suggest you not) were: (i) to avoid the dangling pointer the object needs to be allocated on the heap, and (ii) to avoid a resource leak, the pointer to the object needs to be a <code>shared_ptr</code>. To actually implement these points, you can wrap <code>wxImage::AddHandler</code> in another function that accepts the <code>shared_ptr</code> as input and forwards the pointer via <code>get()</code> to <code>wxImage::AddHandler</code>. If you want to see that as an answer, let me know."}, {"owner": {"reputation": 6610, "user_id": 6541659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9f448206061d0711752562bfaf0546?s=128&d=identicon&r=PG&f=1", "display_name": "aichao", "link": "https://stackoverflow.com/users/6541659/aichao"}, "edited": false, "score": 0, "creation_date": 1469704584, "post_id": 38624825, "comment_id": 64652684, "body": "@Marc.2377 I&#39;ll correct myself again. Looking at the <a href=\"http://docs.wxwidgets.org/trunk/classwx_image.html#ab39fb3747dfb8c2d444eff9fe41fa205\" rel=\"nofollow noreferrer\">wxWidgets docs here</a>, you do not need to manage the memory for the handlers, <code>wxWidgets</code> will do that for you. See <code>wxImage::AddHandler</code> and <code>wxImage::CleanUpHandlers</code>. Therefore, you should be able to just allocate the handler on the heap with <code>new</code> as a one-liner."}, {"owner": {"reputation": 5790, "user_id": 3258851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fUPld.jpg?s=128&g=1", "display_name": "Marc.2377", "link": "https://stackoverflow.com/users/3258851/marc-2377"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1469737901, "post_id": 38624825, "comment_id": 64675072, "body": "@M.M &quot;The -fpermissive flag causes the compiler to report some things that are actually errors (but are permitted by some compilers) as warnings&quot; <a href=\"http://stackoverflow.com/a/8843846/3258851\">source</a>. Indeed it doesn&#39;t compile with GCC, but I was using the latests MSVC, with warnings set to the highest level!"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1469795369, "post_id": 38624825, "comment_id": 64698578, "body": "you&#39;d have to consult MSVC documentation for the behaviour of <code>&amp;wxBMPHandler()</code> then"}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1469662619, "creation_date": 1469662619, "answer_id": 38624865, "question_id": 38624825, "link": "https://stackoverflow.com/questions/38624825/using-an-object-by-calling-class-constructor-explicitly-vs-by-default-initializa/38624865#38624865", "title": "Using an object by calling class constructor explicitly vs by default initialization + assignment operator", "body": "<p>In <code>wxImage::AddHandler(&amp;wxBMPHandler());</code>, the lifetime of the temporary stop at the end of the expression, so you have dangling pointer.</p>\n\n<p>In</p>\n\n<pre><code>wxBMPHandler h;\n\nwxImage::AddHandler(&amp;h);\n\nwxBitmap bm = wxBitmap(200, 200);\nbm.SaveFile(\"file.bmp\", wxBITMAP_TYPE_BMP);\n</code></pre>\n\n<p><code>h</code> outlives the call <code>bm.SaveFile(\"file.bmp\", wxBITMAP_TYPE_BMP);</code>.</p>\n\n<p>You will have similar issue with</p>\n\n<pre><code>{\n    wxBMPHandler h;\n\n    wxImage::AddHandler(&amp;h);\n} // End of life time of h\n\nwxBitmap bm = wxBitmap(200, 200);\nbm.SaveFile(\"file.bmp\", wxBITMAP_TYPE_BMP);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6610, "user_id": 6541659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9f448206061d0711752562bfaf0546?s=128&d=identicon&r=PG&f=1", "display_name": "aichao", "link": "https://stackoverflow.com/users/6541659/aichao"}, "edited": false, "score": 0, "creation_date": 1469710765, "post_id": 38636103, "comment_id": 64657193, "body": "@Marc.2377 In fact, I&#39;m surprised that you did not run into a problem on program exit with your original code when <code>wxImage::CleanUpHandlers()</code> is called. See this <a href=\"http://stackoverflow.com/questions/4355468/is-it-possible-to-delete-a-non-new-object\">SO question/answer</a> for why. Which compiler are you using?"}, {"owner": {"reputation": 5790, "user_id": 3258851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fUPld.jpg?s=128&g=1", "display_name": "Marc.2377", "link": "https://stackoverflow.com/users/3258851/marc-2377"}, "edited": false, "score": 0, "creation_date": 1469735779, "post_id": 38636103, "comment_id": 64674012, "body": "This is great, thanks. I was testing with MSVC 2015 Update 3 btw; using the highest warning level and SDL checks enabled."}], "tags": [], "owner": {"reputation": 6610, "user_id": 6541659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9f448206061d0711752562bfaf0546?s=128&d=identicon&r=PG&f=1", "display_name": "aichao", "link": "https://stackoverflow.com/users/6541659/aichao"}, "is_accepted": true, "score": 3, "last_activity_date": 1469708192, "creation_date": 1469708192, "answer_id": 38636103, "question_id": 38624825, "link": "https://stackoverflow.com/questions/38624825/using-an-object-by-calling-class-constructor-explicitly-vs-by-default-initializa/38636103#38636103", "title": "Using an object by calling class constructor explicitly vs by default initialization + assignment operator", "body": "<p>I've never used <code>wxWidgets</code> before, but according to the <a href=\"http://docs.wxwidgets.org/trunk/classwx_image.html#ab39fb3747dfb8c2d444eff9fe41fa205\" rel=\"nofollow\">wxWidgets version 3.1.1 API docs here</a>, you should call <code>wxImage::AddHandler</code> using a heap-allocated handler object:</p>\n\n<pre><code>wxImage::AddHandler(new wxBMPHandler);\n</code></pre>\n\n<p>Therefore, there is no need for defining <code>h</code>. Also according to the docs, the memory for this handler object is managed by the <code>wxWidgets</code> framework. Specifically, the docs says that the <code>handler</code> is a</p>\n\n<blockquote>\n  <p>heap-allocated handler object which will be deleted by <code>wxImage</code> if it is removed later by <code>RemoveHandler()</code> or at program shutdown.</p>\n</blockquote>\n\n<p>There is also the static member function <code>wxImage::CleanUpHandlers()</code> to delete all registered image handlers. According to the docs:</p>\n\n<blockquote>\n  <p>This function is called by wxWidgets on exit.</p>\n</blockquote>\n\n<p>Therefore, you do not have to delete the handler yourself unless you specifically want to (i.e., to free up some memory).</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 5790, "user_id": 3258851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fUPld.jpg?s=128&g=1", "display_name": "Marc.2377", "link": "https://stackoverflow.com/users/3258851/marc-2377"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 38636103, "answer_count": 2, "score": 0, "last_activity_date": 1469708192, "creation_date": 1469662418, "last_edit_date": 1495541624, "question_id": 38624825, "link": "https://stackoverflow.com/questions/38624825/using-an-object-by-calling-class-constructor-explicitly-vs-by-default-initializa", "title": "Using an object by calling class constructor explicitly vs by default initialization + assignment operator", "body": "<p>Considering the following example:</p>\n\n<pre><code>#include &lt;wx/bitmap.h&gt;\n\nint main()\n{\n    wxBMPHandler h;\n\n    wxImage::AddHandler(&amp;h);\n\n    wxBitmap bm = wxBitmap(200, 200);\n    bm.SaveFile(\"file.bmp\", wxBITMAP_TYPE_BMP);\n\n    return 0;\n}\n</code></pre>\n\n<p>Since I'm only using <code>h</code> to call <code>AddHandler()</code> and not for anything else, I'd like to avoid defining it altogether and do the whole thing in one line. So I thought about replacing that with:</p>\n\n<pre><code>wxImage::AddHandler(&amp;wxBMPHandler());\n</code></pre>\n\n<p>which compiles fine, but calling <code>SaveFile()</code> won't work then; WxWidgets will present an error stating \"No image handler for type 1 defined\" at runtime.</p>\n\n<p>I guess the object created inside the function call is temporary, but I'm not sure about that. If not, what am I missing, and how can I avoid defining <code>h</code>?</p>\n\n<p>It's worth noting that <code>AddHandler()</code> has the following signature:</p>\n\n<pre><code>static void AddHandler( wxImageHandler *handler );\n</code></pre>\n\n<p><br /></p>\n\n<hr>\n\n<p><strong>[Update]</strong>\nIn response to <a href=\"https://stackoverflow.com/users/1505939/m-m\">M.M</a>'s comment saying:</p>\n\n<blockquote>\n  <p>wxImage::AddHandler(&amp;wxBMPHandler()); should fail to compile, unless\n  that class has overloaded operator&amp; for rvalues</p>\n</blockquote>\n\n<p>Since I couldn't find a definition for operator&amp; in WxWidgets' source code, I created this test project:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nstring* address = nullptr;\n\nvoid testing(string* input)\n{\n    *input = \"Something else entirely\";\n    address = input;\n}\n\nint main()\n{\n    testing(&amp;string(\"Life is a test\"));\n\n    cout &lt;&lt; *address &lt;&lt; endl;\n\n    cin.get();\n    return 0;\n}\n</code></pre>\n\n<p>It compiles fine, and runs without any \"hard error\" - the only caveat is that nothing is shown in the screen - <code>(*address).empty()</code> returns true.\nI even defined my own class to test with, instead of <code>std::string</code> and yielded the same behavior (no compiler error, no runtime error, but no output).</p>\n\n<p>I also tried this one-liner, as suggested by <a href=\"https://stackoverflow.com/users/6541659/aichao\">aichao</a>, without success:</p>\n\n<pre><code>wxImage::AddHandler(shared_ptr&lt;wxBMPHandler&gt;(new wxBMPHandler()).get());\n</code></pre>\n"}, {"tags": ["c++", "performance", "g++", "fstream", "clang++"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1469660475, "post_id": 38624468, "comment_id": 64634644, "body": "<code>fstreams</code> are not part of the <code>STL</code> which only refers to the <code>algorithms</code>, <code>containers</code> and <code>iterators</code> elements."}, {"owner": {"reputation": 1457, "user_id": 2981588, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f4f2945d6e635729ef90306b3fc473d?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/2981588/tim"}, "edited": false, "score": 0, "creation_date": 1469660797, "post_id": 38624468, "comment_id": 64634726, "body": "Did you try using clang with libstdc++? <code>clang++ -stdlib=libstdc++</code>"}, {"owner": {"reputation": 473, "user_id": 1715586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc2aa29013b4d0aed59b956b06320b0?s=128&d=identicon&r=PG", "display_name": "M4rc", "link": "https://stackoverflow.com/users/1715586/m4rc"}, "edited": false, "score": 2, "creation_date": 1469661414, "post_id": 38624468, "comment_id": 64634847, "body": "What compiler options are enabled by default? Particularly the optimization levels."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1469663028, "post_id": 38624468, "comment_id": 64635230, "body": "on my mac (clang) with optimisations enabled, <code>time taken: 14 seconds</code>"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1469664344, "post_id": 38624468, "comment_id": 64635555, "body": "FWIW, on my Mac with Xcode 7.3, the compilers <code>g++</code>, <code>gcc</code>, <code>clang++</code> and <code>clang</code> all seem to map to the same clang compiler: <code>Apple LLVM version 7.3.0 (clang-703.0.29)</code>, which is in <code>InstalledDir: &#47;Applications&#47;Xcode.app&#47;Contents&#47;Developer&#47;Toolchains&#47;XcodeD&zwnj;&#8203;efault.xctoolchain&#47;u&zwnj;&#8203;sr&#47;bin</code>."}, {"owner": {"reputation": 95, "user_id": 6646949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QpvfX.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/6646949/tal"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1469750960, "post_id": 38624468, "comment_id": 64679674, "body": "@Galik -- thanks for the correction.  I replaced STL for Standard Library."}, {"owner": {"reputation": 95, "user_id": 6646949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QpvfX.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/6646949/tal"}, "reply_to_user": {"reputation": 1457, "user_id": 2981588, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f4f2945d6e635729ef90306b3fc473d?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/2981588/tim"}, "edited": false, "score": 0, "creation_date": 1469751328, "post_id": 38624468, "comment_id": 64679765, "body": "@Tim -- Not exactly.  I had used: &#39;clang++ -std=gnu++11 -stdlib=libstdc++&#39; to pick up the libstdc++.  For this example, &#39;clang++ -std=c++11 -stdlib=libstdc++&#39; does work, too.  However, generally, I haven&#39;t had much success mixing libstdc++ without -std=gnu++11."}, {"owner": {"reputation": 95, "user_id": 6646949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QpvfX.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/6646949/tal"}, "edited": false, "score": 0, "creation_date": 1469751858, "post_id": 38624468, "comment_id": 64679889, "body": "@M4c -- The times stated were with the default options.  In my original code the optimizations were not helping more than a few percent.  However, for this using -O3, has a bit more impact.  The time dropped from 50 sec, to 16 sec."}, {"owner": {"reputation": 95, "user_id": 6646949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QpvfX.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/6646949/tal"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1469752047, "post_id": 38624468, "comment_id": 64679936, "body": "@RichardHodges -- Yes, for this particular case -O3 is having a notable impact.  I saw 16 seconds down from 50 seconds.  However, in original code, it wasn&#39;t that significant.  So I didn&#39;t think to try anything besides the default settings for this example."}, {"owner": {"reputation": 95, "user_id": 6646949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QpvfX.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/6646949/tal"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1469752499, "post_id": 38624468, "comment_id": 64680053, "body": "@RudyVelthuis -- I am running Xcode 7.3.1 (clang-7.3.0.7030031). clang++ does point to clang.  However,  g++/gcc is based off of 4.2.1.  The way, I typically compile for g++ is : &#39;clang++ -std=gnu++11 -stdlib=libstdc++&#39; ."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1469752805, "post_id": 38624468, "comment_id": 64680138, "body": "If you are processing binary data, what <code>&lt;&lt;</code> and <code>&gt;&gt;</code> are doing in your code?"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1469754009, "post_id": 38624468, "comment_id": 64680418, "body": "@n.m.: Take a look at the second piece of source code. It tells you the lines that are written. It is ASCII text. I guess getline() could be a hint as well."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1469754186, "post_id": 38624468, "comment_id": 64680467, "body": "@Tal: what does &quot;gcc --version&quot; display? In my case the same string as clang, clang++ and g++, i.e. what I showed in my other comment."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1469755262, "post_id": 38624468, "comment_id": 64680723, "body": "@RudyVelthuis binary data doesn&#39;t have lines. Text has lines. If one processes binary data, it makes little sense to benchmark facilities designed for processing formatted text."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1469755557, "post_id": 38624468, "comment_id": 64680776, "body": "@n.m. Exactly. So it is obviously text. And that is also why there are &lt;&lt; and &gt;&gt; in the code."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1469758470, "post_id": 38624468, "comment_id": 64681384, "body": "@RudyVelthuis OP says &quot;I am trying to process very large (many GBs) <b>binary</b> data files&quot;, and then it&#39;s suddenly text."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1469773460, "post_id": 38624468, "comment_id": 64685487, "body": "Well yes, the code shows it is."}], "owner": {"reputation": 95, "user_id": 6646949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QpvfX.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/6646949/tal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 806, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1469750878, "creation_date": 1469659893, "last_edit_date": 1469750878, "question_id": 38624468, "link": "https://stackoverflow.com/questions/38624468/clang-fstreams-10x-slower-than-g", "title": "clang++ fstreams 10X slower than g++", "body": "<p>Q: Is there a way to speed up clang++ STD Library fstreams? (And does anybody know why it is so much slower than g++?)</p>\n\n<p>I am trying to process very large (many GBs) binary data files and was surprised to find the performance was so poor.  At first, I thought it was something to do with my code.  But I am seeing the same slow performance in a boiled down example.</p>\n\n<p>I even tried allocating different size buffers via rdbuf()->pubsetbuf() but this didn't seem to have much effect.</p>\n\n<p>Here is a simple input/output example:</p>\n\n<pre><code>#include &lt;fstream&gt;\n\nint main() {\n    std::ifstream is {\"bigSourceFile\"};\n    std::ofstream os {\"bigSourceFileCopy\"};\n\n    std::string line;\n    while (std::getline (is, line) ) {\n        os &lt;&lt; line;\n    }\n}\n</code></pre>\n\n<p>Here is some code to generate a 1.3GB source file.  Use this to generate the source file for the readWrite program:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nstd::string createTailStr () {\n    std::string result {\"__\"};\n    for (auto i (0); i&lt; 58; ++i) {\n        result += 'A'+i;\n    }\n\n    return result;\n}\n\nint main() {\n\n    std::string tail {createTailStr()};\n\n    std::ofstream os {\"bigSourceFile\"};\n\n    constexpr auto Lines (20000000ul);\n    for (auto i (0); i &lt; Lines; ++i) {\n        os &lt;&lt; i &lt;&lt; tail &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n\n<p>On my machine (running OSX El Capitan and the latest Xcode): the example (the first code listing) takes aprox. 50 seconds to run compiling from the command line:</p>\n\n<p><strong>clang++ -std=c++11 -o readWrite readWrite.cpp</strong> </p>\n\n<p>However, when compiling against g++ and its libstdc++, the program only takes about 5 seconds.</p>\n\n<p>I even built the latest cut of llvm stdc++ from llvm.org and that build was even slower (aprox 90 seconds).</p>\n\n<p>To sum up:\nclang++ : 50 seconds;\ng++ : 5 seconds</p>\n"}, {"tags": ["c++", "opengl", "containers", "shader-storage-buffer"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1469659600, "post_id": 38624294, "comment_id": 64634404, "body": "Wouldn&#39;t you want to just send the contents of <code>entityInfoBuffer</code> to the GPU? You don&#39;t want to be copying CPU pointers to the GPU, they won&#39;t mean anything to the GPU (you might as well be copying random numbers)."}, {"owner": {"reputation": 161, "user_id": 4848323, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/81f574d6d0a090c6136f902334005bc4?s=128&d=identicon&r=PG&f=1", "display_name": "Talesseed", "link": "https://stackoverflow.com/users/4848323/talesseed"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1469660919, "post_id": 38624294, "comment_id": 64634748, "body": "I think that, when using a shader storage buffer object, you have to use structs ? I am wrong ? That would mean I would have to set <code>entityInfoBuffer.data()</code> to the SSBOshaderData <code>entityInfoBuffer</code> ? Also, OpenGL will only be able to read <code>&amp;mat4[0][0]</code>."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1469663243, "post_id": 38624294, "comment_id": 64635292, "body": "@Talesseed: &quot;<i>you have to use structs ?</i>&quot; Why? Data is data, memory is memory, and buffer objects are buffer objects."}, {"owner": {"reputation": 161, "user_id": 4848323, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/81f574d6d0a090c6136f902334005bc4?s=128&d=identicon&r=PG&f=1", "display_name": "Talesseed", "link": "https://stackoverflow.com/users/4848323/talesseed"}, "edited": false, "score": 0, "creation_date": 1469663704, "post_id": 38624294, "comment_id": 64635394, "body": "Yes, my bad... I just want to use structs to be able to add elements that I may need after."}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 4848323, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/81f574d6d0a090c6136f902334005bc4?s=128&d=identicon&r=PG&f=1", "display_name": "Talesseed", "link": "https://stackoverflow.com/users/4848323/talesseed"}, "edited": false, "score": 0, "creation_date": 1469663834, "post_id": 38624969, "comment_id": 64635431, "body": "Thanks, I though that mat4 wasn&#39;t an array. However, what can I do if  I want to use structs to be able to add elements later on ?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 161, "user_id": 4848323, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/81f574d6d0a090c6136f902334005bc4?s=128&d=identicon&r=PG&f=1", "display_name": "Talesseed", "link": "https://stackoverflow.com/users/4848323/talesseed"}, "edited": false, "score": 0, "creation_date": 1469664204, "post_id": 38624969, "comment_id": 64635514, "body": "@Talesseed: It&#39;s not clear what you mean by that, but I&#39;m pretty sure that&#39;s a different question from the one you asked here."}, {"owner": {"reputation": 161, "user_id": 4848323, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/81f574d6d0a090c6136f902334005bc4?s=128&d=identicon&r=PG&f=1", "display_name": "Talesseed", "link": "https://stackoverflow.com/users/4848323/talesseed"}, "edited": false, "score": 0, "creation_date": 1469664671, "post_id": 38624969, "comment_id": 64635649, "body": "I wanted to add more members to shaderData. But yes, I think that is another question."}, {"owner": {"reputation": 161, "user_id": 4848323, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/81f574d6d0a090c6136f902334005bc4?s=128&d=identicon&r=PG&f=1", "display_name": "Talesseed", "link": "https://stackoverflow.com/users/4848323/talesseed"}, "edited": false, "score": 0, "creation_date": 1469664748, "post_id": 38624969, "comment_id": 64635661, "body": "And for the typedef, the second awnser explains that the absence of typedef can lead to a bug (<a href=\"http://stackoverflow.com/questions/612328/difference-between-struct-and-typedef-struct-in-c\" title=\"difference between struct and typedef struct in c\">stackoverflow.com/questions/612328/&hellip;</a>)"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 161, "user_id": 4848323, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/81f574d6d0a090c6136f902334005bc4?s=128&d=identicon&r=PG&f=1", "display_name": "Talesseed", "link": "https://stackoverflow.com/users/4848323/talesseed"}, "edited": false, "score": 0, "creation_date": 1469664988, "post_id": 38624969, "comment_id": 64635731, "body": "@Talesseed: That&#39;s what <i>namespaces</i> are for. Also, it&#39;s a bug so rare that most dedicated C++ programmers don&#39;t even know its a possibility."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 4, "last_activity_date": 1469663335, "creation_date": 1469663335, "answer_id": 38624969, "question_id": 38624294, "link": "https://stackoverflow.com/questions/38624294/giving-c-containers-to-opengl/38624969#38624969", "title": "Giving C++ containers to OpenGL?", "body": "<p><code>glm::mat4</code> is, for all intents and purposes, an array of 16 <code>float</code>s. Not a <em>pointer</em> to 16 floats, an actual <code>float[16]</code> array. 16 <code>float</code>s, one after the other.</p>\n\n<p>Therefore, a <code>vector&lt;glm::mat4&gt;</code> manages a contiguous array of elements, where each element is 16 floats. It is that data that you want to store in your buffer object. So... do that.</p>\n\n<p><code>vector</code> manages a contiguous array of data, so it's perfectly legal to get a pointer to this array. That's what <code>vector.data()</code> is for. So that's the source pointer you give to <code>glBufferSubData</code> or whatever. The size would be the number of elements in the array (<code>vector.size()</code>) times the size of each element as computed by <code>sizeof</code>.</p>\n"}], "owner": {"reputation": 161, "user_id": 4848323, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/81f574d6d0a090c6136f902334005bc4?s=128&d=identicon&r=PG&f=1", "display_name": "Talesseed", "link": "https://stackoverflow.com/users/4848323/talesseed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 38624969, "answer_count": 1, "score": 1, "last_activity_date": 1469663335, "creation_date": 1469658808, "last_edit_date": 1469659366, "question_id": 38624294, "link": "https://stackoverflow.com/questions/38624294/giving-c-containers-to-opengl", "title": "Giving C++ containers to OpenGL?", "body": "<p>I created a shader storage buffer object to give information to my vertex shader. It is bound to a buffer containing a single structure. But there is a problem. The data I keep in this structure is not a simple array, it's a <code>std::vector</code>.</p>\n\n<p>Here is the structure :</p>\n\n<pre><code>typedef struct {\n    glm::mat4 modelMatrix;\n} entityInfo;\n\ntypedef struct {\n    std::vector&lt;entityInfo&gt; entityInfoBuffer;\n} shaderData;\n</code></pre>\n\n<p>mat4 is just a simple 4x4 float matrix.</p>\n\n<p>If I give this to OpenGL, the data transmitted to the GPU will be just a bunch of pointers and info about the matrix/vector, and not the data in them.</p>\n\n<p>One solution would be to create a structure only for OpenGL:</p>\n\n<pre><code>typedef struct {\n    float* modelMatrix;\n} SSBOentityInfo;\n\ntypedef struct {\n    SSBOentityInfo* entityInfoBuffer;\n} SSBOshaderData;\n</code></pre>\n\n<p>But I would have to copy eeeeevery pointer corresponding to the data of the containers.</p>\n\n<p>Is there a better way to do it?</p>\n"}, {"tags": ["python", "c++", "exception"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1469667174, "post_id": 38624273, "comment_id": 64636097, "body": "Please <a href=\"https://stackoverflow.com/posts/38624273/edit\">edit</a> your question and add the try{}catch(...) code you tried."}, {"owner": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 0, "creation_date": 1469679513, "post_id": 38624273, "comment_id": 64638662, "body": "C and C++ are different languages. There is no <code>try{}catch(...)</code> in C. What language are you using?"}], "owner": {"reputation": 21, "user_id": 6622487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8370c529b8bfbfc7e00e5321d204ec?s=128&d=identicon&r=PG&f=1", "display_name": "user6622487", "link": "https://stackoverflow.com/users/6622487/user6622487"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 516, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1469729486, "creation_date": 1469658718, "last_edit_date": 1469729486, "question_id": 38624273, "link": "https://stackoverflow.com/questions/38624273/how-to-catch-and-handle-fatal-error-from-calling-py-initialize-in-c", "title": "How to catch and handle fatal error from calling Py_Initialize() in C", "body": "<p>I'm embedding Python into C and at the beginning of my code I have something like below. Everything works fine until a user accidently removed python33 folder. This causes Py_Initialize() throw a fatal error saying \"Fatal Python error: Py_Initialize: unable to load the file system codec\" Then my application crashed. I tried to use try{}catch(...) to catch this kind of error, but seems not working. I wonder if there is any way I can gracefully catch and handle it.</p>\n\n<pre><code>try\n{\n    if(!Py_IsInitialized())\n    {\n        Py_Initialize();\n    }\n}\ncatch(...)\n{\n    std::out &lt;&lt; \"Can't initialized Python\" &lt;&lt; std::endl;\n    return;\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "glut"], "answers": [{"comments": [{"owner": {"reputation": 266, "user_id": 1997993, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wpUBj.jpg?s=128&g=1", "display_name": "Trevor Jex", "link": "https://stackoverflow.com/users/1997993/trevor-jex"}, "edited": false, "score": 0, "creation_date": 1469660144, "post_id": 38624274, "comment_id": 64634561, "body": "May I ask why the &quot;Hi&quot; is never displayed? Is it because it is not part of the main thread?"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "reply_to_user": {"reputation": 266, "user_id": 1997993, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wpUBj.jpg?s=128&g=1", "display_name": "Trevor Jex", "link": "https://stackoverflow.com/users/1997993/trevor-jex"}, "edited": false, "score": 0, "creation_date": 1469660963, "post_id": 38624274, "comment_id": 64634753, "body": "@acer: <a href=\"http://i.stack.imgur.com/2HN03.png\" rel=\"nofollow noreferrer\">Workin&#39; fine on my end</a>.  Not sure how your setup differs."}], "tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": true, "score": 2, "last_activity_date": 1469659095, "last_edit_date": 1495542824, "creation_date": 1469658719, "answer_id": 38624274, "question_id": 38624162, "link": "https://stackoverflow.com/questions/38624162/glut-only-runs-display-callback-once-and-doesnt-output-to-terminal/38624274#38624274", "title": "GLUT only runs display callback once and doesn&#39;t output to terminal", "body": "<p>Add a timer callback to post a redisplay every now and again:</p>\n\n<pre><code>void timer( int value )\n{\n    glutPostRedisplay();\n    glutTimerFunc( 16, timer, 0 );\n}\n</code></pre>\n\n<p>Otherwise <code>display()</code> will only be called when the OS feels like it, usually <a href=\"https://stackoverflow.com/a/4206504/44729\">after an expose/damage/paint event (like a window resize, or exposing more of the window by moving another window off of it)</a>.</p>\n\n<p>All together:</p>\n\n<pre><code>#include &lt;GL/glut.h&gt;\n#include &lt;iostream&gt;\n\nclass Ground{\nprivate:\n    float zpos;\npublic:\n    Ground(){\n        zpos = -5.0f;\n    }\n    void Render(){\n        glColor3f(1.0,0.0,1.0);\n        glBegin(GL_TRIANGLES);\n        glVertex3f(0,0,zpos);\n        glVertex3f(0,1,zpos);\n        glVertex3f(1,1,zpos);\n        glEnd();\n        zpos -= 0.1f;\n    }\n};\n\nclass Skybox{\npublic:\n    Skybox(){\n\n    }\n    void Render(){\n        glClearColor(0.5, 0.8, 1.0, 1.0);\n        glClear(GL_COLOR_BUFFER_BIT);\n    }\n};\n\nSkybox s;\nGround g;\nvoid init(void) \n{\n    s = Skybox();\n    g = Ground();\n    glShadeModel (GL_SMOOTH);\n    glMatrixMode(GL_MODELVIEW);\n    glDepthFunc(GL_LEQUAL);\n    glViewport(0,0,glutGet(GLUT_SCREEN_WIDTH), glutGet(GLUT_SCREEN_HEIGHT));\n    glEnable(GL_DEPTH_TEST);\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    gluPerspective(60,glutGet(GLUT_SCREEN_WIDTH)/glutGet(GLUT_SCREEN_HEIGHT),0.1,100);\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n}\n\nvoid display(void)\n{\n    std::cout &lt;&lt; \"Hi\";\n    glClearColor(0,0,0,0);\n    glClearDepth(1);\n    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);\n    s.Render();\n    g.Render();\n    glLoadIdentity();\n    glutSwapBuffers();\n}\n\nvoid timer( int value )\n{\n    glutTimerFunc( 16, timer, 0 );\n    glutPostRedisplay();\n}\n\nint main(int argc, char** argv)\n{\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode (GLUT_DOUBLE | GLUT_RGBA | GLUT_DEPTH);\n    glutInitWindowSize( 800, 600 ); \n    glutCreateWindow (\"Umm\");\n    init ();\n    glutTimerFunc( 0, timer, 0 );\n    glutDisplayFunc(display); \n    glutMainLoop();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 266, "user_id": 1997993, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wpUBj.jpg?s=128&g=1", "display_name": "Trevor Jex", "link": "https://stackoverflow.com/users/1997993/trevor-jex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1302, "favorite_count": 0, "accepted_answer_id": 38624274, "answer_count": 1, "score": 2, "last_activity_date": 1469659095, "creation_date": 1469658150, "last_edit_date": 1469658629, "question_id": 38624162, "link": "https://stackoverflow.com/questions/38624162/glut-only-runs-display-callback-once-and-doesnt-output-to-terminal", "title": "GLUT only runs display callback once and doesn&#39;t output to terminal", "body": "<p>My GLUT program is behaving very unexpectedly. All it does (all it should do) is clear the screen blue and draw a purple triangle receding into the distance.</p>\n\n<p>First and foremost, here is my code:</p>\n\n<pre><code>#include &lt;GL/glut.h&gt;\n#include &lt;iostream&gt;\n\nclass Ground{\nprivate:\n    float zpos;\npublic:\n    Ground(){\n        zpos = -5.0f;\n    }\n    void Render(){\n        glColor3f(1.0,0.0,1.0);\n        glBegin(GL_TRIANGLES);\n        glVertex3f(0,0,zpos);\n        glVertex3f(0,1,zpos);\n        glVertex3f(1,1,zpos);\n        glEnd();\n        zpos -= 0.1f;\n    }\n};\n\nclass Skybox{\npublic:\n    Skybox(){\n\n    }\n    void Render(){\n        glClearColor(0.5, 0.8, 1.0, 1.0);\n        glClear(GL_COLOR_BUFFER_BIT);\n    }\n};\n\nSkybox s;\nGround g;\nvoid init(void) \n{\n    s = Skybox();\n    g = Ground();\n    glShadeModel (GL_SMOOTH);\n    glMatrixMode(GL_MODELVIEW);\n    glDepthFunc(GL_LEQUAL);\n    glViewport(0,0,glutGet(GLUT_SCREEN_WIDTH), glutGet(GLUT_SCREEN_HEIGHT));\n    glEnable(GL_DEPTH_TEST);\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    gluPerspective(60,glutGet(GLUT_SCREEN_WIDTH)/glutGet(GLUT_SCREEN_HEIGHT),0.1,100);\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n}\n\nvoid display(void)\n{\n    std::cout &lt;&lt; \"Hi\";\n    glClearColor(0,0,0,0);\n    glClearDepth(1);\n    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);\n    s.Render();\n    g.Render();\n    glLoadIdentity();\n    glutSwapBuffers();\n}\n\nint main(int argc, char** argv)\n{\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode (GLUT_DOUBLE | GLUT_RGBA | GLUT_DEPTH);\n    glutInitWindowSize( 800, 600 ); \n    glutCreateWindow (\"Umm\");\n    init ();\n    glutDisplayFunc(display); \n    glutMainLoop();\n    return 0;\n}\n</code></pre>\n\n<p>However, the code does not work as expected - the purple triangle does not recede into the distance, it stays still, and the simple <code>cout</code> doesn't even do anything! (But somehow, all of the code after it in the display function is executed, but only once?) </p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "class", "oop", "c++11", "nested"], "comments": [{"owner": {"reputation": 2236, "user_id": 2503039, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Rtjzk.jpg?s=128&g=1", "display_name": "Davidbrcz", "link": "https://stackoverflow.com/users/2503039/davidbrcz"}, "edited": false, "score": 1, "creation_date": 1469658993, "post_id": 38624087, "comment_id": 64634208, "body": "Helper is nested within TestBuilder, it already has a full access to any private member of any TestBuilder object."}], "answers": [{"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 3, "last_activity_date": 1469664289, "creation_date": 1469664289, "answer_id": 38625106, "question_id": 38624087, "link": "https://stackoverflow.com/questions/38624087/how-do-i-declare-a-member-template-class-an-friend-of-the-enclosing-class/38625106#38625106", "title": "How do I declare a member template class an friend of the enclosing class?", "body": "<p>But <code>Helper</code> is a <strong>nested class</strong> of TestBuilder, isn't it? :)</p>\n\n<p>As a result, it has access to the members of the outer class (yes, and its private members), check the example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate&lt;typename Fun, typename Arg&gt;\nclass TestBuilder\n{\n  int n;\n  char c;\n\npublic:\n  template&lt;typename Int&gt;\n  class Helper\n  {\n  public:\n    void print(TestBuilder&amp; tb) {\n      std::cout &lt;&lt; tb.n &lt;&lt; \" \" &lt;&lt; tb.c &lt;&lt; std::endl;\n    }\n  };\n  TestBuilder(int n, char c) : n(n), c(c) {}\n\n};\n\nint main() {\n        TestBuilder&lt;int, int&gt; tb(5, 'p');\n        TestBuilder&lt;int, int&gt;::Helper&lt;int&gt; h;\n        h.print(tb);\n\n        return 0;\n}\n</code></pre>\n\n<p>which will output:</p>\n\n<pre><code>C02QT2UBFVH6-lm:~ gsamaras$ pico main.cpp\nC02QT2UBFVH6-lm:~ gsamaras$ g++ -Wall main.cpp \nC02QT2UBFVH6-lm:~ gsamaras$ ./a.out\n5 p\n</code></pre>\n\n<hr>\n\n<p>However, if you add another class (not a nested one, just another class), it won't have access (of course!) to the private members of <code>TestBuilder</code>, see for yourself:</p>\n\n<pre><code>class alienClass\n{\npublic:\n  /*\n   That won't work, you will get:\n   error: 'n' is a private member of 'TestBuilder&lt;int, int&gt;'\n   error: 'c' is a private member of 'TestBuilder&lt;int, int&gt;'\n  */\n  void print(TestBuilder&lt;int, int&gt;&amp; tb) {\n    std::cout &lt;&lt; tb.n &lt;&lt; \" \" &lt;&lt; tb.c &lt;&lt; std::endl;\n  }\n};\n</code></pre>\n"}], "owner": {"reputation": 13461, "user_id": 680359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/39501f826ecf65950b455b670a78c58a?s=128&d=identicon&r=PG", "display_name": "emsr", "link": "https://stackoverflow.com/users/680359/emsr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469664486, "creation_date": 1469657766, "last_edit_date": 1469664486, "question_id": 38624087, "link": "https://stackoverflow.com/questions/38624087/how-do-i-declare-a-member-template-class-an-friend-of-the-enclosing-class", "title": "How do I declare a member template class an friend of the enclosing class?", "body": "<p>I have some class</p>\n\n<pre><code>template&lt;typename Fun, typename Arg&gt;\n  class TestBuilder\n  {\n    template&lt;typename Int&gt;\n      class Helper\n      {};\n  };\n</code></pre>\n\n<p>How do I make <code>Helper</code> a <code>friend</code> of <code>TestBuilder</code>?\nI tried:</p>\n\n<pre><code>template&lt;typename Int&gt;\n  friend class Helper;\n</code></pre>\n\n<p>but that just makes friends of namespace scope <code>Helper</code> classes friends of <code>TestBuilder</code></p>\n"}, {"tags": ["c++", "arrays", "function"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1469657263, "post_id": 38623917, "comment_id": 64633608, "body": "did the debugger show you have the correct string in userString?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469657285, "post_id": 38623917, "comment_id": 64633619, "body": "From a software engineering standpoint <code>Count_All</code> can be a bad idea. Do one thing and do it well."}, {"owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "edited": false, "score": 0, "creation_date": 1469657346, "post_id": 38623917, "comment_id": 64633640, "body": "I am using Xcode, the debugger is normally blank for whatever reason."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 2, "creation_date": 1469657425, "post_id": 38623917, "comment_id": 64633676, "body": "You should really learn to use your debugger.  It would let you see that you&#39;re counting letters 3 times (once you fix the syntactical errors)."}, {"owner": {"reputation": 3159, "user_id": 4566726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703bf229fd5caa423e3681efd566dcb7?s=128&d=identicon&r=PG", "display_name": "H. Guijt", "link": "https://stackoverflow.com/users/4566726/h-guijt"}, "edited": false, "score": 0, "creation_date": 1469657438, "post_id": 38623917, "comment_id": 64633682, "body": "Start with analyzing the Count_All function; it should really only need one loop, not multiple nested loops. Use print statements or the debugger to see how the various variables are changed and why. For the rest... The Dyn_Array thing is completely pointless (why not pass userString?), and using strlen() as the end condition of a loop means it will be evaluated on every loop iteration. There&#39;s absolutely no need for that."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1469658821, "post_id": 38623917, "comment_id": 64634136, "body": "[OT]: You may look at <a href=\"http://stackoverflow.com/documentation/c%2b%2b/487/functions-with-multiple-return-values\">functions-with-multiple-return-values</a> for alternatives for your output parameters."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1469657690, "post_id": 38624059, "comment_id": 64633775, "body": "OP also needs to kill the <code>strptr++;</code> in their word detector. As coded the word detector breaks everything else"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469657862, "post_id": 38624059, "comment_id": 64633831, "body": "@user4581301 - good catch. The word detector logic is also broken, on second look, and results in undefined behavior."}, {"owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "edited": false, "score": 0, "creation_date": 1469658103, "post_id": 38624059, "comment_id": 64633910, "body": "I don&#39;t even know where to begin on how to fix anything, I am only a novice :("}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 3, "last_activity_date": 1469657831, "last_edit_date": 1469657831, "creation_date": 1469657592, "answer_id": 38624059, "question_id": 38623917, "link": "https://stackoverflow.com/questions/38623917/the-letter-counter-within-my-c-code-is-not-working-properly/38624059#38624059", "title": "The Letter counter within my C++ code is not working properly", "body": "<pre><code>for(int x = 0; x &lt; strlen(*strptr); x++)\n</code></pre>\n\n<p>Given that <code>strptr</code> is a <code>char *</code>, your compiler is most likely yelling at you, very loudly, on this line, because you're passing a <code>char</code> to <code>strlen()</code> instead of a <code>char *</code>. Loud screams from your compiler must not be ignored, even if the compiler still produces an executable.</p>\n\n<p>Even if this is fixed as follows, this will still produce completely wrong results:</p>\n\n<pre><code>    for(int x = 0; x &lt; strlen(strptr); x++)\n    {\n        if(!isspace(strptr[x]) &amp;&amp; !Ispunct(strptr[x]))\n        {\n            Letters++;\n        }\n    }\n</code></pre>\n\n<p>This is a second inner loop. The outer loop iterates <code>strptr</code> over every character, executing a bunch of stuff, including this inner loop.</p>\n\n<p>So, if the string in question is \"hello\":</p>\n\n<ol>\n<li><p>On the first iteration of the outer loop, <code>strptr</code> points at the '<strong><em>h</em></strong>', and this inner loop adds 5 to <code>Letters</code>.</p></li>\n<li><p>On the second iteration of the outer loop, <code>strptr</code> points at the '<strong><em>e</em></strong>', and this inner loop adds 4 to <code>Letters</code>.</p></li>\n<li><p>On the third iteration of the outer loop, <code>strptr</code> points at the first '<strong><em>l</em></strong>', and this inner loop adds 3 to <code>Letters</code>.</p></li>\n<li><p>On the fourth iteration of the outer loop, <code>strptr</code> points at the second '<strong><em>l</em></strong>', and this inner loop adds 2 to <code>Letters</code>.</p></li>\n<li><p>On the fifth iteration of the outer loop, <code>strptr</code> points at '<strong><em>o</em></strong>', and this inner loop adds 1 to <code>Letters</code>.</p></li>\n</ol>\n\n<p>This code ends up counting 5+4+3+2+1, or 15 letters in the string \"hello\". Obviously not the correct result.</p>\n\n<p>This inner loop is completely unneeded. Get rid of it.</p>\n\n<p>You should also find a very useful tool on your computer, called a \"debugger\". Using this tool, you would've been able to step through the execution of your code, one line at a time, examine all the variables, and determine this problem all by yourself. Learning how to use a debugger is a required skill for every C++ developer.</p>\n\n<p>EDIT: the letter counting should probably be incorporated at your word detector, since it advances <code>strptr</code> as well. Not only does it mess up the separate letter counting logic, it is also broken on its own merits, because it could advance <code>strptr</code> to the terminating <code>\\0</code> character, and the final <code>strptr++</code> will advance it once more, resulting in undefined behavior, and a likely crash. There are too many problems with the overall logic. It should be rewritten from scratch.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6647012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6feffe585d3e2c79bac9367fe82e41b7?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Senanian", "link": "https://stackoverflow.com/users/6647012/henry-senanian"}, "is_accepted": false, "score": 0, "last_activity_date": 1469658406, "creation_date": 1469658406, "answer_id": 38624199, "question_id": 38623917, "link": "https://stackoverflow.com/questions/38623917/the-letter-counter-within-my-c-code-is-not-working-properly/38624199#38624199", "title": "The Letter counter within my C++ code is not working properly", "body": "<p>As Sam said, you need to be the pointer into the strlen function. Then you need to move your letter counter outside of your while loop and you should be okay. Something like this:</p>\n\n<pre><code>for(int x = 0; x &lt; strlen(strptr); x++)\n{\n   if(!isspace(strptr[x]) &amp;&amp; !Ispunct(strptr[x]))\n   {\n   Letters++;\n   }\n}\n\nwhile (*strptr != '\\0')\n{\n    if ((isspace(*strptr)) || (ispunct(*strptr)))\n    {\n        while ((isspace(*strptr)) || (ispunct(*strptr)))\n        {\n            strptr++;\n        }\n    }\n\n    if ((isalnum(*strptr)) || (ispunct(*strptr)))\n    {\n        Word++;\n        while ((isalnum(*strptr))||(ispunct(*strptr)))\n        {\n            strptr++;\n            Total_Characters++; // Counting the total printable characters (including digits and punctuation).\n\n            if((ispunct(*strptr)))\n            {\n                Pun++; // Counting punctuation.\n            }\n\n        }\n    }\n    strptr++;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "edited": false, "score": 0, "creation_date": 1469658591, "post_id": 38624214, "comment_id": 64634054, "body": "I will break try to break them up when I get home then, thank you!"}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 1, "last_activity_date": 1469744205, "last_edit_date": 1469744205, "creation_date": 1469658483, "answer_id": 38624214, "question_id": 38623917, "link": "https://stackoverflow.com/questions/38623917/the-letter-counter-within-my-c-code-is-not-working-properly/38624214#38624214", "title": "The Letter counter within my C++ code is not working properly", "body": "<p>Efficiency is great. Doing everything in one pass can be awesome, but it is rarely elegant and is often a real [expletive deleted] to debug. As a result there is a recommendation in software engineering that you do one thing and do it well.</p>\n\n<p><code>Count_All</code> counts letters, words, and punctuation all at once and gets it wrong several different ways. It is hard to figure out which bit of functionality is broken  how because bugs tend to feed off and hide each other.</p>\n\n<p>On the other hand, with three functions, <code>Count_Punctuation</code>; <code>Count_Letters</code> and <code>Count_Words</code>, each does exactly one thing. Each can be written separately, tested separately, and debugged separately. Write one function. Prove that it works. Move onto writing and proving the next function. Rinse, repeat.</p>\n\n<p>What results is not as fast as a highly optimized, all-in-one solution, but you can code and debug it a lot faster. This is very important when learning. It means you can spend more time doing the learning.</p>\n\n<p>For example: </p>\n\n<pre><code>int Count_Punctuation(char * strptr)\n{\n    int punc = 0;\n    while (*strptr != '\\0')\n    {\n        if (ispunct(*strptr))\n        {\n            punc ++;\n        }\n        strptr++;\n    }\n    return punc;\n}\n</code></pre>\n\n<p>One loop through each character. If the character is punctuation, increment the counter. when out of characters return the counter.</p>\n\n<p><code>Count_Letter</code> is nearly identical, but counting letters. <code>Count_Word</code> is a bit trickier.</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469722725, "post_id": 38624612, "comment_id": 64666637, "body": "Code that doesn&#39;t do what it is supposed to do needs to be corrected, and until it is people need to be steered away from trying to use it. The best tool we have for both is the downvote. As of the most recent your code has &quot;<a href=\"https://en.wikiquote.org/wiki/C._A._R._Hoare#The_Emperor.27s_Old_Clothes\" rel=\"nofollow noreferrer\">no obvious deficiencies</a>&quot;. I don&#39;t like it because it is too complicated to qualify for &quot;obviously no deficiencies&quot; and a trivial program like this should hit that target."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469723199, "post_id": 38624612, "comment_id": 64666955, "body": "But that&#39;s no reason to waste a downvote. Also when answering, you should explain what you changed and why; Otherwise, the answer promotes <a href=\"https://en.wikipedia.org/wiki/Cargo_cult_programming\" rel=\"nofollow noreferrer\">Cargo Cult Programming</a> over real learning. Sometimes you are better off explaining the source of the problem and the solution than actually implementing it. See Sam Varshavchik&#39;s answer above. Sam breaks down exactly why the letter counter didn&#39;t work and then gave advice on how to fix it. He didn&#39;t try to fix it. That&#39;s the questioner&#39;s job. Sometimes you need to include code to answer. Sometimes not."}], "tags": [], "owner": {"reputation": 1898, "user_id": 5852567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01XLpEIZ5Vo/AAAAAAAAAAI/AAAAAAAADBw/wp2BC0SOGVE/photo.jpg?sz=128", "display_name": "DIEGO CARRASCAL", "link": "https://stackoverflow.com/users/5852567/diego-carrascal"}, "is_accepted": false, "score": 0, "last_activity_date": 1469707893, "last_edit_date": 1469707893, "creation_date": 1469660911, "answer_id": 38624612, "question_id": 38623917, "link": "https://stackoverflow.com/questions/38623917/the-letter-counter-within-my-c-code-is-not-working-properly/38624612#38624612", "title": "The Letter counter within my C++ code is not working properly", "body": "<p>I updated to fix the problem on comments, is better now as far as I tested...</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nvoid Count_All(char*, int&amp;, int&amp;, double&amp;, int&amp;); // Function prototype.\ndouble Calc_Average (char*, int, int, double); // Function prototype.\n\nint main()\n{\n    const int size = 500;\n    char userString[size];\n    int Word = 0;\n    int Pun = 0;\n    int Letters = 0;\n    double Total_Characters = 0;\n    double Average = 0.0;\n\n    cout &lt;&lt; \"Please enter a string of 500 or less characters: \";\n    cin.getline(userString, size);\n\n    int len = strlen(userString);\n    char *Dyn_Array = new char[len+1];\n    strcpy(Dyn_Array, userString);\n\n    cout &lt;&lt; \"\\n\";\n\n    Count_All (Dyn_Array, Letters, Word, Total_Characters, Pun);\n\n    cout &lt;&lt; \"Number of letters in the string: \" &lt;&lt; Letters &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"Number of words in the string: \" &lt;&lt; Word &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"\\n\";\n\n    Average = Calc_Average (Dyn_Array, Word, Pun, Total_Characters);\n    cout &lt;&lt;\"Average number of letters per word: \"&lt;&lt; fixed &lt;&lt;\n    showpoint &lt;&lt; setprecision(2) &lt;&lt; Average &lt;&lt; \"\\n\" &lt;&lt; endl;\n\n\n    cin.ignore(1);\n    delete [] Dyn_Array;\n    return 0;\n}\n\nvoid Count_All (char*strptr, int &amp;Letters, int &amp;Word, double &amp;Total_Characters, int &amp;Pun) // Counts all characters and types.\n{\n    // sorry this was a test: strptr[strlen(strptr)+1]='\\0';\n    while (strptr[0] != '\\0')\n    {\n        while (isspace(strptr[0]))\n        {\n            strptr++;\n        }\n\n        if(!isspace(strptr[0]) &amp;&amp; !ispunct(strptr[0]))\n        {\n            cout &lt;&lt; strptr[0] &lt;&lt; \" \";\n            Letters++;\n            Total_Characters++; // Counting the total printable characters (including digits and punctuation).\n            strptr++;\n            if(strptr[0] == '\\0' || isspace(strptr[0]) || ispunct(strptr[0]))\n            {\n                Word++;\n            }\n        }\n\n        if ((isalnum(strptr[0])) || (ispunct(strptr[0])))\n        {\n            if((ispunct(strptr[0])))\n            {\n                Pun++; // Counting punctuation.\n                Total_Characters++; // Counting the total printable characters (including digits and punctuation).\n                strptr++;\n            }\n        }\n    }\n}\n\ndouble Calc_Average(char*strptr, int Word, int Pun, double Total_Characters)  // Calculates the average number of characters per words.\n{\n    double Average = 0.0;\n    Total_Characters = Total_Characters - Pun; // Subtracting punctuation from all of the characters in the string (not including spaces).\n    Average = (Total_Characters / Word);\n    return Average;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 1532617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77b877dcb56783eb939f228a5d681ae9?s=128&d=identicon&r=PG", "display_name": "John D Aynedjian", "link": "https://stackoverflow.com/users/1532617/john-d-aynedjian"}, "is_accepted": false, "score": 0, "last_activity_date": 1469733669, "last_edit_date": 1469733669, "creation_date": 1469730849, "answer_id": 38644235, "question_id": 38623917, "link": "https://stackoverflow.com/questions/38623917/the-letter-counter-within-my-c-code-is-not-working-properly/38644235#38644235", "title": "The Letter counter within my C++ code is not working properly", "body": "<p>Loop through the string character-by-character once, using a finite-state machine to keep track of whether we are in a word or not and to count the number of words.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;iomanip&gt;\n\n#include &lt;string&gt;\n\nusing namespace std;\n\nconst int STATE_WITHOUT = 1;\nconst int STATE_IN_WORD = 2;\n\nclass TestInput {\n    public:\n        string m_s_input;\n        int m_i_expected_words;\n        int m_i_expected_punctuation_marks;\n        int m_i_expected_letters;\n        int m_i_expected_total_printable_characters;\n\n    TestInput(\n        string s_input,\n        int i_expected_words,\n        int i_expected_punctuation_marks,\n        int i_expected_letters,\n        int i_expected_total_printable_characters\n    ):  m_s_input(s_input),\n        m_i_expected_words(i_expected_words),\n        m_i_expected_punctuation_marks(i_expected_punctuation_marks),\n        m_i_expected_letters(i_expected_letters),\n        m_i_expected_total_printable_characters(i_expected_total_printable_characters)\n    {}\n}; /* class TestInput */\n\n// Counts all characters and types. \nvoid Count_All (const string&amp; str, int &amp;Letters, int &amp;Words, int &amp;Total_Printable_Characters, int &amp;Punctuation_Marks) {\n\n    // Clear all these \"out params\" so the caller can call this\n    // method multiple times without having to theirself\n    // clear them...\n    Letters = 0;\n    Words = 0;\n    Total_Printable_Characters = 0;\n    Punctuation_Marks = 0;\n\n    int i_state = STATE_WITHOUT;\n\n    char c = '\\0';\n\n    for( size_t i = 0; i &lt; str.length(); i++ ){\n\n        c = str[i];\n\n        if( isalpha(c) )\n        {\n            Letters++;\n        }\n\n        if( isalnum(c) || ispunct(c) )\n        {\n            Total_Printable_Characters++; // Counting the total printable characters (including digits and punctuation).\n        }\n\n        if( ispunct(c) ) \n        {\n            Punctuation_Marks++;\n        }\n\n        /* Use finite-state machine to count words... */\n        switch( i_state ){\n            case STATE_WITHOUT:\n                if( ispunct(c) || isalnum(c) )\n                {\n                    i_state = STATE_IN_WORD;\n                    Words++;\n                }\n                break;\n\n            case STATE_IN_WORD:\n                if( isspace(c) )\n                {\n                    i_state = STATE_WITHOUT;\n                }\n                break;\n        }/* switch( i_state ) */\n\n    }/* for( size_t i = 0; i &lt; str.length(); i++ ) */\n\n}/* Count_All() */\n\n// Calculates the average number of characters per words.\ndouble Calc_Average(int Word, int Pun, int Total_Characters){\n    double Average = 0.0;\n\n    Total_Characters = Total_Characters - Pun; // Subtracting punctuation from all of the characters in the string (not including spaces).\n\n    if( Word == 0 ){\n        // Avoid divide by zero error...\n        return 0.0;\n    }\n\n    Average = ((double)Total_Characters / (double)Word);\n\n    return Average;\n}/* Calc_Average() */\n\nint main()\n{\n    int Words = 0;\n    int Punctuation_Marks = 0;\n    int Letters = 0;\n    int Total_Printable_Characters = 0;\n\n    double Average = 0.0;\n\n    TestInput test_inputs[] = {\n        // s_input, i_expected_words, i_expected_punctuation_marks, i_expected_letters, i_expected_total_printable_characters \n        TestInput(\"\", 0, 0, 0, 0 ) \n        ,TestInput(\" \", 0, 0, 0, 0 ) \n        ,TestInput(\"Why, hello there!\", 3, 2, 13, 15 ) \n        ,TestInput(\"I am sam.\", 3, 1, 6, 7 ) \n        ,TestInput(\"I'll take 1 bagel.\", 4, 2, 12, 15 ) // Counting both contraction \"I'll\" and numerical \"1\" as one word each...as \"wc\" utility seems to do...\n        ,TestInput(\"I'll be back, Bennett!\", 4, 3, 16, 19) \n        ,TestInput(\"Let off some steam, Bennett!\", 5, 2, 22, 24) \n        ,TestInput(\"Supercalifragilisticexpyalidocious\", 1, 0, 34, 34 )\n        ,TestInput(\"'ere, what'cha doin' 'ere, guv'nor?\", 5, 8, 23, 31 )\n        ,TestInput(\" 'ere, what'cha doin' 'ere, guv'nor?\", 5, 8, 23, 31 )\n        ,TestInput(\"That's one small step for a man, one giant leap for mankind.\", 12, 3, 46, 49 )\n    };\n\n    for( size_t i = 0; i &lt; sizeof(test_inputs)/sizeof(TestInput); i++ ){\n        cout &lt;&lt; \"i = \" &lt;&lt; i &lt;&lt; \": Running Count_All( \\\"\" &lt;&lt; test_inputs[i].m_s_input &lt;&lt; \"\\\" )\\n\" \n               &lt;&lt; \"\\t\" &lt;&lt; \"(length of input = \" &lt;&lt; test_inputs[i].m_s_input.length() &lt;&lt; \")...\" &lt;&lt; endl;\n\n        Count_All( test_inputs[i].m_s_input, Letters, Words, Total_Printable_Characters, Punctuation_Marks );\n\n        cout &lt;&lt; \"i = \" &lt;&lt; i &lt;&lt; \": Letters = \" &lt;&lt; Letters &lt;&lt; \" (Expected \" &lt;&lt; test_inputs[i].m_i_expected_letters &lt;&lt; \")...\"\n            &lt;&lt; (( Letters == test_inputs[i].m_i_expected_letters ) ? \"PASSED\" : \"FAILED\" ) &lt;&lt; \"...\" &lt;&lt; endl;\n\n        cout &lt;&lt; \"i = \" &lt;&lt; i &lt;&lt; \": Words = \" &lt;&lt; Words &lt;&lt; \" (Expected \" &lt;&lt; test_inputs[i].m_i_expected_words &lt;&lt; \")...\"\n            &lt;&lt; (( Words == test_inputs[i].m_i_expected_words ) ? \"PASSED\" : \"FAILED\" ) &lt;&lt; \"...\" &lt;&lt; endl;\n\n        cout &lt;&lt; \"i = \" &lt;&lt; i &lt;&lt; \": Total_Printable_Characters = \" &lt;&lt; Total_Printable_Characters &lt;&lt; \" (Expected \" &lt;&lt; test_inputs[i].m_i_expected_total_printable_characters &lt;&lt; \")...\"\n            &lt;&lt; (( Total_Printable_Characters == test_inputs[i].m_i_expected_total_printable_characters) ? \"PASSED\" : \"FAILED\" ) &lt;&lt; \"...\" &lt;&lt; endl;\n\n        cout &lt;&lt; \"i = \" &lt;&lt; i &lt;&lt; \": Punctuation_Marks = \" &lt;&lt; Punctuation_Marks &lt;&lt; \" (Expected \" &lt;&lt; test_inputs[i].m_i_expected_punctuation_marks &lt;&lt; \")...\"\n            &lt;&lt; (( Punctuation_Marks == test_inputs[i].m_i_expected_punctuation_marks ) ? \"PASSED\" : \"FAILED\" ) &lt;&lt; \"...\" &lt;&lt; endl;\n\n        Average = Calc_Average ( Words, Punctuation_Marks, Total_Printable_Characters);\n\n        cout &lt;&lt; \"i = \" &lt;&lt; i &lt;&lt; \": Average number of letters per word: \" &lt;&lt; fixed \n            &lt;&lt; showpoint &lt;&lt; setprecision(2) &lt;&lt; Average &lt;&lt; \"\\n\" &lt;&lt; endl;\n    }\n\n    return 0;\n\n}/* main() */\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>i = 0: Running Count_All( \"\" )\n    (length of input = 0)...\ni = 0: Letters = 0 (Expected 0)...PASSED...\ni = 0: Words = 0 (Expected 0)...PASSED...\ni = 0: Total_Printable_Characters = 0 (Expected 0)...PASSED...\ni = 0: Punctuation_Marks = 0 (Expected 0)...PASSED...\ni = 0: Average number of letters per word: 0.00\n\ni = 1: Running Count_All( \" \" )\n    (length of input = 1)...\ni = 1: Letters = 0 (Expected 0)...PASSED...\ni = 1: Words = 0 (Expected 0)...PASSED...\ni = 1: Total_Printable_Characters = 0 (Expected 0)...PASSED...\ni = 1: Punctuation_Marks = 0 (Expected 0)...PASSED...\ni = 1: Average number of letters per word: 0.00\n\ni = 2: Running Count_All( \"Why, hello there!\" )\n    (length of input = 17)...\ni = 2: Letters = 13 (Expected 13)...PASSED...\ni = 2: Words = 3 (Expected 3)...PASSED...\ni = 2: Total_Printable_Characters = 15 (Expected 15)...PASSED...\ni = 2: Punctuation_Marks = 2 (Expected 2)...PASSED...\ni = 2: Average number of letters per word: 4.33\n\ni = 3: Running Count_All( \"I am sam.\" )\n    (length of input = 9)...\ni = 3: Letters = 6 (Expected 6)...PASSED...\ni = 3: Words = 3 (Expected 3)...PASSED...\ni = 3: Total_Printable_Characters = 7 (Expected 7)...PASSED...\ni = 3: Punctuation_Marks = 1 (Expected 1)...PASSED...\ni = 3: Average number of letters per word: 2.00\n\ni = 4: Running Count_All( \"I'll take 1 bagel.\" )\n    (length of input = 18)...\ni = 4: Letters = 12 (Expected 12)...PASSED...\ni = 4: Words = 4 (Expected 4)...PASSED...\ni = 4: Total_Printable_Characters = 15 (Expected 15)...PASSED...\ni = 4: Punctuation_Marks = 2 (Expected 2)...PASSED...\ni = 4: Average number of letters per word: 3.25\n\ni = 5: Running Count_All( \"I'll be back, Bennett!\" )\n    (length of input = 22)...\ni = 5: Letters = 16 (Expected 16)...PASSED...\ni = 5: Words = 4 (Expected 4)...PASSED...\ni = 5: Total_Printable_Characters = 19 (Expected 19)...PASSED...\ni = 5: Punctuation_Marks = 3 (Expected 3)...PASSED...\ni = 5: Average number of letters per word: 4.00\n\ni = 6: Running Count_All( \"Let off some steam, Bennett!\" )\n    (length of input = 28)...\ni = 6: Letters = 22 (Expected 22)...PASSED...\ni = 6: Words = 5 (Expected 5)...PASSED...\ni = 6: Total_Printable_Characters = 24 (Expected 24)...PASSED...\ni = 6: Punctuation_Marks = 2 (Expected 2)...PASSED...\ni = 6: Average number of letters per word: 4.40\n\ni = 7: Running Count_All( \"Supercalifragilisticexpyalidocious\" )\n    (length of input = 34)...\ni = 7: Letters = 34 (Expected 34)...PASSED...\ni = 7: Words = 1 (Expected 1)...PASSED...\ni = 7: Total_Printable_Characters = 34 (Expected 34)...PASSED...\ni = 7: Punctuation_Marks = 0 (Expected 0)...PASSED...\ni = 7: Average number of letters per word: 34.00\n\ni = 8: Running Count_All( \"'ere, what'cha doin' 'ere, guv'nor?\" )\n    (length of input = 35)...\ni = 8: Letters = 23 (Expected 23)...PASSED...\ni = 8: Words = 5 (Expected 5)...PASSED...\ni = 8: Total_Printable_Characters = 31 (Expected 31)...PASSED...\ni = 8: Punctuation_Marks = 8 (Expected 8)...PASSED...\ni = 8: Average number of letters per word: 4.60\n\ni = 9: Running Count_All( \" 'ere, what'cha doin' 'ere, guv'nor?\" )\n    (length of input = 36)...\ni = 9: Letters = 23 (Expected 23)...PASSED...\ni = 9: Words = 5 (Expected 5)...PASSED...\ni = 9: Total_Printable_Characters = 31 (Expected 31)...PASSED...\ni = 9: Punctuation_Marks = 8 (Expected 8)...PASSED...\ni = 9: Average number of letters per word: 4.60\n\ni = 10: Running Count_All( \"That's one small step for a man, one giant leap for mankind.\" )\n    (length of input = 60)...\ni = 10: Letters = 46 (Expected 46)...PASSED...\ni = 10: Words = 12 (Expected 12)...PASSED...\ni = 10: Total_Printable_Characters = 49 (Expected 49)...PASSED...\ni = 10: Punctuation_Marks = 3 (Expected 3)...PASSED...\ni = 10: Average number of letters per word: 3.83\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1469744205, "creation_date": 1469656833, "question_id": 38623917, "link": "https://stackoverflow.com/questions/38623917/the-letter-counter-within-my-c-code-is-not-working-properly", "title": "The Letter counter within my C++ code is not working properly", "body": "<p>so my program runs like it is supposed to except for one thing, the letters counted by my function are not correct. For example, if you enter \"Why hello there!\" as the string, the number of letters displayed is three as opposed to 13. I am not sure what I am doing wrong, any help would be appreciated. Thanks!</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nvoid Count_All(char*, int&amp;, int&amp;, double&amp;, int&amp;); // Function prototype.\ndouble Calc_Average (char*, int, int, double); // Function prototype.\n\nint main()\n{\n    const int size = 500;\n    char userString[size];\n    int Word = 0;\n    int Pun = 0;\n    int Letters = 0;\n    double Total_Characters = 0;\n    double Average = 0.0;\n\n    cout &lt;&lt; \"Please enter a string of 500 or less characters: \";\n    cin.getline(userString, size);\n\n    int len = strlen(userString);\n    char *Dyn_Array = new char[len+1];\n    strcpy(Dyn_Array, userString);\n\n    cout &lt;&lt; \"\\n\";\n\n    Count_All (Dyn_Array, Letters, Word, Total_Characters, Pun);\n\n    cout &lt;&lt; \"Number of letters in the string: \" &lt;&lt; Letters &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"Number of words in the string: \" &lt;&lt; Word &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"\\n\";\n\n    Average = Calc_Average (Dyn_Array, Word, Pun, Total_Characters);\n    cout &lt;&lt;\"Average number of letters per word: \"&lt;&lt; fixed &lt;&lt;\n    showpoint &lt;&lt; setprecision(2) &lt;&lt; Average &lt;&lt; \"\\n\" &lt;&lt; endl;\n\n\n    cin.ignore(1);\n    delete [] Dyn_Array;\n    return 0;\n}\n\nvoid Count_All (char*strptr, int &amp;Letters, int &amp;Word, double &amp;Total_Characters, int &amp;Pun) // Counts all characters and types.\n{\n    while (*strptr != '\\0')\n    {\n        if ((isspace(*strptr)) || (ispunct(*strptr)))\n        {\n            while ((isspace(*strptr)) || (ispunct(*strptr)))\n            {\n                strptr++;\n            }\n        }\n\n        for(int x = 0; x &lt; strlen(*strptr); x++)\n        {\n            if(!isspace(strptr[x]) &amp;&amp; !Ispunct(strptr[x]))\n            {\n                Letters++;\n            }\n        }\n\n        //if (((*strptr &gt;= 'a') &amp;&amp; (*strptr &lt;= 'z')) || ((*strptr &gt;= 'A') &amp;&amp; (*strptr &lt;= 'Z')))\n            //Letters++;\n\n        if ((isalnum(*strptr)) || (ispunct(*strptr)))\n        {\n            Word++;\n            while ((isalnum(*strptr))||(ispunct(*strptr)))\n            {\n                strptr++;\n                Total_Characters++; // Counting the total printable characters (including digits and punctuation).\n\n                if((ispunct(*strptr)))\n                {\n                    Pun++; // Counting punctuation.\n                }\n\n            }\n        }\n        strptr++;\n    }\n}\n\ndouble Calc_Average(char*strptr, int Word, int Pun, double Total_Characters)  // Calculates the average number of characters per words.\n{\n    double Average = 0.0;\n    Total_Characters = Total_Characters - Pun; // Subtracting punctuation from all of the characters in the string (not including spaces).\n    Average = (Total_Characters / Word);\n    return Average;\n}\n</code></pre>\n"}, {"tags": ["c++", "g++"], "comments": [{"owner": {"reputation": 2991, "user_id": 3276485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/zPWn4.jpg?s=128&g=1", "display_name": "Xarn", "link": "https://stackoverflow.com/users/3276485/xarn"}, "edited": false, "score": 4, "creation_date": 1469656570, "post_id": 38623855, "comment_id": 64633357, "body": "Try compiling the <code>player.cpp</code> file as well... The compiler cannot automagically just find the function body in non-compiled file."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 5, "creation_date": 1469656603, "post_id": 38623855, "comment_id": 64633375, "body": "Looks like you aren&#39;t compiling Player.cpp. Give <code>g++ main.cpp Player.cpp -o main</code> a try."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 4, "creation_date": 1469656644, "post_id": 38623855, "comment_id": 64633389, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}, {"owner": {"reputation": 1207, "user_id": 2543167, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6ad85e961b48909a8c0d8fc4b30895d5?s=128&d=identicon&r=PG", "display_name": "Quinn McHugh", "link": "https://stackoverflow.com/users/2543167/quinn-mchugh"}, "edited": false, "score": 0, "creation_date": 1469656722, "post_id": 38623855, "comment_id": 64633430, "body": "Ahh yeah you all are correct. I just needed to have the Player.cpp included in there as well. Thanks very much."}], "answers": [{"tags": [], "owner": {"reputation": 189, "user_id": 6441658, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VbhpAxmPqnQ/AAAAAAAAAAI/AAAAAAAAARs/j4uc2A3V_Ek/photo.jpg?sz=128", "display_name": "Siavoshkc", "link": "https://stackoverflow.com/users/6441658/siavoshkc"}, "is_accepted": true, "score": 7, "last_activity_date": 1502909699, "last_edit_date": 1502909699, "creation_date": 1469657308, "answer_id": 38624007, "question_id": 38623855, "link": "https://stackoverflow.com/questions/38623855/compiling-basic-c-class/38624007#38624007", "title": "Compiling Basic C++ Class", "body": "<p>As mentioned in the comments, you are not feeding Player.cpp into compiler. You should give all the cpp files to the compiler.</p>\n\n<pre><code>g++ main.cpp Player.cpp -o main\n</code></pre>\n"}], "owner": {"reputation": 1207, "user_id": 2543167, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6ad85e961b48909a8c0d8fc4b30895d5?s=128&d=identicon&r=PG", "display_name": "Quinn McHugh", "link": "https://stackoverflow.com/users/2543167/quinn-mchugh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 38624007, "answer_count": 1, "score": 5, "last_activity_date": 1502909699, "creation_date": 1469656509, "question_id": 38623855, "link": "https://stackoverflow.com/questions/38623855/compiling-basic-c-class", "title": "Compiling Basic C++ Class", "body": "<p>I'm trying to compile a very basic C++ program and there is something wrong. Whatever it is, I'm sure it's very obvious. I have three very short files.</p>\n\n<p><strong>main.cpp:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Player.h\"\n\nusing namespace std;\n\nint main()\n{\n    Player rob;\n    cout &lt;&lt; \"Iran\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p><strong>Player.h</strong></p>\n\n<pre><code>#ifndef PLAYER_H\n#define PLAYER_H\n\nclass Player {\npublic:\n    Player();\nprivate:\n    int score;\n};\n\n#endif\n</code></pre>\n\n<p><strong>Player.cpp</strong></p>\n\n<pre><code>#include \"Player.h\"\n\nPlayer::Player(){\n    score = 0;\n}\n</code></pre>\n\n<p>The command I'm using to compile is <code>g++ main.cpp -o main</code>\nAnd the error I'm being issued by the compiler is:</p>\n\n<pre><code>/tmp/ccexA7vk.o: In function `main':\nmain.cpp:(.text+0x10): undefined reference to `Player::Player()'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Note: All these files are in the same directory.</p>\n"}, {"tags": ["c++", "qt", "protocol-buffers"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 3817082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c59202bd15bc420775da2f5f62a24de?s=128&d=identicon&r=PG&f=1", "display_name": "NeutralA", "link": "https://stackoverflow.com/users/3817082/neutrala"}, "edited": false, "score": 0, "creation_date": 1469694073, "post_id": 38623696, "comment_id": 64645527, "body": "Thanks for the help!"}], "tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": false, "score": 0, "last_activity_date": 1469655791, "creation_date": 1469655791, "answer_id": 38623696, "question_id": 38623525, "link": "https://stackoverflow.com/questions/38623525/serializetoarray-protobuf-not-storing/38623696#38623696", "title": "SerializeToArray protobuf not storing", "body": "<p><code>new QByteArray[sizeArray]</code> allocates an array of <code>sizeArray</code> empty <code>QByteArray</code>s, not a <code>sizeArray</code>-byte long <code>QByteArray</code>.  If you want to use <code>QByteArray</code>, this should look something like</p>\n\n<pre><code>int sizeArray = event0.ByteSize();\nQByteArray qbArray(sizeArray, 0);\n\ncout &lt;&lt; \"byteSizeOfEvent0:      \" &lt;&lt; sizeArray              &lt;&lt; endl;    \ncout &lt;&lt; \"preSTA size:           \" &lt;&lt; qbArray.size()         &lt;&lt; endl;\ncout &lt;&lt; \"is event0 initialized? \" &lt;&lt; event0.IsInitialized() &lt;&lt; endl;\n\nevent0.SerializeToArray(qbArray.data(), sizeArray);\n\ncout &lt;&lt; \"postSTA size: \" &lt;&lt; qbArray.size() &lt;&lt; endl;\n</code></pre>\n\n<p>Note, however, that those two <code>size()</code> calls are both going to return the same thing, since <code>qbArray</code> is initialized to be <code>sizeArray</code> bytes long.</p>\n"}], "owner": {"reputation": 33, "user_id": 3817082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c59202bd15bc420775da2f5f62a24de?s=128&d=identicon&r=PG&f=1", "display_name": "NeutralA", "link": "https://stackoverflow.com/users/3817082/neutrala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 770, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469741875, "creation_date": 1469655109, "last_edit_date": 1469741875, "question_id": 38623525, "link": "https://stackoverflow.com/questions/38623525/serializetoarray-protobuf-not-storing", "title": "SerializeToArray protobuf not storing", "body": "<p>I am very new to protobufs and attempting some simple serialising and deserialising.</p>\n\n<pre><code>int sizeArray        = event0.ByteSize();\nQByteArray * qbArray = new QByteArray[sizeArray];\n\ncout &lt;&lt; \"byteSizeOfEvent0:      \" &lt;&lt; sizeArray              &lt;&lt; endl;    \ncout &lt;&lt; \"preSTA size:           \" &lt;&lt; qbArray-&gt;size()        &lt;&lt; endl;\ncout &lt;&lt; \"is event0 initialized? \" &lt;&lt; event0.IsInitialized() &lt;&lt; endl;\n\nevent0.SerializeToArray(qbArray, sizeArray);\n\ncout &lt;&lt; \"postSTA size: \" &lt;&lt; qbArray-&gt;size() &lt;&lt; endl;\n</code></pre>\n\n<p>produces the results</p>\n\n<pre><code>byteSizeOfEvent0:      48\npreSTA size:           0\nis event0 initialized? 1\nThe program has unexpectedly finished.\n</code></pre>\n\n<p>The process of calling on qbArray after SerializeToArray is causing a crash, I assume due to failed writing of data. The event is initialised and appears correct when using SerializeAsString and deBugging. </p>\n\n<p>I have looked at other posts who serializeToArray in the same way. Am I doing something clearly wrong?</p>\n\n<p>Any help appreciated.\nThanks!</p>\n"}, {"tags": ["c++", "montecarlo"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1469655419, "post_id": 38623510, "comment_id": 64632826, "body": "This isn&#39;t enough information to help you. There are plenty of possible problems that would result in this symptom, and plenty of ways you might have misinterpreted your results. Show us your code, tell us what language you&#39;re using, tell us the specific behavior you observed (observations, not interpretations), and tell us what you expected to happen differently."}, {"owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1469655640, "post_id": 38623510, "comment_id": 64632923, "body": "Sorry, I have just edited the question, hope its enough"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1469655988, "post_id": 38623510, "comment_id": 64633106, "body": "What are <code>RANDOM_MAX</code> and <code>RANDOM_MIN</code>? Can you show us an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> of your code - enough that we can run it and see the problem, but still stripped of as much code unrelated to the problem as possible?"}, {"owner": {"reputation": 1041, "user_id": 1814881, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa6a740d1754d068162a1e04f20a9e80?s=128&d=identicon&r=PG", "display_name": "TLW", "link": "https://stackoverflow.com/users/1814881/tlw"}, "edited": false, "score": 2, "creation_date": 1469656096, "post_id": 38623510, "comment_id": 64633148, "body": "First off, you have both RANDOM_MAX and RAND_MAX. Second off, rand() is <i>horrible</i> for monte carlo sims. Third off, are you absolutely sure that randomPoint actually returns a point in the correct range?"}, {"owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "edited": false, "score": 0, "creation_date": 1469656246, "post_id": 38623510, "comment_id": 64633213, "body": "I get correct results from randomPoint() function, it returns random double numbers from -1 to 1. What else should I use instead of rand() ?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 1041, "user_id": 1814881, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa6a740d1754d068162a1e04f20a9e80?s=128&d=identicon&r=PG", "display_name": "TLW", "link": "https://stackoverflow.com/users/1814881/tlw"}, "edited": false, "score": 0, "creation_date": 1469656307, "post_id": 38623510, "comment_id": 64633234, "body": "@TLW: <code>RAND_MAX</code> is predefined in <code>&lt;stdlib.h&gt;</code>. I see no <code>#include &lt;stdlib.h&gt;</code>, which means the code in the question is incomplete. And yes, having both <code>RAND_MAX</code> and <code>RANDOM_MAX</code> is confusing."}, {"owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "edited": false, "score": 0, "creation_date": 1469656401, "post_id": 38623510, "comment_id": 64633282, "body": "The main_header.h has #include &lt;stdlib.h&gt; and dynamic.h includes main_header.h"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1469656454, "post_id": 38623510, "comment_id": 64633306, "body": "<code>pow(x,(double)2)</code>. No need to use a cast; <code>pow(x, 2.0)</code> is clearer. And <code>x*x</code> is likely to be more efficient, and possibly more accurate, than calling <code>pow()</code>. I see no calls to <code>withinCircle</code>, so we have no idea what values you&#39;re passing. Have you tried printing (or examining in a debugger) the values of <code>x</code> and <code>y</code>?"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 3, "creation_date": 1469656465, "post_id": 38623510, "comment_id": 64633310, "body": "<code>double pi = (pointsWithin &#47; pointsOutside) * 4;</code> will result in <code>0</code>, because both variables are <code>int</code>, so it is an integer division."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1469656496, "post_id": 38623510, "comment_id": 64633322, "body": "And you haven&#39;t shown us <code>main_header.h</code>, so as I said the code in the question is incomplete. Read this: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1469656689, "post_id": 38623510, "comment_id": 64633412, "body": "@KeithThompson I have just added the whole code. I have run the program with wmpiexec and the values of x and y seem to be ok when the slave processes are printing them. And obviously I need to change the pi calculation (its supposed to be PointsWithin / TotalPoints)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469657974, "post_id": 38623510, "comment_id": 64633865, "body": "Minor: Rather than <code>double result = (pow(x,(double)2) + pow(y, (double)2));</code>, could use <code>double result = hypot(x,y);</code>  as code is testing against <code>result  &lt;= 1.0</code>."}, {"owner": {"reputation": 1041, "user_id": 1814881, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa6a740d1754d068162a1e04f20a9e80?s=128&d=identicon&r=PG", "display_name": "TLW", "link": "https://stackoverflow.com/users/1814881/tlw"}, "edited": false, "score": 0, "creation_date": 1469658044, "post_id": 38623510, "comment_id": 64633890, "body": "@DjangoFreeman - The issue is in the MPI code, then. Because a <a href=\"https://gist.github.com/anonymous/9d183a855a153acd382102356ab7fcbb\" rel=\"nofollow noreferrer\">stripped-down version</a> works fine: <code>pi = 3.141631 in = 785407862, out = 214592138</code>"}, {"owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "edited": false, "score": 0, "creation_date": 1469658634, "post_id": 38623510, "comment_id": 64634067, "body": "Yes, I have just tested that too and it was calculated right."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1469659415, "post_id": 38623510, "comment_id": 64634353, "body": "Don&#39;t put solved and an answer in your question! Add an answer to your question."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "edited": false, "score": 0, "creation_date": 1469656984, "post_id": 38623915, "comment_id": 64633523, "body": "Changed it to: double pi = ((double)pointsWithin / (double)TOTAL_NUM_OF_POINTS) * 4.0; But this isn&#39;t the issue, i think. I get wrong numbers when I calculate x^2 + y^2"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469657610, "post_id": 38623915, "comment_id": 64633747, "body": "Suggest <code>double pi = 4.0 * pointsWithin &#47; pointsOutside;</code>  (Avoid cast)"}], "tags": [], "owner": {"reputation": 1041, "user_id": 1814881, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa6a740d1754d068162a1e04f20a9e80?s=128&d=identicon&r=PG", "display_name": "TLW", "link": "https://stackoverflow.com/users/1814881/tlw"}, "is_accepted": false, "score": 0, "last_activity_date": 1469656829, "creation_date": 1469656829, "answer_id": 38623915, "question_id": 38623510, "link": "https://stackoverflow.com/questions/38623510/calculating-powdouble-2-gives-a-huge-number-c/38623915#38623915", "title": "Calculating pow(double,2) gives a huge number (C)", "body": "<pre><code>double calculatePi(int pointsWithin, int pointsOutside) {\n    double pi = (pointsWithin / pointsOutside) * 4;\n    return pi;\n}\n</code></pre>\n\n<p>This is wrong. What's happening is that you're doing an integer division and then multiplying by 4, and <em>then</em> casting it to a double. So you're getting floor behavior.</p>\n\n<p>You need to cast either <code>pointsWithin</code> or <code>pointsOutside</code> to a double before you do the division.</p>\n\n<p>(It's also the wrong formula, but that is another matter.)</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "is_accepted": false, "score": 0, "last_activity_date": 1469659683, "creation_date": 1469659683, "answer_id": 38624431, "question_id": 38623510, "link": "https://stackoverflow.com/questions/38623510/calculating-powdouble-2-gives-a-huge-number-c/38624431#38624431", "title": "Calculating pow(double,2) gives a huge number (C)", "body": "<p>I have misused MPI_Send and MPI_Recv, and now its calculating the power right.</p>\n"}], "owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1469659683, "creation_date": 1469655030, "last_edit_date": 1469659369, "question_id": 38623510, "link": "https://stackoverflow.com/questions/38623510/calculating-powdouble-2-gives-a-huge-number-c", "title": "Calculating pow(double,2) gives a huge number (C)", "body": "<p>I'm trying to code a simulation of Pi calculating using multiple processes.\nI have a function that generates random double x, y numbers from 1 to -1,\nand when im trying to calculate whether x^2 + y^2 &lt;= 1,\nbut the result is a huge number, and its always bigger than 1.</p>\n\n<p>icpi.cpp (main file):</p>\n\n<pre><code>#include &lt;mpi.h&gt;\n#include &lt;iostream&gt;\n#include \"main_header.h\"\n#include \"dynamic.h\"\nusing namespace std;\n\nint main(int argc,char *argv[])\n{\n\nint numprocs, myid, i, root = 0, pointsInCircle = 0, pointsOutOfCircle = 0;\nboolean pointInside = TRUE;\ndouble point[DIMENSION], scatterTable[NUMBER_OF_SLAVES][DIMENSION], pi, t1, t2;\nMPI_Init(&amp;argc,&amp;argv);\nMPI_Comm_rank(MPI_COMM_WORLD,&amp;myid);\nMPI_Comm_size(MPI_COMM_WORLD,&amp;numprocs);    \nMPI_Status status;\nsrand(time(NULL));\nt1 = MPI_Wtime();\nprintf(\"Trying to scatter..\\n\");\nfflush(stdout);\nMPI_Scatter(&amp;scatterTable[0][0], DIMENSION, MPI_DOUBLE,     // Master process sends the first tasks to the slaves.\n    &amp;point[0], DIMENSION, MPI_DOUBLE, root, MPI_COMM_WORLD);\nprintf(\"Scatter successful\\n\");\nfflush(stdout);\nif (myid == 0) {\n    for (i = 0; i &lt; TOTAL_NUM_OF_POINTS; i++) {\n        MPI_Recv(&amp;pointInside, 1, MPI_INT, MPI_ANY_SOURCE, 0, MPI_COMM_WORLD, &amp;status);\n        if (pointInside) {\n            pointsInCircle++;\n            printf(\"point inside\\n\");\n            fflush(stdout);\n        }\n        else {\n            pointsOutOfCircle++;\n            printf(\"point outside\\n\");\n            fflush(stdout);\n        }\n        point[0] = randomPoint();       //  X component\n        point[1] = randomPoint();       //  Y component\n        printf(\"x = %f, y = %f\\n\", point[0], point[1]);\n        fflush(stdout);\n        MPI_Send(&amp;point[DIMENSION], 2, MPI_DOUBLE, status.MPI_SOURCE, 0, MPI_COMM_WORLD);\n    }\n    point[0] = point[1] = END_OF_PI_CALC;\n    for (i = 0; i &lt; NUMBER_OF_SLAVES; i++)\n        MPI_Send(&amp;point[DIMENSION], 2, MPI_DOUBLE, status.MPI_SOURCE, 0, MPI_COMM_WORLD);\n    t2 = MPI_Wtime();\n    pi = calculatePi(pointsInCircle, pointsOutOfCircle);\n    printf(\"Pi = %f.\\n Time to calculate: %f\", pi, (t2-t1));\n}\nelse {\n    while (point[0] != END_OF_PI_CALC || point[1] != END_OF_PI_CALC) {\n        pointInside = withinCircle(point[0], point[1]);\n        MPI_Send(&amp;pointInside, 1, MPI_INT, 0, 0, MPI_COMM_WORLD);\n        MPI_Recv(&amp;point[DIMENSION], 2, MPI_DOUBLE, 0, 0, MPI_COMM_WORLD,     &amp;status);\n    }\n}\n\nif (myid == 0)\n    MPI_Finalize();\nreturn 0;\n}\n</code></pre>\n\n<p>dynamic.cpp:</p>\n\n<pre><code>#include \"dynamic.h\"\n#include &lt;stdio.h&gt;;\n#include &lt;math.h&gt;\nboolean withinCircle(double x, double y) {\n    double result = (pow(x,(double)2) + pow(y, (double)2));\n    printf(\"result = %f\", result);\n    fflush(stdout);\n    if (result &lt;= 1)\n        return TRUE;\n    return FALSE;\n}\n\ndouble randomPoint() {\n    double range = (RANDOM_MAX - RANDOM_MIN);\n    double div = RAND_MAX / range;\n    return RANDOM_MIN + (rand() / div);\n}\n\ndouble calculatePi(int pointsWithin, int pointsOutside) {\n    double pi = (pointsWithin / pointsOutside) * 4;\n    return pi;\n}\n</code></pre>\n\n<p>dynamic.h:</p>\n\n<pre><code>#ifndef DYNAMIC_H\n#define DYNAMIC_H\n\n#include \"main_header.h\"\n#define TOTAL_NUM_OF_POINTS 20000\n#define NUM_OF_POINTS_TO_SEND 1 \n#define RANDOM_MAX 1\n#define RANDOM_MIN -1\n#define NUMBER_OF_SLAVES 3\n#define DIMENSION 2\n#define END_OF_PI_CALC 2\n\nboolean withinCircle(double x, double y);\n\ndouble randomPoint();\n\ndouble calculatePi(int pointsWithin, int pointsOutside);\n\n#endif DYNAMIC_H\n</code></pre>\n\n<p>main_header.h:</p>\n\n<pre><code>#ifndef MAIN_H\n#define MAIN_H\n\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define TRUE 1\n#define FALSE 0\n\n\ntypedef int boolean;        //  Defines a boolean datatype.\n\n#endif MAIN_H\n</code></pre>\n\n<p>example result from the wmpiexec:</p>\n\n<pre><code>x = -0.944151, y = 0.389386\nresult = 17134570711043240115048918967982918960341742262641887592820622432866394633762913354831186160392586118427086670840176838705152.000000\npoint outside\n</code></pre>\n\n<p>(I know the result of the actual calculation might not be right, its just an example)</p>\n"}, {"tags": ["c#", "c++", ".net", "networking"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1469655091, "post_id": 38623498, "comment_id": 64632677, "body": "<a href=\"https://www.wireshark.org/\" rel=\"nofollow noreferrer\">Why reinvent the wheel?</a>"}, {"owner": {"reputation": 155, "user_id": 6326598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a225e4a932d108e5760b36b15dfe785?s=128&d=identicon&r=PG&f=1", "display_name": "Eins", "link": "https://stackoverflow.com/users/6326598/eins"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469655320, "post_id": 38623498, "comment_id": 64632779, "body": "I need this functionality for my app, it&#39;s not main part of application."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1469656088, "post_id": 38623498, "comment_id": 64633139, "body": "Good info to add to your question. Recommend an edit to include it. Never tried to do this myself, but you should be able to use <a href=\"https://msdn.microsoft.com/en-us/library/bb968803.aspx\" rel=\"nofollow noreferrer\">Event Tracing for Windows</a> or hang off of <a href=\"https://www.winpcap.org/\" rel=\"nofollow noreferrer\">winpcap&#39;s API</a>."}], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 6326598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a225e4a932d108e5760b36b15dfe785?s=128&d=identicon&r=PG&f=1", "display_name": "Eins", "link": "https://stackoverflow.com/users/6326598/eins"}, "is_accepted": true, "score": 0, "last_activity_date": 1469657168, "creation_date": 1469657168, "answer_id": 38623981, "question_id": 38623498, "link": "https://stackoverflow.com/questions/38623498/see-every-post-and-get-requests-outgoing-from-my-computer-using-c-or-c/38623981#38623981", "title": "See every post and get requests outgoing from my computer using C# or C++", "body": "<p>I've found solution for this task. If somebody is interested, for C++ it's <a href=\"https://www.winpcap.org/\" rel=\"nofollow\">WinPcap</a> library and for .Net it's a wrapper for WinPcap <a href=\"https://github.com/PcapDotNet/Pcap.Net\" rel=\"nofollow\">Pcap.Net</a> library. Thank you @user4581301.</p>\n"}], "owner": {"reputation": 155, "user_id": 6326598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a225e4a932d108e5760b36b15dfe785?s=128&d=identicon&r=PG&f=1", "display_name": "Eins", "link": "https://stackoverflow.com/users/6326598/eins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 38623981, "answer_count": 1, "score": -1, "last_activity_date": 1469657168, "creation_date": 1469655003, "last_edit_date": 1469656343, "question_id": 38623498, "link": "https://stackoverflow.com/questions/38623498/see-every-post-and-get-requests-outgoing-from-my-computer-using-c-or-c", "title": "See every post and get requests outgoing from my computer using C# or C++", "body": "<p>As part of my application I need to see and control every post and get requests outgoing from my computer (like in fiddler). Can I do it using C#, what classes should I use? If C# doesn't have these features maybe someone know libraries for C++ (C# is preferable) with which I can do it.</p>\n"}, {"tags": ["c++", "linux", "openmp"], "comments": [{"owner": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 1, "creation_date": 1469658580, "post_id": 38623344, "comment_id": 64634051, "body": "Most linux and MacOS implementations of OpenMP base threading on pthreads.  On Windows, commercial implementations often are based on Windows threads without pthreads, as a pthreads layer (as in libgomp) may show some performance issues, as well as missing some of the current OpenMP features."}, {"owner": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 1, "creation_date": 1469658718, "post_id": 38623344, "comment_id": 64634101, "body": "For full documentation of implementations, examination of the gnu libgomp or the openmprtl.org is often suggested."}, {"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "reply_to_user": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 2, "creation_date": 1469715764, "post_id": 38623344, "comment_id": 64661380, "body": "@Tim, it may be slightly mean to describe those sites as &quot;full documentation&quot;, though perhaps the code counts as the best documentation! Another alternative is <a href=\"http://openmp.llvm.org\" rel=\"nofollow noreferrer\">openmp.llvm.org</a> (which is effectively the same code as at openmprtl.org, but may be slightly ahead of it...). And I know for sure that there&#39;s a manual there, though how useful it is may be more questionable!"}, {"owner": {"reputation": 587, "user_id": 3123894, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f6c319e2f1348d1683aa7486b7567639?s=128&d=identicon&r=PG", "display_name": "648trindade", "link": "https://stackoverflow.com/users/3123894/648trindade"}, "edited": false, "score": 0, "creation_date": 1503060808, "post_id": 38623344, "comment_id": 78471566, "body": "In some unix OS distributions, you can download the sources using the OS default package manager. For example, in debian-like distros, you can download the source of libgomp package with <code>apt source libgomp1</code> (that actually will download the gcc source). Then extract the source tarball and look for <code>libgomp</code> folder"}], "owner": {"user_type": "does_not_exist", "display_name": "user4139711"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484065874, "creation_date": 1469654258, "question_id": 38623344, "link": "https://stackoverflow.com/questions/38623344/openmp-implementation", "title": "OpenMP implementation", "body": "<p>I recently began testing some thread libraries on some computationally heavy code. I ran across OpenMP and I am very happy with it's simplicity and speed.</p>\n\n<p>I cannot seem to find any documentation on how it's implemented however. I'm guessing it uses pthreads underneath the hood. Does anyone have any information on this subject? </p>\n\n<p>I'm asking because my openmp implementation out performs pure pthreads. I think there must be some false sharing issues but for now I was just wondering what openmp uses underneath the hood since it seems very high level.</p>\n"}, {"tags": ["c++", "eclipse", "eclipse-cdt"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469656425, "post_id": 38623211, "comment_id": 64633290, "body": "Sounds right to me. After adding the new include paths force Eclipse to index the newly added paths. Make sure the <code>#include</code>s are in place,  save your files, and give Project-C/C++ Index-&gt;Rebuild a shot."}, {"owner": {"reputation": 1050, "user_id": 2712214, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/24347ac2c99f2cbbb5a66721cc172d64?s=128&d=identicon&r=PG&f=1", "display_name": "NabilG", "link": "https://stackoverflow.com/users/2712214/nabilg"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469693822, "post_id": 38623211, "comment_id": 64645379, "body": "I can see in the header files of this external source, that several macros are used. Shall I add these macros as well in the configuration ?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469723763, "post_id": 38623211, "comment_id": 64667284, "body": "Eclipse&#39;s indexer should be able to pick off any defines and chose the correct conditional paths. Drop a suspected define at the top of a file that needs the stuff you think is being left out and see that happens."}, {"owner": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "edited": false, "score": 0, "creation_date": 1484094544, "post_id": 38623211, "comment_id": 70366543, "body": "You may want to consider using a newer version of Eclipse than Indigo; as of 2016, there have been 5 newer releases of Eclipse since Indigo. If you still can&#39;t get this to work with a recent version of Eclipse, please <a href=\"https://bugs.eclipse.org/bugs/enter_bug.cgi?product=CDT\" rel=\"nofollow noreferrer\">file a bug</a> with a code example."}], "answers": [{"comments": [{"owner": {"reputation": 1050, "user_id": 2712214, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/24347ac2c99f2cbbb5a66721cc172d64?s=128&d=identicon&r=PG&f=1", "display_name": "NabilG", "link": "https://stackoverflow.com/users/2712214/nabilg"}, "edited": false, "score": 0, "creation_date": 1469694593, "post_id": 38624306, "comment_id": 64645852, "body": "I gave it a try and unfortunately this does not really help in y case. thanks anyway"}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 1, "last_activity_date": 1469658864, "creation_date": 1469658864, "answer_id": 38624306, "question_id": 38623211, "link": "https://stackoverflow.com/questions/38623211/eclipse-indigo-cdt-code-completion/38624306#38624306", "title": "Eclipse Indigo CDT code completion", "body": "<p>This works for me: <code>Project -&gt; Properties -&gt; C/C++ General -&gt; Preprocessor Include Paths, Macros etc. -&gt; C++ -&gt; CDT User Setting Entries -&gt; Add</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/SookO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SookO.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1050, "user_id": 2712214, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/24347ac2c99f2cbbb5a66721cc172d64?s=128&d=identicon&r=PG&f=1", "display_name": "NabilG", "link": "https://stackoverflow.com/users/2712214/nabilg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1469658864, "creation_date": 1469653682, "question_id": 38623211, "link": "https://stackoverflow.com/questions/38623211/eclipse-indigo-cdt-code-completion", "title": "Eclipse Indigo CDT code completion", "body": "<p>I am using Eclipse CDT as IDE to develop my application which uses an external library for which I have access to the header files and libraries.\nHow can I setup my project properties such that I can get code completion (I have code completion for files which belong to my project, but not to the ones which are part of this external library).\nI tried the following approach which unfortunately fails.\nProject->Properties->C/C++ general->Path and symbols -> Includes \nIn Includes, I added the path to the header files.\nUnfortunately, this does not seem to work.</p>\n\n<p>So how can I setup my project such that, if I instanciate an object (from this external library) in my project, I can get code completion and see all available public methods?</p>\n\n<p>thanks for your valuable help.</p>\n"}, {"tags": ["c++", "c++11", "return", "undefined-behavior", "noreturn"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 3, "creation_date": 1469653568, "post_id": 38623143, "comment_id": 64631902, "body": "You might run into pedantic trouble with the allowance of the implementation to assume that an infinite loop ends. (<a href=\"http://blog.regehr.org/archives/161\" rel=\"nofollow noreferrer\">link</a>)"}, {"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1469653730, "post_id": 38623143, "comment_id": 64631988, "body": "@chris I&#39;m hoping to tag the return value with [[maybe_unused]] as well."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 4, "creation_date": 1469653789, "post_id": 38623143, "comment_id": 64632019, "body": "From the link you posted : <i>The behavior is undefined if the function with this attribute actually returns.</i>"}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 24, "last_activity_date": 1469654119, "creation_date": 1469654119, "answer_id": 38623312, "question_id": 38623143, "link": "https://stackoverflow.com/questions/38623143/can-i-use-noreturn-on-non-void-returning-functions/38623312#38623312", "title": "Can I use [[noreturn]] on non-void returning functions?", "body": "<p>The standard specification on <code>[[noreturn]]</code> is in [dcl.attr.noreturn]. The entire normative texts reads:</p>\n\n<blockquote>\n  <p>The <em>attribute-token</em> <code>noreturn</code> specifies that a function does not return. It shall appear at most once in\n  each <em>attribute-list</em> and no <em>attribute-argument-clause</em> shall be present. The attribute may be applied to\n  the <em>declarator-id</em> in a function declaration. The first declaration of a function shall specify the <code>noreturn</code>\n  attribute if any declaration of that function specifies the <code>noreturn</code> attribute. If a function is declared with\n  the <code>noreturn</code> attribute in one translation unit and the same function is declared without the <code>noreturn</code>\n  attribute in another translation unit, the program is ill-formed; no diagnostic required.  </p>\n  \n  <p>If a function <code>f</code> is called where <code>f</code> was previously declared with the <code>noreturn</code> attribute and <code>f</code> eventually returns,\n  the behavior is undefined.</p>\n</blockquote>\n\n<p>There is no mention of return <em>type</em>. The only thing that matters is that the function not return. If the function returns (whether <code>void</code> or <code>int</code> or <code>vector&lt;vector&lt;double&gt;&gt;</code>), then behavior is undefined. If the function doesn't return, the return type is immaterial.</p>\n"}, {"comments": [{"owner": {"reputation": 9267, "user_id": 2284221, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/120d229a55c7a6ce3037e6932c190616?s=128&d=identicon&r=PG", "display_name": "Patrick Collins", "link": "https://stackoverflow.com/users/2284221/patrick-collins"}, "edited": false, "score": 5, "creation_date": 1469663367, "post_id": 38623322, "comment_id": 64635317, "body": "How does this answer the question? OP knows it shouldn&#39;t return, he&#39;s asking about its type."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1469705923, "post_id": 38623322, "comment_id": 64653531, "body": "How does the standard quote clarify that it <i>is</i> ub? OP&#39;s function doesn&#39;t eventually return."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1469706196, "post_id": 38623322, "comment_id": 64653697, "body": "@Barry doesn&#39;t it return <code>0</code>?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1469708541, "post_id": 38623322, "comment_id": 64655398, "body": "@101010 It&#39;ll never get to that line."}], "tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": false, "score": 10, "last_activity_date": 1469708928, "last_edit_date": 1469708928, "creation_date": 1469654147, "answer_id": 38623322, "question_id": 38623143, "link": "https://stackoverflow.com/questions/38623143/can-i-use-noreturn-on-non-void-returning-functions/38623322#38623322", "title": "Can I use [[noreturn]] on non-void returning functions?", "body": "<p>From the C++ standard <em>\u00a77.6.8/p2 Noreturn attribute [dcl.attr.noreturn] (<strong>Emphasis Mine</strong>)</em>:</p>\n\n<blockquote>\n  <p><strong>If a function f is called where f was previously declared with the\n  noreturn attribute and f eventually returns, the behavior is\n  undefined.</strong> [ Note: The function may terminate by throwing an\n  exception. \u2014 end note ] [ Note: Implementations are encouraged to\n  issue a warning if a function marked [[noreturn]] might return. \u2014 end\n  note ]</p>\n</blockquote>\n\n<p>Since your function will never reach the <code>return 0;</code> there's no UB.</p>\n"}], "owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1107, "favorite_count": 2, "accepted_answer_id": 38623312, "answer_count": 2, "score": 18, "last_activity_date": 1469708928, "creation_date": 1469653406, "last_edit_date": 1469692998, "question_id": 38623143, "link": "https://stackoverflow.com/questions/38623143/can-i-use-noreturn-on-non-void-returning-functions", "title": "Can I use [[noreturn]] on non-void returning functions?", "body": "<p>I've never seen <a href=\"http://en.cppreference.com/w/cpp/language/attributes\">[[ noreturn ]]</a> used on non-void returning functions before.  </p>\n\n<p>Is the following well defined?  </p>\n\n<pre><code>[[ noreturn ]] int function();\n\nint function(){\n  while(true){/* impl */}\n  return 0;\n}\n</code></pre>\n\n<p>The reason the return type must be <code>int</code>, is because the function is passed to another function via a function pointer.  </p>\n\n<p>So assuming the caller looks something like this:  </p>\n\n<pre><code>//call the non-returning function\nint var = (*fptr)();\n\n//use var some way (even though the function will never actually return)\nstd::cout &lt;&lt; var;\n</code></pre>\n\n<p>will this exhibit any kind of undefined behavior?</p>\n"}, {"tags": ["c++", "templates", "template-meta-programming"], "comments": [{"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 7, "creation_date": 1469653823, "post_id": 38623142, "comment_id": 64632038, "body": "Tag based dispatching is achieved via overloading"}], "answers": [{"comments": [{"owner": {"reputation": 1139, "user_id": 6266602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0fa60ab2c1ac1b185db45679cabe8c9?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas B Preusser", "link": "https://stackoverflow.com/users/6266602/thomas-b-preusser"}, "edited": false, "score": 1, "creation_date": 1469688688, "post_id": 38623408, "comment_id": 64642249, "body": "The fact that tag dispatching is heavily used does not at all answer the question why it is used. The OP correctly notes that its effects can be easily achieved by plain method overloading in type hierarchies under his control. So, the decisive argument really is to implement a custom dispatch scheme that is decoupled from the type definitions. See my answer below."}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "reply_to_user": {"reputation": 1139, "user_id": 6266602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0fa60ab2c1ac1b185db45679cabe8c9?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas B Preusser", "link": "https://stackoverflow.com/users/6266602/thomas-b-preusser"}, "edited": false, "score": 0, "creation_date": 1469689172, "post_id": 38623408, "comment_id": 64642524, "body": "The gist of my answer is basically the first 4-5 lines, not that it is used in STL."}, {"owner": {"reputation": 5206, "user_id": 3834459, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/65fd0aebfda9ece120fa4856a9450ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Dean", "link": "https://stackoverflow.com/users/3834459/dean"}, "edited": false, "score": 0, "creation_date": 1470755356, "post_id": 38623408, "comment_id": 65073010, "body": "Big question to complement this answer: <b>is tag dispatching somewhat faster wrt normal overloading?</b> I suppose not since they&#39;re both implemented at compile-time, but I&#39;m still asking.. just to be sure."}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "reply_to_user": {"reputation": 5206, "user_id": 3834459, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/65fd0aebfda9ece120fa4856a9450ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Dean", "link": "https://stackoverflow.com/users/3834459/dean"}, "edited": false, "score": 1, "creation_date": 1470755924, "post_id": 38623408, "comment_id": 65073402, "body": "@Dean Yes, they are both implemented at compile time (unless we are talking about stored procedures or symbols in a shared library). Tag dispatching is just a name given to a particular use case of function overloading where we try to select the best overload by using some type trait."}], "tags": [], "owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "is_accepted": true, "score": 10, "last_activity_date": 1469654510, "creation_date": 1469654510, "answer_id": 38623408, "question_id": 38623142, "link": "https://stackoverflow.com/questions/38623142/advantages-of-tag-dispatching-over-normal-overload-resolution/38623408#38623408", "title": "Advantages of tag dispatching over normal overload resolution", "body": "<p><code>Tag dispatching</code> is basically a name given to a technique employed to find correct overloaded function. So, technically it is nothing but overloading only.</p>\n\n<p>To put it from <a href=\"http://www.boost.org/community/generic_programming.html#tag_dispatching\">Boost</a> site:</p>\n\n<blockquote>\n  <p>Tag dispatching is a way of using function overloading to dispatch\n  based on properties of a type, and is often used hand in hand with\n  traits classes.</p>\n</blockquote>\n\n<p>You can see it used all over in you standard library <code>algorithm</code> header file. Just for the sake of an example, consider that there is an algorithm <code>AlgoX</code> which can be performed a lot more efficiently on a container providing random access (eg <code>vector</code>) than a container providing bidirectional access (<code>list</code>). So, for selecting the algorithm based on the <code>iterator type</code> one would use tag dispatching using <code>iterator_traits</code></p>\n\n<pre><code>template &lt;typename Iter&gt;\nvoid AlgoXImpl(Iter first, Iter last, bidirectional_iterator_tag) {\n  //.....Algo specialized to bidirectional iterators\n}\n\ntemplate &lt;typename Iter&gt;\nvoid AlgoXImpl(Iter first, Iter last, random_access_iterator_tag) {\n  //.....Algo specialized to random access iterators\n}\n\ntemplate &lt;typename Iter&gt;\nvoid AlgoX(Iter first, Iter last) {\n  if (first == last) return;\n  AlgoXImpl(first, last, typename iterator_traits&lt;Iter&gt;::iterator_category());\n}\n</code></pre>\n\n<p>As you can see, to a simple mind this is nothing but an example of operator overloading as the categories are essentially different types.</p>\n\n<p>For a more real world example, you can checkout out how <code>std::rotate</code> is implemented.</p>\n"}, {"tags": [], "owner": {"reputation": 1139, "user_id": 6266602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0fa60ab2c1ac1b185db45679cabe8c9?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas B Preusser", "link": "https://stackoverflow.com/users/6266602/thomas-b-preusser"}, "is_accepted": false, "score": 2, "last_activity_date": 1469654699, "creation_date": 1469654699, "answer_id": 38623443, "question_id": 38623142, "link": "https://stackoverflow.com/questions/38623142/advantages-of-tag-dispatching-over-normal-overload-resolution/38623443#38623443", "title": "Advantages of tag dispatching over normal overload resolution", "body": "<p>Tags can be associated with a type, even including basic primitive types, through appropriate trait classes. E.g., it would be impossible to make a pointer type a subclass of some iterator concept. However, a templated trait class may associate it with the desired tag. Thus, tag-based dispatching adds flexibility that allows to build a dispatch scheme that must not already be defined by the involved types.</p>\n"}], "owner": {"reputation": 5206, "user_id": 3834459, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/65fd0aebfda9ece120fa4856a9450ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Dean", "link": "https://stackoverflow.com/users/3834459/dean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 694, "favorite_count": 2, "accepted_answer_id": 38623408, "answer_count": 2, "score": 10, "last_activity_date": 1469656915, "creation_date": 1469653401, "last_edit_date": 1469656915, "question_id": 38623142, "link": "https://stackoverflow.com/questions/38623142/advantages-of-tag-dispatching-over-normal-overload-resolution", "title": "Advantages of tag dispatching over normal overload resolution", "body": "<p>Plain and simple: what's the advantage of tag dispatching over normal overload resolution?</p>\n\n<p>These are both compile-time processes right? So there shouldn't be a 'performance winner' I suppose. And every tag dispatching case should be able, to some extent, to be rewritten/refactored into normal overloading (possibly by adding multiple types), right?</p>\n\n<p>Aside from the different way of working and selecting candidates, why should I prefer tag dispatching over overload resolution and in which cases?</p>\n"}, {"tags": ["c++", "c", "pointers"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user820304"}, "edited": false, "score": 2, "creation_date": 1469653327, "post_id": 38623084, "comment_id": 64631796, "body": "<code>I&#39;m not stupid enough to try, but I am very curious.</code> - Just try it. This does not replace a proper answer, but you&#39;re not going to cause any harm outside of your application if you&#39;re running on any major OS."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1469653332, "post_id": 38623084, "comment_id": 64631802, "body": "Yes, pointers are no more than just value containers, it will just flip. Your second line in the while body has a 100% UB chance though."}, {"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "edited": false, "score": 4, "creation_date": 1469653358, "post_id": 38623084, "comment_id": 64631810, "body": "Undefined behavior ahoy"}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 1, "creation_date": 1469653445, "post_id": 38623084, "comment_id": 64631850, "body": "&quot;I&#39;m not stupid enough to try, but I am very curious.&quot; This is what are VMs for! Just imagine the possibilities of having a computer simulated in which you can do <i>anything</i>"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 2, "creation_date": 1469655016, "post_id": 38623084, "comment_id": 64632640, "body": "Go for it. Experimenting wildly with virtual memory has never killed anybody (Except for processes. Processes do tend to get killed when you scribble in inappropriate memory spots)"}], "answers": [{"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 6, "creation_date": 1469653920, "post_id": 38623158, "comment_id": 64632088, "body": "You are absolutely allowed to have a pointer point past an object."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1469654107, "post_id": 38623158, "comment_id": 64632188, "body": "@EOF Though more specifically only &quot;just&quot; past (the end of) an object."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1469654223, "post_id": 38623158, "comment_id": 64632250, "body": "@EOF: Quite right. My wording was clumsy to the point of being incorrect. I&#39;ve fixed it."}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 10, "last_activity_date": 1482262893, "last_edit_date": 1482262893, "creation_date": 1469653454, "answer_id": 38623158, "question_id": 38623084, "link": "https://stackoverflow.com/questions/38623084/what-happens-when-a-pointer-is-too-big/38623158#38623158", "title": "What happens when a pointer is too big?", "body": "<p>Undefined behavior.</p>\n\n<p>In fact, incrementing a pointer so it points to a location more than one element past the end of the object to which it originally pointed causes undefined behavior. (You're permitted to construct a pointer just past the end of an object, but not beyond that.) (The object in question is an array, with a non-array object being treated as an array with one element.)</p>\n\n<p>Which means that the language standard says nothing about what can happen.  It might \"work\", it might crash your program, it might result in any symptom that your program is capable of producing.</p>\n\n<p>In practice, the behavior is likely to vary from one system to another. It's likely that incrementing a pointer will do the same thing as incrementing an unsigned integer: update the value without causing any visible problems. If you try to dereference the pointer, the results depend on how your system manages memory.</p>\n\n<p>Bottom line: Undefined behavior is undefined.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1469653854, "last_edit_date": 1469653854, "creation_date": 1469653503, "answer_id": 38623169, "question_id": 38623084, "link": "https://stackoverflow.com/questions/38623084/what-happens-when-a-pointer-is-too-big/38623169#38623169", "title": "What happens when a pointer is too big?", "body": "<p>Pointers are only valid to an object or \"1 pass\".</p>\n\n<pre><code>int x;\nint *p = &amp;x;\np++;\np++; // invalid\nint y[5];\np = &amp;y[4];\np = &amp;y[5];\np = &amp;y[6]; // invalid\n</code></pre>\n\n<p>Pointers may be assigned a null pointer value;</p>\n\n<pre><code>p = NULL;\n</code></pre>\n\n<p>Pointers can refer to a funciton.</p>\n\n<p>That's it.  Assigning a pointer to some other value is <strong>undefined behavior (UB)</strong> such as:</p>\n\n<pre><code>int* ptr = 0;\nptr += 1;  // UB  (NULL is not a pointer to a valid object, so \"1 pass\" is UB)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "is_accepted": false, "score": 2, "last_activity_date": 1469688333, "last_edit_date": 1469688333, "creation_date": 1469653595, "answer_id": 38623192, "question_id": 38623084, "link": "https://stackoverflow.com/questions/38623084/what-happens-when-a-pointer-is-too-big/38623192#38623192", "title": "What happens when a pointer is too big?", "body": "<p>Accessing memory outside of what is allocated to you (by <code>new</code> or <code>malloc</code> etc.) is <em>undefined behavior</em> in C++, so don't expect anything to go well. </p>\n\n<p>In practice, incrementing a pointer outside of the physical limits is defined by the platform, for most platforms, it will eventually roll over; accessing it may result in a crash. </p>\n\n<p>For most modern OSes, attempting to read or write memory outside of what the process is allocated with result in an access violation or segmentation fault. </p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 1, "last_activity_date": 1469653942, "creation_date": 1469653942, "answer_id": 38623272, "question_id": 38623084, "link": "https://stackoverflow.com/questions/38623084/what-happens-when-a-pointer-is-too-big/38623272#38623272", "title": "What happens when a pointer is too big?", "body": "<p>The C/C++ language is not defined for an existing system/machine, but an abstract black box (although it does not ignore reality). You are asking for undefined behavior (some existing systems/machines may do what you expect)</p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 0, "last_activity_date": 1469654517, "creation_date": 1469654517, "answer_id": 38623411, "question_id": 38623084, "link": "https://stackoverflow.com/questions/38623084/what-happens-when-a-pointer-is-too-big/38623411#38623411", "title": "What happens when a pointer is too big?", "body": "<p>On the common systems I'm aware of (which would be mainly/solely my system), pointers behave very much like <code>unsigned long</code>s:</p>\n\n<pre><code>int main(){\n    char* p = NULL;\n    printf(\"%p\\n\", p);\n    printf(\"%p\\n\", --p);\n}\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>(nil)\n0xffffffffffffffff\n</code></pre>\n\n<p>But I guess all kinds of exotic stuff could happen, theoretically.</p>\n"}, {"tags": [], "owner": {"reputation": 118, "user_id": 5962153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d1d4c3412633b6f7d195a473f807ce6?s=128&d=identicon&r=PG&f=1", "display_name": "user5962153", "link": "https://stackoverflow.com/users/5962153/user5962153"}, "is_accepted": false, "score": 0, "last_activity_date": 1469660458, "creation_date": 1469660458, "answer_id": 38624553, "question_id": 38623084, "link": "https://stackoverflow.com/questions/38623084/what-happens-when-a-pointer-is-too-big/38624553#38624553", "title": "What happens when a pointer is too big?", "body": "<p>IMO, your pointer won't have any problem, there's nothing to happened if you just save the pointer, but when you try to dereference/access it i'm sure your code would ended up in access violation and crash your program.\nor if it's a valid pointer, it would modify something else data, possibly modified another variable content tho'</p>\n"}], "owner": {"reputation": 197, "user_id": 1748198, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/T9CpJ.jpg?s=128&g=1", "display_name": "Timothy Eckstein", "link": "https://stackoverflow.com/users/1748198/timothy-eckstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 38623158, "answer_count": 6, "score": 2, "last_activity_date": 1482262893, "creation_date": 1469653204, "last_edit_date": 1469654618, "question_id": 38623084, "link": "https://stackoverflow.com/questions/38623084/what-happens-when-a-pointer-is-too-big", "title": "What happens when a pointer is too big?", "body": "<p>What happens, in C++ or C, if a pointer is set to a value so high that it goes out of the bounds of memory? Here's some code that would do such a thing:</p>\n\n<pre><code>int* ptr = 0;\nwhile (true) {\n    ptr += 1; // eventually this will go out of bounds of the memory ... unless there is an overflow.\n    *ptr = 10; // just give it a value, why not?\n}\n</code></pre>\n\n<p>What happens? Does the pointer -- when it gets out of the bounds of, let's say a 16 byte memory -- just flip from 0xF to 0x0? Does it keep counting up and the <code>*ptr = 10;</code> line crashes the computer?</p>\n\n<p>I'm not stupid enough to try, but I am very curious.</p>\n"}, {"tags": ["c++", "string", "binary"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1469654745, "post_id": 38622966, "comment_id": 64632526, "body": "I would use <code>std::vector&lt;char&gt;</code> or <code>std::vector&lt;uint8_t&gt;</code> instead of <code>std::string</code>"}, {"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 0, "creation_date": 1469655022, "post_id": 38622966, "comment_id": 64632642, "body": "I could never understand why people use <code>std::string</code> for binary data. Keep in mind that this container&#39;s <code>value_type</code> is <code>char</code>, which may lead to problems related to sign extension (for example, think about what the result of <code>my_str[3] == 0x95</code> will be). You might want to use <code>std::vector&lt;std::uint8_t&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 3, "creation_date": 1469653015, "post_id": 38623000, "comment_id": 64631653, "body": "These quirks really make C++ great. A convenient non-const method to get the internal string buffer will be added 35 years late."}, {"owner": {"reputation": 55, "user_id": 6646727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/815968238817b96e0845c5d55d23fce7?s=128&d=identicon&r=PG&f=1", "display_name": "baris_esmer", "link": "https://stackoverflow.com/users/6646727/baris-esmer"}, "edited": false, "score": 0, "creation_date": 1469653393, "post_id": 38623000, "comment_id": 64631830, "body": "Just to be sure, the size of my_str before calling the read method should be greater than or equal to 5 , right ? @Barry"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 55, "user_id": 6646727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/815968238817b96e0845c5d55d23fce7?s=128&d=identicon&r=PG&f=1", "display_name": "baris_esmer", "link": "https://stackoverflow.com/users/6646727/baris-esmer"}, "edited": false, "score": 0, "creation_date": 1469653680, "post_id": 38623000, "comment_id": 64631961, "body": "@baris_esmer Of course. All the usual caveats apply."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 7, "last_activity_date": 1469652816, "creation_date": 1469652816, "answer_id": 38623000, "question_id": 38622966, "link": "https://stackoverflow.com/questions/38622966/reading-binary-data-into-stdstring-c/38623000#38623000", "title": "Reading binary data into std::string c++", "body": "<p>In C++11, the way to get a non-<code>const</code> pointer to the string's data is:</p>\n\n<pre><code>file.read(&amp;my_str[0], 5);\n</code></pre>\n\n<p>C++17 will introduce non-<code>const</code> <code>data()</code> for this as well:</p>\n\n<pre><code>file.read(my_str.data(), 5);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 2, "last_activity_date": 1469655031, "creation_date": 1469655031, "answer_id": 38623511, "question_id": 38622966, "link": "https://stackoverflow.com/questions/38622966/reading-binary-data-into-stdstring-c/38623511#38623511", "title": "Reading binary data into std::string c++", "body": "<p>another way, using standard algorithms:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n\nusing namespace std;\n\nint main(int argc, char const *argv[])\n{\n    fstream file(\"output.bin\" , ios::out | ios::binary | ios::in);\n\n    auto my_str = string();\n\n    copy_n(istream_iterator&lt;char&gt;(file), \n           5, \n           std::back_inserter(my_str));\n\n    cout &lt;&lt; \"String = \" &lt;&lt; my_str&lt;&lt; endl ;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1469655179, "creation_date": 1469655179, "answer_id": 38623543, "question_id": 38622966, "link": "https://stackoverflow.com/questions/38622966/reading-binary-data-into-stdstring-c/38623543#38623543", "title": "Reading binary data into std::string c++", "body": "<p><code>std::string</code> is specially designed to work with strings and with c-style strings as well, so this fact will work against you in this situation. For example your code:</p>\n\n<pre><code>char buffer[6];\nfile.read(buffer, 5);\nbuffer[5] = '\\0';\nmy_str = string(buffer);\n</code></pre>\n\n<p>what is wrong with it? You are reading binary data and who guarantees that there won't be '\\0' byte there? You can fix it by:</p>\n\n<pre><code>my_str = string(buffer,5);\n</code></pre>\n\n<p>but this shows the point - <code>std::string</code> as a buffer is not a good choice. So you better use <code>std::vector&lt;char&gt;</code> or even better <code>std::vector&lt;uint8_t&gt;</code> which has method <code>data()</code> but will not implicitly convert from c-string, output to <code>std::ostream</code> etc.</p>\n"}], "owner": {"reputation": 55, "user_id": 6646727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/815968238817b96e0845c5d55d23fce7?s=128&d=identicon&r=PG&f=1", "display_name": "baris_esmer", "link": "https://stackoverflow.com/users/6646727/baris-esmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10091, "favorite_count": 1, "accepted_answer_id": 38623000, "answer_count": 3, "score": 5, "last_activity_date": 1469655179, "creation_date": 1469652683, "last_edit_date": 1469654423, "question_id": 38622966, "link": "https://stackoverflow.com/questions/38622966/reading-binary-data-into-stdstring-c", "title": "Reading binary data into std::string c++", "body": "<p>I am trying to read data from binary file to an std::string.Here is what I have tried at first.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main(int argc, char const *argv[])\n{\n    fstream file(\"output.bin\" , ios::out | ios::binary | ios::in);\n    string my_str(5, '\\0');\n    file.read(my_str.c_str(), 5);\n    cout &lt;&lt; \"String = \" &lt;&lt; my_str&lt;&lt; endl ;\n}\n</code></pre>\n\n<p>And the compiler gave the error :</p>\n\n<pre><code>error: invalid conversion from \u2018const char*\u2019 to \u2018std::basic_istream&lt;char&gt;::char_type* {aka char*}\u2019 [-fpermissive]\n  file.read(my_str.c_str(), 5);\n</code></pre>\n\n<p>As far as I understand, c_str() returns a const pointer which cannot be used in read method, so I changed my approach a little bit(which you can see below). Is there a better way to do this ?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main(int argc, char const *argv[])\n{\n    fstream file(\"output.bin\" , ios::out | ios::binary | ios::in);\n    string my_str(5, '\\0');\n    char buffer[6];\n    file.read(buffer, 5);\n    buffer[5] = '\\0';\n    my_str = string(buffer);\n\n    cout &lt;&lt; \"String = \" &lt;&lt; my_str&lt;&lt; endl ;\n}\n</code></pre>\n\n<p>ps : forgive me if I could not make myself clear, this is my first time here :)</p>\n"}, {"tags": ["python", "c++", "boost", "boost-python", "python-bindings"], "comments": [{"owner": {"reputation": 1355, "user_id": 1411160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P4XMo.jpg?s=128&g=1", "display_name": "Emil Sier\u017c\u0119ga", "link": "https://stackoverflow.com/users/1411160/emil-sier%c5%bc%c4%99ga"}, "edited": false, "score": 1, "creation_date": 1469653227, "post_id": 38622890, "comment_id": 64631753, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/145270/calling-c-c-from-python\">Calling C/C++ from python?</a>"}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1469654689, "post_id": 38622890, "comment_id": 64632495, "body": "You probably need GObject Introspection library."}, {"owner": {"reputation": 5662, "user_id": 5781248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712de4f2f811d1a400d3311c9cdd5836?s=128&d=identicon&r=PG&f=1", "display_name": "J.J. Hakala", "link": "https://stackoverflow.com/users/5781248/j-j-hakala"}, "edited": false, "score": 0, "creation_date": 1469654888, "post_id": 38622890, "comment_id": 64632590, "body": "At least with Cython it is possible to have call chain like &#39;C++ main -&gt; C function implemented in cython -&gt; python code -&gt; python module implemented in cython -&gt; C++ code...&#39;. It is probably possible with Boost.python also."}, {"owner": {"reputation": 24730, "user_id": 2298070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A6aVe.jpg?s=128&g=1", "display_name": "Steve Barnes", "link": "https://stackoverflow.com/users/2298070/steve-barnes"}, "edited": false, "score": 0, "creation_date": 1469684781, "post_id": 38622890, "comment_id": 64640318, "body": "It is worth pointing out that it is usually considered good practice for the C/C++ main to do very little other than parsing the parameters and then calling the actual processing with the parsed results - this makes what you are considering doing, or any bindings, much easier."}], "answers": [{"comments": [{"owner": {"reputation": 24730, "user_id": 2298070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A6aVe.jpg?s=128&g=1", "display_name": "Steve Barnes", "link": "https://stackoverflow.com/users/2298070/steve-barnes"}, "edited": false, "score": 0, "creation_date": 1469684564, "post_id": 38624911, "comment_id": 64640248, "body": "It might be worth mentioning the possibility of using a shared library, (.dll/.so), as a possibility as well as a static library."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "reply_to_user": {"reputation": 24730, "user_id": 2298070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A6aVe.jpg?s=128&g=1", "display_name": "Steve Barnes", "link": "https://stackoverflow.com/users/2298070/steve-barnes"}, "edited": false, "score": 0, "creation_date": 1469714319, "post_id": 38624911, "comment_id": 64660199, "body": "The python extension module is (and must be) a shared library (.pyd/.so). The underlying code library has to be compatibile with that (-fPic) but making it also shared means you have to distribute it and not have any version/interface mismatches. Risk with no benefit."}, {"owner": {"reputation": 24730, "user_id": 2298070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A6aVe.jpg?s=128&g=1", "display_name": "Steve Barnes", "link": "https://stackoverflow.com/users/2298070/steve-barnes"}, "edited": false, "score": 0, "creation_date": 1469727154, "post_id": 38624911, "comment_id": 64669356, "body": "Please note that the answer above, mentions linking a <b>static</b> library to the python code - this is wrong. You also have the possibility of building a static library for a C++ executable and a shared library to bundle into a wheel with the python interface."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "reply_to_user": {"reputation": 24730, "user_id": 2298070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A6aVe.jpg?s=128&g=1", "display_name": "Steve Barnes", "link": "https://stackoverflow.com/users/2298070/steve-barnes"}, "edited": false, "score": 0, "creation_date": 1469799967, "post_id": 38624911, "comment_id": 64701713, "body": "I&#39;m willing to correct any errors, but I think we just have a miscommunication. Python doesn&#39;t link, but it can import a shared library (python extension module). When this shared library was built from c++, other shared or static libraries may have been linked (and that&#39;s where your c++ code library came in)."}, {"owner": {"reputation": 24730, "user_id": 2298070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A6aVe.jpg?s=128&g=1", "display_name": "Steve Barnes", "link": "https://stackoverflow.com/users/2298070/steve-barnes"}, "edited": false, "score": 0, "creation_date": 1469802023, "post_id": 38624911, "comment_id": 64703177, "body": "Above states &quot;...and link the static library...&quot; then &quot;.. link the same c++ library ...&quot; it should read &quot; import a DLL built with the source of the same C++ library ...&quot;"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "reply_to_user": {"reputation": 24730, "user_id": 2298070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A6aVe.jpg?s=128&g=1", "display_name": "Steve Barnes", "link": "https://stackoverflow.com/users/2298070/steve-barnes"}, "edited": false, "score": 0, "creation_date": 1469802945, "post_id": 38624911, "comment_id": 64703751, "body": "That is for building the original c++ executable."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "reply_to_user": {"reputation": 24730, "user_id": 2298070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A6aVe.jpg?s=128&g=1", "display_name": "Steve Barnes", "link": "https://stackoverflow.com/users/2298070/steve-barnes"}, "edited": false, "score": 0, "creation_date": 1469804283, "post_id": 38624911, "comment_id": 64704623, "body": "Also, building multiple projects from the same SOURCE files is bad. That&#39;s the whole point of a library -- build once."}, {"owner": {"reputation": 24730, "user_id": 2298070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A6aVe.jpg?s=128&g=1", "display_name": "Steve Barnes", "link": "https://stackoverflow.com/users/2298070/steve-barnes"}, "edited": false, "score": 0, "creation_date": 1469806667, "post_id": 38624911, "comment_id": 64706153, "body": "Building multiple outputs from a single set of source files is generally considered good especially it you can use make tools and keep the options the same for compiling both, so C++s -&gt; .obj happens once and objs -&gt; lib -&gt; exe plus objs -&gt; dll -&gt; wheel. Your original answer still reads that python is using the same [static] library."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "reply_to_user": {"reputation": 24730, "user_id": 2298070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A6aVe.jpg?s=128&g=1", "display_name": "Steve Barnes", "link": "https://stackoverflow.com/users/2298070/steve-barnes"}, "edited": false, "score": 1, "creation_date": 1469809512, "post_id": 38624911, "comment_id": 64707754, "body": "I edited my answer to separate my recommendation from the points we agree on.  And I do grant that makefile achieves the same thing of building the source once."}], "tags": [], "owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "is_accepted": true, "score": 1, "last_activity_date": 1469809118, "last_edit_date": 1469809118, "creation_date": 1469662952, "answer_id": 38624911, "question_id": 38622890, "link": "https://stackoverflow.com/questions/38622890/python-binding-of-functions-within-a-c-program/38624911#38624911", "title": "Python binding of functions within a c++ program", "body": "<p>We have an extensive c++ library which we made available to python through use of a python wrapper class which calls an interface that we defined in boost python. </p>\n\n<p>One python class handles all the queries in a pythonic manner, by calling a python extension module written in c++ with boost python. The python extension executes c++ code, so it can link and use anything from the original library.</p>\n\n<p>You said your c++ is an executable, though. Why can't you use system calls to launch a shell process? You can do that in any language, including python. What I thought was you want to access individual functions, which means you need all your functions in a static library. </p>\n\n<p>You build your c++ exe normally, linking the common code. You make a \"boost python extension module\" which links the common code, and can be imported by a python script. And of course a unit test executable, which links and tests the common code.  My preference is that the common code be a stand-alone static lib (use -fPic if there's a posix gcc build).</p>\n"}], "owner": {"reputation": 11, "user_id": 6646657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCOeD.jpg?s=128&g=1", "display_name": "Kari", "link": "https://stackoverflow.com/users/6646657/kari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 944, "favorite_count": 0, "accepted_answer_id": 38624911, "answer_count": 1, "score": 0, "last_activity_date": 1469809118, "creation_date": 1469652352, "question_id": 38622890, "link": "https://stackoverflow.com/questions/38622890/python-binding-of-functions-within-a-c-program", "title": "Python binding of functions within a c++ program", "body": "<p>I have a program written in c++ that functions on it's own, however we want to make it accessible to Python. Specifically, we have several functions that are more efficient in c++, but we do a lot of other things with the output using Python scripts. I don't want to rewrite the whole of main() in Python as we make use of Boost's root finding algorithms and other functionalities that'd be a pain to do in Python. </p>\n\n<p>Is it possible to add Python binding to these functions while keeping the c++ main()? I've never done Python binding before, but I've looked at <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/python/doc/html/tutorial/index.html\" rel=\"nofollow\">Boost.python</a> since we're already using Boost. Most of the examples use c++ functions/classes in a hpp file and embed them into a python program, which isn't exactly what we want.</p>\n\n<p>What we want is to keep our c++ program as a standalone so it can run as it is if users want, and also allow users to call these functions from a Python program. Being able to use the same Makefile and exe would be great. We don't really want to make a separate c++ library containing the bound functions; we're not interested in making a pythonic version of the code, merely allowing access to these useful functions.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "linux", "unix", "process"], "owner": {"reputation": 43, "user_id": 5698535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b4e48a5fca673fd728c3b89e40e3f3?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Spector", "link": "https://stackoverflow.com/users/5698535/benjamin-spector"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1469652143, "creation_date": 1469652143, "question_id": 38622831, "link": "https://stackoverflow.com/questions/38622831/unix-generic-subprocess-error-detection", "title": "Unix generic subprocess error detection", "body": "<p>My program (C++) needs to be able to create and destroy many separate subprocesses from user-inputted commands on Unix systems. The subprocesses communicate with my program via pipes and are designed to time out if they don't respond within a certain amount of time. As we will be running the program on Linux servers potentially costing many thousands of dollars, if a process errors or exits we'd like to stop waiting for it and ensure that it's dead rather than waiting for it to time out (which can be on the order of minutes and is consequently valuable server time) and then killing it.</p>\n\n<p>The below code runs perfectly fine when run with straight compiled executables (\"cd path/to/directory; ./program\"), stopping programs which fail and leaving programs that are still running until they time out, but when given either python or java programs to run (in the form of \"cd path/to/file; python3 program.py\" or \"cd path/to/directory; java program\") concludes the subprocess has exited or failed regardless of its actual state. How do I fix this?</p>\n\n<p>--- Create a subprocess ---</p>\n\n<pre><code>void Networking::startAndConnectBot(std::string command) {\npid_t pid = (pid_t)NULL;\nint writePipe[2];\nint readPipe[2];\n\nif(pipe(writePipe) || pipe(readPipe)) {\n    throw 1;\n}\n\n//Fork a child process\npid = fork();\nif(pid == 0) { //This is the child\n    setpgid(getpid(), getpid());\n\n    dup2(writePipe[0], STDIN_FILENO);\n\n    dup2(readPipe[1], STDOUT_FILENO);\n    dup2(readPipe[1], STDERR_FILENO);\n\n    execl(\"/bin/sh\", \"sh\", \"-c\", command.c_str(), (char*) NULL);\n\n    //Nothing past the execl should be run\n\n    exit(1);\n} else if(pid &lt; 0) {\n    if(!quiet_output) std::cout &lt;&lt; \"Fork failed\\n\";\n    throw 1;\n}\n\nUniConnection connection;\nconnection.read = readPipe[0];\nconnection.write = writePipe[1];\n\nconnections.push_back(connection);\nprocesses.push_back(pid);\n</code></pre>\n\n<p>--- Get a response from a subprocess ---</p>\n\n<pre><code>std::string Networking::getString(unsigned char playerTag, unsigned int timeoutMillis) {\n\nstd::string newString;\n\nUniConnection connection = connections[playerTag - 1];\n\nfd_set set;\nFD_ZERO(&amp;set); /* clear the set */\nFD_SET(connection.read, &amp;set); /* add our file descriptor to the set */\n\nstruct timeval timeout; //We want it to be non-blocking, so we'll check every ten millisecond to get a result.\ntimeout.tv_sec = 0;\ntimeout.tv_usec = 10000;\n\nchar buffer;\n\n//The time we started at.\nstd::chrono::high_resolution_clock::time_point initialTime = std::chrono::high_resolution_clock::now();\n\n//Keep reading char by char until a newline\nbool shouldContinue = true;\nwhile(shouldContinue) {\n    //Check if process is dead.\n    int status;\n    if(waitpid(processes[playerTag - 1], &amp;status, WNOHANG) == processes[playerTag - 1] ||\n    std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::high_resolution_clock::now() - initialTime).count() &gt;= timeoutMillis) {\n        killPlayer(playerTag);\n        if(!quiet_output) {\n            // Buffer error message output\n            // If a bunch of bots fail at onces, we dont want to be writing to cout at the same time\n            // That looks really weird\n            std::string errorMessage = \"\";\n            errorMessage += std::string(\"Unix bot timed out or errored.\\n\");\n\n            playerLogs[playerTag-1].push_back(newString);\n            errorMessage += \"#---------ALL OF THE OUTPUT OF THE BOT THAT TIMED OUT----------#\\n\";\n            for(auto stringIter = playerLogs[playerTag-1].begin(); stringIter != playerLogs[playerTag-1].end(); stringIter++) {\n                while(stringIter-&gt;size() &lt; 60) stringIter-&gt;push_back(' ');\n                errorMessage += \"# \" + *stringIter + \" #\\n\";\n            }\n            errorMessage += \"#--------------------------------------------------------------#\\n\";\n\n            std::lock_guard&lt;std::mutex&gt; guard(coutMutex);\n            std::cout &lt;&lt; errorMessage;\n        }\n        throw 1;\n    }\n\n    //Check if there are bytes in the pipe\n    for(int selectionResult = select(connection.read+1, &amp;set, NULL, NULL, &amp;timeout); selectionResult &gt; 0; selectionResult--) {\n        read(connection.read, &amp;buffer, 1);\n\n        if(buffer == '\\n') {\n            shouldContinue = false;\n            break;\n        }\n        else newString += buffer;\n    }\n\n    //Reset timeout - we should consider it to be undefined.\n    timeout.tv_sec = 0;\n    timeout.tv_usec = 10000;\n}\n</code></pre>\n\n<p>That is to say, whenever the aforementioned java or python commands are run with the program, 1 is thrown from getString regardless of whether or not they actually did exit or error.</p>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["c++", "struct", "initialization", "unions"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1469652105, "post_id": 38622732, "comment_id": 64631187, "body": "No valid C++ (anonymous structures in a union)"}, {"owner": {"reputation": 218, "user_id": 5460583, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/48130a2ffbc0506079aceff8ec3a1767?s=128&d=identicon&r=PG&f=1", "display_name": "testman", "link": "https://stackoverflow.com/users/5460583/testman"}, "edited": false, "score": 0, "creation_date": 1469652293, "post_id": 38622732, "comment_id": 64631277, "body": "vs2012 compiles without error or warning though"}, {"owner": {"reputation": 669, "user_id": 2581119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbdbeb2cb8aa3c89132fe48d744c91d4?s=128&d=identicon&r=PG", "display_name": "Lehu", "link": "https://stackoverflow.com/users/2581119/lehu"}, "edited": false, "score": 1, "creation_date": 1469659682, "post_id": 38622732, "comment_id": 64634433, "body": "@testman That does not mean that it is in accordance with standard. As far as I know anonymous structs are not allowed by standard."}, {"owner": {"reputation": 218, "user_id": 5460583, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/48130a2ffbc0506079aceff8ec3a1767?s=128&d=identicon&r=PG&f=1", "display_name": "testman", "link": "https://stackoverflow.com/users/5460583/testman"}, "reply_to_user": {"reputation": 669, "user_id": 2581119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbdbeb2cb8aa3c89132fe48d744c91d4?s=128&d=identicon&r=PG", "display_name": "Lehu", "link": "https://stackoverflow.com/users/2581119/lehu"}, "edited": false, "score": 0, "creation_date": 1469659956, "post_id": 38622732, "comment_id": 64634503, "body": "@Lehu Yes, it is apparently not standard, still the second example is non standard as well and works as expected. Why allow non standard when not being consistent with it... confusing"}, {"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1469660154, "post_id": 38622732, "comment_id": 64634563, "body": "No compiler is perfect. Bugs and non-conformant behavior are constantly being found and corrected."}, {"owner": {"reputation": 669, "user_id": 2581119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbdbeb2cb8aa3c89132fe48d744c91d4?s=128&d=identicon&r=PG", "display_name": "Lehu", "link": "https://stackoverflow.com/users/2581119/lehu"}, "reply_to_user": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1469660811, "post_id": 38622732, "comment_id": 64634732, "body": "@JonHarper And sometimes non-conformant behaviour is intended. MS has even a list of purposeful &quot;deviations&quot; from standard."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 669, "user_id": 2581119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbdbeb2cb8aa3c89132fe48d744c91d4?s=128&d=identicon&r=PG", "display_name": "Lehu", "link": "https://stackoverflow.com/users/2581119/lehu"}, "edited": false, "score": 0, "creation_date": 1469663794, "post_id": 38622732, "comment_id": 64635420, "body": "@Lehu microsoft are still holding back the field of computer science even after the departure of the fat baboon?"}, {"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "reply_to_user": {"reputation": 669, "user_id": 2581119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbdbeb2cb8aa3c89132fe48d744c91d4?s=128&d=identicon&r=PG", "display_name": "Lehu", "link": "https://stackoverflow.com/users/2581119/lehu"}, "edited": false, "score": 0, "creation_date": 1469670930, "post_id": 38622732, "comment_id": 64636810, "body": "@Lehu Compiler extensions are just extensions and are not portable. If you refer to MSVC&#39;s general quirkiness, well.. that&#39;s why you test with gcc and Clang for compatibility."}], "owner": {"reputation": 218, "user_id": 5460583, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/48130a2ffbc0506079aceff8ec3a1767?s=128&d=identicon&r=PG&f=1", "display_name": "testman", "link": "https://stackoverflow.com/users/5460583/testman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 276, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1486313738, "creation_date": 1469651770, "last_edit_date": 1486313738, "question_id": 38622732, "link": "https://stackoverflow.com/questions/38622732/c-member-initialization-list-in-anonymous-union-of-structs", "title": "C++ member initialization list in anonymous union of structs", "body": "<p>I have the following class:</p>\n\n<pre><code>class LineSegW {\npublic:\n\n    union {\n        struct {\n        public:\n            int sx;\n            int sy;\n            int ex;\n            int ey;\n        };\n\n        struct {\n        public:\n            Vec2i s;\n            Vec2i e;\n        };\n    };\n\n    int w;\n\n    LineSegW(int _sx, int _sy, int _ex, int _ey, int _w) : \n        sx(_sx), sy(_sy), ex(_ex), ey(_ey), w(_w) {}\n};\n</code></pre>\n\n<p>Vec2i consists simply of 2 integers. Now the problem is that the given constructor does not initialise the class members, except the integer w which is not in the union. When I write the constructor as</p>\n\n<pre><code>LineSegW(int _sx, int _sy, int _ex, int _ey, int _w) {\n    sx = _sx;\n    sy = _sy;\n    ex = _ex;\n    ey = _ey;\n    w = _w;\n}\n</code></pre>\n\n<p>everything works as expected. Both variants produce no warnings or errors so what is wrong with the first option?</p>\n"}, {"tags": ["c++", "bots"], "comments": [{"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 1, "creation_date": 1469651640, "post_id": 38622583, "comment_id": 64630964, "body": "Check the return code from sendinput and call getlasterror."}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 0, "creation_date": 1469651886, "post_id": 38622583, "comment_id": 64631076, "body": "What application is supposed to receive this input?  Research UIPI."}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1469667491, "post_id": 38622583, "comment_id": 64636144, "body": "@RemyLebeau &quot;This function fails when it is blocked by UIPI. Note that neither GetLastError nor the return value will indicate the failure was caused by UIPI blocking.&quot; <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646310(v=vs.85).aspx\" rel=\"nofollow noreferrer\">per msdn description of the sendinput function</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 0, "creation_date": 1469667750, "post_id": 38622583, "comment_id": 64636205, "body": "@DavidThomas: you are right, I did not see that caveat before."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1469669589, "post_id": 38622583, "comment_id": 64636550, "body": "Since <code>SendInput()</code> injects into the hardware input queue, I don&#39;t understand how UIPI can block it, though. Maybe @RaymondChen could post a blog explaining that in more detail."}], "answers": [{"tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": true, "score": 0, "last_activity_date": 1469655253, "creation_date": 1469655253, "answer_id": 38623569, "question_id": 38622583, "link": "https://stackoverflow.com/questions/38622583/why-isnt-sendinput-working/38623569#38623569", "title": "Why isn&#39;t SendInput() working?", "body": "<p>You are working with ANSI string so use <code>VkKeyScanExA</code>, or switch to <code>std::wstring</code>. But don't mix ANSI with UNICODE, and don't use casting to hide the compiler warnings.</p>\n\n<p>You have to reset <code>ip.ki.dwFlags</code> to zero to indicate key down. Then set it to <code>KEYEVENTF_KEYUP</code>.</p>\n\n<p>You also have to check the key state for caplock and shift, etc. Using <code>SendInput</code> in that way is pointless, the first parameter is there to allow sending multiple inputs at once. You might as well use <code>keybd_event</code></p>\n\n<pre><code>void presskeys(string s) \n{\n    INPUT ip;\n    ip.type = INPUT_KEYBOARD;\n    ip.ki.wScan = 0;\n    ip.ki.time = 0;\n    ip.ki.dwExtraInfo = 0;\n    HKL kbl = GetKeyboardLayout(0);\n    for (unsigned int i = 0; i &lt; s.length(); ++i) \n    {\n        char c = s[i];\n        ip.ki.wVk = VkKeyScanExA(c, kbl); //&lt;== don't mix ANSI with UNICODE\n        ip.ki.dwFlags = 0; //&lt;= Add this to indicate key-down\n        SendInput(1, &amp;ip, sizeof(ip));\n        ip.ki.dwFlags = KEYEVENTF_KEYUP;\n        SendInput(1, &amp;ip, sizeof(ip));\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1469668348, "last_edit_date": 1495541203, "creation_date": 1469668348, "answer_id": 38625599, "question_id": 38622583, "link": "https://stackoverflow.com/questions/38622583/why-isnt-sendinput-working/38625599#38625599", "title": "Why isn&#39;t SendInput() working?", "body": "<p>Like Barmak said, you are mixing ANSI and UNICODE together in an improper manner, and you are not managing the input flags correctly.</p>\n\n<p>When sending string characters, it is better to send UTF-16 codeunits via the <code>KEYEVENTF_UNICODE</code> flag instead of using scan codes or virtual keys.</p>\n\n<p>You should also call <code>SendInput()</code> <em>one time</em> with multiple <code>INPUT</code> structs for the entire string, so that all of the characters get sent together as a single unit and cannot be interrupted by, or intermixed with, other input events that are generated by the user or other apps/threads at the same time.</p>\n\n<p>See <a href=\"https://stackoverflow.com/a/31307429/65863\">my answer</a> to <a href=\"https://stackoverflow.com/questions/31305404/\">Sending Two or more chars using SendInput</a>.</p>\n\n<p>For example:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;Windows.h&gt;\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nvoid presskeys(const std::wstring &amp;str)\n{\n    int len = str.length();\n    if (len == 0) return;\n\n    std::vector&lt;INPUT&gt; in(len*2);\n    ZeroMemory(&amp;in[0], in.size()*sizeof(INPUT));\n\n    int i = 0, idx = 0;\n    while (i &lt; len)\n    {\n        WORD ch = (WORD) str[i++];\n\n        if ((ch &lt; 0xD800) || (ch &gt; 0xDFFF))\n        {\n            in[idx].type = INPUT_KEYBOARD;\n            in[idx].ki.wScan = ch;\n            in[idx].ki.dwFlags = KEYEVENTF_UNICODE;\n            ++idx;\n\n            in[idx] = in[idx-1];\n            in[idx].ki.dwFlags |= KEYEVENTF_KEYUP;\n            ++idx;\n        }\n        else\n        {\n            in[idx].type = INPUT_KEYBOARD;\n            in[idx].ki.wScan = ch;\n            in[idx].ki.dwFlags = KEYEVENTF_UNICODE;\n            ++idx;\n\n            in[idx].type = INPUT_KEYBOARD;\n            in[idx].ki.wScan = (WORD) str[i++];\n            in[idx].ki.dwFlags = KEYEVENTF_UNICODE;\n            ++idx;\n\n            in[idx] = in[idx-2];\n            in[idx].ki.dwFlags |= KEYEVENTF_KEYUP;\n            ++idx;\n\n            in[idx] = in[idx-2];\n            in[idx].ki.dwFlags |= KEYEVENTF_KEYUP;\n            ++idx;\n        }\n    }\n\n    SendInput(in.size(), &amp;in[0], sizeof(INPUT));\n}\n\nint main()\n{\n    std::wcout &lt;&lt; L\"Enter a string and press enter:\\n\";\n    std::wstring str;\n    if (std::getline(std::wcin, str))\n    {\n        presskeys(str);\n        std::wcout &lt;&lt; L\"Done!\\n\";\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5849798, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/e00cd030c348d5d7be572c3206bff9a0?s=128&d=identicon&r=PG&f=1", "display_name": "TheRniz", "link": "https://stackoverflow.com/users/5849798/therniz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1329, "favorite_count": 0, "accepted_answer_id": 38623569, "answer_count": 2, "score": 0, "last_activity_date": 1469668348, "creation_date": 1469651177, "question_id": 38622583, "link": "https://stackoverflow.com/questions/38622583/why-isnt-sendinput-working", "title": "Why isn&#39;t SendInput() working?", "body": "<p>I want to use the SendInput() function to automate pressing some keys. </p>\n\n<p>My code:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;Windows.h&gt;\n\nusing std::cin;\nusing std::cout;\nusing std::string;\n\nvoid presskeys(string s){\n    INPUT ip;\n    ip.ki.wScan = 0;\n    ip.ki.time = 0;\n    ip.ki.dwExtraInfo = 0;\n    HKL kbl = GetKeyboardLayout(0);\n    for (unsigned int i = 0; i &lt; s.length(); ++i) {\n        ip.type = INPUT_KEYBOARD;\n        char c = s[i];\n        int vk = VkKeyScanEx((WCHAR)c, kbl);\n        ip.ki.wVk = vk;\n        SendInput(1, &amp;ip, sizeof(ip));\n        ip.ki.dwFlags = KEYEVENTF_KEYUP;\n        SendInput(1, &amp;ip, sizeof(ip));\n    }\n}\nint main()\n{\n    cout &lt;&lt; \"Enter a string!\\n\";\n    string str;\n    cin &gt;&gt; str;\n    Sleep(5000);\n    presskeys(str);\n    cout &lt;&lt; \"Done!\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>I boot up the program and enter a string, only for nothing to happen. Where did it go wrong?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1469651363, "post_id": 38622578, "comment_id": 64630822, "body": "dont post full code. Please read about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and provide one."}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1469651383, "post_id": 38622578, "comment_id": 64630828, "body": "What is the signature for Matchups()?"}, {"owner": {"reputation": 181, "user_id": 1016708, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61224656acdc8af5e1578367b46e0f20?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/1016708/jeff"}, "reply_to_user": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1469651621, "post_id": 38622578, "comment_id": 64630948, "body": "@Niall std::vector&lt;int&gt; Matchups() const;"}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1469651874, "post_id": 38622578, "comment_id": 64631069, "body": "Ok. The posted answer covers this"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 1016708, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61224656acdc8af5e1578367b46e0f20?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/1016708/jeff"}, "edited": false, "score": 0, "creation_date": 1469651924, "post_id": 38622604, "comment_id": 64631100, "body": "Thanks, @Gill.  I understand what you mean.  Just wondering if there&#39;s a place where I could read more about what&#39;s causing this.  Typing &quot;dangling iterator&quot; in google returns some scary pictures."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 181, "user_id": 1016708, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61224656acdc8af5e1578367b46e0f20?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/1016708/jeff"}, "edited": false, "score": 0, "creation_date": 1469652160, "post_id": 38622604, "comment_id": 64631212, "body": "@Jeff <code>begin()</code> returns an iterator, which is basically just a pointer with some member functions to the start of the vector. Because you chain your calls <code>Matchups().begin()</code> the value returned by <code>Matchups()</code> is a temporary that&#39;s destroyed after the <code>begin()</code> call. So the <code>begin()</code> call is done, the temporary is destroyed, and now you&#39;re left with a pointer (iterator) to a place of memory (the start of the vector) that is deleted. Trying to dereference that is undefined behaviour."}, {"owner": {"reputation": 181, "user_id": 1016708, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61224656acdc8af5e1578367b46e0f20?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/1016708/jeff"}, "edited": false, "score": 0, "creation_date": 1469654845, "post_id": 38622604, "comment_id": 64632574, "body": "If I could up-vote more than once I would.  Thanks very much, you&#39;ve been extraordinarily helpful."}, {"owner": {"reputation": 181, "user_id": 1016708, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61224656acdc8af5e1578367b46e0f20?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/1016708/jeff"}, "edited": false, "score": 0, "creation_date": 1469656119, "post_id": 38622604, "comment_id": 64633155, "body": "just thinking about it now, if the location the iterator was pointing to vanishes then why does it print correct values after printing 0 for only the first two?"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 181, "user_id": 1016708, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61224656acdc8af5e1578367b46e0f20?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/1016708/jeff"}, "edited": false, "score": 0, "creation_date": 1469656201, "post_id": 38622604, "comment_id": 64633186, "body": "@Jeff because it&#39;s undefined behaviour, anything can happen. Don&#39;t try to make sense out of something thats undefined."}, {"owner": {"reputation": 181, "user_id": 1016708, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61224656acdc8af5e1578367b46e0f20?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/1016708/jeff"}, "edited": false, "score": 0, "creation_date": 1469656232, "post_id": 38622604, "comment_id": 64633201, "body": "Fair enough. Thanks again"}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": true, "score": 3, "last_activity_date": 1469651267, "creation_date": 1469651267, "answer_id": 38622604, "question_id": 38622578, "link": "https://stackoverflow.com/questions/38622578/c-first-two-elements-not-printing-properly-when-using-iterator/38622604#38622604", "title": "C++ First two elements not printing properly when using iterator", "body": "<pre><code>for (std::vector&lt;int&gt;::const_iterator iter = SampleVec.Matchups().begin(); iter != SampleVec.Matchups().end(); iter++){\n    std::cout &lt;&lt; *iter &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><code>begin()</code> returns the iterator of the beginning of a temporary <code>std::vector</code> returned by <code>Matchups()</code>. At the moment of using <code>iter</code> it's a dangling iterator because the temporary has been destroyed and thus you have Undefined Behaviour.</p>\n\n<p>You have to store the result before trying to access it through an iterator like you do in example 2.</p>\n"}], "owner": {"reputation": 181, "user_id": 1016708, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61224656acdc8af5e1578367b46e0f20?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/1016708/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 38622604, "answer_count": 1, "score": 0, "last_activity_date": 1469651267, "creation_date": 1469651159, "last_edit_date": 1495540289, "question_id": 38622578, "link": "https://stackoverflow.com/questions/38622578/c-first-two-elements-not-printing-properly-when-using-iterator", "title": "C++ First two elements not printing properly when using iterator", "body": "<p>I have looked for this and found something here: <a href=\"https://stackoverflow.com/questions/18624060/variable-not-printing-on-iteration\">Variable not printing on iteration</a> but I'm not sure if that necessarily applies.</p>\n\n<p>What I have going on is my program correctly prints all values when I call it like this:</p>\n\n<pre><code>for (int i = 0; i &lt; SampleVec.Matchups().size(); ++i){\n    std::cout &lt;&lt; SampleVec.Matchups()[i] &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>or when I call it like this:</p>\n\n<pre><code>std::vector&lt;int&gt; temp;\ntemp = SampleVec.Matchups();\nfor (std::vector&lt;int&gt;::const_iterator iter = temp.begin(); iter != temp.end(); iter++){\n    std::cout &lt;&lt; *iter &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>but when I write it like this</p>\n\n<pre><code>for (std::vector&lt;int&gt;::const_iterator iter = SampleVec.Matchups().begin(); iter != SampleVec.Matchups().end(); iter++){\n    std::cout &lt;&lt; *iter &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>the first two values show up as a 0 and the rest print correctly.  In the link I posted they talk about stripping newlines from the input, but I don't know if that applies here or even how to do that.  I can post full code if needed to run and see the functionality in action.</p>\n"}, {"tags": ["c++", "arrays", "optimization", "sse", "simd"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1469651802, "post_id": 38622534, "comment_id": 64631035, "body": "On something like a skylake, <code>rsqrtps</code> has 4 cycles latency, but is pipelined so a new <code>rsqrtps</code> can be issued every cycle. You could possibly get some speedup by unrolling the loop up to four times, but since the results are stored right away rather than processed further, register renaming and out-of-order execution probably mean that you&#39;re not getting much better than what you have now."}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469652339, "post_id": 38622534, "comment_id": 64631304, "body": "If I write a parallel version of this code, do I have to think about anything except false sharing?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469652592, "post_id": 38622534, "comment_id": 64631438, "body": "You&#39;ll need to make sure to avoid data-races. For example, if you partition the arrays, make sure there is no overlap. While you&#39;d think that writing the same result to the same place twice would be OK, it is not, unless you declare the array as atomic."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1469678118, "post_id": 38622534, "comment_id": 64638289, "body": "Your code only appears to require <code>size</code> to be a multiple of 4 floats to make the array hold a whole number of vectors of floats."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469678237, "post_id": 38622534, "comment_id": 64638322, "body": "@EOF: <code>rsqrt</code> isn&#39;t part of a loop-carried dependency chain, so its 4c latency isn&#39;t relevant.  Register renaming makes it a non-issue.  Unrolling is needed for a different reason: loop overhead and fused-domain uop throughput."}], "answers": [{"comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 4, "creation_date": 1469654629, "post_id": 38623345, "comment_id": 64632465, "body": "There&#39;s no way that can be faster than <code>rsqrtps</code>, the two multiplications alone are already slower"}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1469654912, "post_id": 38623345, "comment_id": 64632603, "body": "@harold I suspect that as well, but would be interested in measurements"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1469659433, "post_id": 38623345, "comment_id": 64634358, "body": "You realize that a) the code you&#39;ve cited has undefined behavior in C, and b) the point of the undefined behavior is that it tries to interpret the bitwise-representation of the <code>float</code> argument as <code>int</code>, in sharp contrast to your proposed code which converts the value?"}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469666919, "post_id": 38623345, "comment_id": 64636059, "body": "@EOF <code>the code you&#39;ve cited has undefined behavior in C</code> - sure, but we&#39;re talking about very specific platform, where it might work (famous last words). <code>in sharp contrast to your proposed code which converts the value</code> - aha, you&#39;re right. Updated answer with the cast intrinsic."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1469674002, "post_id": 38623345, "comment_id": 64637413, "body": "re: undefined behaviour:  use unions for type-punning in GNU C, not pointer-casts.  pointer-casts really do break, and unions are guaranteed to work in gcc, IIRC."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1469674195, "post_id": 38623345, "comment_id": 64637447, "body": "How many bits of precision does this have, before and after the Newton-Raphson iteration?  <a href=\"http://www.felixcloutier.com/x86/RSQRTPS.html\" rel=\"nofollow noreferrer\"><code>rsqrtps</code> has an error of about +/-12 bits</a>.  See also <a href=\"http://stackoverflow.com/a/1528751/224132\">stackoverflow.com/a/1528751/224132</a>."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1469713754, "post_id": 38623345, "comment_id": 64659712, "body": "@PeterCordes take a look at the graph at &quot;Accuracy&quot; section in <a href=\"https://en.wikipedia.org/wiki/Fast_inverse_square_root\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Fast_inverse_square_root</a>"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1469715260, "post_id": 38623345, "comment_id": 64660978, "body": "So according to that, the relative error is on the order of 0.175% after one Newton-Raphson iteration.  <code>log(100&#47;0.175)&#47;log(2) = 9.16</code> bits.  So after an NR iteration, this is only a couple bits more accurate than raw rsqrtps (which only requires SSE).  <code>rsqrtps</code> + a NR iteration is probably higher throughput than this with the same NR iteration.  But for latency, this is neat if 9 bits relative error is ok, but raw <code>rsqrt</code> isn&#39;t.  <code>psrad</code> -&gt; <code>psubd</code> -&gt; 1 cycle bypass delay from int-vec to fp-vec is two cycle shorter than 5 cycle cycle latency of <code>rsqrtps</code> (pre-Skylake), but more uops."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1469717611, "post_id": 38623345, "comment_id": 64662866, "body": "@PeterCordes One could add another NR iteration for more accuracy, it is pretty much copy of the last line. Yes, more uops and I suspect it will be slower than <code>_mm_rsqrt_ps</code>, but we&#39;re talking about performance, measurement is the king."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1469718098, "post_id": 38623345, "comment_id": 64663259, "body": "@PeterCordes wrt UB, in C yes, union might be better. With SSE2 there is cast operator which does not map into any instruction/uops - basically, FP vector would be reinterpreted as Int vector and vice versa"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1469718100, "post_id": 38623345, "comment_id": 64663260, "body": "For simple sequences that aren&#39;t memory bound, static analysis can often predict performance pretty accurately, especially on Intel SnB-family CPUs that usually have few weird slowdowns for code that bottlenecks on execution units or fused-domain uop throughput.  See <a href=\"http://agner.org/optimize/\" rel=\"nofollow noreferrer\">Agner Fog&#39;s microarch pdf</a>.  Also, Intel&#39;s IACA tool is useful.  Doing another two NR iterations would still only be as accurate as <code>rsqrtps</code> + one NR iteration, so that&#39;s obviously not worth considering (unless you use double-precision floats, to get more than 28 bits of mantissa)."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1469718319, "post_id": 38623345, "comment_id": 64663412, "body": "And yes, intrinsics like <code>castps_si128</code> are the way to go for manual vectorization.  I was only talking about type-punning the pure C <code>int</code> and <code>float</code> types."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1469718579, "post_id": 38623345, "comment_id": 64663618, "body": "BTW, I think you used <code>_mm_add_epi32</code> where the C source has a <code>-</code>.  I didn&#39;t really read it carefully, though, so I&#39;ll just leave a comment instead of editing myself."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1469733490, "post_id": 38623345, "comment_id": 64672895, "body": "@PeterCordes shouldn&#39;t put out code on the road without testing. Anyway, updated with code tested with VS2015 against Quake version and 1/sqrtf(). Still interested in performance checks though..."}], "tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": false, "score": 1, "last_activity_date": 1469735467, "last_edit_date": 1469735467, "creation_date": 1469654267, "answer_id": 38623345, "question_id": 38622534, "link": "https://stackoverflow.com/questions/38622534/faster-approximate-reciprocal-square-root-of-an-array/38623345#38623345", "title": "Faster approximate reciprocal square root of an array", "body": "<p>You have to measure it, of course, but there is known code to compute (not very precise) inverse square root, check <a href=\"https://www.beyond3d.com/content/articles/8/\" rel=\"nofollow\">https://www.beyond3d.com/content/articles/8/</a></p>\n\n<pre><code>float InvSqrt (float x) {\n    float xhalf = 0.5f*x;\n    int i = *(int*)&amp;x;\n    i = 0x5f3759df - (i&gt;&gt;1);\n    x = *(float*)&amp;i;\n    x = x*(1.5f - xhalf*x*x);\n    return x;\n}\n</code></pre>\n\n<p>Tested (with VS2015 and GCC 5.4.0) conversion to SSE2, <a href=\"https://github.com/Kri-Ol/InvSqrtSSE2\" rel=\"nofollow\">link</a></p>\n\n<pre><code>__m128 InvSqrtSSE2(__m128 x) {\n    __m128 xhalf = _mm_mul_ps(x, _mm_set1_ps(0.5f));\n\n    x = _mm_castsi128_ps(_mm_sub_epi32(_mm_set1_epi32(0x5f3759df), _mm_srai_epi32(_mm_castps_si128(x), 1)));\n\n    return _mm_mul_ps(x, _mm_sub_ps(_mm_set1_ps(1.5f), _mm_mul_ps(xhalf, _mm_mul_ps(x, x))));\n}\n</code></pre>\n\n<p>UPDATE I</p>\n\n<p>Mea culpa! Thanks to @EOF, who noticed improper conversion, those are replaced with casts</p>\n"}, {"comments": [{"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 1, "creation_date": 1469667296, "post_id": 38624943, "comment_id": 64636114, "body": "Mmm... Manual prefetch for linear RAM access pattern doesn&#39;t make sense, though again I would like to take a look at measurements"}, {"owner": {"reputation": 1457, "user_id": 2981588, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f4f2945d6e635729ef90306b3fc473d?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/2981588/tim"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1469669352, "post_id": 38624943, "comment_id": 64636514, "body": "It&#39;s less about the act of prefetching and more about hinting to the CPU to keep data out of the cache. If the hint is used, the CPU won&#39;t do any evictions."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1469678005, "post_id": 38624943, "comment_id": 64638264, "body": "Does <code>prefetchNTA</code> really make a difference on WB memory on real hardware?  I haven&#39;t tested it, but my guess is that  they could insert newly-loaded lines at the LRU position instead of the MRU position of set-associative caches.  See <a href=\"http://stackoverflow.com/questions/35516878/acquire-release-semantics-with-non-temporal-stores-on-x64\">the NT loads section of my answer here</a> .  Also, note that the OP&#39;s problem size of 6250 * 16 floats * 4B/float is only 2/3rds of L2 cache size.  Bypassing cache is probably a bad idea here."}, {"owner": {"reputation": 1457, "user_id": 2981588, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f4f2945d6e635729ef90306b3fc473d?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/2981588/tim"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1469718545, "post_id": 38624943, "comment_id": 64663593, "body": "@PeterCordes See my updated post for some numbers. At such a small problem size, it isn&#39;t really beneficial and (unsurprisingly) depends on the hardware used."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1469720125, "post_id": 38624943, "comment_id": 64664758, "body": "i3-3120M is an IvyBridge, which has <a href=\"http://www.agner.org/optimize/blog/read.php?i=285\" rel=\"nofollow noreferrer\">a performance bug with prefetch instruction throughput</a> that isn&#39;t present in SnB or HSW.    See also <a href=\"http://stackoverflow.com/questions/32103968/non-temporal-loads-and-the-hardware-prefetcher-do-they-work-together#comment52133238_32118466\">Mysticial&#39;s confirmation of avoiding prefetch on IvB</a>.  You&#39;d probably have gotten similar results on SnB or even Nehalem as on your Haswell."}, {"owner": {"reputation": 1457, "user_id": 2981588, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f4f2945d6e635729ef90306b3fc473d?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/2981588/tim"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1469722450, "post_id": 38624943, "comment_id": 64666459, "body": "@PeterCordes I was unaware of the prefetch bug. That&#39;s good to know!"}], "tags": [], "owner": {"reputation": 1457, "user_id": 2981588, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f4f2945d6e635729ef90306b3fc473d?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/2981588/tim"}, "is_accepted": false, "score": 3, "last_activity_date": 1469718494, "last_edit_date": 1469718494, "creation_date": 1469663167, "answer_id": 38624943, "question_id": 38622534, "link": "https://stackoverflow.com/questions/38622534/faster-approximate-reciprocal-square-root-of-an-array/38624943#38624943", "title": "Faster approximate reciprocal square root of an array", "body": "<p>Because this is a streaming calculation with very low arithmetic intensity, you are almost certainly memory bound. You will likely find a measurable speedup if you use non-temporal loads and stores.</p>\n\n<pre><code>// Hint to the CPU that we don't want to use the cache\n// Be sure to update this if you use manual loop unrolling\n_mm_prefetch(reinterpret_cast&lt;char*&gt;(ar_in+4), _MM_HINT_NTA);\n\n// Hint to the CPU that we don't need to write back through the cache\n_mm_stream_ps(ar_out_now,xmm0);\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>I ran some tests to see what things look like on different hardware. Unsurprisingly, the results are quite sensitive to the hardware in use. I would posit that it is likely due to the increased number of read/write buffers in modern CPUs.</p>\n\n<p>All code was compiled using gcc-6.1 with</p>\n\n<pre><code>gcc -std=c++14 -O3 -march=native -mavx -mfpmath=sse -ffast-math\n</code></pre>\n\n<p>Intel Core i3-3120M @ 2.5GHz; 3MB cache</p>\n\n<pre><code>OP's code:               350 +- 10 milliseconds\nNTA Prefetch:            360 +- 5 milliseconds\nNTA Prefetch+NTA store:  430 +- 10 milliseconds\n</code></pre>\n\n<p>Intel Core i7-6500U CPU @ 2.50GHz; 4MB cache</p>\n\n<pre><code>OP's code:               205 +- 5 milliseconds\nNTA Prefetch:            220 +- 2 milliseconds\nNTA Prefetch+NTA store:  200 +- 5 milliseconds\n</code></pre>\n\n<p>Increasing the problem size to 2MB, the NTA Prefetch+NTA store sees a ~30% decrease in runtime over OP's solution.</p>\n\n<p>Results: The problem size is too small to substantially benefit from NTA. On older architectures, it is detrimental. On newer architectures, it is on par with the OP's solution.</p>\n\n<p>Conclusion: Probably not worth the extra effort in this case.</p>\n"}, {"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1469692147, "post_id": 38626539, "comment_id": 64644397, "body": "One interesting thing: According to Agner Fog&#39;s instruction tables, you&#39;re better off using scalar <code>rsqrtss</code> for throughput on Intel Atom, which is hilarious if true."}], "tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 4, "last_activity_date": 1469678360, "last_edit_date": 1495535630, "creation_date": 1469676041, "answer_id": 38626539, "question_id": 38622534, "link": "https://stackoverflow.com/questions/38622534/faster-approximate-reciprocal-square-root-of-an-array/38626539#38626539", "title": "Faster approximate reciprocal square root of an array", "body": "<p>How big is your array of floats?  If it's already hot in L1 (or maybe L2), gcc5.3 output for this code bottlenecks on uop throughput on modern Intel CPUs, since it makes a loop with 6 fused-domain uops that does one vector per iteration.  (So it will run at one vector per 2 cycles).</p>\n\n<p>To achieve 1 vector per clock throughput on modern Intel CPUs, <strong>you need the loop to be unrolled</strong> (see below for why non-unrolled asm can't work).  Having the compiler do it for you is probably good (instead of doing it by hand in the C++ source).  e.g. use profile-guided optimization (<code>gcc -fprofile-use</code>), or just blindly use <code>-funroll-loops</code>.</p>\n\n<hr>\n\n<p>16 bytes per clock is enough in theory to saturate main memory bandwidth with one core.  However, IIRC Z Boson has observed better bandwidth from using multiple cores, probably because multiple cores keep more requests outstanding, and a stall on one core doesn't leave memory idle.  If the input is hot in L2 on a core, though, it's probably best to process the data using that core.</p>\n\n<p>On Haswell or later, 16 bytes loaded and stored per clock is only half of L1 cache bandwidth, so you need an AVX version of this to max per-core bandwidth.</p>\n\n<p><strong>If you bottleneck on memory, <a href=\"https://stackoverflow.com/a/1528751/224132\">you might want to do a Newton-Raphson iteration to get a nearly-full accuracy <code>1/sqrt(x)</code></a>, especially if you use multiple threads for a big array.</strong>  (Because then it's ok if a single thread can't sustain one load+store per clock.)</p>\n\n<p>Or maybe just use <code>rsqrt</code> on the fly when loading this data later.  It's <em>very</em> cheap, with high throughput, but still latency similar to an FP add.  Again, if it's a big array that doesn't fit in cache, increasing computational intensity by doing fewer separate passes over the data is a big deal.  (<a href=\"https://en.wikipedia.org/wiki/Loop_tiling\" rel=\"nofollow noreferrer\">Cache Blocking aka Loop Tiling</a> would also be a good idea, if you can do so: run multiple steps of your algorithm on a cache-sized chunk of your data.)</p>\n\n<p>Only use cache-bypassing NT stores as a last resort if you can't find a way to make effective use of cache.  It's much better if you can convert some data that you're about to use, so it's in cache when it's next used.</p>\n\n<hr>\n\n<p>The main loop (from <a href=\"http://gcc.godbolt.org/#compilers:!((compiler:g530,options:&#39;-std%3Dgnu%2B%2B11+-Wall+-Wextra++-O3+-fverbose-asm+-ffast-math+-march%3Dnehalem+-mtune%3Dhaswell&#39;,sourcez:MQSwdgxgNgrgJgUwAQB4QHsDOAXATggQwFsA%2BAKFElkVQSKPD3ADoALcy6eZFbEIhG3JkYmcAHMkYYgkwAHAhGQ44AbjIA3dCDhI5uRgH0AHvQAUhw0QCMAJgAcSU0QCUAbzJIvSAGZR0BNhI6DDYANoALAC66t5IVkSGOOj4MIZymGYh2AA0zi6x3oxIIIVePilIZiBIALxIAAyqJahIEc0A1B0gLkgqAFz9ENmoKMGhYSBRo0gARHNlfdhwg8OhMwP9CGBwUOoAvmSa2rr6RgS4uGZ%2BAdgAVHp4OX0gAF4IhkFi7%2B6e3t8fIKlP7lFLVOqNZo1MYAzrdX5xOJrIIoMZyPCTaaouYLEFIQ5IkbY7a7A5HYpEAjgMxaHQI/5vQEvd4QgBstgArA0kA9rKzFnEAPSCpDYVggTBIVgESXYdBIABGyCIMCgfDkUGQ6B8SD5eIBnyQ%2BDkhCC9WsDUtTTxQpF2FkQQtVqQEAAntBZMEdWLkMNEHiboEHhdDOAIdd/EGXAQoCBxGAEHBDDH/BAzHzngC7gDtRHbi4CgHI/ckCGRvU81GY3GE0mU%2Bg0xnmQhs4zc4HsAXFsKfCAoFBRQ6kHBAgQSmA5aLWMhwHJ1hdcARXXjhT7h6OSpKCGBS5cl169FgQHwNMgwDAiErcJhmPrGYbgXEKrgqjV6k0WjDGXCeh5Ed4Q3ATFwxADprF6B5qjAws4gJbxhX0BAFHwXxKnwCAQDkEAIBjPoAEcYAuZBcHQdBsFvOJLBsBwnHoa04gNL5717YwISzHMfErTtBQ4iwrDsewYO8Dtg1wUMwEMEkvHqQCdw6ZtDBYxYRN3QxskMMB0AAd2U4tRPEjTtO7QU%2BAYMBxH1PAYAgIJTNkE0IFFOQkmwC5cicySdkWN8jSQ01FmgBsAGtDHEBBsDsswAGEABkAHkooAaUMABZOKADk4oAFQygBJKLngAMmwZycDcoSvGFMrcFs/gJDxLTxU1MwAFoWt/G0ALE9TNK0iEy1CAVhLBWTDL6mSxPAIb/1G3qkAAQgmgySWmxFZu0pAOnqCJngG7Axq2iJ6X/W0IjYttOKogSXB4i6uIqk6vGcbl6gSQxIyTDIzHWrSHse4VkRmWYPtooh%2BlxR7bTOCcTHMZ6/pO56ITe688Jq9JMnh1bbUB7FZlRmrQfB2ZsfgwVof25wzCxzr/ze5J8Ax77utCMa8johGvDgrmV0FKTTPqpFUxCsKIv4BBovipLUoy7K8oKpBiuckkHrgEIFU1UU6vMgL0DAHBh3VzXpE0iEGmYK1LYaax1DxAXzPDMw1ZgDWEBcMwSs8uBmGwDQkgQRykBajzqvI33/cclxabieSPeVnYfb9/WA6DkPXJqxONMwAOIKkbd0Bu41/KOQl1jxuJ7ckE0XzdD1iZmSuZhJPYVwePFcbGWZZ3nPdXWJxYKeTS5mfEzNGQeju5myOcggXJd%2B7xQeFxH7IcgBB67kFXmfHwZU6ADXeR/AB6d4QCW9oe/BsBgXAd2tfYgAA)),filterAsm:(commentOnly:!t,directives:!t,intel:!t,labels:!t),version:3\" rel=\"nofollow noreferrer\"><code>.L31</code> to <code>jne .L31</code> on the Godbolt compiler explorer</a>) is 6 uops for Intel SnB-family CPUs, because <a href=\"https://stackoverflow.com/questions/26046634/micro-fusion-and-addressing-modes/31027695#31027695\">indexed addressing modes don't micro-fuse</a>.  (This isn't yet documented in <a href=\"http://agner.org/optimize/\" rel=\"nofollow noreferrer\">Agner Fog's microarch pdf</a>, unfortunately.)</p>\n\n<p>It's 4 fused-domain uops on Nehalem, with only three ALU uops, so Nehalem should run this at 1 per clock.</p>\n\n<pre><code>.L31:    # the main loop: 6 uops on SnB-family, 4 uops on Nehalem\n    rsqrtps xmm0, XMMWORD PTR [rbx+rax]       # tmp127, MEM[base: ar_in_now_10, index: ivtmp.51_61, offset: 0B]\n    movaps  XMMWORD PTR [rbp+0+rax], xmm0       # MEM[base: ar_out_now_12, index: ivtmp.51_61, offset: 0B], tmp127\n    add     rax, 16   # ivtmp.51,\n    cmp     rax, 100000       # ivtmp.51,\n    jne     .L31      #,\n</code></pre>\n\n<p>Since you want to write a separate destination, there's no way to get the loop down to 4 fused-domain uops so it can run at one vector per clock without unrolling.  (Both the load and the store need to be one-register addressing modes, so the trick of using <code>src - dst</code> indexed by <code>current_dst</code> instead of incrementing <code>src</code> doesn't work).</p>\n\n<p>Modifying your C++ so gcc would use a pointer increment would only save one uop, because you have to increment src and dst.  i.e. <code>float *endp = start + length;</code> and <code>for (p = start ; p &lt; endp ; p+=4) {}</code> would make a loop like</p>\n\n<pre><code>.loop:\n    rsqrtps  xmm0, [rsi]\n    add      rsi, 16\n    movaps   [rdi], xmm0\n    add      rdi, 16\n    cmp      rdi, rbx\n    jne      .loop\n</code></pre>\n\n<p>Hopefully gcc will do something like this while unrolling, <strong>otherwise the <code>rsqrtps</code> + <code>movaps</code> will be 4 fused-domain uops on their own if they still use indexed addressing mode</strong>, and no amount of unrolling will make your loop run at one vector per clock.</p>\n"}], "owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 1, "accepted_answer_id": 38626539, "answer_count": 3, "score": 1, "last_activity_date": 1469735467, "creation_date": 1469651002, "last_edit_date": 1469720881, "question_id": 38622534, "link": "https://stackoverflow.com/questions/38622534/faster-approximate-reciprocal-square-root-of-an-array", "title": "Faster approximate reciprocal square root of an array", "body": "<p>How to calculate approximate reciprocal square root of an array faster on a cpu with popcnt and SSE4.2?</p>\n\n<p>The input is positive integers (ranges from 0 to about 200,000) stored in an array of floats.</p>\n\n<p>The output is an array of floats.</p>\n\n<p>Both arrays have correct memory alignment for sse.</p>\n\n<p>The code below only use 1 xmm register, runs on linux, and can be compiled by <code>gcc -O3 code.cpp -lrt -msse4.2</code></p>\n\n<p>Thank you.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;emmintrin.h&gt;\n#include &lt;time.h&gt;\n\nusing namespace std;\nvoid print_xmm(__m128 xmm){\n    float out[4];\n    _mm_storeu_ps(out,xmm);\n    int i;\n    for (i = 0; i &lt; 4; ++i) std::cout &lt;&lt; out[i] &lt;&lt; \" \";\n    std::cout &lt;&lt; std::endl;\n}\n\nvoid print_arr(float* ptr, size_t size){\n    size_t i;\n    for(i = 0; i &lt; size; ++i){\n        cout &lt;&lt; ptr[i] &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n}\n\nint main(void){\n    size_t size = 25000 * 4;\n        // this has to be multiple of 4\n    size_t repeat = 10000;\n        // test 10000 cycles of the code\n    float* ar_in = (float*)aligned_alloc(16, size*sizeof(float));\n    float* ar_out = (float*)aligned_alloc(16, size*sizeof(float));\n    //fill test data into the input array\n    //the data is an array of positive numbers.\n    size_t i;\n    for (i = 0; i &lt; size; ++i){\n        ar_in[i] = (i+1) * (i+1);\n    }\n    //prepare for recipical square root.\n    __m128 xmm0;\n    size_t size_fix = size*sizeof(float)/sizeof(__m128);\n    float* ar_in_end  = ar_in + size_fix;\n    float* ar_out_now;\n    float* ar_in_now;\n    //timing\n    struct timespec tp_start, tp_end;\n    i = repeat;\n    clock_gettime(CLOCK_MONOTONIC, &amp;tp_start);\n    //start timing\n    while(--i){\n        ar_out_now = ar_out;\n        for(ar_in_now = ar_in;\n            ar_in_now != ar_in_end;\n            ar_in_now += 4, ar_out_now+=4){\n            //4 = sizeof(__m128)/sizeof(float);\n            xmm0 = _mm_load_ps(ar_in_now);\n            //cout &lt;&lt; \"load xmm: \";\n            //print_xmm(xmm0);\n            xmm0 = _mm_rsqrt_ps(xmm0);\n            //cout &lt;&lt; \"rsqrt xmm: \";\n            //print_xmm(xmm0);\n            _mm_store_ps(ar_out_now,xmm0);\n        }\n    }\n    //end timing\n    clock_gettime(CLOCK_MONOTONIC, &amp;tp_end);\n    double timing;\n    const double nano = 0.000000001;\n\n    timing = ((double)(tp_end.tv_sec  - tp_start.tv_sec )\n           + (tp_end.tv_nsec - tp_start.tv_nsec) * nano)/repeat;\n\n    cout &lt;&lt; \"    timing per cycle: \" &lt;&lt; timing &lt;&lt; endl;\n    /* \n    cout &lt;&lt; \"input array: \";\n    print_arr(ar_in, size);\n    cout &lt;&lt; \"output array: \";\n    print_arr(ar_out,size);\n    */\n    //free mem\n    free(ar_in);\n    free(ar_out);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "mktime", "time.h"], "comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1469651731, "post_id": 38622528, "comment_id": 64631014, "body": "<code>msgTime</code> is <code>time_t</code>, but <code>printf()</code> is trying to print a <code>double</code>... cast it first."}, {"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1469652090, "post_id": 38622528, "comment_id": 64631179, "body": "time_t is generally an integer value. You should first transform your C code into C++: use std::cout to avoid any cast"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1469652265, "post_id": 38622528, "comment_id": 64631263, "body": "Look at the result of <code>Tokenize</code> before accusing <code>mktime</code>"}, {"owner": {"reputation": 21, "user_id": 6646623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e49da7e3502cb08a4b123be5d921f2c?s=128&d=identicon&r=PG&f=1", "display_name": "DOleary", "link": "https://stackoverflow.com/users/6646623/doleary"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1469652304, "post_id": 38622528, "comment_id": 64631283, "body": "@Dmitri Thanks, that was actually the issue. Not sure why I did, but I was expecting it to be an implicit cast. Oh well."}, {"owner": {"reputation": 21, "user_id": 6646623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e49da7e3502cb08a4b123be5d921f2c?s=128&d=identicon&r=PG&f=1", "display_name": "DOleary", "link": "https://stackoverflow.com/users/6646623/doleary"}, "edited": false, "score": 0, "creation_date": 1469652342, "post_id": 38622528, "comment_id": 64631305, "body": "Tokenize is valid, and outputs as expected @DieterL&#252;cking"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469653918, "post_id": 38622528, "comment_id": 64632086, "body": "<code>std::string input</code> is not valid C code."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469659084, "post_id": 38622528, "comment_id": 64634246, "body": "<code>printf(&quot;time: %f\\n&quot;,msgTime);</code> --&gt; <code>cout &lt;&lt; msgTime;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469654082, "post_id": 38622910, "comment_id": 64632175, "body": "Good answer.  <code>time_t</code> is some scalar type (<code>int</code>, <code>long long</code>, <code>long double</code>, etc.)  Casting to <code>(double)</code> is the right approach if code needs <code>printf()</code> to print as a <code>double</code>.  Our maybe use <code>cout &lt;&lt;</code> as OP&#39;s code is likely C++."}], "tags": [], "owner": {"reputation": 21, "user_id": 6646623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e49da7e3502cb08a4b123be5d921f2c?s=128&d=identicon&r=PG&f=1", "display_name": "DOleary", "link": "https://stackoverflow.com/users/6646623/doleary"}, "is_accepted": true, "score": 1, "last_activity_date": 1469652752, "last_edit_date": 1469652752, "creation_date": 1469652433, "answer_id": 38622910, "question_id": 38622528, "link": "https://stackoverflow.com/questions/38622528/mktime-returns-same-value-every-time/38622910#38622910", "title": "mktime returns same value every time", "body": "<p>The issue here was in trying to use the time_t (msgTime) value as a double, without casting.</p>\n\n<p>The solution is to simply cast msgTime to a double like so:</p>\n\n<pre><code>printf(\"time %f\\n\",(double)msgTime);\n</code></pre>\n\n<p>This makes the function:</p>\n\n<pre><code>ConvertTime(std::string input)\n{\n  std::vector&lt;std::string&gt; tokens;\n\n  //splits input into tokens\n  Tokenize(input, tokens);\n\n  int hrs = atoi( tokens.at(0).substr(0,2).c_str() );\n  int mins = atoi( tokens.at(0).substr(2,2).c_str() );\n  int secs = atoi( tokens.at(0).substr(4,2).c_str() );\n  int day = atoi( tokens.at(1).c_str() );\n  int month = atoi( tokens.at(2).c_str() );\n  int year = atoi( tokens.at(3).c_str() );\n\n  struct tm tm = {0};\n  time_t msgTime = 0;\n\n  tm.tm_sec = secs;\n  tm.tm_min = mins;\n  tm.tm_hour = hrs;\n  tm.tm_mday = day;\n  tm.tm_mon = month-1;\n  tm.tm_year = year-1900;\n  tm.tm_isdst = -1;\n  msgTime = mktime(&amp;tm);\n  printf(\"time: %f\\n\",(double)msgTime);\n\n}\n\nInput ex:\n154831.90,22,07,2016\n154832.10,22,07,2016\n154832.30,22,07,2016\n154832.50,22,07,2016\n154832.70,22,07,2016\n154832.90,22,07,2016\n154833.10,22,07,2016\n\nOutput ex:\n1469202511.00\n1469202512.00\n1469202512.00\n1469202512.00\n1469202512.00\n1469202512.00\n1469202513.00\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6646623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e49da7e3502cb08a4b123be5d921f2c?s=128&d=identicon&r=PG&f=1", "display_name": "DOleary", "link": "https://stackoverflow.com/users/6646623/doleary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 38622910, "answer_count": 1, "score": 1, "last_activity_date": 1469709119, "creation_date": 1469650983, "last_edit_date": 1469709119, "question_id": 38622528, "link": "https://stackoverflow.com/questions/38622528/mktime-returns-same-value-every-time", "title": "mktime returns same value every time", "body": "<p>I'm trying to convert a time given in the format HHMMSS.SS,DD,MM,YYYY into unix time. The problem is that then calling mktime, the same time_t is returned.</p>\n\n<pre><code>ConvertTime(std::string input)\n{\n  std::vector&lt;std::string&gt; tokens;\n\n  //splits input into tokens\n  Tokenize(input, tokens);\n\n  int hrs = atoi( tokens.at(0).substr(0,2).c_str() );\n  int mins = atoi( tokens.at(0).substr(2,2).c_str() );\n  int secs = atoi( tokens.at(0).substr(4,2).c_str() );\n  int day = atoi( tokens.at(1).c_str() );\n  int month = atoi( tokens.at(2).c_str() );\n  int year = atoi( tokens.at(3).c_str() );\n\n  struct tm tm = {0};\n  time_t msgTime = 0;\n\n  tm.tm_sec = secs;\n  tm.tm_min = mins;\n  tm.tm_hour = hrs;\n  tm.tm_mday = day;\n  tm.tm_mon = month-1;\n  tm.tm_year = year-1900;\n  tm.tm_isdst = -1;\n  msgTime = mktime(&amp;tm);\n  printf(\"time: %f\\n\",msgTime);\n\n}\n\nInput ex:\n154831.90,22,07,2016\n154832.10,22,07,2016\n154832.30,22,07,2016\n154832.50,22,07,2016\n154832.70,22,07,2016\n154832.90,22,07,2016\n154833.10,22,07,2016\n\nOutput ex:\n1469202560.00\n1469202560.00\n1469202560.00\n1469202560.00\n1469202560.00\n1469202560.00\n1469202560.00\n</code></pre>\n\n<p>I feel like I'm not initialize something, or the values aren't being changed, but the tm struct shouldn't be carrying over between calls of ConvertTime, so I'm not sure what the issue is.</p>\n"}, {"tags": ["c++", "qt", "stl", "stdstring"], "comments": [{"owner": {"reputation": 79, "user_id": 90735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17635abe61ef45b083aac414651a9942?s=128&d=identicon&r=PG", "display_name": "adapar", "link": "https://stackoverflow.com/users/90735/adapar"}, "edited": false, "score": 0, "creation_date": 1469740808, "post_id": 38622444, "comment_id": 64676483, "body": "I added some clarification about the issue. I also added a new comment to my answer."}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1469651169, "post_id": 38622445, "comment_id": 64630719, "body": "It isn&#39;t very clear how this answers your question."}, {"owner": {"reputation": 79, "user_id": 90735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17635abe61ef45b083aac414651a9942?s=128&d=identicon&r=PG", "display_name": "adapar", "link": "https://stackoverflow.com/users/90735/adapar"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1469740804, "post_id": 38622445, "comment_id": 64676482, "body": "This answers the updated question. The issue only occurs when using Qt without the C++11 configuration option enabled; C++ without Qt works fine."}], "tags": [], "owner": {"reputation": 79, "user_id": 90735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17635abe61ef45b083aac414651a9942?s=128&d=identicon&r=PG", "display_name": "adapar", "link": "https://stackoverflow.com/users/90735/adapar"}, "is_accepted": false, "score": 0, "last_activity_date": 1469650637, "last_edit_date": 1495539862, "creation_date": 1469650637, "answer_id": 38622445, "question_id": 38622444, "link": "https://stackoverflow.com/questions/38622444/stdstring-values-become-corrupted-in-qt-5/38622445#38622445", "title": "std::string values become corrupted in Qt 5", "body": "<p>After narrowing the possibilities to the passing of <code>std::string</code> as return values in Qt5, I found a similar problem here: <a href=\"https://stackoverflow.com/questions/23445132/stdstring-has-no-member-named-front\">'std::string' has no member named front [closed]</a></p>\n\n<p>It seems Qt5 must be explicitly configured to use C++11 STL. Thus, adding <code>CONFIG += c++11</code> solved my issue too.</p>\n"}], "owner": {"reputation": 79, "user_id": 90735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17635abe61ef45b083aac414651a9942?s=128&d=identicon&r=PG", "display_name": "adapar", "link": "https://stackoverflow.com/users/90735/adapar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "closed_date": 1469651269, "answer_count": 1, "score": 0, "last_activity_date": 1469740723, "creation_date": 1469650637, "last_edit_date": 1469740723, "question_id": 38622444, "link": "https://stackoverflow.com/questions/38622444/stdstring-values-become-corrupted-in-qt-5", "closed_reason": "Duplicate", "title": "std::string values become corrupted in Qt 5", "body": "<p>I am trying to use the <a href=\"http://presage.sourceforge.net\" rel=\"nofollow\">Presage</a> text-prediction platform in a Qt5 project but keep getting errors due to std::strings being corrupted. </p>\n\n<p>I have this class providing string contexts for the predictive system:</p>\n\n<pre><code>class SomeClass : public ParentClass\n{\npublic:\n    SomeClass(const std::string&amp; _past_context) : past_context(_past_context) { }\n\n    std::string get_past_stream() const {\n      return past_context;\n    }\n    std::string get_future_stream() const { return empty; }\n\nprivate:\n    const std::string&amp; past_context;\n    const std::string empty;\n\n};\n</code></pre>\n\n<p>This context is called inside the Presage code like this:</p>\n\n<pre><code>std::string ContextTracker::getToken(const int index) const\n{\n    std::stringstream pastStringStream(context_tracker_callback-&gt;get_past_stream());\n    ...\n}\n</code></pre>\n\n<p>If I send <code>past_context</code> to <code>std::out</code> inside the <code>get_past_stream</code> method, it shows the correct string. If I send the results of <code>get_past_stream</code> in the <code>getToken</code> method, I get corrupted data.</p>\n\n<p><strong>UPDATE [2016-07-28]:</strong></p>\n\n<p>To clarify the question and remove the duplicate tag: the issue only happens when using Qt5. Compiling with <code>g++</code> a test case consisting only of <code>SomeClass</code> and the Presage context caller works fine. It is when using the STL in Qt5 that the strings get corrupted after being used as return values.</p>\n"}, {"tags": ["c++", "sorting", "vector"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1469650530, "post_id": 38622297, "comment_id": 64630363, "body": "Sort you say? Use <code>std::sort</code>."}, {"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1469650557, "post_id": 38622297, "comment_id": 64630377, "body": "@CaptainObvlious you beat me to it. <a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/sort</a>"}, {"owner": {"reputation": 21, "user_id": 4843241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f764f402b0b36085ca6206ea25b458f1?s=128&d=identicon&r=PG&f=1", "display_name": "Bcmonks", "link": "https://stackoverflow.com/users/4843241/bcmonks"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1469650662, "post_id": 38622297, "comment_id": 64630425, "body": "@CaptainObvlious Which parameter would I sort by?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1469650677, "post_id": 38622297, "comment_id": 64630432, "body": "All. Write a comparator that satisfies strict weak ordering. Also, have you thought of using <code>std::set</code>?"}, {"owner": {"reputation": 21, "user_id": 4843241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f764f402b0b36085ca6206ea25b458f1?s=128&d=identicon&r=PG&f=1", "display_name": "Bcmonks", "link": "https://stackoverflow.com/users/4843241/bcmonks"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1469650844, "post_id": 38622297, "comment_id": 64630523, "body": "@LogicStuff I thought of using set, but I thought that you needed a unique key for every entry, and the text couldn&#39;t be the key because the same text could be printed multiple times on the screen."}], "answers": [{"tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": true, "score": 0, "last_activity_date": 1469652110, "last_edit_date": 1469652110, "creation_date": 1469651795, "answer_id": 38622739, "question_id": 38622297, "link": "https://stackoverflow.com/questions/38622297/sorting-screen-coordinates/38622739#38622739", "title": "Sorting screen coordinates", "body": "<p>You need a custom comparator (functor, lambda, or overloaded <code>operator &lt;</code>) satisfying strict weak ordering that you can feed into <code>std::sort</code> or <code>std::set</code>. The simplest one would be:</p>\n\n<pre><code>#include &lt;tuple&gt;\n\nstruct TextCommandCompare\n{\n    bool operator()(TextCommand const&amp; a, TextCommand const&amp; b) const\n    {\n        return std::tie(a.text, a.pos.top, a.pos.left, a.pos.bottom, a.pos.right) &lt;\n            std::tie(b.text, b.pos.top, b.pos.left, b.pos.bottom, b.pos.right);\n    }\n};\n</code></pre>\n\n<p><code>std::tie</code> creates a <code>std::tuple</code> that implements the lexicographic comparison for you.</p>\n"}], "owner": {"reputation": 21, "user_id": 4843241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f764f402b0b36085ca6206ea25b458f1?s=128&d=identicon&r=PG&f=1", "display_name": "Bcmonks", "link": "https://stackoverflow.com/users/4843241/bcmonks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 38622739, "answer_count": 1, "score": -3, "last_activity_date": 1469652110, "creation_date": 1469650144, "last_edit_date": 1469652002, "question_id": 38622297, "link": "https://stackoverflow.com/questions/38622297/sorting-screen-coordinates", "title": "Sorting screen coordinates", "body": "<p>I have a Vector <code>textCommands</code> which holds structs called <code>TextCommand</code> containing a <code>RECT</code> and a string; and a <code>RECT</code> has value <code>top</code>, <code>left</code>, <code>bottom</code>, and <code>right</code> all in screen coordinates. I'm wondering how I would sort this vector so that I can then call <code>std::unique</code> and remove the duplicate entries. Duplicate entry being an entry that has the same string, and an identical <code>RECT</code> where all the values are the same.</p>\n\n<pre><code>//Location in screen coordinates(pixels)\nstruct RECT\n{\n    int top;\n    int left;\n    int bottom;\n    int right;\n};\n\n//text at location RECT\nstruct TextCommand\n{\n    std::string text;\n    RECT pos;\n};\n\nstd::vector&lt;TextCommand&gt; textCommands;\n</code></pre>\n"}, {"tags": ["c++", "windows", "fonts"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1469649946, "post_id": 38622201, "comment_id": 64630103, "body": "The display size of a font has nothing to do with how it is installed, and everything to do with how your app&#39;s UI code loads and configures the font at runtime."}, {"owner": {"reputation": 10749, "user_id": 1106247, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/upOkK.png?s=128&g=1", "display_name": "Mario M", "link": "https://stackoverflow.com/users/1106247/mario-m"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1469650055, "post_id": 38622201, "comment_id": 64630147, "body": "The font also is not the correct font, when it is displayed smaller. And if I install the font manually then it displays the correct font and size."}], "answers": [{"tags": [], "owner": {"reputation": 10749, "user_id": 1106247, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/upOkK.png?s=128&g=1", "display_name": "Mario M", "link": "https://stackoverflow.com/users/1106247/mario-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1469692287, "creation_date": 1469692287, "answer_id": 38630218, "question_id": 38622201, "link": "https://stackoverflow.com/questions/38622201/addfontresource-does-not-install-the-font-correctly/38630218#38630218", "title": "AddFontResource does not install the font correctly", "body": "<p>I have solved the problem by copying the font to C:\\Windows\\Fonts then add it to registry and then AddFontResource, otherwise it does not display the font correctly. Using it as a temporary font resource it does not work.</p>\n"}], "owner": {"reputation": 10749, "user_id": 1106247, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/upOkK.png?s=128&g=1", "display_name": "Mario M", "link": "https://stackoverflow.com/users/1106247/mario-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 763, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1469692287, "creation_date": 1469649784, "last_edit_date": 1469660431, "question_id": 38622201, "link": "https://stackoverflow.com/questions/38622201/addfontresource-does-not-install-the-font-correctly", "title": "AddFontResource does not install the font correctly", "body": "<p>I use AddFontResourceW(_T(\"C:\\Program Files\\MyApp\\MyFont.ttf\")); to install 2 fonts from my 64-bit C++ app. </p>\n\n<p>The return value is 1, but in the app the font is displayed 10 times smaller and look like Sans Serif (not my font).</p>\n\n<p>If I manually install the font in Windows, then it is displayed correctly in the app.</p>\n\n<p>I have tried AddFontResourceEx, but the same result. I also have tried to copy the TTF font file in C:\\Windows\\Fonts with my app installer and then call AddFontResource(_T(\"myfont.ttf\")); and the same result.</p>\n\n<p>If I don't call the AddFontResource at all, then the font is substituted with Arial with the correct size.</p>\n\n<p>Tested in 64-bit Windows 7, 10 and Windows 2012 Server.</p>\n\n<p>I have tried with Oswald font and Ubuntu, but I get the same results.</p>\n"}, {"tags": ["c++", "pointers", "c++builder", "tstringlist"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 3, "creation_date": 1469649667, "post_id": 38622125, "comment_id": 64629964, "body": "Because you&#39;ve already deleted <code>List</code>, in your <code>try</code> statement? <code>List-&gt;LoadFromFile(); delete List;</code> seems pretty silly, when you&#39;re repeatedly using <code>List</code> in the block after the <code>catch</code>."}, {"owner": {"reputation": 576, "user_id": 5066117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf5b6408ca56199d225ef7677e4d7cb?s=128&d=identicon&r=PG&f=1", "display_name": "acwaters", "link": "https://stackoverflow.com/users/5066117/acwaters"}, "edited": false, "score": 1, "creation_date": 1469649802, "post_id": 38622125, "comment_id": 64630027, "body": "You have use-after-<code>delete</code> and double-<code>delete</code> bugs in this code, as well as a memory leak. Why are you <code>delete</code>ing <code>List</code> in the <code>try</code> block? You obviously want it to stick around so that you can perform the operations in the <code>for</code> loop later. Plus, if an exception <i>is</i> thrown from the <code>try</code> block and caught, <code>List</code> won&#39;t actually be <code>delete</code>ed. Perhaps the more important question here, though, is why you are dynamically allocating <code>List</code> at all, since apparently it isn&#39;t ever supposed to outlive this function? Just put it on the stack, and problem solved."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 576, "user_id": 5066117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf5b6408ca56199d225ef7677e4d7cb?s=128&d=identicon&r=PG&f=1", "display_name": "acwaters", "link": "https://stackoverflow.com/users/5066117/acwaters"}, "edited": false, "score": 0, "creation_date": 1469650207, "post_id": 38622125, "comment_id": 64630225, "body": "@acwaters what you say about the stack is generally true for purely C++ code, but this is not pure code. <code>TStringList</code> is a <code>TObject</code> descendant, and <code>TObject</code> can only be constructed on the heap, not the stack. This is a compiler compatibility restriction due to <code>TObject</code> being implented in Delphi Pascal, and all Delphi class objects are heap-based."}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 1, "creation_date": 1469650327, "post_id": 38622125, "comment_id": 64630276, "body": "From the look of your code, you probably meant the first <code>delete List</code> to be in the catch black, not in the try block"}, {"owner": {"reputation": 862, "user_id": 2924233, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b89036c211be29d5a0c707d6d7f9e376?s=128&d=identicon&r=PG&f=1", "display_name": "Jim V", "link": "https://stackoverflow.com/users/2924233/jim-v"}, "reply_to_user": {"reputation": 576, "user_id": 5066117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf5b6408ca56199d225ef7677e4d7cb?s=128&d=identicon&r=PG&f=1", "display_name": "acwaters", "link": "https://stackoverflow.com/users/5066117/acwaters"}, "edited": false, "score": 0, "creation_date": 1469650372, "post_id": 38622125, "comment_id": 64630297, "body": "I&#39;ll echo @acwaters - don&#39;t use a pointer at all. This doesn&#39;t seem to be an appropriate time for dynamic allocation. Try: <code>TStringList List;</code>, and access it like <code>TStringList.something</code> instead of <code>TStringList-&gt;something</code>. Also, you code could be greatly simplified by using standard containers and utilities."}, {"owner": {"reputation": 576, "user_id": 5066117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf5b6408ca56199d225ef7677e4d7cb?s=128&d=identicon&r=PG&f=1", "display_name": "acwaters", "link": "https://stackoverflow.com/users/5066117/acwaters"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1469650467, "post_id": 38622125, "comment_id": 64630329, "body": "@RemyLebeau Ahh, okay; that makes sense. I&#39;m not familiar with Delphi, clearly. In any case, the rest of my comment stands."}, {"owner": {"reputation": 862, "user_id": 2924233, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b89036c211be29d5a0c707d6d7f9e376?s=128&d=identicon&r=PG&f=1", "display_name": "Jim V", "link": "https://stackoverflow.com/users/2924233/jim-v"}, "edited": false, "score": 0, "creation_date": 1469651193, "post_id": 38622125, "comment_id": 64630735, "body": "For example, your iteration, check, and return could be shortened to <code>for (auto str : strings)</code> \u23ce <code>auto start = str.find(substring);</code> \u23ce <code>if (start != string::npos) return string(str.begin() + start, str.end());</code>"}, {"owner": {"reputation": 127, "user_id": 1373097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/595a5a4a260ecb53eaade4e160f400a6?s=128&d=identicon&r=PG", "display_name": "martinarcher", "link": "https://stackoverflow.com/users/1373097/martinarcher"}, "edited": false, "score": 0, "creation_date": 1469651489, "post_id": 38622125, "comment_id": 64630878, "body": "Good catch Steve.  I meant the delete to be in my catch block.  Thanks all."}, {"owner": {"reputation": 127, "user_id": 1373097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/595a5a4a260ecb53eaade4e160f400a6?s=128&d=identicon&r=PG", "display_name": "martinarcher", "link": "https://stackoverflow.com/users/1373097/martinarcher"}, "reply_to_user": {"reputation": 862, "user_id": 2924233, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b89036c211be29d5a0c707d6d7f9e376?s=128&d=identicon&r=PG&f=1", "display_name": "Jim V", "link": "https://stackoverflow.com/users/2924233/jim-v"}, "edited": false, "score": 0, "creation_date": 1469651676, "post_id": 38622125, "comment_id": 64630987, "body": "@JimV  Delphi-style classes must be allocated with new - therefore my use of delete."}, {"owner": {"reputation": 862, "user_id": 2924233, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b89036c211be29d5a0c707d6d7f9e376?s=128&d=identicon&r=PG&f=1", "display_name": "Jim V", "link": "https://stackoverflow.com/users/2924233/jim-v"}, "edited": false, "score": 0, "creation_date": 1469652130, "post_id": 38622125, "comment_id": 64631198, "body": "@martinarcher Could you wrap it in a managed pointer? That would free you from having to manually manage the memory. <code>unique_ptr&lt;TStringList&gt; List = make_unique&lt;TStringList&gt;();</code>"}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1469652155, "creation_date": 1469652155, "answer_id": 38622837, "question_id": 38622125, "link": "https://stackoverflow.com/questions/38622125/why-does-deleting-a-tstringlist-pointer-throw-an-exception/38622837#38622837", "title": "Why does deleting a TStringList pointer throw an exception?", "body": "<p>As stated in comments, your code has logic bugs in it, causing you to <code>delete</code> the <code>List</code> twice, or leak it completely.</p>\n\n<p>Try something more like this instead:</p>\n\n<pre><code>String ReadUserConfig(String ConfigString) {\n    String UserConfigPath = AppDrive + \"\\\\DC\\\\userconfig.csv\";\n\n    try {\n        TStringList *List = new TStringList;\n        try {\n            if (FileExists(UserConfigPath)) { // file present, parse it\n                List-&gt;LoadFromFile(UserConfigPath);\n\n                for (int i = 0; i &lt; List-&gt;Count; ++i) {\n                    String thisLine = List-&gt;Strings[i];\n\n                    /* search for ConfigString in this line */\n                    if ((thisLine.Pos(ConfigString) != 0) &amp;&amp;\n                        (thisLine.Pos(\"USER_CONFIG\") != 0)) {\n                        /* grab everything right of ConfigString */\n                        thisLine = thisLine.SubString(thisLine.Pos(ConfigString) + ConfigString.Length() + 1, thisLine.Length());\n                        ReturnString = thisLine.Trim();    \n                        break;\n                    }\n                }\n            }\n        }\n        __finally {\n            delete List;\n        }\n    }\n    catch(const Exception &amp;e) {\n        ShowMessage(\"Exception in ReadUserConfig()\\n\" + e.Message);\n    }\n    catch(...) {\n        ShowMessage(\"Exception in ReadUserConfig()\");\n    }\n\n    return ReturnString;\n}\n</code></pre>\n\n<p>Or, use a <code>std::auto_ptr</code> (pre C++11) or <code>std::unique_ptr</code> (C++11 and later) instead of a <code>try/finally</code> block:</p>\n\n<pre><code>#include &lt;memory&gt;\n\nString ReadUserConfig(String ConfigString) {\n    String UserConfigPath = AppDrive + \"\\\\DC\\\\userconfig.csv\";\n\n    try {\n        //std::auto_ptr&lt;TStringList&gt; List(new TStringList);\n        std::unique_ptr&lt;TStringList&gt; List(new TStringList);\n\n        if (FileExists(UserConfigPath)) { // file present, parse it\n            List-&gt;LoadFromFile(UserConfigPath);\n\n            for (int i = 0; i &lt; List-&gt;Count; ++i) {\n                String thisLine = List-&gt;Strings[i];\n\n                /* search for ConfigString in this line */\n                if ((thisLine.Pos(ConfigString) != 0) &amp;&amp;\n                    (thisLine.Pos(\"USER_CONFIG\") != 0)) {\n                    /* grab everything right of ConfigString */\n                    thisLine = thisLine.SubString(thisLine.Pos(ConfigString) + ConfigString.Length() + 1, thisLine.Length());\n                    ReturnString = thisLine.Trim();    \n                    break;\n                }\n            }\n        }\n    }\n    catch(const Exception &amp;e) {\n        ShowMessage(\"Exception in ReadUserConfig()\\n\" + e.Message);\n    }\n    catch(...) {\n        ShowMessage(\"Exception in ReadUserConfig()\");\n    }\n\n    return ReturnString;\n}\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 1373097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/595a5a4a260ecb53eaade4e160f400a6?s=128&d=identicon&r=PG", "display_name": "martinarcher", "link": "https://stackoverflow.com/users/1373097/martinarcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 38622837, "answer_count": 1, "score": 0, "last_activity_date": 1469652230, "creation_date": 1469649513, "last_edit_date": 1469652230, "question_id": 38622125, "link": "https://stackoverflow.com/questions/38622125/why-does-deleting-a-tstringlist-pointer-throw-an-exception", "title": "Why does deleting a TStringList pointer throw an exception?", "body": "<p>I am using Embarcadero C++ Builder.</p>\n\n<p>I have a function that declares a <code>TStringList</code>, uses it throughout the function, then <code>delete</code>s the object at the end of the function.</p>\n\n<p>I have been using this code happily as a 32 bit application and have converted it to a 64 bit application, and now I get an \"Invalid Pointer Operation\" exception when trying to delete the <code>TStringList</code>.  Any ideas?</p>\n\n<p>The odd thing is I had the same trouble with another function that uses a character pointer (using <code>new</code> to create heap memory space) and a <code>delete</code> operation.  I ended up creating a local buffer with stack space for that function, but I'm stuck with this one since I would like to use the <code>TStringList</code> object.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>String ReadUserConfig(String ConfigString) {\n    String UserConfigPath = AppDrive + \"\\\\DC\\\\userconfig.csv\";\n\n    TStringList *List = new TStringList;\n\n\n    if (FileExists(UserConfigPath)) { // file present, parse it\n        try {\n            List-&gt;LoadFromFile(UserConfigPath);\n            delete List;\n        }\n        catch(...) {\n            ShowMessage(\"Exception in ReadUserConfig()\");\n            return ReturnString;\n        }\n        for (int i = 0; i &lt; List-&gt;Count; ++i) {\n            String thisLine = List-&gt;Strings[i];\n\n            /* search for ConfigString in this line */\n            if ((thisLine.Pos(ConfigString) != 0) &amp;&amp;\n                (thisLine.Pos(\"USER_CONFIG\") != 0)) {\n                /* grab everything right of ConfigString */\n                thisLine = thisLine.SubString\n                    (thisLine.Pos(ConfigString) + ConfigString.Length() + 1,\n                    thisLine.Length());\n                ReturnString = thisLine.Trim();\n\n                i = List-&gt;Count;\n            }\n        }\n\n    }\n\n    delete List;  /* CAUSES INVALID POINTER EXCEPTION */\n    return ReturnString;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "circular-dependency"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1469649276, "post_id": 38621991, "comment_id": 64629754, "body": "<code>EnclosingType</code> is not a type; it&#39;s a template. And it has no methods. <code>OtherType</code> has no methods either. I don&#39;t understand what you&#39;re trying to do."}, {"owner": {"reputation": 1485, "user_id": 938394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/m5Ovb.jpg?s=128&g=1", "display_name": "Paul Varghese", "link": "https://stackoverflow.com/users/938394/paul-varghese"}, "edited": false, "score": 0, "creation_date": 1469649351, "post_id": 38621991, "comment_id": 64629795, "body": "check CRTP, it might be helpful for this scenario though I&#39;m not so sure whether it&#39;ll help you to solve your issue. <a href=\"https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Curiously_recurring_template_pattern</a>"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 1612443, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2bc366b087575778d4d9061e1f9fd87e?s=128&d=identicon&r=PG", "display_name": "user1612443", "link": "https://stackoverflow.com/users/1612443/user1612443"}, "edited": false, "score": 0, "creation_date": 1469651370, "post_id": 38622113, "comment_id": 64630824, "body": "Thanks, that&#39;s helpful and I&#39;m accepting this as the answer. However, I&#39;ll beg your indulgence and extend the question a bit .  What would be the pattern if EnclosingType required multiple (finiite) inner types (e.g. OtherType1, OtherType2).  In this scenario, the consumer might only elect to derived from OtherType1, and use a default implementation of OtherType2.  The requirement of OtherType{n} instances holding a reference to an EnclosingType instance would still be present.  Thoughts on this ?"}, {"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1469660377, "post_id": 38622113, "comment_id": 64634624, "body": "That&#39;s another question. Please post it separately so that others may benefit later."}], "tags": [], "owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "is_accepted": true, "score": 1, "last_activity_date": 1469649812, "last_edit_date": 1469649812, "creation_date": 1469649475, "answer_id": 38622113, "question_id": 38621991, "link": "https://stackoverflow.com/questions/38621991/circular-dependency-in-template-classes/38622113#38622113", "title": "Circular dependency in template classes", "body": "<p>If I make the assumption that you wanted <code>OtherType</code> to contain a reference to <code>EnclosingType&lt;OtherType&gt;</code>, you can do the following:</p>\n\n<pre><code>// EnclosingType declaration\ntemplate &lt;typename T&gt;\nclass EnclosingType;\n\n// OtherType definition\nclass OtherType\n{\npublic:\n  EnclosingType&lt;OtherType&gt; &amp; e_;\n  OtherType (EnclosingType&lt;OtherType&gt; &amp; e) : e_(e) {}\n};\n\n// EnclosingType definition\ntemplate &lt;typename T&gt;\nclass EnclosingType\n{\npublic:\n    T type_;\n};\n</code></pre>\n\n<p>You can use the <code>EnclosingType</code> declaration (as opposed to definition) in <code>OtherType</code> since you are referencing it via a pointer or reference.  <code>EnclosingType&lt;OtherType&gt;</code>'s definition needs the definition of <code>OtherType</code> because it includes it by value.</p>\n"}], "owner": {"reputation": 57, "user_id": 1612443, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2bc366b087575778d4d9061e1f9fd87e?s=128&d=identicon&r=PG", "display_name": "user1612443", "link": "https://stackoverflow.com/users/1612443/user1612443"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "accepted_answer_id": 38622113, "answer_count": 1, "score": 0, "last_activity_date": 1469649812, "creation_date": 1469649069, "question_id": 38621991, "link": "https://stackoverflow.com/questions/38621991/circular-dependency-in-template-classes", "title": "Circular dependency in template classes", "body": "<p>I'm having trouble with a circular reference of types. For an implmentation of the following:</p>\n\n<pre><code>// Parent.h\ntemplate &lt;typename OtherType&gt;\nclass EnclosingType\n{\npublic:\n    typename OtherType type_;\n};\n\nclass OtherType\n{\npublic:\n    EnclosingType &amp; e_;\n    OtherType (EnclosingType &amp; e) : e_(e) {}\n};\n</code></pre>\n\n<p>The requirement is that OtherType take a reference to an object of EnclosingType so that it can invoke methods on EnclosingType, and EnclosingType can invoke methods on OtherType.  The main goal is to allow implementers to supply their own OtherType-derived types.</p>\n\n<p>What is the best way to handle the case where this type of circular dependency exists ? What is the proper declaration of OtherType ? What is the proper declaration of OtherType::EnclosingType ? What is the proper declaration of Enclosing::OtherType::type_ ?  Is what I need to do even possible ?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4713, "user_id": 6357360, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aed7990245e27bcf868d514f3ad014ff?s=128&d=identicon&r=PG&f=1", "display_name": "meJustAndrew", "link": "https://stackoverflow.com/users/6357360/mejustandrew"}, "edited": false, "score": 2, "creation_date": 1469648908, "post_id": 38621909, "comment_id": 64629554, "body": "Have you tried to debug this code?"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 2, "creation_date": 1469649053, "post_id": 38621909, "comment_id": 64629632, "body": "This <code>if(time == 060)</code> is actually <code>if(time == 48)</code>."}, {"owner": {"reputation": 25, "user_id": 6643235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_vZSeTCp8v0/AAAAAAAAAAI/AAAAAAAACPM/0dvfBLN9sOc/photo.jpg?sz=128", "display_name": "Ronald Johnson", "link": "https://stackoverflow.com/users/6643235/ronald-johnson"}, "edited": false, "score": 0, "creation_date": 1469649063, "post_id": 38621909, "comment_id": 64629635, "body": "yes I have, I know that the new rate is not being applied but I don&#39;t know why"}, {"owner": {"reputation": 25, "user_id": 6643235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_vZSeTCp8v0/AAAAAAAAAAI/AAAAAAAACPM/0dvfBLN9sOc/photo.jpg?sz=128", "display_name": "Ronald Johnson", "link": "https://stackoverflow.com/users/6643235/ronald-johnson"}, "edited": false, "score": 0, "creation_date": 1469649130, "post_id": 38621909, "comment_id": 64629672, "body": "what do you mean DimChtz?"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1469649212, "post_id": 38621909, "comment_id": 64629717, "body": "I mean <code>60</code> and <code>060</code> are 2 different things. <code>060</code> means octal(60)"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469649212, "post_id": 38621909, "comment_id": 64629718, "body": "@RoeiBurstein - Integral constants starting with <code>0</code> are octal, not decimal."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 1, "creation_date": 1469649266, "post_id": 38621909, "comment_id": 64629750, "body": "A teacher of mine had a term &#39;Gabe-ified&#39; after a student he liked to make an example of, Gabe, who would never write trivial math and algorithms and would write everything as massive if-else ladders. On that note, I recommend you spare yourself dozens of lines of code and many headaches with maintainability by averting from giant if-else ladders."}, {"owner": {"reputation": 25, "user_id": 6643235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_vZSeTCp8v0/AAAAAAAAAAI/AAAAAAAACPM/0dvfBLN9sOc/photo.jpg?sz=128", "display_name": "Ronald Johnson", "link": "https://stackoverflow.com/users/6643235/ronald-johnson"}, "edited": false, "score": 0, "creation_date": 1469649443, "post_id": 38621909, "comment_id": 64629855, "body": "I changed 060 to 60 but that doesn&#39;t change the result"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1469649483, "post_id": 38621909, "comment_id": 64629880, "body": "@RoeiBurstein -  You don&#39;t see a pattern in that giant set if if / else statements, like <code>time = (time + 40) % 2400</code>?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1469649838, "post_id": 38621909, "comment_id": 64630045, "body": "you also have a <code>time = 000</code> in there and a <code>time == 000</code>"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1469649859, "post_id": 38621909, "comment_id": 64630061, "body": "@RoeiBurstein Also <code>if (a == &#39;:&#39;) continue; else temp += a;</code> can be shorter, you need to learn when to use 2D array (in <code>main</code>) and loops with modulo operator, and shorten logical expressions using De Morgan&#39;s laws."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469649860, "post_id": 38621909, "comment_id": 64630062, "body": "@RoeiBurstein <code>string line1[3], line2[3], line3[3], line4[3], line5[3], line6[3];</code>  why not simply <code>string line[6][3]</code>;?  And this: <code>float costLine1, costLine2, costLine3, costLine4, costLine5, costLine6;</code> -- why not <code>float costLine[6];</code>? Once you have this, then all you need is a loop to process the lines, not 6 separate statements."}, {"owner": {"reputation": 25, "user_id": 6643235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_vZSeTCp8v0/AAAAAAAAAAI/AAAAAAAACPM/0dvfBLN9sOc/photo.jpg?sz=128", "display_name": "Ronald Johnson", "link": "https://stackoverflow.com/users/6643235/ronald-johnson"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469649969, "post_id": 38621909, "comment_id": 64630112, "body": "@PaulMcKenzie the pattern is not the issue, I know my code is sloppily written but it&#39;s graded on accuracy not on style or how well it&#39;s made. Despite all of your suggestions I still get the wrong output for the last line of the log"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469650020, "post_id": 38621909, "comment_id": 64630130, "body": "@RoeiBurstein -- The comment section on SO are for comments, not answers.  I am commenting on your code.  And believe it or not, redundant, copy / paste coding that you have done leads to errors occurring."}, {"owner": {"reputation": 25, "user_id": 6643235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_vZSeTCp8v0/AAAAAAAAAAI/AAAAAAAACPM/0dvfBLN9sOc/photo.jpg?sz=128", "display_name": "Ronald Johnson", "link": "https://stackoverflow.com/users/6643235/ronald-johnson"}, "edited": false, "score": 0, "creation_date": 1469650047, "post_id": 38621909, "comment_id": 64630143, "body": "I am not looking for suggestions on how to make it shorter and nicer but I&#39;m on a bit of a time crunch and just wanted to get it done. All I need is the root to the wrong value"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1469650238, "post_id": 38621909, "comment_id": 64630240, "body": "It isn&#39;t about shorter and nicer -- as my comment states, redundant code like this where you pile on the lines makes it more susceptible to errors occurring.  A 2 line loop is less likely to have errors than a 20 line set of <code>if</code> statements."}, {"owner": {"reputation": 25, "user_id": 6643235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_vZSeTCp8v0/AAAAAAAAAAI/AAAAAAAACPM/0dvfBLN9sOc/photo.jpg?sz=128", "display_name": "Ronald Johnson", "link": "https://stackoverflow.com/users/6643235/ronald-johnson"}, "edited": false, "score": 0, "creation_date": 1469650391, "post_id": 38621909, "comment_id": 64630308, "body": "I definitely agree with you, and if I were to have many errors and a confusing mess of code I would work on changing it, but I have literally 1 mistake in the code until it works flawlessly, and I don&#39;t think it&#39;s worth changing the structure of everything to fix one error"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1469650491, "post_id": 38621909, "comment_id": 64630340, "body": "@RoeiBurstein I am not sure but maybe here <code>int time = stoi(makeTimeIntoInt(line));</code> you really mean <code>int time = convertSixtySecondsToHour(stoi(makeTimeIntoInt(line)));</code>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469650615, "post_id": 38621909, "comment_id": 64630399, "body": "Please post or hard-code the data into your post that causes the error.  It is useless if the data that causes the issue is on another site."}, {"owner": {"reputation": 25, "user_id": 6643235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_vZSeTCp8v0/AAAAAAAAAAI/AAAAAAAACPM/0dvfBLN9sOc/photo.jpg?sz=128", "display_name": "Ronald Johnson", "link": "https://stackoverflow.com/users/6643235/ronald-johnson"}, "edited": false, "score": 0, "creation_date": 1469650727, "post_id": 38621909, "comment_id": 64630463, "body": "it&#39;s not an error that&#39;s causing the program not to run, it&#39;s an error in the calculation that&#39;s not giving me the intended value"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469650764, "post_id": 38621909, "comment_id": 64630482, "body": "Your program cannot run without data.  What is the data?"}, {"owner": {"reputation": 25, "user_id": 6643235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_vZSeTCp8v0/AAAAAAAAAAI/AAAAAAAACPM/0dvfBLN9sOc/photo.jpg?sz=128", "display_name": "Ronald Johnson", "link": "https://stackoverflow.com/users/6643235/ronald-johnson"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1469650841, "post_id": 38621909, "comment_id": 64630520, "body": "@DimChtz it did not change anything. The problem is that costLine6 is 4.5 and not 6.5"}, {"owner": {"reputation": 25, "user_id": 6643235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_vZSeTCp8v0/AAAAAAAAAAI/AAAAAAAACPM/0dvfBLN9sOc/photo.jpg?sz=128", "display_name": "Ronald Johnson", "link": "https://stackoverflow.com/users/6643235/ronald-johnson"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469650866, "post_id": 38621909, "comment_id": 64630535, "body": "@PaulMcKenzie do you mean the txt file?"}, {"owner": {"reputation": 25, "user_id": 6643235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_vZSeTCp8v0/AAAAAAAAAAI/AAAAAAAACPM/0dvfBLN9sOc/photo.jpg?sz=128", "display_name": "Ronald Johnson", "link": "https://stackoverflow.com/users/6643235/ronald-johnson"}, "edited": false, "score": 0, "creation_date": 1469650878, "post_id": 38621909, "comment_id": 64630542, "body": "I don&#39;t know what you mean by data"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1469650926, "post_id": 38621909, "comment_id": 64630570, "body": "@RoeiBurstein - Do you really believe that we&#39;re going to run the program in our heads to debug it?  Please provide just one set of input that duplicates the issue that you&#39;re seeing."}, {"owner": {"reputation": 25, "user_id": 6643235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_vZSeTCp8v0/AAAAAAAAAAI/AAAAAAAACPM/0dvfBLN9sOc/photo.jpg?sz=128", "display_name": "Ronald Johnson", "link": "https://stackoverflow.com/users/6643235/ronald-johnson"}, "edited": false, "score": 0, "creation_date": 1469651121, "post_id": 38621909, "comment_id": 64630695, "body": "It should be 0.15*10 + 0.25*20"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469651206, "post_id": 38621909, "comment_id": 64630741, "body": "You&#39;re giving us a calculation -- gives us the data that you are reading in for this one particular case that is not giving the right results."}, {"owner": {"reputation": 25, "user_id": 6643235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_vZSeTCp8v0/AAAAAAAAAAI/AAAAAAAACPM/0dvfBLN9sOc/photo.jpg?sz=128", "display_name": "Ronald Johnson", "link": "https://stackoverflow.com/users/6643235/ronald-johnson"}, "edited": false, "score": 0, "creation_date": 1469651416, "post_id": 38621909, "comment_id": 64630846, "body": "Input: Su 23:50 30"}, {"owner": {"reputation": 25, "user_id": 6643235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_vZSeTCp8v0/AAAAAAAAAAI/AAAAAAAACPM/0dvfBLN9sOc/photo.jpg?sz=128", "display_name": "Ronald Johnson", "link": "https://stackoverflow.com/users/6643235/ronald-johnson"}, "edited": false, "score": 0, "creation_date": 1469651436, "post_id": 38621909, "comment_id": 64630858, "body": "Sorry I didn&#39;t understand what you meant by data"}, {"owner": {"reputation": 25, "user_id": 6643235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_vZSeTCp8v0/AAAAAAAAAAI/AAAAAAAACPM/0dvfBLN9sOc/photo.jpg?sz=128", "display_name": "Ronald Johnson", "link": "https://stackoverflow.com/users/6643235/ronald-johnson"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469651920, "post_id": 38621909, "comment_id": 64631094, "body": "@PaulMcKenzie you there?"}], "answers": [{"tags": [], "owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "is_accepted": true, "score": 1, "last_activity_date": 1469652201, "creation_date": 1469652201, "answer_id": 38622850, "question_id": 38621909, "link": "https://stackoverflow.com/questions/38621909/why-is-the-wrong-value-being-calculated/38622850#38622850", "title": "Why is the wrong value being calculated", "body": "<p>Two issues:</p>\n\n<p>1) <code>060</code> is actually octal which in decimal is 48. So, remove all leading zeros. <br />\n2) Inside <code>calculateCost</code> change:</p>\n\n<pre><code>if (line[0] == \"Mo\" || line[0] == \"Tu\" || line[0] == \"We\" ||\n    line[0] == \"Th\" || line[0] == \"Fr\")\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>if (day == \"Mo\" || day == \"Tu\" || day == \"We\" ||\n    day == \"Th\" || day == \"Fr\")\n</code></pre>\n\n<p>and</p>\n\n<pre><code>else if (line[0] == \"Sa\" || line[0] == \"Su\")\n</code></pre>\n\n<p>to</p>\n\n<pre><code>else if (day == \"Sa\" || day == \"Su\")\n</code></pre>\n\n<p>because when you call <code>day = nextDay(day);</code> obviously you change <code>day</code> and not <code>line[0]</code>. You 're getting <code>4.5</code> because <code>line[0]</code> remains <code>\"Su\"</code>. Only <code>day</code> changes to <code>\"Mo\"</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 6643235, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_vZSeTCp8v0/AAAAAAAAAAI/AAAAAAAACPM/0dvfBLN9sOc/photo.jpg?sz=128", "display_name": "Ronald Johnson", "link": "https://stackoverflow.com/users/6643235/ronald-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 38622850, "answer_count": 1, "score": -7, "last_activity_date": 1469652201, "creation_date": 1469648760, "question_id": 38621909, "link": "https://stackoverflow.com/questions/38621909/why-is-the-wrong-value-being-calculated", "title": "Why is the wrong value being calculated", "body": "<p>I have a program that calculates the cost of phone calls with different rates for different days and times. The rates are as follow:</p>\n\n<ul>\n<li><p>Any call made between 8:00am and 6:00pm, Monday through Friday, is billed at a rate of $0.40 per minute.</p></li>\n<li><p>Any call made before 8:00am or after 6:00pm, Monday through Friday, is charged at a rate of $0.25 per minute.</p></li>\n<li><p>Any call made on a Saturday or Sunday is charged at a rate of $0.15 per minute.</p></li>\n<li><p>Any call whose duration spans across multiple rate zones is charged based on the actual minutes in the corresponding rate zones.</p></li>\n</ul>\n\n<p>My code gives the right values for every log except for the last one, which is supposed to be $6.50 but is instead $4.50.</p>\n\n<p>The code is as follows:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n\nusing namespace std;\n\nstring makeTimeIntoInt(string line[]) {\n    string temp = \"\";\n    string time = line[1];\n    for (char a : time) {\n        if (a == ':')\n            continue;\n        else\n            temp += a;\n    }\n\n    return temp;\n}\n\nstring nextDay(string day){\n    if(day == \"Mo\") return \"Tu\";\n    else if(day == \"Tu\") return \"We\";\n    else if(day == \"We\") return \"Th\";\n    else if(day == \"Th\") return \"Fr\";\n    else if(day == \"Fr\") return \"Sa\";\n    else if(day == \"Sa\") return \"Su\";\n    else if(day == \"Su\") return \"Mo\";\n\n    return day;\n}\n\nint convertSixtySecondsToHour(int time){\n    if(time == 060) time = 100;\n    else if(time == 160) time = 200;\n    else if(time == 260) time = 300;\n    else if(time == 360) time = 400;\n    else if(time == 460) time = 500;\n    else if(time == 560) time = 600;\n    else if(time == 660) time = 700;\n    else if(time == 760) time = 800;\n    else if(time == 860) time = 900;\n    else if(time == 960) time = 1000;\n    else if(time == 1060) time = 1100;\n    else if(time == 1160) time = 1200;\n    else if(time == 1260) time = 1300;\n    else if(time == 1360) time = 1400;\n    else if(time == 1460) time = 1500;\n    else if(time == 1560) time = 1600;\n    else if(time == 1660) time = 1700;\n    else if(time == 1760) time = 1800;\n    else if(time == 1860) time = 1900;\n    else if(time == 1960) time = 2000;\n    else if(time == 2060) time = 2100;\n    else if(time == 2160) time = 2200;\n    else if(time == 2260) time = 2300;\n    else if(time == 2360) time = 000;\n    return time;\n}\n\nfloat calculateCost(string line[]) {\n    int time = stoi(makeTimeIntoInt(line));\n    int duration = stoi(line[2]);\n    string day = line[0];\n    float totalCost = 0;\n    for(int i = 1; i &lt;= duration; i++){\n    if (line[0] == \"Mo\" || line[0] == \"Tu\" || line[0] == \"We\" ||\n        line[0] == \"Th\" || line[0] == \"Fr\") {\n        if (time &lt; 800 || time &gt; 1800) {\n            totalCost += 0.25;\n        } else\n            totalCost += 0.4;\n    }\n\n    else if (line[0] == \"Sa\" || line[0] == \"Su\") {\n        totalCost += 0.15;\n    }\n        time++;\n        time = convertSixtySecondsToHour(time);\n            if(time == 000){\n            day = nextDay(day);\n        }\n    }\n    return totalCost;\n}\n\nint main() {\n    ifstream inputFile;\n    string line;\n    int cnt = 0;\n    inputFile.open(\"/Users/wonder-intern/Documents/C++ Workspace/PhoneRecords/PhoneRecords/calls_history.txt\"); //change this to the path of the txt file\n    string arr[18];\n    string line1[3], line2[3], line3[3], line4[3], line5[3], line6[3];\n    float costLine1, costLine2, costLine3, costLine4, costLine5, costLine6;\n\n    if (!inputFile.is_open()) {\n        cout &lt;&lt; \"file could not be opened\\n\\n\";\n        return 0;\n    }\n\n    while (getline(inputFile, line) &amp;&amp; cnt &lt; 18) {\n        istringstream split(line);\n        split &gt;&gt; arr[cnt];\n        cnt++;\n        split &gt;&gt; arr[cnt];\n        cnt++;\n        split &gt;&gt; arr[cnt];\n        cnt++;\n    }\n\n    inputFile.close();\n    line1[0] = arr[0];\n    line1[1] = arr[1];\n    line1[2] = arr[2];\n    line2[0] = arr[3];\n    line2[1] = arr[4];\n    line2[2] = arr[5];\n    line3[0] = arr[6];\n    line3[1] = arr[7];\n    line3[2] = arr[8];\n    line4[0] = arr[9];\n    line4[1] = arr[10];\n    line4[2] = arr[11];\n    line5[0] = arr[12];\n    line5[1] = arr[13];\n    line5[2] = arr[14];\n    line6[0] = arr[15];\n    line6[1] = arr[16];\n    line6[2] = arr[17];\n\n    costLine1 = calculateCost(line1);\n    costLine2 = calculateCost(line2);\n    costLine3 = calculateCost(line3);\n    costLine4 = calculateCost(line4);\n    costLine5 = calculateCost(line5);\n    costLine6 = calculateCost(line6);\n\n    cout &lt;&lt; \"Day Time Duration Cost\\n\\n\";\n\n    cout &lt;&lt; line1[0] &lt;&lt; \" \" &lt;&lt; line1[1] &lt;&lt; \" \" &lt;&lt; line1[2] &lt;&lt; \" $\" &lt;&lt; costLine1\n    &lt;&lt; \"\\n\";\n\n    cout &lt;&lt; line2[0] &lt;&lt; \" \" &lt;&lt; line2[1] &lt;&lt; \" \" &lt;&lt; line2[2] &lt;&lt; \" $\" &lt;&lt; costLine2\n    &lt;&lt; \"\\n\";\n\n    cout &lt;&lt; line3[0] &lt;&lt; \" \" &lt;&lt; line3[1] &lt;&lt; \" \" &lt;&lt; line3[2] &lt;&lt; \" $\" &lt;&lt; costLine3\n    &lt;&lt; \"\\n\";\n\n    cout &lt;&lt; line4[0] &lt;&lt; \" \" &lt;&lt; line4[1] &lt;&lt; \" \" &lt;&lt; line4[2] &lt;&lt; \" $\" &lt;&lt; costLine4\n    &lt;&lt; \"\\n\";\n\n    cout &lt;&lt; line5[0] &lt;&lt; \" \" &lt;&lt; line5[1] &lt;&lt; \" \" &lt;&lt; line5[2] &lt;&lt; \" $\" &lt;&lt; costLine5\n    &lt;&lt; \"\\n\";\n\n    cout &lt;&lt; line6[0] &lt;&lt; \" \" &lt;&lt; line6[1] &lt;&lt; \" \" &lt;&lt; line6[2] &lt;&lt; \" $\" &lt;&lt; costLine6\n    &lt;&lt; \"\\n\";\n\n    cout &lt;&lt; \"Total: $\"\n    &lt;&lt; costLine1 + costLine2 + costLine3 + costLine4 + costLine5 + costLine6\n    &lt;&lt; \"\\n\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<p>The text file with the call log can be found here: <a href=\"https://drive.google.com/open?id=0Bysk6_x4B46uQko4dEpMNXZtY2M\" rel=\"nofollow\">https://drive.google.com/open?id=0Bysk6_x4B46uQko4dEpMNXZtY2M</a></p>\n"}, {"tags": ["c++", "c++11", "std"], "comments": [{"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1469648784, "post_id": 38621878, "comment_id": 64629490, "body": "Have you tried something? You could provide your own implementation of a container."}, {"owner": {"reputation": 1296, "user_id": 506013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d474a0dd3522671e6bc02b1ac55776?s=128&d=identicon&r=PG", "display_name": "rts1", "link": "https://stackoverflow.com/users/506013/rts1"}, "edited": false, "score": 0, "creation_date": 1469648980, "post_id": 38621878, "comment_id": 64629587, "body": "This seems very open-ended (an interesting idea): do you want to worry about threads?  In that case, you&#39;d have to have some notion of thread-safety, either in the container or the callback?  One thought to get inside the container is to allow a &quot;protected&quot; (in the C++ public/protected/private sense) interface that can have people who inherit access to certain methods."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 3, "creation_date": 1469648983, "post_id": 38621878, "comment_id": 64629592, "body": "Is this an XY-problem regarding debugging?"}, {"owner": {"reputation": 605, "user_id": 3612009, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/826d8cf1741fd4e6c433499191f29abf?s=128&d=identicon&r=PG&f=1", "display_name": "user3612009", "link": "https://stackoverflow.com/users/3612009/user3612009"}, "reply_to_user": {"reputation": 1296, "user_id": 506013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d474a0dd3522671e6bc02b1ac55776?s=128&d=identicon&r=PG", "display_name": "rts1", "link": "https://stackoverflow.com/users/506013/rts1"}, "edited": false, "score": 0, "creation_date": 1469649083, "post_id": 38621878, "comment_id": 64629648, "body": "@rts1 for the moment I am not concerned about threading at all."}, {"owner": {"reputation": 605, "user_id": 3612009, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/826d8cf1741fd4e6c433499191f29abf?s=128&d=identicon&r=PG&f=1", "display_name": "user3612009", "link": "https://stackoverflow.com/users/3612009/user3612009"}, "reply_to_user": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1469649126, "post_id": 38621878, "comment_id": 64629667, "body": "@Ceros Of course one way would be to write the containers from scratch, but that option is kept as the last resort :)"}, {"owner": {"reputation": 605, "user_id": 3612009, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/826d8cf1741fd4e6c433499191f29abf?s=128&d=identicon&r=PG&f=1", "display_name": "user3612009", "link": "https://stackoverflow.com/users/3612009/user3612009"}, "edited": false, "score": 0, "creation_date": 1469649193, "post_id": 38621878, "comment_id": 64629704, "body": "@DieterL&#252;cking Not sure what an XY-problem is. But no, this is not for debugging. This is to design something that can dump state incrementally with very low overhead."}, {"owner": {"reputation": 1296, "user_id": 506013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d474a0dd3522671e6bc02b1ac55776?s=128&d=identicon&r=PG", "display_name": "rts1", "link": "https://stackoverflow.com/users/506013/rts1"}, "edited": false, "score": 0, "creation_date": 1469649251, "post_id": 38621878, "comment_id": 64629744, "body": "I more and more like the idea of the standard providing certain parts of the interface that are protected: then a user could extend/get information without having to necessarily rewrite the standard class.  So, vector might always have a virtual? method called extend () that has an empty implementation, and an extending class could be &quot;notified&quot; when that happens.  Of course, that puts virtual methods in concrete classes, which is probably not a good idea ... so you might be able to do it with templates and provide a &quot;well-named&quot; function that gets seen when you want to intercept, else empty."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1469649607, "post_id": 38621878, "comment_id": 64629940, "body": "size of object cannot be changed at runtime you seem not to understand problem properly"}, {"owner": {"reputation": 1296, "user_id": 506013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d474a0dd3522671e6bc02b1ac55776?s=128&d=identicon&r=PG", "display_name": "rts1", "link": "https://stackoverflow.com/users/506013/rts1"}, "edited": false, "score": 0, "creation_date": 1469649728, "post_id": 38621878, "comment_id": 64629991, "body": "(I feel like I am whiteboarding .. ;)  To expand on the idea above, have a generic function named &quot;expand&quot; that gets called when the (say vector) expands.  If you provide a particular specialization (either by inheriting or making a function with a specfic type), that function will get called for you when the vector expands.  That way you could preserve the run-time performance (an empty &quot;do nothing&quot; function would get optimized away), but still allow the notion of a callback with your specialization of a generic function/class.  Thoughts?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1296, "user_id": 506013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d474a0dd3522671e6bc02b1ac55776?s=128&d=identicon&r=PG", "display_name": "rts1", "link": "https://stackoverflow.com/users/506013/rts1"}, "edited": false, "score": 0, "creation_date": 1469649889, "post_id": 38621878, "comment_id": 64630078, "body": "@rts I bet we XY-problem here and nobody really needs it. For example it is easier to make a thin wrapper and store it instead of actual type and intercept move ctor."}, {"owner": {"reputation": 1296, "user_id": 506013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d474a0dd3522671e6bc02b1ac55776?s=128&d=identicon&r=PG", "display_name": "rts1", "link": "https://stackoverflow.com/users/506013/rts1"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1469650055, "post_id": 38621878, "comment_id": 64630148, "body": "@Slava I don&#39;t know what an XY-problem is (we are saying one thing and meaning another?)  And yes, this may be of limited utility, but given how much we depend on standard containers, it might nice to have the standard allow this when we need it.  But your point is taken."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1296, "user_id": 506013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d474a0dd3522671e6bc02b1ac55776?s=128&d=identicon&r=PG", "display_name": "rts1", "link": "https://stackoverflow.com/users/506013/rts1"}, "edited": false, "score": 1, "creation_date": 1469650150, "post_id": 38621878, "comment_id": 64630195, "body": "@rts1 read this <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\" title=\"what is the xy problem\">meta.stackexchange.com/questions/66377/what-is-the-xy-proble&zwnj;&#8203;m</a>"}, {"owner": {"reputation": 1296, "user_id": 506013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d474a0dd3522671e6bc02b1ac55776?s=128&d=identicon&r=PG", "display_name": "rts1", "link": "https://stackoverflow.com/users/506013/rts1"}, "edited": false, "score": 1, "creation_date": 1469650210, "post_id": 38621878, "comment_id": 64630226, "body": "A thin wrapper might work: it depends on how much of the interface you need.   One reason to inherit is you want a LOT of interface re-used: a thin wrapper is a good idea when you just want some (and don&#39;t want to forwards tons and tons of interface)."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1296, "user_id": 506013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d474a0dd3522671e6bc02b1ac55776?s=128&d=identicon&r=PG", "display_name": "rts1", "link": "https://stackoverflow.com/users/506013/rts1"}, "edited": false, "score": 0, "creation_date": 1469650382, "post_id": 38621878, "comment_id": 64630301, "body": "@rts1 you can create compatible to <code>std::vector</code> interface and provide described functionality - replacement in code should be easy (if code written properly). I doubt anybody would bother to implement it."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1469650628, "post_id": 38621878, "comment_id": 64630404, "body": "I think the entire idea is basically a nonstarter: <code>std::string&amp; ref = myVec[2]; ref[3] = &#39;4&#39;;</code> There is literally no possible implementation of myVec that could to detect this change."}, {"owner": {"reputation": 605, "user_id": 3612009, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/826d8cf1741fd4e6c433499191f29abf?s=128&d=identicon&r=PG&f=1", "display_name": "user3612009", "link": "https://stackoverflow.com/users/3612009/user3612009"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1469652460, "post_id": 38621878, "comment_id": 64631363, "body": "@MooingDuck I do not expect to handle this or anything of this sort. I can always restrict the usage to suit my need."}], "answers": [{"tags": [], "owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "is_accepted": false, "score": 2, "last_activity_date": 1469691029, "last_edit_date": 1469691029, "creation_date": 1469649122, "answer_id": 38622004, "question_id": 38621878, "link": "https://stackoverflow.com/questions/38621878/how-to-extend-std-library-containers-to-get-notified-when-individual-elements-ar/38622004#38622004", "title": "How to extend std library containers to get notified when individual elements are changed", "body": "<p>Out the box, the standard containers don't offer notifications quite like those you describe. </p>\n\n<p>As an example;</p>\n\n<pre><code>template&lt;\n    class T,\n    class Allocator = std::allocator&lt;T&gt;\n&gt; class vector;\n</code></pre>\n\n<p>Containers have essentially two extension points - the type <code>T</code> and the allocator <code>Allocator</code>. The internals of the container, e.g. the nodes, internal pointers, counters etc. are not exposed for customisation.</p>\n\n<p>To mimic the hooks you desire, you need to leverage these two extension points of the standard containers. If they prove insufficient, then you will need to build your own container.</p>\n\n<p>Providing a custom allocator can assist in getting notified of object (for containers that use them, this includes internal node objects) construction, destruction and allocations, deallocations etc. Given the example usage, a custom allocator could be all that is required; these actions typically correspond to container growth, object creation and destruction etc. Allocators provide (during allocation) and are provided (during construction and destruction), the addresses of the memory being altered.</p>\n\n<p>You could also wrap the type being used in the container to notify you of changes to its state, but this could be overkill, and difficult to identify changes made by the container itself and those by clients of the container.  </p>\n\n<p>Further, you could wrap the containers to provide the hooks you need, and then stub the rest of the required functionality through to a private member (or base class) of the required container. You could even template this to support a number of container types. </p>\n"}, {"tags": [], "owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "is_accepted": false, "score": 2, "last_activity_date": 1469651388, "creation_date": 1469651388, "answer_id": 38622634, "question_id": 38621878, "link": "https://stackoverflow.com/questions/38621878/how-to-extend-std-library-containers-to-get-notified-when-individual-elements-ar/38622634#38622634", "title": "How to extend std library containers to get notified when individual elements are changed", "body": "<p>I don't like the example you gave of returning addresses to internal memory locations in a list.  If you have different threads working with iterators that could be invalidated, you lock the container until that task is finished.</p>\n\n<p>The other example, notifying when a container allocates more storage, is okay. Here's a really simple example.  I only implemented push() which calls push_back on the underlying vector.  You can't even access the data you have already pushed, but that will be easy for you to add.</p>\n\n<pre><code>template &lt;class T&gt;\nclass notifyvector {\n    std::vector&lt;T&gt; _vector;\n    size_t _capacity;\n    static const size_t initial_capacity = 20;\n\npublic:\n    notifyvector() : _capacity(initial_capacity) {\n        _vector.reserve(initial_capacity);\n    }\n\n    void push(T value){\n        _vector.push_back(value);\n        if (_capacity &lt; _vector.capacity()){\n            // the vector has grown\n            _capacity = _vector.capacity();\n            do_notify(_capacity);\n        }\n    }\n\n    void do_notify(size_t newcap){\n        // all you\n        std::cout &lt;&lt; \"the vector has grown to \" &lt;&lt; newcap &lt;&lt; std::endl;\n    }\n};\n</code></pre>\n\n<p>The point of the exercise is to demonstrate a wrapper that provides exactly the type of notification you want in a class that controls all input and output to the underlying container.  This allows it to detect events and send whatever notification you want.</p>\n\n<p>You could probably allow access to a const reference of the underlying container (read only), and detect the events you want to notify in the write access, which must go through your container's functions.</p>\n"}], "owner": {"reputation": 605, "user_id": 3612009, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/826d8cf1741fd4e6c433499191f29abf?s=128&d=identicon&r=PG&f=1", "display_name": "user3612009", "link": "https://stackoverflow.com/users/3612009/user3612009"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1469691029, "creation_date": 1469648666, "last_edit_date": 1469652956, "question_id": 38621878, "link": "https://stackoverflow.com/questions/38621878/how-to-extend-std-library-containers-to-get-notified-when-individual-elements-ar", "title": "How to extend std library containers to get notified when individual elements are changed", "body": "<p>I would like to extend std library containers so that the application is notified when ever state of the container gets changed. For example, when a new item is added to a list, I want the container to call a method in application with certain information. My requirement is to track which memory addresses get changed as a result of a given operation. For example, if insertion of a new element results in a modification of some object internal to the list, I would like to know the start address of that object as well as the size of the object, so that I know roughly which area of the memory got changed. </p>\n\n<p>UPDATE:\nLooks like my question is not that clear. I don't want to intercept calls to grab values. Rather, what I want is to track how memory is changed as a result of an operation. For example when a new element is added to a binary tree, a pointer in some node in the tree gets updated to point to the newly added node. When this happens, I want to get notified with the address of this node as well as the size of the Node's class, so I can safely say that a memory addess in range start_address to start_address + sizeof(NodeType) got changed. With some help from a custom memory pool + custom allocator, I can use this information to do a incremental state dump.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 7, "creation_date": 1469647895, "post_id": 38621625, "comment_id": 64629032, "body": "<code>temp</code> is just an empty string, you don&#39;t seem to be setting it anywhere else in the program."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1469647903, "post_id": 38621625, "comment_id": 64629037, "body": "From the <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stol\" rel=\"nofollow noreferrer\">documentation</a>: Exceptions std::invalid_argument if no conversion could be performed std::out_of_range if the converted value would fall out of the range of the result type or if the underlying function (std::strtol or std::strtoll) sets errno to ERANGE."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1469647970, "post_id": 38621625, "comment_id": 64629076, "body": "Your global variable <code>temp</code> is not updated anywhere in <code>main</code> or by any function called in <code>main</code>. Using a debugger would let you see what value was in <code>temp</code> at the time of the crash."}, {"owner": {"reputation": 697, "user_id": 2096928, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/du211.png?s=128&g=1", "display_name": "Joel Trauger", "link": "https://stackoverflow.com/users/2096928/joel-trauger"}, "edited": false, "score": 0, "creation_date": 1469647971, "post_id": 38621625, "comment_id": 64629077, "body": "Can you post your <code>#include</code> statements?"}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "reply_to_user": {"reputation": 697, "user_id": 2096928, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/du211.png?s=128&g=1", "display_name": "Joel Trauger", "link": "https://stackoverflow.com/users/2096928/joel-trauger"}, "edited": false, "score": 3, "creation_date": 1469648104, "post_id": 38621625, "comment_id": 64629137, "body": "@JoelTrauger You must be new here. His question contains the answer to his question if he&#39;d bother to read and understand the exception message he posted. He&#39;s passing an invalid empty string to <code>stoi()</code>. If he&#39;d try using a debugger, he&#39;d know that."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1469648117, "post_id": 38621625, "comment_id": 64629146, "body": "Did you try printing out the contents of the string before trying to convert it to an integer?"}, {"owner": {"reputation": 13, "user_id": 6643387, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0WMBRNG8Lt4/AAAAAAAAAAI/AAAAAAAAAAA/_0dKvscwPAQ/photo.jpg?sz=128", "display_name": "David Gelovani", "link": "https://stackoverflow.com/users/6643387/david-gelovani"}, "reply_to_user": {"reputation": 697, "user_id": 2096928, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/du211.png?s=128&g=1", "display_name": "Joel Trauger", "link": "https://stackoverflow.com/users/2096928/joel-trauger"}, "edited": false, "score": 0, "creation_date": 1469648302, "post_id": 38621625, "comment_id": 64629218, "body": "@JoelTrauger I have posted the #include statements.  And what would I have to pass through stoi? I tried passing string beginning_time but it gives me an error."}, {"owner": {"reputation": 697, "user_id": 2096928, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/du211.png?s=128&g=1", "display_name": "Joel Trauger", "link": "https://stackoverflow.com/users/2096928/joel-trauger"}, "reply_to_user": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1469648876, "post_id": 38621625, "comment_id": 64629541, "body": "@RobK We were all n00bs once. There is no such thing as a dumb question. However ridiculous the question may be, someone is asking it because they simply cannot see the answer to it. Heck, today I tried to send an email with code and couldn&#39;t understand why it wasn&#39;t sending. I left out the <code>email.send(message);</code> code. So give him a break and answer his question or move on."}, {"owner": {"reputation": 697, "user_id": 2096928, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/du211.png?s=128&g=1", "display_name": "Joel Trauger", "link": "https://stackoverflow.com/users/2096928/joel-trauger"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1469649397, "post_id": 38621625, "comment_id": 64629823, "body": "@juanchopanza This is true, hence the answer I posted. I showed where he modified the variable, showed where he accessed it, and then posted a link to the cplusplus website showing how his code is causing the error. Nowhere have I actually posted a solution because that is his to come up with. I just don&#39;t see how his question warrants this many negative votes."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 697, "user_id": 2096928, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/du211.png?s=128&g=1", "display_name": "Joel Trauger", "link": "https://stackoverflow.com/users/2096928/joel-trauger"}, "edited": false, "score": 0, "creation_date": 1469649475, "post_id": 38621625, "comment_id": 64629877, "body": "@JoelTrauger It shows no research effort and is cluttered with irrelevant code. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 697, "user_id": 2096928, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/du211.png?s=128&g=1", "display_name": "Joel Trauger", "link": "https://stackoverflow.com/users/2096928/joel-trauger"}, "is_accepted": false, "score": 0, "last_activity_date": 1469648967, "last_edit_date": 1469648967, "creation_date": 1469648611, "answer_id": 38621858, "question_id": 38621625, "link": "https://stackoverflow.com/questions/38621625/weird-error-related-to-stoi/38621858#38621858", "title": "Weird error related to stoi?", "body": "<p><code>string temp = \"\";</code></p>\n\n<pre><code>int main()\n{\n    ...\n    int time = stoi(temp);\n    ...\n}\n</code></pre>\n\n<p>Where do you change the value of temp. <code>stoi</code> is erroring out because the input value is an empty string. <a href=\"http://www.cplusplus.com/reference/string/stoi/?kw=stoi#exceptions\" rel=\"nofollow\">See here</a> under the Exceptions entry at the bottom.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1469648881, "creation_date": 1469648881, "answer_id": 38621941, "question_id": 38621625, "link": "https://stackoverflow.com/questions/38621625/weird-error-related-to-stoi/38621941#38621941", "title": "Weird error related to stoi?", "body": "<p>First in this code:</p>\n\n<pre><code>string beginning_time;\n\nvoid convertTimeintoInt(string beginning_time)\n{\n   for(char a : beginning_time)\n   {\n      if(a == ':')\n           continue;\n      else\n           temp += a;\n   }\n}\n</code></pre>\n\n<p>you have global variable <code>beginning_time</code> as well as argument with the same name. So inside function you use local variable, not global one. This is one of the reason it is recommended to avoid global vars as much as possible.</p>\n\n<p>Second you only define function <code>convertTimeintoInt</code> but you do not actually call it, so it does nothing. Instead you should avoid using global vars and make your function like this:</p>\n\n<pre><code>int convertTimeintoInt( string beginning_time )\n{\n    string temp;\n    for(char a : beginning_time)\n    {\n        if(a == ':')\n            continue;\n        else\n            temp += a;\n    }\n    return std::stoi( temp );\n}\n</code></pre>\n\n<p>and then call it inside <code>main()</code>:</p>\n\n<pre><code>    split &gt;&gt; beginning_time;\n    split &gt;&gt; minutes;\n    int time = convertTimeintoInt( beginning_time );\n</code></pre>\n\n<p>Note: I did just copy your function implementation assuming it has correct behavior for you.</p>\n"}], "owner": {"reputation": 13, "user_id": 6643387, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0WMBRNG8Lt4/AAAAAAAAAAI/AAAAAAAAAAA/_0dKvscwPAQ/photo.jpg?sz=128", "display_name": "David Gelovani", "link": "https://stackoverflow.com/users/6643387/david-gelovani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4336, "favorite_count": 0, "answer_count": 2, "score": -6, "last_activity_date": 1469648967, "creation_date": 1469647754, "last_edit_date": 1469648180, "question_id": 38621625, "link": "https://stackoverflow.com/questions/38621625/weird-error-related-to-stoi", "title": "Weird error related to stoi?", "body": "<p>I am trying to convert a string into an int by using stoi, but for some reason it is giving me an error and giving me this message: </p>\n\n<p>\"libc++abi.dylib: terminating with uncaught exception of type std::invalid_argument: stoi: no conversion\"</p>\n\n<p>The line that deals with stoi is bolded, toward the bottom of the code.</p>\n\n<p>Here is my code:</p>\n\n<pre><code> #include \"LongDistanceCalls.h\"\n #include &lt;iostream&gt;\n #include &lt;string&gt;\n #include &lt;fstream&gt;\n #include &lt;sstream&gt;\n #include &lt;algorithm&gt;\n #include &lt;iterator&gt;\n\nusing namespace std;  \n\n\nstring line;\nstring temp = \"\";\nstring beginning_time;\n\nvoid convertTimeintoInt(string beginning_time)\n{\n  for(char a : beginning_time)\n  {\n     if(a == ':')\n            continue;\n    else\n       temp += a;\n  }\n}\n\nint main()\n{\n  ifstream inFile;\n  string day;\n  int minutes;\n  double total_callpay;\n  //opens .txt file\n  inFile.open(\"CallRecords.txt\");\n\n  //if .txt file is openable, printed to command line.\n  if (inFile.is_open())\n  {\n     cout&lt;&lt;\"Day Time Duration Cost\"&lt;&lt;endl;\n\n     while(getline(inFile,line))\n     {\n         istringstream split(line);//splits each string into 3 seperate strings (day, beginning_time, minutes)\n\n        while(split)\n             {\n               split &gt;&gt; day;\n               split &gt;&gt; beginning_time;\n               split &gt;&gt; minutes;\n               **int time = stoi(temp);**\n               time = time &gt; 0 &amp;&amp; time &lt; 2400;\n</code></pre>\n"}, {"tags": ["c++", "c++11", "lambda", "auto"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1469739053, "post_id": 38621623, "comment_id": 64675641, "body": "There&#39;s the <code>bool b = true; auto a = [&amp;b] { return b; }; b = false;</code> solution but this of course doesn&#39;t generalize to all situations."}], "answers": [{"tags": [], "owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "is_accepted": true, "score": 35, "last_activity_date": 1469647933, "creation_date": 1469647933, "answer_id": 38621664, "question_id": 38621623, "link": "https://stackoverflow.com/questions/38621623/c11-change-auto-lambda-to-a-different-lambda/38621664#38621664", "title": "C++11 Change `auto` Lambda to a different Lambda?", "body": "<p>Every lambda expression creates a new unique type, so the type of your first lambda is different from the type of your second (<a href=\"http://coliru.stacked-crooked.com/a/82e1f1bfbaf084a3\">example</a>). Additionally the copy-assignment operator of a lambda is defined as deleted (<a href=\"http://coliru.stacked-crooked.com/a/1fdea6ca65233aee\">example</a>) so you're doubly-unable to do this. For a similar effect, you can have <code>a</code> be a <code>std::function</code> object though it'll cost you some performance</p>\n\n<pre><code>std::function&lt;bool()&gt; a = [] { return true; };\na = [] { return false; };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 11, "creation_date": 1469648260, "post_id": 38621686, "comment_id": 64629203, "body": "The moment when C++ has officially entered the Perl realm!"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1471964485, "post_id": 38621686, "comment_id": 65556205, "body": "@jaggedSpire I have needed this so bad so many times, and I thought the only solution was the other <code>function</code> answers to this question. How did you find out about this? I&#39;ve never seen it before."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1471964702, "post_id": 38621686, "comment_id": 65556344, "body": "@JonathanMee I actually found it from following a related link in the sidebar, once upon a time: <a href=\"http://stackoverflow.com/questions/18889028\">A positive lambda: <code>+[]{}</code> - What sorcery is this?</a>"}], "tags": [], "owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "is_accepted": false, "score": 34, "last_activity_date": 1471443823, "last_edit_date": 1495540863, "creation_date": 1469648007, "answer_id": 38621686, "question_id": 38621623, "link": "https://stackoverflow.com/questions/38621623/c11-change-auto-lambda-to-a-different-lambda/38621686#38621686", "title": "C++11 Change `auto` Lambda to a different Lambda?", "body": "<p>A Lambda may be converted to a function pointer using the unary <code>+</code> operator like so:</p>\n\n<pre><code>+[]{return true;}\n</code></pre>\n\n<p>so long as the capture group is empty and it doesn't have <code>auto</code> arguments.<sup>1</sup></p>\n\n<p>If you do this, you may assign different lambdas to the same variable as long as the lambdas all have the same signature.</p>\n\n<p>In your case, </p>\n\n<pre><code>auto a = +[]{return true;};\na = +[]{return false;};\n</code></pre>\n\n<p><sup><a href=\"http://coliru.stacked-crooked.com/a/294e84c9e1c2cc69\" rel=\"noreferrer\"><em>Live example on Coliru</em></a></sup></p>\n\n<p>would both compile and act as you expect.<sup>2</sup> You may use the function pointers in the same way you would expect to use a lambda, since both will act as <a href=\"https://stackoverflow.com/q/356950/4892076\"><em>functors</em></a>.</p>\n\n<hr>\n\n<p><sup>1. In C++14, you can declare lambdas with <code>auto</code> as the argument type, like <code>[](auto t){}</code>. These are <a href=\"https://stackoverflow.com/q/17233547/4892076\"><em>generic lambdas</em></a>, and have a templated <code>operator()</code>. Since a function pointer can't represent a templated function, the <code>+</code> trick won't work with generic lambdas.</sup></p>\n\n<p><sup>2. Technically, you don't need the second <code>+</code> operator on the assignment. The lambda would convert to the function pointer type on assignment. I like the consistency, though.</sup></p>\n"}, {"comments": [{"owner": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "edited": false, "score": 0, "creation_date": 1469692262, "post_id": 38621714, "comment_id": 64644457, "body": "I guess Ryan beat you to it in posting the same thing.  But you\u2019re missing a semicolon."}], "tags": [], "owner": {"reputation": 1631, "user_id": 973872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b0517445cf0668757468326b18bf86?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/973872/nate"}, "is_accepted": false, "score": 4, "last_activity_date": 1470144713, "last_edit_date": 1470144713, "creation_date": 1469648128, "answer_id": 38621714, "question_id": 38621623, "link": "https://stackoverflow.com/questions/38621623/c11-change-auto-lambda-to-a-different-lambda/38621714#38621714", "title": "C++11 Change `auto` Lambda to a different Lambda?", "body": "<p>Each lambda has a different type so you cannot change it. You could use a <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow\">std::function</a> to hold an arbitrary callable object, that can be changed at will.</p>\n\n<pre><code>std::function &lt;bool ()&gt; a = [] { return true; };\na = [] { return false; };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 1, "creation_date": 1508316583, "post_id": 46805842, "comment_id": 80559346, "body": "A bit more explanation would&#39;ve been nice."}], "tags": [], "owner": {"reputation": 11, "user_id": 8794450, "user_type": "registered", "profile_image": "https://graph.facebook.com/1953810324832947/picture?type=large", "display_name": "Alex Melnikov", "link": "https://stackoverflow.com/users/8794450/alex-melnikov"}, "is_accepted": false, "score": 1, "last_activity_date": 1508420678, "last_edit_date": 1508420678, "creation_date": 1508315378, "answer_id": 46805842, "question_id": 38621623, "link": "https://stackoverflow.com/questions/38621623/c11-change-auto-lambda-to-a-different-lambda/46805842#46805842", "title": "C++11 Change `auto` Lambda to a different Lambda?", "body": "<p>We may use <a href=\"https://stackoverflow.com/a/23597817/4224575\">retrospective call</a> to convert lambda to std::function:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct memfun_type\n{\n  using type = void;\n};\n\ntemplate&lt;typename Ret, typename Class, typename... Args&gt;\nstruct memfun_type&lt;Ret(Class::*)(Args...) const&gt;\n{\n  using type = std::function&lt;Ret(Args...)&gt;;\n};\n\ntemplate&lt;typename F&gt;\ntypename memfun_type&lt;decltype(&amp;F::operator())&gt;::type\nFFL(F const &amp;func)\n{ // Function from lambda !\n  return func;\n}\n</code></pre>\n\n<p>After that we will be able to do (since 'a' is std::function type now ):</p>\n\n<pre><code>auto a = FFL([] { return false; });\na = FFL([] { return true; });\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 1, "last_activity_date": 1516634850, "creation_date": 1516634850, "answer_id": 48384990, "question_id": 38621623, "link": "https://stackoverflow.com/questions/38621623/c11-change-auto-lambda-to-a-different-lambda/48384990#48384990", "title": "C++11 Change `auto` Lambda to a different Lambda?", "body": "<p>Since <code>C++17</code> you can have the <code>std::function</code> template parameter deduced thanks to <a href=\"http://en.cppreference.com/w/cpp/language/class_template_argument_deduction\" rel=\"nofollow noreferrer\">Class template argument deduction</a>. It even works with capturing lambdas:</p>\n\n<pre><code>int a = 24;\n\nstd::function f = [&amp;a] (int p) { return p + a; };\nf               = [&amp;a] (int p) { return p - a; };\nf               = []   (int p) { return p; };\n</code></pre>\n\n<p>This comes in handy with more complex signatures and even more with deduced return types.</p>\n"}], "owner": {"reputation": 1449, "user_id": 5361456, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4b6a9a3c7b529ca94380acfeac705aee?s=128&d=identicon&r=PG&f=1", "display_name": "Archie Gertsman", "link": "https://stackoverflow.com/users/5361456/archie-gertsman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2632, "favorite_count": 1, "accepted_answer_id": 38621664, "answer_count": 5, "score": 22, "last_activity_date": 1516634850, "creation_date": 1469647745, "last_edit_date": 1469734475, "question_id": 38621623, "link": "https://stackoverflow.com/questions/38621623/c11-change-auto-lambda-to-a-different-lambda", "title": "C++11 Change `auto` Lambda to a different Lambda?", "body": "<p>Say I have the following variable containing a lambda:</p>\n\n<pre><code>auto a = [] { return true; };\n</code></pre>\n\n<p>And I want <code>a</code> to return <code>false</code> later on. Could I do something along the lines of this? </p>\n\n<pre><code>a = [] { return false; };\n</code></pre>\n\n<p>This syntax gives me the following errors:</p>\n\n<pre><code>binary '=' : no operator found which takes a right-hand operand of type \n'main::&lt;lambda_a7185966f92d197a64e4878ceff8af4a&gt;' (or there is no acceptable conversion)\n\nIntelliSense: no operator \"=\" matches these operands\n        operand types are: lambda []bool ()-&gt;bool = lambda []bool ()-&gt;bool\n</code></pre>\n\n<p>Is there any way to achieve something like this? I would like to change the <code>auto</code> variable to a different lambda. I'm relitively a beginner so I may be missing some knowledge about <code>auto</code> or lambdas. Thanks.</p>\n"}, {"tags": ["c++", "arrays", "string", "function", "pointers"], "comments": [{"owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "reply_to_user": {"reputation": 1854, "user_id": 6539544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0075a1be0f17b9ac03dbb0b9b27d5aab?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Bajaj", "link": "https://stackoverflow.com/users/6539544/vaibhav-bajaj"}, "edited": false, "score": 0, "creation_date": 1469647604, "post_id": 38621469, "comment_id": 64628862, "body": "After you enter a string nothing is printed, you press enter and it just keeps starting new lines."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "edited": false, "score": 0, "creation_date": 1469647577, "post_id": 38621554, "comment_id": 64628852, "body": "should I just put a break above the last bracket?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "edited": false, "score": 0, "creation_date": 1469647826, "post_id": 38621554, "comment_id": 64628986, "body": "@Zjm4192 a <code>strptr++</code> and a test for the end of the string should be sufficient."}, {"owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "edited": false, "score": 0, "creation_date": 1469649498, "post_id": 38621554, "comment_id": 64629889, "body": "What do the &quot;cur&quot; and last&quot; words do?"}, {"owner": {"reputation": 778, "user_id": 1836540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4466fdeadf066a319e6afba5df630960?s=128&d=identicon&r=PG", "display_name": "Vyacheslav Napadovsky", "link": "https://stackoverflow.com/users/1836540/vyacheslav-napadovsky"}, "reply_to_user": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "edited": false, "score": 0, "creation_date": 1469649888, "post_id": 38621554, "comment_id": 64630077, "body": "@Zjm4192 <code>cur_</code> is for currently processing symbol. <code>last_</code> is for symbol that was processed before current. P. S. I could be not good at English."}], "tags": [], "owner": {"reputation": 778, "user_id": 1836540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4466fdeadf066a319e6afba5df630960?s=128&d=identicon&r=PG", "display_name": "Vyacheslav Napadovsky", "link": "https://stackoverflow.com/users/1836540/vyacheslav-napadovsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1469648701, "last_edit_date": 1469648701, "creation_date": 1469647513, "answer_id": 38621554, "question_id": 38621469, "link": "https://stackoverflow.com/questions/38621469/program-is-not-calculating-functions-after-user-enters-string/38621554#38621554", "title": "Program is not calculating functions after user enters string", "body": "<p>You have double infinite loop in <code>Count_All</code> function implementation.</p>\n\n<p>I've fixed your two functions and simplified them. It was difficult for me without huge changes. And why <code>total</code> has type <code>double</code>? How characters number can be non-integer?</p>\n\n<pre><code>void Count_All(const char* strptr, int&amp; word, int&amp; total, int&amp; pun)\n{\n    bool last_isalnum = false;\n    for (word = total = pun = 0; *strptr != '\\0'; ++strptr) {\n        bool cur_isalnum = isalnum(*strptr) != 0;\n        bool cur_ispunct = ispunct(*strptr) != 0;\n        if (last_isalnum != cur_isalnum)\n            ++word;\n        if (cur_ispunct)\n            ++pun;\n        if (cur_ispunct || cur_isalnum)\n            ++total;\n        last_isalnum = cur_isalnum;\n    }\n}\n\ndouble Calc_Average(int word, int pun, int total)\n{\n    return static_cast&lt;double&gt;(total - pun) / word;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "edited": false, "score": 0, "creation_date": 1469647793, "post_id": 38621611, "comment_id": 64628971, "body": "Including replacing  int index = 0  or does that stay the same?"}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "edited": false, "score": 0, "creation_date": 1469647869, "post_id": 38621611, "comment_id": 64629010, "body": "Updated.  You never actually use <code>index</code>, so you don&#39;t need it at all."}, {"owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "edited": false, "score": 0, "creation_date": 1469647959, "post_id": 38621611, "comment_id": 64629074, "body": "okay so I can delete the &quot;int index = 0&quot; and then go through and replace all of the &quot;index++&quot; with strptr++?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "edited": false, "score": 0, "creation_date": 1469648063, "post_id": 38621611, "comment_id": 64629118, "body": "@Zjm4192 if allowed by the constraints of your assignment, seriously consider Miles&#39; recommendation of using <code>std::string</code>."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469648185, "post_id": 38621611, "comment_id": 64629175, "body": "@user4581301 I think the first <code>while</code> condition is sufficient check for the end of string.  A check for <code>nullptr</code> would be good, but isn&#39;t the problem here so I didn&#39;t mention it.  <code>std::string</code> would, of course, alleviate the need for either of those checks."}, {"owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "edited": false, "score": 0, "creation_date": 1469648336, "post_id": 38621611, "comment_id": 64629237, "body": "unfortunately I cannot use std::string as I have not learned about it yet."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "edited": false, "score": 0, "creation_date": 1469648385, "post_id": 38621611, "comment_id": 64629267, "body": "@Zjm4192 no time like the present to learn. If you always wait to be taught, you will have a very hard time holding a job."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469648540, "post_id": 38621611, "comment_id": 64629350, "body": "@user4581301 In that case <code>strptr</code> ends up pointing to the NUL terminator.  The final <code>strptr++</code> should be inside the last <code>if</code> block to guard against stepping past the terminator and into the unknown."}], "tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": false, "score": 0, "last_activity_date": 1469648636, "last_edit_date": 1469648636, "creation_date": 1469647720, "answer_id": 38621611, "question_id": 38621469, "link": "https://stackoverflow.com/questions/38621469/program-is-not-calculating-functions-after-user-enters-string/38621611#38621611", "title": "Program is not calculating functions after user enters string", "body": "<p>You never advance <code>strptr</code>, so all of your comparisons are against the same <code>char</code> and <code>Count_All</code> loops forever.</p>\n\n<p>You should replace all instances of <code>index++</code> with <code>strptr++</code>.  That will cause <code>strptr</code> to move down the string and look at each character, instead of looking at the same character over and over again.  After doing this <code>index</code> is unused, and can be removed.</p>\n\n<p>Additionally, your final <code>strptr++</code> should be inside the <code>if</code> block above it to avoid accidentally stepping past the end of your string and into the unknown.</p>\n\n<p>Better yet would be to use a <code>std::string</code> and get rid of all these sorts of issues that arise from using raw <code>char[]</code>s.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6641383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/729b12c4378d2e6778982d5fdb762875?s=128&d=identicon&r=PG&f=1", "display_name": "venum", "link": "https://stackoverflow.com/users/6641383/venum"}, "is_accepted": false, "score": 0, "last_activity_date": 1469652440, "last_edit_date": 1469652440, "creation_date": 1469649598, "answer_id": 38622151, "question_id": 38621469, "link": "https://stackoverflow.com/questions/38621469/program-is-not-calculating-functions-after-user-enters-string/38622151#38622151", "title": "Program is not calculating functions after user enters string", "body": "<p>For a start, it seems like you have infinite loops here</p>\n\n<pre><code>while ((isspace(*strptr)) || (ispunct(*strptr))) (line 42)\n</code></pre>\n\n<p>and here</p>\n\n<pre><code>while ((isalnum(*strptr)) || (ispunct(*strptr)))   (line 51)\n</code></pre>\n\n<p>You are always checking the content of the same location without doing any pointer arithmetic to advance the memory location you are checking.</p>\n"}], "owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1469652440, "creation_date": 1469647207, "question_id": 38621469, "link": "https://stackoverflow.com/questions/38621469/program-is-not-calculating-functions-after-user-enters-string", "title": "Program is not calculating functions after user enters string", "body": "<p>I have run into an issue with my program. The program here is supposed to accept a pointer to a C-string as an argument and calculate the number of words contained in the string as well as the number of letters in the string. Both of those values are supposed to be communicated back to the main function, but without using global variables. After that function, I am supposed to write another function that accepts the number of letters and the number of words and sends the average number of letters per word (or average word size) back to the main function. The functions I wrote are supposed to do all of the above and also exclude punctuation and spaces from the counts. The problem I am having though is that when I enter string as the user and press enter, no calculations occur. I can keep pressing enter until no end, and I cannot figure out why that is happening. Any insight would be appreciated, I am new to pointers and C-String.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nvoid Count_All(char*, int&amp;, double&amp;, int&amp;); // Function prototype.\ndouble Calc_Average (char*, int, int, double); // Function prototype.\n\nint main()\n{\n    const int size = 500;\n    char userString[size];\n    int Word = 0;\n    int Pun = 0;\n    double Total_Characters = 0;\n    double Average = 0.0;\n\n    cout &lt;&lt; \"Please enter a string of 500 or less characters: \";\n    cin.getline(userString, size);\n    cout &lt;&lt; \"\\n\";\n\n    Count_All (userString, Word, Total_Characters, Pun);\n    cout &lt;&lt; \"Number of words in the string: \" &lt;&lt; Word &lt;&lt; \"\\n\";\n    Average = Calc_Average (userString, Word, Pun, Total_Characters);\n    cout &lt;&lt;\"\\nAverage number of letters per word: \"&lt;&lt; fixed &lt;&lt;\n    showpoint &lt;&lt; setprecision(2) &lt;&lt; Average &lt;&lt; \"\\n\" &lt;&lt; endl;\n\n\n    cin.ignore(1);\n    return 0;\n}\n\nvoid Count_All (char*strptr, int &amp;Word, double &amp;Total_Characters, int &amp;Pun) // Counts all characters and types.\n{\n    int index = 0;\n\n    while (*strptr != '\\0')\n    {\n        if ((isspace(*strptr)) || (ispunct(*strptr)))\n        {\n            while ((isspace(*strptr)) || (ispunct(*strptr)))\n            {\n                index++;\n            }\n        }\n\n        if ((isalnum(*strptr)) || (ispunct(*strptr)))\n        {\n            Word++;\n            while ((isalnum(*strptr))||(ispunct(*strptr)))\n            {\n                index++;\n                Total_Characters++; // Counting the total printable characters (including digits and punctuation).\n\n                if((ispunct(*strptr)))\n                {\n                    Pun++; // Counting punctuation.\n                }\n\n            }\n        }\n        index++;\n    }\n}\n\ndouble Calc_Average(char*strptr, int Word, int Pun, double Total_Characters)  // Calculates the average number of characters per words.\n{\n    double Average = 0.0;\n    Total_Characters = Total_Characters - Pun; // Subtracting punctuation from all of the characters in the string (not including spaces).\n    Average = (Total_Characters / Word);\n    return Average;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1469647173, "post_id": 38621340, "comment_id": 64628650, "body": "You need to loop through every element and apply the xor to each element of your <code>QByteArray</code>. This should be easy. The example for operator[](int) could be used as a starting point: <a href=\"http://doc.qt.io/qt-5/qbytearray.html#operator-5b-5d\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qbytearray.html#operator-5b-5d</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1469647353, "post_id": 38621340, "comment_id": 64628745, "body": "Do you have the python script that encrypts the data? If so maybe you should edit your question and add that."}, {"owner": {"reputation": 95, "user_id": 6346986, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10204750308318027/picture?type=large", "display_name": "Karsten Andersen", "link": "https://stackoverflow.com/users/6346986/karsten-andersen"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1469647670, "post_id": 38621340, "comment_id": 64628900, "body": "Okay! That&#39;s what I was thinking of doing but I am new to Qt so I was a little lost. I updated with the python code though"}, {"owner": {"reputation": 977, "user_id": 6385043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7c3064c86e6a7e521442a3a9bb7303d?s=128&d=identicon&r=PG&f=1", "display_name": "maxik", "link": "https://stackoverflow.com/users/6385043/maxik"}, "edited": false, "score": 0, "creation_date": 1469728665, "post_id": 38621340, "comment_id": 64670254, "body": "I do not know the use case, but why not using a proper encryption method which is supported by Qt and some python library?"}, {"owner": {"reputation": 95, "user_id": 6346986, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10204750308318027/picture?type=large", "display_name": "Karsten Andersen", "link": "https://stackoverflow.com/users/6346986/karsten-andersen"}, "edited": false, "score": 0, "creation_date": 1469732823, "post_id": 38621340, "comment_id": 64672562, "body": "Is there an encryption method supported by both?"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1469733272, "post_id": 38621340, "comment_id": 64672783, "body": "Note that <code>sizeof(char)</code> is <i>defined</i> to be 1 in C++ (and C), so using it in your formula is unnecessary and needlessly confuses things."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1469733377, "post_id": 38621340, "comment_id": 64672839, "body": "So what is the problem with the code in the question now?"}, {"owner": {"reputation": 95, "user_id": 6346986, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10204750308318027/picture?type=large", "display_name": "Karsten Andersen", "link": "https://stackoverflow.com/users/6346986/karsten-andersen"}, "edited": false, "score": 0, "creation_date": 1469733758, "post_id": 38621340, "comment_id": 64673033, "body": "It still doesn&#39;t properly decrypt the json file. When it is used in my application, it doesn&#39;t work"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1469735376, "post_id": 38621340, "comment_id": 64673806, "body": "Well, at the very least, show example encrypted data (in hex because you&#39;re dealing with bits, see <code>QByteArray::toHex()</code> for convenience), expected output and actual output (also in hex). <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> would be nice, of course."}, {"owner": {"reputation": 95, "user_id": 6346986, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10204750308318027/picture?type=large", "display_name": "Karsten Andersen", "link": "https://stackoverflow.com/users/6346986/karsten-andersen"}, "edited": false, "score": 0, "creation_date": 1469814435, "post_id": 38621340, "comment_id": 64710209, "body": "So I got it working on my mac build but for some reason it is crashing on windows. The code is the same. The data is the same. I just don&#39;t know why"}, {"owner": {"reputation": 153, "user_id": 5330401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52e78f78cbae9f502bfcef2e0ba7d8f6?s=128&d=identicon&r=PG&f=1", "display_name": "Gall Annonim", "link": "https://stackoverflow.com/users/5330401/gall-annonim"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1504516124, "post_id": 38621340, "comment_id": 79027280, "body": "@drescherjm that method is very slow. xoring 1mb qbytearray that way takes me around 150 ms. For hand-made byte array (unsigned char array) it takes less than 10 ms (both ran on same potato PC). Im using it for entropy boosting, in my code so I would love to have fast way on QByteArray."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1504535848, "post_id": 38621340, "comment_id": 79038953, "body": "Are you timing an optimized / Release build?"}], "owner": {"reputation": 95, "user_id": 6346986, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/10204750308318027/picture?type=large", "display_name": "Karsten Andersen", "link": "https://stackoverflow.com/users/6346986/karsten-andersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1520, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1469724459, "creation_date": 1469646773, "last_edit_date": 1469724459, "question_id": 38621340, "link": "https://stackoverflow.com/questions/38621340/how-to-xor-a-qbytearray", "title": "How to XOR a QByteArray?", "body": "<p>How would I XOR a QByteArray in C++? I am trying to decrypt a json file that had been XOR encrypted by a python script so I can load it as a QJsonDocument</p>\n\n<p><strong>Update</strong></p>\n\n<pre><code>def encrypt(input):\n    key = ['K', 'C', 'Q']\n    output = []\n\n    for i in range(len(input)):\n        xor_num = ord(input[i]) ^ ord(key[i % len(key)])\n        output.append(chr(xor_num))\n\n    return ''.join(output)\n</code></pre>\n\n<p>and here is what I have so far in my c++ code for xor the QByteArray:</p>\n\n<pre><code>QByteArray arr = file.readAll();\nchar key[3] = {'K', 'C', 'Q'};\nfor (int i = 0; i &lt; arr.size(); i++)\n    arr[i] = arr[i] ^ key[i % (sizeof(key) / sizeof(char))];\n</code></pre>\n"}, {"tags": ["c++", "design-patterns"], "comments": [{"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1469650255, "post_id": 38621335, "comment_id": 64630250, "body": "This is not related to C++, so why is the tag there?"}, {"owner": {"reputation": 9429, "user_id": 1264018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0338476eea2e564d77246b7234773e1?s=128&d=identicon&r=PG&f=1", "display_name": "feelfree", "link": "https://stackoverflow.com/users/1264018/feelfree"}, "reply_to_user": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1469652195, "post_id": 38621335, "comment_id": 64631224, "body": "@Ceros The demonstration codes are in C++"}, {"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1469652780, "post_id": 38621335, "comment_id": 64631540, "body": "But your question is about code design not c++"}], "answers": [{"tags": [], "owner": {"reputation": 830, "user_id": 5630061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f67ef8f5d4b99d8f7e6d8f5efba127bf?s=128&d=identicon&r=PG&f=1", "display_name": "Dafang Cao", "link": "https://stackoverflow.com/users/5630061/dafang-cao"}, "is_accepted": false, "score": 0, "last_activity_date": 1469666006, "creation_date": 1469666006, "answer_id": 38625318, "question_id": 38621335, "link": "https://stackoverflow.com/questions/38621335/is-this-a-example-where-abstract-factory-pattern-is-used/38625318#38625318", "title": "is this a example where abstract factory pattern is used?", "body": "<p>Unless you are reusing <code>MethodFactory</code>, I'd recommend the following:</p>\n\n<pre><code>struct Method1 {\n    using PreProcessing_t = GaussianFiltering;\n    using FeatureExtractor_t = FFTStatictis;\n    using Classifier_t = SVMClassifier;\n};\n\nclass PhotoRecognizer\n{\npublic:\n    template&lt;typename Method&gt;\n    PhotoRecognizer(Method tag) {\n        pPreProcessing.reset(new typename Method::PreProcessing_t());\n        pFeatureExtractor.reset(new typename Method::FeatureExtractor_t());\n        pClassifier.reset(new typename Method::Classifier_t());\n    }\n};\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>PhotoRecognizer(Method1());\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "is_accepted": true, "score": 2, "last_activity_date": 1470048107, "creation_date": 1470048107, "answer_id": 38696781, "question_id": 38621335, "link": "https://stackoverflow.com/questions/38621335/is-this-a-example-where-abstract-factory-pattern-is-used/38696781#38696781", "title": "is this a example where abstract factory pattern is used?", "body": "<p>As so often there is no ultimate \"right\" method to do it, and the answer depends a lot on how the project will be used. So if it is only for quick tests, done once and never looked back - go on and use enums if it is your heart's desire, nobody should stop you.</p>\n\n<p>However, if you plan to extend the possible methods over time, I would discourage the usage of your second approach with enums. The reason is: every time you want to add a new method you have to change <code>PhotoRecognizer</code> class, so you have to read the code, to remember what it is doing and if somebody else should do it - it would take even more time. </p>\n\n<p>The design with enums violates two first rules of SOLID (<a href=\"https://en.wikipedia.org/wiki/SOLID_(object-oriented_design)\" rel=\"nofollow\">https://en.wikipedia.org/wiki/SOLID_(object-oriented_design)</a>):</p>\n\n<ol>\n<li>Open-Closed-Principle (OCP): <code>PhotoRecognizer</code> class cannot be extended (adding a new method) without modification of its code.</li>\n<li>Single-Responsibility-Principle (SRP): <code>PhotoRecognizer</code> class does not only recognize the photo, but also serves as a factory for methods.</li>\n</ol>\n\n<p>Your first approach is better, because if you would define another <code>Method3</code> you could put it into your <code>PhotoRecognizer</code> and use it without changing the code of the class:</p>\n\n<pre><code> //define Method3 somewhere\n Method3 med;\n PhotoRecognizer recogMethod3(&amp;med);\n med.perform_recognition()\n</code></pre>\n\n<p>What I don't like about your approach, is that for every possible combination you have to write a class (<code>MethodX</code>), which might result in a lot of joyless work. I would do the following:</p>\n\n<pre><code>struct Method\n{\n    boost::shared_ptr&lt;PreProcessing&gt; pPreProcessing;\n    boost::shared_ptr&lt;FeatureExtractor&gt; pFeatureExtractor;\n    boost::shared_ptr&lt;Classifier&gt; pClassifier;\n};\n</code></pre>\n\n<p>See <code>Method</code> as as a collection of slots for different algorithms, it here because it is convenient to pass Processing/Extractor/Classifier in this way.</p>\n\n<p>And one could use a factory function:</p>\n\n<pre><code>   enum PreprocessingType {pType1, pType2, ...};\n   enum FeatureExtractorType {feType1, feType2, ..};\n   enum ClassifierType {cType1, cType2, ... };\n\n   Method createMethod(PreprocessingType p, FeatureExtractionType fe, ClassifierType ct){\n      Method result;\n      swith(p){\n          pType1: result.pPreprocessing.reset(new Type1Preprocessing());\n                  break;\n          ....\n      }\n      //the same for the other two: fe and ct\n      ....\n      return result\n   }\n</code></pre>\n\n<p>You might ask: \"But how about OCP?\" - and you would be right! One has to change the <code>createMethod</code> to add other (new) classes. And it might be not much comfort to you, that you still have the possibility to create a <code>Method</code>-object by hand, initialize the fields with the new classes and pass it to a <code>PhotoRecognizer</code>-constructor.</p>\n\n<p>But with C++, you have a mighty tool at your disposal - the templates:</p>\n\n<pre><code>   template &lt; typename P, typename FE, typename C&gt;\n   Method createMethod(){\n      Method result;\n      result.pPrepricessing.reset(new  P());\n      result.pFeatureExtractor.reset(new  FE());\n      result.pClassifier.reset(new  C());\n      return result\n   }\n</code></pre>\n\n<p>And you are free to chose any combination you want without changing the code:</p>\n\n<pre><code> //define P1, FE22, C2 somewhere\n Method medX=createMethod&lt;P1, FE22, C2&gt;();\n PhotoRecognizer recogMethod3(&amp;med);\n recogMethod3.perform_recognition()\n</code></pre>\n\n<p>There is yet another issue: What if the class <code>PreProcessingA</code> can not be used with the class <code>ClassifierB</code>? Earlier, if there was no class <code>MethodAB</code> nobody could use it, but now this mistake is possible.</p>\n\n<p>To handle this problem,  traits can be used:</p>\n\n<pre><code>template &lt;class A, class B&gt;\nstruct Together{\n  static const bool can_be_used=false;\n\ntemplate &lt;&gt;\nstruct Together&lt;class PreprocessingA, class ClassifierA&gt;{\n  static const bool can_be_used=true;\n}\n\ntemplate &lt; typename P, typename FE, typename C&gt;\nMethod createMethod(){\n    static_assert(Together&lt;P,C&gt;::can_be_used, \"classes cannot be used together\");\n      Method result;\n      ....\n}\n</code></pre>\n\n<p><strong>Conclusion</strong></p>\n\n<p>This approach has the following advantages:</p>\n\n<ol>\n<li>SRP, i.e. <code>PhotoRecognizer</code> - only recognizes, <code>Method</code> - only bundles the algorithm parts and <code>createMethod</code> - only creates a method.</li>\n<li>OCP, i.e. we can add new algorithms without changing the code of other classes/functions</li>\n<li>Thanks to traits, we can detect a wrong combination of part-algorithms at compile time.</li>\n<li>No boilerplate code / no code duplication. </li>\n</ol>\n\n<p><em>PS:</em></p>\n\n<p>You could say, why not scratch the whole <code>Method</code> class? One could just as well use:</p>\n\n<pre><code>   template &lt; typename P, typename FE, typename C&gt;\n   PhotoRecognizer{\n      P preprocessing;\n      FE featureExtractor;\n      C classifier;\n      ...\n   }\n\n   PhotoRecognizer&lt;P1, FE22, C2&gt; recog();\n   recog.perform_recognition();\n</code></pre>\n\n<p>Yeah it's true. This alternative has some advantages and disadvantages, one must know more about the project to be able to make the right trade off. But as default I would go with the more SRP-principle compliant approach of encapsulating the part-algorithms into the <code>Method</code> class.</p>\n"}, {"tags": [], "owner": {"reputation": 281, "user_id": 6651889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2003865e87884cbd9dde16f26ef4b314?s=128&d=identicon&r=PG", "display_name": "ChrisG0x20", "link": "https://stackoverflow.com/users/6651889/chrisg0x20"}, "is_accepted": false, "score": 1, "last_activity_date": 1470079616, "creation_date": 1470079616, "answer_id": 38706651, "question_id": 38621335, "link": "https://stackoverflow.com/questions/38621335/is-this-a-example-where-abstract-factory-pattern-is-used/38706651#38706651", "title": "is this a example where abstract factory pattern is used?", "body": "<p>I've implemented an abstract factory pattern here and there. I've always regret the decision after revisiting the code for maintenance. There is no case, I can think of, where one or more factory methods wouldn't have been a better idea. Therefore, I like your second approach best. Consider ditching the method class as ead suggested. Once your testing is complete you'll have one or more factory methods that construct exactly what you want, and best of all, you and others will be able to follow the code later. For example:</p>\n\n<pre><code>std::shared_ptr&lt;PhotoRecognizer&gt; CreateOptimizedPhotoRecognizer()\n{\n    auto result = std::make_shared&lt;PhotoRecognizer&gt;(\n        CreatePreProcessing(PreProcessingMethod::MedianFiltering),\n        CreateFeatureExtractor(FeatureExtractionMethod::WaveletStatictis),\n        CreateClassifier(ClassificationMethod::NearestNeighborClassifier)\n        );\n\n    return result;\n}\n</code></pre>\n\n<p>Use your factory method in code like this:</p>\n\n<pre><code>auto pPhotoRecognizer = CreateOptimizedPhotoRecognizer();\n</code></pre>\n\n<p>Create the enumerations as you suggested. I know, I know, open/closed principle... If you keep these enumerations in one spot you won't have a problem keeping them in sync with your factory methods. First the enumerations:</p>\n\n<pre><code>enum class PreProcessingMethod { MedianFiltering, FilteringTypeB };\nenum class FeatureExtractionMethod { WaveletStatictis, FeatureExtractionTypeB };\nenum class ClassificationMethod { NearestNeighborClassifier, SVMClassfier, NeuralNetworkClassifer };\n</code></pre>\n\n<p>Here's an example of a component factory method:</p>\n\n<pre><code>std::shared_ptr&lt;PreProcessing&gt; CreatePreProcessing(PreProcessingMethod method)\n{\n    std::shared_ptr&lt;PreProcessing&gt; result;\n\n    switch (method)\n    {\n        case PreProcessingMethod::MedianFiltering:\n            result = std::make_shared&lt;MedianFiltering&gt;();\n            break;\n\n        case PreProcessingMethod::FilteringTypeB:\n            result = std::make_shared&lt;FilteringTypeB&gt;();\n            break;\n\n        default:\n            break;\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>In order to determine the best combinations of algorithms you'll probably want to create some automated tests that run through all the possible permutations of components. One way to do this could be as straight forward as:</p>\n\n<pre><code>for (auto preProc = static_cast&lt;PreProcessingMethod&gt;(0); ;\n    preProc = static_cast&lt;PreProcessingMethod&gt;(static_cast&lt;int&gt;(preProc) + 1))\n{\n    auto pPreProcessing = CreatePreProcessing(preProc);\n    if (!pPreProcessing)\n        break;\n\n    for (auto feature = static_cast&lt;FeatureExtractionMethod&gt;(0); ;\n        feature = static_cast&lt;FeatureExtractionMethod&gt;(static_cast&lt;int&gt;(feature) + 1))\n    {\n        auto pFeatureExtractor = CreateFeatureExtractor(feature);\n        if (!pFeatureExtractor)\n            break;\n\n        for (auto classifier = static_cast&lt;ClassificationMethod&gt;(0); ;\n            classifier = static_cast&lt;ClassificationMethod&gt;(static_cast&lt;int&gt;(classifier) + 1))\n        {\n            auto pClassifier = CreateClassifier(classifier);\n            if (!pClassifier)\n                break;\n\n            {\n                auto pPhotoRecognizer = std::make_shared&lt;PhotoRecognizer&gt;(\n                    pPreProcessing,\n                    pFeatureExtractor,\n                    pClassifier\n                    );\n\n                auto testResults = TestRecognizer(pPhotoRecognizer);\n                PrintConfigurationAndResults(pPhotoRecognizer, testResults);\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 9429, "user_id": 1264018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0338476eea2e564d77246b7234773e1?s=128&d=identicon&r=PG&f=1", "display_name": "feelfree", "link": "https://stackoverflow.com/users/1264018/feelfree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 1, "accepted_answer_id": 38696781, "answer_count": 3, "score": 3, "last_activity_date": 1470079616, "creation_date": 1469646763, "question_id": 38621335, "link": "https://stackoverflow.com/questions/38621335/is-this-a-example-where-abstract-factory-pattern-is-used", "title": "is this a example where abstract factory pattern is used?", "body": "<p>Now I am developing a class for recognize a object in a photo, and this class is composed of several components (classes). For example,</p>\n\n<pre><code>class PhotoRecognizer\n{\n public:\n    int perform_recogniton()\n    {\n        pPreProcessing-&gt;do_preprocessing();\n        pFeatureExtractor-&gt;do_feature_extraction();\n        pClassifier-&gt;do_classification()\n     }\n\n    boost::shared_ptr&lt;PreProcessing&gt; pPreProcessing;\n    boost::shared_ptr&lt;FeatureExtractor&gt; pFeatureExtractor;\n    boost::shared_ptr&lt;Classifier&gt; pClassifier;\n\n}\n</code></pre>\n\n<p>In this example, when we use this class to perform recognition, we invoke other classes <code>PreProcessing</code>, <code>FeatureExtractor</code> and <code>Classifier</code>.  As you can image, there are many different methods to implement each class. For example, for the <code>Classifier</code> class, we can use <code>SVMClassfier</code> or <code>NeuralNetworkClassifer</code>, which is a derived class of the basic <code>Classifier</code> class. </p>\n\n<pre><code>class SVMClassifier: public Classifier\n{\n public:\n    void do_classification();\n\n};\n</code></pre>\n\n<p>Therefore, by using different elements within <code>PhotoRecognizer</code> class, we can create different kinds of <code>PhotoRecongnizer</code>. Now, I am building a benchmark to know how to combine these elements together to create an optimal <code>PhotoRecognizer</code>. One solution I can think of is to use abstract factory:</p>\n\n<pre><code>class MethodFactory\n{\n public:\n      MethodFactory(){};\n        boost::shared_ptr&lt;PreProcessing&gt; pPreProcessing;\n        boost::shared_ptr&lt;FeatureExtractor&gt; pFeatureExtractor;\n        boost::shared_ptr&lt;Classifier&gt; pClassifier;\n\n};\nclass Method1:public MethodFactory\n{\n  public:\n     Method1():MethodFactory()\n     { \n          pPreProcessing.reset(new GaussianFiltering);\n          pFeatureExtractor.reset(new FFTStatictis);\n          pClassifier.reset(new SVMClassifier);\n\n      }\n\n};\n\nclass Method2:public MethodFactory\n{\n  public:\n     Method1():MethodFactory()\n     { \n          pPreProcessing.reset(new MedianFiltering);\n          pFeatureExtractor.reset(new WaveletStatictis);\n          pClassifier.reset(new NearestNeighborClassifier);\n\n      }\n\n};\n\n\n\n class PhotoRecognizer\n    {\n     public:\n        PhotoRecognizer(MethodFactory *p):pFactory(p)\n        {\n         }\n        int perform_recogniton()\n        {\n            pFactory-&gt;pPreProcessing-&gt;do_preprocessing();\n            pFactory-&gt;pFeatureExtractor-&gt;do_feature_extraction();\n            pFactory-&gt;pClassifier-&gt;do_classification()\n         }\n\n       MethodFactory *pFactory;\n\n\n    }\n</code></pre>\n\n<p>So when I use Method1 to perform photo recognition, I can simply do the following:</p>\n\n<pre><code>Method1 med;\nPhotoRecognizer recogMethod1(&amp;med);\nmed.perform_recognition()\n</code></pre>\n\n<p>Further more, I can even make the class <code>PhotoRecognizer</code> more compact:</p>\n\n<pre><code>enum RecMethod\n{\n  Method1, Method2\n\n};\n\nclass PhotoRecognizer\n{\npublic:\n    PhotoRecognizer(RecMethod)\n    {\n       switch(RecMethod)\n       {\n          case Method1:\n             pFactory.reset(new Method1());\n             break;\n           ...\n         }\n     }\n\n    boost::shared_ptr&lt;MethodFactory&gt; pFactory;\n\n};\n</code></pre>\n\n<p>So here is my question: is abstract factory design pattern well justified in the situation described above? are there alternative solutions? Thanks.</p>\n"}, {"tags": ["c++", "c", "visual-studio-2010"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1469643978, "post_id": 38620516, "comment_id": 64626845, "body": "There is no such thing as <code>bool</code> in <code>C</code> (89).  You want to compile <code>C</code> code using Visual Studio, then you gotta write <code>C</code> code, not <code>C++</code> code."}, {"owner": {"reputation": 3740, "user_id": 1053938, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/59b4bb22f374b4224067923e11524a24?s=128&d=identicon&r=PG", "display_name": "jonhopkins", "link": "https://stackoverflow.com/users/1053938/jonhopkins"}, "edited": false, "score": 1, "creation_date": 1469644027, "post_id": 38620516, "comment_id": 64626884, "body": "Looks like <code>bool</code> is probably the problem: <a href=\"http://stackoverflow.com/a/18042253\">stackoverflow.com/a/18042253</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469646667, "post_id": 38620516, "comment_id": 64628403, "body": "@PaulMcKenzie: <code>bool</code> is a macro mapping to the <b>standard type</b> <code>_Bool</code>. and there are recommendations not to redefine <code>bool</code> etc. in the application. And C is not C89, but standard C, which is <b>only</b> C11."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469646853, "post_id": 38620516, "comment_id": 64628485, "body": "C and C++ are different languages. Don&#39;t compile C code as C++ and vice versa. If you want to use C, don&#39;t use MSVC, it is not standard compliant. It is stuck with the 27 year old outdated version C89/90. A modern C compiler like gcc or clang does support the standard (to use <code>bool</code>, you have to <code>#include &lt;stdbool.h&gt;</code> accortding to the standard."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1469649027, "post_id": 38620516, "comment_id": 64629612, "body": "@Olaf Visual Studio was used, given the error message.  The <code>C</code> compiler that comes with Visual Studio is only C89 compliant."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469655182, "post_id": 38620516, "comment_id": 64632717, "body": "@PaulMcKenzie: That&#39;s why it should not be used for C projects. Even MISRA noticed there was a new version of the standard 17 years ago."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1469646968, "post_id": 38620601, "comment_id": 64628545, "body": "The macro <code>bool</code> is not native, but it maps to the native type <code>_Bool</code> in that header by a macro (mandatory). That&#39;s because there is too much badly written C code in the wild which defines their own version of <code>bool</code> (you might be surprised how creative some ppl are how to define their own boolean type). So you can use <code>_Bool</code> as the native type (I don&#39;t recommend it though)."}, {"owner": {"reputation": 31, "user_id": 6590068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eec1af3a55700dc43156ef64c5b0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Wang", "link": "https://stackoverflow.com/users/6590068/stephen-wang"}, "edited": false, "score": 0, "creation_date": 1469647869, "post_id": 38620601, "comment_id": 64629011, "body": "@Keith My VS 2010 compiler supports C89/90, so I must look for another solution."}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "reply_to_user": {"reputation": 31, "user_id": 6590068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eec1af3a55700dc43156ef64c5b0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Wang", "link": "https://stackoverflow.com/users/6590068/stephen-wang"}, "edited": false, "score": 0, "creation_date": 1469655899, "post_id": 38620601, "comment_id": 64633059, "body": "@StephenWang That&#39;s what I mean, you need the header for the macro Olaf explained to be visible. Did you try it? Compiling on ideone.com failed without the include and succeeded with it."}, {"owner": {"reputation": 31, "user_id": 6590068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eec1af3a55700dc43156ef64c5b0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Wang", "link": "https://stackoverflow.com/users/6590068/stephen-wang"}, "edited": false, "score": 0, "creation_date": 1469710687, "post_id": 38620601, "comment_id": 64657130, "body": "@KeithM Correct, &lt;stdbool.h&gt; makes the _Bool macro visible.  The _Bool built-in type is only defined for C99 - see <a href=\"http://stackoverflow.com/questions/24602814/bool-data-type-of-c99-c\">bool-data-type-of-c99-c</a>.  So for installations of VS 2010, neither is &lt;stdbool.h&gt; installed nor is _Bool a built-in type."}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "reply_to_user": {"reputation": 31, "user_id": 6590068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eec1af3a55700dc43156ef64c5b0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Wang", "link": "https://stackoverflow.com/users/6590068/stephen-wang"}, "edited": false, "score": 0, "creation_date": 1469740734, "post_id": 38620601, "comment_id": 64676446, "body": "@StephenWang Ah, then if you think your question is not answered by the linked Duplicate, you should edit your question to explain why it is not a duplicate, and then request for it to be re-opened. :)"}, {"owner": {"reputation": 31, "user_id": 6590068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eec1af3a55700dc43156ef64c5b0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Wang", "link": "https://stackoverflow.com/users/6590068/stephen-wang"}, "edited": false, "score": 0, "creation_date": 1469766153, "post_id": 38620601, "comment_id": 64683027, "body": "@Keith It has - one of the later answers provided a workaround.  What is the best way to handle this as OP?"}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "reply_to_user": {"reputation": 31, "user_id": 6590068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eec1af3a55700dc43156ef64c5b0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Wang", "link": "https://stackoverflow.com/users/6590068/stephen-wang"}, "edited": false, "score": 0, "creation_date": 1469831171, "post_id": 38620601, "comment_id": 64717567, "body": "@StephenWang I&#39;m not sure I understand what you mean by &quot;handle this as OP.&quot;"}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "reply_to_user": {"reputation": 31, "user_id": 6590068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eec1af3a55700dc43156ef64c5b0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Wang", "link": "https://stackoverflow.com/users/6590068/stephen-wang"}, "edited": false, "score": 0, "creation_date": 1470089786, "post_id": 38620601, "comment_id": 64795491, "body": "@StephenWang Edited based on your rejected edit. Thanks! In the future, leave a comment or new answer for drastic changes."}], "tags": [], "owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "is_accepted": true, "score": 3, "last_activity_date": 1470089719, "last_edit_date": 1495539860, "creation_date": 1469644089, "answer_id": 38620601, "question_id": 38620516, "link": "https://stackoverflow.com/questions/38620516/c-syntax-error-c2143-syntax-error-missing-before/38620601#38620601", "title": "C syntax - error C2143: syntax error : missing &#39;)&#39; before &#39;*&#39;", "body": "<p><code>bool</code> is not a native C type, but for those using C99, try adding the line <code>#include &lt;stdbool.h&gt;</code>, which contains a macro that defines <code>bool</code>.</p>\n\n<p>Since the C compiler in all Visual Studio/MSVC products uses C89, <code>bool</code> is not defined at all for you, as a native C type or otherwise. Workarounds include using <code>typedef</code> or <code>enum</code> to define <code>bool</code>. Examples are in the below link.</p>\n\n<p>For more information, see: <a href=\"https://stackoverflow.com/questions/1608318/is-bool-a-native-c-type\">Is bool a native C type?</a></p>\n"}], "owner": {"reputation": 31, "user_id": 6590068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03eec1af3a55700dc43156ef64c5b0cc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Wang", "link": "https://stackoverflow.com/users/6590068/stephen-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1903, "favorite_count": 0, "closed_date": 1469644258, "accepted_answer_id": 38620601, "answer_count": 1, "score": 0, "last_activity_date": 1470089719, "creation_date": 1469643818, "question_id": 38620516, "link": "https://stackoverflow.com/questions/38620516/c-syntax-error-c2143-syntax-error-missing-before", "closed_reason": "Duplicate", "title": "C syntax - error C2143: syntax error : missing &#39;)&#39; before &#39;*&#39;", "body": "<p>Why am I getting a syntax error for my C header declaration?</p>\n\n<p>Here is my header file, viterbi.h:</p>\n\n<pre><code>#ifndef VITERBI_H\n#define VITERBI_H\nvoid vitdec(float* , int , int ,   bool* );\n#endif //VITERBI_H\n</code></pre>\n\n<p>And here is my implementation file, viterbi.c:</p>\n\n<pre><code>// viterbi.c   : Defines the entry point for the console application.\n//\n#include \"viterbi.h\"\n#include \"math.h\"\n//void vitdec(float* sd, int frameLen, int rate,   bool* hd);\n\nvoid vitdec(float* sd, int frameLen, int rate,   bool* hd)\n{\n    //... The rest of the function\n</code></pre>\n\n<p>The errors from the Visual Studio 2010 compiler read:</p>\n\n<pre><code>viterbi.h(4): error C2143: syntax error : missing ')' before '*'\nviterbi.h(4): error C2081: 'bool' : name in formal parameter list illegal\nviterbi.h(4): error C2143: syntax error : missing '{' before '*'\nviterbi.h(4): error C2059: syntax error : ')'\nviterbi.h(4): error C2059: syntax error : ';'\nviterbi.c(7): error C2065: 'bool' : undeclared identifier\nviterbi.c(7): error C2065: 'hd' : undeclared identifier\nviterbi.c(7): warning C4552: '*' : operator has no effect; expected operator with side-effect\n</code></pre>\n\n<p>As far as I have seen/can tell, this is valid syntax for a C declaration.  If I compile viterbi.c as C++ code (viterbi.cpp), then the errors disappear.  What is the syntax error?</p>\n"}, {"tags": ["c++", "function", "scope", "namespaces"], "comments": [{"owner": {"reputation": 557, "user_id": 1052906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de4d51543644410c9f64ae6962223164?s=128&d=identicon&r=PG&f=1", "display_name": "larrylampco", "link": "https://stackoverflow.com/users/1052906/larrylampco"}, "edited": false, "score": 0, "creation_date": 1469643984, "post_id": 38620500, "comment_id": 64626852, "body": "This just ensures that resolution occurs in the global namespace instead of the namespace you are in. See <a href=\"http://stackoverflow.com/questions/4269034/what-is-the-meaning-of-prepended-double-colon\" title=\"what is the meaning of prepended double colon\">stackoverflow.com/questions/4269034/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1469647235, "post_id": 38620561, "comment_id": 64628688, "body": "@Leon, yes, fixed."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": true, "score": 3, "last_activity_date": 1469647224, "last_edit_date": 1469647224, "creation_date": 1469643968, "answer_id": 38620561, "question_id": 38620500, "link": "https://stackoverflow.com/questions/38620500/does-myfunction-belongs-to-global-namespace/38620561#38620561", "title": "Does ::myFunction() belongs to global namespace?", "body": "<p>If the code compiles, then yes, <code>::myFunction()</code> is referencing the global declaration of <code>myFunction</code>. </p>\n\n<p>This is most commonly used when a local definition shadows your global definition:</p>\n\n<pre><code>namespace local {\n    int myFunction() {}; // local namespace definition\n};\nint myFunction() {}; // global definition.\nusing namespace local;\n\nint main() {\n    // myFunction(); // ambiguous two definitions of myFunction in current scope.\n    local::myFunction(); // uses local::myFunction();\n    ::myFunction(); // uses global myfunction();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1469646359, "post_id": 38620566, "comment_id": 64628235, "body": "Take a look at <a href=\"http://en.cppreference.com/w/cpp/header/type_traits\" rel=\"nofollow noreferrer\"><code>type_traits</code></a> and <a href=\"http://en.cppreference.com/w/cpp/language/decltype\" rel=\"nofollow noreferrer\"><code>decltype</code></a> to get around types that have the same size. eg: <code>static_assert(std::is_same&lt;decltype(a),decltype(b)&gt;::value, &quot;should be different types&quot;);</code>"}], "tags": [], "owner": {"reputation": 5460, "user_id": 73657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gzkFl.png?s=128&g=1", "display_name": "Dutow", "link": "https://stackoverflow.com/users/73657/dutow"}, "is_accepted": false, "score": 3, "last_activity_date": 1469643987, "creation_date": 1469643987, "answer_id": 38620566, "question_id": 38620500, "link": "https://stackoverflow.com/questions/38620500/does-myfunction-belongs-to-global-namespace/38620566#38620566", "title": "Does ::myFunction() belongs to global namespace?", "body": "<p>Yes, it means the variable, type or function following it must be available in the global namespace. </p>\n\n<p>It can be used for example when something is shadowed by a local definition:</p>\n\n<pre><code>struct S {\n  int i;\n};\n\nvoid f() {\n  struct S {\n    double d;\n  };\n\n  S a;\n  ::S b;\n\n  static_assert(sizeof(a) != sizeof(b), \"should be different types\");\n}\n</code></pre>\n"}], "owner": {"reputation": 6658, "user_id": 3697757, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/0aQ16.jpg?s=128&g=1", "display_name": "hackjutsu", "link": "https://stackoverflow.com/users/3697757/hackjutsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "accepted_answer_id": 38620561, "answer_count": 2, "score": 1, "last_activity_date": 1469647358, "creation_date": 1469643765, "last_edit_date": 1469647358, "question_id": 38620500, "link": "https://stackoverflow.com/questions/38620500/does-myfunction-belongs-to-global-namespace", "title": "Does ::myFunction() belongs to global namespace?", "body": "<p>I know in C++, we use <code>::</code> to qualify the namespace for a variable or function, like <code>myNamespace::a</code>. But I notice some usages like <code>::myFunction()</code>. Does it mean the function belongs to the global namespace?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1469645544, "post_id": 38620450, "comment_id": 64627769, "body": "You write &quot;I am using C language&quot;, but as your tag and code show, you are using C++."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469645580, "post_id": 38620450, "comment_id": 64627788, "body": "off topic: <code>func_map.find</code> returns an iterator to the found item or <code>end()</code>. You know that, obviously, but you can also use that iterator to eliminate the need to perform the exact same look-up for <code>func_map[problem]</code>. Eg: <code>map&lt;string, MAINFUNC&gt;::iterator it = func_map.find(problem); if (it != func_map.end()) return (*(it-&gt;second))();</code> See also <a href=\"http://en.cppreference.com/w/cpp/container/map/at\" rel=\"nofollow noreferrer\"><code>std::map::at</code></a> for a different take on the find and see also  <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow noreferrer\">C++11&#39;s std::function</a> to eliminate the need for function pointers."}, {"owner": {"reputation": 669, "user_id": 2581119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbdbeb2cb8aa3c89132fe48d744c91d4?s=128&d=identicon&r=PG", "display_name": "Lehu", "link": "https://stackoverflow.com/users/2581119/lehu"}, "edited": false, "score": 0, "creation_date": 1469658786, "post_id": 38620450, "comment_id": 64634119, "body": "If you are using C++ (and I assume you are as I can see maps, string, iostream etc) then you should use cstdio instead of stdio.h. Although I don&#39;t really know why do you need it :) ."}], "answers": [{"tags": [], "owner": {"reputation": 1139, "user_id": 6266602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0fa60ab2c1ac1b185db45679cabe8c9?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas B Preusser", "link": "https://stackoverflow.com/users/6266602/thomas-b-preusser"}, "is_accepted": true, "score": 2, "last_activity_date": 1469643987, "creation_date": 1469643987, "answer_id": 38620567, "question_id": 38620450, "link": "https://stackoverflow.com/questions/38620450/function-pointer-when-returning-values/38620567#38620567", "title": "Function-pointer when returning values", "body": "<p><code>func_map[problem]</code>, indeed, results in a function pointer. Applying the operator <code>()</code> on it, the function is invoked and the expression results in an <code>int</code>. Dereferencing a function pointer before its invocation is optional. This is symmetric with an optional address taking on a function name for initializing function pointers.</p>\n"}, {"tags": [], "owner": {"reputation": 831, "user_id": 6578349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e3785191b7c34a0e69418797e10fae?s=128&d=identicon&r=PG&f=1", "display_name": "EFenix", "link": "https://stackoverflow.com/users/6578349/efenix"}, "is_accepted": false, "score": 0, "last_activity_date": 1469643992, "creation_date": 1469643992, "answer_id": 38620569, "question_id": 38620450, "link": "https://stackoverflow.com/questions/38620450/function-pointer-when-returning-values/38620569#38620569", "title": "Function-pointer when returning values", "body": "<p>find returns an iterator; if this iterator is end, then the problem does not exist in the map; Because it is not end, it exists, then in the return line the pointer function obtained with [] is used to call it.</p>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 4615361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f33b7c498f1f0d76570dd0f43de1161?s=128&d=identicon&r=PG&f=1", "display_name": "slav", "link": "https://stackoverflow.com/users/4615361/slav"}, "is_accepted": false, "score": 1, "last_activity_date": 1469644021, "creation_date": 1469644021, "answer_id": 38620584, "question_id": 38620450, "link": "https://stackoverflow.com/questions/38620450/function-pointer-when-returning-values/38620584#38620584", "title": "Function-pointer when returning values", "body": "<p>Indeed </p>\n\n<pre><code> func_map[problem] \n</code></pre>\n\n<p>is a pointer. However, you dereference the pointer with *: </p>\n\n<pre><code> *(func_map[problem])\n</code></pre>\n\n<p>and call function by adding ():</p>\n\n<pre><code> (*(func_map[problem]))()\n</code></pre>\n\n<p>which returns \"int\".</p>\n"}], "owner": {"reputation": 797, "user_id": 5680504, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/89199bc765d86082499192aedf186a19?s=128&d=identicon&r=PG&f=1", "display_name": "sclee1", "link": "https://stackoverflow.com/users/5680504/sclee1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 38620567, "answer_count": 3, "score": -1, "last_activity_date": 1469644021, "creation_date": 1469643589, "last_edit_date": 1469643958, "question_id": 38620450, "link": "https://stackoverflow.com/questions/38620450/function-pointer-when-returning-values", "title": "Function-pointer when returning values", "body": "<p>I am using C language to upgrade my coding skills.</p>\n\n<p>I designed a simple program because I wanted to easily find the problems what I looked for and arrange the works when I handle many problems as shown in below.</p>\n\n<p>Here is my header file</p>\n\n<pre><code>#pragma once\n#ifndef PROBLEM_H\n#define PROBLEM_H\n\nnamespace PROBLEM_1 { int do_main(); }\n\ntypedef int(*MAINFUNC)();\n\n#endif \n</code></pre>\n\n<p>And below is my source file.</p>\n\n<pre><code>#include \"problems.h\"\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;map&gt;\nusing namespace std;\n\ntypedef int(*MAINFUNC)(void);\n\nmap&lt;string, MAINFUNC&gt; func_map;\n\nvoid initialize_problem_map(void) {\n    func_map[\"problem_1\"] = PROBLEM_1::do_main;\n}\n\nnamespace PROBLEM_1 {\n    int do_main(void) {\n        cout &lt;&lt; \"hi\" &lt;&lt; endl;\n        return 1;\n    }\n}\n\nint main(void) {\n    string problem;\n\n    initialize_problem_map();\n    cin &gt;&gt; problem;\n\n    if (func_map.find(problem) != func_map.end())\n        return (*(func_map[problem]))();\n\n\n    return -1;  \n}\n</code></pre>\n\n<p>If I input \"PROBLEM_1\" then, the do_main functions in namespace PROBLEM_1 will be executed. I think that this design helps me organize multiple coding problems.</p>\n\n<p>However, my question is about these two code lines as below.</p>\n\n<pre><code>if (func_map.find(problem) != func_map.end())\n    return (*(func_map[problem]))();\n</code></pre>\n\n<p>As you can see, the main fucntion's return type is \"int\". However, in the if-clause, i think that it return function-pointer. Therefore, I thought that those returning behavior is mismatched with the main function's return type. But, to my surprise, it worked well.</p>\n\n<p>Could u explain this procedures regarding returning types?</p>\n"}, {"tags": ["c++", "build", "cmake", "clang", "standard-library"], "answers": [{"tags": [], "owner": {"reputation": 585, "user_id": 2535151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2b9ed228086e0fb81f0b3d1ec6b984?s=128&d=identicon&r=PG", "display_name": "Nishant Sharma", "link": "https://stackoverflow.com/users/2535151/nishant-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1469655026, "creation_date": 1469655026, "answer_id": 38623508, "question_id": 38620391, "link": "https://stackoverflow.com/questions/38620391/standard-headers-not-found-when-switching-to-clang-3-4-and-libc/38623508#38623508", "title": "Standard headers not found when switching to clang 3.4 and libc++", "body": "<p>I remember facing the issue once. This happened for me because I because was building clang from the source and had multiple instances of the binary. If memory serves, I solved it by setting the <code>C_INCLUDE_PATH</code>, and <code>CPLUS_INCLUDE_PATH</code> flags in the <code>~/.bashrc</code> file.  </p>\n\n<p>You can do that by adding the following lines to your <code>~/.bashrc</code> file like this:</p>\n\n<pre><code>export C_INCLUDE_PATH=/usr/lib/llvm-3.4/lib/clang/3.4/include/\nexport CPLUS_INCLUDE_PATH=/usr/lib/llvm-3.4/lib/clang/3.4/include/ \n</code></pre>\n\n<p>Once you have done this, you can either open a new terminal or run <code>source ~/.bashrc</code> (so that it reads the updated <code>~/.bashrc</code> file)</p>\n"}], "owner": {"reputation": 13848, "user_id": 276193, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3d9b60ead1b0c8420c03b203832e8d5f?s=128&d=identicon&r=PG", "display_name": "learnvst", "link": "https://stackoverflow.com/users/276193/learnvst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 990, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469655026, "creation_date": 1469643407, "question_id": 38620391, "link": "https://stackoverflow.com/questions/38620391/standard-headers-not-found-when-switching-to-clang-3-4-and-libc", "title": "Standard headers not found when switching to clang 3.4 and libc++", "body": "<p>I'm getting the following error on CircleCI after installing clang 3.4 and switching to libc++ . . .</p>\n\n<blockquote>\n<pre><code>gtest/googletest/include/gtest/gtest.h:54:10: fatal error: \n      'limits' file not found\n#include &lt;limits&gt;\n</code></pre>\n</blockquote>\n\n<p>The offending header file is located at <code>/usr/lib/llvm-3.4/lib/clang/3.4/include/</code>, but I cannot prevent the error, even when using the CMake <code>INCLUDE_DIRECTORIES(SYSTEM path_above)</code> or setting the <code>isystem</code> compiler flag.</p>\n\n<p>Any idea what is wrong?</p>\n"}, {"tags": ["c++", "cuda"], "comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 3, "creation_date": 1469643093, "post_id": 38620192, "comment_id": 64626343, "body": "Do you have a complete example illustrating the functionality of that code? Because I am high skeptical it works as you posted it, for a number of reasons."}, {"owner": {"reputation": 51, "user_id": 4949154, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/49b9a262bf89b3b553c7ea190d8edac4?s=128&d=identicon&r=PG&f=1", "display_name": "hamwj1991", "link": "https://stackoverflow.com/users/4949154/hamwj1991"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1469676928, "post_id": 38620192, "comment_id": 64637976, "body": "That&#39;s lines of codes from a large project, It definitely works. Which part bothered you?@talonmies and I&#39;d like to add more lines."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 1, "creation_date": 1469680567, "post_id": 38620192, "comment_id": 64638914, "body": "Pretty much all of it - the extern declaration on the texture, the cast of the texture to a different type, the loading of a float4 texture into a float. Your question is basically &quot;This used to work, now it doesn&#39;t, how to I fix it?&quot;. To answer that would require an actual repro case that could be compiled and run."}, {"owner": {"reputation": 51, "user_id": 4949154, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/49b9a262bf89b3b553c7ea190d8edac4?s=128&d=identicon&r=PG&f=1", "display_name": "hamwj1991", "link": "https://stackoverflow.com/users/4949154/hamwj1991"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1469682306, "post_id": 38620192, "comment_id": 64639415, "body": "Sorry for my mistakes, the reture type is float4, and the kernel also has a extern &quot;C&quot; qulifier. I&#39;ve uploaded the original code, since I only have Cuda7.5 installed I can not compile it, but I am sure it will be compiled on Cuda4.2 @talonmies"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 4949154, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/49b9a262bf89b3b553c7ea190d8edac4?s=128&d=identicon&r=PG&f=1", "display_name": "hamwj1991", "link": "https://stackoverflow.com/users/4949154/hamwj1991"}, "edited": false, "score": 0, "creation_date": 1469699555, "post_id": 38631716, "comment_id": 64649288, "body": "Thanks, I will have a try.:)"}], "tags": [], "owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "is_accepted": true, "score": 2, "last_activity_date": 1469711621, "last_edit_date": 1469711621, "creation_date": 1469696614, "answer_id": 38631716, "question_id": 38620192, "link": "https://stackoverflow.com/questions/38620192/how-to-bind-different-kinds-of-textures-to-a-texture-reference-in-cuda/38631716#38631716", "title": "How to bind different kinds of textures to a texture reference in CUDA?", "body": "<p>It seems like the minimum repro case for this is:</p>\n\n<pre><code>texture&lt;int,1,cudaReadModeElementType&gt; __tex0;\n\n__global__ void kernel0(float4 *out)\n{\n    int t__a = blockIdx.x*blockDim.x+threadIdx.x;\n    int ii = (t__a*3);\n    float4 rr = tex1Dfetch(*(texture&lt;float4,1,cudaReadModeElementType&gt;*)&amp;__tex0,ii);\n    out[t__a] = rr;\n}\n</code></pre>\n\n<p>CUDA 7.5 will fail to compile this kernel with an error:</p>\n\n<blockquote>\n  <p>texture_repo.cu(7): error: cannot take address of texture/surface\n  variable <code>\"__tex0\"</code> in <code>__device__/__global__</code> functions</p>\n</blockquote>\n\n<p>I believe this is correct. Texture references are opaque placeholder types which don't have any of the usual properties of POD types and I would be very suspicious about ever writing code like the example you provided a link to.</p>\n\n<p>However, it is true that CUDA 4.2 will compile this and emit valid PTX:</p>\n\n<pre><code>.entry _Z7kernel0P6float4(\n        .param .u64 _Z7kernel0P6float4_param_0\n)\n{\n        .reg .f32       %f&lt;25&gt;;\n        .reg .s32       %r&lt;8&gt;;\n        .reg .s64       %rl&lt;5&gt;;\n\n\n        ld.param.u64    %rl1, [_Z7kernel0P6float4_param_0];\n        cvta.to.global.u64      %rl2, %rl1;\n        .loc 2 5 1\n        mov.u32         %r2, %ntid.x;\n        mov.u32         %r3, %ctaid.x;\n        mov.u32         %r4, %tid.x;\n        mad.lo.s32      %r5, %r2, %r3, %r4;\n        .loc 2 6 1\n        mul.lo.s32      %r1, %r5, 3;\n        mov.u32         %r6, 0;\n        // inline asm\n        tex.1d.v4.f32.s32 {%f1, %f2, %f3, %f4}, [__tex0, {%r1}];\n        // inline asm\n        .loc 2 8 1\n        mul.wide.s32    %rl3, %r5, 16;\n        add.s64         %rl4, %rl2, %rl3;\n        st.global.v4.f32        [%rl4], {%f1, %f2, %f3, %f4};\n        .loc 2 9 2\n        ret;\n}\n</code></pre>\n\n<p>The cast apparently has no effect other than suppressing a compiler error, and at a PTX level the read works because texture reference reads always return a four wide vector type, even if the extra vector elements are empty and ignored. I would regard the fact this compiles in CUDA 4.2 as a compiler bug, and it would seem that CUDA 7.5 is correct in this case.</p>\n\n<p>That said, a very hacky work-around would be to do this:</p>\n\n<pre><code>texture&lt;int,1,cudaReadModeElementType&gt; __tex0;\n\n__device__ float4 tex_load0(int idx)\n{\n    float4 temp;\n    asm(\"tex.1d.v4.f32.s32 {%0, %1, %2, %3}, [__tex0, {%4}];\" :\n        \"=f\"(temp.x), \"=f\"(temp.y), \"=f\"(temp.z), \"=f\"(temp.w) : \"r\"(idx));\n    return temp;\n}\n\n__global__ void kernel1(float4 *out)\n{\n    int t__a = blockIdx.x*blockDim.x+threadIdx.x;\n    int ii = (t__a*3);\n    float4 rr = tex_load0(ii); \n    out[t__a] = rr;\n}\n</code></pre>\n\n<p>[DISCLAIMER: compiled but never tested. Not recommended. Use at own risk].</p>\n\n<p>i.e. insert the same PTX emitted inline by the CUDA 4.2 compiler into a device function, and replace the texture fetches with calls to the device function. With the CUDA 7.5 toolchain, this emits:</p>\n\n<pre><code>//\n// Generated by NVIDIA NVVM Compiler\n//\n// Compiler Build ID: CL-19856038\n// Cuda compilation tools, release 7.5, V7.5.17\n// Based on LLVM 3.4svn\n//\n\n.version 4.3\n.target sm_30\n.address_size 64\n\n    // .globl   _Z9tex_load0i\n.global .texref __tex0;\n\n.visible .func  (.param .align 16 .b8 func_retval0[16]) _Z9tex_load0i(\n    .param .b32 _Z9tex_load0i_param_0\n)\n{\n    .reg .f32   %f&lt;5&gt;;\n    .reg .b32   %r&lt;2&gt;;\n\n\n    ld.param.u32    %r1, [_Z9tex_load0i_param_0];\n    // inline asm\n    tex.1d.v4.f32.s32 {%f1, %f2, %f3, %f4}, [__tex0, {%r1}];\n    // inline asm\n    st.param.f32    [func_retval0+0], %f1;\n    st.param.f32    [func_retval0+4], %f2;\n    st.param.f32    [func_retval0+8], %f3;\n    st.param.f32    [func_retval0+12], %f4;\n    ret;\n}\n\n    // .globl   _Z7kernel1P6float4\n.visible .entry _Z7kernel1P6float4(\n    .param .u64 _Z7kernel1P6float4_param_0\n)\n{\n    .reg .f32   %f&lt;5&gt;;\n    .reg .b32   %r&lt;6&gt;;\n    .reg .b64   %rd&lt;5&gt;;\n\n\n    ld.param.u64    %rd1, [_Z7kernel1P6float4_param_0];\n    cvta.to.global.u64  %rd2, %rd1;\n    mov.u32     %r2, %ctaid.x;\n    mov.u32     %r3, %ntid.x;\n    mov.u32     %r4, %tid.x;\n    mad.lo.s32  %r5, %r3, %r2, %r4;\n    mul.lo.s32  %r1, %r5, 3;\n    mul.wide.s32    %rd3, %r5, 16;\n    add.s64     %rd4, %rd2, %rd3;\n    // inline asm\n    tex.1d.v4.f32.s32 {%f1, %f2, %f3, %f4}, [__tex0, {%r1}];\n    // inline asm\n    st.global.v4.f32    [%rd4], {%f1, %f2, %f3, %f4};\n    ret;\n}\n</code></pre>\n\n<p>which is the same PTX as the CUDA 4.2 toolchain emitted. This works because the compiler can't apply nearly the same level of type safety checking to inline PTX. But think hard about whether you really want to do this, because it is (in my opinion) undefined behaviour.</p>\n\n<p>Also note that because of the way texture references are handled in PTX, you can't pass them as explicit arguments, so you will require defining one read function per texture in your code.</p>\n"}], "owner": {"reputation": 51, "user_id": 4949154, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/49b9a262bf89b3b553c7ea190d8edac4?s=128&d=identicon&r=PG&f=1", "display_name": "hamwj1991", "link": "https://stackoverflow.com/users/4949154/hamwj1991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 1, "accepted_answer_id": 38631716, "answer_count": 1, "score": 1, "last_activity_date": 1469711621, "creation_date": 1469642681, "last_edit_date": 1469682050, "question_id": 38620192, "link": "https://stackoverflow.com/questions/38620192/how-to-bind-different-kinds-of-textures-to-a-texture-reference-in-cuda", "title": "How to bind different kinds of textures to a texture reference in CUDA?", "body": "<p>This piece of code works on Cuda 4.2</p>\n\n<pre><code>extern \"C\" texture&lt;int,1,cudaReadModeElementType&gt; __tex0;\nextern \"C\" __global__ void kernel(){\n  float4 f = tex1Dfetch(*(texture&lt;float4,1,cudaReadModeElementType&gt;*)&amp;__tex0,ii_z)\n}\n</code></pre>\n\n<p>Since Cuda have changed grammer, I can not fetch different kind of textures from a texture, Any idea?</p>\n\n<p><strong>PS</strong>. I've found Cuda <strong>texture object</strong> in reference, but That's a lot of work to change all occurances. Is there a better solution with minor code change?</p>\n\n<p><strong>Thanks</strong></p>\n\n<p>If anyone want the original code, please click <a href=\"http://paste.ubuntu.com/21240215/\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": ["python", "c++", "boost-python"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 5968408, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-Md3kCjRMg7I/AAAAAAAAAAI/AAAAAAAAABM/_z0QpmtDf00/photo.jpg?sz=128", "display_name": "\u967d\u54c1\u99d2", "link": "https://stackoverflow.com/users/5968408/%e9%99%bd%e5%93%81%e9%a7%92"}, "edited": false, "score": 0, "creation_date": 1469672294, "post_id": 38620679, "comment_id": 64637095, "body": "Sorry, I think maybe there is some misunderstanding.I have to work in C++ environment, so I want my C++ program directly use Dog.bark() from python.... not in python"}, {"owner": {"reputation": 614, "user_id": 1877860, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eff94b5e7b44a203e0168c61fc239811?s=128&d=identicon&r=PG", "display_name": "kbang", "link": "https://stackoverflow.com/users/1877860/kbang"}, "reply_to_user": {"reputation": 107, "user_id": 5968408, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-Md3kCjRMg7I/AAAAAAAAAAI/AAAAAAAAABM/_z0QpmtDf00/photo.jpg?sz=128", "display_name": "\u967d\u54c1\u99d2", "link": "https://stackoverflow.com/users/5968408/%e9%99%bd%e5%93%81%e9%a7%92"}, "edited": false, "score": 0, "creation_date": 1469676006, "post_id": 38620679, "comment_id": 64637793, "body": "Boost python doesn&#39;t help you there. boost is a c++ module. try this <a href=\"https://docs.python.org/3/extending/embedding.html\" rel=\"nofollow noreferrer\">docs.python.org/3/extending/embedding.html</a>"}], "tags": [], "owner": {"reputation": 614, "user_id": 1877860, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eff94b5e7b44a203e0168c61fc239811?s=128&d=identicon&r=PG", "display_name": "kbang", "link": "https://stackoverflow.com/users/1877860/kbang"}, "is_accepted": false, "score": -2, "last_activity_date": 1469644373, "creation_date": 1469644373, "answer_id": 38620679, "question_id": 38620134, "link": "https://stackoverflow.com/questions/38620134/how-to-import-a-function-from-python-file-by-boost-python/38620679#38620679", "title": "How to import a function from python file by Boost.Python", "body": "<p>Boost python is used to call cplusplus functions from a python source. Pretty much like the Perl xs module.</p>\n\n<p>If you have a function say bark() in main.cpp, you can use boost python to convert this main.cpp into a python callable module.</p>\n\n<p>Then from python script(assuming link output file is main.so):</p>\n\n<pre><code>import main\nmain.bark()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "edited": false, "score": 0, "creation_date": 1507362931, "post_id": 38702099, "comment_id": 80187236, "body": "shouldn&#39;t you be calling <code>Py_Finalize();</code> at the end?"}, {"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "reply_to_user": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "edited": false, "score": 0, "creation_date": 1507492768, "post_id": 38702099, "comment_id": 80220080, "body": "@TrevorHickey, no. As noted in the <a href=\"http://www.boost.org/doc/libs/1_65_1/libs/python/doc/html/tutorial/tutorial/embedding.html\" rel=\"nofollow noreferrer\">Boost.Python embedding documentation</a>, <code>Py_Finalize()</code> should not be called to stop the interpreter."}, {"owner": {"reputation": 467, "user_id": 8106002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e477ad83a0db8ad842418b2a4ee15fa?s=128&d=identicon&r=PG&f=1", "display_name": "pat", "link": "https://stackoverflow.com/users/8106002/pat"}, "edited": false, "score": 0, "creation_date": 1516699427, "post_id": 38702099, "comment_id": 83783960, "body": "How can I hide python scripts file contents? Is there anyway to encrypt python files but still decrypt and call python module in c++ runtime?"}, {"owner": {"reputation": 151, "user_id": 2253073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BdlDQ.jpg?s=128&g=1", "display_name": "Kostiantyn Ponomarenko", "link": "https://stackoverflow.com/users/2253073/kostiantyn-ponomarenko"}, "edited": false, "score": 1, "creation_date": 1591516797, "post_id": 38702099, "comment_id": 110080735, "body": "@TannerSansbury, this is an excellent answer. Please suggest the whole info in your comment to be added to the official Boost.python docs. The official docs are missing this kind of information. Thanks, it really helped me a lot."}, {"owner": {"reputation": 151, "user_id": 2253073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BdlDQ.jpg?s=128&g=1", "display_name": "Kostiantyn Ponomarenko", "link": "https://stackoverflow.com/users/2253073/kostiantyn-ponomarenko"}, "edited": false, "score": 0, "creation_date": 1591519708, "post_id": 38702099, "comment_id": 110081560, "body": "Here is my example of <code>Boost.Python</code>: <a href=\"https://github.com/koponomarenko/embed_python_in_cxx\" rel=\"nofollow noreferrer\">github.com/koponomarenko/embed_python_in_cxx</a>"}], "tags": [], "owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "is_accepted": true, "score": 13, "last_activity_date": 1470063563, "creation_date": 1470063563, "answer_id": 38702099, "question_id": 38620134, "link": "https://stackoverflow.com/questions/38620134/how-to-import-a-function-from-python-file-by-boost-python/38702099#38702099", "title": "How to import a function from python file by Boost.Python", "body": "<p>When one needs to call Python from C++, and C++ owns the main function, then one must <em>embed</em> the Python interrupter within the C++ program.  The Boost.Python API is not a complete wrapper around the Python/C API, so one may find the need to directly invoke parts of the Python/C API.  Nevertheless, Boost.Python's API can make interoperability easier.  Consider reading the official Boost.Python <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/python/doc/html/tutorial/tutorial/embedding.html\" rel=\"noreferrer\">embedding tutorial</a> for more information.</p>\n\n<hr>\n\n<p>Here is a basic skeleton for a C++ program that embeds Python:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main()\n{\n  // Initialize Python.\n  Py_Initialize();\n\n  namespace python = boost::python;\n  try\n  {\n    ... Boost.Python calls ...\n  }\n  catch (const python::error_already_set&amp;)\n  {\n    PyErr_Print();\n    return 1;\n  }\n\n  // Do not call Py_Finalize() with Boost.Python.\n}\n</code></pre>\n\n<p>When embedding Python, it may be necessary to augment the <a href=\"https://docs.python.org/2/tutorial/modules.html#the-module-search-path\" rel=\"noreferrer\">module search path</a> via <a href=\"https://docs.python.org/2/using/cmdline.html#envvar-PYTHONPATH\" rel=\"noreferrer\"><code>PYTHONPATH</code></a> so that modules can be imported from custom locations.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// Allow Python to load modules from the current directory.\nsetenv(\"PYTHONPATH\", \".\", 1);\n// Initialize Python.\nPy_Initialize();\n</code></pre>\n\n<p>Often times, the Boost.Python API provides a way to write C++ code in a Python-ish manner.  The following example <a href=\"http://coliru.stacked-crooked.com/a/e926ffe1ee46fd5a\" rel=\"noreferrer\">demonstrates</a> embedding a Python interpreter in C++, and having C++ import a <code>MyPythonClass</code> Python module from disk, instantiate an instance of <code>MyPythonClass.Dog</code>, and then invoking <code>bark()</code> on the <code>Dog</code> instance:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;boost/python.hpp&gt;\n#include &lt;cstdlib&gt; // setenv\n\nint main()\n{\n  // Allow Python to load modules from the current directory.\n  setenv(\"PYTHONPATH\", \".\", 1);\n  // Initialize Python.\n  Py_Initialize();\n\n  namespace python = boost::python;\n  try\n  {\n    // &gt;&gt;&gt; import MyPythonClass\n    python::object my_python_class_module = python::import(\"MyPythonClass\");\n\n    // &gt;&gt;&gt; dog = MyPythonClass.Dog()\n    python::object dog = my_python_class_module.attr(\"Dog\")();\n\n    // &gt;&gt;&gt; dog.bark(\"woof\");\n    dog.attr(\"bark\")(\"woof\");\n  }\n  catch (const python::error_already_set&amp;)\n  {\n    PyErr_Print();\n    return 1;\n  }\n\n  // Do not call Py_Finalize() with Boost.Python.\n}\n</code></pre>\n\n<p>Given a <code>MyPythonClass</code> module that contains:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>class Dog():\n    def bark(self, message):\n        print \"The dog barks: {}\".format(message)\n</code></pre>\n\n<p>The above program outputs:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>The dog barks: woof\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 5968408, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-Md3kCjRMg7I/AAAAAAAAAAI/AAAAAAAAABM/_z0QpmtDf00/photo.jpg?sz=128", "display_name": "\u967d\u54c1\u99d2", "link": "https://stackoverflow.com/users/5968408/%e9%99%bd%e5%93%81%e9%a7%92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6799, "favorite_count": 4, "accepted_answer_id": 38702099, "answer_count": 2, "score": 7, "last_activity_date": 1470063563, "creation_date": 1469642469, "question_id": 38620134, "link": "https://stackoverflow.com/questions/38620134/how-to-import-a-function-from-python-file-by-boost-python", "title": "How to import a function from python file by Boost.Python", "body": "<p>I am totally new to boost.python. \nI reviewed a lot of recommending of using boost.python to apply with python, however still not easy to understand and find a solution for me.</p>\n\n<p>What I want is to import a function or class that directly from a python \"SourceFile\"</p>\n\n<p>Example File:\nMain.cpp\nMyPythonClass.py</p>\n\n<p>Let's says if there is a \"Dog\" class in \"MyPythonClass.py\" with \"bark()\" function, how do I get callback and send argument in cpp?  </p>\n\n<p>I have no idea what I should do!\nPlease help me!</p>\n"}, {"tags": ["c++", "linux", "fstream", "filereader", "readfile"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 4, "creation_date": 1469642368, "post_id": 38620067, "comment_id": 64625907, "body": "My telepathy machine does not work today"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1469642393, "post_id": 38620067, "comment_id": 64625922, "body": "What do you mean &quot;doesnt work&quot; do you get an error? If so what is it?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1469642430, "post_id": 38620067, "comment_id": 64625942, "body": "Oh wait i see why! Your code isn&#39;t indented properly ..."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1469642432, "post_id": 38620067, "comment_id": 64625945, "body": "@Ben seems your telepathy machine doesn&#39;t work either"}, {"owner": {"reputation": 2007, "user_id": 1540501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/JcHkg.jpg?s=128&g=1", "display_name": "ivan.ukr", "link": "https://stackoverflow.com/users/1540501/ivan-ukr"}, "edited": false, "score": 0, "creation_date": 1469642454, "post_id": 38620067, "comment_id": 64625961, "body": "please add more details to your description? I can see this code will even not compile because it is malformed."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1469642479, "post_id": 38620067, "comment_id": 64625979, "body": "@Slava I didnt purchase the package that lets mine work through the internet :("}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1469642544, "post_id": 38620067, "comment_id": 64626016, "body": "If you indent your code properly you may notice a missing <code>}</code> at the end of <code>main()</code>."}, {"owner": {"reputation": 1, "user_id": 6646107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af9890d1a19e2eb57f622c96c140d72a?s=128&d=identicon&r=PG&f=1", "display_name": "ewaw", "link": "https://stackoverflow.com/users/6646107/ewaw"}, "edited": false, "score": 0, "creation_date": 1469648401, "post_id": 38620067, "comment_id": 64629276, "body": "i didnt mention that i wrote this program in Code Composer studio, on Code bloks it works. i have an error that say &quot;method &#39;fail&#39; could not be resolved."}], "owner": {"reputation": 1, "user_id": 6646107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af9890d1a19e2eb57f622c96c140d72a?s=128&d=identicon&r=PG&f=1", "display_name": "ewaw", "link": "https://stackoverflow.com/users/6646107/ewaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1469642386, "answer_count": 0, "score": 0, "last_activity_date": 1469648163, "creation_date": 1469642239, "last_edit_date": 1469648163, "question_id": 38620067, "link": "https://stackoverflow.com/questions/38620067/how-to-read-from-a-file-in-linux-in-c", "closed_reason": "Duplicate", "title": "how to read from a file in linux in c++?", "body": "<p>i have got a problem, I want to write code which reads from file, i tried ifstream type but it doesn't work on my linux. Does anyone had similar problem ? [EDIT] (I write this code in Code Composer Studio,on Code Blocks it works. i have an error that say \"method 'fail' could not be resolved.) \nDown below my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt; \nusing namespace std; \n\nint main () \n{ \nifstream inFile (\"input.txt\"); \nif (inFile.fail()) \n{ \ncout &lt;&lt; \"Could Not Open File\\n\"; \n} \nelse \n{ \ncout &lt;&lt; \"File opened succesfully\\n\"; \n}  \n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "edited": false, "score": 0, "creation_date": 1469642391, "post_id": 38620063, "comment_id": 64625920, "body": "This is one of my favorite tutorials on the subject: <a href=\"http://www.cplusplus.com/forum/articles/10627/\" rel=\"nofollow noreferrer\">cplusplus.com/forum/articles/10627</a>"}, {"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 0, "creation_date": 1469642689, "post_id": 38620063, "comment_id": 64626096, "body": "And while we&#39;re on the subject, every major compiler supports <code>#pragma once</code> at this point, so don&#39;t use old style <code>#ifdef</code> include guards unless you have a specific reason to treat more than one header as the same file."}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1469642822, "post_id": 38620063, "comment_id": 64626169, "body": "Worth reading this post as well; <a href=\"http://stackoverflow.com/q/26611481/3747990\">stackoverflow.com/q/26611481/3747990</a>."}], "answers": [{"tags": [], "owner": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "is_accepted": false, "score": 2, "last_activity_date": 1469642401, "creation_date": 1469642401, "answer_id": 38620117, "question_id": 38620063, "link": "https://stackoverflow.com/questions/38620063/if-i-need-to-include-another-header-in-my-header-and-i-plan-to-use-it-in-my-cpp/38620117#38620117", "title": "If I need to include another header in my header and I plan to use it in my CPP file, should I include it there as well for readability?", "body": "<p>This is basically a style question, but:</p>\n\n<p>No you shouldn't include it in the cpp <em>and</em> the header. It's overly verbose and no one does it.</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1469642697, "creation_date": 1469642697, "answer_id": 38620194, "question_id": 38620063, "link": "https://stackoverflow.com/questions/38620063/if-i-need-to-include-another-header-in-my-header-and-i-plan-to-use-it-in-my-cpp/38620194#38620194", "title": "If I need to include another header in my header and I plan to use it in my CPP file, should I include it there as well for readability?", "body": "<p>I would not, except if the <code>#include \"APIManager.h\"</code> might not be in header.</p>\n\n<p><code>&lt;string&gt;</code> might be included in <code>&lt;iostream&gt;</code>, but you should include <code>&lt;string&gt;</code> anyway even if your library include include it and you use <code>&lt;iostream&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "is_accepted": false, "score": 0, "last_activity_date": 1469642817, "creation_date": 1469642817, "answer_id": 38620218, "question_id": 38620063, "link": "https://stackoverflow.com/questions/38620063/if-i-need-to-include-another-header-in-my-header-and-i-plan-to-use-it-in-my-cpp/38620218#38620218", "title": "If I need to include another header in my header and I plan to use it in my CPP file, should I include it there as well for readability?", "body": "<p>Include headers where they're needed.</p>\n\n<p>You should include them in a header file if your class definition includes objects defined in the header you're including.  If you're only using the contents of a header in the cpp, then include it in the cpp.</p>\n\n<p>Never include the same external header in both file.h and file.cpp if file.cpp also includes file.h.</p>\n"}, {"tags": [], "owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "is_accepted": true, "score": 2, "last_activity_date": 1469642868, "creation_date": 1469642868, "answer_id": 38620235, "question_id": 38620063, "link": "https://stackoverflow.com/questions/38620063/if-i-need-to-include-another-header-in-my-header-and-i-plan-to-use-it-in-my-cpp/38620235#38620235", "title": "If I need to include another header in my header and I plan to use it in my CPP file, should I include it there as well for readability?", "body": "<p>If the source file is Environment.cpp, where you are implementing what you declared in Environment.h, then no, you should not reinclude it.</p>\n\n<p>If on the other hand, the source file is SomeOtherFile.cpp where you are simply using the declarations from Environment.h, and you are going to use the declarations from APIManager.h separately and independently of their usage as part of Environment.h, then yes, you should. You wouldn't want a future change which removes <code>#include &lt;Environment.h&gt;</code> from SomeOtherFile.cpp to break it unexpectedly. </p>\n\n<p>In other words, if SomeOtherFile.cpp has a direct dependence on APIManager.h, then that dependence should be directly expressed via a #include.</p>\n"}], "owner": {"reputation": 28, "user_id": 6646112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b7a8f45e0e0e723ba34c3af1095704?s=128&d=identicon&r=PG&f=1", "display_name": "Pop Collin", "link": "https://stackoverflow.com/users/6646112/pop-collin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 38620235, "answer_count": 4, "score": 0, "last_activity_date": 1469642868, "creation_date": 1469642231, "question_id": 38620063, "link": "https://stackoverflow.com/questions/38620063/if-i-need-to-include-another-header-in-my-header-and-i-plan-to-use-it-in-my-cpp", "title": "If I need to include another header in my header and I plan to use it in my CPP file, should I include it there as well for readability?", "body": "<p>Right so I'll try to explain my question as best as I can. Basically in one of my header files I need to use a class, obviously to do this I will have to include that class' header in the current one. I was just thinking, since I'm planning to create a new instance of this class later on down the line, should I also include it in the .cpp file to help with readability? I know that I don't have to, but would it make sense to do that? Or am I just being insane?</p>\n\n<p>Example A, header file:</p>\n\n<pre><code>include \"APIManager.h\"\nclass Environment\n{\npublic:\n    static void Initialize();\nprivate:\n    APIManager apiManager;\n};\n</code></pre>\n\n<p>Example A, source file:</p>\n\n<pre><code>include \"Environment.h\"\n// Should I include \"APIManager.h\" here too?\nvoid Environment::Initialize()\n{\n\n}\n</code></pre>\n\n<p>Tried looking around here for it, but I'm unsure of how to phrase it, so apologies if this has already been asked.</p>\n\n<p>Also, in general should you be including the header files that the class's source needs in that class's header? Thanks.</p>\n"}, {"tags": ["c++", "c", "qt"], "comments": [{"owner": {"reputation": 93, "user_id": 6646157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f0387a759a6ae29985a9ff300c34762a?s=128&d=identicon&r=PG&f=1", "display_name": "Hbi Giu", "link": "https://stackoverflow.com/users/6646157/hbi-giu"}, "edited": false, "score": 0, "creation_date": 1469644550, "post_id": 38620045, "comment_id": 64627175, "body": "In the answers I have noticed people listed different ways of converting QString (using toStdString() or using QByteArray). Which one would be preffered?"}, {"owner": {"reputation": 93, "user_id": 6646157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f0387a759a6ae29985a9ff300c34762a?s=128&d=identicon&r=PG&f=1", "display_name": "Hbi Giu", "link": "https://stackoverflow.com/users/6646157/hbi-giu"}, "edited": false, "score": 0, "creation_date": 1469644778, "post_id": 38620045, "comment_id": 64627313, "body": "I would also like to have a clarification on how can I display the output of this function."}, {"owner": {"reputation": 93, "user_id": 6646157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f0387a759a6ae29985a9ff300c34762a?s=128&d=identicon&r=PG&f=1", "display_name": "Hbi Giu", "link": "https://stackoverflow.com/users/6646157/hbi-giu"}, "edited": false, "score": 0, "creation_date": 1469739510, "post_id": 38620045, "comment_id": 64675860, "body": "Also how can I convert uint8_t to QString?"}], "answers": [{"comments": [{"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 2, "creation_date": 1469643555, "post_id": 38620422, "comment_id": 64626603, "body": "You might want to call toUTF8() instead, if you want to support Unicode characters outside the Latin-1 range."}], "tags": [], "owner": {"reputation": 151, "user_id": 4615361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f33b7c498f1f0d76570dd0f43de1161?s=128&d=identicon&r=PG&f=1", "display_name": "slav", "link": "https://stackoverflow.com/users/4615361/slav"}, "is_accepted": false, "score": 1, "last_activity_date": 1469643469, "creation_date": 1469643469, "answer_id": 38620422, "question_id": 38620045, "link": "https://stackoverflow.com/questions/38620045/how-to-use-c-functions-in-qt-c/38620422#38620422", "title": "How to use C functions in Qt C++", "body": "<p>All you need to convert QString to char (or uint8_t):</p>\n\n<pre><code>QString passoword = \"password\";\nQByteArray ba = password.toLatin1();\nconst uint8_t *pw = (const uint8_t*)ba.data();\n</code></pre>\n\n<p>And you can use this pw in the function. The same for \"salt\". You can use \"iterations\" as it is. For \"out\" parameter, allocate uint8_t with any method you prefer, could be malloc.</p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 6521403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9f38a9fe5d185054fea09f064a91f5?s=128&d=identicon&r=PG&f=1", "display_name": "Iverelo", "link": "https://stackoverflow.com/users/6521403/iverelo"}, "edited": false, "score": 0, "creation_date": 1469644126, "post_id": 38620517, "comment_id": 64626941, "body": "This holds for most platforms but keep in mind that C99 types (the ones with &#39;_t&#39;) are spec defined making them inherently more portable. &#39;unsigned int&#39; and the others following that format are compiler types making it up to the compiler implementation to define them. If you are writing code for a single platform or if your code does not need to know exactly what the underlying memory is, compiler types are fine."}], "tags": [], "owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "is_accepted": false, "score": 1, "last_activity_date": 1469643826, "creation_date": 1469643826, "answer_id": 38620517, "question_id": 38620045, "link": "https://stackoverflow.com/questions/38620045/how-to-use-c-functions-in-qt-c/38620517#38620517", "title": "How to use C functions in Qt C++", "body": "<p><em>uint8_t</em> is a typedef for an unsigned 8-bit integer, or in other words an unsigned char.</p>\n\n<p><em>uint32_t</em> is a typedef for an unsigned 32-bit integer, or in other words an unsigned int.</p>\n\n<p>These typedefs are defined in <code>stdint.h</code>.  These types were introduced to have well-defined (width-wise) integer types for portability.</p>\n\n<p><em>size_t</em> is typically an unsigned integer type as well.  So the \nprototype:</p>\n\n<pre><code>void fastpbkdf2_hmac_sha256(const uint8_t *pw, size_t npw,\n                            const uint8_t *salt, size_t nsalt,\n                            uint32_t iterations,\n                            uint8_t *out, size_t nout)\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>void fastpbkdf2_hmac_sha256(const unsigned char* pw, unsigned int npw,\n                            const unsigned char* salt, unsigned int nsalt,\n                            unsigned int iterations,\n                            unsigned char* out, unsigned int nout);\n</code></pre>\n\n<p>Others have posted how to convert QString into a unsigned character array.</p>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 6646157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f0387a759a6ae29985a9ff300c34762a?s=128&d=identicon&r=PG&f=1", "display_name": "Hbi Giu", "link": "https://stackoverflow.com/users/6646157/hbi-giu"}, "edited": false, "score": 0, "creation_date": 1469738509, "post_id": 38620540, "comment_id": 64675382, "body": "This gives me the following <code>error: invalid conversion from &#39;const char*&#39; to &#39;const uint8_t* {aka const unsigned char*}</code>"}, {"owner": {"reputation": 121, "user_id": 6521403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9f38a9fe5d185054fea09f064a91f5?s=128&d=identicon&r=PG&f=1", "display_name": "Iverelo", "link": "https://stackoverflow.com/users/6521403/iverelo"}, "reply_to_user": {"reputation": 93, "user_id": 6646157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f0387a759a6ae29985a9ff300c34762a?s=128&d=identicon&r=PG&f=1", "display_name": "Hbi Giu", "link": "https://stackoverflow.com/users/6646157/hbi-giu"}, "edited": false, "score": 0, "creation_date": 1469889994, "post_id": 38620540, "comment_id": 64730072, "body": "Try <a href=\"http://en.cppreference.com/w/cpp/language/reinterpret_cast\" rel=\"nofollow noreferrer\">reinterpret_cast</a>&lt;uint8_t*&gt;() to trick the compiler since the underlying memory is identical."}], "tags": [], "owner": {"reputation": 121, "user_id": 6521403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9f38a9fe5d185054fea09f064a91f5?s=128&d=identicon&r=PG&f=1", "display_name": "Iverelo", "link": "https://stackoverflow.com/users/6521403/iverelo"}, "is_accepted": false, "score": -1, "last_activity_date": 1469643889, "creation_date": 1469643889, "answer_id": 38620540, "question_id": 38620045, "link": "https://stackoverflow.com/questions/38620045/how-to-use-c-functions-in-qt-c/38620540#38620540", "title": "How to use C functions in Qt C++", "body": "<p>I am not too familiar with QT so I am looking at <a href=\"http://doc.qt.io/qt-4.8/qstring.html\" rel=\"nofollow\">this page</a> as a reference for a QString. It appears to be a managed string object while the function you want to call just wants a null terminated array of uint8_ts. I think it is wrapping std::string because there is a toStdString() member function. A std::string just manages a character array which is what your function wants so you can do this: password.toStdString().c_str() to get the char *.</p>\n\n<p>Most platforms will implicitly convert uint8_t and char since they are almost always straight up 1 byte of memory.</p>\n\n<p>There is also an output buffer and by the calling convention it looks like you have to manage that memory. From glancing at the docs of the github you linked it will output however much memory you tell it to using nout. In this example we create a 256 byte buffer for it to output to.</p>\n\n<pre><code>QString password = \"password\";\nQString salt = \"salt\";\nint iterations = 30000;\n\nconst size_t nout = 256;\nuint8_t * out = new uint8_t[nout];\n\nfastpbkdf2_hmac_sha256(password.toStdString().c_str(), password.toStdString().size(),\n   salt.toStdString().c_str(), salt.toStdString().size(),\n   iterations,\n   out, nout);\n\n// use out\n\ndelete[] out;\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 6646157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f0387a759a6ae29985a9ff300c34762a?s=128&d=identicon&r=PG&f=1", "display_name": "Hbi Giu", "link": "https://stackoverflow.com/users/6646157/hbi-giu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 681, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1469643889, "creation_date": 1469642132, "question_id": 38620045, "link": "https://stackoverflow.com/questions/38620045/how-to-use-c-functions-in-qt-c", "title": "How to use C functions in Qt C++", "body": "<p>I am a web developer and I am new to C++. I am using Qt C++. I was looking a way to generate a PBKDF2 key in Qt, but could not find a way to do that in pure C++. So looking on internet I have found this small C implementation <a href=\"https://github.com/ctz/fastpbkdf2\" rel=\"nofollow\">https://github.com/ctz/fastpbkdf2</a>. I need to use the following function </p>\n\n<pre><code>void fastpbkdf2_hmac_sha256(const uint8_t *pw, size_t npw,\n                            const uint8_t *salt, size_t nsalt,\n                            uint32_t iterations,\n                            uint8_t *out, size_t nout)\n</code></pre>\n\n<p>In my C++ file, I have </p>\n\n<pre><code>QString password = \"password\";\nQString salt = \"salt\";\nint iterations = 30000;\n</code></pre>\n\n<p>I know I can directly call any C function in C++, but I am not sure about how can I call that function with those parameters from my C++ file. An explanation of data type conversions would also be appreciated. </p>\n"}, {"tags": ["c++", "c", "clang-format"], "comments": [{"owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 8, "creation_date": 1483590594, "post_id": 38620019, "comment_id": 70160326, "body": "It appears that there is no such option. I&#39;m currently working on adding it as a new style option, AlignConsecutiveMacros. You can see it here on my fork <a href=\"https://github.com/eriknyquist/clang/tree/align_defines\" rel=\"nofollow noreferrer\">github.com/eriknyquist/clang/tree/align_defines</a>  (I won&#39;t post a direct link to the commit, since I am continually amending it. Just view the list of commits and pick the latest one)"}, {"owner": {"reputation": 1649, "user_id": 1113852, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/90CgE.png?s=128&g=1", "display_name": "psyched", "link": "https://stackoverflow.com/users/1113852/psyched"}, "edited": false, "score": 0, "creation_date": 1513073633, "post_id": 38620019, "comment_id": 82501081, "body": "do you plan to submit a pull request? Looks like a useful addition to me!"}, {"owner": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "edited": false, "score": 0, "creation_date": 1523426594, "post_id": 38620019, "comment_id": 86550390, "body": "@ErikNyquist Thanks for your pull request. Any idea why it&#39;s still stuck at review ?"}, {"owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1528664569, "post_id": 38620019, "comment_id": 88582362, "body": "(copy-pasting from another post where I just answered the same Q): There&#39;s just been a lot of churn, if you look over that link I posted to the review you&#39;ll see all the changes that have been requested (and that I have implemented). Then there was silence for a long, long time, and someone&#39;s just come back in the last month and essentially asked for the whole thing to be reworked, and I just don&#39;t have the time/energy anymore...."}, {"owner": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "edited": false, "score": 0, "creation_date": 1529477545, "post_id": 38620019, "comment_id": 88881448, "body": "@ErikNyquist Thanks for the information. I&#39;ve built clang-format with your patch and we&#39;ve been using it for for months now, it&#39;s working well. Too bad for their lack of reactivity, it&#39;s obvious that many people want this feature..."}], "answers": [{"tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 0, "last_activity_date": 1529328391, "creation_date": 1529328391, "answer_id": 50910604, "question_id": 38620019, "link": "https://stackoverflow.com/questions/38620019/can-clang-format-align-a-block-of-defines-for-me/50910604#50910604", "title": "Can clang-format align a block of #defines for me?", "body": "<p>At a quick glance over the <a href=\"https://clang.llvm.org/docs/ClangFormatStyleOptions.html\" rel=\"nofollow noreferrer\">style options</a> it looks like there is currently no option for this. The only option which deals with preprocessing that I see is <code>IndentPPDirectives</code> which deals with indentations of <code>#if</code> blocks.</p>\n"}, {"comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1541084677, "post_id": 53102839, "comment_id": 93103173, "body": "You may not have noticed, that the pull request was done by OP one year ago after he asked this question. Still, the question is unanswered, so it would be best for @ErikNyquist to accept one answer."}, {"owner": {"reputation": 888, "user_id": 1122242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c94e800354854bafd803f7ff56239e0?s=128&d=identicon&r=PG", "display_name": "moveaway00", "link": "https://stackoverflow.com/users/1122242/moveaway00"}, "edited": false, "score": 0, "creation_date": 1557838620, "post_id": 53102839, "comment_id": 98893057, "body": "An update: It looks like the change has been accepted, and is ready to land! <a href=\"https://reviews.llvm.org/D28462?id=93341#1498067\" rel=\"nofollow noreferrer\">reviews.llvm.org/D28462?id=93341#1498067</a>"}, {"owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1566425053, "post_id": 53102839, "comment_id": 101656586, "body": "and after ~2 years my patch was finally merged! at long last we have alignment for PP macros :) <a href=\"https://clang.llvm.org/docs/ClangFormatStyleOptions.html\" rel=\"nofollow noreferrer\">clang.llvm.org/docs/ClangFormatStyleOptions.html</a>"}], "tags": [], "owner": {"reputation": 5167, "user_id": 4862613, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1583232551699623/picture?type=large", "display_name": "Maldus", "link": "https://stackoverflow.com/users/4862613/maldus"}, "is_accepted": true, "score": 11, "last_activity_date": 1571654324, "last_edit_date": 1571654324, "creation_date": 1541080804, "answer_id": 53102839, "question_id": 38620019, "link": "https://stackoverflow.com/questions/38620019/can-clang-format-align-a-block-of-defines-for-me/53102839#53102839", "title": "Can clang-format align a block of #defines for me?", "body": "<p><strong>[UPDATE]</strong></p>\n\n<p>The op's pull request finally went through and as of clang version 9.0.0 is live. The functionality is enabled by the <code>AlignConsecutiveMacros: true</code> option.</p>\n\n<p><strong>[ORIGINAL]</strong></p>\n\n<p>Weirdly enough this feature is yet to be implemented in clang; the formatting option for consecutive macros is currently missing.</p>\n\n<p>Many developers are interested and there is a working pull request that has been waiting for approval for years: <a href=\"https://reviews.llvm.org/D28462?id=93341\" rel=\"noreferrer\">https://reviews.llvm.org/D28462?id=93341</a></p>\n\n<p>You can integrate it or just wait whether they add it on the official branch, but at this point I doubt they will.</p>\n"}, {"comments": [{"owner": {"reputation": 139, "user_id": 881949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaa761f74bb8fd5aafbf4bca006bdd4?s=128&d=identicon&r=PG&f=1", "display_name": "takladev", "link": "https://stackoverflow.com/users/881949/takladev"}, "edited": false, "score": 0, "creation_date": 1568116021, "post_id": 56234250, "comment_id": 102165083, "body": "the latest clang-format supports aligning macros using <code>AlignConsecutiveMacros</code>"}], "tags": [], "owner": {"reputation": 3226, "user_id": 2929762, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/875979833128b726a51baf1814c9496f?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/2929762/martin"}, "is_accepted": false, "score": -1, "last_activity_date": 1558427578, "creation_date": 1558427578, "answer_id": 56234250, "question_id": 38620019, "link": "https://stackoverflow.com/questions/38620019/can-clang-format-align-a-block-of-defines-for-me/56234250#56234250", "title": "Can clang-format align a block of #defines for me?", "body": "<p>I couldn't find any option for this either. Clang has trashed all of my defines that have been automatically aligned by emacs.. </p>\n"}, {"comments": [{"owner": {"reputation": 139, "user_id": 881949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaa761f74bb8fd5aafbf4bca006bdd4?s=128&d=identicon&r=PG&f=1", "display_name": "takladev", "link": "https://stackoverflow.com/users/881949/takladev"}, "reply_to_user": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1566517308, "post_id": 57550043, "comment_id": 101691110, "body": "oh, I meant <code>AlignConsecutiveMacros: true</code> .. Cut-pasted the wrong line from my clang-format config. I will edit the post."}, {"owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 1, "creation_date": 1567115220, "post_id": 57550043, "comment_id": 101877779, "body": "Yes, I created a patch for that feature  &quot;AlignConsecutiveMacros&quot; myself when I found it didn&#39;t exist."}], "tags": [], "owner": {"reputation": 139, "user_id": 881949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaa761f74bb8fd5aafbf4bca006bdd4?s=128&d=identicon&r=PG&f=1", "display_name": "takladev", "link": "https://stackoverflow.com/users/881949/takladev"}, "is_accepted": false, "score": -1, "last_activity_date": 1566517417, "last_edit_date": 1566517417, "creation_date": 1566184166, "answer_id": 57550043, "question_id": 38620019, "link": "https://stackoverflow.com/questions/38620019/can-clang-format-align-a-block-of-defines-for-me/57550043#57550043", "title": "Can clang-format align a block of #defines for me?", "body": "<p>Note that clang-format-9 and above have an option of <code>AlignConsecutiveMacros: true</code> which can do the trick for you.</p>\n\n<p>To install clang-format-9 on ubuntu/Debian you need to check <code>http://apt.llvm.org/</code>.</p>\n\n<p>As an example, if you have Ubuntu 16.04/xenial, you need to do the following:</p>\n\n<pre><code>sudo sh -c 'echo \"deb http://apt.llvm.org/xenial/ llvm-toolchain-xenial-9 main\" &gt;&gt; /etc/apt/sources.list'\nsudo sh -c 'echo \"deb-src http://apt.llvm.org/xenial/ llvm-toolchain-xenial-9 main\" &gt;&gt; /etc/apt/sources.list'\nsudo apt update\nsudo apt install clang-format-9\n</code></pre>\n\n<p>Possible to handle Trusty/Ubuntu 14.04 the same way.</p>\n"}], "owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4189, "favorite_count": 8, "accepted_answer_id": 53102839, "answer_count": 4, "score": 25, "last_activity_date": 1571654324, "creation_date": 1469642027, "last_edit_date": 1483590812, "question_id": 38620019, "link": "https://stackoverflow.com/questions/38620019/can-clang-format-align-a-block-of-defines-for-me", "title": "Can clang-format align a block of #defines for me?", "body": "<p>I have a source file containing some lines like this;</p>\n\n<pre><code>#define ARC_V2_LP_START         0x002\n#define ARC_V2_LP_END           0x003\n#define ARC_V2_STATUS32         0x00a\n</code></pre>\n\n<p>With all the values nicely aligned. Unfortunately clang-format does this;</p>\n\n<pre><code>#define ARC_V2_LP_START 0x002\n#define ARC_V2_LP_END 0x003\n#define ARC_V2_STATUS32 0x00a\n</code></pre>\n\n<p>I have found the AlignConsecutiveDeclarations and AlignConsecutiveAssignments options, but nothing that will align consecutive #defines. Is it possible to do this?</p>\n"}, {"tags": ["java", "android", "c++", "opencv", "native"], "comments": [{"owner": {"reputation": 9667, "user_id": 4675736, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/yXNEM.jpg?s=128&g=1", "display_name": "Wai Yan Hein", "link": "https://stackoverflow.com/users/4675736/wai-yan-hein"}, "edited": false, "score": 0, "creation_date": 1522781302, "post_id": 38619911, "comment_id": 86281967, "body": "Have you found the solution?"}], "owner": {"reputation": 232, "user_id": 5427938, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1aeaef8dec4d3f81db800e432716038e?s=128&d=identicon&r=PG&f=1", "display_name": "MarkyDD", "link": "https://stackoverflow.com/users/5427938/markydd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 592, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1469641643, "creation_date": 1469641643, "question_id": 38619911, "link": "https://stackoverflow.com/questions/38619911/how-do-i-return-a-opencv-mat-from-native-code-to-java-in-android", "title": "How do I return a OpenCV Mat from native code to java in Android", "body": "<p>I'm using OpenCV in an Android Studio project and I'd like to return a Mat object created in a native C++ method, to the java environment. I've already tried <a href=\"http://answers.opencv.org/question/12090/returning-a-mat-from-native-jni-to-java/\" rel=\"nofollow\">this recommendation</a>, but it didn't work for me. I get the following error:</p>\n\n<pre><code>07-27 12:10:48.433 11004-11004/com.visualdefence.mobileclient E/GLib: gst_app_sink_pull_sample: assertion 'GST_IS_APP_SINK (appsink)' failed\n07-27 12:10:48.433 11004-11004/com.visualdefence.mobileclient E/cv::error(): OpenCV Error: Assertion failed (total() == 0 || data != NULL) in cv::Mat::Mat(cv::Size, int, void*, size_t), file src/main/jni/../opencvLib/include/opencv2/core/mat.inl.hpp, line 443\n\n                                                                             --------- beginning of crash\n07-27 12:10:48.434 11004-11004/com.visualdefence.mobileclient A/libc: Fatal signal 6 (SIGABRT), code -6 in tid 11004 (ce.mobileclient)\n</code></pre>\n\n<p>The native class (relevant method is <strong>native_get_screenshot</strong>):</p>\n\n<pre><code>...\n\n#include &lt;opencv2/core/mat.hpp&gt;\n#include &lt;opencv2/imgproc/imgproc.hpp&gt;\n\nusing namespace cv;\n\nGST_DEBUG_CATEGORY_STATIC (debug_category);\n#define GST_CAT_DEFAULT debug_category\n\n#define GET_CUSTOM_DATA(env, thiz, fieldID) (Player *)(gintptr)env-&gt;GetLongField (thiz, fieldID)\n#define SET_CUSTOM_DATA(env, thiz, fieldID, data) env-&gt;SetLongField (thiz, fieldID, (jlong)(gintptr)data)\n\ntypedef struct _Player\n{\n  jobject java_player;\n  GstPlayer *player;\n  GstPlayerVideoRenderer *renderer;\n  ANativeWindow *native_window;\n} Player;\n\n...\n...\n...\n\nstatic void\nnative_get_screenshot (JNIEnv * env, jobject thiz, jlong matAddr)\n{\n  GstMapInfo mapInfo = {0, };\n  Mat *matRgb = (Mat*)matAddr;\n  Player *player = GET_CUSTOM_DATA (env, thiz, native_player_field_id);\n\n  if (!player) {\n    matRgb = NULL;\n    return;\n  }\n\n  GstElement *pipeline, *app_sink;\n  pipeline = gst_player_get_pipeline(player-&gt;player);\n  app_sink = gst_bin_get_by_name(GST_BIN(pipeline), \"sink\");\n  GstSample *gst_sample = gst_app_sink_pull_sample ((GstAppSink*)app_sink);\n  GstBuffer *gst_buffer = gst_sample_get_buffer (gst_sample);\n\n  gst_buffer_map (gst_buffer, &amp;mapInfo, GST_MAP_READ);\n\n  *matRgb = Mat(Size(640, 360), CV_8UC3, (char*)mapInfo.data);\n  cvtColor(*matRgb, *matRgb, CV_RGB2BGR);\n}\n\n...\n...\n...\n\n/* List of implemented native methods */\nstatic JNINativeMethod native_methods[] = {\n  {\"nativeGetScreenshot\", \"(J)V\", (void *) native_get_screenshot}\n  ...\n};\n\n...\n...\n...\n</code></pre>\n\n<p>The java class:</p>\n\n<pre><code>...\nimport org.opencv.android.OpenCVLoader;\nimport org.opencv.core.Mat;\n\npublic class Player implements Closeable {\n    private static native void nativeClassInit();\n    public static void init(Context context) throws Exception {\n        System.loadLibrary(\"opencv_java3\");\n        System.loadLibrary(\"gstreamer_android\");\n        GStreamer.init(context);\n\n        if (!OpenCVLoader.initDebug()) {\n            Log.e(\"Player\", \"Initializing OpenCV failed\");\n        }\n\n        System.loadLibrary(\"gstplayer\");\n        nativeClassInit();\n    }\n\n    private native void nativeGetScreenshot(long matAddr);\n    public Mat getScreenshot() {\n        Mat descriptor = new Mat();\n        nativeGetScreenshot(descriptor.getNativeObjAddr());\n        return descriptor;\n    }\n}\n</code></pre>\n\n<p>So what I'm doing here is sending a Mat pointer created in java to the native method as a parameter so that I can assign it's memory from the C++ native code. \nIt looks like the error occurs in the Mat constructor from the line number it gives.</p>\n\n<p>What is causing this error if I'm passing a pointer to a java Mat to native code to manipulate it as a Mat?</p>\n"}, {"tags": ["c++", "linux", "gtk", "wxwidgets", "chromium-embedded"], "comments": [{"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 1, "creation_date": 1469643396, "post_id": 38619883, "comment_id": 64626518, "body": "basically you are on you own here. The Chromium implementation was done as part of the GSoC and the student who performed the job is disappear. The branch is not even merged because there is no one to maintain the code let alone make an update to it and verify that everything works. You can try to post on wxForum or send an E-mail to wx-dev/wx-users to have more exposure. Or try to search the ML archives - someone very recently tried to do some work on Chromium and tried to ask some questions in ML."}], "answers": [{"comments": [{"owner": {"reputation": 444, "user_id": 2023325, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5789f8ed6017ada773901d5251810a6c?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/2023325/david"}, "edited": false, "score": 0, "creation_date": 1469720483, "post_id": 38628944, "comment_id": 64665038, "body": "Many thanks for helping out! Unfortunately I&#39;m still getting the same blank window. I updated my original question to detail the modifications I made based on your post. Do you think you could take a quick look to see if I&#39;ve done it properly?"}, {"owner": {"reputation": 17706, "user_id": 623622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pkmbW.png?s=128&g=1", "display_name": "Czarek Tomczak", "link": "https://stackoverflow.com/users/623622/czarek-tomczak"}, "reply_to_user": {"reputation": 444, "user_id": 2023325, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5789f8ed6017ada773901d5251810a6c?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/2023325/david"}, "edited": false, "score": 0, "creation_date": 1469775359, "post_id": 38628944, "comment_id": 64686382, "body": "@David Updated answer"}, {"owner": {"reputation": 444, "user_id": 2023325, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5789f8ed6017ada773901d5251810a6c?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/2023325/david"}, "edited": false, "score": 0, "creation_date": 1470519782, "post_id": 38628944, "comment_id": 64986119, "body": "Thanks so much for your help so far. I&#39;ve been able to make the CEF browser appear by creating m_widget as a top-level GTK window, but really I want this to be embedded into the wxBoxSizer that holds my wxWebViewChromium widget. Do you know how I can do this? I have updated my question to reflect the changes I&#39;ve made so far."}], "tags": [], "owner": {"reputation": 17706, "user_id": 623622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pkmbW.png?s=128&g=1", "display_name": "Czarek Tomczak", "link": "https://stackoverflow.com/users/623622/czarek-tomczak"}, "is_accepted": false, "score": 1, "last_activity_date": 1469775343, "last_edit_date": 1469775343, "creation_date": 1469688454, "answer_id": 38628944, "question_id": 38619883, "link": "https://stackoverflow.com/questions/38619883/using-cef3-with-wxwidgets-and-gtk-on-linux/38628944#38628944", "title": "Using CEF3 with wxWidgets (and GTK) on Linux", "body": "<p>CEF expects X11 window handle. GtkWidget handle was required in previous versions of CEF. The documentation on that wiki page seems to be outdated. Make sure the X11 handle is valid (show the window) before passing it to CEF.</p>\n\n<p>I can only suggest to take a look at how GTK window is created in cefclient sample application: </p>\n\n<p><a href=\"https://bitbucket.org/chromiumembedded/cef/src/98f59f47fd395c170f389eba36f2ef2e06a500a8/tests/cefclient/browser/root_window_gtk.cc?at=master&amp;fileviewer=file-view-default#root_window_gtk.cc-233\" rel=\"nofollow\">https://bitbucket.org/chromiumembedded/cef/src/98f59f47fd395c170f389eba36f2ef2e06a500a8/tests/cefclient/browser/root_window_gtk.cc?at=master&amp;fileviewer=file-view-default#root_window_gtk.cc-233</a></p>\n\n<p>Also take a look at CreateBrowser() - it uses GetXWindowForWidget():</p>\n\n<p><a href=\"https://bitbucket.org/chromiumembedded/cef/src/98f59f47fd395c170f389eba36f2ef2e06a500a8/tests/cefclient/browser/browser_window_std_gtk.cc?at=master&amp;fileviewer=file-view-default#browser_window_std_gtk.cc-91\" rel=\"nofollow\">https://bitbucket.org/chromiumembedded/cef/src/98f59f47fd395c170f389eba36f2ef2e06a500a8/tests/cefclient/browser/browser_window_std_gtk.cc?at=master&amp;fileviewer=file-view-default#browser_window_std_gtk.cc-91</a></p>\n"}], "owner": {"reputation": 444, "user_id": 2023325, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5789f8ed6017ada773901d5251810a6c?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/2023325/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1806, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470519691, "creation_date": 1469641530, "last_edit_date": 1470519691, "question_id": 38619883, "link": "https://stackoverflow.com/questions/38619883/using-cef3-with-wxwidgets-and-gtk-on-linux", "title": "Using CEF3 with wxWidgets (and GTK) on Linux", "body": "<p>I started with <a href=\"https://github.com/hokein/wxWidgets/tree/SOC2014_WEBVIEW_CHROMIUM/\" rel=\"nofollow\">this branch of wxWidgets from GitHub user hokein</a> since it seems to do what I'm looking for with older versions of CEF. Basically, I'm trying to implement wxWebViewChromium (a wxWebView using CEF as a back-end) using cef_3.2526.1354 since this is the version we want to use in our application. I'm running CentOS 7 with GNOME in a VM using Hyper-V.</p>\n\n<p><strong>Original code from the repository linked above (part of webview_chromium.cpp)</strong></p>\n\n<pre><code>#ifdef __WXGTK__\nm_widget = gtk_scrolled_window_new( NULL, NULL );\ng_object_ref( m_widget );\nGtkScrolledWindow *scrolled_window = GTK_SCROLLED_WINDOW( m_widget );\n// Hide the scroll bar.\ngtk_scrolled_window_set_policy( scrolled_window, GTK_POLICY_NEVER, GTK_POLICY_NEVER);\nGtkWidget* view_port = gtk_viewport_new( NULL, NULL );\ngtk_scrolled_window_add_with_viewport( GTK_SCROLLED_WINDOW(scrolled_window),\n                                       view_port );\ninfo.SetAsChild( view_port );\nm_parent-&gt;DoAddChild( this );\nPostCreation( size );\n\ngtk_widget_show( view_port );\n#endif\n</code></pre>\n\n<p>When I tried to compile and link this with cef_3.2526.1354, I was getting errors related to the <code>info.SetAsChild(viewport);</code> line. I was passing it a <code>GtkWidget*</code> and it was expecting <code>cef_window_handle_t, CefRect</code>.</p>\n\n<p><strong>What I've tried so far</strong></p>\n\n<p>I created the CefRect like this based on the <code>GtkWidget* view_port</code>:</p>\n\n<pre><code>GtkAllocation gtk_alloc;\ngtk_widget_get_allocation(view_port, &amp;gtk_alloc);\nCefRect cef_rect (\n    (int)gtk_alloc.x,\n    (int)gtk_alloc.y,\n    (int)gtk_alloc.width,\n    (int)gtk_alloc.height\n);\n</code></pre>\n\n<p>The typedef from the CEF library code indicates that <code>cef_window_handle_t</code> is an <code>unsigned long</code>, but the <a href=\"https://bitbucket.org/chromiumembedded/cef/wiki/GeneralUsage#markdown-header-cefbrowser-and-cefframe\" rel=\"nofollow\">CEF documentation</a> says it's a <code>GtkWidget*</code>... Which I guess are the same thing, but this led to some initial confusion. At first I thought that I needed to pass the X11 window id (XID) from the underlying X11 window, but this produced a runtime error:</p>\n\n<pre><code>Gdk: gdkdrawable-x11.c:952 drawable is not a pixmap or window\n</code></pre>\n\n<p>Simply casting the <code>GtkWidget*</code> as an <code>unsigned long</code> instead of using the underlying X11 window ID removed this error, so I think that this is what the function was expecting.</p>\n\n<p><strong>My code currently (part of webview_chromium.cpp)</strong></p>\n\n<pre><code>#ifdef __WXGTK__\nm_widget = gtk_scrolled_window_new( NULL, NULL );\ng_object_ref( m_widget );\nGtkScrolledWindow *scrolled_window = GTK_SCROLLED_WINDOW( m_widget );\n// Hide the scroll bar.\ngtk_scrolled_window_set_policy( scrolled_window, GTK_POLICY_NEVER, GTK_POLICY_NEVER);\nGtkWidget* view_port = gtk_viewport_new( NULL, NULL );\ngtk_scrolled_window_add_with_viewport( GTK_SCROLLED_WINDOW(scrolled_window),\n                                       view_port );\n\nGtkAllocation gtk_alloc;\ngtk_widget_get_allocation(view_port, &amp;gtk_alloc);\nCefRect cef_rect (\n    (int)gtk_alloc.x,\n    (int)gtk_alloc.y,\n    (int)gtk_alloc.width,\n    (int)gtk_alloc.height\n);\n\ninfo.SetAsChild(\n    (unsigned long) view_port,\n    cef_rect\n);\n\nm_parent-&gt;DoAddChild( this );\nPostCreation( size );\n\n// gtk_widget_show(view_port);\ngtk_widget_show_all(m_widget);\ngtk_widget_show_all(view_port);\n#endif\n</code></pre>\n\n<p><strong>What's happening</strong></p>\n\n<p>I am able to compile, link, and run the application. I can see the wxWidgets window, and I can minimize, maximize, resize, and close the window just like any normal window. There is nothing in the window - it is just a plain, grey, empty window. I am expecting (or hoping) to see the CEF browser. In the terminal that I used to launch the application, I get the following message:</p>\n\n<p><code>[0727/132200:ERROR:browser_main_loop.cc(203)] Running without SUID sandbox! See https://code.google.com/p/chromium/wiki/LinuxSUIDSandboxDevelopment for more information on developing with sandbox on.</code></p>\n\n<p>This URL no longer seems to be of any use. If I launch <code>./cefclient --no-sandbox</code> from the command line I get the same error message, but the CEF client works as expected. If I launch <code>./cefclient</code> from the command line (without disabling sandbox), I get this same message except instead of <code>ERROR</code> it says <code>FATAL</code> and the CEF client does not work (crashes outright).</p>\n\n<p><strong>My questions</strong></p>\n\n<p>Have I done anything wrong with my modifications to the <code>webview_chromium.cpp</code> file? Is there anywhere else in this file that I should look for things that I might need to update to get this working with cef_3.2526.1354? How can I troubleshoot this empty window that I'm seeing?</p>\n\n<p>Thanks!</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Czarek Tomczak informed me that this version of CEF is expecting an X11 window handle, so I have modified my code as follows.</p>\n\n<pre><code>#ifdef __WXGTK__\nm_widget = gtk_scrolled_window_new( NULL, NULL );\ng_object_ref( m_widget );\nGtkScrolledWindow *scrolled_window = GTK_SCROLLED_WINDOW( m_widget );\n// Hide the scroll bar.\ngtk_scrolled_window_set_policy( scrolled_window, GTK_POLICY_NEVER, GTK_POLICY_NEVER);\nGtkWidget* view_port = gtk_viewport_new( NULL, NULL );\ngtk_scrolled_window_add_with_viewport( GTK_SCROLLED_WINDOW(scrolled_window),\n                                       view_port );\n\ngtk_widget_show_all(m_widget);\ngtk_widget_show_all(view_port);\n\nGtkAllocation gtk_alloc;\ngtk_widget_get_allocation(view_port, &amp;gtk_alloc);\nCefRect cef_rect (\n    (int)gtk_alloc.x,\n    (int)gtk_alloc.y,\n    (int)gtk_alloc.width,\n    (int)gtk_alloc.height\n);\n\ninfo.SetAsChild(\n    gdk_x11_drawable_get_xid(gtk_widget_get_window(view_port)),\n    cef_rect\n);\n\nm_parent-&gt;DoAddChild( this );\nPostCreation( size );\n\n#endif\n</code></pre>\n\n<p>But this is still leading to the run-time error below, with the same blank window output as before.</p>\n\n<pre><code>Gdk: gdkdrawable-x11.c:952 drawable is not a pixmap or window\n</code></pre>\n\n<p>Any help pointing me in the right direction would be much appreciated. I have also tried creating an actual GtkWindow here instead of a scrolled window with a viewport inside it. This gets rid of the above run-time error, but it opens a second window, both of which are blank. I need all of this to work within one window.</p>\n\n<p><strong>UPDATE 2</strong></p>\n\n<p>With some help from Czarek Tomczak, the links he posted, and <a href=\"https://forums.wxwidgets.org/viewtopic.php?t=6463\" rel=\"nofollow\">this FAQ</a> I have gotten to a point where I am able to embed the CEF browser into a GtkWidget, but I am only able to make this work if I create the widget as a top-level GTK window like this:</p>\n\n<pre><code>m_widget = gtk_window_new(GTK_WINDOW_TOPLEVEL);\n</code></pre>\n\n<p>Where <code>m_widget</code> is the main widget of the wxWebView I'm trying to create. The issue with this is that now the CEF browser is coming up in its own GTK window, but what I really need is for the CEF browser to fit into the <code>wxBoxSizer</code> that I am adding my wxWebViewChromium widget to. To get this working to this point I split out some of the code from the Create method into the OnSize method so that I could get the XID of the GtkWidget after the GtkWidget was realized, and create the CEF browser after this happened. The OnSize method is connected to <code>wxEVT_SIZE</code>. My code is now as follows.</p>\n\n<p><strong>Updated portion of <code>Create</code> Method</strong></p>\n\n<pre><code>// Actual creation of CEF browser moved to OnSize function so we\n// can guarantee the widgets have been realized\nthis-&gt;Bind(wxEVT_SIZE, &amp;wxWebViewChromium::OnSize, this);\n\n// Works but as a top-level GTK window only\nm_widget = gtk_window_new(GTK_WINDOW_TOPLEVEL);\n\n// None of these work\n//m_widget = gtk_drawing_area_new();\n//m_widget = gtk_vbox_new(false, 0);\n\ng_object_ref( m_widget );\n</code></pre>\n\n<p><strong>Updated portion of <code>OnSize</code> Method</strong></p>\n\n<pre><code>if (!cef_browser_created)\n{\n    cef_browser_created = true;\n\n    CefBrowserSettings browsersettings;\n    CefWindowInfo info;\n\n    XSetErrorHandler(XErrorHandlerImpl);\n    XSetIOErrorHandler(XIOErrorHandlerImpl);\n\n    gtk_widget_realize(m_widget);\n\n    ::Window xwindow = GTK_WINDOW_XID(gtk_widget_get_window(m_widget));\n    DCHECK(xwindow);\n\n    GtkAllocation gtk_alloc;\n    gtk_widget_get_allocation(m_widget, &amp;gtk_alloc);\n    CefRect cef_rect (\n        (int)gtk_alloc.x,\n        (int)gtk_alloc.y,\n        (int)gtk_alloc.width,\n        (int)gtk_alloc.height\n    );\n\n    info.SetAsChild(xwindow, cef_rect);\n    m_parent-&gt;DoAddChild( this );\n    PostCreation( size );\n\n    CefBrowserHost::CreateBrowserSync(\n        info,\n        static_cast&lt;CefRefPtr&lt;CefClient&gt; &gt;(m_clientHandler),\n        create_url.ToStdString(),\n        browsersettings,\n        NULL\n    );\n}\n</code></pre>\n\n<p>When I try to make <code>m_widget</code> something other than a top-level GTK widget (as shown in the commented-out portions of the code for the <code>Create</code> method above), I get the following error at run-time.</p>\n\n<pre><code>Gtk: IA__gtk_widget_realize: assertion 'GTK_WIDGET_ANCHORED (widget) || GTK_IS_INVISIBLE (widget)' failed\nGdk: gdkdrawable-x11.c:952 drawable is not a pixmap or window\nCheck failed: xwindow.\n</code></pre>\n\n<p>How can I make this window appear inside my wxBoxSizer instead of as its own GTK top-level window?</p>\n"}, {"tags": ["c++", "class", "recursion", "struct"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469641407, "post_id": 38619710, "comment_id": 64625379, "body": "Sorry but where is the error?"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1469641457, "post_id": 38619710, "comment_id": 64625411, "body": "No idea what the ask is here."}, {"owner": {"reputation": 65, "user_id": 5641732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VOx3t.png?s=128&g=1", "display_name": "Bit87", "link": "https://stackoverflow.com/users/5641732/bit87"}, "edited": false, "score": 0, "creation_date": 1469649792, "post_id": 38619710, "comment_id": 64630023, "body": "There are no errors, just I&#39;m asking about the implementation of the stacks in Hanoi, that&#39;s my doubt"}], "owner": {"reputation": 65, "user_id": 5641732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VOx3t.png?s=128&g=1", "display_name": "Bit87", "link": "https://stackoverflow.com/users/5641732/bit87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1469641808, "creation_date": 1469640876, "question_id": 38619710, "link": "https://stackoverflow.com/questions/38619710/need-some-advice-implementing-stacks-in-hanoi", "title": "Need some advice implementing stacks in hanoi", "body": "<p>I have some doubts on how to implement stacks in a Hanoi game in C++, I understand how Hanoi and stacks works but I don't quite understand how to link them.</p>\n\n<p>Each peg is an array of numbers but I don't get how to move them from one to another in the correct order.</p>\n\n<p>What I'm trying to do is to use each peg as an stack(array) of numbers, moving their disks using POP and  PUSH.</p>\n\n<p>Maybe something like, PUSH(Destination, POP(Source)) or Destination.PUSH(POP.AUX())</p>\n\n<p>Where</p>\n\n<p>First peg = Source, Second peg = Destination, Third peg = Aux</p>\n\n<h1>main.cpp</h1>\n\n<pre><code> # include &lt; iostream &gt;\n\n # include \" HanoiLib.h \" // Recursive Hanoi method\n\n # include \" LibPila.h \" // My stack lib\n\n\nusing namespace std;\nusing namespace PILA;\n\nint main()\n{\n    Pila P1; // From LibPila.h class Pila\n    int Dsk;\n\nDsk = P1.getData(); // Get the number of disks\n\nfor(int i = 0; i &lt; Dsk; i++)\n{\n\n    P1.PUSH(P1.POP()); // Fill the first peg\n\n}\n\nP1.Print(); // Print the disks\n\n    Tower(Dsk, 1, 3, 2); // Where 1, 2 and 3 are the pegs\n    P1.PUSH(P1.POP()); // This is a wrong idea of how to move the disks..\n    Tower(Dsk, 3, 1, 2);\n\nreturn 0;\n}\n</code></pre>\n\n<h1>HanoiLib.h</h1>\n\n<pre><code> # ifndef _LibHanoi_H_\n\n # define _LibHanoi_H_\n\nusing namespace std;\n\n        void Tower(int Dsk, int Src, int Dst, int aux)\n        {\n        if(Dsk &gt; 0)\n        {\n            Tower(Dsk - 1, Src, Dst, aux);\n            cout &lt;&lt; \"Move disk \" &lt;&lt; Dsk &lt;&lt; \"from \" &lt;&lt; Src &lt;&lt; \"to \" &lt;&lt; aux &lt;&lt; endl;\n            Tower(Dsk - 1, Dst, aux, Src);\n\n        }\n    }\n# endif // __LibHanoi_H_\n</code></pre>\n\n<h1>LibPila.h</h1>\n\n<pre><code> # ifndef _LibPila_H_\n # define _LibPila_H_\n\n # define MAX_STACK 10 // Max size of the stack\n\nusing namespace std;\nnamespace PILA\n\n{\n\nclass Pila\n{\n\nprivate:\n\n    int stack[MAX_STACK]; // MAX_STACK = 10\n    int top = -1; // The top of the stack\n\npublic:\n\nvoid PUSH(int val)\n{\n\n    if(top == MAX_STACK -1 )\n        cout &lt;&lt; \"Stack overflow!!\" &lt;&lt; endl;\n\n    stack[++top] = val;\n\n}\n\nint POP()\n{\n\nif(top == -1)\n    cout &lt;&lt; \"There's nothing here!!\" &lt;&lt; endl;\n\ntop--;\n\nreturn top;\n\n}\n\nint Top()\n{\n    return stack[top];\n}\n\nvoid Print()\n{\n     int i;\n\n     cout &lt;&lt; \"Stack: \";\n     for(i = 0; i &lt;= top; i++)\n        cout &lt;&lt; stack[i];\n    cout &lt;&lt; \"\" &lt;&lt; endl;\n } \n\nint getData()\n{\n    int x;\n\n     cout &lt;&lt; \"Insert NO of disks: \"&lt;&lt; endl;\n    cin &gt;&gt; x;\n\n     return x;\n }\n\n};\n\n}\n# endif // __LibPila_H_\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "c++11", "gcc4.8"], "comments": [{"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1469641681, "post_id": 38619687, "comment_id": 64625535, "body": "Your issue is that you are moving an object that is in use in one thread out from under it in another. Question: why? Create the object dynamically and use smart pointers."}, {"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1469642884, "post_id": 38619687, "comment_id": 64626208, "body": "@kfsone Y-yeah that was what I was going with with my second question, wanted to know if there was something more elegant or that I was missing."}], "answers": [{"comments": [{"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1469642833, "post_id": 38619808, "comment_id": 64626176, "body": "Ok, I&#39;ll probably do the second one. Thanks."}, {"owner": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "reply_to_user": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1469647545, "post_id": 38619808, "comment_id": 64628834, "body": "@Aram Strongly recommend against it, I only put it there for completeness - to show that it is technically possible. The modern way to &#39;fix&#39; this problem is to do nothing. Have a noncopyable/nonmovable class and let the user of the class handle it."}, {"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1469647978, "post_id": 38619808, "comment_id": 64629081, "body": "what are the cons of that approach if I might ask?"}, {"owner": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "reply_to_user": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1469649994, "post_id": 38619808, "comment_id": 64630120, "body": "@Aram 1) If the user doesn&#39;t want to move the class they take the hit for the allocation/<code>unique_ptr</code> anyway. If you leave it to the user, they only take the hit if they need the hit. 2) It&#39;s an ordinary/expected aspect of c++ to potentially need to allocate classes if you want to pass around their ownership, in the case it&#39;s nonmoveable. Meaning, it&#39;s the c++ equiv of &#39;pythonic&#39;... C++onic... lol. 3) Complexity. Why make something more complex to solve a problem that&#39;s not a problem."}], "tags": [], "owner": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "is_accepted": true, "score": 2, "last_activity_date": 1469641864, "last_edit_date": 1469641864, "creation_date": 1469641298, "answer_id": 38619808, "question_id": 38619687, "link": "https://stackoverflow.com/questions/38619687/move-operations-for-a-class-with-a-thread-as-member-variable/38619808#38619808", "title": "Move operations for a class with a thread as member variable", "body": "<p>I would 'fix' it by just saying <code>worker</code> is noncopyable and nonmoveable and leave it to the user of <code>worker</code> to store it as a <code>unique_ptr</code> if they want to move it around. There's nothing wrong with that at all. It's ordinary, actually.</p>\n\n<p>If you absolutely want this class to be movable, you could use the Pimpl design pattern: make a <code>Worker::Impl</code> nested class which <code>worker</code> owns by <code>unique_ptr</code>. The <code>Impl</code> class would be noncopyable and nonmovable and basically be your current <code>worker</code> class. The lambda would have a pointer to the <code>Impl</code> class, not the <code>worker</code> class. The <code>worker</code> class would contain nothing except a <code>unique_ptr</code> to the <code>Impl</code> and functions that forward to the <code>Impl</code> class' functions, and the defaulted copy and move ctors/operators will just work properly for both classes (worker will be copyable but not movable, impl will be noncopyable and nonmovable).</p>\n"}], "owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "accepted_answer_id": 38619808, "answer_count": 1, "score": 0, "last_activity_date": 1469644043, "creation_date": 1469640812, "last_edit_date": 1495540735, "question_id": 38619687, "link": "https://stackoverflow.com/questions/38619687/move-operations-for-a-class-with-a-thread-as-member-variable", "title": "Move operations for a class with a thread as member variable", "body": "<p>I'm trying to expand with what some people helped me here <a href=\"https://stackoverflow.com/questions/38614061/call-function-inside-a-lambda-passed-to-a-thread\">Call function inside a lambda passed to a thread</a> so my worker class can support a move constructor and a move <code>operator=</code>, but I have the problem that my class is binding <code>this</code> by copy (or reference) to the thread so it can access the class values. Which are several <code>atomic&lt;bool&gt;</code>,  a <code>condition_variable</code> and a <code>mutex</code>. </p>\n\n<p>But when I try to move it since the thread is bound to the other condition variable, <code>mutex</code> and <code>atomic</code>s, anything I do on it is not working. How can I fix this? \nDo I need to use a more complex object and move it around instead of a lambda so the thread can have a referenece to it? or is there another alternative.\nAs always help will be really appreciated :).</p>\n\n<p>Here is a snippet (MWE) of the implementation.</p>\n\n<pre><code>class worker {\npublic:\n    template &lt;class Fn, class... Args&gt;\n    explicit worker(Fn func, Args... args) {\n        t = std::thread(\n            [&amp;func, this](Args... cargs) -&gt; void {\n                std::unique_lock&lt;std::mutex&gt; lock(mtx);\n                while (true) {\n                    cond.wait(lock, [&amp;]() -&gt; bool { return ready; });\n\n                    if (terminate)\n                        break;\n\n                    func(cargs...);\n\n                    ready = false;\n                }\n            },\n            std::move(args)...);\n    }\n\n    worker(worker &amp;&amp;w) : t(std::move(w.t)) { /* here there is trouble  */ }\n\n    worker &amp;operator=(worker &amp;&amp;w) {\n        t = std::move(w.t);\n        terminate.store(wt.terminate);\n        ready.store(wt.ready);\n        return *this; \n        /* here too */\n    }\n\n    ~worker() {\n        terminate = true;\n        if (t.joinable()) {\n            run_once();\n            t.join();\n        }\n    }\n\n    worker() {}\n\n    void run_once() {\n        std::unique_lock&lt;std::mutex&gt; lock(mtx);\n        ready = true;\n        cond.notify_one();\n    }\n\nbool done() { return !ready; }\n\nprivate:\n    std::thread t;\n    std::atomic&lt;bool&gt; ready, terminate; // What can I do with all these?\n    std::mutex mtx;                     //\n    std::condition_variable cond;       //\n};\n\nint main() {\n    worker t;\n    t = worker([]() -&gt; void { cout &lt;&lt; \"Woof\" &lt;&lt; endl; });\n    t.run_once();\n    while(!t.done()) ;\n    return 0;\n}\n</code></pre>\n\n<p>Sorry for the big dump of code.</p>\n"}, {"tags": ["c++", "visual-studio-2015", "point-cloud-library"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2362956"}, "edited": false, "score": 0, "creation_date": 1469690469, "post_id": 38621602, "comment_id": 64643283, "body": "Thank you for your advices. I has installed all-in-one pcl 1.8 for vs2015. I have some problems. I just edited my question text."}], "tags": [], "owner": {"reputation": 58, "user_id": 6340048, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FpAgCVKOmkg/AAAAAAAAAAI/AAAAAAAAADE/VnSKIozttw0/photo.jpg?sz=128", "display_name": "Madhumitha Senthilvel", "link": "https://stackoverflow.com/users/6340048/madhumitha-senthilvel"}, "is_accepted": false, "score": 0, "last_activity_date": 1469647701, "creation_date": 1469647701, "answer_id": 38621602, "question_id": 38619564, "link": "https://stackoverflow.com/questions/38619564/pcl-1-6-installation-on-windows-7/38621602#38621602", "title": "PCL 1.6 installation on windows 7", "body": "<p>If you used the all-in-one installer of PCL 1.6 from pcl website and tried to integrate it in VS 2015, then it wont work (based on my experience). </p>\n\n<p>Either you compile from source (github) and then use cmake to link it to VS 2015 or you use the all-in-one installer for pcl 1.6 with VS 2010/VS 2008. </p>\n\n<p>Recently, PCL 1.8 was released and there do exist some all-in-one installers for VS 2013, and VS 2015. (in case you do not want to compile from source).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2362956"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 763, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469691815, "creation_date": 1469640352, "last_edit_date": 1469691815, "question_id": 38619564, "link": "https://stackoverflow.com/questions/38619564/pcl-1-6-installation-on-windows-7", "title": "PCL 1.6 installation on windows 7", "body": "<p>I try to install pcl for msvc2015 on windows 7. I download pcl1.6 all-in-one exe file form <a href=\"http://pointclouds.org/downloads/\" rel=\"nofollow\">here</a></p>\n\n<p>Then I have installed it by select \"dont add pcl to PATH\". I add manually <code>C:\\Program Files\\PCL 1.6.0\\bin</code> to Path. </p>\n\n<p>I create a win32 console application on msvc2015. I open project properties, </p>\n\n<p><strong>C++->General->Additional Include Directories</strong></p>\n\n<p>C:\\Program Files\\PCL 1.6.0\\3rdParty\\VTK\\include\\vtk-5.8\nC:\\Program Files\\PCL 1.6.0\\3rdParty\\Qhull\\include\nC:\\Program Files\\PCL 1.6.0\\3rdParty\\FLANN\\include\nC:\\Program Files\\PCL 1.6.0\\3rdParty\\Boost\\include \nC:\\Program Files\\PCL 1.6.0\\3rdParty\\Eigen\\include\nC:\\Program Files\\PCL 1.6.0\\include\\pcl-1.6</p>\n\n<p><strong>Linker->Genera->Additional Library Directories</strong></p>\n\n<p>C:\\Program Files\\PCL 1.6.0\\3rdParty\\Boost\\lib\nC:\\Program Files\\PCL 1.6.0\\3rdParty\\FLANN\\lib\nC:\\Program Files\\PCL 1.6.0\\3rdParty\\Qhull\\lib\nC:\\Program Files\\PCL 1.6.0\\3rdParty\\VTK\\lib\\vtk-5.8\nC:\\Program Files\\PCL 1.6.0\\lib</p>\n\n<p><strong>C++->Linker->Input</strong> </p>\n\n<blockquote>\n  <p>pcl_apps_release.lib pcl_common_release.lib pcl_features_release.lib\n  pcl_filters_release.lib pcl_io_release.lib pcl_io_ply_release.lib\n  pcl_kdtree_release.lib pcl_keypoints_release.lib\n  pcl_octree_release.lib pcl_registration_release.lib\n  pcl_sample_consensus_release.lib pcl_search_release.lib\n  pcl_segmentation_release.lib pcl_surface_release.lib\n  pcl_tracking_release.lib pcl_visualization_release.lib</p>\n</blockquote>\n\n<p>Compilation message is here : </p>\n\n<blockquote>\n  <p>pcl::SHOT::rf': USE SHOT352 FOR SHAPE AND SHOT1344 FOR SHAPE+COLOR\n  INSTEAD </p>\n</blockquote>\n\n<p>It doesn`t work on visual stduio 2015. Do I have to compile from source for msvc2015?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I has installed all-in-one pcl 1.8 for vs2015. I have some problems about vtk. \nBelow line throws errors : </p>\n\n<pre><code>pcl::visualization::PointCloudColorHandlerCustom&lt;pcl::PointXYZ&gt; source_cloud_color_handler(source_cloud, 255, 255, 255);\n</code></pre>\n\n<blockquote>\n  <p>Error LNK2001 unresolved external symbol \"public: static class\n  vtkUnsignedCharArray * __cdecl vtkUnsignedCharArray::New(void)\"\n  (?New@vtkUnsignedCharArray@@SAPEAV1@XZ)</p>\n</blockquote>\n\n<p><strong>SOLUTION</strong></p>\n\n<p>I add some vtk lib files under Linker->Input, it works now. Lib files are below :</p>\n\n<blockquote>\n  <p>vtksys.lib \n  vtkCommonCore-7.0-gd.lib \n  vtkCommonDataModel-7.0-gd.lib</p>\n</blockquote>\n"}, {"tags": ["c++", "mfc"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1469644428, "post_id": 38619530, "comment_id": 64627109, "body": "Indices into an image list are zero-based. You are passing <code>1</code> as the index to <code>SetItemImage</code>, even though there is only a single image in the image list, at index <code>0</code>."}, {"owner": {"reputation": 6398, "user_id": 15065, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/wZ5SS.png?s=128&g=1", "display_name": "Gautam Jain", "link": "https://stackoverflow.com/users/15065/gautam-jain"}, "edited": false, "score": 1, "creation_date": 1469683427, "post_id": 38619530, "comment_id": 64639783, "body": "Yes, agree with @llnspectable. Also, make sure m_ImageList is memberof the class and not local variable."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1469698518, "post_id": 38627496, "comment_id": 64648544, "body": "Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-answer\">How to Answer</a>. An answer should not require feedback from the OP."}, {"owner": {"reputation": 1, "user_id": 6647838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470c2bd50da07fa919f21f1f2e99f3c7?s=128&d=identicon&r=PG", "display_name": "pankaj", "link": "https://stackoverflow.com/users/6647838/pankaj"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1498219552, "post_id": 38627496, "comment_id": 76424131, "body": "<a href=\"https://www.linkedin.com/pulse/resizable-controls-mfc-pankaj-kumar\" rel=\"nofollow noreferrer\">linkedin.com/pulse/resizable-controls-mfc-pankaj-kumar</a> Pankaj"}], "tags": [], "owner": {"reputation": 1, "user_id": 6647838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470c2bd50da07fa919f21f1f2e99f3c7?s=128&d=identicon&r=PG", "display_name": "pankaj", "link": "https://stackoverflow.com/users/6647838/pankaj"}, "is_accepted": false, "score": -1, "last_activity_date": 1469685268, "last_edit_date": 1469685268, "creation_date": 1469682419, "answer_id": 38627496, "question_id": 38619530, "link": "https://stackoverflow.com/questions/38619530/tree-control-doesnt-show-the-image-associated/38627496#38627496", "title": "tree control doesn&#39;t show the image associated", "body": "<p>I have faced same problem, while working with images on GDI sdk(win32). For solution of this you may:-</p>\n\n<ol>\n<li>Check size of bmp images, as it will not support bigger than frame.</li>\n<li>I fixed with direct APIS. like \"LoadImage(...)/SetImage(...)\" on\nSDK..</li>\n</ol>\n\n<p>Hope it will help you.</p>\n"}], "owner": {"reputation": 85, "user_id": 6646015, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh6.googleusercontent.com/-ZiLJy8ofMLY/AAAAAAAAAAI/AAAAAAAAAAA/3jr8ucCg-Oo/photo.jpg?sz=128", "display_name": "Sandeep Kumar", "link": "https://stackoverflow.com/users/6646015/sandeep-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469685268, "creation_date": 1469640235, "last_edit_date": 1469643803, "question_id": 38619530, "link": "https://stackoverflow.com/questions/38619530/tree-control-doesnt-show-the-image-associated", "title": "tree control doesn&#39;t show the image associated", "body": "<p>I am trying to create a tree control that displays the folder structure of all the drives in the System for which i am using CTreeCtrl. I want to add the Folder image to the treectrl and used the following code to test but i am surprised that the image is  not shown up.</p>\n\n<pre><code>CImageList m_ImageList;     \nCBitmap m_Bitmap1;  \nm_ImageList.Create(16, 16, ILC_COLOR, 0, 1);       \nm_Bitmap1.LoadBitmap(IDB_BITMAP1);  \nm_ImageList.Add(&amp;m_Bitmap1, (COLORREF)0xFFFFFF);        \nm_cTreeCtrl.SetImageList(&amp;m_ImageList, TVSIL_NORMAL);   \nHTREEITEM hTree = m_cTreeCtrl.InsertItem(L\"C Drive\", 0, 0, TVI_ROOT); \nHTREEITEM hCompany = m_cTreeCtrl.InsertItem(L\"Program Files\", 0, 0, hTree);     \nm_cTreeCtrl.SetItemImage(hTree , 1, 1);\n</code></pre>\n\n<p>My Bitmap id is IDB_BITMAP1 is bitmap for the folder.<br>\nI see a blank space beside the text instead of the image.</p>\n\n<p>Please correct me. Thanks </p>\n"}, {"tags": ["c++", "audio", "boost-asio", "beep"], "comments": [{"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 0, "creation_date": 1469652284, "post_id": 38619486, "comment_id": 64631272, "body": "<code>here &quot;asd@&quot; is my string, the rest changes every time when I debug</code> looks like the buffer is read without caring about the size of it, welcome to C++. Might wanna give the boost::asio::buffer a hint about the buffers size."}, {"owner": {"reputation": 375, "user_id": 1183857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cad336d2b77a7538cab4005f334d9a78?s=128&d=identicon&r=PG", "display_name": "Cengiz Kandemir", "link": "https://stackoverflow.com/users/1183857/cengiz-kandemir"}, "reply_to_user": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 0, "creation_date": 1469654182, "post_id": 38619486, "comment_id": 64632230, "body": "Do you mean I should prepare() the buffer? I was planning to manually manage all commits and consumes but <a href=\"http://stackoverflow.com/questions/28478278/working-with-boostasiostreambuf/28504203?noredirect=1#comment64612843_28504203\">here</a>, someone told me that it is automatically managed if <code>boost::asio::streambuf</code> itself is used in asio functions."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1469654214, "post_id": 38619486, "comment_id": 64632246, "body": "Have you tried disabling console output and testing to see if you&#39;re still getting the beeps?"}, {"owner": {"reputation": 375, "user_id": 1183857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cad336d2b77a7538cab4005f334d9a78?s=128&d=identicon&r=PG", "display_name": "Cengiz Kandemir", "link": "https://stackoverflow.com/users/1183857/cengiz-kandemir"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1469654542, "post_id": 38619486, "comment_id": 64632423, "body": "@Xirema, Disabling all sorts of console logs/outputs didn&#39;t help"}, {"owner": {"reputation": 375, "user_id": 1183857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cad336d2b77a7538cab4005f334d9a78?s=128&d=identicon&r=PG", "display_name": "Cengiz Kandemir", "link": "https://stackoverflow.com/users/1183857/cengiz-kandemir"}, "edited": false, "score": 0, "creation_date": 1469656737, "post_id": 38619486, "comment_id": 64633437, "body": "@Backtempel, I think I misunderstood what you are trying to say. I thought you are talking about read functions when in fact problem was (probably) about send function. After giving data&#39;s size to boost::asio::buffer used in <code>Send()</code> and <code>Correspond()</code> functions, it stopped beeping (finally). If you write an answer, I shall accept it. I can&#39;t believe I missed it :&gt;"}, {"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "reply_to_user": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 0, "creation_date": 1469718309, "post_id": 38619486, "comment_id": 64663406, "body": "@Blacktempel The <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/boost_asio/reference/buffer/overload23.html\" rel=\"nofollow noreferrer\"><code>boost::asio::buffer(vector)</code></a> overload being used deduces the size of the buffer.  In this case, explicitly providing a size should not be required if one wishes to send the entire buffer.  @Cengiz I rarely find a need to explicitly provide size to <code>boost::asio::buffer()</code>.  If explicitly providing <code>data.size()</code> as the size to <code>boost::asio::buffer()</code> changes the behavior of the program, then I would be suspicious and investigate further."}, {"owner": {"reputation": 375, "user_id": 1183857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cad336d2b77a7538cab4005f334d9a78?s=128&d=identicon&r=PG", "display_name": "Cengiz Kandemir", "link": "https://stackoverflow.com/users/1183857/cengiz-kandemir"}, "reply_to_user": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1469718485, "post_id": 38619486, "comment_id": 64663540, "body": "@Tanner, do you think the problem is on my end? I merely use these async functions. Giving size indeed silenced the beep. Thank you for the tip, I will investigate further."}, {"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1469723850, "post_id": 38619486, "comment_id": 64667337, "body": "Given <code>buffer(*localbuffer)</code> is the equivalent of <code>buffer(*localbuffer, localbuffer-&gt;size())</code> and <code>buffer(*localbuffer, data.size())</code> (<a href=\"http://coliru.stacked-crooked.com/a/244301a19d945493\" rel=\"nofollow noreferrer\">demo</a>), I would be surprised if that is the fundamental source of the problem. If I was getting a system beep, I would suspect that the ASCII Bell character (0x07) is getting written to the console.  In particular, the unicode bullet \u2022 (0x2022) that appears in the buffer can be converted into the ASCII Bell character (see <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20070104-12/?p=28513\" rel=\"nofollow noreferrer\">here</a>)."}, {"owner": {"reputation": 375, "user_id": 1183857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cad336d2b77a7538cab4005f334d9a78?s=128&d=identicon&r=PG", "display_name": "Cengiz Kandemir", "link": "https://stackoverflow.com/users/1183857/cengiz-kandemir"}, "reply_to_user": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1469734307, "post_id": 38619486, "comment_id": 64673281, "body": "@Tanner, can you read my comment under the answer? It seems like some string contained within the shared_ptr is passed to the WDASend(), which then tries to send it. <a href=\"http://stackoverflow.com/questions/38619486/boost-asio-async-send-produces-beep-sound/38626844?noredirect=1#comment64666673_38626844\">this comment</a>"}, {"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1469739022, "post_id": 38619486, "comment_id": 64675628, "body": "@Cengiz I have read the comments and would expect the string contained within the buffer to be passed to <code>WDASend()</code>.  I still postulate that the ASCII Bell character is being written to a console."}, {"owner": {"reputation": 375, "user_id": 1183857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cad336d2b77a7538cab4005f334d9a78?s=128&d=identicon&r=PG", "display_name": "Cengiz Kandemir", "link": "https://stackoverflow.com/users/1183857/cengiz-kandemir"}, "reply_to_user": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1469739171, "post_id": 38619486, "comment_id": 64675693, "body": "@Tanner, I think you are right. It might have been a problem with server writing some problematic character to the console. It could be the case that I&#39;ve been looking at the wrong side. I made a mistake by chance, and had to recompiled the async echo server example from boost website. This time, I used proper console outputs on the server side, rather than quick jobs. It silenced the problem. If I can isolate it even further, I will write it here."}], "answers": [{"comments": [{"owner": {"reputation": 375, "user_id": 1183857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cad336d2b77a7538cab4005f334d9a78?s=128&d=identicon&r=PG", "display_name": "Cengiz Kandemir", "link": "https://stackoverflow.com/users/1183857/cengiz-kandemir"}, "edited": false, "score": 0, "creation_date": 1469722766, "post_id": 38626844, "comment_id": 64666673, "body": "the problem occurred again, unfortunately. After debugging even more, I realized the contents of shared_ptr and the message I am trying to send are the same. Like following <code>[Raw View]\t{_Myval2={_Myfirst=0x004828a8 &quot;asd@\u0131\u0131\u0131\u0131&#250;&#165;&#191;\\x2&quot; _Mylast=0x004828ac &quot;\u0131\u0131\u0131\u0131&#250;&#165;&#191;\\x2&quot; _Myend=0x004828ac &quot;\u0131\u0131\u0131\u0131&#250;&#165;&#191;\\x2&quot; } }\tstd::_Compressed_pair&lt;std::_Wrap_alloc&lt;std::allocator&lt;char&zwnj;&#8203;&gt; &gt;,std::_Vector_val&lt;std::_Simple_types&lt;char&gt; &gt;,1&gt;</code>. Notice <i>asd@\u0131\u0131\u0131\u0131&#250;&#165;&#191;\\x2</i>, this is the exact string that <code>WSASend()</code> is trying to send and causing beeps. What do you think the problem is here?"}, {"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "reply_to_user": {"reputation": 375, "user_id": 1183857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cad336d2b77a7538cab4005f334d9a78?s=128&d=identicon&r=PG", "display_name": "Cengiz Kandemir", "link": "https://stackoverflow.com/users/1183857/cengiz-kandemir"}, "edited": false, "score": 0, "creation_date": 1469725223, "post_id": 38626844, "comment_id": 64668175, "body": "@CengizKandemir Could you post a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> that reproduces your problem ? I&#39;m on phone, I&#39;ll take another look at the question later."}, {"owner": {"reputation": 375, "user_id": 1183857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cad336d2b77a7538cab4005f334d9a78?s=128&d=identicon&r=PG", "display_name": "Cengiz Kandemir", "link": "https://stackoverflow.com/users/1183857/cengiz-kandemir"}, "edited": false, "score": 0, "creation_date": 1469738185, "post_id": 38626844, "comment_id": 64675220, "body": "I can&#39;t reproduce the problem properly. The MCVE I tried is not beeping. I also recompiled the echo server example I am using, maybe it was actually the server that was beeping due to some problematic cout on the server side. If I isolate the problem even further, I will write here."}], "tags": [], "owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "is_accepted": true, "score": 1, "last_activity_date": 1469678186, "creation_date": 1469678186, "answer_id": 38626844, "question_id": 38619486, "link": "https://stackoverflow.com/questions/38619486/boost-asio-async-send-produces-beep-sound/38626844#38626844", "title": "Boost Asio async_send produces beep sound", "body": "<p><code>here \"asd@\" is my string, the rest changes every time when I debug</code></p>\n\n<p>The buffer is read without caring about the size of it, welcome to C++. Give the <code>boost::asio::buffer</code> the buffers size.</p>\n"}], "owner": {"reputation": 375, "user_id": 1183857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cad336d2b77a7538cab4005f334d9a78?s=128&d=identicon&r=PG", "display_name": "Cengiz Kandemir", "link": "https://stackoverflow.com/users/1183857/cengiz-kandemir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 38626844, "answer_count": 1, "score": 0, "last_activity_date": 1469678186, "creation_date": 1469640079, "last_edit_date": 1495542179, "question_id": 38619486, "link": "https://stackoverflow.com/questions/38619486/boost-asio-async-send-produces-beep-sound", "title": "Boost Asio async_send produces beep sound", "body": "<p>Trying to write a client for a type of server which behaves like an echo server. When I try to send something, it produces a beep sound. I've found that the problem arise at line 356 (on my editor) of win_iocp_socket_service_base.ipp file. The code is:</p>\n\n<pre><code>int result = ::WSASend(impl.socket_, buffers,\n        static_cast&lt;DWORD&gt;(buffer_count), &amp;bytes_transferred, flags, op, 0);\n</code></pre>\n\n<p>Then I made some research. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/4048288/continuous-boostasio-reads\">Continuous boost::asio reads</a> here in the comment of the answer, someone said when a binary data is being written to <code>std::cout</code>.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4207034/why-does-the-following-code-make-my-computer-beep?rq=1\">Why does the following code make my computer beep?</a> here, it seems like the problem is same. They concluded that a '\\a' is what produced the sound.</p>\n\n<p>Debugging the application, the buffer of the API function I mentioned earlier, contains the following:</p>\n\n<pre><code>\"asd@\u0131\u0131\u0131\u01312\u2022Z\\x1aP\"\n</code></pre>\n\n<p>here \"asd@\" is my string, the rest changes every time when I debug and I don't know what are they. Now, this is probably the part which the sound is produced, but my question how do I prevent it?</p>\n\n<p>I have the following implementation of a one-round \"Correspond\" function. Note that I also have a isolated <code>Send()</code> function implementation, which can be paired with <code>ReadUntil()</code> explicitly to achieve same result. Using <code>Send()</code> and <code>ReadUntil()</code> together, the beep sound is still produced. Normally, this shouldn't happen as I am <em>not</em> dealing with low-level API functions, but Boost.Asio. Am I doing something wrong?</p>\n\n<p><strong>CODES</strong></p>\n\n<pre><code>void Correspond(const std::string &amp;data,\n                const std::string &amp;delim,\n                std::vector&lt;char&gt; &amp;response)\n{\n    std::shared_ptr&lt;std::vector&lt;char&gt;&gt; localbuffer = std::make_shared&lt;std::vector&lt;char&gt;&gt;(data.begin(), data.end());\n\n    // pass shared_ptr to callback function to prolong the buffer's lifetime\n    // !!! perhaps a better buffer management is needed\n    socket.async_send(boost::asio::buffer(*localbuffer),\n                      std::bind(&amp;TCPClient::on_correspond,\n                                this,\n                                std::placeholders::_1,\n                                std::placeholders::_2,\n                                delim,\n                                std::ref(response),\n                                localbuffer));\n}\n</code></pre>\n\n<p>and following callback implementation</p>\n\n<pre><code>void on_correspond(const boost::system::error_code&amp; errorcode,\n                   std::size_t sent,\n                   const std::string &amp;delim,\n                   std::vector&lt;char&gt; &amp;response,\n                   const std::shared_ptr&lt;std::vector&lt;char&gt;&gt; &amp;buffer)\n{\n    if(errorcode) {\n        SLOGERROR(mutex, errorcode.message(), \"on_correspond()\");\n    }\n\n    if(sent == 0) {\n        SLOG(mutex, \"0 bytes sent w/o errors\", \"on_correspond()\");\n    }\n\n    ReadUntil(delim, response);\n}\n</code></pre>\n\n<p>After debugging deep into API, I've found this issue is not related with read function, but I will post it here just to be sure.</p>\n\n<pre><code>void ReadUntil(const std::string &amp;delim, std::vector&lt;char&gt; &amp;response)\n{\n    boost::asio::async_read_until(socket,\n                                  buffer,\n                                  delim,\n                                  std::bind(&amp;TCPClient::on_readuntil,\n                                            this,\n                                            std::placeholders::_1,\n                                            std::placeholders::_2,\n                                            std::ref(response)));\n}\nvoid on_readuntil(const boost::system::error_code&amp; errorcode,\n                  std::size_t received,\n                  std::vector&lt;char&gt; &amp;response)\n{\n    SLOG(mutex, \"on_readuntil invoked\", \"on_readuntil()\");\n    SLOG(mutex, received, \"on_readuntil\");\n    // !!! needs error handling, short-read handling and whatnot\n    if(errorcode) {\n        SLOGERROR(mutex, errorcode.message(), \"on_readuntil()\");\n        return;\n    }\n\n    if(received == 0) {\n        SLOG(mutex, \"0 bytes received w/o errors\", \"on_readuntil()\");\n    }\n\n    response.reserve(received);\n    std::copy(boost::asio::buffers_begin(buffer.data()),\n              boost::asio::buffers_begin(buffer.data()) + received,\n              std::back_inserter(response));\n    buffer.consume(received);\n}\n</code></pre>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469639851, "post_id": 38619397, "comment_id": 64624475, "body": "Please <b><a href=\"https://stackoverflow.com/posts/38619397/edit\">edit</a></b> your question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469639883, "post_id": 38619397, "comment_id": 64624486, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 7838, "user_id": 2316009, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c0773432eccd998e20b0d620dcbfec0f?s=128&d=identicon&r=PG", "display_name": "Teo Chuen Wei Bryan", "link": "https://stackoverflow.com/users/2316009/teo-chuen-wei-bryan"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469639952, "post_id": 38619397, "comment_id": 64624523, "body": "I would be happy to debug if it produces any error, unfortunately, I managed to compile them thus, making it very hard for me to figure what is the issue ."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1469640026, "post_id": 38619397, "comment_id": 64624562, "body": "That is not debugging.  debugging is running the program and stepping through the code line by line to see how it works and what is going on.  It is what you do after it compiles without errors but still does not work.  If you click on the link from my previous comment it will show you how you can debug your code."}], "answers": [{"comments": [{"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1469640866, "post_id": 38619433, "comment_id": 64625075, "body": "... because <code>&#39;1&#39;</code> is a char and its corresponding ASCII (or utf8) code is 49, so <code>&#39;1&#39; != 1</code>..."}, {"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1469643660, "post_id": 38619433, "comment_id": 64626652, "body": "Why not have the function return int?"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1469648119, "post_id": 38619433, "comment_id": 64629148, "body": "@DanKorn It doesn&#39;t really matters. It could return an enum too, as long as it matches the <code>case</code>s."}], "tags": [], "owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "is_accepted": true, "score": 4, "last_activity_date": 1469639911, "creation_date": 1469639911, "answer_id": 38619433, "question_id": 38619397, "link": "https://stackoverflow.com/questions/38619397/unable-to-get-values-from-user-defined-functions/38619433#38619433", "title": "unable to get values from user-defined functions", "body": "<p>Either change:</p>\n\n<pre><code>position = 1;\nposition = 2;\n...\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>position = '1';\nposition = '2';\n...\n</code></pre>\n\n<hr>\n\n<p>Or change:</p>\n\n<pre><code>case '1':\ncase '2':\n...\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>case 1:\ncase 2:\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "is_accepted": false, "score": 0, "last_activity_date": 1469640159, "creation_date": 1469640159, "answer_id": 38619509, "question_id": 38619397, "link": "https://stackoverflow.com/questions/38619397/unable-to-get-values-from-user-defined-functions/38619509#38619509", "title": "unable to get values from user-defined functions", "body": "<p>Having </p>\n\n<pre><code>position = '1';\nposition = '2';\n</code></pre>\n\n<p>You should also always have a default statement in your switch statement as this helps you understand that none of the case statements were executed, a simple way of debugging.</p>\n\n<p>Can implement like this:</p>\n\n<pre><code>switch(position)\n{\ncase '1':\n//whatever\nbreak;\ncase '2':\n//whatever\nbreak;\ndefault:\n//Can have a message like:\ncout &lt;&lt; \"The value was not in any of the case statements\" &lt;&lt; endl;\n//No break needed for default statements\n}\n</code></pre>\n"}], "owner": {"reputation": 7838, "user_id": 2316009, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c0773432eccd998e20b0d620dcbfec0f?s=128&d=identicon&r=PG", "display_name": "Teo Chuen Wei Bryan", "link": "https://stackoverflow.com/users/2316009/teo-chuen-wei-bryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 38619433, "answer_count": 2, "score": 0, "last_activity_date": 1469640159, "creation_date": 1469639785, "last_edit_date": 1592644375, "question_id": 38619397, "link": "https://stackoverflow.com/questions/38619397/unable-to-get-values-from-user-defined-functions", "title": "unable to get values from user-defined functions", "body": "<p>I'm trying to retrieve data from a user-define function unfortunately, i'm not able to do so.</p>\n<p>For instance, i have two user-define function that is</p>\n<blockquote>\n<p>getPosition : In order to know the position on a graph based on a user input</p>\n<p>printPosition : In order to display information based on the position of the graph</p>\n</blockquote>\n<p>So for example for my <code>getPosition</code>, i did a simple if else statement</p>\n<pre><code>char getPosition (float x, float y){\n\nchar position;\n\nif (x &gt; 0 &amp;&amp; y &gt; 0)\n\n    position = 1;\n\nelse if (x &lt; 0 &amp;&amp; y &gt; 0)\n\n    position = 2;\n\n ......\n \nreturn position;\n</code></pre>\n<p>Next, i try to <code>printPosition</code> using a switch case</p>\n<pre><code>    switch(position)\n{\n\n    case '1' : cout &lt;&lt; &quot;==&gt; (&quot; &lt;&lt; x &lt;&lt; &quot;, &quot; &lt;&lt; y &lt;&lt; &quot;) is above X-axis&quot; &lt;&lt; endl;\n               cout &lt;&lt; &quot;==&gt; It is at first quadrant&quot; &lt;&lt; endl;\n               break;\n               \n    case '2' : cout &lt;&lt; &quot;==&gt; (&quot; &lt;&lt; x &lt;&lt; &quot;, &quot; &lt;&lt; y &lt;&lt; &quot;) is above X-axis&quot; &lt;&lt; endl;\n               cout &lt;&lt; &quot;==&gt; It is at second quadrant&quot; &lt;&lt; endl;\n               break;\n\n   .......\n\n}\n</code></pre>\n<p>So after having two user-define function, i attempted to call for the values in <code>getPosition</code> to print out the data from <code>printPosition</code></p>\n<pre><code>printPosition(x, y, getPosition(x,y));\n</code></pre>\n<p>However, it does not produce any output. Why is this so.</p>\n<p>Thanks in advance for any help.</p>\n"}, {"tags": ["c++", "string", "static", "literals", "constexpr"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1469640694, "post_id": 38619259, "comment_id": 64624974, "body": "Do you require to have array instead of C-string pointer ? Doesn&#39;t <code>const char* my_string;</code> enough ?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1469640759, "post_id": 38619259, "comment_id": 64625003, "body": "BTW, <code>std::cout &lt;&lt;</code> is not <code>constexpr</code>."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1469642003, "post_id": 38619259, "comment_id": 64625698, "body": "Put the variable in an anonymous namespace outside the function and use the BOOST_CONSTEXPR_OR_CONST cv on it."}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 1240968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391144aa2e895121cb747f5446de9b76?s=128&d=identicon&r=PG", "display_name": "Paul A. Bristow", "link": "https://stackoverflow.com/users/1240968/paul-a-bristow"}, "edited": false, "score": 3, "creation_date": 1469696628, "post_id": 38619648, "comment_id": 64647172, "body": "This confirms my suspicion that this is an unnecessary annoying restriction.  For a single use, the suggestions are trivial changes, but this applies to dozens of functions and distributions so any change is messy. There are other impediments to making it constexpr, so I&#39;ll wait for a relaxation in c++latest."}], "tags": [], "owner": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "is_accepted": false, "score": 5, "last_activity_date": 1469640675, "creation_date": 1469640675, "answer_id": 38619648, "question_id": 38619259, "link": "https://stackoverflow.com/questions/38619259/literal-string-declared-static-in-constexpr-function/38619648#38619648", "title": "literal string declared static in constexpr function", "body": "<p>You can't have static variables in constexpr functions currently. There is a proposal to relax that requirement if the variable is initialized with a compile time expression.</p>\n\n<p>Since you're assigning to a string literal, I would recommend just dropping the 'static' and assuming the compiler makes it as optimal as possible either way (which it should for this, in practice). Another option would be to make the string a <code>static constexpr</code> as a private class member, or in namespace scope.</p>\n"}], "owner": {"reputation": 181, "user_id": 1240968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391144aa2e895121cb747f5446de9b76?s=128&d=identicon&r=PG", "display_name": "Paul A. Bristow", "link": "https://stackoverflow.com/users/1240968/paul-a-bristow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1463, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1469640675, "creation_date": 1469639315, "question_id": 38619259, "link": "https://stackoverflow.com/questions/38619259/literal-string-declared-static-in-constexpr-function", "title": "literal string declared static in constexpr function", "body": "<p>I'm trying to make constexpr some existing code, but getting message</p>\n\n<p>error: 'my_string' declared 'static' in 'constexpr' function</p>\n\n<p>Much simplified, the code is:</p>\n\n<pre><code>template &lt;typename T&gt;\nconstexpr\nint foo(const int x)\n{\n  static // error: 'my_string' declared 'static' in 'constexpr' function\n  constexpr char my_string[] = \"my foo error message!\";\n  if (x == 0)\n  {\n    std::cout &lt;&lt; my_string &lt;&lt; std::endl;\n  }\n  return  x;\n}\n\nclass boo\n{\npublic:\n  constexpr boo()\n  {\n   static // error: 'constructor_string' declared 'static' in 'constexpr' function\n   constexpr char constructor_string[] = \"my constructor error message.\";\n  }\n};\n</code></pre>\n\n<p>The strings are used elsewhere of course and I'd like to ensure that they are never duplicated (so static) (and I'd like to maintain the use of static for compatibility with C++03 where the constexpr is not available by using  BOOST_CONSTEXPR_OR_CONST).</p>\n"}, {"tags": ["c++", "valgrind"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 2, "creation_date": 1469638659, "post_id": 38619066, "comment_id": 64623788, "body": "Please post a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> to ask us help for debugging."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1469638726, "post_id": 38619066, "comment_id": 64623841, "body": "<code>imageFeatures.size());</code> will emit compile error due to an extra <code>)</code>."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1469638818, "post_id": 38619066, "comment_id": 64623893, "body": "<code>Feature newFeat = new Feature(input);</code> this may be valid but smells. Why not <code>Feature newFeat(input);</code> nor <code>Feature* newFeat = new Feature(input);</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 6589230, "user_type": "registered", "profile_image": "https://graph.facebook.com/252457711805259/picture?type=large", "display_name": "Philip Dakin", "link": "https://stackoverflow.com/users/6589230/philip-dakin"}, "is_accepted": false, "score": 0, "last_activity_date": 1469643887, "creation_date": 1469643887, "answer_id": 38620539, "question_id": 38619066, "link": "https://stackoverflow.com/questions/38619066/invalid-read-of-size-8-using-valgrind/38620539#38620539", "title": "invalid read of size 8 using Valgrind", "body": "<p>I think\n    <code>Feature newFeat = new Feature(input)</code>\nis the problem. This will allocate a new Feature on the heap, but you will lose its address and it will thus not be deleted. Use <code>Feature* newFeat = new Feature(input)</code> as per MikeCAT's suggestion. </p>\n"}], "owner": {"reputation": 11, "user_id": 6645754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/839bfc6a75b4e709c32a3d87e629ef4a?s=128&d=identicon&r=PG&f=1", "display_name": "Lendalf", "link": "https://stackoverflow.com/users/6645754/lendalf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 443, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1469644040, "creation_date": 1469638602, "last_edit_date": 1469644040, "question_id": 38619066, "link": "https://stackoverflow.com/questions/38619066/invalid-read-of-size-8-using-valgrind", "title": "invalid read of size 8 using Valgrind", "body": "<p>When I run my program with valgrind it gives an invalid read and write of size 8 error. I have broke my head over this but I can't see what's going wrong. </p>\n\n<p>The valgrind errors occur in the last and second last lines of this code:</p>\n\n<pre><code>void MLPerceptron::returnOutputActivation(vector&lt;Feature&gt; imageFeatures,vector&lt;double&gt;&amp; outputActivation){\n    int train = 1;\n    for (unsigned int i = 0; i&lt;imageFeatures.size();i++){\n        activations[0] = imageFeatures[i].content;\n        feedforward(train);\n        activationsToOutputProbabilities();\n        setMinActivation(outputActivation,activations[2]);\n    }\n}\n\nvoid MLPerceptron::setMinActivation(vector&lt;double&gt;&amp; minOutputActivation,vector&lt;double&gt; currentActivation){\n\n    for(unsigned int i=0;i&lt;currentActivation.size();i++){\n            if(minOutputActivation[i] &gt; currentActivation[i])\n                    minOutputActivation[i] = currentActivation[i];\n    }\n}\n</code></pre>\n\n<p>The vectors are initialized in another function and then given to the function returnOutputActivations, this happens in a different file see here:</p>\n\n<pre><code>void MLPController:: createOutputProbabilitiesVectorTest(vector&lt;vector&lt;Feature&gt; &gt;&amp; testSet){\n    unsigned int nOutputProbabilities = settings.mlpSettings.nOutputUnits;\n\n    vector&lt;double&gt; input;\n    input.reserve(nOutputProbabilities*nMLPs);\n\n    for(int j=0; j&lt;nMLPs; j++){\n        vector&lt;Feature&gt;::const_iterator first = testSet[j].begin();\n        vector&lt;Feature&gt;::const_iterator last = testSet[j].begin()+numPatchesPerSquare[j];\n\n        vector&lt;double&gt; inputTemp = vector&lt;double&gt;(nOutputProbabilities, 10.0);\n\n        mlps[0][j].returnOutputActivation(vector&lt;Feature&gt;(first,last),inputTemp);\n\n        input.insert(input.end(),inputTemp.begin(),inputTemp.end());    \n    }\n\n    Feature newFeat = new Feature(input);   \n    newFeat.setLabelId(testSet[0][0].getLabelId());\n    inputTrainSecondLayerMLP.push_back(newFeat);\n}\n</code></pre>\n\n<p>I know that there already a lot of posts about the valgrind error but it didn't help me to figure out what's going wrong.</p>\n"}, {"tags": ["c++", "c++11", "visual-studio-2012", "vector", "initializer-list"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469638848, "post_id": 38619054, "comment_id": 64623907, "body": "VS2012 even with the update doesn;t have the best C++11 support.  Can you upgrade to 2015?  It works there."}, {"owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469638899, "post_id": 38619054, "comment_id": 64623941, "body": "I asked my school if they have a license for VS2013 or VS2015 but they didn&#39;t answer yet."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469639071, "post_id": 38619054, "comment_id": 64624030, "body": "Do you need a License? Go to google and install VS Community 2015, I don&#39;t remember I needed a license."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1469639096, "post_id": 38619054, "comment_id": 64624044, "body": "You could use mingw and do a makefile project, then you will have the latest GCC."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1469639178, "post_id": 38619054, "comment_id": 64624087, "body": "@whiteShadow VS2012 is too old for proper c++11 standard facilities. Even if that sounds weird from the numbers."}, {"owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1469643030, "post_id": 38619054, "comment_id": 64626306, "body": "@Ben I actually had a makefile (for gcc), but I&#39;ve been asked to compile it on VS (to be honest I&#39;m not really happy about it, but, meh...)"}, {"owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469643033, "post_id": 38619054, "comment_id": 64626309, "body": "@FirstStep I don&#39;t remember VS being free. Did Microsoft changed their policy ?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1469643099, "post_id": 38619054, "comment_id": 64626349, "body": "@whiteShadow There is a community version free for personal and small business use."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469643124, "post_id": 38619054, "comment_id": 64626365, "body": "I mean, if you are a student try to provide your school email to create a new account then, it would be free. AFAIK"}, {"owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1469643136, "post_id": 38619054, "comment_id": 64626371, "body": "@Ben Ok thanks I will give it a try :)"}, {"owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "edited": false, "score": 0, "creation_date": 1470345327, "post_id": 38619054, "comment_id": 64926471, "body": "I finally decided to switch to VS2015 Community Edition, and now it works. Thank you."}], "owner": {"reputation": 261, "user_id": 3655057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0c7d6590243bc0d5b3a1146e85c26e2e?s=128&d=identicon&r=PG", "display_name": "whiteShadow", "link": "https://stackoverflow.com/users/3655057/whiteshadow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "closed_date": 1469639334, "answer_count": 0, "score": 0, "last_activity_date": 1469638852, "creation_date": 1469638573, "last_edit_date": 1469638852, "question_id": 38619054, "link": "https://stackoverflow.com/questions/38619054/initializing-stdvectorstdvectordouble-in-vs2012", "closed_reason": "Duplicate", "title": "Initializing std::vector&lt;std::vector&lt;double&gt;&gt; in VS2012", "body": "<p>I have this code, that compiled perfectly on gcc (c++11):</p>\n\n<pre><code>static const std::vector&lt; std::vector&lt;double&gt; &gt; vect = \n{\n  {1,1,1}, \n  {1,1,-1}, \n  {-1,1,-1}, \n  {-1,1,1}, \n  {1,-1,1}, \n  {1,-1,-1}, \n  {-1,-1,-1}, \n  {-1,-1,1}\n};\n</code></pre>\n\n<p>However, when I tried to compiled in on VS2012, I first got an error of unsupported initializer list. I fixed it by installing the November CTP and using the new compiler.\nHowever, now I'm getting this error:</p>\n\n<pre><code>error C2440: 'initializing' : cannot convert from 'initializer-list' to 'std::vector&lt;std::vector&lt;double,std::allocator&lt;_Ty&gt;&gt;,std::allocator&lt;std::vector&lt;_Ty,std::allocator&lt;_Ty&gt;&gt;&gt;&gt;'\n1&gt;          with\n1&gt;          [\n1&gt;              _Ty=double\n1&gt;          ]\n1&gt;          No constructor could take the source type, or constructor overload resolution was ambiguous\n</code></pre>\n\n<p>I've seen people saying to use an array and use the range constructor, but this is usually for a single dimensional vector.</p>\n\n<p>I could probably do the same, but that would mean I will need to initialize all vectors 1 by 1 first, and then initialize the second dimension of the vector by pushing vectors, like this:</p>\n\n<pre><code>std::array&lt;double,3&gt; v0_init = {1,1,1};\nstd::vector&lt;double&gt; v0(v0_init.begin(), v0_init.end());\nstd::array&lt;double,3&gt; v1_init = {1,1,-1};\nstd::vector&lt;double&gt; v1(v1_init.begin(), v1_init.end());\n...\nstd::vector&lt; std::vector&lt;double&gt; &gt; vect;\nvect.push_back(v0);\nvect.push_back(v1);\n...\n</code></pre>\n\n<p>But I don't think it's a clean way to do it, and it's also not easy to find the vectors value (other people may have to access, modify or even add vectors, and I don't want them to have to copy/paste some of the code to add some new vectors to the list).</p>\n\n<p>Is there a better way to do it ?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "interface", "composite"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1469638561, "post_id": 38619028, "comment_id": 64623721, "body": "C++ has no distinct &quot;interface&quot;, just abstract classes. In an interface in eg. Java, it&#39;s just not possible to have variables."}, {"owner": {"reputation": 81656, "user_id": 8446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8f9c683775bfbe76ed4855a19b73dc81?s=128&d=identicon&r=PG", "display_name": "Roger Lipscombe", "link": "https://stackoverflow.com/users/8446/roger-lipscombe"}, "edited": false, "score": 0, "creation_date": 1469638751, "post_id": 38619028, "comment_id": 64623857, "body": "If you&#39;re storing them in the abstract base class (no interfaces in C++) as public fields, then you put an implicit burden on the implementer of the derived class to keep the fields up to date.  If you put them on the base class as virtual (pure) getters, then you force the implementer to think about them."}], "answers": [{"tags": [], "owner": {"reputation": 12051, "user_id": 656243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3afyW.png?s=128&g=1", "display_name": "Lynn Crumbling", "link": "https://stackoverflow.com/users/656243/lynn-crumbling"}, "is_accepted": false, "score": 3, "last_activity_date": 1469639496, "last_edit_date": 1469639496, "creation_date": 1469638642, "answer_id": 38619079, "question_id": 38619028, "link": "https://stackoverflow.com/questions/38619028/is-it-alright-to-put-data-members-in-an-interface/38619079#38619079", "title": "Is it alright to put data members in an interface?", "body": "<p>It's not really a question of \"is it a good practice\". By creating an interface, you're defining a standard. The question is, do you NEED the implementation of the interface to contain those data members? You are in the best position to understand your implementation, so you're really the only one who can answer this.</p>\n\n<p>As a general rule, the class implementing the interface should be a black box, and the outside world shouldn't have access to any internals (including member data). Interfaces define common functionality that is required to be present to be able to support the interface, and I'd expect those implementation details to be buried in the underlying implementation of the class only, as a general rule. YMMV. </p>\n"}, {"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 7, "last_activity_date": 1469639787, "creation_date": 1469639787, "answer_id": 38619398, "question_id": 38619028, "link": "https://stackoverflow.com/questions/38619028/is-it-alright-to-put-data-members-in-an-interface/38619398#38619398", "title": "Is it alright to put data members in an interface?", "body": "<p>I would say its not a problem. Th difference is that instead of a <em>pure interface class</em> you have an <em>abstract base class</em>. However, if you want to retain the flexibility to use the <em>interface</em> for implementations that are not tied down to those specific member variables then you can always create an <em>interface class</em> as well as an <em>abstract base class</em> for full flexibility. Though that may be getting overly complex overly soon, you can always split the <em>interface</em> from the <em>abstract base</em> later if you need to. </p>\n\n<pre><code>using CItemUPtr = std::unique_ptr&lt;class CItem&gt;;\n\n/**\n * Interface class\n */\nclass CItem\n{\npublic:\n    virtual ~CItem() {}\n\n    virtual CItemUPtr findByName(std::string const&amp; name) = 0;\n    virtual void setHidden(bool a, bool b) = 0;\n};\n\n/**\n * Abstract base class\n */\nclass AbstractCItem\n: public CItem\n{\nprotected:\n    std::string name;\n    std::size_t size;\n};\n\nclass CFile\n: public AbstractCItem\n{\npublic:\n\n    CItemUPtr findByName(std::string const&amp; name) override\n    {\n        // stuff\n        return {};\n    }\n\n    void setHidden(bool a, bool b) override {}\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1469641222, "post_id": 38619496, "comment_id": 64625274, "body": "What does this have to do with interfaces?"}], "tags": [], "owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "is_accepted": false, "score": 0, "last_activity_date": 1469640124, "creation_date": 1469640124, "answer_id": 38619496, "question_id": 38619028, "link": "https://stackoverflow.com/questions/38619028/is-it-alright-to-put-data-members-in-an-interface/38619496#38619496", "title": "Is it alright to put data members in an interface?", "body": "<p>The design principle for a class should be: <br>\n<em>'It is impossible to break the class invariant from the outside'</em> <br>\nIf the constructor(s) set up the class invariant, and all members <br>\nuphold the class invariant, this is achieved.</p>\n\n<p>However, if the class does not have a class invariant, having <br>\npublic members achieves the same thing.</p>\n\n<pre><code>// in C++, this is a perfectly fine, first order class\nstruct Pos\n{\n    int x,y;\n    Pos&amp; operator+=(const Pos&amp;);\n};\n</code></pre>\n\n<p>also see <a href=\"https://en.wikipedia.org/wiki/Class_invariant\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Class_invariant</a></p>\n"}], "owner": {"reputation": 660, "user_id": 4567934, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/u9d5p.png?s=128&g=1", "display_name": "Stoatman", "link": "https://stackoverflow.com/users/4567934/stoatman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6184, "favorite_count": 1, "accepted_answer_id": 38619398, "answer_count": 3, "score": 4, "last_activity_date": 1469640124, "creation_date": 1469638442, "question_id": 38619028, "link": "https://stackoverflow.com/questions/38619028/is-it-alright-to-put-data-members-in-an-interface", "title": "Is it alright to put data members in an interface?", "body": "<p>Recently, I've learnt about <code>composite pattern</code>. I want to use it in my assignment which I have to implement File and Folder classes. I realize that sub-classes like <code>CFile</code> and <code>Cfolder</code> got to have the same attributes (<code>name</code> and <code>size</code>). So is it alright for me to put the attributes into the <code>interface</code>? As far as I know, it is not good practice to do so. However, I don't understand why I shouldn't. Or is there any other solutions?\n<a href=\"https://i.stack.imgur.com/7Dhpc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Dhpc.png\" alt=\"Class Diagram\"></a></p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "argv", "argc"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1469638175, "post_id": 38618900, "comment_id": 64623504, "body": "What is the command you used to run the program? ie <code>myexe.exe ????</code>"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1469638190, "post_id": 38618900, "comment_id": 64623509, "body": "Pass arguments to get the value of argc greater than 1. How to do it will depend on your shell or IDE that you use to run your program."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 4, "creation_date": 1469638249, "post_id": 38618900, "comment_id": 64623540, "body": "You shouldn&#39;t use <code>msg</code> like this because <code>argv[1]</code> can be used directly and this copying allows buffer overrun."}, {"owner": {"reputation": 35, "user_id": 5048956, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1086550801373799/picture?type=large", "display_name": "Vijay Rana", "link": "https://stackoverflow.com/users/5048956/vijay-rana"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469639149, "post_id": 38618900, "comment_id": 64624066, "body": "@NathanOliver I am trying to run it in eclipse and I set an argument in &#39;Run-configurations&#39; but still it does not detect the file to read."}, {"owner": {"reputation": 35, "user_id": 5048956, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1086550801373799/picture?type=large", "display_name": "Vijay Rana", "link": "https://stackoverflow.com/users/5048956/vijay-rana"}, "edited": false, "score": 0, "creation_date": 1469639152, "post_id": 38618900, "comment_id": 64624070, "body": "@MikeCATI I passed an argument but it still does not detect the text file..and I have changed the msg to argv[1]"}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 0, "creation_date": 1469641202, "post_id": 38618900, "comment_id": 64625264, "body": "Try creating a file in the current directory from your code. Perhaps the IDE is playing with the current directory and your running from a different folder than your text file."}, {"owner": {"reputation": 35, "user_id": 5048956, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1086550801373799/picture?type=large", "display_name": "Vijay Rana", "link": "https://stackoverflow.com/users/5048956/vijay-rana"}, "edited": false, "score": 0, "creation_date": 1469641774, "post_id": 38618900, "comment_id": 64625590, "body": "No I created a file in the same directory where the source code is. I tried creating a file using the code and try reading it, but it didnt work as well. I am confused whether what exactly should be the argument. Should it be just file name  of complete path?"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5048956, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1086550801373799/picture?type=large", "display_name": "Vijay Rana", "link": "https://stackoverflow.com/users/5048956/vijay-rana"}, "edited": false, "score": 0, "creation_date": 1469716689, "post_id": 38619168, "comment_id": 64662119, "body": "I am using eclipse and in the run configurations I have set the working directory to be where my file exists and in arguments I have specified the file name. The output comes out to be the filename which I have specified in the arguments. Is there a specific way to do it in Eclipse?"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1469638986, "creation_date": 1469638986, "answer_id": 38619168, "question_id": 38618900, "link": "https://stackoverflow.com/questions/38618900/using-argv-to-read-a-text-file/38619168#38619168", "title": "Using argv to read a text file", "body": "<blockquote>\n  <p>argc remains 1 only that means the file is not detected</p>\n</blockquote>\n\n<p>If argc is 1, that means no (command line) arguments were given to the program. I suggest that you change the response message to reflect that.</p>\n\n<blockquote>\n  <p>how do I get the value of argc greater than 1</p>\n</blockquote>\n\n<p>You need to pass an argument to the program. On the command line, you do it like this:</p>\n\n<pre><code>&gt; ./program_file_name value_of_first_argument\n</code></pre>\n\n<p>If you launch the program from an IDE, then look up the IDE manual for how to set command line arguments for the launch.</p>\n\n<hr>\n\n<p>Note that if the argument is longer than 256 characters in your program, then your buffer overflows and the behaviour is undefined.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 5048956, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1086550801373799/picture?type=large", "display_name": "Vijay Rana", "link": "https://stackoverflow.com/users/5048956/vijay-rana"}, "edited": false, "score": 0, "creation_date": 1469708127, "post_id": 38624422, "comment_id": 64655119, "body": "I tried out drag and drop but it doesnt seem to work..By FULL PATH do you mean to use it as argument or just the file name as argument?"}, {"owner": {"reputation": 118, "user_id": 5962153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d1d4c3412633b6f7d195a473f807ce6?s=128&d=identicon&r=PG&f=1", "display_name": "user5962153", "link": "https://stackoverflow.com/users/5962153/user5962153"}, "reply_to_user": {"reputation": 35, "user_id": 5048956, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1086550801373799/picture?type=large", "display_name": "Vijay Rana", "link": "https://stackoverflow.com/users/5048956/vijay-rana"}, "edited": false, "score": 0, "creation_date": 1469739399, "post_id": 38624422, "comment_id": 64675808, "body": "if it didn&#39;t work, something goes wrong, i suggest to cout all of the argument :  for(int i=0;i&lt;argc;i++)       cout&lt;&lt;argv[i]&lt;&lt;endl;  did it show full path of the file?"}, {"owner": {"reputation": 118, "user_id": 5962153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d1d4c3412633b6f7d195a473f807ce6?s=128&d=identicon&r=PG&f=1", "display_name": "user5962153", "link": "https://stackoverflow.com/users/5962153/user5962153"}, "reply_to_user": {"reputation": 35, "user_id": 5048956, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1086550801373799/picture?type=large", "display_name": "Vijay Rana", "link": "https://stackoverflow.com/users/5048956/vijay-rana"}, "edited": false, "score": 0, "creation_date": 1469739765, "post_id": 38624422, "comment_id": 64675973, "body": "if your cout show the correct path for your file, but is NULL inf FILE*file, then your file is probably opened by other aplication."}, {"owner": {"reputation": 35, "user_id": 5048956, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1086550801373799/picture?type=large", "display_name": "Vijay Rana", "link": "https://stackoverflow.com/users/5048956/vijay-rana"}, "edited": false, "score": 0, "creation_date": 1469800523, "post_id": 38624422, "comment_id": 64702126, "body": "Actually when I do it using command line I get the desired result(reading the file using argv). i am confused what exactly should I specify in the arguments in Run Configurations in Eclipse. I tried by providing &quot;file.txt&quot; in the argument but I dont get the desired result."}], "tags": [], "owner": {"reputation": 118, "user_id": 5962153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d1d4c3412633b6f7d195a473f807ce6?s=128&d=identicon&r=PG&f=1", "display_name": "user5962153", "link": "https://stackoverflow.com/users/5962153/user5962153"}, "is_accepted": false, "score": 0, "last_activity_date": 1469659608, "creation_date": 1469659608, "answer_id": 38624422, "question_id": 38618900, "link": "https://stackoverflow.com/questions/38618900/using-argv-to-read-a-text-file/38624422#38624422", "title": "Using argv to read a text file", "body": "<p>have you try drag and drop your file to your application? that should give you argv[1], if drag and drop did not work (which it should have worked), then something goes wrong</p>\n\n<p>or try to use FULL PATH, you don't really need to copy argv[1], just use it directly...</p>\n"}], "owner": {"reputation": 35, "user_id": 5048956, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1086550801373799/picture?type=large", "display_name": "Vijay Rana", "link": "https://stackoverflow.com/users/5048956/vijay-rana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1959, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1469659608, "creation_date": 1469638082, "last_edit_date": 1469655033, "question_id": 38618900, "link": "https://stackoverflow.com/questions/38618900/using-argv-to-read-a-text-file", "title": "Using argv to read a text file", "body": "<p>I am trying to read a text file using argv[1]. In my code after building argc remains 1 only that means the file is not detected. Please see my code below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n int main(int argc, char **argv) {\n    char msg[256]={0};\n    if (argc &lt; 2){\n        cout&lt;&lt;\"file not found\";\n    }\n    if(argc &gt; 1){\n        strcpy(msg,argv[1]);\n    }\n     FILE *file;\n     if ((file = fopen(argv[1], \"r\")) == NULL)\n         {\n             printf(\"file doesnt exist\\n\");\n         }\n     fclose(file);\n\n    cout&lt;&lt;argv[1];\n\n}\n</code></pre>\n\n<p>I am not able to figure out how do I get the value of argc greater than 1 and then read the content of the file?</p>\n"}, {"tags": ["c++", "opencv", "transpose"], "answers": [{"tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": false, "score": 1, "last_activity_date": 1469640065, "creation_date": 1469640065, "answer_id": 38619482, "question_id": 38618798, "link": "https://stackoverflow.com/questions/38618798/opencv-transpose-first-time-need-long-time/38619482#38619482", "title": "opencv transpose first time need long time", "body": "<p>I don't have TBB enabled, but the issue seems with the way you're measuring the performance:</p>\n\n<ol>\n<li>don't include the time to create the matrix</li>\n<li>use a matrix large enough. It doesn't make sense to transpose a <code>1x1</code> matrix anyway.</li>\n<li>don't use strings for booleans</li>\n</ol>\n\n<p>You could try something like this, and then please let me know your execution times:</p>\n\n<pre><code>double time_measure(bool start, double ts) {\n    double t = 0.0;\n    if (start) {\n        t = (double)getTickCount();\n    }\n    else {\n        t = ((double)getTickCount() - ts) / getTickFrequency();\n    }\n    return t;\n}\n\nint main()\n{\n    for (int i = 0; i &lt; 10; i++) {\n\n        // 1000 x 1000 random matrix\n        Mat_&lt;uchar&gt; B(1000, 1000);\n        randu(B, 0, 256);\n\n        double ts = time_measure(true, 0);\n        Mat bt = B.t();\n        cout &lt;&lt; \"transpose Times needed : \" &lt;&lt; time_measure(false, ts) * 1000 &lt;&lt; \" ms \" &lt;&lt; endl;\n    }\n\n    getchar();\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1177, "user_id": 1301624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb18f36badd852b20f7e745309b0b65c?s=128&d=identicon&r=PG", "display_name": "cxyzs7", "link": "https://stackoverflow.com/users/1301624/cxyzs7"}, "edited": false, "score": 0, "creation_date": 1469675855, "post_id": 38626278, "comment_id": 64637759, "body": "There is something weird going on, how come the matrix creation takes 40+ ms?"}, {"owner": {"reputation": 31, "user_id": 3875912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4ff2f5d5150fe238e8f95d384a88cea?s=128&d=identicon&r=PG&f=1", "display_name": "\u9673\u6587\u76db", "link": "https://stackoverflow.com/users/3875912/%e9%99%b3%e6%96%87%e7%9b%9b"}, "reply_to_user": {"reputation": 1177, "user_id": 1301624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb18f36badd852b20f7e745309b0b65c?s=128&d=identicon&r=PG", "display_name": "cxyzs7", "link": "https://stackoverflow.com/users/1301624/cxyzs7"}, "edited": false, "score": 0, "creation_date": 1469693226, "post_id": 38626278, "comment_id": 64645067, "body": "the time is most spend on rand function."}, {"owner": {"reputation": 1177, "user_id": 1301624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb18f36badd852b20f7e745309b0b65c?s=128&d=identicon&r=PG", "display_name": "cxyzs7", "link": "https://stackoverflow.com/users/1301624/cxyzs7"}, "edited": false, "score": 0, "creation_date": 1469724147, "post_id": 38626278, "comment_id": 64667520, "body": "Don&#39;t think so, I tried on my computer, both creation and transpose takes ~1.2 ms"}, {"owner": {"reputation": 31, "user_id": 3875912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4ff2f5d5150fe238e8f95d384a88cea?s=128&d=identicon&r=PG&f=1", "display_name": "\u9673\u6587\u76db", "link": "https://stackoverflow.com/users/3875912/%e9%99%b3%e6%96%87%e7%9b%9b"}, "reply_to_user": {"reputation": 1177, "user_id": 1301624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb18f36badd852b20f7e745309b0b65c?s=128&d=identicon&r=PG", "display_name": "cxyzs7", "link": "https://stackoverflow.com/users/1301624/cxyzs7"}, "edited": false, "score": 0, "creation_date": 1469776672, "post_id": 38626278, "comment_id": 64687129, "body": "thanks, but I still don&#39;t understand what happen in my enviroment"}, {"owner": {"reputation": 31, "user_id": 3875912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4ff2f5d5150fe238e8f95d384a88cea?s=128&d=identicon&r=PG&f=1", "display_name": "\u9673\u6587\u76db", "link": "https://stackoverflow.com/users/3875912/%e9%99%b3%e6%96%87%e7%9b%9b"}, "reply_to_user": {"reputation": 1177, "user_id": 1301624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb18f36badd852b20f7e745309b0b65c?s=128&d=identicon&r=PG", "display_name": "cxyzs7", "link": "https://stackoverflow.com/users/1301624/cxyzs7"}, "edited": false, "score": 0, "creation_date": 1469784459, "post_id": 38626278, "comment_id": 64691737, "body": "I have tried the prebuild opencv and the first transpose is ok, but I build it by myself the first transpose takes long time. And in my environment the randu need about 50ms in all build."}, {"owner": {"reputation": 31, "user_id": 3875912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4ff2f5d5150fe238e8f95d384a88cea?s=128&d=identicon&r=PG&f=1", "display_name": "\u9673\u6587\u76db", "link": "https://stackoverflow.com/users/3875912/%e9%99%b3%e6%96%87%e7%9b%9b"}, "reply_to_user": {"reputation": 1177, "user_id": 1301624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb18f36badd852b20f7e745309b0b65c?s=128&d=identicon&r=PG", "display_name": "cxyzs7", "link": "https://stackoverflow.com/users/1301624/cxyzs7"}, "edited": false, "score": 0, "creation_date": 1469786314, "post_id": 38626278, "comment_id": 64692947, "body": "I think it is the matter of build parameter, and where can i find opencv prebuild parameter??"}, {"owner": {"reputation": 1177, "user_id": 1301624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb18f36badd852b20f7e745309b0b65c?s=128&d=identicon&r=PG", "display_name": "cxyzs7", "link": "https://stackoverflow.com/users/1301624/cxyzs7"}, "edited": false, "score": 0, "creation_date": 1469807605, "post_id": 38626278, "comment_id": 64706746, "body": "I assume everything is in release configuration?"}], "tags": [], "owner": {"reputation": 31, "user_id": 3875912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4ff2f5d5150fe238e8f95d384a88cea?s=128&d=identicon&r=PG&f=1", "display_name": "\u9673\u6587\u76db", "link": "https://stackoverflow.com/users/3875912/%e9%99%b3%e6%96%87%e7%9b%9b"}, "is_accepted": false, "score": 0, "last_activity_date": 1469673813, "creation_date": 1469673813, "answer_id": 38626278, "question_id": 38618798, "link": "https://stackoverflow.com/questions/38618798/opencv-transpose-first-time-need-long-time/38626278#38626278", "title": "opencv transpose first time need long time", "body": "<p>Thanks for your comment. I had try your code and the matrix creation time is fixed and the first transpose time also take the much time than the other transpose. the following is the test result. I modify the code to print the matrix creation time and tranpose time.</p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[]) {\n    for (int i = 0; i &lt; 10; i++) {\n        double ts = time_measure(true, 0);\n        // 1000 x 1000 random matrix\n        Mat_&lt;uchar&gt; B(1000, 1000);\n        randu(B, 0, 256);\n        cout &lt;&lt; \"create matrix Times needed : \" &lt;&lt; time_measure(false, ts) * 1000 &lt;&lt; \" ms \" &lt;&lt; endl;\n\n        ts = time_measure(true, 0);\n        Mat bt = B.t();\n        cout &lt;&lt; \"transpose Times needed : \" &lt;&lt; time_measure(false, ts) * 1000 &lt;&lt; \" ms \" &lt;&lt; endl;\n    }\n}\n\ndouble time_measure(bool start, double ts) {\ndouble t = 0.0;\nif (start) {\n    t = (double)getTickCount();\n}\nelse {\n    t = ((double)getTickCount() - ts) / getTickFrequency();\n}\nreturn t;\n}\n</code></pre>\n\n<p>the ouput is list following: </p>\n\n<pre><code>create matrix Times needed : 49.3267 ms\ntranspose Times needed : 427.299 ms\ncreate matrix Times needed : 51.8431 ms\ntranspose Times needed : 0.889971 ms\ncreate matrix Times needed : 51.8084 ms\ntranspose Times needed : 0.718917 ms\ncreate matrix Times needed : 52.4946 ms\ntranspose Times needed : 0.742376 ms\ncreate matrix Times needed : 45.5454 ms\ntranspose Times needed : 0.705721 ms\ncreate matrix Times needed : 45.218 ms\ntranspose Times needed : 0.70621 ms\ncreate matrix Times needed : 44.5748 ms\ntranspose Times needed : 0.713541 ms\ncreate matrix Times needed : 46.2501 ms\ntranspose Times needed : 0.68715 ms\ncreate matrix Times needed : 45.153 ms\ntranspose Times needed : 0.663691 ms\ncreate matrix Times needed : 44.1892 ms\ntranspose Times needed : 0.584028 ms \n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 3875912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4ff2f5d5150fe238e8f95d384a88cea?s=128&d=identicon&r=PG&f=1", "display_name": "\u9673\u6587\u76db", "link": "https://stackoverflow.com/users/3875912/%e9%99%b3%e6%96%87%e7%9b%9b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1469673813, "creation_date": 1469637754, "question_id": 38618798, "link": "https://stackoverflow.com/questions/38618798/opencv-transpose-first-time-need-long-time", "title": "opencv transpose first time need long time", "body": "<p>I use opencv 3.1 and enable intel TBB in windows 10 with visual studio 2015 update 3. The first transpose time need 100 ms and the other transpose just need 0.02-0.05 ms. Any know why the first transpose need so much time for 1*1 matrix.</p>\n\n<pre><code>double ts = time_measure(\"start\", 0);\nMat_&lt;uchar&gt; A = (Mat_&lt;uchar&gt;(1, 1) &lt;&lt; 1);\nMat at = A.t();\ncout &lt;&lt; \"transpose Times needed : \" &lt;&lt; time_measure(\"end\", ts) * 1000 &lt;&lt; \" ms \" &lt;&lt; endl;\n\nfor (int i = 0; i &lt; 10; i++) {\n    ts = time_measure(\"start\", 0);\n    Mat_&lt;uchar&gt; B = (Mat_&lt;uchar&gt;(1, 1) &lt;&lt; 1);\n    Mat bt = B.t();\n    cout &lt;&lt; \"transpose Times needed : \" &lt;&lt; time_measure(\"end\", ts) * 1000 &lt;&lt; \" ms \" &lt;&lt; endl;\n}\n\n\ndouble time_measure(const string mode, double ts) {\n    double t = 0.0;\n    if (mode == \"start\") {\n       t = (double)getTickCount();\n    }\n    else {\n       t = ((double)getTickCount() - ts) / getTickFrequency();\n    }\n    return t;\n}\n\nThe output\n\ntranspose A Times needed : 112.062 mstranspose B Times needed : 0.0337221 ms\ntranspose B Times needed : 0.0205265 ms\ntranspose B Times needed : 0.0195491 ms\ntranspose B Times needed : 0.0283461 ms\ntranspose B Times needed : 0.0234589 ms\ntranspose B Times needed : 0.0298123 ms\ntranspose B Times needed : 0.0249251 ms\ntranspose B Times needed : 0.0283461 ms\ntranspose B Times needed : 0.0273687 ms\ntranspose B Times needed : 0.02688 ms\n</code></pre>\n"}, {"tags": ["c++", "opencv", "computer-vision"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1469637747, "post_id": 38618770, "comment_id": 64623276, "body": "you&#39;re not printing spaces between your values..."}, {"owner": {"reputation": 2523, "user_id": 2061989, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/IZkqN.jpg?s=128&g=1", "display_name": "Caspar Wylie", "link": "https://stackoverflow.com/users/2061989/caspar-wylie"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1469637876, "post_id": 38618770, "comment_id": 64623337, "body": "my problem has nothing to do with the spaces, data structure. one is an array one is a int output...i mean the ORDER. you will notice the order is still different, original starts &quot;0,0,255&quot; and loop starts &quot;255,255,255&quot;"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1469637935, "post_id": 38618770, "comment_id": 64623372, "body": "so it is. Would you provide an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>?"}, {"owner": {"reputation": 2523, "user_id": 2061989, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/IZkqN.jpg?s=128&g=1", "display_name": "Caspar Wylie", "link": "https://stackoverflow.com/users/2061989/caspar-wylie"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1469638103, "post_id": 38618770, "comment_id": 64623452, "body": "How shall I make it more simple? I have a basic, single channel matrix. Once I loop through it, it comes out different. How would you loop through it? I must be doing something wrong. Huge thanks."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1469638144, "post_id": 38618770, "comment_id": 64623483, "body": "Which word is tripping you up? Minimal, Complete, or Verifiable?"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1469638219, "post_id": 38618770, "comment_id": 64623520, "body": "Don&#39;t just use <code>cv::Vec3b</code> because it seems correct. What&#39;s <code>Matrix</code>&#39;s type?"}, {"owner": {"reputation": 2523, "user_id": 2061989, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/IZkqN.jpg?s=128&g=1", "display_name": "Caspar Wylie", "link": "https://stackoverflow.com/users/2061989/caspar-wylie"}, "edited": false, "score": 0, "creation_date": 1469638251, "post_id": 38618770, "comment_id": 64623542, "body": "Do you mind telling me how you would want my question improved instead of stating three words which I believe my question already meets - what is confusing you? cheers"}, {"owner": {"reputation": 2523, "user_id": 2061989, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/IZkqN.jpg?s=128&g=1", "display_name": "Caspar Wylie", "link": "https://stackoverflow.com/users/2061989/caspar-wylie"}, "edited": false, "score": 0, "creation_date": 1469638288, "post_id": 38618770, "comment_id": 64623563, "body": "the type is CV_8UC1 - hence why I know uchar should be what i use...hwover the output is extremely odd (/377/3777)."}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1469638325, "post_id": 38618770, "comment_id": 64623577, "body": "In that case you need <code>unsigned char</code> and not <code>cv::Vec3b</code>"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1469638331, "post_id": 38618770, "comment_id": 64623584, "body": "Can we have a complete program of minimal size which compiles and verifiably demonstrates this behavior?"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1469638341, "post_id": 38618770, "comment_id": 64623593, "body": "Well your post is <i>minimal</i> but not complete or verifiable. Or do you expect us to implement <code>main</code>, initializing the matrix, then run it through the couple of lines of code you supplied?"}, {"owner": {"reputation": 2523, "user_id": 2061989, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/IZkqN.jpg?s=128&g=1", "display_name": "Caspar Wylie", "link": "https://stackoverflow.com/users/2061989/caspar-wylie"}, "edited": false, "score": 0, "creation_date": 1469638376, "post_id": 38618770, "comment_id": 64623603, "body": "Okay. Give me a sec. cheers"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1469638381, "post_id": 38618770, "comment_id": 64623606, "body": "We need to see how you initiate <code>Matrix</code>&#39;s values"}, {"owner": {"reputation": 2523, "user_id": 2061989, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/IZkqN.jpg?s=128&g=1", "display_name": "Caspar Wylie", "link": "https://stackoverflow.com/users/2061989/caspar-wylie"}, "edited": false, "score": 0, "creation_date": 1469638902, "post_id": 38618770, "comment_id": 64623944, "body": "ok. updated. check it out. cheers"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1469639640, "post_id": 38618770, "comment_id": 64624359, "body": "change <code>int color = smaller.at&lt;Vec3b&gt;(x,1)[0];</code> to <code>int color = smaller.at&lt;unsigned char&gt;(0,x);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": true, "score": 2, "last_activity_date": 1469640863, "creation_date": 1469640863, "answer_id": 38619707, "question_id": 38618770, "link": "https://stackoverflow.com/questions/38618770/how-do-i-loop-through-matrix-data-how-it-appears/38619707#38619707", "title": "How do I loop through Matrix data how it appears?", "body": "<p>You're reading garbage.</p>\n\n<ul>\n<li><p>The <code>at</code> function needs <code>(row, col)</code>, and not <code>(x, y)</code>. Remember that <code>row = y</code>, and <code>col = x</code>.</p></li>\n<li><p>If your matrix is just a single row, the row index must be <code>0</code>, not <code>1</code>.</p></li>\n<li><p>Your matrix is a single channel of unsigned char, so you need to use <code>at&lt;uchar&gt;</code></p></li>\n</ul>\n\n<p>In practice, use:</p>\n\n<pre><code>uchar color = smaller.at&lt;uchar&gt;(0, x);\ncout &lt;&lt; int(color);\n</code></pre>\n\n<p>or using indices:</p>\n\n<pre><code>uchar color = smaller.at&lt;uchar&gt;(x);\n</code></pre>\n"}], "owner": {"reputation": 2523, "user_id": 2061989, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/IZkqN.jpg?s=128&g=1", "display_name": "Caspar Wylie", "link": "https://stackoverflow.com/users/2061989/caspar-wylie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 38619707, "answer_count": 1, "score": -3, "last_activity_date": 1474378425, "creation_date": 1469637663, "last_edit_date": 1474378425, "question_id": 38618770, "link": "https://stackoverflow.com/questions/38618770/how-do-i-loop-through-matrix-data-how-it-appears", "title": "How do I loop through Matrix data how it appears?", "body": "<p><strong>Situation</strong></p>\n\n<p>I have a matrix which is 300 columns and 1 row. When I <code>cout &lt;&lt;</code> it, I get:</p>\n\n<pre><code>[  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0]\n</code></pre>\n\n<p>...which is of the form I expect/want.</p>\n\n<p><strong>Problem</strong></p>\n\n<p>However, when I loop through it, I want to get each single value each iteration. However, instead I get a slightly different order (sometimes it is quite similar, though).</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>#include \"opencv2/highgui/highgui.hpp\"\n#include \"opencv2/core/core.hpp\"\n#include \"opencv2/imgproc/imgproc.hpp\"\n#include \"opencv2/imgcodecs/imgcodecs.hpp\"\n\nusing namespace std;\nusing namespace cv;\n\nint main(){\n\n\n  Mat test(1,300,CV_8UC1, 255);\n    cout &lt;&lt; test;\n\n    Mat frame, grayFrame,threshFrame,smaller;\n\n    VideoCapture cap(0);\n\n    while(true){\n        cap.read(frame);\n        cvtColor(frame, grayFrame, cv::COLOR_RGB2GRAY);\n        threshold(grayFrame, threshFrame, 160, 255, THRESH_BINARY);\n        smaller = threshFrame(Rect(0,0,300,1));\n        cout &lt;&lt; smaller;\n\n        for(int x=0;x&lt;smaller.cols;x++){\n            int color = smaller.at&lt;Vec3b&gt;(x,1)[0];\n            cout &lt;&lt; color;\n\n        }\n\n        break;        \n    }\n\n}\n</code></pre>\n\n<p>... And the weird output that does not follow the exact same order of 0s and 255s as the original Matrix:</p>\n\n<pre><code>00000000000000000000000000000000000000000000000000000000000000000000000000000000000002552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552552550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\n</code></pre>\n\n<p>The matrix has many 0s at first, and few 255s, where as the loop output has many 255s, and not so much beginning 0s. </p>\n\n<p>Essentially, I want to loop through the matrix first shown, and for each iteration, get each value. So 0,0,255,255... etc.</p>\n"}, {"tags": ["c++", "c", "winapi", "sendmessage", "createwindow"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469637672, "post_id": 38618726, "comment_id": 64623233, "body": "I am not sure if you have xaml in c++. But in Wpf C# I would put a StackPanel inside my Button using the xaml. Then inside the StackPanel I would put both Text control and Image control andthen play with their visibility On/Off from code behin."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1469637825, "post_id": 38618726, "comment_id": 64623317, "body": "Probably need to remove the <code>BS_BITMAP</code> style from the window."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469641928, "post_id": 38618726, "comment_id": 64625663, "body": "@firststep this is not wpf"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469643484, "post_id": 38618726, "comment_id": 64626565, "body": "@FirstStep: The Windows API is not the Windows Runtime is not .NET. But sure, you can access Direct2D from C++. Not that it&#39;s going to be helpful in solving this issue, but it&#39;s possible. And yes, you can use XAML in a C++ WinRT application. But that&#39;s a different XAML from WPF or Silverlight. Anyway, all of this is completely unrelated."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469643663, "post_id": 38618726, "comment_id": 64626656, "body": "Well I thought to give an idea of possibly doing this my way (To put both of them at the same time, and control their visibility). And I mentioned xaml because (I think) it is easier to see/understand the idea using xaml (wpf). Well thank you for informing me then I just wanted to help and now I learned something new :) @IInspectable"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1469643679, "post_id": 38618726, "comment_id": 64626666, "body": "@DavidHeffernan Thank you for pointing this out. I did not say it is a wpf."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1469643705, "post_id": 38618726, "comment_id": 64626679, "body": "That code is so wrong, it boggles the mind. You cannot create a <code>WS_CHILD</code> window, and then pass <code>NULL</code> as the parent. And its totally unclear, why you call <code>ShowWindow</code> and <code>UpdateWindow</code> every time you handle a message. Since you don&#39;t seem to know what you are doing, consider getting a book. Petzold&#39;s <a href=\"https://rads.stackoverflow.com/amzn/click/com/157231995X\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Programming Windows&#174;</a> is fine."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469646177, "post_id": 38618726, "comment_id": 64628129, "body": "@firststep so why are you talking about WPF and XAML then?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6644181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066d7a811045d6c97565b7448ab3d536?s=128&d=identicon&r=PG&f=1", "display_name": "test test", "link": "https://stackoverflow.com/users/6644181/test-test"}, "edited": false, "score": 0, "creation_date": 1469671344, "post_id": 38619451, "comment_id": 64636898, "body": "I can add the bitmap image to the button but I also want to see the text on the image button"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 1, "user_id": 6644181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066d7a811045d6c97565b7448ab3d536?s=128&d=identicon&r=PG&f=1", "display_name": "test test", "link": "https://stackoverflow.com/users/6644181/test-test"}, "edited": false, "score": 0, "creation_date": 1469677355, "post_id": 38619451, "comment_id": 64638095, "body": "Remove <code>BS_BITMAP</code> from button style. Only use <code>SendMessage(... BM_SETIMAGE ...)</code> to assign the bitmap. Your code has more serious problems which I didn&#39;t notice before. See comments earlier about reading a tutorial on Windows programming."}, {"owner": {"reputation": 1, "user_id": 6644181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066d7a811045d6c97565b7448ab3d536?s=128&d=identicon&r=PG&f=1", "display_name": "test test", "link": "https://stackoverflow.com/users/6644181/test-test"}, "edited": false, "score": 0, "creation_date": 1469681651, "post_id": 38619451, "comment_id": 64639238, "body": "I am so sorry, I removed BS_BITMAP after that It is removing the image from the button and adding text. but I need both image and text. However I just started learning the code from given books"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 1, "user_id": 6644181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066d7a811045d6c97565b7448ab3d536?s=128&d=identicon&r=PG&f=1", "display_name": "test test", "link": "https://stackoverflow.com/users/6644181/test-test"}, "edited": false, "score": 0, "creation_date": 1469682088, "post_id": 38619451, "comment_id": 64639344, "body": "Call <code>SendMessage(... BM_SETIMAGE ...)</code> to assign the bitmap. The button will show both bitmap and text (text will be to the right of bitmap). See the &quot;Remarks&quot; section in official <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb761822(v=vs.85).aspx\" rel=\"nofollow noreferrer\">documentation</a> But first you have to create a window, then create a button inside the window."}, {"owner": {"reputation": 1, "user_id": 6644181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066d7a811045d6c97565b7448ab3d536?s=128&d=identicon&r=PG&f=1", "display_name": "test test", "link": "https://stackoverflow.com/users/6644181/test-test"}, "edited": false, "score": 0, "creation_date": 1469684360, "post_id": 38619451, "comment_id": 64640161, "body": "Seems that I cant make it work, Need to learn from the scratch just for this  basic GUI code. I am afraid that I wont be submit my secure source code analyzer to the management. I am basically security tester and i develop background automation security scripts"}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": false, "score": 0, "last_activity_date": 1469640705, "last_edit_date": 1469640705, "creation_date": 1469639988, "answer_id": 38619451, "question_id": 38618726, "link": "https://stackoverflow.com/questions/38618726/sending-text-to-button-after-adding-image-c/38619451#38619451", "title": "Sending text to button after adding image c++", "body": "<p>You do realize you have to create a window and then put the button inside the window?</p>\n\n<p>Chances are the program is looking for a file in the wrong directory. Use full path names and do error checking to make sure the bitmap is loaded. Example:</p>\n\n<pre><code>HANDLE hImg = LoadImageW(NULL, L\"c:\\\\fullpath\\\\Untitled.bmp\", IMAGE_BITMAP, 0, 0, \nLR_DEFAULTCOLOR | LR_DEFAULTSIZE | LR_LOADFROMFILE);\n\nif (!hImg)\n    report error...\n</code></pre>\n\n<p>Don't put <code>ShowWindow</code> and <code>UpdateWindow</code> in the message loop. Just show the window and then call the message loop. Example:</p>\n\n<pre><code>ShowWindow(hWnd, SW_SHOW);\nUpdateWindow(hWnd);\n\nwhile (GetMessage(&amp;msg, NULL, 0, 0))\n{\n    TranslateMessage(&amp;msg);\n    DispatchMessage(&amp;msg);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6644181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066d7a811045d6c97565b7448ab3d536?s=128&d=identicon&r=PG&f=1", "display_name": "test test", "link": "https://stackoverflow.com/users/6644181/test-test"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 752, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1469640705, "creation_date": 1469637514, "last_edit_date": 1469640102, "question_id": 38618726, "link": "https://stackoverflow.com/questions/38618726/sending-text-to-button-after-adding-image-c", "title": "Sending text to button after adding image c++", "body": "<p>I am able to add image to the button as background but later I want to add text to the button as \"Weclome\", I tried all possible ways using Settext, SendmessageA.\nplease help</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n\nint main()\n{\n    MSG msg;\n    HWND hWnd = CreateWindow(TEXT(\"button\"), TEXT(\"START\"), WS_VISIBLE | WS_POPUP | WS_CHILD | WS_TABSTOP | BS_BITMAP,\n        250, 250, 500, 500, NULL, NULL, NULL, NULL);\n    HANDLE hImg = LoadImageW(NULL, L\"Untitled.bmp\", IMAGE_BITMAP, 0, 0, LR_DEFAULTCOLOR | LR_DEFAULTSIZE | LR_LOADFROMFILE);\n    SendMessageW(hWnd, BM_SETIMAGE, IMAGE_BITMAP, (LPARAM)hImg);\n\n    SendMessageA(hWnd, WM_SETTEXT, 0, (LPARAM)\"Welcome\");\n    //SendMessageW(hWnd, WM_SETTEXT, (WPARAM) 256,NULL);\n\n\n    while (GetMessage(&amp;msg, NULL, 0, 0))\n    {\n        ShowWindow(hWnd, SW_SHOW);\n        UpdateWindow(hWnd);\n        TranslateMessage(&amp;msg);\n        DispatchMessage(&amp;msg);\n    }\n    return (int)msg.wParam;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "bytearray", "directx-11"], "comments": [{"owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "edited": false, "score": 0, "creation_date": 1469638033, "post_id": 38618721, "comment_id": 64623419, "body": "After <code>Unmap</code> you don&#39;t release <code>context</code>. If you are not confident what to do with interface pointers and their refcount management, you should rather be using template wrapper classes that do management for you."}, {"owner": {"reputation": 1, "user_id": 6129837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daa8c626df63d23eef4e99861d2190e4?s=128&d=identicon&r=PG&f=1", "display_name": "Harvey3141", "link": "https://stackoverflow.com/users/6129837/harvey3141"}, "reply_to_user": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "edited": false, "score": 0, "creation_date": 1469792655, "post_id": 38618721, "comment_id": 64696856, "body": "Thanks, this pointed me in the right direction. I needed to delete my byte arrays and also release the texture."}], "answers": [{"comments": [{"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1469653047, "post_id": 38618866, "comment_id": 64631666, "body": "<code>std::unique_ptr&lt;uint8_t[]&gt;</code> (see <a href=\"https://msdn.microsoft.com/en-us/library/hh279674.aspx\" rel=\"nofollow noreferrer\">Smart Pointers (Modern C++)</a>) and <a href=\"https://github.com/Microsoft/DirectXTK/wiki/ComPtr\" rel=\"nofollow noreferrer\">Microsoft::WRL::ComPtr</a> is your friend."}], "tags": [], "owner": {"reputation": 26, "user_id": 3639963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1118184c3f41f559e51bcfce7207eedc?s=128&d=identicon&r=PG&f=1", "display_name": "user3639963", "link": "https://stackoverflow.com/users/3639963/user3639963"}, "is_accepted": false, "score": 1, "last_activity_date": 1469637974, "creation_date": 1469637974, "answer_id": 38618866, "question_id": 38618721, "link": "https://stackoverflow.com/questions/38618721/copying-a-id3d11texture2d-to-a-byte-array-causing-out-of-memory-error-c/38618866#38618866", "title": "Copying a ID3D11Texture2D to a byte array, causing out of memory error c++", "body": "<p>Where do you delete <code>dest*</code> or in the case after being returned <code>p_frame*</code>? You are allocating data using new and returning this pointer, if you don't delete this you will eventually run out of memory, especially if you're calling this every frame.</p>\n\n<p>You should also consider some form of memory management and define ownership of what's being allocated, passing back raw pointers is a prime suspect for memory leaks. </p>\n"}], "owner": {"reputation": 1, "user_id": 6129837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daa8c626df63d23eef4e99861d2190e4?s=128&d=identicon&r=PG&f=1", "display_name": "Harvey3141", "link": "https://stackoverflow.com/users/6129837/harvey3141"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 813, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469637974, "creation_date": 1469637492, "question_id": 38618721, "link": "https://stackoverflow.com/questions/38618721/copying-a-id3d11texture2d-to-a-byte-array-causing-out-of-memory-error-c", "title": "Copying a ID3D11Texture2D to a byte array, causing out of memory error c++", "body": "<p>Copying a ID3D11Texture2D to a byte array is causing out of memory error c++</p>\n\n<p>The copy is happening every frame and it runs for around 5 seconds until I get the memory error, which is happening on <b>either</b></p>\n\n<pre><code>    HRESULT hr = device-&gt;CreateTexture2D(&amp;description, NULL, &amp;texTemp);\n</code></pre>\n\n<p>Result in GetImageData returning NULL </p>\n\n<p><b>OR</b> </p>\n\n<p>when a new byte array is created at</p>\n\n<pre><code>    BYTE* dest = new BYTE[(*nWidth)*(*nHeight) * 4]; \n</code></pre>\n\n<p>Giving,</p>\n\n<p><i>Unhandled exception at 0x76414DBD in NDIlib_Send_Video.x86.exe: Microsoft C++ exception: std::bad_alloc at memory location 0x0107F5D8</i></p>\n\n<p>I'm not sure which memory I should be releasing, probably the byte arrays.., I've tried this using delete[] aByteArray, but this causes a crash. </p>\n\n<p>Here's my function for doing the copy,</p>\n\n<pre><code>BYTE* GetImageData(ID3D11Device* device, ID3D11DeviceContext* context, ID3D11Texture2D* texture, /*OUT*/ int* nWidth, /*OUT*/ int*  nHeight) {\n    if (texture) {\n        D3D11_TEXTURE2D_DESC description;\n        texture-&gt;GetDesc(&amp;description);\n        description.BindFlags = 0;\n        description.CPUAccessFlags = D3D11_CPU_ACCESS_READ |     D3D11_CPU_ACCESS_WRITE;\n        description.Usage = D3D11_USAGE_STAGING;\n\n        ID3D11Texture2D* texTemp = NULL;\n\n        HRESULT hr = device-&gt;CreateTexture2D(&amp;description, NULL, &amp;texTemp);\n        if (FAILED(hr))\n        {\n            if (hr == E_OUTOFMEMORY) {\n                printf(\"GetImageData - CreateTexture2D - OUT OF MEMORY \\n\");\n            }\n            if (texTemp)\n            {\n                texTemp-&gt;Release();\n                texTemp = NULL;\n            }\n            return NULL;\n        }\n        context-&gt;CopyResource(texTemp, texture);\n\n        D3D11_MAPPED_SUBRESOURCE  mapped;\n        unsigned int subresource = 0;\n        hr = context-&gt;Map(texTemp, 0, D3D11_MAP_READ, 0, &amp;mapped);\n        if (FAILED(hr))\n        {\n            printf(\"GetImageData - Map - FAILED \\n\");\n            texTemp-&gt;Release();\n            texTemp = NULL;\n            return NULL;\n        }\n\n        *nWidth = description.Width;\n        *nHeight = description.Height;\n        const int pitch = mapped.RowPitch;\n        BYTE* source = (BYTE*)(mapped.pData);\n        BYTE* dest = new BYTE[(*nWidth)*(*nHeight) * 4];\n        BYTE* destTemp = dest;\n        for (int i = 0; i &lt; *nHeight; ++i)\n        {\n            memcpy(destTemp, source, *nWidth * 4);\n            source += pitch;\n            destTemp += *nWidth * 4;\n        }\n        context-&gt;Unmap(texTemp, 0);\n        return dest;        \n    }\n    else {\n        printf(\"GetImageData - texture null - FAILED \\n\");\n        return NULL;\n    }\n\n}\n</code></pre>\n\n<p>And here's how I'm using GetImageData from my main function</p>\n\n<pre><code>        BYTE* p_frame = (BYTE*)GetImageData(g_d3dDevice, g_d3dDeviceContext, g_pDeskTexture, &amp;w, &amp;h);\n\n        if (p_frame == NULL) printf(\"GetImageData - Returned NULL \\n\");\n        else {\n            printf(\"GetImageData - OK \\n\");\n        }\n</code></pre>\n"}, {"tags": ["c++", "double", "division"], "comments": [{"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1469636670, "post_id": 38618428, "comment_id": 64622696, "body": "Given you have <code>Conc = H2S_Conc&#47;100;</code> in <code>H2S_Concentration</code> and set <code>HS2_Conc</code> <i>after</i> you call the <code>H2S_Concentration</code> function this is likely.  Did you mean to use <code>cin</code> on different variables?"}, {"owner": {"reputation": 121, "user_id": 6521403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9f38a9fe5d185054fea09f064a91f5?s=128&d=identicon&r=PG&f=1", "display_name": "Iverelo", "link": "https://stackoverflow.com/users/6521403/iverelo"}, "edited": false, "score": 1, "creation_date": 1469636697, "post_id": 38618428, "comment_id": 64622714, "body": "You call H2S_Concentration before assigning H2S_Conc so technically it is undefined behavior."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 121, "user_id": 6521403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9f38a9fe5d185054fea09f064a91f5?s=128&d=identicon&r=PG&f=1", "display_name": "Iverelo", "link": "https://stackoverflow.com/users/6521403/iverelo"}, "edited": false, "score": 3, "creation_date": 1469636769, "post_id": 38618428, "comment_id": 64622745, "body": "@Iverelo  OP uses global vars so no UB"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 1, "creation_date": 1469636954, "post_id": 38618428, "comment_id": 64622861, "body": "It should not return <code>0</code> (it is a void but a global variable). The problem is somewhere else."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469637004, "post_id": 38618428, "comment_id": 64622898, "body": "@FirstStep it should"}, {"owner": {"reputation": 13, "user_id": 6645778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd94674dab7abc3241d12bc9b439dc46?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Hibbert", "link": "https://stackoverflow.com/users/6645778/tony-hibbert"}, "edited": false, "score": 0, "creation_date": 1469637009, "post_id": 38618428, "comment_id": 64622902, "body": "ah so I should call the function after the cin line? I will try now"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469637135, "post_id": 38618428, "comment_id": 64622974, "body": "@Tony it is taking the zero initialization value. And not your desired value. Make sure to assign your desired value to it before calling your function."}, {"owner": {"reputation": 13, "user_id": 6645778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd94674dab7abc3241d12bc9b439dc46?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Hibbert", "link": "https://stackoverflow.com/users/6645778/tony-hibbert"}, "edited": false, "score": 0, "creation_date": 1469637198, "post_id": 38618428, "comment_id": 64623009, "body": "So, I called the H2S_Concentration() after the last line in my code, but it still returned the same 0"}, {"owner": {"reputation": 13, "user_id": 6645778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd94674dab7abc3241d12bc9b439dc46?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Hibbert", "link": "https://stackoverflow.com/users/6645778/tony-hibbert"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469637247, "post_id": 38618428, "comment_id": 64623031, "body": "@FirstStep just seen this, do you mean where I declare it as a double, I must give it a value, say 0?"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469637274, "post_id": 38618428, "comment_id": 64623045, "body": "Did you see the answer on your question? by @User1234"}, {"owner": {"reputation": 13, "user_id": 6645778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd94674dab7abc3241d12bc9b439dc46?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Hibbert", "link": "https://stackoverflow.com/users/6645778/tony-hibbert"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469637762, "post_id": 38618428, "comment_id": 64623282, "body": "@FirstStep yes thanks!"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1469643581, "post_id": 38618428, "comment_id": 64626622, "body": "<code>Mass = ((2*mass_H)+(mass_S));</code> -- none of those parentheses is needed."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6645778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd94674dab7abc3241d12bc9b439dc46?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Hibbert", "link": "https://stackoverflow.com/users/6645778/tony-hibbert"}, "edited": false, "score": 0, "creation_date": 1469637423, "post_id": 38618591, "comment_id": 64623117, "body": "Thank you! this worked!! Was it because, my function H2S_conc() was before the variable H2S_Conc was declared?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1469637441, "post_id": 38618591, "comment_id": 64623123, "body": "Small nitpick: Shouldn&#39;t these be <code>const double</code> variables and initialized at declaration?"}, {"owner": {"reputation": 13, "user_id": 6645778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd94674dab7abc3241d12bc9b439dc46?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Hibbert", "link": "https://stackoverflow.com/users/6645778/tony-hibbert"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1469637577, "post_id": 38618591, "comment_id": 64623187, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 i don&#39;t know, could it?"}, {"owner": {"reputation": 1331, "user_id": 4570744, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/28031d21c39f36a728c78cf68b5eac2a?s=128&d=identicon&r=PG&f=1", "display_name": "User1234", "link": "https://stackoverflow.com/users/4570744/user1234"}, "reply_to_user": {"reputation": 13, "user_id": 6645778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd94674dab7abc3241d12bc9b439dc46?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Hibbert", "link": "https://stackoverflow.com/users/6645778/tony-hibbert"}, "edited": false, "score": 0, "creation_date": 1469637920, "post_id": 38618591, "comment_id": 64623363, "body": "@TonyHibbert It was simply because  <code>H2S_Concentration()</code> call was before <code>H2S_Conc = 292</code>"}], "tags": [], "owner": {"reputation": 1331, "user_id": 4570744, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/28031d21c39f36a728c78cf68b5eac2a?s=128&d=identicon&r=PG&f=1", "display_name": "User1234", "link": "https://stackoverflow.com/users/4570744/user1234"}, "is_accepted": false, "score": 3, "last_activity_date": 1469637068, "creation_date": 1469637068, "answer_id": 38618591, "question_id": 38618428, "link": "https://stackoverflow.com/questions/38618428/dividing-two-double-numbers-in-c/38618591#38618591", "title": "Dividing two double numbers in C++", "body": "<p>Call <code>H2S_Concentration()</code> after these 2 lines :-</p>\n\n<pre><code>S_Space = 22.41;  //Nm^3/kmol\nH2S_Conc = 292; // ppm v/v\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1469637557, "post_id": 38618700, "comment_id": 64623177, "body": "Shouldn&#39;t these be <code>const</code> actually?"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1469637769, "post_id": 38618700, "comment_id": 64623289, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I think you are right. I will edit my answer. But I would keep the design for the OP."}, {"owner": {"reputation": 669, "user_id": 2581119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbdbeb2cb8aa3c89132fe48d744c91d4?s=128&d=identicon&r=PG", "display_name": "Lehu", "link": "https://stackoverflow.com/users/2581119/lehu"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1469641514, "post_id": 38618700, "comment_id": 64625452, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Wouldn&#39;t it be even better to make them <code>constexpr</code>?"}], "tags": [], "owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "is_accepted": true, "score": 2, "last_activity_date": 1469638207, "last_edit_date": 1495540289, "creation_date": 1469637428, "answer_id": 38618700, "question_id": 38618428, "link": "https://stackoverflow.com/questions/38618428/dividing-two-double-numbers-in-c/38618700#38618700", "title": "Dividing two double numbers in C++", "body": "<p>It is taking its default initialization value <code>0</code> since you did not assign any value to it before calling your function.</p>\n\n<p>This should work:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n// ..  \nint main()\n{\n    // ..\n    S_Space = 22.41;  //Nm^3/kmol\n    H2S_Conc = 292; // ppm v/v\n\n    // ..\n    H2S_Concentration(); // call molecular mass function here\n\n    //..\n    return 0;\n}\n</code></pre>\n\n<p>Edit: \nAs recommended by <a href=\"https://stackoverflow.com/users/1413395/%CF%80%CE%AC%CE%BD%CF%84%CE%B1-%E1%BF%A5%CE%B5%E1%BF%96\"><strong>\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6</strong></a>, and since you are hard coding their values and not changing or will not be changing these values at run time, it is recommended to set both variables as constants, and initialize them with the wanted values like this:</p>\n\n<pre><code>const double S_Space = 22.41;  //Nm^3/kmol;\nconst double H2S_Conc = 292; // ppm v/v;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1469637561, "post_id": 38618722, "comment_id": 64623178, "body": "Why <code>float</code> if OP uses <code>double</code> everywhere?"}, {"owner": {"reputation": 13, "user_id": 6645778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd94674dab7abc3241d12bc9b439dc46?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Hibbert", "link": "https://stackoverflow.com/users/6645778/tony-hibbert"}, "edited": false, "score": 2, "creation_date": 1469637674, "post_id": 38618722, "comment_id": 64623235, "body": "Thanks @Claudio Lopes ! Can you tell me why this is better than what I have? I am not being funny, just curious? :)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 13, "user_id": 6645778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd94674dab7abc3241d12bc9b439dc46?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Hibbert", "link": "https://stackoverflow.com/users/6645778/tony-hibbert"}, "edited": false, "score": 0, "creation_date": 1469637753, "post_id": 38618722, "comment_id": 64623277, "body": "@TonyHibbert cause you should avoid using global vars as much as possible."}, {"owner": {"reputation": 13, "user_id": 6645778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd94674dab7abc3241d12bc9b439dc46?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Hibbert", "link": "https://stackoverflow.com/users/6645778/tony-hibbert"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1469638065, "post_id": 38618722, "comment_id": 64623434, "body": "@Slava great thanks, so all my doubles should be &#39;const double&#39; ?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 13, "user_id": 6645778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd94674dab7abc3241d12bc9b439dc46?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Hibbert", "link": "https://stackoverflow.com/users/6645778/tony-hibbert"}, "edited": false, "score": 0, "creation_date": 1469638392, "post_id": 38618722, "comment_id": 64623616, "body": "@TonyHibbert Well, certainly not, only those that represent some chemical constants should be <code>const</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1469641473, "post_id": 38618722, "comment_id": 64625423, "body": "There is absolutely nothing wrong with global constants."}], "tags": [], "owner": {"reputation": 101, "user_id": 6640580, "user_type": "registered", "profile_image": "https://graph.facebook.com/1056543074401588/picture?type=large", "display_name": "Claudio Lopes", "link": "https://stackoverflow.com/users/6640580/claudio-lopes"}, "is_accepted": false, "score": -2, "last_activity_date": 1469638302, "last_edit_date": 1469638302, "creation_date": 1469637504, "answer_id": 38618722, "question_id": 38618428, "link": "https://stackoverflow.com/questions/38618428/dividing-two-double-numbers-in-c/38618722#38618722", "title": "Dividing two double numbers in C++", "body": "<p>the error has been answered but you could edit your code a bit.\nFor example:</p>\n\n<pre><code>float H2S_Concentration()\n{\n\n    return H2S_Conc/100;\n    //c = H2S_Conc/1000000;\n}\n</code></pre>\n\n<p>then in the main</p>\n\n<pre><code>S_Space = 22.41;  //Nm^3/kmol\nH2S_Conc = 292; // ppm v/v\nMolecular_Mass();\nConc = H2S_Concentration(); \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6645778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd94674dab7abc3241d12bc9b439dc46?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Hibbert", "link": "https://stackoverflow.com/users/6645778/tony-hibbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2660, "favorite_count": 0, "accepted_answer_id": 38618700, "answer_count": 3, "score": -1, "last_activity_date": 1469638302, "creation_date": 1469636526, "question_id": 38618428, "link": "https://stackoverflow.com/questions/38618428/dividing-two-double-numbers-in-c", "title": "Dividing two double numbers in C++", "body": "<p>I have some experience in C++. I wrote the following code;</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ndouble mass_H;\ndouble mass_S;\ndouble Mass;\ndouble S_Space;\ndouble H2S_Conc;\ndouble Conc;\n\n\n\n// calculates the molecular mass of H2S, given the molecular mass of each element\nvoid Molecular_Mass()\n{\n    Mass = ((2*mass_H)+(mass_S));\n}\n\nvoid H2S_Concentration()\n{\n\n    Conc = H2S_Conc/100;\n    //c = H2S_Conc/1000000;\n}\n\n\nint main()\n{\n\n    cout &lt;&lt; \"Welcome to the H2S conversion .\\n\";\n    cout &lt;&lt; \"Please enter molecular mass of Hydrogen: \"&lt;&lt;endl;          // enter mass of hydrogen\n    cin &gt;&gt; mass_H;\n    cout &lt;&lt; \"Please enter molecular mass of Sulphur: \" &lt;&lt; endl;         // eneter mass of sulpher\n    cin &gt;&gt; mass_S;\n\n    Molecular_Mass();\n    H2S_Concentration();                                                  // call molecular mass function\n    S_Space = 22.41;  //Nm^3/kmol\n    H2S_Conc = 292; // ppm v/v\n\n    cout &lt;&lt; \"Molecular mass of H2S is: \" &lt;&lt; Mass &lt;&lt; \"kg/kmol\"&lt;&lt; endl;\n    cout &lt;&lt; \"Standard space occupied by a kmol at 0 degrees and 1 atm is: \"&lt;&lt; S_Space &lt;&lt; \"Nm^3/kmol\" &lt;&lt;  endl;\n    cout &lt;&lt; \"H2S concentration is: \" &lt;&lt; H2S_Conc &lt;&lt; \"parts per million, which is a real concentration of: \" &lt;&lt; Conc &lt;&lt;endl;\n</code></pre>\n\n<p>The problem is when I compile and run, my value for Conc is 0. I am dividing two doubles, which I thought wasn't a problem.</p>\n\n<p>I have had a look on google and I tried casting, by using a float but that didnt work either. </p>\n\n<p>Can anyone tell me why it is returning zero</p>\n\n<p>p.s ignore the rest of my crappy code ;)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1469636133, "post_id": 38618262, "comment_id": 64622390, "body": "Define the <code>priordistance</code> variable outside the scope of the <code>for</code> loop?"}, {"owner": {"reputation": 588, "user_id": 5521699, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/366e35c3da44f844f227e496e18463f5?s=128&d=identicon&r=PG&f=1", "display_name": "Polb", "link": "https://stackoverflow.com/users/5521699/polb"}, "edited": false, "score": 0, "creation_date": 1469636307, "post_id": 38618262, "comment_id": 64622481, "body": "You are calling the <code>distanceFormula</code> function with the same arguments twice, so it will yield the same result. Why would it then output <code>Yes! It worked!</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 145, "user_id": 6636589, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1VGrBVOmjF4/AAAAAAAAAAI/AAAAAAAAABY/dXlado0wH5w/photo.jpg?sz=128", "display_name": "Matthew", "link": "https://stackoverflow.com/users/6636589/matthew"}, "is_accepted": false, "score": 0, "last_activity_date": 1469636355, "creation_date": 1469636355, "answer_id": 38618372, "question_id": 38618262, "link": "https://stackoverflow.com/questions/38618262/recording-the-value-of-a-variable/38618372#38618372", "title": "recording the value of a variable", "body": "<p>There is a few ways you could do this... you could define priordistance outside of your for loop, and be sure to only redefine it 1 time (since you are looping twice).</p>\n\n<p>However this is not what I would do, I would simply create an array of integers that hold n number of 'distances' for your reference by index i</p>\n\n<pre><code>int[] or int *\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1469637062, "post_id": 38618376, "comment_id": 64622930, "body": "I&#39;m glad to see you.:)"}], "tags": [], "owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "is_accepted": false, "score": 0, "last_activity_date": 1469636850, "last_edit_date": 1469636850, "creation_date": 1469636376, "answer_id": 38618376, "question_id": 38618262, "link": "https://stackoverflow.com/questions/38618262/recording-the-value-of-a-variable/38618376#38618376", "title": "recording the value of a variable", "body": "<p>You can do various things. You need the value to persist throughout your <code>for</code> loop. Note that there is no point in comparing until you have already got one prior value.</p>\n\n<pre><code>int main(){\n  int priordistance = 0; //lifetime outside for loop\n  for(int i = 0; i &lt; 2; i++){\n    int x = rand() % 180;\n    int y = rand() % 180;\n    int x2 = rand() % 180;\n    int y2 = rand() % 180;\n\n    int distance = distanceFormula(x, x2, y, y2);\n\n    if(i &amp;&amp; priordistance != distance){\n     //^---- have we got a prior value yet?  \n      cout&lt;&lt;\"Yes! It worked!\"&lt;&lt;endl;\n    }\n    priordistance = distance;//remember for next time\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 0, "last_activity_date": 1469636378, "creation_date": 1469636378, "answer_id": 38618377, "question_id": 38618262, "link": "https://stackoverflow.com/questions/38618262/recording-the-value-of-a-variable/38618377#38618377", "title": "recording the value of a variable", "body": "<p>Simply redord the previous value in a variable.</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\nusing std::cout;\nusing std::endl;\n\nint distanceFormula(int x1, int x2, int y1, int y2){\n  int distance;\n  distance = sqrt(pow((x1-x2), 2) + pow((y1-y2), 2));\n  return distance;\n}\n\nint main(){\n  int priordistance = 0; // a variable used to record the value\n  for(int i = 0; i &lt; 2; i++){\n    int x = rand() % 180;\n    int y = rand() % 180;\n    int x2 = rand() % 180;\n    int y2 = rand() % 180;\n\n    int distance = distanceFormula(x, x2, y, y2);\n    if(i &gt; 0 &amp;&amp; priordistance != distance){ // use i &gt; 0 to avoid compareing with meaningless value\n      cout&lt;&lt;\"Yes! It worked!\"&lt;&lt;endl;\n    }\n    priordistance = distance; // record the value\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1469636970, "creation_date": 1469636970, "answer_id": 38618560, "question_id": 38618262, "link": "https://stackoverflow.com/questions/38618262/recording-the-value-of-a-variable/38618560#38618560", "title": "recording the value of a variable", "body": "<p>Do you mean something like the following?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n#include &lt;cmath&gt;\n\nint distanceFormula( int x1, int x2, int y1, int y2 )\n{\n    int distance;\n\n    distance = std::sqrt( std::pow( x1 - x2, 2 ) + std::pow( y1 - y2, 2 ) );\n\n    return distance;\n}\n\nint main() \n{\n    const size_t N = 2;\n    int distance[N];\n\n    std::srand( ( unsigned int )std::time( nullptr ) );\n\n    for ( size_t i = 0; i &lt; N; i++ )\n    {\n        int x  = rand() % 180;\n        int y  = rand() % 180;\n        int x2 = rand() % 180;\n        int y2 = rand() % 180;\n\n        distance[i] = distanceFormula( x, x2, y, y2 );\n    }\n\n    if ( distance[0] != distance[1] ) std::cout &lt;&lt; \"Yes! It worked!\" &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>Yes! It worked!\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5255978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9lzlA.jpg?s=128&g=1", "display_name": "R. Xing", "link": "https://stackoverflow.com/users/5255978/r-xing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 38618377, "answer_count": 4, "score": 0, "last_activity_date": 1469636970, "creation_date": 1469635999, "last_edit_date": 1469636467, "question_id": 38618262, "link": "https://stackoverflow.com/questions/38618262/recording-the-value-of-a-variable", "title": "recording the value of a variable", "body": "<p>I was wondering how would one record the previous value of a variable that changes. An example of this problem is this code down below:</p>\n\n<pre><code>int distanceFormula(int x1, int x2, int y1, int y2){\n  int distance;\n  distance = sqrt(pow((x1-x2), 2) + pow((y1-y2), 2));\n  return distance;\n}\n\nint main(){\n  for(int i = 0; i &lt; 2; i++){\n    int x = rand() % 180;\n    int y = rand() % 180;\n    int x2 = rand() % 180;\n    int y2 = rand() % 180;\n\n    int distance = distanceFormula(x, x2, y, y2);\n    int priordistance = distanceFormula(x, x2, y, y2);\n\n    if(priordistance != distance){\n      cout&lt;&lt;\"Yes! It worked!\"&lt;&lt;endl;\n    }\n  }\n  return 0;\n}\n</code></pre>\n\n<p>The code itself won't return \"Yes! It worked!\" How would one record the previous value of distance and then compare that previous value to the current value?</p>\n\n<p>Edit:\nThanks for the fast comments! Really appreciate it.</p>\n\n<p>To clarify the actual question, the code above is just a quick template/example. Since the value of distance will change upon the second loop around, how would one RECORD the first value of distance and set that value to priordistance and then compare the current value of distance to priordistance (whose value is really just the previous value of distance).</p>\n"}, {"tags": ["c++", "logging", "boost", "boost-log", "boost-logging"], "answers": [{"comments": [{"owner": {"reputation": 2132, "user_id": 1315480, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0ec5acc01d8130dfefe52b6ea8823bbb?s=128&d=identicon&r=PG", "display_name": "Patrizio Bertoni", "link": "https://stackoverflow.com/users/1315480/patrizio-bertoni"}, "edited": false, "score": 0, "creation_date": 1575447416, "post_id": 38634506, "comment_id": 104565476, "body": "How could you apply <code>format_date_time&lt;boost::posix_time::ptime&gt;</code> on that timestamp attribute?"}, {"owner": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "reply_to_user": {"reputation": 2132, "user_id": 1315480, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0ec5acc01d8130dfefe52b6ea8823bbb?s=128&d=identicon&r=PG", "display_name": "Patrizio Bertoni", "link": "https://stackoverflow.com/users/1315480/patrizio-bertoni"}, "edited": false, "score": 1, "creation_date": 1575460409, "post_id": 38634506, "comment_id": 104572390, "body": "Given that <code>format_date_time</code> is a formatter expression node, you&#39;d have to construct a function object like <code>expressions::stream &lt;&lt; format_date_time&lt;...&gt;(...)</code> (saving it in an <code>auto</code> variable or in a <code>basic_formatter</code> wrapper) and then invoke it with <code>record</code> and <code>stream</code> arguments. But that would be rather inefficient, you&#39;re better off with <code>strftime</code> or <code>snprintf</code>."}, {"owner": {"reputation": 2132, "user_id": 1315480, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0ec5acc01d8130dfefe52b6ea8823bbb?s=128&d=identicon&r=PG", "display_name": "Patrizio Bertoni", "link": "https://stackoverflow.com/users/1315480/patrizio-bertoni"}, "edited": false, "score": 0, "creation_date": 1618919502, "post_id": 38634506, "comment_id": 118743616, "body": "Spasiba Andrey, could you provide some examples on that? How may I record a custom timestamp? I tried with <code>boost::log::formatting_ostream os; const boost::log::formatter TSF(boost::log::expressions::stream &lt;&lt; boost::log::expressions::format_date_time&lt;boost::posix_time:&zwnj;&#8203;:ptime&gt;(&quot;TimeStamp&quot;,&zwnj;&#8203;&quot;%H:%M:%S.%f&quot;)); os &lt;&lt; TSF;</code> but it fails compiling"}, {"owner": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "reply_to_user": {"reputation": 2132, "user_id": 1315480, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0ec5acc01d8130dfefe52b6ea8823bbb?s=128&d=identicon&r=PG", "display_name": "Patrizio Bertoni", "link": "https://stackoverflow.com/users/1315480/patrizio-bertoni"}, "edited": false, "score": 1, "creation_date": 1618929716, "post_id": 38634506, "comment_id": 118748734, "body": "@PatrizioBertoni See <a href=\"https://stackoverflow.com/questions/24287547/how-to-use-boostlogexpressionsformat-date-time-in-a-custom-formatting-func\">here</a>."}], "tags": [], "owner": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "is_accepted": true, "score": 5, "last_activity_date": 1469703796, "creation_date": 1469703796, "answer_id": 38634506, "question_id": 38618094, "link": "https://stackoverflow.com/questions/38618094/how-to-output-timestamp-and-threadid-attributes-with-custom-boostlog-formatter/38634506#38634506", "title": "How to output TimeStamp and ThreadID attributes with custom boost::log formatter?", "body": "<p>Given that you have added these attributes to log records, there are multiple ways to extract them. The simplest way is to use <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/log/doc/html/log/detailed/expressions.html#log.detailed.expressions.attr_keywords\" rel=\"noreferrer\">keywords</a>. First you declare keywords for the attributes:</p>\n\n<pre><code>BOOST_LOG_ATTRIBUTE_KEYWORD(a_timestamp, \"TimeStamp\", attrs::local_clock::value_type)\nBOOST_LOG_ATTRIBUTE_KEYWORD(a_thread_id, \"ThreadID\", attrs::current_thread_id::value_type)\n</code></pre>\n\n<p>Note that the third parameter is the value type of the corresponding attribute. In this example I assumed that the attributes you used were <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/log/doc/html/log/detailed/attributes.html#log.detailed.attributes.clock\" rel=\"noreferrer\"><code>local_clock</code></a> and <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/log/doc/html/log/detailed/attributes.html#log.detailed.attributes.thread_id\" rel=\"noreferrer\"><code>current_thread_id</code></a>.</p>\n\n<p>Now you can use these keywords to extract the value from log records.</p>\n\n<pre><code>stream &lt;&lt; record[a_timestamp] &lt;&lt; \" \"\n       &lt;&lt; record[a_thread_id]\n       &lt;&lt; \" [\" &lt;&lt; severity &lt;&lt; \"] \"\n       &lt;&lt; record[logging::expressions::smessage]\n       &lt;&lt; \"\\e[0m\";\n</code></pre>\n"}], "owner": {"reputation": 2782, "user_id": 853791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/w0oVE.jpg?s=128&g=1", "display_name": "bobeff", "link": "https://stackoverflow.com/users/853791/bobeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1203, "favorite_count": 1, "accepted_answer_id": 38634506, "answer_count": 1, "score": 4, "last_activity_date": 1469703796, "creation_date": 1469635461, "question_id": 38618094, "link": "https://stackoverflow.com/questions/38618094/how-to-output-timestamp-and-threadid-attributes-with-custom-boostlog-formatter", "title": "How to output TimeStamp and ThreadID attributes with custom boost::log formatter?", "body": "<p>I'm using custom <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/log/doc/html/index.html\" rel=\"nofollow\">boost::log</a> formatter for color coding the output log message, but I'm failing to find the proper way to add <em>TimeStamp</em> and <em>ThreadID</em> attributes to the log. When I'm using file logging I just write <code>keywords::format = \"[%TimeStamp%] [%ThreadID%] [%Severity%]: %Message%\"</code> as <code>logging::add_file_log</code> parameter. I want to have similar effect in the following custom formatter:</p>\n\n<pre><code>void coloring_formatter(const logging::record_view&amp; record,\n                        logging::formatting_ostream&amp; stream)\n{\n  auto severity = record[logging::trivial::severity];\n  assert(severity);\n\n  stream &lt;&lt; \"\\e[1m\";\n\n  switch (severity.get())\n  {\n  case logging::trivial::severity_level::trace:\n    stream &lt;&lt; \"\\e[97m\";\n    break;\n  case logging::trivial::severity_level::debug:\n    stream &lt;&lt; \"\\e[34m\";\n    break;\n  case logging::trivial::severity_level::info:\n    stream &lt;&lt; \"\\e[32m\";\n    break;\n  case logging::trivial::severity_level::warning:\n    stream &lt;&lt; \"\\e[93m\";\n    break;\n  case logging::trivial::severity_level::error:\n    stream &lt;&lt; \"\\e[91m\";\n    break;\n  case logging::trivial::severity_level::fatal:\n    stream &lt;&lt; \"\\e[41m\";\n    break;\n  }\n\n  stream // &lt;&lt; output TimeStamp\n         // &lt;&lt; output ThreadID\n         &lt;&lt; \"[\" &lt;&lt; severity &lt;&lt; \"] \"\n         &lt;&lt; record[logging::expressions::smessage]\n         &lt;&lt; \"\\e[0m\";\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi", "crash", "gdi+"], "answers": [{"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 3, "user_id": 5226889, "user_type": "registered", "profile_image": "https://graph.facebook.com/854769317931993/picture?type=large", "display_name": "Igor Santarek", "link": "https://stackoverflow.com/users/5226889/igor-santarek"}, "edited": false, "score": 1, "creation_date": 1469636296, "post_id": 38618208, "comment_id": 64622471, "body": "@IgorSantarek - of course you not check result of GdiplusStartup and main - Image::FromFile - so you need how minimum 2 if () {} here, but direct error was by destructor executed when exited from local block, in current version this was after GdiplusShutdown"}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": true, "score": 1, "last_activity_date": 1469635830, "creation_date": 1469635830, "answer_id": 38618208, "question_id": 38618084, "link": "https://stackoverflow.com/questions/38618084/what-am-i-doing-wrong-program-crashes-gdi-winapi-c/38618208#38618208", "title": "What am I doing wrong? Program crashes. [GDI+, WINAPI, C++]", "body": "<p>graphics destructor is executed after GdiplusShutdown. you need enclose block with </p>\n\n<pre><code>Graphics graphics(hoc);\n</code></pre>\n\n<p>in { }</p>\n"}], "owner": {"reputation": 3, "user_id": 5226889, "user_type": "registered", "profile_image": "https://graph.facebook.com/854769317931993/picture?type=large", "display_name": "Igor Santarek", "link": "https://stackoverflow.com/users/5226889/igor-santarek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "accepted_answer_id": 38618208, "answer_count": 1, "score": 0, "last_activity_date": 1469635832, "creation_date": 1469635435, "last_edit_date": 1469635832, "question_id": 38618084, "link": "https://stackoverflow.com/questions/38618084/what-am-i-doing-wrong-program-crashes-gdi-winapi-c", "title": "What am I doing wrong? Program crashes. [GDI+, WINAPI, C++]", "body": "<p>I wrote a program in C++ which has to print an image on the screen and exit after 2 seconds. Everything was ok until the program has to exit. When the program is on return 0; instruction, it crashes. I think it's because of wrong dealocation, but code seems to be correct.</p>\n\n<hr>\n\n<p><code></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n#include &lt;gdiplus.h&gt;\n\nusing namespace std;\nusing namespace Gdiplus;\n\nHDC hdc = GetDC(NULL);\n\nint main() {\n    GdiplusStartupInput gdiplusStartupInput;\n    ULONG_PTR           gdiplusToken;\n    GdiplusStartup(&amp;gdiplusToken, &amp;gdiplusStartupInput, NULL);\n\n    Graphics graphics(hdc);\n    Rect dst(500, 500, 17, 17);\n    Image* image = Image::FromFile(L\"image.png\", false);\n    cout&lt;&lt;\"Image size: \"&lt;&lt;image-&gt;GetWidth()&lt;&lt;\", \"&lt;&lt;image-&gt;GetHeight()&lt;&lt;endl;\n    graphics.DrawImage(image, dst);\n    delete image;\n\n    GdiplusShutdown(gdiplusToken);\n    Sleep(2000);\n    return 0;\n}\n</code></pre>\n\n<p></code></p>\n\n<hr>\n\n<p>I've got the newest compilator and I compile by:</p>\n\n<p>g++ -c main.cpp -std=g++11</p>\n\n<p>g++ -o main main.o -lgdiplus</p>\n"}, {"tags": ["c++", "tbb"], "answers": [{"tags": [], "owner": {"reputation": 5833, "user_id": 2527797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83539ee8bca535eca6c4be5c856a738d?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/2527797/anton"}, "is_accepted": true, "score": 3, "last_activity_date": 1469658566, "creation_date": 1469658566, "answer_id": 38624240, "question_id": 38618074, "link": "https://stackoverflow.com/questions/38618074/c-two-tbbparallel-for-loops-efficiency/38624240#38624240", "title": "c++ two tbb::parallel_for loops efficiency", "body": "<p>1) No, TBB has single shared pool of threads which are created lazily on demand. So lazily that completion of the first <code>parallel_for</code> does not guarantee creation of all the threads.</p>\n\n<p>2) Not needed.</p>\n"}], "owner": {"reputation": 456, "user_id": 2951168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LTsOW.jpg?s=128&g=1", "display_name": "Piotr Barejko", "link": "https://stackoverflow.com/users/2951168/piotr-barejko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 38624240, "answer_count": 1, "score": 0, "last_activity_date": 1469658566, "creation_date": 1469635410, "question_id": 38618074, "link": "https://stackoverflow.com/questions/38618074/c-two-tbbparallel-for-loops-efficiency", "title": "c++ two tbb::parallel_for loops efficiency", "body": "<p>In my code I call parallel_for twice:</p>\n\n<pre><code>parallel_for( do some stuff ); // I want this operation to finish first\nparallel_for( do some other stuff ); // then I want to do this\n</code></pre>\n\n<p>1) Does this approach create physical threads twice ? and makes it slower ?</p>\n\n<p>2) If needed, what would be the best method to replace those two calls of parallel_for ?</p>\n"}, {"tags": ["c++", "xcode", "macos", "cmake"], "comments": [{"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1469640763, "post_id": 38618014, "comment_id": 64625004, "body": "One of your three ways should, I don&#39;t see a problem. What&#39;s your CMake version? Does this happen with a minimal CMake/C++ project, too? Have you cleared the CMake cache?"}, {"owner": {"reputation": 102, "user_id": 1973207, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/557d7fa74d7ec23c6726f1c16986b032?s=128&d=identicon&r=PG", "display_name": "DuckQueen", "link": "https://stackoverflow.com/users/1973207/duckqueen"}, "reply_to_user": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1469645220, "post_id": 38618014, "comment_id": 64627593, "body": "Cleaned up CMake cache; on CMake 3.6; Gonna try minimal now..."}], "owner": {"reputation": 102, "user_id": 1973207, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/557d7fa74d7ec23c6726f1c16986b032?s=128&d=identicon&r=PG", "display_name": "DuckQueen", "link": "https://stackoverflow.com/users/1973207/duckqueen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 435, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1469635252, "creation_date": 1469635252, "question_id": 38618014, "link": "https://stackoverflow.com/questions/38618014/how-to-force-cmake-cxx-and-cc-on-mac-yosemity", "title": "How to force CMake CXX and CC on Mac Yosemity?", "body": "<p>I have <code>clang-omp</code> installed via brew. and I have executed <code>xcode-select --install</code> command. I am able to compile my project with OpenMP with it using <code>Unix Makefiles</code>. Yet I want to use Xcode for development. I tried all I could:</p>\n\n<pre><code>$export CC=/usr/local/bin/clang-omp\n$export CXX=/usr/local/bin/clang-omp++\n$CC=\"/usr/local/bin/clang-omp\" CXX=\"/usr/local/bin/clang-omp++\" cmake -DCMAKE_C_COMPILER=\"/usr/local/bin/clang-omp\" -DCMAKE_CXX_COMPILER=\"/usr/local/bin/clang-omp++\" -G \"Xcode\" ..\n</code></pre>\n\n<p>The problem is that CMake sets CXX to mac default:</p>\n\n<pre><code>-- The CXX compiler identification is Clang 3.5.0\n-- Check for working CXX compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++\n-- Check for working CXX compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -- works\n-- Detecting CXX compiler ABI info\n</code></pre>\n\n<p>So how to force CXX and CC compiler paths on mac to Cmake?</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 4, "creation_date": 1469635177, "post_id": 38617907, "comment_id": 64621780, "body": "You&#39;re using a type-erased container and fetching its stored value, and you&#39;re worried about the performance of a comparison to <code>nullptr</code>?"}, {"owner": {"reputation": 1163, "user_id": 5599569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQy3U.jpg?s=128&g=1", "display_name": "Victor Dyachenko", "link": "https://stackoverflow.com/users/5599569/victor-dyachenko"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1469635524, "post_id": 38617907, "comment_id": 64621991, "body": "Yes. I worry about every avoidable overhead. And it is just ugly interface"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1469636234, "post_id": 38617907, "comment_id": 64622442, "body": "There are versions of those functions that take references as arguments. They just throw on failure (instead of returning <code>nullptr</code>)."}, {"owner": {"reputation": 1163, "user_id": 5599569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQy3U.jpg?s=128&g=1", "display_name": "Victor Dyachenko", "link": "https://stackoverflow.com/users/5599569/victor-dyachenko"}, "edited": false, "score": 0, "creation_date": 1469636356, "post_id": 38617907, "comment_id": 64622513, "body": "Yes, I now. But they are different sort of actions. They are assertions not requests."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1469637465, "post_id": 38617907, "comment_id": 64623133, "body": "&quot;<i>They are assertions not requests.</i>&quot; Consider the reason why you would make such a request. I&#39;m fairly sure that a <code>variant</code> visitor would have superior performance to any code that uses a series of <code>get_if</code> calls. As for <code>any</code>, code which tests several alternatives as you do will have terrible performance regardless (not to mention the general ugliness of reading it). In short, you&#39;re <i>already</i> on the sub-optimal path; who cares if it&#39;s slightly less optimal than it could be?"}, {"owner": {"reputation": 1163, "user_id": 5599569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQy3U.jpg?s=128&g=1", "display_name": "Victor Dyachenko", "link": "https://stackoverflow.com/users/5599569/victor-dyachenko"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1469639941, "post_id": 38617907, "comment_id": 64624516, "body": "@Nicol Makes sense. But it isn&#39;t answer to my question"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1469646898, "post_id": 38617907, "comment_id": 64628505, "body": "@VictorDyachenko: Your question makes no real sense. You are asking <i>WHY</i> the designers decided to create pointer versions of these functions. If you really want to know, ask the designers! But why not have them? The reference versions throw an exception if the cast fails, and exceptions are not always desired. So you have a choice - use the reference versions if you want exceptions, or use the pointer versions otherwise. References are usually implemented as pointers at the machine layer, there is no real performance difference one way or the other, but exceptions have overhead of their own."}, {"owner": {"reputation": 1020, "user_id": 4304120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc7c00d9ea3a92baac5b6927343dba?s=128&d=identicon&r=PG&f=1", "display_name": "Marian Spanik", "link": "https://stackoverflow.com/users/4304120/marian-spanik"}, "edited": false, "score": 0, "creation_date": 1469649977, "post_id": 38617907, "comment_id": 64630115, "body": "Please don&#39;t worry about performance like this until you use a profiler. Your processor most likely spends a most of a time elsewhere. You are only wasting your time which could be used to optimize parts of code where a performance optimization would bring noticeable results (most likely not here)."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 3, "creation_date": 1469649629, "post_id": 38622114, "comment_id": 64629951, "body": "<code>get_if</code> is pointer-only. The reference/throwing version is <code>get</code>."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 6, "last_activity_date": 1583556158, "last_edit_date": 1583556158, "creation_date": 1469649479, "answer_id": 38622114, "question_id": 38617907, "link": "https://stackoverflow.com/questions/38617907/is-it-absolutely-necessary-for-stdany-cast-and-stdget-ifstdvariant-to/38622114#38622114", "title": "Is it absolutely necessary for std::any_cast() and std::get_if(std::variant) to take pointer as an argument?", "body": "<p>To keep the function name down to one of them, and make it work like the built in <code>_cast</code> operators, <code>any_cast</code> works with either references or pointers.</p>\n\n<p>The pointer versions take a pointer, and if it contains what you ask for, returns a pointer to the element.  Otherwise it returns nullptr.</p>\n\n<p>The reference versions take a reference, and throws if it does not contain what you ask for.</p>\n\n<p>They used the pointer-ness of the argument to distinguish between those two options, matching how <code>dynamic_cast&lt;T&amp;&gt;(x)</code> and <code>dynamic_cast&lt;T*&gt;(&amp;x)</code> work.</p>\n\n<p>It is going to be easy to inline.  Inline checks against null of a pointer-to-automatic-storage object are easy to optimize to be \"not null\", as there are no conformant ways for an automatic storage object's address to be nullptr.</p>\n\n<p>So in almost every case in release I would expect zero overhead from the check-if-nullptr.  The one exception is where the code has a pointer-to-any (or variant), it has some proof that this pointer-to-any is not null that the compiler is unlikely to know, and it then passes that to <code>any_cast</code>.  If they had not used the pointer-to-indicate-pointer-return-type trick, one could \"risk\" UB with the <code>any_cast_to_ptr(any&amp;)</code> and unconditionally dereferencing the pointer.</p>\n\n<p>The real API missing is the <code>dangerous_any_cast</code>, which simply does UB if the type does not match, because nonlocally proven knowledge about the state of the <code>any</code> seems more likely than nonlocally proven knowledge about the nullity of a pointer-to-any.</p>\n\n<p>Such cases are rare.</p>\n\n<p>As for <code>get_if</code> vs <code>get</code>, I do not know why there is no <code>get_if(variant&lt;???&gt;&amp;)</code> overload.</p>\n"}], "owner": {"reputation": 1163, "user_id": 5599569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQy3U.jpg?s=128&g=1", "display_name": "Victor Dyachenko", "link": "https://stackoverflow.com/users/5599569/victor-dyachenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 872, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1583556158, "creation_date": 1469634929, "question_id": 38617907, "link": "https://stackoverflow.com/questions/38617907/is-it-absolutely-necessary-for-stdany-cast-and-stdget-ifstdvariant-to", "title": "Is it absolutely necessary for std::any_cast() and std::get_if(std::variant) to take pointer as an argument?", "body": "<p>For <code>std::any</code> and <code>std::variant</code> we have functions to request the object about current contained value, that return <code>nullptr</code> if the request cannot be satisfied (just like <code>dynamic_cast</code> does):</p>\n\n<pre><code>template&lt;class ValueType&gt;\nconst ValueType *any_cast(const any *operand);\n\ntemplate&lt;class ValueType&gt;\nValueType *any_cast(any *operand);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>template &lt;class T, class... Types&gt;\nstd::add_pointer_t&lt;T&gt; get_if(variant&lt;Types...&gt; *pv);\n\ntemplate &lt;class T, class... Types&gt;\nstd::add_pointer_t&lt;const T&gt; get_if(const variant&lt;Types...&gt; *pv);\n</code></pre>\n\n<p>Both take pointer as an argument. Why? It is not efficient. The implementation has every time to check if the argument is not <code>nullptr</code>. Does <code>nullptr</code> argument makes any sense at all?</p>\n\n<p>This functions can be class members or take a reference as an argument (may be with slightly different names). What are reasons for suboptimal design like this? Just mimic <code>dynamic_cast</code> interface?</p>\n"}, {"tags": ["c++", "visual-studio-2012", "resources", "animated-gif", "direct2d"], "comments": [{"owner": {"reputation": 247, "user_id": 5010081, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/45b5e2c0b4b83df330a841726680bab0?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Raufelder", "link": "https://stackoverflow.com/users/5010081/jan-raufelder"}, "edited": false, "score": 0, "creation_date": 1469634423, "post_id": 38617672, "comment_id": 64621276, "body": "Note: In &quot;2)&quot; I tried various paths resulting in the same error"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1469634594, "post_id": 38617672, "comment_id": 64621383, "body": "CreateDecoder <i>From Filename</i> does exactly what it promises.  Use CreateDecoderFromStream() instead.  CreateStreamOnHGlobal() is a simple way to obtain the IStream you need."}, {"owner": {"reputation": 247, "user_id": 5010081, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/45b5e2c0b4b83df330a841726680bab0?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Raufelder", "link": "https://stackoverflow.com/users/5010081/jan-raufelder"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1469690825, "post_id": 38617672, "comment_id": 64643516, "body": "@HansPassant If you&#39;d provide a short desc of how to add the GIF to the Resources and then how to make use of it i could mark it as answer..."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1470173442, "post_id": 38637049, "comment_id": 64837846, "body": "<code>pStream</code> should either be an <code>IStream*</code>, or some smart pointer type. Since we cannot see the code after <code>CreateDecoderFromStream</code>, there&#39;s no way to know for sure, whether the stream object is properly released (by calling <code>Release</code>)."}], "tags": [], "owner": {"reputation": 247, "user_id": 5010081, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/45b5e2c0b4b83df330a841726680bab0?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Raufelder", "link": "https://stackoverflow.com/users/5010081/jan-raufelder"}, "is_accepted": true, "score": 0, "last_activity_date": 1469710580, "creation_date": 1469710580, "answer_id": 38637049, "question_id": 38617672, "link": "https://stackoverflow.com/questions/38617672/visual-studio-2012-how-to-add-animated-gif-as-resource-for-usage-with-direct2d/38637049#38637049", "title": "Visual Studio 2012 - How to add animated GIF as Resource for usage with Direct2d", "body": "<p>I finally got it working... here is what you have to do: <br></p>\n\n<p><strong>1) Add your Resource to the project</strong></p>\n\n<blockquote>\n  <p>Right Click on the Project - Add - Existing Item - Select your file</p>\n</blockquote>\n\n<p><strong>2) Edit your resource.h file</strong></p>\n\n<blockquote>\n  <p>Define a identifier for your resource, e.g.: #define IDR_GIF 107</p>\n</blockquote>\n\n<p><strong>3) Edit your .rc file</strong></p>\n\n<blockquote>\n  <p>IDR_GIF RCDATA \"C:\\Users\\xxx\\Desktop\\xxx.gif\"</p>\n</blockquote>\n\n<p><strong>4) Define a Stream Pointer</strong></p>\n\n<blockquote>\n  <p>I created a private member in my class, e.g.: <code>LPSTREAM pStream;</code></p>\n</blockquote>\n\n<p><strong>5) include Shlwapi.dll</strong></p>\n\n<blockquote>\n  <p>Add <code>#include &lt;Shlwapi.h&gt;</code></p>\n</blockquote>\n\n<p><strong>6) link Shlwapi.lib</strong></p>\n\n<blockquote>\n  <p>Project - \"Your Project\" Properties - Configuration Properties - Linker - Input - Additional Dependencies - Edit - Add Shlwapi.lib</p>\n</blockquote>\n\n<p><strong>7) Use the resource</strong></p>\n\n<pre><code>HRSRC myResource = ::FindResource(NULL, MAKEINTRESOURCE(IDR_GIF), RT_RCDATA);\nHGLOBAL myResourceData = ::LoadResource(NULL, myResource);\nunsigned int myResourceSize = ::SizeofResource(NULL, myResource);\n\npStream = SHCreateMemStream((LPBYTE)LockResource(myResourceData), myResourceSize);\n\nm_pIWICFactory-&gt;CreateDecoderFromStream(\n        pStream,\n        nullptr,\n        WICDecodeMetadataCacheOnLoad,\n        &amp;m_pDecoder);\n</code></pre>\n"}], "owner": {"reputation": 247, "user_id": 5010081, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/45b5e2c0b4b83df330a841726680bab0?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Raufelder", "link": "https://stackoverflow.com/users/5010081/jan-raufelder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1956, "favorite_count": 0, "accepted_answer_id": 38637049, "answer_count": 1, "score": 0, "last_activity_date": 1469710580, "creation_date": 1469634205, "last_edit_date": 1495540740, "question_id": 38617672, "link": "https://stackoverflow.com/questions/38617672/visual-studio-2012-how-to-add-animated-gif-as-resource-for-usage-with-direct2d", "title": "Visual Studio 2012 - How to add animated GIF as Resource for usage with Direct2d", "body": "<p>I've written a class which is able to display an animated GIF file with Direct2D.</p>\n\n<p>Right now I'm accessing the desired GIF to display via it's FilePath like: <br></p>\n\n<pre><code>WCHAR szFileName[MAX_PATH] = \"C:\\\\Users\\\\xxx\\\\Desktop\\\\xxx.gif\";\n\nm_pIWICFactory-&gt;CreateDecoderFromFilename(  //My IWICImagingFactory\n        szFileName,                         \n        nullptr,           \n        GENERIC_READ, \n        WICDecodeMetadataCacheOnLoad,\n        &amp;m_pDecoder);                       //My IWICBitmapDecoder\n</code></pre>\n\n<p>I need to change this part so that the desired GIF will be loaded from the Resources of my Project.</p>\n\n<p>What I did/tried so far:</p>\n\n<p><strong>1)</strong> <br>\n- I right clicked on My Project, clicked add \"Resource\" <br>\n- In the popup I've selected \"Import\" and as Resource Type I defined \"GIF\"</p>\n\n<blockquote>\n  <p>Which resulted in a non-buildable project cause of <a href=\"https://stackoverflow.com/questions/15244065/error-rc2135-in-c-project-due-to-utf-8-encoding-of-rc-file\">Error RC2135 in C++ project due to UTF-8 encoding of RC file</a> \n  <br> Additionally it \"destroyed\" my GIF file. Opening the GIF in Notepad showed that it got converted from GIF89a to BM6(.bmp) during this process</p>\n</blockquote>\n\n<p><strong>2)</strong> <br>\n- I right clicked on My Project, clicked add \"Exsisting Item\" and selected my GIF <br>\n- Then i tried to add the give to the .rc file like IDR_MYGIF GIF \".\\resources\\xxx.gif\"</p>\n\n<blockquote>\n  <p>Which results in \"error RC2135: file not found: .\\resources\\xxx.gif\n  \"</p>\n</blockquote>\n\n<p>So basically I need to know how I can add the GIF correctly to the Resources and how I'll be able to access it in the Code for the IWICBitmapDecoder</p>\n\n<p>Thank you for any help</p>\n"}, {"tags": ["c++", "std", "ostream"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1469634267, "post_id": 38617658, "comment_id": 64621158, "body": "this <a href=\"http://coliru.stacked-crooked.com/a/d213d94b7b5638a2\" rel=\"nofollow noreferrer\">doesn&#39;t compile for me on either gcc or clang</a>. What compiler and version are you using?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469634392, "post_id": 38617658, "comment_id": 64621252, "body": "Doesn&#39;t compile with <a href=\"http://rextester.com/WZPW65979\" rel=\"nofollow noreferrer\">Visual Studio 2015 either</a>"}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1469634419, "post_id": 38617658, "comment_id": 64621269, "body": "@jaggedSpire Probably a pre-C++11 one."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1469634504, "post_id": 38617658, "comment_id": 64621324, "body": "@SebastianRedl <a href=\"http://coliru.stacked-crooked.com/a/63d66f63a98d11cf\" rel=\"nofollow noreferrer\">looks like you&#39;re right</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1469634996, "post_id": 38617658, "comment_id": 64621664, "body": "Where is your return type for <code>main</code>?"}, {"owner": {"reputation": 1219, "user_id": 890753, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/69f4328afd663171f823d815a9a1d230?s=128&d=identicon&r=PG&f=1", "display_name": "John H.", "link": "https://stackoverflow.com/users/890753/john-h"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1469638606, "post_id": 38617658, "comment_id": 64623745, "body": "@jaggedSpire g++ (GCC) 4.8.3, with -std=c++11 -- and I gather (per the &#39;duplicate&#39; answer) that this is a known issue in g++."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1469638937, "post_id": 38617658, "comment_id": 64623965, "body": "@JohnH. well the explanation dupe-linked is the probable one. It seems any version of gcc after 5.0 changes the behavior to the expected compiler error, though. You might want to upgrade your compiler if you can--gcc head is presently at 7.0, and 6.1&#39;s pretty common."}, {"owner": {"reputation": 1219, "user_id": 890753, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/69f4328afd663171f823d815a9a1d230?s=128&d=identicon&r=PG&f=1", "display_name": "John H.", "link": "https://stackoverflow.com/users/890753/john-h"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1469646089, "post_id": 38617658, "comment_id": 64628076, "body": "@jaggedSpire Corporate is moving to 5.2 Any Day Now...  Thanks much for all you&#39;s help."}], "owner": {"reputation": 1219, "user_id": 890753, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/69f4328afd663171f823d815a9a1d230?s=128&d=identicon&r=PG&f=1", "display_name": "John H.", "link": "https://stackoverflow.com/users/890753/john-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1469634518, "answer_count": 0, "score": 0, "last_activity_date": 1469634364, "creation_date": 1469634166, "last_edit_date": 1469634364, "question_id": 38617658, "link": "https://stackoverflow.com/questions/38617658/why-does-ostreamoperator-allow-ostringstream-arg", "closed_reason": "Duplicate", "title": "Why does ostream::operator&lt;&lt; allow ostringstream arg?", "body": "<p>This produces garbage:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\nmain()\n{\n    std::ostringstream s1;\n    s1 &lt;&lt; \"s\" &lt;&lt; 1;\n    std::cout &lt;&lt; s1 &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>This produces garbage.  I realize the fix is to use <code>s1.str()</code>.  I'm wondering why <code>ostream::operator&lt;&lt;</code> can take the <code>ostringstream</code> arg if it \"doesn't work properly\".</p>\n"}, {"tags": ["c++", "shared-ptr"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469635592, "post_id": 38617451, "comment_id": 64622039, "body": "Not enough context to be able to answer this question without guesswork, I&#39;m afraid. Recommend writing yourself a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and editing your question to include it if the writing doesn&#39;t make the solution obvious. Also worth running a few tests to ensure you don&#39;t have a bug in the <code>DataModel</code> destructor."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1469640328, "post_id": 38617451, "comment_id": 64624742, "body": "<i>&quot;reading location 0x0000000000000018&quot;</i>. It seems you call method on nullptr. Are you sure that the instance of  SupervisingClass` is not <code>nullptr</code>. Navigating in the callstack should show you the nullptr object anyway."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1469652452, "post_id": 38617451, "comment_id": 64631357, "body": "When <code>SupervisingClass::SomeFunction()</code> calls <code>Wrapper-&gt;init()</code>, chances are that the <code>Wrapper</code> pointer is null. Where is the code in <code>SupervisingClass</code> that assigns a value to <code>Wrapper</code> before <code>init()</code> is called on it?"}, {"owner": {"reputation": 172, "user_id": 4850847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sm_2PHPCydo/AAAAAAAAAAI/AAAAAAAAAH8/BNjobkbS-8Q/photo.jpg?sz=128", "display_name": "Quentin Tealrod", "link": "https://stackoverflow.com/users/4850847/quentin-tealrod"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1469692611, "post_id": 38617451, "comment_id": 64644693, "body": "Ohh, I&#39;m so ashamed. As you suggested @RemyLebeau , the <code>Wrapper</code> pointer was null. It didn&#39;t even cross my mind cause the debugger told the problem was around operator= of the Model. I don&#39;t really understand how it can cross the init function, considering the object is null... Thanks everybody"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1469721489, "post_id": 38617451, "comment_id": 64665768, "body": "@QuentinTealrod calling a method on a null object pointer is technically undefined behavior, but in practice it usually works fine up until the method tries to access a member of the object via its <code>this</code> pointer, then it crashes. In your case, when calling <code>this-&gt;model.operator=()</code>. If you don&#39;t access <code>this</code>, it usually doesn&#39;t crash."}], "owner": {"reputation": 172, "user_id": 4850847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sm_2PHPCydo/AAAAAAAAAAI/AAAAAAAAAH8/BNjobkbS-8Q/photo.jpg?sz=128", "display_name": "Quentin Tealrod", "link": "https://stackoverflow.com/users/4850847/quentin-tealrod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 378, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1469633635, "creation_date": 1469633635, "question_id": 38617451, "link": "https://stackoverflow.com/questions/38617451/exception-with-shared-ptr-invoking-make-sharedargs-c", "title": "Exception with shared_ptr invoking make_shared(Args...) c++", "body": "<p>I've got a weird behavior and after having spent several hours, I'm finally here.\nI have a class DataModel, belonging to its Wrapper. More exactly, the Wrapper instance object has a shared_ptr of DataModel</p>\n\n<p>Wrapper.h :</p>\n\n<pre><code>class Wrapper \n{\n    shared_ptr&lt;DataModel&gt; model;\n}\n</code></pre>\n\n<p>This pointer is initialized in the constructeur with nullptr so as to be initialized after.</p>\n\n<p>Wrapper.cpp :</p>\n\n<pre><code>Wrapper::Wrapper(/* few args here*/) : model(nullptr) { ... }\n\nWrapper::init(Args...)\n{\n    model =  std::make_shared&lt;DataModel&gt;(Args...)\n}\n</code></pre>\n\n<p>Somewhere else in a Supervising class (which contains a shared_ptr of Wrapper)</p>\n\n<pre><code>SupervisingClass::SomeFunction()\n{\n    Wrapper-&gt;init();\n}\n</code></pre>\n\n<p>And it throws the following exception : </p>\n\n<p>First-chance exception at 0x000000013FB621C4 in CSGeo.exe: 0xC0000005: Access violation reading location 0x0000000000000018.\nIf there is a handler for this exception, the program may be safely continued.</p>\n\n<pre><code>        MyApp.exe!std::swap&lt;std::_Ref_count_base * __ptr64&gt;(std::_Ref_count_base * &amp; _Left, std::_Ref_count_base * &amp; _Right) Line 53    C++\n        MyApp.exe!std::_Ptr_base&lt;DataModel&gt;::_Swap(std::_Ptr_base&lt;DataModel&gt; &amp; _Right) Line 316 C++\n        MyApp.exe!std::shared_ptr&lt;DataModel&gt;::swap(std::shared_ptr&lt;DataModel&gt; &amp; _Other) Line 662    C++\n        MyApp.exe!std::shared_ptr&lt;DataModel&gt;::operator=(std::shared_ptr&lt;DataModel&gt; &amp;&amp; _Right) Line 597  C++\n        MyApp.exe!Wrapper::init(const QStringList &amp; recentProjects, bool insertNewVirtualProject) Line 83   C++\n        MyApp.exe!SupervisingClass::SomeFunction() Line 137 C++\n</code></pre>\n\n<p>If I try to reset my model in the init function, it crashes as well. Any idea ? \nI'm lost this time. And it's not the first time I got troubles with reset function and shared_ptr, I think there is something I miss. And why would the operator= be called, considering that the pointer isn't initialized, c++ should only call the good constructor and forwarding Args, nope ???</p>\n\n<p>It might be relevant to add that before, the model was directly included in the Supervising class (just cut past the code), and I inserted a wrapper between them to get more code clarity with hundreds of lines. And yes, it used to work before.</p>\n\n<p>Thanks by advance for your time</p>\n"}, {"tags": ["c++", "move-semantics", "c++17"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1469633355, "post_id": 38617309, "comment_id": 64620498, "body": "Did you mean the subsequent two examples to return <code>string</code>?"}, {"owner": {"reputation": 1163, "user_id": 5599569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQy3U.jpg?s=128&g=1", "display_name": "Victor Dyachenko", "link": "https://stackoverflow.com/users/5599569/victor-dyachenko"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1469633582, "post_id": 38617309, "comment_id": 64620672, "body": "Yes. Edited. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 1163, "user_id": 5599569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQy3U.jpg?s=128&g=1", "display_name": "Victor Dyachenko", "link": "https://stackoverflow.com/users/5599569/victor-dyachenko"}, "edited": false, "score": 0, "creation_date": 1469633823, "post_id": 38617484, "comment_id": 64620846, "body": "Did you mean *std::move(res)?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1163, "user_id": 5599569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQy3U.jpg?s=128&g=1", "display_name": "Victor Dyachenko", "link": "https://stackoverflow.com/users/5599569/victor-dyachenko"}, "edited": false, "score": 0, "creation_date": 1469634930, "post_id": 38617484, "comment_id": 64621620, "body": "@VictorDyachenko Or I guess you could just have the function return an <code>optional&lt;string&gt;</code> and <code>return res</code>. That&#39;ll move."}, {"owner": {"reputation": 1163, "user_id": 5599569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQy3U.jpg?s=128&g=1", "display_name": "Victor Dyachenko", "link": "https://stackoverflow.com/users/5599569/victor-dyachenko"}, "edited": false, "score": 0, "creation_date": 1469635350, "post_id": 38617484, "comment_id": 64621880, "body": "May be something like <code>return opt.move_value()</code> would be a bit more intuitive interface, as for me"}, {"owner": {"reputation": 33082, "user_id": 726300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZWH6H.png?s=128&g=1", "display_name": "Luc Danton", "link": "https://stackoverflow.com/users/726300/luc-danton"}, "reply_to_user": {"reputation": 1163, "user_id": 5599569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQy3U.jpg?s=128&g=1", "display_name": "Victor Dyachenko", "link": "https://stackoverflow.com/users/5599569/victor-dyachenko"}, "edited": false, "score": 0, "creation_date": 1470144913, "post_id": 38617484, "comment_id": 64819971, "body": "@VictorDyachenko <code>std::move(*res)</code> and <code>*std::move(res)</code> will likely have different semantics if/when <code>std::optional</code> is relaxed to work with reference types. Compare <code>std::move(std::get&lt;0&gt;(x))</code> and <code>std::get&lt;0&gt;(std::move(x))</code> where <code>x</code> is a tuple to get a feeling of which means which."}, {"owner": {"reputation": 1163, "user_id": 5599569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQy3U.jpg?s=128&g=1", "display_name": "Victor Dyachenko", "link": "https://stackoverflow.com/users/5599569/victor-dyachenko"}, "reply_to_user": {"reputation": 33082, "user_id": 726300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZWH6H.png?s=128&g=1", "display_name": "Luc Danton", "link": "https://stackoverflow.com/users/726300/luc-danton"}, "edited": false, "score": 0, "creation_date": 1470171124, "post_id": 38617484, "comment_id": 64836731, "body": "@LucDanton We a are taking about std::optional. std::optional has std::optional::operator*() &amp;&amp;"}, {"owner": {"reputation": 33082, "user_id": 726300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZWH6H.png?s=128&g=1", "display_name": "Luc Danton", "link": "https://stackoverflow.com/users/726300/luc-danton"}, "reply_to_user": {"reputation": 1163, "user_id": 5599569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQy3U.jpg?s=128&g=1", "display_name": "Victor Dyachenko", "link": "https://stackoverflow.com/users/5599569/victor-dyachenko"}, "edited": false, "score": 0, "creation_date": 1470201118, "post_id": 38617484, "comment_id": 64845191, "body": "@VictorDyachenko Indeed. <code>std::get</code> is similarly overloaded."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 5, "last_activity_date": 1469635621, "last_edit_date": 1469635621, "creation_date": 1469633713, "answer_id": 38617484, "question_id": 38617309, "link": "https://stackoverflow.com/questions/38617309/implicit-move-the-value-contained-in-stdoptional-when-return/38617484#38617484", "title": "Implicit move the value contained in std::optional when return", "body": "<p><strong>No</strong>. The criteria for implicitly moving is in [class.copy]:</p>\n\n<blockquote>\n  <p>When [...], or when the <em>expression</em> in a <code>return</code> statement is a (possibly\n  parenthesized) <em>id-expression</em> that names an object with automatic storage duration declared in the body or <em>parameter-declaration-clause</em> of the innermost enclosing function or <em>lambda-expression</em>, overload resolution to\n  select the constructor for the copy is first performed as if the object were designated by an rvalue.</p>\n</blockquote>\n\n<p><code>*res</code> is not an <em>id-expression</em>, so this rule does not apply. If you want to move the underlying string out, you have to do it explicitly:</p>\n\n<pre><code>return std::move(*res);\nreturn *std::move(res);\nreturn std::move(res).value(); // equivalent and possibly more legible\n</code></pre>\n\n<hr />\n\n<p>The rules are intended to try the more efficient option only when it's definitely safe to do so. If you're returning an automatic storage duration variable, then it's perfectly safe to move it since nothing else will ever reference that variable again. </p>\n\n<p>But if you're returning <code>*res</code>, that's not necessarily safe to move from. What if that gave you a reference into some external object which will outlive this function? We would be silently moving-from state that we expect to still be valid! In this case, it is up to you as the user to state that you want it moved. </p>\n"}], "owner": {"reputation": 1163, "user_id": 5599569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQy3U.jpg?s=128&g=1", "display_name": "Victor Dyachenko", "link": "https://stackoverflow.com/users/5599569/victor-dyachenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1013, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469635621, "creation_date": 1469633293, "last_edit_date": 1469633555, "question_id": 38617309, "link": "https://stackoverflow.com/questions/38617309/implicit-move-the-value-contained-in-stdoptional-when-return", "title": "Implicit move the value contained in std::optional when return", "body": "<p>Since C++11 we have move semantics. In the example below the move-constructor will be used (or copy elision), instead of the copy-constructor as in C++98, without any additional efforts.</p>\n\n<pre><code>std::string f()\n{\n    std::string res;\n    ...\n    return res; // &lt;- move is used here instead of copy\n}\n</code></pre>\n\n<p>But what about this case?</p>\n\n<pre><code>std::string f()\n{\n    std::optional&lt;std::string&gt; res;\n    ...\n    return *res; // &lt;-- will the std::string value be moved??\n}\n</code></pre>\n\n<p>Or one have to write something like this?</p>\n\n<pre><code>std::string f()\n{\n    std::optional&lt;std::string&gt; res;\n    ...\n    return *std::move(res);\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qtextstream"], "comments": [{"owner": {"reputation": 105, "user_id": 3945388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ea88f2f47576c1bf853f6f80ade22ac?s=128&d=identicon&r=PG&f=1", "display_name": "Bernhard Heinrich", "link": "https://stackoverflow.com/users/3945388/bernhard-heinrich"}, "edited": false, "score": 0, "creation_date": 1469689426, "post_id": 38617289, "comment_id": 64642656, "body": "You could subclass QTextStream and overrload the operator&gt;&gt;(int)."}], "answers": [{"tags": [], "owner": {"reputation": 7319, "user_id": 2667360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKqx3.png?s=128&g=1", "display_name": "Benjamin T", "link": "https://stackoverflow.com/users/2667360/benjamin-t"}, "is_accepted": true, "score": 2, "last_activity_date": 1469635054, "creation_date": 1469635054, "answer_id": 38617940, "question_id": 38617289, "link": "https://stackoverflow.com/questions/38617289/qt-qtextstream-inputting-a-char-string-into-an-int/38617940#38617940", "title": "Qt, QTextStream - inputting a char/string into an int", "body": "<p>You cannot change this behavior, but you can check <code>QTextStream::status()</code> for <code>QTextStream::ReadCorruptData</code>.</p>\n\n<pre><code>int num;\n\nQTextStream input(stdin);\ninput &gt;&gt; num;\n\nif (input.status() == QTextStream::ReadCorruptData)\n    num = -1;\n\nQTextStream(stdout) &lt;&lt; num;\n</code></pre>\n"}], "owner": {"reputation": 941, "user_id": 3605689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/683bacbb1ecb282b5a3c36c4fac01e32?s=128&d=identicon&r=PG&f=1", "display_name": "user129186", "link": "https://stackoverflow.com/users/3605689/user129186"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 1, "accepted_answer_id": 38617940, "answer_count": 1, "score": 0, "last_activity_date": 1469635054, "creation_date": 1469633229, "question_id": 38617289, "link": "https://stackoverflow.com/questions/38617289/qt-qtextstream-inputting-a-char-string-into-an-int", "title": "Qt, QTextStream - inputting a char/string into an int", "body": "<p>Consider the following program:</p>\n\n<pre><code>int num;\n\nQTextStream(stdin) &gt;&gt; num;\n\nQTextStream(stdout) &lt;&lt; num;\n</code></pre>\n\n<p>Like this, if I am to incorrectly input a string, or a char, into the variable <code>num</code>, its value becomes 0 by default.</p>\n\n<p>How can I change the behavior of <code>QTextStream</code>, so that it stores a different value for incorrect inputs? For example, -1?</p>\n"}, {"tags": ["c++", "static"], "comments": [{"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 3, "creation_date": 1469632242, "post_id": 38616811, "comment_id": 64619736, "body": "Have you considered non-type template parameter?"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1469634112, "post_id": 38616993, "comment_id": 64621058, "body": "Yep, textbook usage."}], "tags": [], "owner": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "is_accepted": false, "score": 2, "last_activity_date": 1469632462, "last_edit_date": 1469632462, "creation_date": 1469632390, "answer_id": 38616993, "question_id": 38616811, "link": "https://stackoverflow.com/questions/38616811/how-to-use-different-static-global-variables-in-different-objects/38616993#38616993", "title": "How to use different static (global) variables in different objects?", "body": "<pre><code>template&lt;size_t N&gt;\nstruct TreeNode {\n    ...\n    TreeNode&lt;N&gt;* children[N];\n    ...\n};\n</code></pre>\n\n<p>Used as TreeNode&lt;2> or Treenode&lt;7></p>\n"}], "owner": {"reputation": 345, "user_id": 2248673, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/cab3436d2ee49445cc3c8a4566988967?s=128&d=identicon&r=PG", "display_name": "kke", "link": "https://stackoverflow.com/users/2248673/kke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1469632462, "creation_date": 1469631962, "question_id": 38616811, "link": "https://stackoverflow.com/questions/38616811/how-to-use-different-static-global-variables-in-different-objects", "title": "How to use different static (global) variables in different objects?", "body": "<p>for now i have a class which represents a tree. Every node within this tree has exactly the same number of children, lets call it N. I managed this with a static variable for the class, which has the value of N, so this is basically a global variable. </p>\n\n<p>My problem now is that i want to construct a different tree with the same class, but now the value of N should be different. So let's say i want to create the first tree with N=4 and the second with N=2. To save memory i only want to store those values of N once for the tree and not in every node of the tree. Is there a simple conceptual way to achieve this? </p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["java", "c++", "windows", "bitmap", "java-native-interface"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1469632069, "post_id": 38616715, "comment_id": 64619605, "body": "<code>biBitCount==32</code> - &quot;Each DWORD in the bitmap array represents the relative intensities of blue, green, and red for a pixel. The value for blue is in the least significant 8 bits, followed by 8 bits each for green and red. The high byte in each DWORD is not used. &quot; source: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd183376(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 302, "user_id": 5603750, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f0abc896d2a6e5cfe8ba3e8c804b05c6?s=128&d=identicon&r=PG&f=1", "display_name": "MircoProgram", "link": "https://stackoverflow.com/users/5603750/mircoprogram"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1469632155, "post_id": 38616715, "comment_id": 64619674, "body": "I have read that article before, I just don&#39;t seem to comprehend where the alpha channel comes into play. Am I doing it right but just need to do some with <code>bmiColors</code> in the bitmap header?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1469632895, "post_id": 38616715, "comment_id": 64620198, "body": "I don&#39;t think there is an alpha channel in that format just an expanded RGB into 4 bytes."}, {"owner": {"reputation": 302, "user_id": 5603750, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f0abc896d2a6e5cfe8ba3e8c804b05c6?s=128&d=identicon&r=PG&f=1", "display_name": "MircoProgram", "link": "https://stackoverflow.com/users/5603750/mircoprogram"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1469632965, "post_id": 38616715, "comment_id": 64620244, "body": "So it doesn&#39;t matter if i use 24 or 32 bit images because the transparency is not captured?"}], "owner": {"reputation": 302, "user_id": 5603750, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f0abc896d2a6e5cfe8ba3e8c804b05c6?s=128&d=identicon&r=PG&f=1", "display_name": "MircoProgram", "link": "https://stackoverflow.com/users/5603750/mircoprogram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 634, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1469631757, "creation_date": 1469631757, "question_id": 38616715, "link": "https://stackoverflow.com/questions/38616715/c-winapi-how-are-bi-rgb-32-bit-pixels-stored", "title": "c++ WINAPI How are BI_RGB 32 bit pixels stored?", "body": "<p>I'm sending a bitmap from C++ to Java over JNI when i send a 24 bit bitmap the code works nicely but switching over to 32 bit displays the pixels not 100% correctly.</p>\n\n<p>The bitmap header info contains:</p>\n\n<pre><code>BITMAPINFO bmi = { 0 };\nbmi.bmiHeader.biBitCount = 32;//24 works\nbmi.bmiHeader.biCompression = BI_RGB;\n</code></pre>\n\n<p>I calculate the stride as following:</p>\n\n<pre><code>((width * bmi.bmiHeader.biBitCount + 31) / 32) * 4\n</code></pre>\n\n<p>Then on the Java side I do</p>\n\n<pre><code>final byte[] bytes = getJNIImageBytes();\nfinal BufferedImage image = new BufferedImage(size.width, size.height, BufferedImage.TYPE_4BYTE_ABGR);\nimage.setData(Raster.createInterleavedRaster(new DataBufferByte(bytes, bytes.length), size.width,\n                size.height, ((size.width * 32 + 31) / 32) * 4, 4, new int[]{2, 1, 0, 3}, null));//2,1,0,3 = BGRA to RGBA\n</code></pre>\n\n<p>pixels like <code>RGB[217, 20, 95]</code> show correctly but pixels expected to be <code>RGB[113, 167, 199]</code> show as <code>RGB[240, 240, 240]</code></p>\n\n<p>Below is an image to explain my problem better:</p>\n\n<p><a href=\"https://i.stack.imgur.com/yQxAh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yQxAh.png\" alt=\"problem\"></a></p>\n"}, {"tags": ["java", "c++", "windows", "winapi", "filesystems"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1469631792, "post_id": 38616527, "comment_id": 64619413, "body": "OT on So. BTW take a look at <a href=\"https://lwn.net/Articles/604686/\" rel=\"nofollow noreferrer\">this interesting article</a>"}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1469631850, "post_id": 38616527, "comment_id": 64619448, "body": "@LPs unforutnatelly, that&#39;s linux-only."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 1, "creation_date": 1469631958, "post_id": 38616527, "comment_id": 64619530, "body": "@Shark so <a href=\"https://msdn.microsoft.com/en-us/library/ch2s8yd7(v=vs.90).aspx\" rel=\"nofollow noreferrer\">this one</a> can help.."}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 3, "creation_date": 1469632049, "post_id": 38616527, "comment_id": 64619595, "body": "@LPs indeed, it looks like you debunked the OPs &quot;I searched everywhere&quot; statement :D"}, {"owner": {"reputation": 772, "user_id": 1673705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe6098dc122d57b2c7b1aa8f074723a?s=128&d=identicon&r=PG", "display_name": "barneypitt", "link": "https://stackoverflow.com/users/1673705/barneypitt"}, "edited": false, "score": 0, "creation_date": 1469633667, "post_id": 38616527, "comment_id": 64620735, "body": "Downvoted why? And Shark&#39;s second &quot;solution&quot; (which I had found) is C#, not a viable solution, since as was clearly stated I need to be able to interop from Java."}, {"owner": {"reputation": 43402, "user_id": 47961, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EyOv8.jpg?s=128&g=1", "display_name": "Eugene Mayevski &#39;Callback", "link": "https://stackoverflow.com/users/47961/eugene-mayevski-callback"}, "edited": false, "score": 0, "creation_date": 1469638878, "post_id": 38616527, "comment_id": 64623930, "body": "A kernel-mode filesystem filter is your friend. As you can&#39;t write one in Java, you have to either create one in C, or use our CallbackFilter that includes a pre-created driver for your use."}], "answers": [{"tags": [], "owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "is_accepted": false, "score": 0, "last_activity_date": 1469636814, "last_edit_date": 1469636814, "creation_date": 1469631838, "answer_id": 38616758, "question_id": 38616527, "link": "https://stackoverflow.com/questions/38616527/api-to-receive-notifications-for-all-file-modifications-on-an-entire-windows-f/38616758#38616758", "title": "API to receive notifications for *all* file modifications on an entire Windows filesystem?", "body": "<p>Call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762120.aspx\" rel=\"nofollow\">SHChangeNotifyRegister</a> with the last parameter set to NULL.</p>\n"}, {"comments": [{"owner": {"reputation": 772, "user_id": 1673705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe6098dc122d57b2c7b1aa8f074723a?s=128&d=identicon&r=PG", "display_name": "barneypitt", "link": "https://stackoverflow.com/users/1673705/barneypitt"}, "edited": false, "score": 0, "creation_date": 1469635251, "post_id": 38616807, "comment_id": 64621825, "body": "Hm, I tried &quot;listener&quot;, &quot;observer&quot; and &quot;monitor&quot;, not watcher!"}, {"owner": {"reputation": 772, "user_id": 1673705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe6098dc122d57b2c7b1aa8f074723a?s=128&d=identicon&r=PG", "display_name": "barneypitt", "link": "https://stackoverflow.com/users/1673705/barneypitt"}, "edited": false, "score": 0, "creation_date": 1469635551, "post_id": 38616807, "comment_id": 64622012, "body": "That API method doesn&#39;t actually monitor file changes, just directories. To actually determine what file had changed, I would need to maintain a map of every single file&#39;s last modified timestamp in memory, and compare each file in the directory&#39;s timestamp to the one in memory, unless I have missed something? Not really practical, I fear:("}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 772, "user_id": 1673705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe6098dc122d57b2c7b1aa8f074723a?s=128&d=identicon&r=PG", "display_name": "barneypitt", "link": "https://stackoverflow.com/users/1673705/barneypitt"}, "edited": false, "score": 1, "creation_date": 1469644786, "post_id": 38616807, "comment_id": 64627318, "body": "@barneypitt: you missed this statement in the <code>FindFirstChangeNotification()</code> documentation (and which Martin&#39;s answer above also says): &quot;<i>This function does not indicate the change that satisfied the wait condition. <b>To retrieve information about the specific change as part of the notification, use the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365465.aspx\" rel=\"nofollow noreferrer\"><code>ReadDirectoryChangesW</code></a> function</b>.</i>&quot; That function does give you actual filenames of added/removed/renamed/modified files."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1469644865, "last_edit_date": 1469644865, "creation_date": 1469631955, "answer_id": 38616807, "question_id": 38616527, "link": "https://stackoverflow.com/questions/38616527/api-to-receive-notifications-for-all-file-modifications-on-an-entire-windows-f/38616807#38616807", "title": "API to receive notifications for *all* file modifications on an entire Windows filesystem?", "body": "<p>You need to use <code>FindFirstChangeNotification</code>.  Specify the root of the volume, and specify that you want to be notified for changes to the subdirectory too.  Then wait on the notification handle, and read the changes with <code>ReadDirectoryChanges</code>.</p>\n\n<p>See this example from Microsoft:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365261(v=vs.85).aspx\" rel=\"nofollow\">Obtaining Directory Change Notifications</a></p>\n\n<p>(Note, I found that with 10 seconds of searching for \"windows file watcher\" - you may find some of the other links there helpful if you want a non C or C++ solution.)</p>\n"}], "owner": {"reputation": 772, "user_id": 1673705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe6098dc122d57b2c7b1aa8f074723a?s=128&d=identicon&r=PG", "display_name": "barneypitt", "link": "https://stackoverflow.com/users/1673705/barneypitt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1469634794, "answer_count": 2, "score": -2, "last_activity_date": 1469644865, "creation_date": 1469631346, "last_edit_date": 1469634612, "question_id": 38616527, "link": "https://stackoverflow.com/questions/38616527/api-to-receive-notifications-for-all-file-modifications-on-an-entire-windows-f", "closed_reason": "Not suitable for this site", "title": "API to receive notifications for *all* file modifications on an entire Windows filesystem?", "body": "<p>I've searched StackOverflow and elsewhere and haven't found anything appropriate for my needs. </p>\n\n<p>I don't want a polling solution, it needs to be event driven and to receive every such event in (near) real-time. The only data I need from the event object is the path/name of the modified (or created, or deleted) file.</p>\n\n<p>Please note, I don't want to receive events for a specific file or directory, I want to receive events for an entire volume (eg \"C:\" - not required to support network drives!).</p>\n\n<p>Ideally I'm looking for a Java API, but I suspect none exists, so I'm happy to write wrappers to C/C++. </p>\n\n<p>NB, if this is possible from just the Windows command prompt or WMI that would be great too!</p>\n"}, {"tags": ["c++", "user-interface", "controller", "logic", "reusability"], "comments": [{"owner": {"reputation": 5460, "user_id": 73657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gzkFl.png?s=128&g=1", "display_name": "Dutow", "link": "https://stackoverflow.com/users/73657/dutow"}, "edited": false, "score": 1, "creation_date": 1469631314, "post_id": 38616477, "comment_id": 64619062, "body": "If you have to ask this question, I doubt the most important question is efficiency of the hardware."}, {"owner": {"reputation": 273, "user_id": 1685509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gzcAd.jpg?s=128&g=1", "display_name": "user16", "link": "https://stackoverflow.com/users/1685509/user16"}, "edited": false, "score": 0, "creation_date": 1469631449, "post_id": 38616477, "comment_id": 64619180, "body": "Have a look at platform independent frameworks/toolkit that will assist you with this task. See <a href=\"https://www.qt.io/\" rel=\"nofollow noreferrer\">qt.io</a> for example.  However, you question just scratches the surface of one of the most complicated topics in today&#39;s application development. There is no simple answer."}, {"owner": {"reputation": 77, "user_id": 2515445, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fcefa9a5dbb206bf91324be4790c3128?s=128&d=identicon&r=PG", "display_name": "n3o", "link": "https://stackoverflow.com/users/2515445/n3o"}, "reply_to_user": {"reputation": 5460, "user_id": 73657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gzkFl.png?s=128&g=1", "display_name": "Dutow", "link": "https://stackoverflow.com/users/73657/dutow"}, "edited": false, "score": 0, "creation_date": 1469631602, "post_id": 38616477, "comment_id": 64619277, "body": "@Dutow: why I can&#39;obtain efficiency and portability at the same time?"}, {"owner": {"reputation": 273, "user_id": 1685509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gzcAd.jpg?s=128&g=1", "display_name": "user16", "link": "https://stackoverflow.com/users/1685509/user16"}, "edited": false, "score": 0, "creation_date": 1469631777, "post_id": 38616477, "comment_id": 64619402, "body": "@n3o you <b>can</b> write efficient and portable applications. <b>BUT</b> this takes a very long time and costs usually a lot of money."}, {"owner": {"reputation": 77, "user_id": 2515445, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fcefa9a5dbb206bf91324be4790c3128?s=128&d=identicon&r=PG", "display_name": "n3o", "link": "https://stackoverflow.com/users/2515445/n3o"}, "reply_to_user": {"reputation": 273, "user_id": 1685509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gzcAd.jpg?s=128&g=1", "display_name": "user16", "link": "https://stackoverflow.com/users/1685509/user16"}, "edited": false, "score": 0, "creation_date": 1469632865, "post_id": 38616477, "comment_id": 64620172, "body": "@user16 I want find a way so that gui executable and logic executable can communicate and that is valid for each operating system."}, {"owner": {"reputation": 273, "user_id": 1685509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gzcAd.jpg?s=128&g=1", "display_name": "user16", "link": "https://stackoverflow.com/users/1685509/user16"}, "edited": false, "score": 0, "creation_date": 1469633165, "post_id": 38616477, "comment_id": 64620362, "body": "@n3o dbus might be a friend :-) <a href=\"https://www.freedesktop.org/wiki/Software/dbus/\" rel=\"nofollow noreferrer\">freedesktop.org/wiki/Software/dbus</a>"}, {"owner": {"reputation": 77, "user_id": 2515445, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fcefa9a5dbb206bf91324be4790c3128?s=128&d=identicon&r=PG", "display_name": "n3o", "link": "https://stackoverflow.com/users/2515445/n3o"}, "reply_to_user": {"reputation": 273, "user_id": 1685509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gzcAd.jpg?s=128&g=1", "display_name": "user16", "link": "https://stackoverflow.com/users/1685509/user16"}, "edited": false, "score": 0, "creation_date": 1469633738, "post_id": 38616477, "comment_id": 64620792, "body": "@user16 here <a href=\"http://stackoverflow.com/questions/14750886/transferring-data-between-executables\" title=\"transferring data between executables\">stackoverflow.com/questions/14750886/&hellip;</a> I have read of pipes, window messages and shared memory, memory mapped files but Iwant only know if pipes and shared memory are valid for all platform..."}], "answers": [{"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1469632498, "post_id": 38616636, "comment_id": 64619909, "body": "You <i>could</i> make the GUI and the business logic separate processes, and then you &quot;just&quot; have to find a portable way to do cross -process communication."}, {"owner": {"reputation": 669, "user_id": 2581119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbdbeb2cb8aa3c89132fe48d744c91d4?s=128&d=identicon&r=PG", "display_name": "Lehu", "link": "https://stackoverflow.com/users/2581119/lehu"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1469632820, "post_id": 38616636, "comment_id": 64620137, "body": "@MartinBonner You are of course right. I just thought that separating as exec and shared lib is &quot;a bit&quot; simpler to do in multiplatform way :) ."}, {"owner": {"reputation": 77, "user_id": 2515445, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fcefa9a5dbb206bf91324be4790c3128?s=128&d=identicon&r=PG", "display_name": "n3o", "link": "https://stackoverflow.com/users/2515445/n3o"}, "edited": false, "score": 0, "creation_date": 1469634394, "post_id": 38616636, "comment_id": 64621254, "body": "I want a way so that the communication between processes can be platform independent in programming time and valid for all, I don&#39;t want framework or virtual machine"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1469635029, "post_id": 38616636, "comment_id": 64621687, "body": "The dynamic library must be OS dependent, but also must be graphics processor dependent, depending on the requested graphics capabilities."}, {"owner": {"reputation": 669, "user_id": 2581119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbdbeb2cb8aa3c89132fe48d744c91d4?s=128&d=identicon&r=PG", "display_name": "Lehu", "link": "https://stackoverflow.com/users/2581119/lehu"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1469636254, "post_id": 38616636, "comment_id": 64622452, "body": "@ThomasMatthews It must and it doesn&#39;t have to. It must be compiled for particular OS, but code of functions not necessairly has to be different (if you use proper libraries)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1469652116, "post_id": 38616636, "comment_id": 64631191, "body": "@Lehu: How do you handle the cases of monochrome graphics boards vs. color?  How about color values per pixel?  Even pixel density and aspect ratios?  Some graphics cards can handle (Z-Access) layering and bitmap operations, while others don&#39;t."}, {"owner": {"reputation": 669, "user_id": 2581119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbdbeb2cb8aa3c89132fe48d744c91d4?s=128&d=identicon&r=PG", "display_name": "Lehu", "link": "https://stackoverflow.com/users/2581119/lehu"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1469657718, "post_id": 38616636, "comment_id": 64633783, "body": "@ThomasMatthews I was thinking rather about OS portability than hardware. But it is always possible (though sometimes very tedious and complicated) to write code which checks for available features and compiles/runs proper parts. Am I mistaken? I&#39;m always ready to learn :) ."}, {"owner": {"reputation": 77, "user_id": 2515445, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fcefa9a5dbb206bf91324be4790c3128?s=128&d=identicon&r=PG", "display_name": "n3o", "link": "https://stackoverflow.com/users/2515445/n3o"}, "edited": false, "score": 0, "creation_date": 1469962800, "post_id": 38616636, "comment_id": 64745718, "body": "for the gui components I find them in other ways or implements GUi application with other IDEs, but the most important thing is find a way that is possibly integrated in C++ language and that is usable in all platform, where I can send and receive data from GUI; a thing that is similar at view class in java (with spring for example but also without it, simple implementing model - view controller pattern)...some ideas? pipes in C++ are valid in all the operating system? the shared memory I have read that can give problems changing the architecture from x86 to x64..."}], "tags": [], "owner": {"reputation": 669, "user_id": 2581119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbdbeb2cb8aa3c89132fe48d744c91d4?s=128&d=identicon&r=PG", "display_name": "Lehu", "link": "https://stackoverflow.com/users/2581119/lehu"}, "is_accepted": false, "score": 0, "last_activity_date": 1469631573, "creation_date": 1469631573, "answer_id": 38616636, "question_id": 38616477, "link": "https://stackoverflow.com/questions/38616477/how-to-separate-gui-from-logic-in-c-pattern-and-library-necessary-to-comunica/38616636#38616636", "title": "How to separate gui from logic in C++ (pattern and library necessary to comunicate 2 executable file)", "body": "<p>You have to use some multiplatform GUI library (Qt, wxWidgets and others). And if you really, really want to separate binary file for GUI and logic you'd have to create dynamic library (dll, so, depending on OS).</p>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 2515445, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fcefa9a5dbb206bf91324be4790c3128?s=128&d=identicon&r=PG", "display_name": "n3o", "link": "https://stackoverflow.com/users/2515445/n3o"}, "edited": false, "score": 0, "creation_date": 1470131948, "post_id": 38683274, "comment_id": 64810795, "body": "Nobody can answer me?"}], "tags": [], "owner": {"reputation": 77, "user_id": 2515445, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fcefa9a5dbb206bf91324be4790c3128?s=128&d=identicon&r=PG", "display_name": "n3o", "link": "https://stackoverflow.com/users/2515445/n3o"}, "is_accepted": false, "score": 0, "last_activity_date": 1469962948, "creation_date": 1469962948, "answer_id": 38683274, "question_id": 38616477, "link": "https://stackoverflow.com/questions/38616477/how-to-separate-gui-from-logic-in-c-pattern-and-library-necessary-to-comunica/38683274#38683274", "title": "How to separate gui from logic in C++ (pattern and library necessary to comunicate 2 executable file)", "body": "<p>for the gui components I find them in other ways or implements GUi application with other IDEs, but the most important thing is find a way that is possibly integrated in C++ language and that is usable in all platform, where I can send and receive data from GUI; a thing that is similar at view class in java (with spring for example but also without it, simple implementing model - view controller pattern)...some ideas? pipes in C++ are valid in all the operating system? the shared memory I have read that can give problems changing the architecture from x86 to x64...</p>\n"}], "owner": {"reputation": 77, "user_id": 2515445, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fcefa9a5dbb206bf91324be4790c3128?s=128&d=identicon&r=PG", "display_name": "n3o", "link": "https://stackoverflow.com/users/2515445/n3o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 869, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1509367954, "creation_date": 1469631202, "last_edit_date": 1469634063, "question_id": 38616477, "link": "https://stackoverflow.com/questions/38616477/how-to-separate-gui-from-logic-in-c-pattern-and-library-necessary-to-comunica", "title": "How to separate gui from logic in C++ (pattern and library necessary to comunicate 2 executable file)", "body": "<p>I want make a program in c++ but I want also reuse my code to compile it in multiple operating system and architecture reducing the most possible the changes at code. So I must create a gui executable and a logic executable so that:</p>\n\n<ul>\n<li>for executable logic (start from controller if compared to mvc) is sufficient set architecture set istructions (x86, x64 or arm) and operating system (ios, android, Windows, Linux, ...), then recompile my code without make syntax changes;</li>\n<li>executable gui that is different at the changing to each operating system (Windows, android, ios, ...),to each architecture set (android and linux are available in arm, x86 and x64) and to each various display size under 15\".</li>\n</ul>\n\n<p>To make this I must find a way to allow at the gui executable and at the logic executable to communicate between they...how can I make this? I must use some library? there is a suite of library or library already included that are available for each combination of operating system, language and architecture set?</p>\n\n<p>The goal is reuse the most possible the code of logic and make different code of gui for each combination of operating system and display size (if under 15 inches).</p>\n\n<p>The IDE that I use is Visual Studio 2015 and I don't want use solutions such as .NET framework or virtual machine because I want maximize the use of efficiency of the hardware.</p>\n\n<p>Hope that request is simple to understand.</p>\n"}, {"tags": ["c++", "templates", "template-meta-programming", "template-specialization", "idioms"], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1469633828, "post_id": 38617200, "comment_id": 64620855, "body": "@einpoklum Oh are the <code>N_k</code>s not contiguous?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1469633917, "post_id": 38617200, "comment_id": 64620929, "body": "Nope, I never implied they were."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1469644168, "post_id": 38617200, "comment_id": 64626965, "body": "Actually your indexer should probably be faster than an unordered map unless k is large (assuming the compiler is smart enough). +1."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 6, "last_activity_date": 1506205826, "last_edit_date": 1506205826, "creation_date": 1469632931, "answer_id": 38617200, "question_id": 38616412, "link": "https://stackoverflow.com/questions/38616412/avoiding-code-duplication-for-runtime-to-compile-time-numeric-parameter-translat/38617200#38617200", "title": "Avoiding code duplication for runtime-to-compile-time numeric parameter translation", "body": "<p>You could make a function pointer table:</p>\n\n<pre><code>using F = void(*)();\n\ntemplate &lt;class T, class &gt;\nstruct Table;\n\ntemplate &lt;class T, size_t... Is&gt;\nstruct Table&lt;T, std::index_sequence&lt;Is...&gt; &gt; {\n    static constexpr F fns[] = {\n        foo&lt;T, Is&gt;...\n    };\n};\n\ntemplate &lt;class T, size_t... Is&gt;\nconstexpr F Table&lt;T, std::index_sequence&lt;Is...&gt; &gt;::fns[sizeof...(Is)];\n</code></pre>\n\n<p>And then just invoke the one you want:</p>\n\n<pre><code>template &lt;class T, size_t N&gt;\nstruct MakeTable : Table&lt;T, std::make_index_sequence&lt;N&gt;&gt; { };\n\ntemplate &lt;typename T&gt;\nvoid foo(unsigned n) {\n    MakeTable&lt;T, MaxN&gt;::fns[n]();\n}\n</code></pre>\n\n<hr />\n\n<p>If the <code>N_k</code>s aren't contiguous, then we can use a lambda for inline parameter unpacking:</p>\n\n<pre><code> template &lt;class T&gt;\n void foo(unsigned n) {\n     using seq = std::index_sequence&lt;N_1, N_2, ..., N_k&gt;;\n     indexer(seq)([n](auto i){\n         if (n == i) {\n             f&lt;T, i&gt;();\n         }\n     });\n}\n</code></pre>\n\n<hr />\n\n<p>If the above is too slow, then I guess just manually build a <code>std::unordered_map&lt;unsigned, void(*)()&gt;</code> or something. </p>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1469633697, "post_id": 38617220, "comment_id": 64620750, "body": "Suppose N_k = 10000000."}, {"owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1469634423, "post_id": 38617220, "comment_id": 64621274, "body": "Yeah, works for that too (with appropriate <code>-ftemplate-depth=10000000</code> switch), although compiles <i>very</i> slowly"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1469644694, "post_id": 38617220, "comment_id": 64627254, "body": "There&#39;s an <code>at()</code> for <code>unordered_map</code> too, so you could simplify the call to just <code>fmap.at(actual_index)()</code> (throws <code>out_of_range</code> instead of <code>runtime_error</code>)"}], "tags": [], "owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "is_accepted": false, "score": 3, "last_activity_date": 1469635715, "last_edit_date": 1469635715, "creation_date": 1469633003, "answer_id": 38617220, "question_id": 38616412, "link": "https://stackoverflow.com/questions/38616412/avoiding-code-duplication-for-runtime-to-compile-time-numeric-parameter-translat/38617220#38617220", "title": "Avoiding code duplication for runtime-to-compile-time numeric parameter translation", "body": "<p>In these kind of situations I like to build a static table of function pointers, with a dynamic parameter deciding which one to dispatch to. Below is an implementation that achieves this, in the function <code>foo_dynamic</code>. To this function, you specify the maximum value of <code>N</code> you'd like to support, and it builds a static table of function pointers using some recursive templates. You then dereference into this table with your dynamic parameter.</p>\n\n<pre><code>using ftype = void (*)();\n\ntemplate &lt;typename T, unsigned N&gt; void foo()\n{\n    std::cout &lt;&lt; N &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T, unsigned max&gt;\nstruct TablePopulator\n{\n    static void populateFTable(ftype* table)\n    {\n        table[max] = foo&lt;T,max&gt;;\n        TablePopulator&lt;T,max-1&gt;::populateFTable(table);\n    }\n};\n\ntemplate &lt;typename T&gt;\nstruct TablePopulator&lt;T, 0&gt;\n{\n    static void populateFTable(ftype* table)\n    {\n        table[0] = foo&lt;T,0&gt;;\n    }\n};\n\ntemplate&lt;typename T, unsigned max_N&gt;\nstd::array&lt;ftype, max_N&gt;&amp; initTable()\n{\n    static std::array&lt;ftype, max_N&gt; table;\n    TablePopulator&lt;T, max_N-1&gt;::populateFTable(table.data());\n    return table;\n}\n\ntemplate&lt;typename T, unsigned max_N&gt;\nvoid foo_dynamic(unsigned actualN)\n{\n    static auto ftable = initTable&lt;T, max_N&gt;();\n    if(actualN &gt;= max_N)\n        throw std::runtime_error(\"Max param exceeded\");\n\n    ftable[actualN]();\n}\n\n\nint main()\n{\n    foo_dynamic&lt;int, 10&gt;(1);\n    foo_dynamic&lt;int, 10&gt;(5);\n\n   return 0;\n}\n</code></pre>\n\n<p><strong>EDIT:</strong> Given the constraints in the question edit, here's an approach where valid indices are specified manually, which uses an <code>unordered_map</code> instead of an array:</p>\n\n<pre><code>using ftype = void (*)();\n\ntemplate &lt;typename T, unsigned N&gt; void foo()\n{\n    std::cout &lt;&lt; N &lt;&lt; std::endl;\n}\n\ntemplate&lt;typename T, size_t ... Indices&gt;\nvoid foo_dynamic_indices(size_t actual_index)\n{\n    static std::unordered_map&lt;size_t, ftype&gt; fmap = {{Indices, foo&lt;T,Indices&gt;}...};\n    auto fIt = fmap.find(actual_index);\n    if(fIt == fmap.end())\n        throw std::runtime_error(\"Index not found\");\n\n    fIt-&gt;second();\n}\n\nint main()\n{\n\n    foo_dynamic_indices&lt;int, 0, 3, 400, 1021, 10000000&gt;(10000000);\n    foo_dynamic_indices&lt;int, 0, 3, 400, 1021, 10000000&gt;(4); //Exception\n\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1506205826, "creation_date": 1469631040, "last_edit_date": 1469633892, "question_id": 38616412, "link": "https://stackoverflow.com/questions/38616412/avoiding-code-duplication-for-runtime-to-compile-time-numeric-parameter-translat", "title": "Avoiding code duplication for runtime-to-compile-time numeric parameter translation", "body": "<p>Suppose we have function such as</p>\n\n<pre><code>template &lt;typename T, unsigned N&gt; void foo();\n</code></pre>\n\n<p>and for simplicity assume that we know that only (constant) values <code>N_1</code>, <code>N_2</code> ... <code>N_k</code> are valid for <code>N</code>.</p>\n\n<p>Now, suppose I want to make that compile-time parameter a run-time one, using <code>foo()</code> as a black-box, i.e. implement:</p>\n\n<pre><code>template &lt;typename T&gt; void foo(unsigned n);\n</code></pre>\n\n<p>by making <code>foo&lt;,&gt;()</code> calls. How should I go about doing that? Obviously, I can write:</p>\n\n<pre><code>template &lt;typename T&gt; void foo(unsigned n) {\n    switch(n) {\n    case N_1 :  foo&lt;T, N_1&gt;(); break;\n    case N_2 :  foo&lt;T, N_2&gt;(); break;\n    // etc. etc.\n    case N_k :  foo&lt;T, N_k&gt;(); break;\n    }\n }\n</code></pre>\n\n<p>... but this makes me feel all dirty. I could use a MAP() meta-macro to generate these k lines, I suppose; but can I do anything better and less-macroish to achieve the same? Is it possible to write something like the above that's <em>general</em>, and works for every variadic template and a fixed sequence of constant values?</p>\n\n<p><strong>Notes:</strong></p>\n\n<ul>\n<li>C++11/14/17-specific suggestions are obviously welcome.</li>\n<li>The N's are not necessarily contiguous, nor small, nor sorted. e.g. suppose N_2 = 123456789 and N_5 = 1.</li>\n</ul>\n"}, {"tags": ["c++", "oop", "object"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1469631196, "post_id": 38616376, "comment_id": 64618970, "body": "Have something like a <code>bool toBeDeleted() const;</code> in your <code>Child</code> class."}, {"owner": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "edited": false, "score": 0, "creation_date": 1469631212, "post_id": 38616376, "comment_id": 64618977, "body": "You need to clarify what this <code>parent</code> is. Is it a member variable pointer to some object, which aggregates <code>Child</code> instances? Or are you referring to the base class instance?"}, {"owner": {"reputation": 1038, "user_id": 4056981, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ec96347bc0f87126ab0c055e797da74d?s=128&d=identicon&r=PG&f=1", "display_name": "MaxHeap", "link": "https://stackoverflow.com/users/4056981/maxheap"}, "edited": false, "score": 1, "creation_date": 1469631439, "post_id": 38616376, "comment_id": 64619169, "body": "Changed &#39;parent&#39; to &#39;owner&#39; for the clarification. No inheritance is involved here."}, {"owner": {"reputation": 3159, "user_id": 4566726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703bf229fd5caa423e3681efd566dcb7?s=128&d=identicon&r=PG", "display_name": "H. Guijt", "link": "https://stackoverflow.com/users/4566726/h-guijt"}, "edited": false, "score": 1, "creation_date": 1469631662, "post_id": 38616376, "comment_id": 64619329, "body": "You can ask an owner object to delete yourself, which is legal but tricky business since the object will be blown out from under you. After the deletion no further references should be made to any member variable or virtual function in the deleted object. The simplified version of your code doesn&#39;t do this, and is therefore correct."}], "answers": [{"tags": [], "owner": {"reputation": 273, "user_id": 1685509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gzcAd.jpg?s=128&g=1", "display_name": "user16", "link": "https://stackoverflow.com/users/1685509/user16"}, "is_accepted": true, "score": 1, "last_activity_date": 1469632421, "creation_date": 1469632421, "answer_id": 38617003, "question_id": 38616376, "link": "https://stackoverflow.com/questions/38616376/c-a-general-way-for-an-object-to-notify-its-owner-to-destroy-itself/38617003#38617003", "title": "C++: A general way for an object to notify its owner to destroy itself?", "body": "<p>I'm afraid you will not like answer but it's a matter of ownership. If an object <code>A</code> owns object <code>B</code>, <code>B</code> should <strong>only</strong> be destroyed by <code>A</code>. So your \"async call\" should be handled by <code>A</code> or another member of <code>A</code> telling <code>A</code> to delete <code>B</code>.</p>\n\n<p>Every other other way of destroying <code>B</code> is basically a hack. In short: don't kill <code>A</code> if owned by some other class.</p>\n"}, {"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1469633398, "creation_date": 1469633398, "answer_id": 38617350, "question_id": 38616376, "link": "https://stackoverflow.com/questions/38616376/c-a-general-way-for-an-object-to-notify-its-owner-to-destroy-itself/38617350#38617350", "title": "C++: A general way for an object to notify its owner to destroy itself?", "body": "<p>There is no <em>general</em> way to do this.  The usual way is for the <code>Child</code> constructor to take a pointer/reference to the <code>Owner</code> class (it looks like you already do this), and then call a function of the <code>Owner</code> which instructs the owner to delete the child.</p>\n\n<p>As noted in the comments, the child function then needs to be very careful about what it touches, because the object has been deleted.</p>\n\n<p>If you don't want to make <code>Child</code> a friend of <code>Owner</code>, but also don't want anyone other than <code>Child</code> calling this function, you can provide an interface which <code>Owner</code> derives from <em>privately</em>, and then pass <code>Child</code> a pointer to this private interface instead.</p>\n"}], "owner": {"reputation": 1038, "user_id": 4056981, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ec96347bc0f87126ab0c055e797da74d?s=128&d=identicon&r=PG&f=1", "display_name": "MaxHeap", "link": "https://stackoverflow.com/users/4056981/maxheap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 38617003, "answer_count": 2, "score": -2, "last_activity_date": 1469633398, "creation_date": 1469630946, "last_edit_date": 1469631369, "question_id": 38616376, "link": "https://stackoverflow.com/questions/38616376/c-a-general-way-for-an-object-to-notify-its-owner-to-destroy-itself", "title": "C++: A general way for an object to notify its owner to destroy itself?", "body": "<p>Assume that an ojbect creates and owns (e.g., unique_ptr) a member object. The member object is notified by an asynchronous event by a callback function from outside and when there is an 'end' event, the object can be destroyed. What is the general way for the member object to inform  the owner object that the member object can be destroyed now? </p>\n\n<p>The callback function also needs to return a value. Please look at the simplified version of the code:</p>\n\n<pre><code>bool Child::OnNotified(event) {\n if (event == \"END\") {\n   parent-&gt;KillMe(this); // how to this?\n   return false;\n }\n return true;\n}\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "is_accepted": true, "score": 2, "last_activity_date": 1471723426, "last_edit_date": 1471723426, "creation_date": 1469631620, "answer_id": 38616653, "question_id": 38616243, "link": "https://stackoverflow.com/questions/38616243/fill-in-a-vector-of-objects-using-data-read-from-a-file/38616653#38616653", "title": "Fill in a vector of objects using data read from a file", "body": "<p>Given a <code>Score</code> class of;</p>\n\n<pre><code>struct Score {\n  int score;\n  std::string time;\n};\n</code></pre>\n\n<p>You will need an extraction operator (<code>operator &gt;&gt;</code>) for the stream and this type (<code>Score</code>), then the technique you are using should work (it will require a changing of the types);</p>\n\n<pre><code>std::ifstream&amp; operator&gt;&gt;(std::ifstream&amp; fs, Score&amp; s)\n{\n  // construct sentry as required\n  fs &gt;&gt; s.score;\n  fs &gt;&gt; s.time;\n  return fs;\n}\n</code></pre>\n\n<p><em>Note</em>; Given the relative lack of detail for the data format in the OP, I've omitted error checking on the time etc., and left out the sentry object to focus on the ability of the code use the stream extraction operator.</p>\n"}], "owner": {"reputation": 43, "user_id": 5516895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MvNG2.jpg?s=128&g=1", "display_name": "CoconutDug", "link": "https://stackoverflow.com/users/5516895/coconutdug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 38616653, "answer_count": 1, "score": 1, "last_activity_date": 1471723426, "creation_date": 1469630647, "last_edit_date": 1469635129, "question_id": 38616243, "link": "https://stackoverflow.com/questions/38616243/fill-in-a-vector-of-objects-using-data-read-from-a-file", "title": "Fill in a vector of objects using data read from a file", "body": "<p>I am trying to read data from a file and use it to fill in a vector.</p>\n\n<p>It is a <code>vector</code> of <code>Score</code> objects. </p>\n\n<p>The <code>Score</code> class only has two variables, an <code>int</code> variable and a <code>char*</code> variable. </p>\n\n<p>These are the only two pieces of data in the file for each Score object.</p>\n\n<p>In the file, there is a score (<code>int</code>) and a time (<code>char*</code>), then a new line.</p>\n\n<p>These are what I am trying to read from the file to fill the <code>vector</code> of <code>Score</code> with.</p>\n\n<p>I have seen a few examples such as: </p>\n\n<pre><code>std::ifstream ifs( \"data.txt\" );\nstd::copy( std::istream_iterator&lt;double&gt;(ifs), std::istream_iterator&lt;double&gt;(),\n      std::back_inserter( values ) );\n</code></pre>\n\n<p>However I was not able to replicate it using an object instead of a variable.</p>\n\n<p>How would I go about doing that? It does not necessarily have to be using <code>istream_iterator</code>.</p>\n\n<p>Thank you in advance for any help!</p>\n"}, {"tags": ["c++", "opencv", "cmake", "ros", "catkin"], "answers": [{"tags": [], "owner": {"reputation": 621, "user_id": 648889, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/79a7a0adf524cb6a5084faf0aa346f50?s=128&d=identicon&r=PG", "display_name": "Will Andrew", "link": "https://stackoverflow.com/users/648889/will-andrew"}, "is_accepted": true, "score": 2, "last_activity_date": 1470232349, "creation_date": 1470232349, "answer_id": 38745601, "question_id": 38616203, "link": "https://stackoverflow.com/questions/38616203/ros-catkin-make-cannot-find-opencvconfig-cmake/38745601#38745601", "title": "ROS &quot;catkin_make&quot; cannot find OpenCVConfig.cmake", "body": "<p>Fixed the problem by adding the line <code>set(OpenCV_DIR /usr/share/OpenCV/)</code> before the <code>find_package()</code> command in my cmakelists file.</p>\n"}], "owner": {"reputation": 621, "user_id": 648889, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/79a7a0adf524cb6a5084faf0aa346f50?s=128&d=identicon&r=PG", "display_name": "Will Andrew", "link": "https://stackoverflow.com/users/648889/will-andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2655, "favorite_count": 0, "accepted_answer_id": 38745601, "answer_count": 1, "score": 0, "last_activity_date": 1470232349, "creation_date": 1469630546, "question_id": 38616203, "link": "https://stackoverflow.com/questions/38616203/ros-catkin-make-cannot-find-opencvconfig-cmake", "title": "ROS &quot;catkin_make&quot; cannot find OpenCVConfig.cmake", "body": "<p>I'm trying to build a ROS package which requires OpenCV using the \"catkin_make\" command.</p>\n\n<p>Upon trying to build, I get the following error for CMakeList command \"find_package(OpenCV REQUIRED)\":</p>\n\n<pre><code>CMake Error at /opt/ros/indigo/share/catkin/cmake/catkinConfig.cmake:83 (find_package):\nCould not find a package configuration file provided by \"OpenCV\" with any of the following names:\n\nOpenCVConfig.cmake\nopencv-config.cmake\n\nAdd the installation prefix of \"OpenCV\" to CMAKE_PREFIX_PATH or set \"OpenCV_DIR\" to a directory containing one of the above files.\n</code></pre>\n\n<p>I found the \"OpenCVConfig.cmake\" file at /usr/share/OpenCV/ and have set this location within the \"OpenCV_DIR\" env variable.\nDespite this, I still get the error listed above.</p>\n\n<p>Any ideas?</p>\n\n<p>It might be useful to know that I'm trying to link OpenCV4Tegra with the package on a Jetson TX1</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 2, "creation_date": 1469629827, "post_id": 38615884, "comment_id": 64617881, "body": "<code>std::remove_if</code> is what you need"}, {"owner": {"reputation": 5460, "user_id": 73657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gzkFl.png?s=128&g=1", "display_name": "Dutow", "link": "https://stackoverflow.com/users/73657/dutow"}, "edited": false, "score": 0, "creation_date": 1469629948, "post_id": 38615884, "comment_id": 64617991, "body": "This isn&#39;t the same question which you marked: that asked about value, while this requires <code>remove_if</code>"}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1469629955, "post_id": 38615884, "comment_id": 64617998, "body": "Of course, as you asked the question, <code>std::remove_if</code> is the answer as pointed out by @DimChtz. But I can imagine that in general you want to look up students by ID, in which case an <code>std::map</code> might be a more useful data structure. (Also, why is student ID a string?) {edit} nvm, see you want to delete by name instead of ID. General remarks might still be useful though."}, {"owner": {"reputation": 1, "user_id": 5044068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e662615f99cee685bec999878a716f9?s=128&d=identicon&r=PG&f=1", "display_name": "liphoto liphoto", "link": "https://stackoverflow.com/users/5044068/liphoto-liphoto"}, "edited": false, "score": 0, "creation_date": 1469630531, "post_id": 38615884, "comment_id": 64618463, "body": "I have edited the question. I want to delete by name. Student ID is a string because I do not plan to do any arithmetic on it"}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1469630658, "post_id": 38615884, "comment_id": 64618552, "body": "But if it is a unique number, making it a numeric datatype still has some advantages, such as the fact that you can quickly compare it to other IDs and can safely use it as keys into an <code>std::map</code>.  Agree with the fact that the duplicate is not a duplicate btw."}], "answers": [{"comments": [{"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1469630173, "post_id": 38615947, "comment_id": 64618162, "body": "I formatted the output a little bit, and I think there was a missing bracket. Please check if it is correct."}, {"owner": {"reputation": 5460, "user_id": 73657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gzkFl.png?s=128&g=1", "display_name": "Dutow", "link": "https://stackoverflow.com/users/73657/dutow"}, "reply_to_user": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1469630263, "post_id": 38615947, "comment_id": 64618237, "body": "It is, I missed that bracket, and forgot to recheck it after I noticed that the question was closed"}], "tags": [], "owner": {"reputation": 5460, "user_id": 73657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gzkFl.png?s=128&g=1", "display_name": "Dutow", "link": "https://stackoverflow.com/users/73657/dutow"}, "is_accepted": false, "score": 0, "last_activity_date": 1469630158, "last_edit_date": 1469630158, "creation_date": 1469629899, "answer_id": 38615947, "question_id": 38615884, "link": "https://stackoverflow.com/questions/38615884/erase-vector-element-from-vector-of-objects-by-value/38615947#38615947", "title": "Erase vector element from vector of objects by value", "body": "<p><a href=\"http://www.cplusplus.com/reference/algorithm/remove_if/\" rel=\"nofollow\"><code>std::remove_if</code></a> is what you need:</p>\n\n<pre><code>myVector.erase(std::remove_if(myVector.begin(), myVector.end(), \n  [](students const&amp; s) { return s.name == \"David\"; }), myVector.end());\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5044068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e662615f99cee685bec999878a716f9?s=128&d=identicon&r=PG&f=1", "display_name": "liphoto liphoto", "link": "https://stackoverflow.com/users/5044068/liphoto-liphoto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 627, "favorite_count": 0, "closed_date": 1469629835, "answer_count": 1, "score": -2, "last_activity_date": 1469630744, "creation_date": 1469629761, "last_edit_date": 1469630744, "question_id": 38615884, "link": "https://stackoverflow.com/questions/38615884/erase-vector-element-from-vector-of-objects-by-value", "closed_reason": "Duplicate", "title": "Erase vector element from vector of objects by value", "body": "<p>I have a c++ vector of student objects with each object having an ID(string), name (string) and age(int).</p>\n\n<pre><code>std::vector&lt;student&gt; myVector;\n</code></pre>\n\n<p>Lets say the vector looks like this</p>\n\n<blockquote>\n  <p>[{\"1\", \"Tom\", 12}, {\"2\", \"David\", 10}, {\"3\", \"Adam\", 15}, {\"4\", \"Jill\", 20}]</p>\n</blockquote>\n\n<p>Is there any way I can delete an object in the vector using the student Name like:</p>\n\n<blockquote>\n  <p><code>myVector.deleteObjectWithName(David)</code></p>\n</blockquote>\n\n<p>such that my remaining vector is now</p>\n\n<blockquote>\n  <p>[{\"1\", \"Tom\", 12}, {\"3\", \"Adam\", 15}, {\"4\", \"Jill\", 20}]</p>\n</blockquote>\n"}, {"tags": ["c++", "image", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1469686244, "post_id": 38615786, "comment_id": 64640968, "body": "does it freeze (probably a driver problem) or is just no image returned? You can test if(frame.empty()) doSomething; in the latter case."}, {"owner": {"reputation": 695, "user_id": 3182775, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xk63T.jpg?s=128&g=1", "display_name": "daniboy000", "link": "https://stackoverflow.com/users/3182775/daniboy000"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469709524, "post_id": 38615786, "comment_id": 64656138, "body": "It freezes and the code got stucked in cap.read(frame). Gonna try to check if the frame is empty and try to update the driver. Thanks for the tip."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469710260, "post_id": 38615786, "comment_id": 64656788, "body": "if it freezes you can&#39;t check whether the result is empty (because the result is never happening). I guess it is a driver problem of your camera and not strictly a openCV problem. Probably you can&#39;t do anything... Which OS do you use?"}, {"owner": {"reputation": 695, "user_id": 3182775, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xk63T.jpg?s=128&g=1", "display_name": "daniboy000", "link": "https://stackoverflow.com/users/3182775/daniboy000"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469715561, "post_id": 38615786, "comment_id": 64661218, "body": "I&#39;m using windows 7."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469715780, "post_id": 38615786, "comment_id": 64661389, "body": "you could try to open the camera with the test application of <code>InputLibrary</code> and check whether the same behaviour occurs if you unplug the camera there. Or same for DirectShow, VLC or different applications which can open your camera."}], "answers": [{"comments": [{"owner": {"reputation": 1339, "user_id": 3903368, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/877a8ca04b687363623f8e28b255b2e9?s=128&d=identicon&r=PG&f=1", "display_name": "Gilly", "link": "https://stackoverflow.com/users/3903368/gilly"}, "edited": false, "score": 0, "creation_date": 1498463640, "post_id": 44754897, "comment_id": 76491073, "body": "Could you please explain what cap.grab() and cap.retrieve do?"}], "tags": [], "owner": {"reputation": 846, "user_id": 7200084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3f015adb015ff957d7924beb4be217?s=128&d=identicon&r=PG&f=1", "display_name": "f4f", "link": "https://stackoverflow.com/users/7200084/f4f"}, "is_accepted": false, "score": 1, "last_activity_date": 1498465343, "last_edit_date": 1498465343, "creation_date": 1498462433, "answer_id": 44754897, "question_id": 38615786, "link": "https://stackoverflow.com/questions/38615786/opencv-c-doesnt-return-false-when-capture-is-not-working/44754897#44754897", "title": "OpenCV C++ doesn&#39;t return false when capture is not working", "body": "<p>You shall try following code:</p>\n\n<pre><code>cv::VideoCapture cap;\ncv::Mat frm;\n\ncap.open(0);\nif (!cap.isOpened())\n    // error handling\nwhile (true) {\n    if (!cap.grab() || !cap.retrieve(frm) || frm.empty()) {\n        // error handling\n    }\n    // cv::imshow and cv::waitKey or any other frm manipulations\n}\n</code></pre>\n\n<p>You may learn about cv::VideoCapture member funcs here: <a href=\"http://docs.opencv.org/3.2.0/d8/dfe/classcv_1_1VideoCapture.html#ae38c2a053d39d6b20c9c649e08ff0146\" rel=\"nofollow noreferrer\">cv::VideoCapture::grab()</a>, <a href=\"http://docs.opencv.org/3.2.0/d8/dfe/classcv_1_1VideoCapture.html#a9ac7f4b1cdfe624663478568486e6712\" rel=\"nofollow noreferrer\">cv::VideoCapture::retrieve()</a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 14406029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GjEViKcPJim1MatA27YS9B0AoXljHsrxXD_Bkg_Nw=k-s128", "display_name": "robeintje wasverzachter", "link": "https://stackoverflow.com/users/14406029/robeintje-wasverzachter"}, "is_accepted": false, "score": 1, "last_activity_date": 1602061988, "last_edit_date": 1602061988, "creation_date": 1602060909, "answer_id": 64240590, "question_id": 38615786, "link": "https://stackoverflow.com/questions/38615786/opencv-c-doesnt-return-false-when-capture-is-not-working/64240590#64240590", "title": "OpenCV C++ doesn&#39;t return false when capture is not working", "body": "<p>I am currently playing around with OpenCV myself and I was trying to figure out how to handle disconnecting and then reconnecting an USB camera. When I used the <code>cap.isOpened()</code> function after unplugging the USB, I noticed nothing changes the return value. After unplugging the camera I also noticed that trying to read an frame caused crashes. This made it so I couldn't plug the camera back in and have it playing again. But the code below made it so that I could dis/reconnect the camera without having the program crash on me.</p>\n<pre><code>while (true) { //loop for showing camera footage\n    if (cap.read(frame)) { //check if there is an frame to read\n        imshow(&quot;something&quot;, frame); //show the frame\n        if (waitKey(1000 / 60) &gt;= 0) \n            break;\n    }else{ //if you can't read the frame (because camera is disconnected) enter an loop\n        while (true) {\n            VideoCapture newCapture(0); //create an new capture\n            if (!newCapture.isOpened()) //check if the new capture is open or not\n                cout &lt;&lt; &quot;camera is unavailable&quot; &lt;&lt; endl;\n            else {\n                cout &lt;&lt; &quot;camera seems available&quot; &lt;&lt; endl;\n                cap = newCapture; //if the new capture is open set it as the origional capture\n                break; //break from the loop\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 695, "user_id": 3182775, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xk63T.jpg?s=128&g=1", "display_name": "daniboy000", "link": "https://stackoverflow.com/users/3182775/daniboy000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1453, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1602062121, "creation_date": 1469629523, "last_edit_date": 1602062121, "question_id": 38615786, "link": "https://stackoverflow.com/questions/38615786/opencv-c-doesnt-return-false-when-capture-is-not-working", "title": "OpenCV C++ doesn&#39;t return false when capture is not working", "body": "<p>I'm working with an IP camera and need to know when the capture failed. According to the OpenCV documentation, the <em>VideoCapture::read(OutputArray image)</em> should return <strong>false</strong> when no frames has been grabbed (camera has been disconnected, or there are no more frames in video file)    but this is not happening. When my camera disconnects, my code got stuck in the read function. I need to know when the capture failed. How can this be done? My code follows bellow:</p>\n\n<pre><code>#include &lt;opencv2/core/core.hpp&gt;\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;iostream&gt;\n\nusing namespace cv;\nusing namespace std;\n\nint main(int argc, char** argv)\n{\n    String ptzCam = \"rtsp://user:password@ip:port/videoMain\";\n\n    VideoCapture cap(ptzCam);  // open the default camera\n    if (!cap.isOpened()) {\n        return -1;\n    }\n\n    namedWindow(\"capture\", 1);\n\n    for (;;) {\n        Mat frame;\n\n        if (cap.read(frame)) {\n            cout &lt;&lt; \"Capturing... \" &lt;&lt; endl;\n            imshow(\"capture\", frame);           \n        }\n        else {\n            cout &lt;&lt; \"Capture is not opened.\" &lt;&lt; endl;           \n        }   \n\n        if (waitKey(30) &gt;= 0)\n            break;\n    }\n\n    cap.release();\n    destroyAllWindows();\n}\n</code></pre>\n"}, {"tags": ["c++", "tensorflow"], "comments": [{"owner": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "edited": false, "score": 0, "creation_date": 1469639516, "post_id": 38615558, "comment_id": 64624279, "body": "sounds like a good subject for github issue, mentioning @petewarden"}, {"owner": {"reputation": 53, "user_id": 6636270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e04d51ad5b0dc8163cfc768c11b88ed6?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Grachev", "link": "https://stackoverflow.com/users/6636270/artem-grachev"}, "reply_to_user": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "edited": false, "score": 0, "creation_date": 1469642102, "post_id": 38615558, "comment_id": 64625745, "body": "Thank you for advice.  I create it here:  <a href=\"https://github.com/tensorflow/tensorflow/issues/3533\" rel=\"nofollow noreferrer\">github.com/tensorflow/tensorflow/issues/3533</a>"}], "answers": [{"tags": [], "owner": {"reputation": 246, "user_id": 714955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b23acee116e69749d4403277b1ac29c?s=128&d=identicon&r=PG", "display_name": "samuel", "link": "https://stackoverflow.com/users/714955/samuel"}, "is_accepted": true, "score": 2, "last_activity_date": 1470166701, "creation_date": 1470166701, "answer_id": 38729111, "question_id": 38615558, "link": "https://stackoverflow.com/questions/38615558/bug-in-tensorflow-tuttorial-about-quantization/38729111#38729111", "title": "Bug in tensorflow tuttorial about quantization", "body": "<p>Tensorflow 0.10 is released! I solved this problem after updating! \nAdd those code in your script: </p>\n\n<pre><code>from tensorflow.contrib.quantization import load_quantized_ops_so\nfrom tensorflow.contrib.quantization.kernels import load_quantized_kernels_so\n</code></pre>\n\n<p>and </p>\n\n<pre><code>load_quantized_ops_so.Load()\nload_quantized_kernels_so.Load()\n</code></pre>\n\n<p>Thanks the TF teams!</p>\n"}], "owner": {"reputation": 53, "user_id": 6636270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e04d51ad5b0dc8163cfc768c11b88ed6?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Grachev", "link": "https://stackoverflow.com/users/6636270/artem-grachev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 716, "favorite_count": 1, "accepted_answer_id": 38729111, "answer_count": 1, "score": 2, "last_activity_date": 1470166701, "creation_date": 1469629007, "last_edit_date": 1495540293, "question_id": 38615558, "link": "https://stackoverflow.com/questions/38615558/bug-in-tensorflow-tuttorial-about-quantization", "title": "Bug in tensorflow tuttorial about quantization", "body": "<p>This post follow my another post about op not registered: : \n<a href=\"https://stackoverflow.com/questions/38595600/notfounderror-op-type-not-registered-dequantize\">NotFoundError: Op type not registered &#39;Dequantize&#39;</a></p>\n\n<p>And now when I try load manually as in this post: \n<a href=\"https://stackoverflow.com/questions/38428718/install-tensorflow-with-quantization-support\">Install Tensorflow with Quantization Support</a></p>\n\n<p>with:</p>\n\n<pre><code>qops = tf.load_op_library('/home/artem/projects/tensorflow/bazel-bin/tensorflow/contrib/quantization/_quantized_ops.so')\nqkernelops = tf.load_op_library('/home/artem/projects/tensorflow/bazel-bin/tensorflow/contrib/quantization/kernels/_quantized_kernels.so')\n</code></pre>\n\n<p>I get the following error: </p>\n\n<pre><code>---------------------------------------------------------------------------\nNotFoundError                             Traceback (most recent call last)\n&lt;ipython-input-4-799f99708cda&gt; in &lt;module&gt;()\n      1 \n----&gt; 2 qops = tf.load_op_library('/home/artem/projects/tensorflow/bazel-bin/tensorflow/contrib/quantization/_quantized_ops.so')\n      3 qkernelops = tf.load_op_library('/home/artem/projects/tensorflow/bazel-bin/tensorflow/contrib/quantization/kernels/_quantized_kernels.so')\n\n/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/load_library.pyc in load_op_library(library_filename)\n     69           return _OP_LIBRARY_MAP[library_filename]\n     70       # pylint: disable=protected-access\n---&gt; 71       raise errors._make_specific_exception(None, None, error_msg, error_code)\n     72       # pylint: enable=protected-access\n     73   finally:\n\nNotFoundError: /home/artem/projects/tensorflow/bazel-bin/tensorflow/contrib/quantization/_quantized_ops.so: undefined symbol: _ZN10tensorflow8internal21CheckOpMessageBuilder9NewStringB5cxx11Ev\n</code></pre>\n\n<p>It is look like that it is a problem with C++ compiler and probably I should add <code>-D_GLIBCXX_USE_CXX11_ABI=0</code> as in this post: \n<a href=\"https://github.com/tensorflow/tensorflow/pull/1584\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/pull/1584</a></p>\n\n<p>but actually I did <code>bazel-build</code> and I don't know how manage it. </p>\n\n<p>Anybody can help me? Test example from <a href=\"https://www.tensorflow.org/versions/master/how_tos/quantization/index.html\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/versions/master/how_tos/quantization/index.html</a> also don't work. \nIt will be great if someone would write detailed manual about quantization generally. </p>\n"}, {"tags": ["c++", "templates", "doxygen"], "answers": [{"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 4, "last_activity_date": 1469629634, "creation_date": 1469629634, "answer_id": 38615829, "question_id": 38615476, "link": "https://stackoverflow.com/questions/38615476/whats-the-right-way-to-reference-a-template-parameters-in-doxygen/38615829#38615829", "title": "What&#39;s the right way to reference a template parameters in Doxygen?", "body": "<p><code>@p</code> doesn't <em>really</em> \"reference\" a parameter; it just styles the next word in typewriter font. You will generally use that to reference parameters, but <code>@p</code> doesn't do anything special beyond using typewriter font for the next word.</p>\n\n<p>So you can use <code>@p</code> to style a template parameter if you like. Or you could use <code>@a</code>. Or something else. It's all up to the way you want the results to look.</p>\n"}, {"tags": [], "owner": {"reputation": 1921, "user_id": 6317147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376fccc260dbc5e810117896b2bdf3a9?s=128&d=identicon&r=PG", "display_name": "Gregg", "link": "https://stackoverflow.com/users/6317147/gregg"}, "is_accepted": false, "score": -1, "last_activity_date": 1469736689, "creation_date": 1469736689, "answer_id": 38645877, "question_id": 38615476, "link": "https://stackoverflow.com/questions/38615476/whats-the-right-way-to-reference-a-template-parameters-in-doxygen/38645877#38645877", "title": "What&#39;s the right way to reference a template parameters in Doxygen?", "body": "<p>To create a reference a another symbol use the @ref command.  However this command does not work for parameters.  Doxygen does not recognize them as a target of the @ref.</p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 906, "favorite_count": 0, "accepted_answer_id": 38615829, "answer_count": 2, "score": 5, "last_activity_date": 1469736689, "creation_date": 1469628794, "last_edit_date": 1495540739, "question_id": 38615476, "link": "https://stackoverflow.com/questions/38615476/whats-the-right-way-to-reference-a-template-parameters-in-doxygen", "title": "What&#39;s the right way to reference a template parameters in Doxygen?", "body": "<p>A follow-up question to:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15398711/whats-the-right-way-to-reference-a-parameter-in-doxygen\">What&#39;s the right way to reference a parameter in Doxygen?</a></p>\n\n<p>So, for parameters, we use <code>@param</code></p>\n\n<pre><code>@param my_param the quick brown fox takes this parameter over the lazy dog\n</code></pre>\n\n<p>and then we can refer to it using <code>@p</code>:</p>\n\n<pre><code>@param my_other_param this is completely different from @p my_param , you know!\n</code></pre>\n\n<p>Now, for template parameters, I would replace <code>@param</code> with <code>@tparam</code>. What should replace the <code>@p</code>?</p>\n"}, {"tags": ["c++", "c", "null", "nullptr"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1469628828, "post_id": 38615436, "comment_id": 64617029, "body": "C11 draft standard n1570: <i>6.5.3.2 Address and indirection operators 3 The unary &amp; operator yields the address of its operand. If the operand has type \u2018\u2018type\u2019\u2019, the result has type \u2018\u2018pointer to type\u2019\u2019. If the operand is the result of a unary * operator, neither that operator nor the &amp; operator is evaluated and the result is as if both were omitted, except that the constraints on the operators still apply and the result is not an lvalue.</i>"}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1469629070, "post_id": 38615436, "comment_id": 64617232, "body": "I marked this as a duplicate, but be sure to read the discussion under the C++ answer, as well as <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#232\" rel=\"nofollow noreferrer\">this discussion</a>, as this is not quite so explicit in the C++ standard."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1469629327, "post_id": 38615436, "comment_id": 64617464, "body": "I doubt this is duplicate as OP asks &quot;if dereferencing <code>nullptr</code> is UB how offesetof works&quot;"}, {"owner": {"reputation": 823, "user_id": 779912, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bbe42bc7078d4c4481ebdf908d7dd9cc?s=128&d=identicon&r=PG", "display_name": "TruLa", "link": "https://stackoverflow.com/users/779912/trula"}, "reply_to_user": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1469629337, "post_id": 38615436, "comment_id": 64617476, "body": "Thank you @TartanLlama. I read that topic and will read it again. It was just not clear what question was asked and was the correct answer to that question. It looks more like discussion :-)"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 1, "creation_date": 1469629590, "post_id": 38615436, "comment_id": 64617659, "body": "@TartanLlama Since I can&#39;t find an equivalent exemption for using <code>&amp;*NULL</code> in c++, I suspect this may be one of the points where the two languages diverge. The supposed duplicate can only stand if the <code>c</code>-tag is removed."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469629793, "post_id": 38615436, "comment_id": 64617848, "body": "@EOF I&#39;m not sure what you mean; that question has answers addressing C and C++."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1469629896, "post_id": 38615436, "comment_id": 64617936, "body": "The dupe is wrong.... Perhaps <a href=\"http://stackoverflow.com/q/7346634/560648\">stackoverflow.com/q/7346634/560648</a>? Depends on the language though. I wish the OP would bloomin&#39; pick one."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1469629914, "post_id": 38615436, "comment_id": 64617962, "body": "@TartanLlama: If you read my first comment here, you&#39;ll notice that <b>there is no <code>NULL</code>-dereference</b> if the code is treated as C. Therefore, answers explaining undefinedness of <code>NULL</code>-dereference are not suitable as duplicates."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469630021, "post_id": 38615436, "comment_id": 64618046, "body": "@EOF Ah yes, my mistake, ignore my silliness."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1469630236, "post_id": 38615436, "comment_id": 64618216, "body": "@RaymondChen: Nope, that&#39;s not right either."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1469630318, "post_id": 38615436, "comment_id": 64618276, "body": "@LightnessRacesinOrbit The problem is that OP asked four questions. OP should pick one question so people can give the answer to it."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1469630387, "post_id": 38615436, "comment_id": 64618340, "body": "@RaymondChen: And at least one of them, as far as I can tell, differs between C and C++, in contradiction to the OP&#39;s assertion that the answers would be similar for the two languages."}, {"owner": {"reputation": 823, "user_id": 779912, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bbe42bc7078d4c4481ebdf908d7dd9cc?s=128&d=identicon&r=PG", "display_name": "TruLa", "link": "https://stackoverflow.com/users/779912/trula"}, "edited": false, "score": 0, "creation_date": 1469630973, "post_id": 38615436, "comment_id": 64618818, "body": "I am not sure why the question was marked as duplicate to the <a href=\"http://stackoverflow.com/questions/9383684/is-there-a-platform-or-situation-where-dereferencing-but-not-using-a-null-poin\">question</a>? I am wondering if my example is an undefined behavior (and how <code>offsetof</code> works if it is). The question above already <b>gives</b> an example of undefined behavior and is about the platform. These two questions are completely different. I think I am very specific in mine. How can I reformulate it?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1469631360, "post_id": 38615436, "comment_id": 64619101, "body": "@Trula I think answer to your question is &quot;implementation of standard library does not have to be valid C or C++ code and discussing if implementation itself there is standard complaint is useless&quot;."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1469631505, "post_id": 38615436, "comment_id": 64619217, "body": "The identified duplicate does not answer this question."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1469632014, "post_id": 38615436, "comment_id": 64619570, "body": "The C standards, since the 1989 ANSI standard all specify that <code>&amp;*ptr</code> has well defined behaviour, since result (in such expression) effectively discards both the <code>&amp;</code> and the <code>*</code>.   Not sure, offhand, what the C++ standards have to say."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 4, "last_activity_date": 1469632218, "last_edit_date": 1592644375, "creation_date": 1469628930, "answer_id": 38615522, "question_id": 38615436, "link": "https://stackoverflow.com/questions/38615436/c-c-nullptr-dereference/38615522#38615522", "title": "C/C++ nullptr dereference", "body": "<p>TL;DR <code>&amp;(*(char*)0)</code> is well defined.</p>\n<p>The C++ standard doesn't say that indirection of null pointer by itself has UB. Current standard draft, <a href=\"http://eel.is/c++draft/expr.unary.op\" rel=\"nofollow noreferrer\">[expr.unary.op]</a></p>\n<blockquote>\n<ol>\n<li><p>The unary * operator performs indirection: the expression to which it is applied shall be a pointer to an object type, or a pointer to a function type and the result is an lvalue referring to the object or function to which the expression points. If the type of the expression is \u201cpointer to T\u201d, the type of the result is \u201cT\u201d. [snip]</p>\n</li>\n<li><p>The result of the unary &amp; operator is a pointer to its operand. The operand shall be an lvalue or a qualified-id. [snip]</p>\n</li>\n</ol>\n</blockquote>\n<p>There is no UB unless the lvalue of the indirection expression is converted to an rvalue.</p>\n<hr />\n<p>The C standard is much more explicit. C11 standard draft \u00a76.5.3.2</p>\n<blockquote>\n<ol start=\"3\">\n<li>The unary &amp; operator yields the address of its operand. If the operand has type &quot;type&quot;, the  result  has  type  &quot;pointer to type&quot;. <strong>If the  operand  is  the  result  of  a unary * operator, neither  that  operator  nor  the &amp; operator  is  evaluated  and  the  result  is  as  if  both  were omitted</strong>, except  that  the  constraints  on  the  operators  still  apply  and  the  result  is  not  an lvalue.  Similarly, if the operand is the result of a [] operator, neither the &amp; operator nor the  unary * that  is  implied  by  the [] is  evaluated  and  the  result  is  as  if  the\n&amp; operator were removed and the [] operator were changed to a + operator. Otherwise, the result is a pointer to the object or function designated by its operand.</li>\n</ol>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 1417, "user_id": 1597897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3soCY.jpg?s=128&g=1", "display_name": "Franko Leon Tokali\u0107", "link": "https://stackoverflow.com/users/1597897/franko-leon-tokali%c4%87"}, "edited": false, "score": 1, "creation_date": 1469630285, "post_id": 38616085, "comment_id": 64618253, "body": "OP is referring to the macro from the link: #define OFFSETOF(type, field)    ((unsigned long) &amp;(((type *) 0)-&gt;field))"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 1417, "user_id": 1597897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3soCY.jpg?s=128&g=1", "display_name": "Franko Leon Tokali\u0107", "link": "https://stackoverflow.com/users/1597897/franko-leon-tokali%c4%87"}, "edited": false, "score": 0, "creation_date": 1469630435, "post_id": 38616085, "comment_id": 64618380, "body": "@Byteventurer No reason to use a home-grown <code>offsetoff</code>, it results in compiler warnings. Use the standard  <a href=\"http://en.cppreference.com/w/cpp/types/offsetof\" rel=\"nofollow noreferrer\"><code>offsetof</code></a>."}, {"owner": {"reputation": 1417, "user_id": 1597897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3soCY.jpg?s=128&g=1", "display_name": "Franko Leon Tokali\u0107", "link": "https://stackoverflow.com/users/1597897/franko-leon-tokali%c4%87"}, "edited": false, "score": 1, "creation_date": 1469630479, "post_id": 38616085, "comment_id": 64618413, "body": "I am not propagating the use of the macro, I am explaining what the OP is referring to when asking the question..."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 1417, "user_id": 1597897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3soCY.jpg?s=128&g=1", "display_name": "Franko Leon Tokali\u0107", "link": "https://stackoverflow.com/users/1597897/franko-leon-tokali%c4%87"}, "edited": false, "score": 0, "creation_date": 1469630722, "post_id": 38616085, "comment_id": 64618608, "body": "@Byteventurer I think the OP is confusing <code>offsetof</code> with <code>OFFSETOF</code>. <code>offsetof</code> is an identifier reserved for the implementation, whereas <code>OFFSETOF</code> could be anything."}, {"owner": {"reputation": 1417, "user_id": 1597897, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3soCY.jpg?s=128&g=1", "display_name": "Franko Leon Tokali\u0107", "link": "https://stackoverflow.com/users/1597897/franko-leon-tokali%c4%87"}, "edited": false, "score": 1, "creation_date": 1469630910, "post_id": 38616085, "comment_id": 64618768, "body": "Perhaps he is. Still, the question was about &amp;(*p) where p is a null pointer, not about offsetof itself, and the offsetof macro he linked to did just that. Before the edit, you missed the point of the question IMO."}, {"owner": {"reputation": 823, "user_id": 779912, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bbe42bc7078d4c4481ebdf908d7dd9cc?s=128&d=identicon&r=PG", "display_name": "TruLa", "link": "https://stackoverflow.com/users/779912/trula"}, "edited": false, "score": 1, "creation_date": 1469631483, "post_id": 38616085, "comment_id": 64619200, "body": "@MaximEgorushkin, I am aware that <code>offsetof</code> and <code>OFFSETOF</code> are different. Nevertheless, the question was not about which one to use. <code>OFFSETOF</code> was just a simple example with <code>64</code> upvotes and marked as an accepted answer. I can give another <a href=\"http://lxr.free-electrons.com/source/include/linux/stddef.h\" rel=\"nofollow noreferrer\">example</a> if that would be more convenient ;-)"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1469630519, "last_edit_date": 1469630519, "creation_date": 1469630220, "answer_id": 38616085, "question_id": 38615436, "link": "https://stackoverflow.com/questions/38615436/c-c-nullptr-dereference/38616085#38616085", "title": "C/C++ nullptr dereference", "body": "<blockquote>\n  <p>If it is also an undefined behavior, how does <code>offsetof</code> work?</p>\n</blockquote>\n\n<p>Prefer using <a href=\"http://en.cppreference.com/w/cpp/types/offsetof\" rel=\"nofollow\">the standard <code>offsetof</code> macro</a>. Home-grown versions result in compiler warnings. Moreover:</p>\n\n<blockquote>\n  <p><code>offsetof</code> is required to work as specified above, even if unary <code>operator&amp;</code> is overloaded for any of the types involved. This cannot be implemented in standard C++ and requires compiler support.</p>\n</blockquote>\n\n<p><code>offsetof</code> is a <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Offsetof.html\" rel=\"nofollow\">built-in function in gcc</a>.</p>\n"}], "owner": {"reputation": 823, "user_id": 779912, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bbe42bc7078d4c4481ebdf908d7dd9cc?s=128&d=identicon&r=PG", "display_name": "TruLa", "link": "https://stackoverflow.com/users/779912/trula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2260, "favorite_count": 0, "closed_date": 1469630288, "accepted_answer_id": 38615522, "answer_count": 2, "score": 2, "last_activity_date": 1469633390, "creation_date": 1469628687, "last_edit_date": 1495542761, "question_id": 38615436, "link": "https://stackoverflow.com/questions/38615436/c-c-nullptr-dereference", "closed_reason": "Duplicate", "title": "C/C++ nullptr dereference", "body": "<p>Since de-referencing <code>nullptr</code> (<code>NULL</code>) is an undefined behavior both in <code>C</code> and <code>C++</code>, I am wondering if expression <code>&amp;(*ptr)</code> is a valid one if ptr is <code>nullptr</code> (<code>NULL</code>).</p>\n\n<p>If it is also an undefined behavior, how does <a href=\"https://stackoverflow.com/a/142023\">OFFSETOF</a> macro in the linked answer work?</p>\n\n<p>I always thought that <code>ptr-&gt;field</code> is a shorthand for <code>(*ptr).field</code></p>\n\n<p>I think the answer to my question is similar in C and C++.</p>\n"}, {"tags": ["c++", "gcc-warning"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1469628793, "post_id": 38615351, "comment_id": 64617009, "body": "What compiler and options are you using? I tried <code>g++</code> with all warnings turned on and saw no warning with the code you&#39;re showing."}, {"owner": {"reputation": 3566, "user_id": 1171193, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/596a4074abeb0f6d48982df6cc22a108?s=128&d=identicon&r=PG", "display_name": "janr", "link": "https://stackoverflow.com/users/1171193/janr"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1469629068, "post_id": 38615351, "comment_id": 64617231, "body": "g++ (GCC) 4.4.7 20120313 (Red Hat 4.4.7-17) and the g++ flag is &#39;-Wconversion&#39;."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1469629186, "post_id": 38615351, "comment_id": 64617341, "body": "Thanks. I ran my test with g++ (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4 and with g++ (GCC) 4.7.2 20120921 (Red Hat 4.7.2-2), but did not see the warning."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1469629539, "post_id": 38615351, "comment_id": 64617616, "body": "solution: <code>myShort = static_cast&lt;short&gt;(myShort * 60);</code> .Due to integer promotion rules, casting <code>60</code> to <code>short</code> is not enough."}, {"owner": {"reputation": 3566, "user_id": 1171193, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/596a4074abeb0f6d48982df6cc22a108?s=128&d=identicon&r=PG", "display_name": "janr", "link": "https://stackoverflow.com/users/1171193/janr"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1469800976, "post_id": 38615351, "comment_id": 64702483, "body": "@bolov Thanks, the cast solves the warning. I could have vowed that I tried this, but may be I only casted the &#39;60&#39; like you mentioned. Why don&#39;t add it as an answer?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1469802866, "post_id": 38615351, "comment_id": 64703697, "body": "@janr Yes the ideea is that you need split <code>+=</code> into a <code>=</code> in order to be able to do the proper cast. I can&#39;t  because the question is closed :p"}], "owner": {"reputation": 3566, "user_id": 1171193, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/596a4074abeb0f6d48982df6cc22a108?s=128&d=identicon&r=PG", "display_name": "janr", "link": "https://stackoverflow.com/users/1171193/janr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "closed_date": 1469628721, "answer_count": 0, "score": 0, "last_activity_date": 1469628528, "creation_date": 1469628528, "question_id": 38615351, "link": "https://stackoverflow.com/questions/38615351/conversion-to-short-unsigned-int-from-int-may-alter-its-value", "closed_reason": "Duplicate", "title": "conversion to &#39;short unsigned int&#39; from &#39;int&#39; may alter its value", "body": "<p>I have not come up with a solution for the following warning:</p>\n\n<pre><code>main.cpp: In member function 'void MyClass::increase()':\nmain.cpp:350: warning: conversion to 'short unsigned int' from 'int' may alter its value\n</code></pre>\n\n<p>main.cpp:</p>\n\n<pre><code>class MyClass {\npublic:\n   MyClass() : myShort(0) { }\n   void increase() { myShort *= 60; } // Line 350\n\nprivate:\n   unsigned short myShort;\n};\n\nint main(int argc, char** argv)\n{\n   MyClass myObj;\n   myObj.increase();\n}\n</code></pre>\n"}, {"tags": ["c++", "codeblocks", "sfml"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6645126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d06e0a9169bf8e02c3fd89a8d4174b?s=128&d=identicon&r=PG&f=1", "display_name": "Buster", "link": "https://stackoverflow.com/users/6645126/buster"}, "edited": false, "score": 0, "creation_date": 1469963896, "post_id": 38615300, "comment_id": 64745994, "body": "I followed everything in the first tutorial and cmake doesn&#39;t want to build at all, it keeps spitting out these errors: <code>CMake Error: CMake was unable to find a build program corresponding to &quot;MinGW Makefiles&quot;.  CMAKE_MAKE_PROGRAM is not set.  You probably need to select a different build tool. CMake Error: CMake was unable to find a build program corresponding to &quot;MinGW Makefiles&quot;.  CMAKE_MAKE_PROGRAM is not set.  You probably need to select a different build tool. CMake Error: CMAKE_C_COMPILER not set, after EnableLanguage CMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage</code>"}, {"owner": {"reputation": 669, "user_id": 2581119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbdbeb2cb8aa3c89132fe48d744c91d4?s=128&d=identicon&r=PG", "display_name": "Lehu", "link": "https://stackoverflow.com/users/2581119/lehu"}, "reply_to_user": {"reputation": 1, "user_id": 6645126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d06e0a9169bf8e02c3fd89a8d4174b?s=128&d=identicon&r=PG&f=1", "display_name": "Buster", "link": "https://stackoverflow.com/users/6645126/buster"}, "edited": false, "score": 0, "creation_date": 1470044051, "post_id": 38615300, "comment_id": 64769470, "body": "Hmm... I believe that you have Windows, right? Are you sure you have mingw installed on your system?"}, {"owner": {"reputation": 1, "user_id": 6645126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d06e0a9169bf8e02c3fd89a8d4174b?s=128&d=identicon&r=PG&f=1", "display_name": "Buster", "link": "https://stackoverflow.com/users/6645126/buster"}, "edited": false, "score": 0, "creation_date": 1470249887, "post_id": 38615300, "comment_id": 64876605, "body": "Yes, I have mingw installed and it&#39;s compatible with my windows."}], "tags": [], "owner": {"reputation": 669, "user_id": 2581119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbdbeb2cb8aa3c89132fe48d744c91d4?s=128&d=identicon&r=PG", "display_name": "Lehu", "link": "https://stackoverflow.com/users/2581119/lehu"}, "is_accepted": false, "score": 3, "last_activity_date": 1469628435, "creation_date": 1469628435, "answer_id": 38615300, "question_id": 38615200, "link": "https://stackoverflow.com/questions/38615200/how-can-i-rebuild-libraries-with-codeblocks/38615300#38615300", "title": "How can I rebuild libraries with Code::Blocks?", "body": "<p>I don't know what \"I opened headers, build and run them\" means, but if I get it right you did not build anything at all.\n<br><br>\nSo, if you want to build SFML, there is pretty good instruction: <a href=\"http://www.sfml-dev.org/tutorials/2.3/compile-with-cmake.php\" rel=\"nofollow\">http://www.sfml-dev.org/tutorials/2.3/compile-with-cmake.php</a>\n<br><br>\nUsing SFML with Code::Lite is described in the following tutorial: <a href=\"http://www.sfml-dev.org/tutorials/2.3/start-cb.php\" rel=\"nofollow\">http://www.sfml-dev.org/tutorials/2.3/start-cb.php</a> (note that this is about Code::Blocks, but Code::Lite is very similar).\n<br><br>\nIf you have some specific questions about those tutorials feel free to ask.</p>\n"}], "owner": {"reputation": 1, "user_id": 6645126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d06e0a9169bf8e02c3fd89a8d4174b?s=128&d=identicon&r=PG&f=1", "display_name": "Buster", "link": "https://stackoverflow.com/users/6645126/buster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469628435, "creation_date": 1469628150, "question_id": 38615200, "link": "https://stackoverflow.com/questions/38615200/how-can-i-rebuild-libraries-with-codeblocks", "title": "How can I rebuild libraries with Code::Blocks?", "body": "<p>I'm using an SFML to train before creating and releasing an actually playable game. The problem is loading textures, fonts and other stuff from files. Every time I try, I get a following error:</p>\n\n<pre><code>undefined reference to `sf::Font::loadFromFile(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)'\n</code></pre>\n\n<p>I learned that I have to rebuild the libraries with the compiler that I use. I open the headers and build and run them, but every time a window with this message pops up:</p>\n\n<blockquote>\n  <p>It seems that this file has not been built yet. Do you want to build it now?</p>\n</blockquote>\n\n<p>I click \"Yes\" but it pops up again and doesn't want to stop, neither does it rebuild the files. What do I do?</p>\n"}, {"tags": ["c++", "c++11", "stl", "containers"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1469629289, "post_id": 38614962, "comment_id": 64617440, "body": "Or just add an overload. (Which is why you can&#39;t partially specialize functions)"}], "answers": [{"comments": [{"owner": {"reputation": 7463, "user_id": 1145760, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/065408758852145010d28c2aa811ca68?s=128&d=identicon&r=PG", "display_name": "Vorac", "link": "https://stackoverflow.com/users/1145760/vorac"}, "edited": false, "score": 0, "creation_date": 1469685381, "post_id": 38615407, "comment_id": 64640577, "body": "Nah, std::string returns <code>const char*</code>. It appears my pre-conditions have been untrue."}], "tags": [], "owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "is_accepted": false, "score": 7, "last_activity_date": 1469628652, "creation_date": 1469628652, "answer_id": 38615407, "question_id": 38614962, "link": "https://stackoverflow.com/questions/38614962/how-to-detect-if-a-container-is-guaranteed-to-have-sequence-storage/38615407#38615407", "title": "How to detect if a container is guaranteed to have sequence storage", "body": "<p>How about if the container has a <code>data()</code> member function? (that returns a pointer)</p>\n"}, {"comments": [{"owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1469630368, "post_id": 38615816, "comment_id": 64618326, "body": "Thanks. Forgot about those."}], "tags": [], "owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "is_accepted": true, "score": 7, "last_activity_date": 1469630348, "last_edit_date": 1469630348, "creation_date": 1469629610, "answer_id": 38615816, "question_id": 38614962, "link": "https://stackoverflow.com/questions/38614962/how-to-detect-if-a-container-is-guaranteed-to-have-sequence-storage/38615816#38615816", "title": "How to detect if a container is guaranteed to have sequence storage", "body": "<p>The right way here is to use a trait class. <code>std::is_base_of</code> is a kind of trait. Basically: You have a templated struct that takes a (template) param and returns its result via a nested type/value.</p>\n\n<p>In your case something like this</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct HasContiguousStorage: public std::false_type{};\n\ntemplate&lt;typename T&gt;\nstruct HasContiguousStorage&lt;std::vector&lt;T&gt;&gt;: public std::true_type{};\n// Specialize others\n</code></pre>\n\n<p>As you should not derive from standard containers, this should be enough. This can also check for the array:</p>\n\n<pre><code>template&lt;typename T, size_t N&gt;\nstruct HasContiguousStorage&lt;std::array&lt;T,N&gt;&gt;: public std::true_type{};\n</code></pre>\n\n<p>In your function you can then either overload it (see <code>enable_if</code>) or branch on it (branch will be evaluated at compile-time)</p>\n"}, {"tags": [], "owner": {"reputation": 4175, "user_id": 1082038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEql2.jpg?s=128&g=1", "display_name": "Nevin", "link": "https://stackoverflow.com/users/1082038/nevin"}, "is_accepted": false, "score": 0, "last_activity_date": 1470238442, "creation_date": 1470238442, "answer_id": 38747971, "question_id": 38614962, "link": "https://stackoverflow.com/questions/38614962/how-to-detect-if-a-container-is-guaranteed-to-have-sequence-storage/38747971#38747971", "title": "How to detect if a container is guaranteed to have sequence storage", "body": "<p>While you cannot do it yet, I am in the process of updating <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4183.pdf\" rel=\"nofollow\" title=\"n4183 Contiguous Iterators: Pointer Conversion &amp; Type Trait\">n4183 Contiguous Iterators: Pointer Conversion &amp; Type Trait</a> for (hopeful) inclusion in a future C++ standard.</p>\n"}], "owner": {"reputation": 7463, "user_id": 1145760, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/065408758852145010d28c2aa811ca68?s=128&d=identicon&r=PG", "display_name": "Vorac", "link": "https://stackoverflow.com/users/1145760/vorac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 821, "favorite_count": 0, "accepted_answer_id": 38615816, "answer_count": 3, "score": 2, "last_activity_date": 1470238442, "creation_date": 1469627602, "last_edit_date": 1495541283, "question_id": 38614962, "link": "https://stackoverflow.com/questions/38614962/how-to-detect-if-a-container-is-guaranteed-to-have-sequence-storage", "title": "How to detect if a container is guaranteed to have sequence storage", "body": "<p><a href=\"https://stackoverflow.com/questions/35004633/checking-if-a-sequence-container-is-contiguous-in-memory\">Checking if a sequence container is contiguous in memory.</a><br>\n<a href=\"https://stackoverflow.com/questions/874298/c-templates-that-accept-only-certain-types\">C++ templates that accept only certain types</a></p>\n\n<p>I am writing a simple <code>send()</code> method, which internally works with C-style pointers. I would like it to be able to work with all the guaranteed sequence containers. My motivation being twofold:</p>\n\n<ul>\n<li>a flexible interface</li>\n<li>efficiency - using <code>std::array</code> avoids heap allocations.</li>\n</ul>\n\n<p>Here is how far I am:</p>\n\n<pre><code>template &lt;typename Container&gt;\nvoid poll( Container &amp;out )\n{\n    static_assert( std::is_base_of&lt; std::array&lt;typename Container::value_type&gt;, Container &gt;::value  ||\n                   std::is_base_of&lt; std::vector&lt;typename Container::value_type&gt;, Container &gt;::value ||\n                   std::is_base_of&lt; std::string&lt;typename Container::value_type&gt;, Container &gt;::value,\n                   \"A contiguous memory container is required.\");\n}\n</code></pre>\n\n<p>Trouble is, <code>std::array</code> requires a second parameter, and that cannot be known at compile time. Is this problem solvable? Possibly by a different approach?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1469627765, "post_id": 38614831, "comment_id": 64616241, "body": "Capture the type by adding:  <code>using valueType = T;</code> to <code>Image</code>"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1469627847, "post_id": 38614831, "comment_id": 64616304, "body": "There&#39;s also <code>auto</code>, but yeah, <code>Image</code> should have that type alias."}], "answers": [{"tags": [], "owner": {"reputation": 15006, "user_id": 2797826, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3bab2302a0d633206bdcfca569f666c8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan Brindle", "link": "https://stackoverflow.com/users/2797826/tristan-brindle"}, "is_accepted": true, "score": 3, "last_activity_date": 1469628282, "creation_date": 1469628282, "answer_id": 38615251, "question_id": 38614831, "link": "https://stackoverflow.com/questions/38614831/how-to-determine-underlying-template-type-of-template-parameter-that-inherits-fr/38615251#38615251", "title": "How to Determine Underlying Template Type of Template Parameter That Inherits From a Class Template?", "body": "<p>The classic way to do this is to put a typedef/alias in your <code>Image</code> class, something like</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Image {\npublic:\n    typedef T value_type;\n\n    // Other stuff\n};\n</code></pre>\n\n<p>Then later in your <code>Stack::NegateAllImageValues()</code> method, you can say</p>\n\n<pre><code>template &lt;class T&gt;\nvoid Stack::NegateAllImageValues()\n{\n    for(int i = 0; i &lt; stackOfImages_.size(); ++i)\n    {\n        typename T::value_type* imageValues = stackOfImages_.at(i).GetValues(); \n\n        // Loop over values and multiply by -1.0.\n    }\n}\n</code></pre>\n\n<p>These kinds of typedefs are used by basically every template class in the standard library: for example, <code>std::vector&lt;T&gt;</code> contains (among others) a member typedef <code>value_type</code> which is an alias for <code>T</code>.</p>\n\n<p>An alternative in C++11 and newer is to use <code>auto</code> instead, for example:</p>\n\n<pre><code>template &lt;class T&gt;\nvoid Stack::NegateAllImageValues()\n{\n    for(int i = 0; i &lt; stackOfImages_.size(); ++i)\n    {\n        auto* imageValues = stackOfImages_.at(i).GetValues(); \n\n        // Loop over values and multiply by -1.0.\n    }\n}\n</code></pre>\n\n<p>[Plain <code>auto</code> would work just as well as <code>auto*</code>, but I prefer the latter as it makes clear that you're expecting a pointer type.]</p>\n\n<p>Finally, in C++11 you could use <code>decltype</code> to get the return type of <code>GetValues()</code>:</p>\n\n<pre><code>template &lt;class T&gt;\nvoid Stack::NegateAllImageValues()\n{\n    for(int i = 0; i &lt; stackOfImages_.size(); ++i)\n    {\n        using value_type = decltype(stackOfImages_.at(i).GetValues());\n        value_type imageValues = stackOfImages_.at(i).GetValues(); \n\n        // Loop over values and multiply by -1.0.\n    }\n}\n</code></pre>\n\n<p>Although this doesn't really gain you anything over <code>auto</code>.</p>\n"}], "owner": {"reputation": 658, "user_id": 1777820, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0b583c369129af2f2f6a76e0bb65711d?s=128&d=identicon&r=PG", "display_name": "user1777820", "link": "https://stackoverflow.com/users/1777820/user1777820"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 38615251, "answer_count": 1, "score": 0, "last_activity_date": 1469628282, "creation_date": 1469627281, "question_id": 38614831, "link": "https://stackoverflow.com/questions/38614831/how-to-determine-underlying-template-type-of-template-parameter-that-inherits-fr", "title": "How to Determine Underlying Template Type of Template Parameter That Inherits From a Class Template?", "body": "<p>This has probably been asked and answered before, but I haven't been able to figure out the search terms to find it. Here is some code to show my problem (intended as pseudo code...ask for clarification if needed).</p>\n\n<p>Image.h:</p>\n\n<pre><code>template &lt;class T&gt;\nclass Image\n{\n    public:\n        // Return pointer to data.\n        T* GetValues(); \n\n        std::vector&lt;T&gt; data_;\n\n};\n\ntemplate &lt;class T&gt;\nT* Image&lt;T&gt;::GetValues()\n{\n    return &amp;data_[0];\n}\n</code></pre>\n\n<p>SpecialImage.h</p>\n\n<pre><code>class SpecialImage : public Image&lt;float&gt;\n{\n\n}\n</code></pre>\n\n<p>Stack.h</p>\n\n<pre><code>template&lt;class T&gt;\nclass Stack\n{\n    public:\n\n        void NegateAllImageValues();\n\n        std::vector&lt;T&gt; stackOfImages_;\n};\n\ntemplate &lt;class T&gt;\nvoid Stack::NegateAllImageValues()\n{\n    for(int i = 0; i &lt; stackOfImages_.size(); ++i)\n    {\n        // Type L should be float if T=SpecialImage, but how to get?\n        L* imageValues = stackOfImages_.at(i).GetValues(); \n\n        // Loop over values and multiply by -1.0.\n    }\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>{\n    // Create stack of SpecialImages.\n    Stack&lt;SpecialImage&gt; myStack; \n\n    // Create special image and add some data.\n    SpecialImage mySpecialImage; \n    mySpecialImage.data_.push_back(1.0f);\n    mySpecialImage.data_.push_back(2.0f);\n    mySpecialImage.data_.push_back(3.0f);\n\n    // Add special image to stack.\n    myStack.stackOfImages_.push_back(mySpecialImage);\n\n    // Negate all values in all SpecialImages in the stack.\n    myStack.NegateAllImageValues();\n\n}\n</code></pre>\n\n<p>My question is how to know the type L in Stack::NegateAllImageValues? I realize I could write a method Image::NegateAllValues and call that from Stack::NegateAllImageValues, but I want to know if there is a way to get the type L at the Stack level. I think I could add an additional template parameter to the function Stack::NegateAllImageValues like</p>\n\n<pre><code>template &lt;class T, class L&gt;\nvoid Stack::NegateAllImageValues()\n{\n    for(int i = 0; i &lt; stackOfImages_.size(); ++i)\n    {\n        // Type L should be float if T=SpecialImage, but how to get?\n        L* imageValues = stackOfImages_.at(i).GetValues(); \n\n        // Loop over values and multiply by -1.0.\n    }\n}\n</code></pre>\n\n<p>but then the type L is not forced to match the underlying template type of Image.</p>\n\n<p>Is there an inherent design flaw here? Is there a way to get type L at the stack level?</p>\n"}, {"tags": ["c++", "c++11", "for-loop", "gcc", "visual-c++"], "comments": [{"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 4, "creation_date": 1469626996, "post_id": 38614622, "comment_id": 64615665, "body": "Does that even compile? I thought the <code>last</code> bit had to be a declaration."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 2, "creation_date": 1469627289, "post_id": 38614622, "comment_id": 64615867, "body": "Ah, this must be them pre-emptively implementing <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3994.htm\" rel=\"nofollow noreferrer\">n3994</a> which didn&#39;t make it into C++17."}, {"owner": {"reputation": 14299, "user_id": 791713, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1d51e358999bd31439d3810486942e9b?s=128&d=identicon&r=PG", "display_name": "Niklas R", "link": "https://stackoverflow.com/users/791713/niklas-r"}, "reply_to_user": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1469627460, "post_id": 38614622, "comment_id": 64615979, "body": "@TartanLlama Thanks, I see now that &quot;<code>range_declaration&quot;</code> was chosen for a good reason. I wasn&#39;t able to deduce that it actually <b>had</b> to be a declaration and thought it could be any assignable expression."}, {"owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "edited": false, "score": 0, "creation_date": 1519622672, "post_id": 38614622, "comment_id": 84968869, "body": "related answers: <a href=\"https://stackoverflow.com/q/32706051/86967\">stackoverflow.com/q/32706051/86967</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 5, "creation_date": 1469627150, "post_id": 38614748, "comment_id": 64615786, "body": "So MSVC wasn&#39;t being MSVC again!"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1469627204, "post_id": 38614748, "comment_id": 64615819, "body": "newest VS (<a href=\"http://webcompiler.cloudapp.net/\" rel=\"nofollow noreferrer\">webcompiler.cloudapp.net</a>) also does not compile this."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1469627229, "post_id": 38614748, "comment_id": 64615835, "body": "gcc 5.1.0 compiles it in c++1z mode"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1469627322, "post_id": 38614748, "comment_id": 64615892, "body": "5.2.0 and 5.3.0 compiles it either"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1469627338, "post_id": 38614748, "comment_id": 64615903, "body": "@Borgleader OP did not say that it requires c++1z"}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": false, "score": 9, "last_activity_date": 1469631005, "last_edit_date": 1469631005, "creation_date": 1469627095, "answer_id": 38614748, "question_id": 38614622, "link": "https://stackoverflow.com/questions/38614622/range-based-for-loop-with-existing-variable/38614748#38614748", "title": "range based for loop with existing variable", "body": "<p>Your code does not compile starting with gcc 6.1 (and for all clang versions):</p>\n\n<pre><code>main.cpp:12:8: error: range-based for loop requires type for loop variable\n  for (last : v)\n       ^\n       auto &amp;&amp;\n</code></pre>\n\n<p>it looks like previous versions used auto implicitly here. The fact that you get -50 as last output is because <code>for</code> introduces local scope for last, so after <code>for</code> ends, last from outer scope was used.</p>\n\n<hr>\n\n<p>I did a little digging and this was on purpose under gcc: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3994.htm\" rel=\"nofollow\">N3994, terse range-for</a>, which shortly is doing following:</p>\n\n<pre><code>A range-based for statement of the form\n    for ( for-range-identifier : for-range-initializer ) statement\nis equivalent to\n    for ( auto&amp;&amp; for-range-identifier : for-range-initializer ) statement\n</code></pre>\n\n<p>then it didn`t make it to c++17 and was removed here:</p>\n\n<p><a href=\"https://gcc.gnu.org/viewcvs/gcc?view=revision&amp;revision=229632\" rel=\"nofollow\">https://gcc.gnu.org/viewcvs/gcc?view=revision&amp;revision=229632</a></p>\n"}, {"comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1469627624, "post_id": 38614827, "comment_id": 64616118, "body": "<code>declaration</code> has to be an actual declaration. And <code>last</code> is not."}, {"owner": {"reputation": 419, "user_id": 6643398, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nsj3y3qxesE/AAAAAAAAAAI/AAAAAAAAAmc/9NBAvbDSKnU/photo.jpg?sz=128", "display_name": "Patrik H", "link": "https://stackoverflow.com/users/6643398/patrik-h"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1469628938, "post_id": 38614827, "comment_id": 64617110, "body": "@Nicol, I&#39;m answering Niklas&#39; second question to why he&#39;s getting the values he&#39;s stating in GCC5.1. Changing <code>last</code> to an actual type declaration would not change that."}], "tags": [], "owner": {"reputation": 419, "user_id": 6643398, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nsj3y3qxesE/AAAAAAAAAAI/AAAAAAAAAmc/9NBAvbDSKnU/photo.jpg?sz=128", "display_name": "Patrik H", "link": "https://stackoverflow.com/users/6643398/patrik-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1469627274, "creation_date": 1469627274, "answer_id": 38614827, "question_id": 38614622, "link": "https://stackoverflow.com/questions/38614622/range-based-for-loop-with-existing-variable/38614827#38614827", "title": "range based for loop with existing variable", "body": "<p>according to the standard, a range based for loop is producing the same output as:</p>\n\n<pre><code>{\n  auto&amp;&amp; __range = expression;\n  for (auto __begin = begin-expression,\n            __end = end-expression;\n       __begin != __end;\n       ++__begin)\n  {\n    declaration = *__begin;\n    statement\n  }\n}\n</code></pre>\n\n<p>As you can see, the iteration variable <code>__begin</code> is being defined in its own scope.</p>\n\n<blockquote>Why is last not 99 in the last line?</blockquote>\n\n<p>You have two variables called <code>last</code>. One is in the scope of your main function and holds the value <code>-50</code>. The second variable is defined in the scope of the range based for loop. </p>\n\n<p>Inside the loop, printing the <code>last</code> variable prints the one from the same scope (ie. from the range based for loop). After the loop however, printing <code>last</code> will again print the variable from the same scope which is the one holding <code>-50</code></p>\n"}, {"comments": [{"owner": {"reputation": 14299, "user_id": 791713, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1d51e358999bd31439d3810486942e9b?s=128&d=identicon&r=PG", "display_name": "Niklas R", "link": "https://stackoverflow.com/users/791713/niklas-r"}, "edited": false, "score": 1, "creation_date": 1469628066, "post_id": 38614959, "comment_id": 64616463, "body": "I&#39;m accepting this answer as it is the only one stating that the left side of the <code>:</code> actually has to be a declaration, not an arbitrary expression, and contains a reference to the standard. Thanks! :)"}], "tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": true, "score": 20, "last_activity_date": 1469627592, "creation_date": 1469627592, "answer_id": 38614959, "question_id": 38614622, "link": "https://stackoverflow.com/questions/38614622/range-based-for-loop-with-existing-variable/38614959#38614959", "title": "range based for loop with existing variable", "body": "<p>GCC implemented standards proposal <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3994.htm\" rel=\"noreferrer\">n3994</a>, which suggests that <code>for (elem : range)</code> be syntactic sugar for <code>for (auto&amp;&amp; elem : range)</code>. This didn't make it into C++17, so the functionality has been removed from more recent versions of GCC.</p>\n\n<p>The named variable used to iterate over the range must be a declaration according to <code>[stmt.ranged]</code>, so your code shouldn't compile.</p>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 0, "last_activity_date": 1469627849, "creation_date": 1469627849, "answer_id": 38615069, "question_id": 38614622, "link": "https://stackoverflow.com/questions/38614622/range-based-for-loop-with-existing-variable/38615069#38615069", "title": "range based for loop with existing variable", "body": "<p>Your program doesn't compile with my g++ 4.9.2.</p>\n\n<p>Compile with clang++ 3.5 (with a warning: \"range-based for loop with implicit deduced type is a C++1z extension [-Wc++1z-extensions]\")</p>\n\n<p>But clang++ use different <code>last</code> variables</p>\n\n<p>With the following modified program</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint main() {\n  std::vector&lt;int&gt; v;\n  v.push_back(2);\n  v.push_back(43);\n  v.push_back(99);\n\n  int last = -50;\n\n  std::cout &lt;&lt; \"extern last pointer: \" &lt;&lt; long(&amp;last) &lt;&lt; '\\n';\n\n  for ( last : v)\n   {\n     std::cout &lt;&lt; \": \" &lt;&lt; last &lt;&lt; \" ; pointer: \" &lt;&lt; long(&amp;last) &lt;&lt; '\\n';\n   }\n\n  std::cout &lt;&lt; \"extern last pointer again: \" &lt;&lt; long(&amp;last) &lt;&lt; '\\n';\n  std::cout &lt;&lt; \": \" &lt;&lt; last &lt;&lt; std::endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>I get the following output</p>\n\n<pre><code>extern last pointer: 140721376927168\n: 2 ; pointer: 38101008\n: 43 ; pointer: 38101012\n: 99 ; pointer: 38101016\nextern last pointer again: 140721376927168\n: -50\n</code></pre>\n"}], "owner": {"reputation": 14299, "user_id": 791713, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1d51e358999bd31439d3810486942e9b?s=128&d=identicon&r=PG", "display_name": "Niklas R", "link": "https://stackoverflow.com/users/791713/niklas-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2794, "favorite_count": 0, "accepted_answer_id": 38614959, "answer_count": 4, "score": 19, "last_activity_date": 1469631005, "creation_date": 1469626745, "question_id": 38614622, "link": "https://stackoverflow.com/questions/38614622/range-based-for-loop-with-existing-variable", "title": "range based for loop with existing variable", "body": "<p>Using a range based for loop in C++11 with an existing variable, I would expect that variable to be filled with the value of the last iteration after the loop. However, I've gotten different results when I tested it.</p>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint main() {\n  std::vector&lt;int&gt; v;\n  v.push_back(2);\n  v.push_back(43);\n  v.push_back(99);\n\n  int last = -50;\n  for (last : v)\n    std::cout &lt;&lt; \":\" &lt;&lt; last &lt;&lt; \"\\n\";\n\n  std::cout &lt;&lt; last;\n  return 0;\n}\n</code></pre>\n\n<ol>\n<li>MSVC 2013 doesn't seem to support range based for loops without type declaration</li>\n<li><p>GCC-5.1 either automatically introduces a new variable or sets it back to the initial value, giving</p>\n\n<blockquote>\n  <p>:2<br>\n  :43<br>\n  :99<br>\n  -50</p>\n</blockquote></li>\n</ol>\n\n<p>I guess MSVC is just being MSVC again, but what about GCC here? Why is <code>last</code> not <code>99</code> in the last line?</p>\n\n<hr>\n\n<p>Given the <a href=\"http://en.cppreference.com/w/cpp/language/range-for\">definition by the standard</a>, I would expect the behaviour I described in the first sentence.</p>\n\n<pre><code>{\n  auto &amp;&amp; __range = range_expression ; \n  for (auto __begin = begin_expr, __end = end_expr; \n       __begin != __end; ++__begin) { \n    range_declaration = *__begin; \n    loop_statement \n  } \n} \n</code></pre>\n\n<p><code>range_declaration</code> being <code>last</code> and not <code>int last</code>, this should modify the existing variable.</p>\n"}, {"tags": ["c++", "arrays", "file", "edit", "filestream"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1469635362, "post_id": 38614524, "comment_id": 64621891, "body": "What have you tried?  Loops and iterators are a good choice.  The <code>std::string</code> container is also appropriate."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1469635438, "post_id": 38614524, "comment_id": 64621942, "body": "Are you trying to open and process each file in a directory or a list of files (like stored in a file)?"}, {"owner": {"reputation": 3, "user_id": 6597362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51d115cb27d96dd4d2568fe24c53ce0?s=128&d=identicon&r=PG&f=1", "display_name": "naschd", "link": "https://stackoverflow.com/users/6597362/naschd"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1469640439, "post_id": 38614524, "comment_id": 64624803, "body": "my program runs in cmd style So I need drag and drop each file here... I would like to replace drag and drop system by something different.  I read about open file dialog but I am not sure if it is suitable and not too complicated for me. I look for easiest way how to load paths to files somewhere (Array)  and store them and for each process the application"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1469651915, "post_id": 38614524, "comment_id": 64631090, "body": "When you select multiple files, then drag them into a console based program, Windows places each file as a separate argument / parameter to the program.  You&#39;ll need to copy the program&#39;s arguments into a container."}, {"owner": {"reputation": 3, "user_id": 6597362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51d115cb27d96dd4d2568fe24c53ce0?s=128&d=identicon&r=PG&f=1", "display_name": "naschd", "link": "https://stackoverflow.com/users/6597362/naschd"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1469712291, "post_id": 38614524, "comment_id": 64658491, "body": "So,  what I need is just create array of strings?  and set cin function to it?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1469718983, "post_id": 38614524, "comment_id": 64663907, "body": "The main function has some parameters, such as <code>int main(int argument_count, char * argument_list[])</code>.  The parameter <code>argument_list</code> is an array of pointers to all those folder names that were dragged to your program.  So, <code>argument_list[0]</code> is the name of the program, <code>argument_list[1]</code> is the first parameter, <code>argument_list[2]</code> is the second argument and so on.  The first argument, <code>argument_count</code>, is the number of parameters passed to your program."}, {"owner": {"reputation": 3, "user_id": 6597362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51d115cb27d96dd4d2568fe24c53ce0?s=128&d=identicon&r=PG&f=1", "display_name": "naschd", "link": "https://stackoverflow.com/users/6597362/naschd"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1469742702, "post_id": 38614524, "comment_id": 64677293, "body": "I am sorry I did not understand I suppose. Could you explain it closer ? Or more &quot;noobfully&quot; for me ?  But I tried to do this:  using system with which I can use cmd commands I tried to :  char[] command = &quot; DIR D:\\  /s /b &quot; ; cout &lt;&lt; system(command);  That prints for me file names of files stored in certain folder .   Can I somehow use this system command for loading all filenames inside folder to some array ??? or is it a easier way ???  thank you"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6597362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51d115cb27d96dd4d2568fe24c53ce0?s=128&d=identicon&r=PG&f=1", "display_name": "naschd", "link": "https://stackoverflow.com/users/6597362/naschd"}, "edited": false, "score": 0, "creation_date": 1469641507, "post_id": 38618188, "comment_id": 64625446, "body": "i suppose your solution means I have to load file one by one.  I wanted to avoid this situation and put all 100+ filenames inside a array at once...  each time ( now i know)  i will have up to 110 files = 110 filenames at once to load...  but i am not sure if it is possible...  like in c# wit open file dialog..."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 3, "user_id": 6597362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51d115cb27d96dd4d2568fe24c53ce0?s=128&d=identicon&r=PG&f=1", "display_name": "naschd", "link": "https://stackoverflow.com/users/6597362/naschd"}, "edited": false, "score": 0, "creation_date": 1469651789, "post_id": 38618188, "comment_id": 64631031, "body": "Putting file names into an array is quite different than opening them.  Since the OS file system API is not parallel, you can only open one at a time.  There are no bulk file opening functions in Linux nor Windows."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1469635753, "creation_date": 1469635753, "answer_id": 38618188, "question_id": 38614524, "link": "https://stackoverflow.com/questions/38614524/cpp-program-multi-file-input-using-fstream/38618188#38618188", "title": "cpp program multi-file input using fstream", "body": "<p>A loop and a container look like good things to use:  </p>\n\n<pre><code>static const char filenames[] =\n{\n  \"C:\\\\Fred\\\\file1.txt\", \"c:\\\\Fred\\\\file2.txt\", \"c:\\\\Barney\\\\file1.txt\",\n};\nstatic const unsigned int quantity_of_files =\n    sizeof(filenames) / sizeof(filenames[0]);\n\n//...\nfor (unsigned int i = 0u; i &lt; quantity_of_files; ++i)\n{\n  std::ifstream input_stream(filenames[i]);\n  Process_Input_Stream(input_stream);\n  input_stream.close();\n}\n</code></pre>\n\n<p>The task is to get the code working correctly and robust, then worry about performance.  </p>\n\n<p><em>Note:  The program is set up so that file names can be added to the array without having to change or retest the code.</em>  </p>\n"}], "owner": {"reputation": 3, "user_id": 6597362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51d115cb27d96dd4d2568fe24c53ce0?s=128&d=identicon&r=PG&f=1", "display_name": "naschd", "link": "https://stackoverflow.com/users/6597362/naschd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1469635753, "creation_date": 1469626501, "last_edit_date": 1469633323, "question_id": 38614524, "link": "https://stackoverflow.com/questions/38614524/cpp-program-multi-file-input-using-fstream", "title": "cpp program multi-file input using fstream", "body": "<p>I would like to ask about inputing more than one file or about the easiest way how to put filenames to some queue.<br>\nThis files are about edit.  </p>\n\n<p>I have,  let me say,  100 txt files and for each one I wanted to open it,  find something and and save it.  </p>\n\n<p>I have functions/methods for each operation.  </p>\n\n<p>But I run into problem loading files into program.  I made it for five or less files.  </p>\n\n<p>Process is.  Program asked me for file name in program root directory or full path to file \nfor example C/myfile.txt </p>\n\n<p>after pressing enter executes.  </p>\n\n<p>unfortunately bad thing happened and I have to do 100 files per day.  So I know in C# is possible to make open file dialog -  multiple file load...  </p>\n\n<p>In this program,  I was thinking about doing static array of strings and for each make a for cycle with iterration.  </p>\n\n<p>but I have no idea what is the easier way how to load this strings (filenames)  into this array.  </p>\n\n<p>I read something on msdn but it looks so complicated for me.  </p>\n\n<p>Can someone help?  Program is just for me and I don't want to set too many things. It is possible? \nwhat is the less or minimalistic part of code I must use -  add to my program? </p>\n\n<p>example of result I want \narray[0] = C/text. txt\narray[1] = C/texta. txt\n...\narray[50] = C/textdhsjfk. txt</p>\n\n<p>maybe it is not so easy as I think,  maybe yes. </p>\n\n<p>But I have no support in this major... So I only tried to find something on the interent and I am not sure about the result I have found. </p>\n\n<p>Thank you for time and willing to help.  </p>\n"}, {"tags": ["c++", "pointers", "using"], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1469626290, "creation_date": 1469626290, "answer_id": 38614449, "question_id": 38614360, "link": "https://stackoverflow.com/questions/38614360/using-typedef-pointer-its-default-constructor-return-nullptr/38614449#38614449", "title": "&quot;using&quot; (typedef) pointer : its default constructor return nullptr?", "body": "<p>Yes, according to the C++ standard using expression T() where T is a pointer type returns null pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "edited": false, "score": 0, "creation_date": 1469626682, "post_id": 38614456, "comment_id": 64615429, "body": "Thank for the link to the specification!  That is what I have been searching for."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "edited": false, "score": 1, "creation_date": 1469626753, "post_id": 38614456, "comment_id": 64615484, "body": "@javaLover Note that cppreference isn&#39;t the specification, although it&#39;s usually pretty accurate."}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "reply_to_user": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "edited": false, "score": 1, "creation_date": 1469626790, "post_id": 38614456, "comment_id": 64615521, "body": "@javaLover. I find that site is very useful - and generally easier to absorb that the full spec."}], "tags": [], "owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "is_accepted": true, "score": 1, "last_activity_date": 1469626302, "creation_date": 1469626302, "answer_id": 38614456, "question_id": 38614360, "link": "https://stackoverflow.com/questions/38614360/using-typedef-pointer-its-default-constructor-return-nullptr/38614456#38614456", "title": "&quot;using&quot; (typedef) pointer : its default constructor return nullptr?", "body": "<p>This is <a href=\"http://en.cppreference.com/w/cpp/language/value_initialization\" rel=\"nofollow\">value initialisation</a> and yes, given the pointer type, it will always be zero in this case. Quoting from the link;</p>\n\n<blockquote>\n  <p>The effects of value initialization are:</p>\n  \n  <p>... [redacted as not pertaining to the case of the pointer type] ...</p>\n  \n  <p>4) otherwise, the object is zero-initialized</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 1, "last_activity_date": 1469626322, "creation_date": 1469626322, "answer_id": 38614460, "question_id": 38614360, "link": "https://stackoverflow.com/questions/38614360/using-typedef-pointer-its-default-constructor-return-nullptr/38614460#38614460", "title": "&quot;using&quot; (typedef) pointer : its default constructor return nullptr?", "body": "<p>This has nothing to do with typedefs.</p>\n\n<p>Value-initializing (i.e. <code>T()</code>) for pointer types performs zero-initialization. <code>GOID</code> is a pointer type, so you get zero.</p>\n"}], "owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "closed_date": 1469626456, "accepted_answer_id": 38614456, "answer_count": 3, "score": -1, "last_activity_date": 1469627827, "creation_date": 1469626090, "last_edit_date": 1469627827, "question_id": 38614360, "link": "https://stackoverflow.com/questions/38614360/using-typedef-pointer-its-default-constructor-return-nullptr", "closed_reason": "Duplicate", "title": "&quot;using&quot; (typedef) pointer : its default constructor return nullptr?", "body": "<p>Does the default constructor of pointer that is lightly encapsulated by <code>using</code> always return a <code>nullptr</code>?</p>\n\n<p>In other words, does this function always return nullptr?</p>\n\n<pre><code>using GOID  = Go_id*;  //some outer scope\nGOID f(){\n    return GOID(); //always nullptr?\n}\n</code></pre>\n\n<p>I tested it many times; it is always <code>nullptr</code>.</p>\n\n<p>However, I am not sure whether I am lucky, or it is the C++ specification.</p>\n"}, {"tags": ["c++", "c", "parsing", "astyle"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469625903, "post_id": 38614248, "comment_id": 64614831, "body": "Maybe clang-format can do this?"}, {"owner": {"reputation": 2359, "user_id": 3801449, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/04t78.jpg?s=128&g=1", "display_name": "Eenoku", "link": "https://stackoverflow.com/users/3801449/eenoku"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1469626138, "post_id": 38614248, "comment_id": 64615010, "body": "@EOF maybe it can, but I&#39;d prefer to stick with Astyle, if possible. Our program is quite large already even without other packages."}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 6494569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a3570cf34be544d5471ad582d850f7?s=128&d=identicon&r=PG&f=1", "display_name": "mikr", "link": "https://stackoverflow.com/users/6494569/mikr"}, "is_accepted": true, "score": 0, "last_activity_date": 1469631632, "creation_date": 1469631632, "answer_id": 38616660, "question_id": 38614248, "link": "https://stackoverflow.com/questions/38614248/astyle-how-to-format-condition-without-braces-to-1tbs/38616660#38616660", "title": "Astyle - how to format condition without braces to 1TBS", "body": "<p>This may seem a bit convoluted but if you have a lot of sources\nand adding braces is an operation that you just need once,\nthe following scheme might work.</p>\n\n<p>You can stick with astyle but you need <a href=\"https://github.com/uncrustify/uncrustify\" rel=\"nofollow\">uncrustify</a> temporarily\nas well as a script I wrote called <a href=\"https://github.com/mikr/whatstyle\" rel=\"nofollow\">whatstyle</a>.</p>\n\n<p>In the following steps replace <code>test1.c</code> with your sources and keep a backup\nof your sources as they will be modified.</p>\n\n<h1>Teach astyle the current style of your sources</h1>\n\n<pre><code>whatstyle.py -f astyle --mode resilient --output astylerc test1.c\n</code></pre>\n\n<h1>Teach uncrustify the current style of your sources</h1>\n\n<pre><code>whatstyle.py -f uncrustify --output uncrustify.cfg test1.c\n</code></pre>\n\n<h1>Tell uncrustify to always add braces to ifs</h1>\n\n<pre><code>( egrep -v mod_full_brace_if &lt; uncrustify.cfg ; echo \"mod_full_brace_if = force\" ) \\\n  &gt; uncrustify_addbrace.cfg\n</code></pre>\n\n<h1>Reformat your sources with as little style changes as possible with uncrustify</h1>\n\n<pre><code>uncrustify --replace -c uncrustify_addbrace.cfg test1.c\n</code></pre>\n\n<h1>The braces have been added now retransform into the original style with astyle.</h1>\n\n<pre><code>ARTISTIC_STYLE_OPTIONS=astylerc astyle test1.c\n</code></pre>\n\n<p>Now your sources should look almost the same as before except for the added braces\nalthough there might be more changes by the back-and-forth style transformation.</p>\n"}], "owner": {"reputation": 2359, "user_id": 3801449, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/04t78.jpg?s=128&g=1", "display_name": "Eenoku", "link": "https://stackoverflow.com/users/3801449/eenoku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 38616660, "answer_count": 1, "score": 1, "last_activity_date": 1469631632, "creation_date": 1469625788, "question_id": 38614248, "link": "https://stackoverflow.com/questions/38614248/astyle-how-to-format-condition-without-braces-to-1tbs", "title": "Astyle - how to format condition without braces to 1TBS", "body": "<p>I have a program which uses Astyle to format the code into 1TBS. So, if I have a code like this</p>\n\n<pre><code>if(condition)\n    func(a, b);\n</code></pre>\n\n<p>it changes to this</p>\n\n<pre><code>if(condition) {\n    func(a, b);\n}\n</code></pre>\n\n<hr>\n\n<p><strong>The problem</strong> is, when parameters in the called function are broken into multiple lines, like this:</p>\n\n<pre><code>if(condition)\n    func(a, \n         b);\n</code></pre>\n\n<p>Then Astyle is not able to add braces even if I try to force him with <code>--add-brackets</code>. Is it possible to do it some other way?</p>\n\n<p>My command now looks like this:</p>\n\n<pre><code>astyle --style=1tbs --add-brackets  test.c\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "dll"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1469626975, "post_id": 38614170, "comment_id": 64615647, "body": "You cannot use a .def file to expose static data.  The dllexport attribute is necessary to get the linker to generate a pointer to the data, the pointer value is relocatable and automatically gets adjusted when the DLL can&#39;t be loaded at its preferred base address.  Likewise, dllimport is necessary to tell the compiler to use that pointer. &quot;Can&#39;t do it&quot; usually means &quot;don&#39;t want to do it&quot;, you perhaps ought to be a bit worried about having so much static data.  The alternative is to add accessor functions that you can export that returns a pointer to the data."}, {"owner": {"reputation": 87, "user_id": 3244471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9100cb45f467dc8023e08523780daac?s=128&d=identicon&r=PG&f=1", "display_name": "Clusty", "link": "https://stackoverflow.com/users/3244471/clusty"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1469627957, "post_id": 38614170, "comment_id": 64616377, "body": "There&#39;s not that much static data. Mostly just singletons that are defined inside the static lib and painstakingly initialized by DLL1. I could go around and change the headers to expose the correct functionality. The big problem stems from the fact that all errors are silent, thus you cannot know wha else did i miss."}], "owner": {"reputation": 87, "user_id": 3244471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9100cb45f467dc8023e08523780daac?s=128&d=identicon&r=PG&f=1", "display_name": "Clusty", "link": "https://stackoverflow.com/users/3244471/clusty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1469625557, "creation_date": 1469625557, "question_id": 38614170, "link": "https://stackoverflow.com/questions/38614170/exporting-and-importing-symbols-from-dlls-using-def-files", "title": "Exporting and Importing symbols from DLLs using DEF files", "body": "<p>I am facing the following problem:\nI have DLL1 that links with a whole lot of static libs but does not export anything and the executable links only with DLL1.\nI am trying to add a second DLL2 that uses some of the functionality from static libs that DLL1 links with, but the constraint is that all singletons from this static should be shared between the 2 DLL's</p>\n\n<p>Since we are talking about a huge codebase, I cannot go around and do a dllimport/export in all the headers.\nI saw that DEF files might be useful. </p>\n\n<p>I was able to export all the symbols using some scripting magic, but am unable to use the DEF file for \"dllimport\" part.\nAs per this badly written article:\n<a href=\"https://msdn.microsoft.com/en-us/library/54xsd65y.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/54xsd65y.aspx</a>\nit should be possible to import using DEFs, but I cannot figure out how to do it.</p>\n\n<p>As a conclusion:\nI need to share all instances from the common code inside the 2 DLLs and cannot do dllimport/dllexport\nAnybody has an Idea how this could happen.</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "gcc4.8"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 5, "creation_date": 1469625390, "post_id": 38614061, "comment_id": 64614419, "body": "What compiler?  Unrelated to your compiler error, but you should be aware that the code as written is going to almost certainly result in undefined behavior, because the lambda captures by reference, is moved into a thread, then the scope where the data is valid is left."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 3, "creation_date": 1469625446, "post_id": 38614061, "comment_id": 64614469, "body": "Looks like you have too many braces."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 2, "creation_date": 1469625484, "post_id": 38614061, "comment_id": 64614510, "body": "Your code does not compile as it is, there brackets everywhere, <code>t</code> is not declared, ...After cleaning, I have no problem compiling this, so you should provide an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "reply_to_user": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1469625595, "post_id": 38614061, "comment_id": 64614591, "body": "@TartanLlama There was more stuff inside the lambda leftover brace after cleaning it up"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 1, "creation_date": 1469625858, "post_id": 38614061, "comment_id": 64614792, "body": "@Aram Add the compiler version to your question - This is clearly specific to gcc &lt; 4.9 (it works with gcc 4.9). Upgrading your compiler would be the easiest way to fix this if you can."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1469626158, "post_id": 38614061, "comment_id": 64615026, "body": "@Aram for gcc4.8 you might use std::tuple to pass data to your wrapped function: <code>worker(Fn f, Args ... args) { std::tuple&lt;Args...&gt; p(argc...);   ....  f(p) .....</code>"}, {"owner": {"reputation": 566, "user_id": 4667104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-rGRu3uu46Vg/AAAAAAAAAAI/AAAAAAAAAS4/sFeLdQuPwdU/photo.jpg?sz=128", "display_name": "Elvis Teixeira", "link": "https://stackoverflow.com/users/4667104/elvis-teixeira"}, "edited": false, "score": 0, "creation_date": 1469626993, "post_id": 38614061, "comment_id": 64615663, "body": "It compiles fine with GCC 4.9. Can you try a newer compiler?"}], "answers": [{"comments": [{"owner": {"reputation": 1905, "user_id": 2950135, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/HuZ2P.jpg?s=128&g=1", "display_name": "Charles Pehlivanian", "link": "https://stackoverflow.com/users/2950135/charles-pehlivanian"}, "edited": false, "score": 1, "creation_date": 1469629668, "post_id": 38614407, "comment_id": 64617737, "body": "Just a toy example I know but without joining or detaching that thread your main will make an unexpected call to <code>terminate()</code>..."}], "tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": true, "score": 2, "last_activity_date": 1469627461, "last_edit_date": 1469627461, "creation_date": 1469626203, "answer_id": 38614407, "question_id": 38614061, "link": "https://stackoverflow.com/questions/38614061/call-function-inside-a-lambda-passed-to-a-thread/38614407#38614407", "title": "Call function inside a lambda passed to a thread", "body": "<p>As said in the comments, this compile fine with gcc-4.9 (and above), but if you need to use gcc-4.8 you can add parameters to the lambda in the <code>worker</code> constructor and pass the arguments via the <code>std::thread</code> constructor:</p>\n\n<pre><code>class worker {\npublic:\n    template &lt;class Fn, class... Args&gt;\n    explicit worker(Fn f, Args ...args) {\n        t = std::thread([f](Args ...largs) -&gt; void {\n                f(largs...);\n        }, std::move(args)...);\n    }\nprivate:\n    std::thread t;\n};\n</code></pre>\n\n<p>This will also create copy of the arguments in the lambda arguments, unlike the capture by reference you were using <code>[&amp;]</code> that was probably incorrect in this case (see @Yakk comment).</p>\n"}], "owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 965, "favorite_count": 1, "accepted_answer_id": 38614407, "answer_count": 1, "score": 1, "last_activity_date": 1469627461, "creation_date": 1469625272, "last_edit_date": 1469625867, "question_id": 38614061, "link": "https://stackoverflow.com/questions/38614061/call-function-inside-a-lambda-passed-to-a-thread", "title": "Call function inside a lambda passed to a thread", "body": "<p>I'm trying to create a object that can be given a function and its parameters to his constructor. This class will then call the given function inside a lambda that is instead passed to a thread. Something along the lines of </p>\n\n<pre><code>class worker {\npublic:\n    template &lt;class Fn, class... Args&gt;\n    explicit worker(Fn f, Args ... args) {\n        t = std::thread([&amp;]() -&gt; void {\n                f(args...);\n        });\n    }\nprivate:\n    std::thread t;\n};\n\nint main() {\n    worker t([]() -&gt; void {\n        for (size_t i = 0; i &lt; 100; i++)\n            std::cout &lt;&lt; i &lt;&lt; std::endl;\n    });\n\n    return 0;\n}\n</code></pre>\n\n<p>But I get the following error</p>\n\n<pre><code>error: parameter packs not expanded with '...': f(args...);\n</code></pre>\n\n<p>What am I doing wrong here? Any help would be appreciated.</p>\n"}, {"tags": ["c++", "variadic-templates", "variadic-functions", "std-function", "stdbind"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1469647924, "post_id": 38613965, "comment_id": 64629054, "body": "Please don&#39;t edit solutions into your questions."}], "answers": [{"comments": [{"owner": {"reputation": 100, "user_id": 5179631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/721dda3ea53e0ff2ce6b8164845bd068?s=128&d=identicon&r=PG&f=1", "display_name": "Ody", "link": "https://stackoverflow.com/users/5179631/ody"}, "edited": false, "score": 0, "creation_date": 1469629023, "post_id": 38614932, "comment_id": 64617194, "body": "Thanks! It is working. Updated my original question with a live solution demo"}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 2, "last_activity_date": 1469627974, "last_edit_date": 1469627974, "creation_date": 1469627532, "answer_id": 38614932, "question_id": 38613965, "link": "https://stackoverflow.com/questions/38613965/stdfunction-to-variadic-member-function-and-then-bind-variadic-template-argume/38614932#38614932", "title": "std::function to variadic member function and then bind variadic template arguments", "body": "<p>The problem is that <code>&amp;Reset</code> is not a valid pointer-to-member expression.</p>\n\n<p>You need to say <code>&amp;Foo::Reset</code> to form a pointer-to-member function, and you also need to supply the <code>this</code> pointer, so you're almost correct with:</p>\n\n<pre><code>   // mf_ = std::bind(&amp;Foo::Reset, this, args...); ???\n</code></pre>\n\n<p>But it's still not valid because <code>Reset</code> is a function template and so you need to say which specialization of the template you mean.</p>\n\n<p>You can tell the compiler which specialization you want by providing an explicit template argument list:</p>\n\n<pre><code>mf_ = std::bind(&amp;Foo::Reset&lt;T&amp;...&gt;, this, args...);\n</code></pre>\n\n<p>Or by creating a variable of the right type, initialized from <code>&amp;Foo::Reset</code>, which allows the compiler to deduce which specialization you mean:</p>\n\n<pre><code>void (Foo::*f)(T&amp;...) = &amp;Foo::Reset;\nmf_ = std::bind(f, this, args...);\n</code></pre>\n\n<p>Or by creating a typedef for the right type, and casting <code>&amp;Foo::Reset</code> to that type:</p>\n\n<pre><code>   using pmf_type = void (Foo::*)(T&amp;...);\n   mf_ = std::bind((pmf_type)&amp;Foo::Reset, this, args...);\n</code></pre>\n"}], "owner": {"reputation": 100, "user_id": 5179631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/721dda3ea53e0ff2ce6b8164845bd068?s=128&d=identicon&r=PG&f=1", "display_name": "Ody", "link": "https://stackoverflow.com/users/5179631/ody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 749, "favorite_count": 0, "accepted_answer_id": 38614932, "answer_count": 1, "score": 1, "last_activity_date": 1504409302, "creation_date": 1469625030, "last_edit_date": 1504409302, "question_id": 38613965, "link": "https://stackoverflow.com/questions/38613965/stdfunction-to-variadic-member-function-and-then-bind-variadic-template-argume", "title": "std::function to variadic member function and then bind variadic template arguments", "body": "<p>I have two variadic class member functions. \nWhen the first one <code>Init(...)</code> is called I want to create a std::function to the second class member function and then bind the arguments of <code>Init(...)</code> to the function pointer.</p>\n\n<p>So then later on I can just call <code>mf_()</code> without having to pass all arguments to <code>Reset(...)</code> again</p>\n\n<p>I'd like to avoid making it template class and store the arguments in a tuple.</p>\n\n<p>I'm trying to make the following example work :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;functional&gt;\n\nusing namespace std;\n\nclass Foo\n{\npublic:\n    template&lt;typename... T&gt;\n    void Init(T&amp;... args)\n    {\n        cout &lt;&lt; __func__ &lt;&lt; endl;\n        Print(args...);\n\n        // bind args.. to Reset ..\n        mf_ = std::bind(&amp;Reset, args...);\n       // mf_ = std::bind(&amp;Foo::Reset, this, args...); ???\n    }\n\n    template&lt;typename... T&gt;\n    void Reset(T&amp;... args)\n    {\n        cout &lt;&lt; __func__ &lt;&lt; endl;\n    }\n\n    // std::function to Reset(...)\n    std::function&lt;void()&gt; mf_;\n\nprivate:\n    template&lt;typename First&gt;\n    void Print(First&amp; arg)\n    {\n        cout &lt;&lt; arg &lt;&lt; endl;\n    }\n\n    template&lt;typename First, typename... Rest&gt;\n    void Print(First&amp; arg, Rest&amp;... args)\n    {\n        cout &lt;&lt; arg &lt;&lt; \" \";\n        Print(args...);\n    }\n};\n\nint main() \n{\n    int arg1 = 1;\n    int arg2 = 2;\n    string arg3 { \"test\" };\n    double arg4 = 1.10;\n\n    Foo foo;\n    foo.Init(arg1, arg2, arg3, arg4);\n\n    //foo.mf_();\n    return 0;\n}\n</code></pre>\n\n<p>Link to live example : <a href=\"http://cpp.sh/4ylm\" rel=\"nofollow noreferrer\">http://cpp.sh/4ylm</a></p>\n\n<p>When I compile I get an error that states </p>\n\n<blockquote>\n  <p>template argument deduction/substitution failed: 17:37:<br>\n  note: couldn't deduce template parameter '_Result'</p>\n</blockquote>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1469625679, "post_id": 38613961, "comment_id": 64614663, "body": "We don&#39;t know what you&#39;re doing inside that function (which is probably the issue). Try returning the cloned matrix: <code>return resMat.clone();</code> since your internal buffer <code>rot</code> will probably just contain garbage once you exit the function. Or simply <code>return cv::Mat(3, 3, CV_32F, rot).clone();</code>"}, {"owner": {"reputation": 353, "user_id": 2557061, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6daee7f2b95e709e16aa2c50f9b4d705?s=128&d=identicon&r=PG", "display_name": "BeJay", "link": "https://stackoverflow.com/users/2557061/bejay"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1469625900, "post_id": 38613961, "comment_id": 64614829, "body": "Yeah, this is the answer. I have to clone the mat. Thank you"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1469626120, "post_id": 38613961, "comment_id": 64614996, "body": "Glad it helped, posted as an answer then"}], "answers": [{"tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": true, "score": 0, "last_activity_date": 1469626109, "creation_date": 1469626109, "answer_id": 38614371, "question_id": 38613961, "link": "https://stackoverflow.com/questions/38613961/cvmat-cvtype-changes-when-return/38614371#38614371", "title": "Cv::Mat CvType changes when return", "body": "<p>Once you exit the function, the buffer <code>rot</code> will contain garbage values. You need to <code>clone()</code> the matrix to create a deep copy of the internal data, since simple copy will just create another <code>Mat</code> header pointing to the same internal data (which will get corrupted).</p>\n\n<p>So you can:</p>\n\n<pre><code>return resMat.clone();\n</code></pre>\n\n<p>or avoid to create an intermediate matrix:</p>\n\n<pre><code>return cv::Mat(3, 3, CV_32F, rot).clone();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1469663092, "post_id": 38619438, "comment_id": 64635247, "body": "Yep, that&#39;s better.. cloning 9 floats its not a big deal, though"}], "tags": [], "owner": {"reputation": 1177, "user_id": 1301624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb18f36badd852b20f7e745309b0b65c?s=128&d=identicon&r=PG", "display_name": "cxyzs7", "link": "https://stackoverflow.com/users/1301624/cxyzs7"}, "is_accepted": false, "score": 2, "last_activity_date": 1469639918, "creation_date": 1469639918, "answer_id": 38619438, "question_id": 38613961, "link": "https://stackoverflow.com/questions/38613961/cvmat-cvtype-changes-when-return/38619438#38619438", "title": "Cv::Mat CvType changes when return", "body": "<p>I am sure the <code>clone()</code> approach works, but if you do care about performance, you should try to avoid the copy. The idea is to create the <code>cv::Mat</code> first, and operate directly on its data. In your case</p>\n\n<pre><code>cv::Mat transformEulerToRotation(const cv::Mat &amp;euler)\n{\n  cv::Mat rotMat(3, 3, CV_32F);\n  float* rot = rotMat.ptr&lt;float&gt;();\n  // You can operate on rot now\n  // transforming things\n  // ...\n  // Check the result\n  std::cout &lt;&lt; \"rotMat\" &lt;&lt; rotMat&lt;&lt; std::endl;\n  return rotMat;\n}\n</code></pre>\n"}], "owner": {"reputation": 353, "user_id": 2557061, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6daee7f2b95e709e16aa2c50f9b4d705?s=128&d=identicon&r=PG", "display_name": "BeJay", "link": "https://stackoverflow.com/users/2557061/bejay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 38614371, "answer_count": 2, "score": 0, "last_activity_date": 1469639918, "creation_date": 1469625020, "question_id": 38613961, "link": "https://stackoverflow.com/questions/38613961/cvmat-cvtype-changes-when-return", "title": "Cv::Mat CvType changes when return", "body": "<p>I've used OpenCv to transform euler angles to a rotationmatrix</p>\n\n<pre><code>cv::Mat transformEulerToRotation(const cv::Mat &amp;euler) {\n  float rot[9]\n  //transforming things\n  //...\n  cv::Mat resMat = cv::Mat(3, 3, CV_32F, rot);\n  //here can I check the result\n  std::cout &lt;&lt; \"resMat \" &lt;&lt; resMat &lt;&lt; std::endl;\n  return resMat;\n}\n\nvoid otherFunction() {\n  //...\n  std::cout &lt;&lt; \"rotMat function \" &lt;&lt; transformEulerToRotation(euler) &lt;&lt; std::endl;\n  cv::Mat rotMat = transformEulerToRotation(euler).clone;\n  std::cout &lt;&lt; \"rotMat variable \" &lt;&lt; rotMat &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>As a result I get e.g.:</p>\n\n<pre><code>resMat [0.99965221, -0.024546526, -0.009639469;\n-0.017124595, 0.99955207, 0.024376612;\n0.010061417, 0.017124617, 0.99980277]\n\nrotMat function [6.4592681e-31, 0, 2.6510468e-36;\n0, 4.291036e-38, 0;\n6.4569209e-31, 0, 0.21559119]\n\nrotMat variable [0.99965221, -0.024546526, 1.5537966e-32;\n-3.7597382e+19, 0.99955207, 0.024376612;\n9.3246211e-39, 0, 0.21557593]\n</code></pre>\n\n<p>I don't know what is changing when I just return the cv::Mat. What can I do to get back the Matrix with the same values.</p>\n"}]